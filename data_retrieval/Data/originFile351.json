{"items":[{"tags":["java","discord4j"],"answers":[{"tags":[],"owner":{"account_id":13253208,"reputation":166,"user_id":9570150,"display_name":"NovaFox161"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1687538449,"creation_date":1687538449,"answer_id":76542035,"question_id":76541979,"body_markdown":"You need to enable the &quot;Message Content&quot; intent in the developer portal: https://support-dev.discord.com/hc/en-us/articles/4404772028055-Message-Content-Privileged-Intent-FAQ","title":"Discord4J - getContent() - Method delivers empty string","body":"<p>You need to enable the &quot;Message Content&quot; intent in the developer portal: <a href=\"https://support-dev.discord.com/hc/en-us/articles/4404772028055-Message-Content-Privileged-Intent-FAQ\" rel=\"nofollow noreferrer\">https://support-dev.discord.com/hc/en-us/articles/4404772028055-Message-Content-Privileged-Intent-FAQ</a></p>\n"}],"owner":{"account_id":28882021,"reputation":3,"user_id":22121313,"display_name":"delphinho"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":144,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76542035,"answer_count":1,"score":0,"last_activity_date":1687538449,"creation_date":1687537918,"question_id":76541979,"body_markdown":"I am currently trying to write a Discord Bot and I found a great tutorial at https://www.baeldung.com/spring-discord4j-bot\r\n\r\nThe source code is also available on GitHub, however I&#39;m not able to make it run and couldn&#39;t find any advice when googling or asking ChatGPT.\r\n\r\nIn method processCommand of MessageListener, the text should be retrieved via eventMessage.getContent(). However, whenever a user is posting, this string is empty, only the messages coming from the Bot itself are recognized. Does anyone have an idea, how I could resolve that?\r\n\r\nPlease find below the snippet. I already tried to get the data directly from the field &quot;eventMessage&quot; but couldn&#39;t make it work.\r\n\r\n     public Mono&lt;Void&gt; processCommand(Message eventMessage) {    \t\r\n    \t\r\n    \t\r\n    \tSystem.out.println(&quot;Message: &quot; + eventMessage.getContent());\r\n    \tSystem.out.println(&quot;User: &quot; + eventMessage.getAuthor().get().getUsername());\r\n\r\n    \t\r\n        return Mono.just(eventMessage)\r\n                .filter(message -&gt; message.getAuthor().map(user -&gt; !user.isBot()).orElse(false))\r\n                .filter(message -&gt; message.getContent().equalsIgnoreCase(&quot;!todo&quot;))\r\n                .flatMap(Message::getChannel)\r\n                .flatMap(channel -&gt; channel.createMessage(&quot;Things to do today:\\n&quot; +\r\n                                                          &quot; - write a bot\\n&quot; +\r\n                                                          &quot; - eat lunch\\n&quot; +\r\n                                                          &quot; - play a game&quot;))\r\n                .then();\r\n    }\r\n\r\nLooking forward to getting some advice,\r\n\r\nThank you and kind regards :-)\r\n\r\nI tried to debug it in eclipse, but string is always empty. I&#39;m using Gradle 8.1.1 and SpringBoot 3.1.0 and Discord4j 3.2.5\r\n```\r\ntype here\r\n```\r\n","title":"Discord4J - getContent() - Method delivers empty string","body":"<p>I am currently trying to write a Discord Bot and I found a great tutorial at <a href=\"https://www.baeldung.com/spring-discord4j-bot\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-discord4j-bot</a></p>\n<p>The source code is also available on GitHub, however I'm not able to make it run and couldn't find any advice when googling or asking ChatGPT.</p>\n<p>In method processCommand of MessageListener, the text should be retrieved via eventMessage.getContent(). However, whenever a user is posting, this string is empty, only the messages coming from the Bot itself are recognized. Does anyone have an idea, how I could resolve that?</p>\n<p>Please find below the snippet. I already tried to get the data directly from the field &quot;eventMessage&quot; but couldn't make it work.</p>\n<pre><code> public Mono&lt;Void&gt; processCommand(Message eventMessage) {       \n    \n    \n    System.out.println(&quot;Message: &quot; + eventMessage.getContent());\n    System.out.println(&quot;User: &quot; + eventMessage.getAuthor().get().getUsername());\n\n    \n    return Mono.just(eventMessage)\n            .filter(message -&gt; message.getAuthor().map(user -&gt; !user.isBot()).orElse(false))\n            .filter(message -&gt; message.getContent().equalsIgnoreCase(&quot;!todo&quot;))\n            .flatMap(Message::getChannel)\n            .flatMap(channel -&gt; channel.createMessage(&quot;Things to do today:\\n&quot; +\n                                                      &quot; - write a bot\\n&quot; +\n                                                      &quot; - eat lunch\\n&quot; +\n                                                      &quot; - play a game&quot;))\n            .then();\n}\n</code></pre>\n<p>Looking forward to getting some advice,</p>\n<p>Thank you and kind regards :-)</p>\n<p>I tried to debug it in eclipse, but string is always empty. I'm using Gradle 8.1.1 and SpringBoot 3.1.0 and Discord4j 3.2.5</p>\n<pre><code>type here\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":14162458,"reputation":3900,"user_id":10231374,"display_name":"Toni"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1687537961,"creation_date":1687536868,"answer_id":76541864,"question_id":76541543,"body_markdown":"Spring profiles are exactly what you are looking for. You can annotate both of your components with `@Profile` in the following way:\r\n\r\n```java\r\n@Profile(&quot;remote&quot;)\r\n@Component\r\npublic RemoteFooImpl implements Foo {\r\n   String foo() {\r\n      return &quot;I am remote. A lot of network required.&quot;;\r\n   }\r\n}\r\n```\r\n\r\n```java\r\n@Profile(&quot;!remote&quot;)// or @Profile(&quot;local&quot;)\r\n@Component\r\npublic LocalFooImpl implements Foo {\r\n   String foo() {\r\n     return &quot;I am local. No network required.&quot;;\r\n   }\r\n}\r\n```\r\n\r\nThen, set an active profile using the property below:\r\n\r\n```\r\nspring.profiles.active=remote\r\n```\r\n\r\n\r\n\r\nFor more details check [Spring documentation][1].\r\n\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#features.profiles","title":"How to @Autowire to different component implementation on environment variable condition in Spring Boot","body":"<p>Spring profiles are exactly what you are looking for. You can annotate both of your components with <code>@Profile</code> in the following way:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Profile(&quot;remote&quot;)\n@Component\npublic RemoteFooImpl implements Foo {\n   String foo() {\n      return &quot;I am remote. A lot of network required.&quot;;\n   }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Profile(&quot;!remote&quot;)// or @Profile(&quot;local&quot;)\n@Component\npublic LocalFooImpl implements Foo {\n   String foo() {\n     return &quot;I am local. No network required.&quot;;\n   }\n}\n</code></pre>\n<p>Then, set an active profile using the property below:</p>\n<pre><code>spring.profiles.active=remote\n</code></pre>\n<p>For more details check <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#features.profiles\" rel=\"nofollow noreferrer\">Spring documentation</a>.</p>\n"}],"owner":{"account_id":352072,"reputation":3845,"user_id":688954,"accept_rate":73,"display_name":"Petra Barus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76541864,"answer_count":1,"score":1,"last_activity_date":1687537961,"creation_date":1687534303,"question_id":76541543,"body_markdown":"I have an interface and implementation classes in Spring Boot something like this,\r\n\r\n```\r\npublic interface Foo {\r\n   String foo();\r\n}\r\n\r\n//\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\npublic LocalFooImpl implements Foo {\r\n   String foo() {\r\n     return &quot;I am local. No network required.&quot;;\r\n   }\r\n}\r\n\r\n//\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\npublic RemoteFooImpl implements Foo {\r\n   String foo() {\r\n      return &quot;I am remote. A lot of network required.&quot;;\r\n   }\r\n}\r\n```\r\n\r\n\r\nI am going to use the it in the RestController. I am thinking something like below. Please correct me if I am wrong, I am very new to Spring Boot.\r\n\r\n\r\n```\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\npublic class MyController {\r\n\r\n   @Autowired\r\n   private Foo myFoo;\r\n}\r\n```\r\n\r\nI am thinking that, when I am running this controller in the remote environment it will use the `RemoteFooImpl` instance, but for local development it will use the `LocalFooImpl`. In the remote deployment, I am going to put an environment variable, something like `IS_REMOTE=1`. So when the application detects `IS_REMOTE` environment variable exists it will use `RemoteFooImpl`. But in the local or build server, it will use the `LocalFooImpl`.\r\n\r\nHow do I achieve that? Is there a Spring annotation I can use, or is there a Factory pattern that I can use?","title":"How to @Autowire to different component implementation on environment variable condition in Spring Boot","body":"<p>I have an interface and implementation classes in Spring Boot something like this,</p>\n<pre><code>public interface Foo {\n   String foo();\n}\n\n//\nimport org.springframework.stereotype.Component;\n\n@Component\npublic LocalFooImpl implements Foo {\n   String foo() {\n     return &quot;I am local. No network required.&quot;;\n   }\n}\n\n//\nimport org.springframework.stereotype.Component;\n\n@Component\npublic RemoteFooImpl implements Foo {\n   String foo() {\n      return &quot;I am remote. A lot of network required.&quot;;\n   }\n}\n</code></pre>\n<p>I am going to use the it in the RestController. I am thinking something like below. Please correct me if I am wrong, I am very new to Spring Boot.</p>\n<pre><code>import org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class MyController {\n\n   @Autowired\n   private Foo myFoo;\n}\n</code></pre>\n<p>I am thinking that, when I am running this controller in the remote environment it will use the <code>RemoteFooImpl</code> instance, but for local development it will use the <code>LocalFooImpl</code>. In the remote deployment, I am going to put an environment variable, something like <code>IS_REMOTE=1</code>. So when the application detects <code>IS_REMOTE</code> environment variable exists it will use <code>RemoteFooImpl</code>. But in the local or build server, it will use the <code>LocalFooImpl</code>.</p>\n<p>How do I achieve that? Is there a Spring annotation I can use, or is there a Factory pattern that I can use?</p>\n"},{"tags":["java","spring","spring-boot","jpa","iterator"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1687454118,"post_id":76530573,"comment_id":134942562,"body_markdown":"You are taking a full stream and iterating over it to turn it into a bunch of lists, and then serially, iterating over each list to call findLatestUpdateById and buildXOut. There are any number of ways to parallelize this, possibly by moving the processBatch to a thread to process instead of having the forEachRemaining wait for it to finish, or getting a list instead. Note though your List&lt;OutX&gt; built is not thread safe, so you can&#39;t have concurrent processes adding to it - https://stackoverflow.com/questions/60095513/why-is-list-parallelstream-foreach-not-processing-all-the-elements-in-the-li","body":"You are taking a full stream and iterating over it to turn it into a bunch of lists, and then serially, iterating over each list to call findLatestUpdateById and buildXOut. There are any number of ways to parallelize this, possibly by moving the processBatch to a thread to process instead of having the forEachRemaining wait for it to finish, or getting a list instead. Note though your List&lt;OutX&gt; built is not thread safe, so you can&#39;t have concurrent processes adding to it - <a href=\"https://stackoverflow.com/questions/60095513/why-is-list-parallelstream-foreach-not-processing-all-the-elements-in-the-li\" title=\"why is list parallelstream foreach not processing all the elements in the li\">stackoverflow.com/questions/60095513/&hellip;</a>"},{"owner":{"account_id":12135514,"reputation":423,"user_id":8861099,"display_name":"cUser"},"score":0,"creation_date":1687537499,"post_id":76530573,"comment_id":134955995,"body_markdown":"Thank you for the suggestion maybe you can have a look at the updated question and you will have some better approach :)","body":"Thank you for the suggestion maybe you can have a look at the updated question and you will have some better approach :)"}],"answers":[{"tags":[],"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687454679,"creation_date":1687454679,"answer_id":76534329,"question_id":76530573,"body_markdown":"One of many possible options:\r\n\r\n    List&lt;X&gt; readIn = repository.findBySourceFileCreationDate(getDateFromFilename(sourceFileName));\r\n    List&lt;OutX&gt; built = readIn.parallelStream()\r\n        .map(m -&gt; \r\n            {\r\n              X xEntry = repository.findLatestUpdateById(m.getEntryId());\r\n              if (xEntry == null) {\r\n                return null;\r\n              }\r\n              return buildXOut(x);\r\n            })\r\n        .filter(Objects::nonNull)\r\n        .collect(Collectors.toList());","title":"Parallel processing instead of Interators.forEachRemaining?","body":"<p>One of many possible options:</p>\n<pre><code>List&lt;X&gt; readIn = repository.findBySourceFileCreationDate(getDateFromFilename(sourceFileName));\nList&lt;OutX&gt; built = readIn.parallelStream()\n    .map(m -&gt; \n        {\n          X xEntry = repository.findLatestUpdateById(m.getEntryId());\n          if (xEntry == null) {\n            return null;\n          }\n          return buildXOut(x);\n        })\n    .filter(Objects::nonNull)\n    .collect(Collectors.toList());\n</code></pre>\n"}],"owner":{"account_id":12135514,"reputation":423,"user_id":8861099,"display_name":"cUser"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687537425,"creation_date":1687427027,"question_id":76530573,"body_markdown":"I have this piece of code that is getting 200k entries from the database and afterwards is processing it in batches. What I noticed is that the processBatch (5000 entries per batch) it takes around 3 minutes to process (2 hours processing basically)\r\n\r\nI am already using indexes for the database for the entryId to speedup finding entries.  What I am wondering is if is possible to have this batch processing somehow maybe running in parallel.\r\n\r\nIf is not clear I would gladly refactor the question\r\n\r\n```\r\n\r\n         Stream&lt;X&gt; streams= repository\r\n                .streamBySourceFileCreationDate(getDateFromFilename(sourceFileName));\r\n\r\n        int batchSize = properties.getBuildOutput().getSize();\r\n        List&lt;OutX&gt; built = new ArrayList&lt;&gt;();\r\n\r\n        Iterators.partition(streams.iterator(), batchSize)\r\n                .forEachRemaining(list -&gt; processBatch(list, built));\r\n\r\n```\r\n\r\n\r\n```\r\n   private void processBatch(List&lt;X&gt; list, List&lt;OutX&gt; built) {\r\n        list.stream().map(m -&gt; {\r\n                X xEntry = repository\r\n                        .findLatestUpdateById(m.getEntryId());\r\n                if (xEntry == null) {\r\n                    return null;\r\n                }\r\n                XOut out = buildXOut(x);\r\n                return out;\r\n        }).filter(Objects::nonNull).forEach(built::add);\r\n}\r\n```\r\nUPDATE 1:\r\nI tried like this to update the first part and this reduced the processing to around 25 min. \r\nAny other suggestion maybe how to make this faster ? \r\n\r\n```\r\nList&lt;x&gt; lists = repository\r\n              .findBySourceFileCreationDate(getDateFromFilename(sourceFileName));\r\n\r\nint batchSize = properties.getBuildOutput().getSize();\r\n        List&lt;OutX&gt; built = new ArrayList&lt;&gt;();// Should I use maybe a vector for thread safe ? \r\n\r\n\r\n        ForkJoinPool forkJoinPool = new ForkJoinPool();\r\n        List&lt;ForkJoinTask&lt;?&gt;&gt; tasks = new ArrayList&lt;&gt;();\r\n\r\n        for (int i = 0; i &lt; lists.size(); i += batchSize) {\r\n            int endIndex = Math.min(i + batchSize, lists.size());\r\n            List&lt;X&gt; batch = lists.subList(i, endIndex);\r\n            ForkJoinTask&lt;?&gt; task = forkJoinPool.submit(() -&gt; processBatch(batch, built));\r\n            tasks.add(task);\r\n        }\r\n\r\n        tasks.forEach(ForkJoinTask::join);\r\n        forkJoinPool.shutdown();\r\n```\r\n\r\n","title":"Parallel processing instead of Interators.forEachRemaining?","body":"<p>I have this piece of code that is getting 200k entries from the database and afterwards is processing it in batches. What I noticed is that the processBatch (5000 entries per batch) it takes around 3 minutes to process (2 hours processing basically)</p>\n<p>I am already using indexes for the database for the entryId to speedup finding entries.  What I am wondering is if is possible to have this batch processing somehow maybe running in parallel.</p>\n<p>If is not clear I would gladly refactor the question</p>\n<pre><code>\n         Stream&lt;X&gt; streams= repository\n                .streamBySourceFileCreationDate(getDateFromFilename(sourceFileName));\n\n        int batchSize = properties.getBuildOutput().getSize();\n        List&lt;OutX&gt; built = new ArrayList&lt;&gt;();\n\n        Iterators.partition(streams.iterator(), batchSize)\n                .forEachRemaining(list -&gt; processBatch(list, built));\n\n</code></pre>\n<pre><code>   private void processBatch(List&lt;X&gt; list, List&lt;OutX&gt; built) {\n        list.stream().map(m -&gt; {\n                X xEntry = repository\n                        .findLatestUpdateById(m.getEntryId());\n                if (xEntry == null) {\n                    return null;\n                }\n                XOut out = buildXOut(x);\n                return out;\n        }).filter(Objects::nonNull).forEach(built::add);\n}\n</code></pre>\n<p>UPDATE 1:\nI tried like this to update the first part and this reduced the processing to around 25 min.\nAny other suggestion maybe how to make this faster ?</p>\n<pre><code>List&lt;x&gt; lists = repository\n              .findBySourceFileCreationDate(getDateFromFilename(sourceFileName));\n\nint batchSize = properties.getBuildOutput().getSize();\n        List&lt;OutX&gt; built = new ArrayList&lt;&gt;();// Should I use maybe a vector for thread safe ? \n\n\n        ForkJoinPool forkJoinPool = new ForkJoinPool();\n        List&lt;ForkJoinTask&lt;?&gt;&gt; tasks = new ArrayList&lt;&gt;();\n\n        for (int i = 0; i &lt; lists.size(); i += batchSize) {\n            int endIndex = Math.min(i + batchSize, lists.size());\n            List&lt;X&gt; batch = lists.subList(i, endIndex);\n            ForkJoinTask&lt;?&gt; task = forkJoinPool.submit(() -&gt; processBatch(batch, built));\n            tasks.add(task);\n        }\n\n        tasks.forEach(ForkJoinTask::join);\n        forkJoinPool.shutdown();\n</code></pre>\n"},{"tags":["java","inner-classes"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1687523893,"post_id":76540094,"comment_id":134952842,"body_markdown":"`$Child` is extending `Parent`, `Parent` (implicitly) `Object` - `Scan` is not a parent, neither of `$Child` nor of `Parent` - question not clear","body":"<code>$Child</code> is extending <code>Parent</code>, <code>Parent</code> (implicitly) <code>Object</code> - <code>Scan</code> is not a parent, neither of <code>$Child</code> nor of <code>Parent</code> - question not clear"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1687529895,"post_id":76540094,"comment_id":134954313,"body_markdown":"There is no &quot;$Scan&quot; is there any reason you are using `$` for naming? If you take away the funny naming, then $ScanTest can access Scan via `Outer.this`. It isn&#39;t a parent it is an outter class, which inner classes retain a reference to.","body":"There is no &quot;$Scan&quot; is there any reason you are using <code>$</code> for naming? If you take away the funny naming, then $ScanTest can access Scan via <code>Outer.this</code>. It isn&#39;t a parent it is an outter class, which inner classes retain a reference to."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1687530709,"post_id":76540094,"comment_id":134954544,"body_markdown":"Which Scan object do you expect to reach using `Scan.this` in either `Parent` or `Child`? There is no such instance in scope.","body":"Which Scan object do you expect to reach using <code>Scan.this</code> in either <code>Parent</code> or <code>Child</code>? There is no such instance in scope."}],"answers":[{"tags":[],"owner":{"account_id":27810413,"reputation":456,"user_id":21232911,"display_name":"nischal sharma"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1687524089,"creation_date":1687524089,"answer_id":76540236,"question_id":76540094,"body_markdown":"If you want to access the isEnabled() method within the $ScanTest class, you can do so directly because it is an inner class and has access to the methods of the enclosing class. \r\n\r\npublic class Scan {\r\n    private static final String TYPE = &quot;scan_version&quot;;\r\n\r\n    public boolean isEnabled() {\r\n        return true;\r\n    }\r\n\r\n    private class $ScanTest extends Parent.$Child {\r\n        public void test() {\r\n            boolean isEnabled = isEnabled(); // Access the isEnabled() method directly\r\n            System.out.println(&quot;isEnabled: &quot; + isEnabled);\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        Scan scan = new Scan();\r\n        Scan.$ScanTest scanTest = scan.new $ScanTest();\r\n        scanTest.test();\r\n    }\r\n  }\r\n\r\nIn the code above, the isEnabled() method is accessed directly within the $ScanTest class using isEnabled(). The output will be isEnabled: true.\r\n\r\nNote that I have added a main method to demonstrate the usage. You can create an instance of Scan and then create an instance of $ScanTest using that instance\r\n\r\n\r\n","title":"java Calling parent class members in the childs parent","body":"<p>If you want to access the isEnabled() method within the $ScanTest class, you can do so directly because it is an inner class and has access to the methods of the enclosing class.</p>\n<p>public class Scan {\nprivate static final String TYPE = &quot;scan_version&quot;;</p>\n<pre><code>public boolean isEnabled() {\n    return true;\n}\n\nprivate class $ScanTest extends Parent.$Child {\n    public void test() {\n        boolean isEnabled = isEnabled(); // Access the isEnabled() method directly\n        System.out.println(&quot;isEnabled: &quot; + isEnabled);\n    }\n}\n\npublic static void main(String[] args) {\n    Scan scan = new Scan();\n    Scan.$ScanTest scanTest = scan.new $ScanTest();\n    scanTest.test();\n}\n</code></pre>\n<p>}</p>\n<p>In the code above, the isEnabled() method is accessed directly within the $ScanTest class using isEnabled(). The output will be isEnabled: true.</p>\n<p>Note that I have added a main method to demonstrate the usage. You can create an instance of Scan and then create an instance of $ScanTest using that instance</p>\n"}],"owner":{"account_id":1927109,"reputation":127,"user_id":1737273,"accept_rate":0,"display_name":"vasu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"closed_date":1687532971,"answer_count":1,"score":-2,"last_activity_date":1687537261,"creation_date":1687523030,"question_id":76540094,"body_markdown":"\r\nmy question is what is the best way to access Scan and its methods like isEnabled() in the parent.$Child in the below scenario:\r\n\r\nI know one way, that is add an abstract method in Parent.$Child like getScan(), implement it in $ScanTest.\r\nBut is there any other better way to do it.\r\n\r\n \r\n\r\n    public abstract class Parent {\r\n        protected abstract void execute() throws SQLException;\r\n\r\n        protected static abstract class $Child extends Parent {\r\n            protected void execute() throws SQLException {\r\n                Scan.this.isEnabled(); //Is there a way I can access Scan.this.isEnabled() as Scan is a Parent class  ?\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    public class Scan{\r\n        private static final String TYPE = &quot;scan_version&quot;;\r\n\r\n        public boolean isEnabled() {\r\n            return true;\r\n        }\r\n        private class $ScanTest extends Parent.$Child {\r\n            public void test() {\r\n                boolean isEnabled =  Scan.this.isEnabled(); \r\n                //like this, wants to access it in $ScanTest parent class\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n","title":"java Calling parent class members in the childs parent","body":"<p>my question is what is the best way to access Scan and its methods like isEnabled() in the parent.$Child in the below scenario:</p>\n<p>I know one way, that is add an abstract method in Parent.$Child like getScan(), implement it in $ScanTest.\nBut is there any other better way to do it.</p>\n<pre><code>public abstract class Parent {\n    protected abstract void execute() throws SQLException;\n\n    protected static abstract class $Child extends Parent {\n        protected void execute() throws SQLException {\n            Scan.this.isEnabled(); //Is there a way I can access Scan.this.isEnabled() as Scan is a Parent class  ?\n        }\n    }\n}\n\n\npublic class Scan{\n    private static final String TYPE = &quot;scan_version&quot;;\n\n    public boolean isEnabled() {\n        return true;\n    }\n    private class $ScanTest extends Parent.$Child {\n        public void test() {\n            boolean isEnabled =  Scan.this.isEnabled(); \n            //like this, wants to access it in $ScanTest parent class\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","android","kotlin","junit"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1686758991,"post_id":76475510,"comment_id":134844251,"body_markdown":"Why wouldn&#39;t it be possible?","body":"Why wouldn&#39;t it be possible?"},{"owner":{"account_id":1214207,"reputation":1008,"user_id":1182121,"accept_rate":33,"display_name":"binaryKarmic"},"score":0,"creation_date":1686815845,"post_id":76475510,"comment_id":134851996,"body_markdown":"That is my question since I am unable to make it work. Can you point out what am I missing or how to make it work ?","body":"That is my question since I am unable to make it work. Can you point out what am I missing or how to make it work ?"},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1686845510,"post_id":76475510,"comment_id":134857326,"body_markdown":"No, I don&#39;t use Gradle.","body":"No, I don&#39;t use Gradle."},{"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"score":0,"creation_date":1687293490,"post_id":76475510,"comment_id":134915740,"body_markdown":"After you get the &#39;Tests events were not received&#39; message, is there any new output on the &#39;Build&#39; tab? This might also be a run configuration issue. Does running the Gradle task directly work? Also, please post a screenshot of the Run configuration you&#39;re trying to run the tests from. Android Studio might simply be looking for tests in the wrong location, which is often the root cause for &#39;Tests events were not received&#39; issues","body":"After you get the &#39;Tests events were not received&#39; message, is there any new output on the &#39;Build&#39; tab? This might also be a run configuration issue. Does running the Gradle task directly work? Also, please post a screenshot of the Run configuration you&#39;re trying to run the tests from. Android Studio might simply be looking for tests in the wrong location, which is often the root cause for &#39;Tests events were not received&#39; issues"},{"owner":{"account_id":2168104,"reputation":1764,"user_id":1920735,"display_name":"avinash"},"score":0,"creation_date":1687416149,"post_id":76475510,"comment_id":134934201,"body_markdown":"Please share the name/format of your test class.","body":"Please share the name/format of your test class."}],"answers":[{"tags":[],"owner":{"account_id":27243858,"reputation":41,"user_id":20769529,"display_name":"Leonid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686948669,"creation_date":1686948669,"answer_id":76493497,"question_id":76475510,"body_markdown":"here is an example of a simple application with java classes and kotlin tests.\r\n\r\n**Java class**\r\n\r\nPath: *src/main/java/MyClass.java*\r\n```java\r\npublic class MyClass {\r\n    public int addNumbers(int a, int b) {\r\n        System.out.println(&quot;Calculating...&quot;);\r\n        return a + b;\r\n    }\r\n}\r\n```\r\n\r\n**Kotlin test**\r\n\r\nPath: *src/test/kotlin/MyClassTest.kt*\r\n```kotlin\r\nimport org.junit.jupiter.api.Test\r\nimport kotlin.test.assertEquals\r\n\r\nclass MyClassTest {\r\n\r\n    @Test\r\n    fun test() {\r\n        assertEquals(3, MyClass().addNumbers(1, 2))\r\n    }\r\n}\r\n```\r\n\r\n**Gradle file (Kotlin)**\r\n```kotlin\r\nplugins {\r\n    kotlin(&quot;jvm&quot;) version &quot;1.8.21&quot;\r\n    id(&quot;java&quot;)\r\n}\r\n\r\ngroup = &quot;com.example&quot;\r\nversion = &quot;1.0&quot;\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    // Зависимости для JUnit 5\r\n    testImplementation(&quot;org.junit.jupiter:junit-jupiter-api:5.9.2&quot;)\r\n    testRuntimeOnly(&quot;org.junit.jupiter:junit-jupiter-engine:5.9.2&quot;)\r\n\r\n    // Зависимость для поддержки Kotlin в тестах\r\n    testImplementation(&quot;org.jetbrains.kotlin:kotlin-test-junit:1.8.21&quot;)\r\n}\r\n\r\ntasks.test {\r\n    useJUnitPlatform()\r\n}\r\n\r\n```\r\n\r\n[Project screen][1]\r\n\r\n[1]: https://i.stack.imgur.com/hAZom.png","title":"Can we write junit test cases in Kotlin for the Java classes in an android project?","body":"<p>here is an example of a simple application with java classes and kotlin tests.</p>\n<p><strong>Java class</strong></p>\n<p>Path: <em>src/main/java/MyClass.java</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyClass {\n    public int addNumbers(int a, int b) {\n        System.out.println(&quot;Calculating...&quot;);\n        return a + b;\n    }\n}\n</code></pre>\n<p><strong>Kotlin test</strong></p>\n<p>Path: <em>src/test/kotlin/MyClassTest.kt</em></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import org.junit.jupiter.api.Test\nimport kotlin.test.assertEquals\n\nclass MyClassTest {\n\n    @Test\n    fun test() {\n        assertEquals(3, MyClass().addNumbers(1, 2))\n    }\n}\n</code></pre>\n<p><strong>Gradle file (Kotlin)</strong></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>plugins {\n    kotlin(&quot;jvm&quot;) version &quot;1.8.21&quot;\n    id(&quot;java&quot;)\n}\n\ngroup = &quot;com.example&quot;\nversion = &quot;1.0&quot;\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    // Зависимости для JUnit 5\n    testImplementation(&quot;org.junit.jupiter:junit-jupiter-api:5.9.2&quot;)\n    testRuntimeOnly(&quot;org.junit.jupiter:junit-jupiter-engine:5.9.2&quot;)\n\n    // Зависимость для поддержки Kotlin в тестах\n    testImplementation(&quot;org.jetbrains.kotlin:kotlin-test-junit:1.8.21&quot;)\n}\n\ntasks.test {\n    useJUnitPlatform()\n}\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/hAZom.png\" rel=\"nofollow noreferrer\">Project screen</a></p>\n"},{"tags":[],"owner":{"account_id":2168104,"reputation":1764,"user_id":1920735,"display_name":"avinash"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687417120,"creation_date":1687417120,"answer_id":76529300,"question_id":76475510,"body_markdown":"Following steps worked for me\r\n\r\na) Add following in build.gradle at project root level in \r\n\r\n&gt; dependencies\r\n\r\n    classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:1.7.20&quot;\r\n\r\nb) Add kotlin plugin in build.gradle at your app level\r\n\r\n    apply plugin: &#39;kotlin-android&#39;\r\n\r\nc) Create a test class in your unit test package, make sure that name of class ends with Test. I tried with following name for classes \r\n\r\nNamed the class ends with Test\r\n\r\nstatus \r\n&gt; Worked\r\n\r\n \r\n\r\n    import org.junit.Test\r\n    import org.junit.runner.RunWith\r\n    import org.junit.runners.JUnit4\r\n    import junit.framework.TestCase.assertEquals\r\n\r\n    @RunWith(JUnit4::class)\r\n    class Kotlin1KotlinTest {\r\n        @Test\r\n        fun test1() {\r\n            val res = 1 + 1\r\n            assertEquals(2, res)\r\n        }\r\n    }\r\n\r\nNamed the class that does not ends with Test\r\n\r\nstatus \r\n&gt; Not working\r\n\r\nGot \r\n\r\n&gt; Test events were not received\r\n \r\n\r\n    import org.junit.Test\r\n    import org.junit.runner.RunWith\r\n    import org.junit.runners.JUnit4\r\n    import junit.framework.TestCase.assertEquals\r\n\r\n    @RunWith(JUnit4::class)\r\n    class Kotlin1 {\r\n        @Test\r\n        fun test1() {\r\n            val res = 1 + 1\r\n            assertEquals(2, res)\r\n        }\r\n    }\r\n ","title":"Can we write junit test cases in Kotlin for the Java classes in an android project?","body":"<p>Following steps worked for me</p>\n<p>a) Add following in build.gradle at project root level in</p>\n<blockquote>\n<p>dependencies</p>\n</blockquote>\n<pre><code>classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:1.7.20&quot;\n</code></pre>\n<p>b) Add kotlin plugin in build.gradle at your app level</p>\n<pre><code>apply plugin: 'kotlin-android'\n</code></pre>\n<p>c) Create a test class in your unit test package, make sure that name of class ends with Test. I tried with following name for classes</p>\n<p>Named the class ends with Test</p>\n<p>status</p>\n<blockquote>\n<p>Worked</p>\n</blockquote>\n<pre><code>import org.junit.Test\nimport org.junit.runner.RunWith\nimport org.junit.runners.JUnit4\nimport junit.framework.TestCase.assertEquals\n\n@RunWith(JUnit4::class)\nclass Kotlin1KotlinTest {\n    @Test\n    fun test1() {\n        val res = 1 + 1\n        assertEquals(2, res)\n    }\n}\n</code></pre>\n<p>Named the class that does not ends with Test</p>\n<p>status</p>\n<blockquote>\n<p>Not working</p>\n</blockquote>\n<p>Got</p>\n<blockquote>\n<p>Test events were not received</p>\n</blockquote>\n<pre><code>import org.junit.Test\nimport org.junit.runner.RunWith\nimport org.junit.runners.JUnit4\nimport junit.framework.TestCase.assertEquals\n\n@RunWith(JUnit4::class)\nclass Kotlin1 {\n    @Test\n    fun test1() {\n        val res = 1 + 1\n        assertEquals(2, res)\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1214207,"reputation":1008,"user_id":1182121,"accept_rate":33,"display_name":"binaryKarmic"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":310,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1687537057,"creation_date":1686758609,"question_id":76475510,"body_markdown":"I am looking forward to migrate a legacy project form Java to Kotlin, which apparently lacks unit test cases.\r\n\r\nI wrote test cases in kotlin for a Util class which is written in Java, but when running it I am facing &quot;Tests events were not received&quot;. After a lot of searching and trying various SO answers I am still not able to get pass through this.\r\n\r\nIf i write the same test cases in a Java class then all tests work as expected with a proper report.\r\n\r\nCouple of things i wanted to mention:\r\n- There are no build time errors and the build is successful.\r\n- I am using junit:4.13.2\r\n- Android Studio version is Dolphin | 2021.3.1 Patch 1\r\n- The test class is under app/src/test/java\r\n- Tried keeping it under app/src/test/kotlin too but doesn&#39;t work\r\n- Tried adding below config under build.gradle but no luck.\r\n```\r\ntestOptions {\r\n        unitTests.all {\r\n            it.useJUnitPlatform()\r\n        }\r\n    }\r\n```\r\n\r\nTrying all this I started wondering if this is doable or not.\r\n","title":"Can we write junit test cases in Kotlin for the Java classes in an android project?","body":"<p>I am looking forward to migrate a legacy project form Java to Kotlin, which apparently lacks unit test cases.</p>\n<p>I wrote test cases in kotlin for a Util class which is written in Java, but when running it I am facing &quot;Tests events were not received&quot;. After a lot of searching and trying various SO answers I am still not able to get pass through this.</p>\n<p>If i write the same test cases in a Java class then all tests work as expected with a proper report.</p>\n<p>Couple of things i wanted to mention:</p>\n<ul>\n<li>There are no build time errors and the build is successful.</li>\n<li>I am using junit:4.13.2</li>\n<li>Android Studio version is Dolphin | 2021.3.1 Patch 1</li>\n<li>The test class is under app/src/test/java</li>\n<li>Tried keeping it under app/src/test/kotlin too but doesn't work</li>\n<li>Tried adding below config under build.gradle but no luck.</li>\n</ul>\n<pre><code>testOptions {\n        unitTests.all {\n            it.useJUnitPlatform()\n        }\n    }\n</code></pre>\n<p>Trying all this I started wondering if this is doable or not.</p>\n"},{"tags":["java","collections"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1687535410,"post_id":76541664,"comment_id":134955547,"body_markdown":"Modern Java doesn&#39;t like weak typing. What do you intend to *put* in the `List`? You need to tell the compiler too","body":"Modern Java doesn&#39;t like weak typing. What do you intend to <i>put</i> in the <code>List</code>? You need to tell the compiler too"},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1687535528,"post_id":76541664,"comment_id":134955575,"body_markdown":"Those are [*raw types*](https://docs.oracle.com/javase/tutorial/java/generics/rawTypes.html). You should not use *raw types*. That is **probably** why you get squiggles.","body":"Those are <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/rawTypes.html\" rel=\"nofollow noreferrer\"><i>raw types</i></a>. You should not use <i>raw types</i>. That is <b>probably</b> why you get squiggles."},{"owner":{"display_name":"user6073886"},"score":2,"creation_date":1687535705,"post_id":76541664,"comment_id":134955615,"body_markdown":"Does this answer your question? [What is a raw type and why shouldn&#39;t we use it?](https://stackoverflow.com/questions/2770321/what-is-a-raw-type-and-why-shouldnt-we-use-it)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2770321/what-is-a-raw-type-and-why-shouldnt-we-use-it\">What is a raw type and why shouldn&#39;t we use it?</a>"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1687542100,"post_id":76541664,"comment_id":134956896,"body_markdown":"What IDE are you using?  Eclipse?","body":"What IDE are you using?  Eclipse?"},{"owner":{"account_id":28861382,"reputation":1,"user_id":22105103,"display_name":"Amey"},"score":0,"creation_date":1687550257,"post_id":76541664,"comment_id":134958269,"body_markdown":"I am using Eclipse. But now i am getting error while inserting or adding elements in the List. like List&lt;?&gt; l = new  ArrayList(); then l.add(10);?? why??","body":"I am using Eclipse. But now i am getting error while inserting or adding elements in the List. like List&lt;?&gt; l = new  ArrayList(); then l.add(10);?? why??"},{"owner":{"account_id":28861382,"reputation":1,"user_id":22105103,"display_name":"Amey"},"score":0,"creation_date":1687550489,"post_id":76541664,"comment_id":134958308,"body_markdown":"@g00se Wy should i tell the list what i&#39;m putting in it?? Isn&#39;t that the actual advantage of the List that i can add any type of element in it??","body":"@g00se Wy should i tell the list what i&#39;m putting in it?? Isn&#39;t that the actual advantage of the List that i can add any type of element in it??"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1687551084,"post_id":76541664,"comment_id":134958397,"body_markdown":"Ignoring the &quot;squigglies&quot; you might find somewhere along the line you or someone else might be bitten by not knowing the type in there. That&#39;s why strong typing exists, so the compiler can check the &#39;future&#39; of your collection","body":"Ignoring the &quot;squigglies&quot; you might find somewhere along the line you or someone else might be bitten by not knowing the type in there. That&#39;s why strong typing exists, so the compiler can check the &#39;future&#39; of your collection"},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1687607964,"post_id":76541664,"comment_id":134962464,"body_markdown":"If you want a `List` of integers you need to tell it you want a list of integers, not a `List` of capture-of; and you&#39;re still using a raw-type on the right hand side (don&#39;t do that). `List&lt;Integer&gt; l = new ArrayList&lt;&gt;();`","body":"If you want a <code>List</code> of integers you need to tell it you want a list of integers, not a <code>List</code> of capture-of; and you&#39;re still using a raw-type on the right hand side (don&#39;t do that). <code>List&lt;Integer&gt; l = new ArrayList&lt;&gt;();</code>"}],"owner":{"account_id":28861382,"reputation":1,"user_id":22105103,"display_name":"Amey"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687536566,"creation_date":1687535263,"question_id":76541664,"body_markdown":"    package list;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class list {\r\n    \t\r\n    \tpublic static void main(String[] args)\r\n    \t{\r\n           List l = new ArrayList();\r\n    \t}\r\n    }\r\n\r\n================================================================================================\r\n\r\n\r\nGetting squiggly for List and Array list\r\n\r\n\r\n\r\n\r\n\r\n","title":"Getting the squiggly even if i imported the relevant class libraries","body":"<pre><code>package list;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class list {\n    \n    public static void main(String[] args)\n    {\n       List l = new ArrayList();\n    }\n}\n</code></pre>\n<p>================================================================================================</p>\n<p>Getting squiggly for List and Array list</p>\n"},{"tags":["java","excel","java-8","apache-poi"],"comments":[{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":1,"creation_date":1687529146,"post_id":76540281,"comment_id":134954108,"body_markdown":"[Apache POI 3.7 was released in 2010](https://poi.apache.org/devel/history/changes-3x.html#3.7) - what happens if you try with a version released this decade?","body":"<a href=\"https://poi.apache.org/devel/history/changes-3x.html#3.7\" rel=\"nofollow noreferrer\">Apache POI 3.7 was released in 2010</a> - what happens if you try with a version released this decade?"}],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687536552,"creation_date":1687532765,"answer_id":76541357,"question_id":76540281,"body_markdown":"Using a more current version of Apache POI than the decade old version 3.7 would be a good idea.\r\n\r\nBut the reason for your problem I think will be the different ways to indent a cell value.\r\n\r\nThe following shows two possibilities:\r\n\r\nFirst variant:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n`A3`, `A4` and `A5` are indented using the cell style **Format Cells - Alignment - Horizontal:** Left (Indent) **- Indent:** 1, 2 and 3.\r\n\r\nThere 1 means 3 spaces. See https://learn.microsoft.com/en-us/dotnet/api/documentformat.openxml.spreadsheet.alignment?view=openxml-2.8.1.\r\n\r\n&gt; indent (Indent)\tAn integer value, where an increment of 1 represents 3\r\n&gt; spaces. Indicates the number of spaces (of the normal style font) of\r\n&gt; indentation for text in a cell.\r\n\r\nAlso possible using button **Increase indentation** [![enter image description here][2]][2] in Start ribbon bar.\r\n\r\nSecond variant:\r\n\r\n[![enter image description here][3]][3]\r\n\r\n`A10`, `A11` and `A12` are indented using preceding spaces. Thus cell values in `A9:A12` are:\r\n\r\n    User Project\r\n       Home\r\n          Project Profile\r\n             Edit Project Status\r\n\r\nOf course `short indentLevel = cellStyle.getIndention();` can only work for variant 1 used in `A3`, `A4` and `A5`. To support second variant, one needs to get the count of preceding spaces before the cell values.\r\n\r\nComplete example:\r\n\r\n    import org.apache.poi.ss.usermodel.*;\r\n    import java.io.FileInputStream;\r\n    \r\n    class ReadExcelCelllIndent {\r\n        \r\n     static short getIndention(Cell cell) {\r\n      CellStyle cellStyle = cell.getCellStyle();\r\n      short indentLevel = cellStyle.getIndention();\r\n      if (indentLevel == 0) {\r\n       if (cell.getCellType() == CellType.STRING) {\r\n        String cellValue = cell.getStringCellValue();\r\n        String lTrimCellValue = cellValue.replaceAll(&quot;^\\\\s*&quot;, &quot;&quot;);  \r\n        int precedingSpaces = cellValue.length() - lTrimCellValue.length(); \r\n        // https://learn.microsoft.com/en-us/dotnet/api/documentformat.openxml.spreadsheet.alignment?view=openxml-2.8.1\r\n        // indent (Indent)\tAn integer value, where an increment of 1 represents 3 spaces. \r\n        indentLevel = (short)(precedingSpaces / 3);\r\n       }   \r\n      }\r\n      return indentLevel;  \r\n     }\r\n    \r\n     public static void main(String[] args) throws Exception {\r\n    \r\n      Workbook workbook = WorkbookFactory.create(new FileInputStream(&quot;./ExcelExample.xls&quot;));\r\n      Sheet sheet = workbook.getSheetAt(0);\r\n      for (Row row : sheet) {\r\n       for (Cell cell : row) {\r\n        System.out.print(cell.getAddress() + &quot;:&quot;);    \r\n        System.out.print(cell);    \r\n        CellStyle cellStyle = cell.getCellStyle();\r\n        short indentLevel = cellStyle.getIndention();\r\n        System.out.print(&quot;; indention from CellStyle :&quot; + indentLevel);    \r\n        indentLevel = getIndention(cell) ;\r\n        System.out.println(&quot;; indention from method :&quot; + indentLevel);        \r\n       }\r\n      }\r\n     }\r\n    }\r\n\r\nCode uses current Apache POI 5.2.3.\r\n\r\n\r\n____________________________________________________________________\r\n\r\nOn the other hand your screenshot shows grouped rows which also could be used to determine the numbering level. That is called the outline level of the row and has nothing to do with indentation. Using current Apache POI version, the outline level of a row can be get via [Row.getOutlineLevel](https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/Row.html#getOutlineLevel--)\r\n\r\nComplete example again:\r\n\r\n[![enter image description here][4]][4]\r\n\r\n    import org.apache.poi.ss.usermodel.*;\r\n    import java.io.FileInputStream;\r\n    \r\n    class ReadExcelRowOutlineLevel {\r\n        \r\n     public static void main(String[] args) throws Exception {\r\n    \r\n      Workbook workbook = WorkbookFactory.create(new FileInputStream(&quot;./ExcelExample.xls&quot;));\r\n      Sheet sheet = workbook.getSheetAt(0);\r\n      for (Row row : sheet) {\r\n       int outlineLevel = row.getOutlineLevel();\r\n       for (Cell cell : row) {\r\n        System.out.print(cell.getAddress() + &quot;:&quot;);    \r\n        System.out.print(cell);\r\n        System.out.println(&quot;; outline level: &quot; + outlineLevel);\r\n       }\r\n      }\r\n     }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/V9wOh.png\r\n  [2]: https://i.stack.imgur.com/h87El.png\r\n  [3]: https://i.stack.imgur.com/55s8h.png\r\n  [4]: https://i.stack.imgur.com/Cowfu.png","title":"Read Excel file in java with grouped rows and generate WBS code","body":"<p>Using a more current version of Apache POI than the decade old version 3.7 would be a good idea.</p>\n<p>But the reason for your problem I think will be the different ways to indent a cell value.</p>\n<p>The following shows two possibilities:</p>\n<p>First variant:</p>\n<p><a href=\"https://i.stack.imgur.com/V9wOh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/V9wOh.png\" alt=\"enter image description here\" /></a></p>\n<p><code>A3</code>, <code>A4</code> and <code>A5</code> are indented using the cell style <strong>Format Cells - Alignment - Horizontal:</strong> Left (Indent) <strong>- Indent:</strong> 1, 2 and 3.</p>\n<p>There 1 means 3 spaces. See <a href=\"https://learn.microsoft.com/en-us/dotnet/api/documentformat.openxml.spreadsheet.alignment?view=openxml-2.8.1\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/dotnet/api/documentformat.openxml.spreadsheet.alignment?view=openxml-2.8.1</a>.</p>\n<blockquote>\n<p>indent (Indent)   An integer value, where an increment of 1 represents 3\nspaces. Indicates the number of spaces (of the normal style font) of\nindentation for text in a cell.</p>\n</blockquote>\n<p>Also possible using button <strong>Increase indentation</strong> <a href=\"https://i.stack.imgur.com/h87El.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h87El.png\" alt=\"enter image description here\" /></a> in Start ribbon bar.</p>\n<p>Second variant:</p>\n<p><a href=\"https://i.stack.imgur.com/55s8h.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/55s8h.png\" alt=\"enter image description here\" /></a></p>\n<p><code>A10</code>, <code>A11</code> and <code>A12</code> are indented using preceding spaces. Thus cell values in <code>A9:A12</code> are:</p>\n<pre><code>User Project\n   Home\n      Project Profile\n         Edit Project Status\n</code></pre>\n<p>Of course <code>short indentLevel = cellStyle.getIndention();</code> can only work for variant 1 used in <code>A3</code>, <code>A4</code> and <code>A5</code>. To support second variant, one needs to get the count of preceding spaces before the cell values.</p>\n<p>Complete example:</p>\n<pre><code>import org.apache.poi.ss.usermodel.*;\nimport java.io.FileInputStream;\n\nclass ReadExcelCelllIndent {\n    \n static short getIndention(Cell cell) {\n  CellStyle cellStyle = cell.getCellStyle();\n  short indentLevel = cellStyle.getIndention();\n  if (indentLevel == 0) {\n   if (cell.getCellType() == CellType.STRING) {\n    String cellValue = cell.getStringCellValue();\n    String lTrimCellValue = cellValue.replaceAll(&quot;^\\\\s*&quot;, &quot;&quot;);  \n    int precedingSpaces = cellValue.length() - lTrimCellValue.length(); \n    // https://learn.microsoft.com/en-us/dotnet/api/documentformat.openxml.spreadsheet.alignment?view=openxml-2.8.1\n    // indent (Indent)  An integer value, where an increment of 1 represents 3 spaces. \n    indentLevel = (short)(precedingSpaces / 3);\n   }   \n  }\n  return indentLevel;  \n }\n\n public static void main(String[] args) throws Exception {\n\n  Workbook workbook = WorkbookFactory.create(new FileInputStream(&quot;./ExcelExample.xls&quot;));\n  Sheet sheet = workbook.getSheetAt(0);\n  for (Row row : sheet) {\n   for (Cell cell : row) {\n    System.out.print(cell.getAddress() + &quot;:&quot;);    \n    System.out.print(cell);    \n    CellStyle cellStyle = cell.getCellStyle();\n    short indentLevel = cellStyle.getIndention();\n    System.out.print(&quot;; indention from CellStyle :&quot; + indentLevel);    \n    indentLevel = getIndention(cell) ;\n    System.out.println(&quot;; indention from method :&quot; + indentLevel);        \n   }\n  }\n }\n}\n</code></pre>\n<p>Code uses current Apache POI 5.2.3.</p>\n<hr />\n<p>On the other hand your screenshot shows grouped rows which also could be used to determine the numbering level. That is called the outline level of the row and has nothing to do with indentation. Using current Apache POI version, the outline level of a row can be get via <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/Row.html#getOutlineLevel--\" rel=\"nofollow noreferrer\">Row.getOutlineLevel</a></p>\n<p>Complete example again:</p>\n<p><a href=\"https://i.stack.imgur.com/Cowfu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Cowfu.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>import org.apache.poi.ss.usermodel.*;\nimport java.io.FileInputStream;\n\nclass ReadExcelRowOutlineLevel {\n    \n public static void main(String[] args) throws Exception {\n\n  Workbook workbook = WorkbookFactory.create(new FileInputStream(&quot;./ExcelExample.xls&quot;));\n  Sheet sheet = workbook.getSheetAt(0);\n  for (Row row : sheet) {\n   int outlineLevel = row.getOutlineLevel();\n   for (Cell cell : row) {\n    System.out.print(cell.getAddress() + &quot;:&quot;);    \n    System.out.print(cell);\n    System.out.println(&quot;; outline level: &quot; + outlineLevel);\n   }\n  }\n }\n}\n</code></pre>\n"}],"owner":{"account_id":1889343,"reputation":477,"user_id":1934073,"accept_rate":80,"display_name":"Dandy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687536552,"creation_date":1687524483,"question_id":76540281,"body_markdown":"i am trying to read excel file into java code \r\n\r\nfile as grouped rows with indentation i am trying to generate work break structure for nested groupped row for eg 1.1.1 \r\n\r\ni have used apache POi 3.7\r\n\r\nthis is the code \r\n\r\n\r\n    public class ExcelReaderforHierarchy {\r\n    \t\r\n    \t public static boolean importExcel() throws Exception {\r\n    \t\t boolean ret= false;\r\n    \t        try {\r\n    \t            String a_fileName = &quot;E:\\\\groupedRow.xls&quot;;\r\n    \t            FileInputStream w_In = new FileInputStream(a_fileName);\r\n    \t            // Load the workbook\r\n    \t            HSSFWorkbook workbook = new HSSFWorkbook(w_In);\r\n    \r\n    \t            // Get the first sheet in the workbook\r\n    \t            Sheet sheet = workbook.getSheetAt(0);\r\n    \r\n    \t            generateWBSCodes(sheet);\r\n    \r\n    \t            ret = true;\r\n    \r\n    \t            // Close the workbook and file input stream\r\n    \t          //  workbook.close();\r\n    \t          //  file.close();\r\n    \t        } catch (IOException e) {\r\n    \t            e.printStackTrace();\r\n    \t            return false;\r\n    \t        }\r\n    \t        return ret;\r\n    \t    }\r\n    \t  private static void generateWBSCodes(Sheet sheet) {\r\n    \t        int currentLevel = 0;\r\n    \t        int groupIndex = 1;\r\n    \r\n    \t        // Iterate over the rows in the sheet\r\n    \t        for (Row row : sheet) {\r\n    \t            // Check if the row is grouped\r\n    \t            if (isGroupedRow(row)) {\r\n    \t                currentLevel++;\r\n    \t                groupIndex = 1;\r\n    \t            }\r\n    \r\n    \t            // Generate and print the WBS code\r\n    \t            String wbsCode = generateWBSCode(currentLevel, groupIndex);\r\n    \t            System.out.println(&quot;Row: &quot; + row.getRowNum() + &quot;, WBS Code: &quot; + wbsCode);\r\n    \r\n    \t            // Increment group index for the next row\r\n    \t            groupIndex++;\r\n    \t        }\r\n    \t    }\r\n    \r\n    \t    private static boolean isGroupedRow(Row row) {\r\n    \t        Cell cell = row.getCell(0);\r\n    \t        try {\r\n    \t        \t System.out.println(&quot;cellval -&quot; + cell.getStringCellValue());\r\n    \t\t\t} catch (Exception e) {\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t}\r\n    \t       \r\n    \t      \r\n    \t            HSSFCellStyle cellStyle = (HSSFCellStyle) cell.getCellStyle();\r\n    \t            if (cellStyle != null) {\r\n    \t                short indentLevel = cellStyle.getIndention();\r\n    \t                System.out.println(&quot;indentLevel -&quot; + cellStyle.getIndention()); // THIS always returns 0\r\n    \t                return indentLevel &gt; 0;\r\n    \t            }\r\n    \t      \r\n    \t        return false;\r\n    \t    }\r\n    \r\n    \t    private static String generateWBSCode(int level, int index) {\r\n    \t        StringBuilder wbsCodeBuilder = new StringBuilder();\r\n    \t        for (int i = 0; i &lt; level; i++) {\r\n    \t            if (i &gt; 0) {\r\n    \t                wbsCodeBuilder.append(&quot;.&quot;);\r\n    \t            }\r\n    \t            wbsCodeBuilder.append(index);\r\n    \t        }\r\n    \t        return wbsCodeBuilder.toString();\r\n    \t    }\r\n    \t}\r\n\r\nproblem is `cellStyle.getIndention();` always returns 0 \r\n\r\nhence i am not able todetect if it is a grouped row or not\r\n\r\nalso i am not getting any error...\r\n\r\n[![excel image][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/W0zv8.png","title":"Read Excel file in java with grouped rows and generate WBS code","body":"<p>i am trying to read excel file into java code</p>\n<p>file as grouped rows with indentation i am trying to generate work break structure for nested groupped row for eg 1.1.1</p>\n<p>i have used apache POi 3.7</p>\n<p>this is the code</p>\n<pre><code>public class ExcelReaderforHierarchy {\n    \n     public static boolean importExcel() throws Exception {\n         boolean ret= false;\n            try {\n                String a_fileName = &quot;E:\\\\groupedRow.xls&quot;;\n                FileInputStream w_In = new FileInputStream(a_fileName);\n                // Load the workbook\n                HSSFWorkbook workbook = new HSSFWorkbook(w_In);\n\n                // Get the first sheet in the workbook\n                Sheet sheet = workbook.getSheetAt(0);\n\n                generateWBSCodes(sheet);\n\n                ret = true;\n\n                // Close the workbook and file input stream\n              //  workbook.close();\n              //  file.close();\n            } catch (IOException e) {\n                e.printStackTrace();\n                return false;\n            }\n            return ret;\n        }\n      private static void generateWBSCodes(Sheet sheet) {\n            int currentLevel = 0;\n            int groupIndex = 1;\n\n            // Iterate over the rows in the sheet\n            for (Row row : sheet) {\n                // Check if the row is grouped\n                if (isGroupedRow(row)) {\n                    currentLevel++;\n                    groupIndex = 1;\n                }\n\n                // Generate and print the WBS code\n                String wbsCode = generateWBSCode(currentLevel, groupIndex);\n                System.out.println(&quot;Row: &quot; + row.getRowNum() + &quot;, WBS Code: &quot; + wbsCode);\n\n                // Increment group index for the next row\n                groupIndex++;\n            }\n        }\n\n        private static boolean isGroupedRow(Row row) {\n            Cell cell = row.getCell(0);\n            try {\n                 System.out.println(&quot;cellval -&quot; + cell.getStringCellValue());\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n           \n          \n                HSSFCellStyle cellStyle = (HSSFCellStyle) cell.getCellStyle();\n                if (cellStyle != null) {\n                    short indentLevel = cellStyle.getIndention();\n                    System.out.println(&quot;indentLevel -&quot; + cellStyle.getIndention()); // THIS always returns 0\n                    return indentLevel &gt; 0;\n                }\n          \n            return false;\n        }\n\n        private static String generateWBSCode(int level, int index) {\n            StringBuilder wbsCodeBuilder = new StringBuilder();\n            for (int i = 0; i &lt; level; i++) {\n                if (i &gt; 0) {\n                    wbsCodeBuilder.append(&quot;.&quot;);\n                }\n                wbsCodeBuilder.append(index);\n            }\n            return wbsCodeBuilder.toString();\n        }\n    }\n</code></pre>\n<p>problem is <code>cellStyle.getIndention();</code> always returns 0</p>\n<p>hence i am not able todetect if it is a grouped row or not</p>\n<p>also i am not getting any error...</p>\n<p><a href=\"https://i.stack.imgur.com/W0zv8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/W0zv8.png\" alt=\"excel image\" /></a></p>\n"},{"tags":["java","html","spring-boot","spring-mvc","thymeleaf"],"answers":[{"tags":[],"owner":{"account_id":24709336,"reputation":15,"user_id":18599720,"display_name":"Maksim1251"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1687527176,"creation_date":1687523514,"answer_id":76540160,"question_id":76539976,"body_markdown":"I partially solved my problem, now by clicking on the link I go to the HTML markup where I get the information I need, but now, for some unknown reason, a small problem has appeared in the URL that can hardly even be called a problem, but still I would like to know how to solve it. I&#39;ll be back here when I know anything about this.\r\n\r\nURL:\r\n\r\n    http://localhost:8080/profiles/$%7Bprofiles.id%7D?id=1\r\n\r\nmain.html:\r\n\r\n    &lt;div th:each=&quot;profiles : ${profiles}&quot;&gt;\r\n\t&lt;a th:href=&quot;@{|/profiles/${profiles.id}|}&quot; th:text=&quot;*{profiles.firstName}&quot;&gt;&lt;/a&gt;\r\n\t&lt;/div&gt;\r\n\r\nVideo: https://www.youtube.com/watch?v=8niAXQgsT0Y&amp;ab_channel=KnowledgeBase\r\n\r\nUse @PathVariable in Controller, The problem solved, good luck everyone.","title":"th: href takes me to the wrong address","body":"<p>I partially solved my problem, now by clicking on the link I go to the HTML markup where I get the information I need, but now, for some unknown reason, a small problem has appeared in the URL that can hardly even be called a problem, but still I would like to know how to solve it. I'll be back here when I know anything about this.</p>\n<p>URL:</p>\n<pre><code>http://localhost:8080/profiles/$%7Bprofiles.id%7D?id=1\n</code></pre>\n<p>main.html:</p>\n<pre><code>&lt;div th:each=&quot;profiles : ${profiles}&quot;&gt;\n&lt;a th:href=&quot;@{|/profiles/${profiles.id}|}&quot; th:text=&quot;*{profiles.firstName}&quot;&gt;&lt;/a&gt;\n&lt;/div&gt;\n</code></pre>\n<p>Video: <a href=\"https://www.youtube.com/watch?v=8niAXQgsT0Y&amp;ab_channel=KnowledgeBase\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=8niAXQgsT0Y&amp;ab_channel=KnowledgeBase</a></p>\n<p>Use @PathVariable in Controller, The problem solved, good luck everyone.</p>\n"},{"tags":[],"owner":{"account_id":5152799,"reputation":19357,"user_id":4126893,"display_name":"Metroids"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687535969,"creation_date":1687535969,"answer_id":76541755,"question_id":76539976,"body_markdown":"According to the [Standard URL Syntax][1], the correct syntax for a path variable looks like this:\r\n\r\n    @{/profiles/{id}(id=${profiles.id})}\r\n\r\n\r\n  [1]: https://www.thymeleaf.org/doc/articles/standardurlsyntax.html#adding-parameters","title":"th: href takes me to the wrong address","body":"<p>According to the <a href=\"https://www.thymeleaf.org/doc/articles/standardurlsyntax.html#adding-parameters\" rel=\"nofollow noreferrer\">Standard URL Syntax</a>, the correct syntax for a path variable looks like this:</p>\n<pre><code>@{/profiles/{id}(id=${profiles.id})}\n</code></pre>\n"}],"owner":{"account_id":24709336,"reputation":15,"user_id":18599720,"display_name":"Maksim1251"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76540160,"answer_count":2,"score":0,"last_activity_date":1687535969,"creation_date":1687522124,"question_id":76539976,"body_markdown":"I have two HTML markups, one creates profiles with first name, last name, email and password. And also on the same HTML markup, a list of all profiles is published with a link to go to the second HTML form, on which the person already receives information about the profile, as you understand, in order to get to the second form, you need to click on the link, the fact is that by id it is completely finds and works almost everything perfectly, but there is one thing, it takes me to this page:\r\n\r\n    localhost:8080/profiles/?1\r\n\r\nAccordingly, I do not receive information, and in order to receive it, I must manually change the link to this:\r\n\r\n    localhost:8080/profiles/1\r\n\r\n\r\nI have a question, what did I do wrong and why is this happening?\r\n\r\nprofiles.html:\r\n\r\n    &lt;div th:method=&quot;GET&quot; th:action=&quot;@{/profiles/{id}}&quot; th:object=&quot;${profileById}&quot;&gt;\r\n\t&lt;p th:text=&quot;*{firstName}&quot;&gt;\r\n\t&lt;p th:text=&quot;*{lastName}&quot;&gt;\r\n\t&lt;p th:text=&quot;*{email}&quot;&gt;\r\n    &lt;/div&gt;\r\n\r\nmain.html:\r\n\r\n    &lt;form th:method=&quot;POST&quot; th:action=&quot;@{/profiles}&quot; th:object=&quot;${profile}&quot;&gt;\r\n\t&lt;input type=&quot;text&quot; placeholder=&quot;Input First Name:&quot; th:field=&quot;*{firstName}&quot;/&gt;\r\n\t&lt;input type=&quot;text&quot; placeholder=&quot;Input Last Name:&quot; th:field=&quot;*{lastName}&quot;/&gt;\r\n\t&lt;input type=&quot;email&quot; placeholder=&quot;Input Email:&quot; th:field=&quot;*{email}&quot;/&gt;\r\n\t&lt;input type=&quot;password&quot; placeholder=&quot;Input Password:&quot; th:field=&quot;*{password}&quot;/&gt;\r\n\t&lt;button type=&quot;submit&quot;&gt;Create Profile&lt;/button&gt;\r\n\t&lt;/form&gt;\r\n\t\r\n\t&lt;div th:each=&quot;profiles : ${profiles}&quot;&gt;\r\n\t&lt;a th:href=&quot;@{/profiles/(${profiles.id})}&quot; th:text=&quot;*{profiles.firstName}&quot;&gt;&lt;/a&gt;\r\n\t&lt;/div&gt;\r\n\r\nI don’t see much sense in dropping information from controllers \\ services and the repository, the problem is, as I indicated earlier, that th: href throws me to \r\n\r\n&gt; profiles/?1\r\n\r\nand not to \r\n\r\n&gt; profiles/1 - **I need it here**\r\n\r\n*Thank you for your attention*","title":"th: href takes me to the wrong address","body":"<p>I have two HTML markups, one creates profiles with first name, last name, email and password. And also on the same HTML markup, a list of all profiles is published with a link to go to the second HTML form, on which the person already receives information about the profile, as you understand, in order to get to the second form, you need to click on the link, the fact is that by id it is completely finds and works almost everything perfectly, but there is one thing, it takes me to this page:</p>\n<pre><code>localhost:8080/profiles/?1\n</code></pre>\n<p>Accordingly, I do not receive information, and in order to receive it, I must manually change the link to this:</p>\n<pre><code>localhost:8080/profiles/1\n</code></pre>\n<p>I have a question, what did I do wrong and why is this happening?</p>\n<p>profiles.html:</p>\n<pre><code>&lt;div th:method=&quot;GET&quot; th:action=&quot;@{/profiles/{id}}&quot; th:object=&quot;${profileById}&quot;&gt;\n&lt;p th:text=&quot;*{firstName}&quot;&gt;\n&lt;p th:text=&quot;*{lastName}&quot;&gt;\n&lt;p th:text=&quot;*{email}&quot;&gt;\n&lt;/div&gt;\n</code></pre>\n<p>main.html:</p>\n<pre><code>&lt;form th:method=&quot;POST&quot; th:action=&quot;@{/profiles}&quot; th:object=&quot;${profile}&quot;&gt;\n&lt;input type=&quot;text&quot; placeholder=&quot;Input First Name:&quot; th:field=&quot;*{firstName}&quot;/&gt;\n&lt;input type=&quot;text&quot; placeholder=&quot;Input Last Name:&quot; th:field=&quot;*{lastName}&quot;/&gt;\n&lt;input type=&quot;email&quot; placeholder=&quot;Input Email:&quot; th:field=&quot;*{email}&quot;/&gt;\n&lt;input type=&quot;password&quot; placeholder=&quot;Input Password:&quot; th:field=&quot;*{password}&quot;/&gt;\n&lt;button type=&quot;submit&quot;&gt;Create Profile&lt;/button&gt;\n&lt;/form&gt;\n\n&lt;div th:each=&quot;profiles : ${profiles}&quot;&gt;\n&lt;a th:href=&quot;@{/profiles/(${profiles.id})}&quot; th:text=&quot;*{profiles.firstName}&quot;&gt;&lt;/a&gt;\n&lt;/div&gt;\n</code></pre>\n<p>I don’t see much sense in dropping information from controllers \\ services and the repository, the problem is, as I indicated earlier, that th: href throws me to</p>\n<blockquote>\n<p>profiles/?1</p>\n</blockquote>\n<p>and not to</p>\n<blockquote>\n<p>profiles/1 - <strong>I need it here</strong></p>\n</blockquote>\n<p><em>Thank you for your attention</em></p>\n"},{"tags":["java","spring-boot","apache-pulsar","spring-pulsar"],"comments":[{"owner":{"account_id":2365019,"reputation":5194,"user_id":2070861,"accept_rate":100,"display_name":"sobychacko"},"score":0,"creation_date":1687465411,"post_id":76531256,"comment_id":134944668,"body_markdown":"Here is a working sample that uses a JSON type: https://github.com/spring-projects/spring-pulsar/blob/main/spring-pulsar-sample-apps/sample-app1/src/main/java/app1/SpringPulsarBootApp.java#L109. Could you compare that with your setup? If things are still not working, feel free to share a reproducible Boot sample project with us and we will be happy to look at this further and assist.","body":"Here is a working sample that uses a JSON type: <a href=\"https://github.com/spring-projects/spring-pulsar/blob/main/spring-pulsar-sample-apps/sample-app1/src/main/java/app1/SpringPulsarBootApp.java#L109\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-pulsar/blob/main/&hellip;</a>. Could you compare that with your setup? If things are still not working, feel free to share a reproducible Boot sample project with us and we will be happy to look at this further and assist."},{"owner":{"account_id":17382009,"reputation":23,"user_id":12594040,"display_name":"Neha P"},"score":0,"creation_date":1687503477,"post_id":76531256,"comment_id":134948687,"body_markdown":"Hi, thank you so much for your response. I compared my work with the sample but still couldn&#39;t get it to work. This is what I have till now: https://github.com/neha-smartsense/spring-pulsar-demo. I think I&#39;ve missed something small, but can&#39;t figure out what.","body":"Hi, thank you so much for your response. I compared my work with the sample but still couldn&#39;t get it to work. This is what I have till now: <a href=\"https://github.com/neha-smartsense/spring-pulsar-demo\" rel=\"nofollow noreferrer\">github.com/neha-smartsense/spring-pulsar-demo</a>. I think I&#39;ve missed something small, but can&#39;t figure out what."}],"answers":[{"tags":[],"owner":{"account_id":2365019,"reputation":5194,"user_id":2070861,"accept_rate":100,"display_name":"sobychacko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687535936,"creation_date":1687535936,"answer_id":76541747,"question_id":76531256,"body_markdown":"The problem is because of your domain object missing a default constructor and thus Jackson throws an internal exception. Please refer to Jackson docs for more details on this topic. You can add a default constructor to your `User` domain class. Alternatively, you can also switch your domain class to a Java record as below:\r\n```\r\npublic record User(String email, String firstName){}\r\n```\r\n\r\nWhat was happening was that internally, the exception was caught by the framework and interpret that as a signal for negatively acknowledging the message (nack). Each nack&#39;ed message will be redelivered to the Pulsar consumer every 60 seconds by default. This is why you were not seeing any exception stack trace on the console. We can add a debug log to make these errors come to surface sooner. \r\n\r\nYou can also add dead letter policy for the consumer so that the failed message doesn&#39;t get redelivered every minute infinitely. See this docs section for more details on that: https://docs.spring.io/spring-pulsar/docs/current-SNAPSHOT/reference/html/#_using_dead_letter_topic_from_apache_pulsar_for_message_redelivery_and_error_handling\r\nHowever, in your case, all the messages would fail without the suggested fixes here, since the underlying domain object class has deserialization issues. ","title":"How to consume JSON object in Apache Pulsar using spring-pulsar-spring-boot-starter?","body":"<p>The problem is because of your domain object missing a default constructor and thus Jackson throws an internal exception. Please refer to Jackson docs for more details on this topic. You can add a default constructor to your <code>User</code> domain class. Alternatively, you can also switch your domain class to a Java record as below:</p>\n<pre><code>public record User(String email, String firstName){}\n</code></pre>\n<p>What was happening was that internally, the exception was caught by the framework and interpret that as a signal for negatively acknowledging the message (nack). Each nack'ed message will be redelivered to the Pulsar consumer every 60 seconds by default. This is why you were not seeing any exception stack trace on the console. We can add a debug log to make these errors come to surface sooner.</p>\n<p>You can also add dead letter policy for the consumer so that the failed message doesn't get redelivered every minute infinitely. See this docs section for more details on that: <a href=\"https://docs.spring.io/spring-pulsar/docs/current-SNAPSHOT/reference/html/#_using_dead_letter_topic_from_apache_pulsar_for_message_redelivery_and_error_handling\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-pulsar/docs/current-SNAPSHOT/reference/html/#_using_dead_letter_topic_from_apache_pulsar_for_message_redelivery_and_error_handling</a>\nHowever, in your case, all the messages would fail without the suggested fixes here, since the underlying domain object class has deserialization issues.</p>\n"}],"owner":{"account_id":17382009,"reputation":23,"user_id":12594040,"display_name":"Neha P"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":227,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76541747,"answer_count":1,"score":0,"last_activity_date":1687535936,"creation_date":1687431999,"question_id":76531256,"body_markdown":"I am trying to implement a simple messaging queue using Spring Boot and Apache Pulsar. The system works fine when working with String datatype but not for a Custom Object. Below are the object I&#39;m using as well as the producer and consumer:\r\n\r\nCustom Object:\r\n ```java\r\npackage com.example.springpulsar;\r\npublic class User {\r\n\r\n    private String email;\r\n    private String firstName;\r\n\r\n // constructors, getters and setters\r\n}\r\n```\r\nProducer:\r\n```java\r\npackage com.example.springpulsar;\r\n\r\n// imports\r\n\r\n@Component\r\npublic class PulsarProducer {\r\n\r\n    @Autowired\r\n    private PulsarTemplate&lt;User&gt; template;\r\n\r\n    private static final String USER_TOPIC = &quot;user-topic&quot;;\r\n\r\n    public void sendMessageToPulsarTopic(User user) throws PulsarClientException {\r\n        template.send(USER_TOPIC, user);\r\n    }\r\n}\r\n```\r\n\r\nConsumer:\r\n```java\r\npackage com.example.springpulsar;\r\n\r\n// imports\r\n\r\n@Service\r\npublic class PulsarConsumer {\r\n\r\n    private static final String USER_TOPIC = &quot;user-topic&quot;;\r\n   \r\n    private final Logger LOGGER = LoggerFactory.getLogger(PulsarConsumer.class);\r\n\r\n    @PulsarListener(\r\n            subscriptionName = &quot;user-topic-subscription&quot;,\r\n            topics = USER_TOPIC,\r\n            subscriptionType = SubscriptionType.Shared,\r\n            schemaType = SchemaType.JSON\r\n    )\r\n    public void userTopicListener(User user) {\r\n        LOGGER.info(&quot;Received user object with email: {}&quot;, user.getEmail());\r\n    }\r\n}\r\n```\r\n\r\nGradle dependency: [org.springframework.pulsar:spring-pulsar-spring-boot-starter:0.2.0](https://mvnrepository.com/artifact/org.springframework.pulsar/spring-pulsar-spring-boot-starter/0.2.0)\r\n\r\nApplication properties:\r\n```\r\nspring:\r\n  pulsar:\r\n    defaults:\r\n      type-mappings:\r\n        - message-type: com.example.springpulsar.User\r\n          schema-info:\r\n            schema-type: JSON\r\n``` \r\n\r\nI read somewhere that adding the schemaType in the Listener annotation should work, but it hasn&#39;t.  Debug logs:\r\n```\r\n2023-06-20T14:41:24.050+05:30 DEBUG 32777 --- [nio-8085-exec-5] o.a.p.c.impl.BatchMessageContainerImpl   : [user-topic] [null] add message to batch, num messages in batch so far 0\r\n2023-06-20T14:41:24.053+05:30 DEBUG 32777 --- [r-client-io-1-1] o.a.pulsar.client.impl.ProducerImpl      : [user-topic] [standalone-1-21] Sending message cnx org.apache.pulsar.client.impl.ClientCnx@6f18e7a7, sequenceId 1\r\n2023-06-20T14:41:24.056+05:30 DEBUG 32777 --- [r-client-io-1-1] o.a.p.common.protocol.PulsarDecoder      : [localhost/127.0.0.1:6650] Received cmd SEND_RECEIPT\r\n2023-06-20T14:41:24.056+05:30 DEBUG 32777 --- [r-client-io-1-1] o.apache.pulsar.client.impl.ClientCnx    : [id: 0xbf5c5f2c, L:/127.0.0.1:48676 - R:localhost/127.0.0.1:6650] Got receipt for producer: 0 -- msg: 1 -- id: 22:42\r\n2023-06-20T14:41:24.056+05:30 DEBUG 32777 --- [r-client-io-1-1] o.a.pulsar.client.impl.ProducerImpl      : [user-topic] [standalone-1-21] Received ack for msg 1 \r\n2023-06-20T14:41:24.057+05:30 DEBUG 32777 --- [r-client-io-1-1] o.a.p.common.protocol.PulsarDecoder      : [localhost/127.0.0.1:6650] Received cmd MESSAGE\r\n2023-06-20T14:41:24.057+05:30 DEBUG 32777 --- [r-client-io-1-1] o.apache.pulsar.client.impl.ClientCnx    : [id: 0xbf5c5f2c, L:/127.0.0.1:48676 - R:localhost/127.0.0.1:6650] Received a message from the server: org.apache.pulsar.common.api.proto.CommandMessage@697f429b\r\n2023-06-20T14:41:24.057+05:30 DEBUG 32777 --- [r-client-io-1-1] o.a.pulsar.client.impl.ConsumerImpl      : [user-topic][user-topic-subscription] Received message: 22/42\r\n```\r\n\r\nI do see that the `ConsumerImpl` receives the message, but the listener method is never called.\r\n\r\nAny help is appreciated. Thank you!","title":"How to consume JSON object in Apache Pulsar using spring-pulsar-spring-boot-starter?","body":"<p>I am trying to implement a simple messaging queue using Spring Boot and Apache Pulsar. The system works fine when working with String datatype but not for a Custom Object. Below are the object I'm using as well as the producer and consumer:</p>\n<p>Custom Object:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.springpulsar;\npublic class User {\n\n   private String email;\n   private String firstName;\n\n// constructors, getters and setters\n}\n</code></pre>\n<p>Producer:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.springpulsar;\n\n// imports\n\n@Component\npublic class PulsarProducer {\n\n    @Autowired\n    private PulsarTemplate&lt;User&gt; template;\n\n    private static final String USER_TOPIC = &quot;user-topic&quot;;\n\n    public void sendMessageToPulsarTopic(User user) throws PulsarClientException {\n        template.send(USER_TOPIC, user);\n    }\n}\n</code></pre>\n<p>Consumer:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.springpulsar;\n\n// imports\n\n@Service\npublic class PulsarConsumer {\n\n    private static final String USER_TOPIC = &quot;user-topic&quot;;\n   \n    private final Logger LOGGER = LoggerFactory.getLogger(PulsarConsumer.class);\n\n    @PulsarListener(\n            subscriptionName = &quot;user-topic-subscription&quot;,\n            topics = USER_TOPIC,\n            subscriptionType = SubscriptionType.Shared,\n            schemaType = SchemaType.JSON\n    )\n    public void userTopicListener(User user) {\n        LOGGER.info(&quot;Received user object with email: {}&quot;, user.getEmail());\n    }\n}\n</code></pre>\n<p>Gradle dependency: <a href=\"https://mvnrepository.com/artifact/org.springframework.pulsar/spring-pulsar-spring-boot-starter/0.2.0\" rel=\"nofollow noreferrer\">org.springframework.pulsar:spring-pulsar-spring-boot-starter:0.2.0</a></p>\n<p>Application properties:</p>\n<pre><code>spring:\n  pulsar:\n    defaults:\n      type-mappings:\n        - message-type: com.example.springpulsar.User\n          schema-info:\n            schema-type: JSON\n</code></pre>\n<p>I read somewhere that adding the schemaType in the Listener annotation should work, but it hasn't.  Debug logs:</p>\n<pre><code>2023-06-20T14:41:24.050+05:30 DEBUG 32777 --- [nio-8085-exec-5] o.a.p.c.impl.BatchMessageContainerImpl   : [user-topic] [null] add message to batch, num messages in batch so far 0\n2023-06-20T14:41:24.053+05:30 DEBUG 32777 --- [r-client-io-1-1] o.a.pulsar.client.impl.ProducerImpl      : [user-topic] [standalone-1-21] Sending message cnx org.apache.pulsar.client.impl.ClientCnx@6f18e7a7, sequenceId 1\n2023-06-20T14:41:24.056+05:30 DEBUG 32777 --- [r-client-io-1-1] o.a.p.common.protocol.PulsarDecoder      : [localhost/127.0.0.1:6650] Received cmd SEND_RECEIPT\n2023-06-20T14:41:24.056+05:30 DEBUG 32777 --- [r-client-io-1-1] o.apache.pulsar.client.impl.ClientCnx    : [id: 0xbf5c5f2c, L:/127.0.0.1:48676 - R:localhost/127.0.0.1:6650] Got receipt for producer: 0 -- msg: 1 -- id: 22:42\n2023-06-20T14:41:24.056+05:30 DEBUG 32777 --- [r-client-io-1-1] o.a.pulsar.client.impl.ProducerImpl      : [user-topic] [standalone-1-21] Received ack for msg 1 \n2023-06-20T14:41:24.057+05:30 DEBUG 32777 --- [r-client-io-1-1] o.a.p.common.protocol.PulsarDecoder      : [localhost/127.0.0.1:6650] Received cmd MESSAGE\n2023-06-20T14:41:24.057+05:30 DEBUG 32777 --- [r-client-io-1-1] o.apache.pulsar.client.impl.ClientCnx    : [id: 0xbf5c5f2c, L:/127.0.0.1:48676 - R:localhost/127.0.0.1:6650] Received a message from the server: org.apache.pulsar.common.api.proto.CommandMessage@697f429b\n2023-06-20T14:41:24.057+05:30 DEBUG 32777 --- [r-client-io-1-1] o.a.pulsar.client.impl.ConsumerImpl      : [user-topic][user-topic-subscription] Received message: 22/42\n</code></pre>\n<p>I do see that the <code>ConsumerImpl</code> receives the message, but the listener method is never called.</p>\n<p>Any help is appreciated. Thank you!</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1687395085,"post_id":76527993,"comment_id":134932231,"body_markdown":"Try throwing a different kind of exception. I *suspect* this is because you are triggering the default [`SecurityManager`](https://docs.oracle.com/javase/8/docs/api/java/lang/SecurityManager.html). But that isn&#39;t something typically done.","body":"Try throwing a different kind of exception. I <i>suspect</i> this is because you are triggering the default <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/SecurityManager.html\" rel=\"nofollow noreferrer\"><code>SecurityManager</code></a>. But that isn&#39;t something typically done."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1687395175,"post_id":76527993,"comment_id":134932239,"body_markdown":"Works in Java 12: https://ideone.com/UpDgl2","body":"Works in Java 12: <a href=\"https://ideone.com/UpDgl2\" rel=\"nofollow noreferrer\">ideone.com/UpDgl2</a>"},{"owner":{"account_id":10838690,"reputation":3209,"user_id":7970787,"display_name":"Alex R"},"score":3,"creation_date":1687397587,"post_id":76527993,"comment_id":134932405,"body_markdown":"Also works with Oracle JDK 17.0.1 and 17.0.7","body":"Also works with Oracle JDK 17.0.1 and 17.0.7"},{"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"score":2,"creation_date":1687417600,"post_id":76527993,"comment_id":134934450,"body_markdown":"I think this is not reproduceable, so probably something wrong with your code but not this specific snippet you posted here.","body":"I think this is not reproduceable, so probably something wrong with your code but not this specific snippet you posted here."},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1687535770,"post_id":76527993,"comment_id":134955628,"body_markdown":"Also works in Java 18.","body":"Also works in Java 18."}],"answers":[{"tags":[],"owner":{"account_id":18789538,"reputation":141,"user_id":13702328,"display_name":"freeideas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687532278,"creation_date":1687532278,"answer_id":76541285,"question_id":76527993,"body_markdown":"I put the same code into ReplIt -- https://replit.com/@carl26/Java#Main.java -- and it throws the SecurityException I expect. Java -version there is &quot;openjdk version &quot;17.0.5&quot; 2022-10-18&quot;.\r\n\r\nSo it is something about my particular JDK or JRE. I don&#39;t care because I now know that I was not coding it wrong, and because this problem is just an irritation that will probably go away by itself as I naturally update over time.\r\n\r\nThanks to the commenters who tried it on their JVMs and gave me the clue I needed.","title":"Why does this code print &quot;IllegalArgumentException: Self-suppression not permitted&quot;?","body":"<p>I put the same code into ReplIt -- <a href=\"https://replit.com/@carl26/Java#Main.java\" rel=\"nofollow noreferrer\">https://replit.com/@carl26/Java#Main.java</a> -- and it throws the SecurityException I expect. Java -version there is &quot;openjdk version &quot;17.0.5&quot; 2022-10-18&quot;.</p>\n<p>So it is something about my particular JDK or JRE. I don't care because I now know that I was not coding it wrong, and because this problem is just an irritation that will probably go away by itself as I naturally update over time.</p>\n<p>Thanks to the commenters who tried it on their JVMs and gave me the clue I needed.</p>\n"}],"owner":{"account_id":18789538,"reputation":141,"user_id":13702328,"display_name":"freeideas"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":147,"favorite_count":0,"down_vote_count":2,"up_vote_count":4,"answer_count":1,"score":2,"last_activity_date":1687535726,"creation_date":1687394788,"question_id":76527993,"body_markdown":"\r\n    public class Test {\r\n\r\n        public static void main(String[] args) {\r\n            try {\r\n                doSomething();\r\n            } catch (Throwable t) {\r\n                System.out.println(&quot;Caught exception: &quot; + t);\r\n            }\r\n        }\r\n\r\n        private static void doSomething() {\r\n            try ( Resource r = new Resource(); ) {\r\n                throw new SecurityException(&quot;deliberate exception&quot;);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    class Resource implements AutoCloseable {\r\n        public void close() {\r\n            System.out.println(&quot;close()&quot;);\r\n        }\r\n    }\r\n\r\nI expect to see &quot;SecurityException: deliberate exception&quot;, but instead I see &quot;IllegalArgumentException: Self-suppression not permitted&quot;.\r\n\r\nMy googling tells me that this happens when there is an exception thrown inside the try block, and then another exception is thrown by the close() method. But as you can see, this is impossible. Fortunately I can get the real exception from .getCause(), but I wish I could understand this behavior.\r\n\r\nOpenjdk version &quot;17.0.7&quot; 2023-04-18\r\n\r\nEdit: I am running this in vscode. Beginnging to think this is a bug in its JVM. Will try a different javac and JVM later today. Thank You.\r\n\r\nEdit: Doesn&#39;t matter what kind of exception I throw. Doesn&#39;t matter whether it is a checked exception or not. Always &quot;Self-suppression&quot;. I used &quot;SecurityException&quot; to illustrate that sometimes it is important to be able to tell what type of exception was thrown.\r\n\r\nEdit: Stack trace is Caught exception:\r\n\r\n``` none\r\n    java.lang.IllegalArgumentException: Self-suppression not permitted\r\n    java.lang.IllegalArgumentException: Self-suppression not permitted\r\n        at \r\n    java.base/java.lang.Throwable.addSuppressed(Throwable.java:1072)\r\n        at jLib.Test.doSomething(Test.java:19)\r\n        at jLib.Test.main(Test.java:7)\r\n    Caused by: java.lang.SecurityException: deliberate exception\r\n        at jLib.Test.doSomething(Test.java:18)\r\n        ... 1 more\r\n```\r\n","title":"Why does this code print &quot;IllegalArgumentException: Self-suppression not permitted&quot;?","body":"<pre><code>public class Test {\n\n    public static void main(String[] args) {\n        try {\n            doSomething();\n        } catch (Throwable t) {\n            System.out.println(&quot;Caught exception: &quot; + t);\n        }\n    }\n\n    private static void doSomething() {\n        try ( Resource r = new Resource(); ) {\n            throw new SecurityException(&quot;deliberate exception&quot;);\n        }\n    }\n\n}\n\nclass Resource implements AutoCloseable {\n    public void close() {\n        System.out.println(&quot;close()&quot;);\n    }\n}\n</code></pre>\n<p>I expect to see &quot;SecurityException: deliberate exception&quot;, but instead I see &quot;IllegalArgumentException: Self-suppression not permitted&quot;.</p>\n<p>My googling tells me that this happens when there is an exception thrown inside the try block, and then another exception is thrown by the close() method. But as you can see, this is impossible. Fortunately I can get the real exception from .getCause(), but I wish I could understand this behavior.</p>\n<p>Openjdk version &quot;17.0.7&quot; 2023-04-18</p>\n<p>Edit: I am running this in vscode. Beginnging to think this is a bug in its JVM. Will try a different javac and JVM later today. Thank You.</p>\n<p>Edit: Doesn't matter what kind of exception I throw. Doesn't matter whether it is a checked exception or not. Always &quot;Self-suppression&quot;. I used &quot;SecurityException&quot; to illustrate that sometimes it is important to be able to tell what type of exception was thrown.</p>\n<p>Edit: Stack trace is Caught exception:</p>\n<pre class=\"lang-none prettyprint-override\"><code>    java.lang.IllegalArgumentException: Self-suppression not permitted\n    java.lang.IllegalArgumentException: Self-suppression not permitted\n        at \n    java.base/java.lang.Throwable.addSuppressed(Throwable.java:1072)\n        at jLib.Test.doSomething(Test.java:19)\n        at jLib.Test.main(Test.java:7)\n    Caused by: java.lang.SecurityException: deliberate exception\n        at jLib.Test.doSomething(Test.java:18)\n        ... 1 more\n</code></pre>\n"},{"tags":["java","httpurlconnection","wiremock"],"owner":{"account_id":4206618,"reputation":808,"user_id":4180447,"accept_rate":47,"display_name":"tarekahf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687535291,"creation_date":1687535291,"question_id":76541668,"body_markdown":"Started using WireMock and managed to write the first working code parts to mock rest calls using HttpURLConnection.\r\n\r\nI did struggle in the beginning and was getting the error `connection refused` when executing the `stubFor()` method. I am running the code below in JUnit 4 class, and not using JUnit Rule to initialize the WireMockServer:\r\n\r\n```\r\npublic class TestHttpURLConnectionMock {\r\n\tprivate final static int WIREMOCK_PORT = 8089;\r\n\tprivate final static String BASE_URL = &quot;http://localhost:&quot; + WIREMOCK_PORT + &quot;/&quot;;\r\n\tprivate final static String JWT_RESPONSE_JSON;\r\n\tstatic {\r\n\t\tJWT_RESPONSE_JSON = &quot;{\\r\\n&quot; \r\n\t\t\t\t+ ...\r\n\t\t\t\t+ &quot;}&quot;;\r\n\t}\r\n\r\n\t@BeforeClass\r\n\tpublic static void setup() {\r\n\t\tSystem.out.println(&quot;This is the Setup Method&quot;);\r\n\t\twireMockServer = new WireMockServer(options().port(WIREMOCK_PORT));\r\n\t\twireMockServer.start();\r\n\t\tloggerWrapper.debug(CAT_NAME, &quot;WireMock server started.&quot;);\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void _01_testCallHttpURLConnection() throws Exception {\r\n\t\twireMockServer.stubFor(\r\n\t\t\tpost(urlEqualTo(&quot;/&quot; + AUTH_PART_URL))\r\n\t\t\t.willReturn(\r\n\t\t\t\tok()\r\n\t\t\t\t.withBody(JWT_RESPONSE_JSON)\r\n\t\t\t)\r\n\t\t);\r\n\t\tMyService myService = new MyService(false); //This is a wrapper over HttpURLConnection\r\n\t\tmyService.setEndPointBaseURL(BASE_URL);\r\n\t\tmyService.setAuthPartURL(AUTH_PART_URL);\r\n\t\tmyService.setSslFlag(SSL_FALSE);\r\n\t\tmyService.setClient_id(USER_ID);\r\n\t\tmyService.setClient_secret(USER_SECRET);\r\n\t\ttry {\r\n\t\t\tmyService.callWSAuth();\r\n\t\t\tfinal int EXPECT_EXPIRES = 3600;\r\n\t\t\tJWTResponse resp=null;\r\n\t\t\tresp = myService.getJWTResponse();\r\n\t\t\tcollector.checkThat(resp.getHttpResponseCode(), is(myService.getHttpURLCon().getResponseCode()));\r\n\t\t\tif (myService.getHttpURLCon().getResponseCode() == HttpsURLConnection.HTTP_OK) {\r\n\t\t\t\tcollector.checkThat(resp, notNullValue());\r\n\t\t\t\tcollector.checkThat(resp.getAccess_token(), not(isEmptyOrNullString()));\r\n\t\t\t\tcollector.checkThat(resp.getExpires_in(), is(EXPECT_EXPIRES));\r\n\t\t\t\tSystem.out.println(&quot;JWT from response: &quot; + resp.getAccess_token());\r\n\t\t\t}\r\n\t\t\tcollector.checkThat(resp.getError(), isEmptyOrNullString());\r\n\t\t\tcollector.checkThat(resp.getHttpResponseCode(), is(HttpsURLConnection.HTTP_OK));\r\n\t\t\tcollector.checkThat(resp.getResponseAsJson(), not(isEmptyOrNullString()));\r\n\t\t\tSystem.out.println(&quot;JWT Response as Json =\\n&quot; + resp.getResponseAsJson());\r\n\t\t} catch (Exception ex) {\r\n\t\t\tSystem.out.println(ex.toString());\r\n\t\t\tex.printStackTrace();\r\n\t\t\tfail(ex.toString());\r\n\t\t}\r\n\t}\r\n\r\n```\r\n\r\nThe above code is working fine, and I have the following questions:\r\n\r\n1. If I don&#39;t specify the variable `wireMockServer` with the method `stubFor()` I will get a connection refused error. This is not mentioned anywhere in the WireMock documentation pages. All the provided sample code uses the method `stubFor()` directly. I had to call the method as follows `wireMockServer.stubFor()`. Please help me understand this part.\r\n\r\n2. If I don&#39;t specify the `/` at ate beginning of the url for `urlEqualTo(&quot;/&quot; + AUTH_PART_URL)`. This was not clear to me also. I thought it should work without spespecifying` in the beginning.\r\n\r\nI appreciate your help.","title":"WireMock stubbing code in Java and using a variable for WireMockServer object","body":"<p>Started using WireMock and managed to write the first working code parts to mock rest calls using HttpURLConnection.</p>\n<p>I did struggle in the beginning and was getting the error <code>connection refused</code> when executing the <code>stubFor()</code> method. I am running the code below in JUnit 4 class, and not using JUnit Rule to initialize the WireMockServer:</p>\n<pre><code>public class TestHttpURLConnectionMock {\n    private final static int WIREMOCK_PORT = 8089;\n    private final static String BASE_URL = &quot;http://localhost:&quot; + WIREMOCK_PORT + &quot;/&quot;;\n    private final static String JWT_RESPONSE_JSON;\n    static {\n        JWT_RESPONSE_JSON = &quot;{\\r\\n&quot; \n                + ...\n                + &quot;}&quot;;\n    }\n\n    @BeforeClass\n    public static void setup() {\n        System.out.println(&quot;This is the Setup Method&quot;);\n        wireMockServer = new WireMockServer(options().port(WIREMOCK_PORT));\n        wireMockServer.start();\n        loggerWrapper.debug(CAT_NAME, &quot;WireMock server started.&quot;);\n    }\n\n    @Test\n    public void _01_testCallHttpURLConnection() throws Exception {\n        wireMockServer.stubFor(\n            post(urlEqualTo(&quot;/&quot; + AUTH_PART_URL))\n            .willReturn(\n                ok()\n                .withBody(JWT_RESPONSE_JSON)\n            )\n        );\n        MyService myService = new MyService(false); //This is a wrapper over HttpURLConnection\n        myService.setEndPointBaseURL(BASE_URL);\n        myService.setAuthPartURL(AUTH_PART_URL);\n        myService.setSslFlag(SSL_FALSE);\n        myService.setClient_id(USER_ID);\n        myService.setClient_secret(USER_SECRET);\n        try {\n            myService.callWSAuth();\n            final int EXPECT_EXPIRES = 3600;\n            JWTResponse resp=null;\n            resp = myService.getJWTResponse();\n            collector.checkThat(resp.getHttpResponseCode(), is(myService.getHttpURLCon().getResponseCode()));\n            if (myService.getHttpURLCon().getResponseCode() == HttpsURLConnection.HTTP_OK) {\n                collector.checkThat(resp, notNullValue());\n                collector.checkThat(resp.getAccess_token(), not(isEmptyOrNullString()));\n                collector.checkThat(resp.getExpires_in(), is(EXPECT_EXPIRES));\n                System.out.println(&quot;JWT from response: &quot; + resp.getAccess_token());\n            }\n            collector.checkThat(resp.getError(), isEmptyOrNullString());\n            collector.checkThat(resp.getHttpResponseCode(), is(HttpsURLConnection.HTTP_OK));\n            collector.checkThat(resp.getResponseAsJson(), not(isEmptyOrNullString()));\n            System.out.println(&quot;JWT Response as Json =\\n&quot; + resp.getResponseAsJson());\n        } catch (Exception ex) {\n            System.out.println(ex.toString());\n            ex.printStackTrace();\n            fail(ex.toString());\n        }\n    }\n\n</code></pre>\n<p>The above code is working fine, and I have the following questions:</p>\n<ol>\n<li><p>If I don't specify the variable <code>wireMockServer</code> with the method <code>stubFor()</code> I will get a connection refused error. This is not mentioned anywhere in the WireMock documentation pages. All the provided sample code uses the method <code>stubFor()</code> directly. I had to call the method as follows <code>wireMockServer.stubFor()</code>. Please help me understand this part.</p>\n</li>\n<li><p>If I don't specify the <code>/</code> at ate beginning of the url for <code>urlEqualTo(&quot;/&quot; + AUTH_PART_URL)</code>. This was not clear to me also. I thought it should work without spespecifying` in the beginning.</p>\n</li>\n</ol>\n<p>I appreciate your help.</p>\n"},{"tags":["java","soap","jax-ws"],"answers":[{"tags":[],"owner":{"account_id":412676,"reputation":14001,"user_id":785864,"accept_rate":72,"display_name":"Nicolas Modrzyk"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1311916837,"creation_date":1311916837,"answer_id":6868951,"question_id":6868796,"body_markdown":"Extrated from [someone else](http://one-size-doesnt-fit-all.blogspot.com/2009/01/jax-ws-provider-api-based-endpoints-in_13.html)\r\n\r\n      The @BindingType annotation is only necessary as we&#39;re using SOAP v1.2.  \r\n      If you forget this line and you&#39;ve specified SOAP v1.2 in your WSDL you&#39;ll \r\n      receive a runtime exception about the wrong content-type header as follows:\r\n\r\n      SEVERE: Unsupported Content-Type: application/soap+xml; \r\n      charset=UTF-8 Supported ones are: [text/xml]\r\n      com.sun.xml.ws.server.UnsupportedMediaException: Unsupported Content-Type:  \r\n      application/soap+xml; charset=UTF-8 Supported ones are: [text/xml]\r\n\r\n\r\nMaybe you are trying to use the wrong SOAP version. \r\n\r\nGlassfish also has a [SOAP 1.2 page](http://metro.java.net/1.4/docs/soap12.html) to help. \r\n\r\n","title":"java trouble with SOAP response","body":"<p>Extrated from <a href=\"http://one-size-doesnt-fit-all.blogspot.com/2009/01/jax-ws-provider-api-based-endpoints-in_13.html\" rel=\"nofollow\">someone else</a></p>\n\n<pre><code>  The @BindingType annotation is only necessary as we're using SOAP v1.2.  \n  If you forget this line and you've specified SOAP v1.2 in your WSDL you'll \n  receive a runtime exception about the wrong content-type header as follows:\n\n  SEVERE: Unsupported Content-Type: application/soap+xml; \n  charset=UTF-8 Supported ones are: [text/xml]\n  com.sun.xml.ws.server.UnsupportedMediaException: Unsupported Content-Type:  \n  application/soap+xml; charset=UTF-8 Supported ones are: [text/xml]\n</code></pre>\n\n<p>Maybe you are trying to use the wrong SOAP version. </p>\n\n<p>Glassfish also has a <a href=\"http://metro.java.net/1.4/docs/soap12.html\" rel=\"nofollow\">SOAP 1.2 page</a> to help. </p>\n"},{"tags":[],"owner":{"display_name":"user869733"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1311957286,"creation_date":1311957286,"answer_id":6876235,"question_id":6868796,"body_markdown":"if you are using maven as a build tool, be sure to check your maven goal has XSoap1.2 as a protocol.. we had a similar issue we couldn&#39;t figure it out for weeks.. \r\n\r\nhope this helps you...","title":"java trouble with SOAP response","body":"<p>if you are using maven as a build tool, be sure to check your maven goal has XSoap1.2 as a protocol.. we had a similar issue we couldn't figure it out for weeks.. </p>\n\n<p>hope this helps you...</p>\n"},{"tags":[],"owner":{"account_id":275270,"reputation":23,"user_id":568046,"display_name":"bambrikii"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1348843559,"creation_date":1343796081,"answer_id":11752652,"question_id":6868796,"body_markdown":"You could remove `binding=&quot;http://java.sun.com/xml/ns/jaxws/2003/05/soap/bindings/HTTP/&quot;` from endpoint definition in the `sun-jaxws.xml`.","title":"java trouble with SOAP response","body":"<p>You could remove <code>binding=\"http://java.sun.com/xml/ns/jaxws/2003/05/soap/bindings/HTTP/\"</code> from endpoint definition in the <code>sun-jaxws.xml</code>.</p>\n"},{"tags":[],"owner":{"account_id":6678507,"reputation":334,"user_id":5152432,"display_name":"Marco Carlo Moriggi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687535105,"creation_date":1687535105,"answer_id":76541645,"question_id":6868796,"body_markdown":"Sorry for re-opening such an old question.\r\nI just want to add some more datail about WHY it should not be possible (at least in theory) to accept other MIMEs other than `text/xml` with a SOAP v1.1 server.\r\n\r\nThe [documentation about SOAP v1.1 on W3C (&#167;6)](https://www.w3.org/TR/2000/NOTE-SOAP-20000508/#_Toc478383526) states that \r\n\r\n&gt; HTTP applications MUST use the media type &quot;text/xml&quot; according to RFC 2376 when including SOAP entity bodies in HTTP messages.\r\n\r\nWhile if we look at the most recent [documentation of SOAP v1.2 (&#167;1.3)](https://www.w3.org/TR/soap12/#reltoxml) what we find is:\r\n\r\n&gt; The media type &quot;application/soap+xml&quot; SHOULD be used for XML 1.0 serializations of the SOAP message infoset\r\n\r\nI think that a nice try could be to add an equivalent service implementing SOAP v1.2 and gradually switch to this new one. In the vast majority of cases the switch would &quot;just work&quot;","title":"java trouble with SOAP response","body":"<p>Sorry for re-opening such an old question.\nI just want to add some more datail about WHY it should not be possible (at least in theory) to accept other MIMEs other than <code>text/xml</code> with a SOAP v1.1 server.</p>\n<p>The <a href=\"https://www.w3.org/TR/2000/NOTE-SOAP-20000508/#_Toc478383526\" rel=\"nofollow noreferrer\">documentation about SOAP v1.1 on W3C (§6)</a> states that</p>\n<blockquote>\n<p>HTTP applications MUST use the media type &quot;text/xml&quot; according to RFC 2376 when including SOAP entity bodies in HTTP messages.</p>\n</blockquote>\n<p>While if we look at the most recent <a href=\"https://www.w3.org/TR/soap12/#reltoxml\" rel=\"nofollow noreferrer\">documentation of SOAP v1.2 (§1.3)</a> what we find is:</p>\n<blockquote>\n<p>The media type &quot;application/soap+xml&quot; SHOULD be used for XML 1.0 serializations of the SOAP message infoset</p>\n</blockquote>\n<p>I think that a nice try could be to add an equivalent service implementing SOAP v1.2 and gradually switch to this new one. In the vast majority of cases the switch would &quot;just work&quot;</p>\n"}],"owner":{"account_id":365762,"reputation":9960,"user_id":710877,"display_name":"Anantha Sharma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16684,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":6876235,"answer_count":4,"score":2,"last_activity_date":1687535105,"creation_date":1311915320,"question_id":6868796,"body_markdown":"I&#39;m calling a web service from a jax-ws java client, when i recieve a response i get an exception saying that the content-type isn&#39;t supported,\r\n\r\nthe exception trace is as follows.\r\n\r\n    com.sun.xml.ws.server.UnsupportedMediaException: Unsupported Content-Type: application/soap+xml Supported ones are: [text/xml]\r\n    \tat com.sun.xml.ws.encoding.StreamSOAPCodec.decode(StreamSOAPCodec.java:295)\r\n    \tat com.sun.xml.ws.encoding.StreamSOAPCodec.decode(StreamSOAPCodec.java:129)\r\n    \tat com.sun.xml.ws.encoding.SOAPBindingCodec.decode(SOAPBindingCodec.java:360)\r\n    \tat com.sun.xml.ws.transport.http.client.HttpTransportPipe.process(HttpTransportPipe.java:187)\r\n    \tat com.sun.xml.ws.transport.http.client.HttpTransportPipe.processRequest(HttpTransportPipe.java:94)\r\n    \tat com.sun.xml.ws.transport.DeferredTransportPipe.processRequest(DeferredTransportPipe.java:116)\r\n    \tat com.sun.xml.ws.api.pipe.Fiber.__doRun(Fiber.java:598)\r\n    \tat com.sun.xml.ws.api.pipe.Fiber._doRun(Fiber.java:557)\r\n    \tat com.sun.xml.ws.api.pipe.Fiber.doRun(Fiber.java:542)\r\n    \tat com.sun.xml.ws.api.pipe.Fiber.runSync(Fiber.java:439)\r\n    \tat com.sun.xml.ws.client.Stub.process(Stub.java:222)\r\n    \tat com.sun.xml.ws.client.sei.SEIStub.doProcess(SEIStub.java:135)\r\n    \tat com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:109)\r\n    \tat com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:89)\r\n    \tat com.sun.xml.ws.client.sei.SEIStub.invoke(SEIStub.java:118)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:597)\r\n\r\nI have checked the headers in the soap request, it shows that the acceptable content-types are html/xml, text/jpg etc.. but not application/xml+soap. \r\n\r\nwhen testing with SoapUI, things work perfectly.\r\n\r\nwe are using SOAP v1.1.. but (clearly) the client is using SOAP 1.2.. is there a way for us to parse the response?","title":"java trouble with SOAP response","body":"<p>I'm calling a web service from a jax-ws java client, when i recieve a response i get an exception saying that the content-type isn't supported,</p>\n\n<p>the exception trace is as follows.</p>\n\n<pre><code>com.sun.xml.ws.server.UnsupportedMediaException: Unsupported Content-Type: application/soap+xml Supported ones are: [text/xml]\n    at com.sun.xml.ws.encoding.StreamSOAPCodec.decode(StreamSOAPCodec.java:295)\n    at com.sun.xml.ws.encoding.StreamSOAPCodec.decode(StreamSOAPCodec.java:129)\n    at com.sun.xml.ws.encoding.SOAPBindingCodec.decode(SOAPBindingCodec.java:360)\n    at com.sun.xml.ws.transport.http.client.HttpTransportPipe.process(HttpTransportPipe.java:187)\n    at com.sun.xml.ws.transport.http.client.HttpTransportPipe.processRequest(HttpTransportPipe.java:94)\n    at com.sun.xml.ws.transport.DeferredTransportPipe.processRequest(DeferredTransportPipe.java:116)\n    at com.sun.xml.ws.api.pipe.Fiber.__doRun(Fiber.java:598)\n    at com.sun.xml.ws.api.pipe.Fiber._doRun(Fiber.java:557)\n    at com.sun.xml.ws.api.pipe.Fiber.doRun(Fiber.java:542)\n    at com.sun.xml.ws.api.pipe.Fiber.runSync(Fiber.java:439)\n    at com.sun.xml.ws.client.Stub.process(Stub.java:222)\n    at com.sun.xml.ws.client.sei.SEIStub.doProcess(SEIStub.java:135)\n    at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:109)\n    at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:89)\n    at com.sun.xml.ws.client.sei.SEIStub.invoke(SEIStub.java:118)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n</code></pre>\n\n<p>I have checked the headers in the soap request, it shows that the acceptable content-types are html/xml, text/jpg etc.. but not application/xml+soap. </p>\n\n<p>when testing with SoapUI, things work perfectly.</p>\n\n<p>we are using SOAP v1.1.. but (clearly) the client is using SOAP 1.2.. is there a way for us to parse the response?</p>\n"},{"tags":["java","spring","spring-boot","kotlin","yaml"],"answers":[{"tags":[],"owner":{"account_id":1311122,"reputation":56893,"user_id":1259109,"display_name":"Dave Syer"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1403867975,"creation_date":1403867975,"answer_id":24450569,"question_id":24448947,"body_markdown":"If `application.yml` contains errors it will cause a failure on startup. I guess it depends what you mean by &quot;error&quot; though. Certainly it will fail if the YAML is not well formed. Also if you are setting `@ConfigurationProperties` that are marked as `ignoreInvalidFields=true` for instance, or if you set a value that cannot be converted. That&#39;s a pretty wide range of errors.\r\n\r\nThe active profiles will probably be logged on startup by the `Environment` implementation (but in any case it&#39;s easy for you to grab that and log it in your launcher code - the `toString()` of teh `Environment` will list the active profiles I think). Active profiles (and more) are also available in the /env endpoint if you add the Actuator.","title":"How to log the active configuration in a Spring Boot application?","body":"<p>If <code>application.yml</code> contains errors it will cause a failure on startup. I guess it depends what you mean by \"error\" though. Certainly it will fail if the YAML is not well formed. Also if you are setting <code>@ConfigurationProperties</code> that are marked as <code>ignoreInvalidFields=true</code> for instance, or if you set a value that cannot be converted. That's a pretty wide range of errors.</p>\n\n<p>The active profiles will probably be logged on startup by the <code>Environment</code> implementation (but in any case it's easy for you to grab that and log it in your launcher code - the <code>toString()</code> of teh <code>Environment</code> will list the active profiles I think). Active profiles (and more) are also available in the /env endpoint if you add the Actuator.</p>\n"},{"tags":[],"owner":{"account_id":2708107,"reputation":1193,"user_id":2337270,"accept_rate":50,"display_name":"user2337270"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1427121108,"creation_date":1411437359,"answer_id":25985710,"question_id":24448947,"body_markdown":"I had the same problem, and wish there was a debug flag that would tell the profile processing system to spit out some useful logging. One possible way of doing it would be to register an event listener for your application context, and print out the profiles from the environment. I haven&#39;t tried doing it this way myself, so your mileage may vary. I think maybe something like what&#39;s outlined here:\r\n\r\nhttps://stackoverflow.com/questions/8686507/how-to-add-a-hook-to-the-application-context-initialization-event\r\n\r\nThen you&#39;d do something like this in your listener:\r\n\r\n    System.out.println(&quot;Active profiles: &quot; + Arrays.toString(ctxt.getEnvironment().getActiveProfiles()));\r\n\r\nMight be worth a try. Another way you could probably do it would be to declare the Environment to be injected in the code where you need to print the profiles. I.e.:\r\n\r\n    @Component\r\n    public class SomeClass {\r\n      @Autowired\r\n      private Environment env;\r\n      ...\r\n      private void dumpProfiles() {\r\n        // Print whatever needed from env here\r\n      }\r\n    }","title":"How to log the active configuration in a Spring Boot application?","body":"<p>I had the same problem, and wish there was a debug flag that would tell the profile processing system to spit out some useful logging. One possible way of doing it would be to register an event listener for your application context, and print out the profiles from the environment. I haven't tried doing it this way myself, so your mileage may vary. I think maybe something like what's outlined here:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/8686507/how-to-add-a-hook-to-the-application-context-initialization-event\">How to add a hook to the application context initialization event?</a></p>\n\n<p>Then you'd do something like this in your listener:</p>\n\n<pre><code>System.out.println(\"Active profiles: \" + Arrays.toString(ctxt.getEnvironment().getActiveProfiles()));\n</code></pre>\n\n<p>Might be worth a try. Another way you could probably do it would be to declare the Environment to be injected in the code where you need to print the profiles. I.e.:</p>\n\n<pre><code>@Component\npublic class SomeClass {\n  @Autowired\n  private Environment env;\n  ...\n  private void dumpProfiles() {\n    // Print whatever needed from env here\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6368923,"reputation":432,"user_id":4942014,"display_name":"Krzysztof Ziomek"},"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1464011391,"creation_date":1464011391,"answer_id":37392817,"question_id":24448947,"body_markdown":"Actuator /env service displays properties, but it doesn&#39;t displays which property value is actually active. Very often you may want to override your application properties with \r\n\r\n - profile-specific application properties\r\n - command line arguments\r\n - OS environment variables\r\n\r\nThus you will have the same property and different values in several sources. \r\n\r\nSnippet bellow prints active application properties values on startup:\r\n\r\n    @Configuration\r\n    public class PropertiesLogger {\r\n        private static final Logger log = LoggerFactory.getLogger(PropertiesLogger.class);\r\n    \r\n        @Autowired\r\n        private AbstractEnvironment environment;\r\n    \r\n        @PostConstruct\r\n        public void printProperties() {\r\n    \r\n            log.info(&quot;**** APPLICATION PROPERTIES SOURCES ****&quot;);\r\n    \r\n            Set&lt;String&gt; properties = new TreeSet&lt;&gt;();\r\n            for (PropertiesPropertySource p : findPropertiesPropertySources()) {\r\n                log.info(p.toString());\r\n                properties.addAll(Arrays.asList(p.getPropertyNames()));\r\n            }\r\n    \r\n            log.info(&quot;**** APPLICATION PROPERTIES VALUES ****&quot;);\r\n            print(properties);\r\n    \r\n        }\r\n    \r\n        private List&lt;PropertiesPropertySource&gt; findPropertiesPropertySources() {\r\n            List&lt;PropertiesPropertySource&gt; propertiesPropertySources = new LinkedList&lt;&gt;();\r\n            for (PropertySource&lt;?&gt; propertySource : environment.getPropertySources()) {\r\n                if (propertySource instanceof PropertiesPropertySource) {\r\n                    propertiesPropertySources.add((PropertiesPropertySource) propertySource);\r\n                }\r\n            }\r\n            return propertiesPropertySources;\r\n        }\r\n    \r\n        private void print(Set&lt;String&gt; properties) {\r\n            for (String propertyName : properties) {\r\n                log.info(&quot;{}={}&quot;, propertyName, environment.getProperty(propertyName));\r\n            }\r\n        }\r\n    \r\n    }","title":"How to log the active configuration in a Spring Boot application?","body":"<p>Actuator /env service displays properties, but it doesn't displays which property value is actually active. Very often you may want to override your application properties with </p>\n\n<ul>\n<li>profile-specific application properties</li>\n<li>command line arguments</li>\n<li>OS environment variables</li>\n</ul>\n\n<p>Thus you will have the same property and different values in several sources. </p>\n\n<p>Snippet bellow prints active application properties values on startup:</p>\n\n<pre><code>@Configuration\npublic class PropertiesLogger {\n    private static final Logger log = LoggerFactory.getLogger(PropertiesLogger.class);\n\n    @Autowired\n    private AbstractEnvironment environment;\n\n    @PostConstruct\n    public void printProperties() {\n\n        log.info(\"**** APPLICATION PROPERTIES SOURCES ****\");\n\n        Set&lt;String&gt; properties = new TreeSet&lt;&gt;();\n        for (PropertiesPropertySource p : findPropertiesPropertySources()) {\n            log.info(p.toString());\n            properties.addAll(Arrays.asList(p.getPropertyNames()));\n        }\n\n        log.info(\"**** APPLICATION PROPERTIES VALUES ****\");\n        print(properties);\n\n    }\n\n    private List&lt;PropertiesPropertySource&gt; findPropertiesPropertySources() {\n        List&lt;PropertiesPropertySource&gt; propertiesPropertySources = new LinkedList&lt;&gt;();\n        for (PropertySource&lt;?&gt; propertySource : environment.getPropertySources()) {\n            if (propertySource instanceof PropertiesPropertySource) {\n                propertiesPropertySources.add((PropertiesPropertySource) propertySource);\n            }\n        }\n        return propertiesPropertySources;\n    }\n\n    private void print(Set&lt;String&gt; properties) {\n        for (String propertyName : properties) {\n            log.info(\"{}={}\", propertyName, environment.getProperty(propertyName));\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":191029,"reputation":163,"user_id":431345,"display_name":"Fl&#225;vio Etrusco"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1529357715,"creation_date":1511794330,"answer_id":47513769,"question_id":24448947,"body_markdown":"In case you want to get the active profiles before initializing the beans/application, the only way I found is registering a custom Banner in your SpringBootServletInitializer/SpringApplication (i.e. ApplicationWebXml in a JHipster application).\r\n\r\ne.g.\r\n&lt;source language=&quot;java&quot;&gt;\r\n\r\n    @Override\r\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder builder)\r\n    {\r\n        // set a default to use when no profile is configured.\r\n        DefaultProfileUtil.addDefaultProfile(builder.application());\r\n        return builder.sources(MyApp.class).banner(this::printBanner);\r\n    }\r\n\r\n    /** Custom &#39;banner&#39; to obtain early access to the Spring configuration to validate and debug it. */\r\n    private void printBanner(Environment env, Class&lt;?&gt; sourceClass, PrintStream out)\r\n    {\r\n        if (env.getProperty(&quot;spring.datasource.url&quot;) == null)\r\n        {\r\n            throw new RuntimeException(\r\n                &quot;&#39;spring.datasource.url&#39; is not configured! Check your configuration files and the value of &#39;spring.profiles.active&#39; in your launcher.&quot;);\r\n        }\r\n        ...\r\n    }\r\n\r\n&lt;/source&gt;","title":"How to log the active configuration in a Spring Boot application?","body":"<p>In case you want to get the active profiles before initializing the beans/application, the only way I found is registering a custom Banner in your SpringBootServletInitializer/SpringApplication (i.e. ApplicationWebXml in a JHipster application).</p>\n\n<p>e.g.\n</p>\n\n<pre><code>@Override\nprotected SpringApplicationBuilder configure(SpringApplicationBuilder builder)\n{\n    // set a default to use when no profile is configured.\n    DefaultProfileUtil.addDefaultProfile(builder.application());\n    return builder.sources(MyApp.class).banner(this::printBanner);\n}\n\n/** Custom 'banner' to obtain early access to the Spring configuration to validate and debug it. */\nprivate void printBanner(Environment env, Class&lt;?&gt; sourceClass, PrintStream out)\n{\n    if (env.getProperty(\"spring.datasource.url\") == null)\n    {\n        throw new RuntimeException(\n            \"'spring.datasource.url' is not configured! Check your configuration files and the value of 'spring.profiles.active' in your launcher.\");\n    }\n    ...\n}\n</code></pre>\n\n<p></p>\n"},{"tags":[],"owner":{"account_id":4523413,"reputation":996,"user_id":3675955,"display_name":"fightlight"},"down_vote_count":1,"up_vote_count":49,"is_accepted":false,"score":48,"last_activity_date":1623835973,"creation_date":1514543026,"answer_id":48021072,"question_id":24448947,"body_markdown":"In addition to other answers: logging active properties on context refreshed event.\r\n\r\nJava 8\r\n\r\n    package mypackage;\r\n    \r\n    import lombok.extern.slf4j.Slf4j;\r\n    import org.springframework.context.event.ContextRefreshedEvent;\r\n    import org.springframework.context.event.EventListener;\r\n    import org.springframework.core.env.ConfigurableEnvironment;\r\n    import org.springframework.core.env.MapPropertySource;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.Collection;\r\n    import java.util.List;\r\n    \r\n    @Slf4j\r\n    @Component\r\n    public class AppContextEventListener {\r\n    \r\n        @EventListener\r\n        public void handleContextRefreshed(ContextRefreshedEvent event) {\r\n            printActiveProperties((ConfigurableEnvironment) event.getApplicationContext().getEnvironment());\r\n        }\r\n    \r\n        private void printActiveProperties(ConfigurableEnvironment env) {\r\n    \r\n            System.out.println(&quot;************************* ACTIVE APP PROPERTIES ******************************&quot;);\r\n    \r\n            List&lt;MapPropertySource&gt; propertySources = new ArrayList&lt;&gt;();\r\n    \r\n            env.getPropertySources().forEach(it -&gt; {\r\n                if (it instanceof MapPropertySource &amp;&amp; it.getName().contains(&quot;applicationConfig&quot;)) {\r\n                    propertySources.add((MapPropertySource) it);\r\n                }\r\n            });\r\n    \r\n            propertySources.stream()\r\n                    .map(propertySource -&gt; propertySource.getSource().keySet())\r\n                    .flatMap(Collection::stream)\r\n                    .distinct()\r\n                    .sorted()\r\n                    .forEach(key -&gt; {\r\n                        try {\r\n                            System.out.println(key + &quot;=&quot; + env.getProperty(key));\r\n                        } catch (Exception e) {\r\n                            log.warn(&quot;{} -&gt; {}&quot;, key, e.getMessage());\r\n                        }\r\n                    });\r\n            System.out.println(&quot;******************************************************************************&quot;);\r\n        }\r\n    }\r\n\r\n\r\nKotlin\r\n\r\n    package mypackage\r\n    \r\n    import mu.KLogging\r\n    import org.springframework.context.event.ContextRefreshedEvent\r\n    import org.springframework.context.event.EventListener\r\n    import org.springframework.core.env.ConfigurableEnvironment\r\n    import org.springframework.core.env.MapPropertySource\r\n    import org.springframework.stereotype.Component\r\n    \r\n    @Component\r\n    class AppContextEventListener {\r\n    \r\n        companion object : KLogging()\r\n    \r\n        @EventListener\r\n        fun handleContextRefreshed(event: ContextRefreshedEvent) {\r\n            printActiveProperties(event.applicationContext.environment as ConfigurableEnvironment)\r\n        }\r\n    \r\n        fun printActiveProperties(env: ConfigurableEnvironment) {\r\n            println(&quot;************************* ACTIVE APP PROPERTIES ******************************&quot;)\r\n            env.propertySources\r\n                    .filter { it.name.contains(&quot;applicationConfig&quot;) }\r\n                    .map { it as EnumerablePropertySource&lt;*&gt; }\r\n                    .map { it -&gt; it.propertyNames.toList() }\r\n                    .flatMap { it }\r\n                    .distinctBy { it }\r\n                    .sortedBy { it }\r\n                    .forEach { it -&gt;\r\n                        try {\r\n                            println(&quot;$it=${env.getProperty(it)}&quot;)\r\n                        } catch (e: Exception) {\r\n                            logger.warn(&quot;$it -&gt; ${e.message}&quot;)\r\n                        }\r\n                    }\r\n            println(&quot;******************************************************************************&quot;)\r\n        }\r\n    }\r\n\r\nOutput like:\r\n\r\n    ************************* ACTIVE APP PROPERTIES ******************************\r\n    server.port=3000\r\n    spring.application.name=my-app\r\n    ...\r\n    2017-12-29 13:13:32.843  WARN 36252 --- [           main] m.AppContextEventListener        : spring.boot.admin.client.service-url -&gt; Could not resolve placeholder &#39;management.address&#39; in value &quot;http://${management.address}:${server.port}&quot;\r\n    ...\r\n    spring.datasource.password=\r\n    spring.datasource.url=jdbc:postgresql://localhost/my_db?currentSchema=public\r\n    spring.datasource.username=db_user\r\n    ...\r\n    ******************************************************************************","title":"How to log the active configuration in a Spring Boot application?","body":"<p>In addition to other answers: logging active properties on context refreshed event.</p>\n<p>Java 8</p>\n<pre><code>package mypackage;\n\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.context.event.ContextRefreshedEvent;\nimport org.springframework.context.event.EventListener;\nimport org.springframework.core.env.ConfigurableEnvironment;\nimport org.springframework.core.env.MapPropertySource;\nimport org.springframework.stereotype.Component;\n\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.List;\n\n@Slf4j\n@Component\npublic class AppContextEventListener {\n\n    @EventListener\n    public void handleContextRefreshed(ContextRefreshedEvent event) {\n        printActiveProperties((ConfigurableEnvironment) event.getApplicationContext().getEnvironment());\n    }\n\n    private void printActiveProperties(ConfigurableEnvironment env) {\n\n        System.out.println(&quot;************************* ACTIVE APP PROPERTIES ******************************&quot;);\n\n        List&lt;MapPropertySource&gt; propertySources = new ArrayList&lt;&gt;();\n\n        env.getPropertySources().forEach(it -&gt; {\n            if (it instanceof MapPropertySource &amp;&amp; it.getName().contains(&quot;applicationConfig&quot;)) {\n                propertySources.add((MapPropertySource) it);\n            }\n        });\n\n        propertySources.stream()\n                .map(propertySource -&gt; propertySource.getSource().keySet())\n                .flatMap(Collection::stream)\n                .distinct()\n                .sorted()\n                .forEach(key -&gt; {\n                    try {\n                        System.out.println(key + &quot;=&quot; + env.getProperty(key));\n                    } catch (Exception e) {\n                        log.warn(&quot;{} -&gt; {}&quot;, key, e.getMessage());\n                    }\n                });\n        System.out.println(&quot;******************************************************************************&quot;);\n    }\n}\n</code></pre>\n<p>Kotlin</p>\n<pre><code>package mypackage\n\nimport mu.KLogging\nimport org.springframework.context.event.ContextRefreshedEvent\nimport org.springframework.context.event.EventListener\nimport org.springframework.core.env.ConfigurableEnvironment\nimport org.springframework.core.env.MapPropertySource\nimport org.springframework.stereotype.Component\n\n@Component\nclass AppContextEventListener {\n\n    companion object : KLogging()\n\n    @EventListener\n    fun handleContextRefreshed(event: ContextRefreshedEvent) {\n        printActiveProperties(event.applicationContext.environment as ConfigurableEnvironment)\n    }\n\n    fun printActiveProperties(env: ConfigurableEnvironment) {\n        println(&quot;************************* ACTIVE APP PROPERTIES ******************************&quot;)\n        env.propertySources\n                .filter { it.name.contains(&quot;applicationConfig&quot;) }\n                .map { it as EnumerablePropertySource&lt;*&gt; }\n                .map { it -&gt; it.propertyNames.toList() }\n                .flatMap { it }\n                .distinctBy { it }\n                .sortedBy { it }\n                .forEach { it -&gt;\n                    try {\n                        println(&quot;$it=${env.getProperty(it)}&quot;)\n                    } catch (e: Exception) {\n                        logger.warn(&quot;$it -&gt; ${e.message}&quot;)\n                    }\n                }\n        println(&quot;******************************************************************************&quot;)\n    }\n}\n</code></pre>\n<p>Output like:</p>\n<pre><code>************************* ACTIVE APP PROPERTIES ******************************\nserver.port=3000\nspring.application.name=my-app\n...\n2017-12-29 13:13:32.843  WARN 36252 --- [           main] m.AppContextEventListener        : spring.boot.admin.client.service-url -&gt; Could not resolve placeholder 'management.address' in value &quot;http://${management.address}:${server.port}&quot;\n...\nspring.datasource.password=\nspring.datasource.url=jdbc:postgresql://localhost/my_db?currentSchema=public\nspring.datasource.username=db_user\n...\n******************************************************************************\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6384417,"reputation":91,"user_id":4952800,"display_name":"AnjuR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681128886,"creation_date":1678882455,"answer_id":75744549,"question_id":24448947,"body_markdown":"If you want to log few active config values from application.yml file during the startup of your spring boot application.\r\nYou have to use ApplicationReadyListener Class from spring framework like this:\r\n \r\n    public class ApplicationReadyListener implements ApplicationListener&lt;ApplicationReadyEvent&gt; {\r\n\r\n    @Value(&quot;${key:defaultValue}&quot;)\r\n    private String keyValue;\r\n\r\n    @Override\r\n    public void onApplicationEvent(final ApplicationReadyEvent event) {\r\n      log.info(&quot;Active config value for key is: {}&quot;, keyValue);\r\n    }","title":"How to log the active configuration in a Spring Boot application?","body":"<p>If you want to log few active config values from application.yml file during the startup of your spring boot application.\nYou have to use ApplicationReadyListener Class from spring framework like this:</p>\n<pre><code>public class ApplicationReadyListener implements ApplicationListener&lt;ApplicationReadyEvent&gt; {\n\n@Value(&quot;${key:defaultValue}&quot;)\nprivate String keyValue;\n\n@Override\npublic void onApplicationEvent(final ApplicationReadyEvent event) {\n  log.info(&quot;Active config value for key is: {}&quot;, keyValue);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1352612,"reputation":4119,"user_id":1357094,"accept_rate":85,"display_name":"cellepo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1684545831,"creation_date":1684544121,"answer_id":76293145,"question_id":24448947,"body_markdown":"*If you want to print configuration properties*\r\n\r\nJava 17, Spring Boot 2.7.10\r\n===========================\r\n(tested with non-YAML)\r\n\r\nJust add this class anywhere in your Spring Boot project&#39;s `src`:\r\n```\r\npackage your.package;\r\n\r\nimport org.springframework.boot.env.OriginTrackedMapPropertySource;\r\nimport org.springframework.context.event.ContextRefreshedEvent;\r\nimport org.springframework.context.event.EventListener;\r\nimport org.springframework.core.env.ConfigurableEnvironment;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport java.util.Collection;\r\n\r\n@Component\r\npublic class AppContextEventListener {\r\n\r\n    @EventListener\r\n    public void printProperties(ContextRefreshedEvent contextRefreshedEvent) {\r\n        System.out.println(&quot;************************* ACTIVE PROPERTIES *************************&quot;);\r\n\r\n        ((ConfigurableEnvironment) contextRefreshedEvent.getApplicationContext().getEnvironment())\r\n            .getPropertySources()\r\n            .stream()\r\n            .filter(ps -&gt; ps instanceof OriginTrackedMapPropertySource)\r\n            // Convert each PropertySource to its properties Set\r\n            .map(ps -&gt; ((OriginTrackedMapPropertySource) ps).getSource().entrySet())\r\n            .flatMap(Collection::stream)\r\n            // Print properties within each Set\r\n            .forEach(property -&gt; System.out.println(property.getKey() + &quot;=&quot; + property.getValue()));\r\n\r\n        System.out.println(&quot;*********************************************************************&quot;);\r\n    }\r\n\r\n}\r\n```\r\n\r\nprints out something like:\r\n```\r\n...\r\n************************* ACTIVE PROPERTIES ***********************\r\nproperty - your.property.0: yourValue0\r\nproperty - your.property.1: yourValue1\r\nproperty - your.property.2: yourValue2\r\n*******************************************************************\r\nStarted YourApp in n.nnn seconds (JVM running for m.mmm)\r\n...\r\n```","title":"How to log the active configuration in a Spring Boot application?","body":"<p><em>If you want to print configuration properties</em></p>\n<h1>Java 17, Spring Boot 2.7.10</h1>\n<p>(tested with non-YAML)</p>\n<p>Just add this class anywhere in your Spring Boot project's <code>src</code>:</p>\n<pre><code>package your.package;\n\nimport org.springframework.boot.env.OriginTrackedMapPropertySource;\nimport org.springframework.context.event.ContextRefreshedEvent;\nimport org.springframework.context.event.EventListener;\nimport org.springframework.core.env.ConfigurableEnvironment;\nimport org.springframework.stereotype.Component;\n\nimport java.util.Collection;\n\n@Component\npublic class AppContextEventListener {\n\n    @EventListener\n    public void printProperties(ContextRefreshedEvent contextRefreshedEvent) {\n        System.out.println(&quot;************************* ACTIVE PROPERTIES *************************&quot;);\n\n        ((ConfigurableEnvironment) contextRefreshedEvent.getApplicationContext().getEnvironment())\n            .getPropertySources()\n            .stream()\n            .filter(ps -&gt; ps instanceof OriginTrackedMapPropertySource)\n            // Convert each PropertySource to its properties Set\n            .map(ps -&gt; ((OriginTrackedMapPropertySource) ps).getSource().entrySet())\n            .flatMap(Collection::stream)\n            // Print properties within each Set\n            .forEach(property -&gt; System.out.println(property.getKey() + &quot;=&quot; + property.getValue()));\n\n        System.out.println(&quot;*********************************************************************&quot;);\n    }\n\n}\n</code></pre>\n<p>prints out something like:</p>\n<pre><code>...\n************************* ACTIVE PROPERTIES ***********************\nproperty - your.property.0: yourValue0\nproperty - your.property.1: yourValue1\nproperty - your.property.2: yourValue2\n*******************************************************************\nStarted YourApp in n.nnn seconds (JVM running for m.mmm)\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":433443,"reputation":4526,"user_id":818766,"display_name":"manyways"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1687534350,"creation_date":1687534350,"answer_id":76541553,"question_id":24448947,"body_markdown":"If you are using `spring-boot-starter-actuator`, then you can access the `actuator/configprops` endpoint to show all the loaded properties, e.g. `http://localhost:8080/actuator/configprops`\r\n\r\nMore detail here: https://www.baeldung.com/spring-boot-actuators","title":"How to log the active configuration in a Spring Boot application?","body":"<p>If you are using <code>spring-boot-starter-actuator</code>, then you can access the <code>actuator/configprops</code> endpoint to show all the loaded properties, e.g. <code>http://localhost:8080/actuator/configprops</code></p>\n<p>More detail here: <a href=\"https://www.baeldung.com/spring-boot-actuators\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-boot-actuators</a></p>\n"}],"owner":{"account_id":169636,"reputation":9320,"user_id":395821,"accept_rate":62,"display_name":"Steve"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70392,"favorite_count":0,"down_vote_count":0,"up_vote_count":50,"accepted_answer_id":25985710,"answer_count":8,"score":50,"last_activity_date":1687534350,"creation_date":1403862801,"question_id":24448947,"body_markdown":"I would really like to use YAML config for Spring Boot, as I find it quite readable and useful to have a single file showing what properties are active in my different profiles. Unfortunately, I&#39;m finding that setting properties in `application.yml` can be rather fragile.\r\n\r\nThings like using a tab instead of spaces will cause properties to not exist (without warnings as far as I can see), and all too often I find that my active profiles are not being set, due to some unknown issue with my YAML.\r\n\r\nSo I was wondering whether there are any hooks that would enable me to get hold of the currently active profiles and properties, so that I could log them.\r\n\r\nSimilarly, is there a way to cause start-up to fail if the `application.yml` contains errors? Either that or a means for me to validate the YAML myself, so that I could kill the start-up process.","title":"How to log the active configuration in a Spring Boot application?","body":"<p>I would really like to use YAML config for Spring Boot, as I find it quite readable and useful to have a single file showing what properties are active in my different profiles. Unfortunately, I'm finding that setting properties in <code>application.yml</code> can be rather fragile.</p>\n\n<p>Things like using a tab instead of spaces will cause properties to not exist (without warnings as far as I can see), and all too often I find that my active profiles are not being set, due to some unknown issue with my YAML.</p>\n\n<p>So I was wondering whether there are any hooks that would enable me to get hold of the currently active profiles and properties, so that I could log them.</p>\n\n<p>Similarly, is there a way to cause start-up to fail if the <code>application.yml</code> contains errors? Either that or a means for me to validate the YAML myself, so that I could kill the start-up process.</p>\n"},{"tags":["java","mysql","jdbc"],"comments":[{"owner":{"account_id":45798,"reputation":327462,"user_id":135152,"accept_rate":100,"display_name":"OMG Ponies"},"score":0,"creation_date":1260859602,"post_id":1905607,"comment_id":1809536,"body_markdown":"Do you have any access to MySQL other than via JDBC - MySQL Administrator?  Or command line?","body":"Do you have any access to MySQL other than via JDBC - MySQL Administrator?  Or command line?"},{"owner":{"account_id":65682,"reputation":9391,"user_id":193133,"accept_rate":92,"display_name":"silverkid"},"score":0,"creation_date":1260859974,"post_id":1905607,"comment_id":1809558,"body_markdown":"i have the access to mysql admin. however the requiement is such that . the mysql database will be created, modified , updated, etc. using mysql admin but after that all operations are required to be done with java.","body":"i have the access to mysql admin. however the requiement is such that . the mysql database will be created, modified , updated, etc. using mysql admin but after that all operations are required to be done with java."},{"owner":{"account_id":45798,"reputation":327462,"user_id":135152,"accept_rate":100,"display_name":"OMG Ponies"},"score":0,"creation_date":1260860209,"post_id":1905607,"comment_id":1809577,"body_markdown":"Better to include the index creation in scripts to create the database than via JDBC, likely after you could have already used them.","body":"Better to include the index creation in scripts to create the database than via JDBC, likely after you could have already used them."}],"answers":[{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":1,"up_vote_count":227,"is_accepted":true,"score":226,"last_activity_date":1687533872,"creation_date":1260859595,"answer_id":1905613,"question_id":1905607,"body_markdown":"To manipulate data you actually need [`executeUpdate()`][1] rather than [`executeQuery()`][2].\r\n\r\nHere&#39;s an extract from the `executeUpdate()` javadoc which is already an answer at its own:\r\n\r\n&gt; Executes the given SQL statement, which may be an INSERT, UPDATE, or DELETE statement or an SQL statement that returns nothing, such as an SQL DDL statement. \r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.sql/java/sql/Statement.html#executeUpdate(java.lang.String)\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.sql/java/sql/Statement.html#executeQuery(java.lang.String)","title":"Cannot issue data manipulation statements with executeQuery()","body":"<p>To manipulate data you actually need <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.sql/java/sql/Statement.html#executeUpdate(java.lang.String)\" rel=\"noreferrer\"><code>executeUpdate()</code></a> rather than <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.sql/java/sql/Statement.html#executeQuery(java.lang.String)\" rel=\"noreferrer\"><code>executeQuery()</code></a>.</p>\n<p>Here's an extract from the <code>executeUpdate()</code> javadoc which is already an answer at its own:</p>\n<blockquote>\n<p>Executes the given SQL statement, which may be an INSERT, UPDATE, or DELETE statement or an SQL statement that returns nothing, such as an SQL DDL statement.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":57484,"reputation":66727,"user_id":172211,"accept_rate":89,"display_name":"Carl Smotricz"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1260859607,"creation_date":1260859607,"answer_id":1905614,"question_id":1905607,"body_markdown":"That&#39;s what `executeUpdate` is for.\r\n\r\nHere&#39;s a very brief summary of the difference: &lt;http://www.coderanch.com/t/301594/JDBC/java/Difference-between-execute-executeQuery-executeUpdate&gt;","title":"Cannot issue data manipulation statements with executeQuery()","body":"<p>That's what <code>executeUpdate</code> is for.</p>\n\n<p>Here's a very brief summary of the difference: <a href=\"http://www.coderanch.com/t/301594/JDBC/java/Difference-between-execute-executeQuery-executeUpdate\" rel=\"noreferrer\">http://www.coderanch.com/t/301594/JDBC/java/Difference-between-execute-executeQuery-executeUpdate</a></p>\n"},{"tags":[],"owner":{"account_id":22401,"reputation":24968,"user_id":55164,"accept_rate":92,"display_name":"Neil N"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1593649894,"creation_date":1260859623,"answer_id":1905615,"question_id":1905607,"body_markdown":"`executeQuery()` returns a `ResultSet`.  I&#39;m not as familiar with Java/MySQL, but to create indexes you probably want a `executeUpdate()`.","title":"Cannot issue data manipulation statements with executeQuery()","body":"<p><code>executeQuery()</code> returns a <code>ResultSet</code>.  I'm not as familiar with Java/MySQL, but to create indexes you probably want a <code>executeUpdate()</code>.</p>\n"},{"tags":[],"owner":{"account_id":45798,"reputation":327462,"user_id":135152,"accept_rate":100,"display_name":"OMG Ponies"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1260859669,"creation_date":1260859669,"answer_id":1905616,"question_id":1905607,"body_markdown":"Use `executeUpdate()` to issue data manipulation statements. `executeQuery()` is only meant for SELECT queries (i.e. queries that return a result set).\r\n","title":"Cannot issue data manipulation statements with executeQuery()","body":"<p>Use <code>executeUpdate()</code> to issue data manipulation statements. <code>executeQuery()</code> is only meant for SELECT queries (i.e. queries that return a result set).</p>\n"},{"tags":[],"owner":{"account_id":5987725,"reputation":9,"user_id":4704765,"display_name":"veloz"},"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1427147605,"creation_date":1427141614,"answer_id":29219475,"question_id":1905607,"body_markdown":"Besides executeUpdate() on the parentheses, you must also add a variable to use an SQL statement.\r\n\r\nFor example:\r\n\r\n    PreparedStatement pst =  connection.prepareStatement(sql);\r\n    int numRowsChanged = pst.executeUpdate(sql);","title":"Cannot issue data manipulation statements with executeQuery()","body":"<p>Besides executeUpdate() on the parentheses, you must also add a variable to use an SQL statement.</p>\n\n<p>For example:</p>\n\n<pre><code>PreparedStatement pst =  connection.prepareStatement(sql);\nint numRowsChanged = pst.executeUpdate(sql);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2386817,"reputation":15505,"user_id":2087628,"accept_rate":42,"display_name":"JaskeyLam"},"down_vote_count":0,"up_vote_count":55,"is_accepted":false,"score":55,"last_activity_date":1461314624,"creation_date":1461314624,"answer_id":36789060,"question_id":1905607,"body_markdown":"When executing DML statement , you should use `executeUpdate`/`execute` rather than `executeQuery`.\r\n\r\nHere is a brief comparison :\r\n\r\n[![executeQueryVSexecuteUpdateVSexecute][1]][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/V6fjm.png","title":"Cannot issue data manipulation statements with executeQuery()","body":"<p>When executing DML statement , you should use <code>executeUpdate</code>/<code>execute</code> rather than <code>executeQuery</code>.</p>\n\n<p>Here is a brief comparison :</p>\n\n<p><a href=\"https://i.stack.imgur.com/V6fjm.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/V6fjm.png\" alt=\"executeQueryVSexecuteUpdateVSexecute\"></a></p>\n"},{"tags":[],"owner":{"account_id":10920881,"reputation":66,"user_id":8027223,"display_name":"Mati"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1495045769,"creation_date":1495045769,"answer_id":44032360,"question_id":1905607,"body_markdown":"This code works for me: I set values whit an INSERT and get the LAST_INSERT_ID() of this value whit a SELECT; I use java NetBeans 8.1, MySql and java.JDBC.driver \r\n\r\n                    try {\r\n            \r\n            String Query = &quot;INSERT INTO `stock`(`stock`, `min_stock`,   \r\n                    `id_stock`) VALUES (&quot;\r\n                  \r\n                    + &quot;\\&quot;&quot; + p.get_Stock().getStock() + &quot;\\&quot;, &quot;\r\n                    + &quot;\\&quot;&quot; + p.get_Stock().getStockMinimo() + &quot;\\&quot;,&quot;\r\n                    + &quot;&quot; + &quot;null&quot; + &quot;)&quot;;\r\n\r\n            Statement st = miConexion.createStatement();\r\n            st.executeUpdate(Query);\r\n            \r\n            java.sql.ResultSet rs;\r\n            rs = st.executeQuery(&quot;Select LAST_INSERT_ID() from stock limit 1&quot;);                \r\n            rs.next(); //para posicionar el puntero en la primer fila\r\n            ultimo_id = rs.getInt(&quot;LAST_INSERT_ID()&quot;);\r\n            } catch (SqlException ex) { ex.printTrace;}","title":"Cannot issue data manipulation statements with executeQuery()","body":"<p>This code works for me: I set values whit an INSERT and get the LAST_INSERT_ID() of this value whit a SELECT; I use java NetBeans 8.1, MySql and java.JDBC.driver </p>\n\n<pre><code>                try {\n\n        String Query = \"INSERT INTO `stock`(`stock`, `min_stock`,   \n                `id_stock`) VALUES (\"\n\n                + \"\\\"\" + p.get_Stock().getStock() + \"\\\", \"\n                + \"\\\"\" + p.get_Stock().getStockMinimo() + \"\\\",\"\n                + \"\" + \"null\" + \")\";\n\n        Statement st = miConexion.createStatement();\n        st.executeUpdate(Query);\n\n        java.sql.ResultSet rs;\n        rs = st.executeQuery(\"Select LAST_INSERT_ID() from stock limit 1\");                \n        rs.next(); //para posicionar el puntero en la primer fila\n        ultimo_id = rs.getInt(\"LAST_INSERT_ID()\");\n        } catch (SqlException ex) { ex.printTrace;}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3988446,"reputation":3066,"user_id":3288258,"display_name":"Forrest"},"down_vote_count":0,"up_vote_count":49,"is_accepted":false,"score":49,"last_activity_date":1555300010,"creation_date":1555300010,"answer_id":55682350,"question_id":1905607,"body_markdown":"If you&#39;re using spring boot, just add an @Modifying annotation. \r\n\r\n    @Modifying\r\n    @Query\r\n    (value = &quot;UPDATE user SET middleName = &#39;Mudd&#39; WHERE id = 1&quot;, nativeQuery = true)\r\n    void updateMiddleName();","title":"Cannot issue data manipulation statements with executeQuery()","body":"<p>If you're using spring boot, just add an @Modifying annotation. </p>\n\n<pre><code>@Modifying\n@Query\n(value = \"UPDATE user SET middleName = 'Mudd' WHERE id = 1\", nativeQuery = true)\nvoid updateMiddleName();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11098274,"reputation":835,"user_id":8147680,"display_name":"Nitin Nanda"},"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1602645949,"creation_date":1570629899,"answer_id":58306007,"question_id":1905607,"body_markdown":"For Delete query - Use `@Modifying` and `@Transactional` before the `@Query` like:-\r\n`````\r\n@Repository\r\npublic interface CopyRepository extends JpaRepository&lt;Copy, Integer&gt; {\r\n\r\n\t@Modifying\r\n\t@Transactional\r\n\t@Query(value = &quot;DELETE FROM tbl_copy where trade_id = ?1 ; &quot;, nativeQuery = true)\r\n\tvoid deleteCopyByTradeId(Integer id);\r\n\r\n}\r\n`````\r\n\r\nIt won&#39;t give the `java.sql.SQLException: Can not issue data manipulation statements with executeQuery()` error.\r\n\r\n**Edit:**\r\n\r\nSince this answer is getting many upvotes, I shall refer you to the documentation as well for more understanding.\r\n\r\n[@Transactional][1]\r\n`````\r\nBy default, CRUD methods on repository instances are transactional. For read operations, \r\nthe transaction configuration readOnly flag is set to true. \r\nAll others are configured with a plain @Transactional so that default transaction \r\nconfiguration applies.\r\n`````\r\n[@Modifying][2]\r\n`````\r\nIndicates a query method should be considered as modifying query as that changes the way \r\nit needs to be executed. This annotation is only considered if used on query methods defined \r\nthrough a Query annotation). It&#39;s not applied on custom implementation methods or queries \r\nderived from the method name as they already have control over the underlying data access \r\nAPIs or specify if they are modifying by their name.\r\n\r\nQueries that require a @Modifying annotation include INSERT, UPDATE, DELETE, and DDL \r\nstatements.\r\n`````\r\n\r\n  [1]: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#transactions\r\n  [2]: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.modifying-queries","title":"Cannot issue data manipulation statements with executeQuery()","body":"<p>For Delete query - Use <code>@Modifying</code> and <code>@Transactional</code> before the <code>@Query</code> like:-</p>\n<pre><code>@Repository\npublic interface CopyRepository extends JpaRepository&lt;Copy, Integer&gt; {\n\n    @Modifying\n    @Transactional\n    @Query(value = &quot;DELETE FROM tbl_copy where trade_id = ?1 ; &quot;, nativeQuery = true)\n    void deleteCopyByTradeId(Integer id);\n\n}\n</code></pre>\n<p>It won't give the <code>java.sql.SQLException: Can not issue data manipulation statements with executeQuery()</code> error.</p>\n<p><strong>Edit:</strong></p>\n<p>Since this answer is getting many upvotes, I shall refer you to the documentation as well for more understanding.</p>\n<p><a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#transactions\" rel=\"noreferrer\">@Transactional</a></p>\n<pre><code>By default, CRUD methods on repository instances are transactional. For read operations, \nthe transaction configuration readOnly flag is set to true. \nAll others are configured with a plain @Transactional so that default transaction \nconfiguration applies.\n</code></pre>\n<p><a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.modifying-queries\" rel=\"noreferrer\">@Modifying</a></p>\n<pre><code>Indicates a query method should be considered as modifying query as that changes the way \nit needs to be executed. This annotation is only considered if used on query methods defined \nthrough a Query annotation). It's not applied on custom implementation methods or queries \nderived from the method name as they already have control over the underlying data access \nAPIs or specify if they are modifying by their name.\n\nQueries that require a @Modifying annotation include INSERT, UPDATE, DELETE, and DDL \nstatements.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17091662,"reputation":61,"user_id":12367668,"display_name":"Sunil"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1584130840,"creation_date":1584125311,"answer_id":60675786,"question_id":1905607,"body_markdown":"```java\r\n@Modifying\r\n@Transactional\r\n@Query(value = &quot;delete from cart_item where cart_cart_id=:cart&quot;, nativeQuery = true)\r\npublic void deleteByCart(@Param(&quot;cart&quot;) int cart); \r\n```\r\n\r\n\r\nDo not forget to add @Modifying and @Transnational before @query. it works for me.\r\n\r\nTo delete the record with some condition using native query with JPA the above mentioned annotations are important.\r\n\t","title":"Cannot issue data manipulation statements with executeQuery()","body":"<pre class=\"lang-java prettyprint-override\"><code>@Modifying\n@Transactional\n@Query(value = \"delete from cart_item where cart_cart_id=:cart\", nativeQuery = true)\npublic void deleteByCart(@Param(\"cart\") int cart); \n</code></pre>\n\n<p>Do not forget to add @Modifying and @Transnational before @query. it works for me.</p>\n\n<p>To delete the record with some condition using native query with JPA the above mentioned annotations are important.</p>\n"},{"tags":[],"owner":{"account_id":13309984,"reputation":89,"user_id":9608569,"display_name":"S.m. Kamal Hussain Shahi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640943454,"creation_date":1640943454,"answer_id":70540929,"question_id":1905607,"body_markdown":"    Connection conn = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/java_swing_db&quot;, &quot;root&quot;, &quot;root&quot;);\r\n\r\n    Statement smt = conn.createStatement();\r\n\r\n    String sql = &quot;SELECT * FROM `users` WHERE `email` = &quot; + email + &quot; AND `password` = &quot; + password + &quot; LIMIT 1;&quot;;\r\n\r\n    String registerSql = &quot;INSERT INTO `users`(`email`, `password`, `name`) VALUES (&#39;&quot; + email + &quot;&#39;,&#39;&quot; + password + &quot;&#39;,&#39;&quot; + name + &quot;&#39;)&quot;;\r\n\r\n    System.out.println(&quot;SQL: &quot; + registerSql);\r\n                \r\n    int result = smt.executeUpdate(registerSql);\r\n    System.out.println(&quot;Result: &quot; + result);\r\n\r\n    if (result == 0) {\r\n       JOptionPane.showMessageDialog(this, &quot;This is alredy exist&quot;);\r\n    } else {\r\n      JOptionPane.showMessageDialog(this, &quot;Welcome, Your account is sucessfully created&quot;);\r\n      App.isLogin = true;\r\n      this.dispose();\r\n      new HomeFrame().show();\r\n    }\r\n    conn.close();","title":"Cannot issue data manipulation statements with executeQuery()","body":"<pre><code>Connection conn = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/java_swing_db&quot;, &quot;root&quot;, &quot;root&quot;);\n\nStatement smt = conn.createStatement();\n\nString sql = &quot;SELECT * FROM `users` WHERE `email` = &quot; + email + &quot; AND `password` = &quot; + password + &quot; LIMIT 1;&quot;;\n\nString registerSql = &quot;INSERT INTO `users`(`email`, `password`, `name`) VALUES ('&quot; + email + &quot;','&quot; + password + &quot;','&quot; + name + &quot;')&quot;;\n\nSystem.out.println(&quot;SQL: &quot; + registerSql);\n            \nint result = smt.executeUpdate(registerSql);\nSystem.out.println(&quot;Result: &quot; + result);\n\nif (result == 0) {\n   JOptionPane.showMessageDialog(this, &quot;This is alredy exist&quot;);\n} else {\n  JOptionPane.showMessageDialog(this, &quot;Welcome, Your account is sucessfully created&quot;);\n  App.isLogin = true;\n  this.dispose();\n  new HomeFrame().show();\n}\nconn.close();\n</code></pre>\n"}],"owner":{"account_id":65682,"reputation":9391,"user_id":193133,"accept_rate":92,"display_name":"silverkid"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":280138,"favorite_count":0,"down_vote_count":1,"up_vote_count":128,"accepted_answer_id":1905613,"answer_count":11,"score":127,"last_activity_date":1687533872,"creation_date":1260859479,"question_id":1905607,"body_markdown":"In MySQL I have two tables, `tableA` and `tableB`.  I am trying to execute two queries:\r\n\r\n    executeQuery(query1) \r\n    executeQuery(query2)\r\n\r\nBut I get the following error:\r\n\r\n    can not issue data manipulation statements with executeQuery().\r\n\r\nWhat does this mean?","title":"Cannot issue data manipulation statements with executeQuery()","body":"<p>In MySQL I have two tables, <code>tableA</code> and <code>tableB</code>.  I am trying to execute two queries:</p>\n\n<pre><code>executeQuery(query1) \nexecuteQuery(query2)\n</code></pre>\n\n<p>But I get the following error:</p>\n\n<pre><code>can not issue data manipulation statements with executeQuery().\n</code></pre>\n\n<p>What does this mean?</p>\n"},{"tags":["java","servlets","wrapper","servlet-filters"],"comments":[{"owner":{"account_id":299251,"reputation":335905,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"score":1,"creation_date":1313054122,"post_id":7023374,"comment_id":8389140,"body_markdown":"This code looks weird. The purpose of wrapping servlet response is to pass it further (`chain.doFilter(request, resWrapper);`) and intercept selected calls in the wrapper. This way you can, for instance, return different response writer that changes or compresses the content on the fly and sends it to the target `response`. This example doesn&#39;t have much sense... Could you provide the source of this (page, book?)","body":"This code looks weird. The purpose of wrapping servlet response is to pass it further (<code>chain.doFilter(request, resWrapper);</code>) and intercept selected calls in the wrapper. This way you can, for instance, return different response writer that changes or compresses the content on the fly and sends it to the target <code>response</code>. This example doesn&#39;t have much sense... Could you provide the source of this (page, book?)"},{"owner":{"account_id":92573,"reputation":13381,"user_id":253656,"accept_rate":80,"display_name":"ipkiss"},"score":0,"creation_date":1313054725,"post_id":7023374,"comment_id":8389304,"body_markdown":"I found myself weird too. This code I took from a powerpoint slide of a University lecturer. It makes more sense if we do chain.doFilter(request, resWrapper); as your suggestion","body":"I found myself weird too. This code I took from a powerpoint slide of a University lecturer. It makes more sense if we do chain.doFilter(request, resWrapper); as your suggestion"}],"answers":[{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1687533764,"creation_date":1313187366,"answer_id":7046900,"question_id":7023374,"body_markdown":"That&#39;s a bad example which does not show the real benefit of request/response wrapper. Emitting HTML should be done by a JSP not by a Filter and for sure not by a Servlet. Go through our [filters wiki page][1] to get some ideas about what a Filter is to be used for.\r\n\r\nA response wrapper is useful if you want to modify the response&#39;s behaviour or just want to collect information about the response **while** it is been used in the request-response chain. The modified behaviour takes then place whenever some servlet or JSP calls a certain method on the response. If you have overriden it in your wrapper class, then this one will be called instead. You could alter the behaviour or collect information there.\r\n\r\nHere on Stackoverflow you can find real world examples of `HttpServletResponseWrapper` implementations by searching on [`code:&quot;extends HttpServletResponseWrapper&quot;`][2].\r\n\r\n- https://stackoverflow.com/questions/3220820\r\n- https://stackoverflow.com/questions/2181215\r\n- https://stackoverflow.com/questions/2276920\r\n- https://stackoverflow.com/questions/2563344\r\n- https://stackoverflow.com/questions/6722681\r\n- https://stackoverflow.com/questions/3242236\r\n- https://stackoverflow.com/questions/3415004\r\n- https://stackoverflow.com/questions/6106703\r\n- https://stackoverflow.com/questions/1963158\r\n\r\n\r\n  [1]: https://stackoverflow.com/tags/servlet-filters/info\r\n  [2]: https://stackoverflow.com/search?q=code:%22extends%20httpservletresponsewrapper%22\r\n","title":"Differences between ServletResponse and HttpServletResponseWrapper?","body":"<p>That's a bad example which does not show the real benefit of request/response wrapper. Emitting HTML should be done by a JSP not by a Filter and for sure not by a Servlet. Go through our <a href=\"https://stackoverflow.com/tags/servlet-filters/info\">filters wiki page</a> to get some ideas about what a Filter is to be used for.</p>\n<p>A response wrapper is useful if you want to modify the response's behaviour or just want to collect information about the response <strong>while</strong> it is been used in the request-response chain. The modified behaviour takes then place whenever some servlet or JSP calls a certain method on the response. If you have overriden it in your wrapper class, then this one will be called instead. You could alter the behaviour or collect information there.</p>\n<p>Here on Stackoverflow you can find real world examples of <code>HttpServletResponseWrapper</code> implementations by searching on <a href=\"https://stackoverflow.com/search?q=code:%22extends%20httpservletresponsewrapper%22\"><code>code:&quot;extends HttpServletResponseWrapper&quot;</code></a>.</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/3220820\">How to insert response size and time into the page itself, at least partially?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2181215\">MD5 Signing a HttpServletResponse</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2276920\">How to configure Tomcat to not encode the session id into the URL when HttpServletResponse.encodeURL() is invoked</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2563344\">How to add response headers based on Content-type; getting Content-type before the response is committed</a></li>\n<li><a href=\"https://stackoverflow.com/questions/6722681\">How is annotations support in jsp implemented in sitebricks?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/3242236\">Capture and log the response body</a></li>\n<li><a href=\"https://stackoverflow.com/questions/3415004\">Log only http servlet response headers</a></li>\n<li><a href=\"https://stackoverflow.com/questions/6106703\">How to include a JSP page in a Facelets page?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/1963158\">Capture generated dynamic content at server side</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":446547,"reputation":126635,"user_id":839646,"accept_rate":70,"display_name":"Ryan Stewart"},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1313190942,"creation_date":1313190942,"answer_id":7047298,"question_id":7023374,"body_markdown":"BalusC&#39;s answer is good, but it might be a little overwhelming if you&#39;re just starting out.\r\n\r\nPut simply: [SerlvetResponse][1] and its extension, [HttpServletResponse][2], are interfaces telling you what methods are available to call to do the things you need. In the normal course of working with Filters, Servlets, et al., you&#39;ll use HttpServletResponse often to tell your app how to respond to requests.\r\n\r\n[HttpServletResponseWrapper][3] is one particular implementation of HttpServletResponse which gives you a convenient way to wrap an existing response with some logic of your own without having to write a whole new implementation of the interface. It has a *lot* of methods, so this is really nice. As a trivial example, suppose you wanted to disallow calls to [response.flushBuffer()][4]. This code, using HttpServletResponseWrapper, will do that:\r\n\r\n    class DisallowFlushResponseWrapper extends HttpServletResponseWrapper {\r\n        public DisallowFlushResponseWrapper(HttpServletResponse response) {\r\n            super(response);\r\n        }\r\n\r\n        @Override\r\n        public void flushBuffer() {\r\n            throw new UnsupportedOperationException(&quot;Don&#39;t call this!&quot;);\r\n        }\r\n    }\r\n\r\nThe typical way to use such a wrapper would be to create a filter like this:\r\n\r\n    class DisallowFlushFilter implements Filter {\r\n        public void doFilter(ServletRequest request, ServletResponse response,\r\n                FilterChain chain) {\r\n            if (response instanceof HttpServletResponse) {\r\n                HttpServletResponse newResponse =\r\n                    new DisallowFlushResponseWrapper((HttpServletResponse) response);\r\n                chain.doFilter(request, newResponse);\r\n            }\r\n            ...\r\n        }\r\n        ...\r\n    }\r\n\r\nNote that we wrap the response coming into the filter with an instance of our own wrapper. Then we hand the wrapper down to the next item in the filter chain. Thus anything that comes after this filter will get an exception if it calls flushBuffer() because it will be calling it on our wrapper. The wrapper, due to its default behavior, will delegate any other call to the wrapped response, which is the real one, so everything except calls to that one method will work normally.\r\n\r\n\r\n  [1]: http://download.oracle.com/javaee/6/api/javax/servlet/ServletResponse.html\r\n  [2]: http://download.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html\r\n  [3]: http://download.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponseWrapper.html\r\n  [4]: http://download.oracle.com/javaee/6/api/javax/servlet/ServletResponse.html#flushBuffer%28%29","title":"Differences between ServletResponse and HttpServletResponseWrapper?","body":"<p>BalusC's answer is good, but it might be a little overwhelming if you're just starting out.</p>\n\n<p>Put simply: <a href=\"http://download.oracle.com/javaee/6/api/javax/servlet/ServletResponse.html\">SerlvetResponse</a> and its extension, <a href=\"http://download.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html\">HttpServletResponse</a>, are interfaces telling you what methods are available to call to do the things you need. In the normal course of working with Filters, Servlets, et al., you'll use HttpServletResponse often to tell your app how to respond to requests.</p>\n\n<p><a href=\"http://download.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponseWrapper.html\">HttpServletResponseWrapper</a> is one particular implementation of HttpServletResponse which gives you a convenient way to wrap an existing response with some logic of your own without having to write a whole new implementation of the interface. It has a <em>lot</em> of methods, so this is really nice. As a trivial example, suppose you wanted to disallow calls to <a href=\"http://download.oracle.com/javaee/6/api/javax/servlet/ServletResponse.html#flushBuffer%28%29\">response.flushBuffer()</a>. This code, using HttpServletResponseWrapper, will do that:</p>\n\n<pre><code>class DisallowFlushResponseWrapper extends HttpServletResponseWrapper {\n    public DisallowFlushResponseWrapper(HttpServletResponse response) {\n        super(response);\n    }\n\n    @Override\n    public void flushBuffer() {\n        throw new UnsupportedOperationException(\"Don't call this!\");\n    }\n}\n</code></pre>\n\n<p>The typical way to use such a wrapper would be to create a filter like this:</p>\n\n<pre><code>class DisallowFlushFilter implements Filter {\n    public void doFilter(ServletRequest request, ServletResponse response,\n            FilterChain chain) {\n        if (response instanceof HttpServletResponse) {\n            HttpServletResponse newResponse =\n                new DisallowFlushResponseWrapper((HttpServletResponse) response);\n            chain.doFilter(request, newResponse);\n        }\n        ...\n    }\n    ...\n}\n</code></pre>\n\n<p>Note that we wrap the response coming into the filter with an instance of our own wrapper. Then we hand the wrapper down to the next item in the filter chain. Thus anything that comes after this filter will get an exception if it calls flushBuffer() because it will be calling it on our wrapper. The wrapper, due to its default behavior, will delegate any other call to the wrapped response, which is the real one, so everything except calls to that one method will work normally.</p>\n"}],"owner":{"account_id":92573,"reputation":13381,"user_id":253656,"accept_rate":80,"display_name":"ipkiss"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20771,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"answer_count":2,"score":16,"last_activity_date":1687533764,"creation_date":1313053556,"question_id":7023374,"body_markdown":"I am new to servlet and reading some text about filters and wrappers. I can understand filters but got confused about wrappers. In the book, the author gives an example:\r\n\r\nIn case no wrapper:\r\n\r\n    public void doFilter(ServletRequest request, ServletResponse response,\r\n                FilterChain chain)\r\n                throws IOException, ServletException {\r\n    \r\n            String name = request.getParameter(&quot;name&quot;).trim();\r\n    \r\n            try {\r\n                chain.doFilter(request, response);\r\n                PrintWriter out = response.getWriter();\r\n                if (name.length() == 0) {\r\n                    out.println(&quot;Some message&quot;);\r\n                    out.println(&quot;&lt;/body&gt;&quot;);\r\n                    out.println(&quot;&lt;/html&gt;&quot;);\r\n                    out.close();\r\n                }\r\n            } catch (Throwable t) {\r\n            }\r\n        }\r\n\r\nIn case of wrapper:\r\n\r\n \r\n\r\n     public void doFilter(ServletRequest request, ServletResponse response,\r\n                FilterChain chain)\r\n                throws IOException, ServletException {\r\n    \r\n            String name = request.getParameter(&quot;name&quot;).trim();\r\n    \r\n            HttpServletResponse httpRes = (HttpServletResponse) response;\r\n            HttpServletResponseWrapper resWrapper = new HttpServletResponseWrapper(httpRes);\r\n            try {\r\n                chain.doFilter(request, response);\r\n    \r\n                PrintWriter out = resWrapper.getWriter(); // why dont we just use response.getWriter();\r\n                if (name.length() == 0) {\r\n                    out.println(&quot;&lt;h3&gt;Some message&quot;);\r\n                    out.println(&quot;&lt;/body&gt;&quot;);\r\n                    out.println(&quot;&lt;/html&gt;&quot;);\r\n                    out.close();\r\n                }\r\n            } catch (Throwable t) {\r\n            }\r\n        }\r\n\r\nWhy we need `HttpServletResponseWrapper`  while we can do the same thing with `ServletResponse` in case 1? Can anyone give me a clear example that we MUST use `HttpServletResponseWrapper`  instead of `ServletResponse`? I have tried to google but found no luck.","title":"Differences between ServletResponse and HttpServletResponseWrapper?","body":"<p>I am new to servlet and reading some text about filters and wrappers. I can understand filters but got confused about wrappers. In the book, the author gives an example:</p>\n\n<p>In case no wrapper:</p>\n\n<pre><code>public void doFilter(ServletRequest request, ServletResponse response,\n            FilterChain chain)\n            throws IOException, ServletException {\n\n        String name = request.getParameter(\"name\").trim();\n\n        try {\n            chain.doFilter(request, response);\n            PrintWriter out = response.getWriter();\n            if (name.length() == 0) {\n                out.println(\"Some message\");\n                out.println(\"&lt;/body&gt;\");\n                out.println(\"&lt;/html&gt;\");\n                out.close();\n            }\n        } catch (Throwable t) {\n        }\n    }\n</code></pre>\n\n<p>In case of wrapper:</p>\n\n<pre><code> public void doFilter(ServletRequest request, ServletResponse response,\n            FilterChain chain)\n            throws IOException, ServletException {\n\n        String name = request.getParameter(\"name\").trim();\n\n        HttpServletResponse httpRes = (HttpServletResponse) response;\n        HttpServletResponseWrapper resWrapper = new HttpServletResponseWrapper(httpRes);\n        try {\n            chain.doFilter(request, response);\n\n            PrintWriter out = resWrapper.getWriter(); // why dont we just use response.getWriter();\n            if (name.length() == 0) {\n                out.println(\"&lt;h3&gt;Some message\");\n                out.println(\"&lt;/body&gt;\");\n                out.println(\"&lt;/html&gt;\");\n                out.close();\n            }\n        } catch (Throwable t) {\n        }\n    }\n</code></pre>\n\n<p>Why we need <code>HttpServletResponseWrapper</code>  while we can do the same thing with <code>ServletResponse</code> in case 1? Can anyone give me a clear example that we MUST use <code>HttpServletResponseWrapper</code>  instead of <code>ServletResponse</code>? I have tried to google but found no luck.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1687533929,"post_id":76541467,"comment_id":134955221,"body_markdown":"You can&#39;t mix `-classpath` and `-jar` It&#39;s one or the other. Config should be in your resources folder and accessed via `&quot;/hibernate.properties&quot;`. Although if you&#39;re mixing two it could be different. In which case, ditch `-jar` *But* then you&#39;re going to have to name your main class","body":"You can&#39;t mix <code>-classpath</code> and <code>-jar</code> It&#39;s one or the other. Config should be in your resources folder and accessed via <code>&quot;&#47;hibernate.properties&quot;</code>. Although if you&#39;re mixing two it could be different. In which case, ditch <code>-jar</code> <i>But</i> then you&#39;re going to have to name your main class"},{"owner":{"account_id":143752,"reputation":5048,"user_id":352319,"accept_rate":84,"display_name":"kc2001"},"score":0,"creation_date":1687866975,"post_id":76541467,"comment_id":134993858,"body_markdown":"Thanks, @g00se!  I understand what you say about mixing -classpath and -jar.  I&#39;d like to be able to specify where the hibernate.properties is via a command line argument.  I&#39;ve tried over a dozen different command lines, but haven&#39;t hit the magic combination yet.","body":"Thanks, @g00se!  I understand what you say about mixing -classpath and -jar.  I&#39;d like to be able to specify where the hibernate.properties is via a command line argument.  I&#39;ve tried over a dozen different command lines, but haven&#39;t hit the magic combination yet."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1687867378,"post_id":76541467,"comment_id":134993955,"body_markdown":"Let me ask you first: why is it that you don&#39;t want that hibernate properties file *in* the jar?","body":"Let me ask you first: why is it that you don&#39;t want that hibernate properties file <i>in</i> the jar?"},{"owner":{"account_id":143752,"reputation":5048,"user_id":352319,"accept_rate":84,"display_name":"kc2001"},"score":0,"creation_date":1687889964,"post_id":76541467,"comment_id":134999524,"body_markdown":"@g00se - the hibernate.properties includes sensitive information (e.g., login/password),  We have a tool that scans our jar for potential security problems, and that would cause a problem that would prevent us deploying our jar to the target environment.","body":"@g00se - the hibernate.properties includes sensitive information (e.g., login/password),  We have a tool that scans our jar for potential security problems, and that would cause a problem that would prevent us deploying our jar to the target environment."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1687896519,"post_id":76541467,"comment_id":135000727,"body_markdown":"Hehe. I don&#39;t see how that could be safer *outside* the jar but in any case, something like `java -verbose -classpath /home/hadoop/config/engine:~/jars/dbp.engine-1.2.0-SNAPSHOT-spring-boot.jar --spring.config.additional-location=/home/hadoop/config/engine/merged.properties a.b.c.Application` (where the last argument is the f.q. name of your main class)","body":"Hehe. I don&#39;t see how that could be safer <i>outside</i> the jar but in any case, something like <code>java -verbose -classpath &#47;home&#47;hadoop&#47;config&#47;engine:~&#47;jars&#47;dbp.engine-1.2.0-SNAPSHOT-&zwnj;&#8203;spring-boot.jar --spring.config.additional-location=&#47;home&#47;hadoop&#47;config&#47;engi&zwnj;&#8203;ne&#47;merged.properties a.b.c.Application</code> (where the last argument is the f.q. name of your main class)"}],"owner":{"account_id":143752,"reputation":5048,"user_id":352319,"accept_rate":84,"display_name":"kc2001"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687533681,"creation_date":1687533681,"question_id":76541467,"body_markdown":"I am trying to run my spring-boot-2.2.6.RELEASE application from the Linux command line like so:\r\n\r\n    java -verbose \\\r\n         -classpath &#39;/home/hadoop/config/engine/&#39; \\\r\n         -jar ~/jars/dbp.engine-1.2.0-SNAPSHOT-spring-boot.jar \\\r\n         --spring.config.additional-location=/home/hadoop/config/engine/merged.properties ...\r\n\r\nThe application fails with the following message:\r\n\r\n&gt; Application run failed\r\n&gt; org.springframework.beans.factory.BeanDefinitionStoreException: \r\n&gt; Failed to parse configuration class\r\n&gt; [gov.afms.dbp.engine.BiobankEngineApplication];    nested exception is\r\n&gt; java.io.FileNotFoundException:\r\n&gt;      **class path resource** **[hibernate.properties] cannot be opened because it does not exist**\r\n&gt;         at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:188)\r\n&gt; ~[spring-context-5.2.5.RELEASE.jar!/:5.2.5.RELEASE]\r\n\r\nWhy can&#39;t the application find `hibernate.properties` when it is on the classpath?\r\n\r\n    ls -l /home/hadoop/config/engine/hibernate.properties\r\n    -rw-rw-r-- 1 hadoop hadoop 552 May 25  2022 /home/hadoop/config/engine/hibernate.properties\r\n\r\n","title":"My spring-boot application can&#39;t find my hibernate.properties on the classpath","body":"<p>I am trying to run my spring-boot-2.2.6.RELEASE application from the Linux command line like so:</p>\n<pre><code>java -verbose \\\n     -classpath '/home/hadoop/config/engine/' \\\n     -jar ~/jars/dbp.engine-1.2.0-SNAPSHOT-spring-boot.jar \\\n     --spring.config.additional-location=/home/hadoop/config/engine/merged.properties ...\n</code></pre>\n<p>The application fails with the following message:</p>\n<blockquote>\n<p>Application run failed\norg.springframework.beans.factory.BeanDefinitionStoreException:\nFailed to parse configuration class\n[gov.afms.dbp.engine.BiobankEngineApplication];    nested exception is\njava.io.FileNotFoundException:\n<strong>class path resource</strong> <strong>[hibernate.properties] cannot be opened because it does not exist</strong>\nat org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:188)\n~[spring-context-5.2.5.RELEASE.jar!/:5.2.5.RELEASE]</p>\n</blockquote>\n<p>Why can't the application find <code>hibernate.properties</code> when it is on the classpath?</p>\n<pre><code>ls -l /home/hadoop/config/engine/hibernate.properties\n-rw-rw-r-- 1 hadoop hadoop 552 May 25  2022 /home/hadoop/config/engine/hibernate.properties\n</code></pre>\n"},{"tags":["java","spring","jpa","point","hibernate-spatial"],"answers":[{"tags":[],"owner":{"account_id":4107094,"reputation":350,"user_id":3370777,"display_name":"James"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687533624,"creation_date":1687533624,"answer_id":76541464,"question_id":76541298,"body_markdown":"Yhe Objective here is to be able to save before encountering *&quot;Data Truncation&quot;*.\r\n\r\nYour error seems to indicate that the data being sent isn&#39;t right.\r\nI think we can try a different method to save the data using the MySQL function: \r\n\r\n    ST_PointFromText\r\n\r\nIn order to save the data directly.\r\n\r\nThat&#39;s how i would modify your code, starting by makePoint:\r\n\r\n    public String makePoint(Float latitude, Float longitude) {\r\n        return String.format(&quot;POINT(%s %s)&quot;, latitude, longitude);\r\n    }\r\n\r\nNow in your addClub:\r\n`clubRepository.save(club);`  \r\nI&#39;ll modify it to:\r\n\r\n    clubRepository.saveWithPoint(club, makePoint(clubRequest.getLatitude(), clubRequest.getLongitude()));\r\n\r\n\r\nAnd we create a new Method:\r\n\r\n    @Transactional\r\n    @Modifying\r\n    @Query(value = &quot;INSERT INTO club (club_name, club_point) VALUES (:clubName, ST_PointFromText(:point))&quot;, nativeQuery = true)\r\n    void saveWithPoint(@Param(&quot;clubName&quot;) String clubName, @Param(&quot;point&quot;) String point);\r\n\r\nDon&#39;t forget to import all the stuff that you need.\r\n","title":"Data truncation: Cannot get geometry object from data you send to the GEOMETRY field","body":"<p>Yhe Objective here is to be able to save before encountering <em>&quot;Data Truncation&quot;</em>.</p>\n<p>Your error seems to indicate that the data being sent isn't right.\nI think we can try a different method to save the data using the MySQL function:</p>\n<pre><code>ST_PointFromText\n</code></pre>\n<p>In order to save the data directly.</p>\n<p>That's how i would modify your code, starting by makePoint:</p>\n<pre><code>public String makePoint(Float latitude, Float longitude) {\n    return String.format(&quot;POINT(%s %s)&quot;, latitude, longitude);\n}\n</code></pre>\n<p>Now in your addClub:\n<code>clubRepository.save(club);</code><br />\nI'll modify it to:</p>\n<pre><code>clubRepository.saveWithPoint(club, makePoint(clubRequest.getLatitude(), clubRequest.getLongitude()));\n</code></pre>\n<p>And we create a new Method:</p>\n<pre><code>@Transactional\n@Modifying\n@Query(value = &quot;INSERT INTO club (club_name, club_point) VALUES (:clubName, ST_PointFromText(:point))&quot;, nativeQuery = true)\nvoid saveWithPoint(@Param(&quot;clubName&quot;) String clubName, @Param(&quot;point&quot;) String point);\n</code></pre>\n<p>Don't forget to import all the stuff that you need.</p>\n"}],"owner":{"account_id":28881418,"reputation":21,"user_id":22120821,"display_name":"GyeongEun Kim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":134,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1687533624,"creation_date":1687532337,"question_id":76541298,"body_markdown":"hi i&#39;m trying to insert and read **geo data(POINT)** to **mySQL DB.** \r\n\r\nI am using **JPA**.\r\n\r\nI got latitude and longitude from the frontend and I made a String like POINT(10 20) as wkt.\r\n\r\nthen by using WKTReader, I made a Point Object, made an entity , and call the jpa save method.\r\n\r\nbut I got` Data truncation: Cannot get geometry object from data you send to the GEOMETRY field` error.\r\n\r\nwhat&#39;s wrong with my code?\r\n\r\nby the way i used \r\n\r\n`org.locationtech.jts.geom.Point;`\r\n\r\n+) when I tried to insert point as WKT(Stirng), it works. (and it is stored with BLOB in DB)\r\nshould I have to do like this????\r\n\r\n## Service\r\n\r\n```java\r\n  @Transactional\r\n    public void addClub (AddClubRequest clubRequest) throws ParseException {\r\n        Member master = memberRepository.getReferenceById(clubRequest.getUserId());\r\n  \r\n        Point point = makePoint(clubRequest.getLatitude(), clubRequest.getLongitude());\r\n    \r\n        Club club = clubRequest.toClub(master, point);\r\n\r\n        clubRepository.save(club);\r\n\r\n    }\r\n\r\npublic Point makePoint (Float latitude, Float longitude) throws ParseException {\r\n         String wkt = String.format(&quot;POINT(%s %s)&quot;, latitude, longitude);\r\n         return (Point)new WKTReader().read(wkt);\r\n    }\r\n```\r\n\r\n## Entity\r\n\r\n```java\r\n @Column(name = &quot;club_point&quot;, columnDefinition = &quot;POINT&quot;)\r\n    private Point clubPoint;\r\n```\r\n\r\n## yml\r\n\r\n```yml\r\nspring  \r\n jpa :\r\n    properties:\r\n      hibernate:\r\n        database-platform: org.hibernate.spatial.dialect.mysql.MySQL8SpatialDialect\r\n```\r\n\r\n## build.gradle\r\n\r\n```\r\nimplementation &#39;org.hibernate:hibernate-core:5.6.3.Final&#39;\r\n\timplementation group: &#39;org.locationtech.jts&#39;, name: &#39;jts-core&#39;, version: &#39;1.16.1&#39;\r\n\timplementation group: &#39;org.hibernate&#39;, name: &#39;hibernate-spatial&#39;, version: &#39;5.6.15.Final&#39;\r\n```\r\n","title":"Data truncation: Cannot get geometry object from data you send to the GEOMETRY field","body":"<p>hi i'm trying to insert and read <strong>geo data(POINT)</strong> to <strong>mySQL DB.</strong></p>\n<p>I am using <strong>JPA</strong>.</p>\n<p>I got latitude and longitude from the frontend and I made a String like POINT(10 20) as wkt.</p>\n<p>then by using WKTReader, I made a Point Object, made an entity , and call the jpa save method.</p>\n<p>but I got<code> Data truncation: Cannot get geometry object from data you send to the GEOMETRY field</code> error.</p>\n<p>what's wrong with my code?</p>\n<p>by the way i used</p>\n<p><code>org.locationtech.jts.geom.Point;</code></p>\n<p>+) when I tried to insert point as WKT(Stirng), it works. (and it is stored with BLOB in DB)\nshould I have to do like this????</p>\n<h2>Service</h2>\n<pre class=\"lang-java prettyprint-override\"><code>  @Transactional\n    public void addClub (AddClubRequest clubRequest) throws ParseException {\n        Member master = memberRepository.getReferenceById(clubRequest.getUserId());\n  \n        Point point = makePoint(clubRequest.getLatitude(), clubRequest.getLongitude());\n    \n        Club club = clubRequest.toClub(master, point);\n\n        clubRepository.save(club);\n\n    }\n\npublic Point makePoint (Float latitude, Float longitude) throws ParseException {\n         String wkt = String.format(&quot;POINT(%s %s)&quot;, latitude, longitude);\n         return (Point)new WKTReader().read(wkt);\n    }\n</code></pre>\n<h2>Entity</h2>\n<pre class=\"lang-java prettyprint-override\"><code> @Column(name = &quot;club_point&quot;, columnDefinition = &quot;POINT&quot;)\n    private Point clubPoint;\n</code></pre>\n<h2>yml</h2>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring  \n jpa :\n    properties:\n      hibernate:\n        database-platform: org.hibernate.spatial.dialect.mysql.MySQL8SpatialDialect\n</code></pre>\n<h2>build.gradle</h2>\n<pre><code>implementation 'org.hibernate:hibernate-core:5.6.3.Final'\n    implementation group: 'org.locationtech.jts', name: 'jts-core', version: '1.16.1'\n    implementation group: 'org.hibernate', name: 'hibernate-spatial', version: '5.6.15.Final'\n</code></pre>\n"},{"tags":["java","random"],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687532202,"creation_date":1687532202,"answer_id":76541272,"question_id":76541229,"body_markdown":"Yes, you can ignore it.\r\n\r\nThe standard random number generators (`SecureRandom.getInstanceStrong()` and `new Random()`) won&#39;t be deprecated.\r\n\r\nWhenever you call e.g. `rnd.nextInt()`, that `rnd` didn&#39;t fall out of the sky. Either [A] you made it, or [B] it was provided to you e.g. as a parameter or set in the constructor of the class that contains the call to `.nextInt()`. Given that the caller decided to hand you a deprecated algorithm, roll with it. They evidently wanted it that way.\r\n\r\nWhere it could potentially be useful is something exotic like this:\r\n\r\nAs a setting in a file or in some settings dialog, you allow the user of your application to pick the RNG algorithm. You use this to create an instance of Random (instead of `new Random()`) and would like to let the user know if they picked a deprecated algorithm, e.g. by adding a warning icon (yellow triangle with an exclamation mark for example) and the text: `&quot;CAREFUL: You have chosen a deprecated RNG algorithm. You may want to choose a different one, or pick the default instead&quot;`.\r\n\r\n_Then_ `isDeprecated()` can help.","title":"When should I bother about RandomGenerator.isDeprecated()?","body":"<p>Yes, you can ignore it.</p>\n<p>The standard random number generators (<code>SecureRandom.getInstanceStrong()</code> and <code>new Random()</code>) won't be deprecated.</p>\n<p>Whenever you call e.g. <code>rnd.nextInt()</code>, that <code>rnd</code> didn't fall out of the sky. Either [A] you made it, or [B] it was provided to you e.g. as a parameter or set in the constructor of the class that contains the call to <code>.nextInt()</code>. Given that the caller decided to hand you a deprecated algorithm, roll with it. They evidently wanted it that way.</p>\n<p>Where it could potentially be useful is something exotic like this:</p>\n<p>As a setting in a file or in some settings dialog, you allow the user of your application to pick the RNG algorithm. You use this to create an instance of Random (instead of <code>new Random()</code>) and would like to let the user know if they picked a deprecated algorithm, e.g. by adding a warning icon (yellow triangle with an exclamation mark for example) and the text: <code>&quot;CAREFUL: You have chosen a deprecated RNG algorithm. You may want to choose a different one, or pick the default instead&quot;</code>.</p>\n<p><em>Then</em> <code>isDeprecated()</code> can help.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687533247,"creation_date":1687533247,"answer_id":76541423,"question_id":76541229,"body_markdown":"There is an implementation note, within the JavaDoc.\r\n\r\n_[RandomGenerator#isDeprecated (Java SE 20 &amp;amp; JDK 20)](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/random/RandomGenerator.html#isDeprecated())_.\r\n\r\n&gt; _&quot;**Implementation Note:**_  \r\n&gt; \r\n&gt; _Random number generator algorithms evolve over time; new algorithms will be introduced and old algorithms will lose standing. If an older algorithm is deemed unsuitable for continued use, it will be marked as deprecated to indicate that it may be removed at some point in the future.&quot;_\r\n\r\nAnd you mention,\r\n\r\n&gt; _&quot;... and was wondering how it should be used from a developer perspective. ...&quot;_\r\n\r\nSo, I guess they are implying that is not a _deprecation_ in the classical sense.  \r\nIt&#39;s just the annotation they will use when the algorithm has become hyperbolic.\r\n\r\n&gt; _... Can I easily ignore it while doing non-security and non-cryptography related stuff with `Random`?&quot;_\r\n\r\nThe method is in regard to when utilizing a specific algorithm.\r\n\r\nConsider the following; from the _java.util.random_ JavaDoc.\r\n\r\n_[java.util.random (Java SE 20 &amp;amp; JDK 20)](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/random/package-summary.html)_.\r\n\r\n&gt; _&quot;... one can choose a specific implementation by giving the name of a generator algorithm to the static method RandomGenerator.of(java.lang.String), in which case the no-arguments constructor for that implementation is used:_  \r\n&gt; \r\n&gt; _RandomGenerator g = RandomGenerator.of(&quot;L64X128MixRandom&quot;); ...&quot;_\r\n\r\nThis is where it may be logical to implement the _isDeprecated_ method in your code, to possibly alert you.\r\n\r\n```java\r\nassert !g.isDeprecated;\r\n```","title":"When should I bother about RandomGenerator.isDeprecated()?","body":"<p>There is an implementation note, within the JavaDoc.</p>\n<p><em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/random/RandomGenerator.html#isDeprecated()\" rel=\"nofollow noreferrer\">RandomGenerator#isDeprecated (Java SE 20 &amp; JDK 20)</a></em>.</p>\n<blockquote>\n<p><em>&quot;<strong>Implementation Note:</strong></em></p>\n<p><em>Random number generator algorithms evolve over time; new algorithms will be introduced and old algorithms will lose standing. If an older algorithm is deemed unsuitable for continued use, it will be marked as deprecated to indicate that it may be removed at some point in the future.&quot;</em></p>\n</blockquote>\n<p>And you mention,</p>\n<blockquote>\n<p><em>&quot;... and was wondering how it should be used from a developer perspective. ...&quot;</em></p>\n</blockquote>\n<p>So, I guess they are implying that is not a <em>deprecation</em> in the classical sense.<br />\nIt's just the annotation they will use when the algorithm has become hyperbolic.</p>\n<blockquote>\n<p><em>... Can I easily ignore it while doing non-security and non-cryptography related stuff with <code>Random</code>?&quot;</em></p>\n</blockquote>\n<p>The method is in regard to when utilizing a specific algorithm.</p>\n<p>Consider the following; from the <em>java.util.random</em> JavaDoc.</p>\n<p><em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/random/package-summary.html\" rel=\"nofollow noreferrer\">java.util.random (Java SE 20 &amp; JDK 20)</a></em>.</p>\n<blockquote>\n<p><em>&quot;... one can choose a specific implementation by giving the name of a generator algorithm to the static method RandomGenerator.of(java.lang.String), in which case the no-arguments constructor for that implementation is used:</em></p>\n<p><em>RandomGenerator g = RandomGenerator.of(&quot;L64X128MixRandom&quot;); ...&quot;</em></p>\n</blockquote>\n<p>This is where it may be logical to implement the <em>isDeprecated</em> method in your code, to possibly alert you.</p>\n<pre class=\"lang-java prettyprint-override\"><code>assert !g.isDeprecated;\n</code></pre>\n"}],"owner":{"account_id":7753338,"reputation":1218,"user_id":5985343,"display_name":"jmizv"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":195,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76541272,"answer_count":2,"score":0,"last_activity_date":1687533247,"creation_date":1687531826,"question_id":76541229,"body_markdown":"In my Java 17 code I came across the method `new Random().isDeprecated()` (which returns a `boolean`) and was wondering how it should be used from a developer perspective. \r\n\r\nCan I easily ignore it while doing non-security and non-cryptography related stuff with `Random`?","title":"When should I bother about RandomGenerator.isDeprecated()?","body":"<p>In my Java 17 code I came across the method <code>new Random().isDeprecated()</code> (which returns a <code>boolean</code>) and was wondering how it should be used from a developer perspective.</p>\n<p>Can I easily ignore it while doing non-security and non-cryptography related stuff with <code>Random</code>?</p>\n"},{"tags":["java","swing","jframe","bufferedimage","transparent"],"comments":[{"owner":{"account_id":19442946,"reputation":3,"user_id":14221044,"display_name":"Slomas99"},"score":0,"creation_date":1687352024,"post_id":76523138,"comment_id":134924438,"body_markdown":"Just did, and on the background pixels, r g b are all all 0. When I flip around the comparison operators on that statement the background is indeed transparent, but also takes away a majority of the image.","body":"Just did, and on the background pixels, r g b are all all 0. When I flip around the comparison operators on that statement the background is indeed transparent, but also takes away a majority of the image."},{"owner":{"account_id":19442946,"reputation":3,"user_id":14221044,"display_name":"Slomas99"},"score":0,"creation_date":1687352354,"post_id":76523138,"comment_id":134924513,"body_markdown":"Yep, that works nicely thank you. Although surely there is a way for it to make the pixels transparent based on the alpha value of each pixel instead of by looking for a specific colour?","body":"Yep, that works nicely thank you. Although surely there is a way for it to make the pixels transparent based on the alpha value of each pixel instead of by looking for a specific colour?"},{"owner":{"account_id":19442946,"reputation":3,"user_id":14221044,"display_name":"Slomas99"},"score":0,"creation_date":1687353107,"post_id":76523138,"comment_id":134924687,"body_markdown":"Well that fixes it completely! thank you so much.","body":"Well that fixes it completely! thank you so much."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1687353181,"post_id":76523138,"comment_id":134924706,"body_markdown":"but why not just `g.drawImage(i, 0, 0, this);` ??","body":"but why not just <code>g.drawImage(i, 0, 0, this);</code> ??"}],"answers":[{"tags":[],"owner":{"account_id":84493,"reputation":1255,"user_id":236152,"display_name":"Anthony"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687532988,"creation_date":1687532988,"answer_id":76541390,"question_id":76523138,"body_markdown":"A few things:\r\n\r\n - Your panel should not be opaque (the default), so `p.setOpaque(false);`\r\n - Your window should be a JFrame undecorated, so `JFrame w = new JFrame();` and `w.setUndecorated(true);`\r\n - Since it&#39;s undecorated, you need a way to exit the application. I would suggest a key listener on the Escape key.\r\n - If it still doesn&#39;t work also call `setOpaque(false)` on the `JFrame#getContentPane()` and `JFrame#getRootPane()`\r\n\r\nThere may be different behaviour depending on the OS. My experience shows that Linux doesn&#39;t like animation on transparent windows and there was a recent bug fix for Mac OS that I don&#39;t know if it&#39;s released yet.","title":"JSwing - Undecorated window not transparent despite being defined as transparent","body":"<p>A few things:</p>\n<ul>\n<li>Your panel should not be opaque (the default), so <code>p.setOpaque(false);</code></li>\n<li>Your window should be a JFrame undecorated, so <code>JFrame w = new JFrame();</code> and <code>w.setUndecorated(true);</code></li>\n<li>Since it's undecorated, you need a way to exit the application. I would suggest a key listener on the Escape key.</li>\n<li>If it still doesn't work also call <code>setOpaque(false)</code> on the <code>JFrame#getContentPane()</code> and <code>JFrame#getRootPane()</code></li>\n</ul>\n<p>There may be different behaviour depending on the OS. My experience shows that Linux doesn't like animation on transparent windows and there was a recent bug fix for Mac OS that I don't know if it's released yet.</p>\n"}],"owner":{"account_id":19442946,"reputation":3,"user_id":14221044,"display_name":"Slomas99"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687532988,"creation_date":1687349380,"question_id":76523138,"body_markdown":"I am trying to make [this image](https://i.stack.imgur.com/9LCwT.png) appear on my screen, with the background being transparent, as a simple test for a bigger program (being a virtual pet)\r\n\r\n\r\nI am using the following code to do this:\r\n\r\n```\r\n// Java Program to implement the shaped window\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.awt.image.*;\r\nimport java.io.*;\r\nimport javax.imageio.*;\r\nclass solve extends JFrame {\r\n\r\n    // main class\r\n    public static void main(String[] args)\r\n    {\r\n        // try block\r\n        try {\r\n\r\n            // create a window\r\n            JWindow w = new JWindow();\r\n\r\n            // set a transparent  background of the window\r\n            w.setBackground(new Color(0, 0, 0, 0));\r\n\r\n            // read the image\r\n            BufferedImage i = ImageIO.read(new File(&quot;froge.png&quot;));\r\n\r\n            // create a panel\r\n            JPanel p = new JPanel() {\r\n\r\n                // paint the panel\r\n                public void paintComponent(Graphics g)\r\n                {\r\n                    // extract the pixel of the image\r\n                    for (int ii = 1; ii &lt; i.getHeight(); ii++)\r\n                        for (int j = 1; j &lt; i.getWidth(); j++) {\r\n                            // get the color of pixel\r\n                            Color ty = new Color(i.getRGB(j, ii));\r\n\r\n                            // if the color is more than 78 % white ignore it keep it transparent\r\n                            if (ty.getRed() &gt; 200 &amp;&amp; ty.getGreen() &gt; 200 &amp;&amp; ty.getBlue() &gt; 200)\r\n                                g.setColor(new Color(0, 0, 0, 0));\r\n                                // else set  the color\r\n                            else\r\n                                g.setColor(new Color(i.getRGB(j, ii)));\r\n\r\n                            // draw a pixel using a line.\r\n                            g.drawLine(j, ii, j, ii);\r\n                        }\r\n                }\r\n            };\r\n\r\n            // add panel\r\n            w.add(p);\r\n\r\n            // set the location\r\n            w.setLocation(350, 300);\r\n\r\n            // set the size of the window\r\n            w.setSize(1120, 320);\r\n\r\n            // set the visibility of the window\r\n            w.setVisible(true);\r\n        }\r\n        // catch any exception\r\n        catch (Exception e) {\r\n\r\n            // show the error\r\n            System.err.println(e.getMessage());\r\n        }\r\n    }\r\n}\r\n```\r\nThis code is pretty much copied and pasted from a geeks for geeks article that claims to achieve the same thing as what I am trying. To me, the code checks out but when I run it I am faced with a [black background on my image](https://i.stack.imgur.com/F1aw3.jpg)\r\n","title":"JSwing - Undecorated window not transparent despite being defined as transparent","body":"<p>I am trying to make <a href=\"https://i.stack.imgur.com/9LCwT.png\" rel=\"nofollow noreferrer\">this image</a> appear on my screen, with the background being transparent, as a simple test for a bigger program (being a virtual pet)</p>\n<p>I am using the following code to do this:</p>\n<pre><code>// Java Program to implement the shaped window\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.image.*;\nimport java.io.*;\nimport javax.imageio.*;\nclass solve extends JFrame {\n\n    // main class\n    public static void main(String[] args)\n    {\n        // try block\n        try {\n\n            // create a window\n            JWindow w = new JWindow();\n\n            // set a transparent  background of the window\n            w.setBackground(new Color(0, 0, 0, 0));\n\n            // read the image\n            BufferedImage i = ImageIO.read(new File(&quot;froge.png&quot;));\n\n            // create a panel\n            JPanel p = new JPanel() {\n\n                // paint the panel\n                public void paintComponent(Graphics g)\n                {\n                    // extract the pixel of the image\n                    for (int ii = 1; ii &lt; i.getHeight(); ii++)\n                        for (int j = 1; j &lt; i.getWidth(); j++) {\n                            // get the color of pixel\n                            Color ty = new Color(i.getRGB(j, ii));\n\n                            // if the color is more than 78 % white ignore it keep it transparent\n                            if (ty.getRed() &gt; 200 &amp;&amp; ty.getGreen() &gt; 200 &amp;&amp; ty.getBlue() &gt; 200)\n                                g.setColor(new Color(0, 0, 0, 0));\n                                // else set  the color\n                            else\n                                g.setColor(new Color(i.getRGB(j, ii)));\n\n                            // draw a pixel using a line.\n                            g.drawLine(j, ii, j, ii);\n                        }\n                }\n            };\n\n            // add panel\n            w.add(p);\n\n            // set the location\n            w.setLocation(350, 300);\n\n            // set the size of the window\n            w.setSize(1120, 320);\n\n            // set the visibility of the window\n            w.setVisible(true);\n        }\n        // catch any exception\n        catch (Exception e) {\n\n            // show the error\n            System.err.println(e.getMessage());\n        }\n    }\n}\n</code></pre>\n<p>This code is pretty much copied and pasted from a geeks for geeks article that claims to achieve the same thing as what I am trying. To me, the code checks out but when I run it I am faced with a <a href=\"https://i.stack.imgur.com/F1aw3.jpg\" rel=\"nofollow noreferrer\">black background on my image</a></p>\n"},{"tags":["java","uuid","concurrenthashmap"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":2,"creation_date":1687530007,"post_id":76540885,"comment_id":134954354,"body_markdown":"Hello and welcome. Please include your code as text as well. By the way, how do you know it&#39;s not working? What are you checking to determine it&#39;s not working? What result do you expect and what are you getting instead?","body":"Hello and welcome. Please include your code as text as well. By the way, how do you know it&#39;s not working? What are you checking to determine it&#39;s not working? What result do you expect and what are you getting instead?"}],"answers":[{"tags":[],"owner":{"account_id":1010971,"reputation":11524,"user_id":1023553,"accept_rate":59,"display_name":"NoDataFound"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1687530948,"creation_date":1687530948,"answer_id":76541106,"question_id":76540885,"body_markdown":"In the debugger, we can see that `value` variable in an `HashMap`. Not a `ConcurrentHashMap`:\r\n\r\n[![HashMap][1]][1]\r\n\r\nWhen you work with multi levels of map, you should use `computeIfAbsent`.\r\n\r\nFrom your code, you should probably:\r\n\r\n- have `stepOperations` be `ConcurrentMap&lt;Long, ConcurrentMap&lt;UUID, Whatever&gt;&gt;` to make sure the two levels are good.\r\n- use `computeIfAbsent` as in `stepOperations.computeIfAbsent(key, ignored -&gt; new ConcurrentHashMap&lt;&gt;())`\r\n- ensure that the map itself is not accessible externally (where the map could be polluted).\r\n\r\nTo add a new step:\r\n\r\n    stepOperations.computeIfAbsent(opId,  ignored -&gt; new ConcurrentHashMap&lt;&gt;()))\r\n                  .put(opUUID, opWhatever)\r\n\r\n\r\nFinally, you could probably rewrite your code:\r\n\r\n    stepOperations\r\n       .values()\r\n       .stream()\r\n       .filter(value -&gt; value.containsKey(operationRunState.requestId))\r\n       .map(value -&gt; value.get(operationRunState.requestId))\r\n       .findFirst()\r\n\r\nDo that instead:\r\n\r\n    var id = operationRunState.requestId;\r\n    stepOperations\r\n       .values()\r\n       .stream().map(value -&gt; value.get(id))\r\n       .filter(Objects::nonNull)\r\n       .findFirst();\r\n\r\nTwo points:\r\n\r\n- use a local variable `id` to ensure you use the same id\r\n- `ConcurrentHashMap` forbids key and value from being `null`: the `containsKey` is useless here.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wm2QD.png\r\n\r\n","title":"Java containsKey() on ConcurrentHashMap returns false for a UUID key that present in the map","body":"<p>In the debugger, we can see that <code>value</code> variable in an <code>HashMap</code>. Not a <code>ConcurrentHashMap</code>:</p>\n<p><a href=\"https://i.stack.imgur.com/wm2QD.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/wm2QD.png\" alt=\"HashMap\" /></a></p>\n<p>When you work with multi levels of map, you should use <code>computeIfAbsent</code>.</p>\n<p>From your code, you should probably:</p>\n<ul>\n<li>have <code>stepOperations</code> be <code>ConcurrentMap&lt;Long, ConcurrentMap&lt;UUID, Whatever&gt;&gt;</code> to make sure the two levels are good.</li>\n<li>use <code>computeIfAbsent</code> as in <code>stepOperations.computeIfAbsent(key, ignored -&gt; new ConcurrentHashMap&lt;&gt;())</code></li>\n<li>ensure that the map itself is not accessible externally (where the map could be polluted).</li>\n</ul>\n<p>To add a new step:</p>\n<pre><code>stepOperations.computeIfAbsent(opId,  ignored -&gt; new ConcurrentHashMap&lt;&gt;()))\n              .put(opUUID, opWhatever)\n</code></pre>\n<p>Finally, you could probably rewrite your code:</p>\n<pre><code>stepOperations\n   .values()\n   .stream()\n   .filter(value -&gt; value.containsKey(operationRunState.requestId))\n   .map(value -&gt; value.get(operationRunState.requestId))\n   .findFirst()\n</code></pre>\n<p>Do that instead:</p>\n<pre><code>var id = operationRunState.requestId;\nstepOperations\n   .values()\n   .stream().map(value -&gt; value.get(id))\n   .filter(Objects::nonNull)\n   .findFirst();\n</code></pre>\n<p>Two points:</p>\n<ul>\n<li>use a local variable <code>id</code> to ensure you use the same id</li>\n<li><code>ConcurrentHashMap</code> forbids key and value from being <code>null</code>: the <code>containsKey</code> is useless here.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":8594843,"reputation":23,"user_id":6438248,"display_name":"itnick"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1687532544,"creation_date":1687532461,"answer_id":76541322,"question_id":76540885,"body_markdown":"thank you for your responses. Indeed, replacing\r\n\r\n```\r\nprivate final Map&lt;Long, Map&lt;UUID, OperationEntry&gt;&gt; stepOperations = new ConcurrentHashMap&lt;&gt;();\r\n```\r\n\r\nwith\r\n\r\n```\r\nprivate final ConcurrentMap&lt;Long, ConcurrentMap&lt;UUID, OperationEntry&gt;&gt; stepOperations = new ConcurrentHashMap&lt;&gt;();\r\n```\r\n\r\nhad helped. In this case, the inner map is also must be concurrent.","title":"Java containsKey() on ConcurrentHashMap returns false for a UUID key that present in the map","body":"<p>thank you for your responses. Indeed, replacing</p>\n<pre><code>private final Map&lt;Long, Map&lt;UUID, OperationEntry&gt;&gt; stepOperations = new ConcurrentHashMap&lt;&gt;();\n</code></pre>\n<p>with</p>\n<pre><code>private final ConcurrentMap&lt;Long, ConcurrentMap&lt;UUID, OperationEntry&gt;&gt; stepOperations = new ConcurrentHashMap&lt;&gt;();\n</code></pre>\n<p>had helped. In this case, the inner map is also must be concurrent.</p>\n"}],"owner":{"account_id":8594843,"reputation":23,"user_id":6438248,"display_name":"itnick"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76541106,"answer_count":2,"score":1,"last_activity_date":1687532544,"creation_date":1687529210,"question_id":76540885,"body_markdown":"I am using an object of type \r\n\r\n```\r\nMap&lt;Long, Map&lt;UUID, OperationEntry&gt;&gt; stepOperations = new ConcurrentHashMap&lt;&gt;(); \r\n```\r\n\r\nto control the execution of some operations. I have a Kafka message handler method that, upon receiving a message about a status change of an operation, needs to find and update the state of a record in stepOperations map based on the passed UUID. \r\n\r\nUUID class is not overriden (standatd java.util.UUID).\r\n\r\nWhat could be the reason for getting an unexpected result from the containsKey method if the key &quot;3102869c-7653-4fb7-ad47-a629b5cbac90&quot;, as clearly seen in the [screenshot](https://i.stack.imgur.com/K0PkX.png), is present in the map? \r\n\r\nHere is the problematic part of the code:\r\n\r\n```\r\n   private OperationEntry getOperationLogEntry(UUID requestId) {\r\n        return stepOperations.values().stream()\r\n            .filter(value -&gt; value.containsKey(requestId))\r\n            .map(value -&gt; value.get(requestId))\r\n            .findFirst()\r\n            .orElse(null);\r\n    }\r\n```\r\n\r\nThe ConcurrentHashMap class is used due to its guaranted support for multithreaded processing. The incoming Kafka messages are processed by a thread pool consisting of 16 threads.\r\n\r\nCould the presence of a inner map be a potential issue here?\r\n\r\nSimple test such as \r\n```\r\n        Map&lt;UUID, String&gt; testMap = new java.util.concurrent.ConcurrentHashMap&lt;&gt;();\r\n        UUID key = UUID.randomUUID();\r\n        testMap.put(key, &quot;testValue&quot;);\r\n        if (testMap.containsKey(key)) {\r\n            System.out.println(testMap.get(key));\r\n        }\r\n```\r\n works as it&#39;s expected to be\r\n\r\n\r\n","title":"Java containsKey() on ConcurrentHashMap returns false for a UUID key that present in the map","body":"<p>I am using an object of type</p>\n<pre><code>Map&lt;Long, Map&lt;UUID, OperationEntry&gt;&gt; stepOperations = new ConcurrentHashMap&lt;&gt;(); \n</code></pre>\n<p>to control the execution of some operations. I have a Kafka message handler method that, upon receiving a message about a status change of an operation, needs to find and update the state of a record in stepOperations map based on the passed UUID.</p>\n<p>UUID class is not overriden (standatd java.util.UUID).</p>\n<p>What could be the reason for getting an unexpected result from the containsKey method if the key &quot;3102869c-7653-4fb7-ad47-a629b5cbac90&quot;, as clearly seen in the <a href=\"https://i.stack.imgur.com/K0PkX.png\" rel=\"nofollow noreferrer\">screenshot</a>, is present in the map?</p>\n<p>Here is the problematic part of the code:</p>\n<pre><code>   private OperationEntry getOperationLogEntry(UUID requestId) {\n        return stepOperations.values().stream()\n            .filter(value -&gt; value.containsKey(requestId))\n            .map(value -&gt; value.get(requestId))\n            .findFirst()\n            .orElse(null);\n    }\n</code></pre>\n<p>The ConcurrentHashMap class is used due to its guaranted support for multithreaded processing. The incoming Kafka messages are processed by a thread pool consisting of 16 threads.</p>\n<p>Could the presence of a inner map be a potential issue here?</p>\n<p>Simple test such as</p>\n<pre><code>        Map&lt;UUID, String&gt; testMap = new java.util.concurrent.ConcurrentHashMap&lt;&gt;();\n        UUID key = UUID.randomUUID();\n        testMap.put(key, &quot;testValue&quot;);\n        if (testMap.containsKey(key)) {\n            System.out.println(testMap.get(key));\n        }\n</code></pre>\n<p>works as it's expected to be</p>\n"},{"tags":["java","java-8","stream","java-stream"],"comments":[{"owner":{"account_id":28879862,"reputation":39,"user_id":22119553,"display_name":"jackeylove271"},"score":0,"creation_date":1687531757,"post_id":76541152,"comment_id":134954797,"body_markdown":"@Jean-BaptisteYun&#232;s you mean I need to create record again?","body":"@Jean-BaptisteYun&#232;s you mean I need to create record again?"},{"owner":{"account_id":28879862,"reputation":39,"user_id":22119553,"display_name":"jackeylove271"},"score":0,"creation_date":1687531858,"post_id":76541152,"comment_id":134954820,"body_markdown":"@Jean-BaptisteYun&#232;s I know how to count the sum of element&#39;s size, but in the end how to map this sums by the orders?","body":"@Jean-BaptisteYun&#232;s I know how to count the sum of element&#39;s size, but in the end how to map this sums by the orders?"}],"answers":[{"tags":[],"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687532491,"creation_date":1687532491,"answer_id":76541327,"question_id":76541152,"body_markdown":"The logic is: foreach order, sum the elements:\r\n\r\n    class Element {\r\n        private int value;\r\n        public Element(int v) { value = v; }\r\n        public int getValue() { return value; }\r\n        public String toString() { return &quot;&quot;+value; }\r\n    }\r\n    class Order {\r\n        public String name;\r\n        public List&lt;Element&gt; elements;\r\n        public Order(String n, List&lt;Element&gt; l) { name = n; elements = l; }\r\n        public String toString() { return name; }\r\n        public static Order createOrder(String n, List&lt;Element&gt; l) { return new Order(n,l); }\r\n    }\r\n    \r\n    public class Main {\r\n        public static void main(String []a) {\r\n            List&lt;Order&gt; orders = new ArrayList&lt;&gt;();\r\n    \r\n            Element element1 = new Element(20);\r\n            Element element2 = new Element(25);\r\n            Element element3 = new Element(30);\r\n    \r\n            orders.add(Order.createOrder(&quot;order1&quot;, List.of(element1, element2, element3)));\r\n            orders.add(Order.createOrder(&quot;order2&quot;, List.of(element3)));\r\n    \r\n            Map&lt;Order,Integer&gt; r = orders.stream()\r\n                    .collect(Collectors.toMap(o -&gt; o, o -&gt; o.elements.stream().mapToInt(Element::getValue).sum()));\r\n            System.out.println(r);\r\n        }\r\n    }\r\n\r\nwhich gives:\r\n\r\n    {order1=75, order2=30}\r\n\r\nif you want a `Map&lt;String,Integer&gt;` then:\r\n\r\n    Map&lt;String,Integer&gt; r = orders.stream()\r\n                    .collect(Collectors.toMap(Object::toString, o -&gt; o.elements.stream().mapToInt(Element::getValue).sum()));","title":"How can I calculate the sum of the int field for each Element using Stream API?","body":"<p>The logic is: foreach order, sum the elements:</p>\n<pre><code>class Element {\n    private int value;\n    public Element(int v) { value = v; }\n    public int getValue() { return value; }\n    public String toString() { return &quot;&quot;+value; }\n}\nclass Order {\n    public String name;\n    public List&lt;Element&gt; elements;\n    public Order(String n, List&lt;Element&gt; l) { name = n; elements = l; }\n    public String toString() { return name; }\n    public static Order createOrder(String n, List&lt;Element&gt; l) { return new Order(n,l); }\n}\n\npublic class Main {\n    public static void main(String []a) {\n        List&lt;Order&gt; orders = new ArrayList&lt;&gt;();\n\n        Element element1 = new Element(20);\n        Element element2 = new Element(25);\n        Element element3 = new Element(30);\n\n        orders.add(Order.createOrder(&quot;order1&quot;, List.of(element1, element2, element3)));\n        orders.add(Order.createOrder(&quot;order2&quot;, List.of(element3)));\n\n        Map&lt;Order,Integer&gt; r = orders.stream()\n                .collect(Collectors.toMap(o -&gt; o, o -&gt; o.elements.stream().mapToInt(Element::getValue).sum()));\n        System.out.println(r);\n    }\n}\n</code></pre>\n<p>which gives:</p>\n<pre><code>{order1=75, order2=30}\n</code></pre>\n<p>if you want a <code>Map&lt;String,Integer&gt;</code> then:</p>\n<pre><code>Map&lt;String,Integer&gt; r = orders.stream()\n                .collect(Collectors.toMap(Object::toString, o -&gt; o.elements.stream().mapToInt(Element::getValue).sum()));\n</code></pre>\n"}],"owner":{"account_id":28879862,"reputation":39,"user_id":22119553,"display_name":"jackeylove271"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76541327,"answer_count":1,"score":0,"last_activity_date":1687532491,"creation_date":1687531292,"question_id":76541152,"body_markdown":"I have the next classes:\r\n\r\n```\r\npublic class Order {\r\n\tprivate List&lt;Element&gt; elements;\r\n}\r\n\r\npublic class Element {\r\n    private int size;\r\n}\r\n```\r\nAnd I need to create the method which returns the map with orders as `keys` and the sum of every element&#39;s size in the order as `values` using Stream API.\r\n\r\nFor example for \r\n```\r\nList&lt;Order&gt; orders = new ArrayList&lt;&gt;();\r\n\r\norders.add(Order.createOrder(List.of(element1, element2, element3)));\r\norders.add(Order.createOrder(List.of(element3)));\r\n```\r\nwe should get:\r\n\r\n```\r\n{order1 = 75, order2 = 30}\r\n```\r\nbecause `size` of `element1 = 20, element2 = 25, element3 = 30`\r\n\r\nI tried something like this:\r\n\r\n```\r\nprivate static Map&lt;Order, Integer&gt; calculate(List&lt;Order&gt; orders) {\r\n\treturn\torders.stream()\r\n\t\t.flatMap(o -&gt; o.getElements().stream())\r\n\t\t.mapToInt(el -&gt; el.getSize())\r\n\t\t.sum();\r\n}\r\n```\r\nbut this code counts the sum of all element&#39;s sizes. What can I do here? Will be thankful for any advice!\r\n\r\n","title":"How can I calculate the sum of the int field for each Element using Stream API?","body":"<p>I have the next classes:</p>\n<pre><code>public class Order {\n    private List&lt;Element&gt; elements;\n}\n\npublic class Element {\n    private int size;\n}\n</code></pre>\n<p>And I need to create the method which returns the map with orders as <code>keys</code> and the sum of every element's size in the order as <code>values</code> using Stream API.</p>\n<p>For example for</p>\n<pre><code>List&lt;Order&gt; orders = new ArrayList&lt;&gt;();\n\norders.add(Order.createOrder(List.of(element1, element2, element3)));\norders.add(Order.createOrder(List.of(element3)));\n</code></pre>\n<p>we should get:</p>\n<pre><code>{order1 = 75, order2 = 30}\n</code></pre>\n<p>because <code>size</code> of <code>element1 = 20, element2 = 25, element3 = 30</code></p>\n<p>I tried something like this:</p>\n<pre><code>private static Map&lt;Order, Integer&gt; calculate(List&lt;Order&gt; orders) {\n    return  orders.stream()\n        .flatMap(o -&gt; o.getElements().stream())\n        .mapToInt(el -&gt; el.getSize())\n        .sum();\n}\n</code></pre>\n<p>but this code counts the sum of all element's sizes. What can I do here? Will be thankful for any advice!</p>\n"},{"tags":["java","spring","postgresql","jpa"],"answers":[{"tags":[],"owner":{"account_id":14194880,"reputation":1483,"user_id":10254476,"display_name":"GJohannes"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1687518657,"creation_date":1687518657,"answer_id":76539539,"question_id":76539352,"body_markdown":"The most probable issue is that Spring, by default, stores Enums using their ordinal value (numeric) rather than their String value. You could attempt the following:\r\n\r\n\r\n    private final String name;\r\n    \r\n    @Enumerated(EnumType.STRING)\r\n    private final Type type;","title":"Bad value for type byte -postgres, spring, JPA","body":"<p>The most probable issue is that Spring, by default, stores Enums using their ordinal value (numeric) rather than their String value. You could attempt the following:</p>\n<pre><code>private final String name;\n\n@Enumerated(EnumType.STRING)\nprivate final Type type;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687520343,"creation_date":1687520343,"answer_id":76539748,"question_id":76539352,"body_markdown":"Hibernate is trying to convert the enum to a byte type **by default**, but the value of the enum is a string, not a byte, so you need to specify that you want the enum to be persisted as a String, using `@Enumerated`:\r\n```java\r\n@Data\r\n@Entity\r\n@AllArgsConstructor\r\n@NoArgsConstructor(access = AccessLevel.PUBLIC, force = true)\r\npublic class Ingredient {\r\n    @Id\r\n    private final String id;\r\n    private final String name;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    private final Type type;\r\n\r\n    public enum Type {\r\n        WRAP, PROTEIN, VEGGIES, CHEESE, SAUCE\r\n    }\r\n}\r\n```\r\n\r\nRead more: https://thorben-janssen.com/hibernate-enum-mappings/","title":"Bad value for type byte -postgres, spring, JPA","body":"<p>Hibernate is trying to convert the enum to a byte type <strong>by default</strong>, but the value of the enum is a string, not a byte, so you need to specify that you want the enum to be persisted as a String, using <code>@Enumerated</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@Entity\n@AllArgsConstructor\n@NoArgsConstructor(access = AccessLevel.PUBLIC, force = true)\npublic class Ingredient {\n    @Id\n    private final String id;\n    private final String name;\n\n    @Enumerated(EnumType.STRING)\n    private final Type type;\n\n    public enum Type {\n        WRAP, PROTEIN, VEGGIES, CHEESE, SAUCE\n    }\n}\n</code></pre>\n<p>Read more: <a href=\"https://thorben-janssen.com/hibernate-enum-mappings/\" rel=\"nofollow noreferrer\">https://thorben-janssen.com/hibernate-enum-mappings/</a></p>\n"}],"owner":{"account_id":11302589,"reputation":33,"user_id":8288085,"display_name":"bannnnn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":635,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76539748,"answer_count":2,"score":2,"last_activity_date":1687532463,"creation_date":1687517052,"question_id":76539352,"body_markdown":"I want to store an entity in Postgres with this schema \r\n```\r\nCREATE TABLE IF NOT EXISTS Ingredient\r\n(\r\n    id   VARCHAR(4)  NOT NULL PRIMARY KEY,\r\n    name VARCHAR(25) NOT NULL,\r\n    type VARCHAR(10) NOT NULL\r\n);\r\n```\r\n\r\nThis is the Java model \r\n\r\n```\r\n@Data\r\n@Entity\r\n@AllArgsConstructor\r\n@NoArgsConstructor(access = AccessLevel.PUBLIC, force = true)\r\npublic class Ingredient {\r\n    @Id\r\n    private final String id;\r\n    private final String name;\r\n\r\n    private final Type type;\r\n\r\n    public enum Type {\r\n        WRAP, PROTEIN, VEGGIES, CHEESE, SAUCE\r\n    }\r\n}\r\n```\r\n\r\nHere is the code\r\n```\r\n@Profile(&quot;!prod&quot;)\r\n@Configuration\r\npublic class DevelopmentConfig {\r\n    @Bean\r\n    public CommandLineRunner dataLoader(\r\n            IngredientRepository ingredientRepo,\r\n    ) {\r\n        return args -&gt; {\r\n            Ingredient flourTortilla = new Ingredient(\r\n                    &quot;FLTO&quot;, &quot;Flour Tortilla&quot;, Type.WRAP);\r\n            ingredientRepo.save(flourTortilla);\r\n            \r\n        };\r\n    }\r\n}\r\n```\r\n\r\nI receive this error - **Caused by: org.hibernate.exception.DataException: Could not extract column [3] from JDBC ResultSet [Bad value for type byte : WRAP]**\r\n\r\n**Caused by: org.postgresql.util.PSQLException: Bad value for type byte : WRAP\r\n**\r\n\r\n\r\nAny advice is appreciated.\r\n\r\n\r\n\r\nI have tried research this error but no answer was found, I have tried to define the column data type but it still not worked","title":"Bad value for type byte -postgres, spring, JPA","body":"<p>I want to store an entity in Postgres with this schema</p>\n<pre><code>CREATE TABLE IF NOT EXISTS Ingredient\n(\n    id   VARCHAR(4)  NOT NULL PRIMARY KEY,\n    name VARCHAR(25) NOT NULL,\n    type VARCHAR(10) NOT NULL\n);\n</code></pre>\n<p>This is the Java model</p>\n<pre><code>@Data\n@Entity\n@AllArgsConstructor\n@NoArgsConstructor(access = AccessLevel.PUBLIC, force = true)\npublic class Ingredient {\n    @Id\n    private final String id;\n    private final String name;\n\n    private final Type type;\n\n    public enum Type {\n        WRAP, PROTEIN, VEGGIES, CHEESE, SAUCE\n    }\n}\n</code></pre>\n<p>Here is the code</p>\n<pre><code>@Profile(&quot;!prod&quot;)\n@Configuration\npublic class DevelopmentConfig {\n    @Bean\n    public CommandLineRunner dataLoader(\n            IngredientRepository ingredientRepo,\n    ) {\n        return args -&gt; {\n            Ingredient flourTortilla = new Ingredient(\n                    &quot;FLTO&quot;, &quot;Flour Tortilla&quot;, Type.WRAP);\n            ingredientRepo.save(flourTortilla);\n            \n        };\n    }\n}\n</code></pre>\n<p>I receive this error - <strong>Caused by: org.hibernate.exception.DataException: Could not extract column [3] from JDBC ResultSet [Bad value for type byte : WRAP]</strong></p>\n<p>**Caused by: org.postgresql.util.PSQLException: Bad value for type byte : WRAP\n**</p>\n<p>Any advice is appreciated.</p>\n<p>I have tried research this error but no answer was found, I have tried to define the column data type but it still not worked</p>\n"},{"tags":["java","game-development"],"comments":[{"owner":{"account_id":230362,"reputation":28310,"user_id":493928,"accept_rate":62,"display_name":"khachik"},"score":0,"creation_date":1686153591,"post_id":76425040,"comment_id":134761111,"body_markdown":"Unless moves can happen in parallel, it would be faster to assign a state to each cell (occupied/free) and just check the state of target cell. Of course this assumes the state must be maintained accordingly (free up when moving from/occupy when moving to).","body":"Unless moves can happen in parallel, it would be faster to assign a state to each cell (occupied/free) and just check the state of target cell. Of course this assumes the state must be maintained accordingly (free up when moving from/occupy when moving to)."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686191662,"creation_date":1686191291,"answer_id":76428209,"question_id":76425040,"body_markdown":"There are a few ways to accomplish this.\r\n\r\nI would suggest using a multidimensional array.\r\n\r\n_[Arrays (The Java&amp;trade; Tutorials &amp;gt; Learning the Java Language &amp;gt; Language Basics)](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)_.\r\n\r\n&gt; _&quot;You can also declare an array of arrays (also known as a multidimensional array) by using two or more sets of brackets, such as String[][] names. Each element, therefore, must be accessed by a corresponding number of index values.&quot;_  \r\n\r\n&gt; _&quot;In the Java programming language, a multidimensional array is an array whose components are themselves arrays. ...&quot;_\r\n\r\nHere is an example of a basic chess board implementation.\r\n\r\nUse _enum_ objects as a way to define each piece, on the board.\r\n\r\n```java\r\nenum Pieces {\r\n    ROOK_1, KNIGHT_1, BISHOP_1, KING, QUEEN, BISHOP_2,  KNIGHT_2, ROOK_2,\r\n    PAWN_1, PAWN_2, PAWN_3, PAWN_4, PAWN_5, PAWN_6, PAWN_7, PAWN_8\r\n}\r\n\r\nenum Team {\r\n    BLACK, WHITE\r\n}\r\n```\r\n\r\nAnd, a class to contain each piece, collectively.  \r\nThis can be a nested class&amp;mdash;that&#39;s why it&#39;s static, here.\r\n\r\n```java\r\nstatic class Piece {\r\n    Pieces piece;\r\n    Team team;\r\n\r\n    Piece(Pieces piece, Team team) {\r\n        this.piece = piece;\r\n        this.team = team;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return piece.name().substring(0, 1);\r\n    }\r\n}\r\n```\r\n\r\nThen, you can then use a multidimensional array, of _Piece_, to represent the game board.\r\n\r\n```java\r\nPiece[][] board = new Piece[8][8];\r\n```\r\n\r\nAdditionally, use a method to populate the array, initially.\r\n\r\n```java\r\nvoid set() {\r\n    int indexA = 0, indexB = 0;\r\n    for (Pieces piece : Pieces.values()) {\r\n        board[indexA][indexB] = new Piece(piece, BLACK);\r\n        board[indexA == 1 ? 6 : 7][indexB++] = new Piece(piece, WHITE);\r\n        if (piece == ROOK_2) {\r\n            indexA++;\r\n            indexB = 0;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nYou can utilize a _getXY_ method, to return the current _board_ value.\r\n\r\n```java\r\nPiece getXY(int x, int y) {\r\n    return board[x][y];\r\n}\r\n```\r\n\r\nFinally, you&#39;re _isValidMove_ would simply require a check to _board_, for an empty space, or a piece from the opposite team.\r\n\r\n```java\r\nboolean isValidMove(int x, int y, Team team) {\r\n    if (board[x][y] == null) return true;\r\n    else return board[x][y].team != team;\r\n}\r\n```\r\n\r\nHere is the entire code.\r\n\r\n```java\r\npublic class Example {\r\n    public static void main(String[] args) {\r\n        Example example = new Example();\r\n        example.set();\r\n\r\n        System.out.println(example);\r\n    }\r\n\r\n    Piece[][] board = new Piece[8][8];\r\n\r\n    Piece getXY(int x, int y) {\r\n        return board[x][y];\r\n    }\r\n\r\n    boolean isValidMove(int x, int y, Team team) {\r\n        if (board[x][y] == null) return true;\r\n        else return board[x][y].team != team;\r\n    }\r\n\r\n    void set() {\r\n        int indexA = 0, indexB = 0;\r\n        for (Pieces piece : Pieces.values()) {\r\n            board[indexA][indexB] = new Piece(piece, BLACK);\r\n            board[indexA == 1 ? 6 : 7][indexB++] = new Piece(piece, WHITE);\r\n            if (piece == ROOK_2) {\r\n                indexA++;\r\n                indexB = 0;\r\n            }\r\n        }\r\n    }\r\n\r\n    static class Piece {\r\n        Pieces piece;\r\n        Team team;\r\n\r\n        Piece(Pieces piece, Team team) {\r\n            this.piece = piece;\r\n            this.team = team;\r\n        }\r\n\r\n        @Override\r\n        public String toString() {\r\n            return piece.name().substring(0, 1);\r\n        }\r\n    }\r\n\r\n    enum Pieces {\r\n        ROOK_1, KNIGHT_1, BISHOP_1, KING, QUEEN, BISHOP_2, KNIGHT_2, ROOK_2,\r\n        PAWN_1, PAWN_2, PAWN_3, PAWN_4, PAWN_5, PAWN_6, PAWN_7, PAWN_8\r\n    }\r\n\r\n    enum Team {\r\n        BLACK, WHITE\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        StringBuilder string = new StringBuilder();\r\n        for (Piece[] row : board) {\r\n            for (Piece piece : row) {\r\n                if (piece != null) string.append(&quot;%s &quot;.formatted(piece));\r\n                else string.append(&quot;  &quot;);\r\n            }\r\n            string.append(System.lineSeparator());\r\n        }\r\n        return string.toString();\r\n    }\r\n}\r\n```\r\n\r\nOutput.  \r\nI realize, now, that the single character is obviously not the best way to represent the pieces&amp;mdash;just an example.\r\n\r\n```none\r\nR K B K Q B K R \r\nP P P P P P P P \r\n                \r\n                \r\n                \r\n                \r\nP P P P P P P P \r\nR K B K Q B K R \r\n```","title":"How can I verify if a cell is occupied in Java?","body":"<p>There are a few ways to accomplish this.</p>\n<p>I would suggest using a multidimensional array.</p>\n<p><em><a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html\" rel=\"nofollow noreferrer\">Arrays (The Java™ Tutorials &gt; Learning the Java Language &gt; Language Basics)</a></em>.</p>\n<blockquote>\n<p><em>&quot;You can also declare an array of arrays (also known as a multidimensional array) by using two or more sets of brackets, such as String[][] names. Each element, therefore, must be accessed by a corresponding number of index values.&quot;</em></p>\n</blockquote>\n<blockquote>\n<p><em>&quot;In the Java programming language, a multidimensional array is an array whose components are themselves arrays. ...&quot;</em></p>\n</blockquote>\n<p>Here is an example of a basic chess board implementation.</p>\n<p>Use <em>enum</em> objects as a way to define each piece, on the board.</p>\n<pre class=\"lang-java prettyprint-override\"><code>enum Pieces {\n    ROOK_1, KNIGHT_1, BISHOP_1, KING, QUEEN, BISHOP_2,  KNIGHT_2, ROOK_2,\n    PAWN_1, PAWN_2, PAWN_3, PAWN_4, PAWN_5, PAWN_6, PAWN_7, PAWN_8\n}\n\nenum Team {\n    BLACK, WHITE\n}\n</code></pre>\n<p>And, a class to contain each piece, collectively.<br />\nThis can be a nested class—that's why it's static, here.</p>\n<pre class=\"lang-java prettyprint-override\"><code>static class Piece {\n    Pieces piece;\n    Team team;\n\n    Piece(Pieces piece, Team team) {\n        this.piece = piece;\n        this.team = team;\n    }\n\n    @Override\n    public String toString() {\n        return piece.name().substring(0, 1);\n    }\n}\n</code></pre>\n<p>Then, you can then use a multidimensional array, of <em>Piece</em>, to represent the game board.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Piece[][] board = new Piece[8][8];\n</code></pre>\n<p>Additionally, use a method to populate the array, initially.</p>\n<pre class=\"lang-java prettyprint-override\"><code>void set() {\n    int indexA = 0, indexB = 0;\n    for (Pieces piece : Pieces.values()) {\n        board[indexA][indexB] = new Piece(piece, BLACK);\n        board[indexA == 1 ? 6 : 7][indexB++] = new Piece(piece, WHITE);\n        if (piece == ROOK_2) {\n            indexA++;\n            indexB = 0;\n        }\n    }\n}\n</code></pre>\n<p>You can utilize a <em>getXY</em> method, to return the current <em>board</em> value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Piece getXY(int x, int y) {\n    return board[x][y];\n}\n</code></pre>\n<p>Finally, you're <em>isValidMove</em> would simply require a check to <em>board</em>, for an empty space, or a piece from the opposite team.</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean isValidMove(int x, int y, Team team) {\n    if (board[x][y] == null) return true;\n    else return board[x][y].team != team;\n}\n</code></pre>\n<p>Here is the entire code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Example {\n    public static void main(String[] args) {\n        Example example = new Example();\n        example.set();\n\n        System.out.println(example);\n    }\n\n    Piece[][] board = new Piece[8][8];\n\n    Piece getXY(int x, int y) {\n        return board[x][y];\n    }\n\n    boolean isValidMove(int x, int y, Team team) {\n        if (board[x][y] == null) return true;\n        else return board[x][y].team != team;\n    }\n\n    void set() {\n        int indexA = 0, indexB = 0;\n        for (Pieces piece : Pieces.values()) {\n            board[indexA][indexB] = new Piece(piece, BLACK);\n            board[indexA == 1 ? 6 : 7][indexB++] = new Piece(piece, WHITE);\n            if (piece == ROOK_2) {\n                indexA++;\n                indexB = 0;\n            }\n        }\n    }\n\n    static class Piece {\n        Pieces piece;\n        Team team;\n\n        Piece(Pieces piece, Team team) {\n            this.piece = piece;\n            this.team = team;\n        }\n\n        @Override\n        public String toString() {\n            return piece.name().substring(0, 1);\n        }\n    }\n\n    enum Pieces {\n        ROOK_1, KNIGHT_1, BISHOP_1, KING, QUEEN, BISHOP_2, KNIGHT_2, ROOK_2,\n        PAWN_1, PAWN_2, PAWN_3, PAWN_4, PAWN_5, PAWN_6, PAWN_7, PAWN_8\n    }\n\n    enum Team {\n        BLACK, WHITE\n    }\n\n    @Override\n    public String toString() {\n        StringBuilder string = new StringBuilder();\n        for (Piece[] row : board) {\n            for (Piece piece : row) {\n                if (piece != null) string.append(&quot;%s &quot;.formatted(piece));\n                else string.append(&quot;  &quot;);\n            }\n            string.append(System.lineSeparator());\n        }\n        return string.toString();\n    }\n}\n</code></pre>\n<p>Output.<br />\nI realize, now, that the single character is obviously not the best way to represent the pieces—just an example.</p>\n<pre class=\"lang-none prettyprint-override\"><code>R K B K Q B K R \nP P P P P P P P \n                \n                \n                \n                \nP P P P P P P P \nR K B K Q B K R \n</code></pre>\n"}],"owner":{"account_id":28722713,"reputation":11,"user_id":21996189,"display_name":"mecaffo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":205,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1687531741,"creation_date":1686152656,"question_id":76425040,"body_markdown":"I am, with other people, working on a Java project which consists in a strategy turn-based game set on a board with square cells (like a chess board), where two armies fight until one of the generals dies.\r\nThe troops&#39; position consists in two int variables X and Y, and the player can move every troop by selecting it and clicking on a compass with right directions ([N][1], [S][2], [E][3], [W][4], [NE][5], [NW][6], [SE][7], and [SW][8]) and the troop moves n squares depending on the Mov attribute every troop has.\r\n\r\n```\r\npublic void move(int direction) {\r\n    int currentX = getX();\r\n    int currentY = getY();\r\n    int movement = getMov();\r\n    int newX, newY; \r\n\r\n    switch (direction) {\r\n        case 1: // nw\r\n            newX = currentX - movement;\r\n            newY = currentY - movement;\r\n            break;\r\n        case 2: // north\r\n            newX = currentX;\r\n            newY = currentY - movement;\r\n            break;\r\n        case 3: // ne\r\n            newX = currentX + movement;\r\n            newY = currentY - movement;\r\n            break;\r\n        case 4: // east\r\n            newX = currentX + movement;\r\n            newY = currentY;\r\n            break;\r\n        case 5: // se\r\n            newX = currentX + movement;\r\n            newY = currentY + movement;\r\n            break;\r\n        case 6: // south\r\n            newX = currentX;\r\n            newY = currentY + movement;\r\n            break;\r\n        case 7: // sw\r\n            newX = currentX - movement;\r\n            newY = currentY + movement;\r\n            break;\r\n        case 8: // west\r\n            newX = currentX - movement;\r\n            newY=currentY;\r\n            break;\r\n        default:\r\n            // errore\r\n            break;\r\n    }\r\n\r\n    // verify if the position is valid\r\n\r\n\r\n    if (isValidMove(newX, newY)) {\r\n        setPosition(newX, newY);\r\n        setSta(getSta() - 1);\r\n    } else {\r\n        // not a valid move\r\n    }\r\n\r\n    private boolean isValidMove(int newX, int newY) {\r\n        if (newX &lt; 0 || newX &gt; 14 || newY &lt; 0 || newY &gt; 14) {\r\n            //out of the field\r\n            return false;\r\n\r\n        }else {\r\n            for (/*every other troop*/) {\r\n                if (otherTroops.getX() == newX &amp;&amp; otherTroops.getY() == newY) {\r\n                //occupied cell\r\n                return false;\r\n                }\r\n            }\r\n        }\r\n\r\n        if(getSta() &lt; 1){\r\n            //no stamina\r\n            return false;\r\n            \r\n        } else {\r\n            // move is valid\r\n            return true;\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nWhen a troop moves, the game makes various checks in order to verify if the move is &quot;legal&quot; or not, like checking if the target cell is inside the board itself.\r\n\r\nOne check I&#39;ve been stuck in for a while is the one who doesn&#39;t allow the move if the target cell is already occupied, how can I make that?\r\n\r\nAs you can see, one idea I had was to make a for cycle and checking the new position coordinates for every other troop in the board, but I don&#39;t have any idea on how to implement that. Any suggestion?\r\n\r\n  [1]: https://en.wiktionary.org/wiki/north#Noun\r\n  [2]: https://en.wiktionary.org/wiki/south#Noun\r\n  [3]: https://en.wiktionary.org/wiki/east#Noun\r\n  [4]: https://en.wiktionary.org/wiki/west#Noun\r\n  [5]: https://en.wiktionary.org/wiki/north-east#Noun\r\n  [6]: https://en.wiktionary.org/wiki/northwest#Noun\r\n  [7]: https://en.wiktionary.org/wiki/southeast#Noun\r\n  [8]: https://en.wiktionary.org/wiki/southwest#Noun\r\n\r\n","title":"How can I verify if a cell is occupied in Java?","body":"<p>I am, with other people, working on a Java project which consists in a strategy turn-based game set on a board with square cells (like a chess board), where two armies fight until one of the generals dies.\nThe troops' position consists in two int variables X and Y, and the player can move every troop by selecting it and clicking on a compass with right directions (<a href=\"https://en.wiktionary.org/wiki/north#Noun\" rel=\"nofollow noreferrer\">N</a>, <a href=\"https://en.wiktionary.org/wiki/south#Noun\" rel=\"nofollow noreferrer\">S</a>, <a href=\"https://en.wiktionary.org/wiki/east#Noun\" rel=\"nofollow noreferrer\">E</a>, <a href=\"https://en.wiktionary.org/wiki/west#Noun\" rel=\"nofollow noreferrer\">W</a>, <a href=\"https://en.wiktionary.org/wiki/north-east#Noun\" rel=\"nofollow noreferrer\">NE</a>, <a href=\"https://en.wiktionary.org/wiki/northwest#Noun\" rel=\"nofollow noreferrer\">NW</a>, <a href=\"https://en.wiktionary.org/wiki/southeast#Noun\" rel=\"nofollow noreferrer\">SE</a>, and <a href=\"https://en.wiktionary.org/wiki/southwest#Noun\" rel=\"nofollow noreferrer\">SW</a>) and the troop moves n squares depending on the Mov attribute every troop has.</p>\n<pre><code>public void move(int direction) {\n    int currentX = getX();\n    int currentY = getY();\n    int movement = getMov();\n    int newX, newY; \n\n    switch (direction) {\n        case 1: // nw\n            newX = currentX - movement;\n            newY = currentY - movement;\n            break;\n        case 2: // north\n            newX = currentX;\n            newY = currentY - movement;\n            break;\n        case 3: // ne\n            newX = currentX + movement;\n            newY = currentY - movement;\n            break;\n        case 4: // east\n            newX = currentX + movement;\n            newY = currentY;\n            break;\n        case 5: // se\n            newX = currentX + movement;\n            newY = currentY + movement;\n            break;\n        case 6: // south\n            newX = currentX;\n            newY = currentY + movement;\n            break;\n        case 7: // sw\n            newX = currentX - movement;\n            newY = currentY + movement;\n            break;\n        case 8: // west\n            newX = currentX - movement;\n            newY=currentY;\n            break;\n        default:\n            // errore\n            break;\n    }\n\n    // verify if the position is valid\n\n\n    if (isValidMove(newX, newY)) {\n        setPosition(newX, newY);\n        setSta(getSta() - 1);\n    } else {\n        // not a valid move\n    }\n\n    private boolean isValidMove(int newX, int newY) {\n        if (newX &lt; 0 || newX &gt; 14 || newY &lt; 0 || newY &gt; 14) {\n            //out of the field\n            return false;\n\n        }else {\n            for (/*every other troop*/) {\n                if (otherTroops.getX() == newX &amp;&amp; otherTroops.getY() == newY) {\n                //occupied cell\n                return false;\n                }\n            }\n        }\n\n        if(getSta() &lt; 1){\n            //no stamina\n            return false;\n            \n        } else {\n            // move is valid\n            return true;\n        }\n    }\n\n}\n</code></pre>\n<p>When a troop moves, the game makes various checks in order to verify if the move is &quot;legal&quot; or not, like checking if the target cell is inside the board itself.</p>\n<p>One check I've been stuck in for a while is the one who doesn't allow the move if the target cell is already occupied, how can I make that?</p>\n<p>As you can see, one idea I had was to make a for cycle and checking the new position coordinates for every other troop in the board, but I don't have any idea on how to implement that. Any suggestion?</p>\n"},{"tags":["java","postgresql","spring-boot","google-cloud-platform"],"answers":[{"tags":[],"owner":{"account_id":8000228,"reputation":2063,"user_id":6035312,"display_name":"CaioT"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1660741985,"creation_date":1660741096,"answer_id":73388897,"question_id":73388414,"body_markdown":"You should wrap with double quotes in your first solution and that should do it. Example:\r\n\r\n```\r\nspring:\r\n datasource:\r\n  password: &quot;${sm://projects/my-project/secrets/password/versions/1}&quot;\r\n```\r\n\r\nIf you want to get the latest version, you can just pass:\r\n\r\n```\r\nspring:\r\n datasource:\r\n  password: &quot;${sm://projects/my-project/secrets/password}&quot;\r\n```","title":"get values from Secret Manager GCP with spring boot","body":"<p>You should wrap with double quotes in your first solution and that should do it. Example:</p>\n<pre><code>spring:\n datasource:\n  password: &quot;${sm://projects/my-project/secrets/password/versions/1}&quot;\n</code></pre>\n<p>If you want to get the latest version, you can just pass:</p>\n<pre><code>spring:\n datasource:\n  password: &quot;${sm://projects/my-project/secrets/password}&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7838126,"reputation":81,"user_id":5925355,"display_name":"Rrram06"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1662486714,"creation_date":1662486714,"answer_id":73626023,"question_id":73388414,"body_markdown":"I used this dependency:   `implementation(&quot;com.google.cloud:spring-cloud-gcp-starter-secretmanager:3.2.1&quot;)`\r\nand it worked \r\n\r\n ","title":"get values from Secret Manager GCP with spring boot","body":"<p>I used this dependency:   <code>implementation(&quot;com.google.cloud:spring-cloud-gcp-starter-secretmanager:3.2.1&quot;)</code>\nand it worked</p>\n"}],"owner":{"account_id":7838126,"reputation":81,"user_id":5925355,"display_name":"Rrram06"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3486,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":73626023,"answer_count":2,"score":3,"last_activity_date":1687531578,"creation_date":1660738958,"question_id":73388414,"body_markdown":"Does anyone have an example of how to get values from the secret manager on GCP in a `.yaml` file (`application.yaml` or `bootstrap.yaml`)? Thanks!\r\n\r\n**application.yml:**\r\n\r\n    spring:\r\n     datasource:\r\n      password: ${sm://projects/my-project/secrets/password/versions/1}\r\n\r\n**bootstrap.yml:**\r\n\r\n    spring:\r\n      cloud:\r\n       gcp:\r\n        secretmanager:\r\n          enabled: true\r\n          secret-name-prefix: &#39;sm://&#39;\r\n\r\nUnfortunately I am getting this value: `projects/my-project/secrets/password/versions/1` for password :( What I am doing wrong?\r\n","title":"get values from Secret Manager GCP with spring boot","body":"<p>Does anyone have an example of how to get values from the secret manager on GCP in a <code>.yaml</code> file (<code>application.yaml</code> or <code>bootstrap.yaml</code>)? Thanks!</p>\n<p><strong>application.yml:</strong></p>\n<pre><code>spring:\n datasource:\n  password: ${sm://projects/my-project/secrets/password/versions/1}\n</code></pre>\n<p><strong>bootstrap.yml:</strong></p>\n<pre><code>spring:\n  cloud:\n   gcp:\n    secretmanager:\n      enabled: true\n      secret-name-prefix: 'sm://'\n</code></pre>\n<p>Unfortunately I am getting this value: <code>projects/my-project/secrets/password/versions/1</code> for password :( What I am doing wrong?</p>\n"},{"tags":["java","date"],"comments":[{"owner":{"account_id":2183925,"reputation":2212,"user_id":1932789,"display_name":"Zachary Craig"},"score":1,"creation_date":1510768997,"post_id":47314277,"comment_id":81579396,"body_markdown":"This may be helpful to you, as it uses no loop, and thus doesn&#39;t exponentially get higher in runtime i don&#39;t think:  https://stackoverflow.com/a/4600534/1932789","body":"This may be helpful to you, as it uses no loop, and thus doesn&#39;t exponentially get higher in runtime i don&#39;t think:  <a href=\"https://stackoverflow.com/a/4600534/1932789\">stackoverflow.com/a/4600534/1932789</a>"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1510769001,"post_id":47314277,"comment_id":81579397,"body_markdown":"Similar questions have been asked a number of times. Did you have a look? I’m not saying I am sure this is an exact duplicate, but I think you can find some inspiration if you search.","body":"Similar questions have been asked a number of times. Did you have a look? I’m not saying I am sure this is an exact duplicate, but I think you can find some inspiration if you search."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1510769157,"post_id":47314277,"comment_id":81579471,"body_markdown":"Take a look at [How to calculate the working(excluding weekends) days in between two different dates in JAVA?](https://stackoverflow.com/questions/32758569/how-to-calculate-the-workingexcluding-weekends-days-in-between-two-different-d); [how to calculate number of days between two dates excluding weekend java](https://stackoverflow.com/questions/18354727/how-to-calculate-number-of-days-between-two-dates-excluding-weekend-java); [Calculate number of weekdays between two dates in Java](https://stackoverflow.com/questions/4600034/calculate-number-of-weekdays-between-two-dates-in-java).","body":"Take a look at <a href=\"https://stackoverflow.com/questions/32758569/how-to-calculate-the-workingexcluding-weekends-days-in-between-two-different-d\">How to calculate the working(excluding weekends) days in between two different dates in JAVA?</a>; <a href=\"https://stackoverflow.com/questions/18354727/how-to-calculate-number-of-days-between-two-dates-excluding-weekend-java\">how to calculate number of days between two dates excluding weekend java</a>; <a href=\"https://stackoverflow.com/questions/4600034/calculate-number-of-weekdays-between-two-dates-in-java\">Calculate number of weekdays between two dates in Java</a>."},{"owner":{"account_id":81495,"reputation":3962,"user_id":229743,"display_name":"Taylor"},"score":1,"creation_date":1510769168,"post_id":47314277,"comment_id":81579480,"body_markdown":"First off, Calendar has constants for days of the week, you&#39;re using literal values `6` and `7` which are wrong at least in a north american context.  Second, you&#39;re re-parsing the strings into dates every time isFederalHoliday is called, which will probably be the slowest thing in that code.  Finally, store them once in a sorted array and do a binary search https://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#binarySearch(java.lang.Object[],%20java.lang.Object)","body":"First off, Calendar has constants for days of the week, you&#39;re using literal values <code>6</code> and <code>7</code> which are wrong at least in a north american context.  Second, you&#39;re re-parsing the strings into dates every time isFederalHoliday is called, which will probably be the slowest thing in that code.  Finally, store them once in a sorted array and do a binary search <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#binarySearch(java.lang.Object[],%20java.lang.Object)\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/util/&hellip;</a>"},{"owner":{"account_id":326318,"reputation":7188,"user_id":648026,"accept_rate":79,"display_name":"JavaSheriff"},"score":0,"creation_date":1510771254,"post_id":47314277,"comment_id":81580659,"body_markdown":"correct!! i fixed to use  Calendar.SATURDAY   Calendar.SUNDAY ;","body":"correct!! i fixed to use  Calendar.SATURDAY   Calendar.SUNDAY ;"}],"answers":[{"tags":[],"owner":{"account_id":1210101,"reputation":446,"user_id":1178830,"display_name":"user1178830"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1510781137,"creation_date":1510771031,"answer_id":47314886,"question_id":47314277,"body_markdown":"There are many example already given in the comments to calculate how many weekdays are between the two dates. \r\n\r\nAs far as subtracting the the federal holidays goes. Instead of looping over all the days in your fromdate-todate range, why don&#39;t you loop over all the entries in your federalHoliday array once per year in your fromDate-toDate range.\r\n\r\nExcuse the pseudo code:\r\n\r\n    int workdays = getWeekdayCount();\r\n    for(int i = 0, count = getYearsBetween(); i &lt; count; ++i)\r\n    {\r\n        startIndex = (i==0?getIndexFirstHoliday():0);\r\n        endIndex   = (i==(count-1)?getIndexLastHoliday():11);\r\n        for(; startIndex &lt;= endIndex; ++startIndex)\r\n        {\r\n            if(!federalHolidays[startIndex].IsWeekday(count))\r\n                workdays--;\r\n        }\r\n    }\r\n\r\n\r\n- getWeekdayCount: gets you all of the weekdays in the range. \r\n- getIndexFirstHoliday: loops through your federalHolidays array and returns the first index where the date is bigger than the fromDate\r\n- getIndexLastHoliday: loops through your federalHolidays array (backwards) and returns the last index where the date is smaller than the toDate.\r\n- isWeekday: determines if the date is a weekday in the year you&#39;re looping through (if it is, it&#39;s already been discarded in getWeekdayCount so we don&#39;t need to subtract!)\r\n\r\nThis way, you&#39;re looping max 12 times per year, plus another 2 * 12 to get the first and the last index. ","title":"Calculate number of business days between two dates","body":"<p>There are many example already given in the comments to calculate how many weekdays are between the two dates. </p>\n\n<p>As far as subtracting the the federal holidays goes. Instead of looping over all the days in your fromdate-todate range, why don't you loop over all the entries in your federalHoliday array once per year in your fromDate-toDate range.</p>\n\n<p>Excuse the pseudo code:</p>\n\n<pre><code>int workdays = getWeekdayCount();\nfor(int i = 0, count = getYearsBetween(); i &lt; count; ++i)\n{\n    startIndex = (i==0?getIndexFirstHoliday():0);\n    endIndex   = (i==(count-1)?getIndexLastHoliday():11);\n    for(; startIndex &lt;= endIndex; ++startIndex)\n    {\n        if(!federalHolidays[startIndex].IsWeekday(count))\n            workdays--;\n    }\n}\n</code></pre>\n\n<ul>\n<li>getWeekdayCount: gets you all of the weekdays in the range. </li>\n<li>getIndexFirstHoliday: loops through your federalHolidays array and returns the first index where the date is bigger than the fromDate</li>\n<li>getIndexLastHoliday: loops through your federalHolidays array (backwards) and returns the last index where the date is smaller than the toDate.</li>\n<li>isWeekday: determines if the date is a weekday in the year you're looping through (if it is, it's already been discarded in getWeekdayCount so we don't need to subtract!)</li>\n</ul>\n\n<p>This way, you're looping max 12 times per year, plus another 2 * 12 to get the first and the last index. </p>\n"},{"tags":[],"owner":{"account_id":5516910,"reputation":5424,"user_id":4381330,"accept_rate":92,"display_name":"Mincong Huang"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1511043114,"creation_date":1511043114,"answer_id":47371599,"question_id":47314277,"body_markdown":"Here&#39;s an answer implemented in Java 8 using `java.time.*`.\r\n\r\n    public class TestSo47314277 {\r\n    \r\n      /**\r\n       * A set of federal holidays. Compared to iteration, using a\r\n       * hash-based container provides a faster access for reading\r\n       * element via hash code. Using {@link Set} avoids duplicates.\r\n       * &lt;p&gt;\r\n       * Add more dates if needed.\r\n       */\r\n      private static final Set&lt;LocalDate&gt; HOLIDAYS;\r\n    \r\n      static {\r\n        List&lt;LocalDate&gt; dates = Arrays.asList(\r\n            LocalDate.of(2017, 1, 2),\r\n            LocalDate.of(2017, 1, 16),\r\n            LocalDate.of(2017, 2, 20),\r\n            LocalDate.of(2017, 5, 29),\r\n            LocalDate.of(2017, 7, 4),\r\n            LocalDate.of(2017, 9, 4),\r\n            LocalDate.of(2017, 10, 9),\r\n            LocalDate.of(2017, 11, 10),\r\n            LocalDate.of(2017, 11, 23),\r\n            LocalDate.of(2017, 12, 25)\r\n        );\r\n        HOLIDAYS = Collections.unmodifiableSet(new HashSet&lt;&gt;(dates));\r\n      }\r\n    \r\n      public int getBusinessDays(LocalDate startInclusive, LocalDate endExclusive) {\r\n        if (startInclusive.isAfter(endExclusive)) {\r\n          String msg = &quot;Start date &quot; + startInclusive\r\n              + &quot; must be earlier than end date &quot; + endExclusive;\r\n          throw new IllegalArgumentException(msg);\r\n        }\r\n        int businessDays = 0;\r\n        LocalDate d = startInclusive;\r\n        while (d.isBefore(endExclusive)) {\r\n          DayOfWeek dw = d.getDayOfWeek();\r\n          if (!HOLIDAYS.contains(d)\r\n              &amp;&amp; dw != DayOfWeek.SATURDAY\r\n              &amp;&amp; dw != DayOfWeek.SUNDAY) {\r\n            businessDays++;\r\n          }\r\n          d = d.plusDays(1);\r\n        }\r\n        return businessDays;\r\n      }\r\n    }","title":"Calculate number of business days between two dates","body":"<p>Here's an answer implemented in Java 8 using <code>java.time.*</code>.</p>\n\n<pre><code>public class TestSo47314277 {\n\n  /**\n   * A set of federal holidays. Compared to iteration, using a\n   * hash-based container provides a faster access for reading\n   * element via hash code. Using {@link Set} avoids duplicates.\n   * &lt;p&gt;\n   * Add more dates if needed.\n   */\n  private static final Set&lt;LocalDate&gt; HOLIDAYS;\n\n  static {\n    List&lt;LocalDate&gt; dates = Arrays.asList(\n        LocalDate.of(2017, 1, 2),\n        LocalDate.of(2017, 1, 16),\n        LocalDate.of(2017, 2, 20),\n        LocalDate.of(2017, 5, 29),\n        LocalDate.of(2017, 7, 4),\n        LocalDate.of(2017, 9, 4),\n        LocalDate.of(2017, 10, 9),\n        LocalDate.of(2017, 11, 10),\n        LocalDate.of(2017, 11, 23),\n        LocalDate.of(2017, 12, 25)\n    );\n    HOLIDAYS = Collections.unmodifiableSet(new HashSet&lt;&gt;(dates));\n  }\n\n  public int getBusinessDays(LocalDate startInclusive, LocalDate endExclusive) {\n    if (startInclusive.isAfter(endExclusive)) {\n      String msg = \"Start date \" + startInclusive\n          + \" must be earlier than end date \" + endExclusive;\n      throw new IllegalArgumentException(msg);\n    }\n    int businessDays = 0;\n    LocalDate d = startInclusive;\n    while (d.isBefore(endExclusive)) {\n      DayOfWeek dw = d.getDayOfWeek();\n      if (!HOLIDAYS.contains(d)\n          &amp;&amp; dw != DayOfWeek.SATURDAY\n          &amp;&amp; dw != DayOfWeek.SUNDAY) {\n        businessDays++;\n      }\n      d = d.plusDays(1);\n    }\n    return businessDays;\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6143550,"reputation":267,"user_id":4790145,"display_name":"Mohsen Bahaloo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687531570,"creation_date":1608152388,"answer_id":65331030,"question_id":47314277,"body_markdown":"The below code is a complete project that I&#39;ve written in java 8 and will solve your problem.\r\n\r\n``` java\r\n    import java.time.DayOfWeek;\r\n    import java.time.LocalDate;\r\n    import java.time.temporal.ChronoUnit;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.Optional;\r\n    import java.util.function.Predicate;\r\n    import java.util.stream.Collectors;\r\n    import java.util.stream.Stream;\r\n\r\n    public class App {\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            System.out.println(&quot;Hello World!&quot;);\r\n            LocalDate today = LocalDate.of(2020, 5, 5);\r\n    \r\n            // Add one holiday for testing\r\n            List&lt;LocalDate&gt; holidays = new ArrayList&lt;&gt;();\r\n            holidays.add(LocalDate.of(2020, 5, 11));\r\n            holidays.add(LocalDate.of(2020, 5, 1));\r\n            for (LocalDate x : BusinessDaysBetween(today, today.plusDays(20), Optional.empty()))\r\n            {\r\n                System.out.println(x.toString());\r\n            }\r\n        }\r\n        private static List&lt;LocalDate&gt; BusinessDaysBetween(LocalDate startDate, LocalDate endDate,\r\n                                                Optional&lt;List&lt;LocalDate&gt;&gt; holidays)\r\n        {\r\n            if (startDate == null || endDate == null || !holidays.isPresent()) {\r\n                throw new IllegalArgumentException(&quot;Invalid method argument(s) to countBusinessDaysBetween(&quot; + startDate\r\n                        + &quot;,&quot; + endDate + &quot;,&quot; + holidays + &quot;)&quot;);\r\n            }\r\n    \r\n            Predicate&lt;LocalDate&gt; isHoliday = date -&gt; holidays.map(localDates -&gt; localDates.contains(date)).orElse(false);\r\n    \r\n            Predicate&lt;LocalDate&gt; isWeekend = date -&gt; date.getDayOfWeek() == DayOfWeek.SATURDAY\r\n                    || date.getDayOfWeek() == DayOfWeek.SUNDAY;\r\n    \r\n            long daysBetween = ChronoUnit.DAYS.between(startDate, endDate);\r\n    \r\n            return Stream.iterate(startDate, date -&gt; date.plusDays(1)).limit(daysBetween)\r\n                    .filter(isHoliday.or(isWeekend).negate()).collect(Collectors.toList());\r\n        }\r\n    }\r\n```\r\n  \r\n","title":"Calculate number of business days between two dates","body":"<p>The below code is a complete project that I've written in java 8 and will solve your problem.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    import java.time.DayOfWeek;\n    import java.time.LocalDate;\n    import java.time.temporal.ChronoUnit;\n    import java.util.ArrayList;\n    import java.util.List;\n    import java.util.Optional;\n    import java.util.function.Predicate;\n    import java.util.stream.Collectors;\n    import java.util.stream.Stream;\n\n    public class App {\n    \n        public static void main(String[] args) {\n    \n            System.out.println(&quot;Hello World!&quot;);\n            LocalDate today = LocalDate.of(2020, 5, 5);\n    \n            // Add one holiday for testing\n            List&lt;LocalDate&gt; holidays = new ArrayList&lt;&gt;();\n            holidays.add(LocalDate.of(2020, 5, 11));\n            holidays.add(LocalDate.of(2020, 5, 1));\n            for (LocalDate x : BusinessDaysBetween(today, today.plusDays(20), Optional.empty()))\n            {\n                System.out.println(x.toString());\n            }\n        }\n        private static List&lt;LocalDate&gt; BusinessDaysBetween(LocalDate startDate, LocalDate endDate,\n                                                Optional&lt;List&lt;LocalDate&gt;&gt; holidays)\n        {\n            if (startDate == null || endDate == null || !holidays.isPresent()) {\n                throw new IllegalArgumentException(&quot;Invalid method argument(s) to countBusinessDaysBetween(&quot; + startDate\n                        + &quot;,&quot; + endDate + &quot;,&quot; + holidays + &quot;)&quot;);\n            }\n    \n            Predicate&lt;LocalDate&gt; isHoliday = date -&gt; holidays.map(localDates -&gt; localDates.contains(date)).orElse(false);\n    \n            Predicate&lt;LocalDate&gt; isWeekend = date -&gt; date.getDayOfWeek() == DayOfWeek.SATURDAY\n                    || date.getDayOfWeek() == DayOfWeek.SUNDAY;\n    \n            long daysBetween = ChronoUnit.DAYS.between(startDate, endDate);\n    \n            return Stream.iterate(startDate, date -&gt; date.plusDays(1)).limit(daysBetween)\n                    .filter(isHoliday.or(isWeekend).negate()).collect(Collectors.toList());\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1617883466,"creation_date":1617882965,"answer_id":67003501,"question_id":47314277,"body_markdown":"Instead of iterating over each day and checking whether it is a week day and not a holiday, you could instead do the following:\r\n\r\n- get the number of days between your 2 dates\r\n- calculate the number of full weeks and either calculate the number of potential business days (multiply with 5) or the number of weekends to subtract (multiply with 2)\r\n- calculate the number of week days to adjust for partial weeks\r\n- get the number of non-weekend holidays in the required range and subtract those (for `n` holidays this would just be up to `n` checks for each year - and that could be optimized even further)\r\n\r\nPutting everything together, it could look like this: \r\n\r\n    //start is inclusive, end is exclusive\r\n    public long getBusinessDays(LocalDate start, LocalDate end) {\r\n      long days = ChronoUnit.DAYS.between(start, end);\r\n\r\n      long fullWeeks = days/7;\r\n\r\n      //day of week value ranges from 1 (Monday) to 7 (Sunday)\r\n      //clamp Sunday to Saturday (so treat them as one day) - range is now 1 to 6\r\n      //business days is the difference in days if dow(start) &lt; dow(end)\r\n      //if start and end are on a weekend we&#39;ll get 6-6 = 0\r\n      long partialWeekAdjustment = Math.min(6, end.getDayOfWeek().getValue()) -  Math.min(6, start.getDayOfWeek().getValue() );\r\n  \r\n      //if the result is negative, we have dow(start) &gt; dow(end) so add 5 business days\r\n      //ex.: thu (4) to wed (3) will be 3-4 = -1, so adding 5 will result in 4 (thu, fri, mon, tue)\r\n      if( partialWeekAdjustment &lt; 0 ) {\r\n\t\tpartialWeekAdjustment += 5;\t\t\t\r\n\t  }\r\n\r\n      //get the number of non-weekend holidays between the 2 dates       \r\n      long numNonWeekendHolidays = getNonWeekendHolidays(start, end);\r\n\r\n      long businessDays = fullWeeks * 5 + partialWeekAdjustment - numNonWeekendHolidays;\r\n      return businessDays;\r\n    }\r\n\r\n    private long getNonWeekendHolidays(LocalDate start, LocalDate end) {\r\n       //get this from somewhere, could also be something else\r\n       SortedSet&lt;LocalDate&gt; holidays = ...;\r\n\r\n       //get holidays between the 2 dates, filter for non-weekend and count\r\n       return holidays.subSet(start, end).stream()\r\n                      .filter(d -&gt; d.getDayOfWeek().compareTo(DayOfWeek.SATURDAY) &lt; 0)\r\n\t\t\t          .count();\r\n\r\n       //if weekend and non-weekend holidays are kept separate this could be:\r\n       // SortedSet&lt;LocalDate&gt; nonWeekendHolidays = ...;\r\n       // return nonWeekendHolidays.subSet(start, end).size();\r\n    }","title":"Calculate number of business days between two dates","body":"<p>Instead of iterating over each day and checking whether it is a week day and not a holiday, you could instead do the following:</p>\n<ul>\n<li>get the number of days between your 2 dates</li>\n<li>calculate the number of full weeks and either calculate the number of potential business days (multiply with 5) or the number of weekends to subtract (multiply with 2)</li>\n<li>calculate the number of week days to adjust for partial weeks</li>\n<li>get the number of non-weekend holidays in the required range and subtract those (for <code>n</code> holidays this would just be up to <code>n</code> checks for each year - and that could be optimized even further)</li>\n</ul>\n<p>Putting everything together, it could look like this:</p>\n<pre><code>//start is inclusive, end is exclusive\npublic long getBusinessDays(LocalDate start, LocalDate end) {\n  long days = ChronoUnit.DAYS.between(start, end);\n\n  long fullWeeks = days/7;\n\n  //day of week value ranges from 1 (Monday) to 7 (Sunday)\n  //clamp Sunday to Saturday (so treat them as one day) - range is now 1 to 6\n  //business days is the difference in days if dow(start) &lt; dow(end)\n  //if start and end are on a weekend we'll get 6-6 = 0\n  long partialWeekAdjustment = Math.min(6, end.getDayOfWeek().getValue()) -  Math.min(6, start.getDayOfWeek().getValue() );\n\n  //if the result is negative, we have dow(start) &gt; dow(end) so add 5 business days\n  //ex.: thu (4) to wed (3) will be 3-4 = -1, so adding 5 will result in 4 (thu, fri, mon, tue)\n  if( partialWeekAdjustment &lt; 0 ) {\n    partialWeekAdjustment += 5;         \n  }\n\n  //get the number of non-weekend holidays between the 2 dates       \n  long numNonWeekendHolidays = getNonWeekendHolidays(start, end);\n\n  long businessDays = fullWeeks * 5 + partialWeekAdjustment - numNonWeekendHolidays;\n  return businessDays;\n}\n\nprivate long getNonWeekendHolidays(LocalDate start, LocalDate end) {\n   //get this from somewhere, could also be something else\n   SortedSet&lt;LocalDate&gt; holidays = ...;\n\n   //get holidays between the 2 dates, filter for non-weekend and count\n   return holidays.subSet(start, end).stream()\n                  .filter(d -&gt; d.getDayOfWeek().compareTo(DayOfWeek.SATURDAY) &lt; 0)\n                  .count();\n\n   //if weekend and non-weekend holidays are kept separate this could be:\n   // SortedSet&lt;LocalDate&gt; nonWeekendHolidays = ...;\n   // return nonWeekendHolidays.subSet(start, end).size();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9241434,"reputation":11,"user_id":6864634,"display_name":"Adam Kowieski"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1664953925,"creation_date":1664953807,"answer_id":73956908,"question_id":47314277,"body_markdown":"    long numberOfDaysBetween = ChronoUnit.DAYS.between(fromDate, toDate);\r\n    \t\t\t\tArrayList&lt;LocalDate&gt; dates = new ArrayList&lt;&gt;();\r\n    \t\t\t\tfor(int i=0; i&lt;=numberOfDaysBetween; i++) {\r\n    \t\t\t\t\tLocalDate l = fromDate.plus(i, ChronoUnit.DAYS);\r\n    \t\t\t\t\tif(l.getDayOfWeek().getValue() != 6 &amp;&amp; l.getDayOfWeek().getValue() != 7) {\r\n    \t\t\t\t\t\tdates.add(l);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}","title":"Calculate number of business days between two dates","body":"<pre><code>long numberOfDaysBetween = ChronoUnit.DAYS.between(fromDate, toDate);\n                ArrayList&lt;LocalDate&gt; dates = new ArrayList&lt;&gt;();\n                for(int i=0; i&lt;=numberOfDaysBetween; i++) {\n                    LocalDate l = fromDate.plus(i, ChronoUnit.DAYS);\n                    if(l.getDayOfWeek().getValue() != 6 &amp;&amp; l.getDayOfWeek().getValue() != 7) {\n                        dates.add(l);\n                    }\n                }\n</code></pre>\n"}],"owner":{"account_id":326318,"reputation":7188,"user_id":648026,"accept_rate":79,"display_name":"JavaSheriff"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8200,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":47371599,"answer_count":5,"score":3,"last_activity_date":1687531570,"creation_date":1510768659,"question_id":47314277,"body_markdown":"I have requirement to calculate number of business days between two given dates  \r\nI have the list of holidays as an Array list provided by the user.  \r\nSo I can investigate each and every day between the dates and check if its weekday and not federal holiday like the code I provided below (which is working fine)\r\n\r\nBut this is very expensive, lets say 12 federal holidays and each day I will   have to check its not a weekend,       \r\nso if I need to count between 5 years it will take 365 * 5 * 12  its 21,000  iterations! its crazy (not even including the calculation for business day)    \r\nIs there a better way?\r\n\r\n\r\n    package test;\r\n    \r\n    import java.text.DateFormat;\r\n    import java.text.ParseException;\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.Arrays;\r\n\r\n    import java.util.Calendar;\r\n    import java.util.Date;\r\n    import java.util.List;\r\n    \r\n    import org.apache.commons.lang3.time.DateUtils;\r\n    \r\n    public class TestDiff {\r\n    \r\n    \tpublic static void main(String[] args) throws ParseException {\r\n    \t\tDateFormat formatter = new SimpleDateFormat(&quot;MM/dd/yy&quot;);\r\n    \t\t// add 4 years as an example\r\n    \t\tDate fromDate = formatter.parse(&quot;11/06/2017&quot;),toDate = formatter.parse(&quot;11/29/2017&quot;);// DateUtils.addDays(fromDate,365 * 4);\r\n    \t    int numberOfDaysCount=0;\r\n    \t    int daysBetween  = daysBetween(fromDate,toDate);\r\n    \t    Date caurDate = fromDate;\r\n    \t    \r\n    \t    for(int i=0;i&lt;=daysBetween ; i++ ) {\r\n    \t    \tif(isWeekDay(caurDate) &amp;&amp; !isFederalHoliday(caurDate) )\r\n    \t    \t\tnumberOfDaysCount++;\r\n    \t    \tcaurDate = DateUtils.addDays(caurDate,1); // add one day\r\n    \t    }\r\n    \t    System.out.println(&quot;number of business days between &quot;+fromDate+&quot; and &quot;+toDate+&quot; is: &quot;+numberOfDaysCount);\r\n    \t}\r\n    \t\r\n       private static boolean isWeekDay(Date caurDate) {\r\n            \t Calendar c = Calendar.getInstance();\r\n            \t c.setTime(caurDate);\r\n            \t  int dayOfWeek = c.get(Calendar.DAY_OF_WEEK);\r\n            \t  return dayOfWeek!= Calendar.SATURDAY &amp;&amp; dayOfWeek!= Calendar.SUNDAY ;\r\n    \t}\r\n    \r\n    \t\tprivate static boolean isFederalHoliday(Date caurDate) throws ParseException {\r\n    \t\t\tDateFormat formatter = new SimpleDateFormat(&quot;MM/dd/yy&quot;);\t//list will come from dao.getFederalHoliday();\r\n    \t\t\t\tList&lt;Date&gt; federalHolidays =  Arrays.asList(formatter.parse(&quot;01/02/2017&quot;),formatter.parse(&quot;01/16/2017&quot;),formatter.parse(&quot;02/20/2017&quot;),formatter.parse(&quot;05/29/2017&quot;),formatter.parse(&quot;07/04/2017&quot;),formatter.parse(&quot;09/04/2017&quot;),formatter.parse(&quot;10/09/2017&quot;),formatter.parse(&quot;07/04/2017&quot;),formatter.parse(&quot;11/10/2017&quot;),formatter.parse(&quot;11/23/2017&quot;),formatter.parse(&quot;12/25/2017&quot;));\r\n    \t\t\t\tfor (Date holiday : federalHolidays) {\r\n    \t\t\t\t\tif(DateUtils.isSameDay(caurDate,holiday)) //using Apache commons-lang \r\n    \t\t\t\t\t\treturn true;\r\n    \t\t\t\t}\r\n    \t\t\t\treturn false;\r\n    \t}\r\n    \r\n    \t\tpublic static int daysBetween(Date d1, Date d2){\r\n                 return (int)( (d2.getTime() - d1.getTime()) / (1000 * 60 * 60 * 24));\r\n         }\r\n    \r\n    }\r\n\r\n","title":"Calculate number of business days between two dates","body":"<p>I have requirement to calculate number of business days between two given dates<br>\nI have the list of holidays as an Array list provided by the user.<br>\nSo I can investigate each and every day between the dates and check if its weekday and not federal holiday like the code I provided below (which is working fine)</p>\n\n<p>But this is very expensive, lets say 12 federal holidays and each day I will   have to check its not a weekend,<br>\nso if I need to count between 5 years it will take 365 * 5 * 12  its 21,000  iterations! its crazy (not even including the calculation for business day)<br>\nIs there a better way?</p>\n\n<pre><code>package test;\n\nimport java.text.DateFormat;\nimport java.text.ParseException;\nimport java.text.SimpleDateFormat;\nimport java.util.Arrays;\n\nimport java.util.Calendar;\nimport java.util.Date;\nimport java.util.List;\n\nimport org.apache.commons.lang3.time.DateUtils;\n\npublic class TestDiff {\n\n    public static void main(String[] args) throws ParseException {\n        DateFormat formatter = new SimpleDateFormat(\"MM/dd/yy\");\n        // add 4 years as an example\n        Date fromDate = formatter.parse(\"11/06/2017\"),toDate = formatter.parse(\"11/29/2017\");// DateUtils.addDays(fromDate,365 * 4);\n        int numberOfDaysCount=0;\n        int daysBetween  = daysBetween(fromDate,toDate);\n        Date caurDate = fromDate;\n\n        for(int i=0;i&lt;=daysBetween ; i++ ) {\n            if(isWeekDay(caurDate) &amp;&amp; !isFederalHoliday(caurDate) )\n                numberOfDaysCount++;\n            caurDate = DateUtils.addDays(caurDate,1); // add one day\n        }\n        System.out.println(\"number of business days between \"+fromDate+\" and \"+toDate+\" is: \"+numberOfDaysCount);\n    }\n\n   private static boolean isWeekDay(Date caurDate) {\n             Calendar c = Calendar.getInstance();\n             c.setTime(caurDate);\n              int dayOfWeek = c.get(Calendar.DAY_OF_WEEK);\n              return dayOfWeek!= Calendar.SATURDAY &amp;&amp; dayOfWeek!= Calendar.SUNDAY ;\n    }\n\n        private static boolean isFederalHoliday(Date caurDate) throws ParseException {\n            DateFormat formatter = new SimpleDateFormat(\"MM/dd/yy\");    //list will come from dao.getFederalHoliday();\n                List&lt;Date&gt; federalHolidays =  Arrays.asList(formatter.parse(\"01/02/2017\"),formatter.parse(\"01/16/2017\"),formatter.parse(\"02/20/2017\"),formatter.parse(\"05/29/2017\"),formatter.parse(\"07/04/2017\"),formatter.parse(\"09/04/2017\"),formatter.parse(\"10/09/2017\"),formatter.parse(\"07/04/2017\"),formatter.parse(\"11/10/2017\"),formatter.parse(\"11/23/2017\"),formatter.parse(\"12/25/2017\"));\n                for (Date holiday : federalHolidays) {\n                    if(DateUtils.isSameDay(caurDate,holiday)) //using Apache commons-lang \n                        return true;\n                }\n                return false;\n    }\n\n        public static int daysBetween(Date d1, Date d2){\n             return (int)( (d2.getTime() - d1.getTime()) / (1000 * 60 * 60 * 24));\n     }\n\n}\n</code></pre>\n"},{"tags":["java","linux","spring-boot","redhat"],"owner":{"account_id":3028916,"reputation":35508,"user_id":2568341,"accept_rate":57,"display_name":"krokodilko"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687531474,"creation_date":1687531474,"question_id":76541181,"body_markdown":"Our Spring Boot aplicattion is deployed as a service, according to this instruction from Spring Boot manual: \r\n[2.2.1. Installation as an init.d Service (System V)][1]\r\n&lt;br&gt;&lt;br&gt;\r\nOur operating system is RedHat Linux 8\r\n\r\n\r\n----------\r\n\r\n\r\nThe service is executed as another user `appuser` specified in the `RUN_AS_USER` environment variable.&lt;br&gt;&lt;br&gt;\r\nThe problem we have is that the permissions of logs files generated by the application are wrongly set to `rw-----` but only when the service is started by `root` user (using `service our-service start` command). &lt;br&gt;\r\nWhen the service is started by `appuser` user, the permissions of logs are properly set to `rw-r--r--`.&lt;br&gt;\r\n\r\n\r\n----------\r\nThe question is: how can we change the permissions of logs when the service is started by `root` ?\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/deployment.html#deployment.installing.nix-services.init-d","title":"spring boot running as init.d Service (System V) - customize umask for logs","body":"<p>Our Spring Boot aplicattion is deployed as a service, according to this instruction from Spring Boot manual:\n<a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/deployment.html#deployment.installing.nix-services.init-d\" rel=\"nofollow noreferrer\">2.2.1. Installation as an init.d Service (System V)</a>\n<br><br>\nOur operating system is RedHat Linux 8</p>\n<hr />\n<p>The service is executed as another user <code>appuser</code> specified in the <code>RUN_AS_USER</code> environment variable.<br><br>\nThe problem we have is that the permissions of logs files generated by the application are wrongly set to <code>rw-----</code> but only when the service is started by <code>root</code> user (using <code>service our-service start</code> command). <br>\nWhen the service is started by <code>appuser</code> user, the permissions of logs are properly set to <code>rw-r--r--</code>.<br></p>\n<hr />\n<p>The question is: how can we change the permissions of logs when the service is started by <code>root</code> ?</p>\n"},{"tags":["java","postgresql","plpgsql","ibatis"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1687525890,"post_id":76540381,"comment_id":134953313,"body_markdown":"Remove `sr.setStopOnError(false);`. Add an `ErrorLogWriter` and a `LogWriter`. Don&#39;t assume everything is running without an error when you **explicitly** disable error reporting.","body":"Remove <code>sr.setStopOnError(false);</code>. Add an <code>ErrorLogWriter</code> and a <code>LogWriter</code>. Don&#39;t assume everything is running without an error when you <b>explicitly</b> disable error reporting."},{"owner":{"account_id":11342805,"reputation":919,"user_id":8316275,"accept_rate":52,"display_name":"user565"},"score":0,"creation_date":1687528292,"post_id":76540381,"comment_id":134953896,"body_markdown":"sr.setStopOnError(false); Is it not ok to set it false\n\nAs per documentation If we not set both setLogWriter and setErrorLogWriter it will dump on System.out.","body":"sr.setStopOnError(false); Is it not ok to set it false  As per documentation If we not set both setLogWriter and setErrorLogWriter it will dump on System.out."},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1687529020,"post_id":76540381,"comment_id":134954074,"body_markdown":"You ***want*** it to stop on any errors and tell you about them.","body":"You <b><i>want</i></b> it to stop on any errors and tell you about them."},{"owner":{"account_id":11342805,"reputation":919,"user_id":8316275,"accept_rate":52,"display_name":"user565"},"score":0,"creation_date":1687529172,"post_id":76540381,"comment_id":134954113,"body_markdown":"Yes, if i make some error statement in my script it will stop executing it and bark for sql syntax error. So with correct script it is executing but doing nothing.","body":"Yes, if i make some error statement in my script it will stop executing it and bark for sql syntax error. So with correct script it is executing but doing nothing."},{"owner":{"account_id":11342805,"reputation":919,"user_id":8316275,"accept_rate":52,"display_name":"user565"},"score":0,"creation_date":1687529370,"post_id":76540381,"comment_id":134954178,"body_markdown":"I have now made a changes as you said(check the code in the main question)but still nothing interesting has been printing out on console except the running script file sql.","body":"I have now made a changes as you said(check the code in the main question)but still nothing interesting has been printing out on console except the running script file sql."}],"owner":{"account_id":11342805,"reputation":919,"user_id":8316275,"accept_rate":52,"display_name":"user565"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687531274,"creation_date":1687525298,"question_id":76540381,"body_markdown":"I am trying to run the sql script from my java code to truncate all the tables from particular database. I am using apache-ibatis-3.5.13 which have a script runner class. It seems to be not working with PLSQL script. Here is the script:\r\n\r\n\r\n    -- @DELIMITER $\r\n    do\r\n    $$\r\n    DECLARE row RECORD;\r\n    BEGIN\r\n      FOR row IN SELECT table_name\r\n        FROM information_schema.tables\r\n        WHERE table_type=&#39;BASE TABLE&#39;\r\n        AND table_schema=&#39;public&#39;\r\n        AND table_name NOT IN (&#39;admins&#39;, &#39;admin_roles&#39;)\r\n        AND table_catalog=&#39;my_db&#39; \r\n      LOOP \r\n        EXECUTE format(&#39;TRUNCATE TABLE %I CONTINUE IDENTITY RESTRICT;&#39;,row.table_name);\r\n      END LOOP;\r\n    END;\r\n    $$\r\n    -- @DELIMITER $\r\n\r\nMy java code is like that:\r\n\r\n    public static void resetDB(SqlConnection conn, URL url) throws FileNotFoundException, SQLException {\r\n    \t\ttry {\r\n    \t\t\tif (conn.isConnected()) {\r\n    \t\t\t\tPrintWriter logWriter = new PrintWriter(System.out);\r\n\t\t\t\tPrintWriter errorLogWriter = new PrintWriter(System.err);\r\n\r\n\t\t\t\tScriptRunner sr = new ScriptRunner(conn.getConnection());\r\n\t\t\t\tsr.setStopOnError(true);\r\n\t\t\t\tsr.setDelimiter(&quot;]&quot;);\r\n\t\t\t\tsr.setLogWriter(logWriter);\r\n\t\t\t\tsr.setErrorLogWriter(errorLogWriter);\r\n\r\n\t\t\t\tReader reader = new BufferedReader(new FileReader(new File(url.getFile())));\r\n\t\t\t\t// Running the script\r\n\t\t\t\tsr.setSendFullScript(true);\r\n\t\t\t\tsr.runScript(reader);\r\n    \t\t\t}\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n\r\nThere is no exception or error is showing when i run this script and data is still in the tables. I have another solution where i can call the select query from information_schema.tables and then run the truncate query from java but not liking the idea and really wants to do it via sql script.\r\nAny one have idea about it?","title":"How to truncate all tables using a SQL query","body":"<p>I am trying to run the sql script from my java code to truncate all the tables from particular database. I am using apache-ibatis-3.5.13 which have a script runner class. It seems to be not working with PLSQL script. Here is the script:</p>\n<pre><code>-- @DELIMITER $\ndo\n$$\nDECLARE row RECORD;\nBEGIN\n  FOR row IN SELECT table_name\n    FROM information_schema.tables\n    WHERE table_type='BASE TABLE'\n    AND table_schema='public'\n    AND table_name NOT IN ('admins', 'admin_roles')\n    AND table_catalog='my_db' \n  LOOP \n    EXECUTE format('TRUNCATE TABLE %I CONTINUE IDENTITY RESTRICT;',row.table_name);\n  END LOOP;\nEND;\n$$\n-- @DELIMITER $\n</code></pre>\n<p>My java code is like that:</p>\n<pre><code>public static void resetDB(SqlConnection conn, URL url) throws FileNotFoundException, SQLException {\n        try {\n            if (conn.isConnected()) {\n                PrintWriter logWriter = new PrintWriter(System.out);\n            PrintWriter errorLogWriter = new PrintWriter(System.err);\n\n            ScriptRunner sr = new ScriptRunner(conn.getConnection());\n            sr.setStopOnError(true);\n            sr.setDelimiter(&quot;]&quot;);\n            sr.setLogWriter(logWriter);\n            sr.setErrorLogWriter(errorLogWriter);\n\n            Reader reader = new BufferedReader(new FileReader(new File(url.getFile())));\n            // Running the script\n            sr.setSendFullScript(true);\n            sr.runScript(reader);\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p>There is no exception or error is showing when i run this script and data is still in the tables. I have another solution where i can call the select query from information_schema.tables and then run the truncate query from java but not liking the idea and really wants to do it via sql script.\nAny one have idea about it?</p>\n"},{"tags":["java","jfreechart"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1687547960,"post_id":76541141,"comment_id":134957865,"body_markdown":"Are you trying to create a [_Pareto chart_](https://en.wikipedia.org/wiki/Pareto_chart)? You will likely need multiple axes and renderers, suggested [here](https://stackoverflow.com/a/3809514/230513).","body":"Are you trying to create a <a href=\"https://en.wikipedia.org/wiki/Pareto_chart\" rel=\"nofollow noreferrer\"><i>Pareto chart</i></a>? You will likely need multiple axes and renderers, suggested <a href=\"https://stackoverflow.com/a/3809514/230513\">here</a>."}],"owner":{"account_id":27787947,"reputation":1,"user_id":21214972,"display_name":"Jes&#250;s Benjam&#237;n S&#225;nchez Rivera"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687531191,"creation_date":1687531191,"question_id":76541141,"body_markdown":"I need help witch two charts in Java witch JFreeChart.\r\n\r\nI try to combine two graphs, one of bars and one of lines, but I don&#39;t know how to put them...\r\nI take the two datasets for a query form my data base, i want to combinate a bar chart with a line chart te bar chart represents the total of assistance in a group ant the line chart represents the percentage of attendance percentage of the group.  \r\n\r\nThis is my code:\r\n```\r\npublic static void BarCharCursosGeneral(IFrmCapacitacion frm) {\r\n        Conexion conn = new Conexion();\r\n        Connection con = conn.getConnection();\r\n        ResultSet rs = null;\r\n\r\n        DefaultCategoryDataset dataset = new DefaultCategoryDataset();\r\n        DefaultCategoryDataset dataset2 = new DefaultCategoryDataset();\r\n\r\n        String mode = &quot;SET sql_mode=(SELECT REPLACE(@@sql_mode,&#39;ONLY_FULL_GROUP_BY&#39;,&#39;&#39;));&quot;;\r\n        String sql = &quot;SELECT \\n&quot;\r\n                + &quot;    nombre_tipo,COUNT(idHistorial) AS cursos,\\n&quot;\r\n                + &quot;    SUM(asistentes_esperados) as esperado,\\n&quot;\r\n                + &quot;    SUM(num_asistentes) AS asistentes,\\n&quot;\r\n                + &quot;    FLOOR(SUM(num_asistentes)/SUM(asistentes_esperados)*100) AS porcentaje\\n&quot;\r\n                + &quot;FROM sistema_capacitacion.view_historialcursos\\n&quot;\r\n                + &quot;WHERE estado_curso = &#39;Concluido&#39;\\n&quot;\r\n                + &quot;AND YEAR(fecha_cierre) = YEAR(CURDATE())\\n&quot;\r\n                + &quot;GROUP BY id_tipocurso\\n&quot;\r\n                + &quot;ORDER BY id_tipocurso;&quot;;\r\n\r\n        try {\r\n            PreparedStatement ps = con.prepareStatement(mode);\r\n            ps.executeUpdate();\r\n\r\n            ps = con.prepareStatement(sql);\r\n            rs = ps.executeQuery();\r\n\r\n            while (rs.next()) {\r\n                dataset.addValue(rs.getInt(&quot;cursos&quot;), &quot;Total de Cursos&quot;, rs.getString(&quot;nombre_tipo&quot;));\r\n                dataset2.addValue(rs.getInt(&quot;porcentaje&quot;), &quot;% Asistencia&quot;, rs.getString(&quot;nombre_tipo&quot;));\r\n            }\r\n        } catch (SQLException ex) {\r\n            Logger.getLogger(Graphics_Capacitacion.class.getName()).log(Level.SEVERE, null, ex);\r\n        }\r\n\r\n        JFreeChart chart1 = ChartFactory.createBarChart(\r\n                &quot;Total de Cursos&quot;,\r\n                &quot;Cursos&quot;,\r\n                &quot;Cantidad&quot;,\r\n                dataset,\r\n                PlotOrientation.VERTICAL,\r\n                true,\r\n                true,\r\n                false\r\n        );\r\n\r\n        JFreeChart chart2 = ChartFactory.createLineChart(\r\n                &quot;% Asistencia&quot;,\r\n                &quot;Cursos&quot;,\r\n                &quot;%&quot;,\r\n                dataset2,\r\n                PlotOrientation.VERTICAL,\r\n                true,\r\n                true,\r\n                false\r\n        );\r\n\r\n        CombinedDomainCategoryPlot combinedPlot = new CombinedDomainCategoryPlot();\r\n        combinedPlot.add(chart1.getCategoryPlot());\r\n        combinedPlot.add(chart2.getCategoryPlot());\r\n\r\n        JFreeChart combinedChart = new JFreeChart(&quot;Gr&#225;ficas combinadas&quot;, JFreeChart.DEFAULT_TITLE_FONT, combinedPlot, true);\r\n        ChartPanel chartPanel = new ChartPanel(combinedChart, 350, 200, ChartPanel.DEFAULT_MINIMUM_DRAW_WIDTH, ChartPanel.DEFAULT_MINIMUM_DRAW_HEIGHT, ChartPanel.DEFAULT_MAXIMUM_DRAW_WIDTH, ChartPanel.DEFAULT_MAXIMUM_DRAW_HEIGHT, true, true, true, true, true, true);\r\n\r\n        JPanel chartContainer = new JPanel(new BorderLayout());\r\n        chartContainer.add(chartPanel, BorderLayout.CENTER);\r\n\r\n        // Agregar el panel de gr&#225;fica al JPanel existente en la interfaz (frm.jPanel24)\r\n        frm.jPanel24.removeAll(); // Limpiar el panel existente\r\n        frm.jPanel24.setLayout(new BorderLayout());\r\n        frm.jPanel24.add(chartContainer, BorderLayout.CENTER);\r\n\r\n        // Actualizar el JPanel para que se muestre la gr&#225;fica\r\n        frm.jPanel24.revalidate();\r\n        frm.jPanel24.repaint();\r\n    }\r\n```\r\n\r\nBut this is the result:\r\n[](https://i.stack.imgur.com/puHPb.png)\r\n\r\n\r\nCan someone tell me how to do it correctly? Thanks\r\n\r\nCombine two graphs into one","title":"Overlay Charts with JFreeChart","body":"<p>I need help witch two charts in Java witch JFreeChart.</p>\n<p>I try to combine two graphs, one of bars and one of lines, but I don't know how to put them...\nI take the two datasets for a query form my data base, i want to combinate a bar chart with a line chart te bar chart represents the total of assistance in a group ant the line chart represents the percentage of attendance percentage of the group.</p>\n<p>This is my code:</p>\n<pre><code>public static void BarCharCursosGeneral(IFrmCapacitacion frm) {\n        Conexion conn = new Conexion();\n        Connection con = conn.getConnection();\n        ResultSet rs = null;\n\n        DefaultCategoryDataset dataset = new DefaultCategoryDataset();\n        DefaultCategoryDataset dataset2 = new DefaultCategoryDataset();\n\n        String mode = &quot;SET sql_mode=(SELECT REPLACE(@@sql_mode,'ONLY_FULL_GROUP_BY',''));&quot;;\n        String sql = &quot;SELECT \\n&quot;\n                + &quot;    nombre_tipo,COUNT(idHistorial) AS cursos,\\n&quot;\n                + &quot;    SUM(asistentes_esperados) as esperado,\\n&quot;\n                + &quot;    SUM(num_asistentes) AS asistentes,\\n&quot;\n                + &quot;    FLOOR(SUM(num_asistentes)/SUM(asistentes_esperados)*100) AS porcentaje\\n&quot;\n                + &quot;FROM sistema_capacitacion.view_historialcursos\\n&quot;\n                + &quot;WHERE estado_curso = 'Concluido'\\n&quot;\n                + &quot;AND YEAR(fecha_cierre) = YEAR(CURDATE())\\n&quot;\n                + &quot;GROUP BY id_tipocurso\\n&quot;\n                + &quot;ORDER BY id_tipocurso;&quot;;\n\n        try {\n            PreparedStatement ps = con.prepareStatement(mode);\n            ps.executeUpdate();\n\n            ps = con.prepareStatement(sql);\n            rs = ps.executeQuery();\n\n            while (rs.next()) {\n                dataset.addValue(rs.getInt(&quot;cursos&quot;), &quot;Total de Cursos&quot;, rs.getString(&quot;nombre_tipo&quot;));\n                dataset2.addValue(rs.getInt(&quot;porcentaje&quot;), &quot;% Asistencia&quot;, rs.getString(&quot;nombre_tipo&quot;));\n            }\n        } catch (SQLException ex) {\n            Logger.getLogger(Graphics_Capacitacion.class.getName()).log(Level.SEVERE, null, ex);\n        }\n\n        JFreeChart chart1 = ChartFactory.createBarChart(\n                &quot;Total de Cursos&quot;,\n                &quot;Cursos&quot;,\n                &quot;Cantidad&quot;,\n                dataset,\n                PlotOrientation.VERTICAL,\n                true,\n                true,\n                false\n        );\n\n        JFreeChart chart2 = ChartFactory.createLineChart(\n                &quot;% Asistencia&quot;,\n                &quot;Cursos&quot;,\n                &quot;%&quot;,\n                dataset2,\n                PlotOrientation.VERTICAL,\n                true,\n                true,\n                false\n        );\n\n        CombinedDomainCategoryPlot combinedPlot = new CombinedDomainCategoryPlot();\n        combinedPlot.add(chart1.getCategoryPlot());\n        combinedPlot.add(chart2.getCategoryPlot());\n\n        JFreeChart combinedChart = new JFreeChart(&quot;Gráficas combinadas&quot;, JFreeChart.DEFAULT_TITLE_FONT, combinedPlot, true);\n        ChartPanel chartPanel = new ChartPanel(combinedChart, 350, 200, ChartPanel.DEFAULT_MINIMUM_DRAW_WIDTH, ChartPanel.DEFAULT_MINIMUM_DRAW_HEIGHT, ChartPanel.DEFAULT_MAXIMUM_DRAW_WIDTH, ChartPanel.DEFAULT_MAXIMUM_DRAW_HEIGHT, true, true, true, true, true, true);\n\n        JPanel chartContainer = new JPanel(new BorderLayout());\n        chartContainer.add(chartPanel, BorderLayout.CENTER);\n\n        // Agregar el panel de gráfica al JPanel existente en la interfaz (frm.jPanel24)\n        frm.jPanel24.removeAll(); // Limpiar el panel existente\n        frm.jPanel24.setLayout(new BorderLayout());\n        frm.jPanel24.add(chartContainer, BorderLayout.CENTER);\n\n        // Actualizar el JPanel para que se muestre la gráfica\n        frm.jPanel24.revalidate();\n        frm.jPanel24.repaint();\n    }\n</code></pre>\n<p>But this is the result:\n<a href=\"https://i.stack.imgur.com/puHPb.png\" rel=\"nofollow noreferrer\"></a></p>\n<p>Can someone tell me how to do it correctly? Thanks</p>\n<p>Combine two graphs into one</p>\n"},{"tags":["java","reflection"],"comments":[{"owner":{"account_id":2611171,"reputation":1028,"user_id":2261243,"display_name":"Damien C"},"score":0,"creation_date":1687531704,"post_id":76541102,"comment_id":134954785,"body_markdown":"Linked to https://stackoverflow.com/questions/59378578/reflections-doesnt-find-object-subtypes","body":"Linked to <a href=\"https://stackoverflow.com/questions/59378578/reflections-doesnt-find-object-subtypes\" title=\"reflections doesnt find object subtypes\">stackoverflow.com/questions/59378578/&hellip;</a>"}],"owner":{"account_id":2611171,"reputation":1028,"user_id":2261243,"display_name":"Damien C"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1687530918,"creation_date":1687530918,"question_id":76541102,"body_markdown":"With [Reflections lib](https://github.com/ronmamo/reflections/), I&#39;m on a strange behavior. \r\n\r\nThis following code results on server environment with an **empty list**. \r\n\r\n```java\r\n\r\nReflections reflections = new Reflections(&quot;my.package&quot;);\r\n\r\nSet&lt;Class&lt;?&gt;&gt; subTypes = reflections.get( SubTypes.of( Object.class).asClass());\r\n\r\n```\r\n\r\nI&#39;ve also tried this one \r\n\r\n```java\r\n\treflections = new Reflections(new ConfigurationBuilder()\r\n\t\t\t\t.setScanners(new SubTypesScanner(false), new ResourcesScanner())\r\n\t\t\t\t.addUrls(ClasspathHelper.forJavaClassPath())\r\n\t\t\t\t.filterInputsBy(new FilterBuilder()\r\n\t\t\t\t\t\t.includePackage(&quot;my.package&quot;))));\r\n```\r\n\r\nDepending on execution context: \r\n\r\n1. When executing inside my IDE (intelliJ), it works well, as I expect.\r\n2. If I execute via maven command-line, it works also\r\n3. But when I execute the application in **standalone mode** (from packaged .jar file execution), subtypes list is empty. \r\n\r\nDetails: \r\n\r\nMy app is a **Spring boot** app with .jar packaging. \r\n\r\n - If I try to scan an **external library package**, it works in third cases. \r\n - If I scan an **internal package** (in my own code), no sub class is found. As if my code would not be in loaded classpath. \r\n\r\n\r\n\r\n&gt; I&#39;ve read Reflection lib is based on .class files.  \r\nAnyway, in my jar, I can also find this class files.... \r\n\r\nAny idea ?","title":"Reflections - Empty sub class list on my own package","body":"<p>With <a href=\"https://github.com/ronmamo/reflections/\" rel=\"nofollow noreferrer\">Reflections lib</a>, I'm on a strange behavior.</p>\n<p>This following code results on server environment with an <strong>empty list</strong>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nReflections reflections = new Reflections(&quot;my.package&quot;);\n\nSet&lt;Class&lt;?&gt;&gt; subTypes = reflections.get( SubTypes.of( Object.class).asClass());\n\n</code></pre>\n<p>I've also tried this one</p>\n<pre class=\"lang-java prettyprint-override\"><code>    reflections = new Reflections(new ConfigurationBuilder()\n                .setScanners(new SubTypesScanner(false), new ResourcesScanner())\n                .addUrls(ClasspathHelper.forJavaClassPath())\n                .filterInputsBy(new FilterBuilder()\n                        .includePackage(&quot;my.package&quot;))));\n</code></pre>\n<p>Depending on execution context:</p>\n<ol>\n<li>When executing inside my IDE (intelliJ), it works well, as I expect.</li>\n<li>If I execute via maven command-line, it works also</li>\n<li>But when I execute the application in <strong>standalone mode</strong> (from packaged .jar file execution), subtypes list is empty.</li>\n</ol>\n<p>Details:</p>\n<p>My app is a <strong>Spring boot</strong> app with .jar packaging.</p>\n<ul>\n<li>If I try to scan an <strong>external library package</strong>, it works in third cases.</li>\n<li>If I scan an <strong>internal package</strong> (in my own code), no sub class is found. As if my code would not be in loaded classpath.</li>\n</ul>\n<blockquote>\n<p>I've read Reflection lib is based on .class files.<br />\nAnyway, in my jar, I can also find this class files....</p>\n</blockquote>\n<p>Any idea ?</p>\n"},{"tags":["java","multithreading","java.util.concurrent"],"comments":[{"owner":{"account_id":6361011,"reputation":970,"user_id":4936507,"display_name":"Domso"},"score":0,"creation_date":1476949488,"post_id":40148326,"comment_id":67565955,"body_markdown":"why do you use a LinkedList? a simple Circular buffer would work, too","body":"why do you use a LinkedList? a simple Circular buffer would work, too"},{"owner":{"account_id":1317825,"reputation":12193,"user_id":1264321,"accept_rate":92,"display_name":"Stefan"},"score":0,"creation_date":1476949573,"post_id":40148326,"comment_id":67566011,"body_markdown":"http://stackoverflow.com/questions/9580457/fifo-class-in-java","body":"<a href=\"http://stackoverflow.com/questions/9580457/fifo-class-in-java\">stackoverflow.com/questions/9580457/fifo-class-in-java</a>"},{"owner":{"account_id":3552359,"reputation":623,"user_id":2966938,"display_name":"Karura91"},"score":1,"creation_date":1476949700,"post_id":40148326,"comment_id":67566103,"body_markdown":"Since you are in a multithread scenario, you should put your if condition and adding in a synchronized block. Maybe the other threads check the queue size before the other threads add their elements.","body":"Since you are in a multithread scenario, you should put your if condition and adding in a synchronized block. Maybe the other threads check the queue size before the other threads add their elements."},{"owner":{"account_id":6471477,"reputation":142,"user_id":5253487,"accept_rate":60,"display_name":"Nix"},"score":0,"creation_date":1476949982,"post_id":40148326,"comment_id":67566288,"body_markdown":"@Karura91 yes it is within the synchronized block. and the `Added` prints for like 22 times. and `sitt.size()` keeps on increasing rather than stopping it 10.\n\n@Domso I will check about Circular buffer.\n\n@Stefan I am already using that way of Queue with LinkedList, but it ignores `if` condition.","body":"@Karura91 yes it is within the synchronized block. and the <code>Added</code> prints for like 22 times. and <code>sitt.size()</code> keeps on increasing rather than stopping it 10.  @Domso I will check about Circular buffer.  @Stefan I am already using that way of Queue with LinkedList, but it ignores <code>if</code> condition."},{"owner":{"account_id":3552359,"reputation":623,"user_id":2966938,"display_name":"Karura91"},"score":0,"creation_date":1476950221,"post_id":40148326,"comment_id":67566433,"body_markdown":"@Nix I can&#39;t see anything wrong in this code. Could you post the code relevant to the synchronization too?","body":"@Nix I can&#39;t see anything wrong in this code. Could you post the code relevant to the synchronization too?"},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1476953749,"post_id":40148326,"comment_id":67568681,"body_markdown":"LinkedList isn&#39;t thread safe. Why not use a thread safe queue with a fixed size?","body":"LinkedList isn&#39;t thread safe. Why not use a thread safe queue with a fixed size?"},{"owner":{"account_id":6471477,"reputation":142,"user_id":5253487,"accept_rate":60,"display_name":"Nix"},"score":0,"creation_date":1476987892,"post_id":40148326,"comment_id":67592548,"body_markdown":"@PeterLawrey can you pleae explain, how linkedlist isn&#39;t thread safe?","body":"@PeterLawrey can you pleae explain, how linkedlist isn&#39;t thread safe?"},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1476991889,"post_id":40148326,"comment_id":67594843,"body_markdown":"@Nix A data structure has to be specifically implemented to be thread safe or it is not thread safe. LinkedList doesn&#39;t attempt to be thread safe.","body":"@Nix A data structure has to be specifically implemented to be thread safe or it is not thread safe. LinkedList doesn&#39;t attempt to be thread safe."}],"answers":[{"tags":[],"owner":{"account_id":887930,"reputation":23705,"user_id":926907,"accept_rate":87,"display_name":"Dmitry Zaytsev"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1476952672,"creation_date":1476952672,"answer_id":40149412,"question_id":40148326,"body_markdown":"You can just use `LinkedBlockingQueue` from `java.util.concurrent` - it allows you to specify the fixed size for the queue.\r\n\r\n    new LinkedBlockingQueue&lt;&gt;(10);\r\n\r\nThen you can insert values into it using `offer()` method which would do nothing and return `false` if queue is already full.","title":"How to get a fixed sized Queue","body":"<p>You can just use <code>LinkedBlockingQueue</code> from <code>java.util.concurrent</code> - it allows you to specify the fixed size for the queue.</p>\n\n<pre><code>new LinkedBlockingQueue&lt;&gt;(10);\n</code></pre>\n\n<p>Then you can insert values into it using <code>offer()</code> method which would do nothing and return <code>false</code> if queue is already full.</p>\n"},{"tags":[],"owner":{"account_id":400587,"reputation":194,"user_id":766644,"display_name":"Vaulter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659890376,"creation_date":1659890376,"answer_id":73269238,"question_id":40148326,"body_markdown":"Obviously, issue with such implementation - access to shared resource (queue) from multi threads without any syncronization between them. This leads to so called &quot;race&quot; conditions. In extremum case: all threads reads `size`, its equal 0. All threads executes condition&#39;s body and adds new elements.\r\n\r\nI would either use some public solutions for &quot;shared (blocking) circular queue&quot;, or implement it via thread-safe (via locking or else) &quot;integer counter in array&quot;.","title":"How to get a fixed sized Queue","body":"<p>Obviously, issue with such implementation - access to shared resource (queue) from multi threads without any syncronization between them. This leads to so called &quot;race&quot; conditions. In extremum case: all threads reads <code>size</code>, its equal 0. All threads executes condition's body and adds new elements.</p>\n<p>I would either use some public solutions for &quot;shared (blocking) circular queue&quot;, or implement it via thread-safe (via locking or else) &quot;integer counter in array&quot;.</p>\n"}],"owner":{"account_id":6471477,"reputation":142,"user_id":5253487,"accept_rate":60,"display_name":"Nix"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3429,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1687530842,"creation_date":1476949373,"question_id":40148326,"body_markdown":"I am trying to create a fixed size Queue in java, I only want to store maximum 10 objects in the Queue. However, the queue keeps on storing/adding objects and ignoring the `if` condition.\r\n\r\nmy code:\r\n\r\n    Queue&lt;Customer&gt; sitt = new LinkedList&lt;Customer&gt;();\r\n    if(sitt.size() &lt; 10) {\r\n       System.out.println(&quot;Added&quot;);\r\n       ((LinkedList&lt;Customer&gt;)sitt).offer(cust); \r\n    } else {\r\n       System.out.println(&quot;No space..&quot;);\r\n    }\r\n\r\nI have another Runnable class, and I am running 22 threads. This condition should only add `0-9` objects of Customer class. However, the `sitt.size()` even exceed 20. Can anyone tell me what&#39;s the problem here? that even the `if` condition is being ignored. \r\n\r\nP.S: The reason I am using Queue here, is because I have need FIFO.","title":"How to get a fixed sized Queue","body":"<p>I am trying to create a fixed size Queue in java, I only want to store maximum 10 objects in the Queue. However, the queue keeps on storing/adding objects and ignoring the <code>if</code> condition.</p>\n<p>my code:</p>\n<pre><code>Queue&lt;Customer&gt; sitt = new LinkedList&lt;Customer&gt;();\nif(sitt.size() &lt; 10) {\n   System.out.println(&quot;Added&quot;);\n   ((LinkedList&lt;Customer&gt;)sitt).offer(cust); \n} else {\n   System.out.println(&quot;No space..&quot;);\n}\n</code></pre>\n<p>I have another Runnable class, and I am running 22 threads. This condition should only add <code>0-9</code> objects of Customer class. However, the <code>sitt.size()</code> even exceed 20. Can anyone tell me what's the problem here? that even the <code>if</code> condition is being ignored.</p>\n<p>P.S: The reason I am using Queue here, is because I have need FIFO.</p>\n"},{"tags":["java","android","android-contacts"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1687530910,"post_id":76541089,"comment_id":134954600,"body_markdown":"An app that&#39;s not running can, by definition, not read contacts.","body":"An app that&#39;s not running can, by definition, not read contacts."},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1687543129,"post_id":76541089,"comment_id":134957069,"body_markdown":"If your app isn&#39;t running, it can&#39;t do anything.  So what you were describing was never happening.  It may not have been running an Activity, but some part of your app was running.","body":"If your app isn&#39;t running, it can&#39;t do anything.  So what you were describing was never happening.  It may not have been running an Activity, but some part of your app was running."}],"owner":{"account_id":19712696,"reputation":39,"user_id":14432836,"display_name":"Shaik Abdullah"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687530840,"creation_date":1687530840,"question_id":76541089,"body_markdown":"I&#39;m developing an Android application and I need to read contacts from the user&#39;s device. In previous versions of Android, I was able to achieve this functionality while the app was running or in the background. However, with the release of Android 13, I&#39;m uncertain whether it&#39;s still possible to read contacts when the app is completely killed or not running.\r\n\r\nSpecifically, I would like to know if Android 13 allows an application to access the device&#39;s contacts even when it&#39;s not actively running in the foreground or background. My goal is to retrieve contact information such as names, phone numbers, and email addresses for various purposes within my application.\r\n\r\nI have researched extensively, but I couldn&#39;t find any concrete information regarding this particular scenario in Android 13. Therefore, I would appreciate any insights, guidance, or references to relevant documentation or official announcements from Google regarding this matter.\r\n\r\nTo summarize, my question is:\r\n\r\n    In Android 13, is it still possible for an application to read contacts even when the app is killed or not running? If so, what are the necessary steps or requirements to achieve this functionality?\r\n\r\nPlease note that I&#39;m specifically asking about Android 13, as the behavior and capabilities of previous Android versions might differ from the latest release. Thank you in advance for your help!","title":"how to read contacts when app is terminated in android 13?","body":"<p>I'm developing an Android application and I need to read contacts from the user's device. In previous versions of Android, I was able to achieve this functionality while the app was running or in the background. However, with the release of Android 13, I'm uncertain whether it's still possible to read contacts when the app is completely killed or not running.</p>\n<p>Specifically, I would like to know if Android 13 allows an application to access the device's contacts even when it's not actively running in the foreground or background. My goal is to retrieve contact information such as names, phone numbers, and email addresses for various purposes within my application.</p>\n<p>I have researched extensively, but I couldn't find any concrete information regarding this particular scenario in Android 13. Therefore, I would appreciate any insights, guidance, or references to relevant documentation or official announcements from Google regarding this matter.</p>\n<p>To summarize, my question is:</p>\n<pre><code>In Android 13, is it still possible for an application to read contacts even when the app is killed or not running? If so, what are the necessary steps or requirements to achieve this functionality?\n</code></pre>\n<p>Please note that I'm specifically asking about Android 13, as the behavior and capabilities of previous Android versions might differ from the latest release. Thank you in advance for your help!</p>\n"},{"tags":["java","wiremock","handlebars.java"],"comments":[{"owner":{"account_id":3866180,"reputation":2843,"user_id":3202696,"accept_rate":67,"display_name":"TobiSH"},"score":0,"creation_date":1566452744,"post_id":57602585,"comment_id":101661828,"body_markdown":"The quotes at your format string are unbalanced due to the quoted T in the middle: `format=&#39;yyyy-MM-dd&#39;T&#39;HH:mm:ssZ`&#39;. I guess you have to escape this somehow.","body":"The quotes at your format string are unbalanced due to the quoted T in the middle: <code>format=&#39;yyyy-MM-dd&#39;T&#39;HH:mm:ssZ</code>&#39;. I guess you have to escape this somehow."},{"owner":{"account_id":3796161,"reputation":191,"user_id":3151184,"accept_rate":20,"display_name":"Shahbaz Ahmad"},"score":0,"creation_date":1567601898,"post_id":57602585,"comment_id":102011055,"body_markdown":"@RajKishan How did you solve this problem?","body":"@RajKishan How did you solve this problem?"},{"owner":{"account_id":4354155,"reputation":3579,"user_id":4298803,"accept_rate":85,"display_name":"Rajkishan Swami"},"score":0,"creation_date":1567658032,"post_id":57602585,"comment_id":102029527,"body_markdown":"@ShahbazAhmad I did not find a direct solution. So I used a hack instead. What I did is, put a placeholder in place of the date like `&quot;currentDateTime&quot;:&quot;currentTimePlaceholder&quot;`. Then in a custom transformer (extend `ResponseTransformer`), replace that string with the desired value which is easy to do.","body":"@ShahbazAhmad I did not find a direct solution. So I used a hack instead. What I did is, put a placeholder in place of the date like <code>&quot;currentDateTime&quot;:&quot;currentTimePlaceholder&quot;</code>. Then in a custom transformer (extend <code>ResponseTransformer</code>), replace that string with the desired value which is easy to do."}],"answers":[{"tags":[],"owner":{"account_id":13952643,"reputation":31,"user_id":12456021,"display_name":"Marek"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1661315556,"creation_date":1575022651,"answer_id":59102870,"question_id":57602585,"body_markdown":"A simple workaround:\r\n\r\n 1. Declare a variable (`myformat` in the example)\r\n\r\n    `{{#assign &#39;myformat&#39;}}yyyy-MM-dd&#39;T&#39;HH:mm:ssZ{{/assign}}`\r\n\r\n 2. Use it in the stub/mock\r\n\r\n    `{{now format=myformat}}`\r\n\r\nA sample templated response is -\r\n\r\n    {\r\n        &quot;time&quot;: &quot;{{#assign &#39;myformat&#39;}}yyyy-MM-dd&#39;T&#39;HH:mm:ssZ{{/assign}}{{now format=myformat}}&quot;\r\n    }\r\n----------\r\nReferences\r\n\r\n - How to use custom variables in Handlebars for WireMock \r\nhttps://wiremock.org/studio/docs/response-templating/misc-helpers/#assignment","title":"Wiremock Date format","body":"<p>A simple workaround:</p>\n<ol>\n<li><p>Declare a variable (<code>myformat</code> in the example)</p>\n<p><code>{{#assign 'myformat'}}yyyy-MM-dd'T'HH:mm:ssZ{{/assign}}</code></p>\n</li>\n<li><p>Use it in the stub/mock</p>\n<p><code>{{now format=myformat}}</code></p>\n</li>\n</ol>\n<p>A sample templated response is -</p>\n<pre><code>{\n    &quot;time&quot;: &quot;{{#assign 'myformat'}}yyyy-MM-dd'T'HH:mm:ssZ{{/assign}}{{now format=myformat}}&quot;\n}\n</code></pre>\n<hr />\n<p>References</p>\n<ul>\n<li>How to use custom variables in Handlebars for WireMock\n<a href=\"https://wiremock.org/studio/docs/response-templating/misc-helpers/#assignment\" rel=\"nofollow noreferrer\">https://wiremock.org/studio/docs/response-templating/misc-helpers/#assignment</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":15353548,"reputation":31,"user_id":11076491,"display_name":"Aniket Bhagwat"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1576771553,"creation_date":1576771553,"answer_id":59413272,"question_id":57602585,"body_markdown":"Try using following block of code. Working fine for me and probably the best way.\r\n`format=&#39;yyyy-MM-dd\\&#39;T\\&#39;HH:mm:ss.SSSXXX&#39;`","title":"Wiremock Date format","body":"<p>Try using following block of code. Working fine for me and probably the best way.\n<code>format='yyyy-MM-dd\\'T\\'HH:mm:ss.SSSXXX'</code></p>\n"},{"tags":[],"owner":{"account_id":19240642,"reputation":41,"user_id":14060707,"display_name":"Matt Tuckman"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1596723278,"creation_date":1596723278,"answer_id":63285516,"question_id":57602585,"body_markdown":"In case anyone else comes across this post in the future, the simplest (but hacky) solution that I used is to format the parts before and after the &#39;T&#39; separately like so:\r\n \r\n\r\n    &quot;currentDateTime&quot;: &quot;{{now timezone=&#39;Australia/Sydney&#39; format=&#39;yyyy-MM-dd&#39;}}T{{now timezone=&#39;Australia/Sydney&#39; format=&#39;HH:mm:ssZ&#39;}}&quot;\r\n","title":"Wiremock Date format","body":"<p>In case anyone else comes across this post in the future, the simplest (but hacky) solution that I used is to format the parts before and after the 'T' separately like so:</p>\n<pre><code>&quot;currentDateTime&quot;: &quot;{{now timezone='Australia/Sydney' format='yyyy-MM-dd'}}T{{now timezone='Australia/Sydney' format='HH:mm:ssZ'}}&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2127952,"reputation":216,"user_id":1889560,"display_name":"G1yyK"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600930911,"creation_date":1600930911,"answer_id":64041111,"question_id":57602585,"body_markdown":"    &quot;body&quot;: &quot;{\\&quot;datetime\\&quot;: \\&quot;{{now format=&#39;yyyy-MM-dd\\\\&#39;T\\\\&#39;HH:mm:ss&#39;}}\\&quot;}&quot;","title":"Wiremock Date format","body":"<pre><code>&quot;body&quot;: &quot;{\\&quot;datetime\\&quot;: \\&quot;{{now format='yyyy-MM-dd\\\\'T\\\\'HH:mm:ss'}}\\&quot;}&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1155386,"reputation":472,"user_id":1136151,"display_name":"Arthur Kalimullin"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1623181832,"creation_date":1623181832,"answer_id":67893743,"question_id":57602585,"body_markdown":"If you need to include the date in the ISO 8601 format, you can omit the `format` option: \r\n\r\n    {{now timezone=&#39;Australia/Sydney&#39;}}\r\n\r\nIt will produce the following result: `2021-06-09T05:45:53+10:00`. If you omit the timezone and just use `{{now}}` - it will produce a date in UTC: `2021-06-08T19:48:27Z`.\r\n\r\nFor reference, you can check the [`RenderableDate`](https://github.com/tomakehurst/wiremock/blob/master/src/main/java/com/github/tomakehurst/wiremock/extension/responsetemplating/helpers/RenderableDate.java) class in wiremock ","title":"Wiremock Date format","body":"<p>If you need to include the date in the ISO 8601 format, you can omit the <code>format</code> option:</p>\n<pre><code>{{now timezone='Australia/Sydney'}}\n</code></pre>\n<p>It will produce the following result: <code>2021-06-09T05:45:53+10:00</code>. If you omit the timezone and just use <code>{{now}}</code> - it will produce a date in UTC: <code>2021-06-08T19:48:27Z</code>.</p>\n<p>For reference, you can check the <a href=\"https://github.com/tomakehurst/wiremock/blob/master/src/main/java/com/github/tomakehurst/wiremock/extension/responsetemplating/helpers/RenderableDate.java\" rel=\"nofollow noreferrer\"><code>RenderableDate</code></a> class in wiremock</p>\n"},{"tags":[],"owner":{"account_id":2226373,"reputation":1454,"user_id":1965041,"accept_rate":40,"display_name":"Roi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687530704,"creation_date":1687530704,"answer_id":76541071,"question_id":57602585,"body_markdown":"Simpler version that works for formatting in Wiremock\r\n\r\n    &quot;{{now format=&#39;yyyy-MM-dd&#39;}}T{{now format=&#39;HH:mm:ss.SSS&#39;}}Z&quot;","title":"Wiremock Date format","body":"<p>Simpler version that works for formatting in Wiremock</p>\n<pre><code>&quot;{{now format='yyyy-MM-dd'}}T{{now format='HH:mm:ss.SSS'}}Z&quot;\n</code></pre>\n"}],"owner":{"account_id":4354155,"reputation":3579,"user_id":4298803,"accept_rate":85,"display_name":"Rajkishan Swami"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5467,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":6,"score":4,"last_activity_date":1687530704,"creation_date":1566451879,"question_id":57602585,"body_markdown":"I want to generate date in the format `2019-03-28T15:30:59+12:00` using wiremock.\r\n\r\nI tried:\r\n\r\n    &quot;currentDateTime&quot;: &quot;{{now timezone=&#39;Australia/Sydney&#39; format=&#39;yyyy-MM-dd&#39;T&#39;HH:mm:ssZ&#39;}}&quot;\r\n\r\nbut, I get exception:\r\n\r\n&gt; wiremock.com.github.jknack.handlebars.HandlebarsException: inline:\r\n&gt; found: &#39;&#39;yyyy-MM-dd&#39;T&#39;HH:mm:ssZ&#39;&#39;, expected: &#39;no viable alternative at\r\n&gt; input &#39;&#39;yyyy-MM-dd&#39;T&#39;HH:mm:ssZ&#39;&#39;&#39;\r\n\r\nI have also tried escaping both the quotes around `T`, but it does not work.\r\n\r\nWhat I am doing wrong?","title":"Wiremock Date format","body":"<p>I want to generate date in the format <code>2019-03-28T15:30:59+12:00</code> using wiremock.</p>\n\n<p>I tried:</p>\n\n<pre><code>\"currentDateTime\": \"{{now timezone='Australia/Sydney' format='yyyy-MM-dd'T'HH:mm:ssZ'}}\"\n</code></pre>\n\n<p>but, I get exception:</p>\n\n<blockquote>\n  <p>wiremock.com.github.jknack.handlebars.HandlebarsException: inline:\n  found: ''yyyy-MM-dd'T'HH:mm:ssZ'', expected: 'no viable alternative at\n  input ''yyyy-MM-dd'T'HH:mm:ssZ'''</p>\n</blockquote>\n\n<p>I have also tried escaping both the quotes around <code>T</code>, but it does not work.</p>\n\n<p>What I am doing wrong?</p>\n"},{"tags":["java","spring","spring-cloud","spring-cloud-config","spring-cloud-bus"],"comments":[{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":1,"creation_date":1687532366,"post_id":76541066,"comment_id":134954923,"body_markdown":"Yeah, nothing really available to do that right now. You might be able to write an interceptor around the monitor endpoint and inspect the contents and like for the right branch and only proceed if it is local.","body":"Yeah, nothing really available to do that right now. You might be able to write an interceptor around the monitor endpoint and inspect the contents and like for the right branch and only proceed if it is local."}],"owner":{"account_id":16641195,"reputation":359,"user_id":13154548,"display_name":"eternal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687530667,"creation_date":1687530667,"question_id":76541066,"body_markdown":"I have a Git repository with 2 branches(main, local), Spring Cloud Config Server(with spring cloud bus), and Spring App (client for config). \r\n\r\nI want the config server to track changes only on the local branch. I&#39;ve tried to specify the label in cloud config properties, but this label probably indicates only which branch should be used, when properties are requested without specifying the label.\r\n\r\nHow it works right now: \r\n\r\n - Property file changed in git\r\n - Git sends the webhook request to my config server\r\n - /monitor endpoint receives it, and publishes the message to a topic, no matter what branch was affected(probably it&#39;s not possible to change)\r\n - Client app receives the message and tries to resolve whether this message was addressed to him and whether he should refresh its context\r\n\r\nAnd here is the problem: the message doesn&#39;t contain information about an affected branch, so my client always trying to refresh the context and requests new properties from the config server, even if they didn&#39;t change.\r\n\r\nIn the end, I want to make a branch per environment(profile). Any suggestions?","title":"Spring Cloud Config &amp; Bus track only one branch","body":"<p>I have a Git repository with 2 branches(main, local), Spring Cloud Config Server(with spring cloud bus), and Spring App (client for config).</p>\n<p>I want the config server to track changes only on the local branch. I've tried to specify the label in cloud config properties, but this label probably indicates only which branch should be used, when properties are requested without specifying the label.</p>\n<p>How it works right now:</p>\n<ul>\n<li>Property file changed in git</li>\n<li>Git sends the webhook request to my config server</li>\n<li>/monitor endpoint receives it, and publishes the message to a topic, no matter what branch was affected(probably it's not possible to change)</li>\n<li>Client app receives the message and tries to resolve whether this message was addressed to him and whether he should refresh its context</li>\n</ul>\n<p>And here is the problem: the message doesn't contain information about an affected branch, so my client always trying to refresh the context and requests new properties from the config server, even if they didn't change.</p>\n<p>In the end, I want to make a branch per environment(profile). Any suggestions?</p>\n"},{"tags":["java","selenium-webdriver","browser-cache"],"answers":[{"tags":[],"owner":{"account_id":3459421,"reputation":15080,"user_id":2897008,"accept_rate":73,"display_name":"vins"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1444140578,"creation_date":1444140578,"answer_id":32972150,"question_id":32970855,"body_markdown":"For IE\r\n\r\n    DesiredCapabilities ieCap =  DesiredCapabilities.internetExplorer();\r\n    ieCap.setCapability(InternetExplorerDriver.IE_ENSURE_CLEAN_SESSION, true);\r\n\r\n\r\nFor Chrome:\r\n\r\nhttps://code.google.com/p/chromedriver/issues/detail?id=583\r\n\r\nTo delete cookies:\r\n\r\n    driver.manage().deleteAllCookies();","title":"Clear cache before running some Selenium WebDriver tests using Java","body":"<p>For IE</p>\n\n<pre><code>DesiredCapabilities ieCap =  DesiredCapabilities.internetExplorer();\nieCap.setCapability(InternetExplorerDriver.IE_ENSURE_CLEAN_SESSION, true);\n</code></pre>\n\n<p>For Chrome:</p>\n\n<p><a href=\"https://code.google.com/p/chromedriver/issues/detail?id=583\" rel=\"noreferrer\">https://code.google.com/p/chromedriver/issues/detail?id=583</a></p>\n\n<p>To delete cookies:</p>\n\n<pre><code>driver.manage().deleteAllCookies();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7748917,"reputation":87,"user_id":5865536,"display_name":"Rodrigo Estevao"},"down_vote_count":2,"up_vote_count":9,"is_accepted":false,"score":7,"last_activity_date":1546783728,"creation_date":1546783728,"answer_id":54062318,"question_id":32970855,"body_markdown":"At least in Chrome, I strongly believe that if you go incognito you wont to have to clean up your cookies. You can set your options like following (the :\r\n\r\n    from selenium import webdriver\r\n    from selenium.webdriver.chrome.options import Options\r\n\r\n    def _options():\r\n        options = Options()\r\n        options.add_argument(&#39;--ignore-certificate-errors&#39;)\r\n        #options.add_argument(&quot;--test-type&quot;)\r\n        options.add_argument(&quot;--headless&quot;)\r\n        options.add_argument(&quot;--incognito&quot;)\r\n        options.add_argument(&#39;--disable-gpu&#39;) if os.name == &#39;nt&#39; else None # Windows workaround\r\n        options.add_argument(&quot;--verbose&quot;)\r\n        return options\r\n\r\nand call like this:\r\n\r\n    with webdriver.Chrome(options=options) as driver:\r\n        driver.implicitly_wait(conf[&quot;implicitly_wait&quot;])\r\n        driver.get(conf[&quot;url&quot;])\r\n\r\n\r\n\r\n\r\n","title":"Clear cache before running some Selenium WebDriver tests using Java","body":"<p>At least in Chrome, I strongly believe that if you go incognito you wont to have to clean up your cookies. You can set your options like following (the :</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.chrome.options import Options\n\ndef _options():\n    options = Options()\n    options.add_argument('--ignore-certificate-errors')\n    #options.add_argument(\"--test-type\")\n    options.add_argument(\"--headless\")\n    options.add_argument(\"--incognito\")\n    options.add_argument('--disable-gpu') if os.name == 'nt' else None # Windows workaround\n    options.add_argument(\"--verbose\")\n    return options\n</code></pre>\n\n<p>and call like this:</p>\n\n<pre><code>with webdriver.Chrome(options=options) as driver:\n    driver.implicitly_wait(conf[\"implicitly_wait\"])\n    driver.get(conf[\"url\"])\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14844531,"reputation":261,"user_id":10720211,"display_name":"An Khang"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1570421954,"creation_date":1560916053,"answer_id":56659780,"question_id":32970855,"body_markdown":"This is what I use in Python:\r\n           \r\n    from selenium import webdriver\r\n    from selenium.webdriver.common.keys import Keys\r\n    driver = webdriver.Chrome()\r\n    driver.get(&#39;chrome://settings/clearBrowserData&#39;)\r\n    driver.find_element_by_xpath(&#39;//settings-ui&#39;).send_keys(Keys.ENTER)\r\nYou can try converting these into Java. Hope this will help! :) ","title":"Clear cache before running some Selenium WebDriver tests using Java","body":"<p>This is what I use in Python:</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.keys import Keys\ndriver = webdriver.Chrome()\ndriver.get('chrome://settings/clearBrowserData')\ndriver.find_element_by_xpath('//settings-ui').send_keys(Keys.ENTER)\n</code></pre>\n\n<p>You can try converting these into Java. Hope this will help! :) </p>\n"},{"tags":[],"owner":{"account_id":1487022,"reputation":109,"user_id":1395041,"display_name":"ItwasJJsmile"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1575021850,"creation_date":1575021850,"answer_id":59102655,"question_id":32970855,"body_markdown":"The following code is based on @An Khang &#39;s answers. and it is working properly on Chrome 78.\r\n\r\n    ChromeDriver chromeDriver = new ChromeDriver();\r\n\r\n        chromeDriver.manage().deleteAllCookies();\r\n        chromeDriver.get(&quot;chrome://settings/clearBrowserData&quot;);\r\n        chromeDriver.findElementByXPath(&quot;//settings-ui&quot;).sendKeys(Keys.ENTER);\r\n\r\n        return chromeDriver;\r\n\r\n \r\n\r\n\r\n\r\n \r\n\r\n\r\n        \r\n","title":"Clear cache before running some Selenium WebDriver tests using Java","body":"<p>The following code is based on @An Khang 's answers. and it is working properly on Chrome 78.</p>\n\n<pre><code>ChromeDriver chromeDriver = new ChromeDriver();\n\n    chromeDriver.manage().deleteAllCookies();\n    chromeDriver.get(\"chrome://settings/clearBrowserData\");\n    chromeDriver.findElementByXPath(\"//settings-ui\").sendKeys(Keys.ENTER);\n\n    return chromeDriver;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18780820,"reputation":31,"user_id":13695529,"display_name":"Ambesh Srivastava"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1591464655,"creation_date":1591464655,"answer_id":62235451,"question_id":32970855,"body_markdown":"        WebDriver driver = new ChromeDriver();\r\n        driver.manage().deleteAllCookies();\r\n\t\tdriver.get(&quot;chrome://settings/clearBrowserData&quot;);\r\n\t\tdriver.findElement(By.xpath(&quot;//settings-ui&quot;)).sendKeys(Keys.ENTER);","title":"Clear cache before running some Selenium WebDriver tests using Java","body":"<pre><code>    WebDriver driver = new ChromeDriver();\n    driver.manage().deleteAllCookies();\n    driver.get(\"chrome://settings/clearBrowserData\");\n    driver.findElement(By.xpath(\"//settings-ui\")).sendKeys(Keys.ENTER);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19368141,"reputation":1,"user_id":14161953,"display_name":"Timo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1616157395,"creation_date":1616157395,"answer_id":66708298,"question_id":32970855,"body_markdown":"```\r\nimport org.openqa.selenium.Keys;\r\n```\r\nyou need to import the Keys in newer version and change the last line to findElement by xpath\r\n```\r\nWebDriver driver = new ChromeDriver();\r\n\r\ndriver.manage().deleteAllCookies();\r\ndriver.get(&quot;chrome://settings/clearBrowserData&quot;);\r\ndriver.findElement(By.xpath(&quot;//settings-ui&quot;)).sendKeys(Keys.ENTER);\r\n```","title":"Clear cache before running some Selenium WebDriver tests using Java","body":"<pre><code>import org.openqa.selenium.Keys;\n</code></pre>\n<p>you need to import the Keys in newer version and change the last line to findElement by xpath</p>\n<pre><code>WebDriver driver = new ChromeDriver();\n\ndriver.manage().deleteAllCookies();\ndriver.get(&quot;chrome://settings/clearBrowserData&quot;);\ndriver.findElement(By.xpath(&quot;//settings-ui&quot;)).sendKeys(Keys.ENTER);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3316675,"reputation":11,"user_id":2788886,"display_name":"Naveen AutomationLabs"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1628169772,"creation_date":1628169772,"answer_id":68667436,"question_id":32970855,"body_markdown":"On Google chrome you can use this script:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n\r\n    \t\tdriver.get(&quot;chrome://settings/clearBrowserData&quot;);\t\t\r\n            JavascriptExecutor jse = (JavascriptExecutor)driver;\r\n            WebElement clearData =  (WebElement) jse.executeScript(&quot;return document.querySelector(\\&quot;body &gt; settings-ui\\&quot;).shadowRoot.querySelector(\\&quot;#main\\&quot;).shadowRoot.querySelector(\\&quot;settings-basic-page\\&quot;).shadowRoot.querySelector(\\&quot;#basicPage &gt; settings-section:nth-child(8) &gt; settings-privacy-page\\&quot;).shadowRoot.querySelector(\\&quot;settings-clear-browsing-data-dialog\\&quot;).shadowRoot.querySelector(\\&quot;#clearBrowsingDataConfirm\\&quot;)&quot;);\r\n            ((JavascriptExecutor)driver).executeScript(&quot;arguments[0].click();&quot;, clearData);\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Clear cache before running some Selenium WebDriver tests using Java","body":"<p>On Google chrome you can use this script:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>        driver.get(\"chrome://settings/clearBrowserData\");       \n        JavascriptExecutor jse = (JavascriptExecutor)driver;\n        WebElement clearData =  (WebElement) jse.executeScript(\"return document.querySelector(\\\"body &gt; settings-ui\\\").shadowRoot.querySelector(\\\"#main\\\").shadowRoot.querySelector(\\\"settings-basic-page\\\").shadowRoot.querySelector(\\\"#basicPage &gt; settings-section:nth-child(8) &gt; settings-privacy-page\\\").shadowRoot.querySelector(\\\"settings-clear-browsing-data-dialog\\\").shadowRoot.querySelector(\\\"#clearBrowsingDataConfirm\\\")\");\n        ((JavascriptExecutor)driver).executeScript(\"arguments[0].click();\", clearData);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":27736104,"reputation":11,"user_id":21173656,"display_name":"Old Wizard"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685834327,"creation_date":1685834327,"answer_id":76398385,"question_id":32970855,"body_markdown":"what i found working for myself was adding chromium flag:\r\n\r\n--disk-cache-size=0\r\n\r\nnot sure if it clears cache, but any cache related problems disappeared in my case","title":"Clear cache before running some Selenium WebDriver tests using Java","body":"<p>what i found working for myself was adding chromium flag:</p>\n<p>--disk-cache-size=0</p>\n<p>not sure if it clears cache, but any cache related problems disappeared in my case</p>\n"},{"tags":[],"owner":{"account_id":5325235,"reputation":623,"user_id":4247449,"display_name":"Serg Smyk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687530481,"creation_date":1687530481,"answer_id":76541044,"question_id":32970855,"body_markdown":"    from selenium import webdriver\r\n    from selenium.webdriver.common.by import By\r\n    from selenium.webdriver.support.ui import WebDriverWait\r\n    from selenium.webdriver.support import expected_conditions as EC\r\n\r\n    def get_webdriver(width: int = 1600, height: int = 1200):\r\n    try:\r\n        global browser\r\n        if browser is not None:\r\n            return browser\r\n        options = Options()\r\n        options.add_argument(&#39;--headless&#39;)\r\n        options.add_argument(&#39;--width=&#39; + str(width))\r\n        options.add_argument(&#39;--height=&#39; + str(height))\r\n        options.add_argument(&quot;--disable-cache&quot;)\r\n\r\n        profile = webdriver.FirefoxProfile()\r\n        profile.set_preference(&quot;browser.cache.disk.enable&quot;, False)\r\n        profile.set_preference(&quot;browser.cache.memory.enable&quot;, False)\r\n        profile.set_preference(&quot;browser.cache.offline.enable&quot;, False)\r\n        profile.set_preference(&quot;network.http.use-cache&quot;, False)\r\n        options.profile = profile\r\n\r\n        browser = webdriver.Firefox(options=options)\r\n        window_size = browser.execute_script(&quot;&quot;&quot;\r\n        return [window.outerWidth - window.innerWidth + arguments[0],\r\n          window.outerHeight - window.innerHeight + arguments[1]];\r\n        &quot;&quot;&quot;, width, height)\r\n        browser.set_window_size(*window_size)\r\n        return browser\r\n    except Exception as err:\r\n        logging.error(f&quot;Can&#39;t install GeckoDriverManager. Error: {err}&quot;)\r\n\r\nand use browser\r\n\r\n        browser = get_webdriver(width=width, height=height)\r\n        browser.delete_all_cookies()\r\n        browser.get(url)\r\n        wait = WebDriverWait(browser, 10)  # Maximum wait time in seconds\r\n        wait.until(EC.presence_of_element_located((By.TAG_NAME, &#39;body&#39;)))\r\n        await asyncio.sleep(1)\r\n\r\n        png_image = browser.get_screenshot_as_png()","title":"Clear cache before running some Selenium WebDriver tests using Java","body":"<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\n\ndef get_webdriver(width: int = 1600, height: int = 1200):\ntry:\n    global browser\n    if browser is not None:\n        return browser\n    options = Options()\n    options.add_argument('--headless')\n    options.add_argument('--width=' + str(width))\n    options.add_argument('--height=' + str(height))\n    options.add_argument(&quot;--disable-cache&quot;)\n\n    profile = webdriver.FirefoxProfile()\n    profile.set_preference(&quot;browser.cache.disk.enable&quot;, False)\n    profile.set_preference(&quot;browser.cache.memory.enable&quot;, False)\n    profile.set_preference(&quot;browser.cache.offline.enable&quot;, False)\n    profile.set_preference(&quot;network.http.use-cache&quot;, False)\n    options.profile = profile\n\n    browser = webdriver.Firefox(options=options)\n    window_size = browser.execute_script(&quot;&quot;&quot;\n    return [window.outerWidth - window.innerWidth + arguments[0],\n      window.outerHeight - window.innerHeight + arguments[1]];\n    &quot;&quot;&quot;, width, height)\n    browser.set_window_size(*window_size)\n    return browser\nexcept Exception as err:\n    logging.error(f&quot;Can't install GeckoDriverManager. Error: {err}&quot;)\n</code></pre>\n<p>and use browser</p>\n<pre><code>    browser = get_webdriver(width=width, height=height)\n    browser.delete_all_cookies()\n    browser.get(url)\n    wait = WebDriverWait(browser, 10)  # Maximum wait time in seconds\n    wait.until(EC.presence_of_element_located((By.TAG_NAME, 'body')))\n    await asyncio.sleep(1)\n\n    png_image = browser.get_screenshot_as_png()\n</code></pre>\n"}],"owner":{"account_id":6921963,"reputation":783,"user_id":5314309,"accept_rate":6,"display_name":"Uziii"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97364,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"answer_count":9,"score":21,"last_activity_date":1687530481,"creation_date":1444136938,"question_id":32970855,"body_markdown":"I am working on Selenium WebDriver automation in java programming language. In my test suite that initiates the browser window once and perform all the tests. I want to clear the browser cache before running some tests without restarting the browser. Is there any command/function, that can achieve the purpose? Thanks.","title":"Clear cache before running some Selenium WebDriver tests using Java","body":"<p>I am working on Selenium WebDriver automation in java programming language. In my test suite that initiates the browser window once and perform all the tests. I want to clear the browser cache before running some tests without restarting the browser. Is there any command/function, that can achieve the purpose? Thanks.</p>\n"},{"tags":["java","amazon-web-services","spring-boot","terraform","amazon-elastic-beanstalk"],"owner":{"account_id":9363240,"reputation":43,"user_id":6948954,"display_name":"kanhaiyakumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687530266,"creation_date":1687530266,"question_id":76541019,"body_markdown":"I am trying to deploy a Spring Boot application to an Elastic Beanstalk. But the Stack health shows as degraded. While checking the causes I found the error message &quot;Following services are not running: web.&quot;\r\nWhile analyzing the logs I found that the application did not run due to classes not being compatible. Error below: \r\n&quot;web: Exception in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: com/test/reportservice/ReportServiceApplication has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0&quot;\r\n\r\nSo I checked the JVM on the EC2 instance created and found that the default jvm on the instance was Corretto 8. \r\n\r\nmain.tf\r\n```\r\nprovider &quot;aws&quot; {\r\n  region = var.region\r\n}\r\n\r\n/*Retrieve the latest Amazon EC2 AMI id with prefix &quot;Amazon2_x64_BaseImage2&quot; */\r\ndata &quot;aws_ami&quot; &quot;amazon2_baseimage2_ami&quot; {\r\n  most_recent = true\r\n\r\n  filter {\r\n    name   = &quot;name&quot;\r\n    values = [&quot;Amazon2_x64_BaseImage2-*&quot;]\r\n  }\r\n\r\n  filter {\r\n    name   = &quot;root-device-type&quot;\r\n    values = [&quot;ebs&quot;]\r\n  }\r\n\r\n  filter {\r\n    name   = &quot;virtualization-type&quot;\r\n    values = [&quot;hvm&quot;]\r\n  }\r\n}\r\n\r\ndata &quot;aws_s3_bucket&quot; &quot;warranty_solutions_bucket&quot; {\r\n  bucket = &quot;${var.bucket_name}-${var.application_environment}&quot;\r\n}\r\n\r\nlocals {\r\n  date_time = &quot;${formatdate(&quot;YYYYMMDD_hh:mm:ss&quot;, timestamp())}&quot;\r\n\r\n  # EC2 VPC Settings\r\n  ec2_vpc_settings = [\r\n    {\r\n      name  = &quot;VPCId&quot;\r\n      value = var.vpc_id\r\n    },\r\n    {\r\n      name  = &quot;AssociatePublicIpAddress&quot;\r\n      value = &quot;false&quot;\r\n    },\r\n    {\r\n      name  = &quot;Subnets&quot;\r\n      value = join(&quot;,&quot;, var.service_subnets)\r\n    }\r\n  ]\r\n\r\n  # Autoscaling Launch Configuration Settings\r\n  autoscaling_launch_configuration_settings = [\r\n    {\r\n      name  = &quot;SecurityGroups&quot;\r\n      value = join(&quot;,&quot;, var.security_groups)\r\n    },\r\n    {\r\n      name  = &quot;IamInstanceProfile&quot;\r\n      value = var.instance_profile_arn\r\n    },\r\n    {\r\n      name  = &quot;InstanceType&quot;\r\n      value = var.instance_type\r\n    },\r\n    {\r\n      name  = &quot;EC2KeyName&quot;\r\n      value = var.ec2_keypair_name\r\n    },\r\n    {\r\n      name  = &quot;ImageId&quot;\r\n      value = data.aws_ami.amazon2_baseimage2_ami.id // Amazon linux machine image ID\r\n    }\r\n  ]\r\n\r\n  # Settings for beanstalk managed elb only\r\n  beanstalk_elb_settings = [\r\n    {\r\n      namespace = &quot;aws:ec2:vpc&quot;\r\n      name      = &quot;ELBSubnets&quot;\r\n      value     = join(&quot;,&quot;, sort(var.elb_public_subnets))\r\n    },\r\n    {\r\n      namespace = &quot;aws:elasticbeanstalk:environment:process:default&quot;\r\n      name      = &quot;Port&quot;\r\n      value     = var.application_port\r\n    },\r\n    {\r\n      namespace = &quot;aws:elasticbeanstalk:environment:process:default&quot;\r\n      name      = &quot;Protocol&quot;\r\n      value     = var.loadbalancer_type == &quot;network&quot; ? &quot;TCP&quot; : &quot;HTTP&quot;\r\n    },\r\n    {\r\n      namespace = &quot;aws:ec2:vpc&quot;\r\n      name      = &quot;ELBScheme&quot;\r\n      value     = var.elb_scheme\r\n    },\r\n    {\r\n      namespace = &quot;aws:elasticbeanstalk:environment:process:default&quot;\r\n      name      = &quot;HealthCheckPath&quot;\r\n      value     = var.healthcheck_url\r\n    },\r\n    {\r\n      namespace = &quot;aws:elasticbeanstalk:environment:process:default&quot;\r\n      name      = &quot;HealthCheckInterval&quot;\r\n      value     = var.healthcheck_interval\r\n    },\r\n    {\r\n      namespace = &quot;aws:elasticbeanstalk:environment:process:default&quot;\r\n      name      = &quot;HealthyThresholdCount&quot;\r\n      value     = var.healthcheck_healthy_threshold_count\r\n    },\r\n    {\r\n      namespace = &quot;aws:elasticbeanstalk:environment:process:default&quot;\r\n      name      = &quot;UnhealthyThresholdCount&quot;\r\n      value     = var.healthcheck_unhealthy_threshold_count\r\n    }\r\n  ]\r\n  generic_elb_settings = [\r\n    {\r\n      namespace = &quot;aws:elasticbeanstalk:environment&quot;\r\n      name      = &quot;LoadBalancerType&quot;\r\n      value     = var.loadbalancer_type\r\n    }\r\n  ]\r\n  generic_alb_settings = [\r\n    {\r\n      namespace = &quot;aws:elbv2:loadbalancer&quot;\r\n      name      = &quot;SecurityGroups&quot;\r\n      #      value     = join(&quot;,&quot;, sort(local.alb_security_group_list))\r\n      value     = join(&quot;,&quot;, sort(var.alb_security_groups))\r\n      #      value     = &quot;${aws_security_group.ProdReg_DB2_SG.id}, ${join(&quot;,&quot;, ${var.security_groups})}&quot;\r\n    }\r\n  ]\r\n  alb_settings = [\r\n    {\r\n      namespace = &quot;aws:elbv2:listener:default&quot;\r\n      name      = &quot;ListenerEnabled&quot;\r\n      value     = var.enable_http || var.loadbalancer_certificate_arn == &quot;&quot; ? &quot;true&quot; : &quot;false&quot;\r\n    },\r\n    {\r\n      namespace = &quot;aws:elbv2:loadbalancer&quot;\r\n      name      = &quot;ManagedSecurityGroup&quot;\r\n      value     = var.loadbalancer_managed_security_group\r\n    },\r\n    {\r\n      namespace = &quot;aws:elbv2:listener:443&quot;\r\n      name      = &quot;ListenerEnabled&quot;\r\n      value     = var.loadbalancer_certificate_arn == &quot;&quot; ? &quot;false&quot; : &quot;true&quot;\r\n    },\r\n    {\r\n      namespace = &quot;aws:elbv2:listener:443&quot;\r\n      name      = &quot;Protocol&quot;\r\n      value     = &quot;HTTPS&quot;\r\n    },\r\n    {\r\n      namespace = &quot;aws:elbv2:listener:443&quot;\r\n      name      = &quot;SSLCertificateArns&quot;\r\n      value     = var.loadbalancer_certificate_arn\r\n    },\r\n    {\r\n      namespace = &quot;aws:elbv2:listener:443&quot;\r\n      name      = &quot;SSLPolicy&quot;\r\n      value     = var.loadbalancer_type == &quot;application&quot; ? var.loadbalancer_ssl_policy : &quot;&quot;\r\n    },\r\n    {\r\n      namespace = &quot;aws:elasticbeanstalk:environment:process:https&quot;\r\n      name      = &quot;Port&quot;\r\n      value     = var.application_port\r\n    },\r\n    {\r\n      namespace = &quot;aws:elasticbeanstalk:environment:process:https&quot;\r\n      name      = &quot;Protocol&quot;\r\n      value     = &quot;HTTPS&quot;\r\n    },\r\n\r\n    {\r\n      namespace = &quot;aws:elasticbeanstalk:environment:process:https&quot;\r\n      name      = &quot;HealthCheckPath&quot;\r\n      value     = var.healthcheck_url\r\n    },\r\n    {\r\n      namespace = &quot;aws:elasticbeanstalk:environment:process:default&quot;\r\n      name      = &quot;HealthCheckTimeout&quot;\r\n      value     = var.healthcheck_timeout\r\n    }\r\n  ]\r\n  nlb_settings = [\r\n    {\r\n      namespace = &quot;aws:elbv2:listener:default&quot;\r\n      name      = &quot;ListenerEnabled&quot;\r\n      value     = var.enable_http\r\n    },\r\n    {\r\n      namespace = &quot;aws:elasticbeanstalk:environment:process:https&quot;\r\n      name      = &quot;Port&quot;\r\n      value     = var.application_port\r\n    },\r\n    {\r\n      namespace = &quot;aws:elbv2:listener:443&quot;\r\n      name      = &quot;ListenerEnabled&quot;\r\n      value     = var.loadbalancer_certificate_arn == &quot;&quot; ? &quot;false&quot; : &quot;true&quot;\r\n    },\r\n    {\r\n      namespace = &quot;aws:elbv2:listener:443&quot;\r\n      name      = &quot;Protocol&quot;\r\n      value     = &quot;TCP&quot;\r\n    },\r\n    {\r\n      namespace = &quot;aws:elbv2:listener:443&quot;\r\n      name      = &quot;SSLCertificateArns&quot;\r\n      value     = var.loadbalancer_certificate_arn\r\n    },\r\n    {\r\n      namespace = &quot;aws:elbv2:listener:443&quot;\r\n      name      = &quot;SSLPolicy&quot;\r\n      value     = &quot;&quot;\r\n    }\r\n  ]\r\n\r\n  # Select elb configuration depending on loadbalancer_type\r\n  elb_settings_nlb   = var.loadbalancer_type == &quot;network&quot; ? concat(local.nlb_settings, local.generic_elb_settings, local.beanstalk_elb_settings) : []\r\n  elb_settings_alb   = var.loadbalancer_type == &quot;application&quot; ? concat(local.alb_settings, local.generic_alb_settings, local.generic_elb_settings, local.beanstalk_elb_settings) : []\r\n  # If the tier is &quot;WebServer&quot; add the elb_settings, otherwise exclude them\r\n  elb_settings_final = var.tier == &quot;WebServer&quot; ? concat(local.elb_settings_nlb, local.elb_settings_alb) : []\r\n}\r\n\r\n//Within that bucket, we can add the application build file as an object:\r\nresource &quot;aws_s3_object&quot; &quot;wty_report_bucket_object&quot; {\r\n  bucket = data.aws_s3_bucket.warranty_solutions_bucket.id\r\n  key    = &quot;${var.bucket_key}_${local.date_time}.zip&quot;\r\n  source = var.build_source_filename\r\n}\r\n\r\nresource &quot;aws_elastic_beanstalk_application&quot; &quot;wty-report-service-app&quot; {\r\n  name        = var.application_name\r\n  description = var.application_desc\r\n  appversion_lifecycle {\r\n    delete_source_from_s3 = true\r\n    service_role          = var.service_role_arn\r\n    max_count             = 100\r\n  }\r\n  tags = {\r\n    component = var.component\r\n  }\r\n}\r\n\r\n//create a version, In which we can tell AWS where to find our application:\r\nresource &quot;aws_elastic_beanstalk_application_version&quot; &quot;wty_report_service_api_version&quot; {\r\n  application = aws_elastic_beanstalk_application.wty-report-service-app.name\r\n  bucket      = data.aws_s3_bucket.warranty_solutions_bucket.id\r\n  key         = aws_s3_object.wty_report_bucket_object.id\r\n  name        = &quot;build_${local.date_time}&quot;\r\n}\r\nresource &quot;aws_elastic_beanstalk_environment&quot; &quot;wty-report-service-dev&quot; {\r\n  name                = &quot;${var.application_name}-${var.application_environment}&quot;\r\n  application         = aws_elastic_beanstalk_application.wty-report-service-app.name\r\n  /*appversion_lifecycle {\r\n    delete_source_from_s3 = true\r\n    service_role          = var.service_role_arn\r\n    max_count             = 100\r\n  }*/\r\n  solution_stack_name = var.ebs_solution_stack\r\n  version_label       = aws_elastic_beanstalk_application_version.wty_report_service_api_version.name\r\n  tier                = var.tier\r\n\r\n  setting {\r\n    namespace = &quot;aws:elasticbeanstalk:environment:process:default&quot;\r\n    name      = &quot;JavaVersion&quot;\r\n    value     = &quot;11&quot;\r\n  }\r\n\r\n  tags = {\r\n    component  = var.component\r\n    created_by = &quot;Terraform&quot;\r\n  }\r\n\r\n  setting {\r\n    namespace = &quot;aws:elasticbeanstalk:application:environment&quot;\r\n    name      = &quot;SPRING_PROFILES_ACTIVE&quot;\r\n    value     = &quot;devl&quot;\r\n  }\r\n\r\n  setting {\r\n    namespace = &quot;aws:elasticbeanstalk:application:environment&quot;\r\n    name      = &quot;SPRING_CONFIG_NAME&quot;\r\n    value     = &quot;application-devl.properties&quot;\r\n  }\r\n  #---------------------------------\r\n  # Adding EC2 VPC Settings\r\n  #---------------------------------\r\n  dynamic &quot;setting&quot; {\r\n    for_each = local.ec2_vpc_settings\r\n    content {\r\n      namespace = &quot;aws:ec2:vpc&quot;\r\n      name      = setting.value[&quot;name&quot;]\r\n      value     = setting.value[&quot;value&quot;]\r\n    }\r\n  }\r\n\r\n  #---------------------------------------------------\r\n  # Adding Autoscaling: Launch Configuration Settings\r\n  #---------------------------------------------------\r\n  dynamic &quot;setting&quot; {\r\n    for_each = local.autoscaling_launch_configuration_settings\r\n    content {\r\n      namespace = &quot;aws:autoscaling:launchconfiguration&quot;\r\n      name      = setting.value[&quot;name&quot;]\r\n      value     = setting.value[&quot;value&quot;]\r\n    }\r\n  }\r\n\r\n  setting {\r\n    namespace = &quot;aws:ec2:instances&quot;\r\n    name      = &quot;InstanceTypes&quot;\r\n    value     = var.instance_type\r\n  }\r\n\r\n  setting {\r\n    namespace = &quot;aws:autoscaling:asg&quot;\r\n    name      = &quot;Availability Zones&quot;\r\n    value     = &quot;Any 2&quot;\r\n  }\r\n\r\n  setting {\r\n    namespace = &quot;aws:autoscaling:asg&quot;\r\n    name      = &quot;MinSize&quot;\r\n    value     = &quot;1&quot;\r\n  }\r\n\r\n  setting {\r\n    namespace = &quot;aws:autoscaling:asg&quot;\r\n    name      = &quot;MaxSize&quot;\r\n    value     = &quot;2&quot;\r\n  }\r\n\r\n  setting {\r\n    namespace = &quot;aws:elasticbeanstalk:healthreporting:system&quot;\r\n    name      = &quot;SystemType&quot;\r\n    value     = &quot;enhanced&quot;\r\n  }\r\n\r\n  #---------------------------------\r\n  # Adding Autoscaling Update Policy\r\n  #---------------------------------\r\n  dynamic &quot;setting&quot; {\r\n    for_each = var.autoscaling_update_policy\r\n    content {\r\n      namespace = &quot;aws:autoscaling:updatepolicy:rollingupdate&quot;\r\n      name      = setting.key\r\n      value     = setting.value\r\n    }\r\n  }\r\n\r\n  #---------------------------------\r\n  # Adding Elastic Beanstalk Commands\r\n  #---------------------------------\r\n  dynamic &quot;setting&quot; {\r\n    for_each = var.ebs_command_settings\r\n    content {\r\n      namespace = &quot;aws:elasticbeanstalk:command&quot;\r\n      name      = setting.key\r\n      value     = setting.value\r\n    }\r\n  }\r\n\r\n  #---------------------------------\r\n  # Adding Environment variables\r\n  #---------------------------------\r\n  dynamic &quot;setting&quot; {\r\n    for_each = var.env_vars\r\n    content {\r\n      namespace = &quot;aws:elasticbeanstalk:application:environment&quot;\r\n      name      = setting.key\r\n      value     = setting.value\r\n    }\r\n  }\r\n\r\n  ############################################################################\r\n  ##  Sets up Elastic Beanstalk to stream environment health information\r\n  ##  to Amazon CloudWatch Logs.\r\n  ##  Works only for environments that have enhanced health reporting enabled.\r\n  ############################################################################\r\n\r\n  setting {\r\n    namespace = &quot;aws:elasticbeanstalk:healthreporting:system&quot;\r\n    name      = &quot;SystemType&quot;\r\n    value     = &quot;enhanced&quot;\r\n  }\r\n  setting {\r\n    namespace = &quot;aws:elasticbeanstalk:cloudwatch:logs&quot;\r\n    name      = &quot;StreamLogs&quot;\r\n    value     = var.enable_stream_logs ? &quot;true&quot; : &quot;false&quot;\r\n  }\r\n  # DeleteOnTerminate: Delete the log group when the environment is\r\n  # terminated. Default is false. If false, the health data is kept\r\n  # RetentionInDays days.\r\n  setting {\r\n    namespace = &quot;aws:elasticbeanstalk:cloudwatch:logs&quot;\r\n    name      = &quot;DeleteOnTerminate&quot;\r\n    value     = var.logs_delete_on_terminate ? &quot;true&quot; : &quot;false&quot;\r\n  }\r\n  # RetentionInDays: The number of days to keep the archived health data\r\n  # before it expires, if DeleteOnTerminate isn&#39;t set. Default is 7 days.\r\n  setting {\r\n    namespace = &quot;aws:elasticbeanstalk:cloudwatch:logs&quot;\r\n    name      = &quot;RetentionInDays&quot;\r\n    value     = var.logs_retention_in_days\r\n  }\r\n  setting {\r\n    namespace = &quot;aws:elasticbeanstalk:cloudwatch:logs:health&quot;\r\n    name      = &quot;HealthStreamingEnabled&quot;\r\n    value     = true\r\n  }\r\n  setting {\r\n    namespace = &quot;aws:elasticbeanstalk:cloudwatch:logs:health&quot;\r\n    name      = &quot;DeleteOnTerminate&quot;\r\n    value     = var.logs_delete_on_terminate ? &quot;true&quot; : &quot;false&quot;\r\n  }\r\n}\r\n\r\n#-------------------------------------------\r\n# Adding DNS Configuration to Route53 Record\r\n#-------------------------------------------\r\n\r\n#use already available route53 zone\r\ndata &quot;aws_route53_zone&quot; &quot;wty-report-service-route53-hosted-zone&quot; {\r\n  name         = var.hosted_zone_name\r\n  private_zone = false\r\n}\r\n\r\ndata &quot;aws_elastic_beanstalk_hosted_zone&quot; &quot;current&quot; {}\r\n\r\n#create route53 recordset\r\nresource &quot;aws_route53_record&quot; &quot;wty-report-service-apigateway-recordset&quot; {\r\n  zone_id = data.aws_route53_zone.wty-report-service-route53-hosted-zone.zone_id\r\n  name    = var.dns_record_name\r\n  type    = &quot;A&quot;\r\n  alias {\r\n    evaluate_target_health = false\r\n    name    = &quot;${aws_elastic_beanstalk_environment.wty-report-service-dev.cname}&quot;\r\n    zone_id = &quot;${data.aws_elastic_beanstalk_hosted_zone.current.id}&quot;\r\n  }\r\n}\r\n\r\n#-------------------------------------------\r\n# Adding DNS Configuration to Route53 Record\r\n#-------------------------------------------\r\nresource &quot;aws_cloudwatch_metric_alarm&quot; &quot;cpu_utilization&quot; {\r\n  alarm_name                = &quot;${aws_elastic_beanstalk_application.wty-report-service-app.name}-alarm&quot;\r\n  comparison_operator       = &quot;GreaterThanOrEqualToThreshold&quot;\r\n  evaluation_periods        = &quot;2&quot;\r\n  metric_name               = &quot;CPUUtilization&quot;\r\n  namespace                 = &quot;AWS/EC2&quot;\r\n  period                    = &quot;120&quot;\r\n  statistic                 = &quot;Average&quot;\r\n  threshold                 = &quot;80&quot;\r\n  alarm_description         = &quot;This metric monitors ec2 cpu utilization&quot;\r\n  insufficient_data_actions = []\r\n  dimensions = {\r\n    InstanceId = &quot;${aws_elastic_beanstalk_environment.wty-report-service-dev.instances[0]}&quot;\r\n  }\r\n}\r\n```\r\nvariables: \r\n```\r\napplication_name             = &quot;wty-report-service&quot;\r\napplication_desc             = &quot;Service application for Warranty Reports&quot;\r\ncomponent                    = &quot;wtyreports&quot;\r\napplication_environment      = &quot;devl&quot;\r\nbucket_name                  = &quot;aws-wrs&quot;\r\nbucket_key                   = &quot;wty-report/wty-report-service&quot;\r\nvpc_id                       = &quot;vpc-&quot;\r\nservice_subnets              = [&quot;subnet-&quot;, &quot;subnet-&quot;] # Private Service Subnet\r\nelb_public_subnets           = [&quot;subnet-&quot;, &quot;subnet-&quot;] # ELB Public Subnet\r\nsecurity_groups              = [&quot;sg-&quot;, &quot;sg-&quot;, &quot;sg-&quot;] # 80 / 443 / 22\r\nalb_security_groups          = [&quot;sg-&quot;, &quot;sg-&quot;]\r\ninstance_type                = &quot;t2.micro&quot;\r\nec2_keypair_name             = &quot;wty-report-service-key&quot;\r\napplication_port             = &quot;5000&quot;\r\nenable_http                  = false\r\nloadbalancer_type            = &quot;application&quot;\r\nelb_scheme                   = &quot;internet-facing&quot;\r\nhealthcheck_url              = &quot;/WtyReport/health&quot;\r\nloadbalancer_ssl_policy      = &quot;ELBSecurityPolicy-2016-08&quot;\r\nbuild_source_filename        = &quot;../../wty-report-service-build.zip&quot;\r\ntier                         = &quot;WebServer&quot;\r\nautoscaling_update_policy    = {\r\n  RollingUpdateType     = &quot;Health&quot;,\r\n  MinInstancesInService = &quot;1&quot;,\r\n  MaxBatchSize          = &quot;1&quot;,\r\n  RollingUpdateEnabled  = &quot;false&quot;\r\n}\r\nebs_command_settings = {\r\n  BatchSizeType    = &quot;Fixed&quot;,\r\n  BatchSize        = &quot;1&quot;,\r\n  DeploymentPolicy = &quot;Rolling&quot;\r\n}\r\nebs_solution_stack = &quot;64bit Amazon Linux 2 v3.4.8 running Corretto 11&quot;\r\nenv_vars           = {\r\n  &quot;SERVER_PORT&quot; = &quot;5000&quot;,\r\n  &quot;JAVA_HOME&quot;   = &quot;/usr/lib/jvm&quot;\r\n}\r\nenable_stream_logs       = true\r\nlogs_delete_on_terminate = false\r\nlogs_retention_in_days   = 7\r\n\r\ndns_record_name  = &quot;wty-report-service&quot;\r\nhosted_zone_name = &quot;devl-vpn.us.e06.c01.test.com&quot;\r\n```\r\nAm I missing something here?","title":"Elastic Beanstalk is creating instance with default jvm as Corretto 8 with solution stack 64bit Amazon Linux 2 v3.4.8 running Corretto 11","body":"<p>I am trying to deploy a Spring Boot application to an Elastic Beanstalk. But the Stack health shows as degraded. While checking the causes I found the error message &quot;Following services are not running: web.&quot;\nWhile analyzing the logs I found that the application did not run due to classes not being compatible. Error below:\n&quot;web: Exception in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: com/test/reportservice/ReportServiceApplication has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0&quot;</p>\n<p>So I checked the JVM on the EC2 instance created and found that the default jvm on the instance was Corretto 8.</p>\n<p>main.tf</p>\n<pre><code>provider &quot;aws&quot; {\n  region = var.region\n}\n\n/*Retrieve the latest Amazon EC2 AMI id with prefix &quot;Amazon2_x64_BaseImage2&quot; */\ndata &quot;aws_ami&quot; &quot;amazon2_baseimage2_ami&quot; {\n  most_recent = true\n\n  filter {\n    name   = &quot;name&quot;\n    values = [&quot;Amazon2_x64_BaseImage2-*&quot;]\n  }\n\n  filter {\n    name   = &quot;root-device-type&quot;\n    values = [&quot;ebs&quot;]\n  }\n\n  filter {\n    name   = &quot;virtualization-type&quot;\n    values = [&quot;hvm&quot;]\n  }\n}\n\ndata &quot;aws_s3_bucket&quot; &quot;warranty_solutions_bucket&quot; {\n  bucket = &quot;${var.bucket_name}-${var.application_environment}&quot;\n}\n\nlocals {\n  date_time = &quot;${formatdate(&quot;YYYYMMDD_hh:mm:ss&quot;, timestamp())}&quot;\n\n  # EC2 VPC Settings\n  ec2_vpc_settings = [\n    {\n      name  = &quot;VPCId&quot;\n      value = var.vpc_id\n    },\n    {\n      name  = &quot;AssociatePublicIpAddress&quot;\n      value = &quot;false&quot;\n    },\n    {\n      name  = &quot;Subnets&quot;\n      value = join(&quot;,&quot;, var.service_subnets)\n    }\n  ]\n\n  # Autoscaling Launch Configuration Settings\n  autoscaling_launch_configuration_settings = [\n    {\n      name  = &quot;SecurityGroups&quot;\n      value = join(&quot;,&quot;, var.security_groups)\n    },\n    {\n      name  = &quot;IamInstanceProfile&quot;\n      value = var.instance_profile_arn\n    },\n    {\n      name  = &quot;InstanceType&quot;\n      value = var.instance_type\n    },\n    {\n      name  = &quot;EC2KeyName&quot;\n      value = var.ec2_keypair_name\n    },\n    {\n      name  = &quot;ImageId&quot;\n      value = data.aws_ami.amazon2_baseimage2_ami.id // Amazon linux machine image ID\n    }\n  ]\n\n  # Settings for beanstalk managed elb only\n  beanstalk_elb_settings = [\n    {\n      namespace = &quot;aws:ec2:vpc&quot;\n      name      = &quot;ELBSubnets&quot;\n      value     = join(&quot;,&quot;, sort(var.elb_public_subnets))\n    },\n    {\n      namespace = &quot;aws:elasticbeanstalk:environment:process:default&quot;\n      name      = &quot;Port&quot;\n      value     = var.application_port\n    },\n    {\n      namespace = &quot;aws:elasticbeanstalk:environment:process:default&quot;\n      name      = &quot;Protocol&quot;\n      value     = var.loadbalancer_type == &quot;network&quot; ? &quot;TCP&quot; : &quot;HTTP&quot;\n    },\n    {\n      namespace = &quot;aws:ec2:vpc&quot;\n      name      = &quot;ELBScheme&quot;\n      value     = var.elb_scheme\n    },\n    {\n      namespace = &quot;aws:elasticbeanstalk:environment:process:default&quot;\n      name      = &quot;HealthCheckPath&quot;\n      value     = var.healthcheck_url\n    },\n    {\n      namespace = &quot;aws:elasticbeanstalk:environment:process:default&quot;\n      name      = &quot;HealthCheckInterval&quot;\n      value     = var.healthcheck_interval\n    },\n    {\n      namespace = &quot;aws:elasticbeanstalk:environment:process:default&quot;\n      name      = &quot;HealthyThresholdCount&quot;\n      value     = var.healthcheck_healthy_threshold_count\n    },\n    {\n      namespace = &quot;aws:elasticbeanstalk:environment:process:default&quot;\n      name      = &quot;UnhealthyThresholdCount&quot;\n      value     = var.healthcheck_unhealthy_threshold_count\n    }\n  ]\n  generic_elb_settings = [\n    {\n      namespace = &quot;aws:elasticbeanstalk:environment&quot;\n      name      = &quot;LoadBalancerType&quot;\n      value     = var.loadbalancer_type\n    }\n  ]\n  generic_alb_settings = [\n    {\n      namespace = &quot;aws:elbv2:loadbalancer&quot;\n      name      = &quot;SecurityGroups&quot;\n      #      value     = join(&quot;,&quot;, sort(local.alb_security_group_list))\n      value     = join(&quot;,&quot;, sort(var.alb_security_groups))\n      #      value     = &quot;${aws_security_group.ProdReg_DB2_SG.id}, ${join(&quot;,&quot;, ${var.security_groups})}&quot;\n    }\n  ]\n  alb_settings = [\n    {\n      namespace = &quot;aws:elbv2:listener:default&quot;\n      name      = &quot;ListenerEnabled&quot;\n      value     = var.enable_http || var.loadbalancer_certificate_arn == &quot;&quot; ? &quot;true&quot; : &quot;false&quot;\n    },\n    {\n      namespace = &quot;aws:elbv2:loadbalancer&quot;\n      name      = &quot;ManagedSecurityGroup&quot;\n      value     = var.loadbalancer_managed_security_group\n    },\n    {\n      namespace = &quot;aws:elbv2:listener:443&quot;\n      name      = &quot;ListenerEnabled&quot;\n      value     = var.loadbalancer_certificate_arn == &quot;&quot; ? &quot;false&quot; : &quot;true&quot;\n    },\n    {\n      namespace = &quot;aws:elbv2:listener:443&quot;\n      name      = &quot;Protocol&quot;\n      value     = &quot;HTTPS&quot;\n    },\n    {\n      namespace = &quot;aws:elbv2:listener:443&quot;\n      name      = &quot;SSLCertificateArns&quot;\n      value     = var.loadbalancer_certificate_arn\n    },\n    {\n      namespace = &quot;aws:elbv2:listener:443&quot;\n      name      = &quot;SSLPolicy&quot;\n      value     = var.loadbalancer_type == &quot;application&quot; ? var.loadbalancer_ssl_policy : &quot;&quot;\n    },\n    {\n      namespace = &quot;aws:elasticbeanstalk:environment:process:https&quot;\n      name      = &quot;Port&quot;\n      value     = var.application_port\n    },\n    {\n      namespace = &quot;aws:elasticbeanstalk:environment:process:https&quot;\n      name      = &quot;Protocol&quot;\n      value     = &quot;HTTPS&quot;\n    },\n\n    {\n      namespace = &quot;aws:elasticbeanstalk:environment:process:https&quot;\n      name      = &quot;HealthCheckPath&quot;\n      value     = var.healthcheck_url\n    },\n    {\n      namespace = &quot;aws:elasticbeanstalk:environment:process:default&quot;\n      name      = &quot;HealthCheckTimeout&quot;\n      value     = var.healthcheck_timeout\n    }\n  ]\n  nlb_settings = [\n    {\n      namespace = &quot;aws:elbv2:listener:default&quot;\n      name      = &quot;ListenerEnabled&quot;\n      value     = var.enable_http\n    },\n    {\n      namespace = &quot;aws:elasticbeanstalk:environment:process:https&quot;\n      name      = &quot;Port&quot;\n      value     = var.application_port\n    },\n    {\n      namespace = &quot;aws:elbv2:listener:443&quot;\n      name      = &quot;ListenerEnabled&quot;\n      value     = var.loadbalancer_certificate_arn == &quot;&quot; ? &quot;false&quot; : &quot;true&quot;\n    },\n    {\n      namespace = &quot;aws:elbv2:listener:443&quot;\n      name      = &quot;Protocol&quot;\n      value     = &quot;TCP&quot;\n    },\n    {\n      namespace = &quot;aws:elbv2:listener:443&quot;\n      name      = &quot;SSLCertificateArns&quot;\n      value     = var.loadbalancer_certificate_arn\n    },\n    {\n      namespace = &quot;aws:elbv2:listener:443&quot;\n      name      = &quot;SSLPolicy&quot;\n      value     = &quot;&quot;\n    }\n  ]\n\n  # Select elb configuration depending on loadbalancer_type\n  elb_settings_nlb   = var.loadbalancer_type == &quot;network&quot; ? concat(local.nlb_settings, local.generic_elb_settings, local.beanstalk_elb_settings) : []\n  elb_settings_alb   = var.loadbalancer_type == &quot;application&quot; ? concat(local.alb_settings, local.generic_alb_settings, local.generic_elb_settings, local.beanstalk_elb_settings) : []\n  # If the tier is &quot;WebServer&quot; add the elb_settings, otherwise exclude them\n  elb_settings_final = var.tier == &quot;WebServer&quot; ? concat(local.elb_settings_nlb, local.elb_settings_alb) : []\n}\n\n//Within that bucket, we can add the application build file as an object:\nresource &quot;aws_s3_object&quot; &quot;wty_report_bucket_object&quot; {\n  bucket = data.aws_s3_bucket.warranty_solutions_bucket.id\n  key    = &quot;${var.bucket_key}_${local.date_time}.zip&quot;\n  source = var.build_source_filename\n}\n\nresource &quot;aws_elastic_beanstalk_application&quot; &quot;wty-report-service-app&quot; {\n  name        = var.application_name\n  description = var.application_desc\n  appversion_lifecycle {\n    delete_source_from_s3 = true\n    service_role          = var.service_role_arn\n    max_count             = 100\n  }\n  tags = {\n    component = var.component\n  }\n}\n\n//create a version, In which we can tell AWS where to find our application:\nresource &quot;aws_elastic_beanstalk_application_version&quot; &quot;wty_report_service_api_version&quot; {\n  application = aws_elastic_beanstalk_application.wty-report-service-app.name\n  bucket      = data.aws_s3_bucket.warranty_solutions_bucket.id\n  key         = aws_s3_object.wty_report_bucket_object.id\n  name        = &quot;build_${local.date_time}&quot;\n}\nresource &quot;aws_elastic_beanstalk_environment&quot; &quot;wty-report-service-dev&quot; {\n  name                = &quot;${var.application_name}-${var.application_environment}&quot;\n  application         = aws_elastic_beanstalk_application.wty-report-service-app.name\n  /*appversion_lifecycle {\n    delete_source_from_s3 = true\n    service_role          = var.service_role_arn\n    max_count             = 100\n  }*/\n  solution_stack_name = var.ebs_solution_stack\n  version_label       = aws_elastic_beanstalk_application_version.wty_report_service_api_version.name\n  tier                = var.tier\n\n  setting {\n    namespace = &quot;aws:elasticbeanstalk:environment:process:default&quot;\n    name      = &quot;JavaVersion&quot;\n    value     = &quot;11&quot;\n  }\n\n  tags = {\n    component  = var.component\n    created_by = &quot;Terraform&quot;\n  }\n\n  setting {\n    namespace = &quot;aws:elasticbeanstalk:application:environment&quot;\n    name      = &quot;SPRING_PROFILES_ACTIVE&quot;\n    value     = &quot;devl&quot;\n  }\n\n  setting {\n    namespace = &quot;aws:elasticbeanstalk:application:environment&quot;\n    name      = &quot;SPRING_CONFIG_NAME&quot;\n    value     = &quot;application-devl.properties&quot;\n  }\n  #---------------------------------\n  # Adding EC2 VPC Settings\n  #---------------------------------\n  dynamic &quot;setting&quot; {\n    for_each = local.ec2_vpc_settings\n    content {\n      namespace = &quot;aws:ec2:vpc&quot;\n      name      = setting.value[&quot;name&quot;]\n      value     = setting.value[&quot;value&quot;]\n    }\n  }\n\n  #---------------------------------------------------\n  # Adding Autoscaling: Launch Configuration Settings\n  #---------------------------------------------------\n  dynamic &quot;setting&quot; {\n    for_each = local.autoscaling_launch_configuration_settings\n    content {\n      namespace = &quot;aws:autoscaling:launchconfiguration&quot;\n      name      = setting.value[&quot;name&quot;]\n      value     = setting.value[&quot;value&quot;]\n    }\n  }\n\n  setting {\n    namespace = &quot;aws:ec2:instances&quot;\n    name      = &quot;InstanceTypes&quot;\n    value     = var.instance_type\n  }\n\n  setting {\n    namespace = &quot;aws:autoscaling:asg&quot;\n    name      = &quot;Availability Zones&quot;\n    value     = &quot;Any 2&quot;\n  }\n\n  setting {\n    namespace = &quot;aws:autoscaling:asg&quot;\n    name      = &quot;MinSize&quot;\n    value     = &quot;1&quot;\n  }\n\n  setting {\n    namespace = &quot;aws:autoscaling:asg&quot;\n    name      = &quot;MaxSize&quot;\n    value     = &quot;2&quot;\n  }\n\n  setting {\n    namespace = &quot;aws:elasticbeanstalk:healthreporting:system&quot;\n    name      = &quot;SystemType&quot;\n    value     = &quot;enhanced&quot;\n  }\n\n  #---------------------------------\n  # Adding Autoscaling Update Policy\n  #---------------------------------\n  dynamic &quot;setting&quot; {\n    for_each = var.autoscaling_update_policy\n    content {\n      namespace = &quot;aws:autoscaling:updatepolicy:rollingupdate&quot;\n      name      = setting.key\n      value     = setting.value\n    }\n  }\n\n  #---------------------------------\n  # Adding Elastic Beanstalk Commands\n  #---------------------------------\n  dynamic &quot;setting&quot; {\n    for_each = var.ebs_command_settings\n    content {\n      namespace = &quot;aws:elasticbeanstalk:command&quot;\n      name      = setting.key\n      value     = setting.value\n    }\n  }\n\n  #---------------------------------\n  # Adding Environment variables\n  #---------------------------------\n  dynamic &quot;setting&quot; {\n    for_each = var.env_vars\n    content {\n      namespace = &quot;aws:elasticbeanstalk:application:environment&quot;\n      name      = setting.key\n      value     = setting.value\n    }\n  }\n\n  ############################################################################\n  ##  Sets up Elastic Beanstalk to stream environment health information\n  ##  to Amazon CloudWatch Logs.\n  ##  Works only for environments that have enhanced health reporting enabled.\n  ############################################################################\n\n  setting {\n    namespace = &quot;aws:elasticbeanstalk:healthreporting:system&quot;\n    name      = &quot;SystemType&quot;\n    value     = &quot;enhanced&quot;\n  }\n  setting {\n    namespace = &quot;aws:elasticbeanstalk:cloudwatch:logs&quot;\n    name      = &quot;StreamLogs&quot;\n    value     = var.enable_stream_logs ? &quot;true&quot; : &quot;false&quot;\n  }\n  # DeleteOnTerminate: Delete the log group when the environment is\n  # terminated. Default is false. If false, the health data is kept\n  # RetentionInDays days.\n  setting {\n    namespace = &quot;aws:elasticbeanstalk:cloudwatch:logs&quot;\n    name      = &quot;DeleteOnTerminate&quot;\n    value     = var.logs_delete_on_terminate ? &quot;true&quot; : &quot;false&quot;\n  }\n  # RetentionInDays: The number of days to keep the archived health data\n  # before it expires, if DeleteOnTerminate isn't set. Default is 7 days.\n  setting {\n    namespace = &quot;aws:elasticbeanstalk:cloudwatch:logs&quot;\n    name      = &quot;RetentionInDays&quot;\n    value     = var.logs_retention_in_days\n  }\n  setting {\n    namespace = &quot;aws:elasticbeanstalk:cloudwatch:logs:health&quot;\n    name      = &quot;HealthStreamingEnabled&quot;\n    value     = true\n  }\n  setting {\n    namespace = &quot;aws:elasticbeanstalk:cloudwatch:logs:health&quot;\n    name      = &quot;DeleteOnTerminate&quot;\n    value     = var.logs_delete_on_terminate ? &quot;true&quot; : &quot;false&quot;\n  }\n}\n\n#-------------------------------------------\n# Adding DNS Configuration to Route53 Record\n#-------------------------------------------\n\n#use already available route53 zone\ndata &quot;aws_route53_zone&quot; &quot;wty-report-service-route53-hosted-zone&quot; {\n  name         = var.hosted_zone_name\n  private_zone = false\n}\n\ndata &quot;aws_elastic_beanstalk_hosted_zone&quot; &quot;current&quot; {}\n\n#create route53 recordset\nresource &quot;aws_route53_record&quot; &quot;wty-report-service-apigateway-recordset&quot; {\n  zone_id = data.aws_route53_zone.wty-report-service-route53-hosted-zone.zone_id\n  name    = var.dns_record_name\n  type    = &quot;A&quot;\n  alias {\n    evaluate_target_health = false\n    name    = &quot;${aws_elastic_beanstalk_environment.wty-report-service-dev.cname}&quot;\n    zone_id = &quot;${data.aws_elastic_beanstalk_hosted_zone.current.id}&quot;\n  }\n}\n\n#-------------------------------------------\n# Adding DNS Configuration to Route53 Record\n#-------------------------------------------\nresource &quot;aws_cloudwatch_metric_alarm&quot; &quot;cpu_utilization&quot; {\n  alarm_name                = &quot;${aws_elastic_beanstalk_application.wty-report-service-app.name}-alarm&quot;\n  comparison_operator       = &quot;GreaterThanOrEqualToThreshold&quot;\n  evaluation_periods        = &quot;2&quot;\n  metric_name               = &quot;CPUUtilization&quot;\n  namespace                 = &quot;AWS/EC2&quot;\n  period                    = &quot;120&quot;\n  statistic                 = &quot;Average&quot;\n  threshold                 = &quot;80&quot;\n  alarm_description         = &quot;This metric monitors ec2 cpu utilization&quot;\n  insufficient_data_actions = []\n  dimensions = {\n    InstanceId = &quot;${aws_elastic_beanstalk_environment.wty-report-service-dev.instances[0]}&quot;\n  }\n}\n</code></pre>\n<p>variables:</p>\n<pre><code>application_name             = &quot;wty-report-service&quot;\napplication_desc             = &quot;Service application for Warranty Reports&quot;\ncomponent                    = &quot;wtyreports&quot;\napplication_environment      = &quot;devl&quot;\nbucket_name                  = &quot;aws-wrs&quot;\nbucket_key                   = &quot;wty-report/wty-report-service&quot;\nvpc_id                       = &quot;vpc-&quot;\nservice_subnets              = [&quot;subnet-&quot;, &quot;subnet-&quot;] # Private Service Subnet\nelb_public_subnets           = [&quot;subnet-&quot;, &quot;subnet-&quot;] # ELB Public Subnet\nsecurity_groups              = [&quot;sg-&quot;, &quot;sg-&quot;, &quot;sg-&quot;] # 80 / 443 / 22\nalb_security_groups          = [&quot;sg-&quot;, &quot;sg-&quot;]\ninstance_type                = &quot;t2.micro&quot;\nec2_keypair_name             = &quot;wty-report-service-key&quot;\napplication_port             = &quot;5000&quot;\nenable_http                  = false\nloadbalancer_type            = &quot;application&quot;\nelb_scheme                   = &quot;internet-facing&quot;\nhealthcheck_url              = &quot;/WtyReport/health&quot;\nloadbalancer_ssl_policy      = &quot;ELBSecurityPolicy-2016-08&quot;\nbuild_source_filename        = &quot;../../wty-report-service-build.zip&quot;\ntier                         = &quot;WebServer&quot;\nautoscaling_update_policy    = {\n  RollingUpdateType     = &quot;Health&quot;,\n  MinInstancesInService = &quot;1&quot;,\n  MaxBatchSize          = &quot;1&quot;,\n  RollingUpdateEnabled  = &quot;false&quot;\n}\nebs_command_settings = {\n  BatchSizeType    = &quot;Fixed&quot;,\n  BatchSize        = &quot;1&quot;,\n  DeploymentPolicy = &quot;Rolling&quot;\n}\nebs_solution_stack = &quot;64bit Amazon Linux 2 v3.4.8 running Corretto 11&quot;\nenv_vars           = {\n  &quot;SERVER_PORT&quot; = &quot;5000&quot;,\n  &quot;JAVA_HOME&quot;   = &quot;/usr/lib/jvm&quot;\n}\nenable_stream_logs       = true\nlogs_delete_on_terminate = false\nlogs_retention_in_days   = 7\n\ndns_record_name  = &quot;wty-report-service&quot;\nhosted_zone_name = &quot;devl-vpn.us.e06.c01.test.com&quot;\n</code></pre>\n<p>Am I missing something here?</p>\n"},{"tags":["java","android","augmented-reality","arcore"],"answers":[{"tags":[],"owner":{"account_id":12529812,"reputation":585,"user_id":9118474,"display_name":"xFL"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1542979879,"creation_date":1542979879,"answer_id":53447653,"question_id":53446436,"body_markdown":"Take a look at this Github issue: [Can i place a anchor of the object in air instead of plane in ar-core android?][1]\r\n\r\nThis example from the Github issue places an anchor straight in front of the camera 1m away:\r\n\r\n    mAnchors.add(session.createAnchor(\r\n    frame.getCamera().getDisplayOrientedPose()\r\n        .compose(Pose.makeTranslation(0, 0, -1f))\r\n        .extractTranslation()))\r\n\r\nIn the [create Anchor documentation][2] you see, that you only need a pose for creating an anchor.\r\n\r\n\r\n  [1]: https://github.com/google-ar/arcore-android-sdk/issues/110\r\n  [2]: https://developers.google.com/ar/reference/java/com/google/ar/core/Session#createAnchor(com.google.ar.core.Pose)","title":"Android: Need to place a 3D object in AR in surrounding space without surface detection","body":"<p>Take a look at this Github issue: <a href=\"https://github.com/google-ar/arcore-android-sdk/issues/110\" rel=\"nofollow noreferrer\">Can i place a anchor of the object in air instead of plane in ar-core android?</a></p>\n\n<p>This example from the Github issue places an anchor straight in front of the camera 1m away:</p>\n\n<pre><code>mAnchors.add(session.createAnchor(\nframe.getCamera().getDisplayOrientedPose()\n    .compose(Pose.makeTranslation(0, 0, -1f))\n    .extractTranslation()))\n</code></pre>\n\n<p>In the <a href=\"https://developers.google.com/ar/reference/java/com/google/ar/core/Session#createAnchor(com.google.ar.core.Pose)\" rel=\"nofollow noreferrer\">create Anchor documentation</a> you see, that you only need a pose for creating an anchor.</p>\n"}],"owner":{"account_id":14071717,"reputation":446,"user_id":10165076,"display_name":"Harsha Vardhan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1420,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1687530254,"creation_date":1542974798,"question_id":53446436,"body_markdown":"I feel the documentation and the tutorials to the ArCore are not enough and I need to know how I can place an anchor in mid air without the need for surface detection. Most of the source code available on AR core seems to deal with placing objects after surface detection.\r\nI need to know how I can get a Session object, and place an anchor in the mid air as soon as the app opens. I&#39;m currently using Sceneform on top of ARCore\r\n\r\nAm I the only one to feel that the documentation available for ARCore is not enough?","title":"Android: Need to place a 3D object in AR in surrounding space without surface detection","body":"<p>I feel the documentation and the tutorials to the ArCore are not enough and I need to know how I can place an anchor in mid air without the need for surface detection. Most of the source code available on AR core seems to deal with placing objects after surface detection.\nI need to know how I can get a Session object, and place an anchor in the mid air as soon as the app opens. I'm currently using Sceneform on top of ARCore</p>\n\n<p>Am I the only one to feel that the documentation available for ARCore is not enough?</p>\n"},{"tags":["java","spring","spring-boot","maven","maven-resources-plugin"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1611739478,"post_id":65910112,"comment_id":116544793,"body_markdown":"You are filtering items which should not being filtered. Changing the version of the plugin does not help it only covers the issue. Furthermore the exclusion for JUnit Vintage engine is not necessary anymore since Spring Boot 2.4.0. Remove also the versions for things which are handled by Spring Boot... and remove plugin dependencies and remove source/target configuration because you have use `&lt;jave.version&gt;..` ...","body":"You are filtering items which should not being filtered. Changing the version of the plugin does not help it only covers the issue. Furthermore the exclusion for JUnit Vintage engine is not necessary anymore since Spring Boot 2.4.0. Remove also the versions for things which are handled by Spring Boot... and remove plugin dependencies and remove source/target configuration because you have use <code>&lt;jave.version&gt;..</code> ..."},{"owner":{"account_id":6120537,"reputation":11,"user_id":4774202,"display_name":"Bj&#246;rn"},"score":1,"creation_date":1611836688,"post_id":65910112,"comment_id":117469581,"body_markdown":"The solution of @khmarbaise doesn&#39;t work for me. Still the same problem. After some research I found this Issue at the Jira of Maven. I&#39;ll go down to Version 3.1.0 until they fixed it. https://issues.apache.org/jira/projects/MRESOURCES/issues/MRESOURCES-273?filter=allopenissues To wich I came through this issue:\nhttps://github.com/spring-projects/spring-boot/issues/24346","body":"The solution of @khmarbaise doesn&#39;t work for me. Still the same problem. After some research I found this Issue at the Jira of Maven. I&#39;ll go down to Version 3.1.0 until they fixed it. <a href=\"https://issues.apache.org/jira/projects/MRESOURCES/issues/MRESOURCES-273?filter=allopenissues\" rel=\"nofollow noreferrer\">issues.apache.org/jira/projects/MRESOURCES/issues/&hellip;</a> To wich I came through this issue: <a href=\"https://github.com/spring-projects/spring-boot/issues/24346\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/issues/24346</a>"},{"owner":{"account_id":150404,"reputation":42099,"user_id":363573,"accept_rate":97,"display_name":"Stephan"},"score":0,"creation_date":1613479152,"post_id":65910112,"comment_id":117082068,"body_markdown":"see also: https://issues.apache.org/jira/projects/MRESOURCES/issues/MRESOURCES-273?filter=allopenissues","body":"see also: <a href=\"https://issues.apache.org/jira/projects/MRESOURCES/issues/MRESOURCES-273?filter=allopenissues\" rel=\"nofollow noreferrer\">issues.apache.org/jira/projects/MRESOURCES/issues/&hellip;</a>"},{"owner":{"account_id":150404,"reputation":42099,"user_id":363573,"accept_rate":97,"display_name":"Stephan"},"score":0,"creation_date":1613479214,"post_id":65910112,"comment_id":117082106,"body_markdown":"@khmarbaise I&#39;m facing the same issue in my project and *only* text files are filtered. The project doesn&#39;t use Spring neither.","body":"@khmarbaise I&#39;m facing the same issue in my project and <i>only</i> text files are filtered. The project doesn&#39;t use Spring neither."},{"owner":{"account_id":1851020,"reputation":4117,"user_id":1677594,"display_name":"Guillaume Husta"},"score":0,"creation_date":1654006041,"post_id":65910112,"comment_id":127985901,"body_markdown":"Since maven-resources-plugin 3.2.0, setting the value of `propertiesEncoding` can fix the problem for properties files filtered. See : https://maven.apache.org/plugins/maven-resources-plugin/examples/filtering-properties-files.html","body":"Since maven-resources-plugin 3.2.0, setting the value of <code>propertiesEncoding</code> can fix the problem for properties files filtered. See : <a href=\"https://maven.apache.org/plugins/maven-resources-plugin/examples/filtering-properties-files.html\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-resources-plugin/examples/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":3366819,"reputation":2646,"user_id":2827181,"display_name":"Marc Le Bihan"},"down_vote_count":6,"up_vote_count":138,"is_accepted":true,"score":132,"last_activity_date":1661486184,"creation_date":1611700118,"answer_id":65910205,"question_id":65910112,"body_markdown":"It might be a new bug coming with some latest release of _Spring-boot_ (and then : _Spring_).\r\n\r\nI had it. The workaround is to put in your `pom.xml` this corrected dependency :\r\n\r\n```xml\r\n&lt;!-- Pour contourner un bug &#224; la g&#233;n&#233;ration par Spring-boot 2.4.x : \r\nFailed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources (default-resources) on project application-etude: Input length = 1 --&gt;        \t\t\r\n&lt;plugin&gt;\r\n\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n\t&lt;version&gt;3.1.0&lt;/version&gt;\r\n&lt;/plugin&gt;        \t\t\r\n```\r\n\r\nBut this is a temporary workaround to &#39;save you&#39; at the time the trouble fall upon you.\r\n\r\nThe way to correct the trouble correctly is to ensure that your `properties` files are now correctly encoded in UTF-8. \r\n\r\nBecause the underlying cause that makes this problem appearing is the presence of &quot;junk chars&quot; replacing accented characters when ISO-8859-1 (or other) properties files are considered as UTF-8 ones by _Spring_, while they aren&#39;t.","title":"Maven clean install: Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources","body":"<p>It might be a new bug coming with some latest release of <em>Spring-boot</em> (and then : <em>Spring</em>).</p>\n<p>I had it. The workaround is to put in your <code>pom.xml</code> this corrected dependency :</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- Pour contourner un bug à la génération par Spring-boot 2.4.x : \nFailed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources (default-resources) on project application-etude: Input length = 1 --&gt;               \n&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.1.0&lt;/version&gt;\n&lt;/plugin&gt;               \n</code></pre>\n<p>But this is a temporary workaround to 'save you' at the time the trouble fall upon you.</p>\n<p>The way to correct the trouble correctly is to ensure that your <code>properties</code> files are now correctly encoded in UTF-8.</p>\n<p>Because the underlying cause that makes this problem appearing is the presence of &quot;junk chars&quot; replacing accented characters when ISO-8859-1 (or other) properties files are considered as UTF-8 ones by <em>Spring</em>, while they aren't.</p>\n"},{"tags":[],"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"down_vote_count":3,"up_vote_count":52,"is_accepted":false,"score":49,"last_activity_date":1611823214,"creation_date":1611823214,"answer_id":65933628,"question_id":65910112,"body_markdown":"The root cause of the exception is that some resources contain resources which should not filtered (aka binary). The correct solution is to define an exclude for file extensions which should not filtered [like the following][1]:\r\n\r\n&lt;!-- language: language-xml --&gt;\r\n\r\n    &lt;project&gt;\r\n      ...\r\n      &lt;build&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n            &lt;configuration&gt;\r\n              &lt;nonFilteredFileExtensions&gt;\r\n                &lt;nonFilteredFileExtension&gt;pdf&lt;/nonFilteredFileExtension&gt;\r\n                &lt;nonFilteredFileExtension&gt;swf&lt;/nonFilteredFileExtension&gt;\r\n              &lt;/nonFilteredFileExtensions&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n        ...\r\n      &lt;/build&gt;\r\n      ...\r\n    &lt;/project&gt;\r\n\r\n\r\n[1]: https://maven.apache.org/plugins/maven-resources-plugin/examples/binaries-filtering.html","title":"Maven clean install: Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources","body":"<p>The root cause of the exception is that some resources contain resources which should not filtered (aka binary). The correct solution is to define an exclude for file extensions which should not filtered <a href=\"https://maven.apache.org/plugins/maven-resources-plugin/examples/binaries-filtering.html\" rel=\"noreferrer\">like the following</a>:</p>\n<pre><code>&lt;project&gt;\n  ...\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n          &lt;nonFilteredFileExtensions&gt;\n            &lt;nonFilteredFileExtension&gt;pdf&lt;/nonFilteredFileExtension&gt;\n            &lt;nonFilteredFileExtension&gt;swf&lt;/nonFilteredFileExtension&gt;\n          &lt;/nonFilteredFileExtensions&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n    ...\n  &lt;/build&gt;\n  ...\n&lt;/project&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":969373,"reputation":732,"user_id":992201,"display_name":"TahitianGabriel"},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1615862777,"creation_date":1615862777,"answer_id":66648426,"question_id":65910112,"body_markdown":"I had the same problem and fixed it by adding in the pom.xml :\r\n\r\n    &lt;properties&gt;\r\n    \t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\nHere is the comment that help me solved the problem :\r\nhttps://github.com/spring-projects/spring-boot/issues/24346#issuecomment-740345146","title":"Maven clean install: Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources","body":"<p>I had the same problem and fixed it by adding in the pom.xml :</p>\n<pre><code>&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n&lt;/properties&gt;\n</code></pre>\n<p>Here is the comment that help me solved the problem :\n<a href=\"https://github.com/spring-projects/spring-boot/issues/24346#issuecomment-740345146\" rel=\"noreferrer\">https://github.com/spring-projects/spring-boot/issues/24346#issuecomment-740345146</a></p>\n"},{"tags":[],"owner":{"account_id":4782509,"reputation":125,"user_id":3863859,"display_name":"Asif Iquebal Ajazi"},"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1621444227,"creation_date":1621444227,"answer_id":67607851,"question_id":65910112,"body_markdown":"I faced the same issue, and fixed it using the below changes in my pom.xml build plugin.\r\n\r\n```\r\n&lt;project&gt;\r\n...\r\n\t&lt;build&gt;\r\n\t    &lt;plugins&gt;\r\n\t        &lt;plugin&gt;\r\n\t            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t        &lt;/plugin&gt;\r\n\t        &lt;plugin&gt;\r\n\t            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t            &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n\t            &lt;version&gt;3.1.0&lt;/version&gt;\r\n\t        &lt;/plugin&gt;\r\n\t    &lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n&lt;/project&gt;\r\n```","title":"Maven clean install: Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources","body":"<p>I faced the same issue, and fixed it using the below changes in my pom.xml build plugin.</p>\n<pre><code>&lt;project&gt;\n...\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1.0&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13087247,"reputation":506,"user_id":9455871,"display_name":"Charles Tempo"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1624000503,"creation_date":1624000503,"answer_id":68030881,"question_id":65910112,"body_markdown":"Some of your resources contains a character not in the ISO-8859-1 codepage, and this can cause disturbance here:\r\n\r\n       at java.io.Reader.read (Reader.java:229)\r\n       at org.apache.maven.shared.utils.io.IOUtil.copy (IOUtil.java:199)\r\n\r\nA typical error might be an accentuated character in a .properties file.","title":"Maven clean install: Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources","body":"<p>Some of your resources contains a character not in the ISO-8859-1 codepage, and this can cause disturbance here:</p>\n<pre><code>   at java.io.Reader.read (Reader.java:229)\n   at org.apache.maven.shared.utils.io.IOUtil.copy (IOUtil.java:199)\n</code></pre>\n<p>A typical error might be an accentuated character in a .properties file.</p>\n"},{"tags":[],"owner":{"account_id":10792264,"reputation":15,"user_id":7939345,"display_name":"Mark"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1628202906,"creation_date":1628202906,"answer_id":68674201,"question_id":65910112,"body_markdown":"I think you are defining *application.property* and *application.yml* at the same time. If you want to use both of them, please try plug the *maven-resources-plugin*","title":"Maven clean install: Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources","body":"<p>I think you are defining <em>application.property</em> and <em>application.yml</em> at the same time. If you want to use both of them, please try plug the <em>maven-resources-plugin</em></p>\n"},{"tags":[],"owner":{"account_id":6583222,"reputation":351,"user_id":5086860,"display_name":"henriquefalc"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1629898291,"creation_date":1629898291,"answer_id":68923894,"question_id":65910112,"body_markdown":"In my case, the error happened because I had properties files encoded with ANSI, while maven was trying to use UTF-8. I fixed it by converting my properties files to UTF-8, and then running `mvn clean compile`.","title":"Maven clean install: Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources","body":"<p>In my case, the error happened because I had properties files encoded with ANSI, while maven was trying to use UTF-8. I fixed it by converting my properties files to UTF-8, and then running <code>mvn clean compile</code>.</p>\n"},{"tags":[],"owner":{"account_id":345995,"reputation":6762,"user_id":679240,"accept_rate":61,"display_name":"Haroldo_OK"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1634236844,"creation_date":1634236844,"answer_id":69575799,"question_id":65910112,"body_markdown":"In my case, the error was due to accents on &quot;application.properties&quot;\r\n\r\nIt would certainly be far easier to fix such errors if the tool simply gave a message saying that a certain file contains invalid characters...\r\n\r\nFor the record, the relevant log part, after running `mvn clean package -e -X`, was this one: \r\n\r\n```\r\n[DEBUG] Using &#39;UTF-8&#39; encoding to copy filtered resource &#39;application.properties&#39;.\r\n[DEBUG] filtering D:\\Java\\PreVendaAPI\\src\\main\\resources\\application.properties to D:\\Java\\PreVendaAPI\\target\\classes\\application.properties\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n```","title":"Maven clean install: Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources","body":"<p>In my case, the error was due to accents on &quot;application.properties&quot;</p>\n<p>It would certainly be far easier to fix such errors if the tool simply gave a message saying that a certain file contains invalid characters...</p>\n<p>For the record, the relevant log part, after running <code>mvn clean package -e -X</code>, was this one:</p>\n<pre><code>[DEBUG] Using 'UTF-8' encoding to copy filtered resource 'application.properties'.\n[DEBUG] filtering D:\\Java\\PreVendaAPI\\src\\main\\resources\\application.properties to D:\\Java\\PreVendaAPI\\target\\classes\\application.properties\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22423675,"reputation":1,"user_id":16630608,"display_name":"Sushant Maddeshiya"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1669824300,"creation_date":1634549903,"answer_id":69613859,"question_id":65910112,"body_markdown":"\t\r\n\r\n    &lt;properties&gt;\r\n    \t\t&lt;java.version&gt;13&lt;/java.version&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8 &lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\t\r\n\r\nUse this in pom.xml file that will definetly work. \r\n\r\n*Caution this syntax only works from java version 13 and later Use the previous syntax, if you are using older java versions\r\n\r\n    &lt;properties&gt;\r\n    \t\t&lt;maven.compiler.target&gt;13&lt;/maven.compiler.target&gt;\r\n    \t\t&lt;maven.compiler.source&gt;13&lt;/maven.compiler.source&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;","title":"Maven clean install: Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources","body":"<pre><code>&lt;properties&gt;\n        &lt;java.version&gt;13&lt;/java.version&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8 &lt;/project.build.sourceEncoding&gt;\n&lt;/properties&gt;\n</code></pre>\n<p>Use this in pom.xml file that will definetly work.</p>\n<p>*Caution this syntax only works from java version 13 and later Use the previous syntax, if you are using older java versions</p>\n<pre><code>&lt;properties&gt;\n        &lt;maven.compiler.target&gt;13&lt;/maven.compiler.target&gt;\n        &lt;maven.compiler.source&gt;13&lt;/maven.compiler.source&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n&lt;/properties&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17544797,"reputation":21,"user_id":12726314,"display_name":"Anri Unis"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1638365784,"creation_date":1638361661,"answer_id":70184201,"question_id":65910112,"body_markdown":"You need exclude binary resourses.\r\n```\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;3.2.0&lt;/version&gt;\r\n    &lt;configuration&gt;\r\n        &lt;propertiesEncoding&gt;UTF-8&lt;/propertiesEncoding&gt;\r\n        &lt;nonFilteredFileExtensions&gt;\r\n            &lt;nonFilteredFileExtension&gt;xls&lt;/nonFilteredFileExtension&gt;\r\n            &lt;nonFilteredFileExtension&gt;xlsx&lt;/nonFilteredFileExtension&gt;\r\n        &lt;/nonFilteredFileExtensions&gt;\r\n    &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```","title":"Maven clean install: Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources","body":"<p>You need exclude binary resourses.</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.2.0&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;propertiesEncoding&gt;UTF-8&lt;/propertiesEncoding&gt;\n        &lt;nonFilteredFileExtensions&gt;\n            &lt;nonFilteredFileExtension&gt;xls&lt;/nonFilteredFileExtension&gt;\n            &lt;nonFilteredFileExtension&gt;xlsx&lt;/nonFilteredFileExtension&gt;\n        &lt;/nonFilteredFileExtensions&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23988877,"reputation":41,"user_id":17975331,"display_name":"Damian"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1642603283,"creation_date":1642603283,"answer_id":70772590,"question_id":65910112,"body_markdown":"I had the same error. After removing german umlauts (&#39;&#252;&#39;) from comments in my propertie files, they should be filtered, the problem is gone!","title":"Maven clean install: Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources","body":"<p>I had the same error. After removing german umlauts ('ü') from comments in my propertie files, they should be filtered, the problem is gone!</p>\n"},{"tags":[],"owner":{"account_id":21489082,"reputation":419,"user_id":15835162,"display_name":"Garikina Rajesh"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1646578065,"creation_date":1646578065,"answer_id":71371297,"question_id":65910112,"body_markdown":"Using this dependency solved this problem of mine\r\n\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.2.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n","title":"Maven clean install: Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources","body":"<p>Using this dependency solved this problem of mine</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.2.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":140076,"reputation":14954,"user_id":346112,"accept_rate":97,"display_name":"Jim Tough"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1650981229,"creation_date":1650981229,"answer_id":72015195,"question_id":65910112,"body_markdown":"The problem is with the maven-resources-plugin. Newer versions of this plugin are less lenient than the older versions. Unfortunately, the error message that is displayed when the Maven build fails (Input length = 1) is only helpful if you recognize it from previous experience with character set problems in Java.\r\n\r\nYou can add some options to the Maven build command so it will display DEBUG level output and a full stacktrace on build failures. Try this as your first step in diagnosing the root cause:\r\n\r\n    mvn -e -X clean test\r\n\r\nIt will output a LOT of info to the console during the build with these options turned on. Just wait until the failure happens and check the end of the console output. You should see a full stacktrace at the end that will make more sense. Just before the stacktrace, you should also see the name of the file in your project that caused the error. For me, I saw output like this:\r\n\r\n    directory C:\\GITROOT\\conndev\\repos\\conn-lamp-server\\src\\test\\resources\r\n    excludes []\r\n    includes []\r\n    [DEBUG] ignoreDelta true\r\n    [INFO] Copying 3 resources\r\n    [DEBUG] Copying file application-inttest.properties\r\n    [DEBUG] file application-inttest.properties has a filtered file extension\r\n    [DEBUG] Using &#39;UTF-8&#39; encoding to copy filtered resource &#39;application-inttest.properties&#39;.\r\n    [DEBUG] filtering C:\\GITROOT\\conndev\\repos\\conn-lamp-server\\src\\test\\resources\\application-inttest.properties to C:\\GITROOT\\conndev\\repos\\conn-lamp-server\\target\\test-classes\\application-inttest.properties\r\n    [DEBUG] Copying file DummyExcelFile.xls\r\n    [DEBUG] file DummyExcelFile.xls has a filtered file extension\r\n    [DEBUG] Using &#39;UTF-8&#39; encoding to copy filtered resource &#39;DummyExcelFile.xls&#39;.\r\n    [DEBUG] filtering C:\\GITROOT\\conndev\\repos\\conn-lamp-server\\src\\test\\resources\\DummyExcelFile.xls to C:\\GITROOT\\conndev\\repos\\conn-lamp-server\\target\\test-classes\\DummyExcelFile.xls\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time:  37.927 s\r\n    [INFO] Finished at: 2022-04-26T10:11:09-03:00\r\n    [INFO] ------------------------------------------------------------------------\r\n\r\nNow I know that a file in my test resources directory was the problem:\r\n\r\n    src\\test\\resources\\DummyExcelFile.xls\r\n\r\nOlder versions of the resources plugin must have been quietly suppressing the problem. I won&#39;t include the full stacktrace here, but this is the important line from the stacktrace:\r\n\r\n    Caused by: java.nio.charset.MalformedInputException: Input length = 1\r\n\r\nI&#39;ve seen this before. It happens when a text file cannot be read by a Java &#39;reader&#39; class because the file contains one or more characters that are invalid for the character set used by the reader. In my case, it was trying to read a binary file as text, so that was never going to work! The same problem could happen if you have a text file that contains unusual characters (such as those from European languages with accents) and those characters are not valid for the character set you are using (such as UTF-8). All these problems can be solved with some POM configuration.\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;propertiesEncoding&gt;UTF-8&lt;/propertiesEncoding&gt;\r\n\t\t\t\t\t&lt;nonFilteredFileExtensions&gt;\r\n\t\t\t\t\t\t&lt;nonFilteredFileExtension&gt;xls&lt;/nonFilteredFileExtension&gt;\r\n\t\t\t\t\t\t&lt;nonFilteredFileExtension&gt;zip&lt;/nonFilteredFileExtension&gt;\r\n\t\t\t\t\t&lt;/nonFilteredFileExtensions&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\nIf you are using a different character set from UTF-8, just substitute yours in the XML snippet above. Do the same for any file extensions that you want the maven-resource-plugin to ignore when it does filtering.\r\n\r\nNote that I have intentionally omitted the `&lt;version&gt;` for the maven-resources-plugin block above. This is because I am using the `spring-boot-starter-parent` in my POM and the version of many dependencies is inherited from the parent. If you do not use a parent, then you will have to explicitly set the version you want to use.","title":"Maven clean install: Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources","body":"<p>The problem is with the maven-resources-plugin. Newer versions of this plugin are less lenient than the older versions. Unfortunately, the error message that is displayed when the Maven build fails (Input length = 1) is only helpful if you recognize it from previous experience with character set problems in Java.</p>\n<p>You can add some options to the Maven build command so it will display DEBUG level output and a full stacktrace on build failures. Try this as your first step in diagnosing the root cause:</p>\n<pre><code>mvn -e -X clean test\n</code></pre>\n<p>It will output a LOT of info to the console during the build with these options turned on. Just wait until the failure happens and check the end of the console output. You should see a full stacktrace at the end that will make more sense. Just before the stacktrace, you should also see the name of the file in your project that caused the error. For me, I saw output like this:</p>\n<pre><code>directory C:\\GITROOT\\conndev\\repos\\conn-lamp-server\\src\\test\\resources\nexcludes []\nincludes []\n[DEBUG] ignoreDelta true\n[INFO] Copying 3 resources\n[DEBUG] Copying file application-inttest.properties\n[DEBUG] file application-inttest.properties has a filtered file extension\n[DEBUG] Using 'UTF-8' encoding to copy filtered resource 'application-inttest.properties'.\n[DEBUG] filtering C:\\GITROOT\\conndev\\repos\\conn-lamp-server\\src\\test\\resources\\application-inttest.properties to C:\\GITROOT\\conndev\\repos\\conn-lamp-server\\target\\test-classes\\application-inttest.properties\n[DEBUG] Copying file DummyExcelFile.xls\n[DEBUG] file DummyExcelFile.xls has a filtered file extension\n[DEBUG] Using 'UTF-8' encoding to copy filtered resource 'DummyExcelFile.xls'.\n[DEBUG] filtering C:\\GITROOT\\conndev\\repos\\conn-lamp-server\\src\\test\\resources\\DummyExcelFile.xls to C:\\GITROOT\\conndev\\repos\\conn-lamp-server\\target\\test-classes\\DummyExcelFile.xls\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  37.927 s\n[INFO] Finished at: 2022-04-26T10:11:09-03:00\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n<p>Now I know that a file in my test resources directory was the problem:</p>\n<pre><code>src\\test\\resources\\DummyExcelFile.xls\n</code></pre>\n<p>Older versions of the resources plugin must have been quietly suppressing the problem. I won't include the full stacktrace here, but this is the important line from the stacktrace:</p>\n<pre><code>Caused by: java.nio.charset.MalformedInputException: Input length = 1\n</code></pre>\n<p>I've seen this before. It happens when a text file cannot be read by a Java 'reader' class because the file contains one or more characters that are invalid for the character set used by the reader. In my case, it was trying to read a binary file as text, so that was never going to work! The same problem could happen if you have a text file that contains unusual characters (such as those from European languages with accents) and those characters are not valid for the character set you are using (such as UTF-8). All these problems can be solved with some POM configuration.</p>\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;propertiesEncoding&gt;UTF-8&lt;/propertiesEncoding&gt;\n                &lt;nonFilteredFileExtensions&gt;\n                    &lt;nonFilteredFileExtension&gt;xls&lt;/nonFilteredFileExtension&gt;\n                    &lt;nonFilteredFileExtension&gt;zip&lt;/nonFilteredFileExtension&gt;\n                &lt;/nonFilteredFileExtensions&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n<p>If you are using a different character set from UTF-8, just substitute yours in the XML snippet above. Do the same for any file extensions that you want the maven-resource-plugin to ignore when it does filtering.</p>\n<p>Note that I have intentionally omitted the <code>&lt;version&gt;</code> for the maven-resources-plugin block above. This is because I am using the <code>spring-boot-starter-parent</code> in my POM and the version of many dependencies is inherited from the parent. If you do not use a parent, then you will have to explicitly set the version you want to use.</p>\n"},{"tags":[],"owner":{"account_id":14057566,"reputation":1,"user_id":10154503,"display_name":"g.chataing"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1651233696,"creation_date":1651233696,"answer_id":72057667,"question_id":65910112,"body_markdown":"I had the same error when writing non utf-8 characters in a comment in application.properties file. I deleted those characters and it&#39;s working !","title":"Maven clean install: Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources","body":"<p>I had the same error when writing non utf-8 characters in a comment in application.properties file. I deleted those characters and it's working !</p>\n"},{"tags":[],"owner":{"account_id":1132853,"reputation":2896,"user_id":1118527,"accept_rate":83,"display_name":"Lama"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1653995590,"creation_date":1653995590,"answer_id":72446764,"question_id":65910112,"body_markdown":"This message came up today, here is what I did to resolve it:\r\n\r\nI used mvn to analyze the resources like this:\r\n\r\n    mvn -X process-test-resources\r\n\r\nThis way mvn returned the name of the file wich was causing the error:\r\n\r\n    [DEBUG] filtering .../messages.properties\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time:  x\r\n    [INFO] Finished at: y\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources (default-resources) on foo: Input length = 1 -&gt; \r\n\r\n\r\nTurned out messages.properties contained special chars which had not been escaped properly. So I escaped them in the i18n-file and after that I was able to build again.","title":"Maven clean install: Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources","body":"<p>This message came up today, here is what I did to resolve it:</p>\n<p>I used mvn to analyze the resources like this:</p>\n<pre><code>mvn -X process-test-resources\n</code></pre>\n<p>This way mvn returned the name of the file wich was causing the error:</p>\n<pre><code>[DEBUG] filtering .../messages.properties\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  x\n[INFO] Finished at: y\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources (default-resources) on foo: Input length = 1 -&gt; \n</code></pre>\n<p>Turned out messages.properties contained special chars which had not been escaped properly. So I escaped them in the i18n-file and after that I was able to build again.</p>\n"},{"tags":[],"owner":{"account_id":25624577,"reputation":11,"user_id":19395860,"display_name":"Laura Suzany"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1656348436,"creation_date":1655953249,"answer_id":72724066,"question_id":65910112,"body_markdown":"I Belive that error heppens because have some problems of compatibility\r\nR: The possible solution is to insert this plugin in `pom.xml`\r\n\r\n```xml\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;3.1.0&lt;/version&gt;\r\n&lt;/plugin&gt;\r\n```","title":"Maven clean install: Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources","body":"<p>I Belive that error heppens because have some problems of compatibility\nR: The possible solution is to insert this plugin in <code>pom.xml</code></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.1.0&lt;/version&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10400096,"reputation":27,"user_id":7668673,"display_name":"uchpochmak"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1656485126,"creation_date":1656110773,"answer_id":72750033,"question_id":65910112,"body_markdown":"For me stopping the server helped\r\n\r\n    (On Windows 10) npx kill-port your_port","title":"Maven clean install: Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources","body":"<p>For me stopping the server helped</p>\n<pre><code>(On Windows 10) npx kill-port your_port\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2343390,"reputation":242,"user_id":2054206,"display_name":"eidottermihi"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1659425491,"creation_date":1659425491,"answer_id":73203599,"question_id":65910112,"body_markdown":"By default, maven-resources-plugin uses `project.build.sourceEncoding` when filtering resources (which defaults to `UTF-8`).\r\n\r\nThe java standard for `.properties` files requires `ISO-8859-1` encoding.\r\n\r\nTo resolve this, you can explicitely configure how `.properties` Files should be filtered:\r\n\r\n```xml\r\n&lt;plugin&gt;\r\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n  &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n  &lt;version&gt;3.2.0&lt;/version&gt;\r\n  &lt;configuration&gt;\r\n    &lt;propertiesEncoding&gt;ISO-8859-1&lt;/propertiesEncoding&gt;\r\n  &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nThis is also described in the official documentation of the plugin: https://maven.apache.org/plugins/maven-resources-plugin/examples/filtering-properties-files.html","title":"Maven clean install: Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources","body":"<p>By default, maven-resources-plugin uses <code>project.build.sourceEncoding</code> when filtering resources (which defaults to <code>UTF-8</code>).</p>\n<p>The java standard for <code>.properties</code> files requires <code>ISO-8859-1</code> encoding.</p>\n<p>To resolve this, you can explicitely configure how <code>.properties</code> Files should be filtered:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n  &lt;version&gt;3.2.0&lt;/version&gt;\n  &lt;configuration&gt;\n    &lt;propertiesEncoding&gt;ISO-8859-1&lt;/propertiesEncoding&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>This is also described in the official documentation of the plugin: <a href=\"https://maven.apache.org/plugins/maven-resources-plugin/examples/filtering-properties-files.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/plugins/maven-resources-plugin/examples/filtering-properties-files.html</a></p>\n"},{"tags":[],"owner":{"account_id":1382680,"reputation":3298,"user_id":1315357,"accept_rate":46,"display_name":"jnemecz"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1687529677,"creation_date":1687529677,"answer_id":76540943,"question_id":65910112,"body_markdown":"This error occured when I put this comment in `application.properties` file:\r\n\r\n    0.075 = &#177; 7,5%","title":"Maven clean install: Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources","body":"<p>This error occured when I put this comment in <code>application.properties</code> file:</p>\n<pre><code>0.075 = ± 7,5%\n</code></pre>\n"}],"owner":{"account_id":12014098,"reputation":836,"user_id":8789802,"display_name":"CodingStudent"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":172119,"favorite_count":0,"down_vote_count":0,"up_vote_count":68,"accepted_answer_id":65910205,"answer_count":19,"score":68,"last_activity_date":1687529677,"creation_date":1611699587,"question_id":65910112,"body_markdown":"I don&#180;t know what&#180;s the problem. Trying to install maven for a college project. I already installed maven as instructed [here][1]. [Picture Environmental Variables][2], [maven version in cmd][3]  And I also tried to delete the .m2 file. When I try to install maven over the plugin in InteliJ, I get the message: &quot;process terminated&quot; with no extra info. Then I tried to install over the terminal with mvn clean install and i got this. \r\n```E:\\Code Practices\\sprinttool\\sprinttool&gt;mvn clean install\r\n[INFO] Scanning for projects...\r\n[WARNING]\r\n[WARNING] Some problems were encountered while building the effective model for com.college:sprinttool:jar:0.0.1-SNAPSHOT\r\n[WARNING] &#39;dependencies.dependency.(groupId:artifactId:type:classifier)&#39; must be unique: org.springframework.boot:spring-boot-starter-data-jpa:jar -&gt; duplicate declaration of version (?) @ line 50, column 15\r\n[WARNING] &#39;dependencies.dependency.(groupId:artifactId:type:classifier)&#39; must be unique: org.springframework.boot:spring-boot-starter-test:jar -&gt; duplicate declaration of version (?) @ line 55, column 15\r\n[WARNING]\r\n[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.\r\n[WARNING]\r\n[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.\r\n[WARNING]\r\n[INFO]\r\n[INFO] -------------------&lt; com.college:sprinttool &gt;--------------------\r\n[INFO] Building sprinttool 0.0.1-SNAPSHOT\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO]\r\n[INFO] --- maven-clean-plugin:3.1.0:clean (default-clean) @ sprinttool ---\r\n[INFO] Deleting E:\\Code Practices\\sprinttool\\sprinttool\\target\r\n[INFO]\r\n[INFO] --- maven-resources-plugin:3.2.0:resources (default-resources) @ sprinttool ---\r\n[INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.\r\n[INFO] Using &#39;UTF-8&#39; encoding to copy filtered properties files.\r\n[INFO] Copying 1 resource\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  0.740 s\r\n[INFO] Finished at: 2021-01-26T22:56:19+01:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources (default-resources) on project sprinttool: Input length = 1 -&gt; [Help 1]\r\n[ERROR]\r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR]\r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n``` \r\nThen I ran &quot;mvn clean install -X&quot; for more Information and it gives out this in addition. \r\n```org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources (default-resources) on project sprintplanningtool: Input length = 1\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:64)\r\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:564)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\nCaused by: org.apache.maven.plugin.MojoExecutionException: Input length = 1\r\n    at org.apache.maven.plugins.resources.ResourcesMojo.execute (ResourcesMojo.java:362)\r\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:64)\r\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:564)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\nCaused by: org.apache.maven.shared.filtering.MavenFilteringException: Input length = 1\r\n    at org.apache.maven.shared.filtering.DefaultMavenFileFilter.copyFile (DefaultMavenFileFilter.java:113)\r\n    at org.apache.maven.shared.filtering.DefaultMavenResourcesFiltering.filterResources (DefaultMavenResourcesFiltering.java:262)\r\n    at org.apache.maven.plugins.resources.ResourcesMojo.execute (ResourcesMojo.java:356)\r\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:64)\r\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:564)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\nCaused by: java.nio.charset.MalformedInputException: Input length = 1\r\n    at java.nio.charset.CoderResult.throwException (CoderResult.java:274)\r\n    at sun.nio.cs.StreamDecoder.implRead (StreamDecoder.java:352)\r\n    at sun.nio.cs.StreamDecoder.read (StreamDecoder.java:188)\r\n    at java.io.InputStreamReader.read (InputStreamReader.java:181)\r\n    at java.io.BufferedReader.read1 (BufferedReader.java:210)\r\n    at java.io.BufferedReader.read (BufferedReader.java:287)\r\n    at java.io.BufferedReader.fill (BufferedReader.java:161)\r\n    at java.io.BufferedReader.read (BufferedReader.java:182)\r\n    at org.apache.maven.shared.filtering.BoundedReader.read (BoundedReader.java:85)\r\n    at org.apache.maven.shared.filtering.MultiDelimiterInterpolatorFilterReaderLineEnding.read (MultiDelimiterInterpolatorFilterReaderLineEnding.java:235)\r\n    at org.apache.maven.shared.filtering.MultiDelimiterInterpolatorFilterReaderLineEnding.read (MultiDelimiterInterpolatorFilterReaderLineEnding.java:197)\r\n    at java.io.Reader.read (Reader.java:229)\r\n    at org.apache.maven.shared.utils.io.IOUtil.copy (IOUtil.java:199)\r\n    at org.apache.maven.shared.utils.io.IOUtil.copy (IOUtil.java:181)\r\n    at org.apache.maven.shared.utils.io.FileUtils.copyFile (FileUtils.java:1908)\r\n    at org.apache.maven.shared.filtering.DefaultMavenFileFilter.copyFile (DefaultMavenFileFilter.java:98)\r\n    at org.apache.maven.shared.filtering.DefaultMavenResourcesFiltering.filterResources (DefaultMavenResourcesFiltering.java:262)\r\n    at org.apache.maven.plugins.resources.ResourcesMojo.execute (ResourcesMojo.java:356)\r\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:64)\r\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:564)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n[ERROR]\r\n[ERROR]\r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n```  \r\nI honestly have no clue what it is telling me. Is it because there is something wrong with my pom.xml? Pls help me! Thank you in advance.\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.4.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.college&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;sprinttool&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;sprintplanningtool&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;15&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!--dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.6.3&lt;/version&gt;\r\n\t\t&lt;/dependency--&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;exclusions&gt;\r\n\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n\t\t\t&lt;/exclusion&gt;\r\n\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!--dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.el&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;javax.el-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t&lt;/dependency--&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-bom&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.3.3.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!--dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;6.0.2.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-validator-annotation-processor&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;6.0.2.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.glassfish.web&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;javax.el&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.2.6&lt;/version&gt;\r\n\t\t&lt;/dependency--&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;source&gt;10&lt;/source&gt;\r\n\t\t\t\t\t&lt;target&gt;10&lt;/target&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\nEdit: I used the spring boot intitializer to create the project.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/10649707/maven-mvn-command-not-found\r\n  [2]: https://i.stack.imgur.com/ARiCg.png\r\n  [3]: https://i.stack.imgur.com/WiIoG.png","title":"Maven clean install: Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources","body":"<p>I don´t know what´s the problem. Trying to install maven for a college project. I already installed maven as instructed <a href=\"https://stackoverflow.com/questions/10649707/maven-mvn-command-not-found\">here</a>. <a href=\"https://i.stack.imgur.com/ARiCg.png\" rel=\"noreferrer\">Picture Environmental Variables</a>, <a href=\"https://i.stack.imgur.com/WiIoG.png\" rel=\"noreferrer\">maven version in cmd</a>  And I also tried to delete the .m2 file. When I try to install maven over the plugin in InteliJ, I get the message: &quot;process terminated&quot; with no extra info. Then I tried to install over the terminal with mvn clean install and i got this.</p>\n<pre><code>[INFO] Scanning for projects...\n[WARNING]\n[WARNING] Some problems were encountered while building the effective model for com.college:sprinttool:jar:0.0.1-SNAPSHOT\n[WARNING] 'dependencies.dependency.(groupId:artifactId:type:classifier)' must be unique: org.springframework.boot:spring-boot-starter-data-jpa:jar -&gt; duplicate declaration of version (?) @ line 50, column 15\n[WARNING] 'dependencies.dependency.(groupId:artifactId:type:classifier)' must be unique: org.springframework.boot:spring-boot-starter-test:jar -&gt; duplicate declaration of version (?) @ line 55, column 15\n[WARNING]\n[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.\n[WARNING]\n[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.\n[WARNING]\n[INFO]\n[INFO] -------------------&lt; com.college:sprinttool &gt;--------------------\n[INFO] Building sprinttool 0.0.1-SNAPSHOT\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO]\n[INFO] --- maven-clean-plugin:3.1.0:clean (default-clean) @ sprinttool ---\n[INFO] Deleting E:\\Code Practices\\sprinttool\\sprinttool\\target\n[INFO]\n[INFO] --- maven-resources-plugin:3.2.0:resources (default-resources) @ sprinttool ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] Using 'UTF-8' encoding to copy filtered properties files.\n[INFO] Copying 1 resource\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  0.740 s\n[INFO] Finished at: 2021-01-26T22:56:19+01:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources (default-resources) on project sprinttool: Input length = 1 -&gt; [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\n</code></pre>\n<p>Then I ran &quot;mvn clean install -X&quot; for more Information and it gives out this in addition.</p>\n<pre><code>    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:64)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:564)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\nCaused by: org.apache.maven.plugin.MojoExecutionException: Input length = 1\n    at org.apache.maven.plugins.resources.ResourcesMojo.execute (ResourcesMojo.java:362)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:64)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:564)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\nCaused by: org.apache.maven.shared.filtering.MavenFilteringException: Input length = 1\n    at org.apache.maven.shared.filtering.DefaultMavenFileFilter.copyFile (DefaultMavenFileFilter.java:113)\n    at org.apache.maven.shared.filtering.DefaultMavenResourcesFiltering.filterResources (DefaultMavenResourcesFiltering.java:262)\n    at org.apache.maven.plugins.resources.ResourcesMojo.execute (ResourcesMojo.java:356)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:64)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:564)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\nCaused by: java.nio.charset.MalformedInputException: Input length = 1\n    at java.nio.charset.CoderResult.throwException (CoderResult.java:274)\n    at sun.nio.cs.StreamDecoder.implRead (StreamDecoder.java:352)\n    at sun.nio.cs.StreamDecoder.read (StreamDecoder.java:188)\n    at java.io.InputStreamReader.read (InputStreamReader.java:181)\n    at java.io.BufferedReader.read1 (BufferedReader.java:210)\n    at java.io.BufferedReader.read (BufferedReader.java:287)\n    at java.io.BufferedReader.fill (BufferedReader.java:161)\n    at java.io.BufferedReader.read (BufferedReader.java:182)\n    at org.apache.maven.shared.filtering.BoundedReader.read (BoundedReader.java:85)\n    at org.apache.maven.shared.filtering.MultiDelimiterInterpolatorFilterReaderLineEnding.read (MultiDelimiterInterpolatorFilterReaderLineEnding.java:235)\n    at org.apache.maven.shared.filtering.MultiDelimiterInterpolatorFilterReaderLineEnding.read (MultiDelimiterInterpolatorFilterReaderLineEnding.java:197)\n    at java.io.Reader.read (Reader.java:229)\n    at org.apache.maven.shared.utils.io.IOUtil.copy (IOUtil.java:199)\n    at org.apache.maven.shared.utils.io.IOUtil.copy (IOUtil.java:181)\n    at org.apache.maven.shared.utils.io.FileUtils.copyFile (FileUtils.java:1908)\n    at org.apache.maven.shared.filtering.DefaultMavenFileFilter.copyFile (DefaultMavenFileFilter.java:98)\n    at org.apache.maven.shared.filtering.DefaultMavenResourcesFiltering.filterResources (DefaultMavenResourcesFiltering.java:262)\n    at org.apache.maven.plugins.resources.ResourcesMojo.execute (ResourcesMojo.java:356)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:64)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:564)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\n[ERROR]\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\n</code></pre>\n<p>I honestly have no clue what it is telling me. Is it because there is something wrong with my pom.xml? Pls help me! Thank you in advance.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.4.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.college&lt;/groupId&gt;\n    &lt;artifactId&gt;sprinttool&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;sprintplanningtool&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;15&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;!--dependency&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.6.3&lt;/version&gt;\n        &lt;/dependency--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n                &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n        &lt;!--dependency&gt;\n            &lt;groupId&gt;javax.el&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.el-api&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency--&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-bom&lt;/artifactId&gt;\n            &lt;version&gt;5.3.3.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!--dependency&gt;\n            &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n            &lt;version&gt;6.0.2.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-validator-annotation-processor&lt;/artifactId&gt;\n            &lt;version&gt;6.0.2.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.web&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.el&lt;/artifactId&gt;\n            &lt;version&gt;2.2.6&lt;/version&gt;\n        &lt;/dependency--&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;10&lt;/source&gt;\n                    &lt;target&gt;10&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Edit: I used the spring boot intitializer to create the project.</p>\n"},{"tags":["java","classloader"],"comments":[{"owner":{"account_id":23699,"reputation":5769,"user_id":59572,"display_name":"Fredrik"},"score":0,"creation_date":1301175883,"post_id":5445511,"comment_id":6168495,"body_markdown":"If I were you, I would rephrase the question a bit to avoid having it closed as a duplicate of http://stackoverflow.com/questions/5444246","body":"If I were you, I would rephrase the question a bit to avoid having it closed as a duplicate of <a href=\"http://stackoverflow.com/questions/5444246\">stackoverflow.com/questions/5444246</a>"},{"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"score":0,"creation_date":1301186312,"post_id":5445511,"comment_id":6169802,"body_markdown":"This is against the specifications and can lead to some complications if you don&#39;t pay attention to which classes are where, but there is nothing hindering you. **What was your question, again**?","body":"This is against the specifications and can lead to some complications if you don&#39;t pay attention to which classes are where, but there is nothing hindering you. <b>What was your question, again</b>?"},{"owner":{"account_id":85878,"reputation":44865,"user_id":239168,"accept_rate":87,"display_name":"Eran Medan"},"score":1,"creation_date":1301188011,"post_id":5445511,"comment_id":6169963,"body_markdown":"@Fredrik - I know, I wrote it, but the other question was - &quot;How to create a class loader that doesn&#39;t delegate to the parent&quot;, I got the answer, but realized that for what I need, I need to do a parent-last, e.g. one that *does* delegate to the parent, but only after searching the child, e.g. current. Just like WebLogic does, and any decent multiple application container. E.g. WebLogic uses Xerces version X but I like version Y, so WebLogic doing parent-last is again the specifications? Please provide a reference that confirms that, I&#39;d like to ask IBM&#39;s tech support what they make of it.","body":"@Fredrik - I know, I wrote it, but the other question was - &quot;How to create a class loader that doesn&#39;t delegate to the parent&quot;, I got the answer, but realized that for what I need, I need to do a parent-last, e.g. one that <i>does</i> delegate to the parent, but only after searching the child, e.g. current. Just like WebLogic does, and any decent multiple application container. E.g. WebLogic uses Xerces version X but I like version Y, so WebLogic doing parent-last is again the specifications? Please provide a reference that confirms that, I&#39;d like to ask IBM&#39;s tech support what they make of it."},{"owner":{"account_id":85878,"reputation":44865,"user_id":239168,"accept_rate":87,"display_name":"Eran Medan"},"score":0,"creation_date":1301193548,"post_id":5445511,"comment_id":6170439,"body_markdown":"Is stackoverflow only for jQuery and .NET questions? Or is this question so niche that it get&#39;s no interest? How come philosophical questions on SO such as &quot;When good programmers go bad!&quot; gets thousands of hits where this question, that seems to have no definite or complete answer anywhere gets so little traffic? (or I&#39;m using the wrong keywords) it seems to be the first result on google for parent-first classloader! I&#39;m starting to think I&#39;m missing something big, or no one has this problem because I&#39;m doing it all wrong in the first place... troubling...","body":"Is stackoverflow only for jQuery and .NET questions? Or is this question so niche that it get&#39;s no interest? How come philosophical questions on SO such as &quot;When good programmers go bad!&quot; gets thousands of hits where this question, that seems to have no definite or complete answer anywhere gets so little traffic? (or I&#39;m using the wrong keywords) it seems to be the first result on google for parent-first classloader! I&#39;m starting to think I&#39;m missing something big, or no one has this problem because I&#39;m doing it all wrong in the first place... troubling..."},{"owner":{"account_id":44736,"reputation":98412,"user_id":131433,"accept_rate":76,"display_name":"bmargulies"},"score":2,"creation_date":1301194344,"post_id":5445511,"comment_id":6170520,"body_markdown":"Feeling a bit impatient? Some of us do things on Saturday evening other than wait around for you to clarify a question.","body":"Feeling a bit impatient? Some of us do things on Saturday evening other than wait around for you to clarify a question."},{"owner":{"account_id":85878,"reputation":44865,"user_id":239168,"accept_rate":87,"display_name":"Eran Medan"},"score":0,"creation_date":1301198879,"post_id":5445511,"comment_id":6170851,"body_markdown":"Better than answering questions on StackOverflow? I can&#39;t imagine :) \nSo double my gratitude for clarifying your answer on saturday night nevertheless!","body":"Better than answering questions on StackOverflow? I can&#39;t imagine :)  So double my gratitude for clarifying your answer on saturday night nevertheless!"},{"owner":{"account_id":23699,"reputation":5769,"user_id":59572,"display_name":"Fredrik"},"score":1,"creation_date":1301215567,"post_id":5445511,"comment_id":6172163,"body_markdown":"@Eran Medan I know you wrote it, that&#39;s why I suggested clarifying what you are after. There are ways to do things like this but all they ways I&#39;ve done it has had drawbacks I don&#39;t like recommending. I agree you should look at something like Tomcat which needs to do this in order to reload jsp and servlets but you IMHO should ask yourself first if you&#39;re heading down the right path or if you can avoid this.","body":"@Eran Medan I know you wrote it, that&#39;s why I suggested clarifying what you are after. There are ways to do things like this but all they ways I&#39;ve done it has had drawbacks I don&#39;t like recommending. I agree you should look at something like Tomcat which needs to do this in order to reload jsp and servlets but you IMHO should ask yourself first if you&#39;re heading down the right path or if you can avoid this."},{"owner":{"account_id":147441,"reputation":2640,"user_id":358562,"display_name":"Angel O&#39;Sphere"},"score":0,"creation_date":1306493856,"post_id":5445511,"comment_id":7143946,"body_markdown":"The question does not really make sense. This does not look like a classlaoder problem but just like a classpath problem. How can you laod &quot;the wrong Xerxes classes?&quot; Just remove the wrong ones from your classpath. THIS is why there is no &quot;traffic&quot; as you say so ;D","body":"The question does not really make sense. This does not look like a classlaoder problem but just like a classpath problem. How can you laod &quot;the wrong Xerxes classes?&quot; Just remove the wrong ones from your classpath. THIS is why there is no &quot;traffic&quot; as you say so ;D"}],"answers":[{"tags":[],"owner":{"account_id":44736,"reputation":98412,"user_id":131433,"accept_rate":76,"display_name":"bmargulies"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1551288688,"creation_date":1301179116,"answer_id":5445821,"question_id":5445511,"body_markdown":"By reading the source code of either Jetty or Tomcat, both of which provide parent-last class loaders to implement webapp semantics.\r\n\r\nhttps://github.com/apache/tomcat/blob/7.0.93/java/org/apache/catalina/loader/WebappClassLoaderBase.java\r\n\r\nWhich is to say, by overriding the `findClass` method in your `ClassLoader` class. But why reinvent the wheel when you can steal it?\r\n\r\nReading your various updates, I see that you ran into some classic problems with the XML SPI system. \r\n\r\nThe general problem is this: if you create a completely isolated class loader, then it&#39;s hard to use the objects it returns. If you allow sharing, you can have problems when the parent contains the wrong versions of things.\r\n\r\nIt is to deal with all this lunacy that OSGi was invented, but that&#39;s a big pill to swallow.\r\n\r\nEven in webapps, the class loaders exempt some packages from the &#39;local-first&#39; processing on the assumption that the container and the webapp have to agree on the API between them.\r\n\r\n","title":"How do I create a parent-last / child-first ClassLoader in Java, or How to override an old Xerces version that was already loaded in the parent CL?","body":"<p>By reading the source code of either Jetty or Tomcat, both of which provide parent-last class loaders to implement webapp semantics.</p>\n\n<p><a href=\"https://github.com/apache/tomcat/blob/7.0.93/java/org/apache/catalina/loader/WebappClassLoaderBase.java\" rel=\"nofollow noreferrer\">https://github.com/apache/tomcat/blob/7.0.93/java/org/apache/catalina/loader/WebappClassLoaderBase.java</a></p>\n\n<p>Which is to say, by overriding the <code>findClass</code> method in your <code>ClassLoader</code> class. But why reinvent the wheel when you can steal it?</p>\n\n<p>Reading your various updates, I see that you ran into some classic problems with the XML SPI system. </p>\n\n<p>The general problem is this: if you create a completely isolated class loader, then it's hard to use the objects it returns. If you allow sharing, you can have problems when the parent contains the wrong versions of things.</p>\n\n<p>It is to deal with all this lunacy that OSGi was invented, but that's a big pill to swallow.</p>\n\n<p>Even in webapps, the class loaders exempt some packages from the 'local-first' processing on the assumption that the container and the webapp have to agree on the API between them.</p>\n"},{"tags":[],"owner":{"account_id":72732,"reputation":9868,"user_id":209856,"accept_rate":80,"display_name":"karoberts"},"down_vote_count":1,"up_vote_count":38,"is_accepted":true,"score":37,"last_activity_date":1377642551,"creation_date":1301190334,"answer_id":5446671,"question_id":5445511,"body_markdown":"Today is your lucky day, as I had to solve this exact problem.  I warn you though, the innards of class loading are a scary place.  Doing this makes me think that the designers of Java never imagined that you might want to have a parent-last classloader.\r\n\r\nTo use just supply a list of URLs containing classes or jars to be available in the child classloader.\r\n\r\n    /**\r\n     * A parent-last classloader that will try the child classloader first and then the parent.\r\n     * This takes a fair bit of doing because java really prefers parent-first.\r\n     * \r\n     * For those not familiar with class loading trickery, be wary\r\n     */\r\n    private static class ParentLastURLClassLoader extends ClassLoader \r\n    {\r\n        private ChildURLClassLoader childClassLoader;\r\n        \r\n        /**\r\n         * This class allows me to call findClass on a classloader\r\n         */\r\n        private static class FindClassClassLoader extends ClassLoader\r\n        {\r\n            public FindClassClassLoader(ClassLoader parent)\r\n            {\r\n                super(parent);\r\n            }\r\n            \r\n            @Override\r\n            public Class&lt;?&gt; findClass(String name) throws ClassNotFoundException\r\n            {\r\n                return super.findClass(name);\r\n            }\r\n        }\r\n        \r\n        /**\r\n         * This class delegates (child then parent) for the findClass method for a URLClassLoader.\r\n         * We need this because findClass is protected in URLClassLoader\r\n         */\r\n        private static class ChildURLClassLoader extends URLClassLoader\r\n        {\r\n            private FindClassClassLoader realParent;\r\n            \r\n            public ChildURLClassLoader( URL[] urls, FindClassClassLoader realParent )\r\n            {\r\n                super(urls, null);\r\n                \r\n                this.realParent = realParent;\r\n            }\r\n            \r\n            @Override\r\n            public Class&lt;?&gt; findClass(String name) throws ClassNotFoundException\r\n            {\r\n                try\r\n                {\r\n                    // first try to use the URLClassLoader findClass\r\n                    return super.findClass(name);\r\n                }\r\n                catch( ClassNotFoundException e )\r\n                {\r\n                    // if that fails, we ask our real parent classloader to load the class (we give up)\r\n                    return realParent.loadClass(name);\r\n                }\r\n            }\r\n        }\r\n        \r\n        public ParentLastURLClassLoader(List&lt;URL&gt; classpath)\r\n        {\r\n            super(Thread.currentThread().getContextClassLoader());\r\n            \r\n            URL[] urls = classpath.toArray(new URL[classpath.size()]);\r\n            \r\n            childClassLoader = new ChildURLClassLoader( urls, new FindClassClassLoader(this.getParent()) );\r\n        }\r\n        \r\n        @Override\r\n        protected synchronized Class&lt;?&gt; loadClass(String name, boolean resolve) throws ClassNotFoundException\r\n        {\r\n            try\r\n            {\r\n                // first we try to find a class inside the child classloader\r\n                return childClassLoader.findClass(name);\r\n            }\r\n            catch( ClassNotFoundException e )\r\n            {\r\n                // didn&#39;t find it, try the parent\r\n                return super.loadClass(name, resolve);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n**EDIT**: Sergio and ɹoƃı have pointed out that if you call `.loadClass` with the same classname, you will get a LinkageError.  While this is true, the normal use-case for this classloader is to set it as the thread&#39;s classloader `Thread.currentThread().setContextClassLoader()` or via `Class.forName()`, and that works as-is.\r\n\r\nHowever, if `.loadClass()` was needed directly, this code could be added in the ChildURLClassLoader findClass method at the top.\r\n\r\n                    Class&lt;?&gt; loaded = super.findLoadedClass(name);\r\n                    if( loaded != null )\r\n                        return loaded;","title":"How do I create a parent-last / child-first ClassLoader in Java, or How to override an old Xerces version that was already loaded in the parent CL?","body":"<p>Today is your lucky day, as I had to solve this exact problem.  I warn you though, the innards of class loading are a scary place.  Doing this makes me think that the designers of Java never imagined that you might want to have a parent-last classloader.</p>\n\n<p>To use just supply a list of URLs containing classes or jars to be available in the child classloader.</p>\n\n<pre><code>/**\n * A parent-last classloader that will try the child classloader first and then the parent.\n * This takes a fair bit of doing because java really prefers parent-first.\n * \n * For those not familiar with class loading trickery, be wary\n */\nprivate static class ParentLastURLClassLoader extends ClassLoader \n{\n    private ChildURLClassLoader childClassLoader;\n\n    /**\n     * This class allows me to call findClass on a classloader\n     */\n    private static class FindClassClassLoader extends ClassLoader\n    {\n        public FindClassClassLoader(ClassLoader parent)\n        {\n            super(parent);\n        }\n\n        @Override\n        public Class&lt;?&gt; findClass(String name) throws ClassNotFoundException\n        {\n            return super.findClass(name);\n        }\n    }\n\n    /**\n     * This class delegates (child then parent) for the findClass method for a URLClassLoader.\n     * We need this because findClass is protected in URLClassLoader\n     */\n    private static class ChildURLClassLoader extends URLClassLoader\n    {\n        private FindClassClassLoader realParent;\n\n        public ChildURLClassLoader( URL[] urls, FindClassClassLoader realParent )\n        {\n            super(urls, null);\n\n            this.realParent = realParent;\n        }\n\n        @Override\n        public Class&lt;?&gt; findClass(String name) throws ClassNotFoundException\n        {\n            try\n            {\n                // first try to use the URLClassLoader findClass\n                return super.findClass(name);\n            }\n            catch( ClassNotFoundException e )\n            {\n                // if that fails, we ask our real parent classloader to load the class (we give up)\n                return realParent.loadClass(name);\n            }\n        }\n    }\n\n    public ParentLastURLClassLoader(List&lt;URL&gt; classpath)\n    {\n        super(Thread.currentThread().getContextClassLoader());\n\n        URL[] urls = classpath.toArray(new URL[classpath.size()]);\n\n        childClassLoader = new ChildURLClassLoader( urls, new FindClassClassLoader(this.getParent()) );\n    }\n\n    @Override\n    protected synchronized Class&lt;?&gt; loadClass(String name, boolean resolve) throws ClassNotFoundException\n    {\n        try\n        {\n            // first we try to find a class inside the child classloader\n            return childClassLoader.findClass(name);\n        }\n        catch( ClassNotFoundException e )\n        {\n            // didn't find it, try the parent\n            return super.loadClass(name, resolve);\n        }\n    }\n}\n</code></pre>\n\n<p><strong>EDIT</strong>: Sergio and ɹoƃı have pointed out that if you call <code>.loadClass</code> with the same classname, you will get a LinkageError.  While this is true, the normal use-case for this classloader is to set it as the thread's classloader <code>Thread.currentThread().setContextClassLoader()</code> or via <code>Class.forName()</code>, and that works as-is.</p>\n\n<p>However, if <code>.loadClass()</code> was needed directly, this code could be added in the ChildURLClassLoader findClass method at the top.</p>\n\n<pre><code>                Class&lt;?&gt; loaded = super.findLoadedClass(name);\n                if( loaded != null )\n                    return loaded;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":85878,"reputation":44865,"user_id":239168,"accept_rate":87,"display_name":"Eran Medan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1301212178,"creation_date":1301193302,"answer_id":5446847,"question_id":5445511,"body_markdown":"(see at the bottom for an update on a solution I found)\r\n\r\nIt seems that AntClassLoader has a support for parent first/last, (didn&#39;t test it yet)\r\n\r\nhttp://svn.apache.org/repos/asf/ant/core/trunk/src/main/org/apache/tools/ant/AntClassLoader.java\r\n\r\nHere is a snippet\r\n\r\n    /**\r\n     * Creates a classloader for the given project using the classpath given.\r\n     *\r\n     * @param parent The parent classloader to which unsatisfied loading\r\n     *               attempts are delegated. May be &lt;code&gt;null&lt;/code&gt;,\r\n     *               in which case the classloader which loaded this\r\n     *               class is used as the parent.\r\n     * @param project The project to which this classloader is to belong.\r\n     *                Must not be &lt;code&gt;null&lt;/code&gt;.\r\n     * @param classpath the classpath to use to load the classes.\r\n     *                  May be &lt;code&gt;null&lt;/code&gt;, in which case no path\r\n     *                  elements are set up to start with.\r\n     * @param parentFirst If &lt;code&gt;true&lt;/code&gt;, indicates that the parent\r\n     *                    classloader should be consulted  before trying to\r\n     *                    load the a class through this loader.\r\n     */\r\n    public AntClassLoader(\r\n        ClassLoader parent, Project project, Path classpath, boolean parentFirst) {\r\n        this(project, classpath);\r\n        if (parent != null) {\r\n            setParent(parent);\r\n        }\r\n        setParentFirst(parentFirst);\r\n        addJavaLibraries();\r\n    }\r\n\r\n\r\n**Update:**\r\n\r\nFound [this][1] as well, when as a last resort I started guessing class names in google (this is what ChildFirstURLClassLoader produced) - but it seems to be incorrect\r\n\r\n**Update 2:**\r\n\r\nThe 1st Option (AntClassLoader) is very coupled to Ant (requires a Project context and not easy to pass a `URL[]` to it\r\n\r\nThe 2nd Option (from an [OSGI project in google code][2]) wasn&#39;t quite what I needed as it searched parent classloader before the system classloader (Ant class loader does it correctly by the way). The problem as I see it, think that your parent classloader includes a jar (that it shouldn&#39;t have) of a functionality that wasn&#39;t on JDK 1.4 but was added in 1.5, this has no harm as the parent last class loader (regular delegation model, e.g. URLClassLoader) will always load first the JDK&#39;s classes, but here the child first naive implementation seems to unveil the old, redundant jar in the parent class loader, shadowing the JDK / JRE own implementation. \r\n\r\nI have yet to find a certified, fully tested, mature Parent Last / Child First correct implementation that is not coupled to a specific solution (Ant, Catalina/Tomcat) \r\n\r\n\r\n**Update 3 - I found it!** \r\nI WAS looking in the wrong place, \r\n\r\nAll I did was add `META-INF/services/javax.xml.transform.TransformerFactory` and restored the JDK&#39;s `com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl` instead of the old Xalan&#39;s `org.apache.xalan.processor.TransformerFactoryImpl`\r\n \r\nThe only reason I don&#39;t &quot;accept my own answer&quot; yet, is that I don&#39;t know if the `META-INF/services` approach has the same classloader delegation as regular classes (e.g. is it parent-first / child-last or parent-last / child-first?)\r\n\r\n\r\n  [1]: http://code.google.com/p/osgigroup/source/browse/trunk/equinox_headless_launcher/src/launcher/ChildFirstClassLoader.java?spec=svn7&amp;r=7\r\n  [2]: http://code.google.com/p/osgigroup/source/browse/trunk/equinox_headless_launcher/src/launcher/ChildFirstClassLoader.java?spec=svn7&amp;r=7","title":"How do I create a parent-last / child-first ClassLoader in Java, or How to override an old Xerces version that was already loaded in the parent CL?","body":"<p>(see at the bottom for an update on a solution I found)</p>\n\n<p>It seems that AntClassLoader has a support for parent first/last, (didn't test it yet)</p>\n\n<p><a href=\"http://svn.apache.org/repos/asf/ant/core/trunk/src/main/org/apache/tools/ant/AntClassLoader.java\" rel=\"nofollow\">http://svn.apache.org/repos/asf/ant/core/trunk/src/main/org/apache/tools/ant/AntClassLoader.java</a></p>\n\n<p>Here is a snippet</p>\n\n<pre><code>/**\n * Creates a classloader for the given project using the classpath given.\n *\n * @param parent The parent classloader to which unsatisfied loading\n *               attempts are delegated. May be &lt;code&gt;null&lt;/code&gt;,\n *               in which case the classloader which loaded this\n *               class is used as the parent.\n * @param project The project to which this classloader is to belong.\n *                Must not be &lt;code&gt;null&lt;/code&gt;.\n * @param classpath the classpath to use to load the classes.\n *                  May be &lt;code&gt;null&lt;/code&gt;, in which case no path\n *                  elements are set up to start with.\n * @param parentFirst If &lt;code&gt;true&lt;/code&gt;, indicates that the parent\n *                    classloader should be consulted  before trying to\n *                    load the a class through this loader.\n */\npublic AntClassLoader(\n    ClassLoader parent, Project project, Path classpath, boolean parentFirst) {\n    this(project, classpath);\n    if (parent != null) {\n        setParent(parent);\n    }\n    setParentFirst(parentFirst);\n    addJavaLibraries();\n}\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<p>Found <a href=\"http://code.google.com/p/osgigroup/source/browse/trunk/equinox_headless_launcher/src/launcher/ChildFirstClassLoader.java?spec=svn7&amp;r=7\" rel=\"nofollow\">this</a> as well, when as a last resort I started guessing class names in google (this is what ChildFirstURLClassLoader produced) - but it seems to be incorrect</p>\n\n<p><strong>Update 2:</strong></p>\n\n<p>The 1st Option (AntClassLoader) is very coupled to Ant (requires a Project context and not easy to pass a <code>URL[]</code> to it</p>\n\n<p>The 2nd Option (from an <a href=\"http://code.google.com/p/osgigroup/source/browse/trunk/equinox_headless_launcher/src/launcher/ChildFirstClassLoader.java?spec=svn7&amp;r=7\" rel=\"nofollow\">OSGI project in google code</a>) wasn't quite what I needed as it searched parent classloader before the system classloader (Ant class loader does it correctly by the way). The problem as I see it, think that your parent classloader includes a jar (that it shouldn't have) of a functionality that wasn't on JDK 1.4 but was added in 1.5, this has no harm as the parent last class loader (regular delegation model, e.g. URLClassLoader) will always load first the JDK's classes, but here the child first naive implementation seems to unveil the old, redundant jar in the parent class loader, shadowing the JDK / JRE own implementation. </p>\n\n<p>I have yet to find a certified, fully tested, mature Parent Last / Child First correct implementation that is not coupled to a specific solution (Ant, Catalina/Tomcat) </p>\n\n<p><strong>Update 3 - I found it!</strong> \nI WAS looking in the wrong place, </p>\n\n<p>All I did was add <code>META-INF/services/javax.xml.transform.TransformerFactory</code> and restored the JDK's <code>com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl</code> instead of the old Xalan's <code>org.apache.xalan.processor.TransformerFactoryImpl</code></p>\n\n<p>The only reason I don't \"accept my own answer\" yet, is that I don't know if the <code>META-INF/services</code> approach has the same classloader delegation as regular classes (e.g. is it parent-first / child-last or parent-last / child-first?)</p>\n"},{"tags":[],"owner":{"account_id":16519,"reputation":10181,"user_id":36071,"accept_rate":68,"display_name":"Yoni"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1309412516,"creation_date":1308657625,"answer_id":6424879,"question_id":5445511,"body_markdown":"The following code is what I use. It has the advantage over the other answer that it doesn&#39;t break the parent chain (you can follow `getClassLoader().getParent()`).  \r\n\r\nIt also has an advantage over tomcat&#39;s WebappClassLoader by not reinventing the wheel and not depending on other objects. It re-uses code from URLClassLoader as much as possible.\r\n\r\n&lt;del&gt;(it doesn&#39;t yet honor the system class loader, but when I get that fixed I&#39;ll update the answer)&lt;/del&gt;\r\n\r\nIt honors the system class loader (for java.* classes, endorsed dir, etc.). It also works when security is turned on and the classloader doesn&#39;t have access to its parent (yes, this situation is weird, but possible).\r\n\r\n    public class ChildFirstURLClassLoader extends URLClassLoader {\r\n    \r\n        private ClassLoader system;\r\n        \r\n        public ChildFirstURLClassLoader(URL[] classpath, ClassLoader parent) {\r\n            super(classpath, parent);\r\n            system = getSystemClassLoader();\r\n        }\r\n    \r\n        @Override\r\n        protected synchronized Class&lt;?&gt; loadClass(String name, boolean resolve)\r\n                throws ClassNotFoundException {\r\n            // First, check if the class has already been loaded\r\n            Class&lt;?&gt; c = findLoadedClass(name);\r\n            if (c == null) {\r\n                if (system != null) {\r\n                    try {\r\n                        // checking system: jvm classes, endorsed, cmd classpath, etc.\r\n                        c = system.loadClass(name);\r\n                    }\r\n                    catch (ClassNotFoundException ignored) {\r\n                    }\r\n                }\r\n                if (c == null) {\r\n                    try {\r\n                        // checking local\r\n                        c = findClass(name);\r\n                    } catch (ClassNotFoundException e) {\r\n                        // checking parent\r\n                        // This call to loadClass may eventually call findClass again, in case the parent doesn&#39;t find anything.\r\n                        c = super.loadClass(name, resolve);\r\n                    }\r\n                }\r\n            }\r\n            if (resolve) {\r\n                resolveClass(c);\r\n            }\r\n            return c;\r\n        }\r\n    \r\n        @Override\r\n        public URL getResource(String name) {\r\n            URL url = null;\r\n            if (system != null) {\r\n                url = system.getResource(name); \r\n            }\r\n            if (url == null) {\r\n                url = findResource(name);\r\n                if (url == null) {\r\n                    // This call to getResource may eventually call findResource again, in case the parent doesn&#39;t find anything.\r\n                    url = super.getResource(name);\r\n                }\r\n            }\r\n            return url;\r\n        }\r\n    \r\n        @Override\r\n        public Enumeration&lt;URL&gt; getResources(String name) throws IOException {\r\n            /**\r\n            * Similar to super, but local resources are enumerated before parent resources\r\n            */\r\n            Enumeration&lt;URL&gt; systemUrls = null;\r\n            if (system != null) {\r\n                systemUrls = system.getResources(name);\r\n            }\r\n            Enumeration&lt;URL&gt; localUrls = findResources(name);\r\n            Enumeration&lt;URL&gt; parentUrls = null;\r\n            if (getParent() != null) {\r\n                parentUrls = getParent().getResources(name);\r\n            }\r\n            final List&lt;URL&gt; urls = new ArrayList&lt;URL&gt;();\r\n            if (systemUrls != null) {\r\n                while(systemUrls.hasMoreElements()) {\r\n                    urls.add(systemUrls.nextElement());\r\n                }\r\n            }\r\n            if (localUrls != null) {\r\n                while (localUrls.hasMoreElements()) {\r\n                    urls.add(localUrls.nextElement());\r\n                }\r\n            }\r\n            if (parentUrls != null) {\r\n                while (parentUrls.hasMoreElements()) {\r\n                    urls.add(parentUrls.nextElement());\r\n                }\r\n            }\r\n            return new Enumeration&lt;URL&gt;() {\r\n                Iterator&lt;URL&gt; iter = urls.iterator();\r\n    \r\n                public boolean hasMoreElements() {\r\n                    return iter.hasNext(); \r\n                }\r\n                public URL nextElement() {\r\n                    return iter.next();\r\n                }\r\n            };\r\n        }\r\n    \r\n        @Override\r\n        public InputStream getResourceAsStream(String name) {\r\n            URL url = getResource(name);\r\n            try {\r\n                return url != null ? url.openStream() : null;\r\n            } catch (IOException e) {\r\n            }\r\n            return null;\r\n        }\r\n    \r\n    }","title":"How do I create a parent-last / child-first ClassLoader in Java, or How to override an old Xerces version that was already loaded in the parent CL?","body":"<p>The following code is what I use. It has the advantage over the other answer that it doesn't break the parent chain (you can follow <code>getClassLoader().getParent()</code>).  </p>\n\n<p>It also has an advantage over tomcat's WebappClassLoader by not reinventing the wheel and not depending on other objects. It re-uses code from URLClassLoader as much as possible.</p>\n\n<p><del>(it doesn't yet honor the system class loader, but when I get that fixed I'll update the answer)</del></p>\n\n<p>It honors the system class loader (for java.* classes, endorsed dir, etc.). It also works when security is turned on and the classloader doesn't have access to its parent (yes, this situation is weird, but possible).</p>\n\n<pre><code>public class ChildFirstURLClassLoader extends URLClassLoader {\n\n    private ClassLoader system;\n\n    public ChildFirstURLClassLoader(URL[] classpath, ClassLoader parent) {\n        super(classpath, parent);\n        system = getSystemClassLoader();\n    }\n\n    @Override\n    protected synchronized Class&lt;?&gt; loadClass(String name, boolean resolve)\n            throws ClassNotFoundException {\n        // First, check if the class has already been loaded\n        Class&lt;?&gt; c = findLoadedClass(name);\n        if (c == null) {\n            if (system != null) {\n                try {\n                    // checking system: jvm classes, endorsed, cmd classpath, etc.\n                    c = system.loadClass(name);\n                }\n                catch (ClassNotFoundException ignored) {\n                }\n            }\n            if (c == null) {\n                try {\n                    // checking local\n                    c = findClass(name);\n                } catch (ClassNotFoundException e) {\n                    // checking parent\n                    // This call to loadClass may eventually call findClass again, in case the parent doesn't find anything.\n                    c = super.loadClass(name, resolve);\n                }\n            }\n        }\n        if (resolve) {\n            resolveClass(c);\n        }\n        return c;\n    }\n\n    @Override\n    public URL getResource(String name) {\n        URL url = null;\n        if (system != null) {\n            url = system.getResource(name); \n        }\n        if (url == null) {\n            url = findResource(name);\n            if (url == null) {\n                // This call to getResource may eventually call findResource again, in case the parent doesn't find anything.\n                url = super.getResource(name);\n            }\n        }\n        return url;\n    }\n\n    @Override\n    public Enumeration&lt;URL&gt; getResources(String name) throws IOException {\n        /**\n        * Similar to super, but local resources are enumerated before parent resources\n        */\n        Enumeration&lt;URL&gt; systemUrls = null;\n        if (system != null) {\n            systemUrls = system.getResources(name);\n        }\n        Enumeration&lt;URL&gt; localUrls = findResources(name);\n        Enumeration&lt;URL&gt; parentUrls = null;\n        if (getParent() != null) {\n            parentUrls = getParent().getResources(name);\n        }\n        final List&lt;URL&gt; urls = new ArrayList&lt;URL&gt;();\n        if (systemUrls != null) {\n            while(systemUrls.hasMoreElements()) {\n                urls.add(systemUrls.nextElement());\n            }\n        }\n        if (localUrls != null) {\n            while (localUrls.hasMoreElements()) {\n                urls.add(localUrls.nextElement());\n            }\n        }\n        if (parentUrls != null) {\n            while (parentUrls.hasMoreElements()) {\n                urls.add(parentUrls.nextElement());\n            }\n        }\n        return new Enumeration&lt;URL&gt;() {\n            Iterator&lt;URL&gt; iter = urls.iterator();\n\n            public boolean hasMoreElements() {\n                return iter.hasNext(); \n            }\n            public URL nextElement() {\n                return iter.next();\n            }\n        };\n    }\n\n    @Override\n    public InputStream getResourceAsStream(String name) {\n        URL url = getResource(name);\n        try {\n            return url != null ? url.openStream() : null;\n        } catch (IOException e) {\n        }\n        return null;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93179,"reputation":3761,"user_id":255061,"accept_rate":62,"display_name":"Jesse"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1501060022,"creation_date":1501060022,"answer_id":45322305,"question_id":5445511,"body_markdown":"You can override `findClass()` and `loadClass()` to implement a child first class loader:\r\n\r\n&lt;pre&gt;&lt;code&gt;\r\n/**\r\n * Always throws {@link ClassNotFoundException}. Is called if parent class loader\r\n * did not find class.\r\n */\r\n@Override\r\nprotected final Class&lt;?&gt; findClass(String name)\r\n        throws ClassNotFoundException\r\n{\r\n    throw new ClassNotFoundException();\r\n}\r\n\r\n@Override\r\nprotected Class&lt;?&gt; loadClass(String name, boolean resolve)\r\n        throws ClassNotFoundException\r\n{\r\n    synchronized (getClassLoadingLock(name)){\r\n        /*\r\n         * Check if we have already loaded this class.\r\n         */\r\n        Class&lt;?&gt; c = findLoadedClass(name);\r\n\r\n        if (c == null){\r\n            try {\r\n                /*\r\n                 * We haven&#39;t previously loaded this class, try load it now\r\n                 * from SUPER.findClass()\r\n                 */\r\n                c = super.findClass(name);\r\n            }catch (ClassNotFoundException ignore){\r\n                /*\r\n                 * Child did not find class, try parent.\r\n                 */\r\n                return super.loadClass(name, resolve);\r\n            }\r\n        }\r\n\r\n        if (resolve){\r\n            resolveClass(c);\r\n        }\r\n\r\n        return c;\r\n    }\r\n}\r\n&lt;/code&gt;&lt;/pre&gt;","title":"How do I create a parent-last / child-first ClassLoader in Java, or How to override an old Xerces version that was already loaded in the parent CL?","body":"<p>You can override <code>findClass()</code> and <code>loadClass()</code> to implement a child first class loader:</p>\n\n<pre><code>\n/**\n * Always throws {@link ClassNotFoundException}. Is called if parent class loader\n * did not find class.\n */\n@Override\nprotected final Class findClass(String name)\n        throws ClassNotFoundException\n{\n    throw new ClassNotFoundException();\n}\n\n@Override\nprotected Class loadClass(String name, boolean resolve)\n        throws ClassNotFoundException\n{\n    synchronized (getClassLoadingLock(name)){\n        /*\n         * Check if we have already loaded this class.\n         */\n        Class c = findLoadedClass(name);\n\n        if (c == null){\n            try {\n                /*\n                 * We haven't previously loaded this class, try load it now\n                 * from SUPER.findClass()\n                 */\n                c = super.findClass(name);\n            }catch (ClassNotFoundException ignore){\n                /*\n                 * Child did not find class, try parent.\n                 */\n                return super.loadClass(name, resolve);\n            }\n        }\n\n        if (resolve){\n            resolveClass(c);\n        }\n\n        return c;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15004766,"reputation":1323,"user_id":10831193,"display_name":"Jessie Lesbian"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1604037378,"creation_date":1604037378,"answer_id":64603362,"question_id":5445511,"body_markdown":"URLClassLoader had this constructor `public URLClassLoader(URL[], ClassLoader)` that allows you to override the parent classloader of an URLClassLoader. You can just load your classloader through an URLClassLoader with an overridden parent classloader.","title":"How do I create a parent-last / child-first ClassLoader in Java, or How to override an old Xerces version that was already loaded in the parent CL?","body":"<p>URLClassLoader had this constructor <code>public URLClassLoader(URL[], ClassLoader)</code> that allows you to override the parent classloader of an URLClassLoader. You can just load your classloader through an URLClassLoader with an overridden parent classloader.</p>\n"},{"tags":[],"owner":{"account_id":11686699,"reputation":56,"user_id":8556267,"display_name":"CARLOS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687529647,"creation_date":1679968617,"answer_id":75861756,"question_id":5445511,"body_markdown":"A little bit late to the party but none of the answers helped my problem as I was getting linkage errors.\r\nHere is what worked for me:\r\n\r\n```\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.net.URL;\r\nimport java.net.URLClassLoader;\r\nimport java.util.ArrayList;\r\nimport java.util.Enumeration;\r\nimport java.util.Iterator;\r\nimport java.util.List;\r\n\r\n\r\npublic class ParentLastURLClassLoader extends URLClassLoader {\r\n\r\n    /**\r\n     * Create a child-first/parent-last URLClassLoader\r\n     * @param urls\r\n     * \tthe URLS to be included in the classpath of the new classloader\r\n     * @param parent\r\n     * \tparent classloader\r\n     */\r\n    public ParentLastURLClassLoader(URL[] urls, ClassLoader parent) {\r\n        super(urls, parent);\r\n    }\r\n\r\n    @Override\r\n    /**\r\n     * {@inheritDoc}\r\n     * \r\n     * For the parent-last classloader, first, if the class is already loaded, just recovers\r\n     * it, and if it has to laod it, it tries first to load the class from the JARs,\r\n     * and if it is not possible, it falls back to the parent classloader\r\n     */\r\n    protected Class&lt;?&gt; loadClass(String name, boolean resolve) throws ClassNotFoundException {\r\n        // First, check if the class is already loaded\r\n        Class&lt;?&gt; loadedClass = findLoadedClass(name);\r\n        if (loadedClass != null) {\r\n            return loadedClass;\r\n        }\r\n\r\n        try {\r\n            // Try to load the class from the URLs of this classloader\r\n            Class&lt;?&gt; localClass = findClass(name);\r\n            if (resolve) {\r\n                resolveClass(localClass);\r\n            }\r\n            return localClass;\r\n        } catch (ClassNotFoundException e) {\r\n            // Class not found in this classloader, delegate to parent classloader\r\n            return super.loadClass(name, resolve);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\n**UPDATE**\r\nThe code from @reda-alaoui works perfectly and it is better than mine:\r\nhttps://gist.github.com/reda-alaoui/a3030964293268eca48ddc66d8a07d74\r\n","title":"How do I create a parent-last / child-first ClassLoader in Java, or How to override an old Xerces version that was already loaded in the parent CL?","body":"<p>A little bit late to the party but none of the answers helped my problem as I was getting linkage errors.\nHere is what worked for me:</p>\n<pre><code>import java.io.IOException;\nimport java.io.InputStream;\nimport java.net.URL;\nimport java.net.URLClassLoader;\nimport java.util.ArrayList;\nimport java.util.Enumeration;\nimport java.util.Iterator;\nimport java.util.List;\n\n\npublic class ParentLastURLClassLoader extends URLClassLoader {\n\n    /**\n     * Create a child-first/parent-last URLClassLoader\n     * @param urls\n     *  the URLS to be included in the classpath of the new classloader\n     * @param parent\n     *  parent classloader\n     */\n    public ParentLastURLClassLoader(URL[] urls, ClassLoader parent) {\n        super(urls, parent);\n    }\n\n    @Override\n    /**\n     * {@inheritDoc}\n     * \n     * For the parent-last classloader, first, if the class is already loaded, just recovers\n     * it, and if it has to laod it, it tries first to load the class from the JARs,\n     * and if it is not possible, it falls back to the parent classloader\n     */\n    protected Class&lt;?&gt; loadClass(String name, boolean resolve) throws ClassNotFoundException {\n        // First, check if the class is already loaded\n        Class&lt;?&gt; loadedClass = findLoadedClass(name);\n        if (loadedClass != null) {\n            return loadedClass;\n        }\n\n        try {\n            // Try to load the class from the URLs of this classloader\n            Class&lt;?&gt; localClass = findClass(name);\n            if (resolve) {\n                resolveClass(localClass);\n            }\n            return localClass;\n        } catch (ClassNotFoundException e) {\n            // Class not found in this classloader, delegate to parent classloader\n            return super.loadClass(name, resolve);\n        }\n    }\n}\n</code></pre>\n<p><strong>UPDATE</strong>\nThe code from @reda-alaoui works perfectly and it is better than mine:\n<a href=\"https://gist.github.com/reda-alaoui/a3030964293268eca48ddc66d8a07d74\" rel=\"nofollow noreferrer\">https://gist.github.com/reda-alaoui/a3030964293268eca48ddc66d8a07d74</a></p>\n"}],"owner":{"account_id":85878,"reputation":44865,"user_id":239168,"accept_rate":87,"display_name":"Eran Medan"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40764,"favorite_count":0,"down_vote_count":0,"up_vote_count":40,"accepted_answer_id":5446671,"answer_count":7,"score":40,"last_activity_date":1687529647,"creation_date":1301175652,"question_id":5445511,"body_markdown":"I would like to create a parent-last / child-first class loader, e.g. a class loader that will look for classes in the child class loder first, and only then delegate to it&#39;s parent ClassLoader to search for classes.\r\n\r\n**Clarification:**\r\n\r\nI know now that to get complete ClassLoading seperation I need to use something like a URLClassLoader passing null as it&#39;s parent, thanks to [this answer][1] to my previous question\r\n\r\nHowever the current question comes to help me resolve this issue: \r\n\r\n 1. My code + dependent jars are being loaded into an existing system, using a ClassLoader that sets that System&#39;s ClassLoader as it&#39;s parent (URLClassLoader)\r\n\r\n 2. That System uses some libraries of a version not compatible with the one I need (e.g. older version of Xerces, that doesn&#39;t allow me to run my code)\r\n\r\n 3. My code runs perfectly fine if runs stand alone, but it fails if runs from that ClassLoader\r\n\r\n 4. Howerver I do need access to many other classes within the parent ClassLoader\r\n\r\n 5. Therefore I want to allow me to Override, the parent classloader &quot;jars&quot; with my own: If a class I call is found in the child class loader (e.g. I provided a newer version of Xerces with my own jars, instead of the one users by the ClassLoader that loaded my code and jars.\r\n\r\nHere is the System&#39;s code that loads my code + Jars (I can&#39;t change this one)\r\n\r\n    File addOnFolder = new File(&quot;/addOns&quot;); \r\n    URL url = addOnFolder.toURL();         \r\n    URL[] urls = new URL[]{url};\r\n    ClassLoader parent = getClass().getClassLoader();\r\n    cl = URLClassLoader.newInstance(urls, parent);\r\n  \r\nHere is &quot;my&quot; code (taken fully from the Flying Sauser &quot;Hello World&quot; code demo):\r\n\r\n    package flyingsaucerpdf;\r\n    \r\n    import java.io.*;\r\n    import com.lowagie.text.DocumentException;\r\n    import org.xhtmlrenderer.pdf.ITextRenderer;\r\n    \r\n    public class FirstDoc {\r\n        \r\n        public static void main(String[] args) \r\n                throws IOException, DocumentException {\r\n        \t\r\n        \tString f = new File(&quot;sample.xhtml&quot;).getAbsolutePath();\r\n        \tSystem.out.println(f);\r\n        \t//if(true) return;\r\n            String inputFile = &quot;sample.html&quot;;\r\n            String url = new File(inputFile).toURI().toURL().toString();\r\n            String outputFile = &quot;firstdoc.pdf&quot;;\r\n            OutputStream os = new FileOutputStream(outputFile);\r\n            \r\n            ITextRenderer renderer = new ITextRenderer();\r\n            renderer.setDocument(url);\r\n            renderer.layout();\r\n            renderer.createPDF(os);\r\n            \r\n            os.close();\r\n        }\r\n    }\r\n\r\nThis works standalone (running main) but fails with this error when loaded through the parent CL:\r\n\r\n&gt; **org.w3c.dom.DOMException: NAMESPACE_ERR:** An attempt is made to\r\n&gt; create or change an object in a way\r\n&gt; which is incorrect with regard to\r\n&gt; namespaces.\r\n\r\nprobably because the parent system uses Xerces of an older version, and even though I provide the right Xerces jar in the /addOns folder, since it&#39;s classes were already loaded and used by the parent System, it doesn&#39;t allow my own code to use my own jar due to the direction of the delegation. I hope this makes my question clearer, and I&#39;m sure it has been asked \r\nbefore. (Perhaps I don&#39;t ask the right question)\r\n\r\n\r\n[1]: https://stackoverflow.com/questions/5444246/how-do-i-create-a-classloader-that-will-not-search-the-parent-for-loading-classes/5444309#5444309\r\n","title":"How do I create a parent-last / child-first ClassLoader in Java, or How to override an old Xerces version that was already loaded in the parent CL?","body":"<p>I would like to create a parent-last / child-first class loader, e.g. a class loader that will look for classes in the child class loder first, and only then delegate to it's parent ClassLoader to search for classes.</p>\n\n<p><strong>Clarification:</strong></p>\n\n<p>I know now that to get complete ClassLoading seperation I need to use something like a URLClassLoader passing null as it's parent, thanks to <a href=\"https://stackoverflow.com/questions/5444246/how-do-i-create-a-classloader-that-will-not-search-the-parent-for-loading-classes/5444309#5444309\">this answer</a> to my previous question</p>\n\n<p>However the current question comes to help me resolve this issue: </p>\n\n<ol>\n<li><p>My code + dependent jars are being loaded into an existing system, using a ClassLoader that sets that System's ClassLoader as it's parent (URLClassLoader)</p></li>\n<li><p>That System uses some libraries of a version not compatible with the one I need (e.g. older version of Xerces, that doesn't allow me to run my code)</p></li>\n<li><p>My code runs perfectly fine if runs stand alone, but it fails if runs from that ClassLoader</p></li>\n<li><p>Howerver I do need access to many other classes within the parent ClassLoader</p></li>\n<li><p>Therefore I want to allow me to Override, the parent classloader \"jars\" with my own: If a class I call is found in the child class loader (e.g. I provided a newer version of Xerces with my own jars, instead of the one users by the ClassLoader that loaded my code and jars.</p></li>\n</ol>\n\n<p>Here is the System's code that loads my code + Jars (I can't change this one)</p>\n\n<pre><code>File addOnFolder = new File(\"/addOns\"); \nURL url = addOnFolder.toURL();         \nURL[] urls = new URL[]{url};\nClassLoader parent = getClass().getClassLoader();\ncl = URLClassLoader.newInstance(urls, parent);\n</code></pre>\n\n<p>Here is \"my\" code (taken fully from the Flying Sauser \"Hello World\" code demo):</p>\n\n<pre><code>package flyingsaucerpdf;\n\nimport java.io.*;\nimport com.lowagie.text.DocumentException;\nimport org.xhtmlrenderer.pdf.ITextRenderer;\n\npublic class FirstDoc {\n\n    public static void main(String[] args) \n            throws IOException, DocumentException {\n\n        String f = new File(\"sample.xhtml\").getAbsolutePath();\n        System.out.println(f);\n        //if(true) return;\n        String inputFile = \"sample.html\";\n        String url = new File(inputFile).toURI().toURL().toString();\n        String outputFile = \"firstdoc.pdf\";\n        OutputStream os = new FileOutputStream(outputFile);\n\n        ITextRenderer renderer = new ITextRenderer();\n        renderer.setDocument(url);\n        renderer.layout();\n        renderer.createPDF(os);\n\n        os.close();\n    }\n}\n</code></pre>\n\n<p>This works standalone (running main) but fails with this error when loaded through the parent CL:</p>\n\n<blockquote>\n  <p><strong>org.w3c.dom.DOMException: NAMESPACE_ERR:</strong> An attempt is made to\n  create or change an object in a way\n  which is incorrect with regard to\n  namespaces.</p>\n</blockquote>\n\n<p>probably because the parent system uses Xerces of an older version, and even though I provide the right Xerces jar in the /addOns folder, since it's classes were already loaded and used by the parent System, it doesn't allow my own code to use my own jar due to the direction of the delegation. I hope this makes my question clearer, and I'm sure it has been asked \nbefore. (Perhaps I don't ask the right question)</p>\n"},{"tags":["java","cucumber","gherkin"],"answers":[{"tags":[],"owner":{"account_id":5700778,"reputation":8968,"user_id":4512398,"display_name":"Grasshopper"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1528299019,"creation_date":1528299019,"answer_id":50724207,"question_id":50723798,"body_markdown":"Try this : No need for main method. `glue` option should be in package style.\r\n\r\n    @RunWith(Cucumber.class)\r\n    @CucumberOptions(\r\n        plugin = {&quot;progress&quot;,\r\n                &quot;html:build/report/html&quot;,\r\n                &quot;junit:build/report/junit/cucumber-report.xml&quot;,\r\n                &quot;json:build/report/json/cucumber-report.json&quot;\r\n        },\r\n        glue = {&quot;com.abc.commercial.def.automation&quot;},\r\n        features = {&quot;src/test/java/features&quot;}\r\n        )\r\n    public class QARunner {\r\n    \r\n    }","title":"Cucumber Runner Class not running Step Definitons","body":"<p>Try this : No need for main method. <code>glue</code> option should be in package style.</p>\n\n<pre><code>@RunWith(Cucumber.class)\n@CucumberOptions(\n    plugin = {\"progress\",\n            \"html:build/report/html\",\n            \"junit:build/report/junit/cucumber-report.xml\",\n            \"json:build/report/json/cucumber-report.json\"\n    },\n    glue = {\"com.abc.commercial.def.automation\"},\n    features = {\"src/test/java/features\"}\n    )\npublic class QARunner {\n\n}\n</code></pre>\n"}],"owner":{"display_name":"user9847788"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7639,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":50724207,"answer_count":1,"score":2,"last_activity_date":1687529556,"creation_date":1528297784,"question_id":50723798,"body_markdown":"I am writing automated tests with Cucumber and Java.\r\n\r\nI can run the step definitions by right-clicking on my Feature file, and running it as a Cucumber Feature, and all steps pass successfully.\r\n\r\nBut, I need to run them using a Runner Class.\r\n\r\nMy feature file is in this folder:\r\n\r\n&gt; src/test/java/features\r\n\r\nAnd my step definitons are in this folder:\r\n\r\n&gt; src\\\\test\\\\java\\\\com\\\\abc\\\\commercial\\\\def\\\\automation\r\n\r\nMy Runner Class is also stored in\r\n &gt; src\\\\test\\\\java\\\\com\\\\abc\\\\commercial\\\\def\\\\automation\r\n\r\nAnd here is the Runner Class code:\r\n\r\n    @RunWith(Cucumber.class)\r\n    @CucumberOptions(\r\n\t\tplugin = {&quot;progress&quot;,\r\n\t\t\t\t&quot;html:build/report/html&quot;,\r\n\t\t\t\t&quot;junit:build/report/junit/cucumber-report.xml&quot;,\r\n\t\t\t\t&quot;json:build/report/json/cucumber-report.json&quot;\r\n\t\t},\r\n\t\tglue = {&quot;src\\\\test\\\\java\\\\com\\\\abc\\\\commercial\\\\def\\\\automation&quot;},\r\n\t\tfeatures = {&quot;src/test/java/features&quot;}\r\n\t\t)\r\n    public class QARunner {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\r\n\t    }\r\n    }\r\n\r\nWhen I run the Runner Class as a JUnit Test, I receive the following response in the console:\r\n\r\n    UUUUUUUUU\r\n\r\n    Undefined scenarios:\r\n    src/test/java/features/US46052\r\n    src/test/java/features/postFeatures.feature:43 # As the\r\n\r\n    2 Scenarios (2 undefined)\r\n    9 Steps (9 undefined)\r\n    0m0.303s\r\n\r\n\r\n    You can implement missing steps with the snippets below:\r\n\r\n    @Given(&quot;the Application...&quot;)\r\n    public void the_Application...() {\r\n\r\nSo the step definitions are not being picked up.\r\n\r\nDoes it have something to do with where my test runner is located?\r\nI don&#39;t think it is picking up the step definitons in the *automation* folder\r\n\r\nThanks for any help","title":"Cucumber Runner Class not running Step Definitons","body":"<p>I am writing automated tests with Cucumber and Java.</p>\n\n<p>I can run the step definitions by right-clicking on my Feature file, and running it as a Cucumber Feature, and all steps pass successfully.</p>\n\n<p>But, I need to run them using a Runner Class.</p>\n\n<p>My feature file is in this folder:</p>\n\n<blockquote>\n  <p>src/test/java/features</p>\n</blockquote>\n\n<p>And my step definitons are in this folder:</p>\n\n<blockquote>\n  <p>src\\test\\java\\com\\abc\\commercial\\def\\automation</p>\n</blockquote>\n\n<p>My Runner Class is also stored in</p>\n\n<blockquote>\n  <p>src\\test\\java\\com\\abc\\commercial\\def\\automation</p>\n</blockquote>\n\n<p>And here is the Runner Class code:</p>\n\n<pre><code>@RunWith(Cucumber.class)\n@CucumberOptions(\n    plugin = {\"progress\",\n            \"html:build/report/html\",\n            \"junit:build/report/junit/cucumber-report.xml\",\n            \"json:build/report/json/cucumber-report.json\"\n    },\n    glue = {\"src\\\\test\\\\java\\\\com\\\\abc\\\\commercial\\\\def\\\\automation\"},\n    features = {\"src/test/java/features\"}\n    )\npublic class QARunner {\n\npublic static void main(String[] args) {\n    // TODO Auto-generated method stub\n\n    }\n}\n</code></pre>\n\n<p>When I run the Runner Class as a JUnit Test, I receive the following response in the console:</p>\n\n<pre><code>UUUUUUUUU\n\nUndefined scenarios:\nsrc/test/java/features/US46052\nsrc/test/java/features/postFeatures.feature:43 # As the\n\n2 Scenarios (2 undefined)\n9 Steps (9 undefined)\n0m0.303s\n\n\nYou can implement missing steps with the snippets below:\n\n@Given(\"the Application...\")\npublic void the_Application...() {\n</code></pre>\n\n<p>So the step definitions are not being picked up.</p>\n\n<p>Does it have something to do with where my test runner is located?\nI don't think it is picking up the step definitons in the <em>automation</em> folder</p>\n\n<p>Thanks for any help</p>\n"},{"tags":["java","switch-statement"],"comments":[{"owner":{"account_id":3132675,"reputation":1916,"user_id":2649963,"accept_rate":75,"display_name":"Prateek"},"score":1,"creation_date":1385582153,"post_id":20251855,"comment_id":30206403,"body_markdown":"You forgot to add `break` after each `case` in `switch` statement.","body":"You forgot to add <code>break</code> after each <code>case</code> in <code>switch</code> statement."},{"owner":{"account_id":305991,"reputation":39137,"user_id":616460,"accept_rate":93,"display_name":"Jason C"},"score":0,"creation_date":1385582219,"post_id":20251855,"comment_id":30206444,"body_markdown":"@Spud: Check out http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html","body":"@Spud: Check out <a href=\"http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.htm&zwnj;&#8203;l</a>"},{"owner":{"account_id":907159,"reputation":371,"user_id":941796,"accept_rate":79,"display_name":"Spud"},"score":0,"creation_date":1385582874,"post_id":20251855,"comment_id":30206820,"body_markdown":"Thank you all. I have added the break after each case statement, but still the background color is not changing. Do I have mistakes somewhere else in the code?","body":"Thank you all. I have added the break after each case statement, but still the background color is not changing. Do I have mistakes somewhere else in the code?"},{"owner":{"account_id":3132675,"reputation":1916,"user_id":2649963,"accept_rate":75,"display_name":"Prateek"},"score":0,"creation_date":1385583310,"post_id":20251855,"comment_id":30207070,"body_markdown":"@Spud Can you provide a sample input and output you are getting and what you are expecting. That would help us to pinpoint the source of the error.","body":"@Spud Can you provide a sample input and output you are getting and what you are expecting. That would help us to pinpoint the source of the error."},{"owner":{"account_id":907159,"reputation":371,"user_id":941796,"accept_rate":79,"display_name":"Spud"},"score":0,"creation_date":1385583611,"post_id":20251855,"comment_id":30207235,"body_markdown":"@Prateek - My expectation is that the background color of the container will change according to the selection I make from the combobox. I have added the breaks to each case and I have removed the else statement. Regardless of the selection I make, the background color never changes. Thank you for your help","body":"@Prateek - My expectation is that the background color of the container will change according to the selection I make from the combobox. I have added the breaks to each case and I have removed the else statement. Regardless of the selection I make, the background color never changes. Thank you for your help"},{"owner":{"account_id":3132675,"reputation":1916,"user_id":2649963,"accept_rate":75,"display_name":"Prateek"},"score":0,"creation_date":1385584667,"post_id":20251855,"comment_id":30207918,"body_markdown":"@Spud I checked your code. The problem is that `e.getSource() == colors` is never true hence your `if` statement never gets executed. The reason being your `colors` in `if` statement is `null`","body":"@Spud I checked your code. The problem is that <code>e.getSource() == colors</code> is never true hence your <code>if</code> statement never gets executed. The reason being your <code>colors</code> in <code>if</code> statement is <code>null</code>"},{"owner":{"account_id":907159,"reputation":371,"user_id":941796,"accept_rate":79,"display_name":"Spud"},"score":0,"creation_date":1385585257,"post_id":20251855,"comment_id":30208218,"body_markdown":"@Prateek - Thank you for checking. Could you help me to understand why colors is null? What can I do to correct it? I suspected it was failing the if statement. Could you provide me an example of how to fix it? Perhaps edit your original answer. Cheers","body":"@Prateek - Thank you for checking. Could you help me to understand why colors is null? What can I do to correct it? I suspected it was failing the if statement. Could you provide me an example of how to fix it? Perhaps edit your original answer. Cheers"}],"answers":[{"tags":[],"owner":{"account_id":1626304,"reputation":169369,"user_id":1501794,"accept_rate":72,"display_name":"Rahul Tripathi"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1385584726,"creation_date":1385582190,"answer_id":20251893,"question_id":20251855,"body_markdown":"You forgot the `break` statement after each `case`\r\n\r\nTry this:\r\n\r\n    switch(chgColor)\r\n                {\r\n                    case 0:\r\n                        container.setBackground(Color.red);\r\n                         break;\r\n                    case 1:\r\n                        container.setBackground(Color.yellow);\r\n                        break;\r\n                    case 2:\r\n                        container.setBackground(Color.blue);\r\n                         break;\r\n                    case 3:\r\n                        container.setBackground(Color.green);\r\n                        break;\r\n                    case 4:\r\n                        container.setBackground(Color.magenta);\r\n                        break;\r\n                    default:\r\n                    //You may add a default case here.\r\n                }\r\n\r\n**EDIT:-**\r\n\r\nI think your condition \r\n\r\n    if(e.getSource() == colors)\r\n\r\nis never true thats why you are getting this problem. You may try to compare like this:\r\n\r\n    if(e.getSource().equals(colors))\r\n\r\nAlways use **[.equals][1]** method when you are comparing objects.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29","title":"Java switch case not functioning as expected","body":"<p>You forgot the <code>break</code> statement after each <code>case</code></p>\n\n<p>Try this:</p>\n\n<pre><code>switch(chgColor)\n            {\n                case 0:\n                    container.setBackground(Color.red);\n                     break;\n                case 1:\n                    container.setBackground(Color.yellow);\n                    break;\n                case 2:\n                    container.setBackground(Color.blue);\n                     break;\n                case 3:\n                    container.setBackground(Color.green);\n                    break;\n                case 4:\n                    container.setBackground(Color.magenta);\n                    break;\n                default:\n                //You may add a default case here.\n            }\n</code></pre>\n\n<p><strong>EDIT:-</strong></p>\n\n<p>I think your condition </p>\n\n<pre><code>if(e.getSource() == colors)\n</code></pre>\n\n<p>is never true thats why you are getting this problem. You may try to compare like this:</p>\n\n<pre><code>if(e.getSource().equals(colors))\n</code></pre>\n\n<p>Always use <strong><a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29\" rel=\"nofollow\">.equals</a></strong> method when you are comparing objects.</p>\n"},{"tags":[],"owner":{"account_id":2617819,"reputation":1919,"user_id":2266536,"accept_rate":100,"display_name":"WillBD"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1385582232,"creation_date":1385582232,"answer_id":20251905,"question_id":20251855,"body_markdown":"You need to make sure and add a break; after every line in the case, like this: \r\n\r\n            switch(chgColor)\r\n            {\r\n                case 0:\r\n                    container.setBackground(Color.red);\r\n                    break;\r\n                case 1:\r\n                    container.setBackground(Color.yellow);\r\n                    break;\r\n                case 2:\r\n                    container.setBackground(Color.blue);\r\n                    break;\r\n                case 3:\r\n                    container.setBackground(Color.green);\r\n                    break;\r\n                case 4:\r\n                    container.setBackground(Color.magenta);\r\n                    break;\r\n            }\r\n        }else\r\n            {\r\n                container.setBackground(Color.magenta);\r\n            }","title":"Java switch case not functioning as expected","body":"<p>You need to make sure and add a break; after every line in the case, like this: </p>\n\n<pre><code>        switch(chgColor)\n        {\n            case 0:\n                container.setBackground(Color.red);\n                break;\n            case 1:\n                container.setBackground(Color.yellow);\n                break;\n            case 2:\n                container.setBackground(Color.blue);\n                break;\n            case 3:\n                container.setBackground(Color.green);\n                break;\n            case 4:\n                container.setBackground(Color.magenta);\n                break;\n        }\n    }else\n        {\n            container.setBackground(Color.magenta);\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1319573,"reputation":21851,"user_id":1265660,"accept_rate":75,"display_name":"Masudul"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1385582252,"creation_date":1385582252,"answer_id":20251914,"question_id":20251855,"body_markdown":"You should use `break` after each case.\r\n\r\n           case 0:\r\n              container.setBackground(Color.red);\r\n              break;\r\n            case 1:\r\n              container.setBackground(Color.yellow);\r\n              break;\r\n              ....","title":"Java switch case not functioning as expected","body":"<p>You should use <code>break</code> after each case.</p>\n\n<pre><code>       case 0:\n          container.setBackground(Color.red);\n          break;\n        case 1:\n          container.setBackground(Color.yellow);\n          break;\n          ....\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1589823,"reputation":1136,"user_id":1473410,"display_name":"Uresh K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1385582346,"creation_date":1385582346,"answer_id":20251947,"question_id":20251855,"body_markdown":"Looks like you always end up with magenta color given the `if` condition and the switch statement.\r\n\r\nUse break for each `case` statement. \r\n\r\nIn the `switch` statement, for each `case`, you do not have a `break;`. So even if `switch` finds a valid matching `case`, it executes that case and, in your code (since you do not break the control to come out of that case), it eventually passes the control to the cases following the matching case and always ending up in the last case.\r\n\r\n","title":"Java switch case not functioning as expected","body":"<p>Looks like you always end up with magenta color given the <code>if</code> condition and the switch statement.</p>\n\n<p>Use break for each <code>case</code> statement. </p>\n\n<p>In the <code>switch</code> statement, for each <code>case</code>, you do not have a <code>break;</code>. So even if <code>switch</code> finds a valid matching <code>case</code>, it executes that case and, in your code (since you do not break the control to come out of that case), it eventually passes the control to the cases following the matching case and always ending up in the last case.</p>\n"},{"tags":[],"owner":{"account_id":3132675,"reputation":1916,"user_id":2649963,"accept_rate":75,"display_name":"Prateek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1385591082,"creation_date":1385582374,"answer_id":20251959,"question_id":20251855,"body_markdown":"As mentioned in my comment you forgot to add `break` in each of your case.\r\n\r\n               switch(chgColor)\r\n                {\r\n                    case 0:\r\n                        container.setBackground(Color.red);\r\n                        break;\r\n                    case 1:\r\n                        container.setBackground(Color.yellow);\r\n                         break;\r\n                    case 2:\r\n                        container.setBackground(Color.blue);\r\n                        break;\r\n                    case 3:\r\n                        container.setBackground(Color.green);\r\n                        break;\r\n                    case 4:\r\n                        container.setBackground(Color.magenta);\r\n                        break;\r\n                    default:\r\n                    //What if none of above condition is satisfied.\r\n                 }\r\n\r\n**Edit**: - Check the comments in the code\r\n\r\n        class Lab17_4combo extends JFrame implements ActionListener\r\n        {\r\n            Container container;\r\n            JComboBox colors;// you declared colors. \r\n        \r\n            public Lab17_4combo()\r\n            {\r\n                super(&quot;ComboBox &quot;);\r\n                container = this.getContentPane();\r\n                container.setLayout(new FlowLayout());\r\n                setSize(300,200);\r\n                setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        \r\n                String[] selectColor = {&quot;Red&quot;, &quot;Yellow&quot;, &quot;Blue&quot;, &quot;Green&quot;, &quot;Magenta&quot;};\r\n    \r\n                //JComboBox colors = new JComboBox(selectColor);// You declared colors again. Change     this line to \r\n                \r\n                colors = new JComboBox(selectColor);\r\n                colors.setSelectedIndex(-1);\r\n                colors.addActionListener(this);\r\n        \r\n                container.add(colors);\r\n                setVisible(true);\r\n            }","title":"Java switch case not functioning as expected","body":"<p>As mentioned in my comment you forgot to add <code>break</code> in each of your case.</p>\n\n<pre><code>           switch(chgColor)\n            {\n                case 0:\n                    container.setBackground(Color.red);\n                    break;\n                case 1:\n                    container.setBackground(Color.yellow);\n                     break;\n                case 2:\n                    container.setBackground(Color.blue);\n                    break;\n                case 3:\n                    container.setBackground(Color.green);\n                    break;\n                case 4:\n                    container.setBackground(Color.magenta);\n                    break;\n                default:\n                //What if none of above condition is satisfied.\n             }\n</code></pre>\n\n<p><strong>Edit</strong>: - Check the comments in the code</p>\n\n<pre><code>    class Lab17_4combo extends JFrame implements ActionListener\n    {\n        Container container;\n        JComboBox colors;// you declared colors. \n\n        public Lab17_4combo()\n        {\n            super(\"ComboBox \");\n            container = this.getContentPane();\n            container.setLayout(new FlowLayout());\n            setSize(300,200);\n            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n            String[] selectColor = {\"Red\", \"Yellow\", \"Blue\", \"Green\", \"Magenta\"};\n\n            //JComboBox colors = new JComboBox(selectColor);// You declared colors again. Change     this line to \n\n            colors = new JComboBox(selectColor);\n            colors.setSelectedIndex(-1);\n            colors.addActionListener(this);\n\n            container.add(colors);\n            setVisible(true);\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15634611,"reputation":81,"user_id":11279918,"display_name":"ac23"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687529516,"creation_date":1687529516,"answer_id":76540920,"question_id":20251855,"body_markdown":"I think you are using the wrong `colors` object inside the constructor, instead of \r\n\r\n    JComboBox colors = new JComboBox(selectColor);\r\n\r\nyou have to use the colors attribute\r\n\r\n    colors = new JComboBox(selectColor);","title":"Java switch case not functioning as expected","body":"<p>I think you are using the wrong <code>colors</code> object inside the constructor, instead of</p>\n<pre><code>JComboBox colors = new JComboBox(selectColor);\n</code></pre>\n<p>you have to use the colors attribute</p>\n<pre><code>colors = new JComboBox(selectColor);\n</code></pre>\n"}],"owner":{"account_id":907159,"reputation":371,"user_id":941796,"accept_rate":79,"display_name":"Spud"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2082,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":20251959,"answer_count":6,"score":3,"last_activity_date":1687529516,"creation_date":1385582065,"question_id":20251855,"body_markdown":"I am a student of very basic Java. We did an assignment to make the background color change according to the radio button selected using several if statements. That worked fine. I decided to change the selection process to a combobox and use a switch case. It seems to me the process is failing the if statement in the switch case method. I&#39;m trying to get a better understanding of how things work. The code:\r\n\r\n\timport javax.swing.*;\r\n\timport java.awt.*;\r\n\timport java.awt.event.*;\r\n\timport java.util.*;\r\n\r\n\tclass Lab17_4combo extends JFrame implements ActionListener\r\n\t{\r\n\t\tContainer container;\r\n\t\tJComboBox colors;\r\n\t\t\r\n\t\tpublic Lab17_4combo()\r\n\t\t{\r\n\t\t\tsuper(&quot;ComboBox &quot;);\r\n\t\t\tcontainer = this.getContentPane();\r\n\t\t\tcontainer.setLayout(new FlowLayout());\r\n\t\t\tsetSize(300,200);\r\n\t\t\tsetDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\t\t\r\n\t\t\tString[] selectColor = {&quot;Red&quot;, &quot;Yellow&quot;, &quot;Blue&quot;, &quot;Green&quot;, &quot;Magenta&quot;};\r\n\t\t\tJComboBox colors = new JComboBox(selectColor);\r\n\t\t\tcolors.setSelectedIndex(-1);\r\n\t\t\tcolors.addActionListener(this);\r\n\t\t\t\r\n\t\t\tcontainer.add(colors);\r\n\t\t\tsetVisible(true);\r\n\t\t}\r\n\t\tpublic void actionPerformed(ActionEvent e)\r\n\t\t{\r\n\t\t\tint chgColor;\r\n\t\t\t\r\n\t\t\tif(e.getSource() == colors)\r\n\t\t\t{\r\n\t\t\t\tchgColor = colors.getSelectedIndex();\r\n\t\t\t\t\r\n\t\t\t\tswitch(chgColor)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\tcontainer.setBackground(Color.red);\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tcontainer.setBackground(Color.yellow);\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tcontainer.setBackground(Color.blue);\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\tcontainer.setBackground(Color.green);\r\n\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\tcontainer.setBackground(Color.magenta);\r\n\t\t\t\t}\r\n\t\t\t}else\r\n\t\t\t\t{\r\n\t\t\t\t\tcontainer.setBackground(Color.magenta);\r\n\t\t\t\t}\r\n\r\n\t\t}\r\n\t\tpublic static void main(String[] args)\r\n\t\t{\r\n\t\t\tLab17_4combo s = new Lab17_4combo();\r\n\t\t}\r\n\t}\r\nI put in the else to check if it was failing the if. I&#39;m assuming that is where the problem is, but I don&#39;t know how to fix it. Any help would be greatly appreciated. The original assignment has been completed, this is my own experimentation. I&#39;m not asking for anyone to do my homework for me. Cheers\r\n\r\n\r\n**EDIT--**\r\nI have made the suggested changes to the code (Thanks to all for the suggestions). The background color of the container still does not change regardless of the selection I make from the combobox. I&#39;m assuming there are mistakes elsewhere in the code, but I&#39;m at a loss to find them. My expectation is that the background color of the container will change according to the selection I make from the combobox. This is not happening.\r\n\r\nThe revised code:\r\n\r\n    import javax.swing.*;\r\n\timport java.awt.*;\r\n\timport java.awt.event.*;\r\n\timport java.util.*;\r\n\r\n\tclass Lab17_4combo extends JFrame implements ActionListener\r\n\t{\r\n\t\tContainer container;\r\n\t\tJComboBox colors;\r\n\t\t\r\n\t\tpublic Lab17_4combo()\r\n\t\t{\r\n\t\t\tsuper(&quot;ComboBox &quot;);\r\n\t\t\tcontainer = this.getContentPane();\r\n\t\t\tcontainer.setLayout(new FlowLayout());\r\n\t\t\tsetSize(300,200);\r\n\t\t\tsetDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\t\t\r\n\t\t\tString[] selectColor = {&quot;Red&quot;, &quot;Yellow&quot;, &quot;Blue&quot;, &quot;Green&quot;, &quot;Magenta&quot;};\r\n\t\t\tJComboBox colors = new JComboBox(selectColor);\r\n\t\t\tcolors.setSelectedIndex(-1);\r\n\t\t\tcolors.addActionListener(this);\r\n\t\t\t\r\n\t\t\tcontainer.add(colors);\r\n\t\t\tsetVisible(true);\r\n\t\t}\r\n\t\tpublic void actionPerformed(ActionEvent e)\r\n\t\t{\r\n\t\t\tint chgColor;\r\n\t\t\t\r\n\t\t\tif(e.getSource() == colors)\r\n\t\t\t{\r\n\t\t\t\tchgColor = colors.getSelectedIndex();\r\n\t\t\t\t\r\n\t\t\t\tswitch(chgColor)\r\n\t\t\t\t{\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\tcontainer.setBackground(Color.red);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tcontainer.setBackground(Color.yellow);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tcontainer.setBackground(Color.blue);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\tcontainer.setBackground(Color.green);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\tcontainer.setBackground(Color.magenta);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tpublic static void main(String[] args)\r\n\t\t{\r\n\t\t\tLab17_4combo s = new Lab17_4combo();\r\n\t\t}\r\n\t}\r\nWith my limited knowledge of Java I&#39;m not able to see where the mistake(s) may be. Any help would be appreciated.Cheers","title":"Java switch case not functioning as expected","body":"<p>I am a student of very basic Java. We did an assignment to make the background color change according to the radio button selected using several if statements. That worked fine. I decided to change the selection process to a combobox and use a switch case. It seems to me the process is failing the if statement in the switch case method. I'm trying to get a better understanding of how things work. The code:</p>\n\n<pre><code>import javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.*;\nimport java.util.*;\n\nclass Lab17_4combo extends JFrame implements ActionListener\n{\n    Container container;\n    JComboBox colors;\n\n    public Lab17_4combo()\n    {\n        super(\"ComboBox \");\n        container = this.getContentPane();\n        container.setLayout(new FlowLayout());\n        setSize(300,200);\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        String[] selectColor = {\"Red\", \"Yellow\", \"Blue\", \"Green\", \"Magenta\"};\n        JComboBox colors = new JComboBox(selectColor);\n        colors.setSelectedIndex(-1);\n        colors.addActionListener(this);\n\n        container.add(colors);\n        setVisible(true);\n    }\n    public void actionPerformed(ActionEvent e)\n    {\n        int chgColor;\n\n        if(e.getSource() == colors)\n        {\n            chgColor = colors.getSelectedIndex();\n\n            switch(chgColor)\n            {\n                case 0:\n                    container.setBackground(Color.red);\n                case 1:\n                    container.setBackground(Color.yellow);\n                case 2:\n                    container.setBackground(Color.blue);\n                case 3:\n                    container.setBackground(Color.green);\n                case 4:\n                    container.setBackground(Color.magenta);\n            }\n        }else\n            {\n                container.setBackground(Color.magenta);\n            }\n\n    }\n    public static void main(String[] args)\n    {\n        Lab17_4combo s = new Lab17_4combo();\n    }\n}\n</code></pre>\n\n<p>I put in the else to check if it was failing the if. I'm assuming that is where the problem is, but I don't know how to fix it. Any help would be greatly appreciated. The original assignment has been completed, this is my own experimentation. I'm not asking for anyone to do my homework for me. Cheers</p>\n\n<p><strong>EDIT--</strong>\nI have made the suggested changes to the code (Thanks to all for the suggestions). The background color of the container still does not change regardless of the selection I make from the combobox. I'm assuming there are mistakes elsewhere in the code, but I'm at a loss to find them. My expectation is that the background color of the container will change according to the selection I make from the combobox. This is not happening.</p>\n\n<p>The revised code:</p>\n\n<pre><code>import javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.*;\nimport java.util.*;\n\nclass Lab17_4combo extends JFrame implements ActionListener\n{\n    Container container;\n    JComboBox colors;\n\n    public Lab17_4combo()\n    {\n        super(\"ComboBox \");\n        container = this.getContentPane();\n        container.setLayout(new FlowLayout());\n        setSize(300,200);\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        String[] selectColor = {\"Red\", \"Yellow\", \"Blue\", \"Green\", \"Magenta\"};\n        JComboBox colors = new JComboBox(selectColor);\n        colors.setSelectedIndex(-1);\n        colors.addActionListener(this);\n\n        container.add(colors);\n        setVisible(true);\n    }\n    public void actionPerformed(ActionEvent e)\n    {\n        int chgColor;\n\n        if(e.getSource() == colors)\n        {\n            chgColor = colors.getSelectedIndex();\n\n            switch(chgColor)\n            {\n                case 0:\n                    container.setBackground(Color.red);\n                    break;\n                case 1:\n                    container.setBackground(Color.yellow);\n                    break;\n                case 2:\n                    container.setBackground(Color.blue);\n                    break;\n                case 3:\n                    container.setBackground(Color.green);\n                    break;\n                case 4:\n                    container.setBackground(Color.magenta);\n                    break;\n            }\n        }\n    }\n    public static void main(String[] args)\n    {\n        Lab17_4combo s = new Lab17_4combo();\n    }\n}\n</code></pre>\n\n<p>With my limited knowledge of Java I'm not able to see where the mistake(s) may be. Any help would be appreciated.Cheers</p>\n"},{"tags":["java","playframework"],"comments":[{"owner":{"account_id":800107,"reputation":1,"user_id":872354,"display_name":"MakD"},"score":0,"creation_date":1312185168,"post_id":6895253,"comment_id":8208903,"body_markdown":"&quot;D:/Program Files/Java/jdk1.6.0_23&quot;","body":"&quot;D:/Program Files/Java/jdk1.6.0_23&quot;"}],"answers":[{"tags":[],"owner":{"account_id":443779,"reputation":504,"user_id":835209,"display_name":"gred"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1312183449,"creation_date":1312183449,"answer_id":6895320,"question_id":6895253,"body_markdown":"Being able to run java from your command line does NOT indicate that you have set the JAVA_HOME variable. Do you know how to do that?? Or do you know how to check if this variable exist?\r\n\r\nHere is a quick way IF you are using Windows: Right click My Computer (or Computer in Windows 7) then click the tab Advanced then environment variables. In the System variables check if there is an entry with the variable JAVA_HOME. If NOT create one (by clicking new) giving JAVA_HOME in variable name and the path of your jdk in the variable value. IF let&#39;s say, your jdk is installed on the following path: c:\\jdk6 in your pc THEN this should be your variable value. Click Ok, Ok again and then run your app again!\r\n","title":"JAVA_HOME error while &#39;play run&#39; on Windows -- play framework","body":"<p>Being able to run java from your command line does NOT indicate that you have set the JAVA_HOME variable. Do you know how to do that?? Or do you know how to check if this variable exist?</p>\n\n<p>Here is a quick way IF you are using Windows: Right click My Computer (or Computer in Windows 7) then click the tab Advanced then environment variables. In the System variables check if there is an entry with the variable JAVA_HOME. If NOT create one (by clicking new) giving JAVA_HOME in variable name and the path of your jdk in the variable value. IF let's say, your jdk is installed on the following path: c:\\jdk6 in your pc THEN this should be your variable value. Click Ok, Ok again and then run your app again!</p>\n"},{"tags":[],"owner":{"account_id":294406,"reputation":24602,"user_id":598289,"accept_rate":85,"display_name":"SJuan76"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1312183572,"creation_date":1312183572,"answer_id":6895342,"question_id":6895253,"body_markdown":"Have you done `echo %JAVA_HOME%`?\r\n\r\nSeveral issues:\r\n\r\n* `JAVA_HOME` (a variable used by the JVM) is not the same than `PATH` (a variable used by the OS to locate directories where to find executables). Doing `java.exe` just shows that the bin directory of Java is in PATH, not that JAVA_HOME points where it should (or even it exists)\r\n\r\n* Also, Windows usually does not use the `PATH` variable, but instead treats java specially and stores its location in the register (do an `echo %PATH%` to check this).\r\n\r\nIn conclussion: You cannot assume `JAVA_HOME` is set; check for it directly and set it (Control Panel-&gt; System -&gt; Advanced).","title":"JAVA_HOME error while &#39;play run&#39; on Windows -- play framework","body":"<p>Have you done <code>echo %JAVA_HOME%</code>?</p>\n\n<p>Several issues:</p>\n\n<ul>\n<li><p><code>JAVA_HOME</code> (a variable used by the JVM) is not the same than <code>PATH</code> (a variable used by the OS to locate directories where to find executables). Doing <code>java.exe</code> just shows that the bin directory of Java is in PATH, not that JAVA_HOME points where it should (or even it exists)</p></li>\n<li><p>Also, Windows usually does not use the <code>PATH</code> variable, but instead treats java specially and stores its location in the register (do an <code>echo %PATH%</code> to check this).</p></li>\n</ul>\n\n<p>In conclussion: You cannot assume <code>JAVA_HOME</code> is set; check for it directly and set it (Control Panel-> System -> Advanced).</p>\n"},{"tags":[],"owner":{"account_id":205186,"reputation":21,"user_id":453812,"display_name":"deluxouss"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1324071957,"creation_date":1317288615,"answer_id":7595246,"question_id":6895253,"body_markdown":"I had the same problem on Windows 7. `echo %JAVA_HOME%` returned `C:\\Programmes\\Java\\jdk1.7.0`, which seemed correct. However, in Windows 7, even though path looks like that in explorer, the &quot;real&quot; path to use with `cmd` is `C:\\Program Files\\Java\\jdk1.7.0`.\r\n\r\nI updated `JAVA_HOME` and restarted `cmd` &amp;#8212; otherwise, the terminal wouldn&#39;t refresh its variables &amp;#8212; and it worked smoothly.","title":"JAVA_HOME error while &#39;play run&#39; on Windows -- play framework","body":"<p>I had the same problem on Windows 7. <code>echo %JAVA_HOME%</code> returned <code>C:\\Programmes\\Java\\jdk1.7.0</code>, which seemed correct. However, in Windows 7, even though path looks like that in explorer, the \"real\" path to use with <code>cmd</code> is <code>C:\\Program Files\\Java\\jdk1.7.0</code>.</p>\n\n<p>I updated <code>JAVA_HOME</code> and restarted <code>cmd</code> &#8212; otherwise, the terminal wouldn't refresh its variables &#8212; and it worked smoothly.</p>\n"},{"tags":[],"owner":{"account_id":191505,"reputation":7321,"user_id":432115,"accept_rate":64,"display_name":"niels"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1317319563,"creation_date":1317319563,"answer_id":7601513,"question_id":6895253,"body_markdown":"Make sure you use a DOS-Path in JAVA-Home. Meaning no fakes from Win-7 C:\\Programme in real C:\\Program Files and no blank in path.\r\n\r\n    C:\\&gt;dir /x Prog*\r\n\r\n    09.08.2011  13:55    &lt;DIR&gt;          PROGRA~1     Program Files\r\n    21.08.2011  20:25    &lt;DIR&gt;          PROGRA~2     Program Files (x86)\r\n\r\nThis is a safe solution.\r\n\r\necho %JAVA_HOME% is indeed always a good idea to.","title":"JAVA_HOME error while &#39;play run&#39; on Windows -- play framework","body":"<p>Make sure you use a DOS-Path in JAVA-Home. Meaning no fakes from Win-7 C:\\Programme in real C:\\Program Files and no blank in path.</p>\n\n<pre><code>C:\\&gt;dir /x Prog*\n\n09.08.2011  13:55    &lt;DIR&gt;          PROGRA~1     Program Files\n21.08.2011  20:25    &lt;DIR&gt;          PROGRA~2     Program Files (x86)\n</code></pre>\n\n<p>This is a safe solution.</p>\n\n<p>echo %JAVA_HOME% is indeed always a good idea to.</p>\n"},{"tags":[],"owner":{"account_id":447241,"reputation":583,"user_id":840758,"display_name":"NFpeter"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1337595862,"creation_date":1337595862,"answer_id":10683507,"question_id":6895253,"body_markdown":"Set user variable\r\nJAVA_HOME to C:\\Progra~1\\Java\\jdk1.7.0_04\r\n\r\nand\r\n\r\nextend the system variable\r\nPath with %JAVA_HOME%\\bin;\r\n\r\nworks for me","title":"JAVA_HOME error while &#39;play run&#39; on Windows -- play framework","body":"<p>Set user variable\nJAVA_HOME to C:\\Progra~1\\Java\\jdk1.7.0_04</p>\n\n<p>and</p>\n\n<p>extend the system variable\nPath with %JAVA_HOME%\\bin;</p>\n\n<p>works for me</p>\n"},{"tags":[],"owner":{"account_id":17390,"reputation":30942,"user_id":38889,"accept_rate":79,"display_name":"Razzie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1345468401,"creation_date":1345468401,"answer_id":12038377,"question_id":6895253,"body_markdown":"If you have a 64 bit Windows version, make sure you have both the 32bit and 64bit version of Java installed (so there must be a Java directory in both Program Files and Program Files (x86). That was my problem.","title":"JAVA_HOME error while &#39;play run&#39; on Windows -- play framework","body":"<p>If you have a 64 bit Windows version, make sure you have both the 32bit and 64bit version of Java installed (so there must be a Java directory in both Program Files and Program Files (x86). That was my problem.</p>\n"},{"tags":[],"owner":{"account_id":2216417,"reputation":21,"user_id":1956879,"display_name":"Jim Kat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1357618235,"creation_date":1357616923,"answer_id":14207926,"question_id":6895253,"body_markdown":"I updated my `jdk` from `1.6.0_14` to `1.7.0_10` and my `jre6` to `jre7` and had the same problem on XP. \r\nI then deleted `JAVA_HOME` and added it again and it worked.\r\nI also added `JRE_HOME` as a System Variable\r\n\r\n    JAVA_HOME --&gt; C:\\Program Files\\Java\\jdk1.7.0_10\r\n    JRE_HOME --&gt; C:\\Program Files\\Java\\jre7\r\n","title":"JAVA_HOME error while &#39;play run&#39; on Windows -- play framework","body":"<p>I updated my <code>jdk</code> from <code>1.6.0_14</code> to <code>1.7.0_10</code> and my <code>jre6</code> to <code>jre7</code> and had the same problem on XP. \nI then deleted <code>JAVA_HOME</code> and added it again and it worked.\nI also added <code>JRE_HOME</code> as a System Variable</p>\n\n<pre><code>JAVA_HOME --&gt; C:\\Program Files\\Java\\jdk1.7.0_10\nJRE_HOME --&gt; C:\\Program Files\\Java\\jre7\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7015648,"reputation":156,"user_id":5377098,"display_name":"Alison Moura"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687529417,"creation_date":1687529417,"answer_id":76540910,"question_id":6895253,"body_markdown":"Probably overdated here, but in my case, I had to edit the `play.bat` and set JAVA_HOME path:\r\n```\r\n@echo off\r\nset &quot;JAVA_HOME=JAVA_HOME=C:\\Program Files (x86)\\Java\\jre1.8&quot;\r\n&quot;%~dp0python\\python.exe&quot; &quot;%~dp0play&quot; %*\r\n```\r\n\r\nHope it helps.","title":"JAVA_HOME error while &#39;play run&#39; on Windows -- play framework","body":"<p>Probably overdated here, but in my case, I had to edit the <code>play.bat</code> and set JAVA_HOME path:</p>\n<pre><code>@echo off\nset &quot;JAVA_HOME=JAVA_HOME=C:\\Program Files (x86)\\Java\\jre1.8&quot;\n&quot;%~dp0python\\python.exe&quot; &quot;%~dp0play&quot; %*\n</code></pre>\n<p>Hope it helps.</p>\n"}],"owner":{"account_id":800107,"reputation":1,"user_id":872354,"display_name":"MakD"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4784,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":8,"score":0,"last_activity_date":1687529417,"creation_date":1312183013,"question_id":6895253,"body_markdown":"I am getting error while doing &#39;play run&#39; \r\n\r\n&quot;Could not execute the Java executable, please make sure the `JAVA_HOME` environment variable is set properly (the Java executable should reside at JAVA_HOME/bin/java).&quot; \r\n\r\nBut I can confirm that , `JAVA_HOME` is set correctly, as I am able to run &#39;java&#39; command from console i.e. DOS prompt.\r\n\r\nCan anyone please guide me on this?","title":"JAVA_HOME error while &#39;play run&#39; on Windows -- play framework","body":"<p>I am getting error while doing 'play run' </p>\n\n<p>\"Could not execute the Java executable, please make sure the <code>JAVA_HOME</code> environment variable is set properly (the Java executable should reside at JAVA_HOME/bin/java).\" </p>\n\n<p>But I can confirm that , <code>JAVA_HOME</code> is set correctly, as I am able to run 'java' command from console i.e. DOS prompt.</p>\n\n<p>Can anyone please guide me on this?</p>\n"},{"tags":["java","maven","gitlab","continuous-integration","javadoc"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1687527928,"post_id":76540717,"comment_id":134953806,"body_markdown":"There is no JDK22 available.... `Fatal error compiling: error: invalid target release: 22` ... Why do you changed `&lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;` and `&lt;testSourceDirectory&gt;tests&lt;/testSourceDirectory&gt;` ??? Follow convention over configuration....","body":"There is no JDK22 available.... <code>Fatal error compiling: error: invalid target release: 22</code> ... Why do you changed <code>&lt;sourceDirectory&gt;src&lt;&#47;sourceDirectory&gt;</code> and <code>&lt;testSourceDirectory&gt;tests&lt;&#47;testSourceDirectory&gt;</code> ??? Follow convention over configuration...."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1687527983,"post_id":76540717,"comment_id":134953819,"body_markdown":"The problem here is not maven-compiler-plugin the problem is the availability of JDK22 because JDK21 release is NOT yet GA...https://openjdk.org/projects/jdk/","body":"The problem here is not maven-compiler-plugin the problem is the availability of JDK22 because JDK21 release is NOT yet GA...<a href=\"https://openjdk.org/projects/jdk/\" rel=\"nofollow noreferrer\">openjdk.org/projects/jdk</a>"},{"owner":{"account_id":23646042,"reputation":447,"user_id":18197654,"display_name":"xtay2"},"score":0,"creation_date":1687528035,"post_id":76540717,"comment_id":134953831,"body_markdown":"So only general availability is supported?","body":"So only general availability is supported?"},{"owner":{"account_id":23646042,"reputation":447,"user_id":18197654,"display_name":"xtay2"},"score":0,"creation_date":1687528093,"post_id":76540717,"comment_id":134953849,"body_markdown":"Btw i don&#39;t follow the convention because i find it confusing. It introduces an unnecessary amount of packages in a already nested modularized project.","body":"Btw i don&#39;t follow the convention because i find it confusing. It introduces an unnecessary amount of packages in a already nested modularized project."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1687528099,"post_id":76540717,"comment_id":134953853,"body_markdown":"No. If you have access to an EA build you can use that as well... but you have to have installed in your environment... which. I doubt to be installed in GitLab (if you use the public installation)...","body":"No. If you have access to an EA build you can use that as well... but you have to have installed in your environment... which. I doubt to be installed in GitLab (if you use the public installation)..."},{"owner":{"account_id":23646042,"reputation":447,"user_id":18197654,"display_name":"xtay2"},"score":0,"creation_date":1687528153,"post_id":76540717,"comment_id":134953866,"body_markdown":"How can I attach it?","body":"How can I attach it?"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1687528180,"post_id":76540717,"comment_id":134953872,"body_markdown":"`i don&#39;t follow the convention because i find it confusing. It introduces an unnecessary amount of packages in a already nested modularized project.` Why are there supplemental packaged? Simply wrong... `src/main/java` is the location of the production code and `src/test/java` is the location for the unit/integration test code...`src/main/resources` for the production resources etc... I strongly recommend you to follow the conventions...","body":"<code>i don&#39;t follow the convention because i find it confusing. It introduces an unnecessary amount of packages in a already nested modularized project.</code> Why are there supplemental packaged? Simply wrong... <code>src&#47;main&#47;java</code> is the location of the production code and <code>src&#47;test&#47;java</code> is the location for the unit/integration test code...<code>src&#47;main&#47;resources</code> for the production resources etc... I strongly recommend you to follow the conventions..."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1687528196,"post_id":76540717,"comment_id":134953878,"body_markdown":"`How can I attach it?` What do you mean by that?","body":"<code>How can I attach it?</code> What do you mean by that?"},{"owner":{"account_id":23646042,"reputation":447,"user_id":18197654,"display_name":"xtay2"},"score":0,"creation_date":1687528237,"post_id":76540717,"comment_id":134953882,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/254218/discussion-between-xtay2-and-khmarbaise).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/254218/discussion-between-xtay2-and-khmarbaise\">continue this discussion in chat</a>."},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1687587966,"post_id":76540717,"comment_id":134960790,"body_markdown":"@xtay2 maven is a strange beast - you should consider following its conventions unless you really must break them.","body":"@xtay2 maven is a strange beast - you should consider following its conventions unless you really must break them."}],"answers":[{"tags":[],"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1687529220,"creation_date":1687528868,"answer_id":76540852,"question_id":76540717,"body_markdown":"The simple problem here is that at the moment (time of writing this anser) no EA build of JDK 22 simply exist...\r\n\r\n\r\nUpdated:\r\n\r\nSome hints. If you already use properties like:\r\n\r\n&lt;!-- language:language-xml --&gt;\r\n\r\n     &lt;properties&gt;\r\n            &lt;maven.compiler.source&gt;22&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;22&lt;/maven.compiler.target&gt;\r\n     &lt;/properties&gt;\r\n\r\nYou don&#39;t need to define this:\r\n\r\n&lt;!-- language:language-xml --&gt;\r\n\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.11.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;22&lt;/source&gt;\r\n                    &lt;target&gt;22&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n\r\nsince JDK9+ you should use:\r\n\r\n&lt;!-- language:language-xml --&gt;\r\n\r\n     &lt;properties&gt;\r\n            &lt;maven.compiler.release&gt;21&lt;/maven.compiler.release&gt;\r\n     &lt;/properties&gt;\r\n\r\nAlso a plugin should be defined in pluginManagement instead.\r\n\r\nAlso convention over configuration has a lot of advantages. Every project has the same structure and that makes it easier to understand and to on-board. So I strongly recommend to follow convention-over-configuration. (default directory layout!)","title":"Javadocs on push with Gitlab Pages with Maven Pipeline in jdk22","body":"<p>The simple problem here is that at the moment (time of writing this anser) no EA build of JDK 22 simply exist...</p>\n<p>Updated:</p>\n<p>Some hints. If you already use properties like:</p>\n\n<pre><code> &lt;properties&gt;\n        &lt;maven.compiler.source&gt;22&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;22&lt;/maven.compiler.target&gt;\n &lt;/properties&gt;\n</code></pre>\n<p>You don't need to define this:</p>\n\n<pre><code>    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.11.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;22&lt;/source&gt;\n                &lt;target&gt;22&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n</code></pre>\n<p>since JDK9+ you should use:</p>\n\n<pre><code> &lt;properties&gt;\n        &lt;maven.compiler.release&gt;21&lt;/maven.compiler.release&gt;\n &lt;/properties&gt;\n</code></pre>\n<p>Also a plugin should be defined in pluginManagement instead.</p>\n<p>Also convention over configuration has a lot of advantages. Every project has the same structure and that makes it easier to understand and to on-board. So I strongly recommend to follow convention-over-configuration. (default directory layout!)</p>\n"}],"owner":{"account_id":23646042,"reputation":447,"user_id":18197654,"display_name":"xtay2"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":177,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76540852,"answer_count":1,"score":0,"last_activity_date":1687529220,"creation_date":1687527673,"question_id":76540717,"body_markdown":"I have a Maven project running on `jdk22` for which I try to generate JavaDocs on Gitlab with CI/CD.\r\n\r\nThis is my `.gitlab-ci.yml`\r\n```yml\r\nimage: maven:latest\r\n\r\npages:\r\n  stage: deploy\r\n  script:\r\n    - mvn javadoc:aggregate # Generate Javadocs\r\n    - mkdir public          # GitLab Pages requires your site to be in a &#39;public&#39; directory\r\n    - cp -r target/site/apidocs/* public  # Copy Javadocs to the &#39;public&#39; directory\r\n  artifacts:\r\n    paths:\r\n      - public\r\n  only:\r\n    - main\r\n```\r\n\r\nThis is the relevant part from my `pom.xml`\r\n\r\n```xml\r\n...\r\n    &lt;modules&gt;\r\n        &lt;module&gt;core&lt;/module&gt;\r\n        &lt;module&gt;shell&lt;/module&gt;\r\n        &lt;module&gt;storage&lt;/module&gt;\r\n        &lt;module&gt;json&lt;/module&gt;\r\n        &lt;module&gt;utility&lt;/module&gt;\r\n    &lt;/modules&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\r\n        &lt;testSourceDirectory&gt;tests&lt;/testSourceDirectory&gt;\r\n\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.11.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;22&lt;/source&gt;\r\n                    &lt;target&gt;22&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;22&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;22&lt;/maven.compiler.target&gt;\r\n    &lt;/properties&gt;\r\n...\r\n```\r\nAnd this the log from the failed pipeline execution.\r\n```\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.11.0:compile (default-compile) on project core: Fatal error compiling: error: invalid target release: 22 -&gt; [Help 1]\r\n[ERROR] \r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR] \r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n```\r\n\r\nIt seems as if the maven compiler plugin has problems with `jdk22`. Is this version not supported as it is still in early access?","title":"Javadocs on push with Gitlab Pages with Maven Pipeline in jdk22","body":"<p>I have a Maven project running on <code>jdk22</code> for which I try to generate JavaDocs on Gitlab with CI/CD.</p>\n<p>This is my <code>.gitlab-ci.yml</code></p>\n<pre class=\"lang-yaml prettyprint-override\"><code>image: maven:latest\n\npages:\n  stage: deploy\n  script:\n    - mvn javadoc:aggregate # Generate Javadocs\n    - mkdir public          # GitLab Pages requires your site to be in a 'public' directory\n    - cp -r target/site/apidocs/* public  # Copy Javadocs to the 'public' directory\n  artifacts:\n    paths:\n      - public\n  only:\n    - main\n</code></pre>\n<p>This is the relevant part from my <code>pom.xml</code></p>\n<pre class=\"lang-xml prettyprint-override\"><code>...\n    &lt;modules&gt;\n        &lt;module&gt;core&lt;/module&gt;\n        &lt;module&gt;shell&lt;/module&gt;\n        &lt;module&gt;storage&lt;/module&gt;\n        &lt;module&gt;json&lt;/module&gt;\n        &lt;module&gt;utility&lt;/module&gt;\n    &lt;/modules&gt;\n\n    &lt;build&gt;\n        &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\n        &lt;testSourceDirectory&gt;tests&lt;/testSourceDirectory&gt;\n\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.11.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;22&lt;/source&gt;\n                    &lt;target&gt;22&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;22&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;22&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n...\n</code></pre>\n<p>And this the log from the failed pipeline execution.</p>\n<pre><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.11.0:compile (default-compile) on project core: Fatal error compiling: error: invalid target release: 22 -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\n</code></pre>\n<p>It seems as if the maven compiler plugin has problems with <code>jdk22</code>. Is this version not supported as it is still in early access?</p>\n"},{"tags":["java","swing","diagram","jgraphx"],"comments":[{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":0,"creation_date":1688109733,"post_id":76523972,"comment_id":135032468,"body_markdown":"You can position the elements explicitly instead of reyling on the automatic layout.","body":"You can position the elements explicitly instead of reyling on the automatic layout."},{"owner":{"account_id":95716,"reputation":6589,"user_id":260516,"accept_rate":63,"display_name":"Jesse Barnum"},"score":0,"creation_date":1688389582,"post_id":76523972,"comment_id":135063661,"body_markdown":"I&#39;d do that if my actual production application was as simple as this example, but it needs to be rendered for a complex diagram whose connections change every time the process executes.","body":"I&#39;d do that if my actual production application was as simple as this example, but it needs to be rendered for a complex diagram whose connections change every time the process executes."}],"owner":{"account_id":95716,"reputation":6589,"user_id":260516,"accept_rate":63,"display_name":"Jesse Barnum"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687528988,"creation_date":1687355023,"question_id":76523972,"body_markdown":"I&#39;m currently attempting to use JGraphX to create a diagram in a Swing application. My goal is to achieve something similar to this (this should be a directed graph, I just didn&#39;t have arrowheads in my mockup tool):\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nUsing JGraphX, the closest I can achieve is this:\r\n[![enter image description here][2]][2]\r\n\r\nThe &quot;Bottom&quot; node should be below the grouping, but it renders next to it.\r\n\r\nI&#39;m hoping that somebody can either find the problem with my code, or recommend a different diagram / graphing Java library that can achieve the output I&#39;m looking for.\r\n\r\nHere is my current drawing code:\r\n```\r\nimport com.mxgraph.layout.hierarchical.mxHierarchicalLayout;\r\nimport com.mxgraph.swing.mxGraphComponent;\r\nimport com.mxgraph.view.mxGraph;\r\n\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\n\r\npublic class StaticGraphTest extends JFrame {\r\n\tpublic StaticGraphTest() {\r\n\t\tmxGraph graph = new mxGraph();\r\n\t\tObject parent = graph.getDefaultParent();\r\n\r\n\t\tgraph.getModel().beginUpdate();\r\n\t\ttry {\r\n\t\t\tObject item1 = graph.insertVertex( parent, null, &quot;Top&quot;, 0, 0, 80, 30 );\r\n\t\t\tObject grouping = graph.insertVertex( parent, null, &quot;&quot;, 0, 0, 80, 100 );\r\n\t\t\tgraph.insertEdge( parent, null, &quot;&quot;, item1, grouping );\r\n\r\n\t\t\t//Add items inside grouping\r\n\t\t\tObject sub1 = graph.insertVertex( grouping, null, &quot;Subitem A&quot;, 0, 0, 80, 30 );\r\n\t\t\tgraph.insertEdge( grouping, null, &quot;&quot;, grouping, sub1 );\r\n\t\t\tObject sub2 = graph.insertVertex( grouping, null, &quot;Subitem B&quot;, 0, 0, 80, 30 );\r\n\t\t\tgraph.insertEdge( grouping, null, &quot;&quot;, grouping, sub2 );\r\n\t\t\t\r\n\t\t\tObject item2 = graph.insertVertex( parent, null, &quot;Bottom&quot;, 0, 0, 80, 30 );\r\n\t\t\tgraph.insertEdge( parent, null, &quot;&quot;, grouping, item2 );\r\n\r\n\t\t\tmxHierarchicalLayout layout = new mxHierarchicalLayout( graph );\r\n\t\t\t//layout.setResizeParent( true );\r\n\t\t\tlayout.setOrientation( SwingConstants.NORTH );\r\n\t\t\tlayout.execute( parent );\r\n\t\t} finally {\r\n\t\t\tgraph.getModel().endUpdate();\r\n\t\t}\r\n\r\n\t\tmxGraphComponent graphComponent = new mxGraphComponent( graph );\r\n\r\n\t\t//graphComponent.setEnabled( false ); //Make diagram read-only\r\n\t\tgetContentPane().setLayout( new BorderLayout() );\r\n\t\tgetContentPane().add( graphComponent, BorderLayout.CENTER );\r\n\t}\r\n\r\n\tpublic static void main( String[] args ) {\r\n\t\tEventQueue.invokeLater( ()-&gt;{\r\n\t\t\tStaticGraphTest frame = new StaticGraphTest();\r\n\t\t\tframe.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );\r\n\t\t\tframe.setSize( 400, 320 );\r\n\t\t\tframe.setVisible( true );\r\n\t\t} );\r\n\t}\r\n}\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/1TpNh.png\r\n  [2]: https://i.stack.imgur.com/1yV4q.png","title":"How to draw a hierarchical diagram that contains groups?","body":"<p>I'm currently attempting to use JGraphX to create a diagram in a Swing application. My goal is to achieve something similar to this (this should be a directed graph, I just didn't have arrowheads in my mockup tool):</p>\n<p><a href=\"https://i.stack.imgur.com/1TpNh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1TpNh.png\" alt=\"enter image description here\" /></a></p>\n<p>Using JGraphX, the closest I can achieve is this:\n<a href=\"https://i.stack.imgur.com/1yV4q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1yV4q.png\" alt=\"enter image description here\" /></a></p>\n<p>The &quot;Bottom&quot; node should be below the grouping, but it renders next to it.</p>\n<p>I'm hoping that somebody can either find the problem with my code, or recommend a different diagram / graphing Java library that can achieve the output I'm looking for.</p>\n<p>Here is my current drawing code:</p>\n<pre><code>import com.mxgraph.layout.hierarchical.mxHierarchicalLayout;\nimport com.mxgraph.swing.mxGraphComponent;\nimport com.mxgraph.view.mxGraph;\n\nimport javax.swing.*;\nimport java.awt.*;\n\npublic class StaticGraphTest extends JFrame {\n    public StaticGraphTest() {\n        mxGraph graph = new mxGraph();\n        Object parent = graph.getDefaultParent();\n\n        graph.getModel().beginUpdate();\n        try {\n            Object item1 = graph.insertVertex( parent, null, &quot;Top&quot;, 0, 0, 80, 30 );\n            Object grouping = graph.insertVertex( parent, null, &quot;&quot;, 0, 0, 80, 100 );\n            graph.insertEdge( parent, null, &quot;&quot;, item1, grouping );\n\n            //Add items inside grouping\n            Object sub1 = graph.insertVertex( grouping, null, &quot;Subitem A&quot;, 0, 0, 80, 30 );\n            graph.insertEdge( grouping, null, &quot;&quot;, grouping, sub1 );\n            Object sub2 = graph.insertVertex( grouping, null, &quot;Subitem B&quot;, 0, 0, 80, 30 );\n            graph.insertEdge( grouping, null, &quot;&quot;, grouping, sub2 );\n            \n            Object item2 = graph.insertVertex( parent, null, &quot;Bottom&quot;, 0, 0, 80, 30 );\n            graph.insertEdge( parent, null, &quot;&quot;, grouping, item2 );\n\n            mxHierarchicalLayout layout = new mxHierarchicalLayout( graph );\n            //layout.setResizeParent( true );\n            layout.setOrientation( SwingConstants.NORTH );\n            layout.execute( parent );\n        } finally {\n            graph.getModel().endUpdate();\n        }\n\n        mxGraphComponent graphComponent = new mxGraphComponent( graph );\n\n        //graphComponent.setEnabled( false ); //Make diagram read-only\n        getContentPane().setLayout( new BorderLayout() );\n        getContentPane().add( graphComponent, BorderLayout.CENTER );\n    }\n\n    public static void main( String[] args ) {\n        EventQueue.invokeLater( ()-&gt;{\n            StaticGraphTest frame = new StaticGraphTest();\n            frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );\n            frame.setSize( 400, 320 );\n            frame.setVisible( true );\n        } );\n    }\n}\n</code></pre>\n"},{"tags":["playframework","bundle","java"],"answers":[{"tags":[],"owner":{"account_id":1257456,"reputation":559,"user_id":1216630,"accept_rate":100,"display_name":"Alexander Ponomarenko"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1330630432,"creation_date":1330630432,"answer_id":9522718,"question_id":9522607,"body_markdown":"How are you starting Play? If you why not just add start.sh/start.bat that will set JAVA_HOME to current_folder/jdk?\r\n\r\nYou can also package your Play application as WAR file and use with portable tomcat or other web server.\r\n\r\nPer Play command description:\r\n&gt; ~ The script first tries to locate the java command using the\r\n&gt; $JAVA_HOME environment variable (from $JAVA_HOME/bin). ~ If the\r\n&gt; $JAVA_HOME variable is not defined, the default java command available\r\n&gt; from the PATH is used.\r\n\r\nSo you can try to add Java/bin to your path, or try to add &quot;java&quot; to your working directory where you start play.\r\n\r\nAs a last option, you can modify `play\\framework\\pym\\play\\application.py` and add your path directly in it, modify this part:\r\n \r\n\r\n       def java_path(self):\r\n            if not os.environ.has_key(&#39;JAVA_HOME&#39;):\r\n                return &quot;java&quot;\r\n            else:\r\n                return os.path.normpath(&quot;%s/bin/java&quot; % os.environ[&#39;JAVA_HOME&#39;])\r\n\r\n","title":"Use specific Java path for Play! Framework","body":"<p>How are you starting Play? If you why not just add start.sh/start.bat that will set JAVA_HOME to current_folder/jdk?</p>\n\n<p>You can also package your Play application as WAR file and use with portable tomcat or other web server.</p>\n\n<p>Per Play command description:</p>\n\n<blockquote>\n  <p>~ The script first tries to locate the java command using the\n  $JAVA_HOME environment variable (from $JAVA_HOME/bin). ~ If the\n  $JAVA_HOME variable is not defined, the default java command available\n  from the PATH is used.</p>\n</blockquote>\n\n<p>So you can try to add Java/bin to your path, or try to add \"java\" to your working directory where you start play.</p>\n\n<p>As a last option, you can modify <code>play\\framework\\pym\\play\\application.py</code> and add your path directly in it, modify this part:</p>\n\n<pre><code>   def java_path(self):\n        if not os.environ.has_key('JAVA_HOME'):\n            return \"java\"\n        else:\n            return os.path.normpath(\"%s/bin/java\" % os.environ['JAVA_HOME'])\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1724698,"reputation":1194,"user_id":1579667,"accept_rate":96,"display_name":"Benj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1480516542,"creation_date":1480516542,"answer_id":40891061,"question_id":9522607,"body_markdown":"In complement to @AlexanderPonomarenko&#39;s answer and @Indigenuity&#39;s comment (they both got the point), here is the workaround that works for me on Win7 x64 with Play 1.4.2:\r\n\r\nI edited the `play.bat` file located at Play&#39;s root, and setted its content to :\r\n\r\n    echo off\r\n    set &quot;JAVA_HOME=C:\\Program Files (x86)\\Java\\jre1.8.0_112&quot;\r\n    &quot;%~dp0python\\python.exe&quot; &quot;%~dp0play&quot; %*\r\n\r\nNote that this works for my use case with Java 8u112 x86, you have to set it to what you need.\r\n\r\nAlso note the syntax for declaring the `JAVA_HOME` enclosed into double quotes because of the spaces.\r\n\r\nEnjoy :)","title":"Use specific Java path for Play! Framework","body":"<p>In complement to @AlexanderPonomarenko's answer and @Indigenuity's comment (they both got the point), here is the workaround that works for me on Win7 x64 with Play 1.4.2:</p>\n\n<p>I edited the <code>play.bat</code> file located at Play's root, and setted its content to :</p>\n\n<pre><code>echo off\nset \"JAVA_HOME=C:\\Program Files (x86)\\Java\\jre1.8.0_112\"\n\"%~dp0python\\python.exe\" \"%~dp0play\" %*\n</code></pre>\n\n<p>Note that this works for my use case with Java 8u112 x86, you have to set it to what you need.</p>\n\n<p>Also note the syntax for declaring the <code>JAVA_HOME</code> enclosed into double quotes because of the spaces.</p>\n\n<p>Enjoy :)</p>\n"}],"owner":{"account_id":354910,"reputation":9442,"user_id":693542,"accept_rate":88,"display_name":"Indigenuity"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5876,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":9522718,"answer_count":2,"score":4,"last_activity_date":1687528250,"creation_date":1330629946,"question_id":9522607,"body_markdown":"With the the experimental goal in mind of making a completely portable Play! application, without worrying about whether the host machine has Play! or even Java, I&#39;m trying to find a way to tell Play! where to look for Java, rather than looking at the environment variable JAVA_HOME.  \r\n\r\nBundling the framework itself with the application isn&#39;t very difficult, and I have even found a way to &quot;embed&quot; MySQL, but I haven&#39;t found a way to bundle Java and make Play! use the JRE I have in the same directory.  Is this possible?","title":"Use specific Java path for Play! Framework","body":"<p>With the the experimental goal in mind of making a completely portable Play! application, without worrying about whether the host machine has Play! or even Java, I'm trying to find a way to tell Play! where to look for Java, rather than looking at the environment variable JAVA_HOME.  </p>\n\n<p>Bundling the framework itself with the application isn't very difficult, and I have even found a way to \"embed\" MySQL, but I haven't found a way to bundle Java and make Play! use the JRE I have in the same directory.  Is this possible?</p>\n"},{"tags":["java","spring","spring-boot","spring-data","datasource"],"comments":[{"owner":{"account_id":11116330,"reputation":656,"user_id":8160553,"display_name":"dimwittedanimal"},"score":0,"creation_date":1523539620,"post_id":49797785,"comment_id":86610146,"body_markdown":"try removing the quotes, since it appears to be the only line with them","body":"try removing the quotes, since it appears to be the only line with them"},{"owner":{"account_id":5871401,"reputation":2092,"user_id":4935554,"accept_rate":40,"display_name":"Ng Sharma"},"score":0,"creation_date":1523539729,"post_id":49797785,"comment_id":86610212,"body_markdown":"Thanks @dimwittedanimal","body":"Thanks @dimwittedanimal"},{"owner":{"account_id":11116330,"reputation":656,"user_id":8160553,"display_name":"dimwittedanimal"},"score":1,"creation_date":1523540348,"post_id":49797785,"comment_id":86610709,"body_markdown":"Please feel free to accept Elarbi&#39;s answer, as it&#39;s the same answer as mine.","body":"Please feel free to accept Elarbi&#39;s answer, as it&#39;s the same answer as mine."}],"answers":[{"tags":[],"owner":{"account_id":9833181,"reputation":1637,"user_id":7284304,"accept_rate":67,"display_name":"Elarbi Mohamed Aymen"},"down_vote_count":0,"up_vote_count":23,"is_accepted":true,"score":23,"last_activity_date":1523539666,"creation_date":1523539666,"answer_id":49797840,"question_id":49797785,"body_markdown":"replace this :\r\n\r\n    spring.datasource.url=&quot;jdbc:mysql://localhost:3306/customerdb?useSSL=false&quot;\r\nwith this :\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/customerdb?useSSL=false","title":"URL must start with &#39;jdbc&#39; in SpringBoot","body":"<p>replace this :</p>\n\n<pre><code>spring.datasource.url=\"jdbc:mysql://localhost:3306/customerdb?useSSL=false\"\n</code></pre>\n\n<p>with this :</p>\n\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/customerdb?useSSL=false\n</code></pre>\n"}],"owner":{"account_id":5871401,"reputation":2092,"user_id":4935554,"accept_rate":40,"display_name":"Ng Sharma"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26157,"favorite_count":0,"down_vote_count":1,"up_vote_count":8,"accepted_answer_id":49797840,"answer_count":1,"score":7,"last_activity_date":1687527893,"creation_date":1523539495,"question_id":49797785,"body_markdown":"My application was running but when, I got application error. I tried several times the same thing happening. I checked database connection and everything is fine. These are my logs\r\n\r\n**Exception**\r\n\r\n\r\n----------\r\n\r\n    Caused by: java.lang.IllegalArgumentException: URL must start with &#39;jdbc&#39;\r\n    at org.springframework.util.Assert.isTrue(Assert.java:116) ~[spring-core-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    at org.springframework.boot.jdbc.DatabaseDriver.fromJdbcUrl(DatabaseDriver.java:268) ~[spring-boot-2.0.1.RELEASE.jar:2.0.1.RELEASE]\r\n    at org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.determineDriverClassName(DataSourceProperties.java:230) ~[spring-boot-autoconfigure-2.0.1.RELEASE.jar:2.0.1.RELEASE]\r\n    at org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.initializeDataSourceBuilder(DataSourceProperties.java:176) ~[spring-boot-autoconfigure-2.0.1.RELEASE.jar:2.0.1.RELEASE]\r\n    at org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration.createDataSource(DataSourceConfiguration.java:43) ~[spring-boot-autoconfigure-2.0.1.RELEASE.jar:2.0.1.RELEASE]\r\n    at org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration$Hikari.dataSource(DataSourceConfiguration.java:81) ~[spring-boot-autoconfigure-2.0.1.RELEASE.jar:2.0.1.RELEASE]\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_161]\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[na:1.8.0_161]\r\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[na:1.8.0_161]\r\n    at java.lang.reflect.Method.invoke(Unknown Source) ~[na:1.8.0_161]\r\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    ... 40 common frames omitted\r\n\r\n**application.properties**\r\n\r\n\r\n----------\r\n\r\n    #======================\r\n    # DATA SOURCE\r\n    #=====================\r\n    \r\n    spring.datasource.url=&quot;jdbc:mysql://localhost:3306/customerdb?useSSL=false&quot;\r\n    spring.datasource.username=root\r\n    spring.datasource.password=root\r\n    #spring.datasource.driver-class-name=com.mysql.jdbc.Driver\r\n    spring.datasource.dbcp2.test-while-idle=true\r\n    spring.datasource.dbcp2.validation-query= SELECT 1\r\n    \r\n    \r\n    #============================\r\n    # JPA/Hibernate\r\n    #===========================\r\n    spring.jpa.show-sql=true\r\n    spring.jpa.hibernate.ddl-auto=create-drop\r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5Dialect\r\n    spring.jpa.hibernate.naming.physical-strategy=org.springframework.boot.orm.jpa.hibernate.SpringPhysicalNamingStrategy\r\n    \r\n    #===================================================================\r\n    # Spring Security / Queries for AuthenticationManagerBuilder\r\n    #===================================================================\r\n    spring.queries.users-query=select email,password active form user where email=?\r\n    spring.queries.roles-query=select u.email, r.role from user u inner join user_role ur on(u.user_id=ur.user_id) inner join role r on(ur.role_id=r.role_id) where u.email=?\r\n    \r\n    # ===============================\r\n    # Thymeleaf configurations\r\n    # ===============================\r\n    spring.thymeleaf.mode=LEGACYHTML5\r\n    spring.thymeleaf.cache=false\r\n    \r\n    #====================================\r\n    #LOGGING\r\n    #====================================\r\n    logging.level.root=warn\r\n    logging.level.org.org.springframework.web=debug\r\n    logging.level.org.org.Hibernate=error","title":"URL must start with &#39;jdbc&#39; in SpringBoot","body":"<p>My application was running but when, I got application error. I tried several times the same thing happening. I checked database connection and everything is fine. These are my logs</p>\n\n<p><strong>Exception</strong></p>\n\n<hr>\n\n<pre><code>Caused by: java.lang.IllegalArgumentException: URL must start with 'jdbc'\nat org.springframework.util.Assert.isTrue(Assert.java:116) ~[spring-core-5.0.5.RELEASE.jar:5.0.5.RELEASE]\nat org.springframework.boot.jdbc.DatabaseDriver.fromJdbcUrl(DatabaseDriver.java:268) ~[spring-boot-2.0.1.RELEASE.jar:2.0.1.RELEASE]\nat org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.determineDriverClassName(DataSourceProperties.java:230) ~[spring-boot-autoconfigure-2.0.1.RELEASE.jar:2.0.1.RELEASE]\nat org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.initializeDataSourceBuilder(DataSourceProperties.java:176) ~[spring-boot-autoconfigure-2.0.1.RELEASE.jar:2.0.1.RELEASE]\nat org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration.createDataSource(DataSourceConfiguration.java:43) ~[spring-boot-autoconfigure-2.0.1.RELEASE.jar:2.0.1.RELEASE]\nat org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration$Hikari.dataSource(DataSourceConfiguration.java:81) ~[spring-boot-autoconfigure-2.0.1.RELEASE.jar:2.0.1.RELEASE]\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_161]\nat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[na:1.8.0_161]\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[na:1.8.0_161]\nat java.lang.reflect.Method.invoke(Unknown Source) ~[na:1.8.0_161]\nat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n... 40 common frames omitted\n</code></pre>\n\n<p><strong>application.properties</strong></p>\n\n<hr>\n\n<pre><code>#======================\n# DATA SOURCE\n#=====================\n\nspring.datasource.url=\"jdbc:mysql://localhost:3306/customerdb?useSSL=false\"\nspring.datasource.username=root\nspring.datasource.password=root\n#spring.datasource.driver-class-name=com.mysql.jdbc.Driver\nspring.datasource.dbcp2.test-while-idle=true\nspring.datasource.dbcp2.validation-query= SELECT 1\n\n\n#============================\n# JPA/Hibernate\n#===========================\nspring.jpa.show-sql=true\nspring.jpa.hibernate.ddl-auto=create-drop\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5Dialect\nspring.jpa.hibernate.naming.physical-strategy=org.springframework.boot.orm.jpa.hibernate.SpringPhysicalNamingStrategy\n\n#===================================================================\n# Spring Security / Queries for AuthenticationManagerBuilder\n#===================================================================\nspring.queries.users-query=select email,password active form user where email=?\nspring.queries.roles-query=select u.email, r.role from user u inner join user_role ur on(u.user_id=ur.user_id) inner join role r on(ur.role_id=r.role_id) where u.email=?\n\n# ===============================\n# Thymeleaf configurations\n# ===============================\nspring.thymeleaf.mode=LEGACYHTML5\nspring.thymeleaf.cache=false\n\n#====================================\n#LOGGING\n#====================================\nlogging.level.root=warn\nlogging.level.org.org.springframework.web=debug\nlogging.level.org.org.Hibernate=error\n</code></pre>\n"},{"tags":["java","solace"],"answers":[{"tags":[],"owner":{"account_id":1367993,"reputation":473,"user_id":1304010,"display_name":"Mrc0113"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1687527815,"creation_date":1687527815,"answer_id":76540736,"question_id":76538307,"body_markdown":"Are you using a [CachingConnectionFactory][1]? You want to make sure you aren&#39;t creating and tearing down a connection and everything that goes with it for every message. \r\n\r\nExample using Spring Boot: https://tutorials.solace.dev/spring/spring-boot-autoconfigure/#SpringBootSenderjava\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jms/connection/CachingConnectionFactory.html","title":"Solace keeps instantiating new TcpClientChannel","body":"<p>Are you using a <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jms/connection/CachingConnectionFactory.html\" rel=\"nofollow noreferrer\">CachingConnectionFactory</a>? You want to make sure you aren't creating and tearing down a connection and everything that goes with it for every message.</p>\n<p>Example using Spring Boot: <a href=\"https://tutorials.solace.dev/spring/spring-boot-autoconfigure/#SpringBootSenderjava\" rel=\"nofollow noreferrer\">https://tutorials.solace.dev/spring/spring-boot-autoconfigure/#SpringBootSenderjava</a></p>\n"}],"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76540736,"answer_count":1,"score":1,"last_activity_date":1687527815,"creation_date":1687508828,"question_id":76538307,"body_markdown":"I wrote 25 csv files (each with about 1000+ entries) to solace. When I start replaying all the messages available in queue and publishing the messages, after a while, I get an error like this:\r\n\r\n    Client-17280: Connecting to host &#39;orig=tcp://vklnld2983:55555, scheme=tcp://, host=vklnld2983, port=55555&#39; (host 1 of 1, smfclient 17280, attempt 1 of 1, this_host_attempt: 1 of 1) \r\n    Client-17281: Connecting to host &#39;orig=tcp://vklnld2983:55555, scheme=tcp://, host=vklnld2983, port=55555&#39; (host 1 of 1, smfclient 17281, attempt 1 of 1, this_host_attempt: 1 of 1)\r\n    Client-17282: Connecting to host &#39;orig=tcp://vklnld2983:55555, scheme=tcp://, host=vklnld2983, port=55555&#39; (host 1 of 1, smfclient 17282, attempt 1 of 1, this_host_attempt: 1 of 1)\r\n    Client-17280: Connection attempt failed to host &#39;vklnld2983&#39; ConnectException com.solacesystems.jcsmp.JCSMPTransportException: (Client name: HKGITDW137306/29042/87494380/kMGp65FuY3   Local port: -1   Remote addr: vklnld2983  Remote port: 55555) - Error communicating with the router. cause: java.net.ConnectException: Connection refused ((Client name: HKGITDW137306/29042/87494380/kMGp65FuY3   Local port: -1   Remote addr: vklnld2983  Remote port: 55555) - )\r\n    Client-17281: Connection attempt failed to host &#39;vklnld2983&#39; ConnectException com.solacesystems.jcsmp.JCSMPTransportException: (Client name: HKGITDW137306/29042/874a4381/TExAJ1qMsJ   Local port: -1   Remote addr: vklnld2983  Remote port: 55555) - Error communicating with the router. cause: java.net.ConnectException: Connection refused ((Client name: HKGITDW137306/29042/874a4381/TExAJ1qMsJ   Local port: -1   Remote addr: vklnld2983  Remote port: 55555) - )\r\n    Client-17282: Connection attempt failed to host &#39;vklnld2983&#39; ConnectException com.solacesystems.jcsmp.JCSMPTransportException: (Client name: HKGITDW137306/29042/874b4382/GViVP_ZJ_v   Local port: -1   Remote addr: vklnld2983  Remote port: 55555) - Error communicating with the router. cause: java.net.ConnectException: Connection refused ((Client name: HKGITDW137306/29042/874b4382/GViVP_ZJ_v   Local port: -1   Remote addr: vklnld2983  Remote port: 55555) - )\r\n    org.springframework.jms.UncategorizedJmsException: Uncategorized exception occurred during JMS processing; nested exception is javax.jms.JMSException: Error creating connection - transport error ((Client name: HKGITDW137306/29042/874a4381/TExAJ1qMsJ   Local port: -1   Remote addr: vklnld2983  Remote port: 55555) - Error communicating with the router.)\r\n    \tat org.springframework.jms.support.JmsUtils.convertJmsAccessException(JmsUtils.java:311) ~[spring-jms-5.3.24.jar:5.3.24]\r\n    \tat org.springframework.jms.support.JmsAccessor.convertJmsAccessException(JmsAccessor.java:185) ~[spring-jms-5.3.24.jar:5.3.24]\r\n    \tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:507) ~[spring-jms-5.3.24.jar:5.3.24]\r\n    \tat org.springframework.jms.core.JmsTemplate.send(JmsTemplate.java:584) ~[spring-jms-5.3.24.jar:5.3.24]\r\n    \tat org.springframework.jms.core.JmsTemplate.convertAndSend(JmsTemplate.java:661) ~[spring-jms-5.3.24.jar:5.3.24]\r\n    \tat com.clsa.aperture.service.inventory.InventoryService.lambda$onEvents$13(InventoryService.java:281) ~[classes/:?]\r\n    \tat java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183) ~[?:?]\r\n    \tat java.util.HashMap$EntrySpliterator.forEachRemaining(HashMap.java:1850) ~[?:?]\r\n    \tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[?:?]\r\n    \tat java.util.stream.ForEachOps$ForEachTask.compute(ForEachOps.java:290) ~[?:?]\r\n    \tat java.util.concurrent.CountedCompleter.exec(CountedCompleter.java:754) ~[?:?]\r\n    \tat java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373) ~[?:?]\r\n    \tat java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182) ~[?:?]\r\n    \tat java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655) ~[?:?]\r\n    \tat java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622) ~[?:?]\r\n    \tat java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165) ~[?:?]\r\n    Caused by: javax.jms.JMSException: Error creating connection - transport error ((Client name: HKGITDW137306/29042/874a4381/TExAJ1qMsJ   Local port: -1   Remote addr: vklnld2983  Remote port: 55555) - Error communicating with the router.)\r\n    \tat jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[?:?]\r\n    \tat jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[?:?]\r\n    \tat jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[?:?]\r\n    \tat java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[?:?]\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:480) ~[?:?]\r\n    \tat com.solacesystems.jms.impl.JMSExceptionValue.newInstance(JMSExceptionValue.java:36) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jms.impl.JCSMPExceptionMapper$ArrayListMapper.get(JCSMPExceptionMapper.java:32) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jms.impl.JCSMPExceptionMapper.get(JCSMPExceptionMapper.java:95) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jms.impl.Validator.createJMSException(Validator.java:587) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jms.SolConnection.&lt;init&gt;(SolConnection.java:186) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jms.SolConnection.&lt;init&gt;(SolConnection.java:97) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jms.SolConnectionFactoryImpl.createConnection(SolConnectionFactoryImpl.java:114) ~[sol-jms-10.17.0.jar:?]\r\n    \tat org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:196) ~[spring-jms-5.3.24.jar:5.3.24]\r\n    \tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:494) ~[spring-jms-5.3.24.jar:5.3.24]\r\n    \t... 13 more\r\n    Caused by: com.solacesystems.jcsmp.JCSMPTransportException: (Client name: HKGITDW137306/29042/874a4381/TExAJ1qMsJ   Local port: -1   Remote addr: vklnld2983  Remote port: 55555) - Error communicating with the router.\r\n    \tat com.solacesystems.jcsmp.protocol.impl.TcpChannel.executePostOnce(TcpChannel.java:254) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jcsmp.protocol.impl.ChannelOpStrategyClient.performOpen(ChannelOpStrategyClient.java:101) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jcsmp.protocol.impl.TcpClientChannel.performOpenSingle(TcpClientChannel.java:428) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jcsmp.protocol.impl.TcpClientChannel.access$800(TcpClientChannel.java:124) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jcsmp.protocol.impl.TcpClientChannel$ClientChannelConnect.call(TcpClientChannel.java:2609) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jcsmp.protocol.impl.TcpClientChannel.open(TcpClientChannel.java:404) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jcsmp.impl.JCSMPBasicSession.sniffRouter(JCSMPBasicSession.java:422) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jcsmp.impl.JCSMPBasicSession.connect(JCSMPBasicSession.java:1309) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jms.SolConnection.&lt;init&gt;(SolConnection.java:167) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jms.SolConnection.&lt;init&gt;(SolConnection.java:97) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jms.SolConnectionFactoryImpl.createConnection(SolConnectionFactoryImpl.java:114) ~[sol-jms-10.17.0.jar:?]\r\n    \tat org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:196) ~[spring-jms-5.3.24.jar:5.3.24]\r\n    \tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:494) ~[spring-jms-5.3.24.jar:5.3.24]\r\n    \t... 13 more\r\n    Caused by: java.net.ConnectException: Connection refused\r\n    \tat sun.nio.ch.Net.pollConnect(Native Method) ~[?:?]\r\n    \tat sun.nio.ch.Net.pollConnectNow(Net.java:672) ~[?:?]\r\n    \tat sun.nio.ch.SocketChannelImpl.finishTimedConnect(SocketChannelImpl.java:1148) ~[?:?]\r\n    \tat sun.nio.ch.SocketChannelImpl.blockingConnect(SocketChannelImpl.java:1183) ~[?:?]\r\n    \tat sun.nio.ch.SocketAdaptor.connect(SocketAdaptor.java:98) ~[?:?]\r\n    \tat com.solacesystems.jcsmp.protocol.smf.SimpleSmfClient.open(SimpleSmfClient.java:905) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jcsmp.protocol.smf.SimpleSmfClient.doPostNoResponse(SimpleSmfClient.java:318) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jcsmp.protocol.smf.SimpleSmfClient.doPost(SimpleSmfClient.java:235) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jcsmp.protocol.impl.TcpChannel.executePostOnce(TcpChannel.java:199) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jcsmp.protocol.impl.ChannelOpStrategyClient.performOpen(ChannelOpStrategyClient.java:101) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jcsmp.protocol.impl.TcpClientChannel.performOpenSingle(TcpClientChannel.java:428) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jcsmp.protocol.impl.TcpClientChannel.access$800(TcpClientChannel.java:124) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jcsmp.protocol.impl.TcpClientChannel$ClientChannelConnect.call(TcpClientChannel.java:2609) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jcsmp.protocol.impl.TcpClientChannel.open(TcpClientChannel.java:404) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jcsmp.impl.JCSMPBasicSession.sniffRouter(JCSMPBasicSession.java:422) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jcsmp.impl.JCSMPBasicSession.connect(JCSMPBasicSession.java:1309) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jms.SolConnection.&lt;init&gt;(SolConnection.java:167) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jms.SolConnection.&lt;init&gt;(SolConnection.java:97) ~[sol-jms-10.17.0.jar:?]\r\n    \tat com.solacesystems.jms.SolConnectionFactoryImpl.createConnection(SolConnectionFactoryImpl.java:114) ~[sol-jms-10.17.0.jar:?]\r\n    \tat org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:196) ~[spring-jms-5.3.24.jar:5.3.24]\r\n    \tat org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:494) ~[spring-jms-5.3.24.jar:5.3.24]\r\n    \t... 13 more\r\n\r\nLooking at the logs/stacktrace, it seems as if my application is making a lot of connects/disconnects, but I m not sure if I am exhausting some sort of connection pool, or solace views this action as &quot;spammy&quot; and refuses connection from my localhost. How do I reuse the TcpClientChannels instead of instantiating new connections on each attempt to connect?","title":"Solace keeps instantiating new TcpClientChannel","body":"<p>I wrote 25 csv files (each with about 1000+ entries) to solace. When I start replaying all the messages available in queue and publishing the messages, after a while, I get an error like this:</p>\n<pre><code>Client-17280: Connecting to host 'orig=tcp://vklnld2983:55555, scheme=tcp://, host=vklnld2983, port=55555' (host 1 of 1, smfclient 17280, attempt 1 of 1, this_host_attempt: 1 of 1) \nClient-17281: Connecting to host 'orig=tcp://vklnld2983:55555, scheme=tcp://, host=vklnld2983, port=55555' (host 1 of 1, smfclient 17281, attempt 1 of 1, this_host_attempt: 1 of 1)\nClient-17282: Connecting to host 'orig=tcp://vklnld2983:55555, scheme=tcp://, host=vklnld2983, port=55555' (host 1 of 1, smfclient 17282, attempt 1 of 1, this_host_attempt: 1 of 1)\nClient-17280: Connection attempt failed to host 'vklnld2983' ConnectException com.solacesystems.jcsmp.JCSMPTransportException: (Client name: HKGITDW137306/29042/87494380/kMGp65FuY3   Local port: -1   Remote addr: vklnld2983  Remote port: 55555) - Error communicating with the router. cause: java.net.ConnectException: Connection refused ((Client name: HKGITDW137306/29042/87494380/kMGp65FuY3   Local port: -1   Remote addr: vklnld2983  Remote port: 55555) - )\nClient-17281: Connection attempt failed to host 'vklnld2983' ConnectException com.solacesystems.jcsmp.JCSMPTransportException: (Client name: HKGITDW137306/29042/874a4381/TExAJ1qMsJ   Local port: -1   Remote addr: vklnld2983  Remote port: 55555) - Error communicating with the router. cause: java.net.ConnectException: Connection refused ((Client name: HKGITDW137306/29042/874a4381/TExAJ1qMsJ   Local port: -1   Remote addr: vklnld2983  Remote port: 55555) - )\nClient-17282: Connection attempt failed to host 'vklnld2983' ConnectException com.solacesystems.jcsmp.JCSMPTransportException: (Client name: HKGITDW137306/29042/874b4382/GViVP_ZJ_v   Local port: -1   Remote addr: vklnld2983  Remote port: 55555) - Error communicating with the router. cause: java.net.ConnectException: Connection refused ((Client name: HKGITDW137306/29042/874b4382/GViVP_ZJ_v   Local port: -1   Remote addr: vklnld2983  Remote port: 55555) - )\norg.springframework.jms.UncategorizedJmsException: Uncategorized exception occurred during JMS processing; nested exception is javax.jms.JMSException: Error creating connection - transport error ((Client name: HKGITDW137306/29042/874a4381/TExAJ1qMsJ   Local port: -1   Remote addr: vklnld2983  Remote port: 55555) - Error communicating with the router.)\n    at org.springframework.jms.support.JmsUtils.convertJmsAccessException(JmsUtils.java:311) ~[spring-jms-5.3.24.jar:5.3.24]\n    at org.springframework.jms.support.JmsAccessor.convertJmsAccessException(JmsAccessor.java:185) ~[spring-jms-5.3.24.jar:5.3.24]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:507) ~[spring-jms-5.3.24.jar:5.3.24]\n    at org.springframework.jms.core.JmsTemplate.send(JmsTemplate.java:584) ~[spring-jms-5.3.24.jar:5.3.24]\n    at org.springframework.jms.core.JmsTemplate.convertAndSend(JmsTemplate.java:661) ~[spring-jms-5.3.24.jar:5.3.24]\n    at com.clsa.aperture.service.inventory.InventoryService.lambda$onEvents$13(InventoryService.java:281) ~[classes/:?]\n    at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183) ~[?:?]\n    at java.util.HashMap$EntrySpliterator.forEachRemaining(HashMap.java:1850) ~[?:?]\n    at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[?:?]\n    at java.util.stream.ForEachOps$ForEachTask.compute(ForEachOps.java:290) ~[?:?]\n    at java.util.concurrent.CountedCompleter.exec(CountedCompleter.java:754) ~[?:?]\n    at java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373) ~[?:?]\n    at java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182) ~[?:?]\n    at java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655) ~[?:?]\n    at java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622) ~[?:?]\n    at java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165) ~[?:?]\nCaused by: javax.jms.JMSException: Error creating connection - transport error ((Client name: HKGITDW137306/29042/874a4381/TExAJ1qMsJ   Local port: -1   Remote addr: vklnld2983  Remote port: 55555) - Error communicating with the router.)\n    at jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[?:?]\n    at jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[?:?]\n    at jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[?:?]\n    at java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[?:?]\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:480) ~[?:?]\n    at com.solacesystems.jms.impl.JMSExceptionValue.newInstance(JMSExceptionValue.java:36) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jms.impl.JCSMPExceptionMapper$ArrayListMapper.get(JCSMPExceptionMapper.java:32) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jms.impl.JCSMPExceptionMapper.get(JCSMPExceptionMapper.java:95) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jms.impl.Validator.createJMSException(Validator.java:587) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jms.SolConnection.&lt;init&gt;(SolConnection.java:186) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jms.SolConnection.&lt;init&gt;(SolConnection.java:97) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jms.SolConnectionFactoryImpl.createConnection(SolConnectionFactoryImpl.java:114) ~[sol-jms-10.17.0.jar:?]\n    at org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:196) ~[spring-jms-5.3.24.jar:5.3.24]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:494) ~[spring-jms-5.3.24.jar:5.3.24]\n    ... 13 more\nCaused by: com.solacesystems.jcsmp.JCSMPTransportException: (Client name: HKGITDW137306/29042/874a4381/TExAJ1qMsJ   Local port: -1   Remote addr: vklnld2983  Remote port: 55555) - Error communicating with the router.\n    at com.solacesystems.jcsmp.protocol.impl.TcpChannel.executePostOnce(TcpChannel.java:254) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jcsmp.protocol.impl.ChannelOpStrategyClient.performOpen(ChannelOpStrategyClient.java:101) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jcsmp.protocol.impl.TcpClientChannel.performOpenSingle(TcpClientChannel.java:428) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jcsmp.protocol.impl.TcpClientChannel.access$800(TcpClientChannel.java:124) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jcsmp.protocol.impl.TcpClientChannel$ClientChannelConnect.call(TcpClientChannel.java:2609) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jcsmp.protocol.impl.TcpClientChannel.open(TcpClientChannel.java:404) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jcsmp.impl.JCSMPBasicSession.sniffRouter(JCSMPBasicSession.java:422) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jcsmp.impl.JCSMPBasicSession.connect(JCSMPBasicSession.java:1309) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jms.SolConnection.&lt;init&gt;(SolConnection.java:167) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jms.SolConnection.&lt;init&gt;(SolConnection.java:97) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jms.SolConnectionFactoryImpl.createConnection(SolConnectionFactoryImpl.java:114) ~[sol-jms-10.17.0.jar:?]\n    at org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:196) ~[spring-jms-5.3.24.jar:5.3.24]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:494) ~[spring-jms-5.3.24.jar:5.3.24]\n    ... 13 more\nCaused by: java.net.ConnectException: Connection refused\n    at sun.nio.ch.Net.pollConnect(Native Method) ~[?:?]\n    at sun.nio.ch.Net.pollConnectNow(Net.java:672) ~[?:?]\n    at sun.nio.ch.SocketChannelImpl.finishTimedConnect(SocketChannelImpl.java:1148) ~[?:?]\n    at sun.nio.ch.SocketChannelImpl.blockingConnect(SocketChannelImpl.java:1183) ~[?:?]\n    at sun.nio.ch.SocketAdaptor.connect(SocketAdaptor.java:98) ~[?:?]\n    at com.solacesystems.jcsmp.protocol.smf.SimpleSmfClient.open(SimpleSmfClient.java:905) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jcsmp.protocol.smf.SimpleSmfClient.doPostNoResponse(SimpleSmfClient.java:318) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jcsmp.protocol.smf.SimpleSmfClient.doPost(SimpleSmfClient.java:235) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jcsmp.protocol.impl.TcpChannel.executePostOnce(TcpChannel.java:199) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jcsmp.protocol.impl.ChannelOpStrategyClient.performOpen(ChannelOpStrategyClient.java:101) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jcsmp.protocol.impl.TcpClientChannel.performOpenSingle(TcpClientChannel.java:428) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jcsmp.protocol.impl.TcpClientChannel.access$800(TcpClientChannel.java:124) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jcsmp.protocol.impl.TcpClientChannel$ClientChannelConnect.call(TcpClientChannel.java:2609) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jcsmp.protocol.impl.TcpClientChannel.open(TcpClientChannel.java:404) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jcsmp.impl.JCSMPBasicSession.sniffRouter(JCSMPBasicSession.java:422) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jcsmp.impl.JCSMPBasicSession.connect(JCSMPBasicSession.java:1309) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jms.SolConnection.&lt;init&gt;(SolConnection.java:167) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jms.SolConnection.&lt;init&gt;(SolConnection.java:97) ~[sol-jms-10.17.0.jar:?]\n    at com.solacesystems.jms.SolConnectionFactoryImpl.createConnection(SolConnectionFactoryImpl.java:114) ~[sol-jms-10.17.0.jar:?]\n    at org.springframework.jms.support.JmsAccessor.createConnection(JmsAccessor.java:196) ~[spring-jms-5.3.24.jar:5.3.24]\n    at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:494) ~[spring-jms-5.3.24.jar:5.3.24]\n    ... 13 more\n</code></pre>\n<p>Looking at the logs/stacktrace, it seems as if my application is making a lot of connects/disconnects, but I m not sure if I am exhausting some sort of connection pool, or solace views this action as &quot;spammy&quot; and refuses connection from my localhost. How do I reuse the TcpClientChannels instead of instantiating new connections on each attempt to connect?</p>\n"},{"tags":["java","linux"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1687526161,"post_id":76540485,"comment_id":134953366,"body_markdown":"You don&#39;t need to do this manually. Just use `update-alternatives`","body":"You don&#39;t need to do this manually. Just use <code>update-alternatives</code>"},{"owner":{"account_id":2846397,"reputation":6438,"user_id":2444661,"accept_rate":55,"display_name":"Mandroid"},"score":0,"creation_date":1687526213,"post_id":76540485,"comment_id":134953382,"body_markdown":"Why this downvote?Anything wrong with question?","body":"Why this downvote?Anything wrong with question?"},{"owner":{"account_id":200481,"reputation":5195,"user_id":446357,"accept_rate":64,"display_name":"MTilsted"},"score":0,"creation_date":1687526286,"post_id":76540485,"comment_id":134953401,"body_markdown":"I don&#39;t think it should be downvoted but what are you trying to do? The only case where you should configure JAVA_HOME by hand, is if you have multiple different java versions installed and need to switch between them. (And in that case, use update-alternatives instead).","body":"I don&#39;t think it should be downvoted but what are you trying to do? The only case where you should configure JAVA_HOME by hand, is if you have multiple different java versions installed and need to switch between them. (And in that case, use update-alternatives instead)."},{"owner":{"account_id":2846397,"reputation":6438,"user_id":2444661,"accept_rate":55,"display_name":"Mandroid"},"score":0,"creation_date":1687526358,"post_id":76540485,"comment_id":134953422,"body_markdown":"@MTilsted After installing jdk, when I do &#39;echo JAVA_HOME&#39;, it returns no result. That&#39;s why I tried to do it manually.","body":"@MTilsted After installing jdk, when I do &#39;echo JAVA_HOME&#39;, it returns no result. That&#39;s why I tried to do it manually."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1687526380,"post_id":76540485,"comment_id":134953427,"body_markdown":"To find out where it really is, you want `readlink -f &quot;$(which java)&quot;` Depending on how you want to develop, you might use something like `alias j18=&#39;export JAVA_HOME=/usr/lib/jvm/bellsoft-java18-amd64;export PATH=$JAVA_HOME/bin:$PATH&#39;` but then you&#39;d need to continue in that shell. That&#39;s what I do though as it enables me to quickly switch between versions. Probably quicker and not global like `update-alternatives`","body":"To find out where it really is, you want <code>readlink -f &quot;$(which java)&quot;</code> Depending on how you want to develop, you might use something like <code>alias j18=&#39;export JAVA_HOME=&#47;usr&#47;lib&#47;jvm&#47;bellsoft-java18-amd64;export PATH=$JAVA_HOME&#47;bin:$PATH&#39;</code> but then you&#39;d need to continue in that shell. That&#39;s what I do though as it enables me to quickly switch between versions. Probably quicker and not global like <code>update-alternatives</code>"},{"owner":{"account_id":200481,"reputation":5195,"user_id":446357,"accept_rate":64,"display_name":"MTilsted"},"score":0,"creation_date":1687526540,"post_id":76540485,"comment_id":134953463,"body_markdown":"But you do in general not need JAVA_HOME for anything. Are you trying to do something specific, which require JAVA_HOME?","body":"But you do in general not need JAVA_HOME for anything. Are you trying to do something specific, which require JAVA_HOME?"},{"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1687526547,"post_id":76540485,"comment_id":134953464,"body_markdown":"You only need a JAVA_HOME style variable if you wish to call as `$JAVA_HOME/bin/java`, otherwise it is the PATH variable you need to check so you can call using `java`.","body":"You only need a JAVA_HOME style variable if you wish to call as <code>$JAVA_HOME&#47;bin&#47;java</code>, otherwise it is the PATH variable you need to check so you can call using <code>java</code>."}],"answers":[{"tags":[],"owner":{"account_id":27772929,"reputation":35,"user_id":21202884,"display_name":"Kreuterkeule"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687527632,"creation_date":1687527632,"answer_id":76540709,"question_id":76540485,"body_markdown":"java versions are indeed located in /usr/lib/jvm/\r\n\r\nyou want your JAVA_HOME to look something like this:\r\n\r\n/usr/lib/jvm/java-17-openjdk-amd64\r\n\r\nif you want to set your JAVA_HOME globaly, use this:\r\n\r\nhttps://stackoverflow.com/questions/24641536/how-to-set-java-home-in-linux-for-all-users\r\n\r\n&gt; &quot;So what are all these locations in file system?&quot;\r\n\r\n/usr/bin/java is the executable, which executes the java you set in JAVA_HOME, the actual executable is located in ${JAVA_HOME}/bin and all other files of java are located in the JAVA_HOME directory","title":"Configuring JAVA_HOME on linux","body":"<p>java versions are indeed located in /usr/lib/jvm/</p>\n<p>you want your JAVA_HOME to look something like this:</p>\n<p>/usr/lib/jvm/java-17-openjdk-amd64</p>\n<p>if you want to set your JAVA_HOME globaly, use this:</p>\n<p><a href=\"https://stackoverflow.com/questions/24641536/how-to-set-java-home-in-linux-for-all-users\">How to set JAVA_HOME in Linux for all users</a></p>\n<blockquote>\n<p>&quot;So what are all these locations in file system?&quot;</p>\n</blockquote>\n<p>/usr/bin/java is the executable, which executes the java you set in JAVA_HOME, the actual executable is located in ${JAVA_HOME}/bin and all other files of java are located in the JAVA_HOME directory</p>\n"}],"owner":{"account_id":2846397,"reputation":6438,"user_id":2444661,"accept_rate":55,"display_name":"Mandroid"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1687527632,"creation_date":1687526114,"question_id":76540485,"body_markdown":"I am trying to configure java home on ubuntu VM. Compared to windows, things seems to be pretty complex and confusing.\r\n\r\nI installed jdk 8 using &#39;sudo apt-install....&#39;, so when I check version:\r\n\r\n&gt; java -version\r\nopenjdk version  &quot;1.8.0.62&quot;\r\n\r\nWhen I do, &#39;which java&#39;, I get:\r\n\r\n&gt; /usr/bin/java\r\n\r\nBut /usr/bin/java is a file, not a directory.\r\n\r\nWhen I do, &#39;whereis java&#39;, I get three entries:\r\n\r\n&gt; /usr/bin/java /usr/share/java /usr/share/man/man1/java.1.gz\r\n\r\nBut I don&#39;t see jdk installed at these locations.\r\n\r\nOn some more google search, I find that its actually /usr/lib/jvm where jdk is installed.\r\n\r\nSo what are all these locations in file system? And have I done correct thing by pointing JAVA_HOME to /usr/lib/jvm/.... ?","title":"Configuring JAVA_HOME on linux","body":"<p>I am trying to configure java home on ubuntu VM. Compared to windows, things seems to be pretty complex and confusing.</p>\n<p>I installed jdk 8 using 'sudo apt-install....', so when I check version:</p>\n<blockquote>\n<p>java -version\nopenjdk version  &quot;1.8.0.62&quot;</p>\n</blockquote>\n<p>When I do, 'which java', I get:</p>\n<blockquote>\n<p>/usr/bin/java</p>\n</blockquote>\n<p>But /usr/bin/java is a file, not a directory.</p>\n<p>When I do, 'whereis java', I get three entries:</p>\n<blockquote>\n<p>/usr/bin/java /usr/share/java /usr/share/man/man1/java.1.gz</p>\n</blockquote>\n<p>But I don't see jdk installed at these locations.</p>\n<p>On some more google search, I find that its actually /usr/lib/jvm where jdk is installed.</p>\n<p>So what are all these locations in file system? And have I done correct thing by pointing JAVA_HOME to /usr/lib/jvm/.... ?</p>\n"},{"tags":["java","spring-boot","spring-webflux","reactive-programming"],"comments":[{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":0,"creation_date":1687525378,"post_id":76540385,"comment_id":134953184,"body_markdown":"`.block()` -- wrong.","body":"<code>.block()</code> -- wrong."}],"answers":[{"tags":[],"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687527442,"creation_date":1687527442,"answer_id":76540674,"question_id":76540385,"body_markdown":"Don&#39;t use `block`, make it in a reactive way:\r\n\r\n        stockRepository.findById(id) //id of the stock is passed to the method\r\n                .flatMap(stock -&gt; {\r\n                    List&lt;String&gt; reservationIds = getReservationIds(stock);\r\n                    Flux&lt;Reservation&gt; reservationFlux = reservationRepository.findAllById(reservationIds);\r\n                    Mono&lt;List&lt;Reservation&gt;&gt; allReservationsMono = reservationFlux.collectList();\r\n                    return allReservationsMono.map(reservationsList -&gt; new StockResponse(\r\n                            stock.getId(),\r\n                            // other properties from stock object,\r\n                            reservationsList\r\n                    );\r\n                });\r\n\r\nAlso make sure `getReservationIds` is nonblocking. Otherwise, look if it&#39;s possible to make reactive and return `Flux`/`Mono`.","title":"Spring Web Flux, best way to combine Flux","body":"<p>Don't use <code>block</code>, make it in a reactive way:</p>\n<pre><code>    stockRepository.findById(id) //id of the stock is passed to the method\n            .flatMap(stock -&gt; {\n                List&lt;String&gt; reservationIds = getReservationIds(stock);\n                Flux&lt;Reservation&gt; reservationFlux = reservationRepository.findAllById(reservationIds);\n                Mono&lt;List&lt;Reservation&gt;&gt; allReservationsMono = reservationFlux.collectList();\n                return allReservationsMono.map(reservationsList -&gt; new StockResponse(\n                        stock.getId(),\n                        // other properties from stock object,\n                        reservationsList\n                );\n            });\n</code></pre>\n<p>Also make sure <code>getReservationIds</code> is nonblocking. Otherwise, look if it's possible to make reactive and return <code>Flux</code>/<code>Mono</code>.</p>\n"}],"owner":{"account_id":4397755,"reputation":790,"user_id":3584279,"accept_rate":100,"display_name":"RVA"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76540674,"answer_count":1,"score":1,"last_activity_date":1687527442,"creation_date":1687525336,"question_id":76540385,"body_markdown":"Little bit of context : \r\nI have 2 spring data (mongodb) \r\n\r\n - stockRepository \r\n - reservationRepository\r\n\r\nA stock have (among others, irrelevant for the question, properties) a sublist of &quot;reserved stocks&quot; which just having a quantity and an id\r\nA reservation is a object with a status and in addition of its id some other properties like commandIdentifier and lineIdentifier\r\n\r\n\r\nMy goal is to create a method which can call for a stock a new object with \r\n- the reference of the product \r\n- some properties link to the product\r\n- the list of the concerned reservations with command and line identifiers\r\n\r\n\r\nI&#39;m new to Webflux and I&#39;m struggling with the following code\r\n\r\n    return stockRepository.findById(id) //id of the stock is passed to the method\r\n              .map(stock -&gt; {\r\n                    List&lt;String&gt; reservationIds = getReservationIds(stock)\r\n                    Flux&lt;Reservation&gt; reservationFlux = reservationRepository.findAllById(reservationIds)\r\n                    return new StockResponse(\r\n                                 stock.getId(),\r\n                                 // other properties from stock object,\r\n                                 reservationFlux.collectList().block()\r\n                                    \r\n                });\r\n\r\nI&#39;m feeling that it is not the best approach for this, but I can&#39;t see how to to this properly.\r\n\r\nnb : This method will be called from a RestController to display the StockResponse within a web ui.","title":"Spring Web Flux, best way to combine Flux","body":"<p>Little bit of context :\nI have 2 spring data (mongodb)</p>\n<ul>\n<li>stockRepository</li>\n<li>reservationRepository</li>\n</ul>\n<p>A stock have (among others, irrelevant for the question, properties) a sublist of &quot;reserved stocks&quot; which just having a quantity and an id\nA reservation is a object with a status and in addition of its id some other properties like commandIdentifier and lineIdentifier</p>\n<p>My goal is to create a method which can call for a stock a new object with</p>\n<ul>\n<li>the reference of the product</li>\n<li>some properties link to the product</li>\n<li>the list of the concerned reservations with command and line identifiers</li>\n</ul>\n<p>I'm new to Webflux and I'm struggling with the following code</p>\n<pre><code>return stockRepository.findById(id) //id of the stock is passed to the method\n          .map(stock -&gt; {\n                List&lt;String&gt; reservationIds = getReservationIds(stock)\n                Flux&lt;Reservation&gt; reservationFlux = reservationRepository.findAllById(reservationIds)\n                return new StockResponse(\n                             stock.getId(),\n                             // other properties from stock object,\n                             reservationFlux.collectList().block()\n                                \n            });\n</code></pre>\n<p>I'm feeling that it is not the best approach for this, but I can't see how to to this properly.</p>\n<p>nb : This method will be called from a RestController to display the StockResponse within a web ui.</p>\n"},{"tags":["java","completable-future"],"comments":[{"owner":{"account_id":16871523,"reputation":706,"user_id":12199915,"display_name":"Alex"},"score":0,"creation_date":1687347265,"post_id":76505733,"comment_id":134923327,"body_markdown":"You may throw new exception in `exceptionally()` with your message","body":"You may throw new exception in <code>exceptionally()</code> with your message"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1687348210,"post_id":76505733,"comment_id":134923548,"body_markdown":"There isn&#39;t quite enough information to say. Do you know that information about your future when you call `someFuture.orTimeout`?","body":"There isn&#39;t quite enough information to say. Do you know that information about your future when you call <code>someFuture.orTimeout</code>?"},{"owner":{"account_id":195691,"reputation":28439,"user_id":438742,"accept_rate":73,"display_name":"kan"},"score":0,"creation_date":1687380487,"post_id":76505733,"comment_id":134930456,"body_markdown":"@matt updated the question with an example I would like to have.","body":"@matt updated the question with an example I would like to have."}],"answers":[{"tags":[],"owner":{"account_id":10838690,"reputation":3209,"user_id":7970787,"display_name":"Alex R"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687384807,"creation_date":1687382504,"answer_id":76527226,"question_id":76505733,"body_markdown":"You can use [`exceptionallyCompose`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/CompletionStage.html#exceptionallyCompose(java.util.function.Function)) (or any of the async variants of this method) for that:\r\n\r\n```java\r\npublic final class Example {\r\n    public static void main(String[] args) throws ExecutionException, InterruptedException {\r\n        CompletableFuture&lt;String&gt; future = CompletableFuture.supplyAsync(() -&gt; {\r\n                    sleep(3000);\r\n                    return &quot;DONE&quot;;\r\n                })\r\n                .orTimeout(1000, TimeUnit.MILLISECONDS)\r\n                .exceptionallyCompose(throwable -&gt; {\r\n                    if (throwable instanceof TimeoutException) {\r\n                        var tex = new TimeoutException(&quot;The Something timed-out in 15s&quot;);\r\n                        return CompletableFuture.failedFuture(tex);\r\n                    }\r\n                    return CompletableFuture.failedFuture(throwable);\r\n                });\r\n\r\n        sleep(2000);\r\n        future.get();\r\n        sleep(5000);\r\n    }\r\n\r\n    private static void sleep(long ms) {\r\n        try {\r\n            Thread.sleep(ms);\r\n        } catch (InterruptedException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nIf your code fails due to a `TimeoutException`, you can return a `TimeoutException` (or any other throwable) that has more detail via a failed `CompletableFuture`. Otherwise, you can just return the same throwable that caused one of the previous stages to be completed exceptionally. \r\n\r\nFor example, if there had been some `RuntimeException` in `supplyAsync`, `future.get()` would still cause a `RuntimeException` (wrapped within an `ExecutionException`) to be thrown. If there is no exception (i.e. also no timeout), you `get()` your result normally. \r\n\r\nWith that knowledge you can write your own little `orTimeout` wrapper, for example:\r\n\r\n```java\r\npublic static &lt;T&gt; CompletableFuture&lt;T&gt; orTimeout(\r\n        CompletableFuture&lt;T&gt; cf,\r\n        long timeout, TimeUnit unit\r\n) {\r\n    return cf.orTimeout(timeout, unit).exceptionallyCompose(throwable -&gt; {\r\n        if (throwable instanceof TimeoutException) {\r\n            final var msg = String.format(\r\n                    &quot;The Something timed-out in %d %s.&quot;,\r\n                    timeout, unit\r\n            );\r\n            return CompletableFuture.failedFuture(new TimeoutException(msg));\r\n        }\r\n        return CompletableFuture.failedFuture(throwable);\r\n    });\r\n}\r\n```\r\n\r\nand then use it for all `CompletableFuture`s like so:\r\n\r\n```java\r\nCompletableFuture&lt;String&gt; future = orTimeout(CompletableFuture.supplyAsync(() -&gt; {\r\n    sleep(10000);\r\n    return &quot;DONE&quot;;\r\n}), 1000, TimeUnit.MILLISECONDS);\r\n\r\n```\r\n","title":"Add a description to CompletableFuture orTimeout","body":"<p>You can use <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/CompletionStage.html#exceptionallyCompose(java.util.function.Function)\" rel=\"nofollow noreferrer\"><code>exceptionallyCompose</code></a> (or any of the async variants of this method) for that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public final class Example {\n    public static void main(String[] args) throws ExecutionException, InterruptedException {\n        CompletableFuture&lt;String&gt; future = CompletableFuture.supplyAsync(() -&gt; {\n                    sleep(3000);\n                    return &quot;DONE&quot;;\n                })\n                .orTimeout(1000, TimeUnit.MILLISECONDS)\n                .exceptionallyCompose(throwable -&gt; {\n                    if (throwable instanceof TimeoutException) {\n                        var tex = new TimeoutException(&quot;The Something timed-out in 15s&quot;);\n                        return CompletableFuture.failedFuture(tex);\n                    }\n                    return CompletableFuture.failedFuture(throwable);\n                });\n\n        sleep(2000);\n        future.get();\n        sleep(5000);\n    }\n\n    private static void sleep(long ms) {\n        try {\n            Thread.sleep(ms);\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n<p>If your code fails due to a <code>TimeoutException</code>, you can return a <code>TimeoutException</code> (or any other throwable) that has more detail via a failed <code>CompletableFuture</code>. Otherwise, you can just return the same throwable that caused one of the previous stages to be completed exceptionally.</p>\n<p>For example, if there had been some <code>RuntimeException</code> in <code>supplyAsync</code>, <code>future.get()</code> would still cause a <code>RuntimeException</code> (wrapped within an <code>ExecutionException</code>) to be thrown. If there is no exception (i.e. also no timeout), you <code>get()</code> your result normally.</p>\n<p>With that knowledge you can write your own little <code>orTimeout</code> wrapper, for example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static &lt;T&gt; CompletableFuture&lt;T&gt; orTimeout(\n        CompletableFuture&lt;T&gt; cf,\n        long timeout, TimeUnit unit\n) {\n    return cf.orTimeout(timeout, unit).exceptionallyCompose(throwable -&gt; {\n        if (throwable instanceof TimeoutException) {\n            final var msg = String.format(\n                    &quot;The Something timed-out in %d %s.&quot;,\n                    timeout, unit\n            );\n            return CompletableFuture.failedFuture(new TimeoutException(msg));\n        }\n        return CompletableFuture.failedFuture(throwable);\n    });\n}\n</code></pre>\n<p>and then use it for all <code>CompletableFuture</code>s like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>CompletableFuture&lt;String&gt; future = orTimeout(CompletableFuture.supplyAsync(() -&gt; {\n    sleep(10000);\n    return &quot;DONE&quot;;\n}), 1000, TimeUnit.MILLISECONDS);\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1687507433,"creation_date":1687507433,"answer_id":76538161,"question_id":76505733,"body_markdown":"You can use the same facility as the `CompletableFuture`’s internal timeout handling:\r\n\r\n```java\r\npublic static &lt;T&gt; CompletableFuture&lt;T&gt; customTimeOut(\r\n    CompletableFuture&lt;T&gt; cf, long time, TimeUnit unit,\r\n    Supplier&lt;? extends Exception&gt; s) {\r\n\r\n    CompletableFuture.delayedExecutor(time, unit, cf.defaultExecutor())\r\n        .execute(() -&gt; { if(!cf.isDone()) cf.completeExceptionally(s.get()); });\r\n\r\n  return cf;\r\n}\r\n```\r\n\r\nNote that the `isDone()` check is not strictly necessary, as `completeExceptionally` does nothing if the future is already completed. The check is only there to prevent the potential expensive exception construction when not necessary. It’s still possible, but rather unlikely that the future gets completed right between the `isDone()` and the `completeExceptionally` call, but nothing bad will happen then, as said, because `completeExceptionally` does the right thing anyway.\r\n\r\nYou can test it like\r\n\r\n```java\r\npublic static void main(String[] args) {\r\n    for(int timeOut = 1; timeOut &lt; 5; timeOut += 2) {\r\n        System.out.println(&quot;time-out &quot; + timeOut + &quot; sec&quot;);\r\n  \r\n        CompletableFuture&lt;String&gt; cf = customTimeOut(\r\n            CompletableFuture.supplyAsync(() -&gt; {\r\n                LockSupport.parkNanos(2_000_000_000);\r\n                return &quot;result&quot;;\r\n            }),\r\n            timeOut, TimeUnit.SECONDS,\r\n            () -&gt; new TimeoutException(&quot;timeout with my custom message&quot;)\r\n        );\r\n    \r\n        try {\r\n            System.out.println(&quot;ordinary result: &quot; + cf.join());\r\n        }\r\n        catch(Exception ex) {\r\n            ex.printStackTrace(System.out);\r\n        }\r\n    }\r\n}\r\n```\r\n```none\r\ntime-out 1 sec\r\njava.util.concurrent.CompletionException: java.util.concurrent.TimeoutException: timeout with my custom message\r\n\tat java.base/java.util.concurrent.CompletableFuture.reportJoin(CompletableFuture.java:413)\r\n\tat java.base/java.util.concurrent.CompletableFuture.join(CompletableFuture.java:2118)\r\n\tat CF.main(CF.java:32)\r\nCaused by: java.util.concurrent.TimeoutException: timeout with my custom message\r\n\tat CF.lambda$2(CF.java:28)\r\n\tat CF.lambda$0(CF.java:13)\r\n\tat java.base/java.util.concurrent.ForkJoinTask$RunnableExecuteAction.exec(ForkJoinTask.java:1395)\r\n\tat java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373)\r\n\tat java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)\r\n\tat java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)\r\n\tat java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)\r\n\tat java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)\r\ntime-out 3 sec\r\nordinary result: result\r\n```\r\n[Try it online!](https://tio.run/##hVPBbtswDL37K7icbDQxsgK7zGmHoe1OW3tIexqGQVWYVIksGRLVxijy7RkVO07TJB0ByxD1SD49UnPxLAbzyWK9VmVlHcGcHXkgpXNpjQzOoaH8ypaVRhKPGn8ECg6L5CP4vSrxwSj6P8oGullKrEhZ8zFaW7nw@U9ex6GKsCPwaTAyZsojRCt0RZJU4VErCVIL7@GXUCZ5TYCt9XsSxL/R/SUcXDI6ZfBky0j1LlC6iYx2HDvtg7ZmBsTwPmxVgMBLH7acRt8Al4Rm4qG7@iX4DCKv0wXyCWpR4@RmiTKQdWlTpMktp3w8FUFTd5xlXa5oOW4OME0zGFzCK6hp@onDlL@2Bhkdc8imKHa8hNZ16vMZEiMKWGXFjqNDpmU4rNg4VskRWZ@tmkDJoqdjcsrMfv8B4WbtXRubMldlaKMZSwwX8LnoNiP4stucXcD528ho49oTljmPUV5xAdIm7UX8gD3Qg7NdMO88yl5WtPF7aQ7b2fCNPWVGJ4bgdK987HX93ddGbgU/iIr2ZpzzSrjFrTDWp@d/h8Ph9usI71urfs@h5673DkGrrH/ga8XYjWY@vrm6u70eH0Ib1gZf4P0zbQSO@r4oeoKybuWBEr0XM@ztD94b/nt@cvURUY7107qJMoLhzV2/bvrK0zq3PFfZO31WezspSD6lHXV@eNmRorhsio1JyMW9ExLTHY@T@Vft2K@S9fof &quot;Java (JDK) – Try It Online&quot;)","title":"Add a description to CompletableFuture orTimeout","body":"<p>You can use the same facility as the <code>CompletableFuture</code>’s internal timeout handling:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static &lt;T&gt; CompletableFuture&lt;T&gt; customTimeOut(\n    CompletableFuture&lt;T&gt; cf, long time, TimeUnit unit,\n    Supplier&lt;? extends Exception&gt; s) {\n\n    CompletableFuture.delayedExecutor(time, unit, cf.defaultExecutor())\n        .execute(() -&gt; { if(!cf.isDone()) cf.completeExceptionally(s.get()); });\n\n  return cf;\n}\n</code></pre>\n<p>Note that the <code>isDone()</code> check is not strictly necessary, as <code>completeExceptionally</code> does nothing if the future is already completed. The check is only there to prevent the potential expensive exception construction when not necessary. It’s still possible, but rather unlikely that the future gets completed right between the <code>isDone()</code> and the <code>completeExceptionally</code> call, but nothing bad will happen then, as said, because <code>completeExceptionally</code> does the right thing anyway.</p>\n<p>You can test it like</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    for(int timeOut = 1; timeOut &lt; 5; timeOut += 2) {\n        System.out.println(&quot;time-out &quot; + timeOut + &quot; sec&quot;);\n  \n        CompletableFuture&lt;String&gt; cf = customTimeOut(\n            CompletableFuture.supplyAsync(() -&gt; {\n                LockSupport.parkNanos(2_000_000_000);\n                return &quot;result&quot;;\n            }),\n            timeOut, TimeUnit.SECONDS,\n            () -&gt; new TimeoutException(&quot;timeout with my custom message&quot;)\n        );\n    \n        try {\n            System.out.println(&quot;ordinary result: &quot; + cf.join());\n        }\n        catch(Exception ex) {\n            ex.printStackTrace(System.out);\n        }\n    }\n}\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>time-out 1 sec\njava.util.concurrent.CompletionException: java.util.concurrent.TimeoutException: timeout with my custom message\n    at java.base/java.util.concurrent.CompletableFuture.reportJoin(CompletableFuture.java:413)\n    at java.base/java.util.concurrent.CompletableFuture.join(CompletableFuture.java:2118)\n    at CF.main(CF.java:32)\nCaused by: java.util.concurrent.TimeoutException: timeout with my custom message\n    at CF.lambda$2(CF.java:28)\n    at CF.lambda$0(CF.java:13)\n    at java.base/java.util.concurrent.ForkJoinTask$RunnableExecuteAction.exec(ForkJoinTask.java:1395)\n    at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373)\n    at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)\n    at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)\n    at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)\n    at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)\ntime-out 3 sec\nordinary result: result\n</code></pre>\n<p><a href=\"https://tio.run/##hVPBbtswDL37K7icbDQxsgK7zGmHoe1OW3tIexqGQVWYVIksGRLVxijy7RkVO07TJB0ByxD1SD49UnPxLAbzyWK9VmVlHcGcHXkgpXNpjQzOoaH8ypaVRhKPGn8ECg6L5CP4vSrxwSj6P8oGullKrEhZ8zFaW7nw@U9ex6GKsCPwaTAyZsojRCt0RZJU4VErCVIL7@GXUCZ5TYCt9XsSxL/R/SUcXDI6ZfBky0j1LlC6iYx2HDvtg7ZmBsTwPmxVgMBLH7acRt8Al4Rm4qG7@iX4DCKv0wXyCWpR4@RmiTKQdWlTpMktp3w8FUFTd5xlXa5oOW4OME0zGFzCK6hp@onDlL@2Bhkdc8imKHa8hNZ16vMZEiMKWGXFjqNDpmU4rNg4VskRWZ@tmkDJoqdjcsrMfv8B4WbtXRubMldlaKMZSwwX8LnoNiP4stucXcD528ho49oTljmPUV5xAdIm7UX8gD3Qg7NdMO88yl5WtPF7aQ7b2fCNPWVGJ4bgdK987HX93ddGbgU/iIr2ZpzzSrjFrTDWp@d/h8Ph9usI71urfs@h5673DkGrrH/ga8XYjWY@vrm6u70eH0Ib1gZf4P0zbQSO@r4oeoKybuWBEr0XM@ztD94b/nt@cvURUY7107qJMoLhzV2/bvrK0zq3PFfZO31WezspSD6lHXV@eNmRorhsio1JyMW9ExLTHY@T@Vft2K@S9fof\" rel=\"nofollow noreferrer\" title=\"Java (JDK) – Try It Online\">Try it online!</a></p>\n"},{"tags":[],"owner":{"account_id":173621,"reputation":10596,"user_id":402428,"display_name":"michid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687520948,"creation_date":1687520948,"answer_id":76539819,"question_id":76505733,"body_markdown":"Since you are expecting a timeout, consider making it part of the return type instead of dealing with the `TimeoutException`. One way is to change the result type to `Either&lt;Timeout, Result&gt;` using the [`Either`][1] type of the [Vavr library][2].\r\n\r\n    var future = CompletableFuture.&lt;Either&lt;Timeout, Result&gt;&gt;supplyAsync(() -&gt;\r\n        Either.right(lengthyCalculation()))\r\n    .completeOnTimeout(\r\n        Either.left(new Timeout(&quot;Lengthy Calculation timed out&quot;, 12)), 1, SECONDS);\r\n\r\nOnce the future completed and you got hold of its value, use one of the many methods of `Either` to proceed. In the simplest case \r\n\r\n    Result result = future.get()\r\n        .getOrElseThrow(timeout -&gt; new RuntimeException(...));\r\n\r\n\r\n  [1]: https://docs.vavr.io/#_either\r\n  [2]: https://www.vavr.io/","title":"Add a description to CompletableFuture orTimeout","body":"<p>Since you are expecting a timeout, consider making it part of the return type instead of dealing with the <code>TimeoutException</code>. One way is to change the result type to <code>Either&lt;Timeout, Result&gt;</code> using the <a href=\"https://docs.vavr.io/#_either\" rel=\"nofollow noreferrer\"><code>Either</code></a> type of the <a href=\"https://www.vavr.io/\" rel=\"nofollow noreferrer\">Vavr library</a>.</p>\n<pre><code>var future = CompletableFuture.&lt;Either&lt;Timeout, Result&gt;&gt;supplyAsync(() -&gt;\n    Either.right(lengthyCalculation()))\n.completeOnTimeout(\n    Either.left(new Timeout(&quot;Lengthy Calculation timed out&quot;, 12)), 1, SECONDS);\n</code></pre>\n<p>Once the future completed and you got hold of its value, use one of the many methods of <code>Either</code> to proceed. In the simplest case</p>\n<pre><code>Result result = future.get()\n    .getOrElseThrow(timeout -&gt; new RuntimeException(...));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687527069,"creation_date":1687527069,"answer_id":76540634,"question_id":76505733,"body_markdown":"Naively I would say.\r\n\r\n    CompletableFuture future = CompletableFuture.runAsync( () -&gt;{\r\n        try{\r\n            someFuture.get(15, TimeUnit.MILLISECONDS);\r\n        } catch(Exception e){\r\n            throw new RuntimeException(&quot;detailed message&quot;, e);\r\n        }\r\n    });\r\n\r\nOf course you should be a bit more specific about the exceptions, but I think this is the gist of the issue. ","title":"Add a description to CompletableFuture orTimeout","body":"<p>Naively I would say.</p>\n<pre><code>CompletableFuture future = CompletableFuture.runAsync( () -&gt;{\n    try{\n        someFuture.get(15, TimeUnit.MILLISECONDS);\n    } catch(Exception e){\n        throw new RuntimeException(&quot;detailed message&quot;, e);\n    }\n});\n</code></pre>\n<p>Of course you should be a bit more specific about the exceptions, but I think this is the gist of the issue.</p>\n"}],"owner":{"account_id":195691,"reputation":28439,"user_id":438742,"accept_rate":73,"display_name":"kan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":227,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":4,"score":1,"last_activity_date":1687527069,"creation_date":1687170347,"question_id":76505733,"body_markdown":"What is the easy way to add some addition info into the timeout exception? Suppose I have a code like that:\r\n\r\n    CompletableFuture&lt;ResutType&gt; getSomething()\r\n    {\r\n      ... return someFuture.orTimeout(15, SECONDS);\r\n    }\r\n\r\nThis is all I&#39;m getting currently downstream later on when callers of the method trying to do `get()`:\r\n\r\n    java.util.concurrent.ExecutionException: java.util.concurrent.TimeoutException\r\n\t    at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:396)\r\n    \tat java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2073)\r\n\r\nI need to add more info - which operation has timed out, how long timeout was, etc.. In other words I need some message to the exception like &quot;The Something timed-out in 15s&quot;, ideally use a supplier like:\r\n\r\n    CompletableFuture&lt;ResutType&gt; getSomething()\r\n    {\r\n       return someFuture.orTimeout(15, SECONDS, () -&gt; new TimeoutException(&quot;The Something timed-out in 15s&quot;));\r\n    }","title":"Add a description to CompletableFuture orTimeout","body":"<p>What is the easy way to add some addition info into the timeout exception? Suppose I have a code like that:</p>\n<pre><code>CompletableFuture&lt;ResutType&gt; getSomething()\n{\n  ... return someFuture.orTimeout(15, SECONDS);\n}\n</code></pre>\n<p>This is all I'm getting currently downstream later on when callers of the method trying to do <code>get()</code>:</p>\n<pre><code>java.util.concurrent.ExecutionException: java.util.concurrent.TimeoutException\n    at java.base/java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:396)\n    at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2073)\n</code></pre>\n<p>I need to add more info - which operation has timed out, how long timeout was, etc.. In other words I need some message to the exception like &quot;The Something timed-out in 15s&quot;, ideally use a supplier like:</p>\n<pre><code>CompletableFuture&lt;ResutType&gt; getSomething()\n{\n   return someFuture.orTimeout(15, SECONDS, () -&gt; new TimeoutException(&quot;The Something timed-out in 15s&quot;));\n}\n</code></pre>\n"},{"tags":["java","spring-boot","migration","flyway"],"comments":[{"owner":{"account_id":25306013,"reputation":216,"user_id":19129532,"display_name":"zzzzz"},"score":0,"creation_date":1687523454,"post_id":76540114,"comment_id":134952731,"body_markdown":"Also one mention, that I&#39;m using mavens `flyway-maven-plugin` with version `8.5.13`. And all other properties like `flyway.user` or `flyway.url` got read properly.","body":"Also one mention, that I&#39;m using mavens <code>flyway-maven-plugin</code> with version <code>8.5.13</code>. And all other properties like <code>flyway.user</code> or <code>flyway.url</code> got read properly."}],"answers":[{"tags":[],"owner":{"account_id":25306013,"reputation":216,"user_id":19129532,"display_name":"zzzzz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1687527037,"creation_date":1687527037,"answer_id":76540629,"question_id":76540114,"body_markdown":"I haven&#39;t understood why location property was ignored from `flyway.conf` file, but if I place this property under `configuration` tag of `flyway-maven-plugin` plugin, it works.","title":"flyway.conf file ignore location property","body":"<p>I haven't understood why location property was ignored from <code>flyway.conf</code> file, but if I place this property under <code>configuration</code> tag of <code>flyway-maven-plugin</code> plugin, it works.</p>\n"}],"owner":{"account_id":25306013,"reputation":216,"user_id":19129532,"display_name":"zzzzz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":284,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76540629,"answer_count":1,"score":0,"last_activity_date":1687527037,"creation_date":1687523189,"question_id":76540114,"body_markdown":"I have Spring Boot project with flyway.conf file inside. My project structure looks like:\r\n\r\n    springBootMainFolder/flyway.conf\r\n    springBootMainFolder/src/main/java/com/example/db/migration/V1__Some_migration.java\r\n    springBootMainFolder/src/main/resources/db/migration/V2_Another_migration.sql\r\n\r\nAs I understand, by default, flyway points location to `db/migration` (which is my third folder with files from list), and if I want to change it, I can just tell it to flyway inside `flyway.conf` file. Which is looks like:\r\n\r\n    flyway.locations=db.migration,classpath:db.migration\r\n    flyway.user=test\r\n    flyway.password=test\r\n    flyway.schemas=test\r\n    flyway.url=postgresql://test:5442/test\r\n\r\nAnd when I run migrations, only migrations from third folder (`springBootMainFolder/src/main/resources/db/migration`) are visible, and even if I&#39;m trying to set another dumb location in `flyway.locations` property it is got ignored and it starts to find under `db.migration` folder. Why it can be ignored and how I can set it?\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"flyway.conf file ignore location property","body":"<p>I have Spring Boot project with flyway.conf file inside. My project structure looks like:</p>\n<pre><code>springBootMainFolder/flyway.conf\nspringBootMainFolder/src/main/java/com/example/db/migration/V1__Some_migration.java\nspringBootMainFolder/src/main/resources/db/migration/V2_Another_migration.sql\n</code></pre>\n<p>As I understand, by default, flyway points location to <code>db/migration</code> (which is my third folder with files from list), and if I want to change it, I can just tell it to flyway inside <code>flyway.conf</code> file. Which is looks like:</p>\n<pre><code>flyway.locations=db.migration,classpath:db.migration\nflyway.user=test\nflyway.password=test\nflyway.schemas=test\nflyway.url=postgresql://test:5442/test\n</code></pre>\n<p>And when I run migrations, only migrations from third folder (<code>springBootMainFolder/src/main/resources/db/migration</code>) are visible, and even if I'm trying to set another dumb location in <code>flyway.locations</code> property it is got ignored and it starts to find under <code>db.migration</code> folder. Why it can be ignored and how I can set it?</p>\n"},{"tags":["java","interface","abstract-class","extends","implements"],"comments":[{"owner":{"account_id":5638694,"reputation":398,"user_id":4463352,"display_name":"OLEGSHA"},"score":0,"creation_date":1607071293,"post_id":65140182,"comment_id":115162232,"body_markdown":"I would start by noticing that you&#39;re trying to _implement_ methods inside an _interface_. While that can be done in principle (using the `default` keyword), the goal of this task is clearly to have you _define_ a method in the `Alarm` interface and implement it (that is, `@Override` it) inside `Weekday` or `Monday`.","body":"I would start by noticing that you&#39;re trying to <i>implement</i> methods inside an <i>interface</i>. While that can be done in principle (using the <code>default</code> keyword), the goal of this task is clearly to have you <i>define</i> a method in the <code>Alarm</code> interface and implement it (that is, <code>@Override</code> it) inside <code>Weekday</code> or <code>Monday</code>."},{"owner":{"account_id":19925387,"reputation":1,"user_id":14600217,"display_name":"Mark Dizon"},"score":0,"creation_date":1607077979,"post_id":65140182,"comment_id":115164876,"body_markdown":"What method will work on the Alarm interface?","body":"What method will work on the Alarm interface?"},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1607081330,"post_id":65140182,"comment_id":115166239,"body_markdown":"It&#39;s in your instructions.  setAlarm(time) and showAlarm()","body":"It&#39;s in your instructions.  setAlarm(time) and showAlarm()"}],"answers":[{"tags":[],"owner":{"account_id":55989,"reputation":17809,"user_id":167745,"accept_rate":76,"display_name":"Stewart"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687527002,"creation_date":1687526635,"answer_id":76540559,"question_id":65140182,"body_markdown":"&gt; Create a public class named `Monday`. This class shall contain the `main` method:\r\n\r\n    public class Monday {\r\n        public static void main(String[] args) {\r\n        }\r\n    }\r\n\r\n&gt; Define an interface named `Alarm` ...\r\n\r\n*This interface is **declaring** two methods*\r\n\r\n    public interface Alarm {\r\n        void showAlarm();\r\n        void setAlarm(String time);\r\n    }\r\n\r\n&gt; Add two (2) classes ... For the `Weekday` class, implement the `Alarm` interface. Leave this class empty.\r\n\r\n    public abstract class Weekday\r\n        implements Alarm {\r\n    }\r\n\r\n&gt; Set `Weekday` as the parent of `Monday`.\r\n\r\n*Because of interface `Alarm` on `Weekday` class, which `Monday` now extends, we have to **define** the two methods which `Alarm`  has **declared**.*\r\n\r\n    public class Monday extends Weekday {\r\n    \r\n        public static void main(String[] args) {\r\n        }\r\n    \r\n        @Override\r\n        public void showAlarm() {\r\n        }\r\n    \r\n        @Override\r\n        public void setAlarm(String time) {\r\n        }\r\n    }\r\n\r\n&gt; Import `Scanner` and `LocalTime` ... add these two (2) statements.\r\n\r\n    import java.time.LocalTime;\r\n    import java.util.Scanner;\r\n    \r\n    public class Monday extends Weekday {\r\n    \r\n        public static void main(String[] args) {\r\n        }\r\n    \r\n        @Override\r\n        public void showAlarm() {\r\n            LocalTime alarm = LocalTime.parse(time); // This gives a compile error at this point\r\n            LocalTime now = LocalTime.now();\r\n        }\r\n    \r\n        @Override\r\n        public void setAlarm(String time) {\r\n        }\r\n    }\r\n\r\n&gt; The output shall ask the user to enter the time for the alarm.\r\n\r\n*This instruction is ambiguous. Output is output. Perhaps the instruction means use `Scanner` in the `main()` method, and then use `setAlarm()`?*\r\n\r\n&gt; See sample output below.\r\n\r\n*So we have missing context in the posted question. Anyway I&#39;ll make a best guess. Here&#39;s the final `Monday` class with its strange alarm logic ...*\r\n\r\n    import java.time.LocalTime;\r\n    import java.util.Scanner;\r\n    \r\n    public class Monday extends Weekday {\r\n    \r\n        public static void main(String[] args) {\r\n            Weekday weekday = new Monday();\r\n            \r\n            System.out.println(&quot;Enter time for alarm in this format (HH:MM):&quot;);\r\n            try(Scanner input = new Scanner(System.in)) {\r\n                weekday.setAlarm(input.next());\r\n                weekday.showAlarm();\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void showAlarm() {\r\n            LocalTime alarm = LocalTime.parse(this.time); // This no longer gives a compile error - it refers to private field &quot;time&quot;\r\n            LocalTime now = LocalTime.now();\r\n            if(alarm.isAfter(now)) {\r\n                System.out.println(&quot;Alarm is set for tomorrow!&quot;);\r\n            } else {\r\n                System.out.println(&quot;I&#39;ll wake you up later!&quot;);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void setAlarm(String time) {\r\n            this.time = time;\r\n        }\r\n    \r\n        private String time;\r\n    }\r\n","title":"How to display &quot;Alarm is set tommorrow&quot; &amp; &quot;I&#39;ll wake you up later!&quot; in this java interface program","body":"<blockquote>\n<p>Create a public class named <code>Monday</code>. This class shall contain the <code>main</code> method:</p>\n</blockquote>\n<pre><code>public class Monday {\n    public static void main(String[] args) {\n    }\n}\n</code></pre>\n<blockquote>\n<p>Define an interface named <code>Alarm</code> ...</p>\n</blockquote>\n<p><em>This interface is <strong>declaring</strong> two methods</em></p>\n<pre><code>public interface Alarm {\n    void showAlarm();\n    void setAlarm(String time);\n}\n</code></pre>\n<blockquote>\n<p>Add two (2) classes ... For the <code>Weekday</code> class, implement the <code>Alarm</code> interface. Leave this class empty.</p>\n</blockquote>\n<pre><code>public abstract class Weekday\n    implements Alarm {\n}\n</code></pre>\n<blockquote>\n<p>Set <code>Weekday</code> as the parent of <code>Monday</code>.</p>\n</blockquote>\n<p><em>Because of interface <code>Alarm</code> on <code>Weekday</code> class, which <code>Monday</code> now extends, we have to <strong>define</strong> the two methods which <code>Alarm</code>  has <strong>declared</strong>.</em></p>\n<pre><code>public class Monday extends Weekday {\n\n    public static void main(String[] args) {\n    }\n\n    @Override\n    public void showAlarm() {\n    }\n\n    @Override\n    public void setAlarm(String time) {\n    }\n}\n</code></pre>\n<blockquote>\n<p>Import <code>Scanner</code> and <code>LocalTime</code> ... add these two (2) statements.</p>\n</blockquote>\n<pre><code>import java.time.LocalTime;\nimport java.util.Scanner;\n\npublic class Monday extends Weekday {\n\n    public static void main(String[] args) {\n    }\n\n    @Override\n    public void showAlarm() {\n        LocalTime alarm = LocalTime.parse(time); // This gives a compile error at this point\n        LocalTime now = LocalTime.now();\n    }\n\n    @Override\n    public void setAlarm(String time) {\n    }\n}\n</code></pre>\n<blockquote>\n<p>The output shall ask the user to enter the time for the alarm.</p>\n</blockquote>\n<p><em>This instruction is ambiguous. Output is output. Perhaps the instruction means use <code>Scanner</code> in the <code>main()</code> method, and then use <code>setAlarm()</code>?</em></p>\n<blockquote>\n<p>See sample output below.</p>\n</blockquote>\n<p><em>So we have missing context in the posted question. Anyway I'll make a best guess. Here's the final <code>Monday</code> class with its strange alarm logic ...</em></p>\n<pre><code>import java.time.LocalTime;\nimport java.util.Scanner;\n\npublic class Monday extends Weekday {\n\n    public static void main(String[] args) {\n        Weekday weekday = new Monday();\n        \n        System.out.println(&quot;Enter time for alarm in this format (HH:MM):&quot;);\n        try(Scanner input = new Scanner(System.in)) {\n            weekday.setAlarm(input.next());\n            weekday.showAlarm();\n        }\n    }\n\n    @Override\n    public void showAlarm() {\n        LocalTime alarm = LocalTime.parse(this.time); // This no longer gives a compile error - it refers to private field &quot;time&quot;\n        LocalTime now = LocalTime.now();\n        if(alarm.isAfter(now)) {\n            System.out.println(&quot;Alarm is set for tomorrow!&quot;);\n        } else {\n            System.out.println(&quot;I'll wake you up later!&quot;);\n        }\n    }\n\n    @Override\n    public void setAlarm(String time) {\n        this.time = time;\n    }\n\n    private String time;\n}\n</code></pre>\n"}],"owner":{"account_id":19925387,"reputation":1,"user_id":14600217,"display_name":"Mark Dizon"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":433,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687527002,"creation_date":1607070416,"question_id":65140182,"body_markdown":"I couldn&#39;t get how to finish this program that was tasked to us and it&#39;s about setting an alarm by creating and implementing an interface.\r\n\r\nThis is the instructions that was given to us.\r\n\r\nProcedure/Instructions\r\n\r\n[![enter image description here][1]][1]\r\n\r\nNow this is what I finished so far on my code:\r\n\r\n    import java.util.Scanner;\r\n    import java.time.LocalTime;\r\n\r\n    public class Monday {\r\n        public static void main (String[] args) {\r\n            Scanner sc = new Scanner(System.in);      \r\n            System.out.println(&quot;Enter time for alarm in this format (HH:MM): &quot;);\r\n            int enteredAlarm = poli.nextInt();\r\n                \r\n            if{\r\n            }\r\n            else if{\r\n            }\r\n        }\r\n    }\r\n\r\n    interface Alarm {\r\n        public void setAlarm(String time) {\r\n        }\r\n        public void showAlarm() {\r\n            LocalTime alarm = LocalTime.parse(time);\r\n            LocalTime now = LocalTime.now();\r\n        }\r\n    }\r\n\r\n    abstract class Weekday implements Alarm {\r\n    }\r\n\r\n    class Monday extends Weekday {\r\n    }\r\n\r\nNow this is what the expected output is, which I cannot finish because I don&#39;t know how to display it by using user input, and the instructions that was given to us is confusing (Which is on the image above).\r\n\r\n&gt; Enter time for alarm in this format (HH:MM): 05:30\r\n\r\n&gt; Alarm is set for tomorrow!\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZGeoy.jpg\r\n\r\n","title":"How to display &quot;Alarm is set tommorrow&quot; &amp; &quot;I&#39;ll wake you up later!&quot; in this java interface program","body":"<p>I couldn't get how to finish this program that was tasked to us and it's about setting an alarm by creating and implementing an interface.</p>\n<p>This is the instructions that was given to us.</p>\n<p>Procedure/Instructions</p>\n<p><a href=\"https://i.stack.imgur.com/ZGeoy.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZGeoy.jpg\" alt=\"enter image description here\" /></a></p>\n<p>Now this is what I finished so far on my code:</p>\n<pre><code>import java.util.Scanner;\nimport java.time.LocalTime;\n\npublic class Monday {\n    public static void main (String[] args) {\n        Scanner sc = new Scanner(System.in);      \n        System.out.println(&quot;Enter time for alarm in this format (HH:MM): &quot;);\n        int enteredAlarm = poli.nextInt();\n            \n        if{\n        }\n        else if{\n        }\n    }\n}\n\ninterface Alarm {\n    public void setAlarm(String time) {\n    }\n    public void showAlarm() {\n        LocalTime alarm = LocalTime.parse(time);\n        LocalTime now = LocalTime.now();\n    }\n}\n\nabstract class Weekday implements Alarm {\n}\n\nclass Monday extends Weekday {\n}\n</code></pre>\n<p>Now this is what the expected output is, which I cannot finish because I don't know how to display it by using user input, and the instructions that was given to us is confusing (Which is on the image above).</p>\n<blockquote>\n<p>Enter time for alarm in this format (HH:MM): 05:30</p>\n</blockquote>\n<blockquote>\n<p>Alarm is set for tomorrow!</p>\n</blockquote>\n"},{"tags":["java","logging","log4j"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1687481292,"post_id":76535355,"comment_id":134946649,"body_markdown":"Don&#39;t put the year, month and date in the pattern so it overrides the oldest one when it rolls","body":"Don&#39;t put the year, month and date in the pattern so it overrides the oldest one when it rolls"},{"owner":{"account_id":1272607,"reputation":430,"user_id":5669584,"accept_rate":100,"display_name":"Felipe Issa"},"score":0,"creation_date":1687525823,"post_id":76535355,"comment_id":134953302,"body_markdown":"That would work, but I have simplified the scenario, the actual one we have even the date on the pattern. It makes easier to identify which log I should check if necessary.","body":"That would work, but I have simplified the scenario, the actual one we have even the date on the pattern. It makes easier to identify which log I should check if necessary."}],"answers":[{"tags":[],"owner":{"account_id":1272607,"reputation":430,"user_id":5669584,"accept_rate":100,"display_name":"Felipe Issa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687526994,"creation_date":1687526994,"answer_id":76540621,"question_id":76535355,"body_markdown":"Ok, found out we can actually do this by using the delete tag with the IfAccumulatedFileCount as follows:\r\n\r\n```\r\n&lt;DefaultRolloverStrategy fileIndex=&quot;min&quot;&gt;\r\n   &lt;Delete basePath=&quot;${default.directory}/&quot; maxDepth=&quot;1&quot;&gt;\r\n       &lt;IfFileName glob=&quot;MY-APP.*.log&quot;&gt;\r\n           &lt;IfAccumulatedFileCount exceeds=&quot;5&quot; /&gt;\r\n       &lt;/IfFileName&gt;\r\n   &lt;/Delete&gt;\r\n&lt;/DefaultRolloverStrategy&gt;\r\n```","title":"Log4j max logs file after month Rollout","body":"<p>Ok, found out we can actually do this by using the delete tag with the IfAccumulatedFileCount as follows:</p>\n<pre><code>&lt;DefaultRolloverStrategy fileIndex=&quot;min&quot;&gt;\n   &lt;Delete basePath=&quot;${default.directory}/&quot; maxDepth=&quot;1&quot;&gt;\n       &lt;IfFileName glob=&quot;MY-APP.*.log&quot;&gt;\n           &lt;IfAccumulatedFileCount exceeds=&quot;5&quot; /&gt;\n       &lt;/IfFileName&gt;\n   &lt;/Delete&gt;\n&lt;/DefaultRolloverStrategy&gt;\n</code></pre>\n"}],"owner":{"account_id":1272607,"reputation":430,"user_id":5669584,"accept_rate":100,"display_name":"Felipe Issa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687526994,"creation_date":1687464963,"question_id":76535355,"body_markdown":"I have a java application with the logging format configured as:\r\n\r\n``` \r\n&lt;RollingRandomAccessFile name=&quot;default&quot;\r\n    fileName=&quot;${default.directory}/MY-APP.log&quot;                                      \r\n    filePattern=&quot;${default.directory}/MY-APP.%d{yyyyMM}.%i.log&quot;&gt;\r\n``` \r\n\r\n\r\nwhich will generate several logs such as:\r\n\r\n- MY-APP.log\r\n- MY-APP.202305.1.log\r\n- MY-APP.202305.2.log\r\n- MY-APP.202305.3.log\r\n- MY-APP.202305.4.log\r\n\r\nI  then added the rollover strategy to have max files as 5:\r\n\r\n```   &lt;DefaultRolloverStrategy max=&quot;5&quot;&gt;  ```\r\n\r\nHowever, once the month 05 ends and 06 starts, new files will be generated use new month format:\r\n\r\n\r\n- MY-APP.202306.1.log\r\n- MY-APP.202306.2.log\r\n\r\nBut files from previous month is not deleted, as it does not meets the pattern anymore.\r\n\r\nHow can I configure log4j to have the &#39;max&#39; attribute to also configure the previous month files in the &#39;max&#39; ones?\r\n\r\n\r\n\r\n","title":"Log4j max logs file after month Rollout","body":"<p>I have a java application with the logging format configured as:</p>\n<pre><code>&lt;RollingRandomAccessFile name=&quot;default&quot;\n    fileName=&quot;${default.directory}/MY-APP.log&quot;                                      \n    filePattern=&quot;${default.directory}/MY-APP.%d{yyyyMM}.%i.log&quot;&gt;\n</code></pre>\n<p>which will generate several logs such as:</p>\n<ul>\n<li>MY-APP.log</li>\n<li>MY-APP.202305.1.log</li>\n<li>MY-APP.202305.2.log</li>\n<li>MY-APP.202305.3.log</li>\n<li>MY-APP.202305.4.log</li>\n</ul>\n<p>I  then added the rollover strategy to have max files as 5:</p>\n<p><code>  &lt;DefaultRolloverStrategy max=&quot;5&quot;&gt; </code></p>\n<p>However, once the month 05 ends and 06 starts, new files will be generated use new month format:</p>\n<ul>\n<li>MY-APP.202306.1.log</li>\n<li>MY-APP.202306.2.log</li>\n</ul>\n<p>But files from previous month is not deleted, as it does not meets the pattern anymore.</p>\n<p>How can I configure log4j to have the 'max' attribute to also configure the previous month files in the 'max' ones?</p>\n"},{"tags":["java","arrays","loops","pointers"],"comments":[{"owner":{"account_id":2119809,"reputation":50937,"user_id":1883316,"display_name":"Tim Roberts"},"score":1,"creation_date":1687286421,"post_id":76517409,"comment_id":134914673,"body_markdown":"Don&#39;t recompute the sum for every element.  Once you have computed 2+3+4+5+6, you can compute the next one by adding 7 and subtracting 2.","body":"Don&#39;t recompute the sum for every element.  Once you have computed 2+3+4+5+6, you can compute the next one by adding 7 and subtracting 2."}],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687292805,"creation_date":1687292805,"answer_id":76518179,"question_id":76517409,"body_markdown":"Declaring `temp` as an `int` will not work for larger test cases, because it is given that &#119896; and `nums[i]` can be as large as 10&lt;sup&gt;5&lt;/sup&gt; and so the sums you have to calculate can be as large as 2⋅10&lt;sup&gt;10&lt;/sup&gt; which is out of range for an `int`, resulting on wrong results. Use `long` instead. Then when you divide it into an average, cast to `int`. \r\n\r\nSecondly, your algorithm has a nested loop that gives it a time complexity of O(&#119896;&#119899;), while this can be done with O(&#119899;) time complexity if you keep track of the sum (`temp`) incrementally: As you move forward, you can use the previous value of `temp` and subtract the left most value that drops out of the &quot;window&quot;, and add the new value that enters that window on the right side.\r\n\r\nSpoiler solution:\r\n\r\n&gt;! &lt;code&gt;class Solution {\r\n&gt;!     public int[] getAverages(int[] nums, int k) {\r\n&gt;!         int[] avg = new int[nums.length];\r\n&gt;!         Arrays.fill(avg, -1);\r\n&gt;!         int width = k + k + 1;\r\n&gt;!         if (width &lt;= nums.length) { \r\n&gt;!             long sum = 0;\r\n&gt;!             for (int i = width - 2; i &gt;= 0; i--) {\r\n&gt;!                 sum += nums[i];\r\n&gt;!             }\r\n&gt;!             for (int i = width - 1; i &lt; nums.length; i++) {\r\n&gt;!                 sum += nums[i];\r\n&gt;!                 avg[i - k] = (int) (sum / width);\r\n&gt;!                 sum -= nums[i + 1 - width];\r\n&gt;!             }\r\n&gt;!         }\r\n&gt;!         return avg;\r\n&gt;!     }\r\n&gt;! }&lt;/code&gt;\r\n","title":"2090. K Radius Subarray Averages Leetcode","body":"<p>Declaring <code>temp</code> as an <code>int</code> will not work for larger test cases, because it is given that 𝑘 and <code>nums[i]</code> can be as large as 10<sup>5</sup> and so the sums you have to calculate can be as large as 2⋅10<sup>10</sup> which is out of range for an <code>int</code>, resulting on wrong results. Use <code>long</code> instead. Then when you divide it into an average, cast to <code>int</code>.</p>\n<p>Secondly, your algorithm has a nested loop that gives it a time complexity of O(𝑘𝑛), while this can be done with O(𝑛) time complexity if you keep track of the sum (<code>temp</code>) incrementally: As you move forward, you can use the previous value of <code>temp</code> and subtract the left most value that drops out of the &quot;window&quot;, and add the new value that enters that window on the right side.</p>\n<p>Spoiler solution:</p>\n<blockquote class=\"spoiler\">\n<p> <code>class Solution {\n     public int[] getAverages(int[] nums, int k) {\n         int[] avg = new int[nums.length];\n         Arrays.fill(avg, -1);\n         int width = k + k + 1;\n         if (width &lt;= nums.length) {\n             long sum = 0;\n             for (int i = width - 2; i &gt;= 0; i--) {\n                 sum += nums[i];\n             }\n             for (int i = width - 1; i &lt; nums.length; i++) {\n                 sum += nums[i];\n                 avg[i - k] = (int) (sum / width);\n                 sum -= nums[i + 1 - width];\n             }\n         }\n         return avg;\n     }\n }</code></p>\n</blockquote>\n"}],"owner":{"account_id":28524247,"reputation":1,"user_id":21832518,"display_name":"Kunal Paliwal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1687526645,"creation_date":1687284546,"question_id":76517409,"body_markdown":"I am trying to solve LeetCode problem [2090. K Radius Subarray Averages](https://leetcode.com/problems/k-radius-subarray-averages/description/):\r\n\r\n&gt; You are given a **0-indexed** array `nums` of `n` integers, and an integer `k`.\r\n&gt; \r\n&gt; The **k-radius average** for a subarray of `nums` **centered** at some index `i` with the **radius** `k` is the average of **all** elements in `nums` between the indices `i - k` and `i + k` (**inclusive**). If there are less than `k` elements before or after the index `i`, then the **k-radius average** is -1.\r\n&gt; \r\n&gt; Build and return *an array* `avgs` *of length* `n` *where* `avgs[i]` *is the **k-radius average** for the subarray centered at index* `i`.\r\n&gt;\r\n&gt; The average of `x` elements is the sum of the `x` elements divided by `x`, using **integer division**. The integer division truncates toward zero, which means losing its fractional part.\r\n&gt; \r\n&gt; For example, the average of four elements 2, 3, 1, and 5 is (2 + 3 + 1 + 5) / 4 = 11 / 4 = 2.75, which truncates to 2.\r\n&gt; \r\n&gt; ### Constraints\r\n&gt; * `n == nums.length`\r\n&gt; * `1 &lt;= n &lt;= 105`\r\n&gt; * `0 &lt;= nums[i], k &lt;= 105`\r\n\r\nI have tried out this code, but apparently it fails for only one test case and not any other one. The test case being too large, I can&#39;t even figure out my error. \r\n\r\nWhat is my mistake?\r\n\r\nMy code:\r\n\r\n```\r\nclass Solution {\r\n    public int[] getAverages(int[] nums, int k) {\r\n        int[] avg= new int[nums.length];\r\n        for(int i=0; i &lt; nums.length; i++){\r\n            if(i&lt;k || (int)nums.length-i&lt;=k){\r\n                avg[i]=-1;\r\n            }\r\n            else{\r\n                int temp=nums[i];\r\n                for(int j=1; j&lt;=k; j++){\r\n                    temp=temp+nums[i-j]+ nums[i+j];\r\n                    //System.out.println(temp);\r\n                }\r\n                avg[i]= temp/(2*k+1);\r\n            }\r\n        }\r\n        return avg;\r\n    }\r\n}\r\n```\r\n \r\nThe last test case consisted of `k=4000`, and the input array consisted of many repeated 10000.","title":"2090. K Radius Subarray Averages Leetcode","body":"<p>I am trying to solve LeetCode problem <a href=\"https://leetcode.com/problems/k-radius-subarray-averages/description/\" rel=\"nofollow noreferrer\">2090. K Radius Subarray Averages</a>:</p>\n<blockquote>\n<p>You are given a <strong>0-indexed</strong> array <code>nums</code> of <code>n</code> integers, and an integer <code>k</code>.</p>\n<p>The <strong>k-radius average</strong> for a subarray of <code>nums</code> <strong>centered</strong> at some index <code>i</code> with the <strong>radius</strong> <code>k</code> is the average of <strong>all</strong> elements in <code>nums</code> between the indices <code>i - k</code> and <code>i + k</code> (<strong>inclusive</strong>). If there are less than <code>k</code> elements before or after the index <code>i</code>, then the <strong>k-radius average</strong> is -1.</p>\n<p>Build and return <em>an array</em> <code>avgs</code> <em>of length</em> <code>n</code> <em>where</em> <code>avgs[i]</code> <em>is the <strong>k-radius average</strong> for the subarray centered at index</em> <code>i</code>.</p>\n<p>The average of <code>x</code> elements is the sum of the <code>x</code> elements divided by <code>x</code>, using <strong>integer division</strong>. The integer division truncates toward zero, which means losing its fractional part.</p>\n<p>For example, the average of four elements 2, 3, 1, and 5 is (2 + 3 + 1 + 5) / 4 = 11 / 4 = 2.75, which truncates to 2.</p>\n<h3>Constraints</h3>\n<ul>\n<li><code>n == nums.length</code></li>\n<li><code>1 &lt;= n &lt;= 105</code></li>\n<li><code>0 &lt;= nums[i], k &lt;= 105</code></li>\n</ul>\n</blockquote>\n<p>I have tried out this code, but apparently it fails for only one test case and not any other one. The test case being too large, I can't even figure out my error.</p>\n<p>What is my mistake?</p>\n<p>My code:</p>\n<pre><code>class Solution {\n    public int[] getAverages(int[] nums, int k) {\n        int[] avg= new int[nums.length];\n        for(int i=0; i &lt; nums.length; i++){\n            if(i&lt;k || (int)nums.length-i&lt;=k){\n                avg[i]=-1;\n            }\n            else{\n                int temp=nums[i];\n                for(int j=1; j&lt;=k; j++){\n                    temp=temp+nums[i-j]+ nums[i+j];\n                    //System.out.println(temp);\n                }\n                avg[i]= temp/(2*k+1);\n            }\n        }\n        return avg;\n    }\n}\n</code></pre>\n<p>The last test case consisted of <code>k=4000</code>, and the input array consisted of many repeated 10000.</p>\n"},{"tags":["java","if-statement","ternary-operator"],"comments":[{"owner":{"account_id":109059,"reputation":20712,"user_id":289171,"accept_rate":100,"display_name":"CoolBeans"},"score":13,"creation_date":1326819647,"post_id":8898590,"comment_id":11128102,"body_markdown":"google [ternary operator in java](https://www.google.com/search?q=ternary+operator+java) :)","body":"google <a href=\"https://www.google.com/search?q=ternary+operator+java\" rel=\"nofollow noreferrer\">ternary operator in java</a> :)"},{"owner":{"account_id":152622,"reputation":490044,"user_id":367273,"accept_rate":96,"display_name":"NPE"},"score":3,"creation_date":1326819658,"post_id":8898590,"comment_id":11128107,"body_markdown":"I assume you got your `if` logic the wrong way round.","body":"I assume you got your <code>if</code> logic the wrong way round."},{"owner":{"account_id":12404,"reputation":62016,"user_id":24396,"accept_rate":74,"display_name":"Steve Kuo"},"score":8,"creation_date":1326819795,"post_id":8898590,"comment_id":11128162,"body_markdown":"`if (city.getName()!=null){name = city.getName();}else{name=&quot;N/A&quot;}`","body":"<code>if (city.getName()!=null){name = city.getName();}else{name=&quot;N&#47;A&quot;}</code>"},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":12,"creation_date":1326819917,"post_id":8898590,"comment_id":11128222,"body_markdown":"@SteveKuo There are three spaces you can remove. ;)","body":"@SteveKuo There are three spaces you can remove. ;)"},{"owner":{"account_id":3132957,"reputation":4812,"user_id":2650174,"accept_rate":84,"display_name":"Anton Dozortsev"},"score":2,"creation_date":1388673438,"post_id":8898590,"comment_id":31342296,"body_markdown":"`if (city.getName()!= null) name = city.getName(); else name=&quot;N/A&quot;;`","body":"<code>if (city.getName()!= null) name = city.getName(); else name=&quot;N&#47;A&quot;;</code>"}],"answers":[{"tags":[],"owner":{"account_id":963389,"reputation":11798,"user_id":987244,"accept_rate":75,"display_name":"shift66"},"down_vote_count":4,"up_vote_count":15,"is_accepted":false,"score":11,"last_activity_date":1512146777,"creation_date":1326819569,"answer_id":8898612,"question_id":8898590,"body_markdown":"    name = (city.getName() != null) ? city.getName() : &quot;N/A&quot;;","title":"Short form for Java if statement","body":"<pre><code>name = (city.getName() != null) ? city.getName() : \"N/A\";\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"down_vote_count":0,"up_vote_count":561,"is_accepted":true,"score":561,"last_activity_date":1502224029,"creation_date":1326819579,"answer_id":8898617,"question_id":8898590,"body_markdown":"Use the ternary operator:\r\n\r\n    name = ((city.getName() == null) ? &quot;N/A&quot; : city.getName());\r\n\r\nI think you have the conditions backwards - if it&#39;s null, you want the value to be &quot;N/A&quot;.\r\n\r\nWhat if city is null?  Your code *hits the bed in that case.  I&#39;d add another check:\r\n\r\n\r\n    name = ((city == null) || (city.getName() == null) ? &quot;N/A&quot; : city.getName());\r\n\r\n\r\n","title":"Short form for Java if statement","body":"<p>Use the ternary operator:</p>\n\n<pre><code>name = ((city.getName() == null) ? \"N/A\" : city.getName());\n</code></pre>\n\n<p>I think you have the conditions backwards - if it's null, you want the value to be \"N/A\".</p>\n\n<p>What if city is null?  Your code *hits the bed in that case.  I'd add another check:</p>\n\n<pre><code>name = ((city == null) || (city.getName() == null) ? \"N/A\" : city.getName());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":471849,"reputation":6191,"user_id":879899,"display_name":"Shadow"},"down_vote_count":7,"up_vote_count":2,"is_accepted":false,"score":-5,"last_activity_date":1502232486,"creation_date":1326819628,"answer_id":8898636,"question_id":8898590,"body_markdown":"    name = city.getName()!=null?city.getName():&quot;N/A&quot;","title":"Short form for Java if statement","body":"<pre><code>name = city.getName()!=null?city.getName():\"N/A\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":158125,"reputation":6731,"user_id":376527,"accept_rate":72,"display_name":"Sam Goldberg"},"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1326819668,"creation_date":1326819668,"answer_id":8898642,"question_id":8898590,"body_markdown":"The way to do it is with ternary operator:\r\n\r\n    name = city.getName() == null ? city.getName() : &quot;N/A&quot;\r\n\r\nHowever, I believe you have a typo in your code above, and you mean to say:\r\n\r\n    if (city.getName() != null) ...\r\n\r\n","title":"Short form for Java if statement","body":"<p>The way to do it is with ternary operator:</p>\n\n<pre><code>name = city.getName() == null ? city.getName() : \"N/A\"\n</code></pre>\n\n<p>However, I believe you have a typo in your code above, and you mean to say:</p>\n\n<pre><code>if (city.getName() != null) ...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":48,"is_accepted":false,"score":48,"last_activity_date":1326819873,"creation_date":1326819873,"answer_id":8898695,"question_id":8898590,"body_markdown":"To avoid calling `.getName()` twice I would use\r\n\r\n    name = city.getName();\r\n    if (name == null) name = &quot;N/A&quot;;","title":"Short form for Java if statement","body":"<p>To avoid calling <code>.getName()</code> twice I would use</p>\n\n<pre><code>name = city.getName();\nif (name == null) name = \"N/A\";\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5832348,"reputation":147,"user_id":4596449,"display_name":"OctopusSD"},"down_vote_count":4,"up_vote_count":15,"is_accepted":false,"score":11,"last_activity_date":1484251732,"creation_date":1437551231,"answer_id":31556945,"question_id":8898590,"body_markdown":"You can write `if, else if, else` statements in short form. For example:\r\n\r\n    Boolean isCapital = city.isCapital(); //Object Boolean (not boolean)\r\n    String isCapitalName = isCapital == null ? &quot;&quot; : isCapital ? &quot;Capital&quot; : &quot;City&quot;;      \r\n\r\nThis is short form of:\r\n    \r\n    Boolean isCapital = city.isCapital();\r\n    String isCapitalName;\r\n    if(isCapital == null) {\r\n        isCapitalName = &quot;&quot;;\r\n    } else if(isCapital) {\r\n        isCapitalName = &quot;Capital&quot;;\r\n    } else {\r\n        isCapitalName = &quot;City&quot;;\r\n    }","title":"Short form for Java if statement","body":"<p>You can write <code>if, else if, else</code> statements in short form. For example:</p>\n\n<pre><code>Boolean isCapital = city.isCapital(); //Object Boolean (not boolean)\nString isCapitalName = isCapital == null ? \"\" : isCapital ? \"Capital\" : \"City\";      \n</code></pre>\n\n<p>This is short form of:</p>\n\n<pre><code>Boolean isCapital = city.isCapital();\nString isCapitalName;\nif(isCapital == null) {\n    isCapitalName = \"\";\n} else if(isCapital) {\n    isCapitalName = \"Capital\";\n} else {\n    isCapitalName = \"City\";\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3070451,"reputation":5625,"user_id":2601258,"accept_rate":80,"display_name":"Reza Baradaran Gazorisangi"},"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1447630111,"creation_date":1447630111,"answer_id":33726384,"question_id":8898590,"body_markdown":"&gt; The ? : operator in Java\r\n\r\nIn Java you might write:\r\n\r\n    if (a &gt; b) {\r\n      max = a;\r\n    }\r\n    else {\r\n      max = b;\r\n    }\r\n\r\nSetting a single variable to one of two states based on a single condition is such a common use of if-else that a shortcut has been devised for it, the conditional operator, ?:. Using the conditional operator you can rewrite the above example in a single line like this:\r\n\r\n    max = (a &gt; b) ? a : b;\r\n(a &gt; b) ? a : b; is an expression which returns one of two values, a or b. The condition, (a &gt; b), is tested. If it is true the first value, a, is returned. If it is false, the second value, b, is returned. Whichever value is returned is dependent on the conditional test, a &gt; b. The condition can be any expression which returns a boolean value.\r\n\r\n","title":"Short form for Java if statement","body":"<blockquote>\n  <p>The ? : operator in Java</p>\n</blockquote>\n\n<p>In Java you might write:</p>\n\n<pre><code>if (a &gt; b) {\n  max = a;\n}\nelse {\n  max = b;\n}\n</code></pre>\n\n<p>Setting a single variable to one of two states based on a single condition is such a common use of if-else that a shortcut has been devised for it, the conditional operator, ?:. Using the conditional operator you can rewrite the above example in a single line like this:</p>\n\n<pre><code>max = (a &gt; b) ? a : b;\n</code></pre>\n\n<p>(a > b) ? a : b; is an expression which returns one of two values, a or b. The condition, (a > b), is tested. If it is true the first value, a, is returned. If it is false, the second value, b, is returned. Whichever value is returned is dependent on the conditional test, a > b. The condition can be any expression which returns a boolean value.</p>\n"},{"tags":[],"owner":{"account_id":9084485,"reputation":92,"user_id":6763091,"display_name":"Arafe Zawad Sajid"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1478373702,"creation_date":1478371931,"answer_id":40441962,"question_id":8898590,"body_markdown":"    name = ( (city.getName() == null)? &quot;N/A&quot; : city.getName() );\r\n\r\nfirstly the condition `(city.getName() == null)` is checked. If yes, then `&quot;N/A&quot;` is assigned to name or simply `name=&quot;N/A&quot;` or else the value from `city.getName()` is assigned to name, i.e. `name=city.getName()`.\r\n\r\nThings to look out here:\r\n\r\n1. condition is in the parenthesis followed by a question mark. That&#39;s why I write `(city.getName() == null)?`. Here the question mark is right after the condition. Easy to see/read/guess even!\r\n2. value left of colon (`:`) and value right of colon \r\n  (a) value left of colon is assigned when condition is true, else the value right of colon is assigned to the variable. \r\n\r\nhere&#39;s a reference: http://www.cafeaulait.org/course/week2/43.html","title":"Short form for Java if statement","body":"<pre><code>name = ( (city.getName() == null)? \"N/A\" : city.getName() );\n</code></pre>\n\n<p>firstly the condition <code>(city.getName() == null)</code> is checked. If yes, then <code>\"N/A\"</code> is assigned to name or simply <code>name=\"N/A\"</code> or else the value from <code>city.getName()</code> is assigned to name, i.e. <code>name=city.getName()</code>.</p>\n\n<p>Things to look out here:</p>\n\n<ol>\n<li>condition is in the parenthesis followed by a question mark. That's why I write <code>(city.getName() == null)?</code>. Here the question mark is right after the condition. Easy to see/read/guess even!</li>\n<li>value left of colon (<code>:</code>) and value right of colon \n(a) value left of colon is assigned when condition is true, else the value right of colon is assigned to the variable. </li>\n</ol>\n\n<p>here's a reference: <a href=\"http://www.cafeaulait.org/course/week2/43.html\" rel=\"nofollow noreferrer\">http://www.cafeaulait.org/course/week2/43.html</a></p>\n"},{"tags":[],"owner":{"account_id":4531600,"reputation":491517,"user_id":3681880,"accept_rate":90,"display_name":"Suragch"},"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1498211363,"creation_date":1498211363,"answer_id":44718351,"question_id":8898590,"body_markdown":"I&#39;m always forgeting how to use the `?:` [ternary operator][1]. This supplemental answer is a quick reminder. It is shorthand for `if-then-else`.\r\n\r\n\tmyVariable = (testCondition) ? someValue : anotherValue;\r\n\r\nwhere\r\n\r\n- `()` holds the `if`\r\n- `?` means `then`\r\n- `:` means `else`\r\n\r\nIt is the same as\r\n\r\n\tif (testCondition) {\r\n\t\tmyVariable = someValue;\r\n\t} else {\r\n\t\tmyVariable = anotherValue;\r\n\t}\r\n\t\t\r\n\t\t\r\n  [1]: http://alvinalexander.com/java/edu/pj/pj010018","title":"Short form for Java if statement","body":"<p>I'm always forgeting how to use the <code>?:</code> <a href=\"http://alvinalexander.com/java/edu/pj/pj010018\" rel=\"noreferrer\">ternary operator</a>. This supplemental answer is a quick reminder. It is shorthand for <code>if-then-else</code>.</p>\n\n<pre><code>myVariable = (testCondition) ? someValue : anotherValue;\n</code></pre>\n\n<p>where</p>\n\n<ul>\n<li><code>()</code> holds the <code>if</code></li>\n<li><code>?</code> means <code>then</code></li>\n<li><code>:</code> means <code>else</code></li>\n</ul>\n\n<p>It is the same as</p>\n\n<pre><code>if (testCondition) {\n    myVariable = someValue;\n} else {\n    myVariable = anotherValue;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1090269,"reputation":842,"user_id":1085048,"display_name":"digitebs"},"down_vote_count":1,"up_vote_count":24,"is_accepted":false,"score":23,"last_activity_date":1498706325,"creation_date":1498706325,"answer_id":44815822,"question_id":8898590,"body_markdown":"in java 8:\r\n\r\n    name = Optional.ofNullable(city.getName()).orElse(&quot;N/A&quot;)","title":"Short form for Java if statement","body":"<p>in java 8:</p>\n\n<pre><code>name = Optional.ofNullable(city.getName()).orElse(\"N/A\")\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10123132,"reputation":639,"user_id":7479415,"display_name":"Paul Rambags"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1501775503,"creation_date":1501775503,"answer_id":45489101,"question_id":8898590,"body_markdown":"Use org.apache.commons.lang3.StringUtils:\r\n\r\n    name = StringUtils.defaultString(city.getName(), &quot;N/A&quot;);\r\n\r\n","title":"Short form for Java if statement","body":"<p>Use org.apache.commons.lang3.StringUtils:</p>\n\n<pre><code>name = StringUtils.defaultString(city.getName(), \"N/A\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7073712,"reputation":1704,"user_id":5414507,"accept_rate":56,"display_name":"Vasile Doe"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1509982863,"creation_date":1509982863,"answer_id":47140583,"question_id":8898590,"body_markdown":"***Simple &amp; clear:***\r\n\r\n    String manType = hasMoney() ? &quot;rich&quot; : &quot;poor&quot;;\r\n\r\nlong version:\r\n\r\n          String manType;\r\n        if (hasMoney()) {\r\n            manType = &quot;rich&quot;;\r\n        } else {\r\n            manType = &quot;poor&quot;;\r\n        }\r\n\r\nor how I&#39;m using it to be clear for other code readers:\r\n   \r\n\r\n     String manType = &quot;poor&quot;;\r\n        if (hasMoney())\r\n            manType = &quot;rich&quot;;\r\n\r\n\r\n","title":"Short form for Java if statement","body":"<p><strong><em>Simple &amp; clear:</em></strong></p>\n\n<pre><code>String manType = hasMoney() ? \"rich\" : \"poor\";\n</code></pre>\n\n<p>long version:</p>\n\n<pre><code>      String manType;\n    if (hasMoney()) {\n        manType = \"rich\";\n    } else {\n        manType = \"poor\";\n    }\n</code></pre>\n\n<p>or how I'm using it to be clear for other code readers:</p>\n\n<pre><code> String manType = \"poor\";\n    if (hasMoney())\n        manType = \"rich\";\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3377694,"reputation":4854,"user_id":2835520,"accept_rate":100,"display_name":"IgniteCoders"},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1578396332,"creation_date":1526298969,"answer_id":50329703,"question_id":8898590,"body_markdown":"&gt;  **1.** You can remove **brackets** and **line breaks**.\r\n\r\n\r\n    if (city.getName() != null) name = city.getName(); else name = &quot;N/A&quot;;\r\n\r\n\r\n----------\r\n\r\n\r\n&gt; **2.** You can use **?:** operators in java.\r\n\r\n**Syntax:**\r\n\r\n    Variable = Condition ? BlockTrue : BlockElse;\r\n\r\nSo in your code you can do like this:\r\n\r\n    name = city.getName() == null ? &quot;N/A&quot; : city.getName();\r\n\r\n\r\n----------\r\n\r\n\r\n&gt; **3.** Assign condition result for **Boolean** \r\n\r\n    boolean hasName = city.getName() != null;\r\n\r\n\r\n----------\r\n**EXTRA:** *for curious*\r\n\r\nIn some languages based in `JAVA` like `Groovy`, you can use this syntax:\r\n\r\n    name = city.getName() ?: &quot;N/A&quot;;\r\n\r\nThe operator `?:` assign the value returned from the variable which we are asking for. In this case, the value of `city.getName()` if it&#39;s not `null`.","title":"Short form for Java if statement","body":"<blockquote>\n  <p><strong>1.</strong> You can remove <strong>brackets</strong> and <strong>line breaks</strong>.</p>\n</blockquote>\n\n<pre><code>if (city.getName() != null) name = city.getName(); else name = \"N/A\";\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p><strong>2.</strong> You can use <strong>?:</strong> operators in java.</p>\n</blockquote>\n\n<p><strong>Syntax:</strong></p>\n\n<pre><code>Variable = Condition ? BlockTrue : BlockElse;\n</code></pre>\n\n<p>So in your code you can do like this:</p>\n\n<pre><code>name = city.getName() == null ? \"N/A\" : city.getName();\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p><strong>3.</strong> Assign condition result for <strong>Boolean</strong> </p>\n</blockquote>\n\n<pre><code>boolean hasName = city.getName() != null;\n</code></pre>\n\n<hr>\n\n<p><strong>EXTRA:</strong> <em>for curious</em></p>\n\n<p>In some languages based in <code>JAVA</code> like <code>Groovy</code>, you can use this syntax:</p>\n\n<pre><code>name = city.getName() ?: \"N/A\";\n</code></pre>\n\n<p>The operator <code>?:</code> assign the value returned from the variable which we are asking for. In this case, the value of <code>city.getName()</code> if it's not <code>null</code>.</p>\n"},{"tags":[],"owner":{"account_id":10526983,"reputation":69,"user_id":7757696,"display_name":"Waqas Qayum"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1532392524,"creation_date":1532392524,"answer_id":51488901,"question_id":8898590,"body_markdown":"here is one line code \r\n\r\n    name = (city.getName() != null) ? city.getName() : &quot;N/A&quot;;\r\n\r\nhere is example how it work, run below code in js file and understand the result. This `(&quot;Data&quot; != null)` is condition as we do in normal `if()` and `&quot;Data&quot;` is statement when this condition became true. this `&quot; : &quot;` act as else and `&quot;N/A&quot;` is statement for else condition. Hope this help you to understand the logic.  \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    name = (&quot;Data&quot; != null) ? &quot;Data&quot; : &quot;N/A&quot;;\r\n\r\n    console.log(name);\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Short form for Java if statement","body":"<p>here is one line code </p>\n\n<pre><code>name = (city.getName() != null) ? city.getName() : \"N/A\";\n</code></pre>\n\n<p>here is example how it work, run below code in js file and understand the result. This <code>(\"Data\" != null)</code> is condition as we do in normal <code>if()</code> and <code>\"Data\"</code> is statement when this condition became true. this <code>\" : \"</code> act as else and <code>\"N/A\"</code> is statement for else condition. Hope this help you to understand the logic.  </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>name = (\"Data\" != null) ? \"Data\" : \"N/A\";\r\n\r\nconsole.log(name);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":23196181,"reputation":51,"user_id":17291781,"display_name":"Osama Alzahrani"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1635763293,"creation_date":1635763236,"answer_id":69795754,"question_id":8898590,"body_markdown":"\r\nYou could make it much easier this way :\r\n```\r\nname = city.getName() == null ? city.getName() : &quot;N/A&quot;\r\n```","title":"Short form for Java if statement","body":"<p>You could make it much easier this way :</p>\n<pre><code>name = city.getName() == null ? city.getName() : &quot;N/A&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6600231,"reputation":672,"user_id":5098772,"display_name":"Victor1125"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653565967,"creation_date":1653565967,"answer_id":72391387,"question_id":8898590,"body_markdown":"In Java 8+ you have 2 solution.\r\n With short if statement:\r\n\r\n    Objects.nonNull(city.getName())? city.getName(): &quot;N/A&quot;;\r\n\r\nBetter solution in your case is use Optional:\r\n\r\n    Optional.ofNullable(city)\r\n                .map(City::getName)\r\n                .orElse(&quot;N/A&quot;);\r\n    ","title":"Short form for Java if statement","body":"<p>In Java 8+ you have 2 solution.\nWith short if statement:</p>\n<pre><code>Objects.nonNull(city.getName())? city.getName(): &quot;N/A&quot;;\n</code></pre>\n<p>Better solution in your case is use Optional:</p>\n<pre><code>Optional.ofNullable(city)\n            .map(City::getName)\n            .orElse(&quot;N/A&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1687526524,"creation_date":1687526524,"answer_id":76540546,"question_id":8898590,"body_markdown":"One line, avoiding second call to method (and creation of additional `Optional` instance):\r\n\r\n````\r\nif ( (name = city.getName()) == null ) name = &quot;N/A&quot;;\r\n````\r\n\r\n&lt;sub&gt;partly based on source code of standard Java classes &lt;/sub&gt;","title":"Short form for Java if statement","body":"<p>One line, avoiding second call to method (and creation of additional <code>Optional</code> instance):</p>\n<pre><code>if ( (name = city.getName()) == null ) name = &quot;N/A&quot;;\n</code></pre>\n<p><sub>partly based on source code of standard Java classes </sub></p>\n"}],"owner":{"account_id":365234,"reputation":17197,"user_id":710051,"accept_rate":85,"display_name":"Makky"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1045449,"favorite_count":0,"down_vote_count":2,"up_vote_count":295,"accepted_answer_id":8898617,"answer_count":17,"score":293,"last_activity_date":1687526524,"creation_date":1326819483,"question_id":8898590,"body_markdown":"I know there is a way for writing a Java `if` statement in short form.\r\n\r\n    if (city.getName() != null) {\r\n        name = city.getName();\r\n    } else {\r\n        name=&quot;N/A&quot;;\r\n    }\r\n\r\nDoes anyone know how to write the short form for the above 5 lines into one line?","title":"Short form for Java if statement","body":"<p>I know there is a way for writing a Java <code>if</code> statement in short form.</p>\n\n<pre><code>if (city.getName() != null) {\n    name = city.getName();\n} else {\n    name=\"N/A\";\n}\n</code></pre>\n\n<p>Does anyone know how to write the short form for the above 5 lines into one line?</p>\n"},{"tags":["java","sonarqube"],"comments":[{"owner":{"account_id":968743,"reputation":3452,"user_id":991710,"accept_rate":82,"display_name":"filpa"},"score":0,"creation_date":1687355489,"post_id":76523970,"comment_id":134925338,"body_markdown":"I&#39;m wondering how the initial code *ever* passed a review, but we probably know that answer to that one...","body":"I&#39;m wondering how the initial code <i>ever</i> passed a review, but we probably know that answer to that one..."},{"owner":{"account_id":1197265,"reputation":1088,"user_id":1168703,"display_name":"Pras"},"score":0,"creation_date":1687355724,"post_id":76523970,"comment_id":134925394,"body_markdown":"It&#39;s just the Sonaqube error which is annoying right ?\nJust add some :\n             log.debug(&quot;problem comes from library&quot;);\nin that if statement, and problem solved, no ?","body":"It&#39;s just the Sonaqube error which is annoying right ? Just add some :              log.debug(&quot;problem comes from library&quot;); in that if statement, and problem solved, no ?"},{"owner":{"account_id":1782099,"reputation":843,"user_id":1624551,"display_name":"Pao"},"score":0,"creation_date":1687356154,"post_id":76523970,"comment_id":134925515,"body_markdown":"@Pras: That&#39;s what the &quot;handle it&quot; &quot;code&quot; currently consists of. Annoying me or others is not the problem, passing the quality gate is the problem. And because Sonarqube classifies this as bug, the Reliability rating is reduced, currently to C, where B is required. I will edit the question to clarify that it might not be a problem, but in fact really is a problem.","body":"@Pras: That&#39;s what the &quot;handle it&quot; &quot;code&quot; currently consists of. Annoying me or others is not the problem, passing the quality gate is the problem. And because Sonarqube classifies this as bug, the Reliability rating is reduced, currently to C, where B is required. I will edit the question to clarify that it might not be a problem, but in fact really is a problem."},{"owner":{"account_id":1197265,"reputation":1088,"user_id":1168703,"display_name":"Pras"},"score":0,"creation_date":1687358108,"post_id":76523970,"comment_id":134926037,"body_markdown":"Hmm, what i am saying is that &quot;handle it&quot; is no code, just a comment. &quot;log.debug&quot; is code, and sonarqube will no longer classify this as a bug","body":"Hmm, what i am saying is that &quot;handle it&quot; is no code, just a comment. &quot;log.debug&quot; is code, and sonarqube will no longer classify this as a bug"},{"owner":{"account_id":1782099,"reputation":843,"user_id":1624551,"display_name":"Pao"},"score":0,"creation_date":1687358170,"post_id":76523970,"comment_id":134926062,"body_markdown":"Well, in fact the real code is slightly different and i simplified to the version in the question and omitted the log. I will edit the question to clarify this.","body":"Well, in fact the real code is slightly different and i simplified to the version in the question and omitted the log. I will edit the question to clarify this."},{"owner":{"account_id":1782099,"reputation":843,"user_id":1624551,"display_name":"Pao"},"score":0,"creation_date":1687359279,"post_id":76523970,"comment_id":134926390,"body_markdown":"The comment &quot; [...] log.debug is code, and sonarqube will no longer classify this is a bug&quot; set me thinking. So i commented out the log line to see if code or comment in this place makes a difference, but Sonarlint still complains about the `company != null` condition, so i think that Sonarqube will also keep seeing this as a bug.","body":"The comment &quot; [...] log.debug is code, and sonarqube will no longer classify this is a bug&quot; set me thinking. So i commented out the log line to see if code or comment in this place makes a difference, but Sonarlint still complains about the <code>company != null</code> condition, so i think that Sonarqube will also keep seeing this as a bug."},{"owner":{"account_id":1197265,"reputation":1088,"user_id":1168703,"display_name":"Pras"},"score":0,"creation_date":1687360806,"post_id":76523970,"comment_id":134926795,"body_markdown":"yes ok, the complain is on the if statement, and not on the comment as i thought.\nSorry, i misunderstood","body":"yes ok, the complain is on the if statement, and not on the comment as i thought. Sorry, i misunderstood"}],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687357100,"creation_date":1687357100,"answer_id":76524306,"question_id":76523970,"body_markdown":"Did you try with Optional like this: \r\n`Optional&lt;Company&gt; company = Optional.ofNullable(companyService.getCompany(companyKey));` ? after your check will be `company.isPresent()`","title":"How to handle a method in an external library annotated with @NotNull that does return null","body":"<p>Did you try with Optional like this:\n<code>Optional&lt;Company&gt; company = Optional.ofNullable(companyService.getCompany(companyKey));</code> ? after your check will be <code>company.isPresent()</code></p>\n"},{"tags":[],"owner":{"account_id":14593176,"reputation":115,"user_id":10539722,"display_name":"3AKOBAH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687526251,"creation_date":1687526251,"answer_id":76540499,"question_id":76523970,"body_markdown":"For the IDE warning if it is IntelliJ you could add:\r\n\r\n    //noinspection ConstantConditions","title":"How to handle a method in an external library annotated with @NotNull that does return null","body":"<p>For the IDE warning if it is IntelliJ you could add:</p>\n<pre><code>//noinspection ConstantConditions\n</code></pre>\n"}],"owner":{"account_id":1782099,"reputation":843,"user_id":1624551,"display_name":"Pao"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1687526251,"creation_date":1687355013,"question_id":76523970,"body_markdown":"I am working with code that uses a library i can not change with a method annotated @NotNull (org.jetbrains), that does return null regardless of the annotation. Here is a simplified example:\r\n\r\n```\r\n@NotNull\r\npublic Company getCompany(CompanyKey companyKey) {\r\n  Company company = em.find(Company.class, companyKey.getKey());\r\n  if (company != null) {\r\n    return company\r\n  } else {\r\n    return null;\r\n  }\r\n}\r\n```\r\n\r\nTo account for ```getCompany``` returning null, the original developer thought he has to check the return value. \r\n\r\nNow, reading the docs for @NotNull i see that it says that a NotNull-annotated method will throw an IllegalStateException when it does return null. But i assume that this is only true if the code was compiled in the IDE, because i read somewhere that the Jetbrains compiler inserts this behavior. And production code is usually (and so in this case) not compiled in the IDE.\r\n\r\nThe null check is no problem to me, but for this code:\r\n\r\n```\r\nCompany company = companyService.getCompany(companyKey);\r\nif (company != null) { // &lt;- this is the offending line\r\n  // do the intended thing, real code omitted\r\n} else {\r\n  log.warning(&quot;warning message&quot;);\r\n}\r\n```\r\ni get a warning in the IDE (annoying, but no great problem) and Sonarqube reports this as a bug, because it says that ```handle it...``` is dead code, which is &quot;always buggy and should never be used in production&quot;. Now, this is even more annoying and even a real problem, because it reduces the Reliability rating and the code fails to pass the quality gate.\r\n\r\nI tried annotating the code like this\r\n```\r\n@SuppressWarnings(&quot;java:S2583&quot;) // &lt;- this is the aforementioned Sonarlint rule\r\nCompany company = companyService.getCompany(companyKey);\r\n``` \r\nbut this does not work because the offending null check is in the following line and the annotation has to be placed on the variable declaration.\r\n\r\nI also tried\r\n```\r\n@Nullable\r\nCompany company = companyService.getCompany(companyKey);\r\n``` \r\nwhich does not have any effect.\r\n\r\nI know i could annotate the whole method with ```@SuppressWarnings(&quot;java:S2583&quot;)```, but i would like to avoid that and would like to know if there is a better solution.\r\n ","title":"How to handle a method in an external library annotated with @NotNull that does return null","body":"<p>I am working with code that uses a library i can not change with a method annotated @NotNull (org.jetbrains), that does return null regardless of the annotation. Here is a simplified example:</p>\n<pre><code>@NotNull\npublic Company getCompany(CompanyKey companyKey) {\n  Company company = em.find(Company.class, companyKey.getKey());\n  if (company != null) {\n    return company\n  } else {\n    return null;\n  }\n}\n</code></pre>\n<p>To account for <code>getCompany</code> returning null, the original developer thought he has to check the return value.</p>\n<p>Now, reading the docs for @NotNull i see that it says that a NotNull-annotated method will throw an IllegalStateException when it does return null. But i assume that this is only true if the code was compiled in the IDE, because i read somewhere that the Jetbrains compiler inserts this behavior. And production code is usually (and so in this case) not compiled in the IDE.</p>\n<p>The null check is no problem to me, but for this code:</p>\n<pre><code>Company company = companyService.getCompany(companyKey);\nif (company != null) { // &lt;- this is the offending line\n  // do the intended thing, real code omitted\n} else {\n  log.warning(&quot;warning message&quot;);\n}\n</code></pre>\n<p>i get a warning in the IDE (annoying, but no great problem) and Sonarqube reports this as a bug, because it says that <code>handle it...</code> is dead code, which is &quot;always buggy and should never be used in production&quot;. Now, this is even more annoying and even a real problem, because it reduces the Reliability rating and the code fails to pass the quality gate.</p>\n<p>I tried annotating the code like this</p>\n<pre><code>@SuppressWarnings(&quot;java:S2583&quot;) // &lt;- this is the aforementioned Sonarlint rule\nCompany company = companyService.getCompany(companyKey);\n</code></pre>\n<p>but this does not work because the offending null check is in the following line and the annotation has to be placed on the variable declaration.</p>\n<p>I also tried</p>\n<pre><code>@Nullable\nCompany company = companyService.getCompany(companyKey);\n</code></pre>\n<p>which does not have any effect.</p>\n<p>I know i could annotate the whole method with <code>@SuppressWarnings(&quot;java:S2583&quot;)</code>, but i would like to avoid that and would like to know if there is a better solution.</p>\n"},{"tags":["java","antlr","antlr4"],"comments":[{"owner":{"account_id":28879169,"reputation":1,"user_id":22119007,"display_name":"starliftenthusiast"},"score":0,"creation_date":1687521344,"post_id":76538530,"comment_id":134952234,"body_markdown":"Yup, I meant to say it doesn&#39;t have any infinite loop recursions because it consumes some terminals. Edited the post to say it too, ty.\n\nDo you have an idea where I can find a solution?","body":"Yup, I meant to say it doesn&#39;t have any infinite loop recursions because it consumes some terminals. Edited the post to say it too, ty.  Do you have an idea where I can find a solution?"},{"owner":{"account_id":6128906,"reputation":1172,"user_id":4779853,"display_name":"kaby76"},"score":0,"creation_date":1687523023,"post_id":76538530,"comment_id":134952617,"body_markdown":"In other words, you do not want a `name` as a decendent of `name`, i.e. in xpath notation `not(//name//name)`. This is an easy check. What is hard about this?","body":"In other words, you do not want a <code>name</code> as a decendent of <code>name</code>, i.e. in xpath notation <code>not(&#47;&#47;name&#47;&#47;name)</code>. This is an easy check. What is hard about this?"},{"owner":{"account_id":6128906,"reputation":1172,"user_id":4779853,"display_name":"kaby76"},"score":0,"creation_date":1687547253,"post_id":76538530,"comment_id":134957721,"body_markdown":"By the way, this cannot be a realistic Antlr grammar. `Names` begins with a uppercase letter, which means that it is a lexer symbol. Yet the rule that defines it has symbol `word` on the right hand side, which is a parser rule because it starts with a lowercase letter. A lexer rule cannot have a parser rule symbol on the right hand side. The tool would never accept this.","body":"By the way, this cannot be a realistic Antlr grammar. <code>Names</code> begins with a uppercase letter, which means that it is a lexer symbol. Yet the rule that defines it has symbol <code>word</code> on the right hand side, which is a parser rule because it starts with a lowercase letter. A lexer rule cannot have a parser rule symbol on the right hand side. The tool would never accept this."},{"owner":{"account_id":28879169,"reputation":1,"user_id":22119007,"display_name":"starliftenthusiast"},"score":0,"creation_date":1687695608,"post_id":76538530,"comment_id":134969647,"body_markdown":"right, it&#39;s easy to check if I know the exact fixed path between the 2 Name contexts. But this is a sample grammar, and in the real case it&#39;s got multiple paths to get to the second Name context, and there&#39;s no way to pin down every single one.","body":"right, it&#39;s easy to check if I know the exact fixed path between the 2 Name contexts. But this is a sample grammar, and in the real case it&#39;s got multiple paths to get to the second Name context, and there&#39;s no way to pin down every single one."},{"owner":{"account_id":6128906,"reputation":1172,"user_id":4779853,"display_name":"kaby76"},"score":0,"creation_date":1687700591,"post_id":76538530,"comment_id":134970241,"body_markdown":"&#39;//name&#39; never means a fixed path. It means &quot;a descendent of&quot; through the `children` relationship that ends in a `name` node. The expression can be inverted into one that deals with ancestors, which would be more efficient when implemented using an Antlr visitor or listener. But, you will need to identify what parse tree structures are invalid for your language.","body":"&#39;//name&#39; never means a fixed path. It means &quot;a descendent of&quot; through the <code>children</code> relationship that ends in a <code>name</code> node. The expression can be inverted into one that deals with ancestors, which would be more efficient when implemented using an Antlr visitor or listener. But, you will need to identify what parse tree structures are invalid for your language."}],"answers":[{"tags":[],"owner":{"account_id":20937,"reputation":167577,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687525854,"creation_date":1687525854,"answer_id":76540450,"question_id":76538530,"body_markdown":"ANTLR will create a [`ParseTree`](https://www.antlr.org/api/Java/org/antlr/v4/runtime/tree/ParseTree.html) from your input. This `ParseTree` has a `getChild(int)` method, which returns a `ParseTree` as well. Use it to dive into your root tree and find out if a certain rule is used inside another.\r\n\r\nOr use a [listener](https://github.com/antlr/antlr4/blob/master/doc/listeners.md) and keep track of when a `enterSentence(...)` call happens. When that does, keep an instance variable inside your listener and then also implement `enterNames(...)`, which will throw an exception when the instance variable from `enterSentence(...)` is already set.\r\n\r\nPseudo code:\r\n```\r\nclass YourListener extends YourGrammarBaseListener {\r\n\r\n  boolean insideSentence = false\r\n\r\n  void enterSentence(...) {\r\n    insideSentence = true\r\n  }\r\n\r\n  void exitSentence(...) {\r\n    insideSentence = false\r\n  }\r\n\r\n  void enterNames(...) {\r\n    if (insideSentence) {\r\n      throw Error()\r\n    }\r\n  }\r\n}\r\n```","title":"How do I recursively check the child contexts of a given context in antlr?","body":"<p>ANTLR will create a <a href=\"https://www.antlr.org/api/Java/org/antlr/v4/runtime/tree/ParseTree.html\" rel=\"nofollow noreferrer\"><code>ParseTree</code></a> from your input. This <code>ParseTree</code> has a <code>getChild(int)</code> method, which returns a <code>ParseTree</code> as well. Use it to dive into your root tree and find out if a certain rule is used inside another.</p>\n<p>Or use a <a href=\"https://github.com/antlr/antlr4/blob/master/doc/listeners.md\" rel=\"nofollow noreferrer\">listener</a> and keep track of when a <code>enterSentence(...)</code> call happens. When that does, keep an instance variable inside your listener and then also implement <code>enterNames(...)</code>, which will throw an exception when the instance variable from <code>enterSentence(...)</code> is already set.</p>\n<p>Pseudo code:</p>\n<pre><code>class YourListener extends YourGrammarBaseListener {\n\n  boolean insideSentence = false\n\n  void enterSentence(...) {\n    insideSentence = true\n  }\n\n  void exitSentence(...) {\n    insideSentence = false\n  }\n\n  void enterNames(...) {\n    if (insideSentence) {\n      throw Error()\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":28879169,"reputation":1,"user_id":22119007,"display_name":"starliftenthusiast"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1687525854,"creation_date":1687510517,"question_id":76538530,"body_markdown":"I am working with a really large grammar, and there is a loop in the CFG, but no infinite recursions.\r\n\r\nI need to check all the children of a specific context, and if my target context is among those children, then I need to throw an error.\r\n\r\nSuppose if my grammar was like\r\n\r\n```\r\n    Sentence\r\n    :   Nouns &#39;AND&#39; Sentence\r\n    |   Pronouns &#39;AND&#39; Sentence\r\n    |   &#39;WITH APPLESAUCE&#39;\r\n    ;\r\n    \r\n    Nouns  \r\n    :   Names\r\n    |   Places\r\n    |   Animals\r\n    |   Things\r\n    ;\r\n    \r\n    Names\r\n    :   word &#39;AND&#39; Sentence\r\n    ;\r\n        \r\n    word\r\n    :   (A-Z) (a-z)* // just any word\r\n    ;\r\n```\r\n\r\nAnd I had to make sure that if a Sentence has a Names word, then the Sentence coming from that Names rule must not have any other Names? ie,\r\n\r\n```\r\n    Sentence -&gt;\r\n    Nouns &#39;AND&#39; &#39;WITH APPLESAUCE&#39; -&gt;\r\n    Names &#39;AND&#39; &#39;WITH APPLESAUCE&#39; -&gt;\r\n    word &#39;AND&#39; Sentence &#39;AND&#39; &#39;WITH APPLESAUCE&#39;, in this case, \r\n```\r\n\r\n`word &#39;AND&#39; Names &#39;AND&#39; &#39;WITH APPLESAUCE&#39;` is invalid, but `word &#39;AND&#39; Places &#39;AND&#39; &#39;WITH APPLESAUCE&#39;` is valid?\r\n\r\nI tried going through the antlr documentation, but couldn&#39;t find anything for recursive search of children. I know that antlr generates a parse tree, so I thought it might be possible to check if there was a specific child/grandchild/n-th child context from a given point.","title":"How do I recursively check the child contexts of a given context in antlr?","body":"<p>I am working with a really large grammar, and there is a loop in the CFG, but no infinite recursions.</p>\n<p>I need to check all the children of a specific context, and if my target context is among those children, then I need to throw an error.</p>\n<p>Suppose if my grammar was like</p>\n<pre><code>    Sentence\n    :   Nouns 'AND' Sentence\n    |   Pronouns 'AND' Sentence\n    |   'WITH APPLESAUCE'\n    ;\n    \n    Nouns  \n    :   Names\n    |   Places\n    |   Animals\n    |   Things\n    ;\n    \n    Names\n    :   word 'AND' Sentence\n    ;\n        \n    word\n    :   (A-Z) (a-z)* // just any word\n    ;\n</code></pre>\n<p>And I had to make sure that if a Sentence has a Names word, then the Sentence coming from that Names rule must not have any other Names? ie,</p>\n<pre><code>    Sentence -&gt;\n    Nouns 'AND' 'WITH APPLESAUCE' -&gt;\n    Names 'AND' 'WITH APPLESAUCE' -&gt;\n    word 'AND' Sentence 'AND' 'WITH APPLESAUCE', in this case, \n</code></pre>\n<p><code>word 'AND' Names 'AND' 'WITH APPLESAUCE'</code> is invalid, but <code>word 'AND' Places 'AND' 'WITH APPLESAUCE'</code> is valid?</p>\n<p>I tried going through the antlr documentation, but couldn't find anything for recursive search of children. I know that antlr generates a parse tree, so I thought it might be possible to check if there was a specific child/grandchild/n-th child context from a given point.</p>\n"},{"tags":["java","serialization","gson","abstract","lombok"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1687510135,"post_id":76538452,"comment_id":134950005,"body_markdown":"Why not simply assign your constant value to the `abstractVariable` in the parent class?","body":"Why not simply assign your constant value to the <code>abstractVariable</code> in the parent class?"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1687510215,"post_id":76538452,"comment_id":134950023,"body_markdown":"Also, doesn&#39;t the duplicate declaration of `public abstract String getAbstractVariable();` together with the `@Getter` cause a problem? I&#39;m not sure which one wins.","body":"Also, doesn&#39;t the duplicate declaration of <code>public abstract String getAbstractVariable();</code> together with the <code>@Getter</code> cause a problem? I&#39;m not sure which one wins."},{"owner":{"account_id":26129583,"reputation":3,"user_id":19820503,"display_name":"Larvis"},"score":0,"creation_date":1687511336,"post_id":76538452,"comment_id":134950258,"body_markdown":"@Jorn because each class extending AbstractClass needs to set its own value. And same bad result without Getter","body":"@Jorn because each class extending AbstractClass needs to set its own value. And same bad result without Getter"},{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1687511338,"post_id":76538452,"comment_id":134950260,"body_markdown":"Gson doesn&#39;t use getters but access fields directly. Use Jackson instead. It uses getters/setters and has plenty annotations for configuration.","body":"Gson doesn&#39;t use getters but access fields directly. Use Jackson instead. It uses getters/setters and has plenty annotations for configuration."},{"owner":{"account_id":26129583,"reputation":3,"user_id":19820503,"display_name":"Larvis"},"score":0,"creation_date":1687511833,"post_id":76538452,"comment_id":134950363,"body_markdown":"@Mar-Z Thanks, but the serializer is a service that I mustn&#39;t touch, I&#39;m looking for a solution with Gson","body":"@Mar-Z Thanks, but the serializer is a service that I mustn&#39;t touch, I&#39;m looking for a solution with Gson"},{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1687512145,"post_id":76538452,"comment_id":134950416,"body_markdown":"In this case you will need to modify the field. As I said: Gson doesn&#39;t use getters but access fields directly.","body":"In this case you will need to modify the field. As I said: Gson doesn&#39;t use getters but access fields directly."}],"answers":[{"tags":[],"owner":{"account_id":26129583,"reputation":3,"user_id":19820503,"display_name":"Larvis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687525559,"creation_date":1687525559,"answer_id":76540416,"question_id":76538452,"body_markdown":"As GSON uses reflection to access fields and not getters/setters my solution can&#39;t work.\r\nI tried to use Gson JsonSerializer and TypeAdapter but their methods can&#39;t access to the field&#39;s parent instance to call the getter (too bad it would be cool and would offer lots of possibilities).\r\n\r\nSo to force the set of *abstractVariable* I now use a constructor in the abstract class. Because of this I cannot use anymore @Data in the extended class and have to replace it by many annotations :\r\n\r\n```\r\n@Data\r\nabstract class AbstractClass implements Serializable {\r\n\r\n    public AbstractClass(String abstractVariable) {\r\n        this.abstractVariable = abstractVariable;\r\n    }\r\n\r\n    private String abstractVariable;\r\n}\r\n\r\n@ToString(callSuper = true)\r\n@EqualsAndHashCode(callSuper = true)\r\n@Getter\r\n@Setter\r\nclass ConcreteClass extends AbstractClass {\r\n\tpublic ConcreteClass() {\r\n\t\tsuper(&quot;const&quot;);\r\n\t}\r\n\r\n\tprivate String concreteVariable;\r\n}\r\n\r\nGson gson = new Gson();\r\nSystem.out.println(&quot;ConcreteClass=&quot;+gson.toJson(new ConcreteClass()));\r\n=&gt;\r\nConcreteClass={&quot;abstractVariable&quot;:&quot;const&quot;}\r\n```\r\n\r\nIf anyone sees another solution I&#39;m curious to know it especially if it&#39;s simpler","title":"How to serialize an abstract getter using Lombok and Gson?","body":"<p>As GSON uses reflection to access fields and not getters/setters my solution can't work.\nI tried to use Gson JsonSerializer and TypeAdapter but their methods can't access to the field's parent instance to call the getter (too bad it would be cool and would offer lots of possibilities).</p>\n<p>So to force the set of <em>abstractVariable</em> I now use a constructor in the abstract class. Because of this I cannot use anymore @Data in the extended class and have to replace it by many annotations :</p>\n<pre><code>@Data\nabstract class AbstractClass implements Serializable {\n\n    public AbstractClass(String abstractVariable) {\n        this.abstractVariable = abstractVariable;\n    }\n\n    private String abstractVariable;\n}\n\n@ToString(callSuper = true)\n@EqualsAndHashCode(callSuper = true)\n@Getter\n@Setter\nclass ConcreteClass extends AbstractClass {\n    public ConcreteClass() {\n        super(&quot;const&quot;);\n    }\n\n    private String concreteVariable;\n}\n\nGson gson = new Gson();\nSystem.out.println(&quot;ConcreteClass=&quot;+gson.toJson(new ConcreteClass()));\n=&gt;\nConcreteClass={&quot;abstractVariable&quot;:&quot;const&quot;}\n</code></pre>\n<p>If anyone sees another solution I'm curious to know it especially if it's simpler</p>\n"}],"owner":{"account_id":26129583,"reputation":3,"user_id":19820503,"display_name":"Larvis"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":242,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687525559,"creation_date":1687509944,"question_id":76538452,"body_markdown":"the goal is to force the override of the getter which returns a constant when I serialize.\r\nI search a solution on classes side, not on the serializer.\r\n\r\n```\r\nimport lombok.Data;\r\nimport lombok.Getter;\r\nimport lombok.Setter;\r\nimport com.google.gson.Gson;\r\n\r\n    abstract class AbstractClass implements Serializable {\r\n        @Setter\r\n        @Getter\r\n        private String abstractVariable;\r\n\r\n        public abstract String getAbstractVariable();\r\n    }\r\n\r\n    @Data\r\n    class ConcreteClass extends AbstractClass implements Serializable {\r\n        private String concreteVariable;\r\n\r\n        @Override\r\n        public String getAbstractVariable() {\r\n            return &quot;Constant Value&quot;;\r\n        }\r\n    }\r\n\r\nGson gson = new Gson();\r\nSystem.out.println(&quot;ConcreteClass=&quot;+gson.toJson(new ConcreteClass()));\r\n=&gt;\r\nConcreteClass={}\r\n```\r\nThis solution doesn&#39;t work, I tried many things without success:\r\n@Getter(AccessLevel.NONE)\r\n@Expose(serialize = false)\r\n...","title":"How to serialize an abstract getter using Lombok and Gson?","body":"<p>the goal is to force the override of the getter which returns a constant when I serialize.\nI search a solution on classes side, not on the serializer.</p>\n<pre><code>import lombok.Data;\nimport lombok.Getter;\nimport lombok.Setter;\nimport com.google.gson.Gson;\n\n    abstract class AbstractClass implements Serializable {\n        @Setter\n        @Getter\n        private String abstractVariable;\n\n        public abstract String getAbstractVariable();\n    }\n\n    @Data\n    class ConcreteClass extends AbstractClass implements Serializable {\n        private String concreteVariable;\n\n        @Override\n        public String getAbstractVariable() {\n            return &quot;Constant Value&quot;;\n        }\n    }\n\nGson gson = new Gson();\nSystem.out.println(&quot;ConcreteClass=&quot;+gson.toJson(new ConcreteClass()));\n=&gt;\nConcreteClass={}\n</code></pre>\n<p>This solution doesn't work, I tried many things without success:\n@Getter(AccessLevel.NONE)\n@Expose(serialize = false)\n...</p>\n"},{"tags":["java","http"],"comments":[{"owner":{"account_id":3366819,"reputation":2646,"user_id":2827181,"display_name":"Marc Le Bihan"},"score":0,"creation_date":1687192114,"post_id":76508397,"comment_id":134899243,"body_markdown":"Can you add the log or output you have? We can then read the error you&#39;re facing","body":"Can you add the log or output you have? We can then read the error you&#39;re facing"},{"owner":{"account_id":24571441,"reputation":27,"user_id":18477797,"display_name":"Nguyễn Kh&#244;i"},"score":0,"creation_date":1687192558,"post_id":76508397,"comment_id":134899323,"body_markdown":"@MarcLeBihan It&#39;s not a bug, everything is fine when I go directly to the ip. But when I still access that ip but with the beginning &#39;https://&#39; then the file is not downloaded","body":"@MarcLeBihan It&#39;s not a bug, everything is fine when I go directly to the ip. But when I still access that ip but with the beginning &#39;https://&#39; then the file is not downloaded"},{"owner":{"account_id":2882201,"reputation":10752,"user_id":2472820,"accept_rate":86,"display_name":"Kon"},"score":0,"creation_date":1687192737,"post_id":76508397,"comment_id":134899371,"body_markdown":"You&#39;re trying to access it over the HTTPS protocol but your code is only hosting an HTTP server. You need something like `server.setHttpsConfigurator(new HttpsConfigurator(createSSLContext()));`","body":"You&#39;re trying to access it over the HTTPS protocol but your code is only hosting an HTTP server. You need something like <code>server.setHttpsConfigurator(new HttpsConfigurator(createSSLContext()));</code>"},{"owner":{"account_id":24571441,"reputation":27,"user_id":18477797,"display_name":"Nguyễn Kh&#244;i"},"score":0,"creation_date":1687193272,"post_id":76508397,"comment_id":134899456,"body_markdown":"@Kon There is no method server.setHttpsConfigurator()","body":"@Kon There is no method server.setHttpsConfigurator()"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1687194198,"post_id":76508397,"comment_id":134899612,"body_markdown":"You need to start with `HttpsServer server = HttpsServer.create(new InetSocketAddress(36), 0);`","body":"You need to start with <code>HttpsServer server = HttpsServer.create(new InetSocketAddress(36), 0);</code>"}],"answers":[{"tags":[],"owner":{"account_id":18030424,"reputation":11,"user_id":13105206,"display_name":"tim-danger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687525543,"creation_date":1687194625,"answer_id":76508758,"question_id":76508397,"body_markdown":"I think, what you are searching for is this answer [here][1]. As described [here][2], your server might work without the use of certificates, however, you should provide them, otherwise https would have no effect, compared to http.\r\n\r\nCheckout the first link, it&#39;s describing very detailed, what you will need, to set up a simple Java https-Server. The [second answer][3] (not the one with the highest ranking) is even closer to your code.\r\n\r\n**EDIT** (due to the comment below):\r\n\r\nSo, based on the above link, you could do the following: First you could create a self-signed ssl-cert using the following command:\r\n\r\n    keytool -genkeypair -keyalg RSA -alias selfsigned -keystore testkey.jks -storepass password -validity 360 -keysize 2048\r\n\r\nIts name is `testkey.jks`, which you could use in your code to load the SSL-Context (I wrote a few TODOs in the code, so you&#39;ll know, which parts you will have to adjust / edit). \r\n\r\n    import java.io.*;\r\n    import java.net.InetSocketAddress;\r\n    import java.lang.*;\r\n    import com.sun.net.httpserver.HttpsServer;\r\n    \r\n    import java.nio.file.Files;\r\n    import java.nio.file.Paths;\r\n    import java.security.KeyStore;\r\n    import javax.net.ssl.KeyManagerFactory;\r\n    import javax.net.ssl.TrustManagerFactory;\r\n    import com.sun.net.httpserver.*;\r\n    import javax.net.ssl.SSLEngine;\r\n    import javax.net.ssl.SSLParameters;\r\n    import javax.net.ssl.SSLContext;\r\n    import com.sun.net.httpserver.HttpExchange;\r\n    import com.sun.net.httpserver.HttpHandler;\r\n    \r\n    public class Main implements HttpHandler {\r\n    \r\n        @Override\r\n        public void handle(HttpExchange exchange) throws IOException {\r\n            HttpsExchange httpsExchange = (HttpsExchange) exchange;\r\n            Headers h = httpsExchange.getResponseHeaders();\r\n            h.add(&quot;Content-Type&quot;, &quot;application/octet-stream&quot;);\r\n            h.add(&quot;Content-Disposition&quot;, &quot;attachment; filename=Pack.zip&quot;);\r\n            httpsExchange.sendResponseHeaders(200, 0);\r\n            OutputStream os = httpsExchange.getResponseBody();\r\n            Files.newInputStream(Paths.get(&quot;C://Pack.zip&quot;)).transferTo(os);\r\n            os.close();\r\n        }\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            HttpsServer server = HttpsServer.create(new InetSocketAddress(36), 0);\r\n            server.createContext(&quot;/&quot;, new Main());\r\n            setHttpsConfigurator(server);\r\n            server.setExecutor(null); // creates a default executor\r\n            server.start();\r\n        }\r\n        \r\n        private static void setHttpsConfigurator(HttpsServer server) {\r\n            SSLContext sslContext = loadSSLContext();\r\n            server.setHttpsConfigurator(new HttpsConfigurator(sslContext) {\r\n                public void configure(HttpsParameters params) {\r\n                    try {\r\n                        // initialise the SSL context\r\n                        SSLContext context = getSSLContext();\r\n                        SSLEngine engine = context.createSSLEngine();\r\n                        params.setNeedClientAuth(false);\r\n                        params.setCipherSuites(engine.getEnabledCipherSuites());\r\n                        params.setProtocols(engine.getEnabledProtocols());\r\n    \r\n                        // Set the SSL parameters\r\n                        SSLParameters sslParameters = context.getSupportedSSLParameters();\r\n                        params.setSSLParameters(sslParameters);\r\n    \r\n                    } catch (Exception ex) {\r\n                        // TODO : handle or rethrow\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    \r\n        private static SSLContext loadSSLContext() {\r\n            try {\r\n    \r\n                // initialise the SSL-Context\r\n                SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n    \r\n                // initialise the keystore\r\n                // TODO : replace &quot;password&quot; with the password you used when generating your keystore\r\n                char[] password = &quot;password&quot;.toCharArray();\r\n                KeyStore ks = KeyStore.getInstance(&quot;JKS&quot;);\r\n                // TODO : the path to YOUR Keystore\r\n                FileInputStream fis = new FileInputStream(&quot;testkey.jks&quot;);\r\n                ks.load(fis, password);\r\n    \r\n                // setup the key manager factory\r\n                KeyManagerFactory kmf = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\r\n                kmf.init(ks, password);\r\n    \r\n                // setup the trust manager factory\r\n                TrustManagerFactory tmf = TrustManagerFactory.getInstance(&quot;SunX509&quot;);\r\n                tmf.init(ks);\r\n    \r\n                // setup the HTTPS context and parameters\r\n                sslContext.init(kmf.getKeyManagers(), tmf.getTrustManagers(), null);\r\n                return sslContext;\r\n    \r\n            } catch (Exception exception) {\r\n                // TODO : handle or rethrow\r\n                exception.printStackTrace();\r\n            }\r\n            throw new RuntimeException(&quot;Failed to load SSL-Context&quot;);\r\n        }\r\n    }\r\n\r\nLet us know, if there are problems. I changed the code, so it looks like the code you initially provided. Feel free to refactor.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/2323188/13105206\r\n  [2]: https://stackoverflow.com/questions/10930544/in-java-ssl-over-https-without-certificate\r\n  [3]: https://stackoverflow.com/a/34483734/13105206","title":"Some problems occur when I open an http to file storage","body":"<p>I think, what you are searching for is this answer <a href=\"https://stackoverflow.com/a/2323188/13105206\">here</a>. As described <a href=\"https://stackoverflow.com/questions/10930544/in-java-ssl-over-https-without-certificate\">here</a>, your server might work without the use of certificates, however, you should provide them, otherwise https would have no effect, compared to http.</p>\n<p>Checkout the first link, it's describing very detailed, what you will need, to set up a simple Java https-Server. The <a href=\"https://stackoverflow.com/a/34483734/13105206\">second answer</a> (not the one with the highest ranking) is even closer to your code.</p>\n<p><strong>EDIT</strong> (due to the comment below):</p>\n<p>So, based on the above link, you could do the following: First you could create a self-signed ssl-cert using the following command:</p>\n<pre><code>keytool -genkeypair -keyalg RSA -alias selfsigned -keystore testkey.jks -storepass password -validity 360 -keysize 2048\n</code></pre>\n<p>Its name is <code>testkey.jks</code>, which you could use in your code to load the SSL-Context (I wrote a few TODOs in the code, so you'll know, which parts you will have to adjust / edit).</p>\n<pre><code>import java.io.*;\nimport java.net.InetSocketAddress;\nimport java.lang.*;\nimport com.sun.net.httpserver.HttpsServer;\n\nimport java.nio.file.Files;\nimport java.nio.file.Paths;\nimport java.security.KeyStore;\nimport javax.net.ssl.KeyManagerFactory;\nimport javax.net.ssl.TrustManagerFactory;\nimport com.sun.net.httpserver.*;\nimport javax.net.ssl.SSLEngine;\nimport javax.net.ssl.SSLParameters;\nimport javax.net.ssl.SSLContext;\nimport com.sun.net.httpserver.HttpExchange;\nimport com.sun.net.httpserver.HttpHandler;\n\npublic class Main implements HttpHandler {\n\n    @Override\n    public void handle(HttpExchange exchange) throws IOException {\n        HttpsExchange httpsExchange = (HttpsExchange) exchange;\n        Headers h = httpsExchange.getResponseHeaders();\n        h.add(&quot;Content-Type&quot;, &quot;application/octet-stream&quot;);\n        h.add(&quot;Content-Disposition&quot;, &quot;attachment; filename=Pack.zip&quot;);\n        httpsExchange.sendResponseHeaders(200, 0);\n        OutputStream os = httpsExchange.getResponseBody();\n        Files.newInputStream(Paths.get(&quot;C://Pack.zip&quot;)).transferTo(os);\n        os.close();\n    }\n\n    public static void main(String[] args) throws Exception {\n        HttpsServer server = HttpsServer.create(new InetSocketAddress(36), 0);\n        server.createContext(&quot;/&quot;, new Main());\n        setHttpsConfigurator(server);\n        server.setExecutor(null); // creates a default executor\n        server.start();\n    }\n    \n    private static void setHttpsConfigurator(HttpsServer server) {\n        SSLContext sslContext = loadSSLContext();\n        server.setHttpsConfigurator(new HttpsConfigurator(sslContext) {\n            public void configure(HttpsParameters params) {\n                try {\n                    // initialise the SSL context\n                    SSLContext context = getSSLContext();\n                    SSLEngine engine = context.createSSLEngine();\n                    params.setNeedClientAuth(false);\n                    params.setCipherSuites(engine.getEnabledCipherSuites());\n                    params.setProtocols(engine.getEnabledProtocols());\n\n                    // Set the SSL parameters\n                    SSLParameters sslParameters = context.getSupportedSSLParameters();\n                    params.setSSLParameters(sslParameters);\n\n                } catch (Exception ex) {\n                    // TODO : handle or rethrow\n                }\n            }\n        });\n    }\n\n    private static SSLContext loadSSLContext() {\n        try {\n\n            // initialise the SSL-Context\n            SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\n\n            // initialise the keystore\n            // TODO : replace &quot;password&quot; with the password you used when generating your keystore\n            char[] password = &quot;password&quot;.toCharArray();\n            KeyStore ks = KeyStore.getInstance(&quot;JKS&quot;);\n            // TODO : the path to YOUR Keystore\n            FileInputStream fis = new FileInputStream(&quot;testkey.jks&quot;);\n            ks.load(fis, password);\n\n            // setup the key manager factory\n            KeyManagerFactory kmf = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\n            kmf.init(ks, password);\n\n            // setup the trust manager factory\n            TrustManagerFactory tmf = TrustManagerFactory.getInstance(&quot;SunX509&quot;);\n            tmf.init(ks);\n\n            // setup the HTTPS context and parameters\n            sslContext.init(kmf.getKeyManagers(), tmf.getTrustManagers(), null);\n            return sslContext;\n\n        } catch (Exception exception) {\n            // TODO : handle or rethrow\n            exception.printStackTrace();\n        }\n        throw new RuntimeException(&quot;Failed to load SSL-Context&quot;);\n    }\n}\n</code></pre>\n<p>Let us know, if there are problems. I changed the code, so it looks like the code you initially provided. Feel free to refactor.</p>\n"}],"owner":{"account_id":24571441,"reputation":27,"user_id":18477797,"display_name":"Nguyễn Kh&#244;i"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1687525543,"creation_date":1687191225,"question_id":76508397,"body_markdown":"  I use below code to open https server. When I go to my ip address: xx.xxx.xxx.xxx the zip file downloads normally. But when I access the ip: https://xx.xxx.xxx.xxx/, the zip file is not automatically downloaded\r\n  I am a newbie to http so if possible please give me an example code. Thank you\r\n```\r\npublic class Main implements HttpHandler {\r\n    @Override\r\n    public void handle(HttpExchange exchange) throws IOException {\r\n        Headers h = exchange.getResponseHeaders();\r\n        h.add(&quot;Content-Type&quot;, &quot;application/octet-stream&quot;);\r\n        h.add(&quot;Content-Disposition&quot;, &quot;attachment; filename=Pack.zip&quot;);\r\n        exchange.sendResponseHeaders(200, 0);\r\n        OutputStream os = exchange.getResponseBody();\r\n        Files.newInputStream(Paths.get(&quot;C://Pack.zip&quot;)).transferTo(os);\r\n        os.close();\r\n    }\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        HttpServer server = HttpServer.create(new InetSocketAddress(36), 0);\r\n        server.createContext(&quot;/&quot;, new Main());\r\n        server.start();\r\n    }\r\n}\r\n```","title":"Some problems occur when I open an http to file storage","body":"<p>I use below code to open https server. When I go to my ip address: xx.xxx.xxx.xxx the zip file downloads normally. But when I access the ip: <a href=\"https://xx.xxx.xxx.xxx/\" rel=\"nofollow noreferrer\">https://xx.xxx.xxx.xxx/</a>, the zip file is not automatically downloaded\nI am a newbie to http so if possible please give me an example code. Thank you</p>\n<pre><code>public class Main implements HttpHandler {\n    @Override\n    public void handle(HttpExchange exchange) throws IOException {\n        Headers h = exchange.getResponseHeaders();\n        h.add(&quot;Content-Type&quot;, &quot;application/octet-stream&quot;);\n        h.add(&quot;Content-Disposition&quot;, &quot;attachment; filename=Pack.zip&quot;);\n        exchange.sendResponseHeaders(200, 0);\n        OutputStream os = exchange.getResponseBody();\n        Files.newInputStream(Paths.get(&quot;C://Pack.zip&quot;)).transferTo(os);\n        os.close();\n    }\n\n    public static void main(String[] args) throws Exception {\n        HttpServer server = HttpServer.create(new InetSocketAddress(36), 0);\n        server.createContext(&quot;/&quot;, new Main());\n        server.start();\n    }\n}\n</code></pre>\n"},{"tags":["java","google-app-engine","google-cloud-datastore","gcloud","objectify"],"comments":[{"owner":{"account_id":318652,"reputation":13493,"user_id":635982,"accept_rate":58,"display_name":"stickfigure"},"score":0,"creation_date":1686760772,"post_id":76471186,"comment_id":134844636,"body_markdown":"Objectify doesn&#39;t do anything special. If the GQL query works, the equivalent Objectify kind query will too. Post the *exact* GQL query you&#39;re using, the *exact* Objectify query you&#39;re using, and make 100% certain both are connected to the same datastore.","body":"Objectify doesn&#39;t do anything special. If the GQL query works, the equivalent Objectify kind query will too. Post the <i>exact</i> GQL query you&#39;re using, the <i>exact</i> Objectify query you&#39;re using, and make 100% certain both are connected to the same datastore."},{"owner":{"account_id":28327957,"reputation":71,"user_id":21662685,"display_name":"Dimitar Genov"},"score":0,"creation_date":1686808346,"post_id":76471186,"comment_id":134850644,"body_markdown":"My GQL looks like this `select count from __Stat_Ns_Kind__ where kind_name = &#39;{entityName}&#39;`.\nThe objectify query looks as follows:\n```Object result = ofy()\n.load()\n.kind(&quot;__Stat_Ns_Kind__&quot;)\n.filter(&quot;kind_name&quot;, entityName)\n.single()\n.now()\n```\nThe ofy result is null however and yes, both are connected to the same database. The only difference is that the GQL is executed directly in the datastore dashboard editor.","body":"My GQL looks like this <code>select count from __Stat_Ns_Kind__ where kind_name = &#39;{entityName}&#39;</code>. The objectify query looks as follows: <code>Object result = ofy() .load() .kind(&quot;__Stat_Ns_Kind__&quot;) .filter(&quot;kind_name&quot;, entityName) .single() .now() </code> The ofy result is null however and yes, both are connected to the same database. The only difference is that the GQL is executed directly in the datastore dashboard editor."},{"owner":{"account_id":318652,"reputation":13493,"user_id":635982,"accept_rate":58,"display_name":"stickfigure"},"score":0,"creation_date":1686848902,"post_id":76471186,"comment_id":134858037,"body_markdown":"Hmmmm. Objectify just passes this request on to Google&#39;s low level Java client; there&#39;s no real magic in a request like this so there isn&#39;t any special syntax. If you&#39;re not getting data, this is almost certainly an issue between Google&#39;s library and the datastore. Some things I would try: 1) query that kind without a filter, see if you get any results, and 2) try fetching this data directly with the low level api. I&#39;ll try to dig up some sample code for you.","body":"Hmmmm. Objectify just passes this request on to Google&#39;s low level Java client; there&#39;s no real magic in a request like this so there isn&#39;t any special syntax. If you&#39;re not getting data, this is almost certainly an issue between Google&#39;s library and the datastore. Some things I would try: 1) query that kind without a filter, see if you get any results, and 2) try fetching this data directly with the low level api. I&#39;ll try to dig up some sample code for you."},{"owner":{"account_id":318652,"reputation":13493,"user_id":635982,"accept_rate":58,"display_name":"stickfigure"},"score":0,"creation_date":1686849425,"post_id":76471186,"comment_id":134858141,"body_markdown":"Run this and see if it works: https://gist.github.com/stickfigure/5bdc270980df7a5404b775cd07077a26\n\nIf it doesn&#39;t, remove the filter. If that still doesn&#39;t give you results, I&#39;m afraid this is a question for Google. I don&#39;t know what goes on underneath that library.","body":"Run this and see if it works: <a href=\"https://gist.github.com/stickfigure/5bdc270980df7a5404b775cd07077a26\" rel=\"nofollow noreferrer\">gist.github.com/stickfigure/5bdc270980df7a5404b775cd07077a26</a>  If it doesn&#39;t, remove the filter. If that still doesn&#39;t give you results, I&#39;m afraid this is a question for Google. I don&#39;t know what goes on underneath that library."}],"answers":[{"tags":[],"owner":{"account_id":2377694,"reputation":846,"user_id":2080575,"accept_rate":38,"display_name":"Alex R"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687525220,"creation_date":1687525220,"answer_id":76540370,"question_id":76471186,"body_markdown":"I tried your code and it does work; you&#39;ll get an `com.google.cloud.datastore.Entity` as response where you can get the count with `getLong(&quot;count&quot;)`\r\n\r\nJust make sure you are in the right namespace, as you are looking for the namespace specific stats. You can try to query `__Stat_Kind__` to see if it&#39;s a namespace issue","title":"Querying Stat tables using Objectify","body":"<p>I tried your code and it does work; you'll get an <code>com.google.cloud.datastore.Entity</code> as response where you can get the count with <code>getLong(&quot;count&quot;)</code></p>\n<p>Just make sure you are in the right namespace, as you are looking for the namespace specific stats. You can try to query <code>__Stat_Kind__</code> to see if it's a namespace issue</p>\n"}],"owner":{"account_id":28327957,"reputation":71,"user_id":21662685,"display_name":"Dimitar Genov"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76540370,"answer_count":1,"score":1,"last_activity_date":1687525220,"creation_date":1686728517,"question_id":76471186,"body_markdown":"I am trying to perform a low-level Datastore query on one of the Stat tables (__Stat_Ns_Kind__) using Objectify.\r\n\r\nThe operation I&#39;m trying to run looks like this:\r\n\r\n```\r\nofy()\r\n.load()\r\n.kind(&quot;__Stat_Ns_Kind__&quot;)\r\n.filter(&quot;kind_name&quot;, entityName)\r\n```\r\n\r\n\r\nI&#39;ve tried it using a `.projection(&quot;count&quot;)` to only get the specific column, but Datastore complained about a missing index...\r\nI&#39;ve also tried omitting the projection and working with the full object from the result (`.single().now()`), but I always got a `null` result.\r\n\r\nCan anyone suggest a proper way of doing this?\r\n\r\nP.S. the operation executes within an Ofy context and all entities are registered properly. I&#39;ve tried to execute the plain GQL on gcloud and I got the desired result, just need to translate that to OFY.  ","title":"Querying Stat tables using Objectify","body":"<p>I am trying to perform a low-level Datastore query on one of the Stat tables (<strong>Stat_Ns_Kind</strong>) using Objectify.</p>\n<p>The operation I'm trying to run looks like this:</p>\n<pre><code>ofy()\n.load()\n.kind(&quot;__Stat_Ns_Kind__&quot;)\n.filter(&quot;kind_name&quot;, entityName)\n</code></pre>\n<p>I've tried it using a <code>.projection(&quot;count&quot;)</code> to only get the specific column, but Datastore complained about a missing index...\nI've also tried omitting the projection and working with the full object from the result (<code>.single().now()</code>), but I always got a <code>null</code> result.</p>\n<p>Can anyone suggest a proper way of doing this?</p>\n<p>P.S. the operation executes within an Ofy context and all entities are registered properly. I've tried to execute the plain GQL on gcloud and I got the desired result, just need to translate that to OFY.</p>\n"},{"tags":["java","gradle","discord4j"],"comments":[{"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"score":2,"creation_date":1686477194,"post_id":76449918,"comment_id":134801206,"body_markdown":"Hi Double, to provide some answers, more information about the problem would be necessary - error message, environment, code / configuration? We&#39;re not extras, sorry","body":"Hi Double, to provide some answers, more information about the problem would be necessary - error message, environment, code / configuration? We&#39;re not extras, sorry"},{"owner":{"account_id":28797647,"reputation":1,"user_id":22055423,"display_name":"Double"},"score":0,"creation_date":1686477829,"post_id":76449918,"comment_id":134801248,"body_markdown":"@yahorbarkouski I hope the information I have added is enough to get a clearer Image of my problem. If not please let me know so I can improve my post.","body":"@yahorbarkouski I hope the information I have added is enough to get a clearer Image of my problem. If not please let me know so I can improve my post."},{"owner":{"account_id":10408148,"reputation":1398,"user_id":7674438,"accept_rate":100,"display_name":"Lore"},"score":0,"creation_date":1686582531,"post_id":76449918,"comment_id":134814901,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":28797647,"reputation":1,"user_id":22055423,"display_name":"Double"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1687525204,"creation_date":1686737053,"answer_id":76472349,"question_id":76449918,"body_markdown":"Found the solution myself. Apparently, it was an issue with my implementation that didn&#39;t want to work on my pc. What I did was in my `build.gradle` added another id called application and a section called application in that section you need to define the main class and from there you can run the application in the gradle menu under tasks and application &#39;run&#39;\r\n\r\n```java\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;application&#39;\r\n    id &#39;com.github.johnrengelman.shadow&#39; version &#39;8.1.1&#39;\r\n}\r\n\r\ngroup &#39;org.example&#39;\r\nversion &#39;1.0-SNAPSHOT&#39;\r\n\r\napplication {\r\n    mainClass = &#39;Main&#39;\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    testImplementation &#39;org.junit.jupiter:junit-jupiter-api:5.8.1&#39;\r\n    testRuntimeOnly &#39;org.junit.jupiter:junit-jupiter-engine:5.8.1&#39;\r\n    implementation &#39;com.discord4j:discord4j-core:3.2.3&#39;\r\n    implementation &#39;ch.qos.logback:logback-classic:1.2.12&#39;\r\n}\r\n\r\ntest {\r\n    useJUnitPlatform()\r\n}\r\n```\r\n\r\n![gradle menu &#39;run&#39;][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Xs9Y4.png","title":"Could not compile initialization script","body":"<p>Found the solution myself. Apparently, it was an issue with my implementation that didn't want to work on my pc. What I did was in my <code>build.gradle</code> added another id called application and a section called application in that section you need to define the main class and from there you can run the application in the gradle menu under tasks and application 'run'</p>\n<pre class=\"lang-java prettyprint-override\"><code>plugins {\n    id 'java'\n    id 'application'\n    id 'com.github.johnrengelman.shadow' version '8.1.1'\n}\n\ngroup 'org.example'\nversion '1.0-SNAPSHOT'\n\napplication {\n    mainClass = 'Main'\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.8.1'\n    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.8.1'\n    implementation 'com.discord4j:discord4j-core:3.2.3'\n    implementation 'ch.qos.logback:logback-classic:1.2.12'\n}\n\ntest {\n    useJUnitPlatform()\n}\n</code></pre>\n<p><img src=\"https://i.stack.imgur.com/Xs9Y4.png\" alt=\"gradle menu 'run'\" /></p>\n"}],"owner":{"account_id":28797647,"reputation":1,"user_id":22055423,"display_name":"Double"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1110,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76472349,"answer_count":1,"score":-1,"last_activity_date":1687525204,"creation_date":1686477090,"question_id":76449918,"body_markdown":"So I made a program on my pc that is connected with a discord API using discord4j. On my pc it works just fint, but if I download the project and use it on my laptop I get a weird error in my MacroTester_main__2.gradle. Now the weird thing is, that the path it has a problem with is correct.\r\n\r\ndoes anybody have any idea how to go about this problem and what the solution would be?  \r\nDeleting the cache does not solve this issue.\r\n\r\nRun the program, it should just run without issue.\r\n\r\n[Error code][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DljRK.png\r\n\r\nRun environment is Intellij. \r\n\r\nGradle version: gradle-7.5.1\r\n\r\ndiscord4j version: 3.2.3\r\n\r\nlogBack version: 1.2.12","title":"Could not compile initialization script","body":"<p>So I made a program on my pc that is connected with a discord API using discord4j. On my pc it works just fint, but if I download the project and use it on my laptop I get a weird error in my MacroTester_main__2.gradle. Now the weird thing is, that the path it has a problem with is correct.</p>\n<p>does anybody have any idea how to go about this problem and what the solution would be?<br />\nDeleting the cache does not solve this issue.</p>\n<p>Run the program, it should just run without issue.</p>\n<p><a href=\"https://i.stack.imgur.com/DljRK.png\" rel=\"nofollow noreferrer\">Error code</a></p>\n<p>Run environment is Intellij.</p>\n<p>Gradle version: gradle-7.5.1</p>\n<p>discord4j version: 3.2.3</p>\n<p>logBack version: 1.2.12</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":58650,"reputation":3399,"user_id":175554,"accept_rate":40,"display_name":"ozkanpakdil"},"score":0,"creation_date":1610058217,"post_id":65535472,"comment_id":116020447,"body_markdown":"you can check https://github.com/AdoptOpenJDK/openjdk-support/issues/211 and opening a issue in github may help more.","body":"you can check <a href=\"https://github.com/AdoptOpenJDK/openjdk-support/issues/211\" rel=\"nofollow noreferrer\">github.com/AdoptOpenJDK/openjdk-support/issues/211</a> and opening a issue in github may help more."},{"owner":{"account_id":7413926,"reputation":5474,"user_id":11374957,"display_name":"Kaan"},"score":0,"creation_date":1655050128,"post_id":65535472,"comment_id":128233258,"body_markdown":"That error - _&quot;Could not load hsdis-amd64.dylib&quot;_ - is referencing a library file under the `lib` directory in the JDK install. Can&#39;t tell why from your post, but it could be the file is actually missing, or maybe it&#39;s present but with insufficient permissions (is it world-readable?).","body":"That error - <i>&quot;Could not load hsdis-amd64.dylib&quot;</i> - is referencing a library file under the <code>lib</code> directory in the JDK install. Can&#39;t tell why from your post, but it could be the file is actually missing, or maybe it&#39;s present but with insufficient permissions (is it world-readable?)."}],"answers":[{"tags":[],"owner":{"account_id":12671791,"reputation":624,"user_id":9209083,"display_name":"Anton"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687525157,"creation_date":1687524833,"answer_id":76540321,"question_id":65535472,"body_markdown":"I had the same problem with JDK1.8.0_202\r\n&lt;br&gt;\r\nI didn&#39;t find an appropriate closed task at [JDK Bug system][1], but for me helped a switch to JDK 17.0.2\r\n\r\n\r\n&gt; The PrintAssembly HotSpot option is a diagnostic flag for the JVM that allows us to capture the generated assembly instructions of the JIT compiler. This requires the latest OpenJDK release or a new version of HotSpot, update 14 or above.\r\n\r\n[Source][2]\r\n\r\n\r\n  [1]: https://bugs.openjdk.org/projects/JDK/issues/JDK-8305968?filter=allopenissues\r\n  [2]: https://www.infoq.com/articles/memory_barriers_jvm_concurrency/","title":"Could not load hsdis-amd64.dylib; library not loadable; PrintAssembly is disabled","body":"<p>I had the same problem with JDK1.8.0_202\n<br>\nI didn't find an appropriate closed task at <a href=\"https://bugs.openjdk.org/projects/JDK/issues/JDK-8305968?filter=allopenissues\" rel=\"nofollow noreferrer\">JDK Bug system</a>, but for me helped a switch to JDK 17.0.2</p>\n<blockquote>\n<p>The PrintAssembly HotSpot option is a diagnostic flag for the JVM that allows us to capture the generated assembly instructions of the JIT compiler. This requires the latest OpenJDK release or a new version of HotSpot, update 14 or above.</p>\n</blockquote>\n<p><a href=\"https://www.infoq.com/articles/memory_barriers_jvm_concurrency/\" rel=\"nofollow noreferrer\">Source</a></p>\n"}],"owner":{"account_id":20346130,"reputation":141,"user_id":14923977,"display_name":"Vivek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":6413,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"answer_count":1,"score":14,"last_activity_date":1687525157,"creation_date":1609553544,"question_id":65535472,"body_markdown":"\r\nI wrote simple java program and I am getting A fatal error with Could not load hsdis-amd64.dylib; library not loadable; PrintAssembly is disabled. I tried to read several block but did not find solution. Can anyone please help me?\r\nHere is complete error message\r\n\r\n    A fatal error has been detected by the Java Runtime Environment:\r\n    \r\n    SIGFPE (0x8) at pc=0x0000000118e9ea48, pid=4481, tid=7683\r\n    \r\n    JRE version: Java(TM) SE Runtime Environment 18.9 (11.0.9+7) (build 11.0.9+7-LTS)\r\n    Java VM: Java HotSpot(TM) 64-Bit Server VM 18.9 (11.0.9+7-LTS, mixed mode, tiered, compressed oops, g1 gc, bsd-amd64)\r\n    Problematic frame:\r\n    j  com.sun.tools.javac.comp.ConstFold.fold2(ILcom/sun/tools/javac/code/Type;Lcom/sun/tools/javac/code/Type;)Lcom/sun/tools/javac/code/Type;+877 jdk.compiler@11.0.9\r\n     No core dump will be written. Core dumps have been disabled. To enable core dumping, try &quot;ulimit -c unlimited&quot; before starting Java again\r\n    \r\n    Compiled method (c1)     884  193       3       java.lang.System::getSecurityManager (4 bytes)\r\n     total in heap  [0x0000000119455010,0x0000000119455338] = 808\r\n     relocation     [0x0000000119455178,0x00000001194551a0] = 40\r\n     main code      [0x00000001194551a0,0x0000000119455260] = 192\r\n     stub code      [0x0000000119455260,0x00000001194552f0] = 144\r\n     metadata       [0x00000001194552f0,0x00000001194552f8] = 8\r\n     scopes data    [0x00000001194552f8,0x0000000119455300] = 8\r\n     scopes pcs     [0x0000000119455300,0x0000000119455330] = 48\r\n     dependencies   [0x0000000119455330,0x0000000119455338] = 8\r\n    \r\n    Could not load hsdis-amd64.dylib; library not loadable; PrintAssembly is disabled","title":"Could not load hsdis-amd64.dylib; library not loadable; PrintAssembly is disabled","body":"<p>I wrote simple java program and I am getting A fatal error with Could not load hsdis-amd64.dylib; library not loadable; PrintAssembly is disabled. I tried to read several block but did not find solution. Can anyone please help me?\nHere is complete error message</p>\n<pre><code>A fatal error has been detected by the Java Runtime Environment:\n\nSIGFPE (0x8) at pc=0x0000000118e9ea48, pid=4481, tid=7683\n\nJRE version: Java(TM) SE Runtime Environment 18.9 (11.0.9+7) (build 11.0.9+7-LTS)\nJava VM: Java HotSpot(TM) 64-Bit Server VM 18.9 (11.0.9+7-LTS, mixed mode, tiered, compressed oops, g1 gc, bsd-amd64)\nProblematic frame:\nj  com.sun.tools.javac.comp.ConstFold.fold2(ILcom/sun/tools/javac/code/Type;Lcom/sun/tools/javac/code/Type;)Lcom/sun/tools/javac/code/Type;+877 jdk.compiler@11.0.9\n No core dump will be written. Core dumps have been disabled. To enable core dumping, try &quot;ulimit -c unlimited&quot; before starting Java again\n\nCompiled method (c1)     884  193       3       java.lang.System::getSecurityManager (4 bytes)\n total in heap  [0x0000000119455010,0x0000000119455338] = 808\n relocation     [0x0000000119455178,0x00000001194551a0] = 40\n main code      [0x00000001194551a0,0x0000000119455260] = 192\n stub code      [0x0000000119455260,0x00000001194552f0] = 144\n metadata       [0x00000001194552f0,0x00000001194552f8] = 8\n scopes data    [0x00000001194552f8,0x0000000119455300] = 8\n scopes pcs     [0x0000000119455300,0x0000000119455330] = 48\n dependencies   [0x0000000119455330,0x0000000119455338] = 8\n\nCould not load hsdis-amd64.dylib; library not loadable; PrintAssembly is disabled\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","spring-test"],"answers":[{"tags":[],"owner":{"account_id":13519274,"reputation":883,"user_id":9753003,"display_name":"Coffemanz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1687525050,"creation_date":1687525050,"answer_id":76540355,"question_id":76540206,"body_markdown":"[This answer][1] helped me to resolve my problem.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/56893656/9753003\r\n\r\nI created an abstract class:\r\n\r\n    @DataJpaTest\r\n    @AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\r\n    @DirtiesContext(classMode = DirtiesContext.ClassMode.BEFORE_CLASS)\r\n    public abstract class BaseDataJpaTest {}\r\n\r\nAnd inherit all my `@DataJpaTest` from this class.\r\nThis way I get a fresh context before each test.","title":"@DataJpaTest throws &quot;Error creating bean with name &#39;jpaAuditingHandler&#39;&quot; occasionally","body":"<p><a href=\"https://stackoverflow.com/a/56893656/9753003\">This answer</a> helped me to resolve my problem.</p>\n<p>I created an abstract class:</p>\n<pre><code>@DataJpaTest\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\n@DirtiesContext(classMode = DirtiesContext.ClassMode.BEFORE_CLASS)\npublic abstract class BaseDataJpaTest {}\n</code></pre>\n<p>And inherit all my <code>@DataJpaTest</code> from this class.\nThis way I get a fresh context before each test.</p>\n"}],"owner":{"account_id":13519274,"reputation":883,"user_id":9753003,"display_name":"Coffemanz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":225,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76540355,"answer_count":1,"score":0,"last_activity_date":1687525050,"creation_date":1687523897,"question_id":76540206,"body_markdown":"I have a bunch of `@DataJpaTests` as well a lot of `@SpringBootTests` and `@WebMvcTests`.\r\n\r\nI also have `@EnableJpaAuditing` enabled.\r\n\r\nWhen I run `@DataJpaTests` independently it&#39;s all fine, these tests run and pass successfully. But if I run **all** the tests at once, some `@DataJpaTest` throw occasionally the following:\r\n\r\n```\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;jpaAuditingHandler&#39;: Cannot resolve reference to bean &#39;jpaMappingContext&#39; while setting constructor argument; nested exception is \r\norg.springframework.beans.factory.BeanCreationException:Error creating bean with name &#39;jpaMappingContext&#39;: Invocation of init method failed; nested exception is java.lang.IllegalStateException: \r\norg.springframework.web.context.support.GenericWebApplicationContext@15405bd6 has been closed already\r\n```\r\n\r\nThe problem is that I don&#39;t see a pattern here. Sometimes I get this exception, sometimes not. Some `@DataJpaTest` throw this exception, some not... So I&#39;m not sure how to prevent it.\r\n","title":"@DataJpaTest throws &quot;Error creating bean with name &#39;jpaAuditingHandler&#39;&quot; occasionally","body":"<p>I have a bunch of <code>@DataJpaTests</code> as well a lot of <code>@SpringBootTests</code> and <code>@WebMvcTests</code>.</p>\n<p>I also have <code>@EnableJpaAuditing</code> enabled.</p>\n<p>When I run <code>@DataJpaTests</code> independently it's all fine, these tests run and pass successfully. But if I run <strong>all</strong> the tests at once, some <code>@DataJpaTest</code> throw occasionally the following:</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jpaAuditingHandler': Cannot resolve reference to bean 'jpaMappingContext' while setting constructor argument; nested exception is \norg.springframework.beans.factory.BeanCreationException:Error creating bean with name 'jpaMappingContext': Invocation of init method failed; nested exception is java.lang.IllegalStateException: \norg.springframework.web.context.support.GenericWebApplicationContext@15405bd6 has been closed already\n</code></pre>\n<p>The problem is that I don't see a pattern here. Sometimes I get this exception, sometimes not. Some <code>@DataJpaTest</code> throw this exception, some not... So I'm not sure how to prevent it.</p>\n"},{"tags":["java","android","webrtc","janus","rtcpeerconnection"],"owner":{"account_id":6893618,"reputation":1888,"user_id":5296262,"display_name":"Sajid Zeb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":126,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1687524974,"creation_date":1687524974,"question_id":76540343,"body_markdown":"I am using Janus-Android-Gateway of [Crossle][1] for WebRTC Videoroom calling.\r\n\r\nCall is working fine. \r\n\r\nOnly problem is ICE Connection failure when any opponent peer or subscriber leaves the call. \r\n\r\nICE Connection gets disconnected for that peer. Which is fine. But then in 10 seconds of that. ICE Connection state failed received in PeerConnection onIceConnectionChange() callback.\r\n\r\nNo Clue why it triggered this failure.\r\n\r\nSame code of Crossle is working fine in iOS Swift code. \r\nICE disconnected when other peer leaves VideoRoom but ICE Connection doesnot fails as in case of android.\r\n\r\nFollowing logs flow can help in understanding. \r\n\r\nThese are from the state when opponnent peer drops call\r\n\r\n    janus: event - plugin -&gt; unpublished\r\n    IceConnectionState newState is: DISCONNECTED\r\n    onIceDisconnected()\r\n    janus: hangup\r\n    janus: event - plugin -&gt; leaving\r\n    subscriberOnLeaving()\r\n    janus: success\r\n    janus: detached\r\n    IceConnectionState newState is: FAILED\r\n\r\n  [1]: https://github.com/crossle/janus-gateway-android","title":"ICE Connection Failed on Android when subscriber drops the call","body":"<p>I am using Janus-Android-Gateway of <a href=\"https://github.com/crossle/janus-gateway-android\" rel=\"nofollow noreferrer\">Crossle</a> for WebRTC Videoroom calling.</p>\n<p>Call is working fine.</p>\n<p>Only problem is ICE Connection failure when any opponent peer or subscriber leaves the call.</p>\n<p>ICE Connection gets disconnected for that peer. Which is fine. But then in 10 seconds of that. ICE Connection state failed received in PeerConnection onIceConnectionChange() callback.</p>\n<p>No Clue why it triggered this failure.</p>\n<p>Same code of Crossle is working fine in iOS Swift code.\nICE disconnected when other peer leaves VideoRoom but ICE Connection doesnot fails as in case of android.</p>\n<p>Following logs flow can help in understanding.</p>\n<p>These are from the state when opponnent peer drops call</p>\n<pre><code>janus: event - plugin -&gt; unpublished\nIceConnectionState newState is: DISCONNECTED\nonIceDisconnected()\njanus: hangup\njanus: event - plugin -&gt; leaving\nsubscriberOnLeaving()\njanus: success\njanus: detached\nIceConnectionState newState is: FAILED\n</code></pre>\n"},{"tags":["java","spring-boot","logging","configuration","hibernate-6.x"],"owner":{"account_id":1475105,"reputation":1355,"user_id":1385707,"accept_rate":90,"display_name":"Holly"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1687524960,"creation_date":1687351371,"question_id":76523418,"body_markdown":"**Problem**\r\n\r\nI recently switched to Hibernate 6. Now I encounter this exception, if a query is logged which contains a `%` symbol for a `LIKE` clause.\r\n\r\n&gt; Caused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.lang.Integer eu.rentall.application.repository.AgpInternalOrderRepository.resetInternalOrderFromProcessing(java.lang.Long)\r\n&gt;\r\n&gt; at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:100)  \r\n&gt;    \r\n&gt; Caused by: java.util.UnknownFormatConversionException: Conversion = &#39;&#39;&#39;\r\n&gt; \r\n&gt; at java.base/java.util.Formatter.parse(Formatter.java:2750)  \r\n&gt; at java.base/java.util.Formatter.format(Formatter.java:2671)  \r\n&gt; at java.base/java.util.Formatter.format(Formatter.java:2625)  \r\n&gt; at java.base/java.lang.String.format(String.java:4143)  \r\n&gt; at org.jboss.logging.Slf4jLocationAwareLogger.doLogf(Slf4jLocationAwareLogger.java:81)  \r\n&gt; at org.jboss.logging.Logger.logf(Logger.java:2445)  \r\n&gt; at org.jboss.logging.DelegatingBasicLogger.debugf(DelegatingBasicLogger.java:344)  \r\n    \tat org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:75)\r\n    \tat org.hibernate.internal.AbstractSharedSessionContract.lambda$interpretHql$2(AbstractSharedSessionContract.java:744)\r\n    \tat org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:141)\r\n\r\nI upgraded to Spring Boot 3.1.0 and now also upgraded Hibernate to 6.2.5.Final.\r\n\r\nI also use org.slf4j:2.0.7 with org.jboss.logging:3.5.0Final as its implementation.\r\n\r\nThe log framework is ch.qos.logback:1.4.7.\r\n\r\n**Reason**\r\n\r\nFor query-logging `org.hibernate.query.hql.internal.StandardHqlTranslator#translate` is being called.\r\n\r\n    @Override\r\n    public &lt;R&gt; SqmStatement&lt;R&gt; translate(String query, Class&lt;R&gt; expectedResultType) {\r\n    \tHqlLogging.QUERY_LOGGER.debugf( &quot;HQL : &quot; + query );\r\n    \t...\r\n    }\r\n\r\nAfter debugging through all this code I found the problem is the use of `HqlLogging.QUERY_LOGGER.debugf` instead of `HqlLogging.QUERY_LOGGER.debug`.\r\n\r\nThe difference between those two methods is this line in `org.jboss.logging.Slf4jLocationAwareLogger`:\r\n\r\n    // doLog(..)\r\n    final String text = parameters == null || parameters.length == 0 ? String.valueOf(message) : MessageFormat.format(String.valueOf(message), parameters);\r\n    \r\n    // doLogf(..)\r\n    final String text = parameters == null ? String.format(format) : String.format(format, parameters);\r\n\r\nSince StandardHqlTranslator does not provide parameters, parameters is set to the empty array.\r\n\r\nTherefore `String.format(format, parameters)` is called which considers `%` a format expression.\r\n\r\n**Fix (to be rolled out in Hibernate 6.2.6)**\r\n\r\norg.hibernate.query.hql.internal.StandardHqlTranslator#translate should be changed to call:\r\n\r\n    HqlLogging.QUERY_LOGGER.debugf( &quot;HQL : %s&quot;, query );\r\n\r\n-----\r\n\r\nI already reported the problem to Hibernate: https://discourse.hibernate.org/t/query-logging-in-hibernate-6-causes-an-exception-when-a-query-contains-a-like-qerry/7861\r\n\r\nwhich resulted in a bug report: https://hibernate.atlassian.net/browse/HHH-16831\r\n\r\n-----\r\n\r\n**Question**\r\n\r\nAs a temporary workaround I would like to provide a custom implementation of `org.hibernate.query.hql.HqlTranslator` with the outlined fix.\r\n\r\nThe `org.hibernate.query.spi.QueryEngineOptions` interface even defines a method:\r\n`HqlTranslator getCustomHqlTranslator();`. `QueryEngineOptions` is extended by `SessionFactoryOptions`.\r\n\r\nHowever I have yet to find a way, to provide those options to Hibernate, so it will use my implementation.\r\n\r\nHow can I register my custom implementation of `org.hibernate.query.hql.HqlTranslator`?","title":"How can I register a custom HqlTranslator in Hibernate 6 (Spring Boot 3)","body":"<p><strong>Problem</strong></p>\n<p>I recently switched to Hibernate 6. Now I encounter this exception, if a query is logged which contains a <code>%</code> symbol for a <code>LIKE</code> clause.</p>\n<blockquote>\n<p>Caused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.lang.Integer eu.rentall.application.repository.AgpInternalOrderRepository.resetInternalOrderFromProcessing(java.lang.Long)</p>\n<p>at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:100)</p>\n<p>Caused by: java.util.UnknownFormatConversionException: Conversion = '''</p>\n<p>at java.base/java.util.Formatter.parse(Formatter.java:2750)<br />\nat java.base/java.util.Formatter.format(Formatter.java:2671)<br />\nat java.base/java.util.Formatter.format(Formatter.java:2625)<br />\nat java.base/java.lang.String.format(String.java:4143)<br />\nat org.jboss.logging.Slf4jLocationAwareLogger.doLogf(Slf4jLocationAwareLogger.java:81)<br />\nat org.jboss.logging.Logger.logf(Logger.java:2445)<br />\nat org.jboss.logging.DelegatingBasicLogger.debugf(DelegatingBasicLogger.java:344)<br />\nat org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:75)\nat org.hibernate.internal.AbstractSharedSessionContract.lambda$interpretHql$2(AbstractSharedSessionContract.java:744)\nat org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:141)</p>\n</blockquote>\n<p>I upgraded to Spring Boot 3.1.0 and now also upgraded Hibernate to 6.2.5.Final.</p>\n<p>I also use org.slf4j:2.0.7 with org.jboss.logging:3.5.0Final as its implementation.</p>\n<p>The log framework is ch.qos.logback:1.4.7.</p>\n<p><strong>Reason</strong></p>\n<p>For query-logging <code>org.hibernate.query.hql.internal.StandardHqlTranslator#translate</code> is being called.</p>\n<pre><code>@Override\npublic &lt;R&gt; SqmStatement&lt;R&gt; translate(String query, Class&lt;R&gt; expectedResultType) {\n    HqlLogging.QUERY_LOGGER.debugf( &quot;HQL : &quot; + query );\n    ...\n}\n</code></pre>\n<p>After debugging through all this code I found the problem is the use of <code>HqlLogging.QUERY_LOGGER.debugf</code> instead of <code>HqlLogging.QUERY_LOGGER.debug</code>.</p>\n<p>The difference between those two methods is this line in <code>org.jboss.logging.Slf4jLocationAwareLogger</code>:</p>\n<pre><code>// doLog(..)\nfinal String text = parameters == null || parameters.length == 0 ? String.valueOf(message) : MessageFormat.format(String.valueOf(message), parameters);\n\n// doLogf(..)\nfinal String text = parameters == null ? String.format(format) : String.format(format, parameters);\n</code></pre>\n<p>Since StandardHqlTranslator does not provide parameters, parameters is set to the empty array.</p>\n<p>Therefore <code>String.format(format, parameters)</code> is called which considers <code>%</code> a format expression.</p>\n<p><strong>Fix (to be rolled out in Hibernate 6.2.6)</strong></p>\n<p>org.hibernate.query.hql.internal.StandardHqlTranslator#translate should be changed to call:</p>\n<pre><code>HqlLogging.QUERY_LOGGER.debugf( &quot;HQL : %s&quot;, query );\n</code></pre>\n<hr />\n<p>I already reported the problem to Hibernate: <a href=\"https://discourse.hibernate.org/t/query-logging-in-hibernate-6-causes-an-exception-when-a-query-contains-a-like-qerry/7861\" rel=\"nofollow noreferrer\">https://discourse.hibernate.org/t/query-logging-in-hibernate-6-causes-an-exception-when-a-query-contains-a-like-qerry/7861</a></p>\n<p>which resulted in a bug report: <a href=\"https://hibernate.atlassian.net/browse/HHH-16831\" rel=\"nofollow noreferrer\">https://hibernate.atlassian.net/browse/HHH-16831</a></p>\n<hr />\n<p><strong>Question</strong></p>\n<p>As a temporary workaround I would like to provide a custom implementation of <code>org.hibernate.query.hql.HqlTranslator</code> with the outlined fix.</p>\n<p>The <code>org.hibernate.query.spi.QueryEngineOptions</code> interface even defines a method:\n<code>HqlTranslator getCustomHqlTranslator();</code>. <code>QueryEngineOptions</code> is extended by <code>SessionFactoryOptions</code>.</p>\n<p>However I have yet to find a way, to provide those options to Hibernate, so it will use my implementation.</p>\n<p>How can I register my custom implementation of <code>org.hibernate.query.hql.HqlTranslator</code>?</p>\n"},{"tags":["java","keycloak","keycloak-spi"],"owner":{"account_id":18063421,"reputation":393,"user_id":13129983,"display_name":"kikicoder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":467,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687524880,"creation_date":1687520966,"question_id":76539822,"body_markdown":"so resently I am trying to implement an authentication service using spring boot and keycloak as. IAM tool ,\r\nmy login &quot;get token&quot; functionality could happen by two way, either by phone and password or email and password ,\r\ni have done some digging and end up with implementing a custom authenticator as a solution,\r\ni have done also some digging for implementation: \r\nthe code goes like below: \r\n\r\n    public class GsmAuthenticator extends UsernamePasswordForm implements Authenticator {\r\n        public static final String CONFIG_EXTERNAL_APP_URL = &quot;external-application-url&quot;;\r\n        Logger logger = LoggerFactory.getLogger(GsmAuthenticator.class);\r\n    \r\n        public GsmAuthenticator() {\r\n             logger.info(&quot;GSM authenticator has been created&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public boolean validateUserAndPassword(AuthenticationFlowContext context, MultivaluedMap&lt;String, String&gt; inputData) {\r\n    \r\n            if (context.getAuthenticatorConfig().getConfig().get(CONFIG_EXTERNAL_APP_URL) == null){\r\n    \r\n                logger.error(&quot;get u  mother fucker &quot;);\r\n                return true;\r\n            }\r\n    \r\n    //        return super.validateUserAndPassword(context, inputData);\r\n            String username = inputData.getFirst(AuthenticationManager.FORM_USERNAME).toString();\r\n            logger.info(&quot;User name is: {}&quot;,username);\r\n            if (username == null) {\r\n                context.getEvent().error(Errors.USER_NOT_FOUND);\r\n                Response challengeResponse = challenge(context, Messages.INVALID_USER);\r\n                context.failureChallenge(AuthenticationFlowError.INVALID_USER, challengeResponse);\r\n                logger.error(&quot;Empty username&quot;);\r\n                return false;\r\n            }\r\n    \r\n    \r\n            username = username.trim();\r\n            logger.info(&quot;Username: {}&quot;,username);\r\n            context.getEvent().detail(Details.USERNAME, username);\r\n            context.getAuthenticationSession().setAuthNote(AbstractUsernameFormAuthenticator.ATTEMPTED_USERNAME, username);\r\n            UserModel user = null;\r\n            try {\r\n                List users = context.getSession().users().searchForUserByUserAttributeStream(context.getRealm(), &quot;gsm&quot;, username).collect(Collectors.toList());\r\n    \r\n                if (users != null &amp;&amp; users.size() == 1) {\r\n                    user = (UserModel) users.get(0);\r\n                    logger.info(&quot;get the phone number of the user {}: {}&quot;,username,user.getAttributes());\r\n                    inputData.put(&quot;username&quot;, Collections.singletonList(&quot;clientRole&quot;));\r\n                    super.validateUserAndPassword(context,inputData);\r\n                }\r\n            } catch (ModelDuplicateException mde) {\r\n                if (mde.getDuplicateFieldName() != null &amp;&amp; mde.getDuplicateFieldName().equals(UserModel.EMAIL)) {\r\n                    setDuplicateUserChallenge(context, Errors.EMAIL_IN_USE, Messages.EMAIL_EXISTS, AuthenticationFlowError.INVALID_USER);\r\n                } else {\r\n                    setDuplicateUserChallenge(context, Errors.USERNAME_IN_USE, Messages.USERNAME_EXISTS, AuthenticationFlowError.INVALID_USER);\r\n                }\r\n                return false;\r\n            }\r\n    \r\n            if (invalidUser(context, user)) {\r\n                return false;\r\n            }\r\n    \r\n            if (!validatePassword(context, user, inputData, false)) {\r\n                return false;\r\n            }\r\n    \r\n            if (!enabledUser(context, user)) {\r\n                return false;\r\n            }\r\n    \r\n            String rememberMe = inputData.getFirst(&quot;rememberMe&quot;).toString();\r\n            boolean remember = rememberMe != null &amp;&amp; rememberMe.equalsIgnoreCase(&quot;on&quot;);\r\n            if (remember) {\r\n                context.getAuthenticationSession().setAuthNote(Details.REMEMBER_ME, &quot;true&quot;);\r\n                context.getEvent().detail(Details.REMEMBER_ME, &quot;true&quot;);\r\n            } else {\r\n                context.getAuthenticationSession().removeAuthNote(Details.REMEMBER_ME);\r\n            }\r\n            context.setUser(user);\r\n    \r\n            return true;\r\n        }\r\n    \r\n        private boolean invalidUser(AuthenticationFlowContext context, UserModel user) {\r\n            return true;\r\n        }}\r\n\r\n \r\nand over here is the code for the  factory:\r\n\r\n    public class MobileAuthenticationFactory extends UsernamePasswordFormFactory  {\r\n    \r\n        public static final String PROVIDER_ID = &quot;phone-authenticator&quot;;\r\n        public static final GsmAuthenticator SINGLETON = new GsmAuthenticator();\r\n    \r\n        public static final AuthenticationExecutionModel.Requirement[] REQUIREMENT_CHOICES = {\r\n                AuthenticationExecutionModel.Requirement.REQUIRED,\r\n                AuthenticationExecutionModel.Requirement.DISABLED\r\n        };\r\n        private static final String WEBSITE_URL_PROP_NAME = &quot;custom_website_url&quot;;\r\n        /**\r\n         * the provider configuration metadata definition\r\n         */\r\n        private static final List&lt;ProviderConfigProperty&gt; configMetadata;\r\n    \r\n        static {\r\n            configMetadata = ProviderConfigurationBuilder.create()\r\n    \r\n                    // add the data source name property\r\n                    .property()\r\n                    .name(WEBSITE_URL_PROP_NAME)\r\n                    .type(ProviderConfigProperty.STRING_TYPE)\r\n                    .label(&quot;Csutom Website URL&quot;)\r\n                    .defaultValue(&quot;https://www.example.com/site&quot;)\r\n                    .helpText(&quot;The base URL of the custom website. Error messages will generate links back to this location.&quot;)\r\n                    .add()\r\n    \r\n                    .build();\r\n        }\r\n    \r\n        private String siteURL;\r\n    \r\n        @Override\r\n        public Authenticator create(KeycloakSession session) {\r\n            System.out.println(&quot;GSM authenticator has been created&quot;);\r\n            return SINGLETON;\r\n        }\r\n    \r\n        @Override\r\n        public void init(Config.Scope scope) {\r\n        }\r\n    \r\n        @Override\r\n        public String getId() {\r\n            return PROVIDER_ID;\r\n        }\r\n    \r\n        @Override\r\n        public String getDisplayType() {\r\n            return PROVIDER_ID;\r\n        }\r\n    \r\n        @Override\r\n        public String getHelpText() {\r\n            return &quot;Validates a mobile and password from login form.&quot;;\r\n        }\r\n    }\r\n\r\nI have done the deployment to keycloak and it seems it has done successfully, i can see the authenticator in the authentication tab,\r\nso what i have done next is creating a authentication flow and add the custom authenticator, then try the admin api to try get token , \r\nproblem when ever I try to call the api the it return internal error ,\r\n\r\nand keycloak logs return the flowing error:\r\n\r\n&gt; 2023-06-23 15:30:35,642 ERROR\r\n&gt; [org.keycloak.services.error.KeycloakErrorHandler]\r\n&gt; (executor-thread-27) Uncaught server error:\r\n&gt; java.lang.IllegalArgumentException: RESTEASY003715: path was null \tat\r\n&gt; org.jboss.resteasy.specimpl.ResteasyUriBuilderImpl.path(ResteasyUriBuilderImpl.java:382)\r\n&gt; \tat\r\n&gt; org.keycloak.authentication.AuthenticationProcessor$Result.getActionUrl(AuthenticationProcessor.java:566)\r\n&gt; \tat\r\n&gt; org.keycloak.authentication.AuthenticationProcessor$Result.form(AuthenticationProcessor.java:540)\r\n&gt; \tat\r\n&gt; org.keycloak.authentication.authenticators.browser.UsernamePasswordForm.challenge(UsernamePasswordForm.java:91)\r\n&gt; \tat\r\n&gt; org.keycloak.authentication.authenticators.browser.UsernamePasswordForm.authenticate(UsernamePasswordForm.java:81)\r\n&gt; \tat\r\n&gt; org.keycloak.authentication.DefaultAuthenticationFlow.processSingleFlowExecutionModel(DefaultAuthenticationFlow.java:445)\r\n&gt; \tat\r\n&gt; org.keycloak.authentication.DefaultAuthenticationFlow.processFlow(DefaultAuthenticationFlow.java:249)\r\n&gt; \tat\r\n&gt; org.keycloak.authentication.DefaultAuthenticationFlow.processSingleFlowExecutionModel(DefaultAuthenticationFlow.java:380)\r\n&gt; \tat\r\n&gt; org.keycloak.authentication.DefaultAuthenticationFlow.processFlow(DefaultAuthenticationFlow.java:271)\r\n&gt; \tat\r\n&gt; org.keycloak.authentication.AuthenticationProcessor.authenticateOnly(AuthenticationProcessor.java:1026)\r\n&gt; \tat\r\n&gt; org.keycloak.protocol.oidc.endpoints.TokenEndpoint.resourceOwnerPasswordCredentialsGrant(TokenEndpoint.java:639)\r\n&gt; \tat\r\n&gt; org.keycloak.protocol.oidc.endpoints.TokenEndpoint.processGrantRequestInternal(TokenEndpoint.java:223)\r\n&gt; \tat\r\n&gt; org.keycloak.protocol.oidc.endpoints.TokenEndpoint.access$100(TokenEndpoint.java:131)\r\n&gt; \tat\r\n&gt; org.keycloak.protocol.oidc.endpoints.TokenEndpoint$1.runInternal(TokenEndpoint.java:185)\r\n&gt; \tat\r\n&gt; org.keycloak.common.util.ResponseSessionTask.run(ResponseSessionTask.java:67)\r\n&gt; \tat\r\n&gt; org.keycloak.common.util.ResponseSessionTask.run(ResponseSessionTask.java:44)\r\n&gt; \tat\r\n&gt; org.keycloak.models.utils.KeycloakModelUtils.runJobInRetriableTransaction(KeycloakModelUtils.java:299)\r\n&gt; \tat\r\n&gt; org.keycloak.protocol.oidc.endpoints.TokenEndpoint.processGrantRequest(TokenEndpoint.java:178)\r\n&gt; \tat\r\n&gt; java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native\r\n&gt; Method) \tat\r\n&gt; java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n&gt; \tat\r\n&gt; java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt; \tat java.base/java.lang.reflect.Method.invoke(Method.java:566) \tat\r\n&gt; org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:170)\r\n&gt; \tat\r\n&gt; org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:130)\r\n&gt; \tat\r\n&gt; org.jboss.resteasy.core.ResourceMethodInvoker.internalInvokeOnTarget(ResourceMethodInvoker.java:660)\r\n&gt; \tat\r\n&gt; org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTargetAfterFilter(ResourceMethodInvoker.java:524)\r\n&gt; \tat\r\n&gt; org.jboss.resteasy.core.ResourceMethodInvoker.lambda$invokeOnTarget$2(ResourceMethodInvoker.java:474)\r\n&gt; \tat\r\n&gt; org.jboss.resteasy.core.interception.jaxrs.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:364)\r\n&gt; \tat\r\n&gt; org.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:476)\r\n&gt; \tat\r\n&gt; org.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:434)\r\n&gt; \tat\r\n&gt; org.jboss.resteasy.core.ResourceLocatorInvoker.invokeOnTargetObject(ResourceLocatorInvoker.java:192)\r\n&gt; \tat\r\n&gt; org.jboss.resteasy.core.ResourceLocatorInvoker.invoke(ResourceLocatorInvoker.java:152)\r\n&gt; \tat\r\n&gt; org.jboss.resteasy.core.ResourceLocatorInvoker.invokeOnTargetObject(ResourceLocatorInvoker.java:183)\r\n&gt; \tat\r\n&gt; org.jboss.resteasy.core.ResourceLocatorInvoker.invoke(ResourceLocatorInvoker.java:141)\r\n&gt; \tat\r\n&gt; org.jboss.resteasy.core.ResourceLocatorInvoker.invoke(ResourceLocatorInvoker.java:32)\r\n&gt; \tat\r\n&gt; org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:492)\r\n&gt; \tat\r\n&gt; org.jboss.resteasy.core.SynchronousDispatcher.lambda$invoke$4(SynchronousDispatcher.java:261)\r\n&gt; \tat\r\n&gt; org.jboss.resteasy.core.SynchronousDispatcher.lambda$preprocess$0(SynchronousDispatcher.java:161)\r\n&gt; \tat\r\n&gt; org.jboss.resteasy.core.interception.jaxrs.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:364)\r\n&gt; \tat\r\n&gt; org.jboss.resteasy.core.SynchronousDispatcher.preprocess(SynchronousDispatcher.java:164)\r\n&gt; \tat\r\n&gt; org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:247)\r\n&gt; \tat\r\n&gt; io.quarkus.resteasy.runtime.standalone.RequestDispatcher.service(RequestDispatcher.java:73)\r\n&gt; \tat\r\n&gt; io.quarkus.resteasy.runtime.standalone.VertxRequestHandler.dispatch(VertxRequestHandler.java:151)\r\n&gt; \tat\r\n&gt; io.quarkus.resteasy.runtime.standalone.VertxRequestHandler.handle(VertxRequestHandler.java:82)\r\n&gt; \tat\r\n&gt; io.quarkus.resteasy.runtime.standalone.VertxRequestHandler.handle(VertxRequestHandler.java:42)\r\n&gt; \tat\r\n&gt; io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1284)\r\n&gt; \tat\r\n&gt; io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:173)\r\n&gt; \tat\r\n&gt; io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:140)\r\n&gt; \tat\r\n&gt; io.quarkus.vertx.http.runtime.StaticResourcesRecorder$2.handle(StaticResourcesRecorder.java:84)\r\n&gt; \tat\r\n&gt; io.quarkus.vertx.http.runtime.StaticResourcesRecorder$2.handle(StaticResourcesRecorder.java:71)\r\n&gt; \tat\r\n&gt; io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1284)\r\n&gt; \tat\r\n&gt; io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:173)\r\n&gt; \tat\r\n&gt; io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:140)\r\n&gt; \tat\r\n&gt; io.quarkus.vertx.http.runtime.VertxHttpRecorder$6.handle(VertxHttpRecorder.java:430)\r\n&gt; \tat\r\n&gt; io.quarkus.vertx.http.runtime.VertxHttpRecorder$6.handle(VertxHttpRecorder.java:408)\r\n&gt; \tat\r\n&gt; io.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1284)\r\n&gt; \tat\r\n&gt; io.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:173)\r\n&gt; \tat\r\n&gt; io.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:140)\r\n&gt; \tat\r\n&gt; org.keycloak.quarkus.runtime.integration.web.QuarkusRequestFilter.lambda$createBlockingHandler$0(QuarkusRequestFilter.java:82)\r\n&gt; \tat\r\n&gt; io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:576)\r\n&gt; \tat\r\n&gt; org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\r\n&gt; \tat\r\n&gt; org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\r\n&gt; \tat\r\n&gt; org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\r\n&gt; \tat\r\n&gt; org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\r\n&gt; \tat\r\n&gt; io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n&gt; \tat java.base/java.lang.Thread.run(Thread.java:829)\r\n\r\nany help would be much appreciated. ","title":"implement custom keycloak form authenticator?","body":"<p>so resently I am trying to implement an authentication service using spring boot and keycloak as. IAM tool ,\nmy login &quot;get token&quot; functionality could happen by two way, either by phone and password or email and password ,\ni have done some digging and end up with implementing a custom authenticator as a solution,\ni have done also some digging for implementation:\nthe code goes like below:</p>\n<pre><code>public class GsmAuthenticator extends UsernamePasswordForm implements Authenticator {\n    public static final String CONFIG_EXTERNAL_APP_URL = &quot;external-application-url&quot;;\n    Logger logger = LoggerFactory.getLogger(GsmAuthenticator.class);\n\n    public GsmAuthenticator() {\n         logger.info(&quot;GSM authenticator has been created&quot;);\n    }\n\n    @Override\n    public boolean validateUserAndPassword(AuthenticationFlowContext context, MultivaluedMap&lt;String, String&gt; inputData) {\n\n        if (context.getAuthenticatorConfig().getConfig().get(CONFIG_EXTERNAL_APP_URL) == null){\n\n            logger.error(&quot;get u  mother fucker &quot;);\n            return true;\n        }\n\n//        return super.validateUserAndPassword(context, inputData);\n        String username = inputData.getFirst(AuthenticationManager.FORM_USERNAME).toString();\n        logger.info(&quot;User name is: {}&quot;,username);\n        if (username == null) {\n            context.getEvent().error(Errors.USER_NOT_FOUND);\n            Response challengeResponse = challenge(context, Messages.INVALID_USER);\n            context.failureChallenge(AuthenticationFlowError.INVALID_USER, challengeResponse);\n            logger.error(&quot;Empty username&quot;);\n            return false;\n        }\n\n\n        username = username.trim();\n        logger.info(&quot;Username: {}&quot;,username);\n        context.getEvent().detail(Details.USERNAME, username);\n        context.getAuthenticationSession().setAuthNote(AbstractUsernameFormAuthenticator.ATTEMPTED_USERNAME, username);\n        UserModel user = null;\n        try {\n            List users = context.getSession().users().searchForUserByUserAttributeStream(context.getRealm(), &quot;gsm&quot;, username).collect(Collectors.toList());\n\n            if (users != null &amp;&amp; users.size() == 1) {\n                user = (UserModel) users.get(0);\n                logger.info(&quot;get the phone number of the user {}: {}&quot;,username,user.getAttributes());\n                inputData.put(&quot;username&quot;, Collections.singletonList(&quot;clientRole&quot;));\n                super.validateUserAndPassword(context,inputData);\n            }\n        } catch (ModelDuplicateException mde) {\n            if (mde.getDuplicateFieldName() != null &amp;&amp; mde.getDuplicateFieldName().equals(UserModel.EMAIL)) {\n                setDuplicateUserChallenge(context, Errors.EMAIL_IN_USE, Messages.EMAIL_EXISTS, AuthenticationFlowError.INVALID_USER);\n            } else {\n                setDuplicateUserChallenge(context, Errors.USERNAME_IN_USE, Messages.USERNAME_EXISTS, AuthenticationFlowError.INVALID_USER);\n            }\n            return false;\n        }\n\n        if (invalidUser(context, user)) {\n            return false;\n        }\n\n        if (!validatePassword(context, user, inputData, false)) {\n            return false;\n        }\n\n        if (!enabledUser(context, user)) {\n            return false;\n        }\n\n        String rememberMe = inputData.getFirst(&quot;rememberMe&quot;).toString();\n        boolean remember = rememberMe != null &amp;&amp; rememberMe.equalsIgnoreCase(&quot;on&quot;);\n        if (remember) {\n            context.getAuthenticationSession().setAuthNote(Details.REMEMBER_ME, &quot;true&quot;);\n            context.getEvent().detail(Details.REMEMBER_ME, &quot;true&quot;);\n        } else {\n            context.getAuthenticationSession().removeAuthNote(Details.REMEMBER_ME);\n        }\n        context.setUser(user);\n\n        return true;\n    }\n\n    private boolean invalidUser(AuthenticationFlowContext context, UserModel user) {\n        return true;\n    }}\n</code></pre>\n<p>and over here is the code for the  factory:</p>\n<pre><code>public class MobileAuthenticationFactory extends UsernamePasswordFormFactory  {\n\n    public static final String PROVIDER_ID = &quot;phone-authenticator&quot;;\n    public static final GsmAuthenticator SINGLETON = new GsmAuthenticator();\n\n    public static final AuthenticationExecutionModel.Requirement[] REQUIREMENT_CHOICES = {\n            AuthenticationExecutionModel.Requirement.REQUIRED,\n            AuthenticationExecutionModel.Requirement.DISABLED\n    };\n    private static final String WEBSITE_URL_PROP_NAME = &quot;custom_website_url&quot;;\n    /**\n     * the provider configuration metadata definition\n     */\n    private static final List&lt;ProviderConfigProperty&gt; configMetadata;\n\n    static {\n        configMetadata = ProviderConfigurationBuilder.create()\n\n                // add the data source name property\n                .property()\n                .name(WEBSITE_URL_PROP_NAME)\n                .type(ProviderConfigProperty.STRING_TYPE)\n                .label(&quot;Csutom Website URL&quot;)\n                .defaultValue(&quot;https://www.example.com/site&quot;)\n                .helpText(&quot;The base URL of the custom website. Error messages will generate links back to this location.&quot;)\n                .add()\n\n                .build();\n    }\n\n    private String siteURL;\n\n    @Override\n    public Authenticator create(KeycloakSession session) {\n        System.out.println(&quot;GSM authenticator has been created&quot;);\n        return SINGLETON;\n    }\n\n    @Override\n    public void init(Config.Scope scope) {\n    }\n\n    @Override\n    public String getId() {\n        return PROVIDER_ID;\n    }\n\n    @Override\n    public String getDisplayType() {\n        return PROVIDER_ID;\n    }\n\n    @Override\n    public String getHelpText() {\n        return &quot;Validates a mobile and password from login form.&quot;;\n    }\n}\n</code></pre>\n<p>I have done the deployment to keycloak and it seems it has done successfully, i can see the authenticator in the authentication tab,\nso what i have done next is creating a authentication flow and add the custom authenticator, then try the admin api to try get token ,\nproblem when ever I try to call the api the it return internal error ,</p>\n<p>and keycloak logs return the flowing error:</p>\n<blockquote>\n<p>2023-06-23 15:30:35,642 ERROR\n[org.keycloak.services.error.KeycloakErrorHandler]\n(executor-thread-27) Uncaught server error:\njava.lang.IllegalArgumentException: RESTEASY003715: path was null     at\norg.jboss.resteasy.specimpl.ResteasyUriBuilderImpl.path(ResteasyUriBuilderImpl.java:382)\nat\norg.keycloak.authentication.AuthenticationProcessor$Result.getActionUrl(AuthenticationProcessor.java:566)\nat\norg.keycloak.authentication.AuthenticationProcessor$Result.form(AuthenticationProcessor.java:540)\nat\norg.keycloak.authentication.authenticators.browser.UsernamePasswordForm.challenge(UsernamePasswordForm.java:91)\nat\norg.keycloak.authentication.authenticators.browser.UsernamePasswordForm.authenticate(UsernamePasswordForm.java:81)\nat\norg.keycloak.authentication.DefaultAuthenticationFlow.processSingleFlowExecutionModel(DefaultAuthenticationFlow.java:445)\nat\norg.keycloak.authentication.DefaultAuthenticationFlow.processFlow(DefaultAuthenticationFlow.java:249)\nat\norg.keycloak.authentication.DefaultAuthenticationFlow.processSingleFlowExecutionModel(DefaultAuthenticationFlow.java:380)\nat\norg.keycloak.authentication.DefaultAuthenticationFlow.processFlow(DefaultAuthenticationFlow.java:271)\nat\norg.keycloak.authentication.AuthenticationProcessor.authenticateOnly(AuthenticationProcessor.java:1026)\nat\norg.keycloak.protocol.oidc.endpoints.TokenEndpoint.resourceOwnerPasswordCredentialsGrant(TokenEndpoint.java:639)\nat\norg.keycloak.protocol.oidc.endpoints.TokenEndpoint.processGrantRequestInternal(TokenEndpoint.java:223)\nat\norg.keycloak.protocol.oidc.endpoints.TokenEndpoint.access$100(TokenEndpoint.java:131)\nat\norg.keycloak.protocol.oidc.endpoints.TokenEndpoint$1.runInternal(TokenEndpoint.java:185)\nat\norg.keycloak.common.util.ResponseSessionTask.run(ResponseSessionTask.java:67)\nat\norg.keycloak.common.util.ResponseSessionTask.run(ResponseSessionTask.java:44)\nat\norg.keycloak.models.utils.KeycloakModelUtils.runJobInRetriableTransaction(KeycloakModelUtils.java:299)\nat\norg.keycloak.protocol.oidc.endpoints.TokenEndpoint.processGrantRequest(TokenEndpoint.java:178)\nat\njava.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native\nMethod)   at\njava.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat\njava.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:566)   at\norg.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:170)\nat\norg.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:130)\nat\norg.jboss.resteasy.core.ResourceMethodInvoker.internalInvokeOnTarget(ResourceMethodInvoker.java:660)\nat\norg.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTargetAfterFilter(ResourceMethodInvoker.java:524)\nat\norg.jboss.resteasy.core.ResourceMethodInvoker.lambda$invokeOnTarget$2(ResourceMethodInvoker.java:474)\nat\norg.jboss.resteasy.core.interception.jaxrs.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:364)\nat\norg.jboss.resteasy.core.ResourceMethodInvoker.invokeOnTarget(ResourceMethodInvoker.java:476)\nat\norg.jboss.resteasy.core.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:434)\nat\norg.jboss.resteasy.core.ResourceLocatorInvoker.invokeOnTargetObject(ResourceLocatorInvoker.java:192)\nat\norg.jboss.resteasy.core.ResourceLocatorInvoker.invoke(ResourceLocatorInvoker.java:152)\nat\norg.jboss.resteasy.core.ResourceLocatorInvoker.invokeOnTargetObject(ResourceLocatorInvoker.java:183)\nat\norg.jboss.resteasy.core.ResourceLocatorInvoker.invoke(ResourceLocatorInvoker.java:141)\nat\norg.jboss.resteasy.core.ResourceLocatorInvoker.invoke(ResourceLocatorInvoker.java:32)\nat\norg.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:492)\nat\norg.jboss.resteasy.core.SynchronousDispatcher.lambda$invoke$4(SynchronousDispatcher.java:261)\nat\norg.jboss.resteasy.core.SynchronousDispatcher.lambda$preprocess$0(SynchronousDispatcher.java:161)\nat\norg.jboss.resteasy.core.interception.jaxrs.PreMatchContainerRequestContext.filter(PreMatchContainerRequestContext.java:364)\nat\norg.jboss.resteasy.core.SynchronousDispatcher.preprocess(SynchronousDispatcher.java:164)\nat\norg.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:247)\nat\nio.quarkus.resteasy.runtime.standalone.RequestDispatcher.service(RequestDispatcher.java:73)\nat\nio.quarkus.resteasy.runtime.standalone.VertxRequestHandler.dispatch(VertxRequestHandler.java:151)\nat\nio.quarkus.resteasy.runtime.standalone.VertxRequestHandler.handle(VertxRequestHandler.java:82)\nat\nio.quarkus.resteasy.runtime.standalone.VertxRequestHandler.handle(VertxRequestHandler.java:42)\nat\nio.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1284)\nat\nio.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:173)\nat\nio.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:140)\nat\nio.quarkus.vertx.http.runtime.StaticResourcesRecorder$2.handle(StaticResourcesRecorder.java:84)\nat\nio.quarkus.vertx.http.runtime.StaticResourcesRecorder$2.handle(StaticResourcesRecorder.java:71)\nat\nio.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1284)\nat\nio.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:173)\nat\nio.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:140)\nat\nio.quarkus.vertx.http.runtime.VertxHttpRecorder$6.handle(VertxHttpRecorder.java:430)\nat\nio.quarkus.vertx.http.runtime.VertxHttpRecorder$6.handle(VertxHttpRecorder.java:408)\nat\nio.vertx.ext.web.impl.RouteState.handleContext(RouteState.java:1284)\nat\nio.vertx.ext.web.impl.RoutingContextImplBase.iterateNext(RoutingContextImplBase.java:173)\nat\nio.vertx.ext.web.impl.RoutingContextImpl.next(RoutingContextImpl.java:140)\nat\norg.keycloak.quarkus.runtime.integration.web.QuarkusRequestFilter.lambda$createBlockingHandler$0(QuarkusRequestFilter.java:82)\nat\nio.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:576)\nat\norg.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\nat\norg.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\nat\norg.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\nat\norg.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\nat\nio.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\nat java.base/java.lang.Thread.run(Thread.java:829)</p>\n</blockquote>\n<p>any help would be much appreciated.</p>\n"},{"tags":["java","rest","jax-rs"],"comments":[{"owner":{"account_id":2573730,"reputation":2474,"user_id":2231893,"accept_rate":86,"display_name":"abasu"},"score":0,"creation_date":1456809823,"post_id":35715191,"comment_id":59106777,"body_markdown":"it&#39;s better to rearrange the params, If I had a choice, I would have separated mandatory and optional in 2 sections, separated by a delimiter in URL, then make mandatory as positional, and optional as key value pair, I don&#39;t know how, which client, under what scenario you are writing the code, what have you tried till now?","body":"it&#39;s better to rearrange the params, If I had a choice, I would have separated mandatory and optional in 2 sections, separated by a delimiter in URL, then make mandatory as positional, and optional as key value pair, I don&#39;t know how, which client, under what scenario you are writing the code, what have you tried till now?"},{"owner":{"account_id":3571707,"reputation":618,"user_id":2981854,"accept_rate":83,"display_name":"mbgsuirp"},"score":0,"creation_date":1456810401,"post_id":35715191,"comment_id":59107006,"body_markdown":"@abasu I am using JAX-RS. I referred to http://www.nakov.com/blog/2009/07/15/jax-rs-path-pathparam-and-optional-parameters/. Is it required to use regex, or is there any other way?","body":"@abasu I am using JAX-RS. I referred to <a href=\"http://www.nakov.com/blog/2009/07/15/jax-rs-path-pathparam-and-optional-parameters/\" rel=\"nofollow noreferrer\">nakov.com/blog/2009/07/15/&hellip;</a>. Is it required to use regex, or is there any other way?"},{"owner":{"display_name":"user5547025"},"score":0,"creation_date":1456818205,"post_id":35715191,"comment_id":59110306,"body_markdown":"How would you distinguish `optional1` and `optional2` in `/job/foo/bar/baz`? What is `bar`?","body":"How would you distinguish <code>optional1</code> and <code>optional2</code> in <code>&#47;job&#47;foo&#47;bar&#47;baz</code>? What is <code>bar</code>?"},{"owner":{"account_id":3571707,"reputation":618,"user_id":2981854,"accept_rate":83,"display_name":"mbgsuirp"},"score":0,"creation_date":1456820607,"post_id":35715191,"comment_id":59111422,"body_markdown":"I am able to provide optional parameters using the solution provided in www.nakov.com/blog/2009/07/15/jax-rs-path-pathparam-and-optional-parameters. So my issue is resolved now.","body":"I am able to provide optional parameters using the solution provided in www.nakov.com/blog/2009/07/15/jax-rs-path-pathparam-and-opti&zwnj;&#8203;onal-parameters. So my issue is resolved now."}],"answers":[{"tags":[],"owner":{"account_id":4567927,"reputation":5819,"user_id":3708462,"accept_rate":57,"display_name":"Emdadul Sawon"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1621726080,"creation_date":1456926183,"answer_id":35748928,"question_id":35715191,"body_markdown":"You can match the entire path ending in the REST request\r\n\r\n    @Path(&quot;/location/{locationId}{path:.*}&quot;)\r\n    public Response getLocation(\r\n        @PathParam(&quot;locationId&quot;) int locationId,\r\n        @PathParam(&quot;path&quot;) String path) {\r\n        //your code\r\n    }\r\n\r\nNow the path variable contain entire path after &lt;code&gt;location/{locationId}&lt;/code&gt;\r\n\r\nYou can also use a regular expressions to make the path optional.\r\n\r\n    @Path(&quot;/user/{id}{format:(/format/[^/]+?)?}{encoding:(/encoding/[^/]+?)?}&quot;)\r\n    public Response getUser(\r\n        @PathParam(&quot;id&quot;) int id,\r\n        @PathParam(&quot;format&quot;) String format,\r\n        @PathParam(&quot;encoding&quot;) String encoding) {\r\n        //your code\r\n    }\r\n\r\nNow if you format and encoding will be optional. You do not give any value they will be empty. ","title":"How to create REST API with optional parameters?","body":"<p>You can match the entire path ending in the REST request</p>\n<pre><code>@Path(&quot;/location/{locationId}{path:.*}&quot;)\npublic Response getLocation(\n    @PathParam(&quot;locationId&quot;) int locationId,\n    @PathParam(&quot;path&quot;) String path) {\n    //your code\n}\n</code></pre>\n<p>Now the path variable contain entire path after <code>location/{locationId}</code></p>\n<p>You can also use a regular expressions to make the path optional.</p>\n<pre><code>@Path(&quot;/user/{id}{format:(/format/[^/]+?)?}{encoding:(/encoding/[^/]+?)?}&quot;)\npublic Response getUser(\n    @PathParam(&quot;id&quot;) int id,\n    @PathParam(&quot;format&quot;) String format,\n    @PathParam(&quot;encoding&quot;) String encoding) {\n    //your code\n}\n</code></pre>\n<p>Now if you format and encoding will be optional. You do not give any value they will be empty.</p>\n"},{"tags":[],"owner":{"account_id":1528364,"reputation":125594,"user_id":1426227,"accept_rate":79,"display_name":"cassiomolin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1456928357,"creation_date":1456928357,"answer_id":35749775,"question_id":35715191,"body_markdown":"Rearrange the params and try the following:\r\n\r\n    @Path(&quot;/job/{param1}/{param2}{optional1 : (/optional1)?}{optional2 : (/optional2)?}&quot;)\r\n    public Response myMethod(@PathParam(&quot;param1&quot;) String param1,\r\n                             @PathParam(&quot;param2&quot;) String param2,\r\n                             @PathParam(&quot;optional1&quot;) String optional1,\r\n                             @PathParam(&quot;optional2&quot;) String optional2) {\r\n        ...\r\n    }","title":"How to create REST API with optional parameters?","body":"<p>Rearrange the params and try the following:</p>\n\n<pre><code>@Path(\"/job/{param1}/{param2}{optional1 : (/optional1)?}{optional2 : (/optional2)?}\")\npublic Response myMethod(@PathParam(\"param1\") String param1,\n                         @PathParam(\"param2\") String param2,\n                         @PathParam(\"optional1\") String optional1,\n                         @PathParam(\"optional2\") String optional2) {\n    ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1456929069,"creation_date":1456929069,"answer_id":35750065,"question_id":35715191,"body_markdown":"It might be easier to turn the optional path parameters into query parameters. You can then use `@DefaultValue` if you need it:\r\n\r\n    @GET @Path(&quot;/job/{param1}/{param2}&quot;)\r\n    public Response method(@PathParam(&quot;param1&quot;) String param1,\r\n        @PathParam(&quot;param2&quot;) String param2,\r\n        @QueryParam(&quot;optional1&quot;) String optional1,\r\n        @QueryParam(&quot;optional2&quot;) @DefaultValue(&quot;default&quot;) String optional2) {\r\n      ...\r\n    }\r\n\r\nYou can then call it using `/job/one/two?optional1=test` passing only the optional parameters you need.","title":"How to create REST API with optional parameters?","body":"<p>It might be easier to turn the optional path parameters into query parameters. You can then use <code>@DefaultValue</code> if you need it:</p>\n\n<pre><code>@GET @Path(\"/job/{param1}/{param2}\")\npublic Response method(@PathParam(\"param1\") String param1,\n    @PathParam(\"param2\") String param2,\n    @QueryParam(\"optional1\") String optional1,\n    @QueryParam(\"optional2\") @DefaultValue(\"default\") String optional2) {\n  ...\n}\n</code></pre>\n\n<p>You can then call it using <code>/job/one/two?optional1=test</code> passing only the optional parameters you need.</p>\n"},{"tags":[],"owner":{"account_id":23134567,"reputation":534,"user_id":17238973,"display_name":"Sahil Patel"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1687524243,"creation_date":1637901829,"answer_id":70119666,"question_id":35715191,"body_markdown":"to make request parameter optional set `@RequestParam` to false in controller class\r\n\r\n   \r\n\r\n    @GetMapping(&quot;/get&quot;)\r\n    public get(@RequestParam(value = &quot;name&quot;, required = false) String name){\r\n     \r\n    /* code of controller......*/\r\n    \r\n    }\r\n\r\n","title":"How to create REST API with optional parameters?","body":"<p>to make request parameter optional set <code>@RequestParam</code> to false in controller class</p>\n<pre><code>@GetMapping(&quot;/get&quot;)\npublic get(@RequestParam(value = &quot;name&quot;, required = false) String name){\n \n/* code of controller......*/\n\n}\n</code></pre>\n"}],"owner":{"account_id":3571707,"reputation":618,"user_id":2981854,"accept_rate":83,"display_name":"mbgsuirp"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74902,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":35748928,"answer_count":4,"score":15,"last_activity_date":1687524243,"creation_date":1456809484,"question_id":35715191,"body_markdown":"I need to implement an API with these path params.\r\n\r\n    @Path(&quot;/job/{param1}/{optional1}/{optional2}/{param2}&quot;)\r\n\r\nCan the second and third params by optional? So the client need not pass these, but have to pass the first and last.\r\n\r\nIf this is not possible, then is it recommended to rearrange the params in this way?\r\n\r\n    @Path(&quot;/job/{param1}/{param2}/{optional1}/{optional2}&quot;)\r\n\r\nHow to provide the optional params?","title":"How to create REST API with optional parameters?","body":"<p>I need to implement an API with these path params.</p>\n\n<pre><code>@Path(\"/job/{param1}/{optional1}/{optional2}/{param2}\")\n</code></pre>\n\n<p>Can the second and third params by optional? So the client need not pass these, but have to pass the first and last.</p>\n\n<p>If this is not possible, then is it recommended to rearrange the params in this way?</p>\n\n<pre><code>@Path(\"/job/{param1}/{param2}/{optional1}/{optional2}\")\n</code></pre>\n\n<p>How to provide the optional params?</p>\n"},{"tags":["java","junit","testng"],"comments":[{"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"score":0,"creation_date":1687519833,"post_id":76539660,"comment_id":134951886,"body_markdown":"The issue here is that the `@Test` annotation parameters are processed at compile time, but the `toString()` method call for the enum will only be executed at runtime","body":"The issue here is that the <code>@Test</code> annotation parameters are processed at compile time, but the <code>toString()</code> method call for the enum will only be executed at runtime"},{"owner":{"account_id":2085695,"reputation":1023,"user_id":1856744,"accept_rate":4,"display_name":"Stunner"},"score":0,"creation_date":1687519898,"post_id":76539660,"comment_id":134951903,"body_markdown":"Any idea, How do we acheive it then? I just don&#39;t want to put the entire long error messages on the test files.","body":"Any idea, How do we acheive it then? I just don&#39;t want to put the entire long error messages on the test files."},{"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"score":1,"creation_date":1687520074,"post_id":76539660,"comment_id":134951944,"body_markdown":"You may use static as a workaround, like: `private static final String CUSTOM_ERROR = MyEnum.CUSTOM_ERROR.toString();`, so `CUSTOM_ERROR` is a compile-time constant","body":"You may use static as a workaround, like: <code>private static final String CUSTOM_ERROR = MyEnum.CUSTOM_ERROR.toString();</code>, so <code>CUSTOM_ERROR</code> is a compile-time constant"},{"owner":{"account_id":2085695,"reputation":1023,"user_id":1856744,"accept_rate":4,"display_name":"Stunner"},"score":0,"creation_date":1687523656,"post_id":76539660,"comment_id":134952782,"body_markdown":"Hey . I just checked its not working. because even the final variable will be evaluated at runtime.  you can check from your side too.","body":"Hey . I just checked its not working. because even the final variable will be evaluated at runtime.  you can check from your side too."}],"owner":{"account_id":2085695,"reputation":1023,"user_id":1856744,"accept_rate":4,"display_name":"Stunner"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687524128,"creation_date":1687519681,"question_id":76539660,"body_markdown":"I am using the `expectedExceptionsMessageRegExp` propery on the @Test annotation to test the exception message using enum but it is not working.  Does enum is supported ?\r\n\r\nBelow code deoesn&#39;t work.  Since the  error message is very long, i don&#39;t want to hardcode inline like `expectedExceptionsMessageRegExp = &quot;very long message&quot;` \r\n\r\n\r\n    @Test(description = &quot;Some description&quot;, expectedExceptions=CutomException.class,\r\n         expectedExceptionsMessageRegExp = MyEnum.CUSTOM_ERROR.toString())\r\n    {\r\n     //test case \r\n    \r\n    }\r\n\r\n\r\nAny idea how to use expectedExceptionsMessageRegExp with enum ?\r\n","title":"TestNG expectedExceptionsMessageRegExp using enum","body":"<p>I am using the <code>expectedExceptionsMessageRegExp</code> propery on the @Test annotation to test the exception message using enum but it is not working.  Does enum is supported ?</p>\n<p>Below code deoesn't work.  Since the  error message is very long, i don't want to hardcode inline like <code>expectedExceptionsMessageRegExp = &quot;very long message&quot;</code></p>\n<pre><code>@Test(description = &quot;Some description&quot;, expectedExceptions=CutomException.class,\n     expectedExceptionsMessageRegExp = MyEnum.CUSTOM_ERROR.toString())\n{\n //test case \n\n}\n</code></pre>\n<p>Any idea how to use expectedExceptionsMessageRegExp with enum ?</p>\n"},{"tags":["java","scala","serialization"],"comments":[{"owner":{"account_id":5131293,"reputation":21831,"user_id":4111404,"accept_rate":80,"display_name":"Luis Miguel Mej&#237;a Su&#225;rez"},"score":0,"creation_date":1687525011,"post_id":76540130,"comment_id":134953093,"body_markdown":"Is probably because the class itself is not Serializable. And to pass a parameter of the class, you have to pass the whole class.","body":"Is probably because the class itself is not Serializable. And to pass a parameter of the class, you have to pass the whole class."}],"owner":{"account_id":21163137,"reputation":420,"user_id":15560990,"display_name":"Dasph"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1687524087,"creation_date":1687523312,"question_id":76540130,"body_markdown":"I observed this behaviour in Scala, but I am assuming it&#39;s the same case in Java.\r\n\r\nUsing Beam as an example.\r\nIf you have \r\n\r\n    SomeClass(p: Pipeline, stringP: String){ \r\n    val foo: PCollection[String] = p.apply(&quot;TestSerialization&quot;, ParDo.of(new DummyTransform(stringP))\r\n    }\r\n\r\nIt would crash the pipeline with a `NonSerializableException` during runtime, but if you do\r\n\r\n    SomeClass(p: Pipeline, stringP: String){ \r\n    val foo: PCollection[String] = { \r\n        val serializedStringP = stringP \r\n        p.apply(&quot;TestSerialization&quot;, ParDo.of(new DummyTransform(serializedStringP)) \r\n      }\r\n    }\r\n\r\nit would succeed.\r\nHow come the original value of `stringP` is not serializable?","title":"Why aren&#39;t Scala/Java Class parameters Serializable","body":"<p>I observed this behaviour in Scala, but I am assuming it's the same case in Java.</p>\n<p>Using Beam as an example.\nIf you have</p>\n<pre><code>SomeClass(p: Pipeline, stringP: String){ \nval foo: PCollection[String] = p.apply(&quot;TestSerialization&quot;, ParDo.of(new DummyTransform(stringP))\n}\n</code></pre>\n<p>It would crash the pipeline with a <code>NonSerializableException</code> during runtime, but if you do</p>\n<pre><code>SomeClass(p: Pipeline, stringP: String){ \nval foo: PCollection[String] = { \n    val serializedStringP = stringP \n    p.apply(&quot;TestSerialization&quot;, ParDo.of(new DummyTransform(serializedStringP)) \n  }\n}\n</code></pre>\n<p>it would succeed.\nHow come the original value of <code>stringP</code> is not serializable?</p>\n"},{"tags":["java","spring","postgresql","spring-boot"],"comments":[{"owner":{"account_id":11288679,"reputation":923,"user_id":8278630,"display_name":"Farkhod Abdukodirov"},"score":0,"creation_date":1687605582,"post_id":76540224,"comment_id":134962242,"body_markdown":"What did you try to solve the problem, first provide your solution or at least some presumptions, some codes might be useful.","body":"What did you try to solve the problem, first provide your solution or at least some presumptions, some codes might be useful."}],"owner":{"account_id":28880540,"reputation":1,"user_id":22120106,"display_name":"Aditya VK"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687524010,"creation_date":1687524010,"question_id":76540224,"body_markdown":"I have a scenario where I have to maintain revision of whole data in the postgresql table. Initially the revision column start from 0 and is_latest_revision column will be true. There are around 120,000 records in the table and each time even if single record is updated/newly added/deleted whole table data need to be duplicated and revision column will be incremented to next value(1) and the new 120,000 records will have is_latest_revision as true. For old records revision value remains 0 but is_latest_revision will be false.\r\n\r\nIs there a efficient way to do this in java spring boot?\r\n\r\nI was thinking about findAll() and saveAll() methods from Jpa, but that would take time.","title":"Bulk duplicate records in table and reinsert in same table updating only 2 columns (maintaining revision for each edit)","body":"<p>I have a scenario where I have to maintain revision of whole data in the postgresql table. Initially the revision column start from 0 and is_latest_revision column will be true. There are around 120,000 records in the table and each time even if single record is updated/newly added/deleted whole table data need to be duplicated and revision column will be incremented to next value(1) and the new 120,000 records will have is_latest_revision as true. For old records revision value remains 0 but is_latest_revision will be false.</p>\n<p>Is there a efficient way to do this in java spring boot?</p>\n<p>I was thinking about findAll() and saveAll() methods from Jpa, but that would take time.</p>\n"},{"tags":["java","gradle","jaxb"],"owner":{"account_id":12718802,"reputation":127,"user_id":9239937,"display_name":"MedMahmoud"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687523735,"creation_date":1687523735,"question_id":76540189,"body_markdown":"I started to receive the following error in my java project which has dependencies to com.github.jacobono:gradle-jaxb-plugin:1.3.6:\r\n\r\n```\r\n   &gt; Could not find gradle-jaxb-plugin-1.3.6.jar (com.github.jacobono:gradle-jaxb-plugin:1.3.6).\r\n     Searched in the following locations:\r\n         https://jcenter.bintray.com/com/github/jacobono/gradle-jaxb-plugin/1.3.6/gradle-jaxb-plugin-1.3.6.jar\r\n   &gt; Could not find gradle-xsd-wsdl-slurping-1.1.2.jar (com.github.jacobono:gradle-xsd-wsdl-slurping:1.1.2).\r\n     Searched in the following locations:\r\n         https://jcenter.bintray.com/com/github/jacobono/gradle-xsd-wsdl-slurping/1.1.2/gradle-xsd-wsdl-slurping-1.1.2.jar\r\n```\r\nNot sure why this dependency is not found anymore, does anyone know how to solve this?\r\n\r\nany help will be appreciated.\r\n\r\nThank you\r\n\r\n","title":"Could not find gradle-jaxb-plugin-1.3.6.jar (com.github.jacobono:gradle-jaxb-plugin:1.3.6)","body":"<p>I started to receive the following error in my java project which has dependencies to com.github.jacobono:gradle-jaxb-plugin:1.3.6:</p>\n<pre><code>   &gt; Could not find gradle-jaxb-plugin-1.3.6.jar (com.github.jacobono:gradle-jaxb-plugin:1.3.6).\n     Searched in the following locations:\n         https://jcenter.bintray.com/com/github/jacobono/gradle-jaxb-plugin/1.3.6/gradle-jaxb-plugin-1.3.6.jar\n   &gt; Could not find gradle-xsd-wsdl-slurping-1.1.2.jar (com.github.jacobono:gradle-xsd-wsdl-slurping:1.1.2).\n     Searched in the following locations:\n         https://jcenter.bintray.com/com/github/jacobono/gradle-xsd-wsdl-slurping/1.1.2/gradle-xsd-wsdl-slurping-1.1.2.jar\n</code></pre>\n<p>Not sure why this dependency is not found anymore, does anyone know how to solve this?</p>\n<p>any help will be appreciated.</p>\n<p>Thank you</p>\n"},{"tags":["java","spring","spring-webflux","netty","webclient"],"comments":[{"owner":{"account_id":11818,"reputation":57413,"user_id":22982,"accept_rate":100,"display_name":"Brian Clozel"},"score":0,"creation_date":1687525255,"post_id":76540187,"comment_id":134953149,"body_markdown":"is it possible that your client is overwhelming the server with requests and that the server is closing connections because there are too many? Is there a rate limit on this API? Does changing the max connections setting helps to limit the number of concurrent connections to this server?","body":"is it possible that your client is overwhelming the server with requests and that the server is closing connections because there are too many? Is there a rate limit on this API? Does changing the max connections setting helps to limit the number of concurrent connections to this server?"},{"owner":{"account_id":19581210,"reputation":23,"user_id":14330235,"display_name":"morohon"},"score":0,"creation_date":1687851224,"post_id":76540187,"comment_id":134990578,"body_markdown":"@BrianClozel sorry for the long answer. Yes, this option is possible. Do you have any idea how this can be confirmed if there is no contact with the API developer?","body":"@BrianClozel sorry for the long answer. Yes, this option is possible. Do you have any idea how this can be confirmed if there is no contact with the API developer?"},{"owner":{"account_id":11818,"reputation":57413,"user_id":22982,"accept_rate":100,"display_name":"Brian Clozel"},"score":0,"creation_date":1687852148,"post_id":76540187,"comment_id":134990767,"body_markdown":"if you change the max connections configuration in the connection pool to limit the number of concurrent connections - and that this change makes the API calls work consistently, I think this proves it. Logging more information at the reactor netty level will only show connections being closed so you probably won&#39;t learn more.","body":"if you change the max connections configuration in the connection pool to limit the number of concurrent connections - and that this change makes the API calls work consistently, I think this proves it. Logging more information at the reactor netty level will only show connections being closed so you probably won&#39;t learn more."},{"owner":{"account_id":19581210,"reputation":23,"user_id":14330235,"display_name":"morohon"},"score":0,"creation_date":1696333159,"post_id":76540187,"comment_id":136136619,"body_markdown":"@BrianClozel I&#39;m sorry to bring this up again, but maybe you can give me some advice again.\nFor me, the SocketException error actually occurs because the remote server is closing the connection. But I have no way to influence this remote server and I would like to somehow correctly handle this error on my side. The ideal option for me is to add retry for such requests. But when using spring-retry or retryWhen, it seems that it is not possible to transfer control to the code responsible for retry. You don&#39;t know why this might be or how it can be solved?","body":"@BrianClozel I&#39;m sorry to bring this up again, but maybe you can give me some advice again. For me, the SocketException error actually occurs because the remote server is closing the connection. But I have no way to influence this remote server and I would like to somehow correctly handle this error on my side. The ideal option for me is to add retry for such requests. But when using spring-retry or retryWhen, it seems that it is not possible to transfer control to the code responsible for retry. You don&#39;t know why this might be or how it can be solved?"},{"owner":{"account_id":19581210,"reputation":23,"user_id":14330235,"display_name":"morohon"},"score":0,"creation_date":1696333327,"post_id":76540187,"comment_id":136136659,"body_markdown":"@BrianClozel The error in the log now looks something like this: https://i.imgur.com/1qZZudW.png","body":"@BrianClozel The error in the log now looks something like this: <a href=\"https://i.imgur.com/1qZZudW.png\" rel=\"nofollow noreferrer\">i.imgur.com/1qZZudW.png</a>"}],"owner":{"account_id":19581210,"reputation":23,"user_id":14330235,"display_name":"morohon"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":367,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687523722,"creation_date":1687523722,"question_id":76540187,"body_markdown":"I&#39;m using `org.springframework.boot:spring-boot-starter-webflux:2.6.9` and `WebClient` to make requests in **synchronous** mode (as a replacement for `RestTemplate`). When making a small number of requests through the `WebClient`, everything works fine, but as soon as the number of requests increases, then some of the requests start to get an error:\r\n\r\n    2023-06-23 15:03:50.603 WARN [] 45045 --- [reactor-http-] r.n.h.client.HttpClientConnect : [74630f62-1, L:/192.168.23.3:57614 - R:some-http-url/1.2.3.4:443] The connection observed an error    \r\n    java.net.SocketException: Connection reset\r\n        \tat java.base/sun.nio.ch.SocketChannelImpl.throwConnectionReset(SocketChannelImpl.java:394)\r\n        \tat java.base/sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:426)\r\n        \tat io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:258)\r\n        \tat io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)\r\n        \tat io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:350)\r\n        \tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)\r\n        \tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:722)\r\n        \tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)\r\n        \tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)\r\n        \tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)\r\n        \tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:986)\r\n        \tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n        \tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n        \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n    .........\r\n    Caused by: org.springframework.web.reactive.function.client.WebClientRequestException: Connection reset; nested exception is java.net.SocketException: Connection reset\r\n    \tat org.springframework.web.reactive.function.client.ExchangeFunctions$DefaultExchangeFunction.lambda$wrapException$9(ExchangeFunctions.java:141)\r\n    \tSuppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: \r\n    Error has been observed at the following site(s):\r\n    \t*__checkpoint ⇢ Request to GET https://some-http-url[DefaultWebClient]\r\n\r\nMy WebClient config looks like this:\r\n```java\r\nConnectionProvider provider = ConnectionProvider.builder(&quot;some-provider&quot;)\r\n        .maxConnections(properties.getMaxConnections())\r\n        .maxIdleTime(properties.getMaxIdleTime())\r\n        .maxLifeTime(properties.getMaxLifeTime())\r\n        .pendingAcquireTimeout(properties.getPendingAcquireTimeout())\r\n        .evictInBackground(properties.getEvictInBackground())\r\n        .build();\r\n\r\nHttpClient httpClient = HttpClient.create(provider)\r\n        .option(ChannelOption.CONNECT_TIMEOUT_MILLIS, 5000)\r\n        .responseTimeout(properties.getResponseTimeout())\r\n        .doOnConnected(conn -&gt; conn.addHandlerLast(new ReadTimeoutHandler(properties.getReadTimeout()))\r\n                .addHandlerLast(new WriteTimeoutHandler(properties.getWriteTimeout())));\r\n\r\nfinal ExchangeStrategies strategies = ExchangeStrategies.builder()\r\n        .codecs(codecs -&gt; codecs.defaultCodecs().maxInMemorySize((int) maxInMemorySize.toBytes()))\r\n        .build();\r\n\r\nWebClient.builder()\r\n        .exchangeStrategies(strategies)\r\n        .clientConnector(new ReactorClientHttpConnector(httpClient))\r\n        .baseUrl(properties.getUrl())\r\n        .filter(authExchangeFilterFunction)\r\n        .filter(logRequest())\r\n        .filter(logResponse())\r\n        .filter(ExchangeFilterFunction.ofResponseProcessor(errorHandlingProcessor()))\r\n        .build();\r\n```\r\nI tried changing the settings (max-connection, max-idle-time, max-life-time, etc...), but that didn&#39;t help.\r\n\r\nThe call to the API method itself looks like this:\r\n```java\r\nwebClient.get()\r\n        .uri(uriBuilder -&gt; uriBuilder.path(&quot;some-path/{param}&quot;).build(param))\r\n        .retrieve()\r\n        .bodyToMono(DataBuffer.class)\r\n        .&lt;file&gt;handle((dataBuffer, sink) -&gt; {\r\n                try {\r\n                        Unmarshaller unmarshaller = jc.createUnmarshaller();\r\n                        sink.next((file) unmarshaller.unmarshal(dataBuffer.asInputStream()));\r\n                } catch (Exception e) {\r\n                        sink.error(new CustomException(e.getMessage()));\r\n                } finally {\r\n                        DataBufferUtils.release(dataBuffer);\r\n                }\r\n        })\r\n        .block();\r\n```\r\nMaybe someone can explain why a connection reset can occur?\r\nA bit of context on increasing the number of requests:\r\nI use the rabbitmq listener in the application and when I have the listener running in single-threaded mode, then the requests are processed correctly. But when I raise the number of listeners to 3-5+, errors start to appear.","title":"Executing a WebClient request ends with an error connection reset","body":"<p>I'm using <code>org.springframework.boot:spring-boot-starter-webflux:2.6.9</code> and <code>WebClient</code> to make requests in <strong>synchronous</strong> mode (as a replacement for <code>RestTemplate</code>). When making a small number of requests through the <code>WebClient</code>, everything works fine, but as soon as the number of requests increases, then some of the requests start to get an error:</p>\n<pre><code>2023-06-23 15:03:50.603 WARN [] 45045 --- [reactor-http-] r.n.h.client.HttpClientConnect : [74630f62-1, L:/192.168.23.3:57614 - R:some-http-url/1.2.3.4:443] The connection observed an error    \njava.net.SocketException: Connection reset\n        at java.base/sun.nio.ch.SocketChannelImpl.throwConnectionReset(SocketChannelImpl.java:394)\n        at java.base/sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:426)\n        at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:258)\n        at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)\n        at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:350)\n        at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)\n        at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:722)\n        at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)\n        at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)\n        at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)\n        at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:986)\n        at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n        at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n        at java.base/java.lang.Thread.run(Thread.java:833)\n.........\nCaused by: org.springframework.web.reactive.function.client.WebClientRequestException: Connection reset; nested exception is java.net.SocketException: Connection reset\n    at org.springframework.web.reactive.function.client.ExchangeFunctions$DefaultExchangeFunction.lambda$wrapException$9(ExchangeFunctions.java:141)\n    Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: \nError has been observed at the following site(s):\n    *__checkpoint ⇢ Request to GET https://some-http-url[DefaultWebClient]\n</code></pre>\n<p>My WebClient config looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ConnectionProvider provider = ConnectionProvider.builder(&quot;some-provider&quot;)\n        .maxConnections(properties.getMaxConnections())\n        .maxIdleTime(properties.getMaxIdleTime())\n        .maxLifeTime(properties.getMaxLifeTime())\n        .pendingAcquireTimeout(properties.getPendingAcquireTimeout())\n        .evictInBackground(properties.getEvictInBackground())\n        .build();\n\nHttpClient httpClient = HttpClient.create(provider)\n        .option(ChannelOption.CONNECT_TIMEOUT_MILLIS, 5000)\n        .responseTimeout(properties.getResponseTimeout())\n        .doOnConnected(conn -&gt; conn.addHandlerLast(new ReadTimeoutHandler(properties.getReadTimeout()))\n                .addHandlerLast(new WriteTimeoutHandler(properties.getWriteTimeout())));\n\nfinal ExchangeStrategies strategies = ExchangeStrategies.builder()\n        .codecs(codecs -&gt; codecs.defaultCodecs().maxInMemorySize((int) maxInMemorySize.toBytes()))\n        .build();\n\nWebClient.builder()\n        .exchangeStrategies(strategies)\n        .clientConnector(new ReactorClientHttpConnector(httpClient))\n        .baseUrl(properties.getUrl())\n        .filter(authExchangeFilterFunction)\n        .filter(logRequest())\n        .filter(logResponse())\n        .filter(ExchangeFilterFunction.ofResponseProcessor(errorHandlingProcessor()))\n        .build();\n</code></pre>\n<p>I tried changing the settings (max-connection, max-idle-time, max-life-time, etc...), but that didn't help.</p>\n<p>The call to the API method itself looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>webClient.get()\n        .uri(uriBuilder -&gt; uriBuilder.path(&quot;some-path/{param}&quot;).build(param))\n        .retrieve()\n        .bodyToMono(DataBuffer.class)\n        .&lt;file&gt;handle((dataBuffer, sink) -&gt; {\n                try {\n                        Unmarshaller unmarshaller = jc.createUnmarshaller();\n                        sink.next((file) unmarshaller.unmarshal(dataBuffer.asInputStream()));\n                } catch (Exception e) {\n                        sink.error(new CustomException(e.getMessage()));\n                } finally {\n                        DataBufferUtils.release(dataBuffer);\n                }\n        })\n        .block();\n</code></pre>\n<p>Maybe someone can explain why a connection reset can occur?\nA bit of context on increasing the number of requests:\nI use the rabbitmq listener in the application and when I have the listener running in single-threaded mode, then the requests are processed correctly. But when I raise the number of listeners to 3-5+, errors start to appear.</p>\n"},{"tags":["java","android","flutter","firebase","sha1"],"answers":[{"tags":[],"owner":{"account_id":1238309,"reputation":6631,"user_id":1201441,"accept_rate":25,"display_name":"TejaDroid"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1518432619,"creation_date":1518432619,"answer_id":48744659,"question_id":48744322,"body_markdown":"I think you are doing mistake while generating the SHA-1 Key, as we know there already located **debug.keystore** for default keystore use, so when ever you fire the code for SHA-1 then there default keystore (**debug.keystore**) will use. \r\n\r\nso may be due to this reason you have every time same SHA-1.\r\n\r\nPlease follow this [link][1], here describe how to find the SHA-1 using Android Studio also inside android studio.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/34223470/1201441","title":"How to regenerate new SHA1 key for other projects","body":"<p>I think you are doing mistake while generating the SHA-1 Key, as we know there already located <strong>debug.keystore</strong> for default keystore use, so when ever you fire the code for SHA-1 then there default keystore (<strong>debug.keystore</strong>) will use. </p>\n\n<p>so may be due to this reason you have every time same SHA-1.</p>\n\n<p>Please follow this <a href=\"https://stackoverflow.com/a/34223470/1201441\">link</a>, here describe how to find the SHA-1 using Android Studio also inside android studio.</p>\n"}],"owner":{"account_id":12881409,"reputation":53,"user_id":9316330,"display_name":"danyRoyal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2798,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":48744659,"answer_count":1,"score":5,"last_activity_date":1687523419,"creation_date":1518431607,"question_id":48744322,"body_markdown":"I cannot link my android app project with firebase console. Because every time when I create a new project and generate an SHA-1 key, it generates same key for every project.\r\nI stuck in it and didn&#39;t find an answer. Please Help me","title":"How to regenerate new SHA1 key for other projects","body":"<p>I cannot link my android app project with firebase console. Because every time when I create a new project and generate an SHA-1 key, it generates same key for every project.\nI stuck in it and didn't find an answer. Please Help me</p>\n"},{"tags":["java","quarkus","gradle-plugin","quarkus-rest-client"],"comments":[{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1659066791,"post_id":73160326,"comment_id":129211857,"body_markdown":"Have you tried with Quarkus version 2.11.1?","body":"Have you tried with Quarkus version 2.11.1?"},{"owner":{"account_id":24483620,"reputation":5,"user_id":18401646,"display_name":"user18401646"},"score":0,"creation_date":1659107439,"post_id":73160326,"comment_id":129222652,"body_markdown":"I have tried, getting same error","body":"I have tried, getting same error"}],"answers":[{"tags":[],"owner":{"account_id":26087286,"reputation":26,"user_id":19784649,"display_name":"Clodoaldo Souza"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660946110,"creation_date":1660736084,"answer_id":73387751,"question_id":73160326,"body_markdown":"Sorry for delay, my friend!!! In my case, I changed the environment variables of JAVA_HOME and JAVA_JDK from Java 8 to JAVA 11.\r\n\r\n","title":"could not resolve all files for configuration &#39;:classpath&#39;. Could not resolve io.quarkus:gradle-application-plugin:2.10.2.Final","body":"<p>Sorry for delay, my friend!!! In my case, I changed the environment variables of JAVA_HOME and JAVA_JDK from Java 8 to JAVA 11.</p>\n"},{"tags":[],"owner":{"account_id":8029669,"reputation":1291,"user_id":6055194,"display_name":"Eugene Babich"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687523407,"creation_date":1687523407,"answer_id":76540145,"question_id":73160326,"body_markdown":"Android Studio Gradle settings change helped me.\r\n\r\n    Menu File -&gt; Settings (on macOS, Android Studio -&gt; Preferences) -&gt; \r\n    Build, Execution, Deployment -&gt; Build Tools -&gt; Gradle\r\n\r\nIn right section of window find your project and select it.\r\n\r\nIn menu **Gradle JDK** select **JAVA 11** version .","title":"could not resolve all files for configuration &#39;:classpath&#39;. Could not resolve io.quarkus:gradle-application-plugin:2.10.2.Final","body":"<p>Android Studio Gradle settings change helped me.</p>\n<pre><code>Menu File -&gt; Settings (on macOS, Android Studio -&gt; Preferences) -&gt; \nBuild, Execution, Deployment -&gt; Build Tools -&gt; Gradle\n</code></pre>\n<p>In right section of window find your project and select it.</p>\n<p>In menu <strong>Gradle JDK</strong> select <strong>JAVA 11</strong> version .</p>\n"}],"owner":{"account_id":24483620,"reputation":5,"user_id":18401646,"display_name":"user18401646"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3317,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73387751,"answer_count":2,"score":0,"last_activity_date":1687523407,"creation_date":1659052836,"question_id":73160326,"body_markdown":"I am trying to deploy quarkus application in AWS, I am getting build failed with below error. Can someone help on this? Gradle version I am using is 7.5\r\n\r\nThanks\r\n\r\nBelow is my build.gradle file\r\n\r\n\r\n    plugins {\r\n        id &#39;java&#39;\r\n        id &#39;io.quarkus&#39;\r\n    }\r\n    \r\n    dependencies {\r\n        implementation enforcedPlatform(&quot;${quarkusPlatformGroupId}:${quarkusPlatformArtifactId}:${quarkusPlatformVersion}&quot;)\r\n        implementation &#39;io.quarkus:quarkus-arc&#39;\r\n        implementation &#39;io.quarkus:quarkus-resteasy-jackson&#39;\r\n        implementation &#39;io.quarkus:quarkus-resteasy&#39;\r\n        implementation &#39;io.quarkus:quarkus-rest-client&#39;\r\n    \r\n    }\r\n    \r\n    group &#39;test.quarkus&#39;\r\n    version &#39;2.10&#39;\r\n    \r\n    java {\r\n        sourceCompatibility = JavaVersion.VERSION_11\r\n        targetCompatibility = JavaVersion.VERSION_11\r\n    }\r\n    \r\n    compileJava {\r\n        options.encoding = &#39;UTF-8&#39;\r\n        options.compilerArgs &lt;&lt; &#39;-parameters&#39;\r\n    }\r\n    \r\n    compileTestJava {\r\n        options.encoding = &#39;UTF-8&#39;\r\n    }\r\n\r\n    \r\n  \r\n    \r\n    **\r\n\r\n&gt; Below is the error.\r\n\r\n**\r\n    \r\n         \r\n\r\n&gt;  &gt; Could not resolve io.quarkus:gradle-application-plugin:2.10.2.Final.\r\n&gt;                  Required by:\r\n&gt;                      project : &gt; io.quarkus:io.quarkus.gradle.plugin:2.10.2.Final\r\n&gt;                   &gt; No matching variant of io.quarkus:gradle-application-plugin:2.10.2.Final was found. The\r\n&gt; consumer was configured to find a runtime of a library compatible with\r\n&gt; Java 8, packaged as a jar, and its dependencies declared externally,\r\n&gt; as well as attribute &#39;org.gradle.plugin.api-version&#39; with value &#39;7.5&#39;\r\n&gt; but:\r\n&gt;                       - Variant &#39;apiElements&#39; capability io.quarkus:gradle-application-plugin:2.10.2.Final declares a library,\r\n&gt; packaged as a jar, and its dependencies declared externally:\r\n&gt;                           - Incompatible because this component declares an API of a component compatible with Java 11 and the\r\n&gt; consumer needed a runtime of a component compatible with Java 8\r\n&gt;                           - Other compatible attribute:\r\n&gt;                               - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.5&#39;)\r\n&gt;                       - Variant &#39;javadocElements&#39; capability io.quarkus:gradle-application-plugin:2.10.2.Final declares a runtime\r\n&gt; of a component, and its dependencies declared externally:\r\n&gt;                           - Incompatible because this component declares documentation and the consumer needed a library\r\n&gt;                           - Other compatible attributes:\r\n&gt;                               - Doesn&#39;t say anything about its target Java version (required compatibility with Java 8)\r\n&gt;                               - Doesn&#39;t say anything about its elements (required them packaged as a jar)\r\n&gt;                               - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.5&#39;)\r\n&gt;                       - Variant &#39;runtimeElements&#39; capability io.quarkus:gradle-application-plugin:2.10.2.Final declares a runtime\r\n&gt; of a library, packaged as a jar, and its dependencies declared\r\n&gt; externally:\r\n&gt;                           - Incompatible because this component declares a component compatible with Java 11 and the consumer needed a\r\n&gt; component compatible with Java 8\r\n&gt;                           - Other compatible attribute:\r\n&gt;                               - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.5&#39;)\r\n&gt;                       - Variant &#39;sourcesElements&#39; capability io.quarkus:gradle-application-plugin:2.10.2.Final declares a runtime\r\n&gt; of a component, and its dependencies declared externally:\r\n&gt;                           - Incompatible because this component declares documentation and the consumer needed a library\r\n&gt;                           - Other compatible attributes:\r\n&gt;                               - Doesn&#39;t say anything about its target Java version (required compatibility with Java 8)\r\n&gt;                               - Doesn&#39;t say anything about its elements (required them packaged as a jar)\r\n&gt;                               - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.5&#39;)\r\n\r\n","title":"could not resolve all files for configuration &#39;:classpath&#39;. Could not resolve io.quarkus:gradle-application-plugin:2.10.2.Final","body":"<p>I am trying to deploy quarkus application in AWS, I am getting build failed with below error. Can someone help on this? Gradle version I am using is 7.5</p>\n<p>Thanks</p>\n<p>Below is my build.gradle file</p>\n<pre><code>plugins {\n    id 'java'\n    id 'io.quarkus'\n}\n\ndependencies {\n    implementation enforcedPlatform(&quot;${quarkusPlatformGroupId}:${quarkusPlatformArtifactId}:${quarkusPlatformVersion}&quot;)\n    implementation 'io.quarkus:quarkus-arc'\n    implementation 'io.quarkus:quarkus-resteasy-jackson'\n    implementation 'io.quarkus:quarkus-resteasy'\n    implementation 'io.quarkus:quarkus-rest-client'\n\n}\n\ngroup 'test.quarkus'\nversion '2.10'\n\njava {\n    sourceCompatibility = JavaVersion.VERSION_11\n    targetCompatibility = JavaVersion.VERSION_11\n}\n\ncompileJava {\n    options.encoding = 'UTF-8'\n    options.compilerArgs &lt;&lt; '-parameters'\n}\n\ncompileTestJava {\n    options.encoding = 'UTF-8'\n}\n\n\n\n\n**\n</code></pre>\n<blockquote>\n<p>Below is the error.</p>\n</blockquote>\n<p>**</p>\n<blockquote>\n<blockquote>\n<p>Could not resolve io.quarkus:gradle-application-plugin:2.10.2.Final.\nRequired by:\nproject : &gt; io.quarkus:io.quarkus.gradle.plugin:2.10.2.Final\n&gt; No matching variant of io.quarkus:gradle-application-plugin:2.10.2.Final was found. The\nconsumer was configured to find a runtime of a library compatible with\nJava 8, packaged as a jar, and its dependencies declared externally,\nas well as attribute 'org.gradle.plugin.api-version' with value '7.5'\nbut:\n- Variant 'apiElements' capability io.quarkus:gradle-application-plugin:2.10.2.Final declares a library,\npackaged as a jar, and its dependencies declared externally:\n- Incompatible because this component declares an API of a component compatible with Java 11 and the\nconsumer needed a runtime of a component compatible with Java 8\n- Other compatible attribute:\n- Doesn't say anything about org.gradle.plugin.api-version (required '7.5')\n- Variant 'javadocElements' capability io.quarkus:gradle-application-plugin:2.10.2.Final declares a runtime\nof a component, and its dependencies declared externally:\n- Incompatible because this component declares documentation and the consumer needed a library\n- Other compatible attributes:\n- Doesn't say anything about its target Java version (required compatibility with Java 8)\n- Doesn't say anything about its elements (required them packaged as a jar)\n- Doesn't say anything about org.gradle.plugin.api-version (required '7.5')\n- Variant 'runtimeElements' capability io.quarkus:gradle-application-plugin:2.10.2.Final declares a runtime\nof a library, packaged as a jar, and its dependencies declared\nexternally:\n- Incompatible because this component declares a component compatible with Java 11 and the consumer needed a\ncomponent compatible with Java 8\n- Other compatible attribute:\n- Doesn't say anything about org.gradle.plugin.api-version (required '7.5')\n- Variant 'sourcesElements' capability io.quarkus:gradle-application-plugin:2.10.2.Final declares a runtime\nof a component, and its dependencies declared externally:\n- Incompatible because this component declares documentation and the consumer needed a library\n- Other compatible attributes:\n- Doesn't say anything about its target Java version (required compatibility with Java 8)\n- Doesn't say anything about its elements (required them packaged as a jar)\n- Doesn't say anything about org.gradle.plugin.api-version (required '7.5')</p>\n</blockquote>\n</blockquote>\n"},{"tags":["java","spring","database","jpa","querydsl"],"owner":{"account_id":28858520,"reputation":1,"user_id":22102822,"display_name":"pia2011"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687523322,"creation_date":1687522203,"question_id":76539983,"body_markdown":"Day and Schedule have a 1 to N relationship. (oneToMany)\r\n\r\nIt works. However, when the Schedule table does not exist at all, ScheduleSummary with all fields filled with null will be included in schedules one by one. like this \r\n\r\n[Payload][1]\r\n\r\nI want to make an empty list enter when schedule does not exist. Should I handle this in findDayScheduleListByTripId()? Or should I process it through separate logic in Service, Controller or DTO?\r\n\r\nI tried CaseBuilder. But it doesn&#39;t works in transform() :(\r\n\r\n    @Getter \r\n    public class DayScheduleDetail { \r\n        private Long dayId; \r\n        private Long tripId; \r\n        private LocalDate date; \r\n        private DayColorDto dayColor; \r\n        private List&lt;ScheduleSummary&gt; schedules\r\n    \r\n        @QueryProjection\r\n        public DayScheduleDetail(Long dayId, Long tripId, LocalDate date, DayColor dayColor, List&lt;ScheduleSummary&gt; scheduleSummaries) {\r\n            this.dayId = dayId;\r\n            this.tripId = tripId;\r\n            this.date = date;\r\n            this.dayColor = DayColorDto.of(dayColor.name(), dayColor.getValue());\r\n            this.schedules = scheduleSummaries;\r\n        }\r\n    }\r\n\r\n    \r\n    @Getter \r\n    public class ScheduleSummary { \r\n        private Long scheduleId; \r\n        private String title; \r\n        private String placeName; \r\n        private String placeId; \r\n        private Coordinate coordinate;\r\n    \r\n        @QueryProjection\r\n        public ScheduleSummary(Long scheduleId, String title, String placeName,String placeId, double latitude, double longitude) {\r\n            this.scheduleId = scheduleId;\r\n            this.title = title;\r\n            this.placeName = placeName;\r\n            this.placeId = placeId;\r\n            this.coordinate = Coordinate.from(latitude, longitude);\r\n        }\r\n    }\r\n\r\n    public List&lt;DayScheduleDetail&gt; findDayScheduleListByTripId(Long tripId){\r\n    \r\n        return query.from(day)\r\n                .leftJoin(day.schedules, schedule)\r\n                .where(day.trip.id.eq(tripId))\r\n                .orderBy(day.tripDate.asc(), schedule.scheduleIndex.value.asc())\r\n                .transform(\r\n                        groupBy(day.id).list(new QDayScheduleDetail(\r\n                                day.id,\r\n                                day.trip.id,\r\n                                day.tripDate,\r\n                                day.dayColor,\r\n                                list(new QScheduleSummary(\r\n                                        schedule.id,\r\n                                        schedule.scheduleTitle.value,\r\n                                        schedule.place.placeName,\r\n                                        schedule.place.placeId,\r\n                                        schedule.place.coordinate.latitude,\r\n                                        schedule.place.coordinate.longitude\r\n                                ))\r\n                        ))\r\n                );\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rRsGe.png","title":"QueryDSL result mapping","body":"<p>Day and Schedule have a 1 to N relationship. (oneToMany)</p>\n<p>It works. However, when the Schedule table does not exist at all, ScheduleSummary with all fields filled with null will be included in schedules one by one. like this</p>\n<p><a href=\"https://i.stack.imgur.com/rRsGe.png\" rel=\"nofollow noreferrer\">Payload</a></p>\n<p>I want to make an empty list enter when schedule does not exist. Should I handle this in findDayScheduleListByTripId()? Or should I process it through separate logic in Service, Controller or DTO?</p>\n<p>I tried CaseBuilder. But it doesn't works in transform() :(</p>\n<pre><code>@Getter \npublic class DayScheduleDetail { \n    private Long dayId; \n    private Long tripId; \n    private LocalDate date; \n    private DayColorDto dayColor; \n    private List&lt;ScheduleSummary&gt; schedules\n\n    @QueryProjection\n    public DayScheduleDetail(Long dayId, Long tripId, LocalDate date, DayColor dayColor, List&lt;ScheduleSummary&gt; scheduleSummaries) {\n        this.dayId = dayId;\n        this.tripId = tripId;\n        this.date = date;\n        this.dayColor = DayColorDto.of(dayColor.name(), dayColor.getValue());\n        this.schedules = scheduleSummaries;\n    }\n}\n\n\n@Getter \npublic class ScheduleSummary { \n    private Long scheduleId; \n    private String title; \n    private String placeName; \n    private String placeId; \n    private Coordinate coordinate;\n\n    @QueryProjection\n    public ScheduleSummary(Long scheduleId, String title, String placeName,String placeId, double latitude, double longitude) {\n        this.scheduleId = scheduleId;\n        this.title = title;\n        this.placeName = placeName;\n        this.placeId = placeId;\n        this.coordinate = Coordinate.from(latitude, longitude);\n    }\n}\n\npublic List&lt;DayScheduleDetail&gt; findDayScheduleListByTripId(Long tripId){\n\n    return query.from(day)\n            .leftJoin(day.schedules, schedule)\n            .where(day.trip.id.eq(tripId))\n            .orderBy(day.tripDate.asc(), schedule.scheduleIndex.value.asc())\n            .transform(\n                    groupBy(day.id).list(new QDayScheduleDetail(\n                            day.id,\n                            day.trip.id,\n                            day.tripDate,\n                            day.dayColor,\n                            list(new QScheduleSummary(\n                                    schedule.id,\n                                    schedule.scheduleTitle.value,\n                                    schedule.place.placeName,\n                                    schedule.place.placeId,\n                                    schedule.place.coordinate.latitude,\n                                    schedule.place.coordinate.longitude\n                            ))\n                    ))\n            );\n}\n</code></pre>\n"},{"tags":["java","inner-classes"],"comments":[{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":0,"creation_date":1687519312,"post_id":76539562,"comment_id":134951780,"body_markdown":"Why use an inner class? Why not have a class in its own .java file?","body":"Why use an inner class? Why not have a class in its own .java file?"},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1687519424,"post_id":76539562,"comment_id":134951801,"body_markdown":"In addition, why don&#39;t you use `Map&lt;Integer, B&gt;`, instead of intermediate pair?","body":"In addition, why don&#39;t you use <code>Map&lt;Integer, B&gt;</code>, instead of intermediate pair?"},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1687519489,"post_id":76539562,"comment_id":134951815,"body_markdown":"You would be better served to use a nested static class than an inner class (and if you&#39;re using a recent Java version, use a record, not a normal class).","body":"You would be better served to use a nested static class than an inner class (and if you&#39;re using a recent Java version, use a record, not a normal class)."},{"owner":{"account_id":397984,"reputation":535,"user_id":762421,"accept_rate":36,"display_name":"user762421"},"score":0,"creation_date":1687519877,"post_id":76539562,"comment_id":134951899,"body_markdown":"@DevilsHnd - I don&#39;t think anyone else be using this class in our project. This is the limited use case we have. So want to keep the access of it limited within class A","body":"@DevilsHnd - I don&#39;t think anyone else be using this class in our project. This is the limited use case we have. So want to keep the access of it limited within class A"},{"owner":{"account_id":397984,"reputation":535,"user_id":762421,"accept_rate":36,"display_name":"user762421"},"score":0,"creation_date":1687520116,"post_id":76539562,"comment_id":134951955,"body_markdown":"@Chaosfire There will be some additional logic I will be putting in stop method based on the current time which will be use to populate another field of class B. This is WIP, but yeah that&#39;s the reason.","body":"@Chaosfire There will be some additional logic I will be putting in stop method based on the current time which will be use to populate another field of class B. This is WIP, but yeah that&#39;s the reason."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1687522379,"post_id":76539562,"comment_id":134952470,"body_markdown":"Not to be too pedantic here, but access  level modifiers, such as &quot;private&quot; do not represent a &quot;scope&quot; in Java.","body":"Not to be too pedantic here, but access  level modifiers, such as &quot;private&quot; do not represent a &quot;scope&quot; in Java."},{"owner":{"account_id":397984,"reputation":535,"user_id":762421,"accept_rate":36,"display_name":"user762421"},"score":0,"creation_date":1687523264,"post_id":76539562,"comment_id":134952677,"body_markdown":"@HovercraftFullOfEels - thanks, corrected it.","body":"@HovercraftFullOfEels - thanks, corrected it."},{"owner":{"account_id":397984,"reputation":535,"user_id":762421,"accept_rate":36,"display_name":"user762421"},"score":0,"creation_date":1687523398,"post_id":76539562,"comment_id":134952713,"body_markdown":"@MarkRotteveel: something like this right within class A?  \n\nprivate record B (String name1, String name2) {}","body":"@MarkRotteveel: something like this right within class A?    private record B (String name1, String name2) {}"}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687523281,"creation_date":1687522367,"answer_id":76540014,"question_id":76539562,"body_markdown":"&gt; Any other recommendations on how to do it?\r\n\r\nPresuming I understand the issue, if you want to return a class then it&#39;s existence must be known so the recipient can access the elements.  Even if it is passed as a simple object, the only useful method would be `toString()` since to access the individual elements you must first cast the Object to the class in question.\r\n\r\nAs far as using an inner class, why not use a `record` (introduced in Java 14)?  It is a simple way to create an immutable class.\r\n- you can access the values directly\r\n- you can use getters.\r\n- it has default `constructor` and `toString()` (`toString` can be overridden if you like)\r\n```\r\nrecord Pair(String v1, String v2) {}\r\nPair v = new Pair(&quot;ABC&quot;, &quot;DEF&quot;);\r\nSystem.out.println(v);       // toString\r\nSystem.out.println(v.v1());  // getter\r\nSystem.out.println(v.v2);  // direct access\r\n```\r\nprints\r\n```\r\nPair[v1=ABC, v2=DEF]\r\nABC\r\nDEF\r\n```\r\nTo override `toString` just put the standard definition between the `{}`","title":"Inner classes in Java with private access","body":"<blockquote>\n<p>Any other recommendations on how to do it?</p>\n</blockquote>\n<p>Presuming I understand the issue, if you want to return a class then it's existence must be known so the recipient can access the elements.  Even if it is passed as a simple object, the only useful method would be <code>toString()</code> since to access the individual elements you must first cast the Object to the class in question.</p>\n<p>As far as using an inner class, why not use a <code>record</code> (introduced in Java 14)?  It is a simple way to create an immutable class.</p>\n<ul>\n<li>you can access the values directly</li>\n<li>you can use getters.</li>\n<li>it has default <code>constructor</code> and <code>toString()</code> (<code>toString</code> can be overridden if you like)</li>\n</ul>\n<pre><code>record Pair(String v1, String v2) {}\nPair v = new Pair(&quot;ABC&quot;, &quot;DEF&quot;);\nSystem.out.println(v);       // toString\nSystem.out.println(v.v1());  // getter\nSystem.out.println(v.v2);  // direct access\n</code></pre>\n<p>prints</p>\n<pre><code>Pair[v1=ABC, v2=DEF]\nABC\nDEF\n</code></pre>\n<p>To override <code>toString</code> just put the standard definition between the <code>{}</code></p>\n"}],"owner":{"account_id":397984,"reputation":535,"user_id":762421,"accept_rate":36,"display_name":"user762421"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76540014,"answer_count":1,"score":0,"last_activity_date":1687523281,"creation_date":1687518873,"question_id":76539562,"body_markdown":"I have an existing class as below:\r\n\r\n    public class A {\r\n\r\n        private Map&lt;Integer, String&gt; map = new HashMap();\r\n        \r\n        public class B{\r\n            private String name;\r\n\r\n            public B(String name) {\r\n                this.name=name;\r\n            }\r\n\r\n            //name getter\r\n        }\r\n\r\n        public void start() {\r\n            map.put(1, &quot;One&quot;); // example implementation\r\n        }\r\n\r\n        public B stop(int val) {\r\n             return new B(map.get(val)); // example implementation\r\n        }\r\n    \r\n    }\r\n\r\nNow I want to modify class B to return two names i.e. name1 and name2 and want to store a pair of values in the HashMap as below:\r\n\r\n    public class A {\r\n    \r\n            private Map&lt;Integer, String&gt; map = new HashMap();\r\n            \r\n            public class B{\r\n                private String name1;\r\n                private String name2;\r\n    \r\n                public B(String name1, String name2) {\r\n                    this.name1=name1;\r\n                    this.name2=name2;\r\n                }\r\n    \r\n                // getters for name1 and name2\r\n            }\r\n    \r\n            public void start() {\r\n                Pair&lt;String, String&gt; pair = new Pair(&quot;One&quot;, &quot;Una&quot;);\r\n                map.put(1, pair);\r\n            }\r\n    \r\n            public B stop(int val) {\r\n                 if(map.containsKey(val)) {\r\n                    return new B(map.get(val).getKey(), map.get(val).getValue());\r\n                 }\r\n                 return null;\r\n            }\r\n        \r\n        }\r\n\r\nNow instead of using Pair I want to use a custom class object. I am new to inner classes in Java. What&#39;s the best way to create a inner class given that it would be used to store some set of values in HashMap for internal processing of class A and shouldn&#39;t be exposed outside of class A? Any other recommendations on how to do it?","title":"Inner classes in Java with private access","body":"<p>I have an existing class as below:</p>\n<pre><code>public class A {\n\n    private Map&lt;Integer, String&gt; map = new HashMap();\n    \n    public class B{\n        private String name;\n\n        public B(String name) {\n            this.name=name;\n        }\n\n        //name getter\n    }\n\n    public void start() {\n        map.put(1, &quot;One&quot;); // example implementation\n    }\n\n    public B stop(int val) {\n         return new B(map.get(val)); // example implementation\n    }\n\n}\n</code></pre>\n<p>Now I want to modify class B to return two names i.e. name1 and name2 and want to store a pair of values in the HashMap as below:</p>\n<pre><code>public class A {\n\n        private Map&lt;Integer, String&gt; map = new HashMap();\n        \n        public class B{\n            private String name1;\n            private String name2;\n\n            public B(String name1, String name2) {\n                this.name1=name1;\n                this.name2=name2;\n            }\n\n            // getters for name1 and name2\n        }\n\n        public void start() {\n            Pair&lt;String, String&gt; pair = new Pair(&quot;One&quot;, &quot;Una&quot;);\n            map.put(1, pair);\n        }\n\n        public B stop(int val) {\n             if(map.containsKey(val)) {\n                return new B(map.get(val).getKey(), map.get(val).getValue());\n             }\n             return null;\n        }\n    \n    }\n</code></pre>\n<p>Now instead of using Pair I want to use a custom class object. I am new to inner classes in Java. What's the best way to create a inner class given that it would be used to store some set of values in HashMap for internal processing of class A and shouldn't be exposed outside of class A? Any other recommendations on how to do it?</p>\n"},{"tags":["java","generics","casting","compilation","runtime"],"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":3,"creation_date":1687459239,"post_id":76534508,"comment_id":134943537,"body_markdown":"I just noticed that the question in your title is different from the question in your text. Which one did you mean to ask? Please edit your question to clarify.","body":"I just noticed that the question in your title is different from the question in your text. Which one did you mean to ask? Please edit your question to clarify."}],"owner":{"account_id":28875623,"reputation":9,"user_id":22116226,"display_name":"The AppeaRare"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1687522922,"creation_date":1687456190,"question_id":76534508,"body_markdown":"When writing:\r\n\r\n    LinkedList&lt;Dog&gt; dogList = (LinkedList&lt;Dog&gt;)(Object)(new LinkedList&lt;Car&gt;());\r\n\r\nI get no ClassCastException, as opposed to just writing:\r\n\r\n    Dog dog = (Dog)(Object)(new Car());\r\n\r\nWhy is there a difference? (what happens behind the scenes?)\r\n\r\nI assume it has something to do with java&#39;s generics mechanism.","title":"What happens behind the scenes when the following line is running\\compiling in java: (LinkedList&lt;Dog&gt;)(Object)(new LinkedList&lt;Car&gt;());?","body":"<p>When writing:</p>\n<pre><code>LinkedList&lt;Dog&gt; dogList = (LinkedList&lt;Dog&gt;)(Object)(new LinkedList&lt;Car&gt;());\n</code></pre>\n<p>I get no ClassCastException, as opposed to just writing:</p>\n<pre><code>Dog dog = (Dog)(Object)(new Car());\n</code></pre>\n<p>Why is there a difference? (what happens behind the scenes?)</p>\n<p>I assume it has something to do with java's generics mechanism.</p>\n"},{"tags":["java","android","eclipse"],"answers":[{"tags":[],"owner":{"account_id":319542,"reputation":23865,"user_id":637362,"accept_rate":70,"display_name":"Vineet Shukla"},"down_vote_count":0,"up_vote_count":108,"is_accepted":true,"score":108,"last_activity_date":1672989549,"creation_date":1344071485,"answer_id":11807360,"question_id":11807354,"body_markdown":"Just execute this code: divide by zero\r\n\r\nUpdate: Also can try this\r\nCreate a method,\r\n\r\n    public void stackOverflow() {\r\n        this.stackOverflow();\r\n    }\r\nAnd call this somewhere/buttonClick\r\n\r\nOR simply throw an uncaught exception\r\n\r\n    throw new RuntimeException(&quot;This is a crash&quot;);\r\n\r\nBingo!","title":"How to crash an Android app programmatically?","body":"<p>Just execute this code: divide by zero</p>\n<p>Update: Also can try this\nCreate a method,</p>\n<pre><code>public void stackOverflow() {\n    this.stackOverflow();\n}\n</code></pre>\n<p>And call this somewhere/buttonClick</p>\n<p>OR simply throw an uncaught exception</p>\n<pre><code>throw new RuntimeException(&quot;This is a crash&quot;);\n</code></pre>\n<p>Bingo!</p>\n"},{"tags":[],"owner":{"account_id":304968,"reputation":56727,"user_id":614807,"accept_rate":73,"display_name":"Chirag"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1346880643,"creation_date":1344071546,"answer_id":11807367,"question_id":11807354,"body_markdown":"    \r\n\r\n&gt; Don&#39;t declare activity in the Android Manifest . \r\n\r\n","title":"How to crash an Android app programmatically?","body":"<blockquote>\n  <p>Don't declare activity in the Android Manifest . </p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":251969,"reputation":13463,"user_id":529691,"display_name":"JoxTraex"},"down_vote_count":7,"up_vote_count":39,"is_accepted":false,"score":32,"last_activity_date":1611720354,"creation_date":1344071750,"answer_id":11807383,"question_id":11807354,"body_markdown":" 1. Access a view that is not defined.  \r\n 2. Access the first element of an empty list without checking.  \r\n 3. Divide by Zero. \r\n 4. Throw the device out the window.  \r\n 5. Submerge the device in water.","title":"How to crash an Android app programmatically?","body":"<ol>\n<li>Access a view that is not defined.</li>\n<li>Access the first element of an empty list without checking.</li>\n<li>Divide by Zero.</li>\n<li>Throw the device out the window.</li>\n<li>Submerge the device in water.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1359879,"reputation":9491,"user_id":1297445,"accept_rate":63,"display_name":"Luke Taylor"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1344071809,"creation_date":1344071809,"answer_id":11807391,"question_id":11807354,"body_markdown":"You could try a Null Pointer exception.\r\n\r\n    Integer i = null;\r\n\r\nThen invoke any method on the object.\r\n\r\n    i.byteValue();\r\n\r\nInvoking a method on an object that hasn&#39;t been initialized will crash the app.","title":"How to crash an Android app programmatically?","body":"<p>You could try a Null Pointer exception.</p>\n\n<pre><code>Integer i = null;\n</code></pre>\n\n<p>Then invoke any method on the object.</p>\n\n<pre><code>i.byteValue();\n</code></pre>\n\n<p>Invoking a method on an object that hasn't been initialized will crash the app.</p>\n"},{"tags":[],"owner":{"account_id":1355206,"reputation":33312,"user_id":1293744,"accept_rate":44,"display_name":"Kumar Vivek Mitra"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1344076137,"creation_date":1344072154,"answer_id":11807428,"question_id":11807354,"body_markdown":"A very simple approach... and is **very important to understand that why it happened.**\r\n\r\nTry **initiating a variable** in `onCreate()` before the `setContentView()` method, then use it to call a method or variable or try registering it to some listener.. \r\n\r\n**Eg:**\r\n\r\n\r\n    Button b;\r\n    \r\n    public void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n    \r\n            b = (Button)findViewById(R.id.butt);\r\n            b.setOnClickListener(new OnClickListener() {\r\n\t\t\t\r\n\t\t\t@Override\r\n\t\t\tpublic void onClick(View arg0) {\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t});\r\n            setContentView(R.layout.main);\r\n            \r\n            \r\n        }\r\n\r\n\r\nThis crashed, because **before** `setContentView()` **none of the components/view in the main.xml layout got their ids.**","title":"How to crash an Android app programmatically?","body":"<p>A very simple approach... and is <strong>very important to understand that why it happened.</strong></p>\n\n<p>Try <strong>initiating a variable</strong> in <code>onCreate()</code> before the <code>setContentView()</code> method, then use it to call a method or variable or try registering it to some listener.. </p>\n\n<p><strong>Eg:</strong></p>\n\n<pre><code>Button b;\n\npublic void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        b = (Button)findViewById(R.id.butt);\n        b.setOnClickListener(new OnClickListener() {\n\n        @Override\n        public void onClick(View arg0) {\n\n\n        }\n    });\n        setContentView(R.layout.main);\n\n\n    }\n</code></pre>\n\n<p>This crashed, because <strong>before</strong> <code>setContentView()</code> <strong>none of the components/view in the main.xml layout got their ids.</strong></p>\n"},{"tags":[],"owner":{"account_id":1855209,"reputation":346,"user_id":1680951,"accept_rate":62,"display_name":"plop"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1398354926,"creation_date":1398354926,"answer_id":23273909,"question_id":11807354,"body_markdown":"Most simple I know : throw null. \r\n\r\nYou can&#39;t throw null, so a NullPointerException is raised.\r\n\r\n    throw null;","title":"How to crash an Android app programmatically?","body":"<p>Most simple I know : throw null. </p>\n\n<p>You can't throw null, so a NullPointerException is raised.</p>\n\n<pre><code>throw null;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5089552,"reputation":1,"user_id":4083044,"display_name":"Mayur Garg"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1420544652,"creation_date":1420544652,"answer_id":27797969,"question_id":11807354,"body_markdown":"Use the following code:\r\n\r\n    String xyz=null;\r\n    system.out.println(xyz);","title":"How to crash an Android app programmatically?","body":"<p>Use the following code:</p>\n\n<pre><code>String xyz=null;\nsystem.out.println(xyz);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4271998,"reputation":96,"user_id":3493613,"display_name":"FaBioInsolia"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1422029054,"creation_date":1422029054,"answer_id":28113892,"question_id":11807354,"body_markdown":"Simply create in your main.xml a button like this:\r\n\r\n     &lt;Button\r\n        android:id=&quot;@+id/button1&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:onClick=&quot;crash&quot;\r\n        android:text=&quot;Crash me&quot; /&gt;\r\n\r\nthen run your app and click for crash","title":"How to crash an Android app programmatically?","body":"<p>Simply create in your main.xml a button like this:</p>\n\n<pre><code> &lt;Button\n    android:id=\"@+id/button1\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:onClick=\"crash\"\n    android:text=\"Crash me\" /&gt;\n</code></pre>\n\n<p>then run your app and click for crash</p>\n"},{"tags":[],"owner":{"account_id":14967979,"reputation":21,"user_id":10805683,"display_name":"Jos&#233; Torres"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1553512511,"creation_date":1553512511,"answer_id":55336557,"question_id":11807354,"body_markdown":"you can crash with a simple null point exception.\r\n\r\n     throw new NullPointerException();\r\n","title":"How to crash an Android app programmatically?","body":"<p>you can crash with a simple null point exception.</p>\n\n<pre><code> throw new NullPointerException();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5936955,"reputation":7346,"user_id":4669617,"accept_rate":50,"display_name":"ceph3us"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1558264008,"creation_date":1558262323,"answer_id":56206956,"question_id":11807354,"body_markdown":"in addition to @vinnet-shukla answer:\r\n\r\n&gt; &quot;OR simply throw an uncaught exception&quot;\r\n\r\n**throwing uncaught exception to do a crash is bad idea** as the exception could by caught somwhere higher in the stack - especially when whe don&#39;t know where we are right now :)\r\n\r\n**more ellegant way is to use ERROR** \r\n\r\nAn Error is a subclass of Throwable that indicates serious problems that a reasonable application should not try to catch. Most such errors are abnormal conditions. The ThreadDeath error, though a &quot;normal&quot; condition, is also a subclass of Error because most applications should not try to catch it.\r\n\r\nso we could make our own Error subclass and use it:\r\n\r\n    /*\r\n     * usage:\r\n     * \r\n     *   CrashError.doCrash(); \r\n     *\r\n     */\r\n\tpublic class CrashError extends Error {\r\n\t\t\r\n\t\tpublic CrashError() { \r\n\t\t\tthis(&quot;simulated crash&quot;);\r\n\t\t}\r\n\t\t\r\n\t\tpublic CrashError(String msg) {\r\n\t\t\tsuper(msg);\r\n\t\t}\r\n\t\t\r\n\t\tpublic static void doCrash() {\r\n\t\t\tthrow new CrashError();\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\r\n**but if we talk about other possibilities we could also a throw checked exception :)** \r\n\r\n**this will also be a lesson how we could RETHROW CHECKED EXCEPTION :) with other way than use of sun.misc.Unsafe especially when the class is not available in VM implementation**\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    public static &lt;E extends Throwable&gt; void throwAnyT(Throwable e) throws E {\r\n        throw (E) e;\r\n    }\r\n        \r\n    public static void throwUnchecked(Throwable e) {\r\n        throwAny(e);\r\n        // should never get there.\r\n        throw new InternalError();\r\n    }\r\n\r\n    public static void crash() {\r\n        throwUnchecked(new java.io.IOException(&quot;simulated crash&quot;));\r\n    }\r\n\r\n\r\nin addition to @audric answer:\r\n\r\n&gt; &quot;You can&#39;t throw null&quot;\r\n\r\n**yes you can :) it&#39;s exactly what you are doing in your example** and yes it could get undetectable if the catch block will not use Throwable - the NPX will never be thrown and simply there will be normal flow when code will still execute and yes i&#39;ll have seen this and experienced by myself :) on ANDROID DALVIK   \r\n\r\nand what about..? maybe it could fulfill your needs?\r\n\r\njava specific (also in android): \r\n\r\n    - Runtime.getRuntime().exit(int);\r\n    - System.exit(int);\r\n    - Runtime.getRuntime().halt(int);\r\n\r\nandroid specific: \r\n\r\n    - android.os.Process.killProcess(int);\r\n    - android.os.Process.killProcessQuiet(int);\r\n    - android.os.Process.sendSignal(int,int);\r\n    - android.system.Os.kill(int);\r\n\r\n","title":"How to crash an Android app programmatically?","body":"<p>in addition to @vinnet-shukla answer:</p>\n\n<blockquote>\n  <p>\"OR simply throw an uncaught exception\"</p>\n</blockquote>\n\n<p><strong>throwing uncaught exception to do a crash is bad idea</strong> as the exception could by caught somwhere higher in the stack - especially when whe don't know where we are right now :)</p>\n\n<p><strong>more ellegant way is to use ERROR</strong> </p>\n\n<p>An Error is a subclass of Throwable that indicates serious problems that a reasonable application should not try to catch. Most such errors are abnormal conditions. The ThreadDeath error, though a \"normal\" condition, is also a subclass of Error because most applications should not try to catch it.</p>\n\n<p>so we could make our own Error subclass and use it:</p>\n\n<pre><code>/*\n * usage:\n * \n *   CrashError.doCrash(); \n *\n */\npublic class CrashError extends Error {\n\n    public CrashError() { \n        this(\"simulated crash\");\n    }\n\n    public CrashError(String msg) {\n        super(msg);\n    }\n\n    public static void doCrash() {\n        throw new CrashError();\n    }\n\n}\n</code></pre>\n\n<p><strong>but if we talk about other possibilities we could also a throw checked exception :)</strong> </p>\n\n<p><strong>this will also be a lesson how we could RETHROW CHECKED EXCEPTION :) with other way than use of sun.misc.Unsafe especially when the class is not available in VM implementation</strong></p>\n\n<pre><code>@SuppressWarnings(\"unchecked\")\npublic static &lt;E extends Throwable&gt; void throwAnyT(Throwable e) throws E {\n    throw (E) e;\n}\n\npublic static void throwUnchecked(Throwable e) {\n    throwAny(e);\n    // should never get there.\n    throw new InternalError();\n}\n\npublic static void crash() {\n    throwUnchecked(new java.io.IOException(\"simulated crash\"));\n}\n</code></pre>\n\n<p>in addition to @audric answer:</p>\n\n<blockquote>\n  <p>\"You can't throw null\"</p>\n</blockquote>\n\n<p><strong>yes you can :) it's exactly what you are doing in your example</strong> and yes it could get undetectable if the catch block will not use Throwable - the NPX will never be thrown and simply there will be normal flow when code will still execute and yes i'll have seen this and experienced by myself :) on ANDROID DALVIK   </p>\n\n<p>and what about..? maybe it could fulfill your needs?</p>\n\n<p>java specific (also in android): </p>\n\n<pre><code>- Runtime.getRuntime().exit(int);\n- System.exit(int);\n- Runtime.getRuntime().halt(int);\n</code></pre>\n\n<p>android specific: </p>\n\n<pre><code>- android.os.Process.killProcess(int);\n- android.os.Process.killProcessQuiet(int);\n- android.os.Process.sendSignal(int,int);\n- android.system.Os.kill(int);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4161868,"reputation":16414,"user_id":3411787,"accept_rate":72,"display_name":"Mohammad Zaid - LushBinary.com"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1603373941,"creation_date":1603373941,"answer_id":64483515,"question_id":11807354,"body_markdown":"Force crash after some delay like this,\r\n\r\n    new android.os.Handler().postDelayed(\r\n                  new Runnable() {\r\n                      public void run() {\r\n                          Log.i(&quot;tag&quot;, &quot;This&#39;ll run 10 seconds later&quot;);\r\n                          throw new RuntimeException(&quot;This is a crash&quot;);\r\n                      }\r\n                  },\r\n                  10000);\r\n\r\n[Ref-1](https://stackoverflow.com/a/11807360/3411787) &amp; [Ref-2](https://stackoverflow.com/a/18381353/3411787)","title":"How to crash an Android app programmatically?","body":"<p>Force crash after some delay like this,</p>\n<pre><code>new android.os.Handler().postDelayed(\n              new Runnable() {\n                  public void run() {\n                      Log.i(&quot;tag&quot;, &quot;This'll run 10 seconds later&quot;);\n                      throw new RuntimeException(&quot;This is a crash&quot;);\n                  }\n              },\n              10000);\n</code></pre>\n<p><a href=\"https://stackoverflow.com/a/11807360/3411787\">Ref-1</a> &amp; <a href=\"https://stackoverflow.com/a/18381353/3411787\">Ref-2</a></p>\n"},{"tags":[],"owner":{"account_id":8617013,"reputation":199,"user_id":6453466,"display_name":"Prateek"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1605021510,"creation_date":1605005309,"answer_id":64767436,"question_id":11807354,"body_markdown":"If you are using firebase crashlytics, then there is a very easy way to do this. Mentioned in their document also.\r\n\r\n    val crashlytics = FirebaseCrashlytics.getInstance()\r\n    crashlytics.log(&quot;my message&quot;)\r\n\r\n","title":"How to crash an Android app programmatically?","body":"<p>If you are using firebase crashlytics, then there is a very easy way to do this. Mentioned in their document also.</p>\n<pre><code>val crashlytics = FirebaseCrashlytics.getInstance()\ncrashlytics.log(&quot;my message&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19369351,"reputation":180,"user_id":14162959,"display_name":"Crebain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1610269702,"creation_date":1610268439,"answer_id":65651498,"question_id":11807354,"body_markdown":"For kotlin: \r\n\r\n    val test = (&quot;0&quot;)\r\n    println(test[1])\r\n","title":"How to crash an Android app programmatically?","body":"<p>For kotlin:</p>\n<pre><code>val test = (&quot;0&quot;)\nprintln(test[1])\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5770723,"reputation":1660,"user_id":4554237,"display_name":"Rohit Jagtap"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620213440,"creation_date":1620213440,"answer_id":67400239,"question_id":11807354,"body_markdown":"You can crash the application simply with this line of code.\r\n\r\n    throw new RuntimeException(&quot;Test Crash&quot;); // Force a crash\r\n\r\nYou can pass the message, in this case &quot;Test Crash&quot;, which can be useful later to refer.\r\n\r\n**One step ahead,**\r\nMake sure none of your application&#39;s class files implement UncaughtExceptionHandler interface as below,\r\n\r\n    public class MyApplication extends Application implements Thread.UncaughtExceptionHandler{\r\n\r\nOtherwise the above exception or any exception for that matter, would be caught/consumed by that class, resulting in not crashing the app. However, you can get hold of that exception in uncaughtException(Thread t, Throwable e) method as below and take the required action. In your case, you&#39;d be reporting it to the Acra using their supported SDK methods.\r\n\r\n    @Override\r\n    public void uncaughtException(Thread t, Throwable e) {\r\n        Log.e(&quot;MyApplication&quot;, &quot;Error&quot;, e);\r\n    }","title":"How to crash an Android app programmatically?","body":"<p>You can crash the application simply with this line of code.</p>\n<pre><code>throw new RuntimeException(&quot;Test Crash&quot;); // Force a crash\n</code></pre>\n<p>You can pass the message, in this case &quot;Test Crash&quot;, which can be useful later to refer.</p>\n<p><strong>One step ahead,</strong>\nMake sure none of your application's class files implement UncaughtExceptionHandler interface as below,</p>\n<pre><code>public class MyApplication extends Application implements Thread.UncaughtExceptionHandler{\n</code></pre>\n<p>Otherwise the above exception or any exception for that matter, would be caught/consumed by that class, resulting in not crashing the app. However, you can get hold of that exception in uncaughtException(Thread t, Throwable e) method as below and take the required action. In your case, you'd be reporting it to the Acra using their supported SDK methods.</p>\n<pre><code>@Override\npublic void uncaughtException(Thread t, Throwable e) {\n    Log.e(&quot;MyApplication&quot;, &quot;Error&quot;, e);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1240942,"reputation":12883,"user_id":1203565,"accept_rate":56,"display_name":"Vihaan Verma"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1648135195,"creation_date":1648007921,"answer_id":71581655,"question_id":11807354,"body_markdown":"You can use activity manager to crash the app with no code changes\r\n\r\n    adb shell am crash &lt;packagename&gt;","title":"How to crash an Android app programmatically?","body":"<p>You can use activity manager to crash the app with no code changes</p>\n<pre><code>adb shell am crash &lt;packagename&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4906708,"reputation":1159,"user_id":5526322,"accept_rate":78,"display_name":"Alan Nelson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684793651,"creation_date":1684793651,"answer_id":76310209,"question_id":11807354,"body_markdown":"I couldn&#39;t throw an exception because the compiler wouldn&#39;t let me unless I was catching it somewhere!\r\n\r\nDo this instead:\r\n\r\n        if (1 == 1 ) {\r\n            throw new RuntimeException(&quot;This is a crash&quot;);\r\n        }","title":"How to crash an Android app programmatically?","body":"<p>I couldn't throw an exception because the compiler wouldn't let me unless I was catching it somewhere!</p>\n<p>Do this instead:</p>\n<pre><code>    if (1 == 1 ) {\n        throw new RuntimeException(&quot;This is a crash&quot;);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2211738,"reputation":1514,"user_id":3793506,"display_name":"Rabindra Khadka"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687522908,"creation_date":1687522908,"answer_id":76540079,"question_id":11807354,"body_markdown":"This code will add a button on your view and when clicked it will crash application. \r\n\r\n    val crashButton = Button(this)\r\n    crashButton.text = &quot;Test Crash&quot;\r\n    crashButton.setOnClickListener {\r\n       throw RuntimeException(&quot;This is a Test Crash&quot;)\r\n    }\r\n    addContentView(crashButton, ViewGroup.LayoutParams(\r\n    ViewGroup.LayoutParams.MATCH_PARENT,\r\n    ViewGroup.LayoutParams.WRAP_CONTENT))","title":"How to crash an Android app programmatically?","body":"<p>This code will add a button on your view and when clicked it will crash application.</p>\n<pre><code>val crashButton = Button(this)\ncrashButton.text = &quot;Test Crash&quot;\ncrashButton.setOnClickListener {\n   throw RuntimeException(&quot;This is a Test Crash&quot;)\n}\naddContentView(crashButton, ViewGroup.LayoutParams(\nViewGroup.LayoutParams.MATCH_PARENT,\nViewGroup.LayoutParams.WRAP_CONTENT))\n</code></pre>\n"}],"owner":{"account_id":151407,"reputation":19295,"user_id":365256,"accept_rate":76,"display_name":"Howard"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52078,"favorite_count":0,"down_vote_count":6,"up_vote_count":59,"accepted_answer_id":11807360,"answer_count":17,"score":53,"last_activity_date":1687522908,"creation_date":1344071417,"question_id":11807354,"body_markdown":"I want to test out crash report using [`acra`][1] but the first step is I need to simulate a fatal crash in Android using code.\r\n\r\nAny idea?\r\n\r\n\r\n  [1]: http://code.google.com/p/acra","title":"How to crash an Android app programmatically?","body":"<p>I want to test out crash report using <a href=\"http://code.google.com/p/acra\"><code>acra</code></a> but the first step is I need to simulate a fatal crash in Android using code.</p>\n\n<p>Any idea?</p>\n"},{"tags":["java","gradle"],"comments":[{"owner":{"account_id":114737,"reputation":1746,"user_id":3719412,"display_name":"cool"},"score":0,"creation_date":1687522263,"post_id":76539194,"comment_id":134952435,"body_markdown":"I guess this may lead you to a solution https://stackoverflow.com/questions/69939935/gradle-upgrade-7-2-7-3-breaks-with-the-value-for-this-property-is-final-and-c","body":"I guess this may lead you to a solution <a href=\"https://stackoverflow.com/questions/69939935/gradle-upgrade-7-2-7-3-breaks-with-the-value-for-this-property-is-final-and-c\" title=\"gradle upgrade 7 2 7 3 breaks with the value for this property is final and c\">stackoverflow.com/questions/69939935/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":14593176,"reputation":115,"user_id":10539722,"display_name":"3AKOBAH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687522807,"creation_date":1687522807,"answer_id":76540065,"question_id":76539194,"body_markdown":"I have:\r\n\r\n    ------------------------------------------------------------\r\n    Gradle 8.1.1\r\n    ------------------------------------------------------------\r\n    \r\n    Build time:   2023-04-21 12:31:26 UTC\r\n    Revision:     1cf537a851c635c364a4214885f8b9798051175b\r\n    \r\n    Kotlin:       1.8.10\r\n    Groovy:       3.0.15\r\n    Ant:          Apache Ant(TM) version 1.10.11 compiled on July 10 2021\r\n    JVM:          11.0.12 (Azul Systems, Inc. 11.0.12+7-LTS)\r\n    OS:           Windows 10 10.0 amd64\r\n\r\nI tried your snippet with the following build.gradle and the build was &#39;Success&#39;:\r\n\r\n    plugins {\r\n        id &#39;java&#39;\r\n    }\r\n    \r\n    group &#39;org.example&#39;\r\n    version &#39;1.0-SNAPSHOT&#39;\r\n    \r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    \r\n    dependencies {\r\n        testImplementation &#39;org.junit.jupiter:junit-jupiter-api:5.8.1&#39;\r\n        testRuntimeOnly &#39;org.junit.jupiter:junit-jupiter-engine:5.8.1&#39;\r\n    }\r\n    \r\n    java {\r\n        toolchain {\r\n            languageVersion = JavaLanguageVersion.of(11)\r\n        }\r\n    }\r\n    \r\n    test {\r\n        useJUnitPlatform()\r\n    }\r\n\r\n","title":"Gradle 8: How to set java version at runtime","body":"<p>I have:</p>\n<pre><code>------------------------------------------------------------\nGradle 8.1.1\n------------------------------------------------------------\n\nBuild time:   2023-04-21 12:31:26 UTC\nRevision:     1cf537a851c635c364a4214885f8b9798051175b\n\nKotlin:       1.8.10\nGroovy:       3.0.15\nAnt:          Apache Ant(TM) version 1.10.11 compiled on July 10 2021\nJVM:          11.0.12 (Azul Systems, Inc. 11.0.12+7-LTS)\nOS:           Windows 10 10.0 amd64\n</code></pre>\n<p>I tried your snippet with the following build.gradle and the build was 'Success':</p>\n<pre><code>plugins {\n    id 'java'\n}\n\ngroup 'org.example'\nversion '1.0-SNAPSHOT'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.8.1'\n    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.8.1'\n}\n\njava {\n    toolchain {\n        languageVersion = JavaLanguageVersion.of(11)\n    }\n}\n\ntest {\n    useJUnitPlatform()\n}\n</code></pre>\n"}],"owner":{"account_id":15881203,"reputation":64,"user_id":11458910,"display_name":"TdrFlp"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":598,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1687522807,"creation_date":1687515758,"question_id":76539194,"body_markdown":"Until Gradle 7, I could use the following block in my build script to trigger Gradle to use a specific Java version independently of my runtime JDK (in this case, java11):\r\n\r\n```\r\njava {\r\n    toolchain {\r\n            languageVersion = JavaLanguageVersion.of(11)\r\n    }\r\n}\r\n```\r\n\r\nAnd thanks to this block, I could compile my project even with `org.gradle.java.home` pointing at my jdk17 path.\r\n\r\nAfter upgrading to Gradle 8.1.1, I get this error message:\r\n\r\n```\r\nFAILURE: Build failed with an exception.\r\n\r\n* Where:\r\nBuild file &#39;C:\\dev\\workspace\\foo\\bar\\build.gradle&#39; line: 25\r\n\r\n* What went wrong:\r\nA problem occurred evaluating project &#39;:baz&#39;.\r\n&gt; The value for property &#39;languageVersion&#39; is final and cannot be changed any further.\r\n```\r\n\r\nTo make matters worse, the [official Gradle documentation](https://docs.gradle.org/current/userguide/building_java_projects.html) suggests to use my exact snippet to solve this problem, which obviously doesn&#39;t work.\r\n\r\nI couldn&#39;t find any working code snippets apart from setting &#180;java.sourceCompatibility = JavaVersion.VERSION_11&#180;, which doesn&#39;t allow me to compile without first changing `org.gradle.java.home` to point at my jdk11.","title":"Gradle 8: How to set java version at runtime","body":"<p>Until Gradle 7, I could use the following block in my build script to trigger Gradle to use a specific Java version independently of my runtime JDK (in this case, java11):</p>\n<pre><code>java {\n    toolchain {\n            languageVersion = JavaLanguageVersion.of(11)\n    }\n}\n</code></pre>\n<p>And thanks to this block, I could compile my project even with <code>org.gradle.java.home</code> pointing at my jdk17 path.</p>\n<p>After upgrading to Gradle 8.1.1, I get this error message:</p>\n<pre><code>FAILURE: Build failed with an exception.\n\n* Where:\nBuild file 'C:\\dev\\workspace\\foo\\bar\\build.gradle' line: 25\n\n* What went wrong:\nA problem occurred evaluating project ':baz'.\n&gt; The value for property 'languageVersion' is final and cannot be changed any further.\n</code></pre>\n<p>To make matters worse, the <a href=\"https://docs.gradle.org/current/userguide/building_java_projects.html\" rel=\"nofollow noreferrer\">official Gradle documentation</a> suggests to use my exact snippet to solve this problem, which obviously doesn't work.</p>\n<p>I couldn't find any working code snippets apart from setting ´java.sourceCompatibility = JavaVersion.VERSION_11´, which doesn't allow me to compile without first changing <code>org.gradle.java.home</code> to point at my jdk11.</p>\n"},{"tags":["java","spring-boot","swagger","openapi","openapi-generator"],"comments":[{"owner":{"account_id":114737,"reputation":1746,"user_id":3719412,"display_name":"cool"},"score":0,"creation_date":1687521164,"post_id":76539777,"comment_id":134952190,"body_markdown":"https://stackoverflow.com/questions/53263086/how-to-hide-a-request-field-in-swagger-api","body":"<a href=\"https://stackoverflow.com/questions/53263086/how-to-hide-a-request-field-in-swagger-api\" title=\"how to hide a request field in swagger api\">stackoverflow.com/questions/53263086/&hellip;</a>"},{"owner":{"account_id":1806467,"reputation":317,"user_id":1643489,"accept_rate":0,"display_name":"veera"},"score":0,"creation_date":1687522368,"post_id":76539777,"comment_id":134952467,"body_markdown":"@cool  how to set APIModelProperty(hidden = true) for that field in yaml?","body":"@cool  how to set APIModelProperty(hidden = true) for that field in yaml?"},{"owner":{"account_id":114737,"reputation":1746,"user_id":3719412,"display_name":"cool"},"score":0,"creation_date":1687522754,"post_id":76539777,"comment_id":134952556,"body_markdown":"it looks like I misunderstood your question. When you say you want to hide that field from response do you mean when the value is not provided don&#39;t send it? If so you should set this annotation on the field @JsonInclude(JsonInclude.Include.NON_NULL)","body":"it looks like I misunderstood your question. When you say you want to hide that field from response do you mean when the value is not provided don&#39;t send it? If so you should set this annotation on the field @JsonInclude(JsonInclude.Include.NON_NULL)"},{"owner":{"account_id":1806467,"reputation":317,"user_id":1643489,"accept_rate":0,"display_name":"veera"},"score":0,"creation_date":1687524904,"post_id":76539777,"comment_id":134953059,"body_markdown":"@cool  tried like this x-field-extra-annotation: &quot;@com.fasterxml.jackson.annotation.JsonInclude(JsonInclude.Include.NON_NULL)&quot; but getting compilation error saying Include does not exist. Library also there.","body":"@cool  tried like this x-field-extra-annotation: &quot;@com.fasterxml.jackson.annotation.JsonInclude(JsonInclude.I&zwnj;&#8203;nclude.NON_NULL)&quot; but getting compilation error saying Include does not exist. Library also there."},{"owner":{"account_id":114737,"reputation":1746,"user_id":3719412,"display_name":"cool"},"score":1,"creation_date":1687530649,"post_id":76539777,"comment_id":134954530,"body_markdown":"try this x-field-extra-annotation: &quot;@com.fasterxml.jackson.annotation.JsonInclude(com.fasterxml.jackson.annotation.JsonInclude.Include.NON_NULL)&quot;","body":"try this x-field-extra-annotation: &quot;@com.fasterxml.jackson.annotation.JsonInclude(com.fasterxml&zwnj;&#8203;.jackson.annotation.&zwnj;&#8203;JsonInclude.Include.&zwnj;&#8203;NON_NULL)&quot;"},{"owner":{"account_id":1806467,"reputation":317,"user_id":1643489,"accept_rate":0,"display_name":"veera"},"score":0,"creation_date":1687590413,"post_id":76539777,"comment_id":134960996,"body_markdown":"@cool It worked.. thanks..","body":"@cool It worked.. thanks.."}],"answers":[{"tags":[],"owner":{"account_id":23134567,"reputation":534,"user_id":17238973,"display_name":"Sahil Patel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687522566,"creation_date":1687522566,"answer_id":76540039,"question_id":76539777,"body_markdown":"        \r\n\r\nCreate a Views class and create two views – Public and Private:\r\n        \r\n        public class Views {\r\n            public static class Public {}\r\n        \r\n            public static class Private {}\r\n        }\r\n\r\nafter that annoted name field with @JsonView like below.\r\n        \r\n        @JsonView(Views.Private.class)\r\n        private String name;\r\n    \r\nI think it&#39;s work fine for you.","title":"hide or ignore json property in yaml","body":"<p>Create a Views class and create two views – Public and Private:</p>\n<pre><code>    public class Views {\n        public static class Public {}\n    \n        public static class Private {}\n    }\n</code></pre>\n<p>after that annoted name field with @JsonView like below.</p>\n<pre><code>    @JsonView(Views.Private.class)\n    private String name;\n</code></pre>\n<p>I think it's work fine for you.</p>\n"}],"owner":{"account_id":1806467,"reputation":317,"user_id":1643489,"accept_rate":0,"display_name":"veera"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":557,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687522566,"creation_date":1687520632,"question_id":76539777,"body_markdown":"i am using open api generator for request and response objects generation. I  want to hide/ignore the json field from yaml. So i have tried by using this config in yaml-&gt; ```x-field-extra-annotation: &quot;@com.fasterxml.jackson.annotation.JsonIgnore&quot; or import io.swagger.v3.oas.annotations.Hidden```. Below is the generated code \r\n```public class Test {\r\n    @JsonProperty(&quot;id&quot;)\r\n    private String id;\r\n    @JsonProperty(&quot;name&quot;)\r\n    @JsonIgnore\r\n    private String name;\r\n```\r\n and for Hidden \r\n``` public class Test {\r\n    @JsonProperty(&quot;id&quot;)\r\n    private String id;\r\n    @JsonProperty(&quot;name&quot;)\r\n    @Hidden\r\n    private String name;\r\n``` \r\n But i can see name in response. Please suggest how to ignore or hide the name field from response.\r\n\r\n","title":"hide or ignore json property in yaml","body":"<p>i am using open api generator for request and response objects generation. I  want to hide/ignore the json field from yaml. So i have tried by using this config in yaml-&gt; <code>x-field-extra-annotation: &quot;@com.fasterxml.jackson.annotation.JsonIgnore&quot; or import io.swagger.v3.oas.annotations.Hidden</code>. Below is the generated code</p>\n<pre><code>    @JsonProperty(&quot;id&quot;)\n    private String id;\n    @JsonProperty(&quot;name&quot;)\n    @JsonIgnore\n    private String name;\n</code></pre>\n<p>and for Hidden</p>\n<pre><code>    @JsonProperty(&quot;id&quot;)\n    private String id;\n    @JsonProperty(&quot;name&quot;)\n    @Hidden\n    private String name;\n</code></pre>\n<p>But i can see name in response. Please suggest how to ignore or hide the name field from response.</p>\n"},{"tags":["java","spring","sftp","jsch","apache-vfs"],"comments":[{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1687258731,"post_id":76513526,"comment_id":134908375,"body_markdown":"Setting keyexchange algorithm to ssh-dss is nonsense because **ssh-dss is not a keyexchange algorithm**; _no_ connection using your code can ever succeed. ssh-dss is a _signature_ algorithm, in this case used for the host, or as OpenSSH says &#39;HostkeyAlgorithm&#39;; Jsch calls it `server_host_key` and vfs/sftp doesn&#39;t appear to have a way to configure it, but you shouldn&#39;t need to because jsch 0.1.55 default includes it. (OpenSSH dropped it from default in 7.0, which is why you need an option on commandline `sftp` -- if the server is actually using it; have you confirmed that?)","body":"Setting keyexchange algorithm to ssh-dss is nonsense because <b>ssh-dss is not a keyexchange algorithm</b>; <i>no</i> connection using your code can ever succeed. ssh-dss is a <i>signature</i> algorithm, in this case used for the host, or as OpenSSH says &#39;HostkeyAlgorithm&#39;; Jsch calls it <code>server_host_key</code> and vfs/sftp doesn&#39;t appear to have a way to configure it, but you shouldn&#39;t need to because jsch 0.1.55 default includes it. (OpenSSH dropped it from default in 7.0, which is why you need an option on commandline <code>sftp</code> -- if the server is actually using it; have you confirmed that?)"},{"owner":{"account_id":20078422,"reputation":21,"user_id":14721638,"display_name":"StzEZ"},"score":0,"creation_date":1687260105,"post_id":76513526,"comment_id":134908693,"body_markdown":"Yes, the server is using it as far as I know. I tried with the default configuration without success, thus adding the line you mentioned. I&#39;m considering using jsch directly, which works fine, but needs more lines of code.","body":"Yes, the server is using it as far as I know. I tried with the default configuration without success, thus adding the line you mentioned. I&#39;m considering using jsch directly, which works fine, but needs more lines of code."},{"owner":{"account_id":453710,"reputation":192093,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"score":0,"creation_date":1687261670,"post_id":76513526,"comment_id":134909042,"body_markdown":"There are dozens of recent questions here about *&quot;Algorithm negotiation fail&quot;* problems with JSch already. What research did you do?","body":"There are dozens of recent questions here about <i>&quot;Algorithm negotiation fail&quot;</i> problems with JSch already. What research did you do?"},{"owner":{"account_id":20078422,"reputation":21,"user_id":14721638,"display_name":"StzEZ"},"score":0,"creation_date":1687274518,"post_id":76513526,"comment_id":134912188,"body_markdown":"@MartinPrikryl That&#39;s what I&#39;ve seen, but as I said all I could find was about jsch, not apache vfs","body":"@MartinPrikryl That&#39;s what I&#39;ve seen, but as I said all I could find was about jsch, not apache vfs"},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1687314935,"post_id":76513526,"comment_id":134917936,"body_markdown":"Can you get a log showing the problem? Per [the source](https://github.com/apache/commons-vfs/blob/master/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/sftp/SftpClientFactory.java#L53) vfs hooks up Jsch logging to commons-logging, so you should be able to just enable logging on that class.","body":"Can you get a log showing the problem? Per <a href=\"https://github.com/apache/commons-vfs/blob/master/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/sftp/SftpClientFactory.java#L53\" rel=\"nofollow noreferrer\">the source</a> vfs hooks up Jsch logging to commons-logging, so you should be able to just enable logging on that class."},{"owner":{"account_id":453710,"reputation":192093,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"score":0,"creation_date":1687335849,"post_id":76513526,"comment_id":134920908,"body_markdown":"Ok, but have you realized that you likely cannot use original JSch, as it is outdated? Did try testing JSch directly, and its clones that are more up-to-date?","body":"Ok, but have you realized that you likely cannot use original JSch, as it is outdated? Did try testing JSch directly, and its clones that are more up-to-date?"},{"owner":{"account_id":20078422,"reputation":21,"user_id":14721638,"display_name":"StzEZ"},"score":0,"creation_date":1687354107,"post_id":76513526,"comment_id":134924955,"body_markdown":"@MartinPrikryl We try to have as few dependencies as possible, hence the use of the original jsch, as it&#39;s needed anyway for apache vfs to work, is that a problem? It seems to work fine","body":"@MartinPrikryl We try to have as few dependencies as possible, hence the use of the original jsch, as it&#39;s needed anyway for apache vfs to work, is that a problem? It seems to work fine"},{"owner":{"account_id":453710,"reputation":192093,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"score":0,"creation_date":1687355752,"post_id":76513526,"comment_id":134925403,"body_markdown":"*&quot;Seems to work fine&quot;*??? Doesn&#39;t seem to me.","body":"<i>&quot;Seems to work fine&quot;</i>??? Doesn&#39;t seem to me."},{"owner":{"account_id":20078422,"reputation":21,"user_id":14721638,"display_name":"StzEZ"},"score":0,"creation_date":1687356422,"post_id":76513526,"comment_id":134925585,"body_markdown":"@MartinPrikryl Why not? I&#39;m getting all the files I need using it","body":"@MartinPrikryl Why not? I&#39;m getting all the files I need using it"},{"owner":{"account_id":453710,"reputation":192093,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"score":0,"creation_date":1687357718,"post_id":76513526,"comment_id":134925955,"body_markdown":"I do not see you mentioning anywhere, that direct use of JSCh works for you. If it does, post your JSch code, JSch log file and JSch log file from within vfs, if possible.","body":"I do not see you mentioning anywhere, that direct use of JSCh works for you. If it does, post your JSch code, JSch log file and JSch log file from within vfs, if possible."},{"owner":{"account_id":20078422,"reputation":21,"user_id":14721638,"display_name":"StzEZ"},"score":0,"creation_date":1687358095,"post_id":76513526,"comment_id":134926035,"body_markdown":"@MartinPrikryl _&quot;I&#39;m considering using jsch directly, which works fine, but needs more lines of code.&quot;_ I commented that in an earlier comment, maybe I wasn&#39;t clear enough. Right now, using just jsch, everything works as expected, however using vfs reduces the amount of code. Added my current code at the end of the question","body":"@MartinPrikryl <i>&quot;I&#39;m considering using jsch directly, which works fine, but needs more lines of code.&quot;</i> I commented that in an earlier comment, maybe I wasn&#39;t clear enough. Right now, using just jsch, everything works as expected, however using vfs reduces the amount of code. Added my current code at the end of the question"}],"answers":[{"tags":[],"owner":{"account_id":20078422,"reputation":21,"user_id":14721638,"display_name":"StzEZ"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687522281,"creation_date":1687522281,"answer_id":76540004,"question_id":76513526,"body_markdown":"Given that I couldn&#39;t find a better approach, the cose that worked for me is as follows:\r\n\r\nI ended up using just jsch to create the connection and download the files I need, using the following methods:\r\n```\r\npublic void downloadFile(String originFilePath, String destinationFilePath) throws IOException {\r\n        try {\r\n            final Session session = createSessionAndConnect();\r\n            ChannelSftp sftpChannel = getJSCHConnectionChannel(session);\r\n\r\n            sftpChannel.get(originFilePath, destinationFilePath);\r\n\r\n            closeJSCHConnectionChannel(sftpChannel, session);\r\n        } catch (JSchException | SftpException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n```\r\n```\r\nprivate Session createSessionAndConnect() throws JSchException {\r\n        JSch jsch = new JSch();\r\n        Session session = null;\r\n\r\n        session = jsch.getSession(getUser(), getIp(), 22);\r\n        session.setConfig(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;); // Is this fine?\r\n        session.setPassword(getPassword());\r\n        session.connect();\r\n\r\n        return session;\r\n    }\r\n```\r\n```\r\nprivate ChannelSftp getJSCHConnectionChannel(Session session) throws JSchException {\r\n        Channel channel = session.openChannel(&quot;sftp&quot;);\r\n        channel.connect();\r\n        return (ChannelSftp) channel;\r\n    }\r\n```\r\n```\r\nprivate void closeJSCHConnectionChannel(final ChannelSftp sftpChannel, final Session session) {\r\n        sftpChannel.exit();\r\n        session.disconnect();\r\n    }\r\n```","title":"Apache vfs/jsch sftp Algorithm negotiation fail","body":"<p>Given that I couldn't find a better approach, the cose that worked for me is as follows:</p>\n<p>I ended up using just jsch to create the connection and download the files I need, using the following methods:</p>\n<pre><code>public void downloadFile(String originFilePath, String destinationFilePath) throws IOException {\n        try {\n            final Session session = createSessionAndConnect();\n            ChannelSftp sftpChannel = getJSCHConnectionChannel(session);\n\n            sftpChannel.get(originFilePath, destinationFilePath);\n\n            closeJSCHConnectionChannel(sftpChannel, session);\n        } catch (JSchException | SftpException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<pre><code>private Session createSessionAndConnect() throws JSchException {\n        JSch jsch = new JSch();\n        Session session = null;\n\n        session = jsch.getSession(getUser(), getIp(), 22);\n        session.setConfig(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;); // Is this fine?\n        session.setPassword(getPassword());\n        session.connect();\n\n        return session;\n    }\n</code></pre>\n<pre><code>private ChannelSftp getJSCHConnectionChannel(Session session) throws JSchException {\n        Channel channel = session.openChannel(&quot;sftp&quot;);\n        channel.connect();\n        return (ChannelSftp) channel;\n    }\n</code></pre>\n<pre><code>private void closeJSCHConnectionChannel(final ChannelSftp sftpChannel, final Session session) {\n        sftpChannel.exit();\n        session.disconnect();\n    }\n</code></pre>\n"}],"owner":{"account_id":20078422,"reputation":21,"user_id":14721638,"display_name":"StzEZ"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":279,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687522281,"creation_date":1687255172,"question_id":76513526,"body_markdown":"I&#39;m trying to connect to a sftp server, which I connect to via commands using ```sftp -oHostKeyAlgorithms=+ssh-dss user@host```. However, when I try to connect via my java-spring application, using apache vfs, I get the following exception:\r\n```\r\nERROR] 20/06/2023 11:50:13.333 [http-nio-8080-exec-1]  o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.RuntimeException: org.apache.commons.vfs2.FileSystemException: Could not connect to SFTP server at &quot;sftp://user:***@host/&quot;.] with root cause\r\ncom.jcraft.jsch.JSchException: Algorithm negotiation fail\r\n```\r\nMy file download method looks like this:\r\n```\r\npublic void downloadFile(final String originFilePath, final String destinationFilePath) throws IOException {\r\n        try (final StandardFileSystemManager manager = new StandardFileSystemManager()) {\r\n            manager.init();\r\n            final FileObject remoteFile = manager.resolveFile(getConnectionWithPath(originFilePath), createDefaultOptions());\r\n            manager.resolveFile(destinationFilePath).copyFrom(remoteFile, Selectors.SELECT_SELF);\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n```\r\nThe getConnectionWithPath(originFilePath) looks like this (the getX() methods retrieve the value from my properties file):\r\n```\r\npublic String getConnectionWithPath(final String remoteFilePath) {\r\n        return &quot;sftp://&quot; + getUser() + &quot;:&quot; + getPassword() + &quot;@&quot; + getIp() + &quot;/&quot; + remoteFilePath;\r\n    }\r\n```\r\nAnd finally, my createDefaultOptions() method:\r\n```\r\npublic static FileSystemOptions createDefaultOptions() throws FileSystemException {\r\n        FileSystemOptions opts = new FileSystemOptions();\r\n\r\n        SftpFileSystemConfigBuilder.getInstance().setUserDirIsRoot(opts, false);\r\n        SftpFileSystemConfigBuilder.getInstance().setKeyExchangeAlgorithm(opts, &quot;ssh-dss&quot;);\r\n        SftpFileSystemConfigBuilder.getInstance().setDisableDetectExecChannel(opts, true);\r\n\r\n        return opts;\r\n    }\r\n```\r\n\r\nI&#39;m using jsch 0.1.55 and apache vfs 2.9.0\r\n\r\nAfter trying many approaches, I ended up using just jsch to create the connection and download the files I need, using the following methods:\r\n\r\n```\r\npublic void downloadFile(String originFilePath, String destinationFilePath) throws IOException {\r\n        try {\r\n            final Session session = createSessionAndConnect();\r\n            ChannelSftp sftpChannel = getJSCHConnectionChannel(session);\r\n\r\n            sftpChannel.get(originFilePath, destinationFilePath);\r\n\r\n            closeJSCHConnectionChannel(sftpChannel, session);\r\n        } catch (JSchException | SftpException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n```\r\n```\r\nprivate Session createSessionAndConnect() throws JSchException {\r\n        JSch jsch = new JSch();\r\n        Session session = null;\r\n\r\n        session = jsch.getSession(getUser(), getIp(), 22);\r\n        session.setConfig(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;); // Is this fine?\r\n        session.setPassword(getPassword());\r\n        session.connect();\r\n\r\n        return session;\r\n    }\r\n```\r\n```\r\nprivate ChannelSftp getJSCHConnectionChannel(Session session) throws JSchException {\r\n        Channel channel = session.openChannel(&quot;sftp&quot;);\r\n        channel.connect();\r\n        return (ChannelSftp) channel;\r\n    }\r\n```\r\n```\r\nprivate void closeJSCHConnectionChannel(final ChannelSftp sftpChannel, final Session session) {\r\n        sftpChannel.exit();\r\n        session.disconnect();\r\n    }\r\n```","title":"Apache vfs/jsch sftp Algorithm negotiation fail","body":"<p>I'm trying to connect to a sftp server, which I connect to via commands using <code>sftp -oHostKeyAlgorithms=+ssh-dss user@host</code>. However, when I try to connect via my java-spring application, using apache vfs, I get the following exception:</p>\n<pre><code>ERROR] 20/06/2023 11:50:13.333 [http-nio-8080-exec-1]  o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.RuntimeException: org.apache.commons.vfs2.FileSystemException: Could not connect to SFTP server at &quot;sftp://user:***@host/&quot;.] with root cause\ncom.jcraft.jsch.JSchException: Algorithm negotiation fail\n</code></pre>\n<p>My file download method looks like this:</p>\n<pre><code>public void downloadFile(final String originFilePath, final String destinationFilePath) throws IOException {\n        try (final StandardFileSystemManager manager = new StandardFileSystemManager()) {\n            manager.init();\n            final FileObject remoteFile = manager.resolveFile(getConnectionWithPath(originFilePath), createDefaultOptions());\n            manager.resolveFile(destinationFilePath).copyFrom(remoteFile, Selectors.SELECT_SELF);\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n</code></pre>\n<p>The getConnectionWithPath(originFilePath) looks like this (the getX() methods retrieve the value from my properties file):</p>\n<pre><code>public String getConnectionWithPath(final String remoteFilePath) {\n        return &quot;sftp://&quot; + getUser() + &quot;:&quot; + getPassword() + &quot;@&quot; + getIp() + &quot;/&quot; + remoteFilePath;\n    }\n</code></pre>\n<p>And finally, my createDefaultOptions() method:</p>\n<pre><code>public static FileSystemOptions createDefaultOptions() throws FileSystemException {\n        FileSystemOptions opts = new FileSystemOptions();\n\n        SftpFileSystemConfigBuilder.getInstance().setUserDirIsRoot(opts, false);\n        SftpFileSystemConfigBuilder.getInstance().setKeyExchangeAlgorithm(opts, &quot;ssh-dss&quot;);\n        SftpFileSystemConfigBuilder.getInstance().setDisableDetectExecChannel(opts, true);\n\n        return opts;\n    }\n</code></pre>\n<p>I'm using jsch 0.1.55 and apache vfs 2.9.0</p>\n<p>After trying many approaches, I ended up using just jsch to create the connection and download the files I need, using the following methods:</p>\n<pre><code>public void downloadFile(String originFilePath, String destinationFilePath) throws IOException {\n        try {\n            final Session session = createSessionAndConnect();\n            ChannelSftp sftpChannel = getJSCHConnectionChannel(session);\n\n            sftpChannel.get(originFilePath, destinationFilePath);\n\n            closeJSCHConnectionChannel(sftpChannel, session);\n        } catch (JSchException | SftpException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<pre><code>private Session createSessionAndConnect() throws JSchException {\n        JSch jsch = new JSch();\n        Session session = null;\n\n        session = jsch.getSession(getUser(), getIp(), 22);\n        session.setConfig(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;); // Is this fine?\n        session.setPassword(getPassword());\n        session.connect();\n\n        return session;\n    }\n</code></pre>\n<pre><code>private ChannelSftp getJSCHConnectionChannel(Session session) throws JSchException {\n        Channel channel = session.openChannel(&quot;sftp&quot;);\n        channel.connect();\n        return (ChannelSftp) channel;\n    }\n</code></pre>\n<pre><code>private void closeJSCHConnectionChannel(final ChannelSftp sftpChannel, final Session session) {\n        sftpChannel.exit();\n        session.disconnect();\n    }\n</code></pre>\n"},{"tags":["java","junit","vert.x","powermockito"],"answers":[{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687522269,"creation_date":1687522269,"answer_id":76540000,"question_id":76539923,"body_markdown":"I would advise that you refactor this code.  \r\n\r\nYou&#39;ve embedded all your data access code inside Vertx.  You cannot test it without Vertx.  The coupling is not a good idea.\r\n\r\nA better idea would be to start with an interface for your repository and implement it as a Plain Old Java Object (POJO), without any reference to Vertx.  \r\n\r\nYou can test your POJO repository without Vertx that way.  \r\n\r\nOnce it&#39;s running perfectly you can give an instance to Vertx controller and let it interact with the database through the POJO.\r\n\r\nIt&#39;s an idea called dependency injection.  Frameworks like Spring Boot can make this easy for you, but it&#39;s also possible to do without a framework.  Instantiate an instance of the repository POJO and give it to the Vertx controller in its constructor.  The repository POJO is now a private data member in the Vertx controller.\r\n\r\nIf you were to decide to switch from Vertx to an AWS lambda, your POJO repository doesn&#39;t have to change.  You can inject it into the lambda without change.\r\n","title":"How to write test case using vertx for db class?","body":"<p>I would advise that you refactor this code.</p>\n<p>You've embedded all your data access code inside Vertx.  You cannot test it without Vertx.  The coupling is not a good idea.</p>\n<p>A better idea would be to start with an interface for your repository and implement it as a Plain Old Java Object (POJO), without any reference to Vertx.</p>\n<p>You can test your POJO repository without Vertx that way.</p>\n<p>Once it's running perfectly you can give an instance to Vertx controller and let it interact with the database through the POJO.</p>\n<p>It's an idea called dependency injection.  Frameworks like Spring Boot can make this easy for you, but it's also possible to do without a framework.  Instantiate an instance of the repository POJO and give it to the Vertx controller in its constructor.  The repository POJO is now a private data member in the Vertx controller.</p>\n<p>If you were to decide to switch from Vertx to an AWS lambda, your POJO repository doesn't have to change.  You can inject it into the lambda without change.</p>\n"}],"owner":{"account_id":27862245,"reputation":1,"user_id":21274507,"display_name":"Kalpani Athukorala"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687522269,"creation_date":1687521724,"question_id":76539923,"body_markdown":"Below is my written code. I want to write test cases using powermokito for db class.\r\n\r\nI expect to write test cases for below vertx related classess using junit powermokito to cover 80% coverage. I tried different ways to mock db its not working here. How I write test case for below code? Below code include db verticle and http server verticle. \r\n\r\n```\r\npublic class EmployeeDBVerticle extends AbstractVerticle {\r\n\r\n  private JDBCPool jdbcpool;\r\n\r\n  @Override\r\n  public void start() throws Exception {\r\n    JsonObject jsonObject = new JsonObject();\r\n    jsonObject.put(&quot;url&quot;, &quot;jdbc:mysql://localhost:3306/employee&quot;);\r\n    jsonObject.put(&quot;driver_class&quot;, &quot;com.mysql.cj.jdbc.Driver&quot;);\r\n    jsonObject.put(&quot;max_pool_size&quot;, 30);\r\n    jsonObject.put(&quot;user&quot;, &quot;root&quot;);\r\n    jsonObject.put(&quot;password&quot;,&quot;root&quot;);\r\n    jdbcpool = JDBCPool.pool(vertx,jsonObject);\r\n\r\n    vertx.eventBus().consumer(EventBusAddresses.ADDRESS_SAVE, message -&gt; {\r\n    JsonObject student = (JsonObject) message.body();\r\n    saveStudent(student)\r\n      .onSuccess(success-&gt;{\r\n        message.reply(success);\r\n      }).onFailure(throwable -&gt; {\r\n        message.fail(HttpResponseStatus.INTERNAL_SERVER_ERROR.code(), &quot;Error while saving&quot;);\r\n      });\r\n    });\r\n  }\r\n\r\n  public Future&lt;String&gt; saveStudent(JsonObject student){\r\n    Promise&lt;String&gt; promise = Promise.promise();\r\n    String id = student.getString(&quot;id&quot;);\r\n    String name = student.getString(&quot;name&quot;);\r\n    jdbcpool.preparedQuery(SQLConstants.INSERT_EMPLOYEE)\r\n      .execute(Tuple.of(id,name))\r\n      .onFailure(throwable -&gt; {\r\n        promise.fail(&quot;Failed&quot;);\r\n      }).onSuccess(rows -&gt; {\r\n        if(rows.rowCount()&gt;0){\r\n          promise.complete(&quot;Data Saved Successfully&quot;);\r\n        }else{\r\n          promise.fail(&quot;Error occurred&quot;);\r\n        }\r\n      });\r\n    return promise.future();\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\npublic class EmployeeHttpVerticle extends AbstractVerticle {\r\n\r\n\r\n\r\n  @Override\r\n  public void start() throws Exception {\r\n    Router router = Router.router(vertx);\r\n    router.route().handler(BodyHandler.create());\r\n    router.route(HttpMethod.POST,&quot;/save/employee&quot;).handler(this::saveStudent);\r\n    vertx.createHttpServer().requestHandler(router).listen(8090);\r\n  }\r\n\r\n  private void saveStudent(RoutingContext routingContext) {\r\n    JsonObject student = routingContext.getBodyAsJson();\r\n    vertx.eventBus().request(EventBusAddresses.ADDRESS_SAVE,student, reply-&gt;{\r\n      if(reply.succeeded()){\r\n        System.out.println(reply.result().body());\r\n        routingContext.response().end((String) reply.result().body());\r\n        callThirdParty(student);\r\n      }else{\r\n        routingContext.response().end(reply.cause().getMessage());\r\n      }\r\n    });\r\n  }\r\n\r\n  public void callThirdParty(JsonObject student){\r\n    vertx.eventBus().request(EventBusAddresses.ADDRESS_SAVE,student);\r\n  }\r\n}\r\n```","title":"How to write test case using vertx for db class?","body":"<p>Below is my written code. I want to write test cases using powermokito for db class.</p>\n<p>I expect to write test cases for below vertx related classess using junit powermokito to cover 80% coverage. I tried different ways to mock db its not working here. How I write test case for below code? Below code include db verticle and http server verticle.</p>\n<pre><code>public class EmployeeDBVerticle extends AbstractVerticle {\n\n  private JDBCPool jdbcpool;\n\n  @Override\n  public void start() throws Exception {\n    JsonObject jsonObject = new JsonObject();\n    jsonObject.put(&quot;url&quot;, &quot;jdbc:mysql://localhost:3306/employee&quot;);\n    jsonObject.put(&quot;driver_class&quot;, &quot;com.mysql.cj.jdbc.Driver&quot;);\n    jsonObject.put(&quot;max_pool_size&quot;, 30);\n    jsonObject.put(&quot;user&quot;, &quot;root&quot;);\n    jsonObject.put(&quot;password&quot;,&quot;root&quot;);\n    jdbcpool = JDBCPool.pool(vertx,jsonObject);\n\n    vertx.eventBus().consumer(EventBusAddresses.ADDRESS_SAVE, message -&gt; {\n    JsonObject student = (JsonObject) message.body();\n    saveStudent(student)\n      .onSuccess(success-&gt;{\n        message.reply(success);\n      }).onFailure(throwable -&gt; {\n        message.fail(HttpResponseStatus.INTERNAL_SERVER_ERROR.code(), &quot;Error while saving&quot;);\n      });\n    });\n  }\n\n  public Future&lt;String&gt; saveStudent(JsonObject student){\n    Promise&lt;String&gt; promise = Promise.promise();\n    String id = student.getString(&quot;id&quot;);\n    String name = student.getString(&quot;name&quot;);\n    jdbcpool.preparedQuery(SQLConstants.INSERT_EMPLOYEE)\n      .execute(Tuple.of(id,name))\n      .onFailure(throwable -&gt; {\n        promise.fail(&quot;Failed&quot;);\n      }).onSuccess(rows -&gt; {\n        if(rows.rowCount()&gt;0){\n          promise.complete(&quot;Data Saved Successfully&quot;);\n        }else{\n          promise.fail(&quot;Error occurred&quot;);\n        }\n      });\n    return promise.future();\n  }\n}\n\n\n\n\npublic class EmployeeHttpVerticle extends AbstractVerticle {\n\n\n\n  @Override\n  public void start() throws Exception {\n    Router router = Router.router(vertx);\n    router.route().handler(BodyHandler.create());\n    router.route(HttpMethod.POST,&quot;/save/employee&quot;).handler(this::saveStudent);\n    vertx.createHttpServer().requestHandler(router).listen(8090);\n  }\n\n  private void saveStudent(RoutingContext routingContext) {\n    JsonObject student = routingContext.getBodyAsJson();\n    vertx.eventBus().request(EventBusAddresses.ADDRESS_SAVE,student, reply-&gt;{\n      if(reply.succeeded()){\n        System.out.println(reply.result().body());\n        routingContext.response().end((String) reply.result().body());\n        callThirdParty(student);\n      }else{\n        routingContext.response().end(reply.cause().getMessage());\n      }\n    });\n  }\n\n  public void callThirdParty(JsonObject student){\n    vertx.eventBus().request(EventBusAddresses.ADDRESS_SAVE,student);\n  }\n}\n</code></pre>\n"},{"tags":["java","windows","user-interface","jar"],"comments":[{"owner":{"account_id":28240357,"reputation":1,"user_id":21588222,"display_name":"Stanisław"},"score":0,"creation_date":1687508786,"post_id":76538147,"comment_id":134949738,"body_markdown":"Could you go more in detail?","body":"Could you go more in detail?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1687515081,"post_id":76538147,"comment_id":134950980,"body_markdown":"Yes, it won&#39;t be responsive for a *long* time. You need to do the download in a separate thread. I recommend the excellently documented [SwingWorker](https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/SwingWorker.html)","body":"Yes, it won&#39;t be responsive for a <i>long</i> time. You need to do the download in a separate thread. I recommend the excellently documented <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/swing/SwingWorker.html\" rel=\"nofollow noreferrer\">SwingWorker</a>"},{"owner":{"account_id":28240357,"reputation":1,"user_id":21588222,"display_name":"Stanisław"},"score":0,"creation_date":1687516629,"post_id":76538147,"comment_id":134951253,"body_markdown":"@g00se Well I am not asking &quot;about downloading in a separate thread while Downloading&quot;. The issue is that the button does not react to clicking it (anytime). I can click 10 times and nothing happens (no file is downloaded).","body":"@g00se Well I am not asking &quot;about downloading in a separate thread while Downloading&quot;. The issue is that the button does not react to clicking it (anytime). I can click 10 times and nothing happens (no file is downloaded)."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1687517381,"post_id":76538147,"comment_id":134951390,"body_markdown":"You&#39;re quite welcome to totally reject my comment, but you won&#39;t get it working otherwise (or without another form of separate-thread creation) ;)","body":"You&#39;re quite welcome to totally reject my comment, but you won&#39;t get it working otherwise (or without another form of separate-thread creation) ;)"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1687520236,"post_id":76538147,"comment_id":134951981,"body_markdown":"What does `getFilePath` do? Ultimately, you will have to do some more debugging to narrow this down to a more specific problem. If you can’t reproduce the problem in an IDE, you can run the JAR with remote debugging enabled and connect from the IDE that way. If all else fails, use `System.err.println` statements to log the value of variables to be sure they’re what’s expected.","body":"What does <code>getFilePath</code> do? Ultimately, you will have to do some more debugging to narrow this down to a more specific problem. If you can’t reproduce the problem in an IDE, you can run the JAR with remote debugging enabled and connect from the IDE that way. If all else fails, use <code>System.err.println</code> statements to log the value of variables to be sure they’re what’s expected."},{"owner":{"account_id":28240357,"reputation":1,"user_id":21588222,"display_name":"Stanisław"},"score":0,"creation_date":1687522142,"post_id":76538147,"comment_id":134952413,"body_markdown":"@TimMoore I am sorry I forgot to include it in my original Post.I edited the post and added the getFilePath() method Code Snippet.","body":"@TimMoore I am sorry I forgot to include it in my original Post.I edited the post and added the getFilePath() method Code Snippet."},{"owner":{"account_id":28240357,"reputation":1,"user_id":21588222,"display_name":"Stanisław"},"score":0,"creation_date":1687522360,"post_id":76538147,"comment_id":134952461,"body_markdown":"@g00se I will try that in a moment.","body":"@g00se I will try that in a moment."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1687523774,"post_id":76538147,"comment_id":134952811,"body_markdown":"You could even use `SwingWorker.publish()` to send `yt-dlp`&#39;s progress report to the gui, having parsed it out of the output stream. Or you could send the whole output","body":"You could even use <code>SwingWorker.publish()</code> to send <code>yt-dlp</code>&#39;s progress report to the gui, having parsed it out of the output stream. Or you could send the whole output"}],"owner":{"account_id":28240357,"reputation":1,"user_id":21588222,"display_name":"Stanisław"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687522101,"creation_date":1687507333,"question_id":76538147,"body_markdown":"I am experiencing an issue with a **small GUI Java Application**. The app is a GUI implementation for yt-dlp software which makes it easier for people to download music from Youtube without knowing the terminal syntax of yt-dlp.\r\n\r\nBasically whenever I build the artefacts of my program and try to execute the built **.Jar application** my **&quot;Download&quot; button is unresponsive** (does not take any action in regards to its listener). It only happens while using the app in .Jar (while running the program within the JetBrains Intellij IDE it works as intended -\\&gt; the button reacts and does download the contents). My &quot;Quit&quot; button works as intended (quits the application, both in my IDE and in my .Jar application).\r\n\r\n\\*By unresponsiveness I mean that the program **does not execute its command line statements.**\r\n\r\nThe code of the downloadButton MouseListner then goes to the download(string link, string outputPath) method which downloads the file.\r\n\r\n**downloadButton MouseListener - Code Snippet**\r\n\r\n```\r\n  downloadButton.addMouseListener(new MouseAdapter() {\r\n            @Override\r\n            public void mouseClicked(MouseEvent e) {\r\n                if (outputPath.getText().isEmpty() || link.getText().isEmpty()) {\r\n                    // some error handling\r\n                } else {\r\n                    try {\r\n                        download(link.getText(), outputPath.getText());\r\n                    } catch (URISyntaxException ex) {\r\n                        throw new RuntimeException(ex);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n```\r\n\r\n**download(string linkYt, String path) Method - Code Snippet**\r\n\r\n```\r\nprivate void download(String linkYT, String path) throws URISyntaxException {\r\n\r\n        // This folder &quot;Libs&quot; is also within the .Jar file.\r\n        Path ytDlpPath = getFilePath(&quot;/Libs/yt-dlp.exe&quot;);\r\n\r\n        String os = System.getProperty(&quot;os.name&quot;).toLowerCase();\r\n\r\n        Process process = null;\r\n        try {\r\n            ProcessBuilder processBuilder;\r\n        \r\n          processBuilder = new ProcessBuilder(ytDlpPath.toString(), &quot;-f&quot;, \r\n          &quot;bestaudio&quot;, &quot;-x&quot;, &quot;--  audio-format&quot;, &quot;wav&quot; , &quot;--output&quot;, path + &quot;/%(title)s.%(ext)s&quot;,         &quot;ytsearch:&quot; + linkYT);\r\n            \r\n            process = processBuilder.start();\r\n            process.waitFor();\r\n\r\n            int exitCode = process.exitValue();\r\n\r\n            if (exitCode != 0) {\r\n                // some error handling\r\n            } else {\r\n                // download success \r\n            }\r\n\r\n        } \r\n            catch (IOException | InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n```\r\n\r\nSo far I have tried debugging the code, however as I have previously mentioned -\\&gt; the &quot;Download&quot; button unresponsiveness only happens while I am using/executing the program within the .Jar file. I cannot seem to find a solution. :(**  \r\nThanks in advance,  \r\nStan**`enter code here`\r\n\r\n***EDIT:***\r\n**getFilePath() Method - Code Snippet**\r\n```\r\n    private Path getFilePath(String resourcePath) {\r\n        try {\r\n            return Paths.get(getClass().getResource(resourcePath).toURI());\r\n        } catch (URISyntaxException e) {\r\n            throw new RuntimeException(&quot;Failed to get resource file path: &quot; + resourcePath, e);\r\n        }\r\n    }\r\n```","title":".JAR application does not work as intended","body":"<p>I am experiencing an issue with a <strong>small GUI Java Application</strong>. The app is a GUI implementation for yt-dlp software which makes it easier for people to download music from Youtube without knowing the terminal syntax of yt-dlp.</p>\n<p>Basically whenever I build the artefacts of my program and try to execute the built <strong>.Jar application</strong> my <strong>&quot;Download&quot; button is unresponsive</strong> (does not take any action in regards to its listener). It only happens while using the app in .Jar (while running the program within the JetBrains Intellij IDE it works as intended -&gt; the button reacts and does download the contents). My &quot;Quit&quot; button works as intended (quits the application, both in my IDE and in my .Jar application).</p>\n<p>*By unresponsiveness I mean that the program <strong>does not execute its command line statements.</strong></p>\n<p>The code of the downloadButton MouseListner then goes to the download(string link, string outputPath) method which downloads the file.</p>\n<p><strong>downloadButton MouseListener - Code Snippet</strong></p>\n<pre><code>  downloadButton.addMouseListener(new MouseAdapter() {\n            @Override\n            public void mouseClicked(MouseEvent e) {\n                if (outputPath.getText().isEmpty() || link.getText().isEmpty()) {\n                    // some error handling\n                } else {\n                    try {\n                        download(link.getText(), outputPath.getText());\n                    } catch (URISyntaxException ex) {\n                        throw new RuntimeException(ex);\n                    }\n                }\n            }\n        });\n</code></pre>\n<p><strong>download(string linkYt, String path) Method - Code Snippet</strong></p>\n<pre><code>private void download(String linkYT, String path) throws URISyntaxException {\n\n        // This folder &quot;Libs&quot; is also within the .Jar file.\n        Path ytDlpPath = getFilePath(&quot;/Libs/yt-dlp.exe&quot;);\n\n        String os = System.getProperty(&quot;os.name&quot;).toLowerCase();\n\n        Process process = null;\n        try {\n            ProcessBuilder processBuilder;\n        \n          processBuilder = new ProcessBuilder(ytDlpPath.toString(), &quot;-f&quot;, \n          &quot;bestaudio&quot;, &quot;-x&quot;, &quot;--  audio-format&quot;, &quot;wav&quot; , &quot;--output&quot;, path + &quot;/%(title)s.%(ext)s&quot;,         &quot;ytsearch:&quot; + linkYT);\n            \n            process = processBuilder.start();\n            process.waitFor();\n\n            int exitCode = process.exitValue();\n\n            if (exitCode != 0) {\n                // some error handling\n            } else {\n                // download success \n            }\n\n        } \n            catch (IOException | InterruptedException e) {\n            e.printStackTrace();\n        }\n\n    }\n</code></pre>\n<p>So far I have tried debugging the code, however as I have previously mentioned -&gt; the &quot;Download&quot; button unresponsiveness only happens while I am using/executing the program within the .Jar file. I cannot seem to find a solution. :(**<br />\nThanks in advance,<br />\nStan**<code>enter code here</code></p>\n<p><em><strong>EDIT:</strong></em>\n<strong>getFilePath() Method - Code Snippet</strong></p>\n<pre><code>    private Path getFilePath(String resourcePath) {\n        try {\n            return Paths.get(getClass().getResource(resourcePath).toURI());\n        } catch (URISyntaxException e) {\n            throw new RuntimeException(&quot;Failed to get resource file path: &quot; + resourcePath, e);\n        }\n    }\n</code></pre>\n"},{"tags":["java","pdf","text","pdfbox"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1687524133,"post_id":76539773,"comment_id":134952892,"body_markdown":"*&quot;All the code above (except the splitting of the text and cleaning of the lines) is running inside a loop which repeats one time per page of the original document.&quot;* - Most likely this code frame (which you don&#39;t show) is buggy. Furthermore, you draw all text in the line starting at 50, 700. This most likely is not what you want.  Also you have too many `endMarkedContent` calls.","body":"<i>&quot;All the code above (except the splitting of the text and cleaning of the lines) is running inside a loop which repeats one time per page of the original document.&quot;</i> - Most likely this code frame (which you don&#39;t show) is buggy. Furthermore, you draw all text in the line starting at 50, 700. This most likely is not what you want.  Also you have too many <code>endMarkedContent</code> calls."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1687524275,"post_id":76539773,"comment_id":134952925,"body_markdown":"By the way, are you sure you should split at `&quot;\\\\r\\\\n&quot;` instead of at `&quot;\\\\n&quot;`? Have you checked whether your `lines` look like you think they do?","body":"By the way, are you sure you should split at <code>&quot;\\\\r\\\\n&quot;</code> instead of at <code>&quot;\\\\n&quot;</code>? Have you checked whether your <code>lines</code> look like you think they do?"},{"owner":{"account_id":25536959,"reputation":9,"user_id":19323860,"display_name":"0xracer"},"score":0,"creation_date":1687767103,"post_id":76539773,"comment_id":134977247,"body_markdown":"@mkl I tried printing in screen the lines and they are correct but it&#39;s only showing the lines of the first page","body":"@mkl I tried printing in screen the lines and they are correct but it&#39;s only showing the lines of the first page"}],"owner":{"account_id":25536959,"reputation":9,"user_id":19323860,"display_name":"0xracer"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687520596,"creation_date":1687520596,"question_id":76539773,"body_markdown":"I have a long text (which I got by using PDFTextStripper) I splitted in lines by doing `text.split(&quot;\\\\r\\\\n&quot;);`, \r\n\r\nThen I remove control characters:\r\n\r\n    line = line.replaceAll(&quot;\\\\r\\\\n&quot;, &quot;&quot;);\r\n    line = line.replaceAll(&quot;\\\\r&quot;, &quot;&quot;);\r\n    line = line.replaceAll(&quot;\\\\n&quot;, &quot;&quot;);\r\n\r\nNow I declare the content stream and I set the font (newDoc and newPage are PDDocument and PDPage):\r\n\r\n        PDPageContentStream cs = new PDPageContentStream(newDoc, newPage);\r\n        cs.setFont(PDType1Font.HELVETICA, 12);\r\n\r\nAfter that, I write the text on the page. According to how the line starts (if the line starts with &quot;1.&quot; I want to write it with the COS tag H1, and if it starts with something else I want to write it as normal text):\r\n\r\n            for (String line : lines) {\r\n               \r\n                if (line.startsWith(&quot;1.&quot;)) {\r\n                    COSName tag = COSName.getPDFName(&quot;H1&quot;);\r\n                    cs.beginText();\r\n                    cs.newLineAtOffset(50, 700);  \r\n                    cs.beginMarkedContent(tag);                  \r\n                    cs.showText(line);\r\n                } else {\r\n                    cs.beginText();\r\n                    cs.newLineAtOffset(50, 700);\r\n                   \r\n                    cs.showText(line);\r\n                }\r\n                cs.endText();\r\n                cs.endMarkedContent();\r\n            }\r\n            cs.close();\r\n        }\r\n\r\nThen I save the doc. and close it:\r\n\r\n    newDoc.save(&quot;marked.pdf&quot;);\r\n    newDoc.close();\r\n\r\nThe problem is, when I run my program, the result PDF (marked.pdf) shows one line per page, and it should be showing all the lines of the first page on the first page and so on. \r\nThis is how it looks:\r\n[PDF Result][1]\r\n       \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/FLX9P.png\r\n\r\nAnother problem, is that the line should be ending when the page ends, but all the lines continue even if the page width ended. All the code above (except the splitting of the text and cleaning of the lines) is running inside a loop which repeats one time per page of the original document. If someone could give me some insights about working with this, I would be grateful.\r\n\r\nThanks in advance","title":"PDFBox not writing lines correctly in new PDDocument","body":"<p>I have a long text (which I got by using PDFTextStripper) I splitted in lines by doing <code>text.split(&quot;\\\\r\\\\n&quot;);</code>,</p>\n<p>Then I remove control characters:</p>\n<pre><code>line = line.replaceAll(&quot;\\\\r\\\\n&quot;, &quot;&quot;);\nline = line.replaceAll(&quot;\\\\r&quot;, &quot;&quot;);\nline = line.replaceAll(&quot;\\\\n&quot;, &quot;&quot;);\n</code></pre>\n<p>Now I declare the content stream and I set the font (newDoc and newPage are PDDocument and PDPage):</p>\n<pre><code>    PDPageContentStream cs = new PDPageContentStream(newDoc, newPage);\n    cs.setFont(PDType1Font.HELVETICA, 12);\n</code></pre>\n<p>After that, I write the text on the page. According to how the line starts (if the line starts with &quot;1.&quot; I want to write it with the COS tag H1, and if it starts with something else I want to write it as normal text):</p>\n<pre><code>        for (String line : lines) {\n           \n            if (line.startsWith(&quot;1.&quot;)) {\n                COSName tag = COSName.getPDFName(&quot;H1&quot;);\n                cs.beginText();\n                cs.newLineAtOffset(50, 700);  \n                cs.beginMarkedContent(tag);                  \n                cs.showText(line);\n            } else {\n                cs.beginText();\n                cs.newLineAtOffset(50, 700);\n               \n                cs.showText(line);\n            }\n            cs.endText();\n            cs.endMarkedContent();\n        }\n        cs.close();\n    }\n</code></pre>\n<p>Then I save the doc. and close it:</p>\n<pre><code>newDoc.save(&quot;marked.pdf&quot;);\nnewDoc.close();\n</code></pre>\n<p>The problem is, when I run my program, the result PDF (marked.pdf) shows one line per page, and it should be showing all the lines of the first page on the first page and so on.\nThis is how it looks:\n<a href=\"https://i.stack.imgur.com/FLX9P.png\" rel=\"nofollow noreferrer\">PDF Result</a></p>\n<p>Another problem, is that the line should be ending when the page ends, but all the lines continue even if the page width ended. All the code above (except the splitting of the text and cleaning of the lines) is running inside a loop which repeats one time per page of the original document. If someone could give me some insights about working with this, I would be grateful.</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","switch-statement"],"comments":[{"owner":{"account_id":1685604,"reputation":867,"user_id":1548977,"display_name":"Rich"},"score":3,"creation_date":1384265582,"post_id":19931408,"comment_id":29659562,"body_markdown":"as of 1.7(i think) it handles strings, but it only ever used to handle enums/ints, so maybe there&#39;s some legacy in there which won&#39;t allow nulls still. I&#39;m sure somebody will know why","body":"as of 1.7(i think) it handles strings, but it only ever used to handle enums/ints, so maybe there&#39;s some legacy in there which won&#39;t allow nulls still. I&#39;m sure somebody will know why"},{"owner":{"account_id":97082,"reputation":375006,"user_id":263525,"accept_rate":85,"display_name":"Denys S&#233;guret"},"score":1,"creation_date":1384266046,"post_id":19931408,"comment_id":29659837,"body_markdown":"In fact it would be interesting to know the real reasons (the one we all see in the JLS is really dubious).","body":"In fact it would be interesting to know the real reasons (the one we all see in the JLS is really dubious)."}],"answers":[{"tags":[],"owner":{"account_id":38612,"reputation":22579,"user_id":110933,"accept_rate":96,"display_name":"davek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1384265556,"creation_date":1384265556,"answer_id":19931476,"question_id":19931408,"body_markdown":"You can&#39;t `SWITCH` on strings and other data types that can be `null`. This behaviour has been changed in Java 7 to allow string-switches.\r\n\r\nSee this question for more info:\r\n\r\nhttps://stackoverflow.com/questions/338206/switch-statement-with-strings-in-java","title":"Why java switch statement can&#39;t handle null, since it has a &quot;default&quot; clause?","body":"<p>You can't <code>SWITCH</code> on strings and other data types that can be <code>null</code>. This behaviour has been changed in Java 7 to allow string-switches.</p>\n\n<p>See this question for more info:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/338206/switch-statement-with-strings-in-java\">Why can&#39;t I switch on a String?</a></p>\n"},{"tags":[],"owner":{"account_id":46972,"reputation":356179,"user_id":139010,"accept_rate":81,"display_name":"Matt Ball"},"down_vote_count":1,"up_vote_count":15,"is_accepted":true,"score":14,"last_activity_date":1384265739,"creation_date":1384265739,"answer_id":19931550,"question_id":19931408,"body_markdown":"As always, [it&#39;s in the JLS:][1]\n\n&gt; ## 14.11. The `switch` Statement\n&gt; **All of the following must be true, or a compile-time error occurs:**\n&gt;\n&gt; - ...\n&gt; - No switch label is `null`.\n&gt;\n&gt; ...  \n&gt; _The prohibition against using `null` as a switch label prevents one from writing code that can never be executed. If the switch expression is of a reference type, that is, `String` or a boxed primitive type or an enum type, then a run-time error will occur if the expression evaluates to `null` at run time. In the judgment of the designers of the Java programming language, this is a better outcome than silently skipping the entire `switch` statement or choosing to execute the statements (if any) after the `default` label (if any)._\n\n\n  [1]: http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.11","title":"Why java switch statement can&#39;t handle null, since it has a &quot;default&quot; clause?","body":"<p>As always, <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.11\" rel=\"noreferrer\">it's in the JLS:</a></p>\n<blockquote>\n<h2>14.11. The <code>switch</code> Statement</h2>\n<p><strong>All of the following must be true, or a compile-time error occurs:</strong></p>\n<ul>\n<li>...</li>\n<li>No switch label is <code>null</code>.</li>\n</ul>\n<p>...<br />\n<em>The prohibition against using <code>null</code> as a switch label prevents one from writing code that can never be executed. If the switch expression is of a reference type, that is, <code>String</code> or a boxed primitive type or an enum type, then a run-time error will occur if the expression evaluates to <code>null</code> at run time. In the judgment of the designers of the Java programming language, this is a better outcome than silently skipping the entire <code>switch</code> statement or choosing to execute the statements (if any) after the <code>default</code> label (if any).</em></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2987448,"reputation":975,"user_id":2535866,"accept_rate":67,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1384265785,"creation_date":1384265785,"answer_id":19931569,"question_id":19931408,"body_markdown":"This is by definition. I wouldn&#39;t lose too much time on this as it&#39;s in the specifications. \r\n\r\nOn the other hand I find this quite practical in fact, as in case of being null it doesn&#39; have a primitive type associated, so we can&#39;t know how to handle it properly.","title":"Why java switch statement can&#39;t handle null, since it has a &quot;default&quot; clause?","body":"<p>This is by definition. I wouldn't lose too much time on this as it's in the specifications. </p>\n\n<p>On the other hand I find this quite practical in fact, as in case of being null it doesn' have a primitive type associated, so we can't know how to handle it properly.</p>\n"},{"tags":[],"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1687520060,"creation_date":1384266521,"answer_id":19931850,"question_id":19931408,"body_markdown":"In short, this design choice is in the *spirit of Java*.\r\n\r\nThe decision to throw an NPE when a switch expression evaluates to `null` is along the lines of other decisions made in Java, which always prefer throwing an exception to silently handling the `null` in the &quot;obvious&quot; way. The general rule seems to be that, when in doubt, the Java designers choose the option without default behavior. This has the side-effect of requiring boilerplate code at every use site. \r\n\r\nSome would call this frustrating and unfortunate, but others disagree, maintaining that this is a safer decision.\r\n\r\nFor another potentially frustrating example see the *enchanced for* loop, which also throws an NPE if the collection is `null`, instead of acting as if the collection was empty. There are many more examples in the JDK library, where the caller must check all edge cases just to be allowed to treat them uniformly with the &quot;normal&quot; cases.\r\n\r\nAs a third notorious example, Java&#39;s checked exceptions require a lot of boilerplate to handle at every level of call stack depth, and lure less experienced programmers into several antipatterns. The results are often swallowed exceptions, the same exception being reported several times in the log, exceptions getting non-uniform handling at the wrong level of abstraction, etc.","title":"Why java switch statement can&#39;t handle null, since it has a &quot;default&quot; clause?","body":"<p>In short, this design choice is in the <em>spirit of Java</em>.</p>\n<p>The decision to throw an NPE when a switch expression evaluates to <code>null</code> is along the lines of other decisions made in Java, which always prefer throwing an exception to silently handling the <code>null</code> in the &quot;obvious&quot; way. The general rule seems to be that, when in doubt, the Java designers choose the option without default behavior. This has the side-effect of requiring boilerplate code at every use site.</p>\n<p>Some would call this frustrating and unfortunate, but others disagree, maintaining that this is a safer decision.</p>\n<p>For another potentially frustrating example see the <em>enchanced for</em> loop, which also throws an NPE if the collection is <code>null</code>, instead of acting as if the collection was empty. There are many more examples in the JDK library, where the caller must check all edge cases just to be allowed to treat them uniformly with the &quot;normal&quot; cases.</p>\n<p>As a third notorious example, Java's checked exceptions require a lot of boilerplate to handle at every level of call stack depth, and lure less experienced programmers into several antipatterns. The results are often swallowed exceptions, the same exception being reported several times in the log, exceptions getting non-uniform handling at the wrong level of abstraction, etc.</p>\n"}],"owner":{"display_name":"user1073494"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20245,"favorite_count":0,"down_vote_count":1,"up_vote_count":16,"closed_date":1497887289,"accepted_answer_id":19931550,"answer_count":4,"score":15,"last_activity_date":1687520060,"creation_date":1384265426,"question_id":19931408,"body_markdown":"Why java switch statement can&#39;t handle null, since it has a &quot;default&quot; clause?\r\n\r\nFor example, if you have something like\r\n\r\n       switch(value){\r\n         case VAL1: do_something1(); break;\r\n         case VAL2: do_something2(); break;\r\n         default: do_something3(); \r\n       }\r\n\r\nshouldn&#39;t &quot;default&quot; deal with any other value, such as null?","title":"Why java switch statement can&#39;t handle null, since it has a &quot;default&quot; clause?","body":"<p>Why java switch statement can't handle null, since it has a \"default\" clause?</p>\n\n<p>For example, if you have something like</p>\n\n<pre><code>   switch(value){\n     case VAL1: do_something1(); break;\n     case VAL2: do_something2(); break;\n     default: do_something3(); \n   }\n</code></pre>\n\n<p>shouldn't \"default\" deal with any other value, such as null?</p>\n"},{"tags":["java","c#","servlets","dotnet-httpclient"],"comments":[{"owner":{"account_id":3838048,"reputation":37100,"user_id":3181933,"accept_rate":78,"display_name":"ProgrammingLlama"},"score":0,"creation_date":1687241443,"post_id":76511782,"comment_id":134904872,"body_markdown":"How have you verified that the issue is on the C# side?","body":"How have you verified that the issue is on the C# side?"},{"owner":{"account_id":9969746,"reputation":1,"user_id":21052072,"display_name":"Robo-SC"},"score":0,"creation_date":1687241985,"post_id":76511782,"comment_id":134904947,"body_markdown":"I have another vba client that is working ok on the same servlet.","body":"I have another vba client that is working ok on the same servlet."},{"owner":{"account_id":9969746,"reputation":1,"user_id":21052072,"display_name":"Robo-SC"},"score":0,"creation_date":1687242239,"post_id":76511782,"comment_id":134905002,"body_markdown":"I get a 200K response back and I see the request has reached the server but the servlet is not able to get any content.","body":"I get a 200K response back and I see the request has reached the server but the servlet is not able to get any content."},{"owner":{"account_id":3838048,"reputation":37100,"user_id":3181933,"accept_rate":78,"display_name":"ProgrammingLlama"},"score":1,"creation_date":1687242268,"post_id":76511782,"comment_id":134905006,"body_markdown":"Then use a tool like Telerik&#39;s Fiddler to compare the requests made by .NET and VBA, see what&#39;s different, and then modify your C# code to match. .NET&#39;s HttpClient is for sure sending `loginString`, so it seems like the servlet is expecting something else. Perhaps it expects form-encoded data, or a multipart content request. And perhaps also show your working VBA code?","body":"Then use a tool like Telerik&#39;s Fiddler to compare the requests made by .NET and VBA, see what&#39;s different, and then modify your C# code to match. .NET&#39;s HttpClient is for sure sending <code>loginString</code>, so it seems like the servlet is expecting something else. Perhaps it expects form-encoded data, or a multipart content request. And perhaps also show your working VBA code?"},{"owner":{"account_id":9969746,"reputation":1,"user_id":21052072,"display_name":"Robo-SC"},"score":0,"creation_date":1687243448,"post_id":76511782,"comment_id":134905204,"body_markdown":"Dim res As String\n    res = &quot;&quot;\n    If req Is Nothing Then\n        Set req = New WinHttp.WinHttpRequest\n    End If\n    req.SetTimeouts 1800000, 1800000, 1800000, 1800000\n    m_serverURL = getserverurl       \n    req.Open &quot;POST&quot;, m_serverURL &amp; &quot;/&quot; &amp; Service, False\n    req.setRequestHeader &quot;Content-Length&quot;, &quot;&quot; &amp; VBA.Len(buffer)\n    req.setRequestHeader &quot;X-client&quot;, &quot;WinExcel&quot;      \n    req.Send buffer","body":"Dim res As String     res = &quot;&quot;     If req Is Nothing Then         Set req = New WinHttp.WinHttpRequest     End If     req.SetTimeouts 1800000, 1800000, 1800000, 1800000     m_serverURL = getserverurl            req.Open &quot;POST&quot;, m_serverURL &amp; &quot;/&quot; &amp; Service, False     req.setRequestHeader &quot;Content-Length&quot;, &quot;&quot; &amp; VBA.Len(buffer)     req.setRequestHeader &quot;X-client&quot;, &quot;WinExcel&quot;           req.Send buffer"},{"owner":{"account_id":3838048,"reputation":37100,"user_id":3181933,"accept_rate":78,"display_name":"ProgrammingLlama"},"score":0,"creation_date":1687243611,"post_id":76511782,"comment_id":134905232,"body_markdown":"You can (and should) edit your question.","body":"You can (and should) edit your question."},{"owner":{"account_id":3838048,"reputation":37100,"user_id":3181933,"accept_rate":78,"display_name":"ProgrammingLlama"},"score":0,"creation_date":1687247198,"post_id":76511782,"comment_id":134905847,"body_markdown":"I just realised your MIME type in C# is wrong. It should be `text/plain` not `application/text`.","body":"I just realised your MIME type in C# is wrong. It should be <code>text&#47;plain</code> not <code>application&#47;text</code>."}],"answers":[{"tags":[],"owner":{"account_id":10412338,"reputation":16,"user_id":7677381,"display_name":"Teerapon Jeamphue"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687519822,"creation_date":1687249382,"answer_id":76512722,"question_id":76511782,"body_markdown":"Please try this\r\n&lt;!-- language: csharp --&gt;\r\n    string loginBuffer = &quot;test&quot;;\r\n    HttpClient httpClient = new HttpClient();\r\n            \r\n    string url = &quot;https://sampleserver.com/Login&quot;;\r\n    StringContent loginString = new StringContent(loginBuffer, Encoding.UTF8, &quot;text/plain&quot;);\r\n    \r\n    HttpResponseMessage response = await httpClient.PostAsync(url, loginString);             ","title":"HttpClient Post sends a null content","body":"<p>Please try this</p>\n<pre class=\"lang-cs prettyprint-override\"><code>string loginBuffer = &quot;test&quot;;\nHttpClient httpClient = new HttpClient();\n        \nstring url = &quot;https://sampleserver.com/Login&quot;;\nStringContent loginString = new StringContent(loginBuffer, Encoding.UTF8, &quot;text/plain&quot;);\n\nHttpResponseMessage response = await httpClient.PostAsync(url, loginString);             \n</code></pre>\n"}],"owner":{"account_id":9969746,"reputation":1,"user_id":21052072,"display_name":"Robo-SC"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687519822,"creation_date":1687241179,"question_id":76511782,"body_markdown":"I am tryng to send a post request on HttpClient in C# to a java servlet engine but the server receives a Null cotnent. Client is C3 and Server is Java servlet engine. The request reaches server but errors out on null cotnent.\r\n\r\nC# Code that sends the buffer\r\n\r\n```cs\r\nstring loginBuffer = &quot;test&quot;;\r\nHttpClient hClient = GetClient();\r\nusing StringContent loginString = new StringContent(loginBuffer, UnicodeEncoding.UTF8, &quot;application/text&quot;);\r\n var response1 = await hClient.PostAsync(new Uri(&quot;https://sampleserver.com/Login&quot;), loginString);\r\n```\r\n\r\n**Server Code that finds a null content in reading the get ReqiestBar\r\n**\r\n\r\n```java\r\n\tprotected StringBuffer getRequestBuffer(ServletRequest request) throws IOException \r\n\t{\r\n\t\tStringBuffer sb = null;\r\n\t\ttry\r\n\t\t{\r\n\t\t\tsb = new StringBuffer();\r\n\t\t\tBufferedReader br = request.getReader();\r\n\t\t\tString line = new String();\r\n\t\t\tline = br.readLine();\r\n```\r\n\r\nThe same servlet works when connecting from a VBA code \r\n\r\n```vba\r\nDim res As String res = &quot;&quot; \r\n\r\nIf req Is Nothing Then \r\n\r\n        Set req = New WinHttp.WinHttpRequest \r\n\r\nEnd If \r\n\r\nreq.SetTimeouts 1800000, 1800000, 1800000, 1800000 m_serverURL = \r\n\r\ngetserverurl req.Open &quot;POST&quot;, m_serverURL &amp; &quot;/&quot; &amp; Service, False \r\n\r\nreq.setRequestHeader &quot;Content-Length&quot;, &quot;&quot; &amp; VBA.Len(buffer) \r\n\r\nreq.setRequestHeader &quot;X-client&quot;, &quot;WinExcel&quot; \r\n\r\nreq.Send buffer\r\n\r\n```","title":"HttpClient Post sends a null content","body":"<p>I am tryng to send a post request on HttpClient in C# to a java servlet engine but the server receives a Null cotnent. Client is C3 and Server is Java servlet engine. The request reaches server but errors out on null cotnent.</p>\n<p>C# Code that sends the buffer</p>\n<pre class=\"lang-cs prettyprint-override\"><code>string loginBuffer = &quot;test&quot;;\nHttpClient hClient = GetClient();\nusing StringContent loginString = new StringContent(loginBuffer, UnicodeEncoding.UTF8, &quot;application/text&quot;);\n var response1 = await hClient.PostAsync(new Uri(&quot;https://sampleserver.com/Login&quot;), loginString);\n</code></pre>\n<p>**Server Code that finds a null content in reading the get ReqiestBar\n**</p>\n<pre class=\"lang-java prettyprint-override\"><code>    protected StringBuffer getRequestBuffer(ServletRequest request) throws IOException \n    {\n        StringBuffer sb = null;\n        try\n        {\n            sb = new StringBuffer();\n            BufferedReader br = request.getReader();\n            String line = new String();\n            line = br.readLine();\n</code></pre>\n<p>The same servlet works when connecting from a VBA code</p>\n<pre class=\"lang-vb prettyprint-override\"><code>Dim res As String res = &quot;&quot; \n\nIf req Is Nothing Then \n\n        Set req = New WinHttp.WinHttpRequest \n\nEnd If \n\nreq.SetTimeouts 1800000, 1800000, 1800000, 1800000 m_serverURL = \n\ngetserverurl req.Open &quot;POST&quot;, m_serverURL &amp; &quot;/&quot; &amp; Service, False \n\nreq.setRequestHeader &quot;Content-Length&quot;, &quot;&quot; &amp; VBA.Len(buffer) \n\nreq.setRequestHeader &quot;X-client&quot;, &quot;WinExcel&quot; \n\nreq.Send buffer\n\n</code></pre>\n"},{"tags":["java","selenium-webdriver","tags","cucumber","testng"],"comments":[{"owner":{"account_id":15496633,"reputation":3080,"user_id":11179336,"display_name":"Ajeet Verma"},"score":0,"creation_date":1687500238,"post_id":76537415,"comment_id":134948200,"body_markdown":"Please check these links in order to better define your problem. https://stackoverflow.com/help/minimal-reproducible-example \nhttps://stackoverflow.com/help/how-to-ask","body":"Please check these links in order to better define your problem. <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>  <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"},{"owner":{"account_id":28490665,"reputation":66,"user_id":21803364,"display_name":"Tamas Demeny"},"score":1,"creation_date":1687513428,"post_id":76537415,"comment_id":134950646,"body_markdown":"Since Scenario_2 hast tags `@tag2 @tag3` and you are running `tags = &quot;@tag2 and @tag3&quot;,`  it is normal to execute Scenario_2","body":"Since Scenario_2 hast tags <code>@tag2 @tag3</code> and you are running <code>tags = &quot;@tag2 and @tag3&quot;,</code>  it is normal to execute Scenario_2"}],"owner":{"account_id":9718904,"reputation":11,"user_id":22077359,"display_name":"asn"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1687519811,"creation_date":1687499445,"question_id":76537415,"body_markdown":"In Cucumber Feature file I have a Scenario called Scenario_2 with the tag: @tag1 @tag2 @tag3. \r\nIn the Runner class I use tags = &quot;@tag2 and @tag3&quot;. \r\nActually there is not matching tags in the Feature file but it prints all the lines in the Scenario_2`\r\nHow it is possible?.\r\n\r\n    @tag1 @tag2 @tag3   \r\n    Scenario: Scenario_2\r\n    Given This is the first step in Second Scenario \r\n    When This is the second step in Second Scenario \r\n    Then This is the third step in Second Scenario\r\n\r\n    @RunWith(Cucumber.class)\r\n    @CucumberOptions(features = {&quot;src/test/resources/features/cucumbertags_26.feature&quot;}, \r\n                         glue = {&quot;com.stepdefinitions&quot;}, \r\n                         tags = &quot;@tag2 and @tag3&quot;,\r\n                         monochrome = true)\r\n    public class TestRunner_SamplePage \r\n    {\r\n    \r\n    }\r\n    \r\n    Output:\r\n    -------\r\n    ^This is the first step in Second Scenario$\r\n    ^This is the second step in Second Scenario$\r\n    ^This is the third step in Second Scenario$\r\n\r\n","title":"Tags in Cucumber - Multiple Tags","body":"<p>In Cucumber Feature file I have a Scenario called Scenario_2 with the tag: @tag1 @tag2 @tag3.\nIn the Runner class I use tags = &quot;@tag2 and @tag3&quot;.\nActually there is not matching tags in the Feature file but it prints all the lines in the Scenario_2`\nHow it is possible?.</p>\n<pre><code>@tag1 @tag2 @tag3   \nScenario: Scenario_2\nGiven This is the first step in Second Scenario \nWhen This is the second step in Second Scenario \nThen This is the third step in Second Scenario\n\n@RunWith(Cucumber.class)\n@CucumberOptions(features = {&quot;src/test/resources/features/cucumbertags_26.feature&quot;}, \n                     glue = {&quot;com.stepdefinitions&quot;}, \n                     tags = &quot;@tag2 and @tag3&quot;,\n                     monochrome = true)\npublic class TestRunner_SamplePage \n{\n\n}\n\nOutput:\n-------\n^This is the first step in Second Scenario$\n^This is the second step in Second Scenario$\n^This is the third step in Second Scenario$\n</code></pre>\n"},{"tags":["java","datetime","simpledateformat"],"comments":[{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1354010431,"post_id":13581608,"comment_id":18612919,"body_markdown":"`st.toLowerCase()` will do it and there is no easier way.","body":"<code>st.toLowerCase()</code> will do it and there is no easier way."},{"owner":{"account_id":701757,"reputation":121151,"user_id":592139,"display_name":"Ian Roberts"},"score":4,"creation_date":1354010948,"post_id":13581608,"comment_id":18613130,"body_markdown":"The trouble is that, like month and day names, the AM/PM marker is locale-specific - it may not make sense in some languages to force everything to lower case (leaving aside the fact that some languages just use 24 hour clock for everything and don&#39;t really have terms for AM and PM at all).","body":"The trouble is that, like month and day names, the AM/PM marker is locale-specific - it may not make sense in some languages to force everything to lower case (leaving aside the fact that some languages just use 24 hour clock for everything and don&#39;t really have terms for AM and PM at all)."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1638619660,"post_id":13581608,"comment_id":124139351,"body_markdown":"For new readers to this question I recommend you don’t use `SimpleDateFormat` and `Date`. Those classes are poorly designed and long outdated, the former in particular notoriously troublesome. Instead use `Instant`, `ZoneId` `ZonedDateTime` and `DateTimeFormatter`, all from [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/).","body":"For new readers to this question I recommend you don’t use <code>SimpleDateFormat</code> and <code>Date</code>. Those classes are poorly designed and long outdated, the former in particular notoriously troublesome. Instead use <code>Instant</code>, <code>ZoneId</code> <code>ZonedDateTime</code> and <code>DateTimeFormatter</code>, all from <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>."}],"answers":[{"tags":[],"owner":{"account_id":7450,"reputation":269210,"user_id":12960,"display_name":"Brian Agnew"},"down_vote_count":1,"up_vote_count":93,"is_accepted":true,"score":92,"last_activity_date":1539017236,"creation_date":1354010561,"answer_id":13581677,"question_id":13581608,"body_markdown":"Unfortunately the standard formatting methods don&#39;t let you do that. Nor does Joda. I think you&#39;re going to have to process your formatted date by a simple post-format replace.\r\n\r\n    String str = oldstr.replace(&quot;AM&quot;, &quot;am&quot;).replace(&quot;PM&quot;,&quot;pm&quot;);\r\n\r\nYou could use the `replaceAll()` method that uses regepxs, but I think the above is perhaps sufficient. I&#39;m *not* doing a blanket `toLowerCase()` since that could screw up formatting if you change the format string in the future to contain (say) month names or similar.\r\n\r\nEDIT: [James Jithin&#39;s solution](https://stackoverflow.com/a/13581910/2911458) looks a lot better, and the proper way to do this (as noted in the comments)\r\n","title":"Displaying AM and PM in lower case after date formatting","body":"<p>Unfortunately the standard formatting methods don't let you do that. Nor does Joda. I think you're going to have to process your formatted date by a simple post-format replace.</p>\n\n<pre><code>String str = oldstr.replace(\"AM\", \"am\").replace(\"PM\",\"pm\");\n</code></pre>\n\n<p>You could use the <code>replaceAll()</code> method that uses regepxs, but I think the above is perhaps sufficient. I'm <em>not</em> doing a blanket <code>toLowerCase()</code> since that could screw up formatting if you change the format string in the future to contain (say) month names or similar.</p>\n\n<p>EDIT: <a href=\"https://stackoverflow.com/a/13581910/2911458\">James Jithin's solution</a> looks a lot better, and the proper way to do this (as noted in the comments)</p>\n"},{"tags":[],"owner":{"account_id":450898,"reputation":15332,"user_id":846476,"accept_rate":86,"display_name":"RNJ"},"down_vote_count":2,"up_vote_count":7,"is_accepted":false,"score":5,"last_activity_date":1354010587,"creation_date":1354010587,"answer_id":13581690,"question_id":13581608,"body_markdown":"Try this:\r\n\r\n    System.out.println(&quot;time is &quot; + ts.toLowerCase());\r\n\r\nAlthough you may be able to create a custom format as detailed [here][1] and [here][2]\r\n\r\nUnfortunately out of the [box][3] the AM and PM do not seem to be customisable in the standard SimpleDateFormat class\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/223325/customizing-java-text-formatters-for-different-locales\r\n  [2]: http://docs.oracle.com/javase/tutorial/i18n/format/simpleDateFormat.html\r\n  [3]: http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html","title":"Displaying AM and PM in lower case after date formatting","body":"<p>Try this:</p>\n\n<pre><code>System.out.println(\"time is \" + ts.toLowerCase());\n</code></pre>\n\n<p>Although you may be able to create a custom format as detailed <a href=\"https://stackoverflow.com/questions/223325/customizing-java-text-formatters-for-different-locales\">here</a> and <a href=\"http://docs.oracle.com/javase/tutorial/i18n/format/simpleDateFormat.html\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>Unfortunately out of the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html\" rel=\"nofollow noreferrer\">box</a> the AM and PM do not seem to be customisable in the standard SimpleDateFormat class</p>\n"},{"tags":[],"owner":{"account_id":285638,"reputation":10283,"user_id":584420,"accept_rate":60,"display_name":"James Jithin"},"down_vote_count":1,"up_vote_count":102,"is_accepted":false,"score":101,"last_activity_date":1417066902,"creation_date":1354011284,"answer_id":13581910,"question_id":13581608,"body_markdown":"This works\r\n\r\n    public class Timeis {\r\n    \tpublic static void main(String s[]) {\r\n    \t\tlong ts = 1022895271767L;\r\n    \t\tSimpleDateFormat sdf = new SimpleDateFormat(&quot; MMM d &#39;at&#39; hh:mm a&quot;);\r\n    \t\t// CREATE DateFormatSymbols WITH ALL SYMBOLS FROM (DEFAULT) Locale\r\n    \t\tDateFormatSymbols symbols = new DateFormatSymbols(Locale.getDefault());\r\n    \t\t// OVERRIDE SOME symbols WHILE RETAINING OTHERS\r\n    \t\tsymbols.setAmPmStrings(new String[] { &quot;am&quot;, &quot;pm&quot; });\r\n    \t\tsdf.setDateFormatSymbols(symbols);\r\n    \t\tString st = sdf.format(ts);\r\n    \t\tSystem.out.println(&quot;time is &quot; + st);\r\n    \t}\r\n    }","title":"Displaying AM and PM in lower case after date formatting","body":"<p>This works</p>\n\n<pre><code>public class Timeis {\n    public static void main(String s[]) {\n        long ts = 1022895271767L;\n        SimpleDateFormat sdf = new SimpleDateFormat(\" MMM d 'at' hh:mm a\");\n        // CREATE DateFormatSymbols WITH ALL SYMBOLS FROM (DEFAULT) Locale\n        DateFormatSymbols symbols = new DateFormatSymbols(Locale.getDefault());\n        // OVERRIDE SOME symbols WHILE RETAINING OTHERS\n        symbols.setAmPmStrings(new String[] { \"am\", \"pm\" });\n        sdf.setDateFormatSymbols(symbols);\n        String st = sdf.format(ts);\n        System.out.println(\"time is \" + st);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1123052,"reputation":121,"user_id":1110922,"display_name":"ShenYi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1438895553,"creation_date":1438895553,"answer_id":31865893,"question_id":13581608,"body_markdown":"James&#39;s answer is great if you want different style other than default am, pm. But I&#39;m afraid you need mapping between Locale and Locale specific AM/PM set to adopting the override. Now you simply use java built-in java.util.Formatter class. So an easy example looks like this:\r\n\r\n    System.out.println(String.format(Locale.UK, &quot;%1$tl%1$tp&quot;, LocalTime.now()));\r\n\r\nIt gives:\r\n\r\n    9pm\r\n\r\nTo note that if you want upper case, just replace &quot;%1$**t**p&quot; with &quot;%1$**T**p&quot;. You can find more details at http://docs.oracle.com/javase/8/docs/api/java/util/Formatter.html#dt. ","title":"Displaying AM and PM in lower case after date formatting","body":"<p>James's answer is great if you want different style other than default am, pm. But I'm afraid you need mapping between Locale and Locale specific AM/PM set to adopting the override. Now you simply use java built-in java.util.Formatter class. So an easy example looks like this:</p>\n\n<pre><code>System.out.println(String.format(Locale.UK, \"%1$tl%1$tp\", LocalTime.now()));\n</code></pre>\n\n<p>It gives:</p>\n\n<pre><code>9pm\n</code></pre>\n\n<p>To note that if you want upper case, just replace \"%1$<strong>t</strong>p\" with \"%1$<strong>T</strong>p\". You can find more details at <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Formatter.html#dt\" rel=\"nofollow\">http://docs.oracle.com/javase/8/docs/api/java/util/Formatter.html#dt</a>. </p>\n"},{"tags":[],"owner":{"account_id":541510,"reputation":2306,"user_id":910095,"display_name":"Nikola Mihajlović"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1525324691,"creation_date":1488098473,"answer_id":42466448,"question_id":13581608,"body_markdown":"**If you don&#39;t want to do string substitution, and are using Java 8** `javax.time`:\r\n\r\n\tMap&lt;Long, String&gt; ampm = new HashMap&lt;&gt;();\r\n\tampm.put(0l, &quot;am&quot;);\r\n\tampm.put(1l, &quot;pm&quot;);\r\n\t\r\n\tDateTimeFormatter dtf = new DateTimeFormatterBuilder()\r\n\t\t\t.appendPattern(&quot;E M/d h:mm&quot;)\r\n\t\t\t.appendText(ChronoField.AMPM_OF_DAY, ampm)\r\n\t\t\t.toFormatter()\r\n\t\t\t.withZone(ZoneId.of(&quot;America/Los_Angeles&quot;));\r\n\r\nIt&#39;s necessary to manually build a `DateTimeFormatter` (specifying individual pieces), as there is no pattern symbol for lowercase am/pm. You can use `appendPattern` before and after. \r\n\r\nI believe there is no way to substitute the default am/pm symbols, making this is the only way short of doing the string replace on the final string.","title":"Displaying AM and PM in lower case after date formatting","body":"<p><strong>If you don't want to do string substitution, and are using Java 8</strong> <code>javax.time</code>:</p>\n\n<pre><code>Map&lt;Long, String&gt; ampm = new HashMap&lt;&gt;();\nampm.put(0l, \"am\");\nampm.put(1l, \"pm\");\n\nDateTimeFormatter dtf = new DateTimeFormatterBuilder()\n        .appendPattern(\"E M/d h:mm\")\n        .appendText(ChronoField.AMPM_OF_DAY, ampm)\n        .toFormatter()\n        .withZone(ZoneId.of(\"America/Los_Angeles\"));\n</code></pre>\n\n<p>It's necessary to manually build a <code>DateTimeFormatter</code> (specifying individual pieces), as there is no pattern symbol for lowercase am/pm. You can use <code>appendPattern</code> before and after. </p>\n\n<p>I believe there is no way to substitute the default am/pm symbols, making this is the only way short of doing the string replace on the final string.</p>\n"},{"tags":[],"owner":{"account_id":8962222,"reputation":35,"user_id":6684402,"accept_rate":75,"display_name":"3zcs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1491308505,"creation_date":1491308505,"answer_id":43207130,"question_id":13581608,"body_markdown":"just add `toLowarCase()` like this \r\n\r\n    public class Timeis {\r\n    public static void main(String s[]) {\r\n          long ts = 1022895271767L;\r\n          String st = null;  \r\n          st = new SimpleDateFormat(&quot; MMM d &#39;at&#39; hh:mm a&quot;).format(ts).toLowerCase();\r\n          System.out.println(&quot;time is &quot; + ts);  \r\n    }\r\n    }\r\n\r\nand `toUpperCase()` if you want upper case ","title":"Displaying AM and PM in lower case after date formatting","body":"<p>just add <code>toLowarCase()</code> like this </p>\n\n<pre><code>public class Timeis {\npublic static void main(String s[]) {\n      long ts = 1022895271767L;\n      String st = null;  \n      st = new SimpleDateFormat(\" MMM d 'at' hh:mm a\").format(ts).toLowerCase();\n      System.out.println(\"time is \" + ts);  \n}\n}\n</code></pre>\n\n<p>and <code>toUpperCase()</code> if you want upper case </p>\n"},{"tags":[],"owner":{"account_id":12587300,"reputation":71,"user_id":9155615,"display_name":"Mourya"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1514628426,"creation_date":1514627278,"answer_id":48032755,"question_id":13581608,"body_markdown":"    Calendar c = Calendar.getInstance();\r\n\r\n    System.out.println(&quot;Current time =&gt; &quot; + c.getTime());\r\n\r\n    SimpleDateFormat df = new SimpleDateFormat(&quot;HH:mm a&quot;);\r\n    String formattedDate = df.format(c.getTime());\r\n    formattedDate = formattedDate.replace(&quot;a.m.&quot;, &quot;AM&quot;).replace(&quot;p.m.&quot;,&quot;PM&quot;);\r\n\r\n    TextView textView = findViewById(R.id.textView);\r\n    textView.setText(formattedDate);","title":"Displaying AM and PM in lower case after date formatting","body":"<pre><code>Calendar c = Calendar.getInstance();\n\nSystem.out.println(\"Current time =&gt; \" + c.getTime());\n\nSimpleDateFormat df = new SimpleDateFormat(\"HH:mm a\");\nString formattedDate = df.format(c.getTime());\nformattedDate = formattedDate.replace(\"a.m.\", \"AM\").replace(\"p.m.\",\"PM\");\n\nTextView textView = findViewById(R.id.textView);\ntextView.setText(formattedDate);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3759972,"reputation":1648,"user_id":3125287,"display_name":"dfostic"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1560863176,"creation_date":1560863176,"answer_id":56649881,"question_id":13581608,"body_markdown":"        String today = now.format(new DateTimeFormatterBuilder()\r\n                .appendPattern(&quot;MM/dd/yyyy &quot;)\r\n                .appendText(ChronoField.AMPM_OF_DAY)\r\n                .appendLiteral(&quot; (PST)&quot;)\r\n                .toFormatter(Locale.UK));\r\n\r\n// output =&gt; 06/18/2019 am (PST)\r\n\r\nLocale.UK =&gt; am or pm;\r\nLocale.US =&gt; AM or PM; try different locale for your needs (defaul, etc.)","title":"Displaying AM and PM in lower case after date formatting","body":"<pre><code>    String today = now.format(new DateTimeFormatterBuilder()\n            .appendPattern(\"MM/dd/yyyy \")\n            .appendText(ChronoField.AMPM_OF_DAY)\n            .appendLiteral(\" (PST)\")\n            .toFormatter(Locale.UK));\n</code></pre>\n\n<p>// output => 06/18/2019 am (PST)</p>\n\n<p>Locale.UK => am or pm;\nLocale.US => AM or PM; try different locale for your needs (defaul, etc.)</p>\n"},{"tags":[],"owner":{"account_id":16530004,"reputation":713,"user_id":11943569,"display_name":"Shashank Pandey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637749873,"creation_date":1637749873,"answer_id":70094489,"question_id":13581608,"body_markdown":"This is how we perform in android studio&#39;s java code pass unix timestamp as parameter\r\n     \r\n    private String convertTimeToTimeStamp(Long timeStamp){\r\n                SimpleDateFormat sdf=new SimpleDateFormat(&quot;hh:mm aaa&quot;, Locale.getDefault());\r\n                return sdf.format(timeStamp);\r\n            }\r\n\r\nfunction returns time of format 09:30 PM","title":"Displaying AM and PM in lower case after date formatting","body":"<p>This is how we perform in android studio's java code pass unix timestamp as parameter</p>\n<pre><code>private String convertTimeToTimeStamp(Long timeStamp){\n            SimpleDateFormat sdf=new SimpleDateFormat(&quot;hh:mm aaa&quot;, Locale.getDefault());\n            return sdf.format(timeStamp);\n        }\n</code></pre>\n<p>function returns time of format 09:30 PM</p>\n"},{"tags":[],"owner":{"account_id":9553538,"reputation":633,"user_id":7096838,"display_name":"Agnibha"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1659505551,"creation_date":1659505551,"answer_id":73216763,"question_id":13581608,"body_markdown":"```\r\nnew SimpleDateFormat(&quot;MMM d &#39;at&#39; hh:mm a&quot;, new Locale(&quot;en&quot;, &quot;IN&quot;));\r\n```\r\n\r\nchange to a locale that uses am/pm instead of AM/PM. ","title":"Displaying AM and PM in lower case after date formatting","body":"<pre><code>new SimpleDateFormat(&quot;MMM d 'at' hh:mm a&quot;, new Locale(&quot;en&quot;, &quot;IN&quot;));\n</code></pre>\n<p>change to a locale that uses am/pm instead of AM/PM.</p>\n"},{"tags":[],"owner":{"account_id":9742102,"reputation":13,"user_id":7223306,"display_name":"Isuru Gunasekara"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687519769,"creation_date":1687519769,"answer_id":76539671,"question_id":13581608,"body_markdown":"dateString.toLowerCase();\r\n========================\r\n\r\nString timeString= \r\nnew SimpleDateFormat(&quot; MMM d &#39;at&#39; hh:mma&quot;)\r\n.format(timestaamp)\r\n.toLowerCase();\r\n\r\nSystem.out.println(&quot;time is &quot; + tstimeString); ","title":"Displaying AM and PM in lower case after date formatting","body":"<h1>dateString.toLowerCase();</h1>\n<p>String timeString=\nnew SimpleDateFormat(&quot; MMM d 'at' hh:mma&quot;)\n.format(timestaamp)\n.toLowerCase();</p>\n<p>System.out.println(&quot;time is &quot; + tstimeString);</p>\n"}],"owner":{"account_id":469868,"reputation":5329,"user_id":876739,"accept_rate":57,"display_name":"xrcwrn"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76845,"favorite_count":0,"down_vote_count":0,"up_vote_count":81,"accepted_answer_id":13581677,"answer_count":11,"score":81,"last_activity_date":1687519769,"creation_date":1354010359,"question_id":13581608,"body_markdown":"After formatting a datetime, the time displays AM or PM in upper case, but I want it in lower case like am or pm.\r\n\r\nThis is my code:\r\n\r\n    public class Timeis {\r\n        public static void main(String s[]) {\r\n            long ts = 1022895271767L;\r\n            String st = null;  \r\n            st = new SimpleDateFormat(&quot; MMM d &#39;at&#39; hh:mm a&quot;).format(ts);\r\n            System.out.println(&quot;time is &quot; + ts);  \r\n        }\r\n    }","title":"Displaying AM and PM in lower case after date formatting","body":"<p>After formatting a datetime, the time displays AM or PM in upper case, but I want it in lower case like am or pm.</p>\n\n<p>This is my code:</p>\n\n<pre><code>public class Timeis {\n    public static void main(String s[]) {\n        long ts = 1022895271767L;\n        String st = null;  \n        st = new SimpleDateFormat(\" MMM d 'at' hh:mm a\").format(ts);\n        System.out.println(\"time is \" + ts);  \n    }\n}\n</code></pre>\n"},{"tags":["java","android","json","sharedpreferences","gson"],"comments":[{"owner":{"account_id":369687,"reputation":56616,"user_id":717214,"accept_rate":86,"display_name":"Aleks G"},"score":2,"creation_date":1418379056,"post_id":27441249,"comment_id":43322090,"body_markdown":"I&#39;m tempted to vote to close this as off-topic as requesting an off-the-site library, but then it&#39;s reasonably specific about &quot;proper&quot; way to replace a deprecated, more-or-less standard, library.","body":"I&#39;m tempted to vote to close this as off-topic as requesting an off-the-site library, but then it&#39;s reasonably specific about &quot;proper&quot; way to replace a deprecated, more-or-less standard, library."},{"owner":{"account_id":1424271,"reputation":14854,"user_id":1348215,"accept_rate":78,"display_name":"Egor Neliuba"},"score":6,"creation_date":1418379164,"post_id":27441249,"comment_id":43322162,"body_markdown":"Gson is not deprecated. It was last updated November, 20th 2014. See [its official repository](https://code.google.com/p/google-gson/). The downloads page was not updated ([see why](https://groups.google.com/forum/#!topic/google-gson/diQlloTQuCk)), but the [Maven Repository](http://search.maven.org/#artifactdetails%7Ccom.google.code.gson%7Cgson%7C2.3.1%7Cjar) was. The last version is 2.3.1.","body":"Gson is not deprecated. It was last updated November, 20th 2014. See <a href=\"https://code.google.com/p/google-gson/\" rel=\"nofollow noreferrer\">its official repository</a>. The downloads page was not updated (<a href=\"https://groups.google.com/forum/#!topic/google-gson/diQlloTQuCk\" rel=\"nofollow noreferrer\">see why</a>), but the <a href=\"http://search.maven.org/#artifactdetails%7Ccom.google.code.gson%7Cgson%7C2.3.1%7Cjar\" rel=\"nofollow noreferrer\">Maven Repository</a> was. The last version is 2.3.1."},{"owner":{"account_id":1157978,"reputation":1596,"user_id":1138083,"accept_rate":34,"display_name":"M Vignesh"},"score":0,"creation_date":1418379329,"post_id":27441249,"comment_id":43322258,"body_markdown":"@Aleks Yes as you said I am looking for an proper library. @ Egor Where can I get the latest jar file or else I have to use the old one which was deprecated. Thanks.","body":"@Aleks Yes as you said I am looking for an proper library. @ Egor Where can I get the latest jar file or else I have to use the old one which was deprecated. Thanks."},{"owner":{"account_id":1424271,"reputation":14854,"user_id":1348215,"accept_rate":78,"display_name":"Egor Neliuba"},"score":1,"creation_date":1418379373,"post_id":27441249,"comment_id":43322285,"body_markdown":"@MVignesh you can download it from the [Maven Repository](http://search.maven.org/remotecontent?filepath=com/google/code/gson/gson/2.3.1/gson-2.3.1.jar).","body":"@MVignesh you can download it from the <a href=\"http://search.maven.org/remotecontent?filepath=com/google/code/gson/gson/2.3.1/gson-2.3.1.jar\" rel=\"nofollow noreferrer\">Maven Repository</a>."}],"answers":[{"tags":[],"owner":{"account_id":235287,"reputation":753,"user_id":502003,"display_name":"a--"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1418379530,"creation_date":1418379530,"answer_id":27441449,"question_id":27441249,"body_markdown":"GSON is not deprecated and seems to be well supported ([commit history][1]). If you are looking for an alternative [Jackson][2] is a popular one. \r\n\r\n\r\n  [1]: https://code.google.com/p/google-gson/source/list\r\n  [2]: http://wiki.fasterxml.com/JacksonHome","title":"GSON is deprecated. Which one we can use to serialize and deserialize Java objects to and from JSON?","body":"<p>GSON is not deprecated and seems to be well supported (<a href=\"https://code.google.com/p/google-gson/source/list\">commit history</a>). If you are looking for an alternative <a href=\"http://wiki.fasterxml.com/JacksonHome\">Jackson</a> is a popular one. </p>\n"},{"tags":[],"owner":{"account_id":5754280,"reputation":403,"user_id":4542793,"display_name":"Etun"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1423988380,"creation_date":1423988380,"answer_id":28524232,"question_id":27441249,"body_markdown":"I think the reason for that is that google suggests to switch to Android Studio and if you do so there&#39;s no need for downloading jar, you simple put **compile &#39;com.google.code.gson:gson:2.3.1&#39;**   in dependencies. ","title":"GSON is deprecated. Which one we can use to serialize and deserialize Java objects to and from JSON?","body":"<p>I think the reason for that is that google suggests to switch to Android Studio and if you do so there's no need for downloading jar, you simple put <strong>compile 'com.google.code.gson:gson:2.3.1'</strong>   in dependencies. </p>\n"},{"tags":[],"owner":{"account_id":300561,"reputation":6020,"user_id":607767,"accept_rate":89,"display_name":"Lovro Pandžić"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687519680,"creation_date":1687519680,"answer_id":76539659,"question_id":27441249,"body_markdown":"From [Gson README.md](https://github.com/google/gson#gson)\r\n\r\n```\r\nℹ️ Gson is currently in maintenance mode; existing bugs will be\r\n fixed, but large new features will likely not be added. If you want \r\nto add a new feature, please first search for existing GitHub \r\nissues, or create a new one to discuss the feature and get feedback.\r\n```\r\n\r\nso I&#39;d say it **IS** deprecated.\r\n\r\nI agree with the other answer that [Jackson](https://github.com/FasterXML/jackson-databind) is a pretty popular one.","title":"GSON is deprecated. Which one we can use to serialize and deserialize Java objects to and from JSON?","body":"<p>From <a href=\"https://github.com/google/gson#gson\" rel=\"nofollow noreferrer\">Gson README.md</a></p>\n<pre><code>ℹ️ Gson is currently in maintenance mode; existing bugs will be\n fixed, but large new features will likely not be added. If you want \nto add a new feature, please first search for existing GitHub \nissues, or create a new one to discuss the feature and get feedback.\n</code></pre>\n<p>so I'd say it <strong>IS</strong> deprecated.</p>\n<p>I agree with the other answer that <a href=\"https://github.com/FasterXML/jackson-databind\" rel=\"nofollow noreferrer\">Jackson</a> is a pretty popular one.</p>\n"}],"owner":{"account_id":1157978,"reputation":1596,"user_id":1138083,"accept_rate":34,"display_name":"M Vignesh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3748,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":27441449,"answer_count":3,"score":0,"last_activity_date":1687519680,"creation_date":1418378888,"question_id":27441249,"body_markdown":"Hi I want to store the Java Objects.\r\n\r\nI have searched and found that the GSON library is doing the conversion of Java Object to Json String and vice versa. Then I can store the converted JSON String into the Shared Preferences. \r\n\r\nBut That GSON library is deprecated and there is no update after May 2013.\r\n\r\nKindly provide me an alternate way to implement the same. \r\n\r\nThanks in advance. ","title":"GSON is deprecated. Which one we can use to serialize and deserialize Java objects to and from JSON?","body":"<p>Hi I want to store the Java Objects.</p>\n\n<p>I have searched and found that the GSON library is doing the conversion of Java Object to Json String and vice versa. Then I can store the converted JSON String into the Shared Preferences. </p>\n\n<p>But That GSON library is deprecated and there is no update after May 2013.</p>\n\n<p>Kindly provide me an alternate way to implement the same. </p>\n\n<p>Thanks in advance. </p>\n"},{"tags":["java","stream","java-stream","grouping"],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1687517716,"creation_date":1687517716,"answer_id":76539426,"question_id":76539366,"body_markdown":"This is easier to do if you introduced an intermediate type that represents a pair of `Element` and `User`:\r\n\r\n```\r\nrecord UserAndElement(User user, Element element) {}\r\n```\r\n\r\nThen the logic becomes: flatten the orders into a stream of these `UserAndElement` objects, group by their `element`, and then for each group, get their `user`:\r\n\r\n    return orders\r\n        .stream()\r\n        .flatMap(\r\n            x -&gt; x.getElements()\r\n                .stream()\r\n                .map(e -&gt; new UserAndElement(x.getUser(), e))\r\n        ).collect(\r\n            Collectors.groupingBy(UserAndElement::element,\r\n                Collectors.mapping(UserAndElement::user, Collectors.toList())\r\n            )\r\n        );","title":"How can I group Elements by the Users who own them with Stream API?","body":"<p>This is easier to do if you introduced an intermediate type that represents a pair of <code>Element</code> and <code>User</code>:</p>\n<pre><code>record UserAndElement(User user, Element element) {}\n</code></pre>\n<p>Then the logic becomes: flatten the orders into a stream of these <code>UserAndElement</code> objects, group by their <code>element</code>, and then for each group, get their <code>user</code>:</p>\n<pre><code>return orders\n    .stream()\n    .flatMap(\n        x -&gt; x.getElements()\n            .stream()\n            .map(e -&gt; new UserAndElement(x.getUser(), e))\n    ).collect(\n        Collectors.groupingBy(UserAndElement::element,\n            Collectors.mapping(UserAndElement::user, Collectors.toList())\n        )\n    );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687519653,"creation_date":1687519284,"answer_id":76539612,"question_id":76539366,"body_markdown":"Answer by Sweeper is perfect. You may also use an anonymous class in the stream not to have to declare a one-time class:\r\n\r\n        return orders.stream()\r\n                .flatMap(o -&gt; o.elements.stream()\r\n                        .map(e -&gt; new Object() { Element el=e; User u=o.user; })\r\n                )\r\n                .collect(groupingBy(o-&gt;o.el,mapping(o-&gt;o.u,toList())));\r\n","title":"How can I group Elements by the Users who own them with Stream API?","body":"<p>Answer by Sweeper is perfect. You may also use an anonymous class in the stream not to have to declare a one-time class:</p>\n<pre><code>    return orders.stream()\n            .flatMap(o -&gt; o.elements.stream()\n                    .map(e -&gt; new Object() { Element el=e; User u=o.user; })\n            )\n            .collect(groupingBy(o-&gt;o.el,mapping(o-&gt;o.u,toList())));\n</code></pre>\n"}],"owner":{"account_id":28879862,"reputation":39,"user_id":22119553,"display_name":"jackeylove271"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76539426,"answer_count":2,"score":0,"last_activity_date":1687519653,"creation_date":1687517136,"question_id":76539366,"body_markdown":"I have the next class:\r\n\r\n```\r\npublic class Order {\r\n\tprivate User user;\r\n\tprivate List&lt;Element&gt; elements;\r\n}\r\n```\r\nAnd I need to create the method which returns the map with elements as `keys` and list of users who own it as `values` using Stream API.\r\n\r\n\r\n```\r\nprivate static Map&lt;Element, List&lt;User&gt;&gt; m(List&lt;Order&gt; orders) {\r\n\t\treturn orders\r\n\t\t\t.stream()\r\n\t\t\t.collect(Collectors.groupingBy(Collectors.mapping(Order::getElements)));\r\n\t\t\t\t\t\t\r\n\t}\r\n```\r\n\r\nFor example for \r\n```\r\nList&lt;Order&gt; orders = new ArrayList&lt;&gt;();\r\n\r\norders.add(Order.createOrder(user1, List.of(element1, element2, element3)));\r\norders.add(Order.createOrder(user2, List.of(element3)));\r\norders.add(Order.createOrder(user3, List.of(element1, element2, element3)));\t\r\n```\r\nwe should get:\r\n\r\n```\r\n{element1={user1, user3}, element2={user1, user3}, element3={user1, user2, user3}}\r\n```\r\nI tried to use `Collectors.groupingBy()`, but we have the Orders in the stream, how can I group it by Elements - Users. I am totally stuck here. Will be thankful for any advice!\r\n","title":"How can I group Elements by the Users who own them with Stream API?","body":"<p>I have the next class:</p>\n<pre><code>public class Order {\n    private User user;\n    private List&lt;Element&gt; elements;\n}\n</code></pre>\n<p>And I need to create the method which returns the map with elements as <code>keys</code> and list of users who own it as <code>values</code> using Stream API.</p>\n<pre><code>private static Map&lt;Element, List&lt;User&gt;&gt; m(List&lt;Order&gt; orders) {\n        return orders\n            .stream()\n            .collect(Collectors.groupingBy(Collectors.mapping(Order::getElements)));\n                        \n    }\n</code></pre>\n<p>For example for</p>\n<pre><code>List&lt;Order&gt; orders = new ArrayList&lt;&gt;();\n\norders.add(Order.createOrder(user1, List.of(element1, element2, element3)));\norders.add(Order.createOrder(user2, List.of(element3)));\norders.add(Order.createOrder(user3, List.of(element1, element2, element3)));    \n</code></pre>\n<p>we should get:</p>\n<pre><code>{element1={user1, user3}, element2={user1, user3}, element3={user1, user2, user3}}\n</code></pre>\n<p>I tried to use <code>Collectors.groupingBy()</code>, but we have the Orders in the stream, how can I group it by Elements - Users. I am totally stuck here. Will be thankful for any advice!</p>\n"},{"tags":["java","spring","kotlin","mockito","spring-webflux"],"answers":[{"tags":[],"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1687519647,"creation_date":1687519647,"answer_id":76539654,"question_id":76539564,"body_markdown":"I guess instead of subscribing in the `send()` method, you could return the Mono and subscribe in the caller method, so in your test, you may use `.block()` to wait for the completion and handle the exception:\r\n```kotlin\r\n@Component\r\nclass MyService {\r\n\r\n    val webClient: WebClient by lazy {\r\n        WebClient.builder()\r\n            .baseUrl(&quot;https://localhost:8080&quot;)\r\n            .build()\r\n    }\r\n\r\n    fun send(): Mono&lt;Void&gt; {\r\n        return webClient.get()\r\n            .uri(&quot;/posts&quot;)\r\n            .retrieve()\r\n            .onStatus(HttpStatus::isError) { Mono.error { MyException() } }\r\n            .bodyToMono(Void::class.java)\r\n    }\r\n}\r\n```\r\n\r\n\r\n```kotlin\r\n@Test\r\nfun test() {\r\n    \r\n    mockWebServer.enqueue(MockResponse()\r\n        .setResponseCode(HttpStatus.INTERNAL_SERVER_ERROR.value())\r\n        .addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n    )\r\n\r\n    assertThrows&lt;MyException&gt; {\r\n        myService.send().block()\r\n    }\r\n}\r\n```\r\n\r\nAnd in your actual code where you do `myService.send()`, you may need to use `.subscribe()`, so the actual code remains non-blocking, and you&#39;re able to test the error handling painlessly","title":"How can I verify whether an exception was thrown by WebFlux async call?","body":"<p>I guess instead of subscribing in the <code>send()</code> method, you could return the Mono and subscribe in the caller method, so in your test, you may use <code>.block()</code> to wait for the completion and handle the exception:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Component\nclass MyService {\n\n    val webClient: WebClient by lazy {\n        WebClient.builder()\n            .baseUrl(&quot;https://localhost:8080&quot;)\n            .build()\n    }\n\n    fun send(): Mono&lt;Void&gt; {\n        return webClient.get()\n            .uri(&quot;/posts&quot;)\n            .retrieve()\n            .onStatus(HttpStatus::isError) { Mono.error { MyException() } }\n            .bodyToMono(Void::class.java)\n    }\n}\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Test\nfun test() {\n    \n    mockWebServer.enqueue(MockResponse()\n        .setResponseCode(HttpStatus.INTERNAL_SERVER_ERROR.value())\n        .addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\n    )\n\n    assertThrows&lt;MyException&gt; {\n        myService.send().block()\n    }\n}\n</code></pre>\n<p>And in your actual code where you do <code>myService.send()</code>, you may need to use <code>.subscribe()</code>, so the actual code remains non-blocking, and you're able to test the error handling painlessly</p>\n"}],"owner":{"account_id":7695446,"reputation":598,"user_id":5830152,"accept_rate":75,"display_name":" J.Kennsy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76539654,"answer_count":1,"score":0,"last_activity_date":1687519647,"creation_date":1687518891,"question_id":76539564,"body_markdown":"## Problem ##\r\nI have a service which executes async request. The method itself does not return anything, although it has error handler. I would like to test whether this handler works properly.\r\n\r\n#### Service ####\r\n\r\n```\r\n@Component\r\nclass MyService {\r\n\r\n    val webClient: WebClient by lazy {\r\n        WebClient.builder()\r\n            .baseUrl(&quot;https://localhost:8080&quot;)\r\n            .build()\r\n    }\r\n\r\n    fun send() {\r\n        webClient.get()\r\n            .uri(&quot;/posts&quot;)\r\n            .retrieve()\r\n            .onStatus(HttpStatus::isError) { Mono.error { MyException() } }\r\n            .bodyToMono(Void::class.java)\r\n            .subscribe()\r\n    }\r\n}\r\n```\r\n\r\n#### Test ####\r\nNow in the test I&#39;ve mocked server response:\r\n```\r\n@Test\r\nfun test() {\r\n    \r\n    mockWebServer.enqueue(MockResponse()\r\n        .setResponseCode(HttpStatus.INTERNAL_SERVER_ERROR.value())\r\n        .addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n    )\r\n\r\n    myService.send()\r\n\r\n    // Here I want to verify an exception was thrown\r\n}\r\n```\r\n\r\nI could resolve the problem by changing `subscribe()` to `block()` but my goal is call the request asynchronousely and not to block call site.\r\n\r\nThank you for help in advance\r\n","title":"How can I verify whether an exception was thrown by WebFlux async call?","body":"<h2>Problem</h2>\n<p>I have a service which executes async request. The method itself does not return anything, although it has error handler. I would like to test whether this handler works properly.</p>\n<h4>Service</h4>\n<pre><code>@Component\nclass MyService {\n\n    val webClient: WebClient by lazy {\n        WebClient.builder()\n            .baseUrl(&quot;https://localhost:8080&quot;)\n            .build()\n    }\n\n    fun send() {\n        webClient.get()\n            .uri(&quot;/posts&quot;)\n            .retrieve()\n            .onStatus(HttpStatus::isError) { Mono.error { MyException() } }\n            .bodyToMono(Void::class.java)\n            .subscribe()\n    }\n}\n</code></pre>\n<h4>Test</h4>\n<p>Now in the test I've mocked server response:</p>\n<pre><code>@Test\nfun test() {\n    \n    mockWebServer.enqueue(MockResponse()\n        .setResponseCode(HttpStatus.INTERNAL_SERVER_ERROR.value())\n        .addHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\n    )\n\n    myService.send()\n\n    // Here I want to verify an exception was thrown\n}\n</code></pre>\n<p>I could resolve the problem by changing <code>subscribe()</code> to <code>block()</code> but my goal is call the request asynchronousely and not to block call site.</p>\n<p>Thank you for help in advance</p>\n"},{"tags":["java","localization","internationalization","struts2","resourcebundle"],"comments":[{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1685726113,"post_id":76389382,"comment_id":134706508,"body_markdown":"You don&#39;t need a resourcebundle to read these messages. How do you want to use messages in the code?","body":"You don&#39;t need a resourcebundle to read these messages. How do you want to use messages in the code?"},{"owner":{"account_id":22065,"reputation":1451,"user_id":54128,"accept_rate":78,"display_name":"naveen"},"score":0,"creation_date":1685786022,"post_id":76389382,"comment_id":134712154,"body_markdown":"I wanted use like this only &lt;s:text name=&quot;greeting&quot; /&gt; so page will display  according to the locale and the  key","body":"I wanted use like this only &lt;s:text name=&quot;greeting&quot; /&gt; so page will display  according to the locale and the  key"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1685793674,"post_id":76389382,"comment_id":134712815,"body_markdown":"This is not working with XML files.","body":"This is not working with XML files."},{"owner":{"account_id":22065,"reputation":1451,"user_id":54128,"accept_rate":78,"display_name":"naveen"},"score":0,"creation_date":1685877888,"post_id":76389382,"comment_id":134719634,"body_markdown":"Yes ,it will not work ,I need how we can customize this","body":"Yes ,it will not work ,I need how we can customize this"}],"answers":[{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687453219,"creation_date":1687453219,"answer_id":76534154,"question_id":76389382,"body_markdown":"It can be customized if you define a custom [`TextProvider`][1] and configure it to use with the project.\r\n\r\n&gt;When you want to use your own implementation for Struts 2 project you have to define following bean and constant in `struts.xml`: \r\n&gt;```xml\r\n&gt;&lt;bean class=&quot;org.demo.MyTextProvider&quot; name=&quot;myTextProvider&quot; type=&quot;com.opensymphony.xwork2.TextProvider&quot; /&gt;\r\n&gt;&lt;constant name=&quot;struts.xworkTextProvider&quot; value=&quot;myTextProvider&quot; /&gt;\r\n&gt;```\r\n&gt;\r\n&gt;Take a look on [`ActionSupport`][2] for example `TextProvider` implementation.\r\n---\r\nYou can read struts2 localization guide for example of implementation of \r\n\r\n&gt;[**Custom TextProvider and TextProviderFactory**][3]:\r\n&gt;\r\n&gt;If you want to use a different logic to search for localized messages, or you want to use a database or just want to search default bundles, you must implement both those interfaces (or subclass the existing implementations). You can check a small [example][4] app how to use both. Please remember that the `TextProvider` interface is implemented by the `ActionSupport` class, that’s why an extra layer - `TextProviderFactory` is needed.\r\n---\r\nAnd here is the sample implementation for `XMLResourceBundle`.\r\n\r\n```java\r\npublic class XMLResourceBundleControl extends ResourceBundle.Control {\r\n  private static String XML = &quot;xml&quot;;\r\n\r\n  public List&lt;String&gt; getFormats(String baseName) {\r\n    return Collections.singletonList(XML);\r\n  }\r\n\r\n  public ResourceBundle newBundle(String baseName, Locale locale, String format,\r\n      ClassLoader loader, boolean reload) throws IllegalAccessException, InstantiationException,\r\n      IOException {\r\n\r\n    if ((baseName == null) || (locale == null) || (format == null) || (loader == null)) {\r\n      throw new NullPointerException();\r\n    }\r\n    ResourceBundle bundle = null;\r\n    if (!format.equals(XML)) {\r\n      return null;\r\n    }\r\n\r\n    String bundleName = toBundleName(baseName, locale);\r\n    String resourceName = toResourceName(bundleName, format);\r\n    URL url = loader.getResource(resourceName);\r\n    if (url == null) {\r\n      return null;\r\n    }\r\n    URLConnection connection = url.openConnection();\r\n    if (connection == null) {\r\n      return null;\r\n    }\r\n    if (reload) {\r\n      connection.setUseCaches(false);\r\n    }\r\n    InputStream stream = connection.getInputStream();\r\n    if (stream == null) {\r\n      return null;\r\n    }\r\n    BufferedInputStream bis = new BufferedInputStream(stream);\r\n    bundle = new XMLResourceBundle(bis);\r\n    bis.close();\r\n\r\n    return bundle;\r\n  }\r\n\r\nclass XMLResourceBundle extends ResourceBundle {\r\n  private Properties props;\r\n\r\n  XMLResourceBundle(InputStream stream) throws IOException {\r\n    props = new Properties();\r\n    props.loadFromXML(stream);\r\n  }\r\n\r\n  protected Object handleGetObject(String key) {\r\n    return props.getProperty(key);\r\n  }\r\n\r\n  public Enumeration&lt;String&gt; getKeys() {\r\n    Set&lt;String&gt; handleKeys = props.stringPropertyNames();\r\n    return Collections.enumeration(handleKeys);\r\n  }\r\n}\r\n```\r\n\r\nIn the `TextProvider` implementation you can use\r\n\r\n```java\r\nResourceBundle bundle = ResourceBundle.getBundle(&quot;messages&quot;, new XMLResourceBundleControl());\r\n```\r\n---\r\n\r\nThe `messages.xml` has the following format\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!DOCTYPE properties SYSTEM &quot;http://java.sun.com/dtd/properties.dtd&quot;&gt;\r\n&lt;properties&gt;\r\n  &lt;entry key=&quot;greeting&quot;&gt;Hello!&lt;/entry&gt;\r\n  &lt;entry key=&quot;farewell&quot;&gt;Goodbye!&lt;/entry&gt;\r\n&lt;/properties&gt; \r\n```\r\n  [1]: https://javadoc.io/doc/org.apache.struts/struts2-core/2.5.14.1/com/opensymphony/xwork2/TextProvider.html\r\n  [2]: https://github.com/apache/struts/blob/master/core/src/main/java/com/opensymphony/xwork2/ActionSupport.java\r\n  [3]: https://struts.apache.org/core-developers/localization.html#custom-textprovider-and-textproviderfactory\r\n  [4]: https://github.com/apache/struts-examples/tree/master/text-provider","title":"How to customize message resources to xml files instead of properties in Struts 2","body":"<p>It can be customized if you define a custom <a href=\"https://javadoc.io/doc/org.apache.struts/struts2-core/2.5.14.1/com/opensymphony/xwork2/TextProvider.html\" rel=\"nofollow noreferrer\"><code>TextProvider</code></a> and configure it to use with the project.</p>\n<blockquote>\n<p>When you want to use your own implementation for Struts 2 project you have to define following bean and constant in <code>struts.xml</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;bean class=&quot;org.demo.MyTextProvider&quot; name=&quot;myTextProvider&quot; type=&quot;com.opensymphony.xwork2.TextProvider&quot; /&gt;\n&lt;constant name=&quot;struts.xworkTextProvider&quot; value=&quot;myTextProvider&quot; /&gt;\n</code></pre>\n<p>Take a look on <a href=\"https://github.com/apache/struts/blob/master/core/src/main/java/com/opensymphony/xwork2/ActionSupport.java\" rel=\"nofollow noreferrer\"><code>ActionSupport</code></a> for example <code>TextProvider</code> implementation.</p>\n</blockquote>\n<hr />\n<p>You can read struts2 localization guide for example of implementation of</p>\n<blockquote>\n<p><a href=\"https://struts.apache.org/core-developers/localization.html#custom-textprovider-and-textproviderfactory\" rel=\"nofollow noreferrer\"><strong>Custom TextProvider and TextProviderFactory</strong></a>:</p>\n<p>If you want to use a different logic to search for localized messages, or you want to use a database or just want to search default bundles, you must implement both those interfaces (or subclass the existing implementations). You can check a small <a href=\"https://github.com/apache/struts-examples/tree/master/text-provider\" rel=\"nofollow noreferrer\">example</a> app how to use both. Please remember that the <code>TextProvider</code> interface is implemented by the <code>ActionSupport</code> class, that’s why an extra layer - <code>TextProviderFactory</code> is needed.</p>\n</blockquote>\n<hr />\n<p>And here is the sample implementation for <code>XMLResourceBundle</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class XMLResourceBundleControl extends ResourceBundle.Control {\n  private static String XML = &quot;xml&quot;;\n\n  public List&lt;String&gt; getFormats(String baseName) {\n    return Collections.singletonList(XML);\n  }\n\n  public ResourceBundle newBundle(String baseName, Locale locale, String format,\n      ClassLoader loader, boolean reload) throws IllegalAccessException, InstantiationException,\n      IOException {\n\n    if ((baseName == null) || (locale == null) || (format == null) || (loader == null)) {\n      throw new NullPointerException();\n    }\n    ResourceBundle bundle = null;\n    if (!format.equals(XML)) {\n      return null;\n    }\n\n    String bundleName = toBundleName(baseName, locale);\n    String resourceName = toResourceName(bundleName, format);\n    URL url = loader.getResource(resourceName);\n    if (url == null) {\n      return null;\n    }\n    URLConnection connection = url.openConnection();\n    if (connection == null) {\n      return null;\n    }\n    if (reload) {\n      connection.setUseCaches(false);\n    }\n    InputStream stream = connection.getInputStream();\n    if (stream == null) {\n      return null;\n    }\n    BufferedInputStream bis = new BufferedInputStream(stream);\n    bundle = new XMLResourceBundle(bis);\n    bis.close();\n\n    return bundle;\n  }\n\nclass XMLResourceBundle extends ResourceBundle {\n  private Properties props;\n\n  XMLResourceBundle(InputStream stream) throws IOException {\n    props = new Properties();\n    props.loadFromXML(stream);\n  }\n\n  protected Object handleGetObject(String key) {\n    return props.getProperty(key);\n  }\n\n  public Enumeration&lt;String&gt; getKeys() {\n    Set&lt;String&gt; handleKeys = props.stringPropertyNames();\n    return Collections.enumeration(handleKeys);\n  }\n}\n</code></pre>\n<p>In the <code>TextProvider</code> implementation you can use</p>\n<pre class=\"lang-java prettyprint-override\"><code>ResourceBundle bundle = ResourceBundle.getBundle(&quot;messages&quot;, new XMLResourceBundleControl());\n</code></pre>\n<hr />\n<p>The <code>messages.xml</code> has the following format</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE properties SYSTEM &quot;http://java.sun.com/dtd/properties.dtd&quot;&gt;\n&lt;properties&gt;\n  &lt;entry key=&quot;greeting&quot;&gt;Hello!&lt;/entry&gt;\n  &lt;entry key=&quot;farewell&quot;&gt;Goodbye!&lt;/entry&gt;\n&lt;/properties&gt; \n</code></pre>\n"}],"owner":{"account_id":22065,"reputation":1451,"user_id":54128,"accept_rate":78,"display_name":"naveen"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687519186,"creation_date":1685702151,"question_id":76389382,"body_markdown":"I have already xml messages which used for localization. \r\n```xml\r\n&lt;messages&gt;\r\n  &lt;message key=&quot;greeting&quot;&gt;Hello!&lt;/entry&gt;\r\n  &lt;message key=&quot;farewell&quot;&gt;Goodbye!&lt;/entry&gt;\r\n&lt;/messages&gt;\r\n```\r\nI wanted to reuse this xml messages for struts2 application.\r\nPlease provide how it can be customized to read xml files instead properties files","title":"How to customize message resources to xml files instead of properties in Struts 2","body":"<p>I have already xml messages which used for localization.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;messages&gt;\n  &lt;message key=&quot;greeting&quot;&gt;Hello!&lt;/entry&gt;\n  &lt;message key=&quot;farewell&quot;&gt;Goodbye!&lt;/entry&gt;\n&lt;/messages&gt;\n</code></pre>\n<p>I wanted to reuse this xml messages for struts2 application.\nPlease provide how it can be customized to read xml files instead properties files</p>\n"},{"tags":["java","spring-boot","kotlin","dependency-injection","nullpointerexception"],"comments":[{"owner":{"account_id":2073393,"reputation":2457,"user_id":1847378,"display_name":"AndrewL"},"score":1,"creation_date":1687133843,"post_id":76459395,"comment_id":134890002,"body_markdown":"Feels like a problem of **ordering**... you may need to explicitly tell Spring which beans should be instantiated first.  I tried to reproduce using Spring annotations not the DSL approach and it worked for me.  Can you share how you invoke the Kotlin DSL for any Beans/Components created that way?","body":"Feels like a problem of <b>ordering</b>... you may need to explicitly tell Spring which beans should be instantiated first.  I tried to reproduce using Spring annotations not the DSL approach and it worked for me.  Can you share how you invoke the Kotlin DSL for any Beans/Components created that way?"},{"owner":{"account_id":316018,"reputation":2519,"user_id":631965,"accept_rate":68,"display_name":"Olgun Kaya"},"score":0,"creation_date":1687168176,"post_id":76459395,"comment_id":134894223,"body_markdown":"@AndrewL thx for the comment but, If you check the item #1 in the summary/problem definition part. The services are being correctly injected for individual signIn strategies. And, in my tests I saw the factory instantiated after the strategies instantiated. I am still somewhere around the Kotlin dsl&#39;s behavior. But thx, as per you question how the beans are instantiated;  we are registering ApplicationContextInitializer&#39;s for everything including beans, config etc..","body":"@AndrewL thx for the comment but, If you check the item #1 in the summary/problem definition part. The services are being correctly injected for individual signIn strategies. And, in my tests I saw the factory instantiated after the strategies instantiated. I am still somewhere around the Kotlin dsl&#39;s behavior. But thx, as per you question how the beans are instantiated;  we are registering ApplicationContextInitializer&#39;s for everything including beans, config etc.."},{"owner":{"account_id":15994883,"reputation":3427,"user_id":11543023,"display_name":"djmonki"},"score":2,"creation_date":1687174751,"post_id":76459395,"comment_id":134895496,"body_markdown":"Have you considered defining the concrete strategies as lazy beans? So wrap them to: ```bean(name = &quot;googleUserSignIn&quot;) { lazy { IndividualUserSignIn( ........ )  }\n}```. Then update UserSignInFactory to accommodate lazy initialization to: ```(private val userSignInServices: Lazy&lt;Set&lt;IndividualUserSignIn&gt;&gt;)``` . So the strategies are instantiated with the correct dependencies injected before they are accessed in the factory. Just an idea.","body":"Have you considered defining the concrete strategies as lazy beans? So wrap them to: <code>bean(name = &quot;googleUserSignIn&quot;) { lazy { IndividualUserSignIn( ........ )  } }</code>. Then update UserSignInFactory to accommodate lazy initialization to: <code>(private val userSignInServices: Lazy&lt;Set&lt;IndividualUserSignIn&gt;&gt;)</code> . So the strategies are instantiated with the correct dependencies injected before they are accessed in the factory. Just an idea."},{"owner":{"account_id":316018,"reputation":2519,"user_id":631965,"accept_rate":68,"display_name":"Olgun Kaya"},"score":0,"creation_date":1687185463,"post_id":76459395,"comment_id":134897778,"body_markdown":"@djmonki never thought it but will give it a try, for sure","body":"@djmonki never thought it but will give it a try, for sure"},{"owner":{"account_id":316018,"reputation":2519,"user_id":631965,"accept_rate":68,"display_name":"Olgun Kaya"},"score":0,"creation_date":1687280414,"post_id":76459395,"comment_id":134913488,"body_markdown":"@djmonki I tried your comment and it worked. Lazy beans seems to working. At least at that point, but when I check the injected beans, they are not proxies. Which doubts me the @ Transactional gonna work. Still, if you apply your comment as an answer, I will accept it.","body":"@djmonki I tried your comment and it worked. Lazy beans seems to working. At least at that point, but when I check the injected beans, they are not proxies. Which doubts me the @ Transactional gonna work. Still, if you apply your comment as an answer, I will accept it."},{"owner":{"account_id":15994883,"reputation":3427,"user_id":11543023,"display_name":"djmonki"},"score":0,"creation_date":1687478065,"post_id":76459395,"comment_id":134946296,"body_markdown":"Apologies for late response, you could try the following to ensure that the injected beans are still proxies, but also initiated as lazy. Reverse the idea I proposed above and annotate the ```IndividualUserSignIn``` class with the following: ```@Lazy``` and ```@Transactional```. See if that works.","body":"Apologies for late response, you could try the following to ensure that the injected beans are still proxies, but also initiated as lazy. Reverse the idea I proposed above and annotate the <code>IndividualUserSignIn</code> class with the following: <code>@Lazy</code> and <code>@Transactional</code>. See if that works."}],"answers":[{"tags":[],"owner":{"account_id":28871521,"reputation":1,"user_id":22112961,"display_name":"mahdi hashemi"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1687519139,"creation_date":1687459975,"answer_id":76534901,"question_id":76459395,"body_markdown":"it seems that the issue is related to the initialization order of the Spring beans. In particular, the UserSignInFactory bean is being initialized before the beans for IndividualUserSignInService are fully initialized, which is causing the userSignInService field in AbstractUserSignIn to be null when getSignInStrategy() is called.\r\nThis can be done using the depends-on attribute of the bean method in Kotlin DSL:\r\n\r\n\r\n    @DependsOn(&quot;googleUserSignInService&quot;)\r\n    bean(name = &quot;googleUserSignIn&quot;) {\r\n        IndividualUserSignIn(\r\n            ref(&quot;googleUserSignInService&quot;),\r\n            ref(&quot;userHibernateDAO&quot;),\r\n            ref(&quot;socialAccountHibernateDAO&quot;),\r\n            ref(&quot;userService&quot;)\r\n        )\r\n    }\r\n\r\n    @DependsOn(&quot;appleUserSignInService&quot;)\r\n    bean(name = &quot;appleUserSignIn&quot;) {\r\n        IndividualUserSignIn(\r\n            ref(&quot;appleUserSignInService&quot;),\r\n            ref(&quot;userHibernateDAO&quot;),\r\n            ref(&quot;socialAccountHibernateDAO&quot;),\r\n            ref(&quot;userService&quot;),\r\n            ...\r\n        )\r\n    }\r\nYes, it is true that the dependsOn property does not exist, and I took this example from a code that seemed wrong\r\nI used @DependsOn annotation for correction","title":"Spring Boot and Kotlin DSL Configuration","body":"<p>it seems that the issue is related to the initialization order of the Spring beans. In particular, the UserSignInFactory bean is being initialized before the beans for IndividualUserSignInService are fully initialized, which is causing the userSignInService field in AbstractUserSignIn to be null when getSignInStrategy() is called.\nThis can be done using the depends-on attribute of the bean method in Kotlin DSL:</p>\n<pre><code>@DependsOn(&quot;googleUserSignInService&quot;)\nbean(name = &quot;googleUserSignIn&quot;) {\n    IndividualUserSignIn(\n        ref(&quot;googleUserSignInService&quot;),\n        ref(&quot;userHibernateDAO&quot;),\n        ref(&quot;socialAccountHibernateDAO&quot;),\n        ref(&quot;userService&quot;)\n    )\n}\n\n@DependsOn(&quot;appleUserSignInService&quot;)\nbean(name = &quot;appleUserSignIn&quot;) {\n    IndividualUserSignIn(\n        ref(&quot;appleUserSignInService&quot;),\n        ref(&quot;userHibernateDAO&quot;),\n        ref(&quot;socialAccountHibernateDAO&quot;),\n        ref(&quot;userService&quot;),\n        ...\n    )\n}\n</code></pre>\n<p>Yes, it is true that the dependsOn property does not exist, and I took this example from a code that seemed wrong\nI used @DependsOn annotation for correction</p>\n"},{"tags":[],"owner":{"account_id":15994883,"reputation":3427,"user_id":11543023,"display_name":"djmonki"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1687476941,"creation_date":1687474609,"answer_id":76536152,"question_id":76459395,"body_markdown":"Consider defining the concrete strategies as lazy beans. \r\n\r\nThis will ensure that the strategies are instantiated with the correct dependencies injected before they are accessed in the factory.\r\n\r\nUpdated as lazy beans:\r\n```java\r\nbean(name = &quot;googleUserSignIn&quot;) {\r\n  lazy {\r\n    IndividualUserSignIn(\r\n      ref(&quot;googleUserSignInService&quot;),\r\n      ref(&quot;userHibernateDAO&quot;),\r\n      ref(&quot;socialAccountHibernateDAO&quot;),\r\n      ref(&quot;userService&quot;),\r\n      ...\r\n    )\r\n  }\r\n}\r\n\r\nbean(name = &quot;appleUserSignIn&quot;) {\r\n  lazy {\r\n    IndividualUserSignIn(\r\n      ref(&quot;appleUserSignInService&quot;),\r\n      ref(&quot;userHibernateDAO&quot;),\r\n      ref(&quot;socialAccountHibernateDAO&quot;),\r\n      ref(&quot;userService&quot;),\r\n      ...\r\n    )\r\n  }\r\n}\r\n```\r\n\r\nThen update UserSignInFactory class to accommodate lazy initialisation:\r\n```java\r\n@Component\r\nopen class UserSignInFactory @Autowired constructor(\r\n  private val userSignInServices: Lazy&lt;Set&lt;IndividualUserSignIn&gt;&gt;) {\r\n\r\n  @PostConstruct\r\n  private fun createStrategies() {\r\n    userSignInServices.forEach { strategy -&gt;\r\n      strategyMap[strategy.getSignInStrategy()] = strategy // **(C)**\r\n    }\r\n  }\r\n  ....\r\n  companion object {\r\n    private val strategyMap: \r\n    EnumMap&lt;UserSignInStrategy, AbstractUserSignIn&gt; = EnumMap(UserSignInStrategy::class.java)\r\n  }\r\n}\r\n```","title":"Spring Boot and Kotlin DSL Configuration","body":"<p>Consider defining the concrete strategies as lazy beans.</p>\n<p>This will ensure that the strategies are instantiated with the correct dependencies injected before they are accessed in the factory.</p>\n<p>Updated as lazy beans:</p>\n<pre class=\"lang-java prettyprint-override\"><code>bean(name = &quot;googleUserSignIn&quot;) {\n  lazy {\n    IndividualUserSignIn(\n      ref(&quot;googleUserSignInService&quot;),\n      ref(&quot;userHibernateDAO&quot;),\n      ref(&quot;socialAccountHibernateDAO&quot;),\n      ref(&quot;userService&quot;),\n      ...\n    )\n  }\n}\n\nbean(name = &quot;appleUserSignIn&quot;) {\n  lazy {\n    IndividualUserSignIn(\n      ref(&quot;appleUserSignInService&quot;),\n      ref(&quot;userHibernateDAO&quot;),\n      ref(&quot;socialAccountHibernateDAO&quot;),\n      ref(&quot;userService&quot;),\n      ...\n    )\n  }\n}\n</code></pre>\n<p>Then update UserSignInFactory class to accommodate lazy initialisation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\nopen class UserSignInFactory @Autowired constructor(\n  private val userSignInServices: Lazy&lt;Set&lt;IndividualUserSignIn&gt;&gt;) {\n\n  @PostConstruct\n  private fun createStrategies() {\n    userSignInServices.forEach { strategy -&gt;\n      strategyMap[strategy.getSignInStrategy()] = strategy // **(C)**\n    }\n  }\n  ....\n  companion object {\n    private val strategyMap: \n    EnumMap&lt;UserSignInStrategy, AbstractUserSignIn&gt; = EnumMap(UserSignInStrategy::class.java)\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":316018,"reputation":2519,"user_id":631965,"accept_rate":68,"display_name":"Olgun Kaya"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":424,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76536152,"answer_count":2,"score":1,"last_activity_date":1687519139,"creation_date":1686594787,"question_id":76459395,"body_markdown":"Lately, I have been assigned to a project that disables some of the auto-config and configures the spring boot app mostly manually using KotlinDSL. \r\n\r\n    @SpringBootApplication(exclude = {\r\n            DataSourceAutoConfiguration.class,\r\n            DataSourceTransactionManagerAutoConfiguration.class,\r\n            JpaRepositoriesAutoConfiguration.class,\r\n            HibernateJpaAutoConfiguration.class,\r\n            CassandraDataAutoConfiguration.class,\r\n            CassandraAutoConfiguration.class\r\n    })\r\n\r\nI am facing I believe Kotlin lang issue with spring integration. \r\n\r\n\r\nLet me show you the setup. \r\n\r\n1. An abstract sign-in strategy with a @Transactional method in it.\r\n2. A concrete child of the above abstract class. IndividualSignIn with supporting two different implementations. Those are Google and Apple individual sign-ins. The difference maker is the service (Google sign-in service, Apple sign-in service) which is injected into the above concrete class beans. I&#39;ll show the setup below.\r\n\r\nSo, the Kotlin dsl is like the below;\r\n\r\n    bean(name = &quot;googleUserSignIn&quot;) {\r\n                IndividualUserSignIn(\r\n                    ref(&quot;googleUserSignInService&quot;),\r\n                    ref(&quot;userHibernateDAO&quot;),\r\n                    ref(&quot;socialAccountHibernateDAO&quot;),\r\n                    ref(&quot;userService&quot;),\r\n                    ...\r\n                )\r\n            }\r\n\r\n    bean(name = &quot;appleUserSignIn&quot;) {\r\n                IndividualUserSignIn(\r\n                    ref(&quot;appleUserSignInService&quot;),\r\n                    ref(&quot;userHibernateDAO&quot;),\r\n                    ref(&quot;socialAccountHibernateDAO&quot;),\r\n                    ref(&quot;userService&quot;),\r\n                    ...\r\n                )\r\n            }\r\n\r\n\r\nAnd finally, the strategy which proxies the request is like below;\r\n \r\n\r\n    bean&lt;UserSignInFactory&gt;()\r\n\r\nThe implementation of these classes are look like below;\r\nfirst the `AbstractStrategy`\r\n\r\n    abstract class AbstractUserSignIn(\r\n        private val userSignInService: UserSignInService,\r\n        private val userDAO: UserDAO,\r\n        private val socialAccountDAO: SocialAccountDAO,\r\n        private val userService: UserService,\r\n        ....\r\n    ) {\r\n    \r\n        @Transactional\r\n        open fun signIn(userSignInRequest: SignInRequest): SignInResult {...}\r\n        \r\n        fun getSignInStrategy(): UserSignInStrategy{ // **(A)**\r\n           return userSignInService.getSignInStrategy()\r\n        }\r\n    }\r\n\r\nThen the classes inherited from this class;\r\n\r\n    open class IndividualUserSignIn constructor(\r\n        userSignInService: UserSignInService,\r\n        userDAO: UserDAO,\r\n        socialAccountDAO: SocialAccountDAO,\r\n        userService: UserService,\r\n        ...\r\n    ) : AbstractUserSignIn(\r\n        userSignInService,\r\n        userDAO,\r\n        socialAccountDAO,\r\n        userService,\r\n        ...\r\n    ) {\r\n    \r\n        @PostConstruct\r\n        private fun init()\r\n        {\r\n            println(&quot;strategy :&quot; + getSignInStrategy()) // **(B)**\r\n        }\r\n    ...\r\n    }\r\n\r\nand the Factory class.\r\n\r\n    @Component\r\n    open class UserSignInFactory @Autowired constructor(private val userSignInServices: Set&lt;IndividualUserSignIn&gt;) {\r\n    \r\n        @PostConstruct\r\n        private fun createStrategies() {\r\n            userSignInServices.forEach { strategy -&gt;\r\n                strategyMap[strategy.getSignInStrategy()] = strategy // **(C)**\r\n            }\r\n        }\r\n        ....\r\n        companion object {\r\n            private val strategyMap: EnumMap&lt;UserSignInStrategy, AbstractUserSignIn&gt; = EnumMap(UserSignInStrategy::class.java)\r\n        }\r\n    }\r\n\r\n\r\nPoint (A) is where the problem arises. The abstract class uses the injected service to let callers know about its supporting implementation. \r\n\r\nWell, here the problem is.\r\n1. At point (B); While the concrete strategies are being instantiated, the @PostConstruct works as expected and prints the supported strategy. Debugging says  **this** is the instance itself of strategy.\r\n2. At point (C); While traversing the Set, I am receiving an NPE because the injected service that is used in point (A) looks null. Here the elements in the **set**, are instances of spring-generated proxies pointing to instances from step #1 above. \r\n","title":"Spring Boot and Kotlin DSL Configuration","body":"<p>Lately, I have been assigned to a project that disables some of the auto-config and configures the spring boot app mostly manually using KotlinDSL.</p>\n<pre><code>@SpringBootApplication(exclude = {\n        DataSourceAutoConfiguration.class,\n        DataSourceTransactionManagerAutoConfiguration.class,\n        JpaRepositoriesAutoConfiguration.class,\n        HibernateJpaAutoConfiguration.class,\n        CassandraDataAutoConfiguration.class,\n        CassandraAutoConfiguration.class\n})\n</code></pre>\n<p>I am facing I believe Kotlin lang issue with spring integration.</p>\n<p>Let me show you the setup.</p>\n<ol>\n<li>An abstract sign-in strategy with a @Transactional method in it.</li>\n<li>A concrete child of the above abstract class. IndividualSignIn with supporting two different implementations. Those are Google and Apple individual sign-ins. The difference maker is the service (Google sign-in service, Apple sign-in service) which is injected into the above concrete class beans. I'll show the setup below.</li>\n</ol>\n<p>So, the Kotlin dsl is like the below;</p>\n<pre><code>bean(name = &quot;googleUserSignIn&quot;) {\n            IndividualUserSignIn(\n                ref(&quot;googleUserSignInService&quot;),\n                ref(&quot;userHibernateDAO&quot;),\n                ref(&quot;socialAccountHibernateDAO&quot;),\n                ref(&quot;userService&quot;),\n                ...\n            )\n        }\n\nbean(name = &quot;appleUserSignIn&quot;) {\n            IndividualUserSignIn(\n                ref(&quot;appleUserSignInService&quot;),\n                ref(&quot;userHibernateDAO&quot;),\n                ref(&quot;socialAccountHibernateDAO&quot;),\n                ref(&quot;userService&quot;),\n                ...\n            )\n        }\n</code></pre>\n<p>And finally, the strategy which proxies the request is like below;</p>\n<pre><code>bean&lt;UserSignInFactory&gt;()\n</code></pre>\n<p>The implementation of these classes are look like below;\nfirst the <code>AbstractStrategy</code></p>\n<pre><code>abstract class AbstractUserSignIn(\n    private val userSignInService: UserSignInService,\n    private val userDAO: UserDAO,\n    private val socialAccountDAO: SocialAccountDAO,\n    private val userService: UserService,\n    ....\n) {\n\n    @Transactional\n    open fun signIn(userSignInRequest: SignInRequest): SignInResult {...}\n    \n    fun getSignInStrategy(): UserSignInStrategy{ // **(A)**\n       return userSignInService.getSignInStrategy()\n    }\n}\n</code></pre>\n<p>Then the classes inherited from this class;</p>\n<pre><code>open class IndividualUserSignIn constructor(\n    userSignInService: UserSignInService,\n    userDAO: UserDAO,\n    socialAccountDAO: SocialAccountDAO,\n    userService: UserService,\n    ...\n) : AbstractUserSignIn(\n    userSignInService,\n    userDAO,\n    socialAccountDAO,\n    userService,\n    ...\n) {\n\n    @PostConstruct\n    private fun init()\n    {\n        println(&quot;strategy :&quot; + getSignInStrategy()) // **(B)**\n    }\n...\n}\n</code></pre>\n<p>and the Factory class.</p>\n<pre><code>@Component\nopen class UserSignInFactory @Autowired constructor(private val userSignInServices: Set&lt;IndividualUserSignIn&gt;) {\n\n    @PostConstruct\n    private fun createStrategies() {\n        userSignInServices.forEach { strategy -&gt;\n            strategyMap[strategy.getSignInStrategy()] = strategy // **(C)**\n        }\n    }\n    ....\n    companion object {\n        private val strategyMap: EnumMap&lt;UserSignInStrategy, AbstractUserSignIn&gt; = EnumMap(UserSignInStrategy::class.java)\n    }\n}\n</code></pre>\n<p>Point (A) is where the problem arises. The abstract class uses the injected service to let callers know about its supporting implementation.</p>\n<p>Well, here the problem is.</p>\n<ol>\n<li>At point (B); While the concrete strategies are being instantiated, the @PostConstruct works as expected and prints the supported strategy. Debugging says  <strong>this</strong> is the instance itself of strategy.</li>\n<li>At point (C); While traversing the Set, I am receiving an NPE because the injected service that is used in point (A) looks null. Here the elements in the <strong>set</strong>, are instances of spring-generated proxies pointing to instances from step #1 above.</li>\n</ol>\n"},{"tags":["java","android","android-studio","kotlin","android-drawable"],"answers":[{"tags":[],"owner":{"account_id":28359832,"reputation":21,"user_id":21690015,"display_name":"Oleksandr Karpiuk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687519052,"creation_date":1687517598,"answer_id":76539410,"question_id":76538688,"body_markdown":"Some weird behavior, because wrap_content doesn&#39;t work with line shape. Your stroke width is 2dp, and it is meaning, the height of your view should be 3+ dp. \r\n\r\nSo if you have a line with 5dp height, Your view must be higher than 5 (6 or more). \r\n\r\nOr you can add size block to your drawable file and use wrap_content in your views\r\n   \r\n\r\n     &lt;size android:height=&quot;5dp&quot;/&gt;","title":"Horizontal dotted line using drawables in android java","body":"<p>Some weird behavior, because wrap_content doesn't work with line shape. Your stroke width is 2dp, and it is meaning, the height of your view should be 3+ dp.</p>\n<p>So if you have a line with 5dp height, Your view must be higher than 5 (6 or more).</p>\n<p>Or you can add size block to your drawable file and use wrap_content in your views</p>\n<pre><code> &lt;size android:height=&quot;5dp&quot;/&gt;\n</code></pre>\n"}],"owner":{"account_id":26341049,"reputation":69,"user_id":20000140,"display_name":"Akshay A"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687519052,"creation_date":1687511899,"question_id":76538688,"body_markdown":"I want to create a horizontal dotted lien for my android java application. I have created a drawable file and used it inside the view tag on my page. But the line is not showing in the page. Code is given below. Please help!!!\r\n\r\n\r\nGiven below is the files created in drawable.\r\n```&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:shape=&quot;line&quot;&gt;\r\n    &lt;stroke\r\n    android:width=&quot;2dp&quot;\r\n    android:color=&quot;#000000&quot;\r\n    android:dashWidth=&quot;4dp&quot;\r\n    android:dashGap=&quot;4dp&quot;/&gt;\r\n&lt;/shape&gt;\r\n```\r\nGiven below is my fragment.xml\r\n\r\n```            &lt;View\r\n                android:id=&quot;@+id/line1&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;1dp&quot;\r\n                android:layout_marginHorizontal=&quot;16dp&quot;\r\n                android:layout_marginTop=&quot;8dp&quot;\r\n                android:drawable=&quot;@drawable/line_seperator_dotted&quot;\r\n                app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\r\n                app:layout_constraintRight_toRightOf=&quot;parent&quot;\r\n                app:layout_constraintTop_toBottomOf=&quot;@+id/compartmentHeader&quot; /&gt;\r\n```","title":"Horizontal dotted line using drawables in android java","body":"<p>I want to create a horizontal dotted lien for my android java application. I have created a drawable file and used it inside the view tag on my page. But the line is not showing in the page. Code is given below. Please help!!!</p>\n<p>Given below is the files created in drawable.</p>\n<pre><code>    android:shape=&quot;line&quot;&gt;\n    &lt;stroke\n    android:width=&quot;2dp&quot;\n    android:color=&quot;#000000&quot;\n    android:dashWidth=&quot;4dp&quot;\n    android:dashGap=&quot;4dp&quot;/&gt;\n&lt;/shape&gt;\n</code></pre>\n<p>Given below is my fragment.xml</p>\n<pre><code>                android:id=&quot;@+id/line1&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;1dp&quot;\n                android:layout_marginHorizontal=&quot;16dp&quot;\n                android:layout_marginTop=&quot;8dp&quot;\n                android:drawable=&quot;@drawable/line_seperator_dotted&quot;\n                app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\n                app:layout_constraintRight_toRightOf=&quot;parent&quot;\n                app:layout_constraintTop_toBottomOf=&quot;@+id/compartmentHeader&quot; /&gt;\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":4925690,"reputation":146,"user_id":3966980,"display_name":"Criban"},"score":0,"creation_date":1413454600,"post_id":26400779,"comment_id":41453212,"body_markdown":"http://stackoverflow.com/questions/9191288/creating-a-unique-timestamp-in-java","body":"<a href=\"http://stackoverflow.com/questions/9191288/creating-a-unique-timestamp-in-java\" title=\"creating a unique timestamp in java\">stackoverflow.com/questions/9191288/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"display_name":"user2213590"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1413451788,"creation_date":1413451788,"answer_id":26400887,"question_id":26400779,"body_markdown":"Add a unique string to each order ID, like the user&#39;s email (if it&#39;s unique in your database) or the user&#39;s id from your database. This makes the order ID truly unique\r\n\r\nString unique = timestamp + unique_user_field","title":"How to generate a UniqueId based on current date","body":"<p>Add a unique string to each order ID, like the user's email (if it's unique in your database) or the user's id from your database. This makes the order ID truly unique</p>\n\n<p>String unique = timestamp + unique_user_field</p>\n"},{"tags":[],"owner":{"account_id":2269226,"reputation":22774,"user_id":1997093,"accept_rate":100,"display_name":"akash"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1413452469,"creation_date":1413452090,"answer_id":26400981,"question_id":26400779,"body_markdown":"This is happening because of speed of `for` loop which is faster than your _time_ :).As loop iterates in time of less than miliseconds and generates values.You can only call it when you want to insert single value to database and _don&#39;t iterate for values_.\r\n\r\nOther than that you can use [`UUID`][1] for this purpose (_for alphanumeric value_).\r\n\r\n    for (int i = 0; i &lt; 50; i++) {\r\n    \t\tDate dNow = new Date();\r\n            SimpleDateFormat ft = new SimpleDateFormat(&quot;yyMMddhhmmssMs&quot;);\r\n            String datetime = ft.format(dNow);\r\n            System.out.println(datetime);\r\n    }\r\n\r\n***OUTPUT***\r\n\r\n    141016030003103\r\n    141016030003103\r\n    141016030003103\r\n    141016030003103\r\n    141016030003103\r\n    141016030003103\r\n    141016030003103\r\n    141016030003103\r\n    141016030003103\r\n    //.....and more\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html","title":"How to generate a UniqueId based on current date","body":"<p>This is happening because of speed of <code>for</code> loop which is faster than your <em>time</em> :).As loop iterates in time of less than miliseconds and generates values.You can only call it when you want to insert single value to database and <em>don't iterate for values</em>.</p>\n\n<p>Other than that you can use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html\" rel=\"noreferrer\"><code>UUID</code></a> for this purpose (<em>for alphanumeric value</em>).</p>\n\n<pre><code>for (int i = 0; i &lt; 50; i++) {\n        Date dNow = new Date();\n        SimpleDateFormat ft = new SimpleDateFormat(\"yyMMddhhmmssMs\");\n        String datetime = ft.format(dNow);\n        System.out.println(datetime);\n}\n</code></pre>\n\n<p><strong><em>OUTPUT</em></strong></p>\n\n<pre><code>141016030003103\n141016030003103\n141016030003103\n141016030003103\n141016030003103\n141016030003103\n141016030003103\n141016030003103\n141016030003103\n//.....and more\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3030490,"reputation":126,"user_id":2569622,"display_name":"Keshav Sharma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638346859,"creation_date":1413452368,"answer_id":26401091,"question_id":26400779,"body_markdown":"```java\r\npublic class Test {\r\n\r\n    public static void main(String[] args) {\r\n        Date d = new Date();\r\n        // it will return a unique value based on time\r\n        System.out.println(d.getTime());\r\n    }\r\n\r\n}\r\n```\r\n\r\nYou can use `getTime` method of date class. It returns the number of milliseconds since January 1, 1970, 00:00:00 GMT represented by this date.","title":"How to generate a UniqueId based on current date","body":"<pre class=\"lang-java prettyprint-override\"><code>public class Test {\n\n    public static void main(String[] args) {\n        Date d = new Date();\n        // it will return a unique value based on time\n        System.out.println(d.getTime());\n    }\n\n}\n</code></pre>\n<p>You can use <code>getTime</code> method of date class. It returns the number of milliseconds since January 1, 1970, 00:00:00 GMT represented by this date.</p>\n"},{"tags":[],"owner":{"account_id":2489579,"reputation":559,"user_id":2167341,"display_name":"HIREN011"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1489530292,"creation_date":1489530292,"answer_id":42797708,"question_id":26400779,"body_markdown":"This code will help you generate any number of unique IDs using current time stamp. Generated ID is of type long - 64 bits. Least Significant 17 bits are used when request to generate a new unique ID is received in the same millisecond of time as the previous request. Its identified as Sequence in the code below. That allows the code to generate 65536 unique IDs per millisecond.\r\n\r\n    /**\r\n     * Unique id is composed of:\r\n     * current time stamp - 47 bits (millisecond precision w/a custom epoch gives as 69 years)\r\n     * sequence number - 17 bits - rolls over every 65536 with protection to avoid rollover in the same ms\r\n     **/\r\n    \r\n    public class UniqueIdGenerator {\r\n        private static final long twepoch = 1288834974657L;\r\n        private static final long sequenceBits = 17;\r\n        private static final long sequenceMax = 65536;\r\n        private static volatile long lastTimestamp = -1L;\r\n        private static volatile long sequence = 0L;\r\n    \r\n        public static void main(String[] args) {\r\n            Set&lt;Long&gt; uniqueIds = new HashSet&lt;Long&gt;();\r\n            long now = System.currentTimeMillis();\r\n            for(int i=0; i &lt; 100000; i++)\r\n            {\r\n                uniqueIds.add(generateLongId());\r\n            }\r\n            System.out.println(&quot;Number of Unique IDs generated: &quot; + uniqueIds.size() + &quot; in &quot; + (System.currentTimeMillis() - now) + &quot; milliseconds&quot;);\r\n        }\r\n    \r\n        private static synchronized Long generateLongId() {\r\n            long timestamp = System.currentTimeMillis();\r\n            if (lastTimestamp == timestamp) {\r\n                sequence = (sequence + 1) % sequenceMax;\r\n                if (sequence == 0) {\r\n                    timestamp = tilNextMillis(lastTimestamp);\r\n                }\r\n            } else {\r\n                sequence = 0;\r\n            }\r\n            lastTimestamp = timestamp;\r\n            Long id = ((timestamp - twepoch) &lt;&lt; sequenceBits) | sequence;\r\n            return id;\r\n        }\r\n    \r\n        private static long tilNextMillis(long lastTimestamp) {\r\n            long timestamp = System.currentTimeMillis();\r\n            while (timestamp &lt;= lastTimestamp) {\r\n                timestamp = System.currentTimeMillis();\r\n            }\r\n            return timestamp;\r\n        }\r\n    }","title":"How to generate a UniqueId based on current date","body":"<p>This code will help you generate any number of unique IDs using current time stamp. Generated ID is of type long - 64 bits. Least Significant 17 bits are used when request to generate a new unique ID is received in the same millisecond of time as the previous request. Its identified as Sequence in the code below. That allows the code to generate 65536 unique IDs per millisecond.</p>\n\n<pre><code>/**\n * Unique id is composed of:\n * current time stamp - 47 bits (millisecond precision w/a custom epoch gives as 69 years)\n * sequence number - 17 bits - rolls over every 65536 with protection to avoid rollover in the same ms\n **/\n\npublic class UniqueIdGenerator {\n    private static final long twepoch = 1288834974657L;\n    private static final long sequenceBits = 17;\n    private static final long sequenceMax = 65536;\n    private static volatile long lastTimestamp = -1L;\n    private static volatile long sequence = 0L;\n\n    public static void main(String[] args) {\n        Set&lt;Long&gt; uniqueIds = new HashSet&lt;Long&gt;();\n        long now = System.currentTimeMillis();\n        for(int i=0; i &lt; 100000; i++)\n        {\n            uniqueIds.add(generateLongId());\n        }\n        System.out.println(\"Number of Unique IDs generated: \" + uniqueIds.size() + \" in \" + (System.currentTimeMillis() - now) + \" milliseconds\");\n    }\n\n    private static synchronized Long generateLongId() {\n        long timestamp = System.currentTimeMillis();\n        if (lastTimestamp == timestamp) {\n            sequence = (sequence + 1) % sequenceMax;\n            if (sequence == 0) {\n                timestamp = tilNextMillis(lastTimestamp);\n            }\n        } else {\n            sequence = 0;\n        }\n        lastTimestamp = timestamp;\n        Long id = ((timestamp - twepoch) &lt;&lt; sequenceBits) | sequence;\n        return id;\n    }\n\n    private static long tilNextMillis(long lastTimestamp) {\n        long timestamp = System.currentTimeMillis();\n        while (timestamp &lt;= lastTimestamp) {\n            timestamp = System.currentTimeMillis();\n        }\n        return timestamp;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8064110,"reputation":993,"user_id":6078825,"display_name":"Prashanth"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1489742113,"creation_date":1489742113,"answer_id":42853394,"question_id":26400779,"body_markdown":"Use this: \r\n\r\n    int unique_id= (int) ((new Date().getTime() / 1000L) % Integer.MAX_VALUE); ","title":"How to generate a UniqueId based on current date","body":"<p>Use this: </p>\n\n<pre><code>int unique_id= (int) ((new Date().getTime() / 1000L) % Integer.MAX_VALUE); \n</code></pre>\n"},{"tags":[],"owner":{"account_id":3713682,"reputation":1629,"user_id":3090370,"display_name":"Neyomal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536117417,"creation_date":1536116951,"answer_id":52176504,"question_id":26400779,"body_markdown":"    I used a simple logical approach which combines current date and time.  That way it is absolutely unique in any given time.\r\n    \r\n    public String  setUniqueID(){\r\n        DateFormat dateFormat = new SimpleDateFormat(&quot;yyddmm&quot;);\r\n        Date date = new Date();\r\n        String dt=String.valueOf(dateFormat.format(date));\r\n        Calendar cal = Calendar.getInstance();\r\n        SimpleDateFormat time = new SimpleDateFormat(&quot;HHmm&quot;);\r\n        String tm= String.valueOf(time.format(new Date()));//time in 24 hour format\r\n        String id= dt+tm;\r\n        System.out.println(id);\r\n        return id;   \r\n    }\r\n    \r\n    This returns a unique id.","title":"How to generate a UniqueId based on current date","body":"<pre><code>I used a simple logical approach which combines current date and time.  That way it is absolutely unique in any given time.\n\npublic String  setUniqueID(){\n    DateFormat dateFormat = new SimpleDateFormat(\"yyddmm\");\n    Date date = new Date();\n    String dt=String.valueOf(dateFormat.format(date));\n    Calendar cal = Calendar.getInstance();\n    SimpleDateFormat time = new SimpleDateFormat(\"HHmm\");\n    String tm= String.valueOf(time.format(new Date()));//time in 24 hour format\n    String id= dt+tm;\n    System.out.println(id);\n    return id;   \n}\n\nThis returns a unique id.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2869812,"reputation":6066,"user_id":2463403,"accept_rate":25,"display_name":"Anees Hameed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1579806583,"creation_date":1579806583,"answer_id":59885582,"question_id":26400779,"body_markdown":"You can use `new Date().getTime().toString(36);` which gives a string something like &#39;u2mcggc1&#39;","title":"How to generate a UniqueId based on current date","body":"<p>You can use <code>new Date().getTime().toString(36);</code> which gives a string something like 'u2mcggc1'</p>\n"},{"tags":[],"owner":{"account_id":2892352,"reputation":1456,"user_id":2480836,"accept_rate":56,"display_name":"nmkyuppie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600859924,"creation_date":1600859924,"answer_id":64026800,"question_id":26400779,"body_markdown":"I think this will help to generate a unique timestamp with 20 characters.\r\n\r\n    public class DateTimeService {\r\n    \r\n        @Autowired\r\n        private Clock clock;\r\n        private LocalDateTime current;\r\n    \r\n        @PostConstruct\r\n        public void init() {\r\n            current = LocalDateTime.now(clock);\r\n        }\r\n    \r\n        public synchronized LocalDateTime getUniqueTimestamp() {\r\n            LocalDateTime now = LocalDateTime.now(clock);\r\n            if (current.isEqual(now) || current.isAfter(now)) {\r\n                current = current.plus(1, ChronoUnit.MICROS);\r\n            } else {\r\n                current = now;\r\n            }\r\n            return current;\r\n        }\r\n    }","title":"How to generate a UniqueId based on current date","body":"<p>I think this will help to generate a unique timestamp with 20 characters.</p>\n<pre><code>public class DateTimeService {\n\n    @Autowired\n    private Clock clock;\n    private LocalDateTime current;\n\n    @PostConstruct\n    public void init() {\n        current = LocalDateTime.now(clock);\n    }\n\n    public synchronized LocalDateTime getUniqueTimestamp() {\n        LocalDateTime now = LocalDateTime.now(clock);\n        if (current.isEqual(now) || current.isAfter(now)) {\n            current = current.plus(1, ChronoUnit.MICROS);\n        } else {\n            current = now;\n        }\n        return current;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11465683,"reputation":99,"user_id":8836967,"display_name":"yatheendra k v"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1612543393,"creation_date":1610439620,"answer_id":65680214,"question_id":26400779,"body_markdown":"**As per me it is very difficult to get unique String based on date and time,\r\nSince loop speed is very fast, high chances are you get duplicate strings.**\r\n\r\n*But here I have a small code with a **twist** to give a unique String every time even in loop.*\r\n\r\n    public static synchronized String getUniqueStringEveryTime()\r\n\t{\r\n\t\t\r\n\t\t\tDate dNow = new Date();\r\n\t        SimpleDateFormat ft = new SimpleDateFormat(&quot;yyyyMMddHHmmssSS&quot;);\r\n\t        String datetime = ft.format(dNow);\r\n\t        try\r\n\t        {\r\n\t        \tThread.sleep(1);\r\n\t        }catch(Exception e)\r\n\t        {\r\n\t        \t\r\n\t        }\r\n\t        return datetime;\r\n\r\n\t}\r\n\r\nThe above simple method works 100% correct any number of times.","title":"How to generate a UniqueId based on current date","body":"<p><strong>As per me it is very difficult to get unique String based on date and time,\nSince loop speed is very fast, high chances are you get duplicate strings.</strong></p>\n<p><em>But here I have a small code with a <strong>twist</strong> to give a unique String every time even in loop.</em></p>\n<pre><code>public static synchronized String getUniqueStringEveryTime()\n{\n    \n        Date dNow = new Date();\n        SimpleDateFormat ft = new SimpleDateFormat(&quot;yyyyMMddHHmmssSS&quot;);\n        String datetime = ft.format(dNow);\n        try\n        {\n            Thread.sleep(1);\n        }catch(Exception e)\n        {\n            \n        }\n        return datetime;\n\n}\n</code></pre>\n<p>The above simple method works 100% correct any number of times.</p>\n"},{"tags":[],"owner":{"account_id":17205344,"reputation":1,"user_id":12456051,"display_name":"hfazai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687519043,"creation_date":1687518929,"answer_id":76539571,"question_id":26400779,"body_markdown":"In your formatter you are using `Ms` which doesn&#39;t add the milliseconds. Instead, you may want to use `SSS`.","title":"How to generate a UniqueId based on current date","body":"<p>In your formatter you are using <code>Ms</code> which doesn't add the milliseconds. Instead, you may want to use <code>SSS</code>.</p>\n"}],"owner":{"display_name":"user663724"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61015,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":10,"score":9,"last_activity_date":1687519043,"creation_date":1413451504,"question_id":26400779,"body_markdown":"I am generating a OrderId which should consist of yyMMddhhmmssMs and this orderId represents primarykey field for the Orders table .\r\n\r\nThe way i was generating Order Id is below :\r\n\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.Date;\r\n    \r\n    public class DateTime {\r\n    \r\n    \tpublic static String getCurrentDateTimeMS() {\r\n    \t\tDate dNow = new Date();\r\n    \t\tSimpleDateFormat ft = new SimpleDateFormat(&quot;yyMMddhhmmssMs&quot;);\r\n    \t\tString datetime = ft.format(dNow);\r\n    \t\treturn datetime;\r\n    \t}\r\n    \r\n    \tpublic static void main(String args[]) throws InterruptedException {\r\n    \t\tfor (int i = 0; i &lt; 50; i++) {\r\n    \t\t\tString orderid = DateTime.getCurrentDateTimeMS();\r\n    \t\t\tSystem.out.println(orderid);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nBut when i load tested my  Application  using JMeter with 100 users with a ramp up of 2 seconds most of them were throwing Duplicate as shown below \r\n\r\n    java.sql.BatchUpdateException: Duplicate entry &#39;1410160239241024&#39; for key &#39;PRIMARY&#39;\r\n            at com.mysql.jdbc.PreparedStatement.executeBatchSerially(PreparedStatement.java:1269)\r\n            at com.mysql.jdbc.PreparedStatement.executeBatch(PreparedStatement.java:955)\r\n            at com.services.OrdersInsertService.getData(OrdersInsertService.java:86)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at java.lang.reflect.Method.invoke(Method.java:601)\r\n\r\n\r\nHow is it possible to generating UniqueId based on current time so that it never fails no matter how many concurrent users are present . ","title":"How to generate a UniqueId based on current date","body":"<p>I am generating a OrderId which should consist of yyMMddhhmmssMs and this orderId represents primarykey field for the Orders table .</p>\n\n<p>The way i was generating Order Id is below :</p>\n\n<pre><code>import java.text.SimpleDateFormat;\nimport java.util.Date;\n\npublic class DateTime {\n\n    public static String getCurrentDateTimeMS() {\n        Date dNow = new Date();\n        SimpleDateFormat ft = new SimpleDateFormat(\"yyMMddhhmmssMs\");\n        String datetime = ft.format(dNow);\n        return datetime;\n    }\n\n    public static void main(String args[]) throws InterruptedException {\n        for (int i = 0; i &lt; 50; i++) {\n            String orderid = DateTime.getCurrentDateTimeMS();\n            System.out.println(orderid);\n        }\n    }\n}\n</code></pre>\n\n<p>But when i load tested my  Application  using JMeter with 100 users with a ramp up of 2 seconds most of them were throwing Duplicate as shown below </p>\n\n<pre><code>java.sql.BatchUpdateException: Duplicate entry '1410160239241024' for key 'PRIMARY'\n        at com.mysql.jdbc.PreparedStatement.executeBatchSerially(PreparedStatement.java:1269)\n        at com.mysql.jdbc.PreparedStatement.executeBatch(PreparedStatement.java:955)\n        at com.services.OrdersInsertService.getData(OrdersInsertService.java:86)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:601)\n</code></pre>\n\n<p>How is it possible to generating UniqueId based on current time so that it never fails no matter how many concurrent users are present . </p>\n"},{"tags":["java","android","android-recyclerview","native","headerfooter"],"answers":[{"tags":[],"owner":{"account_id":12086283,"reputation":21,"user_id":8835088,"display_name":"Robby Ali Darmawan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687518777,"creation_date":1686914360,"answer_id":76489673,"question_id":76489672,"body_markdown":"I have implement it but there is issue, which is the footer is below of item. and this is my code:\r\n\r\n    public class HeaderItemYoutuberAdapter extends RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt; {\r\n    public static final int HEADER = 1;\r\n    private static final int ITEM = 2;\r\n    private Context mContext;\r\n    List&lt;ListItem&gt; consolidatedList = new ArrayList&lt;&gt;();\r\n    private String guestName= &quot;&quot;;\r\n    private String imgProfile = &quot;&quot;;\r\n    private String descGuest= &quot;&quot;;\r\n    private String posritionGuest= &quot;&quot;;\r\n\r\n    public HeaderItemYoutuberAdapter(Context mContext, List&lt;ListItem&gt; consolidatedList) {\r\n        this.consolidatedList = consolidatedList;\r\n        this.mContext = mContext;\r\n    }\r\n\r\n    \r\n\r\n    @Override\r\n    public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup viewGroup, int type) {\r\n        final View view;\r\n        RecyclerView.ViewHolder viewHolder = null;\r\n\r\n        if (type == ListItem.TYPE_HEADER) {\r\n            View view1 = LayoutInflater.from(viewGroup.getContext()).inflate(R.layout.section_header, viewGroup, false);\r\n            viewHolder = new HeaderViewHolder(view1);\r\n        } else {\r\n            View view2 = LayoutInflater.from(viewGroup.getContext()).inflate(R.layout.section_item, viewGroup, false);\r\n            viewHolder = new ItemViewHolder(view2);\r\n\r\n        }\r\n        return viewHolder;\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(RecyclerView.ViewHolder viewHolder, int position) {\r\n        if (viewHolder.getItemViewType() == ListItem.TYPE_HEADER) {\r\n            HeaderItem generalItem   = (HeaderItem) consolidatedList.get(position);\r\n            HeaderViewHolder generalViewHolder= (HeaderViewHolder) viewHolder;\r\n            generalViewHolder.txtTitleHeader.setText(generalItem.getHeaderYotube().getCategory());\r\n\r\n        } else {\r\n            ItemContent dateItem = (ItemContent) consolidatedList.get(position);\r\n            ItemViewHolder dateViewHolder = (ItemViewHolder) viewHolder;\r\n            if (dateItem.getmStrings().size()&gt;0){\r\n                for (int i = 0; i&lt;dateItem.getmStrings().size(); i++){\r\n                    guestName = dateItem.getmStrings().get(i).getGuestName();\r\n                    imgProfile = dateItem.getmStrings().get(i).getImgProfile();\r\n                    descGuest = dateItem.getmStrings().get(i).getDesc();\r\n                }\r\n            }\r\n\r\n            dateViewHolder.txtTitle.setText(guestName);\r\n            Glide.with(mContext)\r\n                    .load(imgProfile)\r\n                    .diskCacheStrategy(DiskCacheStrategy.ALL)\r\n                    .placeholder(mContext.getDrawable(R.drawable.image_placeholder))\r\n                    .fitCenter()\r\n                    .into(dateViewHolder.imgContent);\r\n            dateViewHolder.txtDesc.setText(descGuest);        }\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return consolidatedList != null ? consolidatedList.size() : 0;\r\n    }\r\n\r\n\r\n    private boolean isPositionHeader(int position) {\r\n        return position == 0;\r\n    }\r\n\r\n    @Override\r\n    public int getItemViewType(int position) {\r\n       return consolidatedList.get(position).getType();\r\n\r\n    }\r\n\r\n    class HeaderViewHolder extends RecyclerView.ViewHolder {\r\n        protected TextView txtTitleHeader;\r\n\r\n        public HeaderViewHolder(View v) {\r\n            super(v);\r\n            this.txtTitleHeader = (TextView) v.findViewById(R.id.txt_header_section);\r\n\r\n        }\r\n    }\r\n\r\n    class ItemViewHolder extends RecyclerView.ViewHolder {\r\n        protected TextView txtTitle;\r\n        protected ImageView imgContent;\r\n        protected TextView txtDesc;\r\n\r\n        public ItemViewHolder(View v) {\r\n            super(v);\r\n            this.txtTitle   = v.findViewById(R.id.txt_name_youtuber);\r\n            this.txtDesc   = v.findViewById(R.id.txt_desc_youtuber);\r\n            this.imgContent = v.findViewById(R.id.img_exhibition_item);\r\n\r\n        }\r\n    }\r\n   \r\nand this is the result what i have[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/swP1S.jpg","title":"Recylerview set header and item from HasMap","body":"<p>I have implement it but there is issue, which is the footer is below of item. and this is my code:</p>\n<pre><code>public class HeaderItemYoutuberAdapter extends RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt; {\npublic static final int HEADER = 1;\nprivate static final int ITEM = 2;\nprivate Context mContext;\nList&lt;ListItem&gt; consolidatedList = new ArrayList&lt;&gt;();\nprivate String guestName= &quot;&quot;;\nprivate String imgProfile = &quot;&quot;;\nprivate String descGuest= &quot;&quot;;\nprivate String posritionGuest= &quot;&quot;;\n\npublic HeaderItemYoutuberAdapter(Context mContext, List&lt;ListItem&gt; consolidatedList) {\n    this.consolidatedList = consolidatedList;\n    this.mContext = mContext;\n}\n\n\n\n@Override\npublic RecyclerView.ViewHolder onCreateViewHolder(ViewGroup viewGroup, int type) {\n    final View view;\n    RecyclerView.ViewHolder viewHolder = null;\n\n    if (type == ListItem.TYPE_HEADER) {\n        View view1 = LayoutInflater.from(viewGroup.getContext()).inflate(R.layout.section_header, viewGroup, false);\n        viewHolder = new HeaderViewHolder(view1);\n    } else {\n        View view2 = LayoutInflater.from(viewGroup.getContext()).inflate(R.layout.section_item, viewGroup, false);\n        viewHolder = new ItemViewHolder(view2);\n\n    }\n    return viewHolder;\n}\n\n@Override\npublic void onBindViewHolder(RecyclerView.ViewHolder viewHolder, int position) {\n    if (viewHolder.getItemViewType() == ListItem.TYPE_HEADER) {\n        HeaderItem generalItem   = (HeaderItem) consolidatedList.get(position);\n        HeaderViewHolder generalViewHolder= (HeaderViewHolder) viewHolder;\n        generalViewHolder.txtTitleHeader.setText(generalItem.getHeaderYotube().getCategory());\n\n    } else {\n        ItemContent dateItem = (ItemContent) consolidatedList.get(position);\n        ItemViewHolder dateViewHolder = (ItemViewHolder) viewHolder;\n        if (dateItem.getmStrings().size()&gt;0){\n            for (int i = 0; i&lt;dateItem.getmStrings().size(); i++){\n                guestName = dateItem.getmStrings().get(i).getGuestName();\n                imgProfile = dateItem.getmStrings().get(i).getImgProfile();\n                descGuest = dateItem.getmStrings().get(i).getDesc();\n            }\n        }\n\n        dateViewHolder.txtTitle.setText(guestName);\n        Glide.with(mContext)\n                .load(imgProfile)\n                .diskCacheStrategy(DiskCacheStrategy.ALL)\n                .placeholder(mContext.getDrawable(R.drawable.image_placeholder))\n                .fitCenter()\n                .into(dateViewHolder.imgContent);\n        dateViewHolder.txtDesc.setText(descGuest);        }\n}\n\n@Override\npublic int getItemCount() {\n    return consolidatedList != null ? consolidatedList.size() : 0;\n}\n\n\nprivate boolean isPositionHeader(int position) {\n    return position == 0;\n}\n\n@Override\npublic int getItemViewType(int position) {\n   return consolidatedList.get(position).getType();\n\n}\n\nclass HeaderViewHolder extends RecyclerView.ViewHolder {\n    protected TextView txtTitleHeader;\n\n    public HeaderViewHolder(View v) {\n        super(v);\n        this.txtTitleHeader = (TextView) v.findViewById(R.id.txt_header_section);\n\n    }\n}\n\nclass ItemViewHolder extends RecyclerView.ViewHolder {\n    protected TextView txtTitle;\n    protected ImageView imgContent;\n    protected TextView txtDesc;\n\n    public ItemViewHolder(View v) {\n        super(v);\n        this.txtTitle   = v.findViewById(R.id.txt_name_youtuber);\n        this.txtDesc   = v.findViewById(R.id.txt_desc_youtuber);\n        this.imgContent = v.findViewById(R.id.img_exhibition_item);\n\n    }\n}\n</code></pre>\n<p>and this is the result what i have<a href=\"https://i.stack.imgur.com/swP1S.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/swP1S.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":12086283,"reputation":21,"user_id":8835088,"display_name":"Robby Ali Darmawan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687518777,"creation_date":1686914360,"question_id":76489672,"body_markdown":"[![expect result like this][1]][1]\r\n\r\n\r\nexpect result like that.. \r\nand the response from API like this\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/26gpD.png\r\n  [2]: https://i.stack.imgur.com/LBIjK.png\r\n\r\nthen, how to implement it use HasMap and define header and item.\r\nplease help me. thank you.","title":"Recylerview set header and item from HasMap","body":"<p><a href=\"https://i.stack.imgur.com/26gpD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/26gpD.png\" alt=\"expect result like this\" /></a></p>\n<p>expect result like that..\nand the response from API like this\n<a href=\"https://i.stack.imgur.com/LBIjK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LBIjK.png\" alt=\"enter image description here\" /></a></p>\n<p>then, how to implement it use HasMap and define header and item.\nplease help me. thank you.</p>\n"},{"tags":["java","spring-boot","maven","debugging","intellij-idea"],"comments":[{"owner":{"account_id":17693330,"reputation":3781,"user_id":12844632,"display_name":"Egor Klepikov"},"score":0,"creation_date":1687506012,"post_id":76536844,"comment_id":134949190,"body_markdown":"Check if https://stackoverflow.com/a/59907162/12844632 looks similar to your case","body":"Check if <a href=\"https://stackoverflow.com/a/59907162/12844632\">stackoverflow.com/a/59907162/12844632</a> looks similar to your case"},{"owner":{"account_id":17693330,"reputation":3781,"user_id":12844632,"display_name":"Egor Klepikov"},"score":0,"creation_date":1687506105,"post_id":76536844,"comment_id":134949207,"body_markdown":"Try running the application via [Maven](https://www.jetbrains.com/help/idea/work-with-maven-goals.html#run_maven_goal_run_config) or [JAR](https://www.jetbrains.com/help/idea/run-debug-configuration-jar.html) run/debug configuration to see if it helps","body":"Try running the application via <a href=\"https://www.jetbrains.com/help/idea/work-with-maven-goals.html#run_maven_goal_run_config\" rel=\"nofollow noreferrer\">Maven</a> or <a href=\"https://www.jetbrains.com/help/idea/run-debug-configuration-jar.html\" rel=\"nofollow noreferrer\">JAR</a> run/debug configuration to see if it helps"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1687511741,"post_id":76536844,"comment_id":134950339,"body_markdown":"First if your IntelliJ version is of 2020.. your should upgrade ...also you are using a version `1.2.5.RELEASE` (`spring-boot-starter-log4j`) those versions are really out of date... use most recent version of IntellIJ 2023.X .. also use most recent version of spring boot 3.1+","body":"First if your IntelliJ version is of 2020.. your should upgrade ...also you are using a version <code>1.2.5.RELEASE</code> (<code>spring-boot-starter-log4j</code>) those versions are really out of date... use most recent version of IntellIJ 2023.X .. also use most recent version of spring boot 3.1+"},{"owner":{"account_id":2310125,"reputation":1532,"user_id":2028440,"accept_rate":25,"display_name":"Bằng Rikimaru"},"score":0,"creation_date":1687515223,"post_id":76536844,"comment_id":134951008,"body_markdown":"@EgorKlepikov Thank you, but https://stackoverflow.com/a/59907162/12844632 doesn&#39;t work for me. I removed spring devtools from External Libraries.\n\nWith this https://www.jetbrains.com/help/idea/2020.2/work-with-maven-goals.html#run_goal and use Maven window &gt;  project app-main &gt; Plugins &gt; spring-boot (comes from spring-boot-maven-plugin in pom.xml) &gt; spring-boot:run AND this extra parameter -Dspring-boot.run.fork=false then I can see IntellJ can start Spring boot application with debugger. But this is not good as devtools doesn&#39;t work with fork=false.","body":"@EgorKlepikov Thank you, but <a href=\"https://stackoverflow.com/a/59907162/12844632\">stackoverflow.com/a/59907162/12844632</a> doesn&#39;t work for me. I removed spring devtools from External Libraries.  With this <a href=\"https://www.jetbrains.com/help/idea/2020.2/work-with-maven-goals.html#run_goal\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/2020.2/&hellip;</a> and use Maven window &gt;  project app-main &gt; Plugins &gt; spring-boot (comes from spring-boot-maven-plugin in pom.xml) &gt; spring-boot:run AND this extra parameter -Dspring-boot.run.fork=false then I can see IntellJ can start Spring boot application with debugger. But this is not good as devtools doesn&#39;t work with fork=false."}],"answers":[{"tags":[],"owner":{"account_id":2310125,"reputation":1532,"user_id":2028440,"accept_rate":25,"display_name":"Bằng Rikimaru"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687518706,"creation_date":1687518706,"answer_id":76539543,"question_id":76536844,"body_markdown":"This works well with IntelliJ and spring boot devtools, IF, I removed Log4j from pom.xml for both `core` and `main-app` applications and I don&#39;t add this `exclusions` anymore:\r\n\r\n```\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;    \r\n```\r\n\r\n\r\nIn `application.properties` of `main-app`, I have:\r\n\r\n```\r\nspring.devtools.restart.additional-paths=../core\r\n```\r\n\r\nThen, with `Logback` the default logging of Spring boot which I tested and I can just run `ApplicationMain` in `main-app` via Intellj without any problem.\r\n\r\nIt is very nice when I changed something in `core` application and IntelliJ can allow Spring `devtools` to classes in classpath and in `main-app` the result is changed as well.","title":"Spring boot can run with mvn spring-boot:run but not working via IntelliJ community to run main class?","body":"<p>This works well with IntelliJ and spring boot devtools, IF, I removed Log4j from pom.xml for both <code>core</code> and <code>main-app</code> applications and I don't add this <code>exclusions</code> anymore:</p>\n<pre><code>            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;    \n</code></pre>\n<p>In <code>application.properties</code> of <code>main-app</code>, I have:</p>\n<pre><code>spring.devtools.restart.additional-paths=../core\n</code></pre>\n<p>Then, with <code>Logback</code> the default logging of Spring boot which I tested and I can just run <code>ApplicationMain</code> in <code>main-app</code> via Intellj without any problem.</p>\n<p>It is very nice when I changed something in <code>core</code> application and IntelliJ can allow Spring <code>devtools</code> to classes in classpath and in <code>main-app</code> the result is changed as well.</p>\n"}],"owner":{"account_id":2310125,"reputation":1532,"user_id":2028440,"accept_rate":25,"display_name":"Bằng Rikimaru"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":154,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687518706,"creation_date":1687489342,"question_id":76536844,"body_markdown":"I have `IntelliJ community 2020.2.4` version and a `Spring Boot 2.7.10` web application (called `main-app`) using `maven` with `openjdk version &quot;11.0.18&quot; 2023-01-17`,\r\n\r\nThis application has a dependency which is another project (which compiled to a `core.jar` file).\r\n\r\nI don&#39;t want to use `Logback` by default provided by Spring Boot, but `log4j version 1`. Hence:\r\n\r\n- In `core` project, with `pom.xml`, it has:\r\n\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-log4j&lt;/artifactId&gt;\r\n            &lt;version&gt;1.2.5.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n- In `main-app` project, with `pom.xml`, it has:\r\n\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.test&lt;/groupId&gt;\r\n            &lt;artifactId&gt;core&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;            \r\n        &lt;/dependency&gt;    \r\n```\r\n\r\n\r\nNormally, what I do to be able to run and debug this `main-app` in my local system is, I run it in a Linux terminal:\r\n\r\n```\r\ncd core &amp;&amp; mvn install &gt;&gt; /dev/null\r\nmvn spring-boot:run -Dspring-boot.run.jvmArguments=&quot;-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:5005&quot;\r\n```\r\n\r\nThen, I can use IntelliJ to attach remote debugger (although IntelliJ and Spring Boot application are both in a local system) like this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nHowever, I don&#39;t understand why, if I just run the `main` method in `ApplicationMain.java` in `main-app` application with Intellij, then it has error and Spring boot stopped (shift + F10).\r\n\r\n[![enter image description here][2]][2]\r\n\r\n```\r\nERROR [2023-06-23 04:52:05] ApplicationMain@712: Error starting petascope with embedded Tomcat. Reason: class org.apache.logging.slf4j.SLF4JLoggerContext cannot be cast to class org.apache.logging.log4j.core.LoggerContext (org.apache.logging.slf4j.SLF4JLoggerContext and org.apache.logging.log4j.core.LoggerContext are in unnamed module of loader &#39;app&#39;)\r\njava.lang.ClassCastException: class org.apache.logging.slf4j.SLF4JLoggerContext cannot be cast to class org.apache.logging.log4j.core.LoggerContext (org.apache.logging.slf4j.SLF4JLoggerContext and org.apache.logging.log4j.core.LoggerContext are in unnamed module of loader &#39;app&#39;)\r\n\tat org.springframework.boot.logging.log4j2.Log4J2LoggingSystem.getLoggerContext(Log4J2LoggingSystem.java:401)\r\n\tat org.springframework.boot.logging.log4j2.Log4J2LoggingSystem.beforeInitialize(Log4J2LoggingSystem.java:154)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationStartingEvent(LoggingApplicationListener.java:238)\r\n\tat org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEvent(LoggingApplicationListener.java:220)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:131)\r\n\tat org.springframework.boot.context.event.EventPublishingRunListener.starting(EventPublishingRunListener.java:79)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.lambda$starting$0(SpringApplicationRunListeners.java:56)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:120)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.starting(SpringApplicationRunListeners.java:56)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:298)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1303)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1292)\r\n\tat org.rasdaman.ApplicationMain.main(ApplicationMain.java:706)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)\r\n```\r\n\r\n\r\nI don&#39;t understand what is wrong with Spring Boot here when IntelliJ tried to start it via the `main` method, while it works fine with `mvn spring-boot:run`.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KJX1L.png\r\n  [2]: https://i.stack.imgur.com/D6sbL.png","title":"Spring boot can run with mvn spring-boot:run but not working via IntelliJ community to run main class?","body":"<p>I have <code>IntelliJ community 2020.2.4</code> version and a <code>Spring Boot 2.7.10</code> web application (called <code>main-app</code>) using <code>maven</code> with <code>openjdk version &quot;11.0.18&quot; 2023-01-17</code>,</p>\n<p>This application has a dependency which is another project (which compiled to a <code>core.jar</code> file).</p>\n<p>I don't want to use <code>Logback</code> by default provided by Spring Boot, but <code>log4j version 1</code>. Hence:</p>\n<ul>\n<li>In <code>core</code> project, with <code>pom.xml</code>, it has:</li>\n</ul>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-log4j&lt;/artifactId&gt;\n            &lt;version&gt;1.2.5.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<ul>\n<li>In <code>main-app</code> project, with <code>pom.xml</code>, it has:</li>\n</ul>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.test&lt;/groupId&gt;\n            &lt;artifactId&gt;core&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;            \n        &lt;/dependency&gt;    \n</code></pre>\n<p>Normally, what I do to be able to run and debug this <code>main-app</code> in my local system is, I run it in a Linux terminal:</p>\n<pre><code>cd core &amp;&amp; mvn install &gt;&gt; /dev/null\nmvn spring-boot:run -Dspring-boot.run.jvmArguments=&quot;-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:5005&quot;\n</code></pre>\n<p>Then, I can use IntelliJ to attach remote debugger (although IntelliJ and Spring Boot application are both in a local system) like this:</p>\n<p><a href=\"https://i.stack.imgur.com/KJX1L.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KJX1L.png\" alt=\"enter image description here\" /></a></p>\n<p>However, I don't understand why, if I just run the <code>main</code> method in <code>ApplicationMain.java</code> in <code>main-app</code> application with Intellij, then it has error and Spring boot stopped (shift + F10).</p>\n<p><a href=\"https://i.stack.imgur.com/D6sbL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/D6sbL.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>ERROR [2023-06-23 04:52:05] ApplicationMain@712: Error starting petascope with embedded Tomcat. Reason: class org.apache.logging.slf4j.SLF4JLoggerContext cannot be cast to class org.apache.logging.log4j.core.LoggerContext (org.apache.logging.slf4j.SLF4JLoggerContext and org.apache.logging.log4j.core.LoggerContext are in unnamed module of loader 'app')\njava.lang.ClassCastException: class org.apache.logging.slf4j.SLF4JLoggerContext cannot be cast to class org.apache.logging.log4j.core.LoggerContext (org.apache.logging.slf4j.SLF4JLoggerContext and org.apache.logging.log4j.core.LoggerContext are in unnamed module of loader 'app')\n    at org.springframework.boot.logging.log4j2.Log4J2LoggingSystem.getLoggerContext(Log4J2LoggingSystem.java:401)\n    at org.springframework.boot.logging.log4j2.Log4J2LoggingSystem.beforeInitialize(Log4J2LoggingSystem.java:154)\n    at org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationStartingEvent(LoggingApplicationListener.java:238)\n    at org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEvent(LoggingApplicationListener.java:220)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:131)\n    at org.springframework.boot.context.event.EventPublishingRunListener.starting(EventPublishingRunListener.java:79)\n    at org.springframework.boot.SpringApplicationRunListeners.lambda$starting$0(SpringApplicationRunListeners.java:56)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:120)\n    at org.springframework.boot.SpringApplicationRunListeners.starting(SpringApplicationRunListeners.java:56)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:298)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1303)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1292)\n    at org.rasdaman.ApplicationMain.main(ApplicationMain.java:706)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)\n</code></pre>\n<p>I don't understand what is wrong with Spring Boot here when IntelliJ tried to start it via the <code>main</code> method, while it works fine with <code>mvn spring-boot:run</code>.</p>\n"},{"tags":["java","encryption"],"comments":[{"owner":{"account_id":18236,"reputation":46374,"user_id":41619,"accept_rate":91,"display_name":"Adam Paynter"},"score":0,"creation_date":1278434256,"post_id":3188171,"comment_id":3283965,"body_markdown":"As a side-note, you may wish to redesign your `Cipher.getInstance(&quot;DES&quot;)` method call: http://stackoverflow.com/questions/3180878/exception-in-aes-decryption-algorithm-in-java/3181250#3181250","body":"As a side-note, you may wish to redesign your <code>Cipher.getInstance(&quot;DES&quot;)</code> method call: <a href=\"http://stackoverflow.com/questions/3180878/exception-in-aes-decryption-algorithm-in-java/3181250#3181250\" title=\"exception in aes decryption algorithm in java\">stackoverflow.com/questions/3180878/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":61382,"reputation":74430,"user_id":182971,"accept_rate":72,"display_name":"Sjoerd"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1278433862,"creation_date":1278433862,"answer_id":3188211,"question_id":3188171,"body_markdown":"If the attacker has access to both the software and the file, it could decrypt it. There are some ways to solve this:\r\n\r\n- Use asymetric keys. Encrypt the file with the public key, and it can only be decrypted with a private key. This assumes that the software does not need to decrypt the file.\r\n- Use Diffie-Hellman exchange. If you want to send an encrypted piece of data over the network, both parties can establish a key without an attacker knowing about it.\r\n\r\nIf the program needs to both encrypt and decrypt the data, there is nothing you can do. The attacker  can simply run the program and look at the decrypted information.","title":"Java encryption alternitive to hardcoded key","body":"<p>If the attacker has access to both the software and the file, it could decrypt it. There are some ways to solve this:</p>\n\n<ul>\n<li>Use asymetric keys. Encrypt the file with the public key, and it can only be decrypted with a private key. This assumes that the software does not need to decrypt the file.</li>\n<li>Use Diffie-Hellman exchange. If you want to send an encrypted piece of data over the network, both parties can establish a key without an attacker knowing about it.</li>\n</ul>\n\n<p>If the program needs to both encrypt and decrypt the data, there is nothing you can do. The attacker  can simply run the program and look at the decrypted information.</p>\n"},{"tags":[],"owner":{"account_id":84900,"reputation":2129,"user_id":237073,"accept_rate":100,"display_name":"Martin Wiboe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1278433914,"creation_date":1278433914,"answer_id":3188218,"question_id":3188171,"body_markdown":"I do not believe that this is possible without having the user entering the key on encryption and decryption.\r\n\r\nYou could employ some technique to make it harder to view the key without the full source code, but it would not be secure.","title":"Java encryption alternitive to hardcoded key","body":"<p>I do not believe that this is possible without having the user entering the key on encryption and decryption.</p>\n\n<p>You could employ some technique to make it harder to view the key without the full source code, but it would not be secure.</p>\n"},{"tags":[],"owner":{"account_id":143129,"reputation":1012,"user_id":351264,"display_name":"Dave Kilian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1278433916,"creation_date":1278433916,"answer_id":3188219,"question_id":3188171,"body_markdown":"If your program can encrypt / decrypt a file on its own, then everything you need to perform the decryption is already built into the program, so a determined troublemaker could decrypt files you encrypted.\r\n\r\nIf possible, ask the user for a &#39;password,&#39; and use what they give you as the encryption / decryption key.","title":"Java encryption alternitive to hardcoded key","body":"<p>If your program can encrypt / decrypt a file on its own, then everything you need to perform the decryption is already built into the program, so a determined troublemaker could decrypt files you encrypted.</p>\n\n<p>If possible, ask the user for a 'password,' and use what they give you as the encryption / decryption key.</p>\n"},{"tags":[],"owner":{"account_id":46925,"reputation":8408,"user_id":138837,"accept_rate":60,"display_name":"Drew Wills"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1278433993,"creation_date":1278433993,"answer_id":3188230,"question_id":3188171,"body_markdown":"Is it important that the user not be able to see his own encryption key?  Or merely important that by discovering his won key, the user should not thereby know everyone else&#39;s key?\r\n\r\nYou could prompt the user for a personal key and either store it externally or prompt the user each time you need it.  That way each user&#39;s key would be his own, and would not be usable to decrypt documents stored by other users on other machines.","title":"Java encryption alternitive to hardcoded key","body":"<p>Is it important that the user not be able to see his own encryption key?  Or merely important that by discovering his won key, the user should not thereby know everyone else's key?</p>\n\n<p>You could prompt the user for a personal key and either store it externally or prompt the user each time you need it.  That way each user's key would be his own, and would not be usable to decrypt documents stored by other users on other machines.</p>\n"},{"tags":[],"owner":{"account_id":28882,"reputation":59171,"user_id":77507,"accept_rate":89,"display_name":"Daniel Br&#252;ckner"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1278434397,"creation_date":1278434397,"answer_id":3188291,"question_id":3188171,"body_markdown":"An attacker can always do everything the program can do and usually quite a bit more. The only way to get things secure is the use information not under control of the program. Request the user to enter a password or put information in a store under control of the operating system. The later will not help if an attacker has physical access or maybe even a lot of rights unless special hardware like a Trusted Platform Module (TPM) is involved.","title":"Java encryption alternitive to hardcoded key","body":"<p>An attacker can always do everything the program can do and usually quite a bit more. The only way to get things secure is the use information not under control of the program. Request the user to enter a password or put information in a store under control of the operating system. The later will not help if an attacker has physical access or maybe even a lot of rights unless special hardware like a Trusted Platform Module (TPM) is involved.</p>\n"},{"tags":[],"owner":{"account_id":145890,"reputation":1453,"user_id":355999,"display_name":"ollb"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1278435903,"creation_date":1278435903,"answer_id":3188477,"question_id":3188171,"body_markdown":"Well if the program can decrypt the data without additional input from the user, you can&#39;t really avoid someone else from accessing the file if he has access to the program.\r\n\r\nIf you are targeting Windows only, you might want to take a look at the [Data Protection API (DPAPI)][1]. It essentially does the same thing, but the passphrase used for encryption is protected by the operating system on a user (or machine) scope. Simply put: you need the user login (or a program that runs on the given user account) to access the key (or for machine scope the login for any user on the machine).\r\n\r\nI don&#39;t know how to access the API from Java, but Google brings up some wrapper libraries.\r\n\r\n  [1]: http://msdn.microsoft.com/en-us/library/ms995355.aspx","title":"Java encryption alternitive to hardcoded key","body":"<p>Well if the program can decrypt the data without additional input from the user, you can't really avoid someone else from accessing the file if he has access to the program.</p>\n\n<p>If you are targeting Windows only, you might want to take a look at the <a href=\"http://msdn.microsoft.com/en-us/library/ms995355.aspx\" rel=\"nofollow noreferrer\">Data Protection API (DPAPI)</a>. It essentially does the same thing, but the passphrase used for encryption is protected by the operating system on a user (or machine) scope. Simply put: you need the user login (or a program that runs on the given user account) to access the key (or for machine scope the login for any user on the machine).</p>\n\n<p>I don't know how to access the API from Java, but Google brings up some wrapper libraries.</p>\n"},{"tags":[],"owner":{"account_id":4954,"reputation":4796,"user_id":7708,"accept_rate":81,"display_name":"Alan Krueger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1278438050,"creation_date":1278438050,"answer_id":3188757,"question_id":3188171,"body_markdown":"Don&#39;t hardcode the key.  Assuming you don&#39;t have a user on hand to enter the passphrase, configure your code to pull the encryption key from a plain file, then rely on operating system security to keep the file safe.  Provide a way to migrate to a new key when the system administrator deems it necessary.","title":"Java encryption alternitive to hardcoded key","body":"<p>Don't hardcode the key.  Assuming you don't have a user on hand to enter the passphrase, configure your code to pull the encryption key from a plain file, then rely on operating system security to keep the file safe.  Provide a way to migrate to a new key when the system administrator deems it necessary.</p>\n"},{"tags":[],"owner":{"account_id":2346102,"reputation":1,"user_id":2056319,"display_name":"user2056319"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687518523,"creation_date":1360376552,"answer_id":14784285,"question_id":3188171,"body_markdown":"The most secure method is not use any encryption, just put your `user.properties` to your home directory, with following code:\r\n\r\n    String userhome = System.getProperty(&quot;user.home&quot;);\r\n    String username = system.getProperty(&quot;user.name&quot;);\r\n    String hostname = java.net.InetAddress.getLocalHost().getHostName();\r\n\r\n    if (hostname.equals(&quot;webserver&quot;) &amp;&amp; username.equals(&quot;root&quot;)){\r\n        ResourceBundle user = ResourceBundle.getBundle(userhome/ &quot;user.properties&quot;);\r\n    }\r\n\r\n","title":"Java encryption alternitive to hardcoded key","body":"<p>The most secure method is not use any encryption, just put your <code>user.properties</code> to your home directory, with following code:</p>\n<pre><code>String userhome = System.getProperty(&quot;user.home&quot;);\nString username = system.getProperty(&quot;user.name&quot;);\nString hostname = java.net.InetAddress.getLocalHost().getHostName();\n\nif (hostname.equals(&quot;webserver&quot;) &amp;&amp; username.equals(&quot;root&quot;)){\n    ResourceBundle user = ResourceBundle.getBundle(userhome/ &quot;user.properties&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":162943,"reputation":585,"user_id":384746,"accept_rate":67,"display_name":"DRJTower"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15799,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":3188211,"answer_count":8,"score":10,"last_activity_date":1687518523,"creation_date":1278433547,"question_id":3188171,"body_markdown":"I am new to encryption.\r\n\r\nI have looked at the javax.crypto documentation and got encryption of a file to work using this code ...\r\n\r\n    File saveFile = new File(&quot;Settings.set&quot;);\r\n            saveFile.delete();\r\n            FileOutputStream fout = new FileOutputStream(saveFile);\r\n\r\n            //Encrypt the settings\r\n            //Generate a key\r\n            byte key[] = &quot;My Encryption Key98&quot;.getBytes();\r\n            DESKeySpec desKeySpec = new DESKeySpec(key);\r\n            SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(&quot;DES&quot;);\r\n            SecretKey skey = keyFactory.generateSecret(desKeySpec);\r\n\r\n            //Prepare the encrypter\r\n            Cipher ecipher = Cipher.getInstance(&quot;DES&quot;);\r\n            ecipher.init(Cipher.ENCRYPT_MODE, skey);\r\n            // Seal (encrypt) the object\r\n            SealedObject so = new SealedObject(this, ecipher);\r\n\r\n            ObjectOutputStream o = new ObjectOutputStream(fout);\r\n            o.writeObject(so);\r\n            o.close();\r\n\r\n \r\nHowever if you were a clever hacker ( or maybe even amateur since I figured this out), all you would have to do is open the class file that contains this code, and the encryption key (My Encryption Key98) is plainly visible.\r\n\r\nHow do you encrypt the encryption key? ...LOL...  Can you?\r\n\r\nThanks for your help!","title":"Java encryption alternitive to hardcoded key","body":"<p>I am new to encryption.</p>\n\n<p>I have looked at the javax.crypto documentation and got encryption of a file to work using this code ...</p>\n\n<pre><code>File saveFile = new File(\"Settings.set\");\n        saveFile.delete();\n        FileOutputStream fout = new FileOutputStream(saveFile);\n\n        //Encrypt the settings\n        //Generate a key\n        byte key[] = \"My Encryption Key98\".getBytes();\n        DESKeySpec desKeySpec = new DESKeySpec(key);\n        SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(\"DES\");\n        SecretKey skey = keyFactory.generateSecret(desKeySpec);\n\n        //Prepare the encrypter\n        Cipher ecipher = Cipher.getInstance(\"DES\");\n        ecipher.init(Cipher.ENCRYPT_MODE, skey);\n        // Seal (encrypt) the object\n        SealedObject so = new SealedObject(this, ecipher);\n\n        ObjectOutputStream o = new ObjectOutputStream(fout);\n        o.writeObject(so);\n        o.close();\n</code></pre>\n\n<p>However if you were a clever hacker ( or maybe even amateur since I figured this out), all you would have to do is open the class file that contains this code, and the encryption key (My Encryption Key98) is plainly visible.</p>\n\n<p>How do you encrypt the encryption key? ...LOL...  Can you?</p>\n\n<p>Thanks for your help!</p>\n"},{"tags":["java","arrays","sum"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1607067831,"post_id":65139653,"comment_id":115161025,"body_markdown":"&quot;arraylist1 is just my array holding the values of each card&quot; it would be helpful to know its actual content anyway.","body":"&quot;arraylist1 is just my array holding the values of each card&quot; it would be helpful to know its actual content anyway."},{"owner":{"account_id":3970780,"reputation":2667,"user_id":3275441,"accept_rate":75,"display_name":"Milgo"},"score":0,"creation_date":1607067908,"post_id":65139653,"comment_id":115161055,"body_markdown":"How are `arraylist1` and `final_listarray` (bad names btw) declared? How do you print your result? Please add a [Minimal, Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"How are <code>arraylist1</code> and <code>final_listarray</code> (bad names btw) declared? How do you print your result? Please add a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal, Reproducible Example</a>."},{"owner":{"account_id":6379952,"reputation":3111,"user_id":4949750,"display_name":"Amongalen"},"score":0,"creation_date":1607067956,"post_id":65139653,"comment_id":115161071,"body_markdown":"It seems to me like a good case to learn using a debugger. Did you try that?","body":"It seems to me like a good case to learn using a debugger. Did you try that?"},{"owner":{"account_id":19923405,"reputation":3,"user_id":14598689,"display_name":"Mo R"},"score":0,"creation_date":1607068064,"post_id":65139653,"comment_id":115161102,"body_markdown":"arraylist1=[8,5,6,1,11] (the first 3 represent EIGHT,FIVE,SIX and the 4th and 5th element is from the ACE card)","body":"arraylist1=[8,5,6,1,11] (the first 3 represent EIGHT,FIVE,SIX and the 4th and 5th element is from the ACE card)"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1607068066,"post_id":65139653,"comment_id":115161103,"body_markdown":"Also, shouldn&#39;t you *always* increment `max_adding_1` and `max_adding_11` and only increment `max_excluding_Ace` when the current card is not an ace?","body":"Also, shouldn&#39;t you <i>always</i> increment <code>max_adding_1</code> and <code>max_adding_11</code> and only increment <code>max_excluding_Ace</code> when the current card is not an ace?"},{"owner":{"account_id":19923405,"reputation":3,"user_id":14598689,"display_name":"Mo R"},"score":0,"creation_date":1607068183,"post_id":65139653,"comment_id":115161142,"body_markdown":"This method is inside of a class, and i return the final_listarray to get a listarray containing either 1 or 2 elements. It contains 1 if there is no ace, and 2 if there is an ace","body":"This method is inside of a class, and i return the final_listarray to get a listarray containing either 1 or 2 elements. It contains 1 if there is no ace, and 2 if there is an ace"},{"owner":{"account_id":19923405,"reputation":3,"user_id":14598689,"display_name":"Mo R"},"score":0,"creation_date":1607068329,"post_id":65139653,"comment_id":115161195,"body_markdown":"the reason i added max_adding_1 and max_adding_11, is because I need to use them in the final_listarray as max_adding_1 would be the first element, and max_adding_11 is the second element","body":"the reason i added max_adding_1 and max_adding_11, is because I need to use them in the final_listarray as max_adding_1 would be the first element, and max_adding_11 is the second element"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1607068475,"post_id":65139653,"comment_id":115161245,"body_markdown":"@MoR so given `arraylist1=[8,5,6,1,11]` (bad example IHMO) the output should be `[1, 11]`, given, let&#39;s say `arraylist1=[8,1,5,6,1,11]` it should be `[2,11]` and given `arraylist1=[8,5,6]` it should be `[19]`, correct?","body":"@MoR so given <code>arraylist1=[8,5,6,1,11]</code> (bad example IHMO) the output should be <code>[1, 11]</code>, given, let&#39;s say <code>arraylist1=[8,1,5,6,1,11]</code> it should be <code>[2,11]</code> and given <code>arraylist1=[8,5,6]</code> it should be <code>[19]</code>, correct?"}],"answers":[{"tags":[],"owner":{"account_id":55989,"reputation":17809,"user_id":167745,"accept_rate":76,"display_name":"Stewart"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687518476,"creation_date":1687518476,"answer_id":76539512,"question_id":65139653,"body_markdown":"It&#39;s not clear that `arraylist1` is a list of integers.\r\nPresumably the value of each card in the hand.\r\n\r\nWhen you check `arraylist1.get(i)==1` (or `==11`) this implies that the value of an Ace is already given in the original hand.\r\n\r\nBut it sounds like what you want is two results: one for if Ace is 1, and one for if Ace is 11.\r\n\r\n(Also, if Ace is 11, what is a Jack, Queen, King ?)\r\n\r\nI suggest to make the meanings, semantics and intentions clear with a `Card` enum class:\r\n\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    \r\n    public enum Card {\r\n        ACE(1),\r\n        TWO(2),\r\n        THREE(3),\r\n        FOUR(4),\r\n        FIVE(5),\r\n        SIX(6),\r\n        SEVEN(7),\r\n        EIGHT(8),\r\n        NINE(9),\r\n        TEN(10),\r\n        JACK(11),\r\n        QUEEN(11),\r\n        KING(11);\r\n    \r\n        private final int value;\r\n    \r\n        private Card(int value) {\r\n            this.value = value;\r\n        }\r\n    \r\n        public static int valueOfHand(Iterable&lt;Card&gt; hand, boolean aceIs11) {\r\n            int total = 0;\r\n            for( Card card : hand) {\r\n                if( aceIs11 &amp;&amp; card == ACE ) {\r\n                    total += 11;\r\n                } else {\r\n                    total += card.value;\r\n                }\r\n            }\r\n            return total;\r\n        }\r\n    \r\n        public static Integer[] valuesOfHand(Iterable&lt;Card&gt; hand) {\r\n            int totalAce1 = 0;\r\n            int totalAce11 = 0;\r\n            for( Card card : hand) {\r\n                if( card == ACE ) {\r\n                    totalAce1 += 1;\r\n                    totalAce11 += 11;\r\n                } else {\r\n                    totalAce1 += card.value;\r\n                    totalAce11 += card.value;\r\n                }\r\n            }\r\n            return new Integer[] {totalAce1, totalAce11};\r\n        }\r\n    \r\n        public static void main(String... args) {\r\n            List&lt;Card&gt; hand = Arrays.asList( TWO, ACE, KING, ACE );\r\n            System.out.println( valueOfHand( hand, false)); // 15\r\n            System.out.println( valueOfHand( hand, true)); // 35\r\n            System.out.println( Arrays.asList(valuesOfHand( hand ))); // 15, 35\r\n        }\r\n    }\r\n    \r\n","title":"Compute a full hand of cards","body":"<p>It's not clear that <code>arraylist1</code> is a list of integers.\nPresumably the value of each card in the hand.</p>\n<p>When you check <code>arraylist1.get(i)==1</code> (or <code>==11</code>) this implies that the value of an Ace is already given in the original hand.</p>\n<p>But it sounds like what you want is two results: one for if Ace is 1, and one for if Ace is 11.</p>\n<p>(Also, if Ace is 11, what is a Jack, Queen, King ?)</p>\n<p>I suggest to make the meanings, semantics and intentions clear with a <code>Card</code> enum class:</p>\n<pre><code>import java.util.Arrays;\nimport java.util.List;\n\npublic enum Card {\n    ACE(1),\n    TWO(2),\n    THREE(3),\n    FOUR(4),\n    FIVE(5),\n    SIX(6),\n    SEVEN(7),\n    EIGHT(8),\n    NINE(9),\n    TEN(10),\n    JACK(11),\n    QUEEN(11),\n    KING(11);\n\n    private final int value;\n\n    private Card(int value) {\n        this.value = value;\n    }\n\n    public static int valueOfHand(Iterable&lt;Card&gt; hand, boolean aceIs11) {\n        int total = 0;\n        for( Card card : hand) {\n            if( aceIs11 &amp;&amp; card == ACE ) {\n                total += 11;\n            } else {\n                total += card.value;\n            }\n        }\n        return total;\n    }\n\n    public static Integer[] valuesOfHand(Iterable&lt;Card&gt; hand) {\n        int totalAce1 = 0;\n        int totalAce11 = 0;\n        for( Card card : hand) {\n            if( card == ACE ) {\n                totalAce1 += 1;\n                totalAce11 += 11;\n            } else {\n                totalAce1 += card.value;\n                totalAce11 += card.value;\n            }\n        }\n        return new Integer[] {totalAce1, totalAce11};\n    }\n\n    public static void main(String... args) {\n        List&lt;Card&gt; hand = Arrays.asList( TWO, ACE, KING, ACE );\n        System.out.println( valueOfHand( hand, false)); // 15\n        System.out.println( valueOfHand( hand, true)); // 35\n        System.out.println( Arrays.asList(valuesOfHand( hand ))); // 15, 35\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":19923405,"reputation":3,"user_id":14598689,"display_name":"Mo R"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1687518476,"creation_date":1607067605,"question_id":65139653,"body_markdown":"I am trying to compute a total value for a hand of cards. If there is no Ace, there will be 1 element in the `final_listarray`. If there is an Ace, there would be 2 elements to represent total possible value of hand of cards (as Ace can be 1 or 11).\r\n\r\nFor some reason, my array just outputs [0,0], and is not what I want.\r\n\r\n(`arraylist1` is just my array holding the values of each card. In this case an Ace would hold both 1 and 11, any other value would hold 1 element)\r\n\r\n    int max_excluding_Ace=0;\r\n    int max_adding_1=max_excluding_Ace;\r\n    int max_adding_11=max_excluding_Ace;\r\n\r\n    for (int i = 0; i &lt; arraylist1.size(); i++) {\r\n\t\t\t\r\n        //Add values without aces\r\n        if ((arraylist1.get(i)!=1) &amp;&amp; (arraylist1.get(i)!=11)) {\r\n            max_excluding_Ace += arraylist1.get(i);\r\n        }\r\n        //ace\t\t\t\t\r\n        //Add values with different combinations of the ace\r\n        else if ((arraylist1.get(i)==1)) {\r\n            max_adding_1 +=1;\r\n        }\r\n        else if ((arraylist1.get(i)==11)) {\r\n            max_adding_11 +=11;\r\n        }\r\n    }\r\n    if (max_adding_1 != max_excluding_Ace) {\r\n        final_listarray.add(max_adding_1);\r\n        final_listarray.add(max_adding_11);\r\n\r\n    }\r\n    else {\r\n        final_listarray.add(max_excluding_Ace);\r\n    }\r\n    return final_listarray;","title":"Compute a full hand of cards","body":"<p>I am trying to compute a total value for a hand of cards. If there is no Ace, there will be 1 element in the <code>final_listarray</code>. If there is an Ace, there would be 2 elements to represent total possible value of hand of cards (as Ace can be 1 or 11).</p>\n<p>For some reason, my array just outputs [0,0], and is not what I want.</p>\n<p>(<code>arraylist1</code> is just my array holding the values of each card. In this case an Ace would hold both 1 and 11, any other value would hold 1 element)</p>\n<pre><code>int max_excluding_Ace=0;\nint max_adding_1=max_excluding_Ace;\nint max_adding_11=max_excluding_Ace;\n\nfor (int i = 0; i &lt; arraylist1.size(); i++) {\n        \n    //Add values without aces\n    if ((arraylist1.get(i)!=1) &amp;&amp; (arraylist1.get(i)!=11)) {\n        max_excluding_Ace += arraylist1.get(i);\n    }\n    //ace               \n    //Add values with different combinations of the ace\n    else if ((arraylist1.get(i)==1)) {\n        max_adding_1 +=1;\n    }\n    else if ((arraylist1.get(i)==11)) {\n        max_adding_11 +=11;\n    }\n}\nif (max_adding_1 != max_excluding_Ace) {\n    final_listarray.add(max_adding_1);\n    final_listarray.add(max_adding_11);\n\n}\nelse {\n    final_listarray.add(max_excluding_Ace);\n}\nreturn final_listarray;\n</code></pre>\n"},{"tags":["java","android","eclipse"],"comments":[{"owner":{"account_id":2935174,"reputation":151,"user_id":2514286,"display_name":"Lucas"},"score":1,"creation_date":1424624181,"post_id":28660468,"comment_id":45616504,"body_markdown":"Try the Esc key in your keyboard and see if it works.","body":"Try the Esc key in your keyboard and see if it works."},{"owner":{"account_id":1136549,"reputation":18926,"user_id":1197249,"accept_rate":39,"display_name":"Jim"},"score":0,"creation_date":1424624541,"post_id":28660468,"comment_id":45616623,"body_markdown":"@LucasT.:Yes! with ESC it went back!","body":"@LucasT.:Yes! with ESC it went back!"},{"owner":{"account_id":189621,"reputation":39951,"user_id":429063,"display_name":"Chris Stratton"},"score":1,"creation_date":1424625919,"post_id":28660468,"comment_id":45617034,"body_markdown":"This is a perfectly appropriate development tool question, and by no means a one-time issue unique to the poster.","body":"This is a perfectly appropriate development tool question, and by no means a one-time issue unique to the poster."}],"answers":[{"tags":[],"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1424625589,"creation_date":1424625589,"answer_id":28660775,"question_id":28660468,"body_markdown":"Your emulator image is emulating a device with a hardware BACK button, and so it does not show up in a navigation bar in the device itself. As was noted in the comments, &lt;kbd&gt;Esc&lt;/kbd&gt; on your desktop OS will map to BACK in the emulator.\r\n\r\nIf you want to change your emulator to not have hardware BACK buttons, in `~/.android/avd/.../config.ini` (where `...` is the name of the AVD), set `hw.mainKeys=no`.","title":"No back button in virtual device","body":"<p>Your emulator image is emulating a device with a hardware BACK button, and so it does not show up in a navigation bar in the device itself. As was noted in the comments, <kbd>Esc</kbd> on your desktop OS will map to BACK in the emulator.</p>\n\n<p>If you want to change your emulator to not have hardware BACK buttons, in <code>~/.android/avd/.../config.ini</code> (where <code>...</code> is the name of the AVD), set <code>hw.mainKeys=no</code>.</p>\n"},{"tags":[],"owner":{"account_id":3567671,"reputation":471,"user_id":2978795,"display_name":"Mohammad tanvirul islam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1424625646,"creation_date":1424625646,"answer_id":28660794,"question_id":28660468,"body_markdown":"you can try by edit your AVD by checking &quot;Display a skin with hardware control&quot;. after restart your avd back button should show in your virtual device.\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/8nJjZ.png","title":"No back button in virtual device","body":"<p>you can try by edit your AVD by checking \"Display a skin with hardware control\". after restart your avd back button should show in your virtual device.\n<img src=\"https://i.stack.imgur.com/8nJjZ.png\" alt=\"enter image description here\"></p>\n"},{"tags":[],"owner":{"account_id":10970576,"reputation":519,"user_id":8061007,"display_name":"Sher Sanginov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685248140,"creation_date":1685248140,"answer_id":76349936,"question_id":28660468,"body_markdown":"On Android Studio, you need to set skin on emulator. \r\nHere&#39;s how you do it. \r\n\r\n 1. Click on Device Manager -&gt; Create Virtual Device\r\n 2. Choose a device (e.g Pixel 3) and look at right side and click on &quot;Clone Deice&quot;.\r\n 3. Scroll down and choose skin. Default is no skin. \r\n \r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QqyYV.png","title":"No back button in virtual device","body":"<p>On Android Studio, you need to set skin on emulator.\nHere's how you do it.</p>\n<ol>\n<li>Click on Device Manager -&gt; Create Virtual Device</li>\n<li>Choose a device (e.g Pixel 3) and look at right side and click on &quot;Clone Deice&quot;.</li>\n<li>Scroll down and choose skin. Default is no skin.</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/QqyYV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QqyYV.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":14353273,"reputation":1177,"user_id":12001877,"display_name":"jpmc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687518445,"creation_date":1687518445,"answer_id":76539507,"question_id":28660468,"body_markdown":"You can use this from the command line and it will simulate a back button push in your emulator.\r\n```\r\nadb shell input keyevent 4","title":"No back button in virtual device","body":"<p>You can use this from the command line and it will simulate a back button push in your emulator.</p>\n<pre><code>adb shell input keyevent 4\n</code></pre>\n"}],"owner":{"account_id":1136549,"reputation":18926,"user_id":1197249,"accept_rate":39,"display_name":"Jim"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2422,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":4,"score":2,"last_activity_date":1687518445,"creation_date":1424623708,"question_id":28660468,"body_markdown":"I am starting into Android I managed to start a simple app I made in a virtual device. Problem: There is no back button in the device.\r\nI am using eclipse ADT and the device says on top: emulator64-arm. Not sure what other information are needed to provide to help me","title":"No back button in virtual device","body":"<p>I am starting into Android I managed to start a simple app I made in a virtual device. Problem: There is no back button in the device.\nI am using eclipse ADT and the device says on top: emulator64-arm. Not sure what other information are needed to provide to help me</p>\n"},{"tags":["java","java-8","java-stream"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":5,"creation_date":1516217451,"post_id":48307102,"comment_id":83602643,"body_markdown":"@FedericoPeraltaSchaffner even a stream constructed from an `Iterator` supports parallelism, though quiet limited.","body":"@FedericoPeraltaSchaffner even a stream constructed from an <code>Iterator</code> supports parallelism, though quiet limited."},{"owner":{"account_id":9103081,"reputation":374,"user_id":6774555,"display_name":"apophis"},"score":5,"creation_date":1516217664,"post_id":48307102,"comment_id":83602763,"body_markdown":"@Federico Peralta Schaffner That&#39;s not true. Have a look at the implementation of `trySplit` in `java.util.Spliterators.IteratorSpliterator`.","body":"@Federico Peralta Schaffner That&#39;s not true. Have a look at the implementation of <code>trySplit</code> in <code>java.util.Spliterators.IteratorSpliterator</code>."}],"answers":[{"tags":[],"owner":{"account_id":4860165,"reputation":27613,"user_id":3920048,"display_name":"Misha"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1516261352,"creation_date":1516216955,"answer_id":48308511,"question_id":48307102,"body_markdown":"The current implementation will try to parallelize a stream produced form an iterator by buffering up the values and dispatching them to several threads but it only kicks in if the stream is long enough.  Increase your list to 10000 elements and you should see parallelism.\r\n\r\nWith a large list, it might be easier to see how elements distributed by thread if you collect into a map grouped by thread.  Replace your `.forEach` with `.collect(Collectors.groupingBy(x -&gt; Thread.currentThread().getName(), Collectors.counting()))`","title":"Parallelism with Streams created from Iterators","body":"<p>The current implementation will try to parallelize a stream produced form an iterator by buffering up the values and dispatching them to several threads but it only kicks in if the stream is long enough.  Increase your list to 10000 elements and you should see parallelism.</p>\n\n<p>With a large list, it might be easier to see how elements distributed by thread if you collect into a map grouped by thread.  Replace your <code>.forEach</code> with <code>.collect(Collectors.groupingBy(x -&gt; Thread.currentThread().getName(), Collectors.counting()))</code></p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1516217287,"creation_date":1516217287,"answer_id":48308595,"question_id":48307102,"body_markdown":"There is no guaranty that parallel processing prints the counter in non-sequential order. Further, since you’re updating a variable without synchronization, it’s possible to miss updates made by other threads, so the results may be entirely inconsistent.\r\n\r\nBesides that, an `Iterator` has to be polled sequentially, so to get at least some gain from parallel processing, elements have to be buffered, but without a known size, there is no good estimate on how many elements to buffer. The default strategy uses more than thousand elements and does not split the work well.\r\n\r\nSo if you use more than thousand elements you might notice more parallel activity. Alternatively, you may specify a size using `StreamSupport.stream(Spliterators.spliterator(iter, lstr.size(), 0), true)` to construct the stream. Then, the internally used buffering will be adapted.\r\n\r\nStill, the `List`’s stream will have a more efficient parallel processing, as it not only knows its size but supports splitting the workload utilizing the random access nature of the underlying data structure.\r\n","title":"Parallelism with Streams created from Iterators","body":"<p>There is no guaranty that parallel processing prints the counter in non-sequential order. Further, since you’re updating a variable without synchronization, it’s possible to miss updates made by other threads, so the results may be entirely inconsistent.</p>\n\n<p>Besides that, an <code>Iterator</code> has to be polled sequentially, so to get at least some gain from parallel processing, elements have to be buffered, but without a known size, there is no good estimate on how many elements to buffer. The default strategy uses more than thousand elements and does not split the work well.</p>\n\n<p>So if you use more than thousand elements you might notice more parallel activity. Alternatively, you may specify a size using <code>StreamSupport.stream(Spliterators.spliterator(iter, lstr.size(), 0), true)</code> to construct the stream. Then, the internally used buffering will be adapted.</p>\n\n<p>Still, the <code>List</code>’s stream will have a more efficient parallel processing, as it not only knows its size but supports splitting the workload utilizing the random access nature of the underlying data structure.</p>\n"},{"tags":[],"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1650616410,"creation_date":1650616410,"answer_id":71965719,"question_id":48307102,"body_markdown":"There was a flaw in `Spliterators.spliteratorUnknownSize()` implementation. I fixed it in Java 19, see [JDK-8280915](https://bugs.openjdk.java.net/browse/JDK-8280915). Since 19-ea+19-1283 early access build the problem is not reproduced anymore, `Spliterators.spliteratorUnknownSize` is parallelized correctly. Here&#39;s the output on my machine:\r\n\r\n```\r\nIterator Stream: \r\n0 0 0 1 0 0 6 7 8 0 0 0 0 12 0 15 0 17 18 10 20 21 22 23 11 0 5 27 28 29 30 0 31 32 3 35 36 37 38 39 40 41 42 4 0 2 45 45 43 34 33 26 25 24 54 19 56 16 0 59 59 0 62 14 13 13 65 64 63 61 60 57 71 73 73 75 76 55 54 79 52 51 50 49 48 47 46 85 84 80 74 70 70 68 67 66 94 92 88 98 \r\n```","title":"Parallelism with Streams created from Iterators","body":"<p>There was a flaw in <code>Spliterators.spliteratorUnknownSize()</code> implementation. I fixed it in Java 19, see <a href=\"https://bugs.openjdk.java.net/browse/JDK-8280915\" rel=\"noreferrer\">JDK-8280915</a>. Since 19-ea+19-1283 early access build the problem is not reproduced anymore, <code>Spliterators.spliteratorUnknownSize</code> is parallelized correctly. Here's the output on my machine:</p>\n<pre><code>Iterator Stream: \n0 0 0 1 0 0 6 7 8 0 0 0 0 12 0 15 0 17 18 10 20 21 22 23 11 0 5 27 28 29 30 0 31 32 3 35 36 37 38 39 40 41 42 4 0 2 45 45 43 34 33 26 25 24 54 19 56 16 0 59 59 0 62 14 13 13 65 64 63 61 60 57 71 73 73 75 76 55 54 79 52 51 50 49 48 47 46 85 84 80 74 70 70 68 67 66 94 92 88 98 \n</code></pre>\n"},{"tags":[],"owner":{"account_id":201558,"reputation":20189,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687518417,"creation_date":1671195094,"answer_id":74824712,"question_id":48307102,"body_markdown":"Here is custom implementation with desired behavior.  \r\n\r\nFork each element (unlike `Spliterators.spliteratorUnknownSize`) progressively (there is only single unprocessed `ForkJoinTask` in the work queue when worker pool is saturated).  \r\nThere is only single thread which `trySplit` at any point of time hence there is no atomicy implication for `Iterator.hasNext` and `Iterator.next` and concurrent thread safetiness of the iterator implementation.  \r\nThere should be at least one element on the beginning.\r\n\r\n**Usage**\r\n\r\n    public static void main(String[] args) {\r\n        stream(Spliterators.spliteratorUnknownSize(IntStream.range(0, 10).iterator(), Spliterator.CONCURRENT), true).forEach(SpliteratorTest::process);\r\n        out.println(&quot;---&quot;);\r\n        stream(new ForkNextSpliterator&lt;&gt;(IntStream.range(0, 10).iterator()), true).forEach(SpliteratorTest::process);\r\n    }\r\n    \r\n    private static void process(Integer i) {\r\n        LockSupport.parkNanos(TimeUnit.MILLISECONDS.toNanos((int) (Math.random() * 100)));\r\n        out.println(i + &quot;\\t&quot; + currentThread().getName());\r\n    }\r\n\r\n**Output**\r\n\r\n\t0\tForkJoinPool.commonPool-worker-9\r\n\t1\tForkJoinPool.commonPool-worker-9\r\n\t2\tForkJoinPool.commonPool-worker-9\r\n\t3\tForkJoinPool.commonPool-worker-9\r\n\t4\tForkJoinPool.commonPool-worker-9\r\n\t5\tForkJoinPool.commonPool-worker-9\r\n\t6\tForkJoinPool.commonPool-worker-9\r\n\t7\tForkJoinPool.commonPool-worker-9\r\n\t8\tForkJoinPool.commonPool-worker-9\r\n\t9\tForkJoinPool.commonPool-worker-9\r\n\t---\r\n\t5\tForkJoinPool.commonPool-worker-13\r\n\t4\tForkJoinPool.commonPool-worker-4\r\n\t0\tmain\r\n\t2\tForkJoinPool.commonPool-worker-2\r\n\t7\tForkJoinPool.commonPool-worker-15\r\n\t6\tForkJoinPool.commonPool-worker-6\r\n\t1\tForkJoinPool.commonPool-worker-9\r\n\t3\tForkJoinPool.commonPool-worker-11\r\n\t9\tForkJoinPool.commonPool-worker-1\r\n\t8\tForkJoinPool.commonPool-worker-8\r\n\r\n**Implementation**\r\n\r\n    import static java.lang.Long.MAX_VALUE;\r\n    import static java.util.stream.Stream.empty;\r\n    import static java.util.stream.StreamSupport.stream;\r\n\r\n    public class ForkNextSpliterator&lt;T&gt; implements Spliterator&lt;T&gt; {\r\n    \r\n        public static &lt;T&gt; Stream&lt;T&gt; parallelStream(Iterable&lt;T&gt; iterable) {\r\n            Iterator&lt;T&gt; iterator = iterable.iterator();\r\n            return iterator.hasNext() ? stream(new ForkNextSpliterator&lt;&gt;(iterator), true) : empty();\r\n        }\r\n    \r\n        private final Iterator&lt;T&gt; iter;\r\n        private final T value;\r\n        private boolean split;\r\n    \r\n        public ForkNextSpliterator(Iterator&lt;T&gt; iter) {\r\n            this.value = iter.next();\r\n            this.iter = iter;\r\n        }\r\n    \r\n        @Override\r\n        public boolean tryAdvance(Consumer&lt;? super T&gt; action) {\r\n            action.accept(value);\r\n            return false;\r\n        }\r\n    \r\n        @Override\r\n        public Spliterator&lt;T&gt; trySplit() {\r\n            return (split ^= true) &amp;&amp; iter.hasNext()\r\n                    ? new ForkNextSpliterator&lt;&gt;(iter)\r\n                    : null;\r\n        }\r\n    \r\n        @Override\r\n        public long estimateSize() {\r\n            return MAX_VALUE;\r\n        }\r\n    \r\n        @Override\r\n        public int characteristics() {\r\n            return CONCURRENT;\r\n        }\r\n    }","title":"Parallelism with Streams created from Iterators","body":"<p>Here is custom implementation with desired behavior.</p>\n<p>Fork each element (unlike <code>Spliterators.spliteratorUnknownSize</code>) progressively (there is only single unprocessed <code>ForkJoinTask</code> in the work queue when worker pool is saturated).<br />\nThere is only single thread which <code>trySplit</code> at any point of time hence there is no atomicy implication for <code>Iterator.hasNext</code> and <code>Iterator.next</code> and concurrent thread safetiness of the iterator implementation.<br />\nThere should be at least one element on the beginning.</p>\n<p><strong>Usage</strong></p>\n<pre><code>public static void main(String[] args) {\n    stream(Spliterators.spliteratorUnknownSize(IntStream.range(0, 10).iterator(), Spliterator.CONCURRENT), true).forEach(SpliteratorTest::process);\n    out.println(&quot;---&quot;);\n    stream(new ForkNextSpliterator&lt;&gt;(IntStream.range(0, 10).iterator()), true).forEach(SpliteratorTest::process);\n}\n\nprivate static void process(Integer i) {\n    LockSupport.parkNanos(TimeUnit.MILLISECONDS.toNanos((int) (Math.random() * 100)));\n    out.println(i + &quot;\\t&quot; + currentThread().getName());\n}\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>0   ForkJoinPool.commonPool-worker-9\n1   ForkJoinPool.commonPool-worker-9\n2   ForkJoinPool.commonPool-worker-9\n3   ForkJoinPool.commonPool-worker-9\n4   ForkJoinPool.commonPool-worker-9\n5   ForkJoinPool.commonPool-worker-9\n6   ForkJoinPool.commonPool-worker-9\n7   ForkJoinPool.commonPool-worker-9\n8   ForkJoinPool.commonPool-worker-9\n9   ForkJoinPool.commonPool-worker-9\n---\n5   ForkJoinPool.commonPool-worker-13\n4   ForkJoinPool.commonPool-worker-4\n0   main\n2   ForkJoinPool.commonPool-worker-2\n7   ForkJoinPool.commonPool-worker-15\n6   ForkJoinPool.commonPool-worker-6\n1   ForkJoinPool.commonPool-worker-9\n3   ForkJoinPool.commonPool-worker-11\n9   ForkJoinPool.commonPool-worker-1\n8   ForkJoinPool.commonPool-worker-8\n</code></pre>\n<p><strong>Implementation</strong></p>\n<pre><code>import static java.lang.Long.MAX_VALUE;\nimport static java.util.stream.Stream.empty;\nimport static java.util.stream.StreamSupport.stream;\n\npublic class ForkNextSpliterator&lt;T&gt; implements Spliterator&lt;T&gt; {\n\n    public static &lt;T&gt; Stream&lt;T&gt; parallelStream(Iterable&lt;T&gt; iterable) {\n        Iterator&lt;T&gt; iterator = iterable.iterator();\n        return iterator.hasNext() ? stream(new ForkNextSpliterator&lt;&gt;(iterator), true) : empty();\n    }\n\n    private final Iterator&lt;T&gt; iter;\n    private final T value;\n    private boolean split;\n\n    public ForkNextSpliterator(Iterator&lt;T&gt; iter) {\n        this.value = iter.next();\n        this.iter = iter;\n    }\n\n    @Override\n    public boolean tryAdvance(Consumer&lt;? super T&gt; action) {\n        action.accept(value);\n        return false;\n    }\n\n    @Override\n    public Spliterator&lt;T&gt; trySplit() {\n        return (split ^= true) &amp;&amp; iter.hasNext()\n                ? new ForkNextSpliterator&lt;&gt;(iter)\n                : null;\n    }\n\n    @Override\n    public long estimateSize() {\n        return MAX_VALUE;\n    }\n\n    @Override\n    public int characteristics() {\n        return CONCURRENT;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":12705070,"reputation":91,"user_id":9230627,"display_name":"Johnathan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4830,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":4,"score":9,"last_activity_date":1687518417,"creation_date":1516211324,"question_id":48307102,"body_markdown":"Experimenting with streams I ran into the following behavior which I don&#39;t quite understand. I created a parallel stream from an iterator and I noticed that it did not seem to be exhibiting parallelism. In the below example I&#39;ve printed a counter to the console for two parallel streams, one created from an iterator and the other from a list. The stream created from the list exhibited the behavior I expected which was to print the counter in non-sequential order but the stream created from the iterator printed the counter in sequential order. Am I creating the parallel stream from an iterator incorrectly?\r\n\r\n    \tprivate static int counter = 0;\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tList&lt;Integer&gt; lstr = IntStream.rangeClosed(1, 100).boxed().collect(Collectors.toList());\r\n\t\tIterator&lt;Integer&gt; iter = lstr.iterator();\r\n\t\t\r\n\t\tSystem.out.println(&quot;Iterator Stream: &quot;);\r\n\t\tStreamSupport.stream(Spliterators.spliteratorUnknownSize(iter, Spliterator.IMMUTABLE | Spliterator.CONCURRENT), true).forEach(i -&gt; {\r\n\t\t\tSystem.out.print(counter + &quot; &quot;);\r\n\t\t\tcounter++;\r\n\t\t});\r\n\t\t\r\n\t\tcounter = 0;\r\n\t\tSystem.out.println(&quot;\\nList Stream: &quot;);\r\n\t\tlstr.parallelStream().forEach(i -&gt; {\r\n\t\t\tSystem.out.print(counter + &quot; &quot;);\r\n\t\t\tcounter++;\r\n\t\t});\r\n\r\n\t}\r\n\r\n","title":"Parallelism with Streams created from Iterators","body":"<p>Experimenting with streams I ran into the following behavior which I don't quite understand. I created a parallel stream from an iterator and I noticed that it did not seem to be exhibiting parallelism. In the below example I've printed a counter to the console for two parallel streams, one created from an iterator and the other from a list. The stream created from the list exhibited the behavior I expected which was to print the counter in non-sequential order but the stream created from the iterator printed the counter in sequential order. Am I creating the parallel stream from an iterator incorrectly?</p>\n\n<pre><code>    private static int counter = 0;\n\npublic static void main(String[] args) {\n    List&lt;Integer&gt; lstr = IntStream.rangeClosed(1, 100).boxed().collect(Collectors.toList());\n    Iterator&lt;Integer&gt; iter = lstr.iterator();\n\n    System.out.println(\"Iterator Stream: \");\n    StreamSupport.stream(Spliterators.spliteratorUnknownSize(iter, Spliterator.IMMUTABLE | Spliterator.CONCURRENT), true).forEach(i -&gt; {\n        System.out.print(counter + \" \");\n        counter++;\n    });\n\n    counter = 0;\n    System.out.println(\"\\nList Stream: \");\n    lstr.parallelStream().forEach(i -&gt; {\n        System.out.print(counter + \" \");\n        counter++;\n    });\n\n}\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9641,"page":351,"page_size":100}
