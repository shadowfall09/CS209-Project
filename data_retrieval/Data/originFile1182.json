{"items":[{"tags":["java","maven","kotlin","java-module"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1657926481,"post_id":73000124,"comment_id":128933861,"body_markdown":"Mind adding the full stacktrace? (A module always reads itself, and all its packages are implicitly exported to itself - so it seems an other module tries to access it. But which one?)","body":"Mind adding the full stacktrace? (A module always reads itself, and all its packages are implicitly exported to itself - so it seems an other module tries to access it. But which one?)"},{"owner":{"account_id":4688180,"reputation":2484,"user_id":3795043,"accept_rate":90,"display_name":"findusl"},"score":0,"creation_date":1657929018,"post_id":73000124,"comment_id":128934174,"body_markdown":"@JohannesKuhn I added the -e flag to the maven command and copied the output to the question. I hope that is the information you are looking for?","body":"@JohannesKuhn I added the -e flag to the maven command and copied the output to the question. I hope that is the information you are looking for?"},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1657932113,"post_id":73000124,"comment_id":128934487,"body_markdown":"Ok, happens during compilation. I believe this is a bug in the kotlin compiler - as a module does export all its packages to itself.","body":"Ok, happens during compilation. I believe this is a bug in the kotlin compiler - as a module does export all its packages to itself."}],"owner":{"account_id":4688180,"reputation":2484,"user_id":3795043,"accept_rate":90,"display_name":"findusl"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":191,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1657979022,"creation_date":1657923828,"question_id":73000124,"body_markdown":"The whole project can be viewed [here][1].\r\n\r\nI have the following minimal demo project:\r\n\r\n    package com.example.demo\r\n    \r\n    import io.swagger.annotations.Api\r\n    \r\n    @Api(tags = [API_NAME])\r\n    class DemoClass\r\n    \r\n    const val API_NAME = &quot;demo&quot;\r\n    \r\n    fun main() = println(&quot;Hello World!&quot;)\r\n\r\nWorks perfectly fine as is. However now I want to add the Java 9 module system. I add a `module-info.java` under src/main/kotlin with this content:\r\n\r\n    module com.example.demo {\r\n        requires swagger.annotations;\r\n        requires kotlin.stdlib;\r\n    }\r\n\r\nThis leads to the following compiler error (you can find the complete mvn output at the end of the question):\r\n\r\n&gt; E:\\demo\\src\\main\\kotlin\\com\\example\\demo\\DemoClass.kt:[5,18] Symbol is declared in module &#39;com.example.demo&#39; which does not export package &#39;com.example.demo&#39;\r\n\r\nThe problem is with the API_NAME constant used in the @Api annotation. It works if I export the `com.example.demo` package in the `module-info.java`, but I don&#39;t want to do that. What else can I do?\r\n\r\nI use Maven as a build system and the pom.xml is standard. It is a bit big, mostly due to the kotlin plugin.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n        xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;parent&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.1&lt;/version&gt;\r\n            &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n        &lt;/parent&gt;\r\n        &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n        &lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n        &lt;name&gt;demo&lt;/name&gt;\r\n        &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;java.version&gt;11&lt;/java.version&gt;\r\n            &lt;kotlin.version&gt;1.7.10&lt;/kotlin.version&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.swagger&lt;/groupId&gt;\r\n                &lt;artifactId&gt;swagger-annotations&lt;/artifactId&gt;\r\n                &lt;version&gt;1.6.6&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\r\n                &lt;artifactId&gt;kotlin-stdlib-jdk8&lt;/artifactId&gt;\r\n                &lt;version&gt;${kotlin.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\r\n                &lt;artifactId&gt;kotlin-test&lt;/artifactId&gt;\r\n                &lt;version&gt;${kotlin.version}&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;sourceDirectory&gt;src/main/kotlin&lt;/sourceDirectory&gt;\r\n            &lt;testSourceDirectory&gt;src/test/kotlin&lt;/testSourceDirectory&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;${kotlin.version}&lt;/version&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;compile&lt;/id&gt;\r\n                            &lt;phase&gt;compile&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;compile&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;test-compile&lt;/id&gt;\r\n                            &lt;phase&gt;test-compile&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;test-compile&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;args&gt;\r\n                            &lt;arg&gt;-Xjsr305=strict&lt;/arg&gt;\r\n                        &lt;/args&gt;\r\n                        &lt;compilerPlugins&gt;\r\n                            &lt;plugin&gt;spring&lt;/plugin&gt;\r\n                        &lt;/compilerPlugins&gt;\r\n                        &lt;jvmTarget&gt;1.8&lt;/jvmTarget&gt;\r\n                    &lt;/configuration&gt;\r\n                    &lt;dependencies&gt;\r\n                        &lt;dependency&gt;\r\n                            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;kotlin-maven-allopen&lt;/artifactId&gt;\r\n                            &lt;version&gt;${kotlin.version}&lt;/version&gt;\r\n                        &lt;/dependency&gt;\r\n                    &lt;/dependencies&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\nThis is the complete output of `mvn clean install -e`:\r\n\r\n    [INFO] Error stacktraces are turned on.\r\n    [INFO] Scanning for projects...\r\n    [INFO]\r\n    [INFO] --------------------------&lt; com.example:demo &gt;--------------------------\r\n    [INFO] Building demo 0.0.1-SNAPSHOT\r\n    [INFO] --------------------------------[ jar ]---------------------------------\r\n    [INFO]\r\n    [INFO] --- maven-clean-plugin:3.2.0:clean (default-clean) @ demo ---\r\n    [INFO] Deleting E:\\demo\\target\r\n    [INFO]\r\n    [INFO] --- maven-resources-plugin:3.2.0:resources (default-resources) @ demo ---\r\n    [INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.\r\n    [INFO] Using &#39;UTF-8&#39; encoding to copy filtered properties files.\r\n    [INFO] Copying 1 resource\r\n    [INFO] Copying 0 resource\r\n    [INFO]\r\n    [INFO] --- maven-compiler-plugin:3.10.1:compile (default-compile) @ demo ---\r\n    [INFO] Required filename-based automodules detected: [swagger-annotations-1.6.6.jar]. Please don&#39;t publish this project to a public artifact repository!\r\n    [INFO] Changes detected - recompiling the module!\r\n    [INFO] Compiling 1 source file to E:\\demo\\target\\classes\r\n    [INFO]\r\n    [INFO] --- kotlin-maven-plugin:1.7.10:compile (compile) @ demo ---\r\n    [INFO] Applied plugin: &#39;spring&#39;\r\n    [ERROR] E:\\demo\\src\\main\\kotlin\\com\\example\\demo\\DemoClass.kt: (5, 18) Symbol is declared in module &#39;com.example.demo&#39; which does not export package &#39;com.example.demo&#39;\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time:  3.825 s\r\n    [INFO] Finished at: 2022-07-16T01:49:05+02:00\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal org.jetbrains.kotlin:kotlin-maven-plugin:1.7.10:compile (compile) on project demo: Compilation failure\r\n    [ERROR] E:\\demo\\src\\main\\kotlin\\com\\example\\demo\\DemoClass.kt:[5,18] Symbol is declared in module &#39;com.example.demo&#39; which does not export package &#39;com.example.demo&#39;\r\n    [ERROR]\r\n    [ERROR] -&gt; [Help 1]\r\n    org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.jetbrains.kotlin:kotlin-maven-plugin:1.7.10:compile (compile) on project demo: Compilation failure\r\n    E:\\demo\\src\\main\\kotlin\\com\\example\\demo\\DemoClass.kt:[5,18] Symbol is declared in module &#39;com.example.demo&#39; which does not export package &#39;com.example.demo&#39;\r\n\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:972)\r\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\r\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke (Method.java:566)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n    Caused by: org.jetbrains.kotlin.maven.KotlinCompilationFailureException: Compilation failure\r\n    E:\\demo\\src\\main\\kotlin\\com\\example\\demo\\DemoClass.kt:[5,18] Symbol is declared in module &#39;com.example.demo&#39; which does not export package &#39;com.example.demo&#39;\r\n\r\n        at org.jetbrains.kotlin.maven.MavenPluginLogMessageCollector.throwKotlinCompilerException (MavenPluginLogMessageCollector.java:111)\r\n        at org.jetbrains.kotlin.maven.KotlinCompileMojoBase.execute (KotlinCompileMojoBase.java:212)\r\n        at org.jetbrains.kotlin.maven.K2JVMCompileMojo.execute (K2JVMCompileMojo.java:222)\r\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:972)\r\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\r\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke (Method.java:566)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n    [ERROR]\r\n    [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n    [ERROR]\r\n    [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\r\n\r\n\r\n  [1]: https://github.com/findusl/SE73000124\r\n\r\n","title":"Java 9 module cannot access files in same module","body":"<p>The whole project can be viewed <a href=\"https://github.com/findusl/SE73000124\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>I have the following minimal demo project:</p>\n<pre><code>package com.example.demo\n\nimport io.swagger.annotations.Api\n\n@Api(tags = [API_NAME])\nclass DemoClass\n\nconst val API_NAME = &quot;demo&quot;\n\nfun main() = println(&quot;Hello World!&quot;)\n</code></pre>\n<p>Works perfectly fine as is. However now I want to add the Java 9 module system. I add a <code>module-info.java</code> under src/main/kotlin with this content:</p>\n<pre><code>module com.example.demo {\n    requires swagger.annotations;\n    requires kotlin.stdlib;\n}\n</code></pre>\n<p>This leads to the following compiler error (you can find the complete mvn output at the end of the question):</p>\n<blockquote>\n<p>E:\\demo\\src\\main\\kotlin\\com\\example\\demo\\DemoClass.kt:[5,18] Symbol is declared in module 'com.example.demo' which does not export package 'com.example.demo'</p>\n</blockquote>\n<p>The problem is with the API_NAME constant used in the @Api annotation. It works if I export the <code>com.example.demo</code> package in the <code>module-info.java</code>, but I don't want to do that. What else can I do?</p>\n<p>I use Maven as a build system and the pom.xml is standard. It is a bit big, mostly due to the kotlin plugin.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n        &lt;kotlin.version&gt;1.7.10&lt;/kotlin.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.swagger&lt;/groupId&gt;\n            &lt;artifactId&gt;swagger-annotations&lt;/artifactId&gt;\n            &lt;version&gt;1.6.6&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-stdlib-jdk8&lt;/artifactId&gt;\n            &lt;version&gt;${kotlin.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n            &lt;artifactId&gt;kotlin-test&lt;/artifactId&gt;\n            &lt;version&gt;${kotlin.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;sourceDirectory&gt;src/main/kotlin&lt;/sourceDirectory&gt;\n        &lt;testSourceDirectory&gt;src/test/kotlin&lt;/testSourceDirectory&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n                &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${kotlin.version}&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;compile&lt;/id&gt;\n                        &lt;phase&gt;compile&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;compile&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;test-compile&lt;/id&gt;\n                        &lt;phase&gt;test-compile&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;test-compile&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;args&gt;\n                        &lt;arg&gt;-Xjsr305=strict&lt;/arg&gt;\n                    &lt;/args&gt;\n                    &lt;compilerPlugins&gt;\n                        &lt;plugin&gt;spring&lt;/plugin&gt;\n                    &lt;/compilerPlugins&gt;\n                    &lt;jvmTarget&gt;1.8&lt;/jvmTarget&gt;\n                &lt;/configuration&gt;\n                &lt;dependencies&gt;\n                    &lt;dependency&gt;\n                        &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;\n                        &lt;artifactId&gt;kotlin-maven-allopen&lt;/artifactId&gt;\n                        &lt;version&gt;${kotlin.version}&lt;/version&gt;\n                    &lt;/dependency&gt;\n                &lt;/dependencies&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>This is the complete output of <code>mvn clean install -e</code>:</p>\n<pre><code>[INFO] Error stacktraces are turned on.\n[INFO] Scanning for projects...\n[INFO]\n[INFO] --------------------------&lt; com.example:demo &gt;--------------------------\n[INFO] Building demo 0.0.1-SNAPSHOT\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO]\n[INFO] --- maven-clean-plugin:3.2.0:clean (default-clean) @ demo ---\n[INFO] Deleting E:\\demo\\target\n[INFO]\n[INFO] --- maven-resources-plugin:3.2.0:resources (default-resources) @ demo ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] Using 'UTF-8' encoding to copy filtered properties files.\n[INFO] Copying 1 resource\n[INFO] Copying 0 resource\n[INFO]\n[INFO] --- maven-compiler-plugin:3.10.1:compile (default-compile) @ demo ---\n[INFO] Required filename-based automodules detected: [swagger-annotations-1.6.6.jar]. Please don't publish this project to a public artifact repository!\n[INFO] Changes detected - recompiling the module!\n[INFO] Compiling 1 source file to E:\\demo\\target\\classes\n[INFO]\n[INFO] --- kotlin-maven-plugin:1.7.10:compile (compile) @ demo ---\n[INFO] Applied plugin: 'spring'\n[ERROR] E:\\demo\\src\\main\\kotlin\\com\\example\\demo\\DemoClass.kt: (5, 18) Symbol is declared in module 'com.example.demo' which does not export package 'com.example.demo'\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  3.825 s\n[INFO] Finished at: 2022-07-16T01:49:05+02:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.jetbrains.kotlin:kotlin-maven-plugin:1.7.10:compile (compile) on project demo: Compilation failure\n[ERROR] E:\\demo\\src\\main\\kotlin\\com\\example\\demo\\DemoClass.kt:[5,18] Symbol is declared in module 'com.example.demo' which does not export package 'com.example.demo'\n[ERROR]\n[ERROR] -&gt; [Help 1]\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.jetbrains.kotlin:kotlin-maven-plugin:1.7.10:compile (compile) on project demo: Compilation failure\nE:\\demo\\src\\main\\kotlin\\com\\example\\demo\\DemoClass.kt:[5,18] Symbol is declared in module 'com.example.demo' which does not export package 'com.example.demo'\n\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:972)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:566)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\nCaused by: org.jetbrains.kotlin.maven.KotlinCompilationFailureException: Compilation failure\nE:\\demo\\src\\main\\kotlin\\com\\example\\demo\\DemoClass.kt:[5,18] Symbol is declared in module 'com.example.demo' which does not export package 'com.example.demo'\n\n    at org.jetbrains.kotlin.maven.MavenPluginLogMessageCollector.throwKotlinCompilerException (MavenPluginLogMessageCollector.java:111)\n    at org.jetbrains.kotlin.maven.KotlinCompileMojoBase.execute (KotlinCompileMojoBase.java:212)\n    at org.jetbrains.kotlin.maven.K2JVMCompileMojo.execute (K2JVMCompileMojo.java:222)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:972)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:566)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\n[ERROR]\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\n</code></pre>\n"},{"tags":["java","layout","swt","composite"],"answers":[{"tags":[],"owner":{"account_id":14570014,"reputation":29,"user_id":10523581,"display_name":"josie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1541425705,"creation_date":1541425705,"answer_id":53155691,"question_id":53155513,"body_markdown":"Just set pack to false.\r\n\t\r\n\r\n&gt; **pack** specifies whether all controls in the layout take their\r\n&gt; preferred size\r\n\r\n    columnLayout.pack = false;\r\n    column.setLayout(columnLayout)\r\n\r\n","title":"How to have same width in all the buttons inside various SWT RowLayouts","body":"<p>Just set pack to false.</p>\n\n<blockquote>\n  <p><strong>pack</strong> specifies whether all controls in the layout take their\n  preferred size</p>\n</blockquote>\n\n<pre><code>columnLayout.pack = false;\ncolumn.setLayout(columnLayout)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1541429059,"creation_date":1541429059,"answer_id":53156635,"question_id":53155513,"body_markdown":"This uses `GridLayout` for everything and sets `GridData` on all controls and composites to fill the columns:\r\n\r\n    for (int i = 0; i &lt; columns; i++) {\r\n        Composite column = new Composite(numbersComposite, SWT.NONE);\r\n        column.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, false, false));\r\n\r\n        GridLayout columnLayout = new GridLayout();\r\n        column.setLayout(columnLayout);\r\n\r\n        for (int j = 0; j &lt; rows; j++) {\r\n            Button button = new Button(column, SWT.TOGGLE);\r\n            button.setText(Integer.toString(number));\r\n\r\n            button.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, true, false));\r\n\r\n            buttons.add(button);\r\n\r\n            number++;\r\n        }\r\n    }\r\n","title":"How to have same width in all the buttons inside various SWT RowLayouts","body":"<p>This uses <code>GridLayout</code> for everything and sets <code>GridData</code> on all controls and composites to fill the columns:</p>\n\n<pre><code>for (int i = 0; i &lt; columns; i++) {\n    Composite column = new Composite(numbersComposite, SWT.NONE);\n    column.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, false, false));\n\n    GridLayout columnLayout = new GridLayout();\n    column.setLayout(columnLayout);\n\n    for (int j = 0; j &lt; rows; j++) {\n        Button button = new Button(column, SWT.TOGGLE);\n        button.setText(Integer.toString(number));\n\n        button.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, true, false));\n\n        buttons.add(button);\n\n        number++;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":221733,"reputation":36359,"user_id":479886,"accept_rate":61,"display_name":"NullPointerException"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":806,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":53156635,"answer_count":2,"score":0,"last_activity_date":1657978855,"creation_date":1541425058,"question_id":53155513,"body_markdown":"I want to display a table with 5 columns and 9 rows. The table will display 45 buttons, each of the buttons will have the number written in the button text. The first column has the numbers from 1 to 9 so the buttons have a width smaller than the next four columns, because the next columns has numbers with two digits.\r\n\r\nThe objective is to have the same width in the 45 buttons of the five RowLayout.\r\n\r\n\t\tComposite numbersComposite = new Composite(composite, SWT.NONE);\r\n\t\tnumbersComposite.setLayout(new GridLayout(5, true));\r\n\r\n\t\tint rows = 9;\r\n\t\tint columns = 5;\t\t\t\t\t\t\r\n\t\t\r\n\t\tfor (int i=0; i&lt;columns; i++) {\r\n\t\t\tComposite column = new Composite(numbersComposite, SWT.NONE);\r\n\t\t\tRowLayout columnLayout = new RowLayout(SWT.VERTICAL);\r\n\t\t\tcolumnLayout.fill = true;\r\n\t\t\tcolumn.setLayout(columnLayout);\r\n\t\t\t  \r\n\t\t\tfor (int j=0;j&lt;rows; j++) {\t\t\t\r\n\t\t\t\tbutton = new Button(column, SWT.TOGGLE);\r\n\t\t\t\tbutton.setText(&quot;&quot;+number);\t\t\r\n\t\t\t\tbuttons.add(button);\t\r\n\t\t\t\tnumber++;\r\n\t\t\t}\r\n\t\t}\r\n\r\nI don&#39;t want to set a fixed size to all the buttons because if the user increases the font size in the computer then the text will not be fully visible in the fixed size.","title":"How to have same width in all the buttons inside various SWT RowLayouts","body":"<p>I want to display a table with 5 columns and 9 rows. The table will display 45 buttons, each of the buttons will have the number written in the button text. The first column has the numbers from 1 to 9 so the buttons have a width smaller than the next four columns, because the next columns has numbers with two digits.</p>\n<p>The objective is to have the same width in the 45 buttons of the five RowLayout.</p>\n<pre><code>    Composite numbersComposite = new Composite(composite, SWT.NONE);\n    numbersComposite.setLayout(new GridLayout(5, true));\n\n    int rows = 9;\n    int columns = 5;                        \n    \n    for (int i=0; i&lt;columns; i++) {\n        Composite column = new Composite(numbersComposite, SWT.NONE);\n        RowLayout columnLayout = new RowLayout(SWT.VERTICAL);\n        columnLayout.fill = true;\n        column.setLayout(columnLayout);\n          \n        for (int j=0;j&lt;rows; j++) {         \n            button = new Button(column, SWT.TOGGLE);\n            button.setText(&quot;&quot;+number);      \n            buttons.add(button);    \n            number++;\n        }\n    }\n</code></pre>\n<p>I don't want to set a fixed size to all the buttons because if the user increases the font size in the computer then the text will not be fully visible in the fixed size.</p>\n"},{"tags":["java","spring","mongodb","spring-data-mongodb","mongotemplate"],"comments":[{"owner":{"account_id":5951494,"reputation":12969,"user_id":4679320,"accept_rate":67,"display_name":"prasad_"},"score":1,"creation_date":1654830424,"post_id":72562908,"comment_id":128190822,"body_markdown":"Performance tips: (1) The fields used in the match operation query can use an index for an efficient filtering. (2) The projection operation before the group stage _may_ not be required, unless you are performing some computation to get that date.","body":"Performance tips: (1) The fields used in the match operation query can use an index for an efficient filtering. (2) The projection operation before the group stage <i>may</i> not be required, unless you are performing some computation to get that date."}],"answers":[{"tags":[],"owner":{"account_id":30010,"reputation":20778,"user_id":81514,"accept_rate":83,"display_name":"Ralph Shillington"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1657978691,"creation_date":1654796424,"answer_id":72564495,"question_id":72562908,"body_markdown":"Index tuning will depend more on the properties in the `$match` expression. You should be able to run the query in mongosh with and get an explain plan to determine if your query is scanning the collection.\r\n\r\nOther things to consider is the size of the collection versus the working set of the server.\r\n\r\nPerhaps update your question with the `$match` expression, and the `explain plan` and perhaps the current set of index definitions and we can refine the indexing strategy.\r\n\r\nFinally, &quot;huge&quot; is rather subjective?  Are you querying millions or billions or documents, and what is the average document size?\r\n\r\n### Update:\r\nGiven that you&#39;re filtering on only one field, and aggregating on one field, you&#39;ll find the best result will be an index\r\n```\r\n{ &quot;type&quot;:1,&quot;extractionDate&quot;:1}\r\n```\r\nThat index should cover your query -- because the `$in` will mean that a scan will be selected but a scan over a small index is significantly better than over the whole collection of documents.\r\n\r\nNB. The existing index `extractionDate_1_customer.irType_1` will not be any help for this query.","title":"optimize mongo query to get max date in a very short time","body":"<p>Index tuning will depend more on the properties in the <code>$match</code> expression. You should be able to run the query in mongosh with and get an explain plan to determine if your query is scanning the collection.</p>\n<p>Other things to consider is the size of the collection versus the working set of the server.</p>\n<p>Perhaps update your question with the <code>$match</code> expression, and the <code>explain plan</code> and perhaps the current set of index definitions and we can refine the indexing strategy.</p>\n<p>Finally, &quot;huge&quot; is rather subjective?  Are you querying millions or billions or documents, and what is the average document size?</p>\n<h3>Update:</h3>\n<p>Given that you're filtering on only one field, and aggregating on one field, you'll find the best result will be an index</p>\n<pre><code>{ &quot;type&quot;:1,&quot;extractionDate&quot;:1}\n</code></pre>\n<p>That index should cover your query -- because the <code>$in</code> will mean that a scan will be selected but a scan over a small index is significantly better than over the whole collection of documents.</p>\n<p>NB. The existing index <code>extractionDate_1_customer.irType_1</code> will not be any help for this query.</p>\n"},{"tags":[],"owner":{"account_id":22649232,"reputation":1287,"user_id":16824146,"display_name":"mr.Penguin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655200315,"creation_date":1655200315,"answer_id":72614930,"question_id":72562908,"body_markdown":"I was able to optimize the request thanks to previous answers using this approach: \r\n\r\n    @Override\r\n    public Mono&lt;DBObject&gt; getLastExtractionDate(MatchOperation matchOperation,ProjectionOperation projectionOperation) {\r\n        return Mono.from(mongoTemplate.aggregate(\r\n                newAggregation(\r\n                        matchOperation,\r\n                        sort(Sort.Direction.DESC,EXTRACTION_DATE),\r\n                        limit(1),\r\n                        projectionOperation\r\n                ),\r\n                &quot;kpi&quot;,\r\n                DBObject.class\r\n        ));\r\n    }\r\n\r\nAlso I had to create a compound index on extractionDate and type (the field I had in matchOperation) like bellow: \r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zMB3C.png","title":"optimize mongo query to get max date in a very short time","body":"<p>I was able to optimize the request thanks to previous answers using this approach:</p>\n<pre><code>@Override\npublic Mono&lt;DBObject&gt; getLastExtractionDate(MatchOperation matchOperation,ProjectionOperation projectionOperation) {\n    return Mono.from(mongoTemplate.aggregate(\n            newAggregation(\n                    matchOperation,\n                    sort(Sort.Direction.DESC,EXTRACTION_DATE),\n                    limit(1),\n                    projectionOperation\n            ),\n            &quot;kpi&quot;,\n            DBObject.class\n    ));\n}\n</code></pre>\n<p>Also I had to create a compound index on extractionDate and type (the field I had in matchOperation) like bellow:\n<a href=\"https://i.stack.imgur.com/zMB3C.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zMB3C.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":22649232,"reputation":1287,"user_id":16824146,"display_name":"mr.Penguin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":164,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72564495,"answer_count":2,"score":0,"last_activity_date":1657978691,"creation_date":1654788212,"question_id":72562908,"body_markdown":"I&#39;m using the query bellow to get max date (field named extractionDate) in a collection called KPI, and since I&#39;m only interested in the field extractionDate:\r\n\r\n    @Override\r\n    public Mono&lt;DBObject&gt; getLastExtractionDate(MatchOperation matchOperation,ProjectionOperation projectionOperation) {\r\n        return Mono.from(mongoTemplate.aggregate(\r\n                newAggregation(\r\n                        matchOperation,\r\n                        projectionOperation,\r\n                        group().max(EXTRACTION_DATE).as(&quot;result&quot;),\r\n                        project().andExclude(&quot;_id&quot;)\r\n                ),\r\n                &quot;kpi&quot;,\r\n                DBObject.class\r\n        ));\r\n    }\r\n\r\nAnd as you see above, I need to filter the result firstly using the match operation (matchOperation) after that, I&#39;m doing a projection operation to extract only the max of field &quot;extractionDate&quot; and rename it as result. \r\n\r\nBut this query cost a lot of time (sometimes more than 20 seconds) because I have a huge amount of data, I already added an index on the field extractionDate but I did not gain a lot, so I&#39;m looking for a way to mast it fast as max as possible. \r\n\r\n**update:**\r\n\r\nNumber of documents we have in the collection kpi: **42.8m** documents \r\n\r\nThe query that being executed: \r\n\r\n    Streaming aggregation: [{ &quot;$match&quot; : { &quot;type&quot; : { &quot;$in&quot; : [&quot;INACTIVE_SITE&quot;, &quot;DEVICE_NOT_BILLED&quot;, &quot;NOT_REPLYING_POLLING&quot;, &quot;MISSING_KEY_TECH_INFO&quot;, &quot;MISSING_SITE&quot;, &quot;ACTIVE_CIRCUITS_INACTIVE_RESOURCES&quot;, &quot;INCONSISTENT_STATUS_VALUES&quot;]}}}, { &quot;$project&quot; : { &quot;extractionDate&quot; : 1, &quot;_id&quot; : 0}}, { &quot;$group&quot; : { &quot;_id&quot; : null, &quot;result&quot; : { &quot;$max&quot; : &quot;$extractionDate&quot;}}}, { &quot;$project&quot; : { &quot;_id&quot; : 0}}] in collection kpi\r\n\r\nexplain plan: \r\n[![enter image description here][1]][1]\r\n\r\n\r\nExample of a document in the collection KPI: \r\n[![enter image description here][2]][2]\r\n\r\n\r\nAnd finally the indexes that already exist on this collection :\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4wnXZ.png\r\n  [2]: https://i.stack.imgur.com/3eCcK.png\r\n  [3]: https://i.stack.imgur.com/nolbj.png","title":"optimize mongo query to get max date in a very short time","body":"<p>I'm using the query bellow to get max date (field named extractionDate) in a collection called KPI, and since I'm only interested in the field extractionDate:</p>\n<pre><code>@Override\npublic Mono&lt;DBObject&gt; getLastExtractionDate(MatchOperation matchOperation,ProjectionOperation projectionOperation) {\n    return Mono.from(mongoTemplate.aggregate(\n            newAggregation(\n                    matchOperation,\n                    projectionOperation,\n                    group().max(EXTRACTION_DATE).as(&quot;result&quot;),\n                    project().andExclude(&quot;_id&quot;)\n            ),\n            &quot;kpi&quot;,\n            DBObject.class\n    ));\n}\n</code></pre>\n<p>And as you see above, I need to filter the result firstly using the match operation (matchOperation) after that, I'm doing a projection operation to extract only the max of field &quot;extractionDate&quot; and rename it as result.</p>\n<p>But this query cost a lot of time (sometimes more than 20 seconds) because I have a huge amount of data, I already added an index on the field extractionDate but I did not gain a lot, so I'm looking for a way to mast it fast as max as possible.</p>\n<p><strong>update:</strong></p>\n<p>Number of documents we have in the collection kpi: <strong>42.8m</strong> documents</p>\n<p>The query that being executed:</p>\n<pre><code>Streaming aggregation: [{ &quot;$match&quot; : { &quot;type&quot; : { &quot;$in&quot; : [&quot;INACTIVE_SITE&quot;, &quot;DEVICE_NOT_BILLED&quot;, &quot;NOT_REPLYING_POLLING&quot;, &quot;MISSING_KEY_TECH_INFO&quot;, &quot;MISSING_SITE&quot;, &quot;ACTIVE_CIRCUITS_INACTIVE_RESOURCES&quot;, &quot;INCONSISTENT_STATUS_VALUES&quot;]}}}, { &quot;$project&quot; : { &quot;extractionDate&quot; : 1, &quot;_id&quot; : 0}}, { &quot;$group&quot; : { &quot;_id&quot; : null, &quot;result&quot; : { &quot;$max&quot; : &quot;$extractionDate&quot;}}}, { &quot;$project&quot; : { &quot;_id&quot; : 0}}] in collection kpi\n</code></pre>\n<p>explain plan:\n<a href=\"https://i.stack.imgur.com/4wnXZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4wnXZ.png\" alt=\"enter image description here\" /></a></p>\n<p>Example of a document in the collection KPI:\n<a href=\"https://i.stack.imgur.com/3eCcK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3eCcK.png\" alt=\"enter image description here\" /></a></p>\n<p>And finally the indexes that already exist on this collection :\n<a href=\"https://i.stack.imgur.com/nolbj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nolbj.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","php","json","string","curl"],"comments":[{"owner":{"account_id":5251793,"reputation":2266,"user_id":4195825,"accept_rate":76,"display_name":"px06"},"score":0,"creation_date":1473946837,"post_id":39512446,"comment_id":66341022,"body_markdown":"You haven&#39;t specified what language you&#39;re trying to achieve the formatting of UUID&#39;s in... You&#39;ve mentioned the word Java while only supplying PHP code and queries. Can you be a little more clear about what you&#39;re trying to do?","body":"You haven&#39;t specified what language you&#39;re trying to achieve the formatting of UUID&#39;s in... You&#39;ve mentioned the word Java while only supplying PHP code and queries. Can you be a little more clear about what you&#39;re trying to do?"},{"owner":{"account_id":3943960,"reputation":114,"user_id":3257339,"accept_rate":50,"display_name":"LeoV117"},"score":0,"creation_date":1473946984,"post_id":39512446,"comment_id":66341141,"body_markdown":"Done as requested. Updated in title and question.","body":"Done as requested. Updated in title and question."}],"answers":[{"tags":[],"owner":{"account_id":2016713,"reputation":26480,"user_id":1803853,"accept_rate":71,"display_name":"Davide Lorenzo MARINO"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1473947014,"creation_date":1473947014,"answer_id":39512674,"question_id":39512446,"body_markdown":"UUID is not a special java format. It is the [Universal Unique Identifier][1].\r\n\r\n&gt; A universally unique identifier (UUID) is an identifier standard used in software construction. **A UUID is simply a 128-bit value**. \r\n\r\nWhat happen is that the conversion from the 128 bit value to a human readable version of the same value converting it to a string follow generally some conventions.\r\n\r\nBasically the number is converted to the better human readable hexadecimal format with some hyphen to separate block of bits.\r\n\r\n----\r\n\r\nFrom a performance perspective you can use the several times the [substr_replace][2] function, instead of creating an array of strings using substr and applying implode to it.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Universally_unique_identifier\r\n  [2]: http://php.net/manual/en/function.substr-replace.php","title":"Format &quot;raw&quot; string to Java UUID in PHP","body":"<p>UUID is not a special java format. It is the <a href=\"https://en.wikipedia.org/wiki/Universally_unique_identifier\" rel=\"nofollow\">Universal Unique Identifier</a>.</p>\n\n<blockquote>\n  <p>A universally unique identifier (UUID) is an identifier standard used in software construction. <strong>A UUID is simply a 128-bit value</strong>. </p>\n</blockquote>\n\n<p>What happen is that the conversion from the 128 bit value to a human readable version of the same value converting it to a string follow generally some conventions.</p>\n\n<p>Basically the number is converted to the better human readable hexadecimal format with some hyphen to separate block of bits.</p>\n\n<hr>\n\n<p>From a performance perspective you can use the several times the <a href=\"http://php.net/manual/en/function.substr-replace.php\" rel=\"nofollow\">substr_replace</a> function, instead of creating an array of strings using substr and applying implode to it.</p>\n"},{"tags":[],"owner":{"account_id":5251793,"reputation":2266,"user_id":4195825,"accept_rate":76,"display_name":"px06"},"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1473947637,"creation_date":1473947637,"answer_id":39512919,"question_id":39512446,"body_markdown":"Your question doesn&#39;t make much sense but assuming you want to read the UUID in the correct format in Java you can do something like this:\r\n\r\n\timport java.util.UUID;\r\n\tclass A\r\n\t{\r\n\t\tpublic static void main(String[] args){\r\n\r\n\t\t\r\n\t\t\tString input = &quot;f9e113324bd449809b98b0925eac3141&quot;;                         \r\n\t\t\tString uuid_parse = input.replaceAll(                                            \r\n\t\t\t\t\t\t\t&quot;(\\\\w{8})(\\\\w{4})(\\\\w{4})(\\\\w{4})(\\\\w{12})&quot;,                            \r\n\t    \t\t\t\t\t&quot;$1-$2-$3-$4-$5&quot;);                                                      \r\n\r\n\t\t\tUUID uuid = UUID.fromString(uuid_parse);\r\n\t\t\tSystem.out.println(uuid);\r\n\t\t}\r\n\t}\r\n\r\n&gt; Borrowed from maerics, see here: https://stackoverflow.com/a/18987428/4195825\r\n\r\nOr in PHP you can do something like:\r\n\r\n\t&lt;?php \r\n\t\t$UUID = &quot;f9e113324bd449809b98b0925eac3141&quot;;\r\n\t\t$UUID = substr($UUID, 0, 8) . &#39;-&#39; . substr($UUID, 8, 4) . &#39;-&#39; . substr($UUID, 12, 4) . &#39;-&#39; . substr($UUID, 16, 4)  . &#39;-&#39; . substr($UUID, 20);\r\n\t\techo $UUID;\r\n\t?&gt;\r\n\r\n&gt; Borrowed from fico7489: https://stackoverflow.com/a/33484855/4195825\r\n\r\nAnd then you can send that to Java where you can create a UUID object using `fromtString()`.","title":"Format &quot;raw&quot; string to Java UUID in PHP","body":"<p>Your question doesn't make much sense but assuming you want to read the UUID in the correct format in Java you can do something like this:</p>\n\n<pre><code>import java.util.UUID;\nclass A\n{\n    public static void main(String[] args){\n\n\n        String input = \"f9e113324bd449809b98b0925eac3141\";                         \n        String uuid_parse = input.replaceAll(                                            \n                        \"(\\\\w{8})(\\\\w{4})(\\\\w{4})(\\\\w{4})(\\\\w{12})\",                            \n                        \"$1-$2-$3-$4-$5\");                                                      \n\n        UUID uuid = UUID.fromString(uuid_parse);\n        System.out.println(uuid);\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>Borrowed from maerics, see here: <a href=\"https://stackoverflow.com/a/18987428/4195825\">https://stackoverflow.com/a/18987428/4195825</a></p>\n</blockquote>\n\n<p>Or in PHP you can do something like:</p>\n\n<pre><code>&lt;?php \n    $UUID = \"f9e113324bd449809b98b0925eac3141\";\n    $UUID = substr($UUID, 0, 8) . '-' . substr($UUID, 8, 4) . '-' . substr($UUID, 12, 4) . '-' . substr($UUID, 16, 4)  . '-' . substr($UUID, 20);\n    echo $UUID;\n?&gt;\n</code></pre>\n\n<blockquote>\n  <p>Borrowed from fico7489: <a href=\"https://stackoverflow.com/a/33484855/4195825\">https://stackoverflow.com/a/33484855/4195825</a></p>\n</blockquote>\n\n<p>And then you can send that to Java where you can create a UUID object using <code>fromtString()</code>.</p>\n"}],"owner":{"account_id":3943960,"reputation":114,"user_id":3257339,"accept_rate":50,"display_name":"LeoV117"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2227,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1657978560,"accepted_answer_id":39512919,"answer_count":2,"score":2,"last_activity_date":1657978596,"creation_date":1473946398,"question_id":39512446,"body_markdown":"Is there a more effective, simplified means of converting a &quot;formatted&quot; Java UUID - without dashes - to a Java compatible format - with dashes - in PHP, and ultimately: How would I do it?\r\n\r\nI have code that already performs this action, but it seems unprofessional and I feel that it could probably be done more effectively.\r\n\r\n    [... PHP code ...]\r\n    $uuido = $json[&#39;id&#39;];\r\n    \r\n    $uuidx = array();\r\n    $uuidx[0] = substr( $uuido, 0, 8 );\r\n    $uuidx[1] = substr( $uuido, 8, 4 );\r\n    $uuidx[2] = substr( $uuido, 12, 4);\r\n    $uuidx[3] = substr( $uuido, 16, 4);\r\n    $uuidx[4] = substr( $uuido, 20, 12);\r\n    \r\n    $uuid = implode( &quot;-&quot;, $uuidx );\r\n    [... PHP code ...]\r\n    \r\n    Input:  f9e113324bd449809b98b0925eac3141\r\n    Output: f9e11332-4bd4-4980-9b98-b0925eac3141\r\n\r\nThe data from `$json[&#39;id&#39;]` is called from the following [Mojang Profile API][1] using the `file_get_contents( $url )` function combined with a `json_decode( $file )`, which could alternatively be done through cURL - but since it would eventually be requesting anything up to 2048 profiles at once, I figured it would become slow.\r\n\r\nI do have my code in use, and public, through the following [ProjectRogue Server Ping API][2], which usually contains a list of online players.\r\n\r\n**Note:** There are several questions related to this, but none apply to PHP as far as I am aware. I have looked.\r\n\r\nI mention Java UUID as the parsed output should effectively translate to a Player UUID for use in a Java-Based plugin for Spigot or Craftbukkit after 1.7.X.\r\n\r\n\r\n  [1]: https://api.mojang.com/users/profiles/minecraft/LeoV117\r\n  [2]: https://www.projectrogue.co.uk/api/minecraft/query/151.80.170.47/27015","title":"Format &quot;raw&quot; string to Java UUID in PHP","body":"<p>Is there a more effective, simplified means of converting a \"formatted\" Java UUID - without dashes - to a Java compatible format - with dashes - in PHP, and ultimately: How would I do it?</p>\n\n<p>I have code that already performs this action, but it seems unprofessional and I feel that it could probably be done more effectively.</p>\n\n<pre><code>[... PHP code ...]\n$uuido = $json['id'];\n\n$uuidx = array();\n$uuidx[0] = substr( $uuido, 0, 8 );\n$uuidx[1] = substr( $uuido, 8, 4 );\n$uuidx[2] = substr( $uuido, 12, 4);\n$uuidx[3] = substr( $uuido, 16, 4);\n$uuidx[4] = substr( $uuido, 20, 12);\n\n$uuid = implode( \"-\", $uuidx );\n[... PHP code ...]\n\nInput:  f9e113324bd449809b98b0925eac3141\nOutput: f9e11332-4bd4-4980-9b98-b0925eac3141\n</code></pre>\n\n<p>The data from <code>$json['id']</code> is called from the following <a href=\"https://api.mojang.com/users/profiles/minecraft/LeoV117\" rel=\"nofollow\">Mojang Profile API</a> using the <code>file_get_contents( $url )</code> function combined with a <code>json_decode( $file )</code>, which could alternatively be done through cURL - but since it would eventually be requesting anything up to 2048 profiles at once, I figured it would become slow.</p>\n\n<p>I do have my code in use, and public, through the following <a href=\"https://www.projectrogue.co.uk/api/minecraft/query/151.80.170.47/27015\" rel=\"nofollow\">ProjectRogue Server Ping API</a>, which usually contains a list of online players.</p>\n\n<p><strong>Note:</strong> There are several questions related to this, but none apply to PHP as far as I am aware. I have looked.</p>\n\n<p>I mention Java UUID as the parsed output should effectively translate to a Player UUID for use in a Java-Based plugin for Spigot or Craftbukkit after 1.7.X.</p>\n"},{"tags":["java","performance","benchmarking","bytecode","jit"],"comments":[{"owner":{"account_id":444416,"reputation":15934,"user_id":836214,"accept_rate":86,"display_name":"Krease"},"score":5,"creation_date":1543006077,"post_id":53452713,"comment_id":93778069,"body_markdown":"I get similar results (slightly different numbers, but definitely noticeable and consistent gap, definitely more than sampling error)","body":"I get similar results (slightly different numbers, but definitely noticeable and consistent gap, definitely more than sampling error)"},{"owner":{"account_id":115767,"reputation":42976,"user_id":303810,"accept_rate":84,"display_name":"lexicore"},"score":31,"creation_date":1543006604,"post_id":53452713,"comment_id":93778227,"body_markdown":"Also please see:\nhttps://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java","body":"Also please see: <a href=\"https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java\" title=\"how do i write a correct micro benchmark in java\">stackoverflow.com/questions/504103/&hellip;</a>"},{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":3,"creation_date":1543007263,"post_id":53452713,"comment_id":93778402,"body_markdown":"@Krease Good that you caught my mistake. According to the new benchmark I ran `2 * i * i` is slower. I&#39;ll try running with Graal as well.","body":"@Krease Good that you caught my mistake. According to the new benchmark I ran <code>2 * i * i</code> is slower. I&#39;ll try running with Graal as well."},{"owner":{"account_id":1738473,"reputation":51030,"user_id":1590502,"accept_rate":78,"display_name":"Philipp Jahoda"},"score":1,"creation_date":1543007285,"post_id":53452713,"comment_id":93778407,"body_markdown":"I was able to confirm the posters result: https://pastebin.com/KG0YRdnU\nWhen running that code, the 2 * (i * i) option consistently runs 10-20% faster. If I let both options do the same thing, the deviation is always &lt; 5 %","body":"I was able to confirm the posters result: <a href=\"https://pastebin.com/KG0YRdnU\" rel=\"nofollow noreferrer\">pastebin.com/KG0YRdnU</a> When running that code, the 2 * (i * i) option consistently runs 10-20% faster. If I let both options do the same thing, the deviation is always &lt; 5 %"},{"owner":{"account_id":2119697,"reputation":998,"user_id":1883236,"display_name":"Elyor Murodov"},"score":1,"creation_date":1543008047,"post_id":53452713,"comment_id":93778611,"body_markdown":"It&#39;s not the case on my run. I have 2 versions of this calculation in 2 methods calc1() and calc2(). In main, I call calc1() followed by calc2(). Then, I check with calc2() followed by calc1(). In both cases, the first call (whether calc1() or calc2()) is always taking longer. You can try.","body":"It&#39;s not the case on my run. I have 2 versions of this calculation in 2 methods calc1() and calc2(). In main, I call calc1() followed by calc2(). Then, I check with calc2() followed by calc1(). In both cases, the first call (whether calc1() or calc2()) is always taking longer. You can try."},{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":1,"creation_date":1543008106,"post_id":53452713,"comment_id":93778633,"body_markdown":"@JornVernee If it could help you add further information to your answer, the JVM instruction set for [`iload`](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-6.html#jvms-6.5.iload) and [`imul`](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-6.html#jvms-6.5.imul)","body":"@JornVernee If it could help you add further information to your answer, the JVM instruction set for <a href=\"https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-6.html#jvms-6.5.iload\" rel=\"nofollow noreferrer\"><code>iload</code></a> and <a href=\"https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-6.html#jvms-6.5.imul\" rel=\"nofollow noreferrer\"><code>imul</code></a>"},{"owner":{"account_id":1507667,"reputation":72920,"user_id":1410664,"accept_rate":52,"display_name":"Caius Jard"},"score":1,"creation_date":1543008300,"post_id":53452713,"comment_id":93778694,"body_markdown":"I cannot reliably reproduce your result; for me the bracketed version is slower in 95% of cases.","body":"I cannot reliably reproduce your result; for me the bracketed version is slower in 95% of cases."},{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":6,"creation_date":1543008599,"post_id":53452713,"comment_id":93778786,"body_markdown":"@nullpointer To find out for real why one is faster than the other, we&#39;d have to get the disassembly or Ideal graphs for those methods. The assembler is very annoying to try and figure out, so I&#39;m trying to get an OpenJDK debug build which can output nice graphs.","body":"@nullpointer To find out for real why one is faster than the other, we&#39;d have to get the disassembly or Ideal graphs for those methods. The assembler is very annoying to try and figure out, so I&#39;m trying to get an OpenJDK debug build which can output nice graphs."},{"owner":{"account_id":2119697,"reputation":998,"user_id":1883236,"display_name":"Elyor Murodov"},"score":0,"creation_date":1543008788,"post_id":53452713,"comment_id":93778838,"body_markdown":"it depends on many factors, such as JVM version, and so on. You can&#39;t always reproduce this.","body":"it depends on many factors, such as JVM version, and so on. You can&#39;t always reproduce this."},{"owner":{"account_id":12695174,"reputation":45172,"user_id":9223839,"display_name":"Joakim Danielson"},"score":0,"creation_date":1543009446,"post_id":53452713,"comment_id":93778997,"body_markdown":"It&#39;s clear that performing the `i * i` multiplication first has something to do with the better performance, `2 * (i * i)` seems to be equally fast as `i * i * 2`.","body":"It&#39;s clear that performing the <code>i * i</code> multiplication first has something to do with the better performance, <code>2 * (i * i)</code> seems to be equally fast as <code>i * i * 2</code>."},{"owner":{"account_id":8134250,"reputation":1092,"user_id":6126446,"accept_rate":100,"display_name":"tur11ng"},"score":0,"creation_date":1543099068,"post_id":53452713,"comment_id":93797266,"body_markdown":"Is it supposed to be some kind of bug in the JIT?","body":"Is it supposed to be some kind of bug in the JIT?"},{"owner":{"account_id":1023850,"reputation":37494,"user_id":1033581,"accept_rate":66,"display_name":"Cur"},"score":4,"creation_date":1543377760,"post_id":53452713,"comment_id":93893225,"body_markdown":"You could rename your question to &quot;_Why is `i * i * 2` faster than `2 * i * i`?_&quot; for improved clarity that the issue is on the order of the operations.","body":"You could rename your question to &quot;<i>Why is <code>i * i * 2</code> faster than <code>2 * i * i</code>?</i>&quot; for improved clarity that the issue is on the order of the operations."},{"owner":{"account_id":4312932,"reputation":23962,"user_id":3523579,"accept_rate":90,"display_name":"Mikhail Kholodkov"},"score":0,"creation_date":1543596674,"post_id":53452713,"comment_id":93989026,"body_markdown":"Please add JDK version used.","body":"Please add JDK version used."},{"owner":{"account_id":8063484,"reputation":1095,"user_id":6078370,"display_name":"DSchmidt"},"score":1,"creation_date":1543597003,"post_id":53452713,"comment_id":93989177,"body_markdown":"@Cur but this is not what happens in bytecode.","body":"@Cur but this is not what happens in bytecode."},{"owner":{"account_id":6509357,"reputation":477,"user_id":5037202,"display_name":"Waqas Gondal"},"score":0,"creation_date":1543671262,"post_id":53452713,"comment_id":94007026,"body_markdown":"I&#39;ve done the same test and the results are totally opposite. https://stackoverflow.com/questions/53570864/why-is-2-x-x-faster-than-2-x-x-in-python","body":"I&#39;ve done the same test and the results are totally opposite. <a href=\"https://stackoverflow.com/questions/53570864/why-is-2-x-x-faster-than-2-x-x-in-python\" title=\"why is 2 x x faster than 2 x x in python\">stackoverflow.com/questions/53570864/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1545573863,"creation_date":1543006485,"answer_id":53452836,"question_id":53452713,"body_markdown":"The two methods of adding do generate slightly different byte code:\r\n\r\n      17: iconst_2\r\n      18: iload         4\r\n      20: iload         4\r\n      22: imul\r\n      23: imul\r\n      24: iadd\r\n\r\nFor `2 * (i * i)` vs:\r\n\r\n      17: iconst_2\r\n      18: iload         4\r\n      20: imul\r\n      21: iload         4\r\n      23: imul\r\n      24: iadd\r\n\r\nFor `2 * i * i`.\r\n\r\nAnd when using a [JMH](https://openjdk.java.net/projects/code-tools/jmh/) benchmark like this:\r\n\r\n    @Warmup(iterations = 5, batchSize = 1)\r\n    @Measurement(iterations = 5, batchSize = 1)\r\n    @Fork(1)\r\n    @BenchmarkMode(Mode.AverageTime)\r\n    @OutputTimeUnit(TimeUnit.MILLISECONDS)\r\n    @State(Scope.Benchmark)\r\n    public class MyBenchmark {\r\n    \r\n    \t@Benchmark\r\n    \tpublic int noBrackets() {\r\n    \t\tint n = 0;\r\n    \t    for (int i = 0; i &lt; 1000000000; i++) {\r\n    \t        n += 2 * i * i;\r\n    \t    }\r\n    \t    return n;\r\n    \t}\r\n    \r\n    \t@Benchmark\r\n    \tpublic int brackets() {\r\n    \t\tint n = 0;\r\n    \t    for (int i = 0; i &lt; 1000000000; i++) {\r\n    \t        n += 2 * (i * i);\r\n    \t    }\r\n    \t    return n;\r\n    \t}\r\n    \r\n    }\r\n\r\nThe difference is clear:\r\n\r\n    # JMH version: 1.21\r\n    # VM version: JDK 11, Java HotSpot(TM) 64-Bit Server VM, 11+28\r\n    # VM options: &lt;none&gt;\r\n\r\n    Benchmark                      (n)  Mode  Cnt    Score    Error  Units\r\n    MyBenchmark.brackets    1000000000  avgt    5  380.889 &#177; 58.011  ms/op\r\n    MyBenchmark.noBrackets  1000000000  avgt    5  512.464 &#177; 11.098  ms/op\r\n\r\nWhat you observe is correct, and not just an anomaly of your benchmarking style (i.e. no warmup, see [How do I write a correct micro-benchmark in Java?](https://stackoverflow.com/q/504103))\r\n\r\nRunning again with Graal:\r\n\r\n    # JMH version: 1.21\r\n    # VM version: JDK 11, Java HotSpot(TM) 64-Bit Server VM, 11+28\r\n    # VM options: -XX:+UnlockExperimentalVMOptions -XX:+EnableJVMCI -XX:+UseJVMCICompiler\r\n\r\n    Benchmark                      (n)  Mode  Cnt    Score    Error  Units\r\n    MyBenchmark.brackets    1000000000  avgt    5  335.100 &#177; 23.085  ms/op\r\n    MyBenchmark.noBrackets  1000000000  avgt    5  331.163 &#177; 50.670  ms/op\r\n\r\nYou see that the results are much closer, which makes sense, since Graal is an overall better performing, more modern, compiler.\r\n\r\nSo this is really just up to how well the JIT compiler is able to optimize a particular piece of code, and doesn&#39;t necessarily have a logical reason to it.","title":"Why is 2 * (i * i) faster than 2 * i * i in Java?","body":"<p>The two methods of adding do generate slightly different byte code:</p>\n\n<pre><code>  17: iconst_2\n  18: iload         4\n  20: iload         4\n  22: imul\n  23: imul\n  24: iadd\n</code></pre>\n\n<p>For <code>2 * (i * i)</code> vs:</p>\n\n<pre><code>  17: iconst_2\n  18: iload         4\n  20: imul\n  21: iload         4\n  23: imul\n  24: iadd\n</code></pre>\n\n<p>For <code>2 * i * i</code>.</p>\n\n<p>And when using a <a href=\"https://openjdk.java.net/projects/code-tools/jmh/\" rel=\"nofollow noreferrer\">JMH</a> benchmark like this:</p>\n\n<pre><code>@Warmup(iterations = 5, batchSize = 1)\n@Measurement(iterations = 5, batchSize = 1)\n@Fork(1)\n@BenchmarkMode(Mode.AverageTime)\n@OutputTimeUnit(TimeUnit.MILLISECONDS)\n@State(Scope.Benchmark)\npublic class MyBenchmark {\n\n    @Benchmark\n    public int noBrackets() {\n        int n = 0;\n        for (int i = 0; i &lt; 1000000000; i++) {\n            n += 2 * i * i;\n        }\n        return n;\n    }\n\n    @Benchmark\n    public int brackets() {\n        int n = 0;\n        for (int i = 0; i &lt; 1000000000; i++) {\n            n += 2 * (i * i);\n        }\n        return n;\n    }\n\n}\n</code></pre>\n\n<p>The difference is clear:</p>\n\n<pre><code># JMH version: 1.21\n# VM version: JDK 11, Java HotSpot(TM) 64-Bit Server VM, 11+28\n# VM options: &lt;none&gt;\n\nBenchmark                      (n)  Mode  Cnt    Score    Error  Units\nMyBenchmark.brackets    1000000000  avgt    5  380.889  58.011  ms/op\nMyBenchmark.noBrackets  1000000000  avgt    5  512.464  11.098  ms/op\n</code></pre>\n\n<p>What you observe is correct, and not just an anomaly of your benchmarking style (i.e. no warmup, see <a href=\"https://stackoverflow.com/q/504103\">How do I write a correct micro-benchmark in Java?</a>)</p>\n\n<p>Running again with Graal:</p>\n\n<pre><code># JMH version: 1.21\n# VM version: JDK 11, Java HotSpot(TM) 64-Bit Server VM, 11+28\n# VM options: -XX:+UnlockExperimentalVMOptions -XX:+EnableJVMCI -XX:+UseJVMCICompiler\n\nBenchmark                      (n)  Mode  Cnt    Score    Error  Units\nMyBenchmark.brackets    1000000000  avgt    5  335.100  23.085  ms/op\nMyBenchmark.noBrackets  1000000000  avgt    5  331.163  50.670  ms/op\n</code></pre>\n\n<p>You see that the results are much closer, which makes sense, since Graal is an overall better performing, more modern, compiler.</p>\n\n<p>So this is really just up to how well the JIT compiler is able to optimize a particular piece of code, and doesn't necessarily have a logical reason to it.</p>\n"},{"tags":[],"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"down_vote_count":3,"up_vote_count":23,"is_accepted":false,"score":20,"last_activity_date":1543007406,"creation_date":1543007406,"answer_id":53452968,"question_id":53452713,"body_markdown":"I got similar results:\r\n\r\n    2 * (i * i): 0.458765943 s, n=119860736\r\n    2 * i * i: 0.580255126 s, n=119860736\r\n\r\nI got the *SAME* results if both loops were in the same program, or each was in a separate .java file/.class, executed on a separate run.\r\n\r\nFinally, here is a `javap -c -v &lt;.java&gt;` decompile of each:\r\n\r\n         3: ldc           #3                  // String 2 * (i * i):\r\n         5: invokevirtual #4                  // Method java/io/PrintStream.print:(Ljava/lang/String;)V\r\n         8: invokestatic  #5                  // Method java/lang/System.nanoTime:()J\r\n         8: invokestatic  #5                  // Method java/lang/System.nanoTime:()J\r\n        11: lstore_1\r\n        12: iconst_0\r\n        13: istore_3\r\n        14: iconst_0\r\n        15: istore        4\r\n        17: iload         4\r\n        19: ldc           #6                  // int 1000000000\r\n        21: if_icmpge     40\r\n        24: iload_3\r\n        25: iconst_2\r\n        26: iload         4\r\n        28: iload         4\r\n        30: imul\r\n        31: imul\r\n        32: iadd\r\n        33: istore_3\r\n        34: iinc          4, 1\r\n        37: goto          17\r\nvs.\r\n\r\n         3: ldc           #3                  // String 2 * i * i:\r\n         5: invokevirtual #4                  // Method java/io/PrintStream.print:(Ljava/lang/String;)V\r\n         8: invokestatic  #5                  // Method java/lang/System.nanoTime:()J\r\n        11: lstore_1\r\n        12: iconst_0\r\n        13: istore_3\r\n        14: iconst_0\r\n        15: istore        4\r\n        17: iload         4\r\n        19: ldc           #6                  // int 1000000000\r\n        21: if_icmpge     40\r\n        24: iload_3\r\n        25: iconst_2\r\n        26: iload         4\r\n        28: imul\r\n        29: iload         4\r\n        31: imul\r\n        32: iadd\r\n        33: istore_3\r\n        34: iinc          4, 1\r\n        37: goto          17\r\n\r\nFYI -\r\n\r\n    java -version\r\n    java version &quot;1.8.0_121&quot;\r\n    Java(TM) SE Runtime Environment (build 1.8.0_121-b13)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 25.121-b13, mixed mode)\r\n\r\n","title":"Why is 2 * (i * i) faster than 2 * i * i in Java?","body":"<p>I got similar results:</p>\n\n<pre><code>2 * (i * i): 0.458765943 s, n=119860736\n2 * i * i: 0.580255126 s, n=119860736\n</code></pre>\n\n<p>I got the <em>SAME</em> results if both loops were in the same program, or each was in a separate .java file/.class, executed on a separate run.</p>\n\n<p>Finally, here is a <code>javap -c -v &lt;.java&gt;</code> decompile of each:</p>\n\n<pre><code>     3: ldc           #3                  // String 2 * (i * i):\n     5: invokevirtual #4                  // Method java/io/PrintStream.print:(Ljava/lang/String;)V\n     8: invokestatic  #5                  // Method java/lang/System.nanoTime:()J\n     8: invokestatic  #5                  // Method java/lang/System.nanoTime:()J\n    11: lstore_1\n    12: iconst_0\n    13: istore_3\n    14: iconst_0\n    15: istore        4\n    17: iload         4\n    19: ldc           #6                  // int 1000000000\n    21: if_icmpge     40\n    24: iload_3\n    25: iconst_2\n    26: iload         4\n    28: iload         4\n    30: imul\n    31: imul\n    32: iadd\n    33: istore_3\n    34: iinc          4, 1\n    37: goto          17\n</code></pre>\n\n<p>vs.</p>\n\n<pre><code>     3: ldc           #3                  // String 2 * i * i:\n     5: invokevirtual #4                  // Method java/io/PrintStream.print:(Ljava/lang/String;)V\n     8: invokestatic  #5                  // Method java/lang/System.nanoTime:()J\n    11: lstore_1\n    12: iconst_0\n    13: istore_3\n    14: iconst_0\n    15: istore        4\n    17: iload         4\n    19: ldc           #6                  // int 1000000000\n    21: if_icmpge     40\n    24: iload_3\n    25: iconst_2\n    26: iload         4\n    28: imul\n    29: iload         4\n    31: imul\n    32: iadd\n    33: istore_3\n    34: iinc          4, 1\n    37: goto          17\n</code></pre>\n\n<p>FYI -</p>\n\n<pre><code>java -version\njava version \"1.8.0_121\"\nJava(TM) SE Runtime Environment (build 1.8.0_121-b13)\nJava HotSpot(TM) 64-Bit Server VM (build 25.121-b13, mixed mode)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8063484,"reputation":1095,"user_id":6078370,"display_name":"DSchmidt"},"down_vote_count":4,"up_vote_count":45,"is_accepted":false,"score":41,"last_activity_date":1556118656,"creation_date":1543007946,"answer_id":53453039,"question_id":53452713,"body_markdown":"Byte codes: https://cs.nyu.edu/courses/fall00/V22.0201-001/jvm2.html\r\nByte codes Viewer: https://github.com/Konloch/bytecode-viewer\r\n\r\nOn my JDK (Windows&amp;nbsp;10 64 bit, 1.8.0_65-b17) I can reproduce and explain:\r\n\r\n    public static void main(String[] args) {\r\n        int repeat = 10;\r\n        long A = 0;\r\n        long B = 0;\r\n        for (int i = 0; i &lt; repeat; i++) {\r\n            A += test();\r\n            B += testB();\r\n        }\r\n\r\n        System.out.println(A / repeat + &quot; ms&quot;);\r\n        System.out.println(B / repeat + &quot; ms&quot;);\r\n    }\r\n\r\n\r\n    private static long test() {\r\n        int n = 0;\r\n        for (int i = 0; i &lt; 1000; i++) {\r\n            n += multi(i);\r\n        }\r\n        long startTime = System.currentTimeMillis();\r\n        for (int i = 0; i &lt; 1000000000; i++) {\r\n            n += multi(i);\r\n        }\r\n        long ms = (System.currentTimeMillis() - startTime);\r\n        System.out.println(ms + &quot; ms A &quot; + n);\r\n        return ms;\r\n    }\r\n\r\n\r\n    private static long testB() {\r\n        int n = 0;\r\n        for (int i = 0; i &lt; 1000; i++) {\r\n            n += multiB(i);\r\n        }\r\n        long startTime = System.currentTimeMillis();\r\n        for (int i = 0; i &lt; 1000000000; i++) {\r\n            n += multiB(i);\r\n        }\r\n        long ms = (System.currentTimeMillis() - startTime);\r\n        System.out.println(ms + &quot; ms B &quot; + n);\r\n        return ms;\r\n    }\r\n\r\n    private static int multiB(int i) {\r\n        return 2 * (i * i);\r\n    }\r\n\r\n    private static int multi(int i) {\r\n        return 2 * i * i;\r\n    }\r\n\r\nOutput:\r\n\r\n    ...\r\n    405 ms A 785527736\r\n    327 ms B 785527736\r\n    404 ms A 785527736\r\n    329 ms B 785527736\r\n    404 ms A 785527736\r\n    328 ms B 785527736\r\n    404 ms A 785527736\r\n    328 ms B 785527736\r\n    410 ms\r\n    333 ms\r\n\r\nSo why?\r\nThe byte code is this:\r\n\r\n     private static multiB(int arg0) { // 2 * (i * i)\r\n         &lt;localVar:index=0, name=i , desc=I, sig=null, start=L1, end=L2&gt;\r\n\r\n         L1 {\r\n             iconst_2\r\n             iload0\r\n             iload0\r\n             imul\r\n             imul\r\n             ireturn\r\n         }\r\n         L2 {\r\n         }\r\n     }\r\n\r\n     private static multi(int arg0) { // 2 * i * i\r\n         &lt;localVar:index=0, name=i , desc=I, sig=null, start=L1, end=L2&gt;\r\n\r\n         L1 {\r\n             iconst_2\r\n             iload0\r\n             imul\r\n             iload0\r\n             imul\r\n             ireturn\r\n         }\r\n         L2 {\r\n         }\r\n     }\r\n\r\nThe difference being:\r\nWith brackets (`2 * (i * i)`):\r\n\r\n- push const stack\r\n- push local on stack\r\n- push local on stack\r\n- multiply top of stack\r\n- multiply top of stack\r\n\r\nWithout brackets (`2 * i * i`):\r\n\r\n- push const stack\r\n- push local on stack\r\n- multiply top of stack\r\n- push local on stack\r\n- multiply top of stack\r\n\r\nLoading all on the stack and then working back down is faster than switching between putting on the stack and operating on it.\r\n\r\n","title":"Why is 2 * (i * i) faster than 2 * i * i in Java?","body":"<p>Byte codes: <a href=\"https://cs.nyu.edu/courses/fall00/V22.0201-001/jvm2.html\" rel=\"nofollow noreferrer\">https://cs.nyu.edu/courses/fall00/V22.0201-001/jvm2.html</a>\nByte codes Viewer: <a href=\"https://github.com/Konloch/bytecode-viewer\" rel=\"nofollow noreferrer\">https://github.com/Konloch/bytecode-viewer</a></p>\n\n<p>On my JDK (Windows&nbsp;10 64 bit, 1.8.0_65-b17) I can reproduce and explain:</p>\n\n<pre><code>public static void main(String[] args) {\n    int repeat = 10;\n    long A = 0;\n    long B = 0;\n    for (int i = 0; i &lt; repeat; i++) {\n        A += test();\n        B += testB();\n    }\n\n    System.out.println(A / repeat + \" ms\");\n    System.out.println(B / repeat + \" ms\");\n}\n\n\nprivate static long test() {\n    int n = 0;\n    for (int i = 0; i &lt; 1000; i++) {\n        n += multi(i);\n    }\n    long startTime = System.currentTimeMillis();\n    for (int i = 0; i &lt; 1000000000; i++) {\n        n += multi(i);\n    }\n    long ms = (System.currentTimeMillis() - startTime);\n    System.out.println(ms + \" ms A \" + n);\n    return ms;\n}\n\n\nprivate static long testB() {\n    int n = 0;\n    for (int i = 0; i &lt; 1000; i++) {\n        n += multiB(i);\n    }\n    long startTime = System.currentTimeMillis();\n    for (int i = 0; i &lt; 1000000000; i++) {\n        n += multiB(i);\n    }\n    long ms = (System.currentTimeMillis() - startTime);\n    System.out.println(ms + \" ms B \" + n);\n    return ms;\n}\n\nprivate static int multiB(int i) {\n    return 2 * (i * i);\n}\n\nprivate static int multi(int i) {\n    return 2 * i * i;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>...\n405 ms A 785527736\n327 ms B 785527736\n404 ms A 785527736\n329 ms B 785527736\n404 ms A 785527736\n328 ms B 785527736\n404 ms A 785527736\n328 ms B 785527736\n410 ms\n333 ms\n</code></pre>\n\n<p>So why?\nThe byte code is this:</p>\n\n<pre><code> private static multiB(int arg0) { // 2 * (i * i)\n     &lt;localVar:index=0, name=i , desc=I, sig=null, start=L1, end=L2&gt;\n\n     L1 {\n         iconst_2\n         iload0\n         iload0\n         imul\n         imul\n         ireturn\n     }\n     L2 {\n     }\n }\n\n private static multi(int arg0) { // 2 * i * i\n     &lt;localVar:index=0, name=i , desc=I, sig=null, start=L1, end=L2&gt;\n\n     L1 {\n         iconst_2\n         iload0\n         imul\n         iload0\n         imul\n         ireturn\n     }\n     L2 {\n     }\n }\n</code></pre>\n\n<p>The difference being:\nWith brackets (<code>2 * (i * i)</code>):</p>\n\n<ul>\n<li>push const stack</li>\n<li>push local on stack</li>\n<li>push local on stack</li>\n<li>multiply top of stack</li>\n<li>multiply top of stack</li>\n</ul>\n\n<p>Without brackets (<code>2 * i * i</code>):</p>\n\n<ul>\n<li>push const stack</li>\n<li>push local on stack</li>\n<li>multiply top of stack</li>\n<li>push local on stack</li>\n<li>multiply top of stack</li>\n</ul>\n\n<p>Loading all on the stack and then working back down is faster than switching between putting on the stack and operating on it.</p>\n"},{"tags":[],"owner":{"display_name":"user1779715"},"down_vote_count":8,"up_vote_count":143,"is_accepted":false,"score":135,"last_activity_date":1593764534,"creation_date":1543009495,"answer_id":53453240,"question_id":53452713,"body_markdown":"(Editor&#39;s note: this answer is contradicted by evidence from looking at the asm, as shown by another answer.  This was a guess backed up by some experiments, but it turned out not to be correct.)\r\n\r\n----\r\n\r\nWhen the multiplication is `2 * (i * i)`, the JVM is able to factor out the multiplication by `2` from the loop, resulting in this equivalent but more efficient code:\r\n\r\n    int n = 0;\r\n    for (int i = 0; i &lt; 1000000000; i++) {\r\n        n += i * i;\r\n    }\r\n    n *= 2;\r\n\r\nbut when the multiplication is `(2 * i) * i`, the JVM doesn&#39;t optimize it since the multiplication by a constant is no longer right before the `n +=` addition.\r\n\r\nHere are a few reasons why I think this is the case:\r\n\r\n  - Adding an `if (n == 0) n = 1` statement at the start of the loop results in both versions being as efficient, since factoring out the multiplication no longer guarantees that the result will be the same\r\n  - The optimized version (by factoring out the multiplication by 2) is exactly as fast as the `2 * (i * i)` version\r\n\r\nHere is the test code that I used to draw these conclusions:\r\n\r\n    public static void main(String[] args) {\r\n        long fastVersion = 0;\r\n        long slowVersion = 0;\r\n        long optimizedVersion = 0;\r\n        long modifiedFastVersion = 0;\r\n        long modifiedSlowVersion = 0;\r\n\r\n        for (int i = 0; i &lt; 10; i++) {\r\n            fastVersion += fastVersion();\r\n            slowVersion += slowVersion();\r\n            optimizedVersion += optimizedVersion();\r\n            modifiedFastVersion += modifiedFastVersion();\r\n            modifiedSlowVersion += modifiedSlowVersion();\r\n        }\r\n\r\n        System.out.println(&quot;Fast version: &quot; + (double) fastVersion / 1000000000 + &quot; s&quot;);\r\n        System.out.println(&quot;Slow version: &quot; + (double) slowVersion / 1000000000 + &quot; s&quot;);\r\n        System.out.println(&quot;Optimized version: &quot; + (double) optimizedVersion / 1000000000 + &quot; s&quot;);\r\n        System.out.println(&quot;Modified fast version: &quot; + (double) modifiedFastVersion / 1000000000 + &quot; s&quot;);\r\n        System.out.println(&quot;Modified slow version: &quot; + (double) modifiedSlowVersion / 1000000000 + &quot; s&quot;);\r\n    }\r\n\r\n    private static long fastVersion() {\r\n        long startTime = System.nanoTime();\r\n        int n = 0;\r\n        for (int i = 0; i &lt; 1000000000; i++) {\r\n            n += 2 * (i * i);\r\n        }\r\n        return System.nanoTime() - startTime;\r\n    }\r\n\r\n    private static long slowVersion() {\r\n        long startTime = System.nanoTime();\r\n        int n = 0;\r\n        for (int i = 0; i &lt; 1000000000; i++) {\r\n            n += 2 * i * i;\r\n        }\r\n        return System.nanoTime() - startTime;\r\n    }\r\n\r\n    private static long optimizedVersion() {\r\n        long startTime = System.nanoTime();\r\n        int n = 0;\r\n        for (int i = 0; i &lt; 1000000000; i++) {\r\n            n += i * i;\r\n        }\r\n        n *= 2;\r\n        return System.nanoTime() - startTime;\r\n    }\r\n\r\n    private static long modifiedFastVersion() {\r\n        long startTime = System.nanoTime();\r\n        int n = 0;\r\n        for (int i = 0; i &lt; 1000000000; i++) {\r\n            if (n == 0) n = 1;\r\n            n += 2 * (i * i);\r\n        }\r\n        return System.nanoTime() - startTime;\r\n    }\r\n\r\n    private static long modifiedSlowVersion() {\r\n        long startTime = System.nanoTime();\r\n        int n = 0;\r\n        for (int i = 0; i &lt; 1000000000; i++) {\r\n            if (n == 0) n = 1;\r\n            n += 2 * i * i;\r\n        }\r\n        return System.nanoTime() - startTime;\r\n    }\r\n\r\nAnd here are the results:\r\n\r\n    Fast version: 5.7274411 s\r\n    Slow version: 7.6190804 s\r\n    Optimized version: 5.1348007 s\r\n    Modified fast version: 7.1492705 s\r\n    Modified slow version: 7.2952668 s","title":"Why is 2 * (i * i) faster than 2 * i * i in Java?","body":"<p>(Editor's note: this answer is contradicted by evidence from looking at the asm, as shown by another answer.  This was a guess backed up by some experiments, but it turned out not to be correct.)</p>\n<hr />\n<p>When the multiplication is <code>2 * (i * i)</code>, the JVM is able to factor out the multiplication by <code>2</code> from the loop, resulting in this equivalent but more efficient code:</p>\n<pre><code>int n = 0;\nfor (int i = 0; i &lt; 1000000000; i++) {\n    n += i * i;\n}\nn *= 2;\n</code></pre>\n<p>but when the multiplication is <code>(2 * i) * i</code>, the JVM doesn't optimize it since the multiplication by a constant is no longer right before the <code>n +=</code> addition.</p>\n<p>Here are a few reasons why I think this is the case:</p>\n<ul>\n<li>Adding an <code>if (n == 0) n = 1</code> statement at the start of the loop results in both versions being as efficient, since factoring out the multiplication no longer guarantees that the result will be the same</li>\n<li>The optimized version (by factoring out the multiplication by 2) is exactly as fast as the <code>2 * (i * i)</code> version</li>\n</ul>\n<p>Here is the test code that I used to draw these conclusions:</p>\n<pre><code>public static void main(String[] args) {\n    long fastVersion = 0;\n    long slowVersion = 0;\n    long optimizedVersion = 0;\n    long modifiedFastVersion = 0;\n    long modifiedSlowVersion = 0;\n\n    for (int i = 0; i &lt; 10; i++) {\n        fastVersion += fastVersion();\n        slowVersion += slowVersion();\n        optimizedVersion += optimizedVersion();\n        modifiedFastVersion += modifiedFastVersion();\n        modifiedSlowVersion += modifiedSlowVersion();\n    }\n\n    System.out.println(&quot;Fast version: &quot; + (double) fastVersion / 1000000000 + &quot; s&quot;);\n    System.out.println(&quot;Slow version: &quot; + (double) slowVersion / 1000000000 + &quot; s&quot;);\n    System.out.println(&quot;Optimized version: &quot; + (double) optimizedVersion / 1000000000 + &quot; s&quot;);\n    System.out.println(&quot;Modified fast version: &quot; + (double) modifiedFastVersion / 1000000000 + &quot; s&quot;);\n    System.out.println(&quot;Modified slow version: &quot; + (double) modifiedSlowVersion / 1000000000 + &quot; s&quot;);\n}\n\nprivate static long fastVersion() {\n    long startTime = System.nanoTime();\n    int n = 0;\n    for (int i = 0; i &lt; 1000000000; i++) {\n        n += 2 * (i * i);\n    }\n    return System.nanoTime() - startTime;\n}\n\nprivate static long slowVersion() {\n    long startTime = System.nanoTime();\n    int n = 0;\n    for (int i = 0; i &lt; 1000000000; i++) {\n        n += 2 * i * i;\n    }\n    return System.nanoTime() - startTime;\n}\n\nprivate static long optimizedVersion() {\n    long startTime = System.nanoTime();\n    int n = 0;\n    for (int i = 0; i &lt; 1000000000; i++) {\n        n += i * i;\n    }\n    n *= 2;\n    return System.nanoTime() - startTime;\n}\n\nprivate static long modifiedFastVersion() {\n    long startTime = System.nanoTime();\n    int n = 0;\n    for (int i = 0; i &lt; 1000000000; i++) {\n        if (n == 0) n = 1;\n        n += 2 * (i * i);\n    }\n    return System.nanoTime() - startTime;\n}\n\nprivate static long modifiedSlowVersion() {\n    long startTime = System.nanoTime();\n    int n = 0;\n    for (int i = 0; i &lt; 1000000000; i++) {\n        if (n == 0) n = 1;\n        n += 2 * i * i;\n    }\n    return System.nanoTime() - startTime;\n}\n</code></pre>\n<p>And here are the results:</p>\n<pre><code>Fast version: 5.7274411 s\nSlow version: 7.6190804 s\nOptimized version: 5.1348007 s\nModified fast version: 7.1492705 s\nModified slow version: 7.2952668 s\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1010971,"reputation":11524,"user_id":1023553,"accept_rate":59,"display_name":"NoDataFound"},"down_vote_count":3,"up_vote_count":18,"is_accepted":false,"score":15,"last_activity_date":1556118874,"creation_date":1543011050,"answer_id":53453413,"question_id":53452713,"body_markdown":"I tried a JMH using the default archetype: I also added an optimized version based on [Runemoro&#39;s explanation][1].\r\n\r\n    @State(Scope.Benchmark)\r\n    @Warmup(iterations = 2)\r\n    @Fork(1)\r\n    @Measurement(iterations = 10)\r\n    @OutputTimeUnit(TimeUnit.NANOSECONDS)\r\n    //@BenchmarkMode({ Mode.All })\r\n    @BenchmarkMode(Mode.AverageTime)\r\n    public class MyBenchmark {\r\n      @Param({ &quot;100&quot;, &quot;1000&quot;, &quot;1000000000&quot; })\r\n      private int size;\r\n\r\n      @Benchmark\r\n      public int two_square_i() {\r\n        int n = 0;\r\n        for (int i = 0; i &lt; size; i++) {\r\n          n += 2 * (i * i);\r\n        }\r\n        return n;\r\n      }\r\n\r\n      @Benchmark\r\n      public int square_i_two() {\r\n        int n = 0;\r\n        for (int i = 0; i &lt; size; i++) {\r\n          n += i * i;\r\n        }\r\n        return 2*n;\r\n      }\r\n\r\n      @Benchmark\r\n      public int two_i_() {\r\n        int n = 0;\r\n        for (int i = 0; i &lt; size; i++) {\r\n          n += 2 * i * i;\r\n        }\r\n        return n;\r\n      }\r\n    }\r\n\r\nThe result are here:\r\n\r\n    Benchmark                           (size)  Mode  Samples          Score   Score error  Units\r\n    o.s.MyBenchmark.square_i_two           100  avgt       10         58,062         1,410  ns/op\r\n    o.s.MyBenchmark.square_i_two          1000  avgt       10        547,393        12,851  ns/op\r\n    o.s.MyBenchmark.square_i_two    1000000000  avgt       10  540343681,267  16795210,324  ns/op\r\n    o.s.MyBenchmark.two_i_                 100  avgt       10         87,491         2,004  ns/op\r\n    o.s.MyBenchmark.two_i_                1000  avgt       10       1015,388        30,313  ns/op\r\n    o.s.MyBenchmark.two_i_          1000000000  avgt       10  967100076,600  24929570,556  ns/op\r\n    o.s.MyBenchmark.two_square_i           100  avgt       10         70,715         2,107  ns/op\r\n    o.s.MyBenchmark.two_square_i          1000  avgt       10        686,977        24,613  ns/op\r\n    o.s.MyBenchmark.two_square_i    1000000000  avgt       10  652736811,450  27015580,488  ns/op\r\n\r\nOn my PC ([Core&amp;nbsp;i7][2] 860 - it is doing nothing much apart from reading on my smartphone):\r\n\r\n- `n += i*i` then `n*2` is first\r\n- `2 * (i * i)` is second.\r\n\r\nThe JVM is clearly not optimizing the same way than a human does (based on Runemoro&#39;s answer).\r\n\r\nNow then, reading bytecode: `javap -c -v ./target/classes/org/sample/MyBenchmark.class`\r\n\r\n- Differences between 2*(i*i) (left) and 2*i*i (right) here: https://www.diffchecker.com/cvSFppWI\r\n- Differences between 2*(i*i) and the optimized version here: https://www.diffchecker.com/I1XFu5dP\r\n\r\nI am not expert on bytecode, but we `iload_2` before we `imul`: that&#39;s probably where you get the difference: I can suppose that the JVM optimize reading `i` twice (`i` is already here, and there is no need to load it again) whilst in the `2*i*i` it can&#39;t.\r\n\r\n  [1]: https://stackoverflow.com/questions/53452713/why-is-2-i-i-faster-than-2-i-i-in-java/53453240#53453240\r\n  [2]: https://en.wikipedia.org/wiki/Intel_Core#Core_i7\r\n","title":"Why is 2 * (i * i) faster than 2 * i * i in Java?","body":"<p>I tried a JMH using the default archetype: I also added an optimized version based on <a href=\"https://stackoverflow.com/questions/53452713/why-is-2-i-i-faster-than-2-i-i-in-java/53453240#53453240\">Runemoro's explanation</a>.</p>\n\n<pre><code>@State(Scope.Benchmark)\n@Warmup(iterations = 2)\n@Fork(1)\n@Measurement(iterations = 10)\n@OutputTimeUnit(TimeUnit.NANOSECONDS)\n//@BenchmarkMode({ Mode.All })\n@BenchmarkMode(Mode.AverageTime)\npublic class MyBenchmark {\n  @Param({ \"100\", \"1000\", \"1000000000\" })\n  private int size;\n\n  @Benchmark\n  public int two_square_i() {\n    int n = 0;\n    for (int i = 0; i &lt; size; i++) {\n      n += 2 * (i * i);\n    }\n    return n;\n  }\n\n  @Benchmark\n  public int square_i_two() {\n    int n = 0;\n    for (int i = 0; i &lt; size; i++) {\n      n += i * i;\n    }\n    return 2*n;\n  }\n\n  @Benchmark\n  public int two_i_() {\n    int n = 0;\n    for (int i = 0; i &lt; size; i++) {\n      n += 2 * i * i;\n    }\n    return n;\n  }\n}\n</code></pre>\n\n<p>The result are here:</p>\n\n<pre><code>Benchmark                           (size)  Mode  Samples          Score   Score error  Units\no.s.MyBenchmark.square_i_two           100  avgt       10         58,062         1,410  ns/op\no.s.MyBenchmark.square_i_two          1000  avgt       10        547,393        12,851  ns/op\no.s.MyBenchmark.square_i_two    1000000000  avgt       10  540343681,267  16795210,324  ns/op\no.s.MyBenchmark.two_i_                 100  avgt       10         87,491         2,004  ns/op\no.s.MyBenchmark.two_i_                1000  avgt       10       1015,388        30,313  ns/op\no.s.MyBenchmark.two_i_          1000000000  avgt       10  967100076,600  24929570,556  ns/op\no.s.MyBenchmark.two_square_i           100  avgt       10         70,715         2,107  ns/op\no.s.MyBenchmark.two_square_i          1000  avgt       10        686,977        24,613  ns/op\no.s.MyBenchmark.two_square_i    1000000000  avgt       10  652736811,450  27015580,488  ns/op\n</code></pre>\n\n<p>On my PC (<a href=\"https://en.wikipedia.org/wiki/Intel_Core#Core_i7\" rel=\"nofollow noreferrer\">Core&nbsp;i7</a> 860 - it is doing nothing much apart from reading on my smartphone):</p>\n\n<ul>\n<li><code>n += i*i</code> then <code>n*2</code> is first</li>\n<li><code>2 * (i * i)</code> is second.</li>\n</ul>\n\n<p>The JVM is clearly not optimizing the same way than a human does (based on Runemoro's answer).</p>\n\n<p>Now then, reading bytecode: <code>javap -c -v ./target/classes/org/sample/MyBenchmark.class</code></p>\n\n<ul>\n<li>Differences between 2*(i*i) (left) and 2*i*i (right) here: <a href=\"https://www.diffchecker.com/cvSFppWI\" rel=\"nofollow noreferrer\">https://www.diffchecker.com/cvSFppWI</a></li>\n<li>Differences between 2*(i*i) and the optimized version here: <a href=\"https://www.diffchecker.com/I1XFu5dP\" rel=\"nofollow noreferrer\">https://www.diffchecker.com/I1XFu5dP</a></li>\n</ul>\n\n<p>I am not expert on bytecode, but we <code>iload_2</code> before we <code>imul</code>: that's probably where you get the difference: I can suppose that the JVM optimize reading <code>i</code> twice (<code>i</code> is already here, and there is no need to load it again) whilst in the <code>2*i*i</code> it can't.</p>\n"},{"tags":[],"owner":{"account_id":225072,"reputation":81659,"user_id":485343,"accept_rate":75,"display_name":"rustyx"},"down_vote_count":2,"up_vote_count":1248,"is_accepted":true,"score":1246,"last_activity_date":1593762904,"creation_date":1543012827,"answer_id":53453588,"question_id":53452713,"body_markdown":"There is a slight difference in the ordering of the bytecode.\r\n\r\n`2 * (i * i)`:\r\n\r\n         iconst_2\r\n         iload0\r\n         iload0\r\n         imul\r\n         imul\r\n         iadd\r\n\r\nvs `2 * i * i`:\r\n\r\n         iconst_2\r\n         iload0\r\n         imul\r\n         iload0\r\n         imul\r\n         iadd\r\n\r\nAt first sight this should not make a difference; if anything the second version is more optimal since it uses one slot less.\r\n\r\nSo we need to dig deeper into the lower level (JIT)&lt;sup&gt;1&lt;/sup&gt;.\r\n\r\nRemember that JIT tends to unroll small loops very aggressively. Indeed we observe a 16x unrolling for the `2 * (i * i)` case:\r\n\r\n    030   B2: #\tB2 B3 &lt;- B1 B2 \tLoop: B2-B2 inner main of N18 Freq: 1e+006\r\n    030   \taddl    R11, RBP\t# int\r\n    033   \tmovl    RBP, R13\t# spill\r\n    036   \taddl    RBP, #14\t# int\r\n    039   \timull   RBP, RBP\t# int\r\n    03c   \tmovl    R9, R13\t# spill\r\n    03f   \taddl    R9, #13\t# int\r\n    043   \timull   R9, R9\t# int\r\n    047   \tsall    RBP, #1\r\n    049   \tsall    R9, #1\r\n    04c   \tmovl    R8, R13\t# spill\r\n    04f   \taddl    R8, #15\t# int\r\n    053   \tmovl    R10, R8\t# spill\r\n    056   \tmovdl   XMM1, R8\t# spill\r\n    05b   \timull   R10, R8\t# int\r\n    05f   \tmovl    R8, R13\t# spill\r\n    062   \taddl    R8, #12\t# int\r\n    066   \timull   R8, R8\t# int\r\n    06a   \tsall    R10, #1\r\n    06d   \tmovl    [rsp + #32], R10\t# spill\r\n    072   \tsall    R8, #1\r\n    075   \tmovl    RBX, R13\t# spill\r\n    078   \taddl    RBX, #11\t# int\r\n    07b   \timull   RBX, RBX\t# int\r\n    07e   \tmovl    RCX, R13\t# spill\r\n    081   \taddl    RCX, #10\t# int\r\n    084   \timull   RCX, RCX\t# int\r\n    087   \tsall    RBX, #1\r\n    089   \tsall    RCX, #1\r\n    08b   \tmovl    RDX, R13\t# spill\r\n    08e   \taddl    RDX, #8\t# int\r\n    091   \timull   RDX, RDX\t# int\r\n    094   \tmovl    RDI, R13\t# spill\r\n    097   \taddl    RDI, #7\t# int\r\n    09a   \timull   RDI, RDI\t# int\r\n    09d   \tsall    RDX, #1\r\n    09f   \tsall    RDI, #1\r\n    0a1   \tmovl    RAX, R13\t# spill\r\n    0a4   \taddl    RAX, #6\t# int\r\n    0a7   \timull   RAX, RAX\t# int\r\n    0aa   \tmovl    RSI, R13\t# spill\r\n    0ad   \taddl    RSI, #4\t# int\r\n    0b0   \timull   RSI, RSI\t# int\r\n    0b3   \tsall    RAX, #1\r\n    0b5   \tsall    RSI, #1\r\n    0b7   \tmovl    R10, R13\t# spill\r\n    0ba   \taddl    R10, #2\t# int\r\n    0be   \timull   R10, R10\t# int\r\n    0c2   \tmovl    R14, R13\t# spill\r\n    0c5   \tincl    R14\t# int\r\n    0c8   \timull   R14, R14\t# int\r\n    0cc   \tsall    R10, #1\r\n    0cf   \tsall    R14, #1\r\n    0d2   \taddl    R14, R11\t# int\r\n    0d5   \taddl    R14, R10\t# int\r\n    0d8   \tmovl    R10, R13\t# spill\r\n    0db   \taddl    R10, #3\t# int\r\n    0df   \timull   R10, R10\t# int\r\n    0e3   \tmovl    R11, R13\t# spill\r\n    0e6   \taddl    R11, #5\t# int\r\n    0ea   \timull   R11, R11\t# int\r\n    0ee   \tsall    R10, #1\r\n    0f1   \taddl    R10, R14\t# int\r\n    0f4   \taddl    R10, RSI\t# int\r\n    0f7   \tsall    R11, #1\r\n    0fa   \taddl    R11, R10\t# int\r\n    0fd   \taddl    R11, RAX\t# int\r\n    100   \taddl    R11, RDI\t# int\r\n    103   \taddl    R11, RDX\t# int\r\n    106   \tmovl    R10, R13\t# spill\r\n    109   \taddl    R10, #9\t# int\r\n    10d   \timull   R10, R10\t# int\r\n    111   \tsall    R10, #1\r\n    114   \taddl    R10, R11\t# int\r\n    117   \taddl    R10, RCX\t# int\r\n    11a   \taddl    R10, RBX\t# int\r\n    11d   \taddl    R10, R8\t# int\r\n    120   \taddl    R9, R10\t# int\r\n    123   \taddl    RBP, R9\t# int\r\n    126   \taddl    RBP, [RSP + #32 (32-bit)]\t# int\r\n    12a   \taddl    R13, #16\t# int\r\n    12e   \tmovl    R11, R13\t# spill\r\n    131   \timull   R11, R13\t# int\r\n    135   \tsall    R11, #1\r\n    138   \tcmpl    R13, #999999985\r\n    13f   \tjl     B2\t# loop end  P=1.000000 C=6554623.000000\r\n\r\nWe see that there is 1 register that is &quot;spilled&quot; onto the stack.\r\n\r\nAnd for the `2 * i * i` version:\r\n\r\n\t05a   B3: #\tB2 B4 &lt;- B1 B2 \tLoop: B3-B2 inner main of N18 Freq: 1e+006\r\n\t05a   \taddl    RBX, R11\t# int\r\n\t05d   \tmovl    [rsp + #32], RBX\t# spill\r\n\t061   \tmovl    R11, R8\t# spill\r\n\t064   \taddl    R11, #15\t# int\r\n\t068   \tmovl    [rsp + #36], R11\t# spill\r\n\t06d   \tmovl    R11, R8\t# spill\r\n\t070   \taddl    R11, #14\t# int\r\n\t074   \tmovl    R10, R9\t# spill\r\n\t077   \taddl    R10, #16\t# int\r\n\t07b   \tmovdl   XMM2, R10\t# spill\r\n\t080   \tmovl    RCX, R9\t# spill\r\n\t083   \taddl    RCX, #14\t# int\r\n\t086   \tmovdl   XMM1, RCX\t# spill\r\n\t08a   \tmovl    R10, R9\t# spill\r\n\t08d   \taddl    R10, #12\t# int\r\n\t091   \tmovdl   XMM4, R10\t# spill\r\n\t096   \tmovl    RCX, R9\t# spill\r\n\t099   \taddl    RCX, #10\t# int\r\n\t09c   \tmovdl   XMM6, RCX\t# spill\r\n\t0a0   \tmovl    RBX, R9\t# spill\r\n\t0a3   \taddl    RBX, #8\t# int\r\n\t0a6   \tmovl    RCX, R9\t# spill\r\n\t0a9   \taddl    RCX, #6\t# int\r\n\t0ac   \tmovl    RDX, R9\t# spill\r\n\t0af   \taddl    RDX, #4\t# int\r\n\t0b2   \taddl    R9, #2\t# int\r\n\t0b6   \tmovl    R10, R14\t# spill\r\n\t0b9   \taddl    R10, #22\t# int\r\n\t0bd   \tmovdl   XMM3, R10\t# spill\r\n\t0c2   \tmovl    RDI, R14\t# spill\r\n\t0c5   \taddl    RDI, #20\t# int\r\n\t0c8   \tmovl    RAX, R14\t# spill\r\n\t0cb   \taddl    RAX, #32\t# int\r\n\t0ce   \tmovl    RSI, R14\t# spill\r\n\t0d1   \taddl    RSI, #18\t# int\r\n\t0d4   \tmovl    R13, R14\t# spill\r\n\t0d7   \taddl    R13, #24\t# int\r\n\t0db   \tmovl    R10, R14\t# spill\r\n\t0de   \taddl    R10, #26\t# int\r\n\t0e2   \tmovl    [rsp + #40], R10\t# spill\r\n\t0e7   \tmovl    RBP, R14\t# spill\r\n\t0ea   \taddl    RBP, #28\t# int\r\n\t0ed   \timull   RBP, R11\t# int\r\n\t0f1   \taddl    R14, #30\t# int\r\n\t0f5   \timull   R14, [RSP + #36 (32-bit)]\t# int\r\n\t0fb   \tmovl    R10, R8\t# spill\r\n\t0fe   \taddl    R10, #11\t# int\r\n\t102   \tmovdl   R11, XMM3\t# spill\r\n\t107   \timull   R11, R10\t# int\r\n\t10b   \tmovl    [rsp + #44], R11\t# spill\r\n\t110   \tmovl    R10, R8\t# spill\r\n\t113   \taddl    R10, #10\t# int\r\n\t117   \timull   RDI, R10\t# int\r\n\t11b   \tmovl    R11, R8\t# spill\r\n\t11e   \taddl    R11, #8\t# int\r\n\t122   \tmovdl   R10, XMM2\t# spill\r\n\t127   \timull   R10, R11\t# int\r\n\t12b   \tmovl    [rsp + #48], R10\t# spill\r\n\t130   \tmovl    R10, R8\t# spill\r\n\t133   \taddl    R10, #7\t# int\r\n\t137   \tmovdl   R11, XMM1\t# spill\r\n\t13c   \timull   R11, R10\t# int\r\n\t140   \tmovl    [rsp + #52], R11\t# spill\r\n\t145   \tmovl    R11, R8\t# spill\r\n\t148   \taddl    R11, #6\t# int\r\n\t14c   \tmovdl   R10, XMM4\t# spill\r\n\t151   \timull   R10, R11\t# int\r\n\t155   \tmovl    [rsp + #56], R10\t# spill\r\n\t15a   \tmovl    R10, R8\t# spill\r\n\t15d   \taddl    R10, #5\t# int\r\n\t161   \tmovdl   R11, XMM6\t# spill\r\n\t166   \timull   R11, R10\t# int\r\n\t16a   \tmovl    [rsp + #60], R11\t# spill\r\n\t16f   \tmovl    R11, R8\t# spill\r\n\t172   \taddl    R11, #4\t# int\r\n\t176   \timull   RBX, R11\t# int\r\n\t17a   \tmovl    R11, R8\t# spill\r\n\t17d   \taddl    R11, #3\t# int\r\n\t181   \timull   RCX, R11\t# int\r\n\t185   \tmovl    R10, R8\t# spill\r\n\t188   \taddl    R10, #2\t# int\r\n\t18c   \timull   RDX, R10\t# int\r\n\t190   \tmovl    R11, R8\t# spill\r\n\t193   \tincl    R11\t# int\r\n\t196   \timull   R9, R11\t# int\r\n\t19a   \taddl    R9, [RSP + #32 (32-bit)]\t# int\r\n\t19f   \taddl    R9, RDX\t# int\r\n\t1a2   \taddl    R9, RCX\t# int\r\n\t1a5   \taddl    R9, RBX\t# int\r\n\t1a8   \taddl    R9, [RSP + #60 (32-bit)]\t# int\r\n\t1ad   \taddl    R9, [RSP + #56 (32-bit)]\t# int\r\n\t1b2   \taddl    R9, [RSP + #52 (32-bit)]\t# int\r\n\t1b7   \taddl    R9, [RSP + #48 (32-bit)]\t# int\r\n\t1bc   \tmovl    R10, R8\t# spill\r\n\t1bf   \taddl    R10, #9\t# int\r\n\t1c3   \timull   R10, RSI\t# int\r\n\t1c7   \taddl    R10, R9\t# int\r\n\t1ca   \taddl    R10, RDI\t# int\r\n\t1cd   \taddl    R10, [RSP + #44 (32-bit)]\t# int\r\n\t1d2   \tmovl    R11, R8\t# spill\r\n\t1d5   \taddl    R11, #12\t# int\r\n\t1d9   \timull   R13, R11\t# int\r\n\t1dd   \taddl    R13, R10\t# int\r\n\t1e0   \tmovl    R10, R8\t# spill\r\n\t1e3   \taddl    R10, #13\t# int\r\n\t1e7   \timull   R10, [RSP + #40 (32-bit)]\t# int\r\n\t1ed   \taddl    R10, R13\t# int\r\n\t1f0   \taddl    RBP, R10\t# int\r\n\t1f3   \taddl    R14, RBP\t# int\r\n\t1f6   \tmovl    R10, R8\t# spill\r\n\t1f9   \taddl    R10, #16\t# int\r\n\t1fd   \tcmpl    R10, #999999985\r\n\t204   \tjl     B2\t# loop end  P=1.000000 C=7419903.000000\r\n\r\nHere we observe much more &quot;spilling&quot; and more accesses to the stack `[RSP + ...]`, due to more intermediate results that need to be preserved.\r\n\r\nThus the answer to the question is simple: `2 * (i * i)` is faster than `2 * i * i` because the JIT generates more optimal assembly code for the first case.\r\n\r\n---\r\n\r\nBut of course it is obvious that neither the first nor the second version is any good; the loop could really benefit from vectorization, since any x86-64 CPU has at least SSE2 support.\r\n\r\nSo it&#39;s an issue of the optimizer; as is often the case, it unrolls too aggressively and shoots itself in the foot, all the while missing out on various other opportunities.\r\n\r\nIn fact, modern x86-64 CPUs break down the instructions further into micro-ops (&amp;micro;ops) and with features like register renaming, &amp;micro;op caches and loop buffers, loop optimization takes a lot more finesse than a simple unrolling for optimal performance. [According to Agner Fog&#39;s optimization guide][1]:\r\n\r\n&gt; The gain in performance due to the &amp;micro;op cache can be quite\r\n&gt; considerable if the average instruction length is more than 4 bytes.\r\n&gt; The following methods of optimizing the use of the &amp;micro;op cache may\r\n&gt; be considered:\r\n&gt; \r\n&gt; * Make sure that critical loops are small enough to fit into the &#181;op cache.\r\n&gt; * Align the most critical loop entries and function entries by 32.\r\n&gt; * Avoid unnecessary loop unrolling.\r\n&gt; * Avoid instructions that have extra load time  \r\n&gt; . . .\r\n\r\nRegarding those load times - [even the fastest L1D hit costs 4 cycles][2], an extra register and &amp;micro;op, so yes, even a few accesses to memory will hurt performance in tight loops.\r\n\r\nBut back to the vectorization opportunity - to see how fast it can be, [we can compile a similar C application with GCC][3], which outright vectorizes it (AVX2 is shown, SSE2 is similar)&lt;sup&gt;2&lt;/sup&gt;:\r\n\r\n      vmovdqa ymm0, YMMWORD PTR .LC0[rip]\r\n      vmovdqa ymm3, YMMWORD PTR .LC1[rip]\r\n      xor eax, eax\r\n      vpxor xmm2, xmm2, xmm2\r\n    .L2:\r\n      vpmulld ymm1, ymm0, ymm0\r\n      inc eax\r\n      vpaddd ymm0, ymm0, ymm3\r\n      vpslld ymm1, ymm1, 1\r\n      vpaddd ymm2, ymm2, ymm1\r\n      cmp eax, 125000000      ; 8 calculations per iteration\r\n      jne .L2\r\n      vmovdqa xmm0, xmm2\r\n      vextracti128 xmm2, ymm2, 1\r\n      vpaddd xmm2, xmm0, xmm2\r\n      vpsrldq xmm0, xmm2, 8\r\n      vpaddd xmm0, xmm2, xmm0\r\n      vpsrldq xmm1, xmm0, 4\r\n      vpaddd xmm0, xmm0, xmm1\r\n      vmovd eax, xmm0\r\n      vzeroupper\r\n\r\nWith run times:\r\n\r\n* SSE: 0.24 s, or 2 times as fast.\r\n* AVX: 0.15 s, or 3 times as fast.\r\n* AVX2: 0.08 s, or 5 times as fast.\r\n\r\n---\r\n\r\n&lt;sup&gt;1&lt;/sup&gt; &lt;sub&gt;To get JIT generated assembly output, [get a debug JVM][4] and run with `-XX:+PrintOptoAssembly`&lt;/sub&gt;\r\n\r\n&lt;sup&gt;2&lt;/sup&gt; &lt;sub&gt;The C version is compiled with the `-fwrapv` flag, which enables GCC to treat signed integer overflow as a two&#39;s-complement wrap-around.&lt;/sub&gt;\r\n\r\n  [1]: https://www.agner.org/optimize/microarchitecture.pdf\r\n  [2]: https://stackoverflow.com/questions/4087280/approximate-cost-to-access-various-caches-and-main-memory\r\n  [3]: https://gcc.godbolt.org/z/DdEDny\r\n  [4]: https://github.com/ojdkbuild/ojdkbuild/releases","title":"Why is 2 * (i * i) faster than 2 * i * i in Java?","body":"<p>There is a slight difference in the ordering of the bytecode.</p>\n<p><code>2 * (i * i)</code>:</p>\n<pre><code>     iconst_2\n     iload0\n     iload0\n     imul\n     imul\n     iadd\n</code></pre>\n<p>vs <code>2 * i * i</code>:</p>\n<pre><code>     iconst_2\n     iload0\n     imul\n     iload0\n     imul\n     iadd\n</code></pre>\n<p>At first sight this should not make a difference; if anything the second version is more optimal since it uses one slot less.</p>\n<p>So we need to dig deeper into the lower level (JIT)<sup>1</sup>.</p>\n<p>Remember that JIT tends to unroll small loops very aggressively. Indeed we observe a 16x unrolling for the <code>2 * (i * i)</code> case:</p>\n<pre><code>030   B2: # B2 B3 &lt;- B1 B2  Loop: B2-B2 inner main of N18 Freq: 1e+006\n030     addl    R11, RBP    # int\n033     movl    RBP, R13    # spill\n036     addl    RBP, #14    # int\n039     imull   RBP, RBP    # int\n03c     movl    R9, R13 # spill\n03f     addl    R9, #13 # int\n043     imull   R9, R9  # int\n047     sall    RBP, #1\n049     sall    R9, #1\n04c     movl    R8, R13 # spill\n04f     addl    R8, #15 # int\n053     movl    R10, R8 # spill\n056     movdl   XMM1, R8    # spill\n05b     imull   R10, R8 # int\n05f     movl    R8, R13 # spill\n062     addl    R8, #12 # int\n066     imull   R8, R8  # int\n06a     sall    R10, #1\n06d     movl    [rsp + #32], R10    # spill\n072     sall    R8, #1\n075     movl    RBX, R13    # spill\n078     addl    RBX, #11    # int\n07b     imull   RBX, RBX    # int\n07e     movl    RCX, R13    # spill\n081     addl    RCX, #10    # int\n084     imull   RCX, RCX    # int\n087     sall    RBX, #1\n089     sall    RCX, #1\n08b     movl    RDX, R13    # spill\n08e     addl    RDX, #8 # int\n091     imull   RDX, RDX    # int\n094     movl    RDI, R13    # spill\n097     addl    RDI, #7 # int\n09a     imull   RDI, RDI    # int\n09d     sall    RDX, #1\n09f     sall    RDI, #1\n0a1     movl    RAX, R13    # spill\n0a4     addl    RAX, #6 # int\n0a7     imull   RAX, RAX    # int\n0aa     movl    RSI, R13    # spill\n0ad     addl    RSI, #4 # int\n0b0     imull   RSI, RSI    # int\n0b3     sall    RAX, #1\n0b5     sall    RSI, #1\n0b7     movl    R10, R13    # spill\n0ba     addl    R10, #2 # int\n0be     imull   R10, R10    # int\n0c2     movl    R14, R13    # spill\n0c5     incl    R14 # int\n0c8     imull   R14, R14    # int\n0cc     sall    R10, #1\n0cf     sall    R14, #1\n0d2     addl    R14, R11    # int\n0d5     addl    R14, R10    # int\n0d8     movl    R10, R13    # spill\n0db     addl    R10, #3 # int\n0df     imull   R10, R10    # int\n0e3     movl    R11, R13    # spill\n0e6     addl    R11, #5 # int\n0ea     imull   R11, R11    # int\n0ee     sall    R10, #1\n0f1     addl    R10, R14    # int\n0f4     addl    R10, RSI    # int\n0f7     sall    R11, #1\n0fa     addl    R11, R10    # int\n0fd     addl    R11, RAX    # int\n100     addl    R11, RDI    # int\n103     addl    R11, RDX    # int\n106     movl    R10, R13    # spill\n109     addl    R10, #9 # int\n10d     imull   R10, R10    # int\n111     sall    R10, #1\n114     addl    R10, R11    # int\n117     addl    R10, RCX    # int\n11a     addl    R10, RBX    # int\n11d     addl    R10, R8 # int\n120     addl    R9, R10 # int\n123     addl    RBP, R9 # int\n126     addl    RBP, [RSP + #32 (32-bit)]   # int\n12a     addl    R13, #16    # int\n12e     movl    R11, R13    # spill\n131     imull   R11, R13    # int\n135     sall    R11, #1\n138     cmpl    R13, #999999985\n13f     jl     B2   # loop end  P=1.000000 C=6554623.000000\n</code></pre>\n<p>We see that there is 1 register that is &quot;spilled&quot; onto the stack.</p>\n<p>And for the <code>2 * i * i</code> version:</p>\n<pre><code>05a   B3: # B2 B4 &lt;- B1 B2  Loop: B3-B2 inner main of N18 Freq: 1e+006\n05a     addl    RBX, R11    # int\n05d     movl    [rsp + #32], RBX    # spill\n061     movl    R11, R8 # spill\n064     addl    R11, #15    # int\n068     movl    [rsp + #36], R11    # spill\n06d     movl    R11, R8 # spill\n070     addl    R11, #14    # int\n074     movl    R10, R9 # spill\n077     addl    R10, #16    # int\n07b     movdl   XMM2, R10   # spill\n080     movl    RCX, R9 # spill\n083     addl    RCX, #14    # int\n086     movdl   XMM1, RCX   # spill\n08a     movl    R10, R9 # spill\n08d     addl    R10, #12    # int\n091     movdl   XMM4, R10   # spill\n096     movl    RCX, R9 # spill\n099     addl    RCX, #10    # int\n09c     movdl   XMM6, RCX   # spill\n0a0     movl    RBX, R9 # spill\n0a3     addl    RBX, #8 # int\n0a6     movl    RCX, R9 # spill\n0a9     addl    RCX, #6 # int\n0ac     movl    RDX, R9 # spill\n0af     addl    RDX, #4 # int\n0b2     addl    R9, #2  # int\n0b6     movl    R10, R14    # spill\n0b9     addl    R10, #22    # int\n0bd     movdl   XMM3, R10   # spill\n0c2     movl    RDI, R14    # spill\n0c5     addl    RDI, #20    # int\n0c8     movl    RAX, R14    # spill\n0cb     addl    RAX, #32    # int\n0ce     movl    RSI, R14    # spill\n0d1     addl    RSI, #18    # int\n0d4     movl    R13, R14    # spill\n0d7     addl    R13, #24    # int\n0db     movl    R10, R14    # spill\n0de     addl    R10, #26    # int\n0e2     movl    [rsp + #40], R10    # spill\n0e7     movl    RBP, R14    # spill\n0ea     addl    RBP, #28    # int\n0ed     imull   RBP, R11    # int\n0f1     addl    R14, #30    # int\n0f5     imull   R14, [RSP + #36 (32-bit)]   # int\n0fb     movl    R10, R8 # spill\n0fe     addl    R10, #11    # int\n102     movdl   R11, XMM3   # spill\n107     imull   R11, R10    # int\n10b     movl    [rsp + #44], R11    # spill\n110     movl    R10, R8 # spill\n113     addl    R10, #10    # int\n117     imull   RDI, R10    # int\n11b     movl    R11, R8 # spill\n11e     addl    R11, #8 # int\n122     movdl   R10, XMM2   # spill\n127     imull   R10, R11    # int\n12b     movl    [rsp + #48], R10    # spill\n130     movl    R10, R8 # spill\n133     addl    R10, #7 # int\n137     movdl   R11, XMM1   # spill\n13c     imull   R11, R10    # int\n140     movl    [rsp + #52], R11    # spill\n145     movl    R11, R8 # spill\n148     addl    R11, #6 # int\n14c     movdl   R10, XMM4   # spill\n151     imull   R10, R11    # int\n155     movl    [rsp + #56], R10    # spill\n15a     movl    R10, R8 # spill\n15d     addl    R10, #5 # int\n161     movdl   R11, XMM6   # spill\n166     imull   R11, R10    # int\n16a     movl    [rsp + #60], R11    # spill\n16f     movl    R11, R8 # spill\n172     addl    R11, #4 # int\n176     imull   RBX, R11    # int\n17a     movl    R11, R8 # spill\n17d     addl    R11, #3 # int\n181     imull   RCX, R11    # int\n185     movl    R10, R8 # spill\n188     addl    R10, #2 # int\n18c     imull   RDX, R10    # int\n190     movl    R11, R8 # spill\n193     incl    R11 # int\n196     imull   R9, R11 # int\n19a     addl    R9, [RSP + #32 (32-bit)]    # int\n19f     addl    R9, RDX # int\n1a2     addl    R9, RCX # int\n1a5     addl    R9, RBX # int\n1a8     addl    R9, [RSP + #60 (32-bit)]    # int\n1ad     addl    R9, [RSP + #56 (32-bit)]    # int\n1b2     addl    R9, [RSP + #52 (32-bit)]    # int\n1b7     addl    R9, [RSP + #48 (32-bit)]    # int\n1bc     movl    R10, R8 # spill\n1bf     addl    R10, #9 # int\n1c3     imull   R10, RSI    # int\n1c7     addl    R10, R9 # int\n1ca     addl    R10, RDI    # int\n1cd     addl    R10, [RSP + #44 (32-bit)]   # int\n1d2     movl    R11, R8 # spill\n1d5     addl    R11, #12    # int\n1d9     imull   R13, R11    # int\n1dd     addl    R13, R10    # int\n1e0     movl    R10, R8 # spill\n1e3     addl    R10, #13    # int\n1e7     imull   R10, [RSP + #40 (32-bit)]   # int\n1ed     addl    R10, R13    # int\n1f0     addl    RBP, R10    # int\n1f3     addl    R14, RBP    # int\n1f6     movl    R10, R8 # spill\n1f9     addl    R10, #16    # int\n1fd     cmpl    R10, #999999985\n204     jl     B2   # loop end  P=1.000000 C=7419903.000000\n</code></pre>\n<p>Here we observe much more &quot;spilling&quot; and more accesses to the stack <code>[RSP + ...]</code>, due to more intermediate results that need to be preserved.</p>\n<p>Thus the answer to the question is simple: <code>2 * (i * i)</code> is faster than <code>2 * i * i</code> because the JIT generates more optimal assembly code for the first case.</p>\n<hr />\n<p>But of course it is obvious that neither the first nor the second version is any good; the loop could really benefit from vectorization, since any x86-64 CPU has at least SSE2 support.</p>\n<p>So it's an issue of the optimizer; as is often the case, it unrolls too aggressively and shoots itself in the foot, all the while missing out on various other opportunities.</p>\n<p>In fact, modern x86-64 CPUs break down the instructions further into micro-ops (ops) and with features like register renaming, op caches and loop buffers, loop optimization takes a lot more finesse than a simple unrolling for optimal performance. <a href=\"https://www.agner.org/optimize/microarchitecture.pdf\" rel=\"noreferrer\">According to Agner Fog's optimization guide</a>:</p>\n<blockquote>\n<p>The gain in performance due to the op cache can be quite\nconsiderable if the average instruction length is more than 4 bytes.\nThe following methods of optimizing the use of the op cache may\nbe considered:</p>\n<ul>\n<li>Make sure that critical loops are small enough to fit into the op cache.</li>\n<li>Align the most critical loop entries and function entries by 32.</li>\n<li>Avoid unnecessary loop unrolling.</li>\n<li>Avoid instructions that have extra load time<br />\n. . .</li>\n</ul>\n</blockquote>\n<p>Regarding those load times - <a href=\"https://stackoverflow.com/questions/4087280/approximate-cost-to-access-various-caches-and-main-memory\">even the fastest L1D hit costs 4 cycles</a>, an extra register and op, so yes, even a few accesses to memory will hurt performance in tight loops.</p>\n<p>But back to the vectorization opportunity - to see how fast it can be, <a href=\"https://gcc.godbolt.org/z/DdEDny\" rel=\"noreferrer\">we can compile a similar C application with GCC</a>, which outright vectorizes it (AVX2 is shown, SSE2 is similar)<sup>2</sup>:</p>\n<pre><code>  vmovdqa ymm0, YMMWORD PTR .LC0[rip]\n  vmovdqa ymm3, YMMWORD PTR .LC1[rip]\n  xor eax, eax\n  vpxor xmm2, xmm2, xmm2\n.L2:\n  vpmulld ymm1, ymm0, ymm0\n  inc eax\n  vpaddd ymm0, ymm0, ymm3\n  vpslld ymm1, ymm1, 1\n  vpaddd ymm2, ymm2, ymm1\n  cmp eax, 125000000      ; 8 calculations per iteration\n  jne .L2\n  vmovdqa xmm0, xmm2\n  vextracti128 xmm2, ymm2, 1\n  vpaddd xmm2, xmm0, xmm2\n  vpsrldq xmm0, xmm2, 8\n  vpaddd xmm0, xmm2, xmm0\n  vpsrldq xmm1, xmm0, 4\n  vpaddd xmm0, xmm0, xmm1\n  vmovd eax, xmm0\n  vzeroupper\n</code></pre>\n<p>With run times:</p>\n<ul>\n<li>SSE: 0.24 s, or 2 times as fast.</li>\n<li>AVX: 0.15 s, or 3 times as fast.</li>\n<li>AVX2: 0.08 s, or 5 times as fast.</li>\n</ul>\n<hr />\n<p><sup>1</sup> <sub>To get JIT generated assembly output, <a href=\"https://github.com/ojdkbuild/ojdkbuild/releases\" rel=\"noreferrer\">get a debug JVM</a> and run with <code>-XX:+PrintOptoAssembly</code></sub></p>\n<p><sup>2</sup> <sub>The C version is compiled with the <code>-fwrapv</code> flag, which enables GCC to treat signed integer overflow as a two's-complement wrap-around.</sub></p>\n"},{"tags":[],"owner":{"account_id":5987632,"reputation":476,"user_id":4704966,"display_name":"Puzzled"},"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1543169881,"creation_date":1543169881,"answer_id":53470476,"question_id":53452713,"body_markdown":"[Kasperd][1] asked in a comment of the accepted answer:\r\n&gt; The Java and C examples use quite different register names. Are both example using the AMD64 ISA?\r\n\r\n    xor edx, edx\r\n    xor eax, eax\r\n    .L2:\r\n    mov ecx, edx\r\n    imul ecx, edx\r\n    add edx, 1\r\n    lea eax, [rax+rcx*2]\r\n    cmp edx, 1000000000\r\n    jne .L2\r\n\r\nI don&#39;t have enough reputation to answer this in the comments, but these are the same ISA. It&#39;s worth pointing out that the GCC version uses 32-bit integer logic and the JVM compiled version uses 64-bit integer logic internally.\r\n\r\nR8 to R15 are just new X86_64 [registers][2]. EAX to EDX are the lower parts of the RAX to RDX general purpose registers. The important part in the answer is that the GCC version is not unrolled. It simply executes one round of the loop per actual machine code loop. While the JVM version has 16 rounds of the loop in one physical loop (based on rustyx answer, I did not reinterpret the assembly). This is one of the reasons why there are more registers being used since the loop body is actually 16 times longer.\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/3476849/kasperd\r\n  [2]: https://learn.microsoft.com/en-us/windows-hardware/drivers/debugger/x64-architecture","title":"Why is 2 * (i * i) faster than 2 * i * i in Java?","body":"<p><a href=\"https://stackoverflow.com/users/3476849/kasperd\">Kasperd</a> asked in a comment of the accepted answer:</p>\n\n<blockquote>\n  <p>The Java and C examples use quite different register names. Are both example using the AMD64 ISA?</p>\n</blockquote>\n\n<pre><code>xor edx, edx\nxor eax, eax\n.L2:\nmov ecx, edx\nimul ecx, edx\nadd edx, 1\nlea eax, [rax+rcx*2]\ncmp edx, 1000000000\njne .L2\n</code></pre>\n\n<p>I don't have enough reputation to answer this in the comments, but these are the same ISA. It's worth pointing out that the GCC version uses 32-bit integer logic and the JVM compiled version uses 64-bit integer logic internally.</p>\n\n<p>R8 to R15 are just new X86_64 <a href=\"https://learn.microsoft.com/en-us/windows-hardware/drivers/debugger/x64-architecture\" rel=\"noreferrer\">registers</a>. EAX to EDX are the lower parts of the RAX to RDX general purpose registers. The important part in the answer is that the GCC version is not unrolled. It simply executes one round of the loop per actual machine code loop. While the JVM version has 16 rounds of the loop in one physical loop (based on rustyx answer, I did not reinterpret the assembly). This is one of the reasons why there are more registers being used since the loop body is actually 16 times longer.</p>\n"},{"tags":[],"owner":{"account_id":5685549,"reputation":350,"user_id":4495236,"display_name":"&#220;nsal Ers&#246;z"},"down_vote_count":2,"up_vote_count":33,"is_accepted":false,"score":31,"last_activity_date":1556119244,"creation_date":1543392750,"answer_id":53514863,"question_id":53452713,"body_markdown":"While not directly related to the question&#39;s environment, just for the curiosity, I did the same test on .NET Core 2.1, x64, release mode.\r\n\r\nHere is the interesting result, confirming similar phonomena (other way around) happening over the dark side of the force. Code:\r\n\r\n    static void Main(string[] args)\r\n    {\r\n        Stopwatch watch = new Stopwatch();\r\n\r\n        Console.WriteLine(&quot;2 * (i * i)&quot;);\r\n\r\n        for (int a = 0; a &lt; 10; a++)\r\n        {\r\n            int n = 0;\r\n\r\n            watch.Restart();\r\n\r\n            for (int i = 0; i &lt; 1000000000; i++)\r\n            {\r\n                n += 2 * (i * i);\r\n            }\r\n\r\n            watch.Stop();\r\n\r\n            Console.WriteLine($&quot;result:{n}, {watch.ElapsedMilliseconds} ms&quot;);\r\n        }\r\n\r\n        Console.WriteLine();\r\n        Console.WriteLine(&quot;2 * i * i&quot;);\r\n\r\n        for (int a = 0; a &lt; 10; a++)\r\n        {\r\n            int n = 0;\r\n\r\n            watch.Restart();\r\n\r\n            for (int i = 0; i &lt; 1000000000; i++)\r\n            {\r\n                n += 2 * i * i;\r\n            }\r\n\r\n            watch.Stop();\r\n\r\n            Console.WriteLine($&quot;result:{n}, {watch.ElapsedMilliseconds}ms&quot;);\r\n        }\r\n    }\r\n\r\nResult:\r\n\r\n2 * (i * i)\r\n\r\n- result:119860736, 438 ms\r\n- result:119860736, 433 ms\r\n- result:119860736, 437 ms\r\n- result:119860736, 435 ms\r\n- result:119860736, 436 ms\r\n- result:119860736, 435 ms\r\n- result:119860736, 435 ms\r\n- result:119860736, 439 ms\r\n- result:119860736, 436 ms\r\n- result:119860736, 437 ms\r\n\r\n2 * i * i\r\n\r\n- result:119860736, 417 ms\r\n- result:119860736, 417 ms\r\n- result:119860736, 417 ms\r\n- result:119860736, 418 ms\r\n- result:119860736, 418 ms\r\n- result:119860736, 417 ms\r\n- result:119860736, 418 ms\r\n- result:119860736, 416 ms\r\n- result:119860736, 417 ms\r\n- result:119860736, 418 ms\r\n\r\n\r\n","title":"Why is 2 * (i * i) faster than 2 * i * i in Java?","body":"<p>While not directly related to the question's environment, just for the curiosity, I did the same test on .NET Core 2.1, x64, release mode.</p>\n\n<p>Here is the interesting result, confirming similar phonomena (other way around) happening over the dark side of the force. Code:</p>\n\n<pre><code>static void Main(string[] args)\n{\n    Stopwatch watch = new Stopwatch();\n\n    Console.WriteLine(\"2 * (i * i)\");\n\n    for (int a = 0; a &lt; 10; a++)\n    {\n        int n = 0;\n\n        watch.Restart();\n\n        for (int i = 0; i &lt; 1000000000; i++)\n        {\n            n += 2 * (i * i);\n        }\n\n        watch.Stop();\n\n        Console.WriteLine($\"result:{n}, {watch.ElapsedMilliseconds} ms\");\n    }\n\n    Console.WriteLine();\n    Console.WriteLine(\"2 * i * i\");\n\n    for (int a = 0; a &lt; 10; a++)\n    {\n        int n = 0;\n\n        watch.Restart();\n\n        for (int i = 0; i &lt; 1000000000; i++)\n        {\n            n += 2 * i * i;\n        }\n\n        watch.Stop();\n\n        Console.WriteLine($\"result:{n}, {watch.ElapsedMilliseconds}ms\");\n    }\n}\n</code></pre>\n\n<p>Result:</p>\n\n<p>2 * (i * i)</p>\n\n<ul>\n<li>result:119860736, 438 ms</li>\n<li>result:119860736, 433 ms</li>\n<li>result:119860736, 437 ms</li>\n<li>result:119860736, 435 ms</li>\n<li>result:119860736, 436 ms</li>\n<li>result:119860736, 435 ms</li>\n<li>result:119860736, 435 ms</li>\n<li>result:119860736, 439 ms</li>\n<li>result:119860736, 436 ms</li>\n<li>result:119860736, 437 ms</li>\n</ul>\n\n<p>2 * i * i</p>\n\n<ul>\n<li>result:119860736, 417 ms</li>\n<li>result:119860736, 417 ms</li>\n<li>result:119860736, 417 ms</li>\n<li>result:119860736, 418 ms</li>\n<li>result:119860736, 418 ms</li>\n<li>result:119860736, 417 ms</li>\n<li>result:119860736, 418 ms</li>\n<li>result:119860736, 416 ms</li>\n<li>result:119860736, 417 ms</li>\n<li>result:119860736, 418 ms</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1556119337,"creation_date":1543612043,"answer_id":53564928,"question_id":53452713,"body_markdown":"More of an addendum. I did repro the experiment using the latest Java 8 JVM from IBM:\r\n\r\n    java version &quot;1.8.0_191&quot;\r\n    Java(TM) 2 Runtime Environment, Standard Edition (IBM build 1.8.0_191-b12 26_Oct_2018_18_45 Mac OS X x64(SR5 FP25))\r\n    Java HotSpot(TM) 64-Bit Server VM (build 25.191-b12, mixed mode)\r\n\r\nAnd this shows very similar results:\r\n\r\n    0.374653912 s\r\n    n = 119860736\r\n    0.447778698 s\r\n    n = 119860736\r\n\r\n(second results using 2 * i * i).\r\n\r\nInterestingly enough, when running on the same machine, but using Oracle Java:\r\n\r\n    Java version &quot;1.8.0_181&quot;\r\n    Java(TM) SE Runtime Environment (build 1.8.0_181-b13)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 25.181-b13, mixed mode)\r\n\r\nresults are on average a bit slower:\r\n\r\n    0.414331815 s\r\n    n = 119860736\r\n    0.491430656 s\r\n    n = 119860736\r\n\r\nLong story short: even the minor version number of HotSpot matter here, as subtle differences within the JIT implementation can have notable effects.\r\n","title":"Why is 2 * (i * i) faster than 2 * i * i in Java?","body":"<p>More of an addendum. I did repro the experiment using the latest Java 8 JVM from IBM:</p>\n\n<pre><code>java version \"1.8.0_191\"\nJava(TM) 2 Runtime Environment, Standard Edition (IBM build 1.8.0_191-b12 26_Oct_2018_18_45 Mac OS X x64(SR5 FP25))\nJava HotSpot(TM) 64-Bit Server VM (build 25.191-b12, mixed mode)\n</code></pre>\n\n<p>And this shows very similar results:</p>\n\n<pre><code>0.374653912 s\nn = 119860736\n0.447778698 s\nn = 119860736\n</code></pre>\n\n<p>(second results using 2 * i * i).</p>\n\n<p>Interestingly enough, when running on the same machine, but using Oracle Java:</p>\n\n<pre><code>Java version \"1.8.0_181\"\nJava(TM) SE Runtime Environment (build 1.8.0_181-b13)\nJava HotSpot(TM) 64-Bit Server VM (build 25.181-b13, mixed mode)\n</code></pre>\n\n<p>results are on average a bit slower:</p>\n\n<pre><code>0.414331815 s\nn = 119860736\n0.491430656 s\nn = 119860736\n</code></pre>\n\n<p>Long story short: even the minor version number of HotSpot matter here, as subtle differences within the JIT implementation can have notable effects.</p>\n"},{"tags":[],"owner":{"account_id":3155790,"reputation":14985,"user_id":2668232,"accept_rate":100,"display_name":"Oleksandr Pyrohov"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1568919809,"creation_date":1543718327,"answer_id":53576845,"question_id":53452713,"body_markdown":"Interesting observation using **Java 11** and switching off loop unrolling with the following VM option:\r\n\r\n    -XX:LoopUnrollLimit=0\r\n\r\nThe loop with the `2 * (i * i)` expression results in more compact native code&lt;sup&gt;1&lt;/sup&gt;:\r\n\r\n    L0001: add    eax,r11d\r\n           inc    r8d\r\n           mov    r11d,r8d\r\n           imul   r11d,r8d\r\n           shl    r11d,1h\r\n           cmp    r8d,r10d\r\n           jl     L0001\r\n\r\nin comparison with the `2 * i * i` version:\r\n\r\n    L0001: add    eax,r11d\r\n           mov    r11d,r8d\r\n           shl    r11d,1h\r\n           add    r11d,2h\r\n           inc    r8d\r\n           imul   r11d,r8d\r\n           cmp    r8d,r10d\r\n           jl     L0001\r\n\r\nJava version:\r\n\r\n    java version &quot;11&quot; 2018-09-25\r\n    Java(TM) SE Runtime Environment 18.9 (build 11+28)\r\n    Java HotSpot(TM) 64-Bit Server VM 18.9 (build 11+28, mixed mode)\r\n\r\nBenchmark results:\r\n\r\n    Benchmark          (size)  Mode  Cnt    Score     Error  Units\r\n    LoopTest.fast  1000000000  avgt    5  694,868 &#177;  36,470  ms/op\r\n    LoopTest.slow  1000000000  avgt    5  769,840 &#177; 135,006  ms/op\r\n\r\nBenchmark source code:\r\n\r\n    @BenchmarkMode(Mode.AverageTime)\r\n    @OutputTimeUnit(TimeUnit.MILLISECONDS)\r\n    @Warmup(iterations = 5, time = 5, timeUnit = TimeUnit.SECONDS)\r\n    @Measurement(iterations = 5, time = 5, timeUnit = TimeUnit.SECONDS)\r\n    @State(Scope.Thread)\r\n    @Fork(1)\r\n    public class LoopTest {\r\n\r\n        @Param(&quot;1000000000&quot;) private int size;\r\n\r\n        public static void main(String[] args) throws RunnerException {\r\n            Options opt = new OptionsBuilder()\r\n                .include(LoopTest.class.getSimpleName())\r\n                .jvmArgs(&quot;-XX:LoopUnrollLimit=0&quot;)\r\n                .build();\r\n            new Runner(opt).run();\r\n        }\r\n\r\n        @Benchmark\r\n        public int slow() {\r\n            int n = 0;\r\n            for (int i = 0; i &lt; size; i++)\r\n                n += 2 * i * i;\r\n            return n;\r\n        }\r\n\r\n        @Benchmark\r\n        public int fast() {\r\n            int n = 0;\r\n            for (int i = 0; i &lt; size; i++)\r\n                n += 2 * (i * i);\r\n            return n;\r\n        }\r\n    }\r\n\r\n---\r\n\r\n&lt;sup&gt;1 - VM options used: `-XX:+UnlockDiagnosticVMOptions -XX:+PrintAssembly -XX:LoopUnrollLimit=0`&lt;/sup&gt;","title":"Why is 2 * (i * i) faster than 2 * i * i in Java?","body":"<p>Interesting observation using <strong>Java 11</strong> and switching off loop unrolling with the following VM option:</p>\n\n<pre><code>-XX:LoopUnrollLimit=0\n</code></pre>\n\n<p>The loop with the <code>2 * (i * i)</code> expression results in more compact native code<sup>1</sup>:</p>\n\n<pre><code>L0001: add    eax,r11d\n       inc    r8d\n       mov    r11d,r8d\n       imul   r11d,r8d\n       shl    r11d,1h\n       cmp    r8d,r10d\n       jl     L0001\n</code></pre>\n\n<p>in comparison with the <code>2 * i * i</code> version:</p>\n\n<pre><code>L0001: add    eax,r11d\n       mov    r11d,r8d\n       shl    r11d,1h\n       add    r11d,2h\n       inc    r8d\n       imul   r11d,r8d\n       cmp    r8d,r10d\n       jl     L0001\n</code></pre>\n\n<p>Java version:</p>\n\n<pre><code>java version \"11\" 2018-09-25\nJava(TM) SE Runtime Environment 18.9 (build 11+28)\nJava HotSpot(TM) 64-Bit Server VM 18.9 (build 11+28, mixed mode)\n</code></pre>\n\n<p>Benchmark results:</p>\n\n<pre><code>Benchmark          (size)  Mode  Cnt    Score     Error  Units\nLoopTest.fast  1000000000  avgt    5  694,868   36,470  ms/op\nLoopTest.slow  1000000000  avgt    5  769,840  135,006  ms/op\n</code></pre>\n\n<p>Benchmark source code:</p>\n\n<pre><code>@BenchmarkMode(Mode.AverageTime)\n@OutputTimeUnit(TimeUnit.MILLISECONDS)\n@Warmup(iterations = 5, time = 5, timeUnit = TimeUnit.SECONDS)\n@Measurement(iterations = 5, time = 5, timeUnit = TimeUnit.SECONDS)\n@State(Scope.Thread)\n@Fork(1)\npublic class LoopTest {\n\n    @Param(\"1000000000\") private int size;\n\n    public static void main(String[] args) throws RunnerException {\n        Options opt = new OptionsBuilder()\n            .include(LoopTest.class.getSimpleName())\n            .jvmArgs(\"-XX:LoopUnrollLimit=0\")\n            .build();\n        new Runner(opt).run();\n    }\n\n    @Benchmark\n    public int slow() {\n        int n = 0;\n        for (int i = 0; i &lt; size; i++)\n            n += 2 * i * i;\n        return n;\n    }\n\n    @Benchmark\n    public int fast() {\n        int n = 0;\n        for (int i = 0; i &lt; size; i++)\n            n += 2 * (i * i);\n        return n;\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><sup>1 - VM options used: <code>-XX:+UnlockDiagnosticVMOptions -XX:+PrintAssembly -XX:LoopUnrollLimit=0</code></sup></p>\n"}],"owner":{"account_id":14314366,"reputation":5072,"user_id":10339589,"display_name":"Stefan"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":254005,"favorite_count":0,"down_vote_count":19,"up_vote_count":931,"accepted_answer_id":53453588,"answer_count":10,"score":912,"last_activity_date":1657977270,"creation_date":1543005610,"question_id":53452713,"body_markdown":"The following Java program takes on average between 0.50 secs and 0.55 secs to run:\r\n\r\n```lang-java\r\npublic static void main(String[] args) {\r\n    long startTime = System.nanoTime();\r\n    int n = 0;\r\n    for (int i = 0; i &lt; 1000000000; i++) {\r\n        n += 2 * (i * i);\r\n    }\r\n    System.out.println(\r\n        (double) (System.nanoTime() - startTime) / 1000000000 + &quot; s&quot;);\r\n    System.out.println(&quot;n = &quot; + n);\r\n}\r\n```\r\n\r\nIf I replace `2 * (i * i)` with `2 * i * i`, it takes between 0.60 and 0.65 secs to run. How come?\r\n\r\nI ran each version of the program 15 times, alternating between the two. Here are the results:\r\n\r\n```lang-text\r\n 2*(i*i)    2*i*i\r\n\r\n0.5183738  0.6246434\r\n0.5298337  0.6049722\r\n0.5308647  0.6603363\r\n0.5133458  0.6243328\r\n0.5003011  0.6541802\r\n0.5366181  0.6312638\r\n0.515149   0.6241105\r\n0.5237389  0.627815\r\n0.5249942  0.6114252\r\n0.5641624  0.6781033\r\n0.538412   0.6393969\r\n0.5466744  0.6608845\r\n0.531159   0.6201077\r\n0.5048032  0.6511559\r\n0.5232789  0.6544526\r\n```\r\n\r\nThe fastest run of `2 * i * i` took longer than the slowest run of `2 * (i * i)`. If they had the same efficiency, the probability of this happening would be less than `1/2^15 * 100% = 0.00305%`.\r\n","title":"Why is 2 * (i * i) faster than 2 * i * i in Java?","body":"<p>The following Java program takes on average between 0.50 secs and 0.55 secs to run:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    long startTime = System.nanoTime();\n    int n = 0;\n    for (int i = 0; i &lt; 1000000000; i++) {\n        n += 2 * (i * i);\n    }\n    System.out.println(\n        (double) (System.nanoTime() - startTime) / 1000000000 + &quot; s&quot;);\n    System.out.println(&quot;n = &quot; + n);\n}\n</code></pre>\n<p>If I replace <code>2 * (i * i)</code> with <code>2 * i * i</code>, it takes between 0.60 and 0.65 secs to run. How come?</p>\n<p>I ran each version of the program 15 times, alternating between the two. Here are the results:</p>\n<pre class=\"lang-text prettyprint-override\"><code> 2*(i*i)    2*i*i\n\n0.5183738  0.6246434\n0.5298337  0.6049722\n0.5308647  0.6603363\n0.5133458  0.6243328\n0.5003011  0.6541802\n0.5366181  0.6312638\n0.515149   0.6241105\n0.5237389  0.627815\n0.5249942  0.6114252\n0.5641624  0.6781033\n0.538412   0.6393969\n0.5466744  0.6608845\n0.531159   0.6201077\n0.5048032  0.6511559\n0.5232789  0.6544526\n</code></pre>\n<p>The fastest run of <code>2 * i * i</code> took longer than the slowest run of <code>2 * (i * i)</code>. If they had the same efficiency, the probability of this happening would be less than <code>1/2^15 * 100% = 0.00305%</code>.</p>\n"},{"tags":["java","csv"],"comments":[{"owner":{"account_id":71985,"reputation":7903,"user_id":208013,"display_name":"Mirek Pluta"},"score":2,"creation_date":1657969738,"post_id":73003653,"comment_id":128939013,"body_markdown":"Welcome. To get any help, you first need to show your attempt on the problem. Don&#39;t expect anybody to provide you with a full solution. Therefore: paste a code that you have written so far and tell us where you are stuck.","body":"Welcome. To get any help, you first need to show your attempt on the problem. Don&#39;t expect anybody to provide you with a full solution. Therefore: paste a code that you have written so far and tell us where you are stuck."},{"owner":{"account_id":1816046,"reputation":1389,"user_id":1651107,"accept_rate":100,"display_name":"Piro"},"score":0,"creation_date":1657977001,"post_id":73003653,"comment_id":128940352,"body_markdown":"Are you using any specific CSV library?","body":"Are you using any specific CSV library?"},{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - "},"score":0,"creation_date":1657977028,"post_id":73003653,"comment_id":128940359,"body_markdown":"`st.readFileData()`?? Shouldn&#39;t it be: `stReader.readFileData()`?","body":"<code>st.readFileData()</code>?? Shouldn&#39;t it be: <code>stReader.readFileData()</code>?"}],"answers":[{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - "},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1657977148,"creation_date":1657971679,"answer_id":73003893,"question_id":73003653,"body_markdown":"Each data line of the CSV file is most likely comma (,) delimited so when you read in each line, split it then display the column you want, for example:\r\n\r\n```\r\npublic static void readAndDisplayDataColumn(String csvFilePath, int literalDataColumnToDisplay) throws IOException {\r\n    if (throws literalDataColumnToDisplay &lt; 1) {\r\n         System.err.println(&quot;readAndDisplayDataColumn() method Error! &quot; + \r\n                    &quot;Invalid column number (&quot; + literalDataColumnToDisplay + \r\n                    &quot;) supplied!&quot;);\r\n        return;\r\n    }\r\n\r\n    try (BufferedReader reader = new BufferedReader(new FileReader(csvFilePath))) {\r\n        String line;\r\n        while ((line = reader.readLine()) != null) {\r\n            String[] columnData = line.split(&quot;\\\\s*,\\\\s*);\r\n            System.out.println(columnData[literalDataColumnToDisplay - 1]);\r\n        }\r\n    }\r\n}\r\n```\r\nWill display column 3 of each data line in file.\r\n\r\nYou will of notice that 1 is subtracted from literalDataColumnToDisplay. This is because Arrays have the first element (column so to speak in this case) at index 0 and desiredLiteralColumnNumber holds a literal value of 3. For example, if we want column 1 data, literalDataColumnToDisplay would contain value of **1**, to get the actual first element from the array we need to subtract 1 to get an index value of 0.\r\n\r\nThis should get you started.\r\n\r\n**EDIT: Based on comment:** \r\n\r\nAs you already know the [StockFileReader#readFileData()](https://github.com/Manish-Giri/Java-JRP/blob/master/src/practicaljava/generics/lesson9/fileprocessors/StockFileReader.java) method returns a List Interface of String (`List&lt;String&gt;`) so, you will need to need to then iterate through the List to display the desired Column, for example:\r\n\r\n```\r\n// Assuming i is the column number.\r\n// Don&#39;t have a clue why this method returns a double because you supply no information whatsoever.\r\npublic double runAggregator(int i) throws IOException {    \r\n    StockFileReader stReader = new StockFileReader(file);\r\n\r\n    List&lt;String&gt; dataLines = stReader.readFileData();\r\n\r\n    for (String line : dataLines) {\r\n        String[] columnData = line.split(&quot;\\\\s*,\\\\s*);\r\n        System.out.println(columnData[i - 1]);\r\n    }\r\n\r\n    // whatever else you want to do in this method.\r\n}\r\n```\r\n\r\nPerhaps what you want to do is return all of a specific column in **double** data type as an **Array** rather than a single double. If this is the case then perhaps this is **a** way to go:\r\n\r\n```\r\npublic double[] runAggregator(int i) throws IOException {    \r\n    StockFileReader stReader = new StockFileReader(file);\r\n\r\n    List&lt;String&gt; dataLines = stReader.readFileData();\r\n    double[] columnArray = new double[dataLines.size()];\r\n\r\n    for (int i = 0; i &lt; dataLines.size(); i++) {\r\n        String[] columnData = dataLines.get(i).split(&quot;\\\\s*,\\\\s*);\r\n        columnArray[i] = Double.parseDouble(columnData[i - 1]);\r\n    }\r\n\r\n    return columnArray;\r\n}\r\n```\r\n\r\nTo use and display the returned result:\r\n\r\n```\r\nint columnNumber = 3;\r\ntry {\r\n    double[] columnValues = runAggregator(int columnNmber);\r\n} catch(IOException ex) {\r\n    System.err.println(ex.getMessage());\r\n}\r\n\r\n// Display column data:\r\nSystem.out.println(&quot;Column &quot; + columnNumber + &quot; Data:\r\nfor (double d : columnValues) {\r\n    System.out.println(d);\r\n}\r\n```","title":"How can I assign each column from a csv file to an int number?","body":"<p>Each data line of the CSV file is most likely comma (,) delimited so when you read in each line, split it then display the column you want, for example:</p>\n<pre><code>public static void readAndDisplayDataColumn(String csvFilePath, int literalDataColumnToDisplay) throws IOException {\n    if (throws literalDataColumnToDisplay &lt; 1) {\n         System.err.println(&quot;readAndDisplayDataColumn() method Error! &quot; + \n                    &quot;Invalid column number (&quot; + literalDataColumnToDisplay + \n                    &quot;) supplied!&quot;);\n        return;\n    }\n\n    try (BufferedReader reader = new BufferedReader(new FileReader(csvFilePath))) {\n        String line;\n        while ((line = reader.readLine()) != null) {\n            String[] columnData = line.split(&quot;\\\\s*,\\\\s*);\n            System.out.println(columnData[literalDataColumnToDisplay - 1]);\n        }\n    }\n}\n</code></pre>\n<p>Will display column 3 of each data line in file.</p>\n<p>You will of notice that 1 is subtracted from literalDataColumnToDisplay. This is because Arrays have the first element (column so to speak in this case) at index 0 and desiredLiteralColumnNumber holds a literal value of 3. For example, if we want column 1 data, literalDataColumnToDisplay would contain value of <strong>1</strong>, to get the actual first element from the array we need to subtract 1 to get an index value of 0.</p>\n<p>This should get you started.</p>\n<p><strong>EDIT: Based on comment:</strong></p>\n<p>As you already know the <a href=\"https://github.com/Manish-Giri/Java-JRP/blob/master/src/practicaljava/generics/lesson9/fileprocessors/StockFileReader.java\" rel=\"nofollow noreferrer\">StockFileReader#readFileData()</a> method returns a List Interface of String (<code>List&lt;String&gt;</code>) so, you will need to need to then iterate through the List to display the desired Column, for example:</p>\n<pre><code>// Assuming i is the column number.\n// Don't have a clue why this method returns a double because you supply no information whatsoever.\npublic double runAggregator(int i) throws IOException {    \n    StockFileReader stReader = new StockFileReader(file);\n\n    List&lt;String&gt; dataLines = stReader.readFileData();\n\n    for (String line : dataLines) {\n        String[] columnData = line.split(&quot;\\\\s*,\\\\s*);\n        System.out.println(columnData[i - 1]);\n    }\n\n    // whatever else you want to do in this method.\n}\n</code></pre>\n<p>Perhaps what you want to do is return all of a specific column in <strong>double</strong> data type as an <strong>Array</strong> rather than a single double. If this is the case then perhaps this is <strong>a</strong> way to go:</p>\n<pre><code>public double[] runAggregator(int i) throws IOException {    \n    StockFileReader stReader = new StockFileReader(file);\n\n    List&lt;String&gt; dataLines = stReader.readFileData();\n    double[] columnArray = new double[dataLines.size()];\n\n    for (int i = 0; i &lt; dataLines.size(); i++) {\n        String[] columnData = dataLines.get(i).split(&quot;\\\\s*,\\\\s*);\n        columnArray[i] = Double.parseDouble(columnData[i - 1]);\n    }\n\n    return columnArray;\n}\n</code></pre>\n<p>To use and display the returned result:</p>\n<pre><code>int columnNumber = 3;\ntry {\n    double[] columnValues = runAggregator(int columnNmber);\n} catch(IOException ex) {\n    System.err.println(ex.getMessage());\n}\n\n// Display column data:\nSystem.out.println(&quot;Column &quot; + columnNumber + &quot; Data:\nfor (double d : columnValues) {\n    System.out.println(d);\n}\n</code></pre>\n"}],"owner":{"account_id":25822621,"reputation":3,"user_id":19561435,"display_name":"Amo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73003893,"answer_count":1,"score":-1,"last_activity_date":1657977148,"creation_date":1657969598,"question_id":73003653,"body_markdown":"Newbie here!\r\n\r\nI have learnt how to read a csv file and display in into the console, but this time I need to assign each column of the csv file into an int number and return the method so that when I type number (1) for example, the first column of this file will be displayed to the screen.\r\n\r\n     public double runAggregator(int i) throws IOException {    \r\n\r\n        StockFileReader stReader = new StockFileReader (file);\r\n       \r\n        List&lt;String&gt; Column = st.readFileData();\r\n\r\n","title":"How can I assign each column from a csv file to an int number?","body":"<p>Newbie here!</p>\n<p>I have learnt how to read a csv file and display in into the console, but this time I need to assign each column of the csv file into an int number and return the method so that when I type number (1) for example, the first column of this file will be displayed to the screen.</p>\n<pre><code> public double runAggregator(int i) throws IOException {    \n\n    StockFileReader stReader = new StockFileReader (file);\n   \n    List&lt;String&gt; Column = st.readFileData();\n</code></pre>\n"},{"tags":["java","algorithm"],"comments":[{"owner":{"account_id":11653484,"reputation":12724,"user_id":8534008,"display_name":"GBlodgett"},"score":0,"creation_date":1567115685,"post_id":57718129,"comment_id":101877906,"body_markdown":"Do you get to see the tests that you failed? What about when `X = 10`, `Y = 20`, and `D=10`? What does your algorithm return?","body":"Do you get to see the tests that you failed? What about when <code>X = 10</code>, <code>Y = 20</code>, and <code>D=10</code>? What does your algorithm return?"}],"answers":[{"tags":[],"owner":{"account_id":1249294,"reputation":32209,"user_id":1210053,"accept_rate":93,"display_name":"Nico Schertler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1567117982,"creation_date":1567117982,"answer_id":57718441,"question_id":57718129,"body_markdown":"You are using the condition\r\n\r\n    while(X &lt;= Y)\r\nto make a new jump. However, in the case where `X == Y`, you have already reached your goal and don&#39;t want to jump further. Hence, update to\r\n\r\n    while(X &lt; Y) //as long as we have not reached the goal","title":"How to fix &#39;Codility FrogJump&#39; Algorithm?","body":"<p>You are using the condition</p>\n\n<pre><code>while(X &lt;= Y)\n</code></pre>\n\n<p>to make a new jump. However, in the case where <code>X == Y</code>, you have already reached your goal and don't want to jump further. Hence, update to</p>\n\n<pre><code>while(X &lt; Y) //as long as we have not reached the goal\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10443627,"reputation":918,"user_id":7699428,"display_name":"N. Djokic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1567119094,"creation_date":1567119094,"answer_id":57718562,"question_id":57718129,"body_markdown":"Here is my solution. You have distance which is calculated as Y-X. So you just need to divide and check divisibility:\r\n\r\n        function solution(X,Y,D) {\r\n        \r\n        var distance = Y-X;\r\n        var steps = distance/D;\r\n        /* If steps number is rounded integer just return steps */\r\n        if((steps*D) == distance &amp;&amp; Number.isInteger(steps)) {\r\n          return steps;\r\n        } else {\r\n    /* if there is rest of division then just round it (to floor) and increase steps number for one */\r\n          return Math.floor(steps)+1;\r\n        }\r\n        \r\n        }\r\n        \r\n        console.log(solution(10,85,30)); /* 3 */\r\n\r\nThat is solution in JavaScript and complexity is basically O(1).","title":"How to fix &#39;Codility FrogJump&#39; Algorithm?","body":"<p>Here is my solution. You have distance which is calculated as Y-X. So you just need to divide and check divisibility:</p>\n\n<pre><code>    function solution(X,Y,D) {\n\n    var distance = Y-X;\n    var steps = distance/D;\n    /* If steps number is rounded integer just return steps */\n    if((steps*D) == distance &amp;&amp; Number.isInteger(steps)) {\n      return steps;\n    } else {\n/* if there is rest of division then just round it (to floor) and increase steps number for one */\n      return Math.floor(steps)+1;\n    }\n\n    }\n\n    console.log(solution(10,85,30)); /* 3 */\n</code></pre>\n\n<p>That is solution in JavaScript and complexity is basically O(1).</p>\n"},{"tags":[],"owner":{"account_id":16611223,"reputation":31,"user_id":12004188,"display_name":"Abhishek5525"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1567283253,"creation_date":1567283253,"answer_id":57741392,"question_id":57718129,"body_markdown":"why use any loops here, loops are a costly affair. Just one line answer\r\n\r\n    function solution(X,Y,D) {\r\n        return Math.ceil((Y-X)/D);\r\n    }","title":"How to fix &#39;Codility FrogJump&#39; Algorithm?","body":"<p>why use any loops here, loops are a costly affair. Just one line answer</p>\n\n<pre><code>function solution(X,Y,D) {\n    return Math.ceil((Y-X)/D);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19943909,"reputation":45,"user_id":14615061,"display_name":"Kishan Suresh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640796167,"creation_date":1640796167,"answer_id":70522382,"question_id":57718129,"body_markdown":"Here is a rudimentary solution I just thought of posting\r\n\r\n        def solution(X, Y, D):\r\n            distance = Y-X\r\n            if distance % D == 0:\r\n                return distance // D\r\n            elif distance == 0:\r\n                return 0\r\n            else:\r\n                return (distance // D) + 1\r\n            pass\r\n\r\n\r\nThis will give 100% in correctness and performance. `//` this is for getting quoient","title":"How to fix &#39;Codility FrogJump&#39; Algorithm?","body":"<p>Here is a rudimentary solution I just thought of posting</p>\n<pre><code>    def solution(X, Y, D):\n        distance = Y-X\n        if distance % D == 0:\n            return distance // D\n        elif distance == 0:\n            return 0\n        else:\n            return (distance // D) + 1\n        pass\n</code></pre>\n<p>This will give 100% in correctness and performance. <code>//</code> this is for getting quoient</p>\n"},{"tags":[],"owner":{"account_id":7066006,"reputation":1,"user_id":5409305,"display_name":"Amit Dhawan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657976346,"creation_date":1657976346,"answer_id":73004426,"question_id":57718129,"body_markdown":"My solution with 100% codility acceptance result:\r\n\r\n````\r\n   double d = Y - X;\r\n        Double dd = new Double(D);\r\n        double result = d / dd;\r\n        result = Math.ceil(result);\r\n        \r\n        Double ans = new Double(result);\r\n      \r\n        return ans.intValue();\r\n\r\n````\r\n","title":"How to fix &#39;Codility FrogJump&#39; Algorithm?","body":"<p>My solution with 100% codility acceptance result:</p>\n<pre><code>   double d = Y - X;\n        Double dd = new Double(D);\n        double result = d / dd;\n        result = Math.ceil(result);\n        \n        Double ans = new Double(result);\n      \n        return ans.intValue();\n\n</code></pre>\n"}],"owner":{"account_id":16526710,"reputation":159,"user_id":11941232,"display_name":"Gamoxion"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4319,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":57718441,"answer_count":5,"score":4,"last_activity_date":1657976346,"creation_date":1567115583,"question_id":57718129,"body_markdown":"On Codility there&#39;s this problem of counting the minimal number of jumps a frog has to make to reach Y position.\r\n\r\nThe problem reads as follow:\r\n\r\n    A small frog wants to get to the other side of the road. The frog is currently located at position X and wants to get to a position greater than or equal to Y. The small frog always jumps a fixed distance, D.\r\n    \r\n    Count the minimal number of jumps that the small frog must perform to reach its target.\r\n    \r\n    given three integers X, Y and D, returns the minimal number of jumps from position X to a position equal to or greater than Y.\r\n    \r\n    For example, given:\r\n    \r\n      X = 10\r\n      Y = 85\r\n      D = 30\r\n    the function should return 3, because the frog will be positioned as follows:\r\n    \r\n    after the first jump, at position 10 + 30 = 40\r\n    after the second jump, at position 10 + 30 + 30 = 70\r\n    after the third jump, at position 10 + 30 + 30 + 30 = 100\r\n\r\nI have &quot;solved&quot; the problem and gotten &quot;3&quot; as result, just like in the example. However when I submit my code, I only get 11% and fail every test aside from the example.\r\n\r\nThis is my code\r\n\r\n    int count = 0;\r\n    \r\n    while(X &lt;= Y){\r\n    X += D;\r\n    count++;\r\n    }       \r\n    \r\n    return count;\r\n    \r\n\r\nOn my code I basically count the jumps needed to reach Y, which is the position the frog wants to get to. I&#39;m not properly understanding the problem? If so, what I am missing?","title":"How to fix &#39;Codility FrogJump&#39; Algorithm?","body":"<p>On Codility there's this problem of counting the minimal number of jumps a frog has to make to reach Y position.</p>\n\n<p>The problem reads as follow:</p>\n\n<pre><code>A small frog wants to get to the other side of the road. The frog is currently located at position X and wants to get to a position greater than or equal to Y. The small frog always jumps a fixed distance, D.\n\nCount the minimal number of jumps that the small frog must perform to reach its target.\n\ngiven three integers X, Y and D, returns the minimal number of jumps from position X to a position equal to or greater than Y.\n\nFor example, given:\n\n  X = 10\n  Y = 85\n  D = 30\nthe function should return 3, because the frog will be positioned as follows:\n\nafter the first jump, at position 10 + 30 = 40\nafter the second jump, at position 10 + 30 + 30 = 70\nafter the third jump, at position 10 + 30 + 30 + 30 = 100\n</code></pre>\n\n<p>I have \"solved\" the problem and gotten \"3\" as result, just like in the example. However when I submit my code, I only get 11% and fail every test aside from the example.</p>\n\n<p>This is my code</p>\n\n<pre><code>int count = 0;\n\nwhile(X &lt;= Y){\nX += D;\ncount++;\n}       \n\nreturn count;\n</code></pre>\n\n<p>On my code I basically count the jumps needed to reach Y, which is the position the frog wants to get to. I'm not properly understanding the problem? If so, what I am missing?</p>\n"},{"tags":["java","algorithm","infinite-loop"],"comments":[{"owner":{"account_id":14027487,"reputation":53,"user_id":10132168,"display_name":"Alger"},"score":0,"creation_date":1657976121,"post_id":73004139,"comment_id":128940149,"body_markdown":"@user16320675\nyes, that is my exact question, how should I create my recursive to send messages with basic inputs?","body":"@user16320675 yes, that is my exact question, how should I create my recursive to send messages with basic inputs?"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1657976351,"post_id":73004139,"comment_id":128940200,"body_markdown":"use return value of method instead of Exception (otherwise you can use `try`-`catch` but that is *ugly* - Exceptions should NOT be used for control flow or similar)","body":"use return value of method instead of Exception (otherwise you can use <code>try</code>-<code>catch</code> but that is <i>ugly</i> - Exceptions should NOT be used for control flow or similar)"},{"owner":{"account_id":14027487,"reputation":53,"user_id":10132168,"display_name":"Alger"},"score":0,"creation_date":1657977476,"post_id":73004139,"comment_id":128940459,"body_markdown":"@user16320675 this is a good idea, to create two functions and return the value of the recursive function.","body":"@user16320675 this is a good idea, to create two functions and return the value of the recursive function."}],"answers":[{"tags":[],"owner":{"account_id":22755735,"reputation":555,"user_id":16915219,"display_name":"JumperBot_"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1657974864,"creation_date":1657974864,"answer_id":73004249,"question_id":73004139,"body_markdown":"&gt; My main question is about how to provide right message in the Exception.\r\n\r\nI&#39;m still wondering why that&#39;s not the question title itself.\r\n\r\nSince this question is likely opinion-based... I&#39;ll give my shot?\r\n\r\nYour code at:\r\n\r\n```java\r\nthrow new Exception(&quot;&quot;);\r\n```\r\n\r\nWill throw an `Exception` like this:\r\n\r\n```java\r\njava.lang.Exception: At ...\r\n```\r\n\r\nSo it will be even better if you just tell it what you want it to show in the first place:\r\n\r\n```java\r\nthrow new Exception(A.parent+&quot; is the parent of &quot;+B.child);\r\n//This throws:\r\njava.lang.Exception: A is the parent of C: At ...\r\n```\r\n\r\nWhich results in:\r\n\r\n```java\r\nprivate static void restrict_ParentChild_Loop(Object A, Object B) throws Exception {\r\n    if (A.parent == null)\r\n        return;\r\n    if (A.parent.equals(B)) {\r\n        throw new Exception(A.parent+&quot; is the parent of &quot;+B.child);\r\n    } else {\r\n        restrict_ParentChild_Loop(A.parent, B);\r\n    }\r\n}\r\n```","title":"check parent-child loop function","body":"<blockquote>\n<p>My main question is about how to provide right message in the Exception.</p>\n</blockquote>\n<p>I'm still wondering why that's not the question title itself.</p>\n<p>Since this question is likely opinion-based... I'll give my shot?</p>\n<p>Your code at:</p>\n<pre class=\"lang-java prettyprint-override\"><code>throw new Exception(&quot;&quot;);\n</code></pre>\n<p>Will throw an <code>Exception</code> like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>java.lang.Exception: At ...\n</code></pre>\n<p>So it will be even better if you just tell it what you want it to show in the first place:</p>\n<pre class=\"lang-java prettyprint-override\"><code>throw new Exception(A.parent+&quot; is the parent of &quot;+B.child);\n//This throws:\njava.lang.Exception: A is the parent of C: At ...\n</code></pre>\n<p>Which results in:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static void restrict_ParentChild_Loop(Object A, Object B) throws Exception {\n    if (A.parent == null)\n        return;\n    if (A.parent.equals(B)) {\n        throw new Exception(A.parent+&quot; is the parent of &quot;+B.child);\n    } else {\n        restrict_ParentChild_Loop(A.parent, B);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":14027487,"reputation":53,"user_id":10132168,"display_name":"Alger"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1658161458,"accepted_answer_id":73004249,"answer_count":1,"score":-3,"last_activity_date":1657976059,"creation_date":1657973911,"question_id":73004139,"body_markdown":"I&#39;m trying to create a function that can recognize the parent-child loop.&lt;br&gt;\r\nImagin\r\n\r\n&gt; Object A is a parent of Object B&lt;br&gt;\r\n&gt; Object B is a parent of Object C&lt;br&gt;\r\n\r\ncreate a function that can prevent the parent-child loop. the function should give at least two parameters (childName, parentName) and get errors if the relationship creates a loop. in the above example if we pass (A, C)&lt;C is a parent of Object B&gt; should print or pass string:\r\n\r\n&gt; &quot;A is the parent of C&quot;\r\n\r\nI know how to create this function(you can provide answer with any language):\r\n\r\n    private static void restrict_ParentChild_Loop(Object A, Object B) throws Exception {\r\n        if (A.parent == null)\r\n            return;\r\n        if (A.parent.equals(B)) {\r\n            throw new Exception(&quot;&quot;);\r\n        } else {\r\n            restrict_ParentChild_Loop(A.parent, B);\r\n        }\r\n    }\r\n    \r\nMy main question is about how to provide the right message in the Exception. (&quot;A is the parent of C&quot;)","title":"check parent-child loop function","body":"<p>I'm trying to create a function that can recognize the parent-child loop.<br>\nImagin</p>\n<blockquote>\n<p>Object A is a parent of Object B<br>\nObject B is a parent of Object C<br></p>\n</blockquote>\n<p>create a function that can prevent the parent-child loop. the function should give at least two parameters (childName, parentName) and get errors if the relationship creates a loop. in the above example if we pass (A, C) should print or pass string:</p>\n<blockquote>\n<p>&quot;A is the parent of C&quot;</p>\n</blockquote>\n<p>I know how to create this function(you can provide answer with any language):</p>\n<pre><code>private static void restrict_ParentChild_Loop(Object A, Object B) throws Exception {\n    if (A.parent == null)\n        return;\n    if (A.parent.equals(B)) {\n        throw new Exception(&quot;&quot;);\n    } else {\n        restrict_ParentChild_Loop(A.parent, B);\n    }\n}\n</code></pre>\n<p>My main question is about how to provide the right message in the Exception. (&quot;A is the parent of C&quot;)</p>\n"},{"tags":["python","java","centos7","py4j"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1656388742,"post_id":72780576,"comment_id":128553492,"body_markdown":"So is your java server running? Of course you can not connect to it if it is not running.  If you think that it is running, try to telnet to `127.0.0.1:25333`","body":"So is your java server running? Of course you can not connect to it if it is not running.  If you think that it is running, try to telnet to <code>127.0.0.1:25333</code>"},{"owner":{"account_id":2287630,"reputation":4619,"user_id":2011284,"accept_rate":61,"display_name":"CIRCLE"},"score":0,"creation_date":1656389713,"post_id":72780576,"comment_id":128553633,"body_markdown":"@ScaryWombat Its py4j whos responsible for starting the server. Running telnet on 25333 doesnt return anything","body":"@ScaryWombat Its py4j whos responsible for starting the server. Running telnet on 25333 doesnt return anything"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1656389990,"post_id":72780576,"comment_id":128553681,"body_markdown":"so why does it say *py4j.protocol.Py4JNetworkError: An error occurred while trying to connect to the Java server (127.0.0.1:25333)* ?  Anyway make sure that selinux is OK?","body":"so why does it say <i>py4j.protocol.Py4JNetworkError: An error occurred while trying to connect to the Java server (127.0.0.1:25333)</i> ?  Anyway make sure that selinux is OK?"},{"owner":{"account_id":2287630,"reputation":4619,"user_id":2011284,"accept_rate":61,"display_name":"CIRCLE"},"score":0,"creation_date":1656449233,"post_id":72780576,"comment_id":128574235,"body_markdown":"@ScaryWombat running `sestatus` says my SELinux is disabled. What do you mean by OK? Should it be enabled? If so, why?","body":"@ScaryWombat running <code>sestatus</code> says my SELinux is disabled. What do you mean by OK? Should it be enabled? If so, why?"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1656459919,"post_id":72780576,"comment_id":128576538,"body_markdown":"well if selinux is disabled then it will not be affecting it, so it should be OK. My opinion is that your java gateway server should be running before python, but that is the limit of my knowledge.","body":"well if selinux is disabled then it will not be affecting it, so it should be OK. My opinion is that your java gateway server should be running before python, but that is the limit of my knowledge."}],"answers":[{"tags":[],"owner":{"account_id":2287630,"reputation":4619,"user_id":2011284,"accept_rate":61,"display_name":"CIRCLE"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1657975883,"creation_date":1657975883,"answer_id":73004375,"question_id":72780576,"body_markdown":"This problem was happening because the Java 17 version is incompatible with the implementation of Py4j in the project PyBoof.  \r\nSee this [issue](https://github.com/lessthanoptimal/PyBoof/issues/14) for more information.  \r\n\r\nInstalling Java 15 fixed the issue.","title":"Unable to start Java Gateway Server on Centos 7","body":"<p>This problem was happening because the Java 17 version is incompatible with the implementation of Py4j in the project PyBoof.<br />\nSee this <a href=\"https://github.com/lessthanoptimal/PyBoof/issues/14\" rel=\"nofollow noreferrer\">issue</a> for more information.</p>\n<p>Installing Java 15 fixed the issue.</p>\n"}],"owner":{"account_id":2287630,"reputation":4619,"user_id":2011284,"accept_rate":61,"display_name":"CIRCLE"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":166,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73004375,"answer_count":1,"score":0,"last_activity_date":1657975883,"creation_date":1656388457,"question_id":72780576,"body_markdown":"I&#39;m using a library called [PyBoof](https://github.com/lessthanoptimal/PyBoof) that makes use of py4j.\r\n\r\nI&#39;m trying to install it on a Centos 7 server but I&#39;m getting an error when starting the Gateway Server.\r\nI know there&#39;re a lot of issues created for the same problem, but none of the solutions worked for me.\r\n\r\nReproducible code and the error I&#39;m receiving is the following:\r\n```python\r\nfrom py4j.java_gateway import JavaGateway\r\ngateway = JavaGateway()\r\ngateway.start()\r\n```\r\n```bash\r\nTraceback (most recent call last):\r\n  File &quot;/root/project/venv/lib/python3.9/site-packages/py4j/java_gateway.py&quot;, line 982, in _get_connection\r\n    connection = self.deque.pop()\r\nIndexError: pop from an empty deque\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File &quot;/root/project/venv/lib/python3.9/site-packages/py4j/java_gateway.py&quot;, line 1132, in start\r\n    self.socket.connect((self.address, self.port))\r\nConnectionRefusedError: [Errno 111] Connection refused\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File &quot;/root/project/py4j_java_gateway.py&quot;, line 3, in &lt;module&gt;\r\n    gateway.start()\r\n  File &quot;/root/project/venv/lib/python3.9/site-packages/py4j/java_gateway.py&quot;, line 1320, in __call__\r\n    answer = self.gateway_client.send_command(command)\r\n  File &quot;/root/project/venv/lib/python3.9/site-packages/py4j/java_gateway.py&quot;, line 1036, in send_command\r\n    connection = self._get_connection()\r\n  File &quot;/root/project/venv/lib/python3.9/site-packages/py4j/java_gateway.py&quot;, line 984, in _get_connection\r\n    connection = self._create_connection()\r\n  File &quot;/root/project/venv/lib/python3.9/site-packages/py4j/java_gateway.py&quot;, line 990, in _create_connection\r\n    connection.start()\r\n  File &quot;/root/project/venv/lib/python3.9/site-packages/py4j/java_gateway.py&quot;, line 1144, in start\r\n    raise Py4JNetworkError(msg, e)\r\npy4j.protocol.Py4JNetworkError: An error occurred while trying to connect to the Java server (127.0.0.1:25333)\r\n```\r\n\r\nBelow are the software versions I&#39;m running:\r\n```bash\r\n$ cat /etc/redhat-release\r\nCentOS Linux release 7.9.2009 (Core)\r\n\r\n$ python --version\r\nPython 3.9.13\r\n\r\n$ pip show py4j\r\nName: py4j\r\nVersion: 0.10.9.5\r\nSummary: Enables Python programs to dynamically access arbitrary Java objects\r\nHome-page: https://www.py4j.org/\r\nAuthor: Barthelemy Dagenais\r\nAuthor-email: barthelemy@infobart.com\r\nLicense: BSD License\r\nLocation: /root/clab-services-api/venv/lib/python3.9/site-packages\r\nRequires:\r\nRequired-by: PyBoof\r\n\r\n$ java -version\r\njava version &quot;17.0.3.1&quot; 2022-04-22 LTS\r\nJava(TM) SE Runtime Environment (build 17.0.3.1+2-LTS-6)\r\nJava HotSpot(TM) 64-Bit Server VM (build 17.0.3.1+2-LTS-6, mixed mode, sharing)\r\n```\r\n\r\nI don&#39;t know if it helps, but I&#39;ve tried to build py4j jar, and there were additional errors when running the build tests:\r\n```bash\r\n$ /opt/apache-maven-3.8.6/bin/mvn install -X\r\n\r\n...\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  12.907 s\r\n[INFO] Finished at: 2022-06-28T04:34:53+01:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.12.4:test (default-test) on project py4j: There are test failures.\r\n[ERROR]\r\n[ERROR] Please refer to /root/py4j/py4j-java/target/surefire-reports for the individual test results.\r\n[ERROR] -&gt; [Help 1]\r\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.12.4:test (default-test) on project py4j: There are test failures.\r\n\r\nPlease refer to /root/py4j/py4j-java/target/surefire-reports for the individual test results.\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:375)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:351)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:171)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:163)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:294)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\r\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:568)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\nCaused by: org.apache.maven.plugin.MojoFailureException: There are test failures.\r\n\r\nPlease refer to /root/py4j/py4j-java/target/surefire-reports for the individual test results.\r\n    at org.apache.maven.plugin.surefire.SurefireHelper.reportExecution (SurefireHelper.java:83)\r\n    at org.apache.maven.plugin.surefire.SurefirePlugin.writeSummary (SurefirePlugin.java:176)\r\n    at org.apache.maven.plugin.surefire.SurefirePlugin.handleSummary (SurefirePlugin.java:150)\r\n    at org.apache.maven.plugin.surefire.AbstractSurefireMojo.executeAfterPreconditionsChecked (AbstractSurefireMojo.java:650)\r\n    at org.apache.maven.plugin.surefire.AbstractSurefireMojo.execute (AbstractSurefireMojo.java:586)\r\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:370)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:351)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:171)\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:163)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:294)\r\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)\r\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\r\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\r\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke (Method.java:568)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\r\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\r\n[ERROR]\r\n[ERROR]\r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\r\n```\r\n\r\nI&#39;ve also tried to start the Gateway Server throw Java from this [answer](https://stackoverflow.com/a/35674625/2011284), but  my Java knowledge is limited and I was unable to compile a jar for it.\r\n```java\r\nimport py4j.GatewayServer;\r\n\r\npublic class myTest {\r\n\r\n    public static void main(String[] args) {\r\n        myTest app = new myTest();\r\n        // app is now the gateway.entry_point\r\n        GatewayServer server = new GatewayServer(app);\r\n        server.start();\r\n    }\r\n}\r\n```\r\n\r\nI&#39;ve also tried installing the package py4j-java but was unable to run py4j.jar:\r\n```bash\r\n$ yum -y install py4j-java\r\n\r\n$ java -jar /usr/share/java/py4j/py4j.jar\r\nno main manifest attribute, in /usr/share/java/py4j/py4j.jar\r\n```","title":"Unable to start Java Gateway Server on Centos 7","body":"<p>I'm using a library called <a href=\"https://github.com/lessthanoptimal/PyBoof\" rel=\"nofollow noreferrer\">PyBoof</a> that makes use of py4j.</p>\n<p>I'm trying to install it on a Centos 7 server but I'm getting an error when starting the Gateway Server.\nI know there're a lot of issues created for the same problem, but none of the solutions worked for me.</p>\n<p>Reproducible code and the error I'm receiving is the following:</p>\n<pre class=\"lang-py prettyprint-override\"><code>from py4j.java_gateway import JavaGateway\ngateway = JavaGateway()\ngateway.start()\n</code></pre>\n<pre class=\"lang-bash prettyprint-override\"><code>Traceback (most recent call last):\n  File &quot;/root/project/venv/lib/python3.9/site-packages/py4j/java_gateway.py&quot;, line 982, in _get_connection\n    connection = self.deque.pop()\nIndexError: pop from an empty deque\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File &quot;/root/project/venv/lib/python3.9/site-packages/py4j/java_gateway.py&quot;, line 1132, in start\n    self.socket.connect((self.address, self.port))\nConnectionRefusedError: [Errno 111] Connection refused\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File &quot;/root/project/py4j_java_gateway.py&quot;, line 3, in &lt;module&gt;\n    gateway.start()\n  File &quot;/root/project/venv/lib/python3.9/site-packages/py4j/java_gateway.py&quot;, line 1320, in __call__\n    answer = self.gateway_client.send_command(command)\n  File &quot;/root/project/venv/lib/python3.9/site-packages/py4j/java_gateway.py&quot;, line 1036, in send_command\n    connection = self._get_connection()\n  File &quot;/root/project/venv/lib/python3.9/site-packages/py4j/java_gateway.py&quot;, line 984, in _get_connection\n    connection = self._create_connection()\n  File &quot;/root/project/venv/lib/python3.9/site-packages/py4j/java_gateway.py&quot;, line 990, in _create_connection\n    connection.start()\n  File &quot;/root/project/venv/lib/python3.9/site-packages/py4j/java_gateway.py&quot;, line 1144, in start\n    raise Py4JNetworkError(msg, e)\npy4j.protocol.Py4JNetworkError: An error occurred while trying to connect to the Java server (127.0.0.1:25333)\n</code></pre>\n<p>Below are the software versions I'm running:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>$ cat /etc/redhat-release\nCentOS Linux release 7.9.2009 (Core)\n\n$ python --version\nPython 3.9.13\n\n$ pip show py4j\nName: py4j\nVersion: 0.10.9.5\nSummary: Enables Python programs to dynamically access arbitrary Java objects\nHome-page: https://www.py4j.org/\nAuthor: Barthelemy Dagenais\nAuthor-email: barthelemy@infobart.com\nLicense: BSD License\nLocation: /root/clab-services-api/venv/lib/python3.9/site-packages\nRequires:\nRequired-by: PyBoof\n\n$ java -version\njava version &quot;17.0.3.1&quot; 2022-04-22 LTS\nJava(TM) SE Runtime Environment (build 17.0.3.1+2-LTS-6)\nJava HotSpot(TM) 64-Bit Server VM (build 17.0.3.1+2-LTS-6, mixed mode, sharing)\n</code></pre>\n<p>I don't know if it helps, but I've tried to build py4j jar, and there were additional errors when running the build tests:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>$ /opt/apache-maven-3.8.6/bin/mvn install -X\n\n...\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  12.907 s\n[INFO] Finished at: 2022-06-28T04:34:53+01:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.12.4:test (default-test) on project py4j: There are test failures.\n[ERROR]\n[ERROR] Please refer to /root/py4j/py4j-java/target/surefire-reports for the individual test results.\n[ERROR] -&gt; [Help 1]\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.12.4:test (default-test) on project py4j: There are test failures.\n\nPlease refer to /root/py4j/py4j-java/target/surefire-reports for the individual test results.\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:375)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:351)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:171)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:163)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:294)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:568)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\nCaused by: org.apache.maven.plugin.MojoFailureException: There are test failures.\n\nPlease refer to /root/py4j/py4j-java/target/surefire-reports for the individual test results.\n    at org.apache.maven.plugin.surefire.SurefireHelper.reportExecution (SurefireHelper.java:83)\n    at org.apache.maven.plugin.surefire.SurefirePlugin.writeSummary (SurefirePlugin.java:176)\n    at org.apache.maven.plugin.surefire.SurefirePlugin.handleSummary (SurefirePlugin.java:150)\n    at org.apache.maven.plugin.surefire.AbstractSurefireMojo.executeAfterPreconditionsChecked (AbstractSurefireMojo.java:650)\n    at org.apache.maven.plugin.surefire.AbstractSurefireMojo.execute (AbstractSurefireMojo.java:586)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:370)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:351)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:171)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:163)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:294)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:568)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\n[ERROR]\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\n</code></pre>\n<p>I've also tried to start the Gateway Server throw Java from this <a href=\"https://stackoverflow.com/a/35674625/2011284\">answer</a>, but  my Java knowledge is limited and I was unable to compile a jar for it.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import py4j.GatewayServer;\n\npublic class myTest {\n\n    public static void main(String[] args) {\n        myTest app = new myTest();\n        // app is now the gateway.entry_point\n        GatewayServer server = new GatewayServer(app);\n        server.start();\n    }\n}\n</code></pre>\n<p>I've also tried installing the package py4j-java but was unable to run py4j.jar:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>$ yum -y install py4j-java\n\n$ java -jar /usr/share/java/py4j/py4j.jar\nno main manifest attribute, in /usr/share/java/py4j/py4j.jar\n</code></pre>\n"},{"tags":["java","android","java-native-interface","fresco"],"comments":[{"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1657976137,"post_id":73004355,"comment_id":128940158,"body_markdown":"&quot;How can I catch this error so my app won&#39;t crash?&quot; -- based on that stack trace, I suspect that you cannot catch this error. This feels like a Fresco bug.","body":"&quot;How can I catch this error so my app won&#39;t crash?&quot; -- based on that stack trace, I suspect that you cannot catch this error. This feels like a Fresco bug."}],"owner":{"account_id":9772337,"reputation":2264,"user_id":7243748,"accept_rate":45,"display_name":"stavros.3p"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":426,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1657975722,"creation_date":1657975722,"question_id":73004355,"body_markdown":"When I try to load some specific images that are somehow distorted I get the below error and then my app crashes:\r\n\r\n    JNI DETECTED ERROR IN APPLICATION: JNI NewFloatArray called with pending exception java.lang.IllegalArgumentException: Parameter d must be in the range [0..1], was 10.35546875\r\n        java_vm_ext.cc:579]   at void android.graphics.ColorSpace$Rgb$TransferParameters.&lt;init&gt;(double, double, double, double, double, double, double) (ColorSpace.java:2195)\r\n        java_vm_ext.cc:579]   at android.graphics.Bitmap android.graphics.BitmapFactory.nativeDecodeStream(java.io.InputStream, byte[], android.graphics.Rect, android.graphics.BitmapFactory$Options, long, long) (BitmapFactory.java:-2)\r\n        java_vm_ext.cc:579]   at android.graphics.Bitmap android.graphics.BitmapFactory.decodeStreamInternal(java.io.InputStream, android.graphics.Rect, android.graphics.BitmapFactory$Options) (BitmapFactory.java:791)\r\n        java_vm_ext.cc:579]   at android.graphics.Bitmap android.graphics.BitmapFactory.decodeStream(java.io.InputStream, android.graphics.Rect, android.graphics.BitmapFactory$Options) (BitmapFactory.java:766)\r\n        java_vm_ext.cc:579]   at com.facebook.imageutils.ImageMetaData com.facebook.imageutils.BitmapUtil.decodeDimensionsAndColorSpace(java.io.InputStream) (BitmapUtil.java:144)\r\n        java_vm_ext.cc:579]   at com.facebook.imageutils.ImageMetaData com.facebook.imagepipeline.image.EncodedImage.readImageMetaData() (EncodedImage.java:391)\r\n        java_vm_ext.cc:579]   at void com.facebook.imagepipeline.image.EncodedImage.parseMetaData() (EncodedImage.java:356)\r\n        java_vm_ext.cc:579]   at void com.facebook.imagepipeline.producers.NetworkFetchProducer.notifyConsumer(com.facebook.common.memory.PooledByteBufferOutputStream, int, com.facebook.imagepipeline.common.BytesRange, com.facebook.imagepipeline.producers.Consumer) (NetworkFetchProducer.java:178)\r\n        java_vm_ext.cc:579]   at void com.facebook.imagepipeline.producers.NetworkFetchProducer.handleFinalResult(com.facebook.common.memory.PooledByteBufferOutputStream, com.facebook.imagepipeline.producers.FetchState) (NetworkFetchProducer.java:160)\r\n        java_vm_ext.cc:579]   at void com.facebook.imagepipeline.producers.NetworkFetchProducer.onResponse(com.facebook.imagepipeline.producers.FetchState, java.io.InputStream, int) (NetworkFetchProducer.java:112)\r\n        java_vm_ext.cc:579]   at void com.facebook.imagepipeline.producers.NetworkFetchProducer$1.onResponse(java.io.InputStream, int) (NetworkFetchProducer.java:73)\r\n        java_vm_ext.cc:579]   at void com.facebook.imagepipeline.producers.HttpUrlConnectionNetworkFetcher.fetchSync(com.facebook.imagepipeline.producers.HttpUrlConnectionNetworkFetcher$HttpUrlConnectionNetworkFetchState, com.facebook.imagepipeline.producers.NetworkFetcher$Callback) (HttpUrlConnectionNetworkFetcher.java:118)\r\n        java_vm_ext.cc:579]   at void com.facebook.imagepipeline.producers.HttpUrlConnectionNetworkFetcher$1.run() (HttpUrlConnectionNetworkFetcher.java:94)\r\n        java_vm_ext.cc:579]   at java.lang.Object java.util.concurrent.Executors$RunnableAdapter.call() (Executors.java:462)\r\n        java_vm_ext.cc:579]   at void java.util.concurrent.FutureTask.run() (FutureTask.java:266)\r\n        java_vm_ext.cc:579]   at void java.util.concurrent.ThreadPoolExecutor.runWorker(java.util.concurrent.ThreadPoolExecutor$Worker) (ThreadPoolExecutor.java:1167)\r\n        java_vm_ext.cc:579]   at void java.util.concurrent.ThreadPoolExecutor$Worker.run() (ThreadPoolExecutor.java:641)\r\n        java_vm_ext.cc:579]   at void java.lang.Thread.run() (Thread.java:920)\r\n        java_vm_ext.cc:579] \r\n        java_vm_ext.cc:579]     in call to NewFloatArray\r\n        java_vm_ext.cc:579]     from android.graphics.Bitmap android.graphics.BitmapFactory.nativeDecodeStream(java.io.InputStream, byte[], android.graphics.Rect, android.graphics.BitmapFactory$Options, long, long)\r\n\r\nThis is how I try to load the image from URL:\r\n\r\n    public static void loadResizeImage(SimpleDraweeView imageView, String url,\r\n                                       int widthDP, int heightDP)\r\n    { \r\n        ImageRequest request = ImageRequestBuilder\r\n                .newBuilderWithSource(Uri.parse(url))\r\n                .setResizeOptions(new ResizeOptions(widthDP, heightDP))\r\n                .setLocalThumbnailPreviewsEnabled(false)\r\n                .build();\r\n        DraweeController controller = Fresco.newDraweeControllerBuilder()\r\n                .setImageRequest(request)\r\n                .setOldController(imageView.getController())\r\n                .build();\r\n\r\n        try\r\n        {\r\n            imageView.setController(controller);\r\n        }\r\n        catch (IllegalStateException e){\r\n            e.printStackTrace();\r\n        } \r\n    }\r\n\r\nThis is the image I try to load and it crashes: [image][1]\r\n  \r\n\r\n\r\n  [1]: https://www.kidseducation.fun/images/useruploads/4OEgiM7NizWGER9v7ttJdUQaUCl2zZhTd1G0mm9TRvizfI0W592J0jBc3c8qlVs4ShI5VnM3U8DCrC\r\n\r\nHow can I catch this error so my app won&#39;t crash?\r\n\r\nI read similar questions but I couldn&#39;t find any working solution.","title":"JNI DETECTED ERROR IN APPLICATION - crash while loading image from URL","body":"<p>When I try to load some specific images that are somehow distorted I get the below error and then my app crashes:</p>\n<pre><code>JNI DETECTED ERROR IN APPLICATION: JNI NewFloatArray called with pending exception java.lang.IllegalArgumentException: Parameter d must be in the range [0..1], was 10.35546875\n    java_vm_ext.cc:579]   at void android.graphics.ColorSpace$Rgb$TransferParameters.&lt;init&gt;(double, double, double, double, double, double, double) (ColorSpace.java:2195)\n    java_vm_ext.cc:579]   at android.graphics.Bitmap android.graphics.BitmapFactory.nativeDecodeStream(java.io.InputStream, byte[], android.graphics.Rect, android.graphics.BitmapFactory$Options, long, long) (BitmapFactory.java:-2)\n    java_vm_ext.cc:579]   at android.graphics.Bitmap android.graphics.BitmapFactory.decodeStreamInternal(java.io.InputStream, android.graphics.Rect, android.graphics.BitmapFactory$Options) (BitmapFactory.java:791)\n    java_vm_ext.cc:579]   at android.graphics.Bitmap android.graphics.BitmapFactory.decodeStream(java.io.InputStream, android.graphics.Rect, android.graphics.BitmapFactory$Options) (BitmapFactory.java:766)\n    java_vm_ext.cc:579]   at com.facebook.imageutils.ImageMetaData com.facebook.imageutils.BitmapUtil.decodeDimensionsAndColorSpace(java.io.InputStream) (BitmapUtil.java:144)\n    java_vm_ext.cc:579]   at com.facebook.imageutils.ImageMetaData com.facebook.imagepipeline.image.EncodedImage.readImageMetaData() (EncodedImage.java:391)\n    java_vm_ext.cc:579]   at void com.facebook.imagepipeline.image.EncodedImage.parseMetaData() (EncodedImage.java:356)\n    java_vm_ext.cc:579]   at void com.facebook.imagepipeline.producers.NetworkFetchProducer.notifyConsumer(com.facebook.common.memory.PooledByteBufferOutputStream, int, com.facebook.imagepipeline.common.BytesRange, com.facebook.imagepipeline.producers.Consumer) (NetworkFetchProducer.java:178)\n    java_vm_ext.cc:579]   at void com.facebook.imagepipeline.producers.NetworkFetchProducer.handleFinalResult(com.facebook.common.memory.PooledByteBufferOutputStream, com.facebook.imagepipeline.producers.FetchState) (NetworkFetchProducer.java:160)\n    java_vm_ext.cc:579]   at void com.facebook.imagepipeline.producers.NetworkFetchProducer.onResponse(com.facebook.imagepipeline.producers.FetchState, java.io.InputStream, int) (NetworkFetchProducer.java:112)\n    java_vm_ext.cc:579]   at void com.facebook.imagepipeline.producers.NetworkFetchProducer$1.onResponse(java.io.InputStream, int) (NetworkFetchProducer.java:73)\n    java_vm_ext.cc:579]   at void com.facebook.imagepipeline.producers.HttpUrlConnectionNetworkFetcher.fetchSync(com.facebook.imagepipeline.producers.HttpUrlConnectionNetworkFetcher$HttpUrlConnectionNetworkFetchState, com.facebook.imagepipeline.producers.NetworkFetcher$Callback) (HttpUrlConnectionNetworkFetcher.java:118)\n    java_vm_ext.cc:579]   at void com.facebook.imagepipeline.producers.HttpUrlConnectionNetworkFetcher$1.run() (HttpUrlConnectionNetworkFetcher.java:94)\n    java_vm_ext.cc:579]   at java.lang.Object java.util.concurrent.Executors$RunnableAdapter.call() (Executors.java:462)\n    java_vm_ext.cc:579]   at void java.util.concurrent.FutureTask.run() (FutureTask.java:266)\n    java_vm_ext.cc:579]   at void java.util.concurrent.ThreadPoolExecutor.runWorker(java.util.concurrent.ThreadPoolExecutor$Worker) (ThreadPoolExecutor.java:1167)\n    java_vm_ext.cc:579]   at void java.util.concurrent.ThreadPoolExecutor$Worker.run() (ThreadPoolExecutor.java:641)\n    java_vm_ext.cc:579]   at void java.lang.Thread.run() (Thread.java:920)\n    java_vm_ext.cc:579] \n    java_vm_ext.cc:579]     in call to NewFloatArray\n    java_vm_ext.cc:579]     from android.graphics.Bitmap android.graphics.BitmapFactory.nativeDecodeStream(java.io.InputStream, byte[], android.graphics.Rect, android.graphics.BitmapFactory$Options, long, long)\n</code></pre>\n<p>This is how I try to load the image from URL:</p>\n<pre><code>public static void loadResizeImage(SimpleDraweeView imageView, String url,\n                                   int widthDP, int heightDP)\n{ \n    ImageRequest request = ImageRequestBuilder\n            .newBuilderWithSource(Uri.parse(url))\n            .setResizeOptions(new ResizeOptions(widthDP, heightDP))\n            .setLocalThumbnailPreviewsEnabled(false)\n            .build();\n    DraweeController controller = Fresco.newDraweeControllerBuilder()\n            .setImageRequest(request)\n            .setOldController(imageView.getController())\n            .build();\n\n    try\n    {\n        imageView.setController(controller);\n    }\n    catch (IllegalStateException e){\n        e.printStackTrace();\n    } \n}\n</code></pre>\n<p>This is the image I try to load and it crashes: <a href=\"https://www.kidseducation.fun/images/useruploads/4OEgiM7NizWGER9v7ttJdUQaUCl2zZhTd1G0mm9TRvizfI0W592J0jBc3c8qlVs4ShI5VnM3U8DCrC\" rel=\"nofollow noreferrer\">image</a></p>\n<p>How can I catch this error so my app won't crash?</p>\n<p>I read similar questions but I couldn't find any working solution.</p>\n"},{"tags":["java","json","jackson","key","pojo"],"comments":[{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1452258635,"post_id":34677874,"comment_id":57100795,"body_markdown":"You can write a regex to find all the words which end with a : and convert these to uppercase, but to do this properly you should use a JSON parser though this would change the format.","body":"You can write a regex to find all the words which end with a : and convert these to uppercase, but to do this properly you should use a JSON parser though this would change the format."},{"owner":{"account_id":5082789,"reputation":25,"user_id":4078362,"accept_rate":25,"display_name":"Palak"},"score":0,"creation_date":1452258763,"post_id":34677874,"comment_id":57100884,"body_markdown":"@Peter Lawrey is there any other way? like using JsonNode or ObjectNode? or any such nodes available in JSON/JACKSON lib.","body":"@Peter Lawrey is there any other way? like using JsonNode or ObjectNode? or any such nodes available in JSON/JACKSON lib."},{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1452269110,"post_id":34677874,"comment_id":57108024,"body_markdown":"If you are using a parser already I would would use that.","body":"If you are using a parser already I would would use that."}],"answers":[{"tags":[],"owner":{"account_id":893101,"reputation":3385,"user_id":931004,"accept_rate":100,"display_name":"Ghokun"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1452261011,"creation_date":1452261011,"answer_id":34678642,"question_id":34677874,"body_markdown":"You can use a custom PropertyNamingStrategy:\r\n\r\n    public class UpperCaseStrategy extends PropertyNamingStrategyBase {\r\n    \r\n        @Override\r\n        public String translate(String propertyName) {\r\n    \r\n            return propertyName.toUpperCase();\r\n        }\r\n    \r\n    ObjectMapper objectMapper = new ObjectMapper();\r\n    objectMapper.setPropertyNamingStrategy(new CustomNamingStrategy());\r\n\r\n\r\nSee [here][1] for reference. \r\n\r\n\r\n  [1]: http://wiki.fasterxml.com/JacksonFeaturePropertyNamingStrategy\r\n\r\nAs a note a lower case strategy is implemented in `com.fasterxml.jackson.databind.PropertyNamingStrategy` as follows:\r\n\r\n    /**\r\n     * Simple strategy where external name simply only uses lower-case characters,\r\n     * and no separators.\r\n     * Conversion from internal name like &quot;someOtherValue&quot; would be into external name\r\n     * if &quot;someothervalue&quot;.\r\n     * \r\n     * @since 2.4\r\n     */\r\n    public static class LowerCaseStrategy extends PropertyNamingStrategyBase\r\n    {\r\n        @Override\r\n        public String translate(String input) {\r\n            return input.toLowerCase();\r\n        }\r\n    }","title":"How to convert all keys in JSON response to uppercase? (JAVA)","body":"<p>You can use a custom PropertyNamingStrategy:</p>\n\n<pre><code>public class UpperCaseStrategy extends PropertyNamingStrategyBase {\n\n    @Override\n    public String translate(String propertyName) {\n\n        return propertyName.toUpperCase();\n    }\n\nObjectMapper objectMapper = new ObjectMapper();\nobjectMapper.setPropertyNamingStrategy(new CustomNamingStrategy());\n</code></pre>\n\n<p>See <a href=\"http://wiki.fasterxml.com/JacksonFeaturePropertyNamingStrategy\" rel=\"nofollow\">here</a> for reference. </p>\n\n<p>As a note a lower case strategy is implemented in <code>com.fasterxml.jackson.databind.PropertyNamingStrategy</code> as follows:</p>\n\n<pre><code>/**\n * Simple strategy where external name simply only uses lower-case characters,\n * and no separators.\n * Conversion from internal name like \"someOtherValue\" would be into external name\n * if \"someothervalue\".\n * \n * @since 2.4\n */\npublic static class LowerCaseStrategy extends PropertyNamingStrategyBase\n{\n    @Override\n    public String translate(String input) {\n        return input.toLowerCase();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5379334,"reputation":761,"user_id":4285108,"display_name":"Francisco Manuel Garca Botella"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1601318406,"creation_date":1601318406,"answer_id":64107837,"question_id":34677874,"body_markdown":"I know it&#39;s an old question, but in case it helps.\r\n\r\n    public JsonArray jsonKeysUpper(JsonArray arr) {\r\n\t\tJsonArray aux = new JsonArray();\r\n\t\tfor(int i = 0; i &lt; arr.size(); ++i)\r\n\t\t\taux.add(jsonKeysUpper(arr.get(i).getAsJsonObject()));\r\n\t\treturn aux;\r\n\t}\r\n\t\r\n\tpublic JsonObject jsonKeysUpper(JsonObject obj) {\r\n\t\tJsonObject aux = new JsonObject();\r\n\t\tif(obj.isJsonPrimitive()) return obj;\r\n\t\tif(obj.isJsonNull()) return null;\r\n\t\t// Iterate all properties\r\n\t\tfor(String o : obj.keySet()) {\r\n\t\t\tif(obj.get(o).isJsonPrimitive())\r\n\t\t\t\taux.addProperty(o.toUpperCase(), obj.get(o).getAsString());\r\n\t\t\telse if(obj.get(o).isJsonArray())\r\n\t\t\t\taux.add(o.toUpperCase(), jsonKeysUpper(obj.get(o).getAsJsonArray()));\r\n\t\t\telse\r\n\t\t\t\taux.add(o.toUpperCase(), jsonKeysUpper(obj.get(o).getAsJsonObject()));\r\n\t\t}\r\n\t\treturn aux;\r\n\t}","title":"How to convert all keys in JSON response to uppercase? (JAVA)","body":"<p>I know it's an old question, but in case it helps.</p>\n<pre><code>public JsonArray jsonKeysUpper(JsonArray arr) {\n    JsonArray aux = new JsonArray();\n    for(int i = 0; i &lt; arr.size(); ++i)\n        aux.add(jsonKeysUpper(arr.get(i).getAsJsonObject()));\n    return aux;\n}\n\npublic JsonObject jsonKeysUpper(JsonObject obj) {\n    JsonObject aux = new JsonObject();\n    if(obj.isJsonPrimitive()) return obj;\n    if(obj.isJsonNull()) return null;\n    // Iterate all properties\n    for(String o : obj.keySet()) {\n        if(obj.get(o).isJsonPrimitive())\n            aux.addProperty(o.toUpperCase(), obj.get(o).getAsString());\n        else if(obj.get(o).isJsonArray())\n            aux.add(o.toUpperCase(), jsonKeysUpper(obj.get(o).getAsJsonArray()));\n        else\n            aux.add(o.toUpperCase(), jsonKeysUpper(obj.get(o).getAsJsonObject()));\n    }\n    return aux;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13681723,"reputation":31,"user_id":9871907,"display_name":"Harsh Garg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657975182,"creation_date":1657975182,"answer_id":73004287,"question_id":34677874,"body_markdown":"Use below code to convert your json to Upper case String keys json\r\n\r\n    ObjectMapper obj = new ObjectMapper().setPropertyNamingStrategy(PropertyNamingStrategy.UPPER_CAMEL_CASE); \r\n    obj.convertValue(jsonString, Map.class);","title":"How to convert all keys in JSON response to uppercase? (JAVA)","body":"<p>Use below code to convert your json to Upper case String keys json</p>\n<pre><code>ObjectMapper obj = new ObjectMapper().setPropertyNamingStrategy(PropertyNamingStrategy.UPPER_CAMEL_CASE); \nobj.convertValue(jsonString, Map.class);\n</code></pre>\n"}],"owner":{"account_id":5082789,"reputation":25,"user_id":4078362,"accept_rate":25,"display_name":"Palak"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21272,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1657975182,"creation_date":1452258442,"question_id":34677874,"body_markdown":"For example I have the following json response :\r\n\r\n    {\r\n        StaTuS:succees,\r\n        LanGuaGes: {\r\n              Key1: English,\r\n              key2: Spanish,\r\n              kEy3: Indian\r\n        }\r\n    } \r\n\r\nThe response can have many nested elements. I want to know how we can code in such a way that all the keys can be converted to uppercase in my response so that it matches the naming convention I used in my POJO class.\r\n\r\nLike this :\r\n\r\n    {\r\n       STATUS:succees,\r\n       LANGUAGES: {\r\n              KEY1: English,\r\n              KEY2: Spanish,\r\n              KEY3: Indian\r\n       }\r\n    } \r\n\r\n","title":"How to convert all keys in JSON response to uppercase? (JAVA)","body":"<p>For example I have the following json response :</p>\n\n<pre><code>{\n    StaTuS:succees,\n    LanGuaGes: {\n          Key1: English,\n          key2: Spanish,\n          kEy3: Indian\n    }\n} \n</code></pre>\n\n<p>The response can have many nested elements. I want to know how we can code in such a way that all the keys can be converted to uppercase in my response so that it matches the naming convention I used in my POJO class.</p>\n\n<p>Like this :</p>\n\n<pre><code>{\n   STATUS:succees,\n   LANGUAGES: {\n          KEY1: English,\n          KEY2: Spanish,\n          KEY3: Indian\n   }\n} \n</code></pre>\n"},{"tags":["java","scala","apache-flink","flink-streaming","flink-table-api"],"answers":[{"tags":[],"owner":{"account_id":1420595,"reputation":320,"user_id":1345303,"display_name":"None"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1657974840,"creation_date":1657931565,"answer_id":73000732,"question_id":72997289,"body_markdown":"Different Java versions caused the problem.\r\n\r\nProject Structure used Azul 13, while the application used Java 11 corretto. ","title":"java.lang.NoClassDefFoundError: org/apache/flink/table/types/logical/LogicalTypeRoot","body":"<p>Different Java versions caused the problem.</p>\n<p>Project Structure used Azul 13, while the application used Java 11 corretto.</p>\n"}],"owner":{"account_id":1420595,"reputation":320,"user_id":1345303,"display_name":"None"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":592,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73000732,"answer_count":1,"score":0,"last_activity_date":1657974840,"creation_date":1657903632,"question_id":72997289,"body_markdown":"I am trying to read parquet files via the **ParquetAvroInputFormat** but it throws *NoClassDefFoundError* exceptions. I find the class in the **flink-table-common** library.\r\n\r\nIt is in the path\r\n`org.apache.flink.table.types.logical.LogicalTypeRoot` but the `org.apache.flink.table` and after that seems could not be found.\r\n\r\nIt is a Scala project, **flink-table-api-scala-bridge** is also included. \r\n\r\nAny advice is welcome.\r\n","title":"java.lang.NoClassDefFoundError: org/apache/flink/table/types/logical/LogicalTypeRoot","body":"<p>I am trying to read parquet files via the <strong>ParquetAvroInputFormat</strong> but it throws <em>NoClassDefFoundError</em> exceptions. I find the class in the <strong>flink-table-common</strong> library.</p>\n<p>It is in the path\n<code>org.apache.flink.table.types.logical.LogicalTypeRoot</code> but the <code>org.apache.flink.table</code> and after that seems could not be found.</p>\n<p>It is a Scala project, <strong>flink-table-api-scala-bridge</strong> is also included.</p>\n<p>Any advice is welcome.</p>\n"},{"tags":["java","apache-spark","apache-spark-sql","cassandra","spark-cassandra-connector"],"comments":[{"owner":{"account_id":9963,"reputation":82983,"user_id":18627,"display_name":"Alex Ott"},"score":0,"creation_date":1657899495,"post_id":72995543,"comment_id":128927214,"body_markdown":"do you explicitly set `spark.cassandra.output.consistency.level` to `LOCAL_ONE` in your configuration?","body":"do you explicitly set <code>spark.cassandra.output.consistency.level</code> to <code>LOCAL_ONE</code> in your configuration?"},{"owner":{"account_id":15143507,"reputation":462,"user_id":10927888,"display_name":"Shasu"},"score":0,"creation_date":1657900757,"post_id":72995543,"comment_id":128927735,"body_markdown":"@Alex Ott Hi Alex , hope you are doing good. YES I tried with LOCAL_QUAROM its giving error so I changed it to LOCAL_ONE still getting same error.","body":"@Alex Ott Hi Alex , hope you are doing good. YES I tried with LOCAL_QUAROM its giving error so I changed it to LOCAL_ONE still getting same error."},{"owner":{"account_id":15143507,"reputation":462,"user_id":10927888,"display_name":"Shasu"},"score":0,"creation_date":1657901513,"post_id":72995543,"comment_id":128927981,"body_markdown":"@AlexOtt updated question with configurations i am using","body":"@AlexOtt updated question with configurations i am using"}],"answers":[{"tags":[],"owner":{"account_id":9963,"reputation":82983,"user_id":18627,"display_name":"Alex Ott"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657907394,"creation_date":1657905805,"answer_id":72997670,"question_id":72995543,"body_markdown":"This usually happens because Spark Cassandra Connector is trying to write data as fast as possible, and often it overloads individual Cassandra nodes, so they are becoming not responsive (maybe because of Java GC, compaction, etc.).\r\n\r\nYou can tune [write configuration parameters][1], like, decreasing `spark.cassandra.output.concurrent.writes`, `spark.cassandra.output.throughputMBPerSec`, etc., but very often it could be fixed by not using `LOCAL_ONE` consistency level (`spark.cassandra.output.consistency.level`), but `TWO`, or `LOCAL_QUORUM`.\r\n\r\nYour configuration is basically pushed nodes to the limit\r\n\r\n\r\n  [1]: https://github.com/datastax/spark-cassandra-connector/blob/master/doc/reference.md#write-tuning-parameters","title":"Cassandra timeout during SIMPLE write query at consistency LOCAL_ONE","body":"<p>This usually happens because Spark Cassandra Connector is trying to write data as fast as possible, and often it overloads individual Cassandra nodes, so they are becoming not responsive (maybe because of Java GC, compaction, etc.).</p>\n<p>You can tune <a href=\"https://github.com/datastax/spark-cassandra-connector/blob/master/doc/reference.md#write-tuning-parameters\" rel=\"nofollow noreferrer\">write configuration parameters</a>, like, decreasing <code>spark.cassandra.output.concurrent.writes</code>, <code>spark.cassandra.output.throughputMBPerSec</code>, etc., but very often it could be fixed by not using <code>LOCAL_ONE</code> consistency level (<code>spark.cassandra.output.consistency.level</code>), but <code>TWO</code>, or <code>LOCAL_QUORUM</code>.</p>\n<p>Your configuration is basically pushed nodes to the limit</p>\n"},{"tags":[],"owner":{"account_id":5357170,"reputation":14233,"user_id":4269535,"display_name":"Erick Ramirez"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1657973763,"creation_date":1657973763,"answer_id":73004118,"question_id":72995543,"body_markdown":"Write timeouts happen because your cluster is under-sized and cannot keep up with writes.\r\n\r\nYou will need to throttle the load from your Spark app as Alex Ott advised so it doesn&#39;t overload your cluster. Alternatively, you should consider increasing the capacity of your cluster by adding more nodes. Cheers!","title":"Cassandra timeout during SIMPLE write query at consistency LOCAL_ONE","body":"<p>Write timeouts happen because your cluster is under-sized and cannot keep up with writes.</p>\n<p>You will need to throttle the load from your Spark app as Alex Ott advised so it doesn't overload your cluster. Alternatively, you should consider increasing the capacity of your cluster by adding more nodes. Cheers!</p>\n"}],"owner":{"account_id":15143507,"reputation":462,"user_id":10927888,"display_name":"Shasu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1960,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1657973763,"creation_date":1657895239,"question_id":72995543,"body_markdown":"I am using spark-sql 3.0.2 with spark-cassandra-connector_2.12:3.1.0 along with java8 in my spark-project.\r\n\r\n\r\n**While writing to cassandra table I am facing below error**\r\n\r\n&gt; latest exception was   \r\n&gt; Cassandra timeout during SIMPLE write query at\r\n&gt; consistency LOCAL_ONE (1 replica were required but only 0 acknowledged\r\n&gt; the write)\r\n&gt; \r\n&gt; Please check the executor logs for more exceptions and information\r\n&gt;               \tat com.datastax.spark.connector.writer.AsyncStatementWriter.$anonfun$close$2(TableWriter.scala:282)\r\n&gt; \tat scala.Option.map(Option.scala:230) \tat\r\n&gt; com.datastax.spark.connector.writer.AsyncStatementWriter.close(TableWriter.scala:277)\r\n&gt; \tat\r\n&gt; com.datastax.spark.connector.datasource.CassandraDriverDataWriter.commit(CasssandraDriverDataWriterFactory.scala:46)\r\n&gt; \tat\r\n&gt; org.apache.spark.sql.execution.datasources.v2.DataWritingSparkTask$.$anonfun$run$7(WriteToDataSourceV2Exec.scala:450)\r\n&gt; \tat\r\n&gt; org.apache.spark.util.Utils$.tryWithSafeFinallyAndFailureCallbacks(Utils.scala:1411)\r\n&gt; \tat\r\n&gt; org.apache.spark.sql.execution.datasources.v2.DataWritingSparkTask$.run(WriteToDataSourceV2Exec.scala:477)\r\n&gt; \tat\r\n&gt; org.apache.spark.sql.execution.datasources.v2.V2TableWriteExec.$anonfun$writeWithV2$2(WriteToDataSourceV2Exec.scala:385)\r\n&gt; \tat org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90)\r\n&gt; \tat org.apache.spark.scheduler.Task.run(Task.scala:127) \tat\r\n&gt; org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:462)\r\n&gt; \tat org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1377)\r\n&gt; \tat\r\n&gt; org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:465)\r\n&gt; \tat\r\n&gt; java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n&gt; \tat\r\n&gt; java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n&gt; \tat java.lang.Thread.run(Thread.java:750) \tSuppressed:\r\n&gt; java.io.IOException: Failed to write statements to\r\n&gt; **kspace.table_cassandra**\r\n\r\n\r\n**I am using below configuration**\r\n\r\n    concurrentWrites: 2056 #1024 #64\r\n    outputBatchSizeBytes: 2048\r\n    outputBatchGroupingKey: partition\r\n    outputConsistencyLevel: LOCAL_ONE\r\n    outputBatchGroupingBufferSize: 3000\r\n    outputThroughput_mb_per_sec: 1024 #256\r\n    connectionKeep_alive_ms: 30000\r\n    readTimeout_ms: 600000\r\n    ignoreNulls: true\r\n    readConsistencyLevel: LOCAL_ONE","title":"Cassandra timeout during SIMPLE write query at consistency LOCAL_ONE","body":"<p>I am using spark-sql 3.0.2 with spark-cassandra-connector_2.12:3.1.0 along with java8 in my spark-project.</p>\n<p><strong>While writing to cassandra table I am facing below error</strong></p>\n<blockquote>\n<p>latest exception was<br />\nCassandra timeout during SIMPLE write query at\nconsistency LOCAL_ONE (1 replica were required but only 0 acknowledged\nthe write)</p>\n<p>Please check the executor logs for more exceptions and information\nat com.datastax.spark.connector.writer.AsyncStatementWriter.$anonfun$close$2(TableWriter.scala:282)\nat scala.Option.map(Option.scala:230)   at\ncom.datastax.spark.connector.writer.AsyncStatementWriter.close(TableWriter.scala:277)\nat\ncom.datastax.spark.connector.datasource.CassandraDriverDataWriter.commit(CasssandraDriverDataWriterFactory.scala:46)\nat\norg.apache.spark.sql.execution.datasources.v2.DataWritingSparkTask$.$anonfun$run$7(WriteToDataSourceV2Exec.scala:450)\nat\norg.apache.spark.util.Utils$.tryWithSafeFinallyAndFailureCallbacks(Utils.scala:1411)\nat\norg.apache.spark.sql.execution.datasources.v2.DataWritingSparkTask$.run(WriteToDataSourceV2Exec.scala:477)\nat\norg.apache.spark.sql.execution.datasources.v2.V2TableWriteExec.$anonfun$writeWithV2$2(WriteToDataSourceV2Exec.scala:385)\nat org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90)\nat org.apache.spark.scheduler.Task.run(Task.scala:127)  at\norg.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:462)\nat org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1377)\nat\norg.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:465)\nat\njava.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\nat\njava.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\nat java.lang.Thread.run(Thread.java:750)    Suppressed:\njava.io.IOException: Failed to write statements to\n<strong>kspace.table_cassandra</strong></p>\n</blockquote>\n<p><strong>I am using below configuration</strong></p>\n<pre><code>concurrentWrites: 2056 #1024 #64\noutputBatchSizeBytes: 2048\noutputBatchGroupingKey: partition\noutputConsistencyLevel: LOCAL_ONE\noutputBatchGroupingBufferSize: 3000\noutputThroughput_mb_per_sec: 1024 #256\nconnectionKeep_alive_ms: 30000\nreadTimeout_ms: 600000\nignoreNulls: true\nreadConsistencyLevel: LOCAL_ONE\n</code></pre>\n"},{"tags":["java","equals"],"comments":[{"owner":{"account_id":20278375,"reputation":239,"user_id":14872824,"display_name":"Aashish Jha"},"score":0,"creation_date":1657903458,"post_id":72997130,"comment_id":128928603,"body_markdown":"you could use equatable instead, read about it.","body":"you could use equatable instead, read about it."},{"owner":{"account_id":1079173,"reputation":42590,"user_id":1076640,"display_name":"yshavit"},"score":2,"creation_date":1657907997,"post_id":72997130,"comment_id":128929883,"body_markdown":"btw, if you override equals, you also need to override hashCode. If you know about that, carry on! :-) If not, definitely do a search about the topic.","body":"btw, if you override equals, you also need to override hashCode. If you know about that, carry on! :-) If not, definitely do a search about the topic."},{"owner":{"account_id":7413926,"reputation":5474,"user_id":11374957,"display_name":"Kaan"},"score":0,"creation_date":1657946289,"post_id":72997130,"comment_id":128935773,"body_markdown":"Addressed by: https://stackoverflow.com/a/49608588/11374957","body":"Addressed by: <a href=\"https://stackoverflow.com/a/49608588/11374957\">stackoverflow.com/a/49608588/11374957</a>"}],"answers":[{"tags":[],"owner":{"account_id":14155962,"reputation":578,"user_id":10226695,"display_name":"Shavk with a Hoon"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1657973536,"creation_date":1657903622,"answer_id":72997286,"question_id":72997130,"body_markdown":"You are almost there. However, the `instanceof` will always be `true` here if you are actually comparing to books. The below should work. \r\n\r\n```\r\nclass Book {\r\n\r\n     private String title;\r\n     private boolean bound;\r\n\r\n     public Book(String title, boolean bound) {\r\n         this.title = title;\r\n         this.bound = bound;\r\n     }\r\n\r\n     public String getTitle(){\r\n          return this.title;\r\n     }\r\n     public boolean isBound(){\r\n          return this.bound;\r\n     }\r\n     @Override\r\n     public boolean equals(Obj obj) {\r\n          if(!(obj instanceof Book)){\r\n               return false;\r\n          }\r\n          if (((Book) obj).isBound() == this.isBound() &amp;&amp; ((Book) obj).getTitle().equals(this.getTitle())) {\r\n               return true;\r\n          }\r\n          return false;\r\n     }\r\n}\r\n```\r\n\r\nNow you can compare two books. \r\n```\r\nBook b1  = new Book(new String(&quot;Title1&quot;), true);\r\nBook b2  = new Book(new String(&quot;Title2&quot;), true);\r\nBook b3  = new Book(new String(&quot;Title1&quot;), true);\r\n\r\nSystem.out.println(b1.equals(b2)); // Output is false\r\nSystem.out.println(b1.equals(b3)); // Output is true\r\n\r\n```\r\n","title":"Need to write a equals-method to check if a book is the same as another book but one book contains multiple values","body":"<p>You are almost there. However, the <code>instanceof</code> will always be <code>true</code> here if you are actually comparing to books. The below should work.</p>\n<pre><code>class Book {\n\n     private String title;\n     private boolean bound;\n\n     public Book(String title, boolean bound) {\n         this.title = title;\n         this.bound = bound;\n     }\n\n     public String getTitle(){\n          return this.title;\n     }\n     public boolean isBound(){\n          return this.bound;\n     }\n     @Override\n     public boolean equals(Obj obj) {\n          if(!(obj instanceof Book)){\n               return false;\n          }\n          if (((Book) obj).isBound() == this.isBound() &amp;&amp; ((Book) obj).getTitle().equals(this.getTitle())) {\n               return true;\n          }\n          return false;\n     }\n}\n</code></pre>\n<p>Now you can compare two books.</p>\n<pre><code>Book b1  = new Book(new String(&quot;Title1&quot;), true);\nBook b2  = new Book(new String(&quot;Title2&quot;), true);\nBook b3  = new Book(new String(&quot;Title1&quot;), true);\n\nSystem.out.println(b1.equals(b2)); // Output is false\nSystem.out.println(b1.equals(b3)); // Output is true\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5273740,"reputation":698,"user_id":4211252,"display_name":"Thilo Schwarz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1657906141,"creation_date":1657903962,"answer_id":72997340,"question_id":72997130,"body_markdown":"The correct implementation would be:\r\n```\r\n@Override\r\npublic boolean equals(Object obj) {\r\n\tif(this == obj)\r\n\t\treturn true;\r\n\tif(!(obj instanceof Book))\r\n\t\treturn false;\r\n\tBook other = (Book) obj;\r\n\treturn bound == other.bound &amp;&amp; Objects.equals(title, other.title);\r\n}\r\n```\r\nBoth object properties are respected!\r\n\r\n** **Update** **\r\n\r\nTo avoid using ```instanceof``` you should use \r\n```\r\nif(this.getClass() != obj.getClass())\r\n   return false;\r\n```\r\n\r\nThanks user16320675 for the hint!","title":"Need to write a equals-method to check if a book is the same as another book but one book contains multiple values","body":"<p>The correct implementation would be:</p>\n<pre><code>@Override\npublic boolean equals(Object obj) {\n    if(this == obj)\n        return true;\n    if(!(obj instanceof Book))\n        return false;\n    Book other = (Book) obj;\n    return bound == other.bound &amp;&amp; Objects.equals(title, other.title);\n}\n</code></pre>\n<p>Both object properties are respected!</p>\n<p>** <strong>Update</strong> **</p>\n<p>To avoid using <code>instanceof</code> you should use</p>\n<pre><code>if(this.getClass() != obj.getClass())\n   return false;\n</code></pre>\n<p>Thanks user16320675 for the hint!</p>\n"}],"owner":{"account_id":25680429,"reputation":3,"user_id":19443296,"display_name":"LoveFile"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":294,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72997340,"answer_count":2,"score":0,"last_activity_date":1657973536,"creation_date":1657902839,"question_id":72997130,"body_markdown":"Below is my code at this moment, I need to add to the equals method so when I create a two books they will only be equal if both of the attributes are the same. Hopefully you guys can help.\r\n\r\n```java\r\npublic class Book {\r\n\tprivate String title;\r\n\tprivate boolean bound;\r\n\r\n\tBook(String title, boolean bound) {\r\n\t\tthis.title = title;\r\n\t\tthis.bound = bound;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic boolean equals(Object obj) {\r\n        if ((obj instanceof Book)) {\r\n            return true;\r\n        }\r\n    \treturn false;\r\n\t}\r\n}\r\n```\r\n","title":"Need to write a equals-method to check if a book is the same as another book but one book contains multiple values","body":"<p>Below is my code at this moment, I need to add to the equals method so when I create a two books they will only be equal if both of the attributes are the same. Hopefully you guys can help.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Book {\n    private String title;\n    private boolean bound;\n\n    Book(String title, boolean bound) {\n        this.title = title;\n        this.bound = bound;\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n        if ((obj instanceof Book)) {\n            return true;\n        }\n        return false;\n    }\n}\n</code></pre>\n"},{"tags":["java","lambda","euclidean-distance"],"answers":[{"tags":[],"owner":{"account_id":5126886,"reputation":20904,"user_id":4108590,"accept_rate":57,"display_name":"Ravindra Ranwala"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1657962893,"creation_date":1657962893,"answer_id":73002971,"question_id":73002934,"body_markdown":"You can use any reference type as a parameter to the `Function`. Your `BiFunction` should take two `int[]` as it&#39;s input and return a `Double`. So, the target type of the assignment should be something like this.\r\n\r\n    BiFunction&lt;int[], int[], Double&gt; euclideanDistance =\r\n    \t            (int[] x, int[] y) -&gt; Math.sqrt(Math.pow(x[0] - y[0], 2) + Math.pow(x[1] - y[1], 2));\r\n\r\n","title":"How to pass an Array as a parameter to a Function/Bifunction?","body":"<p>You can use any reference type as a parameter to the <code>Function</code>. Your <code>BiFunction</code> should take two <code>int[]</code> as it's input and return a <code>Double</code>. So, the target type of the assignment should be something like this.</p>\n<pre><code>BiFunction&lt;int[], int[], Double&gt; euclideanDistance =\n                (int[] x, int[] y) -&gt; Math.sqrt(Math.pow(x[0] - y[0], 2) + Math.pow(x[1] - y[1], 2));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1657966515,"creation_date":1657966085,"answer_id":73003304,"question_id":73002934,"body_markdown":"The types of function (`Integer`) you&#39;ve defined don&#39;t match expected arguments of your lambda expression (`Integer[]`).\r\n\r\nAnd there&#39;s no need to use arrays of wrapper type, as well as no need to resort to `sqrt()` and `pow()` since we have [`hypot()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Math.html#hypot(double,double)) method in the `Math` class which does exactly what is needed:\r\n\r\n&gt; **Returns:**\r\n    `sqrt(x2 +y2)` without intermediate overflow or underflow\r\n\r\nSo the function for calculating the Euclidean distance can be written like this:\r\n\r\n```\r\nBiFunction&lt;int[], int[], Double&gt; euclideanDistance =\r\n    (int[] x, int[] y) -&gt; Math.hypot(x[0] - y[0], x[1] - y[1]);\r\n```","title":"How to pass an Array as a parameter to a Function/Bifunction?","body":"<p>The types of function (<code>Integer</code>) you've defined don't match expected arguments of your lambda expression (<code>Integer[]</code>).</p>\n<p>And there's no need to use arrays of wrapper type, as well as no need to resort to <code>sqrt()</code> and <code>pow()</code> since we have <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Math.html#hypot(double,double)\" rel=\"nofollow noreferrer\"><code>hypot()</code></a> method in the <code>Math</code> class which does exactly what is needed:</p>\n<blockquote>\n<p><strong>Returns:</strong>\n<code>sqrt(x2 +y2)</code> without intermediate overflow or underflow</p>\n</blockquote>\n<p>So the function for calculating the Euclidean distance can be written like this:</p>\n<pre><code>BiFunction&lt;int[], int[], Double&gt; euclideanDistance =\n    (int[] x, int[] y) -&gt; Math.hypot(x[0] - y[0], x[1] - y[1]);\n</code></pre>\n"}],"owner":{"account_id":1279032,"reputation":3329,"user_id":1233600,"accept_rate":46,"display_name":"Nilotpal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":193,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73002971,"answer_count":2,"score":-1,"last_activity_date":1657973474,"creation_date":1657962572,"question_id":73002934,"body_markdown":"I need to pass an array as parameter into a `BiFunction`.\r\n\r\n*Use case :*\r\n\r\n&gt; Calculate the Euclidean Distance of `2` coordinates given in an array.\r\n&gt; `coordinate1` and `coordinate2` are an array.\r\n\r\nThe below trial, makes the intent clearer.\r\n```\r\nBiFunction&lt;Integer, Integer, Double&gt; euclideanDistance =\r\n   (Integer[] x, Integer[] y) -&gt; Math.sqrt(Math.pow(x[0] - y[0], 2) + Math.pow(x[1] - y[1], 2));\r\n```\r\nBut the compiler complains :\r\n```\r\nincompatible types:\r\nincompatible parameter types in lambda expression :\r\nExpected Integer but found Integer[]\r\n```","title":"How to pass an Array as a parameter to a Function/Bifunction?","body":"<p>I need to pass an array as parameter into a <code>BiFunction</code>.</p>\n<p><em>Use case :</em></p>\n<blockquote>\n<p>Calculate the Euclidean Distance of <code>2</code> coordinates given in an array.\n<code>coordinate1</code> and <code>coordinate2</code> are an array.</p>\n</blockquote>\n<p>The below trial, makes the intent clearer.</p>\n<pre><code>BiFunction&lt;Integer, Integer, Double&gt; euclideanDistance =\n   (Integer[] x, Integer[] y) -&gt; Math.sqrt(Math.pow(x[0] - y[0], 2) + Math.pow(x[1] - y[1], 2));\n</code></pre>\n<p>But the compiler complains :</p>\n<pre><code>incompatible types:\nincompatible parameter types in lambda expression :\nExpected Integer but found Integer[]\n</code></pre>\n"},{"tags":["java","xml","dom","xml-parsing"],"comments":[{"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"score":0,"creation_date":1657967567,"post_id":73002846,"comment_id":128938644,"body_markdown":"Please show your code.","body":"Please show your code."},{"owner":{"account_id":25582502,"reputation":1,"user_id":19360783,"display_name":"Prakhar Tewari"},"score":0,"creation_date":1657973112,"post_id":73002846,"comment_id":128939592,"body_markdown":"I posted the code in the answer section.","body":"I posted the code in the answer section."}],"answers":[{"tags":[],"owner":{"account_id":25582502,"reputation":1,"user_id":19360783,"display_name":"Prakhar Tewari"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657973313,"creation_date":1657973313,"answer_id":73004073,"question_id":73002846,"body_markdown":"```\r\npackage api;\r\n\r\nimport javax.xml.parsers.DocumentBuilderFactory;\r\nimport javax.xml.parsers.DocumentBuilder;\r\nimport org.w3c.dom.Document;\r\nimport org.w3c.dom.NodeList;\r\nimport org.w3c.dom.Node;\r\nimport org.w3c.dom.Element;\r\nimport java.io.File;\r\npublic class Web{\r\n    public static void main(String argv[])\r\n    {\r\n        try {\r\n            \r\n            File file = new File(&quot;C:\\\\Users\\\\Prakhar\\\\OneDrive\\\\Desktop\\\\WBE2.xml.txt&quot;);\r\n\r\n            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\r\n\r\n            \r\n            DocumentBuilder db = dbf.newDocumentBuilder();\r\n            Document doc = db.parse(file);\r\n\r\n            doc.getDocumentElement().normalize();\r\n            System.out.println(&quot;Root element: &quot; + doc.getDocumentElement().getNodeName());\r\n            \r\n            NodeList nodeList = doc.getElementsByTagName(&quot;Ws&quot;);\r\n\r\n            for (int i = 0; i &lt; nodeList.getLength(); ++i) {\r\n                Node node = nodeList.item(i);\r\n                System.out.println(&quot;\\nNode Name :&quot; + node.getNodeName());\r\n                \r\n                if (node.getNodeType()== Node.ELEMENT_NODE) {\r\n                   \r\n                \tElement tElement = (Element)node;\r\n                    \r\n\r\n                    System.out.println(&quot;IMEI: &quot; +\r\n                            doc.getDocumentElement().getChildNodes().item(0).getFirstChild().getChildNodes().item(0).getAttributes().getNamedItem(&quot;V&quot;).getNodeValue());\r\n\r\n                    System.out.println(&quot;Date/Time: &quot; +\r\n                            doc.getDocumentElement().getChildNodes().item(0).getFirstChild().getChildNodes().item(1).getAttributes().getNamedItem(&quot;V&quot;).getNodeValue());\r\n\r\n                    System.out.println(&quot;Temperature: &quot; +\r\n                            doc.getDocumentElement().getChildNodes().item(0).getFirstChild().getChildNodes().item(2).getAttributes().getNamedItem(&quot;V&quot;).getNodeValue());\r\n                    \r\n                    System.out.println(&quot;Humidity: &quot; +\r\n                            doc.getDocumentElement().getChildNodes().item(0).getFirstChild().getChildNodes().item(1).getAttributes().getNamedItem(&quot;V&quot;).getNodeValue());\r\n                    \r\n                    System.out.println(&quot;Wind Speed: &quot; +\r\n                            doc.getDocumentElement().getChildNodes().item(0).getFirstChild().getChildNodes().item(2).getAttributes().getNamedItem(&quot;V&quot;).getNodeValue());\r\n\r\n\r\n\r\n                }\r\n            }\r\n        }\r\n        catch (Exception e) {\r\n            System.out.println(e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n","title":"XML parsing by tag-names and attributes method in DOM tree structure","body":"<pre><code>package api;\n\nimport javax.xml.parsers.DocumentBuilderFactory;\nimport javax.xml.parsers.DocumentBuilder;\nimport org.w3c.dom.Document;\nimport org.w3c.dom.NodeList;\nimport org.w3c.dom.Node;\nimport org.w3c.dom.Element;\nimport java.io.File;\npublic class Web{\n    public static void main(String argv[])\n    {\n        try {\n            \n            File file = new File(&quot;C:\\\\Users\\\\Prakhar\\\\OneDrive\\\\Desktop\\\\WBE2.xml.txt&quot;);\n\n            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\n\n            \n            DocumentBuilder db = dbf.newDocumentBuilder();\n            Document doc = db.parse(file);\n\n            doc.getDocumentElement().normalize();\n            System.out.println(&quot;Root element: &quot; + doc.getDocumentElement().getNodeName());\n            \n            NodeList nodeList = doc.getElementsByTagName(&quot;Ws&quot;);\n\n            for (int i = 0; i &lt; nodeList.getLength(); ++i) {\n                Node node = nodeList.item(i);\n                System.out.println(&quot;\\nNode Name :&quot; + node.getNodeName());\n                \n                if (node.getNodeType()== Node.ELEMENT_NODE) {\n                   \n                    Element tElement = (Element)node;\n                    \n\n                    System.out.println(&quot;IMEI: &quot; +\n                            doc.getDocumentElement().getChildNodes().item(0).getFirstChild().getChildNodes().item(0).getAttributes().getNamedItem(&quot;V&quot;).getNodeValue());\n\n                    System.out.println(&quot;Date/Time: &quot; +\n                            doc.getDocumentElement().getChildNodes().item(0).getFirstChild().getChildNodes().item(1).getAttributes().getNamedItem(&quot;V&quot;).getNodeValue());\n\n                    System.out.println(&quot;Temperature: &quot; +\n                            doc.getDocumentElement().getChildNodes().item(0).getFirstChild().getChildNodes().item(2).getAttributes().getNamedItem(&quot;V&quot;).getNodeValue());\n                    \n                    System.out.println(&quot;Humidity: &quot; +\n                            doc.getDocumentElement().getChildNodes().item(0).getFirstChild().getChildNodes().item(1).getAttributes().getNamedItem(&quot;V&quot;).getNodeValue());\n                    \n                    System.out.println(&quot;Wind Speed: &quot; +\n                            doc.getDocumentElement().getChildNodes().item(0).getFirstChild().getChildNodes().item(2).getAttributes().getNamedItem(&quot;V&quot;).getNodeValue());\n\n\n\n                }\n            }\n        }\n        catch (Exception e) {\n            System.out.println(e);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":25582502,"reputation":1,"user_id":19360783,"display_name":"Prakhar Tewari"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":139,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1657973313,"creation_date":1657961668,"question_id":73002846,"body_markdown":"I am trying to parse this xml file but I&#39;m only getting the root elements and not it&#39;s child nodes.\r\nI need information of some specific values from the nodes like using .item() method. Since,  I&#39;m not entering it&#39;s child nodes so it didn&#39;t give me the specified values. Please help me solving this...\r\n\r\nXML file\r\n```\r\n&lt;Ws&gt;\r\n\t&lt;Id V=&#39;862631039910699&#39;&gt;\r\n\t\t&lt;Dt V=&#39;08/07/22;11/25&#39;&gt;\r\n\t\t\t&lt;T V=&#39;24.3;24.3;24.3&#39;/&gt;\r\n\t\t\t&lt;H V=&#39;98.0;98.0;98.0&#39;/&gt;\r\n\t\t\t&lt;W V=&#39;1.3;272&#39;/&gt;\r\n\t\t\t&lt;G V=&#39;25;2.4&#39;/&gt;\r\n\t\t\t&lt;A V=&#39;0.00;468;472;471&#39;/&gt;\r\n\t\t\t&lt;D V=&#39;0.00;8.9;8.065;0.0000;0.0000&#39;/&gt;\r\n\t\t&lt;/Dt&gt;\r\n\t&lt;/Id&gt;\r\n&lt;/Ws&gt;\r\n```","title":"XML parsing by tag-names and attributes method in DOM tree structure","body":"<p>I am trying to parse this xml file but I'm only getting the root elements and not it's child nodes.\nI need information of some specific values from the nodes like using .item() method. Since,  I'm not entering it's child nodes so it didn't give me the specified values. Please help me solving this...</p>\n<p>XML file</p>\n<pre><code>&lt;Ws&gt;\n    &lt;Id V='862631039910699'&gt;\n        &lt;Dt V='08/07/22;11/25'&gt;\n            &lt;T V='24.3;24.3;24.3'/&gt;\n            &lt;H V='98.0;98.0;98.0'/&gt;\n            &lt;W V='1.3;272'/&gt;\n            &lt;G V='25;2.4'/&gt;\n            &lt;A V='0.00;468;472;471'/&gt;\n            &lt;D V='0.00;8.9;8.065;0.0000;0.0000'/&gt;\n        &lt;/Dt&gt;\n    &lt;/Id&gt;\n&lt;/Ws&gt;\n</code></pre>\n"},{"tags":["java","json","spring","spring-boot","cassandra"],"answers":[{"tags":[],"owner":{"account_id":71985,"reputation":7903,"user_id":208013,"display_name":"Mirek Pluta"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1657968055,"creation_date":1657968055,"answer_id":73003504,"question_id":73003394,"body_markdown":"Jackson serializer by default does not serialize private fields without accessor methods. \r\n\r\nEither:\r\n * make fields available (make it public or add getters)\r\n * configure `ObjectMapper` used by jackson to also serialize private fields (for details you can reference this link: https://www.baeldung.com/spring-boot-customize-jackson-objectmapper)","title":"Why does Spring Boot Controller give JSON but empty structure [{},{}]","body":"<p>Jackson serializer by default does not serialize private fields without accessor methods.</p>\n<p>Either:</p>\n<ul>\n<li>make fields available (make it public or add getters)</li>\n<li>configure <code>ObjectMapper</code> used by jackson to also serialize private fields (for details you can reference this link: <a href=\"https://www.baeldung.com/spring-boot-customize-jackson-objectmapper\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-boot-customize-jackson-objectmapper</a>)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":24774354,"reputation":116,"user_id":18657988,"display_name":"riccadema"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657970205,"creation_date":1657970205,"answer_id":73003727,"question_id":73003394,"body_markdown":"## Answer ##\r\n\r\n&gt; Even though I have configured everything correctly, for some reason it seems that the JSON conversion is not happening properly.\r\n\r\nThis should be the solution\r\n\r\n    // Defining the table name into DB - OK\r\n    @Table(&quot;student&quot;)\r\n    public class Student {\r\n    \r\n        // Defining the id column w/type - OK\r\n        // ...\r\n        \r\n        // Defining a private field per column - OK\r\n        // ...\r\n        \r\n        // Defining public empty constructor - Missing!\r\n        public Student() {}\r\n\r\n        // Defining public getters and setters for each field - Missing!\r\n        public String getStudent_city() {\r\n            return student_city;\r\n        }\r\n\r\n        public String setStudent_city(String student_city) {\r\n            this.student_city = student_city;\r\n        }\r\n\r\n        // ...\r\n    }\r\n\r\nwhen you create JPA entities, in addition to what you did, you **must** also set the **empty constructor** and **public getters/setters**\r\n\r\n&gt; I mean I can see 2 braces in the http output. The single braces pair {} is corresponding to a student. However, still this is not the output that I have desired. Any idea whats causing this ?\r\n\r\nIn your case, if you notice, it gets the data from the database correctly but, since there are no public get and set methods, **Hibernate fails to do the mapping between the local object and tables in the db** and therefore does not allow the data to be stored locally (and then shown) correctly\r\n\r\n\r\n----------\r\n\r\nI hope I was clear, let me know how it goes! :)\r\n","title":"Why does Spring Boot Controller give JSON but empty structure [{},{}]","body":"<h2>Answer</h2>\n<blockquote>\n<p>Even though I have configured everything correctly, for some reason it seems that the JSON conversion is not happening properly.</p>\n</blockquote>\n<p>This should be the solution</p>\n<pre><code>// Defining the table name into DB - OK\n@Table(&quot;student&quot;)\npublic class Student {\n\n    // Defining the id column w/type - OK\n    // ...\n    \n    // Defining a private field per column - OK\n    // ...\n    \n    // Defining public empty constructor - Missing!\n    public Student() {}\n\n    // Defining public getters and setters for each field - Missing!\n    public String getStudent_city() {\n        return student_city;\n    }\n\n    public String setStudent_city(String student_city) {\n        this.student_city = student_city;\n    }\n\n    // ...\n}\n</code></pre>\n<p>when you create JPA entities, in addition to what you did, you <strong>must</strong> also set the <strong>empty constructor</strong> and <strong>public getters/setters</strong></p>\n<blockquote>\n<p>I mean I can see 2 braces in the http output. The single braces pair {} is corresponding to a student. However, still this is not the output that I have desired. Any idea whats causing this ?</p>\n</blockquote>\n<p>In your case, if you notice, it gets the data from the database correctly but, since there are no public get and set methods, <strong>Hibernate fails to do the mapping between the local object and tables in the db</strong> and therefore does not allow the data to be stored locally (and then shown) correctly</p>\n<hr />\n<p>I hope I was clear, let me know how it goes! :)</p>\n"}],"owner":{"account_id":17394740,"reputation":21,"user_id":12604607,"display_name":"javadeveloper"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":508,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73003504,"answer_count":2,"score":0,"last_activity_date":1657972570,"creation_date":1657966858,"question_id":73003394,"body_markdown":"I have a spring boot application with the following controller \r\n\r\n    package com.training.casapp.controller;\r\n    \r\n    import com.training.casapp.entity.Student;\r\n    import com.training.casapp.repository.StudentRepository;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.http.HttpStatus;\r\n    import org.springframework.http.MediaType;\r\n    import org.springframework.http.ResponseEntity;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    \r\n    import java.util.List;\r\n    \r\n    @RestController\r\n    public class StudentController {\r\n    \r\n       @Autowired\r\n        StudentRepository studentRepository;\r\n    \r\n        @GetMapping(value = &quot;/studentslist&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\r\n        List&lt;Student&gt; getStudentsList() {\r\n            List&lt;Student&gt; studentsList = studentRepository.findAll();\r\n            return studentsList;\r\n        }\r\n    }\r\n\r\nand the CassandraRepository as \r\n\r\n    package com.training.casapp.repository;\r\n    \r\n    import com.training.casapp.entity.Student;\r\n    import org.springframework.data.cassandra.repository.CassandraRepository;\r\n    import org.springframework.stereotype.Repository;\r\n    \r\n    @Repository\r\n    public interface StudentRepository extends CassandraRepository&lt;Student, Integer&gt; {}\r\n\r\nThe Student Class is ddefined as follows\r\n\r\n    package com.training.casapp.entity;\r\n    \r\n    import org.springframework.data.cassandra.core.cql.PrimaryKeyType;\r\n    import org.springframework.data.cassandra.core.mapping.Column;\r\n    import org.springframework.data.cassandra.core.mapping.PrimaryKeyColumn;\r\n    import org.springframework.data.cassandra.core.mapping.Table;\r\n    \r\n    @Table(&quot;student&quot;)\r\n    public class Student {\r\n    \r\n        @PrimaryKeyColumn(type = PrimaryKeyType.PARTITIONED) private Integer student_id;\r\n        @Column private String student_city;\r\n        @Column private Integer student_fees;\r\n        @Column private String student_name;\r\n        @Column private Long student_phone;\r\n        \r\n    }\r\n\r\n\r\n\r\nI have 2 records in student table \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nhowever, when I access `http://localhost:8081/casapp/studentslist` I get following response in browser \r\n\r\n    [{},{}]\r\n\r\nEven though I have configured everything correctly, for some reason it seems that the JSON conversion is not happening properly. I mean I can see 2 braces in the http output. The single braces pair {} is corresponding to a student. However, still this is not the output that I have desired. Any idea whats causing this ? \r\n\r\nI have also tried overriding the toString() method. Didn&#39;t help.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/C6es1.png","title":"Why does Spring Boot Controller give JSON but empty structure [{},{}]","body":"<p>I have a spring boot application with the following controller</p>\n<pre><code>package com.training.casapp.controller;\n\nimport com.training.casapp.entity.Student;\nimport com.training.casapp.repository.StudentRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport java.util.List;\n\n@RestController\npublic class StudentController {\n\n   @Autowired\n    StudentRepository studentRepository;\n\n    @GetMapping(value = &quot;/studentslist&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\n    List&lt;Student&gt; getStudentsList() {\n        List&lt;Student&gt; studentsList = studentRepository.findAll();\n        return studentsList;\n    }\n}\n</code></pre>\n<p>and the CassandraRepository as</p>\n<pre><code>package com.training.casapp.repository;\n\nimport com.training.casapp.entity.Student;\nimport org.springframework.data.cassandra.repository.CassandraRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface StudentRepository extends CassandraRepository&lt;Student, Integer&gt; {}\n</code></pre>\n<p>The Student Class is ddefined as follows</p>\n<pre><code>package com.training.casapp.entity;\n\nimport org.springframework.data.cassandra.core.cql.PrimaryKeyType;\nimport org.springframework.data.cassandra.core.mapping.Column;\nimport org.springframework.data.cassandra.core.mapping.PrimaryKeyColumn;\nimport org.springframework.data.cassandra.core.mapping.Table;\n\n@Table(&quot;student&quot;)\npublic class Student {\n\n    @PrimaryKeyColumn(type = PrimaryKeyType.PARTITIONED) private Integer student_id;\n    @Column private String student_city;\n    @Column private Integer student_fees;\n    @Column private String student_name;\n    @Column private Long student_phone;\n    \n}\n</code></pre>\n<p>I have 2 records in student table</p>\n<p><a href=\"https://i.stack.imgur.com/C6es1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C6es1.png\" alt=\"enter image description here\" /></a></p>\n<p>however, when I access <code>http://localhost:8081/casapp/studentslist</code> I get following response in browser</p>\n<pre><code>[{},{}]\n</code></pre>\n<p>Even though I have configured everything correctly, for some reason it seems that the JSON conversion is not happening properly. I mean I can see 2 braces in the http output. The single braces pair {} is corresponding to a student. However, still this is not the output that I have desired. Any idea whats causing this ?</p>\n<p>I have also tried overriding the toString() method. Didn't help.</p>\n"},{"tags":["java","hibernate"],"answers":[{"tags":[],"owner":{"account_id":2171085,"reputation":4773,"user_id":1923055,"accept_rate":71,"display_name":"kark"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1380513742,"creation_date":1380513742,"answer_id":19086287,"question_id":19085816,"body_markdown":"**Your problem is creation session Factory** for your application it happening in `HibernateUtilities` class , the reason may be due to , you cannot create a sessionfactory by `sessionRegistry` create it by hibernate Configuration class, because you registered your configuration in `hibernate.cfg.xml`\r\n\r\nJust Replace the following code in HibernateUtilities class\r\n\r\n            `sessionFactory = configuration.buildSessionFactory(serviceRegistry);`\r\nto\r\n\r\n            `sessionFactory = configuration.buildSessionFactory();`\r\n\r\n","title":"how to fix the error: &quot;INFO: HHH000206: hibernate.properties not found&quot;?","body":"<p><strong>Your problem is creation session Factory</strong> for your application it happening in <code>HibernateUtilities</code> class , the reason may be due to , you cannot create a sessionfactory by <code>sessionRegistry</code> create it by hibernate Configuration class, because you registered your configuration in <code>hibernate.cfg.xml</code></p>\n\n<p>Just Replace the following code in HibernateUtilities class</p>\n\n<pre><code>        `sessionFactory = configuration.buildSessionFactory(serviceRegistry);`\n</code></pre>\n\n<p>to</p>\n\n<pre><code>        `sessionFactory = configuration.buildSessionFactory();`\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3339332,"reputation":694,"user_id":2805930,"accept_rate":19,"display_name":"Hareesh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1380523999,"creation_date":1380519274,"answer_id":19087074,"question_id":19085816,"body_markdown":"The configuration files must be placed in the classpath. Make  Sure that the hibernate.cfg.xml is in class-path. As your program is console program, u need to place that hibernate.cfg.xml in src folder. If u have placed it in other folder than specify it in `Confingure.configure(fileName);` \r\nAnd as answered By Mr.Kark u have to delete following lines\r\n\r\n `serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();`","title":"how to fix the error: &quot;INFO: HHH000206: hibernate.properties not found&quot;?","body":"<p>The configuration files must be placed in the classpath. Make  Sure that the hibernate.cfg.xml is in class-path. As your program is console program, u need to place that hibernate.cfg.xml in src folder. If u have placed it in other folder than specify it in <code>Confingure.configure(fileName);</code> \nAnd as answered By Mr.Kark u have to delete following lines</p>\n\n<p><code>serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();</code></p>\n"},{"tags":[],"owner":{"account_id":3252602,"reputation":916,"user_id":2742489,"display_name":"Ha Nguyen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1380530271,"creation_date":1380530271,"answer_id":19089825,"question_id":19085816,"body_markdown":"I think you are missing some hibernate libs (maybe `hibernate-tools.jar` I guess). So please check it.\r\n\r\nAnyway, I saw you using the hibernate annotations, so please try this code and see what happen with error properties not found.\r\n\r\n    try {\r\n\t\t\tAnnotationConfiguration configuration = new AnnotationConfiguration();\t\t\t\r\n\t\t\tsessionFactory = configuration.configure().buildSessionFactory();\t\t\r\n\t\t}","title":"how to fix the error: &quot;INFO: HHH000206: hibernate.properties not found&quot;?","body":"<p>I think you are missing some hibernate libs (maybe <code>hibernate-tools.jar</code> I guess). So please check it.</p>\n\n<p>Anyway, I saw you using the hibernate annotations, so please try this code and see what happen with error properties not found.</p>\n\n<pre><code>try {\n        AnnotationConfiguration configuration = new AnnotationConfiguration();          \n        sessionFactory = configuration.configure().buildSessionFactory();       \n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1456239601,"creation_date":1456239601,"answer_id":35580856,"question_id":19085816,"body_markdown":"That&#39;s only an INFO message telling that you don&#39;t have a `hibernate.properties` file. This property file is not mandatory and so it&#39;s not what prevents your application from working.\r\n\r\nIf you want to know what caused the `SessionFactory` creation failure, you need to change your catch block to:\r\n\r\n    catch(HibernateException exception){\r\n         System.out.println(&quot;Problem creating session factory&quot;);\r\n         exception.printStackTrace();\r\n    }\r\n\r\nYou should use a logging framework instead.","title":"how to fix the error: &quot;INFO: HHH000206: hibernate.properties not found&quot;?","body":"<p>That's only an INFO message telling that you don't have a <code>hibernate.properties</code> file. This property file is not mandatory and so it's not what prevents your application from working.</p>\n\n<p>If you want to know what caused the <code>SessionFactory</code> creation failure, you need to change your catch block to:</p>\n\n<pre><code>catch(HibernateException exception){\n     System.out.println(\"Problem creating session factory\");\n     exception.printStackTrace();\n}\n</code></pre>\n\n<p>You should use a logging framework instead.</p>\n"},{"tags":[],"owner":{"account_id":8087301,"reputation":760,"user_id":6103905,"accept_rate":86,"display_name":"Vitorlui"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1472122027,"creation_date":1472122027,"answer_id":39143226,"question_id":19085816,"body_markdown":"In my case, I was running the **Hibernate 5** with JPA annotations on tomcat and stop working when I changed to **glassfish 4.1**\r\n\r\nThe error:\r\n\r\n **hibernate.properties not found**\r\n\r\n**Make sure:**\r\nsrc/main/resources/hibernate.cfg.xml exists\r\n\r\n\r\nAnd if you only have the dependency of hibernate-core, I was using hibernate-annotations and hibernate-common-annotations and it was creating conflict. The hibernate 5 doesnt need these two, I had read somewhere.Try to remove ;) \r\n\r\nAfter that a new error appears:\r\n\r\n**java.lang.NoSuchMethodError: org.jboss.logging.Logger.debugf(Ljava/lang/String;I)V**\r\n\r\nThe reason was the oldest jboss-logging.jar at: &quot;YOUR_GLASSFISH_FOLDER/glassfish/modules&quot;\r\n\r\nWhy? The **hibernate 5** has dependency with the newest version of jboss-logging, and the **glassfish 4** uses the oldest version even if you declare inside your POM file the newest version. Actually I&#39;m using:\r\n\r\n    org.jboss.logging jboss-logging 3.3.0.Final\r\n\r\nThen I downloaded it and replace the old .jar inside the modules path and it back to work, I spent 2 days trying to solve that and I hope it helps some future issues =D\r\n\r\nI used this link to help me: https://medium.com/@mertcal/using-hibernate-5-on-payara-cc242212a5d6#.npq2hdprz\r\n\r\n**Another solution, in my case, could be back to the last Hibernate 4 version (4.3.11.Final) but it is already too old in my opinion**\r\n","title":"how to fix the error: &quot;INFO: HHH000206: hibernate.properties not found&quot;?","body":"<p>In my case, I was running the <strong>Hibernate 5</strong> with JPA annotations on tomcat and stop working when I changed to <strong>glassfish 4.1</strong></p>\n\n<p>The error:</p>\n\n<p><strong>hibernate.properties not found</strong></p>\n\n<p><strong>Make sure:</strong>\nsrc/main/resources/hibernate.cfg.xml exists</p>\n\n<p>And if you only have the dependency of hibernate-core, I was using hibernate-annotations and hibernate-common-annotations and it was creating conflict. The hibernate 5 doesnt need these two, I had read somewhere.Try to remove ;) </p>\n\n<p>After that a new error appears:</p>\n\n<p><strong>java.lang.NoSuchMethodError: org.jboss.logging.Logger.debugf(Ljava/lang/String;I)V</strong></p>\n\n<p>The reason was the oldest jboss-logging.jar at: \"YOUR_GLASSFISH_FOLDER/glassfish/modules\"</p>\n\n<p>Why? The <strong>hibernate 5</strong> has dependency with the newest version of jboss-logging, and the <strong>glassfish 4</strong> uses the oldest version even if you declare inside your POM file the newest version. Actually I'm using:</p>\n\n<pre><code>org.jboss.logging jboss-logging 3.3.0.Final\n</code></pre>\n\n<p>Then I downloaded it and replace the old .jar inside the modules path and it back to work, I spent 2 days trying to solve that and I hope it helps some future issues =D</p>\n\n<p>I used this link to help me: <a href=\"https://medium.com/@mertcal/using-hibernate-5-on-payara-cc242212a5d6#.npq2hdprz\" rel=\"nofollow\">https://medium.com/@mertcal/using-hibernate-5-on-payara-cc242212a5d6#.npq2hdprz</a></p>\n\n<p><strong>Another solution, in my case, could be back to the last Hibernate 4 version (4.3.11.Final) but it is already too old in my opinion</strong></p>\n"},{"tags":[],"owner":{"account_id":12422581,"reputation":31,"user_id":9048736,"display_name":"ASHISH KUMAR SINGH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551896040,"creation_date":1551896040,"answer_id":55029694,"question_id":19085816,"body_markdown":"**session-factory** is a special tag in hibernate it&#39;s have no any name so,\r\nYou can change your code **session-factory name=&quot;&quot;** to **session-factory** and try to run. ","title":"how to fix the error: &quot;INFO: HHH000206: hibernate.properties not found&quot;?","body":"<p><strong>session-factory</strong> is a special tag in hibernate it's have no any name so,\nYou can change your code <strong>session-factory name=\"\"</strong> to <strong>session-factory</strong> and try to run. </p>\n"},{"tags":[],"owner":{"account_id":13206870,"reputation":11,"user_id":9538319,"display_name":"Nguyn Vn Bo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646500522,"creation_date":1646500522,"answer_id":71364277,"question_id":19085816,"body_markdown":"You can try\r\n1. make sure that file hibernate.cfg.xml is located at src/main/resource\r\n2. add pom.xml\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;!-- API, java.xml.bind module --&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3.2&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n\r\n    &lt;!-- Runtime, com.sun.xml.bind module --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\r\n      &lt;version&gt;2.3.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\nIt work for me\r\n","title":"how to fix the error: &quot;INFO: HHH000206: hibernate.properties not found&quot;?","body":"<p>You can try</p>\n<ol>\n<li>make sure that file hibernate.cfg.xml is located at src/main/resource</li>\n<li>add pom.xml</li>\n</ol>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;!-- API, java.xml.bind module --&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n    &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n    &lt;version&gt;2.3.2&lt;/version&gt;\n  &lt;/dependency&gt;\n\n&lt;!-- Runtime, com.sun.xml.bind module --&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\n  &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\n  &lt;version&gt;2.3.2&lt;/version&gt;\n&lt;/dependency&gt;</code></pre>\r\n</div>\r\n</div>\r\n\nIt work for me</p>\n"},{"tags":[],"owner":{"account_id":23951402,"reputation":1,"user_id":19561644,"display_name":"Barm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657972327,"creation_date":1657972327,"answer_id":73003953,"question_id":19085816,"body_markdown":"In my case problem was in hibernate.cfg.xml location.\r\nIntellej IDEA created it in java folder.\r\nI&#39;ve replaced it into resources folder and it helped","title":"how to fix the error: &quot;INFO: HHH000206: hibernate.properties not found&quot;?","body":"<p>In my case problem was in hibernate.cfg.xml location.\nIntellej IDEA created it in java folder.\nI've replaced it into resources folder and it helped</p>\n"}],"owner":{"account_id":1548165,"reputation":371,"user_id":1682657,"accept_rate":15,"display_name":"adarksun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":116410,"favorite_count":0,"down_vote_count":1,"up_vote_count":22,"answer_count":8,"score":21,"last_activity_date":1657972327,"creation_date":1380509865,"question_id":19085816,"body_markdown":"I tried to test whether the hibernate configuration is working properly. I tried but I got an error:\r\n\r\n    INFO: HHH000206: hibernate.properties not found\r\n\r\nTo do this: I create:\r\n\r\n [1] hibernate configuration file [using xml]\r\n \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;!DOCTYPE hibernate-configuration PUBLIC &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\r\n                                             &quot;http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd&quot;&gt;\r\n    &lt;hibernate-configuration&gt;\r\n     &lt;session-factory name=&quot;&quot;&gt;\r\n      &lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;\r\n      &lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:mysql://localhost:3306&lt;/property&gt;\r\n      &lt;property name=&quot;hibernate.connection.username&quot;&gt;root&lt;/property&gt;\r\n      &lt;property name=&quot;hibernate.default_schema&quot;&gt;explorecalifornia&lt;/property&gt;\r\n      &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;\r\n      &lt;property name=&quot;hibernate.format_sql&quot;&gt;true&lt;/property&gt;\r\n      &lt;property name=&quot;hibernate.connection.password&quot;&gt;abc123&lt;/property&gt;\r\n     &lt;/session-factory&gt;\r\n    &lt;/hibernate-configuration&gt;\r\n\r\n[2] A hibernate utility class\r\n\r\n    public class HibernateUtilities {\r\n    \t\r\n    \tprivate static SessionFactory sessionFactory;\r\n    \tprivate static ServiceRegistry serviceRegistry;\r\n    \t\r\n    \tstatic{\r\n    \t\ttry{\r\n    \t\t\tConfiguration configuration = new Configuration().configure();\r\n    \r\n    \t\t\tserviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();\r\n    \t\t\tsessionFactory = configuration.buildSessionFactory(serviceRegistry);\r\n    \t\t}\r\n    \t\t\r\n    \t\tcatch(HibernateException exception){\r\n    \t\t\tSystem.out.println(&quot;Problem creating session factory&quot;);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic static SessionFactory getSessionFactory() {\r\n    \t\treturn sessionFactory;\r\n    \t}\r\n    \r\n    \tpublic static void setSessionFactory(SessionFactory sessionFactory) {\r\n    \t\tHibernateUtilities.sessionFactory = sessionFactory;\r\n    \t}\r\n    \t\t\r\n    \r\n    }\r\n\r\n\r\n[3] The main program:\r\n\r\n    import org.hibernate.Session;\r\n    \r\n        public class Program {\r\n        \r\n        \tpublic static void main(String[] args) {\r\n        \t\tSystem.out.println(&quot;Hibernate&quot;);\r\n        \t\t\r\n        \t\tSession session = HibernateUtilities.getSessionFactory().openSession();\r\n        \t\tsession.close();\r\n        \r\n        \t}\r\n        \r\n        }\r\n\r\n\r\nBut i got the following thing when I run the program:\r\n\r\n    Hibernate\r\n    Sep 29, 2013 10:47:15 PM org.hibernate.annotations.common.Version &lt;clinit&gt;\r\n    INFO: HCANN000001: Hibernate Commons Annotations {4.0.2.Final}\r\n    Sep 29, 2013 10:47:15 PM org.hibernate.Version logVersion\r\n    INFO: HHH000412: Hibernate Core {4.2.5.Final}\r\n    Sep 29, 2013 10:47:15 PM org.hibernate.cfg.Environment &lt;clinit&gt;\r\n    INFO: HHH000206: hibernate.properties not found\r\n    Sep 29, 2013 10:47:15 PM org.hibernate.cfg.Environment buildBytecodeProvider\r\n    INFO: HHH000021: Bytecode provider name : javassist\r\n    Sep 29, 2013 10:47:15 PM org.hibernate.cfg.Configuration configure\r\n    INFO: HHH000043: Configuring from resource: /hibernate.cfg.xml\r\n    Sep 29, 2013 10:47:15 PM org.hibernate.cfg.Configuration getConfigurationInputStream\r\n    INFO: HHH000040: Configuration resource: /hibernate.cfg.xml\r\n    Problem creating session factory\r\n    Exception in thread &quot;main&quot; java.lang.NullPointerException\r\n    \tat com.simpleprogrammer.Program.main(Program.java:10)\r\n\r\n\r\nTo solve this I tried Google and apply the ways which i found. but still i could not solve the problem. Can anybody please help me?","title":"how to fix the error: &quot;INFO: HHH000206: hibernate.properties not found&quot;?","body":"<p>I tried to test whether the hibernate configuration is working properly. I tried but I got an error:</p>\n\n<pre><code>INFO: HHH000206: hibernate.properties not found\n</code></pre>\n\n<p>To do this: I create:</p>\n\n<p>[1] hibernate configuration file [using xml]</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC \"-//Hibernate/Hibernate Configuration DTD 3.0//EN\"\n                                         \"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd\"&gt;\n&lt;hibernate-configuration&gt;\n &lt;session-factory name=\"\"&gt;\n  &lt;property name=\"hibernate.connection.driver_class\"&gt;com.mysql.jdbc.Driver&lt;/property&gt;\n  &lt;property name=\"hibernate.connection.url\"&gt;jdbc:mysql://localhost:3306&lt;/property&gt;\n  &lt;property name=\"hibernate.connection.username\"&gt;root&lt;/property&gt;\n  &lt;property name=\"hibernate.default_schema\"&gt;explorecalifornia&lt;/property&gt;\n  &lt;property name=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;\n  &lt;property name=\"hibernate.format_sql\"&gt;true&lt;/property&gt;\n  &lt;property name=\"hibernate.connection.password\"&gt;abc123&lt;/property&gt;\n &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n\n<p>[2] A hibernate utility class</p>\n\n<pre><code>public class HibernateUtilities {\n\n    private static SessionFactory sessionFactory;\n    private static ServiceRegistry serviceRegistry;\n\n    static{\n        try{\n            Configuration configuration = new Configuration().configure();\n\n            serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();\n            sessionFactory = configuration.buildSessionFactory(serviceRegistry);\n        }\n\n        catch(HibernateException exception){\n            System.out.println(\"Problem creating session factory\");\n        }\n    }\n\n    public static SessionFactory getSessionFactory() {\n        return sessionFactory;\n    }\n\n    public static void setSessionFactory(SessionFactory sessionFactory) {\n        HibernateUtilities.sessionFactory = sessionFactory;\n    }\n\n\n}\n</code></pre>\n\n<p>[3] The main program:</p>\n\n<pre><code>import org.hibernate.Session;\n\n    public class Program {\n\n        public static void main(String[] args) {\n            System.out.println(\"Hibernate\");\n\n            Session session = HibernateUtilities.getSessionFactory().openSession();\n            session.close();\n\n        }\n\n    }\n</code></pre>\n\n<p>But i got the following thing when I run the program:</p>\n\n<pre><code>Hibernate\nSep 29, 2013 10:47:15 PM org.hibernate.annotations.common.Version &lt;clinit&gt;\nINFO: HCANN000001: Hibernate Commons Annotations {4.0.2.Final}\nSep 29, 2013 10:47:15 PM org.hibernate.Version logVersion\nINFO: HHH000412: Hibernate Core {4.2.5.Final}\nSep 29, 2013 10:47:15 PM org.hibernate.cfg.Environment &lt;clinit&gt;\nINFO: HHH000206: hibernate.properties not found\nSep 29, 2013 10:47:15 PM org.hibernate.cfg.Environment buildBytecodeProvider\nINFO: HHH000021: Bytecode provider name : javassist\nSep 29, 2013 10:47:15 PM org.hibernate.cfg.Configuration configure\nINFO: HHH000043: Configuring from resource: /hibernate.cfg.xml\nSep 29, 2013 10:47:15 PM org.hibernate.cfg.Configuration getConfigurationInputStream\nINFO: HHH000040: Configuration resource: /hibernate.cfg.xml\nProblem creating session factory\nException in thread \"main\" java.lang.NullPointerException\n    at com.simpleprogrammer.Program.main(Program.java:10)\n</code></pre>\n\n<p>To solve this I tried Google and apply the ways which i found. but still i could not solve the problem. Can anybody please help me?</p>\n"},{"tags":["java","multithreading","performance","random","thread-local"],"comments":[{"owner":{"account_id":1252925,"reputation":16085,"user_id":1212960,"accept_rate":93,"display_name":"Greg Kopff"},"score":0,"creation_date":1385638936,"post_id":20265185,"comment_id":30229281,"body_markdown":"Let me parrot the experts: microbenchmarking is hard to get right. If you want to try, use [Caliper](https://code.google.com/p/caliper/) to do it.","body":"Let me parrot the experts: microbenchmarking is hard to get right. If you want to try, use <a href=\"https://code.google.com/p/caliper/\" rel=\"nofollow noreferrer\">Caliper</a> to do it."},{"owner":{"account_id":318306,"reputation":541,"user_id":635460,"accept_rate":100,"display_name":"Me again"},"score":1,"creation_date":1385639005,"post_id":20265185,"comment_id":30229327,"body_markdown":"well, first of all your threads are not parallel as you `join` to a thread right after starting one before starting another.","body":"well, first of all your threads are not parallel as you <code>join</code> to a thread right after starting one before starting another."},{"owner":{"account_id":775068,"reputation":64803,"user_id":823393,"accept_rate":86,"display_name":"OldCurmudgeon"},"score":1,"creation_date":1385639037,"post_id":20265185,"comment_id":30229348,"body_markdown":"**much less overhead and contention** does not mean **it&#39;s faster** it just means *under certain types and levels of stress there may be improved throughput and stability*.","body":"<b>much less overhead and contention</b> does not mean <b>it&#39;s faster</b> it just means <i>under certain types and levels of stress there may be improved throughput and stability</i>."},{"owner":{"account_id":308224,"reputation":578,"user_id":619961,"display_name":"ikaerom"},"score":0,"creation_date":1440061396,"post_id":20265185,"comment_id":52120732,"body_markdown":"If you&#39;re still interested in a micro-benchmark result, this blog shows the challenges of benchmarking such things: http://niklasschlimm.blogspot.ch/2012/01/java-7-how-to-write-really-fast-java.html and from an OS perspective: http://java-performance.info/java-util-random-java-util-concurrent-threadlocalrandom-multithreaded-environments/","body":"If you&#39;re still interested in a micro-benchmark result, this blog shows the challenges of benchmarking such things: <a href=\"http://niklasschlimm.blogspot.ch/2012/01/java-7-how-to-write-really-fast-java.html\" rel=\"nofollow noreferrer\">niklasschlimm.blogspot.ch/2012/01/&hellip;</a> and from an OS perspective: <a href=\"http://java-performance.info/java-util-random-java-util-concurrent-threadlocalrandom-multithreaded-environments/\" rel=\"nofollow noreferrer\">java-performance.info/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1385639007,"creation_date":1385639007,"answer_id":20265310,"question_id":20265185,"body_markdown":"Your testing code is flawed for one. The bane of benchmarkers everywhere.\r\n\r\n    thread.start();\r\n    thread.join();\r\nwhy not save LOCs and write\r\n\r\n    thread.run();\r\n\r\nthe outcome is the same.\r\n\r\nEDIT: If you don&#39;t realize the outcome from the above, it means that you&#39;re running single threaded tests, there&#39;s no multithreading going on.","title":"ThreadLocalRandom with shared static Random instance performance comparing test","body":"<p>Your testing code is flawed for one. The bane of benchmarkers everywhere.</p>\n\n<pre><code>thread.start();\nthread.join();\n</code></pre>\n\n<p>why not save LOCs and write</p>\n\n<pre><code>thread.run();\n</code></pre>\n\n<p>the outcome is the same.</p>\n\n<p>EDIT: If you don't realize the outcome from the above, it means that you're running single threaded tests, there's no multithreading going on.</p>\n"},{"tags":[],"owner":{"account_id":426969,"reputation":61751,"user_id":808486,"accept_rate":100,"display_name":"Tudor"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1385640267,"creation_date":1385640267,"answer_id":20265715,"question_id":20265185,"body_markdown":"You&#39;re not running anything in parallel because you&#39;re waiting for each thread to finish immediately after starting it. You need a waiting loop outside the loop that starts the threads:\r\n\r\n    List&lt;Thread&gt; threads = new ArrayList&lt;Thread&gt;();\r\n    for (int i = 0; i &lt; THREAD_COUNT; i++) {\r\n        Thread thread = new Thread() {\r\n            @Override\r\n            public void run() {\r\n\r\n                for (int j = 0; j &lt; GENERATED_NUMBER_COUNT; j++) {\r\n                    int random = rand.nextInt(INT_RIGHT_BORDER);\r\n                    if (!counts.containsKey(random)) {\r\n                        counts.put(random, 0);\r\n                    }\r\n                    counts.put(random, counts.get(random) + 1);\r\n                }\r\n            }\r\n        };\r\n        threads.add(thread);\r\n        thread.start();\r\n    }\r\n\r\n    for (Thread thread: threads) {\r\n        thread.join();\r\n    }","title":"ThreadLocalRandom with shared static Random instance performance comparing test","body":"<p>You're not running anything in parallel because you're waiting for each thread to finish immediately after starting it. You need a waiting loop outside the loop that starts the threads:</p>\n\n<pre><code>List&lt;Thread&gt; threads = new ArrayList&lt;Thread&gt;();\nfor (int i = 0; i &lt; THREAD_COUNT; i++) {\n    Thread thread = new Thread() {\n        @Override\n        public void run() {\n\n            for (int j = 0; j &lt; GENERATED_NUMBER_COUNT; j++) {\n                int random = rand.nextInt(INT_RIGHT_BORDER);\n                if (!counts.containsKey(random)) {\n                    counts.put(random, 0);\n                }\n                counts.put(random, counts.get(random) + 1);\n            }\n        }\n    };\n    threads.add(thread);\n    thread.start();\n}\n\nfor (Thread thread: threads) {\n    thread.join();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3328940,"reputation":13909,"user_id":2798291,"accept_rate":53,"display_name":"TwoThe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1385642121,"creation_date":1385641592,"answer_id":20266207,"question_id":20265185,"body_markdown":"Maybe it would be easier to just have a look at what actually happens. Here is the source for `ThreadLocal.get()` which is also called for the `ThreadLocalRandom.current()`.\r\n\r\n    public T get() {\r\n        Thread t = Thread.currentThread();\r\n        ThreadLocalMap map = getMap(t);\r\n        if (map != null) {\r\n            ThreadLocalMap.Entry e = map.getEntry(this);\r\n            if (e != null)\r\n                return (T)e.value;\r\n        }\r\n        return setInitialValue();\r\n    }\r\n\r\nWhere ThreadLocalMap is a specialized HashMap-like implementation with optimizations.\r\n\r\nSo what basically happens is that ThreadLocal holds a map Thread-&gt;Object - or in this case Thread-&gt;Random - which is then looked up and either returned or created. As this is nothing &#39;magical&#39;, the timing will be equal to a HashMap-lookup + the initial creation overhead of the actual Object to be returned. Since a HashMap lookup (in this optimized case) is linear, the cost for a lookup is _k_, where _k_ is the calculation cost of the hash function.\r\n\r\nSo you can make some assumptions:\r\n\r\n- ThreadLocal will be faster than creating the object each time in each Runnable, unless the creation cost is much smaller than _k_. So looking up Random is a good thing, putting an int inside might not be so smart.\r\n\r\n- ThreadLocal will be better than using your own HashMap, as such a generic implementation can be assumed to be equal to _k_ or worse.\r\n\r\n- ThreadLocal will be slower than using any lookup with a cost &lt; _k_. Example: store everything in an array first, then do `myRandoms[threadID]`.&lt;br&gt;\r\nBut then this assumes that you know which threads will be processing your work in the first place, so this isn&#39;t a real candidate for ThreadLocal anyways.\r\n\r\n","title":"ThreadLocalRandom with shared static Random instance performance comparing test","body":"<p>Maybe it would be easier to just have a look at what actually happens. Here is the source for <code>ThreadLocal.get()</code> which is also called for the <code>ThreadLocalRandom.current()</code>.</p>\n\n<pre><code>public T get() {\n    Thread t = Thread.currentThread();\n    ThreadLocalMap map = getMap(t);\n    if (map != null) {\n        ThreadLocalMap.Entry e = map.getEntry(this);\n        if (e != null)\n            return (T)e.value;\n    }\n    return setInitialValue();\n}\n</code></pre>\n\n<p>Where ThreadLocalMap is a specialized HashMap-like implementation with optimizations.</p>\n\n<p>So what basically happens is that ThreadLocal holds a map Thread->Object - or in this case Thread->Random - which is then looked up and either returned or created. As this is nothing 'magical', the timing will be equal to a HashMap-lookup + the initial creation overhead of the actual Object to be returned. Since a HashMap lookup (in this optimized case) is linear, the cost for a lookup is <em>k</em>, where <em>k</em> is the calculation cost of the hash function.</p>\n\n<p>So you can make some assumptions:</p>\n\n<ul>\n<li><p>ThreadLocal will be faster than creating the object each time in each Runnable, unless the creation cost is much smaller than <em>k</em>. So looking up Random is a good thing, putting an int inside might not be so smart.</p></li>\n<li><p>ThreadLocal will be better than using your own HashMap, as such a generic implementation can be assumed to be equal to <em>k</em> or worse.</p></li>\n<li><p>ThreadLocal will be slower than using any lookup with a cost &lt; <em>k</em>. Example: store everything in an array first, then do <code>myRandoms[threadID]</code>.<br>\nBut then this assumes that you know which threads will be processing your work in the first place, so this isn't a real candidate for ThreadLocal anyways.</p></li>\n</ul>\n"}],"owner":{"account_id":2106648,"reputation":611,"user_id":1872842,"display_name":"mmelnik"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":942,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":20265715,"answer_count":3,"score":3,"last_activity_date":1657970742,"creation_date":1385638663,"question_id":20265185,"body_markdown":"In our project for one task we used static Random instance for random numbers generation goal. After Java 7 release new ThreadLocalRandom class appeared for generating random numbers.\r\n\r\nFrom spec:\r\n\r\n&gt; When applicable, use of ThreadLocalRandom rather than shared Random objects in concurrent programs will typically encounter much less overhead and contention. Use of ThreadLocalRandom is particularly appropriate when multiple tasks (for example, each a ForkJoinTask) use random numbers in parallel in thread pools. \r\n\r\nand also:\r\n\r\n&gt; When all usages are of this form, it is never possible to accidently share a ThreadLocalRandom across multiple threads. \r\n\r\nSo I&#39;ve made my little test:\r\n\r\n    public class ThreadLocalRandomTest {\r\n\r\n    private static final int THREAD_COUNT = 100;\r\n    private static final int GENERATED_NUMBER_COUNT = 1000;\r\n    private static final int INT_RIGHT_BORDER = 5000;\r\n    private static final int EXPERIMENTS_COUNT = 5000;\r\n\r\n    public static void main(String[] args) throws InterruptedException {\r\n        System.out.println(&quot;Number of threads: &quot; + THREAD_COUNT);\r\n        System.out.println(&quot;Length of generated numbers chain for each thread: &quot; + GENERATED_NUMBER_COUNT);\r\n        System.out.println(&quot;Right border integer: &quot; + INT_RIGHT_BORDER);\r\n        System.out.println(&quot;Count of experiments: &quot; + EXPERIMENTS_COUNT);\r\n\r\n        int repeats = 0;\r\n        int workingTime = 0;\r\n        long startTime = 0;\r\n        long endTime = 0;\r\n\r\n        for (int i = 0; i &lt; EXPERIMENTS_COUNT; i++) {\r\n            startTime = System.currentTimeMillis();\r\n            repeats += calculateRepeatsForSharedRandom();\r\n            endTime = System.currentTimeMillis();\r\n            workingTime += endTime - startTime;\r\n        }\r\n        System.out.println(&quot;Average repeats for shared Random instance: &quot; + repeats / EXPERIMENTS_COUNT\r\n                + &quot;. Average working time: &quot; + workingTime / EXPERIMENTS_COUNT + &quot; ms.&quot;);\r\n\r\n        repeats = 0;\r\n        workingTime = 0;\r\n        for (int i = 0; i &lt; EXPERIMENTS_COUNT; i++) {\r\n            startTime = System.currentTimeMillis();\r\n            repeats += calculateRepeatsForTheadLocalRandom();\r\n            endTime = System.currentTimeMillis();\r\n            workingTime += endTime - startTime;\r\n        }\r\n        System.out.println(&quot;Average repeats for ThreadLocalRandom: &quot; + repeats / EXPERIMENTS_COUNT\r\n                + &quot;. Average working time: &quot; + workingTime / EXPERIMENTS_COUNT + &quot; ms.&quot;);\r\n    }\r\n\r\n    private static int calculateRepeatsForSharedRandom() throws InterruptedException {\r\n        final Random rand = new Random();\r\n        final Map&lt;Integer, Integer&gt; counts = new HashMap&lt;&gt;();\r\n\r\n        for (int i = 0; i &lt; THREAD_COUNT; i++) {\r\n            Thread thread = new Thread() {\r\n                @Override\r\n                public void run() {\r\n\r\n                    for (int j = 0; j &lt; GENERATED_NUMBER_COUNT; j++) {\r\n                        int random = rand.nextInt(INT_RIGHT_BORDER);\r\n                        if (!counts.containsKey(random)) {\r\n                            counts.put(random, 0);\r\n                        }\r\n                        counts.put(random, counts.get(random) + 1);\r\n                    }\r\n                }\r\n            };\r\n            thread.start();\r\n            thread.join();\r\n        }\r\n\r\n        int repeats = 0;\r\n        for (Integer value : counts.values()) {\r\n            if (value &gt; 1) {\r\n                repeats += value;\r\n            }\r\n        }\r\n\r\n        return repeats;\r\n    }\r\n\r\n    private static int calculateRepeatsForTheadLocalRandom() throws InterruptedException {\r\n        final Map&lt;Integer, Integer&gt; counts = new HashMap&lt;&gt;();\r\n\r\n        for (int i = 0; i &lt; THREAD_COUNT; i++) {\r\n            Thread thread = new Thread() {\r\n                @Override\r\n                public void run() {\r\n\r\n                    for (int j = 0; j &lt; GENERATED_NUMBER_COUNT; j++) {\r\n                        int random = ThreadLocalRandom.current().nextInt(INT_RIGHT_BORDER);\r\n                        if (!counts.containsKey(random)) {\r\n                            counts.put(random, 0);\r\n                        }\r\n                        counts.put(random, counts.get(random) + 1);\r\n                    }\r\n                }\r\n            };\r\n            thread.start();\r\n            thread.join();\r\n        }\r\n\r\n        int repeats = 0;\r\n        for (Integer value : counts.values()) {\r\n            if (value &gt; 1) {\r\n                repeats += value;\r\n            }\r\n        }\r\n\r\n        return repeats;\r\n    }\r\n\r\n}\r\n\r\nI&#39;ve also added test for non-shared Random and got next results:\r\n\r\n    Number of threads: 100\r\n    Length of generated numbers chain for each thread: 100\r\n    Right border integer: 5000\r\n    Count of experiments: 10000\r\n    Average repeats for non-shared Random instance: 8646. Average working time: 13 ms.\r\n    Average repeats for shared Random instance: 8646. Average working time: 13 ms.\r\n    Average repeats for ThreadLocalRandom: 8646. Average working time: 13 ms.\r\n\r\nTo me it&#39;s little strange, as I expected at least speed increasing when using ThreadLocalRandom comparing to shared Random instance, but see no difference at all.\r\n\r\nCan someone explain why it works that way, maybe I haven&#39;t  done testing properly. Thank you!","title":"ThreadLocalRandom with shared static Random instance performance comparing test","body":"<p>In our project for one task we used static Random instance for random numbers generation goal. After Java 7 release new ThreadLocalRandom class appeared for generating random numbers.</p>\n<p>From spec:</p>\n<blockquote>\n<p>When applicable, use of ThreadLocalRandom rather than shared Random objects in concurrent programs will typically encounter much less overhead and contention. Use of ThreadLocalRandom is particularly appropriate when multiple tasks (for example, each a ForkJoinTask) use random numbers in parallel in thread pools.</p>\n</blockquote>\n<p>and also:</p>\n<blockquote>\n<p>When all usages are of this form, it is never possible to accidently share a ThreadLocalRandom across multiple threads.</p>\n</blockquote>\n<p>So I've made my little test:</p>\n<pre><code>public class ThreadLocalRandomTest {\n\nprivate static final int THREAD_COUNT = 100;\nprivate static final int GENERATED_NUMBER_COUNT = 1000;\nprivate static final int INT_RIGHT_BORDER = 5000;\nprivate static final int EXPERIMENTS_COUNT = 5000;\n\npublic static void main(String[] args) throws InterruptedException {\n    System.out.println(&quot;Number of threads: &quot; + THREAD_COUNT);\n    System.out.println(&quot;Length of generated numbers chain for each thread: &quot; + GENERATED_NUMBER_COUNT);\n    System.out.println(&quot;Right border integer: &quot; + INT_RIGHT_BORDER);\n    System.out.println(&quot;Count of experiments: &quot; + EXPERIMENTS_COUNT);\n\n    int repeats = 0;\n    int workingTime = 0;\n    long startTime = 0;\n    long endTime = 0;\n\n    for (int i = 0; i &lt; EXPERIMENTS_COUNT; i++) {\n        startTime = System.currentTimeMillis();\n        repeats += calculateRepeatsForSharedRandom();\n        endTime = System.currentTimeMillis();\n        workingTime += endTime - startTime;\n    }\n    System.out.println(&quot;Average repeats for shared Random instance: &quot; + repeats / EXPERIMENTS_COUNT\n            + &quot;. Average working time: &quot; + workingTime / EXPERIMENTS_COUNT + &quot; ms.&quot;);\n\n    repeats = 0;\n    workingTime = 0;\n    for (int i = 0; i &lt; EXPERIMENTS_COUNT; i++) {\n        startTime = System.currentTimeMillis();\n        repeats += calculateRepeatsForTheadLocalRandom();\n        endTime = System.currentTimeMillis();\n        workingTime += endTime - startTime;\n    }\n    System.out.println(&quot;Average repeats for ThreadLocalRandom: &quot; + repeats / EXPERIMENTS_COUNT\n            + &quot;. Average working time: &quot; + workingTime / EXPERIMENTS_COUNT + &quot; ms.&quot;);\n}\n\nprivate static int calculateRepeatsForSharedRandom() throws InterruptedException {\n    final Random rand = new Random();\n    final Map&lt;Integer, Integer&gt; counts = new HashMap&lt;&gt;();\n\n    for (int i = 0; i &lt; THREAD_COUNT; i++) {\n        Thread thread = new Thread() {\n            @Override\n            public void run() {\n\n                for (int j = 0; j &lt; GENERATED_NUMBER_COUNT; j++) {\n                    int random = rand.nextInt(INT_RIGHT_BORDER);\n                    if (!counts.containsKey(random)) {\n                        counts.put(random, 0);\n                    }\n                    counts.put(random, counts.get(random) + 1);\n                }\n            }\n        };\n        thread.start();\n        thread.join();\n    }\n\n    int repeats = 0;\n    for (Integer value : counts.values()) {\n        if (value &gt; 1) {\n            repeats += value;\n        }\n    }\n\n    return repeats;\n}\n\nprivate static int calculateRepeatsForTheadLocalRandom() throws InterruptedException {\n    final Map&lt;Integer, Integer&gt; counts = new HashMap&lt;&gt;();\n\n    for (int i = 0; i &lt; THREAD_COUNT; i++) {\n        Thread thread = new Thread() {\n            @Override\n            public void run() {\n\n                for (int j = 0; j &lt; GENERATED_NUMBER_COUNT; j++) {\n                    int random = ThreadLocalRandom.current().nextInt(INT_RIGHT_BORDER);\n                    if (!counts.containsKey(random)) {\n                        counts.put(random, 0);\n                    }\n                    counts.put(random, counts.get(random) + 1);\n                }\n            }\n        };\n        thread.start();\n        thread.join();\n    }\n\n    int repeats = 0;\n    for (Integer value : counts.values()) {\n        if (value &gt; 1) {\n            repeats += value;\n        }\n    }\n\n    return repeats;\n}\n</code></pre>\n<p>}</p>\n<p>I've also added test for non-shared Random and got next results:</p>\n<pre><code>Number of threads: 100\nLength of generated numbers chain for each thread: 100\nRight border integer: 5000\nCount of experiments: 10000\nAverage repeats for non-shared Random instance: 8646. Average working time: 13 ms.\nAverage repeats for shared Random instance: 8646. Average working time: 13 ms.\nAverage repeats for ThreadLocalRandom: 8646. Average working time: 13 ms.\n</code></pre>\n<p>To me it's little strange, as I expected at least speed increasing when using ThreadLocalRandom comparing to shared Random instance, but see no difference at all.</p>\n<p>Can someone explain why it works that way, maybe I haven't  done testing properly. Thank you!</p>\n"},{"tags":["java","arraylist"],"comments":[{"owner":{"account_id":238594,"reputation":646,"user_id":507587,"accept_rate":62,"display_name":"tobier"},"score":1,"creation_date":1324077001,"post_id":8540932,"comment_id":10580766,"body_markdown":"If the list is empty, then it has size 0. I&#39;d write cars.size() &lt;= 0. Also lists are zero indexed, so it should be &quot;carNumber &gt;= cars.size()&quot;.","body":"If the list is empty, then it has size 0. I&#39;d write cars.size() &lt;= 0. Also lists are zero indexed, so it should be &quot;carNumber &gt;= cars.size()&quot;."}],"answers":[{"tags":[],"owner":{"account_id":347037,"reputation":79658,"user_id":680925,"display_name":"Perception"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1324076124,"creation_date":1324076124,"answer_id":8541120,"question_id":8540932,"body_markdown":"Your `showCar` method looks fine, are you sure its showing all the cars in your collection? As far as your other two methods, you are looping over your entire collection and calling your rental operation on each element. You are basing your entire logic off indexed arrays, so use your index.\r\n\r\nhttp://docs.oracle.com/javase/6/docs/api/java/util/List.html\r\n\r\n    add(int index, E element) \r\n              Inserts the specified element at the specified position in this list (optional operation).\r\n    \r\n    get(int index) \r\n              Returns the element at the specified position in this list.","title":"renting, showing and returning a car arraylist not working properly","body":"<p>Your <code>showCar</code> method looks fine, are you sure its showing all the cars in your collection? As far as your other two methods, you are looping over your entire collection and calling your rental operation on each element. You are basing your entire logic off indexed arrays, so use your index.</p>\n\n<p><a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/List.html\" rel=\"nofollow\">http://docs.oracle.com/javase/6/docs/api/java/util/List.html</a></p>\n\n<pre><code>add(int index, E element) \n          Inserts the specified element at the specified position in this list (optional operation).\n\nget(int index) \n          Returns the element at the specified position in this list.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":940870,"reputation":20212,"user_id":968969,"display_name":"Tony Hopkinson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1324076441,"creation_date":1324076441,"answer_id":8541174,"question_id":8540932,"body_markdown":"So what is the purpose of the for loops in ReturnCar and RentTheCar?\r\n\r\nWhat are they doing?\r\n\r\nThe above clue should put you on the right track.\r\n\r\n","title":"renting, showing and returning a car arraylist not working properly","body":"<p>So what is the purpose of the for loops in ReturnCar and RentTheCar?</p>\n\n<p>What are they doing?</p>\n\n<p>The above clue should put you on the right track.</p>\n"},{"tags":[],"owner":{"account_id":1097916,"reputation":2907,"user_id":1091105,"accept_rate":71,"display_name":"matt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1324110328,"creation_date":1324110328,"answer_id":8543552,"question_id":8540932,"body_markdown":"I think you should take a look at your foreach loop, maybe you will find a hint or two there! This line:\r\n\r\n    for (Car car : cars) {\r\n        // do something...\r\n    }\r\n\r\nThere is a reason why it is called a for-**each** loop. :)\r\nHope I helped.","title":"renting, showing and returning a car arraylist not working properly","body":"<p>I think you should take a look at your foreach loop, maybe you will find a hint or two there! This line:</p>\n\n<pre><code>for (Car car : cars) {\n    // do something...\n}\n</code></pre>\n\n<p>There is a reason why it is called a for-<strong>each</strong> loop. :)\nHope I helped.</p>\n"}],"owner":{"account_id":1112655,"reputation":43,"user_id":1102815,"accept_rate":20,"display_name":"user1102815"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1269,"favorite_count":0,"down_vote_count":6,"up_vote_count":1,"answer_count":3,"score":-5,"last_activity_date":1657970424,"creation_date":1324074906,"question_id":8540932,"body_markdown":"Well basically I have an assignment that has to be done for January. I have to to create a mock rental service that allow customers to rent cars. I am basing the logic off of an ArrayList, using its methods to manage my car collection.\r\n\r\nI have some problems with my code, the logic in a lot of my methods is not working correctly. In the code sample I included the `showCar`, `rentTheCar` and `returnCar` methods  are not working as they should. The `showCar` method displays all the cars, although when invoking the method it asks me for the `carNumber`. The `rentThecar` and `returnCar` seem to be renting/returning all cars, instead of just the one I specify.\r\n\r\nI am showing relevant code from my classes below, if anyone can help me figure out where I might have gone wrong.Please I want to make it clear that i do not want my homework done just some guidance. Thanks.\r\n\r\nShow car method:\r\n\r\n    public void showCar (int carNumber)\r\n    {\r\n        \r\n        if (cars.size() &lt; 0 ) {\r\n            System.out.println (&quot;Add cars first!!!&quot;);\r\n        }\r\n        else if (carNumber &lt; cars.size()) {\r\n            System.out.println(cars.get(carNumber));\r\n        }\r\n        else{\r\n            System.out.println(&quot;Error!! This note cannot be shown, because it does not exist!!&quot;);\r\n        }\r\n    }\r\n\r\n\r\nRent car method:\r\n\r\n    public void rentTheCar (int carNumber, String CustomerName, String hireDate, String returnDate, int daysOfHire)\r\n    {\r\n        \r\n        if (cars.size() &lt; 0) {\r\n           System.out.println(&quot;Empty list!! Add cars first!!&quot;);\r\n        }\r\n        else if (carNumber &gt; cars.size()) {\r\n           System.out.println(&quot;This car does not exist!!&quot;);\r\n        }\r\n        else {\r\n            for (Car car : cars) {\r\n                int index = 0;\r\n                cars.get (carNumber);\r\n                car.rentTheCar(CustomerName, hireDate, returnDate, daysOfHire);\r\n                index ++;\r\n            }\r\n        } \r\n    }\r\n\r\nReturn car method:\r\n\r\n    public void returnCar (int carNumber)\r\n    {\r\n        cars.get(carNumber);\r\n        if (cars.size() &lt; 0) {\r\n           System.out.println(&quot;Error!! It is impossible to return a car from an empty list&quot;);\r\n        }\r\n        else if (carNumber &gt; cars.size()) {\r\n            System.out.println(&quot;Error!! Not a valis car!!&quot;);\r\n        }\r\n        else {\r\n            for (Car car : cars) {\r\n                car.returnTheCar();\r\n                System.out.println (&quot;The car has been returned correctly&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n ","title":"renting, showing and returning a car arraylist not working properly","body":"<p>Well basically I have an assignment that has to be done for January. I have to to create a mock rental service that allow customers to rent cars. I am basing the logic off of an ArrayList, using its methods to manage my car collection.</p>\n\n<p>I have some problems with my code, the logic in a lot of my methods is not working correctly. In the code sample I included the <code>showCar</code>, <code>rentTheCar</code> and <code>returnCar</code> methods  are not working as they should. The <code>showCar</code> method displays all the cars, although when invoking the method it asks me for the <code>carNumber</code>. The <code>rentThecar</code> and <code>returnCar</code> seem to be renting/returning all cars, instead of just the one I specify.</p>\n\n<p>I am showing relevant code from my classes below, if anyone can help me figure out where I might have gone wrong.Please I want to make it clear that i do not want my homework done just some guidance. Thanks.</p>\n\n<p>Show car method:</p>\n\n<pre><code>public void showCar (int carNumber)\n{\n\n    if (cars.size() &lt; 0 ) {\n        System.out.println (\"Add cars first!!!\");\n    }\n    else if (carNumber &lt; cars.size()) {\n        System.out.println(cars.get(carNumber));\n    }\n    else{\n        System.out.println(\"Error!! This note cannot be shown, because it does not exist!!\");\n    }\n}\n</code></pre>\n\n<p>Rent car method:</p>\n\n<pre><code>public void rentTheCar (int carNumber, String CustomerName, String hireDate, String returnDate, int daysOfHire)\n{\n\n    if (cars.size() &lt; 0) {\n       System.out.println(\"Empty list!! Add cars first!!\");\n    }\n    else if (carNumber &gt; cars.size()) {\n       System.out.println(\"This car does not exist!!\");\n    }\n    else {\n        for (Car car : cars) {\n            int index = 0;\n            cars.get (carNumber);\n            car.rentTheCar(CustomerName, hireDate, returnDate, daysOfHire);\n            index ++;\n        }\n    } \n}\n</code></pre>\n\n<p>Return car method:</p>\n\n<pre><code>public void returnCar (int carNumber)\n{\n    cars.get(carNumber);\n    if (cars.size() &lt; 0) {\n       System.out.println(\"Error!! It is impossible to return a car from an empty list\");\n    }\n    else if (carNumber &gt; cars.size()) {\n        System.out.println(\"Error!! Not a valis car!!\");\n    }\n    else {\n        for (Car car : cars) {\n            car.returnTheCar();\n            System.out.println (\"The car has been returned correctly\");\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","static-block","initializing"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1657958640,"post_id":73002483,"comment_id":128937329,"body_markdown":"Your code doesn&#39;t compile. Please show a complete, runnable example which illustrates your question.","body":"Your code doesn&#39;t compile. Please show a complete, runnable example which illustrates your question."},{"owner":{"account_id":24659520,"reputation":61,"user_id":18555883,"display_name":"Vahobjon Tolibov"},"score":0,"creation_date":1657961398,"post_id":73002483,"comment_id":128937718,"body_markdown":"`import java.util.Scanner;\n\npublic class TestingInitializiingBlock {\n    public static void main(String[] args) {\n\n        System.out.print(&quot;Enter: &quot;);\n\n        Scanner scan = new Scanner(System.in);\n        if (scan != null) {\n\n            {\n                System.out.println(&quot;im initializing block into if statement!&quot;);\n            }\n        }\n    }\n}\n` This is just example of issue. copy code and try yourself","body":"<code>import java.util.Scanner;  public class TestingInitializiingBlock {     public static void main(String[] args) {          System.out.print(&quot;Enter: &quot;);          Scanner scan = new Scanner(System.in);         if (scan != null) {              {                 System.out.println(&quot;im initializing block into if statement!&quot;);             }         }     } } </code> This is just example of issue. copy code and try yourself"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1657964479,"post_id":73002483,"comment_id":128938149,"body_markdown":"What behaviour do you see that you are unsure about?","body":"What behaviour do you see that you are unsure about?"},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1657965357,"post_id":73002483,"comment_id":128938298,"body_markdown":"@VahobjonTolibov Do not add code in a comment, use the [edit] link to edit your question and add the code there.","body":"@VahobjonTolibov Do not add code in a comment, use the <a href=\"https://stackoverflow.com/posts/73002483/edit\">edit</a> link to edit your question and add the code there."}],"answers":[{"tags":[],"owner":{"account_id":71985,"reputation":7903,"user_id":208013,"display_name":"Mirek Pluta"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1657970323,"creation_date":1657970323,"answer_id":73003744,"question_id":73002483,"body_markdown":"Initializing blocks can be only defined on the class level, not inside method. \r\nWhat you have in here is just a block scope, nothing else. ","title":"Using initializing blocks into conditional statements","body":"<p>Initializing blocks can be only defined on the class level, not inside method.\nWhat you have in here is just a block scope, nothing else.</p>\n"}],"owner":{"account_id":24659520,"reputation":61,"user_id":18555883,"display_name":"Vahobjon Tolibov"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1657970323,"creation_date":1657957657,"question_id":73002483,"body_markdown":"I&#39;ve tested the scenario with initializing blocks,\r\nthe problem is that if we declare initializing block into if conditional or other conditional statements, initializing block runs first when object initializes.\r\n\r\nWhat the purpose of using initializing block into conditional statements if it runs whatever firstly.\r\n``` System.out.print(&quot;Enter: &quot;);\r\n\r\n        Scanner scan = new Scanner(System.in);\r\n        if (scan != null) {\r\n            {\r\n                System.out.println(&quot;im initializing block into if statement!&quot;);\r\n            }   }}\r\n```\r\n\r\nOutput: \r\n\r\n```Enter: im initializing block into if statement!```","title":"Using initializing blocks into conditional statements","body":"<p>I've tested the scenario with initializing blocks,\nthe problem is that if we declare initializing block into if conditional or other conditional statements, initializing block runs first when object initializes.</p>\n<p>What the purpose of using initializing block into conditional statements if it runs whatever firstly.</p>\n<pre><code>\n        Scanner scan = new Scanner(System.in);\n        if (scan != null) {\n            {\n                System.out.println(&quot;im initializing block into if statement!&quot;);\n            }   }}\n</code></pre>\n<p>Output:</p>\n<p><code>Enter: im initializing block into if statement!</code></p>\n"},{"tags":["java","android","android-studio","kotlin"],"comments":[{"owner":{"account_id":15180977,"reputation":1256,"user_id":10954249,"display_name":"DeePanShu"},"score":0,"creation_date":1657102589,"post_id":72879367,"comment_id":128727949,"body_markdown":"Now the background service is not supported after version &quot;Android O&quot;, so you have to use foreground service and in foreground service, you can do anything with your local database.","body":"Now the background service is not supported after version &quot;Android O&quot;, so you have to use foreground service and in foreground service, you can do anything with your local database."},{"owner":{"account_id":15889084,"reputation":335,"user_id":11464737,"display_name":"Kamal"},"score":0,"creation_date":1657112996,"post_id":72879367,"comment_id":128732021,"body_markdown":"Or you can start a workmanager from receiver to store data","body":"Or you can start a workmanager from receiver to store data"}],"answers":[{"tags":[],"owner":{"account_id":11347613,"reputation":679,"user_id":8319640,"display_name":"Kishan Mevada"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657970073,"creation_date":1657970073,"answer_id":73003713,"question_id":72879367,"body_markdown":"You can create a Interface : \r\n\r\n&lt;H3&gt;SmsListener&lt;/H3&gt;\r\n\r\n```\r\npublic interface SmsListener {\r\n    void onMessageReceived(String message);\r\n}\r\n```\r\n\r\nadd a Constructor to the ```SmsBoradcast``` and call it you recieve your add, then you can save your data from wherever you have started this broadcast.\r\n","title":"android save data from background service","body":"<p>You can create a Interface :</p>\n<H3>SmsListener</H3>\n<pre><code>public interface SmsListener {\n    void onMessageReceived(String message);\n}\n</code></pre>\n<p>add a Constructor to the <code>SmsBoradcast</code> and call it you recieve your add, then you can save your data from wherever you have started this broadcast.</p>\n"}],"owner":{"account_id":23774285,"reputation":17,"user_id":17787963,"display_name":"mobin jafari"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1657970073,"creation_date":1657092029,"question_id":72879367,"body_markdown":"i have a background service which is working in background and looking for new SMS and creating notification and showing SMS\r\n\r\n\r\n    public class SmsBoradcast extends BroadcastReceiver {\r\n\r\n    private static final String SMS = &quot;android.provider.Telephony.SMS_RECEIVED&quot;;\r\n\r\n    @Override\r\n    public void onReceive(Context context, Intent intent) {\r\n        if(intent.getAction().equals(SMS)){\r\n            Bundle bundle = intent.getExtras();\r\n\r\n\r\n\r\n            if (bundle != null) {\r\n                Object[] pdus = (Object[])bundle.get(&quot;pdus&quot;);\r\n                final SmsMessage[] messages = new SmsMessage[pdus.length];\r\n                for (int i = 0; i &lt; pdus.length; i++) {\r\n                    messages[i] = SmsMessage.createFromPdu((byte[])pdus[i]);\r\n                }\r\n\r\n\r\n         // i want to save message some where befor showing notification\r\n\r\n                Notification notification = new Notification(context);\r\n                notification.sendNotification(context , &quot;new message&quot; , messages[0].getMessageBody());\r\n\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n\r\n    }\r\n\r\neverything is working and I&#39;m receiving notification any time even if application is killed and its in background\r\n\r\n\r\nnow the question is that , how can I save those notifications when app is in background? \r\n\r\nI tried room database and shared preferences in my service but not worked !!\r\n\r\n\r\n**Please do not suggest using other methods. I just want to save data in background service , if its possible\r\n ","title":"android save data from background service","body":"<p>i have a background service which is working in background and looking for new SMS and creating notification and showing SMS</p>\n<pre><code>public class SmsBoradcast extends BroadcastReceiver {\n\nprivate static final String SMS = &quot;android.provider.Telephony.SMS_RECEIVED&quot;;\n\n@Override\npublic void onReceive(Context context, Intent intent) {\n    if(intent.getAction().equals(SMS)){\n        Bundle bundle = intent.getExtras();\n\n\n\n        if (bundle != null) {\n            Object[] pdus = (Object[])bundle.get(&quot;pdus&quot;);\n            final SmsMessage[] messages = new SmsMessage[pdus.length];\n            for (int i = 0; i &lt; pdus.length; i++) {\n                messages[i] = SmsMessage.createFromPdu((byte[])pdus[i]);\n            }\n\n\n     // i want to save message some where befor showing notification\n\n            Notification notification = new Notification(context);\n            notification.sendNotification(context , &quot;new message&quot; , messages[0].getMessageBody());\n\n        }\n\n    }\n}\n\n\n}\n</code></pre>\n<p>everything is working and I'm receiving notification any time even if application is killed and its in background</p>\n<p>now the question is that , how can I save those notifications when app is in background?</p>\n<p>I tried room database and shared preferences in my service but not worked !!</p>\n<p>**Please do not suggest using other methods. I just want to save data in background service , if its possible</p>\n"},{"tags":["java","android","flutter","usbserial"],"owner":{"account_id":18912484,"reputation":574,"user_id":13798282,"display_name":"Mohamadamin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":313,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1657969991,"creation_date":1657965343,"question_id":73003226,"body_markdown":"I have a flutter app that run a java code in some situations.\r\nI wrote java code in method call handler in `MethodCahnnel`.\r\nIn this callback I call another method that is communicate with a serial port using [usb-serial-for-android][1] and wait for data in `onNewData` listener. I want to send back this data to flutter. and I am using a class variable for it and fill it in `onNewData` method. and use `result.success` conditionaly when the variable is not empty! but `result.succes`s never called and if I delete the if statement, `result.success` called when the variable is empty.\r\n\r\n**Here is the section of my code:**\r\n\r\n    public class MainActivity extends FlutterActivity implements SerialInputOutputManager.Listener {\r\n    \r\n        private static final String CHANNEL = &quot;channel&quot;;\r\n    \r\n        private UsbSerialPort connectionPort;\r\n        private String response = &quot;&quot;;\r\n    \r\n    \r\n        @Override\r\n        protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n        }\r\n    \r\n        @Override\r\n        public void configureFlutterEngine(@NonNull FlutterEngine flutterEngine) {\r\n            super.configureFlutterEngine(flutterEngine);\r\n            new MethodChannel(flutterEngine.getDartExecutor().getBinaryMessenger(), CHANNEL)\r\n                    .setMethodCallHandler(\r\n                            (call, result) -&gt; {\r\n                                        select();\r\n                                        if (!response.isEmpty()) result.success(response);\r\n                            }\r\n                    );\r\n        }\r\n    \r\n        @Override\r\n        protected void onNewIntent(Intent intent) {\r\n            if (intent.getAction().equals(&quot;android.hardware.usb.action.USB_DEVICE_ATTACHED&quot;)) {\r\n                Toast.makeText(this, &quot;new usb device detected!&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n            super.onNewIntent(intent);\r\n        }\r\n    \r\n        private void select() {\r\n            connectionPort.write(...);\r\n        }\r\n    \r\n        @Override\r\n        public void onNewData(byte[] data) {\r\n            response = Utils.byteArrayToHexString(data);\r\n        }\r\n    \r\n        @Override\r\n        public void onRunError(Exception e) {\r\n            status(&quot;error onRunError&quot; + e.getMessage());\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://github.com/mik3y/usb-serial-for-android","title":"How to pend flutter method channel callback (android native java code) for an android listener","body":"<p>I have a flutter app that run a java code in some situations.\nI wrote java code in method call handler in <code>MethodCahnnel</code>.\nIn this callback I call another method that is communicate with a serial port using <a href=\"https://github.com/mik3y/usb-serial-for-android\" rel=\"nofollow noreferrer\">usb-serial-for-android</a> and wait for data in <code>onNewData</code> listener. I want to send back this data to flutter. and I am using a class variable for it and fill it in <code>onNewData</code> method. and use <code>result.success</code> conditionaly when the variable is not empty! but <code>result.succes</code>s never called and if I delete the if statement, <code>result.success</code> called when the variable is empty.</p>\n<p><strong>Here is the section of my code:</strong></p>\n<pre><code>public class MainActivity extends FlutterActivity implements SerialInputOutputManager.Listener {\n\n    private static final String CHANNEL = &quot;channel&quot;;\n\n    private UsbSerialPort connectionPort;\n    private String response = &quot;&quot;;\n\n\n    @Override\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n    }\n\n    @Override\n    public void configureFlutterEngine(@NonNull FlutterEngine flutterEngine) {\n        super.configureFlutterEngine(flutterEngine);\n        new MethodChannel(flutterEngine.getDartExecutor().getBinaryMessenger(), CHANNEL)\n                .setMethodCallHandler(\n                        (call, result) -&gt; {\n                                    select();\n                                    if (!response.isEmpty()) result.success(response);\n                        }\n                );\n    }\n\n    @Override\n    protected void onNewIntent(Intent intent) {\n        if (intent.getAction().equals(&quot;android.hardware.usb.action.USB_DEVICE_ATTACHED&quot;)) {\n            Toast.makeText(this, &quot;new usb device detected!&quot;, Toast.LENGTH_SHORT).show();\n        }\n        super.onNewIntent(intent);\n    }\n\n    private void select() {\n        connectionPort.write(...);\n    }\n\n    @Override\n    public void onNewData(byte[] data) {\n        response = Utils.byteArrayToHexString(data);\n    }\n\n    @Override\n    public void onRunError(Exception e) {\n        status(&quot;error onRunError&quot; + e.getMessage());\n    }\n}\n</code></pre>\n"},{"tags":["java","hibernate","jpa","jpa-2.2"],"comments":[{"owner":{"account_id":2684712,"reputation":2248,"user_id":2319333,"display_name":"Halko Karr-Sajtarevic"},"score":0,"creation_date":1636748526,"post_id":69948594,"comment_id":123648645,"body_markdown":"what kind of database do you use? what does your datasource look like?","body":"what kind of database do you use? what does your datasource look like?"},{"owner":{"account_id":16905882,"reputation":1,"user_id":12226214,"display_name":"water thief"},"score":0,"creation_date":1636748687,"post_id":69948594,"comment_id":123648677,"body_markdown":"tbh i have no idea i think eclipse does everything on it&#39;s own i haven&#39;t had to setup a database at all.","body":"tbh i have no idea i think eclipse does everything on it&#39;s own i haven&#39;t had to setup a database at all."},{"owner":{"account_id":16905882,"reputation":1,"user_id":12226214,"display_name":"water thief"},"score":0,"creation_date":1636748827,"post_id":69948594,"comment_id":123648713,"body_markdown":"i forgot to mention i deploy to wildfly 24 i&#39;ll edit the question.","body":"i forgot to mention i deploy to wildfly 24 i&#39;ll edit the question."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1636749924,"post_id":69948594,"comment_id":123649008,"body_markdown":"Flush doesn&#39;t do anything itself other than force JPA to issue SQL statements - you must be an a transactional context and commit that context for the data to be persisted in the DB.  But if you don&#39;t have a persistent database setup, it might not be a persistent database and is using an In-memory database that is wiped out when your app restarts. Setup a database and control it yourself to determine if something else is wrong.","body":"Flush doesn&#39;t do anything itself other than force JPA to issue SQL statements - you must be an a transactional context and commit that context for the data to be persisted in the DB.  But if you don&#39;t have a persistent database setup, it might not be a persistent database and is using an In-memory database that is wiped out when your app restarts. Setup a database and control it yourself to determine if something else is wrong."},{"owner":{"account_id":16905882,"reputation":1,"user_id":12226214,"display_name":"water thief"},"score":0,"creation_date":1636751012,"post_id":69948594,"comment_id":123649354,"body_markdown":"ah! ok so it&#39;s saves it to a database that ends up discarded when i end the program. i&#39;ll try to setup a real database and I&#39;ll get back to you. thx.","body":"ah! ok so it&#39;s saves it to a database that ends up discarded when i end the program. i&#39;ll try to setup a real database and I&#39;ll get back to you. thx."}],"owner":{"account_id":16905882,"reputation":1,"user_id":12226214,"display_name":"water thief"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1657969652,"creation_date":1636748228,"question_id":69948594,"body_markdown":"I&#39;ve been trying to learn JPA,EJB,servlets, things are working ok for the most part.\r\nBut whatever I do I can&#39;t actually get hibernate to find anything i&#39;ve persisted after I restart the application on the wildfly server.\r\n\r\nit&#39;s really frustrating there&#39;s no error message, nothing in the logs and when I check that my object is in the entity manager with .contains it&#39;s does return true.\r\n\r\nI&#39;ve tried adding a `flush()`\r\n\r\nI&#39;ve tried adding my class to the `persistance.xml`. (it&#39;s meant to find it automatically right ?)\r\n\r\nI&#39;ve tried changing the generation.database.action to : create, drop-and-create, drop and none; no luck.\r\n\r\nhere are the files if anybody could help it&#39;d be great because i&#39;m very confused rn.\r\n\r\npersistance.xml :\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;persistence version=&quot;2.2&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd&quot;&gt;\r\n    \t&lt;persistence-unit name=&quot;EJBColis&quot;&gt;\r\n    \t\t&lt;class&gt;jpa.Colis&lt;/class&gt;\r\n    \t\t&lt;exclude-unlisted-classes&gt;false&lt;/exclude-unlisted-classes&gt;\r\n    \t\t&lt;properties&gt;\r\n    \t\t\t&lt;property name=&quot;javax.persistence.schema-generation.database.action&quot; value=&quot;create&quot;/&gt;\r\n    \t\t&lt;/properties&gt;\r\n    \t&lt;/persistence-unit&gt;\r\n    &lt;/persistence&gt;\r\n\r\nEJBColis.java\r\n\r\n    package ejb;\r\n    \r\n    import java.util.LinkedList;\r\n    import java.util.List;\r\n    \r\n    import javax.ejb.LocalBean;\r\n    import javax.ejb.Stateless;\r\n    import javax.persistence.EntityManager;\r\n    import javax.persistence.PersistenceContext;\r\n    import javax.persistence.TypedQuery;\r\n    \r\n    import jpa.Colis;\r\n    import jpa.Mesure;\r\n    import jpa.Position;\r\n    \r\n    @Stateless\r\n    @LocalBean\r\n    public class EJBColis {\r\n    \t@PersistenceContext\r\n    \tprivate EntityManager em;\r\n    \t\r\n    \t\r\n    \t/**\r\n    \t * Constructeur sans parametre obligatoire\r\n    \t */\r\n    \tpublic EJBColis() {\r\n    \t}\r\n    \t\r\n    \tpublic Colis addColis(double poid,double valeur,String origin,String destination,Position p ) {\r\n    \t\tColis m = new Colis(poid, valeur, origin, destination, p);\r\n    \t\tem.persist(m);\r\n    \t\tem.flush();\r\n    \t\tem.refresh(m);\r\n    \t\treturn m;\r\n    \t}\r\n     \r\n    \tpublic Colis findColis(long id) {\r\n    \t\tColis m = em.find(Colis.class, id);\r\n    \t\treturn m;\r\n    \t}\r\n    \t\r\n    \tpublic Position changePosition(long ColisId,double longitude,double lat,String origin,String destination) {\r\n    \t\tPosition m = new Position(longitude,lat, origin, destination);\r\n    \t\tColis c = findColis(ColisId);\r\n    \t\tc.setPosition(m);\r\n    \t\tem.persist(c);\r\n    \t\tem.flush();\r\n    \t\treturn m;\r\n    \t}\r\n    \t\r\n    \tpublic Position findPosition(long id) {\r\n    \t\tPosition m = em.find(Position.class, id);\r\n    \t\treturn m;\r\n    \t}\r\n\r\n\r\n\r\n}\r\n\r\naddColisServlet.java :\r\n    \r\n    package servlet;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    import javax.ejb.EJB;\r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.annotation.WebServlet;\r\n    import javax.servlet.http.HttpServlet;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    \r\n    import ejb.EJBColis;\r\n    import jpa.Colis;\r\n    import jpa.Mesure;\r\n    import jpa.Position;\r\n    \r\n    /**\r\n     * Servlet implementation class AddColisServlet\r\n     */\r\n    @WebServlet(&quot;/AddColisServlet&quot;)\r\n    public class AddColisServlet extends HttpServlet {\r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \t\r\n    \t// injection de la reference de l&#39;ejb\r\n    \t@EJB\r\n    \tprivate EJBColis ejb;\r\n           \r\n        /**\r\n         * @see HttpServlet#HttpServlet()\r\n         */\r\n        public AddColisServlet() {\r\n            super();\r\n        }\r\n    \r\n    \t/**\r\n    \t * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)\r\n    \t */\r\n    \tprotected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n    \t\tdouble Poid = Double.parseDouble(request.getParameter(&quot;poid&quot;));\r\n    \t\tdouble valeur = Double.parseDouble(request.getParameter(&quot;valeur&quot;)) ;\r\n    \t\tString origine = request.getParameter(&quot;origine&quot;);\r\n    \t\tString destination = request.getParameter(&quot;destination&quot;);\r\n    \t\tPosition position = null;\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\tColis m = ejb.addColis(Poid, valeur, origine, destination, position);\t\t\r\n    \t\t// ajout de la mesure dans la requete\r\n    \t\trequest.setAttribute(&quot;Colis&quot;,m);\r\n    \t\t// transfert a la JSP d&#39;affichage\r\n    \t\trequest.getRequestDispatcher(&quot;/showColis.jsp&quot;).forward(request, response);\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)\r\n    \t */\r\n    \tprotected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n    \t\tdoGet(request, response);\r\n    \t}\r\n    \r\n    }\r\n\r\nthe html page that calls addColisServlet :\r\n\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n    &lt;head&gt;\r\n    \t&lt;meta charset=&quot;ISO-8859-1&quot;&gt;\r\n    \t&lt;title&gt;Manipulation des comptes bancaires&lt;/title&gt;\r\n    \t&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;css/base.css&quot; &gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    &lt;h1&gt;Manipulation des comptes bancaires&lt;/h1&gt;\r\n    \t&lt;h2&gt;tracker un colis :&lt;/h2&gt;\r\n    \t&lt;form action=&quot;ShowColisServlet&quot; method=&quot;post&quot;&gt;\r\n    \t\tID : &lt;input type=&quot;number&quot; name=&quot;ID&quot;&gt;\r\n    \t\t&lt;input type=&quot;submit&quot; value=&quot;valider&quot;&gt;\r\n    \t&lt;/form&gt;\r\n    \t&lt;h2&gt;Creer un colis&lt;/h2&gt;\r\n    \t&lt;form action=&quot;AddColisServlet&quot; method=&quot;post&quot;&gt;\r\n    \t\tPoid : &lt;input type=&quot;number&quot; name=&quot;poid&quot;&gt;\r\n    \t\tvaleur : &lt;input type=&quot;number&quot; name=&quot;valeur&quot;&gt;\r\n    \t\torigine : &lt;input type=&quot;text&quot; name=&quot;origine&quot;&gt;\r\n    \t\tdestination : &lt;input type=&quot;text&quot; name=&quot;destination&quot;&gt;\r\n    \t\t&lt;input type=&quot;submit&quot; value=&quot;valider&quot;&gt;\r\n    \t&lt;/form&gt;\r\n    \t&lt;h2&gt;modifier position d&#39;un colis:&lt;/h2&gt;\r\n    \t&lt;form action=&quot;ModifColisServlet&quot; method=&quot;post&quot;&gt;\r\n    \t\tID : &lt;input type=&quot;text&quot; name=&quot;ID&quot;&gt;\r\n    \t\tlatitude : &lt;input type=&quot;number&quot; name=&quot;lat&quot;&gt;\r\n    \t\tlongitude : &lt;input type=&quot;number&quot; name=&quot;long&quot;&gt;\r\n    \t\templacement : &lt;input type=&quot;text&quot; name=&quot;emplacement&quot;&gt;\r\n    \t\tetat : &lt;input type=&quot;text&quot; name=&quot;etat&quot;&gt;\r\n    \t\t&lt;input type=&quot;submit&quot; value=&quot;chercher&quot;&gt;\r\n    \t&lt;/form&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nalso i setup a github link to the code it&#39;s an eclipse project : \r\n\r\nhttps://github.com/vvhitefox/ColisEJB","title":"Why are no data stored after persist and restart","body":"<p>I've been trying to learn JPA,EJB,servlets, things are working ok for the most part.\nBut whatever I do I can't actually get hibernate to find anything i've persisted after I restart the application on the wildfly server.</p>\n<p>it's really frustrating there's no error message, nothing in the logs and when I check that my object is in the entity manager with .contains it's does return true.</p>\n<p>I've tried adding a <code>flush()</code></p>\n<p>I've tried adding my class to the <code>persistance.xml</code>. (it's meant to find it automatically right ?)</p>\n<p>I've tried changing the generation.database.action to : create, drop-and-create, drop and none; no luck.</p>\n<p>here are the files if anybody could help it'd be great because i'm very confused rn.</p>\n<p>persistance.xml :</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;persistence version=&quot;2.2&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd&quot;&gt;\n    &lt;persistence-unit name=&quot;EJBColis&quot;&gt;\n        &lt;class&gt;jpa.Colis&lt;/class&gt;\n        &lt;exclude-unlisted-classes&gt;false&lt;/exclude-unlisted-classes&gt;\n        &lt;properties&gt;\n            &lt;property name=&quot;javax.persistence.schema-generation.database.action&quot; value=&quot;create&quot;/&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n<p>EJBColis.java</p>\n<pre><code>package ejb;\n\nimport java.util.LinkedList;\nimport java.util.List;\n\nimport javax.ejb.LocalBean;\nimport javax.ejb.Stateless;\nimport javax.persistence.EntityManager;\nimport javax.persistence.PersistenceContext;\nimport javax.persistence.TypedQuery;\n\nimport jpa.Colis;\nimport jpa.Mesure;\nimport jpa.Position;\n\n@Stateless\n@LocalBean\npublic class EJBColis {\n    @PersistenceContext\n    private EntityManager em;\n    \n    \n    /**\n     * Constructeur sans parametre obligatoire\n     */\n    public EJBColis() {\n    }\n    \n    public Colis addColis(double poid,double valeur,String origin,String destination,Position p ) {\n        Colis m = new Colis(poid, valeur, origin, destination, p);\n        em.persist(m);\n        em.flush();\n        em.refresh(m);\n        return m;\n    }\n \n    public Colis findColis(long id) {\n        Colis m = em.find(Colis.class, id);\n        return m;\n    }\n    \n    public Position changePosition(long ColisId,double longitude,double lat,String origin,String destination) {\n        Position m = new Position(longitude,lat, origin, destination);\n        Colis c = findColis(ColisId);\n        c.setPosition(m);\n        em.persist(c);\n        em.flush();\n        return m;\n    }\n    \n    public Position findPosition(long id) {\n        Position m = em.find(Position.class, id);\n        return m;\n    }\n</code></pre>\n<p>}</p>\n<p>addColisServlet.java :</p>\n<pre><code>package servlet;\n\nimport java.io.IOException;\n\nimport javax.ejb.EJB;\nimport javax.servlet.ServletException;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport ejb.EJBColis;\nimport jpa.Colis;\nimport jpa.Mesure;\nimport jpa.Position;\n\n/**\n * Servlet implementation class AddColisServlet\n */\n@WebServlet(&quot;/AddColisServlet&quot;)\npublic class AddColisServlet extends HttpServlet {\n    private static final long serialVersionUID = 1L;\n    \n    // injection de la reference de l'ejb\n    @EJB\n    private EJBColis ejb;\n       \n    /**\n     * @see HttpServlet#HttpServlet()\n     */\n    public AddColisServlet() {\n        super();\n    }\n\n    /**\n     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)\n     */\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        double Poid = Double.parseDouble(request.getParameter(&quot;poid&quot;));\n        double valeur = Double.parseDouble(request.getParameter(&quot;valeur&quot;)) ;\n        String origine = request.getParameter(&quot;origine&quot;);\n        String destination = request.getParameter(&quot;destination&quot;);\n        Position position = null;\n        \n        \n        \n        \n        Colis m = ejb.addColis(Poid, valeur, origine, destination, position);       \n        // ajout de la mesure dans la requete\n        request.setAttribute(&quot;Colis&quot;,m);\n        // transfert a la JSP d'affichage\n        request.getRequestDispatcher(&quot;/showColis.jsp&quot;).forward(request, response);\n    }\n\n    /**\n     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)\n     */\n    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        doGet(request, response);\n    }\n\n}\n</code></pre>\n<p>the html page that calls addColisServlet :</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;ISO-8859-1&quot;&gt;\n    &lt;title&gt;Manipulation des comptes bancaires&lt;/title&gt;\n    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;css/base.css&quot; &gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h1&gt;Manipulation des comptes bancaires&lt;/h1&gt;\n    &lt;h2&gt;tracker un colis :&lt;/h2&gt;\n    &lt;form action=&quot;ShowColisServlet&quot; method=&quot;post&quot;&gt;\n        ID : &lt;input type=&quot;number&quot; name=&quot;ID&quot;&gt;\n        &lt;input type=&quot;submit&quot; value=&quot;valider&quot;&gt;\n    &lt;/form&gt;\n    &lt;h2&gt;Creer un colis&lt;/h2&gt;\n    &lt;form action=&quot;AddColisServlet&quot; method=&quot;post&quot;&gt;\n        Poid : &lt;input type=&quot;number&quot; name=&quot;poid&quot;&gt;\n        valeur : &lt;input type=&quot;number&quot; name=&quot;valeur&quot;&gt;\n        origine : &lt;input type=&quot;text&quot; name=&quot;origine&quot;&gt;\n        destination : &lt;input type=&quot;text&quot; name=&quot;destination&quot;&gt;\n        &lt;input type=&quot;submit&quot; value=&quot;valider&quot;&gt;\n    &lt;/form&gt;\n    &lt;h2&gt;modifier position d'un colis:&lt;/h2&gt;\n    &lt;form action=&quot;ModifColisServlet&quot; method=&quot;post&quot;&gt;\n        ID : &lt;input type=&quot;text&quot; name=&quot;ID&quot;&gt;\n        latitude : &lt;input type=&quot;number&quot; name=&quot;lat&quot;&gt;\n        longitude : &lt;input type=&quot;number&quot; name=&quot;long&quot;&gt;\n        emplacement : &lt;input type=&quot;text&quot; name=&quot;emplacement&quot;&gt;\n        etat : &lt;input type=&quot;text&quot; name=&quot;etat&quot;&gt;\n        &lt;input type=&quot;submit&quot; value=&quot;chercher&quot;&gt;\n    &lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>also i setup a github link to the code it's an eclipse project :</p>\n<p><a href=\"https://github.com/vvhitefox/ColisEJB\" rel=\"nofollow noreferrer\">https://github.com/vvhitefox/ColisEJB</a></p>\n"},{"tags":["java","intellij-idea","ide"],"comments":[{"owner":{"account_id":36734,"reputation":392127,"user_id":104891,"display_name":"CrazyCoder"},"score":1,"creation_date":1627931314,"post_id":68626739,"comment_id":121282773,"body_markdown":"`/home/viktoriya/.jdks/adopt-openjdk-1.8.0_292/bin/java` looks corrupted, try reinstalling the JDK or switch to a different JDK version.","body":"<code>&#47;home&#47;viktoriya&#47;.jdks&#47;adopt-openjdk-1.8.0_292&#47;bin&#47;java</code> looks corrupted, try reinstalling the JDK or switch to a different JDK version."},{"owner":{"account_id":22363991,"reputation":55,"user_id":16580109,"display_name":"helloJava"},"score":0,"creation_date":1627932875,"post_id":68626739,"comment_id":121283213,"body_markdown":"@CrazyCoder thank you, it was truly a problem with jdk. Now the project it&#39;s work in the both ide","body":"@CrazyCoder thank you, it was truly a problem with jdk. Now the project it&#39;s work in the both ide"},{"owner":{"account_id":4009180,"reputation":4758,"user_id":3303074,"display_name":"Prasanth Rajendran"},"score":1,"creation_date":1627934076,"post_id":68626739,"comment_id":121283569,"body_markdown":"It seems like configured JDK is invalid","body":"It seems like configured JDK is invalid"}],"owner":{"account_id":22363991,"reputation":55,"user_id":16580109,"display_name":"helloJava"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1657968804,"creation_date":1627930738,"question_id":68626739,"body_markdown":"I create a Maven project with IJ Community Edition, and it&#39;s work with no errors. After I try to open this project with IJ Ultimate, but my progect(exercises) went to break up in both IDE.\r\n\r\n    Abnormal build process termination:\r\n    /home/viktoriya/.jdks/adopt-openjdk-1.8.0_292/bin/java -Xmx700m - \r\n    Djava.awt.headless=true -Djava.endorsed.dirs=\\&quot;\\&quot; Dexternal.project.config=/home/viktoriya/.cache/JetBrains/IntelliJIdea2021.2/external_bui \r\n    ld_system/aop.8b786682 -Dcompile.parallel=false -Drebuild.on.dependency.change=true - \r\n    Djdt.compiler.useSingleThread=true -Daether.connector.resumeDownloads=false - \r\n    Dio.netty.initialSeedUniquifier=-3134077656729915217 -Dfile.encoding=UTF-8 - \r\n    Duser.language=it -Duser.country=IT -Didea.paths.selector=IntelliJIdea2021.2 - \r\n    Didea.home.path=/snap/intellij-idea-ultimate/311 - \r\n    Didea.config.path=/home/viktoriya/.config/JetBrains/IntelliJIdea2021.2 - \r\n    Didea.plugins.path=/home/viktoriya/.local/share/JetBrains/IntelliJIdea2021.2 - \r\n    Djps.log.dir=/home/viktoriya/.cache/JetBrains/IntelliJIdea2021.2/log/build-log - \r\n    Djps.fallback.jdk.home=/snap/intellij-idea-ultimate/311/jbr - \r\n    Djps.fallback.jdk.version=11.0.11 -Dio.netty.noUnsafe=true - \r\n    Djava.io.tmpdir=/home/viktoriya/.cache/JetBrains/IntelliJIdea2021.2/compile- \r\n    server/aop_fceb3a58/_temp_ -Djps.backward.ref.index.builder=true - \r\n    Dtmh.instrument.annotations=true -Dtmh.generate.line.numbers=true - \r\n    Dkotlin.incremental.compilation=true -Dkotlin.incremental.compilation.js=true - \r\n    Dkotlin.daemon.enabled -Dkotlin.daemon.client.alive.path=\\&quot;/tmp/kotlin-idea- \r\n    12642686614178805058-is-running\\&quot; -classpath /snap/intellij-idea- \r\n    ultimate/311/plugins/java/lib/jps-launcher.jar:/home/viktoriya/.jdks/adopt-openjdk- \r\n    1.8.0_292/lib/tools.jar org.jetbrains.jps.cmdline.Launcher /snap/intellij-idea- \r\n    ultimate/311/lib/jps-model.jar:/snap/intellij-idea- \r\n    ultimate/311/plugins/java/lib/maven-resolver-transport-file-1.3.3.jar:/snap/intellij- \r\n    idea-ultimate/311/lib/forms_rt.jar:/snap/intellij-idea-ultimate/311/lib/jna- \r\n    platform.jar:/snap/intellij-idea-ultimate/311/plugins/java/lib/jps- \r\n    builders.jar:/snap/intellij-idea-ultimate/311/plugins/java/lib/jps-builders- \r\n    6.jar:/snap/intellij-idea-ultimate/311/lib/kotlin-stdlib-jdk8.jar:/snap/intellij- \r\n    idea-ultimate/311/lib/slf4j.jar:/snap/intellij-idea-ultimate/311/lib/protobuf-java- \r\n    3.15.8.jar:/snap/intellij-idea-ultimate/311/plugins/java/lib/maven-resolver- \r\n    connector-basic-1.3.3.jar:/snap/intellij-idea- \r\n    ultimate/311/lib/idea_rt.jar:/snap/intellij-idea-ultimate/311/plugins/java/lib/maven- \r\n    resolver-transport-http-1.3.3.jar:/snap/intellij-idea- \r\n    ultimate/311/lib/jna.jar:/snap/intellij-idea- \r\n    ultimate/311/plugins/java/lib/javac2.jar:/snap/intellij-idea-ultimate/311/lib/3rd- \r\n    party.jar:/snap/intellij-idea-ultimate/311/plugins/java/lib/jps-javac-extension- \r\n    1.jar:/snap/intellij-idea-ultimate/311/lib/util.jar:/snap/intellij-idea- \r\n    ultimate/311/lib/annotations.jar:/snap/intellij-idea- \r\n    ultimate/311/plugins/java/lib/aether-dependency-resolver.jar:/snap/intellij-idea- \r\n    ultimate/311/lib/platform-api.jar:/snap/intellij-idea- \r\n    ultimate/311/plugins/JavaEE/lib/jasper-v2-rt.jar:/snap/intellij-idea- \r\n    ultimate/311/plugins/Kotlin/lib/kotlin-reflect.jar:/snap/intellij-idea- \r\n    ultimate/311/plugins/Kotlin/lib/kotlin-plugin.jar:/snap/intellij-idea- \r\n    ultimate/311/plugins/ant/lib/ant-jps.jar:/snap/intellij-idea- \r\n    ultimate/311/plugins/uiDesigner/lib/jps/java-guiForms-jps.jar:/snap/intellij-idea- \r\n    ultimate/311/plugins/eclipse/lib/eclipse-jps.jar:/snap/intellij-idea- \r\n    ultimate/311/plugins/eclipse/lib/eclipse-common.jar:/snap/intellij-idea- \r\n    ultimate/311/plugins/IntelliLang/lib/java-langInjection-jps.jar:/snap/intellij-idea- \r\n    ultimate/311/plugins/Groovy/lib/groovy-jps.jar:/snap/intellij-idea- \r\n    ultimate/311/plugins/Groovy/lib/groovy-constants-rt.jar:/snap/intellij-idea- \r\n    ultimate/311/plugins/maven/lib/maven-jps.jar:/snap/intellij-idea- \r\n    ultimate/311/plugins/gradle-java/lib/gradle-jps.jar:/snap/intellij-idea- \r\n    ultimate/311/plugins/devkit/lib/devkit-jps.jar:/snap/intellij-idea- \r\n    ultimate/311/plugins/javaFX/lib/javaFX-jps.jar:/snap/intellij-idea- \r\n    ultimate/311/plugins/javaFX/lib/javaFX-common.jar:/snap/intellij-idea- \r\n    ultimate/311/plugins/JavaEE/lib/javaee-jps.jar:/snap/intellij-idea- \r\n    ultimate/311/plugins/webSphereIntegration/lib/jps/javaee-appServers-websphere- \r\n    jps.jar:/snap/intellij-idea-ultimate/311/plugins/weblogicIntegration/lib/jps/javaee- \r\n    appServers-weblogic-jps.jar:/snap/intellij-idea- \r\n    ultimate/311/plugins/JPA/lib/jps/javaee-jpa-jps.jar:/snap/intellij-idea- \r\n    ultimate/311/plugins/Grails/lib/groovy-grails-jps.jar:/snap/intellij-idea- \r\n    ultimate/311/plugins/Grails/lib/groovy-grails-compilerPatch.jar:/snap/intellij-idea- \r\n    ultimate/311/plugins/Kotlin/lib/jps/kotlin-jps-plugin.jar:/snap/intellij-idea- \r\n    ultimate/311/plugins/Kotlin/lib/kotlin-jps-common.jar:/snap/intellij-idea- \r\n    ultimate/311/plugins/Kotlin/lib/kotlin-common.jar org.jetbrains.jps.cmdline.BuildMain \r\n     127.0.0.1 36431 07bedbac-3b45-46ae-985c-23aa3cfc7910 \r\n     /home/viktoriya/.cache/JetBrains/IntelliJIdea2021.2/compile-server\r\n     /home/viktoriya/.jdks/adopt-openjdk-1.8.0_292/bin/java: 1: ELF\u0002\u0001\u0001\u0003: not found\r\n     /home/viktoriya/.jdks/adopt-openjdk-1.8.0_292/bin/java: 2: : not found\r\n     /home/viktoriya/.jdks/adopt-openjdk-1.8.0_292/bin/java: 3: : not found\r\n     /home/viktoriya/.jdks/adopt-openjdk-1.8.0_292/bin/java: 4: \u0002\u0002: not found\r\n     /home/viktoriya/.jdks/adopt-openjdk-1.8.0_292/bin/java: 5: : not found\r\n     /home/viktoriya/.jdks/adopt-openjdk-1.8.0_292/bin/java: 6: : not found\r\n     /home/viktoriya/.jdks/adopt-openjdk-1.8.0_292/bin/java: 7: \u0010\u0002\u0010\u0004\u0004T\u0002T\u0002T\u0002: not found\r\n     /home/viktoriya/.jdks/adopt-openjdk-1.8.0_292/bin/java: 8: : not found\r\n     /home/viktoriya/.jdks/adopt-openjdk-1.8.0_292/bin/java: 9: : not found\r\n     /home/viktoriya/.jdks/adopt-openjdk-1.8.0_292/bin/java: 10: P\u0002P\u0002\u0001/lib64/ld-linux- \r\n     x86-64.so.2\u0004\u0010\u0001GNU\u0002\u0006\u0012: not found\r\n     /home/viktoriya/.jdks/adopt-openjdk-1.8.0_292/bin/java: 16: Syntax error: &quot;)&quot; \r\n     unexpected`\r\n\r\n\r\nSo I try to open it again with IJ Community, but I&#39;s was also broked. I create a new one,identical, with the same classes and the same Maven dependecies with IJ Community, I change just the name progect, and it&#39;s work. \r\nSo my question is why IJ Utilmate broke my progect and how may I adjust it. \r\nAfter I create a simple Maven progect with just an System.out.println(&quot;hello&quot;); with Ij Ultimate, and I&#39;ve got the same results like in my firs progect, so was broked with the same message about &quot;Abnormal buiild process terminated&quot;.\r\nSo the problem it&#39;s not in my code, but with IJ Ultimate Ide. How may I fix it? Because I prefer work with Ultimate edition.\r\nThank you","title":"problems with IDE IJ Community vs IJ Ultimate","body":"<p>I create a Maven project with IJ Community Edition, and it's work with no errors. After I try to open this project with IJ Ultimate, but my progect(exercises) went to break up in both IDE.</p>\n<pre><code>Abnormal build process termination:\n/home/viktoriya/.jdks/adopt-openjdk-1.8.0_292/bin/java -Xmx700m - \nDjava.awt.headless=true -Djava.endorsed.dirs=\\&quot;\\&quot; Dexternal.project.config=/home/viktoriya/.cache/JetBrains/IntelliJIdea2021.2/external_bui \nld_system/aop.8b786682 -Dcompile.parallel=false -Drebuild.on.dependency.change=true - \nDjdt.compiler.useSingleThread=true -Daether.connector.resumeDownloads=false - \nDio.netty.initialSeedUniquifier=-3134077656729915217 -Dfile.encoding=UTF-8 - \nDuser.language=it -Duser.country=IT -Didea.paths.selector=IntelliJIdea2021.2 - \nDidea.home.path=/snap/intellij-idea-ultimate/311 - \nDidea.config.path=/home/viktoriya/.config/JetBrains/IntelliJIdea2021.2 - \nDidea.plugins.path=/home/viktoriya/.local/share/JetBrains/IntelliJIdea2021.2 - \nDjps.log.dir=/home/viktoriya/.cache/JetBrains/IntelliJIdea2021.2/log/build-log - \nDjps.fallback.jdk.home=/snap/intellij-idea-ultimate/311/jbr - \nDjps.fallback.jdk.version=11.0.11 -Dio.netty.noUnsafe=true - \nDjava.io.tmpdir=/home/viktoriya/.cache/JetBrains/IntelliJIdea2021.2/compile- \nserver/aop_fceb3a58/_temp_ -Djps.backward.ref.index.builder=true - \nDtmh.instrument.annotations=true -Dtmh.generate.line.numbers=true - \nDkotlin.incremental.compilation=true -Dkotlin.incremental.compilation.js=true - \nDkotlin.daemon.enabled -Dkotlin.daemon.client.alive.path=\\&quot;/tmp/kotlin-idea- \n12642686614178805058-is-running\\&quot; -classpath /snap/intellij-idea- \nultimate/311/plugins/java/lib/jps-launcher.jar:/home/viktoriya/.jdks/adopt-openjdk- \n1.8.0_292/lib/tools.jar org.jetbrains.jps.cmdline.Launcher /snap/intellij-idea- \nultimate/311/lib/jps-model.jar:/snap/intellij-idea- \nultimate/311/plugins/java/lib/maven-resolver-transport-file-1.3.3.jar:/snap/intellij- \nidea-ultimate/311/lib/forms_rt.jar:/snap/intellij-idea-ultimate/311/lib/jna- \nplatform.jar:/snap/intellij-idea-ultimate/311/plugins/java/lib/jps- \nbuilders.jar:/snap/intellij-idea-ultimate/311/plugins/java/lib/jps-builders- \n6.jar:/snap/intellij-idea-ultimate/311/lib/kotlin-stdlib-jdk8.jar:/snap/intellij- \nidea-ultimate/311/lib/slf4j.jar:/snap/intellij-idea-ultimate/311/lib/protobuf-java- \n3.15.8.jar:/snap/intellij-idea-ultimate/311/plugins/java/lib/maven-resolver- \nconnector-basic-1.3.3.jar:/snap/intellij-idea- \nultimate/311/lib/idea_rt.jar:/snap/intellij-idea-ultimate/311/plugins/java/lib/maven- \nresolver-transport-http-1.3.3.jar:/snap/intellij-idea- \nultimate/311/lib/jna.jar:/snap/intellij-idea- \nultimate/311/plugins/java/lib/javac2.jar:/snap/intellij-idea-ultimate/311/lib/3rd- \nparty.jar:/snap/intellij-idea-ultimate/311/plugins/java/lib/jps-javac-extension- \n1.jar:/snap/intellij-idea-ultimate/311/lib/util.jar:/snap/intellij-idea- \nultimate/311/lib/annotations.jar:/snap/intellij-idea- \nultimate/311/plugins/java/lib/aether-dependency-resolver.jar:/snap/intellij-idea- \nultimate/311/lib/platform-api.jar:/snap/intellij-idea- \nultimate/311/plugins/JavaEE/lib/jasper-v2-rt.jar:/snap/intellij-idea- \nultimate/311/plugins/Kotlin/lib/kotlin-reflect.jar:/snap/intellij-idea- \nultimate/311/plugins/Kotlin/lib/kotlin-plugin.jar:/snap/intellij-idea- \nultimate/311/plugins/ant/lib/ant-jps.jar:/snap/intellij-idea- \nultimate/311/plugins/uiDesigner/lib/jps/java-guiForms-jps.jar:/snap/intellij-idea- \nultimate/311/plugins/eclipse/lib/eclipse-jps.jar:/snap/intellij-idea- \nultimate/311/plugins/eclipse/lib/eclipse-common.jar:/snap/intellij-idea- \nultimate/311/plugins/IntelliLang/lib/java-langInjection-jps.jar:/snap/intellij-idea- \nultimate/311/plugins/Groovy/lib/groovy-jps.jar:/snap/intellij-idea- \nultimate/311/plugins/Groovy/lib/groovy-constants-rt.jar:/snap/intellij-idea- \nultimate/311/plugins/maven/lib/maven-jps.jar:/snap/intellij-idea- \nultimate/311/plugins/gradle-java/lib/gradle-jps.jar:/snap/intellij-idea- \nultimate/311/plugins/devkit/lib/devkit-jps.jar:/snap/intellij-idea- \nultimate/311/plugins/javaFX/lib/javaFX-jps.jar:/snap/intellij-idea- \nultimate/311/plugins/javaFX/lib/javaFX-common.jar:/snap/intellij-idea- \nultimate/311/plugins/JavaEE/lib/javaee-jps.jar:/snap/intellij-idea- \nultimate/311/plugins/webSphereIntegration/lib/jps/javaee-appServers-websphere- \njps.jar:/snap/intellij-idea-ultimate/311/plugins/weblogicIntegration/lib/jps/javaee- \nappServers-weblogic-jps.jar:/snap/intellij-idea- \nultimate/311/plugins/JPA/lib/jps/javaee-jpa-jps.jar:/snap/intellij-idea- \nultimate/311/plugins/Grails/lib/groovy-grails-jps.jar:/snap/intellij-idea- \nultimate/311/plugins/Grails/lib/groovy-grails-compilerPatch.jar:/snap/intellij-idea- \nultimate/311/plugins/Kotlin/lib/jps/kotlin-jps-plugin.jar:/snap/intellij-idea- \nultimate/311/plugins/Kotlin/lib/kotlin-jps-common.jar:/snap/intellij-idea- \nultimate/311/plugins/Kotlin/lib/kotlin-common.jar org.jetbrains.jps.cmdline.BuildMain \n 127.0.0.1 36431 07bedbac-3b45-46ae-985c-23aa3cfc7910 \n /home/viktoriya/.cache/JetBrains/IntelliJIdea2021.2/compile-server\n /home/viktoriya/.jdks/adopt-openjdk-1.8.0_292/bin/java: 1: ELF: not found\n /home/viktoriya/.jdks/adopt-openjdk-1.8.0_292/bin/java: 2: : not found\n /home/viktoriya/.jdks/adopt-openjdk-1.8.0_292/bin/java: 3: : not found\n /home/viktoriya/.jdks/adopt-openjdk-1.8.0_292/bin/java: 4: : not found\n /home/viktoriya/.jdks/adopt-openjdk-1.8.0_292/bin/java: 5: : not found\n /home/viktoriya/.jdks/adopt-openjdk-1.8.0_292/bin/java: 6: : not found\n /home/viktoriya/.jdks/adopt-openjdk-1.8.0_292/bin/java: 7: \u0010\u0010TTT: not found\n /home/viktoriya/.jdks/adopt-openjdk-1.8.0_292/bin/java: 8: : not found\n /home/viktoriya/.jdks/adopt-openjdk-1.8.0_292/bin/java: 9: : not found\n /home/viktoriya/.jdks/adopt-openjdk-1.8.0_292/bin/java: 10: PP/lib64/ld-linux- \n x86-64.so.2\u0010GNU: not found\n /home/viktoriya/.jdks/adopt-openjdk-1.8.0_292/bin/java: 16: Syntax error: &quot;)&quot; \n unexpected`\n</code></pre>\n<p>So I try to open it again with IJ Community, but I's was also broked. I create a new one,identical, with the same classes and the same Maven dependecies with IJ Community, I change just the name progect, and it's work.\nSo my question is why IJ Utilmate broke my progect and how may I adjust it.\nAfter I create a simple Maven progect with just an System.out.println(&quot;hello&quot;); with Ij Ultimate, and I've got the same results like in my firs progect, so was broked with the same message about &quot;Abnormal buiild process terminated&quot;.\nSo the problem it's not in my code, but with IJ Ultimate Ide. How may I fix it? Because I prefer work with Ultimate edition.\nThank you</p>\n"},{"tags":["java","spring","postgresql","eclipse","jpa"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1638536073,"post_id":70214526,"comment_id":124120944,"body_markdown":"please add the logging as is with code tags, not as quotes as now it it totally unreadable. Your `application.properties` is probably in the wrong location, hence not read, hence the error.","body":"please add the logging as is with code tags, not as quotes as now it it totally unreadable. Your <code>application.properties</code> is probably in the wrong location, hence not read, hence the error."},{"owner":{"account_id":23535239,"reputation":1,"user_id":17580284,"display_name":"Murillo Jorge Nobrega de Melo"},"score":0,"creation_date":1638536664,"post_id":70214526,"comment_id":124121186,"body_markdown":"It is inside src/main/resources","body":"It is inside src/main/resources"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1638536821,"post_id":70214526,"comment_id":124121259,"body_markdown":"Again please add the logging as is, the current one is totally unreadable (and unsalvagable I did a reformatting attempt but that is impossible). Show your project structure as well. There must be something preventing it from being read.","body":"Again please add the logging as is, the current one is totally unreadable (and unsalvagable I did a reformatting attempt but that is impossible). Show your project structure as well. There must be something preventing it from being read."},{"owner":{"account_id":23535239,"reputation":1,"user_id":17580284,"display_name":"Murillo Jorge Nobrega de Melo"},"score":0,"creation_date":1638537510,"post_id":70214526,"comment_id":124121535,"body_markdown":"Just added my error message to code tags and put my project structure on my original post.","body":"Just added my error message to code tags and put my project structure on my original post."},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1638540039,"post_id":70214526,"comment_id":124122539,"body_markdown":"Try mvn spring-boot:run and see what happens","body":"Try mvn spring-boot:run and see what happens"},{"owner":{"account_id":3558487,"reputation":1004,"user_id":2971549,"display_name":"Saman Salehi"},"score":0,"creation_date":1638971926,"post_id":70214526,"comment_id":124228891,"body_markdown":"The question is very General","body":"The question is very General"}],"owner":{"account_id":23535239,"reputation":1,"user_id":17580284,"display_name":"Murillo Jorge Nobrega de Melo"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":299,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1657968704,"creation_date":1638535472,"question_id":70214526,"body_markdown":"Yesterday I could run my application, connect it to the database and even use it, today I just cant. I&#39;m using springboot, eclipse, swagger and postgresql. Already tried restarting postgresql on my machine and nothing.\r\n\r\n\r\nError message:\r\n\r\n    10:04:58.744 [Thread-0] DEBUG org.springframework.boot.devtools.restart.classloader.RestartClassLoader - Created RestartClassLoader org.springframework.boot.devtools.restart.classloader.RestartClassLoader@7708de08\r\n    \r\n      .   ____          _            __ _ _\r\n     /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n    ( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n     \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n      &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n     =========|_|==============|___/=/_/_/_/\r\n     :: Spring Boot ::                (v2.6.1)\r\n    \r\n    2021-12-03 10:04:59.003  INFO 4672 --- [  restartedMain] com.crud.CrudApplication                 : Starting CrudApplication using Java 17.0.1 on GON170102162 with PID 4672 (C:\\Users\\murillo.jorge\\eclipse-workspace\\CRUD\\target\\classes started by murillo.jorge in C:\\Users\\murillo.jorge\\eclipse-workspace\\CRUD)\r\n    2021-12-03 10:04:59.004  INFO 4672 --- [  restartedMain] com.crud.CrudApplication                 : No active profile set, falling back to default profiles: default\r\n    2021-12-03 10:04:59.037  INFO 4672 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set &#39;spring.devtools.add-properties&#39; to &#39;false&#39; to disable\r\n    2021-12-03 10:04:59.037  INFO 4672 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the &#39;logging.level.web&#39; property to &#39;DEBUG&#39;\r\n    2021-12-03 10:04:59.595  INFO 4672 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n    2021-12-03 10:04:59.627  INFO 4672 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 27 ms. Found 1 JPA repository interfaces.\r\n    2021-12-03 10:05:00.011  INFO 4672 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n    2021-12-03 10:05:00.020  INFO 4672 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n    2021-12-03 10:05:00.020  INFO 4672 --- [  restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.55]\r\n    2021-12-03 10:05:00.102  INFO 4672 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n    2021-12-03 10:05:00.103  INFO 4672 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1065 ms\r\n    2021-12-03 10:05:00.144  WARN 4672 --- [  restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;dataSourceScriptDatabaseInitializer&#39; defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unsatisfied dependency expressed through method &#39;dataSourceScriptDatabaseInitializer&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSource&#39; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method &#39;dataSource&#39; threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\r\n    2021-12-03 10:05:00.146  INFO 4672 --- [  restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\r\n    2021-12-03 10:05:00.157  INFO 4672 --- [  restartedMain] ConditionEvaluationReportLoggingListener : \r\n    \r\n    Error starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n    2021-12-03 10:05:00.168 ERROR 4672 --- [  restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : \r\n    \r\n    ***************************\r\n    APPLICATION FAILED TO START\r\n    ***************************\r\n    \r\n    Description:\r\n    \r\n    Failed to configure a DataSource: &#39;url&#39; attribute is not specified and no embedded datasource could be configured.\r\n    \r\n    Reason: Failed to determine a suitable driver class\r\n    \r\n    \r\n    Action:\r\n    \r\n    Consider the following:\r\n    \tIf you want an embedded database (H2, HSQL or Derby), please put it on the classpath.\r\n    \tIf you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).\r\n\r\nMy pom.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.6.1&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;demo&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;3.0.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;3.0.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\t\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;3.0.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;excludes&gt;\r\n    \t\t\t\t\t\t&lt;exclude&gt;\r\n    \t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t&lt;/exclude&gt;\r\n    \t\t\t\t\t&lt;/excludes&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\nmy application properties\r\n\r\n    spring.datasource.url=jdbc:postgresql://localhost:5432/Clientes\r\n    spring.datasource.username=admin\r\n    spring.datasource.password=admin\r\n    \r\n    spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect\r\n    spring.jpa.hibernate.ddl-auto=update\r\n    spring.jpa.properties.hibernate.show_sql=true\r\n    spring.jpa.properties.hibernate.format_sql=true\r\n    \r\n    \r\n    #spring.datasource.url=${JDBC_DATASOURCE_URL}\r\n    #spring.jpa.show-sql=true\r\n    #spring.jpa.generate-ddl=true\r\n    \r\n    \r\n    spring.mvc.pathmatch.matching-strategy=ant-path-matcher\r\n\r\nMy project structure\r\n\r\n    |   .classpath\r\n    |   .gitignore\r\n    |   .project\r\n    |   HELP.md\r\n    |   mvnw\r\n    |   mvnw.cmd\r\n    |   pom.xml\r\n    |   test.txt\r\n    |   \r\n    +---.mvn\r\n    |   \\---wrapper\r\n    |           maven-wrapper.jar\r\n    |           maven-wrapper.properties\r\n    |           MavenWrapperDownloader.java\r\n    |           \r\n    +---.settings\r\n    |       org.eclipse.core.resources.prefs\r\n    |       org.eclipse.jdt.core.prefs\r\n    |       org.eclipse.m2e.core.prefs\r\n    |       org.springframework.ide.eclipse.prefs\r\n    |       \r\n    +---src\r\n    |   +---main\r\n    |   |   +---java\r\n    |   |   |   \\---com\r\n    |   |   |       \\---crud\r\n    |   |   |           |   CrudApplication.java\r\n    |   |   |           |   \r\n    |   |   |           +---controller\r\n    |   |   |           |       ClienteController.java\r\n    |   |   |           |       \r\n    |   |   |           +---model\r\n    |   |   |           |       Cliente.java\r\n    |   |   |           |       \r\n    |   |   |           \\---repository\r\n    |   |   |                   ClienteRepository.java\r\n    |   |   |                   \r\n    |   |   \\---resources\r\n    |   |       |   application.properties\r\n    |   |       |   \r\n    |   |       +---static\r\n    |   |       \\---templates\r\n    |   \\---test\r\n    |       \\---java\r\n    |           \\---com\r\n    |               \\---crud\r\n    |                       CrudApplicationTests.java\r\n    |                       \r\n    \\---target\r\n        +---classes\r\n        |   |   application.properties\r\n        |   |   \r\n        |   \\---com\r\n        |       \\---crud\r\n        |           |   CrudApplication.class\r\n        |           |   \r\n        |           +---controller\r\n        |           |       ClienteController.class\r\n        |           |       \r\n        |           +---model\r\n        |           |       Cliente.class\r\n        |           |       \r\n        |           \\---repository\r\n        |                   ClienteRepository.class\r\n        |                   \r\n        \\---test-classes\r\n            \\---com\r\n                \\---crud\r\n                        CrudApplicationTests.class\r\n\r\nEdit: put my project structure and error message inside code tags","title":"Cant connect spring application to postgresql","body":"<p>Yesterday I could run my application, connect it to the database and even use it, today I just cant. I'm using springboot, eclipse, swagger and postgresql. Already tried restarting postgresql on my machine and nothing.</p>\n<p>Error message:</p>\n<pre><code>10:04:58.744 [Thread-0] DEBUG org.springframework.boot.devtools.restart.classloader.RestartClassLoader - Created RestartClassLoader org.springframework.boot.devtools.restart.classloader.RestartClassLoader@7708de08\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v2.6.1)\n\n2021-12-03 10:04:59.003  INFO 4672 --- [  restartedMain] com.crud.CrudApplication                 : Starting CrudApplication using Java 17.0.1 on GON170102162 with PID 4672 (C:\\Users\\murillo.jorge\\eclipse-workspace\\CRUD\\target\\classes started by murillo.jorge in C:\\Users\\murillo.jorge\\eclipse-workspace\\CRUD)\n2021-12-03 10:04:59.004  INFO 4672 --- [  restartedMain] com.crud.CrudApplication                 : No active profile set, falling back to default profiles: default\n2021-12-03 10:04:59.037  INFO 4672 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable\n2021-12-03 10:04:59.037  INFO 4672 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'\n2021-12-03 10:04:59.595  INFO 4672 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2021-12-03 10:04:59.627  INFO 4672 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 27 ms. Found 1 JPA repository interfaces.\n2021-12-03 10:05:00.011  INFO 4672 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2021-12-03 10:05:00.020  INFO 4672 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2021-12-03 10:05:00.020  INFO 4672 --- [  restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.55]\n2021-12-03 10:05:00.102  INFO 4672 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2021-12-03 10:05:00.103  INFO 4672 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1065 ms\n2021-12-03 10:05:00.144  WARN 4672 --- [  restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unsatisfied dependency expressed through method 'dataSourceScriptDatabaseInitializer' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\n2021-12-03 10:05:00.146  INFO 4672 --- [  restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2021-12-03 10:05:00.157  INFO 4672 --- [  restartedMain] ConditionEvaluationReportLoggingListener : \n\nError starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2021-12-03 10:05:00.168 ERROR 4672 --- [  restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : \n\n***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nFailed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.\n\nReason: Failed to determine a suitable driver class\n\n\nAction:\n\nConsider the following:\n    If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.\n    If you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).\n</code></pre>\n<p>My pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;   \n        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>my application properties</p>\n<pre><code>spring.datasource.url=jdbc:postgresql://localhost:5432/Clientes\nspring.datasource.username=admin\nspring.datasource.password=admin\n\nspring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect\nspring.jpa.hibernate.ddl-auto=update\nspring.jpa.properties.hibernate.show_sql=true\nspring.jpa.properties.hibernate.format_sql=true\n\n\n#spring.datasource.url=${JDBC_DATASOURCE_URL}\n#spring.jpa.show-sql=true\n#spring.jpa.generate-ddl=true\n\n\nspring.mvc.pathmatch.matching-strategy=ant-path-matcher\n</code></pre>\n<p>My project structure</p>\n<pre><code>|   .classpath\n|   .gitignore\n|   .project\n|   HELP.md\n|   mvnw\n|   mvnw.cmd\n|   pom.xml\n|   test.txt\n|   \n+---.mvn\n|   \\---wrapper\n|           maven-wrapper.jar\n|           maven-wrapper.properties\n|           MavenWrapperDownloader.java\n|           \n+---.settings\n|       org.eclipse.core.resources.prefs\n|       org.eclipse.jdt.core.prefs\n|       org.eclipse.m2e.core.prefs\n|       org.springframework.ide.eclipse.prefs\n|       \n+---src\n|   +---main\n|   |   +---java\n|   |   |   \\---com\n|   |   |       \\---crud\n|   |   |           |   CrudApplication.java\n|   |   |           |   \n|   |   |           +---controller\n|   |   |           |       ClienteController.java\n|   |   |           |       \n|   |   |           +---model\n|   |   |           |       Cliente.java\n|   |   |           |       \n|   |   |           \\---repository\n|   |   |                   ClienteRepository.java\n|   |   |                   \n|   |   \\---resources\n|   |       |   application.properties\n|   |       |   \n|   |       +---static\n|   |       \\---templates\n|   \\---test\n|       \\---java\n|           \\---com\n|               \\---crud\n|                       CrudApplicationTests.java\n|                       \n\\---target\n    +---classes\n    |   |   application.properties\n    |   |   \n    |   \\---com\n    |       \\---crud\n    |           |   CrudApplication.class\n    |           |   \n    |           +---controller\n    |           |       ClienteController.class\n    |           |       \n    |           +---model\n    |           |       Cliente.class\n    |           |       \n    |           \\---repository\n    |                   ClienteRepository.class\n    |                   \n    \\---test-classes\n        \\---com\n            \\---crud\n                    CrudApplicationTests.class\n</code></pre>\n<p>Edit: put my project structure and error message inside code tags</p>\n"},{"tags":["java","android","android-studio","kotlin","android-layout"],"answers":[{"tags":[],"owner":{"account_id":11347613,"reputation":679,"user_id":8319640,"display_name":"Kishan Mevada"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1657968253,"creation_date":1657968253,"answer_id":73003522,"question_id":73003483,"body_markdown":"you need to add ```android:layout_height=&quot;wrap_content&quot;``` in your respected View of the xml file.\r\n\r\nHappy Coding :)","title":"Android linking Faild","body":"<p>you need to add <code>android:layout_height=&quot;wrap_content&quot;</code> in your respected View of the xml file.</p>\n<p>Happy Coding :)</p>\n"}],"owner":{"account_id":21924893,"reputation":3,"user_id":16207656,"display_name":"mes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73003522,"answer_count":1,"score":0,"last_activity_date":1657968253,"creation_date":1657967819,"question_id":73003483,"body_markdown":"ERROR:C:\\Users\\aron.kibet\\AndroidStudioProjects\\Status_Saver22\\app\\src\\main\\res\\layout\\activity_main.xml:2: AAPT: error: attribute layout_height (aka com.example.status_saver22:layout_height) not found.\r\n","title":"Android linking Faild","body":"<p>ERROR:C:\\Users\\aron.kibet\\AndroidStudioProjects\\Status_Saver22\\app\\src\\main\\res\\layout\\activity_main.xml:2: AAPT: error: attribute layout_height (aka com.example.status_saver22:layout_height) not found.</p>\n"},{"tags":["java","html","jsoup","http-status-code-403"],"comments":[{"owner":{"account_id":10389625,"reputation":2881,"user_id":9889778,"display_name":"Krystian G"},"score":0,"creation_date":1658052657,"post_id":73003492,"comment_id":128951275,"body_markdown":"Try using random `userAgent` and random `referrer` the same way as you&#39;re using random `mesId`.","body":"Try using random <code>userAgent</code> and random <code>referrer</code> the same way as you&#39;re using random <code>mesId</code>."},{"owner":{"account_id":25822454,"reputation":1,"user_id":19561295,"display_name":"DerfelCadarn"},"score":0,"creation_date":1658151325,"post_id":73003492,"comment_id":128972834,"body_markdown":"Hello, it was a super idea. I just tried it with a loop a 5 minutes, 6 random userAgent and 2 random referrer. Unfortunately, I still have the 503 after 2 loops.","body":"Hello, it was a super idea. I just tried it with a loop a 5 minutes, 6 random userAgent and 2 random referrer. Unfortunately, I still have the 503 after 2 loops."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1660567928,"post_id":73003492,"comment_id":129556044,"body_markdown":"It seems like this is not about programming as much as it is about circumventing a site&#39;s terms of service.","body":"It seems like this is not about programming as much as it is about circumventing a site&#39;s terms of service."}],"owner":{"account_id":25822454,"reputation":1,"user_id":19561295,"display_name":"DerfelCadarn"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1657967951,"creation_date":1657967951,"question_id":73003492,"body_markdown":"I need some help with my use of the Jsoup library. \r\n\r\nI launch the following script to scan a page of a website.\r\n\r\n **1. If I launch the script every 5 minutes :**\r\n\r\nAfter 4 or more loops (after 20 minutes), I am starting to have the following java error :\r\n\r\n&quot;org.jsoup.HttpStatusException: HTTP error fetchine URL. Status=403.&quot;\r\n\r\nAnd more and more often, until having a 403 every 5 minutes.\r\n\r\nIf I visit the website with a browser (Chrome or anything else) on the same PC I am launching the script, at this point I also get a 403 on any page of the website :\r\n\r\n&quot;403 Forbidden&quot; and &quot;Request forbidden by administrative rules&quot;\r\n\r\nIf I visit the website with my phone, I don&#39;t get the 403. Strange...\r\n\r\n **2. If I launch the script every 10 minutes, I am getting the following loop :**\r\n\r\n3 or 4 times OK, 2 or 3 times a 403, 3 or 4 times OK, 2 or 3 times a 403, 3 or 4 times OK, 2 or 3 times a 403, ...\r\n\r\n**My thoughts, question :**\r\n\r\nThere is a sort a protection on this website and I don&#39;t know how to by-pass it. It&#39;s like I am banned after a few time, like &quot;too much request&quot;. I am already sending a userAgent or a referrer. I give you the full script even if it is not relevant for me. Maybe I made a mistake in it. The goal of this script is to get the text on the &quot;form3&quot; form. To solve the problem, I have to wait several hours for the 403 to disapear. \r\n\r\nCould you please help me to fix this 403 ? I am out of solutions... Maybe it is just a problem with the website, I don&#39;t know.\r\n\r\n**The script :**\r\n\r\n```\r\ntry {\r\n\tString url = &quot;http://...&quot;;\r\n\t// Some params\r\n\tString[] mesId = {&quot;[id=planning11604]&quot;,&quot;[id=planning11612]&quot;,&quot;[id=planning12915]&quot;};\r\n\tjava.util.Random r = new java.util.Random();\r\n\tint Guichet = r.nextInt(3);\t \r\n\t\r\n\t// My Jsoup connection\r\n\tConnection.Response resp = Jsoup.connect(url)\r\n\t\t.userAgent(&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36&quot;)\r\n\t\t.referrer(&quot;http://www.google.com&quot;)\r\n\t\t.method(Connection.Method.GET)\r\n\t\t.timeout(20000)\r\n\t\t.execute();\r\n\tDocument responseDocument1 = resp.parse();\r\n\t\r\n\t// &quot;checked&quot; a checkbox in a form and then submit the form.\r\n\tFormElement form1 = (FormElement) responseDocument1.select(&quot;form#FormBookingCreate&quot;).first();\r\n\tElement maCheckbox1 = form1.select(&quot;[name=condition]&quot;).first();\r\n\tmaCheckbox1.attr(&quot;checked&quot;, &quot;checked&quot;);\r\n\tDocument responseDocument2 = form1.submit().cookies(resp.cookies()).post();\r\n\t\r\n\t// &quot;checked&quot; a radio button in a form and then submit the form.\r\n\tFormElement form2 = (FormElement) responseDocument2.select(&quot;form#FormBookingCreate&quot;).first();\r\n\tElement Radio1 = form2.select(mesId[Guichet]).first();\r\n\tRadio1.attr(&quot;checked&quot;, &quot;checked&quot;);\r\n\tDocument responseDocument3 = form2.submit().cookies(resp.cookies()).post();\r\n\t\r\n\tFormElement form3 = (FormElement) responseDocument3.select(&quot;form#FormBookingCreate&quot;).first();\r\n\tSystem.out.println(&quot;3&#232;me page : &quot;+form3.text());\r\n\tGuichet = Guichet+1;\r\n} catch (IOException e) {\r\n\tSystem.out.println(e.toString());\r\n}\r\n```\r\n\r\n","title":"Jsoup - How to by-pass my (random) 403 HTML error?","body":"<p>I need some help with my use of the Jsoup library.</p>\n<p>I launch the following script to scan a page of a website.</p>\n<p><strong>1. If I launch the script every 5 minutes :</strong></p>\n<p>After 4 or more loops (after 20 minutes), I am starting to have the following java error :</p>\n<p>&quot;org.jsoup.HttpStatusException: HTTP error fetchine URL. Status=403.&quot;</p>\n<p>And more and more often, until having a 403 every 5 minutes.</p>\n<p>If I visit the website with a browser (Chrome or anything else) on the same PC I am launching the script, at this point I also get a 403 on any page of the website :</p>\n<p>&quot;403 Forbidden&quot; and &quot;Request forbidden by administrative rules&quot;</p>\n<p>If I visit the website with my phone, I don't get the 403. Strange...</p>\n<p><strong>2. If I launch the script every 10 minutes, I am getting the following loop :</strong></p>\n<p>3 or 4 times OK, 2 or 3 times a 403, 3 or 4 times OK, 2 or 3 times a 403, 3 or 4 times OK, 2 or 3 times a 403, ...</p>\n<p><strong>My thoughts, question :</strong></p>\n<p>There is a sort a protection on this website and I don't know how to by-pass it. It's like I am banned after a few time, like &quot;too much request&quot;. I am already sending a userAgent or a referrer. I give you the full script even if it is not relevant for me. Maybe I made a mistake in it. The goal of this script is to get the text on the &quot;form3&quot; form. To solve the problem, I have to wait several hours for the 403 to disapear.</p>\n<p>Could you please help me to fix this 403 ? I am out of solutions... Maybe it is just a problem with the website, I don't know.</p>\n<p><strong>The script :</strong></p>\n<pre><code>try {\n    String url = &quot;http://...&quot;;\n    // Some params\n    String[] mesId = {&quot;[id=planning11604]&quot;,&quot;[id=planning11612]&quot;,&quot;[id=planning12915]&quot;};\n    java.util.Random r = new java.util.Random();\n    int Guichet = r.nextInt(3);  \n    \n    // My Jsoup connection\n    Connection.Response resp = Jsoup.connect(url)\n        .userAgent(&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36&quot;)\n        .referrer(&quot;http://www.google.com&quot;)\n        .method(Connection.Method.GET)\n        .timeout(20000)\n        .execute();\n    Document responseDocument1 = resp.parse();\n    \n    // &quot;checked&quot; a checkbox in a form and then submit the form.\n    FormElement form1 = (FormElement) responseDocument1.select(&quot;form#FormBookingCreate&quot;).first();\n    Element maCheckbox1 = form1.select(&quot;[name=condition]&quot;).first();\n    maCheckbox1.attr(&quot;checked&quot;, &quot;checked&quot;);\n    Document responseDocument2 = form1.submit().cookies(resp.cookies()).post();\n    \n    // &quot;checked&quot; a radio button in a form and then submit the form.\n    FormElement form2 = (FormElement) responseDocument2.select(&quot;form#FormBookingCreate&quot;).first();\n    Element Radio1 = form2.select(mesId[Guichet]).first();\n    Radio1.attr(&quot;checked&quot;, &quot;checked&quot;);\n    Document responseDocument3 = form2.submit().cookies(resp.cookies()).post();\n    \n    FormElement form3 = (FormElement) responseDocument3.select(&quot;form#FormBookingCreate&quot;).first();\n    System.out.println(&quot;3me page : &quot;+form3.text());\n    Guichet = Guichet+1;\n} catch (IOException e) {\n    System.out.println(e.toString());\n}\n</code></pre>\n"},{"tags":["java","android","build","android-source","android-build"],"comments":[{"owner":{"account_id":214848,"reputation":10171,"user_id":469080,"accept_rate":100,"display_name":"Michael Dodd"},"score":4,"creation_date":1551084926,"post_id":54862299,"comment_id":96495617,"body_markdown":"This seems like a very extreme way of going about things, and your app will only run on devices running your customised build of AOSP. Wouldn&#39;t it just be much easier to create an interface with an `int` method in your app, and apply it to all relevant classes? Or are you trying to change other Android SDK classes as well by means of inheritance?","body":"This seems like a very extreme way of going about things, and your app will only run on devices running your customised build of AOSP. Wouldn&#39;t it just be much easier to create an interface with an <code>int</code> method in your app, and apply it to all relevant classes? Or are you trying to change other Android SDK classes as well by means of inheritance?"},{"owner":{"account_id":10876169,"reputation":841,"user_id":7996523,"display_name":"Richard Hu"},"score":0,"creation_date":1551085346,"post_id":54862299,"comment_id":96495823,"body_markdown":"Hi Michael, thank you for your reply! Yes, I want the change apply to EVERY classes, including the core Java library, Android SDK classes, and my application classes. I make this customized AOSP only for research purpose, therefore this is actually the simplest way I could figure out to meet my requirement.","body":"Hi Michael, thank you for your reply! Yes, I want the change apply to EVERY classes, including the core Java library, Android SDK classes, and my application classes. I make this customized AOSP only for research purpose, therefore this is actually the simplest way I could figure out to meet my requirement."},{"owner":{"account_id":214848,"reputation":10171,"user_id":469080,"accept_rate":100,"display_name":"Michael Dodd"},"score":2,"creation_date":1551085600,"post_id":54862299,"comment_id":96495954,"body_markdown":"You&#39;d also need to create a custom Android SDK and import that into Android Studio, else your new methods won&#39;t show up in Android Studio and won&#39;t compile. This link should be a good place to start: https://android.googlesource.com/platform/sdk/+/master/docs/howto_build_SDK.txt","body":"You&#39;d also need to create a custom Android SDK and import that into Android Studio, else your new methods won&#39;t show up in Android Studio and won&#39;t compile. This link should be a good place to start: <a href=\"https://android.googlesource.com/platform/sdk/+/master/docs/howto_build_SDK.txt\" rel=\"nofollow noreferrer\">android.googlesource.com/platform/sdk/+/master/docs/&hellip;</a>"},{"owner":{"account_id":10876169,"reputation":841,"user_id":7996523,"display_name":"Richard Hu"},"score":0,"creation_date":1551086300,"post_id":54862299,"comment_id":96496338,"body_markdown":"Hi Michael, thanks again! So basically what I am trying is do is feasible right? Why not pose an answer and I will mark it as the correct one.","body":"Hi Michael, thanks again! So basically what I am trying is do is feasible right? Why not pose an answer and I will mark it as the correct one."}],"answers":[{"tags":[],"owner":{"account_id":214848,"reputation":10171,"user_id":469080,"accept_rate":100,"display_name":"Michael Dodd"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1551088821,"creation_date":1551088821,"answer_id":54863633,"question_id":54862299,"body_markdown":"Firstly, I&#39;d like to state that I don&#39;t think this is a good idea and is probably overkill outside of research purposes. If you are modifying AOSP then the code you write will be dependent on the target device running that customised build of AOSP. However, it is still possible.\r\n\r\nI&#39;m assuming you already know how to compile and flash a custom AOSP build to a device. In order to write code that makes use of your new functionality, you&#39;ll also need to compile a custom SDK. This is so that Android Studio will know that your new method exists within `Object`, and can compile correctly against it. The full documentation can be found [here](https://android.googlesource.com/platform/sdk/+/master/docs/howto_build_SDK.txt), but essentially it boils down to:\r\n\r\n    . build/envsetup.sh\r\n    lunch sdk-eng\r\n    make sdk\r\n\r\nWhen you have your SDK zip file, you&#39;ll need to unzip it to your SDK&#39;s `platforms` directory - it should now show up checked in your SDK manager. If you have given your SDK a custom platform ID then you should be able to use that in your `build.gradle` files.\r\n\r\n**Disclaimer:** This advice is purely from memory, it&#39;s a lengthy process so I&#39;ve not had time to double-check, and chances are there may be a couple of minor things I&#39;ve missed. This should get you most of the way towards where you want to be though.","title":"Modify core java libraries of Android source for use in apps","body":"<p>Firstly, I'd like to state that I don't think this is a good idea and is probably overkill outside of research purposes. If you are modifying AOSP then the code you write will be dependent on the target device running that customised build of AOSP. However, it is still possible.</p>\n\n<p>I'm assuming you already know how to compile and flash a custom AOSP build to a device. In order to write code that makes use of your new functionality, you'll also need to compile a custom SDK. This is so that Android Studio will know that your new method exists within <code>Object</code>, and can compile correctly against it. The full documentation can be found <a href=\"https://android.googlesource.com/platform/sdk/+/master/docs/howto_build_SDK.txt\" rel=\"noreferrer\">here</a>, but essentially it boils down to:</p>\n\n<pre><code>. build/envsetup.sh\nlunch sdk-eng\nmake sdk\n</code></pre>\n\n<p>When you have your SDK zip file, you'll need to unzip it to your SDK's <code>platforms</code> directory - it should now show up checked in your SDK manager. If you have given your SDK a custom platform ID then you should be able to use that in your <code>build.gradle</code> files.</p>\n\n<p><strong>Disclaimer:</strong> This advice is purely from memory, it's a lengthy process so I've not had time to double-check, and chances are there may be a couple of minor things I've missed. This should get you most of the way towards where you want to be though.</p>\n"}],"owner":{"account_id":10876169,"reputation":841,"user_id":7996523,"display_name":"Richard Hu"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":609,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":54863633,"answer_count":1,"score":1,"last_activity_date":1657967839,"creation_date":1551083939,"question_id":54862299,"body_markdown":"I want to make a little modification to the Android source to meet my requirement. Here is the requirement:\r\n\r\nI want index all the objects in an Android app by adding one more public `int` field to the `java.lang.Object` class. Therefore, all the classes can inherit the newly added field because all of them are the subclasses of the `Object` class. \r\n\r\nWhat I have done so far is modify the `java.lang.Object` class under `&lt;Android_source&gt;/libcore/libart/src/main/java/java/lang` folder and recompile the source. \r\n\r\nI want to ask if I am doing the right thing. Can my Android app recognize this change (e.g. can a `String` object access the newly added field)? \r\n\r\n**Edit**\r\n\r\nAfter around 3 weeks try and error, I finally got the complete answer. I want to share this experience with others if anybody else want to modify the core java libraries of Android source (e.g., modifying `Object.java` and `String.java` etc.). Again, as mentioned by Michael, please note that such a modification may only be suitable for research or testing purpose.\r\n\r\nThe key challenge in making a successful modification (here &#39;successful&#39; means the modified Android source can be built and run on emulators or real devices without any problem) is that some of the classes in the core java library have their C++ mirrors (located in `&lt;Android_source&gt;/art/runtime/mirrors/`). When modifying these java classes, you should also make the same modifications to their C++ mirrors. Otherwise, you could fail the build process because there are a bunch of checkings that you need to pass. Since I only add a new field to the `Object.java`, I will list some checkings (or requirements) I encountered below:\r\n\r\n1.The size of an object instance = the size of its C++ mirror. For example, if I add a `long` field into `Object.java`, I should also add a `uint64_t` field to its C++ mirror to make their size equal.\r\n\r\n2.Try to make the size of an object instance be the power of 2 (e.g., 2, 4, 8, 16, ...). For example, the size of the original `Object.java` is 8, therefore I add a long field to increase the size to 16. If I add an int field, the size becomes 12 and it can fail many checkings. I don&#39;t figure out the exact reason but I guess it has something to do with [memory alignment][1].\r\n\r\n3.Try to put primitive-type fields after non-primitive-type fields and primitive-type fields should be ordered by size. This means you should put reference-type fields in the front, followed by 8-byte-primitive-type fields, then 4-byte-primitive-type fields, then 2-byte-primitive-type fields, then 1-byte-primitive-type fields. Again, I guess the reason is [memory alignment][1]\r\n\r\nThat&#39;s all I done to meet my requirements. I am open to any discussions if you have any ideas about the purpose of these checkings (especially the 2ed and 3rd one)\r\n\r\n**New edit**\r\n\r\nMore specifically, I did the following things:\r\n\r\n1. Add a new field (e.g., `public long tag;`) in `Object.java`\r\n\r\n2. Change `static constexpr uint32_t kObjectHeaderSize = kUseBrooksReadBarrier ? 16 : 8;` to `static constexpr uint32_t kObjectHeaderSize = kUseBrooksReadBarrier ? 24 : 16;` in `Object.h`\r\n\r\n3. Add the following method in `Object.h` (Only on Android 7)\r\n```\r\nstatic MemberOffset TagOffset() {\r\n    return OFFSET_OF_OBJECT_MEMBER(Object, tag);\r\n}\r\n```\r\n\r\n4. Add a new public field `public: uint64_t tag;` in `Object.h`\r\n\r\n5. Change\r\n```\r\n#define MIRROR_OBJECT_CLASS_OFFSET 0\r\nADD_TEST_EQ(MIRROR_OBJECT_CLASS_OFFSET, art::mirror::Object::ClassOffset().Int32Value())\r\n#define MIRROR_OBJECT_LOCK_WORD_OFFSET 4\r\nADD_TEST_EQ(MIRROR_OBJECT_LOCK_WORD_OFFSET, art::mirror::Object::MonitorOffset().Int32Value())\r\n#if defined(USE_BROOKS_READ_BARRIER)\r\n#define MIRROR_OBJECT_HEADER_SIZE 16\r\n#else\r\n#define MIRROR_OBJECT_HEADER_SIZE 8\r\n```\r\nto\r\n```\r\n#define MIRROR_OBJECT_CLASS_OFFSET 0\r\nADD_TEST_EQ(MIRROR_OBJECT_CLASS_OFFSET, art::mirror::Object::ClassOffset().Int32Value())\r\n#define MIRROR_OBJECT_LOCK_WORD_OFFSET 4\r\nADD_TEST_EQ(MIRROR_OBJECT_LOCK_WORD_OFFSET, art::mirror::Object::MonitorOffset().Int32Value())\r\n#define MIRROR_OBJECT_CLASS_TAG 8\r\nADD_TEST_EQ(MIRROR_OBJECT_CLASS_TAG, art::mirror::Object::TagOffset().Int32Value())\r\n\r\n#if defined(USE_BROOKS_READ_BARRIER)\r\n#define MIRROR_OBJECT_HEADER_SIZE 24\r\n#else\r\n#define MIRROR_OBJECT_HEADER_SIZE 16\r\n```\r\nin `asm_support.h` (Only on Android 7)\r\n\r\n6. Add `addOffset(OFFSETOF_MEMBER(mirror::Object, tag), &quot;tag&quot;);` in `class_linker_test.cc`\r\n\r\n7. Change \r\n```\r\nstatic_assert(kObjectHeaderSize == sizeof(mirror::HeapReference&lt;mirror::Class&gt;) +\r\n                    sizeof(LockWord),\r\n```\r\nto\r\n```\r\nstatic_assert(kObjectHeaderSize == sizeof(mirror::HeapReference&lt;mirror::Class&gt;) +\r\n                    sizeof(LockWord) + 8,\r\n```\r\nin `art/runtime/gc/collector/concurrent_copying.cc`\r\n\r\n8 Change `static constexpr size_t kFirstElementOffset = 12u;` to `static constexpr size_t kFirstElementOffset = 20u;` in `array.h`\r\n\r\n9 Change `static constexpr size_t kObjectAlignmentShift = 3;` to `static constexpr size_t kObjectAlignmentShift = 4;` in `runtime_globals.h` (Not done yet)\r\n\r\n10 Change\r\n```\r\nstatic_assert(kObjectAlignment == 8, &quot;Alignment check&quot;);\r\nclass PACKED(8) ImageHeader {\r\n```\r\nto\r\n```\r\nstatic_assert(kObjectAlignment == 16, &quot;Alignment check&quot;);\r\nclass PACKED(16) ImageHeader {\r\n```\r\nin `image.h` (Not done yet)\r\n\r\n11 Change `static constexpr size_t kAlignment = 8;` to `static constexpr size_t kAlignment = 16;` in `gc::space::BumpPointerSpace` (Not done yet)\r\n\r\n12 Change `#!/usr/bin/python` to `#!/usr/local/bin/python` in `device/generic/goldfish/tools/mk_combined_img.py` (The value depends on your /bin/env python)(Only on Android 10)\r\n\r\n13 Change\r\n```\r\n#define DCHECK_ALIGNED_PARAM(value, alignment) \\\r\n  DCHECK(::art::IsAlignedParam(value, alignment)) &lt;&lt; reinterpret_cast&lt;const void*&gt;(value)\r\n```\r\nto\r\n```\r\n#define DCHECK_ALIGNED_PARAM(value, alignment) \\\r\n  DCHECK(::art::IsAlignedParam(value, alignment)) &lt;&lt; reinterpret_cast&lt;const void*&gt;(value) &lt;&lt; &quot;,&quot; &lt;&lt; alignment\r\n```\r\nin `art/libartbase/base/bit_utils.h` (for debug purpose)(Only for Android 11)\r\n\r\n14 Change\r\n```\r\nDCHECK_ALIGNED_PARAM(remaining_space, object_class-&gt;GetObjectSize());\r\n      Object* end = dst + remaining_space / object_class-&gt;GetObjectSize();\r\n```\r\nto\r\n```\r\nDCHECK_ALIGNED_PARAM(remaining_space, kObjectAlignment);\r\n      Object* end = dst + remaining_space / kObjectAlignment;\r\n```\r\nin `art/dex2oat/linker/image_writer.cc` (Only for Android 11)\r\n\r\n15. Change \r\n```\r\nmemcpy(reinterpret_cast&lt;uint8_t*&gt;(to_ref) + kObjectHeaderSize,\r\n         reinterpret_cast&lt;const uint8_t*&gt;(from_ref) + kObjectHeaderSize,\r\n         obj_size - kObjectHeaderSize);\r\n```\r\nto\r\n```\r\nmemcpy(reinterpret_cast&lt;uint8_t*&gt;(to_ref) + kObjectHeaderSize - 8,\r\n         reinterpret_cast&lt;const uint8_t*&gt;(from_ref) + kObjectHeaderSize - 8,\r\n         obj_size - kObjectHeaderSize + 8);\r\n```\r\nin `concurrent_copying.cc` (on Android 10)([reference][2])\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/41719845/memory-alignment-in-c-c\r\n  [2]: https://ppfocus.com/0/te40d47c1.html","title":"Modify core java libraries of Android source for use in apps","body":"<p>I want to make a little modification to the Android source to meet my requirement. Here is the requirement:</p>\n<p>I want index all the objects in an Android app by adding one more public <code>int</code> field to the <code>java.lang.Object</code> class. Therefore, all the classes can inherit the newly added field because all of them are the subclasses of the <code>Object</code> class.</p>\n<p>What I have done so far is modify the <code>java.lang.Object</code> class under <code>&lt;Android_source&gt;/libcore/libart/src/main/java/java/lang</code> folder and recompile the source.</p>\n<p>I want to ask if I am doing the right thing. Can my Android app recognize this change (e.g. can a <code>String</code> object access the newly added field)?</p>\n<p><strong>Edit</strong></p>\n<p>After around 3 weeks try and error, I finally got the complete answer. I want to share this experience with others if anybody else want to modify the core java libraries of Android source (e.g., modifying <code>Object.java</code> and <code>String.java</code> etc.). Again, as mentioned by Michael, please note that such a modification may only be suitable for research or testing purpose.</p>\n<p>The key challenge in making a successful modification (here 'successful' means the modified Android source can be built and run on emulators or real devices without any problem) is that some of the classes in the core java library have their C++ mirrors (located in <code>&lt;Android_source&gt;/art/runtime/mirrors/</code>). When modifying these java classes, you should also make the same modifications to their C++ mirrors. Otherwise, you could fail the build process because there are a bunch of checkings that you need to pass. Since I only add a new field to the <code>Object.java</code>, I will list some checkings (or requirements) I encountered below:</p>\n<p>1.The size of an object instance = the size of its C++ mirror. For example, if I add a <code>long</code> field into <code>Object.java</code>, I should also add a <code>uint64_t</code> field to its C++ mirror to make their size equal.</p>\n<p>2.Try to make the size of an object instance be the power of 2 (e.g., 2, 4, 8, 16, ...). For example, the size of the original <code>Object.java</code> is 8, therefore I add a long field to increase the size to 16. If I add an int field, the size becomes 12 and it can fail many checkings. I don't figure out the exact reason but I guess it has something to do with <a href=\"https://stackoverflow.com/questions/41719845/memory-alignment-in-c-c\">memory alignment</a>.</p>\n<p>3.Try to put primitive-type fields after non-primitive-type fields and primitive-type fields should be ordered by size. This means you should put reference-type fields in the front, followed by 8-byte-primitive-type fields, then 4-byte-primitive-type fields, then 2-byte-primitive-type fields, then 1-byte-primitive-type fields. Again, I guess the reason is <a href=\"https://stackoverflow.com/questions/41719845/memory-alignment-in-c-c\">memory alignment</a></p>\n<p>That's all I done to meet my requirements. I am open to any discussions if you have any ideas about the purpose of these checkings (especially the 2ed and 3rd one)</p>\n<p><strong>New edit</strong></p>\n<p>More specifically, I did the following things:</p>\n<ol>\n<li><p>Add a new field (e.g., <code>public long tag;</code>) in <code>Object.java</code></p>\n</li>\n<li><p>Change <code>static constexpr uint32_t kObjectHeaderSize = kUseBrooksReadBarrier ? 16 : 8;</code> to <code>static constexpr uint32_t kObjectHeaderSize = kUseBrooksReadBarrier ? 24 : 16;</code> in <code>Object.h</code></p>\n</li>\n<li><p>Add the following method in <code>Object.h</code> (Only on Android 7)</p>\n</li>\n</ol>\n<pre><code>static MemberOffset TagOffset() {\n    return OFFSET_OF_OBJECT_MEMBER(Object, tag);\n}\n</code></pre>\n<ol start=\"4\">\n<li><p>Add a new public field <code>public: uint64_t tag;</code> in <code>Object.h</code></p>\n</li>\n<li><p>Change</p>\n</li>\n</ol>\n<pre><code>#define MIRROR_OBJECT_CLASS_OFFSET 0\nADD_TEST_EQ(MIRROR_OBJECT_CLASS_OFFSET, art::mirror::Object::ClassOffset().Int32Value())\n#define MIRROR_OBJECT_LOCK_WORD_OFFSET 4\nADD_TEST_EQ(MIRROR_OBJECT_LOCK_WORD_OFFSET, art::mirror::Object::MonitorOffset().Int32Value())\n#if defined(USE_BROOKS_READ_BARRIER)\n#define MIRROR_OBJECT_HEADER_SIZE 16\n#else\n#define MIRROR_OBJECT_HEADER_SIZE 8\n</code></pre>\n<p>to</p>\n<pre><code>#define MIRROR_OBJECT_CLASS_OFFSET 0\nADD_TEST_EQ(MIRROR_OBJECT_CLASS_OFFSET, art::mirror::Object::ClassOffset().Int32Value())\n#define MIRROR_OBJECT_LOCK_WORD_OFFSET 4\nADD_TEST_EQ(MIRROR_OBJECT_LOCK_WORD_OFFSET, art::mirror::Object::MonitorOffset().Int32Value())\n#define MIRROR_OBJECT_CLASS_TAG 8\nADD_TEST_EQ(MIRROR_OBJECT_CLASS_TAG, art::mirror::Object::TagOffset().Int32Value())\n\n#if defined(USE_BROOKS_READ_BARRIER)\n#define MIRROR_OBJECT_HEADER_SIZE 24\n#else\n#define MIRROR_OBJECT_HEADER_SIZE 16\n</code></pre>\n<p>in <code>asm_support.h</code> (Only on Android 7)</p>\n<ol start=\"6\">\n<li><p>Add <code>addOffset(OFFSETOF_MEMBER(mirror::Object, tag), &quot;tag&quot;);</code> in <code>class_linker_test.cc</code></p>\n</li>\n<li><p>Change</p>\n</li>\n</ol>\n<pre><code>static_assert(kObjectHeaderSize == sizeof(mirror::HeapReference&lt;mirror::Class&gt;) +\n                    sizeof(LockWord),\n</code></pre>\n<p>to</p>\n<pre><code>static_assert(kObjectHeaderSize == sizeof(mirror::HeapReference&lt;mirror::Class&gt;) +\n                    sizeof(LockWord) + 8,\n</code></pre>\n<p>in <code>art/runtime/gc/collector/concurrent_copying.cc</code></p>\n<p>8 Change <code>static constexpr size_t kFirstElementOffset = 12u;</code> to <code>static constexpr size_t kFirstElementOffset = 20u;</code> in <code>array.h</code></p>\n<p>9 Change <code>static constexpr size_t kObjectAlignmentShift = 3;</code> to <code>static constexpr size_t kObjectAlignmentShift = 4;</code> in <code>runtime_globals.h</code> (Not done yet)</p>\n<p>10 Change</p>\n<pre><code>static_assert(kObjectAlignment == 8, &quot;Alignment check&quot;);\nclass PACKED(8) ImageHeader {\n</code></pre>\n<p>to</p>\n<pre><code>static_assert(kObjectAlignment == 16, &quot;Alignment check&quot;);\nclass PACKED(16) ImageHeader {\n</code></pre>\n<p>in <code>image.h</code> (Not done yet)</p>\n<p>11 Change <code>static constexpr size_t kAlignment = 8;</code> to <code>static constexpr size_t kAlignment = 16;</code> in <code>gc::space::BumpPointerSpace</code> (Not done yet)</p>\n<p>12 Change <code>#!/usr/bin/python</code> to <code>#!/usr/local/bin/python</code> in <code>device/generic/goldfish/tools/mk_combined_img.py</code> (The value depends on your /bin/env python)(Only on Android 10)</p>\n<p>13 Change</p>\n<pre><code>#define DCHECK_ALIGNED_PARAM(value, alignment) \\\n  DCHECK(::art::IsAlignedParam(value, alignment)) &lt;&lt; reinterpret_cast&lt;const void*&gt;(value)\n</code></pre>\n<p>to</p>\n<pre><code>#define DCHECK_ALIGNED_PARAM(value, alignment) \\\n  DCHECK(::art::IsAlignedParam(value, alignment)) &lt;&lt; reinterpret_cast&lt;const void*&gt;(value) &lt;&lt; &quot;,&quot; &lt;&lt; alignment\n</code></pre>\n<p>in <code>art/libartbase/base/bit_utils.h</code> (for debug purpose)(Only for Android 11)</p>\n<p>14 Change</p>\n<pre><code>DCHECK_ALIGNED_PARAM(remaining_space, object_class-&gt;GetObjectSize());\n      Object* end = dst + remaining_space / object_class-&gt;GetObjectSize();\n</code></pre>\n<p>to</p>\n<pre><code>DCHECK_ALIGNED_PARAM(remaining_space, kObjectAlignment);\n      Object* end = dst + remaining_space / kObjectAlignment;\n</code></pre>\n<p>in <code>art/dex2oat/linker/image_writer.cc</code> (Only for Android 11)</p>\n<ol start=\"15\">\n<li>Change</li>\n</ol>\n<pre><code>memcpy(reinterpret_cast&lt;uint8_t*&gt;(to_ref) + kObjectHeaderSize,\n         reinterpret_cast&lt;const uint8_t*&gt;(from_ref) + kObjectHeaderSize,\n         obj_size - kObjectHeaderSize);\n</code></pre>\n<p>to</p>\n<pre><code>memcpy(reinterpret_cast&lt;uint8_t*&gt;(to_ref) + kObjectHeaderSize - 8,\n         reinterpret_cast&lt;const uint8_t*&gt;(from_ref) + kObjectHeaderSize - 8,\n         obj_size - kObjectHeaderSize + 8);\n</code></pre>\n<p>in <code>concurrent_copying.cc</code> (on Android 10)(<a href=\"https://ppfocus.com/0/te40d47c1.html\" rel=\"nofollow noreferrer\">reference</a>)</p>\n"},{"tags":["java","spring-mvc","jpa"],"answers":[{"tags":[],"owner":{"account_id":71985,"reputation":7903,"user_id":208013,"display_name":"Mirek Pluta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657966429,"creation_date":1657966429,"answer_id":73003348,"question_id":73003208,"body_markdown":"I think that message says all:\r\n\r\n&gt; javax.persistence.TransactionRequiredException: Executing an update/delete query\r\n\r\n\r\nWhen using `EntityManager` to execute any update operation (update/insert/delete) you have to do that within transaction.\r\n\r\nTherefore your code should look like:\r\n```java\r\nentityManager.getTransaction().begin();\r\n// execute any operation on entityManager\r\nentityManager.getTransaction().commit();\r\n```\r\n\r\nSide note, it is generally recommended to use `@PersistenceContext` instead of `@Autowired` as that gives more control over the injected `EntityManager` (especially if you have multiple DB configurations). ","title":"Derived Queries with Spring Data JPA","body":"<p>I think that message says all:</p>\n<blockquote>\n<p>javax.persistence.TransactionRequiredException: Executing an update/delete query</p>\n</blockquote>\n<p>When using <code>EntityManager</code> to execute any update operation (update/insert/delete) you have to do that within transaction.</p>\n<p>Therefore your code should look like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>entityManager.getTransaction().begin();\n// execute any operation on entityManager\nentityManager.getTransaction().commit();\n</code></pre>\n<p>Side note, it is generally recommended to use <code>@PersistenceContext</code> instead of <code>@Autowired</code> as that gives more control over the injected <code>EntityManager</code> (especially if you have multiple DB configurations).</p>\n"}],"owner":{"account_id":22151536,"reputation":1,"user_id":17239188,"display_name":"AskAnyQuestion"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":239,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1657966429,"creation_date":1657965119,"question_id":73003208,"body_markdown":"My task is to compose a query without using the `@Query` annotation.\r\nIf you use `select`, it will work, but if you use `update`, then the exception pointing to the line query.executeUpdate();\r\n\r\n\r\n\r\n```\r\njavax.persistence.TransactionRequiredException: Executing an update/delete query\r\n```\r\n\r\nCustomUserRepository:\r\n```\r\n@Repository\r\npublic interface CustomUserRepository {\r\n    List&lt;User&gt; findByUniqueId(String uniqueId,UserStatus role);\r\n}\r\n```\r\nCustomUserRepositoryImpl:\r\n```\r\n@Autowired\r\nprivate EntityManager entityManager;\r\n\r\n@Override\r\npublic List&lt;User&gt; findByUniqueId(String uniqueId, UserStatus role) {\r\n        Query query = entityManager.createQuery(&quot;update User u set u.userStatus=:userStatus where u.unique=:unique&quot;);\r\n        query.setParameter(&quot;userStatus&quot;, role).setParameter(&quot;unique&quot;, uniqueId);\r\n        query.executeUpdate();\r\n        return query.getResultList();\r\n}\r\n```\r\nControllerFour:\r\n```\r\n@Autowired\r\nprivate UserRepository userRepository;\r\n\r\n@PostMapping\r\npublic String replaceStatusPost (@RequestParam(&quot;uniqueid&quot;) String uniqueid, @RequestParam(&quot;userstatus&quot;) UserStatus userstatus, Model model) {\r\n        List &lt;User&gt; user = userRepository.findByUniqueId(uniqueid, userstatus);\r\n        model.addAttribute(&quot;attz&quot;, user);\r\n        return &quot;replaceStatus&quot;;\r\n}\r\n```","title":"Derived Queries with Spring Data JPA","body":"<p>My task is to compose a query without using the <code>@Query</code> annotation.\nIf you use <code>select</code>, it will work, but if you use <code>update</code>, then the exception pointing to the line query.executeUpdate();</p>\n<pre><code>javax.persistence.TransactionRequiredException: Executing an update/delete query\n</code></pre>\n<p>CustomUserRepository:</p>\n<pre><code>@Repository\npublic interface CustomUserRepository {\n    List&lt;User&gt; findByUniqueId(String uniqueId,UserStatus role);\n}\n</code></pre>\n<p>CustomUserRepositoryImpl:</p>\n<pre><code>@Autowired\nprivate EntityManager entityManager;\n\n@Override\npublic List&lt;User&gt; findByUniqueId(String uniqueId, UserStatus role) {\n        Query query = entityManager.createQuery(&quot;update User u set u.userStatus=:userStatus where u.unique=:unique&quot;);\n        query.setParameter(&quot;userStatus&quot;, role).setParameter(&quot;unique&quot;, uniqueId);\n        query.executeUpdate();\n        return query.getResultList();\n}\n</code></pre>\n<p>ControllerFour:</p>\n<pre><code>@Autowired\nprivate UserRepository userRepository;\n\n@PostMapping\npublic String replaceStatusPost (@RequestParam(&quot;uniqueid&quot;) String uniqueid, @RequestParam(&quot;userstatus&quot;) UserStatus userstatus, Model model) {\n        List &lt;User&gt; user = userRepository.findByUniqueId(uniqueid, userstatus);\n        model.addAttribute(&quot;attz&quot;, user);\n        return &quot;replaceStatus&quot;;\n}\n</code></pre>\n"},{"tags":["java","android","xml","exception","rendering"],"comments":[{"owner":{"account_id":35743,"reputation":150884,"user_id":101361,"accept_rate":71,"display_name":"laalto"},"score":0,"creation_date":1398366480,"post_id":23277646,"comment_id":35627488,"body_markdown":"The stacktrace says it&#39;s a problem with a bitmap in a `RelativeLayout`. So first check that `@drawable/cadremenu` is in fact a valid drawable.","body":"The stacktrace says it&#39;s a problem with a bitmap in a <code>RelativeLayout</code>. So first check that <code>@drawable&#47;cadremenu</code> is in fact a valid drawable."},{"owner":{"account_id":2599781,"reputation":578,"user_id":2252521,"accept_rate":68,"display_name":"Vincent Monteil"},"score":0,"creation_date":1398367598,"post_id":23277646,"comment_id":35628134,"body_markdown":"Thanks @laalto, I would really like to do that. Is there a way to proceed ?","body":"Thanks @laalto, I would really like to do that. Is there a way to proceed ?"},{"owner":{"account_id":35743,"reputation":150884,"user_id":101361,"accept_rate":71,"display_name":"laalto"},"score":0,"creation_date":1398367826,"post_id":23277646,"comment_id":35628269,"body_markdown":"For example, check that there is e.g. a `cadremenu.png` in some drawable folder and it is in fact a PNG file. And there are no other `cadremenu` files in other drawable folders.","body":"For example, check that there is e.g. a <code>cadremenu.png</code> in some drawable folder and it is in fact a PNG file. And there are no other <code>cadremenu</code> files in other drawable folders."}],"answers":[{"tags":[],"owner":{"account_id":1162759,"reputation":255,"user_id":1141939,"accept_rate":11,"display_name":"random"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1398366619,"creation_date":1398366619,"answer_id":23277751,"question_id":23277646,"body_markdown":"Because the drawable that&#39;s not showing up is itself inside a RelativeLayout, you need to put some position attributes in the cadremenu layout so that Android knows where to place it. For example, try:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:id=&quot;@+id/container&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;monteil.gaming.hundredious.MainActivity&quot; &gt;\r\n\r\n    &lt;ImageView\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:background=&quot;@drawable/fondipad&quot;\r\n        android:contentDescription=&quot;@string/FondDesc&quot;\r\n\r\n        /&gt;\r\n\r\n    &lt;RelativeLayout \r\n        android:layout_height=&quot;300dp&quot; \r\n        android:layout_width=&quot;fill_parent&quot;\r\n        **android:layout_alignParentTop=&quot;true&quot;**\r\n        android:background=&quot;@drawable/cadremenu&quot;&gt;\r\n\r\n    &lt;/RelativeLayout&gt; \r\n    &lt;/RelativeLayout&gt;","title":"Android XML File java.lang.nullpointerexception","body":"<p>Because the drawable that's not showing up is itself inside a RelativeLayout, you need to put some position attributes in the cadremenu layout so that Android knows where to place it. For example, try:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\nxmlns:tools=\"http://schemas.android.com/tools\"\nandroid:id=\"@+id/container\"\nandroid:layout_width=\"match_parent\"\nandroid:layout_height=\"match_parent\"\ntools:context=\"monteil.gaming.hundredious.MainActivity\" &gt;\n\n&lt;ImageView\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:background=\"@drawable/fondipad\"\n    android:contentDescription=\"@string/FondDesc\"\n\n    /&gt;\n\n&lt;RelativeLayout \n    android:layout_height=\"300dp\" \n    android:layout_width=\"fill_parent\"\n    **android:layout_alignParentTop=\"true\"**\n    android:background=\"@drawable/cadremenu\"&gt;\n\n&lt;/RelativeLayout&gt; \n&lt;/RelativeLayout&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2599781,"reputation":578,"user_id":2252521,"accept_rate":68,"display_name":"Vincent Monteil"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1398540588,"creation_date":1398540588,"answer_id":23315556,"question_id":23277646,"body_markdown":"As @laato suggested, I checked my drawable/cadremenu file. I copied/pasted/overwrited the file in my project and then everything worked fine ! I actually had the same problem with all my other resources, like if my resources folder had been corrupted or something like that.\r\n\r\n\r\nThank you guys\r\nHoping that someone will find help here someday","title":"Android XML File java.lang.nullpointerexception","body":"<p>As @laato suggested, I checked my drawable/cadremenu file. I copied/pasted/overwrited the file in my project and then everything worked fine ! I actually had the same problem with all my other resources, like if my resources folder had been corrupted or something like that.</p>\n\n<p>Thank you guys\nHoping that someone will find help here someday</p>\n"},{"tags":[],"owner":{"account_id":1050089,"reputation":20492,"user_id":1054245,"accept_rate":100,"display_name":"Prince"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1431445511,"creation_date":1431445511,"answer_id":30195688,"question_id":23277646,"body_markdown":"This exception usually occurs due to ***corrupt drawables***. Make sure you are able to open and view all the drawable you have linked. \r\n\r\n![enter image description here][1]\r\n\r\nIf you happen to see any error message of this sort or are unable to view your drawable then try replacing it again with the original file or if you have downloaded it then try re-downloading it.\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/dIZ7J.png","title":"Android XML File java.lang.nullpointerexception","body":"<p>This exception usually occurs due to <strong><em>corrupt drawables</em></strong>. Make sure you are able to open and view all the drawable you have linked. </p>\n\n<p><img src=\"https://i.stack.imgur.com/dIZ7J.png\" alt=\"enter image description here\"></p>\n\n<p>If you happen to see any error message of this sort or are unable to view your drawable then try replacing it again with the original file or if you have downloaded it then try re-downloading it.</p>\n"},{"tags":[],"owner":{"account_id":12153023,"reputation":624,"user_id":8872691,"display_name":"m&#39;hd semps"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657966123,"creation_date":1657966123,"answer_id":73003308,"question_id":23277646,"body_markdown":"File -&gt; Invalidate caches and restart","title":"Android XML File java.lang.nullpointerexception","body":"<p>File -&gt; Invalidate caches and restart</p>\n"}],"owner":{"account_id":2599781,"reputation":578,"user_id":2252521,"accept_rate":68,"display_name":"Vincent Monteil"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7246,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":23315556,"answer_count":4,"score":3,"last_activity_date":1657966123,"creation_date":1398366318,"question_id":23277646,"body_markdown":"I am building a brand new android project. It&#39;s not my 1st android app so I&#39;m much more frustrated not being able to get rid of this error...\r\n\r\nI use an XML File, which has for now only 3 items and NO error in the XML tab : \r\n\r\n    \r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:id=&quot;@+id/container&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;.gaming..MainActivity&quot; &gt;\r\n        \r\n        &lt;ImageView\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:background=&quot;@drawable/fondipad&quot;\r\n            android:contentDescription=&quot;@string/FondDesc&quot;\r\n            \r\n            /&gt;\r\n        \r\n        &lt;RelativeLayout \r\n            android:layout_height=&quot;300dp&quot; \r\n            android:layout_width=&quot;fill_parent&quot;\r\n            android:background=&quot;@drawable/cadremenu&quot;&gt;\r\n            \r\n        &lt;/RelativeLayout&gt; \r\n        &lt;/RelativeLayout&gt;\r\n\r\n\r\n\r\nPretty simple, yay ?\r\nHowever, the visual tab is not rendering the cadremenu drawable (but the &quot;fond&quot; does)... But the cadremenu.png is in the drawable folder !\r\nI can launch the app but only the background is rendered...\r\nI really don&#39;t know what to do... The xml file returns this exception\r\n\r\n\r\n\r\n    java.lang.NullPointerException\r\n    \tat android.graphics.Bitmap_Delegate.createBitmap(Bitmap_Delegate.java:598)\r\n    \tat android.graphics.Bitmap_Delegate.createBitmap(Bitmap_Delegate.java:120)\r\n    \tat android.graphics.Bitmap_Delegate.createBitmap(Bitmap_Delegate.java:102)\r\n    \tat com.android.layoutlib.bridge.impl.ResourceHelper.getDrawable(ResourceHelper.java:233)\r\n    \tat android.content.res.BridgeTypedArray.getDrawable(BridgeTypedArray.java:782)\r\n    \tat android.view.View.&lt;init&gt;(View.java:3554)\r\n    \tat android.view.View.&lt;init&gt;(View.java:3484)\r\n    \tat android.view.ViewGroup.&lt;init&gt;(ViewGroup.java:464)\r\n    \tat android.widget.RelativeLayout.&lt;init&gt;(RelativeLayout.java:236)\r\n    \tat sun.reflect.GeneratedConstructorAccessor37.newInstance(Unknown Source)\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:513)\r\n    \tat android.view.LayoutInflater.createView(LayoutInflater.java:594)\r\n    \tat android.view.BridgeInflater.onCreateView(BridgeInflater.java:86)\r\n    \tat android.view.LayoutInflater.onCreateView(LayoutInflater.java:669)\r\n    \tat android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:694)\r\n    \tat android.view.BridgeInflater.createViewFromTag(BridgeInflater.java:131)\r\n    \tat android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:755)\r\n    \tat android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)\r\n    \tat android.view.LayoutInflater.rInflate(LayoutInflater.java:727)\r\n    \tat android.view.LayoutInflater.inflate(LayoutInflater.java:492)\r\n    \tat android.view.LayoutInflater.inflate(LayoutInflater.java:373)\r\n    \tat com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:399)\r\n    \tat com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:336)\r\n    \tat com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:332)\r\n    \tat com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:504)\r\n    \tat com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1584)\r\n    \tat com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1309)\r\n    \tat com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:1066)\r\n    \tat com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.delegatePageChange(LayoutEditorDelegate.java:686)\r\n    \tat com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor.pageChange(CommonXmlEditor.java:360)\r\n    \tat org.eclipse.ui.part.MultiPageEditorPart$2.widgetSelected(MultiPageEditorPart.java:292)\r\n    \tat org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)\r\n    \tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)\r\n    \tat org.eclipse.swt.widgets.Display.sendEvent(Display.java:4136)\r\n    \tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1458)\r\n    \tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1481)\r\n    \tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1466)\r\n    \tat org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1271)\r\n    \tat org.eclipse.swt.custom.CTabFolder.setSelection(CTabFolder.java:3028)\r\n    \tat org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1749)\r\n    \tat org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:278)\r\n    \tat org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)\r\n    \tat org.eclipse.swt.widgets.Display.sendEvent(Display.java:4136)\r\n    \tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1458)\r\n    \tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1481)\r\n    \tat org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1466)\r\n    \tat org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1271)\r\n    \tat org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3982)\r\n    \tat org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3621)\r\n    \tat org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1053)\r\n    \tat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)\r\n    \tat org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:942)\r\n    \tat org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)\r\n    \tat org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)\r\n    \tat org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)\r\n    \tat org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)\r\n    \tat org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\r\n    \tat org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)\r\n    \tat org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)\r\n    \tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)\r\n    \tat org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)\r\n    \tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)\r\n    \tat org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:597)\r\n    \tat org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)\r\n    \tat org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)\r\n    \tat org.eclipse.equinox.launcher.Main.run(Main.java:1438)\r\n\r\n\r\nany help would be welcome !\r\n\r\n\r\nEDIT : I already tried removing, putting back drawables, project, .... Cleaning the project, building back... I have even tried deleting &amp; reinstalling every ADT component","title":"Android XML File java.lang.nullpointerexception","body":"<p>I am building a brand new android project. It's not my 1st android app so I'm much more frustrated not being able to get rid of this error...</p>\n\n<p>I use an XML File, which has for now only 3 items and NO error in the XML tab : </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/container\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".gaming..MainActivity\" &gt;\n\n    &lt;ImageView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:background=\"@drawable/fondipad\"\n        android:contentDescription=\"@string/FondDesc\"\n\n        /&gt;\n\n    &lt;RelativeLayout \n        android:layout_height=\"300dp\" \n        android:layout_width=\"fill_parent\"\n        android:background=\"@drawable/cadremenu\"&gt;\n\n    &lt;/RelativeLayout&gt; \n    &lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>Pretty simple, yay ?\nHowever, the visual tab is not rendering the cadremenu drawable (but the \"fond\" does)... But the cadremenu.png is in the drawable folder !\nI can launch the app but only the background is rendered...\nI really don't know what to do... The xml file returns this exception</p>\n\n<pre><code>java.lang.NullPointerException\n    at android.graphics.Bitmap_Delegate.createBitmap(Bitmap_Delegate.java:598)\n    at android.graphics.Bitmap_Delegate.createBitmap(Bitmap_Delegate.java:120)\n    at android.graphics.Bitmap_Delegate.createBitmap(Bitmap_Delegate.java:102)\n    at com.android.layoutlib.bridge.impl.ResourceHelper.getDrawable(ResourceHelper.java:233)\n    at android.content.res.BridgeTypedArray.getDrawable(BridgeTypedArray.java:782)\n    at android.view.View.&lt;init&gt;(View.java:3554)\n    at android.view.View.&lt;init&gt;(View.java:3484)\n    at android.view.ViewGroup.&lt;init&gt;(ViewGroup.java:464)\n    at android.widget.RelativeLayout.&lt;init&gt;(RelativeLayout.java:236)\n    at sun.reflect.GeneratedConstructorAccessor37.newInstance(Unknown Source)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)\n    at android.view.LayoutInflater.createView(LayoutInflater.java:594)\n    at android.view.BridgeInflater.onCreateView(BridgeInflater.java:86)\n    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:669)\n    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:694)\n    at android.view.BridgeInflater.createViewFromTag(BridgeInflater.java:131)\n    at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:755)\n    at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)\n    at android.view.LayoutInflater.rInflate(LayoutInflater.java:727)\n    at android.view.LayoutInflater.inflate(LayoutInflater.java:492)\n    at android.view.LayoutInflater.inflate(LayoutInflater.java:373)\n    at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:399)\n    at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:336)\n    at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:332)\n    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:504)\n    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1584)\n    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1309)\n    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:1066)\n    at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.delegatePageChange(LayoutEditorDelegate.java:686)\n    at com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor.pageChange(CommonXmlEditor.java:360)\n    at org.eclipse.ui.part.MultiPageEditorPart$2.widgetSelected(MultiPageEditorPart.java:292)\n    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)\n    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)\n    at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4136)\n    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1458)\n    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1481)\n    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1466)\n    at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1271)\n    at org.eclipse.swt.custom.CTabFolder.setSelection(CTabFolder.java:3028)\n    at org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1749)\n    at org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:278)\n    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)\n    at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4136)\n    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1458)\n    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1481)\n    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1466)\n    at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1271)\n    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3982)\n    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3621)\n    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1053)\n    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)\n    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:942)\n    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)\n    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)\n    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)\n    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)\n    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)\n    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)\n    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)\n    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)\n    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)\n    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)\n    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)\n    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)\n    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)\n</code></pre>\n\n<p>any help would be welcome !</p>\n\n<p>EDIT : I already tried removing, putting back drawables, project, .... Cleaning the project, building back... I have even tried deleting &amp; reinstalling every ADT component</p>\n"},{"tags":["java","android","datetime-format"],"answers":[{"tags":[],"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1562695994,"creation_date":1562695994,"answer_id":56958454,"question_id":56958131,"body_markdown":"Specify the `Locale` using the `bn-IN` language tag when obtaining the date formatter.\r\n\r\n    ULocale bangla = ULocale.forLanguageTag(&quot;bn-IN&quot;);\r\n    SimpleDateFormat timeFormat = SimpleDateFormat.getTimeInstance(DateFormat.LONG, bangla);\r\n","title":"How can I change the time format to Bangla from English without changing the app language?","body":"<p>Specify the <code>Locale</code> using the <code>bn-IN</code> language tag when obtaining the date formatter.</p>\n\n<pre><code>ULocale bangla = ULocale.forLanguageTag(\"bn-IN\");\nSimpleDateFormat timeFormat = SimpleDateFormat.getTimeInstance(DateFormat.LONG, bangla);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1562776445,"creation_date":1562747579,"answer_id":56966582,"question_id":56958131,"body_markdown":"Theoretically this should work:\r\n\r\n\t\tLocale bangla = Locale.forLanguageTag(&quot;bn-BD&quot;);\r\n\t\tDateTimeFormatter timeFormatter = DateTimeFormatter\r\n\t\t\t\t.ofLocalizedTime(FormatStyle.FULL)\r\n\t\t\t\t.withLocale(bangla);\r\n\t\tString formattedTime\r\n\t\t\t\t= ZonedDateTime.now(ZoneId.of(&quot;Asia/Dhaka&quot;)).format(timeFormatter);\r\n\t\tSystem.out.println(formattedTime);\r\n\r\nHowever the output on my desktop Java 7 is:\r\n\r\n&gt; 2:29:21 PM BDT\r\n\r\nThat is, I see no difference from English.\r\n\r\nOn Java 9 I do get a difference:\r\n\r\n&gt; 10:32:00    \r\n\r\nWhat you get on Android I dare not tell, but you can try.\r\n\r\nInstead of `FormatStyle.FULL` you may specify `.SHORT`, `MEDIUM` or `LONG` depending on how long of a format you want.\r\n\r\nI am using ThreeTen Backport, the backport of java.time, the modern Java date and time API, to Java 6 and 7. For older Android (under API level 26) use the Android adaption of the same, ThreeTenABP. See the links at the bottom.\r\n\r\nI use language tag `bn-BD` for Bangla (Bengali) as spoken in Bangladesh. You may also try `bn` alone if you dont want to specify a country, or `bn-IN` for Bangla as spoken in India. It may or may not make a difference.\r\n\r\n## Links\r\n\r\n - [Oracle tutorial: Date Time](https://docs.oracle.com/javase/tutorial/datetime/) explaining how to use java.time.\r\n - [Java Specification Request (JSR) 310](https://jcp.org/en/jsr/detail?id=310), where `java.time` was first described.\r\n - [ThreeTen Backport project](http://www.threeten.org/threetenbp/), the backport of `java.time` to Java 6 and 7 (ThreeTen for JSR-310).\r\n - [ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP), Android edition of ThreeTen Backport\r\n - [Question: How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project), with a very thorough explanation.\r\n","title":"How can I change the time format to Bangla from English without changing the app language?","body":"<p>Theoretically this should work:</p>\n\n<pre><code>    Locale bangla = Locale.forLanguageTag(\"bn-BD\");\n    DateTimeFormatter timeFormatter = DateTimeFormatter\n            .ofLocalizedTime(FormatStyle.FULL)\n            .withLocale(bangla);\n    String formattedTime\n            = ZonedDateTime.now(ZoneId.of(\"Asia/Dhaka\")).format(timeFormatter);\n    System.out.println(formattedTime);\n</code></pre>\n\n<p>However the output on my desktop Java 7 is:</p>\n\n<blockquote>\n  <p>2:29:21 PM BDT</p>\n</blockquote>\n\n<p>That is, I see no difference from English.</p>\n\n<p>On Java 9 I do get a difference:</p>\n\n<blockquote>\n  <p>10:32:00    </p>\n</blockquote>\n\n<p>What you get on Android I dare not tell, but you can try.</p>\n\n<p>Instead of <code>FormatStyle.FULL</code> you may specify <code>.SHORT</code>, <code>MEDIUM</code> or <code>LONG</code> depending on how long of a format you want.</p>\n\n<p>I am using ThreeTen Backport, the backport of java.time, the modern Java date and time API, to Java 6 and 7. For older Android (under API level 26) use the Android adaption of the same, ThreeTenABP. See the links at the bottom.</p>\n\n<p>I use language tag <code>bn-BD</code> for Bangla (Bengali) as spoken in Bangladesh. You may also try <code>bn</code> alone if you dont want to specify a country, or <code>bn-IN</code> for Bangla as spoken in India. It may or may not make a difference.</p>\n\n<h2>Links</h2>\n\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">Oracle tutorial: Date Time</a> explaining how to use java.time.</li>\n<li><a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"nofollow noreferrer\">Java Specification Request (JSR) 310</a>, where <code>java.time</code> was first described.</li>\n<li><a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\">ThreeTen Backport project</a>, the backport of <code>java.time</code> to Java 6 and 7 (ThreeTen for JSR-310).</li>\n<li><a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">ThreeTenABP</a>, Android edition of ThreeTen Backport</li>\n<li><a href=\"https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project\">Question: How to use ThreeTenABP in Android Project</a>, with a very thorough explanation.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":6947828,"reputation":2546,"user_id":5331566,"accept_rate":88,"display_name":"Shaon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1605019617,"creation_date":1605019617,"answer_id":64771151,"question_id":56958131,"body_markdown":"This is a Kotlin extension function. Using this you can convert any English digit to Bangla.\r\n\r\n    fun String.englishNumberChangeToBanglaNumber(): String {\r\n        val hash = HashMap&lt;Int, String&gt;()\r\n        hash[0] = &quot;&quot;\r\n        hash[1] = &quot;&quot;\r\n        hash[2] = &quot;&quot;\r\n        hash[3] = &quot;&quot;\r\n        hash[4] = &quot;&quot;\r\n        hash[5] = &quot;&quot;\r\n        hash[6] = &quot;&quot;\r\n        hash[7] = &quot;&quot;\r\n        hash[8] = &quot;&quot;\r\n        hash[9] = &quot;&quot;\r\n        var banglaDate = &quot;&quot;\r\n        this.forEach {\r\n            try {\r\n                val digit = it.toString().toInt()\r\n                banglaDate += hash[digit]\r\n            } catch (e: Exception) {\r\n                banglaDate += it\r\n            }\r\n        }\r\n        return banglaDate\r\n    \r\n    }\r\n\r\n\r\nNow use this way in Kotlin,\r\n\r\n    &quot;10/12/2020&quot;.fun String.englishNumberChangeToBanglaNumber()\r\n\r\noutput: `//`\r\n\r\nMake sure your string is in English.","title":"How can I change the time format to Bangla from English without changing the app language?","body":"<p>This is a Kotlin extension function. Using this you can convert any English digit to Bangla.</p>\n<pre><code>fun String.englishNumberChangeToBanglaNumber(): String {\n    val hash = HashMap&lt;Int, String&gt;()\n    hash[0] = &quot;&quot;\n    hash[1] = &quot;&quot;\n    hash[2] = &quot;&quot;\n    hash[3] = &quot;&quot;\n    hash[4] = &quot;&quot;\n    hash[5] = &quot;&quot;\n    hash[6] = &quot;&quot;\n    hash[7] = &quot;&quot;\n    hash[8] = &quot;&quot;\n    hash[9] = &quot;&quot;\n    var banglaDate = &quot;&quot;\n    this.forEach {\n        try {\n            val digit = it.toString().toInt()\n            banglaDate += hash[digit]\n        } catch (e: Exception) {\n            banglaDate += it\n        }\n    }\n    return banglaDate\n\n}\n</code></pre>\n<p>Now use this way in Kotlin,</p>\n<pre><code>&quot;10/12/2020&quot;.fun String.englishNumberChangeToBanglaNumber()\n</code></pre>\n<p>output: <code>//</code></p>\n<p>Make sure your string is in English.</p>\n"},{"tags":[],"owner":{"account_id":2075020,"reputation":4964,"user_id":1848639,"accept_rate":73,"display_name":"Tushar Monirul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636373270,"creation_date":1636373270,"answer_id":69883207,"question_id":56958131,"body_markdown":"How about this one:\r\n\r\n```\r\npublic static String convertBnToEn(String data) {\r\n    return data.replaceAll(&quot;&quot;, &quot;0&quot;)\r\n            .replaceAll(&quot;&quot;, &quot;1&quot;)\r\n            .replaceAll(&quot;&quot;, &quot;2&quot;)\r\n            .replaceAll(&quot;&quot;, &quot;3&quot;)\r\n            .replaceAll(&quot;&quot;, &quot;4&quot;)\r\n            .replaceAll(&quot;&quot;, &quot;5&quot;)\r\n            .replaceAll(&quot;&quot;, &quot;6&quot;)\r\n            .replaceAll(&quot;&quot;, &quot;7&quot;)\r\n            .replaceAll(&quot;&quot;, &quot;8&quot;)\r\n            .replaceAll(&quot;&quot;, &quot;9&quot;);\r\n}\r\n```","title":"How can I change the time format to Bangla from English without changing the app language?","body":"<p>How about this one:</p>\n<pre><code>public static String convertBnToEn(String data) {\n    return data.replaceAll(&quot;&quot;, &quot;0&quot;)\n            .replaceAll(&quot;&quot;, &quot;1&quot;)\n            .replaceAll(&quot;&quot;, &quot;2&quot;)\n            .replaceAll(&quot;&quot;, &quot;3&quot;)\n            .replaceAll(&quot;&quot;, &quot;4&quot;)\n            .replaceAll(&quot;&quot;, &quot;5&quot;)\n            .replaceAll(&quot;&quot;, &quot;6&quot;)\n            .replaceAll(&quot;&quot;, &quot;7&quot;)\n            .replaceAll(&quot;&quot;, &quot;8&quot;)\n            .replaceAll(&quot;&quot;, &quot;9&quot;);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12495211,"reputation":140,"user_id":9095487,"display_name":"Shawn Muktadir"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1641468184,"creation_date":1641457384,"answer_id":70604283,"question_id":56958131,"body_markdown":"Convert Bangla digit to basic Latin, and it should work...\r\n\r\n    public static String convertEnToBn(String data) {\r\n            return data.replaceAll(&quot;0&quot;, &quot;\\u09E6&quot;)\r\n                    .replaceAll(&quot;1&quot;, &quot;\\u09E7&quot;)\r\n                    .replaceAll(&quot;2&quot;, &quot;\\u09E8&quot;)\r\n                    .replaceAll(&quot;3&quot;, &quot;\\u09E9&quot;)\r\n                    .replaceAll(&quot;4&quot;, &quot;\\u09EA&quot;)\r\n                    .replaceAll(&quot;5&quot;, &quot;\\u09EB&quot;)\r\n                    .replaceAll(&quot;6&quot;, &quot;\\u09EC&quot;)\r\n                    .replaceAll(&quot;7&quot;, &quot;\\u09ED&quot;)\r\n                    .replaceAll(&quot;8&quot;, &quot;\\u09EE&quot;)\r\n                    .replaceAll(&quot;9&quot;, &quot;\\u09EF&quot;);\r\n        }\r\n\r\n","title":"How can I change the time format to Bangla from English without changing the app language?","body":"<p>Convert Bangla digit to basic Latin, and it should work...</p>\n<pre><code>public static String convertEnToBn(String data) {\n        return data.replaceAll(&quot;0&quot;, &quot;\\u09E6&quot;)\n                .replaceAll(&quot;1&quot;, &quot;\\u09E7&quot;)\n                .replaceAll(&quot;2&quot;, &quot;\\u09E8&quot;)\n                .replaceAll(&quot;3&quot;, &quot;\\u09E9&quot;)\n                .replaceAll(&quot;4&quot;, &quot;\\u09EA&quot;)\n                .replaceAll(&quot;5&quot;, &quot;\\u09EB&quot;)\n                .replaceAll(&quot;6&quot;, &quot;\\u09EC&quot;)\n                .replaceAll(&quot;7&quot;, &quot;\\u09ED&quot;)\n                .replaceAll(&quot;8&quot;, &quot;\\u09EE&quot;)\n                .replaceAll(&quot;9&quot;, &quot;\\u09EF&quot;);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25822360,"reputation":1,"user_id":19561218,"display_name":"Nasim Mahamud Shameem"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657965746,"creation_date":1657965746,"answer_id":73003273,"question_id":56958131,"body_markdown":"Using Kotlin extension function\r\n\r\n    fun String.enDigitToBn():String{\r\n        val bnDigits = listOf(&#39;&#39;,&#39;&#39;,&#39;&#39;,&#39;&#39;,&#39;&#39;,&#39;&#39;,&#39;&#39;,&#39;&#39;,&#39;&#39;,&#39;&#39;)\r\n        return this.map { bnDigits[it.toString().toInt()] }.joinToString(&quot;&quot;)\r\n    }","title":"How can I change the time format to Bangla from English without changing the app language?","body":"<p>Using Kotlin extension function</p>\n<pre><code>fun String.enDigitToBn():String{\n    val bnDigits = listOf('','','','','','','','','','')\n    return this.map { bnDigits[it.toString().toInt()] }.joinToString(&quot;&quot;)\n}\n</code></pre>\n"}],"owner":{"account_id":16179838,"reputation":11,"user_id":11681668,"display_name":"Abu Raihan Rony"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1664,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":6,"score":0,"last_activity_date":1657965746,"creation_date":1562694603,"question_id":56958131,"body_markdown":"How can I change the time format to Bangla from English without changing the app language?","title":"How can I change the time format to Bangla from English without changing the app language?","body":"<p>How can I change the time format to Bangla from English without changing the app language?</p>\n"},{"tags":["java","spring-batch"],"answers":[{"tags":[],"owner":{"account_id":552361,"reputation":18316,"user_id":917467,"accept_rate":76,"display_name":"html_programmer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657964692,"creation_date":1657964692,"answer_id":73003164,"question_id":72998777,"body_markdown":"By lack of better solution, I have updated the written xsd object to add a field annotated with `@XmlTransient`.  \r\nThis prevents the `Jaxb2Marshaller` used by `StaxEventItemWriter` from including the field in the XML.  \r\nThe annox plugin can be used in combination with xjc to declare the annotation through the bindings file (xPath). \r\n\r\nThis IMO is not a good solution, but it does work.  \r\nFirst, because it mixes the data from the read model into the written model (which it should not), and second because it requires to fetch the entity again before updating and persisting its state.  \r\n\r\nOther answers on SO I looked up dance around the problem, but there doesn&#39;t appear to be a straightforward solution to get a reference (AFAICS), if not for passing it through the execution context, which would force you to change the batch size to 1 which is not desirable.  \r\nAny callbacks pass only the written item, not the originally read object. ","title":"Spring batch get read item in onSkipInWrite","body":"<p>By lack of better solution, I have updated the written xsd object to add a field annotated with <code>@XmlTransient</code>.<br />\nThis prevents the <code>Jaxb2Marshaller</code> used by <code>StaxEventItemWriter</code> from including the field in the XML.<br />\nThe annox plugin can be used in combination with xjc to declare the annotation through the bindings file (xPath).</p>\n<p>This IMO is not a good solution, but it does work.<br />\nFirst, because it mixes the data from the read model into the written model (which it should not), and second because it requires to fetch the entity again before updating and persisting its state.</p>\n<p>Other answers on SO I looked up dance around the problem, but there doesn't appear to be a straightforward solution to get a reference (AFAICS), if not for passing it through the execution context, which would force you to change the batch size to 1 which is not desirable.<br />\nAny callbacks pass only the written item, not the originally read object.</p>\n"}],"owner":{"account_id":552361,"reputation":18316,"user_id":917467,"accept_rate":76,"display_name":"html_programmer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1657964692,"creation_date":1657913140,"question_id":72998777,"body_markdown":"Very simple use case but can&#39;t find a good solution. \r\n\r\n- Reader: Reads records (entities) from the database (`HibernateCursorItemReader`)\r\n- Processor: Maps entity records to Xml Beans (JaxB) based on a CLOB field that contains XML \r\n- Writer: Writes the item to a file \r\n\r\nIn `onSkipInWrite` I need access to the originally read entity, in order to update its state (i.e. error state).  \r\nThe generated XML isn&#39;t useful in this regard. \r\n\r\nCan&#39;t seem to find a solid solution to the problem; how to get a reference to the read entity? ","title":"Spring batch get read item in onSkipInWrite","body":"<p>Very simple use case but can't find a good solution.</p>\n<ul>\n<li>Reader: Reads records (entities) from the database (<code>HibernateCursorItemReader</code>)</li>\n<li>Processor: Maps entity records to Xml Beans (JaxB) based on a CLOB field that contains XML</li>\n<li>Writer: Writes the item to a file</li>\n</ul>\n<p>In <code>onSkipInWrite</code> I need access to the originally read entity, in order to update its state (i.e. error state).<br />\nThe generated XML isn't useful in this regard.</p>\n<p>Can't seem to find a solid solution to the problem; how to get a reference to the read entity?</p>\n"},{"tags":["java","spring","gradle","spring-boot"],"comments":[{"owner":{"account_id":5654135,"reputation":3774,"user_id":4473822,"display_name":"Tom"},"score":0,"creation_date":1488813890,"post_id":42628920,"comment_id":72386536,"body_markdown":"I&#39;m not sure if its a typo only here but your class name is `DigApplication` - Di*g* with a *g* and you try to run `DipApplication` - Di*p* with a *p*. Also, `@EnableAutoConfiguration` is not needed when you use `@SpringBootApplication` as it already contains it.","body":"I&#39;m not sure if its a typo only here but your class name is <code>DigApplication</code> - Di<i>g</i> with a <i>g</i> and you try to run <code>DipApplication</code> - Di<i>p</i> with a <i>p</i>. Also, <code>@EnableAutoConfiguration</code> is not needed when you use <code>@SpringBootApplication</code> as it already contains it."},{"owner":{"account_id":7291708,"reputation":3515,"user_id":5557885,"accept_rate":54,"display_name":"rajadilipkolli"},"score":0,"creation_date":1488828957,"post_id":42628920,"comment_id":72395846,"body_markdown":"Do a gradle clean build and you should run application","body":"Do a gradle clean build and you should run application"},{"owner":{"account_id":5831046,"reputation":121,"user_id":4595515,"accept_rate":33,"display_name":"Anand MP"},"score":0,"creation_date":1488872908,"post_id":42628920,"comment_id":72412835,"body_markdown":"@Tom  Thanks for pointing out the typo. I&#39;ve edited the question. But that&#39;s not what is causing the error.","body":"@Tom  Thanks for pointing out the typo. I&#39;ve edited the question. But that&#39;s not what is causing the error."},{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1488872995,"post_id":42628920,"comment_id":72412872,"body_markdown":"How do you run your application? How is gradle relevant?","body":"How do you run your application? How is gradle relevant?"},{"owner":{"account_id":5831046,"reputation":121,"user_id":4595515,"accept_rate":33,"display_name":"Anand MP"},"score":0,"creation_date":1488875787,"post_id":42628920,"comment_id":72414228,"body_markdown":"@JBNizet Gradle is important because I&#39;m resolving all my dependencies through that. Since the kind of error that I&#39;m getting is because of spring-boot related issue, which is available as an external library in my project.","body":"@JBNizet Gradle is important because I&#39;m resolving all my dependencies through that. Since the kind of error that I&#39;m getting is because of spring-boot related issue, which is available as an external library in my project."},{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1488875905,"post_id":42628920,"comment_id":72414285,"body_markdown":"OK. So you **build** your app with Gradle. That doesn&#39;t tell us how you **run** your application, and how gradle is relevant here.","body":"OK. So you <b>build</b> your app with Gradle. That doesn&#39;t tell us how you <b>run</b> your application, and how gradle is relevant here."}],"answers":[{"tags":[],"owner":{"account_id":5831046,"reputation":121,"user_id":4595515,"accept_rate":33,"display_name":"Anand MP"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1488876186,"creation_date":1488876186,"answer_id":42643715,"question_id":42628920,"body_markdown":"The error was because of an issue with gradle 3.4 I&#39;ve changed my gradle distribution to 3.2 and everything is working fine now.\r\n\r\nPlease refer this for more information:\r\nhttps://github.com/gradle/gradle/issues/1335\r\n\r\nHope this solves your problem.","title":"Gradle project error - java.lang.ClassNotFoundException: org.springframework.boot.SpringApplication","body":"<p>The error was because of an issue with gradle 3.4 I've changed my gradle distribution to 3.2 and everything is working fine now.</p>\n\n<p>Please refer this for more information:\n<a href=\"https://github.com/gradle/gradle/issues/1335\" rel=\"nofollow noreferrer\">https://github.com/gradle/gradle/issues/1335</a></p>\n\n<p>Hope this solves your problem.</p>\n"},{"tags":[],"owner":{"account_id":10426574,"reputation":31,"user_id":7687624,"display_name":""},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1489914364,"creation_date":1489914364,"answer_id":42884770,"question_id":42628920,"body_markdown":"I fix this error by change gradle3.4 to 3.2","title":"Gradle project error - java.lang.ClassNotFoundException: org.springframework.boot.SpringApplication","body":"<p>I fix this error by change gradle3.4 to 3.2</p>\n"},{"tags":[],"owner":{"account_id":2820458,"reputation":2588,"user_id":2424320,"accept_rate":89,"display_name":"Turbut Alin"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1494175597,"creation_date":1494175597,"answer_id":43834087,"question_id":42628920,"body_markdown":"If you are using IntelliJ Idea, the new version 2016.3.6 solved this issue.","title":"Gradle project error - java.lang.ClassNotFoundException: org.springframework.boot.SpringApplication","body":"<p>If you are using IntelliJ Idea, the new version 2016.3.6 solved this issue.</p>\n"},{"tags":[],"owner":{"account_id":4116401,"reputation":1189,"user_id":3377836,"accept_rate":62,"display_name":"frank"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1600826519,"creation_date":1600826519,"answer_id":64019985,"question_id":42628920,"body_markdown":"i encountered this problem too, just with another story.\r\n\r\ni am using spring boot 2.2.5 and gradle 5.1.2.\r\n\r\nrun `gradle build -x test`, it will tell you what error it is.\r\n\r\nin my case, it told me that `error: package org.jasig.cas.client.authentication does not exist`, but this package exists in fact.\r\n\r\nthen i remembered that i added a dependency `runtimeOnly &#39;org.apereo.cas:cas-server-support-validation:5.3.15.1&#39;`\r\n\r\nafter comment this dependency, my project can start success.","title":"Gradle project error - java.lang.ClassNotFoundException: org.springframework.boot.SpringApplication","body":"<p>i encountered this problem too, just with another story.</p>\n<p>i am using spring boot 2.2.5 and gradle 5.1.2.</p>\n<p>run <code>gradle build -x test</code>, it will tell you what error it is.</p>\n<p>in my case, it told me that <code>error: package org.jasig.cas.client.authentication does not exist</code>, but this package exists in fact.</p>\n<p>then i remembered that i added a dependency <code>runtimeOnly 'org.apereo.cas:cas-server-support-validation:5.3.15.1'</code></p>\n<p>after comment this dependency, my project can start success.</p>\n"},{"tags":[],"owner":{"account_id":7853871,"reputation":512,"user_id":5936451,"display_name":"Ram Pratap"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657964658,"creation_date":1657964658,"answer_id":73003155,"question_id":42628920,"body_markdown":"I understand this is an old thread, but still adding an answer.\r\n\r\nSpring Boot will add two jars under build\\libs\\ (once we execute ./gradlew clean build or equivalent) *.jar(this will be jar with all dependencies) and *-plain.jar(will not have any dependencies). Now *-plain.jar is getting picked up and executed and causing No manifest and Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/springframework/boot/SpringApplication (once we fix no manifest by providing manifest under jar {}).\r\n\r\nWe need to run *.jar using java -jar command. If we want to stop generating *-plain.jar , we have to simply add following in our build.gradle :\r\n\r\n    jar {\r\n    enabled = false\r\n    }","title":"Gradle project error - java.lang.ClassNotFoundException: org.springframework.boot.SpringApplication","body":"<p>I understand this is an old thread, but still adding an answer.</p>\n<p>Spring Boot will add two jars under build\\libs\\ (once we execute ./gradlew clean build or equivalent) *.jar(this will be jar with all dependencies) and *-plain.jar(will not have any dependencies). Now *-plain.jar is getting picked up and executed and causing No manifest and Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/springframework/boot/SpringApplication (once we fix no manifest by providing manifest under jar {}).</p>\n<p>We need to run *.jar using java -jar command. If we want to stop generating *-plain.jar , we have to simply add following in our build.gradle :</p>\n<pre><code>jar {\nenabled = false\n}\n</code></pre>\n"}],"owner":{"account_id":5831046,"reputation":121,"user_id":4595515,"accept_rate":33,"display_name":"Anand MP"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11639,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":42643715,"answer_count":5,"score":4,"last_activity_date":1657964658,"creation_date":1488812675,"question_id":42628920,"body_markdown":"This is my main application code:\r\n\r\n    package u.d.dip.rs.app;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.EnableAutoConfiguration;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\n    \r\n    @EnableWebSecurity\r\n    @SpringBootApplication\r\n    @ComponentScan(basePackages = &quot;u.d.dip&quot;)\r\n    @EnableAutoConfiguration\r\n    public class DipApplication {\r\n        public static void main(String[] args) {\r\n            SpringApplication.run(DipApplication.class, args);\r\n        }\r\n    }\r\n\r\nI&#39;m using gradle to build the project. Even though SpringApplication file is properly imported I&#39;m getting the following error:\r\n\r\n\r\n    Caused by: java.lang.ClassNotFoundException: org.springframework.boot.SpringApplication\r\n    \tat java.net.URLClassLoader.findClass(URLClassLoader.java:381)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n    \tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n    \t... 6 more\r\n    \r\n    Process finished with exit code 1\r\n\r\n\r\nI&#39;m getting following gradle message when I hover over SpringApplication\r\n\r\n    [Gradle: org.springframework.boot:spring-boot:1.5.1.RELEASE] org.springframework.boot public class SpringApplication extends Object\r\n\r\nAny help would be much appreciated.\r\nThanks in advance!\r\n\r\n\r\n","title":"Gradle project error - java.lang.ClassNotFoundException: org.springframework.boot.SpringApplication","body":"<p>This is my main application code:</p>\n\n<pre><code>package u.d.dip.rs.app;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.EnableAutoConfiguration;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\n\n@EnableWebSecurity\n@SpringBootApplication\n@ComponentScan(basePackages = \"u.d.dip\")\n@EnableAutoConfiguration\npublic class DipApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(DipApplication.class, args);\n    }\n}\n</code></pre>\n\n<p>I'm using gradle to build the project. Even though SpringApplication file is properly imported I'm getting the following error:</p>\n\n<pre><code>Caused by: java.lang.ClassNotFoundException: org.springframework.boot.SpringApplication\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n    ... 6 more\n\nProcess finished with exit code 1\n</code></pre>\n\n<p>I'm getting following gradle message when I hover over SpringApplication</p>\n\n<pre><code>[Gradle: org.springframework.boot:spring-boot:1.5.1.RELEASE] org.springframework.boot public class SpringApplication extends Object\n</code></pre>\n\n<p>Any help would be much appreciated.\nThanks in advance!</p>\n"},{"tags":["java","spring-boot","gradle","build.gradle","manifest"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1629013221,"post_id":68789394,"comment_id":121570347,"body_markdown":"Do you understand what the exception means?","body":"Do you understand what the exception means?"},{"owner":{"account_id":16347167,"reputation":918,"user_id":11806619,"display_name":"Captain Jacky"},"score":0,"creation_date":1629013790,"post_id":68789394,"comment_id":121570456,"body_markdown":"Yes. The exception tells me that there is no definition of a class provided by me.","body":"Yes. The exception tells me that there is no definition of a class provided by me."},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1629014713,"post_id":68789394,"comment_id":121570633,"body_markdown":"In the classpath yes","body":"In the classpath yes"}],"answers":[{"tags":[],"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1629014353,"creation_date":1629014353,"answer_id":68789707,"question_id":68789394,"body_markdown":"The `-plain.jar` file is a plain jar file without any of Spring Boots customizations. This means that it doesnt contain your applications dependencies and cant be launched using `java -jar`.\r\n\r\nYou need to run `temperaturetracker-0.0.1-SNAPSHOT.jar` instead.\r\n","title":"Spring Boot jar launch error: Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError","body":"<p>The <code>-plain.jar</code> file is a plain jar file without any of Spring Boots customizations. This means that it doesnt contain your applications dependencies and cant be launched using <code>java -jar</code>.</p>\n<p>You need to run <code>temperaturetracker-0.0.1-SNAPSHOT.jar</code> instead.</p>\n"},{"tags":[],"owner":{"account_id":7853871,"reputation":512,"user_id":5936451,"display_name":"Ram Pratap"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1657964446,"creation_date":1657964446,"answer_id":73003144,"question_id":68789394,"body_markdown":"I understand this is an old thread, but still adding an answer.\r\n\r\nSpring Boot will add two jars under build\\libs\\ (**once we execute ./gradlew clean build or equivalent**) *.jar(this will be jar with all dependencies) and *-plain.jar(will not have any dependencies). Now *-plain.jar is getting picked up and executed and causing **No manifest and Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/springframework/boot/SpringApplication (once we fix no manifest by providing manifest under jar {})**.\r\n\r\nAs Andy confirmed you need to run temperaturetracker-0.0.1-SNAPSHOT.jar instead. If we want to stop generating *-plain.jar , we have to simply add following in our build.gradle :\r\n\r\n    jar {\r\n    enabled = false\r\n    }\r\n\r\n","title":"Spring Boot jar launch error: Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError","body":"<p>I understand this is an old thread, but still adding an answer.</p>\n<p>Spring Boot will add two jars under build\\libs\\ (<strong>once we execute ./gradlew clean build or equivalent</strong>) *.jar(this will be jar with all dependencies) and *-plain.jar(will not have any dependencies). Now *-plain.jar is getting picked up and executed and causing <strong>No manifest and Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/springframework/boot/SpringApplication (once we fix no manifest by providing manifest under jar {})</strong>.</p>\n<p>As Andy confirmed you need to run temperaturetracker-0.0.1-SNAPSHOT.jar instead. If we want to stop generating *-plain.jar , we have to simply add following in our build.gradle :</p>\n<pre><code>jar {\nenabled = false\n}\n</code></pre>\n"}],"owner":{"account_id":16347167,"reputation":918,"user_id":11806619,"display_name":"Captain Jacky"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5204,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":68789707,"answer_count":2,"score":1,"last_activity_date":1657964446,"creation_date":1629010955,"question_id":68789394,"body_markdown":"Recently I ran `jar` of my `Spring Boot Application`. I&#39;ve received an error: `no main manifest attribute, in temperaturetracker-0.0.1-SNAPSHOT-plain.jar`. I&#39;ve updated my `build.gradle` so it would contain `Main-Class` attributes, but then I do receive an error:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/springframework/boot/SpringApplication\r\n            at com.example.temperaturetracker.TemperatureTrackerApplication.main(TemperatureTrackerApplication.java:15)\r\n    Caused by: java.lang.ClassNotFoundException: org.springframework.boot.SpringApplication\r\n            at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\r\n            at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n            at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\r\n            ... 1 more\r\n\r\nMy `build.gradle`:\r\n\r\n    plugins {\r\n        id &#39;org.springframework.boot&#39; version &#39;2.5.3&#39;\r\n        id &#39;io.spring.dependency-management&#39; version &#39;1.0.11.RELEASE&#39;\r\n        id &#39;java&#39;\r\n        id &#39;org.jetbrains.kotlin.jvm&#39; version &#39;1.5.30-RC&#39;\r\n    }\r\n    \r\n    group = &#39;com.example&#39;\r\n    version = &#39;0.0.1-SNAPSHOT&#39;\r\n    sourceCompatibility = &#39;11&#39;\r\n    \r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    \r\n    jar {\r\n        manifest {\r\n            attributes(\r\n                    &#39;Main-Class&#39;: &#39;com.example.temperaturetracker.TemperatureTrackerApplication&#39;\r\n            )\r\n        }\r\n    }\r\n    \r\n    dependencies {\r\n        // Security\r\n        implementation &#39;org.springframework.boot:spring-boot-starter-security:2.5.3&#39;\r\n        implementation &#39;io.jsonwebtoken:jjwt:0.9.1&#39;\r\n    \r\n        // springframework\r\n        implementation &#39;org.springframework.boot:spring-boot-starter-websocket:2.5.3&#39;\r\n        implementation &#39;org.springframework.boot:spring-boot-configuration-processor:2.5.3&#39;\r\n        implementation &#39;org.springframework.boot:spring-boot-starter-data-jpa:2.5.3&#39;\r\n        implementation &#39;org.springframework.boot:spring-boot-starter-validation:2.5.3&#39;\r\n        implementation &#39;org.springframework.boot:spring-boot-configuration-processor:2.5.3&#39;\r\n    \r\n        // Firebase\r\n        implementation &#39;com.google.firebase:firebase-admin:8.0.0&#39;\r\n    \r\n        // Database\r\n        implementation &#39;org.postgresql:postgresql:42.2.23.jre7&#39;\r\n    \r\n        // Testing\r\n        testImplementation &#39;org.springframework.boot:spring-boot-starter-test:2.5.3&#39;\r\n        implementation &#39;org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.5.30-RC&#39;\r\n    }\r\n    \r\n    test {\r\n        useJUnitPlatform()\r\n    }\r\n    compileKotlin {\r\n        kotlinOptions {\r\n            jvmTarget = &quot;11&quot;\r\n        }\r\n    }\r\n    compileTestKotlin {\r\n        kotlinOptions {\r\n            jvmTarget = &quot;11&quot;\r\n        }\r\n    }\r\n\r\nMain class:\r\n\r\n    package com.example.temperaturetracker;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    \r\n    @SpringBootApplication\r\n    public class TemperatureTrackerApplication {\r\n    \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(TemperatureTrackerApplication.class, args);\r\n        }\r\n    \r\n    }\r\n\r\nGradle:\r\n\r\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-7.1.1-bin.zip\r\n\r\nAlso hovering over `Main-Class` attribute warning is visible (not sure if this has do to anything with this error):\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6uAmf.png\r\n\r\nRunning my app normally by pressing green arrow or (Shift + F10) works normally. I hope someone would be able to solve my issue.","title":"Spring Boot jar launch error: Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError","body":"<p>Recently I ran <code>jar</code> of my <code>Spring Boot Application</code>. I've received an error: <code>no main manifest attribute, in temperaturetracker-0.0.1-SNAPSHOT-plain.jar</code>. I've updated my <code>build.gradle</code> so it would contain <code>Main-Class</code> attributes, but then I do receive an error:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/springframework/boot/SpringApplication\n        at com.example.temperaturetracker.TemperatureTrackerApplication.main(TemperatureTrackerApplication.java:15)\nCaused by: java.lang.ClassNotFoundException: org.springframework.boot.SpringApplication\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\n        ... 1 more\n</code></pre>\n<p>My <code>build.gradle</code>:</p>\n<pre><code>plugins {\n    id 'org.springframework.boot' version '2.5.3'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n    id 'java'\n    id 'org.jetbrains.kotlin.jvm' version '1.5.30-RC'\n}\n\ngroup = 'com.example'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '11'\n\nrepositories {\n    mavenCentral()\n}\n\njar {\n    manifest {\n        attributes(\n                'Main-Class': 'com.example.temperaturetracker.TemperatureTrackerApplication'\n        )\n    }\n}\n\ndependencies {\n    // Security\n    implementation 'org.springframework.boot:spring-boot-starter-security:2.5.3'\n    implementation 'io.jsonwebtoken:jjwt:0.9.1'\n\n    // springframework\n    implementation 'org.springframework.boot:spring-boot-starter-websocket:2.5.3'\n    implementation 'org.springframework.boot:spring-boot-configuration-processor:2.5.3'\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa:2.5.3'\n    implementation 'org.springframework.boot:spring-boot-starter-validation:2.5.3'\n    implementation 'org.springframework.boot:spring-boot-configuration-processor:2.5.3'\n\n    // Firebase\n    implementation 'com.google.firebase:firebase-admin:8.0.0'\n\n    // Database\n    implementation 'org.postgresql:postgresql:42.2.23.jre7'\n\n    // Testing\n    testImplementation 'org.springframework.boot:spring-boot-starter-test:2.5.3'\n    implementation 'org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.5.30-RC'\n}\n\ntest {\n    useJUnitPlatform()\n}\ncompileKotlin {\n    kotlinOptions {\n        jvmTarget = &quot;11&quot;\n    }\n}\ncompileTestKotlin {\n    kotlinOptions {\n        jvmTarget = &quot;11&quot;\n    }\n}\n</code></pre>\n<p>Main class:</p>\n<pre><code>package com.example.temperaturetracker;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class TemperatureTrackerApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(TemperatureTrackerApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>Gradle:</p>\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-7.1.1-bin.zip\n</code></pre>\n<p>Also hovering over <code>Main-Class</code> attribute warning is visible (not sure if this has do to anything with this error):</p>\n<p><a href=\"https://i.stack.imgur.com/6uAmf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6uAmf.png\" alt=\"enter image description here\" /></a></p>\n<p>Running my app normally by pressing green arrow or (Shift + F10) works normally. I hope someone would be able to solve my issue.</p>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"score":0,"creation_date":1657920734,"post_id":72999588,"comment_id":128932921,"body_markdown":"Have you considered not making your node class static?  That way the node class doesn&#39;t need to be generic.","body":"Have you considered not making your node class static?  That way the node class doesn&#39;t need to be generic."},{"owner":{"account_id":25150017,"reputation":33,"user_id":18995404,"display_name":"Placeblock"},"score":1,"creation_date":1657921600,"post_id":72999588,"comment_id":128933061,"body_markdown":"@ChengThao This doesn&#39;t change anything, the class is only defined static because its a subclass of my main class, but i will remove it from my question because it is unnecesarry","body":"@ChengThao This doesn&#39;t change anything, the class is only defined static because its a subclass of my main class, but i will remove it from my question because it is unnecesarry"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1657923412,"post_id":72999588,"comment_id":128933358,"body_markdown":"Try creating `public class Tree&lt;S&gt;` . Then, within that, you can manage instances of `class Node { S thing;` ...","body":"Try creating <code>public class Tree&lt;S&gt;</code> . Then, within that, you can manage instances of <code>class Node { S thing;</code> ..."}],"answers":[{"tags":[],"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1657923264,"creation_date":1657922845,"answer_id":73000020,"question_id":72999588,"body_markdown":"What you are trying to do is something like this\r\n```\r\npublic class Node&lt;T&gt; {\r\n\t\r\n\tprivate Node&lt;T&gt; child;\r\n\tprivate T data = null;\r\n\t\r\n\tpublic Node (T data) {\r\n\t\tthis.data = data;\r\n\t}\r\n\t\r\n\tpublic T getData() {\r\n\t\treturn data;\r\n\t}\r\n\t\r\n\tpublic Node&lt;T&gt; getChild() {\r\n\t\treturn child;\r\n\t}\r\n\r\n\tpublic void addChild(Node&lt;T&gt; child) {\r\n\t\tthis.child = child;\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\treturn &quot;this node&#39;s data: &quot; + data + &quot;; has child? &quot; + (child != null);\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tNode&lt;String&gt; root = new Node&lt;&gt; (&quot;parent&quot;);\r\n\t\tNode&lt;String&gt; child = new Node&lt;&gt;(&quot;child&quot;);\r\n\t\troot.addChild(child);\r\n\t\tSystem.out.println(root);\r\n\t\tSystem.out.println(child);\r\n\t}\r\n}\r\n```\r\nIf you were to execute this, it will output\r\n```\r\nthis node&#39;s data: parent; has child? true\r\nthis node&#39;s data: child; has child? false\r\nthis node&#39;s data: 0; has child? false\r\nthis node&#39;s data: 1; has child? false\r\n```\r\nNotice how I can create nodes of type `String` and `Integer`. However, this class is incomplete if you want to create a tree structure. The implementation of &quot;tree&quot; will depend on what kind of tree you are talking about. For example, a simple binary tree will have two children at most. Other types of trees could have more children. Also, adding nodes to a tree might require balancing the tree.\r\n\r\nNow, to your question, this answer suffices. I was able to demonstrate the use of generics to create `Node` objects of type `T`.","title":"Tree-Structure does not inherit generics","body":"<p>What you are trying to do is something like this</p>\n<pre><code>public class Node&lt;T&gt; {\n    \n    private Node&lt;T&gt; child;\n    private T data = null;\n    \n    public Node (T data) {\n        this.data = data;\n    }\n    \n    public T getData() {\n        return data;\n    }\n    \n    public Node&lt;T&gt; getChild() {\n        return child;\n    }\n\n    public void addChild(Node&lt;T&gt; child) {\n        this.child = child;\n    }\n    \n    @Override\n    public String toString() {\n        return &quot;this node's data: &quot; + data + &quot;; has child? &quot; + (child != null);\n    }\n\n    public static void main(String[] args) {\n        Node&lt;String&gt; root = new Node&lt;&gt; (&quot;parent&quot;);\n        Node&lt;String&gt; child = new Node&lt;&gt;(&quot;child&quot;);\n        root.addChild(child);\n        System.out.println(root);\n        System.out.println(child);\n    }\n}\n</code></pre>\n<p>If you were to execute this, it will output</p>\n<pre><code>this node's data: parent; has child? true\nthis node's data: child; has child? false\nthis node's data: 0; has child? false\nthis node's data: 1; has child? false\n</code></pre>\n<p>Notice how I can create nodes of type <code>String</code> and <code>Integer</code>. However, this class is incomplete if you want to create a tree structure. The implementation of &quot;tree&quot; will depend on what kind of tree you are talking about. For example, a simple binary tree will have two children at most. Other types of trees could have more children. Also, adding nodes to a tree might require balancing the tree.</p>\n<p>Now, to your question, this answer suffices. I was able to demonstrate the use of generics to create <code>Node</code> objects of type <code>T</code>.</p>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1657964160,"creation_date":1657928769,"answer_id":73000535,"question_id":72999588,"body_markdown":"The use of `&lt;&gt;` requires type inference, and the argument of the first\r\n`addChild` must be a Node&lt;String&gt;, and just passing `new Node&lt;&gt;()` would do - infering from the return type.\r\nBut chaining to `.addChild(new Node&lt;&gt;())` cannot infer anything, can only provide `Node&lt;Object&gt;`. So: one _cannot_ use `&lt;&gt;`.\r\n\r\nThe problem is (of course) that you want `addChild` to return the head of the list, and keep adding to the tail of the list.\r\n\r\nNormal practice is not to create Node instances, but just use the `S` values.\r\n\r\n    public class Node&lt;S&gt; {\r\n        private S value;\r\n        private Node&lt;S&gt; next;\r\n    \r\n        public Node(S value) {\r\n            this.value = value;\r\n        }\r\n    \r\n        public static &lt;T&gt; void print(Node&lt;T&gt; root) {\r\n            if (root == null) {\r\n                System.out.println(&quot;empty&quot;);\r\n                return;\r\n            }\r\n            System.out.print(root.value);\r\n            System.out.print(&quot; --&gt; &quot;);\r\n            print(root.next);\r\n        }\r\n    \r\n        public static &lt;T&gt; Node&lt;T&gt; addAll(T... values) {\r\n            Node&lt;T&gt; root = null;\r\n            Node&lt;T&gt; previous = null;\r\n            for (T value : values) {\r\n                Node&lt;T&gt; current = new Node&lt;&gt;(value);\r\n                if (root == null) {\r\n                    root = current;\r\n                } else {\r\n                    previous.next = current;\r\n                }\r\n                previous = current;\r\n            }\r\n            return root;\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            Node&lt;String&gt; root = Node.addAll(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;);\r\n            print(root);\r\n        }\r\n    }\r\n\r\nComparable to `Collections.addAll` or `List.of`. If you keep a `Node&lt;S&gt; last` field, you could indeed create something like:\r\n\r\n        public void addLast(S value) {\r\n            last.next = new Node&lt;&gt;(value);\r\n        }\r\n\r\nThis also shows a serious problem of the class: an empty list is not a Node.\r\nOne could use `Optional&lt;Node&lt;S&gt;&gt;` or a special constant for an empty list `EMPTY` - without value.\r\n\r\nThe normal solution is to have a container:\r\n\r\n    public class List&lt;S&gt; {\r\n        private class Node {\r\n            ...\r\n        }\r\n        private Node&lt;S&gt; root;\r\n        private Node&lt;S&gt; last;\r\n        private int size;\r\n\r\n        public List&lt;S&gt; addLast(S value) {\r\n            Node&lt;S&gt; current = new Node&lt;&gt;(value);\r\n            if (root == null) {\r\n                root = current;\r\n                last = current;\r\n            } else {\r\n                last.next = current;\r\n            }\r\n            last = current;\r\n            ++size;\r\n            return this;\r\n        }\r\n\r\n        private int size() {\r\n            return size;\r\n        }\r\n\r\n        ...\r\n    }\r\n\r\nNow everything fits.\r\n\r\n    List&lt;String&gt; nodes = new List&lt;&gt;()\r\n        .addLast(&quot;a&quot;)\r\n        .addLast(&quot;b&quot;)\r\n        .addLast(&quot;c&quot;)\r\n        .addLast(&quot;d&quot;);\r\n\r\n------------------------\r\n***After feedback, when wanting `Node` references.***\r\n\r\nThen discard chaining, and make Node public again.\r\n\r\n        public Node&lt;S&gt; addLast() {\r\n            addLast(null);\r\n        }\r\n        public Node&lt;S&gt; addLast(S value) {\r\n            Node&lt;S&gt; current = new Node&lt;&gt;(value);\r\n            if (root == null) {\r\n                root = current;\r\n                last = current;\r\n            } else {\r\n                last.next = current;\r\n            }\r\n            last = current;\r\n            ++size;\r\n            return last;\r\n        }\r\n\r\n    List&lt;String&gt; nodes = new List&lt;&gt;()\r\n    Node&lt;String&gt; a = nodes.addLast();\r\n    Node&lt;String&gt; b = nodes.addLast();\r\n    var c = nodes.addLast();\r\n    var d = nodes.addLast();\r\n\r\nOne could use `var` for shortness.","title":"Tree-Structure does not inherit generics","body":"<p>The use of <code>&lt;&gt;</code> requires type inference, and the argument of the first\n<code>addChild</code> must be a Node, and just passing <code>new Node&lt;&gt;()</code> would do - infering from the return type.\nBut chaining to <code>.addChild(new Node&lt;&gt;())</code> cannot infer anything, can only provide <code>Node&lt;Object&gt;</code>. So: one <em>cannot</em> use <code>&lt;&gt;</code>.</p>\n<p>The problem is (of course) that you want <code>addChild</code> to return the head of the list, and keep adding to the tail of the list.</p>\n<p>Normal practice is not to create Node instances, but just use the <code>S</code> values.</p>\n<pre><code>public class Node&lt;S&gt; {\n    private S value;\n    private Node&lt;S&gt; next;\n\n    public Node(S value) {\n        this.value = value;\n    }\n\n    public static &lt;T&gt; void print(Node&lt;T&gt; root) {\n        if (root == null) {\n            System.out.println(&quot;empty&quot;);\n            return;\n        }\n        System.out.print(root.value);\n        System.out.print(&quot; --&gt; &quot;);\n        print(root.next);\n    }\n\n    public static &lt;T&gt; Node&lt;T&gt; addAll(T... values) {\n        Node&lt;T&gt; root = null;\n        Node&lt;T&gt; previous = null;\n        for (T value : values) {\n            Node&lt;T&gt; current = new Node&lt;&gt;(value);\n            if (root == null) {\n                root = current;\n            } else {\n                previous.next = current;\n            }\n            previous = current;\n        }\n        return root;\n    }\n\n    public static void main(String[] args) {\n        Node&lt;String&gt; root = Node.addAll(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;);\n        print(root);\n    }\n}\n</code></pre>\n<p>Comparable to <code>Collections.addAll</code> or <code>List.of</code>. If you keep a <code>Node&lt;S&gt; last</code> field, you could indeed create something like:</p>\n<pre><code>    public void addLast(S value) {\n        last.next = new Node&lt;&gt;(value);\n    }\n</code></pre>\n<p>This also shows a serious problem of the class: an empty list is not a Node.\nOne could use <code>Optional&lt;Node&lt;S&gt;&gt;</code> or a special constant for an empty list <code>EMPTY</code> - without value.</p>\n<p>The normal solution is to have a container:</p>\n<pre><code>public class List&lt;S&gt; {\n    private class Node {\n        ...\n    }\n    private Node&lt;S&gt; root;\n    private Node&lt;S&gt; last;\n    private int size;\n\n    public List&lt;S&gt; addLast(S value) {\n        Node&lt;S&gt; current = new Node&lt;&gt;(value);\n        if (root == null) {\n            root = current;\n            last = current;\n        } else {\n            last.next = current;\n        }\n        last = current;\n        ++size;\n        return this;\n    }\n\n    private int size() {\n        return size;\n    }\n\n    ...\n}\n</code></pre>\n<p>Now everything fits.</p>\n<pre><code>List&lt;String&gt; nodes = new List&lt;&gt;()\n    .addLast(&quot;a&quot;)\n    .addLast(&quot;b&quot;)\n    .addLast(&quot;c&quot;)\n    .addLast(&quot;d&quot;);\n</code></pre>\n<hr />\n<p><em><strong>After feedback, when wanting <code>Node</code> references.</strong></em></p>\n<p>Then discard chaining, and make Node public again.</p>\n<pre><code>    public Node&lt;S&gt; addLast() {\n        addLast(null);\n    }\n    public Node&lt;S&gt; addLast(S value) {\n        Node&lt;S&gt; current = new Node&lt;&gt;(value);\n        if (root == null) {\n            root = current;\n            last = current;\n        } else {\n            last.next = current;\n        }\n        last = current;\n        ++size;\n        return last;\n    }\n\nList&lt;String&gt; nodes = new List&lt;&gt;()\nNode&lt;String&gt; a = nodes.addLast();\nNode&lt;String&gt; b = nodes.addLast();\nvar c = nodes.addLast();\nvar d = nodes.addLast();\n</code></pre>\n<p>One could use <code>var</code> for shortness.</p>\n"}],"owner":{"account_id":25150017,"reputation":33,"user_id":18995404,"display_name":"Placeblock"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73000535,"answer_count":2,"score":1,"last_activity_date":1657964160,"creation_date":1657919123,"question_id":72999588,"body_markdown":"My goal is to create a tree-like object structure.\r\n\r\nFor this i created a class named Node (I removed the implementation because the problem still persists without it):\r\n```\r\npublic class Node&lt;S&gt; {\r\n    public Node&lt;S&gt; addChild(Node&lt;S&gt; node) {\r\n        return this;\r\n    }\r\n}\r\n\r\n```\r\n\r\nImportant to know is that i want to define the generic type S only in the root node, all child nodes should automatically inherit from the root node.\r\n\r\nSomething like this:\r\n```\r\nnew Node&lt;String&gt;().addChild(\r\n    new Node&lt;&gt;().addChild(\r\n        new Node&lt;&gt;()\r\n    )\r\n)\r\n```\r\nI restricted the addChild method to only accept Nodes with the same generic type S,\r\nso as far as i know my child node should know that it&#39;s generic type S has to be (in this example) String. However it seems like the generic type S gets lost after instantiating a new Node, because it gives me the following Exception:\r\n```\r\nerror: incompatible types: Node&lt;Object&gt; cannot be converted to Node&lt;String&gt;\r\n```\r\n\r\n","title":"Tree-Structure does not inherit generics","body":"<p>My goal is to create a tree-like object structure.</p>\n<p>For this i created a class named Node (I removed the implementation because the problem still persists without it):</p>\n<pre><code>public class Node&lt;S&gt; {\n    public Node&lt;S&gt; addChild(Node&lt;S&gt; node) {\n        return this;\n    }\n}\n\n</code></pre>\n<p>Important to know is that i want to define the generic type S only in the root node, all child nodes should automatically inherit from the root node.</p>\n<p>Something like this:</p>\n<pre><code>new Node&lt;String&gt;().addChild(\n    new Node&lt;&gt;().addChild(\n        new Node&lt;&gt;()\n    )\n)\n</code></pre>\n<p>I restricted the addChild method to only accept Nodes with the same generic type S,\nso as far as i know my child node should know that it's generic type S has to be (in this example) String. However it seems like the generic type S gets lost after instantiating a new Node, because it gives me the following Exception:</p>\n<pre><code>error: incompatible types: Node&lt;Object&gt; cannot be converted to Node&lt;String&gt;\n</code></pre>\n"},{"tags":["java","android","android-studio"],"answers":[{"tags":[],"owner":{"account_id":22755735,"reputation":555,"user_id":16915219,"display_name":"JumperBot_"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657963780,"creation_date":1657963780,"answer_id":73003064,"question_id":73002941,"body_markdown":"On this line:\r\n\r\n```java\r\ninputNoteText.setText(result.get(0));\r\n```\r\n\r\nIt simply resets the text and then replaces it with your input.\r\n\r\nAll you have to do is to store the text already inside of it and then append the input.\r\n\r\nSomething like this:\r\n\r\n```java\r\ninputNoteText.setText(inputNoteText.getText()+result.get(0));\r\n```\r\n\r\nYour new full code:\r\n\r\n```java\r\n//This is my speech to text code\r\nlayoutMiscellaneous.findViewById(R.id.speechtotext).setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);\r\n                intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,\r\n                        RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);\r\n                intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE, Locale.getDefault());\r\n                intent.putExtra(RecognizerIntent.EXTRA_PROMPT,\r\n                        &quot;Hi Speak Something&quot;);\r\n               try {\r\n                   startActivityForResult(intent, 33333);\r\n               } catch (ActivityNotFoundException e) {\r\n                   Toast.makeText(CreateNoteActivity.this, e.getMessage(), Toast.LENGTH_SHORT).show();\r\n               }\r\n            }\r\n        });\r\n\r\n\r\n\r\n@Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if (requestCode == REQUEST_CODE_SELECT_IMAGE &amp;&amp; resultCode == RESULT_OK) {\r\n            if (data != null) {\r\n                Uri selectedImageUri = data.getData();\r\n                if(selectedImageUri != null) {\r\n                    try {\r\n\r\n                        InputStream inputStream = getContentResolver().openInputStream(selectedImageUri);\r\n                        Bitmap bitmap = BitmapFactory.decodeStream(inputStream);\r\n                        imageNote.setImageBitmap(bitmap);\r\n                        imageNote.setVisibility(View.VISIBLE);\r\n                        findViewById(R.id.imageRemoveImage).setVisibility(View.VISIBLE);\r\n                        selectedImagePath = getPathFromUri(selectedImageUri);\r\n\r\n                    } catch (Exception exception) {\r\n                        Toast.makeText(this, exception.getMessage(), Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        if (requestCode == 33333 &amp;&amp; resultCode == RESULT_OK &amp;&amp; null != data){\r\n            ArrayList&lt;String&gt; result = data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);\r\n            inputNoteText.setText(inputNoteText.getText()+result.get(0));\r\n        }\r\n    }\r\n```","title":"I am getting problem in speech recognition in android","body":"<p>On this line:</p>\n<pre class=\"lang-java prettyprint-override\"><code>inputNoteText.setText(result.get(0));\n</code></pre>\n<p>It simply resets the text and then replaces it with your input.</p>\n<p>All you have to do is to store the text already inside of it and then append the input.</p>\n<p>Something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>inputNoteText.setText(inputNoteText.getText()+result.get(0));\n</code></pre>\n<p>Your new full code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>//This is my speech to text code\nlayoutMiscellaneous.findViewById(R.id.speechtotext).setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);\n                intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,\n                        RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);\n                intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE, Locale.getDefault());\n                intent.putExtra(RecognizerIntent.EXTRA_PROMPT,\n                        &quot;Hi Speak Something&quot;);\n               try {\n                   startActivityForResult(intent, 33333);\n               } catch (ActivityNotFoundException e) {\n                   Toast.makeText(CreateNoteActivity.this, e.getMessage(), Toast.LENGTH_SHORT).show();\n               }\n            }\n        });\n\n\n\n@Override\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n        if (requestCode == REQUEST_CODE_SELECT_IMAGE &amp;&amp; resultCode == RESULT_OK) {\n            if (data != null) {\n                Uri selectedImageUri = data.getData();\n                if(selectedImageUri != null) {\n                    try {\n\n                        InputStream inputStream = getContentResolver().openInputStream(selectedImageUri);\n                        Bitmap bitmap = BitmapFactory.decodeStream(inputStream);\n                        imageNote.setImageBitmap(bitmap);\n                        imageNote.setVisibility(View.VISIBLE);\n                        findViewById(R.id.imageRemoveImage).setVisibility(View.VISIBLE);\n                        selectedImagePath = getPathFromUri(selectedImageUri);\n\n                    } catch (Exception exception) {\n                        Toast.makeText(this, exception.getMessage(), Toast.LENGTH_SHORT).show();\n                    }\n                }\n            }\n        }\n\n        if (requestCode == 33333 &amp;&amp; resultCode == RESULT_OK &amp;&amp; null != data){\n            ArrayList&lt;String&gt; result = data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);\n            inputNoteText.setText(inputNoteText.getText()+result.get(0));\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":25822113,"reputation":21,"user_id":19561008,"display_name":"Pushkar Jain"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1657963780,"creation_date":1657962641,"question_id":73002941,"body_markdown":"I know it is silly question as I am new I am working on notes app I have add speech recognition feature with simply adds text into textview whatever we speak. It is working perfectly but the problem is that when I use second time in same the previous text get deleted and gets new text. I need to get the old text be like that and new text to add after that.\r\n\r\n\r\n    This is my speech to text code\r\n    layoutMiscellaneous.findViewById(R.id.speechtotext).setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);\r\n                    intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,\r\n                            RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);\r\n                    intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE, Locale.getDefault());\r\n                    intent.putExtra(RecognizerIntent.EXTRA_PROMPT,\r\n                            &quot;Hi Speak Something&quot;);\r\n                   try {\r\n                       startActivityForResult(intent, 33333);\r\n                   } catch (ActivityNotFoundException e) {\r\n                       Toast.makeText(CreateNoteActivity.this, e.getMessage(), Toast.LENGTH_SHORT).show();\r\n                   }\r\n                }\r\n            });\r\n\r\n \r\n\r\n    @Override\r\n        protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n            super.onActivityResult(requestCode, resultCode, data);\r\n            if (requestCode == REQUEST_CODE_SELECT_IMAGE &amp;&amp; resultCode == RESULT_OK) {\r\n                if (data != null) {\r\n                    Uri selectedImageUri = data.getData();\r\n                    if(selectedImageUri != null) {\r\n                        try {\r\n    \r\n                            InputStream inputStream = getContentResolver().openInputStream(selectedImageUri);\r\n                            Bitmap bitmap = BitmapFactory.decodeStream(inputStream);\r\n                            imageNote.setImageBitmap(bitmap);\r\n                            imageNote.setVisibility(View.VISIBLE);\r\n                            findViewById(R.id.imageRemoveImage).setVisibility(View.VISIBLE);\r\n                            selectedImagePath = getPathFromUri(selectedImageUri);\r\n    \r\n                        } catch (Exception exception) {\r\n                            Toast.makeText(this, exception.getMessage(), Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n    \r\n            if (requestCode == 33333 &amp;&amp; resultCode == RESULT_OK &amp;&amp; null != data){\r\n                ArrayList&lt;String&gt; result = data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);\r\n                inputNoteText.setText(result.get(0));\r\n            }\r\n        }","title":"I am getting problem in speech recognition in android","body":"<p>I know it is silly question as I am new I am working on notes app I have add speech recognition feature with simply adds text into textview whatever we speak. It is working perfectly but the problem is that when I use second time in same the previous text get deleted and gets new text. I need to get the old text be like that and new text to add after that.</p>\n<pre><code>This is my speech to text code\nlayoutMiscellaneous.findViewById(R.id.speechtotext).setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);\n                intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,\n                        RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);\n                intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE, Locale.getDefault());\n                intent.putExtra(RecognizerIntent.EXTRA_PROMPT,\n                        &quot;Hi Speak Something&quot;);\n               try {\n                   startActivityForResult(intent, 33333);\n               } catch (ActivityNotFoundException e) {\n                   Toast.makeText(CreateNoteActivity.this, e.getMessage(), Toast.LENGTH_SHORT).show();\n               }\n            }\n        });\n\n\n\n@Override\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n        if (requestCode == REQUEST_CODE_SELECT_IMAGE &amp;&amp; resultCode == RESULT_OK) {\n            if (data != null) {\n                Uri selectedImageUri = data.getData();\n                if(selectedImageUri != null) {\n                    try {\n\n                        InputStream inputStream = getContentResolver().openInputStream(selectedImageUri);\n                        Bitmap bitmap = BitmapFactory.decodeStream(inputStream);\n                        imageNote.setImageBitmap(bitmap);\n                        imageNote.setVisibility(View.VISIBLE);\n                        findViewById(R.id.imageRemoveImage).setVisibility(View.VISIBLE);\n                        selectedImagePath = getPathFromUri(selectedImageUri);\n\n                    } catch (Exception exception) {\n                        Toast.makeText(this, exception.getMessage(), Toast.LENGTH_SHORT).show();\n                    }\n                }\n            }\n        }\n\n        if (requestCode == 33333 &amp;&amp; resultCode == RESULT_OK &amp;&amp; null != data){\n            ArrayList&lt;String&gt; result = data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);\n            inputNoteText.setText(result.get(0));\n        }\n    }\n</code></pre>\n"},{"tags":["java","xml","text","tabular","docx4j"],"comments":[{"owner":{"account_id":4359423,"reputation":1860,"user_id":3557027,"display_name":"Rabbit Guy"},"score":0,"creation_date":1499365680,"post_id":44956216,"comment_id":76888300,"body_markdown":"Are you tied to docx4j?","body":"Are you tied to docx4j?"},{"owner":{"account_id":5279233,"reputation":225,"user_id":4215155,"display_name":"SuperGoA"},"score":0,"creation_date":1499366044,"post_id":44956216,"comment_id":76888509,"body_markdown":"@RabbitGuy Yes I&#39;m tied","body":"@RabbitGuy Yes I&#39;m tied"},{"owner":{"account_id":30580,"reputation":15467,"user_id":1031689,"accept_rate":67,"display_name":"JasonPlutext"},"score":5,"creation_date":1499367712,"post_id":44956216,"comment_id":76889377,"body_markdown":"Tr is table row.  tr.getContent will give you a list of tc (table cells).  Each tc  has in turn, getContent, which in this case contains P (paragraph) objects. In those are R (run) objects, which finally contain text runs.   That&#39;s what the OpenXML typically looks like.  You can see it by XmlUtils.marshallToString(tbl).","body":"Tr is table row.  tr.getContent will give you a list of tc (table cells).  Each tc  has in turn, getContent, which in this case contains P (paragraph) objects. In those are R (run) objects, which finally contain text runs.   That&#39;s what the OpenXML typically looks like.  You can see it by XmlUtils.marshallToString(tbl)."},{"owner":{"account_id":5279233,"reputation":225,"user_id":4215155,"display_name":"SuperGoA"},"score":0,"creation_date":1499368447,"post_id":44956216,"comment_id":76889762,"body_markdown":"@JasonPlutext Thank you so much! So I assume I should take an approach like [this](https://stackoverflow.com/questions/24755952/how-to-read-word-document-and-get-parts-of-it-with-all-styles-using-docx4j)?","body":"@JasonPlutext Thank you so much! So I assume I should take an approach like <a href=\"https://stackoverflow.com/questions/24755952/how-to-read-word-document-and-get-parts-of-it-with-all-styles-using-docx4j\">this</a>?"},{"owner":{"account_id":30580,"reputation":15467,"user_id":1031689,"accept_rate":67,"display_name":"JasonPlutext"},"score":0,"creation_date":1499380246,"post_id":44956216,"comment_id":76895129,"body_markdown":"Similar, but the referenced method DocxUtility.getDocxUtility is not part of docx4j.  You can use getContents instead.","body":"Similar, but the referenced method DocxUtility.getDocxUtility is not part of docx4j.  You can use getContents instead."},{"owner":{"account_id":536581,"reputation":3624,"user_id":905494,"display_name":"tksilicon"},"score":0,"creation_date":1657963597,"post_id":44956216,"comment_id":128938015,"body_markdown":"@JasonPlutext please put your comment as answer so we can upvote. This answer saves lives.","body":"@JasonPlutext please put your comment as answer so we can upvote. This answer saves lives."}],"answers":[{"tags":[],"owner":{"account_id":13352626,"reputation":335,"user_id":9637371,"display_name":"Bestows In Constructing"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651843017,"creation_date":1651843017,"answer_id":72142097,"question_id":44956216,"body_markdown":"Work for me\r\n\r\n        TableFinder finder = new TableFinder();\r\n        finder.walkJAXBElements(documentPart.getContent());\r\n","title":"Cannot get text from table using docx4j","body":"<p>Work for me</p>\n<pre><code>    TableFinder finder = new TableFinder();\n    finder.walkJAXBElements(documentPart.getContent());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":536581,"reputation":3624,"user_id":905494,"display_name":"tksilicon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657963742,"creation_date":1657963742,"answer_id":73003062,"question_id":44956216,"body_markdown":"For those who will be stuck on this question. For visibility, the comment by @JasonPlutext is the answer. Tr - Tc - P - R - Text. Table row, to Table cell to Paragraph and R and then add text. ","title":"Cannot get text from table using docx4j","body":"<p>For those who will be stuck on this question. For visibility, the comment by @JasonPlutext is the answer. Tr - Tc - P - R - Text. Table row, to Table cell to Paragraph and R and then add text.</p>\n"}],"owner":{"account_id":5279233,"reputation":225,"user_id":4215155,"display_name":"SuperGoA"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1800,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1657963742,"creation_date":1499364958,"question_id":44956216,"body_markdown":"**I&#39;m simply trying to output the data found in tables**, however I have only managed to print out memory locations and other obj info. Here I&#39;m using a tablefinder to locate all of my tables in a word doc then traversing through them. I&#39;m just so unbelievably stuck how to print out the data contained in these tables. Below is an image of the Text.docx I am working with along with a snippet of the code. To be clear I&#39;m not sure if I should accessing a table row (Tr) as this code snippet shows, or the parent Tbl object to print out the text contained within the table. In this case, I just want it to print &quot;I&quot;, &quot;Just&quot;, &quot;Want&quot;... etc. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n        WordprocessingMLPackage wordMLPackage = WordprocessingMLPackage.load(new File(&quot;C:\\\\Users\\\\1120248\\\\Test\\\\Test.docx&quot;));\r\n\t\tMainDocumentPart documentPart = wordMLPackage.getMainDocumentPart();\r\n\r\n\t\tTableFinder finder = new TableFinder();\r\n\t\tnew TraversalUtil(documentPart.getContent(), finder);\r\n\t\t\r\n\t\tSystem.out.println(&quot;Found &quot; + finder.tblList.size()  + &quot;tables&quot;);\r\n\t\t\r\n\t\tfor (Object o : finder.tblList) {\r\n\t\t\t\t\t\t\r\n\t\t\tObject o2 = XmlUtils.unwrap(o);\t\t\r\n\t\t\t\r\n\t\t\tif (o2 instanceof org.docx4j.wml.Tbl) {\r\n\t\t\t\t\r\n\t\t\t\tTbl tbl = (Tbl)o2;\r\n\t\t\t\tTr t = (Tr)tbl.getContent().get(0);\r\n\r\n\t\t\t\tSystem.out.println(t.getContent());\r\n\t\t\t\tSystem.out.println(t.toString());\r\n\t\t\t\tSystem.out.println(XmlUtils.unwrap(t.getContent().get(0)));\r\n            }\r\n        }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/78mlS.png\r\nThis is the output produced by this setup:\r\n\r\n[javax.xml.bind.JAXBElement@a146b11, javax.xml.bind.JAXBElement@f438904, javax.xml.bind.JAXBElement@4ed5a1b0, javax.xml.bind.JAXBElement@18d003cd, javax.xml.bind.JAXBElement@3135bf25, javax.xml.bind.JAXBElement@22ad1bae]\r\n\r\norg.docx4j.wml.Tr@4116f66a\r\n\r\norg.docx4j.wml.Tc@59c04bee","title":"Cannot get text from table using docx4j","body":"<p><strong>I'm simply trying to output the data found in tables</strong>, however I have only managed to print out memory locations and other obj info. Here I'm using a tablefinder to locate all of my tables in a word doc then traversing through them. I'm just so unbelievably stuck how to print out the data contained in these tables. Below is an image of the Text.docx I am working with along with a snippet of the code. To be clear I'm not sure if I should accessing a table row (Tr) as this code snippet shows, or the parent Tbl object to print out the text contained within the table. In this case, I just want it to print \"I\", \"Just\", \"Want\"... etc. </p>\n\n<p><a href=\"https://i.stack.imgur.com/78mlS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/78mlS.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>    WordprocessingMLPackage wordMLPackage = WordprocessingMLPackage.load(new File(\"C:\\\\Users\\\\1120248\\\\Test\\\\Test.docx\"));\n    MainDocumentPart documentPart = wordMLPackage.getMainDocumentPart();\n\n    TableFinder finder = new TableFinder();\n    new TraversalUtil(documentPart.getContent(), finder);\n\n    System.out.println(\"Found \" + finder.tblList.size()  + \"tables\");\n\n    for (Object o : finder.tblList) {\n\n        Object o2 = XmlUtils.unwrap(o);     \n\n        if (o2 instanceof org.docx4j.wml.Tbl) {\n\n            Tbl tbl = (Tbl)o2;\n            Tr t = (Tr)tbl.getContent().get(0);\n\n            System.out.println(t.getContent());\n            System.out.println(t.toString());\n            System.out.println(XmlUtils.unwrap(t.getContent().get(0)));\n        }\n    }\n</code></pre>\n\n<p>This is the output produced by this setup:</p>\n\n<p>[javax.xml.bind.JAXBElement@a146b11, javax.xml.bind.JAXBElement@f438904, javax.xml.bind.JAXBElement@4ed5a1b0, javax.xml.bind.JAXBElement@18d003cd, javax.xml.bind.JAXBElement@3135bf25, javax.xml.bind.JAXBElement@22ad1bae]</p>\n\n<p>org.docx4j.wml.Tr@4116f66a</p>\n\n<p>org.docx4j.wml.Tc@59c04bee</p>\n"},{"tags":["java","list","hashmap","java-stream"],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1657933295,"creation_date":1657924686,"answer_id":73000198,"question_id":73000045,"body_markdown":"&lt;h1&gt;Use the Power of Objects&lt;/h1&gt;\r\n\r\nThe usage of maps in your code is an example of abuse of collections. Storing the data in such a way is inconvenient and error-prone.\r\n\r\nInstead of trying to substitute a domain object with a `Map`, you need to define a `class` (or a `record`).\r\n\r\nIt&#39;ll give you many advantages that you&#39;re depriving yourself by using maps:\r\n* Ability to use the proper type for every property instead of keeping everything as strings;\r\n* No need to perform parsing;\r\n* Self-explanatory method names instead of hard-coded string keys, and your code will not fail because you&#39;ve misspelled a key;\r\n* The code is easier to read and maintain.\r\n\r\nFor the sake of simplicity and conciseness, I&#39;ll go with a Java 16 [*record*](https://docs.oracle.com/en/java/javase/18/language/records.html):\r\n\r\n```\r\npublic record Person(String name, int age) {}\r\n```\r\n\r\nAnd now we have two lists of `Person` instead of two lists of maps.\r\n\r\nTo implement the logic when we&#39;re starting with examining the first list and only if a result was not found we proceed by iterating through the second list, we can make use of the Java 9 method [`or()`](https://docs.oracle.com/en/java/javase/17/docs/api//java.base/java/util/Optional.html#or(java.util.function.Supplier)) defined by `Optional`. While invoked on the optional object containing a value, `or()` returns the same optional, otherwise it&#39;ll return an optional produced by a supplier provided as an argument.\r\n\r\nFor convenience, we can define a method that takes a `List&lt;Person&gt;` and the target `age` and returns an optional result.\r\n\r\n    public static Optional&lt;Person&gt; getPersonByAge(List&lt;Person&gt; people, int age) {\r\n        return people.stream().filter(pers -&gt; pers.age() == age).findFirst();\r\n    }\r\n\r\nWe can make this method reusable by making it generic. So it would expect a `List&lt;T&gt;` and a `Predicate&lt;T&gt;` as its arguments.\r\n\r\n    public static &lt;T&gt; Optional&lt;T&gt; getPersonByAge(List&lt;T&gt; people,\r\n                                                 Predicate&lt;T&gt; predicate) {\r\n        \r\n        return people.stream().filter(predicate).findFirst();\r\n    }\r\n\r\nAnd that how we can apply it:\r\n\r\n```\r\nList&lt;Person&gt; list1 = List.of(new Person(&quot;john&quot;, 30), new Person(&quot;marry&quot;, 31));\r\nList&lt;Person&gt; list2 = List.of(new Person(&quot;mike&quot;, 40), new Person(&quot;terry&quot;, 41));\r\n        \r\nPredicate&lt;Person&gt; age40 = pers -&gt; pers.age() == 40;\r\n    \r\nString name = getPersonByAge(list1, age40)\r\n    .or(() -&gt; getPersonByAge(list2, age40))\r\n    .orElseThrow()\r\n    .name();\r\n    \r\nSystem.out.println(name);\r\n```\r\n*Output:*\r\n```\r\nmike\r\n```\r\n[*A link to Online Demo*](https://www.jdoodle.com/ia/tfI)","title":"Java Streams filter two Lists of Maps using ifPresentOrElse()","body":"<h1>Use the Power of Objects</h1>\n<p>The usage of maps in your code is an example of abuse of collections. Storing the data in such a way is inconvenient and error-prone.</p>\n<p>Instead of trying to substitute a domain object with a <code>Map</code>, you need to define a <code>class</code> (or a <code>record</code>).</p>\n<p>It'll give you many advantages that you're depriving yourself by using maps:</p>\n<ul>\n<li>Ability to use the proper type for every property instead of keeping everything as strings;</li>\n<li>No need to perform parsing;</li>\n<li>Self-explanatory method names instead of hard-coded string keys, and your code will not fail because you've misspelled a key;</li>\n<li>The code is easier to read and maintain.</li>\n</ul>\n<p>For the sake of simplicity and conciseness, I'll go with a Java 16 <a href=\"https://docs.oracle.com/en/java/javase/18/language/records.html\" rel=\"nofollow noreferrer\"><em>record</em></a>:</p>\n<pre><code>public record Person(String name, int age) {}\n</code></pre>\n<p>And now we have two lists of <code>Person</code> instead of two lists of maps.</p>\n<p>To implement the logic when we're starting with examining the first list and only if a result was not found we proceed by iterating through the second list, we can make use of the Java 9 method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api//java.base/java/util/Optional.html#or(java.util.function.Supplier)\" rel=\"nofollow noreferrer\"><code>or()</code></a> defined by <code>Optional</code>. While invoked on the optional object containing a value, <code>or()</code> returns the same optional, otherwise it'll return an optional produced by a supplier provided as an argument.</p>\n<p>For convenience, we can define a method that takes a <code>List&lt;Person&gt;</code> and the target <code>age</code> and returns an optional result.</p>\n<pre><code>public static Optional&lt;Person&gt; getPersonByAge(List&lt;Person&gt; people, int age) {\n    return people.stream().filter(pers -&gt; pers.age() == age).findFirst();\n}\n</code></pre>\n<p>We can make this method reusable by making it generic. So it would expect a <code>List&lt;T&gt;</code> and a <code>Predicate&lt;T&gt;</code> as its arguments.</p>\n<pre><code>public static &lt;T&gt; Optional&lt;T&gt; getPersonByAge(List&lt;T&gt; people,\n                                             Predicate&lt;T&gt; predicate) {\n    \n    return people.stream().filter(predicate).findFirst();\n}\n</code></pre>\n<p>And that how we can apply it:</p>\n<pre><code>List&lt;Person&gt; list1 = List.of(new Person(&quot;john&quot;, 30), new Person(&quot;marry&quot;, 31));\nList&lt;Person&gt; list2 = List.of(new Person(&quot;mike&quot;, 40), new Person(&quot;terry&quot;, 41));\n        \nPredicate&lt;Person&gt; age40 = pers -&gt; pers.age() == 40;\n    \nString name = getPersonByAge(list1, age40)\n    .or(() -&gt; getPersonByAge(list2, age40))\n    .orElseThrow()\n    .name();\n    \nSystem.out.println(name);\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>mike\n</code></pre>\n<p><a href=\"https://www.jdoodle.com/ia/tfI\" rel=\"nofollow noreferrer\"><em>A link to Online Demo</em></a></p>\n"},{"tags":[],"owner":{"account_id":12536069,"reputation":480,"user_id":9122719,"display_name":"Tal Glik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657927696,"creation_date":1657927696,"answer_id":73000464,"question_id":73000045,"body_markdown":"If you want to use the map so you can:\r\n\r\n    Optional&lt;String&gt; nameByAge = getNameByAge(list1, &quot;40&quot;).or(()-&gt;getNameByAge(list2, &quot;40&quot;));\r\n\r\n    public static Optional&lt;String&gt; getNameByAge(List&lt;Map&lt;String, String&gt;&gt; people, String age) {\r\n            return people.stream().filter(person -&gt; person.get(&quot;age&quot;).equals(age)).findAny().map(person-&gt; person.get(&quot;name&quot;));\r\n        }","title":"Java Streams filter two Lists of Maps using ifPresentOrElse()","body":"<p>If you want to use the map so you can:</p>\n<pre><code>Optional&lt;String&gt; nameByAge = getNameByAge(list1, &quot;40&quot;).or(()-&gt;getNameByAge(list2, &quot;40&quot;));\n\npublic static Optional&lt;String&gt; getNameByAge(List&lt;Map&lt;String, String&gt;&gt; people, String age) {\n        return people.stream().filter(person -&gt; person.get(&quot;age&quot;).equals(age)).findAny().map(person-&gt; person.get(&quot;name&quot;));\n    }\n</code></pre>\n"}],"owner":{"account_id":14358051,"reputation":103,"user_id":10371303,"display_name":"stackmj18"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":267,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1657963739,"creation_date":1657923093,"question_id":73000045,"body_markdown":"I have two lists:\r\n\r\n```\r\nMap&lt;String, String&gt; map1 = new HashMap&lt;&gt;();\r\n\r\nmap1.put(&quot;age&quot;, &quot;30&quot;);\r\nmap1.put(&quot;name&quot;, &quot;john&quot;);\r\n\r\nMap&lt;String, String&gt; map2 = new HashMap&lt;&gt;();\r\nmap1.put(&quot;age&quot;, &quot;31&quot;);\r\nmap1.put(&quot;name&quot;, &quot;marry&quot;);\r\n\r\nList&lt;Map&lt;String, String&gt;&gt; list1 = new ArrayList&lt;&gt;();\r\nlist1.add(map1);\r\nlist1.add(map2);\r\n\r\nMap&lt;String, String&gt; map3 = new HashMap&lt;&gt;();\r\nmap1.put(&quot;age&quot;, &quot;40&quot;);\r\nmap1.put(&quot;name&quot;, &quot;mike&quot;);\r\n\r\nMap&lt;String, String&gt; map4 = new HashMap&lt;&gt;();\r\nmap1.put(&quot;age&quot;, &quot;41&quot;);\r\nmap1.put(&quot;name&quot;, &quot;terry&quot;);\r\n\r\nList&lt;Map&lt;String, String&gt;&gt; list2 = new ArrayList&lt;&gt;();\r\nlist1.add(map3);\r\nlist1.add(map4);\r\n```\r\n\r\nI want to iterate through the `list1` and find if *age* is found. If age is found, it should return the *name*. \r\n\r\nIf the target *age* is not found in the `list1`, I want to iterate through the `list2`, and if the result was found return the *name*.\r\n\r\nI&#39;m thinking of something along these lines:\r\n\r\n```\r\nlist1.stream()\r\n    .filter(a -&gt; a.get(&quot;age&quot;).equals(&quot;40&quot;))\r\n    .findAny()\r\n    .ifPresentOrElse()\r\n```\r\n\r\nHow can I achieve this using streams?\r\n\r\n","title":"Java Streams filter two Lists of Maps using ifPresentOrElse()","body":"<p>I have two lists:</p>\n<pre><code>Map&lt;String, String&gt; map1 = new HashMap&lt;&gt;();\n\nmap1.put(&quot;age&quot;, &quot;30&quot;);\nmap1.put(&quot;name&quot;, &quot;john&quot;);\n\nMap&lt;String, String&gt; map2 = new HashMap&lt;&gt;();\nmap1.put(&quot;age&quot;, &quot;31&quot;);\nmap1.put(&quot;name&quot;, &quot;marry&quot;);\n\nList&lt;Map&lt;String, String&gt;&gt; list1 = new ArrayList&lt;&gt;();\nlist1.add(map1);\nlist1.add(map2);\n\nMap&lt;String, String&gt; map3 = new HashMap&lt;&gt;();\nmap1.put(&quot;age&quot;, &quot;40&quot;);\nmap1.put(&quot;name&quot;, &quot;mike&quot;);\n\nMap&lt;String, String&gt; map4 = new HashMap&lt;&gt;();\nmap1.put(&quot;age&quot;, &quot;41&quot;);\nmap1.put(&quot;name&quot;, &quot;terry&quot;);\n\nList&lt;Map&lt;String, String&gt;&gt; list2 = new ArrayList&lt;&gt;();\nlist1.add(map3);\nlist1.add(map4);\n</code></pre>\n<p>I want to iterate through the <code>list1</code> and find if <em>age</em> is found. If age is found, it should return the <em>name</em>.</p>\n<p>If the target <em>age</em> is not found in the <code>list1</code>, I want to iterate through the <code>list2</code>, and if the result was found return the <em>name</em>.</p>\n<p>I'm thinking of something along these lines:</p>\n<pre><code>list1.stream()\n    .filter(a -&gt; a.get(&quot;age&quot;).equals(&quot;40&quot;))\n    .findAny()\n    .ifPresentOrElse()\n</code></pre>\n<p>How can I achieve this using streams?</p>\n"},{"tags":["java","hashmap","duplicates"],"comments":[{"owner":{"account_id":1853886,"reputation":210597,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":4,"creation_date":1374588235,"post_id":17812454,"comment_id":25991115,"body_markdown":"Why do you keep `B` and leave out `C`? Remember, `HashMap` doesn&#39;t maintain the order of elements inserted.","body":"Why do you keep <code>B</code> and leave out <code>C</code>? Remember, <code>HashMap</code> doesn&#39;t maintain the order of elements inserted."},{"owner":{"account_id":290461,"reputation":5558,"user_id":592025,"accept_rate":100,"display_name":"midhunhk"},"score":0,"creation_date":1374588357,"post_id":17812454,"comment_id":25991208,"body_markdown":"Can you tell the exact requirement? Looks like you want unique values. HashMap can give you unique keys. Will inverting the key and value be enough for you?","body":"Can you tell the exact requirement? Looks like you want unique values. HashMap can give you unique keys. Will inverting the key and value be enough for you?"},{"owner":{"account_id":1190755,"reputation":48912,"user_id":1163607,"accept_rate":97,"display_name":"AllTooSir"},"score":0,"creation_date":1374588910,"post_id":17812454,"comment_id":25991622,"body_markdown":"@RohitJain +1 That&#39;s the question !","body":"@RohitJain +1 That&#39;s the question !"}],"answers":[{"tags":[],"owner":{"account_id":2177522,"reputation":120796,"user_id":1927832,"accept_rate":49,"display_name":"Suresh Atta"},"down_vote_count":4,"up_vote_count":6,"is_accepted":false,"score":2,"last_activity_date":1374588684,"creation_date":1374588213,"answer_id":17812484,"question_id":17812454,"body_markdown":"`ConcurrentModificationException` happening,because you are removing from `map`\r\n\r\n\r\n      if (value.equals(nextValue)) {\r\n                map.remove(key);\r\n            }\r\n\r\nYou have to remove from `iterator`\r\n\r\n    if (value.equals(nextValue)) {\r\n                keyIter.remove(key);\r\n            }\r\n\r\nComing to the duplicate entry issue,Its pretty simple :https://stackoverflow.com/questions/6895192/find-duplicate-values-in-java-map","title":"Remove duplicate values from HashMap in Java","body":"<p><code>ConcurrentModificationException</code> happening,because you are removing from <code>map</code></p>\n\n<pre><code>  if (value.equals(nextValue)) {\n            map.remove(key);\n        }\n</code></pre>\n\n<p>You have to remove from <code>iterator</code></p>\n\n<pre><code>if (value.equals(nextValue)) {\n            keyIter.remove(key);\n        }\n</code></pre>\n\n<p>Coming to the duplicate entry issue,Its pretty simple :<a href=\"https://stackoverflow.com/questions/6895192/find-duplicate-values-in-java-map\">Find duplicate values in Java Map?</a></p>\n"},{"tags":[],"owner":{"account_id":2908151,"reputation":11425,"user_id":2492977,"accept_rate":75,"display_name":"No Idea For Name"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1557590676,"creation_date":1374588389,"answer_id":17812555,"question_id":17812454,"body_markdown":"make a reverse HashMap!\r\n\r\n    HashMap&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();\r\n    Set&lt;String&gt; keys = map.keySet(); // The set of keys in the map.\r\n\r\n    Iterator&lt;String&gt; keyIter = keys.iterator();\r\n\r\n    while (keyIter.hasNext()) {\r\n        String key = keyIter.next();\r\n        String value = map.get(key);\r\n        map.put(value, key);\r\n    }\r\nnow that you have the hashMap you need reverse it or print it.\r\n\r\nin anyway **do not** delete while iterating hashMap. save the values in a list and delete them in an outer loop\r\n    ","title":"Remove duplicate values from HashMap in Java","body":"<p>make a reverse HashMap!</p>\n\n<pre><code>HashMap&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();\nSet&lt;String&gt; keys = map.keySet(); // The set of keys in the map.\n\nIterator&lt;String&gt; keyIter = keys.iterator();\n\nwhile (keyIter.hasNext()) {\n    String key = keyIter.next();\n    String value = map.get(key);\n    map.put(value, key);\n}\n</code></pre>\n\n<p>now that you have the hashMap you need reverse it or print it.</p>\n\n<p>in anyway <strong>do not</strong> delete while iterating hashMap. save the values in a list and delete them in an outer loop</p>\n"},{"tags":[],"owner":{"account_id":2519746,"reputation":8347,"user_id":2190336,"display_name":"Prabhaker A"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1374590833,"creation_date":1374590833,"answer_id":17813547,"question_id":17812454,"body_markdown":"If this is yours frequent requirement then `DualHashBidiMap` calss of  apache&#39;s [commons.collections ](http://commons.apache.org/proper/commons-collections//javadocs/api-3.2.1/org/apache/commons/collections/BidiMap.html) will help you more instead of using `HashMap`.\r\n","title":"Remove duplicate values from HashMap in Java","body":"<p>If this is yours frequent requirement then <code>DualHashBidiMap</code> calss of  apache's <a href=\"http://commons.apache.org/proper/commons-collections//javadocs/api-3.2.1/org/apache/commons/collections/BidiMap.html\" rel=\"nofollow\">commons.collections </a> will help you more instead of using <code>HashMap</code>.</p>\n"},{"tags":[],"owner":{"account_id":3239175,"reputation":2249,"user_id":2732632,"display_name":"Kimmi Dhingra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1391664525,"creation_date":1391664525,"answer_id":21594777,"question_id":17812454,"body_markdown":"This can be easily done by putting your hashmap into arraylist.\r\nThis arraylist is of hashmap type.\r\n\r\n    ArrayList&lt;HashMap&lt;String, String&gt;&gt; mArrayList=new ArrayList&lt;&gt;();\r\n    HashMap&lt;String, String&gt; map=new HashMap&lt;&gt;();\r\n    map.put(&quot;1&quot;, &quot;1&quot;);\r\n    \t\tmArrayList.add(map);\r\n    \t\tmap=new HashMap&lt;&gt;();\r\n    \t\tmap.put(&quot;1&quot;, &quot;1&quot;); \r\n    \t\tmArrayList.add(map);\r\n    \t\tmap=new HashMap&lt;&gt;();\r\n    \t\tmap.put(&quot;1&quot;, &quot;2&quot;);\r\n    \t\tmArrayList.add(map);\r\n    \t\tmap=new HashMap&lt;&gt;();\r\n    \t\tmap.put(&quot;1&quot;, &quot;3&quot;);\r\n    \t\tmArrayList.add(map);\r\n    \t\tmap=new HashMap&lt;&gt;();\r\n    \t\tmap.put(&quot;1&quot;, &quot;2&quot;);\r\n    \t\tmArrayList.add(map);\r\n    \r\n    for(int i=0;i&lt;mArrayList.size();i++)\r\n    \t\t{\r\n    \t\t\ttemp=mArrayList.get(i).get(&quot;1&quot;);\r\n    \t\t\tfor(int k=i+1;k&lt;mArrayList.size();k++)\r\n    \t\t\t{\r\n    \t\t\t\tif(temp.equals(mArrayList.get(k).get(&quot;1&quot;)))\r\n    \t\t\t\t{\r\n    \t\t\t\t\tmArrayList.remove(k); \r\n    \t\t\t\t} \r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t}\r\n\r\nNow print your arraylist...all the duplicate values from the hashmap easily removed...This is the easiest way to remove duplicacy","title":"Remove duplicate values from HashMap in Java","body":"<p>This can be easily done by putting your hashmap into arraylist.\nThis arraylist is of hashmap type.</p>\n\n<pre><code>ArrayList&lt;HashMap&lt;String, String&gt;&gt; mArrayList=new ArrayList&lt;&gt;();\nHashMap&lt;String, String&gt; map=new HashMap&lt;&gt;();\nmap.put(\"1\", \"1\");\n        mArrayList.add(map);\n        map=new HashMap&lt;&gt;();\n        map.put(\"1\", \"1\"); \n        mArrayList.add(map);\n        map=new HashMap&lt;&gt;();\n        map.put(\"1\", \"2\");\n        mArrayList.add(map);\n        map=new HashMap&lt;&gt;();\n        map.put(\"1\", \"3\");\n        mArrayList.add(map);\n        map=new HashMap&lt;&gt;();\n        map.put(\"1\", \"2\");\n        mArrayList.add(map);\n\nfor(int i=0;i&lt;mArrayList.size();i++)\n        {\n            temp=mArrayList.get(i).get(\"1\");\n            for(int k=i+1;k&lt;mArrayList.size();k++)\n            {\n                if(temp.equals(mArrayList.get(k).get(\"1\")))\n                {\n                    mArrayList.remove(k); \n                } \n            }\n\n        }\n</code></pre>\n\n<p>Now print your arraylist...all the duplicate values from the hashmap easily removed...This is the easiest way to remove duplicacy</p>\n"},{"tags":[],"owner":{"account_id":2646542,"reputation":39,"user_id":2289101,"display_name":"Santhanam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1398335676,"creation_date":1396494279,"answer_id":22827085,"question_id":17812454,"body_markdown":"     \r\nThis will be helpful to remove duplicate values from map.\r\n       \r\n        Map&lt;String, String&gt; myMap = new TreeMap&lt;String, String&gt;();\r\n        myMap.put(&quot;1&quot;, &quot;One&quot;);\r\n        myMap.put(&quot;2&quot;, &quot;Two&quot;);\r\n        myMap.put(&quot;3&quot;, &quot;One&quot;);\r\n        myMap.put(&quot;4&quot;, &quot;Three&quot;);\r\n        myMap.put(&quot;5&quot;, &quot;Two&quot;);\r\n        myMap.put(&quot;6&quot;, &quot;Three&quot;);\r\n\r\n        Set&lt;String&gt; mySet = new HashSet&lt;String&gt;();\r\n\r\n        for (Iterator itr = myMap.entrySet().iterator(); itr.hasNext();)\r\n        {\r\n            Map.Entry&lt;String, String&gt; entrySet = (Map.Entry) itr.next();\r\n\r\n            String value = entrySet.getValue();\r\n           \r\n            if (!mySet.add(value))\r\n            {\r\n                itr.remove();               \r\n            }\r\n        }\r\n\r\nSystem.out.println(&quot;mymap :&quot; + mymap);\r\n\r\n\r\nOutput:\r\n\r\nmymap :{1=One, 2=Two, 4=Three}\r\n","title":"Remove duplicate values from HashMap in Java","body":"<p>This will be helpful to remove duplicate values from map.</p>\n\n<pre><code>    Map&lt;String, String&gt; myMap = new TreeMap&lt;String, String&gt;();\n    myMap.put(\"1\", \"One\");\n    myMap.put(\"2\", \"Two\");\n    myMap.put(\"3\", \"One\");\n    myMap.put(\"4\", \"Three\");\n    myMap.put(\"5\", \"Two\");\n    myMap.put(\"6\", \"Three\");\n\n    Set&lt;String&gt; mySet = new HashSet&lt;String&gt;();\n\n    for (Iterator itr = myMap.entrySet().iterator(); itr.hasNext();)\n    {\n        Map.Entry&lt;String, String&gt; entrySet = (Map.Entry) itr.next();\n\n        String value = entrySet.getValue();\n\n        if (!mySet.add(value))\n        {\n            itr.remove();               \n        }\n    }\n</code></pre>\n\n<p>System.out.println(\"mymap :\" + mymap);</p>\n\n<p>Output:</p>\n\n<p>mymap :{1=One, 2=Two, 4=Three}</p>\n"},{"tags":[],"owner":{"account_id":4331683,"reputation":61,"user_id":3537027,"accept_rate":0,"display_name":"dsahoo188"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1407331603,"creation_date":1407331603,"answer_id":25161663,"question_id":17812454,"body_markdown":"    public static void main(String[] args) {\r\n\t\tMap&lt;String, String&gt; map = new HashMap&lt;&gt;();\r\n\t\tmap.put(&quot;A&quot;, &quot;1&quot;);\r\n\t\tmap.put(&quot;B&quot;, &quot;2&quot;);\r\n\t\tmap.put(&quot;C&quot;, &quot;2&quot;);\r\n\t\tmap.put(&quot;D&quot;, &quot;3&quot;);\r\n\t\tmap.put(&quot;E&quot;, &quot;3&quot;);\r\n\t\tSystem.out.println(&quot;Initial Map : &quot; + map);\r\n\t\tfor (String s : new ConcurrentHashMap&lt;&gt;(map).keySet()) {\r\n\t\t\tString value = map.get(s);\r\n\t\t\tfor (Map.Entry&lt;String, String&gt; ss : new ConcurrentHashMap&lt;&gt;(map)\r\n\t\t\t\t\t.entrySet()) {\r\n\t\t\t\tif (s != ss.getKey() &amp;&amp; value == ss.getValue()) {\r\n\t\t\t\t\tmap.remove(ss.getKey());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Final Map : &quot; + map);\r\n\t}","title":"Remove duplicate values from HashMap in Java","body":"<pre><code>public static void main(String[] args) {\n    Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\n    map.put(\"A\", \"1\");\n    map.put(\"B\", \"2\");\n    map.put(\"C\", \"2\");\n    map.put(\"D\", \"3\");\n    map.put(\"E\", \"3\");\n    System.out.println(\"Initial Map : \" + map);\n    for (String s : new ConcurrentHashMap&lt;&gt;(map).keySet()) {\n        String value = map.get(s);\n        for (Map.Entry&lt;String, String&gt; ss : new ConcurrentHashMap&lt;&gt;(map)\n                .entrySet()) {\n            if (s != ss.getKey() &amp;&amp; value == ss.getValue()) {\n                map.remove(ss.getKey());\n            }\n        }\n    }\n    System.out.println(\"Final Map : \" + map);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5014583,"reputation":77,"user_id":4029759,"display_name":"Thananjayan N"},"down_vote_count":2,"up_vote_count":7,"is_accepted":false,"score":5,"last_activity_date":1412145697,"creation_date":1412145697,"answer_id":26135521,"question_id":17812454,"body_markdown":"        Map&lt;String,Object&gt; mapValues = new HashMap&lt;String,Object&gt;(5);\r\n\t\tmapValues.put(&quot;1&quot;, &quot;TJ&quot;);\r\n\t\tmapValues.put(&quot;2&quot;, &quot;Arun&quot;);\r\n\t\tmapValues.put(&quot;3&quot;, &quot;TJ&quot;);\r\n\t\tmapValues.put(&quot;4&quot;, &quot;Venkat&quot;);\r\n\t\tmapValues.put(&quot;5&quot;, &quot;Arun&quot;);\r\n\r\n        Collection&lt;Object&gt; list = mapValues.values();\r\n\t\tfor(Iterator&lt;Object&gt; itr = list.iterator(); itr.hasNext();)\r\n\t\t{\r\n\t\t\tif(Collections.frequency(list, itr.next())&gt;1)\r\n\t\t\t{\r\n\t\t\t\titr.remove();\r\n\t\t\t}\r\n\t\t}","title":"Remove duplicate values from HashMap in Java","body":"<pre><code>    Map&lt;String,Object&gt; mapValues = new HashMap&lt;String,Object&gt;(5);\n    mapValues.put(\"1\", \"TJ\");\n    mapValues.put(\"2\", \"Arun\");\n    mapValues.put(\"3\", \"TJ\");\n    mapValues.put(\"4\", \"Venkat\");\n    mapValues.put(\"5\", \"Arun\");\n\n    Collection&lt;Object&gt; list = mapValues.values();\n    for(Iterator&lt;Object&gt; itr = list.iterator(); itr.hasNext();)\n    {\n        if(Collections.frequency(list, itr.next())&gt;1)\n        {\n            itr.remove();\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2269593,"reputation":43907,"user_id":1997376,"accept_rate":100,"display_name":"Nicolas Filotto"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1498145585,"creation_date":1476888791,"answer_id":40134893,"question_id":17812454,"body_markdown":"Assuming that you use **Java 8**, it could be done using the [`Stream API`][1] with a `Set&lt;String&gt;` that will store the existing values:\r\n\r\n    Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\r\n    map.put(&quot;A&quot;, &quot;1&quot;);\r\n    ...\r\n    System.out.printf(&quot;Before: %s%n&quot;, map);\r\n\r\n    // Set in which we keep the existing values\r\n    Set&lt;String&gt; existing = new HashSet&lt;&gt;();\r\n    map = map.entrySet()\r\n        .stream()\r\n        .filter(entry -&gt; existing.add(entry.getValue()))\r\n        .collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\r\n    System.out.printf(&quot;After: %s%n&quot;, map);     \r\n\r\n**Output:**\r\n\r\n    Before: {A=1, B=2, C=2, D=3, E=3}\r\n    After: {A=1, B=2, D=3}\r\n\r\n**NB:** Strictly speaking a predicate of a filter is not supposed to be **stateful**, it should be **stateless** as mentioned into the [javadoc][2] in order to ensure that the result remain **deterministic** and **correct** even if we use a parallel stream. However here, I assume that you don&#39;t intend to use a parallel stream such that this approach remains valid.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#filter-java.util.function.Predicate-","title":"Remove duplicate values from HashMap in Java","body":"<p>Assuming that you use <strong>Java 8</strong>, it could be done using the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html\" rel=\"noreferrer\"><code>Stream API</code></a> with a <code>Set&lt;String&gt;</code> that will store the existing values:</p>\n\n<pre><code>Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\nmap.put(\"A\", \"1\");\n...\nSystem.out.printf(\"Before: %s%n\", map);\n\n// Set in which we keep the existing values\nSet&lt;String&gt; existing = new HashSet&lt;&gt;();\nmap = map.entrySet()\n    .stream()\n    .filter(entry -&gt; existing.add(entry.getValue()))\n    .collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\nSystem.out.printf(\"After: %s%n\", map);     \n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>Before: {A=1, B=2, C=2, D=3, E=3}\nAfter: {A=1, B=2, D=3}\n</code></pre>\n\n<p><strong>NB:</strong> Strictly speaking a predicate of a filter is not supposed to be <strong>stateful</strong>, it should be <strong>stateless</strong> as mentioned into the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#filter-java.util.function.Predicate-\" rel=\"noreferrer\">javadoc</a> in order to ensure that the result remain <strong>deterministic</strong> and <strong>correct</strong> even if we use a parallel stream. However here, I assume that you don't intend to use a parallel stream such that this approach remains valid.</p>\n"},{"tags":[],"owner":{"account_id":8004185,"reputation":1391,"user_id":6037956,"display_name":"Soudipta Dutta"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1520149119,"creation_date":1520149119,"answer_id":49093113,"question_id":17812454,"body_markdown":"This can be done using Java 8. The concept of stream is required. The pseudocode,\r\nis stream().filter().collect().\r\nIf the Initial Map : {A=1, B=2, C=2, D=3, E=3}. Then the required answer after removing the duplicates is   {A=1, B=2, D=3} .\r\n\r\n        \r\n    import java.util.HashMap;\r\n    import java.util.HashSet;\r\n    import java.util.Map;\r\n    import java.util.Set;\r\n    import java.util.stream.Collectors;\r\n    \r\n    public class RemoveDuplicates1 {\r\n       public static void main(String[] args) {\r\n    \r\n    \t\t//Initial Map : {A=1, B=2, C=2, D=3, E=3}\r\n    \t\t//After =&gt;  {A=1, B=2, D=3} \r\n    \t   \r\n    \t  Map&lt;String , String &gt; map = new HashMap&lt;&gt;();\r\n    \t    map.put(&quot;A&quot;, &quot;1&quot;);\r\n    \t    map.put(&quot;B&quot;, &quot;2&quot;);\r\n    \t    map.put(&quot;C&quot;, &quot;2&quot;);\r\n    \t    map.put(&quot;D&quot;, &quot;3&quot;);\r\n    \t    map.put(&quot;E&quot;, &quot;3&quot;);\r\n    \t    \r\n    \t    System.out.printf(&quot;before :   &quot; +map );\r\n    \t    System.out.println(&quot;\\n&quot;);\r\n    \t    \r\n    \t    Set&lt;String&gt; set = new  HashSet&lt;&gt;();\r\n    \t    \r\n    \t    map = map.entrySet().stream()\r\n    \t    \t\t.filter(entry -&gt; set.add(entry.getValue()))\r\n    \t    \t\t.collect(Collectors.toMap(Map.Entry :: getKey ,  Map.Entry :: getValue));\r\n    \t    System.out.printf(&quot;after =&gt; &quot; + map);\r\n    \t    \r\n       }\r\n    }\r\n\r\n\r\n","title":"Remove duplicate values from HashMap in Java","body":"<p>This can be done using Java 8. The concept of stream is required. The pseudocode,\nis stream().filter().collect().\nIf the Initial Map : {A=1, B=2, C=2, D=3, E=3}. Then the required answer after removing the duplicates is   {A=1, B=2, D=3} .</p>\n\n<pre><code>import java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.stream.Collectors;\n\npublic class RemoveDuplicates1 {\n   public static void main(String[] args) {\n\n        //Initial Map : {A=1, B=2, C=2, D=3, E=3}\n        //After =&gt;  {A=1, B=2, D=3} \n\n      Map&lt;String , String &gt; map = new HashMap&lt;&gt;();\n        map.put(\"A\", \"1\");\n        map.put(\"B\", \"2\");\n        map.put(\"C\", \"2\");\n        map.put(\"D\", \"3\");\n        map.put(\"E\", \"3\");\n\n        System.out.printf(\"before :   \" +map );\n        System.out.println(\"\\n\");\n\n        Set&lt;String&gt; set = new  HashSet&lt;&gt;();\n\n        map = map.entrySet().stream()\n                .filter(entry -&gt; set.add(entry.getValue()))\n                .collect(Collectors.toMap(Map.Entry :: getKey ,  Map.Entry :: getValue));\n        System.out.printf(\"after =&gt; \" + map);\n\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9603898,"reputation":396,"user_id":7130482,"display_name":"Einstein_AB"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550430207,"creation_date":1548250913,"answer_id":54328652,"question_id":17812454,"body_markdown":"If you are looking just to remove the concurrentModification exception, then just replace your HashMap with ConcurrentHashMap.\r\n\r\nTo know more about ConcurrentHashMap look [here][1]\r\n\r\n  [1]: https://www.journaldev.com/378/java-util-concurrentmodificationexception","title":"Remove duplicate values from HashMap in Java","body":"<p>If you are looking just to remove the concurrentModification exception, then just replace your HashMap with ConcurrentHashMap.</p>\n\n<p>To know more about ConcurrentHashMap look <a href=\"https://www.journaldev.com/378/java-util-concurrentmodificationexception\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":519209,"reputation":1022,"user_id":3534491,"display_name":"Marduk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657963600,"creation_date":1657963600,"answer_id":73003041,"question_id":17812454,"body_markdown":"It can be done without mutating the original map:\r\n\r\n```java\r\npublic static &lt;K,V&gt; Map&lt;K,V&gt; getDistinctValues(Map&lt;K,V&gt; map) {\r\n    Set&lt;V&gt; values = new HashSet&lt;&gt;();\r\n\r\n    return map.entrySet().stream()\r\n            .filter(entry -&gt; values.add(entry.getValue()))\r\n            .collect(Collectors.toMap(\r\n                    Map.Entry::getKey,\r\n                    Map.Entry::getValue\r\n            ));\r\n}\r\n```","title":"Remove duplicate values from HashMap in Java","body":"<p>It can be done without mutating the original map:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static &lt;K,V&gt; Map&lt;K,V&gt; getDistinctValues(Map&lt;K,V&gt; map) {\n    Set&lt;V&gt; values = new HashSet&lt;&gt;();\n\n    return map.entrySet().stream()\n            .filter(entry -&gt; values.add(entry.getValue()))\n            .collect(Collectors.toMap(\n                    Map.Entry::getKey,\n                    Map.Entry::getValue\n            ));\n}\n</code></pre>\n"}],"owner":{"account_id":3083037,"reputation":121,"user_id":2610852,"display_name":"user2610852"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":113904,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":11,"score":12,"last_activity_date":1657963600,"creation_date":1374588134,"question_id":17812454,"body_markdown":"I have a map with duplicate values:\r\n\r\n\t(&quot;A&quot;, &quot;1&quot;);\r\n\t(&quot;B&quot;, &quot;2&quot;);\r\n\t(&quot;C&quot;, &quot;2&quot;);\r\n\t(&quot;D&quot;, &quot;3&quot;);\r\n\t(&quot;E&quot;, &quot;3&quot;);\r\n\r\nI would like to the map to have\r\n\r\n\t(&quot;A&quot;, &quot;1&quot;);\r\n\t(&quot;B&quot;, &quot;2&quot;);\r\n\t(&quot;D&quot;, &quot;3&quot;);\r\n\r\nDo you know how to get rid of the duplicate values?\r\n\r\nAt present, I get &#39;java.util.ConcurrentModificationException&#39; error.\r\n\r\nThank you.\r\n\r\n\r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\tHashMap&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();\r\n\t\tmap.put(&quot;A&quot;, &quot;1&quot;);\r\n\t\tmap.put(&quot;B&quot;, &quot;2&quot;);\r\n\t\tmap.put(&quot;C&quot;, &quot;2&quot;);\r\n\t\tmap.put(&quot;D&quot;, &quot;3&quot;);\r\n\t\tmap.put(&quot;E&quot;, &quot;3&quot;);\r\n\r\n\t\tSet&lt;String&gt; keys = map.keySet(); // The set of keys in the map.\r\n\r\n\t\tIterator&lt;String&gt; keyIter = keys.iterator();\r\n\r\n\t\twhile (keyIter.hasNext()) {\r\n\t\t\tString key = keyIter.next();\r\n\t\t\tString value = map.get(key);\r\n\r\n\t\t\tSystem.out.println(key + &quot;\\t&quot; + value);\r\n\r\n\t\t\tString nextValue = map.get(key);\r\n\r\n\t\t\tif (value.equals(nextValue)) {\r\n\t\t\t\tmap.remove(key);\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println(map);\r\n\t}\r\n","title":"Remove duplicate values from HashMap in Java","body":"<p>I have a map with duplicate values:</p>\n\n<pre><code>(\"A\", \"1\");\n(\"B\", \"2\");\n(\"C\", \"2\");\n(\"D\", \"3\");\n(\"E\", \"3\");\n</code></pre>\n\n<p>I would like to the map to have</p>\n\n<pre><code>(\"A\", \"1\");\n(\"B\", \"2\");\n(\"D\", \"3\");\n</code></pre>\n\n<p>Do you know how to get rid of the duplicate values?</p>\n\n<p>At present, I get 'java.util.ConcurrentModificationException' error.</p>\n\n<p>Thank you.</p>\n\n<pre><code>public static void main(String[] args) {\n\n    HashMap&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();\n    map.put(\"A\", \"1\");\n    map.put(\"B\", \"2\");\n    map.put(\"C\", \"2\");\n    map.put(\"D\", \"3\");\n    map.put(\"E\", \"3\");\n\n    Set&lt;String&gt; keys = map.keySet(); // The set of keys in the map.\n\n    Iterator&lt;String&gt; keyIter = keys.iterator();\n\n    while (keyIter.hasNext()) {\n        String key = keyIter.next();\n        String value = map.get(key);\n\n        System.out.println(key + \"\\t\" + value);\n\n        String nextValue = map.get(key);\n\n        if (value.equals(nextValue)) {\n            map.remove(key);\n        }\n    }\n    System.out.println(map);\n}\n</code></pre>\n"},{"tags":["java","spring-boot","bean-validation"],"answers":[{"tags":[],"owner":{"account_id":17415208,"reputation":37,"user_id":12621695,"display_name":"Ivan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657962492,"creation_date":1657929692,"answer_id":73000603,"question_id":73000339,"body_markdown":"Wasn&#39;t aware of that but I found out while testing that Exceptions overide the response. Adding a try catch or a Error handler fixes it.\r\n\r\n```\r\n    @GetMapping(&quot;/me/account&quot;)\r\n    public ResponseEntity&lt;PrivateUser&gt; getUserDetails(HttpServletRequest request,\r\n                                                      @PathVariable String lang) {\r\n        Long userId = (Long) request.getAttribute(&quot;userId&quot;);\r\n        try {\r\n            User user = userService.getUserDetails(userId, lang);\r\n            return new ResponseEntity&lt;&gt;(user.getPrivateData(), HttpStatus.OK);\r\n        } catch (Exception e) {\r\n            return new ResponseEntity&lt;&gt;(HttpStatus.UNAUTHORIZED);\r\n        }\r\n    }\r\n```\r\n\r\n[![enter image description here][1]][1] \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4ggfn.png","title":"GenericFilterBean response error doesn&#39;t work for all endpoints","body":"<p>Wasn't aware of that but I found out while testing that Exceptions overide the response. Adding a try catch or a Error handler fixes it.</p>\n<pre><code>    @GetMapping(&quot;/me/account&quot;)\n    public ResponseEntity&lt;PrivateUser&gt; getUserDetails(HttpServletRequest request,\n                                                      @PathVariable String lang) {\n        Long userId = (Long) request.getAttribute(&quot;userId&quot;);\n        try {\n            User user = userService.getUserDetails(userId, lang);\n            return new ResponseEntity&lt;&gt;(user.getPrivateData(), HttpStatus.OK);\n        } catch (Exception e) {\n            return new ResponseEntity&lt;&gt;(HttpStatus.UNAUTHORIZED);\n        }\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/4ggfn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4ggfn.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":17415208,"reputation":37,"user_id":12621695,"display_name":"Ivan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":287,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1657962492,"creation_date":1657926359,"question_id":73000339,"body_markdown":"I have implemented a GenericFilterBean to filter jwt tokens :\r\n\r\n```\r\n    public class AuthFilter extends GenericFilterBean {\r\n\r\n    @Override\r\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {\r\n        HttpServletRequest httpRequest = (HttpServletRequest) servletRequest;\r\n        HttpServletResponse httpResponse = (HttpServletResponse) servletResponse;\r\n\r\n        String authHeader = httpRequest.getHeader(&quot;Authorization&quot;);\r\n        if (authHeader != null){\r\n            String[] authHeaderArr = authHeader.split(&quot;Bearer&quot;);\r\n            if(authHeaderArr.length &gt; 1 &amp;&amp; authHeaderArr[1] != null) {\r\n                String token = authHeaderArr[1];\r\n                try {\r\n                    Claims claims = Jwts.parserBuilder().setSigningKey(Constants.API_SECRET_KEY).build()\r\n                            .parseClaimsJws(token).getBody();\r\n                    httpRequest.setAttribute(&quot;userId&quot;, Long.parseLong(claims.get(&quot;userId&quot;).toString()));\r\n                }catch (Exception e) {\r\n                    httpResponse.sendError(HttpStatus.FORBIDDEN.value(), &quot;invalid/expired token&quot;);\r\n                }\r\n            } else {\r\n                httpResponse.sendError(HttpStatus.FORBIDDEN.value(),\r\n                        &quot;Authorization token must be Bearer[token]&quot;);\r\n            }\r\n        } else {\r\n            httpResponse.sendError(HttpStatus.FORBIDDEN.value(),\r\n                    &quot;Authorization token must be provided&quot;);\r\n        }\r\n        filterChain.doFilter(servletRequest, servletResponse);\r\n    }\r\n}\r\n```\r\n\r\nThe filter seems to work fine and when adding url patterns they seem to be catched successfully. The issue is that the response error if the jwt is incorrect only works on one endpoint.\r\n\r\nThe working endpoint :\r\n\r\n[![Fleet endpoint (expected result)][1]][1]\r\n\r\nThe other endpoints :\r\n\r\n[![User account endpoint (error doesn&#39;t show up)][2]][2]\r\n\r\n\r\nMy filter looks like that :\r\n\r\n```\r\npublic class WeyApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(WeyApplication.class, args);\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic FilterRegistrationBean&lt;AuthFilter&gt; filterRegistrationBean () {\r\n\t\tFilterRegistrationBean&lt;AuthFilter&gt; registrationBean = new FilterRegistrationBean&lt;&gt;();\r\n\t\tregistrationBean.setFilter(new AuthFilter());\r\n\t\tregistrationBean.addUrlPatterns(\r\n\t\t\t\t&quot;/api/en/fleet/*&quot;,\r\n\t\t\t\t&quot;/api/en/users/*&quot;,\r\n\t\t\t\t&quot;/api/en/ride/*&quot;,\r\n\t\t\t\t&quot;/api/en/ride-request/*&quot;\r\n\t\t);\r\n\t\treturn registrationBean;\r\n\t}\r\n}\r\n```\r\n\r\nI don&#39;t think the problem is with the url pattern since I debugged and all the endpoints added to the registrationBean does go through the doFilter method.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/a9FMj.png\r\n  [2]: https://i.stack.imgur.com/WFfGR.png\r\n\r\n","title":"GenericFilterBean response error doesn&#39;t work for all endpoints","body":"<p>I have implemented a GenericFilterBean to filter jwt tokens :</p>\n<pre><code>    public class AuthFilter extends GenericFilterBean {\n\n    @Override\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {\n        HttpServletRequest httpRequest = (HttpServletRequest) servletRequest;\n        HttpServletResponse httpResponse = (HttpServletResponse) servletResponse;\n\n        String authHeader = httpRequest.getHeader(&quot;Authorization&quot;);\n        if (authHeader != null){\n            String[] authHeaderArr = authHeader.split(&quot;Bearer&quot;);\n            if(authHeaderArr.length &gt; 1 &amp;&amp; authHeaderArr[1] != null) {\n                String token = authHeaderArr[1];\n                try {\n                    Claims claims = Jwts.parserBuilder().setSigningKey(Constants.API_SECRET_KEY).build()\n                            .parseClaimsJws(token).getBody();\n                    httpRequest.setAttribute(&quot;userId&quot;, Long.parseLong(claims.get(&quot;userId&quot;).toString()));\n                }catch (Exception e) {\n                    httpResponse.sendError(HttpStatus.FORBIDDEN.value(), &quot;invalid/expired token&quot;);\n                }\n            } else {\n                httpResponse.sendError(HttpStatus.FORBIDDEN.value(),\n                        &quot;Authorization token must be Bearer[token]&quot;);\n            }\n        } else {\n            httpResponse.sendError(HttpStatus.FORBIDDEN.value(),\n                    &quot;Authorization token must be provided&quot;);\n        }\n        filterChain.doFilter(servletRequest, servletResponse);\n    }\n}\n</code></pre>\n<p>The filter seems to work fine and when adding url patterns they seem to be catched successfully. The issue is that the response error if the jwt is incorrect only works on one endpoint.</p>\n<p>The working endpoint :</p>\n<p><a href=\"https://i.stack.imgur.com/a9FMj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a9FMj.png\" alt=\"Fleet endpoint (expected result)\" /></a></p>\n<p>The other endpoints :</p>\n<p><a href=\"https://i.stack.imgur.com/WFfGR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WFfGR.png\" alt=\"User account endpoint (error doesn't show up)\" /></a></p>\n<p>My filter looks like that :</p>\n<pre><code>public class WeyApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(WeyApplication.class, args);\n    }\n\n    @Bean\n    public FilterRegistrationBean&lt;AuthFilter&gt; filterRegistrationBean () {\n        FilterRegistrationBean&lt;AuthFilter&gt; registrationBean = new FilterRegistrationBean&lt;&gt;();\n        registrationBean.setFilter(new AuthFilter());\n        registrationBean.addUrlPatterns(\n                &quot;/api/en/fleet/*&quot;,\n                &quot;/api/en/users/*&quot;,\n                &quot;/api/en/ride/*&quot;,\n                &quot;/api/en/ride-request/*&quot;\n        );\n        return registrationBean;\n    }\n}\n</code></pre>\n<p>I don't think the problem is with the url pattern since I debugged and all the endpoints added to the registrationBean does go through the doFilter method.</p>\n"},{"tags":["java","spring","resttemplate"],"comments":[{"owner":{"account_id":1652887,"reputation":2038,"user_id":1523115,"display_name":"Hannes"},"score":0,"creation_date":1443555683,"post_id":32851267,"comment_id":53538404,"body_markdown":"Your configuration chain fails, because the header cannot be changed afterwards. Have a look at http://stackoverflow.com/questions/14383240/basic-authentication-with-resttemplate-3-1","body":"Your configuration chain fails, because the header cannot be changed afterwards. Have a look at <a href=\"http://stackoverflow.com/questions/14383240/basic-authentication-with-resttemplate-3-1\" title=\"basic authentication with resttemplate 3 1\">stackoverflow.com/questions/14383240/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":4059688,"reputation":749,"user_id":3336551,"accept_rate":100,"display_name":"Alter Hu"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1484810594,"creation_date":1484810594,"answer_id":41736020,"question_id":32851267,"body_markdown":"To get more people know this issue:\r\n\r\n@Sameer, I found the problem is you&#39;re using `HttpHeaders` ,you can try to build your header with this code  \r\n`\r\nMultiValueMap&lt;String, String&gt; headers =new LinkedMultiValueMap&lt;String, String&gt;();\r\n`\r\nAnd not use the `HttpHeaders` and then in your `HttpEntity` to build the object entity as  \r\n`new HttpEntity&lt;Object&gt;(record, headers); \r\n`\r\nThen it should solve problem .","title":"Spring RestTemplate UnsupportedOperationException with Collections$UnmodifiableCollection.add(Unknown Source)","body":"<p>To get more people know this issue:</p>\n\n<p>@Sameer, I found the problem is you're using <code>HttpHeaders</code> ,you can try to build your header with this code<br>\n<code>\nMultiValueMap&lt;String, String&gt; headers =new LinkedMultiValueMap&lt;String, String&gt;();\n</code>\nAnd not use the <code>HttpHeaders</code> and then in your <code>HttpEntity</code> to build the object entity as<br>\n<code>new HttpEntity&lt;Object&gt;(record, headers);\n</code>\nThen it should solve problem .</p>\n"},{"tags":[],"owner":{"account_id":13390529,"reputation":1,"user_id":9663007,"display_name":"Infinite Solutionz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1609812772,"creation_date":1572267777,"answer_id":58591451,"question_id":32851267,"body_markdown":"Try creating the RestTemplate object in the following way,\r\n\r\n    ResTemplate restTemplate = new RestTemplate(new HttpComponentsClientHttpRequestFactory());\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.setContentType(MediaType.APPLICATION_JSON);\r\n    headers.set(&quot;Authorization&quot;, authorizationProperty); //Can also use add(String headerName, String headerValue)\r\n\r\nThis way it should works.","title":"Spring RestTemplate UnsupportedOperationException with Collections$UnmodifiableCollection.add(Unknown Source)","body":"<p>Try creating the RestTemplate object in the following way,</p>\n<pre><code>ResTemplate restTemplate = new RestTemplate(new HttpComponentsClientHttpRequestFactory());\nHttpHeaders headers = new HttpHeaders();\nheaders.setContentType(MediaType.APPLICATION_JSON);\nheaders.set(&quot;Authorization&quot;, authorizationProperty); //Can also use add(String headerName, String headerValue)\n</code></pre>\n<p>This way it should works.</p>\n"}],"owner":{"account_id":2817401,"reputation":425,"user_id":2422070,"accept_rate":43,"display_name":"Sameer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8990,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":2,"score":7,"last_activity_date":1657962115,"creation_date":1443551283,"question_id":32851267,"body_markdown":"This is our rest template config\r\n\r\n\t\r\n\r\n    @Bean\r\n    \tpublic RestTemplate infoBloxRestTemplate() {\r\n    \t\tRestTemplate restTemplate=new RestTemplate();\r\n    \t\tArrayList&lt;ClientHttpRequestInterceptor&gt; interceptors = new ArrayList&lt;&gt;();\r\n    \t\tinterceptors.add(httpBasicAuthenticationInterceptor());\r\n    \t\trestTemplate.setInterceptors(interceptors);\r\n    \t\trestTemplate.getMessageConverters().add(jacksonConverter());\r\n    \t\trestTemplate.setRequestFactory(genericHttpRequestFactory());\r\n    \t\treturn restTemplate;\r\n    \t}\r\n\r\nWe are trying to make a POST call which works successfully with Postman and returns proper response.\r\n\r\n\t\t\t\r\n\r\n    final HttpHeaders headers = new HttpHeaders();\r\n    headers.add(&quot;Accept&quot;, &quot;application/json&quot;);\r\n    headers.add(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n    \t\t    \r\n    HttpEntity&lt;Object&gt; httpEntity = new HttpEntity&lt;Object&gt;(record, headers);\r\n    \t\t    \r\n    StringBuilder uri = new StringBuilder(infobloxRestClient.createUrl(&quot;/record:host&quot;));\r\n    infobloxRestClient.getRestTemplate().exchange(uri.toString(), HttpMethod.POST, httpEntity, String.class);\r\n\r\nBut this POST invocation fails with below error. Here is my stack trace:\r\n\r\n    com.sun.xml.ws.server.sei.TieHandler createResponse\r\n    SEVERE: null\r\n    java.lang.UnsupportedOperationException\r\n    \tat java.util.Collections$UnmodifiableCollection.add(Unknown Source)\r\n    \tat org.springframework.http.HttpHeaders.add(HttpHeaders.java:558)\r\n    \tat com.test.externalinterfaces.HTTPBasicAuthenticationInterceptor.intercept(HTTPBasicAuthenticationInterceptor.java:30)\r\n    \tat org.springframework.http.client.InterceptingClientHttpRequest$RequestExecution.execute(InterceptingClientHttpRequest.java:81)\r\n    \tat org.springframework.http.client.InterceptingClientHttpRequest.executeInternal(InterceptingClientHttpRequest.java:67)\r\n    \tat org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:46)\r\n    \tat org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:49)\r\n    \tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:488)\r\n    \tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:452)\r\n\r\nAny help on this regard will be very helpful.","title":"Spring RestTemplate UnsupportedOperationException with Collections$UnmodifiableCollection.add(Unknown Source)","body":"<p>This is our rest template config</p>\n\n<pre><code>@Bean\n    public RestTemplate infoBloxRestTemplate() {\n        RestTemplate restTemplate=new RestTemplate();\n        ArrayList&lt;ClientHttpRequestInterceptor&gt; interceptors = new ArrayList&lt;&gt;();\n        interceptors.add(httpBasicAuthenticationInterceptor());\n        restTemplate.setInterceptors(interceptors);\n        restTemplate.getMessageConverters().add(jacksonConverter());\n        restTemplate.setRequestFactory(genericHttpRequestFactory());\n        return restTemplate;\n    }\n</code></pre>\n\n<p>We are trying to make a POST call which works successfully with Postman and returns proper response.</p>\n\n<pre><code>final HttpHeaders headers = new HttpHeaders();\nheaders.add(\"Accept\", \"application/json\");\nheaders.add(\"Content-Type\", \"application/json\");\n\nHttpEntity&lt;Object&gt; httpEntity = new HttpEntity&lt;Object&gt;(record, headers);\n\nStringBuilder uri = new StringBuilder(infobloxRestClient.createUrl(\"/record:host\"));\ninfobloxRestClient.getRestTemplate().exchange(uri.toString(), HttpMethod.POST, httpEntity, String.class);\n</code></pre>\n\n<p>But this POST invocation fails with below error. Here is my stack trace:</p>\n\n<pre><code>com.sun.xml.ws.server.sei.TieHandler createResponse\nSEVERE: null\njava.lang.UnsupportedOperationException\n    at java.util.Collections$UnmodifiableCollection.add(Unknown Source)\n    at org.springframework.http.HttpHeaders.add(HttpHeaders.java:558)\n    at com.test.externalinterfaces.HTTPBasicAuthenticationInterceptor.intercept(HTTPBasicAuthenticationInterceptor.java:30)\n    at org.springframework.http.client.InterceptingClientHttpRequest$RequestExecution.execute(InterceptingClientHttpRequest.java:81)\n    at org.springframework.http.client.InterceptingClientHttpRequest.executeInternal(InterceptingClientHttpRequest.java:67)\n    at org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:46)\n    at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:49)\n    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:488)\n    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:452)\n</code></pre>\n\n<p>Any help on this regard will be very helpful.</p>\n"},{"tags":["java","spring","spring-boot","tomcat"],"comments":[{"owner":{"account_id":147773,"reputation":9594,"user_id":359120,"accept_rate":82,"display_name":"Salil"},"score":0,"creation_date":1657903696,"post_id":72995975,"comment_id":128928664,"body_markdown":"If all you need are beans from another app, you should create a shared library (jar), and use it in both the apps.","body":"If all you need are beans from another app, you should create a shared library (jar), and use it in both the apps."},{"owner":{"account_id":5273740,"reputation":698,"user_id":4211252,"display_name":"Thilo Schwarz"},"score":1,"creation_date":1657907033,"post_id":72995975,"comment_id":128929622,"body_markdown":"That&#39;s a typical case for a multi-modul project.","body":"That&#39;s a typical case for a multi-modul project."}],"answers":[{"tags":[],"owner":{"account_id":1410041,"reputation":7508,"user_id":1336841,"display_name":"Forketyfork"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1657962068,"creation_date":1657962068,"answer_id":73002876,"question_id":72995975,"body_markdown":"I see two options, depending on which one suits your use case conceptually:\r\n* you have two Spring Boot applications that need to **share the same code**: extract this code to a separate project (a regular Java library), build it as a jar file and include into both projects as a dependency; an example could be found in the [Creating a Multi Module Project](https://spring.io/guides/gs/multi-module/) guide;\r\n* you have two Spring Boot applications, one of them needs to access the **functionality** of another: provide and access this functionality as an API, instead of directly importing the beans. There are multiple ways to do this. For example, you could expose the bean functionality as a REST API using Spring&#39;s [@RestController](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/RestController.html), and access them from the other side using [RestTemplate](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html). See the following guides: [Building a RESTful Web Service](https://spring.io/guides/gs/rest-service/), [Consuming a RESTful Web Service](https://spring.io/guides/gs/consuming-rest/)","title":"How to configure a Spring Boot Application that uses tomcat and has a dependency to another Application uses tomcat","body":"<p>I see two options, depending on which one suits your use case conceptually:</p>\n<ul>\n<li>you have two Spring Boot applications that need to <strong>share the same code</strong>: extract this code to a separate project (a regular Java library), build it as a jar file and include into both projects as a dependency; an example could be found in the <a href=\"https://spring.io/guides/gs/multi-module/\" rel=\"nofollow noreferrer\">Creating a Multi Module Project</a> guide;</li>\n<li>you have two Spring Boot applications, one of them needs to access the <strong>functionality</strong> of another: provide and access this functionality as an API, instead of directly importing the beans. There are multiple ways to do this. For example, you could expose the bean functionality as a REST API using Spring's <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/RestController.html\" rel=\"nofollow noreferrer\">@RestController</a>, and access them from the other side using <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html\" rel=\"nofollow noreferrer\">RestTemplate</a>. See the following guides: <a href=\"https://spring.io/guides/gs/rest-service/\" rel=\"nofollow noreferrer\">Building a RESTful Web Service</a>, <a href=\"https://spring.io/guides/gs/consuming-rest/\" rel=\"nofollow noreferrer\">Consuming a RESTful Web Service</a></li>\n</ul>\n"}],"owner":{"account_id":25244755,"reputation":5,"user_id":19078163,"display_name":"markcasper"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":186,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73002876,"answer_count":1,"score":0,"last_activity_date":1657962068,"creation_date":1657897338,"question_id":72995975,"body_markdown":"I have a Spring Boot application (App1) that uses an embedded Tomcat. To specify the Port I added `server.port=8080` to the application.properties in my main application \r\nand it works fine.\r\n\r\nNow I add a dependency to another Spring Boot application (App2) in the pom.xml (because in App1 I need access to the Beans from App2). App2 uses also an embedded Tomcat on a different port.\r\n\r\nBut when I run App1 it crashes because App2 want to also use the same `server.port` and configurations - that obviously cannot work. \r\n\r\nIs this even possible what I want to achieve? And how would I do this that I can run both App2 in App1? If this is not possible, is it possible to access the Beans from App2 in App1?","title":"How to configure a Spring Boot Application that uses tomcat and has a dependency to another Application uses tomcat","body":"<p>I have a Spring Boot application (App1) that uses an embedded Tomcat. To specify the Port I added <code>server.port=8080</code> to the application.properties in my main application\nand it works fine.</p>\n<p>Now I add a dependency to another Spring Boot application (App2) in the pom.xml (because in App1 I need access to the Beans from App2). App2 uses also an embedded Tomcat on a different port.</p>\n<p>But when I run App1 it crashes because App2 want to also use the same <code>server.port</code> and configurations - that obviously cannot work.</p>\n<p>Is this even possible what I want to achieve? And how would I do this that I can run both App2 in App1? If this is not possible, is it possible to access the Beans from App2 in App1?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":2,"creation_date":1657953640,"post_id":73001971,"comment_id":128936540,"body_markdown":"You&#39;re not doing anything with `line` except printing it.","body":"You&#39;re not doing anything with <code>line</code> except printing it."},{"owner":{"account_id":25287141,"reputation":61,"user_id":19113888,"display_name":"Francois200212"},"score":0,"creation_date":1657953775,"post_id":73001971,"comment_id":128936564,"body_markdown":"@Bohemian how would i pass it to processLine via a function call?","body":"@Bohemian how would i pass it to processLine via a function call?"},{"owner":{"account_id":3023214,"reputation":20362,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":0,"creation_date":1657955142,"post_id":73001971,"comment_id":128936759,"body_markdown":"Ehhmmm ... `processLine(line)`?","body":"Ehhmmm ... <code>processLine(line)</code>?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1657955718,"post_id":73001971,"comment_id":128936824,"body_markdown":"Even if you were calling `processLine` you&#39;re still doing nothing with the data.","body":"Even if you were calling <code>processLine</code> you&#39;re still doing nothing with the data."},{"owner":{"account_id":25287141,"reputation":61,"user_id":19113888,"display_name":"Francois200212"},"score":0,"creation_date":1657956086,"post_id":73001971,"comment_id":128936892,"body_markdown":"@Seelenvirtuose where would this go? because I have processLine(String line), guessing thats not right, and in my main driver code I have readFile(&quot;filename.csv&quot;)","body":"@Seelenvirtuose where would this go? because I have processLine(String line), guessing thats not right, and in my main driver code I have readFile(&quot;filename.csv&quot;)"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1657956482,"post_id":73001971,"comment_id":128936966,"body_markdown":"In the body of this loop: `while((line != null) &amp;&amp; lineNum&lt;27)`, replace `System.out.println(line);` with `processLine(line);`","body":"In the body of this loop: <code>while((line != null) &amp;&amp; lineNum&lt;27)</code>, replace <code>System.out.println(line);</code> with <code>processLine(line);</code>"},{"owner":{"account_id":25287141,"reputation":61,"user_id":19113888,"display_name":"Francois200212"},"score":0,"creation_date":1657957601,"post_id":73001971,"comment_id":128937170,"body_markdown":"But now in my driver code, how would i index through this array to access particular values?","body":"But now in my driver code, how would i index through this array to access particular values?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1657958753,"post_id":73001971,"comment_id":128937350,"body_markdown":"`readFile` doesn&#39;t create an array of your data.","body":"<code>readFile</code> doesn&#39;t create an array of your data."},{"owner":{"account_id":25287141,"reputation":61,"user_id":19113888,"display_name":"Francois200212"},"score":0,"creation_date":1657958796,"post_id":73001971,"comment_id":128937360,"body_markdown":"Am i not creating an array at all?","body":"Am i not creating an array at all?"}],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657961438,"creation_date":1657959430,"answer_id":73002649,"question_id":73001971,"body_markdown":"You can do it quite simply using the [stream API][1].\r\n```java\r\nimport java.io.IOException;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Path;\r\nimport java.nio.file.Paths;\r\nimport java.util.stream.Collectors;\r\nimport java.util.stream.Stream;\r\n\r\npublic class CsvTest0 {\r\n\r\n    public static void main(String[] args) {\r\n        Path path = Paths.get(&quot;geografy.csv&quot;);\r\n        try (Stream&lt;String&gt; lines = Files.lines(path)) {\r\n            String[][] arr = lines.skip(1L)\r\n                                  .limit(27L)\r\n                                  .map(l -&gt; l.split(&quot;,&quot;))\r\n                                  .collect(Collectors.toList())\r\n                                  .toArray(new String[][]{});\r\n            System.out.println(arr[3][3]);\r\n            System.out.println(arr[5][6]);\r\n        }\r\n        catch (IOException xIo) {\r\n            xIo.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\nHowever, regarding the code in your question, below is a fixed version followed by notes and explanations.\r\n```java\r\nimport java.io.BufferedReader;\r\nimport java.io.IOException;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Path;\r\nimport java.nio.file.Paths;\r\n\r\npublic class CsvTest1 {\r\n    public static String[][] readFile(String file) throws IOException {\r\n        Path path = Paths.get(file);\r\n        String[][] arr = new String[27][];\r\n        int lineNum;\r\n        String line = null;\r\n        try (BufferedReader bufRdr = Files.newBufferedReader(path)) {\r\n            lineNum = 0;\r\n            line = bufRdr.readLine(); // Ignore first line of file since it contains headings only.\r\n            line = bufRdr.readLine();\r\n            while ((line != null) &amp;&amp; lineNum &lt; 27) {\r\n                arr[lineNum++] = processLine(line);\r\n                line = bufRdr.readLine();\r\n            }\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    private static String[] processLine(String line) {\r\n        return line.split(&quot;,&quot;);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        try {\r\n            String[][] arr = readFile(&quot;geografy.csv&quot;);\r\n            System.out.println(arr[3][3]);\r\n            System.out.println(arr[5][6]);\r\n        }\r\n        catch (IOException x) {\r\n            x.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\nNote that the below is not in any particular order. I wrote them as they came to me.\r\n\r\n* No need for `FileInputStream` and `InputStreamReader` in order to create `BufferedReader`. Use [Files][2] class instead.\r\n* Close files in a `finally` block and not in a `catch` block. Hence use [try-with-resources][3].\r\n* I believe better to propagate the [exception][4] to the calling method, i.e. method `main` in this case. I also believe that, unless you can safely ignore the exception, it is always beneficial to print the stack trace.\r\n* You don&#39;t want to process the first line of the file.\r\n* You appear to have your array indexes mixed up. According to sample data, Andorra is row 3 and column 3 (not column 4). Also, 17 is at [5][6] and not [6][6].\r\n* Two-dimensional arrays in java can be declared with only one dimension indicated. Since you only want first 27 lines of file, you know how many rows will be in the 2D array.\r\n\r\n\r\n  [1]: https://www.oracle.com/technical-resources/articles/java/architect-streams-pt2.html\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/file/Files.html\r\n  [3]: https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\r\n  [4]: https://docs.oracle.com/javase/tutorial/essential/exceptions/index.html","title":"Indexing through an array to return any specific value in java","body":"<p>You can do it quite simply using the <a href=\"https://www.oracle.com/technical-resources/articles/java/architect-streams-pt2.html\" rel=\"nofollow noreferrer\">stream API</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.IOException;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\nimport java.util.stream.Collectors;\nimport java.util.stream.Stream;\n\npublic class CsvTest0 {\n\n    public static void main(String[] args) {\n        Path path = Paths.get(&quot;geografy.csv&quot;);\n        try (Stream&lt;String&gt; lines = Files.lines(path)) {\n            String[][] arr = lines.skip(1L)\n                                  .limit(27L)\n                                  .map(l -&gt; l.split(&quot;,&quot;))\n                                  .collect(Collectors.toList())\n                                  .toArray(new String[][]{});\n            System.out.println(arr[3][3]);\n            System.out.println(arr[5][6]);\n        }\n        catch (IOException xIo) {\n            xIo.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>However, regarding the code in your question, below is a fixed version followed by notes and explanations.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\n\npublic class CsvTest1 {\n    public static String[][] readFile(String file) throws IOException {\n        Path path = Paths.get(file);\n        String[][] arr = new String[27][];\n        int lineNum;\n        String line = null;\n        try (BufferedReader bufRdr = Files.newBufferedReader(path)) {\n            lineNum = 0;\n            line = bufRdr.readLine(); // Ignore first line of file since it contains headings only.\n            line = bufRdr.readLine();\n            while ((line != null) &amp;&amp; lineNum &lt; 27) {\n                arr[lineNum++] = processLine(line);\n                line = bufRdr.readLine();\n            }\n        }\n        return arr;\n    }\n\n    private static String[] processLine(String line) {\n        return line.split(&quot;,&quot;);\n    }\n\n    public static void main(String[] args) {\n        try {\n            String[][] arr = readFile(&quot;geografy.csv&quot;);\n            System.out.println(arr[3][3]);\n            System.out.println(arr[5][6]);\n        }\n        catch (IOException x) {\n            x.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>Note that the below is not in any particular order. I wrote them as they came to me.</p>\n<ul>\n<li>No need for <code>FileInputStream</code> and <code>InputStreamReader</code> in order to create <code>BufferedReader</code>. Use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/file/Files.html\" rel=\"nofollow noreferrer\">Files</a> class instead.</li>\n<li>Close files in a <code>finally</code> block and not in a <code>catch</code> block. Hence use <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow noreferrer\">try-with-resources</a>.</li>\n<li>I believe better to propagate the <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/index.html\" rel=\"nofollow noreferrer\">exception</a> to the calling method, i.e. method <code>main</code> in this case. I also believe that, unless you can safely ignore the exception, it is always beneficial to print the stack trace.</li>\n<li>You don't want to process the first line of the file.</li>\n<li>You appear to have your array indexes mixed up. According to sample data, Andorra is row 3 and column 3 (not column 4). Also, 17 is at [5][6] and not [6][6].</li>\n<li>Two-dimensional arrays in java can be declared with only one dimension indicated. Since you only want first 27 lines of file, you know how many rows will be in the 2D array.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":23667337,"reputation":1467,"user_id":17694626,"display_name":"Cheng Thao"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1657961556,"creation_date":1657961556,"answer_id":73002837,"question_id":73001971,"body_markdown":"You need to create a 2D array in readFile.  As the file is read, and and each line is split by processLine, insert the array into the 2D array. The method readFile at the end returns the 2D array.  Make processLine to return a string array and have it return the result of the split.\r\n\r\nI marked where I made changes to your code.\r\n\r\n```\r\nimport java.io.*;\r\n\r\npublic class Main\r\n{\r\n   public static void main(String[] args){\r\n      String[][] data = readFile(&quot;data.txt&quot;);\r\n      System.out.println(data[3][4]);\r\n      System.out.println(data[6][6]);\r\n   }\r\n   \r\n   public static String[][] readFile(String file) {  //&lt;&lt;&lt; changed \r\n    FileInputStream fileStream = null;\r\n    InputStreamReader isr;\r\n    BufferedReader bufRdr;\r\n    int lineNum;\r\n    String line = null;\r\n    String[][] data = new String[28][];  //&lt;&lt;&lt; added\r\n    try {\r\n        fileStream = new FileInputStream(file);\r\n        isr = new InputStreamReader(fileStream);\r\n        bufRdr = new BufferedReader(isr);\r\n        lineNum = 0;\r\n        line = bufRdr.readLine();\r\n        while (lineNum &lt; 27) {  // &lt;&lt;&lt; changed\r\n            System.out.println(line);\r\n            line = bufRdr.readLine();\r\n            if (line == null) break;  // &lt;&lt;&lt; added\r\n            data[lineNum++] = processLine(line);  // &lt;&lt;&lt; added\r\n        }\r\n        fileStream.close();\r\n    }\r\n    catch (IOException e) {\r\n        if (fileStream != null) {\r\n            try {\r\n                fileStream.close();\r\n            }\r\n            catch (IOException ex2) {\r\n            }\r\n        }\r\n        System.out.println(&quot;Error: &quot; + e.getMessage());\r\n    }\r\n    return data;  //added\r\n}\r\n\r\nprivate static String[] processLine(String line) {  //&lt;&lt; changed\r\n    String[] splitLine;\r\n    splitLine = line.split(&quot;,&quot;);\r\n    int lineLength = splitLine.length;\r\n\r\n    for (int i = 0; i &lt; lineLength; i++) {\r\n        System.out.print(splitLine[i] + &quot; &quot;);\r\n    }\r\n    System.out.println(&quot;&quot;);\r\n    return splitLine;  // &lt;&lt;&lt; added\r\n}\r\n\r\n}\r\n```","title":"Indexing through an array to return any specific value in java","body":"<p>You need to create a 2D array in readFile.  As the file is read, and and each line is split by processLine, insert the array into the 2D array. The method readFile at the end returns the 2D array.  Make processLine to return a string array and have it return the result of the split.</p>\n<p>I marked where I made changes to your code.</p>\n<pre><code>import java.io.*;\n\npublic class Main\n{\n   public static void main(String[] args){\n      String[][] data = readFile(&quot;data.txt&quot;);\n      System.out.println(data[3][4]);\n      System.out.println(data[6][6]);\n   }\n   \n   public static String[][] readFile(String file) {  //&lt;&lt;&lt; changed \n    FileInputStream fileStream = null;\n    InputStreamReader isr;\n    BufferedReader bufRdr;\n    int lineNum;\n    String line = null;\n    String[][] data = new String[28][];  //&lt;&lt;&lt; added\n    try {\n        fileStream = new FileInputStream(file);\n        isr = new InputStreamReader(fileStream);\n        bufRdr = new BufferedReader(isr);\n        lineNum = 0;\n        line = bufRdr.readLine();\n        while (lineNum &lt; 27) {  // &lt;&lt;&lt; changed\n            System.out.println(line);\n            line = bufRdr.readLine();\n            if (line == null) break;  // &lt;&lt;&lt; added\n            data[lineNum++] = processLine(line);  // &lt;&lt;&lt; added\n        }\n        fileStream.close();\n    }\n    catch (IOException e) {\n        if (fileStream != null) {\n            try {\n                fileStream.close();\n            }\n            catch (IOException ex2) {\n            }\n        }\n        System.out.println(&quot;Error: &quot; + e.getMessage());\n    }\n    return data;  //added\n}\n\nprivate static String[] processLine(String line) {  //&lt;&lt; changed\n    String[] splitLine;\n    splitLine = line.split(&quot;,&quot;);\n    int lineLength = splitLine.length;\n\n    for (int i = 0; i &lt; lineLength; i++) {\n        System.out.print(splitLine[i] + &quot; &quot;);\n    }\n    System.out.println(&quot;&quot;);\n    return splitLine;  // &lt;&lt;&lt; added\n}\n\n}\n</code></pre>\n"}],"owner":{"account_id":25287141,"reputation":61,"user_id":19113888,"display_name":"Francois200212"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73002837,"answer_count":2,"score":-1,"last_activity_date":1657961556,"creation_date":1657952352,"question_id":73001971,"body_markdown":"So, I have created code which is reading a CSV file line by line, then splitting each line into their individual values then putting this into an array, but i am stuck on trying the index a value from this array I have created, I will attach the CSV file and also my code, and lets say for example how would I access the value at [3,4], which should be Andorra, and [6,6] which should be 17?\r\n\r\nCSV FILE:\r\n\r\n    Date,iso3,Continent,CountryName,lat,lon,CumulativePositive,CumulativeDeceased,CumulativeRecovered,CurrentlyPositive,Hospitalized,IntensiveCare,NUTS\r\n    31/1/2021,AFG,AS,Afghanistan,33.930445,67.678945,55023,2400,,52623,,,AF\r\n    31/1/2021,ALB,EU,Albania,41.156986,20.181222,78127,1380,47424,29323,324,19,AL\r\n    31/1/2021,DZA,AF,Algeria,28.026875,1.65284,107122,2888,,104234,,,DZ\r\n    31/1/2021,AND,EU,Andorra,42.542268,1.596865,9937,101,,9836,44,,AD\r\n    31/1/2021,AGO,AF,Angola,-11.209451,17.880669,19782,464,,19318,,,AO\r\n    31/1/2021,AIA,NA,Anguilla,18.225119,-63.07213,17,0,,17,,,AI\r\n    31/1/2021,ATG,NA,Antigua and Barbuda,17.363183,-61.789423,218,7,,211,,,AG\r\n    31/1/2021,ARG,SA,Argentina,-38.421295,-63.587403,1915362,47775,,1867587,,,AR\r\n    31/1/2021,ARM,AS,Armenia,40.066181,45.111108,167026,3080,,163946,,,AM\r\n    31/1/2021,ABW,NA,Aruba,12.517713,-69.965112,6858,58,,6800,,,AW\r\n    31/1/2021,AUS,OC,Australia,-26.853388,133.275154,28806,909,,27897,,,AU\r\n    31/1/2021,AUT,EU,Austria,47.697542,13.349319,411921,7850,383158,21058,1387,297,AT\r\n    31/1/2021,AZE,AS,Azerbaijan,40.147396,47.572098,229935,3119,,226816,,,AZ\r\n    31/1/2021,BHS,NA,Bahamas,24.885993,-76.709892,8174,176,,7998,,,BS\r\n    31/1/2021,BHR,AS,Bahrain,26.039722,50.559306,102626,372,,102254,,,BH\r\n    31/1/2021,BGD,AS,Bangladesh,23.68764,90.351002,535139,8127,,527012,,,BD\r\n    31/1/2021,BRB,NA,Barbados,13.18355,-59.534649,1498,12,,1486,,,BB\r\n    31/1/2021,BLR,EU,Belarus,53.711111,27.973847,248336,1718,,246618,,,BY\r\n    31/1/2021,BEL,EU,Belgium,50.499527,4.475402,711417,21118,,690299,1788,315,BE\r\n    31/1/2021,BLZ,NA,Belize,17.192929,-88.5009,11877,301,,11576,,,BZ\r\n    31/1/2021,BEN,AF,Benin,9.322048,2.313138,3786,48,,3738,,,BJ\r\n    31/1/2021,BMU,NA,Bermuda,32.320236,-64.774022,691,12,,679,,,BM\r\n    31/1/2021,BTN,AS,Bhutan,27.515709,90.442455,859,1,,858,,,BT\r\n    31/1/2021,BWA,AF,Botswana,-22.344029,24.680158,21293,134,,21159,,,BW\r\n    31/1/2021,BRA,SA,Brazil,-14.242915,-53.189267,9118513,222666,,8895847,,,BR\r\n    31/1/2021,VGB,NA,British Virgin Islands,18.573601,-64.492065,141,1,,140,,,VG\r\n\r\nCODE:\r\n\r\n    public static String readFile(String file) {\r\n        FileInputStream fileStream = null;\r\n        InputStreamReader isr;\r\n        BufferedReader bufRdr;\r\n        int lineNum;\r\n        String line = null;\r\n        try {\r\n            fileStream = new FileInputStream(file);\r\n            isr = new InputStreamReader(fileStream);\r\n            bufRdr = new BufferedReader(isr);\r\n            lineNum = 0;\r\n            line = bufRdr.readLine();\r\n            while ((line != null) &amp;&amp; lineNum &lt; 27) {\r\n                lineNum++;\r\n                System.out.println(line);\r\n                line = bufRdr.readLine();\r\n            }\r\n            fileStream.close();\r\n        }\r\n        catch (IOException e) {\r\n            if (fileStream != null) {\r\n                try {\r\n                    fileStream.close();\r\n                }\r\n                catch (IOException ex2) {\r\n                }\r\n            }\r\n            System.out.println(&quot;Error: &quot; + e.getMessage());\r\n        }\r\n        return line;\r\n    }\r\n\r\n    private static void processLine(String line) {\r\n        String[] splitLine;\r\n        splitLine = line.split(&quot;,&quot;);\r\n        int lineLength = splitLine.length;\r\n\r\n        for (int i = 0; i &lt; lineLength; i++) {\r\n            System.out.print(splitLine[i] + &quot; &quot;);\r\n        }\r\n        System.out.println(&quot;&quot;);\r\n    }\r\n\r\n","title":"Indexing through an array to return any specific value in java","body":"<p>So, I have created code which is reading a CSV file line by line, then splitting each line into their individual values then putting this into an array, but i am stuck on trying the index a value from this array I have created, I will attach the CSV file and also my code, and lets say for example how would I access the value at [3,4], which should be Andorra, and [6,6] which should be 17?</p>\n<p>CSV FILE:</p>\n<pre><code>Date,iso3,Continent,CountryName,lat,lon,CumulativePositive,CumulativeDeceased,CumulativeRecovered,CurrentlyPositive,Hospitalized,IntensiveCare,NUTS\n31/1/2021,AFG,AS,Afghanistan,33.930445,67.678945,55023,2400,,52623,,,AF\n31/1/2021,ALB,EU,Albania,41.156986,20.181222,78127,1380,47424,29323,324,19,AL\n31/1/2021,DZA,AF,Algeria,28.026875,1.65284,107122,2888,,104234,,,DZ\n31/1/2021,AND,EU,Andorra,42.542268,1.596865,9937,101,,9836,44,,AD\n31/1/2021,AGO,AF,Angola,-11.209451,17.880669,19782,464,,19318,,,AO\n31/1/2021,AIA,NA,Anguilla,18.225119,-63.07213,17,0,,17,,,AI\n31/1/2021,ATG,NA,Antigua and Barbuda,17.363183,-61.789423,218,7,,211,,,AG\n31/1/2021,ARG,SA,Argentina,-38.421295,-63.587403,1915362,47775,,1867587,,,AR\n31/1/2021,ARM,AS,Armenia,40.066181,45.111108,167026,3080,,163946,,,AM\n31/1/2021,ABW,NA,Aruba,12.517713,-69.965112,6858,58,,6800,,,AW\n31/1/2021,AUS,OC,Australia,-26.853388,133.275154,28806,909,,27897,,,AU\n31/1/2021,AUT,EU,Austria,47.697542,13.349319,411921,7850,383158,21058,1387,297,AT\n31/1/2021,AZE,AS,Azerbaijan,40.147396,47.572098,229935,3119,,226816,,,AZ\n31/1/2021,BHS,NA,Bahamas,24.885993,-76.709892,8174,176,,7998,,,BS\n31/1/2021,BHR,AS,Bahrain,26.039722,50.559306,102626,372,,102254,,,BH\n31/1/2021,BGD,AS,Bangladesh,23.68764,90.351002,535139,8127,,527012,,,BD\n31/1/2021,BRB,NA,Barbados,13.18355,-59.534649,1498,12,,1486,,,BB\n31/1/2021,BLR,EU,Belarus,53.711111,27.973847,248336,1718,,246618,,,BY\n31/1/2021,BEL,EU,Belgium,50.499527,4.475402,711417,21118,,690299,1788,315,BE\n31/1/2021,BLZ,NA,Belize,17.192929,-88.5009,11877,301,,11576,,,BZ\n31/1/2021,BEN,AF,Benin,9.322048,2.313138,3786,48,,3738,,,BJ\n31/1/2021,BMU,NA,Bermuda,32.320236,-64.774022,691,12,,679,,,BM\n31/1/2021,BTN,AS,Bhutan,27.515709,90.442455,859,1,,858,,,BT\n31/1/2021,BWA,AF,Botswana,-22.344029,24.680158,21293,134,,21159,,,BW\n31/1/2021,BRA,SA,Brazil,-14.242915,-53.189267,9118513,222666,,8895847,,,BR\n31/1/2021,VGB,NA,British Virgin Islands,18.573601,-64.492065,141,1,,140,,,VG\n</code></pre>\n<p>CODE:</p>\n<pre><code>public static String readFile(String file) {\n    FileInputStream fileStream = null;\n    InputStreamReader isr;\n    BufferedReader bufRdr;\n    int lineNum;\n    String line = null;\n    try {\n        fileStream = new FileInputStream(file);\n        isr = new InputStreamReader(fileStream);\n        bufRdr = new BufferedReader(isr);\n        lineNum = 0;\n        line = bufRdr.readLine();\n        while ((line != null) &amp;&amp; lineNum &lt; 27) {\n            lineNum++;\n            System.out.println(line);\n            line = bufRdr.readLine();\n        }\n        fileStream.close();\n    }\n    catch (IOException e) {\n        if (fileStream != null) {\n            try {\n                fileStream.close();\n            }\n            catch (IOException ex2) {\n            }\n        }\n        System.out.println(&quot;Error: &quot; + e.getMessage());\n    }\n    return line;\n}\n\nprivate static void processLine(String line) {\n    String[] splitLine;\n    splitLine = line.split(&quot;,&quot;);\n    int lineLength = splitLine.length;\n\n    for (int i = 0; i &lt; lineLength; i++) {\n        System.out.print(splitLine[i] + &quot; &quot;);\n    }\n    System.out.println(&quot;&quot;);\n}\n</code></pre>\n"},{"tags":["java","generic-type-parameters"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":7,"creation_date":1657898007,"post_id":72996021,"comment_id":128926633,"body_markdown":"first essential difference: first is posted as text (easy to read, copy, ...); second is pasted as image (hard to read, impossible to copy, ...) || [Why should I not upload images of code/data/errors when asking a question?](https://meta.stackoverflow.com/q/285551/16320675) (at least not only as image)","body":"first essential difference: first is posted as text (easy to read, copy, ...); second is pasted as image (hard to read, impossible to copy, ...) || <a href=\"https://meta.stackoverflow.com/q/285551/16320675\">Why should I not upload images of code/data/errors when asking a question?</a> (at least not only as image)"},{"owner":{"account_id":2139538,"reputation":42511,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":6,"creation_date":1657898206,"post_id":72996021,"comment_id":128926706,"body_markdown":"It&#39;s not grammatically illegal. Your grammar is fine. It&#39;s the type system that&#39;s complaining. U is erased to Object. `cl.getClass()` is `Class&lt;?&gt;`. The result of creating a class with that constructor is an instance of unknown type.","body":"It&#39;s not grammatically illegal. Your grammar is fine. It&#39;s the type system that&#39;s complaining. U is erased to Object. <code>cl.getClass()</code> is <code>Class&lt;?&gt;</code>. The result of creating a class with that constructor is an instance of unknown type."},{"owner":{"account_id":9698772,"reputation":181,"user_id":7194392,"display_name":"Jack Ma"},"score":0,"creation_date":1657951602,"post_id":72996021,"comment_id":128936324,"body_markdown":"@user16320675 sorry, I just want to show the error message on the image","body":"@user16320675 sorry, I just want to show the error message on the image"},{"owner":{"account_id":9698772,"reputation":181,"user_id":7194392,"display_name":"Jack Ma"},"score":0,"creation_date":1657952889,"post_id":72996021,"comment_id":128936460,"body_markdown":"@Michael For the first case, what does param `Class&lt;U&gt;` look like after type erase? It becomes raw type `Class` ?","body":"@Michael For the first case, what does param <code>Class&lt;U&gt;</code> look like after type erase? It becomes raw type <code>Class</code> ?"}],"answers":[{"tags":[],"owner":{"account_id":433372,"reputation":406,"user_id":818667,"display_name":"Pierre Carrier"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1657961225,"creation_date":1657961225,"answer_id":73002804,"question_id":72996021,"body_markdown":"`Object.getClass()` returns `Class&lt;?&gt;`, so you need to cast. `makePair2` does so directly but at the end, `makePair3` uses `getClass` which isolates where the casting is required.\r\n\r\n```java\r\n    public static &lt;U&gt; PairT&lt;U&gt; makePair1(Class&lt;U&gt; cl) throws Exception {\r\n        return new PairT&lt;U&gt;(cl.getConstructor().newInstance(),\r\n                cl.getConstructor().newInstance());\r\n    }\r\n\r\n    public static &lt;U&gt; PairT&lt;U&gt; makePair2(U cl) throws Exception {\r\n        return new PairT&lt;U&gt;(\r\n                (U) cl.getClass().getConstructor().newInstance(),\r\n                (U) cl.getClass().getConstructor().newInstance());\r\n    }\r\n\r\n    private static &lt;U&gt; Class&lt;U&gt; getClass(U u) {\r\n        return (Class&lt;U&gt;) u.getClass();\r\n    }\r\n\r\n    public static &lt;U&gt; PairT&lt;U&gt; makePair3(U cl) throws Exception {\r\n        return new PairT&lt;U&gt;(\r\n                getClass(cl).getConstructor().newInstance(),\r\n                getClass(cl).getConstructor().newInstance());\r\n    }\r\n```","title":"Java Generic Type new instance","body":"<p><code>Object.getClass()</code> returns <code>Class&lt;?&gt;</code>, so you need to cast. <code>makePair2</code> does so directly but at the end, <code>makePair3</code> uses <code>getClass</code> which isolates where the casting is required.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static &lt;U&gt; PairT&lt;U&gt; makePair1(Class&lt;U&gt; cl) throws Exception {\n        return new PairT&lt;U&gt;(cl.getConstructor().newInstance(),\n                cl.getConstructor().newInstance());\n    }\n\n    public static &lt;U&gt; PairT&lt;U&gt; makePair2(U cl) throws Exception {\n        return new PairT&lt;U&gt;(\n                (U) cl.getClass().getConstructor().newInstance(),\n                (U) cl.getClass().getConstructor().newInstance());\n    }\n\n    private static &lt;U&gt; Class&lt;U&gt; getClass(U u) {\n        return (Class&lt;U&gt;) u.getClass();\n    }\n\n    public static &lt;U&gt; PairT&lt;U&gt; makePair3(U cl) throws Exception {\n        return new PairT&lt;U&gt;(\n                getClass(cl).getConstructor().newInstance(),\n                getClass(cl).getConstructor().newInstance());\n    }\n</code></pre>\n"}],"owner":{"account_id":9698772,"reputation":181,"user_id":7194392,"display_name":"Jack Ma"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1657961225,"creation_date":1657897578,"question_id":72996021,"body_markdown":"\r\n\r\n```java\r\npublic class PairT &lt;T&gt;{\r\n    public T first;\r\n    public T second;\r\n\r\n    public T getFirst() {\r\n        return first;\r\n    }\r\n\r\n    public void setFirst(T first) {\r\n        this.first = first;\r\n    }\r\n\r\n    public T getSecond() {\r\n        return second;\r\n    }\r\n\r\n    public void setSecond(T second) {\r\n        this.second = second;\r\n    }\r\n\r\n    public PairT(T first, T second) {\r\n        this.first = first;\r\n        this.second = second;\r\n    }\r\n    public PairT() {\r\n    }\r\n```\r\nWhat is the diffirence between these two `makePair` methods essentially? \r\nWhy the second one is grammatically illegal?\r\n\r\nFirst one:\r\n```java\r\npublic static &lt;U&gt; PairT&lt;U&gt; makePair(Class&lt;U&gt; cl) throws Exception {\r\n        return new PairT&lt;U&gt;(cl.getConstructor().newInstance(),\r\n                            cl.getConstructor().newInstance());\r\n    }\r\n```\r\nSecond:\r\n```\r\npublic static &lt;U&gt; PairT&lt;U&gt; makePair(U cl) throws Exception {\r\n        return new PairT&lt;U(\r\n                  cl.getClass().getConstructor().newInstance(), \r\n                  cl.getClass().getConstructor().newInstance());\r\n    }\r\n```","title":"Java Generic Type new instance","body":"<pre class=\"lang-java prettyprint-override\"><code>public class PairT &lt;T&gt;{\n    public T first;\n    public T second;\n\n    public T getFirst() {\n        return first;\n    }\n\n    public void setFirst(T first) {\n        this.first = first;\n    }\n\n    public T getSecond() {\n        return second;\n    }\n\n    public void setSecond(T second) {\n        this.second = second;\n    }\n\n    public PairT(T first, T second) {\n        this.first = first;\n        this.second = second;\n    }\n    public PairT() {\n    }\n</code></pre>\n<p>What is the diffirence between these two <code>makePair</code> methods essentially?\nWhy the second one is grammatically illegal?</p>\n<p>First one:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static &lt;U&gt; PairT&lt;U&gt; makePair(Class&lt;U&gt; cl) throws Exception {\n        return new PairT&lt;U&gt;(cl.getConstructor().newInstance(),\n                            cl.getConstructor().newInstance());\n    }\n</code></pre>\n<p>Second:</p>\n<pre><code>public static &lt;U&gt; PairT&lt;U&gt; makePair(U cl) throws Exception {\n        return new PairT&lt;U(\n                  cl.getClass().getConstructor().newInstance(), \n                  cl.getClass().getConstructor().newInstance());\n    }\n</code></pre>\n"},{"tags":["java","user-interface","data-binding","fonts","javafx"],"answers":[{"tags":[],"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1400284069,"creation_date":1400283265,"answer_id":23706030,"question_id":23705654,"body_markdown":"**Set the .root -fx-font-size**\r\n\r\n 1. Create a [custom stylesheet][1] for your application.\r\n 2. In sylesheet `.root` selector, set `-fx-font-size` to your desired value:\r\n\r\n    .root {\r\n        -fx-font-size: 40px;\r\n    }\r\n\r\n**Why this works**\r\n\r\nThis works because:\r\n\r\n 1. All of the default controls are based on [`em`][2] units (which are based on the default font size).\r\n 2. `-fx-font-size` is an [inherited][3] style.\r\n 3. Everything inherits from the root.\r\n\r\nOnce you do this, all controls (and the text inside them) will automatically resize nicely to fit whatever font size you specified.\r\n\r\n**Related Sample**\r\n\r\n * https://stackoverflow.com/questions/23229149/javafx-automatic-resizing-and-button-padding\r\n\r\n**Related Information**\r\n\r\n`em` is a generic unit that is not specific to JavaFX and em units are also used in HTML CSS.  If interested, you can read a [broader discussion on em units versus other units][4].\r\n\r\n**Using em units in FXML via expression binding**\r\n\r\nJust setting a default font size gets you about 90% of the way to where you need to be, but is not necessarily a universal fix as some layout units might be specified not using em units.  Most of the time this isn&#39;t really an issue, but if it is in your case, you could also apply a mechanism described in an [Oracle developer mailing list post][5], which appears to work, though is a little clunky.\r\n\r\nHow about using an expression binding.\r\n\r\nFor 35em x 25em you could write:\r\n\r\n    prefWidth=&quot;${35*u.em}&quot; prefHeight=&quot;${25*u.em}&quot;\r\n\r\nIt&#39;s not 100% concise, but perhaps passable.\r\n\r\nThese kind of sizing expressions work in scene builder 1.1, which is nice.\r\n\r\n-------\r\n\r\nHere is an example using a Rectangle to store the width and height modifiers for the fxml file.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;?import javafx.scene.control.*?&gt;\r\n    &lt;?import javafx.scene.layout.*?&gt;\r\n    &lt;?import javafx.scene.shape.*?&gt;\r\n    \r\n    &lt;StackPane xmlns:fx=&quot;http://javafx.com/fxml&quot;&gt;\r\n    &lt;fx:define&gt;\r\n      &lt;Rectangle fx:id=&quot;s&quot; width=&quot;13&quot; height=&quot;13&quot;/&gt;\r\n    &lt;/fx:define&gt;\r\n    &lt;AnchorPane id=&quot;AnchorPane&quot; maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; prefHeight=&quot;${22 * s.width}&quot; prefWidth=&quot;${14 * s.height}&quot;&gt;\r\n      &lt;children&gt;\r\n        &lt;Button layoutX=&quot;${4 * s.width}&quot; layoutY=&quot;${ 5 * s.height}&quot; prefWidth=&quot;${6 * s.width}&quot; text=&quot;Top&quot; /&gt;\r\n        &lt;Button layoutX=&quot;${4 * s.width}&quot; layoutY=&quot;${10 * s.height}&quot; prefWidth=&quot;${6 * s.width}&quot; text=&quot;Middle&quot; /&gt;\r\n        &lt;Button layoutX=&quot;${4 * s.width}&quot; layoutY=&quot;${15 * s.height}&quot; prefWidth=&quot;${6 * s.width}&quot; text=&quot;Bottom&quot; /&gt;\r\n      &lt;/children&gt;\r\n    &lt;/AnchorPane&gt;\r\n    &lt;/StackPane&gt;\r\n\r\n-------\r\n\r\nOr instead, you can create your own unit class and use it in your sizing expressions, for example:\r\n\r\n    package org.jewelsea.measure;\r\n    \r\n    public class Measurement {\r\n      private double em;\r\n      public  void   setEm(double em) { this.em = em; }\r\n      public  double getEm()          { return em; }\r\n    }\r\n    \r\n    . . .\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;?import javafx.scene.control.*?&gt;\r\n    &lt;?import javafx.scene.layout.*?&gt;\r\n    &lt;?import org.jewelsea.measure.Measurement?&gt;\r\n    &lt;?scenebuilder-classpath-element .?&gt;\r\n    \r\n    &lt;StackPane xmlns:fx=&quot;http://javafx.com/fxml&quot;&gt;\r\n      &lt;fx:define&gt;\r\n        &lt;Measurement fx:id=&quot;u&quot; em=&quot;26.0&quot; /&gt;\r\n      &lt;/fx:define&gt;\r\n      &lt;AnchorPane id=&quot;AnchorPane&quot; maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; prefHeight=&quot;${22*u.em}&quot; prefWidth=&quot;${14*u.em}&quot;&gt;\r\n        &lt;children&gt;\r\n          &lt;Button layoutX=&quot;${4*u.em}&quot; layoutY=&quot;${ 5*u.em}&quot; prefWidth=&quot;${6*u.em}&quot; text=&quot;Top&quot; /&gt;\r\n          &lt;Button layoutX=&quot;${4*u.em}&quot; layoutY=&quot;${10*u.em}&quot; prefWidth=&quot;${6*u.em}&quot; text=&quot;Middle&quot; /&gt;\r\n          &lt;Button layoutX=&quot;${4*u.em}&quot; layoutY=&quot;${15*u.em}&quot; prefWidth=&quot;${6*u.em}&quot; text=&quot;Bottom&quot; /&gt;\r\n        &lt;/children&gt;\r\n      &lt;/AnchorPane&gt;\r\n    &lt;/StackPane&gt;\r\n\r\n\r\n  [1]: http://docs.oracle.com/javafx/2/css_tutorial/jfxpub-css_tutorial.htm\r\n  [2]: http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html#typelength\r\n  [3]: http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html#introinheritance\r\n  [4]: http://kyleschaeffer.com/development/css-font-size-em-vs-px-vs-pt-vs/\r\n  [5]: http://mail.openjdk.java.net/pipermail/openjfx-dev/2013-May/007738.html","title":"Bind Font Size in JavaFX?","body":"<p><strong>Set the .root -fx-font-size</strong></p>\n\n<ol>\n<li>Create a <a href=\"http://docs.oracle.com/javafx/2/css_tutorial/jfxpub-css_tutorial.htm\" rel=\"nofollow noreferrer\">custom stylesheet</a> for your application.</li>\n<li><p>In sylesheet <code>.root</code> selector, set <code>-fx-font-size</code> to your desired value:</p>\n\n<p>.root {\n    -fx-font-size: 40px;\n}</p></li>\n</ol>\n\n<p><strong>Why this works</strong></p>\n\n<p>This works because:</p>\n\n<ol>\n<li>All of the default controls are based on <a href=\"http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html#typelength\" rel=\"nofollow noreferrer\"><code>em</code></a> units (which are based on the default font size).</li>\n<li><code>-fx-font-size</code> is an <a href=\"http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html#introinheritance\" rel=\"nofollow noreferrer\">inherited</a> style.</li>\n<li>Everything inherits from the root.</li>\n</ol>\n\n<p>Once you do this, all controls (and the text inside them) will automatically resize nicely to fit whatever font size you specified.</p>\n\n<p><strong>Related Sample</strong></p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/23229149/javafx-automatic-resizing-and-button-padding\">javafx automatic resizing and button padding</a></li>\n</ul>\n\n<p><strong>Related Information</strong></p>\n\n<p><code>em</code> is a generic unit that is not specific to JavaFX and em units are also used in HTML CSS.  If interested, you can read a <a href=\"http://kyleschaeffer.com/development/css-font-size-em-vs-px-vs-pt-vs/\" rel=\"nofollow noreferrer\">broader discussion on em units versus other units</a>.</p>\n\n<p><strong>Using em units in FXML via expression binding</strong></p>\n\n<p>Just setting a default font size gets you about 90% of the way to where you need to be, but is not necessarily a universal fix as some layout units might be specified not using em units.  Most of the time this isn't really an issue, but if it is in your case, you could also apply a mechanism described in an <a href=\"http://mail.openjdk.java.net/pipermail/openjfx-dev/2013-May/007738.html\" rel=\"nofollow noreferrer\">Oracle developer mailing list post</a>, which appears to work, though is a little clunky.</p>\n\n<p>How about using an expression binding.</p>\n\n<p>For 35em x 25em you could write:</p>\n\n<pre><code>prefWidth=\"${35*u.em}\" prefHeight=\"${25*u.em}\"\n</code></pre>\n\n<p>It's not 100% concise, but perhaps passable.</p>\n\n<p>These kind of sizing expressions work in scene builder 1.1, which is nice.</p>\n\n<hr>\n\n<p>Here is an example using a Rectangle to store the width and height modifiers for the fxml file.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n&lt;?import javafx.scene.shape.*?&gt;\n\n&lt;StackPane xmlns:fx=\"http://javafx.com/fxml\"&gt;\n&lt;fx:define&gt;\n  &lt;Rectangle fx:id=\"s\" width=\"13\" height=\"13\"/&gt;\n&lt;/fx:define&gt;\n&lt;AnchorPane id=\"AnchorPane\" maxHeight=\"-Infinity\" maxWidth=\"-Infinity\" minHeight=\"-Infinity\" minWidth=\"-Infinity\" prefHeight=\"${22 * s.width}\" prefWidth=\"${14 * s.height}\"&gt;\n  &lt;children&gt;\n    &lt;Button layoutX=\"${4 * s.width}\" layoutY=\"${ 5 * s.height}\" prefWidth=\"${6 * s.width}\" text=\"Top\" /&gt;\n    &lt;Button layoutX=\"${4 * s.width}\" layoutY=\"${10 * s.height}\" prefWidth=\"${6 * s.width}\" text=\"Middle\" /&gt;\n    &lt;Button layoutX=\"${4 * s.width}\" layoutY=\"${15 * s.height}\" prefWidth=\"${6 * s.width}\" text=\"Bottom\" /&gt;\n  &lt;/children&gt;\n&lt;/AnchorPane&gt;\n&lt;/StackPane&gt;\n</code></pre>\n\n<hr>\n\n<p>Or instead, you can create your own unit class and use it in your sizing expressions, for example:</p>\n\n<pre><code>package org.jewelsea.measure;\n\npublic class Measurement {\n  private double em;\n  public  void   setEm(double em) { this.em = em; }\n  public  double getEm()          { return em; }\n}\n\n. . .\n\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n&lt;?import org.jewelsea.measure.Measurement?&gt;\n&lt;?scenebuilder-classpath-element .?&gt;\n\n&lt;StackPane xmlns:fx=\"http://javafx.com/fxml\"&gt;\n  &lt;fx:define&gt;\n    &lt;Measurement fx:id=\"u\" em=\"26.0\" /&gt;\n  &lt;/fx:define&gt;\n  &lt;AnchorPane id=\"AnchorPane\" maxHeight=\"-Infinity\" maxWidth=\"-Infinity\" minHeight=\"-Infinity\" minWidth=\"-Infinity\" prefHeight=\"${22*u.em}\" prefWidth=\"${14*u.em}\"&gt;\n    &lt;children&gt;\n      &lt;Button layoutX=\"${4*u.em}\" layoutY=\"${ 5*u.em}\" prefWidth=\"${6*u.em}\" text=\"Top\" /&gt;\n      &lt;Button layoutX=\"${4*u.em}\" layoutY=\"${10*u.em}\" prefWidth=\"${6*u.em}\" text=\"Middle\" /&gt;\n      &lt;Button layoutX=\"${4*u.em}\" layoutY=\"${15*u.em}\" prefWidth=\"${6*u.em}\" text=\"Bottom\" /&gt;\n    &lt;/children&gt;\n  &lt;/AnchorPane&gt;\n&lt;/StackPane&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3101890,"reputation":10709,"user_id":2855515,"accept_rate":100,"display_name":"brian"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1400859956,"creation_date":1400858088,"answer_id":23832850,"question_id":23705654,"body_markdown":"Just put everything where you want the fontsize to change in a container and set that style or use bindings if you want.\r\n\r\n    import javafx.application.Application;\r\n    import javafx.beans.binding.Bindings;\r\n    import javafx.beans.property.DoubleProperty;\r\n    import javafx.beans.property.IntegerProperty;\r\n    import javafx.beans.property.SimpleDoubleProperty;\r\n    import javafx.beans.property.SimpleIntegerProperty;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.Button;\r\n    import javafx.scene.control.Label;\r\n    import javafx.scene.control.TextArea;\r\n    import javafx.scene.layout.HBox;\r\n    import javafx.scene.layout.VBox;\r\n    import javafx.stage.Stage;\r\n\r\n    public class FontBind extends Application {\r\n\r\n        private DoubleProperty fontSize = new SimpleDoubleProperty(10);\r\n        private IntegerProperty blues = new SimpleIntegerProperty(50);\r\n\r\n        @Override\r\n        public void start(Stage primaryStage) {\r\n            Button btn = new Button(&quot;click me, I change color&quot;);\r\n            btn.setOnAction((evt)-&gt;{blues.set(blues.get()+20);});//max?\r\n            Label lbl = new Label(&quot;I&#39;m a label&quot;);\r\n            TextArea ta = new TextArea(&quot;Lots of text can be typed\\nand even number 1234567890&quot;);\r\n            HBox hbox = new HBox(new Label(&quot;I never change&quot;));\r\n            VBox child = new VBox(btn, lbl, ta);\r\n            VBox root = new VBox(child, hbox);\r\n            Scene scene = new Scene(root, 300, 250);\r\n\r\n            fontSize.bind(scene.widthProperty().add(scene.heightProperty()).divide(50));\r\n            child.styleProperty().bind(Bindings.concat(&quot;-fx-font-size: &quot;, fontSize.asString(), &quot;;&quot;\r\n                                                      ,&quot;-fx-base: rgb(100,100,&quot;,blues.asString(),&quot;);&quot;));\r\n\r\n            primaryStage.setTitle(&quot;Hello World!&quot;);\r\n            primaryStage.setScene(scene);\r\n            primaryStage.show();\r\n        }\r\n\r\n        public static void main(String[] args) {\r\n            launch(args);\r\n        }\r\n\r\n    }\r\n\r\nI&#39;m not sure what your style is already bound to, but you&#39;re allowed to set multiple css values in the style string.\r\n","title":"Bind Font Size in JavaFX?","body":"<p>Just put everything where you want the fontsize to change in a container and set that style or use bindings if you want.</p>\n\n<pre><code>import javafx.application.Application;\nimport javafx.beans.binding.Bindings;\nimport javafx.beans.property.DoubleProperty;\nimport javafx.beans.property.IntegerProperty;\nimport javafx.beans.property.SimpleDoubleProperty;\nimport javafx.beans.property.SimpleIntegerProperty;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.Label;\nimport javafx.scene.control.TextArea;\nimport javafx.scene.layout.HBox;\nimport javafx.scene.layout.VBox;\nimport javafx.stage.Stage;\n\npublic class FontBind extends Application {\n\n    private DoubleProperty fontSize = new SimpleDoubleProperty(10);\n    private IntegerProperty blues = new SimpleIntegerProperty(50);\n\n    @Override\n    public void start(Stage primaryStage) {\n        Button btn = new Button(\"click me, I change color\");\n        btn.setOnAction((evt)-&gt;{blues.set(blues.get()+20);});//max?\n        Label lbl = new Label(\"I'm a label\");\n        TextArea ta = new TextArea(\"Lots of text can be typed\\nand even number 1234567890\");\n        HBox hbox = new HBox(new Label(\"I never change\"));\n        VBox child = new VBox(btn, lbl, ta);\n        VBox root = new VBox(child, hbox);\n        Scene scene = new Scene(root, 300, 250);\n\n        fontSize.bind(scene.widthProperty().add(scene.heightProperty()).divide(50));\n        child.styleProperty().bind(Bindings.concat(\"-fx-font-size: \", fontSize.asString(), \";\"\n                                                  ,\"-fx-base: rgb(100,100,\",blues.asString(),\");\"));\n\n        primaryStage.setTitle(\"Hello World!\");\n        primaryStage.setScene(scene);\n        primaryStage.show();\n    }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n}\n</code></pre>\n\n<p>I'm not sure what your style is already bound to, but you're allowed to set multiple css values in the style string.</p>\n"},{"tags":[],"owner":{"account_id":50198,"reputation":414,"user_id":1409655,"display_name":"jalopezsuarez"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1451913121,"creation_date":1451913121,"answer_id":34591983,"question_id":23705654,"body_markdown":"There is a simplest and proper method to bind font size with the container size, in order to make it in a responsive font scale effect.\r\n\r\nThe `bind(Bindings.concat(&quot;-fx-font-size: &quot;` is a good alternative but when you resize the windows it seems to be very slow and I think is not the proper way to resolve the problem.\r\n\r\nYou can declare FontProperty and bind this FontProperty to the Component (Label, Text, etc.) and finally create an event to bind the size with the FontProperty size according with our design:\r\n\r\n    private Label textTracking = new Label();\r\n    private ObjectProperty&lt;Font&gt; fontTracking = new SimpleObjectProperty&lt;Font&gt;(Font.getDefault());\r\n\r\nThen in constructor or some init method you can bind the font property of our object with our dynamic font:\r\n\r\n    textTracking.fontProperty().bind(fontTracking);\r\n\r\nFinally, you need to bind the wrapper container change size with the dynamic font size:\r\n\r\n\t\twidthProperty().addListener(new ChangeListener&lt;Number&gt;()\r\n\t\t{\r\n\t\t\t@Override\r\n\t\t\tpublic void changed(ObservableValue&lt;? extends Number&gt; observableValue, Number oldWidth, Number newWidth)\r\n\t\t\t{\r\n\t\t\t\tfontTracking.set(Font.font(newWidth.doubleValue() / 4));\r\n\t\t\t}\r\n\t\t});\r\n\r\nWith this solution the dynamic font adjustment is very flow and fast, even more than `bind(Bindings.concat(&quot;-fx-font-size: &quot;` method.\r\n","title":"Bind Font Size in JavaFX?","body":"<p>There is a simplest and proper method to bind font size with the container size, in order to make it in a responsive font scale effect.</p>\n\n<p>The <code>bind(Bindings.concat(\"-fx-font-size: \"</code> is a good alternative but when you resize the windows it seems to be very slow and I think is not the proper way to resolve the problem.</p>\n\n<p>You can declare FontProperty and bind this FontProperty to the Component (Label, Text, etc.) and finally create an event to bind the size with the FontProperty size according with our design:</p>\n\n<pre><code>private Label textTracking = new Label();\nprivate ObjectProperty&lt;Font&gt; fontTracking = new SimpleObjectProperty&lt;Font&gt;(Font.getDefault());\n</code></pre>\n\n<p>Then in constructor or some init method you can bind the font property of our object with our dynamic font:</p>\n\n<pre><code>textTracking.fontProperty().bind(fontTracking);\n</code></pre>\n\n<p>Finally, you need to bind the wrapper container change size with the dynamic font size:</p>\n\n<pre><code>    widthProperty().addListener(new ChangeListener&lt;Number&gt;()\n    {\n        @Override\n        public void changed(ObservableValue&lt;? extends Number&gt; observableValue, Number oldWidth, Number newWidth)\n        {\n            fontTracking.set(Font.font(newWidth.doubleValue() / 4));\n        }\n    });\n</code></pre>\n\n<p>With this solution the dynamic font adjustment is very flow and fast, even more than <code>bind(Bindings.concat(\"-fx-font-size: \"</code> method.</p>\n"},{"tags":[],"owner":{"account_id":2869176,"reputation":134,"user_id":2462928,"display_name":"Alexandre"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1534855131,"creation_date":1534855131,"answer_id":51948875,"question_id":23705654,"body_markdown":"I had a similar problem and solved it this way:\r\n\r\n 1. in the CSS and FXML files, I defined all font sizes in a relative way, using only &quot;em&quot; instead of &quot;%&quot; or &quot;px&quot;\r\n 2. in the controller of the main window, I bound a double value within a style property of the main pane to some scene size property (e.g. a rough approximation of its diagonal length)\r\n\r\nIt works because the style that is set to the main pane will affect as a modifier all the nodes that are already defined in the FXML. The nodes that already have a style class are also impacted as the new style comes as an additional top layer of styling in the cascading style sheets.\r\n\r\nThe main advantage of this solution is to handle in a single place the font size zoom factor. Thus you don&#39;t have to find every node that has a Font property to make it working.\r\n\r\nSample files:\r\n\r\n**styles.css**\r\n&lt;!-- language: css --&gt;\r\n\r\n    .label {\r\n        -fx-font-size: 1.1em;\r\n    }\r\n\r\n    .title {\r\n        -fx-font-size: 1.5em;\r\n        -fx-font-weight: bold;\r\n    }\r\n\r\n**main.fxml**\r\n&lt;!-- language: fxml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;?import javafx.scene.control.*?&gt;\r\n    &lt;?import javafx.scene.control.cell.*?&gt;\r\n    &lt;?import javafx.scene.layout.*?&gt;\r\n    &lt;BorderPane style=&quot;-fx-background-color: #fff;&quot;\r\n            xmlns=&quot;http://javafx.com/javafx/8&quot;\r\n            xmlns:fx=&quot;http://javafx.com/fxml/1&quot;\r\n            prefWidth=&quot;1280.0&quot; prefHeight=&quot;720.0&quot;\r\n            fx:controller=&quot;controllers.MainController&quot;&gt;\r\n        &lt;top&gt;\r\n            &lt;Label text=&quot;Application title&quot; styleClass=&quot;title&quot;/&gt;\r\n        &lt;/top&gt;\r\n        &lt;center&gt;\r\n            &lt;Label text=&quot;Lorem ipsum&quot;/&gt;\r\n        &lt;/center&gt;\r\n    &lt;/BorderPane&gt;\r\n\r\n**MainController.java**\r\n&lt;!-- language: java --&gt;\r\n\r\n    package controllers;\r\n\r\n    import javafx.fxml.FXML;\r\n    import javafx.fxml.Initializable;\r\n    import javafx.scene.layout.BorderPane;\r\n\r\n    public class MainController implements Initializable {\r\n        @FXML private BorderPane mainPane;\r\n\r\n        @Override\r\n        public void initialize(URL url, ResourceBundle resourceBundle) {\r\n            initializeFontSizeManager();\r\n        }\r\n\r\n        private void initializeFontSizeManager() {\r\n            // Cf. https://stackoverflow.com/questions/13246211/javafx-how-to-get-stage-from-controller-during-initialization\r\n            mainPane.sceneProperty().addListener((observableScene, oldScene, newScene) -&gt; {\r\n                // We need a scene to work on\r\n                if (oldScene == null &amp;&amp; newScene != null) {\r\n                    DoubleProperty fontSize = new SimpleDoubleProperty(0);\r\n                    fontSize.bind(newScene.widthProperty().add(newScene.heightProperty())\r\n                        .divide(1280 + 720) // I know, it&#39;s a very rough approximation :)\r\n                        .multiply(100)); // get a suitable value to put before the &#39;%&#39; symbol in the style\r\n                    mainPane.styleProperty().bind(\r\n                        Bindings.concat(&quot;-fx-font-size: &quot;, fontSize.asString(&quot;%.0f&quot;)).concat(&quot;%;&quot;));\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n","title":"Bind Font Size in JavaFX?","body":"<p>I had a similar problem and solved it this way:</p>\n\n<ol>\n<li>in the CSS and FXML files, I defined all font sizes in a relative way, using only \"em\" instead of \"%\" or \"px\"</li>\n<li>in the controller of the main window, I bound a double value within a style property of the main pane to some scene size property (e.g. a rough approximation of its diagonal length)</li>\n</ol>\n\n<p>It works because the style that is set to the main pane will affect as a modifier all the nodes that are already defined in the FXML. The nodes that already have a style class are also impacted as the new style comes as an additional top layer of styling in the cascading style sheets.</p>\n\n<p>The main advantage of this solution is to handle in a single place the font size zoom factor. Thus you don't have to find every node that has a Font property to make it working.</p>\n\n<p>Sample files:</p>\n\n<p><strong>styles.css</strong>\n</p>\n\n<pre><code>.label {\n    -fx-font-size: 1.1em;\n}\n\n.title {\n    -fx-font-size: 1.5em;\n    -fx-font-weight: bold;\n}\n</code></pre>\n\n<p><strong>main.fxml</strong>\n</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.control.cell.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n&lt;BorderPane style=\"-fx-background-color: #fff;\"\n        xmlns=\"http://javafx.com/javafx/8\"\n        xmlns:fx=\"http://javafx.com/fxml/1\"\n        prefWidth=\"1280.0\" prefHeight=\"720.0\"\n        fx:controller=\"controllers.MainController\"&gt;\n    &lt;top&gt;\n        &lt;Label text=\"Application title\" styleClass=\"title\"/&gt;\n    &lt;/top&gt;\n    &lt;center&gt;\n        &lt;Label text=\"Lorem ipsum\"/&gt;\n    &lt;/center&gt;\n&lt;/BorderPane&gt;\n</code></pre>\n\n<p><strong>MainController.java</strong>\n</p>\n\n<pre><code>package controllers;\n\nimport javafx.fxml.FXML;\nimport javafx.fxml.Initializable;\nimport javafx.scene.layout.BorderPane;\n\npublic class MainController implements Initializable {\n    @FXML private BorderPane mainPane;\n\n    @Override\n    public void initialize(URL url, ResourceBundle resourceBundle) {\n        initializeFontSizeManager();\n    }\n\n    private void initializeFontSizeManager() {\n        // Cf. https://stackoverflow.com/questions/13246211/javafx-how-to-get-stage-from-controller-during-initialization\n        mainPane.sceneProperty().addListener((observableScene, oldScene, newScene) -&gt; {\n            // We need a scene to work on\n            if (oldScene == null &amp;&amp; newScene != null) {\n                DoubleProperty fontSize = new SimpleDoubleProperty(0);\n                fontSize.bind(newScene.widthProperty().add(newScene.heightProperty())\n                    .divide(1280 + 720) // I know, it's a very rough approximation :)\n                    .multiply(100)); // get a suitable value to put before the '%' symbol in the style\n                mainPane.styleProperty().bind(\n                    Bindings.concat(\"-fx-font-size: \", fontSize.asString(\"%.0f\")).concat(\"%;\"));\n            }\n        });\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24390162,"reputation":11,"user_id":18320250,"display_name":"Chengen Zhao"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657959540,"creation_date":1657959540,"answer_id":73002667,"question_id":23705654,"body_markdown":"I know this is a very old question\r\nbut since 19-ea+9 you may use like\r\n\r\n    private DoubleProperty fontSize = new SimpleDoubleProperty(10);\r\n    node.styleProperty().bind(fontSize.map(size -&gt; &quot;-fx-font-size: &quot;+size+&quot;;-fx-base: rgb(0,0,255);&quot;));","title":"Bind Font Size in JavaFX?","body":"<p>I know this is a very old question\nbut since 19-ea+9 you may use like</p>\n<pre><code>private DoubleProperty fontSize = new SimpleDoubleProperty(10);\nnode.styleProperty().bind(fontSize.map(size -&gt; &quot;-fx-font-size: &quot;+size+&quot;;-fx-base: rgb(0,0,255);&quot;));\n</code></pre>\n"}],"owner":{"account_id":3550501,"reputation":971,"user_id":2965505,"accept_rate":67,"display_name":"Taconut"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23162,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":5,"score":12,"last_activity_date":1657959540,"creation_date":1400280709,"question_id":23705654,"body_markdown":"I&#39;d like to make my application fluid. However, the fonts look small compared to the UI elements when I make the windows bigger. Ultimately, I want the size of my text to get bigger or smaller when I resize the window. I know I could theoretically do this with the style property, but I already have that property bound to something else in some instances.\r\n\r\nI know there&#39;s the &quot;fontProperty&quot; method, but I have nothing to bind it to since I can&#39;t figure out how to create a dynamic ObjectProperty with a synced size. What should I do?\r\n\r\nEDIT: To avoid confusion, I&#39;m trying to make the Font size change based on other factors, not the other way around.","title":"Bind Font Size in JavaFX?","body":"<p>I'd like to make my application fluid. However, the fonts look small compared to the UI elements when I make the windows bigger. Ultimately, I want the size of my text to get bigger or smaller when I resize the window. I know I could theoretically do this with the style property, but I already have that property bound to something else in some instances.</p>\n\n<p>I know there's the \"fontProperty\" method, but I have nothing to bind it to since I can't figure out how to create a dynamic ObjectProperty with a synced size. What should I do?</p>\n\n<p>EDIT: To avoid confusion, I'm trying to make the Font size change based on other factors, not the other way around.</p>\n"},{"tags":["java","android","api","mvvm","retrofit2"],"comments":[{"owner":{"account_id":13837518,"reputation":673,"user_id":9988706,"display_name":"Gobu CSG"},"score":1,"creation_date":1657959478,"post_id":73002623,"comment_id":128937456,"body_markdown":"Are you expecting whole logic or only network call!?","body":"Are you expecting whole logic or only network call!?"},{"owner":{"account_id":22671855,"reputation":37,"user_id":16843492,"display_name":"Anusha C"},"score":0,"creation_date":1657960023,"post_id":73002623,"comment_id":128937537,"body_markdown":"@GobuCSG I want to know how that whole logic gets implemented using MVVM.","body":"@GobuCSG I want to know how that whole logic gets implemented using MVVM."},{"owner":{"account_id":13837518,"reputation":673,"user_id":9988706,"display_name":"Gobu CSG"},"score":0,"creation_date":1657967764,"post_id":73002623,"comment_id":128938678,"body_markdown":"First try to implement MVVM pattern then implement your OTP logics.. collect mobile num from input send it to server then show verify OTP UI. SAMPLE: https://www.google.com/amp/s/c1ctech.com/android-mvvm-pattern-with-retrofit-in-kotlin/amp/","body":"First try to implement MVVM pattern then implement your OTP logics.. collect mobile num from input send it to server then show verify OTP UI. SAMPLE: <a href=\"https://www.google.com/amp/s/c1ctech.com/android-mvvm-pattern-with-retrofit-in-kotlin/amp/\" rel=\"nofollow noreferrer\">google.com/amp/s/c1ctech.com/&hellip;</a>"},{"owner":{"account_id":13837518,"reputation":673,"user_id":9988706,"display_name":"Gobu CSG"},"score":0,"creation_date":1657967848,"post_id":73002623,"comment_id":128938691,"body_markdown":"Don&#39;t post this kind of ques... Post your problems and challenges..","body":"Don&#39;t post this kind of ques... Post your problems and challenges.."},{"owner":{"account_id":22671855,"reputation":37,"user_id":16843492,"display_name":"Anusha C"},"score":0,"creation_date":1657978842,"post_id":73002623,"comment_id":128940746,"body_markdown":"@GobuCSG How to make companion objects in the java. I have stuck with that.","body":"@GobuCSG How to make companion objects in the java. I have stuck with that."},{"owner":{"account_id":13837518,"reputation":673,"user_id":9988706,"display_name":"Gobu CSG"},"score":0,"creation_date":1657982612,"post_id":73002623,"comment_id":128941563,"body_markdown":"You can&#39;t see... It&#39;s kotlin... You&#39;ve to create static method.. whatever declared inside companion object those fields, methods are static..","body":"You can&#39;t see... It&#39;s kotlin... You&#39;ve to create static method.. whatever declared inside companion object those fields, methods are static.."}],"owner":{"account_id":22671855,"reputation":37,"user_id":16843492,"display_name":"Anusha C"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1657959068,"creation_date":1657959068,"question_id":73002623,"body_markdown":"I have a field for a phone number on one page and OTP verification on another Activity.\r\nI have to make an API call in my app using Retrofit2. I am new to API integration.","title":"How to make OTP login with retrofit2 with java in mvvm design pattern?","body":"<p>I have a field for a phone number on one page and OTP verification on another Activity.\nI have to make an API call in my app using Retrofit2. I am new to API integration.</p>\n"},{"tags":["java","string","spring","gradle","groovy"],"answers":[{"tags":[],"owner":{"account_id":5523724,"reputation":22000,"user_id":4385895,"accept_rate":58,"display_name":"Vasu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1479448522,"creation_date":1479448522,"answer_id":40670243,"question_id":40670099,"body_markdown":"&gt; I was under the impression that gradle included these kinds of things\r\n&gt; for me, and that it should work since Groovy is built on Java.\r\n\r\n`constructor com.eval.InputObj required a bean of type &#39;java.lang.String&#39;` exception is nothing to do with `Gradle` as your `InputObj` bean object expects a constructor parameter which is a `String` parameter which you need to provide **(using spring config xml or annotations)** to create the bean/object.","title":"I&#39;m not including the java.lang.String bean?","body":"<blockquote>\n  <p>I was under the impression that gradle included these kinds of things\n  for me, and that it should work since Groovy is built on Java.</p>\n</blockquote>\n\n<p><code>constructor com.eval.InputObj required a bean of type 'java.lang.String'</code> exception is nothing to do with <code>Gradle</code> as your <code>InputObj</code> bean object expects a constructor parameter which is a <code>String</code> parameter which you need to provide <strong>(using spring config xml or annotations)</strong> to create the bean/object.</p>\n"},{"tags":[],"owner":{"account_id":9794763,"reputation":11,"user_id":7258257,"display_name":"L. Lowe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1657958858,"creation_date":1495131764,"answer_id":44055260,"question_id":40670099,"body_markdown":"For those running Lombok also, you might need @AllArgsConstructor or @NoArgsConstructor [Lombok Doc][1]\r\n\r\n\r\nI also found this [spring ticket][2] helpful\r\n\r\n\r\n  [1]: https://projectlombok.org/features/constructor\r\n  [2]: https://github.com/spring-projects/spring-boot/issues/6987","title":"I&#39;m not including the java.lang.String bean?","body":"<p>For those running Lombok also, you might need @AllArgsConstructor or @NoArgsConstructor <a href=\"https://projectlombok.org/features/constructor\" rel=\"nofollow noreferrer\">Lombok Doc</a></p>\n<p>I also found this <a href=\"https://github.com/spring-projects/spring-boot/issues/6987\" rel=\"nofollow noreferrer\">spring ticket</a> helpful</p>\n"}],"owner":{"account_id":9655397,"reputation":55,"user_id":7165132,"display_name":"KyleNehman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2621,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":40670243,"answer_count":2,"score":2,"last_activity_date":1657958858,"creation_date":1479447775,"question_id":40670099,"body_markdown":"I have a small Spring Boot test project written in Groovy, built with Gradle. When trying to run with \r\n    \r\n    spring run src/com/eval/EvalMain.groovy src/com/eval/InputObj.groov\r\nI receive\r\n\r\n    ***************************\r\n    APPLICATION FAILED TO START\r\n    ***************************\r\n\r\n    Description:\r\n\r\n    Parameter 0 of constructor in com.eval.InputObj required a bean of type &#39;java.lang.String&#39; that could not be found.\r\n\r\n\r\n    Action:\r\n\r\n    Consider defining a bean of type &#39;java.lang.String&#39; in your configuration.\r\n \r\nI was under the impression that gradle included these kinds of things for me, and that it should work since Groovy is built on Java. (Plus how did it know the package path java.lang?) Below is my gradle.build, any help would be much appreciated!\r\n\r\n    buildscript {\r\n\t    ext {\r\n\t\t    springBootVersion = &#39;1.4.2.RELEASE&#39;\r\n\t    }\r\n\t    repositories {\r\n\t\t    mavenCentral()\r\n\t    }\r\n\t    dependencies {\r\n    \t\tclasspath(&quot;org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}&quot;)\r\n\t    }\r\n    }\r\n\r\n    apply plugin: &#39;groovy&#39;\r\n    apply plugin: &#39;org.springframework.boot&#39;\r\n\r\n    jar {\r\n    \tbaseName = &#39;testJar&#39;\r\n    \tversion = &#39;.0.0.2&#39;\r\n    }\r\n    sourceCompatibility = 1.8\r\n    targetCompatibility = 1.8\r\n\r\n    repositories {\r\n\t    mavenCentral()\r\n    }\r\n\r\n    dependencies {\r\n\t    compile(&#39;org.springframework.boot:spring-boot-starter&#39;)\r\n\t    testCompile(&#39;org.springframework.boot:spring-boot-starter-test&#39;)\r\n    }\r\n\r\n    springBoot {\r\n \t    mainClass = &quot;com.eval.EvalMain&quot;\r\n    }\r\n","title":"I&#39;m not including the java.lang.String bean?","body":"<p>I have a small Spring Boot test project written in Groovy, built with Gradle. When trying to run with </p>\n\n<pre><code>spring run src/com/eval/EvalMain.groovy src/com/eval/InputObj.groov\n</code></pre>\n\n<p>I receive</p>\n\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nParameter 0 of constructor in com.eval.InputObj required a bean of type 'java.lang.String' that could not be found.\n\n\nAction:\n\nConsider defining a bean of type 'java.lang.String' in your configuration.\n</code></pre>\n\n<p>I was under the impression that gradle included these kinds of things for me, and that it should work since Groovy is built on Java. (Plus how did it know the package path java.lang?) Below is my gradle.build, any help would be much appreciated!</p>\n\n<pre><code>buildscript {\n    ext {\n        springBootVersion = '1.4.2.RELEASE'\n    }\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath(\"org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}\")\n    }\n}\n\napply plugin: 'groovy'\napply plugin: 'org.springframework.boot'\n\njar {\n    baseName = 'testJar'\n    version = '.0.0.2'\n}\nsourceCompatibility = 1.8\ntargetCompatibility = 1.8\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile('org.springframework.boot:spring-boot-starter')\n    testCompile('org.springframework.boot:spring-boot-starter-test')\n}\n\nspringBoot {\n    mainClass = \"com.eval.EvalMain\"\n}\n</code></pre>\n"},{"tags":["java","maven","mybatis"],"comments":[{"owner":{"account_id":442405,"reputation":2504,"user_id":833009,"accept_rate":50,"display_name":"jvwilge"},"score":0,"creation_date":1496259507,"post_id":44288273,"comment_id":75593123,"body_markdown":"Possible duplicate of [mybatis spring mvc application, getting Invalid bound statement (not found)](https://stackoverflow.com/questions/20427210/mybatis-spring-mvc-application-getting-invalid-bound-statement-not-found)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/20427210/mybatis-spring-mvc-application-getting-invalid-bound-statement-not-found\">mybatis spring mvc application, getting Invalid bound statement (not found)</a>"}],"answers":[{"tags":[],"owner":{"account_id":9521240,"reputation":2034,"user_id":7076047,"display_name":"blackwizard"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1496259031,"creation_date":1496259031,"answer_id":44293250,"question_id":44288273,"body_markdown":"First result when googling `MapperScannerConfigurer`  leads to the [documentation](http://www.mybatis.org/spring/apidocs/reference/org/mybatis/spring/mapper/MapperScannerConfigurer.html) stating:\r\n\r\n&gt; The basePackage property can contain more than one package name,\r\n&gt; separated by **either commas or semicolons**.\r\n\r\nwhile your packages are separated by a space.","title":"Mybatis Invalid bound statement (not found)","body":"<p>First result when googling <code>MapperScannerConfigurer</code>  leads to the <a href=\"http://www.mybatis.org/spring/apidocs/reference/org/mybatis/spring/mapper/MapperScannerConfigurer.html\" rel=\"nofollow noreferrer\">documentation</a> stating:</p>\n\n<blockquote>\n  <p>The basePackage property can contain more than one package name,\n  separated by <strong>either commas or semicolons</strong>.</p>\n</blockquote>\n\n<p>while your packages are separated by a space.</p>\n"},{"tags":[],"owner":{"account_id":7689326,"reputation":126,"user_id":5826104,"display_name":"0x3ff"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586774047,"creation_date":1547716890,"answer_id":54232605,"question_id":44288273,"body_markdown":"In Mybatis if you add a mapper in a way like `getMapper(YourMapper.class)` or `addMapper(YourMapper.class)`, it is necessary to leave the relative `YourMapper.xml` inside the same source package.\r\n\r\nIn maven it is also necessary to include the xml file(s) as resources and they must be in same place of the generated `.class` file.\r\n\r\nSo it would be something like this inside the `&lt;build&gt;` section of your `pom.xml` file:\r\n\r\n```\r\n   &lt;build&gt;\r\n        ...\r\n\t\t&lt;resources&gt;\r\n\t\t   &lt;resource&gt;\r\n\t\t      &lt;filtering&gt;false&lt;/filtering&gt;\r\n\t\t      &lt;directory&gt;src&lt;/directory&gt;\r\n\t\t      &lt;includes&gt;\r\n\t\t        &lt;include&gt;**/package_path/to/your/*.xml&lt;/include&gt;\r\n\t\t      &lt;/includes&gt;\r\n\t\t   &lt;/resource&gt;\r\n\t\t&lt;/resources&gt;\r\n       ...\r\n   &lt;/build&gt;\r\n```\r\n\r\nWith this configuration maven will leave .xml files in the same place as you have in your source tree.","title":"Mybatis Invalid bound statement (not found)","body":"<p>In Mybatis if you add a mapper in a way like <code>getMapper(YourMapper.class)</code> or <code>addMapper(YourMapper.class)</code>, it is necessary to leave the relative <code>YourMapper.xml</code> inside the same source package.</p>\n\n<p>In maven it is also necessary to include the xml file(s) as resources and they must be in same place of the generated <code>.class</code> file.</p>\n\n<p>So it would be something like this inside the <code>&lt;build&gt;</code> section of your <code>pom.xml</code> file:</p>\n\n<pre><code>   &lt;build&gt;\n        ...\n        &lt;resources&gt;\n           &lt;resource&gt;\n              &lt;filtering&gt;false&lt;/filtering&gt;\n              &lt;directory&gt;src&lt;/directory&gt;\n              &lt;includes&gt;\n                &lt;include&gt;**/package_path/to/your/*.xml&lt;/include&gt;\n              &lt;/includes&gt;\n           &lt;/resource&gt;\n        &lt;/resources&gt;\n       ...\n   &lt;/build&gt;\n</code></pre>\n\n<p>With this configuration maven will leave .xml files in the same place as you have in your source tree.</p>\n"}],"owner":{"account_id":8652495,"reputation":947,"user_id":6477694,"accept_rate":58,"display_name":"junk"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7459,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1657958705,"creation_date":1496242996,"question_id":44288273,"body_markdown":"environments: maven ,spring 4.2.4-RELEASE , 2 modules: zscb-server zscb-common ,and zscb-server dependent on zscb-common\r\n\r\nmy web.xml core code:\r\n\r\n      &lt;listener&gt;\r\n        &lt;listener-class&gt;com.iidooo.core.listener.RoleResourceInitListener&lt;/listener-class&gt;\r\n      &lt;/listener&gt;\r\n\r\ni have a init listener in my module zscb-common:\r\n\r\nRoleResourceInitListener core code:\r\n\r\n \r\n\r\n     public void contextInitialized(ServletContextEvent arg0) {\r\n            try {\r\n                ServletContext sc = arg0.getServletContext();\r\n                SqlSessionFactory sqlSessionFactory = (SqlSessionFactory) SpringUtil.getBean(sc, &quot;sqlSessionFactory&quot;);\r\n    \r\n                SqlSession sqlSession = sqlSessionFactory.openSession(true);\r\n                SecurityRoleMapper roleMapper = sqlSession.getMapper(SecurityRoleMapper.class);\r\n                List&lt;SecurityRole&gt; roleList = roleMapper.selectAll();\r\n    \r\n                // key: roleID value:List&lt;SecurityResource&gt;\r\n                Map&lt;Integer, List&lt;SecurityResource&gt;&gt; roleResourceMap = new HashMap&lt;Integer, List&lt;SecurityResource&gt;&gt;();\r\n                for (SecurityRole item : roleList) {\r\n                    roleResourceMap.put(item.getRoleID(), item.getResourceList());\r\n                }\r\n                sc.setAttribute(ServletConstant.ROLE_RESOURCE_MAP, roleResourceMap);\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n                logger.fatal(e);\r\n            }\r\n        }\r\n\r\n\r\n\r\n\r\n\r\nmy applicationContext.xml:\r\n\r\n    &lt;bean class=&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&gt;\r\n    \t\t&lt;property name=&quot;basePackage&quot; value=&quot;com.iidooo.core.mapper com.edo.zscb.mapper&quot; /&gt;\r\n    \t\t&lt;property name=&quot;sqlSessionFactoryBeanName&quot; value=&quot;sqlSessionFactory&quot;&gt;&lt;/property&gt;\r\n    \t&lt;/bean&gt;\r\n\r\ni have checked my mapper.xml&#39;s namepsace:\r\n\r\n    &lt;mapper namespace=&quot;com.iidooo.core.mapper.SecurityRoleMapper&quot;&gt;\r\n\r\nand when i run tomcat, error occured \r\n\r\n    Mybatis Invalid bound statement (not found)\r\n\r\nwho can save me! \r\n","title":"Mybatis Invalid bound statement (not found)","body":"<p>environments: maven ,spring 4.2.4-RELEASE , 2 modules: zscb-server zscb-common ,and zscb-server dependent on zscb-common</p>\n\n<p>my web.xml core code:</p>\n\n<pre><code>  &lt;listener&gt;\n    &lt;listener-class&gt;com.iidooo.core.listener.RoleResourceInitListener&lt;/listener-class&gt;\n  &lt;/listener&gt;\n</code></pre>\n\n<p>i have a init listener in my module zscb-common:</p>\n\n<p>RoleResourceInitListener core code:</p>\n\n<pre><code> public void contextInitialized(ServletContextEvent arg0) {\n        try {\n            ServletContext sc = arg0.getServletContext();\n            SqlSessionFactory sqlSessionFactory = (SqlSessionFactory) SpringUtil.getBean(sc, \"sqlSessionFactory\");\n\n            SqlSession sqlSession = sqlSessionFactory.openSession(true);\n            SecurityRoleMapper roleMapper = sqlSession.getMapper(SecurityRoleMapper.class);\n            List&lt;SecurityRole&gt; roleList = roleMapper.selectAll();\n\n            // key: roleID value:List&lt;SecurityResource&gt;\n            Map&lt;Integer, List&lt;SecurityResource&gt;&gt; roleResourceMap = new HashMap&lt;Integer, List&lt;SecurityResource&gt;&gt;();\n            for (SecurityRole item : roleList) {\n                roleResourceMap.put(item.getRoleID(), item.getResourceList());\n            }\n            sc.setAttribute(ServletConstant.ROLE_RESOURCE_MAP, roleResourceMap);\n        } catch (Exception e) {\n            e.printStackTrace();\n            logger.fatal(e);\n        }\n    }\n</code></pre>\n\n<p>my applicationContext.xml:</p>\n\n<pre><code>&lt;bean class=\"org.mybatis.spring.mapper.MapperScannerConfigurer\"&gt;\n        &lt;property name=\"basePackage\" value=\"com.iidooo.core.mapper com.edo.zscb.mapper\" /&gt;\n        &lt;property name=\"sqlSessionFactoryBeanName\" value=\"sqlSessionFactory\"&gt;&lt;/property&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p>i have checked my mapper.xml's namepsace:</p>\n\n<pre><code>&lt;mapper namespace=\"com.iidooo.core.mapper.SecurityRoleMapper\"&gt;\n</code></pre>\n\n<p>and when i run tomcat, error occured </p>\n\n<pre><code>Mybatis Invalid bound statement (not found)\n</code></pre>\n\n<p>who can save me! </p>\n"},{"tags":["java","android","android-sensors"],"comments":[{"owner":{"account_id":7097254,"reputation":4695,"user_id":5430306,"display_name":"Rafsanjani"},"score":0,"creation_date":1657958970,"post_id":73002475,"comment_id":128937386,"body_markdown":"Have you tried using a foreground service for this task?","body":"Have you tried using a foreground service for this task?"},{"owner":{"account_id":1361461,"reputation":1592,"user_id":1298744,"accept_rate":71,"display_name":"Zelig63"},"score":0,"creation_date":1657981331,"post_id":73002475,"comment_id":128941274,"body_markdown":"As my app is supposed to monitor step count 24 hours a day, I think foreground service is not a good idea, considering energy efficiency.","body":"As my app is supposed to monitor step count 24 hours a day, I think foreground service is not a good idea, considering energy efficiency."},{"owner":{"account_id":7097254,"reputation":4695,"user_id":5430306,"display_name":"Rafsanjani"},"score":0,"creation_date":1657981529,"post_id":73002475,"comment_id":128941310,"body_markdown":"A foreground service us actually the most reliable way of going about this task. Use anything else and the system will kill it even before it gets the chance to perform any operation","body":"A foreground service us actually the most reliable way of going about this task. Use anything else and the system will kill it even before it gets the chance to perform any operation"},{"owner":{"account_id":1361461,"reputation":1592,"user_id":1298744,"accept_rate":71,"display_name":"Zelig63"},"score":1,"creation_date":1658038668,"post_id":73002475,"comment_id":128949130,"body_markdown":"`PeriodicWorker`s aren&#39;t immediately killed by the system. Otherwise, they would be completely unuseful. As far as I have analysed my logs, the `Worker` receives step count changes but only if the phone user is moving when it is started (no matter if the app is running, in the background or killed). If the phone is still, the `Worker`is started, but never gets the step count.","body":"<code>PeriodicWorker</code>s aren&#39;t immediately killed by the system. Otherwise, they would be completely unuseful. As far as I have analysed my logs, the <code>Worker</code> receives step count changes but only if the phone user is moving when it is started (no matter if the app is running, in the background or killed). If the phone is still, the <code>Worker</code>is started, but never gets the step count."}],"owner":{"account_id":1361461,"reputation":1592,"user_id":1298744,"accept_rate":71,"display_name":"Zelig63"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1657957571,"creation_date":1657957571,"question_id":73002475,"body_markdown":"I want my app to be informed anytime the step counter sensor detects a step. As said in the doc, I register a listener for this sensor and never unregister it. I have also tried to launch a `JobService` at a regular interval, then tried to launch a `PeriodicWorker`, but this two objects are only informed of a step count change when the app comes back to the foreground, which is useless as the app is informed as well.\r\nDoes anyone know how my app can receive step counter events even if it is in the foregroung or killed?","title":"Receiving step counter events when app is not in the foreground","body":"<p>I want my app to be informed anytime the step counter sensor detects a step. As said in the doc, I register a listener for this sensor and never unregister it. I have also tried to launch a <code>JobService</code> at a regular interval, then tried to launch a <code>PeriodicWorker</code>, but this two objects are only informed of a step count change when the app comes back to the foreground, which is useless as the app is informed as well.\nDoes anyone know how my app can receive step counter events even if it is in the foregroung or killed?</p>\n"},{"tags":["java","macos","java-11","apple-m1","java-home"],"answers":[{"tags":[],"owner":{"account_id":433372,"reputation":406,"user_id":818667,"display_name":"Pierre Carrier"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1657957458,"creation_date":1657947371,"answer_id":73001631,"question_id":73001390,"body_markdown":"Unfortunately, `java_home` only looks for runtimes in 2 locations:\r\n\r\n- `$HOME/Library/Java/JavaVirtualMachines`\r\n- `/Library/Java/JavaVirtualMachines`\r\n\r\nA symlink works but will need to be kept up-to-date as homebrew upgrades:\r\n\r\n```\r\n$ ln -sf /opt/homebrew/Cellar/openjdk@11/11.0.15/libexec/openjdk.jdk ~/Library/Java/JavaVirtualMachines/openjdk11\r\n```\r\n\r\nIt then appears in the list in its original location:\r\n\r\n```\r\n$ /usr/libexec/java_home -V\r\nMatching Java Virtual Machines (3):\r\n    18.0.1.1 (arm64) &quot;Homebrew&quot; - &quot;OpenJDK 18.0.1.1&quot; /opt/homebrew/Cellar/openjdk/18.0.1.1/libexec/openjdk.jdk/Contents/Home\r\n    11.0.15 (arm64) &quot;Homebrew&quot; - &quot;OpenJDK 11.0.15&quot; /opt/homebrew/Cellar/openjdk@11/11.0.15/libexec/openjdk.jdk/Contents/Home\r\n    1.8.0_332 (arm64) &quot;Azul Systems, Inc.&quot; - &quot;Zulu 8.62.0.19&quot; /Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home\r\n/opt/homebrew/Cellar/openjdk/18.0.1.1/libexec/openjdk.jdk/Contents/Home\r\n```","title":"java_home issue on macbook 12.3.1 Monterey (M1)","body":"<p>Unfortunately, <code>java_home</code> only looks for runtimes in 2 locations:</p>\n<ul>\n<li><code>$HOME/Library/Java/JavaVirtualMachines</code></li>\n<li><code>/Library/Java/JavaVirtualMachines</code></li>\n</ul>\n<p>A symlink works but will need to be kept up-to-date as homebrew upgrades:</p>\n<pre><code>$ ln -sf /opt/homebrew/Cellar/openjdk@11/11.0.15/libexec/openjdk.jdk ~/Library/Java/JavaVirtualMachines/openjdk11\n</code></pre>\n<p>It then appears in the list in its original location:</p>\n<pre><code>$ /usr/libexec/java_home -V\nMatching Java Virtual Machines (3):\n    18.0.1.1 (arm64) &quot;Homebrew&quot; - &quot;OpenJDK 18.0.1.1&quot; /opt/homebrew/Cellar/openjdk/18.0.1.1/libexec/openjdk.jdk/Contents/Home\n    11.0.15 (arm64) &quot;Homebrew&quot; - &quot;OpenJDK 11.0.15&quot; /opt/homebrew/Cellar/openjdk@11/11.0.15/libexec/openjdk.jdk/Contents/Home\n    1.8.0_332 (arm64) &quot;Azul Systems, Inc.&quot; - &quot;Zulu 8.62.0.19&quot; /Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home\n/opt/homebrew/Cellar/openjdk/18.0.1.1/libexec/openjdk.jdk/Contents/Home\n</code></pre>\n"}],"owner":{"account_id":342067,"reputation":12418,"user_id":673018,"accept_rate":95,"display_name":"Mandar Pande"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":979,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":73001631,"answer_count":1,"score":-1,"last_activity_date":1657957458,"creation_date":1657943695,"question_id":73001390,"body_markdown":"java_home is not setup, Unable to locate a Java Runtime on Mac M1  (12.3.1 - Monterey)\r\n\r\nopenjdk is installed: \r\n\r\n    java --version\r\n    openjdk 11.0.15 2022-04-19\r\n    OpenJDK Runtime Environment Homebrew (build 11.0.15+0)\r\n    OpenJDK 64-Bit Server VM Homebrew (build 11.0.15+0, mixed mode)\r\n\r\n    /usr/libexec/java_home\r\n    The operation couldnt be completed. Unable to locate a Java Runtime.\r\n    Please visit http://www.java.com for information on installing Java.\r\n\r\n\r\nI setup `JAVA_HOME` already in the profiles :\r\n\r\n    export JAVA_HOME=/opt/homebrew/Cellar/openjdk@11/11.0.15/libexec/openjdk.j/Contents/Home\r\n","title":"java_home issue on macbook 12.3.1 Monterey (M1)","body":"<p>java_home is not setup, Unable to locate a Java Runtime on Mac M1  (12.3.1 - Monterey)</p>\n<p>openjdk is installed:</p>\n<pre><code>java --version\nopenjdk 11.0.15 2022-04-19\nOpenJDK Runtime Environment Homebrew (build 11.0.15+0)\nOpenJDK 64-Bit Server VM Homebrew (build 11.0.15+0, mixed mode)\n\n/usr/libexec/java_home\nThe operation couldnt be completed. Unable to locate a Java Runtime.\nPlease visit http://www.java.com for information on installing Java.\n</code></pre>\n<p>I setup <code>JAVA_HOME</code> already in the profiles :</p>\n<pre><code>export JAVA_HOME=/opt/homebrew/Cellar/openjdk@11/11.0.15/libexec/openjdk.j/Contents/Home\n</code></pre>\n"},{"tags":["java","unit-testing","junit","spring-data-jpa","spring-test"],"comments":[{"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"score":0,"creation_date":1657867587,"post_id":72981290,"comment_id":128916284,"body_markdown":"So your question is answered?","body":"So your question is answered?"},{"owner":{"account_id":16249042,"reputation":86,"user_id":11733458,"display_name":"Deyvid Dimitrov"},"score":1,"creation_date":1657957480,"post_id":72981290,"comment_id":128937139,"body_markdown":"@JensSchauder Nope, still don&#39;t have answers. Only more questions. :D","body":"@JensSchauder Nope, still don&#39;t have answers. Only more questions. :D"}],"owner":{"account_id":16249042,"reputation":86,"user_id":11733458,"display_name":"Deyvid Dimitrov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":302,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1657957450,"creation_date":1657805109,"question_id":72981290,"body_markdown":"I&#39;m new to writing tests (let&#39;s call them Unit tests) and my current aim is to test the Repository (data) layer. Especially when trying to save new entity in order all of the fields are passed correctly.\r\n\r\nLet&#39;s say we have a class *Person* with the following fields:\r\n\r\n```\r\nFoo {\r\n    @Size(min = 2, max = 50, message = &quot;First name can&#39;t be longer than 50 symbols.&quot;)\r\n    @Column(name = &quot;name&quot;, nullable = false)\r\n    private String name;\r\n\r\n    @NotNull(message = &quot;Weight is required.&quot;)\r\n    @PositiveOrZero(message = &quot;Weight should be positive number or zero.&quot;)\r\n    @Column(name = &quot;weight&quot;, nullable = false)\r\n    private Double weight;\r\n}\r\n```\r\n\r\nFirst of all - do I need all of the @NotBlank, @NotEmpty and @Size validations together, or @Size is enough? The same stands for @NotNull and @PositiveOrZero.\r\n\r\nThe problem comes when I&#39;m testing the whole thing:\r\n\r\n```\r\n@ExtendWith(MockitoExtension.class)\r\n@RunWith(SpringRunner.class)\r\n@DataJpaTest\r\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\r\nclass PersonRepositoryTest {\r\n    @Autowired\r\n    private PersonRepository personRepository;\r\n\r\n    @BeforeEach\r\n    void initUseCase() {\r\n        List&lt;Person&gt; people = Arrays.asList(\r\n                new Person(&quot;One&quot;, 40.0d),\r\n                new Person(&quot;Two&quot;, 40.0d)\r\n        );\r\n        personRepository.saveAll(people);\r\n    }\r\n\r\n    @AfterEach\r\n    public void destroyAll(){\r\n        personRepository.deleteAll();\r\n    }\r\n\r\n    @Test\r\n    void testCreatePerson_FailNameIsBlank() {\r\n        try {\r\n            Person person = new Person();\r\n            person.setName(&quot;&quot;);\r\n            person.setCalories(100d);\r\n            person.setFats(10d);\r\n            person.setProtein(10d);\r\n            person.setCarbs(10d);\r\n            personRepository.save(person);\r\n        } catch (ConstraintViolationException e) {\r\n            Set&lt;ConstraintViolation&lt;?&gt;&gt; violations = e.getConstraintViolations();\r\n            assertEquals(1, violations.size());\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI&#39;m getting the following error:\r\n```\r\n\r\njavax.validation.ConstraintViolationException: Validation failed for classes [whatever.Person] during persist time for groups [javax.validation.groups.Default, ]\r\nList of constraint violations:[\r\n\tConstraintViolationImpl{interpolatedMessage=&#39;First name can&#39;t be longer than 50 symbols.&#39;, propertyPath=name, rootBeanClass=class whatever.Person, messageTemplate=&#39;First name can&#39;t be longer than 50 symbols.&#39;}\r\n]\r\n```\r\n\r\nWith whole message:\r\n```\r\nat java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)\r\n\tat org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:57)\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\r\n\tat org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1372)\r\n\tat org.hibernate.internal.SessionImpl.list(SessionImpl.java:1452)\r\n\tat org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1649)\r\n\tat org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1617)\r\n\tat org.hibernate.query.Query.getResultList(Query.java:165)\r\n\tat org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getResultList(CriteriaQueryTypeQueryAdapter.java:76)\r\n\tat org.springframework.data.jpa.repository.support.SimpleJpaRepository.findAll(SimpleJpaRepository.java:427)\r\n\tat org.springframework.data.jpa.repository.support.SimpleJpaRepository.deleteAll(SimpleJpaRepository.java:300)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)\r\n\tat org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:530)\r\n\tat org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:286)\r\n\tat org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:640)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy118.deleteAll(Unknown Source)\r\n\tat whatever.PersonRepositoryTest.destroyAll(PersonRepositoryTest.java:45)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptLifecycleMethod(TimeoutExtension.java:126)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptAfterEachMethod(TimeoutExtension.java:108)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeMethodInExtensionContext(ClassBasedTestDescriptor.java:506)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$synthesizeAfterEachMethodAdapter$22(ClassBasedTestDescriptor.java:496)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAfterEachMethods$10(TestMethodTestDescriptor.java:240)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$13(TestMethodTestDescriptor.java:273)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$14(TestMethodTestDescriptor.java:273)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAllAfterMethodsOrCallbacks(TestMethodTestDescriptor.java:272)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAfterEachMethods(TestMethodTestDescriptor.java:238)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n```\r\n\r\nFeel free to judge any of the code and annotations. I&#39;m open to all of the critique.\r\n\r\nUpdate:\r\n\r\nTried this way:\r\n```\r\n\r\n    @Test\r\n    void testCreatePerson_FailNameIsBlank() {\r\n            Person person = new Person();\r\n            person.setName(&quot;1&quot;);\r\n            person.setWeight(100d);\r\n            assertThrows(\r\n                    ConstraintViolationException.class,\r\n                    () -&gt; {\r\n                        personRepository.save(person);}\r\n            );\r\n    }\r\n```\r\nbut got:\r\n```\r\n2022-07-14 18:27:32.756  INFO 59073 --- [           main] o.s.t.c.transaction.TransactionContext   : Rolled back transaction for test: \r\n...\r\norg.opentest4j.AssertionFailedError: Expected javax.validation.ConstraintViolationException to be thrown, but nothing was thrown.\r\n```\r\n\r\nUPDATE 2:\r\n\r\nAccording to \r\n&lt;https://stackoverflow.com/questions/49247522/testing-repository-for-constraintviolationexception-in-spring-data&gt;\r\n[](https://stackoverflow.com/questions/49247522/testing-repository-for-constraintviolationexception-in-spring-data)\r\n&lt;a href=&quot;https://stackoverflow.com/questions/49247522/testing-repository-for-constraintviolationexception-in-spring-data&quot;&gt;&lt;/a&gt;\r\n  if I change personRepository.save(person) to .saveAndFlush(person) it throws DataIntegrityViolationException. Which does not test the thing I want since I don&#39;t cover the original exception, which I don&#39;t think is a solution.","title":"How to test javax.validation.constraints on save in JUnit?","body":"<p>I'm new to writing tests (let's call them Unit tests) and my current aim is to test the Repository (data) layer. Especially when trying to save new entity in order all of the fields are passed correctly.</p>\n<p>Let's say we have a class <em>Person</em> with the following fields:</p>\n<pre><code>Foo {\n    @Size(min = 2, max = 50, message = &quot;First name can't be longer than 50 symbols.&quot;)\n    @Column(name = &quot;name&quot;, nullable = false)\n    private String name;\n\n    @NotNull(message = &quot;Weight is required.&quot;)\n    @PositiveOrZero(message = &quot;Weight should be positive number or zero.&quot;)\n    @Column(name = &quot;weight&quot;, nullable = false)\n    private Double weight;\n}\n</code></pre>\n<p>First of all - do I need all of the @NotBlank, @NotEmpty and @Size validations together, or @Size is enough? The same stands for @NotNull and @PositiveOrZero.</p>\n<p>The problem comes when I'm testing the whole thing:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\n@RunWith(SpringRunner.class)\n@DataJpaTest\n@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)\nclass PersonRepositoryTest {\n    @Autowired\n    private PersonRepository personRepository;\n\n    @BeforeEach\n    void initUseCase() {\n        List&lt;Person&gt; people = Arrays.asList(\n                new Person(&quot;One&quot;, 40.0d),\n                new Person(&quot;Two&quot;, 40.0d)\n        );\n        personRepository.saveAll(people);\n    }\n\n    @AfterEach\n    public void destroyAll(){\n        personRepository.deleteAll();\n    }\n\n    @Test\n    void testCreatePerson_FailNameIsBlank() {\n        try {\n            Person person = new Person();\n            person.setName(&quot;&quot;);\n            person.setCalories(100d);\n            person.setFats(10d);\n            person.setProtein(10d);\n            person.setCarbs(10d);\n            personRepository.save(person);\n        } catch (ConstraintViolationException e) {\n            Set&lt;ConstraintViolation&lt;?&gt;&gt; violations = e.getConstraintViolations();\n            assertEquals(1, violations.size());\n        }\n    }\n}\n</code></pre>\n<p>I'm getting the following error:</p>\n<pre><code>\njavax.validation.ConstraintViolationException: Validation failed for classes [whatever.Person] during persist time for groups [javax.validation.groups.Default, ]\nList of constraint violations:[\n    ConstraintViolationImpl{interpolatedMessage='First name can't be longer than 50 symbols.', propertyPath=name, rootBeanClass=class whatever.Person, messageTemplate='First name can't be longer than 50 symbols.'}\n]\n</code></pre>\n<p>With whole message:</p>\n<pre><code>at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)\n    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)\n    at org.hibernate.event.internal.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:57)\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\n    at org.hibernate.internal.SessionImpl.autoFlushIfRequired(SessionImpl.java:1372)\n    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1452)\n    at org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1649)\n    at org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1617)\n    at org.hibernate.query.Query.getResultList(Query.java:165)\n    at org.hibernate.query.criteria.internal.compile.CriteriaQueryTypeQueryAdapter.getResultList(CriteriaQueryTypeQueryAdapter.java:76)\n    at org.springframework.data.jpa.repository.support.SimpleJpaRepository.findAll(SimpleJpaRepository.java:427)\n    at org.springframework.data.jpa.repository.support.SimpleJpaRepository.deleteAll(SimpleJpaRepository.java:300)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)\n    at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:530)\n    at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:286)\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:640)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:81)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\n    at jdk.proxy2/jdk.proxy2.$Proxy118.deleteAll(Unknown Source)\n    at whatever.PersonRepositoryTest.destroyAll(PersonRepositoryTest.java:45)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptLifecycleMethod(TimeoutExtension.java:126)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptAfterEachMethod(TimeoutExtension.java:108)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeMethodInExtensionContext(ClassBasedTestDescriptor.java:506)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$synthesizeAfterEachMethodAdapter$22(ClassBasedTestDescriptor.java:496)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAfterEachMethods$10(TestMethodTestDescriptor.java:240)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$13(TestMethodTestDescriptor.java:273)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$14(TestMethodTestDescriptor.java:273)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAllAfterMethodsOrCallbacks(TestMethodTestDescriptor.java:272)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAfterEachMethods(TestMethodTestDescriptor.java:238)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:139)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n</code></pre>\n<p>Feel free to judge any of the code and annotations. I'm open to all of the critique.</p>\n<p>Update:</p>\n<p>Tried this way:</p>\n<pre><code>\n    @Test\n    void testCreatePerson_FailNameIsBlank() {\n            Person person = new Person();\n            person.setName(&quot;1&quot;);\n            person.setWeight(100d);\n            assertThrows(\n                    ConstraintViolationException.class,\n                    () -&gt; {\n                        personRepository.save(person);}\n            );\n    }\n</code></pre>\n<p>but got:</p>\n<pre><code>2022-07-14 18:27:32.756  INFO 59073 --- [           main] o.s.t.c.transaction.TransactionContext   : Rolled back transaction for test: \n...\norg.opentest4j.AssertionFailedError: Expected javax.validation.ConstraintViolationException to be thrown, but nothing was thrown.\n</code></pre>\n<p>UPDATE 2:</p>\n<p>According to\n<a href=\"https://stackoverflow.com/questions/49247522/testing-repository-for-constraintviolationexception-in-spring-data\">Testing repository for ConstraintViolationException in Spring Data</a>\n<a href=\"https://stackoverflow.com/questions/49247522/testing-repository-for-constraintviolationexception-in-spring-data\"></a>\n<a href=\"https://stackoverflow.com/questions/49247522/testing-repository-for-constraintviolationexception-in-spring-data\"></a>\nif I change personRepository.save(person) to .saveAndFlush(person) it throws DataIntegrityViolationException. Which does not test the thing I want since I don't cover the original exception, which I don't think is a solution.</p>\n"},{"tags":["java","jpa","transactions","transactionscope","transactionmanager"],"answers":[{"tags":[],"owner":{"account_id":16145881,"reputation":441,"user_id":11655642,"display_name":"shockwave"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633750105,"creation_date":1633750105,"answer_id":69503519,"question_id":69502355,"body_markdown":"Try doing this :\r\n\r\n    try {\r\n        utx.begin();\r\n        em.joinTransaction();\r\n        table1 = em.merge(table1);\r\n        table2 = em.merge(table2);\r\n        utx.commit();\r\n    } catch (Exception ex) {\r\n        try {\r\n            utx.rollback();\r\n        } catch (Exception e) {\r\n            ex.printStackTrace();\r\n            throw e;\r\n        }\r\n        throw ex;\r\n    } finally {\r\n        em.close();\r\n    }","title":"How to write to multiple tables in JPA in a single transaction?","body":"<p>Try doing this :</p>\n<pre><code>try {\n    utx.begin();\n    em.joinTransaction();\n    table1 = em.merge(table1);\n    table2 = em.merge(table2);\n    utx.commit();\n} catch (Exception ex) {\n    try {\n        utx.rollback();\n    } catch (Exception e) {\n        ex.printStackTrace();\n        throw e;\n    }\n    throw ex;\n} finally {\n    em.close();\n}\n</code></pre>\n"}],"owner":{"account_id":2435943,"reputation":1275,"user_id":2125853,"accept_rate":77,"display_name":"user2125853"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":533,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1657956514,"creation_date":1633732676,"question_id":69502355,"body_markdown":"I would like to know how to update data into 2 tables in a single transaction in JPA.  I am using Eclipse and the JPA tool generates code to update each table wrapped in its own transaction.  Following is the generated code.\r\n\r\nTABLE1\r\n\r\n\t@Action(Action.ACTION_TYPE.UPDATE)\r\n\tpublic void updateTable1(Table1 table1) throws Exception {\r\n\t\tEntityManager em = getEntityManager();\r\n\t\ttry {\r\n\t\t\tutx.begin();\r\n\t\t\tem.joinTransaction();\r\n\t\t\ttable1 = em.merge(table1);\r\n\t\t\tutx.commit();\r\n\t\t} catch (Exception ex) {\r\n\t\t\ttry {\r\n\t\t\t\tutx.rollback();\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t\tex.printStackTrace();\r\n\t\t\t\tthrow e;\r\n\t\t\t}\r\n\t\t\tthrow ex;\r\n\t\t} finally {\r\n\t\t\tem.close();\r\n\t\t}\r\n\t}\r\n\r\nTABLE2\r\n\r\n\t@Action(Action.ACTION_TYPE.UPDATE)\r\n\tpublic void updateTable2(Table2 table2) throws Exception {\r\n\t\tEntityManager em = getEntityManager();\r\n\t\ttry {\r\n\t\t\tutx.begin();\r\n\t\t\tem.joinTransaction();\r\n\t\t\ttable1 = em.merge(table2);\r\n\t\t\tutx.commit();\r\n\t\t} catch (Exception ex) {\r\n\t\t\ttry {\r\n\t\t\t\tutx.rollback();\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t\tex.printStackTrace();\r\n\t\t\t\tthrow e;\r\n\t\t\t}\r\n\t\t\tthrow ex;\r\n\t\t} finally {\r\n\t\t\tem.close();\r\n\t\t}\r\n\t}\r\n\r\nWith above code I can call\r\n\r\n    updateTable1(table1);\r\n    updateTable2(table2);\r\n\r\nI would think if the second call fails the update of table1 would still happen.  I am thinking I would not be able to use the generated code and would need to write my own function that would wrap both updates in one transaction.  What is the right way to do this?","title":"How to write to multiple tables in JPA in a single transaction?","body":"<p>I would like to know how to update data into 2 tables in a single transaction in JPA.  I am using Eclipse and the JPA tool generates code to update each table wrapped in its own transaction.  Following is the generated code.</p>\n<p>TABLE1</p>\n<pre><code>@Action(Action.ACTION_TYPE.UPDATE)\npublic void updateTable1(Table1 table1) throws Exception {\n    EntityManager em = getEntityManager();\n    try {\n        utx.begin();\n        em.joinTransaction();\n        table1 = em.merge(table1);\n        utx.commit();\n    } catch (Exception ex) {\n        try {\n            utx.rollback();\n        } catch (Exception e) {\n            ex.printStackTrace();\n            throw e;\n        }\n        throw ex;\n    } finally {\n        em.close();\n    }\n}\n</code></pre>\n<p>TABLE2</p>\n<pre><code>@Action(Action.ACTION_TYPE.UPDATE)\npublic void updateTable2(Table2 table2) throws Exception {\n    EntityManager em = getEntityManager();\n    try {\n        utx.begin();\n        em.joinTransaction();\n        table1 = em.merge(table2);\n        utx.commit();\n    } catch (Exception ex) {\n        try {\n            utx.rollback();\n        } catch (Exception e) {\n            ex.printStackTrace();\n            throw e;\n        }\n        throw ex;\n    } finally {\n        em.close();\n    }\n}\n</code></pre>\n<p>With above code I can call</p>\n<pre><code>updateTable1(table1);\nupdateTable2(table2);\n</code></pre>\n<p>I would think if the second call fails the update of table1 would still happen.  I am thinking I would not be able to use the generated code and would need to write my own function that would wrap both updates in one transaction.  What is the right way to do this?</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","thymeleaf"],"answers":[{"tags":[],"owner":{"account_id":25781655,"reputation":109,"user_id":19527184,"display_name":"gaurav jha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1657954927,"creation_date":1657954927,"answer_id":73002205,"question_id":72999705,"body_markdown":"try this in the form action\r\n\r\n    th:action=&quot;@{&#39;/bookUpdate/&#39;+${books.id}}&quot;","title":"Could not create an action for button (Java, Spring, Thymeleaf)","body":"<p>try this in the form action</p>\n<pre><code>th:action=&quot;@{'/bookUpdate/'+${books.id}}&quot;\n</code></pre>\n"}],"owner":{"account_id":20879806,"reputation":23,"user_id":15337836,"display_name":"Anastasia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":286,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73002205,"answer_count":1,"score":0,"last_activity_date":1657954927,"creation_date":1657919980,"question_id":72999705,"body_markdown":"I have a list with books (object). I try to add the button for each books, which redirect page &quot;/bookList&quot; to &quot;/bookUpdate&quot;, that contain a form with editable fields, that were filled information about specific book from database. But I could not open this form because of the error and I could not find a mistake. \r\n\r\nError:\r\n[org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type &#39;java.lang.String&#39; to required type &#39;java.lang.Integer&#39;; nested exception is java.lang.NumberFormatException: For input string: &quot;(id=${books.id})&#39;&quot;]\r\n\r\nbookList.html\r\n\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;\r\n\txmlns:layout=&quot;http://www.ultraq.net.nz/thymeleaf/layout&quot;\r\n\txmlns:sec=&quot;https://www.thymeleaf.org/thymeleaf-extras-springsecurity5&quot;\r\n\tlayout:decorate=&quot;~{fragments/main_layout}&quot;&gt;\r\n    &lt;head&gt;\r\n    &lt;title&gt;Books&lt;/title&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n\r\n\t&lt;div layout:fragment=&quot;content&quot; class=&quot;container mySpace&quot;&gt;\r\n\t\t&lt;form action=&quot;/bookList&quot; class=&quot;form-inline&quot;&gt;\r\n\t\t\t&lt;div class=&quot;form-group mb-2&quot; &gt;\r\n\t\t\t\t&lt;input type=&quot;text&quot; class=&quot;form-control&quot; name=&quot;name&quot;\r\n\t\t\t\t\tplaceholder=&quot;Search book&quot; /&gt; &lt;input type=&quot;submit&quot; value=&quot;Search&quot;\r\n\t\t\t\t\tclass=&quot;btn btn-primary&quot; /&gt;\r\n\t\t\t&lt;/div&gt;\r\n\t\t&lt;/form&gt;\r\n\t\t&lt;div class=&quot;card&quot;&gt;\r\n\t\t\t&lt;div class=&quot;card card-body&quot;&gt;\r\n\t\t\t\t&lt;ul th:each=&quot;books:${book}&quot; style=&quot;list-style: none; padding-left: 10px;&quot;&gt;\r\n\t\t\t\t\t&lt;li&gt;&lt;b&gt;Topic:&lt;/b&gt; &lt;span th:text=&quot;${books.topic}&quot;&gt;&lt;/span&gt;&lt;/li&gt;\r\n\t\t\t\t\t&lt;li&gt;&lt;b&gt;Description:&lt;/b&gt;&lt;p th:text=&quot;${books.description}&quot;&gt;&lt;/p&gt;&lt;/li&gt;\r\n\t\t\t\t\t&lt;li&gt;&lt;b&gt;Link:&lt;/b&gt; &lt;span th:text=&quot;${books.link}&quot;&gt;&lt;/span&gt;&lt;/li&gt;\r\n\t\t\t\t\t&lt;br&gt;\r\n\t\t\t\t\t&lt;form class=&quot;form-inline my-2 my-lg-0&quot;         \r\n     th:action=&quot;@{/bookUpdate/(id=${books.id})&#39;}&quot; th:object=&quot;${books}&quot; method=&quot;get&quot;&gt;\r\n\t\t\t\t\t\t&lt;input class=&quot;form-control mr-sm-2&quot; type=&quot;hidden&quot; /&gt;\r\n\t\t\t\t\t\t&lt;button class=&quot;btn btn-secondary my-2 my-sm-0&quot; type=&quot;submit&quot;     \r\n    &gt;Edit&lt;/button&gt;\r\n\t\t\t\t\t&lt;/form&gt;\r\n\t\t\t\t\t&lt;hr&gt;\r\n\t\t\t\t&lt;/ul&gt;\r\n\t\t\t&lt;/div&gt;\r\n\t\t&lt;/div&gt;\r\n\t&lt;/div&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\n\r\nBookController\r\n\r\n    @Controller\r\n    public class BookController {\r\n\t\r\n\t@Autowired\r\n\tprivate BookService service;\r\n\r\n\t@GetMapping(&quot;/bookList&quot;)\r\n\tpublic String bookList(Model model, @RequestParam(defaultValue = &quot;&quot;) String topic) {\r\n\t\tmodel.addAttribute(&quot;book&quot;, service.findByTopicSearch(topic));\r\n\t\treturn &quot;views/bookList&quot;;\r\n\t}\r\n\t\r\n\t @GetMapping(&quot;/bookUpdate/{id}&quot;)\r\n\t public String bookListUpdate(@PathVariable (value = &quot;id&quot;) Integer id, Model model, @Valid \r\n      BookDto book) {\r\n\t\tmodel.addAttribute(&quot;book&quot;, service.findById(id));\r\n\t    return &quot;/bookUpdate&quot;;\r\n\t }\r\n\r\nBook\r\n\r\n    @Entity\r\n    @Table(name = &quot;book&quot;)\r\n    public class Book {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Integer id;\r\n\tprivate String topic;\r\n\tprivate String description;\r\n\tprivate String link;\r\n\r\n\tpublic Book() {\r\n\r\n\t}\r\n\r\n\tpublic Integer getId() {\r\n\t\treturn id;\r\n\t}\r\n\r\n\tpublic void setId(Integer book) {\r\n\t\tthis.id = book;\r\n\t}\r\n\r\n\tpublic String getTopic() {\r\n\t\treturn topic;\r\n\t}\r\n\r\n\tpublic void setTopic(String topic) {\r\n\t\tthis.topic = topic;\r\n\t}\r\n\r\n\tpublic String getDescription() {\r\n\t\treturn description;\r\n\t}\r\n\r\n\tpublic void setDescription(String description) {\r\n\t\tthis.description = description;\r\n\t}\r\n\r\n\tpublic String getLink() {\r\n\t\treturn link;\r\n\t}\r\n\r\n\tpublic void setLink(String link) {\r\n\t\tthis.link = link;\r\n\t}\r\n\r\n    }","title":"Could not create an action for button (Java, Spring, Thymeleaf)","body":"<p>I have a list with books (object). I try to add the button for each books, which redirect page &quot;/bookList&quot; to &quot;/bookUpdate&quot;, that contain a form with editable fields, that were filled information about specific book from database. But I could not open this form because of the error and I could not find a mistake.</p>\n<p>Error:\n[org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'java.lang.Integer'; nested exception is java.lang.NumberFormatException: For input string: &quot;(id=${books.id})'&quot;]</p>\n<p>bookList.html</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;\nxmlns:layout=&quot;http://www.ultraq.net.nz/thymeleaf/layout&quot;\nxmlns:sec=&quot;https://www.thymeleaf.org/thymeleaf-extras-springsecurity5&quot;\nlayout:decorate=&quot;~{fragments/main_layout}&quot;&gt;\n&lt;head&gt;\n&lt;title&gt;Books&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;div layout:fragment=&quot;content&quot; class=&quot;container mySpace&quot;&gt;\n    &lt;form action=&quot;/bookList&quot; class=&quot;form-inline&quot;&gt;\n        &lt;div class=&quot;form-group mb-2&quot; &gt;\n            &lt;input type=&quot;text&quot; class=&quot;form-control&quot; name=&quot;name&quot;\n                placeholder=&quot;Search book&quot; /&gt; &lt;input type=&quot;submit&quot; value=&quot;Search&quot;\n                class=&quot;btn btn-primary&quot; /&gt;\n        &lt;/div&gt;\n    &lt;/form&gt;\n    &lt;div class=&quot;card&quot;&gt;\n        &lt;div class=&quot;card card-body&quot;&gt;\n            &lt;ul th:each=&quot;books:${book}&quot; style=&quot;list-style: none; padding-left: 10px;&quot;&gt;\n                &lt;li&gt;&lt;b&gt;Topic:&lt;/b&gt; &lt;span th:text=&quot;${books.topic}&quot;&gt;&lt;/span&gt;&lt;/li&gt;\n                &lt;li&gt;&lt;b&gt;Description:&lt;/b&gt;&lt;p th:text=&quot;${books.description}&quot;&gt;&lt;/p&gt;&lt;/li&gt;\n                &lt;li&gt;&lt;b&gt;Link:&lt;/b&gt; &lt;span th:text=&quot;${books.link}&quot;&gt;&lt;/span&gt;&lt;/li&gt;\n                &lt;br&gt;\n                &lt;form class=&quot;form-inline my-2 my-lg-0&quot;         \n th:action=&quot;@{/bookUpdate/(id=${books.id})'}&quot; th:object=&quot;${books}&quot; method=&quot;get&quot;&gt;\n                    &lt;input class=&quot;form-control mr-sm-2&quot; type=&quot;hidden&quot; /&gt;\n                    &lt;button class=&quot;btn btn-secondary my-2 my-sm-0&quot; type=&quot;submit&quot;     \n&gt;Edit&lt;/button&gt;\n                &lt;/form&gt;\n                &lt;hr&gt;\n            &lt;/ul&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>BookController</p>\n<pre><code>@Controller\npublic class BookController {\n\n@Autowired\nprivate BookService service;\n\n@GetMapping(&quot;/bookList&quot;)\npublic String bookList(Model model, @RequestParam(defaultValue = &quot;&quot;) String topic) {\n    model.addAttribute(&quot;book&quot;, service.findByTopicSearch(topic));\n    return &quot;views/bookList&quot;;\n}\n\n @GetMapping(&quot;/bookUpdate/{id}&quot;)\n public String bookListUpdate(@PathVariable (value = &quot;id&quot;) Integer id, Model model, @Valid \n  BookDto book) {\n    model.addAttribute(&quot;book&quot;, service.findById(id));\n    return &quot;/bookUpdate&quot;;\n }\n</code></pre>\n<p>Book</p>\n<pre><code>@Entity\n@Table(name = &quot;book&quot;)\npublic class Book {\n\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\nprivate Integer id;\nprivate String topic;\nprivate String description;\nprivate String link;\n\npublic Book() {\n\n}\n\npublic Integer getId() {\n    return id;\n}\n\npublic void setId(Integer book) {\n    this.id = book;\n}\n\npublic String getTopic() {\n    return topic;\n}\n\npublic void setTopic(String topic) {\n    this.topic = topic;\n}\n\npublic String getDescription() {\n    return description;\n}\n\npublic void setDescription(String description) {\n    this.description = description;\n}\n\npublic String getLink() {\n    return link;\n}\n\npublic void setLink(String link) {\n    this.link = link;\n}\n\n}\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","ehcache-2"],"owner":{"account_id":19954850,"reputation":11,"user_id":14623681,"display_name":"Harshini SG"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":433,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1657954393,"creation_date":1657804701,"question_id":72981187,"body_markdown":"I am using the spring 3.2 version along with `net.sf` cache, but while doing mvn build I am  getting `NoClassDefFoundError` for `EhCacheFactoryBean`, but I checked a similar class available in my classpath \r\nbelow is my stack trace  \r\n \r\n\r\n          Failed to load ApplicationContext Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name \r\n    distributorStartupAndConfigurationListener&#39;: \r\n    Injection of autowired dependencies failed; \r\n    nested exception is org.springframework.beans.factory.BeanCreationException: Could not \r\n    autowire field: protected DistributorConfiguration \r\n    DistributorStartupAndConfigurationListener.distributorConfiguration;nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;filePathCache&#39; defined in class path resource [META-INF/spring/cms-client-context.xml]:Instantiation of bean failed; nested exception is java.lang.NoClassDefFoundError: Could not initialize class org.springframework.cache.ehcache.EhCacheFactoryBean Caused by:   org.springframework.beans.factory.BeanCreationException: Could not autowire field: protected DistributorConfiguration .DistributorStartupAndConfigurationListener.distributorConfiguration;  nested exception is org.springframework.beans.factory.BeanCreationException: Error\r\n             creating \r\n                     bean with name &#39;filePathCache&#39; defined in class path resource [META-INF/spring/cms-client- \r\n                     context.xml]: Instantiation of bean failed; nested exception is \r\n                     java.lang.NoClassDefFoundError: Could not initialize class \r\n                     org.springframework.cache.ehcache.EhCacheFactoryBean Caused by: \r\n                     org.springframework.beans.factory.BeanCreationException: Error creating bean with name \r\n                     &#39;filePathCache&#39; defined in class path resource [META-INF/spring/cms-client-context.xml]: \r\n                     Instantiation of bean failed; nested exception is java.lang.NoClassDefFoundError: Could not \r\n                    initialize class org.springframework.cache.ehcache.EhCacheFactoryBean Caused by: \r\n               **java.lang.NoClassDefFoundError: Could not initialize class \r\n         org.springframework.cache.ehcache.EhCacheFactoryBean**\r\n\r\n  \r\nbelow is my `pom.xml`\r\n     \r\n     \r\n&gt;         &lt;dependency&gt; \r\n&gt;          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n&gt;          &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\r\n&gt;          &lt;version&gt;5.3.21&lt;/version&gt;\r\n&gt;         &lt;/dependency&gt; \r\n&gt;     \r\n&gt;         &lt;dependency&gt; \r\n&gt;           &lt;groupId&gt;net.sf.ehcache&lt;/groupId&gt;\r\n&gt;           &lt;artifactId&gt;ehcache&lt;/artifactId&gt;\r\n&gt;           &lt;version&gt;2.10.9.2&lt;/version&gt; \r\n&gt;         &lt;/dependency&gt;\r\n&gt;        \r\n&gt;         &lt;repository&gt; \r\n&gt;          &lt;id&gt;sourceforge&lt;/id&gt;\r\n&gt;          &lt;url&gt;http://oss.sonatype.org/content/groups/sourceforge/&lt;/url&gt; \r\n&gt;           &lt;releases&gt; \r\n&gt;             &lt;enabled&gt;true&lt;/enabled&gt;\r\n&gt;           &lt;/releases&gt;\r\n&gt;          &lt;snapshots&gt;\r\n&gt;          &lt;enabled&gt;true&lt;/enabled&gt;\r\n&gt;          &lt;/snapshots&gt; \r\n&gt;         &lt;/repository&gt;\r\n&gt;         \r\n&gt;          And in application-context.xml : \r\n&gt;         \r\n&gt;         &lt;bean id=&quot;cacheManager&quot; class=&quot;org.springframework.cache.ehcache.EhCacheCacheManager&quot;&gt; \r\n&gt;         &lt;property name=&quot;cacheManagerRef&quot;&gt; \r\n&gt;           &lt;ref local=&quot;ehcache&quot;/&gt; \r\n&gt;         &lt;/property&gt; \r\n&gt;         &lt;/bean&gt;\r\n&gt;         \r\n&gt;         &lt;bean id=&quot;ehcache&quot; class=&quot;org.springframework.cache.ehcache.EhCacheManagerFactoryBean&quot;&gt;\r\n&gt;          &lt;property name=&quot;configLocation&quot;&gt; \r\n&gt;            &lt;value&gt;classpath:META-INF/spring/ehcache.xml&lt;/value&gt; \r\n&gt;           &lt;/property&gt; \r\n&gt;         &lt;/bean&gt;\r\n&gt;         \r\n&gt;         &lt;bean id=&quot;filePathCache&quot; class=&quot;org.springframework.cache.ehcache.EhCacheFactoryBean&quot;&gt; \r\n&gt;         &lt;property name=&quot;cacheManager&quot;&gt; &lt;ref local=&quot;cacheManager&quot; /&gt; &lt;/property&gt; \r\n&gt;         &lt;property name=&quot;cacheName&quot;&gt; &lt;value&gt;getFilePathCache&lt;/value&gt; &lt;/property&gt; \r\n&gt;         &lt;/bean&gt;\r\n&gt;         \r\n\r\n       \r\nNot sure what I am doing wrong here, Could you please help me resolve this issue?","title":"Caused by: java.lang.NoClassDefFoundError: Could not initialize class org.springframework.cache.ehcache.EhCacheFactoryBean","body":"<p>I am using the spring 3.2 version along with <code>net.sf</code> cache, but while doing mvn build I am  getting <code>NoClassDefFoundError</code> for <code>EhCacheFactoryBean</code>, but I checked a similar class available in my classpath\nbelow is my stack trace</p>\n<pre><code>      Failed to load ApplicationContext Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name \ndistributorStartupAndConfigurationListener': \nInjection of autowired dependencies failed; \nnested exception is org.springframework.beans.factory.BeanCreationException: Could not \nautowire field: protected DistributorConfiguration \nDistributorStartupAndConfigurationListener.distributorConfiguration;nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'filePathCache' defined in class path resource [META-INF/spring/cms-client-context.xml]:Instantiation of bean failed; nested exception is java.lang.NoClassDefFoundError: Could not initialize class org.springframework.cache.ehcache.EhCacheFactoryBean Caused by:   org.springframework.beans.factory.BeanCreationException: Could not autowire field: protected DistributorConfiguration .DistributorStartupAndConfigurationListener.distributorConfiguration;  nested exception is org.springframework.beans.factory.BeanCreationException: Error\n         creating \n                 bean with name 'filePathCache' defined in class path resource [META-INF/spring/cms-client- \n                 context.xml]: Instantiation of bean failed; nested exception is \n                 java.lang.NoClassDefFoundError: Could not initialize class \n                 org.springframework.cache.ehcache.EhCacheFactoryBean Caused by: \n                 org.springframework.beans.factory.BeanCreationException: Error creating bean with name \n                 'filePathCache' defined in class path resource [META-INF/spring/cms-client-context.xml]: \n                 Instantiation of bean failed; nested exception is java.lang.NoClassDefFoundError: Could not \n                initialize class org.springframework.cache.ehcache.EhCacheFactoryBean Caused by: \n           **java.lang.NoClassDefFoundError: Could not initialize class \n     org.springframework.cache.ehcache.EhCacheFactoryBean**\n</code></pre>\n<p>below is my <code>pom.xml</code></p>\n<blockquote>\n<pre><code>    &lt;dependency&gt; \n     &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n     &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\n     &lt;version&gt;5.3.21&lt;/version&gt;\n    &lt;/dependency&gt; \n\n    &lt;dependency&gt; \n      &lt;groupId&gt;net.sf.ehcache&lt;/groupId&gt;\n      &lt;artifactId&gt;ehcache&lt;/artifactId&gt;\n      &lt;version&gt;2.10.9.2&lt;/version&gt; \n    &lt;/dependency&gt;\n   \n    &lt;repository&gt; \n     &lt;id&gt;sourceforge&lt;/id&gt;\n     &lt;url&gt;http://oss.sonatype.org/content/groups/sourceforge/&lt;/url&gt; \n      &lt;releases&gt; \n        &lt;enabled&gt;true&lt;/enabled&gt;\n      &lt;/releases&gt;\n     &lt;snapshots&gt;\n     &lt;enabled&gt;true&lt;/enabled&gt;\n     &lt;/snapshots&gt; \n    &lt;/repository&gt;\n    \n     And in application-context.xml : \n    \n    &lt;bean id=&quot;cacheManager&quot; class=&quot;org.springframework.cache.ehcache.EhCacheCacheManager&quot;&gt; \n    &lt;property name=&quot;cacheManagerRef&quot;&gt; \n      &lt;ref local=&quot;ehcache&quot;/&gt; \n    &lt;/property&gt; \n    &lt;/bean&gt;\n    \n    &lt;bean id=&quot;ehcache&quot; class=&quot;org.springframework.cache.ehcache.EhCacheManagerFactoryBean&quot;&gt;\n     &lt;property name=&quot;configLocation&quot;&gt; \n       &lt;value&gt;classpath:META-INF/spring/ehcache.xml&lt;/value&gt; \n      &lt;/property&gt; \n    &lt;/bean&gt;\n    \n    &lt;bean id=&quot;filePathCache&quot; class=&quot;org.springframework.cache.ehcache.EhCacheFactoryBean&quot;&gt; \n    &lt;property name=&quot;cacheManager&quot;&gt; &lt;ref local=&quot;cacheManager&quot; /&gt; &lt;/property&gt; \n    &lt;property name=&quot;cacheName&quot;&gt; &lt;value&gt;getFilePathCache&lt;/value&gt; &lt;/property&gt; \n    &lt;/bean&gt;\n    \n</code></pre>\n</blockquote>\n<p>Not sure what I am doing wrong here, Could you please help me resolve this issue?</p>\n"},{"tags":["java","javafx","fxml"],"comments":[{"owner":{"account_id":10283144,"reputation":2440,"user_id":7587451,"display_name":"Giovanni Contreras"},"score":2,"creation_date":1657924022,"post_id":72999879,"comment_id":128933467,"body_markdown":"if is no inline vertically It is for `aligment=&quot;CENTER&quot;` attribute  in VBOX tag  change its value to CENTER_LEFT . Now , if  you want everything on horizontal line use `HBox` instead","body":"if is no inline vertically It is for <code>aligment=&quot;CENTER&quot;</code> attribute  in VBOX tag  change its value to CENTER_LEFT . Now , if  you want everything on horizontal line use <code>HBox</code> instead"},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1657942647,"post_id":72999879,"comment_id":128935400,"body_markdown":"The whole point of `VBox` is to layout each of its children vertically, one after the other. If you don&#39;t want that behavior, then don&#39;t use `VBox`. For horizontal layout, see `HBox`. Note you can nest layouts (e.g., have an `HBox` as a child of a `VBox`, where the `HBox` has its own children). If you want a grid-like layout, use `GridPane`.","body":"The whole point of <code>VBox</code> is to layout each of its children vertically, one after the other. If you don&#39;t want that behavior, then don&#39;t use <code>VBox</code>. For horizontal layout, see <code>HBox</code>. Note you can nest layouts (e.g., have an <code>HBox</code> as a child of a <code>VBox</code>, where the <code>HBox</code> has its own children). If you want a grid-like layout, use <code>GridPane</code>."}],"answers":[{"tags":[],"owner":{"account_id":25816176,"reputation":56,"user_id":19556110,"display_name":"Prajoy VB"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1657954124,"creation_date":1657954124,"answer_id":73002127,"question_id":72999879,"body_markdown":"Use HBox instead of VBox. HBoxes are used to arrange the elements horizontally\r\n\r\n    &lt;?xml version = &quot;1.0&quot; encoding = &quot;UTF-8&quot;?&gt;\r\n    &lt;?import java.lang.*?&gt;\r\n    &lt;?import java.util.*?&gt;\r\n    &lt;?import javafx.geometry.Insets?&gt;\r\n    &lt;?import javafx.scene.*?&gt;\r\n    &lt;?import javafx.scene.control.*?&gt;\r\n    &lt;?import javafx.scene.layout.*?&gt;\r\n\r\n    &lt;HBox alignment=&quot;CENTER&quot; spacing=&quot;20.0&quot; xmlns:fx=&quot;http://javafx.com/fxml&quot;\r\n      fx:controller=&quot;com.example.HelloController&quot;&gt;\r\n    &lt;padding&gt;\r\n        &lt;Insets bottom=&quot;20.0&quot; left=&quot;20.0&quot; right=&quot;20.0&quot; top=&quot;20.0&quot;/&gt;\r\n    &lt;/padding&gt;\r\n    &lt;Label&gt;Input file&lt;/Label&gt;\r\n    &lt;TextField maxWidth=&quot;333&quot; fx:id=&quot;inputName&quot;/&gt;\r\n    &lt;Button text=&quot;Choose&quot; onAction=&quot;#chooseInputFile&quot;/&gt;\r\n    &lt;TextField maxWidth=&quot;333&quot; fx:id=&quot;outputName&quot;/&gt;\r\n    &lt;Label&gt;Output file&lt;/Label&gt;\r\n    &lt;Button text=&quot;Choose&quot; onAction=&quot;#chooseOutputFile&quot;/&gt;\r\n    &lt;/HBox&gt;\r\n\r\n\r\n","title":"How do I inline elements in JavaFX?","body":"<p>Use HBox instead of VBox. HBoxes are used to arrange the elements horizontally</p>\n<pre><code>&lt;?xml version = &quot;1.0&quot; encoding = &quot;UTF-8&quot;?&gt;\n&lt;?import java.lang.*?&gt;\n&lt;?import java.util.*?&gt;\n&lt;?import javafx.geometry.Insets?&gt;\n&lt;?import javafx.scene.*?&gt;\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n\n&lt;HBox alignment=&quot;CENTER&quot; spacing=&quot;20.0&quot; xmlns:fx=&quot;http://javafx.com/fxml&quot;\n  fx:controller=&quot;com.example.HelloController&quot;&gt;\n&lt;padding&gt;\n    &lt;Insets bottom=&quot;20.0&quot; left=&quot;20.0&quot; right=&quot;20.0&quot; top=&quot;20.0&quot;/&gt;\n&lt;/padding&gt;\n&lt;Label&gt;Input file&lt;/Label&gt;\n&lt;TextField maxWidth=&quot;333&quot; fx:id=&quot;inputName&quot;/&gt;\n&lt;Button text=&quot;Choose&quot; onAction=&quot;#chooseInputFile&quot;/&gt;\n&lt;TextField maxWidth=&quot;333&quot; fx:id=&quot;outputName&quot;/&gt;\n&lt;Label&gt;Output file&lt;/Label&gt;\n&lt;Button text=&quot;Choose&quot; onAction=&quot;#chooseOutputFile&quot;/&gt;\n&lt;/HBox&gt;\n</code></pre>\n"}],"owner":{"account_id":15116322,"reputation":333,"user_id":10908570,"display_name":"TheUltimateGuide"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":162,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73002127,"answer_count":1,"score":0,"last_activity_date":1657954124,"creation_date":1657921611,"question_id":72999879,"body_markdown":"How do I inline elements in JavaFX?\r\nI have the following fxml\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;?import javafx.geometry.Insets?&gt;\r\n&lt;?import javafx.scene.control.Button?&gt;\r\n&lt;?import javafx.scene.control.TextField?&gt;\r\n&lt;?import javafx.scene.layout.VBox?&gt;\r\n&lt;?import javafx.scene.control.Label?&gt;\r\n&lt;VBox alignment=&quot;CENTER&quot; spacing=&quot;20.0&quot; xmlns:fx=&quot;http://javafx.com/fxml&quot;\r\n      fx:controller=&quot;com.example.HelloController&quot;&gt;\r\n    &lt;padding&gt;\r\n        &lt;Insets bottom=&quot;20.0&quot; left=&quot;20.0&quot; right=&quot;20.0&quot; top=&quot;20.0&quot;/&gt;\r\n    &lt;/padding&gt;\r\n    &lt;Label&gt;Input file&lt;/Label&gt;\r\n    &lt;TextField maxWidth=&quot;333&quot; fx:id=&quot;inputName&quot;/&gt;\r\n    &lt;Button text=&quot;Choose&quot; onAction=&quot;#chooseInputFile&quot;/&gt;\r\n    &lt;TextField maxWidth=&quot;333&quot; fx:id=&quot;outputName&quot;/&gt;\r\n    &lt;Label&gt;Output file&lt;/Label&gt;\r\n    &lt;Button text=&quot;Choose&quot; onAction=&quot;#chooseOutputFile&quot;/&gt;\r\n&lt;/VBox&gt;\r\n```\r\nHowever the Input file, TextField, and Button all appear on different lines. Can I make them all on one line?","title":"How do I inline elements in JavaFX?","body":"<p>How do I inline elements in JavaFX?\nI have the following fxml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;?import javafx.geometry.Insets?&gt;\n&lt;?import javafx.scene.control.Button?&gt;\n&lt;?import javafx.scene.control.TextField?&gt;\n&lt;?import javafx.scene.layout.VBox?&gt;\n&lt;?import javafx.scene.control.Label?&gt;\n&lt;VBox alignment=&quot;CENTER&quot; spacing=&quot;20.0&quot; xmlns:fx=&quot;http://javafx.com/fxml&quot;\n      fx:controller=&quot;com.example.HelloController&quot;&gt;\n    &lt;padding&gt;\n        &lt;Insets bottom=&quot;20.0&quot; left=&quot;20.0&quot; right=&quot;20.0&quot; top=&quot;20.0&quot;/&gt;\n    &lt;/padding&gt;\n    &lt;Label&gt;Input file&lt;/Label&gt;\n    &lt;TextField maxWidth=&quot;333&quot; fx:id=&quot;inputName&quot;/&gt;\n    &lt;Button text=&quot;Choose&quot; onAction=&quot;#chooseInputFile&quot;/&gt;\n    &lt;TextField maxWidth=&quot;333&quot; fx:id=&quot;outputName&quot;/&gt;\n    &lt;Label&gt;Output file&lt;/Label&gt;\n    &lt;Button text=&quot;Choose&quot; onAction=&quot;#chooseOutputFile&quot;/&gt;\n&lt;/VBox&gt;\n</code></pre>\n<p>However the Input file, TextField, and Button all appear on different lines. Can I make them all on one line?</p>\n"},{"tags":["java","swing","chess"],"answers":[{"tags":[],"owner":{"account_id":25629892,"reputation":1,"user_id":19400431,"display_name":"TaiiKii"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1657804943,"creation_date":1657804943,"answer_id":72981255,"question_id":72981039,"body_markdown":"Most likely not close to the best solution but:\r\n\r\nI think you can get the &quot;killed&quot; counter by using an ActionListener together with a timer.\r\n\r\nI used something similar to regularly check how many Files were selected in the explorer:\r\n    \r\n    JLabel label = new JLabel();\r\n    int delay = 5; //time to wait between updates in milliseconds\r\n    ActionListener taskPerformer = new ActionListener() { \r\n\t    public void actionPerformed(ActionEvent evt) {\r\n\t\t\tint row = table.getSelectedRowCount(); //this was for me to get the amount of selected rows\r\n\t\t\tString selected = String.valueOf(row); //change int to String\r\n\t\t\t\tlabel.setText(selected + &quot; Files selected&quot;); //set text shown\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\tnew Timer (delay, taskPerformer).start();\r\n\r\nobviously you would need to find another way to get the amount of kills. However, I assume you could implement a counter basically, which checks for The &quot;kill&quot; action.\r\n\r\n\r\nRegarding your other question. Could you not simply put the Label in the center of a frame, while you have the others put to north and south? Maybe I misunderstood something.\r\n\r\nhope it&#39;s somewhat useful.","title":"Adding a score function to a chess game","body":"<p>Most likely not close to the best solution but:</p>\n<p>I think you can get the &quot;killed&quot; counter by using an ActionListener together with a timer.</p>\n<p>I used something similar to regularly check how many Files were selected in the explorer:</p>\n<pre><code>JLabel label = new JLabel();\nint delay = 5; //time to wait between updates in milliseconds\nActionListener taskPerformer = new ActionListener() { \n    public void actionPerformed(ActionEvent evt) {\n        int row = table.getSelectedRowCount(); //this was for me to get the amount of selected rows\n        String selected = String.valueOf(row); //change int to String\n            label.setText(selected + &quot; Files selected&quot;); //set text shown               \n            }\n        };\n    new Timer (delay, taskPerformer).start();\n</code></pre>\n<p>obviously you would need to find another way to get the amount of kills. However, I assume you could implement a counter basically, which checks for The &quot;kill&quot; action.</p>\n<p>Regarding your other question. Could you not simply put the Label in the center of a frame, while you have the others put to north and south? Maybe I misunderstood something.</p>\n<p>hope it's somewhat useful.</p>\n"},{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1657952249,"creation_date":1657867927,"answer_id":72990060,"question_id":72981039,"body_markdown":"In my opinion, the way you have structured your code is poor. You have a [circular dependency][1] between class `GameUI` and class `Piece`. Sometimes circular dependencies are required however not in this case. Class `Piece` should only contain details about itself, including:\r\n* its color, i.e. is it black or white\r\n* its type, i.e. is it a rook or a knight or a pawn, etc.\r\n* its current location on the board\r\n\r\nWhen writing [custom painting][2] code, you should override method `paintComponent` and not method `paint`.\r\n\r\nRather than fix your code, I wrote my own version that incorporates your idea of maintaining a score for each player and increasing the score every time one player captures one of his opponent&#39;s pieces. The code adheres to [Java naming conventions][3] (as mentioned by @kleopatra in this [comment][4]).\r\n\r\nThe code is not complete. It does not check for a winner, for example, but I hope it will help you to complete your game according to your requirements. Nonetheless you can run it, as is, and play chess with it. The code uses letters to indicate the various pieces, rather than icons, simply because I was too lazy to search for such icons. You can add an [icon][5] member to class `ChessPiece` and change method `paintComponent`, in class `GameUI`, so that it paints the icon rather than drawing the letter.\r\n\r\nAlso, the [*Swing*] [timer][6] uses a [method reference][7] for the [ActionListener][8] implementation.\r\n```java\r\nimport java.awt.BorderLayout;\r\nimport java.awt.Color;\r\nimport java.awt.Dimension;\r\nimport java.awt.EventQueue;\r\nimport java.awt.Font;\r\nimport java.awt.Graphics;\r\nimport java.awt.Graphics2D;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.MouseEvent;\r\nimport java.awt.event.MouseListener;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JLabel;\r\nimport javax.swing.JPanel;\r\nimport javax.swing.JTextField;\r\nimport javax.swing.Timer;\r\n\r\npublic class GameUI extends JPanel implements MouseListener {\r\n    private boolean  whiteTurn;\r\n    private int  counter;\r\n    private int startColumn;\r\n    private int startRow;\r\n    private List&lt;ChessPiece&gt;  black;\r\n    private List&lt;ChessPiece&gt;  white;\r\n    private JLabel  turn;\r\n    private JTextField  blackScore;\r\n    private JTextField  whiteScore;\r\n    private Timer  timer;\r\n\r\n    public GameUI() {\r\n        setPreferredSize(new Dimension(512, 512));\r\n        setFocusable(true);\r\n        addMouseListener(this);\r\n        whiteTurn = true;\r\n        timer = new Timer(500, this::showTurn); // &#39;repeats&#39; is initially true\r\n        List&lt;ChessPiece&gt; list = List.of(new ChessPiece(false, ChessPiece.ROOK, 0, 0),\r\n                                        new ChessPiece(false, ChessPiece.KNIGHT, 1, 0),\r\n                                        new ChessPiece(false, ChessPiece.BISHOP, 2, 0),\r\n                                        new ChessPiece(false, ChessPiece.QUEEN, 3, 0),\r\n                                        new ChessPiece(false, ChessPiece.KING, 4, 0),\r\n                                        new ChessPiece(false, ChessPiece.BISHOP, 5, 0),\r\n                                        new ChessPiece(false, ChessPiece.KNIGHT, 6, 0),\r\n                                        new ChessPiece(false, ChessPiece.ROOK, 7, 0),\r\n                                        new ChessPiece(false, ChessPiece.PAWN, 0, 1),\r\n                                        new ChessPiece(false, ChessPiece.PAWN, 1, 1),\r\n                                        new ChessPiece(false, ChessPiece.PAWN, 2, 1),\r\n                                        new ChessPiece(false, ChessPiece.PAWN, 3, 1),\r\n                                        new ChessPiece(false, ChessPiece.PAWN, 4, 1),\r\n                                        new ChessPiece(false, ChessPiece.PAWN, 5, 1),\r\n                                        new ChessPiece(false, ChessPiece.PAWN, 6, 1),\r\n                                        new ChessPiece(false, ChessPiece.PAWN, 7, 1));\r\n        black = new ArrayList&lt;&gt;(list);\r\n        list = List.of(new ChessPiece(true, ChessPiece.ROOK, 0, 7),\r\n                       new ChessPiece(true, ChessPiece.KNIGHT, 1, 7),\r\n                       new ChessPiece(true, ChessPiece.BISHOP, 2, 7),\r\n                       new ChessPiece(true, ChessPiece.QUEEN, 3, 7),\r\n                       new ChessPiece(true, ChessPiece.KING, 4, 7),\r\n                       new ChessPiece(true, ChessPiece.BISHOP, 5, 7),\r\n                       new ChessPiece(true, ChessPiece.KNIGHT, 6, 7),\r\n                       new ChessPiece(true, ChessPiece.ROOK, 7, 7),\r\n                       new ChessPiece(true, ChessPiece.PAWN, 0, 6),\r\n                       new ChessPiece(true, ChessPiece.PAWN, 1, 6),\r\n                       new ChessPiece(true, ChessPiece.PAWN, 2, 6),\r\n                       new ChessPiece(true, ChessPiece.PAWN, 3, 6),\r\n                       new ChessPiece(true, ChessPiece.PAWN, 4, 6),\r\n                       new ChessPiece(true, ChessPiece.PAWN, 5, 6),\r\n                       new ChessPiece(true, ChessPiece.PAWN, 6, 6),\r\n                       new ChessPiece(true, ChessPiece.PAWN, 7, 6));\r\n        white = new ArrayList&lt;&gt;(list);\r\n    }\r\n/* Start &#39;MouseListener&#39; interface methods. */\r\n    @Override // java.awt.event.MouseListener\r\n    public void mouseClicked(MouseEvent event) {\r\n        // Do nothing.\r\n    }\r\n\r\n    @Override // java.awt.event.MouseListener\r\n    public void mouseEntered(MouseEvent event) {\r\n        // Do nothing.\r\n    }\r\n\r\n    @Override // java.awt.event.MouseListener\r\n    public void mouseExited(MouseEvent event) {\r\n        // Do nothing.\r\n    }\r\n\r\n    @Override // java.awt.event.MouseListener\r\n    public void mousePressed(MouseEvent event) {\r\n        int x = event.getX();\r\n        startColumn = x / 64;\r\n        int y = event.getY();\r\n        startRow = y / 64;\r\n    }\r\n\r\n    @Override // java.awt.event.MouseListener\r\n    public void mouseReleased(MouseEvent event) {\r\n        int x = event.getX();\r\n        int column = x / 64;\r\n        int y = event.getY();\r\n        int row = y / 64;\r\n        List&lt;ChessPiece&gt; list;\r\n        if (whiteTurn) {\r\n            list = white;\r\n        }\r\n        else {\r\n            list = black;\r\n        }\r\n        // Move the relevant [chess] piece.\r\n        for (ChessPiece piece : list) {\r\n            if (piece != null) {\r\n                if (piece.getColumn() == startColumn  &amp;&amp;  piece.getRow() == startRow) {\r\n                    piece.setColumn(column);\r\n                    piece.setRow(row);\r\n                }\r\n            }\r\n        }\r\n        if (whiteTurn) {\r\n            list = black;\r\n        }\r\n        else {\r\n            list = white;\r\n        }\r\n        // Check if the moved piece captured one of the opponent&#39;s pieces.\r\n        for (ChessPiece piece : list) {\r\n            if (piece != null) {\r\n                if (piece.getColumn() == column  &amp;&amp;  piece.getRow() == row) {\r\n                    int index = list.indexOf(piece);\r\n                    if (index &gt;= 0) {\r\n                        System.out.printf(&quot;(%d) %s%n&quot;, index, piece);\r\n                        list.set(index, null);\r\n                        if (whiteTurn) {\r\n                            incrementScore(whiteScore);\r\n                        }\r\n                        else {\r\n                            incrementScore(blackScore);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        repaint();\r\n        whiteTurn = !whiteTurn; // swap turns\r\n        counter = 0;\r\n        timer.start();\r\n    }\r\n/* End &#39;MouseListener&#39; interface methods. */\r\n    @Override // javax.swing.JComponent\r\n    protected void paintComponent(Graphics g) {\r\n        super.paintComponent(g);\r\n        Graphics2D g2d = (Graphics2D) g;\r\n        Color color = Color.red;\r\n        for (int i = 0; i &lt; 8; i++) {\r\n            for (int j = 0; j &lt; 8; j++) {\r\n                g2d.setColor(color);\r\n                int x = j * 64;\r\n                int y = i * 64;\r\n                g2d.fillRect(x, y, 64, 64);\r\n                g2d.setColor(Color.black);\r\n                g2d.drawRect(x, y, 64, 64);\r\n                for (ChessPiece piece : black) {\r\n                    if (piece != null) {\r\n                        if (piece.getRow() == i  &amp;&amp;  piece.getColumn() == j) {\r\n                            g2d.drawString(Character.toString(piece.getType()), x + 30, y + 30);\r\n                        }\r\n                    }\r\n                }\r\n                g2d.setColor(Color.white);\r\n                for (ChessPiece piece : white) {\r\n                    if (piece != null) {\r\n                        if (piece.getRow() == i  &amp;&amp;  piece.getColumn() == j) {\r\n                            g2d.drawString(Character.toString(piece.getType()), x + 30, y + 30);\r\n                        }\r\n                    }\r\n                }\r\n                if (color == Color.red) {\r\n                    color = Color.blue;\r\n                }\r\n                else {\r\n                    color = Color.red;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private void buildAndDisplayGui() {\r\n        JFrame frame = new JFrame();\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.add(createScorePanel(), BorderLayout.PAGE_START);\r\n        frame.add(this, BorderLayout.CENTER);\r\n        frame.add(createTurnPanel(), BorderLayout.PAGE_END);\r\n        frame.pack();\r\n        frame.setLocationByPlatform(true);\r\n        this.requestFocusInWindow();\r\n        frame.setVisible(true);\r\n    }\r\n\r\n    private JPanel createScorePanel() {\r\n        JPanel scorePanel = new JPanel();\r\n        JLabel whiteScoreLabel = new JLabel(&quot;White: &quot;);\r\n        scorePanel.add(whiteScoreLabel);\r\n        whiteScore = new JTextField(4);\r\n        whiteScore.setText(&quot;0&quot;);\r\n        scorePanel.add(whiteScore);\r\n        JLabel blackScoreLabel = new JLabel(&quot;Black: &quot;);\r\n        scorePanel.add(blackScoreLabel);\r\n        blackScore = new JTextField(4);\r\n        blackScore.setText(&quot;0&quot;);\r\n        scorePanel.add(blackScore);\r\n        return scorePanel;\r\n    }\r\n\r\n    private JPanel createTurnPanel() {\r\n        JPanel turnPanel = new JPanel();\r\n        turnPanel.setBackground(Color.gray);\r\n        turn = new JLabel(&quot;WHITE&quot;);\r\n        turn.setBackground(Color.gray);\r\n        Font f = turn.getFont();\r\n        f = f.deriveFont(16.0f);\r\n        turn.setFont(f);\r\n        turn.setForeground(Color.white);\r\n        turnPanel.add(turn);\r\n        return turnPanel;\r\n    }\r\n\r\n    private void incrementScore(JTextField textField) {\r\n        int score = Integer.parseInt(textField.getText());\r\n        textField.setText(Integer.toString(++score));\r\n    }\r\n\r\n    // Blink text of &#39;turn&#39;\r\n    private void showTurn(ActionEvent event) {\r\n        if (++counter &gt;= 5) {\r\n            timer.stop();\r\n        }\r\n        else {\r\n            if (counter % 2 == 1) {\r\n                turn.setText(&quot;&quot;);\r\n            }\r\n            else {\r\n                if (whiteTurn) {\r\n                    turn.setText(&quot;WHITE&quot;);\r\n                    turn.setForeground(Color.white);\r\n                }\r\n                else {\r\n                    turn.setText(&quot;BLACK&quot;);\r\n                    turn.setForeground(Color.black);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        GameUI instance = new GameUI();\r\n        EventQueue.invokeLater(() -&gt; instance.buildAndDisplayGui());\r\n    }\r\n}\r\n\r\nclass ChessPiece {\r\n    public static final char  BISHOP = &#39;B&#39;;\r\n    public static final char  KING = &#39;K&#39;;\r\n    public static final char  KNIGHT = &#39;N&#39;;\r\n    public static final char  PAWN = &#39;P&#39;;\r\n    public static final char  QUEEN = &#39;Q&#39;;\r\n    public static final char  ROOK = &#39;R&#39;;\r\n\r\n    private boolean white;\r\n    private char type;\r\n    private int column;\r\n    private int row;\r\n\r\n    public ChessPiece(boolean white, char type, int column, int row) {\r\n        this.white = white;\r\n        this.type = type;\r\n        this.column = column;\r\n        this.row = row;\r\n    }\r\n\r\n    public int getColumn() {\r\n        return column;\r\n    }\r\n\r\n    public void setColumn(int column) {\r\n        this.column = column;\r\n    }\r\n\r\n    public int getRow() {\r\n        return row;\r\n    }\r\n\r\n    public void setRow(int row) {\r\n        this.row = row;\r\n    }\r\n\r\n    public boolean isWhite() {\r\n        return white;\r\n    }\r\n\r\n    public char getType() {\r\n        return type;\r\n    }\r\n\r\n    // For debugging purposes only.\r\n    public String toString() {\r\n        return String.format(&quot;[%s] %c (%d, %d)&quot;, (white ? &quot;white&quot; : &quot;black&quot;), type, row, column);\r\n    }\r\n}\r\n```\r\nNote that [static] method [of][9], in interface `java.util.List`, was added in JDK 9. If you are using an earlier version, then try the following code instead:\r\n```java\r\nblack = new ArrayList&lt;&gt;();\r\nblack.add(new ChessPiece(false, ChessPiece.ROOK, 0, 0));\r\nblack.add(new ChessPiece(false, ChessPiece.KNIGHT, 1, 0));\r\nblack.add(new ChessPiece(false, ChessPiece.BISHOP, 2, 0));\r\nblack.add(new ChessPiece(false, ChessPiece.QUEEN, 3, 0));\r\nblack.add(new ChessPiece(false, ChessPiece.KING, 4, 0));\r\nblack.add(new ChessPiece(false, ChessPiece.BISHOP, 5, 0));\r\nblack.add(new ChessPiece(false, ChessPiece.KNIGHT, 6, 0));\r\nblack.add(new ChessPiece(false, ChessPiece.ROOK, 7, 0));\r\nblack.add(new ChessPiece(false, ChessPiece.PAWN, 0, 1));\r\nblack.add(new ChessPiece(false, ChessPiece.PAWN, 1, 1));\r\nblack.add(new ChessPiece(false, ChessPiece.PAWN, 2, 1));\r\nblack.add(new ChessPiece(false, ChessPiece.PAWN, 3, 1));\r\nblack.add(new ChessPiece(false, ChessPiece.PAWN, 4, 1));\r\nblack.add(new ChessPiece(false, ChessPiece.PAWN, 5, 1));\r\nblack.add(new ChessPiece(false, ChessPiece.PAWN, 6, 1));\r\nblack.add(new ChessPiece(false, ChessPiece.PAWN, 7, 1));\r\n\r\nwhite = new ArrayList&lt;&gt;();\r\nwhite.add(new ChessPiece(true, ChessPiece.ROOK, 0, 7));\r\nwhite.add(new ChessPiece(true, ChessPiece.KNIGHT, 1, 7));\r\nwhite.add(new ChessPiece(true, ChessPiece.BISHOP, 2, 7));\r\nwhite.add(new ChessPiece(true, ChessPiece.QUEEN, 3, 7));\r\nwhite.add(new ChessPiece(true, ChessPiece.KING, 4, 7));\r\nwhite.add(new ChessPiece(true, ChessPiece.BISHOP, 5, 7));\r\nwhite.add(new ChessPiece(true, ChessPiece.KNIGHT, 6, 7));\r\nwhite.add(new ChessPiece(true, ChessPiece.ROOK, 7, 7));\r\nwhite.add(new ChessPiece(true, ChessPiece.PAWN, 0, 6));\r\nwhite.add(new ChessPiece(true, ChessPiece.PAWN, 1, 6));\r\nwhite.add(new ChessPiece(true, ChessPiece.PAWN, 2, 6));\r\nwhite.add(new ChessPiece(true, ChessPiece.PAWN, 3, 6));\r\nwhite.add(new ChessPiece(true, ChessPiece.PAWN, 4, 6));\r\nwhite.add(new ChessPiece(true, ChessPiece.PAWN, 5, 6));\r\nwhite.add(new ChessPiece(true, ChessPiece.PAWN, 6, 6));\r\nwhite.add(new ChessPiece(true, ChessPiece.PAWN, 7, 6));\r\n```\r\n\r\nHere is a screen capture:  \r\n(It&#39;s *white*&#39;s turn and neither player has scored, yet.)\r\n\r\n[![chess game][10]][10]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/36903870/java-is-it-bad-practice-to-have-a-circular-dependency-within-the-same-package\r\n  [2]: https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html\r\n  [3]: https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\r\n  [4]: https://stackoverflow.com/questions/72981039/adding-a-score-function-to-a-chess-game#comment128909027_72981039\r\n  [5]: https://docs.oracle.com/javase/tutorial/uiswing/components/icon.html\r\n  [6]: https://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html\r\n  [7]: https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\r\n  [8]: https://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html\r\n  [9]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html#of(E...)\r\n  [10]: https://i.stack.imgur.com/pgT7Q.png","title":"Adding a score function to a chess game","body":"<p>In my opinion, the way you have structured your code is poor. You have a <a href=\"https://stackoverflow.com/questions/36903870/java-is-it-bad-practice-to-have-a-circular-dependency-within-the-same-package\">circular dependency</a> between class <code>GameUI</code> and class <code>Piece</code>. Sometimes circular dependencies are required however not in this case. Class <code>Piece</code> should only contain details about itself, including:</p>\n<ul>\n<li>its color, i.e. is it black or white</li>\n<li>its type, i.e. is it a rook or a knight or a pawn, etc.</li>\n<li>its current location on the board</li>\n</ul>\n<p>When writing <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html\" rel=\"nofollow noreferrer\">custom painting</a> code, you should override method <code>paintComponent</code> and not method <code>paint</code>.</p>\n<p>Rather than fix your code, I wrote my own version that incorporates your idea of maintaining a score for each player and increasing the score every time one player captures one of his opponent's pieces. The code adheres to <a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\" rel=\"nofollow noreferrer\">Java naming conventions</a> (as mentioned by @kleopatra in this <a href=\"https://stackoverflow.com/questions/72981039/adding-a-score-function-to-a-chess-game#comment128909027_72981039\">comment</a>).</p>\n<p>The code is not complete. It does not check for a winner, for example, but I hope it will help you to complete your game according to your requirements. Nonetheless you can run it, as is, and play chess with it. The code uses letters to indicate the various pieces, rather than icons, simply because I was too lazy to search for such icons. You can add an <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/icon.html\" rel=\"nofollow noreferrer\">icon</a> member to class <code>ChessPiece</code> and change method <code>paintComponent</code>, in class <code>GameUI</code>, so that it paints the icon rather than drawing the letter.</p>\n<p>Also, the [<em>Swing</em>] <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html\" rel=\"nofollow noreferrer\">timer</a> uses a <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\" rel=\"nofollow noreferrer\">method reference</a> for the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html\" rel=\"nofollow noreferrer\">ActionListener</a> implementation.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.EventQueue;\nimport java.awt.Font;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.MouseEvent;\nimport java.awt.event.MouseListener;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.JTextField;\nimport javax.swing.Timer;\n\npublic class GameUI extends JPanel implements MouseListener {\n    private boolean  whiteTurn;\n    private int  counter;\n    private int startColumn;\n    private int startRow;\n    private List&lt;ChessPiece&gt;  black;\n    private List&lt;ChessPiece&gt;  white;\n    private JLabel  turn;\n    private JTextField  blackScore;\n    private JTextField  whiteScore;\n    private Timer  timer;\n\n    public GameUI() {\n        setPreferredSize(new Dimension(512, 512));\n        setFocusable(true);\n        addMouseListener(this);\n        whiteTurn = true;\n        timer = new Timer(500, this::showTurn); // 'repeats' is initially true\n        List&lt;ChessPiece&gt; list = List.of(new ChessPiece(false, ChessPiece.ROOK, 0, 0),\n                                        new ChessPiece(false, ChessPiece.KNIGHT, 1, 0),\n                                        new ChessPiece(false, ChessPiece.BISHOP, 2, 0),\n                                        new ChessPiece(false, ChessPiece.QUEEN, 3, 0),\n                                        new ChessPiece(false, ChessPiece.KING, 4, 0),\n                                        new ChessPiece(false, ChessPiece.BISHOP, 5, 0),\n                                        new ChessPiece(false, ChessPiece.KNIGHT, 6, 0),\n                                        new ChessPiece(false, ChessPiece.ROOK, 7, 0),\n                                        new ChessPiece(false, ChessPiece.PAWN, 0, 1),\n                                        new ChessPiece(false, ChessPiece.PAWN, 1, 1),\n                                        new ChessPiece(false, ChessPiece.PAWN, 2, 1),\n                                        new ChessPiece(false, ChessPiece.PAWN, 3, 1),\n                                        new ChessPiece(false, ChessPiece.PAWN, 4, 1),\n                                        new ChessPiece(false, ChessPiece.PAWN, 5, 1),\n                                        new ChessPiece(false, ChessPiece.PAWN, 6, 1),\n                                        new ChessPiece(false, ChessPiece.PAWN, 7, 1));\n        black = new ArrayList&lt;&gt;(list);\n        list = List.of(new ChessPiece(true, ChessPiece.ROOK, 0, 7),\n                       new ChessPiece(true, ChessPiece.KNIGHT, 1, 7),\n                       new ChessPiece(true, ChessPiece.BISHOP, 2, 7),\n                       new ChessPiece(true, ChessPiece.QUEEN, 3, 7),\n                       new ChessPiece(true, ChessPiece.KING, 4, 7),\n                       new ChessPiece(true, ChessPiece.BISHOP, 5, 7),\n                       new ChessPiece(true, ChessPiece.KNIGHT, 6, 7),\n                       new ChessPiece(true, ChessPiece.ROOK, 7, 7),\n                       new ChessPiece(true, ChessPiece.PAWN, 0, 6),\n                       new ChessPiece(true, ChessPiece.PAWN, 1, 6),\n                       new ChessPiece(true, ChessPiece.PAWN, 2, 6),\n                       new ChessPiece(true, ChessPiece.PAWN, 3, 6),\n                       new ChessPiece(true, ChessPiece.PAWN, 4, 6),\n                       new ChessPiece(true, ChessPiece.PAWN, 5, 6),\n                       new ChessPiece(true, ChessPiece.PAWN, 6, 6),\n                       new ChessPiece(true, ChessPiece.PAWN, 7, 6));\n        white = new ArrayList&lt;&gt;(list);\n    }\n/* Start 'MouseListener' interface methods. */\n    @Override // java.awt.event.MouseListener\n    public void mouseClicked(MouseEvent event) {\n        // Do nothing.\n    }\n\n    @Override // java.awt.event.MouseListener\n    public void mouseEntered(MouseEvent event) {\n        // Do nothing.\n    }\n\n    @Override // java.awt.event.MouseListener\n    public void mouseExited(MouseEvent event) {\n        // Do nothing.\n    }\n\n    @Override // java.awt.event.MouseListener\n    public void mousePressed(MouseEvent event) {\n        int x = event.getX();\n        startColumn = x / 64;\n        int y = event.getY();\n        startRow = y / 64;\n    }\n\n    @Override // java.awt.event.MouseListener\n    public void mouseReleased(MouseEvent event) {\n        int x = event.getX();\n        int column = x / 64;\n        int y = event.getY();\n        int row = y / 64;\n        List&lt;ChessPiece&gt; list;\n        if (whiteTurn) {\n            list = white;\n        }\n        else {\n            list = black;\n        }\n        // Move the relevant [chess] piece.\n        for (ChessPiece piece : list) {\n            if (piece != null) {\n                if (piece.getColumn() == startColumn  &amp;&amp;  piece.getRow() == startRow) {\n                    piece.setColumn(column);\n                    piece.setRow(row);\n                }\n            }\n        }\n        if (whiteTurn) {\n            list = black;\n        }\n        else {\n            list = white;\n        }\n        // Check if the moved piece captured one of the opponent's pieces.\n        for (ChessPiece piece : list) {\n            if (piece != null) {\n                if (piece.getColumn() == column  &amp;&amp;  piece.getRow() == row) {\n                    int index = list.indexOf(piece);\n                    if (index &gt;= 0) {\n                        System.out.printf(&quot;(%d) %s%n&quot;, index, piece);\n                        list.set(index, null);\n                        if (whiteTurn) {\n                            incrementScore(whiteScore);\n                        }\n                        else {\n                            incrementScore(blackScore);\n                        }\n                    }\n                }\n            }\n        }\n        repaint();\n        whiteTurn = !whiteTurn; // swap turns\n        counter = 0;\n        timer.start();\n    }\n/* End 'MouseListener' interface methods. */\n    @Override // javax.swing.JComponent\n    protected void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        Graphics2D g2d = (Graphics2D) g;\n        Color color = Color.red;\n        for (int i = 0; i &lt; 8; i++) {\n            for (int j = 0; j &lt; 8; j++) {\n                g2d.setColor(color);\n                int x = j * 64;\n                int y = i * 64;\n                g2d.fillRect(x, y, 64, 64);\n                g2d.setColor(Color.black);\n                g2d.drawRect(x, y, 64, 64);\n                for (ChessPiece piece : black) {\n                    if (piece != null) {\n                        if (piece.getRow() == i  &amp;&amp;  piece.getColumn() == j) {\n                            g2d.drawString(Character.toString(piece.getType()), x + 30, y + 30);\n                        }\n                    }\n                }\n                g2d.setColor(Color.white);\n                for (ChessPiece piece : white) {\n                    if (piece != null) {\n                        if (piece.getRow() == i  &amp;&amp;  piece.getColumn() == j) {\n                            g2d.drawString(Character.toString(piece.getType()), x + 30, y + 30);\n                        }\n                    }\n                }\n                if (color == Color.red) {\n                    color = Color.blue;\n                }\n                else {\n                    color = Color.red;\n                }\n            }\n        }\n    }\n\n    private void buildAndDisplayGui() {\n        JFrame frame = new JFrame();\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.add(createScorePanel(), BorderLayout.PAGE_START);\n        frame.add(this, BorderLayout.CENTER);\n        frame.add(createTurnPanel(), BorderLayout.PAGE_END);\n        frame.pack();\n        frame.setLocationByPlatform(true);\n        this.requestFocusInWindow();\n        frame.setVisible(true);\n    }\n\n    private JPanel createScorePanel() {\n        JPanel scorePanel = new JPanel();\n        JLabel whiteScoreLabel = new JLabel(&quot;White: &quot;);\n        scorePanel.add(whiteScoreLabel);\n        whiteScore = new JTextField(4);\n        whiteScore.setText(&quot;0&quot;);\n        scorePanel.add(whiteScore);\n        JLabel blackScoreLabel = new JLabel(&quot;Black: &quot;);\n        scorePanel.add(blackScoreLabel);\n        blackScore = new JTextField(4);\n        blackScore.setText(&quot;0&quot;);\n        scorePanel.add(blackScore);\n        return scorePanel;\n    }\n\n    private JPanel createTurnPanel() {\n        JPanel turnPanel = new JPanel();\n        turnPanel.setBackground(Color.gray);\n        turn = new JLabel(&quot;WHITE&quot;);\n        turn.setBackground(Color.gray);\n        Font f = turn.getFont();\n        f = f.deriveFont(16.0f);\n        turn.setFont(f);\n        turn.setForeground(Color.white);\n        turnPanel.add(turn);\n        return turnPanel;\n    }\n\n    private void incrementScore(JTextField textField) {\n        int score = Integer.parseInt(textField.getText());\n        textField.setText(Integer.toString(++score));\n    }\n\n    // Blink text of 'turn'\n    private void showTurn(ActionEvent event) {\n        if (++counter &gt;= 5) {\n            timer.stop();\n        }\n        else {\n            if (counter % 2 == 1) {\n                turn.setText(&quot;&quot;);\n            }\n            else {\n                if (whiteTurn) {\n                    turn.setText(&quot;WHITE&quot;);\n                    turn.setForeground(Color.white);\n                }\n                else {\n                    turn.setText(&quot;BLACK&quot;);\n                    turn.setForeground(Color.black);\n                }\n            }\n        }\n    }\n\n    public static void main(String[] args) {\n        GameUI instance = new GameUI();\n        EventQueue.invokeLater(() -&gt; instance.buildAndDisplayGui());\n    }\n}\n\nclass ChessPiece {\n    public static final char  BISHOP = 'B';\n    public static final char  KING = 'K';\n    public static final char  KNIGHT = 'N';\n    public static final char  PAWN = 'P';\n    public static final char  QUEEN = 'Q';\n    public static final char  ROOK = 'R';\n\n    private boolean white;\n    private char type;\n    private int column;\n    private int row;\n\n    public ChessPiece(boolean white, char type, int column, int row) {\n        this.white = white;\n        this.type = type;\n        this.column = column;\n        this.row = row;\n    }\n\n    public int getColumn() {\n        return column;\n    }\n\n    public void setColumn(int column) {\n        this.column = column;\n    }\n\n    public int getRow() {\n        return row;\n    }\n\n    public void setRow(int row) {\n        this.row = row;\n    }\n\n    public boolean isWhite() {\n        return white;\n    }\n\n    public char getType() {\n        return type;\n    }\n\n    // For debugging purposes only.\n    public String toString() {\n        return String.format(&quot;[%s] %c (%d, %d)&quot;, (white ? &quot;white&quot; : &quot;black&quot;), type, row, column);\n    }\n}\n</code></pre>\n<p>Note that [static] method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html#of(E...)\" rel=\"nofollow noreferrer\">of</a>, in interface <code>java.util.List</code>, was added in JDK 9. If you are using an earlier version, then try the following code instead:</p>\n<pre class=\"lang-java prettyprint-override\"><code>black = new ArrayList&lt;&gt;();\nblack.add(new ChessPiece(false, ChessPiece.ROOK, 0, 0));\nblack.add(new ChessPiece(false, ChessPiece.KNIGHT, 1, 0));\nblack.add(new ChessPiece(false, ChessPiece.BISHOP, 2, 0));\nblack.add(new ChessPiece(false, ChessPiece.QUEEN, 3, 0));\nblack.add(new ChessPiece(false, ChessPiece.KING, 4, 0));\nblack.add(new ChessPiece(false, ChessPiece.BISHOP, 5, 0));\nblack.add(new ChessPiece(false, ChessPiece.KNIGHT, 6, 0));\nblack.add(new ChessPiece(false, ChessPiece.ROOK, 7, 0));\nblack.add(new ChessPiece(false, ChessPiece.PAWN, 0, 1));\nblack.add(new ChessPiece(false, ChessPiece.PAWN, 1, 1));\nblack.add(new ChessPiece(false, ChessPiece.PAWN, 2, 1));\nblack.add(new ChessPiece(false, ChessPiece.PAWN, 3, 1));\nblack.add(new ChessPiece(false, ChessPiece.PAWN, 4, 1));\nblack.add(new ChessPiece(false, ChessPiece.PAWN, 5, 1));\nblack.add(new ChessPiece(false, ChessPiece.PAWN, 6, 1));\nblack.add(new ChessPiece(false, ChessPiece.PAWN, 7, 1));\n\nwhite = new ArrayList&lt;&gt;();\nwhite.add(new ChessPiece(true, ChessPiece.ROOK, 0, 7));\nwhite.add(new ChessPiece(true, ChessPiece.KNIGHT, 1, 7));\nwhite.add(new ChessPiece(true, ChessPiece.BISHOP, 2, 7));\nwhite.add(new ChessPiece(true, ChessPiece.QUEEN, 3, 7));\nwhite.add(new ChessPiece(true, ChessPiece.KING, 4, 7));\nwhite.add(new ChessPiece(true, ChessPiece.BISHOP, 5, 7));\nwhite.add(new ChessPiece(true, ChessPiece.KNIGHT, 6, 7));\nwhite.add(new ChessPiece(true, ChessPiece.ROOK, 7, 7));\nwhite.add(new ChessPiece(true, ChessPiece.PAWN, 0, 6));\nwhite.add(new ChessPiece(true, ChessPiece.PAWN, 1, 6));\nwhite.add(new ChessPiece(true, ChessPiece.PAWN, 2, 6));\nwhite.add(new ChessPiece(true, ChessPiece.PAWN, 3, 6));\nwhite.add(new ChessPiece(true, ChessPiece.PAWN, 4, 6));\nwhite.add(new ChessPiece(true, ChessPiece.PAWN, 5, 6));\nwhite.add(new ChessPiece(true, ChessPiece.PAWN, 6, 6));\nwhite.add(new ChessPiece(true, ChessPiece.PAWN, 7, 6));\n</code></pre>\n<p>Here is a screen capture:<br />\n(It's <em>white</em>'s turn and neither player has scored, yet.)</p>\n<p><a href=\"https://i.stack.imgur.com/pgT7Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pgT7Q.png\" alt=\"chess game\" /></a></p>\n"}],"owner":{"account_id":22111167,"reputation":11,"user_id":16366031,"display_name":"Vish"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":154,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":72990060,"answer_count":2,"score":-1,"last_activity_date":1657952249,"creation_date":1657804046,"question_id":72981039,"body_markdown":"I am trying to add a twist to the game of chess, where the game is decided by a taking the most pieces. Each piece is worth 1 point, and the game ends when one player has 10 points. \r\n\r\nWhen there is a &quot;kill&quot;/the piece is removed, a message needs to update so as to show the score. This code below shows the part where the &quot;kill&quot; code is. I just coded a &quot;System.out.println&quot; in the method to test if an output will show if a piece is &quot;killed&quot;. \r\n\r\n```\r\nimport Menus.GameUI;\r\nimport java.util.LinkedList;\r\n\r\npublic class Piece {\r\n    public int xPos;\r\n    public int yPos;\r\n    public int x;\r\n    public int y;\r\n    public boolean isWhite;\r\n    LinkedList&lt;Piece&gt; ps;\r\n    public String type;\r\n\r\n    public Piece(int xPos, int yPos, boolean isWhite, String type, LinkedList&lt;Piece&gt; ps) {\r\n        this.xPos = xPos;\r\n        this.yPos = yPos;\r\n        x = xPos*64;\r\n        y = yPos*64;\r\n        this.isWhite = isWhite;\r\n        this.ps = ps;\r\n        this.type = type;\r\n        ps.add(this);\r\n    }//constructor\r\n    \r\n    public boolean move(int xPos, int yPos){//allows the piece to move\r\n        if(GameUI.getPiece(xPos*64, yPos*64) != null){\r\n            if(GameUI.getPiece(xPos*64, yPos*64).isWhite != isWhite){\r\n                GameUI.getPiece(xPos*64, yPos*64).kill();\r\n                //check that a piece is not the same colour, so it can be &quot;killed&quot;/removed\r\n            }else{\r\n                x = this.xPos*64;\r\n                y = this.yPos*64;\r\n                return true;\r\n                //ensures a piece cannot move to the same square if a piece of the same colour is already on\r\n            }//end of if\r\n        }//end of if\r\n        this.xPos = xPos;\r\n        this.yPos = yPos;\r\n        x = xPos*64;\r\n        y = yPos*64;\r\n        return false;\r\n    }//move\r\n    \r\n    public int kill(){//removes a piece if a piece of the other colour is on the same square\r\n        int score = 1;\r\n        ps.remove(this);\r\n        System.out.println(score);\r\n        return score;\r\n    }//kill\r\n```\r\nThis is the main class which would show the score:\r\n\r\n```\r\nimport Pieces.Pawn;\r\nimport Pieces.Piece;\r\nimport java.awt.BorderLayout;\r\nimport java.awt.Color;\r\nimport java.awt.Graphics;\r\nimport java.awt.Image;\r\nimport java.awt.event.MouseEvent;\r\nimport java.awt.event.MouseListener;\r\nimport java.awt.event.MouseMotionListener;\r\nimport java.awt.image.BufferedImage;\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.util.LinkedList;\r\nimport javax.imageio.ImageIO;\r\nimport javax.swing.JButton;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JLabel;\r\nimport javax.swing.JPanel;\r\nimport javax.swing.JToolBar;\r\n\r\n/**\r\n *\r\n * @author V\r\n */\r\npublic class GameUI {\r\n\r\n    public static LinkedList&lt;Piece&gt; ps = new LinkedList&lt;&gt;();\r\n    public static Piece selPiece = null;\r\n    private static JLabel wMess = new JLabel(&quot;  ScoreW:  &quot;);\r\n    private static JLabel bMess = new JLabel(&quot;  ScoreB:  &quot;);\r\n    //public static final int MAX_HEALTH = 10;\r\n    \r\n    public static void main(String[] args) throws IOException{\r\n        \r\n        //extracts the images \r\n        BufferedImage all = ImageIO.read(new File(&quot;chess.png&quot;));\r\n            Image img[] = new Image[12];\r\n            int ind = 0;\r\n            for(int y = 0; y &lt; 400; y += 200){\r\n                for(int x = 0; x &lt; 1200; x += 200){\r\n                    img[ind] = all.getSubimage(x, y, 200, 200).getScaledInstance(64, 64, BufferedImage.SCALE_SMOOTH);\r\n                    ind++;\r\n                }//end of for\r\n            }//end of for\r\n        \r\n        //Displays the white pieces on the board\r\n        Piece wKing = new Piece(4, 7, true, &quot;King&quot;, ps) {};\r\n        Piece wQueen = new Piece(3, 7, true, &quot;Queen&quot;, ps) {};\r\n        Piece wBishop = new Piece(2, 7, true, &quot;Bishop&quot;, ps) {};\r\n        Piece wBishop2 = new Piece(5, 7, true, &quot;Bishop&quot;, ps) {};\r\n        Piece wKinght = new Piece(1, 7, true, &quot;Knight&quot;, ps) {};\r\n        Piece wKnight2 = new Piece(6, 7, true, &quot;Knight&quot;, ps) {};\r\n        Piece wRook = new Piece(0, 7, true, &quot;Rook&quot;, ps) {};\r\n        Piece wRook2 = new Piece(7, 7, true, &quot;Rook&quot;, ps) {};\r\n        \r\n        for(int i = 0; i &lt; 8; i++){\r\n            //displays the pawns across the board\r\n            //&quot;i&quot; is equal to the horizontal tile position on board\r\n            Piece wPawn = new Pawn(i, 6, true, &quot;Pawn&quot;, ps) {};\r\n        }//for\r\n\r\n        //Displays the black pieces\r\n        Piece bKing = new Piece(4, 0, false, &quot;King&quot;, ps) {};\r\n        Piece bQueen = new Piece(3, 0, false, &quot;Queen&quot;, ps) {};\r\n        Piece bBishop = new Piece(2, 0, false, &quot;Bishop&quot;, ps) {};\r\n        Piece bBishop2 = new Piece(5, 0, false, &quot;Bishop&quot;, ps) {};\r\n        Piece bKinght = new Piece(1, 0, false, &quot;Knight&quot;, ps) {};\r\n        Piece bKnight2 = new Piece(6, 0, false, &quot;Knight&quot;, ps) {};\r\n        Piece bRook = new Piece(0, 0, false, &quot;Rook&quot;, ps) {};\r\n        Piece bRook2 = new Piece(7, 0, false, &quot;Rook&quot;, ps) {};\r\n        \r\n        for(int i = 0; i &lt; 8; i++){\r\n            //displays the pawns across the board\r\n            //&quot;i&quot; is equal to the horizontal tile position on board\r\n            Piece bPawn = new Piece(i, 1, false, &quot;Pawn&quot;, ps) {};\r\n        }//for\r\n        \r\n        JFrame frame = new JFrame();\r\n        frame.setBounds(10, 10, 1024, 512);\r\n        JPanel panel = new JPanel(new BorderLayout());\r\n        \r\n        JToolBar tools = new JToolBar();\r\n        JButton exit = new JButton(&quot;exit&quot;);\r\n        tools.setFloatable(false);\r\n        frame.add(tools,BorderLayout.AFTER_LINE_ENDS);\r\n        \r\n        tools.add(wMess);//displays the health of the white side\r\n        tools.addSeparator();\r\n        tools.add(bMess);//displays the helath of the black side\r\n        \r\n        tools.addSeparator();\r\n        tools.add(exit);\r\n        //exit.addActionListener(this);\r\n        \r\n        frame.setUndecorated(true);//removes border so board is seen in full\r\n        JPanel pn = new JPanel(){\r\n            \r\n            @Override\r\n            public void paint(Graphics g){\r\n                boolean white = true;\r\n                \r\n                for(int y = 0; y &lt; 8; y++){\r\n                    for(int x = 0; x &lt; 8; x++){\r\n                        if(white){\r\n                            g.setColor(new Color(0, 0, 255));\r\n                        }else{\r\n                            g.setColor(new Color(255, 0, 0));\r\n                        }//end of if\r\n                    g.fillRect(x*64, y*64, 64,64);\r\n                    white =! white;//check value of white, and reverses it\r\n                    }//end of for\r\n                white =! white;\r\n                }//end of for\r\n                for(Piece p: ps){\r\n                    int imagePos = 0;\r\n                    if(p.type.equalsIgnoreCase(&quot;King&quot;)){\r\n                        imagePos = 0;\r\n                    }\r\n                    if(p.type.equalsIgnoreCase(&quot;Queen&quot;)){\r\n                        imagePos = 1;\r\n                    }\r\n                    if(p.type.equalsIgnoreCase(&quot;Bishop&quot;)){\r\n                        imagePos = 2;\r\n                    }\r\n                    if(p.type.equalsIgnoreCase(&quot;Knight&quot;)){\r\n                        imagePos = 3;\r\n                    }\r\n                    if(p.type.equalsIgnoreCase(&quot;Rook&quot;)){\r\n                        imagePos = 4;\r\n                    }\r\n                    if(p.type.equalsIgnoreCase(&quot;Pawn&quot;)){\r\n                        imagePos = 5;\r\n                    }\r\n                    if(!p.isWhite){\r\n                        imagePos += 6;\r\n                    }//if\r\n                    //checks the position of the piece in the image\r\n                    g.drawImage(img[imagePos], p.xPos*64, p.yPos*64, this);\r\n                }//end of for\r\n            }//paint\r\n        };\r\n        \r\n        frame.add(pn);\r\n        frame.addMouseMotionListener(new MouseMotionListener() {\r\n            @Override\r\n            public void mouseDragged(MouseEvent e) {\r\n                //allows the pieces to be dragged to desired square\r\n                if(selPiece != null){\r\n                    selPiece.x = e.getX()-32;\r\n                    selPiece.y = e.getY()-32;\r\n                    frame.repaint();\r\n                }//end of if\r\n            }\r\n\r\n            @Override\r\n            public void mouseMoved(MouseEvent e) {\r\n                \r\n            }\r\n        });\r\n        frame.addMouseListener(new MouseListener() {\r\n            @Override\r\n            public void mouseClicked(MouseEvent e) {\r\n               \r\n            }\r\n\r\n            @Override\r\n            public void mousePressed(MouseEvent e) {\r\n                //selects the piece when mouse is pressed\r\n                selPiece = getPiece(e.getX(), e.getY());\r\n            }\r\n            \r\n            @Override\r\n            public void mouseReleased(MouseEvent e) {\r\n       \r\n                if(selPiece == null){\r\n                    return;\r\n                    //if tile is selected with nothing on it, nothing happens\r\n                }//end of if\r\n                selPiece.move((e.getX()/64), (e.getY()/64));\r\n                frame.repaint();\r\n            }\r\n\r\n            @Override\r\n            public void mouseEntered(MouseEvent e) {\r\n                \r\n            }\r\n\r\n            @Override\r\n            public void mouseExited(MouseEvent e) {\r\n                \r\n            }\r\n        });\r\n        frame.setDefaultCloseOperation(3);\r\n        frame.setVisible(true);\r\n    }//end of main\r\n    \r\n    public static Piece getPiece(int x, int y){\r\n        int xPos = x/64;\r\n        int yPos = y/64;\r\n        for(Piece p: ps){\r\n            if(p.xPos == xPos &amp;&amp; p.yPos == yPos){\r\n                return p;\r\n            }//end of if\r\n        }//end of for\r\n        \r\n        return null;\r\n    }//getPiece  \r\n\r\n}//end of class\r\n```\r\nNow how would I be able to show this &quot;score&quot; in the main class under the &quot;wMess&quot; or &quot;bMess&quot; JLabel which would hold the score and continuously update when a piece is &quot;killed&quot;? The other problem is that it will not be able to determine which colour &quot;killed&quot; which, so it will not know which score to update. How can I fix these things?","title":"Adding a score function to a chess game","body":"<p>I am trying to add a twist to the game of chess, where the game is decided by a taking the most pieces. Each piece is worth 1 point, and the game ends when one player has 10 points.</p>\n<p>When there is a &quot;kill&quot;/the piece is removed, a message needs to update so as to show the score. This code below shows the part where the &quot;kill&quot; code is. I just coded a &quot;System.out.println&quot; in the method to test if an output will show if a piece is &quot;killed&quot;.</p>\n<pre><code>import Menus.GameUI;\nimport java.util.LinkedList;\n\npublic class Piece {\n    public int xPos;\n    public int yPos;\n    public int x;\n    public int y;\n    public boolean isWhite;\n    LinkedList&lt;Piece&gt; ps;\n    public String type;\n\n    public Piece(int xPos, int yPos, boolean isWhite, String type, LinkedList&lt;Piece&gt; ps) {\n        this.xPos = xPos;\n        this.yPos = yPos;\n        x = xPos*64;\n        y = yPos*64;\n        this.isWhite = isWhite;\n        this.ps = ps;\n        this.type = type;\n        ps.add(this);\n    }//constructor\n    \n    public boolean move(int xPos, int yPos){//allows the piece to move\n        if(GameUI.getPiece(xPos*64, yPos*64) != null){\n            if(GameUI.getPiece(xPos*64, yPos*64).isWhite != isWhite){\n                GameUI.getPiece(xPos*64, yPos*64).kill();\n                //check that a piece is not the same colour, so it can be &quot;killed&quot;/removed\n            }else{\n                x = this.xPos*64;\n                y = this.yPos*64;\n                return true;\n                //ensures a piece cannot move to the same square if a piece of the same colour is already on\n            }//end of if\n        }//end of if\n        this.xPos = xPos;\n        this.yPos = yPos;\n        x = xPos*64;\n        y = yPos*64;\n        return false;\n    }//move\n    \n    public int kill(){//removes a piece if a piece of the other colour is on the same square\n        int score = 1;\n        ps.remove(this);\n        System.out.println(score);\n        return score;\n    }//kill\n</code></pre>\n<p>This is the main class which would show the score:</p>\n<pre><code>import Pieces.Pawn;\nimport Pieces.Piece;\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Graphics;\nimport java.awt.Image;\nimport java.awt.event.MouseEvent;\nimport java.awt.event.MouseListener;\nimport java.awt.event.MouseMotionListener;\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport java.io.IOException;\nimport java.util.LinkedList;\nimport javax.imageio.ImageIO;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.JToolBar;\n\n/**\n *\n * @author V\n */\npublic class GameUI {\n\n    public static LinkedList&lt;Piece&gt; ps = new LinkedList&lt;&gt;();\n    public static Piece selPiece = null;\n    private static JLabel wMess = new JLabel(&quot;  ScoreW:  &quot;);\n    private static JLabel bMess = new JLabel(&quot;  ScoreB:  &quot;);\n    //public static final int MAX_HEALTH = 10;\n    \n    public static void main(String[] args) throws IOException{\n        \n        //extracts the images \n        BufferedImage all = ImageIO.read(new File(&quot;chess.png&quot;));\n            Image img[] = new Image[12];\n            int ind = 0;\n            for(int y = 0; y &lt; 400; y += 200){\n                for(int x = 0; x &lt; 1200; x += 200){\n                    img[ind] = all.getSubimage(x, y, 200, 200).getScaledInstance(64, 64, BufferedImage.SCALE_SMOOTH);\n                    ind++;\n                }//end of for\n            }//end of for\n        \n        //Displays the white pieces on the board\n        Piece wKing = new Piece(4, 7, true, &quot;King&quot;, ps) {};\n        Piece wQueen = new Piece(3, 7, true, &quot;Queen&quot;, ps) {};\n        Piece wBishop = new Piece(2, 7, true, &quot;Bishop&quot;, ps) {};\n        Piece wBishop2 = new Piece(5, 7, true, &quot;Bishop&quot;, ps) {};\n        Piece wKinght = new Piece(1, 7, true, &quot;Knight&quot;, ps) {};\n        Piece wKnight2 = new Piece(6, 7, true, &quot;Knight&quot;, ps) {};\n        Piece wRook = new Piece(0, 7, true, &quot;Rook&quot;, ps) {};\n        Piece wRook2 = new Piece(7, 7, true, &quot;Rook&quot;, ps) {};\n        \n        for(int i = 0; i &lt; 8; i++){\n            //displays the pawns across the board\n            //&quot;i&quot; is equal to the horizontal tile position on board\n            Piece wPawn = new Pawn(i, 6, true, &quot;Pawn&quot;, ps) {};\n        }//for\n\n        //Displays the black pieces\n        Piece bKing = new Piece(4, 0, false, &quot;King&quot;, ps) {};\n        Piece bQueen = new Piece(3, 0, false, &quot;Queen&quot;, ps) {};\n        Piece bBishop = new Piece(2, 0, false, &quot;Bishop&quot;, ps) {};\n        Piece bBishop2 = new Piece(5, 0, false, &quot;Bishop&quot;, ps) {};\n        Piece bKinght = new Piece(1, 0, false, &quot;Knight&quot;, ps) {};\n        Piece bKnight2 = new Piece(6, 0, false, &quot;Knight&quot;, ps) {};\n        Piece bRook = new Piece(0, 0, false, &quot;Rook&quot;, ps) {};\n        Piece bRook2 = new Piece(7, 0, false, &quot;Rook&quot;, ps) {};\n        \n        for(int i = 0; i &lt; 8; i++){\n            //displays the pawns across the board\n            //&quot;i&quot; is equal to the horizontal tile position on board\n            Piece bPawn = new Piece(i, 1, false, &quot;Pawn&quot;, ps) {};\n        }//for\n        \n        JFrame frame = new JFrame();\n        frame.setBounds(10, 10, 1024, 512);\n        JPanel panel = new JPanel(new BorderLayout());\n        \n        JToolBar tools = new JToolBar();\n        JButton exit = new JButton(&quot;exit&quot;);\n        tools.setFloatable(false);\n        frame.add(tools,BorderLayout.AFTER_LINE_ENDS);\n        \n        tools.add(wMess);//displays the health of the white side\n        tools.addSeparator();\n        tools.add(bMess);//displays the helath of the black side\n        \n        tools.addSeparator();\n        tools.add(exit);\n        //exit.addActionListener(this);\n        \n        frame.setUndecorated(true);//removes border so board is seen in full\n        JPanel pn = new JPanel(){\n            \n            @Override\n            public void paint(Graphics g){\n                boolean white = true;\n                \n                for(int y = 0; y &lt; 8; y++){\n                    for(int x = 0; x &lt; 8; x++){\n                        if(white){\n                            g.setColor(new Color(0, 0, 255));\n                        }else{\n                            g.setColor(new Color(255, 0, 0));\n                        }//end of if\n                    g.fillRect(x*64, y*64, 64,64);\n                    white =! white;//check value of white, and reverses it\n                    }//end of for\n                white =! white;\n                }//end of for\n                for(Piece p: ps){\n                    int imagePos = 0;\n                    if(p.type.equalsIgnoreCase(&quot;King&quot;)){\n                        imagePos = 0;\n                    }\n                    if(p.type.equalsIgnoreCase(&quot;Queen&quot;)){\n                        imagePos = 1;\n                    }\n                    if(p.type.equalsIgnoreCase(&quot;Bishop&quot;)){\n                        imagePos = 2;\n                    }\n                    if(p.type.equalsIgnoreCase(&quot;Knight&quot;)){\n                        imagePos = 3;\n                    }\n                    if(p.type.equalsIgnoreCase(&quot;Rook&quot;)){\n                        imagePos = 4;\n                    }\n                    if(p.type.equalsIgnoreCase(&quot;Pawn&quot;)){\n                        imagePos = 5;\n                    }\n                    if(!p.isWhite){\n                        imagePos += 6;\n                    }//if\n                    //checks the position of the piece in the image\n                    g.drawImage(img[imagePos], p.xPos*64, p.yPos*64, this);\n                }//end of for\n            }//paint\n        };\n        \n        frame.add(pn);\n        frame.addMouseMotionListener(new MouseMotionListener() {\n            @Override\n            public void mouseDragged(MouseEvent e) {\n                //allows the pieces to be dragged to desired square\n                if(selPiece != null){\n                    selPiece.x = e.getX()-32;\n                    selPiece.y = e.getY()-32;\n                    frame.repaint();\n                }//end of if\n            }\n\n            @Override\n            public void mouseMoved(MouseEvent e) {\n                \n            }\n        });\n        frame.addMouseListener(new MouseListener() {\n            @Override\n            public void mouseClicked(MouseEvent e) {\n               \n            }\n\n            @Override\n            public void mousePressed(MouseEvent e) {\n                //selects the piece when mouse is pressed\n                selPiece = getPiece(e.getX(), e.getY());\n            }\n            \n            @Override\n            public void mouseReleased(MouseEvent e) {\n       \n                if(selPiece == null){\n                    return;\n                    //if tile is selected with nothing on it, nothing happens\n                }//end of if\n                selPiece.move((e.getX()/64), (e.getY()/64));\n                frame.repaint();\n            }\n\n            @Override\n            public void mouseEntered(MouseEvent e) {\n                \n            }\n\n            @Override\n            public void mouseExited(MouseEvent e) {\n                \n            }\n        });\n        frame.setDefaultCloseOperation(3);\n        frame.setVisible(true);\n    }//end of main\n    \n    public static Piece getPiece(int x, int y){\n        int xPos = x/64;\n        int yPos = y/64;\n        for(Piece p: ps){\n            if(p.xPos == xPos &amp;&amp; p.yPos == yPos){\n                return p;\n            }//end of if\n        }//end of for\n        \n        return null;\n    }//getPiece  \n\n}//end of class\n</code></pre>\n<p>Now how would I be able to show this &quot;score&quot; in the main class under the &quot;wMess&quot; or &quot;bMess&quot; JLabel which would hold the score and continuously update when a piece is &quot;killed&quot;? The other problem is that it will not be able to determine which colour &quot;killed&quot; which, so it will not know which score to update. How can I fix these things?</p>\n"},{"tags":["java","recursion","fibonacci","tail-recursion","factorial"],"answers":[{"tags":[],"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1657375133,"creation_date":1657375133,"answer_id":72921965,"question_id":72921475,"body_markdown":"I believe the reasoning is following:\r\n\r\n1. recursive algorithm:\r\n\r\n```java\r\n    public static Long doCalcRecursive(long n) {\r\n        return n == 0 ? 0 : (n == 1 ? 1 : (n == 2 ? 1 : (doCalcRecursive(n - 3) + doCalcRecursive(n - 2))));\r\n    }\r\n```\r\n\r\n2. after turning it into iterative we get:\r\n\r\n```java\r\n    public static Long doCalcIterative(long n) {\r\n        long a = 0, b = 1, c = 1, d;\r\n        if (n == 0) {\r\n            return a;\r\n        }\r\n        for (int i = 2; i &lt;= n; i++) {\r\n            d = a + b;\r\n            a = b;\r\n            b = c;\r\n            c = d;\r\n        }\r\n        return b;\r\n    }\r\n```\r\n\r\nso, `(a,b,c)` turns into `(b,c,a+b)` and tail recursion is:\r\n\r\n```java\r\n    public static long doCalcTail(long n, long a, long b, long c) {\r\n        return n == 0 ? a : n == 1 ? b : n == 2 ? c : doCalcTail(n - 1, b, c, a + b);\r\n    }\r\n```","title":"tail recursive version for Fibonacci-like function","body":"<p>I believe the reasoning is following:</p>\n<ol>\n<li>recursive algorithm:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>    public static Long doCalcRecursive(long n) {\n        return n == 0 ? 0 : (n == 1 ? 1 : (n == 2 ? 1 : (doCalcRecursive(n - 3) + doCalcRecursive(n - 2))));\n    }\n</code></pre>\n<ol start=\"2\">\n<li>after turning it into iterative we get:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>    public static Long doCalcIterative(long n) {\n        long a = 0, b = 1, c = 1, d;\n        if (n == 0) {\n            return a;\n        }\n        for (int i = 2; i &lt;= n; i++) {\n            d = a + b;\n            a = b;\n            b = c;\n            c = d;\n        }\n        return b;\n    }\n</code></pre>\n<p>so, <code>(a,b,c)</code> turns into <code>(b,c,a+b)</code> and tail recursion is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static long doCalcTail(long n, long a, long b, long c) {\n        return n == 0 ? a : n == 1 ? b : n == 2 ? c : doCalcTail(n - 1, b, c, a + b);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24593665,"reputation":262,"user_id":18497177,"display_name":"Trizion"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1657377962,"creation_date":1657377962,"answer_id":72922313,"question_id":72921475,"body_markdown":"Sadly, I do not have enough reputation to comment, but to answer your question:\r\n\r\nFirst of all, [this link][1] really helps to understand how to achieve the solution.\r\n\r\nIt&#39;s pretty much: Since you start with (a,b,c) = (0,1,1) and you want to derive the next number by adding the second and third last, your next number (hypothetically d) would be a+b\r\n\r\nso (a,b,c,d) = (a,b,c,a+b)\r\n\r\nWhich means when you look at the next iteration, you &quot;shift&quot; everything left and your next call will be (b,c,a+b) as stated by Andrey\r\n\r\n\r\n  [1]: https://www.geeksforgeeks.org/tail-recursion-fibonacci/","title":"tail recursive version for Fibonacci-like function","body":"<p>Sadly, I do not have enough reputation to comment, but to answer your question:</p>\n<p>First of all, <a href=\"https://www.geeksforgeeks.org/tail-recursion-fibonacci/\" rel=\"noreferrer\">this link</a> really helps to understand how to achieve the solution.</p>\n<p>It's pretty much: Since you start with (a,b,c) = (0,1,1) and you want to derive the next number by adding the second and third last, your next number (hypothetically d) would be a+b</p>\n<p>so (a,b,c,d) = (a,b,c,a+b)</p>\n<p>Which means when you look at the next iteration, you &quot;shift&quot; everything left and your next call will be (b,c,a+b) as stated by Andrey</p>\n"}],"owner":{"account_id":5588000,"reputation":201,"user_id":4428059,"display_name":"cealex"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":198,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"accepted_answer_id":72922313,"answer_count":2,"score":1,"last_activity_date":1657952202,"creation_date":1657370772,"question_id":72921475,"body_markdown":"I am having trouble understanding the concept of tail recursion, \r\nI want to make a tail recursive version for Fibonacci-like function, p1= n-3  , p2= n-2, fx( p1 ) + fx( p2 )\r\nand so far this is what I came up with but I don&#39;t know if it&#39;s a correct approach, can someone help me out, any help would be appreciated\r\n     p1= n-3 , p2= n-2\r\n\tLong doCalc( long n )\r\n    {\r\n        return n == 0 ? 0 : ( n == 1 ? 1 : ( n == 2 ? 1 : (make( p1 ) + make( p2 )) ) );\r\n    }\r\n\r\n\t\r\nthe code outputs the correct result\t\r\n\r\nbut when i implement the tail recursive , my approach was split and conquer, but it&#39;s not working and the output are wrong\r\n\r\n\tLong factor3(Long n, Long a)\r\n    {\r\n        if( n == 0){\r\n            return 0l;\r\n        } else if( n == 1 || n == 2) {\r\n            return a;\r\n        }\r\n\r\n        return factor3(p1, n + a);\r\n    }\r\n\r\n    Long factor2(Long n, Long a)\r\n    {\r\n        if( n == 0){\r\n            return 0l;\r\n        } else if( n == 1 || n == 2) {\r\n            return a;\r\n        }\r\n\r\n        return factor2(p2, n + a);\r\n    }\r\n\t\r\n\r\n\t","title":"tail recursive version for Fibonacci-like function","body":"<p>I am having trouble understanding the concept of tail recursion,\nI want to make a tail recursive version for Fibonacci-like function, p1= n-3  , p2= n-2, fx( p1 ) + fx( p2 )\nand so far this is what I came up with but I don't know if it's a correct approach, can someone help me out, any help would be appreciated\np1= n-3 , p2= n-2\nLong doCalc( long n )\n{\nreturn n == 0 ? 0 : ( n == 1 ? 1 : ( n == 2 ? 1 : (make( p1 ) + make( p2 )) ) );\n}</p>\n<p>the code outputs the correct result</p>\n<p>but when i implement the tail recursive , my approach was split and conquer, but it's not working and the output are wrong</p>\n<pre><code>Long factor3(Long n, Long a)\n{\n    if( n == 0){\n        return 0l;\n    } else if( n == 1 || n == 2) {\n        return a;\n    }\n\n    return factor3(p1, n + a);\n}\n\nLong factor2(Long n, Long a)\n{\n    if( n == 0){\n        return 0l;\n    } else if( n == 1 || n == 2) {\n        return a;\n    }\n\n    return factor2(p2, n + a);\n}\n</code></pre>\n"},{"tags":["java","android","android-studio","sdk","samsung-knox"],"answers":[{"tags":[],"owner":{"account_id":1826668,"reputation":1,"user_id":1659204,"display_name":"arjun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657951996,"creation_date":1657951996,"answer_id":73001939,"question_id":72811578,"body_markdown":"As a first step just make sure that your device admin is working fine without any Knox API.\r\nRefer standard Android method for developing Device Admin \r\nhttps://developer.android.com/guide/topics/admin/device-admin#developing\r\n\r\nOnce the admin app works fine, add flow for Knox License activation and then you must be able to use Knox API&#39;s. Make sure to add knoxsdk.jar file in the build path so that there are no build errors. Ref :\r\nhttps://docs.samsungknox.com/dev/knox-sdk/sample-apps/get-started-knox-sdk-isv.htm","title":"How to Integrate Samsung Knox SDK with your Enterprise Android Application","body":"<p>As a first step just make sure that your device admin is working fine without any Knox API.\nRefer standard Android method for developing Device Admin\n<a href=\"https://developer.android.com/guide/topics/admin/device-admin#developing\" rel=\"nofollow noreferrer\">https://developer.android.com/guide/topics/admin/device-admin#developing</a></p>\n<p>Once the admin app works fine, add flow for Knox License activation and then you must be able to use Knox API's. Make sure to add knoxsdk.jar file in the build path so that there are no build errors. Ref :\n<a href=\"https://docs.samsungknox.com/dev/knox-sdk/sample-apps/get-started-knox-sdk-isv.htm\" rel=\"nofollow noreferrer\">https://docs.samsungknox.com/dev/knox-sdk/sample-apps/get-started-knox-sdk-isv.htm</a></p>\n"}],"owner":{"account_id":25340121,"reputation":41,"user_id":19158608,"display_name":"Mudassir Khan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":680,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1657951996,"creation_date":1656572754,"question_id":72811578,"body_markdown":"I am not able to figure out how to integrate Samsung Knox SDK with the android application to take control of Android devices through it. Knox Documentation is being too complex for me unable to figure out how to do it, can anyone please guide me through the same.\r\n\r\nalso, each and every sample application provided by Samsung Knox is throwing errors of static methods Not Found and app crashes.\r\n\r\nbeing such a small community of Samsung Knox, unable to find solutions or tutorials\r\n\r\n\r\n\r\n\r\nError From Every Sample Applications provided on Samsung Knox Site:-\r\n\r\n2022-06-30 12:24:30.920 10676-10676/com.samsung.knox.example.gettingstarted E/AndroidRuntime: FATAL EXCEPTION: main Process: com.samsung.knox.example.gettingstarted, PID: 10676 java.lang.NoSuchMethodError: No static method getAPILevel()I in class Lcom/samsung/android/knox/EnterpriseDeviceManager; or its super classes (declaration of &#39;com.samsung.android.knox.EnterpriseDeviceManager&#39; appears in /system/framework/knoxsdk.jar) at com.samsung.knox.example.gettingstarted.MainActivity.onCreate(MainActivity.java:111) at android.app.Activity.performCreate(Activity.java:7009) at android.app.Activity.performCreate(Activity.java:7000) at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1214) at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2742) at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2872) at android.app.ActivityThread.-wrap11(Unknown Source:0) at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1595) at android.os.Handler.dispatchMessage(Handler.java:106) at android.os.Looper.loop(Looper.java:164) at android.app.ActivityThread.main(ActivityThread.java:6543) at java.lang.reflect.Method.invoke(Native Method) at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:440) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:810)","title":"How to Integrate Samsung Knox SDK with your Enterprise Android Application","body":"<p>I am not able to figure out how to integrate Samsung Knox SDK with the android application to take control of Android devices through it. Knox Documentation is being too complex for me unable to figure out how to do it, can anyone please guide me through the same.</p>\n<p>also, each and every sample application provided by Samsung Knox is throwing errors of static methods Not Found and app crashes.</p>\n<p>being such a small community of Samsung Knox, unable to find solutions or tutorials</p>\n<p>Error From Every Sample Applications provided on Samsung Knox Site:-</p>\n<p>2022-06-30 12:24:30.920 10676-10676/com.samsung.knox.example.gettingstarted E/AndroidRuntime: FATAL EXCEPTION: main Process: com.samsung.knox.example.gettingstarted, PID: 10676 java.lang.NoSuchMethodError: No static method getAPILevel()I in class Lcom/samsung/android/knox/EnterpriseDeviceManager; or its super classes (declaration of 'com.samsung.android.knox.EnterpriseDeviceManager' appears in /system/framework/knoxsdk.jar) at com.samsung.knox.example.gettingstarted.MainActivity.onCreate(MainActivity.java:111) at android.app.Activity.performCreate(Activity.java:7009) at android.app.Activity.performCreate(Activity.java:7000) at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1214) at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2742) at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2872) at android.app.ActivityThread.-wrap11(Unknown Source:0) at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1595) at android.os.Handler.dispatchMessage(Handler.java:106) at android.os.Looper.loop(Looper.java:164) at android.app.ActivityThread.main(ActivityThread.java:6543) at java.lang.reflect.Method.invoke(Native Method) at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:440) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:810)</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":25781655,"reputation":109,"user_id":19527184,"display_name":"gaurav jha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1657951465,"creation_date":1657951465,"answer_id":73001909,"question_id":72999807,"body_markdown":"I would recommend you to use triggers. With the help of triggers, you can not only execute tasks on startup but also at a periodic interval. you can read more about that and what suits your particular need.\r\n\r\nhttps://docs.spring.io/spring-framework/docs/4.0.x/spring-framework-reference/html/scheduling.html","title":"How to update database entries in Spring Boot based on time?","body":"<p>I would recommend you to use triggers. With the help of triggers, you can not only execute tasks on startup but also at a periodic interval. you can read more about that and what suits your particular need.</p>\n<p><a href=\"https://docs.spring.io/spring-framework/docs/4.0.x/spring-framework-reference/html/scheduling.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/4.0.x/spring-framework-reference/html/scheduling.html</a></p>\n"}],"owner":{"account_id":16977173,"reputation":286,"user_id":12280162,"display_name":"WebStormer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":290,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1657951465,"creation_date":1657920918,"question_id":72999807,"body_markdown":"I am trying to implement a subscription-model application that upon startup checks whether the record is expired or not (based on the current date) and eventually updates the &quot;enabled&quot; `boolean` value.\r\n\r\nThe Model:\r\n\r\n    @Entity\r\n    @Table(name=&quot;users&quot;)\r\n    public class User {\r\n        @Id\r\n        @Column(name = &quot;user_id&quot;)\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n    \r\n        @NotNull\r\n        @Column(unique = true)\r\n        private String name;\r\n    \r\n        @NotNull\r\n        @DateTimeFormat(pattern = &quot;dd/MM/yyyy&quot;)\r\n        private LocalDate expiry_date;\r\n    \r\n        @NotNull\r\n        private boolean enabled;\r\n    \r\n        //Constructor, getter, setters\r\n    }\r\n\r\nInside the UserService class I implemented the following method:\r\n\r\n    //Disable records if past expiration Date\r\n    public void updateRecordsBasedOnTime(){\r\n        List&lt;User&gt; orgs = (List&lt;User&gt;) userRepository.findAll();\r\n        LocalDate today = LocalDate.now();\r\n    \r\n        for (User usr: users) {\r\n            if(today.isAfter(org.getExpiry_date())){\r\n                org.setEnabled(false);\r\n            }\r\n        }\r\n    }\r\n\r\nNow, the question is, where would be appropriate calling this method? At first I though inside the `@Controller` class, since an instance of the userRepository is already used, but the following method doesn&#39;t work:\r\n\r\n    @PostLoad\r\n    private void updateStatus() {\r\n        userService.updateRecordsBasedOnTime();\r\n    }\r\n\r\nAlternatively I though about implementing a cron method that would run though the records once every 12h:\r\n\r\n    @Scheduled(cron = &quot;0 */12 * * *&quot;)\r\n        public static void updateDatabase() {\r\n    }\r\n\r\nbut even if I manage to successfully implement this method, I won&#39;t have the data updated at startup. Could anyone shed some light on this and maybe provide me with a better approach?","title":"How to update database entries in Spring Boot based on time?","body":"<p>I am trying to implement a subscription-model application that upon startup checks whether the record is expired or not (based on the current date) and eventually updates the &quot;enabled&quot; <code>boolean</code> value.</p>\n<p>The Model:</p>\n<pre><code>@Entity\n@Table(name=&quot;users&quot;)\npublic class User {\n    @Id\n    @Column(name = &quot;user_id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @NotNull\n    @Column(unique = true)\n    private String name;\n\n    @NotNull\n    @DateTimeFormat(pattern = &quot;dd/MM/yyyy&quot;)\n    private LocalDate expiry_date;\n\n    @NotNull\n    private boolean enabled;\n\n    //Constructor, getter, setters\n}\n</code></pre>\n<p>Inside the UserService class I implemented the following method:</p>\n<pre><code>//Disable records if past expiration Date\npublic void updateRecordsBasedOnTime(){\n    List&lt;User&gt; orgs = (List&lt;User&gt;) userRepository.findAll();\n    LocalDate today = LocalDate.now();\n\n    for (User usr: users) {\n        if(today.isAfter(org.getExpiry_date())){\n            org.setEnabled(false);\n        }\n    }\n}\n</code></pre>\n<p>Now, the question is, where would be appropriate calling this method? At first I though inside the <code>@Controller</code> class, since an instance of the userRepository is already used, but the following method doesn't work:</p>\n<pre><code>@PostLoad\nprivate void updateStatus() {\n    userService.updateRecordsBasedOnTime();\n}\n</code></pre>\n<p>Alternatively I though about implementing a cron method that would run though the records once every 12h:</p>\n<pre><code>@Scheduled(cron = &quot;0 */12 * * *&quot;)\n    public static void updateDatabase() {\n}\n</code></pre>\n<p>but even if I manage to successfully implement this method, I won't have the data updated at startup. Could anyone shed some light on this and maybe provide me with a better approach?</p>\n"},{"tags":["java","intellij-idea","gradlew","allure"],"answers":[{"tags":[],"owner":{"account_id":21805771,"reputation":16,"user_id":16103990,"display_name":"Ammu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1657949972,"creation_date":1657815599,"answer_id":72983712,"question_id":71050906,"body_markdown":"Please try `./gradlew build` and `./gradlew test` before executing the `./gradlew allureServe`. The test cases might have not been executed. The report is generated from the `build/allure-results` folder.","title":"Why does `./gradlew allureServe` command gives empty report on Allure Gradle?","body":"<p>Please try <code>./gradlew build</code> and <code>./gradlew test</code> before executing the <code>./gradlew allureServe</code>. The test cases might have not been executed. The report is generated from the <code>build/allure-results</code> folder.</p>\n"}],"owner":{"account_id":16607025,"reputation":19,"user_id":12001195,"display_name":"Erli"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":165,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72983712,"answer_count":1,"score":0,"last_activity_date":1657949972,"creation_date":1644415072,"question_id":71050906,"body_markdown":"I have tried to integrate Gradle with Allure and I run the command &quot;./gradlew allureServe&quot; after I have done all previous configurations. I even run the tests on which I am supposed to get a report on and I get always empty report. \r\nCan someone explain exactly what does &quot;./gradlew allureServe&quot; command do?\r\nWhere does it get the information which is shows in the browser as a report?\r\nAttached you can see how my report looks like each time I run the command.\r\n\r\n\r\n\r\n[REPORT ALLURE][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zFcfp.png","title":"Why does `./gradlew allureServe` command gives empty report on Allure Gradle?","body":"<p>I have tried to integrate Gradle with Allure and I run the command &quot;./gradlew allureServe&quot; after I have done all previous configurations. I even run the tests on which I am supposed to get a report on and I get always empty report.\nCan someone explain exactly what does &quot;./gradlew allureServe&quot; command do?\nWhere does it get the information which is shows in the browser as a report?\nAttached you can see how my report looks like each time I run the command.</p>\n<p><a href=\"https://i.stack.imgur.com/zFcfp.png\" rel=\"nofollow noreferrer\">REPORT ALLURE</a></p>\n"},{"tags":["java","string","object","bigdecimal","string.format"],"comments":[{"owner":{"account_id":1573267,"reputation":7512,"user_id":1460461,"accept_rate":38,"display_name":"Benvorth"},"score":0,"creation_date":1654857563,"post_id":72572751,"comment_id":128197779,"body_markdown":"Welcome to stackoverflow!","body":"Welcome to stackoverflow!"},{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":0,"creation_date":1654857635,"post_id":72572751,"comment_id":128197804,"body_markdown":"You can use `%s` instead of `%d` .","body":"You can use <code>%s</code> instead of <code>%d</code> ."},{"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"score":0,"creation_date":1657951371,"post_id":72572751,"comment_id":128936291,"body_markdown":"You are just printing the value not doing any manipulation (any mathematical operation) on `stockNumber.getQuantity()`, so you can go ahead with @Eritrean&#39;s comment.","body":"You are just printing the value not doing any manipulation (any mathematical operation) on <code>stockNumber.getQuantity()</code>, so you can go ahead with @Eritrean&#39;s comment."}],"answers":[{"tags":[],"owner":{"account_id":1573267,"reputation":7512,"user_id":1460461,"accept_rate":38,"display_name":"Benvorth"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1654857437,"creation_date":1654857437,"answer_id":72572913,"question_id":72572751,"body_markdown":"You could try to convert the `BigDeciaml` to a `double`:\r\n\r\n```\r\nstockNumber.getQuantity().doubleValue()\r\n```\r\n\r\nBe careful with that, there might be a reason to use `BigDeciamal` in you class and converting it to a different type might lead to loss of precision.  ","title":"ArgumentType: &#39;Big Decimal&#39; does not match the type of the format specified &#39;%d&#39;","body":"<p>You could try to convert the <code>BigDeciaml</code> to a <code>double</code>:</p>\n<pre><code>stockNumber.getQuantity().doubleValue()\n</code></pre>\n<p>Be careful with that, there might be a reason to use <code>BigDeciamal</code> in you class and converting it to a different type might lead to loss of precision.</p>\n"}],"owner":{"account_id":25501907,"reputation":19,"user_id":19294975,"display_name":"ShiBui"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":440,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":72572913,"answer_count":1,"score":0,"last_activity_date":1657949869,"creation_date":1654856742,"question_id":72572751,"body_markdown":"```\r\nString stockStr = &quot; &quot;;\r\n\r\nfor (StockRecordDTO stockNumber : stockID)\r\n{\r\n    stockStr+= \r\n\r\n    String.format(&quot;the stock %s for Date %s with Quantity %d &quot;, \r\n            stockNumber.getStock(),\r\n            stockNumber.getBusinessDate(), \r\n            stockNumber.getQuantity()\r\n        );\r\n}\r\n```\r\n\r\nI am trying to print out an ArrayList of values by extracting it to a string and then printing it this way. I am getting the Values from a DTO class, and I&#39;m getting an error with the `string.format` method I have used saying \r\n\r\n&gt; ArgumentType: &#39;Big Decimal&#39; does not match the type of the format specified &#39;%d&#39;\r\n\r\nQuantity is defined as a BIG Decimal in DTO class.\r\n\r\nSo how do I solve this?\r\n\r\nThanks for helping in advance ","title":"ArgumentType: &#39;Big Decimal&#39; does not match the type of the format specified &#39;%d&#39;","body":"<pre><code>String stockStr = &quot; &quot;;\n\nfor (StockRecordDTO stockNumber : stockID)\n{\n    stockStr+= \n\n    String.format(&quot;the stock %s for Date %s with Quantity %d &quot;, \n            stockNumber.getStock(),\n            stockNumber.getBusinessDate(), \n            stockNumber.getQuantity()\n        );\n}\n</code></pre>\n<p>I am trying to print out an ArrayList of values by extracting it to a string and then printing it this way. I am getting the Values from a DTO class, and I'm getting an error with the <code>string.format</code> method I have used saying</p>\n<blockquote>\n<p>ArgumentType: 'Big Decimal' does not match the type of the format specified '%d'</p>\n</blockquote>\n<p>Quantity is defined as a BIG Decimal in DTO class.</p>\n<p>So how do I solve this?</p>\n<p>Thanks for helping in advance</p>\n"},{"tags":["java","postgresql","spring-boot","mybatis"],"comments":[{"owner":{"account_id":1314580,"reputation":3289,"user_id":1261766,"display_name":"ave"},"score":1,"creation_date":1657945817,"post_id":73001246,"comment_id":128935727,"body_markdown":"There are three options (at least). 1) use `jsonb` function : `tags = jsonb(#{tags})` 2) use cast `tags = #{tags}::JSONB` 3) use a type handler. For implementing 3), this [answer](https://stackoverflow.com/a/35845278/1261766) may help.","body":"There are three options (at least). 1) use <code>jsonb</code> function : <code>tags = jsonb(#{tags})</code> 2) use cast <code>tags = #{tags}::JSONB</code> 3) use a type handler. For implementing 3), this <a href=\"https://stackoverflow.com/a/35845278/1261766\">answer</a> may help."}],"answers":[{"tags":[],"owner":{"account_id":3106126,"reputation":31241,"user_id":2628868,"accept_rate":84,"display_name":"Dolphin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657949611,"creation_date":1657949611,"answer_id":73001776,"question_id":73001246,"body_markdown":"Finally add the `JsonTypeHandler` fixed this problem:\r\n\r\n\r\n\r\n\r\n    package misc.config.mybatis;\r\n    \r\n    import com.alibaba.fastjson.JSON;\r\n    import org.apache.ibatis.type.BaseTypeHandler;\r\n    import org.apache.ibatis.type.JdbcType;\r\n    import org.apache.ibatis.type.MappedTypes;\r\n    import org.postgresql.util.PGobject;\r\n    \r\n    import java.sql.CallableStatement;\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.ResultSet;\r\n    import java.sql.SQLException;\r\n    \r\n    @MappedTypes({Object.class})\r\n    public class JsonTypeHandler extends BaseTypeHandler&lt;Object&gt; {\r\n    \r\n        private Class&lt;Object&gt; clazz;\r\n    \r\n        public JsonTypeHandler(Class&lt;Object&gt; clazz) {\r\n            this.clazz = clazz;\r\n        }\r\n    \r\n        public JsonTypeHandler() {\r\n        }\r\n    \r\n        private static final PGobject jsonObject = new PGobject();\r\n    \r\n        @Override\r\n        public void setNonNullParameter(PreparedStatement ps, int i, Object parameter, JdbcType jdbcType) throws SQLException {\r\n            jsonObject.setType(&quot;json&quot;);\r\n            jsonObject.setValue(JSON.toJSONString(parameter));\r\n            ps.setObject(i, jsonObject);\r\n        }\r\n    \r\n        @Override\r\n        public Object getNullableResult(ResultSet rs, String columnName) throws SQLException {\r\n            return JSON.parseObject(rs.getString(columnName), clazz);\r\n        }\r\n    \r\n        @Override\r\n        public Object getNullableResult(ResultSet rs, int columnIndex) throws SQLException {\r\n            return JSON.parseObject(rs.getString(columnIndex), clazz);\r\n        }\r\n    \r\n        @Override\r\n        public Object getNullableResult(CallableStatement cs, int columnIndex) throws SQLException {\r\n            return JSON.parseObject(cs.getString(columnIndex), clazz);\r\n        }\r\n    }\r\n\r\n\r\n\r\nin the mybatis mapper xml, specify the custom JsonTypeHandler like this:\r\n\r\n\r\n\r\n\r\n    &lt;result column=&quot;tags&quot; jdbcType=&quot;OTHER&quot; property=&quot;tags&quot; typeHandler=&quot;misc.config.mybatis.JsonTypeHandler&quot; /&gt;\r\n\r\n\r\nif using mybatis code auto generator, add code generator config like this:\r\n\r\n\r\n\r\n        &lt;table tableName=&quot;rss_sub_source&quot;\r\n               enableCountByExample=&quot;true&quot;\r\n               enableUpdateByExample=&quot;true&quot;\r\n               enableDeleteByExample=&quot;true&quot;\r\n               enableSelectByExample=&quot;true&quot;\r\n               selectByExampleQueryId=&quot;true&quot;&gt;\r\n            &lt;generatedKey column=&quot;ID&quot; sqlStatement=&quot;JDBC&quot; identity=&quot;true&quot; /&gt;\r\n            &lt;columnOverride column=&quot;tags&quot; jdbcType=&quot;OTHER&quot; typeHandler=&quot;misc.config.mybatis.JsonTypeHandler&quot;/&gt;\r\n        &lt;/table&gt;\r\n\r\n\r\n\r\n","title":"org.postgresql.util.PSQLException: ERROR: column &quot;tags&quot; is of type jsonb but expression is of type character varying","body":"<p>Finally add the <code>JsonTypeHandler</code> fixed this problem:</p>\n<pre><code>package misc.config.mybatis;\n\nimport com.alibaba.fastjson.JSON;\nimport org.apache.ibatis.type.BaseTypeHandler;\nimport org.apache.ibatis.type.JdbcType;\nimport org.apache.ibatis.type.MappedTypes;\nimport org.postgresql.util.PGobject;\n\nimport java.sql.CallableStatement;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\n\n@MappedTypes({Object.class})\npublic class JsonTypeHandler extends BaseTypeHandler&lt;Object&gt; {\n\n    private Class&lt;Object&gt; clazz;\n\n    public JsonTypeHandler(Class&lt;Object&gt; clazz) {\n        this.clazz = clazz;\n    }\n\n    public JsonTypeHandler() {\n    }\n\n    private static final PGobject jsonObject = new PGobject();\n\n    @Override\n    public void setNonNullParameter(PreparedStatement ps, int i, Object parameter, JdbcType jdbcType) throws SQLException {\n        jsonObject.setType(&quot;json&quot;);\n        jsonObject.setValue(JSON.toJSONString(parameter));\n        ps.setObject(i, jsonObject);\n    }\n\n    @Override\n    public Object getNullableResult(ResultSet rs, String columnName) throws SQLException {\n        return JSON.parseObject(rs.getString(columnName), clazz);\n    }\n\n    @Override\n    public Object getNullableResult(ResultSet rs, int columnIndex) throws SQLException {\n        return JSON.parseObject(rs.getString(columnIndex), clazz);\n    }\n\n    @Override\n    public Object getNullableResult(CallableStatement cs, int columnIndex) throws SQLException {\n        return JSON.parseObject(cs.getString(columnIndex), clazz);\n    }\n}\n</code></pre>\n<p>in the mybatis mapper xml, specify the custom JsonTypeHandler like this:</p>\n<pre><code>&lt;result column=&quot;tags&quot; jdbcType=&quot;OTHER&quot; property=&quot;tags&quot; typeHandler=&quot;misc.config.mybatis.JsonTypeHandler&quot; /&gt;\n</code></pre>\n<p>if using mybatis code auto generator, add code generator config like this:</p>\n<pre><code>    &lt;table tableName=&quot;rss_sub_source&quot;\n           enableCountByExample=&quot;true&quot;\n           enableUpdateByExample=&quot;true&quot;\n           enableDeleteByExample=&quot;true&quot;\n           enableSelectByExample=&quot;true&quot;\n           selectByExampleQueryId=&quot;true&quot;&gt;\n        &lt;generatedKey column=&quot;ID&quot; sqlStatement=&quot;JDBC&quot; identity=&quot;true&quot; /&gt;\n        &lt;columnOverride column=&quot;tags&quot; jdbcType=&quot;OTHER&quot; typeHandler=&quot;misc.config.mybatis.JsonTypeHandler&quot;/&gt;\n    &lt;/table&gt;\n</code></pre>\n"}],"owner":{"account_id":3106126,"reputation":31241,"user_id":2628868,"accept_rate":84,"display_name":"Dolphin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3095,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1657949611,"creation_date":1657940778,"question_id":73001246,"body_markdown":"After I changed the PostgreSQL 13 database columns `tags` to jsonb, throw error when execute sql:\r\n\r\n\r\n\r\n\r\n    Caused by: org.springframework.jdbc.BadSqlGrammarException: \r\n    ### Error updating database.  Cause: org.postgresql.util.PSQLException: ERROR: column &quot;tags&quot; is of type jsonb but expression is of type character varying\r\n      Hint: You will need to rewrite or cast the expression.\r\n      Position: 519\r\n    ### The error may exist in class path resource [mybatis/mapper/dolphin/RssSubSourceMapper.xml]\r\n    ### The error may involve com.dolphin.soa.post.dao.RssSubSourceMapper.updateByPrimaryKeySelective-Inline\r\n    ### The error occurred while setting parameters\r\n    ### SQL: UPDATE rss_sub_source SET sub_url = ?, created_time = ?, updated_time = ?, sub_status = ?, rss_type = ?, standard_type = ?, standard_version = ?, cron = ?, trigger_count = ?, next_trigger_time = ?, sub_name = ?, last_trigger_time = ?, intro = ?, failed_count = ?, frequency_month = ?, reputation = ?, rep_latest_refresh_time = ?, scrapy_take_time = ?, censor_status = ?, etag = ?, last_modified = ?, editor_pick = ?, fav_icon_url = ?, dynamic_interval = ?, creator = ?, tags = ?, article_count = ?, article_count_latest_refresh_time = ?, comment_rss = ?, part_output = ? WHERE id = ?\r\n    ### Cause: org.postgresql.util.PSQLException: ERROR: column &quot;tags&quot; is of type jsonb but expression is of type character varying\r\n      Hint: You will need to rewrite or cast the expression.\r\n      Position: 519\r\n    ; bad SQL grammar []; nested exception is org.postgresql.util.PSQLException: ERROR: column &quot;tags&quot; is of type jsonb but expression is of type character varying\r\n      Hint: You will need to rewrite or cast the expression.\r\n      Position: 519\r\n    \tat org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:239) ~[spring-jdbc-5.3.19.jar!/:5.3.19]\r\n    \tat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70) ~[spring-jdbc-5.3.19.jar!/:5.3.19]\r\n    \tat org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91) ~[mybatis-spring-2.0.6.jar!/:2.0.6]\r\n    \tat org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441) ~[mybatis-spring-2.0.6.jar!/:2.0.6]\r\n    \tat com.sun.proxy.$Proxy135.update(Unknown Source) ~[?:?]\r\n    \tat org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:288) ~[mybatis-spring-2.0.6.jar!/:2.0.6]\r\n    \tat org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:67) ~[mybatis-3.5.6.jar!/:3.5.6]\r\n    \tat org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152) ~[mybatis-3.5.6.jar!/:3.5.6]\r\n    \tat org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85) ~[mybatis-3.5.6.jar!/:3.5.6]\r\n    \tat com.sun.proxy.$Proxy152.updateByPrimaryKeySelective(Unknown Source) ~[?:?]\r\n\r\n\r\n\r\n\r\nwhat should I do to handle the jsonb in spring boot application when using mybatis?\r\n\r\n\r\n\r\n","title":"org.postgresql.util.PSQLException: ERROR: column &quot;tags&quot; is of type jsonb but expression is of type character varying","body":"<p>After I changed the PostgreSQL 13 database columns <code>tags</code> to jsonb, throw error when execute sql:</p>\n<pre><code>Caused by: org.springframework.jdbc.BadSqlGrammarException: \n### Error updating database.  Cause: org.postgresql.util.PSQLException: ERROR: column &quot;tags&quot; is of type jsonb but expression is of type character varying\n  Hint: You will need to rewrite or cast the expression.\n  Position: 519\n### The error may exist in class path resource [mybatis/mapper/dolphin/RssSubSourceMapper.xml]\n### The error may involve com.dolphin.soa.post.dao.RssSubSourceMapper.updateByPrimaryKeySelective-Inline\n### The error occurred while setting parameters\n### SQL: UPDATE rss_sub_source SET sub_url = ?, created_time = ?, updated_time = ?, sub_status = ?, rss_type = ?, standard_type = ?, standard_version = ?, cron = ?, trigger_count = ?, next_trigger_time = ?, sub_name = ?, last_trigger_time = ?, intro = ?, failed_count = ?, frequency_month = ?, reputation = ?, rep_latest_refresh_time = ?, scrapy_take_time = ?, censor_status = ?, etag = ?, last_modified = ?, editor_pick = ?, fav_icon_url = ?, dynamic_interval = ?, creator = ?, tags = ?, article_count = ?, article_count_latest_refresh_time = ?, comment_rss = ?, part_output = ? WHERE id = ?\n### Cause: org.postgresql.util.PSQLException: ERROR: column &quot;tags&quot; is of type jsonb but expression is of type character varying\n  Hint: You will need to rewrite or cast the expression.\n  Position: 519\n; bad SQL grammar []; nested exception is org.postgresql.util.PSQLException: ERROR: column &quot;tags&quot; is of type jsonb but expression is of type character varying\n  Hint: You will need to rewrite or cast the expression.\n  Position: 519\n    at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:239) ~[spring-jdbc-5.3.19.jar!/:5.3.19]\n    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70) ~[spring-jdbc-5.3.19.jar!/:5.3.19]\n    at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91) ~[mybatis-spring-2.0.6.jar!/:2.0.6]\n    at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441) ~[mybatis-spring-2.0.6.jar!/:2.0.6]\n    at com.sun.proxy.$Proxy135.update(Unknown Source) ~[?:?]\n    at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:288) ~[mybatis-spring-2.0.6.jar!/:2.0.6]\n    at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:67) ~[mybatis-3.5.6.jar!/:3.5.6]\n    at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152) ~[mybatis-3.5.6.jar!/:3.5.6]\n    at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85) ~[mybatis-3.5.6.jar!/:3.5.6]\n    at com.sun.proxy.$Proxy152.updateByPrimaryKeySelective(Unknown Source) ~[?:?]\n</code></pre>\n<p>what should I do to handle the jsonb in spring boot application when using mybatis?</p>\n"},{"tags":["java","data-structures"],"answers":[{"tags":[],"owner":{"account_id":19311027,"reputation":56,"user_id":14116735,"display_name":"Nathan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657947443,"creation_date":1657947443,"answer_id":73001637,"question_id":73001617,"body_markdown":"What you&#39;re doing here isn&#39;t actually overwriting the node as null. You&#39;re just taking the value of your variable, in this case root, and setting THAT to null. If you really want to remove the node, you need to make sure that its parent node doesn&#39;t reference it as its left or right subtree, and java garbage collection should automatically dispose of it.","title":"Why do these Java object and object value have different behaviors?","body":"<p>What you're doing here isn't actually overwriting the node as null. You're just taking the value of your variable, in this case root, and setting THAT to null. If you really want to remove the node, you need to make sure that its parent node doesn't reference it as its left or right subtree, and java garbage collection should automatically dispose of it.</p>\n"}],"owner":{"account_id":17214387,"reputation":83,"user_id":12462796,"display_name":"jphuong"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1657955618,"answer_count":1,"score":0,"last_activity_date":1657947443,"creation_date":1657947150,"question_id":73001617,"body_markdown":"I&#39;m having a bit of trouble understanding how Java is handling the following code. This is unfinished code to remove a node from a binary search tree. If I set a node to null (near the first print line), the node doesn&#39;t get set to null when I step out of recursion. But if I set the value of the node, the value does get set when I step out of recursion. Why does the behavior between the node and the node&#39;s value differ? I know this isn&#39;t the proper way to code a remove function, but I&#39;m coding in this specific way as practice.\r\n\r\n     /**\r\n     * Definition for a binary tree node.\r\n     * public class TreeNode {\r\n     *     int val;\r\n     *     TreeNode left;\r\n     *     TreeNode right;\r\n     *     TreeNode() {}\r\n     *     TreeNode(int val) { this.val = val; }\r\n     *     TreeNode(int val, TreeNode left, TreeNode right) {\r\n     *         this.val = val;\r\n     *         this.left = left;\r\n     *         this.right = right;\r\n     *     }\r\n     * }\r\n     */\r\n    class Solution {\r\n        public TreeNode deleteNode(TreeNode root, int key) {\r\n            // Handles empty tree\r\n            if (root == null) {\r\n                return root;\r\n            }\r\n            // Current node has key\r\n            else if (key == root.val) {\r\n                // Node has no children\r\n                if (root.left == null &amp;&amp; root.right == null) {\r\n                    root.val = 50000;\r\n                    root = null;\r\n                    return null;\r\n                }\r\n            }\r\n            // Left tree\r\n            else if (key &lt; root.val) {\r\n                deleteNode(root.left, key);\r\n                System.out.println(root.left.val);\r\n                System.out.println(root.left);\r\n            }\r\n            // Right tree\r\n            else if (key &gt; root.val) {\r\n                deleteNode(root.right, key);\r\n            }\r\n            return root;\r\n        }\r\n    }\r\n\r\nThe input is:\r\n\r\n    [2,1,3]\r\n    1\r\n\r\nThis leads to a tree with 2 as the root, 1 as the left node, and 3 as the right node.\r\n\r\nThe output is:\r\n\r\n    50000\r\n    TreeNode@3f91beef","title":"Why do these Java object and object value have different behaviors?","body":"<p>I'm having a bit of trouble understanding how Java is handling the following code. This is unfinished code to remove a node from a binary search tree. If I set a node to null (near the first print line), the node doesn't get set to null when I step out of recursion. But if I set the value of the node, the value does get set when I step out of recursion. Why does the behavior between the node and the node's value differ? I know this isn't the proper way to code a remove function, but I'm coding in this specific way as practice.</p>\n<pre><code> /**\n * Definition for a binary tree node.\n * public class TreeNode {\n *     int val;\n *     TreeNode left;\n *     TreeNode right;\n *     TreeNode() {}\n *     TreeNode(int val) { this.val = val; }\n *     TreeNode(int val, TreeNode left, TreeNode right) {\n *         this.val = val;\n *         this.left = left;\n *         this.right = right;\n *     }\n * }\n */\nclass Solution {\n    public TreeNode deleteNode(TreeNode root, int key) {\n        // Handles empty tree\n        if (root == null) {\n            return root;\n        }\n        // Current node has key\n        else if (key == root.val) {\n            // Node has no children\n            if (root.left == null &amp;&amp; root.right == null) {\n                root.val = 50000;\n                root = null;\n                return null;\n            }\n        }\n        // Left tree\n        else if (key &lt; root.val) {\n            deleteNode(root.left, key);\n            System.out.println(root.left.val);\n            System.out.println(root.left);\n        }\n        // Right tree\n        else if (key &gt; root.val) {\n            deleteNode(root.right, key);\n        }\n        return root;\n    }\n}\n</code></pre>\n<p>The input is:</p>\n<pre><code>[2,1,3]\n1\n</code></pre>\n<p>This leads to a tree with 2 as the root, 1 as the left node, and 3 as the right node.</p>\n<p>The output is:</p>\n<pre><code>50000\nTreeNode@3f91beef\n</code></pre>\n"},{"tags":["java","spring-boot","tomcat"],"answers":[{"tags":[],"owner":{"account_id":7788702,"reputation":836,"user_id":5892518,"display_name":"Harsh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657888414,"creation_date":1657888414,"answer_id":72994067,"question_id":72992503,"body_markdown":"Try this!\r\n\r\nDefine the following in `application.yml or application.properties`\r\n\r\n    logging:\r\n     level:\r\n       org.apache:\r\n        DEBUG\r\n\r\nAlternatively, before starting your application, you can also check `Enable debug output` in your `Run configurations` ! ","title":"Tomcat server logs not showing in spring boot application","body":"<p>Try this!</p>\n<p>Define the following in <code>application.yml or application.properties</code></p>\n<pre><code>logging:\n level:\n   org.apache:\n    DEBUG\n</code></pre>\n<p>Alternatively, before starting your application, you can also check <code>Enable debug output</code> in your <code>Run configurations</code> !</p>\n"}],"owner":{"account_id":22883624,"reputation":155,"user_id":17401973,"display_name":"Aditya K"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":826,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1657946253,"creation_date":1657880440,"question_id":72992503,"body_markdown":"I have a spring boot application where I have configured a listener consuming messages in a queue. \r\nI also have a controller which is used for healthcheck purposes. When the service starts, I get the following logs. But I don&#39;t see any logs on the Tomcat server atarting and the port it is running on. \r\n```\r\n2022-07-15 15:39:24.628  INFO [bo-bse-permissible-users-job,,,] 226627 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate Core {5.3.7.Final}\r\n2022-07-15 15:39:24.630  INFO [bo-bse-permissible-users-job,,,] 226627 --- [           main] org.hibernate.cfg.Environment            : HHH000206: hibernate.properties not found\r\n2022-07-15 15:39:24.789  INFO [bo-bse-permissible-users-job,,,] 226627 --- [           main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.0.4.Final}\r\n2022-07-15 15:39:24.940  INFO [bo-bse-permissible-users-job,,,] 226627 --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect\r\n2022-07-15 15:39:25.888  INFO [bo-bse-permissible-users-job,,,] 226627 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n2022-07-15 15:39:26.911  INFO [bo-bse-permissible-users-job,,,] 226627 --- [           main] o.h.h.i.QueryTranslatorFactoryInitiator  : HHH000397: Using ASTQueryTranslatorFactory\r\n2022-07-15 15:39:28.112  INFO [bo-bse-permissible-users-job,,,] 226627 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService &#39;threadPoolTaskExecutorForPlatformStatus&#39;\r\n2022-07-15 15:39:33.946  INFO [bo-bse-permissible-users-job,,,] 226627 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService\r\n2022-07-15 15:39:34.182  INFO [bo-bse-permissible-users-job,,,] 226627 --- [           main] c.p.e.bo.BoBsePermissibleApplication     : Started BoBsePermissibleApplication in 16.853 seconds (JVM running for 17.168)\r\n```\r\n\r\nI have another similar service and following are the logs shown\r\n```\r\n2022-07-15 15:43:57.812  INFO 227112 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8000 (http)\r\n2022-07-15 15:43:57.813  INFO 227112 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2022-07-15 15:43:57.813  INFO 227112 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.16]\r\n2022-07-15 15:43:57.819  INFO 227112 --- [           main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext\r\n2022-07-15 15:43:57.819  INFO 227112 --- [           main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 77 ms\r\n2022-07-15 15:43:57.843  INFO 227112 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 26 endpoint(s) beneath base path &#39;/actuator&#39;\r\n2022-07-15 15:43:57.912  INFO 227112 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8000 (http) with context path &#39;&#39;\r\n2022-07-15 15:43:57.932  INFO 227112 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5555 (http) with context path &#39;&#39;\r\n2022-07-15 15:43:57.933  INFO 227112 --- [           main] c.p.b.e.BoConsumerExchangeAckApplication : Started BoConsumerExchangeAckApplication in 13.602 seconds (JVM running for 13.873)\r\n```\r\n\r\nI can see the tomcat server logs in the other application even though all the dependencies are pretty much the same. \r\n\r\nI can also see the tomcat jars present in the external libraries:\r\n**tomcat-embed-core-9.0.16.jar**, \r\n**tomcat-embed-el-9.0.16.jar**, \r\n**tomcat-embed-websocket-9.0.16.jar**.\r\n\r\nThe service is consuming the message and processing it but I&#39;m struggling to deploy it on a server. \r\n\r\n\r\nEdit: \r\n\r\nFound the issue, one line in the application.properties file was causing this. \r\n```\r\nspring.main.web-application-type=none\r\n```\r\nRemoved this and I was able to see the port in which tomcat has started and was able to hit my controller correctly. \r\n","title":"Tomcat server logs not showing in spring boot application","body":"<p>I have a spring boot application where I have configured a listener consuming messages in a queue.\nI also have a controller which is used for healthcheck purposes. When the service starts, I get the following logs. But I don't see any logs on the Tomcat server atarting and the port it is running on.</p>\n<pre><code>2022-07-15 15:39:24.628  INFO [bo-bse-permissible-users-job,,,] 226627 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate Core {5.3.7.Final}\n2022-07-15 15:39:24.630  INFO [bo-bse-permissible-users-job,,,] 226627 --- [           main] org.hibernate.cfg.Environment            : HHH000206: hibernate.properties not found\n2022-07-15 15:39:24.789  INFO [bo-bse-permissible-users-job,,,] 226627 --- [           main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.0.4.Final}\n2022-07-15 15:39:24.940  INFO [bo-bse-permissible-users-job,,,] 226627 --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect\n2022-07-15 15:39:25.888  INFO [bo-bse-permissible-users-job,,,] 226627 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'\n2022-07-15 15:39:26.911  INFO [bo-bse-permissible-users-job,,,] 226627 --- [           main] o.h.h.i.QueryTranslatorFactoryInitiator  : HHH000397: Using ASTQueryTranslatorFactory\n2022-07-15 15:39:28.112  INFO [bo-bse-permissible-users-job,,,] 226627 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'threadPoolTaskExecutorForPlatformStatus'\n2022-07-15 15:39:33.946  INFO [bo-bse-permissible-users-job,,,] 226627 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService\n2022-07-15 15:39:34.182  INFO [bo-bse-permissible-users-job,,,] 226627 --- [           main] c.p.e.bo.BoBsePermissibleApplication     : Started BoBsePermissibleApplication in 16.853 seconds (JVM running for 17.168)\n</code></pre>\n<p>I have another similar service and following are the logs shown</p>\n<pre><code>2022-07-15 15:43:57.812  INFO 227112 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8000 (http)\n2022-07-15 15:43:57.813  INFO 227112 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2022-07-15 15:43:57.813  INFO 227112 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.16]\n2022-07-15 15:43:57.819  INFO 227112 --- [           main] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext\n2022-07-15 15:43:57.819  INFO 227112 --- [           main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 77 ms\n2022-07-15 15:43:57.843  INFO 227112 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 26 endpoint(s) beneath base path '/actuator'\n2022-07-15 15:43:57.912  INFO 227112 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8000 (http) with context path ''\n2022-07-15 15:43:57.932  INFO 227112 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 5555 (http) with context path ''\n2022-07-15 15:43:57.933  INFO 227112 --- [           main] c.p.b.e.BoConsumerExchangeAckApplication : Started BoConsumerExchangeAckApplication in 13.602 seconds (JVM running for 13.873)\n</code></pre>\n<p>I can see the tomcat server logs in the other application even though all the dependencies are pretty much the same.</p>\n<p>I can also see the tomcat jars present in the external libraries:\n<strong>tomcat-embed-core-9.0.16.jar</strong>,\n<strong>tomcat-embed-el-9.0.16.jar</strong>,\n<strong>tomcat-embed-websocket-9.0.16.jar</strong>.</p>\n<p>The service is consuming the message and processing it but I'm struggling to deploy it on a server.</p>\n<p>Edit:</p>\n<p>Found the issue, one line in the application.properties file was causing this.</p>\n<pre><code>spring.main.web-application-type=none\n</code></pre>\n<p>Removed this and I was able to see the port in which tomcat has started and was able to hit my controller correctly.</p>\n"},{"tags":["java","redis","apache-commons","jedis"],"answers":[{"tags":[],"owner":{"account_id":4829511,"reputation":5855,"user_id":4021802,"display_name":"sazzad"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1657946157,"creation_date":1657946157,"answer_id":73001551,"question_id":72989555,"body_markdown":"Instead of `JedisPoolConfig` you need `ConnectionPoolConfig`.\r\n\r\nAlso, since Jedis 4.0 you can&#39;t just send host in the respective constructor. So use any other alternate.\r\n\r\n&gt; WARNING: This constructor only accepts a uri string as url.\r\n\r\n    final ConnectionPoolConfig poolConfig = buildPoolConfig();\r\n    UnifiedJedis jedis = new JedisPooled(poolConfig, &quot;localhost&quot;, 6379);\r\n    \r\n    private ConnectionPoolConfig buildPoolConfig() {\r\n        final ConnectionPoolConfig poolConfig = new ConnectionPoolConfig();\r\n        // change poolConfig as you want\r\n        return poolConfig;\r\n    }\r\n    \r\n    // do operations with (unified) jedis object","title":"How to config JedisPoolConfig with redis.clients.jedis.UnifiedJedis","body":"<p>Instead of <code>JedisPoolConfig</code> you need <code>ConnectionPoolConfig</code>.</p>\n<p>Also, since Jedis 4.0 you can't just send host in the respective constructor. So use any other alternate.</p>\n<blockquote>\n<p>WARNING: This constructor only accepts a uri string as url.</p>\n</blockquote>\n<pre><code>final ConnectionPoolConfig poolConfig = buildPoolConfig();\nUnifiedJedis jedis = new JedisPooled(poolConfig, &quot;localhost&quot;, 6379);\n\nprivate ConnectionPoolConfig buildPoolConfig() {\n    final ConnectionPoolConfig poolConfig = new ConnectionPoolConfig();\n    // change poolConfig as you want\n    return poolConfig;\n}\n\n// do operations with (unified) jedis object\n</code></pre>\n"}],"owner":{"account_id":8581069,"reputation":233,"user_id":6428642,"display_name":"Dattatray Satpute"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3553,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73001551,"answer_count":1,"score":1,"last_activity_date":1657946157,"creation_date":1657864222,"question_id":72989555,"body_markdown":"I have seen follwing example.\r\n\r\n  \r\n\r\n      final JedisPoolConfig poolConfig = buildPoolConfig();\r\n    JedisPool jedisPool = new JedisPool(poolConfig, &quot;localhost&quot;);\r\n    \r\n    private JedisPoolConfig buildPoolConfig() {\r\n        final JedisPoolConfig poolConfig = new JedisPoolConfig();\r\n        poolConfig.setMaxTotal(128);\r\n        poolConfig.setMaxIdle(128);\r\n        poolConfig.setMinIdle(16);\r\n        poolConfig.setTestOnBorrow(true);\r\n        poolConfig.setTestOnReturn(true);\r\n        poolConfig.setTestWhileIdle(true);\r\n        poolConfig.setMinEvictableIdleTimeMillis(Duration.ofSeconds(60).toMillis());\r\n        poolConfig.setTimeBetweenEvictionRunsMillis(Duration.ofSeconds(30).toMillis());\r\n        poolConfig.setNumTestsPerEvictionRun(3);\r\n        poolConfig.setBlockWhenExhausted(true);\r\n        return poolConfig;\r\n    }\r\n    \r\n    try (Jedis jedis = jedisPool.getResource()) {\r\n        // do operations with jedis resource\r\n    }\r\n\r\nIt returns only  redis.clients.jedis.Jedis client, but I am using &quot;jedis-4.0.0.jar&quot; and I want use redis.clients.jedis.UnifiedJedis client with pooling mechanism is there any way to use this.","title":"How to config JedisPoolConfig with redis.clients.jedis.UnifiedJedis","body":"<p>I have seen follwing example.</p>\n<pre><code>  final JedisPoolConfig poolConfig = buildPoolConfig();\nJedisPool jedisPool = new JedisPool(poolConfig, &quot;localhost&quot;);\n\nprivate JedisPoolConfig buildPoolConfig() {\n    final JedisPoolConfig poolConfig = new JedisPoolConfig();\n    poolConfig.setMaxTotal(128);\n    poolConfig.setMaxIdle(128);\n    poolConfig.setMinIdle(16);\n    poolConfig.setTestOnBorrow(true);\n    poolConfig.setTestOnReturn(true);\n    poolConfig.setTestWhileIdle(true);\n    poolConfig.setMinEvictableIdleTimeMillis(Duration.ofSeconds(60).toMillis());\n    poolConfig.setTimeBetweenEvictionRunsMillis(Duration.ofSeconds(30).toMillis());\n    poolConfig.setNumTestsPerEvictionRun(3);\n    poolConfig.setBlockWhenExhausted(true);\n    return poolConfig;\n}\n\ntry (Jedis jedis = jedisPool.getResource()) {\n    // do operations with jedis resource\n}\n</code></pre>\n<p>It returns only  redis.clients.jedis.Jedis client, but I am using &quot;jedis-4.0.0.jar&quot; and I want use redis.clients.jedis.UnifiedJedis client with pooling mechanism is there any way to use this.</p>\n"},{"tags":["java","http","java-11","java-http-client"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1622942656,"post_id":67602169,"comment_id":119935568,"body_markdown":"Either the timeout applies only to the first read, or, more probably, it applies to all of them, such that if it expires during any read you will get the exception. The former is also possible but considerably less useful: in fact it would be poor design IMO.","body":"Either the timeout applies only to the first read, or, more probably, it applies to all of them, such that if it expires during any read you will get the exception. The former is also possible but considerably less useful: in fact it would be poor design IMO."}],"answers":[{"tags":[],"owner":{"account_id":1063012,"reputation":71986,"user_id":1064245,"accept_rate":82,"display_name":"M A"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1621427494,"creation_date":1621427494,"answer_id":67603324,"question_id":67602169,"body_markdown":"My guess this is left to the consumer of the stream, since this is part of the handling logic, so the body handling can be still be processed with a `CompletableFuture`:\r\n\r\n    HttpResponse&lt;Stream&lt;String&gt;&gt; httpResponse = httpClient.send(httpRequest,\r\n                                                                HttpResponse.BodyHandlers.ofLines());\r\n\r\n    Stream&lt;String&gt; responseLineStream = httpResponse.body();\r\n    CompletableFuture&lt;Long&gt; future = CompletableFuture.supplyAsync(() -&gt; responseLineStream.count());\r\n    long count = future.get(3, TimeUnit.SECONDS);\r\n\r\nOr just simply a `Future` executed by a Java [`Executor`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/Executors.html).","title":"How to timeout on a slow streaming response body with Java&#39;s HttpClient","body":"<p>My guess this is left to the consumer of the stream, since this is part of the handling logic, so the body handling can be still be processed with a <code>CompletableFuture</code>:</p>\n<pre><code>HttpResponse&lt;Stream&lt;String&gt;&gt; httpResponse = httpClient.send(httpRequest,\n                                                            HttpResponse.BodyHandlers.ofLines());\n\nStream&lt;String&gt; responseLineStream = httpResponse.body();\nCompletableFuture&lt;Long&gt; future = CompletableFuture.supplyAsync(() -&gt; responseLineStream.count());\nlong count = future.get(3, TimeUnit.SECONDS);\n</code></pre>\n<p>Or just simply a <code>Future</code> executed by a Java <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/Executors.html\" rel=\"noreferrer\"><code>Executor</code></a>.</p>\n"},{"tags":[],"owner":{"account_id":8657191,"reputation":452,"user_id":6481061,"display_name":"Moataz Abdelnasser"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1657944163,"creation_date":1622865904,"answer_id":67846167,"question_id":67602169,"body_markdown":"One way to solve this is to set a timeout on the time taken to receive the whole body. That&#39;s what [M A](https://stackoverflow.com/users/1064245/m-a)&#39;s solution does. As you&#39;ve noticed, you should close the stream if timeout evaluates, so the connection is released properly instead of hanging in background. A more general approach is to implement a `BodySubscriber` that completes itself exceptionally when it is not completed by upstream within the timeout. This affords not having to spawn a thread just for timed waiting or close the stream. Here&#39;s an appropriate implementation.\r\n\r\n```java\r\nclass TimeoutBodySubscriber&lt;T&gt; implements BodySubscriber&lt;T&gt; {\r\n  private final BodySubscriber&lt;T&gt; downstream;\r\n  private final Duration timeout;\r\n  private Subscription subscription;\r\n\r\n  /** Make sure downstream isn&#39;t called after we receive an onComplete or onError. */\r\n  private boolean done;\r\n\r\n  TimeoutBodySubscriber(BodySubscriber&lt;T&gt; downstream, Duration timeout) {\r\n    this.downstream = downstream;\r\n    this.timeout = timeout;\r\n  }\r\n\r\n  @Override\r\n  public CompletionStage&lt;T&gt; getBody() {\r\n    return downstream.getBody();\r\n  }\r\n\r\n  @Override\r\n  public synchronized void onSubscribe(Subscription subscription) {\r\n    this.subscription = requireNonNull(subscription);\r\n    downstream.onSubscribe(subscription);\r\n\r\n    // Schedule an error completion to be fired when timeout evaluates\r\n    CompletableFuture.delayedExecutor(timeout.toMillis(), TimeUnit.MILLISECONDS)\r\n        .execute(this::onTimeout);\r\n  }\r\n\r\n  private synchronized void onTimeout() {\r\n    if (!done) {\r\n      done = true;\r\n      downstream.onError(new HttpTimeoutException(&quot;body completion timed out&quot;));\r\n\r\n      // Cancel subscription to release the connection, so it doesn&#39;t keep hanging in background\r\n      subscription.cancel();\r\n    }\r\n  }\r\n\r\n  @Override\r\n  public synchronized void onNext(List&lt;ByteBuffer&gt; item) {\r\n    if (!done) {\r\n      downstream.onNext(item);\r\n    }\r\n  }\r\n\r\n  @Override\r\n  public synchronized void onError(Throwable throwable) {\r\n    if (!done) {\r\n      done = true;\r\n      downstream.onError(throwable);\r\n    }\r\n  }\r\n\r\n  @Override\r\n  public synchronized void onComplete() {\r\n    if (!done) {\r\n      done = true;\r\n      downstream.onComplete();\r\n    }\r\n  }\r\n\r\n  static &lt;T&gt; BodyHandler&lt;T&gt; withBodyTimeout(BodyHandler&lt;T&gt; handler, Duration timeout) {\r\n    return responseInfo -&gt; new TimeoutBodySubscriber&lt;&gt;(handler.apply(responseInfo), timeout);\r\n  }\r\n}\r\n```\r\n\r\nIt can be used as follows:\r\n\r\n```java\r\nDuration timeout = Duration.ofSeconds(10);\r\nHttpResponse&lt;Stream&lt;String&gt;&gt; httpResponse = httpClient\r\n        .send(httpRequest, TimeoutBodySubscriber.withTimeout(HttpResponse.BodyHandlers.ofLines(), timeout));\r\n```\r\n\r\nAnother approach is to use a read timeout. This is more flexible as the response isn&#39;t timed-out as long as the server remains active (i.e. keeps sending stuff). You&#39;ll need a `BodySubscriber` that completes itself exceptionally if it doesn&#39;t receive its next requested signal within the timeout. This is slightly more complex to implement. You can use [Methanol](https://mizosoft.github.io/methanol/) if you&#39;re fine with a dependency. It implements read timeouts as described.\r\n\r\n```java\r\nDuration timeout = Duration.ofSeconds(3);\r\nHttpResponse&lt;Stream&lt;String&gt;&gt; httpResponse = httpClient\r\n    .send(httpRequest, MoreBodyHandlers.withReadTimeout(HttpResponse.BodyHandlers.ofLines(), timeout));\r\n```\r\n\r\nAnother strategy is to use a combination of both: time out as soon as the server becomes inactive or the body takes too long to complete.","title":"How to timeout on a slow streaming response body with Java&#39;s HttpClient","body":"<p>One way to solve this is to set a timeout on the time taken to receive the whole body. That's what <a href=\"https://stackoverflow.com/users/1064245/m-a\">M A</a>'s solution does. As you've noticed, you should close the stream if timeout evaluates, so the connection is released properly instead of hanging in background. A more general approach is to implement a <code>BodySubscriber</code> that completes itself exceptionally when it is not completed by upstream within the timeout. This affords not having to spawn a thread just for timed waiting or close the stream. Here's an appropriate implementation.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class TimeoutBodySubscriber&lt;T&gt; implements BodySubscriber&lt;T&gt; {\n  private final BodySubscriber&lt;T&gt; downstream;\n  private final Duration timeout;\n  private Subscription subscription;\n\n  /** Make sure downstream isn't called after we receive an onComplete or onError. */\n  private boolean done;\n\n  TimeoutBodySubscriber(BodySubscriber&lt;T&gt; downstream, Duration timeout) {\n    this.downstream = downstream;\n    this.timeout = timeout;\n  }\n\n  @Override\n  public CompletionStage&lt;T&gt; getBody() {\n    return downstream.getBody();\n  }\n\n  @Override\n  public synchronized void onSubscribe(Subscription subscription) {\n    this.subscription = requireNonNull(subscription);\n    downstream.onSubscribe(subscription);\n\n    // Schedule an error completion to be fired when timeout evaluates\n    CompletableFuture.delayedExecutor(timeout.toMillis(), TimeUnit.MILLISECONDS)\n        .execute(this::onTimeout);\n  }\n\n  private synchronized void onTimeout() {\n    if (!done) {\n      done = true;\n      downstream.onError(new HttpTimeoutException(&quot;body completion timed out&quot;));\n\n      // Cancel subscription to release the connection, so it doesn't keep hanging in background\n      subscription.cancel();\n    }\n  }\n\n  @Override\n  public synchronized void onNext(List&lt;ByteBuffer&gt; item) {\n    if (!done) {\n      downstream.onNext(item);\n    }\n  }\n\n  @Override\n  public synchronized void onError(Throwable throwable) {\n    if (!done) {\n      done = true;\n      downstream.onError(throwable);\n    }\n  }\n\n  @Override\n  public synchronized void onComplete() {\n    if (!done) {\n      done = true;\n      downstream.onComplete();\n    }\n  }\n\n  static &lt;T&gt; BodyHandler&lt;T&gt; withBodyTimeout(BodyHandler&lt;T&gt; handler, Duration timeout) {\n    return responseInfo -&gt; new TimeoutBodySubscriber&lt;&gt;(handler.apply(responseInfo), timeout);\n  }\n}\n</code></pre>\n<p>It can be used as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Duration timeout = Duration.ofSeconds(10);\nHttpResponse&lt;Stream&lt;String&gt;&gt; httpResponse = httpClient\n        .send(httpRequest, TimeoutBodySubscriber.withTimeout(HttpResponse.BodyHandlers.ofLines(), timeout));\n</code></pre>\n<p>Another approach is to use a read timeout. This is more flexible as the response isn't timed-out as long as the server remains active (i.e. keeps sending stuff). You'll need a <code>BodySubscriber</code> that completes itself exceptionally if it doesn't receive its next requested signal within the timeout. This is slightly more complex to implement. You can use <a href=\"https://mizosoft.github.io/methanol/\" rel=\"nofollow noreferrer\">Methanol</a> if you're fine with a dependency. It implements read timeouts as described.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Duration timeout = Duration.ofSeconds(3);\nHttpResponse&lt;Stream&lt;String&gt;&gt; httpResponse = httpClient\n    .send(httpRequest, MoreBodyHandlers.withReadTimeout(HttpResponse.BodyHandlers.ofLines(), timeout));\n</code></pre>\n<p>Another strategy is to use a combination of both: time out as soon as the server becomes inactive or the body takes too long to complete.</p>\n"}],"owner":{"account_id":550954,"reputation":831,"user_id":915655,"display_name":"Mark Slater"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2197,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":67603324,"answer_count":2,"score":8,"last_activity_date":1657944163,"creation_date":1621422931,"question_id":67602169,"body_markdown":"How should I deal with servers that hang sending an HTTP response body using the HTTP client included in Java 11 onwards, when I need to handle the response in a streaming fashion?\r\n\r\nHaving read the documentation, I&#39;m aware that it&#39;s possible to set a [timeout on connection](https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpClient.Builder.html#connectTimeout(java.time.Duration)) and a [timeout on the request](https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpRequest.Builder.html#timeout(java.time.Duration)):\r\n\r\n```java\r\nHttpClient httpClient = HttpClient.newBuilder()\r\n        .connectTimeout(Duration.ofSeconds(2))\r\n        .build();\r\n\r\nHttpRequest httpRequest = HttpRequest.newBuilder(URI.create(&quot;http://example.com&quot;))\r\n        .timeout(Duration.ofSeconds(5))\r\n        .build();\r\n\r\nHttpResponse&lt;Stream&lt;String&gt;&gt; httpResponse = httpClient\r\n        .send(httpRequest, HttpResponse.BodyHandlers.ofLines());\r\n\r\nStream&lt;String&gt; responseLineStream = httpResponse.body();\r\nresponseLineStream.count();\r\n```\r\n\r\nIn the above code:\r\n\r\n - If a connection cannot be established within 2 seconds, a timeout exception will be thrown.\r\n - If a response is not received within 5 seconds, a timeout exception will be thrown.  By experimentation, the timer starts after the connection is established, and for this type of `BodyHandler`, a response is considered received when the status line and headers have been received.\r\n\r\nThis means that when the code executes, within 7 seconds either an exception will have been thrown, or we&#39;ll have arrived at the last line.  However, the last line isn&#39;t constrained by any timeout.  If the server stops sending the response body, the last line blocks forever.\r\n\r\nHow can I prevent the last line hanging in this case?\r\n \r\n","title":"How to timeout on a slow streaming response body with Java&#39;s HttpClient","body":"<p>How should I deal with servers that hang sending an HTTP response body using the HTTP client included in Java 11 onwards, when I need to handle the response in a streaming fashion?</p>\n<p>Having read the documentation, I'm aware that it's possible to set a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpClient.Builder.html#connectTimeout(java.time.Duration)\" rel=\"noreferrer\">timeout on connection</a> and a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpRequest.Builder.html#timeout(java.time.Duration)\" rel=\"noreferrer\">timeout on the request</a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>HttpClient httpClient = HttpClient.newBuilder()\n        .connectTimeout(Duration.ofSeconds(2))\n        .build();\n\nHttpRequest httpRequest = HttpRequest.newBuilder(URI.create(&quot;http://example.com&quot;))\n        .timeout(Duration.ofSeconds(5))\n        .build();\n\nHttpResponse&lt;Stream&lt;String&gt;&gt; httpResponse = httpClient\n        .send(httpRequest, HttpResponse.BodyHandlers.ofLines());\n\nStream&lt;String&gt; responseLineStream = httpResponse.body();\nresponseLineStream.count();\n</code></pre>\n<p>In the above code:</p>\n<ul>\n<li>If a connection cannot be established within 2 seconds, a timeout exception will be thrown.</li>\n<li>If a response is not received within 5 seconds, a timeout exception will be thrown.  By experimentation, the timer starts after the connection is established, and for this type of <code>BodyHandler</code>, a response is considered received when the status line and headers have been received.</li>\n</ul>\n<p>This means that when the code executes, within 7 seconds either an exception will have been thrown, or we'll have arrived at the last line.  However, the last line isn't constrained by any timeout.  If the server stops sending the response body, the last line blocks forever.</p>\n<p>How can I prevent the last line hanging in this case?</p>\n"},{"tags":["java","unicode","character","width"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1645569927,"post_id":71228251,"comment_id":125905925,"body_markdown":"This Question is unclear as to what exactly you mean by &quot;width&quot;. Your extra long line poking out is caused by too many `#` characters. As to how or why you got those, perhaps showing some code here would help.","body":"This Question is unclear as to what exactly you mean by &quot;width&quot;. Your extra long line poking out is caused by too many <code>#</code> characters. As to how or why you got those, perhaps showing some code here would help."},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":1,"creation_date":1645591047,"post_id":71228251,"comment_id":125909725,"body_markdown":"@BasilBourque I agree that the question is unclear, but my understanding is that the OP is asking about determining the width of rendered font characters (i.e. glyphs) rather than the &quot;width&quot; of their Unicode representation.","body":"@BasilBourque I agree that the question is unclear, but my understanding is that the OP is asking about determining the width of rendered font characters (i.e. glyphs) rather than the &quot;width&quot; of their Unicode representation."},{"owner":{"account_id":13789219,"reputation":48460,"user_id":9952196,"display_name":"Shawn"},"score":0,"creation_date":1645608065,"post_id":71228251,"comment_id":125914448,"body_markdown":"I&#39;ve written code to compute display width of arbitrary Unicode codepoints in a few languages. Should look into porting it to Java...","body":"I&#39;ve written code to compute display width of arbitrary Unicode codepoints in a few languages. Should look into porting it to Java..."},{"owner":{"account_id":13789219,"reputation":48460,"user_id":9952196,"display_name":"Shawn"},"score":0,"creation_date":1645608530,"post_id":71228251,"comment_id":125914650,"body_markdown":"Hmm, don&#39;t see a way to get the East Asian Width property of a codepoint in `Character`. Could do it using ICU4J, but not just the standard library.","body":"Hmm, don&#39;t see a way to get the East Asian Width property of a codepoint in <code>Character</code>. Could do it using ICU4J, but not just the standard library."},{"owner":{"account_id":16397024,"reputation":1,"user_id":11844224,"display_name":"Andrew"},"score":0,"creation_date":1645620360,"post_id":71228251,"comment_id":125919615,"body_markdown":"Some fonts are fixed width; most are not, which breaks ASCII art and table displays.  I like Courier New (on microsoft systems).","body":"Some fonts are fixed width; most are not, which breaks ASCII art and table displays.  I like Courier New (on microsoft systems)."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1645649489,"post_id":71228251,"comment_id":125931888,"body_markdown":"@skomisa Count the number of NUMBER SIGN characters in the fourth line of first two images. Youll find five more in the second image. That leads me to believe the issue is *not* about the width of rendered glyphs. I suspect their problem is in using the legacy `String#length` method that fails with characters beyond the [BMP](https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane).","body":"@skomisa Count the number of NUMBER SIGN characters in the fourth line of first two images. Youll find five more in the second image. That leads me to believe the issue is <i>not</i> about the width of rendered glyphs. I suspect their problem is in using the legacy <code>String#length</code> method that fails with characters beyond the <a href=\"https://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane\" rel=\"nofollow noreferrer\">BMP</a>."},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":1,"creation_date":1645822840,"post_id":71228251,"comment_id":125981022,"body_markdown":"[1] It would be helpful if you could state the font being used in each of your screen shots, since the font is very relevant. [2] It&#39;s a general convention here to embed screen shots within your question so that the reader does not have to click a link to view them. That would be especially useful in this case, where we want to compare screen output. [3] I tried to embed your images, but for some reason I was unable to upload them to SO, even though I can view them.","body":"[1] It would be helpful if you could state the font being used in each of your screen shots, since the font is very relevant. [2] It&#39;s a general convention here to embed screen shots within your question so that the reader does not have to click a link to view them. That would be especially useful in this case, where we want to compare screen output. [3] I tried to embed your images, but for some reason I was unable to upload them to SO, even though I can view them."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1645824347,"post_id":71228251,"comment_id":125981396,"body_markdown":"If your question is about font display width, why does the number of pound signs differ between screenshots? I have asked twice, but you have not explained. This Question is a confusing mess. Voted to close as unclear.","body":"If your question is about font display width, why does the number of pound signs differ between screenshots? I have asked twice, but you have not explained. This Question is a confusing mess. Voted to close as unclear."},{"owner":{"account_id":24345201,"reputation":31,"user_id":18281930,"display_name":"SeitWertz"},"score":0,"creation_date":1645831421,"post_id":71228251,"comment_id":125982942,"body_markdown":"@skomisa Sorry for the screenshots, SO did not allow me to include the screenshots. Also, the whole thing seems to be more difficult than thought, there seems to be no easy way to do what we want to do, which should work font-independent.","body":"@skomisa Sorry for the screenshots, SO did not allow me to include the screenshots. Also, the whole thing seems to be more difficult than thought, there seems to be no easy way to do what we want to do, which should work font-independent."},{"owner":{"account_id":24345201,"reputation":31,"user_id":18281930,"display_name":"SeitWertz"},"score":0,"creation_date":1645831891,"post_id":71228251,"comment_id":125983025,"body_markdown":"@BasilBourque It changes between screenshots because each screenshot shows the console of a different program. The programs use different fonts, which seems to lead to different widths, which in turn leads to the different shifts in the screenshots. Anyway, it seems that there is no easy way to solve the problem. thanks for the help!","body":"@BasilBourque It changes between screenshots because each screenshot shows the console of a different program. The programs use different fonts, which seems to lead to different widths, which in turn leads to the different shifts in the screenshots. Anyway, it seems that there is no easy way to solve the problem. thanks for the help!"},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1645833170,"post_id":71228251,"comment_id":125983221,"body_markdown":"Unfortunately I don&#39;t see how you can have a font-independent solution, because the choice of font is what determines the relative widths of the rendered characters, which in turn determines the (mis)alignment seen in your screen shots. (Of course that only applies when using Java, and you are writing to a terminal. The problem becomes simpler if you could use CSS/HTML, or Swing or JavaFX instead.)","body":"Unfortunately I don&#39;t see how you can have a font-independent solution, because the choice of font is what determines the relative widths of the rendered characters, which in turn determines the (mis)alignment seen in your screen shots. (Of course that only applies when using Java, and you are writing to a terminal. The problem becomes simpler if you could use CSS/HTML, or Swing or JavaFX instead.)"},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1645842943,"post_id":71228251,"comment_id":125984469,"body_markdown":"I found a solution that allows you to calculate widths for arbitrary strings, including emojis, for a given font without needing a GUI environment. I&#39;m still not convinced that it is a desirable path to go down, and it is (necessarily) a font-dependent solution, but the code required to calculate the width is fairly simple. See my second answer below.","body":"I found a solution that allows you to calculate widths for arbitrary strings, including emojis, for a given font without needing a GUI environment. I&#39;m still not convinced that it is a desirable path to go down, and it is (necessarily) a font-dependent solution, but the code required to calculate the width is fairly simple. See my second answer below."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1645649854,"creation_date":1645570164,"answer_id":71229291,"question_id":71228251,"body_markdown":"# tl;dr\r\n\r\nUse code points rather than `char`. Avoid calling `String#length`.\r\n\r\n    input \r\n    + \r\n    &quot;#&quot;.repeat( targetLength - input.codePoints().toArray().length ) \r\n\r\n\r\n\r\n# Details\r\n\r\nYour Question neglected to show any code. So I can only guess what you are doing and what might be the problem.\r\n\r\n# Avoid `char`\r\n\r\nI am guessing that your goal is to append a certain number of [NUMBER SIGN][1] characters as needed to make a fixed-length row of text. \r\n\r\nI am guessing the problem is that you are using the legacy `char` type, or its wrapper class `Character`. The `char` type has been essentially broken since Java 2. As a 16-bit value, `char` is physically incapable of representing most characters.\r\n\r\n# Use code point numbers\r\n\r\nInstead, use [code point][2] integer numbers when working with individual characters. A code point is the number permanently assigned to each of the over 140,000 [characters defined in Unicode][3].\r\n\r\nA variety of code point related methods have been added to various classes in Java 5+: [`String`][4], [`StringBuilder`][5], [`Character`][6], etc. \r\n\r\nHere we use [`String#codePoints`][7] to get an [`IntStream`][8] of code points, one element for each character in the source. And we use [`StringBuilder#appendCodePoint`][9] to collect the code points for our final result string.\r\n\r\n```java\r\nfinal int targetLength = 10;\r\nfinal int fillerCodePoint = &quot;#&quot;.codePointAt( 0 ); // Annoying zero-based index counting.\r\nString input = &quot;&#128567;&#129312;&#129313;&quot;;\r\n\r\nint[] codePoints = input.codePoints().toArray();\r\nStringBuilder stringBuilder = new StringBuilder();\r\nfor ( int index = 0 ; index &lt; targetLength ; index++ )\r\n{\r\n    if ( index &lt; codePoints.length )\r\n    {\r\n        stringBuilder.appendCodePoint( codePoints[ index ] );\r\n    } else\r\n    {\r\n        stringBuilder.appendCodePoint( fillerCodePoint );\r\n    }\r\n}\r\n```\r\n\r\nOr, shorten that `for` loop with the use of a [ternary operator][10].\r\n\r\n```java\r\nfor ( int index = 0 ; index &lt; targetLength ; index++ )\r\n{\r\n    int codePoint = ( index &lt; codePoints.length ) ? codePoints[ index ] : fillerCodePoint;\r\n    stringBuilder.appendCodePoint( codePoint );\r\n}\r\n```\r\n\r\nReport result.\r\n\r\n```java\r\nSystem.out.println( Arrays.toString( codePoints ) );\r\nString output = stringBuilder.toString();\r\nSystem.out.println( &quot;output = &quot; + output );\r\n```\r\n&gt;[128567, 129312, 129313]\r\n&gt;\r\n&gt;output = &#128567;&#129312;&#129313;#######\r\n\r\n\r\n----------\r\n\r\n\r\nThere is likely a clever way to write that code more briefly with streams and lambdas, but I cannot think of one at the moment.\r\n\r\nAnd, one could cleverly use the [`String#repeat`][11] method in Java 11+.\r\n\r\n    String output = input + &quot;#&quot;.repeat( targetLength - input.codePoints().toArray().length ) ;\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Number_sign\r\n  [2]: https://en.wikipedia.org/wiki/Code_point\r\n  [3]: https://en.wikipedia.org/wiki/List_of_Unicode_characters\r\n  [4]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html\r\n  [5]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/StringBuilder.html\r\n  [6]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Character.html\r\n  [7]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#codePoints()\r\n  [8]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/IntStream.html\r\n  [9]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/StringBuilder.html#appendCodePoint(int)\r\n  [10]: https://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html\r\n  [11]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#repeat(int)","title":"How can I determine the width of a Unicode character","body":"<h1>tl;dr</h1>\n<p>Use code points rather than <code>char</code>. Avoid calling <code>String#length</code>.</p>\n<pre><code>input \n+ \n&quot;#&quot;.repeat( targetLength - input.codePoints().toArray().length ) \n</code></pre>\n<h1>Details</h1>\n<p>Your Question neglected to show any code. So I can only guess what you are doing and what might be the problem.</p>\n<h1>Avoid <code>char</code></h1>\n<p>I am guessing that your goal is to append a certain number of <a href=\"https://en.wikipedia.org/wiki/Number_sign\" rel=\"nofollow noreferrer\">NUMBER SIGN</a> characters as needed to make a fixed-length row of text.</p>\n<p>I am guessing the problem is that you are using the legacy <code>char</code> type, or its wrapper class <code>Character</code>. The <code>char</code> type has been essentially broken since Java 2. As a 16-bit value, <code>char</code> is physically incapable of representing most characters.</p>\n<h1>Use code point numbers</h1>\n<p>Instead, use <a href=\"https://en.wikipedia.org/wiki/Code_point\" rel=\"nofollow noreferrer\">code point</a> integer numbers when working with individual characters. A code point is the number permanently assigned to each of the over 140,000 <a href=\"https://en.wikipedia.org/wiki/List_of_Unicode_characters\" rel=\"nofollow noreferrer\">characters defined in Unicode</a>.</p>\n<p>A variety of code point related methods have been added to various classes in Java 5+: <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html\" rel=\"nofollow noreferrer\"><code>String</code></a>, <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/StringBuilder.html\" rel=\"nofollow noreferrer\"><code>StringBuilder</code></a>, <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Character.html\" rel=\"nofollow noreferrer\"><code>Character</code></a>, etc.</p>\n<p>Here we use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#codePoints()\" rel=\"nofollow noreferrer\"><code>String#codePoints</code></a> to get an <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/IntStream.html\" rel=\"nofollow noreferrer\"><code>IntStream</code></a> of code points, one element for each character in the source. And we use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/StringBuilder.html#appendCodePoint(int)\" rel=\"nofollow noreferrer\"><code>StringBuilder#appendCodePoint</code></a> to collect the code points for our final result string.</p>\n<pre class=\"lang-java prettyprint-override\"><code>final int targetLength = 10;\nfinal int fillerCodePoint = &quot;#&quot;.codePointAt( 0 ); // Annoying zero-based index counting.\nString input = &quot;&quot;;\n\nint[] codePoints = input.codePoints().toArray();\nStringBuilder stringBuilder = new StringBuilder();\nfor ( int index = 0 ; index &lt; targetLength ; index++ )\n{\n    if ( index &lt; codePoints.length )\n    {\n        stringBuilder.appendCodePoint( codePoints[ index ] );\n    } else\n    {\n        stringBuilder.appendCodePoint( fillerCodePoint );\n    }\n}\n</code></pre>\n<p>Or, shorten that <code>for</code> loop with the use of a <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html\" rel=\"nofollow noreferrer\">ternary operator</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>for ( int index = 0 ; index &lt; targetLength ; index++ )\n{\n    int codePoint = ( index &lt; codePoints.length ) ? codePoints[ index ] : fillerCodePoint;\n    stringBuilder.appendCodePoint( codePoint );\n}\n</code></pre>\n<p>Report result.</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println( Arrays.toString( codePoints ) );\nString output = stringBuilder.toString();\nSystem.out.println( &quot;output = &quot; + output );\n</code></pre>\n<blockquote>\n<p>[128567, 129312, 129313]</p>\n<p>output = #######</p>\n</blockquote>\n<hr />\n<p>There is likely a clever way to write that code more briefly with streams and lambdas, but I cannot think of one at the moment.</p>\n<p>And, one could cleverly use the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#repeat(int)\" rel=\"nofollow noreferrer\"><code>String#repeat</code></a> method in Java 11+.</p>\n<pre><code>String output = input + &quot;#&quot;.repeat( targetLength - input.codePoints().toArray().length ) ;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1645822106,"creation_date":1645822106,"answer_id":71271572,"question_id":71228251,"body_markdown":"Unfortunately there is no easy solution to your deceptively simple question, for several reasons:\r\n\r\n\r\n- The width of the characters being rendered on the console might (and probably will) vary, based on the font being used. So the code would need to determine, or assume, the target font in order to calculate widths.\r\n\r\n- `System.out` is just a `PrintStream` that does not know or care about fonts and character width, so any solution has to be independent of that.\r\n\r\n- Even if you could determine the font being used on the console, and you had a way to determine the width of each character you were trying to render in that specific font, how would that help you? Knowing the variation in widths might conceivably allow you to cleverly tweak the lines being rendered so that they were aligned, but it&#39;s just as likely that it wouldn&#39;t be practicable.\r\n\r\n- A potential solution is to leave your code as it stands, and use a monospaced font on the console that `println()` is writing to, but there are still some major problems with that approach. First, you need to identify a font that is monospaced, but will also support all of the characters you want to render. This can be problematic when including emojis. Second, even if you identify such a font, you may find that all the glyphs for that font are not monospaced! Such a font will ensure that (say) a lowercase `i` and an uppercase `W` have the same width, but you can&#39;t also make that assumption for emojis, and you can&#39;t even assume that the &quot;monospaced&quot; emojis will all have the same non-standard width! Third, the font you identify (if it exists at all) would have to be available in your target environments (your PowerShell, your friend&#39;s PuTTY shell, etc.). That is not a major obstacle, but it is one more thing to worry about.\r\n\r\n- You may find that the rendered text varies by operating system. Your output may look aligned in a Linux terminal window, but that same output, using the same font, might be misaligned in a PowerShell window.\r\n\r\nGiven all that, a better approach might be to use Swing or JavaFX, where you have finer control over the output being rendered. Even if you are unfamiliar with those technologies, it wouldn&#39;t take too long to get something working, just by tweaking some sample code obtained through a search. And even allowing for the learning curve, it would still take less time than coming up with a robust solution for aligning arbitrary characters written to an arbitrary console, because that is a hard problem to solve.\r\n\r\nNotes:\r\n- Your `real_length()` method is merely returning the number of code points in the supplied Java `String`. That relates to its internal representation, and has no direct correlation with the width of the rendered characters, which is determined by the font being used.\r\n- See [Emoji exceed monospace character width, breaking column alignment #100730](https://github.com/microsoft/vscode/issues/100730) where Microsoft have declined to address the issue for VS Code.\r\n- For SO question [Java: how to align UTF Miscellaneous Symbols in plain text](https://stackoverflow.com/q/69700203/2985643), see [this answer](https://stackoverflow.com/a/69761059/2985643) which solved a similar but simpler problem, but only for the Command Prompt window on Windows.\r\n\r\n\r\n","title":"How can I determine the width of a Unicode character","body":"<p>Unfortunately there is no easy solution to your deceptively simple question, for several reasons:</p>\n<ul>\n<li><p>The width of the characters being rendered on the console might (and probably will) vary, based on the font being used. So the code would need to determine, or assume, the target font in order to calculate widths.</p>\n</li>\n<li><p><code>System.out</code> is just a <code>PrintStream</code> that does not know or care about fonts and character width, so any solution has to be independent of that.</p>\n</li>\n<li><p>Even if you could determine the font being used on the console, and you had a way to determine the width of each character you were trying to render in that specific font, how would that help you? Knowing the variation in widths might conceivably allow you to cleverly tweak the lines being rendered so that they were aligned, but it's just as likely that it wouldn't be practicable.</p>\n</li>\n<li><p>A potential solution is to leave your code as it stands, and use a monospaced font on the console that <code>println()</code> is writing to, but there are still some major problems with that approach. First, you need to identify a font that is monospaced, but will also support all of the characters you want to render. This can be problematic when including emojis. Second, even if you identify such a font, you may find that all the glyphs for that font are not monospaced! Such a font will ensure that (say) a lowercase <code>i</code> and an uppercase <code>W</code> have the same width, but you can't also make that assumption for emojis, and you can't even assume that the &quot;monospaced&quot; emojis will all have the same non-standard width! Third, the font you identify (if it exists at all) would have to be available in your target environments (your PowerShell, your friend's PuTTY shell, etc.). That is not a major obstacle, but it is one more thing to worry about.</p>\n</li>\n<li><p>You may find that the rendered text varies by operating system. Your output may look aligned in a Linux terminal window, but that same output, using the same font, might be misaligned in a PowerShell window.</p>\n</li>\n</ul>\n<p>Given all that, a better approach might be to use Swing or JavaFX, where you have finer control over the output being rendered. Even if you are unfamiliar with those technologies, it wouldn't take too long to get something working, just by tweaking some sample code obtained through a search. And even allowing for the learning curve, it would still take less time than coming up with a robust solution for aligning arbitrary characters written to an arbitrary console, because that is a hard problem to solve.</p>\n<p>Notes:</p>\n<ul>\n<li>Your <code>real_length()</code> method is merely returning the number of code points in the supplied Java <code>String</code>. That relates to its internal representation, and has no direct correlation with the width of the rendered characters, which is determined by the font being used.</li>\n<li>See <a href=\"https://github.com/microsoft/vscode/issues/100730\" rel=\"nofollow noreferrer\">Emoji exceed monospace character width, breaking column alignment #100730</a> where Microsoft have declined to address the issue for VS Code.</li>\n<li>For SO question <a href=\"https://stackoverflow.com/q/69700203/2985643\">Java: how to align UTF Miscellaneous Symbols in plain text</a>, see <a href=\"https://stackoverflow.com/a/69761059/2985643\">this answer</a> which solved a similar but simpler problem, but only for the Command Prompt window on Windows.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1645842566,"creation_date":1645842566,"answer_id":71273638,"question_id":71228251,"body_markdown":"Note: This answer is distinct and qualitatively different from my earlier one (which I still stand by).\r\n\r\nThere is a simple way for a Java application (i.e. one not using a graphical user interface) to obtain the width of a String being rendered in a given font with a given font size. It requires the use of some **awt** classes which are supported even in a non-AWT environment. Here&#39;s a demo using the data provided in the question:\r\n\r\n    package fixedwidth;\r\n    \r\n    import java.awt.Canvas;\r\n    import java.awt.Font;\r\n    import java.awt.FontMetrics;\r\n    \r\n    public class FixedWidth {\r\n    \r\n        static String[] tests = {\r\n            &quot;Peter&quot;, &quot;&quot;, &quot;Marcel 1&quot;, &quot;&#128143;&quot;, &quot;&#128104;&#128104;&quot;, &quot;&#128105;&#128139;&#128105;&quot;, &quot;&#128104;&#128105;&#128102;&quot;\r\n        };\r\n        static Font smallFont = new Font(&quot;Monospaced&quot;, Font.PLAIN, 10);\r\n        static Font bigFont = new Font(&quot;Monospaced&quot;, Font.BOLD, 24);\r\n    \r\n        /**\r\n         * This code is based on an answer by SO user Lonzak. \r\n         * See SO Answer https://stackoverflow.com/a/18123024/2985643\r\n         */\r\n        public static void main(String[] args) {\r\n            FontMetrics fm1 = new Canvas().getFontMetrics(FixedWidth.smallFont);\r\n            FixedWidth.demo(tests, fm1);\r\n    \r\n            FontMetrics fm2 = new Canvas().getFontMetrics(FixedWidth.bigFont);\r\n            FixedWidth.demo(tests, fm2);\r\n        }\r\n    \r\n        static void demo(String[] tests, FontMetrics fm) {\r\n            Font f = fm.getFont();\r\n            System.out.println(&quot;\\nFont name:&quot; + f.getName() + &quot;, font size:&quot; + \r\n                    f.getSize() + &quot;, font style:&quot; + f.getStyle());\r\n            for (String test : tests) {\r\n                int width = fm.stringWidth(test);\r\n                System.out.println(&quot;width=&quot; + width + &quot;, data=&quot; + test);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nThe code above is based on [this old answer by user Lonzak](https://stackoverflow.com/a/18123024/2985643) to the question [Java - FontMetrics without Graphics](https://stackoverflow.com/questions/2843601/java-fontmetrics-without-graphics). Those AWT classes allow you to create a `Font` with defined characteristics (i.e. name, size, style), and then use a `FontMetrics` instance to obtain the width of an arbitrary String when using that font. \r\n\r\nHere is the output from running the code shown above:\r\n\r\n\r\n    Font name:Monospaced, font size:10, font style:0\r\n    width=30, data=Peter\r\n    width=60, data=\r\n    width=59, data=Marcel 1\r\n    width=10, data=&#128143;\r\n    width=30, data=&#128104;&#128104;\r\n    width=40, data=&#128105;&#128139;&#128105;\r\n    width=30, data=&#128104;&#128105;&#128102;\r\n    \r\n    Font name:Monospaced, font size:24, font style:1\r\n    width=70, data=Peter\r\n    width=149, data=\r\n    width=140, data=Marcel 1\r\n    width=25, data=&#128143;\r\n    width=73, data=&#128104;&#128104;\r\n    width=98, data=&#128105;&#128139;&#128105;\r\n    width=74, data=&#128104;&#128105;&#128102;\r\n\r\nNotes:\r\n\r\n- The first set of results shows the widths of the sample data in the question when using plain Monospaced 10 point font. The second set of results shows the widths of those same strings when using bold Monospaced 24 point font.\r\n- The widths don&#39;t look correct for some of the emojis, but that is because when the source code and output results are pasted into SO some emoji representations are changed, presumably because of the different font being used in the browser. (I was using _Monospaced_ for both the source and the output.) Here&#39;s a screen shot of the original output, showing that the widths at least look plausible:\r\n\r\n  [![IDEoutput][1]][1]\r\n- Even though the widths are being calculated and rendered for a fixed width font (_Monospaced_), it&#39;s clear that the width of the emojis cannot be predicted from the widths of normal keyboard characters.\r\n\r\n  [1]: https://i.stack.imgur.com/ytcqJ.png","title":"How can I determine the width of a Unicode character","body":"<p>Note: This answer is distinct and qualitatively different from my earlier one (which I still stand by).</p>\n<p>There is a simple way for a Java application (i.e. one not using a graphical user interface) to obtain the width of a String being rendered in a given font with a given font size. It requires the use of some <strong>awt</strong> classes which are supported even in a non-AWT environment. Here's a demo using the data provided in the question:</p>\n<pre><code>package fixedwidth;\n\nimport java.awt.Canvas;\nimport java.awt.Font;\nimport java.awt.FontMetrics;\n\npublic class FixedWidth {\n\n    static String[] tests = {\n        &quot;Peter&quot;, &quot;&quot;, &quot;Marcel 1&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;\n    };\n    static Font smallFont = new Font(&quot;Monospaced&quot;, Font.PLAIN, 10);\n    static Font bigFont = new Font(&quot;Monospaced&quot;, Font.BOLD, 24);\n\n    /**\n     * This code is based on an answer by SO user Lonzak. \n     * See SO Answer https://stackoverflow.com/a/18123024/2985643\n     */\n    public static void main(String[] args) {\n        FontMetrics fm1 = new Canvas().getFontMetrics(FixedWidth.smallFont);\n        FixedWidth.demo(tests, fm1);\n\n        FontMetrics fm2 = new Canvas().getFontMetrics(FixedWidth.bigFont);\n        FixedWidth.demo(tests, fm2);\n    }\n\n    static void demo(String[] tests, FontMetrics fm) {\n        Font f = fm.getFont();\n        System.out.println(&quot;\\nFont name:&quot; + f.getName() + &quot;, font size:&quot; + \n                f.getSize() + &quot;, font style:&quot; + f.getStyle());\n        for (String test : tests) {\n            int width = fm.stringWidth(test);\n            System.out.println(&quot;width=&quot; + width + &quot;, data=&quot; + test);\n        }\n    }\n}\n</code></pre>\n<p>The code above is based on <a href=\"https://stackoverflow.com/a/18123024/2985643\">this old answer by user Lonzak</a> to the question <a href=\"https://stackoverflow.com/questions/2843601/java-fontmetrics-without-graphics\">Java - FontMetrics without Graphics</a>. Those AWT classes allow you to create a <code>Font</code> with defined characteristics (i.e. name, size, style), and then use a <code>FontMetrics</code> instance to obtain the width of an arbitrary String when using that font.</p>\n<p>Here is the output from running the code shown above:</p>\n<pre><code>Font name:Monospaced, font size:10, font style:0\nwidth=30, data=Peter\nwidth=60, data=\nwidth=59, data=Marcel 1\nwidth=10, data=\nwidth=30, data=\nwidth=40, data=\nwidth=30, data=\n\nFont name:Monospaced, font size:24, font style:1\nwidth=70, data=Peter\nwidth=149, data=\nwidth=140, data=Marcel 1\nwidth=25, data=\nwidth=73, data=\nwidth=98, data=\nwidth=74, data=\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li><p>The first set of results shows the widths of the sample data in the question when using plain Monospaced 10 point font. The second set of results shows the widths of those same strings when using bold Monospaced 24 point font.</p>\n</li>\n<li><p>The widths don't look correct for some of the emojis, but that is because when the source code and output results are pasted into SO some emoji representations are changed, presumably because of the different font being used in the browser. (I was using <em>Monospaced</em> for both the source and the output.) Here's a screen shot of the original output, showing that the widths at least look plausible:</p>\n<p><a href=\"https://i.stack.imgur.com/ytcqJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ytcqJ.png\" alt=\"IDEoutput\" /></a></p>\n</li>\n<li><p>Even though the widths are being calculated and rendered for a fixed width font (<em>Monospaced</em>), it's clear that the width of the emojis cannot be predicted from the widths of normal keyboard characters.</p>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":154127,"reputation":518,"user_id":369849,"accept_rate":83,"display_name":"Peter"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1657943489,"creation_date":1657931577,"answer_id":73000734,"question_id":71228251,"body_markdown":"Sounds like you&#39;re looking for a Java implementation of the POSIX [`wcwidth`][1] and [`wcswidth`][2] functions, which implement the rules defined in [Unicode Technical Report #11][3] (which exclusively focuses on display widths for Unicode codepoints when rendered to fixed width devices - terminals and the like).  The only such Java implementation that I&#39;m aware of is in the [JLine3 library][4], which is a lot of code to bring in for just this one class, but that may be your best bet.\r\n\r\nNote however that that code *appears* to be incomplete.  Unicode codepoint 0x26AA (), for example, is reported as having a width of 1 by the JLine3 code, but on every platform I&#39;ve tested on (including here in the StackOverflow editor, which is a fixed width &quot;device&quot;) that codepoint is displayed over two columns.\r\n\r\nGood luck - this stuff is a lot more complex than it looks.  The JVM&#39;s unfortunate UCS-2 history (not Sun&#39;s fault - it was bad timing wrt the Unicode standard) only makes matters worse, and as others have said here, **avoid the `char` and `Character` data types like the plague** - they do not work the way you expect, and the instant code that uses those types encounters data including codepoints from the Unicode supplemental planes, it is almost certain to function incorrectly (unless the author has been especially careful - do you feel lucky? &#128521;).\r\n\r\n\r\n  [1]: https://man7.org/linux/man-pages/man3/wcwidth.3.html\r\n  [2]: https://man7.org/linux/man-pages/man3/wcswidth.3.html\r\n  [3]: https://www.unicode.org/reports/tr11/\r\n  [4]: https://github.com/jline/jline3/blob/master/terminal/src/main/java/org/jline/utils/WCWidth.java","title":"How can I determine the width of a Unicode character","body":"<p>Sounds like you're looking for a Java implementation of the POSIX <a href=\"https://man7.org/linux/man-pages/man3/wcwidth.3.html\" rel=\"nofollow noreferrer\"><code>wcwidth</code></a> and <a href=\"https://man7.org/linux/man-pages/man3/wcswidth.3.html\" rel=\"nofollow noreferrer\"><code>wcswidth</code></a> functions, which implement the rules defined in <a href=\"https://www.unicode.org/reports/tr11/\" rel=\"nofollow noreferrer\">Unicode Technical Report #11</a> (which exclusively focuses on display widths for Unicode codepoints when rendered to fixed width devices - terminals and the like).  The only such Java implementation that I'm aware of is in the <a href=\"https://github.com/jline/jline3/blob/master/terminal/src/main/java/org/jline/utils/WCWidth.java\" rel=\"nofollow noreferrer\">JLine3 library</a>, which is a lot of code to bring in for just this one class, but that may be your best bet.</p>\n<p>Note however that that code <em>appears</em> to be incomplete.  Unicode codepoint 0x26AA (), for example, is reported as having a width of 1 by the JLine3 code, but on every platform I've tested on (including here in the StackOverflow editor, which is a fixed width &quot;device&quot;) that codepoint is displayed over two columns.</p>\n<p>Good luck - this stuff is a lot more complex than it looks.  The JVM's unfortunate UCS-2 history (not Sun's fault - it was bad timing wrt the Unicode standard) only makes matters worse, and as others have said here, <strong>avoid the <code>char</code> and <code>Character</code> data types like the plague</strong> - they do not work the way you expect, and the instant code that uses those types encounters data including codepoints from the Unicode supplemental planes, it is almost certain to function incorrectly (unless the author has been especially careful - do you feel lucky? ).</p>\n"}],"owner":{"account_id":24345201,"reputation":31,"user_id":18281930,"display_name":"SeitWertz"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1710,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":4,"score":2,"last_activity_date":1657943489,"creation_date":1645563791,"question_id":71228251,"body_markdown":"me and a friend are programming our own console in java, but we have Problems to adjust the lines correctly, because of the width of the unicode characters which can not be determined exactly. This leads to the problem that not only the line of the unicode, but also following lines are shifted.\r\n\r\nIs there a way to determine the width of the unicodes?\r\n\r\nScreenshots of the problem can be found bellow.\r\n\r\nThis is how it should look: https://abload.de/img/richtigslkmg.jpeg\r\n\r\nThis is an example in Terminal: https://abload.de/img/terminal7dj5o.jpeg\r\n\r\nThis is an example in PowerShell: https://abload.de/img/powershelln7je0.jpeg\r\n\r\nThis is an example in Visual Studio Code: https://abload.de/img/visualstudiocode4xkuo.jpeg\r\n\r\nThis is an example in Putty: https://abload.de/img/putty0ujsk.png\r\n\r\n\r\nEDIT:\r\n\r\nI am sorry that the question was unclear.\r\n\r\nIt is about the display width, in the example I try to determine the display length to have each line the same length.\r\nThe function real_length is to calculate/determine and return the display width.\r\n\r\nhere the example code:\r\n\r\n    public static void main(String[] args) {\r\n        String[] tests = {\r\n            &quot;Peter&quot;,\r\n            &quot;&quot;,\r\n            &quot;Marcel 1&quot;,\r\n            &quot;&#128143;&quot;,\r\n            &quot;&#128104;&#128104;&quot;,\r\n            &quot;&#128105;&#128139;&#128105;&quot;,\r\n            &quot;&#128104;&#128105;&#128102;&quot;\r\n        };\r\n        for(String test : tests) test(test);\r\n    }\r\n\r\n    public static void test(String text) {\r\n        int max = 20;\r\n        for(int i = 0; i &lt; max;i++) System.out.print(&quot;#&quot;);\r\n        System.out.println();\r\n        System.out.print(text);\r\n        int length = real_length(text);\r\n        for(int i = 0; i &lt; max - length;i++) System.out.print(&quot;#&quot;);\r\n        System.out.println();\r\n    }\r\n\r\n    public static int real_length(String text) {\r\n        return text.length();\r\n    }","title":"How can I determine the width of a Unicode character","body":"<p>me and a friend are programming our own console in java, but we have Problems to adjust the lines correctly, because of the width of the unicode characters which can not be determined exactly. This leads to the problem that not only the line of the unicode, but also following lines are shifted.</p>\n<p>Is there a way to determine the width of the unicodes?</p>\n<p>Screenshots of the problem can be found bellow.</p>\n<p>This is how it should look: <a href=\"https://abload.de/img/richtigslkmg.jpeg\" rel=\"nofollow noreferrer\">https://abload.de/img/richtigslkmg.jpeg</a></p>\n<p>This is an example in Terminal: <a href=\"https://abload.de/img/terminal7dj5o.jpeg\" rel=\"nofollow noreferrer\">https://abload.de/img/terminal7dj5o.jpeg</a></p>\n<p>This is an example in PowerShell: <a href=\"https://abload.de/img/powershelln7je0.jpeg\" rel=\"nofollow noreferrer\">https://abload.de/img/powershelln7je0.jpeg</a></p>\n<p>This is an example in Visual Studio Code: <a href=\"https://abload.de/img/visualstudiocode4xkuo.jpeg\" rel=\"nofollow noreferrer\">https://abload.de/img/visualstudiocode4xkuo.jpeg</a></p>\n<p>This is an example in Putty: <a href=\"https://abload.de/img/putty0ujsk.png\" rel=\"nofollow noreferrer\">https://abload.de/img/putty0ujsk.png</a></p>\n<p>EDIT:</p>\n<p>I am sorry that the question was unclear.</p>\n<p>It is about the display width, in the example I try to determine the display length to have each line the same length.\nThe function real_length is to calculate/determine and return the display width.</p>\n<p>here the example code:</p>\n<pre><code>public static void main(String[] args) {\n    String[] tests = {\n        &quot;Peter&quot;,\n        &quot;&quot;,\n        &quot;Marcel 1&quot;,\n        &quot;&quot;,\n        &quot;&quot;,\n        &quot;&quot;,\n        &quot;&quot;\n    };\n    for(String test : tests) test(test);\n}\n\npublic static void test(String text) {\n    int max = 20;\n    for(int i = 0; i &lt; max;i++) System.out.print(&quot;#&quot;);\n    System.out.println();\n    System.out.print(text);\n    int length = real_length(text);\n    for(int i = 0; i &lt; max - length;i++) System.out.print(&quot;#&quot;);\n    System.out.println();\n}\n\npublic static int real_length(String text) {\n    return text.length();\n}\n</code></pre>\n"},{"tags":["java","firebase","javahelp","sketchware"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1657692477,"post_id":72959736,"comment_id":128867908,"body_markdown":"At which particular line of code does the error occur?","body":"At which particular line of code does the error occur?"},{"owner":{"account_id":25794714,"reputation":1,"user_id":19538115,"display_name":"Steven Kollar"},"score":0,"creation_date":1657940255,"post_id":72959736,"comment_id":128935205,"body_markdown":"@AlexMamo It looks like this line is causing the issue. if ((Double.parseDouble(latest) == Double.parseDouble(your_version)) || (Double.parseDouble(latest) &lt; Double.parseDouble(your_version))) (sorry for late response didn&#39;t know pinging was a thing)","body":"@AlexMamo It looks like this line is causing the issue. if ((Double.parseDouble(latest) == Double.parseDouble(your_version)) || (Double.parseDouble(latest) &lt; Double.parseDouble(your_version))) (sorry for late response didn&#39;t know pinging was a thing)"}],"owner":{"account_id":25794714,"reputation":1,"user_id":19538115,"display_name":"Steven Kollar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1657940138,"creation_date":1657672930,"question_id":72959736,"body_markdown":"So I have a app that is supposed to read and write data to googles firebase and its been working well for the past few years.\r\n\r\nHowever a few days ago I wanted to update the app again so I finished my update and ran it but everytime I did something firebase related the app would crash with this error:\r\n\r\n    Invalid toNumber block operation\r\n    : empty String\r\n    \r\n    Detailed error message:\r\n    java.lang.NumberFormatException: empty String\r\n    \tat sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1842)\r\n    \tat sun.misc.FloatingDecimal.parseDouble(FloatingDecimal.java:110)\r\n    \tat java.lang.Double.parseDouble(Double.java:538)\r\n    \tat com.Bryan.K.SK.HomePageActivity$8.onClick(HomePageActivity.java:322)\r\n    \tat android.view.View.performClick(View.java:7792)\r\n    \tat android.view.View.performClickInternal(View.java:7769)\r\n    \tat android.view.View.access$3800(View.java:910)\r\n    \tat android.view.View$PerformClick.run(View.java:30218)\r\n    \tat android.os.Handler.handleCallback(Handler.java:938)\r\n    \tat android.os.Handler.dispatchMessage(Handler.java:99)\r\n    \tat android.os.Looper.loopOnce(Looper.java:226)\r\n    \tat android.os.Looper.loop(Looper.java:313)\r\n    \tat android.app.ActivityThread.main(ActivityThread.java:8669)\r\n    \tat java.lang.reflect.Method.invoke(Native Method)\r\n    \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:571)\r\n    \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1135)\r\n\r\nIt seems to be a empty firebase value issue I checked firebase and it was not empty and firebases rules are both true for read and write.\r\n\r\nNo matter what I do I can not figure this out since it worked just fine earlier. I should mention I am using a mobile app called sketchware to create this app.\r\n\r\nWhat I click that crashes the app:\r\n\r\n    if (!connected) {\r\n    \tNo_Int.setTitle(&quot;No Connection&quot;);\r\n    \tNo_Int.setMessage(&quot;You do not have internet access. This page is only available through internet.&quot;);\r\n    \tNo_Int.setPositiveButton(&quot;Ok&quot;, new DialogInterface.OnClickListener() {\r\n    \t\t@Override\r\n    \t\tpublic void onClick(DialogInterface _dialog, int _which) {\r\n    \t\t\t\r\n    \t\t}\r\n    \t});\r\n    \tNo_Int.create().show();\r\n    }\r\n    else {\r\n    \tif ((Double.parseDouble(latest) == Double.parseDouble(your_version)) || (Double.parseDouble(latest) &lt; Double.parseDouble(your_version))) {\r\n    \t\tNewD.setTitle(&quot;Whats New:&quot;);\r\n    \t\tNewD.setMessage(wnew);\r\n    \t\tNewD.setPositiveButton(&quot;Thanks!&quot;, new DialogInterface.OnClickListener() {\r\n    \t\t\t@Override\r\n    \t\t\tpublic void onClick(DialogInterface _dialog, int _which) {\r\n    \t\t\t\t\r\n    \t\t\t}\r\n    \t\t});\r\n    \t\tNewD.setCancelable(false);\r\n    \t\tNewD.create().show();\r\n    \t}\r\n    \telse {\r\n    \t\tNewD.setTitle(&quot;Not latest Version&quot;);\r\n    \t\tNewD.setMessage(&quot;Your app is not updated to the latest version.&quot;);\r\n    \t\tNewD.setPositiveButton(&quot;Ok&quot;, new DialogInterface.OnClickListener() {\r\n    \t\t\t@Override\r\n    \t\t\tpublic void onClick(DialogInterface _dialog, int _which) {\r\n    \t\t\t\t\r\n    \t\t\t}\r\n    \t\t});\r\n    \t\tNewD.setCancelable(false);\r\n    \t\tNewD.create().show();\r\n    \t}\r\n    }\r\n\r\nThe line that is supposed to get the latest version value from firebase but dosent:\r\n\r\n    latest = NewMap.get((int)0).get(&quot;Latest-V&quot;).toString();\r\n\r\nThanks in advance.\r\n\r\n","title":"App can no longer recieve data from firebase when i try to update it","body":"<p>So I have a app that is supposed to read and write data to googles firebase and its been working well for the past few years.</p>\n<p>However a few days ago I wanted to update the app again so I finished my update and ran it but everytime I did something firebase related the app would crash with this error:</p>\n<pre><code>Invalid toNumber block operation\n: empty String\n\nDetailed error message:\njava.lang.NumberFormatException: empty String\n    at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1842)\n    at sun.misc.FloatingDecimal.parseDouble(FloatingDecimal.java:110)\n    at java.lang.Double.parseDouble(Double.java:538)\n    at com.Bryan.K.SK.HomePageActivity$8.onClick(HomePageActivity.java:322)\n    at android.view.View.performClick(View.java:7792)\n    at android.view.View.performClickInternal(View.java:7769)\n    at android.view.View.access$3800(View.java:910)\n    at android.view.View$PerformClick.run(View.java:30218)\n    at android.os.Handler.handleCallback(Handler.java:938)\n    at android.os.Handler.dispatchMessage(Handler.java:99)\n    at android.os.Looper.loopOnce(Looper.java:226)\n    at android.os.Looper.loop(Looper.java:313)\n    at android.app.ActivityThread.main(ActivityThread.java:8669)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:571)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1135)\n</code></pre>\n<p>It seems to be a empty firebase value issue I checked firebase and it was not empty and firebases rules are both true for read and write.</p>\n<p>No matter what I do I can not figure this out since it worked just fine earlier. I should mention I am using a mobile app called sketchware to create this app.</p>\n<p>What I click that crashes the app:</p>\n<pre><code>if (!connected) {\n    No_Int.setTitle(&quot;No Connection&quot;);\n    No_Int.setMessage(&quot;You do not have internet access. This page is only available through internet.&quot;);\n    No_Int.setPositiveButton(&quot;Ok&quot;, new DialogInterface.OnClickListener() {\n        @Override\n        public void onClick(DialogInterface _dialog, int _which) {\n            \n        }\n    });\n    No_Int.create().show();\n}\nelse {\n    if ((Double.parseDouble(latest) == Double.parseDouble(your_version)) || (Double.parseDouble(latest) &lt; Double.parseDouble(your_version))) {\n        NewD.setTitle(&quot;Whats New:&quot;);\n        NewD.setMessage(wnew);\n        NewD.setPositiveButton(&quot;Thanks!&quot;, new DialogInterface.OnClickListener() {\n            @Override\n            public void onClick(DialogInterface _dialog, int _which) {\n                \n            }\n        });\n        NewD.setCancelable(false);\n        NewD.create().show();\n    }\n    else {\n        NewD.setTitle(&quot;Not latest Version&quot;);\n        NewD.setMessage(&quot;Your app is not updated to the latest version.&quot;);\n        NewD.setPositiveButton(&quot;Ok&quot;, new DialogInterface.OnClickListener() {\n            @Override\n            public void onClick(DialogInterface _dialog, int _which) {\n                \n            }\n        });\n        NewD.setCancelable(false);\n        NewD.create().show();\n    }\n}\n</code></pre>\n<p>The line that is supposed to get the latest version value from firebase but dosent:</p>\n<pre><code>latest = NewMap.get((int)0).get(&quot;Latest-V&quot;).toString();\n</code></pre>\n<p>Thanks in advance.</p>\n"},{"tags":["java","assembly","static-analysis","java-bytecode-asm"],"answers":[{"tags":[],"owner":{"account_id":36759,"reputation":38034,"user_id":104950,"accept_rate":93,"display_name":"Amir Afghani"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1274288156,"creation_date":1274288156,"answer_id":2867671,"question_id":2866805,"body_markdown":"I think this is because Interface methods do not have a method body.  Try writing an empty method as part of a &#39;normal&#39; class and see if visitMethodInsn is invoked.\r\n\r\nBy the way, have you considered using java.lang.instrument to discover the classes that are loaded at runtime and do your instrumentation that way, rather than reading the class files from disk?","title":"Can ASM method-visitors be used with interfaces?","body":"<p>I think this is because Interface methods do not have a method body.  Try writing an empty method as part of a 'normal' class and see if visitMethodInsn is invoked.</p>\n\n<p>By the way, have you considered using java.lang.instrument to discover the classes that are loaded at runtime and do your instrumentation that way, rather than reading the class files from disk?</p>\n"},{"tags":[],"owner":{"account_id":139444,"reputation":151,"user_id":345044,"display_name":"Olaf Mertens"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1274354168,"creation_date":1274354168,"answer_id":2873122,"question_id":2866805,"body_markdown":"**I have to admit, I was confused...**\r\n\r\nI thought that asm visitors do some magic to give me the list of all callers of\r\na given method, like a stacktrace. Instead they justs parse classes and method\r\nbodies. Fortunatly, this is totally sufficent for my needs as I can build the\r\ncall tree by myself.\r\n\r\nThe following code lists all methods that are called by other methods, checking class files in given directory (and subdirectories) only:\r\n\r\n----------\r\n\r\n    import java.io.*;\r\n    import java.util.*;\r\n    \r\n    import org.objectweb.asm.ClassReader;\r\n    \r\n    public class Test {\r\n    \r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \r\n    \t\tFile dir = new File(args[0]);\r\n    \r\n    \t\tMap&lt;String, Set&lt;String&gt;&gt; callMap = new HashMap&lt;String, Set&lt;String&gt;&gt;();\r\n    \r\n    \t\tList&lt;File&gt; classFiles = new LinkedList&lt;File&gt;();\r\n    \t\tfindClassFiles(classFiles, dir);\r\n    \r\n    \t\tfor (File classFile : classFiles) {\r\n    \t\t\tInputStream input = new FileInputStream(classFile);\r\n    \t\t\tnew ClassReader(input).accept(new MyClassVisitor(callMap), 0);\r\n    \t\t\tinput.close();\r\n    \t\t}\r\n    \r\n    \t\tfor (Map.Entry&lt;String, Set&lt;String&gt;&gt; entry : callMap.entrySet()) {\r\n    \t\t\tString method = entry.getKey();\r\n    \t\t\tSet&lt;String&gt; callers = entry.getValue();\r\n    \r\n    \t\t\tif (callers != null &amp;&amp; !callers.isEmpty()) {\r\n    \t\t\t\tSystem.out.println(method);\r\n    \t\t\t\tfor (String caller : callers) {\r\n    \t\t\t\t\tSystem.out.println(&quot;    &quot; + caller);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprivate static void findClassFiles(List&lt;File&gt; list, File dir) {\r\n    \t\tfor (File file : dir.listFiles()) {\r\n    \t\t\tif (file.isDirectory()) {\r\n    \t\t\t\tfindClassFiles(list, file);\r\n    \t\t\t} else if (file.getName().endsWith(&quot;.class&quot;)) {\r\n    \t\t\t\tlist.add(file);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n----------\r\n\r\n    import java.util.*;\r\n    \r\n    import org.objectweb.asm.MethodVisitor;\r\n    import org.objectweb.asm.commons.EmptyVisitor;\r\n    \r\n    public class MyClassVisitor extends EmptyVisitor {\r\n    \r\n    \tprivate String className;\r\n    \tprivate Map&lt;String, Set&lt;String&gt;&gt; callMap;\r\n    \r\n    \tpublic MyClassVisitor(Map&lt;String, Set&lt;String&gt;&gt; callMap) {\r\n    \t\tthis.callMap = callMap;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void visit(int version, int access, String name, String signature,\r\n    \t\t\tString superName, String[] interfaces) {\r\n    \t\tthis.className = name;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic MethodVisitor visitMethod(int access, String name, String desc,\r\n    \t\t\tString signature, String[] exceptions) {\r\n    \r\n    \t\treturn new MyMethodVisitor(className + &quot;.&quot; + name, callMap);\r\n    \t}\r\n    }\r\n\r\n----------\r\n\r\n    import java.util.*;\r\n    \r\n    import org.objectweb.asm.commons.EmptyVisitor;\r\n    \r\n    public class MyMethodVisitor extends EmptyVisitor {\r\n    \r\n    \tprivate String currentMethod;\r\n    \tprivate Map&lt;String, Set&lt;String&gt;&gt; callMap;\r\n    \r\n    \tpublic MyMethodVisitor(String currentMethod,\r\n    \t\t\tMap&lt;String, Set&lt;String&gt;&gt; callMap) {\r\n    \t\tthis.currentMethod = currentMethod;\r\n    \t\tthis.callMap = callMap;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void visitMethodInsn(int opcode, String owner, String name,\r\n    \t\t\tString desc) {\r\n    \r\n    \t\tString calledMethod = owner + &quot;.&quot; + name;\r\n    \t\t\r\n    \t\tSet&lt;String&gt; callers = callMap.get(calledMethod);\r\n    \t\tif (callers == null) {\r\n    \t\t\tcallers = new TreeSet&lt;String&gt;();\r\n    \t\t\tcallMap.put(calledMethod, callers);\r\n    \t\t}\r\n    \t\t\r\n    \t\tcallers.add(currentMethod);\r\n    \t}\r\n    }\r\n\r\n","title":"Can ASM method-visitors be used with interfaces?","body":"<p><strong>I have to admit, I was confused...</strong></p>\n\n<p>I thought that asm visitors do some magic to give me the list of all callers of\na given method, like a stacktrace. Instead they justs parse classes and method\nbodies. Fortunatly, this is totally sufficent for my needs as I can build the\ncall tree by myself.</p>\n\n<p>The following code lists all methods that are called by other methods, checking class files in given directory (and subdirectories) only:</p>\n\n<hr>\n\n<pre><code>import java.io.*;\nimport java.util.*;\n\nimport org.objectweb.asm.ClassReader;\n\npublic class Test {\n\n    public static void main(String[] args) throws Exception {\n\n        File dir = new File(args[0]);\n\n        Map&lt;String, Set&lt;String&gt;&gt; callMap = new HashMap&lt;String, Set&lt;String&gt;&gt;();\n\n        List&lt;File&gt; classFiles = new LinkedList&lt;File&gt;();\n        findClassFiles(classFiles, dir);\n\n        for (File classFile : classFiles) {\n            InputStream input = new FileInputStream(classFile);\n            new ClassReader(input).accept(new MyClassVisitor(callMap), 0);\n            input.close();\n        }\n\n        for (Map.Entry&lt;String, Set&lt;String&gt;&gt; entry : callMap.entrySet()) {\n            String method = entry.getKey();\n            Set&lt;String&gt; callers = entry.getValue();\n\n            if (callers != null &amp;&amp; !callers.isEmpty()) {\n                System.out.println(method);\n                for (String caller : callers) {\n                    System.out.println(\"    \" + caller);\n                }\n            }\n        }\n    }\n\n    private static void findClassFiles(List&lt;File&gt; list, File dir) {\n        for (File file : dir.listFiles()) {\n            if (file.isDirectory()) {\n                findClassFiles(list, file);\n            } else if (file.getName().endsWith(\".class\")) {\n                list.add(file);\n            }\n        }\n    }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>import java.util.*;\n\nimport org.objectweb.asm.MethodVisitor;\nimport org.objectweb.asm.commons.EmptyVisitor;\n\npublic class MyClassVisitor extends EmptyVisitor {\n\n    private String className;\n    private Map&lt;String, Set&lt;String&gt;&gt; callMap;\n\n    public MyClassVisitor(Map&lt;String, Set&lt;String&gt;&gt; callMap) {\n        this.callMap = callMap;\n    }\n\n    @Override\n    public void visit(int version, int access, String name, String signature,\n            String superName, String[] interfaces) {\n        this.className = name;\n    }\n\n    @Override\n    public MethodVisitor visitMethod(int access, String name, String desc,\n            String signature, String[] exceptions) {\n\n        return new MyMethodVisitor(className + \".\" + name, callMap);\n    }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>import java.util.*;\n\nimport org.objectweb.asm.commons.EmptyVisitor;\n\npublic class MyMethodVisitor extends EmptyVisitor {\n\n    private String currentMethod;\n    private Map&lt;String, Set&lt;String&gt;&gt; callMap;\n\n    public MyMethodVisitor(String currentMethod,\n            Map&lt;String, Set&lt;String&gt;&gt; callMap) {\n        this.currentMethod = currentMethod;\n        this.callMap = callMap;\n    }\n\n    @Override\n    public void visitMethodInsn(int opcode, String owner, String name,\n            String desc) {\n\n        String calledMethod = owner + \".\" + name;\n\n        Set&lt;String&gt; callers = callMap.get(calledMethod);\n        if (callers == null) {\n            callers = new TreeSet&lt;String&gt;();\n            callMap.put(calledMethod, callers);\n        }\n\n        callers.add(currentMethod);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12056717,"reputation":38,"user_id":8817258,"display_name":"shun chen"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1657939580,"creation_date":1657864531,"answer_id":72989593,"question_id":2866805,"body_markdown":"Interesting, someone downvoted my answer without making any comments to improve my answer, I don&#39;t think my answer is wrong, it describes why ASM doesn&#39;t go into interface method.\r\n\r\n\r\n```java\r\npublic interface FF {\r\n\r\n    default void hh(String name) {\r\n\r\n    }\r\n\r\n    String hello(String hello);\r\n}\r\n```\r\n\r\njavap executtion result ,like below , interface method body no message , like LineNumberTable,LocalVariableTable, so can&#39;t be parse by asm\r\n\r\n\r\n```text\r\n  ~ javap -v  /Users/chenshun/tool/winter/target/test-classes/io/github/chenshun00/web/asm/FF.class\r\nClassfile /Users/chenshun/tool/winter/target/test-classes/io/github/chenshun00/web/asm/FF.class\r\n  Last modified 2022-7-15; size 384 bytes\r\n  MD5 checksum de24290be11cb7706f83d3a355261367\r\n  Compiled from &quot;FF.java&quot;\r\npublic interface io.github.chenshun00.web.asm.FF\r\n  minor version: 0\r\n  major version: 52\r\n  flags: ACC_PUBLIC, ACC_INTERFACE, ACC_ABSTRACT\r\nConstant pool:\r\n   #1 = Class              #16            // io/github/chenshun00/web/asm/FF\r\n   #2 = Class              #17            // java/lang/Object\r\n   #3 = Utf8               hh\r\n   #4 = Utf8               (Ljava/lang/String;)V\r\n   #5 = Utf8               Code\r\n   #6 = Utf8               LineNumberTable\r\n   #7 = Utf8               LocalVariableTable\r\n   #8 = Utf8               this\r\n   #9 = Utf8               Lio/github/chenshun00/web/asm/FF;\r\n  #10 = Utf8               name\r\n  #11 = Utf8               Ljava/lang/String;\r\n  #12 = Utf8               hello\r\n  #13 = Utf8               (Ljava/lang/String;)Ljava/lang/String;\r\n  #14 = Utf8               SourceFile\r\n  #15 = Utf8               FF.java\r\n  #16 = Utf8               io/github/chenshun00/web/asm/FF\r\n  #17 = Utf8               java/lang/Object\r\n{\r\n  public void hh(java.lang.String);\r\n    descriptor: (Ljava/lang/String;)V\r\n    flags: ACC_PUBLIC\r\n    Code:\r\n      stack=0, locals=2, args_size=2\r\n         0: return\r\n      LineNumberTable:\r\n        line 17: 0\r\n      LocalVariableTable:\r\n        Start  Length  Slot  Name   Signature\r\n            0       1     0  this   Lio/github/chenshun00/web/asm/FF;\r\n            0       1     1  name   Ljava/lang/String;\r\n\r\n  public abstract java.lang.String hello(java.lang.String);\r\n    descriptor: (Ljava/lang/String;)Ljava/lang/String;\r\n    flags: ACC_PUBLIC, ACC_ABSTRACT\r\n}\r\nSourceFile: &quot;FF.java&quot;\r\n```","title":"Can ASM method-visitors be used with interfaces?","body":"<p>Interesting, someone downvoted my answer without making any comments to improve my answer, I don't think my answer is wrong, it describes why ASM doesn't go into interface method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface FF {\n\n    default void hh(String name) {\n\n    }\n\n    String hello(String hello);\n}\n</code></pre>\n<p>javap executtion result ,like below , interface method body no message , like LineNumberTable,LocalVariableTable, so can't be parse by asm</p>\n<pre><code>  ~ javap -v  /Users/chenshun/tool/winter/target/test-classes/io/github/chenshun00/web/asm/FF.class\nClassfile /Users/chenshun/tool/winter/target/test-classes/io/github/chenshun00/web/asm/FF.class\n  Last modified 2022-7-15; size 384 bytes\n  MD5 checksum de24290be11cb7706f83d3a355261367\n  Compiled from &quot;FF.java&quot;\npublic interface io.github.chenshun00.web.asm.FF\n  minor version: 0\n  major version: 52\n  flags: ACC_PUBLIC, ACC_INTERFACE, ACC_ABSTRACT\nConstant pool:\n   #1 = Class              #16            // io/github/chenshun00/web/asm/FF\n   #2 = Class              #17            // java/lang/Object\n   #3 = Utf8               hh\n   #4 = Utf8               (Ljava/lang/String;)V\n   #5 = Utf8               Code\n   #6 = Utf8               LineNumberTable\n   #7 = Utf8               LocalVariableTable\n   #8 = Utf8               this\n   #9 = Utf8               Lio/github/chenshun00/web/asm/FF;\n  #10 = Utf8               name\n  #11 = Utf8               Ljava/lang/String;\n  #12 = Utf8               hello\n  #13 = Utf8               (Ljava/lang/String;)Ljava/lang/String;\n  #14 = Utf8               SourceFile\n  #15 = Utf8               FF.java\n  #16 = Utf8               io/github/chenshun00/web/asm/FF\n  #17 = Utf8               java/lang/Object\n{\n  public void hh(java.lang.String);\n    descriptor: (Ljava/lang/String;)V\n    flags: ACC_PUBLIC\n    Code:\n      stack=0, locals=2, args_size=2\n         0: return\n      LineNumberTable:\n        line 17: 0\n      LocalVariableTable:\n        Start  Length  Slot  Name   Signature\n            0       1     0  this   Lio/github/chenshun00/web/asm/FF;\n            0       1     1  name   Ljava/lang/String;\n\n  public abstract java.lang.String hello(java.lang.String);\n    descriptor: (Ljava/lang/String;)Ljava/lang/String;\n    flags: ACC_PUBLIC, ACC_ABSTRACT\n}\nSourceFile: &quot;FF.java&quot;\n</code></pre>\n"}],"owner":{"account_id":139444,"reputation":151,"user_id":345044,"display_name":"Olaf Mertens"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2088,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":2873122,"answer_count":3,"score":3,"last_activity_date":1657939580,"creation_date":1274282077,"question_id":2866805,"body_markdown":"I need to write a tool that lists the classes that call methods of specified interfaces. It will be used as part of the build process of a large java application consisting of many modules. The goal is to automatically document the dependencies between certain java modules.\r\n\r\nI found several tools for dependency analysis, but they don&#39;t work on the method level, just for packages or jars. Finally I found **ASM**, that seems to do what I need.\r\n\r\nThe following code prints the method dependencies of all class files in a given directory:\r\n\r\n    import java.io.*;\r\n    import java.util.*;\r\n    \r\n    import org.objectweb.asm.ClassReader;\r\n    \r\n    public class Test {\r\n    \r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \r\n    \t\tFile dir = new File(args[0]);\r\n    \r\n    \t\tList&lt;File&gt; classFiles = new LinkedList&lt;File&gt;();\r\n    \t\tfindClassFiles(classFiles, dir);\r\n    \r\n    \t\tfor (File classFile : classFiles) {\r\n    \t\t\tInputStream input = new FileInputStream(classFile);\r\n    \t\t\tnew ClassReader(input).accept(new MyClassVisitor(), 0);\r\n    \t\t\tinput.close();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprivate static void findClassFiles(List&lt;File&gt; list, File dir) {\r\n    \t\tfor (File file : dir.listFiles()) {\r\n    \t\t\tif (file.isDirectory()) {\r\n    \t\t\t\tfindClassFiles(list, file);\r\n    \t\t\t} else if (file.getName().endsWith(&quot;.class&quot;)) {\r\n    \t\t\t\tlist.add(file);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n----------\r\n\r\n    import org.objectweb.asm.MethodVisitor;\r\n    import org.objectweb.asm.commons.EmptyVisitor;\r\n    \r\n    public class MyClassVisitor extends EmptyVisitor {\r\n    \r\n    \tprivate String className;\r\n    \r\n    \t@Override\r\n    \tpublic void visit(int version, int access, String name, String signature,\r\n    \t\t\tString superName, String[] interfaces) {\r\n    \t\tthis.className = name;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic MethodVisitor visitMethod(int access, String name, String desc,\r\n    \t\t\tString signature, String[] exceptions) {\r\n    \r\n    \t\tSystem.out.println(className + &quot;.&quot; + name);\r\n    \t\treturn new MyMethodVisitor();\r\n    \t}\r\n    }\r\n\r\n----------\r\n\r\n    import org.objectweb.asm.commons.EmptyVisitor;\r\n    \r\n    public class MyMethodVisitor extends EmptyVisitor {\r\n    \r\n    \t@Override\r\n    \tpublic void visitMethodInsn(int opcode, String owner, String name,\r\n    \t\t\tString desc) {\r\n    \r\n    \t\tString key = owner + &quot;.&quot; + name;\r\n    \t\tSystem.out.println(&quot;  &quot; + key);\r\n    \t}\r\n    }\r\n\r\n----------\r\n\r\n\r\n**The Problem:**\r\n\r\nThe code works for regular classes only! If the class file contains an interface, *visitMethod* is called, but not *visitMethodInsn*. I don&#39;t get any info about the callers of interface methods.\r\n\r\nAny ideas?","title":"Can ASM method-visitors be used with interfaces?","body":"<p>I need to write a tool that lists the classes that call methods of specified interfaces. It will be used as part of the build process of a large java application consisting of many modules. The goal is to automatically document the dependencies between certain java modules.</p>\n\n<p>I found several tools for dependency analysis, but they don't work on the method level, just for packages or jars. Finally I found <strong>ASM</strong>, that seems to do what I need.</p>\n\n<p>The following code prints the method dependencies of all class files in a given directory:</p>\n\n<pre><code>import java.io.*;\nimport java.util.*;\n\nimport org.objectweb.asm.ClassReader;\n\npublic class Test {\n\n    public static void main(String[] args) throws Exception {\n\n        File dir = new File(args[0]);\n\n        List&lt;File&gt; classFiles = new LinkedList&lt;File&gt;();\n        findClassFiles(classFiles, dir);\n\n        for (File classFile : classFiles) {\n            InputStream input = new FileInputStream(classFile);\n            new ClassReader(input).accept(new MyClassVisitor(), 0);\n            input.close();\n        }\n    }\n\n    private static void findClassFiles(List&lt;File&gt; list, File dir) {\n        for (File file : dir.listFiles()) {\n            if (file.isDirectory()) {\n                findClassFiles(list, file);\n            } else if (file.getName().endsWith(\".class\")) {\n                list.add(file);\n            }\n        }\n    }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>import org.objectweb.asm.MethodVisitor;\nimport org.objectweb.asm.commons.EmptyVisitor;\n\npublic class MyClassVisitor extends EmptyVisitor {\n\n    private String className;\n\n    @Override\n    public void visit(int version, int access, String name, String signature,\n            String superName, String[] interfaces) {\n        this.className = name;\n    }\n\n    @Override\n    public MethodVisitor visitMethod(int access, String name, String desc,\n            String signature, String[] exceptions) {\n\n        System.out.println(className + \".\" + name);\n        return new MyMethodVisitor();\n    }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>import org.objectweb.asm.commons.EmptyVisitor;\n\npublic class MyMethodVisitor extends EmptyVisitor {\n\n    @Override\n    public void visitMethodInsn(int opcode, String owner, String name,\n            String desc) {\n\n        String key = owner + \".\" + name;\n        System.out.println(\"  \" + key);\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><strong>The Problem:</strong></p>\n\n<p>The code works for regular classes only! If the class file contains an interface, <em>visitMethod</em> is called, but not <em>visitMethodInsn</em>. I don't get any info about the callers of interface methods.</p>\n\n<p>Any ideas?</p>\n"},{"tags":["java","javafx","random","mouseevent","shapes"],"comments":[{"owner":{"account_id":25396699,"reputation":69,"user_id":19206855,"display_name":"megami"},"score":0,"creation_date":1657921111,"post_id":72999413,"comment_id":128932980,"body_markdown":"@jewelsea I&#39;m not sure I understand.","body":"@jewelsea I&#39;m not sure I understand."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1657922919,"post_id":72999413,"comment_id":128933277,"body_markdown":"Start by adding `private Collection&lt;Circle&gt; circles = new ArrayList&lt;&gt;();` to your class.  Then add your Circles to that List in your `start` method.  Now you have objects you can access and modify in a mouse event handler.","body":"Start by adding <code>private Collection&lt;Circle&gt; circles = new ArrayList&lt;&gt;();</code> to your class.  Then add your Circles to that List in your <code>start</code> method.  Now you have objects you can access and modify in a mouse event handler."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":1,"creation_date":1657924241,"post_id":72999413,"comment_id":128933518,"body_markdown":"[mcve] required","body":"<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> required"},{"owner":{"account_id":10283144,"reputation":2440,"user_id":7587451,"display_name":"Giovanni Contreras"},"score":1,"creation_date":1657924370,"post_id":72999413,"comment_id":128933540,"body_markdown":"`Group`  object is a new cartesian coordinate xyz axis any time you add a new node to group that node is on 0,0,0 default value so all the circles are overlaped . you need to translate x and y  ramdomly","body":"<code>Group</code>  object is a new cartesian coordinate xyz axis any time you add a new node to group that node is on 0,0,0 default value so all the circles are overlaped . you need to translate x and y  ramdomly"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1657924373,"post_id":72999413,"comment_id":128933541,"body_markdown":"@annie Which specific part dont you understand. The steps are clearly laid out.","body":"@annie Which specific part dont you understand. The steps are clearly laid out."}],"answers":[{"tags":[],"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1657925904,"creation_date":1657925528,"answer_id":73000274,"question_id":72999413,"body_markdown":"Set a click mouse event handler on the scene. \r\n\r\nWhen the click event is triggered, loop through the children of the group and set the x and y properties of each circle to a random value. \r\n\r\nIf desired, rather than relying on the group&#39;s children and a cast, you could instead store the circles in a separate list and loop through that when the event is received.\r\n\r\nRequires a minimum Java version of 16.\r\n\r\n    import javafx.application.Application;\r\n    import javafx.scene.*;\r\n    import javafx.scene.paint.Color;\r\n    import javafx.scene.shape.Circle;\r\n    import javafx.stage.Stage;\r\n    \r\n    import java.io.IOException;\r\n    import java.util.concurrent.ThreadLocalRandom;\r\n    \r\n    public class CircleApp extends Application {\r\n        private static final int N_CIRCLES = 10;\r\n        private static final int MIN_RADIUS = 10;\r\n        private static final int MAX_RADIUS = 66;\r\n        private static final int SCENE_WIDTH = 800;\r\n        private static final int SCENE_HEIGHT = 500;\r\n    \r\n        @Override\r\n        public void start(Stage stage) throws IOException {\r\n            Group circleGroup = new Group();\r\n    \r\n            for (int i = 0; i &lt;= N_CIRCLES; i++) {\r\n                circleGroup.getChildren().add(\r\n                        createCircle()\r\n                );\r\n            }\r\n    \r\n            Scene scene = new Scene(\r\n                    circleGroup,\r\n                    SCENE_WIDTH, SCENE_HEIGHT,\r\n                    Color.BEIGE\r\n            );\r\n            stage.setScene(scene);\r\n            stage.setResizable(false);\r\n            stage.show();\r\n    \r\n            scene.setOnMouseClicked(e -&gt;\r\n                    relocateCircles(circleGroup)\r\n            );\r\n        }\r\n    \r\n        public Circle createCircle() {\r\n            double radius = randomInRange(\r\n                    MIN_RADIUS,\r\n                    MAX_RADIUS\r\n            );\r\n            double x = randomXLocation(radius);\r\n            double y = randomYLocation(radius);\r\n    \r\n            Circle circle = new Circle(x, y, radius);\r\n            circle.setFill(Color.BLACK);\r\n            circle.setStroke(Color.BLUE);\r\n    \r\n            return circle;\r\n        }\r\n    \r\n        private void relocateCircles(Group group) {\r\n            for (Node node: group.getChildren()) {\r\n                if (node instanceof Circle circle) {\r\n                    circle.setCenterX(\r\n                            randomXLocation(\r\n                                    circle.getRadius()\r\n                            )\r\n                    );\r\n                    circle.setCenterY(\r\n                            randomYLocation(\r\n                                    circle.getRadius()\r\n                            )\r\n                    );\r\n                }\r\n            }\r\n        }\r\n        \r\n        private double randomXLocation(double radius) {\r\n            return randomInRange(\r\n                radius,\r\n                SCENE_WIDTH - radius\r\n            );\r\n        }\r\n    \r\n        private double randomYLocation(double radius) {\r\n            return randomInRange(\r\n                radius,\r\n                SCENE_HEIGHT - radius\r\n            );\r\n        }\r\n    \r\n        private double randomInRange(double min, double max) {\r\n            return Math.round(\r\n                    ThreadLocalRandom.current().nextDouble(\r\n                            min,\r\n                            max\r\n                    )\r\n            );\r\n        }\r\n    }\r\n\r\nFor more complex shapes or a general solution for all node types, set the translateX and translateY values on the node rather than setting the centerX and centerY values of a circle (as centerX and centerY would not be available for other node types).","title":"Changing location of shapes to a random location when mouse-clicked (javafx)","body":"<p>Set a click mouse event handler on the scene.</p>\n<p>When the click event is triggered, loop through the children of the group and set the x and y properties of each circle to a random value.</p>\n<p>If desired, rather than relying on the group's children and a cast, you could instead store the circles in a separate list and loop through that when the event is received.</p>\n<p>Requires a minimum Java version of 16.</p>\n<pre><code>import javafx.application.Application;\nimport javafx.scene.*;\nimport javafx.scene.paint.Color;\nimport javafx.scene.shape.Circle;\nimport javafx.stage.Stage;\n\nimport java.io.IOException;\nimport java.util.concurrent.ThreadLocalRandom;\n\npublic class CircleApp extends Application {\n    private static final int N_CIRCLES = 10;\n    private static final int MIN_RADIUS = 10;\n    private static final int MAX_RADIUS = 66;\n    private static final int SCENE_WIDTH = 800;\n    private static final int SCENE_HEIGHT = 500;\n\n    @Override\n    public void start(Stage stage) throws IOException {\n        Group circleGroup = new Group();\n\n        for (int i = 0; i &lt;= N_CIRCLES; i++) {\n            circleGroup.getChildren().add(\n                    createCircle()\n            );\n        }\n\n        Scene scene = new Scene(\n                circleGroup,\n                SCENE_WIDTH, SCENE_HEIGHT,\n                Color.BEIGE\n        );\n        stage.setScene(scene);\n        stage.setResizable(false);\n        stage.show();\n\n        scene.setOnMouseClicked(e -&gt;\n                relocateCircles(circleGroup)\n        );\n    }\n\n    public Circle createCircle() {\n        double radius = randomInRange(\n                MIN_RADIUS,\n                MAX_RADIUS\n        );\n        double x = randomXLocation(radius);\n        double y = randomYLocation(radius);\n\n        Circle circle = new Circle(x, y, radius);\n        circle.setFill(Color.BLACK);\n        circle.setStroke(Color.BLUE);\n\n        return circle;\n    }\n\n    private void relocateCircles(Group group) {\n        for (Node node: group.getChildren()) {\n            if (node instanceof Circle circle) {\n                circle.setCenterX(\n                        randomXLocation(\n                                circle.getRadius()\n                        )\n                );\n                circle.setCenterY(\n                        randomYLocation(\n                                circle.getRadius()\n                        )\n                );\n            }\n        }\n    }\n    \n    private double randomXLocation(double radius) {\n        return randomInRange(\n            radius,\n            SCENE_WIDTH - radius\n        );\n    }\n\n    private double randomYLocation(double radius) {\n        return randomInRange(\n            radius,\n            SCENE_HEIGHT - radius\n        );\n    }\n\n    private double randomInRange(double min, double max) {\n        return Math.round(\n                ThreadLocalRandom.current().nextDouble(\n                        min,\n                        max\n                )\n        );\n    }\n}\n</code></pre>\n<p>For more complex shapes or a general solution for all node types, set the translateX and translateY values on the node rather than setting the centerX and centerY values of a circle (as centerX and centerY would not be available for other node types).</p>\n"},{"tags":[],"owner":{"account_id":10283144,"reputation":2440,"user_id":7587451,"display_name":"Giovanni Contreras"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1657939216,"creation_date":1657926718,"answer_id":73000368,"question_id":72999413,"body_markdown":"**translate x y with mouse event**\r\n\r\nIterate through `.getChildren().forEach()` to get a child node of  `Group` \r\nand translate it to random x y position . `forEach()`  return a node object ,so it&#39;s not nescessary to cast it  in this case\r\n\r\n[![random positions][1]][1]\r\n\r\n    public class App extends Application {\r\n        Random random = new Random();\r\n    \r\n        @Override\r\n        public void start(Stage stage) {\r\n              int x = 0;\r\n        int y = 0;\r\n        int radius = 0;\r\n      \r\n     Group root = new Group();\r\n      \r\n            for (int i = 0; i &lt;= 10; i++) {\r\n               \r\n    \r\n                Circle circle = new Circle(x, y, radius);\r\n                {\r\n                    radius = random.nextInt(66) + 10;\r\n                    x = random.nextInt(600 - 2 * radius) + radius;\r\n                    y = random.nextInt(400 - 2 * radius) + radius;\r\n                }\r\n                circle.setFill(Color.BLACK);\r\n                circle.setStroke(Color.BLUE);\r\n    \r\n                root.getChildren().add(circle);\r\n            }\r\n            Scene scene = new Scene(root, 800, 500, Color.BEIGE);\r\n            \r\n            scene.setOnMouseClicked(e-&gt;{\r\n            \r\n            root.getChildren().forEach((n) -&gt; {\r\n                n.setTranslateX(random.nextInt(0,800));\r\n                n.setTranslateY(random.nextInt(0,500));\r\n            });\r\n            \r\n            });\r\n            \r\n            stage.setScene(scene);\r\n            stage.show();\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch();\r\n        }\r\n    \r\n    }\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BFBdK.gif","title":"Changing location of shapes to a random location when mouse-clicked (javafx)","body":"<p><strong>translate x y with mouse event</strong></p>\n<p>Iterate through <code>.getChildren().forEach()</code> to get a child node of  <code>Group</code>\nand translate it to random x y position . <code>forEach()</code>  return a node object ,so it's not nescessary to cast it  in this case</p>\n<p><a href=\"https://i.stack.imgur.com/BFBdK.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BFBdK.gif\" alt=\"random positions\" /></a></p>\n<pre><code>public class App extends Application {\n    Random random = new Random();\n\n    @Override\n    public void start(Stage stage) {\n          int x = 0;\n    int y = 0;\n    int radius = 0;\n  \n Group root = new Group();\n  \n        for (int i = 0; i &lt;= 10; i++) {\n           \n\n            Circle circle = new Circle(x, y, radius);\n            {\n                radius = random.nextInt(66) + 10;\n                x = random.nextInt(600 - 2 * radius) + radius;\n                y = random.nextInt(400 - 2 * radius) + radius;\n            }\n            circle.setFill(Color.BLACK);\n            circle.setStroke(Color.BLUE);\n\n            root.getChildren().add(circle);\n        }\n        Scene scene = new Scene(root, 800, 500, Color.BEIGE);\n        \n        scene.setOnMouseClicked(e-&gt;{\n        \n        root.getChildren().forEach((n) -&gt; {\n            n.setTranslateX(random.nextInt(0,800));\n            n.setTranslateY(random.nextInt(0,500));\n        });\n        \n        });\n        \n        stage.setScene(scene);\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":25396699,"reputation":69,"user_id":19206855,"display_name":"megami"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73000368,"answer_count":2,"score":0,"last_activity_date":1657939216,"creation_date":1657917750,"question_id":72999413,"body_markdown":"I need exactly what the title says. I&#39;ve made 10 circles with different radius sizes, now I just need to make them shift their locations when I click on the scene with the mouse. I tried finding the solution here but none of the questions contain exactly what I need.\r\nHere&#39;s my code:\r\n```\r\nRandom random = new Random();\r\n\r\n    int x = 0;\r\n    int y = 0;\r\n    int radius = 0;\r\n\r\n    @Override\r\n    public void start(Stage primaryStage) {\r\n\r\n        Group root = new Group();\r\n\r\n        for (int i = 0; i &lt;= 10; i++) {\r\n\r\n            Circle circle = new Circle(x, y, radius);\r\n            {\r\n                radius = random.nextInt(66) + 10;\r\n                x = random.nextInt(600 - 2 * radius) + radius;\r\n                y = random.nextInt(400 - 2 * radius) + radius;\r\n            }\r\n            circle.setFill(Color.BLACK);\r\n            circle.setStroke(Color.BLUE);\r\n\r\n            root.getChildren().add(circle);\r\n        }\r\n        Scene scene = new Scene(root, 800, 500, Color.BEIGE);\r\n        Stage stage = new Stage();\r\n        stage.setScene(scene);\r\n        stage.show();\r\n    }\r\n```","title":"Changing location of shapes to a random location when mouse-clicked (javafx)","body":"<p>I need exactly what the title says. I've made 10 circles with different radius sizes, now I just need to make them shift their locations when I click on the scene with the mouse. I tried finding the solution here but none of the questions contain exactly what I need.\nHere's my code:</p>\n<pre><code>Random random = new Random();\n\n    int x = 0;\n    int y = 0;\n    int radius = 0;\n\n    @Override\n    public void start(Stage primaryStage) {\n\n        Group root = new Group();\n\n        for (int i = 0; i &lt;= 10; i++) {\n\n            Circle circle = new Circle(x, y, radius);\n            {\n                radius = random.nextInt(66) + 10;\n                x = random.nextInt(600 - 2 * radius) + radius;\n                y = random.nextInt(400 - 2 * radius) + radius;\n            }\n            circle.setFill(Color.BLACK);\n            circle.setStroke(Color.BLUE);\n\n            root.getChildren().add(circle);\n        }\n        Scene scene = new Scene(root, 800, 500, Color.BEIGE);\n        Stage stage = new Stage();\n        stage.setScene(scene);\n        stage.show();\n    }\n</code></pre>\n"},{"tags":["java","junit","quickcheck"],"comments":[{"owner":{"account_id":2702906,"reputation":22658,"user_id":2333222,"display_name":"SubOptimal"},"score":0,"creation_date":1431521123,"post_id":30211147,"comment_id":48534325,"body_markdown":"It&#39;s not really clear what you want to achieve. Do you want to know how to implement the method `public String generate(SourceOfRandomness random, GenerationStatus status)` to return a `String` which matches your pattern?","body":"It&#39;s not really clear what you want to achieve. Do you want to know how to implement the method <code>public String generate(SourceOfRandomness random, GenerationStatus status)</code> to return a <code>String</code> which matches your pattern?"},{"owner":{"account_id":1879420,"reputation":5451,"user_id":1699956,"accept_rate":83,"display_name":"Mangat Rai Modi"},"score":0,"creation_date":1431524278,"post_id":30211147,"comment_id":48536904,"body_markdown":"Hi,\ngenerate(..) is actually an abstract function in Generator class of QuickCheck port on Java by Pholser. It is of generic type which will return an object of type &quot;TestData&quot;. This object encapsulate several data objects like Double, Integer, String etc.\n\nrandom object has functions to get random values for double, integers but nothing for strings!\n\nI will update my answer!","body":"Hi, generate(..) is actually an abstract function in Generator class of QuickCheck port on Java by Pholser. It is of generic type which will return an object of type &quot;TestData&quot;. This object encapsulate several data objects like Double, Integer, String etc.  random object has functions to get random values for double, integers but nothing for strings!  I will update my answer!"}],"answers":[{"tags":[],"owner":{"account_id":2702906,"reputation":22658,"user_id":2333222,"display_name":"SubOptimal"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1459850936,"creation_date":1431525662,"answer_id":30217172,"question_id":30211147,"body_markdown":"Find below snippet for a custom generator which implement the `generate(..)` method to return a random string matching your posted pattern.\r\n\r\n    public class MyCharacterGenerator extends Generator&lt;String&gt; {\r\n\r\n        private static final String LOWERCASE_CHARS = &quot;abcdefghijklmnopqrstuvwxyz&quot;;\r\n        private static final String UPPERCASE_CHARS = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;;\r\n        private static final String NUMBERS = &quot;0123456789&quot;;\r\n        private static final String SPECIAL_CHARS = &quot;.-\\\\;:_@[]^/|}{&quot;;\r\n        private static final String ALL_MY_CHARS = LOWERCASE_CHARS\r\n                + UPPERCASE_CHARS + NUMBERS + SPECIAL_CHARS;\r\n        public static final int CAPACITY = 40;\r\n\r\n        public MyCharacterGenerator () {\r\n            super(String.class);\r\n        }\r\n\r\n        @Override\r\n        public String generate(SourceOfRandomness random, GenerationStatus status) {\r\n            StringBuilder sb = new StringBuilder(CAPACITY);\r\n            for (int i = 0; i &lt; CAPACITY; i++) {\r\n                int randomIndex = random.nextInt(ALL_MY_CHARS.length());\r\n                sb.append(ALL_MY_CHARS.charAt(randomIndex));\r\n            }\r\n            return sb.toString();\r\n        }\r\n    }\r\n\r\n**edit** A simple unit test to demonstrate the usage of the `MyCharacterGenerator` class.\r\n\r\n    import com.pholser.junit.quickcheck.ForAll;\r\n    import com.pholser.junit.quickcheck.From;\r\n    import static org.junit.Assert.assertTrue;\r\n    import org.junit.contrib.theories.Theories;\r\n    import org.junit.contrib.theories.Theory;\r\n    import org.junit.runner.RunWith;\r\n\r\n    @RunWith(Theories.class)\r\n    public class MyCharacterGeneratorTest {\r\n\r\n        @Theory\r\n        public void shouldHold(@ForAll @From(MyCharacterGenerator.class) String s) {\r\n            // here you should add your unit test which uses the generated output\r\n            // \r\n            // assertTrue(doMyUnitTest(s) == expectedResult);\r\n\r\n            // the below lines only for demonstration and currently\r\n            // check that the generated random has the expected\r\n            // length and matches the expected pattern\r\n            System.out.println(&quot;shouldHold(): &quot; + s);\r\n            assertTrue(s.length() == MyCharacterGenerator.CAPACITY);\r\n            assertTrue(s.matches(&quot;[a-zA-Z0-9.\\\\-\\\\\\\\;:_@\\\\[\\\\]^/|}{]*&quot;));\r\n        }\r\n    }\r\n\r\n**sample output** generated by `shouldHold`\r\n\r\n    shouldHold(): MD}o/LAkW/hbJVWPGdI;:RHpwo_T.lGs^DOFwu2.\r\n    shouldHold(): IT_O{8Umhkz{@PY:pmK6}Cb[Wc19GqGZjWVa@4li\r\n    shouldHold(): KQwpEz.CW28vy_/WJR3Lx2.tRC6uLIjOTQtYP/VR\r\n    shouldHold(): pc2_T4hLdZpK78UfcVmU\\RTe9WaJBSGJ}5v@z[Z\\\r\n    ...\r\n","title":"Junit-Quickcheck: Generate String matching a pattern","body":"<p>Find below snippet for a custom generator which implement the <code>generate(..)</code> method to return a random string matching your posted pattern.</p>\n\n<pre><code>public class MyCharacterGenerator extends Generator&lt;String&gt; {\n\n    private static final String LOWERCASE_CHARS = \"abcdefghijklmnopqrstuvwxyz\";\n    private static final String UPPERCASE_CHARS = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n    private static final String NUMBERS = \"0123456789\";\n    private static final String SPECIAL_CHARS = \".-\\\\;:_@[]^/|}{\";\n    private static final String ALL_MY_CHARS = LOWERCASE_CHARS\n            + UPPERCASE_CHARS + NUMBERS + SPECIAL_CHARS;\n    public static final int CAPACITY = 40;\n\n    public MyCharacterGenerator () {\n        super(String.class);\n    }\n\n    @Override\n    public String generate(SourceOfRandomness random, GenerationStatus status) {\n        StringBuilder sb = new StringBuilder(CAPACITY);\n        for (int i = 0; i &lt; CAPACITY; i++) {\n            int randomIndex = random.nextInt(ALL_MY_CHARS.length());\n            sb.append(ALL_MY_CHARS.charAt(randomIndex));\n        }\n        return sb.toString();\n    }\n}\n</code></pre>\n\n<p><strong>edit</strong> A simple unit test to demonstrate the usage of the <code>MyCharacterGenerator</code> class.</p>\n\n<pre><code>import com.pholser.junit.quickcheck.ForAll;\nimport com.pholser.junit.quickcheck.From;\nimport static org.junit.Assert.assertTrue;\nimport org.junit.contrib.theories.Theories;\nimport org.junit.contrib.theories.Theory;\nimport org.junit.runner.RunWith;\n\n@RunWith(Theories.class)\npublic class MyCharacterGeneratorTest {\n\n    @Theory\n    public void shouldHold(@ForAll @From(MyCharacterGenerator.class) String s) {\n        // here you should add your unit test which uses the generated output\n        // \n        // assertTrue(doMyUnitTest(s) == expectedResult);\n\n        // the below lines only for demonstration and currently\n        // check that the generated random has the expected\n        // length and matches the expected pattern\n        System.out.println(\"shouldHold(): \" + s);\n        assertTrue(s.length() == MyCharacterGenerator.CAPACITY);\n        assertTrue(s.matches(\"[a-zA-Z0-9.\\\\-\\\\\\\\;:_@\\\\[\\\\]^/|}{]*\"));\n    }\n}\n</code></pre>\n\n<p><strong>sample output</strong> generated by <code>shouldHold</code></p>\n\n<pre><code>shouldHold(): MD}o/LAkW/hbJVWPGdI;:RHpwo_T.lGs^DOFwu2.\nshouldHold(): IT_O{8Umhkz{@PY:pmK6}Cb[Wc19GqGZjWVa@4li\nshouldHold(): KQwpEz.CW28vy_/WJR3Lx2.tRC6uLIjOTQtYP/VR\nshouldHold(): pc2_T4hLdZpK78UfcVmU\\RTe9WaJBSGJ}5v@z[Z\\\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6720924,"reputation":5542,"user_id":5180989,"display_name":"Helder Pereira"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1485533530,"creation_date":1485533530,"answer_id":41898324,"question_id":30211147,"body_markdown":"There is no `random.nextString()`, but there is a way to generate random strings within **junit-quickcheck-generators** library. You can access it when creating new generators using `gen().type(String.class)`. However, it seems we don&#39;t have much control over it.\r\n\r\nHere is a silly example of a `StringBuilder` generator to demonstrate how to use the `String` generator:\r\n\r\n    import com.pholser.junit.quickcheck.generator.GenerationStatus;\r\n    import com.pholser.junit.quickcheck.generator.Generator;\r\n    import com.pholser.junit.quickcheck.random.SourceOfRandomness;\r\n    \r\n    public class StringBuilderGenerator extends Generator&lt;StringBuilder&gt; {\r\n    \r\n        public StringBuilderGenerator() {\r\n            super(StringBuilder.class);\r\n        }\r\n    \r\n        @Override\r\n        public StringBuilder generate(SourceOfRandomness random, GenerationStatus status) {\r\n            String s = gen().type(String.class).generate(random, status);\r\n            return new StringBuilder(s);\r\n        }\r\n    }","title":"Junit-Quickcheck: Generate String matching a pattern","body":"<p>There is no <code>random.nextString()</code>, but there is a way to generate random strings within <strong>junit-quickcheck-generators</strong> library. You can access it when creating new generators using <code>gen().type(String.class)</code>. However, it seems we don't have much control over it.</p>\n\n<p>Here is a silly example of a <code>StringBuilder</code> generator to demonstrate how to use the <code>String</code> generator:</p>\n\n<pre><code>import com.pholser.junit.quickcheck.generator.GenerationStatus;\nimport com.pholser.junit.quickcheck.generator.Generator;\nimport com.pholser.junit.quickcheck.random.SourceOfRandomness;\n\npublic class StringBuilderGenerator extends Generator&lt;StringBuilder&gt; {\n\n    public StringBuilderGenerator() {\n        super(StringBuilder.class);\n    }\n\n    @Override\n    public StringBuilder generate(SourceOfRandomness random, GenerationStatus status) {\n        String s = gen().type(String.class).generate(random, status);\n        return new StringBuilder(s);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1546286,"reputation":7588,"user_id":1439771,"accept_rate":75,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657938793,"creation_date":1657938793,"answer_id":73001142,"question_id":30211147,"body_markdown":"I just made a library that suppose to do what you want in a generic way: https://github.com/SimY4/coregex\r\n\r\nSimple usage example:\r\n\r\n```\r\nimport com.pholser.junit.quickcheck.Property;\r\nimport com.pholser.junit.quickcheck.runner.JUnitQuickcheck;\r\nimport org.junit.runner.RunWith;\r\n\r\nimport java.util.UUID;\r\n\r\nimport static org.junit.Assert.assertEquals;\r\n\r\n@RunWith(JUnitQuickcheck.class)\r\npublic class CoregexGeneratorTest {\r\n  @Property\r\n  public void shouldGenerateMatchingUUIDString(\r\n      @Regex(&quot;[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}&quot;)\r\n          String uuid) {\r\n    assertEquals(uuid, UUID.fromString(uuid).toString());\r\n  }\r\n}\r\n```","title":"Junit-Quickcheck: Generate String matching a pattern","body":"<p>I just made a library that suppose to do what you want in a generic way: <a href=\"https://github.com/SimY4/coregex\" rel=\"nofollow noreferrer\">https://github.com/SimY4/coregex</a></p>\n<p>Simple usage example:</p>\n<pre><code>import com.pholser.junit.quickcheck.Property;\nimport com.pholser.junit.quickcheck.runner.JUnitQuickcheck;\nimport org.junit.runner.RunWith;\n\nimport java.util.UUID;\n\nimport static org.junit.Assert.assertEquals;\n\n@RunWith(JUnitQuickcheck.class)\npublic class CoregexGeneratorTest {\n  @Property\n  public void shouldGenerateMatchingUUIDString(\n      @Regex(&quot;[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}&quot;)\n          String uuid) {\n    assertEquals(uuid, UUID.fromString(uuid).toString());\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":1879420,"reputation":5451,"user_id":1699956,"accept_rate":83,"display_name":"Mangat Rai Modi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2701,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":30217172,"answer_count":3,"score":5,"last_activity_date":1657938793,"creation_date":1431510272,"question_id":30211147,"body_markdown":"I am using pholser&#39;s port. I have to generate strings matching a given pattern like `\\[a-zA-Z0-9\\\\.\\\\-\\\\\\\\;\\\\:\\\\_\\\\@\\\\[\\\\]\\\\^/\\\\|\\\\}\\\\{]* Length 40`.\r\n\r\nI extend the Generator class as:\r\n\r\n    public class InputGenerator extends Generator&lt;TestData&gt; {...}\r\n\r\nIt overloads a function:\r\n\r\n    publicTestData generate(SourceOfRandomness random, GenerationStatus status) {...}\r\n\r\nNow, random has functions like **nextDouble(), nextInt()** but there is nothing for strings! How can I generate random strings matching the above pattern?","title":"Junit-Quickcheck: Generate String matching a pattern","body":"<p>I am using pholser's port. I have to generate strings matching a given pattern like <code>\\[a-zA-Z0-9\\\\.\\\\-\\\\\\\\;\\\\:\\\\_\\\\@\\\\[\\\\]\\\\^/\\\\|\\\\}\\\\{]* Length 40</code>.</p>\n\n<p>I extend the Generator class as:</p>\n\n<pre><code>public class InputGenerator extends Generator&lt;TestData&gt; {...}\n</code></pre>\n\n<p>It overloads a function:</p>\n\n<pre><code>publicTestData generate(SourceOfRandomness random, GenerationStatus status) {...}\n</code></pre>\n\n<p>Now, random has functions like <strong>nextDouble(), nextInt()</strong> but there is nothing for strings! How can I generate random strings matching the above pattern?</p>\n"},{"tags":["java","vue.js","vuejs2"],"answers":[{"tags":[],"owner":{"account_id":6003733,"reputation":21511,"user_id":4716245,"display_name":"Richard Matsen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1657937841,"creation_date":1507079591,"answer_id":46555620,"question_id":46555293,"body_markdown":"I haven&#39;t checked this out, but perhaps you could exchange watchers for computed properties with setter, see ref [Computed setter][1]\r\n\r\nNote the comment here [circular dependency on observed properties #622 (yyx990803 commented on Dec 11, 2014)][2]\r\n\r\n&gt; The thing is even when there is a circular dependency, the eventual\r\n&gt; value should be able to stabilize after 1 additional iteration (which\r\n&gt; Vue will then stop because the new evaluated value is the same)\r\n\r\n***OR***\r\n\r\nI guess you could put\r\n\r\n    if (newValue === oldValue) {\r\n      return\r\n    }\r\n\r\nat the top of each watcher. This is sort of what computed does anyway.\r\n\r\n  [1]: https://v2.vuejs.org/v2/guide/computed.html#Computed-Setter\r\n  [2]: https://github.com/vuejs/vue/issues/622","title":"Preventing Vue from looping","body":"<p>I haven't checked this out, but perhaps you could exchange watchers for computed properties with setter, see ref <a href=\"https://v2.vuejs.org/v2/guide/computed.html#Computed-Setter\" rel=\"nofollow noreferrer\">Computed setter</a></p>\n<p>Note the comment here <a href=\"https://github.com/vuejs/vue/issues/622\" rel=\"nofollow noreferrer\">circular dependency on observed properties #622 (yyx990803 commented on Dec 11, 2014)</a></p>\n<blockquote>\n<p>The thing is even when there is a circular dependency, the eventual\nvalue should be able to stabilize after 1 additional iteration (which\nVue will then stop because the new evaluated value is the same)</p>\n</blockquote>\n<p><em><strong>OR</strong></em></p>\n<p>I guess you could put</p>\n<pre><code>if (newValue === oldValue) {\n  return\n}\n</code></pre>\n<p>at the top of each watcher. This is sort of what computed does anyway.</p>\n"},{"tags":[],"owner":{"account_id":67520,"reputation":34463,"user_id":197546,"accept_rate":85,"display_name":"Daniel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1507085710,"creation_date":1507085710,"answer_id":46556303,"question_id":46555293,"body_markdown":"you could use onkeyup listener (and/or change)\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    new Vue({\r\n    \tel: &quot;#app&quot;,\r\n      data: {\r\n      \tinput_h: 0,\r\n      \tinput_m: 0,\r\n      \tinput_t: 0\r\n      },\r\n      methods: {\r\n      update_h (e) {\r\n      \tthis.input_h = Number(e.target.value)\r\n        this.update_t(null)\r\n      },\r\n      update_m (e) {\r\n      \tthis.input_m = Number(e.target.value)\r\n        this.update_t(null)\r\n      },\r\n      update_t (e) {\r\n      \tif (e === null) {\r\n        \tthis.input_t = Math.round((this.input_h + this.input_m / 60) * 100)/100\r\n        } else {\r\n        \tthis.input_t = Number(e.target.value)\r\n          this.input_h = Math.floor(this.input_t)\r\n          this.input_m = Math.round(this.input_t%1 * 60)\r\n        }\r\n        \r\n      },\r\n      }\r\n    })\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/vue/2.4.4/vue.js&quot;&gt;&lt;/script&gt;\r\n    &lt;div id=&quot;app&quot;&gt;\r\n      &lt;input :value=&quot;input_h&quot; @keyUp=&quot;update_h&quot;/&gt;Hours&lt;br/&gt;\r\n      &lt;input :value=&quot;input_m&quot; @keyUp=&quot;update_m&quot;/&gt;Minutes&lt;br/&gt;\r\n      &lt;input :value=&quot;input_t&quot; @keyUp=&quot;update_t&quot;/&gt;Total&lt;br/&gt;\r\n    &lt;/div&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\nOtherwise, if you want to prevent circular dependency, you need to set up a single source of data, and use computed getters and setters to update the other fields. You don&#39;t even have to use a visible field for that.\r\nhttps://jsbin.com/tagupab/edit has a working example\r\n","title":"Preventing Vue from looping","body":"<p>you could use onkeyup listener (and/or change)</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>new Vue({\r\n\tel: \"#app\",\r\n  data: {\r\n  \tinput_h: 0,\r\n  \tinput_m: 0,\r\n  \tinput_t: 0\r\n  },\r\n  methods: {\r\n  update_h (e) {\r\n  \tthis.input_h = Number(e.target.value)\r\n    this.update_t(null)\r\n  },\r\n  update_m (e) {\r\n  \tthis.input_m = Number(e.target.value)\r\n    this.update_t(null)\r\n  },\r\n  update_t (e) {\r\n  \tif (e === null) {\r\n    \tthis.input_t = Math.round((this.input_h + this.input_m / 60) * 100)/100\r\n    } else {\r\n    \tthis.input_t = Number(e.target.value)\r\n      this.input_h = Math.floor(this.input_t)\r\n      this.input_m = Math.round(this.input_t%1 * 60)\r\n    }\r\n    \r\n  },\r\n  }\r\n})</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/vue/2.4.4/vue.js\"&gt;&lt;/script&gt;\r\n&lt;div id=\"app\"&gt;\r\n  &lt;input :value=\"input_h\" @keyUp=\"update_h\"/&gt;Hours&lt;br/&gt;\r\n  &lt;input :value=\"input_m\" @keyUp=\"update_m\"/&gt;Minutes&lt;br/&gt;\r\n  &lt;input :value=\"input_t\" @keyUp=\"update_t\"/&gt;Total&lt;br/&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Otherwise, if you want to prevent circular dependency, you need to set up a single source of data, and use computed getters and setters to update the other fields. You don't even have to use a visible field for that.\n<a href=\"https://jsbin.com/tagupab/edit\" rel=\"nofollow noreferrer\">https://jsbin.com/tagupab/edit</a> has a working example</p>\n"}],"owner":{"account_id":1689280,"reputation":2228,"user_id":1551974,"accept_rate":89,"display_name":"Silve2611"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":46556303,"answer_count":2,"score":0,"last_activity_date":1657937841,"creation_date":1507076594,"question_id":46555293,"body_markdown":"I have three fields \r\n\r\nhour -- minutes -- and total\r\n\r\nIf hour or minutes change i want to calculate a total. \r\nIf the total is changed i want to calculate the corresponding minutes and hours. \r\n\r\nExample: \r\n\r\n1h 30minutes = 1.5 Total\r\n\r\n2.25 Total = 2h 15minutes \r\n\r\nI am trying to achive this with watch \r\n\r\n    watch: {\r\n                hour: {\r\n                    handler: (new_hour, old_hour) =&gt; {\r\n                        if(isNaN(new_hour)){\r\n                            manual.hour = old_hour\r\n                        }else{\r\n                            manual.setTotal();\r\n                        }\r\n                    }\r\n                },\r\n                minutes: {\r\n                    handler: (new_minutes, old_minutes) =&gt; {\r\n                        if(isNaN(new_minutes)){\r\n                            manual.minutes = old_minutes\r\n                        }else{\r\n                            if(Number(new_minutes) &gt; 60){\r\n                                manual.minutes = old_minutes\r\n                            }else{\r\n                                manual.setTotal();\r\n                            }\r\n                        }\r\n                    }\r\n                },\r\n                total:{\r\n                    handler: (new_total, old_total) =&gt; {\r\n                        if(isNaN(new_total)) {\r\n                            manual.total = old_total;\r\n                        }else{\r\n                            const hour = new_total.split(&quot;,&quot;)[0];\r\n                            const minutes = new_total.split(&quot;,&quot;)[1];\r\n                            manual.hour = hour;\r\n                            manual.minutes = (minutes * 60).toFixed(0);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\nHowever this is resulting in a loop because on handler allways calls the other handler. How can this be done in a smarter way? ","title":"Preventing Vue from looping","body":"<p>I have three fields </p>\n\n<p>hour -- minutes -- and total</p>\n\n<p>If hour or minutes change i want to calculate a total. \nIf the total is changed i want to calculate the corresponding minutes and hours. </p>\n\n<p>Example: </p>\n\n<p>1h 30minutes = 1.5 Total</p>\n\n<p>2.25 Total = 2h 15minutes </p>\n\n<p>I am trying to achive this with watch </p>\n\n<pre><code>watch: {\n            hour: {\n                handler: (new_hour, old_hour) =&gt; {\n                    if(isNaN(new_hour)){\n                        manual.hour = old_hour\n                    }else{\n                        manual.setTotal();\n                    }\n                }\n            },\n            minutes: {\n                handler: (new_minutes, old_minutes) =&gt; {\n                    if(isNaN(new_minutes)){\n                        manual.minutes = old_minutes\n                    }else{\n                        if(Number(new_minutes) &gt; 60){\n                            manual.minutes = old_minutes\n                        }else{\n                            manual.setTotal();\n                        }\n                    }\n                }\n            },\n            total:{\n                handler: (new_total, old_total) =&gt; {\n                    if(isNaN(new_total)) {\n                        manual.total = old_total;\n                    }else{\n                        const hour = new_total.split(\",\")[0];\n                        const minutes = new_total.split(\",\")[1];\n                        manual.hour = hour;\n                        manual.minutes = (minutes * 60).toFixed(0);\n                    }\n                }\n            }\n        }\n</code></pre>\n\n<p>However this is resulting in a loop because on handler allways calls the other handler. How can this be done in a smarter way? </p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":3,"creation_date":1657887248,"post_id":72993775,"comment_id":128922340,"body_markdown":"Field injection happens after the object is constructed. Field initialisation happens during construction. Use constructor injection and initialise `counter` in your constructor.","body":"Field injection happens after the object is constructed. Field initialisation happens during construction. Use constructor injection and initialise <code>counter</code> in your constructor."}],"answers":[{"tags":[],"owner":{"account_id":4297204,"reputation":2499,"user_id":9926179,"display_name":"b.s"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1657887643,"creation_date":1657887643,"answer_id":72993920,"question_id":72993775,"body_markdown":"The issue you&#39;re facing is due to initialization of the following object\r\n\r\n    private final AtomicLong counter = new AtomicLong(dao.getLatestID());\r\n\r\nYou&#39;ve `Autowired` the `MessageBoxDAO` dependency which is not initialized at the time of execution of the above instruction. Either you should initialize the counter after the completion of instantization process or use construction injection.","title":"@Autowired object is null","body":"<p>The issue you're facing is due to initialization of the following object</p>\n<pre><code>private final AtomicLong counter = new AtomicLong(dao.getLatestID());\n</code></pre>\n<p>You've <code>Autowired</code> the <code>MessageBoxDAO</code> dependency which is not initialized at the time of execution of the above instruction. Either you should initialize the counter after the completion of instantization process or use construction injection.</p>\n"},{"tags":[],"owner":{"account_id":8900519,"reputation":503,"user_id":6644123,"display_name":"shanfeng"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1657936354,"creation_date":1657887701,"answer_id":72993932,"question_id":72993775,"body_markdown":"`counter` is a member variable of MessageBoxController. Spring use reflection to construct MessageBoxController instance. It would be initialized before dependency injection of dao. More details can be found here: https://stackoverflow.com/a/49443630/6644123  \r\nWe can try to rewrite counter&#39;s initialization time.\r\nAn example may be like code below:\r\n```\r\n@RestController\r\npublic class MessageBoxController {\r\n    @Autowired\r\n    MessageBoxDAO dao;\r\n\r\n    private final AtomicLong counter = new AtomicLong(0);\r\n\r\n    @PostConstruct\r\n    public void initialize() {\r\n        // initialize counter after dependency injection of dao\r\n        counter.set(dao.getLatestID());\r\n    }\r\n...\r\n}\r\n```","title":"@Autowired object is null","body":"<p><code>counter</code> is a member variable of MessageBoxController. Spring use reflection to construct MessageBoxController instance. It would be initialized before dependency injection of dao. More details can be found here: <a href=\"https://stackoverflow.com/a/49443630/6644123\">https://stackoverflow.com/a/49443630/6644123</a><br />\nWe can try to rewrite counter's initialization time.\nAn example may be like code below:</p>\n<pre><code>@RestController\npublic class MessageBoxController {\n    @Autowired\n    MessageBoxDAO dao;\n\n    private final AtomicLong counter = new AtomicLong(0);\n\n    @PostConstruct\n    public void initialize() {\n        // initialize counter after dependency injection of dao\n        counter.set(dao.getLatestID());\n    }\n...\n}\n</code></pre>\n"}],"owner":{"account_id":21060198,"reputation":21,"user_id":15478747,"display_name":"karczi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1646,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1657889698,"accepted_answer_id":72993932,"answer_count":2,"score":-1,"last_activity_date":1657936354,"creation_date":1657886943,"question_id":72993775,"body_markdown":"I&#39;m trying to autowire jdbctemplate in MessageBoxDAO class (which i guess is working fine), then i create autowired DAO object in the controller to get the latest ID in order to counter not getting repetitive IDs and start where it ended.\r\n\r\nHere&#39;s the code:\r\n\r\n```\r\n@Component\r\npublic class MessageBoxDAO {\r\n\r\n    @Autowired\r\n    JdbcTemplate jdbcTemplate;\r\n\r\n...\r\n\r\n    public long getLatestID() {\r\n        return jdbcTemplate.queryForObject(&quot;SELECT id FROM messages ORDER BY id DESC LIMIT 1&quot;, Integer.class);\r\n    }\r\n}\r\n```\r\n\r\n```\r\n@RestController\r\npublic class MessageBoxController {\r\n\r\n    @Autowired\r\n    MessageBoxDAO dao;\r\n\r\n    private final AtomicLong counter = new AtomicLong(dao.getLatestID());\r\n\r\n...\r\n}\r\n```\r\n\r\nFor some unknown to me reason &quot;dao&quot; is null, hence counter cannot be constructed and the program stops\r\n\r\n```\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.example.CRUD.MessageBoxController]: Constructor threw exception; nested exception is java.lang.NullPointerException: Cannot invoke &quot;com.example.CRUD.MessageBoxDAO.getLatestID()&quot; because &quot;this.dao&quot; is null\r\n```\r\n\r\nI&#39;m new to spring boot and I understand it might be a very simple problem, but can somebody point out where am I being wrong?\r\n","title":"@Autowired object is null","body":"<p>I'm trying to autowire jdbctemplate in MessageBoxDAO class (which i guess is working fine), then i create autowired DAO object in the controller to get the latest ID in order to counter not getting repetitive IDs and start where it ended.</p>\n<p>Here's the code:</p>\n<pre><code>@Component\npublic class MessageBoxDAO {\n\n    @Autowired\n    JdbcTemplate jdbcTemplate;\n\n...\n\n    public long getLatestID() {\n        return jdbcTemplate.queryForObject(&quot;SELECT id FROM messages ORDER BY id DESC LIMIT 1&quot;, Integer.class);\n    }\n}\n</code></pre>\n<pre><code>@RestController\npublic class MessageBoxController {\n\n    @Autowired\n    MessageBoxDAO dao;\n\n    private final AtomicLong counter = new AtomicLong(dao.getLatestID());\n\n...\n}\n</code></pre>\n<p>For some unknown to me reason &quot;dao&quot; is null, hence counter cannot be constructed and the program stops</p>\n<pre><code>Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.example.CRUD.MessageBoxController]: Constructor threw exception; nested exception is java.lang.NullPointerException: Cannot invoke &quot;com.example.CRUD.MessageBoxDAO.getLatestID()&quot; because &quot;this.dao&quot; is null\n</code></pre>\n<p>I'm new to spring boot and I understand it might be a very simple problem, but can somebody point out where am I being wrong?</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1657936068,"creation_date":1657936068,"answer_id":73001016,"question_id":73000951,"body_markdown":"The answer is use a foreground service.  You can&#39;t have a background service for more than 2 minutes on modern Android.  \r\n\r\nNow if your timer is long (say 1 minute+) an alarm instead of a timer would work better.  That wouldn&#39;t require a service, its a broadcast and your app would be restarted to handle it.  Of course if you go into Doze those are still limited.","title":"How can I make a background service for timer without showing a notification?","body":"<p>The answer is use a foreground service.  You can't have a background service for more than 2 minutes on modern Android.</p>\n<p>Now if your timer is long (say 1 minute+) an alarm instead of a timer would work better.  That wouldn't require a service, its a broadcast and your app would be restarted to handle it.  Of course if you go into Doze those are still limited.</p>\n"}],"owner":{"account_id":22639715,"reputation":1,"user_id":16816067,"display_name":"Sameer Saeed Anwar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1657936068,"creation_date":1657935223,"question_id":73000951,"body_markdown":"I have tried many solution but useless, all say use foreground service.\r\n\r\nis there a way to **trick** android or to use a proper way.\r\n\r\ni know it&#39;s restriction from android to inform the user that an app is draining the battery without using it.","title":"How can I make a background service for timer without showing a notification?","body":"<p>I have tried many solution but useless, all say use foreground service.</p>\n<p>is there a way to <strong>trick</strong> android or to use a proper way.</p>\n<p>i know it's restriction from android to inform the user that an app is draining the battery without using it.</p>\n"},{"tags":["java","postgresql","docker","testing","flyway"],"comments":[{"owner":{"account_id":14996604,"reputation":482,"user_id":10825746,"display_name":"vivekdubey"},"score":1,"creation_date":1570695582,"post_id":58318159,"comment_id":102996437,"body_markdown":"I think you should check db details are correct and you are able to create table using below script (not from code using externally any editor)               CREATE TABLE revinfo\n(\n    rev      INTEGER GENERATED BY DEFAULT AS IDENTITY ( START WITH 1 ),\n    revtstmp BIGINT,\n    PRIMARY KEY (rev)\n);     Error is pointing syntax error in query","body":"I think you should check db details are correct and you are able to create table using below script (not from code using externally any editor)               CREATE TABLE revinfo (     rev      INTEGER GENERATED BY DEFAULT AS IDENTITY ( START WITH 1 ),     revtstmp BIGINT,     PRIMARY KEY (rev) );     Error is pointing syntax error in query"},{"owner":{"account_id":14202722,"reputation":177,"user_id":10260204,"display_name":"Tambet Tamm"},"score":0,"creation_date":1570695999,"post_id":58318159,"comment_id":102996636,"body_markdown":"I run the query through pgAdmin 4, where I created new database and executed the same query with response: &quot;CREATE TABLE Query returned successfully in 77 msec.&quot;","body":"I run the query through pgAdmin 4, where I created new database and executed the same query with response: &quot;CREATE TABLE Query returned successfully in 77 msec.&quot;"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1570696312,"post_id":58318159,"comment_id":102996800,"body_markdown":"Make sure you are using the same version of Postgres for  your test. You are seemingly using quite an old version in Docker.","body":"Make sure you are using the same version of Postgres for  your test. You are seemingly using quite an old version in Docker."},{"owner":{"account_id":14202722,"reputation":177,"user_id":10260204,"display_name":"Tambet Tamm"},"score":0,"creation_date":1570696333,"post_id":58318159,"comment_id":102996810,"body_markdown":"Might the issue be that as the docker is creating container postgres:9.6.12, it is not compatible with the sql script?","body":"Might the issue be that as the docker is creating container postgres:9.6.12, it is not compatible with the sql script?"},{"owner":{"account_id":14996604,"reputation":482,"user_id":10825746,"display_name":"vivekdubey"},"score":1,"creation_date":1570696460,"post_id":58318159,"comment_id":102996867,"body_markdown":"Do not create new database try with existing database.try when you are running your code from container,create empty db(do not keep any tables) before running your code.","body":"Do not create new database try with existing database.try when you are running your code from container,create empty db(do not keep any tables) before running your code."}],"answers":[{"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1570697237,"creation_date":1570697237,"answer_id":58318893,"question_id":58318159,"body_markdown":"It looks like the test container with the database has started successfully, so no issue there, you&#39;re getting an empty database.\r\n\r\nThen you try running the flyway and this fails.\r\nFlyway in spring boot works during the initialization of the spring application context,\r\nso the actual migration runs while the application context gets initialized, so the migration failure looks like a spring failure.\r\n\r\nThe reason, however, is logged: the migration file has an invalid content: \r\n\r\n    Migration V1__initial_user.sql failed\r\n    -------------------------------------\r\n    SQL State  : 42601\r\n    Error Code : 0\r\n    Message    : ERROR: syntax error at or near &quot;GENERATED&quot;\r\n     Position: 45\r\n    Location   : db/migration/V1__initial_user.sql (/Users/villemossip/Desktop/GRP/GRP- \r\n    SAS/application/build/resources/main/db/migration/V1__initial_user.sql)\r\n    Line       : 36\r\n    Statement  : CREATE TABLE revinfo\r\n    (\r\n       rev      INTEGER GENERATED BY DEFAULT AS IDENTITY ( START WITH 1 ),\r\n       revtstmp BIGINT,\r\n       PRIMARY KEY (rev)\r\n    )\r\n\r\nThis `GENERATED BY` is unsupported.\r\n\r\nWhy? Probably your docker image includes the version of RDBMS that doesn&#39;t support this syntax. So it differs from the DB that you use in a local environment without docker.\r\n\r\nIn any case it&#39;s not about docker, spring or flyway but about the DB and the migration code.\r\n\r\nIn terms of resolution, I suggest running the docker image of the DB directly (without java, testcontainers and flyway).\r\nWhen it runs, just run this migration &quot;manually&quot; in pgadmin or something. You&#39;re expected to see the same error.","title":"BeanCreationException: Error creating bean with name &#39;flywayInitializer&#39;","body":"<p>It looks like the test container with the database has started successfully, so no issue there, you're getting an empty database.</p>\n\n<p>Then you try running the flyway and this fails.\nFlyway in spring boot works during the initialization of the spring application context,\nso the actual migration runs while the application context gets initialized, so the migration failure looks like a spring failure.</p>\n\n<p>The reason, however, is logged: the migration file has an invalid content: </p>\n\n<pre><code>Migration V1__initial_user.sql failed\n-------------------------------------\nSQL State  : 42601\nError Code : 0\nMessage    : ERROR: syntax error at or near \"GENERATED\"\n Position: 45\nLocation   : db/migration/V1__initial_user.sql (/Users/villemossip/Desktop/GRP/GRP- \nSAS/application/build/resources/main/db/migration/V1__initial_user.sql)\nLine       : 36\nStatement  : CREATE TABLE revinfo\n(\n   rev      INTEGER GENERATED BY DEFAULT AS IDENTITY ( START WITH 1 ),\n   revtstmp BIGINT,\n   PRIMARY KEY (rev)\n)\n</code></pre>\n\n<p>This <code>GENERATED BY</code> is unsupported.</p>\n\n<p>Why? Probably your docker image includes the version of RDBMS that doesn't support this syntax. So it differs from the DB that you use in a local environment without docker.</p>\n\n<p>In any case it's not about docker, spring or flyway but about the DB and the migration code.</p>\n\n<p>In terms of resolution, I suggest running the docker image of the DB directly (without java, testcontainers and flyway).\nWhen it runs, just run this migration \"manually\" in pgadmin or something. You're expected to see the same error.</p>\n"},{"tags":[],"owner":{"account_id":14202722,"reputation":177,"user_id":10260204,"display_name":"Tambet Tamm"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1570708502,"creation_date":1570708502,"answer_id":58322340,"question_id":58318159,"body_markdown":"Thank you [@M. Deinum][1] and [Mark Bramnik][2]!\r\n\r\nI found out that the issue is with Postgres version. For some reason by default docker image is created with old version 9.6.12, but sql script *GENERATED BY DEFAULT* was added to Postgres with version 10. \r\n\r\n**Solution 1** (Update the sql script to older version):\r\n```\r\nCREATE TABLE revinfo\r\n(\r\n    rev      INTEGER PRIMARY KEY NOT NULL,\r\n    revtstmp BIGINT\r\n);\r\n```\r\n**Solution 2:**\r\nChanged docker image version to 11.2 by creating CustomPostgreSQLContainer file in the project. \r\n```\r\nimport org.testcontainers.containers.PostgreSQLContainer;\r\n\r\npublic class CustomPostgreSQLContainer extends PostgreSQLContainer&lt;CustomPostgreSQLContainer&gt; {\r\n    private static final String IMAGE_VERSION = &quot;postgres:11.2&quot;;\r\n    private static CustomPostgreSQLContainer container;\r\n    CustomPostgreSQLContainer() {\r\n        super(IMAGE_VERSION);\r\n    }\r\n    public static CustomPostgreSQLContainer getInstance() {\r\n        if (container == null) {\r\n            container = new CustomPostgreSQLContainer();\r\n        }\r\n        return container;\r\n    }\r\n    @Override\r\n    public void start() {\r\n        super.start();\r\n        System.setProperty(&quot;spring.datasource.url&quot;, container.getJdbcUrl());\r\n        System.setProperty(&quot;spring.datasource.username&quot;, container.getUsername());\r\n        System.setProperty(&quot;spring.datasource.password&quot;, container.getPassword());\r\n    }\r\n    @Override\r\n    public void stop() {\r\n        //do nothing, JVM handles shut down\r\n    }\r\n}\r\n```\r\nAnd updating BaseIntTest file:\r\n```\r\n@Testcontainers\r\n@SpringBootTest\r\npublic class BaseIntTest {\r\n\r\n    @Container\r\n    private static final PostgreSQLContainer&lt;?&gt; container = CustomPostgreSQLContainer.getInstance();\r\n```\r\nAnd last removing two lines from test application.properties file:\r\n```\r\nspring.datasource.driver-class-name=org.testcontainers.jdbc.ContainerDatabaseDriver\r\nspring.datasource.url=jdbc:tc:postgresql://localhost:5433/test\r\n```\r\n \r\n\r\n\r\n  [1]: https://stackoverflow.com/users/2696260/m-deinum\r\n  [2]: https://stackoverflow.com/users/605153/mark-bramnik","title":"BeanCreationException: Error creating bean with name &#39;flywayInitializer&#39;","body":"<p>Thank you <a href=\"https://stackoverflow.com/users/2696260/m-deinum\">@M. Deinum</a> and <a href=\"https://stackoverflow.com/users/605153/mark-bramnik\">Mark Bramnik</a>!</p>\n\n<p>I found out that the issue is with Postgres version. For some reason by default docker image is created with old version 9.6.12, but sql script <em>GENERATED BY DEFAULT</em> was added to Postgres with version 10. </p>\n\n<p><strong>Solution 1</strong> (Update the sql script to older version):</p>\n\n<pre><code>CREATE TABLE revinfo\n(\n    rev      INTEGER PRIMARY KEY NOT NULL,\n    revtstmp BIGINT\n);\n</code></pre>\n\n<p><strong>Solution 2:</strong>\nChanged docker image version to 11.2 by creating CustomPostgreSQLContainer file in the project. </p>\n\n<pre><code>import org.testcontainers.containers.PostgreSQLContainer;\n\npublic class CustomPostgreSQLContainer extends PostgreSQLContainer&lt;CustomPostgreSQLContainer&gt; {\n    private static final String IMAGE_VERSION = \"postgres:11.2\";\n    private static CustomPostgreSQLContainer container;\n    CustomPostgreSQLContainer() {\n        super(IMAGE_VERSION);\n    }\n    public static CustomPostgreSQLContainer getInstance() {\n        if (container == null) {\n            container = new CustomPostgreSQLContainer();\n        }\n        return container;\n    }\n    @Override\n    public void start() {\n        super.start();\n        System.setProperty(\"spring.datasource.url\", container.getJdbcUrl());\n        System.setProperty(\"spring.datasource.username\", container.getUsername());\n        System.setProperty(\"spring.datasource.password\", container.getPassword());\n    }\n    @Override\n    public void stop() {\n        //do nothing, JVM handles shut down\n    }\n}\n</code></pre>\n\n<p>And updating BaseIntTest file:</p>\n\n<pre><code>@Testcontainers\n@SpringBootTest\npublic class BaseIntTest {\n\n    @Container\n    private static final PostgreSQLContainer&lt;?&gt; container = CustomPostgreSQLContainer.getInstance();\n</code></pre>\n\n<p>And last removing two lines from test application.properties file:</p>\n\n<pre><code>spring.datasource.driver-class-name=org.testcontainers.jdbc.ContainerDatabaseDriver\nspring.datasource.url=jdbc:tc:postgresql://localhost:5433/test\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18382936,"reputation":177,"user_id":13390654,"display_name":"Mohammed NAIMI"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635096746,"creation_date":1635096746,"answer_id":69699214,"question_id":58318159,"body_markdown":"The problem in my case was because of using `spring.datasource.url=jdbc:postgres://localhost:5432/todoListDb`\r\n instead of \r\n`spring.datasource.url=jdbc:postgresql://localhost:5432/todoListDb`\r\n\r\n(postgres instead of PostgreSQL) in my **application.properties** file\r\n\r\nSo try to use the right URL for your database and verify if there is a typo in your url","title":"BeanCreationException: Error creating bean with name &#39;flywayInitializer&#39;","body":"<p>The problem in my case was because of using <code>spring.datasource.url=jdbc:postgres://localhost:5432/todoListDb</code>\ninstead of\n<code>spring.datasource.url=jdbc:postgresql://localhost:5432/todoListDb</code></p>\n<p>(postgres instead of PostgreSQL) in my <strong>application.properties</strong> file</p>\n<p>So try to use the right URL for your database and verify if there is a typo in your url</p>\n"},{"tags":[],"owner":{"account_id":14115820,"reputation":1,"user_id":10197614,"display_name":"Balasaheb Nimse"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641490737,"creation_date":1641490737,"answer_id":70611268,"question_id":58318159,"body_markdown":"One reason for this issue was missing docker DB version:  &lt;embedded-database-spring-test.version&gt;2.0.1&lt;/embedded-database-spring-test.version&gt;\r\n\r\nBy adding this specific version, it worked for me.","title":"BeanCreationException: Error creating bean with name &#39;flywayInitializer&#39;","body":"<p>One reason for this issue was missing docker DB version:  &lt;embedded-database-spring-test.version&gt;2.0.1&lt;/embedded-database-spring-test.version&gt;</p>\n<p>By adding this specific version, it worked for me.</p>\n"},{"tags":[],"owner":{"account_id":8964938,"reputation":749,"user_id":6686007,"display_name":"Roberto Petrilli"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1651487164,"creation_date":1651487164,"answer_id":72085396,"question_id":58318159,"body_markdown":"In my case I added in my application.properties file \r\n\r\n    spring.flyway.baselineOnMigrate = true\r\n\r\nand I had also to start from version 1.1 instead of 1 otherwise flyway throws an error  (flyway 8.0.5)\r\n\r\n\r\n","title":"BeanCreationException: Error creating bean with name &#39;flywayInitializer&#39;","body":"<p>In my case I added in my application.properties file</p>\n<pre><code>spring.flyway.baselineOnMigrate = true\n</code></pre>\n<p>and I had also to start from version 1.1 instead of 1 otherwise flyway throws an error  (flyway 8.0.5)</p>\n"},{"tags":[],"owner":{"account_id":16875787,"reputation":1,"user_id":12203235,"display_name":"Piiritaja"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657935831,"creation_date":1657935831,"answer_id":73000998,"question_id":58318159,"body_markdown":"As mentioned `GENERATED BY DEFAUL` needs a newer version of postgres image. In your case the postgres image defaults to 9.6.12.\r\n\r\nSimple solution is to just update the datasource url in `application.properties` and point to a newer postgres image there.\r\n\r\n    spring.datasource.url=jdbc:tc:postgresql:11.2://localhost:5433/test","title":"BeanCreationException: Error creating bean with name &#39;flywayInitializer&#39;","body":"<p>As mentioned <code>GENERATED BY DEFAUL</code> needs a newer version of postgres image. In your case the postgres image defaults to 9.6.12.</p>\n<p>Simple solution is to just update the datasource url in <code>application.properties</code> and point to a newer postgres image there.</p>\n<pre><code>spring.datasource.url=jdbc:tc:postgresql:11.2://localhost:5433/test\n</code></pre>\n"}],"owner":{"account_id":14202722,"reputation":177,"user_id":10260204,"display_name":"Tambet Tamm"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74845,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":58322340,"answer_count":6,"score":9,"last_activity_date":1657935831,"creation_date":1570694715,"question_id":58318159,"body_markdown":"I am trying to run my project tests in a docker container. All of the tests work just fine when running locally. Errors started occurring when I tried to move my testing to docker container. \r\nHere is the error message:\r\n``` \r\njava.lang.IllegalStateException: Failed to load ApplicationContext\r\n[...]\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;flywayInitializer&#39; defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: \r\nMigration V1__initial_user.sql failed\r\n-------------------------------------\r\nSQL State  : 42601\r\nError Code : 0\r\nMessage    : ERROR: syntax error at or near &quot;GENERATED&quot;\r\n  Position: 45\r\nLocation   : db/migration/V1__initial_user.sql (/Users/villemossip/Desktop/GRP/GRP-SAS/application/build/resources/main/db/migration/V1__initial_user.sql)\r\nLine       : 36\r\nStatement  : CREATE TABLE revinfo\r\n(\r\n    rev      INTEGER GENERATED BY DEFAULT AS IDENTITY ( START WITH 1 ),\r\n    revtstmp BIGINT,\r\n    PRIMARY KEY (rev)\r\n)\r\n\r\n ```\r\nFrom the log we can see that container image was created, but it fails to migrate the sql schema:\r\n```\r\n[...]\r\n2019-10-10 10:36:18.768  INFO 49547 --- [           main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 5.2.4 by Boxfuse\r\n2019-10-10 10:36:18.777  INFO 49547 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n2019-10-10 10:36:18.795  INFO 49547 --- [           main] &#128051; [postgres:9.6.12]                     : Creating container for image: postgres:9.6.12\r\n2019-10-10 10:36:19.001  INFO 49547 --- [           main] &#128051; [postgres:9.6.12]                     : Starting container with ID: a32dd0850baf34770cce9bdc81918cd4db40502188b85dfaa90f74e2900f9fa7\r\n2019-10-10 10:36:19.547  INFO 49547 --- [           main] &#128051; [postgres:9.6.12]                     : Container postgres:9.6.12 is starting: a32dd0850baf34770cce9bdc81918cd4db40502188b85dfaa90f74e2900f9fa7\r\n2019-10-10 10:36:23.342  INFO 49547 --- [           main] &#128051; [postgres:9.6.12]                     : Container postgres:9.6.12 started\r\n2019-10-10 10:36:23.426  INFO 49547 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\r\n2019-10-10 10:36:23.431  INFO 49547 --- [           main] o.f.c.internal.database.DatabaseFactory  : Database: jdbc:postgresql://localhost:32834/test (PostgreSQL 9.6)\r\n2019-10-10 10:36:23.488  INFO 49547 --- [           main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.024s)\r\n2019-10-10 10:36:23.501  INFO 49547 --- [           main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table: &quot;public&quot;.&quot;flyway_schema_history&quot;\r\n2019-10-10 10:36:23.519  INFO 49547 --- [           main] o.f.core.internal.command.DbMigrate      : Current version of schema &quot;public&quot;: &lt;&lt; Empty Schema &gt;&gt;\r\n2019-10-10 10:36:23.520  INFO 49547 --- [           main] o.f.core.internal.command.DbMigrate      : Migrating schema &quot;public&quot; to version 1 - initial user\r\n2019-10-10 10:36:23.542 ERROR 49547 --- [           main] o.f.core.internal.command.DbMigrate      : Migration of schema &quot;public&quot; to version 1 - initial user failed! Changes successfully rolled back.\r\n2019-10-10 10:36:23.546  WARN 49547 --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;flywayInitializer&#39; defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: \r\nMigration V1__initial_user.sql failed\r\n-------------------------------------\r\n[...]\r\n ```\r\nHere is part of the sql script (app/src/main/resources/db/migration):\r\n```\r\n[...]\r\nconstraint user_aud_pkey primary key (id, rev)\r\n);\r\n\r\nCREATE TABLE revinfo\r\n(\r\n    rev      INTEGER GENERATED BY DEFAULT AS IDENTITY ( START WITH 1 ),\r\n    revtstmp BIGINT,\r\n    PRIMARY KEY (rev)\r\n);\r\n\r\nCREATE SEQUENCE hibernate_sequence INCREMENT 1 MINVALUE 1\r\n    MAXVALUE 9223372036854775807\r\n    START 1\r\n    CACHE 1;\r\n ```\r\nHere is &quot;application.properties&quot; (app/test/java/resources):\r\n```\r\nspring.datasource.driver-class-name=org.testcontainers.jdbc.ContainerDatabaseDriver\r\nspring.datasource.url=jdbc:tc:postgresql://localhost:5433/test\r\nspring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true\r\nspring.jpa.show-sql=true\r\nspring.jpa.hibernate.ddl-auto=validate\r\nspring.jackson.default-property-inclusion=NON_NULL\r\n\r\nspring.flyway.baselineOnMigrate=true\r\nspring.flyway.check-location=true\r\nspring.flyway.locations=classpath:db/migration\r\nspring.flyway.schemas=public\r\nspring.flyway.enabled=true\r\n ```\r\nAlso in the same directory I have container-license-acceptance.txt file.\r\n\r\nInside &quot;build.gradle&quot; I added the following lines (app/build.gradle):\r\n```\r\ndependencies {\r\n    [...]\r\n    testImplementation &quot;org.testcontainers:junit-jupiter:1.11.3&quot;\r\n    testImplementation &quot;org.testcontainers:postgresql:1.11.3&quot;\r\n\r\n}\r\n ```\r\nInside BaseInitTest file, I have the following lines (app/test/java/com):\r\n```\r\n@Testcontainers\r\n@SpringBootTest\r\npublic class BaseIntTest {\r\n\r\n    @Container\r\n    private static final PostgreSQLContainer&lt;?&gt; container = new PostgreSQLContainer&lt;&gt;();\r\n\r\n    [...]\r\n ```\r\n\r\nI don&#39;t understand, how can the same tests pass at first, but fail when I move them to docker container?","title":"BeanCreationException: Error creating bean with name &#39;flywayInitializer&#39;","body":"<p>I am trying to run my project tests in a docker container. All of the tests work just fine when running locally. Errors started occurring when I tried to move my testing to docker container. \nHere is the error message:</p>\n\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext\n[...]\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: \nMigration V1__initial_user.sql failed\n-------------------------------------\nSQL State  : 42601\nError Code : 0\nMessage    : ERROR: syntax error at or near \"GENERATED\"\n  Position: 45\nLocation   : db/migration/V1__initial_user.sql (/Users/villemossip/Desktop/GRP/GRP-SAS/application/build/resources/main/db/migration/V1__initial_user.sql)\nLine       : 36\nStatement  : CREATE TABLE revinfo\n(\n    rev      INTEGER GENERATED BY DEFAULT AS IDENTITY ( START WITH 1 ),\n    revtstmp BIGINT,\n    PRIMARY KEY (rev)\n)\n\n</code></pre>\n\n<p>From the log we can see that container image was created, but it fails to migrate the sql schema:</p>\n\n<pre><code>[...]\n2019-10-10 10:36:18.768  INFO 49547 --- [           main] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 5.2.4 by Boxfuse\n2019-10-10 10:36:18.777  INFO 49547 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2019-10-10 10:36:18.795  INFO 49547 --- [           main]  [postgres:9.6.12]                     : Creating container for image: postgres:9.6.12\n2019-10-10 10:36:19.001  INFO 49547 --- [           main]  [postgres:9.6.12]                     : Starting container with ID: a32dd0850baf34770cce9bdc81918cd4db40502188b85dfaa90f74e2900f9fa7\n2019-10-10 10:36:19.547  INFO 49547 --- [           main]  [postgres:9.6.12]                     : Container postgres:9.6.12 is starting: a32dd0850baf34770cce9bdc81918cd4db40502188b85dfaa90f74e2900f9fa7\n2019-10-10 10:36:23.342  INFO 49547 --- [           main]  [postgres:9.6.12]                     : Container postgres:9.6.12 started\n2019-10-10 10:36:23.426  INFO 49547 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n2019-10-10 10:36:23.431  INFO 49547 --- [           main] o.f.c.internal.database.DatabaseFactory  : Database: jdbc:postgresql://localhost:32834/test (PostgreSQL 9.6)\n2019-10-10 10:36:23.488  INFO 49547 --- [           main] o.f.core.internal.command.DbValidate     : Successfully validated 6 migrations (execution time 00:00.024s)\n2019-10-10 10:36:23.501  INFO 49547 --- [           main] o.f.c.i.s.JdbcTableSchemaHistory         : Creating Schema History table: \"public\".\"flyway_schema_history\"\n2019-10-10 10:36:23.519  INFO 49547 --- [           main] o.f.core.internal.command.DbMigrate      : Current version of schema \"public\": &lt;&lt; Empty Schema &gt;&gt;\n2019-10-10 10:36:23.520  INFO 49547 --- [           main] o.f.core.internal.command.DbMigrate      : Migrating schema \"public\" to version 1 - initial user\n2019-10-10 10:36:23.542 ERROR 49547 --- [           main] o.f.core.internal.command.DbMigrate      : Migration of schema \"public\" to version 1 - initial user failed! Changes successfully rolled back.\n2019-10-10 10:36:23.546  WARN 49547 --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: \nMigration V1__initial_user.sql failed\n-------------------------------------\n[...]\n</code></pre>\n\n<p>Here is part of the sql script (app/src/main/resources/db/migration):</p>\n\n<pre><code>[...]\nconstraint user_aud_pkey primary key (id, rev)\n);\n\nCREATE TABLE revinfo\n(\n    rev      INTEGER GENERATED BY DEFAULT AS IDENTITY ( START WITH 1 ),\n    revtstmp BIGINT,\n    PRIMARY KEY (rev)\n);\n\nCREATE SEQUENCE hibernate_sequence INCREMENT 1 MINVALUE 1\n    MAXVALUE 9223372036854775807\n    START 1\n    CACHE 1;\n</code></pre>\n\n<p>Here is \"application.properties\" (app/test/java/resources):</p>\n\n<pre><code>spring.datasource.driver-class-name=org.testcontainers.jdbc.ContainerDatabaseDriver\nspring.datasource.url=jdbc:tc:postgresql://localhost:5433/test\nspring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true\nspring.jpa.show-sql=true\nspring.jpa.hibernate.ddl-auto=validate\nspring.jackson.default-property-inclusion=NON_NULL\n\nspring.flyway.baselineOnMigrate=true\nspring.flyway.check-location=true\nspring.flyway.locations=classpath:db/migration\nspring.flyway.schemas=public\nspring.flyway.enabled=true\n</code></pre>\n\n<p>Also in the same directory I have container-license-acceptance.txt file.</p>\n\n<p>Inside \"build.gradle\" I added the following lines (app/build.gradle):</p>\n\n<pre><code>dependencies {\n    [...]\n    testImplementation \"org.testcontainers:junit-jupiter:1.11.3\"\n    testImplementation \"org.testcontainers:postgresql:1.11.3\"\n\n}\n</code></pre>\n\n<p>Inside BaseInitTest file, I have the following lines (app/test/java/com):</p>\n\n<pre><code>@Testcontainers\n@SpringBootTest\npublic class BaseIntTest {\n\n    @Container\n    private static final PostgreSQLContainer&lt;?&gt; container = new PostgreSQLContainer&lt;&gt;();\n\n    [...]\n</code></pre>\n\n<p>I don't understand, how can the same tests pass at first, but fail when I move them to docker container?</p>\n"},{"tags":["java","multithreading","reentrancy"],"answers":[{"tags":[],"owner":{"account_id":134022,"reputation":717183,"user_id":335858,"accept_rate":81,"display_name":"Sergey Kalinichenko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1391395712,"creation_date":1391395712,"answer_id":21518962,"question_id":21518938,"body_markdown":"I think you got confused by the author&#39;s use of the word re-entrancy. By &quot;locks are re-entrant&quot; he meant that if your thread holds a lock already, Java allows entering a `synchronized` method from inside another `synchronized` method, or re-entering the same `synchronized` method recursively.\r\n\r\nThis is different from a more common meaning of re-entrancy as the ability of a piece of code to be re-entered, concurrently or on the same thread when the status is preserved.\r\n\r\nWithout re-entrancy in the author&#39;s meaning the `synchronized` of the `super.doSomething()` would block on trying to acquire the lock held by `this.doSomething()`, because they block on the same object (namely, on `this`).","title":"Re-entrancy in Java saves us from a deadlock situation in this code sample.. How, why?","body":"<p>I think you got confused by the author's use of the word re-entrancy. By \"locks are re-entrant\" he meant that if your thread holds a lock already, Java allows entering a <code>synchronized</code> method from inside another <code>synchronized</code> method, or re-entering the same <code>synchronized</code> method recursively.</p>\n\n<p>This is different from a more common meaning of re-entrancy as the ability of a piece of code to be re-entered, concurrently or on the same thread when the status is preserved.</p>\n\n<p>Without re-entrancy in the author's meaning the <code>synchronized</code> of the <code>super.doSomething()</code> would block on trying to acquire the lock held by <code>this.doSomething()</code>, because they block on the same object (namely, on <code>this</code>).</p>\n"},{"tags":[],"owner":{"account_id":1204476,"reputation":5633,"user_id":1174467,"display_name":"superEb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1391396515,"creation_date":1391396140,"answer_id":21519017,"question_id":21518938,"body_markdown":"You have two methods that lock on the same object - an instance of `LoggingWidget` - that would be run by the same thread.\r\n\r\n1. An instance of `LoggingWidget` is created\r\n2. The `doSomething` method defined in the `LoggingWidget` class is called against that instance\r\n3. A lock on the instance of `LoggingWidget` is obtained\r\n4. The `println` statement is executed\r\n5. The `doSomething` method of the `LoggingWidget` class calls the `doSomething` method defined in the `Widget` class\r\n6. A lock on the same instance of `LoggingWidget` is needed to proceed, but it&#39;s already held by the thread executing the first method\r\n\r\nIf locks were not re-entrant, a deadlock would occur at step 6 since the lock on the instance is already held. But since built-in `Object` locks in Java are re-entrant, step 6 continues as normal since the lock that is needed is already held by the executing thread.","title":"Re-entrancy in Java saves us from a deadlock situation in this code sample.. How, why?","body":"<p>You have two methods that lock on the same object - an instance of <code>LoggingWidget</code> - that would be run by the same thread.</p>\n\n<ol>\n<li>An instance of <code>LoggingWidget</code> is created</li>\n<li>The <code>doSomething</code> method defined in the <code>LoggingWidget</code> class is called against that instance</li>\n<li>A lock on the instance of <code>LoggingWidget</code> is obtained</li>\n<li>The <code>println</code> statement is executed</li>\n<li>The <code>doSomething</code> method of the <code>LoggingWidget</code> class calls the <code>doSomething</code> method defined in the <code>Widget</code> class</li>\n<li>A lock on the same instance of <code>LoggingWidget</code> is needed to proceed, but it's already held by the thread executing the first method</li>\n</ol>\n\n<p>If locks were not re-entrant, a deadlock would occur at step 6 since the lock on the instance is already held. But since built-in <code>Object</code> locks in Java are re-entrant, step 6 continues as normal since the lock that is needed is already held by the executing thread.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1657935211,"creation_date":1391397107,"answer_id":21519135,"question_id":21518938,"body_markdown":"&gt; How, why, which thread?\r\n\r\nThe thread that deadlocks is the thread that attempts to acquire the lock; i.e. this one.\r\n\r\n------------------\r\n\r\nHow:\r\n\r\n  1. Obtain reference to a `LoggingWidget` instance\r\n\r\n  1. Call `doSomething()` on the instance\r\n \r\n  1. The call to `LoggingWidget.doSomething()` acquires the lock on the instance, since the method is `synchronized`.\r\n\r\n  1. The called method then calls `super.doSomething()`.\r\n\r\n  1. The call to `Widget.doSomething()` tries to acquire the lock on the instance (again!), since the supertype method is also `synchronized`.\r\n\r\nAt step #5. the current thread attempts to acquire a primitive lock on an instance that it has already locked.  If primitive locks were not reentrant, then that would deadlock ... \r\n\r\n  - &quot;some thread&quot; already holds the lock on the object, so we have to wait for that thread to release the lock,\r\n\r\n  - that &quot;some thread&quot; is the current thread ... and we are not going to release the lock until we return from the `LoggingWidget.doSomething()`\r\n\r\n  - but that can&#39;t happen until after we&#39;ve completed the call to `Widget.doSomething()`\r\n\r\n  - and that can&#39;t happen until after we&#39;ve acquired the lock\r\n\r\n  - ..... DEADLOCK!\r\n\r\nBut fortunately, there is no deadlock in reality.  The fact that primitive locks are reentrant means that step #5 doesn&#39;t need to *acquire* the lock (it already has it), and the whole waiting-for-myself-to-do-something-that-cannot-happen scenario simply does not arise.\r\n\r\n------------------\r\n\r\nWhy:  By the inescapable power of [Murphy&#39;s Law][1]. *&quot;If anything can go wrong, it will.&quot;* :-)\r\n\r\nWhich thread:  According to [Finagle&#39;s Law][2], it will be the one that causes the most damage. :-)\r\n\r\n&lt;sup&gt;These so-called &quot;laws&quot; have not been demonstrated scientifically.  But that doesn&#39;t mean you should ignore what they are intended to teach.&lt;/sup&gt;\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Murphy%27s_law\r\n  [2]: https://en.wikipedia.org/wiki/Finagle%27s_law","title":"Re-entrancy in Java saves us from a deadlock situation in this code sample.. How, why?","body":"<blockquote>\n<p>How, why, which thread?</p>\n</blockquote>\n<p>The thread that deadlocks is the thread that attempts to acquire the lock; i.e. this one.</p>\n<hr />\n<p>How:</p>\n<ol>\n<li><p>Obtain reference to a <code>LoggingWidget</code> instance</p>\n</li>\n<li><p>Call <code>doSomething()</code> on the instance</p>\n</li>\n<li><p>The call to <code>LoggingWidget.doSomething()</code> acquires the lock on the instance, since the method is <code>synchronized</code>.</p>\n</li>\n<li><p>The called method then calls <code>super.doSomething()</code>.</p>\n</li>\n<li><p>The call to <code>Widget.doSomething()</code> tries to acquire the lock on the instance (again!), since the supertype method is also <code>synchronized</code>.</p>\n</li>\n</ol>\n<p>At step #5. the current thread attempts to acquire a primitive lock on an instance that it has already locked.  If primitive locks were not reentrant, then that would deadlock ...</p>\n<ul>\n<li><p>&quot;some thread&quot; already holds the lock on the object, so we have to wait for that thread to release the lock,</p>\n</li>\n<li><p>that &quot;some thread&quot; is the current thread ... and we are not going to release the lock until we return from the <code>LoggingWidget.doSomething()</code></p>\n</li>\n<li><p>but that can't happen until after we've completed the call to <code>Widget.doSomething()</code></p>\n</li>\n<li><p>and that can't happen until after we've acquired the lock</p>\n</li>\n<li><p>..... DEADLOCK!</p>\n</li>\n</ul>\n<p>But fortunately, there is no deadlock in reality.  The fact that primitive locks are reentrant means that step #5 doesn't need to <em>acquire</em> the lock (it already has it), and the whole waiting-for-myself-to-do-something-that-cannot-happen scenario simply does not arise.</p>\n<hr />\n<p>Why:  By the inescapable power of <a href=\"https://en.wikipedia.org/wiki/Murphy%27s_law\" rel=\"nofollow noreferrer\">Murphy's Law</a>. <em>&quot;If anything can go wrong, it will.&quot;</em> :-)</p>\n<p>Which thread:  According to <a href=\"https://en.wikipedia.org/wiki/Finagle%27s_law\" rel=\"nofollow noreferrer\">Finagle's Law</a>, it will be the one that causes the most damage. :-)</p>\n<p><sup>These so-called &quot;laws&quot; have not been demonstrated scientifically.  But that doesn't mean you should ignore what they are intended to teach.</sup></p>\n"}],"owner":{"account_id":1553656,"reputation":8158,"user_id":1445444,"accept_rate":81,"display_name":"Horse Voice"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":251,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":21519135,"answer_count":3,"score":1,"last_activity_date":1657935211,"creation_date":1391395375,"question_id":21518938,"body_markdown":"I&#39;m new to Java and OOP. I&#39;m reading concurrency in java and in chapter 2, it talks about re-entrancy. I don&#39;t quite understand how a deadlock situation would occur. Can some one break this situation down for me to understand the details line by line? \r\n\r\nThank you in advance. \r\n\r\n&gt; If intrinsic locks were not reentrant, the call to super.doSomething\r\n&gt; would never be able to acquire the lock because it would be \r\n&gt; considered  already  held, and the  thread would  permanently  stall \r\n&gt; waiting  for a  lock  it can never  acquire.\r\n\r\n    public class Widget {\r\n        public synchronized void doSomething() {\r\n          ...\r\n        }\r\n    }\r\n    public class LoggingWidget extends Widget {\r\n       public synchronized void doSomething() {\r\n          System.out.println(toString() + &quot;: calling doSomething&quot;);\r\n          super.doSomething();\r\n       }\r\n    }\r\n\r\n&gt; and the  thread would  permanently  stall  waiting  for a  lock  it\r\n&gt; can never  acquire. \r\n\r\nHow, why, which thread?\r\n\r\n","title":"Re-entrancy in Java saves us from a deadlock situation in this code sample.. How, why?","body":"<p>I'm new to Java and OOP. I'm reading concurrency in java and in chapter 2, it talks about re-entrancy. I don't quite understand how a deadlock situation would occur. Can some one break this situation down for me to understand the details line by line? </p>\n\n<p>Thank you in advance. </p>\n\n<blockquote>\n  <p>If intrinsic locks were not reentrant, the call to super.doSomething\n  would never be able to acquire the lock because it would be \n  considered  already  held, and the  thread would  permanently  stall \n  waiting  for a  lock  it can never  acquire.</p>\n</blockquote>\n\n<pre><code>public class Widget {\n    public synchronized void doSomething() {\n      ...\n    }\n}\npublic class LoggingWidget extends Widget {\n   public synchronized void doSomething() {\n      System.out.println(toString() + \": calling doSomething\");\n      super.doSomething();\n   }\n}\n</code></pre>\n\n<blockquote>\n  <p>and the  thread would  permanently  stall  waiting  for a  lock  it\n  can never  acquire. </p>\n</blockquote>\n\n<p>How, why, which thread?</p>\n"},{"tags":["java","eclipse","junit"],"answers":[{"tags":[],"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657934861,"creation_date":1657934861,"answer_id":73000934,"question_id":73000640,"body_markdown":"The construction of `Contact` may throw a checked exception, `InvalidArgException`.\r\n\r\nBecause the construction of `ContactTest` involves creating a `Contact` instance, that may also throw an `InvalidArgException`, but `ContactTest` does not declare this.\r\n\r\nYou need to add a constructor to `ContactTest`:\r\n```\r\n...\r\npublic ContactTest() throws InvalidArgException {\r\n}\r\n...\r\n```\r\n(I&#39;m not sure why your example refers to super constructors. In my JDK I just get `java: unreported exception java.lang.Exception; must be caught or declared to be thrown`)","title":"Having trouble implementing JUnit tests","body":"<p>The construction of <code>Contact</code> may throw a checked exception, <code>InvalidArgException</code>.</p>\n<p>Because the construction of <code>ContactTest</code> involves creating a <code>Contact</code> instance, that may also throw an <code>InvalidArgException</code>, but <code>ContactTest</code> does not declare this.</p>\n<p>You need to add a constructor to <code>ContactTest</code>:</p>\n<pre><code>...\npublic ContactTest() throws InvalidArgException {\n}\n...\n</code></pre>\n<p>(I'm not sure why your example refers to super constructors. In my JDK I just get <code>java: unreported exception java.lang.Exception; must be caught or declared to be thrown</code>)</p>\n"}],"owner":{"account_id":23794879,"reputation":1,"user_id":17805875,"display_name":"GiantFlyer1945"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1657934861,"creation_date":1657930248,"question_id":73000640,"body_markdown":"So I am working on using JUnit test cases in Eclipse and I am getting an error with my constructor that says &quot;Default constructor cannot handle exception type InvalidArgException thrown by implicit super constructor. Must define an explicit constructor&quot;.   \r\n\r\nI&#39;ll include everything that I have so far, but I am stuck here and not really sure what to do now. Any help would be greatly appreciated!!\r\n\r\nThis is the test class\r\n\r\n    package test;\r\n\r\n        import static org.junit.jupiter.api.Assertions.*;\r\n\r\n        import org.junit.jupiter.api.Test;\r\n\r\n\r\n        import Main.Contact;\r\n\r\n        class ContactTest {\r\n\t\r\n\t\r\n\t\r\n\tContact contact = new Contact(&quot;13579&quot;, &quot;Garrett&quot;, &quot;Strang&quot;, &quot;1234567890&quot;, &quot;2468 Washington Avenue&quot;);\r\n\r\n\t@Test\r\n\tvoid getContactID() {\r\n\t\tassertEquals(&quot;13579&quot;, contact.getContactID());\r\n\t}\r\n\t\r\n\t@Test\r\n\tvoid getFirstname() {\r\n\t\tassertEquals(&quot;Garrett&quot;, contact.getFirstName());\r\n\t}\r\n\t\r\n\t@Test\r\n\tvoid getLastName() {\r\n\t\tassertEquals(&quot;Strang&quot;, contact.getLastName());\r\n\t}\r\n\t\r\n\t@Test\r\n\tvoid getPhoneNumber() {\r\n\t\tassertEquals(&quot;1234567890&quot;, contact.getPhoneNumber());\r\n\t}\r\n\t\r\n\t@Test\r\n\tvoid getAddress() {\r\n\t\tassertEquals(&quot;2468 Washington Avenue&quot;, contact.getAddress());\r\n\t}\r\n}\r\n\r\n\r\nThe Contact Class:\r\n\r\n    public class Contact {\r\n\t\r\n\t//declare private contact objects\r\n\tprivate String contactID;\r\n\tprivate String firstName;\r\n\tprivate String lastName;\r\n\tprivate String phoneNum;\r\n\tprivate String address;\r\n\t\r\n\t\r\n\t//Ensure invalid objects are caught  \r\n\t\r\n\tpublic Contact(String cID, String fN, String lN, String pN, String addr) throws InvalidArgException {\r\n\t\t\r\n\t\t//contact ID string cannot be longer than 10 characters. The contact ID shall not be null and shall not be updatable.\r\n\t\tif (cID == null || cID.length() &gt; 10) {\r\n\t\t\tthrow new InvalidArgException(&quot;CONTACT ID IS INVALID&quot;);\r\n\t\t}\r\n\t\tif (fN == null || fN.length() &gt; 10) {\r\n\t\t\tthrow new InvalidArgException(&quot;FIRST NAME IS INVALID&quot;);\r\n\t\t}\r\n\t\tif (lN == null || lN.length() &gt; 10) {\r\n\t\t\tthrow new InvalidArgException(&quot;LAST NAME IS INVALID&quot;);\r\n\t\t}\r\n\t\tif (pN == null || pN.length() &gt; 10) {\r\n\t\t\tthrow new InvalidArgException(&quot;PHONE NUMBER IS INVALID&quot;);\r\n\t\t}\r\n\t\tif (addr == null || addr.length() &gt; 10) {\r\n\t\t\tthrow new InvalidArgException(&quot;ADDRESS IS INVALID&quot;);\r\n\t\t}\t\r\n\t\t\r\n\t\t\r\n\t}\r\n\r\nThe InvalidArgExcetion class:\r\n\r\n    package Main;\r\n\r\n        @SuppressWarnings(&quot;serial&quot;)\r\n        public class InvalidArgException extends Exception {\r\n\r\n\tpublic InvalidArgException(String string) {\r\n\t\tsuper(string);\r\n\t\tSystem.out.println(string + &quot;IS AN INVALID ARGUMENT&quot;);\r\n\t}\r\n\r\n}\r\n\r\n\t","title":"Having trouble implementing JUnit tests","body":"<p>So I am working on using JUnit test cases in Eclipse and I am getting an error with my constructor that says &quot;Default constructor cannot handle exception type InvalidArgException thrown by implicit super constructor. Must define an explicit constructor&quot;.</p>\n<p>I'll include everything that I have so far, but I am stuck here and not really sure what to do now. Any help would be greatly appreciated!!</p>\n<p>This is the test class</p>\n<pre><code>package test;\n\n    import static org.junit.jupiter.api.Assertions.*;\n\n    import org.junit.jupiter.api.Test;\n\n\n    import Main.Contact;\n\n    class ContactTest {\n\n\n\nContact contact = new Contact(&quot;13579&quot;, &quot;Garrett&quot;, &quot;Strang&quot;, &quot;1234567890&quot;, &quot;2468 Washington Avenue&quot;);\n\n@Test\nvoid getContactID() {\n    assertEquals(&quot;13579&quot;, contact.getContactID());\n}\n\n@Test\nvoid getFirstname() {\n    assertEquals(&quot;Garrett&quot;, contact.getFirstName());\n}\n\n@Test\nvoid getLastName() {\n    assertEquals(&quot;Strang&quot;, contact.getLastName());\n}\n\n@Test\nvoid getPhoneNumber() {\n    assertEquals(&quot;1234567890&quot;, contact.getPhoneNumber());\n}\n\n@Test\nvoid getAddress() {\n    assertEquals(&quot;2468 Washington Avenue&quot;, contact.getAddress());\n}\n</code></pre>\n<p>}</p>\n<p>The Contact Class:</p>\n<pre><code>public class Contact {\n\n//declare private contact objects\nprivate String contactID;\nprivate String firstName;\nprivate String lastName;\nprivate String phoneNum;\nprivate String address;\n\n\n//Ensure invalid objects are caught  \n\npublic Contact(String cID, String fN, String lN, String pN, String addr) throws InvalidArgException {\n    \n    //contact ID string cannot be longer than 10 characters. The contact ID shall not be null and shall not be updatable.\n    if (cID == null || cID.length() &gt; 10) {\n        throw new InvalidArgException(&quot;CONTACT ID IS INVALID&quot;);\n    }\n    if (fN == null || fN.length() &gt; 10) {\n        throw new InvalidArgException(&quot;FIRST NAME IS INVALID&quot;);\n    }\n    if (lN == null || lN.length() &gt; 10) {\n        throw new InvalidArgException(&quot;LAST NAME IS INVALID&quot;);\n    }\n    if (pN == null || pN.length() &gt; 10) {\n        throw new InvalidArgException(&quot;PHONE NUMBER IS INVALID&quot;);\n    }\n    if (addr == null || addr.length() &gt; 10) {\n        throw new InvalidArgException(&quot;ADDRESS IS INVALID&quot;);\n    }   \n    \n    \n}\n</code></pre>\n<p>The InvalidArgExcetion class:</p>\n<pre><code>package Main;\n\n    @SuppressWarnings(&quot;serial&quot;)\n    public class InvalidArgException extends Exception {\n\npublic InvalidArgException(String string) {\n    super(string);\n    System.out.println(string + &quot;IS AN INVALID ARGUMENT&quot;);\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","php","encryption","aes"],"comments":[{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":1,"creation_date":1657881240,"post_id":72991396,"comment_id":128920363,"body_markdown":"`pkcs5_pad()` and `pkcs5Pad()` are missing. PHP extends the key implicitly to 24 bytes (AES-192) by padding with 0x00 bytes, Java does not, i.e. there it must be done explicitly. Furthermore BC supports PKCS#7 padding. And you can use `AESEngine`.","body":"<code>pkcs5_pad()</code> and <code>pkcs5Pad()</code> are missing. PHP extends the key implicitly to 24 bytes (AES-192) by padding with 0x00 bytes, Java does not, i.e. there it must be done explicitly. Furthermore BC supports PKCS#7 padding. And you can use <code>AESEngine</code>."},{"owner":{"account_id":25454974,"reputation":41,"user_id":19313923,"display_name":"Prakhar"},"score":0,"creation_date":1657882562,"post_id":72991396,"comment_id":128920738,"body_markdown":"@Topaco , I have added the pkcs5_pad() and pkcd5Pad() to the post.","body":"@Topaco , I have added the pkcs5_pad() and pkcd5Pad() to the post."}],"answers":[{"tags":[],"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1657894085,"creation_date":1657891061,"answer_id":72994622,"question_id":72991396,"body_markdown":"There are three issues to change in the Java code:\r\n\r\n- Valid key sizes for AES are 16 (AES-128), 24 (AES-192) and 32 bytes (AES-256), i.e. 18 bytes is not a valid key size. The PHP code implicitly extends the 18 bytes key to the next valid AES key size, namely 24 bytes (i.e. AES-192), by padding with 0x00 values. The key extension must be done explicitly in the Java code. This is missing and is the reason for the exception.\r\n\r\n- `pkcs5_pad()` in the PHP code implements PKCS#7 padding (sometimes historically called PKCS#5 padding in the Java world). On the Java side, no custom implementation is needed since BouncyCastle supports PKCS#7 padding. Note that when using the custom variant, the padding must be *completely* disabled. Also Zero padding must not be used, since the BouncyCastle variant, unlike the mcrypt variant, always pads (i.e. even if the last block is completely filled) and therefore both variants are not equivalent.  \r\n\r\n- Furthermore, the more specific `AESEngine` should be used instead of the `RijndaelEngine`. Rijndael with a block size of 128 bits for the key sizes 16, 24 and 32 bytes corresponds per defintionem to AES. This last point is not a bug, but should be implemented for efficiency reasons.\r\n\r\nThus, your Java implementation changes slightly to:\r\n\r\n```java\r\nimport java.nio.charset.StandardCharsets;\r\nimport org.bouncycastle.crypto.CipherParameters;\r\nimport org.bouncycastle.crypto.engines.AESEngine;\r\nimport org.bouncycastle.crypto.modes.CBCBlockCipher;\r\nimport org.bouncycastle.crypto.paddings.PKCS7Padding;\r\nimport org.bouncycastle.crypto.paddings.PaddedBufferedBlockCipher;\r\nimport org.bouncycastle.crypto.params.KeyParameter;\r\nimport org.bouncycastle.crypto.params.ParametersWithIV;\r\nimport org.bouncycastle.util.encoders.Hex;\r\n\r\n...\r\n\r\nbyte[] plainText = &quot;The quick brown fox jumps over the lazy dog&quot;.getBytes(StandardCharsets.UTF_8);\r\nbyte[] keyInvalid = &quot;012345678901234567&quot;.getBytes(StandardCharsets.UTF_8); // 18 bytes key, no valid AES key size\r\nbyte[] key = new byte[24]; // next valid AES key size after 18 is 24 bytes (valid AES key sizes: 16, 24, 32 bytes)\r\nSystem.arraycopy(keyInvalid, 0, key, 0, keyInvalid.length);\r\nbyte[] iv = &quot;0123456789012345&quot;.getBytes(StandardCharsets.UTF_8);\r\n\r\nPaddedBufferedBlockCipher cipher = new PaddedBufferedBlockCipher(new CBCBlockCipher(new AESEngine()), new PKCS7Padding());\r\nCipherParameters ivAndKey = new ParametersWithIV(new KeyParameter(key), iv);\r\ncipher.init(true, ivAndKey);\r\nbyte[] ciphertext = new byte[cipher.getOutputSize(plainText.length)];\r\nint length = cipher.processBytes(plainText, 0, plainText.length, ciphertext, 0);\r\ncipher.doFinal(ciphertext, length);\r\nString ciphertextHex = Hex.toHexString(ciphertext);\r\n\r\nSystem.out.println(ciphertextHex); // 4e4d648e1af730b6c7571cbd033a43c478f423a958f70bdf5929418e978d3126a7f7bbbeaea06e6cf12e99b922918917\r\n```\r\n\r\nNote that the encryption performed here (AES/CBC/PKCS5Padding) is also possible under Java 8 using on-board means (i.e. via SunJCE provider), i.e. BouncyCastle is not actually necessary.\r\n\r\n------------------------\r\n\r\nTest:\r\n\r\nThe PHP code returns with the same input parameters:\r\n\r\n```php\r\n$key = &#39;012345678901234567&#39;; // 18 bytes key\r\n$iv = &quot;0123456789012345&quot;;    // 16 bytes IV\r\n$plainText = &#39;The quick brown fox jumps over the lazy dog&#39;;\r\n$cipherText = bin2hex(mcryptVal(pkcs5_pad($plainText), $key, $iv));\r\nprint($cipherText . PHP_EOL); // 4e4d648e1af730b6c7571cbd033a43c478f423a958f70bdf5929418e978d3126a7f7bbbeaea06e6cf12e99b922918917\r\n```\r\n\r\nthe same ciphertext showing that both implementations are functionally equivalent","title":"Using Rijndael-128 with CBC mode in Java 8","body":"<p>There are three issues to change in the Java code:</p>\n<ul>\n<li><p>Valid key sizes for AES are 16 (AES-128), 24 (AES-192) and 32 bytes (AES-256), i.e. 18 bytes is not a valid key size. The PHP code implicitly extends the 18 bytes key to the next valid AES key size, namely 24 bytes (i.e. AES-192), by padding with 0x00 values. The key extension must be done explicitly in the Java code. This is missing and is the reason for the exception.</p>\n</li>\n<li><p><code>pkcs5_pad()</code> in the PHP code implements PKCS#7 padding (sometimes historically called PKCS#5 padding in the Java world). On the Java side, no custom implementation is needed since BouncyCastle supports PKCS#7 padding. Note that when using the custom variant, the padding must be <em>completely</em> disabled. Also Zero padding must not be used, since the BouncyCastle variant, unlike the mcrypt variant, always pads (i.e. even if the last block is completely filled) and therefore both variants are not equivalent.</p>\n</li>\n<li><p>Furthermore, the more specific <code>AESEngine</code> should be used instead of the <code>RijndaelEngine</code>. Rijndael with a block size of 128 bits for the key sizes 16, 24 and 32 bytes corresponds per defintionem to AES. This last point is not a bug, but should be implemented for efficiency reasons.</p>\n</li>\n</ul>\n<p>Thus, your Java implementation changes slightly to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.nio.charset.StandardCharsets;\nimport org.bouncycastle.crypto.CipherParameters;\nimport org.bouncycastle.crypto.engines.AESEngine;\nimport org.bouncycastle.crypto.modes.CBCBlockCipher;\nimport org.bouncycastle.crypto.paddings.PKCS7Padding;\nimport org.bouncycastle.crypto.paddings.PaddedBufferedBlockCipher;\nimport org.bouncycastle.crypto.params.KeyParameter;\nimport org.bouncycastle.crypto.params.ParametersWithIV;\nimport org.bouncycastle.util.encoders.Hex;\n\n...\n\nbyte[] plainText = &quot;The quick brown fox jumps over the lazy dog&quot;.getBytes(StandardCharsets.UTF_8);\nbyte[] keyInvalid = &quot;012345678901234567&quot;.getBytes(StandardCharsets.UTF_8); // 18 bytes key, no valid AES key size\nbyte[] key = new byte[24]; // next valid AES key size after 18 is 24 bytes (valid AES key sizes: 16, 24, 32 bytes)\nSystem.arraycopy(keyInvalid, 0, key, 0, keyInvalid.length);\nbyte[] iv = &quot;0123456789012345&quot;.getBytes(StandardCharsets.UTF_8);\n\nPaddedBufferedBlockCipher cipher = new PaddedBufferedBlockCipher(new CBCBlockCipher(new AESEngine()), new PKCS7Padding());\nCipherParameters ivAndKey = new ParametersWithIV(new KeyParameter(key), iv);\ncipher.init(true, ivAndKey);\nbyte[] ciphertext = new byte[cipher.getOutputSize(plainText.length)];\nint length = cipher.processBytes(plainText, 0, plainText.length, ciphertext, 0);\ncipher.doFinal(ciphertext, length);\nString ciphertextHex = Hex.toHexString(ciphertext);\n\nSystem.out.println(ciphertextHex); // 4e4d648e1af730b6c7571cbd033a43c478f423a958f70bdf5929418e978d3126a7f7bbbeaea06e6cf12e99b922918917\n</code></pre>\n<p>Note that the encryption performed here (AES/CBC/PKCS5Padding) is also possible under Java 8 using on-board means (i.e. via SunJCE provider), i.e. BouncyCastle is not actually necessary.</p>\n<hr />\n<p>Test:</p>\n<p>The PHP code returns with the same input parameters:</p>\n<pre class=\"lang-php prettyprint-override\"><code>$key = '012345678901234567'; // 18 bytes key\n$iv = &quot;0123456789012345&quot;;    // 16 bytes IV\n$plainText = 'The quick brown fox jumps over the lazy dog';\n$cipherText = bin2hex(mcryptVal(pkcs5_pad($plainText), $key, $iv));\nprint($cipherText . PHP_EOL); // 4e4d648e1af730b6c7571cbd033a43c478f423a958f70bdf5929418e978d3126a7f7bbbeaea06e6cf12e99b922918917\n</code></pre>\n<p>the same ciphertext showing that both implementations are functionally equivalent</p>\n"}],"owner":{"account_id":25454974,"reputation":41,"user_id":19313923,"display_name":"Prakhar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":458,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1657932333,"creation_date":1657874768,"question_id":72991396,"body_markdown":"I am rewriting some PHP code in Java 8 where Rijndael-128 cipher (AES) is being used for encryption and decryption. The IV being used is 16 characters (128 bit) long, but the key being used is 18 characters (144 bit) long. \r\n\r\nI have tried to write encryption method in Java using JCA and by explicitly using bouncycastle library, but for both I am getting error for key length. Is it possible to use 144 bit key in PHP? If yes, please suggest how the same can be used in Java. Please find the code used and error encountered mentioned below: \r\n\r\n**php**\r\n\r\n```php\r\n$cipherText = bin2hex($this-&gt;mcryptVal($this-&gt;pkcs5_pad($plainText), $key, $iv));\r\n\r\nprivate function mcryptVal($text, $key, $iv, $encrypt = true) {\r\n        $td = mcrypt_module_open(&#39;rijndael-128&#39;, &#39;&#39;, &#39;cbc&#39;, $iv);\r\n        mcrypt_generic_init($td, $key, $iv);\r\n        $result = ($encrypt) ? mcrypt_generic($td, $text) : mdecrypt_generic($td, $text);\r\n        mcrypt_generic_deinit($td);\r\n        mcrypt_module_close($td);\r\n\r\n        return $result;\r\n    }\r\n\r\nprivate function pkcs5_pad($text) {\r\n        $blocksize = 16;\r\n        $pad = $blocksize - (strlen($text) % $blocksize);\r\n\r\n        return $text . str_repeat(chr($pad), $pad);\r\n    }\r\n```\r\n\r\n**java**\r\n\r\n```java\r\n    String plainText = &quot;Hello World&quot;;\r\n    String key = ***; //144 bit (18 characters)\r\n    String iv = ***; //128 bit\r\nPaddedBufferedBlockCipher cipher = new PaddedBufferedBlockCipher(\r\n        new CBCBlockCipher(new RijndaelEngine(128)), new ZeroBytePadding());\r\n    CipherParameters ivAndKey =\r\n        new ParametersWithIV(new KeyParameter(key.getBytes()), iv.getBytes());\r\n    cipher.init(true, ivAndKey);\r\n    byte[] out = new byte[cipher.getOutputSize(pkcs5Pad(plainText).getBytes().length)];\r\n    int l1 = cipher.processBytes(pkcs5Pad(plainText).getBytes(), 0,\r\n        pkcs5Pad(plainText).getBytes().length, out, 0);\r\n    int l2 = cipher.doFinal(out, l1);\r\n    byte[] encrypted = new byte[l1 + l2];\r\n    for (int i = 0; i &lt; l1 + l2; i++) {\r\n      encrypted[i] = out[i];\r\n    }\r\n    String encryptedText = Hex.encodeHexString(encrypted);\r\n\r\n\r\npublic static String pkcs5Pad(String plainText) {\r\n    int blockSize = 16;\r\n    int pad = blockSize - (plainText.length() % blockSize);\r\n    return plainText.concat(StringUtils.repeat((char) pad, pad));\r\n  }\r\n\r\n```\r\n\r\n**error**\r\n```none\r\nException in thread &quot;main&quot; java.lang.IllegalArgumentException: Key length not 128/160/192/224/256 bits.\r\n```\r\n**PS** : code mentioned for Java is using bouncycastle, similar code using JCA lead to similar error for key length","title":"Using Rijndael-128 with CBC mode in Java 8","body":"<p>I am rewriting some PHP code in Java 8 where Rijndael-128 cipher (AES) is being used for encryption and decryption. The IV being used is 16 characters (128 bit) long, but the key being used is 18 characters (144 bit) long.</p>\n<p>I have tried to write encryption method in Java using JCA and by explicitly using bouncycastle library, but for both I am getting error for key length. Is it possible to use 144 bit key in PHP? If yes, please suggest how the same can be used in Java. Please find the code used and error encountered mentioned below:</p>\n<p><strong>php</strong></p>\n<pre class=\"lang-php prettyprint-override\"><code>$cipherText = bin2hex($this-&gt;mcryptVal($this-&gt;pkcs5_pad($plainText), $key, $iv));\n\nprivate function mcryptVal($text, $key, $iv, $encrypt = true) {\n        $td = mcrypt_module_open('rijndael-128', '', 'cbc', $iv);\n        mcrypt_generic_init($td, $key, $iv);\n        $result = ($encrypt) ? mcrypt_generic($td, $text) : mdecrypt_generic($td, $text);\n        mcrypt_generic_deinit($td);\n        mcrypt_module_close($td);\n\n        return $result;\n    }\n\nprivate function pkcs5_pad($text) {\n        $blocksize = 16;\n        $pad = $blocksize - (strlen($text) % $blocksize);\n\n        return $text . str_repeat(chr($pad), $pad);\n    }\n</code></pre>\n<p><strong>java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>    String plainText = &quot;Hello World&quot;;\n    String key = ***; //144 bit (18 characters)\n    String iv = ***; //128 bit\nPaddedBufferedBlockCipher cipher = new PaddedBufferedBlockCipher(\n        new CBCBlockCipher(new RijndaelEngine(128)), new ZeroBytePadding());\n    CipherParameters ivAndKey =\n        new ParametersWithIV(new KeyParameter(key.getBytes()), iv.getBytes());\n    cipher.init(true, ivAndKey);\n    byte[] out = new byte[cipher.getOutputSize(pkcs5Pad(plainText).getBytes().length)];\n    int l1 = cipher.processBytes(pkcs5Pad(plainText).getBytes(), 0,\n        pkcs5Pad(plainText).getBytes().length, out, 0);\n    int l2 = cipher.doFinal(out, l1);\n    byte[] encrypted = new byte[l1 + l2];\n    for (int i = 0; i &lt; l1 + l2; i++) {\n      encrypted[i] = out[i];\n    }\n    String encryptedText = Hex.encodeHexString(encrypted);\n\n\npublic static String pkcs5Pad(String plainText) {\n    int blockSize = 16;\n    int pad = blockSize - (plainText.length() % blockSize);\n    return plainText.concat(StringUtils.repeat((char) pad, pad));\n  }\n\n</code></pre>\n<p><strong>error</strong></p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: Key length not 128/160/192/224/256 bits.\n</code></pre>\n<p><strong>PS</strong> : code mentioned for Java is using bouncycastle, similar code using JCA lead to similar error for key length</p>\n"},{"tags":["java","amazon-s3","compression","inputstream","bzip"],"answers":[{"tags":[],"owner":{"account_id":20732441,"reputation":1553,"user_id":15224052,"display_name":"Oliver"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1657932307,"creation_date":1657932307,"answer_id":73000785,"question_id":72999866,"body_markdown":"You could use a library.\r\n\r\nFor example [Apache Commons Compress](https://commons.apache.org/proper/commons-compress/).\r\n\r\n```java\r\nS3Object object = s3.getObject(bucket, path);\r\nS3ObjectInputStream inputStream = object.getObjectContent();\r\n\r\nBZip2CompressorInputStream bzInputStream = new BZip2CompressorInputStream(inputStream);\r\n\r\n// Then just write to a string.\r\n// This is Java 9+.\r\n\r\nString plaintext = new String(bzInputStream.readAllBytes(), StandardCharsets.UTF_8);\r\n```","title":"How do I uncompress .bz file contents and convert it to plain enlish","body":"<p>You could use a library.</p>\n<p>For example <a href=\"https://commons.apache.org/proper/commons-compress/\" rel=\"nofollow noreferrer\">Apache Commons Compress</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>S3Object object = s3.getObject(bucket, path);\nS3ObjectInputStream inputStream = object.getObjectContent();\n\nBZip2CompressorInputStream bzInputStream = new BZip2CompressorInputStream(inputStream);\n\n// Then just write to a string.\n// This is Java 9+.\n\nString plaintext = new String(bzInputStream.readAllBytes(), StandardCharsets.UTF_8);\n</code></pre>\n"}],"owner":{"account_id":25819775,"reputation":3,"user_id":19559108,"display_name":"Java dev VK"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73000785,"answer_count":1,"score":0,"last_activity_date":1657932307,"creation_date":1657921527,"question_id":72999866,"body_markdown":"I have .bz file contents in `s3 bucket`.\r\n\r\nUsing S3Object , I&#39;m able to read the file :\r\n```\r\nS3Object object = s3.getObject(bucket, path);\r\nS3ObjectInputStream inputStream = object.getObjectContent();\r\n```\r\nNow I want to uncompress this content.\r\n\r\nTried, converting using the below code, but it is still giving me machine readable text but not english text. \r\n\r\n```\r\n    String text = new BufferedReader(\r\n      new InputStreamReader(inputStream, StandardCharsets.UTF_8))\r\n        .lines()\r\n        .collect(Collectors.joining(&quot;\\n&quot;));\r\n```\r\n\r\nhow do I get the uncompressed text here.","title":"How do I uncompress .bz file contents and convert it to plain enlish","body":"<p>I have .bz file contents in <code>s3 bucket</code>.</p>\n<p>Using S3Object , I'm able to read the file :</p>\n<pre><code>S3Object object = s3.getObject(bucket, path);\nS3ObjectInputStream inputStream = object.getObjectContent();\n</code></pre>\n<p>Now I want to uncompress this content.</p>\n<p>Tried, converting using the below code, but it is still giving me machine readable text but not english text.</p>\n<pre><code>    String text = new BufferedReader(\n      new InputStreamReader(inputStream, StandardCharsets.UTF_8))\n        .lines()\n        .collect(Collectors.joining(&quot;\\n&quot;));\n</code></pre>\n<p>how do I get the uncompressed text here.</p>\n"},{"tags":["java","rest","rest-assured","rest-assured-jsonpath"],"comments":[{"owner":{"account_id":7509274,"reputation":1061,"user_id":5704816,"display_name":"Muhammad Ovi"},"score":1,"creation_date":1657898260,"post_id":72995197,"comment_id":128926725,"body_markdown":"As per their docs, they provide an endpoint to filter users:\nhttps://dummyjson.com/docs/users#filter","body":"As per their docs, they provide an endpoint to filter users: <a href=\"https://dummyjson.com/docs/users#filter\" rel=\"nofollow noreferrer\">dummyjson.com/docs/users#filter</a>"},{"owner":{"account_id":10263942,"reputation":5676,"user_id":7574461,"display_name":"lucas-nguyen-17"},"score":0,"creation_date":1657931886,"post_id":72995197,"comment_id":128934462,"body_markdown":"What data of `Black` hair users do you want to get? if you want whole user object, then see the docs @MuhammadOvi mentioned.","body":"What data of <code>Black</code> hair users do you want to get? if you want whole user object, then see the docs @MuhammadOvi mentioned."},{"owner":{"account_id":8847454,"reputation":91,"user_id":6815981,"display_name":"Saurabh"},"score":0,"creation_date":1657954788,"post_id":72995197,"comment_id":128936709,"body_markdown":"@Muhammad Ovi: I guess it was just added few hours ago since previously it was not there. Thanks anyways :)","body":"@Muhammad Ovi: I guess it was just added few hours ago since previously it was not there. Thanks anyways :)"}],"owner":{"account_id":8847454,"reputation":91,"user_id":6815981,"display_name":"Saurabh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1657931689,"creation_date":1657893640,"question_id":72995197,"body_markdown":"I have a GET Request where I have data for almost 30 users. I need to fetch only those user&#39;s data who&#39;s hair color is Black. Please help as I am beginner in Rest API automation using Java.\r\n\r\nData can be found here: https://dummyjson.com/users\r\n\r\nSample Response for 1st user:\r\n\r\n    {\r\n    \t&quot;users&quot;: [\r\n    \t\t{\r\n    \t\t\t&quot;id&quot;: 1,\r\n    \t\t\t&quot;firstName&quot;: &quot;Terry&quot;,\r\n    \t\t\t&quot;lastName&quot;: &quot;Medhurst&quot;,\r\n    \t\t\t&quot;maidenName&quot;: &quot;Smitham&quot;,\r\n    \t\t\t&quot;age&quot;: 50,\r\n    \t\t\t&quot;gender&quot;: &quot;male&quot;,\r\n    \t\t\t&quot;email&quot;: &quot;atuny0@sohu.com&quot;,\r\n    \t\t\t&quot;phone&quot;: &quot;+63 791 675 8914&quot;,\r\n    \t\t\t&quot;username&quot;: &quot;atuny0&quot;,\r\n    \t\t\t&quot;password&quot;: &quot;9uQFF1Lh&quot;,\r\n    \t\t\t&quot;birthDate&quot;: &quot;2000-12-25&quot;,\r\n    \t\t\t&quot;image&quot;: &quot;https://robohash.org/hicveldicta.png&quot;,\r\n    \t\t\t&quot;bloodGroup&quot;: &quot;A&quot;,\r\n    \t\t\t&quot;height&quot;: 189,\r\n    \t\t\t&quot;weight&quot;: 75.4,\r\n    \t\t\t&quot;eyeColor&quot;: &quot;Green&quot;,\r\n    \t\t\t&quot;hair&quot;: {\r\n    \t\t\t\t&quot;color&quot;: &quot;Black&quot;,\r\n    \t\t\t\t&quot;type&quot;: &quot;Strands&quot;\r\n    \t\t\t},\r\n    \t\t\t&quot;domain&quot;: &quot;slashdot.org&quot;,\r\n    \t\t\t&quot;ip&quot;: &quot;117.29.86.254&quot;,\r\n    \t\t\t&quot;address&quot;: {\r\n    \t\t\t\t&quot;address&quot;: &quot;1745 T Street Southeast&quot;,\r\n    \t\t\t\t&quot;city&quot;: &quot;Washington&quot;,\r\n    \t\t\t\t&quot;coordinates&quot;: {\r\n    \t\t\t\t\t&quot;lat&quot;: 38.867033,\r\n    \t\t\t\t\t&quot;lng&quot;: -76.979235\r\n    \t\t\t\t},\r\n    \t\t\t\t&quot;postalCode&quot;: &quot;20020&quot;,\r\n    \t\t\t\t&quot;state&quot;: &quot;DC&quot;\r\n    \t\t\t},\r\n    \t\t\t&quot;macAddress&quot;: &quot;13:69:BA:56:A3:74&quot;,\r\n    \t\t\t&quot;university&quot;: &quot;Capitol University&quot;,\r\n    \t\t\t&quot;bank&quot;: {\r\n    \t\t\t\t&quot;cardExpire&quot;: &quot;06/22&quot;,\r\n    \t\t\t\t&quot;cardNumber&quot;: &quot;50380955204220685&quot;,\r\n    \t\t\t\t&quot;cardType&quot;: &quot;maestro&quot;,\r\n    \t\t\t\t&quot;currency&quot;: &quot;Peso&quot;,\r\n    \t\t\t\t&quot;iban&quot;: &quot;NO17 0695 2754 967&quot;\r\n    \t\t\t},\r\n    \t\t\t&quot;company&quot;: {\r\n    \t\t\t\t&quot;address&quot;: {\r\n    \t\t\t\t\t&quot;address&quot;: &quot;629 Debbie Drive&quot;,\r\n    \t\t\t\t\t&quot;city&quot;: &quot;Nashville&quot;,\r\n    \t\t\t\t\t&quot;coordinates&quot;: {\r\n    \t\t\t\t\t\t&quot;lat&quot;: 36.208114,\r\n    \t\t\t\t\t\t&quot;lng&quot;: -86.58621199999999\r\n    \t\t\t\t\t},\r\n    \t\t\t\t\t&quot;postalCode&quot;: &quot;37076&quot;,\r\n    \t\t\t\t\t&quot;state&quot;: &quot;TN&quot;\r\n    \t\t\t\t},\r\n    \t\t\t\t&quot;department&quot;: &quot;Marketing&quot;,\r\n    \t\t\t\t&quot;name&quot;: &quot;Blanda-O&#39;Keefe&quot;,\r\n    \t\t\t\t&quot;title&quot;: &quot;Help Desk Operator&quot;\r\n    \t\t\t},\r\n    \t\t\t&quot;ein&quot;: &quot;20-9487066&quot;,\r\n    \t\t\t&quot;ssn&quot;: &quot;661-64-2976&quot;,\r\n    \t\t\t&quot;userAgent&quot;: &quot;Mozilla/5.0 (Windows NT 6.1) AppleWebKit/534.24 (KHTML, like Gecko) Chrome/12.0.702.0 Safari/534.24&quot;\r\n    \t\t},","title":"How to fetch similar type of JSON data using RestAssured","body":"<p>I have a GET Request where I have data for almost 30 users. I need to fetch only those user's data who's hair color is Black. Please help as I am beginner in Rest API automation using Java.</p>\n<p>Data can be found here: <a href=\"https://dummyjson.com/users\" rel=\"nofollow noreferrer\">https://dummyjson.com/users</a></p>\n<p>Sample Response for 1st user:</p>\n<pre><code>{\n    &quot;users&quot;: [\n        {\n            &quot;id&quot;: 1,\n            &quot;firstName&quot;: &quot;Terry&quot;,\n            &quot;lastName&quot;: &quot;Medhurst&quot;,\n            &quot;maidenName&quot;: &quot;Smitham&quot;,\n            &quot;age&quot;: 50,\n            &quot;gender&quot;: &quot;male&quot;,\n            &quot;email&quot;: &quot;atuny0@sohu.com&quot;,\n            &quot;phone&quot;: &quot;+63 791 675 8914&quot;,\n            &quot;username&quot;: &quot;atuny0&quot;,\n            &quot;password&quot;: &quot;9uQFF1Lh&quot;,\n            &quot;birthDate&quot;: &quot;2000-12-25&quot;,\n            &quot;image&quot;: &quot;https://robohash.org/hicveldicta.png&quot;,\n            &quot;bloodGroup&quot;: &quot;A&quot;,\n            &quot;height&quot;: 189,\n            &quot;weight&quot;: 75.4,\n            &quot;eyeColor&quot;: &quot;Green&quot;,\n            &quot;hair&quot;: {\n                &quot;color&quot;: &quot;Black&quot;,\n                &quot;type&quot;: &quot;Strands&quot;\n            },\n            &quot;domain&quot;: &quot;slashdot.org&quot;,\n            &quot;ip&quot;: &quot;117.29.86.254&quot;,\n            &quot;address&quot;: {\n                &quot;address&quot;: &quot;1745 T Street Southeast&quot;,\n                &quot;city&quot;: &quot;Washington&quot;,\n                &quot;coordinates&quot;: {\n                    &quot;lat&quot;: 38.867033,\n                    &quot;lng&quot;: -76.979235\n                },\n                &quot;postalCode&quot;: &quot;20020&quot;,\n                &quot;state&quot;: &quot;DC&quot;\n            },\n            &quot;macAddress&quot;: &quot;13:69:BA:56:A3:74&quot;,\n            &quot;university&quot;: &quot;Capitol University&quot;,\n            &quot;bank&quot;: {\n                &quot;cardExpire&quot;: &quot;06/22&quot;,\n                &quot;cardNumber&quot;: &quot;50380955204220685&quot;,\n                &quot;cardType&quot;: &quot;maestro&quot;,\n                &quot;currency&quot;: &quot;Peso&quot;,\n                &quot;iban&quot;: &quot;NO17 0695 2754 967&quot;\n            },\n            &quot;company&quot;: {\n                &quot;address&quot;: {\n                    &quot;address&quot;: &quot;629 Debbie Drive&quot;,\n                    &quot;city&quot;: &quot;Nashville&quot;,\n                    &quot;coordinates&quot;: {\n                        &quot;lat&quot;: 36.208114,\n                        &quot;lng&quot;: -86.58621199999999\n                    },\n                    &quot;postalCode&quot;: &quot;37076&quot;,\n                    &quot;state&quot;: &quot;TN&quot;\n                },\n                &quot;department&quot;: &quot;Marketing&quot;,\n                &quot;name&quot;: &quot;Blanda-O'Keefe&quot;,\n                &quot;title&quot;: &quot;Help Desk Operator&quot;\n            },\n            &quot;ein&quot;: &quot;20-9487066&quot;,\n            &quot;ssn&quot;: &quot;661-64-2976&quot;,\n            &quot;userAgent&quot;: &quot;Mozilla/5.0 (Windows NT 6.1) AppleWebKit/534.24 (KHTML, like Gecko) Chrome/12.0.702.0 Safari/534.24&quot;\n        },\n</code></pre>\n"},{"tags":["java","authorization","substring","access-token","rest-assured"],"comments":[{"owner":{"account_id":5535028,"reputation":1362,"user_id":4393666,"display_name":"Andrey Kotov"},"score":0,"creation_date":1657917786,"post_id":72999278,"comment_id":128932340,"body_markdown":"How do you get that url (`https://something.url.bla.bla`)? Can you add code where you try to extract `code` from that url?","body":"How do you get that url (<code>https:&#47;&#47;something.url.bla.bla</code>)? Can you add code where you try to extract <code>code</code> from that url?"}],"answers":[{"tags":[],"owner":{"account_id":10263942,"reputation":5676,"user_id":7574461,"display_name":"lucas-nguyen-17"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1657931405,"creation_date":1657931405,"answer_id":73000716,"question_id":72999278,"body_markdown":"You just need simple `split()` method of String to extract value from this text.\r\n\r\n```\r\nString url = &quot;https://something.url.com/myapp/auth/token?code=**12WVUcPyFbmTZUOcgaluGl98r08**&amp;iss=https%3A%2F%2Fsomething.url.com%3A8443%2Fam%2Foauth2%2Fvendors&amp;client_id=5c1d7ex3-g3rc-4a64-9855-074a57cc1570&quot;;\r\nString[] texts = url.split(&quot;code=&quot;);\r\nString code = texts[1].split(&quot;&amp;&quot;)[0];\r\nSystem.out.println(code); //**12WVUcPyFbmTZUOcgaluGl98r08**\r\n```","title":"How to extract an auth code in Location response header String using Rest Assured","body":"<p>You just need simple <code>split()</code> method of String to extract value from this text.</p>\n<pre><code>String url = &quot;https://something.url.com/myapp/auth/token?code=**12WVUcPyFbmTZUOcgaluGl98r08**&amp;iss=https%3A%2F%2Fsomething.url.com%3A8443%2Fam%2Foauth2%2Fvendors&amp;client_id=5c1d7ex3-g3rc-4a64-9855-074a57cc1570&quot;;\nString[] texts = url.split(&quot;code=&quot;);\nString code = texts[1].split(&quot;&amp;&quot;)[0];\nSystem.out.println(code); //**12WVUcPyFbmTZUOcgaluGl98r08**\n</code></pre>\n"}],"owner":{"account_id":4113062,"reputation":435,"user_id":3375417,"accept_rate":0,"display_name":"wheelerlc64"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":379,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73000716,"answer_count":1,"score":0,"last_activity_date":1657931405,"creation_date":1657916777,"question_id":72999278,"body_markdown":"Currently I have a method that does some authorization, which is used for my access token POST request in the body to establish the proper access token.  In my authorization method, I am able to extract the Location header value in the response.  The only issue is that I only need to extract the values between **code=** and **&amp;** as seen in the below string (**locationHeaderForAuthCode**):\r\n\r\nhttps://something.url.com/myapp/auth/token?code=**12WVUcPyFbmTZUOcgaluGl98r08**&amp;iss=https%3A%2F%2Fsomething.url.com%3A8443%2Fam%2Foauth2%2Fvendors&amp;client_id=5c1d7ex3-g3rc-4a64-9855-074a57cc1570\r\n\r\nSince that code is used for the request body in my access token POST request, I need to extract only that portion.  How do I achieve this in Rest Assured, and if not, then just using plain Java?\r\n\r\nAny help would be appreciated.  Below is my method for authorization that sets the Location header, and the other method for the access token post request:\r\n\r\n```\r\nprivate static void getAuthorizeCode() throws JsonException {\r\n\r\n\tresponse = given()\r\n\t\t\t\t.config(RestAssured.config()\r\n\t\t\t\t\t.encoderConfig(EncoderConfig.encoderConfig()\r\n\t\t\t\t\t\t\t.encodeContentTypeAs(&quot;x-www-form-urlencoded&quot;,\r\n\t\t\t\t\t\t\t\t\tContentType.URLENC)))\r\n\t\t\t.cookies(cookies)\r\n\t\t\t.header(&quot;Accept-Encoding&quot;, &quot;gzip, deflate, br&quot;)\r\n\t\t\t.formParam(&quot;redirect_uri&quot;, devRedirectUrl)\r\n\t\t\t.formParam(&quot;response_type&quot;, responseType)\r\n\t\t\t.formParam(&quot;client_id&quot;, userClientID)\r\n\t\t\t.formParam(&quot;client_secret&quot;, userClientSecrets)\r\n\t\t\t.formParam(&quot;decision&quot;, decision)\r\n\t\t\t.formParam(&quot;csrf&quot;, tokenId)\r\n\t\t\t.post(urlProps.getProperty(&quot;devVGWAuthorizeUrl&quot;))\r\n\t\t\t.then()\r\n\t\t\t.assertThat()\r\n\t\t\t.statusCode(302)\r\n\t\t\t.extract().response();\r\n\r\n\tlocationHeaderForAuthCode = response.getHeader(&quot;Location&quot;);\r\n\r\n}\r\n\r\nprivate static void getAccToken() throws JsonException {\r\n\tresponse = given()\r\n\t\t\t.log().all().config(RestAssured.config()\r\n\t\t\t\t\t.encoderConfig(EncoderConfig.encoderConfig()\r\n\t\t\t\t\t\t\t.encodeContentTypeAs(&quot;x-www-form-urlencoded&quot;,\r\n\t\t\t\t\t\t\t\t\tContentType.URLENC)))\r\n\t\t\t.cookies(cookies)\r\n\t\t\t.header(&quot;Accept-Encoding&quot;, &quot;gzip, deflate, br&quot;)\r\n\t\t\t.formParam(&quot;grant_type&quot;, &quot;authorization_code&quot;)\r\n\t\t\t.formParam(&quot;client_id&quot;, userClientID)\r\n\t\t\t.formParam(&quot;client_secret&quot;, userClientSecrets)\r\n\t\t\t.formParam(&quot;redirect_uri&quot;, devRedirectUrl)\r\n\t\t\t.formParam(&quot;code&quot;, locationHeaderForAuthCode)\r\n\t\t\t.post(urlProps.getProperty(&quot;devVGWAccessTokenUrl&quot;))\r\n\t\t\t.then()\r\n//                .assertThat()\r\n//                .statusCode(200)\r\n\t\t\t.log().all()\r\n\t\t\t.extract().response();\r\n\r\n\taccToken = response.jsonPath().getString(&quot;access_token&quot;);\r\n\tSystem.out.println(&quot;Access token is &quot; + accToken);\r\n}\r\n```","title":"How to extract an auth code in Location response header String using Rest Assured","body":"<p>Currently I have a method that does some authorization, which is used for my access token POST request in the body to establish the proper access token.  In my authorization method, I am able to extract the Location header value in the response.  The only issue is that I only need to extract the values between <strong>code=</strong> and <strong>&amp;</strong> as seen in the below string (<strong>locationHeaderForAuthCode</strong>):</p>\n<p><a href=\"https://something.url.com/myapp/auth/token?code=**12WVUcPyFbmTZUOcgaluGl98r08**&amp;iss=https%3A%2F%2Fsomething.url.com%3A8443%2Fam%2Foauth2%2Fvendors&amp;client_id=5c1d7ex3-g3rc-4a64-9855-074a57cc1570\" rel=\"nofollow noreferrer\">https://something.url.com/myapp/auth/token?code=**12WVUcPyFbmTZUOcgaluGl98r08**&amp;iss=https%3A%2F%2Fsomething.url.com%3A8443%2Fam%2Foauth2%2Fvendors&amp;client_id=5c1d7ex3-g3rc-4a64-9855-074a57cc1570</a></p>\n<p>Since that code is used for the request body in my access token POST request, I need to extract only that portion.  How do I achieve this in Rest Assured, and if not, then just using plain Java?</p>\n<p>Any help would be appreciated.  Below is my method for authorization that sets the Location header, and the other method for the access token post request:</p>\n<pre><code>private static void getAuthorizeCode() throws JsonException {\n\n    response = given()\n                .config(RestAssured.config()\n                    .encoderConfig(EncoderConfig.encoderConfig()\n                            .encodeContentTypeAs(&quot;x-www-form-urlencoded&quot;,\n                                    ContentType.URLENC)))\n            .cookies(cookies)\n            .header(&quot;Accept-Encoding&quot;, &quot;gzip, deflate, br&quot;)\n            .formParam(&quot;redirect_uri&quot;, devRedirectUrl)\n            .formParam(&quot;response_type&quot;, responseType)\n            .formParam(&quot;client_id&quot;, userClientID)\n            .formParam(&quot;client_secret&quot;, userClientSecrets)\n            .formParam(&quot;decision&quot;, decision)\n            .formParam(&quot;csrf&quot;, tokenId)\n            .post(urlProps.getProperty(&quot;devVGWAuthorizeUrl&quot;))\n            .then()\n            .assertThat()\n            .statusCode(302)\n            .extract().response();\n\n    locationHeaderForAuthCode = response.getHeader(&quot;Location&quot;);\n\n}\n\nprivate static void getAccToken() throws JsonException {\n    response = given()\n            .log().all().config(RestAssured.config()\n                    .encoderConfig(EncoderConfig.encoderConfig()\n                            .encodeContentTypeAs(&quot;x-www-form-urlencoded&quot;,\n                                    ContentType.URLENC)))\n            .cookies(cookies)\n            .header(&quot;Accept-Encoding&quot;, &quot;gzip, deflate, br&quot;)\n            .formParam(&quot;grant_type&quot;, &quot;authorization_code&quot;)\n            .formParam(&quot;client_id&quot;, userClientID)\n            .formParam(&quot;client_secret&quot;, userClientSecrets)\n            .formParam(&quot;redirect_uri&quot;, devRedirectUrl)\n            .formParam(&quot;code&quot;, locationHeaderForAuthCode)\n            .post(urlProps.getProperty(&quot;devVGWAccessTokenUrl&quot;))\n            .then()\n//                .assertThat()\n//                .statusCode(200)\n            .log().all()\n            .extract().response();\n\n    accToken = response.jsonPath().getString(&quot;access_token&quot;);\n    System.out.println(&quot;Access token is &quot; + accToken);\n}\n</code></pre>\n"},{"tags":["java","game-development","raycasting"],"answers":[{"tags":[],"owner":{"account_id":17946925,"reputation":69,"user_id":13040986,"display_name":"Joshua Crotts"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1657930668,"creation_date":1657930668,"answer_id":73000664,"question_id":72976550,"body_markdown":"Fixed it on my own. Turns out that, yes, you *do* have to account for the player&#39;s position (shocker!); the source I got the code from just didn&#39;t do it correctly.\r\n\r\nDTPP = distance to projection plane.\r\n```\r\nfor every pixel y from wallY + wallHeight + 1 to projectionHeight:\r\n    double r = y - this.getPreferredSize().height / 2.f;\r\n    double d = (CAMERA_HEIGHT * DTPP / r) / ANGLE;\r\n    double tileX = CAMERA_X + d * RAY_COSANGLE;\r\n    double tileY = CAMERA_Y + d * RAY_SINANGLE;\r\n    int textureX = Math.floorMod((int) (tileX * TEXTURE_SIZE / \r\n    TEXTURE_SCALE), TEXTURE_SIZE);\r\n    int textureY = Math.floorMod((int) (tileY * TEXTURE_SIZE / \r\n    TEXTURE_SCALE), TEXTURE_SIZE);\r\n    ... (drawing occurs here)\r\n```","title":"Floorcasting not scrolling in raycasting engine?","body":"<p>Fixed it on my own. Turns out that, yes, you <em>do</em> have to account for the player's position (shocker!); the source I got the code from just didn't do it correctly.</p>\n<p>DTPP = distance to projection plane.</p>\n<pre><code>for every pixel y from wallY + wallHeight + 1 to projectionHeight:\n    double r = y - this.getPreferredSize().height / 2.f;\n    double d = (CAMERA_HEIGHT * DTPP / r) / ANGLE;\n    double tileX = CAMERA_X + d * RAY_COSANGLE;\n    double tileY = CAMERA_Y + d * RAY_SINANGLE;\n    int textureX = Math.floorMod((int) (tileX * TEXTURE_SIZE / \n    TEXTURE_SCALE), TEXTURE_SIZE);\n    int textureY = Math.floorMod((int) (tileY * TEXTURE_SIZE / \n    TEXTURE_SCALE), TEXTURE_SIZE);\n    ... (drawing occurs here)\n</code></pre>\n"}],"owner":{"account_id":17946925,"reputation":69,"user_id":13040986,"display_name":"Joshua Crotts"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":202,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73000664,"answer_count":1,"score":2,"last_activity_date":1657930668,"creation_date":1657782524,"question_id":72976550,"body_markdown":"I&#39;m currently working on a raycaster in Java, and so far, I have the floor correctly textured. The problem, however, is that the floor doesn&#39;t scroll. In other words, when I move the camera in the projection, the floor stays the same, yet the walls move as expected. I&#39;m really not sure what I&#39;m doing wrong. I took almost all the code from [this][1] reference. Note that I took some liberties when pasting the code in that I used some pseudocode.\r\n\r\nI tried applying a player offset to the tileX and tileY variables, e.g., tileX += player.x, and all I got was a floor that scrolls far too quickly and incorrectly.\r\n\r\n```\r\nfor every ray:\r\n   ... // other stuff relating to the walls above here.\r\n   int start = (int)(wallY + wallHeight + 1);\r\n   double directionCos = cos(rad(ray.getAngle()));\r\n   double directionSin = sin(rad(ray.getAngle()));\r\n   int textureDim = 16;\r\n   for (int y = start; y &lt; screenHeight; y++) {\r\n       double distance = screenHeight / (2.f * y - screenHeight);\r\n       distance /= cos(rad(player.getAngle()) - rad(ray.getAngle()));\r\n       // The source I grabbed the code from actually appends the player&#39;s x and y to the tileX and tileY variables, but this completely messes up the textures when I try to.\r\n       double tileX = distance * directionCos;\r\n       double tileY = distance * directionSin;\r\n\r\n       int textureX = Math.floorMod((int)(tileX * textureDim), textureDim);\r\n       int textureY = Math.floorMod((int)(tileY * textureDim), textureDim);\r\n       int rgb = floorTexture.getRGB(textureX, textureY);\r\n       projectionFloor.setRGB((int)wallX, y, rgb);\r\n  }\r\n```\r\nBelow is an image of the floor.\r\n[![This is what the floor currently looks like][2]][2]\r\n\r\nBelow is an animation visualizing the problem.\r\n[![Animation of what&#39;s wrong][3]][3]\r\n\r\nBelow is an animation visualizing what happens if I try to apply a player position offset:\r\n[![enter image description here][4]][4]\r\n\r\n\r\n  [1]: https://github.com/vinibiavatti1/RayCastingTutorial/wiki/Floorcasting\r\n  [2]: https://i.stack.imgur.com/HiV8T.png\r\n  [3]: https://i.stack.imgur.com/mdFBo.gif\r\n  [4]: https://i.stack.imgur.com/sPP2N.gif","title":"Floorcasting not scrolling in raycasting engine?","body":"<p>I'm currently working on a raycaster in Java, and so far, I have the floor correctly textured. The problem, however, is that the floor doesn't scroll. In other words, when I move the camera in the projection, the floor stays the same, yet the walls move as expected. I'm really not sure what I'm doing wrong. I took almost all the code from <a href=\"https://github.com/vinibiavatti1/RayCastingTutorial/wiki/Floorcasting\" rel=\"nofollow noreferrer\">this</a> reference. Note that I took some liberties when pasting the code in that I used some pseudocode.</p>\n<p>I tried applying a player offset to the tileX and tileY variables, e.g., tileX += player.x, and all I got was a floor that scrolls far too quickly and incorrectly.</p>\n<pre><code>for every ray:\n   ... // other stuff relating to the walls above here.\n   int start = (int)(wallY + wallHeight + 1);\n   double directionCos = cos(rad(ray.getAngle()));\n   double directionSin = sin(rad(ray.getAngle()));\n   int textureDim = 16;\n   for (int y = start; y &lt; screenHeight; y++) {\n       double distance = screenHeight / (2.f * y - screenHeight);\n       distance /= cos(rad(player.getAngle()) - rad(ray.getAngle()));\n       // The source I grabbed the code from actually appends the player's x and y to the tileX and tileY variables, but this completely messes up the textures when I try to.\n       double tileX = distance * directionCos;\n       double tileY = distance * directionSin;\n\n       int textureX = Math.floorMod((int)(tileX * textureDim), textureDim);\n       int textureY = Math.floorMod((int)(tileY * textureDim), textureDim);\n       int rgb = floorTexture.getRGB(textureX, textureY);\n       projectionFloor.setRGB((int)wallX, y, rgb);\n  }\n</code></pre>\n<p>Below is an image of the floor.\n<a href=\"https://i.stack.imgur.com/HiV8T.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HiV8T.png\" alt=\"This is what the floor currently looks like\" /></a></p>\n<p>Below is an animation visualizing the problem.\n<a href=\"https://i.stack.imgur.com/mdFBo.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mdFBo.gif\" alt=\"Animation of what's wrong\" /></a></p>\n<p>Below is an animation visualizing what happens if I try to apply a player position offset:\n<a href=\"https://i.stack.imgur.com/sPP2N.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sPP2N.gif\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","numbers","find"],"comments":[{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":1,"creation_date":1657888294,"post_id":72991738,"comment_id":128922791,"body_markdown":"Take a very close look at this line which has a bug: `for (int i=number; i&lt;number; i++)`","body":"Take a very close look at this line which has a bug: <code>for (int i=number; i&lt;number; i++)</code>"},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1657889016,"post_id":72991738,"comment_id":128923039,"body_markdown":"Is the problem only within the `isPrime()` method?","body":"Is the problem only within the <code>isPrime()</code> method?"},{"owner":{"account_id":11633793,"reputation":31,"user_id":8520919,"display_name":"Masoud Kelaye"},"score":0,"creation_date":1657889044,"post_id":72991738,"comment_id":128923049,"body_markdown":"@PresidentJamesK.Polk error is in this line:                 \nline 19, System.out.println(num);  (num is error) \nI don&#39;t understand! Thanks for help.","body":"@PresidentJamesK.Polk error is in this line:                  line 19, System.out.println(num);  (num is error)  I don&#39;t understand! Thanks for help."},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1657889088,"post_id":72991738,"comment_id":128923073,"body_markdown":"@PresidentJamesK.Polk that&#39;s not the only bug. Look 3 lines below your call out.","body":"@PresidentJamesK.Polk that&#39;s not the only bug. Look 3 lines below your call out."},{"owner":{"account_id":11633793,"reputation":31,"user_id":8520919,"display_name":"Masoud Kelaye"},"score":0,"creation_date":1657889172,"post_id":72991738,"comment_id":128923102,"body_markdown":"@Bohemian VSCode just error in line 19 by &quot;num&quot;!","body":"@Bohemian VSCode just error in line 19 by &quot;num&quot;!"},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1657889847,"post_id":72991738,"comment_id":128923354,"body_markdown":"@MasoudKelaye what error? Edit your question to show the error. Remove all code not absolutely required to demonstrate the problem - keep removing code until you have the smallest amount that has the error. See [MCVE](https://stackoverflow.com/help/mcve). Then vote to reopen.","body":"@MasoudKelaye what error? Edit your question to show the error. Remove all code not absolutely required to demonstrate the problem - keep removing code until you have the smallest amount that has the error. See <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>. Then vote to reopen."},{"owner":{"account_id":11633793,"reputation":31,"user_id":8520919,"display_name":"Masoud Kelaye"},"score":0,"creation_date":1657911790,"post_id":72991738,"comment_id":128930856,"body_markdown":"@Bohemian this is the error: num cannot be resolved to a variable","body":"@Bohemian this is the error: num cannot be resolved to a variable"}],"answers":[{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1657930333,"creation_date":1657930333,"answer_id":73000645,"question_id":72991738,"body_markdown":"Java ain&#39;t python: Indentation (or any from of whitespace) does not convey any code meaning.\r\n\r\nThe problem is the *scope* of `num` which is harder to see because your indentation is incorrect.\r\n\r\nThis code:\r\n\r\n```java\r\nfor (int num=number1; num&lt;number2; num++)\r\n    if (number1&lt;2 || number2&lt;2 || number2&lt;number1)\r\n        break;\r\n    else if (isPrime(num))\r\n        counter++;\r\n        System.out.println(num);\r\n```\r\n\r\nWhen properly formatted is:\r\n\r\n```java\r\nfor (int num=number1; num&lt;number2; num++)\r\n    if (number1&lt;2 || number2&lt;2 || number2&lt;number1)\r\n        break;\r\n    else if (isPrime(num))\r\n        counter++;\r\nSystem.out.println(num);\r\n```\r\n\r\nwhich shows the problem; the print is *outside* of the loop, so `num` is not defined there.\r\n\r\nUse braces:\r\n\r\n```java\r\nfor (int num=number1; num&lt;number2; num++)\r\n    if (number1&lt;2 || number2&lt;2 || number2&lt;number1)\r\n        break;\r\n    else if (isPrime(num)) {\r\n        counter++;\r\n        System.out.println(num);\r\n    }\r\n\r\n```\r\n\r\nOr better yet, and it&#39;s best practice, is to use braces for all statement blocks, whether or not they are needed to compile:\r\n\r\n```java\r\nfor (int num=number1; num&lt;number2; num++) {\r\n    if (number1&lt;2 || number2&lt;2 || number2&lt;number1) {\r\n        break;\r\n    } else if (isPrime(num)) {\r\n        counter++;\r\n        System.out.println(num);\r\n    }\r\n}\r\n```","title":"find prime numbers between two numbers","body":"<p>Java ain't python: Indentation (or any from of whitespace) does not convey any code meaning.</p>\n<p>The problem is the <em>scope</em> of <code>num</code> which is harder to see because your indentation is incorrect.</p>\n<p>This code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int num=number1; num&lt;number2; num++)\n    if (number1&lt;2 || number2&lt;2 || number2&lt;number1)\n        break;\n    else if (isPrime(num))\n        counter++;\n        System.out.println(num);\n</code></pre>\n<p>When properly formatted is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int num=number1; num&lt;number2; num++)\n    if (number1&lt;2 || number2&lt;2 || number2&lt;number1)\n        break;\n    else if (isPrime(num))\n        counter++;\nSystem.out.println(num);\n</code></pre>\n<p>which shows the problem; the print is <em>outside</em> of the loop, so <code>num</code> is not defined there.</p>\n<p>Use braces:</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int num=number1; num&lt;number2; num++)\n    if (number1&lt;2 || number2&lt;2 || number2&lt;number1)\n        break;\n    else if (isPrime(num)) {\n        counter++;\n        System.out.println(num);\n    }\n\n</code></pre>\n<p>Or better yet, and it's best practice, is to use braces for all statement blocks, whether or not they are needed to compile:</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int num=number1; num&lt;number2; num++) {\n    if (number1&lt;2 || number2&lt;2 || number2&lt;number1) {\n        break;\n    } else if (isPrime(num)) {\n        counter++;\n        System.out.println(num);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":11633793,"reputation":31,"user_id":8520919,"display_name":"Masoud Kelaye"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":215,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73000645,"answer_count":1,"score":0,"last_activity_date":1657930333,"creation_date":1657876648,"question_id":72991738,"body_markdown":"I want to find prime numbers between two numbers that we get from the inputs, but I get this error:\r\n\r\n&gt;num cannot be resolved to a variable\r\n\r\nI read the code many times but couldn&#39;t find the problem!  \r\nCan you help me?\r\n\r\n    public class PrimeNumbers {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tScanner input1 = new Scanner(System.in);\r\n            System.out.print(&quot;Enter Start number: &quot;);\r\n    \t\tint number1 = input1.nextInt();\r\n    \t\tScanner input2 = new Scanner(System.in);\r\n            System.out.print(&quot;Enter End number: &quot;);\r\n    \t\tint number2 = input2.nextInt();\r\n    \t\tinput1.close();\r\n    \t\tinput2.close();\r\n    \t\tint counter = 0;\r\n    \t\tfor (int num=number1; num&lt;number2; num++)\r\n    \t\t\tif (number1&lt;2 || number2&lt;2 || number2&lt;number1)\r\n    \t\t\t\tbreak;\r\n    \t\t\telse if (isPrime(num))\r\n    \t\t\t\tcounter++;\r\n    \t\t\t\tSystem.out.println(num);\r\n    \t\tSystem.out.println(&quot;Total Prime Numbers Between &quot; + number1 + &quot; and &quot; + number2 + &quot; =&gt; &quot; + counter);\r\n    \t}\r\n    \t\r\n    \tstatic boolean isPrime(int number) { \r\n    \t\tif (number&lt;2)\r\n    \t\t\treturn false;\r\n    \t\tfor (int i=number; i&lt;number; i++)\r\n    \t\t\tif (number%i==0)\r\n    \t\t\t\treturn false;\r\n    \t\treturn true; \r\n    \t}\r\n    }","title":"find prime numbers between two numbers","body":"<p>I want to find prime numbers between two numbers that we get from the inputs, but I get this error:</p>\n<blockquote>\n<p>num cannot be resolved to a variable</p>\n</blockquote>\n<p>I read the code many times but couldn't find the problem!<br />\nCan you help me?</p>\n<pre><code>public class PrimeNumbers {\n    public static void main(String[] args) {\n        Scanner input1 = new Scanner(System.in);\n        System.out.print(&quot;Enter Start number: &quot;);\n        int number1 = input1.nextInt();\n        Scanner input2 = new Scanner(System.in);\n        System.out.print(&quot;Enter End number: &quot;);\n        int number2 = input2.nextInt();\n        input1.close();\n        input2.close();\n        int counter = 0;\n        for (int num=number1; num&lt;number2; num++)\n            if (number1&lt;2 || number2&lt;2 || number2&lt;number1)\n                break;\n            else if (isPrime(num))\n                counter++;\n                System.out.println(num);\n        System.out.println(&quot;Total Prime Numbers Between &quot; + number1 + &quot; and &quot; + number2 + &quot; =&gt; &quot; + counter);\n    }\n    \n    static boolean isPrime(int number) { \n        if (number&lt;2)\n            return false;\n        for (int i=number; i&lt;number; i++)\n            if (number%i==0)\n                return false;\n        return true; \n    }\n}\n</code></pre>\n"},{"tags":["java","servlets","jakarta-ee","page-lifecycle","java-ee-8"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1657896512,"post_id":72995407,"comment_id":128926081,"body_markdown":"You can annotate with `@WebListener`, and skip editing the web xml configuration file.","body":"You can annotate with <code>@WebListener</code>, and skip editing the web xml configuration file."},{"owner":{"account_id":1122178,"reputation":4384,"user_id":1110291,"display_name":"rickz"},"score":1,"creation_date":1657905555,"post_id":72995407,"comment_id":128929160,"body_markdown":"In regards to where you are stuck; add a method called requestDestroyed to your ExampleListenerForThisQuestion class and place some System.out.println()  lines  in order for you to see some output in console or log.","body":"In regards to where you are stuck; add a method called requestDestroyed to your ExampleListenerForThisQuestion class and place some System.out.println()  lines  in order for you to see some output in console or log."},{"owner":{"account_id":1122178,"reputation":4384,"user_id":1110291,"display_name":"rickz"},"score":0,"creation_date":1657906388,"post_id":72995407,"comment_id":128929422,"body_markdown":"Java 8 is ok.  Are you using Tomcat?","body":"Java 8 is ok.  Are you using Tomcat?"},{"owner":{"account_id":7281,"reputation":248647,"user_id":12597,"accept_rate":76,"display_name":"Ian Boyd"},"score":0,"creation_date":1657914125,"post_id":72995407,"comment_id":128931493,"body_markdown":"@rickz Glassfish. Is the web-server an important issue here? Isn&#39;t it part of JavaEE/JakartaEE standard, which the web-server is required to implement?","body":"@rickz Glassfish. Is the web-server an important issue here? Isn&#39;t it part of JavaEE/JakartaEE standard, which the web-server is required to implement?"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1657928937,"creation_date":1657919365,"answer_id":72999618,"question_id":72995407,"body_markdown":"# `ServletRequestListener`\r\n\r\n&gt;i want to know when: when a request starts and when a request ends\r\n\r\nUse a `ServletRequestListener` as suggested in your Question. This is a long-standing feature in the Servlet API, since Servlet spec version 2.4.\r\n\r\n - [`requestInitialized`][1] method is your hook to know when handling of a request begins.\r\n - [`requestDestroyed`][2] method is your hook for when handling of a request ends.\r\n\r\n## Example code\r\n\r\nHere is a little demo I wrote.\r\n\r\n```java\r\npackage work.basil.example.demo;\r\n\r\nimport jakarta.servlet.ServletRequest;\r\nimport jakarta.servlet.ServletRequestEvent;\r\nimport jakarta.servlet.ServletRequestListener;\r\nimport jakarta.servlet.annotation.WebListener;\r\nimport jakarta.servlet.http.HttpServletRequest;\r\n\r\nimport java.time.Instant;\r\n\r\n@WebListener\r\npublic class RequestAnnouncer implements ServletRequestListener\r\n{\r\n    @Override\r\n    public void requestInitialized ( ServletRequestEvent sre )\r\n    {\r\n        ServletRequestListener.super.requestInitialized( sre );\r\n\r\n        ServletRequest sr = sre.getServletRequest();\r\n        HttpServletRequest request = ( HttpServletRequest ) sr;\r\n        String url = request.getRequestURL() + ( request.getQueryString() == null ? &quot;&quot; : &quot;?&quot; + request.getQueryString() );\r\n        System.out.println( &quot;INFO - Request initialized in thread &quot; + Thread.currentThread().getId() + &quot; at &quot; + Instant.now() + &quot; | &quot; + url );\r\n    }\r\n\r\n    @Override\r\n    public void requestDestroyed ( ServletRequestEvent sre )\r\n    {\r\n        ServletRequestListener.super.requestDestroyed( sre );\r\n\r\n        ServletRequest sr = sre.getServletRequest();\r\n        HttpServletRequest request = ( HttpServletRequest ) sr;\r\n        String url = request.getRequestURL() + ( request.getQueryString() == null ? &quot;&quot; : &quot;?&quot; + request.getQueryString() );\r\n        System.out.println( &quot;INFO - Request destroyed in thread &quot; + Thread.currentThread().getId() + &quot; at &quot; + Instant.now() + &quot; | &quot; + url );\r\n    }\r\n}\r\n```\r\n\r\n### `@WebListener`\r\n\r\nNotice the annotation [`@WebListener`][3]. With this annotation, you can skip editing the web XML configuration file. The `@WebListener` acts as a flag at runtime, so the Servlet container will automatically detect, instantiate, and execute this class at the appropriate point in the lifecycle of your web app. This modern convenience was added in Servlet spec 3.0. \r\n\r\n### `jakarta.*` package naming \r\n\r\nAlso notice the `jakarta.*` package naming in the `import` statements. Java EE is now known as Jakarta EE after Oracle Corp handed responsibility to the Eclipse Foundation a few years ago. Jakarta Servlet specifications versions 4 and 5 (used here) are equivalent except for a change in package names from javax.* to jakarta.*. \r\n\r\nBy the way, [Jakarta Servlet spec version 6][4] was released this year as part of Jakarta EE 10, with the first major changes in many years. See article, [*Top 5 things to know about the Jakarta Servlet 6.0 API release*](https://www.theserverside.com/blog/Coffee-Talk-Java-News-Stories-and-Opinions/Top-5-things-to-know-about-the-Jakarta-Servlet-60-API-release).\r\n\r\n## Run example\r\n\r\nWhen run in the Microsoft Edge browser Version 103.0.1264.62 (Official build) (arm64) for macOS Monterey 12.4 on Apache Tomcat 2022.2 Beta with Adoptium Temurin for Java 18.0.1+10 on a MacBook Pro (16-inch, 2021) Apple M1 Pro, for URL `http://localhost:8080/demo_war_exploded/hello-servlet` results in the following output.\r\n\r\n```none\r\nINFO - Request initialized in thread 23 at 2022-07-15T20:55:21.060303Z | http://localhost:8080/demo_war_exploded/hello-servlet\r\nINFO - Request destroyed in thread 23 at 2022-07-15T20:55:21.066361Z | http://localhost:8080/demo_war_exploded/hello-servlet\r\nINFO - Request initialized in thread 26 at 2022-07-15T20:55:21.151810Z | http://localhost:8080/demo_war_exploded/hello-servlet\r\nINFO - Request destroyed in thread 26 at 2022-07-15T20:55:21.152086Z | http://localhost:8080/demo_war_exploded/hello-servlet\r\n```\r\n\r\nWhy do we get a four lines instead of two for a single request? Well, looking at the access logs shows that this browser sent a request on both IPv4 and IPv6. And the browser sent a request to just `/`, but I have no idea why.\r\n\r\n```none\r\n127.0.0.1 - - [15/Jul/2022:13:55:21 -0700] &quot;GET /demo_war_exploded/hello-servlet HTTP/1.1&quot; 200 306\r\n127.0.0.1 - - [15/Jul/2022:13:55:21 -0700] &quot;GET / HTTP/1.1&quot; 404 683\r\n0:0:0:0:0:0:0:1 - - [15/Jul/2022:13:55:21 -0700] &quot;GET /demo_war_exploded/hello-servlet HTTP/1.1&quot; 200 306\r\n```\r\n\r\n# Filters\r\n\r\nWhen to use `ServletRequestListener` and when to use filters? Filters are used in a chain to process the request and response. The listener fires once per request, at the very beginning and the very end. In contrast, multiple filters may fire for a single request. To quote the Javadoc:\r\n\r\n&gt;Interface for receiving notification events about requests coming into and going out of scope of a web application.\r\n&gt;\r\n&gt;A ServletRequest is defined as coming into scope of a web application when it is about to enter the first servlet or filter of the web application, and as going out of scope as it exits the last servlet or the first filter in the chain.\r\n\r\nSo we have a progression of beginning, middle, and end where the listener fires for beginning and end while zero, one , or more filters may fire in the middle.\r\n\r\n&gt; `ServletRequestListener#requestInitialized` &gt; [  filters  ] &gt; `ServletRequestListener#requestDestroyed`\r\n\r\nInterestingly, I noticed the *Filter* API was added in Servlet spec version 2.3, and the *ServletRequestListener* API was added in 2.4. So I would guess that soon after rolling out the filter feature, developers found a need for hooks that act as temporal bookends, bracketing outside a series of filters. Since any number of filters may fire, without one filter knowing about the others, you might want a hook for the very beginning and the very end.\r\n\r\n\r\n----------\r\n\r\n# Servlet example code\r\n\r\nIf curious, the Servlet I wrote for the above example:\r\n\r\n```java\r\npackage work.basil.example.demo;\r\n\r\nimport java.io.*;\r\nimport java.time.Instant;\r\n\r\nimport jakarta.servlet.http.*;\r\nimport jakarta.servlet.annotation.*;\r\n\r\n@WebServlet ( name = &quot;helloServlet&quot;, value = &quot;/hello-servlet&quot; )\r\npublic class HelloServlet extends HttpServlet\r\n{\r\n    private String message;\r\n\r\n    public void init ( )\r\n    {\r\n        message = &quot;What time is it?&quot;;\r\n    }\r\n\r\n    public void doGet ( HttpServletRequest request , HttpServletResponse response ) throws IOException\r\n    {\r\n        response.setContentType( &quot;text/html&quot; );\r\n\r\n        // Hello\r\n        PrintWriter out = response.getWriter();\r\n        out.println( &quot;&lt;!DOCTYPE html&gt;&quot; );\r\n        out.println(\r\n                &quot;&quot;&quot;\r\n                &lt;head&gt;\r\n                  &lt;meta charset=&quot;utf-8&quot;&gt;\r\n                  &lt;title&gt;Servlet Request Listener Example&lt;/title&gt;\r\n                  &lt;!-- &lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot;&gt;  --&gt;\r\n                  &lt;!-- &lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt; --&gt;\r\n                &lt;/head&gt;\r\n                &quot;&quot;&quot;\r\n        );\r\n        out.println( &quot;&lt;html lang=&#39;en&#39;&gt;&quot; );\r\n        out.println( &quot;&lt;body&gt;&quot; );\r\n        out.println( &quot;&lt;h1&gt;&quot; + message + &quot;&lt;/h1&gt;&quot; );\r\n        out.println( &quot;&lt;p&gt;&quot; + Instant.now() + &quot;&lt;/p&gt;&quot; );\r\n        out.println( &quot;&lt;/body&gt;&quot; );\r\n        out.println( &quot;&lt;/html&gt;&quot; );\r\n    }\r\n\r\n    public void destroy ( )\r\n    {\r\n    }\r\n}\r\n```\r\n\r\n\r\n----------\r\n\r\nYou said:\r\n\r\n&gt; I happen to be using Java 8. I assume that corresponds to JavaEE 8.\r\n\r\nIf you mean a correspondence between version numbers 8 and 8, no. \r\n\r\nThe name Java EE (now Jakarta EE), meaning Enterprise Edition, is a bit of a misnomer. Jakarta EE is just a bunch of specifications for a bunch of software that can be called from Java code running in a Java Virtual Machine. So &quot;Java EE&quot; was never really &quot;Java&quot;, it was a framework of specs and libraries for helping developers build enterprise-oriented applications. \r\n\r\nJava EE 8, re-released as [Jakarta EE 8][5], [requires Java 8][6]. (Major changes came to Java 9 through 11 that may cause problems when migrating.)\r\n\r\n[Jakarta EE 9][7] is essentially the same as Jakarta EE 8, but for the change in package naming from `javax.*` to `jakarta.*`. So it too [requires Java 8][8].\r\n\r\n[Jakarta EE 9.1][9] is a revamp and cleanup of Jakarta EE 8 &amp; 9, dropping some old deprecations, adding more deprecations, and doing other work to lay the foundation for future innovations. Among the changes is [requiring implementations to support Java 11][10] in [addition to Java 8][11] (both [LTS][12] versions). And while not an explicit requirement, all implementations are expected to be able to run in Java 17 (the current [LTS][12] version) as well. \r\n\r\n[Jakarta EE 10][13] brings the first wave of those long-awaited innovations. \r\n\r\n| Jakarta EE | Requires Java |\r\n| -------- | -------------- |\r\n| 8    | 8            |\r\n| 9   | 8            |\r\n| 9.1   | 8 &amp; 11 (and likely 17)  |\r\n| 10   | ??            |\r\n\r\n\r\n  [1]: https://jakarta.ee/specifications/servlet/5.0/apidocs/jakarta/servlet/servletrequestlistener#requestInitialized(jakarta.servlet.ServletRequestEvent)\r\n  [2]: https://jakarta.ee/specifications/servlet/5.0/apidocs/jakarta/servlet/servletrequestlistener#requestDestroyed(jakarta.servlet.ServletRequestEvent)\r\n  [3]: https://jakarta.ee/specifications/servlet/5.0/apidocs/jakarta/servlet/annotation/weblistener\r\n  [4]: https://jakarta.ee/specifications/servlet/6.0/\r\n  [5]: https://jakarta.ee/specifications/platform/8/\r\n  [6]: https://jakarta.ee/specifications/platform/8/platform-spec-8.html#container-requirements\r\n  [7]: https://jakarta.ee/specifications/platform/9/\r\n  [8]: https://jakarta.ee/specifications/platform/9/jakarta-platform-spec-9.html#container-requirements\r\n  [9]: https://jakarta.ee/specifications/platform/9.1/\r\n  [10]: https://jakarta.ee/specifications/platform/9.1/jakarta-platform-spec-9.1.html#changes-in-jakarta-ee-9-1\r\n  [11]: https://jakarta.ee/specifications/platform/9.1/jakarta-platform-spec-9.1.html#container-requirements\r\n  [12]: https://en.wikipedia.org/wiki/Long-term_support\r\n  [13]: https://jakarta.ee/specifications/platform/10/","title":"How to hook BeginRequest and EndRequest in JavaEE?","body":"<h1><code>ServletRequestListener</code></h1>\n<blockquote>\n<p>i want to know when: when a request starts and when a request ends</p>\n</blockquote>\n<p>Use a <code>ServletRequestListener</code> as suggested in your Question. This is a long-standing feature in the Servlet API, since Servlet spec version 2.4.</p>\n<ul>\n<li><a href=\"https://jakarta.ee/specifications/servlet/5.0/apidocs/jakarta/servlet/servletrequestlistener#requestInitialized(jakarta.servlet.ServletRequestEvent)\" rel=\"nofollow noreferrer\"><code>requestInitialized</code></a> method is your hook to know when handling of a request begins.</li>\n<li><a href=\"https://jakarta.ee/specifications/servlet/5.0/apidocs/jakarta/servlet/servletrequestlistener#requestDestroyed(jakarta.servlet.ServletRequestEvent)\" rel=\"nofollow noreferrer\"><code>requestDestroyed</code></a> method is your hook for when handling of a request ends.</li>\n</ul>\n<h2>Example code</h2>\n<p>Here is a little demo I wrote.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.demo;\n\nimport jakarta.servlet.ServletRequest;\nimport jakarta.servlet.ServletRequestEvent;\nimport jakarta.servlet.ServletRequestListener;\nimport jakarta.servlet.annotation.WebListener;\nimport jakarta.servlet.http.HttpServletRequest;\n\nimport java.time.Instant;\n\n@WebListener\npublic class RequestAnnouncer implements ServletRequestListener\n{\n    @Override\n    public void requestInitialized ( ServletRequestEvent sre )\n    {\n        ServletRequestListener.super.requestInitialized( sre );\n\n        ServletRequest sr = sre.getServletRequest();\n        HttpServletRequest request = ( HttpServletRequest ) sr;\n        String url = request.getRequestURL() + ( request.getQueryString() == null ? &quot;&quot; : &quot;?&quot; + request.getQueryString() );\n        System.out.println( &quot;INFO - Request initialized in thread &quot; + Thread.currentThread().getId() + &quot; at &quot; + Instant.now() + &quot; | &quot; + url );\n    }\n\n    @Override\n    public void requestDestroyed ( ServletRequestEvent sre )\n    {\n        ServletRequestListener.super.requestDestroyed( sre );\n\n        ServletRequest sr = sre.getServletRequest();\n        HttpServletRequest request = ( HttpServletRequest ) sr;\n        String url = request.getRequestURL() + ( request.getQueryString() == null ? &quot;&quot; : &quot;?&quot; + request.getQueryString() );\n        System.out.println( &quot;INFO - Request destroyed in thread &quot; + Thread.currentThread().getId() + &quot; at &quot; + Instant.now() + &quot; | &quot; + url );\n    }\n}\n</code></pre>\n<h3><code>@WebListener</code></h3>\n<p>Notice the annotation <a href=\"https://jakarta.ee/specifications/servlet/5.0/apidocs/jakarta/servlet/annotation/weblistener\" rel=\"nofollow noreferrer\"><code>@WebListener</code></a>. With this annotation, you can skip editing the web XML configuration file. The <code>@WebListener</code> acts as a flag at runtime, so the Servlet container will automatically detect, instantiate, and execute this class at the appropriate point in the lifecycle of your web app. This modern convenience was added in Servlet spec 3.0.</p>\n<h3><code>jakarta.*</code> package naming</h3>\n<p>Also notice the <code>jakarta.*</code> package naming in the <code>import</code> statements. Java EE is now known as Jakarta EE after Oracle Corp handed responsibility to the Eclipse Foundation a few years ago. Jakarta Servlet specifications versions 4 and 5 (used here) are equivalent except for a change in package names from javax.* to jakarta.*.</p>\n<p>By the way, <a href=\"https://jakarta.ee/specifications/servlet/6.0/\" rel=\"nofollow noreferrer\">Jakarta Servlet spec version 6</a> was released this year as part of Jakarta EE 10, with the first major changes in many years. See article, <a href=\"https://www.theserverside.com/blog/Coffee-Talk-Java-News-Stories-and-Opinions/Top-5-things-to-know-about-the-Jakarta-Servlet-60-API-release\" rel=\"nofollow noreferrer\"><em>Top 5 things to know about the Jakarta Servlet 6.0 API release</em></a>.</p>\n<h2>Run example</h2>\n<p>When run in the Microsoft Edge browser Version 103.0.1264.62 (Official build) (arm64) for macOS Monterey 12.4 on Apache Tomcat 2022.2 Beta with Adoptium Temurin for Java 18.0.1+10 on a MacBook Pro (16-inch, 2021) Apple M1 Pro, for URL <code>http://localhost:8080/demo_war_exploded/hello-servlet</code> results in the following output.</p>\n<pre class=\"lang-none prettyprint-override\"><code>INFO - Request initialized in thread 23 at 2022-07-15T20:55:21.060303Z | http://localhost:8080/demo_war_exploded/hello-servlet\nINFO - Request destroyed in thread 23 at 2022-07-15T20:55:21.066361Z | http://localhost:8080/demo_war_exploded/hello-servlet\nINFO - Request initialized in thread 26 at 2022-07-15T20:55:21.151810Z | http://localhost:8080/demo_war_exploded/hello-servlet\nINFO - Request destroyed in thread 26 at 2022-07-15T20:55:21.152086Z | http://localhost:8080/demo_war_exploded/hello-servlet\n</code></pre>\n<p>Why do we get a four lines instead of two for a single request? Well, looking at the access logs shows that this browser sent a request on both IPv4 and IPv6. And the browser sent a request to just <code>/</code>, but I have no idea why.</p>\n<pre class=\"lang-none prettyprint-override\"><code>127.0.0.1 - - [15/Jul/2022:13:55:21 -0700] &quot;GET /demo_war_exploded/hello-servlet HTTP/1.1&quot; 200 306\n127.0.0.1 - - [15/Jul/2022:13:55:21 -0700] &quot;GET / HTTP/1.1&quot; 404 683\n0:0:0:0:0:0:0:1 - - [15/Jul/2022:13:55:21 -0700] &quot;GET /demo_war_exploded/hello-servlet HTTP/1.1&quot; 200 306\n</code></pre>\n<h1>Filters</h1>\n<p>When to use <code>ServletRequestListener</code> and when to use filters? Filters are used in a chain to process the request and response. The listener fires once per request, at the very beginning and the very end. In contrast, multiple filters may fire for a single request. To quote the Javadoc:</p>\n<blockquote>\n<p>Interface for receiving notification events about requests coming into and going out of scope of a web application.</p>\n<p>A ServletRequest is defined as coming into scope of a web application when it is about to enter the first servlet or filter of the web application, and as going out of scope as it exits the last servlet or the first filter in the chain.</p>\n</blockquote>\n<p>So we have a progression of beginning, middle, and end where the listener fires for beginning and end while zero, one , or more filters may fire in the middle.</p>\n<blockquote>\n<p><code>ServletRequestListener#requestInitialized</code> &gt; [  filters  ] &gt; <code>ServletRequestListener#requestDestroyed</code></p>\n</blockquote>\n<p>Interestingly, I noticed the <em>Filter</em> API was added in Servlet spec version 2.3, and the <em>ServletRequestListener</em> API was added in 2.4. So I would guess that soon after rolling out the filter feature, developers found a need for hooks that act as temporal bookends, bracketing outside a series of filters. Since any number of filters may fire, without one filter knowing about the others, you might want a hook for the very beginning and the very end.</p>\n<hr />\n<h1>Servlet example code</h1>\n<p>If curious, the Servlet I wrote for the above example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.demo;\n\nimport java.io.*;\nimport java.time.Instant;\n\nimport jakarta.servlet.http.*;\nimport jakarta.servlet.annotation.*;\n\n@WebServlet ( name = &quot;helloServlet&quot;, value = &quot;/hello-servlet&quot; )\npublic class HelloServlet extends HttpServlet\n{\n    private String message;\n\n    public void init ( )\n    {\n        message = &quot;What time is it?&quot;;\n    }\n\n    public void doGet ( HttpServletRequest request , HttpServletResponse response ) throws IOException\n    {\n        response.setContentType( &quot;text/html&quot; );\n\n        // Hello\n        PrintWriter out = response.getWriter();\n        out.println( &quot;&lt;!DOCTYPE html&gt;&quot; );\n        out.println(\n                &quot;&quot;&quot;\n                &lt;head&gt;\n                  &lt;meta charset=&quot;utf-8&quot;&gt;\n                  &lt;title&gt;Servlet Request Listener Example&lt;/title&gt;\n                  &lt;!-- &lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot;&gt;  --&gt;\n                  &lt;!-- &lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt; --&gt;\n                &lt;/head&gt;\n                &quot;&quot;&quot;\n        );\n        out.println( &quot;&lt;html lang='en'&gt;&quot; );\n        out.println( &quot;&lt;body&gt;&quot; );\n        out.println( &quot;&lt;h1&gt;&quot; + message + &quot;&lt;/h1&gt;&quot; );\n        out.println( &quot;&lt;p&gt;&quot; + Instant.now() + &quot;&lt;/p&gt;&quot; );\n        out.println( &quot;&lt;/body&gt;&quot; );\n        out.println( &quot;&lt;/html&gt;&quot; );\n    }\n\n    public void destroy ( )\n    {\n    }\n}\n</code></pre>\n<hr />\n<p>You said:</p>\n<blockquote>\n<p>I happen to be using Java 8. I assume that corresponds to JavaEE 8.</p>\n</blockquote>\n<p>If you mean a correspondence between version numbers 8 and 8, no.</p>\n<p>The name Java EE (now Jakarta EE), meaning Enterprise Edition, is a bit of a misnomer. Jakarta EE is just a bunch of specifications for a bunch of software that can be called from Java code running in a Java Virtual Machine. So &quot;Java EE&quot; was never really &quot;Java&quot;, it was a framework of specs and libraries for helping developers build enterprise-oriented applications.</p>\n<p>Java EE 8, re-released as <a href=\"https://jakarta.ee/specifications/platform/8/\" rel=\"nofollow noreferrer\">Jakarta EE 8</a>, <a href=\"https://jakarta.ee/specifications/platform/8/platform-spec-8.html#container-requirements\" rel=\"nofollow noreferrer\">requires Java 8</a>. (Major changes came to Java 9 through 11 that may cause problems when migrating.)</p>\n<p><a href=\"https://jakarta.ee/specifications/platform/9/\" rel=\"nofollow noreferrer\">Jakarta EE 9</a> is essentially the same as Jakarta EE 8, but for the change in package naming from <code>javax.*</code> to <code>jakarta.*</code>. So it too <a href=\"https://jakarta.ee/specifications/platform/9/jakarta-platform-spec-9.html#container-requirements\" rel=\"nofollow noreferrer\">requires Java 8</a>.</p>\n<p><a href=\"https://jakarta.ee/specifications/platform/9.1/\" rel=\"nofollow noreferrer\">Jakarta EE 9.1</a> is a revamp and cleanup of Jakarta EE 8 &amp; 9, dropping some old deprecations, adding more deprecations, and doing other work to lay the foundation for future innovations. Among the changes is <a href=\"https://jakarta.ee/specifications/platform/9.1/jakarta-platform-spec-9.1.html#changes-in-jakarta-ee-9-1\" rel=\"nofollow noreferrer\">requiring implementations to support Java 11</a> in <a href=\"https://jakarta.ee/specifications/platform/9.1/jakarta-platform-spec-9.1.html#container-requirements\" rel=\"nofollow noreferrer\">addition to Java 8</a> (both <a href=\"https://en.wikipedia.org/wiki/Long-term_support\" rel=\"nofollow noreferrer\">LTS</a> versions). And while not an explicit requirement, all implementations are expected to be able to run in Java 17 (the current <a href=\"https://en.wikipedia.org/wiki/Long-term_support\" rel=\"nofollow noreferrer\">LTS</a> version) as well.</p>\n<p><a href=\"https://jakarta.ee/specifications/platform/10/\" rel=\"nofollow noreferrer\">Jakarta EE 10</a> brings the first wave of those long-awaited innovations.</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Jakarta EE</th>\n<th>Requires Java</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>8</td>\n<td>8</td>\n</tr>\n<tr>\n<td>9</td>\n<td>8</td>\n</tr>\n<tr>\n<td>9.1</td>\n<td>8 &amp; 11 (and likely 17)</td>\n</tr>\n<tr>\n<td>10</td>\n<td>??</td>\n</tr>\n</tbody>\n</table>\n</div>"}],"owner":{"account_id":7281,"reputation":248647,"user_id":12597,"accept_rate":76,"display_name":"Ian Boyd"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1657928937,"creation_date":1657894620,"question_id":72995407,"body_markdown":"Short Version\r\n=============\r\n\r\nIn JavaEE, i want to know when:\r\n\r\n- when a request starts\r\n- and when a request ends\r\n\r\nand be able to inspect the request and response objects.\r\n\r\nLong Version\r\n============\r\n\r\nIn the ASP.net world, if you want to know when a request starts and ends, you write an **`IHttpModule`**:\r\n\r\n```\r\npublic class ExampleModuleForThisQuestion : IHttpModule\r\n{\r\n}\r\n```\r\n\r\nAnd then register your *&quot;module&quot;* in the web xml configuration file:\r\n\r\n**web.config**:\r\n\r\n```\r\n\t&lt;system.webServer&gt;\r\n\t\t&lt;modules&gt;\r\n\t\t\t&lt;add name=&quot;DoesntMatter&quot; type=&quot;ExampleModuleForThisQuestion &quot;/&gt;\r\n\t\t&lt;/modules&gt;\r\n\t&lt;/system.webServer&gt; \r\n```\r\n\r\nInside your module you can register callback handlers for:\r\n\r\n- **BeginRequest** event\r\n- **EndRequest** event\r\n\r\nThe web-server infrastructure then calls you **`Init`** method. That is your opportunity to register that you want to receive notifications when a request starts, and when a request ends:\r\n\r\n```\r\npublic class ExampleModuleForThisQuestion : IHttpModule\r\n{\r\n   public void Init(HttpApplication application)\r\n   {\r\n      application.BeginRequest += new EventHandler(beginRequest); //register the &quot;BeginRequet&quot; event\r\n      application.EndRequest += new EventHandler(endRequest); //register the &quot;EndRequest&quot; event\r\n   }\r\n}\r\n```\r\n\r\nAnd now we have our callbacks when a *request starts*:\r\n\r\n```\r\nprivate void beginRequest(object sender, EventArgs e)\r\n{\r\n   HttpApplication application = (HttpApplication)sender;\r\n\r\n   //Record the time the request started\r\n   application.Context.Items[&quot;RequestStartTime&quot;] = DateTime.Now;\r\n\r\n   //We can even access the Request and Response objects\r\n   application.ContenxtLog(application.Context.Request.Headers[&quot;User-Agent&quot;]);\r\n}\r\n```\r\n\r\nand we have our callback when a *request ends*:\r\n\r\n```\r\nprivate void endRequest(object sender, EventArgs e)\r\n{\r\n   HttpApplication application = (HttpApplication)sender;\r\n\r\n   //We can even access the Request and Response objects\r\n\r\n   //Get the response status code (e.g. 418 I&#39;m a teapot)\r\n   int statusCode = application.Context.Response.StatusCode;\r\n\r\n   //Get the request method (e.g. GET, POST, BREW)\r\n   String method = application.context.Request.RequestType;\r\n\r\n   //Get the path from the request (e.g. /ViewCustomer)\r\n   String path = application.context.Request.AppRelativeCurrentExecutionFilePath&#39;\r\n   \r\n   //Get when the request started - that we recorded during &quot;Begin Request&quot;\r\n   DateTime requestStartTime = (DateTime)application.Context.Items[&quot;RequestStartTime&quot;];\r\n\r\n   //And we can modify the response\r\n   if ((DateTime.Now - requestStartTime).TotalSeconds = 17)\r\n       application.Context.Response.StatusCode = 451;\r\n}\r\n```\r\n\r\nNow how to do it in JavaEE?\r\n===========================\r\n\r\nThe question is: what is the moral equivalent of `IHttpModule` in the Java web-server world?\r\n\r\n[Some people](https://stackoverflow.com/questions/29069662/how-to-get-request-object-from-httpsessionattributelistener) say that it is an [`ServletRequestListener`][1]:\r\n\r\n&gt; Interface for receiving notification events about requests coming into and going out of scope of a web application.\r\n&gt; \r\n&gt; A ServletRequest is defined as coming into scope of a web application when it is about to enter the first servlet or filter of the web application, and as going out of scope as it exits the last servlet or the first filter in the chain.\r\n\r\n[Others insist](https://stackoverflow.com/a/3663608/12597) that you want a *&quot;filter&quot;* and a *&quot;filter chain&quot;*.\r\n\r\nSome say that a *&quot;filter&quot;* gives you everything that `ServletRequestListener` does, but that a *filter* can also be configured to run for only certain URL.\r\n\r\n[This](https://docs.oracle.com/javaee/5/tutorial/doc/bnafi.html) random page on docs.oracle.com says nothing about *&quot;filters&quot;*, and instead i need a `ServletContextListener`, because that&#39;s the only way to receive a notification for **each** request. But then they have a table that seems to contradict that, and that i want a `ServletRequestEvent`:\r\n\r\n| Object      | Event                          | Listener Interface and Event Class |\r\n|-------------|--------------------------------|--------------------------------------|\r\n| Web context | Initialization and destruction | `javax.servlet.ServletContextListener` and `ServletContextEvent` |\r\n| Web context | Attribute added, removed, or replaced | `javax.servlet.ServletContextAttributeListener` and `ServletContextAttributeEvent` |\r\n| Session     | Creation, invalidation, activation, passivation, and timeout | `javax.servlet.http.HttpSessionListener`, `javax.servlet.http.HttpSessionActivationListener`, and `HttpSessionEvent` |\r\n| Session     | Attribute added, removed, or replaced | `javax.servlet.http.HttpSessionAttributeListener` and `HttpSessionBindingEvent` |\r\n| Request     | A servlet request has started being processed by web components | `javax.servlet.ServletRequestListener` and `ServletRequestEvent` |\r\n| Request     | Attribute added, removed, or replaced | `javax.servlet.ServletRequestAttributeListener` and `ServletRequestAttributeEvent` |\r\n\r\nI don&#39;t know what any of these things are. I just want to be notified during a web-request:\r\n\r\n- when the request processing begins\r\n- when the request processing ends\r\n\r\nWriting Java code blind\r\n========================\r\n\r\nI can try to transcribe the ASP.net code into Java-esque code on the fly, and hopefully someone can just fix it.\r\n\r\nFirst we&#39;ll create a class that implements...`ServletRequestListener`?:\r\n\r\n```\r\npublic class ExampleListenerForThisQuestion \r\n      implements javax.servlet.ServletRequestListener {\r\n\r\n}\r\n```\r\n\r\nAnd then we register our *&quot;module&quot;* in our web xml configuration file:\r\n\r\n**web.xml**\r\n\r\n```\r\n&lt;listener&gt;\r\n    &lt;listener-class&gt;ExampleListenerForThisQuestion&lt;/listener-class&gt;\r\n&lt;/listener&gt;\r\n```\r\n\r\nNow we will implement the [**requestInitialized**][2] method to create our event listeners:\r\n\r\n```\r\npublic class ExampleListenerForThisQuestion \r\n      implements javax.servlet.ServletRequestListener {\r\n\r\n   public void requestInitialized(ServletRequestEvent sre) {\r\n      //...now i&#39;m stuck \r\n   }\r\n}\r\n```\r\n\r\nThat didn&#39;t get very var.\r\n\r\nThe closest question on stackoverflow to what i want is:\r\n\r\n&gt; [Event like .net&#39;s &quot;Application_Start&quot; and &quot;Begin_Request&quot; for java/tomcat/JSP?](https://stackoverflow.com/questions/3663511/event-like-nets-application-start-and-begin-request-for-java-tomcat-jsp)\r\n\r\nThe only problem is that the accepted answer doesn&#39;t answer how to do it. That makes sense: the question wasn&#39;t asking **how** to do it. The question was only asking **if** Java has an equivalent. Apparently it does - [but we won&#39;t tell you how.](https://stackoverflow.com/a/3663614/12597)\r\n\r\nResearch Effort\r\n===============\r\n\r\n- https://stackoverflow.com/questions/29069662/how-to-get-request-object-from-httpsessionattributelistener\r\n- https://stackoverflow.com/questions/3663511/event-like-nets-application-start-and-begin-request-for-java-tomcat-jsp\r\n- [ServletRequestListener Example Use Case](https://memorynotfound.com/servletrequestlistener-example-use-case/)\r\n- [ServletRequestEvent and ServletRequestListener in Servlet](https://www.studytonight.com/servlet/servlet-request-event-and-listener.php)\r\n- [The Java EE 5 Tutorial -  Handling Servlet Life-Cycle Events](https://docs.oracle.com/javaee/5/tutorial/doc/bnafi.html)\r\n- [Java Web series: Java Web basics and Java Web Basics][3]\r\n\r\nI know that trying to figure out how to do it in JavaEE will take me at *least* 4 days. I&#39;m hoping to cut that down to 6 or 7 hours by asking Stackoverflow.\r\n\r\nThis question took me an hour-and-a-half to write up. I wrote the ASP.net code, from memory, in 25 seconds. It took me longer to ask the question about how to do it in Java than it would have just taken me to do it in ASP.net - which shows just how crushed and defeated i am right now.\r\n\r\n**Edit**: I happen to be using Java 8. I *assume* that corresponds to JavaEE 8.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequestListener.html\r\n  [2]: https://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequestListener.html#requestInitialized(javax.servlet.ServletRequestEvent)\r\n  [3]: https://topic.alibabacloud.com/a/java-web-series-java-web-basics-and-java-web-basics_1_27_32644066.html","title":"How to hook BeginRequest and EndRequest in JavaEE?","body":"<h1>Short Version</h1>\n<p>In JavaEE, i want to know when:</p>\n<ul>\n<li>when a request starts</li>\n<li>and when a request ends</li>\n</ul>\n<p>and be able to inspect the request and response objects.</p>\n<h1>Long Version</h1>\n<p>In the ASP.net world, if you want to know when a request starts and ends, you write an <strong><code>IHttpModule</code></strong>:</p>\n<pre><code>public class ExampleModuleForThisQuestion : IHttpModule\n{\n}\n</code></pre>\n<p>And then register your <em>&quot;module&quot;</em> in the web xml configuration file:</p>\n<p><strong>web.config</strong>:</p>\n<pre><code>    &lt;system.webServer&gt;\n        &lt;modules&gt;\n            &lt;add name=&quot;DoesntMatter&quot; type=&quot;ExampleModuleForThisQuestion &quot;/&gt;\n        &lt;/modules&gt;\n    &lt;/system.webServer&gt; \n</code></pre>\n<p>Inside your module you can register callback handlers for:</p>\n<ul>\n<li><strong>BeginRequest</strong> event</li>\n<li><strong>EndRequest</strong> event</li>\n</ul>\n<p>The web-server infrastructure then calls you <strong><code>Init</code></strong> method. That is your opportunity to register that you want to receive notifications when a request starts, and when a request ends:</p>\n<pre><code>public class ExampleModuleForThisQuestion : IHttpModule\n{\n   public void Init(HttpApplication application)\n   {\n      application.BeginRequest += new EventHandler(beginRequest); //register the &quot;BeginRequet&quot; event\n      application.EndRequest += new EventHandler(endRequest); //register the &quot;EndRequest&quot; event\n   }\n}\n</code></pre>\n<p>And now we have our callbacks when a <em>request starts</em>:</p>\n<pre><code>private void beginRequest(object sender, EventArgs e)\n{\n   HttpApplication application = (HttpApplication)sender;\n\n   //Record the time the request started\n   application.Context.Items[&quot;RequestStartTime&quot;] = DateTime.Now;\n\n   //We can even access the Request and Response objects\n   application.ContenxtLog(application.Context.Request.Headers[&quot;User-Agent&quot;]);\n}\n</code></pre>\n<p>and we have our callback when a <em>request ends</em>:</p>\n<pre><code>private void endRequest(object sender, EventArgs e)\n{\n   HttpApplication application = (HttpApplication)sender;\n\n   //We can even access the Request and Response objects\n\n   //Get the response status code (e.g. 418 I'm a teapot)\n   int statusCode = application.Context.Response.StatusCode;\n\n   //Get the request method (e.g. GET, POST, BREW)\n   String method = application.context.Request.RequestType;\n\n   //Get the path from the request (e.g. /ViewCustomer)\n   String path = application.context.Request.AppRelativeCurrentExecutionFilePath'\n   \n   //Get when the request started - that we recorded during &quot;Begin Request&quot;\n   DateTime requestStartTime = (DateTime)application.Context.Items[&quot;RequestStartTime&quot;];\n\n   //And we can modify the response\n   if ((DateTime.Now - requestStartTime).TotalSeconds = 17)\n       application.Context.Response.StatusCode = 451;\n}\n</code></pre>\n<h1>Now how to do it in JavaEE?</h1>\n<p>The question is: what is the moral equivalent of <code>IHttpModule</code> in the Java web-server world?</p>\n<p><a href=\"https://stackoverflow.com/questions/29069662/how-to-get-request-object-from-httpsessionattributelistener\">Some people</a> say that it is an <a href=\"https://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequestListener.html\" rel=\"nofollow noreferrer\"><code>ServletRequestListener</code></a>:</p>\n<blockquote>\n<p>Interface for receiving notification events about requests coming into and going out of scope of a web application.</p>\n<p>A ServletRequest is defined as coming into scope of a web application when it is about to enter the first servlet or filter of the web application, and as going out of scope as it exits the last servlet or the first filter in the chain.</p>\n</blockquote>\n<p><a href=\"https://stackoverflow.com/a/3663608/12597\">Others insist</a> that you want a <em>&quot;filter&quot;</em> and a <em>&quot;filter chain&quot;</em>.</p>\n<p>Some say that a <em>&quot;filter&quot;</em> gives you everything that <code>ServletRequestListener</code> does, but that a <em>filter</em> can also be configured to run for only certain URL.</p>\n<p><a href=\"https://docs.oracle.com/javaee/5/tutorial/doc/bnafi.html\" rel=\"nofollow noreferrer\">This</a> random page on docs.oracle.com says nothing about <em>&quot;filters&quot;</em>, and instead i need a <code>ServletContextListener</code>, because that's the only way to receive a notification for <strong>each</strong> request. But then they have a table that seems to contradict that, and that i want a <code>ServletRequestEvent</code>:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Object</th>\n<th>Event</th>\n<th>Listener Interface and Event Class</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Web context</td>\n<td>Initialization and destruction</td>\n<td><code>javax.servlet.ServletContextListener</code> and <code>ServletContextEvent</code></td>\n</tr>\n<tr>\n<td>Web context</td>\n<td>Attribute added, removed, or replaced</td>\n<td><code>javax.servlet.ServletContextAttributeListener</code> and <code>ServletContextAttributeEvent</code></td>\n</tr>\n<tr>\n<td>Session</td>\n<td>Creation, invalidation, activation, passivation, and timeout</td>\n<td><code>javax.servlet.http.HttpSessionListener</code>, <code>javax.servlet.http.HttpSessionActivationListener</code>, and <code>HttpSessionEvent</code></td>\n</tr>\n<tr>\n<td>Session</td>\n<td>Attribute added, removed, or replaced</td>\n<td><code>javax.servlet.http.HttpSessionAttributeListener</code> and <code>HttpSessionBindingEvent</code></td>\n</tr>\n<tr>\n<td>Request</td>\n<td>A servlet request has started being processed by web components</td>\n<td><code>javax.servlet.ServletRequestListener</code> and <code>ServletRequestEvent</code></td>\n</tr>\n<tr>\n<td>Request</td>\n<td>Attribute added, removed, or replaced</td>\n<td><code>javax.servlet.ServletRequestAttributeListener</code> and <code>ServletRequestAttributeEvent</code></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>I don't know what any of these things are. I just want to be notified during a web-request:</p>\n<ul>\n<li>when the request processing begins</li>\n<li>when the request processing ends</li>\n</ul>\n<h1>Writing Java code blind</h1>\n<p>I can try to transcribe the ASP.net code into Java-esque code on the fly, and hopefully someone can just fix it.</p>\n<p>First we'll create a class that implements...<code>ServletRequestListener</code>?:</p>\n<pre><code>public class ExampleListenerForThisQuestion \n      implements javax.servlet.ServletRequestListener {\n\n}\n</code></pre>\n<p>And then we register our <em>&quot;module&quot;</em> in our web xml configuration file:</p>\n<p><strong>web.xml</strong></p>\n<pre><code>&lt;listener&gt;\n    &lt;listener-class&gt;ExampleListenerForThisQuestion&lt;/listener-class&gt;\n&lt;/listener&gt;\n</code></pre>\n<p>Now we will implement the <a href=\"https://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequestListener.html#requestInitialized(javax.servlet.ServletRequestEvent)\" rel=\"nofollow noreferrer\"><strong>requestInitialized</strong></a> method to create our event listeners:</p>\n<pre><code>public class ExampleListenerForThisQuestion \n      implements javax.servlet.ServletRequestListener {\n\n   public void requestInitialized(ServletRequestEvent sre) {\n      //...now i'm stuck \n   }\n}\n</code></pre>\n<p>That didn't get very var.</p>\n<p>The closest question on stackoverflow to what i want is:</p>\n<blockquote>\n<p><a href=\"https://stackoverflow.com/questions/3663511/event-like-nets-application-start-and-begin-request-for-java-tomcat-jsp\">Event like .net's &quot;Application_Start&quot; and &quot;Begin_Request&quot; for java/tomcat/JSP?</a></p>\n</blockquote>\n<p>The only problem is that the accepted answer doesn't answer how to do it. That makes sense: the question wasn't asking <strong>how</strong> to do it. The question was only asking <strong>if</strong> Java has an equivalent. Apparently it does - <a href=\"https://stackoverflow.com/a/3663614/12597\">but we won't tell you how.</a></p>\n<h1>Research Effort</h1>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/29069662/how-to-get-request-object-from-httpsessionattributelistener\">How to get request object from HttpSessionAttributeListener</a></li>\n<li><a href=\"https://stackoverflow.com/questions/3663511/event-like-nets-application-start-and-begin-request-for-java-tomcat-jsp\">Event like .net&#39;s &quot;Application_Start&quot; and &quot;Begin_Request&quot; for java/tomcat/JSP?</a></li>\n<li><a href=\"https://memorynotfound.com/servletrequestlistener-example-use-case/\" rel=\"nofollow noreferrer\">ServletRequestListener Example Use Case</a></li>\n<li><a href=\"https://www.studytonight.com/servlet/servlet-request-event-and-listener.php\" rel=\"nofollow noreferrer\">ServletRequestEvent and ServletRequestListener in Servlet</a></li>\n<li><a href=\"https://docs.oracle.com/javaee/5/tutorial/doc/bnafi.html\" rel=\"nofollow noreferrer\">The Java EE 5 Tutorial -  Handling Servlet Life-Cycle Events</a></li>\n<li><a href=\"https://topic.alibabacloud.com/a/java-web-series-java-web-basics-and-java-web-basics_1_27_32644066.html\" rel=\"nofollow noreferrer\">Java Web series: Java Web basics and Java Web Basics</a></li>\n</ul>\n<p>I know that trying to figure out how to do it in JavaEE will take me at <em>least</em> 4 days. I'm hoping to cut that down to 6 or 7 hours by asking Stackoverflow.</p>\n<p>This question took me an hour-and-a-half to write up. I wrote the ASP.net code, from memory, in 25 seconds. It took me longer to ask the question about how to do it in Java than it would have just taken me to do it in ASP.net - which shows just how crushed and defeated i am right now.</p>\n<p><strong>Edit</strong>: I happen to be using Java 8. I <em>assume</em> that corresponds to JavaEE 8.</p>\n"},{"tags":["java","android","canvas","bitmap"],"answers":[{"tags":[],"owner":{"account_id":18463410,"reputation":18363,"user_id":13598222,"display_name":"cactustictacs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1657928375,"creation_date":1657846044,"answer_id":72987976,"question_id":72986071,"body_markdown":"If your drawing works fine it doesn&#39;t seem like there&#39;s a rendering problem - it&#39;s all calling `loadSurfaceBitmap()` the same way, right? I don&#39;t know if handling a touch event makes a difference and if you need to call `invalidate()` otherwise - I&#39;ve never poked at surface canvases like this.\r\n\r\nYour *undo* code is a little strange though\r\n\r\n````\r\nBitmap removedBitmap = mBitmapsUndone.remove(drawnSize - 1);\r\nmPathsUndone.push(removedBitmap);\r\nloadSurfaceBitmap();\r\n````\r\n\r\nYou&#39;re removing a bitmap from your `Undone` stack when you should be removing it from your `Drawn` list - I&#39;m assuming that&#39;s why you&#39;re doing `remove(size - 1)` instead of just `pop()`, because you meant to remove from the `List` instead of the `Stack` (why not just use two `Stack`s anyway?).\r\n\r\nThen you place it onto something called `mPathsUndone` which is maybe a typo from renaming *Paths* to *Bitmaps* for the question? If so your undo code is removing a bitmap from the undo stack, then putting it back on top - otherwise it&#39;s going somewhere mysterious. (You&#39;re also using the size of the *drawn* list to get an index for the *undo* stack so that will cause big problems too)\r\n\r\nYour *redo* code looks fine to me, I&#39;m guessing the only problem is that your *undo* code wasn&#39;t actually adding anything to its stack, so there&#39;s nothing to redo. I&#39;m guessing this might fix it:\r\n\r\n````\r\nprotected void undo() {\r\n    int undoSize = mBitmapsUndone.size();\r\n    int drawnSize = mBitmapsDrawn.size();\r\n    if (drawnSize &gt; 0) {\r\n        Bitmap removedBitmap = mBitmapsDrawn.remove(drawnSize - 1);\r\n        mBitmapsUndone.push(removedBitmap);\r\n        loadSurfaceBitmap();\r\n    }\r\n}\r\n````\r\n\r\nI feel like using stacks for both would be more intuitive since it&#39;s a nice pop one, push the other flow, but that&#39;s up to you!\r\n\r\n----\r\n\r\n**edit** here&#39;s some code updating the file you posted, something like this should work:\r\n\r\n````\r\nprotected void onDraw() {\r\n    if (mCanvas == null) {\r\n        return;\r\n    }\r\n    // a new drawing event needs a new bitmap layer to draw it on,\r\n    // starting with the contents of the current layer\r\n    mBitmap = mBitmap.copy(mBitmap.getConfig(), true);\r\n    // we also need a canvas for the new bitmap so we can draw on it\r\n    mCanvas = new Canvas(mBitmap);\r\n\r\n    mCanvas.drawPath(mPath, mFgPaint);\r\n}\r\n````\r\n\r\nPersonally I&#39;d probably move the &quot;add this bitmap to `mBitmapsDrawn`&quot; code here too, as well as the &quot;draw the current bitmap to the surface&quot; code - you&#39;re doing those in `touchUp` but I feel like they&#39;re more directly related to the action of drawing, and `touchUp` is more about finalising a touch gesture and initiating the draw call. Up to you!\r\n\r\nHere&#39;s how I&#39;d probably organise this, if it helps. Since every draw event creates a new bitmap, you don&#39;t need to keep a reference to a bitmap&#39;s `Canvas` - you&#39;ll have to create a new one anyway. I&#39;d do the rest this way:\r\n\r\n````\r\ngetCurrentBitmap() {\r\n    return the top of mBitmapsDrawn, or if empty, the background bitmap\r\n}\r\n\r\ndrawCurrentBitmap() {\r\n    calls getCurrentBitmap(), draws it to the Surface\r\n}\r\n\r\nundo() {\r\n    pops a bitmap off Drawn and pushes onto Undo, calls drawCurrentBitmap()\r\n}\r\n\r\nredo() {\r\n    pops a bitmap off Undo and pushes onto Drawn, calls drawCurrentBitmap()\r\n}\r\n\r\ndrawPath() {\r\n    call getCurrentBitmap to get a source image\r\n    create a new bitmap from that\r\n    create a canvas for it and draw to it\r\n    push the bitmap onto Drawn\r\n    clear Undo\r\n    call drawCurrentBitmap\r\n}\r\n````\r\n\r\nSo everything&#39;s really about manipulating the drawn and undo stacks, and every time the drawn one changes, you call a function that displays the image on top of it. And having a `getCurrentBitmap` function puts that logic in one place, so everything that updates the stack doesn&#39;t also need to worry about updating `mBitmap` with the appropriate value.\r\n\r\nI&#39;ll also say, storing bitmaps like this works fine, but it&#39;s pretty inefficient - your memory usage could start to pile up quickly! Since you&#39;re doing drawing operations, you might want to think about storing representations of *those* instead, so you can get the &quot;current&quot; image by replaying all the past draw operations in order.\r\n\r\nYou could get fancy and cache a bitmap of the result of all but the most recent operations, and replay the most recent ones on top of that to make redrawing faster - but you&#39;d still have all those operations in your history, almost infinite undo. Just something to consider maybe!","title":"Undo / Redo Bitmap is not properly working","body":"<p>If your drawing works fine it doesn't seem like there's a rendering problem - it's all calling <code>loadSurfaceBitmap()</code> the same way, right? I don't know if handling a touch event makes a difference and if you need to call <code>invalidate()</code> otherwise - I've never poked at surface canvases like this.</p>\n<p>Your <em>undo</em> code is a little strange though</p>\n<pre><code>Bitmap removedBitmap = mBitmapsUndone.remove(drawnSize - 1);\nmPathsUndone.push(removedBitmap);\nloadSurfaceBitmap();\n</code></pre>\n<p>You're removing a bitmap from your <code>Undone</code> stack when you should be removing it from your <code>Drawn</code> list - I'm assuming that's why you're doing <code>remove(size - 1)</code> instead of just <code>pop()</code>, because you meant to remove from the <code>List</code> instead of the <code>Stack</code> (why not just use two <code>Stack</code>s anyway?).</p>\n<p>Then you place it onto something called <code>mPathsUndone</code> which is maybe a typo from renaming <em>Paths</em> to <em>Bitmaps</em> for the question? If so your undo code is removing a bitmap from the undo stack, then putting it back on top - otherwise it's going somewhere mysterious. (You're also using the size of the <em>drawn</em> list to get an index for the <em>undo</em> stack so that will cause big problems too)</p>\n<p>Your <em>redo</em> code looks fine to me, I'm guessing the only problem is that your <em>undo</em> code wasn't actually adding anything to its stack, so there's nothing to redo. I'm guessing this might fix it:</p>\n<pre><code>protected void undo() {\n    int undoSize = mBitmapsUndone.size();\n    int drawnSize = mBitmapsDrawn.size();\n    if (drawnSize &gt; 0) {\n        Bitmap removedBitmap = mBitmapsDrawn.remove(drawnSize - 1);\n        mBitmapsUndone.push(removedBitmap);\n        loadSurfaceBitmap();\n    }\n}\n</code></pre>\n<p>I feel like using stacks for both would be more intuitive since it's a nice pop one, push the other flow, but that's up to you!</p>\n<hr />\n<p><strong>edit</strong> here's some code updating the file you posted, something like this should work:</p>\n<pre><code>protected void onDraw() {\n    if (mCanvas == null) {\n        return;\n    }\n    // a new drawing event needs a new bitmap layer to draw it on,\n    // starting with the contents of the current layer\n    mBitmap = mBitmap.copy(mBitmap.getConfig(), true);\n    // we also need a canvas for the new bitmap so we can draw on it\n    mCanvas = new Canvas(mBitmap);\n\n    mCanvas.drawPath(mPath, mFgPaint);\n}\n</code></pre>\n<p>Personally I'd probably move the &quot;add this bitmap to <code>mBitmapsDrawn</code>&quot; code here too, as well as the &quot;draw the current bitmap to the surface&quot; code - you're doing those in <code>touchUp</code> but I feel like they're more directly related to the action of drawing, and <code>touchUp</code> is more about finalising a touch gesture and initiating the draw call. Up to you!</p>\n<p>Here's how I'd probably organise this, if it helps. Since every draw event creates a new bitmap, you don't need to keep a reference to a bitmap's <code>Canvas</code> - you'll have to create a new one anyway. I'd do the rest this way:</p>\n<pre><code>getCurrentBitmap() {\n    return the top of mBitmapsDrawn, or if empty, the background bitmap\n}\n\ndrawCurrentBitmap() {\n    calls getCurrentBitmap(), draws it to the Surface\n}\n\nundo() {\n    pops a bitmap off Drawn and pushes onto Undo, calls drawCurrentBitmap()\n}\n\nredo() {\n    pops a bitmap off Undo and pushes onto Drawn, calls drawCurrentBitmap()\n}\n\ndrawPath() {\n    call getCurrentBitmap to get a source image\n    create a new bitmap from that\n    create a canvas for it and draw to it\n    push the bitmap onto Drawn\n    clear Undo\n    call drawCurrentBitmap\n}\n</code></pre>\n<p>So everything's really about manipulating the drawn and undo stacks, and every time the drawn one changes, you call a function that displays the image on top of it. And having a <code>getCurrentBitmap</code> function puts that logic in one place, so everything that updates the stack doesn't also need to worry about updating <code>mBitmap</code> with the appropriate value.</p>\n<p>I'll also say, storing bitmaps like this works fine, but it's pretty inefficient - your memory usage could start to pile up quickly! Since you're doing drawing operations, you might want to think about storing representations of <em>those</em> instead, so you can get the &quot;current&quot; image by replaying all the past draw operations in order.</p>\n<p>You could get fancy and cache a bitmap of the result of all but the most recent operations, and replay the most recent ones on top of that to make redrawing faster - but you'd still have all those operations in your history, almost infinite undo. Just something to consider maybe!</p>\n"}],"owner":{"display_name":"user18837670"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":72987976,"answer_count":1,"score":0,"last_activity_date":1657928375,"creation_date":1657828915,"question_id":72986071,"body_markdown":"I have been stuck on this for a few days now and it&#39;s really beyond me why I can&#39;t get something so simple to work. I have a small drawing applicaiton, quite similiar to the Android FingerPaint demo, but I am saving each Bitmap after a drawing happens. This is because I plan to add a fill tool to my application later, and it&#39;s easier just to load the newly filled bitmap onto the canvas, instead of figuring out how to save the fill as a stroke to re-draw onto the canvas.\r\n\r\nThe drawing works great - the problem is, I can&#39;t undo and redo. I have tried with the code below, but nothing gets undone or redone. In theory, on `undo`, the mBitmapsDrawn should remove it&#39;s most recent Bitmap and push that onto the `mBitmapsUndone` stack, and then the method `loadSurfaceBitmap()` is called to draw the Bitmap that was saved before the one we just undid. \r\n\r\nFor `redo`, the `mBitmapsUndone` stack should pop the top Bitmap and push it back into `mBitmapsDrawn`, to then be re-loaded onto the Canvas by `loadSurfaceBitmap()`.\r\n\r\nWhen clicking redo/undo, no changes to the visual canvas happen, **but** the sizes of the data structures change (since I have log statemenets checking before and after, and they decrease/increase in size. So I think my problem is in the actual rendering of the latest bitmap in `mBitmapsDrawn` after a redo/undo happens.\r\n\r\n```\r\nprivate Stack&lt;Bitmap&gt; mBitmapsDrawn = new Stack&lt;&gt;();\r\nprivate Stack&lt;Bitmap&gt; mBitmapsUndone = new Stack&lt;&gt;();\r\n\r\nprotected void touchStart(float x, float y) {\r\n       \r\n        mBitmapsUndone.clear();\r\n\r\n        mPath.reset();\r\n        mPath.moveTo(x, y);\r\n        mX = x;\r\n        mY = y;\r\n        onDraw();\r\n    }\r\n\r\n    protected void touchMove(float x, float y) {\r\n        float dx = Math.abs(x - mX);\r\n        float dy = Math.abs(y - mY);\r\n        if (dx &gt;= TOUCH_TOLERANCE || dy &gt;= TOUCH_TOLERANCE) {\r\n            mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);\r\n            mX = x;\r\n            mY = y;\r\n            onDraw();\r\n        }\r\n    }\r\n\r\n    protected void touchUp() {\r\n        mPath.lineTo(mX, mY);\r\n\r\n        // Add path to list of paths to draw\r\n        onDraw();\r\n        mBitmapsDrawn.push(mBitmap);\r\n        loadSurfaceBitmap();\r\n\r\n        // Kill this so we don&#39;t double draw\r\n        mPath = new Path();\r\n\r\n        mPaint = new Paint(mPaint);\r\n\r\n        mIsDrawing = false;\r\n    }\r\n\r\n    protected void onDraw() {\r\n        if (mCanvas == null) {\r\n            return;\r\n        }\r\n\r\n        mCanvas.drawPath(mPath, mPaint);\r\n    }\r\n\r\n    protected void loadSurfaceBitmap() {\r\n        if (mBitmapsDrawn.size() != 0) { \r\n              mBitmap = mBitmapsDrawn.peek();\r\n        } else {\r\n              mBitmap = mBgBitmap;\r\n        }\r\n        Canvas surfaceCanvas = mSurfaceHolder.lockCanvas();\r\n        surfaceCanvas.drawBitmap(mBitmap, 0, 0, null);\r\n        mSurfaceHolder.unlockCanvasAndPost(surfaceCanvas);\r\n    }\r\n\r\n    protected void undo() {\r\n        int undoSize = mBitmapsUndone.size();\r\n        int drawnSize = mBitmapsDrawn.size();\r\n        if (drawnSize &gt; 0) {\r\n            Bitmap removedBitmap = mBitmapsDrawn.pop();\r\n            mBitmapsUndone.push(removedBitmap);\r\n            loadSurfaceBitmap();\r\n        }\r\n    }\r\n\r\nprotected void redo() {\r\n        int undoSize = mBitmapsUndone.size();\r\n        int pathsSize = mBitmapsDrawn.size();\r\n        if (undoSize &gt; 0) {\r\n            Bitmap mostRecentUndo = mBitmapsUndone.pop();\r\n            mBitmapsDrawn.push(mostRecentUndo);\r\n            loadSurfaceBitmap();\r\n        }\r\n    }\r\n```\r\n\r\nTLDR: I&#39;m having issues popping a stack / adding to an ArrayList when undo&#39;ing / redo&#39;ing in my application, where I should be changing the bitmap that is loaded on the surface, but it never happens.\r\n\r\n**Edit: Updated code per the answer, still no luck. Redo doesn&#39;t change the visual bitmap on the surface.**","title":"Undo / Redo Bitmap is not properly working","body":"<p>I have been stuck on this for a few days now and it's really beyond me why I can't get something so simple to work. I have a small drawing applicaiton, quite similiar to the Android FingerPaint demo, but I am saving each Bitmap after a drawing happens. This is because I plan to add a fill tool to my application later, and it's easier just to load the newly filled bitmap onto the canvas, instead of figuring out how to save the fill as a stroke to re-draw onto the canvas.</p>\n<p>The drawing works great - the problem is, I can't undo and redo. I have tried with the code below, but nothing gets undone or redone. In theory, on <code>undo</code>, the mBitmapsDrawn should remove it's most recent Bitmap and push that onto the <code>mBitmapsUndone</code> stack, and then the method <code>loadSurfaceBitmap()</code> is called to draw the Bitmap that was saved before the one we just undid.</p>\n<p>For <code>redo</code>, the <code>mBitmapsUndone</code> stack should pop the top Bitmap and push it back into <code>mBitmapsDrawn</code>, to then be re-loaded onto the Canvas by <code>loadSurfaceBitmap()</code>.</p>\n<p>When clicking redo/undo, no changes to the visual canvas happen, <strong>but</strong> the sizes of the data structures change (since I have log statemenets checking before and after, and they decrease/increase in size. So I think my problem is in the actual rendering of the latest bitmap in <code>mBitmapsDrawn</code> after a redo/undo happens.</p>\n<pre><code>private Stack&lt;Bitmap&gt; mBitmapsDrawn = new Stack&lt;&gt;();\nprivate Stack&lt;Bitmap&gt; mBitmapsUndone = new Stack&lt;&gt;();\n\nprotected void touchStart(float x, float y) {\n       \n        mBitmapsUndone.clear();\n\n        mPath.reset();\n        mPath.moveTo(x, y);\n        mX = x;\n        mY = y;\n        onDraw();\n    }\n\n    protected void touchMove(float x, float y) {\n        float dx = Math.abs(x - mX);\n        float dy = Math.abs(y - mY);\n        if (dx &gt;= TOUCH_TOLERANCE || dy &gt;= TOUCH_TOLERANCE) {\n            mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);\n            mX = x;\n            mY = y;\n            onDraw();\n        }\n    }\n\n    protected void touchUp() {\n        mPath.lineTo(mX, mY);\n\n        // Add path to list of paths to draw\n        onDraw();\n        mBitmapsDrawn.push(mBitmap);\n        loadSurfaceBitmap();\n\n        // Kill this so we don't double draw\n        mPath = new Path();\n\n        mPaint = new Paint(mPaint);\n\n        mIsDrawing = false;\n    }\n\n    protected void onDraw() {\n        if (mCanvas == null) {\n            return;\n        }\n\n        mCanvas.drawPath(mPath, mPaint);\n    }\n\n    protected void loadSurfaceBitmap() {\n        if (mBitmapsDrawn.size() != 0) { \n              mBitmap = mBitmapsDrawn.peek();\n        } else {\n              mBitmap = mBgBitmap;\n        }\n        Canvas surfaceCanvas = mSurfaceHolder.lockCanvas();\n        surfaceCanvas.drawBitmap(mBitmap, 0, 0, null);\n        mSurfaceHolder.unlockCanvasAndPost(surfaceCanvas);\n    }\n\n    protected void undo() {\n        int undoSize = mBitmapsUndone.size();\n        int drawnSize = mBitmapsDrawn.size();\n        if (drawnSize &gt; 0) {\n            Bitmap removedBitmap = mBitmapsDrawn.pop();\n            mBitmapsUndone.push(removedBitmap);\n            loadSurfaceBitmap();\n        }\n    }\n\nprotected void redo() {\n        int undoSize = mBitmapsUndone.size();\n        int pathsSize = mBitmapsDrawn.size();\n        if (undoSize &gt; 0) {\n            Bitmap mostRecentUndo = mBitmapsUndone.pop();\n            mBitmapsDrawn.push(mostRecentUndo);\n            loadSurfaceBitmap();\n        }\n    }\n</code></pre>\n<p>TLDR: I'm having issues popping a stack / adding to an ArrayList when undo'ing / redo'ing in my application, where I should be changing the bitmap that is loaded on the surface, but it never happens.</p>\n<p><strong>Edit: Updated code per the answer, still no luck. Redo doesn't change the visual bitmap on the surface.</strong></p>\n"},{"tags":["java","android-studio","kotlin","decompiler"],"comments":[{"owner":{"account_id":6153574,"reputation":11374,"user_id":4797289,"display_name":"Rasoul Miri"},"score":1,"creation_date":1540450411,"post_id":50895662,"comment_id":92871928,"body_markdown":"check this post https://stackoverflow.com/a/52983100/4797289","body":"check this post <a href=\"https://stackoverflow.com/a/52983100/4797289\">stackoverflow.com/a/52983100/4797289</a>"}],"answers":[{"tags":[],"owner":{"account_id":288238,"reputation":14443,"user_id":588532,"accept_rate":88,"display_name":"Uriel Frankel"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1529236552,"creation_date":1529236552,"answer_id":50896373,"question_id":50895662,"body_markdown":"Tools &gt;&gt; kotlin &gt;&gt; Show Kotlin bytecode &gt;&gt; Decompile","title":"Converting Kotlin to Java","body":"<p>Tools >> kotlin >> Show Kotlin bytecode >> Decompile</p>\n"},{"tags":[],"owner":{"account_id":3991579,"reputation":19586,"user_id":3290339,"display_name":"Onik"},"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1554407308,"creation_date":1537664721,"answer_id":52462123,"question_id":50895662,"body_markdown":"Currently `Tools &gt;&gt; Kotlin&gt;&gt; Decompile Kotlin to Java` is enabled only for compiled _Kotlin_ classes (`.class`, not `.kt` extension) located at `app/build/tmp/kotlin-classes/` **after a successful build**.\r\n\r\nA note to the [@Uriel Frankel][1]&#39;s workaround:\r\n\r\n*If `Tools &gt;&gt; Kotlin &gt;&gt; Show Kotlin Bytecode &gt;&gt; Decompile button` is disabled (or not shown) the `Java Bytecode Decompiler` plugin should be installed: `Preferences &gt;&gt; Plugins &gt;&gt; search for `Java Bytecode Decompiler` &gt;&gt; check the plugin &amp; press OK*.\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/588532/uriel-frankel","title":"Converting Kotlin to Java","body":"<p>Currently <code>Tools &gt;&gt; Kotlin&gt;&gt; Decompile Kotlin to Java</code> is enabled only for compiled <em>Kotlin</em> classes (<code>.class</code>, not <code>.kt</code> extension) located at <code>app/build/tmp/kotlin-classes/</code> <strong>after a successful build</strong>.</p>\n\n<p>A note to the <a href=\"https://stackoverflow.com/users/588532/uriel-frankel\">@Uriel Frankel</a>'s workaround:</p>\n\n<p><em>If <code>Tools &gt;&gt; Kotlin &gt;&gt; Show Kotlin Bytecode &gt;&gt; Decompile button</code> is disabled (or not shown) the <code>Java Bytecode Decompiler</code> plugin should be installed: <code>Preferences &gt;&gt; Plugins &gt;&gt; search for</code>Java Bytecode Decompiler` >> check the plugin &amp; press OK</em>.</p>\n"},{"tags":[],"owner":{"account_id":5442381,"reputation":16756,"user_id":4409113,"accept_rate":88,"display_name":""},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1537875091,"creation_date":1537874365,"answer_id":52496951,"question_id":50895662,"body_markdown":"Seems like a bug.\r\n\r\n&gt; `Tools -&gt; Kotlin -&gt; Decompile Kotlin to Java`\r\n\r\nWas actually disabled for me too **even after a successful build** (*In my side Android Studio v3.2*) so, I went through this:\r\n\r\nClick on the Kotlin (*Compiled class*):\r\n\r\nSelected `Tools -&gt; Kotlin -&gt; Show Kotlin Bytecode`\r\n\r\nThen kotlin bytecode window appeared:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nMade JVM 8 Target as selected and then decompile gave me the java class.\r\n\r\n**Note** that this happened when `Java Bytecode Decompiler` plugin was enabled on the Android Studio.\r\n\r\n**Update**:\r\n\r\nThis however might have some issues even after converting to java and perhaps, we should wait for the newest releases.\r\n\r\n  [1]: https://i.stack.imgur.com/YUEKV.png","title":"Converting Kotlin to Java","body":"<p>Seems like a bug.</p>\n\n<blockquote>\n  <p><code>Tools -&gt; Kotlin -&gt; Decompile Kotlin to Java</code></p>\n</blockquote>\n\n<p>Was actually disabled for me too <strong>even after a successful build</strong> (<em>In my side Android Studio v3.2</em>) so, I went through this:</p>\n\n<p>Click on the Kotlin (<em>Compiled class</em>):</p>\n\n<p>Selected <code>Tools -&gt; Kotlin -&gt; Show Kotlin Bytecode</code></p>\n\n<p>Then kotlin bytecode window appeared:</p>\n\n<p><a href=\"https://i.stack.imgur.com/YUEKV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YUEKV.png\" alt=\"enter image description here\"></a></p>\n\n<p>Made JVM 8 Target as selected and then decompile gave me the java class.</p>\n\n<p><strong>Note</strong> that this happened when <code>Java Bytecode Decompiler</code> plugin was enabled on the Android Studio.</p>\n\n<p><strong>Update</strong>:</p>\n\n<p>This however might have some issues even after converting to java and perhaps, we should wait for the newest releases.</p>\n"},{"tags":[],"owner":{"account_id":1911422,"reputation":4031,"user_id":1725145,"accept_rate":100,"display_name":"user1725145"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1562676763,"creation_date":1562673051,"answer_id":56951951,"question_id":50895662,"body_markdown":"I followed Onik&#39;s answer above.\r\n\r\nThe Java Bytecode Decompiler was automatically bundled.\r\nI opened the .class file in Android Studio, and selected  *Tools &gt;&gt; Kotlin&gt;&gt; Decompile Kotlin to Java.*\r\n\r\nAfter waiting several minutes, Android Studio told me\r\n\r\n&gt; The file is too large: 50.78 MB.  Showing a read-only preview of the first 2.56 MB\r\n\r\nand it opened a file MyKotlinClass.decompiled.java, most of which is unintelligible to me.\r\n\r\nMyKotlinClass is approximately **300 lines** long.  At this point, manually re-writing the file as Java code is looking like the better option.","title":"Converting Kotlin to Java","body":"<p>I followed Onik's answer above.</p>\n\n<p>The Java Bytecode Decompiler was automatically bundled.\nI opened the .class file in Android Studio, and selected  <em>Tools >> Kotlin>> Decompile Kotlin to Java.</em></p>\n\n<p>After waiting several minutes, Android Studio told me</p>\n\n<blockquote>\n  <p>The file is too large: 50.78 MB.  Showing a read-only preview of the first 2.56 MB</p>\n</blockquote>\n\n<p>and it opened a file MyKotlinClass.decompiled.java, most of which is unintelligible to me.</p>\n\n<p>MyKotlinClass is approximately <strong>300 lines</strong> long.  At this point, manually re-writing the file as Java code is looking like the better option.</p>\n"}],"owner":{"account_id":13478896,"reputation":278,"user_id":9724864,"display_name":"Saiteja Kolan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30434,"favorite_count":0,"down_vote_count":1,"up_vote_count":22,"answer_count":4,"score":21,"last_activity_date":1657928147,"creation_date":1529230377,"question_id":50895662,"body_markdown":"Can anyone help me about converting _Kotlin_ code in _Android Studio_ to _Java_?  \r\n\r\nI went through the below process:\r\n\r\n_Tools &gt;&gt; Kotlin&gt;&gt; Decompile Kotlin to Java_\r\n\r\nBut the &quot;Kotlin to Java&quot; option is disabled. What should I do?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/A7xxK.jpg","title":"Converting Kotlin to Java","body":"<p>Can anyone help me about converting <em>Kotlin</em> code in <em>Android Studio</em> to <em>Java</em>?  </p>\n\n<p>I went through the below process:</p>\n\n<p><em>Tools >> Kotlin>> Decompile Kotlin to Java</em></p>\n\n<p>But the \"Kotlin to Java\" option is disabled. What should I do?</p>\n\n<p><a href=\"https://i.stack.imgur.com/A7xxK.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/A7xxK.jpg\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","html","css","textarea","itext7"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1559584601,"post_id":56397796,"comment_id":99459211,"body_markdown":"You might want to tell us how you transform the html to pdf using java. There are multiple java solutions for doing that.","body":"You might want to tell us how you transform the html to pdf using java. There are multiple java solutions for doing that."},{"owner":{"account_id":12890715,"reputation":1306,"user_id":9322814,"accept_rate":50,"display_name":"Juke"},"score":0,"creation_date":1559587344,"post_id":56397796,"comment_id":99460223,"body_markdown":"@mkl I jhave added java code to the question","body":"@mkl I jhave added java code to the question"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1559647972,"post_id":56397796,"comment_id":99479394,"body_markdown":"It looks like the PDF is generated (or retrieve from yet elsewhere) by `getReportPdfContentWithReportId`. Thus, can you show the code that actually creates the PDF as this code does not break that line?","body":"It looks like the PDF is generated (or retrieve from yet elsewhere) by <code>getReportPdfContentWithReportId</code>. Thus, can you show the code that actually creates the PDF as this code does not break that line?"},{"owner":{"account_id":230874,"reputation":770,"user_id":494739,"display_name":"kunambi"},"score":0,"creation_date":1559673482,"post_id":56397796,"comment_id":99492388,"body_markdown":"try setting the CSS rule: `TABLE {table-layout: fixed; max-width: 100%;}`","body":"try setting the CSS rule: <code>TABLE {table-layout: fixed; max-width: 100%;}</code>"},{"owner":{"account_id":12890715,"reputation":1306,"user_id":9322814,"accept_rate":50,"display_name":"Juke"},"score":0,"creation_date":1559674122,"post_id":56397796,"comment_id":99492663,"body_markdown":"I have tried it no solution","body":"I have tried it no solution"},{"owner":{"account_id":12890715,"reputation":1306,"user_id":9322814,"accept_rate":50,"display_name":"Juke"},"score":0,"creation_date":1567777113,"post_id":56397796,"comment_id":102076340,"body_markdown":"is there any solution for this ?","body":"is there any solution for this ?"}],"answers":[{"tags":[],"owner":{"account_id":12151305,"reputation":186,"user_id":8871465,"display_name":"Beckett O&#39;Brien"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1559587798,"creation_date":1559587798,"answer_id":56432992,"question_id":56397796,"body_markdown":"You can detect whenever the text reaches a new line in the input box, and insert &#39;\\n&#39; to force line breaks so that when you download an image, it should have the line break hard-coded. Hope this helps!","title":"Continuous text in text-area cuts the PDF overflowing the text when using Itext 7.1.7","body":"<p>You can detect whenever the text reaches a new line in the input box, and insert '\\n' to force line breaks so that when you download an image, it should have the line break hard-coded. Hope this helps!</p>\n"},{"tags":[],"owner":{"account_id":2703230,"reputation":12011,"user_id":2333458,"accept_rate":75,"display_name":"Alexey Subach"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1567926658,"creation_date":1567926658,"answer_id":57839863,"question_id":56397796,"body_markdown":"pdfHTML allows you to either convert the form-related elements (inputs, text areas) directly into the plain PDF content, or create a PDF with AcroForm (so that those elements are editable, as they are supposed to be in HTML).\r\n\r\nTo enable that behavior, you should use `setCreateAcroForm(true)` in `ConverterProperties` that you pass to `HtmlConverter`.\r\n\r\nIf you don&#39;t want to have those fields editable, you can flatten those fields as a second step after you have converted the HTML into PDF.\r\n\r\nHaving that said, the behavior you describe looks like a bug in iText. But the mode of creating the AcroForm and flattening is implemented in a slightly different way and it looks like the textarea would be converted as expected in your case. You haven&#39;t attached the whole example so it&#39;s hard to verify for sure, but for the small snippet you attached everything is fine. Here is the code you can use:\r\n\r\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n    HtmlConverter.convertToPdf(new FileInputStream(&quot;C:\\\\file.html&quot;), baos,\r\n            new ConverterProperties().setCreateAcroForm(true));\r\n\r\n    PdfDocument document = new PdfDocument(new PdfReader(new ByteArrayInputStream(baos.toByteArray())), \r\n            new PdfWriter(new File(&quot;C:\\\\out.pdf&quot;)));\r\n    PdfAcroForm acroForm = PdfAcroForm.getAcroForm(document, false);\r\n    acroForm.flattenFields();\r\n    document.close();\r\n","title":"Continuous text in text-area cuts the PDF overflowing the text when using Itext 7.1.7","body":"<p>pdfHTML allows you to either convert the form-related elements (inputs, text areas) directly into the plain PDF content, or create a PDF with AcroForm (so that those elements are editable, as they are supposed to be in HTML).</p>\n\n<p>To enable that behavior, you should use <code>setCreateAcroForm(true)</code> in <code>ConverterProperties</code> that you pass to <code>HtmlConverter</code>.</p>\n\n<p>If you don't want to have those fields editable, you can flatten those fields as a second step after you have converted the HTML into PDF.</p>\n\n<p>Having that said, the behavior you describe looks like a bug in iText. But the mode of creating the AcroForm and flattening is implemented in a slightly different way and it looks like the textarea would be converted as expected in your case. You haven't attached the whole example so it's hard to verify for sure, but for the small snippet you attached everything is fine. Here is the code you can use:</p>\n\n<pre><code>ByteArrayOutputStream baos = new ByteArrayOutputStream();\nHtmlConverter.convertToPdf(new FileInputStream(\"C:\\\\file.html\"), baos,\n        new ConverterProperties().setCreateAcroForm(true));\n\nPdfDocument document = new PdfDocument(new PdfReader(new ByteArrayInputStream(baos.toByteArray())), \n        new PdfWriter(new File(\"C:\\\\out.pdf\")));\nPdfAcroForm acroForm = PdfAcroForm.getAcroForm(document, false);\nacroForm.flattenFields();\ndocument.close();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16095679,"reputation":670,"user_id":11617912,"display_name":"Prajyot Tote"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1568082137,"creation_date":1568082137,"answer_id":57863228,"question_id":56397796,"body_markdown":"I guess adding the following css to your content element (i.e `.edit`, `.iedit2`) should sort the issue.\r\n  \r\n\r\n    overflow-wrap: break-word;\r\n    word-wrap: break-word;\r\n    word-break: break-word;\r\n\r\nLet me know if that works :)\r\n\r\nAlso for a bit better looking code, you can add the following ;)\r\n\r\n    -ms-hyphens: auto;\r\n    -moz-hyphens: auto;\r\n    -webkit-hyphens: auto;\r\n    hyphens: auto;\r\n\r\nThese will add &quot;-&quot; to break word :)","title":"Continuous text in text-area cuts the PDF overflowing the text when using Itext 7.1.7","body":"<p>I guess adding the following css to your content element (i.e <code>.edit</code>, <code>.iedit2</code>) should sort the issue.</p>\n\n<pre><code>overflow-wrap: break-word;\nword-wrap: break-word;\nword-break: break-word;\n</code></pre>\n\n<p>Let me know if that works :)</p>\n\n<p>Also for a bit better looking code, you can add the following ;)</p>\n\n<pre><code>-ms-hyphens: auto;\n-moz-hyphens: auto;\n-webkit-hyphens: auto;\nhyphens: auto;\n</code></pre>\n\n<p>These will add \"-\" to break word :)</p>\n"},{"tags":[],"owner":{"account_id":15423770,"reputation":1,"user_id":11127104,"display_name":"daynok"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657927837,"creation_date":1657824052,"answer_id":72985278,"question_id":56397796,"body_markdown":"Adding `white-space: pre-wrap;` fixes this issue for me. ","title":"Continuous text in text-area cuts the PDF overflowing the text when using Itext 7.1.7","body":"<p>Adding <code>white-space: pre-wrap;</code> fixes this issue for me.</p>\n"}],"owner":{"account_id":12890715,"reputation":1306,"user_id":9322814,"accept_rate":50,"display_name":"Juke"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2955,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":57839863,"answer_count":4,"score":11,"last_activity_date":1657927837,"creation_date":1559316148,"question_id":56397796,"body_markdown":"I see there are lot many questions related to the same scenario this one is little different couldn&#39;t figure out the solution. I have a &lt;textarea&gt; in a tabl in a &lt;td&gt; cell. When I give the continous text like &quot;cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc&quot; Its overflowing the text when I download the print file and its normal when I give normal text with breaks.Here is my code\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-css --&gt;\r\n\r\n    .generaltable {\r\n    \tbackground-color : #5C7FBF;\r\n    \tborder:thin;\r\n    \twidth : 100%;\r\n    \tfont-family: Arial, Helvetica, sans-serif;\r\n    \tfont-size: 14px;\r\n    \t}\r\n      \r\n      \r\n    \t.column {\r\n    \tbackground-color : #DEEDFF;\r\n    \tfont-weight : bold;\r\n    \tpadding-bottom : 1px;\r\n    \tpadding-left : 1px;\r\n    \tpadding-right : 1px;\r\n    \tpadding-top : 1px;\r\n    \ttext-align : center;\r\n    \tfont-family: Arial, Helvetica, sans-serif;\r\n    \tfont-size: 14px;\r\n    \tborder: none;\r\n    \t}\r\n      \r\n     .edit {\r\n    \tbackground-color : #DEEDFF;\r\n    \tborder-width: 1px;\r\n    \tborder-style:solid;\r\n    \tborder-color:#DEEDFF;\r\n    \tborder: 1px solid #DEEDFF;\r\n    \tcolor: black;\r\n    \ttext-align : left;\r\n    \tfont-weight : bold;\r\n    \tfont-family: Arial, Helvetica, sans-serif;\r\n    \tfont-size: 14px;\r\n    \tword-break: break-all;\r\n    \t}\r\n      \r\n      .iedit2 {\r\n    \tbackground-color : white;\r\n    \ttext-align: left;\r\n    \tcolor: black;\r\n    \tfont-family: Arial, Helvetica, sans-serif;\r\n    \tfont-weight: bold;\r\n    \tborder-top: 1px solid #999999;\r\n    \tborder-right: 1px solid #333333;\r\n    \tborder-bottom: 1px solid #333333;\r\n    \tborder-left: 1px solid #999999;\r\n    \tword-break: break-all;\r\n    \t}\r\n      \r\n      \r\n      \r\n      \r\n      \r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;table border=&quot;1&quot; width=&quot;100%&quot; align=&quot;center&quot; cellpadding=&quot;2&quot; cellspacing=&quot;1&quot;  class=&quot;generaltable&quot;&gt;  &lt;tbody&gt;&lt;tr id=&quot;Row35494#0&quot;&gt;\r\n        &lt;th id=&quot;04&quot; class=&quot;column&quot; width=&quot;39%&quot;&gt;&lt;a href=&quot;javascript:alert(&#39;Self Explanatory&#39;)&quot;&gt;Brief                 description of the issue *&lt;/a&gt;&lt;/th&gt;\r\n            &lt;td id=&quot;1 04&quot; width=&quot;39%&quot; class=&quot;edit&quot;&gt;\r\n                &lt;textarea id=&quot;269494_0&quot; class=&quot;iedit2&quot; cols=&quot;35&quot; rows=&quot;5&quot; wrap=&quot;virtual&quot; maxlength=&quot;4000&quot;                   name=&quot;fiy&quot;&gt;ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss\r\n                 &lt;/textarea&gt;\r\n            &lt;/td&gt;\r\n          &lt;/tr&gt;\r\n      &lt;/tbody&gt;\r\n     &lt;/table&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nplease find the pictures it for clear overview [![This is the entry][1]][1]\r\n\r\nI have a click like Go once I do it it downloads the entire document here using JAVA code and the code part is working Good but the issue is with itext 7.1.7. this is happening and I have changed it to flying saucer its working good but causing other issues. I want to stay with Itext 7.1.7 and solve this continuous fix.\r\n \r\n[![This is the pdf][2]][2] \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DLJxB.png\r\n  [2]: https://i.stack.imgur.com/jVuTD.png\r\n","title":"Continuous text in text-area cuts the PDF overflowing the text when using Itext 7.1.7","body":"<p>I see there are lot many questions related to the same scenario this one is little different couldn't figure out the solution. I have a  in a tabl in a  cell. When I give the continous text like \"cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc\" Its overflowing the text when I download the print file and its normal when I give normal text with breaks.Here is my code</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.generaltable {\r\n\tbackground-color : #5C7FBF;\r\n\tborder:thin;\r\n\twidth : 100%;\r\n\tfont-family: Arial, Helvetica, sans-serif;\r\n\tfont-size: 14px;\r\n\t}\r\n  \r\n  \r\n\t.column {\r\n\tbackground-color : #DEEDFF;\r\n\tfont-weight : bold;\r\n\tpadding-bottom : 1px;\r\n\tpadding-left : 1px;\r\n\tpadding-right : 1px;\r\n\tpadding-top : 1px;\r\n\ttext-align : center;\r\n\tfont-family: Arial, Helvetica, sans-serif;\r\n\tfont-size: 14px;\r\n\tborder: none;\r\n\t}\r\n  \r\n .edit {\r\n\tbackground-color : #DEEDFF;\r\n\tborder-width: 1px;\r\n\tborder-style:solid;\r\n\tborder-color:#DEEDFF;\r\n\tborder: 1px solid #DEEDFF;\r\n\tcolor: black;\r\n\ttext-align : left;\r\n\tfont-weight : bold;\r\n\tfont-family: Arial, Helvetica, sans-serif;\r\n\tfont-size: 14px;\r\n\tword-break: break-all;\r\n\t}\r\n  \r\n  .iedit2 {\r\n\tbackground-color : white;\r\n\ttext-align: left;\r\n\tcolor: black;\r\n\tfont-family: Arial, Helvetica, sans-serif;\r\n\tfont-weight: bold;\r\n\tborder-top: 1px solid #999999;\r\n\tborder-right: 1px solid #333333;\r\n\tborder-bottom: 1px solid #333333;\r\n\tborder-left: 1px solid #999999;\r\n\tword-break: break-all;\r\n\t}\r\n  \r\n  \r\n  \r\n  \r\n  </code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;table border=\"1\" width=\"100%\" align=\"center\" cellpadding=\"2\" cellspacing=\"1\"  class=\"generaltable\"&gt;  &lt;tbody&gt;&lt;tr id=\"Row35494#0\"&gt;\r\n    &lt;th id=\"04\" class=\"column\" width=\"39%\"&gt;&lt;a href=\"javascript:alert('Self Explanatory')\"&gt;Brief                 description of the issue *&lt;/a&gt;&lt;/th&gt;\r\n        &lt;td id=\"1 04\" width=\"39%\" class=\"edit\"&gt;\r\n            &lt;textarea id=\"269494_0\" class=\"iedit2\" cols=\"35\" rows=\"5\" wrap=\"virtual\" maxlength=\"4000\"                   name=\"fiy\"&gt;ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss\r\n             &lt;/textarea&gt;\r\n        &lt;/td&gt;\r\n      &lt;/tr&gt;\r\n  &lt;/tbody&gt;\r\n &lt;/table&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>please find the pictures it for clear overview <a href=\"https://i.stack.imgur.com/DLJxB.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/DLJxB.png\" alt=\"This is the entry\"></a></p>\n\n<p>I have a click like Go once I do it it downloads the entire document here using JAVA code and the code part is working Good but the issue is with itext 7.1.7. this is happening and I have changed it to flying saucer its working good but causing other issues. I want to stay with Itext 7.1.7 and solve this continuous fix.</p>\n\n<p><a href=\"https://i.stack.imgur.com/jVuTD.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/jVuTD.png\" alt=\"This is the pdf\"></a> </p>\n"},{"tags":["java","vue.js","button","filter"],"comments":[{"owner":{"account_id":431456,"reputation":2176,"user_id":815507,"display_name":"Kunukn"},"score":0,"creation_date":1622189168,"post_id":67733635,"comment_id":119725541,"body_markdown":"have you seen this guide? https://stackoverflow.com/help/minimal-reproducible-example if code is visible here. Then it might be easier to help and communicate about the code.","body":"have you seen this guide? <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a> if code is visible here. Then it might be easier to help and communicate about the code."},{"owner":{"account_id":431456,"reputation":2176,"user_id":815507,"display_name":"Kunukn"},"score":0,"creation_date":1622189682,"post_id":67733635,"comment_id":119725775,"body_markdown":"the fiddle didn&#39;t work for me. I see this `&lt;a class=&#39;gotoLine&#39; href=&#39;#423:26&#39;&gt;423:26&lt;/a&gt; Uncaught TypeError: Cannot read property &#39;getElementsByClassName&#39; of null&quot;` I see code mix between Vue, jQuery and VanillaJS dom manipulation. I recommend to refactor everyting to Vue only.","body":"the fiddle didn&#39;t work for me. I see this <code>&lt;a class=&#39;gotoLine&#39; href=&#39;#423:26&#39;&gt;423:26&lt;&#47;a&gt; Uncaught TypeError: Cannot read property &#39;getElementsByClassName&#39; of null&quot;</code> I see code mix between Vue, jQuery and VanillaJS dom manipulation. I recommend to refactor everyting to Vue only."}],"answers":[{"tags":[],"owner":{"account_id":146668,"reputation":7432,"user_id":2065080,"accept_rate":33,"display_name":"Andrey Popov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1657927639,"creation_date":1622195484,"answer_id":67736661,"question_id":67733635,"body_markdown":"There are several issues in your code, that prevent you from getting the wanted result:\r\n\r\n- You mix Vue methods with regular window methods. The `filterSelection` method is defined **twice** - first as a part of Vue `methods` definition, and then again afterwards. What you will notice is that just the second one gets called.\r\n\r\n- You use regular js functions to modify the DOM. That is very contrary to what VueJS is doing. Instead of adding or removing classes with custom made methods, you could use [the proper way Vue does that](https://v2.vuejs.org/v2/guide/class-and-style.html): `class=&quot;{ show: propertyFromVue }&quot;`. This would toggle the `show` class on and off, based on the `propertyFromVue` boolean value.\r\n\r\n- The list of toppings is defined once and just displayed. You need a **second** variable that holds only the &quot;filtered&quot; items. This could be done through a computed property:\r\n\r\n  ```javascript\r\n    computed: {\r\n      filteredToppings: () =&gt; this.toopings\r\n        .filter((topping) =&gt; !!topping.vendors\r\n          .find((vendor) =&gt; vendor.merchang === this.filterSelectionText)\r\n        );\r\n    }\r\n  ````\r\n   \r\n  This would **only** work if your VueJS `filterSelection` method is called and `filterSelectionText` property is updated.\r\n\r\n  Then you can use this `filteredToppings` to display the list of filtered items :) Good luck!\r\n  ","title":"Vue onclick filter","body":"<p>There are several issues in your code, that prevent you from getting the wanted result:</p>\n<ul>\n<li><p>You mix Vue methods with regular window methods. The <code>filterSelection</code> method is defined <strong>twice</strong> - first as a part of Vue <code>methods</code> definition, and then again afterwards. What you will notice is that just the second one gets called.</p>\n</li>\n<li><p>You use regular js functions to modify the DOM. That is very contrary to what VueJS is doing. Instead of adding or removing classes with custom made methods, you could use <a href=\"https://v2.vuejs.org/v2/guide/class-and-style.html\" rel=\"nofollow noreferrer\">the proper way Vue does that</a>: <code>class=&quot;{ show: propertyFromVue }&quot;</code>. This would toggle the <code>show</code> class on and off, based on the <code>propertyFromVue</code> boolean value.</p>\n</li>\n<li><p>The list of toppings is defined once and just displayed. You need a <strong>second</strong> variable that holds only the &quot;filtered&quot; items. This could be done through a computed property:</p>\n<pre class=\"lang-js prettyprint-override\"><code>  computed: {\n    filteredToppings: () =&gt; this.toopings\n      .filter((topping) =&gt; !!topping.vendors\n        .find((vendor) =&gt; vendor.merchang === this.filterSelectionText)\n      );\n  }\n</code></pre>\n<p>This would <strong>only</strong> work if your VueJS <code>filterSelection</code> method is called and <code>filterSelectionText</code> property is updated.</p>\n<p>Then you can use this <code>filteredToppings</code> to display the list of filtered items :) Good luck!</p>\n</li>\n</ul>\n"}],"owner":{"display_name":"user15167587"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":244,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1657927639,"creation_date":1622181837,"question_id":67733635,"body_markdown":"Dear Stack Overflowuser,\r\n\r\nUnder this [fiddle](http://jsfiddle.net/EskoNielson/pd19o8we/261/) is a code, with which a onclick filter in Vue JS was tried to built. However, the approach does not function yet.\r\n```\r\n```\r\n\r\nThe JS is in lines 118 - 120. Code obtained from [fiddle](https://jsfiddle.net/EskoNielson/e0Luo7v3/).\r\n\r\nCode is only in the jsfiddle, since posting the code is due to Stack Overflow functions not possible.\r\nThanks in advance for any help that makes the onclick filter work in the jsfiddle.\r\n\r\nDesired result is a click function showing only the products with a merchant, which is the name of the button.\r\n\r\nYours sincerely\r\n\r\nEsko Nielson","title":"Vue onclick filter","body":"<p>Dear Stack Overflowuser,</p>\n<p>Under this <a href=\"http://jsfiddle.net/EskoNielson/pd19o8we/261/\" rel=\"nofollow noreferrer\">fiddle</a> is a code, with which a onclick filter in Vue JS was tried to built. However, the approach does not function yet.</p>\n<pre><code></code></pre>\n<p>The JS is in lines 118 - 120. Code obtained from <a href=\"https://jsfiddle.net/EskoNielson/e0Luo7v3/\" rel=\"nofollow noreferrer\">fiddle</a>.</p>\n<p>Code is only in the jsfiddle, since posting the code is due to Stack Overflow functions not possible.\nThanks in advance for any help that makes the onclick filter work in the jsfiddle.</p>\n<p>Desired result is a click function showing only the products with a merchant, which is the name of the button.</p>\n<p>Yours sincerely</p>\n<p>Esko Nielson</p>\n"},{"tags":["java","jar","liquibase"],"answers":[{"tags":[],"owner":{"account_id":24666064,"reputation":365,"user_id":18561714,"display_name":"tabbyfoo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657926371,"creation_date":1657926371,"answer_id":73000340,"question_id":72978716,"body_markdown":"From https://www.geeksforgeeks.org/how-to-set-classpath-when-class-files-are-in-jar-file-in-java/\r\n\r\n&gt; The below specific command is used to set the classpath for any jar files separated by semi-columns.\r\n```\r\nC:&gt; set CLASSPATH=classpath1;classpath2...\r\n1. C:&gt; set CLASSPATH=.;C:\\dependency\\framework.jar\r\n\r\n2. //Add multiple jars\r\n$ set CLASSPATH=C:\\dependency\\framework.jar;C:\\location\\otherFramework.jar  \r\n\r\n3. //* means all the files with .jar extension\r\n$ set CLASSPATH=C:\\dependency\\framework.jar;C:\\location\\*.jar","title":"classpath of a directory inside jar","body":"<p>From <a href=\"https://www.geeksforgeeks.org/how-to-set-classpath-when-class-files-are-in-jar-file-in-java/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/how-to-set-classpath-when-class-files-are-in-jar-file-in-java/</a></p>\n<blockquote>\n<p>The below specific command is used to set the classpath for any jar files separated by semi-columns.</p>\n</blockquote>\n<pre><code>C:&gt; set CLASSPATH=classpath1;classpath2...\n1. C:&gt; set CLASSPATH=.;C:\\dependency\\framework.jar\n\n2. //Add multiple jars\n$ set CLASSPATH=C:\\dependency\\framework.jar;C:\\location\\otherFramework.jar  \n\n3. //* means all the files with .jar extension\n$ set CLASSPATH=C:\\dependency\\framework.jar;C:\\location\\*.jar\n</code></pre>\n"}],"owner":{"account_id":7954660,"reputation":35,"user_id":6004413,"display_name":"Ramkrishna Maheta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1657926371,"creation_date":1657792940,"question_id":72978716,"body_markdown":"In liquibase docker command line parameters , Is it possible to give classpath of a directory inside jar ?\r\n\r\nlike if I have to give the location of BOOT-INF/classes/changelog-1.xml inside application.jar \r\ncan I give \r\n--classpath=application.jar/BOOT-INF/classes\r\n","title":"classpath of a directory inside jar","body":"<p>In liquibase docker command line parameters , Is it possible to give classpath of a directory inside jar ?</p>\n<p>like if I have to give the location of BOOT-INF/classes/changelog-1.xml inside application.jar\ncan I give\n--classpath=application.jar/BOOT-INF/classes</p>\n"},{"tags":["java","directory","operating-system","symlink"],"answers":[{"tags":[],"owner":{"account_id":10014746,"reputation":2848,"user_id":7406460,"display_name":"Ahmed Hammad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1657925663,"creation_date":1657925663,"answer_id":73000287,"question_id":72999500,"body_markdown":"Figured out the issue was that I&#39;m using `.toRealPath()` only on the `symlinkPath`. Modifying the assertion to:\r\n\r\n```\r\nassertThat(targetPath.toRealPath()).isEqualTo(symlinkPath.toRealPath());\r\n```\r\n\r\nsolved the problem.","title":"Symlink path always starts from /private/","body":"<p>Figured out the issue was that I'm using <code>.toRealPath()</code> only on the <code>symlinkPath</code>. Modifying the assertion to:</p>\n<pre><code>assertThat(targetPath.toRealPath()).isEqualTo(symlinkPath.toRealPath());\n</code></pre>\n<p>solved the problem.</p>\n"}],"owner":{"account_id":10014746,"reputation":2848,"user_id":7406460,"display_name":"Ahmed Hammad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73000287,"answer_count":1,"score":0,"last_activity_date":1657925663,"creation_date":1657918423,"question_id":72999500,"body_markdown":"I wrote a function that creates a symlink to a specific directory inside a given parent directory. It does not create the link directly, but rather create a tmp link, and then move that tmp link to the desired path, as move operation is atomic while overwrite is not.\r\n\r\n```\r\npublic static void updateMySymlink(final Path parentDir, final String targetDirName) {\r\n    final Path targetPath = parentDir.resolve(targetDirName);\r\n    final Path tempPath = parentDir.resolve(&quot;tmp&quot;);\r\n    final Path symlinkPath = parentDir.resolve(&quot;mySymlink&quot;);\r\n    Files.createSymbolicLink(tempPath, targetPath);\r\n    Files.move(tempPath, symlinkPath, ATOMIC_MOVE);\r\n}\r\n```\r\n\r\nWhen I try to unit-test this, I wrote a test like:\r\n\r\n```\r\n@Test\r\npublic void testSymlinkCreation() {\r\n    final Path targetPath = localRepoPath.resolve(&quot;target&quot;);\r\n    final Path symlinkPath = localRepoPath.resolve(&quot;mySymlink&quot;);\r\n    FileUtils.forceMkdir(targetPath.toFile());\r\n    updateMySymlink(localRepoPath, &quot;testCommitId1&quot;); // static method\r\n    assertThat(targetPath).isEqualTo(symlinkPath.toRealPath());\r\n}\r\n```\r\n\r\nThis test fails with the message:\r\n```\r\norg.junit.ComparisonFailure: expected:&lt;/[private/]tmp/testDirToCreate-...&gt; but was:&lt;/[]tmp/testDirToCreate-...&gt;\r\n```\r\n\r\nNo matter how the input paths changes, this `private/` stays the same. I tried asserting for the absolutePaths or for the paths after normalization but it still failed for the same error.\r\n \r\n### My question is, where is this `private/` is coming from?","title":"Symlink path always starts from /private/","body":"<p>I wrote a function that creates a symlink to a specific directory inside a given parent directory. It does not create the link directly, but rather create a tmp link, and then move that tmp link to the desired path, as move operation is atomic while overwrite is not.</p>\n<pre><code>public static void updateMySymlink(final Path parentDir, final String targetDirName) {\n    final Path targetPath = parentDir.resolve(targetDirName);\n    final Path tempPath = parentDir.resolve(&quot;tmp&quot;);\n    final Path symlinkPath = parentDir.resolve(&quot;mySymlink&quot;);\n    Files.createSymbolicLink(tempPath, targetPath);\n    Files.move(tempPath, symlinkPath, ATOMIC_MOVE);\n}\n</code></pre>\n<p>When I try to unit-test this, I wrote a test like:</p>\n<pre><code>@Test\npublic void testSymlinkCreation() {\n    final Path targetPath = localRepoPath.resolve(&quot;target&quot;);\n    final Path symlinkPath = localRepoPath.resolve(&quot;mySymlink&quot;);\n    FileUtils.forceMkdir(targetPath.toFile());\n    updateMySymlink(localRepoPath, &quot;testCommitId1&quot;); // static method\n    assertThat(targetPath).isEqualTo(symlinkPath.toRealPath());\n}\n</code></pre>\n<p>This test fails with the message:</p>\n<pre><code>org.junit.ComparisonFailure: expected:&lt;/[private/]tmp/testDirToCreate-...&gt; but was:&lt;/[]tmp/testDirToCreate-...&gt;\n</code></pre>\n<p>No matter how the input paths changes, this <code>private/</code> stays the same. I tried asserting for the absolutePaths or for the paths after normalization but it still failed for the same error.</p>\n<h3>My question is, where is this <code>private/</code> is coming from?</h3>\n"},{"tags":["java","arrays","java.util.scanner"],"answers":[{"tags":[],"owner":{"account_id":8557798,"reputation":56,"user_id":6412699,"display_name":"dlo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657923867,"creation_date":1657920439,"answer_id":72999753,"question_id":72999711,"body_markdown":"Note, you&#39;re going through `playerJersey[i]` in your first two for loops, which you&#39;re probably not wanting to do. \r\nYour first two `for` loops should be similar to your last `for` loop: \r\n\r\n```\r\nfor (i = 0; i &lt; MAX_PLAYERS; ++i){\r\n...\r\n}\r\n```","title":"Creating arrays from user input in Java","body":"<p>Note, you're going through <code>playerJersey[i]</code> in your first two for loops, which you're probably not wanting to do.\nYour first two <code>for</code> loops should be similar to your last <code>for</code> loop:</p>\n<pre><code>for (i = 0; i &lt; MAX_PLAYERS; ++i){\n...\n}\n</code></pre>\n"}],"owner":{"account_id":25500599,"reputation":19,"user_id":19293926,"display_name":"Brian Miller"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1657923867,"creation_date":1657920024,"question_id":72999711,"body_markdown":"I need to create two arrays: 1 for playerJersey and 2 for playerRating. I need to output the player jersey number with the corresponding rating. Why are my arrays not being assigned the correct values?\r\nThis is what I currently have: \r\n\r\n\r\n    import java.util.Scanner;\r\n    \r\n        public class PlayerRoster {\r\n           public static void main(String[] args) {\r\n              Scanner scnr = new Scanner(System.in);\r\n              final int MAX_PLAYERS = 5;\r\n              int [] playerJersey = new int [MAX_PLAYERS];\r\n              int [] playerRating = new int [MAX_PLAYERS];\r\n              int i;\r\n              \r\n              for (i = 0; i &lt; playerJersey[i]; ++i){\r\n              playerJersey[i] = scnr.nextInt();\r\n              }\r\n              for (i = 0; i &lt; playerRating[i]; ++i){\r\n              playerRating[i] = scnr.nextInt();\r\n              }\r\n              for (i = 0; i &lt; MAX_PLAYERS; ++i){\r\n                 System.out.println(&quot;Enter player &quot; + playerJersey[i] + &quot;&#39;s jersey number:&quot;);\r\n                 System.out.println(playerJersey[i]);\r\n                 System.out.println(&quot;Enter player &quot; + playerRating[i] + &quot;&#39;s rating:&quot;);\r\n                 System.out.println(playerRating[i]);\r\n                 \r\n              }\r\n              \r\n              \r\n           }\r\n        }\r\n\r\nThis is the current output:\r\n\r\nEnter player 0&#39;s jersey number:\r\n0\r\n\r\nEnter player 0&#39;s rating:\r\n0\r\n\r\nEnter player 0&#39;s jersey number:\r\n0\r\n\r\nEnter player 0&#39;s rating:\r\n0\r\n\r\nEnter player 0&#39;s jersey number:\r\n0\r\n\r\nEnter player 0&#39;s rating:\r\n0\r\n\r\nEnter player 0&#39;s jersey number:\r\n0\r\n\r\nEnter player 0&#39;s rating:\r\n0\r\n\r\nEnter player 0&#39;s jersey number:\r\n0\r\n\r\nEnter player 0&#39;s rating:\r\n0\r\n\r\n\r\n\r\n","title":"Creating arrays from user input in Java","body":"<p>I need to create two arrays: 1 for playerJersey and 2 for playerRating. I need to output the player jersey number with the corresponding rating. Why are my arrays not being assigned the correct values?\nThis is what I currently have:</p>\n<pre><code>import java.util.Scanner;\n\n    public class PlayerRoster {\n       public static void main(String[] args) {\n          Scanner scnr = new Scanner(System.in);\n          final int MAX_PLAYERS = 5;\n          int [] playerJersey = new int [MAX_PLAYERS];\n          int [] playerRating = new int [MAX_PLAYERS];\n          int i;\n          \n          for (i = 0; i &lt; playerJersey[i]; ++i){\n          playerJersey[i] = scnr.nextInt();\n          }\n          for (i = 0; i &lt; playerRating[i]; ++i){\n          playerRating[i] = scnr.nextInt();\n          }\n          for (i = 0; i &lt; MAX_PLAYERS; ++i){\n             System.out.println(&quot;Enter player &quot; + playerJersey[i] + &quot;'s jersey number:&quot;);\n             System.out.println(playerJersey[i]);\n             System.out.println(&quot;Enter player &quot; + playerRating[i] + &quot;'s rating:&quot;);\n             System.out.println(playerRating[i]);\n             \n          }\n          \n          \n       }\n    }\n</code></pre>\n<p>This is the current output:</p>\n<p>Enter player 0's jersey number:\n0</p>\n<p>Enter player 0's rating:\n0</p>\n<p>Enter player 0's jersey number:\n0</p>\n<p>Enter player 0's rating:\n0</p>\n<p>Enter player 0's jersey number:\n0</p>\n<p>Enter player 0's rating:\n0</p>\n<p>Enter player 0's jersey number:\n0</p>\n<p>Enter player 0's rating:\n0</p>\n<p>Enter player 0's jersey number:\n0</p>\n<p>Enter player 0's rating:\n0</p>\n"},{"tags":["java","modelmapper"],"answers":[{"tags":[],"owner":{"account_id":315536,"reputation":1786,"user_id":631272,"display_name":"Marquee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657923075,"creation_date":1657306249,"answer_id":72915817,"question_id":56039695,"body_markdown":"This is old, but there are no answers and the issue still occurs so I will offer my solution.\r\n\r\nI encountered a very similar issue using ModelMapper. The problem in essence is that ModelMapper does not support any complexity beyond getter/setter invocation inside of the PropertyMap logic (see [this link][1]). Even the tertiary operator is too much. This is bewildering to me, but it is true.\r\n\r\nIn the OP&#39;s case, the fact that &#39;MapFromTargetToSource&#39; is using a builder is too complex.\r\n\r\nI found 3 options to work around this. I have listed them below with JUnit examples of each.\r\n&lt;br&gt;&lt;sub&gt;(Note: I don&#39;t have the BaseMapping class available in my version of ModelMapper (2.4.4), so I have a simpler one-way implementation but it works similarly. In practice, I wrap my use of ModelMapper inside of Converter Objects so these options are all encapsulated behind the convert() interface method.)&lt;/sub&gt;\r\n\r\n&lt;!-- language-all: lang-java --&gt;\r\n\r\n**Option 1: You can do all the derivation beforehand and set a simple value inside the configure() method.**\r\n    \r\n\t@Test\r\n\tpublic void modelMapper_complexMapping_option_1_externalDerivation_so() {\r\n\t\tProductReviewDTO source = ProductReviewDTO.builder().id(123).productId(456).build();\r\n\r\n\t\tModelMapper mapper = new ModelMapper();\r\n\t\tTypeMap&lt;ProductReviewDTO, ProductReview&gt; typeMap = mapper.typeMap(ProductReviewDTO.class, ProductReview.class);\r\n\r\n\t\tProduct derivedField = Product.builder().id(source.getProductId()).build();\r\n\r\n\t\tPropertyMap&lt;ProductReviewDTO, ProductReview&gt; targetToSource = new PropertyMap&lt;&gt;() {\r\n\t\t\tprotected void configure() {\r\n\t\t\t\tmap().setProduct(derivedField);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\ttypeMap.addMappings(targetToSource);\r\n\t\tProductReview actual = mapper.map(source, ProductReview.class);\r\n\r\n\t\tassertThat(actual.getId(), is(source.getId()));\r\n\t\tassertThat(actual.getProduct().getId(), is(source.getProductId()));\r\n\t}\r\n\r\n**Option 2: You can write an internal method in your source class to derive the value.** This may or may not make sense depending on use case, organization standards, etc. IMHO it does not make sense for a DTO like the OP is using, but may in other cases.\r\n\r\n\t@Test\r\n\tpublic void modelMapper_complexMapping_option_2_internalDerivation_so() {\r\n\t\tProductReviewDTO source = ProductReviewDTO.builder().id(123).productId(456).build();\r\n\r\n\t\tModelMapper mapper = new ModelMapper();\r\n\t\tTypeMap&lt;ProductReviewDTO, ProductReview&gt; typeMap = mapper.typeMap(ProductReviewDTO.class, ProductReview.class);\r\n\r\n\t\tPropertyMap&lt;ProductReviewDTO, ProductReview&gt; targetToSource = new PropertyMap&lt;&gt;() {\r\n\t\t\tprotected void configure() {\r\n\t\t\t\tmap().setProduct(source.synthesizeProduct());\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\ttypeMap.addMappings(targetToSource);\r\n\t\tProductReview actual = mapper.map(source, ProductReview.class);\r\n\r\n\t\tassertThat(actual.getId(), is(source.getId()));\r\n\t\tassertThat(actual.getProduct().getId(), is(source.getProductId()));\r\n\t}\r\n\r\n    public class ProductReviewDTO {\r\n    \r\n        private int id;\r\n        private int productId;\r\n    \r\n        public Product synthesizeProduct() {\r\n            return Product.builder().id(getProductId()).build();\r\n        }\r\n    \r\n    }\r\n\r\n**Option 3: You can use ModelMapper&#39;s &quot;using converter&quot; syntax.** I find this clunky, but it works. Here is a [reference][2].\r\n\r\n\t@Test\r\n\tpublic void modelMapper_complexMapping_option_3_usingConverter_so() {\r\n\t\tProductReviewDTO source = ProductReviewDTO.builder().id(123).productId(456).build();\r\n\r\n\t\tModelMapper mapper = new ModelMapper();\r\n\t\tTypeMap&lt;ProductReviewDTO, ProductReview&gt; typeMap = mapper.typeMap(ProductReviewDTO.class, ProductReview.class);\r\n\r\n\t\tPropertyMap&lt;ProductReviewDTO, ProductReview&gt; targetToSource = new PropertyMap&lt;&gt;() {\r\n\t\t\tprotected void configure() {\r\n\t\t\t\tusing(new Converter&lt;ProductReviewDTO, Product&gt;() {\r\n\t\t\t\t\tpublic Product convert(MappingContext&lt;ProductReviewDTO, Product&gt; context) {\r\n\t\t\t\t\t\tProductReviewDTO src = context.getSource();\r\n\t\t\t\t\t\treturn Product.builder().id(src.getProductId()).build();\r\n\t\t\t\t\t}\r\n\t\t\t\t}).map(source).setProduct(null);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\ttypeMap.addMappings(targetToSource);\r\n\t\tProductReview actual = mapper.map(source, ProductReview.class);\r\n\r\n\t\tassertThat(actual.getId(), is(source.getId()));\r\n\t\tassertThat(actual.getProduct().getId(), is(source.getProductId()));\r\n\t}\r\n\r\n[1]: https://github.com/modelmapper/modelmapper/issues/198\r\n[2]: http://modelmapper.org/user-manual/converters/","title":"ModelMapper: Error mapping ID field from DTO to the ID field on the Entity","body":"<p>This is old, but there are no answers and the issue still occurs so I will offer my solution.</p>\n<p>I encountered a very similar issue using ModelMapper. The problem in essence is that ModelMapper does not support any complexity beyond getter/setter invocation inside of the PropertyMap logic (see <a href=\"https://github.com/modelmapper/modelmapper/issues/198\" rel=\"nofollow noreferrer\">this link</a>). Even the tertiary operator is too much. This is bewildering to me, but it is true.</p>\n<p>In the OP's case, the fact that 'MapFromTargetToSource' is using a builder is too complex.</p>\n<p>I found 3 options to work around this. I have listed them below with JUnit examples of each.\n<br><sub>(Note: I don't have the BaseMapping class available in my version of ModelMapper (2.4.4), so I have a simpler one-way implementation but it works similarly. In practice, I wrap my use of ModelMapper inside of Converter Objects so these options are all encapsulated behind the convert() interface method.)</sub></p>\n\n<p><strong>Option 1: You can do all the derivation beforehand and set a simple value inside the configure() method.</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void modelMapper_complexMapping_option_1_externalDerivation_so() {\n    ProductReviewDTO source = ProductReviewDTO.builder().id(123).productId(456).build();\n\n    ModelMapper mapper = new ModelMapper();\n    TypeMap&lt;ProductReviewDTO, ProductReview&gt; typeMap = mapper.typeMap(ProductReviewDTO.class, ProductReview.class);\n\n    Product derivedField = Product.builder().id(source.getProductId()).build();\n\n    PropertyMap&lt;ProductReviewDTO, ProductReview&gt; targetToSource = new PropertyMap&lt;&gt;() {\n        protected void configure() {\n            map().setProduct(derivedField);\n        }\n    };\n\n    typeMap.addMappings(targetToSource);\n    ProductReview actual = mapper.map(source, ProductReview.class);\n\n    assertThat(actual.getId(), is(source.getId()));\n    assertThat(actual.getProduct().getId(), is(source.getProductId()));\n}\n</code></pre>\n<p><strong>Option 2: You can write an internal method in your source class to derive the value.</strong> This may or may not make sense depending on use case, organization standards, etc. IMHO it does not make sense for a DTO like the OP is using, but may in other cases.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void modelMapper_complexMapping_option_2_internalDerivation_so() {\n    ProductReviewDTO source = ProductReviewDTO.builder().id(123).productId(456).build();\n\n    ModelMapper mapper = new ModelMapper();\n    TypeMap&lt;ProductReviewDTO, ProductReview&gt; typeMap = mapper.typeMap(ProductReviewDTO.class, ProductReview.class);\n\n    PropertyMap&lt;ProductReviewDTO, ProductReview&gt; targetToSource = new PropertyMap&lt;&gt;() {\n        protected void configure() {\n            map().setProduct(source.synthesizeProduct());\n        }\n    };\n\n    typeMap.addMappings(targetToSource);\n    ProductReview actual = mapper.map(source, ProductReview.class);\n\n    assertThat(actual.getId(), is(source.getId()));\n    assertThat(actual.getProduct().getId(), is(source.getProductId()));\n}\n\npublic class ProductReviewDTO {\n\n    private int id;\n    private int productId;\n\n    public Product synthesizeProduct() {\n        return Product.builder().id(getProductId()).build();\n    }\n\n}\n</code></pre>\n<p><strong>Option 3: You can use ModelMapper's &quot;using converter&quot; syntax.</strong> I find this clunky, but it works. Here is a <a href=\"http://modelmapper.org/user-manual/converters/\" rel=\"nofollow noreferrer\">reference</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void modelMapper_complexMapping_option_3_usingConverter_so() {\n    ProductReviewDTO source = ProductReviewDTO.builder().id(123).productId(456).build();\n\n    ModelMapper mapper = new ModelMapper();\n    TypeMap&lt;ProductReviewDTO, ProductReview&gt; typeMap = mapper.typeMap(ProductReviewDTO.class, ProductReview.class);\n\n    PropertyMap&lt;ProductReviewDTO, ProductReview&gt; targetToSource = new PropertyMap&lt;&gt;() {\n        protected void configure() {\n            using(new Converter&lt;ProductReviewDTO, Product&gt;() {\n                public Product convert(MappingContext&lt;ProductReviewDTO, Product&gt; context) {\n                    ProductReviewDTO src = context.getSource();\n                    return Product.builder().id(src.getProductId()).build();\n                }\n            }).map(source).setProduct(null);\n        }\n    };\n\n    typeMap.addMappings(targetToSource);\n    ProductReview actual = mapper.map(source, ProductReview.class);\n\n    assertThat(actual.getId(), is(source.getId()));\n    assertThat(actual.getProduct().getId(), is(source.getProductId()));\n}\n</code></pre>\n"}],"owner":{"account_id":15896033,"reputation":21,"user_id":11469801,"display_name":"JamieH9004"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":998,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1657923075,"creation_date":1557314753,"question_id":56039695,"body_markdown":"I am trying to Map from a ProductReviewDTO which has an int product ID to link to the Product found on the ProductReview entity. However using ModelMapper it can&#39;t seem to map correctly. Resulting in a failed to set value error message as well as an IllegalArgument Exception saying that the object is not an instance of declaring class when trying to set the value. \r\n\r\nThe first mapping of ProductReview to ProductReviewDTO works fine.\r\n\r\nDTO:\r\n```\r\n@Data\r\n@Builder\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class ProductReviewDTO {\r\n\r\n    private int id;\r\n    private int productId;\r\n}\r\n```\r\nEntity:\r\n```\r\n@Data\r\n@Entity\r\n@Builder\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Table(name = &quot;product_reviews&quot;)\r\npublic class ProductReview {\r\n\r\n    @Id\r\n    @SequenceGenerator(name=&quot;product_reviews_generator&quot;, sequenceName = &quot;product_reviews_id_seq&quot;, allocationSize = 1)\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;product_reviews_generator&quot;)\r\n    @Column(name = &quot;id&quot;, updatable = false, nullable = false)\r\n    private int id;\r\n\r\n    @ManyToOne(cascade=CascadeType.DETACH, fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;product_id&quot;, nullable=false)\r\n    private Product product;\r\n}\r\n```\r\nMapping:\r\n```\r\n@NoArgsConstructor\r\npublic class ProductReviewMapping implements BaseMapping&lt;ProductReview, ProductReviewDTO&gt; {\r\n\r\n    @Override\r\n    public PropertyMap&lt;ProductReview, ProductReviewDTO&gt; MapFromSourceToTarget() {\r\n        return new PropertyMap&lt;ProductReview, ProductReviewDTO&gt;() {\r\n            protected void configure() {\r\n                map().setProductId(source.getProduct().getId());\r\n                map().setUserId(source.getUser().getId());\r\n                map().setRatingId(source.getRating().getId());\r\n            }\r\n        };\r\n    }\r\n\r\n    @Override\r\n    public PropertyMap&lt;ProductReviewDTO, ProductReview&gt; MapFromTargetToSource() {\r\n        return new PropertyMap&lt;ProductReviewDTO, ProductReview&gt;() {\r\n            protected void configure() {\r\n                map().setProduct(new Product().builder().id(source.getProductId()).build());\r\n            }\r\n        };\r\n    }\r\n}\r\n\r\n````\r\n\r\n```\r\nCaused by: org.modelmapper.MappingException: ModelMapper mapping errors:\r\n\r\n1) Failed to set value &#39;1&#39; on com.pfex.ecom.library.common.entity.Product$ProductBuilder.id()\r\n```","title":"ModelMapper: Error mapping ID field from DTO to the ID field on the Entity","body":"<p>I am trying to Map from a ProductReviewDTO which has an int product ID to link to the Product found on the ProductReview entity. However using ModelMapper it can't seem to map correctly. Resulting in a failed to set value error message as well as an IllegalArgument Exception saying that the object is not an instance of declaring class when trying to set the value. </p>\n\n<p>The first mapping of ProductReview to ProductReviewDTO works fine.</p>\n\n<p>DTO:</p>\n\n<pre><code>@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class ProductReviewDTO {\n\n    private int id;\n    private int productId;\n}\n</code></pre>\n\n<p>Entity:</p>\n\n<pre><code>@Data\n@Entity\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@Table(name = \"product_reviews\")\npublic class ProductReview {\n\n    @Id\n    @SequenceGenerator(name=\"product_reviews_generator\", sequenceName = \"product_reviews_id_seq\", allocationSize = 1)\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = \"product_reviews_generator\")\n    @Column(name = \"id\", updatable = false, nullable = false)\n    private int id;\n\n    @ManyToOne(cascade=CascadeType.DETACH, fetch = FetchType.LAZY)\n    @JoinColumn(name = \"product_id\", nullable=false)\n    private Product product;\n}\n</code></pre>\n\n<p>Mapping:</p>\n\n<pre><code>@NoArgsConstructor\npublic class ProductReviewMapping implements BaseMapping&lt;ProductReview, ProductReviewDTO&gt; {\n\n    @Override\n    public PropertyMap&lt;ProductReview, ProductReviewDTO&gt; MapFromSourceToTarget() {\n        return new PropertyMap&lt;ProductReview, ProductReviewDTO&gt;() {\n            protected void configure() {\n                map().setProductId(source.getProduct().getId());\n                map().setUserId(source.getUser().getId());\n                map().setRatingId(source.getRating().getId());\n            }\n        };\n    }\n\n    @Override\n    public PropertyMap&lt;ProductReviewDTO, ProductReview&gt; MapFromTargetToSource() {\n        return new PropertyMap&lt;ProductReviewDTO, ProductReview&gt;() {\n            protected void configure() {\n                map().setProduct(new Product().builder().id(source.getProductId()).build());\n            }\n        };\n    }\n}\n\n</code></pre>\n\n<pre><code>Caused by: org.modelmapper.MappingException: ModelMapper mapping errors:\n\n1) Failed to set value '1' on com.pfex.ecom.library.common.entity.Product$ProductBuilder.id()\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":2,"creation_date":1657916842,"post_id":72999263,"comment_id":128932140,"body_markdown":"Does this answer your question? [How to exit an Android app programmatically?](https://stackoverflow.com/questions/17719634/how-to-exit-an-android-app-programmatically)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/17719634/how-to-exit-an-android-app-programmatically\">How to exit an Android app programmatically?</a>"}],"answers":[{"tags":[],"owner":{"account_id":13010862,"reputation":874,"user_id":9403953,"display_name":"John T"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657922350,"creation_date":1657922350,"answer_id":72999971,"question_id":72999263,"body_markdown":"Create a button with the following code in your .xml file:\r\n\r\n    &lt;Button\r\n        android:text=&quot;Quit&quot;\r\n        android:id=&quot;@+id/quit&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot; /&gt;\r\n\r\nIn your Activity, get the button view in onCreate or where you need it and add an onClicklistener:\r\n\r\n    Button quit = findViewById(R.id.quit);\r\n    \r\n    quit.setOnClickListener(new View.OnClickListener() {\r\n    \r\n        @Override\r\n        public void onClick(View view) {\r\n    \r\n            finishAndRemoveTask();    \r\n    \r\n        }\r\n    \r\n    });\r\n\r\nThis works for API 21 and above.\r\n\r\n\r\n\r\n\r\n","title":"How do I make a button that quits the application in Android Studio using the Java programming language?","body":"<p>Create a button with the following code in your .xml file:</p>\n<pre><code>&lt;Button\n    android:text=&quot;Quit&quot;\n    android:id=&quot;@+id/quit&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot; /&gt;\n</code></pre>\n<p>In your Activity, get the button view in onCreate or where you need it and add an onClicklistener:</p>\n<pre><code>Button quit = findViewById(R.id.quit);\n\nquit.setOnClickListener(new View.OnClickListener() {\n\n    @Override\n    public void onClick(View view) {\n\n        finishAndRemoveTask();    \n\n    }\n\n});\n</code></pre>\n<p>This works for API 21 and above.</p>\n"}],"owner":{"account_id":25819375,"reputation":1,"user_id":19558775,"display_name":"Maker6666"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":373,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1657922350,"creation_date":1657916658,"question_id":72999263,"body_markdown":"I&#39;ve been trying to use Google to search on how to make a simple quit button in java on Android Studio IDE. Unfortunately all of the tutorials on Youtube or otherwise are all tutorials on how to make functioning buttons in the Kotlin programming language. The reason why I need to make the button in Java is that it is for College. I am new to the software developing world so any help would be appreciated. ","title":"How do I make a button that quits the application in Android Studio using the Java programming language?","body":"<p>I've been trying to use Google to search on how to make a simple quit button in java on Android Studio IDE. Unfortunately all of the tutorials on Youtube or otherwise are all tutorials on how to make functioning buttons in the Kotlin programming language. The reason why I need to make the button in Java is that it is for College. I am new to the software developing world so any help would be appreciated.</p>\n"},{"tags":["java","scala","compiler-errors","gradle","cross-compiling"],"answers":[{"tags":[],"owner":{"account_id":45487,"reputation":8597,"user_id":134077,"accept_rate":30,"display_name":"crizCraig"},"down_vote_count":0,"up_vote_count":41,"is_accepted":true,"score":41,"last_activity_date":1657922285,"creation_date":1398319795,"answer_id":23261076,"question_id":23261075,"body_markdown":"Java and Scala can be combined in the scala sources to have them compiled jointly, e.g.\r\n\r\n    sourceSets {\r\n        main {\r\n            scala {\r\n                srcDirs = [&#39;src/main/scala&#39;, &#39;src/main/java&#39;]\r\n            }\r\n            java {\r\n                srcDirs = []\r\n            }\r\n    }","title":"Compiling Scala before / alongside Java with Gradle","body":"<p>Java and Scala can be combined in the scala sources to have them compiled jointly, e.g.</p>\n<pre><code>sourceSets {\n    main {\n        scala {\n            srcDirs = ['src/main/scala', 'src/main/java']\n        }\n        java {\n            srcDirs = []\n        }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12201591,"reputation":41,"user_id":8905738,"display_name":"Longjun"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1510193985,"creation_date":1510135184,"answer_id":47176603,"question_id":23261075,"body_markdown":"If your java code use some external libraries like Lombok, using scala compiler to build java class will failed, as scala compiler don&#39;t know annotations.\r\n\r\nMy solution is to change the task dependencies, make compiling Scala before Java.\r\n\r\n\r\n    tasks.compileJava.dependsOn compileScala\r\n    tasks.compileScala.dependsOn.remove(&quot;compileJava&quot;)\r\n\r\nNow the task `compileScala` runs before `compileJava`, that&#39;s it.\r\n\r\n\r\n\r\nIf your java code depends on scala code, you need to do two more steps,\r\n\r\n1. Separate the output folder of scala and java,\r\n\r\n        sourceSets {\r\n            main {\r\n                scala {\r\n                    outputDir = file(&quot;$buildDir/classes/scala/main&quot;)\r\n                }\r\n                java {\r\n                    outputDir = file(&quot;$buildDir/classes/java/main&quot;)\r\n                }\r\n            }\r\n\r\n\r\n\r\n2. Add the scala output as a dependency for `compileJava`,\r\n\r\n        dependencies {\r\n            compile files(&quot;$sourceSets.main.scala.outputDir&quot;)\r\n        }","title":"Compiling Scala before / alongside Java with Gradle","body":"<p>If your java code use some external libraries like Lombok, using scala compiler to build java class will failed, as scala compiler don't know annotations.</p>\n\n<p>My solution is to change the task dependencies, make compiling Scala before Java.</p>\n\n<pre><code>tasks.compileJava.dependsOn compileScala\ntasks.compileScala.dependsOn.remove(\"compileJava\")\n</code></pre>\n\n<p>Now the task <code>compileScala</code> runs before <code>compileJava</code>, that's it.</p>\n\n<p>If your java code depends on scala code, you need to do two more steps,</p>\n\n<ol>\n<li><p>Separate the output folder of scala and java,</p>\n\n<pre><code>sourceSets {\n    main {\n        scala {\n            outputDir = file(\"$buildDir/classes/scala/main\")\n        }\n        java {\n            outputDir = file(\"$buildDir/classes/java/main\")\n        }\n    }\n</code></pre></li>\n<li><p>Add the scala output as a dependency for <code>compileJava</code>,</p>\n\n<pre><code>dependencies {\n    compile files(\"$sourceSets.main.scala.outputDir\")\n}\n</code></pre></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2278928,"reputation":2021,"user_id":2655102,"accept_rate":22,"display_name":"Renkai"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1563954591,"creation_date":1563954591,"answer_id":57177829,"question_id":23261075,"body_markdown":"for gradle kotlin dsl you can use this piece\r\n\r\n     sourceSets {\r\n    \r\n        main {\r\n            withConvention(ScalaSourceSet::class) {\r\n                scala {\r\n                    setSrcDirs(listOf(&quot;src/main/scala&quot;, &quot;src/main/java&quot;))\r\n                }\r\n            }\r\n            java {\r\n                setSrcDirs(emptyList&lt;String&gt;())\r\n            }\r\n        }\r\n        test {\r\n            withConvention(ScalaSourceSet::class) {\r\n                scala {\r\n                    setSrcDirs(listOf(&quot;src/test/scala&quot;, &quot;src/test/java&quot;))\r\n                }\r\n            }\r\n            java {\r\n                setSrcDirs(emptyList&lt;String&gt;())\r\n            }\r\n        }\r\n    }","title":"Compiling Scala before / alongside Java with Gradle","body":"<p>for gradle kotlin dsl you can use this piece</p>\n\n<pre><code> sourceSets {\n\n    main {\n        withConvention(ScalaSourceSet::class) {\n            scala {\n                setSrcDirs(listOf(\"src/main/scala\", \"src/main/java\"))\n            }\n        }\n        java {\n            setSrcDirs(emptyList&lt;String&gt;())\n        }\n    }\n    test {\n        withConvention(ScalaSourceSet::class) {\n            scala {\n                setSrcDirs(listOf(\"src/test/scala\", \"src/test/java\"))\n            }\n        }\n        java {\n            setSrcDirs(emptyList&lt;String&gt;())\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":317845,"reputation":397,"user_id":3151829,"accept_rate":75,"display_name":"Dmytro Starosud"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1616154478,"creation_date":1616154478,"answer_id":66707593,"question_id":23261075,"body_markdown":"Posting this update from the future here, as it would saved me a day.\r\n\r\n**gradle 6** doesn&#39;t support task dependencies modification, but here is what you can do:\r\n\r\n    // to compile Java after Scala\r\n    tasks.compileScala.classpath = sourceSets.main.compileClasspath\r\n    tasks.compileJava.classpath += files(sourceSets.main.scala.classesDirectory)\r\n\r\nAnd here is [documentation][1].\r\n\r\n\r\n  [1]: https://docs.gradle.org/current/userguide/building_java_projects.html#sub:compile_deps_jvm_lang","title":"Compiling Scala before / alongside Java with Gradle","body":"<p>Posting this update from the future here, as it would saved me a day.</p>\n<p><strong>gradle 6</strong> doesn't support task dependencies modification, but here is what you can do:</p>\n<pre><code>// to compile Java after Scala\ntasks.compileScala.classpath = sourceSets.main.compileClasspath\ntasks.compileJava.classpath += files(sourceSets.main.scala.classesDirectory)\n</code></pre>\n<p>And here is <a href=\"https://docs.gradle.org/current/userguide/building_java_projects.html#sub:compile_deps_jvm_lang\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n"}],"owner":{"account_id":45487,"reputation":8597,"user_id":134077,"accept_rate":30,"display_name":"crizCraig"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11126,"favorite_count":0,"down_vote_count":0,"up_vote_count":28,"accepted_answer_id":23261076,"answer_count":4,"score":28,"last_activity_date":1657922285,"creation_date":1398319795,"question_id":23261075,"body_markdown":"The default scala plugin task flow compiles Java before Scala so importing Scala sources within Java causes &quot;error: cannot find symbol&quot;.\r\n![scala task flow][1]\r\n\r\n  [1]: http://i.stack.imgur.com/cpZBy.png","title":"Compiling Scala before / alongside Java with Gradle","body":"<p>The default scala plugin task flow compiles Java before Scala so importing Scala sources within Java causes \"error: cannot find symbol\".\n<img src=\"https://i.stack.imgur.com/cpZBy.png\" alt=\"scala task flow\"></p>\n"},{"tags":["java","android-studio","kotlin","android-layout","translate-animation"],"comments":[{"owner":{"account_id":8373673,"reputation":61868,"user_id":6287910,"display_name":"Cheticamp"},"score":0,"creation_date":1657929496,"post_id":72999959,"comment_id":128934230,"body_markdown":"What do you do in `Move_Card_Anim`?","body":"What do you do in <code>Move_Card_Anim</code>?"},{"owner":{"account_id":21952459,"reputation":214,"user_id":16231514,"display_name":"Franklyn Oreben"},"score":0,"creation_date":1657952243,"post_id":72999959,"comment_id":128936401,"body_markdown":"I process the action to be taken which is determined by the card played.","body":"I process the action to be taken which is determined by the card played."}],"owner":{"account_id":21952459,"reputation":214,"user_id":16231514,"display_name":"Franklyn Oreben"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1657922246,"creation_date":1657922246,"question_id":72999959,"body_markdown":"I am trying to make a card game, I use translate animation to move the cards when user plays. It came to my notice that the animation works smoothly for device with higher android versions and performs poorly and Jacky on android 5.0 down. How can I make the animation moves smoothly on all devices? Below is my method used for move the cards.\r\n\r\n```\r\npublic void  Move_Card_To_PlayArea(){\r\n        Move_Card_Animation =new TranslateAnimation(0, (float) move_card_getX,0,(float) move_card_getY);\r\n        Move_Card_Animation.setDuration(share_card_speed);\r\n        Move_Card_Animation.setFillAfter(false);\r\n        Move_Card_Animation.setAnimationListener(new Move_Card_Anim());\r\n    }","title":"Translate animation not moving smoothly","body":"<p>I am trying to make a card game, I use translate animation to move the cards when user plays. It came to my notice that the animation works smoothly for device with higher android versions and performs poorly and Jacky on android 5.0 down. How can I make the animation moves smoothly on all devices? Below is my method used for move the cards.</p>\n<pre><code>public void  Move_Card_To_PlayArea(){\n        Move_Card_Animation =new TranslateAnimation(0, (float) move_card_getX,0,(float) move_card_getY);\n        Move_Card_Animation.setDuration(share_card_speed);\n        Move_Card_Animation.setFillAfter(false);\n        Move_Card_Animation.setAnimationListener(new Move_Card_Anim());\n    }\n</code></pre>\n"},{"tags":["java","android","api","redirect","whitelist"],"comments":[{"owner":{"account_id":12012909,"reputation":1053,"user_id":8788960,"display_name":"hans"},"score":0,"creation_date":1658399213,"post_id":72999322,"comment_id":129044156,"body_markdown":"Hi MOA - what is your question actually? Try to divide your post into two sections: context and the proper question (one that ends with question mark) :)","body":"Hi MOA - what is your question actually? Try to divide your post into two sections: context and the proper question (one that ends with question mark) :)"}],"answers":[{"tags":[],"owner":{"account_id":2786826,"reputation":2172,"user_id":2398000,"display_name":"avalerio"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1657921820,"creation_date":1657921820,"answer_id":72999899,"question_id":72999322,"body_markdown":"Your redirect URI should be the package name of your app, with a `://callback` at the end.\r\n\r\n`String REDIRECT_URI = &quot;com.yourdomain.yourapp://callback&quot;;`\r\n\r\nThis looks confusing because it is, but it does say URI not URL so it is correct.\r\n\r\nSpotify needs to get back to your app after its authorized the user so it needs to know your app name.\r\n\r\nFor a guide:\r\nhttps://developer.spotify.com/documentation/android/quick-start/\r\n\r\nFor whitelisting: https://developer.spotify.com/dashboard/\r\n","title":"How do i whitelist a redirect URL for my android app","body":"<p>Your redirect URI should be the package name of your app, with a <code>://callback</code> at the end.</p>\n<p><code>String REDIRECT_URI = &quot;com.yourdomain.yourapp://callback&quot;;</code></p>\n<p>This looks confusing because it is, but it does say URI not URL so it is correct.</p>\n<p>Spotify needs to get back to your app after its authorized the user so it needs to know your app name.</p>\n<p>For a guide:\n<a href=\"https://developer.spotify.com/documentation/android/quick-start/\" rel=\"nofollow noreferrer\">https://developer.spotify.com/documentation/android/quick-start/</a></p>\n<p>For whitelisting: <a href=\"https://developer.spotify.com/dashboard/\" rel=\"nofollow noreferrer\">https://developer.spotify.com/dashboard/</a></p>\n"}],"owner":{"account_id":25819214,"reputation":1,"user_id":19558653,"display_name":"MOA - CODES"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":608,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1657921820,"creation_date":1657917107,"question_id":72999322,"body_markdown":"Im trying to work with spotify&#39;s API, with java on Android studio and one of the requirement is that i whitelist a redirect URI that the Spotify Accounts Service will use to callback to my app after authorization. I&#39;ve only worked with a weather API in an android app ive built with java on android studio and i didn&#39;t whitelist a redirect URL for it, so im lost here.","title":"How do i whitelist a redirect URL for my android app","body":"<p>Im trying to work with spotify's API, with java on Android studio and one of the requirement is that i whitelist a redirect URI that the Spotify Accounts Service will use to callback to my app after authorization. I've only worked with a weather API in an android app ive built with java on android studio and i didn't whitelist a redirect URL for it, so im lost here.</p>\n"},{"tags":["java","xmlrpcclient"],"comments":[{"owner":{"account_id":132051,"reputation":4348,"user_id":332517,"accept_rate":58,"display_name":"Rostislav Matl"},"score":0,"creation_date":1331628789,"post_id":9679719,"comment_id":12299127,"body_markdown":"What logging framework do you use ?","body":"What logging framework do you use ?"},{"owner":{"account_id":366932,"reputation":359,"user_id":712775,"accept_rate":55,"display_name":"ndriks"},"score":0,"creation_date":1331646271,"post_id":9679719,"comment_id":12305389,"body_markdown":"no framework, I just need something simple actually, to be able to read the incoming and outgoing xml","body":"no framework, I just need something simple actually, to be able to read the incoming and outgoing xml"}],"answers":[{"tags":[],"owner":{"account_id":452692,"reputation":2466,"user_id":849256,"accept_rate":65,"display_name":"Carlos Jaime C. De Leon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1331625166,"creation_date":1331625166,"answer_id":9680179,"question_id":9679719,"body_markdown":"Try using a logger for **org.apache.xmlrpc.client**; I bet it would spit out the xml somewhere in that package. Try something like this:\r\n \r\n\t&lt;appender name=&quot;LOG_FILE&quot; class=&quot;org.apache.log4j.DailyRollingFileAppender&quot;&gt;\r\n\t\t&lt;param name=&quot;Threshold&quot; value=&quot;DEBUG&quot;/&gt;\r\n\t\t&lt;param name=&quot;File&quot; value=&quot;C:\\xmlrpc_client.log&quot;/&gt;\r\n\t\t&lt;param name=&quot;datePattern&quot; value=&quot;&#39;.&#39;yyyy-ww&quot; /&gt;\r\n\t\t&lt;param name=&quot;Append&quot; value=&quot;true&quot;/&gt;\r\n                &lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;\r\n                   &lt;param name=&quot;ConversionPattern&quot; value=&quot;[%p] %t %d{DATE} %M - %m%n&quot;/&gt;\r\n                &lt;/layout&gt;\r\n        &lt;/appender&gt;\r\n\r\n        &lt;logger name=&quot;org.apache.xmlrpc.client&quot;&gt;\r\n\t\t&lt;level value=&quot;DEBUG&quot;/&gt;\r\n\t&lt;/logger&gt;\r\n        &lt;root&gt;\r\n           &lt;level value=&quot;INFO&quot; /&gt;\r\n           &lt;appender-ref ref=&quot;LOG_FILE&quot;/&gt;\r\n        &lt;/root&gt;","title":"logging input/output xml in apache xmlrpc client","body":"<p>Try using a logger for <strong>org.apache.xmlrpc.client</strong>; I bet it would spit out the xml somewhere in that package. Try something like this:</p>\n\n<pre><code>&lt;appender name=\"LOG_FILE\" class=\"org.apache.log4j.DailyRollingFileAppender\"&gt;\n    &lt;param name=\"Threshold\" value=\"DEBUG\"/&gt;\n    &lt;param name=\"File\" value=\"C:\\xmlrpc_client.log\"/&gt;\n    &lt;param name=\"datePattern\" value=\"'.'yyyy-ww\" /&gt;\n    &lt;param name=\"Append\" value=\"true\"/&gt;\n            &lt;layout class=\"org.apache.log4j.PatternLayout\"&gt;\n               &lt;param name=\"ConversionPattern\" value=\"[%p] %t %d{DATE} %M - %m%n\"/&gt;\n            &lt;/layout&gt;\n    &lt;/appender&gt;\n\n    &lt;logger name=\"org.apache.xmlrpc.client\"&gt;\n    &lt;level value=\"DEBUG\"/&gt;\n&lt;/logger&gt;\n    &lt;root&gt;\n       &lt;level value=\"INFO\" /&gt;\n       &lt;appender-ref ref=\"LOG_FILE\"/&gt;\n    &lt;/root&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":80013,"reputation":2646,"user_id":226513,"accept_rate":67,"display_name":"Adam"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1657921767,"creation_date":1344423709,"answer_id":11863135,"question_id":9679719,"body_markdown":"My work-around was to use a custom transport as follows.  Perhaps there are more graceful ways of doing this.\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.ByteArrayInputStream;\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.InputStreamReader;\r\n    import java.util.logging.Level;\r\n    import java.util.logging.Logger;\r\n    \r\n    import org.apache.xmlrpc.XmlRpcException;\r\n    import org.apache.xmlrpc.client.XmlRpcClient;\r\n    import org.apache.xmlrpc.client.XmlRpcStreamTransport;\r\n    import org.apache.xmlrpc.client.XmlRpcSunHttpTransport;\r\n    import org.apache.xmlrpc.common.XmlRpcStreamRequestConfig;\r\n    import org.xml.sax.SAXException;\r\n    \r\n    \r\n    /**\r\n     * This is a custom XML-RPC transport which logs the outgoing and incoming\r\n     * XML-RPC messages.\r\n     */\r\n    public class MessageLoggingTransport extends XmlRpcSunHttpTransport\r\n    {\r\n    \tprivate static final Logger log = Logger.getLogger(MessageLoggingTransport.class.getName());\r\n    \r\n    \r\n    \t/**\r\n    \t * Default constructor\r\n    \t * \r\n    \t * @see XmlRpcSunHttpTransport#XmlRpcSunHttpTransport(XmlRpcClient)\r\n    \t * @param pClient\r\n    \t */\r\n    \tpublic MessageLoggingTransport(final XmlRpcClient pClient)\r\n    \t{\r\n    \t\tsuper(pClient);\r\n    \t}\r\n    \r\n    \r\n    \t/**\r\n    \t * Dumps outgoing XML-RPC requests to the log\r\n    \t */\r\n    \t@Override\r\n    \tprotected void writeRequest(final XmlRpcStreamTransport.ReqWriter pWriter) throws IOException, XmlRpcException, SAXException\r\n    \t{\r\n    \t\tfinal ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n    \t\tpWriter.write(baos);\r\n    \t\tlog.info(baos.toString());\r\n    \t\tsuper.writeRequest(pWriter);\r\n    \t}\r\n    \r\n    \r\n    \t/**\r\n    \t * Dumps incoming XML-RPC responses to the log\r\n    \t */\r\n    \t@Override\r\n    \tprotected Object readResponse(XmlRpcStreamRequestConfig pConfig, InputStream pStream) throws XmlRpcException\r\n    \t{\r\n    \t\tfinal StringBuffer sb = new StringBuffer();\r\n    \r\n    \t\ttry\r\n    \t\t{\r\n    \t\t\tfinal BufferedReader reader = new BufferedReader(new InputStreamReader(pStream));\r\n    \t\t\tString line = reader.readLine();\r\n    \t\t\twhile(line != null)\r\n    \t\t\t{\r\n    \t\t\t\tsb.append(line);\r\n    \t\t\t\tline = reader.readLine();\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tcatch(final IOException e)\r\n    \t\t{\r\n    \t\t\tlog.log(Level.SEVERE, &quot;While reading server response&quot;, e);\r\n    \t\t}\r\n    \r\n    \t\tlog.info(sb.toString());\r\n    \r\n    \t\tfinal ByteArrayInputStream bais = new ByteArrayInputStream(sb.toString().getBytes());\r\n    \t\treturn super.readResponse(pConfig, bais);\r\n    \t}\r\n    }\r\n\r\nAnd then in the code which creates your XML-RPC client:\r\n\r\n    final XmlRpcClientConfigImpl config = new XmlRpcClientConfigImpl();\r\n    config.setServerURL(new URL(url));\r\n    \r\n    final XmlRpcTransportFactory transportFactory = new XmlRpcTransportFactory()\r\n    {\r\n    \tpublic XmlRpcTransport getTransport()\r\n    \t{\r\n    \t\treturn new MessageLoggingTransport(client);\r\n    \t}\r\n    };\r\n    \r\n    client = new XmlRpcClient();\r\n    client.setTransportFactory(transportFactory);\r\n    client.setConfig(config);","title":"logging input/output xml in apache xmlrpc client","body":"<p>My work-around was to use a custom transport as follows.  Perhaps there are more graceful ways of doing this.</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\n\nimport org.apache.xmlrpc.XmlRpcException;\nimport org.apache.xmlrpc.client.XmlRpcClient;\nimport org.apache.xmlrpc.client.XmlRpcStreamTransport;\nimport org.apache.xmlrpc.client.XmlRpcSunHttpTransport;\nimport org.apache.xmlrpc.common.XmlRpcStreamRequestConfig;\nimport org.xml.sax.SAXException;\n\n\n/**\n * This is a custom XML-RPC transport which logs the outgoing and incoming\n * XML-RPC messages.\n */\npublic class MessageLoggingTransport extends XmlRpcSunHttpTransport\n{\n    private static final Logger log = Logger.getLogger(MessageLoggingTransport.class.getName());\n\n\n    /**\n     * Default constructor\n     * \n     * @see XmlRpcSunHttpTransport#XmlRpcSunHttpTransport(XmlRpcClient)\n     * @param pClient\n     */\n    public MessageLoggingTransport(final XmlRpcClient pClient)\n    {\n        super(pClient);\n    }\n\n\n    /**\n     * Dumps outgoing XML-RPC requests to the log\n     */\n    @Override\n    protected void writeRequest(final XmlRpcStreamTransport.ReqWriter pWriter) throws IOException, XmlRpcException, SAXException\n    {\n        final ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        pWriter.write(baos);\n        log.info(baos.toString());\n        super.writeRequest(pWriter);\n    }\n\n\n    /**\n     * Dumps incoming XML-RPC responses to the log\n     */\n    @Override\n    protected Object readResponse(XmlRpcStreamRequestConfig pConfig, InputStream pStream) throws XmlRpcException\n    {\n        final StringBuffer sb = new StringBuffer();\n\n        try\n        {\n            final BufferedReader reader = new BufferedReader(new InputStreamReader(pStream));\n            String line = reader.readLine();\n            while(line != null)\n            {\n                sb.append(line);\n                line = reader.readLine();\n            }\n        }\n        catch(final IOException e)\n        {\n            log.log(Level.SEVERE, &quot;While reading server response&quot;, e);\n        }\n\n        log.info(sb.toString());\n\n        final ByteArrayInputStream bais = new ByteArrayInputStream(sb.toString().getBytes());\n        return super.readResponse(pConfig, bais);\n    }\n}\n</code></pre>\n<p>And then in the code which creates your XML-RPC client:</p>\n<pre><code>final XmlRpcClientConfigImpl config = new XmlRpcClientConfigImpl();\nconfig.setServerURL(new URL(url));\n\nfinal XmlRpcTransportFactory transportFactory = new XmlRpcTransportFactory()\n{\n    public XmlRpcTransport getTransport()\n    {\n        return new MessageLoggingTransport(client);\n    }\n};\n\nclient = new XmlRpcClient();\nclient.setTransportFactory(transportFactory);\nclient.setConfig(config);\n</code></pre>\n"}],"owner":{"account_id":366932,"reputation":359,"user_id":712775,"accept_rate":55,"display_name":"ndriks"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6869,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":11863135,"answer_count":2,"score":10,"last_activity_date":1657921767,"creation_date":1331622672,"question_id":9679719,"body_markdown":"I&#39;m building an xmlrpc client with Java using Apache xmlrpc, but couldn&#39;t figure out how to log the input/output xml (the raw data received and sent). How do I do this?\r\n\r\nThank you","title":"logging input/output xml in apache xmlrpc client","body":"<p>I'm building an xmlrpc client with Java using Apache xmlrpc, but couldn't figure out how to log the input/output xml (the raw data received and sent). How do I do this?</p>\n\n<p>Thank you</p>\n"},{"tags":["java","html","forms"],"answers":[{"tags":[],"owner":{"account_id":6475519,"reputation":4496,"user_id":5014221,"accept_rate":71,"display_name":"Ashish Patil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1657920764,"creation_date":1657920764,"answer_id":72999791,"question_id":72998783,"body_markdown":"HTML5 has new input type as `tel` which you can straight away use within input.\r\nHere, as you are not looking for any brackets `()` or `-` between digits so below is what I am suggesting as a validation. If you don&#39;t enter correct number, validation message appears on your screen.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n    &lt;head&gt;\r\n\r\n    &lt;form&gt;\r\n      &lt;label for=&quot;choose&quot;&gt;Enter your phone number&lt;/label&gt;\r\n      &lt;input type=&#39;tel&#39; pattern=&#39;[\\+]447\\d{9}&#39; title=&#39;Required Phone Number (Format: +447999999999)&#39;/&gt;\r\n      &lt;button&gt;Submit&lt;/button&gt;\r\n    &lt;/form&gt;\r\n    &lt;/html&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"HTML Java Form input field Restrict to only allow international uk numbers e.g +447655123456","body":"<p>HTML5 has new input type as <code>tel</code> which you can straight away use within input.\nHere, as you are not looking for any brackets <code>()</code> or <code>-</code> between digits so below is what I am suggesting as a validation. If you don't enter correct number, validation message appears on your screen.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n\n&lt;form&gt;\n  &lt;label for=\"choose\"&gt;Enter your phone number&lt;/label&gt;\n  &lt;input type='tel' pattern='[\\+]447\\d{9}' title='Required Phone Number (Format: +447999999999)'/&gt;\n  &lt;button&gt;Submit&lt;/button&gt;\n&lt;/form&gt;\n&lt;/html&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":25023031,"reputation":41,"user_id":18881540,"display_name":"arch691"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72999791,"answer_count":1,"score":1,"last_activity_date":1657920764,"creation_date":1657913193,"question_id":72998783,"body_markdown":"Im trying to find an example that would force a user to have to input +447 as the first four characters and then the remaining 9 have to be only numbers.\r\n\r\nso if someone wanting to type 07655 123456 it would not allow. so unless you first character is a + second 4 third 4 fourth 7 then the remaining is 9 numbers.\r\n\r\nI can guess this can be done with a prefix and a restriction to numbers for the remaining 9 but from a user and ease of use they dont get it and want to type it all.\r\n\r\nAny Advise please just a simple html form with a input field.","title":"HTML Java Form input field Restrict to only allow international uk numbers e.g +447655123456","body":"<p>Im trying to find an example that would force a user to have to input +447 as the first four characters and then the remaining 9 have to be only numbers.</p>\n<p>so if someone wanting to type 07655 123456 it would not allow. so unless you first character is a + second 4 third 4 fourth 7 then the remaining is 9 numbers.</p>\n<p>I can guess this can be done with a prefix and a restriction to numbers for the remaining 9 but from a user and ease of use they dont get it and want to type it all.</p>\n<p>Any Advise please just a simple html form with a input field.</p>\n"},{"tags":["java","vue.js","vuejs2","vue-component"],"answers":[{"tags":[],"owner":{"account_id":2077773,"reputation":133288,"user_id":1850609,"display_name":"acdcjunior"},"down_vote_count":1,"up_vote_count":5,"is_accepted":true,"score":4,"last_activity_date":1657920569,"creation_date":1519518260,"answer_id":48969024,"question_id":48968993,"body_markdown":"Mind the `this` when declaring functions:\r\n\r\n    export default {\r\n        data: () =&gt; ({\r\n          showNav: false,\r\n        }),\r\n        methods: {\r\n          toggleNav: () =&gt; {\r\n            this.showNav = !this.showNav\r\n            console.log(this)\r\n          }\r\n        }\r\n    }\r\n\r\nShould be:\r\n\r\n    export default {\r\n        data() {                                   // &lt;== changed this line\r\n          showNav: false,\r\n        },\r\n        methods: {\r\n          toggleNav() {                            // &lt;== changed this line\r\n            this.showNav = !this.showNav\r\n            console.log(this)\r\n          }\r\n        }\r\n    }\r\n\r\n# Reasoning\r\n\r\nDon&#39;t use arrow functions (`() =&gt; {}`) when declaring Vue methods. They pick up the `this` from the current scope (possibly `window`), and will not reflect the Vue instance.\r\n\r\nFrom the [API Docs][1]:\r\n\r\n&gt; Note that __you should not use an arrow function with the `data` property__ (e.g. `data: () =&gt; { return { a: this.myProp }}`). The reason is arrow functions bind the parent context, so `this` will not be the Vue instance as you expect and `this.myProp` will be undefined.&lt;/p&gt;\r\n\r\n\r\n  [1]: https://v2.vuejs.org/v2/api/#data","title":"VueJS DOM not updating when data does","body":"<p>Mind the <code>this</code> when declaring functions:</p>\n<pre><code>export default {\n    data: () =&gt; ({\n      showNav: false,\n    }),\n    methods: {\n      toggleNav: () =&gt; {\n        this.showNav = !this.showNav\n        console.log(this)\n      }\n    }\n}\n</code></pre>\n<p>Should be:</p>\n<pre><code>export default {\n    data() {                                   // &lt;== changed this line\n      showNav: false,\n    },\n    methods: {\n      toggleNav() {                            // &lt;== changed this line\n        this.showNav = !this.showNav\n        console.log(this)\n      }\n    }\n}\n</code></pre>\n<h1>Reasoning</h1>\n<p>Don't use arrow functions (<code>() =&gt; {}</code>) when declaring Vue methods. They pick up the <code>this</code> from the current scope (possibly <code>window</code>), and will not reflect the Vue instance.</p>\n<p>From the <a href=\"https://v2.vuejs.org/v2/api/#data\" rel=\"nofollow noreferrer\">API Docs</a>:</p>\n<blockquote>\n<p>Note that <strong>you should not use an arrow function with the <code>data</code> property</strong> (e.g. <code>data: () =&gt; { return { a: this.myProp }}</code>). The reason is arrow functions bind the parent context, so <code>this</code> will not be the Vue instance as you expect and <code>this.myProp</code> will be undefined.</p></p>\n</blockquote>\n"}],"owner":{"account_id":8556036,"reputation":773,"user_id":6411538,"accept_rate":43,"display_name":"Nathan Horrigan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1519522310,"accepted_answer_id":48969024,"answer_count":1,"score":0,"last_activity_date":1657920569,"creation_date":1519518000,"question_id":48968993,"body_markdown":"So I have a simple example with a button and some text but for some reason, it&#39;s not updating even though when I log the Vue object, data is clearly being updated.\r\n\r\n\r\n    &lt;template&gt;\r\n      &lt;div&gt;\r\n        &lt;span&gt;{{ showNav }}&lt;/span&gt;\r\n        &lt;span class=&quot;parallax__nav__trigger&quot; v-on:click=&quot;toggleNav&quot;&gt;\r\n            Menu \r\n        &lt;/span&gt;\r\n      &lt;/div&gt;\r\n    &lt;/template&gt;\r\n    \r\n    &lt;script&gt;\r\n    export default {\r\n        data: () =&gt; ({\r\n          showNav: false,\r\n        }),\r\n        methods: {\r\n          toggleNav: () =&gt; {\r\n            this.showNav = !this.showNav\r\n            console.log(this)\r\n          }\r\n        }\r\n      }\r\n    &lt;/script&gt;\r\n    ...\r\n","title":"VueJS DOM not updating when data does","body":"<p>So I have a simple example with a button and some text but for some reason, it's not updating even though when I log the Vue object, data is clearly being updated.</p>\n\n<pre><code>&lt;template&gt;\n  &lt;div&gt;\n    &lt;span&gt;{{ showNav }}&lt;/span&gt;\n    &lt;span class=\"parallax__nav__trigger\" v-on:click=\"toggleNav\"&gt;\n        Menu \n    &lt;/span&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nexport default {\n    data: () =&gt; ({\n      showNav: false,\n    }),\n    methods: {\n      toggleNav: () =&gt; {\n        this.showNav = !this.showNav\n        console.log(this)\n      }\n    }\n  }\n&lt;/script&gt;\n...\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8810,"page":1182,"page_size":100}
