{"items":[{"tags":["java","lwjgl","tile","slick2d"],"comments":[{"owner":{"account_id":2124262,"reputation":2634,"user_id":1886855,"display_name":"Marco Forberg"},"score":0,"creation_date":1368184620,"post_id":16480923,"comment_id":23649501,"body_markdown":"what have you tried? what problems are you facing? provide some code that shows your problem...","body":"what have you tried? what problems are you facing? provide some code that shows your problem..."},{"owner":{"account_id":1288393,"reputation":45,"user_id":1240988,"accept_rate":50,"display_name":"user1240988"},"score":0,"creation_date":1368185063,"post_id":16480923,"comment_id":23649698,"body_markdown":"I have tried use lerp, the problem with that was if the speed wasn&#39;t correct the char moved to long en needed correction. I have also tried moving with out delta, but if the the movement speed wasn&#39;t a multiple of 32(Tile size) it lost its orientation.","body":"I have tried use lerp, the problem with that was if the speed wasn&#39;t correct the char moved to long en needed correction. I have also tried moving with out delta, but if the the movement speed wasn&#39;t a multiple of 32(Tile size) it lost its orientation."}],"answers":[{"tags":[],"owner":{"account_id":1685998,"reputation":557,"user_id":1549285,"accept_rate":95,"display_name":"Twister1002"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1369440405,"creation_date":1369440405,"answer_id":16745160,"question_id":16480923,"body_markdown":"It seems as if this could be your issue. Your if statements are just closing and not really doing its part. Also, you&#39;re variables are mixed up as well.\r\n\r\n    if (x == targetX)\r\n            ; // This will skip the If statement\r\n        originalY = x;\r\n        if (y == targetY)\r\n            ; // This will skip the If statement\r\n        originalY = y;\r\n             \r\n    }\r\n\r\nIn all reality you&#39;re saying \r\n\r\n    orginalY = x; // Y = X?\r\n    orginalY = y; // Y = Y\r\n\r\nPlease do not take this to heart. I&#39;m still having this issue as well, however I&#39;m having to do some corrections and auto placements in order for this to work correctly.","title":"Move tile by tile with dynamic speed","body":"<p>It seems as if this could be your issue. Your if statements are just closing and not really doing its part. Also, you're variables are mixed up as well.</p>\n\n<pre><code>if (x == targetX)\n        ; // This will skip the If statement\n    originalY = x;\n    if (y == targetY)\n        ; // This will skip the If statement\n    originalY = y;\n\n}\n</code></pre>\n\n<p>In all reality you're saying </p>\n\n<pre><code>orginalY = x; // Y = X?\norginalY = y; // Y = Y\n</code></pre>\n\n<p>Please do not take this to heart. I'm still having this issue as well, however I'm having to do some corrections and auto placements in order for this to work correctly.</p>\n"}],"owner":{"account_id":1288393,"reputation":45,"user_id":1240988,"accept_rate":50,"display_name":"user1240988"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":548,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1691285120,"creation_date":1368184131,"question_id":16480923,"body_markdown":"I&#39;m using java with slick2d library and trying to move tile by tile with dynamic speed. I have tried a couple methods but none of them can move with dynamic speed between the tiles. Can someone help me with that and give some examples?\r\n\r\nedit:\r\n\r\nthis two methods have I tried\r\n\r\nmove with out delta\r\n\r\n    \t\tmovementSpeed = 2;\r\n\t\t\r\n\t\t//decide direction\r\n\t\tif(targetX != x)\r\n\t\t{\r\n\t\t\tanimation.update(delta);\r\n\t\t\tif(originalX &lt; targetX)\r\n\t\t\t\tx += movementSpeed;\r\n\t\t\telse if(originalX &gt; targetX)\r\n\t\t\t\tx -= movementSpeed;\r\n\t\t}\r\n\t\tif(targetY != y)\r\n\t\t{\r\n\t\t\tanimation.update(delta);\r\n\t\t\tif(originalY &lt; targetY)\r\n\t\t\t\ty += movementSpeed;\r\n\t\t\telse if(originalY &gt; targetY)\r\n\t\t\t\ty -= movementSpeed;\r\n\t\t}\r\n\r\nlerp\r\n\r\n        public static float lerp(float start, float stop, float t)\r\n        {\r\n        \tif (t &lt; 0)\r\n        \t\treturn start;\r\n        \r\n        \treturn start + t * (stop - start);\r\n        }\r\n    \tpublic void move(long delta)\r\n    \t{\r\n        \t\tif (procentMoved == 0)\r\n    \t\t{\r\n    \t\t\tif (getSpeed(targetX, targetY) != 0)\r\n    \t\t\t{\r\n    \t\t\t\tmovementSpeed = getSpeed(targetX, targetY);\r\n    \t\t\t} else\r\n    \t\t\t{\r\n    \t\t\t\ttargetX = originalX;\r\n    \t\t\t\ttargetY = originalY;\r\n    \t\t\t}\r\n    \r\n    \t\t}\r\n    \t\tif (procentMoved &lt; 1)\r\n    \t\t{\r\n    \t\t\tanimation.update(delta);\r\n    \r\n    \t\t\t//\t\t\t\tmovementSpeed = getSpeed(targetX, targetY);\r\n    \r\n    \t\t\tprocentMoved += movementSpeed;\r\n    \r\n    \t\t} else if (procentMoved &gt; 1)\r\n    \t\t{\r\n    \t\t\tanimation.update(delta);\r\n    \t\t\t//TODO fix bouncing bug\r\n    \t\t\tprocentMoved = 1;\r\n    \t\t}\r\n    \r\n    \t\t\t\t\t+ movementSpeed);\r\n    \r\n    \t\tx = lerp(originalX, targetX, procentMoved);\r\n    \t\ty = lerp(originalY, targetY, procentMoved);\r\n    \r\n    \t\tif (x == targetX)\r\n    \t\t\t;\r\n    \t\toriginalY = x;\r\n    \t\tif (y == targetY)\r\n    \t\t\t;\r\n    \t\toriginalY = y;\r\n    }\r\n\r\n","title":"Move tile by tile with dynamic speed","body":"<p>I'm using java with slick2d library and trying to move tile by tile with dynamic speed. I have tried a couple methods but none of them can move with dynamic speed between the tiles. Can someone help me with that and give some examples?</p>\n\n<p>edit:</p>\n\n<p>this two methods have I tried</p>\n\n<p>move with out delta</p>\n\n<pre><code>        movementSpeed = 2;\n\n    //decide direction\n    if(targetX != x)\n    {\n        animation.update(delta);\n        if(originalX &lt; targetX)\n            x += movementSpeed;\n        else if(originalX &gt; targetX)\n            x -= movementSpeed;\n    }\n    if(targetY != y)\n    {\n        animation.update(delta);\n        if(originalY &lt; targetY)\n            y += movementSpeed;\n        else if(originalY &gt; targetY)\n            y -= movementSpeed;\n    }\n</code></pre>\n\n<p>lerp</p>\n\n<pre><code>    public static float lerp(float start, float stop, float t)\n    {\n        if (t &lt; 0)\n            return start;\n\n        return start + t * (stop - start);\n    }\n    public void move(long delta)\n    {\n            if (procentMoved == 0)\n        {\n            if (getSpeed(targetX, targetY) != 0)\n            {\n                movementSpeed = getSpeed(targetX, targetY);\n            } else\n            {\n                targetX = originalX;\n                targetY = originalY;\n            }\n\n        }\n        if (procentMoved &lt; 1)\n        {\n            animation.update(delta);\n\n            //              movementSpeed = getSpeed(targetX, targetY);\n\n            procentMoved += movementSpeed;\n\n        } else if (procentMoved &gt; 1)\n        {\n            animation.update(delta);\n            //TODO fix bouncing bug\n            procentMoved = 1;\n        }\n\n                    + movementSpeed);\n\n        x = lerp(originalX, targetX, procentMoved);\n        y = lerp(originalY, targetY, procentMoved);\n\n        if (x == targetX)\n            ;\n        originalY = x;\n        if (y == targetY)\n            ;\n        originalY = y;\n}\n</code></pre>\n"},{"tags":["java","eclipse","lwjgl","slick2d","unsatisfiedlinkerror"],"answers":[{"tags":[],"owner":{"account_id":1849135,"reputation":3076,"user_id":1676075,"accept_rate":50,"display_name":"user1676075"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1368308918,"creation_date":1368308918,"answer_id":16502050,"question_id":16501914,"body_markdown":"Did you check the Deployment Assembly category for project options (assuming you&#39;re using a project type that has that category)?\r\nIt&#39;s possible you updated the compile-time reference, but not the runtime reference.","title":"UnsatisfiedLinkError after changing Eclipse workspace","body":"<p>Did you check the Deployment Assembly category for project options (assuming you're using a project type that has that category)?\nIt's possible you updated the compile-time reference, but not the runtime reference.</p>\n"},{"tags":[],"owner":{"account_id":3109956,"reputation":56,"user_id":2631943,"display_name":"user2631943"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1375196509,"creation_date":1375196509,"answer_id":17950591,"question_id":16501914,"body_markdown":"When you moved the java programs, you probably didn&#39;t move the files that tell your development program where the natives are.\r\n\r\n    appgc = new AppGameContainer(new Game(gamename)); //&lt;-- This line \r\nThe UnsatisfiedLinkError was most likely thrown because LWJGL/Slick didn&#39;t have the natives required to initialize AppGameContainer. Try linking the natives.\r\n\r\n[Linking natives in Eclipse][1]\r\n\r\n[Linking natives in Netbeans][2]\r\n\r\n\r\n  [1]: http://www.youtube.com/watch?v=0v56I5UWrYY\r\n  [2]: http://www.youtube.com/watch?v=4IUAQEnYtK8\r\n","title":"UnsatisfiedLinkError after changing Eclipse workspace","body":"<p>When you moved the java programs, you probably didn't move the files that tell your development program where the natives are.</p>\n\n<pre><code>appgc = new AppGameContainer(new Game(gamename)); //&lt;-- This line \n</code></pre>\n\n<p>The UnsatisfiedLinkError was most likely thrown because LWJGL/Slick didn't have the natives required to initialize AppGameContainer. Try linking the natives.</p>\n\n<p><a href=\"http://www.youtube.com/watch?v=0v56I5UWrYY\" rel=\"nofollow\">Linking natives in Eclipse</a></p>\n\n<p><a href=\"http://www.youtube.com/watch?v=4IUAQEnYtK8\" rel=\"nofollow\">Linking natives in Netbeans</a></p>\n"}],"owner":{"account_id":1286000,"reputation":95,"user_id":1239065,"accept_rate":78,"display_name":"OffLuffy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691285109,"creation_date":1368308019,"question_id":16501914,"body_markdown":"I&#39;ve been using the lwjgl and Slick2D libraries in something I&#39;m working on. At some point I needed to split up my Minecraft Bukkit plugins from my other java programs, so I moved the java programs to another workspace. After doing this however, my project with the aformentioned libraries fail to work, giving the error:\r\n\r\n&gt; Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: no lwjgl in java.library.path\r\n\r\nThe stack trace points to where I initialize my AppGameContainer in the main() block:\r\n\r\n    AppGameContainer appgc;\r\n    \ttry{\r\n    \t\tappgc = new AppGameContainer(new Game(gamename)); // &lt;-- This line\r\n    \t\tappgc.setDisplayMode(800, 600, false);\r\n    \t\tappgc.setTargetFrameRate(FPS);\r\n    \t\tappgc.start();\r\n    \t}catch(SlickException ex){\r\n    \t\tex.printStackTrace();\r\n    \t}\r\n\r\nThis program compiled and ran perfectly fine before the workspace migration, and NOTHING has changed except the workspace location. I&#39;ve removed and re-added the library jars (via Add JAR, not Add External JAR, the jar files are in /lib/jars/, as they were before, relative to the project). I&#39;ve even attempted to re-add them as external jars, but still no luck. The compiler isn&#39;t reporting any errors prior to attempting to run the program.","title":"UnsatisfiedLinkError after changing Eclipse workspace","body":"<p>I've been using the lwjgl and Slick2D libraries in something I'm working on. At some point I needed to split up my Minecraft Bukkit plugins from my other java programs, so I moved the java programs to another workspace. After doing this however, my project with the aformentioned libraries fail to work, giving the error:</p>\n\n<blockquote>\n  <p>Exception in thread \"main\" java.lang.UnsatisfiedLinkError: no lwjgl in java.library.path</p>\n</blockquote>\n\n<p>The stack trace points to where I initialize my AppGameContainer in the main() block:</p>\n\n<pre><code>AppGameContainer appgc;\n    try{\n        appgc = new AppGameContainer(new Game(gamename)); // &lt;-- This line\n        appgc.setDisplayMode(800, 600, false);\n        appgc.setTargetFrameRate(FPS);\n        appgc.start();\n    }catch(SlickException ex){\n        ex.printStackTrace();\n    }\n</code></pre>\n\n<p>This program compiled and ran perfectly fine before the workspace migration, and NOTHING has changed except the workspace location. I've removed and re-added the library jars (via Add JAR, not Add External JAR, the jar files are in /lib/jars/, as they were before, relative to the project). I've even attempted to re-add them as external jars, but still no luck. The compiler isn't reporting any errors prior to attempting to run the program.</p>\n"},{"tags":["java","opengl","textures","lwjgl","slick2d"],"answers":[{"tags":[],"owner":{"account_id":51914,"reputation":67901,"user_id":155137,"accept_rate":91,"display_name":"Martijn Courteaux"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1377735319,"creation_date":1377730179,"answer_id":18499559,"question_id":18499531,"body_markdown":"Not sure about it, but I think you had to `glEnable(GL_TEXTURE_2D);` in this old deprecated OpenGL style. (Instead of GL_TEXTURE)\r\n\r\n**Update**: I really think you should do `glEnable(GL_TEXTURE_2D);`. Try using a gray clear color. Maybe they just turned into black squares instead of whites.\r\nSlick has a function to bind the texture (I&#39;m not sure what getTextureID returns).\r\n\r\n**Update:** Make sure you first `glBindTexture` and then `glBegin`.","title":"Java lwjgl and slick are not displaying my textures","body":"<p>Not sure about it, but I think you had to <code>glEnable(GL_TEXTURE_2D);</code> in this old deprecated OpenGL style. (Instead of GL_TEXTURE)</p>\n\n<p><strong>Update</strong>: I really think you should do <code>glEnable(GL_TEXTURE_2D);</code>. Try using a gray clear color. Maybe they just turned into black squares instead of whites.\nSlick has a function to bind the texture (I'm not sure what getTextureID returns).</p>\n\n<p><strong>Update:</strong> Make sure you first <code>glBindTexture</code> and then <code>glBegin</code>.</p>\n"},{"tags":[],"owner":{"account_id":2912338,"reputation":26,"user_id":2496277,"display_name":"Th3HolyMoose"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1388023585,"creation_date":1388023585,"answer_id":20778364,"question_id":18499531,"body_markdown":"I think your texturecoords are wrong. Try replacing with this:\r\n\r\n        GL11.glTexCoord2f(0, 0);\r\n        GL11.glVertex2f(x, y);\r\n        GL11.glTexCoord2f(1, 0);\r\n        GL11.glVertex2f(x + wood.getImageWidth(), y);\r\n        GL11.glTexCoord2f(1, 1);\r\n        GL11.glVertex2f(x + wood.getImageWidth(), y + wood.getImageHeight());\r\n        GL11.glTexCoord2f(0, 1);\r\n        GL11.glVertex2f(x, y + wood.getImageHeight());","title":"Java lwjgl and slick are not displaying my textures","body":"<p>I think your texturecoords are wrong. Try replacing with this:</p>\n\n<pre><code>    GL11.glTexCoord2f(0, 0);\n    GL11.glVertex2f(x, y);\n    GL11.glTexCoord2f(1, 0);\n    GL11.glVertex2f(x + wood.getImageWidth(), y);\n    GL11.glTexCoord2f(1, 1);\n    GL11.glVertex2f(x + wood.getImageWidth(), y + wood.getImageHeight());\n    GL11.glTexCoord2f(0, 1);\n    GL11.glVertex2f(x, y + wood.getImageHeight());\n</code></pre>\n"}],"owner":{"account_id":3232221,"reputation":3,"user_id":2727211,"display_name":"user2727211"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1147,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":18499559,"answer_count":2,"score":0,"last_activity_date":1691285063,"creation_date":1377730062,"question_id":18499531,"body_markdown":"I have tried a lot of different things, but nothing worked so far. at first, the problem was that there was just a blank screen when the program was run. I finally got it to display a blank white square. My images are 128x128 and the other is 512x512.\r\n    \r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.io.IOException;\r\n    import java.io.FileNotFoundException;\r\n    import org.lwjgl.LWJGLException;\r\n    import org.lwjgl.opengl.Display;\r\n    import org.lwjgl.opengl.DisplayMode;\r\n    import org.lwjgl.opengl.GL11;\r\n    import org.newdawn.slick.Color;\r\n    import org.newdawn.slick.opengl.Texture;\r\n    import org.newdawn.slick.opengl.TextureLoader;\r\n    import org.newdawn.slick.util.ResourceLoader;\r\n    import org.lwjgl.input.Mouse;\r\n    import java.util.Random;\r\n\r\n    public class TextureDemo\r\n    {\r\n    private static Texture wood;\r\n    Random random = new Random();\r\n        \r\n        public TextureDemo()\r\n\t{\r\n        initGL(640, 480, &quot;SLICK TEXTURES&quot;);\r\n\tloadTexture(&quot;mozilla&quot;);\r\n\t\t\r\n \tint x = 100, y = 100, count = 0, width = 0, height = 0, counter = 10;\r\n\t\t\r\n\t\twhile(true)\r\n\t\t{\r\n \t\t    count++;\r\n\t\t    if(count == counter)\r\n\t\t    {\r\n\t\t        x--; y--; width++; height++; counter += random.nextInt(50) + 1;\r\n\t\t    }\r\n\t\t\t\r\n                    render(x, y, width, height);\r\n\t\t    Display.update();\r\n\t\t    Display.sync(60);\r\n\t\t\t\r\n\t\t    if(Display.isCloseRequested())\r\n\t\t    {\r\n\t\t        wood.release();\r\n\t\t        Display.destroy();\r\n\t\t        System.exit(0);\r\n\t\t    }\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\tprivate void initGL(int width, int height, String title)\r\n\t{\r\n\t    try\r\n            {\r\n\t        Display.setDisplayMode(new DisplayMode(width, height));\r\n\t\tDisplay.setTitle(title);\r\n\t\tDisplay.create();\r\n\t    }\r\n\t    catch(LWJGLException e)\r\n\t    {\r\n\t\te.printStackTrace();\r\n\t\tDisplay.destroy();\r\n\t\tSystem.exit(1);\r\n\t    }\r\n\t\t\r\n\t\tGL11.glEnable(GL11.GL_TEXTURE);\r\n\t\tGL11.glMatrixMode(GL11.GL_PROJECTION);\r\n\t\tGL11.glLoadIdentity();\r\n\t\tGL11.glOrtho(0, width, 0, height, 1, -1);\r\n\t\tGL11.glMatrixMode(GL11.GL_MODELVIEW);\r\n\t\t\r\n\t}\r\n\r\n\r\n\tpublic void loadTexture(String key)\r\n\t{\r\n\t    try\r\n\t    {\r\n\t        wood = TextureLoader.getTexture(&quot;PNG&quot;, ResourceLoader.getResourceAsStream(&quot;./res/images/&quot;+key+&quot;.png&quot;));\r\n\t\tSystem.out.println(&quot;working.&quot; + wood.getTextureID());\r\n\t    }\r\n\t    catch(FileNotFoundException e)\r\n\t    {\r\n\t\te.printStackTrace();\r\n\t\tDisplay.destroy();\r\n\t\tSystem.exit(1);\r\n\t    }\r\n\t    catch(IOException e)\r\n\t    {\r\n\t\te.printStackTrace();\r\n\t    }\t\r\n\t}\r\n\r\n\r\n\tpublic void render(int x, int y, int width, int height)\r\n\t{\r\n\t\t\r\n\t\tGL11.glClear(GL11.GL_COLOR_BUFFER_BIT);\r\n\t\t\r\n\t\tSystem.out.println(&quot;working.&quot; + wood.getTextureID());\r\n\t\t\r\n                GL11.glBegin(GL11.GL_QUADS);\r\n\t\t   \r\n                    GL11.glBindTexture(GL11.GL_TEXTURE_2D, wood.getTextureID());\r\n\t\t    GL11.glTexCoord2f(1, 1);\r\n\t\t    GL11.glVertex2f(x, y);\r\n\t\t    GL11.glTexCoord2f(0, 1);\r\n\t\t    GL11.glVertex2f(x + wood.getImageWidth(), y);\r\n\t\t    GL11.glTexCoord2f(0, 0);\r\n\t\t    GL11.glVertex2f(x + wood.getImageWidth(), y + wood.getImageHeight());\r\n\t\t    GL11.glTexCoord2f(1, 0);\r\n\t\t    GL11.glVertex2f(x, y + wood.getImageHeight());\r\n\t\t\r\n\t\tGL11.glEnd();\r\n\t\tSystem.out.println(wood.getHeight()+ &quot; &quot; +wood.getWidth());\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n        public static void main (String[] args)\r\n\t{\r\n\t\tnew TextureDemo();\r\n\t}\r\n\t\r\n\r\n    }\r\n\r\nI just want to be able to see the png&#39;s i have in the program. Soany ideas why i&#39;m getting white images? how important is the order of the initGL method?","title":"Java lwjgl and slick are not displaying my textures","body":"<p>I have tried a lot of different things, but nothing worked so far. at first, the problem was that there was just a blank screen when the program was run. I finally got it to display a blank white square. My images are 128x128 and the other is 512x512.</p>\n\n<pre><code>import java.io.File;\nimport java.io.FileInputStream;\nimport java.io.IOException;\nimport java.io.FileNotFoundException;\nimport org.lwjgl.LWJGLException;\nimport org.lwjgl.opengl.Display;\nimport org.lwjgl.opengl.DisplayMode;\nimport org.lwjgl.opengl.GL11;\nimport org.newdawn.slick.Color;\nimport org.newdawn.slick.opengl.Texture;\nimport org.newdawn.slick.opengl.TextureLoader;\nimport org.newdawn.slick.util.ResourceLoader;\nimport org.lwjgl.input.Mouse;\nimport java.util.Random;\n\npublic class TextureDemo\n{\nprivate static Texture wood;\nRandom random = new Random();\n\n    public TextureDemo()\n{\n    initGL(640, 480, \"SLICK TEXTURES\");\nloadTexture(\"mozilla\");\n\nint x = 100, y = 100, count = 0, width = 0, height = 0, counter = 10;\n\n    while(true)\n    {\n        count++;\n        if(count == counter)\n        {\n            x--; y--; width++; height++; counter += random.nextInt(50) + 1;\n        }\n\n                render(x, y, width, height);\n        Display.update();\n        Display.sync(60);\n\n        if(Display.isCloseRequested())\n        {\n            wood.release();\n            Display.destroy();\n            System.exit(0);\n        }\n    }\n}\n\n\nprivate void initGL(int width, int height, String title)\n{\n    try\n        {\n        Display.setDisplayMode(new DisplayMode(width, height));\n    Display.setTitle(title);\n    Display.create();\n    }\n    catch(LWJGLException e)\n    {\n    e.printStackTrace();\n    Display.destroy();\n    System.exit(1);\n    }\n\n    GL11.glEnable(GL11.GL_TEXTURE);\n    GL11.glMatrixMode(GL11.GL_PROJECTION);\n    GL11.glLoadIdentity();\n    GL11.glOrtho(0, width, 0, height, 1, -1);\n    GL11.glMatrixMode(GL11.GL_MODELVIEW);\n\n}\n\n\npublic void loadTexture(String key)\n{\n    try\n    {\n        wood = TextureLoader.getTexture(\"PNG\", ResourceLoader.getResourceAsStream(\"./res/images/\"+key+\".png\"));\n    System.out.println(\"working.\" + wood.getTextureID());\n    }\n    catch(FileNotFoundException e)\n    {\n    e.printStackTrace();\n    Display.destroy();\n    System.exit(1);\n    }\n    catch(IOException e)\n    {\n    e.printStackTrace();\n    }   \n}\n\n\npublic void render(int x, int y, int width, int height)\n{\n\n    GL11.glClear(GL11.GL_COLOR_BUFFER_BIT);\n\n    System.out.println(\"working.\" + wood.getTextureID());\n\n            GL11.glBegin(GL11.GL_QUADS);\n\n                GL11.glBindTexture(GL11.GL_TEXTURE_2D, wood.getTextureID());\n        GL11.glTexCoord2f(1, 1);\n        GL11.glVertex2f(x, y);\n        GL11.glTexCoord2f(0, 1);\n        GL11.glVertex2f(x + wood.getImageWidth(), y);\n        GL11.glTexCoord2f(0, 0);\n        GL11.glVertex2f(x + wood.getImageWidth(), y + wood.getImageHeight());\n        GL11.glTexCoord2f(1, 0);\n        GL11.glVertex2f(x, y + wood.getImageHeight());\n\n    GL11.glEnd();\n    System.out.println(wood.getHeight()+ \" \" +wood.getWidth());\n\n\n}\n\n    public static void main (String[] args)\n{\n    new TextureDemo();\n}\n\n\n}\n</code></pre>\n\n<p>I just want to be able to see the png's i have in the program. Soany ideas why i'm getting white images? how important is the order of the initGL method?</p>\n"},{"tags":["java","textures","lwjgl","ram","slick2d"],"comments":[{"owner":{"account_id":915836,"reputation":6730,"user_id":948652,"accept_rate":85,"display_name":"arynaq"},"score":0,"creation_date":1380054902,"post_id":18990455,"comment_id":28055265,"body_markdown":"For how long does it use 89MB? There might be some internal processing requiring memory that is freed up at some point after your console output.","body":"For how long does it use 89MB? There might be some internal processing requiring memory that is freed up at some point after your console output."},{"owner":{"account_id":3089585,"reputation":371,"user_id":2616012,"accept_rate":83,"display_name":"Thomas Flynn"},"score":0,"creation_date":1380109024,"post_id":18990455,"comment_id":28074927,"body_markdown":"It uses the 89MB until the Game is closed.","body":"It uses the 89MB until the Game is closed."}],"owner":{"account_id":3089585,"reputation":371,"user_id":2616012,"accept_rate":83,"display_name":"Thomas Flynn"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":244,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691285053,"creation_date":1380051212,"question_id":18990455,"body_markdown":"If I use the Slick-Util to load textures into LWJGL it uses a lot of RAM. Here an example with the console-output:\r\n\r\n    Message.info ((Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory()) / 1000000 + &quot;MB&quot;);\r\n    TextureManager.loadTexture(&quot;gui.wallpaper&quot;, &quot;resources/wallpaper.jpg&quot;);\r\n    Message.info ((Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory()) / 1000000 + &quot;MB&quot;);\r\n\r\nThe &quot;TextureManager.loadTexture(...)&quot; method is the following:\r\n\r\n\tString textureFileFormat;\r\n\tif (thePath.contains(&quot;png&quot;)) {\r\n\t\ttextureFileFormat = &quot;PNG&quot;;\r\n\t} else if (thePath.contains(&quot;jpg&quot;)) {\r\n\t\ttextureFileFormat = &quot;JPG&quot;;\r\n\t} else if (thePath.contains(&quot;jpeg&quot;)) {\r\n\t\ttextureFileFormat = &quot;JPG&quot;;\r\n\t} else {\r\n\t\ttextureFileFormat = &quot;PNG&quot;;\r\n\t}\r\n\r\n\ttheTexture = TextureLoader.getTexture(textureFileFormat, new FileInputStream(thePath), true);\r\n\r\n\t// === Store it onto the HashTable === //\r\n\ttextures.put(theName, theTexture);\r\n\r\nThis uses (like viewable in the console output) quit 80 MB. Why? The &quot;wallpaper.jpg&quot; is just 290KB lage!\r\n\r\nWhat is wrong?\r\n\r\nThis is the console output:\r\n\r\n    2013-09-24 21:32:40 [INFO] [CLIENT] 4MB\r\n    Tue Sep 24 21:32:40 CEST 2013 INFO:Use Java PNG Loader = true\r\n    2013-09-24 21:32:41 [INFO] [CLIENT] 89MB\r\n\r\nI hope, that somebody of you know a solution.","title":"LWJGL with Slick-Util use a lot of RAM to load texture","body":"<p>If I use the Slick-Util to load textures into LWJGL it uses a lot of RAM. Here an example with the console-output:</p>\n\n<pre><code>Message.info ((Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory()) / 1000000 + \"MB\");\nTextureManager.loadTexture(\"gui.wallpaper\", \"resources/wallpaper.jpg\");\nMessage.info ((Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory()) / 1000000 + \"MB\");\n</code></pre>\n\n<p>The \"TextureManager.loadTexture(...)\" method is the following:</p>\n\n<pre><code>String textureFileFormat;\nif (thePath.contains(\"png\")) {\n    textureFileFormat = \"PNG\";\n} else if (thePath.contains(\"jpg\")) {\n    textureFileFormat = \"JPG\";\n} else if (thePath.contains(\"jpeg\")) {\n    textureFileFormat = \"JPG\";\n} else {\n    textureFileFormat = \"PNG\";\n}\n\ntheTexture = TextureLoader.getTexture(textureFileFormat, new FileInputStream(thePath), true);\n\n// === Store it onto the HashTable === //\ntextures.put(theName, theTexture);\n</code></pre>\n\n<p>This uses (like viewable in the console output) quit 80 MB. Why? The \"wallpaper.jpg\" is just 290KB lage!</p>\n\n<p>What is wrong?</p>\n\n<p>This is the console output:</p>\n\n<pre><code>2013-09-24 21:32:40 [INFO] [CLIENT] 4MB\nTue Sep 24 21:32:40 CEST 2013 INFO:Use Java PNG Loader = true\n2013-09-24 21:32:41 [INFO] [CLIENT] 89MB\n</code></pre>\n\n<p>I hope, that somebody of you know a solution.</p>\n"},{"tags":["java","lwjgl","collision","slick2d"],"comments":[{"owner":{"account_id":2879629,"reputation":23886,"user_id":2470818,"accept_rate":82,"display_name":"vallentin"},"score":0,"creation_date":1381425483,"post_id":19286540,"comment_id":28584888,"body_markdown":"Your `CanMove` method is either wrongly named or else you return the wrong value, since if the character intersects with the wall you tell it to return true, which actually should be false. Last time I checked you can&#39;t move if you&#39;re facing a wall.","body":"Your <code>CanMove</code> method is either wrongly named or else you return the wrong value, since if the character intersects with the wall you tell it to return true, which actually should be false. Last time I checked you can&#39;t move if you&#39;re facing a wall."}],"answers":[{"tags":[],"owner":{"account_id":3403175,"reputation":22394,"user_id":2854908,"accept_rate":95,"display_name":"libik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1381375736,"creation_date":1381375736,"answer_id":19286571,"question_id":19286540,"body_markdown":"the common way how to do this is to count the one step forward before its happens and then decide if you can move or you cant.\r\n\r\nSo you simulate your movement, count intersecting and if it would be true, you dont move with your character.","title":"Java basic collision logic with shapes","body":"<p>the common way how to do this is to count the one step forward before its happens and then decide if you can move or you cant.</p>\n\n<p>So you simulate your movement, count intersecting and if it would be true, you dont move with your character.</p>\n"}],"owner":{"account_id":2662391,"reputation":11,"user_id":2301752,"display_name":"user2301752"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":175,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691285028,"creation_date":1381375473,"question_id":19286540,"body_markdown":"I have an array which contains shapes (Rectangles) and then another shape which when it collides with a shape in the array I want it to not be able to pass, so the array of shapes is basically an array of walls that the shape can&#39;t pass through. Here is how I&#39;m currently trying to do it (example of W key):\r\n\r\n\tprivate boolean CanMove() { \r\n\t\tfor(Shape wall : mazeWalls) {\r\n\t\t\tif(character.intersects(wall)) \r\n\r\n\t\t\t\treturn true;\r\n\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n    if (keyInput.isKeyDown(keyInput.KEY_W)) {\r\n\t\t\tfor(int i = 0; i &lt;= MoveSpeed; i++) {\r\n\t\t\t\tchar_y--;\r\n\t\t\t      if(CanMove()) {\r\n\t\t\t\t\tchar_y++;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} \r\nThe array of shapes is very small so I&#39;m checking it all - Right now it will stop but it will be stuck in the wall and unable to backout/go in any other direction. It simply becomes lodged into the wall. If anybody has a better way at doing this I&#39;m using Slick and LWJGL or a solution I would be very grateful. Thanks. ","title":"Java basic collision logic with shapes","body":"<p>I have an array which contains shapes (Rectangles) and then another shape which when it collides with a shape in the array I want it to not be able to pass, so the array of shapes is basically an array of walls that the shape can't pass through. Here is how I'm currently trying to do it (example of W key):</p>\n\n<pre><code>private boolean CanMove() { \n    for(Shape wall : mazeWalls) {\n        if(character.intersects(wall)) \n\n            return true;\n\n    }\n    return false;\n}\n\nif (keyInput.isKeyDown(keyInput.KEY_W)) {\n        for(int i = 0; i &lt;= MoveSpeed; i++) {\n            char_y--;\n              if(CanMove()) {\n                char_y++;\n                break;\n            }\n        }\n    } \n</code></pre>\n\n<p>The array of shapes is very small so I'm checking it all - Right now it will stop but it will be stuck in the wall and unable to backout/go in any other direction. It simply becomes lodged into the wall. If anybody has a better way at doing this I'm using Slick and LWJGL or a solution I would be very grateful. Thanks. </p>\n"},{"tags":["java","swing","applet","lwjgl","slick2d"],"answers":[{"tags":[],"owner":{"account_id":3470719,"reputation":1,"user_id":2905107,"display_name":"Glenn Meter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1382399974,"creation_date":1382399974,"answer_id":19506824,"question_id":19445745,"body_markdown":"We had the same crash as you.  Switching over to use JNLP fixed it:\r\n\r\n(1) Create a JNLP file for your applet. See http://docs.oracle.com/javase/tutorial/deployment/applet/deployingApplet.html.  If/when you make changes to your applet, you may need to clear the JNLP cache to get them to take (execute &quot;javaws -uninstall&quot; at a command line). \r\n\r\n(2) Change the &lt;applet/&gt; tag to use the jnlp_href tag instead of the archive and codebase tags. Point it to the .jnlp file you created in (1).  See:\r\nhttp://docs.oracle.com/javase/tutorial/deployment/applet/html.html\r\n\r\nThis fixed the crash for us. Note that in the attempt to fix the crash, we also updated the manifest file to use the Codebase, Application-Library-Allowable-Codebase, Caller-Allowable-Codebase and Permissions fields. But the crash still happened until we switched over to using JNLP.","title":"Lwjgl applet loader crash, RuntimeExceptoin: java.lang.Reflect.InvocationException","body":"<p>We had the same crash as you.  Switching over to use JNLP fixed it:</p>\n\n<p>(1) Create a JNLP file for your applet. See <a href=\"http://docs.oracle.com/javase/tutorial/deployment/applet/deployingApplet.html\" rel=\"nofollow\">http://docs.oracle.com/javase/tutorial/deployment/applet/deployingApplet.html</a>.  If/when you make changes to your applet, you may need to clear the JNLP cache to get them to take (execute \"javaws -uninstall\" at a command line). </p>\n\n<p>(2) Change the  tag to use the jnlp_href tag instead of the archive and codebase tags. Point it to the .jnlp file you created in (1).  See:\n<a href=\"http://docs.oracle.com/javase/tutorial/deployment/applet/html.html\" rel=\"nofollow\">http://docs.oracle.com/javase/tutorial/deployment/applet/html.html</a></p>\n\n<p>This fixed the crash for us. Note that in the attempt to fix the crash, we also updated the manifest file to use the Codebase, Application-Library-Allowable-Codebase, Caller-Allowable-Codebase and Permissions fields. But the crash still happened until we switched over to using JNLP.</p>\n"}],"owner":{"account_id":2113783,"reputation":635,"user_id":1878494,"accept_rate":41,"display_name":"Maarten"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1021,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691285017,"creation_date":1382087305,"question_id":19445745,"body_markdown":"I am trying to run my LWJGL applet and I get these error&#39;s no idea what this means.\r\n\r\nThis is an screenshot of my file hierarchy.\r\n\r\n![File hierarchy][1]\r\n\r\n  [1]: http://i.stack.imgur.com/EPMgx.png\r\n\r\nThis is my the content of my html file.\r\n\r\n    &lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;\r\n    &lt;html&gt;\r\n      &lt;head&gt;\r\n        &lt;title&gt;AppletLoader&lt;/title&gt;\r\n      &lt;/head&gt;\r\n      &lt;body&gt;\r\n     \r\n      &lt;applet code=&quot;org.lwjgl.util.applet.AppletLoader&quot; archive=&quot;lwjgl_util_applet.jar, lzma.jar&quot; codebase=&quot;.&quot; width=&quot;347&quot; height=&quot;355&quot;&gt;\r\n     \r\n        &lt;!-- The following tags are mandatory --&gt;\r\n     \r\n        &lt;!-- Name of Applet, will be used as name of directory it is saved in, and will uniquely identify it in cache --&gt;\r\n        &lt;param name=&quot;al_title&quot; value=&quot;Sudoku&quot;&gt;\r\n     \r\n        &lt;!-- Main Applet Class --&gt;\r\n        &lt;param name=&quot;al_main&quot; value=&quot;sud.main.MainClass&quot;&gt;\r\n     \r\n        &lt;!-- logo to paint while loading, will be centered --&gt;\r\n        &lt;!--param name=&quot;al_logo&quot; value=&quot;appletlogo.png&quot;&gt;\r\n     \r\n       &lt;!-- progressbar to paint while loading. Will be painted on top of logo, width clipped to percentage done --&gt;\r\n        &lt;!--param name=&quot;al_progressbar&quot; value=&quot;appletprogress.gif&quot;&gt;\r\n     \r\n       &lt;!-- List of Jars to add to classpath --&gt;\r\n        &lt;param name=&quot;al_jars&quot; value=&quot;sudoku.jar, lwjgl_applet.jar.pack.lzma, lwjgl.jar.pack.lzma, jinput.jar.pack.lzma, lwjgl_util.jar.pack.lzma, slick.jar&quot;&gt;\r\n     \r\n        &lt;!-- signed windows natives jar in a jar --&gt;\r\n        &lt;param name=&quot;al_windows&quot; value=&quot;windows_natives.jar.lzma&quot;&gt;\r\n     \r\n        &lt;!-- signed linux natives jar in a jar --&gt;\r\n        &lt;param name=&quot;al_linux&quot; value=&quot;linux_natives.jar.lzma&quot;&gt;\r\n     \r\n        &lt;!-- signed mac osx natives jar in a jar --&gt;\r\n        &lt;param name=&quot;al_mac&quot; value=&quot;macosx_natives.jar.lzma&quot;&gt;\r\n     \r\n        &lt;!-- signed solaris natives jar in a jar --&gt;\r\n        &lt;param name=&quot;al_solaris&quot; value=&quot;solaris_natives.jar.lzma&quot;&gt;\r\n     \r\n        &lt;!-- Tags under here are optional --&gt;\r\n     \r\n        &lt;!-- Version of Applet, important otherwise applet won&#39;t be cached, version change will update applet, must be int or float --&gt;\r\n        &lt;!-- &lt;param name=&quot;al_version&quot; value=&quot;0.1&quot;&gt; --&gt;\r\n     \r\n        &lt;!-- whether to use cache - defaults to true --&gt;\r\n        &lt;!-- &lt;param name=&quot;al_cache&quot; value=&quot;true&quot;&gt; --&gt;\r\n     \r\n        &lt;!-- background color to paint with, defaults to white --&gt;\r\n        &lt;!-- &lt;param name=&quot;boxbgcolor&quot; value=&quot;#000000&quot;&gt; --&gt;\r\n     \r\n        &lt;!-- foreground color to paint with, defaults to black --&gt;\r\n        &lt;!-- &lt;param name=&quot;boxfgcolor&quot; value=&quot;#ffffff&quot;&gt; --&gt;\r\n     \r\n        &lt;!-- whether to run in debug mode --&gt;\r\n        &lt;!-- &lt;param name=&quot;al_debug&quot; value=&quot;true&quot;&gt; --&gt;\r\n     \r\n        &lt;!-- whether to prepend host to cache path - defaults to true --&gt;\r\n        &lt;!-- &lt;param name=&quot;al_prepend_host&quot; value=&quot;true&quot;&gt; --&gt;\r\n     \r\n        &lt;!-- main applet specific params --&gt;\r\n     \r\n       &lt;param name=&quot;separate_jvm&quot; value=&quot;true&quot;&gt;\r\n      &lt;/applet&gt;\r\n     \r\n      &lt;p&gt;\r\n        if &lt;code&gt;al_debug&lt;/code&gt; is true the applet will load and extract resources with a delay, to be able to see the loader process.\r\n      &lt;/p&gt;\r\n     \r\n      &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nAnd this is the error it returns.\r\n\r\n    network: Cache entry not found [url: file:/C:/Users/Rose/Desktop/Applet%20Test/lwjgl_util_applet.jar, version: null]\r\n    basic: exception: java.lang.reflect.InvocationTargetException.\r\n    java.lang.RuntimeException: java.lang.reflect.InvocationTargetException\r\n            at sun.plugin2.applet.Plugin2ClassLoader.defineClassHelper(Unknown Source)\r\n            at sun.plugin2.applet.Plugin2ClassLoader.access$100(Unknown Source)\r\n            at sun.plugin2.applet.Plugin2ClassLoader$2.run(Unknown Source)\r\n            at java.security.AccessController.doPrivileged(Native Method)\r\n            at sun.plugin2.applet.Plugin2ClassLoader.findClassHelper(Unknown Source)\r\n            at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)\r\n            at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)\r\n            at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)\r\n            at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)\r\n            at java.lang.ClassLoader.loadClass(Unknown Source)\r\n            at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Unknown Source)\r\n            at sun.plugin2.applet.Plugin2Manager.initAppletAdapter(Unknown Source)\r\n            at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)\r\n            at java.lang.Thread.run(Unknown Source)\r\n    Caused by: java.lang.reflect.InvocationTargetException\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n            at java.lang.reflect.Method.invoke(Unknown Source)\r\n            ... 14 more\r\n    Caused by: java.lang.NullPointerException\r\n            at sun.plugin2.applet.Plugin2ClassLoader.loadAllowedCodebases(Unknown Source)\r\n            at sun.plugin2.applet.Plugin2ClassLoader.getPermissions(Unknown Source)\r\n            at sun.plugin2.applet.Applet2ClassLoader.getPermissions(Unknown Source)\r\n            at java.security.SecureClassLoader.getProtectionDomain(Unknown Source)\r\n            at java.security.SecureClassLoader.defineClass(Unknown Source)\r\n            at java.net.URLClassLoader.defineClass(Unknown Source)\r\n            ... 18 more\r\n    Ignored exception: java.lang.RuntimeException: java.lang.reflect.InvocationTargetException\r\n    basic: Dialog type is not candidate for embedding\r\n    basic: Removed progress listener: sun.plugin.util.ProgressMonitorAdapter@1cb8654\r\n    security: Reset deny session certificate store\r\n\r\nAsk me anything that is needed to be asked.","title":"Lwjgl applet loader crash, RuntimeExceptoin: java.lang.Reflect.InvocationException","body":"<p>I am trying to run my LWJGL applet and I get these error's no idea what this means.</p>\n\n<p>This is an screenshot of my file hierarchy.</p>\n\n<p><img src=\"https://i.stack.imgur.com/EPMgx.png\" alt=\"File hierarchy\"></p>\n\n<p>This is my the content of my html file.</p>\n\n<pre><code>&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\"&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;AppletLoader&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n\n  &lt;applet code=\"org.lwjgl.util.applet.AppletLoader\" archive=\"lwjgl_util_applet.jar, lzma.jar\" codebase=\".\" width=\"347\" height=\"355\"&gt;\n\n    &lt;!-- The following tags are mandatory --&gt;\n\n    &lt;!-- Name of Applet, will be used as name of directory it is saved in, and will uniquely identify it in cache --&gt;\n    &lt;param name=\"al_title\" value=\"Sudoku\"&gt;\n\n    &lt;!-- Main Applet Class --&gt;\n    &lt;param name=\"al_main\" value=\"sud.main.MainClass\"&gt;\n\n    &lt;!-- logo to paint while loading, will be centered --&gt;\n    &lt;!--param name=\"al_logo\" value=\"appletlogo.png\"&gt;\n\n   &lt;!-- progressbar to paint while loading. Will be painted on top of logo, width clipped to percentage done --&gt;\n    &lt;!--param name=\"al_progressbar\" value=\"appletprogress.gif\"&gt;\n\n   &lt;!-- List of Jars to add to classpath --&gt;\n    &lt;param name=\"al_jars\" value=\"sudoku.jar, lwjgl_applet.jar.pack.lzma, lwjgl.jar.pack.lzma, jinput.jar.pack.lzma, lwjgl_util.jar.pack.lzma, slick.jar\"&gt;\n\n    &lt;!-- signed windows natives jar in a jar --&gt;\n    &lt;param name=\"al_windows\" value=\"windows_natives.jar.lzma\"&gt;\n\n    &lt;!-- signed linux natives jar in a jar --&gt;\n    &lt;param name=\"al_linux\" value=\"linux_natives.jar.lzma\"&gt;\n\n    &lt;!-- signed mac osx natives jar in a jar --&gt;\n    &lt;param name=\"al_mac\" value=\"macosx_natives.jar.lzma\"&gt;\n\n    &lt;!-- signed solaris natives jar in a jar --&gt;\n    &lt;param name=\"al_solaris\" value=\"solaris_natives.jar.lzma\"&gt;\n\n    &lt;!-- Tags under here are optional --&gt;\n\n    &lt;!-- Version of Applet, important otherwise applet won't be cached, version change will update applet, must be int or float --&gt;\n    &lt;!-- &lt;param name=\"al_version\" value=\"0.1\"&gt; --&gt;\n\n    &lt;!-- whether to use cache - defaults to true --&gt;\n    &lt;!-- &lt;param name=\"al_cache\" value=\"true\"&gt; --&gt;\n\n    &lt;!-- background color to paint with, defaults to white --&gt;\n    &lt;!-- &lt;param name=\"boxbgcolor\" value=\"#000000\"&gt; --&gt;\n\n    &lt;!-- foreground color to paint with, defaults to black --&gt;\n    &lt;!-- &lt;param name=\"boxfgcolor\" value=\"#ffffff\"&gt; --&gt;\n\n    &lt;!-- whether to run in debug mode --&gt;\n    &lt;!-- &lt;param name=\"al_debug\" value=\"true\"&gt; --&gt;\n\n    &lt;!-- whether to prepend host to cache path - defaults to true --&gt;\n    &lt;!-- &lt;param name=\"al_prepend_host\" value=\"true\"&gt; --&gt;\n\n    &lt;!-- main applet specific params --&gt;\n\n   &lt;param name=\"separate_jvm\" value=\"true\"&gt;\n  &lt;/applet&gt;\n\n  &lt;p&gt;\n    if &lt;code&gt;al_debug&lt;/code&gt; is true the applet will load and extract resources with a delay, to be able to see the loader process.\n  &lt;/p&gt;\n\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>And this is the error it returns.</p>\n\n<pre><code>network: Cache entry not found [url: file:/C:/Users/Rose/Desktop/Applet%20Test/lwjgl_util_applet.jar, version: null]\nbasic: exception: java.lang.reflect.InvocationTargetException.\njava.lang.RuntimeException: java.lang.reflect.InvocationTargetException\n        at sun.plugin2.applet.Plugin2ClassLoader.defineClassHelper(Unknown Source)\n        at sun.plugin2.applet.Plugin2ClassLoader.access$100(Unknown Source)\n        at sun.plugin2.applet.Plugin2ClassLoader$2.run(Unknown Source)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at sun.plugin2.applet.Plugin2ClassLoader.findClassHelper(Unknown Source)\n        at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)\n        at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)\n        at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)\n        at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)\n        at java.lang.ClassLoader.loadClass(Unknown Source)\n        at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Unknown Source)\n        at sun.plugin2.applet.Plugin2Manager.initAppletAdapter(Unknown Source)\n        at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)\n        at java.lang.Thread.run(Unknown Source)\nCaused by: java.lang.reflect.InvocationTargetException\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.lang.reflect.Method.invoke(Unknown Source)\n        ... 14 more\nCaused by: java.lang.NullPointerException\n        at sun.plugin2.applet.Plugin2ClassLoader.loadAllowedCodebases(Unknown Source)\n        at sun.plugin2.applet.Plugin2ClassLoader.getPermissions(Unknown Source)\n        at sun.plugin2.applet.Applet2ClassLoader.getPermissions(Unknown Source)\n        at java.security.SecureClassLoader.getProtectionDomain(Unknown Source)\n        at java.security.SecureClassLoader.defineClass(Unknown Source)\n        at java.net.URLClassLoader.defineClass(Unknown Source)\n        ... 18 more\nIgnored exception: java.lang.RuntimeException: java.lang.reflect.InvocationTargetException\nbasic: Dialog type is not candidate for embedding\nbasic: Removed progress listener: sun.plugin.util.ProgressMonitorAdapter@1cb8654\nsecurity: Reset deny session certificate store\n</code></pre>\n\n<p>Ask me anything that is needed to be asked.</p>\n"},{"tags":["java","arraylist"],"comments":[{"owner":{"account_id":1113291,"reputation":4336,"user_id":1103287,"accept_rate":89,"display_name":"sve"},"score":0,"creation_date":1382736848,"post_id":19599734,"comment_id":29092494,"body_markdown":"What are you try to do? What is your algorithm supposed to do?","body":"What are you try to do? What is your algorithm supposed to do?"},{"owner":{"account_id":2522287,"reputation":1571,"user_id":2192409,"accept_rate":100,"display_name":"Tdorno"},"score":3,"creation_date":1382736854,"post_id":19599734,"comment_id":29092499,"body_markdown":"This seems like a great time to learn how to [debug](http://www.vogella.com/articles/EclipseDebugging/article.html)!","body":"This seems like a great time to learn how to <a href=\"http://www.vogella.com/articles/EclipseDebugging/article.html\" rel=\"nofollow noreferrer\">debug</a>!"},{"owner":{"account_id":3393940,"reputation":1717,"user_id":2848117,"accept_rate":100,"display_name":"Dom"},"score":0,"creation_date":1382736873,"post_id":19599734,"comment_id":29092508,"body_markdown":"I don&#39;t see any loops. Also i is set to 0 each time XCordPasted is called so i only will ever become 1 based on your if else statements and lack of loops in the method.","body":"I don&#39;t see any loops. Also i is set to 0 each time XCordPasted is called so i only will ever become 1 based on your if else statements and lack of loops in the method."},{"owner":{"account_id":1593181,"reputation":5129,"user_id":1476062,"display_name":"Dennis Meng"},"score":0,"creation_date":1382736896,"post_id":19599734,"comment_id":29092513,"body_markdown":"Also, how big are the numbers? `if(XCord.get(g-1)==XCord.get(g)){` might be biting you.","body":"Also, how big are the numbers? <code>if(XCord.get(g-1)==XCord.get(g)){</code> might be biting you."}],"answers":[{"tags":[],"owner":{"account_id":3475676,"reputation":858,"user_id":2908941,"accept_rate":50,"display_name":"asaini007"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1382737244,"creation_date":1382737244,"answer_id":19599843,"question_id":19599734,"body_markdown":"I have a few thoughts on your code (without knowing its purpose):\r\n\r\n`public static ArrayList&lt;Integer&gt; XCordPasted(int Row, int Column){`\r\n\r\nRow and Column shouldn&#39;t be capitalized.\r\n\r\n`int statRow = row;`\r\n\r\nWhat&#39;s the point of creating a new variable `statrow` that is the same as `row`? Also, why use the name `row` when that&#39;s already the name of one of the parameters of the method?\r\n\r\n    if(XCord.isEmpty()){\r\n        XCord.add(i,statRow);\r\n            i=1;\r\n    } else{\r\n        XCord.add(i,statRow);\r\n        i++;\r\n    }\r\n\r\nAt this point in the code, XCord must be empty. There is no reason to have `if` and `else` statements. Perhaps you meant to have a loop here?\r\n\r\n    if(XCord.size()&gt;1){\r\n        if(XCord.get(g-1)==XCord.get(g)){\r\n            XCord.remove(g);\r\n            i=XCord.size();\r\n        }\r\n    }\r\n\r\nAt this point in the code, XCord must have a size of 1. The condition inside the `if` statement must be false, so it doesn&#39;t do what&#39;s inside the block of code.\r\n\r\nTherefore, the return simply returns an `XCord` with one element: `statrow`.\r\n\r\nPlease update your question to say what the method is meant to do. I notice one of the parameters isn&#39;t even used (`int Column` - which also should be lowercase, incidentally).","title":"Integer doesn&#39;t increase when working with ArrayList","body":"<p>I have a few thoughts on your code (without knowing its purpose):</p>\n\n<p><code>public static ArrayList&lt;Integer&gt; XCordPasted(int Row, int Column){</code></p>\n\n<p>Row and Column shouldn't be capitalized.</p>\n\n<p><code>int statRow = row;</code></p>\n\n<p>What's the point of creating a new variable <code>statrow</code> that is the same as <code>row</code>? Also, why use the name <code>row</code> when that's already the name of one of the parameters of the method?</p>\n\n<pre><code>if(XCord.isEmpty()){\n    XCord.add(i,statRow);\n        i=1;\n} else{\n    XCord.add(i,statRow);\n    i++;\n}\n</code></pre>\n\n<p>At this point in the code, XCord must be empty. There is no reason to have <code>if</code> and <code>else</code> statements. Perhaps you meant to have a loop here?</p>\n\n<pre><code>if(XCord.size()&gt;1){\n    if(XCord.get(g-1)==XCord.get(g)){\n        XCord.remove(g);\n        i=XCord.size();\n    }\n}\n</code></pre>\n\n<p>At this point in the code, XCord must have a size of 1. The condition inside the <code>if</code> statement must be false, so it doesn't do what's inside the block of code.</p>\n\n<p>Therefore, the return simply returns an <code>XCord</code> with one element: <code>statrow</code>.</p>\n\n<p>Please update your question to say what the method is meant to do. I notice one of the parameters isn't even used (<code>int Column</code> - which also should be lowercase, incidentally).</p>\n"},{"tags":[],"owner":{"account_id":378959,"reputation":19465,"user_id":834316,"accept_rate":82,"display_name":"PNS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1382738654,"creation_date":1382737380,"answer_id":19599883,"question_id":19599734,"body_markdown":"Maybe posting more details of the program would help clarify the overall logic. :-)\r\n\r\nUntil then, based on the posted code, every time the `XCordPasted()` method is called, the `XCord` value is initialized to a new `ArrayList`, so the conditional statement\r\n\r\n    if (XCord.isEmpty())\r\n    {\r\n        ...\r\n    }\r\n\r\nis always `true`, thus the returned `ArrayList` always has exactly 1 member and the `int i` parameter will always be set to `1`.\r\n\r\nAlso, the `int g` parameter is only set once to `i` (= 0), so it will always have a value of `0`. If the condition `(XCord.size()&gt;1)` were ever to be true, there would have been an `ArrayIndexOutOfBoundsException` because of the `XCord.get(g-1)` call. ","title":"Integer doesn&#39;t increase when working with ArrayList","body":"<p>Maybe posting more details of the program would help clarify the overall logic. :-)</p>\n\n<p>Until then, based on the posted code, every time the <code>XCordPasted()</code> method is called, the <code>XCord</code> value is initialized to a new <code>ArrayList</code>, so the conditional statement</p>\n\n<pre><code>if (XCord.isEmpty())\n{\n    ...\n}\n</code></pre>\n\n<p>is always <code>true</code>, thus the returned <code>ArrayList</code> always has exactly 1 member and the <code>int i</code> parameter will always be set to <code>1</code>.</p>\n\n<p>Also, the <code>int g</code> parameter is only set once to <code>i</code> (= 0), so it will always have a value of <code>0</code>. If the condition <code>(XCord.size()&gt;1)</code> were ever to be true, there would have been an <code>ArrayIndexOutOfBoundsException</code> because of the <code>XCord.get(g-1)</code> call. </p>\n"}],"owner":{"account_id":3487611,"reputation":21,"user_id":2918098,"display_name":"user2918098"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1383561290,"answer_count":2,"score":0,"last_activity_date":1691284986,"creation_date":1382736618,"question_id":19599734,"body_markdown":"The int i doesn&#39;t seem to be increasing, and while or for loops don&#39;t seem to work in the array. What is the reason for this? The row changes whenever I click, and I&#39;m trying to get the row # in an arraylist. \r\n\r\n\tpublic static ArrayList&lt;Integer&gt; XCordPasted(int Row, int Column){\r\n\r\n\t\tArrayList&lt;Integer&gt; XCord = new ArrayList&lt;Integer&gt;();\r\n\r\n\t\tint row = Row * (int)NumWidthTextures;\r\n\t\tint statRow = row;\r\n\t\tint i = 0;\r\n\t\tint g = i;\r\n\r\n\t\tif(XCord.isEmpty()){\r\n\t\t\tXCord.add(i,statRow);\r\n\t\t\ti=1;\r\n\t\t}else{\r\n\t\t\tXCord.add(i,statRow);\r\n\t\t\ti++;\r\n\t\t}\r\n\t\tif(XCord.size()&gt;1){\r\n\t\t\tif(XCord.get(g-1)==XCord.get(g)){\r\n\t\t\t\tXCord.remove(g);\r\n\t\t\t\ti=XCord.size();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn XCord;\r\n\t}","title":"Integer doesn&#39;t increase when working with ArrayList","body":"<p>The int i doesn't seem to be increasing, and while or for loops don't seem to work in the array. What is the reason for this? The row changes whenever I click, and I'm trying to get the row # in an arraylist. </p>\n\n<pre><code>public static ArrayList&lt;Integer&gt; XCordPasted(int Row, int Column){\n\n    ArrayList&lt;Integer&gt; XCord = new ArrayList&lt;Integer&gt;();\n\n    int row = Row * (int)NumWidthTextures;\n    int statRow = row;\n    int i = 0;\n    int g = i;\n\n    if(XCord.isEmpty()){\n        XCord.add(i,statRow);\n        i=1;\n    }else{\n        XCord.add(i,statRow);\n        i++;\n    }\n    if(XCord.size()&gt;1){\n        if(XCord.get(g-1)==XCord.get(g)){\n            XCord.remove(g);\n            i=XCord.size();\n        }\n    }\n    return XCord;\n}\n</code></pre>\n"},{"tags":["java","lwjgl","slick2d"],"answers":[{"tags":[],"owner":{"account_id":3847330,"reputation":16,"user_id":3188425,"display_name":"user3188425"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1568164611,"creation_date":1389565872,"answer_id":21081118,"question_id":20365205,"body_markdown":"Is your texture a power of 2 (POT) image? (for example 512x512 pixels). This could be the cause of the distortion.\r\n\r\nAlso try inverting your texcoord arguments. This would fix the upside down part.\r\nI might also noticed a wrong argument\r\n\r\n                glTexCoord2f(1, 1);\r\n                glVertex2i(640, 0);\r\n                glTexCoord2f(0, 1);\r\n                glVertex2i(0, 0);\r\n                glTexCoord2f(0, 0);\r\n                glVertex2i(0, 480);\r\n\r\n                glTexCoord2f(0, 0);\r\n                glVertex2i(0, 480);\r\n                glTexCoord2f(1, 0);\r\n                glVertex2i(640, 480);  // &lt;--- this line was 640,640?\r\n                glTexCoord2f(1, 1);\r\n                glVertex2i(640, 0);\r\n\r\nTexture coordinates in openGL are handled upside down like this:\r\n\r\n[![Texture coordinates][1]][1]  \n&lt;sub&gt;(source: [learnopengles.com](http://www.learnopengles.com/wordpress/wp-content/uploads/2011/09/texture-coordinates.png))&lt;/sub&gt;  \n\r\n\r\n[1]: https://i.stack.imgur.com/L7AfD.png","title":"More problems with Slick, LWJGL textures","body":"<p>Is your texture a power of 2 (POT) image? (for example 512x512 pixels). This could be the cause of the distortion.</p>\n\n<p>Also try inverting your texcoord arguments. This would fix the upside down part.\nI might also noticed a wrong argument</p>\n\n<pre><code>            glTexCoord2f(1, 1);\n            glVertex2i(640, 0);\n            glTexCoord2f(0, 1);\n            glVertex2i(0, 0);\n            glTexCoord2f(0, 0);\n            glVertex2i(0, 480);\n\n            glTexCoord2f(0, 0);\n            glVertex2i(0, 480);\n            glTexCoord2f(1, 0);\n            glVertex2i(640, 480);  // &lt;--- this line was 640,640?\n            glTexCoord2f(1, 1);\n            glVertex2i(640, 0);\n</code></pre>\n\n<p>Texture coordinates in openGL are handled upside down like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/L7AfD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/L7AfD.png\" alt=\"Texture coordinates\"></a><br>\n<sub>(source: <a href=\"http://www.learnopengles.com/wordpress/wp-content/uploads/2011/09/texture-coordinates.png\" rel=\"nofollow noreferrer\">learnopengles.com</a>)</sub>  </p>\n"}],"owner":{"account_id":3674438,"reputation":3,"user_id":3060832,"display_name":"user3060832"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":166,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":21081118,"answer_count":1,"score":0,"last_activity_date":1691284932,"creation_date":1386121009,"question_id":20365205,"body_markdown":"So I have successfully imported textures into my game, but they are upside down, distorted and also off-centre.\r\n\r\nThe code can also be found here: http://pastebin.com/nvWMZqpX\r\n\r\nIf anyone could help it would be greatly appreciated.\r\n\r\n    public class Main {\r\n      \r\n        private Texture sky;\r\n     \r\n        public Main() {\r\n     \r\n            try {\r\n                Display.setDisplayMode(new DisplayMode(640, 480));\r\n                Display.setTitle(&quot;Spark&quot;);\r\n                Display.create();\r\n     \r\n                sky = TextureLoader.getTexture(&quot;PNG&quot;, new FileInputStream(new File(&quot;resources/textures/sky.png&quot;))); \r\n     \r\n                while(!Display.isCloseRequested()) {\r\n     \r\n                    setCamera();\r\n     \r\n                    sky.bind();\r\n                    glEnable(GL_TEXTURE_2D);\r\n                    glBegin(GL_QUADS);\r\n                    glColor3d(1, 1, 1);\r\n     \r\n                    glTexCoord2f(1, 0);\r\n                    glVertex2i(640, 0);\r\n                    glTexCoord2f(0, 0);\r\n                    glVertex2i(0, 0);\r\n                    glTexCoord2f(0, 1);\r\n                    glVertex2i(0, 480);\r\n     \r\n                    glTexCoord2f(0, 1);\r\n                    glVertex2i(0, 480);\r\n                    glTexCoord2f(1, 1);\r\n                    glVertex2i(640, 640);\r\n                    glTexCoord2f(1, 0);\r\n                    glVertex2i(640, 0);\r\n     \r\n                    glEnd();\r\n                    glDisable(GL_TEXTURE_2D);\r\n     \r\n                    Display.update();\r\n                    Display.sync(60);\r\n                }\r\n                sky.release();\r\n                Display.destroy();\r\n            }   catch (LWJGLException e) {\r\n                e.printStackTrace();\r\n            }   catch(IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n     \r\n        public static void main(String[] args) {\r\n            new Main();\r\n        }\r\n     \r\n     \r\n        public static void setCamera() {\r\n     \r\n            //Clear Screen\r\n            glClear(GL_COLOR_BUFFER_BIT);\r\n            //Modifying the projection matrix\r\n            glMatrixMode(GL_PROJECTION);\r\n            glLoadIdentity();\r\n            glOrtho(0, 640, 0, 480, -1, 1);\r\n            //Modify modelviewing matrix\r\n            glMatrixMode(GL_MODELVIEW);\r\n            glLoadIdentity();\r\n     \r\n        }\r\n    }","title":"More problems with Slick, LWJGL textures","body":"<p>So I have successfully imported textures into my game, but they are upside down, distorted and also off-centre.</p>\n\n<p>The code can also be found here: <a href=\"http://pastebin.com/nvWMZqpX\" rel=\"nofollow\">http://pastebin.com/nvWMZqpX</a></p>\n\n<p>If anyone could help it would be greatly appreciated.</p>\n\n<pre><code>public class Main {\n\n    private Texture sky;\n\n    public Main() {\n\n        try {\n            Display.setDisplayMode(new DisplayMode(640, 480));\n            Display.setTitle(\"Spark\");\n            Display.create();\n\n            sky = TextureLoader.getTexture(\"PNG\", new FileInputStream(new File(\"resources/textures/sky.png\"))); \n\n            while(!Display.isCloseRequested()) {\n\n                setCamera();\n\n                sky.bind();\n                glEnable(GL_TEXTURE_2D);\n                glBegin(GL_QUADS);\n                glColor3d(1, 1, 1);\n\n                glTexCoord2f(1, 0);\n                glVertex2i(640, 0);\n                glTexCoord2f(0, 0);\n                glVertex2i(0, 0);\n                glTexCoord2f(0, 1);\n                glVertex2i(0, 480);\n\n                glTexCoord2f(0, 1);\n                glVertex2i(0, 480);\n                glTexCoord2f(1, 1);\n                glVertex2i(640, 640);\n                glTexCoord2f(1, 0);\n                glVertex2i(640, 0);\n\n                glEnd();\n                glDisable(GL_TEXTURE_2D);\n\n                Display.update();\n                Display.sync(60);\n            }\n            sky.release();\n            Display.destroy();\n        }   catch (LWJGLException e) {\n            e.printStackTrace();\n        }   catch(IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public static void main(String[] args) {\n        new Main();\n    }\n\n\n    public static void setCamera() {\n\n        //Clear Screen\n        glClear(GL_COLOR_BUFFER_BIT);\n        //Modifying the projection matrix\n        glMatrixMode(GL_PROJECTION);\n        glLoadIdentity();\n        glOrtho(0, 640, 0, 480, -1, 1);\n        //Modify modelviewing matrix\n        glMatrixMode(GL_MODELVIEW);\n        glLoadIdentity();\n\n    }\n}\n</code></pre>\n"},{"tags":["java","opengl","lwjgl","slick2d"],"comments":[{"owner":{"account_id":984819,"reputation":4401,"user_id":1003615,"accept_rate":72,"display_name":"a.lasram"},"score":0,"creation_date":1390875465,"post_id":21395520,"comment_id":32272127,"body_markdown":"old OpenGL and old hardware were limited to po2 textures because it&#39;s simpler to tile or swizzle the texture (for spatial coherency). see http://fgiesen.wordpress.com/2011/01/17/texture-tiling-and-swizzling/","body":"old OpenGL and old hardware were limited to po2 textures because it&#39;s simpler to tile or swizzle the texture (for spatial coherency). see <a href=\"http://fgiesen.wordpress.com/2011/01/17/texture-tiling-and-swizzling/\" rel=\"nofollow noreferrer\">fgiesen.wordpress.com/2011/01/17/texture-tiling-and-swizzlin&zwnj;&#8203;g</a>"},{"owner":{"account_id":3914698,"reputation":469,"user_id":3238865,"accept_rate":77,"display_name":"grey00"},"score":0,"creation_date":1390875951,"post_id":21395520,"comment_id":32272275,"body_markdown":"So theres no real workaround?","body":"So theres no real workaround?"},{"owner":{"account_id":984819,"reputation":4401,"user_id":1003615,"accept_rate":72,"display_name":"a.lasram"},"score":0,"creation_date":1390877392,"post_id":21395520,"comment_id":32272695,"body_markdown":"There are always workarounds. You should show and image with the geometry, the distortions and possibly a code showing your uv&#39;s. The problem is likely unrelated to the support of non-po2 textures.","body":"There are always workarounds. You should show and image with the geometry, the distortions and possibly a code showing your uv&#39;s. The problem is likely unrelated to the support of non-po2 textures."},{"owner":{"account_id":2552515,"reputation":3386,"user_id":2216021,"display_name":"Prabindh"},"score":0,"creation_date":1390879620,"post_id":21395520,"comment_id":32273304,"body_markdown":"What class are you using in lwjgl for using the GL functionality ?","body":"What class are you using in lwjgl for using the GL functionality ?"},{"owner":{"account_id":248772,"reputation":159853,"user_id":524368,"accept_rate":83,"display_name":"datenwolf"},"score":0,"creation_date":1390892028,"post_id":21395520,"comment_id":32277235,"body_markdown":"@a.lasram: That being said, OpenGL-2 and later no longer has this limitation.","body":"@a.lasram: That being said, OpenGL-2 and later no longer has this limitation."},{"owner":{"account_id":1838495,"reputation":1481,"user_id":1668421,"accept_rate":100,"display_name":"the-lay"},"score":0,"creation_date":1391158836,"post_id":21395520,"comment_id":32413260,"body_markdown":"Check out this SO answer, it has workarounds: https://stackoverflow.com/questions/10568106/texture-doesnt-stretch-properly-why-is-this-happening","body":"Check out this SO answer, it has workarounds: <a href=\"https://stackoverflow.com/questions/10568106/texture-doesnt-stretch-properly-why-is-this-happening\" title=\"texture doesnt stretch properly why is this happening\">stackoverflow.com/questions/10568106/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":248772,"reputation":159853,"user_id":524368,"accept_rate":83,"display_name":"datenwolf"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1390892157,"creation_date":1390892157,"answer_id":21398836,"question_id":21395520,"body_markdown":"My guess would be, that your unpack alignment is set improperly. The default alignment is 4 bytes. And power of 2 sized images usually fullfill that requirement.\r\n\r\nTry what happens if you add a call `glPixelStorei(GL_UNPACK_ALIGNMENT, 1)` right before calling `glTexImage` or `glTexSubImage`.","title":"Why does opengl only render correctly if texture sizes are powers of 2?","body":"<p>My guess would be, that your unpack alignment is set improperly. The default alignment is 4 bytes. And power of 2 sized images usually fullfill that requirement.</p>\n\n<p>Try what happens if you add a call <code>glPixelStorei(GL_UNPACK_ALIGNMENT, 1)</code> right before calling <code>glTexImage</code> or <code>glTexSubImage</code>.</p>\n"}],"owner":{"account_id":3914698,"reputation":469,"user_id":3238865,"accept_rate":77,"display_name":"grey00"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691284909,"creation_date":1390874742,"question_id":21395520,"body_markdown":"When I load a texture using slick-util and render it using lwjgl&#39;s opengl, it is highly distorted unless the length and width of the texture are both powers of 2. Why is this?","title":"Why does opengl only render correctly if texture sizes are powers of 2?","body":"<p>When I load a texture using slick-util and render it using lwjgl's opengl, it is highly distorted unless the length and width of the texture are both powers of 2. Why is this?</p>\n"},{"tags":["java","textures","lwjgl","slick2d"],"comments":[{"owner":{"account_id":4131121,"reputation":362,"user_id":3389035,"display_name":"Veme"},"score":0,"creation_date":1394326281,"post_id":22263288,"comment_id":33840980,"body_markdown":"For everyone, you should just use texture.release(); The most easiest thing every, how much time lost.","body":"For everyone, you should just use texture.release(); The most easiest thing every, how much time lost."}],"owner":{"account_id":4131121,"reputation":362,"user_id":3389035,"display_name":"Veme"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":412,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691284896,"creation_date":1394238526,"question_id":22263288,"body_markdown":"\r\nI&#39;m writing a game project. I have got a lot of textures and animation, so I have to delete some textures. For example, I don&#39;t want to use textures from Main Menu when I play.\r\n\r\nI use simple:\r\n\r\n    Texture texture;\r\n    texture = TextureLoader.getTexture(&quot;PNG&quot;, ResourceLoader.getResourceAsStream(path));\r\n\r\nAnd for drawing:\r\n\r\n    texture.bind();\r\n    glBegin(GL_QUADS);\r\n     glTexCoord2f(0,0); glVertex2f(0,0);\r\n     glTexCoord2f(1,0); glVertex2f(1,0);\r\n     glTexCoord2f(1,1); glVertex2f(1,1);\r\n     glTexCoord2f(0,1); glVertex2f(0,1);\r\n    glEnd();\r\n\r\nFor example, in Main Menu I load some textures, and I want to play, so I go to the Play screen, which shouldn&#39;t use Main Menu textures. Those textures from the Main Menu screen are still in memory. I&#39;ve got some of them and it is about 30Mb RAM - I don&#39;t want them, so I should delete them. So now, I want ask, is there any way to delete those textures? I read about it much, but I still don&#39;t have an answer.","title":"LWJGL/Slick2D - How to delete texture?","body":"<p>I'm writing a game project. I have got a lot of textures and animation, so I have to delete some textures. For example, I don't want to use textures from Main Menu when I play.</p>\n\n<p>I use simple:</p>\n\n<pre><code>Texture texture;\ntexture = TextureLoader.getTexture(\"PNG\", ResourceLoader.getResourceAsStream(path));\n</code></pre>\n\n<p>And for drawing:</p>\n\n<pre><code>texture.bind();\nglBegin(GL_QUADS);\n glTexCoord2f(0,0); glVertex2f(0,0);\n glTexCoord2f(1,0); glVertex2f(1,0);\n glTexCoord2f(1,1); glVertex2f(1,1);\n glTexCoord2f(0,1); glVertex2f(0,1);\nglEnd();\n</code></pre>\n\n<p>For example, in Main Menu I load some textures, and I want to play, so I go to the Play screen, which shouldn't use Main Menu textures. Those textures from the Main Menu screen are still in memory. I've got some of them and it is about 30Mb RAM - I don't want them, so I should delete them. So now, I want ask, is there any way to delete those textures? I read about it much, but I still don't have an answer.</p>\n"},{"tags":["java","lwjgl","slick2d"],"comments":[{"owner":{"account_id":2849152,"reputation":6709,"user_id":2446698,"accept_rate":60,"display_name":"CodeCamper"},"score":0,"creation_date":1397423402,"post_id":23048451,"comment_id":35216397,"body_markdown":"when you add a negative sign to each delta thereby reversing the controls does it still have the same effect?","body":"when you add a negative sign to each delta thereby reversing the controls does it still have the same effect?"},{"owner":{"account_id":2815806,"reputation":145,"user_id":2420916,"accept_rate":100,"display_name":"Joe Tannoury"},"score":0,"creation_date":1397423835,"post_id":23048451,"comment_id":35216516,"body_markdown":"it moves my player to the other side but always going up and right are slower.. thats interesting, still the same effect","body":"it moves my player to the other side but always going up and right are slower.. thats interesting, still the same effect"},{"owner":{"account_id":2849152,"reputation":6709,"user_id":2446698,"accept_rate":60,"display_name":"CodeCamper"},"score":1,"creation_date":1397424029,"post_id":23048451,"comment_id":35216575,"body_markdown":"The problem might be somewhere `PlayerX` and `PlayerY` is handled. Going to have to see that code. You don&#39;t have any sort of gravity or wind right? You can always put in the intro of the game that there is a very strong north-eastward gust.","body":"The problem might be somewhere <code>PlayerX</code> and <code>PlayerY</code> is handled. Going to have to see that code. You don&#39;t have any sort of gravity or wind right? You can always put in the intro of the game that there is a very strong north-eastward gust."},{"owner":{"account_id":2815806,"reputation":145,"user_id":2420916,"accept_rate":100,"display_name":"Joe Tannoury"},"score":0,"creation_date":1397425797,"post_id":23048451,"comment_id":35217069,"body_markdown":"No there isnt any kind of that :P. There is now a link to the code of the game, if you have time you can get a sneak peek :)","body":"No there isnt any kind of that :P. There is now a link to the code of the game, if you have time you can get a sneak peek :)"}],"answers":[{"tags":[],"owner":{"account_id":2849152,"reputation":6709,"user_id":2446698,"accept_rate":60,"display_name":"CodeCamper"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1397426551,"creation_date":1397426551,"answer_id":23048973,"question_id":23048451,"body_markdown":"      //Setting the original PlayerX and PlayerY values\r\n        private static int PlayerX = Game.ScreenLength/2;\r\n        private static int PlayerY = Game.ScreenHeight/2; \r\n\r\n**vs**\r\n\r\n       if(input.isKeyDown(Input.KEY_W)){\r\n            PlayerY += delta * .1f;\r\n        }\r\n        if(input.isKeyDown(Input.KEY_S)){\r\n            PlayerY -= delta * .1f;\r\n        }\r\n          \r\n        if(input.isKeyDown(Input.KEY_A)){\r\n            PlayerX -= delta * .1f;\r\n        }\r\n        if(input.isKeyDown(Input.KEY_D)){\r\n            PlayerX += delta * .1f;\r\n        } \r\n\r\nSee the problem yet? Change PlayerX and PlayerY(Delta too just in case) to floats and your problem will be solved. Remember when you convert from float to int it always will round down.","title":"Moving a sprite to the left or down is faster than moving it to the right or up","body":"<pre><code>  //Setting the original PlayerX and PlayerY values\n    private static int PlayerX = Game.ScreenLength/2;\n    private static int PlayerY = Game.ScreenHeight/2; \n</code></pre>\n\n<p><strong>vs</strong></p>\n\n<pre><code>   if(input.isKeyDown(Input.KEY_W)){\n        PlayerY += delta * .1f;\n    }\n    if(input.isKeyDown(Input.KEY_S)){\n        PlayerY -= delta * .1f;\n    }\n\n    if(input.isKeyDown(Input.KEY_A)){\n        PlayerX -= delta * .1f;\n    }\n    if(input.isKeyDown(Input.KEY_D)){\n        PlayerX += delta * .1f;\n    } \n</code></pre>\n\n<p>See the problem yet? Change PlayerX and PlayerY(Delta too just in case) to floats and your problem will be solved. Remember when you convert from float to int it always will round down.</p>\n"}],"owner":{"account_id":2815806,"reputation":145,"user_id":2420916,"accept_rate":100,"display_name":"Joe Tannoury"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":412,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":23048973,"answer_count":1,"score":2,"last_activity_date":1691284882,"creation_date":1397423134,"question_id":23048451,"body_markdown":"I am making a basic game with **Slick2D** and **LWGJL** but I am having a wierd issue that when i&#39;m moving my player(an image) to the left/down it is slower than moving to the right/up.\r\n\r\n\r\n    Input input = gc.getInput();\r\n\t\t\r\n\t\tif(input.isKeyDown(Input.KEY_W)){\r\n\t\t\tPlayerY += delta * .1f;\r\n\t    }\r\n\t\tif(input.isKeyDown(Input.KEY_S)){\r\n\t\t\tPlayerY -= delta * .1f;\r\n\t    }\r\n\t\t\r\n\t\tif(input.isKeyDown(Input.KEY_A)){\r\n\t\t\tPlayerX -= delta * .1f;\r\n\t    }\r\n\t\tif(input.isKeyDown(Input.KEY_D)){\r\n\t\t\tPlayerX += delta * .1f;\r\n\t    }\r\n\r\nAll of this code is in the method **update()**\r\n\r\n**Edit:** All of my code can be viewed in here &lt;https://www.dropbox.com/sh/p13sbxucmni36vd/K5XTaNOulm&gt;\r\n\r\n\r\nAny help will be appreciated","title":"Moving a sprite to the left or down is faster than moving it to the right or up","body":"<p>I am making a basic game with <strong>Slick2D</strong> and <strong>LWGJL</strong> but I am having a wierd issue that when i'm moving my player(an image) to the left/down it is slower than moving to the right/up.</p>\n\n<pre><code>Input input = gc.getInput();\n\n    if(input.isKeyDown(Input.KEY_W)){\n        PlayerY += delta * .1f;\n    }\n    if(input.isKeyDown(Input.KEY_S)){\n        PlayerY -= delta * .1f;\n    }\n\n    if(input.isKeyDown(Input.KEY_A)){\n        PlayerX -= delta * .1f;\n    }\n    if(input.isKeyDown(Input.KEY_D)){\n        PlayerX += delta * .1f;\n    }\n</code></pre>\n\n<p>All of this code is in the method <strong>update()</strong></p>\n\n<p><strong>Edit:</strong> All of my code can be viewed in here <a href=\"https://www.dropbox.com/sh/p13sbxucmni36vd/K5XTaNOulm\" rel=\"nofollow\">https://www.dropbox.com/sh/p13sbxucmni36vd/K5XTaNOulm</a></p>\n\n<p>Any help will be appreciated</p>\n"},{"tags":["java","image-processing","png","lwjgl","slick2d"],"answers":[{"tags":[],"owner":{"account_id":3093821,"reputation":53931,"user_id":3182664,"accept_rate":55,"display_name":"Marco13"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1399916305,"creation_date":1399910349,"answer_id":23613661,"question_id":23610295,"body_markdown":"That&#39;s way too much code for anyone to read or debug. But regarding the actual problem: AFAIK, the Slick PNG loader only supports very few PNG file types (somehow related to performance when reading them, but that may be a myth...). It should be possible to load the image with something like\r\n\r\n    // &quot;Image&quot; here refers to a Slick Image, and NOT to java.awt.Image!\r\n    private static Image loadImage(String path) throws IOException\r\n    {\r\n        BufferedImage bufferedImage = ImageIO.read(new File(path));\r\n        Texture texture = BufferedImageUtil.getTexture(&quot;&quot;, bufferedImage);\r\n        Image image = new Img(texture.getImageWidth(), texture.getImageHeight());\r\n        image.setTexture(texture); \r\n        return image;\r\n    }\r\n","title":"Slick PNGDecoder Error - java.lang.UnsupportedOperationException: Unsupported format for this image","body":"<p>That's way too much code for anyone to read or debug. But regarding the actual problem: AFAIK, the Slick PNG loader only supports very few PNG file types (somehow related to performance when reading them, but that may be a myth...). It should be possible to load the image with something like</p>\n\n<pre><code>// \"Image\" here refers to a Slick Image, and NOT to java.awt.Image!\nprivate static Image loadImage(String path) throws IOException\n{\n    BufferedImage bufferedImage = ImageIO.read(new File(path));\n    Texture texture = BufferedImageUtil.getTexture(\"\", bufferedImage);\n    Image image = new Img(texture.getImageWidth(), texture.getImageHeight());\n    image.setTexture(texture); \n    return image;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7435885,"reputation":31,"user_id":5655348,"display_name":"mazakk94"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1465501529,"creation_date":1465501529,"answer_id":37734900,"question_id":23610295,"body_markdown":"I had the same error when loading PNG Image using Slick-util library. The only thing I did was opening PNG file to Paint (Yes, Windows image editor) and saving as new PNG image. The problem was probably connected with type of PNG image ([PNG Basics][2]) and Paint saves it as some other type.\r\n\r\nMy function looked like below (took from [Loading Images for LWJGL][1]):\r\n\r\n\r\n    public int loadTexture(String fileName) {\r\n    Texture texture = null;\r\n    try {                \r\n        texture = TextureLoader.getTexture(&quot;PNG&quot;, ResourceLoader.getResourceAsStream(&quot;res/&quot; + fileName + &quot;.png&quot;));\r\n                         \r\n        GL30.glGenerateMipmap(GL11.GL_TEXTURE_2D);\r\n        GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_MIN_FILTER,\r\n                            GL11.GL_LINEAR_MIPMAP_LINEAR);\r\n        GL11.glTexParameterf(GL11.GL_TEXTURE_2D, GL14.GL_TEXTURE_LOD_BIAS, 0f);\r\n    } catch (Exception e) {\r\n        e.printStackTrace();\r\n        System.err.println(&quot;Tried to load texture &quot; + fileName + &quot;.png , didn&#39;t work&quot;);\r\n        System.exit(-1);\r\n    }\r\n        textures.add(texture.getTextureID());\r\n        return texture.getTextureID();\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n  [1]: http://wiki.lwjgl.org/wiki/Slick-Util_Library_-_Part_1_-_Loading_Images_for_LWJGL\r\n  [2]: http://www.libpng.org/pub/png/book/chapter08.html","title":"Slick PNGDecoder Error - java.lang.UnsupportedOperationException: Unsupported format for this image","body":"<p>I had the same error when loading PNG Image using Slick-util library. The only thing I did was opening PNG file to Paint (Yes, Windows image editor) and saving as new PNG image. The problem was probably connected with type of PNG image (<a href=\"http://www.libpng.org/pub/png/book/chapter08.html\" rel=\"nofollow\">PNG Basics</a>) and Paint saves it as some other type.</p>\n\n<p>My function looked like below (took from <a href=\"http://wiki.lwjgl.org/wiki/Slick-Util_Library_-_Part_1_-_Loading_Images_for_LWJGL\" rel=\"nofollow\">Loading Images for LWJGL</a>):</p>\n\n<pre><code>public int loadTexture(String fileName) {\nTexture texture = null;\ntry {                \n    texture = TextureLoader.getTexture(\"PNG\", ResourceLoader.getResourceAsStream(\"res/\" + fileName + \".png\"));\n\n    GL30.glGenerateMipmap(GL11.GL_TEXTURE_2D);\n    GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_MIN_FILTER,\n                        GL11.GL_LINEAR_MIPMAP_LINEAR);\n    GL11.glTexParameterf(GL11.GL_TEXTURE_2D, GL14.GL_TEXTURE_LOD_BIAS, 0f);\n} catch (Exception e) {\n    e.printStackTrace();\n    System.err.println(\"Tried to load texture \" + fileName + \".png , didn't work\");\n    System.exit(-1);\n}\n    textures.add(texture.getTextureID());\n    return texture.getTextureID();\n}\n</code></pre>\n"}],"owner":{"account_id":4163852,"reputation":1,"user_id":3413287,"display_name":"othinolis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2802,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1691284873,"creation_date":1399901062,"question_id":23610295,"body_markdown":"I&#39;m making a simple little Galaga clone in Java with the Slick library. Unfortunately, I&#39;ve run into an issue in which I get this error, followed by the game closing:\r\n\r\n    Mon May 12 08:54:32 EDT 2014 WARN:class org.newdawn.slick.opengl.PNGImageData failed to\r\n    read the data\r\n    java.lang.UnsupportedOperationException: Unsupported format for this image\r\n    at org.newdawn.slick.opengl.PNGDecoder.decode(PNGDecoder.java:272)\r\n    at org.newdawn.slick.opengl.PNGImageData.loadImage(PNGImageData.java:97)\r\n        at org.newdawn.slick.opengl.CompositeImageData.loadImage(CompositeImageData.\r\n        java:62)\r\n        at org.newdawn.slick.opengl.CompositeImageData.loadImage(CompositeImageData.\r\n        java:43)\r\n        at org.newdawn.slick.opengl.InternalTextureLoader.getTexture(InternalTextureLoader.\r\n        java:292)\r\n        at org.newdawn.slick.opengl.InternalTextureLoader.getTexture(InternalTextureLoader.\r\n        java:254)\r\n    at org.newdawn.slick.opengl.InternalTextureLoader.getTexture(InternalTextureLoader.\r\n        java:187)\r\n    at org.newdawn.slick.Image.&lt;init&gt;(Image.java:192)\r\n    at org.newdawn.slick.Image.&lt;init&gt;(Image.java:166)\r\n    at org.newdawn.slick.Image.&lt;init&gt;(Image.java:154)\r\n    at org.newdawn.slick.Image.&lt;init&gt;(Image.java:132)\r\n    at com.othinolis.danmaku.Play.init(Play.java:21)\r\n    at com.othinolis.danmaku.Game.initStatesList(Game.java:20)\r\n    at org.newdawn.slick.state.StateBasedGame.init(StateBasedGame.java:164)\r\n    at org.newdawn.slick.AppGameContainer.setup(AppGameContainer.java:393)\r\n    at org.newdawn.slick.AppGameContainer.start(AppGameContainer.java:317)\r\n    at com.othinolis.danmaku.Game.main(Game.java:29)\r\n    Mon May 12 08:54:35 EDT 2014 ERROR:null\r\n    java.lang.NullPointerException\r\n    at com.othinolis.danmaku.Play.render(Play.java:32)\r\n    at org.newdawn.slick.state.StateBasedGame.render(StateBasedGame.java:199)\r\n    at org.newdawn.slick.GameContainer.updateAndRender(GameContainer.java:688)\r\n    at org.newdawn.slick.AppGameContainer.gameLoop(AppGameContainer.java:411)\r\n    at org.newdawn.slick.AppGameContainer.start(AppGameContainer.java:321)\r\n    at com.othinolis.danmaku.Game.main(Game.java:29)\r\n    Mon May 12 08:54:35 EDT 2014 ERROR:Game.render() failure - check the game code.\r\n    org.newdawn.slick.SlickException: Game.render() failure - check the game code.\r\n    at org.newdawn.slick.GameContainer.updateAndRender(GameContainer.java:691)\r\n    at org.newdawn.slick.AppGameContainer.gameLoop(AppGameContainer.java:411)\r\n    at org.newdawn.slick.AppGameContainer.start(AppGameContainer.java:321)\r\n    at com.othinolis.danmaku.Game.main(Game.java:29)\r\n\r\nThis happens after I attempt to move states from the main menu and into the game proper, when PNGs are first loaded. All of my resources are PNGs. Here&#39;s my other class files:\r\n\r\nGame.java:\r\n\r\n    package com.othinolis.danmaku;\r\n    \r\n    import org.newdawn.slick.*;\r\n    import org.newdawn.slick.state.*;\r\n    \r\n    public class Game extends StateBasedGame{\r\n       \r\n       public static final String gamename = &quot;Danmaku Courage&quot;;\r\n       public static final int menu = 0;\r\n       public static final int play = 1;\r\n       \r\n       public Game(String gamename){\r\n          super(gamename);\r\n          this.addState(new Menu(menu));\r\n          this.addState(new Play(play));\r\n       }\r\n       \r\n       public void initStatesList(GameContainer gc) throws SlickException{\r\n          this.getState(menu).init(gc, this);\r\n          this.getState(play).init(gc, this);\r\n          this.enterState(menu);\r\n       }\r\n       \r\n       public static void main(String[] args) {\r\n          AppGameContainer appgc;\r\n          try{\r\n             appgc = new AppGameContainer(new Game(gamename));\r\n             appgc.setDisplayMode(600, 600, false);\r\n             appgc.start();\r\n          }catch(SlickException e){\r\n             e.printStackTrace();\r\n          }\r\n       }\r\n    \r\n    }\r\n\r\nMenu.java (state 0, runs with no issues):\r\n\r\n    package com.othinolis.danmaku;\r\n    \r\n    import org.lwjgl.input.Mouse;\r\n    import org.newdawn.slick.*;\r\n    import org.newdawn.slick.state.*;\r\n    \r\n    public class Menu extends BasicGameState{\r\n       \r\n       Image playNow;\r\n       Image exitGame;\r\n       \r\n       public Menu(int state){\r\n       }\r\n       \r\n       public void init(GameContainer gc, StateBasedGame sbg) throws SlickException{\r\n          playNow = new Image(&quot;res/playButton.png&quot;);\r\n          exitGame = new Image(&quot;res/exitGame.png&quot;);\r\n       }\r\n       \r\n       public void render(GameContainer gc, StateBasedGame sbg, Graphics g) throws SlickException{\r\n          g.drawString(&quot;Danmaku Courage&quot;, 230, 50);\r\n          g.drawString(&quot;mousex: &quot; + Mouse.getX() + &quot; mousey: &quot; + Mouse.getY(), 300, 400);\r\n          playNow.draw(200,100);\r\n          exitGame.draw(200,200);\r\n       }\r\n       \r\n       public void update(GameContainer gc, StateBasedGame sbg, int delta) throws SlickException{\r\n          int posX = Mouse.getX();\r\n          int posY = Mouse.getY();\r\n          //play now button\r\n          if((posX&gt;237 &amp;&amp; posX&lt;364)&amp;&amp;(posY&gt;425 &amp;&amp; posY&lt;460)){\r\n             if(Mouse.isButtonDown(0)){\r\n                sbg.enterState(1);\r\n             }\r\n          }\r\n          \r\n          //exit game\r\n          if((posX&gt;254 &amp;&amp; posX&lt;335)&amp;&amp;(posY&gt;338 &amp;&amp; posY&lt;361)){\r\n             if(Mouse.isButtonDown(0)){\r\n                System.exit(0);\r\n             }\r\n          }\r\n       }\r\n       \r\n       public int getID(){\r\n          return 0;\r\n       }\r\n    }\r\n\r\nand Play.java (moving between Menu and Play is where the issue hits. The numbers for collisions with the side of the screen and what have you may not be exact.):\r\n\r\n    package com.othinolis.danmaku;\r\n    \r\n    import org.newdawn.slick.*;\r\n    import org.newdawn.slick.state.*;\r\n    \r\n    public class Play extends BasicGameState{\r\n    \r\n       Animation player, movingLeft, movingRight; //2 animations, player will be set to one\r\n       Image worldMap;\r\n       boolean quit = false;\r\n       int[] duration = {200,200}; //length of the frame\r\n       float playerPositionX = 0; //player will start at coordinates 0,0\r\n       float playerPositionY = 0;\r\n       float shiftX = buckyPositionX + 320; //this will shift the screen so bucky appears in middle\r\n       float shiftY = buckyPositionY + 160; //half the length and half the width of the screen\r\n       \r\n       public Play(int state){\r\n       }\r\n       \r\n       public void init(GameContainer gc, StateBasedGame sbg) throws SlickException{\r\n          worldMap = new Image(&quot;res/background.png&quot;);\r\n          Image[] walkLeft = {new Image(&quot;res/player.png&quot;), new Image(&quot;res/player.png&quot;)};\r\n          Image[] walkRight = {new Image(&quot;res/player.png&quot;), new Image(&quot;res/player.png&quot;)};\r\n          \r\n          movingLeft = new Animation(walkLeft, duration, false);\r\n          movingRight = new Animation(walkRight, duration, false);\r\n          player = movingDown; //by default as soon as game loads, player will be facing down\r\n       }\r\n       \r\n       public void render(GameContainer gc, StateBasedGame sbg, Graphics g) throws SlickException{\r\n          worldMap.draw(buckyPositionX,buckyPositionY); //draw the map at 0,0 to start\r\n          player.draw(shiftX,shiftY); //draw player at 320, 160 (center of the screen)\r\n          g.drawString(&quot;player&#39;s X: &quot;+playerPositionX+&quot;\\nplayer&#39;s Y: &quot;+playerPositionY, 400, 20); //indicator to see where player is\r\n          \r\n          //when they press escape\r\n          if(quit==true){\r\n             g.drawString(&quot;Resume (R)&quot;, 250, 100);\r\n             g.drawString(&quot;Main Menu (M)&quot;, 250, 150);\r\n             g.drawString(&quot;Quit Game (Q)&quot;, 250, 200);\r\n             if(quit==false){\r\n                g.clear();\r\n             }\r\n          }\r\n       }\r\n       \r\n       public void update(GameContainer gc, StateBasedGame sbg, int delta) throws SlickException{\r\n          Input input = gc.getInput();\r\n          if(input.isKeyDown(Input.KEY_LEFT)){\r\n             player = movingLeft;\r\n             playerPositionX += delta * .1f;\r\n             if(playerPositionX&gt;324){\r\n                playerPositionX -= delta * .1f;\r\n             }\r\n          }\r\n          if(input.isKeyDown(Input.KEY_RIGHT)){\r\n             player = movingRight;\r\n             playerPositionX -= delta * .1f;\r\n             if(playerPositionX&lt;-840){\r\n                playerPositionX += delta * .1f;\r\n             }\r\n          }\r\n          \r\n          //escape\r\n          if(input.isKeyDown(Input.KEY_ESCAPE)){\r\n             quit = true;\r\n          }      \r\n          \r\n          //when they hit escape\r\n          if(quit==true){\r\n             if(input.isKeyDown(Input.KEY_R)){\r\n                quit = false;\r\n             }\r\n             if(input.isKeyDown(Input.KEY_M)){\r\n                sbg.enterState(0);\r\n                try{\r\n                   Thread.sleep(250);\r\n                }catch(InterruptedException e){\r\n                   e.printStackTrace();\r\n                }\r\n             }\r\n             if(input.isKeyDown(Input.KEY_Q)){\r\n                System.exit(0);\r\n             }\r\n          }\r\n       }\r\n       \r\n       public int getID(){\r\n          return 1;\r\n       }\r\n    }\r\n\r\nWhat I know of slick has come from the several Forum posts I&#39;ve read about issues like this one, (none of them had the exact issue nor the solution, of course) and Bucky&#39;s Slick tutorials that are &lt;a href=&quot;https://www.youtube.com/playlist?list=PL210C2267A8922854&quot;&gt;here&lt;/a&gt;. If you&#39;d like to download the project so you can import it and see if you can help me, I&#39;ve thrown it onto Dropbox &lt;a href=&quot;https://www.dropbox.com/s/x9snel0rrlr18yv/shmup%20proj.zip&quot;&gt;here&lt;/a&gt;.","title":"Slick PNGDecoder Error - java.lang.UnsupportedOperationException: Unsupported format for this image","body":"<p>I'm making a simple little Galaga clone in Java with the Slick library. Unfortunately, I've run into an issue in which I get this error, followed by the game closing:</p>\n\n<pre><code>Mon May 12 08:54:32 EDT 2014 WARN:class org.newdawn.slick.opengl.PNGImageData failed to\nread the data\njava.lang.UnsupportedOperationException: Unsupported format for this image\nat org.newdawn.slick.opengl.PNGDecoder.decode(PNGDecoder.java:272)\nat org.newdawn.slick.opengl.PNGImageData.loadImage(PNGImageData.java:97)\n    at org.newdawn.slick.opengl.CompositeImageData.loadImage(CompositeImageData.\n    java:62)\n    at org.newdawn.slick.opengl.CompositeImageData.loadImage(CompositeImageData.\n    java:43)\n    at org.newdawn.slick.opengl.InternalTextureLoader.getTexture(InternalTextureLoader.\n    java:292)\n    at org.newdawn.slick.opengl.InternalTextureLoader.getTexture(InternalTextureLoader.\n    java:254)\nat org.newdawn.slick.opengl.InternalTextureLoader.getTexture(InternalTextureLoader.\n    java:187)\nat org.newdawn.slick.Image.&lt;init&gt;(Image.java:192)\nat org.newdawn.slick.Image.&lt;init&gt;(Image.java:166)\nat org.newdawn.slick.Image.&lt;init&gt;(Image.java:154)\nat org.newdawn.slick.Image.&lt;init&gt;(Image.java:132)\nat com.othinolis.danmaku.Play.init(Play.java:21)\nat com.othinolis.danmaku.Game.initStatesList(Game.java:20)\nat org.newdawn.slick.state.StateBasedGame.init(StateBasedGame.java:164)\nat org.newdawn.slick.AppGameContainer.setup(AppGameContainer.java:393)\nat org.newdawn.slick.AppGameContainer.start(AppGameContainer.java:317)\nat com.othinolis.danmaku.Game.main(Game.java:29)\nMon May 12 08:54:35 EDT 2014 ERROR:null\njava.lang.NullPointerException\nat com.othinolis.danmaku.Play.render(Play.java:32)\nat org.newdawn.slick.state.StateBasedGame.render(StateBasedGame.java:199)\nat org.newdawn.slick.GameContainer.updateAndRender(GameContainer.java:688)\nat org.newdawn.slick.AppGameContainer.gameLoop(AppGameContainer.java:411)\nat org.newdawn.slick.AppGameContainer.start(AppGameContainer.java:321)\nat com.othinolis.danmaku.Game.main(Game.java:29)\nMon May 12 08:54:35 EDT 2014 ERROR:Game.render() failure - check the game code.\norg.newdawn.slick.SlickException: Game.render() failure - check the game code.\nat org.newdawn.slick.GameContainer.updateAndRender(GameContainer.java:691)\nat org.newdawn.slick.AppGameContainer.gameLoop(AppGameContainer.java:411)\nat org.newdawn.slick.AppGameContainer.start(AppGameContainer.java:321)\nat com.othinolis.danmaku.Game.main(Game.java:29)\n</code></pre>\n\n<p>This happens after I attempt to move states from the main menu and into the game proper, when PNGs are first loaded. All of my resources are PNGs. Here's my other class files:</p>\n\n<p>Game.java:</p>\n\n<pre><code>package com.othinolis.danmaku;\n\nimport org.newdawn.slick.*;\nimport org.newdawn.slick.state.*;\n\npublic class Game extends StateBasedGame{\n\n   public static final String gamename = \"Danmaku Courage\";\n   public static final int menu = 0;\n   public static final int play = 1;\n\n   public Game(String gamename){\n      super(gamename);\n      this.addState(new Menu(menu));\n      this.addState(new Play(play));\n   }\n\n   public void initStatesList(GameContainer gc) throws SlickException{\n      this.getState(menu).init(gc, this);\n      this.getState(play).init(gc, this);\n      this.enterState(menu);\n   }\n\n   public static void main(String[] args) {\n      AppGameContainer appgc;\n      try{\n         appgc = new AppGameContainer(new Game(gamename));\n         appgc.setDisplayMode(600, 600, false);\n         appgc.start();\n      }catch(SlickException e){\n         e.printStackTrace();\n      }\n   }\n\n}\n</code></pre>\n\n<p>Menu.java (state 0, runs with no issues):</p>\n\n<pre><code>package com.othinolis.danmaku;\n\nimport org.lwjgl.input.Mouse;\nimport org.newdawn.slick.*;\nimport org.newdawn.slick.state.*;\n\npublic class Menu extends BasicGameState{\n\n   Image playNow;\n   Image exitGame;\n\n   public Menu(int state){\n   }\n\n   public void init(GameContainer gc, StateBasedGame sbg) throws SlickException{\n      playNow = new Image(\"res/playButton.png\");\n      exitGame = new Image(\"res/exitGame.png\");\n   }\n\n   public void render(GameContainer gc, StateBasedGame sbg, Graphics g) throws SlickException{\n      g.drawString(\"Danmaku Courage\", 230, 50);\n      g.drawString(\"mousex: \" + Mouse.getX() + \" mousey: \" + Mouse.getY(), 300, 400);\n      playNow.draw(200,100);\n      exitGame.draw(200,200);\n   }\n\n   public void update(GameContainer gc, StateBasedGame sbg, int delta) throws SlickException{\n      int posX = Mouse.getX();\n      int posY = Mouse.getY();\n      //play now button\n      if((posX&gt;237 &amp;&amp; posX&lt;364)&amp;&amp;(posY&gt;425 &amp;&amp; posY&lt;460)){\n         if(Mouse.isButtonDown(0)){\n            sbg.enterState(1);\n         }\n      }\n\n      //exit game\n      if((posX&gt;254 &amp;&amp; posX&lt;335)&amp;&amp;(posY&gt;338 &amp;&amp; posY&lt;361)){\n         if(Mouse.isButtonDown(0)){\n            System.exit(0);\n         }\n      }\n   }\n\n   public int getID(){\n      return 0;\n   }\n}\n</code></pre>\n\n<p>and Play.java (moving between Menu and Play is where the issue hits. The numbers for collisions with the side of the screen and what have you may not be exact.):</p>\n\n<pre><code>package com.othinolis.danmaku;\n\nimport org.newdawn.slick.*;\nimport org.newdawn.slick.state.*;\n\npublic class Play extends BasicGameState{\n\n   Animation player, movingLeft, movingRight; //2 animations, player will be set to one\n   Image worldMap;\n   boolean quit = false;\n   int[] duration = {200,200}; //length of the frame\n   float playerPositionX = 0; //player will start at coordinates 0,0\n   float playerPositionY = 0;\n   float shiftX = buckyPositionX + 320; //this will shift the screen so bucky appears in middle\n   float shiftY = buckyPositionY + 160; //half the length and half the width of the screen\n\n   public Play(int state){\n   }\n\n   public void init(GameContainer gc, StateBasedGame sbg) throws SlickException{\n      worldMap = new Image(\"res/background.png\");\n      Image[] walkLeft = {new Image(\"res/player.png\"), new Image(\"res/player.png\")};\n      Image[] walkRight = {new Image(\"res/player.png\"), new Image(\"res/player.png\")};\n\n      movingLeft = new Animation(walkLeft, duration, false);\n      movingRight = new Animation(walkRight, duration, false);\n      player = movingDown; //by default as soon as game loads, player will be facing down\n   }\n\n   public void render(GameContainer gc, StateBasedGame sbg, Graphics g) throws SlickException{\n      worldMap.draw(buckyPositionX,buckyPositionY); //draw the map at 0,0 to start\n      player.draw(shiftX,shiftY); //draw player at 320, 160 (center of the screen)\n      g.drawString(\"player's X: \"+playerPositionX+\"\\nplayer's Y: \"+playerPositionY, 400, 20); //indicator to see where player is\n\n      //when they press escape\n      if(quit==true){\n         g.drawString(\"Resume (R)\", 250, 100);\n         g.drawString(\"Main Menu (M)\", 250, 150);\n         g.drawString(\"Quit Game (Q)\", 250, 200);\n         if(quit==false){\n            g.clear();\n         }\n      }\n   }\n\n   public void update(GameContainer gc, StateBasedGame sbg, int delta) throws SlickException{\n      Input input = gc.getInput();\n      if(input.isKeyDown(Input.KEY_LEFT)){\n         player = movingLeft;\n         playerPositionX += delta * .1f;\n         if(playerPositionX&gt;324){\n            playerPositionX -= delta * .1f;\n         }\n      }\n      if(input.isKeyDown(Input.KEY_RIGHT)){\n         player = movingRight;\n         playerPositionX -= delta * .1f;\n         if(playerPositionX&lt;-840){\n            playerPositionX += delta * .1f;\n         }\n      }\n\n      //escape\n      if(input.isKeyDown(Input.KEY_ESCAPE)){\n         quit = true;\n      }      \n\n      //when they hit escape\n      if(quit==true){\n         if(input.isKeyDown(Input.KEY_R)){\n            quit = false;\n         }\n         if(input.isKeyDown(Input.KEY_M)){\n            sbg.enterState(0);\n            try{\n               Thread.sleep(250);\n            }catch(InterruptedException e){\n               e.printStackTrace();\n            }\n         }\n         if(input.isKeyDown(Input.KEY_Q)){\n            System.exit(0);\n         }\n      }\n   }\n\n   public int getID(){\n      return 1;\n   }\n}\n</code></pre>\n\n<p>What I know of slick has come from the several Forum posts I've read about issues like this one, (none of them had the exact issue nor the solution, of course) and Bucky's Slick tutorials that are <a href=\"https://www.youtube.com/playlist?list=PL210C2267A8922854\" rel=\"nofollow\">here</a>. If you'd like to download the project so you can import it and see if you can help me, I've thrown it onto Dropbox <a href=\"https://www.dropbox.com/s/x9snel0rrlr18yv/shmup%20proj.zip\" rel=\"nofollow\">here</a>.</p>\n"},{"tags":["java","lwjgl","slick2d"],"answers":[{"tags":[],"owner":{"account_id":3104692,"reputation":675,"user_id":2627859,"accept_rate":63,"display_name":"rshah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1410474771,"creation_date":1410474771,"answer_id":25798011,"question_id":25579834,"body_markdown":"Reading the docs I found that I can use an empty transition to the second transition parameter to prevent the additional transition from playing.\r\n\r\n    this.enterState(SPLASH, new FadeInTransition(Color.black), new EmptyTransition());","title":"Fade into splash screen on game load","body":"<p>Reading the docs I found that I can use an empty transition to the second transition parameter to prevent the additional transition from playing.</p>\n\n<pre><code>this.enterState(SPLASH, new FadeInTransition(Color.black), new EmptyTransition());\n</code></pre>\n"}],"owner":{"account_id":3104692,"reputation":675,"user_id":2627859,"accept_rate":63,"display_name":"rshah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":581,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":25798011,"answer_count":1,"score":0,"last_activity_date":1691284832,"creation_date":1409381765,"question_id":25579834,"body_markdown":"I&#39;m using Slick2D and LWJGL for my StateBasedGame and I was wondering if there was a way to enter into my splashscreen on application load using a transition?\r\n\r\nI tried using:\r\n\r\n    this.enterState(SPLASH, new FadeInTransition(Color.black), new FadeInTransition(Color.black));\r\n\r\nHowever, it fades in nicely but then it flashes again for the second transition :(\r\n\r\nAnyone know how I can get around that?\r\n\r\nWould I have to create my own transition?","title":"Fade into splash screen on game load","body":"<p>I'm using Slick2D and LWJGL for my StateBasedGame and I was wondering if there was a way to enter into my splashscreen on application load using a transition?</p>\n\n<p>I tried using:</p>\n\n<pre><code>this.enterState(SPLASH, new FadeInTransition(Color.black), new FadeInTransition(Color.black));\n</code></pre>\n\n<p>However, it fades in nicely but then it flashes again for the second transition :(</p>\n\n<p>Anyone know how I can get around that?</p>\n\n<p>Would I have to create my own transition?</p>\n"},{"tags":["java","opengl","resize","lwjgl","slick2d"],"answers":[{"tags":[],"owner":{"account_id":4470148,"reputation":2879,"user_id":3636680,"accept_rate":100,"display_name":"Dawnkeeper"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1409559738,"creation_date":1409559738,"answer_id":25601636,"question_id":25594600,"body_markdown":"The documentation of `Display.getWidth()` states:\r\n\r\n&gt; This value will be updated after a call to Display.update().","title":"LWJGL Get Display Size Not Working Correctly","body":"<p>The documentation of <code>Display.getWidth()</code> states:</p>\n\n<blockquote>\n  <p>This value will be updated after a call to Display.update().</p>\n</blockquote>\n"}],"owner":{"account_id":1602820,"reputation":89,"user_id":1483552,"accept_rate":0,"display_name":"user1483552"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691284824,"creation_date":1409506904,"question_id":25594600,"body_markdown":"    Draw.drawSquare(0, 0, Display.getWidth(), Display.getHeight(), UITextures.engineBackgroundTex);\r\n\r\nFor some reason, the texture is the same size, even after the window is resized.\r\n\r\n`Display.setResizable` is set to `true`.\r\n\r\nAm I correctly getting the size of the display? \r\n\r\nALSO: The draw call is running at 60 fps and `Draw.drawSquare` has been tested to work, but for some reason `Display.getWidth` does not work to resize the texture...","title":"LWJGL Get Display Size Not Working Correctly","body":"<pre><code>Draw.drawSquare(0, 0, Display.getWidth(), Display.getHeight(), UITextures.engineBackgroundTex);\n</code></pre>\n\n<p>For some reason, the texture is the same size, even after the window is resized.</p>\n\n<p><code>Display.setResizable</code> is set to <code>true</code>.</p>\n\n<p>Am I correctly getting the size of the display? </p>\n\n<p>ALSO: The draw call is running at 60 fps and <code>Draw.drawSquare</code> has been tested to work, but for some reason <code>Display.getWidth</code> does not work to resize the texture...</p>\n"},{"tags":["java","graphics","lwjgl","slick2d"],"comments":[{"owner":{"account_id":2413237,"reputation":31164,"user_id":2107876,"accept_rate":88,"display_name":"laune"},"score":0,"creation_date":1419869723,"post_id":27692271,"comment_id":43797618,"body_markdown":"slick.ninjacave.com/javadoc/org/newdawn/slick/tiled/TiledMap.html ?","body":"slick.ninjacave.com/javadoc/org/newdawn/slick/tiled/TiledMap&zwnj;&#8203;.html ?"},{"owner":{"account_id":5240880,"reputation":55,"user_id":4187962,"accept_rate":50,"display_name":"Fusive"},"score":0,"creation_date":1419870019,"post_id":27692271,"comment_id":43797742,"body_markdown":"Yes that is what i am following.","body":"Yes that is what i am following."},{"owner":{"account_id":2413237,"reputation":31164,"user_id":2107876,"accept_rate":88,"display_name":"laune"},"score":0,"creation_date":1419871311,"post_id":27692271,"comment_id":43798312,"body_markdown":"Seems you can download everything from http://slick.ninjacave.com/ - where is the problem?","body":"Seems you can download everything from <a href=\"http://slick.ninjacave.com/\" rel=\"nofollow noreferrer\">slick.ninjacave.com</a> - where is the problem?"},{"owner":{"account_id":5240880,"reputation":55,"user_id":4187962,"accept_rate":50,"display_name":"Fusive"},"score":0,"creation_date":1419871589,"post_id":27692271,"comment_id":43798435,"body_markdown":"I have everything downloaded and it is part of the build path. TiledMap will not import. IT is not there. Everything else so far is working correctly","body":"I have everything downloaded and it is part of the build path. TiledMap will not import. IT is not there. Everything else so far is working correctly"},{"owner":{"account_id":2413237,"reputation":31164,"user_id":2107876,"accept_rate":88,"display_name":"laune"},"score":0,"creation_date":1419872013,"post_id":27692271,"comment_id":43798636,"body_markdown":"But it is:  lib/slick.jar org/newdawn/slick/tiled/TiledMap.class","body":"But it is:  lib/slick.jar org/newdawn/slick/tiled/TiledMap.class"}],"owner":{"account_id":5240880,"reputation":55,"user_id":4187962,"accept_rate":50,"display_name":"Fusive"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691284795,"creation_date":1419869601,"question_id":27692271,"body_markdown":"It gives me an error when I try to create a TiledMap. there is no import option. The wiki(slick.ninjacave.com/javadoc/org/newdawn/slick/tiled/TiledMap.html) says it is under org.newdawn.slick.tiled.*; but that apparently doesnt exist anymore. Thanks!","title":"Where is TiledMap located in slick-util","body":"<p>It gives me an error when I try to create a TiledMap. there is no import option. The wiki(slick.ninjacave.com/javadoc/org/newdawn/slick/tiled/TiledMap.html) says it is under org.newdawn.slick.tiled.*; but that apparently doesnt exist anymore. Thanks!</p>\n"},{"tags":["java","eclipse","lwjgl","bufferedwriter","slick2d"],"comments":[{"owner":{"account_id":466160,"reputation":3576,"user_id":870743,"accept_rate":100,"display_name":"Brett Walker"},"score":1,"creation_date":1430403632,"post_id":29970216,"comment_id":48060173,"body_markdown":"Have you tired `bw.flush();` just before `bw.close();`","body":"Have you tired <code>bw.flush();</code> just before <code>bw.close();</code>"},{"owner":{"account_id":915710,"reputation":30634,"user_id":948550,"accept_rate":93,"display_name":"Reut Sharabani"},"score":0,"creation_date":1430403688,"post_id":29970216,"comment_id":48060204,"body_markdown":"@BrettWalker `close` invokes `flush`.","body":"@BrettWalker <code>close</code> invokes <code>flush</code>."},{"owner":{"account_id":915710,"reputation":30634,"user_id":948550,"accept_rate":93,"display_name":"Reut Sharabani"},"score":2,"creation_date":1430404543,"post_id":29970216,"comment_id":48060836,"body_markdown":"My best guess based on the data you provided would be that the (old) copy you have open on eclipse is configured to automagically be synced to the file system after the program executes.\n\nThis reverses the file copy on the disk to an old version (the one you have open).\n\nTo verify you may want to not open the file at all and run the program multiple times.\n\nIf the works you can run the program and check each iteration on a copy of the file (simple copy it manually).\n\nIf both work I&#39;d lean towards my observation.","body":"My best guess based on the data you provided would be that the (old) copy you have open on eclipse is configured to automagically be synced to the file system after the program executes.  This reverses the file copy on the disk to an old version (the one you have open).  To verify you may want to not open the file at all and run the program multiple times.  If the works you can run the program and check each iteration on a copy of the file (simple copy it manually).  If both work I&#39;d lean towards my observation."},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1430405691,"post_id":29970216,"comment_id":48061629,"body_markdown":"@ Reut Sharabani the close method of BufferdWriter flushes it&#39;s internal buffer but it does not call flush on the underlaying Writer.","body":"@ Reut Sharabani the close method of BufferdWriter flushes it&#39;s internal buffer but it does not call flush on the underlaying Writer."},{"owner":{"account_id":6235180,"reputation":81,"user_id":4850723,"display_name":"stack_overflow_interrogator"},"score":0,"creation_date":1430408313,"post_id":29970216,"comment_id":48063716,"body_markdown":"@Reut Sharabani I only opened Eclipse, and I only opened the file.txt from Eclipse (which showed it inside Eclipse in a new tab), the file.txt never poped up in a seperate window. Without ever opening it inside Eclipse, just running the program several times, none of the writing works.","body":"@Reut Sharabani I only opened Eclipse, and I only opened the file.txt from Eclipse (which showed it inside Eclipse in a new tab), the file.txt never poped up in a seperate window. Without ever opening it inside Eclipse, just running the program several times, none of the writing works."},{"owner":{"account_id":3093821,"reputation":53931,"user_id":3182664,"accept_rate":55,"display_name":"Marco13"},"score":0,"creation_date":1430409988,"post_id":29970216,"comment_id":48065000,"body_markdown":"In order to rule out a few things: Try using a file in an *absolute* path that is not in your Eclipse workspace, e.g. `new FileWriter(&quot;C:/file.txt&quot;)`. And as another, independent test: Try what happens when you select your project root after writing the file, and press `F5` (refresh) (*instead* of opening the file!), and load it afterwards.","body":"In order to rule out a few things: Try using a file in an <i>absolute</i> path that is not in your Eclipse workspace, e.g. <code>new FileWriter(&quot;C:&#47;file.txt&quot;)</code>. And as another, independent test: Try what happens when you select your project root after writing the file, and press <code>F5</code> (refresh) (<i>instead</i> of opening the file!), and load it afterwards."},{"owner":{"account_id":6235180,"reputation":81,"user_id":4850723,"display_name":"stack_overflow_interrogator"},"score":0,"creation_date":1430410476,"post_id":29970216,"comment_id":48065332,"body_markdown":"@Marco13 the f5 works fine, like if I&#39;d open it from Eclipse, I am testing the absolute path aswell","body":"@Marco13 the f5 works fine, like if I&#39;d open it from Eclipse, I am testing the absolute path aswell"},{"owner":{"account_id":3093821,"reputation":53931,"user_id":3182664,"accept_rate":55,"display_name":"Marco13"},"score":0,"creation_date":1430410891,"post_id":29970216,"comment_id":48065611,"body_markdown":"Then it&#39;s most likely related to what @ReutSharabani said: Some automagic eclipse caching thing. I never heard about that, but websearches like &quot;eclipse file caching changes&quot; indicate that this might be the case, and I would not even be surprised, considering that you&#39;re using the `src` directory and Eclipse has a &quot;local history&quot;. I think that the best solution is to **not** write into the `src` directory, anyhow...","body":"Then it&#39;s most likely related to what @ReutSharabani said: Some automagic eclipse caching thing. I never heard about that, but websearches like &quot;eclipse file caching changes&quot; indicate that this might be the case, and I would not even be surprised, considering that you&#39;re using the <code>src</code> directory and Eclipse has a &quot;local history&quot;. I think that the best solution is to <b>not</b> write into the <code>src</code> directory, anyhow..."}],"answers":[{"tags":[],"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1430404814,"creation_date":1430403727,"answer_id":29970298,"question_id":29970216,"body_markdown":"You need to `close` the `BufferedWriter` in your `finally` block. \r\n\r\nOptionally, you can `flush` your `BufferedWriter` as well in the `try` block after you are finished writing, although the `close` operation will flush it first. \r\n\r\nHere&#39;s a revisited example, Java 6-styled:\r\n\r\n    BufferedWriter bw = null;\r\n\r\n    try {\r\n        bw = new BufferedWriter(new FileWriter(&quot;src/file.txt&quot;));\r\n        bw.write(giveToFile);\r\n        // bw.flush(); // if needed\r\n    }\r\n    catch(IOException e){\r\n        e.printStackTrace();\r\n    }\r\n    finally {\r\n        if (bw != null) {\r\n            try {\r\n                bw.close();\r\n            }\r\n            catch (Throwable t) {\r\n                t.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n... and Java 7-styled (&quot;try with&quot; and `AutoClosable`s):\r\n\r\n    try (BufferedWriter bw = new BufferedWriter(new FileWriter(&quot;src/file.txt&quot;))) {\r\n        bw.write(giveToFile);\r\n        bw.flush();\r\n    }\r\n    catch(IOException e){\r\n        e.printStackTrace();\r\n    }","title":"Schrodinger&#39;s bug, BufferedWriter doesn&#39;t write into TXT unless manually checked","body":"<p>You need to <code>close</code> the <code>BufferedWriter</code> in your <code>finally</code> block. </p>\n\n<p>Optionally, you can <code>flush</code> your <code>BufferedWriter</code> as well in the <code>try</code> block after you are finished writing, although the <code>close</code> operation will flush it first. </p>\n\n<p>Here's a revisited example, Java 6-styled:</p>\n\n<pre><code>BufferedWriter bw = null;\n\ntry {\n    bw = new BufferedWriter(new FileWriter(\"src/file.txt\"));\n    bw.write(giveToFile);\n    // bw.flush(); // if needed\n}\ncatch(IOException e){\n    e.printStackTrace();\n}\nfinally {\n    if (bw != null) {\n        try {\n            bw.close();\n        }\n        catch (Throwable t) {\n            t.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>... and Java 7-styled (\"try with\" and <code>AutoClosable</code>s):</p>\n\n<pre><code>try (BufferedWriter bw = new BufferedWriter(new FileWriter(\"src/file.txt\"))) {\n    bw.write(giveToFile);\n    bw.flush();\n}\ncatch(IOException e){\n    e.printStackTrace();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1430408695,"creation_date":1430408695,"answer_id":29972181,"question_id":29970216,"body_markdown":"Java makes a distinction between File and resource. A resource is on the class path, possibly in a jar. A resource hence should be considered read-only. It may also be cached.\r\n\r\nIn your case using a resource (at reading) is undesirable.\r\n\r\nI would do something like the following.\r\n\r\n    String userDir = System.getProperty(&quot;user.home&quot;);\r\n    Path txtPath = Paths.get(userDir, &quot;file.txt&quot;);\r\n\r\n    List&lt;String&gt; content = Files.readAllLines(txtPath, StandardCharsets.UTF_8);\r\n\r\n    Files.write(txtPath, content, StandardCharsets.UTF_8);\r\n\r\n    giveToFile = content.get(0);\r\n    content = Collections.singletonList(giveToFile);\r\n\r\nThis keeps the file out-of-the class path, so you may create an application in a jar.\r\n\r\nYou could maintain an initial read-only file.txt as resource, functioning as initial template, and copy that to the user directory.\r\n\r\nI have used UTF-8 encoding here, so the file format is portable.","title":"Schrodinger&#39;s bug, BufferedWriter doesn&#39;t write into TXT unless manually checked","body":"<p>Java makes a distinction between File and resource. A resource is on the class path, possibly in a jar. A resource hence should be considered read-only. It may also be cached.</p>\n\n<p>In your case using a resource (at reading) is undesirable.</p>\n\n<p>I would do something like the following.</p>\n\n<pre><code>String userDir = System.getProperty(\"user.home\");\nPath txtPath = Paths.get(userDir, \"file.txt\");\n\nList&lt;String&gt; content = Files.readAllLines(txtPath, StandardCharsets.UTF_8);\n\nFiles.write(txtPath, content, StandardCharsets.UTF_8);\n\ngiveToFile = content.get(0);\ncontent = Collections.singletonList(giveToFile);\n</code></pre>\n\n<p>This keeps the file out-of-the class path, so you may create an application in a jar.</p>\n\n<p>You could maintain an initial read-only file.txt as resource, functioning as initial template, and copy that to the user directory.</p>\n\n<p>I have used UTF-8 encoding here, so the file format is portable.</p>\n"},{"tags":[],"owner":{"account_id":6235180,"reputation":81,"user_id":4850723,"display_name":"stack_overflow_interrogator"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1430499648,"creation_date":1430499648,"answer_id":29991410,"question_id":29970216,"body_markdown":"YAY!!! After trying out everything you all said, get deeper into the topic and spend almost 2 days researching the problem I got found a solution!!!!  \r\n\r\nThe file is still in the same `src` so its path is `src/file.txt` but there is a file automatically created in the bin folder with the same name, deleting one results boths file to be deleted. In short, these two files somehow the same\r\n\r\nFor the code I used this to read the file:\r\n\r\n    try{\t\r\n\t\tInputStream is = state1.class.getResourceAsStream(&quot;/file.txt&quot;);\r\n\t\t\t\t\t\r\n\t\tScanner fileIn = new Scanner(is);\r\n\t\tfor(int i=0; i&lt;SCOREMAX; i++){\r\n\t\t\tscoreInt[i] = fileIn.nextInt();\r\n\t    }\r\n\t\tfileIn.close();\r\n\t}catch (Exception e) {\r\n\t\t e.printStackTrace();\r\n\t}  \r\n\r\nNotice that I didnt use `src/file.txt` just `/file.txt`, it reads from the file in the bin folder.  \r\n\r\nFor the write I used:  \r\n\r\n\r\n    FileOutputStream fs = null;\r\n\ttry{\r\n\t\tfs = new FileOutputStream(&quot;bin/file.txt&quot;);\r\n\t\tOutputStreamWriter ow = new OutputStreamWriter(fs);\r\n\t\tBufferedWriter bw = new BufferedWriter(ow);\r\n\t\tbw.write(giveToFile);\r\n\t\tbw.flush();\r\n\t\tbw.close();\r\n\t}catch (IOException e){\r\n\t\te.printStackTrace();\r\n\t}finally{\r\n        try{fs.close();} catch(IOException e){e.printStackTrace();}\r\n    }  \r\n\r\nAnd again, notice that I didnt use the `src/file.txt` here either, rather I directed it to the file in the `bin` folder.  \r\n\r\nAnd it worked!!!  \r\n\r\nAt the end I got ~70 row code inside /* ... */ marks labeled as &#39;//almost works&#39; and at least 10times more that I already deleted. But finally it works!!  \r\n\r\nThank you for everyone who commented and answered here, I wouldnt be able to find the solutions without you all. Thank you everyone again!","title":"Schrodinger&#39;s bug, BufferedWriter doesn&#39;t write into TXT unless manually checked","body":"<p>YAY!!! After trying out everything you all said, get deeper into the topic and spend almost 2 days researching the problem I got found a solution!!!!  </p>\n\n<p>The file is still in the same <code>src</code> so its path is <code>src/file.txt</code> but there is a file automatically created in the bin folder with the same name, deleting one results boths file to be deleted. In short, these two files somehow the same</p>\n\n<p>For the code I used this to read the file:</p>\n\n<pre><code>try{    \n    InputStream is = state1.class.getResourceAsStream(\"/file.txt\");\n\n    Scanner fileIn = new Scanner(is);\n    for(int i=0; i&lt;SCOREMAX; i++){\n        scoreInt[i] = fileIn.nextInt();\n    }\n    fileIn.close();\n}catch (Exception e) {\n     e.printStackTrace();\n}  \n</code></pre>\n\n<p>Notice that I didnt use <code>src/file.txt</code> just <code>/file.txt</code>, it reads from the file in the bin folder.  </p>\n\n<p>For the write I used:  </p>\n\n<pre><code>FileOutputStream fs = null;\ntry{\n    fs = new FileOutputStream(\"bin/file.txt\");\n    OutputStreamWriter ow = new OutputStreamWriter(fs);\n    BufferedWriter bw = new BufferedWriter(ow);\n    bw.write(giveToFile);\n    bw.flush();\n    bw.close();\n}catch (IOException e){\n    e.printStackTrace();\n}finally{\n    try{fs.close();} catch(IOException e){e.printStackTrace();}\n}  \n</code></pre>\n\n<p>And again, notice that I didnt use the <code>src/file.txt</code> here either, rather I directed it to the file in the <code>bin</code> folder.  </p>\n\n<p>And it worked!!!  </p>\n\n<p>At the end I got ~70 row code inside /* ... */ marks labeled as '//almost works' and at least 10times more that I already deleted. But finally it works!!  </p>\n\n<p>Thank you for everyone who commented and answered here, I wouldnt be able to find the solutions without you all. Thank you everyone again!</p>\n"}],"owner":{"account_id":6235180,"reputation":81,"user_id":4850723,"display_name":"stack_overflow_interrogator"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":337,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":3,"score":7,"last_activity_date":1691284780,"creation_date":1430403470,"question_id":29970216,"body_markdown":"I am a rookie programmer-wanna-be and came across this problem I couldn&#39;t find the answer for.  \r\nI use `Eclipse`, and for the program I use `slick` and `lwjgl-2.9.3`  \r\nThe following code is in a state, inside the *public void update(...)* \r\n\r\nI have the problem with this part of the code:  \r\n(the file.txt exists and have no capitals in its name, giveToFile is a String) (no exceptions thrown)\r\n\r\n    try{\r\n    \tBufferedWriter bw = new BufferedWriter(new FileWriter(&quot;src/file.txt&quot;));\r\n    \tbw.write(giveToFile);\r\n    \tbw.close();\r\n   \t}catch(IOException e){\r\n   \t\te.printStackTrace();\r\n   \t}\r\n\r\n( EDIT:  \r\n\r\n    try{\r\n        bw = new BufferedWriter(new FileWriter(&quot;src/file.txt&quot;));\r\n    \tbw.write(giveToFile);\r\n\t\tbw.flush();\r\n\t}catch(IOException e){\r\n\t\te.printStackTrace();\r\n\t}finally {\r\n\t\tif (bw != null){\r\n\t\t    try {\r\n\t\t\t   bw.close();\r\n\t       }catch (Throwable t){\r\n\t\t\t   t.printStackTrace();\r\n\t\t   }\r\n\t   }\r\n    }  \r\n\r\nproduced the same bug)  \r\n\r\nI placed a *System.out.print* at the end of the try block, and it run normally, and run only once. I also used a *g.drawString* and the `giveToFile` always gives the intended String. I executed the following two experiments. (The program is a game-ish thing, you get a score at the end based on your performance and it places it into the high-scores then rewrites the TXT file.) (I suggest to read TLDR before.)  \r\n\r\nExperiment 1 (file.txt : &quot;0 0 0 0 0&quot;)  (successful):  \r\n\r\n1. I run the program and earn 15 points.  \r\n**- string loaded from the txt: &quot;0 0 0 0 0&quot;**  \r\n**- giveToFile (string): &quot;15 0 0 0 0&quot;**  \r\n2. I doubleclick the TXT file inside Eclipse at the left side (package explorer), it opens in a new tab and I see inside the txt: &quot;15 0 0 0 0&quot;, I close the tab  \r\n3. I run the program again and earn 30 points.  \r\n**- string leaded from text: &quot;15 0 0 0 0&quot;**  \r\n**- giveToFile (String): &quot;30 15 0 0 0&quot;**  \r\n4. I doubleclick the TXT file inside Eclipse at the left side (package explorer), it opens in a new tab and I see inside the txt: &quot;30 15 0 0 0&quot;, I close the tab  \r\n5. I run the program one last time and earn 0 points.  \r\n**- string loaded from txt: &quot;30 15 0 0 0&quot;**  \r\n**- giveToFile (string): &quot;30 15 0 0 0&quot;**  \r\n\r\n\r\nExperiment 2 (file.txt : &quot;0 0 0 0 0&quot;)  (failure):  \r\n\r\n1. I run the program and earn 15 points.  \r\n**- string loaded from the txt: &quot;0 0 0 0 0&quot;**  \r\n**- giveToFile (string): &quot;15 0 0 0 0&quot;**  \r\n2. I doubleclick the TXT file inside Eclipse at the left side (package explorer), it opens in a new tab and I see inside the txt: &quot;15 0 0 0 0&quot;, I close the tab  \r\n3. I run the program again and earn 30 ponts.  \r\n**- string leaded from text: &quot;15 0 0 0 0&quot;**  \r\n**- giveToFile (String): &quot;30 15 0 0 0&quot;**  \r\n4. I dont doubleclick the TXT file, I dont open it in a new tab, and I dont check it.    \r\n5. I run the program one last time and earn 0 points.  \r\n**- string loeaded from txt: &quot;15 0 0 0 0&quot;**  \r\n**- giveToFile (string): &quot;15 0 0 0 0&quot;**  \r\n\r\n\r\n**TLRD: the program doesn&#39;t write into the TXT file unless I check it manually**  \r\n\r\nthere is a bug, and there isn&#39;t, depends on if I check the txt file, or not  \r\n\r\nsorry for the long question and sorry if it is something super simple, but I am a beginner and couldn&#39;t find any solution on the internet, thanks for the help in advance  \r\n\r\nEDIT:  \r\n\r\n\r\nI use this to close the program: (xpos and ypos are the mouse coordinates) (basically a primitive exit button)  \r\n\r\n    if((xpos&gt;= 200 &amp;&amp; xpos &lt;= 400) &amp;&amp; (ypos&gt;=100 &amp;&amp; ypos &lt;=200)){\r\n\t\tif(Mouse.isButtonDown(0)){\r\n\t\t\tSystem.exit(0);\r\n\t\t}\r\n\t}  \r\n\r\nI got this: (no exceptions)  \r\n\r\nThu Apr 30 16:44:14 CEST 2015 INFO:Slick Build #237  \r\nThu Apr 30 16:44:14 CEST 2015 INFO:LWJGL Version: 2.9.3  \r\nThu Apr 30 16:44:14 CEST 2015 INFO:OriginalDisplayMode: 1366 x 768 x 32 @60Hz  \r\nThu Apr 30 16:44:14 CEST 2015 INFO:TargetDisplayMode: 600 x 600 x 0 @0Hz  \r\nThu Apr 30 16:44:15 CEST 2015 INFO:Starting display 600x600  \r\nThu Apr 30 16:44:15 CEST 2015 INFO:Use Java PNG Loader = true  \r\nThu Apr 30 16:44:15 CEST 2015 INFO:Controllers not available  \r\n\r\nThis part reads the file, no other part does anything with the file, and the reader works fine:  \r\n\r\n    try{\r\n    \tInputStream is = getClass().getResourceAsStream(&quot;/file.txt&quot;);\r\n    \tScanner fileIn = new Scanner(is);\r\n    \tfor(int i=0; i&lt;SCOREMAX; i++){\r\n\t\t\tscoreInt[i] = fileIn.nextInt();\r\n\t\t}\r\n\t\tfileIn.close();\r\n\t}catch (Exception e) {\r\n\t\te.printStackTrace();\r\n    }  \r\n\r\nit is inside the *public void init* and SCOREMAX&#39;s type is `public static final int`","title":"Schrodinger&#39;s bug, BufferedWriter doesn&#39;t write into TXT unless manually checked","body":"<p>I am a rookie programmer-wanna-be and came across this problem I couldn't find the answer for.<br>\nI use <code>Eclipse</code>, and for the program I use <code>slick</code> and <code>lwjgl-2.9.3</code><br>\nThe following code is in a state, inside the <em>public void update(...)</em> </p>\n\n<p>I have the problem with this part of the code:<br>\n(the file.txt exists and have no capitals in its name, giveToFile is a String) (no exceptions thrown)</p>\n\n<pre><code>try{\n    BufferedWriter bw = new BufferedWriter(new FileWriter(\"src/file.txt\"));\n    bw.write(giveToFile);\n    bw.close();\n}catch(IOException e){\n    e.printStackTrace();\n}\n</code></pre>\n\n<p>( EDIT:  </p>\n\n<pre><code>try{\n    bw = new BufferedWriter(new FileWriter(\"src/file.txt\"));\n    bw.write(giveToFile);\n    bw.flush();\n}catch(IOException e){\n    e.printStackTrace();\n}finally {\n    if (bw != null){\n        try {\n           bw.close();\n       }catch (Throwable t){\n           t.printStackTrace();\n       }\n   }\n}  \n</code></pre>\n\n<p>produced the same bug)  </p>\n\n<p>I placed a <em>System.out.print</em> at the end of the try block, and it run normally, and run only once. I also used a <em>g.drawString</em> and the <code>giveToFile</code> always gives the intended String. I executed the following two experiments. (The program is a game-ish thing, you get a score at the end based on your performance and it places it into the high-scores then rewrites the TXT file.) (I suggest to read TLDR before.)  </p>\n\n<p>Experiment 1 (file.txt : \"0 0 0 0 0\")  (successful):  </p>\n\n<ol>\n<li>I run the program and earn 15 points.<br>\n<strong>- string loaded from the txt: \"0 0 0 0 0\"</strong><br>\n<strong>- giveToFile (string): \"15 0 0 0 0\"</strong>  </li>\n<li>I doubleclick the TXT file inside Eclipse at the left side (package explorer), it opens in a new tab and I see inside the txt: \"15 0 0 0 0\", I close the tab  </li>\n<li>I run the program again and earn 30 points.<br>\n<strong>- string leaded from text: \"15 0 0 0 0\"</strong><br>\n<strong>- giveToFile (String): \"30 15 0 0 0\"</strong>  </li>\n<li>I doubleclick the TXT file inside Eclipse at the left side (package explorer), it opens in a new tab and I see inside the txt: \"30 15 0 0 0\", I close the tab  </li>\n<li>I run the program one last time and earn 0 points.<br>\n<strong>- string loaded from txt: \"30 15 0 0 0\"</strong><br>\n<strong>- giveToFile (string): \"30 15 0 0 0\"</strong>  </li>\n</ol>\n\n<p>Experiment 2 (file.txt : \"0 0 0 0 0\")  (failure):  </p>\n\n<ol>\n<li>I run the program and earn 15 points.<br>\n<strong>- string loaded from the txt: \"0 0 0 0 0\"</strong><br>\n<strong>- giveToFile (string): \"15 0 0 0 0\"</strong>  </li>\n<li>I doubleclick the TXT file inside Eclipse at the left side (package explorer), it opens in a new tab and I see inside the txt: \"15 0 0 0 0\", I close the tab  </li>\n<li>I run the program again and earn 30 ponts.<br>\n<strong>- string leaded from text: \"15 0 0 0 0\"</strong><br>\n<strong>- giveToFile (String): \"30 15 0 0 0\"</strong>  </li>\n<li>I dont doubleclick the TXT file, I dont open it in a new tab, and I dont check it.    </li>\n<li>I run the program one last time and earn 0 points.<br>\n<strong>- string loeaded from txt: \"15 0 0 0 0\"</strong><br>\n<strong>- giveToFile (string): \"15 0 0 0 0\"</strong>  </li>\n</ol>\n\n<p><strong>TLRD: the program doesn't write into the TXT file unless I check it manually</strong>  </p>\n\n<p>there is a bug, and there isn't, depends on if I check the txt file, or not  </p>\n\n<p>sorry for the long question and sorry if it is something super simple, but I am a beginner and couldn't find any solution on the internet, thanks for the help in advance  </p>\n\n<p>EDIT:  </p>\n\n<p>I use this to close the program: (xpos and ypos are the mouse coordinates) (basically a primitive exit button)  </p>\n\n<pre><code>if((xpos&gt;= 200 &amp;&amp; xpos &lt;= 400) &amp;&amp; (ypos&gt;=100 &amp;&amp; ypos &lt;=200)){\n    if(Mouse.isButtonDown(0)){\n        System.exit(0);\n    }\n}  \n</code></pre>\n\n<p>I got this: (no exceptions)  </p>\n\n<p>Thu Apr 30 16:44:14 CEST 2015 INFO:Slick Build #237<br>\nThu Apr 30 16:44:14 CEST 2015 INFO:LWJGL Version: 2.9.3<br>\nThu Apr 30 16:44:14 CEST 2015 INFO:OriginalDisplayMode: 1366 x 768 x 32 @60Hz<br>\nThu Apr 30 16:44:14 CEST 2015 INFO:TargetDisplayMode: 600 x 600 x 0 @0Hz<br>\nThu Apr 30 16:44:15 CEST 2015 INFO:Starting display 600x600<br>\nThu Apr 30 16:44:15 CEST 2015 INFO:Use Java PNG Loader = true<br>\nThu Apr 30 16:44:15 CEST 2015 INFO:Controllers not available  </p>\n\n<p>This part reads the file, no other part does anything with the file, and the reader works fine:  </p>\n\n<pre><code>try{\n    InputStream is = getClass().getResourceAsStream(\"/file.txt\");\n    Scanner fileIn = new Scanner(is);\n    for(int i=0; i&lt;SCOREMAX; i++){\n        scoreInt[i] = fileIn.nextInt();\n    }\n    fileIn.close();\n}catch (Exception e) {\n    e.printStackTrace();\n}  \n</code></pre>\n\n<p>it is inside the <em>public void init</em> and SCOREMAX's type is <code>public static final int</code></p>\n"},{"tags":["java","lwjgl","slick2d"],"answers":[{"tags":[],"owner":{"account_id":4902109,"reputation":334,"user_id":3949980,"accept_rate":100,"display_name":"Vicente Berm&#250;dez"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1433012404,"creation_date":1433012404,"answer_id":30550149,"question_id":30549499,"body_markdown":"After searching, I found a solution to this from [this stackoverflow post](https://stackoverflow.com/questions/26553916/opengl-lwjglslick-util-text-doesnt-display-properly)\r\n\r\n&gt; Not calling glEnable(GL_BLEND) in initGL but calling glEnable(GL_BLEND) when you draw the text should make it work.\r\n\r\n    glEnable(GL_BLEND);\r\n    font.drawString(0, 0, &quot;This is a text that should appear&quot;);\r\n    glDisable(GL_BLEND);","title":"Drawing text to display","body":"<p>After searching, I found a solution to this from <a href=\"https://stackoverflow.com/questions/26553916/opengl-lwjglslick-util-text-doesnt-display-properly\">this stackoverflow post</a></p>\n\n<blockquote>\n  <p>Not calling glEnable(GL_BLEND) in initGL but calling glEnable(GL_BLEND) when you draw the text should make it work.</p>\n</blockquote>\n\n<pre><code>glEnable(GL_BLEND);\nfont.drawString(0, 0, \"This is a text that should appear\");\nglDisable(GL_BLEND);\n</code></pre>\n"}],"owner":{"account_id":4902109,"reputation":334,"user_id":3949980,"accept_rate":100,"display_name":"Vicente Berm&#250;dez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":340,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":30550149,"answer_count":1,"score":0,"last_activity_date":1691284752,"creation_date":1433008768,"question_id":30549499,"body_markdown":"I&#39;m trying to draw a text to the screen in LWJGL following [this tutorial](http://wiki.lwjgl.org/index.php?title=Slick-Util_Library_-_Part_3_-_TrueType_Fonts_for_LWJGL). The problem is that when ever I draw a text to the screen, it draws perfectly *but* when I draw a quad *with* the text, the quad does not show.\r\n\r\n**Game class**\r\n\r\n\r\n    package moa.bermudez;\r\n\r\n    import static org.lwjgl.opengl.GL11.*;\r\n\r\n    import java.awt.Font;\r\n    import java.io.InputStream;\r\n\r\n    import moa.bermudez.utils.Artist;\r\n\r\n    import org.lwjgl.LWJGLException;\r\n    import org.lwjgl.opengl.Display;\r\n    import org.lwjgl.opengl.DisplayMode;\r\n    import org.newdawn.slick.TrueTypeFont;\r\n\r\n    public class Game \r\n    {\r\n\tpublic static final int WIDTH = 320;\r\n\tpublic static final int HEIGHT = WIDTH * 9 / 16;\r\n\tpublic static final int SCALE = 3;\r\n\tpublic static final String NAME = &quot;----&quot;;\r\n\tpublic static final float VERSION = 0.1f;\r\n\tpublic static final int MAX_FPS = 60;\r\n\t\r\n\tprivate TrueTypeFont font;\r\n\tprivate boolean fontAS = true;\r\n\t\r\n\tpublic Game() \r\n\t{\r\n\t\ttry \r\n\t\t{\r\n\t\t\tDisplay.setDisplayMode(new DisplayMode(WIDTH * SCALE, HEIGHT * SCALE));\r\n\t\t\tDisplay.setTitle(NAME + &quot; &quot; + VERSION);\r\n\t\t\tDisplay.create();\r\n\t\t} catch(LWJGLException e)\r\n\t\t{\r\n\t\t\te.printStackTrace();\r\n\t\t\tDisplay.destroy();\r\n\t\t}\r\n\t\t\r\n\t\tinit();\r\n\t\twhile(!Display.isCloseRequested())\r\n\t\t{\r\n\t\t\tsetCamera();\r\n\t\t\tupdate();\r\n\t\t\tDisplay.sync(MAX_FPS);\r\n\t\t}\r\n\t\t\r\n\t\tDisplay.destroy();\r\n\t}\r\n\t\r\n\tpublic void update()\r\n\t{\t\t\r\n\t\tglClear(GL_COLOR_BUFFER_BIT);\r\n\t\t\r\n\t\tfont.drawString(0, 0, &quot;This text is showing&quot;);\r\n\t\tArtist.drawQuad(0, 0, 100, 100);\t// This is not showing.\r\n\t\t\r\n\t\tDisplay.update();\r\n\t}\r\n\t\r\n\tpublic void setCamera()\r\n\t{\r\n\t\tglMatrixMode(GL_PROJECTION);\r\n\t\tglLoadIdentity();\r\n\t\tglViewport(0, 0, WIDTH * SCALE, HEIGHT * SCALE);\r\n\t\tglOrtho(0, WIDTH * SCALE, HEIGHT * SCALE, 0, 1, -1);\r\n\t\tglMatrixMode(GL_MODELVIEW);\r\n\t\tglEnable(GL_TEXTURE_2D);\r\n\t\tglEnable(GL_BLEND);\r\n\t\tglBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);\r\n\t}\r\n\t\r\n\tpublic void init()\r\n\t{\r\n        try {\r\n            InputStream inputStream = moa.bermudez.fonts.Font.DEFAULT_FONT;\r\n             \r\n            Font awtFont = Font.createFont(Font.TRUETYPE_FONT, inputStream);\r\n            awtFont = awtFont.deriveFont(24f); \r\n            font = new TrueTypeFont(awtFont, fontAS);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n\t}\r\n\t\r\n\tpublic static void main(String[] args)\r\n\t{\r\n\t\tnew Game();\r\n\t}\r\n    }\r\n\r\n**Artist&#39;s DrawQuad method**\r\n\r\n\tpublic static void drawQuad(float x, float y, float width, float height)\r\n\t{\r\n\t\tglBegin(GL_QUADS);\r\n\t\t\r\n\t\t\tglColor3d(0, 0, 1);\r\n\t\t\tglVertex2f(x, y);\r\n\t\t\tglVertex2f(x + width, y);\r\n\t\t\tglVertex2f(x + width, y + height);\r\n\t\t\tglVertex2f(x, y + height);\r\n\t\t\r\n\t\tglEnd();\r\n\t}\r\n","title":"Drawing text to display","body":"<p>I'm trying to draw a text to the screen in LWJGL following <a href=\"http://wiki.lwjgl.org/index.php?title=Slick-Util_Library_-_Part_3_-_TrueType_Fonts_for_LWJGL\" rel=\"nofollow\">this tutorial</a>. The problem is that when ever I draw a text to the screen, it draws perfectly <em>but</em> when I draw a quad <em>with</em> the text, the quad does not show.</p>\n\n<p><strong>Game class</strong></p>\n\n<pre><code>package moa.bermudez;\n\nimport static org.lwjgl.opengl.GL11.*;\n\nimport java.awt.Font;\nimport java.io.InputStream;\n\nimport moa.bermudez.utils.Artist;\n\nimport org.lwjgl.LWJGLException;\nimport org.lwjgl.opengl.Display;\nimport org.lwjgl.opengl.DisplayMode;\nimport org.newdawn.slick.TrueTypeFont;\n\npublic class Game \n{\npublic static final int WIDTH = 320;\npublic static final int HEIGHT = WIDTH * 9 / 16;\npublic static final int SCALE = 3;\npublic static final String NAME = \"----\";\npublic static final float VERSION = 0.1f;\npublic static final int MAX_FPS = 60;\n\nprivate TrueTypeFont font;\nprivate boolean fontAS = true;\n\npublic Game() \n{\n    try \n    {\n        Display.setDisplayMode(new DisplayMode(WIDTH * SCALE, HEIGHT * SCALE));\n        Display.setTitle(NAME + \" \" + VERSION);\n        Display.create();\n    } catch(LWJGLException e)\n    {\n        e.printStackTrace();\n        Display.destroy();\n    }\n\n    init();\n    while(!Display.isCloseRequested())\n    {\n        setCamera();\n        update();\n        Display.sync(MAX_FPS);\n    }\n\n    Display.destroy();\n}\n\npublic void update()\n{       \n    glClear(GL_COLOR_BUFFER_BIT);\n\n    font.drawString(0, 0, \"This text is showing\");\n    Artist.drawQuad(0, 0, 100, 100);    // This is not showing.\n\n    Display.update();\n}\n\npublic void setCamera()\n{\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n    glViewport(0, 0, WIDTH * SCALE, HEIGHT * SCALE);\n    glOrtho(0, WIDTH * SCALE, HEIGHT * SCALE, 0, 1, -1);\n    glMatrixMode(GL_MODELVIEW);\n    glEnable(GL_TEXTURE_2D);\n    glEnable(GL_BLEND);\n    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);\n}\n\npublic void init()\n{\n    try {\n        InputStream inputStream = moa.bermudez.fonts.Font.DEFAULT_FONT;\n\n        Font awtFont = Font.createFont(Font.TRUETYPE_FONT, inputStream);\n        awtFont = awtFont.deriveFont(24f); \n        font = new TrueTypeFont(awtFont, fontAS);\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n\npublic static void main(String[] args)\n{\n    new Game();\n}\n}\n</code></pre>\n\n<p><strong>Artist's DrawQuad method</strong></p>\n\n<pre><code>public static void drawQuad(float x, float y, float width, float height)\n{\n    glBegin(GL_QUADS);\n\n        glColor3d(0, 0, 1);\n        glVertex2f(x, y);\n        glVertex2f(x + width, y);\n        glVertex2f(x + width, y + height);\n        glVertex2f(x, y + height);\n\n    glEnd();\n}\n</code></pre>\n"},{"tags":["java","lwjgl","slick2d","jarsplice"],"answers":[{"tags":[],"owner":{"account_id":4343151,"reputation":53,"user_id":3545896,"display_name":"Tholok"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1447161840,"creation_date":1447161840,"answer_id":33631046,"question_id":33608267,"body_markdown":"Ok, managed to &quot;fix&quot; my problem. The problem was not with the jar file itself, but with my computer. Turns out Java 1.8 has some problems on the intel 3000 graphics card, which is the one I have. I downgraded to 1.7 and the runnables are now working perfectly ;) Sent the jar to a friend of mine, and he was also able to run it without problems","title":"Error while running exported Slick2d project","body":"<p>Ok, managed to \"fix\" my problem. The problem was not with the jar file itself, but with my computer. Turns out Java 1.8 has some problems on the intel 3000 graphics card, which is the one I have. I downgraded to 1.7 and the runnables are now working perfectly ;) Sent the jar to a friend of mine, and he was also able to run it without problems</p>\n"}],"owner":{"account_id":4343151,"reputation":53,"user_id":3545896,"display_name":"Tholok"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":33631046,"answer_count":1,"score":1,"last_activity_date":1691284733,"creation_date":1447069036,"question_id":33608267,"body_markdown":"I followed this: [https://www.youtube.com/watch?v=5stQZqOAM70][1] tutorial online. (exported to runnable jar file, then made jar file with jarsplice). I included all the necessary jars and natives like he explained, but when I try to run the application I get an alert box that says this: LoadLibrary failed with error 1114. \r\n\r\nPlease speak up if you need to see any files or code. Help me! I am using Eclipse \r\n\r\n\r\n  [1]: https://www.youtube.com/watch?v=5stQZqOAM70","title":"Error while running exported Slick2d project","body":"<p>I followed this: <a href=\"https://www.youtube.com/watch?v=5stQZqOAM70\" rel=\"nofollow\">https://www.youtube.com/watch?v=5stQZqOAM70</a> tutorial online. (exported to runnable jar file, then made jar file with jarsplice). I included all the necessary jars and natives like he explained, but when I try to run the application I get an alert box that says this: LoadLibrary failed with error 1114. </p>\n\n<p>Please speak up if you need to see any files or code. Help me! I am using Eclipse </p>\n"},{"tags":["java","eclipse","lwjgl","slick2d"],"answers":[{"tags":[],"owner":{"account_id":5741387,"reputation":147,"user_id":4534002,"display_name":"JasonPh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1464428703,"creation_date":1464428703,"answer_id":37497492,"question_id":37496151,"body_markdown":"Your problem is simple. Instead of writing `appgc=new AppGameContainer(newGame(gamename));`, you need to write `appgc=new AppGameContainer(new Game(gamename));`","title":"Having problems running game in Java Slick library and lwjgl","body":"<p>Your problem is simple. Instead of writing <code>appgc=new AppGameContainer(newGame(gamename));</code>, you need to write <code>appgc=new AppGameContainer(new Game(gamename));</code></p>\n"}],"owner":{"display_name":"user6337937"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691284718,"creation_date":1464418558,"question_id":37496151,"body_markdown":"I am working in creating a game and I am using Slick and lwjgl. My java version is jdk1.7.0_79. This is my code:\r\n\r\n    package javagame;\r\n     import org.newdawn.slick.AppGameContainer;\r\n     import org.newdawn.slick.GameContainer;\r\n     import org.newdawn.slick.SlickException;\r\n     import org.newdawn.slick.state.GameState;\r\n     import org.newdawn.slick.state.StateBasedGame;\r\n    /*\r\n     * First we import the things we need\r\n    */\r\n    public class Game extends StateBasedGame{\r\n\tpublic static final String gamename=&quot;Ham Blaster&quot;;\r\n\tpublic static final int menu =0;\r\n\tpublic static final int play =1;\r\n    /*\r\n    * Startup things of our game\r\n    */\r\n\tpublic Game(String gamename) {\r\n\t\tsuper(gamename);\r\n\t\tthis.addState((GameState) new Menu(menu));\r\n\t\tthis.addState((GameState) new Play(play));\r\n \r\n\t}\r\n\t/*\r\n\t * Here we create the two states or screens of our game.\r\n\t */\r\n\tpublic void initStatesList (GameContainer gc)throws SlickException{\r\n\t\tthis.getState(menu).init(gc, this);\r\n\t\tthis.getState(play).init(gc, this);\r\n\t\tthis.enterState(menu);\r\n\t}\r\n\t/*\r\n\t * Here we set the display settings and this is going to be our main method.\r\n\t */\r\n\tpublic static void main(String[]args){\r\n\t\tAppGameContainer appgc;\r\n\t\ttry{\r\n\t\t\tappgc=new AppGameContainer(newGame(gamename));\r\n\t\t\tappgc.setDisplayMode(640, 360, false);\r\n\t\t\tappgc.start();\r\n\t\t}catch(SlickException e){\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n    }\r\nIt gives me error on newGame(gamename)) saying that this method is undefined for the type Game. Since I am using Eclipse it gives me some instructions when there is an error and it instructed me to create a method for it. Eclipse created the method and this the method code:\r\n\r\n    \tprivate static org.newdawn.slick.Game newGame(String gamename2) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\treturn null;\r\n\t}\r\nWhat should I write inside of it?\r\nAlso here is the code of the 2 other screens:\r\nPlay screen:\r\n\r\n    package javagame;\r\n    import org.newdawn.slick.GameContainer;\r\n    import org.newdawn.slick.Graphics;\r\n    import org.newdawn.slick.state.StateBasedGame;\r\n\r\n     public class Play extends Exception {\r\n\t  public Play(int play){\r\n\t  }\r\n\t  public void init (GameContainer gc, StateBasedGame sbg) throws Play {\r\n\t  }\r\n\t  /* \r\n\t   Render is used to draw things\r\n\t   */\r\n\t  public void render (GameContainer gc, StateBasedGame sbg, Graphics g)throws Play {\r\n\t  }\r\n\t  /*\r\n\t   Update is used to update the images in your game\r\n\t   */\r\n\t  public void update (GameContainer gc, StateBasedGame sbg, Graphics g, int delta)throws Play{  \r\n\t  }\r\n\t  public int getID(){\r\n\t\t  return 1;\r\n\t}\r\n    }\r\n\r\n\r\nAnd the menu screen:\r\n\r\n    package javagame;\r\n    import org.newdawn.slick.GameContainer;\r\n    import org.newdawn.slick.Graphics;\r\n    import org.newdawn.slick.state.StateBasedGame;\r\n\r\n     public class Menu extends Exception {\r\n\t  public Menu(int menu) {}\r\n\t\t  public void init (GameContainer gc, StateBasedGame sbg) throws Menu {\r\n\t\t  }\r\n\t\t  public void render (GameContainer gc, StateBasedGame sbg, Graphics g)throws Menu {\r\n\t\t  }\r\n\t\t  public void update (GameContainer gc, StateBasedGame sbg, Graphics g, int delta)throws Menu{  \r\n\t\t  }\r\n\t\t  public int getID(){\r\n\t\t\t  return 0;\r\n\t}\r\n  \r\n    }\r\nScreenshot of the error:\r\n\r\n\r\nhttps://i.stack.imgur.com/8BamS.png","title":"Having problems running game in Java Slick library and lwjgl","body":"<p>I am working in creating a game and I am using Slick and lwjgl. My java version is jdk1.7.0_79. This is my code:</p>\n\n<pre><code>package javagame;\n import org.newdawn.slick.AppGameContainer;\n import org.newdawn.slick.GameContainer;\n import org.newdawn.slick.SlickException;\n import org.newdawn.slick.state.GameState;\n import org.newdawn.slick.state.StateBasedGame;\n/*\n * First we import the things we need\n*/\npublic class Game extends StateBasedGame{\npublic static final String gamename=\"Ham Blaster\";\npublic static final int menu =0;\npublic static final int play =1;\n/*\n* Startup things of our game\n*/\npublic Game(String gamename) {\n    super(gamename);\n    this.addState((GameState) new Menu(menu));\n    this.addState((GameState) new Play(play));\n\n}\n/*\n * Here we create the two states or screens of our game.\n */\npublic void initStatesList (GameContainer gc)throws SlickException{\n    this.getState(menu).init(gc, this);\n    this.getState(play).init(gc, this);\n    this.enterState(menu);\n}\n/*\n * Here we set the display settings and this is going to be our main method.\n */\npublic static void main(String[]args){\n    AppGameContainer appgc;\n    try{\n        appgc=new AppGameContainer(newGame(gamename));\n        appgc.setDisplayMode(640, 360, false);\n        appgc.start();\n    }catch(SlickException e){\n        e.printStackTrace();\n    }\n}\n}\n</code></pre>\n\n<p>It gives me error on newGame(gamename)) saying that this method is undefined for the type Game. Since I am using Eclipse it gives me some instructions when there is an error and it instructed me to create a method for it. Eclipse created the method and this the method code:</p>\n\n<pre><code>    private static org.newdawn.slick.Game newGame(String gamename2) {\n    // TODO Auto-generated method stub\n    return null;\n}\n</code></pre>\n\n<p>What should I write inside of it?\nAlso here is the code of the 2 other screens:\nPlay screen:</p>\n\n<pre><code>package javagame;\nimport org.newdawn.slick.GameContainer;\nimport org.newdawn.slick.Graphics;\nimport org.newdawn.slick.state.StateBasedGame;\n\n public class Play extends Exception {\n  public Play(int play){\n  }\n  public void init (GameContainer gc, StateBasedGame sbg) throws Play {\n  }\n  /* \n   Render is used to draw things\n   */\n  public void render (GameContainer gc, StateBasedGame sbg, Graphics g)throws Play {\n  }\n  /*\n   Update is used to update the images in your game\n   */\n  public void update (GameContainer gc, StateBasedGame sbg, Graphics g, int delta)throws Play{  \n  }\n  public int getID(){\n      return 1;\n}\n}\n</code></pre>\n\n<p>And the menu screen:</p>\n\n<pre><code>package javagame;\nimport org.newdawn.slick.GameContainer;\nimport org.newdawn.slick.Graphics;\nimport org.newdawn.slick.state.StateBasedGame;\n\n public class Menu extends Exception {\n  public Menu(int menu) {}\n      public void init (GameContainer gc, StateBasedGame sbg) throws Menu {\n      }\n      public void render (GameContainer gc, StateBasedGame sbg, Graphics g)throws Menu {\n      }\n      public void update (GameContainer gc, StateBasedGame sbg, Graphics g, int delta)throws Menu{  \n      }\n      public int getID(){\n          return 0;\n}\n\n}\n</code></pre>\n\n<p>Screenshot of the error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/8BamS.png\" rel=\"nofollow\">https://i.stack.imgur.com/8BamS.png</a></p>\n"},{"tags":["java","json","eclipse","lwjgl","slick2d"],"comments":[{"owner":{"account_id":6677355,"reputation":3705,"user_id":5151575,"accept_rate":83,"display_name":"Enigo"},"score":1,"creation_date":1465450939,"post_id":37717623,"comment_id":62908221,"body_markdown":"what exception do you get? print it with `System.out.println` for example","body":"what exception do you get? print it with <code>System.out.println</code> for example"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":1,"creation_date":1465450940,"post_id":37717623,"comment_id":62908222,"body_markdown":"just print out the exception","body":"just print out the exception"},{"owner":{"account_id":5694623,"reputation":6528,"user_id":4501480,"accept_rate":55,"display_name":"Vikrant Kashyap"},"score":1,"creation_date":1465451443,"post_id":37717623,"comment_id":62908415,"body_markdown":"please add the print stacktace in your question. @squirt706 Thank you","body":"please add the print stacktace in your question. @squirt706 Thank you"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1465452384,"post_id":37717623,"comment_id":62908815,"body_markdown":"You know a fair amount of Java, yet you don&#39;t know the absolute basics of displaying an exception stacktrace with `e.printStackTrace();`?","body":"You know a fair amount of Java, yet you don&#39;t know the absolute basics of displaying an exception stacktrace with <code>e.printStackTrace();</code>?"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1465452449,"post_id":37717623,"comment_id":62908841,"body_markdown":"@Enigo You *don&#39;t* use `System.out.println` to display exceptions. Using that to display a `NullPointerException` will display `null` which is about as helpful as his current exception &quot;handling&quot;.","body":"@Enigo You <i>don&#39;t</i> use <code>System.out.println</code> to display exceptions. Using that to display a <code>NullPointerException</code> will display <code>null</code> which is about as helpful as his current exception &quot;handling&quot;."},{"owner":{"account_id":7878128,"reputation":33,"user_id":5953230,"display_name":"squirt706"},"score":0,"creation_date":1465474513,"post_id":37717623,"comment_id":62922575,"body_markdown":"gotcha I changed it","body":"gotcha I changed it"}],"answers":[{"tags":[],"owner":{"account_id":5694623,"reputation":6528,"user_id":4501480,"accept_rate":55,"display_name":"Vikrant Kashyap"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1465451294,"creation_date":1465451294,"answer_id":37717797,"question_id":37717623,"body_markdown":"there are two kind of exception introduced in `java`.\n\n&gt; **A) Checked Exception (Compile Time)** :- Handle the exception at compile time just to detect any external component or resource dependency (like `FileNotFound`, `IOException`).\n&gt;\n&gt; **B)  Unchecked Exception (Runtime Exception)** :- This exception came while any logical mistake or any error because of any unexpected situation.(`IndexOutOfBound`, `NullPointer` etc.)\n\nNow Your Question \n\n&gt;why an exception is being thrown when trying to load the .json map file ?\n\nIf you try to load any file `.json` in your program which is a external resource loaded from any Storage area (disk, cloud etc). So, there may be a chance of `File` is not present at the storage area. \n\nSo, to handle these kind of uncertain situation your program should be ready to handle these kind of situation (this is not a logical error it&#39;s a dependency on other resource which is indirect part of Your Code).\n\nthis is the reason to put this kind of stuff in `Checked Exception` Segment.\n\n","title":"JSON and Eclipse - Why is an exception being thrown?","body":"<p>there are two kind of exception introduced in <code>java</code>.</p>\n<blockquote>\n<p><strong>A) Checked Exception (Compile Time)</strong> :- Handle the exception at compile time just to detect any external component or resource dependency (like <code>FileNotFound</code>, <code>IOException</code>).</p>\n<p><strong>B)  Unchecked Exception (Runtime Exception)</strong> :- This exception came while any logical mistake or any error because of any unexpected situation.(<code>IndexOutOfBound</code>, <code>NullPointer</code> etc.)</p>\n</blockquote>\n<p>Now Your Question</p>\n<blockquote>\n<p>why an exception is being thrown when trying to load the .json map file ?</p>\n</blockquote>\n<p>If you try to load any file <code>.json</code> in your program which is a external resource loaded from any Storage area (disk, cloud etc). So, there may be a chance of <code>File</code> is not present at the storage area.</p>\n<p>So, to handle these kind of uncertain situation your program should be ready to handle these kind of situation (this is not a logical error it's a dependency on other resource which is indirect part of Your Code).</p>\n<p>this is the reason to put this kind of stuff in <code>Checked Exception</code> Segment.</p>\n"},{"tags":[],"owner":{"account_id":79673,"reputation":40911,"user_id":225757,"accept_rate":72,"display_name":"Roland Illig"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1465451682,"creation_date":1465451682,"answer_id":37717890,"question_id":37717623,"body_markdown":"When you catch the exception `e`, you should do something with that `e`. To get more information about where the exception was thrown, use this code:\r\n\r\n    } catch (Exception e) {\r\n      e.printStackTrace();\r\n      System.exit(1); // Because 1 means failure, 0 means OK.\r\n    }\r\n","title":"JSON and Eclipse - Why is an exception being thrown?","body":"<p>When you catch the exception <code>e</code>, you should do something with that <code>e</code>. To get more information about where the exception was thrown, use this code:</p>\n\n<pre><code>} catch (Exception e) {\n  e.printStackTrace();\n  System.exit(1); // Because 1 means failure, 0 means OK.\n}\n</code></pre>\n"}],"owner":{"account_id":7878128,"reputation":33,"user_id":5953230,"display_name":"squirt706"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":260,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":2,"score":-2,"last_activity_date":1691284684,"creation_date":1465450565,"question_id":37717623,"body_markdown":"I know a fair amount about java but am new to Slick2d and JSON. I cannot figure out why an exception is being thrown when trying to load the .json map file. I am using eclipse, slick2d, lwjgl and json. I built a map file and it is located in eclipse under res/maps/\r\nHere is the stack trace\r\n\r\n    java.lang.ClassCastException: java.lang.String cannot be cast to org.json.simple.JSONArray\r\n\tat cardboard.world.World.load(World.java:33)\r\n\tat cardboard.Engine.initStatesList(Engine.java:49)\r\n\tat org.newdawn.slick.state.StateBasedGame.init(StateBasedGame.java:164)\r\n\tat org.newdawn.slick.AppGameContainer.setup(AppGameContainer.java:393)\r\n\tat org.newdawn.slick.AppGameContainer.start(AppGameContainer.java:317)\r\n\tat cardboard.Engine.main(Engine.java:31)\r\n\r\nHere is the executing code\r\n\r\n    try {\r\n\t\t\tWorld.load(&quot;res/maps/world.json&quot;);\r\n\t\t} catch (Exception e) {\r\n\t\t\tSystem.err.println(&quot;Map does not exist&quot;);\r\n\t\t\tSystem.exit(0);\r\n\t\t}\r\nHere is the World class\r\n\r\n    import java.io.FileReader;\r\n\r\n    import org.json.simple.JSONArray;\r\n    import org.json.simple.JSONObject;\r\n    import org.json.simple.parser.JSONParser;\r\n    import org.newdawn.slick.Image;\r\n    import org.newdawn.slick.SpriteSheet;\r\n\r\n    import cardboard.Resources;\r\n\r\n    public class World {\r\n\r\n\tpublic static Image[][] solids;\r\n\tpublic static int WIDTH;\r\n\tpublic static int HEIGHT;\r\n\t\r\n\tpublic static void load(String path) throws Exception {\r\n\t\t\r\n\t\tJSONParser parser = new JSONParser();\r\n\t\tObject obj = parser.parse(new FileReader(path));\r\n\t\tJSONObject jObj = (JSONObject) obj;\r\n\t\t\r\n\t\tJSONArray layers = (JSONArray) jObj.get(&quot;layers&quot;);\r\n\t\tint amount = layers.size();\r\n\t\t\r\n\t\tfor (int i = 0; i &lt; amount; i++) {\r\n\t\t\tJSONObject layer = (JSONObject) layers.get(i);\r\n\t\t\tString type = (String) layer.get(&quot;name&quot;);\r\n\t\t\t\r\n\t\t\tif (type.equals(&quot;solids&quot;)) {\r\n\t\t\t\tsolids = parse((JSONArray)layer.get(&quot;data&quot;));\r\n\t\t\t} else if (type.equals(&quot;spawns&quot;)) {\r\n\t\t\t\t// Spawn point code\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\tprivate static Image[][] parse(JSONArray arr) {\r\n\t\t\r\n\t\tImage[][] layer = new Image [WIDTH][HEIGHT];\r\n\t\tint index;\r\n\t\t\r\n\t\tfor (int y = 0; y &lt; WIDTH; y++) {\r\n\t\t\tfor (int x = 0; x &lt; HEIGHT; x++) {\r\n\t\t\t\tindex = (int)((long)arr.get((y * WIDTH) + x));\r\n\t\t\t\tlayer[x][y] = getSpriteImage(index);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn layer;\r\n\t}\r\n\t\r\n\tprivate static Image getSpriteImage(int index) {\r\n\t\tif (index == 0) return null;\r\n\t\tindex -= 1;\r\n\t\t\r\n\t\tSpriteSheet sheet = Resources.getSprite(&quot;tileset&quot;);\r\n\t\t//int vertical = sheet.getVerticalCount();\r\n\t\tint horizontal = sheet.getHorizontalCount();\r\n\t\t\r\n\t\tint y = (index / horizontal); //vert?\r\n\t\tint x = (index % horizontal);\r\n\t\t\r\n\t\treturn sheet.getSubImage(x, y);\r\n\t}\r\n    }\r\n\r\nEclipse is throwing no errors I am just getting the error message I wrote &quot;Map does not exist&quot; It would be super if you could take a look! Thanks\r\n\r\nIn case you need Resources.java\r\n\r\n    package cardboard;\r\n\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n\r\n    import org.newdawn.slick.Image;\r\n    import org.newdawn.slick.SlickException;\r\n    import org.newdawn.slick.Sound;\r\n    import org.newdawn.slick.SpriteSheet;\r\n\r\n    import cardboard.world.Tile;\r\n\r\n    public class Resources {\r\n\r\n\tprivate static Map&lt;String, Image&gt; images;\r\n\tprivate static Map&lt;String, SpriteSheet&gt; sprites;\r\n\tprivate static Map&lt;String, Sound&gt; sounds;\r\n\t\r\n\tpublic Resources() {\r\n\t\t\r\n\t\timages = new HashMap&lt;String, Image&gt;();\r\n\t\tsprites = new HashMap&lt;String, SpriteSheet&gt;();\r\n\t\tsounds = new HashMap&lt;String, Sound&gt;();\r\n\t\t\r\n\t\ttry {\r\n\t\t\tsprites.put(&quot;tileset&quot;, loadSprite(&quot;res/tileset.png&quot;,  Tile.SMALL_SIZE, Tile.SMALL_SIZE));\r\n\t\t} catch (SlickException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static Image loadImage(String path) throws SlickException {\r\n\t\treturn new Image(path, false, Image.FILTER_NEAREST);\r\n\t}\r\n\t\r\n\tpublic static SpriteSheet loadSprite(String path, int tw, int th) throws    SlickException {\r\n\t\treturn new SpriteSheet(loadImage(path), tw, th);\r\n\t}\r\n\t\r\n\tpublic static SpriteSheet getSprite(String getter) {\r\n\t\treturn sprites.get(getter);\r\n\t}\r\n\t\r\n\tpublic static Image getSpriteImage(String getter, int x, int y) {\r\n\t\treturn sprites.get(getter).getSubImage(x,y);\r\n\t}\r\n\t\r\n\tpublic static Image image(String getter) {\r\n\t\treturn sprites.get(getter);\r\n\t}\r\n\t\r\n\tpublic static Image getImage(String getter) {\r\n\t\treturn images.get(getter);\r\n\t}\r\n\t\r\n\tpublic static Sound getSound(String getter) {\r\n\t\treturn sounds.get(getter);\r\n\t}\r\n    }","title":"JSON and Eclipse - Why is an exception being thrown?","body":"<p>I know a fair amount about java but am new to Slick2d and JSON. I cannot figure out why an exception is being thrown when trying to load the .json map file. I am using eclipse, slick2d, lwjgl and json. I built a map file and it is located in eclipse under res/maps/\nHere is the stack trace</p>\n\n<pre><code>java.lang.ClassCastException: java.lang.String cannot be cast to org.json.simple.JSONArray\nat cardboard.world.World.load(World.java:33)\nat cardboard.Engine.initStatesList(Engine.java:49)\nat org.newdawn.slick.state.StateBasedGame.init(StateBasedGame.java:164)\nat org.newdawn.slick.AppGameContainer.setup(AppGameContainer.java:393)\nat org.newdawn.slick.AppGameContainer.start(AppGameContainer.java:317)\nat cardboard.Engine.main(Engine.java:31)\n</code></pre>\n\n<p>Here is the executing code</p>\n\n<pre><code>try {\n        World.load(\"res/maps/world.json\");\n    } catch (Exception e) {\n        System.err.println(\"Map does not exist\");\n        System.exit(0);\n    }\n</code></pre>\n\n<p>Here is the World class</p>\n\n<pre><code>import java.io.FileReader;\n\nimport org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\nimport org.json.simple.parser.JSONParser;\nimport org.newdawn.slick.Image;\nimport org.newdawn.slick.SpriteSheet;\n\nimport cardboard.Resources;\n\npublic class World {\n\npublic static Image[][] solids;\npublic static int WIDTH;\npublic static int HEIGHT;\n\npublic static void load(String path) throws Exception {\n\n    JSONParser parser = new JSONParser();\n    Object obj = parser.parse(new FileReader(path));\n    JSONObject jObj = (JSONObject) obj;\n\n    JSONArray layers = (JSONArray) jObj.get(\"layers\");\n    int amount = layers.size();\n\n    for (int i = 0; i &lt; amount; i++) {\n        JSONObject layer = (JSONObject) layers.get(i);\n        String type = (String) layer.get(\"name\");\n\n        if (type.equals(\"solids\")) {\n            solids = parse((JSONArray)layer.get(\"data\"));\n        } else if (type.equals(\"spawns\")) {\n            // Spawn point code\n        }\n    }\n\n}\n\nprivate static Image[][] parse(JSONArray arr) {\n\n    Image[][] layer = new Image [WIDTH][HEIGHT];\n    int index;\n\n    for (int y = 0; y &lt; WIDTH; y++) {\n        for (int x = 0; x &lt; HEIGHT; x++) {\n            index = (int)((long)arr.get((y * WIDTH) + x));\n            layer[x][y] = getSpriteImage(index);\n        }\n    }\n\n    return layer;\n}\n\nprivate static Image getSpriteImage(int index) {\n    if (index == 0) return null;\n    index -= 1;\n\n    SpriteSheet sheet = Resources.getSprite(\"tileset\");\n    //int vertical = sheet.getVerticalCount();\n    int horizontal = sheet.getHorizontalCount();\n\n    int y = (index / horizontal); //vert?\n    int x = (index % horizontal);\n\n    return sheet.getSubImage(x, y);\n}\n}\n</code></pre>\n\n<p>Eclipse is throwing no errors I am just getting the error message I wrote \"Map does not exist\" It would be super if you could take a look! Thanks</p>\n\n<p>In case you need Resources.java</p>\n\n<pre><code>package cardboard;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport org.newdawn.slick.Image;\nimport org.newdawn.slick.SlickException;\nimport org.newdawn.slick.Sound;\nimport org.newdawn.slick.SpriteSheet;\n\nimport cardboard.world.Tile;\n\npublic class Resources {\n\nprivate static Map&lt;String, Image&gt; images;\nprivate static Map&lt;String, SpriteSheet&gt; sprites;\nprivate static Map&lt;String, Sound&gt; sounds;\n\npublic Resources() {\n\n    images = new HashMap&lt;String, Image&gt;();\n    sprites = new HashMap&lt;String, SpriteSheet&gt;();\n    sounds = new HashMap&lt;String, Sound&gt;();\n\n    try {\n        sprites.put(\"tileset\", loadSprite(\"res/tileset.png\",  Tile.SMALL_SIZE, Tile.SMALL_SIZE));\n    } catch (SlickException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n}\n\npublic static Image loadImage(String path) throws SlickException {\n    return new Image(path, false, Image.FILTER_NEAREST);\n}\n\npublic static SpriteSheet loadSprite(String path, int tw, int th) throws    SlickException {\n    return new SpriteSheet(loadImage(path), tw, th);\n}\n\npublic static SpriteSheet getSprite(String getter) {\n    return sprites.get(getter);\n}\n\npublic static Image getSpriteImage(String getter, int x, int y) {\n    return sprites.get(getter).getSubImage(x,y);\n}\n\npublic static Image image(String getter) {\n    return sprites.get(getter);\n}\n\npublic static Image getImage(String getter) {\n    return images.get(getter);\n}\n\npublic static Sound getSound(String getter) {\n    return sounds.get(getter);\n}\n}\n</code></pre>\n"},{"tags":["java","arraylist","lwjgl","slick2d"],"comments":[{"owner":{"account_id":8766622,"reputation":1498,"user_id":6554747,"accept_rate":100,"display_name":"progyammer"},"score":0,"creation_date":1475316142,"post_id":39805225,"comment_id":66902184,"body_markdown":"Paste your code here in text form with proper formatting. DO NOT post links to external sources.","body":"Paste your code here in text form with proper formatting. DO NOT post links to external sources."}],"answers":[{"tags":[],"owner":{"account_id":1073306,"reputation":1170,"user_id":1072059,"accept_rate":78,"display_name":"JuniorDev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1475316397,"creation_date":1475316397,"answer_id":39805323,"question_id":39805225,"body_markdown":"You are removing an item from ArrayList while iterating it and cause it to throw ConcurrentModificationException.\r\n\r\nLet&#39;s trace your code;\r\n\r\n        public synchronized void HandleItems() {\r\n    \t\tif (!items.isEmpty()) {\r\n    \t\t\tfor (Item i : items) {\r\n    \t\t\t\ti.Update();\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n\r\nThis calls Update() on Item object, which is:\r\n\r\n        public void Update() {\r\n    \t\tDraw();\r\n    \t\tCheckPickUp();\r\n    \t}\r\n    \tpublic void CheckPickUp(){\r\n    \t\tif(Canvas.isColliding(Game.p.getX(), Game.p.getY(), Game.p.getX() + 32, Game.p.getY() - 32, x, y));\r\n    \t    System.out.println(&quot;Colliding&quot;);\r\n    \t\tthis.ToBag();\r\n    \t}\r\n    \r\n    \tpublic void ToBag() {\r\n    \t\tInventory i = null;\r\n    \t\ti = Game.p.getI();\r\n    \t\tGame.world.getItems().remove(this);\r\n    \t\ti.getInventory().add(new BagItem(type, i, tex, texturefactor, durability, power));\r\n    \t}\r\n\r\nPay attention to `toBag()`. You are removing the `Item` object from your collection which you are actually in process of iterating.\r\n\r\nBasically, you have to use an iterator instead of directly removing from the arraylist.\r\n\r\nFor further explanation refer to similar questions in this site:\r\nhttps://stackoverflow.com/questions/223918/iterating-through-a-collection-avoiding-concurrentmodificationexception-when-re","title":"Updating Items in Arraylist throws ConcurrentModificationException","body":"<p>You are removing an item from ArrayList while iterating it and cause it to throw ConcurrentModificationException.</p>\n\n<p>Let's trace your code;</p>\n\n<pre><code>    public synchronized void HandleItems() {\n        if (!items.isEmpty()) {\n            for (Item i : items) {\n                i.Update();\n            }\n        }\n    }\n</code></pre>\n\n<p>This calls Update() on Item object, which is:</p>\n\n<pre><code>    public void Update() {\n        Draw();\n        CheckPickUp();\n    }\n    public void CheckPickUp(){\n        if(Canvas.isColliding(Game.p.getX(), Game.p.getY(), Game.p.getX() + 32, Game.p.getY() - 32, x, y));\n        System.out.println(\"Colliding\");\n        this.ToBag();\n    }\n\n    public void ToBag() {\n        Inventory i = null;\n        i = Game.p.getI();\n        Game.world.getItems().remove(this);\n        i.getInventory().add(new BagItem(type, i, tex, texturefactor, durability, power));\n    }\n</code></pre>\n\n<p>Pay attention to <code>toBag()</code>. You are removing the <code>Item</code> object from your collection which you are actually in process of iterating.</p>\n\n<p>Basically, you have to use an iterator instead of directly removing from the arraylist.</p>\n\n<p>For further explanation refer to similar questions in this site:\n<a href=\"https://stackoverflow.com/questions/223918/iterating-through-a-collection-avoiding-concurrentmodificationexception-when-re\">Iterating through a Collection, avoiding ConcurrentModificationException when removing in loop</a></p>\n"},{"tags":[],"owner":{"account_id":4503495,"reputation":510,"user_id":3661478,"accept_rate":50,"display_name":"Ganesh S"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1475316648,"creation_date":1475316648,"answer_id":39805371,"question_id":39805225,"body_markdown":"You&#39;re `Item.toBag()` is causing this exception. The line `Game.world.getItems().remove(this);` trying to remove the item from the ArrayList.  \r\n\r\nYou can&#39;t modify a List in a for each loop. You can only call remove method when using the Iterator directly.","title":"Updating Items in Arraylist throws ConcurrentModificationException","body":"<p>You're <code>Item.toBag()</code> is causing this exception. The line <code>Game.world.getItems().remove(this);</code> trying to remove the item from the ArrayList.  </p>\n\n<p>You can't modify a List in a for each loop. You can only call remove method when using the Iterator directly.</p>\n"}],"owner":{"account_id":8364950,"reputation":53,"user_id":6730293,"display_name":"Jakibah"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":776,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1475317096,"accepted_answer_id":39805323,"answer_count":2,"score":-2,"last_activity_date":1691284660,"creation_date":1475315751,"question_id":39805225,"body_markdown":"I am making a game in java with lwjgl and slick. And I have a World that contains a arraylist with all items laying on the ground that it has to update. But when it updates the items a second time it throws a ConcurrentModificationException.\r\n\r\nHow can I fix this?\r\n\r\nThis is the full error:`Exception in thread &quot;main&quot; java.util.ConcurrentModificationException\r\n\tat java.util.ArrayList$Itr.checkForComodification(Unknown Source)\r\n\tat java.util.ArrayList$Itr.next(Unknown Source)\r\n\tat com.jakibah.infinyvale.World.HandleItems(World.java:43)\r\n\tat com.jakibah.infinyvale.World.Update(World.java:65)\r\n\tat com.jakibah.infinyvale.Game.Update(Game.java:29)\r\n\tat com.jakibah.infinyvale.Canvas.CreateCanvas(Canvas.java:41)\r\n\tat com.jakibah.infinyvale.Game.main(Game.java:16)`\r\n\r\nAnd this is my code: \r\nWorld:\r\n\r\n    package com.jakibah.infinyvale;\r\n\r\n\r\n    public class World {\r\n\r\n\tpublic Tile[][] map;\r\n\tprivate int TilesWide, TileHeight;\r\n\tpublic ArrayList&lt;Item&gt; items = new ArrayList&lt;Item&gt;();\r\n\r\n\tpublic World(int volume) {\r\n\r\n\t\tthis.TilesWide = volume / 2;\r\n\t\tthis.TileHeight = volume / 2;\r\n\t\tmap = new Tile[TilesWide][TileHeight];\r\n\t\tfor (int i = 0; i &lt; map.length; i++) {\r\n\t\t\tfor (int j = 0; j &lt; map[i].length; j++) {\r\n\t\t\t\tmap[i][j] = new Tile(TileType.Test, i * 32, j * 32, 32);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic World(int[][] newMap) {\r\n\t\tthis.TilesWide = newMap[0].length;\r\n\t\tthis.TileHeight = newMap.length;\r\n\t\tmap = new Tile[TilesWide][TileHeight];\r\n\t\tfor (int i = 0; i &lt; map.length; i++) {\r\n\t\t\tfor (int j = 0; j &lt; map[i].length; j++) {\r\n\t\t\t\tswitch (newMap[j][i]) {\r\n\t\t\t\tcase 0:\r\n\t\t\t\t\tmap[i][j] = new Tile(TileType.Test, i * 32, j * 32, 32);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic synchronized void HandleItems() {\r\n\t\tif (!items.isEmpty()) {\r\n\t\t\tfor (Item i : items) {\r\n\t\t\t\ti.Update();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic Tile GetTile(int xplace, int yplace) {\r\n\r\n\t\tif (xplace &lt; TilesWide &amp;&amp; yplace &lt; TileHeight &amp;&amp; xplace &gt; -1\r\n\t\t\t\t&amp;&amp; yplace &gt; -1)\r\n\t\t\treturn map[xplace][yplace];\r\n\t\telse\r\n\t\t\treturn null;\r\n\t}\r\n\r\n\tpublic void Update() {\r\n\t\tfor (int i = 0; i &lt; map.length; i++) {\r\n\t\t\tfor (int j = 0; j &lt; map[i].length; j++) {\r\n\t\t\t\tTile t = map[i][j];\r\n\t\t\t\tt.Update();\r\n\t\t\t}\r\n\t\t}\r\n\t\tHandleItems();\r\n\t}\r\n\r\nItem:\r\n\r\n    public class Item {\r\n\tprivate ItemType type;\r\n\tprivate Texture tex;\r\n\tprivate int x, y;\r\n\tprivate World w;\r\n\tprivate int texturefactor;\r\n\tprivate int durability;\r\n\tprivate int power;\r\n\r\n\tpublic Item(ItemType type, Texture tex, int x, int y, World w,int texturefactor, int durability, int power) {\r\n\t\tthis.type = type;\r\n\t\tthis.tex = tex;\r\n\t\tthis.x = y;\r\n\t\tthis.y = y;\r\n\t\tthis.w = w;\r\n\t\tthis.texturefactor = texturefactor;\r\n\t\tthis.durability = durability;\r\n\t\tthis.power = power;\r\n\t\tthis.w.getItems().add(this);\r\n\t}\r\n\r\n\tpublic void Draw() {\r\n\t\tCanvas.DrawQuadTex(tex, x, y, texturefactor, texturefactor);\r\n\t}\r\n\r\n\tpublic void Update() {\r\n\t\tDraw();\r\n\t\tCheckPickUp();\r\n\t}\r\n\tpublic void CheckPickUp(){\r\n\t\tif(Canvas.isColliding(Game.p.getX(), Game.p.getY(), Game.p.getX() + 32, Game.p.getY() - 32, x, y));\r\n\t    System.out.println(&quot;Colliding&quot;);\r\n\t\tthis.ToBag();\r\n\t}\r\n\r\n\tpublic void ToBag() {\r\n\t\tInventory i = null;\r\n\t\ti = Game.p.getI();\r\n\t\tGame.world.getItems().remove(this);\r\n\t\ti.getInventory().add(new BagItem(type, i, tex, texturefactor, durability, power));\r\n}\r\n\r\n\r\n","title":"Updating Items in Arraylist throws ConcurrentModificationException","body":"<p>I am making a game in java with lwjgl and slick. And I have a World that contains a arraylist with all items laying on the ground that it has to update. But when it updates the items a second time it throws a ConcurrentModificationException.</p>\n\n<p>How can I fix this?</p>\n\n<p>This is the full error:<code>Exception in thread \"main\" java.util.ConcurrentModificationException\n    at java.util.ArrayList$Itr.checkForComodification(Unknown Source)\n    at java.util.ArrayList$Itr.next(Unknown Source)\n    at com.jakibah.infinyvale.World.HandleItems(World.java:43)\n    at com.jakibah.infinyvale.World.Update(World.java:65)\n    at com.jakibah.infinyvale.Game.Update(Game.java:29)\n    at com.jakibah.infinyvale.Canvas.CreateCanvas(Canvas.java:41)\n    at com.jakibah.infinyvale.Game.main(Game.java:16)</code></p>\n\n<p>And this is my code: \nWorld:</p>\n\n<pre><code>package com.jakibah.infinyvale;\n\n\npublic class World {\n\npublic Tile[][] map;\nprivate int TilesWide, TileHeight;\npublic ArrayList&lt;Item&gt; items = new ArrayList&lt;Item&gt;();\n\npublic World(int volume) {\n\n    this.TilesWide = volume / 2;\n    this.TileHeight = volume / 2;\n    map = new Tile[TilesWide][TileHeight];\n    for (int i = 0; i &lt; map.length; i++) {\n        for (int j = 0; j &lt; map[i].length; j++) {\n            map[i][j] = new Tile(TileType.Test, i * 32, j * 32, 32);\n        }\n    }\n}\n\npublic World(int[][] newMap) {\n    this.TilesWide = newMap[0].length;\n    this.TileHeight = newMap.length;\n    map = new Tile[TilesWide][TileHeight];\n    for (int i = 0; i &lt; map.length; i++) {\n        for (int j = 0; j &lt; map[i].length; j++) {\n            switch (newMap[j][i]) {\n            case 0:\n                map[i][j] = new Tile(TileType.Test, i * 32, j * 32, 32);\n                break;\n            }\n\n        }\n    }\n}\n\npublic synchronized void HandleItems() {\n    if (!items.isEmpty()) {\n        for (Item i : items) {\n            i.Update();\n        }\n    }\n}\n\npublic Tile GetTile(int xplace, int yplace) {\n\n    if (xplace &lt; TilesWide &amp;&amp; yplace &lt; TileHeight &amp;&amp; xplace &gt; -1\n            &amp;&amp; yplace &gt; -1)\n        return map[xplace][yplace];\n    else\n        return null;\n}\n\npublic void Update() {\n    for (int i = 0; i &lt; map.length; i++) {\n        for (int j = 0; j &lt; map[i].length; j++) {\n            Tile t = map[i][j];\n            t.Update();\n        }\n    }\n    HandleItems();\n}\n</code></pre>\n\n<p>Item:</p>\n\n<pre><code>public class Item {\nprivate ItemType type;\nprivate Texture tex;\nprivate int x, y;\nprivate World w;\nprivate int texturefactor;\nprivate int durability;\nprivate int power;\n\npublic Item(ItemType type, Texture tex, int x, int y, World w,int texturefactor, int durability, int power) {\n    this.type = type;\n    this.tex = tex;\n    this.x = y;\n    this.y = y;\n    this.w = w;\n    this.texturefactor = texturefactor;\n    this.durability = durability;\n    this.power = power;\n    this.w.getItems().add(this);\n}\n\npublic void Draw() {\n    Canvas.DrawQuadTex(tex, x, y, texturefactor, texturefactor);\n}\n\npublic void Update() {\n    Draw();\n    CheckPickUp();\n}\npublic void CheckPickUp(){\n    if(Canvas.isColliding(Game.p.getX(), Game.p.getY(), Game.p.getX() + 32, Game.p.getY() - 32, x, y));\n    System.out.println(\"Colliding\");\n    this.ToBag();\n}\n\npublic void ToBag() {\n    Inventory i = null;\n    i = Game.p.getI();\n    Game.world.getItems().remove(this);\n    i.getInventory().add(new BagItem(type, i, tex, texturefactor, durability, power));\n</code></pre>\n\n<p>}</p>\n"},{"tags":["java","textures","lwjgl","slick2d"],"answers":[{"tags":[],"owner":{"account_id":11513143,"reputation":11,"user_id":8437251,"display_name":"Blackoutburst"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1502291332,"creation_date":1502291332,"answer_id":45594431,"question_id":45037009,"body_markdown":"To render Texture load with slick on LWJGL quads you need to bind the texture before draw the quads\r\n\r\njust try \r\n\r\n    texture.bind(); //texture = your Texture name\r\nbefore\r\n\r\n    glBegin(GL_QUADS);\r\n\r\n ","title":"Issue with displaying Textures using LWJGL and SlickUtil","body":"<p>To render Texture load with slick on LWJGL quads you need to bind the texture before draw the quads</p>\n\n<p>just try </p>\n\n<pre><code>texture.bind(); //texture = your Texture name\n</code></pre>\n\n<p>before</p>\n\n<pre><code>glBegin(GL_QUADS);\n</code></pre>\n"}],"owner":{"account_id":9228032,"reputation":122,"user_id":6855161,"display_name":"N. J. Funk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691284638,"creation_date":1499782325,"question_id":45037009,"body_markdown":"Ive tried a lot but dont find my error. Heres my Code:\r\n\r\n\r\n\r\n\tpublic class Renderer {\r\n\tpublic static final int WIDTH = 1080, HEIGHT = 720, FPS = 60;\r\n\tpublic static void createDisplay()\r\n\t{\r\n\t\ttry {\r\n\t\t\tDisplay.setDisplayMode(new DisplayMode(WIDTH,HEIGHT));\r\n\t\t\tDisplay.create();\r\n\t\t\tDisplay.setVSyncEnabled(true);\r\n\t\t} catch (LWJGLException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t\tSystem.exit(0);\r\n\t\t}\r\n\r\n\t\tGL11.glEnable(GL11.GL_TEXTURE_2D);               \r\n\r\n\t\tGL11.glClearColor(0.0f, 0.0f, 0.0f, 0.0f);          \r\n\r\n        \t// enable alpha blending\r\n        \tGL11.glEnable(GL11.GL_BLEND);\r\n        \tGL11.glBlendFunc(GL11.GL_SRC_ALPHA, GL11.GL_ONE_MINUS_SRC_ALPHA);\r\n\r\n        \tGL11.glViewport(0,0,WIDTH,HEIGHT);\r\n\t\tGL11.glMatrixMode(GL11.GL_MODELVIEW);\r\n\r\n\t\tGL11.glMatrixMode(GL11.GL_PROJECTION);\r\n\t\tGL11.glLoadIdentity();\r\n\t\tGL11.glOrtho(0, WIDTH, HEIGHT, 0, 1, -1);\r\n\t\tGL11.glMatrixMode(GL11.GL_MODELVIEW);\r\n\t}\r\n\t\r\n\tpublic static void updateDisplay(){\r\n\t\tDisplay.update();\r\n\t\tDisplay.sync(FPS);\r\n\t\tglClear(GL_COLOR_BUFFER_BIT);\r\n\t\tglClearColor(0.2f,0.2f,0.2f,1.0f);\r\n\t}\r\n\t\r\n\tpublic static void destroyDisplay()\r\n\t{\r\n\t\tDisplay.destroy();\r\n\t}\r\n\t\r\n\tpublic static void renderDisplay(ArrayList&lt;GameObject&gt; render, Camera cam)\r\n\t{\r\n\t\r\n\t\tColor.white.bind();\r\n\t\t\r\n\t\tfor(GameObject obj: render)\r\n\t\t{\r\n\r\n\t\t\tobj.getTex().bind();\r\n           if(obj instanceof Player)\r\n\t\t\t{\r\n\t\t\t\tglBegin(GL_QUADS);\r\n\t\t\t\tglTexCoord2f(0,0);\r\n\t\t\t\tglVertex2f(obj.getX()+WIDTH/2-cam.getX(), obj.getY()+HEIGHT/2-cam.getY());\r\n\t\t\t\tglTexCoord2f(obj.getTex().getWidth(),0);\r\n\t\t\t\tglVertex2f(obj.getX()+WIDTH/2+obj.getSizeX()-cam.getX(), obj.getY()+HEIGHT/2-cam.getY());\r\n\t\t\t\tglTexCoord2f(obj.getTex().getWidth(),obj.getTex().getHeight());\r\n\t\t\t\tglVertex2f(obj.getX()+WIDTH/2+obj.getSizeX()-cam.getX(), obj.getY()+HEIGHT/2+obj.getSizeY()-cam.getY());\r\n\t\t\t\tglTexCoord2f(0,obj.getTex().getHeight());\r\n\t\t\t\tglVertex2f(obj.getX()+WIDTH/2-cam.getX(), obj.getY()+HEIGHT/2+obj.getSizeY()-cam.getY());\r\n\t\t\t\tglEnd();\r\n\t\t\t}else{\r\n\t\t\t\tglBegin(GL_QUADS);\r\n\t\t\t\tglTexCoord2f(0,0);\r\n\t\t\t\tglVertex2f((obj.getX()-cam.getX()), (obj.getY()-cam.getY()));\r\n\t\t\t\tglTexCoord2f(1,0);\r\n\t\t\t\tglVertex2f((obj.getX()-cam.getX())+obj.getSizeX(), (obj.getY()-cam.getY()));\r\n\t\t\t\tglTexCoord2f(1,1);\r\n\t\t\t\tglVertex2f((obj.getX()-cam.getX())+obj.getSizeX(), (obj.getY()-cam.getY())+obj.getSizeY());\r\n\t\t\t\tglTexCoord2f(0,1);\r\n\t\t\t\tglVertex2f((obj.getX()-cam.getX()), (obj.getY()-cam.getY())+obj.getSizeY());\r\n\t\t\t\tglEnd();\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\tobj.getTex().release();\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\nThere is no error the Texture is just not displayed. I use this method to load the images: \r\n\r\n    public static Texture getTex(String path)\r\n\t{\r\n\t\tTexture texture = null;\r\n\t\ttry {\r\n\t\t\ttexture = TextureLoader.getTexture(&quot;PNG&quot;, ResourceLoader.getResourceAsStream(path));\r\n\t\t} catch (FileNotFoundException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t\tDisplay.destroy();\r\n\t\t\tSystem.exit(1);\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t\tDisplay.destroy();\r\n\t\t\tSystem.exit(1);\r\n\t\t}\r\n\t\treturn texture;\r\n\t}\r\n\r\nThis is my main game loop:\r\n\r\n    public static Player player = new Player(0, 0, 0, 0, 20, 20, 2, null);\r\n\tpublic static Camera cam = new Camera(0, 0);\r\n\tstatic ArrayList&lt;GameObject&gt; toRender = new ArrayList&lt;GameObject&gt;();\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tRenderer.createDisplay();\r\n\t\ttoRender.add(new Wall(300, 300, 200, 100, IO.getTex(&quot;res/Terrain/Grass.png&quot;)));\r\n\t\ttoRender.add(player);\t\r\n\t\tplayer.setTex(IO.getTex(&quot;res/Entities/Player/Player.png&quot;));\r\n\t\twhile(!Display.isCloseRequested())\r\n\t\t{\r\n\t\t\tRenderer.updateDisplay();\r\n\t\t\tInput.updateInput();\r\n\t\t\tplayer.update();\r\n\t\t\tRenderer.renderDisplay(toRender, cam);\r\n\t\t}\r\n\t\tRenderer.destroyDisplay();\r\n\t\tSystem.exit(0);\r\n\t}\r\n\t\r\nIts just displayed a white quad instead of a textured one.","title":"Issue with displaying Textures using LWJGL and SlickUtil","body":"<p>Ive tried a lot but dont find my error. Heres my Code:</p>\n\n<pre><code>public class Renderer {\npublic static final int WIDTH = 1080, HEIGHT = 720, FPS = 60;\npublic static void createDisplay()\n{\n    try {\n        Display.setDisplayMode(new DisplayMode(WIDTH,HEIGHT));\n        Display.create();\n        Display.setVSyncEnabled(true);\n    } catch (LWJGLException e) {\n        e.printStackTrace();\n        System.exit(0);\n    }\n\n    GL11.glEnable(GL11.GL_TEXTURE_2D);               \n\n    GL11.glClearColor(0.0f, 0.0f, 0.0f, 0.0f);          \n\n        // enable alpha blending\n        GL11.glEnable(GL11.GL_BLEND);\n        GL11.glBlendFunc(GL11.GL_SRC_ALPHA, GL11.GL_ONE_MINUS_SRC_ALPHA);\n\n        GL11.glViewport(0,0,WIDTH,HEIGHT);\n    GL11.glMatrixMode(GL11.GL_MODELVIEW);\n\n    GL11.glMatrixMode(GL11.GL_PROJECTION);\n    GL11.glLoadIdentity();\n    GL11.glOrtho(0, WIDTH, HEIGHT, 0, 1, -1);\n    GL11.glMatrixMode(GL11.GL_MODELVIEW);\n}\n\npublic static void updateDisplay(){\n    Display.update();\n    Display.sync(FPS);\n    glClear(GL_COLOR_BUFFER_BIT);\n    glClearColor(0.2f,0.2f,0.2f,1.0f);\n}\n\npublic static void destroyDisplay()\n{\n    Display.destroy();\n}\n\npublic static void renderDisplay(ArrayList&lt;GameObject&gt; render, Camera cam)\n{\n\n    Color.white.bind();\n\n    for(GameObject obj: render)\n    {\n\n        obj.getTex().bind();\n       if(obj instanceof Player)\n        {\n            glBegin(GL_QUADS);\n            glTexCoord2f(0,0);\n            glVertex2f(obj.getX()+WIDTH/2-cam.getX(), obj.getY()+HEIGHT/2-cam.getY());\n            glTexCoord2f(obj.getTex().getWidth(),0);\n            glVertex2f(obj.getX()+WIDTH/2+obj.getSizeX()-cam.getX(), obj.getY()+HEIGHT/2-cam.getY());\n            glTexCoord2f(obj.getTex().getWidth(),obj.getTex().getHeight());\n            glVertex2f(obj.getX()+WIDTH/2+obj.getSizeX()-cam.getX(), obj.getY()+HEIGHT/2+obj.getSizeY()-cam.getY());\n            glTexCoord2f(0,obj.getTex().getHeight());\n            glVertex2f(obj.getX()+WIDTH/2-cam.getX(), obj.getY()+HEIGHT/2+obj.getSizeY()-cam.getY());\n            glEnd();\n        }else{\n            glBegin(GL_QUADS);\n            glTexCoord2f(0,0);\n            glVertex2f((obj.getX()-cam.getX()), (obj.getY()-cam.getY()));\n            glTexCoord2f(1,0);\n            glVertex2f((obj.getX()-cam.getX())+obj.getSizeX(), (obj.getY()-cam.getY()));\n            glTexCoord2f(1,1);\n            glVertex2f((obj.getX()-cam.getX())+obj.getSizeX(), (obj.getY()-cam.getY())+obj.getSizeY());\n            glTexCoord2f(0,1);\n            glVertex2f((obj.getX()-cam.getX()), (obj.getY()-cam.getY())+obj.getSizeY());\n            glEnd();\n\n        }\n        obj.getTex().release(); \n    }\n\n}\n</code></pre>\n\n<p>There is no error the Texture is just not displayed. I use this method to load the images: </p>\n\n<pre><code>public static Texture getTex(String path)\n{\n    Texture texture = null;\n    try {\n        texture = TextureLoader.getTexture(\"PNG\", ResourceLoader.getResourceAsStream(path));\n    } catch (FileNotFoundException e) {\n        e.printStackTrace();\n        Display.destroy();\n        System.exit(1);\n    } catch (IOException e) {\n        e.printStackTrace();\n        Display.destroy();\n        System.exit(1);\n    }\n    return texture;\n}\n</code></pre>\n\n<p>This is my main game loop:</p>\n\n<pre><code>public static Player player = new Player(0, 0, 0, 0, 20, 20, 2, null);\npublic static Camera cam = new Camera(0, 0);\nstatic ArrayList&lt;GameObject&gt; toRender = new ArrayList&lt;GameObject&gt;();\n\npublic static void main(String[] args) {\n    Renderer.createDisplay();\n    toRender.add(new Wall(300, 300, 200, 100, IO.getTex(\"res/Terrain/Grass.png\")));\n    toRender.add(player);   \n    player.setTex(IO.getTex(\"res/Entities/Player/Player.png\"));\n    while(!Display.isCloseRequested())\n    {\n        Renderer.updateDisplay();\n        Input.updateInput();\n        player.update();\n        Renderer.renderDisplay(toRender, cam);\n    }\n    Renderer.destroyDisplay();\n    System.exit(0);\n}\n</code></pre>\n\n<p>Its just displayed a white quad instead of a textured one.</p>\n"},{"tags":["java","lwjgl","crop","slick2d"],"answers":[{"tags":[],"owner":{"account_id":12986012,"reputation":61,"user_id":9386888,"display_name":"Kenneth"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1540143473,"creation_date":1540143473,"answer_id":52918084,"question_id":52917539,"body_markdown":"Well turns out there is a built in function in slick called BufferedImageUtil that converts buffered images into texture. This is a simple answer rather than to try to make something that gets subImage like in BufferedImage, the smarter approach is to convert a BufferedImage into a texture which I have been trying to do for about 3 months now.\r\n\r\nFor anyone struggling with this kind of conversion, simply use code like I have below.\r\n\r\n    \tSpriteSheet Tiles = new SpriteSheet(ImageLoader.loadImage(&quot;/res/Tiles.png&quot;));\r\n\t\tBufferedImage test = Tiles.crop(0, 0, 64, 64);\r\n\t\tTexture test2 = null;\r\n\t\ttry {\r\n\t\t\ttest2 = BufferedImageUtil.getTexture(&quot;&quot;, test);\t\t\t\t\t\t\t\t\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n        g.drawImage(test2, 0, 0, 64, 64);\r\nSpriteSheet class:\r\n    \r\n    import java.awt.image.BufferedImage;\r\n    /**\r\n     * This Class is responsible for splitting up sprite sheets into multiple images.\r\n     * @author Kenneth\r\n     *\r\n     */\r\n    public class SpriteSheet {\r\n\t\r\n\tprivate BufferedImage sheet;\r\n\t/**\r\n\t * This constructor receives the image that needs to be modified.\r\n\t * @param sheet\r\n\t */\r\n\tpublic SpriteSheet(BufferedImage sheet){\r\n\t\tthis.sheet = sheet;\r\n\t}\r\n\t/**\r\n\t * This crops a sprite sheet to get the subimage within the picture.\r\n\t * @param x\r\n\t * @param y\r\n\t * @param width\r\n\t * @param height\r\n\t * @return\r\n\t */\r\n\tpublic BufferedImage crop(int x, int y, int width, int height){\r\n\t\treturn sheet.getSubimage(x*width, y*height, width, height);\r\n\t}\r\n    }\r\n\r\nImageLoader:\r\n\r\n    import java.awt.image.BufferedImage;\r\n    import java.io.IOException;\r\n\r\n    import javax.imageio.ImageIO;\r\n    /**\r\n     * This class is responsible for loading in images\r\n     * @author Kenneth\r\n     *\r\n     */\r\n    public class ImageLoader {\r\n\t/**\r\n\t * This method tries to load in the selected image from the path given.\r\n\t * @param path\r\n\t * @return\r\n\t */\r\n\tpublic static BufferedImage loadImage(String path){\r\n\t\ttry {\r\n\t\t\treturn ImageIO.read(ImageLoader.class.getResource(path)); //Loads in image\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t\tSystem.exit(1); //If the image cannot be loaded, the window closes\r\n\t\t\tSystem.err.println(path + &quot; was not loaded.&quot;);\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\t\r\n    }\r\n\r\n","title":"Crop a texture down to a smaller texture using slick and lwjgl (JAVA)","body":"<p>Well turns out there is a built in function in slick called BufferedImageUtil that converts buffered images into texture. This is a simple answer rather than to try to make something that gets subImage like in BufferedImage, the smarter approach is to convert a BufferedImage into a texture which I have been trying to do for about 3 months now.</p>\n\n<p>For anyone struggling with this kind of conversion, simply use code like I have below.</p>\n\n<pre><code>    SpriteSheet Tiles = new SpriteSheet(ImageLoader.loadImage(\"/res/Tiles.png\"));\n    BufferedImage test = Tiles.crop(0, 0, 64, 64);\n    Texture test2 = null;\n    try {\n        test2 = BufferedImageUtil.getTexture(\"\", test);                             \n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    g.drawImage(test2, 0, 0, 64, 64);\n</code></pre>\n\n<p>SpriteSheet class:</p>\n\n<pre><code>import java.awt.image.BufferedImage;\n/**\n * This Class is responsible for splitting up sprite sheets into multiple images.\n * @author Kenneth\n *\n */\npublic class SpriteSheet {\n\nprivate BufferedImage sheet;\n/**\n * This constructor receives the image that needs to be modified.\n * @param sheet\n */\npublic SpriteSheet(BufferedImage sheet){\n    this.sheet = sheet;\n}\n/**\n * This crops a sprite sheet to get the subimage within the picture.\n * @param x\n * @param y\n * @param width\n * @param height\n * @return\n */\npublic BufferedImage crop(int x, int y, int width, int height){\n    return sheet.getSubimage(x*width, y*height, width, height);\n}\n}\n</code></pre>\n\n<p>ImageLoader:</p>\n\n<pre><code>import java.awt.image.BufferedImage;\nimport java.io.IOException;\n\nimport javax.imageio.ImageIO;\n/**\n * This class is responsible for loading in images\n * @author Kenneth\n *\n */\npublic class ImageLoader {\n/**\n * This method tries to load in the selected image from the path given.\n * @param path\n * @return\n */\npublic static BufferedImage loadImage(String path){\n    try {\n        return ImageIO.read(ImageLoader.class.getResource(path)); //Loads in image\n    } catch (IOException e) {\n        e.printStackTrace();\n        System.exit(1); //If the image cannot be loaded, the window closes\n        System.err.println(path + \" was not loaded.\");\n    }\n    return null;\n}\n\n}\n</code></pre>\n"}],"owner":{"account_id":12986012,"reputation":61,"user_id":9386888,"display_name":"Kenneth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691284599,"creation_date":1540139775,"question_id":52917539,"body_markdown":"Below I have written a method to draw a texture that is given in it&#39;s parameters.\r\n\r\n    \tpublic void drawImage(Texture texture, int x, int y, int width, int height) {\r\n\t\ttexture.bind();\r\n\t\tglTranslatef(x, y, 0);\r\n\t\tglBegin(GL_QUADS);\r\n\t\tglTexCoord2f(0, 0);\r\n\t\tglVertex2f(0, 0);\r\n\t\tglTexCoord2f(1, 0);\r\n\t\tglVertex2f(width, 0);\r\n\t\tglTexCoord2f(1, 1);\r\n\t\tglVertex2f(width, height);\r\n\t\tglTexCoord2f(0, 1);\r\n\t\tglVertex2f(0, height);\r\n\t\tglEnd();\r\n\t\tglLoadIdentity();\r\n\t}\r\n\r\nI don&#39;t want to change THIS method. Instead, what I would like to do is create a method that crops a sprite sheet ranging in any size and having any number of crops that I might need to be saved as separate textures.\r\n\r\nPreviously, I was using Java.AWT which allowed for me to do exactly this. See code below. Note: sheet is of type BufferedImage.\r\n\r\n\tpublic BufferedImage crop(int x, int y, int width, int height){\r\n\t\treturn sheet.getSubimage(x*width, y*height, width, height);\r\n\t}    \r\n\r\nI&#39;m trying to find equivalent code for the above method that can take one texture in of any size, crop any area out and return that area as its own texture.\r\n\r\nI am not trying to change the drawImage method as I need that method exactly the way it is.\r\n\r\nThanks","title":"Crop a texture down to a smaller texture using slick and lwjgl (JAVA)","body":"<p>Below I have written a method to draw a texture that is given in it's parameters.</p>\n\n<pre><code>    public void drawImage(Texture texture, int x, int y, int width, int height) {\n    texture.bind();\n    glTranslatef(x, y, 0);\n    glBegin(GL_QUADS);\n    glTexCoord2f(0, 0);\n    glVertex2f(0, 0);\n    glTexCoord2f(1, 0);\n    glVertex2f(width, 0);\n    glTexCoord2f(1, 1);\n    glVertex2f(width, height);\n    glTexCoord2f(0, 1);\n    glVertex2f(0, height);\n    glEnd();\n    glLoadIdentity();\n}\n</code></pre>\n\n<p>I don't want to change THIS method. Instead, what I would like to do is create a method that crops a sprite sheet ranging in any size and having any number of crops that I might need to be saved as separate textures.</p>\n\n<p>Previously, I was using Java.AWT which allowed for me to do exactly this. See code below. Note: sheet is of type BufferedImage.</p>\n\n<pre><code>public BufferedImage crop(int x, int y, int width, int height){\n    return sheet.getSubimage(x*width, y*height, width, height);\n}    \n</code></pre>\n\n<p>I'm trying to find equivalent code for the above method that can take one texture in of any size, crop any area out and return that area as its own texture.</p>\n\n<p>I am not trying to change the drawImage method as I need that method exactly the way it is.</p>\n\n<p>Thanks</p>\n"},{"tags":["java","eclipse","lwjgl","slick2d"],"answers":[{"tags":[],"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1628877280,"creation_date":1628877280,"answer_id":68776530,"question_id":68775319,"body_markdown":"It&#39;s often the case that googling specific parts of a new error message will find other people who have had the same problem.  When I google that class name, I find someone who had the exact same problem that you did, many years ago.  The thread shows where to find the library which has that class.\r\n\r\nhttps://gamedev.stackexchange.com/questions/35047/where-can-i-find-the-library-for-org-newdawn-slick-opengl-texture ","title":"I can&#39;t find a solution for &quot;The type org.newdawn.slick.opengl.Texture is not accessible&quot;","body":"<p>It's often the case that googling specific parts of a new error message will find other people who have had the same problem.  When I google that class name, I find someone who had the exact same problem that you did, many years ago.  The thread shows where to find the library which has that class.</p>\n<p><a href=\"https://gamedev.stackexchange.com/questions/35047/where-can-i-find-the-library-for-org-newdawn-slick-opengl-texture\">https://gamedev.stackexchange.com/questions/35047/where-can-i-find-the-library-for-org-newdawn-slick-opengl-texture</a></p>\n"}],"owner":{"account_id":22457833,"reputation":1,"user_id":16660266,"display_name":"dera"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":254,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691284584,"creation_date":1628870372,"question_id":68775319,"body_markdown":"I&#39;m trying to learn how to make a 3d game engine in java following the tutorials from ThinMatrix (loving them so far). The problem is that one of the libraries from slick-utils seems to be missing? or corrupted? or not supported? I don&#39;t really know and I&#39;m a total begginer in LWJGL, OpenGL and big java projects. I searched the error and nothing seems to work or the solutions are too problem specific, ie. related to an error in the coding rather than in the libraries.\r\n\r\nThere&#39;s not much code to show, I add the import in the class and the IDE prompts me with the error on the title: **&quot;The type org.newdawn.slick.opengl.Texture is not accessible&quot;**.\r\n\r\nOn the comments of the video there was a &quot;solution&quot; that seems to have worked for at least 5 people, but for some reason it doesn&#39;t work for me.\r\nThe problem in the solution code (that avoids using slick-utils) is that there&#39;s a MemoryStack class that I can&#39;t seem to find anywhere, I serached the text that the IDE prompts me but it was fruitless...\r\n\r\nThis is what I searched for: &quot;**MemoryStack cannot be resolved**&quot;, and for the life of me I can&#39;t find how to import, resolve, or do anything, really.\r\n\r\nI&#39;m really frustrated and google isn&#39;t my friend today, it seems. \r\n\r\nI think there may be a problem with the LWJGL libraries that I&#39;m using (I don&#39;t remember if I&#39;m using LWJGL2 or 3, I believe 2 because the tutorials are from 2014 and 3 didn&#39;t exist yet? Idk), but I can&#39;t figure out what&#39;s the problem and all the hints that the IDE trows at me are leading me to flat out dead ends.\r\n\r\nThanks so much for reading, and helping me if you can! I can show the code but I don&#39;t think it matters that much, as the problem seems to come from the slick-utils library being corrupted or something, or that I don&#39;t understand how to add it properly to my project.\r\n\r\nThis should be the minimum reproducible example: \r\n```import org.newdawn.slick.opengl.Texture;```\r\n\r\nThis is the first question I make so feel free to tell me if I&#39;m missing something or whatever! :)","title":"I can&#39;t find a solution for &quot;The type org.newdawn.slick.opengl.Texture is not accessible&quot;","body":"<p>I'm trying to learn how to make a 3d game engine in java following the tutorials from ThinMatrix (loving them so far). The problem is that one of the libraries from slick-utils seems to be missing? or corrupted? or not supported? I don't really know and I'm a total begginer in LWJGL, OpenGL and big java projects. I searched the error and nothing seems to work or the solutions are too problem specific, ie. related to an error in the coding rather than in the libraries.</p>\n<p>There's not much code to show, I add the import in the class and the IDE prompts me with the error on the title: <strong>&quot;The type org.newdawn.slick.opengl.Texture is not accessible&quot;</strong>.</p>\n<p>On the comments of the video there was a &quot;solution&quot; that seems to have worked for at least 5 people, but for some reason it doesn't work for me.\nThe problem in the solution code (that avoids using slick-utils) is that there's a MemoryStack class that I can't seem to find anywhere, I serached the text that the IDE prompts me but it was fruitless...</p>\n<p>This is what I searched for: &quot;<strong>MemoryStack cannot be resolved</strong>&quot;, and for the life of me I can't find how to import, resolve, or do anything, really.</p>\n<p>I'm really frustrated and google isn't my friend today, it seems.</p>\n<p>I think there may be a problem with the LWJGL libraries that I'm using (I don't remember if I'm using LWJGL2 or 3, I believe 2 because the tutorials are from 2014 and 3 didn't exist yet? Idk), but I can't figure out what's the problem and all the hints that the IDE trows at me are leading me to flat out dead ends.</p>\n<p>Thanks so much for reading, and helping me if you can! I can show the code but I don't think it matters that much, as the problem seems to come from the slick-utils library being corrupted or something, or that I don't understand how to add it properly to my project.</p>\n<p>This should be the minimum reproducible example:\n<code>import org.newdawn.slick.opengl.Texture;</code></p>\n<p>This is the first question I make so feel free to tell me if I'm missing something or whatever! :)</p>\n"},{"tags":["java","image","graphics","lwjgl","slick2d"],"owner":{"account_id":16092756,"reputation":23,"user_id":17583590,"display_name":"PS Jahn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691284563,"creation_date":1638563447,"question_id":70220330,"body_markdown":"Graphics.fillRoundRect() seems not to be working properly, as no Rectangle appears. drawRect() works fine however.\r\nI tried:\r\n\r\n        g.setColor(new Color(255,255,255));\r\n        g.setBackground(new Color(255,255,255));\r\n        g.setAntiAlias(true);\r\n        g.fillRoundRect(0,0,100,100,25,30);\r\n        g.setAntiAlias(false);\r\nas well as\r\n\r\n        g.setColor(new Color(255,255,255));\r\n        g.setBackground(new Color(255,255,255));\r\n        g.fillRoundRect(0,0,100,100,25,30);\r\nThe only thing that worked, was using drawRect, but that of course doesn&#39;t fill it in.","title":"Slick fillRoundRect not drawing anything on screen","body":"<p>Graphics.fillRoundRect() seems not to be working properly, as no Rectangle appears. drawRect() works fine however.\nI tried:</p>\n<pre><code>    g.setColor(new Color(255,255,255));\n    g.setBackground(new Color(255,255,255));\n    g.setAntiAlias(true);\n    g.fillRoundRect(0,0,100,100,25,30);\n    g.setAntiAlias(false);\n</code></pre>\n<p>as well as</p>\n<pre><code>    g.setColor(new Color(255,255,255));\n    g.setBackground(new Color(255,255,255));\n    g.fillRoundRect(0,0,100,100,25,30);\n</code></pre>\n<p>The only thing that worked, was using drawRect, but that of course doesn't fill it in.</p>\n"},{"tags":["java","netbeans","jar","libraries"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1684902266,"post_id":76317597,"comment_id":134583520,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":21540608,"reputation":11,"user_id":15878430,"display_name":"Physicist"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684989279,"creation_date":1684865983,"answer_id":76317625,"question_id":76317597,"body_markdown":"I founded the problem&#39;s source. In the **Apache Netbeans 17** we may add manually *JAR libraries* but when we create new *Java project* with *Ant* (not Maven or Gradle). After creating this one adding jar libraries is easy, like i wrote above: \r\n\r\n`Right mouse button at project in left panel -&gt; properties -&gt; libraries` and now we choose (of course before we have to set the classpath with libraries in tools Netbeans).","title":"How to add JAR library to Java project in NetBeans 17 IDE?","body":"<p>I founded the problem's source. In the <strong>Apache Netbeans 17</strong> we may add manually <em>JAR libraries</em> but when we create new <em>Java project</em> with <em>Ant</em> (not Maven or Gradle). After creating this one adding jar libraries is easy, like i wrote above:</p>\n<p><code>Right mouse button at project in left panel -&gt; properties -&gt; libraries</code> and now we choose (of course before we have to set the classpath with libraries in tools Netbeans).</p>\n"}],"owner":{"account_id":21540608,"reputation":11,"user_id":15878430,"display_name":"Physicist"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":443,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691283574,"creation_date":1684865782,"question_id":76317597,"body_markdown":"I try to code in Java with framework Jade so i downloaded proper file (jade.jar). I copied it&#39;s path and pasted to system&#39;s CLASSPATH. In Apache Netbeans IDE i choose: tools-&gt;libraries and then i added the library with correct path to jade.jar and here is all OK, but the jade library is not recognized while coding. I tried to click right mouse button on my project on left side of GUI and i searched option &quot;Add library&quot; or &quot;add JAR file&quot; but something like that doesn&#39;t exist: (https://i.stack.imgur.com/JFdLH.png) So I tried to click on properties from above list, but there is not libraries option: https://i.stack.imgur.com/yIBJo.png I clicked also the Files tab above projects list, but there- also is no possibility for finding way to adding jar library to Java project. So please help me, my ideas and founded resolutions in network really ended. Is it possible my version of NetBeans is faulty? I don&#39;t think so (i downloaded it from official page) so please explain me what to do.\r\nI want to add, that in this case important for me is how to add a DOWNLOADED JAR file manually to the project in Apache Netbeans, not especially in Maven, where we have pom.xml and for building necessary is network connection. I could find option &quot;Add JAR&quot; nowhere while i was sure that it exists.","title":"How to add JAR library to Java project in NetBeans 17 IDE?","body":"<p>I try to code in Java with framework Jade so i downloaded proper file (jade.jar). I copied it's path and pasted to system's CLASSPATH. In Apache Netbeans IDE i choose: tools-&gt;libraries and then i added the library with correct path to jade.jar and here is all OK, but the jade library is not recognized while coding. I tried to click right mouse button on my project on left side of GUI and i searched option &quot;Add library&quot; or &quot;add JAR file&quot; but something like that doesn't exist: (<a href=\"https://i.stack.imgur.com/JFdLH.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/JFdLH.png</a>) So I tried to click on properties from above list, but there is not libraries option: <a href=\"https://i.stack.imgur.com/yIBJo.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/yIBJo.png</a> I clicked also the Files tab above projects list, but there- also is no possibility for finding way to adding jar library to Java project. So please help me, my ideas and founded resolutions in network really ended. Is it possible my version of NetBeans is faulty? I don't think so (i downloaded it from official page) so please explain me what to do.\nI want to add, that in this case important for me is how to add a DOWNLOADED JAR file manually to the project in Apache Netbeans, not especially in Maven, where we have pom.xml and for building necessary is network connection. I could find option &quot;Add JAR&quot; nowhere while i was sure that it exists.</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1691236006,"post_id":76841455,"comment_id":135466618,"body_markdown":"Why don&#39;t you just match the prefix &quot;Domain&quot; and any rest?","body":"Why don&#39;t you just match the prefix &quot;Domain&quot; and any rest?"},{"owner":{"account_id":27900922,"reputation":5928,"user_id":21305238,"display_name":"InSync"},"score":0,"creation_date":1691236928,"post_id":76841455,"comment_id":135466689,"body_markdown":"Does this answer your question? [Regular expression to match a line that doesn&#39;t contain a word](https://stackoverflow.com/questions/406230/regular-expression-to-match-a-line-that-doesnt-contain-a-word)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/406230/regular-expression-to-match-a-line-that-doesnt-contain-a-word\">Regular expression to match a line that doesn&#39;t contain a word</a>"},{"owner":{"account_id":27900922,"reputation":5928,"user_id":21305238,"display_name":"InSync"},"score":0,"creation_date":1691237006,"post_id":76841455,"comment_id":135466698,"body_markdown":"Put the lookahead at the start of the regex: [`^(?!(\\w+\\s+)+h\\S+ps?://)`](https://regex101.com/r/DH7Doq/2)","body":"Put the lookahead at the start of the regex: <a href=\"https://regex101.com/r/DH7Doq/2\" rel=\"nofollow noreferrer\"><code>^(?!(\\w+\\s+)+h\\S+ps?:&#47;&#47;)</code></a>"},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1691239207,"post_id":76841455,"comment_id":135466926,"body_markdown":"It&#39;s not clear why some of your example should match and others should not. Please post a variety of inputs and explain why they should or shouldn&#39;t match.","body":"It&#39;s not clear why some of your example should match and others should not. Please post a variety of inputs and explain why they should or shouldn&#39;t match."}],"answers":[{"tags":[],"owner":{"account_id":27974006,"reputation":10316,"user_id":21363224,"display_name":"markalex"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691253749,"creation_date":1691253749,"answer_id":76842619,"question_id":76841455,"body_markdown":"This happens because after lookahead prevents pattern from matching backtracking occurs, and your first group gives back something, and tries to match again.\r\n\r\nLook closely what is matched by first group in this example: https://regex101.com/r/GU7WV4/1\r\n\r\nThis can be worked around in a couple of ways:\r\n1. you can use [possessive quantifiers][1]. This will prevent backtracking from occurring.\r\n```\r\n^(\\w+\\s+)++(?!h\\S+p(s)?://)(.*)$\r\n```\r\n\r\n2. you can match only non-whitespace symbols for your (almost) URL:\r\n```\r\n^(\\w+\\s+)+(?!h\\S+p(s)?://)(\\S*)$\r\n```\r\n\r\n3. You can use lookahead to prevent matching with a bit different approach:\r\n```\r\n^(?!.*h\\S+ps?://\\S+$)(\\w+\\s+)+(.*)$\r\n```\r\n\r\n  [1]: https://stackoverflow.com/questions/4489551","title":"How to match a complex string using Negative lookahead regular expression?","body":"<p>This happens because after lookahead prevents pattern from matching backtracking occurs, and your first group gives back something, and tries to match again.</p>\n<p>Look closely what is matched by first group in this example: <a href=\"https://regex101.com/r/GU7WV4/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/GU7WV4/1</a></p>\n<p>This can be worked around in a couple of ways:</p>\n<ol>\n<li>you can use <a href=\"https://stackoverflow.com/questions/4489551\">possessive quantifiers</a>. This will prevent backtracking from occurring.</li>\n</ol>\n<pre><code>^(\\w+\\s+)++(?!h\\S+p(s)?://)(.*)$\n</code></pre>\n<ol start=\"2\">\n<li>you can match only non-whitespace symbols for your (almost) URL:</li>\n</ol>\n<pre><code>^(\\w+\\s+)+(?!h\\S+p(s)?://)(\\S*)$\n</code></pre>\n<ol start=\"3\">\n<li>You can use lookahead to prevent matching with a bit different approach:</li>\n</ol>\n<pre><code>^(?!.*h\\S+ps?://\\S+$)(\\w+\\s+)+(.*)$\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691281386,"creation_date":1691278110,"answer_id":76843911,"question_id":76841455,"body_markdown":"You&#39;ll need a pattern to assert the starting text, i.e. _&quot;Domain&quot;_, _&quot;Bad \r\n URL&quot;_, and _&quot;Evil URL&quot;_.\r\n\r\nThe following will assert that the starting text is not `Bad  URL`, or `Evil URL`.\r\n\r\n```none\r\n^(?!(?:Bad |Evil) URL).\r\n```\r\n\r\nAdditionally, you could use the opposite, and assert only the valid matches.\r\n\r\n```none\r\n^(?=Domain  ).\r\n```","title":"How to match a complex string using Negative lookahead regular expression?","body":"<p>You'll need a pattern to assert the starting text, i.e. <em>&quot;Domain&quot;</em>, <em>&quot;Bad\nURL&quot;</em>, and <em>&quot;Evil URL&quot;</em>.</p>\n<p>The following will assert that the starting text is not <code>Bad  URL</code>, or <code>Evil URL</code>.</p>\n<pre class=\"lang-none prettyprint-override\"><code>^(?!(?:Bad |Evil) URL).\n</code></pre>\n<p>Additionally, you could use the opposite, and assert only the valid matches.</p>\n<pre class=\"lang-none prettyprint-override\"><code>^(?=Domain  ).\n</code></pre>\n"}],"owner":{"account_id":10542722,"reputation":218,"user_id":7768127,"accept_rate":83,"display_name":"Trevor"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76842619,"answer_count":2,"score":1,"last_activity_date":1691281386,"creation_date":1691235428,"question_id":76841455,"body_markdown":"I am trying to match the correct string using the negative lookahead regular expression.\r\n\r\nI want my regex to accept `Domain   abcd[.]xyz`, but not `Bad  URL  h[xx]ps://abcd[.]xyz` or `Evil URL h[xx]p://stu[.]abc`, I have tried many ways to achieve this, but its getting nowhere.\r\n   \r\n```            \r\nif (str.matches(&quot;^(\\\\w+\\\\s+)+(?!h\\\\S+p(s)?://)(.*)$&quot;)\r\n{\r\n   ...\r\n}\r\n```\r\n\r\nThe above code actually accepts all strings, which is incorrect. Anyone has a better eagle eye and tell me what I am missing? Thanks.","title":"How to match a complex string using Negative lookahead regular expression?","body":"<p>I am trying to match the correct string using the negative lookahead regular expression.</p>\n<p>I want my regex to accept <code>Domain   abcd[.]xyz</code>, but not <code>Bad  URL  h[xx]ps://abcd[.]xyz</code> or <code>Evil URL h[xx]p://stu[.]abc</code>, I have tried many ways to achieve this, but its getting nowhere.</p>\n<pre><code>if (str.matches(&quot;^(\\\\w+\\\\s+)+(?!h\\\\S+p(s)?://)(.*)$&quot;)\n{\n   ...\n}\n</code></pre>\n<p>The above code actually accepts all strings, which is incorrect. Anyone has a better eagle eye and tell me what I am missing? Thanks.</p>\n"},{"tags":["java","intellij-idea","build","playframework","sbt"],"comments":[{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":0,"creation_date":1691249830,"post_id":76842056,"comment_id":135468011,"body_markdown":"what&#39;s the message showed when you start the app from intellij? once you hit run or debug, it shows the full command executed. I guess the port where you want to start the app is related with the `Url To Open` field","body":"what&#39;s the message showed when you start the app from intellij? once you hit run or debug, it shows the full command executed. I guess the port where you want to start the app is related with the <code>Url To Open</code> field"},{"owner":{"account_id":19044543,"reputation":6383,"user_id":13903942,"display_name":"Federico Ba&#249;"},"score":0,"creation_date":1691263407,"post_id":76842056,"comment_id":135469422,"body_markdown":"I am not at pc right now, ill tey tomorrow and let you know the output. Yes i didnt try to change &#39;url to open&#39;. Now if that fixes the port (and i guess host) i would be very surprise on how bad the UI and unclear is . Anyways still the question is also on how to add the path for config (and any other options) what jt seems to be at first glancd is that, is a feature they didnt developed and left it pretty basic","body":"I am not at pc right now, ill tey tomorrow and let you know the output. Yes i didnt try to change &#39;url to open&#39;. Now if that fixes the port (and i guess host) i would be very surprise on how bad the UI and unclear is . Anyways still the question is also on how to add the path for config (and any other options) what jt seems to be at first glancd is that, is a feature they didnt developed and left it pretty basic"},{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":0,"creation_date":1691264044,"post_id":76842056,"comment_id":135469488,"body_markdown":"I think the field `JVM Options` is the right place for passing parameters to the jvm. When you try to execute the app, the first line showed in the console should be the command that intellij used to start it. The params should be listed there.","body":"I think the field <code>JVM Options</code> is the right place for passing parameters to the jvm. When you try to execute the app, the first line showed in the console should be the command that intellij used to start it. The params should be listed there."},{"owner":{"account_id":19044543,"reputation":6383,"user_id":13903942,"display_name":"Federico Ba&#249;"},"score":0,"creation_date":1691314716,"post_id":76842056,"comment_id":135472649,"body_markdown":"@Gast&#243;nSchabas thanks it worked! Honestly, I did try to set the config insive the JVM but i didnt notice that it worked becuase the port thing throw me off. Actually (without going in details) certain thing had to work at that specific port and didn&#39;t happened. The port is actually defined in the .conf file. So few things happened:  1. IMO define the &#39;port&#39;    of the app on a input box called `Url To Open` is very very weird. and is really agains the Principle of least astonishment https://en.wikipedia.org/wiki/Principle_of_least_astonishment, one can say this is a perfect example of it.","body":"@Gast&#243;nSchabas thanks it worked! Honestly, I did try to set the config insive the JVM but i didnt notice that it worked becuase the port thing throw me off. Actually (without going in details) certain thing had to work at that specific port and didn&#39;t happened. The port is actually defined in the .conf file. So few things happened:  1. IMO define the &#39;port&#39;    of the app on a input box called <code>Url To Open</code> is very very weird. and is really agains the Principle of least astonishment <a href=\"https://en.wikipedia.org/wiki/Principle_of_least_astonishment\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Principle_of_least_astonishment</a>, one can say this is a perfect example of it."},{"owner":{"account_id":19044543,"reputation":6383,"user_id":13903942,"display_name":"Federico Ba&#249;"},"score":0,"creation_date":1691314796,"post_id":76842056,"comment_id":135472657,"body_markdown":"@Gast&#243;nSchabas 2. That means that, it OVERRIDES silently the configuration file I provide . Eitheway this stuff happens in this industry .. thanks for the help and to provide also some code sample ;)","body":"@Gast&#243;nSchabas 2. That means that, it OVERRIDES silently the configuration file I provide . Eitheway this stuff happens in this industry .. thanks for the help and to provide also some code sample ;)"},{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":0,"creation_date":1691343465,"post_id":76842056,"comment_id":135475710,"body_markdown":"The play run configuration from intellij starts the play app in development mode. You can [set the port using the sbt console](https://www.playframework.com/documentation/2.8.x/PlayConsole#Using-the-play-commands-directly) with the command `sbt &quot;run &lt;http port&gt;&quot;`. When you build the app and start it in production mode, you can [override the port and other properties](https://www.playframework.com/documentation/2.8.x/ProductionConfiguration#Specifying-the-HTTP-server-address-and-port-using-system-properties).","body":"The play run configuration from intellij starts the play app in development mode. You can <a href=\"https://www.playframework.com/documentation/2.8.x/PlayConsole#Using-the-play-commands-directly\" rel=\"nofollow noreferrer\">set the port using the sbt console</a> with the command <code>sbt &quot;run &lt;http port&gt;&quot;</code>. When you build the app and start it in production mode, you can <a href=\"https://www.playframework.com/documentation/2.8.x/ProductionConfiguration#Specifying-the-HTTP-server-address-and-port-using-system-properties\" rel=\"nofollow noreferrer\">override the port and other properties</a>."},{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":1,"creation_date":1691343599,"post_id":76842056,"comment_id":135475736,"body_markdown":"Here you have a link about how you can [use Play in production](https://www.playframework.com/documentation/2.8.x/Production)","body":"Here you have a link about how you can <a href=\"https://www.playframework.com/documentation/2.8.x/Production\" rel=\"nofollow noreferrer\">use Play in production</a>"}],"answers":[{"tags":[],"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691276536,"creation_date":1691276536,"answer_id":76843869,"question_id":76842056,"body_markdown":"I had some time and I was able to validate what I said in the comments. \r\n\r\n- port can be set changing the value of `Url To Open`\r\n- params for the JVM can be set changing the value of `JVM Options`\r\n\r\n----------\r\n\r\nI just created a play java project using the [play-java-seed](https://github.com/playframework/play-java-seed.g8) template with the sbt command\r\n\r\n```scala\r\nsbt new playframework/play-java-seed.g8\r\n```\r\n\r\nRefactored the `HelloController` to log some messages before return the 200 Ok response\r\n\r\n```java\r\nimport com.typesafe.config.Config;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport play.mvc.*;\r\n\r\nimport javax.inject.Inject;\r\n\r\npublic class HomeController extends Controller {\r\n\r\n    // started the logger\r\n    final Logger logger = LoggerFactory.getLogger(this.getClass().getCanonicalName());\r\n\r\n    final Config config;\r\n\r\n    // injected the config\r\n    @Inject\r\n    public HomeController(Config config) {\r\n        this.config = config;\r\n    }\r\n\r\n    public Result index() {\r\n        // logged some messages using different log levels\r\n        logger.debug(&quot;A super debug message&quot;);\r\n        logger.info(&quot;An info message&quot;);\r\n        logger.warn(&quot;A warning message&quot;);\r\n        // logged a message using a value provided in the config file\r\n        logger.info(&quot;the value of some-key is &quot; + config.getString(&quot;some-key&quot;));\r\n        return ok(views.html.index.render());\r\n    }\r\n\r\n}\r\n```\r\n\r\nI created two run configurations in Intellij:\r\n\r\n####  prod\r\n   \r\n- `Url To Open`\r\n\r\n```\r\nhttp://localhost:9020\r\n```\r\n\r\n- `JVM Options`:\r\n     \r\n```java\r\n-Xms512M -Xmx1024M -Xss1M -XX:+CMSClassUnloadingEnabled\r\n```\r\n\r\n- set the log level root to `INFO` and added the prefix `PROD STDOUT - ` for the log messages in `logback.xml` file\r\n\r\n- added the line `some-key = &quot;A Prod Value&quot;` to `application.conf` file\r\n\r\n[![run web app prod][1]][1]\r\n\r\nGot the following output\r\n\r\n```bash\r\n/&lt;path to java home&gt;/bin/java \r\n  -Dfile.encoding=UTF8 \r\n  -Djline.terminal=none \r\n  -Dsbt.global.base=/private/var/folders/n3/7h5c5s2x1d1f_m_vz22h73280000gn/T/sbt-global-pluginstub \r\n  -Dsbt.log.noformat=true \r\n  -Xms512M \r\n  -Xmx1024M \r\n  -Xss1M\r\n  -XX:+CMSClassUnloadingEnabled -Didea.managed=true \r\n  -classpath &quot;&lt;intellij app path&gt;/IntelliJIdea2023.1/plugins/Scala/launcher/sbt-launch.jar&quot; xsbt.boot.Boot &quot;project root&quot; &quot;run 9020&quot; # new value for the port\r\n\r\n#############################################\r\nsome init log messages from play\r\n#############################################\r\n\r\n# next you can see the prefix added\r\nPROD STDOUT - 2023-08-05 18:23:10 INFO  play.api.Play  Application started (Dev) (no global state)\r\nPROD STDOUT - 2023-08-05 18:23:11 INFO  controllers.HomeController  An info message\r\nPROD STDOUT - 2023-08-05 18:23:11 WARN  controllers.HomeController  A warning message\r\nPROD STDOUT - 2023-08-05 18:23:11 INFO  controllers.HomeController  the value of some-key is A Prod Value\r\n# above you can see the value of the key from the config file\r\n```\r\n\r\n#### dev\r\n   \r\n- `Url To Open`\r\n\r\n```java\r\nhttp://localhost:9010\r\n```\r\n\r\n- `JVM Options`: set path for config and logback files, replaced the values for `Xms`, `Xmx`  and `Xss`\r\n     \r\n```java\r\n-Xmx2048M -Xss2M -XX:+CMSClassUnloadingEnabled -Dconfig.file=conf/dev-application.conf -Dlogger.file=conf/dev-logback.xml\r\n```\r\n\r\n- set the log level root to `DEBUG` and added the prefix `DEV STDOUT - ` for the log messages in `dev-logback.xml` file\r\n\r\n- added the line `some-key = &quot;A Dev Value&quot;` to `dev-application.conf` file\r\n\r\n[![run web app dev][2]][2]\r\n\r\nGot the following output\r\n\r\n```\r\n/&lt;java home path&gt;/bin/java \r\n  -Dfile.encoding=UTF8 \r\n  -Djline.terminal=none \r\n  -Dsbt.global.base=/private/var/folders/n3/7h5c5s2x1d1f_m_vz22h73280000gn/T/sbt-global-pluginstub \r\n  -Dsbt.log.noformat=true \r\n  -Xms1024M # param edited \r\n  -Xmx2048M # param edited\r\n  -Xss2M    # param edited\r\n  -XX:+CMSClassUnloadingEnabled \r\n  -Dconfig.file=conf/dev-application.conf # param added\r\n  -Dlogger.file=conf/dev-logback.xml      # param added\r\n  -Didea.managed=true \r\n  -classpath &quot;/&lt;intellij path&gt;/IntelliJIdea2023.1/plugins/Scala/launcher/sbt-launch.jar&quot; xsbt.boot.Boot &quot;project root&quot; &quot;run 9010&quot; # here you can see the value of the port I set in `Url To Open`\r\n\r\n#############################################\r\nsome init log messages from play\r\n#############################################\r\n\r\n# next you can see the prefix added for dev and also the log level is set ot DEBUG\r\nDEV STDOUT - 2023-08-05 18:34:18 DEBUG controllers.HomeController  A super debug message\r\nDEV STDOUT - 2023-08-05 18:34:18 INFO  controllers.HomeController  An info message\r\nDEV STDOUT - 2023-08-05 18:34:18 WARN  controllers.HomeController  A warning message\r\nDEV STDOUT - 2023-08-05 18:34:18 INFO  controllers.HomeController  the value of some-key is A Dev Value\r\n# above you can see the value of the key from the config file\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/18y46.png\r\n  [2]: https://i.stack.imgur.com/J5SaL.png","title":"Java Play - How run Play in IntelliJ with custom sbt configurations options","body":"<p>I had some time and I was able to validate what I said in the comments.</p>\n<ul>\n<li>port can be set changing the value of <code>Url To Open</code></li>\n<li>params for the JVM can be set changing the value of <code>JVM Options</code></li>\n</ul>\n<hr />\n<p>I just created a play java project using the <a href=\"https://github.com/playframework/play-java-seed.g8\" rel=\"nofollow noreferrer\">play-java-seed</a> template with the sbt command</p>\n<pre class=\"lang-scala prettyprint-override\"><code>sbt new playframework/play-java-seed.g8\n</code></pre>\n<p>Refactored the <code>HelloController</code> to log some messages before return the 200 Ok response</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.typesafe.config.Config;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport play.mvc.*;\n\nimport javax.inject.Inject;\n\npublic class HomeController extends Controller {\n\n    // started the logger\n    final Logger logger = LoggerFactory.getLogger(this.getClass().getCanonicalName());\n\n    final Config config;\n\n    // injected the config\n    @Inject\n    public HomeController(Config config) {\n        this.config = config;\n    }\n\n    public Result index() {\n        // logged some messages using different log levels\n        logger.debug(&quot;A super debug message&quot;);\n        logger.info(&quot;An info message&quot;);\n        logger.warn(&quot;A warning message&quot;);\n        // logged a message using a value provided in the config file\n        logger.info(&quot;the value of some-key is &quot; + config.getString(&quot;some-key&quot;));\n        return ok(views.html.index.render());\n    }\n\n}\n</code></pre>\n<p>I created two run configurations in Intellij:</p>\n<h4>prod</h4>\n<ul>\n<li><code>Url To Open</code></li>\n</ul>\n<pre><code>http://localhost:9020\n</code></pre>\n<ul>\n<li><code>JVM Options</code>:</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>-Xms512M -Xmx1024M -Xss1M -XX:+CMSClassUnloadingEnabled\n</code></pre>\n<ul>\n<li><p>set the log level root to <code>INFO</code> and added the prefix <code>PROD STDOUT - </code> for the log messages in <code>logback.xml</code> file</p>\n</li>\n<li><p>added the line <code>some-key = &quot;A Prod Value&quot;</code> to <code>application.conf</code> file</p>\n</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/18y46.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/18y46.png\" alt=\"run web app prod\" /></a></p>\n<p>Got the following output</p>\n<pre class=\"lang-bash prettyprint-override\"><code>/&lt;path to java home&gt;/bin/java \n  -Dfile.encoding=UTF8 \n  -Djline.terminal=none \n  -Dsbt.global.base=/private/var/folders/n3/7h5c5s2x1d1f_m_vz22h73280000gn/T/sbt-global-pluginstub \n  -Dsbt.log.noformat=true \n  -Xms512M \n  -Xmx1024M \n  -Xss1M\n  -XX:+CMSClassUnloadingEnabled -Didea.managed=true \n  -classpath &quot;&lt;intellij app path&gt;/IntelliJIdea2023.1/plugins/Scala/launcher/sbt-launch.jar&quot; xsbt.boot.Boot &quot;project root&quot; &quot;run 9020&quot; # new value for the port\n\n#############################################\nsome init log messages from play\n#############################################\n\n# next you can see the prefix added\nPROD STDOUT - 2023-08-05 18:23:10 INFO  play.api.Play  Application started (Dev) (no global state)\nPROD STDOUT - 2023-08-05 18:23:11 INFO  controllers.HomeController  An info message\nPROD STDOUT - 2023-08-05 18:23:11 WARN  controllers.HomeController  A warning message\nPROD STDOUT - 2023-08-05 18:23:11 INFO  controllers.HomeController  the value of some-key is A Prod Value\n# above you can see the value of the key from the config file\n</code></pre>\n<h4>dev</h4>\n<ul>\n<li><code>Url To Open</code></li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>http://localhost:9010\n</code></pre>\n<ul>\n<li><code>JVM Options</code>: set path for config and logback files, replaced the values for <code>Xms</code>, <code>Xmx</code>  and <code>Xss</code></li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>-Xmx2048M -Xss2M -XX:+CMSClassUnloadingEnabled -Dconfig.file=conf/dev-application.conf -Dlogger.file=conf/dev-logback.xml\n</code></pre>\n<ul>\n<li><p>set the log level root to <code>DEBUG</code> and added the prefix <code>DEV STDOUT - </code> for the log messages in <code>dev-logback.xml</code> file</p>\n</li>\n<li><p>added the line <code>some-key = &quot;A Dev Value&quot;</code> to <code>dev-application.conf</code> file</p>\n</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/J5SaL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J5SaL.png\" alt=\"run web app dev\" /></a></p>\n<p>Got the following output</p>\n<pre><code>/&lt;java home path&gt;/bin/java \n  -Dfile.encoding=UTF8 \n  -Djline.terminal=none \n  -Dsbt.global.base=/private/var/folders/n3/7h5c5s2x1d1f_m_vz22h73280000gn/T/sbt-global-pluginstub \n  -Dsbt.log.noformat=true \n  -Xms1024M # param edited \n  -Xmx2048M # param edited\n  -Xss2M    # param edited\n  -XX:+CMSClassUnloadingEnabled \n  -Dconfig.file=conf/dev-application.conf # param added\n  -Dlogger.file=conf/dev-logback.xml      # param added\n  -Didea.managed=true \n  -classpath &quot;/&lt;intellij path&gt;/IntelliJIdea2023.1/plugins/Scala/launcher/sbt-launch.jar&quot; xsbt.boot.Boot &quot;project root&quot; &quot;run 9010&quot; # here you can see the value of the port I set in `Url To Open`\n\n#############################################\nsome init log messages from play\n#############################################\n\n# next you can see the prefix added for dev and also the log level is set ot DEBUG\nDEV STDOUT - 2023-08-05 18:34:18 DEBUG controllers.HomeController  A super debug message\nDEV STDOUT - 2023-08-05 18:34:18 INFO  controllers.HomeController  An info message\nDEV STDOUT - 2023-08-05 18:34:18 WARN  controllers.HomeController  A warning message\nDEV STDOUT - 2023-08-05 18:34:18 INFO  controllers.HomeController  the value of some-key is A Dev Value\n# above you can see the value of the key from the config file\n</code></pre>\n"}],"owner":{"account_id":19044543,"reputation":6383,"user_id":13903942,"display_name":"Federico Ba&#249;"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76843869,"answer_count":1,"score":0,"last_activity_date":1691276536,"creation_date":1691244966,"question_id":76842056,"body_markdown":"### The problem\r\n\r\nI need to run a Play2 Java application build with sbt using IntelliJ Ultimate. \r\nWhen using the option &#39;Run Play 2 App` it works but it runs with default configuration.\r\n\r\nHow can I supply custom sbt configuration in IntelliJ?\r\n\r\n\r\n### More in Details\r\n\r\nI can run in the terminal and it works with this command \r\n\r\n```\r\nsbt  -J-XX:+UnlockExperimentalVMOptions &quot;start -Dconfig.file=/conf/application.conf -Dpidfile.path=/dev/null -Djava.net.preferIPv4Stack=true -Dlogger.file=/conf/logback.xml&quot;\r\n```\r\n\r\nNow, in the `application.conf` there are many custom configuration but the most noticable is the Play web port which is `play.server.http.port=5000`\r\nSo I can see straigh away that it picked up the correct configuration at the start.\r\n\r\n\r\n```\r\n--- (Running the application, auto-reloading is enabled) ---\r\n\r\n[info] p.c.s.NettyServer - Listening for HTTP on /0:0:0:0:0:0:0:0:9000\r\n\r\nServer started, use Alt+D to stop\r\n``` \r\n\r\nNow in IntelliJ there is a build in &#39;Play 2 App&#39; *Run/Debug configurations* but really I don&#39;t see any way to:\r\n\r\n1. Supply sbt arguments\r\n2. Run sbt with command &#39;start&#39; but instead it runs always as `sbt run&#39; (I know this because the `sbt start` is in production mode and the application need to run in that way at the moment \r\n\r\n[![enter image description here][1]][1]\r\n\r\nI also try with run/debug as &#39;Application&#39; following this old answer here : https://stackoverflow.com/a/5390609/13903942\r\n\r\nI **almost** works. I can give the stb option but I can&#39;t choose to run as `sbt run` or `sbt start` it seems it always run as `sbt start`\r\n\r\nUltimatelly I need any other run/debug option.\r\n\r\nI don&#39;t need **running from terminal solution**, this I know how to do it.\r\nTHe whole point to pay a Ultimate version of Intellij is to be able to run and Run the debugger with the IDE (otherwise I ll use something else)\r\n\r\nIs there a way?\r\n\r\n\r\nHonestly, is probably one of the worst un-documented and twisted situation I&#39;ve being facing in relation to the fact that, we are talking about Java is very known programming language, Play framework stand basically at top position on Java frameworks and well IntelliJ integration,  I&#39;m astonish on how bad is and the amount of hours I&#39;m spending just to make this run. \r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JP25B.png","title":"Java Play - How run Play in IntelliJ with custom sbt configurations options","body":"<h3>The problem</h3>\n<p>I need to run a Play2 Java application build with sbt using IntelliJ Ultimate.\nWhen using the option 'Run Play 2 App` it works but it runs with default configuration.</p>\n<p>How can I supply custom sbt configuration in IntelliJ?</p>\n<h3>More in Details</h3>\n<p>I can run in the terminal and it works with this command</p>\n<pre><code>sbt  -J-XX:+UnlockExperimentalVMOptions &quot;start -Dconfig.file=/conf/application.conf -Dpidfile.path=/dev/null -Djava.net.preferIPv4Stack=true -Dlogger.file=/conf/logback.xml&quot;\n</code></pre>\n<p>Now, in the <code>application.conf</code> there are many custom configuration but the most noticable is the Play web port which is <code>play.server.http.port=5000</code>\nSo I can see straigh away that it picked up the correct configuration at the start.</p>\n<pre><code>--- (Running the application, auto-reloading is enabled) ---\n\n[info] p.c.s.NettyServer - Listening for HTTP on /0:0:0:0:0:0:0:0:9000\n\nServer started, use Alt+D to stop\n</code></pre>\n<p>Now in IntelliJ there is a build in 'Play 2 App' <em>Run/Debug configurations</em> but really I don't see any way to:</p>\n<ol>\n<li>Supply sbt arguments</li>\n<li>Run sbt with command 'start' but instead it runs always as <code>sbt run' (I know this because the </code>sbt start` is in production mode and the application need to run in that way at the moment</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/JP25B.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JP25B.png\" alt=\"enter image description here\" /></a></p>\n<p>I also try with run/debug as 'Application' following this old answer here : <a href=\"https://stackoverflow.com/a/5390609/13903942\">https://stackoverflow.com/a/5390609/13903942</a></p>\n<p>I <strong>almost</strong> works. I can give the stb option but I can't choose to run as <code>sbt run</code> or <code>sbt start</code> it seems it always run as <code>sbt start</code></p>\n<p>Ultimatelly I need any other run/debug option.</p>\n<p>I don't need <strong>running from terminal solution</strong>, this I know how to do it.\nTHe whole point to pay a Ultimate version of Intellij is to be able to run and Run the debugger with the IDE (otherwise I ll use something else)</p>\n<p>Is there a way?</p>\n<p>Honestly, is probably one of the worst un-documented and twisted situation I've being facing in relation to the fact that, we are talking about Java is very known programming language, Play framework stand basically at top position on Java frameworks and well IntelliJ integration,  I'm astonish on how bad is and the amount of hours I'm spending just to make this run.</p>\n"},{"tags":["java","scala","gradle","gradle-kotlin-dsl"],"comments":[{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":0,"creation_date":1691277085,"post_id":76843849,"comment_id":135470573,"body_markdown":"Are you running gradle itself on Java 8?","body":"Are you running gradle itself on Java 8?"},{"owner":{"account_id":1920862,"reputation":3756,"user_id":1732418,"accept_rate":53,"display_name":"tribbloid"},"score":0,"creation_date":1691280061,"post_id":76843849,"comment_id":135470721,"body_markdown":"@daniu yes. I won&#39;t know which Java version was used to publish splain to Gradle online repository tho","body":"@daniu yes. I won&#39;t know which Java version was used to publish splain to Gradle online repository tho"}],"owner":{"account_id":1920862,"reputation":3756,"user_id":1732418,"accept_rate":53,"display_name":"tribbloid"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691276457,"creation_date":1691276059,"question_id":76843849,"body_markdown":"I&#39;m trying to use splain plugin 1.0.2 for Scala 2.13.11. According to its build definition file, it is published to be compatible with any Java version higher than 1.8:\r\n\r\nhttps://github.com/tek/splain/blob/Release/1.0.2-2.13.11/build.gradle.kts#L1\r\n\r\n```\r\n    tasks {\r\n        val jvmTarget = JavaVersion.VERSION_1_8.toString()\r\n\r\n        withType&lt;ScalaCompile&gt; {\r\n\r\n            targetCompatibility = jvmTarget\r\n```\r\n\r\nUnfortunantely, when being imported as a Scala compiler plugin:\r\n\r\n```\r\n            val splainD = &quot;io.tryp:splain_2.13.11:1.0.2&quot;\r\n\r\n            scalaCompilerPlugins(splainD)\r\n```\r\n\r\nI got the following error:\r\n\r\n```\r\n\r\nExecution failed for task &#39;:prover-commons:core:compileTestFixturesScala&#39;.\r\n&gt; Could not resolve all files for configuration &#39;:prover-commons:core:testFixturesCompileClasspath&#39;.\r\n   &gt; Could not resolve io.tryp:splain_2.13.11:1.0.2.\r\n     Required by:\r\n         project :prover-commons:core\r\n      &gt; No matching variant of io.tryp:splain_2.13.11:1.0.2 was found. The consumer was configured to find a library for use during compile-time, compatible with Java 8, preferably in the form of class files, preferably optimized for standard JVMs, and its dependencies declared externally but:\r\n          - Variant &#39;apiElements&#39; capability io.tryp:splain_2.13.11:1.0.2 declares a library for use during compile-time, packaged as a jar, and its dependencies declared externally:\r\n              - Incompatible because this component declares a component, compatible with Java 11 and the consumer needed a component, compatible with Java 8\r\n              - Other compatible attribute:\r\n                  - Doesn&#39;t say anything about its target Java environment (preferred optimized for standard JVMs)\r\n          - Variant &#39;javadocElements&#39; capability io.tryp:splain_2.13.11:1.0.2 declares a component for use during runtime, and its dependencies declared externally:\r\n              - Incompatible because this component declares documentation and the consumer needed a library\r\n              - Other compatible attributes:\r\n                  - Doesn&#39;t say anything about its target Java environment (preferred optimized for standard JVMs)\r\n                  - Doesn&#39;t say anything about its target Java version (required compatibility with Java 8)\r\n                  - Doesn&#39;t say anything about its elements (required them preferably in the form of class files)\r\n          - Variant &#39;runtimeElements&#39; capability io.tryp:splain_2.13.11:1.0.2 declares a library for use during runtime, packaged as a jar, and its dependencies declared externally:\r\n              - Incompatible because this component declares a component, compatible with Java 11 and the consumer needed a component, compatible with Java 8\r\n              - Other compatible attribute:\r\n                  - Doesn&#39;t say anything about its target Java environment (preferred optimized for standard JVMs)\r\n          - Variant &#39;sourcesElements&#39; capability io.tryp:splain_2.13.11:1.0.2 declares a component for use during runtime, and its dependencies declared externally:\r\n              - Incompatible because this component declares documentation and the consumer needed a library\r\n              - Other compatible attributes:\r\n                  - Doesn&#39;t say anything about its target Java environment (preferred optimized for standard JVMs)\r\n                  - Doesn&#39;t say anything about its target Java version (required compatibility with Java 8)\r\n                  - Doesn&#39;t say anything about its elements (required them preferably in the form of class files)\r\n\r\n```\r\n\r\n(This error can be observed on CI: https://github.com/tribbloid/prover-commons/actions/runs/5773185275/job/15648874150)\r\n\r\n(all Gradle snippets are written in kotlin scripts)\r\n\r\nSo my questions are:\r\n\r\n- Why is splain 1.0.2 reported to be only compatible with Java 11, despite being explicitly told to use another Java version?\r\n- How to temporarily disable this check from consumer side?","title":"In Gradle, why is `targetCompatibility` compiler option being ignored? How to disable compatibility check completely?","body":"<p>I'm trying to use splain plugin 1.0.2 for Scala 2.13.11. According to its build definition file, it is published to be compatible with any Java version higher than 1.8:</p>\n<p><a href=\"https://github.com/tek/splain/blob/Release/1.0.2-2.13.11/build.gradle.kts#L1\" rel=\"nofollow noreferrer\">https://github.com/tek/splain/blob/Release/1.0.2-2.13.11/build.gradle.kts#L1</a></p>\n<pre><code>    tasks {\n        val jvmTarget = JavaVersion.VERSION_1_8.toString()\n\n        withType&lt;ScalaCompile&gt; {\n\n            targetCompatibility = jvmTarget\n</code></pre>\n<p>Unfortunantely, when being imported as a Scala compiler plugin:</p>\n<pre><code>            val splainD = &quot;io.tryp:splain_2.13.11:1.0.2&quot;\n\n            scalaCompilerPlugins(splainD)\n</code></pre>\n<p>I got the following error:</p>\n<pre><code>\nExecution failed for task ':prover-commons:core:compileTestFixturesScala'.\n&gt; Could not resolve all files for configuration ':prover-commons:core:testFixturesCompileClasspath'.\n   &gt; Could not resolve io.tryp:splain_2.13.11:1.0.2.\n     Required by:\n         project :prover-commons:core\n      &gt; No matching variant of io.tryp:splain_2.13.11:1.0.2 was found. The consumer was configured to find a library for use during compile-time, compatible with Java 8, preferably in the form of class files, preferably optimized for standard JVMs, and its dependencies declared externally but:\n          - Variant 'apiElements' capability io.tryp:splain_2.13.11:1.0.2 declares a library for use during compile-time, packaged as a jar, and its dependencies declared externally:\n              - Incompatible because this component declares a component, compatible with Java 11 and the consumer needed a component, compatible with Java 8\n              - Other compatible attribute:\n                  - Doesn't say anything about its target Java environment (preferred optimized for standard JVMs)\n          - Variant 'javadocElements' capability io.tryp:splain_2.13.11:1.0.2 declares a component for use during runtime, and its dependencies declared externally:\n              - Incompatible because this component declares documentation and the consumer needed a library\n              - Other compatible attributes:\n                  - Doesn't say anything about its target Java environment (preferred optimized for standard JVMs)\n                  - Doesn't say anything about its target Java version (required compatibility with Java 8)\n                  - Doesn't say anything about its elements (required them preferably in the form of class files)\n          - Variant 'runtimeElements' capability io.tryp:splain_2.13.11:1.0.2 declares a library for use during runtime, packaged as a jar, and its dependencies declared externally:\n              - Incompatible because this component declares a component, compatible with Java 11 and the consumer needed a component, compatible with Java 8\n              - Other compatible attribute:\n                  - Doesn't say anything about its target Java environment (preferred optimized for standard JVMs)\n          - Variant 'sourcesElements' capability io.tryp:splain_2.13.11:1.0.2 declares a component for use during runtime, and its dependencies declared externally:\n              - Incompatible because this component declares documentation and the consumer needed a library\n              - Other compatible attributes:\n                  - Doesn't say anything about its target Java environment (preferred optimized for standard JVMs)\n                  - Doesn't say anything about its target Java version (required compatibility with Java 8)\n                  - Doesn't say anything about its elements (required them preferably in the form of class files)\n\n</code></pre>\n<p>(This error can be observed on CI: <a href=\"https://github.com/tribbloid/prover-commons/actions/runs/5773185275/job/15648874150\" rel=\"nofollow noreferrer\">https://github.com/tribbloid/prover-commons/actions/runs/5773185275/job/15648874150</a>)</p>\n<p>(all Gradle snippets are written in kotlin scripts)</p>\n<p>So my questions are:</p>\n<ul>\n<li>Why is splain 1.0.2 reported to be only compatible with Java 11, despite being explicitly told to use another Java version?</li>\n<li>How to temporarily disable this check from consumer side?</li>\n</ul>\n"},{"tags":["java","enums","switch-statement"],"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1691269431,"post_id":76843490,"comment_id":135469957,"body_markdown":"Instead of a _switch_, try using a loop on _MYENUM.values_.  Check each _toString_ from there.  Use a _boolean_ outside of the loop, to indicate a match.","body":"Instead of a <i>switch</i>, try using a loop on <i>MYENUM.values</i>.  Check each <i>toString</i> from there.  Use a <i>boolean</i> outside of the loop, to indicate a match."},{"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":0,"creation_date":1691327309,"post_id":76843490,"comment_id":135473845,"body_markdown":"Did you check [How to get an enum value from a string value in Java](https://stackoverflow.com/q/604424)?","body":"Did you check <a href=\"https://stackoverflow.com/q/604424\">How to get an enum value from a string value in Java</a>?"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1691269105,"creation_date":1691269105,"answer_id":76843513,"question_id":76843490,"body_markdown":"You can&#39;t. The strings in a switch block have to be constants, and while `MYENUM.FOO1.toString()` feels constant, the JVM has no idea that it is (after all, your `toString()` method could roll some dice, ping a web server, who knows what it&#39;ll do). Hence, the JVM will not allow it and nothing you&#39;re going to do can make it work.\r\n\r\nInstead, make a map that maps these string values to the right enum. This also gives you the performance benefit you might be looking for (O[1] lookup instead of O[n] lookup). Not that this will matter unless you have hundreds, maybe even thousands of enums. The enum itself can do this:\r\n\r\n```\r\npublic enum MYENUM {\r\n    FOO1(&quot;hello&quot;),\r\n    FOO2(&quot;goodbye&quot;),\r\n \r\n    private final String toString;\r\n\r\n    MYENUM(String toString) {\r\n        this.toString = toString;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return this.toString;\r\n    }\r\n\r\n    private static final Map&lt;String, MYENUM&gt; stringToValue;\r\n    static {\r\n      var m = new HashMap&lt;String, MYENUM&gt;();\r\n      for (MYENUM e : values()) m.put(e.toString(), e);\r\n      stringToValue = Collections.unmodifiableMap(m);\r\n    }\r\n\r\n    public static MYENUM of(String v) {\r\n      return stringToValue.get(v);\r\n    }\r\n}\r\n```\r\n\r\nNow replace your entire `switch` block with simply `MYENUM.of(toCheck)`.\r\n","title":"Compare string with toString() representation of enum value using switch in Java","body":"<p>You can't. The strings in a switch block have to be constants, and while <code>MYENUM.FOO1.toString()</code> feels constant, the JVM has no idea that it is (after all, your <code>toString()</code> method could roll some dice, ping a web server, who knows what it'll do). Hence, the JVM will not allow it and nothing you're going to do can make it work.</p>\n<p>Instead, make a map that maps these string values to the right enum. This also gives you the performance benefit you might be looking for (O[1] lookup instead of O[n] lookup). Not that this will matter unless you have hundreds, maybe even thousands of enums. The enum itself can do this:</p>\n<pre><code>public enum MYENUM {\n    FOO1(&quot;hello&quot;),\n    FOO2(&quot;goodbye&quot;),\n \n    private final String toString;\n\n    MYENUM(String toString) {\n        this.toString = toString;\n    }\n\n    @Override\n    public String toString() {\n        return this.toString;\n    }\n\n    private static final Map&lt;String, MYENUM&gt; stringToValue;\n    static {\n      var m = new HashMap&lt;String, MYENUM&gt;();\n      for (MYENUM e : values()) m.put(e.toString(), e);\n      stringToValue = Collections.unmodifiableMap(m);\n    }\n\n    public static MYENUM of(String v) {\n      return stringToValue.get(v);\n    }\n}\n</code></pre>\n<p>Now replace your entire <code>switch</code> block with simply <code>MYENUM.of(toCheck)</code>.</p>\n"},{"tags":[],"owner":{"account_id":62234,"reputation":19819,"user_id":185034,"accept_rate":100,"display_name":"Paul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691270177,"creation_date":1691270177,"answer_id":76843567,"question_id":76843490,"body_markdown":"In short, switch on an `enum`, not a `String`.\r\n\r\nHere&#39;s how I construct and use enums like yours (i.e. using an alternate value):\r\n\r\n```\r\npublic enum MyEnum {\r\n    FOO1(&quot;hello&quot;),\r\n    FOO2(&quot;goodbye&quot;),\r\n\r\n    private static final Map&lt;String, MyEnum&gt; lookupMap = new TreeMap&lt;&gt;();\r\n \r\n    private final String displayStr;\r\n\r\n    MyEnum(String displayStr) {\r\n        this.displayStr= displayStr;\r\n    }\r\n\r\n    public static MyEnum parse(String s)\r\n    {\r\n      if (s == null) throw new NullPointerException(&quot;Cannot parse null String&quot;);\r\n\r\n      if (lookupMap.isEmpty())\r\n      {\r\n        for (MyEnum myEnum: values())\r\n        {\r\n           lookupMap.put(myEnum.name(), myEnum);\r\n           lookupMap.put(myEnum.displayStr, myEnum);\r\n        }\r\n      }\r\n\r\n      MyEnum result = lookupMap.get(s);\r\n      if (result == null) throw new IllegalArgumentException(&quot;No MyEnum corresponds to &quot; + s);\r\n      return result;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return displayStr;\r\n    }\r\n}\r\n```\r\n\r\nYour `switch` statement then becomes:\r\n\r\n```java\r\nMyEnum toCheck = MyEnum.parse(&quot;hello&quot;);\r\nif (toCheck == null)\r\n{\r\n  // In this block you must either return, throw an exception,\r\n  // or set toCheck to a non-null default value.\r\n}\r\n\r\nswitch(toCheck) {\r\n    case MYENUM.FOO1:\r\n        //Do stuff\r\n        break;\r\n\r\n    case MYENUM.FOO2:\r\n        //Do stuff\r\n        break;\r\n\r\n// etc.\r\n}\r\n```\r\n\r\n","title":"Compare string with toString() representation of enum value using switch in Java","body":"<p>In short, switch on an <code>enum</code>, not a <code>String</code>.</p>\n<p>Here's how I construct and use enums like yours (i.e. using an alternate value):</p>\n<pre><code>public enum MyEnum {\n    FOO1(&quot;hello&quot;),\n    FOO2(&quot;goodbye&quot;),\n\n    private static final Map&lt;String, MyEnum&gt; lookupMap = new TreeMap&lt;&gt;();\n \n    private final String displayStr;\n\n    MyEnum(String displayStr) {\n        this.displayStr= displayStr;\n    }\n\n    public static MyEnum parse(String s)\n    {\n      if (s == null) throw new NullPointerException(&quot;Cannot parse null String&quot;);\n\n      if (lookupMap.isEmpty())\n      {\n        for (MyEnum myEnum: values())\n        {\n           lookupMap.put(myEnum.name(), myEnum);\n           lookupMap.put(myEnum.displayStr, myEnum);\n        }\n      }\n\n      MyEnum result = lookupMap.get(s);\n      if (result == null) throw new IllegalArgumentException(&quot;No MyEnum corresponds to &quot; + s);\n      return result;\n    }\n\n    @Override\n    public String toString() {\n        return displayStr;\n    }\n}\n</code></pre>\n<p>Your <code>switch</code> statement then becomes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>MyEnum toCheck = MyEnum.parse(&quot;hello&quot;);\nif (toCheck == null)\n{\n  // In this block you must either return, throw an exception,\n  // or set toCheck to a non-null default value.\n}\n\nswitch(toCheck) {\n    case MYENUM.FOO1:\n        //Do stuff\n        break;\n\n    case MYENUM.FOO2:\n        //Do stuff\n        break;\n\n// etc.\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3145385,"reputation":883,"user_id":2659962,"display_name":"Akhilesh Pandey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691270186,"creation_date":1691270186,"answer_id":76843568,"question_id":76843490,"body_markdown":"Unfortunately, you cannot directly use a `switch` statement with method calls in the case labels like `MYENUM.FOO1.toString()`. The case expressions in a switch statement must be compile-time constant expressions. The result of a method call like `toString()` is not known until runtime so it&#39;s not a constant expression. This is why you cannot directly `switch` on the result of `toString()`.\r\n\r\nHowever, you can create a `static` method that performs the logic of the switch statement using a `Map`. \r\n\r\n```\r\nimport java.util.*;\r\nimport java.util.stream.*;\r\n\r\npublic enum MYENUM {\r\n    FOO1(&quot;hello&quot;),\r\n    FOO2(&quot;goodbye&quot;);\r\n\r\n    private final String toString;\r\n\r\n    MYENUM(String toString) {\r\n        this.toString = toString;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return this.toString;\r\n    }\r\n\r\n    private static final Map&lt;String, MYENUM&gt; ENUM_MAP = Arrays.stream(MYENUM.values())\r\n            .collect(Collectors.toUnmodifiableMap(MYENUM::toString, e -&gt; e));\r\n\r\n    public static MYENUM get(String name) {\r\n        return ENUM_MAP.get(name);\r\n    }\r\n}\r\n```\r\n\r\nYou would use the `get()` method in your switch statement like this:\r\n\r\n```\r\nString toCheck = &quot;hello&quot;;\r\n\r\nswitch (MYENUM.get(toCheck)) {\r\n    case FOO1 -&gt; {\r\n        // Do stuff\r\n    }\r\n    case FOO2 -&gt; {\r\n        // Do stuff\r\n    }\r\n    default -&gt; {\r\n        // Handle case where no match is found\r\n    }\r\n}\r\n```\r\n\r\n","title":"Compare string with toString() representation of enum value using switch in Java","body":"<p>Unfortunately, you cannot directly use a <code>switch</code> statement with method calls in the case labels like <code>MYENUM.FOO1.toString()</code>. The case expressions in a switch statement must be compile-time constant expressions. The result of a method call like <code>toString()</code> is not known until runtime so it's not a constant expression. This is why you cannot directly <code>switch</code> on the result of <code>toString()</code>.</p>\n<p>However, you can create a <code>static</code> method that performs the logic of the switch statement using a <code>Map</code>.</p>\n<pre><code>import java.util.*;\nimport java.util.stream.*;\n\npublic enum MYENUM {\n    FOO1(&quot;hello&quot;),\n    FOO2(&quot;goodbye&quot;);\n\n    private final String toString;\n\n    MYENUM(String toString) {\n        this.toString = toString;\n    }\n\n    @Override\n    public String toString() {\n        return this.toString;\n    }\n\n    private static final Map&lt;String, MYENUM&gt; ENUM_MAP = Arrays.stream(MYENUM.values())\n            .collect(Collectors.toUnmodifiableMap(MYENUM::toString, e -&gt; e));\n\n    public static MYENUM get(String name) {\n        return ENUM_MAP.get(name);\n    }\n}\n</code></pre>\n<p>You would use the <code>get()</code> method in your switch statement like this:</p>\n<pre><code>String toCheck = &quot;hello&quot;;\n\nswitch (MYENUM.get(toCheck)) {\n    case FOO1 -&gt; {\n        // Do stuff\n    }\n    case FOO2 -&gt; {\n        // Do stuff\n    }\n    default -&gt; {\n        // Handle case where no match is found\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1691274331,"creation_date":1691272288,"answer_id":76843675,"question_id":76843490,"body_markdown":"Instead of using the _switch_, you can utilize the _Enum#values_ method and loop on each entry.\r\n\r\n_[Enum#valueOf (Java SE 20 &amp;amp; JDK 20)](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Enum.html#valueOf(java.lang.Class,java.lang.String))_,\r\n\r\n&gt; _&quot;... All the constants of an enum class can be obtained by calling the implicit public static T[] values() method of that class ...&quot;_\r\n\r\nSo, here is an example _enum_.\r\n\r\n```java\r\nenum Value {\r\n    A(&quot;ABC&quot;), B(&quot;DEF&quot;), C(&quot;GHI&quot;);\r\n\r\n    public String string;\r\n\r\n    Value(String string) {\r\n        this.string = string;\r\n    }\r\n}\r\n```\r\n\r\nAnd, here is an example usage.\r\n\r\n```java\r\nString string = &quot;GHI&quot;;\r\nValue value = null;\r\nfor (Value valueB : Value.values()) {\r\n    if (valueB.string.equals(string)) {\r\n        value = valueB;\r\n        break;\r\n    }\r\n}\r\nSystem.out.println(&quot;value = &quot; + value);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\nvalue = C\r\n```\r\n\r\nAdditionally, you could just add this as a _static_ method within the _enum_.\r\n\r\n```java\r\nenum Value {\r\n    A(&quot;ABC&quot;), B(&quot;DEF&quot;), C(&quot;GHI&quot;);\r\n\r\n    public String string;\r\n\r\n    Value(String string) {\r\n        this.string = string;\r\n    }\r\n\r\n    /** @return null if not found */\r\n    static Value parse(String string) {\r\n        for (Value value : Value.values()) {\r\n            if (value.string.equals(string)) return value;\r\n        }\r\n        return null;\r\n    }\r\n}\r\n```\r\n\r\nIf you did want to utilize the _switch_ structure, here is an example, where _string_ is the _toCheck_ value.\r\n\r\n```java\r\nValue value = Value.parse(string);\r\nif (value != null) {\r\n    switch (value) {\r\n        case A -&gt; {\r\n            //Do stuff\r\n        }\r\n        case B -&gt; {\r\n            //Do stuff\r\n        }\r\n        case C -&gt; {\r\n\r\n        }\r\n    }\r\n}\r\n```","title":"Compare string with toString() representation of enum value using switch in Java","body":"<p>Instead of using the <em>switch</em>, you can utilize the <em>Enum#values</em> method and loop on each entry.</p>\n<p><em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Enum.html#valueOf(java.lang.Class,java.lang.String)\" rel=\"nofollow noreferrer\">Enum#valueOf (Java SE 20 &amp; JDK 20)</a></em>,</p>\n<blockquote>\n<p><em>&quot;... All the constants of an enum class can be obtained by calling the implicit public static T[] values() method of that class ...&quot;</em></p>\n</blockquote>\n<p>So, here is an example <em>enum</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>enum Value {\n    A(&quot;ABC&quot;), B(&quot;DEF&quot;), C(&quot;GHI&quot;);\n\n    public String string;\n\n    Value(String string) {\n        this.string = string;\n    }\n}\n</code></pre>\n<p>And, here is an example usage.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String string = &quot;GHI&quot;;\nValue value = null;\nfor (Value valueB : Value.values()) {\n    if (valueB.string.equals(string)) {\n        value = valueB;\n        break;\n    }\n}\nSystem.out.println(&quot;value = &quot; + value);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>value = C\n</code></pre>\n<p>Additionally, you could just add this as a <em>static</em> method within the <em>enum</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>enum Value {\n    A(&quot;ABC&quot;), B(&quot;DEF&quot;), C(&quot;GHI&quot;);\n\n    public String string;\n\n    Value(String string) {\n        this.string = string;\n    }\n\n    /** @return null if not found */\n    static Value parse(String string) {\n        for (Value value : Value.values()) {\n            if (value.string.equals(string)) return value;\n        }\n        return null;\n    }\n}\n</code></pre>\n<p>If you did want to utilize the <em>switch</em> structure, here is an example, where <em>string</em> is the <em>toCheck</em> value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Value value = Value.parse(string);\nif (value != null) {\n    switch (value) {\n        case A -&gt; {\n            //Do stuff\n        }\n        case B -&gt; {\n            //Do stuff\n        }\n        case C -&gt; {\n\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":13564201,"reputation":356,"user_id":9784846,"display_name":"J_code"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76843513,"answer_count":4,"score":0,"last_activity_date":1691274331,"creation_date":1691268583,"question_id":76843490,"body_markdown":"I have a long list of enumerations that are being referenced and selected via if-statements in my code, however, I want to use switch statements as I have a huge number of such statements in multiple places. This is a small subset of the enumerations that I have:\r\n\r\n```\r\npublic enum MYENUM {\r\n    FOO1(&quot;hello&quot;),\r\n    FOO2(&quot;goodbye&quot;),\r\n \r\n    private final String toString;\r\n\r\n    MYENUM(String toString) {\r\n        this.toString = toString;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return this.toString;\r\n    }\r\n}\r\n```\r\n\r\nPreviously I had:\r\n\r\n```\r\nString toCheck = &quot;hello;&quot;\r\n\r\nif (toCheck.equals(MYENUM.FOO1.toString())) {\r\n    //Do stuff\r\n}\r\n\r\nif (toCheck.equals(MYENUM.FOO2.toString())) {\r\n    //Do stuff\r\n}\r\n```\r\n\r\nBut now I want:\r\n\r\n```\r\nString toCheck = &quot;hello;&quot;\r\nswitch(toCheck) {\r\n    case MYENUM.FOO1.toString():\r\n        //Do stuff\r\n        break;\r\n\r\n    case MYENUM.FOO2.toString():\r\n        //Do stuff\r\n        break;\r\n\r\n}\r\n```\r\n\r\nNeedless to say, this does not work, I can&#39;t even enter the toString() function of the Enum in the case, `&#39;toString&#39; has private access in &#39;MYENUM&#39;`. How can I modify my switch statement so that I can properly switch on the Strings?","title":"Compare string with toString() representation of enum value using switch in Java","body":"<p>I have a long list of enumerations that are being referenced and selected via if-statements in my code, however, I want to use switch statements as I have a huge number of such statements in multiple places. This is a small subset of the enumerations that I have:</p>\n<pre><code>public enum MYENUM {\n    FOO1(&quot;hello&quot;),\n    FOO2(&quot;goodbye&quot;),\n \n    private final String toString;\n\n    MYENUM(String toString) {\n        this.toString = toString;\n    }\n\n    @Override\n    public String toString() {\n        return this.toString;\n    }\n}\n</code></pre>\n<p>Previously I had:</p>\n<pre><code>String toCheck = &quot;hello;&quot;\n\nif (toCheck.equals(MYENUM.FOO1.toString())) {\n    //Do stuff\n}\n\nif (toCheck.equals(MYENUM.FOO2.toString())) {\n    //Do stuff\n}\n</code></pre>\n<p>But now I want:</p>\n<pre><code>String toCheck = &quot;hello;&quot;\nswitch(toCheck) {\n    case MYENUM.FOO1.toString():\n        //Do stuff\n        break;\n\n    case MYENUM.FOO2.toString():\n        //Do stuff\n        break;\n\n}\n</code></pre>\n<p>Needless to say, this does not work, I can't even enter the toString() function of the Enum in the case, <code>'toString' has private access in 'MYENUM'</code>. How can I modify my switch statement so that I can properly switch on the Strings?</p>\n"},{"tags":["java","selenium-webdriver","automation","webdriver","assertion"],"answers":[{"tags":[],"owner":{"account_id":26682848,"reputation":3533,"user_id":20292589,"display_name":"Yaroslavm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691239147,"creation_date":1691239147,"answer_id":76841675,"question_id":76841580,"body_markdown":"If I understood you correct, is this case you can use `assertTrue`.\r\n\r\nHere is example of code:\r\n\r\n&lt;!-- begin snippet: java hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    driver.findElement(By.id(&quot;APjFqb&quot;)).sendKeys(&quot;mobile&quot;,Keys.ENTER);\r\n    String result = driver.findElement(By.id(&quot;result-stats&quot;)).getText().split(&quot; &quot;)[1].replaceAll(&quot;,&quot; ,&quot;&quot;);\r\n    Assert.assertTrue(Long.parseLong(result) &gt; 5000);\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"How to grab the result and assert that result is greater than 5000 using Selenium Java","body":"<p>If I understood you correct, is this case you can use <code>assertTrue</code>.</p>\n<p>Here is example of code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>driver.findElement(By.id(&quot;APjFqb&quot;)).sendKeys(&quot;mobile&quot;,Keys.ENTER);\nString result = driver.findElement(By.id(&quot;result-stats&quot;)).getText().split(&quot; &quot;)[1].replaceAll(&quot;,&quot; ,&quot;&quot;);\nAssert.assertTrue(Long.parseLong(result) &gt; 5000);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691269918,"creation_date":1691269368,"answer_id":76843522,"question_id":76841580,"body_markdown":"To assert if the number of search result value is more then _**5000**_, you have to:\r\n\r\n- Induce [WebDriverWait](https://stackoverflow.com/a/48990165/7429447) for the [_visibilityOfElementLocated()_](https://stackoverflow.com/a/49749804/7429447) and extract the text.\r\n- Split the text with respect to the _blank_ character and consider the second part.\r\n- [Remove](https://www.digitalocean.com/community/tutorials/java-remove-character-string) the `,` characters.\r\n- Use `assertTrue()` from HardAssert after converting the _`string`_ to _`long`_ using [`parseLong()`](https://www.javatpoint.com/java-long-parselong-method)\r\n- You can use either of the following [_locator strategies_](https://stackoverflow.com/a/48056120/7429447):\r\n\r\n\t  driver.get(&quot;https://www.google.com&quot;);\r\n\t  new WebDriverWait(driver, Duration.ofSeconds(10)).until(ExpectedConditions.elementToBeClickable(By.name(&quot;q&quot;))).sendKeys(&quot;mobile&quot; +Keys.chord(Keys.RETURN));\r\n\t  String result = new WebDriverWait(driver, Duration.ofSeconds(10)).until(ExpectedConditions.visibilityOfElementLocated(By.cssSelector(&quot;div#result-stats&quot;))).getText().split(&quot; &quot;)[1];\r\n\t  System.out.println(result);\r\n\t  String myresult = result.replace(&quot;,&quot;,&quot;&quot;);\r\n\t  System.out.println(myresult);\r\n\t  Assert.assertTrue(Long.parseLong(myresult) &gt; 5000);\r\n\t  \r\n- Console output:\r\n\r\n\t  21,22,00,00,000\r\n\t  21220000000","title":"How to grab the result and assert that result is greater than 5000 using Selenium Java","body":"<p>To assert if the number of search result value is more then <em><strong>5000</strong></em>, you have to:</p>\n<ul>\n<li><p>Induce <a href=\"https://stackoverflow.com/a/48990165/7429447\">WebDriverWait</a> for the <a href=\"https://stackoverflow.com/a/49749804/7429447\"><em>visibilityOfElementLocated()</em></a> and extract the text.</p>\n</li>\n<li><p>Split the text with respect to the <em>blank</em> character and consider the second part.</p>\n</li>\n<li><p><a href=\"https://www.digitalocean.com/community/tutorials/java-remove-character-string\" rel=\"nofollow noreferrer\">Remove</a> the <code>,</code> characters.</p>\n</li>\n<li><p>Use <code>assertTrue()</code> from HardAssert after converting the <em><code>string</code></em> to <em><code>long</code></em> using <a href=\"https://www.javatpoint.com/java-long-parselong-method\" rel=\"nofollow noreferrer\"><code>parseLong()</code></a></p>\n</li>\n<li><p>You can use either of the following <a href=\"https://stackoverflow.com/a/48056120/7429447\"><em>locator strategies</em></a>:</p>\n<pre><code>driver.get(&quot;https://www.google.com&quot;);\nnew WebDriverWait(driver, Duration.ofSeconds(10)).until(ExpectedConditions.elementToBeClickable(By.name(&quot;q&quot;))).sendKeys(&quot;mobile&quot; +Keys.chord(Keys.RETURN));\nString result = new WebDriverWait(driver, Duration.ofSeconds(10)).until(ExpectedConditions.visibilityOfElementLocated(By.cssSelector(&quot;div#result-stats&quot;))).getText().split(&quot; &quot;)[1];\nSystem.out.println(result);\nString myresult = result.replace(&quot;,&quot;,&quot;&quot;);\nSystem.out.println(myresult);\nAssert.assertTrue(Long.parseLong(myresult) &gt; 5000);\n</code></pre>\n</li>\n<li><p>Console output:</p>\n<pre><code>21,22,00,00,000\n21220000000\n</code></pre>\n</li>\n</ul>\n"}],"owner":{"account_id":29165710,"reputation":1,"user_id":22343357,"display_name":"Pooja Shinde"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1691274313,"creation_date":1691237668,"question_id":76841580,"body_markdown":"Which values do I have to put in actual and expected if that result is greater than 5000 and what can I do to print pass in the console?\r\n\r\nCode trials:\r\n```\r\npublic class Grabthe_result_google {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tChromeOptions options = new ChromeOptions();\r\n        options.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n        \r\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Users\\\\l\\\\OneDrive\\\\Desktop\\\\chromedriver-win32\\\\chromedriver.exe&quot;);\r\n        WebDriver driver=new ChromeDriver(options);\r\n        driver.get(&quot;https://www.google.com&quot;);\r\n        driver.findElement(By.id(&quot;APjFqb&quot;)).sendKeys(&quot;mobile&quot;,Keys.ENTER);\r\n        String result = driver.findElement(By.id(&quot;result-stats&quot;)).getText().split(&quot; &quot;)[1];\r\n     System.out.println(result);\r\n    Assert.assertEquals(0, 0);\r\n\t}\r\n}\r\n```","title":"How to grab the result and assert that result is greater than 5000 using Selenium Java","body":"<p>Which values do I have to put in actual and expected if that result is greater than 5000 and what can I do to print pass in the console?</p>\n<p>Code trials:</p>\n<pre><code>public class Grabthe_result_google {\n\n    public static void main(String[] args) {\n        ChromeOptions options = new ChromeOptions();\n        options.addArguments(&quot;--remote-allow-origins=*&quot;);\n        \n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Users\\\\l\\\\OneDrive\\\\Desktop\\\\chromedriver-win32\\\\chromedriver.exe&quot;);\n        WebDriver driver=new ChromeDriver(options);\n        driver.get(&quot;https://www.google.com&quot;);\n        driver.findElement(By.id(&quot;APjFqb&quot;)).sendKeys(&quot;mobile&quot;,Keys.ENTER);\n        String result = driver.findElement(By.id(&quot;result-stats&quot;)).getText().split(&quot; &quot;)[1];\n     System.out.println(result);\n    Assert.assertEquals(0, 0);\n    }\n}\n</code></pre>\n"},{"tags":["java","selenium-webdriver","xpath","css-selectors","webdriverwait"],"comments":[{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1691175495,"post_id":76838243,"comment_id":135461621,"body_markdown":"you&#39;ll probably want to use a WebDriverWait for this.","body":"you&#39;ll probably want to use a WebDriverWait for this."},{"owner":{"account_id":26672592,"reputation":27,"user_id":20283825,"display_name":"Sheriff Sulemana"},"score":0,"creation_date":1691181891,"post_id":76838243,"comment_id":135462603,"body_markdown":"Where do you think it is appropriate to WebdriverWait. Because this is in a class that is instantiated in the Test class so where do you will be ideal","body":"Where do you think it is appropriate to WebdriverWait. Because this is in a class that is instantiated in the Test class so where do you will be ideal"},{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1691186174,"post_id":76838243,"comment_id":135463148,"body_markdown":"these types of prompts are usually populated via Javascript which means Selenium won&#39;t know to wait for them to appear.   That&#39;s when you want to use a WebDriverWait when making a driver call to find an element.  Most sites are pretty JS heavy these days, so as a general rule, always use a WebDriverWait for all your driver calls involving the DOM.  The one exception being after a .get() call is used as Selenium will wait for the page to load in that case.  (there&#39;s no harm in using it, as it will return just about immediately if the element is found.)","body":"these types of prompts are usually populated via Javascript which means Selenium won&#39;t know to wait for them to appear.   That&#39;s when you want to use a WebDriverWait when making a driver call to find an element.  Most sites are pretty JS heavy these days, so as a general rule, always use a WebDriverWait for all your driver calls involving the DOM.  The one exception being after a .get() call is used as Selenium will wait for the page to load in that case.  (there&#39;s no harm in using it, as it will return just about immediately if the element is found.)"}],"answers":[{"tags":[],"owner":{"account_id":26682848,"reputation":3533,"user_id":20292589,"display_name":"Yaroslavm"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691233627,"creation_date":1691233627,"answer_id":76841353,"question_id":76838243,"body_markdown":"You should use `WebDriverWait` in this case until consent modal is appeared.\r\n`findElement` is executed immediately, and consent is not appeared direct after site load.\r\n\r\nYou can try this code:\r\n\r\n&lt;!-- begin snippet: java hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    WebDriverWait wdwait = new WebDriverWait(driver, 10);\r\n\r\n    driver.get(&quot;https://www.allianz.de/recht-und-eigentum/hausratversicherung/&quot;);\r\n    WebElement consent = wdwait.until(ExpectedConditions.visibilityOfElementLocated(By.id(&quot;onetrust-accept-btn-handler&quot;)));\r\n    consent.click();\r\n    wdwait.until(ExpectedConditions.invisibilityOf(consent));\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"How to close the cookie banner using Selenium","body":"<p>You should use <code>WebDriverWait</code> in this case until consent modal is appeared.\n<code>findElement</code> is executed immediately, and consent is not appeared direct after site load.</p>\n<p>You can try this code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>WebDriverWait wdwait = new WebDriverWait(driver, 10);\n\ndriver.get(&quot;https://www.allianz.de/recht-und-eigentum/hausratversicherung/&quot;);\nWebElement consent = wdwait.until(ExpectedConditions.visibilityOfElementLocated(By.id(&quot;onetrust-accept-btn-handler&quot;)));\nconsent.click();\nwdwait.until(ExpectedConditions.invisibilityOf(consent));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691272642,"creation_date":1691272642,"answer_id":76843692,"question_id":76838243,"body_markdown":"The element is a dynamic element so to click on the _**clickable**_ element you need to induce [WebDriverWait](https://stackoverflow.com/a/48990165/7429447) for the [_elementToBeClickable()_](https://stackoverflow.com/a/63301869/7429447) and you can use either of the following [_locator strategies_](https://stackoverflow.com/a/48056120/7429447):\r\n\r\n- Using _id_:\r\n\r\n\t  driver.get(&quot;https://hausrat.allianz.de/&quot;);\r\n\t  new WebDriverWait(driver, Duration.ofSeconds(10)).until(ExpectedConditions.elementToBeClickable(By.id(&quot;onetrust-accept-btn-handler&quot;))).click();\r\n\r\n- Using _cssSelector_:\r\n\r\n\t  driver.get(&quot;https://hausrat.allianz.de/&quot;);\r\n\t  new WebDriverWait(driver, Duration.ofSeconds(10)).until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;button#onetrust-accept-btn-handler&quot;))).click();\r\n           \t\r\n- Using _xpath_:\r\n\r\n\t  driver.get(&quot;https://hausrat.allianz.de/&quot;);\r\n\t  new WebDriverWait(driver, Duration.ofSeconds(10)).until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//button[@id=&#39;onetrust-accept-btn-handler&#39;]&quot;))).click();","title":"How to close the cookie banner using Selenium","body":"<p>The element is a dynamic element so to click on the <em><strong>clickable</strong></em> element you need to induce <a href=\"https://stackoverflow.com/a/48990165/7429447\">WebDriverWait</a> for the <a href=\"https://stackoverflow.com/a/63301869/7429447\"><em>elementToBeClickable()</em></a> and you can use either of the following <a href=\"https://stackoverflow.com/a/48056120/7429447\"><em>locator strategies</em></a>:</p>\n<ul>\n<li><p>Using <em>id</em>:</p>\n<pre><code>driver.get(&quot;https://hausrat.allianz.de/&quot;);\nnew WebDriverWait(driver, Duration.ofSeconds(10)).until(ExpectedConditions.elementToBeClickable(By.id(&quot;onetrust-accept-btn-handler&quot;))).click();\n</code></pre>\n</li>\n<li><p>Using <em>cssSelector</em>:</p>\n<pre><code>driver.get(&quot;https://hausrat.allianz.de/&quot;);\nnew WebDriverWait(driver, Duration.ofSeconds(10)).until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;button#onetrust-accept-btn-handler&quot;))).click();\n</code></pre>\n</li>\n<li><p>Using <em>xpath</em>:</p>\n<pre><code>driver.get(&quot;https://hausrat.allianz.de/&quot;);\nnew WebDriverWait(driver, Duration.ofSeconds(10)).until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//button[@id='onetrust-accept-btn-handler']&quot;))).click();\n</code></pre>\n</li>\n</ul>\n"}],"owner":{"account_id":26672592,"reputation":27,"user_id":20283825,"display_name":"Sheriff Sulemana"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691274018,"creation_date":1691172127,"question_id":76838243,"body_markdown":"There is a cookie on this page which i have tried to close using selenium java and testNG but not closing. The url is https://hausrat.allianz.de/\r\n\r\nBelow is my code:\r\n\r\n    public void closeCookieNotification() {//*[@id=&quot;onetrust-accept-btn-handler&quot;]\r\n            try {\r\n                // Check if the cookie notification element is present\r\n                WebElement cookieNotification = driver.findElement(By.xpath(&quot;//*[@id=\\&quot;onetrust-accept-btn-handler\\&quot;]&quot;));\r\n    \r\n                // Close the cookie notification if present\r\n                if (cookieNotification.isDisplayed()) {\r\n                    WebElement closeButton = driver.findElement(By.xpath(&quot;//*[@id=\\&quot;onetrust-accept-btn-handler\\&quot;]&quot;));\r\n                    closeButton.click();\r\n                }\r\n            } catch (Exception e) {\r\n                // Cookie notification not present or error occurred while closing, ignore\r\n                System.out.println(e.getMessage());\r\n            }\r\n        }","title":"How to close the cookie banner using Selenium","body":"<p>There is a cookie on this page which i have tried to close using selenium java and testNG but not closing. The url is <a href=\"https://hausrat.allianz.de/\" rel=\"nofollow noreferrer\">https://hausrat.allianz.de/</a></p>\n<p>Below is my code:</p>\n<pre><code>public void closeCookieNotification() {//*[@id=&quot;onetrust-accept-btn-handler&quot;]\n        try {\n            // Check if the cookie notification element is present\n            WebElement cookieNotification = driver.findElement(By.xpath(&quot;//*[@id=\\&quot;onetrust-accept-btn-handler\\&quot;]&quot;));\n\n            // Close the cookie notification if present\n            if (cookieNotification.isDisplayed()) {\n                WebElement closeButton = driver.findElement(By.xpath(&quot;//*[@id=\\&quot;onetrust-accept-btn-handler\\&quot;]&quot;));\n                closeButton.click();\n            }\n        } catch (Exception e) {\n            // Cookie notification not present or error occurred while closing, ignore\n            System.out.println(e.getMessage());\n        }\n    }\n</code></pre>\n"},{"tags":["java","selenium-webdriver","svg","xpath","css-selectors"],"answers":[{"tags":[],"owner":{"account_id":26682848,"reputation":3533,"user_id":20292589,"display_name":"Yaroslavm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691233287,"creation_date":1691233287,"answer_id":76841327,"question_id":76838075,"body_markdown":"In your case unique selector is `[role=dialog] button[aria-label*=Close]`\r\n\r\n&lt;!-- begin snippet: java hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    WebDriverWait wdwait = new WebDriverWait(driver, 10);\r\n\r\n    driver.get(&quot;https://www.marksdailyapple.com/&quot;);\r\n    wdwait.until(ExpectedConditions.visibilityOfElementLocated(By.cssSelector(&quot;[role=dialog] button[aria-label*=Close]&quot;))).click();\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"How to click on the X element to close the email subscription popup","body":"<p>In your case unique selector is <code>[role=dialog] button[aria-label*=Close]</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>WebDriverWait wdwait = new WebDriverWait(driver, 10);\n\ndriver.get(&quot;https://www.marksdailyapple.com/&quot;);\nwdwait.until(ExpectedConditions.visibilityOfElementLocated(By.cssSelector(&quot;[role=dialog] button[aria-label*=Close]&quot;))).click();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691273686,"creation_date":1691273686,"answer_id":76843746,"question_id":76838075,"body_markdown":"The element &lt;kbd&gt;X&lt;/kbd&gt; within the email subscription popup is a [_**SVG**_](https://stackoverflow.com/a/63544849/7429447) element. \r\n\r\n\r\n----------\r\n\r\n\r\nSolution\r\n--------\r\nTo click on the [_svg_](https://stackoverflow.com/a/49024531/7429447) element you need to induce [WebDriverWait](https://stackoverflow.com/a/48990165/7429447) for the [_elementToBeClickable()_](https://stackoverflow.com/a/63301869/7429447) and you can use either of the following [_locator strategies_](https://stackoverflow.com/a/48056120/7429447):\r\n\r\n\r\n\r\n- Using _cssSelector_:\r\n\r\n\t  driver.get(&quot;https://www.marksdailyapple.com/#axzz3HChquQM8&quot;);\r\n\t  new WebDriverWait(driver, Duration.ofSeconds(10)).until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;button[aria-label=&#39;Close form 3&#39;] &gt; svg &gt; path&quot;))).click();\r\n           \t\r\n- Using _xpath_:\r\n\r\n\t  driver.get(&quot;https://hausrat.allianz.de/&quot;);\r\n\t  new WebDriverWait(driver, Duration.ofSeconds(10)).until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//button[@aria-label=&#39;Close form 3&#39;]//*[name()=&#39;svg&#39;]//*[name()=&#39;path&#39;]&quot;))).click();\r\n\t  \r\n- Browser snapshot:\r\n\r\n![marksdailyapple](https://i.stack.imgur.com/3rPof.png)","title":"How to click on the X element to close the email subscription popup","body":"<p>The element <kbd>X</kbd> within the email subscription popup is a <a href=\"https://stackoverflow.com/a/63544849/7429447\"><em><strong>SVG</strong></em></a> element.</p>\n<hr />\n<h2>Solution</h2>\n<p>To click on the <a href=\"https://stackoverflow.com/a/49024531/7429447\"><em>svg</em></a> element you need to induce <a href=\"https://stackoverflow.com/a/48990165/7429447\">WebDriverWait</a> for the <a href=\"https://stackoverflow.com/a/63301869/7429447\"><em>elementToBeClickable()</em></a> and you can use either of the following <a href=\"https://stackoverflow.com/a/48056120/7429447\"><em>locator strategies</em></a>:</p>\n<ul>\n<li><p>Using <em>cssSelector</em>:</p>\n<pre><code>driver.get(&quot;https://www.marksdailyapple.com/#axzz3HChquQM8&quot;);\nnew WebDriverWait(driver, Duration.ofSeconds(10)).until(ExpectedConditions.elementToBeClickable(By.cssSelector(&quot;button[aria-label='Close form 3'] &gt; svg &gt; path&quot;))).click();\n</code></pre>\n</li>\n<li><p>Using <em>xpath</em>:</p>\n<pre><code>driver.get(&quot;https://hausrat.allianz.de/&quot;);\nnew WebDriverWait(driver, Duration.ofSeconds(10)).until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;//button[@aria-label='Close form 3']//*[name()='svg']//*[name()='path']&quot;))).click();\n</code></pre>\n</li>\n<li><p>Browser snapshot:</p>\n</li>\n</ul>\n<p><img src=\"https://i.stack.imgur.com/3rPof.png\" alt=\"marksdailyapple\" /></p>\n"}],"owner":{"account_id":29113210,"reputation":27,"user_id":22302560,"display_name":"zjboris"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76843746,"answer_count":2,"score":1,"last_activity_date":1691273875,"creation_date":1691170374,"question_id":76838075,"body_markdown":"I&#39;m trying to close this email subscription popup by clicking on the X. I tried using xpath to select it but I&#39;ve been unsuccessful.\r\n\r\nCode trial:\r\n\r\n    driver.findElement(By.xpath(&quot;/html/body/div[27]/div/div/div/div/div/div/button/svg/circle&quot;)).click();\r\n\r\nElement snapshot:\r\n \r\n[![enter image description here](https://i.stack.imgur.com/WrcBd.jpg)](https://i.stack.imgur.com/WrcBd.jpg)\r\n\r\nAny help would be appreciated.","title":"How to click on the X element to close the email subscription popup","body":"<p>I'm trying to close this email subscription popup by clicking on the X. I tried using xpath to select it but I've been unsuccessful.</p>\n<p>Code trial:</p>\n<pre><code>driver.findElement(By.xpath(&quot;/html/body/div[27]/div/div/div/div/div/div/button/svg/circle&quot;)).click();\n</code></pre>\n<p>Element snapshot:</p>\n<p><a href=\"https://i.stack.imgur.com/WrcBd.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WrcBd.jpg\" alt=\"enter image description here\" /></a></p>\n<p>Any help would be appreciated.</p>\n"},{"tags":["java","factory-pattern","abstract-factory"],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691272987,"creation_date":1691272987,"answer_id":76843708,"question_id":76843656,"body_markdown":"Your question isn&#39;t entirely clear, in that there are 2 completely different situations that can both be plausibly turned into this question. I&#39;ll answer both.\r\n\r\n## The intent is that other projects can extend this system\r\n\r\nThink about `java.util.List`. Yes, this project (The `java.util` package as a project) ships with its own implementations of this interface, including `ArrayList` and `LinkedList`. However, that interface isn&#39;t designed to be limited: If you want to write your own list implementation in your own project you are free to do so, and `List` is _designed_ to allow you to do this. Loads of projects use this: guava has `ImmutableList`, the java core libs itself has plenty of list implementations for example in the `java.util.concurrent` package, and so on.\r\n\r\n__if__ this describes your situation, then the answer is:\r\n\r\nNo, do not make that factory. Just make your implementations public. Yes, this means someone could write:\r\n\r\n```\r\nFooImplA foo = new FooImplA();\r\n```\r\n\r\nand you don&#39;t want them to, but I will free you from such concerns by providing you with this pithy but highly effective zen koan: &quot;You can&#39;t stop an idiotfrom writing idiotic code; the universe is vastly smarter than you and will create a better idiot than you can write defenses to stop them&quot;.\r\n\r\nSo, it is a pointless exercise, and this is freeing: There is no need to try. Make clear from the API, documentation, and examples how you&#39;re meant to do it. If someone is going to ignore all that and &#39;do it wrong&#39;, then let them.\r\n\r\nYou&#39;ll then be setting the system up precisely the same way `j.u.List` is: You can write this today:\r\n\r\n```\r\nArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n```\r\n\r\nIt compiles just fine. One could say you should &#39;program to the interface&#39; but as far as style problems go, this rates _very_ lowly indeed. Mostly this doesn&#39;t matter. It&#39;s the final nit one would pick in a code review if truly nothing of any substance whatsoever is left to be said.\r\n\r\n## The intent is that you created all the implementations; the system isn&#39;t designed to be extended and you don&#39;t want anybody to try it.\r\n\r\nIn that case, you need to add a bunch of new language features to do this right:\r\n\r\n#### Sealed\r\n\r\nJava20 adds the notion of &#39;sealed interfaces&#39;. A sealed interface (or class) lists every type that is allowed to implement/extend it, and no other types can do it. The aim is for you to list your own implementations and leave it at that. This means you can now __enforce__ that nobody makes custom implementations.\r\n\r\n#### static methods in interfaces\r\n\r\nThe problem with a &#39;factory&#39; the way you have it, is that it hurts discoverability. I know about your interface type and I have a need to create an instance of it. Where do I look? Naturally, first I look __in that interface__, but I find no methods that can make anything. Next, I ask my IDE to show me a list of all types that implement it. My IDE gives me a bunch of private classes hidden deep inside your project that clearly I&#39;m not meant to directly `new Impl()`, so now I&#39;m stuck. I need to read docs (the horror. I kid, but only a little - if the average user of your library just intuits what to do based on nothing more than the names of your types and methods, that&#39;s far better than a system that confuses the heck out of me until I read the docs). Then maybe I see how to do it.\r\n\r\nIn modern java you can shove static methods in interfaces. So, do that:\r\n\r\n```\r\n// Foo.java:\r\npublic sealed interface Foo permits FooImplA, FooImplB {\r\n  void doSomething();\r\n\r\n  public static Foo newImplA() {\r\n    return new FooImplA();\r\n  }\r\n\r\n  public static Foo newImplB() {\r\n    return new FooImplB();\r\n  }\r\n}\r\n\r\n// FooImplA.java:\r\nclass FooImplA implements Foo {\r\n // note how this is a package private class!\r\n ...\r\n\r\n  FooImplA() { ... } // with a package private constructor!\r\n}\r\n```\r\n\r\nThis solves all problems:\r\n\r\n* Nobody can make implementations of this other than you. You know exactly which subtypes exist, because you enumerated them and that&#39;s unchangable short of recompiling your project or hacking a JVM. (and then, of course, all bets are off. But, remember the universe making better idiots? Universe will do this, too. Nothing you can do to stop it, so don&#39;t bother trying).\r\n* Discoverability is easy, obvious, and complete: Type `Foo.`, hit CTRL+SPACE or whatever the shortcut is, and voila there they are. The java community is used to static &#39;constructors&#39; and knows to look for these when confused about how to make instances of some type. For that matter, so are IDEs and will auto-suggest these &#39;static constructors&#39; too.","title":"Right pattern for creating concrete classes of an interface","body":"<p>Your question isn't entirely clear, in that there are 2 completely different situations that can both be plausibly turned into this question. I'll answer both.</p>\n<h2>The intent is that other projects can extend this system</h2>\n<p>Think about <code>java.util.List</code>. Yes, this project (The <code>java.util</code> package as a project) ships with its own implementations of this interface, including <code>ArrayList</code> and <code>LinkedList</code>. However, that interface isn't designed to be limited: If you want to write your own list implementation in your own project you are free to do so, and <code>List</code> is <em>designed</em> to allow you to do this. Loads of projects use this: guava has <code>ImmutableList</code>, the java core libs itself has plenty of list implementations for example in the <code>java.util.concurrent</code> package, and so on.</p>\n<p><strong>if</strong> this describes your situation, then the answer is:</p>\n<p>No, do not make that factory. Just make your implementations public. Yes, this means someone could write:</p>\n<pre><code>FooImplA foo = new FooImplA();\n</code></pre>\n<p>and you don't want them to, but I will free you from such concerns by providing you with this pithy but highly effective zen koan: &quot;You can't stop an idiotfrom writing idiotic code; the universe is vastly smarter than you and will create a better idiot than you can write defenses to stop them&quot;.</p>\n<p>So, it is a pointless exercise, and this is freeing: There is no need to try. Make clear from the API, documentation, and examples how you're meant to do it. If someone is going to ignore all that and 'do it wrong', then let them.</p>\n<p>You'll then be setting the system up precisely the same way <code>j.u.List</code> is: You can write this today:</p>\n<pre><code>ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\n</code></pre>\n<p>It compiles just fine. One could say you should 'program to the interface' but as far as style problems go, this rates <em>very</em> lowly indeed. Mostly this doesn't matter. It's the final nit one would pick in a code review if truly nothing of any substance whatsoever is left to be said.</p>\n<h2>The intent is that you created all the implementations; the system isn't designed to be extended and you don't want anybody to try it.</h2>\n<p>In that case, you need to add a bunch of new language features to do this right:</p>\n<h4>Sealed</h4>\n<p>Java20 adds the notion of 'sealed interfaces'. A sealed interface (or class) lists every type that is allowed to implement/extend it, and no other types can do it. The aim is for you to list your own implementations and leave it at that. This means you can now <strong>enforce</strong> that nobody makes custom implementations.</p>\n<h4>static methods in interfaces</h4>\n<p>The problem with a 'factory' the way you have it, is that it hurts discoverability. I know about your interface type and I have a need to create an instance of it. Where do I look? Naturally, first I look <strong>in that interface</strong>, but I find no methods that can make anything. Next, I ask my IDE to show me a list of all types that implement it. My IDE gives me a bunch of private classes hidden deep inside your project that clearly I'm not meant to directly <code>new Impl()</code>, so now I'm stuck. I need to read docs (the horror. I kid, but only a little - if the average user of your library just intuits what to do based on nothing more than the names of your types and methods, that's far better than a system that confuses the heck out of me until I read the docs). Then maybe I see how to do it.</p>\n<p>In modern java you can shove static methods in interfaces. So, do that:</p>\n<pre><code>// Foo.java:\npublic sealed interface Foo permits FooImplA, FooImplB {\n  void doSomething();\n\n  public static Foo newImplA() {\n    return new FooImplA();\n  }\n\n  public static Foo newImplB() {\n    return new FooImplB();\n  }\n}\n\n// FooImplA.java:\nclass FooImplA implements Foo {\n // note how this is a package private class!\n ...\n\n  FooImplA() { ... } // with a package private constructor!\n}\n</code></pre>\n<p>This solves all problems:</p>\n<ul>\n<li>Nobody can make implementations of this other than you. You know exactly which subtypes exist, because you enumerated them and that's unchangable short of recompiling your project or hacking a JVM. (and then, of course, all bets are off. But, remember the universe making better idiots? Universe will do this, too. Nothing you can do to stop it, so don't bother trying).</li>\n<li>Discoverability is easy, obvious, and complete: Type <code>Foo.</code>, hit CTRL+SPACE or whatever the shortcut is, and voila there they are. The java community is used to static 'constructors' and knows to look for these when confused about how to make instances of some type. For that matter, so are IDEs and will auto-suggest these 'static constructors' too.</li>\n</ul>\n"}],"owner":{"account_id":9081097,"reputation":13,"user_id":6760921,"display_name":"Rob"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1691325519,"accepted_answer_id":76843708,"answer_count":1,"score":0,"last_activity_date":1691273517,"creation_date":1691271956,"question_id":76843656,"body_markdown":"I have an interface which is implemented by different classes. I want to make the implementation classes package private so that clients only use the interface, but of course they somehow need to create new instances. I was reading about factory patterns and at first thought Abstract Factory could be what I need, but I&#39;m struggling with the different constructor parameters of the implementation classes.\r\n\r\nExample:\r\n\r\n```java \r\npublic interface Foo {\r\n\r\n  void doSomething();\r\n\r\n}\r\n\r\nclass FooImplA implements Foo {\r\n  String prop1;\r\n  Integer prop2;\r\n\r\n  public FooImplA(String prop1,\r\n                  Integer prop2) {\r\n    this.prop1 = prop1;\r\n    this.prop2 = prop2;\r\n  }\r\n\r\n  @Override\r\n  public void doSomething() {\r\n\r\n  }\r\n}\r\n\r\nclass FooImplB implements Foo {\r\n  String prop1;\r\n\r\n  public FooImplB(String prop1) {\r\n    this.prop1 = prop1;\r\n  }\r\n\r\n  @Override\r\n  public void doSomething() {\r\n\r\n  }\r\n}\r\n```\r\n\r\nMy solution now would be something like this:\r\n\r\n```java \r\npublic class FooFactory {\r\n\r\n  public Foo createFooA(String prop1, Integer prop2) {\r\n    return new FooImplA(prop1, prop2);\r\n  }\r\n\r\n  public Foo createFooB(String prop1) {\r\n    return new FooImplB(prop1);\r\n  }\r\n\r\n}\r\n```\r\n\r\nIs this the &quot;right&quot; way to do it or are there better alternatives?","title":"Right pattern for creating concrete classes of an interface","body":"<p>I have an interface which is implemented by different classes. I want to make the implementation classes package private so that clients only use the interface, but of course they somehow need to create new instances. I was reading about factory patterns and at first thought Abstract Factory could be what I need, but I'm struggling with the different constructor parameters of the implementation classes.</p>\n<p>Example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Foo {\n\n  void doSomething();\n\n}\n\nclass FooImplA implements Foo {\n  String prop1;\n  Integer prop2;\n\n  public FooImplA(String prop1,\n                  Integer prop2) {\n    this.prop1 = prop1;\n    this.prop2 = prop2;\n  }\n\n  @Override\n  public void doSomething() {\n\n  }\n}\n\nclass FooImplB implements Foo {\n  String prop1;\n\n  public FooImplB(String prop1) {\n    this.prop1 = prop1;\n  }\n\n  @Override\n  public void doSomething() {\n\n  }\n}\n</code></pre>\n<p>My solution now would be something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class FooFactory {\n\n  public Foo createFooA(String prop1, Integer prop2) {\n    return new FooImplA(prop1, prop2);\n  }\n\n  public Foo createFooB(String prop1) {\n    return new FooImplB(prop1);\n  }\n\n}\n</code></pre>\n<p>Is this the &quot;right&quot; way to do it or are there better alternatives?</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1691273260,"creation_date":1686915763,"answer_id":76489829,"question_id":76488604,"body_markdown":"You need to disable csrf, by default in spring this one is active:\r\n\r\n    http\r\n\t\t// ...\r\n\t\t.csrf(csrf -&gt; csrf.disable()))\r\n\r\n     ","title":"Spring Boot 3.1.0: Spring Security is not allowing POST call","body":"<p>You need to disable csrf, by default in spring this one is active:</p>\n<pre><code>http\n    // ...\n    .csrf(csrf -&gt; csrf.disable()))\n\n \n</code></pre>\n"},{"tags":[],"owner":{"account_id":17869475,"reputation":19,"user_id":22089363,"display_name":"shawnliu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687494974,"creation_date":1687252887,"answer_id":76513216,"question_id":76488604,"body_markdown":"Please debug your `CsrfFilter.java` file in Spring-Security.\r\nIn the default case, Spring will check the `csrfToken` in the header during a POST request.\r\n\r\nIf you don&#39;t want to send the `csrfToken`, please make the CSRF filter disabled, just like @Andrei Lisa suggested.","title":"Spring Boot 3.1.0: Spring Security is not allowing POST call","body":"<p>Please debug your <code>CsrfFilter.java</code> file in Spring-Security.\nIn the default case, Spring will check the <code>csrfToken</code> in the header during a POST request.</p>\n<p>If you don't want to send the <code>csrfToken</code>, please make the CSRF filter disabled, just like @Andrei Lisa suggested.</p>\n"}],"owner":{"account_id":333191,"reputation":921,"user_id":658913,"accept_rate":25,"display_name":"CR Sardar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":500,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691273260,"creation_date":1686906191,"question_id":76488604,"body_markdown":"Trying to implement Spring security with \r\n\r\n    plugins {\r\n\t    id &#39;java&#39;\r\n\t    id &#39;org.springframework.boot&#39; version &#39;3.1.0&#39;\r\n\t    id &#39;io.spring.dependency-management&#39; version &#39;1.1.0&#39;\r\n    }\r\n\r\nhave dependency of \r\n\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-security&#39;\r\n\r\ncreated some test end point like - \r\n\r\n    @Slf4j\r\n    @RestController\r\n    @RequestMapping(&quot;/open&quot;)\r\n    public class OpenedController {\r\n\r\n        @GetMapping\r\n        public String secureHi() {\r\n            log.info(&quot;Hi, I am opened.&quot;);\r\n            return &quot;Hi, I am opened.&quot;;\r\n        }\r\n\r\n        @PostMapping\r\n        public String secureHPost(@RequestBody MyUser myUser) {\r\n            log.info(&quot;Hi, I am opened POST. myUser ={}&quot;, myUser);\r\n            return &quot;Hi, I am opened POST.&quot;;\r\n        }\r\n    }\r\n\r\nand my configuration file is as \r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfiguration {\r\n\r\n    @Bean\r\n    public UserDetailsService userDetailsService(PasswordEncoder passwordEncoder) {\r\n\r\n        UserDetails admin = User.withUsername(&quot;chitta&quot;)\r\n                .password(passwordEncoder.encode(&quot;chitta&quot;))\r\n                .roles(&quot;ADMIN&quot;)\r\n                .build();\r\n\r\n        UserDetails user = User.withUsername(&quot;aaa&quot;)\r\n                .password(passwordEncoder.encode(&quot;aa&quot;))\r\n                .roles(&quot;USER&quot;)\r\n                .build();\r\n        return new InMemoryUserDetailsManager(admin, user);\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n\r\n        http.authorizeHttpRequests(\r\n                (authorize) -&gt; authorize\r\n                        .dispatcherTypeMatchers(DispatcherType.FORWARD, DispatcherType.ERROR).permitAll()\r\n                        .requestMatchers(&quot;/open**&quot;).permitAll()\r\n                        .anyRequest().denyAll()\r\n        );\r\n\r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n    }\r\n\r\n\r\nwhen I am trying to access the **POST** method, I am getting\r\n\r\n    {\r\n    &quot;timestamp&quot;: &quot;2023-06-16T08:50:43.240+00:00&quot;,\r\n    &quot;status&quot;: 403,\r\n    &quot;error&quot;: &quot;Forbidden&quot;,\r\n    &quot;path&quot;: &quot;/open&quot;\r\n    }\r\n\r\nbut the **GET method is accessibly** and working fine.\r\nCould not find out - What I am missing?\r\n\r\nI also have tried with `.requestMatchers(HttpMethod.POST, &quot;/open**&quot;).permitAll()` but this is also not working\r\n\r\n ","title":"Spring Boot 3.1.0: Spring Security is not allowing POST call","body":"<p>Trying to implement Spring security with</p>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '3.1.0'\n    id 'io.spring.dependency-management' version '1.1.0'\n}\n</code></pre>\n<p>have dependency of</p>\n<pre><code>implementation 'org.springframework.boot:spring-boot-starter-web'\nimplementation 'org.springframework.boot:spring-boot-starter-security'\n</code></pre>\n<p>created some test end point like -</p>\n<pre><code>@Slf4j\n@RestController\n@RequestMapping(&quot;/open&quot;)\npublic class OpenedController {\n\n    @GetMapping\n    public String secureHi() {\n        log.info(&quot;Hi, I am opened.&quot;);\n        return &quot;Hi, I am opened.&quot;;\n    }\n\n    @PostMapping\n    public String secureHPost(@RequestBody MyUser myUser) {\n        log.info(&quot;Hi, I am opened POST. myUser ={}&quot;, myUser);\n        return &quot;Hi, I am opened POST.&quot;;\n    }\n}\n</code></pre>\n<p>and my configuration file is as</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfiguration {\n\n@Bean\npublic UserDetailsService userDetailsService(PasswordEncoder passwordEncoder) {\n\n    UserDetails admin = User.withUsername(&quot;chitta&quot;)\n            .password(passwordEncoder.encode(&quot;chitta&quot;))\n            .roles(&quot;ADMIN&quot;)\n            .build();\n\n    UserDetails user = User.withUsername(&quot;aaa&quot;)\n            .password(passwordEncoder.encode(&quot;aa&quot;))\n            .roles(&quot;USER&quot;)\n            .build();\n    return new InMemoryUserDetailsManager(admin, user);\n}\n\n@Bean\npublic SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n\n    http.authorizeHttpRequests(\n            (authorize) -&gt; authorize\n                    .dispatcherTypeMatchers(DispatcherType.FORWARD, DispatcherType.ERROR).permitAll()\n                    .requestMatchers(&quot;/open**&quot;).permitAll()\n                    .anyRequest().denyAll()\n    );\n\n    return http.build();\n}\n\n@Bean\npublic PasswordEncoder passwordEncoder() {\n\n    return new BCryptPasswordEncoder();\n}\n}\n</code></pre>\n<p>when I am trying to access the <strong>POST</strong> method, I am getting</p>\n<pre><code>{\n&quot;timestamp&quot;: &quot;2023-06-16T08:50:43.240+00:00&quot;,\n&quot;status&quot;: 403,\n&quot;error&quot;: &quot;Forbidden&quot;,\n&quot;path&quot;: &quot;/open&quot;\n}\n</code></pre>\n<p>but the <strong>GET method is accessibly</strong> and working fine.\nCould not find out - What I am missing?</p>\n<p>I also have tried with <code>.requestMatchers(HttpMethod.POST, &quot;/open**&quot;).permitAll()</code> but this is also not working</p>\n"},{"tags":["java","swing","jtextfield"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1691280078,"post_id":76843696,"comment_id":135470723,"body_markdown":"What behavior are you expecting?  If you really want to force every keystroke the user enters to be immediately disallowed if the resulting text would be an invalid value, you can do that with [setAllowsInvalid(false)](https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/text/DefaultFormatter.html#setAllowsInvalid(boolean)), but you really shouldn’t.  Doing so would prevent users from performing intermediate edits;  for example, I might want to type or paste `1.5`, then press the ‘←’ key twice and delete the `1`.  Don’t punish a user before they’re finished typing!","body":"What behavior are you expecting?  If you really want to force every keystroke the user enters to be immediately disallowed if the resulting text would be an invalid value, you can do that with <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/swing/text/DefaultFormatter.html#setAllowsInvalid(boolean)\" rel=\"nofollow noreferrer\">setAllowsInvalid(false)</a>, but you really shouldn’t.  Doing so would prevent users from performing intermediate edits;  for example, I might want to type or paste <code>1.5</code>, then press the ‘←’ key twice and delete the <code>1</code>.  Don’t punish a user before they’re finished typing!"},{"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"score":0,"creation_date":1691296258,"post_id":76843696,"comment_id":135471394,"body_markdown":"@VGR i have already setAllowsInvalid(false), but it looks like the field is ignorant to this property","body":"@VGR i have already setAllowsInvalid(false), but it looks like the field is ignorant to this property"},{"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"score":0,"creation_date":1691296401,"post_id":76843696,"comment_id":135471398,"body_markdown":"@VGR the only thing I want is to allow the text, matching the specific mask as the result. Which approach should be used for thst?","body":"@VGR the only thing I want is to allow the text, matching the specific mask as the result. Which approach should be used for thst?"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":2,"creation_date":1691297945,"post_id":76843696,"comment_id":135471462,"body_markdown":"I think you just need to use a [MaskFormatter](https://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html#maskformatter), as in: `JFormattedTextField ftf = new JFormattedTextField(new MaskFormatter(&quot;#.####&quot;));`","body":"I think you just need to use a <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html#maskformatter\" rel=\"nofollow noreferrer\">MaskFormatter</a>, as in: <code>JFormattedTextField ftf = new JFormattedTextField(new MaskFormatter(&quot;#.####&quot;));</code>"}],"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691272688,"creation_date":1691272688,"question_id":76843696,"body_markdown":"I have a Renderer class that extends `JFormattedTextField` \r\n\r\nIn its constructor I set up Formatter and FormatterFactory in order to pass the input format limitations, but still have ability to input characters of wrong format, not the restricted one\r\n\r\n    NumberFormat bigDecimalFormat = NumberFormat.getCurrencyInstance();\r\n        bigDecimalFormat.setMaximumIntegerDigits(1);\r\n        bigDecimalFormat.setMaximumFractionDigits(5);\r\n        bigDecimalFormat.setRoundingMode(RoundingMode.HALF_UP);\r\n        NumberFormatter numberFormatter = new NumberFormatter(bigDecimalFormat);\r\n        numberFormatter.setAllowsInvalid(false);\r\n        numberFormatter.setValueClass(BigDecimal.class);\r\n        numberFormatter.setMinimum(0.0);\r\n        numberFormatter.setMaximum(1.0);\r\n        //numberFormatter.setFormat(new DecimalFormat(&quot;#.####&quot;)); //tried to enable and disable it, but that doesn&#39;t help\r\n        this.setFormatter(numberFormatter);\r\n        this.setFormatterFactory(new DefaultFormatterFactory(numberFormatter));\r\n\r\nand it is still possible to enter a text like 11.111.111, thet it gots exception on converting that to `BigDecimal`\r\n\r\nIn all explanations setting Formatter is enough, however, they use to do it through the constructor parameter, not the setter like me. What is the working way, if I extend the `JFormattedTextField`  and need to set up the format in the constructor and want to limit the typed characters to the desired format only?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BzYJt.png","title":"Setting Formatter or FormatterFactory for JFormattedTextField still doesn&#39;t restrict the characters I type to the format I define","body":"<p>I have a Renderer class that extends <code>JFormattedTextField</code></p>\n<p>In its constructor I set up Formatter and FormatterFactory in order to pass the input format limitations, but still have ability to input characters of wrong format, not the restricted one</p>\n<pre><code>NumberFormat bigDecimalFormat = NumberFormat.getCurrencyInstance();\n    bigDecimalFormat.setMaximumIntegerDigits(1);\n    bigDecimalFormat.setMaximumFractionDigits(5);\n    bigDecimalFormat.setRoundingMode(RoundingMode.HALF_UP);\n    NumberFormatter numberFormatter = new NumberFormatter(bigDecimalFormat);\n    numberFormatter.setAllowsInvalid(false);\n    numberFormatter.setValueClass(BigDecimal.class);\n    numberFormatter.setMinimum(0.0);\n    numberFormatter.setMaximum(1.0);\n    //numberFormatter.setFormat(new DecimalFormat(&quot;#.####&quot;)); //tried to enable and disable it, but that doesn't help\n    this.setFormatter(numberFormatter);\n    this.setFormatterFactory(new DefaultFormatterFactory(numberFormatter));\n</code></pre>\n<p>and it is still possible to enter a text like 11.111.111, thet it gots exception on converting that to <code>BigDecimal</code></p>\n<p>In all explanations setting Formatter is enough, however, they use to do it through the constructor parameter, not the setter like me. What is the working way, if I extend the <code>JFormattedTextField</code>  and need to set up the format in the constructor and want to limit the typed characters to the desired format only?</p>\n<p><a href=\"https://i.stack.imgur.com/BzYJt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BzYJt.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","graphics","bufferedimage"],"comments":[{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":0,"creation_date":1691163922,"post_id":76837216,"comment_id":135459481,"body_markdown":"Something [like this](https://stackoverflow.com/a/221990/740553), or something else?","body":"Something <a href=\"https://stackoverflow.com/a/221990/740553\">like this</a>, or something else?"},{"owner":{"account_id":25998407,"reputation":13,"user_id":19709339,"display_name":"noen"},"score":0,"creation_date":1691164098,"post_id":76837216,"comment_id":135459507,"body_markdown":"right. Similar to filtering image color","body":"right. Similar to filtering image color"},{"owner":{"account_id":25998407,"reputation":13,"user_id":19709339,"display_name":"noen"},"score":0,"creation_date":1691164135,"post_id":76837216,"comment_id":135459516,"body_markdown":"But I&#39;m looking for a faster way than that.\nThis operation must be performed thousands or tens of thousands of times","body":"But I&#39;m looking for a faster way than that. This operation must be performed thousands or tens of thousands of times"},{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":1,"creation_date":1691164184,"post_id":76837216,"comment_id":135459528,"body_markdown":"...I don&#39;t mean that _question_, I mean the _answer_ I linked you to, which shows how to do this faster by extracting pixel ranges to run through much faster than if you&#39;re accessing one pixel at a time. (and there&#39;s nothing stopping  you from extracting the entire image instead of only `width` pixels at a time)","body":"...I don&#39;t mean that <i>question</i>, I mean the <i>answer</i> I linked you to, which shows how to do this faster by extracting pixel ranges to run through much faster than if you&#39;re accessing one pixel at a time. (and there&#39;s nothing stopping  you from extracting the entire image instead of only <code>width</code> pixels at a time)"},{"owner":{"account_id":25998407,"reputation":13,"user_id":19709339,"display_name":"noen"},"score":0,"creation_date":1691164775,"post_id":76837216,"comment_id":135459635,"body_markdown":"understand. Doing it that way will make it faster than usual, but it will still be slow. Is faster access possible using Graphics2D? Added setting that the second image is solid color.","body":"understand. Doing it that way will make it faster than usual, but it will still be slow. Is faster access possible using Graphics2D? Added setting that the second image is solid color."},{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":2,"creation_date":1691165409,"post_id":76837216,"comment_id":135459747,"body_markdown":"no, it won&#39;t be. Running through an array is _insanely_ fast, so implement it, benchmark it, and hold off on any &quot;it&#39;s not fast enough&quot; until you&#39;ve checked the timings yourself.","body":"no, it won&#39;t be. Running through an array is <i>insanely</i> fast, so implement it, benchmark it, and hold off on any &quot;it&#39;s not fast enough&quot; until you&#39;ve checked the timings yourself."},{"owner":{"account_id":25998407,"reputation":13,"user_id":19709339,"display_name":"noen"},"score":0,"creation_date":1691165621,"post_id":76837216,"comment_id":135459791,"body_markdown":"Thanks for the help, I&#39;ll try this","body":"Thanks for the help, I&#39;ll try this"},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":0,"creation_date":1691423347,"post_id":76837216,"comment_id":135486374,"body_markdown":"[`RescaleOp`](https://docs.oracle.com/javase/8/docs/api/java/awt/image/RescaleOp.html) with 3 scale factors and offset 0? Might use native code, but will effectively also just iterate over the pixel array and do the multiplications, so I would not expect huge differences. Cleaner/less code though. &#128512;","body":"<a href=\"https://docs.oracle.com/javase/8/docs/api/java/awt/image/RescaleOp.html\" rel=\"nofollow noreferrer\"><code>RescaleOp</code></a> with 3 scale factors and offset 0? Might use native code, but will effectively also just iterate over the pixel array and do the multiplications, so I would not expect huge differences. Cleaner/less code though. 😀"}],"owner":{"account_id":25998407,"reputation":13,"user_id":19709339,"display_name":"noen"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691272669,"creation_date":1691162092,"question_id":76837216,"body_markdown":"I would like to get the result of coloring the image. I&#39;m just trying to paint in a slightly different way than the fill color.\r\n\r\nMultiplies two different colors.\r\n\r\nThat is, given two colors, returns the multiplied value, and transparent color returns itself.\r\n\r\nThe code below fills the screen with the same color.\r\n\r\n```java\r\n public static BufferedImage color(BufferedImage image, Color color) {\r\n\r\n        Graphics2D g = image.createGraphics();\r\n        g.setPaint(color);\r\n        g.fillRect(0, 0, image.getWidth(), image.getHeight());\r\n        g.dispose();\r\n\r\n        return image;\r\n    }\r\n```\r\n\r\n\r\nIs there a fastest way to compute the operation below for every pixel?\r\n(&#39;c2&#39; variable is guaranteed to always be the same color for the same object)\r\nIf I simply repeated that, my program would be absurdly slow.\r\n\r\n```java\r\n public static BufferedImage color(Color c1, Color c2) {\r\n\r\n        return new Color(\r\n                         c1.getRed() * c2.getRed(),\r\n                         c1.getGreen() * c2.getGreen(),\r\n                         c1.getBlue() * c2.getBlue(),\r\n                         c1.getAlpha() * c2.getAlpha()\r\n        );\r\n    }\r\n```\r\n\r\nThe result I want is this:  \r\n\r\n![example](https://i.stack.imgur.com/oJR0S.png)","title":"Getting a colored PNG with BufferedImage","body":"<p>I would like to get the result of coloring the image. I'm just trying to paint in a slightly different way than the fill color.</p>\n<p>Multiplies two different colors.</p>\n<p>That is, given two colors, returns the multiplied value, and transparent color returns itself.</p>\n<p>The code below fills the screen with the same color.</p>\n<pre class=\"lang-java prettyprint-override\"><code> public static BufferedImage color(BufferedImage image, Color color) {\n\n        Graphics2D g = image.createGraphics();\n        g.setPaint(color);\n        g.fillRect(0, 0, image.getWidth(), image.getHeight());\n        g.dispose();\n\n        return image;\n    }\n</code></pre>\n<p>Is there a fastest way to compute the operation below for every pixel?\n('c2' variable is guaranteed to always be the same color for the same object)\nIf I simply repeated that, my program would be absurdly slow.</p>\n<pre class=\"lang-java prettyprint-override\"><code> public static BufferedImage color(Color c1, Color c2) {\n\n        return new Color(\n                         c1.getRed() * c2.getRed(),\n                         c1.getGreen() * c2.getGreen(),\n                         c1.getBlue() * c2.getBlue(),\n                         c1.getAlpha() * c2.getAlpha()\n        );\n    }\n</code></pre>\n<p>The result I want is this:</p>\n<p><img src=\"https://i.stack.imgur.com/oJR0S.png\" alt=\"example\" /></p>\n"},{"tags":["java","performance","swing","user-interface","actionlistener"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691249657,"post_id":76842324,"comment_id":135467986,"body_markdown":"This is more of a logical/strategic issue. You *could* make your main class a listener and simply add it to the controls. But you wouldn&#39;t want that to get to the point where `actionPerformed` became massive and unmaintainable/unreadable. Likewise, the opposite problem could pertain with multiple listeners, where later maintenance would be a matter of &#39;hunt the `ActionListener`&#39;. One thing I would advise against is using anonymous inner classes as they tend to produce ugly code and ugly binaries and can cause coding difficulties. You should also look at `AbstractAction` as a possibility","body":"This is more of a logical/strategic issue. You <i>could</i> make your main class a listener and simply add it to the controls. But you wouldn&#39;t want that to get to the point where <code>actionPerformed</code> became massive and unmaintainable/unreadable. Likewise, the opposite problem could pertain with multiple listeners, where later maintenance would be a matter of &#39;hunt the <code>ActionListener</code>&#39;. One thing I would advise against is using anonymous inner classes as they tend to produce ugly code and ugly binaries and can cause coding difficulties. You should also look at <code>AbstractAction</code> as a possibility"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1691249988,"post_id":76842324,"comment_id":135468024,"body_markdown":"Add a tag and mention of your Java GUI framework when posting here: JavaFX, Swing, SWT, Vaadin Flow, etc.","body":"Add a tag and mention of your Java GUI framework when posting here: JavaFX, Swing, SWT, Vaadin Flow, etc."}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691265174,"creation_date":1691265174,"answer_id":76843306,"question_id":76842324,"body_markdown":"In both your examples your `actionPerformed` method seems capable of handing events from multiple sources. In that case a single instance is absolutely sufficient.\r\n\r\nBut what would you do if `actionPerformed` needs to do different stuff for each and every UI component? Either it would get pretty complex of doing it all, or you have many different actionlisteners that do one job only.\r\n\r\nReusability in general is higher if you create many small listeners, so prefer that pattern whenever you can. But the criteria is not every button but every actionperformed implementation.","title":"declare more then one ActionListener","body":"<p>In both your examples your <code>actionPerformed</code> method seems capable of handing events from multiple sources. In that case a single instance is absolutely sufficient.</p>\n<p>But what would you do if <code>actionPerformed</code> needs to do different stuff for each and every UI component? Either it would get pretty complex of doing it all, or you have many different actionlisteners that do one job only.</p>\n<p>Reusability in general is higher if you create many small listeners, so prefer that pattern whenever you can. But the criteria is not every button but every actionperformed implementation.</p>\n"}],"owner":{"account_id":28886412,"reputation":11,"user_id":22124645,"display_name":"Bootfahrer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691272314,"creation_date":1691249236,"question_id":76842324,"body_markdown":"I&#39;m learning GUI programming with Java right now and I&#39;m trying to make my first owns Application. \r\n\r\nI use ActionListeners in them. My Question is if it is more effective to declare just one ActionListener and reference it all the time or if I should declare one for every Button, TextField, etc. I use?\r\n\r\n//pseudo code \r\n\r\neither:\r\n\r\n`myButton1.addActionListener(Main.getListener());`\r\n`myButton2.addActionListener(Main.getListener());`\r\n\r\nor:\r\n\r\n`myButton1.addActionListener(new MyListener());`\r\n\r\n`myButton2.addActionListener(new MyListener());`","title":"declare more then one ActionListener","body":"<p>I'm learning GUI programming with Java right now and I'm trying to make my first owns Application.</p>\n<p>I use ActionListeners in them. My Question is if it is more effective to declare just one ActionListener and reference it all the time or if I should declare one for every Button, TextField, etc. I use?</p>\n<p>//pseudo code</p>\n<p>either:</p>\n<p><code>myButton1.addActionListener(Main.getListener());</code>\n<code>myButton2.addActionListener(Main.getListener());</code></p>\n<p>or:</p>\n<p><code>myButton1.addActionListener(new MyListener());</code></p>\n<p><code>myButton2.addActionListener(new MyListener());</code></p>\n"},{"tags":["java","keystore","microsoft-key-storage-provider"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":1,"creation_date":1691182765,"post_id":76839037,"comment_id":135462726,"body_markdown":"Welcome to Stack Overflow.\nPlease take the [tour] to learn how Stack Overflow works and read [ask] on how to improve the quality of your question.\nIt is unclear what you are asking or what the problem is. You have not asked any question. Please [edit] your post to include a question you want to ask.","body":"Welcome to Stack Overflow. Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> to learn how Stack Overflow works and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> on how to improve the quality of your question. It is unclear what you are asking or what the problem is. You have not asked any question. Please <a href=\"https://stackoverflow.com/posts/76839037/edit\">edit</a> your post to include a question you want to ask."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1691198788,"post_id":76839037,"comment_id":135464066,"body_markdown":"That would be a security breach, which would make the resulting digital signature legally worthless. The idea is that the user has taken a positive step to sign the document. If the computer did it automatically, it&#39;s not the same thing.","body":"That would be a security breach, which would make the resulting digital signature legally worthless. The idea is that the user has taken a positive step to sign the document. If the computer did it automatically, it&#39;s not the same thing."}],"owner":{"account_id":16168076,"reputation":1,"user_id":11672552,"display_name":"Geraud Zannou"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691272296,"creation_date":1691182097,"question_id":76839037,"body_markdown":"I need to retrieve the list of certificates available in the windows keystore without the user having to enter his password in each certificate manager.\r\n\r\nA simple example: when you want to sign a PDF document with Adobe Reader, Adobe Reader first displays the list of certificates available in the keystore, the user chooses the certificate he wants to sign with, and then the certificate manager asks the user for his password.\r\n\r\n\r\n```\r\n keyStore = KeyStore.getInstance(&quot;Windows-MY&quot;, &quot;SunMSCAPI&quot;);\r\n keyStore.load(null, null);\r\n```\r\nThis is the code I wrote in Java to read the certificates available in the Windows keystore.\r\n\r\nRead the available certificates, and that it is when using a certificate that the certificate manager asks for the password.","title":"Read certificates available in Windows keystore without password","body":"<p>I need to retrieve the list of certificates available in the windows keystore without the user having to enter his password in each certificate manager.</p>\n<p>A simple example: when you want to sign a PDF document with Adobe Reader, Adobe Reader first displays the list of certificates available in the keystore, the user chooses the certificate he wants to sign with, and then the certificate manager asks the user for his password.</p>\n<pre><code> keyStore = KeyStore.getInstance(&quot;Windows-MY&quot;, &quot;SunMSCAPI&quot;);\n keyStore.load(null, null);\n</code></pre>\n<p>This is the code I wrote in Java to read the certificates available in the Windows keystore.</p>\n<p>Read the available certificates, and that it is when using a certificate that the certificate manager asks for the password.</p>\n"},{"tags":["java","constructor","factory","java-record","static-factory"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":0,"creation_date":1691269559,"post_id":76843519,"comment_id":135469966,"body_markdown":"The constructor is part of the interface of an record. Removing it would break all kinds of deserialization frameworks that expect a public canonical constructor.","body":"The constructor is part of the interface of an record. Removing it would break all kinds of deserialization frameworks that expect a public canonical constructor."}],"answers":[{"tags":[],"owner":{"account_id":116746,"reputation":12467,"user_id":306030,"accept_rate":70,"display_name":"forty-two"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691270813,"creation_date":1691270813,"answer_id":76843591,"question_id":76843519,"body_markdown":"&gt; How to hide the *implicit* constructor of a record if the compiler\r\n&gt; forbids marking it as private?\r\n\r\nI would argue that the canonical constructor of a record is very *explicit* (but that may be semantics). The record specification makes it clear that the canonical constructor is public. Changing that would go against the record&#39;s reason to exist.\r\n\r\nYou can achieve what you want with a regular class.","title":"How to hide constructor on a Java record that offers a public static factory method?","body":"<blockquote>\n<p>How to hide the <em>implicit</em> constructor of a record if the compiler\nforbids marking it as private?</p>\n</blockquote>\n<p>I would argue that the canonical constructor of a record is very <em>explicit</em> (but that may be semantics). The record specification makes it clear that the canonical constructor is public. Changing that would go against the record's reason to exist.</p>\n<p>You can achieve what you want with a regular class.</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1691271828,"creation_date":1691271828,"answer_id":76843646,"question_id":76843519,"body_markdown":"This is essentially impossible, in the sense that this just isn&#39;t how records work. You _may_ be able to hack it together but that is very much not what records were meant to do, and as a consequence, if you do, the code will be confusing, the API will need considerable extra documentation to explain it doesn&#39;t work the way you think it does, and future lang features will probably make your API instantly obsoleted (it feels out of date and works even more weirdly now).\r\n\r\n## The essential nature of records\r\n\r\nRecords are designed to be deconstructable and reconstructable, and to support these features intrinsically, as in, without the need to write any code to enable any of this. Records just &#39;get all that stuff&#39;, for free, but at a cost: They are inherently defined by their &#39;parts&#39;. This has all sorts of effects - they cannot extend anything (Because that would mean they are defined by a combination of their parts and the parts their supertype declares, that&#39;s more complex than is intended), and the parts are treated as final, and you can&#39;t make it act like somehow it isn&#39;t actually just a thing that groups together its parts, which is the problem with your code.\r\n\r\nLet&#39;s make that &#39;if you try to do it, future language features will ruin your day&#39; aspect of it and focus on deconstruction and the `with` concept.\r\n\r\nYes, this mostly isn&#39;t part of java __yet__, but the record feature is specifically designed to be expanded to encompass deconstruction and all the features that it brings, and work is far along. Specifically, Brian Goetz, who is in charge of this feature and various features that expand on a more holistic idea (records is merely a small part of that idea), really loves this stuff and has repeatedly written about it. Including quite complete feature proposals.\r\n\r\nSpecifically, for records, you are soon going to be able to write this (note, as is usual with OpenJDK feature proposals, don&#39;t focus on the syntax or about concerns such as &#39;.. but, does that mean &#39;with&#39; is now a keyword?&#39; - actual syntax is the very last thing that is fleshed out.\r\n\r\n```\r\nDatePair dp = ....;\r\n\r\nDatePair newDp = dp with {\r\n  days = 20;\r\n}\r\n```\r\n\r\nThe concept of a &#39;deconstruction&#39; is the same as a constructor, but in reverse: Take an object and break it apart into its constituent parts. For records, this is obvious, and in fact (and this is the key, why you can&#39;t do what you want in this way), __baked in__ - records deconstruct by way of the elements you listed for the record (so, here, `start`, `end`, and `days`) and you probably won&#39;t be able to change this.\r\n\r\nThe `obj with {block;}` operation is syntax sugar for:\r\n\r\n* Deconstruct `obj`.\r\n* For each item that the deconstruction has produced, declare a local variable.\r\n* Run `block`. The local vars are available, and aren&#39;t final - change whatever you want.\r\n* Construct a new object of the same type as `obj`, using those local vars to pass to its constructor.\r\n\r\nYour idea can only work if the deconstructor deconstructs solely into `LocalDate start` and `LocalDate end`, leaving `long days` out of it entirely. It would require records to be able to state: Actually, _this_ is my constructor, with different arguments from the record&#39;s component list, and once you open the door to writing your own constructor, you therefore then also __have to__ write your own deconstructor.\r\n\r\nThe thing is, there is no syntax for deconstructors right now. Thus, if records did allow you to write your own constructor (with a different list of params than the record components), that means that if in the future a language feature is released such as `with`, that requires a deconstructor, that some records can&#39;t support it. That&#39;s annoying to the java lang team: They&#39;d love to say: &quot;We introduced `with`, which works with all records already! In the future once we release the deconstructor feature it should also be usable for classes that have a deconstructor&quot;.\r\n\r\nThat is to say, while I can&#39;t say I 100% know exactly what Brian and the OpenJDK team is thinking, I&#39;d be _incredibly_ surprised if they aren&#39;t thinking like the above.\r\n\r\nThe point of the above dive into OpenJDK&#39;s plans for near-future java is to explain that [A] why you can&#39;t make your own constructor in records, and [B] why there won&#39;t be a language feature coming along that will, unless it is part of a set of very significant updates (including deconstructor syntax, and that won&#39;t happen unless there are features that use it).\r\n\r\n## Good news!\r\n\r\nFortunately, there are very simple alternate strategies you can use here.\r\n\r\nThis seems to be the best fit for your needs, usable in today&#39;s java:\r\n\r\n```\r\npublic record DatePair(LocalDate start, LocalDate end) {\r\n  public long days() {\r\n    return ChronoUnit.DAYS.between(start, end);\r\n  }\r\n}\r\n```\r\n\r\n\r\nThis removes `days` from being treated as a component part of DatePair, but then, _that is the point_ - components in records fundamentally can be changed independently of the other parts of it (possibly you can add code that then says the new state is invalid, but now you force folks to set `start` and `days` both simultaneously, you can&#39;t &#39;calculate it out&#39;, which seems like API so bad you wouldn&#39;t want such a thing).\r\n\r\nIt also suffers from the notion that days is now calculated every time instead of being &#39;cached&#39;. You can solve that by writing your own cache e.g. with guava cachebuilder but that&#39;s quite a big bazooka to kill a mosquito. If this truly is the calculation you need, it&#39;s relatively cheap, I&#39;d just write it like this and not worry about performance unless you are holding a profiler report that says this days calculation is the key culprit.\r\n\r\nIf this still isn&#39;t acceptable, then the thing you want just isn&#39;t what `record` represents. You might as well ask how you represent arbitrary strings with an `enum`. You just cannot do that - that is not what enums are about. Hence, you end up at:\r\n\r\n```\r\nimport lombok.*;\r\n\r\n@Value\r\n@lombok.experimental.Accessors(fluent = true)\r\npublic class DatePair {\r\n  @With private final LocalDate start, end;\r\n  @With private final long days;\r\n\r\n  public DatePair(LocalDate start, LocalDate end) {\r\n    this.start = start;\r\n    this.end = end;\r\n    this.days = ChronoUnit.DAYS.between(start, end);\r\n  }\r\n}\r\n```\r\n\r\nI _strongly_ recommend you don&#39;t add the accessors line (this turns `getStart()` into just `start()`. Records notwithstanding, `get` is just better (it plays far better with auto-complete which is ubiquitous in java editor environments, and is more common. In fact, the java core libs themselves do it &#39;right&#39; and use `get`, see e.g. `java.time.LocalDate`). But, if you really really want it - that&#39;s how you do it. Or add a `lombok.config` file and say there that you want fluent style accessor names.\r\n\r\nOr let your IDE generate it all, which will be a ton of code you&#39;ll have to maintain. I understand the &#39;draw&#39; of using records here, but records can&#39;t do lots of things. They can&#39;t extend anything either. They can&#39;t memoize calculated stuff by way of a field either.","title":"How to hide constructor on a Java record that offers a public static factory method?","body":"<p>This is essentially impossible, in the sense that this just isn't how records work. You <em>may</em> be able to hack it together but that is very much not what records were meant to do, and as a consequence, if you do, the code will be confusing, the API will need considerable extra documentation to explain it doesn't work the way you think it does, and future lang features will probably make your API instantly obsoleted (it feels out of date and works even more weirdly now).</p>\n<h2>The essential nature of records</h2>\n<p>Records are designed to be deconstructable and reconstructable, and to support these features intrinsically, as in, without the need to write any code to enable any of this. Records just 'get all that stuff', for free, but at a cost: They are inherently defined by their 'parts'. This has all sorts of effects - they cannot extend anything (Because that would mean they are defined by a combination of their parts and the parts their supertype declares, that's more complex than is intended), and the parts are treated as final, and you can't make it act like somehow it isn't actually just a thing that groups together its parts, which is the problem with your code.</p>\n<p>Let's make that 'if you try to do it, future language features will ruin your day' aspect of it and focus on deconstruction and the <code>with</code> concept.</p>\n<p>Yes, this mostly isn't part of java <strong>yet</strong>, but the record feature is specifically designed to be expanded to encompass deconstruction and all the features that it brings, and work is far along. Specifically, Brian Goetz, who is in charge of this feature and various features that expand on a more holistic idea (records is merely a small part of that idea), really loves this stuff and has repeatedly written about it. Including quite complete feature proposals.</p>\n<p>Specifically, for records, you are soon going to be able to write this (note, as is usual with OpenJDK feature proposals, don't focus on the syntax or about concerns such as '.. but, does that mean 'with' is now a keyword?' - actual syntax is the very last thing that is fleshed out.</p>\n<pre><code>DatePair dp = ....;\n\nDatePair newDp = dp with {\n  days = 20;\n}\n</code></pre>\n<p>The concept of a 'deconstruction' is the same as a constructor, but in reverse: Take an object and break it apart into its constituent parts. For records, this is obvious, and in fact (and this is the key, why you can't do what you want in this way), <strong>baked in</strong> - records deconstruct by way of the elements you listed for the record (so, here, <code>start</code>, <code>end</code>, and <code>days</code>) and you probably won't be able to change this.</p>\n<p>The <code>obj with {block;}</code> operation is syntax sugar for:</p>\n<ul>\n<li>Deconstruct <code>obj</code>.</li>\n<li>For each item that the deconstruction has produced, declare a local variable.</li>\n<li>Run <code>block</code>. The local vars are available, and aren't final - change whatever you want.</li>\n<li>Construct a new object of the same type as <code>obj</code>, using those local vars to pass to its constructor.</li>\n</ul>\n<p>Your idea can only work if the deconstructor deconstructs solely into <code>LocalDate start</code> and <code>LocalDate end</code>, leaving <code>long days</code> out of it entirely. It would require records to be able to state: Actually, <em>this</em> is my constructor, with different arguments from the record's component list, and once you open the door to writing your own constructor, you therefore then also <strong>have to</strong> write your own deconstructor.</p>\n<p>The thing is, there is no syntax for deconstructors right now. Thus, if records did allow you to write your own constructor (with a different list of params than the record components), that means that if in the future a language feature is released such as <code>with</code>, that requires a deconstructor, that some records can't support it. That's annoying to the java lang team: They'd love to say: &quot;We introduced <code>with</code>, which works with all records already! In the future once we release the deconstructor feature it should also be usable for classes that have a deconstructor&quot;.</p>\n<p>That is to say, while I can't say I 100% know exactly what Brian and the OpenJDK team is thinking, I'd be <em>incredibly</em> surprised if they aren't thinking like the above.</p>\n<p>The point of the above dive into OpenJDK's plans for near-future java is to explain that [A] why you can't make your own constructor in records, and [B] why there won't be a language feature coming along that will, unless it is part of a set of very significant updates (including deconstructor syntax, and that won't happen unless there are features that use it).</p>\n<h2>Good news!</h2>\n<p>Fortunately, there are very simple alternate strategies you can use here.</p>\n<p>This seems to be the best fit for your needs, usable in today's java:</p>\n<pre><code>public record DatePair(LocalDate start, LocalDate end) {\n  public long days() {\n    return ChronoUnit.DAYS.between(start, end);\n  }\n}\n</code></pre>\n<p>This removes <code>days</code> from being treated as a component part of DatePair, but then, <em>that is the point</em> - components in records fundamentally can be changed independently of the other parts of it (possibly you can add code that then says the new state is invalid, but now you force folks to set <code>start</code> and <code>days</code> both simultaneously, you can't 'calculate it out', which seems like API so bad you wouldn't want such a thing).</p>\n<p>It also suffers from the notion that days is now calculated every time instead of being 'cached'. You can solve that by writing your own cache e.g. with guava cachebuilder but that's quite a big bazooka to kill a mosquito. If this truly is the calculation you need, it's relatively cheap, I'd just write it like this and not worry about performance unless you are holding a profiler report that says this days calculation is the key culprit.</p>\n<p>If this still isn't acceptable, then the thing you want just isn't what <code>record</code> represents. You might as well ask how you represent arbitrary strings with an <code>enum</code>. You just cannot do that - that is not what enums are about. Hence, you end up at:</p>\n<pre><code>import lombok.*;\n\n@Value\n@lombok.experimental.Accessors(fluent = true)\npublic class DatePair {\n  @With private final LocalDate start, end;\n  @With private final long days;\n\n  public DatePair(LocalDate start, LocalDate end) {\n    this.start = start;\n    this.end = end;\n    this.days = ChronoUnit.DAYS.between(start, end);\n  }\n}\n</code></pre>\n<p>I <em>strongly</em> recommend you don't add the accessors line (this turns <code>getStart()</code> into just <code>start()</code>. Records notwithstanding, <code>get</code> is just better (it plays far better with auto-complete which is ubiquitous in java editor environments, and is more common. In fact, the java core libs themselves do it 'right' and use <code>get</code>, see e.g. <code>java.time.LocalDate</code>). But, if you really really want it - that's how you do it. Or add a <code>lombok.config</code> file and say there that you want fluent style accessor names.</p>\n<p>Or let your IDE generate it all, which will be a ton of code you'll have to maintain. I understand the 'draw' of using records here, but records can't do lots of things. They can't extend anything either. They can't memoize calculated stuff by way of a field either.</p>\n"},{"tags":[],"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691271848,"creation_date":1691271848,"answer_id":76843647,"question_id":76843519,"body_markdown":"The JLS specifies in [8.10.4. Record Constructor Declarations](https://docs.oracle.com/javase/specs/jls/se20/html/jls-8.html#jls-8.10.4) that the canonical constructor must have at least the visibility as the record itself:\r\n\r\n&gt; Either way, an explicitly declared canonical constructor must provide at least as much access as the record class, as follows:\r\n&gt;\r\n&gt; * If the record class is public, then the canonical constructor must be public; otherwise, a compile-time error occurs.\r\n&gt;\r\n&gt; * If the record class is protected, then the canonical constructor must be protected or public; otherwise, a compile-time error occurs.\r\n&gt;\r\n&gt; * If the record class has package access, then the canonical constructor must not be private; otherwise, a compile-time error occurs.\r\n&gt; * If the record class is private, then the canonical constructor may be declared with any accessibility.\r\n\r\nOtherwise you cannot deserialize the record, as indicated in [8.10. Record Classes](https://docs.oracle.com/javase/specs/jls/se20/html/jls-8.html#jls-8.10):\r\n\r\n&gt; The serialization mechanism treats instances of a record class differently than ordinary serializable or externalizable objects. In particular, a record object is deserialized using the canonical constructor (&#167;8.10.4).\r\n\r\nWould be difficult for the serialization mechanism to deserialize such a (visible) class, if it can&#39;t call the canonical constructor to initialize the fields. However, you can set the &quot;correct&quot; `days` field in the canonical constructor, ignoring the `days` parameter coming into the constructor:\r\n\r\n    public record DatePair( LocalDate start , LocalDate end , long days )\r\n    {\r\n        public DatePair ( LocalDate start , LocalDate end , long days )\r\n        {\r\n            this.start = start;\r\n            this.end = end;\r\n            this.days = ChronoUnit.DAYS.between ( start , end );\r\n        }\r\n    \r\n        public static DatePair of ( LocalDate start , LocalDate end )\r\n        {\r\n            return new DatePair ( start , end , ChronoUnit.DAYS.between ( start , end ) ) ;\r\n        }\r\n    }\r\n\r\nSee example on https://www.jdoodle.com/iembed/v0/KEU. You can keep the static `DatePair.of()` method for convenience.","title":"How to hide constructor on a Java record that offers a public static factory method?","body":"<p>The JLS specifies in <a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-8.html#jls-8.10.4\" rel=\"nofollow noreferrer\">8.10.4. Record Constructor Declarations</a> that the canonical constructor must have at least the visibility as the record itself:</p>\n<blockquote>\n<p>Either way, an explicitly declared canonical constructor must provide at least as much access as the record class, as follows:</p>\n<ul>\n<li><p>If the record class is public, then the canonical constructor must be public; otherwise, a compile-time error occurs.</p>\n</li>\n<li><p>If the record class is protected, then the canonical constructor must be protected or public; otherwise, a compile-time error occurs.</p>\n</li>\n<li><p>If the record class has package access, then the canonical constructor must not be private; otherwise, a compile-time error occurs.</p>\n</li>\n<li><p>If the record class is private, then the canonical constructor may be declared with any accessibility.</p>\n</li>\n</ul>\n</blockquote>\n<p>Otherwise you cannot deserialize the record, as indicated in <a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-8.html#jls-8.10\" rel=\"nofollow noreferrer\">8.10. Record Classes</a>:</p>\n<blockquote>\n<p>The serialization mechanism treats instances of a record class differently than ordinary serializable or externalizable objects. In particular, a record object is deserialized using the canonical constructor (§8.10.4).</p>\n</blockquote>\n<p>Would be difficult for the serialization mechanism to deserialize such a (visible) class, if it can't call the canonical constructor to initialize the fields. However, you can set the &quot;correct&quot; <code>days</code> field in the canonical constructor, ignoring the <code>days</code> parameter coming into the constructor:</p>\n<pre><code>public record DatePair( LocalDate start , LocalDate end , long days )\n{\n    public DatePair ( LocalDate start , LocalDate end , long days )\n    {\n        this.start = start;\n        this.end = end;\n        this.days = ChronoUnit.DAYS.between ( start , end );\n    }\n\n    public static DatePair of ( LocalDate start , LocalDate end )\n    {\n        return new DatePair ( start , end , ChronoUnit.DAYS.between ( start , end ) ) ;\n    }\n}\n</code></pre>\n<p>See example on <a href=\"https://www.jdoodle.com/iembed/v0/KEU\" rel=\"nofollow noreferrer\">https://www.jdoodle.com/iembed/v0/KEU</a>. You can keep the static <code>DatePair.of()</code> method for convenience.</p>\n"}],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":572,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":76843646,"answer_count":3,"score":3,"last_activity_date":1691271848,"creation_date":1691269324,"question_id":76843519,"body_markdown":"I have this simple [record][1] in Java:\r\n\r\n    public record DatePair( LocalDate start , LocalDate end , long days ) {}\r\n\r\nI want all three properties (`start`, `end`, &amp; `days`) to be available publicly for reading, but I want the third property (`days`) to be automatically calculated rather than passed-in during instantiation. \r\n\r\nSo I add a static factory method:\r\n\r\n```java\r\npublic record DatePair( LocalDate start , LocalDate end , long days )\r\n{\r\n    public static DatePair of ( LocalDate start , LocalDate end )\r\n    {\r\n        return new DatePair ( start , end , ChronoUnit.DAYS.between ( start , end ) ) ;\r\n    }\r\n}\r\n```\r\n\r\nI want *only* this static factory method to be used for instantiation. I want to hide the constructor. Therefore, I explicitly write the implicit constructor, and mark it `private`. \r\n\r\n```java\r\npublic record DatePair( LocalDate start , LocalDate end , long days )\r\n{\r\n    private DatePair ( LocalDate start , LocalDate end , long days )  // &lt;---- ERROR: Canonical constructor access level cannot be more restrictive than the record access level (&#39;public&#39;)\r\n    {\r\n        this.start = start;\r\n        this.end = end;\r\n        this.days = days;\r\n    }\r\n\r\n    public static DatePair of ( LocalDate start , LocalDate end )\r\n    {\r\n        return new DatePair ( start , end , ChronoUnit.DAYS.between ( start , end ) ) ;\r\n    }\r\n}\r\n```\r\n\r\nBut marking that contractor as `private` causes a compiler error:\r\n\r\n&gt;java: invalid canonical constructor in record DatePair (attempting to assign stronger access privileges; was public)\r\n\r\n&#128073;&#127996; How to hide the implicit constructor of a record if the compiler forbids marking it as `private`?\r\n\r\n\r\n  [1]: https://openjdk.org/jeps/395","title":"How to hide constructor on a Java record that offers a public static factory method?","body":"<p>I have this simple <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">record</a> in Java:</p>\n<pre><code>public record DatePair( LocalDate start , LocalDate end , long days ) {}\n</code></pre>\n<p>I want all three properties (<code>start</code>, <code>end</code>, &amp; <code>days</code>) to be available publicly for reading, but I want the third property (<code>days</code>) to be automatically calculated rather than passed-in during instantiation.</p>\n<p>So I add a static factory method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public record DatePair( LocalDate start , LocalDate end , long days )\n{\n    public static DatePair of ( LocalDate start , LocalDate end )\n    {\n        return new DatePair ( start , end , ChronoUnit.DAYS.between ( start , end ) ) ;\n    }\n}\n</code></pre>\n<p>I want <em>only</em> this static factory method to be used for instantiation. I want to hide the constructor. Therefore, I explicitly write the implicit constructor, and mark it <code>private</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public record DatePair( LocalDate start , LocalDate end , long days )\n{\n    private DatePair ( LocalDate start , LocalDate end , long days )  // &lt;---- ERROR: Canonical constructor access level cannot be more restrictive than the record access level ('public')\n    {\n        this.start = start;\n        this.end = end;\n        this.days = days;\n    }\n\n    public static DatePair of ( LocalDate start , LocalDate end )\n    {\n        return new DatePair ( start , end , ChronoUnit.DAYS.between ( start , end ) ) ;\n    }\n}\n</code></pre>\n<p>But marking that contractor as <code>private</code> causes a compiler error:</p>\n<blockquote>\n<p>java: invalid canonical constructor in record DatePair (attempting to assign stronger access privileges; was public)</p>\n</blockquote>\n<p>👉🏼 How to hide the implicit constructor of a record if the compiler forbids marking it as <code>private</code>?</p>\n"},{"tags":["java","android","offline"],"comments":[{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":0,"creation_date":1691259213,"post_id":76842930,"comment_id":135468980,"body_markdown":"The event will happen, yes, like here https://stackoverflow.com/questions/14376470/scheduling-recurring-task-in-android, but if it is offline it won&#39;t get any response. Probably you should rephrase and detail your question.","body":"The event will happen, yes, like here <a href=\"https://stackoverflow.com/questions/14376470/scheduling-recurring-task-in-android\" title=\"scheduling recurring task in android\">stackoverflow.com/questions/14376470/&hellip;</a>, but if it is offline it won&#39;t get any response. Probably you should rephrase and detail your question."}],"answers":[{"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691259064,"creation_date":1691259064,"answer_id":76842947,"question_id":76842930,"body_markdown":"You don&#39;t, unless the API itself has a schedule functionality.  If the device is offline, you can&#39;t send an HTTP request.  Now if you want to schedule it for later and either don&#39;t care when it happens (just have it happen the next time you do have internet access), you can use JobScheduler to schedule a job in the future that will make the API call.  Or if you want to do it at a specific time, you can use JobScheduler for that as well and just hope the device is online then (with an optional try again later if it isn&#39;t).\r\n","title":"Can you run an event for API offline?","body":"<p>You don't, unless the API itself has a schedule functionality.  If the device is offline, you can't send an HTTP request.  Now if you want to schedule it for later and either don't care when it happens (just have it happen the next time you do have internet access), you can use JobScheduler to schedule a job in the future that will make the API call.  Or if you want to do it at a specific time, you can use JobScheduler for that as well and just hope the device is online then (with an optional try again later if it isn't).</p>\n"}],"owner":{"account_id":29167312,"reputation":11,"user_id":22344580,"display_name":"Jokhyt"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1691294028,"answer_count":1,"score":-2,"last_activity_date":1691270645,"creation_date":1691258778,"question_id":76842930,"body_markdown":"How can I let my Android application code schedule an event to an API so that the event happens even if the Android phone is offline? I want the app to be free of charge and don&#39;t want to integrate cloud.\r\n\r\nI didn&#39;t try anything. ","title":"Can you run an event for API offline?","body":"<p>How can I let my Android application code schedule an event to an API so that the event happens even if the Android phone is offline? I want the app to be free of charge and don't want to integrate cloud.</p>\n<p>I didn't try anything.</p>\n"},{"tags":["java","spring","hibernate","jpa"],"comments":[{"owner":{"account_id":180181,"reputation":76380,"user_id":413337,"accept_rate":64,"display_name":"Codo"},"score":0,"creation_date":1690910168,"post_id":76813689,"comment_id":135417737,"body_markdown":"Hibernate easily gets confused if the JDBC URL is not valid. Check to make sure it actually works.","body":"Hibernate easily gets confused if the JDBC URL is not valid. Check to make sure it actually works."},{"owner":{"account_id":2660360,"reputation":89,"user_id":2300212,"accept_rate":60,"display_name":"loulou"},"score":0,"creation_date":1690910736,"post_id":76813689,"comment_id":135417843,"body_markdown":"Yes, I confirmed it worked by passing the connection details using annotations like what had been done with the hibernate.dialect, like so, @Value(&quot;${hibernate.connection.url}&quot;). But, when I pass the dataSource bean into the entityManagerFactory bean, shouldn&#39;t that have been taken care of? I feel like that&#39;s not the right way if I pass them all using annotations. I could be wrong though","body":"Yes, I confirmed it worked by passing the connection details using annotations like what had been done with the hibernate.dialect, like so, @Value(&quot;${hibernate.connection.url}&quot;). But, when I pass the dataSource bean into the entityManagerFactory bean, shouldn&#39;t that have been taken care of? I feel like that&#39;s not the right way if I pass them all using annotations. I could be wrong though"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1690961591,"post_id":76813689,"comment_id":135424060,"body_markdown":"The `SchemaCreator` is quite a frankenstein. You aren&#39;t using the `EntityManagerFactory` in your `SchemaCreator` but are recreating the inernals of it (the `ServiceRegistry`) which doesn&#39;t know anything about the internals. Re-use the existing `EntityManagerFactory` instead of recreating it.","body":"The <code>SchemaCreator</code> is quite a frankenstein. You aren&#39;t using the <code>EntityManagerFactory</code> in your <code>SchemaCreator</code> but are recreating the inernals of it (the <code>ServiceRegistry</code>) which doesn&#39;t know anything about the internals. Re-use the existing <code>EntityManagerFactory</code> instead of recreating it."}],"answers":[{"tags":[],"owner":{"account_id":2660360,"reputation":89,"user_id":2300212,"accept_rate":60,"display_name":"loulou"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691269333,"creation_date":1690914362,"answer_id":76814314,"question_id":76813689,"body_markdown":"So I am not sure why this wasn&#39;t necessary before, but I had a database.properties file and a hibernate.properties file. \r\n\r\nThe database.properties had the connection details, but the hibernate.properties file did not. I added the connection details to hibernate.properties and I don&#39;t get the errors anymore. \r\n\r\nI&#39;m not certain if there was a change in Hibernate 5 that by default it checks for a hibernate.properties file. Yet, in my baseContext.xml  I set the location of the database properties file. \r\n```\r\n&lt;value&gt;classpath:datasource.properties&lt;/value&gt;\r\n```\r\n\r\nDoes this make sense? Is this something about hibernate 5? \r\n\r\nIf anyone can validate my assumption, I&#39;d love to hear it because I feel empty thinking that was the fix.","title":"Spring 4 + Hibernate 5 + JPA + c3p0: dataSource not being recognized","body":"<p>So I am not sure why this wasn't necessary before, but I had a database.properties file and a hibernate.properties file.</p>\n<p>The database.properties had the connection details, but the hibernate.properties file did not. I added the connection details to hibernate.properties and I don't get the errors anymore.</p>\n<p>I'm not certain if there was a change in Hibernate 5 that by default it checks for a hibernate.properties file. Yet, in my baseContext.xml  I set the location of the database properties file.</p>\n<pre><code>&lt;value&gt;classpath:datasource.properties&lt;/value&gt;\n</code></pre>\n<p>Does this make sense? Is this something about hibernate 5?</p>\n<p>If anyone can validate my assumption, I'd love to hear it because I feel empty thinking that was the fix.</p>\n"}],"owner":{"account_id":2660360,"reputation":89,"user_id":2300212,"accept_rate":60,"display_name":"loulou"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691269333,"creation_date":1690908119,"question_id":76813689,"body_markdown":"I&#39;m attempting to upgrade an existing application (not mine) to use Hibernate 5, JPA, c3P0, and Spring 4. The issue that I&#39;m having is in the SchemaCreator class, it&#39;s not picking up the hibernate connection details from the dataSource bean (uses c3p0). \r\n\r\nHowever, in the existing code it&#39;s explicitly passing the dialect through annotations, which I&#39;m wondering if that&#39;s needed. I admit I&#39;m a bit rusty and reading the tutorials doesn&#39;t look like the existing code I&#39;m trying to maintain (oss). This is my first step towards slowly upgrading to Spring 5 ultimately. \r\n\r\nHere is what I&#39;m dealing with....\r\n\r\n \r\npom.xml versions:\r\n```\r\n  &lt;spring.version&gt;4.3.30.RELEASE&lt;/spring.version&gt;\r\n  &lt;c3p0.version&gt;0.9.5.5&lt;/c3p0.version&gt;\r\n  &lt;hibernate.version&gt;5.6.4.Final&lt;/hibernate.version&gt;\r\n  &lt;hibernate-jpa-api.version&gt;1.0.0.Final&lt;/hibernate-jpa-api.version&gt;\r\n  &lt;hsqldb.version&gt;2.7.0&lt;/hsqldb.version&gt;\r\n\r\n  ....\r\n            &lt;dependency&gt;\r\n              &lt;groupId&gt;com.mchange&lt;/groupId&gt;\r\n              &lt;artifactId&gt;c3p0&lt;/artifactId&gt;\r\n              &lt;version&gt;${c3p0.version}&lt;/version&gt;\r\n           &lt;/dependency&gt;\r\n           &lt;dependency&gt;\r\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n                &lt;version&gt;${hibernate.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\r\n                &lt;version&gt;${hibernate.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hibernate-jpamodelgen&lt;/artifactId&gt;\r\n                &lt;version&gt;${hibernate.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hibernate-jpa-2.1-api&lt;/artifactId&gt;\r\n                &lt;version&gt;${hibernate-jpa-api.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hibernate-ehcache&lt;/artifactId&gt;\r\n                &lt;version&gt;${hibernate.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hibernate-tools&lt;/artifactId&gt;\r\n                &lt;version&gt;${hibernate.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hibernate-c3p0&lt;/artifactId&gt;\r\n                &lt;version&gt;${hibernate.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n  ...\r\n```\r\n\r\nbaseContext.xml looks like...\r\n\r\n```\r\n&lt;bean id=&quot;propertyConfigurer&quot; class=&quot;org.springframework.context.support.PortalPropertySourcesPlaceholderConfigurer&quot;&gt;\r\n        &lt;property name=&quot;locations&quot;&gt;\r\n            &lt;list&gt;\r\n                &lt;value&gt;classpath:datasource.properties&lt;/value&gt;\r\n                &lt;value&gt;classpath:configuration.properties&lt;/value&gt;\r\n                &lt;value&gt;file:${portal.home}/global.properties&lt;/value&gt;\r\n                &lt;value&gt;file:${portal.home}/simple-cms.properties&lt;/value&gt;\r\n            &lt;/list&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n    \r\n   &lt;bean id=&quot;propertyResolver&quot; factory-bean=&quot;propertyConfigurer&quot; factory-method=&quot;getPropertyResolver&quot;/&gt;\r\n\r\n    &lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot; destroy-method=&quot;close&quot;\r\n          p:driverClass=&quot;${hibernate.connection.driver_class}&quot;\r\n          p:jdbcUrl=&quot;${hibernate.connection.url}&quot;\r\n          p:user=&quot;${hibernate.connection.username}&quot;\r\n          p:password=&quot;${hibernate.connection.password}&quot;&gt;\r\n\r\n        &lt;property name=&quot;acquireIncrement&quot; value=&quot;1&quot;/&gt;\r\n        &lt;property name=&quot;minPoolSize&quot; value=&quot;1&quot;/&gt;\r\n        &lt;property name=&quot;initialPoolSize&quot; value=&quot;1&quot;/&gt;\r\n        &lt;property name=&quot;maxPoolSize&quot; value=&quot;5&quot;/&gt;\r\n        &lt;property name=&quot;maxIdleTime&quot; value=&quot;900&quot;/&gt;\r\n        &lt;property name=&quot;testConnectionOnCheckout&quot; value=&quot;true&quot;/&gt;\r\n        &lt;property name=&quot;contextClassLoaderSource&quot; value=&quot;library&quot;/&gt;\r\n        &lt;property name=&quot;privilegeSpawnedThreads&quot; value=&quot;true&quot;/&gt;\r\n        &lt;!-- End of c3p0 properties --&gt;\r\n    &lt;/bean&gt;\r\n\r\n    &lt;bean id=&quot;entityManagerFactory&quot; class=&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;&gt;\r\n        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;\r\n        &lt;property name=&quot;jpaVendorAdapter&quot;&gt;\r\n\t      &lt;bean class=&quot;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter&quot; /&gt;\r\n\t    &lt;/property&gt;\r\n\t    &lt;property name=&quot;jpaProperties&quot;&gt;\r\n\t      &lt;props&gt;\r\n\t        &lt;prop key=&quot;hibernate.dialect&quot;&gt;${hibernate.dialect}&lt;/prop&gt;\r\n\t      &lt;/props&gt;\r\n\t    &lt;/property&gt;\r\n        &lt;property name=&quot;persistenceUnitName&quot; value=&quot;AttachmentsDb&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\r\n\r\n    &lt;bean class=&quot;org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor&quot;/&gt;\r\n\r\n    &lt;bean class=&quot;org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor&quot; /&gt;\r\n\r\n    &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.orm.jpa.JpaTransactionManager&quot;&gt;\r\n        &lt;property name=&quot;entityManagerFactory&quot; ref=&quot;entityManagerFactory&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\r\n    &lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot; proxy-target-class=&quot;true&quot;/&gt;\r\n\r\n    &lt;bean id=&quot;schemaCreator&quot; class=&quot;org.jasig.portlet.attachment.util.SchemaCreator&quot; /&gt;\r\n...\r\n```\r\n\r\nThen I have the SchemaCreator class where I had to do some adjustments once switching to Hibernate 5. The original code has an annotation of the hibernate dialect, and if I add the connection details in the same way, I don&#39;t receive errors. \r\n\r\nHowever, shouldn&#39;t the dataSource bean be available since I&#39;ve included it in the **entityManagerFactory** bean? \r\n\r\nIt seems to be getting left out. Most of the examples I see use sessionFactory, but this one isn&#39;t, it&#39;s also using the **Connection** class, which I&#39;m wondering if that&#39;s still needed when using JPA. \r\n\r\nThe errors that I&#39;m getting now is that it can&#39;t find an available JDBC driver. \r\n\r\nCaused by: java.sql.SQLException: No suitable driver\r\n\r\n```\r\npublic class SchemaCreator implements ApplicationContextAware {\r\n\r\n    private static final String APPLICATION_CONTEXT_LOCATION = &quot;classpath:/context/baseContext.xml&quot;;\r\n\r\n    private static final String DATA_SOURCE_BEAN_NAME = &quot;dataSource&quot;;\r\n\r\n    private ApplicationContext applicationContext;\r\n\r\n    private final Logger logger = LoggerFactory.getLogger(getClass());\r\n\r\n    &lt;!-- Should I pass the other hibernate connection details like this?--&gt;\r\n    @Value(&quot;${hibernate.dialect}&quot;)\r\n    private String hibernateDialect;\r\n    \r\n    public static void main(String[] args) {\r\n\r\n        // Bootstrap an ApplicationContext...\r\n        final GenericApplicationContext context = new GenericApplicationContext();\r\n        final XmlBeanDefinitionReader reader = new XmlBeanDefinitionReader(context);\r\n\r\n        final Resource resource = context.getResource(APPLICATION_CONTEXT_LOCATION);\r\n        reader.loadBeanDefinitions(resource);\r\n\r\n        context.refresh();\r\n        context.registerShutdownHook(); // close this context on JVM shutdown unless it has already been closed.\r\n\r\n        final SchemaCreator schemaCreator = context.getBean(&quot;schemaCreator&quot;, SchemaCreator.class);\r\n        System.exit(schemaCreator.create());\r\n    }\r\n\r\n    @Override\r\n    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {\r\n        this.applicationContext = applicationContext;\r\n    }\r\n\r\n    private int create() {\r\n           \r\n        final DataSource dataSource = applicationContext.getBean(DATA_SOURCE_BEAN_NAME, DataSource.class);\r\n\r\n        try (final Connection conn = dataSource.getConnection()) { \r\n\t        Map&lt;String, String&gt; settings = new HashMap&lt;&gt;();\r\n\t        settings.put(&quot;generateDdl&quot;, &quot;false&quot;);\r\n\t        settings.put(&quot;hibernate.dialect&quot;,hibernateDialect);\r\n\r\n            ServiceRegistry serviceRegistry = new StandardServiceRegistryBuilder().applySettings(settings).build();\r\n            MetadataSources metadata = new MetadataSources(serviceRegistry);\r\n            metadata.addAnnotatedClass(Attachment.class);\r\n\r\n            EnumSet&lt;TargetType&gt; enumSet = EnumSet.of(TargetType.DATABASE);\r\n            SchemaExport schemaExport = new SchemaExport();\r\n            schemaExport.execute(enumSet, SchemaExport.Action.BOTH, metadata.buildMetadata());\t\r\n\r\n            final List&lt;Exception&gt; exceptions = schemaExport.getExceptions();\r\n            if (exceptions.size() != 0) {\r\n                logger.error(&quot;Schema Create Failed;  see below for details&quot;);\r\n                for (Exception e : exceptions) {\r\n                    logger.error(&quot;Exception from Hibernate Tools SchemaExport&quot;, e);\r\n                }\r\n                return 1;\r\n            }\r\n\t    } catch (SQLException sqle) {\r\n            logger.error(&quot;Failed to initialize &amp; invoke the SchemaExport tool&quot;, sqle);\r\n            return 1;\r\n        }\r\n\r\n        return 0;\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nThanks for any assistance. I feel like I&#39;m putting together Frankenstein right now and it&#39;s frustrating :)\r\n\r\n-L","title":"Spring 4 + Hibernate 5 + JPA + c3p0: dataSource not being recognized","body":"<p>I'm attempting to upgrade an existing application (not mine) to use Hibernate 5, JPA, c3P0, and Spring 4. The issue that I'm having is in the SchemaCreator class, it's not picking up the hibernate connection details from the dataSource bean (uses c3p0).</p>\n<p>However, in the existing code it's explicitly passing the dialect through annotations, which I'm wondering if that's needed. I admit I'm a bit rusty and reading the tutorials doesn't look like the existing code I'm trying to maintain (oss). This is my first step towards slowly upgrading to Spring 5 ultimately.</p>\n<p>Here is what I'm dealing with....</p>\n<p>pom.xml versions:</p>\n<pre><code>  &lt;spring.version&gt;4.3.30.RELEASE&lt;/spring.version&gt;\n  &lt;c3p0.version&gt;0.9.5.5&lt;/c3p0.version&gt;\n  &lt;hibernate.version&gt;5.6.4.Final&lt;/hibernate.version&gt;\n  &lt;hibernate-jpa-api.version&gt;1.0.0.Final&lt;/hibernate-jpa-api.version&gt;\n  &lt;hsqldb.version&gt;2.7.0&lt;/hsqldb.version&gt;\n\n  ....\n            &lt;dependency&gt;\n              &lt;groupId&gt;com.mchange&lt;/groupId&gt;\n              &lt;artifactId&gt;c3p0&lt;/artifactId&gt;\n              &lt;version&gt;${c3p0.version}&lt;/version&gt;\n           &lt;/dependency&gt;\n           &lt;dependency&gt;\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n                &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n                &lt;version&gt;${hibernate.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n                &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n                &lt;version&gt;${hibernate.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n                &lt;artifactId&gt;hibernate-jpamodelgen&lt;/artifactId&gt;\n                &lt;version&gt;${hibernate.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\n                &lt;artifactId&gt;hibernate-jpa-2.1-api&lt;/artifactId&gt;\n                &lt;version&gt;${hibernate-jpa-api.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n                &lt;artifactId&gt;hibernate-ehcache&lt;/artifactId&gt;\n                &lt;version&gt;${hibernate.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n                &lt;artifactId&gt;hibernate-tools&lt;/artifactId&gt;\n                &lt;version&gt;${hibernate.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n                &lt;artifactId&gt;hibernate-c3p0&lt;/artifactId&gt;\n                &lt;version&gt;${hibernate.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n  ...\n</code></pre>\n<p>baseContext.xml looks like...</p>\n<pre><code>&lt;bean id=&quot;propertyConfigurer&quot; class=&quot;org.springframework.context.support.PortalPropertySourcesPlaceholderConfigurer&quot;&gt;\n        &lt;property name=&quot;locations&quot;&gt;\n            &lt;list&gt;\n                &lt;value&gt;classpath:datasource.properties&lt;/value&gt;\n                &lt;value&gt;classpath:configuration.properties&lt;/value&gt;\n                &lt;value&gt;file:${portal.home}/global.properties&lt;/value&gt;\n                &lt;value&gt;file:${portal.home}/simple-cms.properties&lt;/value&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n    \n   &lt;bean id=&quot;propertyResolver&quot; factory-bean=&quot;propertyConfigurer&quot; factory-method=&quot;getPropertyResolver&quot;/&gt;\n\n    &lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot; destroy-method=&quot;close&quot;\n          p:driverClass=&quot;${hibernate.connection.driver_class}&quot;\n          p:jdbcUrl=&quot;${hibernate.connection.url}&quot;\n          p:user=&quot;${hibernate.connection.username}&quot;\n          p:password=&quot;${hibernate.connection.password}&quot;&gt;\n\n        &lt;property name=&quot;acquireIncrement&quot; value=&quot;1&quot;/&gt;\n        &lt;property name=&quot;minPoolSize&quot; value=&quot;1&quot;/&gt;\n        &lt;property name=&quot;initialPoolSize&quot; value=&quot;1&quot;/&gt;\n        &lt;property name=&quot;maxPoolSize&quot; value=&quot;5&quot;/&gt;\n        &lt;property name=&quot;maxIdleTime&quot; value=&quot;900&quot;/&gt;\n        &lt;property name=&quot;testConnectionOnCheckout&quot; value=&quot;true&quot;/&gt;\n        &lt;property name=&quot;contextClassLoaderSource&quot; value=&quot;library&quot;/&gt;\n        &lt;property name=&quot;privilegeSpawnedThreads&quot; value=&quot;true&quot;/&gt;\n        &lt;!-- End of c3p0 properties --&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=&quot;entityManagerFactory&quot; class=&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;&gt;\n        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;\n        &lt;property name=&quot;jpaVendorAdapter&quot;&gt;\n          &lt;bean class=&quot;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter&quot; /&gt;\n        &lt;/property&gt;\n        &lt;property name=&quot;jpaProperties&quot;&gt;\n          &lt;props&gt;\n            &lt;prop key=&quot;hibernate.dialect&quot;&gt;${hibernate.dialect}&lt;/prop&gt;\n          &lt;/props&gt;\n        &lt;/property&gt;\n        &lt;property name=&quot;persistenceUnitName&quot; value=&quot;AttachmentsDb&quot; /&gt;\n    &lt;/bean&gt;\n\n\n    &lt;bean class=&quot;org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor&quot;/&gt;\n\n    &lt;bean class=&quot;org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor&quot; /&gt;\n\n    &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.orm.jpa.JpaTransactionManager&quot;&gt;\n        &lt;property name=&quot;entityManagerFactory&quot; ref=&quot;entityManagerFactory&quot; /&gt;\n    &lt;/bean&gt;\n\n    &lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot; proxy-target-class=&quot;true&quot;/&gt;\n\n    &lt;bean id=&quot;schemaCreator&quot; class=&quot;org.jasig.portlet.attachment.util.SchemaCreator&quot; /&gt;\n...\n</code></pre>\n<p>Then I have the SchemaCreator class where I had to do some adjustments once switching to Hibernate 5. The original code has an annotation of the hibernate dialect, and if I add the connection details in the same way, I don't receive errors.</p>\n<p>However, shouldn't the dataSource bean be available since I've included it in the <strong>entityManagerFactory</strong> bean?</p>\n<p>It seems to be getting left out. Most of the examples I see use sessionFactory, but this one isn't, it's also using the <strong>Connection</strong> class, which I'm wondering if that's still needed when using JPA.</p>\n<p>The errors that I'm getting now is that it can't find an available JDBC driver.</p>\n<p>Caused by: java.sql.SQLException: No suitable driver</p>\n<pre><code>public class SchemaCreator implements ApplicationContextAware {\n\n    private static final String APPLICATION_CONTEXT_LOCATION = &quot;classpath:/context/baseContext.xml&quot;;\n\n    private static final String DATA_SOURCE_BEAN_NAME = &quot;dataSource&quot;;\n\n    private ApplicationContext applicationContext;\n\n    private final Logger logger = LoggerFactory.getLogger(getClass());\n\n    &lt;!-- Should I pass the other hibernate connection details like this?--&gt;\n    @Value(&quot;${hibernate.dialect}&quot;)\n    private String hibernateDialect;\n    \n    public static void main(String[] args) {\n\n        // Bootstrap an ApplicationContext...\n        final GenericApplicationContext context = new GenericApplicationContext();\n        final XmlBeanDefinitionReader reader = new XmlBeanDefinitionReader(context);\n\n        final Resource resource = context.getResource(APPLICATION_CONTEXT_LOCATION);\n        reader.loadBeanDefinitions(resource);\n\n        context.refresh();\n        context.registerShutdownHook(); // close this context on JVM shutdown unless it has already been closed.\n\n        final SchemaCreator schemaCreator = context.getBean(&quot;schemaCreator&quot;, SchemaCreator.class);\n        System.exit(schemaCreator.create());\n    }\n\n    @Override\n    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {\n        this.applicationContext = applicationContext;\n    }\n\n    private int create() {\n           \n        final DataSource dataSource = applicationContext.getBean(DATA_SOURCE_BEAN_NAME, DataSource.class);\n\n        try (final Connection conn = dataSource.getConnection()) { \n            Map&lt;String, String&gt; settings = new HashMap&lt;&gt;();\n            settings.put(&quot;generateDdl&quot;, &quot;false&quot;);\n            settings.put(&quot;hibernate.dialect&quot;,hibernateDialect);\n\n            ServiceRegistry serviceRegistry = new StandardServiceRegistryBuilder().applySettings(settings).build();\n            MetadataSources metadata = new MetadataSources(serviceRegistry);\n            metadata.addAnnotatedClass(Attachment.class);\n\n            EnumSet&lt;TargetType&gt; enumSet = EnumSet.of(TargetType.DATABASE);\n            SchemaExport schemaExport = new SchemaExport();\n            schemaExport.execute(enumSet, SchemaExport.Action.BOTH, metadata.buildMetadata());  \n\n            final List&lt;Exception&gt; exceptions = schemaExport.getExceptions();\n            if (exceptions.size() != 0) {\n                logger.error(&quot;Schema Create Failed;  see below for details&quot;);\n                for (Exception e : exceptions) {\n                    logger.error(&quot;Exception from Hibernate Tools SchemaExport&quot;, e);\n                }\n                return 1;\n            }\n        } catch (SQLException sqle) {\n            logger.error(&quot;Failed to initialize &amp; invoke the SchemaExport tool&quot;, sqle);\n            return 1;\n        }\n\n        return 0;\n    }\n\n}\n\n</code></pre>\n<p>Thanks for any assistance. I feel like I'm putting together Frankenstein right now and it's frustrating :)</p>\n<p>-L</p>\n"},{"tags":["java","json","mongodb","jackson","morphia"],"answers":[{"tags":[],"owner":{"account_id":2919557,"reputation":7343,"user_id":2502126,"accept_rate":20,"display_name":"Buzz Moschetti"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691245834,"creation_date":1691156832,"answer_id":76836546,"question_id":76836099,"body_markdown":"The data at `http://ddragon.leagueoflegends.com/cdn/13.15.1/data/en_US/champion.json` is a single JSON object with a single key `data`.  `data` is an object with approx 164 subfields, each of which appears to be the name of a champion. There are no arrays; you must iterate over the `data` field.\r\n\r\n If the goal is to insert this data into MongoDB, then I recommend making each champion a separate document.  The subfields carry a lot of identifying information like `name`,`key`, and `id` so let&#39;s keep that and let MongoDB client side driver invent the `_id`.\r\n\r\nThe OQ code attempts to take `image` and store it as a list.  `image` from the JSON is not a list; it is an object (a substructure).  In the code below, we will copy over the whole `image` object into the Document to be inserted.\r\n\r\n```java\r\n// The OQ code to fetch the JSON is directionally correct.   It results in \r\n// the JSON string being stored in variable `data` and sort of trapped in\r\n// the thread but the approach is fine.  The details of organizing the\r\n// code to schedule and fetch the data are not relevant to the question.\r\n\r\nObjectMapper mapper = new ObjectMapper(); \r\n\r\n//  OP has JSON string somewhere in the mix of @championsData; not sure\r\n//  how it is wired together but the goal is the same: to parse the\r\n//  JSON into a Java Map object using mapper.  As a proxy, we show\r\n//  readValue() from a file here:\r\nMap&lt;String,Object&gt; content = mapper.readValue(new File(fileName), Map.class);\r\n\r\nString host = &quot;mongodb://your_connection_uri&quot;;\r\nMongoClient client = MongoClients.create(host);\r\nMongoDatabase db = client.getDatabase(&quot;testX&quot;);\r\nMongoCollection&lt;Document&gt; coll = db.getCollection(&quot;foo&quot;, Document.class);\r\n\r\njava.util.Map data = (java.util.Map) content.get(&quot;data&quot;);\r\n      \r\ndata.forEach(\r\n             (key, value)\r\n             -&gt; {\r\n                 //  Use this to deep copy all fields for each champion:             \r\n                 //Document dd = new Document((Map)value);                           \r\n\r\n                 // .. or this to only pick up select items:                         \r\n                 Document dd = new Document();\r\n                 Map m = (Map)value;\r\n                 for(String k2 : new String[]{&quot;name&quot;,&quot;blurb&quot;,&quot;title&quot;,&quot;image&quot;}) {\r\n                     dd.put(k2, m.get(k2));\r\n                 }\r\n                 coll.insertOne(dd);\r\n             });\r\n```\r\n","title":"How to convert JSON of JSONs to array of JSONs in Java?","body":"<p>The data at <code>http://ddragon.leagueoflegends.com/cdn/13.15.1/data/en_US/champion.json</code> is a single JSON object with a single key <code>data</code>.  <code>data</code> is an object with approx 164 subfields, each of which appears to be the name of a champion. There are no arrays; you must iterate over the <code>data</code> field.</p>\n<p>If the goal is to insert this data into MongoDB, then I recommend making each champion a separate document.  The subfields carry a lot of identifying information like <code>name</code>,<code>key</code>, and <code>id</code> so let's keep that and let MongoDB client side driver invent the <code>_id</code>.</p>\n<p>The OQ code attempts to take <code>image</code> and store it as a list.  <code>image</code> from the JSON is not a list; it is an object (a substructure).  In the code below, we will copy over the whole <code>image</code> object into the Document to be inserted.</p>\n<pre class=\"lang-java prettyprint-override\"><code>// The OQ code to fetch the JSON is directionally correct.   It results in \n// the JSON string being stored in variable `data` and sort of trapped in\n// the thread but the approach is fine.  The details of organizing the\n// code to schedule and fetch the data are not relevant to the question.\n\nObjectMapper mapper = new ObjectMapper(); \n\n//  OP has JSON string somewhere in the mix of @championsData; not sure\n//  how it is wired together but the goal is the same: to parse the\n//  JSON into a Java Map object using mapper.  As a proxy, we show\n//  readValue() from a file here:\nMap&lt;String,Object&gt; content = mapper.readValue(new File(fileName), Map.class);\n\nString host = &quot;mongodb://your_connection_uri&quot;;\nMongoClient client = MongoClients.create(host);\nMongoDatabase db = client.getDatabase(&quot;testX&quot;);\nMongoCollection&lt;Document&gt; coll = db.getCollection(&quot;foo&quot;, Document.class);\n\njava.util.Map data = (java.util.Map) content.get(&quot;data&quot;);\n      \ndata.forEach(\n             (key, value)\n             -&gt; {\n                 //  Use this to deep copy all fields for each champion:             \n                 //Document dd = new Document((Map)value);                           \n\n                 // .. or this to only pick up select items:                         \n                 Document dd = new Document();\n                 Map m = (Map)value;\n                 for(String k2 : new String[]{&quot;name&quot;,&quot;blurb&quot;,&quot;title&quot;,&quot;image&quot;}) {\n                     dd.put(k2, m.get(k2));\n                 }\n                 coll.insertOne(dd);\n             });\n</code></pre>\n"}],"owner":{"account_id":16250244,"reputation":87,"user_id":11734394,"display_name":"Jhonathan Mizrahi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76836546,"answer_count":1,"score":1,"last_activity_date":1691268489,"creation_date":1691153573,"question_id":76836099,"body_markdown":"I&#39;ve been running into some issues on a personal project of mine.\r\nI fetch the data field from the url: http://ddragon.leagueoflegends.com/cdn/13.15.1/data/en_US/champion.json with the following code:\r\n\r\n```\r\nimport DataHandlers.ChampionsJson;\r\n\r\nimport java.net.URI;\r\nimport java.net.http.HttpClient;\r\nimport java.net.http.HttpRequest;\r\nimport java.util.concurrent.ExecutionException;\r\n\r\n\r\npublic class ChampionsDataScheduler extends Thread{\r\n    @Override\r\n    public void run(){\r\n        while(true){\r\n\r\n            try {\r\n                var client = HttpClient.newHttpClient();\r\n\r\n                var request = HttpRequest.newBuilder(\r\n                                URI.create(&quot;http://ddragon.leagueoflegends.com/cdn/13.15.1/data/en_US/champion.json&quot;))\r\n                        .header(&quot;accept&quot;, &quot;application/json&quot;)\r\n                        .build();\r\n\r\n                var responseFuture = client.sendAsync(request, new JsonBodyHandler&lt;&gt;(ChampionsJson.class));\r\n                var response = responseFuture.get();\r\n                var data = response.body().get().championsData;\r\n\r\n                System.out.println(data);\r\n                Thread.sleep(1000);\r\n\r\n            } catch (InterruptedException | ExecutionException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n\r\n\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nUsing this class:\r\n```\r\npackage DataHandlers;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\r\nimport com.fasterxml.jackson.annotation.JsonProperty;\r\nimport com.fasterxml.jackson.databind.JsonNode;\r\n\r\nimport java.util.List;\r\n\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\npublic class ChampionsJson {\r\n    public final JsonNode championsData;\r\n\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public ChampionsJson(@JsonProperty(&quot;data&quot;) JsonNode championsData) {\r\n        this.championsData = championsData;\r\n    }\r\n}\r\n```\r\n\r\nI&#39;m trying to inject each champion (each value in the received json) to the following object and create an array of it: \r\n```\r\npackage DataHandlers;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\r\nimport com.fasterxml.jackson.annotation.JsonProperty;\r\n\r\nimport java.util.List;\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\npublic class ChampionsData {\r\n    public final String id;\r\n    public final String name;\r\n    public final String blurb;\r\n    public final List image;\r\n    public final String title;\r\n\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public ChampionsData(@JsonProperty(&quot;id&quot;) String id,\r\n                @JsonProperty(&quot;name&quot;) String name,\r\n                @JsonProperty(&quot;blurb&quot;) String blurb,\r\n                @JsonProperty(&quot;image&quot;) List image,\r\n                @JsonProperty(&quot;title&quot;) String title) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.title = title;\r\n        this.blurb = blurb;\r\n        this.image = image;\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\nbut I fail to do so because I get the JSON as a string of JSONs, and I haven&#39;t figured out a way to parse it correctly.\r\nAny idea how to do that? Is there maybe a better way to do so?\r\n\r\n\r\nIf you want to get more context on it, my final goal is to convert the ChampionsData object array to a morphia object array and insert it into Mongo.","title":"How to convert JSON of JSONs to array of JSONs in Java?","body":"<p>I've been running into some issues on a personal project of mine.\nI fetch the data field from the url: <a href=\"http://ddragon.leagueoflegends.com/cdn/13.15.1/data/en_US/champion.json\" rel=\"nofollow noreferrer\">http://ddragon.leagueoflegends.com/cdn/13.15.1/data/en_US/champion.json</a> with the following code:</p>\n<pre><code>import DataHandlers.ChampionsJson;\n\nimport java.net.URI;\nimport java.net.http.HttpClient;\nimport java.net.http.HttpRequest;\nimport java.util.concurrent.ExecutionException;\n\n\npublic class ChampionsDataScheduler extends Thread{\n    @Override\n    public void run(){\n        while(true){\n\n            try {\n                var client = HttpClient.newHttpClient();\n\n                var request = HttpRequest.newBuilder(\n                                URI.create(&quot;http://ddragon.leagueoflegends.com/cdn/13.15.1/data/en_US/champion.json&quot;))\n                        .header(&quot;accept&quot;, &quot;application/json&quot;)\n                        .build();\n\n                var responseFuture = client.sendAsync(request, new JsonBodyHandler&lt;&gt;(ChampionsJson.class));\n                var response = responseFuture.get();\n                var data = response.body().get().championsData;\n\n                System.out.println(data);\n                Thread.sleep(1000);\n\n            } catch (InterruptedException | ExecutionException e) {\n                throw new RuntimeException(e);\n            }\n\n\n        }\n    }\n}\n\n</code></pre>\n<p>Using this class:</p>\n<pre><code>package DataHandlers;\n\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\nimport com.fasterxml.jackson.annotation.JsonProperty;\nimport com.fasterxml.jackson.databind.JsonNode;\n\nimport java.util.List;\n\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class ChampionsJson {\n    public final JsonNode championsData;\n\n    @JsonIgnoreProperties(ignoreUnknown = true)\n    public ChampionsJson(@JsonProperty(&quot;data&quot;) JsonNode championsData) {\n        this.championsData = championsData;\n    }\n}\n</code></pre>\n<p>I'm trying to inject each champion (each value in the received json) to the following object and create an array of it:</p>\n<pre><code>package DataHandlers;\n\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\nimport com.fasterxml.jackson.annotation.JsonProperty;\n\nimport java.util.List;\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class ChampionsData {\n    public final String id;\n    public final String name;\n    public final String blurb;\n    public final List image;\n    public final String title;\n\n    @JsonIgnoreProperties(ignoreUnknown = true)\n    public ChampionsData(@JsonProperty(&quot;id&quot;) String id,\n                @JsonProperty(&quot;name&quot;) String name,\n                @JsonProperty(&quot;blurb&quot;) String blurb,\n                @JsonProperty(&quot;image&quot;) List image,\n                @JsonProperty(&quot;title&quot;) String title) {\n        this.id = id;\n        this.name = name;\n        this.title = title;\n        this.blurb = blurb;\n        this.image = image;\n    }\n\n\n}\n</code></pre>\n<p>but I fail to do so because I get the JSON as a string of JSONs, and I haven't figured out a way to parse it correctly.\nAny idea how to do that? Is there maybe a better way to do so?</p>\n<p>If you want to get more context on it, my final goal is to convert the ChampionsData object array to a morphia object array and insert it into Mongo.</p>\n"},{"tags":["java","spring-boot","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1685984874,"post_id":76408066,"comment_id":134734343,"body_markdown":"by upgrading to spring security 6","body":"by upgrading to spring security 6"},{"owner":{"account_id":28721222,"reputation":51,"user_id":21994955,"display_name":"jack nik"},"score":0,"creation_date":1685985279,"post_id":76408066,"comment_id":134734417,"body_markdown":"sorry I ment 6. Already using it.","body":"sorry I ment 6. Already using it."},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1685985773,"post_id":76408066,"comment_id":134734508,"body_markdown":"then i suggest you read the official documentation on how to implement whatever it is you are going to implement and stop following outdated blogs which im guessing you are doing.","body":"then i suggest you read the official documentation on how to implement whatever it is you are going to implement and stop following outdated blogs which im guessing you are doing."}],"owner":{"account_id":28721222,"reputation":51,"user_id":21994955,"display_name":"jack nik"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":196,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691268331,"creation_date":1685980016,"question_id":76408066,"body_markdown":"I am working on the below spring security conf but the security filter chain is full of deprecated methods. What is the way to correctly decompose it and use not deprecated methods?\r\n\r\n\r\n    @Configuration\r\n\tpublic class SecurityConfig {\r\n\r\n\t\t@Bean\r\n\t\tpublic PasswordEncoder encoder() {\r\n\t\t\treturn new BCryptPasswordEncoder();\r\n\t\t}\r\n\r\n\t\t@Bean\r\n\t\tpublic AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration)\r\n\t\t\t\tthrows Exception {\r\n\t\t\treturn authenticationConfiguration.getAuthenticationManager();\r\n\t\t}\r\n\r\n\t\t@Bean\r\n\t\tpublic SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n\t\t\treturn http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n\t\t\t\t\t.authorizeHttpRequests().requestMatchers(&quot;/v1/**&quot;, &quot;/v2/**&quot;, &quot;/swagger-ui/**&quot;, &quot;/api-docs/**&quot;)\r\n\t\t\t\t\t.permitAll().requestMatchers(&quot;/v3/polls/**&quot;).authenticated().and().httpBasic()\r\n\t\t\t\t\t.realmName(&quot;Quick Poll&quot;).and().csrf().disable().build();\r\n\t\t}\r\n\t}","title":"How to correctly use securityfilterchain in spring security 6?","body":"<p>I am working on the below spring security conf but the security filter chain is full of deprecated methods. What is the way to correctly decompose it and use not deprecated methods?</p>\n<pre><code>@Configuration\npublic class SecurityConfig {\n\n    @Bean\n    public PasswordEncoder encoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration)\n            throws Exception {\n        return authenticationConfiguration.getAuthenticationManager();\n    }\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        return http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n                .authorizeHttpRequests().requestMatchers(&quot;/v1/**&quot;, &quot;/v2/**&quot;, &quot;/swagger-ui/**&quot;, &quot;/api-docs/**&quot;)\n                .permitAll().requestMatchers(&quot;/v3/polls/**&quot;).authenticated().and().httpBasic()\n                .realmName(&quot;Quick Poll&quot;).and().csrf().disable().build();\n    }\n}\n</code></pre>\n"},{"tags":["java","file-io"],"answers":[{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":0,"up_vote_count":53,"is_accepted":false,"score":53,"last_activity_date":1306433225,"creation_date":1306432350,"answer_id":6142935,"question_id":6142901,"body_markdown":"You need to ensure that the parent directories exist before writing. You can do this by [`File#mkdirs()`][1].\r\n\r\n    File f = new File(&quot;C:/a/b/test.txt&quot;);\r\n    f.getParentFile().mkdirs();\r\n    // ...\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/io/File.html#mkdirs%28%29","title":"How to create a file in a directory in java?","body":"<p>You need to ensure that the parent directories exist before writing. You can do this by <a href=\"http://download.oracle.com/javase/6/docs/api/java/io/File.html#mkdirs%28%29\" rel=\"noreferrer\"><code>File#mkdirs()</code></a>.</p>\n\n<pre><code>File f = new File(\"C:/a/b/test.txt\");\nf.getParentFile().mkdirs();\n// ...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":120645,"reputation":11238,"user_id":313205,"display_name":"Marcelo"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1306433029,"creation_date":1306432673,"answer_id":6142996,"question_id":6142901,"body_markdown":"Use:\r\n\r\n\tFile f = new File(&quot;C:\\\\a\\\\b\\\\test.txt&quot;);\r\n\tf.mkdirs();\r\n\tf.createNewFile();\r\n\r\nNotice I changed the forward slashes to double back slashes for paths in Windows File System. This will create an empty file on the given path.","title":"How to create a file in a directory in java?","body":"<p>Use:</p>\n\n<pre><code>File f = new File(\"C:\\\\a\\\\b\\\\test.txt\");\nf.mkdirs();\nf.createNewFile();\n</code></pre>\n\n<p>Notice I changed the forward slashes to double back slashes for paths in Windows File System. This will create an empty file on the given path.</p>\n"},{"tags":[],"owner":{"account_id":396294,"reputation":7040,"user_id":759762,"accept_rate":86,"display_name":"RMT"},"down_vote_count":3,"up_vote_count":276,"is_accepted":true,"score":273,"last_activity_date":1454424323,"creation_date":1306433053,"answer_id":6143076,"question_id":6142901,"body_markdown":"The best way to do it is:\r\n\r\n    String path = &quot;C:&quot; + File.separator + &quot;hello&quot; + File.separator + &quot;hi.txt&quot;;\r\n    // Use relative path for Unix systems\r\n    File f = new File(path);\r\n\r\n    f.getParentFile().mkdirs(); \r\n    f.createNewFile();","title":"How to create a file in a directory in java?","body":"<p>The best way to do it is:</p>\n\n<pre><code>String path = \"C:\" + File.separator + \"hello\" + File.separator + \"hi.txt\";\n// Use relative path for Unix systems\nFile f = new File(path);\n\nf.getParentFile().mkdirs(); \nf.createNewFile();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2583333,"reputation":47,"user_id":2239541,"display_name":"Chitta"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1369313946,"creation_date":1364978739,"answer_id":15782652,"question_id":6142901,"body_markdown":"\tString path = &quot;C:&quot;+File.separator+&quot;hello&quot;;\r\n\tString fname= path+File.separator+&quot;abc.txt&quot;;\r\n\t\tFile f = new File(path);\r\n\t\tFile f1 = new File(fname);\r\n\t\t\t\t\r\n\t\tf.mkdirs() ;\r\n\t\ttry {\r\n\t\t\tf1.createNewFile();\r\n\t\t} catch (IOException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\nThis should create a new file inside a directory","title":"How to create a file in a directory in java?","body":"<pre><code>String path = \"C:\"+File.separator+\"hello\";\nString fname= path+File.separator+\"abc.txt\";\n    File f = new File(path);\n    File f1 = new File(fname);\n\n    f.mkdirs() ;\n    try {\n        f1.createNewFile();\n    } catch (IOException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>This should create a new file inside a directory</p>\n"},{"tags":[],"owner":{"display_name":"user1907906"},"down_vote_count":0,"up_vote_count":48,"is_accepted":false,"score":48,"last_activity_date":1691267302,"creation_date":1369314841,"answer_id":16714929,"question_id":6142901,"body_markdown":"# NIO.2\r\n\r\nWith [NIO.2][1] in [Java 7][2], you can use [`Path`][3], [`Paths`][4], and [`Files`][5]:\r\n\r\n    import java.io.IOException;\r\n    import java.nio.file.FileAlreadyExistsException;\r\n    import java.nio.file.Files;\r\n    import java.nio.file.Path;\r\n    import java.nio.file.Paths;\r\n    \r\n    public class CreateFile {\r\n    \r\n        public static void main(String[] args) throws IOException {\r\n            Path path = Paths.get(&quot;/tmp/foo/bar.txt&quot;);\r\n    \r\n            Files.createDirectories(path.getParent());\r\n    \r\n            try {\r\n                Files.createFile(path);\r\n            } catch (FileAlreadyExistsException e) {\r\n                System.err.println(&quot;already exists: &quot; + e.getMessage());\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Non-blocking_I/O_%28Java%29#JDK_7_and_NIO.2\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/nio/file/package-summary.html\r\n  [3]: http://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html\r\n  [4]: http://docs.oracle.com/javase/7/docs/api/java/nio/file/Paths.html\r\n  [5]: http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html","title":"How to create a file in a directory in java?","body":"<h1>NIO.2</h1>\n<p>With <a href=\"https://en.wikipedia.org/wiki/Non-blocking_I/O_%28Java%29#JDK_7_and_NIO.2\" rel=\"nofollow noreferrer\">NIO.2</a> in <a href=\"http://docs.oracle.com/javase/7/docs/api/java/nio/file/package-summary.html\" rel=\"nofollow noreferrer\">Java 7</a>, you can use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html\" rel=\"nofollow noreferrer\"><code>Path</code></a>, <a href=\"http://docs.oracle.com/javase/7/docs/api/java/nio/file/Paths.html\" rel=\"nofollow noreferrer\"><code>Paths</code></a>, and <a href=\"http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html\" rel=\"nofollow noreferrer\"><code>Files</code></a>:</p>\n<pre><code>import java.io.IOException;\nimport java.nio.file.FileAlreadyExistsException;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\n\npublic class CreateFile {\n\n    public static void main(String[] args) throws IOException {\n        Path path = Paths.get(&quot;/tmp/foo/bar.txt&quot;);\n\n        Files.createDirectories(path.getParent());\n\n        try {\n            Files.createFile(path);\n        } catch (FileAlreadyExistsException e) {\n            System.err.println(&quot;already exists: &quot; + e.getMessage());\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8538709,"reputation":291,"user_id":6399518,"display_name":"AKHY"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1464598197,"creation_date":1464598197,"answer_id":37521412,"question_id":6142901,"body_markdown":"**Create New File in Specified Path**\r\n\r\n    import java.io.File;\r\n    import java.io.IOException;\r\n\r\n    public class CreateNewFile {\r\n\r\n\t    public static void main(String[] args) {\r\n\t\t    try {\r\n\t\t\t    File file = new File(&quot;d:/sampleFile.txt&quot;);\r\n\t\t\t    if(file.createNewFile())\r\n\t\t\t\t    System.out.println(&quot;File creation successfull&quot;);\r\n\t\t\t    else\r\n\t\t\t\t    System.out.println(&quot;Error while creating File, file already exists in specified path&quot;);\r\n\t\t    }\r\n\t\t    catch(IOException io) {\r\n\t\t\t    io.printStackTrace();\r\n\t\t    }\r\n\t    }\r\n\r\n    }\r\n\r\n**Program Output:**\r\n\r\nFile creation successfull \r\n\r\n","title":"How to create a file in a directory in java?","body":"<p><strong>Create New File in Specified Path</strong></p>\n\n<pre><code>import java.io.File;\nimport java.io.IOException;\n\npublic class CreateNewFile {\n\n    public static void main(String[] args) {\n        try {\n            File file = new File(\"d:/sampleFile.txt\");\n            if(file.createNewFile())\n                System.out.println(\"File creation successfull\");\n            else\n                System.out.println(\"Error while creating File, file already exists in specified path\");\n        }\n        catch(IOException io) {\n            io.printStackTrace();\n        }\n    }\n\n}\n</code></pre>\n\n<p><strong>Program Output:</strong></p>\n\n<p>File creation successfull </p>\n"},{"tags":[],"owner":{"account_id":1782478,"reputation":1380,"user_id":1624839,"display_name":"Mehdi"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1510340373,"creation_date":1510340373,"answer_id":47229482,"question_id":6142901,"body_markdown":"A better and simpler way to do that :\r\n\r\n    File f = new File(&quot;C:/a/b/test.txt&quot;);\r\n    if(!f.exists()){\r\n       f.createNewFile();\r\n    }\r\n\r\n[Source][1]\r\n\r\n\r\n  [1]: http://tutoref.com/how-to-create-directories-in-java/","title":"How to create a file in a directory in java?","body":"<p>A better and simpler way to do that :</p>\n\n<pre><code>File f = new File(\"C:/a/b/test.txt\");\nif(!f.exists()){\n   f.createNewFile();\n}\n</code></pre>\n\n<p><a href=\"http://tutoref.com/how-to-create-directories-in-java/\" rel=\"nofollow noreferrer\">Source</a></p>\n"},{"tags":[],"owner":{"account_id":8906759,"reputation":2159,"user_id":6648326,"accept_rate":71,"display_name":"MasterJoe"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1539819647,"creation_date":1539819647,"answer_id":52865033,"question_id":6142901,"body_markdown":"Surprisingly, many of the answers don&#39;t give complete working code. Here it is:\r\n\r\n\tpublic static void createFile(String fullPath) throws IOException {\r\n\t\tFile file = new File(fullPath);\r\n\t\tfile.getParentFile().mkdirs();\r\n\t\tfile.createNewFile();\r\n\t}\r\n\r\n\tpublic static void main(String [] args) throws Exception {\r\n\t\tString path = &quot;C:/donkey/bray.txt&quot;;\r\n\t\tcreateFile(path);\r\n\t}\r\n","title":"How to create a file in a directory in java?","body":"<p>Surprisingly, many of the answers don't give complete working code. Here it is:</p>\n\n<pre><code>public static void createFile(String fullPath) throws IOException {\n    File file = new File(fullPath);\n    file.getParentFile().mkdirs();\n    file.createNewFile();\n}\n\npublic static void main(String [] args) throws Exception {\n    String path = \"C:/donkey/bray.txt\";\n    createFile(path);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5396455,"reputation":5608,"user_id":4297539,"accept_rate":69,"display_name":"Siberia"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1575287792,"creation_date":1575287792,"answer_id":59138457,"question_id":6142901,"body_markdown":"To create a file and write some string there:\r\n\r\n    BufferedWriter bufferedWriter = Files.newBufferedWriter(Paths.get(&quot;Path to your file&quot;));\r\n    bufferedWriter.write(&quot;Some string&quot;); // to write some data\r\n    // bufferedWriter.write(&quot;&quot;);         // for empty file\r\n    bufferedWriter.close();\r\n\r\nThis works for Mac and PC.","title":"How to create a file in a directory in java?","body":"<p>To create a file and write some string there:</p>\n\n<pre><code>BufferedWriter bufferedWriter = Files.newBufferedWriter(Paths.get(\"Path to your file\"));\nbufferedWriter.write(\"Some string\"); // to write some data\n// bufferedWriter.write(\"\");         // for empty file\nbufferedWriter.close();\n</code></pre>\n\n<p>This works for Mac and PC.</p>\n"},{"tags":[],"owner":{"account_id":16722653,"reputation":121,"user_id":12087120,"display_name":"Fridjato Part Fridjat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1576190693,"creation_date":1576190181,"answer_id":59313684,"question_id":6142901,"body_markdown":"For using the FileOutputStream try this : \r\n\r\n    public class Main01{\r\n        public static void main(String[] args) throws FileNotFoundException{\r\n            FileOutputStream f = new FileOutputStream(&quot;file.txt&quot;);\r\n            PrintStream p = new PrintStream(f);\r\n            p.println(&quot;George.........&quot;);\r\n            p.println(&quot;Alain..........&quot;);\r\n            p.println(&quot;Gerard.........&quot;);\r\n            p.close();\r\n            f.close();\r\n        }\r\n    }\r\n        ","title":"How to create a file in a directory in java?","body":"<p>For using the FileOutputStream try this : </p>\n\n<pre><code>public class Main01{\n    public static void main(String[] args) throws FileNotFoundException{\n        FileOutputStream f = new FileOutputStream(\"file.txt\");\n        PrintStream p = new PrintStream(f);\n        p.println(\"George.........\");\n        p.println(\"Alain..........\");\n        p.println(\"Gerard.........\");\n        p.close();\n        f.close();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18177724,"reputation":1,"user_id":13226128,"display_name":"Tom"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599850250,"creation_date":1599849592,"answer_id":63852596,"question_id":6142901,"body_markdown":"When you write to the file via file output stream, the file will be created automatically. but make sure all necessary directories ( folders) are created. \r\n\r\n        String absolutePath = ...\r\n        try{\r\n           File file = new File(absolutePath);\r\n           file.mkdirs() ;\r\n           //all parent folders are created\r\n           //now the file will be created when you start writing to it via FileOutputStream.\r\n          }catch (Exception e){\r\n            System.out.println(&quot;Error : &quot;+ e.getmessage());\r\n           }","title":"How to create a file in a directory in java?","body":"<p>When you write to the file via file output stream, the file will be created automatically. but make sure all necessary directories ( folders) are created.</p>\n<pre><code>    String absolutePath = ...\n    try{\n       File file = new File(absolutePath);\n       file.mkdirs() ;\n       //all parent folders are created\n       //now the file will be created when you start writing to it via FileOutputStream.\n      }catch (Exception e){\n        System.out.println(&quot;Error : &quot;+ e.getmessage());\n       }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24884147,"reputation":1,"user_id":18757012,"display_name":"henryofjupiter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684231676,"creation_date":1684231676,"answer_id":76261799,"question_id":6142901,"body_markdown":"I was here tackling this same problem and I finally solved it.\r\n\r\nThe goal is to create a file (example a .txt file) within a folder.\r\n\r\nThings you&#39;ll need:\r\n  1. Folder name\r\n  2. \r\n\r\nInstead of this:\r\n\r\n``` java\r\nFile f = new File(&quot;C:/a/b/test.txt&quot;);\r\n```\r\n\r\nTry\r\n\r\n```java\r\n//get the file&#39;s absolute path. You could input it yourself\r\n// but I think it is better to have a function to handle\r\n// system rules on how to format the path string\r\n\r\nString myFolder = &quot;b&quot;;\r\nString myFile = &quot;test.txt&quot;;\r\nString folderPath = myFolder.getAbsolutePath(); //will get the entire path for you\r\n\r\nString pathToFile = folderPath + File.separator + myFile;\r\n\r\n// this will probably throw a exception, you want to make sure you handle it\r\ntry {\r\n    File newFile = new File(pathToFile);\r\n    if (newFile.createNewFile()) {    \r\n         System.out.println(&quot;bwahahah success&quot;);\r\n    }\r\n    else {\r\n        System.out.println(&quot;file creation failed&quot;);\r\n    }\r\n}catch(IOException e) {\r\n    System.out.println(e.getMessage());   // you will need to print the message in order to get some insight on what the problem is.\r\n}\r\n\r\n// you can also add a throw if within the if statement with other checks in order to know where the error is coming from, but to keep it short this is the gist of it.\r\n\r\n// Really hope this will assist anyone that stumbles upon this same issue.\r\n\r\n```\r\n\r\nOther resources for further reading: [everything on java paths &amp; files][1]\r\n\r\n\r\n  [1]: https://www.happycoders.eu/java/how-to-construct-file-and-directory-names-with-file-path-paths/\r\nPlease comment if there is anything I might also overlook, lemme absorb some of that knowledge","title":"How to create a file in a directory in java?","body":"<p>I was here tackling this same problem and I finally solved it.</p>\n<p>The goal is to create a file (example a .txt file) within a folder.</p>\n<p>Things you'll need:</p>\n<ol>\n<li>Folder name</li>\n<li></li>\n</ol>\n<p>Instead of this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>File f = new File(&quot;C:/a/b/test.txt&quot;);\n</code></pre>\n<p>Try</p>\n<pre class=\"lang-java prettyprint-override\"><code>//get the file's absolute path. You could input it yourself\n// but I think it is better to have a function to handle\n// system rules on how to format the path string\n\nString myFolder = &quot;b&quot;;\nString myFile = &quot;test.txt&quot;;\nString folderPath = myFolder.getAbsolutePath(); //will get the entire path for you\n\nString pathToFile = folderPath + File.separator + myFile;\n\n// this will probably throw a exception, you want to make sure you handle it\ntry {\n    File newFile = new File(pathToFile);\n    if (newFile.createNewFile()) {    \n         System.out.println(&quot;bwahahah success&quot;);\n    }\n    else {\n        System.out.println(&quot;file creation failed&quot;);\n    }\n}catch(IOException e) {\n    System.out.println(e.getMessage());   // you will need to print the message in order to get some insight on what the problem is.\n}\n\n// you can also add a throw if within the if statement with other checks in order to know where the error is coming from, but to keep it short this is the gist of it.\n\n// Really hope this will assist anyone that stumbles upon this same issue.\n\n</code></pre>\n<p>Other resources for further reading: <a href=\"https://www.happycoders.eu/java/how-to-construct-file-and-directory-names-with-file-path-paths/\" rel=\"nofollow noreferrer\">everything on java paths &amp; files</a></p>\n<p>Please comment if there is anything I might also overlook, lemme absorb some of that knowledge</p>\n"},{"tags":[],"owner":{"account_id":295316,"reputation":736,"user_id":3324415,"accept_rate":74,"display_name":"BernardV"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684834069,"creation_date":1684834069,"answer_id":76313208,"question_id":6142901,"body_markdown":"Just joining some answers together.\r\n\r\n    import java.io.BufferedWriter;\r\n    import java.io.File;\r\n    import java.io.IOException;\r\n    import java.nio.file.Files;\r\n    import java.nio.file.Paths;\r\n    \r\n    class Scratch {\r\n        public static void main(String[] args) {\r\n    \r\n            String fileTargetLocation = &quot;C:\\\\testing\\\\&quot;;\r\n            String fileNameAndExtension = &quot;test.txt&quot;;\r\n    \r\n            boolean fileCreated = createFile(fileTargetLocation, fileNameAndExtension);\r\n            if (fileCreated) {\r\n                String stringForFile = &quot;This is some test text to write into the file.&quot;;\r\n                writeIntoFile(fileTargetLocation, fileNameAndExtension, stringForFile);\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Attempts to create a file at the given location, with the given file name and desired extension.\r\n         *\r\n         * @param fullPath             full path to folder in which the file needs to be created, example: C:\\testing\\\r\n         *                             (ending with a foreword slash)\r\n         * @param fileNameAndExtension file name and desired extension. Example: environment.properties, test.txt\r\n         * @return successful file creation boolean\r\n         */\r\n        public static boolean createFile(String fullPath, String fileNameAndExtension) {\r\n            try {\r\n                return new File(fullPath + fileNameAndExtension).createNewFile();\r\n            } catch (IOException io) {\r\n                io.printStackTrace();\r\n            }\r\n            return false;\r\n        }\r\n    \r\n        /**\r\n         * Attempt to write into the given file.\r\n         *\r\n         * @param fullPath             full path to folder in which the file needs to be created, example: C:\\testing\\\r\n         *                             (ending with a foreword slash)\r\n         * @param fileNameAndExtension file name and extension. Example: environment.properties, test.txt\r\n         * @param whatToWriteToFile    string to write to the file\r\n         */\r\n        public static void writeIntoFile(String fullPath, String fileNameAndExtension, String whatToWriteToFile) {\r\n            try (BufferedWriter bufferedWriter = Files.newBufferedWriter(Paths.get(fullPath + fileNameAndExtension))) {\r\n                bufferedWriter.write(whatToWriteToFile);\r\n            } catch (IOException io) {\r\n                io.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"How to create a file in a directory in java?","body":"<p>Just joining some answers together.</p>\n<pre><code>import java.io.BufferedWriter;\nimport java.io.File;\nimport java.io.IOException;\nimport java.nio.file.Files;\nimport java.nio.file.Paths;\n\nclass Scratch {\n    public static void main(String[] args) {\n\n        String fileTargetLocation = &quot;C:\\\\testing\\\\&quot;;\n        String fileNameAndExtension = &quot;test.txt&quot;;\n\n        boolean fileCreated = createFile(fileTargetLocation, fileNameAndExtension);\n        if (fileCreated) {\n            String stringForFile = &quot;This is some test text to write into the file.&quot;;\n            writeIntoFile(fileTargetLocation, fileNameAndExtension, stringForFile);\n        }\n    }\n\n    /**\n     * Attempts to create a file at the given location, with the given file name and desired extension.\n     *\n     * @param fullPath             full path to folder in which the file needs to be created, example: C:\\testing\\\n     *                             (ending with a foreword slash)\n     * @param fileNameAndExtension file name and desired extension. Example: environment.properties, test.txt\n     * @return successful file creation boolean\n     */\n    public static boolean createFile(String fullPath, String fileNameAndExtension) {\n        try {\n            return new File(fullPath + fileNameAndExtension).createNewFile();\n        } catch (IOException io) {\n            io.printStackTrace();\n        }\n        return false;\n    }\n\n    /**\n     * Attempt to write into the given file.\n     *\n     * @param fullPath             full path to folder in which the file needs to be created, example: C:\\testing\\\n     *                             (ending with a foreword slash)\n     * @param fileNameAndExtension file name and extension. Example: environment.properties, test.txt\n     * @param whatToWriteToFile    string to write to the file\n     */\n    public static void writeIntoFile(String fullPath, String fileNameAndExtension, String whatToWriteToFile) {\n        try (BufferedWriter bufferedWriter = Files.newBufferedWriter(Paths.get(fullPath + fileNameAndExtension))) {\n            bufferedWriter.write(whatToWriteToFile);\n        } catch (IOException io) {\n            io.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":757635,"reputation":1813,"user_id":770259,"display_name":"Uerefer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":439753,"favorite_count":0,"down_vote_count":0,"up_vote_count":178,"accepted_answer_id":6143076,"answer_count":13,"score":178,"last_activity_date":1691267302,"creation_date":1306432209,"question_id":6142901,"body_markdown":"If I want to create a file in `C:/a/b/test.txt`, can I do something like:\r\n\r\n    File f = new File(&quot;C:/a/b/test.txt&quot;);\r\n\r\nAlso, I want to use `FileOutputStream` to create the file. So how would I do it? For some reason the file doesn&#39;t get created in the right directory.","title":"How to create a file in a directory in java?","body":"<p>If I want to create a file in <code>C:/a/b/test.txt</code>, can I do something like:</p>\n\n<pre><code>File f = new File(\"C:/a/b/test.txt\");\n</code></pre>\n\n<p>Also, I want to use <code>FileOutputStream</code> to create the file. So how would I do it? For some reason the file doesn't get created in the right directory.</p>\n"},{"tags":["java","ajax","spring-mvc"],"owner":{"account_id":19951738,"reputation":1,"user_id":14621240,"display_name":"Manoj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1691721170,"answer_count":0,"score":-1,"last_activity_date":1691266939,"creation_date":1691255846,"question_id":76842747,"body_markdown":"I want to accept Form Data as well as json data in Sprint Controller, can any one help me how to accept and use it.\r\n\r\n\r\npublic Response methodName(@ModelAttribute form Form,@RequestBody(required = false)\r\n\t user user)","title":"I want to use Form Data and object data in controller. Is there a way to fix it?","body":"<p>I want to accept Form Data as well as json data in Sprint Controller, can any one help me how to accept and use it.</p>\n<p>public Response methodName(@ModelAttribute form Form,@RequestBody(required = false)\nuser user)</p>\n"},{"tags":["java","amazon-web-services","kotlin","jackson"],"answers":[{"tags":[],"owner":{"account_id":29167751,"reputation":1,"user_id":22344906,"display_name":"Sudhanshu Bhoi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691266490,"creation_date":1691266490,"answer_id":76843386,"question_id":76843378,"body_markdown":"Upon checking the implementation of the model class for DocumentMetadata, the default constructor and property getters and setters are part of its Builder interface implementation. The class of this implementation can be obtained by using the static method `.serializableBuilderClass()` on DocumentMetadata (in this case).\r\n\r\nUsing Jackson annotation `@JsonDeserialize` on the data class property, jackson can be instructed to use the above class for to construct DocumentMetadata (instead of the POJO itself). Following code sample for Kotlin data class worked for me:\r\n\r\n```\r\ndata class AnalyseExpenseResponse(\r\n    @JsonDeserialize(using = DocumentMetadataDeserializer::class)\r\n    var documentMetadata: DocumentMetadata? = null\r\n) {\r\n\r\n    class DocumentMetadataDeserializer : JsonDeserializer&lt;DocumentMetadata&gt;() {\r\n\r\n        override fun deserialize(\r\n            jsonParser: JsonParser,\r\n            deserializationContext: DeserializationContext\r\n        ): DocumentMetadata {\r\n            return jsonParser.readValueAs(DocumentMetadata.serializableBuilderClass()).build()\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAlternatively, using Textract models from AWS Java SDK v1 work out-of-the-box without requiring any additional workarounds like above, and thus keeping the code clean. This also helped with nested models without requiring to re-create the data classes in the code. The entire AnalyzeExpenseResult for example, can be obtained with simply:\r\n\r\n```\r\nobjectMapper.readValue(jsonString, AnalyzeExpenseResult::class.java)\r\n```\r\n\r\n(Am new to Java and Kotlin, but this is what I could figure out, please let me know if there are more elegant ways to make Jackson work for the v2 version of the SDK)","title":"Jackson is unable to deserialize jsonstring to Textract object","body":"<p>Upon checking the implementation of the model class for DocumentMetadata, the default constructor and property getters and setters are part of its Builder interface implementation. The class of this implementation can be obtained by using the static method <code>.serializableBuilderClass()</code> on DocumentMetadata (in this case).</p>\n<p>Using Jackson annotation <code>@JsonDeserialize</code> on the data class property, jackson can be instructed to use the above class for to construct DocumentMetadata (instead of the POJO itself). Following code sample for Kotlin data class worked for me:</p>\n<pre><code>data class AnalyseExpenseResponse(\n    @JsonDeserialize(using = DocumentMetadataDeserializer::class)\n    var documentMetadata: DocumentMetadata? = null\n) {\n\n    class DocumentMetadataDeserializer : JsonDeserializer&lt;DocumentMetadata&gt;() {\n\n        override fun deserialize(\n            jsonParser: JsonParser,\n            deserializationContext: DeserializationContext\n        ): DocumentMetadata {\n            return jsonParser.readValueAs(DocumentMetadata.serializableBuilderClass()).build()\n        }\n    }\n}\n</code></pre>\n<p>Alternatively, using Textract models from AWS Java SDK v1 work out-of-the-box without requiring any additional workarounds like above, and thus keeping the code clean. This also helped with nested models without requiring to re-create the data classes in the code. The entire AnalyzeExpenseResult for example, can be obtained with simply:</p>\n<pre><code>objectMapper.readValue(jsonString, AnalyzeExpenseResult::class.java)\n</code></pre>\n<p>(Am new to Java and Kotlin, but this is what I could figure out, please let me know if there are more elegant ways to make Jackson work for the v2 version of the SDK)</p>\n"}],"owner":{"account_id":29167751,"reputation":1,"user_id":22344906,"display_name":"Sudhanshu Bhoi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76843386,"answer_count":1,"score":0,"last_activity_date":1691266490,"creation_date":1691266389,"question_id":76843378,"body_markdown":"Unable to deserialize Textract model object like DocumentMetadata - https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/textract/model/DocumentMetadata.html - from AWS Java SDK v2. Getting following error:\r\n\r\n```\r\nCannot construct instance of `software.amazon.awssdk.services.textract.model.DocumentMetadata` (no Creators, like default constructor, exist): cannot deserialize from Object value (no delegate- or property-based Creator)\r\n at [Source: (StringReader); line: 1, column: 57] (through reference chain: com.amazon.fdmextractionserviceextractfromdocument.data.internal.AnalyseExpenseResponse[&quot;DocumentMetadata&quot;]): com.fasterxml.jackson.databind.exc.InvalidDefinitionException\r\ncom.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `software.amazon.awssdk.services.textract.model.DocumentMetadata` (no Creators, like default constructor, exist): cannot deserialize from Object value (no delegate- or property-based Creator)\r\n at [Source: (StringReader); line: 1, column: 57] (through reference chain: com.amazon.fdmextractionserviceextractfromdocument.data.internal.AnalyseExpenseResponse[&quot;DocumentMetadata&quot;])\r\n\tat com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:67)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.reportBadDefinition(DeserializationContext.java:1764)\r\n\tat com.fasterxml.jackson.databind.DatabindContext.reportBadDefinition(DatabindContext.java:400)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1209)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1415)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:363)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:196)\r\n\tat com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:129)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:325)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:188)\r\n\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:322)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4593)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3548)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3516)\r\n\tat com.amazon.fdmextractionserviceextractfromdocument.data.TextractOutputBuilder.getTextractOutput(TextractOutputBuilder.kt:22)\r\n\tat com.amazon.fdmextractionserviceextractfromdocument.domainlogic.ExtractDataComponent.extractData(ExtractDataComponent.kt:12)\r\n\tat com.amazon.fdmextractionserviceextractfromdocument.service.ExtractDataActivity.extractData(ExtractDataActivity.kt:14)\r\n\tat com.amazon.fdmextractionserviceextractfromdocument.LambdaMain.handleRequest(LambdaMain.kt:23)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n```\r\n\r\n*Most of the online resources refer to using annotations for Jackson. In this case that is not valid as the models are imported from AWS service. Also tried using Gson. Worst case scenario solution, create models locally.*","title":"Jackson is unable to deserialize jsonstring to Textract object","body":"<p>Unable to deserialize Textract model object like DocumentMetadata - <a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/textract/model/DocumentMetadata.html\" rel=\"nofollow noreferrer\">https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/textract/model/DocumentMetadata.html</a> - from AWS Java SDK v2. Getting following error:</p>\n<pre><code>Cannot construct instance of `software.amazon.awssdk.services.textract.model.DocumentMetadata` (no Creators, like default constructor, exist): cannot deserialize from Object value (no delegate- or property-based Creator)\n at [Source: (StringReader); line: 1, column: 57] (through reference chain: com.amazon.fdmextractionserviceextractfromdocument.data.internal.AnalyseExpenseResponse[&quot;DocumentMetadata&quot;]): com.fasterxml.jackson.databind.exc.InvalidDefinitionException\ncom.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `software.amazon.awssdk.services.textract.model.DocumentMetadata` (no Creators, like default constructor, exist): cannot deserialize from Object value (no delegate- or property-based Creator)\n at [Source: (StringReader); line: 1, column: 57] (through reference chain: com.amazon.fdmextractionserviceextractfromdocument.data.internal.AnalyseExpenseResponse[&quot;DocumentMetadata&quot;])\n    at com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:67)\n    at com.fasterxml.jackson.databind.DeserializationContext.reportBadDefinition(DeserializationContext.java:1764)\n    at com.fasterxml.jackson.databind.DatabindContext.reportBadDefinition(DatabindContext.java:400)\n    at com.fasterxml.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1209)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1415)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:363)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:196)\n    at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:129)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:325)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:188)\n    at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:322)\n    at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4593)\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3548)\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3516)\n    at com.amazon.fdmextractionserviceextractfromdocument.data.TextractOutputBuilder.getTextractOutput(TextractOutputBuilder.kt:22)\n    at com.amazon.fdmextractionserviceextractfromdocument.domainlogic.ExtractDataComponent.extractData(ExtractDataComponent.kt:12)\n    at com.amazon.fdmextractionserviceextractfromdocument.service.ExtractDataActivity.extractData(ExtractDataActivity.kt:14)\n    at com.amazon.fdmextractionserviceextractfromdocument.LambdaMain.handleRequest(LambdaMain.kt:23)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.base/java.lang.reflect.Method.invoke(Unknown Source)\n</code></pre>\n<p><em>Most of the online resources refer to using annotations for Jackson. In this case that is not valid as the models are imported from AWS service. Also tried using Gson. Worst case scenario solution, create models locally.</em></p>\n"},{"tags":["java","spring","hibernate","spring-data","h2"],"owner":{"account_id":16805754,"reputation":1,"user_id":22344853,"display_name":"Олег Рывкин"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691265939,"creation_date":1691265939,"question_id":76843351,"body_markdown":"I have a Spring Boot 3 application with an in-memory H2 database.\r\n\r\nHere is my application.yaml:\r\n```\r\nspring:\r\n\r\n jpa:\r\n  show-sql: true\r\n  defer-datasource-initialization: true\r\n  properties:\r\n   hibernate:\r\n    globally_quoted_identifiers: true\r\n   database-platform: org.hibernate.dialect.H2Dialect\r\n   hibernate:\r\n    ddl-auto: create-drop\r\n\r\n datasource:\r\n  url: jdbc:h2:mem:ss\r\n  driver-class-name: org.h2.Driver\r\n  username: sa\r\n  password: 1234\r\n\r\n h2:\r\n  console.enabled: true\r\n\r\nserver:\r\n port: 9000\r\n```\r\n\r\nI have a data.sql script to generate users for my database:\r\n\r\n```\r\nINSERT INTO &quot;user_entity&quot; (&quot;id&quot;, &quot;name&quot;, &quot;password&quot;, &quot;roles&quot;)\r\nVALUES (1, &#39;Oleg&#39;, &#39;$2a$10$dNs0mv9.Eec/63hUKnfjsev01FjPxJ/XqufRBpJ0B7NBX58gzMDhW&#39;, &#39;ROLE_ADMIN,ROLE_USER&#39;);\r\n\r\nINSERT INTO &quot;user_entity&quot; (&quot;id&quot;, &quot;name&quot;, &quot;password&quot;, &quot;roles&quot;)\r\nVALUES (2, &#39;User&#39;, &#39;$2a$10$a.EjXU1y/tiykrOePDVxGOQMLWzbXD/qTQ.0PT2vfUsYg/ZJvB9EG&#39;, &#39;ROLE_USER&#39;);\r\n```\r\n\r\nHere is my User entity:\r\n\r\n```\r\npackage com.ss.demo.domain.entity;\r\n\r\nimport jakarta.persistence.*;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\n@Entity\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class UserEntity {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int id;\r\n    @Column(unique = true)\r\n    private String name;\r\n    private String password;\r\n    private String roles;\r\n}\r\n\r\n```\r\n\r\nSo I have a constraint on field &quot;name&quot; in UserEntity. After the start of the application, everything worked fine: tables were autogenerated by Hibernate and data was inserted by script. But when I want to register another user using controller, I have the following issue on the first attempt:\r\n\r\n\r\n```\r\ncould not execute statement [Unique index or primary key violation: &quot;PRIMARY KEY ON PUBLIC.user_entity(id) ( /* key:1 */ 1, &#39;Oleg&#39;, &#39;$2a$10$dNs0mv9.Eec/63hUKnfjsev01FjPxJ/XqufRBpJ0B7NBX58gzMDhW&#39;, &#39;ROLE_ADMIN,ROLE_USER&#39;)&quot;; SQL statement:\r\ninsert into &quot;user_entity&quot; (&quot;name&quot;,&quot;password&quot;,&quot;roles&quot;,&quot;id&quot;) values (?,?,?,default) [23505-214]] [insert into &quot;user_entity&quot; (&quot;name&quot;,&quot;password&quot;,&quot;roles&quot;,&quot;id&quot;) values (?,?,?,default)]; SQL [insert into &quot;user_entity&quot; (&quot;name&quot;,&quot;password&quot;,&quot;roles&quot;,&quot;id&quot;) values (?,?,?,default)]; constraint [&quot;PRIMARY KEY ON PUBLIC.user_entity(id) ( /* key:1 */ 1, &#39;Oleg&#39;, &#39;$2a$10$dNs0mv9.Eec/63hUKnfjsev01FjPxJ/XqufRBpJ0B7NBX58gzMDhW&#39;, &#39;ROLE_ADMIN,ROLE_USER&#39;)&quot;; SQL statement:\r\ninsert into &quot;user_entity&quot; (&quot;name&quot;,&quot;password&quot;,&quot;roles&quot;,&quot;id&quot;) values (?,?,?,default) [23505-214]]\r\n```\r\n\r\nand for the second attempt:\r\n\r\n\r\n```\r\ncould not execute statement [Unique index or primary key violation: &quot;PRIMARY KEY ON PUBLIC.user_entity(id) ( /* key:2 */ 2, &#39;User&#39;, &#39;$2a$10$a.EjXU1y/tiykrOePDVxGOQMLWzbXD/qTQ.0PT2vfUsYg/ZJvB9EG&#39;, &#39;ROLE_USER&#39;)&quot;; SQL statement:\r\ninsert into &quot;user_entity&quot; (&quot;name&quot;,&quot;password&quot;,&quot;roles&quot;,&quot;id&quot;) values (?,?,?,default) [23505-214]] [insert into &quot;user_entity&quot; (&quot;name&quot;,&quot;password&quot;,&quot;roles&quot;,&quot;id&quot;) values (?,?,?,default)]; SQL [insert into &quot;user_entity&quot; (&quot;name&quot;,&quot;password&quot;,&quot;roles&quot;,&quot;id&quot;) values (?,?,?,default)]; constraint [&quot;PRIMARY KEY ON PUBLIC.user_entity(id) ( /* key:2 */ 2, &#39;User&#39;, &#39;$2a$10$a.EjXU1y/tiykrOePDVxGOQMLWzbXD/qTQ.0PT2vfUsYg/ZJvB9EG&#39;, &#39;ROLE_USER&#39;)&quot;; SQL statement:\r\ninsert into &quot;user_entity&quot; (&quot;name&quot;,&quot;password&quot;,&quot;roles&quot;,&quot;id&quot;) values (?,?,?,default) [23505-214]]\r\n```\r\n\r\nFinally, for the third attempt, everything worked fine. It looks like the queries from the data.sql script were executed during the first two attempts, despite the fact that they were already executed during startup. Does anyone have a clue what could be the cause of this problem?\r\n\r\n\r\nI&#39;ve tried to google the problem, but it seems like I cannot formulate","title":"H2 data.sql script is delayed till the first requests are executed","body":"<p>I have a Spring Boot 3 application with an in-memory H2 database.</p>\n<p>Here is my application.yaml:</p>\n<pre><code>spring:\n\n jpa:\n  show-sql: true\n  defer-datasource-initialization: true\n  properties:\n   hibernate:\n    globally_quoted_identifiers: true\n   database-platform: org.hibernate.dialect.H2Dialect\n   hibernate:\n    ddl-auto: create-drop\n\n datasource:\n  url: jdbc:h2:mem:ss\n  driver-class-name: org.h2.Driver\n  username: sa\n  password: 1234\n\n h2:\n  console.enabled: true\n\nserver:\n port: 9000\n</code></pre>\n<p>I have a data.sql script to generate users for my database:</p>\n<pre><code>INSERT INTO &quot;user_entity&quot; (&quot;id&quot;, &quot;name&quot;, &quot;password&quot;, &quot;roles&quot;)\nVALUES (1, 'Oleg', '$2a$10$dNs0mv9.Eec/63hUKnfjsev01FjPxJ/XqufRBpJ0B7NBX58gzMDhW', 'ROLE_ADMIN,ROLE_USER');\n\nINSERT INTO &quot;user_entity&quot; (&quot;id&quot;, &quot;name&quot;, &quot;password&quot;, &quot;roles&quot;)\nVALUES (2, 'User', '$2a$10$a.EjXU1y/tiykrOePDVxGOQMLWzbXD/qTQ.0PT2vfUsYg/ZJvB9EG', 'ROLE_USER');\n</code></pre>\n<p>Here is my User entity:</p>\n<pre><code>package com.ss.demo.domain.entity;\n\nimport jakarta.persistence.*;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Entity\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\npublic class UserEntity {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n    @Column(unique = true)\n    private String name;\n    private String password;\n    private String roles;\n}\n\n</code></pre>\n<p>So I have a constraint on field &quot;name&quot; in UserEntity. After the start of the application, everything worked fine: tables were autogenerated by Hibernate and data was inserted by script. But when I want to register another user using controller, I have the following issue on the first attempt:</p>\n<pre><code>could not execute statement [Unique index or primary key violation: &quot;PRIMARY KEY ON PUBLIC.user_entity(id) ( /* key:1 */ 1, 'Oleg', '$2a$10$dNs0mv9.Eec/63hUKnfjsev01FjPxJ/XqufRBpJ0B7NBX58gzMDhW', 'ROLE_ADMIN,ROLE_USER')&quot;; SQL statement:\ninsert into &quot;user_entity&quot; (&quot;name&quot;,&quot;password&quot;,&quot;roles&quot;,&quot;id&quot;) values (?,?,?,default) [23505-214]] [insert into &quot;user_entity&quot; (&quot;name&quot;,&quot;password&quot;,&quot;roles&quot;,&quot;id&quot;) values (?,?,?,default)]; SQL [insert into &quot;user_entity&quot; (&quot;name&quot;,&quot;password&quot;,&quot;roles&quot;,&quot;id&quot;) values (?,?,?,default)]; constraint [&quot;PRIMARY KEY ON PUBLIC.user_entity(id) ( /* key:1 */ 1, 'Oleg', '$2a$10$dNs0mv9.Eec/63hUKnfjsev01FjPxJ/XqufRBpJ0B7NBX58gzMDhW', 'ROLE_ADMIN,ROLE_USER')&quot;; SQL statement:\ninsert into &quot;user_entity&quot; (&quot;name&quot;,&quot;password&quot;,&quot;roles&quot;,&quot;id&quot;) values (?,?,?,default) [23505-214]]\n</code></pre>\n<p>and for the second attempt:</p>\n<pre><code>could not execute statement [Unique index or primary key violation: &quot;PRIMARY KEY ON PUBLIC.user_entity(id) ( /* key:2 */ 2, 'User', '$2a$10$a.EjXU1y/tiykrOePDVxGOQMLWzbXD/qTQ.0PT2vfUsYg/ZJvB9EG', 'ROLE_USER')&quot;; SQL statement:\ninsert into &quot;user_entity&quot; (&quot;name&quot;,&quot;password&quot;,&quot;roles&quot;,&quot;id&quot;) values (?,?,?,default) [23505-214]] [insert into &quot;user_entity&quot; (&quot;name&quot;,&quot;password&quot;,&quot;roles&quot;,&quot;id&quot;) values (?,?,?,default)]; SQL [insert into &quot;user_entity&quot; (&quot;name&quot;,&quot;password&quot;,&quot;roles&quot;,&quot;id&quot;) values (?,?,?,default)]; constraint [&quot;PRIMARY KEY ON PUBLIC.user_entity(id) ( /* key:2 */ 2, 'User', '$2a$10$a.EjXU1y/tiykrOePDVxGOQMLWzbXD/qTQ.0PT2vfUsYg/ZJvB9EG', 'ROLE_USER')&quot;; SQL statement:\ninsert into &quot;user_entity&quot; (&quot;name&quot;,&quot;password&quot;,&quot;roles&quot;,&quot;id&quot;) values (?,?,?,default) [23505-214]]\n</code></pre>\n<p>Finally, for the third attempt, everything worked fine. It looks like the queries from the data.sql script were executed during the first two attempts, despite the fact that they were already executed during startup. Does anyone have a clue what could be the cause of this problem?</p>\n<p>I've tried to google the problem, but it seems like I cannot formulate</p>\n"},{"tags":["java","spring","server","javabeans"],"comments":[{"owner":{"account_id":2045726,"reputation":1580,"user_id":1825844,"display_name":"gvmani"},"score":1,"creation_date":1530627309,"post_id":51156796,"comment_id":89296979,"body_markdown":"`BeanCreationException` , post `DefaultAreaPostalCodeService` code","body":"<code>BeanCreationException</code> , post <code>DefaultAreaPostalCodeService</code> code"},{"owner":{"account_id":13863832,"reputation":3144,"user_id":10008771,"display_name":"Edward Aung"},"score":1,"creation_date":1530628350,"post_id":51156796,"comment_id":89297689,"body_markdown":"Try without `@Transactional` annotation. If it works, change your class to a child class of `InitializingBean` and use `@AfterPropertiesSet` annotation instead of `@PostConstruct` as setters injections aren&#39;t called in post-construct yet.","body":"Try without <code>@Transactional</code> annotation. If it works, change your class to a child class of <code>InitializingBean</code> and use <code>@AfterPropertiesSet</code> annotation instead of <code>@PostConstruct</code> as setters injections aren&#39;t called in post-construct yet."},{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":1,"creation_date":1530644567,"post_id":51156796,"comment_id":89306180,"body_markdown":"The NPE is likely bubbling up from your initialize method, surround that code with a try catch and see what&#39;s up.  You&#39;re missing some code here that could be helpful, e.g. the contents of the populateSuburbMap method so this is purely speculation, but are you perhaps trying to add to suburbMap before having constructed it?","body":"The NPE is likely bubbling up from your initialize method, surround that code with a try catch and see what&#39;s up.  You&#39;re missing some code here that could be helpful, e.g. the contents of the populateSuburbMap method so this is purely speculation, but are you perhaps trying to add to suburbMap before having constructed it?"}],"answers":[{"tags":[],"owner":{"account_id":5508331,"reputation":1629,"user_id":4375543,"accept_rate":70,"display_name":"Mohamed Nabli"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1588707023,"creation_date":1530662691,"answer_id":51164224,"question_id":51156796,"body_markdown":"it is very normal to have such behavior, because `@PostConstruct` method will be called before injecting `areaPostalCodeDao` bean into `areaPostalCodeDao` property wich is null (for that moment).\r\n\r\nThere are 4 ways to run some code on bean initializing, but each way succeed in a specific step.\r\nSpring bean setup lifecycle:\r\n\r\n1. standard constructor\r\n2. `@PostConstruct`\r\n3. `@Override afterPropertiesSet()` from `InitializingBean` interface\r\n4. `init-method`\r\n\r\nSo in your case you should do as above : \r\n\r\n    import org.springframework.beans.factory.InitializingBean;  \r\n  \r\n    public class DefaultAreaPostalCodeService extends AbstractBusinessService implements AreaPostalCodeService,InitializingBean {\r\n        \r\n        private Map&lt;String,List&lt;PostalCodeData&gt;&gt; suburbMap;\r\n    \r\n        @Override\r\n        @Transactional\r\n        public void afterPropertiesSet() {\r\n            List&lt;AreaPostalCodeModel&gt; postalCodes = areaPostalCodeDao.getAllAreaPostalCodes();\r\n            populateSuburbMap(postalCodes);\r\n        }\r\n    }\r\n","title":"@PostContruct giving NullPointerException during server startup","body":"<p>it is very normal to have such behavior, because <code>@PostConstruct</code> method will be called before injecting <code>areaPostalCodeDao</code> bean into <code>areaPostalCodeDao</code> property wich is null (for that moment).</p>\n\n<p>There are 4 ways to run some code on bean initializing, but each way succeed in a specific step.\nSpring bean setup lifecycle:</p>\n\n<ol>\n<li>standard constructor</li>\n<li><code>@PostConstruct</code></li>\n<li><code>@Override afterPropertiesSet()</code> from <code>InitializingBean</code> interface</li>\n<li><code>init-method</code></li>\n</ol>\n\n<p>So in your case you should do as above : </p>\n\n<pre><code>import org.springframework.beans.factory.InitializingBean;  \n\npublic class DefaultAreaPostalCodeService extends AbstractBusinessService implements AreaPostalCodeService,InitializingBean {\n\n    private Map&lt;String,List&lt;PostalCodeData&gt;&gt; suburbMap;\n\n    @Override\n    @Transactional\n    public void afterPropertiesSet() {\n        List&lt;AreaPostalCodeModel&gt; postalCodes = areaPostalCodeDao.getAllAreaPostalCodes();\n        populateSuburbMap(postalCodes);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20833834,"reputation":1,"user_id":15795723,"display_name":"Blas Albir"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622579758,"creation_date":1622579425,"answer_id":67795636,"question_id":51156796,"body_markdown":"A possible solution, maybe not specifically for this case but could help others, is to call the code from the view, call it on first glance. The code would be something like:\r\n\r\nIn XHTML\r\n\r\n    &lt;f:metadata&gt;\r\n         &lt;f:viewAction action=&quot;#{myUI.myVoid()}&quot;/&gt;\r\n    &lt;/f:metadata&gt;\r\n\r\n ","title":"@PostContruct giving NullPointerException during server startup","body":"<p>A possible solution, maybe not specifically for this case but could help others, is to call the code from the view, call it on first glance. The code would be something like:</p>\n<p>In XHTML</p>\n<pre><code>&lt;f:metadata&gt;\n     &lt;f:viewAction action=&quot;#{myUI.myVoid()}&quot;/&gt;\n&lt;/f:metadata&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8739741,"reputation":6543,"user_id":6537157,"accept_rate":100,"display_name":"akop"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691265180,"creation_date":1691071624,"answer_id":76828895,"question_id":51156796,"body_markdown":"Are you sure, that `areaPostalCodeDao` is the cause of the NPE?  \r\nI guess, that there is something wrong inside your `initialize()` method.\r\n\r\nPlease read: https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it \r\n\r\nUnlike [Mohamed Nabli](https://stackoverflow.com/users/4375543/mohamed-nabli) wrote, Beans are initialised when `@PostConstruct` is called. Simple google research:\r\n* https://stackoverflow.com/questions/44681142/postconstruct-annotation-and-spring-lifecycle\r\n* [Baeldung Spring PostConstruct and PreDestroy Annotations](https://www.baeldung.com/spring-postconstruct-predestroy)","title":"@PostContruct giving NullPointerException during server startup","body":"<p>Are you sure, that <code>areaPostalCodeDao</code> is the cause of the NPE?<br />\nI guess, that there is something wrong inside your <code>initialize()</code> method.</p>\n<p>Please read: <a href=\"https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it\">What is a NullPointerException, and how do I fix it?</a></p>\n<p>Unlike <a href=\"https://stackoverflow.com/users/4375543/mohamed-nabli\">Mohamed Nabli</a> wrote, Beans are initialised when <code>@PostConstruct</code> is called. Simple google research:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/44681142/postconstruct-annotation-and-spring-lifecycle\">@PostConstruct annotation and spring lifecycle</a></li>\n<li><a href=\"https://www.baeldung.com/spring-postconstruct-predestroy\" rel=\"nofollow noreferrer\">Baeldung Spring PostConstruct and PreDestroy Annotations</a></li>\n</ul>\n"}],"owner":{"account_id":2138268,"reputation":7872,"user_id":1897528,"accept_rate":62,"display_name":"Farrukh Chishti"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15380,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":3,"score":1,"last_activity_date":1691265180,"creation_date":1530627180,"question_id":51156796,"body_markdown":"I am getting *Null Pointer Exception* during server startup in the first line.\r\n\r\n    public class DefaultAreaPostalCodeService extends AbstractBusinessService implements AreaPostalCodeService {\r\n    \r\n    \t\tprivate Map&lt;String,List&lt;PostalCodeData&gt;&gt; suburbMap;\r\n    \r\n    \t\t@PostConstruct\r\n            @Transactional\r\n            public void initialize() {\r\n                List&lt;AreaPostalCodeModel&gt; postalCodes = areaPostalCodeDao.getAllAreaPostalCodes();\r\n    \t\t\tpopulateSuburbMap(postalCodes);\r\n            }\r\n    \t}\r\n\r\n    &lt;bean id=&quot;areaPostalCodeService&quot;\r\n    \t\t  class=&quot;za.co.testro.core.address.impl.DefaultAreaPostalCodeService&quot; parent=&quot;abstractBusinessService&quot;&gt;\r\n    \t\t&lt;property name=&quot;areaPostalCodeDao&quot; ref=&quot;areaPostalCodeDao&quot; /&gt;\r\n    \t&lt;/bean&gt;\r\n\r\nI simply want to populate the suburbMap at server startup so that I can use it later.\r\n\r\nError logs-\r\n\r\n&gt; Error creating bean with name &#39;areaPostalCodeService&#39;: Invocation of\r\n&gt; init method failed; nested exception is java.lang.NullPointerException\r\n&gt; WARN  [localhost-startStop-1] [CloseAwareApplicationContext] Exception\r\n&gt; encountered during context initialization - cancelling refresh\r\n&gt; attempt: org.springframework.beans.factory.BeanCreationException:\r\n&gt; Error creating bean with name &#39;areaPostalCodeService&#39;: Invocation of\r\n&gt; init method failed; nested exception is java.lang.NullPointerException\r\n&gt; Pinging the JVM took 10 seconds to respond. ERROR\r\n&gt; [localhost-startStop-1] [HybrisContextFactory] Error initializing\r\n&gt; global application context!\r\n&gt; org.springframework.beans.factory.BeanCreationException: Error\r\n&gt; creating bean with name &#39;areaPostalCodeService&#39;: Invocation of init\r\n&gt; method failed; nested exception is java.lang.NullPointerException\r\n&gt;         at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:136)\r\n&gt; ~[spring-beans-4.3.3.REL\r\n\r\n**EDIT 1**:\r\n\r\nI am still getting Null Pointer Exception after adding my code to *afterProperties()*.\r\n\r\n&gt; INFO  [localhost-startStop-1] [ListMergeDirectiveBeanPostProcessor]\r\n&gt; Post Processing ListMergeDirective\r\n&gt; [promotionActionResultRaoExtractorListMergeDirective] on Bean\r\n&gt; [cartRAOProviderExtractors] WARN  [localhost-startStop-1]\r\n&gt; [CloseAwareApplicationContext] Exception\r\n&gt; encoujava.lang.NullPointerException WARN  [localhost-startStop-1]\r\n&gt; [CloseAwareApplicationContext] Exception encountered during context\r\n&gt; initialization - cancelling refresh attempt:\r\n&gt; org.springframework.beans.factory.BeanCreationException: Error\r\n&gt; creating bean with name &#39;areaPostalCodeService&#39; defined in class path\r\n&gt; resource [testcore-spring.xml]: Invocation of init method failed;\r\n&gt; nested exception is java.lang.NullPointerException ERROR\r\n&gt; [localhost-startStop-1] [HybrisContextFactory] Error initializing\r\n&gt; global application context!\r\n&gt; org.springframework.beans.factory.BeanCreationException: Error\r\n&gt; creating bean with name &#39;areaPostalCodeService&#39; defined in class path\r\n&gt; resource [testcore-spring.xml]: Invocation of init method failed; ne\r\n&gt; sted exception is java.lang.NullPointerException\r\n&gt;         at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1583)\r\n&gt; ~[spring-beans-4.3.3.RELEASE.jar:4.3.3.RELEASE]\r\n&gt;         at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:545)\r\n&gt; ~[spring-beans-4.3.3.RELEASE.jar:4.3.3.RELEASE]\r\n&gt;         at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482)\r\n&gt; ~[spring-beans-4.3.3.RELEASE.jar:4.3.3.RELEASE]ntered during context\r\n&gt; initialization - cancelling refresh attempt:\r\n&gt; org.springframework.beans.factory.BeanCreationException: Error\r\n&gt; creating bean with name &#39;areaPostalCodeService&#39; defined in class path\r\n&gt; resource [testcore-spring.xml]: Invocation of init method failed;\r\n&gt; nested exception is\r\n\r\n**EDIT 2**:\r\n\r\nStill getting Null Pointer Exception after calling the bean with application context.\r\n\r\n    Registry.getApplicationContext().getBean(&quot;areaPostalCodeDao&quot;, AreaPostalCodeDao.class).getAllAreaPostalCodes()\r\n\r\nError logs-\r\n\r\n&gt; INFO  [localhost-startStop-1] [ListMergeDirectiveBeanPostProcessor]\r\n&gt; Post Processing ListMergeDirective\r\n&gt; [promotionActionResultRaoExtractorListMergeDirective] on Bean\r\n&gt; [cartRAOProviderExtractors] WARN  [localhost-startStop-1]\r\n&gt; [CloseAwareApplicationContext] Exception encountered during context\r\n&gt; initialization - cancelling refresh attempt:\r\n&gt; org.springframework.beans.factory.BeanCreationException: Error\r\n&gt; creating bean with name &#39;areaPostalCodeService&#39; defined in class path\r\n&gt; resource [testcore-spring.xml]: Invocation of init method failed;\r\n&gt; nested exception is java.lang.NullPointerException WARN \r\n&gt; [localhost-startStop-1] [CloseAwareApplicationContext] Exception\r\n&gt; encountered during context initialization - cancelling refresh\r\n&gt; attempt: org.springframework.beans.factory.BeanCreationException:\r\n&gt; Error creating bean with name &#39;areaPostalCodeService&#39; defined in class\r\n&gt; path resource [testcore-spring.xml]: Invocation of init method failed;\r\n&gt; nested exception is java.lang.NullPointerException ERROR\r\n&gt; [localhost-startStop-1] [HybrisContextFactory] Error initializing\r\n&gt; global application context!\r\n&gt; org.springframework.beans.factory.BeanCreationException: Error\r\n&gt; creating bean with name &#39;areaPostalCodeService&#39; defined in class path\r\n&gt; resource [testcore-spring.xml]: Invocation of init method failed; ne\r\n&gt; sted exception is java.lang.NullPointerException\r\n&gt;         at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1583)\r\n&gt; ~[spring-beans-4.3.3.RELEASE.jar:4.3.3.RELEASE]\r\n&gt;         at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:545)\r\n&gt; ~[spring-beans-4.3.3.RELEASE.jar:4.3.3.RELEASE]\r\n&gt; \r\n&gt; Caused by: org.springframework.beans.FatalBeanException: Context\r\n&gt; hybris Global Context Factory  couldn&#39;t  be created correctly due to,\r\n&gt; Error creating bean with name &#39;areaPostalCodeService&#39; defined in class\r\n&gt; path resource [testcore-spring.xml]: Invocation of init method failed;\r\n&gt; nested exception is java.lang.NullPointerException\r\n&gt;         at de.hybris.platform.core.HybrisContextFactory.build(HybrisContextFactory.java:314)","title":"@PostContruct giving NullPointerException during server startup","body":"<p>I am getting <em>Null Pointer Exception</em> during server startup in the first line.</p>\n\n<pre><code>public class DefaultAreaPostalCodeService extends AbstractBusinessService implements AreaPostalCodeService {\n\n        private Map&lt;String,List&lt;PostalCodeData&gt;&gt; suburbMap;\n\n        @PostConstruct\n        @Transactional\n        public void initialize() {\n            List&lt;AreaPostalCodeModel&gt; postalCodes = areaPostalCodeDao.getAllAreaPostalCodes();\n            populateSuburbMap(postalCodes);\n        }\n    }\n\n&lt;bean id=\"areaPostalCodeService\"\n          class=\"za.co.testro.core.address.impl.DefaultAreaPostalCodeService\" parent=\"abstractBusinessService\"&gt;\n        &lt;property name=\"areaPostalCodeDao\" ref=\"areaPostalCodeDao\" /&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p>I simply want to populate the suburbMap at server startup so that I can use it later.</p>\n\n<p>Error logs-</p>\n\n<blockquote>\n  <p>Error creating bean with name 'areaPostalCodeService': Invocation of\n  init method failed; nested exception is java.lang.NullPointerException\n  WARN  [localhost-startStop-1] [CloseAwareApplicationContext] Exception\n  encountered during context initialization - cancelling refresh\n  attempt: org.springframework.beans.factory.BeanCreationException:\n  Error creating bean with name 'areaPostalCodeService': Invocation of\n  init method failed; nested exception is java.lang.NullPointerException\n  Pinging the JVM took 10 seconds to respond. ERROR\n  [localhost-startStop-1] [HybrisContextFactory] Error initializing\n  global application context!\n  org.springframework.beans.factory.BeanCreationException: Error\n  creating bean with name 'areaPostalCodeService': Invocation of init\n  method failed; nested exception is java.lang.NullPointerException\n          at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:136)\n  ~[spring-beans-4.3.3.REL</p>\n</blockquote>\n\n<p><strong>EDIT 1</strong>:</p>\n\n<p>I am still getting Null Pointer Exception after adding my code to <em>afterProperties()</em>.</p>\n\n<blockquote>\n  <p>INFO  [localhost-startStop-1] [ListMergeDirectiveBeanPostProcessor]\n  Post Processing ListMergeDirective\n  [promotionActionResultRaoExtractorListMergeDirective] on Bean\n  [cartRAOProviderExtractors] WARN  [localhost-startStop-1]\n  [CloseAwareApplicationContext] Exception\n  encoujava.lang.NullPointerException WARN  [localhost-startStop-1]\n  [CloseAwareApplicationContext] Exception encountered during context\n  initialization - cancelling refresh attempt:\n  org.springframework.beans.factory.BeanCreationException: Error\n  creating bean with name 'areaPostalCodeService' defined in class path\n  resource [testcore-spring.xml]: Invocation of init method failed;\n  nested exception is java.lang.NullPointerException ERROR\n  [localhost-startStop-1] [HybrisContextFactory] Error initializing\n  global application context!\n  org.springframework.beans.factory.BeanCreationException: Error\n  creating bean with name 'areaPostalCodeService' defined in class path\n  resource [testcore-spring.xml]: Invocation of init method failed; ne\n  sted exception is java.lang.NullPointerException\n          at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1583)\n  ~[spring-beans-4.3.3.RELEASE.jar:4.3.3.RELEASE]\n          at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:545)\n  ~[spring-beans-4.3.3.RELEASE.jar:4.3.3.RELEASE]\n          at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482)\n  ~[spring-beans-4.3.3.RELEASE.jar:4.3.3.RELEASE]ntered during context\n  initialization - cancelling refresh attempt:\n  org.springframework.beans.factory.BeanCreationException: Error\n  creating bean with name 'areaPostalCodeService' defined in class path\n  resource [testcore-spring.xml]: Invocation of init method failed;\n  nested exception is</p>\n</blockquote>\n\n<p><strong>EDIT 2</strong>:</p>\n\n<p>Still getting Null Pointer Exception after calling the bean with application context.</p>\n\n<pre><code>Registry.getApplicationContext().getBean(\"areaPostalCodeDao\", AreaPostalCodeDao.class).getAllAreaPostalCodes()\n</code></pre>\n\n<p>Error logs-</p>\n\n<blockquote>\n  <p>INFO  [localhost-startStop-1] [ListMergeDirectiveBeanPostProcessor]\n  Post Processing ListMergeDirective\n  [promotionActionResultRaoExtractorListMergeDirective] on Bean\n  [cartRAOProviderExtractors] WARN  [localhost-startStop-1]\n  [CloseAwareApplicationContext] Exception encountered during context\n  initialization - cancelling refresh attempt:\n  org.springframework.beans.factory.BeanCreationException: Error\n  creating bean with name 'areaPostalCodeService' defined in class path\n  resource [testcore-spring.xml]: Invocation of init method failed;\n  nested exception is java.lang.NullPointerException WARN \n  [localhost-startStop-1] [CloseAwareApplicationContext] Exception\n  encountered during context initialization - cancelling refresh\n  attempt: org.springframework.beans.factory.BeanCreationException:\n  Error creating bean with name 'areaPostalCodeService' defined in class\n  path resource [testcore-spring.xml]: Invocation of init method failed;\n  nested exception is java.lang.NullPointerException ERROR\n  [localhost-startStop-1] [HybrisContextFactory] Error initializing\n  global application context!\n  org.springframework.beans.factory.BeanCreationException: Error\n  creating bean with name 'areaPostalCodeService' defined in class path\n  resource [testcore-spring.xml]: Invocation of init method failed; ne\n  sted exception is java.lang.NullPointerException\n          at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1583)\n  ~[spring-beans-4.3.3.RELEASE.jar:4.3.3.RELEASE]\n          at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:545)\n  ~[spring-beans-4.3.3.RELEASE.jar:4.3.3.RELEASE]</p>\n  \n  <p>Caused by: org.springframework.beans.FatalBeanException: Context\n  hybris Global Context Factory  couldn't  be created correctly due to,\n  Error creating bean with name 'areaPostalCodeService' defined in class\n  path resource [testcore-spring.xml]: Invocation of init method failed;\n  nested exception is java.lang.NullPointerException\n          at de.hybris.platform.core.HybrisContextFactory.build(HybrisContextFactory.java:314)</p>\n</blockquote>\n"},{"tags":["java","spring","selenium-webdriver"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":4,"creation_date":1691250043,"post_id":76842373,"comment_id":135468029,"body_markdown":"Poor title. Rewrite to summarize your specific technical issue.","body":"Poor title. Rewrite to summarize your specific technical issue."}],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691264853,"creation_date":1691263478,"answer_id":76843216,"question_id":76842373,"body_markdown":"This CloudFront 403 error message...\r\n\r\n![403 ERROR CloudFront](https://i.stack.imgur.com/XfnaO.png)\r\n\r\n...implies that requested content doesn&#39;t match the specified conditions, then the content is blocked by [WAF](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/distribution-web-awswaf.html).\r\n\r\n\r\n----------\r\n\r\n\r\nDetails\r\n-------\r\nIn case of CloudFront 403 error you would observe the error contains a message similar to: &quot;Request blocked. We can&#39;t connect to the server for this app or website at this time.&quot; The Server response header contains CloudFront as the value. The same error message and a response header value of Cloudfront might also be present when the reason the request is blocked isn&#39;t AWS WAF.  To confirm that the request is blocked by AWS WAF and identify the rule that blocked it, check the AWS WAF logs for the blocked request. You also can check the AWS WAF CloudFront metrics for the relevant WebACL. Then, check the WebACL to see the rules that are blocked. \r\n\r\nIn short [AWS WAF protections](https://docs.aws.amazon.com/waf/latest/developerguide/web-acl-testing.html)  is detecting your program as a [bot](https://stackoverflow.com/a/62520191/7429447).\r\n\r\n\r\n----------\r\n\r\n\r\nSolution\r\n--------\r\nYou can adapt a few tweaks to avoid [ChromeDriver initiated _Chrome Browser_ geting detected](https://stackoverflow.com/a/53040904/7429447) as a bot:\r\n\r\n- First os all you don&#39;t need both the `--headless=new` argument and the `setHeadless(true)` property. You can use only:\r\n\r\n\t  --headless=new\r\n\t\r\n  See: [DeprecationWarning: headless property is deprecated, instead use add_argument(&#39;--headless&#39;) or add_argument(&#39;--headless=new&#39;) on Selenium 4.8.0 Python](https://stackoverflow.com/q/75367068/7429447)\r\n  \r\n- Rotate the [user-agent](https://stackoverflow.com/a/62934224/7429447) on every request, etc","title":"GKE 403Error(The request could not be satisfied)","body":"<p>This CloudFront 403 error message...</p>\n<p><img src=\"https://i.stack.imgur.com/XfnaO.png\" alt=\"403 ERROR CloudFront\" /></p>\n<p>...implies that requested content doesn't match the specified conditions, then the content is blocked by <a href=\"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/distribution-web-awswaf.html\" rel=\"nofollow noreferrer\">WAF</a>.</p>\n<hr />\n<h2>Details</h2>\n<p>In case of CloudFront 403 error you would observe the error contains a message similar to: &quot;Request blocked. We can't connect to the server for this app or website at this time.&quot; The Server response header contains CloudFront as the value. The same error message and a response header value of Cloudfront might also be present when the reason the request is blocked isn't AWS WAF.  To confirm that the request is blocked by AWS WAF and identify the rule that blocked it, check the AWS WAF logs for the blocked request. You also can check the AWS WAF CloudFront metrics for the relevant WebACL. Then, check the WebACL to see the rules that are blocked.</p>\n<p>In short <a href=\"https://docs.aws.amazon.com/waf/latest/developerguide/web-acl-testing.html\" rel=\"nofollow noreferrer\">AWS WAF protections</a>  is detecting your program as a <a href=\"https://stackoverflow.com/a/62520191/7429447\">bot</a>.</p>\n<hr />\n<h2>Solution</h2>\n<p>You can adapt a few tweaks to avoid <a href=\"https://stackoverflow.com/a/53040904/7429447\">ChromeDriver initiated <em>Chrome Browser</em> geting detected</a> as a bot:</p>\n<ul>\n<li><p>First os all you don't need both the <code>--headless=new</code> argument and the <code>setHeadless(true)</code> property. You can use only:</p>\n<pre><code>--headless=new\n</code></pre>\n<p>See: <a href=\"https://stackoverflow.com/q/75367068/7429447\">DeprecationWarning: headless property is deprecated, instead use add_argument('--headless') or add_argument('--headless=new') on Selenium 4.8.0 Python</a></p>\n</li>\n<li><p>Rotate the <a href=\"https://stackoverflow.com/a/62934224/7429447\">user-agent</a> on every request, etc</p>\n</li>\n</ul>\n"}],"owner":{"account_id":27952474,"reputation":1,"user_id":21345975,"display_name":"박우영"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1691264853,"creation_date":1691249991,"question_id":76842373,"body_markdown":"While building a crawl server, I asked a question because I couldn&#39;t solve the problem of a 403 error occurring in the distribution environment, which worked normally in the local environment.\r\n\r\nYou may be busy, but please take a look and give me feedback.\r\n\r\nI&#39;m so frustrated because I haven&#39;t been able to solve it for days.\r\n\r\n## environment\r\n\r\n- GKE\r\n- Java, Spring boot 3.0.7\r\n- selenium\r\n\r\n### Error\r\n\r\n[enter image description here](https://i.stack.imgur.com/XfnaO.png)\r\n\r\n```\r\n[http-nio-8084-exec-1] [2023-08-05 23:40:28,741] [ERROR] [SolvedCrawling.java:136] - &lt;html&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=iso-8859-1&quot;&gt;\r\n&lt;title&gt;ERROR: The request could not be satisfied&lt;/title&gt;\r\n&lt;/head&gt;&lt;body&gt;\r\n&lt;h1&gt;403 ERROR&lt;/h1&gt;\r\n&lt;h2&gt;The request could not be satisfied.&lt;/h2&gt;\r\n&lt;hr noshade=&quot;&quot; size=&quot;1px&quot;&gt;\r\nRequest blocked.\r\nWe can&#39;t connect to the server for this app or website at this time. There might be too much traffic or a configuration error. Try again later, or contact the app or website owner.\r\n&lt;br clear=&quot;all&quot;&gt;\r\nIf you provide content to customers through CloudFront, you can find steps to troubleshoot and help prevent this error by reviewing the CloudFront documentation.\r\n&lt;br clear=&quot;all&quot;&gt;\r\n&lt;hr noshade=&quot;&quot; size=&quot;1px&quot;&gt;\r\n&lt;pre&gt;Generated by cloudfront (CloudFront)\r\nRequest ID: -ok_4ED_rixCpeCLsp6ytvEtEjyMwZSMUb2VxVa10USNMDizAGzXbg==\r\n&lt;/pre&gt;\r\n&lt;address&gt;\r\n&lt;/address&gt;\r\n&lt;/body&gt;&lt;/html&gt;\r\n```\r\n\r\n### Code\r\n\r\n- RestTemplate \r\n\r\n```java\r\n@Bean\r\npublic RestTemplate restTemplate() {\r\n    RestTemplate restTemplate;\r\n    try {\r\n        restTemplate = new RestTemplate(clientHttpRequestFactory());\r\n    }catch (Exception e){\r\n        restTemplate = new RestTemplate();\r\n    }\r\n    restTemplate.setInterceptors(Collections.singletonList(\r\n            (request, body, execution) -&gt; {\r\n                HttpHeaders headers = request.getHeaders();\r\n                headers.setContentType(APPLICATION_JSON);\r\n                headers.setAccept(Collections.singletonList(APPLICATION_JSON));\r\n                headers.add(HttpHeaders.ACCEPT, &quot;application/json&quot;);\r\n                headers.add(HttpHeaders.USER_AGENT, &quot;Mozilla/5.0&quot;);\r\n                return execution.execute(request, body);\r\n            }\r\n    ));\r\n    return restTemplate;\r\n}\r\n\r\nprivate HttpComponentsClientHttpRequestFactory clientHttpRequestFactory() {\r\n    return new HttpComponentsClientHttpRequestFactory();\r\n}\r\n```\r\n\r\n- API Request\r\n\r\n```java\r\npublic String getSubject(int problemId) throws Exception{\r\n    String jsonString = null;\r\n\r\n    try {\r\n        jsonString = restTemplate.getForObject(&quot;https://solved.ac/api/v3/problem/show?problemId=&quot; + problemId, String.class);\r\n    }catch (Exception e){\r\n        e.printStackTrace();\r\n        throw new HttpResponseException(&quot;fail.&quot;);\r\n    }\r\n\r\n    JSONParser jsonParser = new JSONParser();\r\n    Object jsonObject = null;\r\n    try {\r\n        jsonObject = jsonParser.parse(jsonString);\r\n    } catch (ParseException e) {\r\n        e.printStackTrace();\r\n    }\r\n\r\n    JSONObject jsonBody = (JSONObject) jsonObject;\r\n\r\n    return jsonBody.get(&quot;titleKo&quot;).toString();\r\n}\r\n```\r\n\r\n- Crawling\r\n\r\n```java\r\npublic BaekJoonDto profileCrawling(String baekjoonId) throws IOException, InterruptedException {\r\n    WebDriver driver = setDriver();\r\n    sleep(1000);\r\n    driver.get(SOLVED_BASE_URL + SOLVED_PROFILE + baekjoonId);\r\n\r\n    By solvedListBy = By.xpath(&quot;//*[@id=\\&quot;__next\\&quot;]/div[3]/div/div[6]/div[3]/div/table/tbody&quot;);\r\n    sleep(1000);\r\n    try {\r\n        wait(driver, solvedListBy);\r\n    } catch (TimeoutException | NoSuchElementException e) {\r\n        log.error(&quot;{}&quot;, driver.getCurrentUrl());\r\n        log.error(&quot;{}&quot;, driver.getPageSource());\r\n        throw new CrawlingException(&quot;User NotFound.&quot;);\r\n    }\r\n    WebElement elements = driver.findElement(solvedListBy);\r\n    WebElement webElement = elements.findElement(By.className(&quot;css-1ojb0xa&quot;));\r\n    int bronze = getUserSolvedCount(webElement, By.xpath(&quot;//*[@id=\\&quot;__next\\&quot;]/div[3]/div/div[6]/div[3]/div/table/tbody/tr[1]/td[2]/b&quot;));\r\n\r\n    driver.quit();\r\n    return new BaekJoonDto(bronze);\r\n```\r\n\r\n- driver setting\r\n\r\n```java\r\nprivate WebDriver setDriver() throws IOException, InterruptedException {\r\n        String os = System.getProperty(&quot;os.name&quot;).toLowerCase();\r\n\r\n        if (os.contains(&quot;win&quot;)) {\r\n            System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;drivers/chromedriver_win.exe&quot;);\r\n        } else if (os.contains(&quot;mac&quot;)) {\r\n            Process process = Runtime.getRuntime().exec(&quot;xattr -d com.apple.quarantine drivers/chromedriver_mac&quot;);\r\n            process.waitFor();\r\n            System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;drivers/chromedriver_mac&quot;);\r\n        } else if (os.contains(&quot;linux&quot;)) {\r\n            System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/usr/bin/chromedriver-linux64/chromedriver&quot;);\r\n        }\r\n\r\n        ChromeOptions chromeOptions = new ChromeOptions();\r\n        chromeOptions.addArguments(&quot;--disk-cache-size=0&quot;);\r\n        chromeOptions.addArguments(&quot;--media-cache-size=0&quot;);\r\n        chromeOptions.addArguments(&quot;--headless=new&quot;);\r\n        chromeOptions.setHeadless(true);\r\n        chromeOptions.addArguments(&quot;--no-sandbox&quot;);\r\n        chromeOptions.addArguments(&quot;--disable-dev-shm-usage&quot;);\r\n        chromeOptions.addArguments(&quot;--disable-gpu&quot;);\r\n        chromeOptions.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n        chromeOptions.addArguments(&quot;--user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537&quot;);\r\n        // binary setting in local\r\n       // chromeOptions.setBinary(&quot;/Applications/Google Chrome.app/Contents/MacOS/Google Chrome&quot;); local\r\n//.      binary setting in deploy\r\n        chromeOptions.setBinary(&quot;/usr/bin/google-chrome&quot;); \r\n        return new ChromeDriver(chromeOptions);\r\n    }\r\n```\r\n\r\n1. user-agent setting \r\n","title":"GKE 403Error(The request could not be satisfied)","body":"<p>While building a crawl server, I asked a question because I couldn't solve the problem of a 403 error occurring in the distribution environment, which worked normally in the local environment.</p>\n<p>You may be busy, but please take a look and give me feedback.</p>\n<p>I'm so frustrated because I haven't been able to solve it for days.</p>\n<h2>environment</h2>\n<ul>\n<li>GKE</li>\n<li>Java, Spring boot 3.0.7</li>\n<li>selenium</li>\n</ul>\n<h3>Error</h3>\n<p><a href=\"https://i.stack.imgur.com/XfnaO.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<pre><code>[http-nio-8084-exec-1] [2023-08-05 23:40:28,741] [ERROR] [SolvedCrawling.java:136] - &lt;html&gt;&lt;head&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=iso-8859-1&quot;&gt;\n&lt;title&gt;ERROR: The request could not be satisfied&lt;/title&gt;\n&lt;/head&gt;&lt;body&gt;\n&lt;h1&gt;403 ERROR&lt;/h1&gt;\n&lt;h2&gt;The request could not be satisfied.&lt;/h2&gt;\n&lt;hr noshade=&quot;&quot; size=&quot;1px&quot;&gt;\nRequest blocked.\nWe can't connect to the server for this app or website at this time. There might be too much traffic or a configuration error. Try again later, or contact the app or website owner.\n&lt;br clear=&quot;all&quot;&gt;\nIf you provide content to customers through CloudFront, you can find steps to troubleshoot and help prevent this error by reviewing the CloudFront documentation.\n&lt;br clear=&quot;all&quot;&gt;\n&lt;hr noshade=&quot;&quot; size=&quot;1px&quot;&gt;\n&lt;pre&gt;Generated by cloudfront (CloudFront)\nRequest ID: -ok_4ED_rixCpeCLsp6ytvEtEjyMwZSMUb2VxVa10USNMDizAGzXbg==\n&lt;/pre&gt;\n&lt;address&gt;\n&lt;/address&gt;\n&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n<h3>Code</h3>\n<ul>\n<li>RestTemplate</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic RestTemplate restTemplate() {\n    RestTemplate restTemplate;\n    try {\n        restTemplate = new RestTemplate(clientHttpRequestFactory());\n    }catch (Exception e){\n        restTemplate = new RestTemplate();\n    }\n    restTemplate.setInterceptors(Collections.singletonList(\n            (request, body, execution) -&gt; {\n                HttpHeaders headers = request.getHeaders();\n                headers.setContentType(APPLICATION_JSON);\n                headers.setAccept(Collections.singletonList(APPLICATION_JSON));\n                headers.add(HttpHeaders.ACCEPT, &quot;application/json&quot;);\n                headers.add(HttpHeaders.USER_AGENT, &quot;Mozilla/5.0&quot;);\n                return execution.execute(request, body);\n            }\n    ));\n    return restTemplate;\n}\n\nprivate HttpComponentsClientHttpRequestFactory clientHttpRequestFactory() {\n    return new HttpComponentsClientHttpRequestFactory();\n}\n</code></pre>\n<ul>\n<li>API Request</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>public String getSubject(int problemId) throws Exception{\n    String jsonString = null;\n\n    try {\n        jsonString = restTemplate.getForObject(&quot;https://solved.ac/api/v3/problem/show?problemId=&quot; + problemId, String.class);\n    }catch (Exception e){\n        e.printStackTrace();\n        throw new HttpResponseException(&quot;fail.&quot;);\n    }\n\n    JSONParser jsonParser = new JSONParser();\n    Object jsonObject = null;\n    try {\n        jsonObject = jsonParser.parse(jsonString);\n    } catch (ParseException e) {\n        e.printStackTrace();\n    }\n\n    JSONObject jsonBody = (JSONObject) jsonObject;\n\n    return jsonBody.get(&quot;titleKo&quot;).toString();\n}\n</code></pre>\n<ul>\n<li>Crawling</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>public BaekJoonDto profileCrawling(String baekjoonId) throws IOException, InterruptedException {\n    WebDriver driver = setDriver();\n    sleep(1000);\n    driver.get(SOLVED_BASE_URL + SOLVED_PROFILE + baekjoonId);\n\n    By solvedListBy = By.xpath(&quot;//*[@id=\\&quot;__next\\&quot;]/div[3]/div/div[6]/div[3]/div/table/tbody&quot;);\n    sleep(1000);\n    try {\n        wait(driver, solvedListBy);\n    } catch (TimeoutException | NoSuchElementException e) {\n        log.error(&quot;{}&quot;, driver.getCurrentUrl());\n        log.error(&quot;{}&quot;, driver.getPageSource());\n        throw new CrawlingException(&quot;User NotFound.&quot;);\n    }\n    WebElement elements = driver.findElement(solvedListBy);\n    WebElement webElement = elements.findElement(By.className(&quot;css-1ojb0xa&quot;));\n    int bronze = getUserSolvedCount(webElement, By.xpath(&quot;//*[@id=\\&quot;__next\\&quot;]/div[3]/div/div[6]/div[3]/div/table/tbody/tr[1]/td[2]/b&quot;));\n\n    driver.quit();\n    return new BaekJoonDto(bronze);\n</code></pre>\n<ul>\n<li>driver setting</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>private WebDriver setDriver() throws IOException, InterruptedException {\n        String os = System.getProperty(&quot;os.name&quot;).toLowerCase();\n\n        if (os.contains(&quot;win&quot;)) {\n            System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;drivers/chromedriver_win.exe&quot;);\n        } else if (os.contains(&quot;mac&quot;)) {\n            Process process = Runtime.getRuntime().exec(&quot;xattr -d com.apple.quarantine drivers/chromedriver_mac&quot;);\n            process.waitFor();\n            System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;drivers/chromedriver_mac&quot;);\n        } else if (os.contains(&quot;linux&quot;)) {\n            System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/usr/bin/chromedriver-linux64/chromedriver&quot;);\n        }\n\n        ChromeOptions chromeOptions = new ChromeOptions();\n        chromeOptions.addArguments(&quot;--disk-cache-size=0&quot;);\n        chromeOptions.addArguments(&quot;--media-cache-size=0&quot;);\n        chromeOptions.addArguments(&quot;--headless=new&quot;);\n        chromeOptions.setHeadless(true);\n        chromeOptions.addArguments(&quot;--no-sandbox&quot;);\n        chromeOptions.addArguments(&quot;--disable-dev-shm-usage&quot;);\n        chromeOptions.addArguments(&quot;--disable-gpu&quot;);\n        chromeOptions.addArguments(&quot;--remote-allow-origins=*&quot;);\n        chromeOptions.addArguments(&quot;--user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537&quot;);\n        // binary setting in local\n       // chromeOptions.setBinary(&quot;/Applications/Google Chrome.app/Contents/MacOS/Google Chrome&quot;); local\n//.      binary setting in deploy\n        chromeOptions.setBinary(&quot;/usr/bin/google-chrome&quot;); \n        return new ChromeDriver(chromeOptions);\n    }\n</code></pre>\n<ol>\n<li>user-agent setting</li>\n</ol>\n"},{"tags":["java","android","gradle"],"answers":[{"tags":[],"owner":{"account_id":9981425,"reputation":37,"user_id":11130621,"display_name":"Joy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691263778,"creation_date":1691082585,"answer_id":76830250,"question_id":76794582,"body_markdown":"I solved it by changing the gradle version to 7.6.2\r\n\r\n[Here is the list of all the gradle releases][1], you can trial and error with the one that works for you.\r\n\r\nIn `gradle-wrapper.properties` find this line\r\n\r\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-7.6.2-bin.zip\r\n\r\nChange the gradle version here.\r\n\r\n\r\n  [1]: https://services.gradle.org/distributions/","title":"Android Studio- An exception ocurred applying plugin request [id: &#39;com.android.application&#39;] The option android.injected.build.density is deprecated","body":"<p>I solved it by changing the gradle version to 7.6.2</p>\n<p><a href=\"https://services.gradle.org/distributions/\" rel=\"nofollow noreferrer\">Here is the list of all the gradle releases</a>, you can trial and error with the one that works for you.</p>\n<p>In <code>gradle-wrapper.properties</code> find this line</p>\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-7.6.2-bin.zip\n</code></pre>\n<p>Change the gradle version here.</p>\n"}],"owner":{"account_id":26069545,"reputation":3,"user_id":19769471,"display_name":"GeorgeKA"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1627,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691263778,"creation_date":1690649408,"question_id":76794582,"body_markdown":"Recently I have encountered this problem while trying to run a project in Android Studio. I haven`t seen it before and wasn&#39;t able to find the solution to this exact problem anywere. Anyone knows how to solve it?\r\n\r\n\r\n\r\nPS: The full error message is the one below:\r\n\r\nAn exception occurred applying plugin request [id: &#39;com.android.application&#39;]\r\n&gt; Failed to apply plugin &#39;com.android.internal.application&#39;.\r\n   &gt; The option &#39;android.injected.build.density&#39; is deprecated.\r\n     It was removed in version 8.0 of the Android Gradle plugin.\r\n     Density property injection from Android Studio has been removed.","title":"Android Studio- An exception ocurred applying plugin request [id: &#39;com.android.application&#39;] The option android.injected.build.density is deprecated","body":"<p>Recently I have encountered this problem while trying to run a project in Android Studio. I haven`t seen it before and wasn't able to find the solution to this exact problem anywere. Anyone knows how to solve it?</p>\n<p>PS: The full error message is the one below:</p>\n<p>An exception occurred applying plugin request [id: 'com.android.application']</p>\n<blockquote>\n<p>Failed to apply plugin 'com.android.internal.application'.\nThe option 'android.injected.build.density' is deprecated.\nIt was removed in version 8.0 of the Android Gradle plugin.\nDensity property injection from Android Studio has been removed.</p>\n</blockquote>\n"},{"tags":["java","spring","spring-boot","intellij-idea"],"comments":[{"owner":{"account_id":17693330,"reputation":3781,"user_id":12844632,"display_name":"Egor Klepikov"},"score":0,"creation_date":1691400409,"post_id":76839843,"comment_id":135481270,"body_markdown":"To avoid a server restart on each change you could try to get rid of `spring-boot-devtools` dependency and hotswap changes as per https://stackoverflow.com/a/61416076/12844632 Notice that there are some known hotswap limitations https://www.jetbrains.com/help/idea/altering-the-program-s-execution-flow.html#limitations","body":"To avoid a server restart on each change you could try to get rid of <code>spring-boot-devtools</code> dependency and hotswap changes as per <a href=\"https://stackoverflow.com/a/61416076/12844632\">stackoverflow.com/a/61416076/12844632</a> Notice that there are some known hotswap limitations <a href=\"https://www.jetbrains.com/help/idea/altering-the-program-s-execution-flow.html#limitations\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":2701145,"reputation":4860,"user_id":2433323,"display_name":"Klaus Groenbaek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691200683,"creation_date":1691200683,"answer_id":76839863,"question_id":76839843,"body_markdown":"Are you just changing the classes while debugging, or are you you planning to update the  application on a running server.\r\nIntellij has had hot-reload, 10+ years before Spring boot was invented, so I personally don&#39;t use `spring-boot-devtools`, just start the application in the debugger and, do shit+F9 (old hotkey) to recompile and reload the classes of the JVM.","title":"Springboot - update classes without restarting Tomcat Server","body":"<p>Are you just changing the classes while debugging, or are you you planning to update the  application on a running server.\nIntellij has had hot-reload, 10+ years before Spring boot was invented, so I personally don't use <code>spring-boot-devtools</code>, just start the application in the debugger and, do shit+F9 (old hotkey) to recompile and reload the classes of the JVM.</p>\n"}],"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":289,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691263728,"creation_date":1691200310,"question_id":76839843,"body_markdown":"In my Spring Boot (2.6.4) project I would like to know if it is possible to make changes to a class (for example entity, DTO or controller) and have the changed classes reload without having to restart the whole application ([like here][1])\r\n\r\nMy environment consists of:\r\nIDE: Intellij Idea 2023 Ultimate\r\nBuild Tool: Gradle\r\n\r\nI have enabled the options in Intellij for:\r\n* Settings-&gt;Build, Execution, Deployment-&gt;Compiler : Build Project Automatically (ticked)\r\n* Enabled option &#39;allow auto-make to start even if developed application is currently running&#39; in Settings -&gt; Advanced Settings under compiler\r\n\r\nIn gradle I have tried both options:\r\n\r\n    developmentOnly &#39;org.springframework.boot:spring-boot-devtools&#39;\r\n    and\r\n\tcompileOnly &#39;org.springframework.boot:spring-boot-devtools&#39;\r\n\r\nI am Debugging the project in Intellij using the Green Debug icon on the tool menu.\r\n\r\nI then tried to make a change to a Dto class while running the project in Debug, for example:\r\n\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Getter\r\n    @Setter\r\n    public class CarDto {\r\n        @JsonProperty(&quot;carId&quot;)\r\n        private Long carId;\r\n        @JsonProperty(&quot;name&quot;)\r\n        private String name;\r\n    }\r\n\r\nBy commenting out the two lines:\r\n\r\n    //@JsonProperty(&quot;name&quot;)\r\n    //private String name;\r\n\r\nBut there is no indication on the terminal in Intellij that it has detected the changes and reloaded the changed classes.\r\n\r\n**UPDATED**\r\n\r\nAnother more recent [post][2] states that it is controlled by the run configuration in Intellij. \r\n\r\nIt states:\r\n1. Install Spring Boot Developer tools;\r\n2. Set the `On Update Action` in `Run Configuration` to `Hot swap classes and update trigger file if failed`\r\n3. `On Frame deactivation` have the class `Update Classes and Resources&#39;\r\n\r\n[![enter image description here][3]][3]\r\n\r\n**Q:** How can I get the live reload to work - it appears there is a few different sets of instructions.\r\n\r\nI can post more of the `build.gradle` if needed.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/69449905/how-to-enable-spring-boot-live-dev-tools-on-intellij-2021-2-to-rebuild-classes-a\r\n  [2]: https://stackoverflow.com/questions/71612680/spring-dev-tools-does-not-reloading-changes-in-project-intellij-idea\r\n  [3]: https://i.stack.imgur.com/eYKlW.png","title":"Springboot - update classes without restarting Tomcat Server","body":"<p>In my Spring Boot (2.6.4) project I would like to know if it is possible to make changes to a class (for example entity, DTO or controller) and have the changed classes reload without having to restart the whole application (<a href=\"https://stackoverflow.com/questions/69449905/how-to-enable-spring-boot-live-dev-tools-on-intellij-2021-2-to-rebuild-classes-a\">like here</a>)</p>\n<p>My environment consists of:\nIDE: Intellij Idea 2023 Ultimate\nBuild Tool: Gradle</p>\n<p>I have enabled the options in Intellij for:</p>\n<ul>\n<li>Settings-&gt;Build, Execution, Deployment-&gt;Compiler : Build Project Automatically (ticked)</li>\n<li>Enabled option 'allow auto-make to start even if developed application is currently running' in Settings -&gt; Advanced Settings under compiler</li>\n</ul>\n<p>In gradle I have tried both options:</p>\n<pre><code>developmentOnly 'org.springframework.boot:spring-boot-devtools'\nand\ncompileOnly 'org.springframework.boot:spring-boot-devtools'\n</code></pre>\n<p>I am Debugging the project in Intellij using the Green Debug icon on the tool menu.</p>\n<p>I then tried to make a change to a Dto class while running the project in Debug, for example:</p>\n<pre><code>@NoArgsConstructor\n@AllArgsConstructor\n@Getter\n@Setter\npublic class CarDto {\n    @JsonProperty(&quot;carId&quot;)\n    private Long carId;\n    @JsonProperty(&quot;name&quot;)\n    private String name;\n}\n</code></pre>\n<p>By commenting out the two lines:</p>\n<pre><code>//@JsonProperty(&quot;name&quot;)\n//private String name;\n</code></pre>\n<p>But there is no indication on the terminal in Intellij that it has detected the changes and reloaded the changed classes.</p>\n<p><strong>UPDATED</strong></p>\n<p>Another more recent <a href=\"https://stackoverflow.com/questions/71612680/spring-dev-tools-does-not-reloading-changes-in-project-intellij-idea\">post</a> states that it is controlled by the run configuration in Intellij.</p>\n<p>It states:</p>\n<ol>\n<li>Install Spring Boot Developer tools;</li>\n<li>Set the <code>On Update Action</code> in <code>Run Configuration</code> to <code>Hot swap classes and update trigger file if failed</code></li>\n<li><code>On Frame deactivation</code> have the class `Update Classes and Resources'</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/eYKlW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eYKlW.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Q:</strong> How can I get the live reload to work - it appears there is a few different sets of instructions.</p>\n<p>I can post more of the <code>build.gradle</code> if needed.</p>\n"},{"tags":["java","maven","selenium-webdriver","webdrivermanager-java"],"comments":[{"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":1,"creation_date":1691264918,"post_id":76843213,"comment_id":135469569,"body_markdown":"Update the question with the complete error stacktrace.","body":"Update the question with the complete error stacktrace."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691289107,"post_id":76843213,"comment_id":135471104,"body_markdown":"...should that have - be mapped to a download url?","body":"...should that have - be mapped to a download url?"}],"owner":{"account_id":10838353,"reputation":7,"user_id":13913776,"display_name":"Sri"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691263408,"creation_date":1691263408,"question_id":76843213,"body_markdown":"\r\nCreated Maven project in Eclipse IDE. I added this following dependency. I am getting WebDriverManager unable to resolve error. Can please  help in resolving this issue.\r\n\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n        &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n        &lt;version&gt;5.4.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThanks\r\n\r\n","title":"WebDriverManager cannot be resolved","body":"<p>Created Maven project in Eclipse IDE. I added this following dependency. I am getting WebDriverManager unable to resolve error. Can please  help in resolving this issue.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n    &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n    &lt;version&gt;5.4.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Thanks</p>\n"},{"tags":["java","spring","spring-boot","jackson"],"answers":[{"tags":[],"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1607507537,"creation_date":1607507537,"answer_id":65214412,"question_id":65214061,"body_markdown":"Make sure that you have the following dependency. Your error means it can not load the class com.fasterxml.jackson.annotation.JsonKey probably because it is not there. This class should be inside jackson-annotations project.\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n      &lt;version&gt;{{choose a version here }}&lt;/version&gt; \r\n    &lt;/dependency&gt;","title":"Json conversion error while using jackson api in spring boot miroservice","body":"<p>Make sure that you have the following dependency. Your error means it can not load the class com.fasterxml.jackson.annotation.JsonKey probably because it is not there. This class should be inside jackson-annotations project.</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n  &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n  &lt;version&gt;{{choose a version here }}&lt;/version&gt; \n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15632276,"reputation":117,"user_id":11569193,"display_name":"Takouo Gnegneri Franck Kris-ke"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691263368,"creation_date":1691263368,"answer_id":76843209,"question_id":65214061,"body_markdown":"Here is what worked in my case.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n        &lt;version&gt;2.12.0-rc2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- Thanks for using https://jar-download.com --&gt;","title":"Json conversion error while using jackson api in spring boot miroservice","body":"<p>Here is what worked in my case.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n    &lt;version&gt;2.12.0-rc2&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;!-- Thanks for using https://jar-download.com --&gt;\n</code></pre>\n"}],"owner":{"account_id":10916283,"reputation":346,"user_id":8023993,"display_name":"Sakthi Velan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1648,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":65214412,"answer_count":2,"score":1,"last_activity_date":1691263368,"creation_date":1607506275,"question_id":65214061,"body_markdown":"I am using jackson mapper in my application.  \r\nBelow is the code snippet.  \r\nCode is also having null fields not being set in the pojo class.   \r\nGetting below error while writing as string in last line.  \r\nGetting issue while using jackson api.  \r\n```Device dev = new Device();\r\n\tdev.setActivationStatus(&quot;activationStatus&quot;);\r\n\tdev.setAccountName(&quot;account&quot;);\r\n\tdev.setServicePlan(&quot;service plan&quot;);\r\n\tdev.setDeviceManufacturer(&quot;deviceManufacturer&quot;);\r\n\tdev.setDeviceType(&quot;deviceType&quot;);\r\n\tdev.setDeviceName(&quot;deviceName&quot;);\t\r\n\tObjectMapper obj =new ObjectMapper();\r\n\tString devVal=obj.writeValueAsString(dev);```\r\n\r\n\r\n\r\njava.lang.ClassNotFoundException: com.fasterxml.jackson.annotation.JsonKey\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:382) ~[na:1.8.0_231]\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:418) ~[na:1.8.0_231]\r\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:355) ~[na:1.8.0_231]\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:351) ~[na:1.8.0_231]\r\nAny help will be useful","title":"Json conversion error while using jackson api in spring boot miroservice","body":"<p>I am using jackson mapper in my application.<br />\nBelow is the code snippet.<br />\nCode is also having null fields not being set in the pojo class.<br />\nGetting below error while writing as string in last line.<br />\nGetting issue while using jackson api.</p>\n<pre><code>    dev.setActivationStatus(&quot;activationStatus&quot;);\n    dev.setAccountName(&quot;account&quot;);\n    dev.setServicePlan(&quot;service plan&quot;);\n    dev.setDeviceManufacturer(&quot;deviceManufacturer&quot;);\n    dev.setDeviceType(&quot;deviceType&quot;);\n    dev.setDeviceName(&quot;deviceName&quot;);    \n    ObjectMapper obj =new ObjectMapper();\n    String devVal=obj.writeValueAsString(dev);```\n\n\n\njava.lang.ClassNotFoundException: com.fasterxml.jackson.annotation.JsonKey\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:382) ~[na:1.8.0_231]\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:418) ~[na:1.8.0_231]\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:355) ~[na:1.8.0_231]\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:351) ~[na:1.8.0_231]\nAny help will be useful\n</code></pre>\n"},{"tags":["java","spring","hibernate"],"comments":[{"owner":{"account_id":4668137,"reputation":6228,"user_id":9681755,"display_name":"Dirk Deyne"},"score":1,"creation_date":1691255859,"post_id":76842695,"comment_id":135468646,"body_markdown":"I think you could use `@EventListener(ContextStartedEvent.class)`","body":"I think you could use <code>@EventListener(ContextStartedEvent.class)</code>"},{"owner":{"account_id":18670408,"reputation":143,"user_id":13609359,"display_name":"Slevin"},"score":0,"creation_date":1691257865,"post_id":76842695,"comment_id":135468829,"body_markdown":"Events are definitely a good way for this. Unfortunately I couldn&#39;t find a complete list of Spring Boot&#39;s internal events, although there should be a list somewhere in the docs. Maby someone can give a link to it. However, here a maybe useful quick summary of what to do with which events: https://semotpan.com/spring-application-events-7ab5390db6dd","body":"Events are definitely a good way for this. Unfortunately I couldn&#39;t find a complete list of Spring Boot&#39;s internal events, although there should be a list somewhere in the docs. Maby someone can give a link to it. However, here a maybe useful quick summary of what to do with which events: <a href=\"https://semotpan.com/spring-application-events-7ab5390db6dd\" rel=\"nofollow noreferrer\">semotpan.com/spring-application-events-7ab5390db6dd</a>"}],"answers":[{"tags":[],"owner":{"account_id":17258352,"reputation":94,"user_id":12496947,"display_name":"Nouman Ahmed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691261779,"creation_date":1691261779,"answer_id":76843106,"question_id":76842695,"body_markdown":"I think you should use @PostConstruct annotation on this method and it will execute annotated method right after bean of class containing this method has been created with its properties e.g \r\n\r\n    @PostConstruct\r\n    public void executeAfterAllBeans() {\r\n        // some code\r\n    }\r\n\r\nIf you just want to make sure it runs right after above beans have been created then you can pass those beans as method arguments but don&#39;t use if you don&#39;t need. This should force spring to wait until those beans are created before executing the method e.g \r\n\r\n    @PostConstruct\r\n    public void executeAfterAllBeans(BeanA beanA, BeanB beanB) {\r\n    // some code\r\n    }","title":"Run methods after all beans of the Spring&#39;s @Configuration class were loaded","body":"<p>I think you should use @PostConstruct annotation on this method and it will execute annotated method right after bean of class containing this method has been created with its properties e.g</p>\n<pre><code>@PostConstruct\npublic void executeAfterAllBeans() {\n    // some code\n}\n</code></pre>\n<p>If you just want to make sure it runs right after above beans have been created then you can pass those beans as method arguments but don't use if you don't need. This should force spring to wait until those beans are created before executing the method e.g</p>\n<pre><code>@PostConstruct\npublic void executeAfterAllBeans(BeanA beanA, BeanB beanB) {\n// some code\n}\n</code></pre>\n"}],"owner":{"account_id":16435976,"reputation":162,"user_id":11873562,"display_name":"IceMajor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691261779,"creation_date":1691255032,"question_id":76842695,"body_markdown":"Let&#39;s say there&#39;s a Spring class which looks like this.\r\n\r\n```\r\n@Configuration\r\npublic class Config {\r\n\r\n\t@Bean\r\n\tpublic BeanA beanA() {\r\n\t\t// ...\r\n\t\treturn beanA;\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic BeanB beanB() {\r\n\t\t// ...\r\n\t\treturn beanB;\r\n\t}\r\n\t\r\n\t// ...\r\n\t\r\n\t@Bean\r\n\tpublic BeanN beanN() {\r\n\t\t// ...\r\n\t\treturn beanN;\r\n\t}\r\n\r\n\tpublic void executeAfterAllBeans() {\r\n\t\t// some code\r\n\t}\r\n}\r\n```\r\n\r\nMy goal is to execute the `executeAfterAllBeans()` method right after, well, all the beans inside the `Config` class were loaded. How can I achieve that?","title":"Run methods after all beans of the Spring&#39;s @Configuration class were loaded","body":"<p>Let's say there's a Spring class which looks like this.</p>\n<pre><code>@Configuration\npublic class Config {\n\n    @Bean\n    public BeanA beanA() {\n        // ...\n        return beanA;\n    }\n    \n    @Bean\n    public BeanB beanB() {\n        // ...\n        return beanB;\n    }\n    \n    // ...\n    \n    @Bean\n    public BeanN beanN() {\n        // ...\n        return beanN;\n    }\n\n    public void executeAfterAllBeans() {\n        // some code\n    }\n}\n</code></pre>\n<p>My goal is to execute the <code>executeAfterAllBeans()</code> method right after, well, all the beans inside the <code>Config</code> class were loaded. How can I achieve that?</p>\n"},{"tags":["python","java","opencv","variance","laplacian"],"comments":[{"owner":{"account_id":2119809,"reputation":50937,"user_id":1883316,"display_name":"Tim Roberts"},"score":0,"creation_date":1691261215,"post_id":76843010,"comment_id":135469206,"body_markdown":"Your standard deviation is so small compared to the pixel values that you&#39;re likely seeing rounding errors that accumulate differently for different computation orders..  Remember that Java&#39;s `Math.pow` uses logarithms.  You should try `std.get(0,0)[0] * std.get(0,0)[0]` and see if the results change.","body":"Your standard deviation is so small compared to the pixel values that you&#39;re likely seeing rounding errors that accumulate differently for different computation orders..  Remember that Java&#39;s <code>Math.pow</code> uses logarithms.  You should try <code>std.get(0,0)[0] * std.get(0,0)[0]</code> and see if the results change."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691269222,"post_id":76843010,"comment_id":135469934,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":29167283,"reputation":1,"user_id":22344553,"display_name":"nhatrongbp"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691261113,"creation_date":1691260179,"question_id":76843010,"body_markdown":"i tried to calculate Laplace variance using opencv on java and python, but their results are different, here is my source code:\r\n\r\n```\r\nMat src, src_gray = new Mat();\r\nMatOfDouble dst = new MatOfDouble();\r\nint kernel_size = 3, scale = 1, delta = 0, ddepth = CvType.CV_16S;\r\nrc = Imgcodecs.imread(&quot;image.jpg&quot;, Imgcodecs.IMREAD_COLOR);\r\nImgproc.cvtColor(src, src_gray, Imgproc.COLOR_RGB2GRAY );\r\nImgproc.Laplacian(src_gray, dst, ddepth, kernel_size, scale, delta, Core.BORDER_DEFAULT);\r\nMatOfDouble median = new MatOfDouble();\r\nMatOfDouble std = new MatOfDouble();\r\nCore.meanStdDev(dst, median,std);\r\ndouble varianceLaplace = Math.pow(std.get(0,0)[0], 2);\r\ndouble mean = Math.pow(median.get(0,0)[0], 2);\r\nToast.makeText(this, Core.getVersionString()+&quot;\\n&quot;+mean+&quot;\\n&quot;+varianceLaplace, Toast.LENGTH_SHORT).show();\r\n```\r\n\r\nResults in opencv java\r\n\r\n![Results in opencv java](https://i.stack.imgur.com/i7aMA.png)\r\n\r\n```\r\nimport cv2\r\nsrc = cv2.imread(&quot;image.jpg&quot;, cv2.IMREAD_COLOR)\r\nsrc_gray = cv2.cvtColor(src, cv2.COLOR_BGR2GRAY)\r\ndst = cv2.Laplacian(src_gray, cv2.CV_16S, ksize=3, scale=1, delta=0)\r\n(mean, std) = cv2.meanStdDev(dst)\r\nprint(std[0][0]**2, mean[0][0]**2)\r\nprint(cv2.__version__)\r\n```\r\n\r\n&gt; results in opencv python:\\\r\n&gt; 154\\.52608731077953\\\r\n&gt; 1\\.322542731132772e-07\\\r\n&gt; 4\\.7.0\r\n\r\nwhich modification(s) must be done to get the same result?\r\n\r\ni want an accurate input so the model can make the best prediction so i need help from everyone","title":"Laplace variance gives different results between OpenCV java and OpenCV python","body":"<p>i tried to calculate Laplace variance using opencv on java and python, but their results are different, here is my source code:</p>\n<pre><code>Mat src, src_gray = new Mat();\nMatOfDouble dst = new MatOfDouble();\nint kernel_size = 3, scale = 1, delta = 0, ddepth = CvType.CV_16S;\nrc = Imgcodecs.imread(&quot;image.jpg&quot;, Imgcodecs.IMREAD_COLOR);\nImgproc.cvtColor(src, src_gray, Imgproc.COLOR_RGB2GRAY );\nImgproc.Laplacian(src_gray, dst, ddepth, kernel_size, scale, delta, Core.BORDER_DEFAULT);\nMatOfDouble median = new MatOfDouble();\nMatOfDouble std = new MatOfDouble();\nCore.meanStdDev(dst, median,std);\ndouble varianceLaplace = Math.pow(std.get(0,0)[0], 2);\ndouble mean = Math.pow(median.get(0,0)[0], 2);\nToast.makeText(this, Core.getVersionString()+&quot;\\n&quot;+mean+&quot;\\n&quot;+varianceLaplace, Toast.LENGTH_SHORT).show();\n</code></pre>\n<p>Results in opencv java</p>\n<p><img src=\"https://i.stack.imgur.com/i7aMA.png\" alt=\"Results in opencv java\" /></p>\n<pre><code>import cv2\nsrc = cv2.imread(&quot;image.jpg&quot;, cv2.IMREAD_COLOR)\nsrc_gray = cv2.cvtColor(src, cv2.COLOR_BGR2GRAY)\ndst = cv2.Laplacian(src_gray, cv2.CV_16S, ksize=3, scale=1, delta=0)\n(mean, std) = cv2.meanStdDev(dst)\nprint(std[0][0]**2, mean[0][0]**2)\nprint(cv2.__version__)\n</code></pre>\n<blockquote>\n<p>results in opencv python:<br />\n154.52608731077953<br />\n1.322542731132772e-07<br />\n4.7.0</p>\n</blockquote>\n<p>which modification(s) must be done to get the same result?</p>\n<p>i want an accurate input so the model can make the best prediction so i need help from everyone</p>\n"},{"tags":["java","spring-boot","rest","keycloak"],"owner":{"account_id":17369226,"reputation":117,"user_id":12583690,"display_name":"pat des pat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691261101,"creation_date":1691261101,"question_id":76843071,"body_markdown":"I made my keycloak configuration so that some endpoints are only accessible when you have the admin role.\r\nThis works for the endpoint &quot;/statistics/FillLevel/**&quot; which is only accessible with the admin role, but it does not work for the endpoint &quot;/pairing&quot;. The &quot;/pairing&quot; endpoint should be accessible with the admin role, but users with this role can&#39;t access it. What could be causing this? I have verified that the user has the administration role.\r\nThe JWT token that is generated presents no problems as it is directly validated in postman.\r\nwhy does it work for one and not the other?\r\n\r\n&#39;&#39;&#39;  \r\n\r\n     package com.icon.waterstation.config;\r\n\r\n     import org.keycloak.adapters.springboot.KeycloakSpringBootConfigResolver;\r\n     import org.keycloak.adapters.springsecurity.KeycloakConfiguration;\r\n     import org.keycloak.adapters.springsecurity.authentication.KeycloakAuthenticationProvider;\r\n     import org.keycloak.adapters.springsecurity.config.KeycloakWebSecurityConfigurerAdapter;\r\n     import org.springframework.beans.factory.annotation.Autowired;\r\n     import org.springframework.context.annotation.Bean;\r\n     import org.springframework.context.annotation.Import;\r\n     import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\n     import org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\r\n     import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n     import org.springframework.security.core.authority.mapping.SimpleAuthorityMapper;\r\n     import org.springframework.security.core.session.SessionRegistryImpl;\r\n     import org.springframework.security.web.authentication.session.RegisterSessionAuthenticationStrategy;\r\n     import org.springframework.security.web.authentication.session.SessionAuthenticationStrategy;\r\n\r\n     @KeycloakConfiguration\r\n     @EnableGlobalMethodSecurity(jsr250Enabled = true)\r\n     @Import(KeycloakSpringBootConfigResolver.class)\r\n     public class securityConfig extends KeycloakWebSecurityConfigurerAdapter {\r\n    /**\r\n     * Registers the KeycloakAuthenticationProvider with the authentication manager.\r\n     */\r\n    @Autowired\r\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\r\n        KeycloakAuthenticationProvider authenticationProvider = new KeycloakAuthenticationProvider();\r\n        authenticationProvider.setGrantedAuthoritiesMapper(new SimpleAuthorityMapper());\r\n        auth.authenticationProvider(authenticationProvider);\r\n    }\r\n\r\n    /**\r\n     * Defines the session authentication strategy.\r\n     */\r\n    @Bean\r\n    @Override\r\n    protected SessionAuthenticationStrategy sessionAuthenticationStrategy() {\r\n        return new RegisterSessionAuthenticationStrategy(new SessionRegistryImpl());\r\n    }\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        super.configure(http);\r\n        http\r\n                .authorizeRequests()\r\n                .antMatchers(&quot;/pairing&quot;).hasRole(&quot;admin&quot;)\r\n                .antMatchers(&quot;/statistics/FillLevel/**&quot;).hasRole(&quot;admin&quot;)\r\n                .anyRequest().permitAll();\r\n    }\r\n\r\n    }\r\n\r\n&#39;&#39;&#39;\r\n","title":"Role distribution with springboot keycloak","body":"<p>I made my keycloak configuration so that some endpoints are only accessible when you have the admin role.\nThis works for the endpoint &quot;/statistics/FillLevel/**&quot; which is only accessible with the admin role, but it does not work for the endpoint &quot;/pairing&quot;. The &quot;/pairing&quot; endpoint should be accessible with the admin role, but users with this role can't access it. What could be causing this? I have verified that the user has the administration role.\nThe JWT token that is generated presents no problems as it is directly validated in postman.\nwhy does it work for one and not the other?</p>\n<p>'''</p>\n<pre><code> package com.icon.waterstation.config;\n\n import org.keycloak.adapters.springboot.KeycloakSpringBootConfigResolver;\n import org.keycloak.adapters.springsecurity.KeycloakConfiguration;\n import org.keycloak.adapters.springsecurity.authentication.KeycloakAuthenticationProvider;\n import org.keycloak.adapters.springsecurity.config.KeycloakWebSecurityConfigurerAdapter;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.context.annotation.Bean;\n import org.springframework.context.annotation.Import;\n import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\n import org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\n import org.springframework.security.config.annotation.web.builders.HttpSecurity;\n import org.springframework.security.core.authority.mapping.SimpleAuthorityMapper;\n import org.springframework.security.core.session.SessionRegistryImpl;\n import org.springframework.security.web.authentication.session.RegisterSessionAuthenticationStrategy;\n import org.springframework.security.web.authentication.session.SessionAuthenticationStrategy;\n\n @KeycloakConfiguration\n @EnableGlobalMethodSecurity(jsr250Enabled = true)\n @Import(KeycloakSpringBootConfigResolver.class)\n public class securityConfig extends KeycloakWebSecurityConfigurerAdapter {\n/**\n * Registers the KeycloakAuthenticationProvider with the authentication manager.\n */\n@Autowired\npublic void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\n    KeycloakAuthenticationProvider authenticationProvider = new KeycloakAuthenticationProvider();\n    authenticationProvider.setGrantedAuthoritiesMapper(new SimpleAuthorityMapper());\n    auth.authenticationProvider(authenticationProvider);\n}\n\n/**\n * Defines the session authentication strategy.\n */\n@Bean\n@Override\nprotected SessionAuthenticationStrategy sessionAuthenticationStrategy() {\n    return new RegisterSessionAuthenticationStrategy(new SessionRegistryImpl());\n}\n\n@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    super.configure(http);\n    http\n            .authorizeRequests()\n            .antMatchers(&quot;/pairing&quot;).hasRole(&quot;admin&quot;)\n            .antMatchers(&quot;/statistics/FillLevel/**&quot;).hasRole(&quot;admin&quot;)\n            .anyRequest().permitAll();\n}\n\n}\n</code></pre>\n<p>'''</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":9059972,"reputation":3080,"user_id":6746785,"display_name":"gthanop"},"score":0,"creation_date":1691233557,"post_id":76840978,"comment_id":135466406,"body_markdown":"Does this answer your question? [making jfilechooser show image thumbnails](https://stackoverflow.com/questions/4096433/making-jfilechooser-show-image-thumbnails)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/4096433/making-jfilechooser-show-image-thumbnails\">making jfilechooser show image thumbnails</a>"},{"owner":{"account_id":11342171,"reputation":805,"user_id":8315843,"display_name":"Sybuser"},"score":0,"creation_date":1691241401,"post_id":76840978,"comment_id":135467131,"body_markdown":"I have the same memory leak issue with the code from  this answer","body":"I have the same memory leak issue with the code from  this answer"}],"answers":[{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691238413,"creation_date":1691238413,"answer_id":76841631,"question_id":76840978,"body_markdown":"I see two main issues that could influence the heap usage in your code:\r\n\r\n1. If your  method `getIcon(File)` gets called multiple times for the same instance of `File` while the first call is not yet finished and therefore no instance is in the cache, each time a new worker will be started and replaces the previous workers work. If the `file` is not yet in the cache, try to fill the cache immediately, best with a default image, and the worker should replace the content of the image when it&#39;s finished.\r\n\r\n2. You instantiate an anonymous inner class for the worker, that keeps a reference to the complete dialog. Try to extract this into an `static class` (inner or not, as you prefer), and just pass the necessary references to it. This would be the `File f` for which you want to create the icon, and either an instance of the cache or an instance of the previously created default image to replace its contents if you worked on the finding in item 1.","title":"How do I display a thumbnail of large images in a JFileChooser without running straight into a Java heap space error?","body":"<p>I see two main issues that could influence the heap usage in your code:</p>\n<ol>\n<li><p>If your  method <code>getIcon(File)</code> gets called multiple times for the same instance of <code>File</code> while the first call is not yet finished and therefore no instance is in the cache, each time a new worker will be started and replaces the previous workers work. If the <code>file</code> is not yet in the cache, try to fill the cache immediately, best with a default image, and the worker should replace the content of the image when it's finished.</p>\n</li>\n<li><p>You instantiate an anonymous inner class for the worker, that keeps a reference to the complete dialog. Try to extract this into an <code>static class</code> (inner or not, as you prefer), and just pass the necessary references to it. This would be the <code>File f</code> for which you want to create the icon, and either an instance of the cache or an instance of the previously created default image to replace its contents if you worked on the finding in item 1.</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":11342171,"reputation":805,"user_id":8315843,"display_name":"Sybuser"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1691259135,"creation_date":1691248150,"answer_id":76842252,"question_id":76840978,"body_markdown":"The `FileDialog` brings `Windows` native thumbnail feature\r\n\r\n```java\r\n    private BufferedImage chooseImageFile() {\r\n        FileDialog chooser = new FileDialog(this, &quot;Choose a file&quot;, FileDialog.LOAD);\r\n        chooser.setDirectory(System.getProperty(&quot;user.home&quot;));\r\n        chooser.setFilenameFilter((dir, name) -&gt; name.endsWith(&quot;.png&quot;));\r\n        chooser.setVisible(true);\r\n\r\n        if (chooser.getFile() != null) {\r\n            try {\r\n                return ImageIO.read(new File(chooser.getDirectory(), chooser.getFile()));\r\n            } catch (IOException ex) {\r\n                ex.printStackTrace();\r\n                JOptionPane.showMessageDialog(null, &quot;Error opening image.&quot;, ERROR, JOptionPane.ERROR_MESSAGE);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n```","title":"How do I display a thumbnail of large images in a JFileChooser without running straight into a Java heap space error?","body":"<p>The <code>FileDialog</code> brings <code>Windows</code> native thumbnail feature</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private BufferedImage chooseImageFile() {\n        FileDialog chooser = new FileDialog(this, &quot;Choose a file&quot;, FileDialog.LOAD);\n        chooser.setDirectory(System.getProperty(&quot;user.home&quot;));\n        chooser.setFilenameFilter((dir, name) -&gt; name.endsWith(&quot;.png&quot;));\n        chooser.setVisible(true);\n\n        if (chooser.getFile() != null) {\n            try {\n                return ImageIO.read(new File(chooser.getDirectory(), chooser.getFile()));\n            } catch (IOException ex) {\n                ex.printStackTrace();\n                JOptionPane.showMessageDialog(null, &quot;Error opening image.&quot;, ERROR, JOptionPane.ERROR_MESSAGE);\n            }\n        }\n        return null;\n    }\n</code></pre>\n"}],"owner":{"account_id":11342171,"reputation":805,"user_id":8315843,"display_name":"Sybuser"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76842252,"answer_count":2,"score":0,"last_activity_date":1691259135,"creation_date":1691227697,"question_id":76840978,"body_markdown":"I have customized a JFileChooser to render something similar to Windows explorer with large icons to help to choose the desired image. To avoid switching back and forth from windows explorer to the JFileChooser to know which file to pick up, I want to display the images directly in the JFileChooser.\r\nThe code works but is not good as runs straight into an out of memory issue (java heap space).\r\n\r\n```java\r\npublic class ThumbnailFileChooser extends JFileChooser {\r\n\r\n    private static final long serialVersionUID = 1L;\r\n\r\n    public ThumbnailFileChooser(File file) {\r\n        super(file);\r\n        setFileView(new ImageFileView());\r\n    }\r\n\r\n    class ImageFileView extends FileView {\r\n        private static final int ICON_SIZE = 128;\r\n\r\n        @Override\r\n        public String getTypeDescription(File f) {\r\n            String extension = getExtension(f);\r\n            String type = null;\r\n\r\n            if ((extension != null) &amp;&amp; (extension.equals(&quot;jpeg&quot;) ||\r\n                extension.equals(&quot;jpg&quot;) ||\r\n                extension.equals(&quot;png&quot;))) {\r\n                type = &quot;Image File&quot;;\r\n            }\r\n            return type;\r\n        }\r\n\r\n        // Cache for storing icons of files\r\n        private Map&lt;File, Icon&gt; iconCache = Collections.synchronizedMap(new LinkedHashMap&lt;File, Icon&gt;() {\r\n\r\n            private static final long serialVersionUID = 1L;\r\n\r\n            @Override\r\n            protected boolean removeEldestEntry(Map.Entry&lt;File,Icon&gt; eldest) {\r\n                return size() &gt; 100;\r\n            }\r\n        });\r\n\r\n        @Override\r\n        public Icon getIcon(File f) {\r\n            String extension = getExtension(f);\r\n            Icon icon = null;\r\n\r\n            if ((extension != null) &amp;&amp; (extension.equals(&quot;jpeg&quot;) || extension.equals(&quot;jpg&quot;) || extension.equals(&quot;png&quot;))) {\r\n                // If the icon is in the cache, use it. Otherwise, load the icon in a background thread.\r\n                icon = iconCache.get(f);\r\n                if (icon == null) {\r\n                    SwingWorker&lt;Icon, Void&gt; worker = new SwingWorker&lt;Icon, Void&gt;() {\r\n                        @Override\r\n                        protected Icon doInBackground() throws Exception {\r\n                            Image img = ImageIO.read(f);\r\n                            Image scaledImg = img.getScaledInstance(ICON_SIZE, ICON_SIZE, Image.SCALE_SMOOTH);\r\n                            return new ImageIcon(scaledImg);\r\n                        }\r\n\r\n                        @Override\r\n                        protected void done() {\r\n                            try {\r\n                                // When the icon is loaded, store it in the cache and update the file chooser.\r\n                                Icon icon = get();\r\n                                iconCache.put(f, icon);\r\n                                ThumbnailFileChooser.this.repaint();\r\n                            } catch (InterruptedException ex) {\r\n                                ex.printStackTrace();\r\n                                Thread.currentThread().interrupt();\r\n                            } catch (ExecutionException ex) {\r\n                                ex.printStackTrace();\r\n                            }\r\n                        }\r\n                    };\r\n                    worker.execute();\r\n                }\r\n            }\r\n            return icon;\r\n        }\r\n\r\n        private String getExtension(File f) {\r\n            String ext = null;\r\n            String s = f.getName();\r\n            int i = s.lastIndexOf(&#39;.&#39;);\r\n\r\n            if (i &gt; 0 &amp;&amp;  i &lt; s.length() - 1) {\r\n                ext = s.substring(i+1).toLowerCase();\r\n            }\r\n            return ext;\r\n        }\r\n    }\r\n}\r\n```","title":"How do I display a thumbnail of large images in a JFileChooser without running straight into a Java heap space error?","body":"<p>I have customized a JFileChooser to render something similar to Windows explorer with large icons to help to choose the desired image. To avoid switching back and forth from windows explorer to the JFileChooser to know which file to pick up, I want to display the images directly in the JFileChooser.\nThe code works but is not good as runs straight into an out of memory issue (java heap space).</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ThumbnailFileChooser extends JFileChooser {\n\n    private static final long serialVersionUID = 1L;\n\n    public ThumbnailFileChooser(File file) {\n        super(file);\n        setFileView(new ImageFileView());\n    }\n\n    class ImageFileView extends FileView {\n        private static final int ICON_SIZE = 128;\n\n        @Override\n        public String getTypeDescription(File f) {\n            String extension = getExtension(f);\n            String type = null;\n\n            if ((extension != null) &amp;&amp; (extension.equals(&quot;jpeg&quot;) ||\n                extension.equals(&quot;jpg&quot;) ||\n                extension.equals(&quot;png&quot;))) {\n                type = &quot;Image File&quot;;\n            }\n            return type;\n        }\n\n        // Cache for storing icons of files\n        private Map&lt;File, Icon&gt; iconCache = Collections.synchronizedMap(new LinkedHashMap&lt;File, Icon&gt;() {\n\n            private static final long serialVersionUID = 1L;\n\n            @Override\n            protected boolean removeEldestEntry(Map.Entry&lt;File,Icon&gt; eldest) {\n                return size() &gt; 100;\n            }\n        });\n\n        @Override\n        public Icon getIcon(File f) {\n            String extension = getExtension(f);\n            Icon icon = null;\n\n            if ((extension != null) &amp;&amp; (extension.equals(&quot;jpeg&quot;) || extension.equals(&quot;jpg&quot;) || extension.equals(&quot;png&quot;))) {\n                // If the icon is in the cache, use it. Otherwise, load the icon in a background thread.\n                icon = iconCache.get(f);\n                if (icon == null) {\n                    SwingWorker&lt;Icon, Void&gt; worker = new SwingWorker&lt;Icon, Void&gt;() {\n                        @Override\n                        protected Icon doInBackground() throws Exception {\n                            Image img = ImageIO.read(f);\n                            Image scaledImg = img.getScaledInstance(ICON_SIZE, ICON_SIZE, Image.SCALE_SMOOTH);\n                            return new ImageIcon(scaledImg);\n                        }\n\n                        @Override\n                        protected void done() {\n                            try {\n                                // When the icon is loaded, store it in the cache and update the file chooser.\n                                Icon icon = get();\n                                iconCache.put(f, icon);\n                                ThumbnailFileChooser.this.repaint();\n                            } catch (InterruptedException ex) {\n                                ex.printStackTrace();\n                                Thread.currentThread().interrupt();\n                            } catch (ExecutionException ex) {\n                                ex.printStackTrace();\n                            }\n                        }\n                    };\n                    worker.execute();\n                }\n            }\n            return icon;\n        }\n\n        private String getExtension(File f) {\n            String ext = null;\n            String s = f.getName();\n            int i = s.lastIndexOf('.');\n\n            if (i &gt; 0 &amp;&amp;  i &lt; s.length() - 1) {\n                ext = s.substring(i+1).toLowerCase();\n            }\n            return ext;\n        }\n    }\n}\n</code></pre>\n"},{"tags":["javascript","java","reactjs","spring-boot","tailwind-css"],"owner":{"account_id":29166082,"reputation":1,"user_id":22343632,"display_name":"Manish Baraskar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1323,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691258553,"creation_date":1691251808,"question_id":76842499,"body_markdown":"I am trying to build multi select dropdown using tailwind material Select and Option Component comes from @material-tailwind/react.\r\n\r\nBut whenever i try to pass array as value to Select value prop it gives below error   \r\nInvalid prop `value` of type `array` supplied to `MaterialTailwind.Select`, expected `string`\r\n\r\nI do not want to use react-select because my over all over is designed using tailwind material       \r\n\r\nIf some has the idea please tell an approach for this multi-select with tailwind material\r\n\r\n          \r\n```\r\n&lt;Select\r\n  className=&#39;md:w-72&#39;\r\n  size=&#39;lg&#39;\r\n  label=&#39;Change Type&#39;\r\n  multiple\r\n  value={selectedOptions}&gt;\r\n  {options.map((o) =&gt; {\r\n    return &lt;Option value={o.value}&gt;{o.value}&lt;/Option&gt;;\r\n  })}\r\n&lt;/Select&gt;\r\n```\r\n\r\nThanks!!","title":"How to create Multi Select dropdown using Material Tailwind in react","body":"<p>I am trying to build multi select dropdown using tailwind material Select and Option Component comes from @material-tailwind/react.</p>\n<p>But whenever i try to pass array as value to Select value prop it gives below error<br />\nInvalid prop <code>value</code> of type <code>array</code> supplied to <code>MaterialTailwind.Select</code>, expected <code>string</code></p>\n<p>I do not want to use react-select because my over all over is designed using tailwind material</p>\n<p>If some has the idea please tell an approach for this multi-select with tailwind material</p>\n<pre><code>&lt;Select\n  className='md:w-72'\n  size='lg'\n  label='Change Type'\n  multiple\n  value={selectedOptions}&gt;\n  {options.map((o) =&gt; {\n    return &lt;Option value={o.value}&gt;{o.value}&lt;/Option&gt;;\n  })}\n&lt;/Select&gt;\n</code></pre>\n<p>Thanks!!</p>\n"},{"tags":["java","android","android-sensors"],"answers":[{"tags":[],"owner":{"account_id":6197875,"reputation":2180,"user_id":4828650,"display_name":"Dinkar Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620091606,"creation_date":1620091606,"answer_id":67377666,"question_id":67377284,"body_markdown":"Replace \r\n\r\n    if (event.sensor == stepSensor)\r\n\r\nwith\r\n\r\n    if (event.sensor.getType() == Sensor.TYPE_STEP_DETECTOR)","title":"OnSensorChanged() is not triggering for the Step detect sensor","body":"<p>Replace</p>\n<pre><code>if (event.sensor == stepSensor)\n</code></pre>\n<p>with</p>\n<pre><code>if (event.sensor.getType() == Sensor.TYPE_STEP_DETECTOR)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18627517,"reputation":1,"user_id":13576293,"display_name":"Yogesh Machhi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636443908,"creation_date":1636443755,"answer_id":69894448,"question_id":67377284,"body_markdown":"You need to add the following to your `AndroidManifest.xml`:\r\n\r\n```xml\r\n&lt;uses-feature\r\n   android:name=&quot;android.hardware.sensor.stepcounter&quot;\r\n   android:required=&quot;true&quot;/&gt;\r\n  \r\n&lt;uses-feature\r\n  android:name=&quot;android.hardware.sensor.stepdetector&quot;\r\n  android:required=&quot;true&quot;/&gt;\r\n```\r\n\r\nIf you use Android 10 or later, you also need to add the following permission:\r\n\r\n```xml\r\n&lt;uses-permission android:name=&quot;android.permission.ACTIVITY_RECOGNITION&quot;/&gt;\r\n```\r\n\r\n","title":"OnSensorChanged() is not triggering for the Step detect sensor","body":"<p>You need to add the following to your <code>AndroidManifest.xml</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;uses-feature\n   android:name=&quot;android.hardware.sensor.stepcounter&quot;\n   android:required=&quot;true&quot;/&gt;\n  \n&lt;uses-feature\n  android:name=&quot;android.hardware.sensor.stepdetector&quot;\n  android:required=&quot;true&quot;/&gt;\n</code></pre>\n<p>If you use Android 10 or later, you also need to add the following permission:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;uses-permission android:name=&quot;android.permission.ACTIVITY_RECOGNITION&quot;/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25350782,"reputation":1,"user_id":19167697,"display_name":"Jos_BCN"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691258348,"creation_date":1691258348,"answer_id":76842898,"question_id":67377284,"body_markdown":"In my case, the problem is not asking for permission..\r\nI&#39;m only putting it on the Manifest.\r\nTo get permissions...\r\n\r\n    // GET PERMISSIONS\r\n        if(ContextCompat.checkSelfPermission(this,\r\n                Manifest.permission.ACTIVITY_RECOGNITION) == PackageManager.PERMISSION_DENIED){\r\n            requestPermissions(new String[]{Manifest.permission.ACTIVITY_RECOGNITION}, 19);\r\n        }","title":"OnSensorChanged() is not triggering for the Step detect sensor","body":"<p>In my case, the problem is not asking for permission..\nI'm only putting it on the Manifest.\nTo get permissions...</p>\n<pre><code>// GET PERMISSIONS\n    if(ContextCompat.checkSelfPermission(this,\n            Manifest.permission.ACTIVITY_RECOGNITION) == PackageManager.PERMISSION_DENIED){\n        requestPermissions(new String[]{Manifest.permission.ACTIVITY_RECOGNITION}, 19);\n    }\n</code></pre>\n"}],"owner":{"account_id":21480036,"reputation":11,"user_id":15827561,"display_name":"Silver_Ser4phin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":990,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1691258348,"creation_date":1620087582,"question_id":67377284,"body_markdown":"I recently started working with android and I wanted to program my own Pedometer app that counts how many steps I have taken. Sadly somehow the onSensorChanged() method isn&#39;t called. I made sure my phone has the sensor and I also made sure that everything else is working fine (registering a listener, creating a SensorManager and a Sensor) and everything seems to be working fine. I have als added \r\n````uses-permission android:name=&quot;android.permission.ACTIVITY_RECOGNITION&quot; ```` in the android manifest since another post stated this is needed. Here is my code:\r\n```import androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Context;\r\nimport android.hardware.Sensor;\r\nimport android.hardware.SensorEvent;\r\nimport android.hardware.SensorEventListener;\r\nimport android.hardware.SensorManager;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.TextView;\r\n\r\nimport java.util.List;\r\n\r\npublic class MainActivity extends AppCompatActivity implements SensorEventListener{\r\n\r\n    Button btnReset;\r\n    private SensorManager sensorManager;\r\n    private Sensor stepSensor;\r\n    private boolean isStepSensorAvailable;\r\n    private TextView txtSteps, txtCheck;\r\n    private int stepCounter;\r\n    private List&lt;Sensor&gt; deviceSensors;  //bugfixing\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        initialize();\r\n\r\n        if(sensorManager.getDefaultSensor(Sensor.TYPE_STEP_DETECTOR) != null)\r\n        {\r\n            stepSensor = sensorManager.getDefaultSensor(Sensor.TYPE_STEP_DETECTOR);\r\n            txtCheck.setText(&quot;Sensor was found, stepsensor is now &quot; + stepSensor.getName());\r\n            isStepSensorAvailable = true;\r\n        }\r\n        else\r\n        {\r\n            txtSteps.setText(getString(R.string.txt_step_sensor_not_available));\r\n            isStepSensorAvailable = false;\r\n        }\r\n\r\n\r\n    }\r\n\r\n    private void initialize() {\r\n        sensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);\r\n        txtSteps = findViewById(R.id.txtSteps);\r\n        txtCheck = findViewById(R.id.txtCheck);\r\n        stepCounter = 0;\r\n        btnReset = findViewById(R.id.btnReset);\r\n        btnReset.setVisibility(View.INVISIBLE);\r\n        txtSteps.setVisibility(View.INVISIBLE);\r\n\r\n    }\r\n\r\n    /**\r\n     * Checking for available Sensors\r\n     */\r\n\r\n    @Override\r\n    protected void onResume()\r\n    {\r\n        super.onResume();\r\n        if(sensorManager.getDefaultSensor(Sensor.TYPE_STEP_DETECTOR) != null)\r\n        {\r\n            sensorManager.registerListener(this, stepSensor, sensorManager.SENSOR_DELAY_FASTEST);\r\n            txtCheck.setText(txtCheck.getText() + System.getProperty(&quot;line.separator&quot;) + &quot;listener registered!&quot;);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onPause()\r\n    {\r\n        super.onPause();\r\n        if(sensorManager.getDefaultSensor(Sensor.TYPE_STEP_DETECTOR) != null)\r\n        {\r\n            sensorManager.unregisterListener(this, stepSensor);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onSensorChanged(SensorEvent event) {\r\n        if (event.sensor == stepSensor)\r\n        {\r\n            txtCheck.setText(txtCheck.getText() + System.getProperty(&quot;line.separator&quot;) + &quot;Sensorevent was triggered!&quot;);\r\n            stepCounter = (int) (stepCounter + event.values[0]);\r\n            txtSteps.setText(String.valueOf(stepCounter));\r\n        }\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onAccuracyChanged(Sensor sensor, int accuracy) {\r\n\r\n    }\r\n}\r\n```\r\n\r\nThanks in advance for all the help.","title":"OnSensorChanged() is not triggering for the Step detect sensor","body":"<p>I recently started working with android and I wanted to program my own Pedometer app that counts how many steps I have taken. Sadly somehow the onSensorChanged() method isn't called. I made sure my phone has the sensor and I also made sure that everything else is working fine (registering a listener, creating a SensorManager and a Sensor) and everything seems to be working fine. I have als added\n<code>uses-permission android:name=&quot;android.permission.ACTIVITY_RECOGNITION&quot; </code> in the android manifest since another post stated this is needed. Here is my code:</p>\n<pre><code>\nimport android.content.Context;\nimport android.hardware.Sensor;\nimport android.hardware.SensorEvent;\nimport android.hardware.SensorEventListener;\nimport android.hardware.SensorManager;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.TextView;\n\nimport java.util.List;\n\npublic class MainActivity extends AppCompatActivity implements SensorEventListener{\n\n    Button btnReset;\n    private SensorManager sensorManager;\n    private Sensor stepSensor;\n    private boolean isStepSensorAvailable;\n    private TextView txtSteps, txtCheck;\n    private int stepCounter;\n    private List&lt;Sensor&gt; deviceSensors;  //bugfixing\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        initialize();\n\n        if(sensorManager.getDefaultSensor(Sensor.TYPE_STEP_DETECTOR) != null)\n        {\n            stepSensor = sensorManager.getDefaultSensor(Sensor.TYPE_STEP_DETECTOR);\n            txtCheck.setText(&quot;Sensor was found, stepsensor is now &quot; + stepSensor.getName());\n            isStepSensorAvailable = true;\n        }\n        else\n        {\n            txtSteps.setText(getString(R.string.txt_step_sensor_not_available));\n            isStepSensorAvailable = false;\n        }\n\n\n    }\n\n    private void initialize() {\n        sensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);\n        txtSteps = findViewById(R.id.txtSteps);\n        txtCheck = findViewById(R.id.txtCheck);\n        stepCounter = 0;\n        btnReset = findViewById(R.id.btnReset);\n        btnReset.setVisibility(View.INVISIBLE);\n        txtSteps.setVisibility(View.INVISIBLE);\n\n    }\n\n    /**\n     * Checking for available Sensors\n     */\n\n    @Override\n    protected void onResume()\n    {\n        super.onResume();\n        if(sensorManager.getDefaultSensor(Sensor.TYPE_STEP_DETECTOR) != null)\n        {\n            sensorManager.registerListener(this, stepSensor, sensorManager.SENSOR_DELAY_FASTEST);\n            txtCheck.setText(txtCheck.getText() + System.getProperty(&quot;line.separator&quot;) + &quot;listener registered!&quot;);\n        }\n    }\n\n    @Override\n    protected void onPause()\n    {\n        super.onPause();\n        if(sensorManager.getDefaultSensor(Sensor.TYPE_STEP_DETECTOR) != null)\n        {\n            sensorManager.unregisterListener(this, stepSensor);\n        }\n    }\n\n    @Override\n    public void onSensorChanged(SensorEvent event) {\n        if (event.sensor == stepSensor)\n        {\n            txtCheck.setText(txtCheck.getText() + System.getProperty(&quot;line.separator&quot;) + &quot;Sensorevent was triggered!&quot;);\n            stepCounter = (int) (stepCounter + event.values[0]);\n            txtSteps.setText(String.valueOf(stepCounter));\n        }\n\n\n    }\n\n    @Override\n    public void onAccuracyChanged(Sensor sensor, int accuracy) {\n\n    }\n}\n</code></pre>\n<p>Thanks in advance for all the help.</p>\n"},{"tags":["java","apache","excel","apache-poi"],"comments":[{"owner":{"account_id":6839027,"reputation":4521,"user_id":5260008,"accept_rate":100,"display_name":"N00b Pr0grammer"},"score":0,"creation_date":1631881339,"post_id":3148535,"comment_id":122349755,"body_markdown":"For my pet project, I changed it to a **Text** column in the excel sheet to circumvent this issue.","body":"For my pet project, I changed it to a <b>Text</b> column in the excel sheet to circumvent this issue."}],"answers":[{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1543312657,"creation_date":1277895839,"answer_id":3148572,"question_id":3148535,"body_markdown":"You need the DateUtils: see [this article][1] for details.\r\n\r\nOr, better yet, use Andy Khan&#39;s JExcel instead of POI.\r\n\r\n\r\n  [1]: https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/DateUtil.html","title":"How to read Excel cell having Date with Apache POI?","body":"<p>You need the DateUtils: see <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/DateUtil.html\" rel=\"nofollow noreferrer\">this article</a> for details.</p>\n\n<p>Or, better yet, use Andy Khan's JExcel instead of POI.</p>\n"},{"tags":[],"owner":{"account_id":109168,"reputation":31181,"user_id":289396,"accept_rate":89,"display_name":"JoseK"},"down_vote_count":0,"up_vote_count":129,"is_accepted":true,"score":129,"last_activity_date":1585026714,"creation_date":1277898024,"answer_id":3148849,"question_id":3148535,"body_markdown":"\r\n**NOTE: HSSFDateUtil is deprecated**\r\n\r\nIf you know which cell i.e. column position say 0 in each row is going to be a date, you can go for \r\n`row.getCell(0).getDateCellValue()` directly.  \r\nhttp://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFCell.html#getDateCellValue()\r\n\r\nUPDATE: Here is an example - you can apply this in your switch case code above. I am checking and printing the Numeric as well as Date value. In this case the first column in my sheet has dates, hence I use row.getCell(0).\r\n\r\nYou can use the `if (HSSFDateUtil.isCellDateFormatted ..` code block directly in your switch case.\r\n\r\n    if (row.getCell(0).getCellType() == HSSFCell.CELL_TYPE_NUMERIC)\r\n        System.out.println (&quot;Row No.: &quot; + row.getRowNum ()+ &quot; &quot; +\r\n            row.getCell(0).getNumericCellValue());\r\n    \r\n        if (HSSFDateUtil.isCellDateFormatted(row.getCell(0))) {\r\n            System.out.println (&quot;Row No.: &quot; + row.getRowNum ()+ &quot; &quot; + \r\n                row.getCell(0).getDateCellValue());\r\n        }\r\n    }\r\n\r\n\r\nThe output is \r\n\r\n    Row No.: 0 39281.0\r\n    Row No.: 0 Wed Jul 18 00:00:00 IST 2007\r\n    Row No.: 1 39491.0\r\n    Row No.: 1 Wed Feb 13 00:00:00 IST 2008\r\n    Row No.: 2 39311.0\r\n    Row No.: 2 Fri Aug 17 00:00:00 IST 2007\r\n\r\n  [1]: http://www.dbunit.org/xref/org/dbunit/dataset/excel/XlsTable.html","title":"How to read Excel cell having Date with Apache POI?","body":"<p><strong>NOTE: HSSFDateUtil is deprecated</strong></p>\n\n<p>If you know which cell i.e. column position say 0 in each row is going to be a date, you can go for \n<code>row.getCell(0).getDateCellValue()</code> directly.<br>\n<a href=\"http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFCell.html#getDateCellValue()\" rel=\"noreferrer\">http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFCell.html#getDateCellValue()</a></p>\n\n<p>UPDATE: Here is an example - you can apply this in your switch case code above. I am checking and printing the Numeric as well as Date value. In this case the first column in my sheet has dates, hence I use row.getCell(0).</p>\n\n<p>You can use the <code>if (HSSFDateUtil.isCellDateFormatted ..</code> code block directly in your switch case.</p>\n\n<pre><code>if (row.getCell(0).getCellType() == HSSFCell.CELL_TYPE_NUMERIC)\n    System.out.println (\"Row No.: \" + row.getRowNum ()+ \" \" +\n        row.getCell(0).getNumericCellValue());\n\n    if (HSSFDateUtil.isCellDateFormatted(row.getCell(0))) {\n        System.out.println (\"Row No.: \" + row.getRowNum ()+ \" \" + \n            row.getCell(0).getDateCellValue());\n    }\n}\n</code></pre>\n\n<p>The output is </p>\n\n<pre><code>Row No.: 0 39281.0\nRow No.: 0 Wed Jul 18 00:00:00 IST 2007\nRow No.: 1 39491.0\nRow No.: 1 Wed Feb 13 00:00:00 IST 2008\nRow No.: 2 39311.0\nRow No.: 2 Fri Aug 17 00:00:00 IST 2007\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4171026,"reputation":545,"user_id":3418782,"accept_rate":74,"display_name":"Chintan"},"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1487768586,"creation_date":1487768586,"answer_id":42392277,"question_id":3148535,"body_markdown":"Yes, I understood your problem.\r\nIf is difficult to identify cell has Numeric or Data value.\r\n\r\nIf you want data in format that shows in Excel, you just need to format cell using DataFormatter class.\r\n\r\n    DataFormatter dataFormatter = new DataFormatter();\r\n    String cellStringValue = dataFormatter.formatCellValue(row.getCell(0));\r\n    System.out.println (&quot;Is shows data as show in Excel file&quot; + cellStringValue);  // Here it automcatically format data based on that cell format.\r\n    // No need for extra efforts \r\n\r\n\r\n\r\n","title":"How to read Excel cell having Date with Apache POI?","body":"<p>Yes, I understood your problem.\nIf is difficult to identify cell has Numeric or Data value.</p>\n\n<p>If you want data in format that shows in Excel, you just need to format cell using DataFormatter class.</p>\n\n<pre><code>DataFormatter dataFormatter = new DataFormatter();\nString cellStringValue = dataFormatter.formatCellValue(row.getCell(0));\nSystem.out.println (\"Is shows data as show in Excel file\" + cellStringValue);  // Here it automcatically format data based on that cell format.\n// No need for extra efforts \n</code></pre>\n"},{"tags":[],"owner":{"account_id":10596971,"reputation":1,"user_id":7805296,"display_name":"Abhishek Mishra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1527856565,"creation_date":1527856565,"answer_id":50643590,"question_id":3148535,"body_markdown":"You can use CellDateFormatter to fetch the Date in the same format as in excel cell. See the following code:\r\n\r\n    CellValue cv = formulaEv.evaluate(cell);\r\n\tdouble dv = cv.getNumberValue();\r\n\tif (HSSFDateUtil.isCellDateFormatted(cell)) {\r\n\t    Date date = HSSFDateUtil.getJavaDate(dv);\r\n\r\n\t    String df = cell.getCellStyle().getDataFormatString();\r\n\t    \r\n\t    strValue = new CellDateFormatter(df).format(date); \r\n\t}\r\n","title":"How to read Excel cell having Date with Apache POI?","body":"<p>You can use CellDateFormatter to fetch the Date in the same format as in excel cell. See the following code:</p>\n\n<pre><code>CellValue cv = formulaEv.evaluate(cell);\ndouble dv = cv.getNumberValue();\nif (HSSFDateUtil.isCellDateFormatted(cell)) {\n    Date date = HSSFDateUtil.getJavaDate(dv);\n\n    String df = cell.getCellStyle().getDataFormatString();\n\n    strValue = new CellDateFormatter(df).format(date); \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1515927,"reputation":257,"user_id":1416932,"display_name":"user1416932"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1559148824,"creation_date":1559148824,"answer_id":56365310,"question_id":3148535,"body_markdown":"If you know the cell number, then i would recommend using getDateCellValue() method\r\nHere&#39;s an example for the same that worked for me - \r\njava.util.Date date  = row.getCell(&lt;cell number&gt;).getDateCellValue();\r\nSystem.out.println(date);\r\n","title":"How to read Excel cell having Date with Apache POI?","body":"<p>If you know the cell number, then i would recommend using getDateCellValue() method\nHere's an example for the same that worked for me - \njava.util.Date date  = row.getCell().getDateCellValue();\nSystem.out.println(date);</p>\n"},{"tags":[],"owner":{"account_id":101108,"reputation":13957,"user_id":272180,"accept_rate":62,"display_name":"yglodt"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1563045551,"creation_date":1563045551,"answer_id":57022137,"question_id":3148535,"body_markdown":"For reading date cells this method has proven to be robust so far:\r\n\r\n\r\n\tprivate LocalDate readCellAsDate(final Row row, final int pos) {\r\n\t\tif (pos == -1) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tfinal Cell cell = row.getCell(pos - 1);\r\n\t\tif (cell != null) {\r\n\t\t\tcell.setCellType(CellType.NUMERIC);\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (DateUtil.isCellDateFormatted(cell)) {\r\n\t\t\ttry {\r\n\t\t\t\treturn cell.getDateCellValue().toInstant().atZone(ZoneId.systemDefault()).toLocalDate();\r\n\t\t\t} catch (final NullPointerException e) {\r\n\t\t\t\tlogger.error(e.getMessage());\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}","title":"How to read Excel cell having Date with Apache POI?","body":"<p>For reading date cells this method has proven to be robust so far:</p>\n\n<pre><code>private LocalDate readCellAsDate(final Row row, final int pos) {\n    if (pos == -1) {\n        return null;\n    }\n    final Cell cell = row.getCell(pos - 1);\n    if (cell != null) {\n        cell.setCellType(CellType.NUMERIC);\n    } else {\n        return null;\n    }\n    if (DateUtil.isCellDateFormatted(cell)) {\n        try {\n            return cell.getDateCellValue().toInstant().atZone(ZoneId.systemDefault()).toLocalDate();\n        } catch (final NullPointerException e) {\n            logger.error(e.getMessage());\n            return null;\n        }\n    }\n    return null;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12568477,"reputation":1871,"user_id":9143443,"display_name":"superup"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1585227406,"creation_date":1585225566,"answer_id":60867227,"question_id":3148535,"body_markdown":"Try this code.\r\n\r\n    XSSFWorkbook workbook = new XSSFWorkbook(new File(result));\r\n\t\tXSSFSheet sheet = workbook.getSheetAt(0);\r\n\r\n\t\t// Iterate through each rows one by one\r\n\t\tIterator&lt;Row&gt; rowIterator = sheet.iterator();\r\n\t\twhile (rowIterator.hasNext()) {\r\n\t\t\tRow row = rowIterator.next();\r\n\t\t\t// For each row, iterate through all the columns\r\n\t\t\tIterator&lt;Cell&gt; cellIterator = row.cellIterator();\r\n\r\n\t\t\twhile (cellIterator.hasNext()) {\r\n\t\t\t\tCell cell = cellIterator.next();\r\n\t\t\t\tswitch (cell.getCellType()) {\r\n\t\t\t\tcase Cell.CELL_TYPE_NUMERIC:\r\n\t\t\t\t\tif (cell.getNumericCellValue() != 0) {\r\n                        //Get date\r\n\t\t\t\t\t\tDate date = row.getCell(0).getDateCellValue();\r\n\r\n\r\n\r\n                        //Get datetime\r\n                        cell.getDateCellValue()\r\n\r\n\r\n\t\t\t\t\t\tSystem.out.println(date.getTime());\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\nHope is help.","title":"How to read Excel cell having Date with Apache POI?","body":"<p>Try this code.</p>\n\n<pre><code>XSSFWorkbook workbook = new XSSFWorkbook(new File(result));\n    XSSFSheet sheet = workbook.getSheetAt(0);\n\n    // Iterate through each rows one by one\n    Iterator&lt;Row&gt; rowIterator = sheet.iterator();\n    while (rowIterator.hasNext()) {\n        Row row = rowIterator.next();\n        // For each row, iterate through all the columns\n        Iterator&lt;Cell&gt; cellIterator = row.cellIterator();\n\n        while (cellIterator.hasNext()) {\n            Cell cell = cellIterator.next();\n            switch (cell.getCellType()) {\n            case Cell.CELL_TYPE_NUMERIC:\n                if (cell.getNumericCellValue() != 0) {\n                    //Get date\n                    Date date = row.getCell(0).getDateCellValue();\n\n\n\n                    //Get datetime\n                    cell.getDateCellValue()\n\n\n                    System.out.println(date.getTime());\n                }\n                break;\n            }\n        }\n    }\n</code></pre>\n\n<p>Hope is help.</p>\n"},{"tags":[],"owner":{"account_id":19367747,"reputation":131,"user_id":14161626,"display_name":"Kiruthika Velusamy"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1598337034,"creation_date":1598337034,"answer_id":63573176,"question_id":3148535,"body_markdown":"    import java.text.DateFormat;\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.Date;\r\n    import org.apache.poi.ss.usermodel.Cell;\r\n    import org.apache.poi.ss.usermodel.Row;\r\n    import org.apache.poi.ss.usermodel.CellType;\r\n    import org.apache.poi.hssf.usermodel.HSSFDateUtil;\r\n    \r\n    \r\n    Row row = sheet.getRow(0);\r\n    Cell cell = row.getCell(0);\r\n    if(cell.getCellTypeEnum() == CellType.NUMERIC||cell.getCellTypeEnum() == CellType.FORMULA)\r\n       {\r\n        \r\n    \r\n     String cellValue=String.valueOf(cell.getNumericCellValue());\r\n         if(HSSFDateUtil.isCellDateFormatted(cell))\r\n          {\r\n              DateFormat df = new SimpleDateFormat(&quot;MM/dd/yyyy&quot;);\r\n              Date date = cell.getDateCellValue();\r\n              cellValue = df.format(date);\r\n           }\r\n              System.out.println(cellValue);\r\n        }","title":"How to read Excel cell having Date with Apache POI?","body":"<pre><code>import java.text.DateFormat;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\nimport org.apache.poi.ss.usermodel.Cell;\nimport org.apache.poi.ss.usermodel.Row;\nimport org.apache.poi.ss.usermodel.CellType;\nimport org.apache.poi.hssf.usermodel.HSSFDateUtil;\n\n\nRow row = sheet.getRow(0);\nCell cell = row.getCell(0);\nif(cell.getCellTypeEnum() == CellType.NUMERIC||cell.getCellTypeEnum() == CellType.FORMULA)\n   {\n    \n\n String cellValue=String.valueOf(cell.getNumericCellValue());\n     if(HSSFDateUtil.isCellDateFormatted(cell))\n      {\n          DateFormat df = new SimpleDateFormat(&quot;MM/dd/yyyy&quot;);\n          Date date = cell.getDateCellValue();\n          cellValue = df.format(date);\n       }\n          System.out.println(cellValue);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8525069,"reputation":41,"user_id":6390758,"display_name":"Brian Green"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1661168092,"creation_date":1661168092,"answer_id":73444434,"question_id":3148535,"body_markdown":"Apache Poi has a DateUtil.isCellDateFormatted(XSSFCell) it works great.\r\n\r\n````\r\nObject objData = switch (cell.getCellType()){\r\n   case NUMERIC -&gt;{\r\n      if(DateUtil.isCellDateFormatted(cell)){\r\n         yield cell.getDateCellValue();\r\n      }else{\r\n         yield cell.getNumericCellValue();\r\n      }\r\n  } //The rest of the cellTypes need to be implemented.\r\n}\r\n````\r\nobjData can now be tested for Date or Double.","title":"How to read Excel cell having Date with Apache POI?","body":"<p>Apache Poi has a DateUtil.isCellDateFormatted(XSSFCell) it works great.</p>\n<pre><code>Object objData = switch (cell.getCellType()){\n   case NUMERIC -&gt;{\n      if(DateUtil.isCellDateFormatted(cell)){\n         yield cell.getDateCellValue();\n      }else{\n         yield cell.getNumericCellValue();\n      }\n  } //The rest of the cellTypes need to be implemented.\n}\n</code></pre>\n<p>objData can now be tested for Date or Double.</p>\n"},{"tags":[],"owner":{"account_id":22068335,"reputation":11,"user_id":16329787,"display_name":"Martha Andrade"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691257985,"creation_date":1691257985,"answer_id":76842872,"question_id":3148535,"body_markdown":"     public void readExcel() {\r\n            try {\r\n                String path = String.valueOf(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS));\r\n                File file = new File(path + &quot;/myexcelsheet.xlsx&quot;);\r\n                FileInputStream fileInputStream = new FileInputStream(file);\r\n                XSSFWorkbook wb = new XSSFWorkbook(fileInputStream);\r\n                XSSFSheet sheet = wb.getSheetAt(0);\r\n    \r\n                Iterator&lt;Row&gt; rowIter = sheet.iterator();\r\n                int rowno = 1;\r\n                if (rowno !=0){\r\n                    while (rowIter.hasNext()) {\r\n                        Row row = rowIter.next();\r\n                        Iterator&lt;Cell&gt; cellIterator = row.cellIterator();\r\n                        textView4.append(&quot;\\n&quot;);\r\n                        for (int i = 0; i &lt; row.getRowNum(); i++) {\r\n                            while (cellIterator.hasNext()) {\r\n                                Cell cell = cellIterator.next();\r\n                                switch (cell.getCellType()) {\r\n                                    case Cell.CELL_TYPE_STRING:    //field that represents string cell type\r\n                                        textView4.append(cell.getStringCellValue() + &quot;&quot; + &quot;\\t\\t&quot; + &quot;&quot;);\r\n    \r\n                                    break;\r\n                                    case Cell.CELL_TYPE_NUMERIC:    //field that represents number cell type\r\n                                        if (DateUtil.isCellDateFormatted(cell)){\r\n                                            DateFormat dateFormat = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n                                            Date date = cell.getDateCellValue();\r\n                                            textView4.append(dateFormat.format(date) + &quot;&quot; + &quot;\\t\\t&quot; + &quot;&quot;);\r\n                                        }else{\r\n                                            textView4.append(cell.getNumericCellValue() + &quot;&quot; + &quot;\\t\\t&quot; + &quot;&quot;);\r\n                                        }\r\n                                    break;\r\n                                }\r\n                                textView4.append(&quot;&quot;);\r\n                            }\r\n                            i++;\r\n                        }\r\n                    }\r\n                }\r\n            } catch (FileNotFoundException e) {\r\n                throw new RuntimeException(e);\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }","title":"How to read Excel cell having Date with Apache POI?","body":"<pre><code> public void readExcel() {\n        try {\n            String path = String.valueOf(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS));\n            File file = new File(path + &quot;/myexcelsheet.xlsx&quot;);\n            FileInputStream fileInputStream = new FileInputStream(file);\n            XSSFWorkbook wb = new XSSFWorkbook(fileInputStream);\n            XSSFSheet sheet = wb.getSheetAt(0);\n\n            Iterator&lt;Row&gt; rowIter = sheet.iterator();\n            int rowno = 1;\n            if (rowno !=0){\n                while (rowIter.hasNext()) {\n                    Row row = rowIter.next();\n                    Iterator&lt;Cell&gt; cellIterator = row.cellIterator();\n                    textView4.append(&quot;\\n&quot;);\n                    for (int i = 0; i &lt; row.getRowNum(); i++) {\n                        while (cellIterator.hasNext()) {\n                            Cell cell = cellIterator.next();\n                            switch (cell.getCellType()) {\n                                case Cell.CELL_TYPE_STRING:    //field that represents string cell type\n                                    textView4.append(cell.getStringCellValue() + &quot;&quot; + &quot;\\t\\t&quot; + &quot;&quot;);\n\n                                break;\n                                case Cell.CELL_TYPE_NUMERIC:    //field that represents number cell type\n                                    if (DateUtil.isCellDateFormatted(cell)){\n                                        DateFormat dateFormat = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\n                                        Date date = cell.getDateCellValue();\n                                        textView4.append(dateFormat.format(date) + &quot;&quot; + &quot;\\t\\t&quot; + &quot;&quot;);\n                                    }else{\n                                        textView4.append(cell.getNumericCellValue() + &quot;&quot; + &quot;\\t\\t&quot; + &quot;&quot;);\n                                    }\n                                break;\n                            }\n                            textView4.append(&quot;&quot;);\n                        }\n                        i++;\n                    }\n                }\n            }\n        } catch (FileNotFoundException e) {\n            throw new RuntimeException(e);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":158850,"reputation":2614,"user_id":377775,"accept_rate":93,"display_name":"Venkat"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":204832,"favorite_count":0,"down_vote_count":0,"up_vote_count":89,"accepted_answer_id":3148849,"answer_count":10,"score":89,"last_activity_date":1691257985,"creation_date":1277895538,"question_id":3148535,"body_markdown":"I&#39;m using Apache POI 3.6, I want to read an excel file which has a date like this `8/23/1991`.\r\n\r\n\r\n     switch (cell.getCellType()) {\r\n    \r\n       ...\r\n       ...\r\n    \r\n       case HSSFCell.CELL_TYPE_NUMERIC:\r\n         value = &quot;NUMERIC value=&quot; + cell.getNumericCellValue();\r\n         break;\r\n    \r\n       ...\r\n    \r\n     }\r\n\r\nBut it takes the numeric value type and returns the value like this `33473.0`.\r\n\r\nI&#39;ve tried to use Numeric Cell Type although with no luck.\r\n\r\n     \r\n    dbltemp=row.getCell(c, Row.CREATE_NULL_AS_BLANK).getNumericCellValue();\r\n\r\n    if (c == 6 || c == 9) {\r\n        strTemp= new String(dbltemp.toString().trim());\r\n    \r\n        long tempDate = Long.parseLong(strTemp);\r\n        Date date = new Date(tempDate);\r\n    \r\n        strVal = date.toString();\r\n    }\r\n    \r\n\r\nHow can I fix my problem? \r\n\r\n","title":"How to read Excel cell having Date with Apache POI?","body":"<p>I'm using Apache POI 3.6, I want to read an excel file which has a date like this <code>8/23/1991</code>.</p>\n\n<pre><code> switch (cell.getCellType()) {\n\n   ...\n   ...\n\n   case HSSFCell.CELL_TYPE_NUMERIC:\n     value = \"NUMERIC value=\" + cell.getNumericCellValue();\n     break;\n\n   ...\n\n }\n</code></pre>\n\n<p>But it takes the numeric value type and returns the value like this <code>33473.0</code>.</p>\n\n<p>I've tried to use Numeric Cell Type although with no luck.</p>\n\n<pre><code>dbltemp=row.getCell(c, Row.CREATE_NULL_AS_BLANK).getNumericCellValue();\n\nif (c == 6 || c == 9) {\n    strTemp= new String(dbltemp.toString().trim());\n\n    long tempDate = Long.parseLong(strTemp);\n    Date date = new Date(tempDate);\n\n    strVal = date.toString();\n}\n</code></pre>\n\n<p>How can I fix my problem? </p>\n"},{"tags":["java","android","web-services","android-asynctask"],"comments":[{"owner":{"account_id":2259278,"reputation":13510,"user_id":1989739,"display_name":"Apoorv"},"score":31,"creation_date":1384339132,"post_id":19951466,"comment_id":29693965,"body_markdown":"Are you connected to the Internet?","body":"Are you connected to the Internet?"},{"owner":{"account_id":2063229,"reputation":29168,"user_id":1839336,"accept_rate":68,"display_name":"GrIsHu"},"score":0,"creation_date":1384339399,"post_id":19951466,"comment_id":29694125,"body_markdown":"Do you get the response printed in your log ?","body":"Do you get the response printed in your log ?"},{"owner":{"account_id":2432840,"reputation":1469,"user_id":2123394,"accept_rate":57,"display_name":"Reshma"},"score":0,"creation_date":1384343099,"post_id":19951466,"comment_id":29696127,"body_markdown":"Yes, I have checked for internet connection.","body":"Yes, I have checked for internet connection."},{"owner":{"display_name":"user180100"},"score":1,"creation_date":1384345142,"post_id":19951466,"comment_id":29697301,"body_markdown":"Check if the phone can access this url (in the browser for exemple)","body":"Check if the phone can access this url (in the browser for exemple)"},{"owner":{"account_id":5205691,"reputation":325,"user_id":4163717,"accept_rate":71,"display_name":"JPerk"},"score":1,"creation_date":1532089336,"post_id":19951466,"comment_id":89854694,"body_markdown":"Do not try with simulator, I have had the same issue. And I have spent 1 day trying to figure it out. Finally, my solution was to use a real android device for testing.","body":"Do not try with simulator, I have had the same issue. And I have spent 1 day trying to figure it out. Finally, my solution was to use a real android device for testing."},{"owner":{"account_id":3782808,"reputation":1148,"user_id":3141738,"display_name":"Arpit J."},"score":0,"creation_date":1633761252,"post_id":19951466,"comment_id":122850996,"body_markdown":"all these answers are bad seriously!!. For poor connectivity use-cases, UnknownHostException is thrown no matter what while being on the mobile network. Response just doesn&#39;t come and you should just timeout the request for handling such cases.","body":"all these answers are bad seriously!!. For poor connectivity use-cases, UnknownHostException is thrown no matter what while being on the mobile network. Response just doesn&#39;t come and you should just timeout the request for handling such cases."}],"answers":[{"tags":[],"owner":{"account_id":2106344,"reputation":3500,"user_id":1872596,"accept_rate":30,"display_name":"RxRead"},"down_vote_count":2,"up_vote_count":297,"is_accepted":true,"score":295,"last_activity_date":1671702663,"creation_date":1385696014,"answer_id":20277925,"question_id":19951466,"body_markdown":"I encountered this problem too, reconnecting the WiFi can solve this.\r\n\r\nFor us ,we can check if the phone can resolve the host to IP when we start application. If it cannot resolve, tell the user to check the WiFi and then exit.","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>I encountered this problem too, reconnecting the WiFi can solve this.</p>\n<p>For us ,we can check if the phone can resolve the host to IP when we start application. If it cannot resolve, tell the user to check the WiFi and then exit.</p>\n"},{"tags":[],"owner":{"account_id":2856984,"reputation":492,"user_id":3515643,"display_name":"adubey"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1414535988,"creation_date":1398577423,"answer_id":23319855,"question_id":19951466,"body_markdown":"I got the same error and the issue was that I was on VPN and I didn&#39;t realize it. After disconnecting from the VPN and reconnecting to my WIFI network, the problem was resolved.","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>I got the same error and the issue was that I was on VPN and I didn't realize it. After disconnecting from the VPN and reconnecting to my WIFI network, the problem was resolved.</p>\n"},{"tags":[],"owner":{"account_id":463980,"reputation":6162,"user_id":867206,"accept_rate":14,"display_name":"Ajay Takur"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1439271139,"creation_date":1439271139,"answer_id":31933881,"question_id":19951466,"body_markdown":"Missed to configure tag in manifest file\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>Missed to configure tag in manifest file</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1946153,"reputation":2027,"user_id":1751266,"accept_rate":100,"display_name":"CMash"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1456948460,"creation_date":1456948460,"answer_id":35756838,"question_id":19951466,"body_markdown":"I had the same exception in the simulator (Android Studio on OSX) but connecting to the same URL on the iOS simulator worked fine... Looks like it all stemmed from the fact I&#39;d be running the simulator whilst connected to a personal hotspot for my internet connection and then came back later while connected to wifi and the simulator didn&#39;t like the new internet connection for some reason, seems like it thought the old hotspot was the current connection, which was no longer working..\r\n\r\nClosing and relaunching the simulator worked!","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>I had the same exception in the simulator (Android Studio on OSX) but connecting to the same URL on the iOS simulator worked fine... Looks like it all stemmed from the fact I'd be running the simulator whilst connected to a personal hotspot for my internet connection and then came back later while connected to wifi and the simulator didn't like the new internet connection for some reason, seems like it thought the old hotspot was the current connection, which was no longer working..</p>\n\n<p>Closing and relaunching the simulator worked!</p>\n"},{"tags":[],"owner":{"account_id":4391605,"reputation":5187,"user_id":3579786,"display_name":"Jiyeh"},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1467602842,"creation_date":1467602842,"answer_id":38176547,"question_id":19951466,"body_markdown":"If reconnecting the WiFi doesn&#39;t work for you, try reboot your device.\r\n\r\nThis works for me. Hope it helps.\r\n","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>If reconnecting the WiFi doesn't work for you, try reboot your device.</p>\n\n<p>This works for me. Hope it helps.</p>\n"},{"tags":[],"owner":{"account_id":10209573,"reputation":51,"user_id":7537168,"display_name":"A. Sullivan"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1486653880,"creation_date":1486653880,"answer_id":42140573,"question_id":19951466,"body_markdown":"I encountered this error when running my Android app on my home WiFi, then trying to run it on different WiFi without closing my simulator.\r\n\r\nSimply closing the simulator and re-launching the app worked for me!","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>I encountered this error when running my Android app on my home WiFi, then trying to run it on different WiFi without closing my simulator.</p>\n\n<p>Simply closing the simulator and re-launching the app worked for me!</p>\n"},{"tags":[],"owner":{"account_id":9084669,"reputation":21,"user_id":6763199,"display_name":"Hern&#225;n Daniel Pi&#241;a Landinez"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1552539824,"creation_date":1552539824,"answer_id":55155282,"question_id":19951466,"body_markdown":"I was testing my application with the Android emulator and I solved this by turning off and turning on the Wi-Fi on the Android emulator device! It worked perfectly.","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>I was testing my application with the Android emulator and I solved this by turning off and turning on the Wi-Fi on the Android emulator device! It worked perfectly.</p>\n"},{"tags":[],"owner":{"account_id":17312343,"reputation":198,"user_id":12539611,"display_name":"Ashandra Singh"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1577738772,"creation_date":1577738772,"answer_id":59536671,"question_id":19951466,"body_markdown":"I had the same problem.\r\njava.net.UnknownHostException: Unable to resolve host “&lt;url&gt;”...\r\n\r\nI&#39;m running Visual Studio 2019 and Xamarin.\r\n\r\nI also switched back to my WiFi but was on a hot spot.\r\n\r\nI solved this by clean swiping the emulator.  Restore to factory settings.  Then re-running visual studio xamarin app which wil redeploy your app again to the fresh emulator.\r\n\r\nIt worked.  I thought I was going to battle for days to solve this.  Luckily this post pointed me in the right direction.\r\n\r\nI could not understand how it worked perfectly before and then stopped with no code change.\r\n\r\nThis is my code for reference:\r\n\r\n    using var response = await httpClient.GetAsync(sb.ToString());\r\n    string apiResponse = await response.Content.ReadAsStringAsync();\r\n","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>I had the same problem.\njava.net.UnknownHostException: Unable to resolve host “”...</p>\n\n<p>I'm running Visual Studio 2019 and Xamarin.</p>\n\n<p>I also switched back to my WiFi but was on a hot spot.</p>\n\n<p>I solved this by clean swiping the emulator.  Restore to factory settings.  Then re-running visual studio xamarin app which wil redeploy your app again to the fresh emulator.</p>\n\n<p>It worked.  I thought I was going to battle for days to solve this.  Luckily this post pointed me in the right direction.</p>\n\n<p>I could not understand how it worked perfectly before and then stopped with no code change.</p>\n\n<p>This is my code for reference:</p>\n\n<pre><code>using var response = await httpClient.GetAsync(sb.ToString());\nstring apiResponse = await response.Content.ReadAsStringAsync();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3412902,"reputation":73,"user_id":2862475,"display_name":"Gabriel Guedes"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1578257245,"creation_date":1578257245,"answer_id":59604060,"question_id":19951466,"body_markdown":"I was having the same issue, but with Glide. When I was going to disconnect from wifi and reconnect (just like it was suggested here), I noticed that I was in Airplane mode &#129318;‍♂️","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>I was having the same issue, but with Glide. When I was going to disconnect from wifi and reconnect (just like it was suggested here), I noticed that I was in Airplane mode 🤦‍♂️</p>\n"},{"tags":[],"owner":{"account_id":2360323,"reputation":1,"user_id":2082723,"accept_rate":69,"display_name":"Vettiyanakan"},"down_vote_count":6,"up_vote_count":3,"is_accepted":false,"score":-3,"last_activity_date":1585024706,"creation_date":1585024706,"answer_id":60825052,"question_id":19951466,"body_markdown":"I had this issue on Android 10,\r\n\r\nChanged `targetSdkVersion 29` to `targetSdkVersion 28` issue resolved. Not sure what is the actual problem.\r\n\r\nI think not a good practice, but it worked.\r\n\r\n***before:***\r\n\r\n`compileSdkVersion 29`\r\n\r\n`minSdkVersion 14`\r\n\r\n`targetSdkVersion 29`\r\n\r\n***Now:***\r\n\r\n`compileSdkVersion 29`\r\n\r\n`minSdkVersion 14`\r\n\r\n`targetSdkVersion 28`\r\n\r\n","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>I had this issue on Android 10,</p>\n\n<p>Changed <code>targetSdkVersion 29</code> to <code>targetSdkVersion 28</code> issue resolved. Not sure what is the actual problem.</p>\n\n<p>I think not a good practice, but it worked.</p>\n\n<p><strong><em>before:</em></strong></p>\n\n<p><code>compileSdkVersion 29</code></p>\n\n<p><code>minSdkVersion 14</code></p>\n\n<p><code>targetSdkVersion 29</code></p>\n\n<p><strong><em>Now:</em></strong></p>\n\n<p><code>compileSdkVersion 29</code></p>\n\n<p><code>minSdkVersion 14</code></p>\n\n<p><code>targetSdkVersion 28</code></p>\n"},{"tags":[],"owner":{"account_id":7537149,"reputation":177,"user_id":5723052,"display_name":"Boris Veriga"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1586344694,"creation_date":1586344694,"answer_id":61099415,"question_id":19951466,"body_markdown":"I had the same problem, but with small difference. I had added NetworkConnectionCallback to check situation when internet connection had changed at runtime, and checking like this before sending all requests:\r\n\r\n    private fun isConnected(): Boolean {\r\n        val activeNetwork = cManager.activeNetworkInfo\r\n        return activeNetwork != null &amp;&amp; activeNetwork.isConnected\r\n    }\r\n\r\nThere can be state like CONNECTING (you can see iе when you turn on wifi, icon starts blinking, after connecting to network, image is static).\r\nSo, we have two different states: one CONNECT another CONNECTING, and when Retrofit tried to send request internet connection is disabled and it throws UnknownHostException. \r\nI forgot to add another type of exception in function which was responsible for sending requests.\r\n\r\n    try{\r\n    //for example, retrofit call\r\n    }\r\n    catch (e: Exception) {\r\n            is UnknownHostException -&gt; &quot;Unknown host!&quot;\r\n            is ConnectException -&gt; &quot;No internet!&quot;\r\n            else -&gt; &quot;Unknown exception!&quot;\r\n        }\r\n\r\nIt&#39;s just a tricky moment that can by related with this problem.\r\n\r\nHope, I will help somebody)\r\n","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>I had the same problem, but with small difference. I had added NetworkConnectionCallback to check situation when internet connection had changed at runtime, and checking like this before sending all requests:</p>\n\n<pre><code>private fun isConnected(): Boolean {\n    val activeNetwork = cManager.activeNetworkInfo\n    return activeNetwork != null &amp;&amp; activeNetwork.isConnected\n}\n</code></pre>\n\n<p>There can be state like CONNECTING (you can see iе when you turn on wifi, icon starts blinking, after connecting to network, image is static).\nSo, we have two different states: one CONNECT another CONNECTING, and when Retrofit tried to send request internet connection is disabled and it throws UnknownHostException. \nI forgot to add another type of exception in function which was responsible for sending requests.</p>\n\n<pre><code>try{\n//for example, retrofit call\n}\ncatch (e: Exception) {\n        is UnknownHostException -&gt; \"Unknown host!\"\n        is ConnectException -&gt; \"No internet!\"\n        else -&gt; \"Unknown exception!\"\n    }\n</code></pre>\n\n<p>It's just a tricky moment that can by related with this problem.</p>\n\n<p>Hope, I will help somebody)</p>\n"},{"tags":[],"owner":{"account_id":12725858,"reputation":33,"user_id":9244455,"display_name":"wise4rmgod"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634831413,"creation_date":1634831413,"answer_id":69665068,"question_id":19951466,"body_markdown":"I encountered this problem\r\nand the solution I did was to reboot my android device or emulator.\r\nit solved the issue for me.","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>I encountered this problem\nand the solution I did was to reboot my android device or emulator.\nit solved the issue for me.</p>\n"},{"tags":[],"owner":{"account_id":21537633,"reputation":31,"user_id":15875916,"display_name":"Yogesh Pathania"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691257281,"creation_date":1691257281,"answer_id":76842829,"question_id":19951466,"body_markdown":"You have to add the permission on the top in the manifest section\r\n\r\n      &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>You have to add the permission on the top in the manifest section</p>\n<pre><code>  &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n</code></pre>\n"}],"owner":{"account_id":2432840,"reputation":1469,"user_id":2123394,"accept_rate":57,"display_name":"Reshma"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":255350,"favorite_count":0,"down_vote_count":2,"up_vote_count":132,"accepted_answer_id":20277925,"answer_count":13,"score":130,"last_activity_date":1691257281,"creation_date":1384338988,"question_id":19951466,"body_markdown":"I&#39;ve created an app that loads a question from my web services, and it works fine. But, sometimes it crashes and I do not get the reason why this is happening, especially because I have also given it the required permissions. It works fine, but at random, it crashes and gives me this report.\r\n\r\n    private void sendContinentQuestions(int id) {\r\n\t\t// TODO Auto-generated method stub\r\n\r\n\t\t//Get the data (see above)\r\n\t\tJSONArray json = getJSONfromURL(id);\r\n\t\t\ttry{\r\n\t\t\t\tfor(int i=0; i &lt; json.length(); i++) {\r\n\t\t\t\t\tHashMap&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();\r\n\t\t\t\t\tJSONObject jObject = json.getJSONObject(i);\r\n\t\t\t\t\tlongitude&quot;:&quot;72.5660200&quot;\r\n\t\t\t\t\tString category_id = jObject.getString(&quot;category_id&quot;);\r\n\t\t\t\t\tString question_id = jObject.getString(&quot;question_id&quot;);\r\n\t\t\t\t\tString question_name = jObject.getString(&quot;question_name&quot;);\r\n\t\t\t\t\tString latitude = jObject.getString(&quot;latitude&quot;);\r\n\t\t\t\t\tString longitude = jObject.getString(&quot;longitude&quot;);\r\n\t\t\t\t\tString answer = jObject.getString(&quot;answer&quot;);\r\n\t\t\t\t\tString ansLatLng = latitude+&quot;|&quot;+longitude ; \r\n\t\t\t\t\tLog.v(&quot;## data:: ###&quot;,question_id+&quot;--&quot;+question_name+&quot;-cat id-&quot;+category_id+&quot;--ansLatLng &quot;+ansLatLng+&quot; answer: &quot;+answer);\r\n\r\n\t\t\t\t\tall_question.add(new QuestionData(game_id,category_id,question_id,question_name,ansLatLng,answer));\r\n\t\t\t\t}\r\n\t\t\t}catch(JSONException e)        {\r\n\t\t\t\tLog.e(&quot;log_tag&quot;, &quot;Error parsing data &quot;+e.toString());\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\r\n\t}\r\n     public JSONArray getJSONfromURL(int id){\r\n\r\n\t\tString response = &quot;&quot;;\r\n\t\tURL url;\r\n\t\ttry {\r\n\t\t\turl = new URL(Consts.GET_URL+&quot;index.php/Api/getQuestion?cat_id=&quot;+id);\r\n\t\t\tHttpURLConnection http = (HttpURLConnection) url.openConnection();\r\n\t\t\thttp.setRequestMethod(&quot;POST&quot;);\r\n\t\t\tInputStream is = http.getInputStream();\r\n\t\t\tBufferedReader br = new BufferedReader(new InputStreamReader(is));\r\n\t\t\tresponse = br.readLine();\r\n\t\t\tLog.v(&quot;###Response :: ###&quot;,response);\r\n\t\t\thttp.disconnect();\r\n\t\t} catch (MalformedURLException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}catch (ProtocolException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace(); \r\n\t\t} catch (IOException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t} \r\n\t\t//try parse the string to a JSON object\r\n\t\tJSONArray jArray = null;\r\n\t\ttry{\r\n\r\n\t\t\tjArray = new JSONArray(response);\r\n\r\n\t\t}catch(JSONException e){\r\n\t\t\tLog.e(&quot;log_tag&quot;, &quot;Error parsing data &quot;+e.toString());\r\n\t\t}\r\n\r\n\t\treturn jArray;\r\n\t}\r\n\r\n-------------------------------\r\n\r\n    11-13 15:02:52.307: W/System.err(8012): java.net.UnknownHostException: Unable to resolve host &quot;www.xyz.com&quot;: No address associated with hostname\r\n    11-13 15:02:52.317: W/System.err(8012): \tat java.net.InetAddress.lookupHostByName(InetAddress.java:424)\r\n    11-13 15:02:52.317: W/System.err(8012): \tat java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)\r\n    11-13 15:02:52.317: W/System.err(8012): \tat java.net.InetAddress.getAllByName(InetAddress.java:214)\r\n    11-13 15:02:52.317: W/System.err(8012): \tat libcore.net.http.HttpConnection.&lt;init&gt;(HttpConnection.java:70)\r\n    11-13 15:02:52.317: W/System.err(8012): \tat libcore.net.http.HttpConnection.&lt;init&gt;(HttpConnection.java:50)\r\n    11-13 15:02:52.317: W/System.err(8012): \tat libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:340)\r\n    11-13 15:02:52.317: W/System.err(8012): \tat libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)\r\n    11-13 15:02:52.317: W/System.err(8012): \tat libcore.net.http.HttpConnection.connect(HttpConnection.java:128)\r\n    11-13 15:02:52.317: W/System.err(8012): \tat libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:316)\r\n    11-13 15:02:52.317: W/System.err(8012): \tat libcore.net.http.HttpEngine.connect(HttpEngine.java:311)\r\n    11-13 15:02:52.317: W/System.err(8012): \tat libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:290)\r\n    11-13 15:02:52.317: W/System.err(8012): \tat libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:240)\r\n    11-13 15:02:52.317: W/System.err(8012): \tat libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:282)\r\n    11-13 15:02:52.317: W/System.err(8012): \tat libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:177)\r\n    11-13 15:02:52.327: W/System.err(8012): \tat com.abc.xyz.ContinentActivity.getJSONfromURL(ContinentActivity.java:400)\r\n    11-13 15:02:52.327: W/System.err(8012): \tat com.abc.xyz.ContinentActivity.sendContinentQuestions(ContinentActivity.java:327)\r\n    11-13 15:02:52.327: W/System.err(8012): \tat com.abc.xyz.ContinentActivity.access$2(ContinentActivity.java:323)\r\n    11-13 15:02:52.327: W/System.err(8012): \tat com.abc.xyz.ContinentActivity$LoadQuestions.doInBackground(ContinentActivity.java:254)\r\n    11-13 15:02:52.327: W/System.err(8012): \tat com.abc.xyz.ContinentActivity$LoadQuestions.doInBackground(ContinentActivity.java:1)\r\n    11-13 15:02:52.327: W/System.err(8012): \tat android.os.AsyncTask$2.call(AsyncTask.java:287)\r\n    11-13 15:02:52.327: W/System.err(8012): \tat java.util.concurrent.FutureTask.run(FutureTask.java:234)\r\n    11-13 15:02:52.327: W/System.err(8012): \tat android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)\r\n    11-13 15:02:52.327: W/System.err(8012): \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)\r\n    11-13 15:02:52.337: W/System.err(8012): \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)\r\n    11-13 15:02:52.337: W/System.err(8012): \tat java.lang.Thread.run(Thread.java:841)\r\n    11-13 15:02:52.337: W/System.err(8012): Caused by: libcore.io.GaiException: getaddrinfo failed: EAI_NODATA (No address associated with hostname)\r\n    11-13 15:02:52.337: W/System.err(8012): \tat libcore.io.Posix.getaddrinfo(Native Method)\r\n    11-13 15:02:52.337: W/System.err(8012): \tat libcore.io.ForwardingOs.getaddrinfo(ForwardingOs.java:61)\r\n    11-13 15:02:52.337: W/System.err(8012): \tat java.net.InetAddress.lookupHostByName(InetAddress.java:405)\r\n    11-13 15:02:52.337: W/System.err(8012): \t... 24 more\r\n    11-13 15:02:52.337: E/log_tag(8012): Error parsing data org.json.JSONException: End of input at character 0 of \r\n    11-13 15:02:52.337: W/dalvikvm(8012): threadid=194: thread exiting with uncaught exception (group=0x417c1700)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): FATAL EXCEPTION: AsyncTask #5\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): java.lang.RuntimeException: An error occured while executing doInBackground()\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat android.os.AsyncTask$3.done(AsyncTask.java:299)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat java.util.concurrent.FutureTask.setException(FutureTask.java:219)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat java.util.concurrent.FutureTask.run(FutureTask.java:239)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat java.lang.Thread.run(Thread.java:841)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): Caused by: java.lang.NullPointerException\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat com.abc.xyz.ContinentActivity.sendContinentQuestions(ContinentActivity.java:328)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat com.abc.xyz.ContinentActivity.access$2(ContinentActivity.java:323)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat com.abc.xyz.ContinentActivity$LoadQuestions.doInBackground(ContinentActivity.java:254)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat com.abc.xyz.ContinentActivity$LoadQuestions.doInBackground(ContinentActivity.java:1)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat android.os.AsyncTask$2.call(AsyncTask.java:287)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat java.util.concurrent.FutureTask.run(FutureTask.java:234)\r\n    \r\n        \r\n\r\n","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>I've created an app that loads a question from my web services, and it works fine. But, sometimes it crashes and I do not get the reason why this is happening, especially because I have also given it the required permissions. It works fine, but at random, it crashes and gives me this report.</p>\n\n<pre><code>private void sendContinentQuestions(int id) {\n    // TODO Auto-generated method stub\n\n    //Get the data (see above)\n    JSONArray json = getJSONfromURL(id);\n        try{\n            for(int i=0; i &lt; json.length(); i++) {\n                HashMap&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();\n                JSONObject jObject = json.getJSONObject(i);\n                longitude\":\"72.5660200\"\n                String category_id = jObject.getString(\"category_id\");\n                String question_id = jObject.getString(\"question_id\");\n                String question_name = jObject.getString(\"question_name\");\n                String latitude = jObject.getString(\"latitude\");\n                String longitude = jObject.getString(\"longitude\");\n                String answer = jObject.getString(\"answer\");\n                String ansLatLng = latitude+\"|\"+longitude ; \n                Log.v(\"## data:: ###\",question_id+\"--\"+question_name+\"-cat id-\"+category_id+\"--ansLatLng \"+ansLatLng+\" answer: \"+answer);\n\n                all_question.add(new QuestionData(game_id,category_id,question_id,question_name,ansLatLng,answer));\n            }\n        }catch(JSONException e)        {\n            Log.e(\"log_tag\", \"Error parsing data \"+e.toString());\n        }\n    }\n\n\n}\n public JSONArray getJSONfromURL(int id){\n\n    String response = \"\";\n    URL url;\n    try {\n        url = new URL(Consts.GET_URL+\"index.php/Api/getQuestion?cat_id=\"+id);\n        HttpURLConnection http = (HttpURLConnection) url.openConnection();\n        http.setRequestMethod(\"POST\");\n        InputStream is = http.getInputStream();\n        BufferedReader br = new BufferedReader(new InputStreamReader(is));\n        response = br.readLine();\n        Log.v(\"###Response :: ###\",response);\n        http.disconnect();\n    } catch (MalformedURLException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }catch (ProtocolException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace(); \n    } catch (IOException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } \n    //try parse the string to a JSON object\n    JSONArray jArray = null;\n    try{\n\n        jArray = new JSONArray(response);\n\n    }catch(JSONException e){\n        Log.e(\"log_tag\", \"Error parsing data \"+e.toString());\n    }\n\n    return jArray;\n}\n</code></pre>\n\n<hr>\n\n<pre><code>11-13 15:02:52.307: W/System.err(8012): java.net.UnknownHostException: Unable to resolve host \"www.xyz.com\": No address associated with hostname\n11-13 15:02:52.317: W/System.err(8012):     at java.net.InetAddress.lookupHostByName(InetAddress.java:424)\n11-13 15:02:52.317: W/System.err(8012):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)\n11-13 15:02:52.317: W/System.err(8012):     at java.net.InetAddress.getAllByName(InetAddress.java:214)\n11-13 15:02:52.317: W/System.err(8012):     at libcore.net.http.HttpConnection.&lt;init&gt;(HttpConnection.java:70)\n11-13 15:02:52.317: W/System.err(8012):     at libcore.net.http.HttpConnection.&lt;init&gt;(HttpConnection.java:50)\n11-13 15:02:52.317: W/System.err(8012):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:340)\n11-13 15:02:52.317: W/System.err(8012):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)\n11-13 15:02:52.317: W/System.err(8012):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)\n11-13 15:02:52.317: W/System.err(8012):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:316)\n11-13 15:02:52.317: W/System.err(8012):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:311)\n11-13 15:02:52.317: W/System.err(8012):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:290)\n11-13 15:02:52.317: W/System.err(8012):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:240)\n11-13 15:02:52.317: W/System.err(8012):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:282)\n11-13 15:02:52.317: W/System.err(8012):     at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:177)\n11-13 15:02:52.327: W/System.err(8012):     at com.abc.xyz.ContinentActivity.getJSONfromURL(ContinentActivity.java:400)\n11-13 15:02:52.327: W/System.err(8012):     at com.abc.xyz.ContinentActivity.sendContinentQuestions(ContinentActivity.java:327)\n11-13 15:02:52.327: W/System.err(8012):     at com.abc.xyz.ContinentActivity.access$2(ContinentActivity.java:323)\n11-13 15:02:52.327: W/System.err(8012):     at com.abc.xyz.ContinentActivity$LoadQuestions.doInBackground(ContinentActivity.java:254)\n11-13 15:02:52.327: W/System.err(8012):     at com.abc.xyz.ContinentActivity$LoadQuestions.doInBackground(ContinentActivity.java:1)\n11-13 15:02:52.327: W/System.err(8012):     at android.os.AsyncTask$2.call(AsyncTask.java:287)\n11-13 15:02:52.327: W/System.err(8012):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)\n11-13 15:02:52.327: W/System.err(8012):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)\n11-13 15:02:52.327: W/System.err(8012):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)\n11-13 15:02:52.337: W/System.err(8012):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)\n11-13 15:02:52.337: W/System.err(8012):     at java.lang.Thread.run(Thread.java:841)\n11-13 15:02:52.337: W/System.err(8012): Caused by: libcore.io.GaiException: getaddrinfo failed: EAI_NODATA (No address associated with hostname)\n11-13 15:02:52.337: W/System.err(8012):     at libcore.io.Posix.getaddrinfo(Native Method)\n11-13 15:02:52.337: W/System.err(8012):     at libcore.io.ForwardingOs.getaddrinfo(ForwardingOs.java:61)\n11-13 15:02:52.337: W/System.err(8012):     at java.net.InetAddress.lookupHostByName(InetAddress.java:405)\n11-13 15:02:52.337: W/System.err(8012):     ... 24 more\n11-13 15:02:52.337: E/log_tag(8012): Error parsing data org.json.JSONException: End of input at character 0 of \n11-13 15:02:52.337: W/dalvikvm(8012): threadid=194: thread exiting with uncaught exception (group=0x417c1700)\n11-13 15:02:52.337: E/AndroidRuntime(8012): FATAL EXCEPTION: AsyncTask #5\n11-13 15:02:52.337: E/AndroidRuntime(8012): java.lang.RuntimeException: An error occured while executing doInBackground()\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at android.os.AsyncTask$3.done(AsyncTask.java:299)\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at java.util.concurrent.FutureTask.setException(FutureTask.java:219)\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at java.util.concurrent.FutureTask.run(FutureTask.java:239)\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at java.lang.Thread.run(Thread.java:841)\n11-13 15:02:52.337: E/AndroidRuntime(8012): Caused by: java.lang.NullPointerException\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at com.abc.xyz.ContinentActivity.sendContinentQuestions(ContinentActivity.java:328)\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at com.abc.xyz.ContinentActivity.access$2(ContinentActivity.java:323)\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at com.abc.xyz.ContinentActivity$LoadQuestions.doInBackground(ContinentActivity.java:254)\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at com.abc.xyz.ContinentActivity$LoadQuestions.doInBackground(ContinentActivity.java:1)\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at android.os.AsyncTask$2.call(AsyncTask.java:287)\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)\n</code></pre>\n"},{"tags":["java","spring-webflux","reactive-programming","project-reactor"],"answers":[{"tags":[],"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691256233,"creation_date":1691256233,"answer_id":76842768,"question_id":76842708,"body_markdown":"Let&#39;s try to see when to use each:\r\n\r\n### For computationally expensive tasks\r\n\r\nIf your `computeStuff` fun is just computationally expensive and doesn&#39;t involve any I/O, you could use either `map` or `flatMap` based on how you manage threads. If you&#39;re okay with the operation running on the same thread (typically, the event loop), `map` is fine too. If you want to offload it to another thread, you&#39;ll need to wrap it in a `Mono.fromSupplier` and use `flatMap` instead, as the SOF answer suggested.\r\n\r\n### For I/O-bound or blocking tasks\r\nIf `computeStuff` does I/O or any blocking operation, you *definitely* should not use `map`. Instead, you may need to offload this to another thread. `flatMap` becomes useful here because you&#39;re typically returning a `Mono` or `Flux` which represents the result of an async operation.\r\n\r\n----------\r\n\r\nIn your example:\r\n\r\n```java\r\nfluxOfSomething.flatMap(value -&gt;\r\n    Mono.fromSupplier(\r\n        () -&gt; computeStuff(value)\r\n    ).subscribeOn(Schedulers.boundedElastic()) \r\n)\r\n```\r\nYou&#39;re using `flatMap` cause you&#39;re returning a `Mono` from the function. The combination of `Mono.fromSupplier` and `.subscribeOn(Schedulers.boundedElastic())` (I added this) ensures that the `computeStuff` fun runs in another thread, not blocking the main reactive thread, which is generally recommended.\r\n\r\n----------\r\n\r\n### To notice a difference:\r\n\r\n- Blocking Scenario: If `computeStuff` is a blocking operation and you use `map`, you&#39;ll quickly see issues when you put your service under load. The main reactive thread will get blocked, leading to a significant degradation in performance;\r\n- Async Scenario: If you use `flatMap` and offload the work to another thread, under the same load, you should see better performance since the main reactive thread isn&#39;t blocked;\r\n- Simple Transformations: Simple transformations that don&#39;t block or aren&#39;t computationally intensive, there would be a negligible performance difference between using `map` &amp; `flatMap`\r\n\r\n\r\n----------\r\n\r\nLet&#39;s try to write some dummy test now.\r\n\r\n- Prerequisites:\r\nLet&#39;s imagine that you&#39;ve already set up the two endpoints (/map and /flatMap) and some `blockingOperation` (computeStuff) method\r\n\r\nWe may write something like:\r\n```java\r\n@Test\r\npublic void testMapVsFlatMap() {\r\n    long startMap = System.currentTimeMillis();\r\n    webTestClient.get().uri(&quot;/map&quot;)\r\n            .exchange()\r\n            .expectStatus().isOk()\r\n            .expectBodyList(String.class);\r\n    long endMap = System.currentTimeMillis();\r\n\r\n    long startFlatMap = System.currentTimeMillis();\r\n    webTestClient.get().uri(&quot;/flatMap&quot;)\r\n            .exchange()\r\n            .expectStatus().isOk()\r\n            .expectBodyList(String.class);\r\n    long endFlatMap = System.currentTimeMillis();\r\n\r\n    // flatMap is indeed faster than map for our simulated blocking OP\r\n    assertTrue((endFlatMap - startFlatMap) &lt; (endMap - startMap));\r\n}\r\n```\r\n","title":"map vs. flatMap with Mono.fromSupplier for long-running operations","body":"<p>Let's try to see when to use each:</p>\n<h3>For computationally expensive tasks</h3>\n<p>If your <code>computeStuff</code> fun is just computationally expensive and doesn't involve any I/O, you could use either <code>map</code> or <code>flatMap</code> based on how you manage threads. If you're okay with the operation running on the same thread (typically, the event loop), <code>map</code> is fine too. If you want to offload it to another thread, you'll need to wrap it in a <code>Mono.fromSupplier</code> and use <code>flatMap</code> instead, as the SOF answer suggested.</p>\n<h3>For I/O-bound or blocking tasks</h3>\n<p>If <code>computeStuff</code> does I/O or any blocking operation, you <em>definitely</em> should not use <code>map</code>. Instead, you may need to offload this to another thread. <code>flatMap</code> becomes useful here because you're typically returning a <code>Mono</code> or <code>Flux</code> which represents the result of an async operation.</p>\n<hr />\n<p>In your example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>fluxOfSomething.flatMap(value -&gt;\n    Mono.fromSupplier(\n        () -&gt; computeStuff(value)\n    ).subscribeOn(Schedulers.boundedElastic()) \n)\n</code></pre>\n<p>You're using <code>flatMap</code> cause you're returning a <code>Mono</code> from the function. The combination of <code>Mono.fromSupplier</code> and <code>.subscribeOn(Schedulers.boundedElastic())</code> (I added this) ensures that the <code>computeStuff</code> fun runs in another thread, not blocking the main reactive thread, which is generally recommended.</p>\n<hr />\n<h3>To notice a difference:</h3>\n<ul>\n<li>Blocking Scenario: If <code>computeStuff</code> is a blocking operation and you use <code>map</code>, you'll quickly see issues when you put your service under load. The main reactive thread will get blocked, leading to a significant degradation in performance;</li>\n<li>Async Scenario: If you use <code>flatMap</code> and offload the work to another thread, under the same load, you should see better performance since the main reactive thread isn't blocked;</li>\n<li>Simple Transformations: Simple transformations that don't block or aren't computationally intensive, there would be a negligible performance difference between using <code>map</code> &amp; <code>flatMap</code></li>\n</ul>\n<hr />\n<p>Let's try to write some dummy test now.</p>\n<ul>\n<li>Prerequisites:\nLet's imagine that you've already set up the two endpoints (/map and /flatMap) and some <code>blockingOperation</code> (computeStuff) method</li>\n</ul>\n<p>We may write something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void testMapVsFlatMap() {\n    long startMap = System.currentTimeMillis();\n    webTestClient.get().uri(&quot;/map&quot;)\n            .exchange()\n            .expectStatus().isOk()\n            .expectBodyList(String.class);\n    long endMap = System.currentTimeMillis();\n\n    long startFlatMap = System.currentTimeMillis();\n    webTestClient.get().uri(&quot;/flatMap&quot;)\n            .exchange()\n            .expectStatus().isOk()\n            .expectBodyList(String.class);\n    long endFlatMap = System.currentTimeMillis();\n\n    // flatMap is indeed faster than map for our simulated blocking OP\n    assertTrue((endFlatMap - startFlatMap) &lt; (endMap - startMap));\n}\n</code></pre>\n"}],"owner":{"account_id":914392,"reputation":5655,"user_id":947526,"accept_rate":46,"display_name":"C-Otto"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691325380,"accepted_answer_id":76842768,"answer_count":1,"score":0,"last_activity_date":1691256233,"creation_date":1691255196,"question_id":76842708,"body_markdown":"I&#39;m using Project Reactor as part of a project using Spring WebFlux and learned that `Flux.map` should only be used for &quot;simple&quot; operations. From https://stackoverflow.com/a/49169314/947526:\r\n\r\n&gt; - `map` is for synchronous, non-blocking, 1-to-1 transformations\r\n&gt;\r\n&gt; - `flatMap` is for asynchronous (non-blocking) 1-to-N transformations\r\n\r\nIn my understanding, something like `fluxOfStrings.map(String::toUpperCase)` is fine, but `flux.map(this::computeStuff)` is not (assuming `computeStuff` takes a considerable amount of time).\r\n\r\nHowever, I fail to understand how (and if) I can use `flatMap` to improve my code. Based on the example above, I could write\r\n\r\n```\r\nfluxOfSomething.flatMap(value -&gt;\r\n    Mono.fromSupplier(\r\n        () -&gt; computeStuff(value)\r\n    )\r\n)\r\n```\r\n\r\nIs this better, in any sense? If so, how can I see the improvement using a simple test? If not, what can I do to trigger `computeStuff` instead?\r\n\r\n","title":"map vs. flatMap with Mono.fromSupplier for long-running operations","body":"<p>I'm using Project Reactor as part of a project using Spring WebFlux and learned that <code>Flux.map</code> should only be used for &quot;simple&quot; operations. From <a href=\"https://stackoverflow.com/a/49169314/947526\">https://stackoverflow.com/a/49169314/947526</a>:</p>\n<blockquote>\n<ul>\n<li><p><code>map</code> is for synchronous, non-blocking, 1-to-1 transformations</p>\n</li>\n<li><p><code>flatMap</code> is for asynchronous (non-blocking) 1-to-N transformations</p>\n</li>\n</ul>\n</blockquote>\n<p>In my understanding, something like <code>fluxOfStrings.map(String::toUpperCase)</code> is fine, but <code>flux.map(this::computeStuff)</code> is not (assuming <code>computeStuff</code> takes a considerable amount of time).</p>\n<p>However, I fail to understand how (and if) I can use <code>flatMap</code> to improve my code. Based on the example above, I could write</p>\n<pre><code>fluxOfSomething.flatMap(value -&gt;\n    Mono.fromSupplier(\n        () -&gt; computeStuff(value)\n    )\n)\n</code></pre>\n<p>Is this better, in any sense? If so, how can I see the improvement using a simple test? If not, what can I do to trigger <code>computeStuff</code> instead?</p>\n"},{"tags":["java","templates","expression","string-interpolation"],"comments":[{"owner":{"account_id":8326,"reputation":258545,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1263958345,"post_id":2098839,"comment_id":2032429,"body_markdown":"To add my own question: Can the JSP EL (which would be a fit here) be called from Java code?","body":"To add my own question: Can the JSP EL (which would be a fit here) be called from Java code?"},{"owner":{"account_id":60584,"reputation":9058,"user_id":180904,"accept_rate":83,"display_name":"Ashika Umanga Umagiliya"},"score":0,"creation_date":1263958508,"post_id":2098839,"comment_id":2032434,"body_markdown":"I came across with Apache Common JEXL and Commons EL.But not sure how I can solve this","body":"I came across with Apache Common JEXL and Commons EL.But not sure how I can solve this"},{"owner":{"account_id":8326,"reputation":258545,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1263959037,"post_id":2098839,"comment_id":2032456,"body_markdown":"also see http://stackoverflow.com/questions/1133660/open-source-expression-engines-java","body":"also see <a href=\"http://stackoverflow.com/questions/1133660/open-source-expression-engines-java\" title=\"open source expression engines java\">stackoverflow.com/questions/1133660/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":3519,"reputation":25773,"user_id":5077,"accept_rate":71,"display_name":"Chris Dail"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1263959313,"creation_date":1263959313,"answer_id":2098909,"question_id":2098839,"body_markdown":"It sounds like all you need is the core Java library class [MessageFormat][1]. It is pretty easy to use and allows you to do replacement of templates in a string.\r\n\r\n    String outputString = MessageFormat.format(&quot;&lt;a&gt; href=&#39;http://www.ncbi.nlm.nih.gov/pubmed?term={0}&#39; /&gt;&quot;, &quot;gene19191X&quot;);\r\n\r\nYou can also create an instance of MessageFormat and reuse that with different values.\r\n\r\nOther options you could also try are:\r\n\r\n * [Apache Commons EL][2] - This is built for expressions in web applications.\r\n * [Groovy GStrings][3] - I use this sometimes to evaluate a &#39;script&#39;. This has the advantage of allowing more complex logic.\r\n\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/text/MessageFormat.html\r\n  [2]: http://commons.apache.org/el/\r\n  [3]: http://groovy.codehaus.org/Strings+and+GString\r\n","title":"Java Expression Language : Interpolation?","body":"<p>It sounds like all you need is the core Java library class <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/text/MessageFormat.html\" rel=\"nofollow noreferrer\">MessageFormat</a>. It is pretty easy to use and allows you to do replacement of templates in a string.</p>\n\n<pre><code>String outputString = MessageFormat.format(\"&lt;a&gt; href='http://www.ncbi.nlm.nih.gov/pubmed?term={0}' /&gt;\", \"gene19191X\");\n</code></pre>\n\n<p>You can also create an instance of MessageFormat and reuse that with different values.</p>\n\n<p>Other options you could also try are:</p>\n\n<ul>\n<li><a href=\"http://commons.apache.org/el/\" rel=\"nofollow noreferrer\">Apache Commons EL</a> - This is built for expressions in web applications.</li>\n<li><a href=\"http://groovy.codehaus.org/Strings+and+GString\" rel=\"nofollow noreferrer\">Groovy GStrings</a> - I use this sometimes to evaluate a 'script'. This has the advantage of allowing more complex logic.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":8326,"reputation":258545,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1263960204,"creation_date":1263960204,"answer_id":2098954,"question_id":2098839,"body_markdown":"Maybe [MVEL][1] would work for you. \r\n\r\nWith a template like\r\n\r\n\r\n     Hello, @{person.getSex() == &#39;F&#39; ? &#39;Ms.&#39; : &#39;Mr.&#39;} @{person.name}\r\n\r\nyou can do\r\n\r\n     context.put(&quot;person&quot;, personBean);\r\n     String output = (String) TemplateRuntime.eval(template, context);\r\n\r\n\r\n\r\nCheck out [this tutorial][2] (where I read about this, I have no experience with MVEL).\r\n\r\n\r\n  [1]: http://mvel.codehaus.org/\r\n  [2]: http://johannburkard.de/blog/programming/java/mvel-templating-introduction.html","title":"Java Expression Language : Interpolation?","body":"<p>Maybe <a href=\"http://mvel.codehaus.org/\" rel=\"nofollow noreferrer\">MVEL</a> would work for you. </p>\n\n<p>With a template like</p>\n\n<pre><code> Hello, @{person.getSex() == 'F' ? 'Ms.' : 'Mr.'} @{person.name}\n</code></pre>\n\n<p>you can do</p>\n\n<pre><code> context.put(\"person\", personBean);\n String output = (String) TemplateRuntime.eval(template, context);\n</code></pre>\n\n<p>Check out <a href=\"http://johannburkard.de/blog/programming/java/mvel-templating-introduction.html\" rel=\"nofollow noreferrer\">this tutorial</a> (where I read about this, I have no experience with MVEL).</p>\n"},{"tags":[],"owner":{"account_id":58050,"reputation":7570,"user_id":173852,"display_name":"mernst"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691255714,"creation_date":1691255714,"answer_id":76842741,"question_id":2098839,"body_markdown":"You can use Java&#39;s String Templates feature.\r\nIt is described in [JEP 430](https://openjdk.org/jeps/430), and it appears in JDK 21 as a preview feature.  Here is an example use:\r\n\r\n```java\r\nString outputString = STR.&quot;&lt;a href=&#39;http://www.ncbi.nlm.nih.gov/pubmed?term=\\{someframeworkobject.geneid}&#39; /&gt;&quot;;\r\n```\r\n","title":"Java Expression Language : Interpolation?","body":"<p>You can use Java's String Templates feature.\nIt is described in <a href=\"https://openjdk.org/jeps/430\" rel=\"nofollow noreferrer\">JEP 430</a>, and it appears in JDK 21 as a preview feature.  Here is an example use:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String outputString = STR.&quot;&lt;a href='http://www.ncbi.nlm.nih.gov/pubmed?term=\\{someframeworkobject.geneid}' /&gt;&quot;;\n</code></pre>\n"}],"owner":{"account_id":60584,"reputation":9058,"user_id":180904,"accept_rate":83,"display_name":"Ashika Umanga Umagiliya"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2219,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":2098954,"answer_count":3,"score":2,"last_activity_date":1691255714,"creation_date":1263957625,"question_id":2098839,"body_markdown":"Greetings,\r\n\r\nIn the webapplication I am developing , I want to do something like follows:\r\n\r\nI Have a Bean like\r\n\r\n    class Gene{\r\n    String geneid;\r\n    String sequence;\r\n    ..\r\n    }\r\n\r\n    // EL expression (sometimes should be simple as &quot;${geneid}&quot; without URL pattern)\r\n    String exp=&quot;&lt;a&gt; href=&#39;http://www.ncbi.nlm.nih.gov/pubmed?term=${geneid}&#39; /&gt;&quot;;\r\n    String outputString=someframeworkobject.somemethod(exp,aGeneInstance);\r\n\r\nSo the outputString is interpolated like : `http://www.ncbi.nlm.nih.gov/pubmed?term=gene19191X`\r\n\r\nIs there any lightweight EL frameworks that I can use for this?\r\n","title":"Java Expression Language : Interpolation?","body":"<p>Greetings,</p>\n\n<p>In the webapplication I am developing , I want to do something like follows:</p>\n\n<p>I Have a Bean like</p>\n\n<pre><code>class Gene{\nString geneid;\nString sequence;\n..\n}\n\n// EL expression (sometimes should be simple as \"${geneid}\" without URL pattern)\nString exp=\"&lt;a&gt; href='http://www.ncbi.nlm.nih.gov/pubmed?term=${geneid}' /&gt;\";\nString outputString=someframeworkobject.somemethod(exp,aGeneInstance);\n</code></pre>\n\n<p>So the outputString is interpolated like : <code>http://www.ncbi.nlm.nih.gov/pubmed?term=gene19191X</code></p>\n\n<p>Is there any lightweight EL frameworks that I can use for this?</p>\n"},{"tags":["java","string","string-interpolation","java-15"],"comments":[{"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"score":3,"creation_date":1598265376,"post_id":63559237,"comment_id":112392089,"body_markdown":"Looks like Java doesn&#39;t have time for such frivolous features. Some languages had it from day 1, others have even enhanced it in recent releases. But looks like Java always knows better than day to day developer productivity :)","body":"Looks like Java doesn&#39;t have time for such frivolous features. Some languages had it from day 1, others have even enhanced it in recent releases. But looks like Java always knows better than day to day developer productivity :)"},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1598265658,"post_id":63559237,"comment_id":112392198,"body_markdown":"Why do you believe Java is adding String Interpolation support? --- Are you perhaps confusing Interpolation with the **Text Block** support being added (preview in Java 13 and 14, final in Java 15)? Note that [JEP 378: Text Blocks](https://openjdk.java.net/jeps/378) specifically says: *&quot;Text blocks do not directly support string interpolation. Interpolation may be considered in a future JEP. In the meantime, the new instance method `String::formatted` aids in situations where interpolation might be desired.&quot;*","body":"Why do you believe Java is adding String Interpolation support? --- Are you perhaps confusing Interpolation with the <b>Text Block</b> support being added (preview in Java 13 and 14, final in Java 15)? Note that <a href=\"https://openjdk.java.net/jeps/378\" rel=\"nofollow noreferrer\">JEP 378: Text Blocks</a> specifically says: <i>&quot;Text blocks do not directly support string interpolation. Interpolation may be considered in a future JEP. In the meantime, the new instance method <code>String::formatted</code> aids in situations where interpolation might be desired.&quot;</i>"},{"owner":{"account_id":10108456,"reputation":3914,"user_id":7470253,"display_name":"M. Prokhorov"},"score":2,"creation_date":1598266053,"post_id":63559237,"comment_id":112392365,"body_markdown":"@ernest_k, it&#39;s not as clear of a cut to add language features to 20+ year old language that&#39;s widely in use. Such &quot;simple&quot; feature as text blocks caused a lot of debates (look up that JEP&#39;s history) - added inline interpolation will cause a storm. Because everyone has their favorite pet &quot;developer productivity&quot; feature from some recent language, and everyone&#39;s favorite feature also isn&#39;t compatible with everyone else&#39;s favorite feature.","body":"@ernest_k, it&#39;s not as clear of a cut to add language features to 20+ year old language that&#39;s widely in use. Such &quot;simple&quot; feature as text blocks caused a lot of debates (look up that JEP&#39;s history) - added inline interpolation will cause a storm. Because everyone has their favorite pet &quot;developer productivity&quot; feature from some recent language, and everyone&#39;s favorite feature also isn&#39;t compatible with everyone else&#39;s favorite feature."},{"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"score":0,"creation_date":1598266604,"post_id":63559237,"comment_id":112392589,"body_markdown":"@M.Prokhorov Absolutely, and I&#39;m sure Java&#39;s design principles are sound (like... you should prefer features that add real value and that you&#39;re going to be willing to support in a future, backward compatible version, as I saw somewhere). One fact, though: when developer productivity is up for evaluation, I guess, usually those other guiding principles win (Python is older than Java and widely adopted, but it gets such changes - that&#39;s maybe because they put a limit to backward compatibility, etc.). Not trying to be presumptuous, that&#39;s just some superficial thinking/speculation.","body":"@M.Prokhorov Absolutely, and I&#39;m sure Java&#39;s design principles are sound (like... you should prefer features that add real value and that you&#39;re going to be willing to support in a future, backward compatible version, as I saw somewhere). One fact, though: when developer productivity is up for evaluation, I guess, usually those other guiding principles win (Python is older than Java and widely adopted, but it gets such changes - that&#39;s maybe because they put a limit to backward compatibility, etc.). Not trying to be presumptuous, that&#39;s just some superficial thinking/speculation."},{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":0,"creation_date":1598279878,"post_id":63559237,"comment_id":112399435,"body_markdown":"@ernest_k Developer productivity is important even in Java, a good example of this is the recently added pattern matching for `instanceof` feature (avoid those redundant looking casts). It might seem like something like this is such a small thing to add, but it takes months/years to work out all the details, maybe to eventually decide that a feature should not be added after all. String interpolation in particular is just not at the top of the TODO list currently.","body":"@ernest_k Developer productivity is important even in Java, a good example of this is the recently added pattern matching for <code>instanceof</code> feature (avoid those redundant looking casts). It might seem like something like this is such a small thing to add, but it takes months/years to work out all the details, maybe to eventually decide that a feature should not be added after all. String interpolation in particular is just not at the top of the TODO list currently."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":4,"creation_date":1598346097,"post_id":63559237,"comment_id":112421573,"body_markdown":"@ernest_k I’m wondering, how much productivity you really gain, by writing `$&quot;Your name is {name} and your age {age}&quot;` instead of `&quot;Your name is &quot;+name+&quot; and your age &quot;+age`","body":"@ernest_k I’m wondering, how much productivity you really gain, by writing <code>$&quot;Your name is {name} and your age {age}&quot;</code> instead of <code>&quot;Your name is &quot;+name+&quot; and your age &quot;+age</code>"},{"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"score":1,"creation_date":1598347600,"post_id":63559237,"comment_id":112422234,"body_markdown":"@Holger valid question, but I&#39;m afraid it&#39;s too specific for a comment intended to be general. And, of course, I haven&#39;t measured it (assuming I can). My comment is not that original, everyone knows that Java doesn&#39;t prioritize &quot;improvements&quot; that make it easier to code in the language (boilerplate is perhaps too characteristic of Java, and is one of the things that make it dreadful for many - and I&#39;m not one of those). And to your question, `$&quot;...&quot;` is definitely more readable &amp; less bug-prone than `&quot;..&quot; + &quot;..&quot;`, let alone `String.format(&quot;..&quot;, name, age)`. +Interpolation is jut one of many","body":"@Holger valid question, but I&#39;m afraid it&#39;s too specific for a comment intended to be general. And, of course, I haven&#39;t measured it (assuming I can). My comment is not that original, everyone knows that Java doesn&#39;t prioritize &quot;improvements&quot; that make it easier to code in the language (boilerplate is perhaps too characteristic of Java, and is one of the things that make it dreadful for many - and I&#39;m not one of those). And to your question, <code>$&quot;...&quot;</code> is definitely more readable &amp; less bug-prone than <code>&quot;..&quot; + &quot;..&quot;</code>, let alone <code>String.format(&quot;..&quot;, name, age)</code>. +Interpolation is jut one of many"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1598349126,"post_id":63559237,"comment_id":112422943,"body_markdown":"@ernest_k “less bug-prone” heavily depends on how the hypothetical feature handles dangling `{` or `}` characters (or what I need to do when I *want* to insert literal `{` or `}` characters) or identifiers that do not match variables or whether the compiler or the runtime is supposed to resolve those identifiers. For `&quot;constant&quot;+variable+&quot;…&quot;`, it’s clear that I get response at compile time (or immediately while typing when using an IDE). Can’t agree that Java doesn&#39;t prioritize productivity, I mean, name the last Java version that didn’t introduce language improvements in that regard…","body":"@ernest_k “less bug-prone” heavily depends on how the hypothetical feature handles dangling <code>{</code> or <code>}</code> characters (or what I need to do when I <i>want</i> to insert literal <code>{</code> or <code>}</code> characters) or identifiers that do not match variables or whether the compiler or the runtime is supposed to resolve those identifiers. For <code>&quot;constant&quot;+variable+&quot;…&quot;</code>, it’s clear that I get response at compile time (or immediately while typing when using an IDE). Can’t agree that Java doesn&#39;t prioritize productivity, I mean, name the last Java version that didn’t introduce language improvements in that regard…"},{"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"score":1,"creation_date":1598350940,"post_id":63559237,"comment_id":112423806,"body_markdown":"@Holger I don&#39;t want to stretch this too much; you make a good point about concatenation with `+`. It was more about `String.format` vs native string interpolation (you know what I mean). And I don&#39;t want my remarks to be construed as radical; Java is getting positive changes and I know that designers are good at picking the right features... Yet that doesn&#39;t change the fact that devs would have a *very* long wish-list of nice-to-haves. And I don&#39;t think it&#39;s merely because of low priority, but because of conflict (current and future backward compatibility, etc.)","body":"@Holger I don&#39;t want to stretch this too much; you make a good point about concatenation with <code>+</code>. It was more about <code>String.format</code> vs native string interpolation (you know what I mean). And I don&#39;t want my remarks to be construed as radical; Java is getting positive changes and I know that designers are good at picking the right features... Yet that doesn&#39;t change the fact that devs would have a <i>very</i> long wish-list of nice-to-haves. And I don&#39;t think it&#39;s merely because of low priority, but because of conflict (current and future backward compatibility, etc.)"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1603890123,"post_id":63559237,"comment_id":114178315,"body_markdown":"@birgersp unless you come up with a surprising reason why `&quot;Age: $age.&quot;` is so much better than the proposed `&quot;Age: {age}.&quot;`, [my opinion](https://stackoverflow.com/questions/63559237/?noredirect=1#comment112421573_63559237) does not change.","body":"@birgersp unless you come up with a surprising reason why <code>&quot;Age: $age.&quot;</code> is so much better than the proposed <code>&quot;Age: {age}.&quot;</code>, <a href=\"https://stackoverflow.com/questions/63559237/?noredirect=1#comment112421573_63559237\">my opinion</a> does not change."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1603890776,"post_id":63559237,"comment_id":114178629,"body_markdown":"@birgersp there is no point. Except you can name a *reason* why it should be better.","body":"@birgersp there is no point. Except you can name a <i>reason</i> why it should be better."},{"owner":{"account_id":3048712,"reputation":4198,"user_id":2583765,"accept_rate":75,"display_name":"birgersp"},"score":0,"creation_date":1603891069,"post_id":63559237,"comment_id":114178824,"body_markdown":"@Holger Sorry I mixed some examples here. Let me correct myself; `$&quot;Age: {age}.&quot;` is more productive than `&quot;Age: &quot; + age + &quot;.&quot;`. Even with just 1 variable it is shorter and sweeter. Now imagine strings where you add 8, 10, 15(!) variables into it. Java would benefit from implementing string interpolation like C# (and other langauges) has.","body":"@Holger Sorry I mixed some examples here. Let me correct myself; <code>$&quot;Age: {age}.&quot;</code> is more productive than <code>&quot;Age: &quot; + age + &quot;.&quot;</code>. Even with just 1 variable it is shorter and sweeter. Now imagine strings where you add 8, 10, 15(!) variables into it. Java would benefit from implementing string interpolation like C# (and other langauges) has."},{"owner":{"account_id":3048712,"reputation":4198,"user_id":2583765,"accept_rate":75,"display_name":"birgersp"},"score":10,"creation_date":1603891201,"post_id":63559237,"comment_id":114178899,"body_markdown":"As to the &quot;reasoning&quot; why it is productive I won&#39;t bother explain it to you. It is like asking why is it &quot;better&quot; to write 3x5 when you can just write 3+3+3+3+3?","body":"As to the &quot;reasoning&quot; why it is productive I won&#39;t bother explain it to you. It is like asking why is it &quot;better&quot; to write 3x5 when you can just write 3+3+3+3+3?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1603891891,"post_id":63559237,"comment_id":114179305,"body_markdown":"@birgersp seriously? You want to argue that saving just *one* character in source code, plus some ignorable white-space that you apparently inserted to make the difference look more dramatic, deserves a new language feature? In the example of the previous comment, `$&quot;Your name is {name} and your age {age}&quot;` vs `&quot;Your name is &quot;+name+&quot; and your age &quot;+age`, there is no difference at all. That feature will never compensate the productivity you already lost while writing such comments.","body":"@birgersp seriously? You want to argue that saving just <i>one</i> character in source code, plus some ignorable white-space that you apparently inserted to make the difference look more dramatic, deserves a new language feature? In the example of the previous comment, <code>$&quot;Your name is {name} and your age {age}&quot;</code> vs <code>&quot;Your name is &quot;+name+&quot; and your age &quot;+age</code>, there is no difference at all. That feature will never compensate the productivity you already lost while writing such comments."},{"owner":{"account_id":3048712,"reputation":4198,"user_id":2583765,"accept_rate":75,"display_name":"birgersp"},"score":2,"creation_date":1603892633,"post_id":63559237,"comment_id":114179771,"body_markdown":"Nearly all formatters add space before and after operators. So `:&quot;+text+&quot;.` would be formatted to `:&quot; + text + &quot;.`. So there are your extra characters. String interpolation like C# has should be added to Java because it has the same result, with less code without hurting readability. In fact people would argue that it is even more readable but that would perhaps be too subjective. Again, your example has 1 variable. But what about strings with e.g. 5 variables? Do you still not see how it would be more productive?","body":"Nearly all formatters add space before and after operators. So <code>:&quot;+text+&quot;.</code> would be formatted to <code>:&quot; + text + &quot;.</code>. So there are your extra characters. String interpolation like C# has should be added to Java because it has the same result, with less code without hurting readability. In fact people would argue that it is even more readable but that would perhaps be too subjective. Again, your example has 1 variable. But what about strings with e.g. 5 variables? Do you still not see how it would be more productive?"},{"owner":{"account_id":15237469,"reputation":42,"user_id":10994710,"display_name":"Nicola"},"score":0,"creation_date":1621345627,"post_id":63559237,"comment_id":119463911,"body_markdown":"+ chaining method is a crappy method for a crappy code","body":"+ chaining method is a crappy method for a crappy code"},{"owner":{"account_id":1136523,"reputation":11039,"user_id":1121497,"accept_rate":42,"display_name":"Ferran Maylinch"},"score":1,"creation_date":1623915888,"post_id":63559237,"comment_id":120214560,"body_markdown":"I was looking for an answer on why Java hasn&#39;t yet added string interpolation. Is there any technical difficulty? Or they just don&#39;t agree on using curly braces vs dollar signs? I guess that they could go the JavaScript way and add [template literals](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals). It is already proven, developers know it very well, and it&#39;s a non-breaking change because the back-quote character `\\`` is not currently used in the language.","body":"I was looking for an answer on why Java hasn&#39;t yet added string interpolation. Is there any technical difficulty? Or they just don&#39;t agree on using curly braces vs dollar signs? I guess that they could go the JavaScript way and add <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals\" rel=\"nofollow noreferrer\">template literals</a>. It is already proven, developers know it very well, and it&#39;s a non-breaking change because the back-quote character <code>`</code> is not currently used in the language."},{"owner":{"account_id":11726648,"reputation":19523,"user_id":8583692,"display_name":"Mahozad"},"score":0,"creation_date":1671378891,"post_id":63559237,"comment_id":132082316,"body_markdown":"Related; https://stackoverflow.com/q/3655424/8583692","body":"Related; <a href=\"https://stackoverflow.com/q/3655424/8583692\">stackoverflow.com/q/3655424/8583692</a>"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1683014988,"post_id":63559237,"comment_id":134298145,"body_markdown":"@birgersp you didn’t `@` me, so I didn’t notice your response. My answer today would be the same as back then, *regarding the savings*, even considering additional white-space and more variables. In fact, it looks weird to me, to configure formatters to insert additional white-space for readability, followed by arguing that the alternative, denser syntax is more readable. However, seeing what they’ll do with JEP 430, I changed my mind. String interpolation is indeed a useful thing, but not because you might save typing. Solving the operator precedence issue, allow sanitizing arguments, etc…","body":"@birgersp you didn’t <code>@</code> me, so I didn’t notice your response. My answer today would be the same as back then, <i>regarding the savings</i>, even considering additional white-space and more variables. In fact, it looks weird to me, to configure formatters to insert additional white-space for readability, followed by arguing that the alternative, denser syntax is more readable. However, seeing what they’ll do with JEP 430, I changed my mind. String interpolation is indeed a useful thing, but not because you might save typing. Solving the operator precedence issue, allow sanitizing arguments, etc…"}],"answers":[{"tags":[],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1598265075,"creation_date":1598265075,"answer_id":63559286,"question_id":63559237,"body_markdown":"To my knowledge, there are no updates in the standard java libraries regarding such kind of string formatting.\r\n\r\nIn other words: you are still &quot;stuck&quot; with either using `String.format()` and its index based substitution mechanism, or you have to pick some 3rd party library/framework, such as Velocity, FreeMarker, ... see [here][1] for an initial overview.\r\n\r\n\r\n  [1]: https://dzone.com/articles/template-engines-at-one-spring-boot-and-engines-se","title":"String interpolation in Java 14 or 15","body":"<p>To my knowledge, there are no updates in the standard java libraries regarding such kind of string formatting.</p>\n<p>In other words: you are still &quot;stuck&quot; with either using <code>String.format()</code> and its index based substitution mechanism, or you have to pick some 3rd party library/framework, such as Velocity, FreeMarker, ... see <a href=\"https://dzone.com/articles/template-engines-at-one-spring-boot-and-engines-se\" rel=\"noreferrer\">here</a> for an initial overview.</p>\n"},{"tags":[],"owner":{"account_id":1416522,"reputation":91354,"user_id":3553087,"display_name":"Brian Goetz"},"down_vote_count":0,"up_vote_count":45,"is_accepted":true,"score":45,"last_activity_date":1598306173,"creation_date":1598306173,"answer_id":63569216,"question_id":63559237,"body_markdown":"There is something _slightly_ closer; an instance version of `String::format`, called `formatted`:\r\n\r\n    String message = &quot;Hi, %s&quot;.formatted(name);\r\n\r\nIt is similar to `String::format`, but is more friendly to use in chained expressions.  \r\n\r\n","title":"String interpolation in Java 14 or 15","body":"<p>There is something <em>slightly</em> closer; an instance version of <code>String::format</code>, called <code>formatted</code>:</p>\n<pre><code>String message = &quot;Hi, %s&quot;.formatted(name);\n</code></pre>\n<p>It is similar to <code>String::format</code>, but is more friendly to use in chained expressions.</p>\n"},{"tags":[],"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689791429,"creation_date":1618795607,"answer_id":67154934,"question_id":63559237,"body_markdown":"There is no built-in support for that currently, but [Apache Commons Text](https://commons.apache.org/proper/commons-text/)&#39;s [`StringSubstitutor`](https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/StringSubstitutor.html) can be used.\r\n\r\n```\r\nimport org.apache.commons.text.StringSubstitutor;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n// ...\r\nMap&lt;String, String&gt; values = new HashMap&lt;&gt;();\r\nvalues.put(&quot;animal&quot;, &quot;quick brown fox&quot;);\r\nvalues.put(&quot;target&quot;, &quot;lazy dog&quot;);\r\nStringSubstitutor sub = new StringSubstitutor(values);\r\nString result = sub.replace(&quot;The ${animal} jumped over the ${target}.&quot;);\r\n// &quot;The quick brown fox jumped over the lazy dog.&quot;\r\n```\r\n\r\nThis class supports providing default values for variables.\r\n\r\n```\r\nString result = sub.replace(&quot;The number is ${undefined.property:-42}.&quot;);\r\n// &quot;The number is 42.&quot;\r\n```\r\n\r\nTo use recursive variable replacement, call `setEnableSubstitutionInVariables(true);`.\r\n\r\n```\r\nMap&lt;String, String&gt; values = new HashMap&lt;&gt;();\r\nvalues.put(&quot;b&quot;, &quot;c&quot;);\r\nvalues.put(&quot;ac&quot;, &quot;Test&quot;);\r\nStringSubstitutor sub = new StringSubstitutor(values);\r\nsub.setEnableSubstitutionInVariables(true);\r\nString result = sub.replace(&quot;${a${b}}&quot;);\r\n// &quot;Test&quot;\r\n```","title":"String interpolation in Java 14 or 15","body":"<p>There is no built-in support for that currently, but <a href=\"https://commons.apache.org/proper/commons-text/\" rel=\"nofollow noreferrer\">Apache Commons Text</a>'s <a href=\"https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/StringSubstitutor.html\" rel=\"nofollow noreferrer\"><code>StringSubstitutor</code></a> can be used.</p>\n<pre><code>import org.apache.commons.text.StringSubstitutor;\nimport java.util.HashMap;\nimport java.util.Map;\n// ...\nMap&lt;String, String&gt; values = new HashMap&lt;&gt;();\nvalues.put(&quot;animal&quot;, &quot;quick brown fox&quot;);\nvalues.put(&quot;target&quot;, &quot;lazy dog&quot;);\nStringSubstitutor sub = new StringSubstitutor(values);\nString result = sub.replace(&quot;The ${animal} jumped over the ${target}.&quot;);\n// &quot;The quick brown fox jumped over the lazy dog.&quot;\n</code></pre>\n<p>This class supports providing default values for variables.</p>\n<pre><code>String result = sub.replace(&quot;The number is ${undefined.property:-42}.&quot;);\n// &quot;The number is 42.&quot;\n</code></pre>\n<p>To use recursive variable replacement, call <code>setEnableSubstitutionInVariables(true);</code>.</p>\n<pre><code>Map&lt;String, String&gt; values = new HashMap&lt;&gt;();\nvalues.put(&quot;b&quot;, &quot;c&quot;);\nvalues.put(&quot;ac&quot;, &quot;Test&quot;);\nStringSubstitutor sub = new StringSubstitutor(values);\nsub.setEnableSubstitutionInVariables(true);\nString result = sub.replace(&quot;${a${b}}&quot;);\n// &quot;Test&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":107260,"reputation":218,"user_id":285306,"accept_rate":0,"display_name":"stan"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1679560337,"creation_date":1628694528,"answer_id":68744589,"question_id":63559237,"body_markdown":"Looks like nice C#-style interpolation is not available in these Java versions. Why we need this - to have nice and readable lines of code dumping text to Log files.\r\n\r\nBelow is sample code that works (there is commented org.apache.commons.lang3.StringUtils which at some point of writing was required but later it was not) - it was dropping ClassNotFound or other NotFoundException - I have not investigated it.\r\n\r\nThe StringSubstitutor might be later packed in something nicer that will make it easier to use for Log message dumping  \r\n\r\n\r\n    package main;\r\n    \r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    import org.apache.commons.text.*;\r\n    //import org.apache.commons.lang3.StringUtils;\r\n    \r\n    public class Main {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSystem.out.println(&quot;Starting program&quot;);\r\n    \t\t\r\n    \t\tvar result =  adding(1.35,2.99);\r\n    \r\n    \t\tMap&lt;String, String&gt; values = new HashMap&lt;&gt;();\r\n    \t\tvalues.put(&quot;logMessageString&quot;, Double.toString(result) );\r\n    \r\n    \t\tStringSubstitutor sub = new StringSubstitutor(values);\r\n    \t\tsub.setEnableSubstitutionInVariables(true);\r\n    \t\tString logMessage = sub.replace(&quot;LOG result of adding: ${logMessageString}&quot;);\r\n    \r\n    \t\tSystem.out.println(logMessage);\r\n    \t\tSystem.out.println(&quot;Ending program&quot;);\r\n    \t\t \r\n    \t}\r\n    \t// it can do many other things but here it is just for prcoessing two variables \r\n    \tprivate static double adding(double a, double b) {\r\n    \t\treturn a+b;\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"String interpolation in Java 14 or 15","body":"<p>Looks like nice C#-style interpolation is not available in these Java versions. Why we need this - to have nice and readable lines of code dumping text to Log files.</p>\n<p>Below is sample code that works (there is commented org.apache.commons.lang3.StringUtils which at some point of writing was required but later it was not) - it was dropping ClassNotFound or other NotFoundException - I have not investigated it.</p>\n<p>The StringSubstitutor might be later packed in something nicer that will make it easier to use for Log message dumping</p>\n<pre><code>package main;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport org.apache.commons.text.*;\n//import org.apache.commons.lang3.StringUtils;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        System.out.println(&quot;Starting program&quot;);\n        \n        var result =  adding(1.35,2.99);\n\n        Map&lt;String, String&gt; values = new HashMap&lt;&gt;();\n        values.put(&quot;logMessageString&quot;, Double.toString(result) );\n\n        StringSubstitutor sub = new StringSubstitutor(values);\n        sub.setEnableSubstitutionInVariables(true);\n        String logMessage = sub.replace(&quot;LOG result of adding: ${logMessageString}&quot;);\n\n        System.out.println(logMessage);\n        System.out.println(&quot;Ending program&quot;);\n         \n    }\n    // it can do many other things but here it is just for prcoessing two variables \n    private static double adding(double a, double b) {\n        return a+b;\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4846874,"reputation":119,"user_id":3910282,"display_name":"roma2341"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643807934,"creation_date":1643379476,"answer_id":70895212,"question_id":63559237,"body_markdown":"You can also use MessageFormat like this (Java 5.0 or later)\r\n\r\n    MessageFormat.format(&quot;Hello {0}, how are you. Goodbye {0}&quot;,userName);\r\n\r\nVery nice","title":"String interpolation in Java 14 or 15","body":"<p>You can also use MessageFormat like this (Java 5.0 or later)</p>\n<pre><code>MessageFormat.format(&quot;Hello {0}, how are you. Goodbye {0}&quot;,userName);\n</code></pre>\n<p>Very nice</p>\n"},{"tags":[],"owner":{"account_id":58050,"reputation":7570,"user_id":173852,"display_name":"mernst"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1691255490,"creation_date":1691255490,"answer_id":76842729,"question_id":63559237,"body_markdown":"You can use Java&#39;s String Templates feature.\r\nIt is described in [JEP 430](https://openjdk.org/jeps/430), and it appears in JDK 21 as a preview feature.  Here is an example use:\r\n\r\n```java\r\nstring name = &quot;Horace&quot;;\r\nint age = 34;\r\nSystem.out.println(STR.&quot;Your name is {name} and your age {age}&quot;);\r\n```\r\n","title":"String interpolation in Java 14 or 15","body":"<p>You can use Java's String Templates feature.\nIt is described in <a href=\"https://openjdk.org/jeps/430\" rel=\"nofollow noreferrer\">JEP 430</a>, and it appears in JDK 21 as a preview feature.  Here is an example use:</p>\n<pre class=\"lang-java prettyprint-override\"><code>string name = &quot;Horace&quot;;\nint age = 34;\nSystem.out.println(STR.&quot;Your name is {name} and your age {age}&quot;);\n</code></pre>\n"}],"owner":{"account_id":1189122,"reputation":15753,"user_id":1162409,"accept_rate":40,"display_name":"San Jaisy"},"comment_count":19,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23924,"favorite_count":0,"down_vote_count":0,"up_vote_count":28,"accepted_answer_id":63569216,"answer_count":6,"score":28,"last_activity_date":1691255490,"creation_date":1598264862,"question_id":63559237,"body_markdown":"Since I am using Java 14 and 15 preview features. Trying to find the string interpolation in java.\r\n\r\n\r\nThe closest answer I found is \r\n\r\n`String.format(&quot;u1=%s;u2=%s;u3=%s;u4=%s;&quot;, u1, u2, u3, u4)`\r\n\r\nSince the answer which I got from lots fo references are old answers asked 4,5 years ago. Is there any update on the string interpolation in java 11,12,13,14,15 equivalent to C# \r\n\r\n    string name = &quot;Horace&quot;;\r\n    int age = 34;\r\n    Console.WriteLine($&quot;Your name is {name} and your age {age}&quot;);\r\n\r\n**EDIT: [JEP 430](https://openjdk.org/jeps/430), which covers this and much more, has been proposed to target JDK 21.**","title":"String interpolation in Java 14 or 15","body":"<p>Since I am using Java 14 and 15 preview features. Trying to find the string interpolation in java.</p>\n<p>The closest answer I found is</p>\n<p><code>String.format(&quot;u1=%s;u2=%s;u3=%s;u4=%s;&quot;, u1, u2, u3, u4)</code></p>\n<p>Since the answer which I got from lots fo references are old answers asked 4,5 years ago. Is there any update on the string interpolation in java 11,12,13,14,15 equivalent to C#</p>\n<pre><code>string name = &quot;Horace&quot;;\nint age = 34;\nConsole.WriteLine($&quot;Your name is {name} and your age {age}&quot;);\n</code></pre>\n<p><strong>EDIT: <a href=\"https://openjdk.org/jeps/430\" rel=\"nofollow noreferrer\">JEP 430</a>, which covers this and much more, has been proposed to target JDK 21.</strong></p>\n"},{"tags":["java","multithreading","executorservice"],"answers":[{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1372564411,"creation_date":1372564411,"answer_id":17386970,"question_id":17386768,"body_markdown":"I think ForkJoinPool is better for this task. It&#39;s designed for efficient parallel processing, see http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html. ","title":"Parallel processing of arrays using ExecutorService and arrayCopy()","body":"<p>I think ForkJoinPool is better for this task. It's designed for efficient parallel processing, see <a href=\"http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html\" rel=\"nofollow\">http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html</a>. </p>\n"},{"tags":[],"owner":{"account_id":978760,"reputation":1422,"user_id":999043,"accept_rate":83,"display_name":"Ralf H"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1372633554,"creation_date":1372633554,"answer_id":17395638,"question_id":17386768,"body_markdown":"you are using `currIdx` many times in the Runnable. There are writes to `currIdx` from outside that `Runnable` since it is `static`. In the Runnable, better use local variable, maybe even make it `final` before entering the Runnable: \r\n\r\n    final int fCurrIdx = i;\r\n    threadPool.submit(new Runnable() {\r\n        public void run() {\r\n            Random r = new Random();\r\n            int[] data = new int[blockSize];\r\n            for( int j=0; j&lt;data.length; j++){\r\n                data[j] = r.nextInt(255) * r.nextInt(255) * r.nextInt(255);\r\n            }\r\n            data2D[fCurrIdx] = data;\r\n        }\r\n    });\r\n\r\nIn fact, I would create the new int[blockSize] locally, fill it, and assign it to data2D at the end.\r\n\r\nAre you sure you need a new Random every time? Is there a reason to make currIdx (or others) static? \r\n","title":"Parallel processing of arrays using ExecutorService and arrayCopy()","body":"<p>you are using <code>currIdx</code> many times in the Runnable. There are writes to <code>currIdx</code> from outside that <code>Runnable</code> since it is <code>static</code>. In the Runnable, better use local variable, maybe even make it <code>final</code> before entering the Runnable: </p>\n\n<pre><code>final int fCurrIdx = i;\nthreadPool.submit(new Runnable() {\n    public void run() {\n        Random r = new Random();\n        int[] data = new int[blockSize];\n        for( int j=0; j&lt;data.length; j++){\n            data[j] = r.nextInt(255) * r.nextInt(255) * r.nextInt(255);\n        }\n        data2D[fCurrIdx] = data;\n    }\n});\n</code></pre>\n\n<p>In fact, I would create the new int[blockSize] locally, fill it, and assign it to data2D at the end.</p>\n\n<p>Are you sure you need a new Random every time? Is there a reason to make currIdx (or others) static? </p>\n"},{"tags":[],"owner":{"account_id":1107482,"reputation":2870,"user_id":1098603,"accept_rate":94,"display_name":"Matthieu"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1376028420,"creation_date":1376028420,"answer_id":18140926,"question_id":17386768,"body_markdown":"I ran into the same kind of problems lately, they were due to synchronization between tasks using the same non-synchronized variables (comment left for other people reading that :)).\r\n\r\nIn your case, as @Ralf mentioned, you&#39;re not waiting for the termination of the pool. So your `data2D` array is still filled with `null` (`data2D[k] == null` for all `k`), and you get an NPE when doing `data2D[k].length`.\r\n\r\nI have tried to run the second version of your code and it throws NPE sometimes, after I run it 10 times. It&#39;s gone when calling `awaitTermination()`:\r\n\r\n    threadPool.shutdown();\r\n    try {\r\n    \twhile (!threadPool.awaitTermination(1, TimeUnit.SECONDS)) ;\r\n    } catch (InterruptedException e) {\r\n    \te.printStackTrace();\r\n    }\r\n    \r\n    //Now collapse data2D into a 1D array\r\n    data1D = new int[numElements];\r\n    ...\r\n\r\n\r\n","title":"Parallel processing of arrays using ExecutorService and arrayCopy()","body":"<p>I ran into the same kind of problems lately, they were due to synchronization between tasks using the same non-synchronized variables (comment left for other people reading that :)).</p>\n\n<p>In your case, as @Ralf mentioned, you're not waiting for the termination of the pool. So your <code>data2D</code> array is still filled with <code>null</code> (<code>data2D[k] == null</code> for all <code>k</code>), and you get an NPE when doing <code>data2D[k].length</code>.</p>\n\n<p>I have tried to run the second version of your code and it throws NPE sometimes, after I run it 10 times. It's gone when calling <code>awaitTermination()</code>:</p>\n\n<pre><code>threadPool.shutdown();\ntry {\n    while (!threadPool.awaitTermination(1, TimeUnit.SECONDS)) ;\n} catch (InterruptedException e) {\n    e.printStackTrace();\n}\n\n//Now collapse data2D into a 1D array\ndata1D = new int[numElements];\n...\n</code></pre>\n"}],"owner":{"account_id":426537,"reputation":9134,"user_id":807797,"accept_rate":72,"display_name":"CodeMed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2526,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1691252691,"creation_date":1372561881,"question_id":17386768,"body_markdown":"I have a variety of different algorithms which are each resource intensive, and which each have to be processed on millions of inputs.  I would like to divide the inputs into blocks, then have the blocks processed in parallel, and then finally have the results assembled into a single output array in correct order.  \r\n  \r\nI have been doing research on the matter, and the consensus seems to be that I should use `ExecutorService` and `arraycopy()`.  However, I am not sure how to determine the optimal number of threads to create, and I do not know how to structure the code in a way that eliminates the risk of bugs.  It would be nice if I knew that each thread was terminated after it creates its resulting array.  Finally, the code I wrote below is also giving me a null pointer error.  \r\n  \r\nHow can I edit the code below so that it accomplishes my above stated goals as fast as possible, while eliminating the risk of bugs?  It would be nice if the code below could run in 5 or 10 milliseconds. The random numbers in the array are nothing more than placeholders to serve as a benchmark to compare threading options.  I do not need to optimize the random number generation because my actual algorithms have nothing to do with random number generation.\r\n\r\nHere is my work in process:  \r\n  \r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    import java.util.Random;\r\n    import java.util.concurrent.ExecutorService;\r\n    import java.util.concurrent.Executors;\r\n    \r\n    public class ParallelArrays {\r\n    \tprivate static final int numJobs = 5;\r\n    \tstatic int numElements = 1473200;\r\n    \tstatic int blockSize = 300000;\r\n    \tstatic int remaining;\r\n    \tString number;\r\n    \tstatic int[][] data2D = new int[numJobs][];\r\n    \tstatic int[] data1D;\r\n    \tstatic int size;\r\n    \tstatic int currIdx;\r\n    \t\r\n    \tpublic static void main(String args[]) {\r\n    \t\tlong startTime = System.currentTimeMillis();\r\n    \t\tremaining = numElements-blockSize;\r\n    \t\t// create a pool of threads, 10 max jobs will execute in parallel\r\n    \t\tExecutorService threadPool = Executors.newFixedThreadPool(10);\r\n    \t\t// submit jobs to be executing by the pool\r\n    \t\tfor (int i = 0; i &lt; numJobs; i++) {\r\n    \t\t\tcurrIdx = i;\r\n    \t\t\tSystem.out.println(&quot;This coming iteration would leave us with remaining, blockSize: &quot;+remaining+&quot;, &quot;+blockSize);\r\n    \t\t\tif(remaining&gt;=0){System.out.println(&quot;blockSize is: &quot;+blockSize);}\r\n    \t\t\telse{\r\n    \t\t\t\tblockSize = (blockSize+remaining);\r\n    \t\t\t\tremaining = 0;\r\n    \t\t\t\tSystem.out.println(&quot;else blockSize is: &quot;+blockSize);\r\n    \t\t\t}\r\n    \t\t\tSystem.out.println(&quot;After iteration, remaining, blockSize are: &quot;+remaining+&quot;, &quot;+blockSize);\r\n    \t\t\tthreadPool.submit(new Runnable() {\r\n    \t\t\t\tpublic void run() {\r\n    \t\t\t\t\tRandom r = new Random();\r\n    \t\t\t\t\tdata2D[currIdx] = new int[blockSize];\r\n    \t\t\t\t\tfor(int j=0;j&lt;data2D[currIdx].length;j++){\r\n    \t\t\t\t\t\tdata2D[currIdx][j] = r.nextInt(255)*r.nextInt(255)*r.nextInt(255);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t});\r\n    \t\t\tremaining -= blockSize;\r\n    \t\t}\r\n    \t\t//Now collapse data2D into a 1D array\r\n    \t\tdata1D = new int[numElements];\r\n    \t\tint startPos = 0;\r\n    \t\tfor(int k=0;k&lt;numJobs;k++){\r\n    \t\t\tSystem.out.println(&quot;startPos is: &quot;+startPos);\r\n    \t\t\t//arraycopy(Object src, int srcPos, Object dest, int destPos, int length);\r\n    \t\t\tSystem.out.println(&quot;k is: &quot;+k);\r\n    \t\t\tSystem.out.println(&quot;data2D[k].length is: &quot;+data2D[k].length);\r\n    \t\t\tSystem.arraycopy(data2D[k], 0, data1D, startPos, data2D[k].length);\r\n    \t\t\tstartPos += data2D[k].length;\r\n    \t\t}\r\n    \t\tthreadPool.shutdown();\r\n    \t\tSystem.out.println(&quot;Main thread exiting.&quot;);\r\n    \t\tlong endTime = System.currentTimeMillis();\r\n    \t\tSystem.out.println(&quot;Elapsed time is: &quot;+(endTime-startTime));\r\n    \t}\r\n    }  \r\n  \r\nEdit\r\n---\r\n  \r\nIn response to Ralf H&#39;s suggestions, I have edited my code as follows.  It is still throwing the same null pointer exception, which I will include again below.  How can I get this to run without throwing the null pointer exception?\r\n  \r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    package myPackage;\r\n    \r\n    import java.util.Random;\r\n    import java.util.concurrent.ExecutorService;\r\n    import java.util.concurrent.Executors;\r\n    \r\n    public class ParallelArrays {\r\n    \tprivate final static int numJobs = 5;\r\n    \tstatic int numElements = 1473200;\r\n    \tstatic int blockSize = 300000;\r\n    \tstatic int remaining;\r\n    \tString number;\r\n    \tstatic int[][] data2D = new int[numJobs][];\r\n    \tstatic int[] data1D;\r\n    //\tstatic int size;\r\n    \tstatic int currIdx;\r\n    \tstatic int numAdded = 0;\r\n        \t\r\n    \tpublic static void main(String args[]) {runAlgorithm();}\r\n    \t\r\n    \tstatic void runAlgorithm(){\r\n    \t\tlong startTime = System.currentTimeMillis();\r\n    \t\tremaining = numElements-blockSize;\r\n    \t\tExecutorService threadPool = Executors.newFixedThreadPool(10);\r\n    \t\tfor (int i = 0; i &lt; numJobs; i++) {// submit jobs to be executing by the pool\r\n    \t\t\tcurrIdx = i;\r\n    \t\t\tif(remaining&lt;0){//last block will be smaller than the rest\r\n    \t\t\t\tblockSize = (blockSize+remaining);\r\n    \t\t\t\tremaining = 0;\r\n    \t\t\t}\r\n    \t\t\tfinal int fCurrIdx = i;\r\n    \t\t\tthreadPool.submit(new Runnable() {\r\n    \t\t\t\tpublic void run() {\r\n    \t\t\t\t\tRandom r = new Random();\r\n    \t\t\t\t\tdata2D[fCurrIdx] = new int[blockSize];\r\n    \t\t\t\t\tSystem.out.println(&quot;fCurrIdx is: &quot;+fCurrIdx);\r\n    \t\t\t\t\tfor(int j=0;j&lt;data2D[fCurrIdx].length;j++){\r\n    \t\t\t\t\t\tdata2D[fCurrIdx][j] = r.nextInt(255)*r.nextInt(255)*r.nextInt(255);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tnumAdded += 1;\r\n    \t\t\t\t}\r\n    \t\t\t});\r\n    \t\t\tremaining -= blockSize;\r\n    \t\t}\r\n    \t\t//Now collapse data2D into a 1D array\r\n    \t\tdata1D = new int[numElements];\r\n    \t\tSystem.out.println(&quot;numAdded, data2D.length is: &quot;+numAdded+&quot;, &quot;+data2D.length);\r\n    \t\tint startPos = 0;\r\n    \t\tfor(int k=0;k&lt;numJobs;k++){\r\n    \t\t\tSystem.out.println(&quot;startPos is: &quot;+startPos);\r\n    \t\t\t//arraycopy(Object src, int srcPos, Object dest, int destPos, int length);\r\n    \t\t\tSystem.out.println(&quot;k, data2D[&quot;+k+&quot;].length are: &quot;+k+&quot;, &quot;+data2D[k].length); // NullPointerException here\r\n    \t\t\tSystem.arraycopy(data2D[k], 0, data1D, startPos, data2D[k].length);\r\n    \t\t\tstartPos += data2D[k].length;\r\n    \t\t}\r\n    \t\tthreadPool.shutdown();\r\n    \t\tSystem.out.println(&quot;Main thread exiting.&quot;);\r\n    \t\tlong endTime = System.currentTimeMillis();\r\n    \t\tSystem.out.println(&quot;Elapsed time is: &quot;+(endTime-startTime));\r\n    \t}\r\n    }  \r\n  \r\nHere is the stack trace for the null pointer error being thrown by the revised code:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NullPointerException  \r\n        at myPackage.ParallelArrays.runAlgorithm(ParallelArrays.java:52)  \r\n        at myPackage.ParallelArrays.main(ParallelArrays.java:19)  \r\n  \r\nI think the problem is that the code needs to use a Future object along with the `ExecutorService`.  But I am not sure of the syntax for this specific code.","title":"Parallel processing of arrays using ExecutorService and arrayCopy()","body":"<p>I have a variety of different algorithms which are each resource intensive, and which each have to be processed on millions of inputs.  I would like to divide the inputs into blocks, then have the blocks processed in parallel, and then finally have the results assembled into a single output array in correct order.</p>\n<p>I have been doing research on the matter, and the consensus seems to be that I should use <code>ExecutorService</code> and <code>arraycopy()</code>.  However, I am not sure how to determine the optimal number of threads to create, and I do not know how to structure the code in a way that eliminates the risk of bugs.  It would be nice if I knew that each thread was terminated after it creates its resulting array.  Finally, the code I wrote below is also giving me a null pointer error.</p>\n<p>How can I edit the code below so that it accomplishes my above stated goals as fast as possible, while eliminating the risk of bugs?  It would be nice if the code below could run in 5 or 10 milliseconds. The random numbers in the array are nothing more than placeholders to serve as a benchmark to compare threading options.  I do not need to optimize the random number generation because my actual algorithms have nothing to do with random number generation.</p>\n<p>Here is my work in process:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Random;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\npublic class ParallelArrays {\n    private static final int numJobs = 5;\n    static int numElements = 1473200;\n    static int blockSize = 300000;\n    static int remaining;\n    String number;\n    static int[][] data2D = new int[numJobs][];\n    static int[] data1D;\n    static int size;\n    static int currIdx;\n    \n    public static void main(String args[]) {\n        long startTime = System.currentTimeMillis();\n        remaining = numElements-blockSize;\n        // create a pool of threads, 10 max jobs will execute in parallel\n        ExecutorService threadPool = Executors.newFixedThreadPool(10);\n        // submit jobs to be executing by the pool\n        for (int i = 0; i &lt; numJobs; i++) {\n            currIdx = i;\n            System.out.println(&quot;This coming iteration would leave us with remaining, blockSize: &quot;+remaining+&quot;, &quot;+blockSize);\n            if(remaining&gt;=0){System.out.println(&quot;blockSize is: &quot;+blockSize);}\n            else{\n                blockSize = (blockSize+remaining);\n                remaining = 0;\n                System.out.println(&quot;else blockSize is: &quot;+blockSize);\n            }\n            System.out.println(&quot;After iteration, remaining, blockSize are: &quot;+remaining+&quot;, &quot;+blockSize);\n            threadPool.submit(new Runnable() {\n                public void run() {\n                    Random r = new Random();\n                    data2D[currIdx] = new int[blockSize];\n                    for(int j=0;j&lt;data2D[currIdx].length;j++){\n                        data2D[currIdx][j] = r.nextInt(255)*r.nextInt(255)*r.nextInt(255);\n                    }\n                }\n            });\n            remaining -= blockSize;\n        }\n        //Now collapse data2D into a 1D array\n        data1D = new int[numElements];\n        int startPos = 0;\n        for(int k=0;k&lt;numJobs;k++){\n            System.out.println(&quot;startPos is: &quot;+startPos);\n            //arraycopy(Object src, int srcPos, Object dest, int destPos, int length);\n            System.out.println(&quot;k is: &quot;+k);\n            System.out.println(&quot;data2D[k].length is: &quot;+data2D[k].length);\n            System.arraycopy(data2D[k], 0, data1D, startPos, data2D[k].length);\n            startPos += data2D[k].length;\n        }\n        threadPool.shutdown();\n        System.out.println(&quot;Main thread exiting.&quot;);\n        long endTime = System.currentTimeMillis();\n        System.out.println(&quot;Elapsed time is: &quot;+(endTime-startTime));\n    }\n}  \n</code></pre>\n<h2>Edit</h2>\n<p>In response to Ralf H's suggestions, I have edited my code as follows.  It is still throwing the same null pointer exception, which I will include again below.  How can I get this to run without throwing the null pointer exception?</p>\n<pre class=\"lang-java prettyprint-override\"><code>package myPackage;\n\nimport java.util.Random;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\npublic class ParallelArrays {\n    private final static int numJobs = 5;\n    static int numElements = 1473200;\n    static int blockSize = 300000;\n    static int remaining;\n    String number;\n    static int[][] data2D = new int[numJobs][];\n    static int[] data1D;\n//  static int size;\n    static int currIdx;\n    static int numAdded = 0;\n        \n    public static void main(String args[]) {runAlgorithm();}\n    \n    static void runAlgorithm(){\n        long startTime = System.currentTimeMillis();\n        remaining = numElements-blockSize;\n        ExecutorService threadPool = Executors.newFixedThreadPool(10);\n        for (int i = 0; i &lt; numJobs; i++) {// submit jobs to be executing by the pool\n            currIdx = i;\n            if(remaining&lt;0){//last block will be smaller than the rest\n                blockSize = (blockSize+remaining);\n                remaining = 0;\n            }\n            final int fCurrIdx = i;\n            threadPool.submit(new Runnable() {\n                public void run() {\n                    Random r = new Random();\n                    data2D[fCurrIdx] = new int[blockSize];\n                    System.out.println(&quot;fCurrIdx is: &quot;+fCurrIdx);\n                    for(int j=0;j&lt;data2D[fCurrIdx].length;j++){\n                        data2D[fCurrIdx][j] = r.nextInt(255)*r.nextInt(255)*r.nextInt(255);\n                    }\n                    numAdded += 1;\n                }\n            });\n            remaining -= blockSize;\n        }\n        //Now collapse data2D into a 1D array\n        data1D = new int[numElements];\n        System.out.println(&quot;numAdded, data2D.length is: &quot;+numAdded+&quot;, &quot;+data2D.length);\n        int startPos = 0;\n        for(int k=0;k&lt;numJobs;k++){\n            System.out.println(&quot;startPos is: &quot;+startPos);\n            //arraycopy(Object src, int srcPos, Object dest, int destPos, int length);\n            System.out.println(&quot;k, data2D[&quot;+k+&quot;].length are: &quot;+k+&quot;, &quot;+data2D[k].length); // NullPointerException here\n            System.arraycopy(data2D[k], 0, data1D, startPos, data2D[k].length);\n            startPos += data2D[k].length;\n        }\n        threadPool.shutdown();\n        System.out.println(&quot;Main thread exiting.&quot;);\n        long endTime = System.currentTimeMillis();\n        System.out.println(&quot;Elapsed time is: &quot;+(endTime-startTime));\n    }\n}  \n</code></pre>\n<p>Here is the stack trace for the null pointer error being thrown by the revised code:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NullPointerException  \n    at myPackage.ParallelArrays.runAlgorithm(ParallelArrays.java:52)  \n    at myPackage.ParallelArrays.main(ParallelArrays.java:19)  \n</code></pre>\n<p>I think the problem is that the code needs to use a Future object along with the <code>ExecutorService</code>.  But I am not sure of the syntax for this specific code.</p>\n"},{"tags":["java","list","hashmap","java-stream","predicate"],"comments":[{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":0,"creation_date":1652417903,"post_id":72223947,"comment_id":127605869,"body_markdown":"Well, I suppose you could transform the result of  your partitioning Collector by composing it with a finisher function using [collectingAndThen](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#collectingAndThen-java.util.stream.Collector-java.util.function.Function-)","body":"Well, I suppose you could transform the result of  your partitioning Collector by composing it with a finisher function using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#collectingAndThen-java.util.stream.Collector-java.util.function.Function-\" rel=\"nofollow noreferrer\">collectingAndThen</a>"}],"answers":[{"tags":[],"owner":{"account_id":5569841,"reputation":3750,"user_id":4415625,"display_name":"dani-vta"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1652439089,"creation_date":1652424753,"answer_id":72225501,"question_id":72223947,"body_markdown":"You could use the terminal operation `collect(Collectors.toMap())` to group by your predicate and instead of returning its `boolean` value as the key you could use a ternary operator to return either 1 or 0.\r\n\r\n&gt; to convert the boolean keys to the int type\r\n\r\nThen, you could map to that key a `List` built on the `String` you tested the `Predicate` with, and to handle the colliding cases you could add the `List` associated to the second key into the `List` corresponding to the first key.\r\n\r\nHere&#39;s a snippet of the code:\r\n\r\n```\r\n//My silly test Predicate\r\nPredicate&lt;String&gt; p = s -&gt; s.length() &gt; 4;\r\n\r\n//Mapping the numbers list\r\nMap&lt;Integer, List&lt;String&gt;&gt; partitioned = numbers.stream()\r\n        .collect(Collectors.toMap(s -&gt; p.test(s) ? 1 : 0, \r\n            s -&gt; new ArrayList&lt;&gt;(List.of(s)), \r\n            (list1, list2) -&gt; {\r\n                list1.addAll(list2);\r\n                return list1;\r\n            }\r\n        ));\r\n```\r\n\r\nHere, there&#39;s also a link to test the code:\r\n\r\nhttps://ideone.com/Kd8xrI","title":"Java 8 Streams - How to get an equivalent of partitioningBy() with Integer keys?","body":"<p>You could use the terminal operation <code>collect(Collectors.toMap())</code> to group by your predicate and instead of returning its <code>boolean</code> value as the key you could use a ternary operator to return either 1 or 0.</p>\n<blockquote>\n<p>to convert the boolean keys to the int type</p>\n</blockquote>\n<p>Then, you could map to that key a <code>List</code> built on the <code>String</code> you tested the <code>Predicate</code> with, and to handle the colliding cases you could add the <code>List</code> associated to the second key into the <code>List</code> corresponding to the first key.</p>\n<p>Here's a snippet of the code:</p>\n<pre><code>//My silly test Predicate\nPredicate&lt;String&gt; p = s -&gt; s.length() &gt; 4;\n\n//Mapping the numbers list\nMap&lt;Integer, List&lt;String&gt;&gt; partitioned = numbers.stream()\n        .collect(Collectors.toMap(s -&gt; p.test(s) ? 1 : 0, \n            s -&gt; new ArrayList&lt;&gt;(List.of(s)), \n            (list1, list2) -&gt; {\n                list1.addAll(list2);\n                return list1;\n            }\n        ));\n</code></pre>\n<p>Here, there's also a link to test the code:</p>\n<p><a href=\"https://ideone.com/Kd8xrI\" rel=\"nofollow noreferrer\">https://ideone.com/Kd8xrI</a></p>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1652438730,"creation_date":1652438730,"answer_id":72228329,"question_id":72223947,"body_markdown":"&gt; Is it possible to convert the boolean keys to the `int` type inside the\r\n&gt; partitioning logic\r\n\r\nSo you need to associate the values in a list with `0` and `1` (*for instance, in order to store the data into the database*) based on the given *predicate*.\r\n\r\nFor that, instead of `partitioningBy()` you can use collector [`groupingBy()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#groupingBy(java.util.function.Function)) in conjunction with the *predicate*.\r\n```\r\nMap&lt;Integer, List&lt;String&gt;&gt; partitioned = numbers.stream()\r\n    .collect(Collectors.groupingBy(num -&gt; predicate.test(num) ? 1 : 0));\r\n```","title":"Java 8 Streams - How to get an equivalent of partitioningBy() with Integer keys?","body":"<blockquote>\n<p>Is it possible to convert the boolean keys to the <code>int</code> type inside the\npartitioning logic</p>\n</blockquote>\n<p>So you need to associate the values in a list with <code>0</code> and <code>1</code> (<em>for instance, in order to store the data into the database</em>) based on the given <em>predicate</em>.</p>\n<p>For that, instead of <code>partitioningBy()</code> you can use collector <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#groupingBy(java.util.function.Function)\" rel=\"nofollow noreferrer\"><code>groupingBy()</code></a> in conjunction with the <em>predicate</em>.</p>\n<pre><code>Map&lt;Integer, List&lt;String&gt;&gt; partitioned = numbers.stream()\n    .collect(Collectors.groupingBy(num -&gt; predicate.test(num) ? 1 : 0));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6123562,"reputation":1,"user_id":4776301,"display_name":"Umesh Kumar Yadav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691251596,"creation_date":1691251596,"answer_id":76842478,"question_id":72223947,"body_markdown":"Assuming that below class -\r\n\r\n    public class Employee {\r\n    \tint id;\r\n    \tString name;\r\n    \tint age;\r\n    \tString gender;\r\n    // getters n setters\r\n    }\r\n\r\n// Now to group or get the count of, Employees based on Gender, we can use below codes\r\n\r\n    Map&lt;String, Long&gt; noOfMaleAndFemaleEmployees =\r\n    \t\temployeeList.stream().collect(Collectors.groupingBy(Employee::getGender, Collectors.counting()));\r\n    \t\t        \r\n    System.out.println(noOfMaleAndFemaleEmployees);\r\n    \r\n    System.out.println(employeeList.stream().map(Employee::getGender)\r\n    \t\t\t\t.filter(e -&gt; e.equalsIgnoreCase(&quot;male&quot;)).count());  \r\n\r\n// Filters can be used as well\r\n    \r\n    System.out.println(employeeList.stream()\r\n    \t\t\t\t.collect(Collectors.partitioningBy(e-&gt; e.getGender().equalsIgnoreCase(&quot;Male&quot;), \r\n    \t\t\t\t\t\tCollectors.counting())));\r\n\r\n","title":"Java 8 Streams - How to get an equivalent of partitioningBy() with Integer keys?","body":"<p>Assuming that below class -</p>\n<pre><code>public class Employee {\n    int id;\n    String name;\n    int age;\n    String gender;\n// getters n setters\n}\n</code></pre>\n<p>// Now to group or get the count of, Employees based on Gender, we can use below codes</p>\n<pre><code>Map&lt;String, Long&gt; noOfMaleAndFemaleEmployees =\n        employeeList.stream().collect(Collectors.groupingBy(Employee::getGender, Collectors.counting()));\n                \nSystem.out.println(noOfMaleAndFemaleEmployees);\n\nSystem.out.println(employeeList.stream().map(Employee::getGender)\n                .filter(e -&gt; e.equalsIgnoreCase(&quot;male&quot;)).count());  \n</code></pre>\n<p>// Filters can be used as well</p>\n<pre><code>System.out.println(employeeList.stream()\n                .collect(Collectors.partitioningBy(e-&gt; e.getGender().equalsIgnoreCase(&quot;Male&quot;), \n                        Collectors.counting())));\n</code></pre>\n"}],"owner":{"account_id":1193165,"reputation":6176,"user_id":1165493,"accept_rate":55,"display_name":"Sandah Aung"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":791,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72225501,"answer_count":3,"score":1,"last_activity_date":1691251596,"creation_date":1652410127,"question_id":72223947,"body_markdown":"In the code shown below, `p` is a predicate of type `Predicate&lt;String&gt;`.  \r\n\r\n    Map&lt;Boolean, List&lt;String&gt;&gt; partitioned = numbers.stream()\r\n        .collect(Collectors.partitioningBy(p));\r\n\r\nIs it possible to convert the `boolean` keys to the `int` type inside the partitioning logic rather than having another stream? \r\n\r\nLooks like it could be done with `grouping`.\r\n\r\n    Map&lt;String, List&lt;String&gt;&gt; targetTableColumnListMap = nqColumnMapList.stream()\r\n        .flatMap(m -&gt; m.entrySet().stream())\r\n        .collect(Collectors.groupingBy(\r\n            e -&gt; e.getKey().toUpperCase(), \r\n            Collectors.mapping(Map.Entry::getValue, Collectors.toList())\r\n        ));","title":"Java 8 Streams - How to get an equivalent of partitioningBy() with Integer keys?","body":"<p>In the code shown below, <code>p</code> is a predicate of type <code>Predicate&lt;String&gt;</code>.</p>\n<pre><code>Map&lt;Boolean, List&lt;String&gt;&gt; partitioned = numbers.stream()\n    .collect(Collectors.partitioningBy(p));\n</code></pre>\n<p>Is it possible to convert the <code>boolean</code> keys to the <code>int</code> type inside the partitioning logic rather than having another stream?</p>\n<p>Looks like it could be done with <code>grouping</code>.</p>\n<pre><code>Map&lt;String, List&lt;String&gt;&gt; targetTableColumnListMap = nqColumnMapList.stream()\n    .flatMap(m -&gt; m.entrySet().stream())\n    .collect(Collectors.groupingBy(\n        e -&gt; e.getKey().toUpperCase(), \n        Collectors.mapping(Map.Entry::getValue, Collectors.toList())\n    ));\n</code></pre>\n"},{"tags":["java","lambda","java-8"],"answers":[{"tags":[],"owner":{"account_id":4826640,"reputation":25377,"user_id":3895960,"accept_rate":97,"display_name":"Dici"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1411157198,"creation_date":1411156811,"answer_id":25941558,"question_id":25941528,"body_markdown":"You can do \r\n\r\n    List&lt;String&gt; result = lists.stream()\r\n        .flatMap(l -&gt; l.stream())\r\n        .collect(Collectors.toList());","title":"Collapse List&lt;List&lt;String&gt;&gt; into List&lt;String&gt; using a lambda?","body":"<p>You can do </p>\n\n<pre><code>List&lt;String&gt; result = lists.stream()\n    .flatMap(l -&gt; l.stream())\n    .collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1411156907,"creation_date":1411156907,"answer_id":25941582,"question_id":25941528,"body_markdown":"That&#39;s what flatMap is for :\r\n\r\n    List&lt;String&gt; list = inputList.stream() // create a Stream&lt;List&lt;String&gt;&gt;\r\n                                 .flatMap(l -&gt; l.stream()) // create a Stream&lt;String&gt;\r\n                                                           // of all the Strings in\r\n                                                           // all the internal lists\r\n                                 .collect(Collectors.toList());","title":"Collapse List&lt;List&lt;String&gt;&gt; into List&lt;String&gt; using a lambda?","body":"<p>That's what flatMap is for :</p>\n\n<pre><code>List&lt;String&gt; list = inputList.stream() // create a Stream&lt;List&lt;String&gt;&gt;\n                             .flatMap(l -&gt; l.stream()) // create a Stream&lt;String&gt;\n                                                       // of all the Strings in\n                                                       // all the internal lists\n                             .collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6372402,"reputation":177,"user_id":4944448,"display_name":"Ravirajsinh Vaghela"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1683095423,"creation_date":1683095423,"answer_id":76161005,"question_id":25941528,"body_markdown":"    List&lt;String&gt; result = lists.stream().flatMap(Collection::stream)\r\n    .collect(Collectors.toList());","title":"Collapse List&lt;List&lt;String&gt;&gt; into List&lt;String&gt; using a lambda?","body":"<pre><code>List&lt;String&gt; result = lists.stream().flatMap(Collection::stream)\n.collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11777498,"reputation":1,"user_id":8618365,"display_name":"ankit singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691249431,"creation_date":1691249431,"answer_id":76842335,"question_id":25941528,"body_markdown":"    /*\r\n            Let&#39;s say you have list of list of person names as below\r\n            [[John, Wick], [Patric, Peter], [Nick, Bill]]\r\n        */\r\n        List&lt;List&lt;String&gt;&gt; personsNames =\r\n                List.of(List.of(&quot;John&quot;, &quot;Wick&quot;), List.of(&quot;Patric&quot;, &quot;Peter&quot;), List.of(&quot;Nick&quot;, &quot;Bill&quot;));\r\n\r\n        List&lt;String&gt; finalList = personsNames\r\n                .stream()\r\n                .flatMap(name -&gt; name.stream()).collect(toList());\r\n        \r\n        /*\r\n        * Final result will be like - [John, Wick, Patric, Peter, Nick, Bill]\r\n        */","title":"Collapse List&lt;List&lt;String&gt;&gt; into List&lt;String&gt; using a lambda?","body":"<pre><code>/*\n        Let's say you have list of list of person names as below\n        [[John, Wick], [Patric, Peter], [Nick, Bill]]\n    */\n    List&lt;List&lt;String&gt;&gt; personsNames =\n            List.of(List.of(&quot;John&quot;, &quot;Wick&quot;), List.of(&quot;Patric&quot;, &quot;Peter&quot;), List.of(&quot;Nick&quot;, &quot;Bill&quot;));\n\n    List&lt;String&gt; finalList = personsNames\n            .stream()\n            .flatMap(name -&gt; name.stream()).collect(toList());\n    \n    /*\n    * Final result will be like - [John, Wick, Patric, Peter, Nick, Bill]\n    */\n</code></pre>\n"}],"owner":{"account_id":942497,"reputation":95,"user_id":1048401,"display_name":"Hydrosan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7895,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":25941582,"answer_count":4,"score":7,"last_activity_date":1691249431,"creation_date":1411156679,"question_id":25941528,"body_markdown":"Say I have a list of Lists.. \r\n\r\n    List&lt;List&lt;String&gt;&gt; lists = new ArrayList&lt;&gt;();\r\n\r\nIs there a clever lambda way to collapse this into a List&lt;String&gt; of all the contents ?","title":"Collapse List&lt;List&lt;String&gt;&gt; into List&lt;String&gt; using a lambda?","body":"<p>Say I have a list of Lists.. </p>\n\n<pre><code>List&lt;List&lt;String&gt;&gt; lists = new ArrayList&lt;&gt;();\n</code></pre>\n\n<p>Is there a clever lambda way to collapse this into a List of all the contents ?</p>\n"},{"tags":["java","kotlin","mockk"],"comments":[{"owner":{"account_id":20928711,"reputation":3225,"user_id":15375588,"display_name":"Karsten Gabriel"},"score":0,"creation_date":1691478583,"post_id":76841359,"comment_id":135493238,"body_markdown":"What does it mean that the two lines do not work as intended? How do they work? And what is your expectation? Maybe add a bit more context of the test than just the two lines?","body":"What does it mean that the two lines do not work as intended? How do they work? And what is your expectation? Maybe add a bit more context of the test than just the two lines?"},{"owner":{"account_id":25676050,"reputation":64,"user_id":19439460,"display_name":"nickklon"},"score":0,"creation_date":1697914621,"post_id":76841359,"comment_id":136340300,"body_markdown":"After mocking the constructor with mockkConstructor, are you mocking the methods on the handler with anyConstructed() or constructedWith() ?","body":"After mocking the constructor with mockkConstructor, are you mocking the methods on the handler with anyConstructed() or constructedWith() ?"}],"owner":{"account_id":29165370,"reputation":1,"user_id":22343095,"display_name":"Magic Man"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691249329,"creation_date":1691233711,"question_id":76841359,"body_markdown":"Code:\r\n\r\n    public class MyApplication extends Application {\r\n        private Handler handler;\r\n        private Context context;\r\n    \r\n        @Override\r\n        public void onCreate() {\r\n            super.onCreate();\r\n            context = getApplicationContext();\r\n    \r\n            handler = new Handler(context.getMainLooper()) {\r\n                @Override\r\n                public void handleMessage(Message msg) {\r\n                    switch (msg.what) {\r\n                        case 1:\r\n                        Handle message case 1\r\n                        break;\r\n                        case 2:\r\n                        Handle message case 2\r\n                        break;\r\n                        Add more cases as needed\r\n                        default:\r\n                        Handle other cases or provide a default behavior\r\n                        break;\r\n                    }\r\n                }\r\n            };\r\n    \r\n            Sending message with code 1 to the handler\r\n            handler.obtainMessage(1).sendToTarget();\r\n    \r\n            Sending message with code 2 to the handler\r\n            handler.obtainMessage(2).sendToTarget();\r\n        }\r\n    }\r\n\r\n \r\nProblem: handler object always gives null during executing the unit test.\r\n\r\nQuestion: How to mock the Handler class to initialize the instance to handler object? Using the instance, I need to handle the message.\r\n\r\n    every { mockContext.mainLooper } returns mockLooper\r\n    mockkConstructor(Handler::class)\r\n\r\nThese lines do not work as intended.\r\n","title":"How to test using mockk library kotlin for Handler class?","body":"<p>Code:</p>\n<pre><code>public class MyApplication extends Application {\n    private Handler handler;\n    private Context context;\n\n    @Override\n    public void onCreate() {\n        super.onCreate();\n        context = getApplicationContext();\n\n        handler = new Handler(context.getMainLooper()) {\n            @Override\n            public void handleMessage(Message msg) {\n                switch (msg.what) {\n                    case 1:\n                    Handle message case 1\n                    break;\n                    case 2:\n                    Handle message case 2\n                    break;\n                    Add more cases as needed\n                    default:\n                    Handle other cases or provide a default behavior\n                    break;\n                }\n            }\n        };\n\n        Sending message with code 1 to the handler\n        handler.obtainMessage(1).sendToTarget();\n\n        Sending message with code 2 to the handler\n        handler.obtainMessage(2).sendToTarget();\n    }\n}\n</code></pre>\n<p>Problem: handler object always gives null during executing the unit test.</p>\n<p>Question: How to mock the Handler class to initialize the instance to handler object? Using the instance, I need to handle the message.</p>\n<pre><code>every { mockContext.mainLooper } returns mockLooper\nmockkConstructor(Handler::class)\n</code></pre>\n<p>These lines do not work as intended.</p>\n"},{"tags":["java","junit","h2"],"answers":[{"tags":[],"owner":{"account_id":92073,"reputation":1,"user_id":252518,"accept_rate":71,"display_name":"Freeman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691247663,"creation_date":1691229567,"answer_id":76841089,"question_id":76841021,"body_markdown":"I think you can use the `@AfterEach` annotation instead of `@AfterAll` to ensure that the cleanup is performed after each individual test, so in `H2DatabaseConfig` class change the `@AfterEach` like below :\r\n\r\n    @AfterEach\r\n    public void tearDown() throws SQLException {\r\n        entityManager.clear(); //clear entities from the session\r\n        connection.close();\r\n        server.stop();\r\n    }\r\n\r\nand edit the `persistence.xml` file to include the `javax.persistence.schema-generation.database.action` property with &quot;drop-and-create&quot; to drop and recreate the database schema for each test and ensuring a clean state before running the tests like below:\r\n\r\n    &lt;property name=&quot;javax.persistence.schema-generation.database.action&quot; value=&quot;drop-and-create&quot;/&gt;\r\n\r\n\r\n**update**\r\n\r\nabout your last comments,better to make sure that you are properly clearing and resetting the persistence context between tests,in your `H2DatabaseConfig` class, add the `entityManager.clear()` method call in the `tearDown()` method and verify that your tests are not sharing or reusing the same instances of entities.each test should create its own instances of entities to avoid conflicts!","title":"JUnit - No Spring Boot - Clean H2 Database between each test","body":"<p>I think you can use the <code>@AfterEach</code> annotation instead of <code>@AfterAll</code> to ensure that the cleanup is performed after each individual test, so in <code>H2DatabaseConfig</code> class change the <code>@AfterEach</code> like below :</p>\n<pre><code>@AfterEach\npublic void tearDown() throws SQLException {\n    entityManager.clear(); //clear entities from the session\n    connection.close();\n    server.stop();\n}\n</code></pre>\n<p>and edit the <code>persistence.xml</code> file to include the <code>javax.persistence.schema-generation.database.action</code> property with &quot;drop-and-create&quot; to drop and recreate the database schema for each test and ensuring a clean state before running the tests like below:</p>\n<pre><code>&lt;property name=&quot;javax.persistence.schema-generation.database.action&quot; value=&quot;drop-and-create&quot;/&gt;\n</code></pre>\n<p><strong>update</strong></p>\n<p>about your last comments,better to make sure that you are properly clearing and resetting the persistence context between tests,in your <code>H2DatabaseConfig</code> class, add the <code>entityManager.clear()</code> method call in the <code>tearDown()</code> method and verify that your tests are not sharing or reusing the same instances of entities.each test should create its own instances of entities to avoid conflicts!</p>\n"}],"owner":{"account_id":12669767,"reputation":385,"user_id":9207677,"display_name":"djulb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":207,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76841089,"answer_count":1,"score":0,"last_activity_date":1691247663,"creation_date":1691228468,"question_id":76841021,"body_markdown":"I am having issue setting up H2 database for JUnit.\r\nImportant to note - I am not using spring boot autoconfiguration.\r\n\r\nI want to purge all data between each test.\r\nTest classes extend H2DatabaseConfig class that sets up H2 connection. \r\nAnd my plan is to purge all data with a @AfterAll annotation.\r\nI dont want to use deleteAll method, like full drop of data (rows and autoincrement reset).\r\n\r\nAt the moment,\r\nwhen i run each test individually everything is fine.\r\nBut when i run all together i get error\r\n\r\n```\r\njakarta.persistence.EntityExistsException: A different object with the same identifier value was already associated with the session : [com.example.database.entity.Team]\r\n```\r\n\r\nI know its related to my parent class.\r\nIts related to the way i am recreating session/connection.\r\nBut not sure how to fix it.\r\n\r\nI appreciate any hint you can give. Thank you in advance\r\n\r\n\r\nH2DatabaseConfig\r\n```\r\npublic class H2DatabaseConfig {\r\n    private static Server server;\r\n    private static Connection connection;\r\n    protected static EntityManagerFactory entityManagerFactory;\r\n    private static EntityManager entityManager;\r\n    @BeforeEach\r\n    public void setUp() throws SQLException {\r\n        server = Server.createTcpServer().start();\r\n        connection = DriverManager.getConnection(&quot;jdbc:h2:mem:test;MODE=MYSQL&quot;, &quot;root&quot;, &quot;password&quot;);\r\n\r\n        entityManagerFactory = Persistence.createEntityManagerFactory(&quot;entity-manager-test&quot;);\r\n        entityManager = entityManagerFactory.createEntityManager();\r\n        Container.initBeans(entityManager);\r\n    }\r\n\r\n    @AfterEach\r\n    public void tearDown() throws SQLException {\r\n        connection.close();\r\n        server.stop();\r\n    }\r\n}\r\n```\r\n\r\nTestClass\r\n```\r\nclass FormTeamAddControllerTest extends H2DatabaseConfig {\r\n\r\n    private FormTeamAddController formTeamAddController;\r\n    private TeamSavePort teamSavePort;\r\n\r\n    @BeforeEach\r\n    public void set() {\r\n        formTeamAddController = new FormTeamAddController();\r\n        teamSavePort = Container.getBean(TeamSavePort.class);\r\n    }\r\n    @Test\r\n    public void shouldSaveTeam() {\r\n        // when\r\n        ValidatorResponse save = formTeamAddController.save(&quot;Lowe&quot;, &quot;123&quot;);\r\n\r\n        // then\r\n        assertTrue(save.isOk());\r\n        assertEquals(TeamInputValidator.msgTeamIsCreated(&quot;Lowe&quot;), save.getMessage());\r\n    }\r\n\r\n    @Test\r\n    public void shouldNotSaveTeamCauseDuplicateTeamName() {\r\n        teamSavePort.save(&quot;Star&quot;, BigDecimal.valueOf(123));\r\n        // when\r\n        ValidatorResponse save = formTeamAddController.save(&quot;Star&quot;, &quot;123&quot;);\r\n\r\n        // then\r\n        assertTrue(save.hasErrors());\r\n        assertEquals(save.getErrors().get(&quot;name&quot;), TeamInputValidator.errTeamNameExists());\r\n    }\r\n\r\n    @Test\r\n    public void shouldNotSaveTeamCauseWrongName() {\r\n        // when\r\n        ValidatorResponse save1 = formTeamAddController.save(null, &quot;123&quot;);\r\n        ValidatorResponse save2 = formTeamAddController.save(&quot;  &quot;, &quot;123&quot;);\r\n        ValidatorResponse save3 = formTeamAddController.save(&quot;&quot;, &quot;123&quot;);\r\n\r\n        // then\r\n        assertTrue(save1.hasErrors());\r\n        assertTrue(save2.hasErrors());\r\n        assertTrue(save3.hasErrors());\r\n\r\n        assertEquals(save1.getErrors().get(&quot;name&quot;), TeamInputValidator.errTeamName());\r\n        assertEquals(save2.getErrors().get(&quot;name&quot;), TeamInputValidator.errTeamName());\r\n        assertEquals(save3.getErrors().get(&quot;name&quot;), TeamInputValidator.errTeamName());\r\n    }\r\n\r\n    @Test\r\n    public void shouldNotSaveTeamCauseWrongMembershipFee() {\r\n        // when\r\n        ValidatorResponse save1 = formTeamAddController.save(&quot;Star&quot;, null);\r\n        ValidatorResponse save2 = formTeamAddController.save(&quot;Star&quot;, &quot;   &quot;);\r\n        ValidatorResponse save3 = formTeamAddController.save(&quot;Star&quot;, &quot;&quot;);\r\n\r\n        // then\r\n        assertTrue(save1.hasErrors());\r\n        assertTrue(save2.hasErrors());\r\n        assertTrue(save3.hasErrors());\r\n\r\n        assertEquals(TeamInputValidator.errTeamFee(), save1.getErrors().get(&quot;membershipPayment&quot;));\r\n        assertEquals(TeamInputValidator.errTeamFee(), save2.getErrors().get(&quot;membershipPayment&quot;));\r\n        assertEquals(TeamInputValidator.errTeamFee(), save3.getErrors().get(&quot;membershipPayment&quot;));\r\n    }\r\n\r\n}\r\n```\r\npersistence.xml\r\n```\r\n    &lt;persistence-unit name=&quot;entity-manager-test&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\r\n        &lt;class&gt;com.example.database.entity.Team&lt;/class&gt;\r\n\r\n        &lt;properties&gt;\r\n            &lt;property name=&quot;javax.persistence.jdbc.driver&quot; value=&quot;org.h2.Driver&quot; /&gt;\r\n            &lt;property name=&quot;javax.persistence.jdbc.url&quot; value=&quot;jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;INIT=CREATE SCHEMA IF NOT EXISTS test&quot; /&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.user&quot;   value=&quot;root&quot; /&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.password&quot; value=&quot;password&quot; /&gt;\r\n\r\n            &lt;!-- Generate the database schema --&gt;\r\n            &lt;property name=&quot;javax.persistence.schema-generation.database.action&quot; value=&quot;drop-and-create&quot;/&gt;\r\n\r\n            &lt;!-- Customize the schema generation behavior --&gt;\r\n            &lt;property name=&quot;javax.persistence.schema-generation.create-source&quot; value=&quot;metadata&quot;/&gt;\r\n            &lt;property name=&quot;javax.persistence.schema-generation.drop-source&quot; value=&quot;metadata&quot;/&gt;\r\n            &lt;property name=&quot;javax.persistence.schema-generation.scripts.action&quot; value=&quot;none&quot;/&gt;\r\n\r\n\r\n        &lt;/properties&gt;\r\n    &lt;/persistence-unit&gt;\r\n```","title":"JUnit - No Spring Boot - Clean H2 Database between each test","body":"<p>I am having issue setting up H2 database for JUnit.\nImportant to note - I am not using spring boot autoconfiguration.</p>\n<p>I want to purge all data between each test.\nTest classes extend H2DatabaseConfig class that sets up H2 connection.\nAnd my plan is to purge all data with a @AfterAll annotation.\nI dont want to use deleteAll method, like full drop of data (rows and autoincrement reset).</p>\n<p>At the moment,\nwhen i run each test individually everything is fine.\nBut when i run all together i get error</p>\n<pre><code>jakarta.persistence.EntityExistsException: A different object with the same identifier value was already associated with the session : [com.example.database.entity.Team]\n</code></pre>\n<p>I know its related to my parent class.\nIts related to the way i am recreating session/connection.\nBut not sure how to fix it.</p>\n<p>I appreciate any hint you can give. Thank you in advance</p>\n<p>H2DatabaseConfig</p>\n<pre><code>public class H2DatabaseConfig {\n    private static Server server;\n    private static Connection connection;\n    protected static EntityManagerFactory entityManagerFactory;\n    private static EntityManager entityManager;\n    @BeforeEach\n    public void setUp() throws SQLException {\n        server = Server.createTcpServer().start();\n        connection = DriverManager.getConnection(&quot;jdbc:h2:mem:test;MODE=MYSQL&quot;, &quot;root&quot;, &quot;password&quot;);\n\n        entityManagerFactory = Persistence.createEntityManagerFactory(&quot;entity-manager-test&quot;);\n        entityManager = entityManagerFactory.createEntityManager();\n        Container.initBeans(entityManager);\n    }\n\n    @AfterEach\n    public void tearDown() throws SQLException {\n        connection.close();\n        server.stop();\n    }\n}\n</code></pre>\n<p>TestClass</p>\n<pre><code>class FormTeamAddControllerTest extends H2DatabaseConfig {\n\n    private FormTeamAddController formTeamAddController;\n    private TeamSavePort teamSavePort;\n\n    @BeforeEach\n    public void set() {\n        formTeamAddController = new FormTeamAddController();\n        teamSavePort = Container.getBean(TeamSavePort.class);\n    }\n    @Test\n    public void shouldSaveTeam() {\n        // when\n        ValidatorResponse save = formTeamAddController.save(&quot;Lowe&quot;, &quot;123&quot;);\n\n        // then\n        assertTrue(save.isOk());\n        assertEquals(TeamInputValidator.msgTeamIsCreated(&quot;Lowe&quot;), save.getMessage());\n    }\n\n    @Test\n    public void shouldNotSaveTeamCauseDuplicateTeamName() {\n        teamSavePort.save(&quot;Star&quot;, BigDecimal.valueOf(123));\n        // when\n        ValidatorResponse save = formTeamAddController.save(&quot;Star&quot;, &quot;123&quot;);\n\n        // then\n        assertTrue(save.hasErrors());\n        assertEquals(save.getErrors().get(&quot;name&quot;), TeamInputValidator.errTeamNameExists());\n    }\n\n    @Test\n    public void shouldNotSaveTeamCauseWrongName() {\n        // when\n        ValidatorResponse save1 = formTeamAddController.save(null, &quot;123&quot;);\n        ValidatorResponse save2 = formTeamAddController.save(&quot;  &quot;, &quot;123&quot;);\n        ValidatorResponse save3 = formTeamAddController.save(&quot;&quot;, &quot;123&quot;);\n\n        // then\n        assertTrue(save1.hasErrors());\n        assertTrue(save2.hasErrors());\n        assertTrue(save3.hasErrors());\n\n        assertEquals(save1.getErrors().get(&quot;name&quot;), TeamInputValidator.errTeamName());\n        assertEquals(save2.getErrors().get(&quot;name&quot;), TeamInputValidator.errTeamName());\n        assertEquals(save3.getErrors().get(&quot;name&quot;), TeamInputValidator.errTeamName());\n    }\n\n    @Test\n    public void shouldNotSaveTeamCauseWrongMembershipFee() {\n        // when\n        ValidatorResponse save1 = formTeamAddController.save(&quot;Star&quot;, null);\n        ValidatorResponse save2 = formTeamAddController.save(&quot;Star&quot;, &quot;   &quot;);\n        ValidatorResponse save3 = formTeamAddController.save(&quot;Star&quot;, &quot;&quot;);\n\n        // then\n        assertTrue(save1.hasErrors());\n        assertTrue(save2.hasErrors());\n        assertTrue(save3.hasErrors());\n\n        assertEquals(TeamInputValidator.errTeamFee(), save1.getErrors().get(&quot;membershipPayment&quot;));\n        assertEquals(TeamInputValidator.errTeamFee(), save2.getErrors().get(&quot;membershipPayment&quot;));\n        assertEquals(TeamInputValidator.errTeamFee(), save3.getErrors().get(&quot;membershipPayment&quot;));\n    }\n\n}\n</code></pre>\n<p>persistence.xml</p>\n<pre><code>    &lt;persistence-unit name=&quot;entity-manager-test&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\n        &lt;class&gt;com.example.database.entity.Team&lt;/class&gt;\n\n        &lt;properties&gt;\n            &lt;property name=&quot;javax.persistence.jdbc.driver&quot; value=&quot;org.h2.Driver&quot; /&gt;\n            &lt;property name=&quot;javax.persistence.jdbc.url&quot; value=&quot;jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;INIT=CREATE SCHEMA IF NOT EXISTS test&quot; /&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.user&quot;   value=&quot;root&quot; /&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.password&quot; value=&quot;password&quot; /&gt;\n\n            &lt;!-- Generate the database schema --&gt;\n            &lt;property name=&quot;javax.persistence.schema-generation.database.action&quot; value=&quot;drop-and-create&quot;/&gt;\n\n            &lt;!-- Customize the schema generation behavior --&gt;\n            &lt;property name=&quot;javax.persistence.schema-generation.create-source&quot; value=&quot;metadata&quot;/&gt;\n            &lt;property name=&quot;javax.persistence.schema-generation.drop-source&quot; value=&quot;metadata&quot;/&gt;\n            &lt;property name=&quot;javax.persistence.schema-generation.scripts.action&quot; value=&quot;none&quot;/&gt;\n\n\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n</code></pre>\n"},{"tags":["java","mysql","hql"],"answers":[{"tags":[],"owner":{"account_id":4311362,"reputation":132319,"user_id":3522312,"display_name":"ScaisEdge"},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1572100434,"creation_date":1468246135,"answer_id":38309074,"question_id":38309016,"body_markdown":"You can use date_Sub in a **native SQL** query (not a HQL query!):\r\n\r\n\r\n     &quot;from Users where createdDate =   DATE( DATE_SUB( NOW() , INTERVAL 21 DAY ) )&quot; ","title":"How to Subtract number of days from current date in HQL query","body":"<p>You can use date_Sub in a <strong>native SQL</strong> query (not a HQL query!):</p>\n\n<pre><code> \"from Users where createdDate =   DATE( DATE_SUB( NOW() , INTERVAL 21 DAY ) )\" \n</code></pre>\n"},{"tags":[],"owner":{"account_id":7160388,"reputation":649,"user_id":5471333,"accept_rate":44,"display_name":"Shivam"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1468410629,"creation_date":1468410629,"answer_id":38350940,"question_id":38309016,"body_markdown":"I have solved the issue by using one native SQL query which can get me the exact date.\r\n\r\n    Query sub3Week = session.createSQLQuery(&quot;select DATE( DATE_SUB( CURDATE() , INTERVAL 21 DAY ) ) from dual&quot;);\r\n    List&lt;Date&gt; sub3WeekList = sub3Week.list();\r\nAnd then I use this data in the HQL query like this:\r\n\r\n    Query queryThreeWeek = session.createQuery(&quot;from Users where createdDate = :createdDate&quot;);\r\n    queryThreeWeek.setParameter(&quot;createdDate&quot;, sub3WeekList.get(0).toString());\r\n    List&lt;Users&gt; userDetailsThreeWeekList = queryThreeWeek.list();","title":"How to Subtract number of days from current date in HQL query","body":"<p>I have solved the issue by using one native SQL query which can get me the exact date.</p>\n\n<pre><code>Query sub3Week = session.createSQLQuery(\"select DATE( DATE_SUB( CURDATE() , INTERVAL 21 DAY ) ) from dual\");\nList&lt;Date&gt; sub3WeekList = sub3Week.list();\n</code></pre>\n\n<p>And then I use this data in the HQL query like this:</p>\n\n<pre><code>Query queryThreeWeek = session.createQuery(\"from Users where createdDate = :createdDate\");\nqueryThreeWeek.setParameter(\"createdDate\", sub3WeekList.get(0).toString());\nList&lt;Users&gt; userDetailsThreeWeekList = queryThreeWeek.list();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12695732,"reputation":3368,"user_id":9224219,"display_name":"Datz"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1572327830,"creation_date":1572327830,"answer_id":58601963,"question_id":38309016,"body_markdown":"The **solution with HQL** is quite simple:\r\n\r\n```\r\n\t\tfinal long time = System.currentTimeMillis() - java.time.Duration.ofDays(21).toMillis();\r\n\t\tfinal javax.persistence.Query query = entityManagerOrSession.createQuery(\r\n\t\t\t\t&quot;SELECT x FROM users x WHERE x.createddate&gt; :time&quot;);\r\n\t\tquery.setParameter(&quot;time&quot;, new java.sql.Timestamp(time));\r\n```","title":"How to Subtract number of days from current date in HQL query","body":"<p>The <strong>solution with HQL</strong> is quite simple:</p>\n\n<pre><code>        final long time = System.currentTimeMillis() - java.time.Duration.ofDays(21).toMillis();\n        final javax.persistence.Query query = entityManagerOrSession.createQuery(\n                \"SELECT x FROM users x WHERE x.createddate&gt; :time\");\n        query.setParameter(\"time\", new java.sql.Timestamp(time));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3572050,"reputation":525,"user_id":2982121,"accept_rate":80,"display_name":"apm"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691247368,"creation_date":1691247368,"answer_id":76842205,"question_id":38309016,"body_markdown":"We can just use `+` and `-` operations with dats in hiebrnate. I was able to get it by using the below conditions.\r\n\r\n**Timestamp:**    `CURRENT_TIMESTAMP+4640000`\r\n\r\nDate:    `CURRENT_DATE+1`","title":"How to Subtract number of days from current date in HQL query","body":"<p>We can just use <code>+</code> and <code>-</code> operations with dats in hiebrnate. I was able to get it by using the below conditions.</p>\n<p><strong>Timestamp:</strong>    <code>CURRENT_TIMESTAMP+4640000</code></p>\n<p>Date:    <code>CURRENT_DATE+1</code></p>\n"}],"owner":{"account_id":7160388,"reputation":649,"user_id":5471333,"accept_rate":44,"display_name":"Shivam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23150,"favorite_count":0,"down_vote_count":1,"up_vote_count":10,"accepted_answer_id":38350940,"answer_count":4,"score":9,"last_activity_date":1691247368,"creation_date":1468245955,"question_id":38309016,"body_markdown":"I am using HQL to get the data inserted exact 21 days from now. Here is my Code\r\n\r\n    Query queryThreeWeek = session.createQuery(&quot;from Users where createdDate = CURDATE()-21&quot;);\r\n\tList&lt;Users&gt; userDetailsThreeWeekList = queryThreeWeek.list();\r\nI can not use `createSQLQuery`.\r\nRight now I am not getting any data, but there is data for the date `2016-06-20`. And that is because of the month changed because when I used `CURDATE()-7` I got the correct data of the date `2016-07-04`.\r\nThe calculation for dat is like;\r\n\r\n    2016-07-11 - 7 = 20160704\r\n    2016-07-11 - 21 = 20160690\r\n\r\nI also Tired using `INTERVAL` which is for `native sqlQuery`. Here is my code for using `INTERVAL` in HQL: \r\n\r\n    Query queryThreeWeek = session.createQuery(&quot;from Users where createdDate = DATE( DATE_SUB( NOW() , INTERVAL 21 DAY ) )&quot;);\r\n    List&lt;Users&gt; userDetailsThreeWeekList = queryThreeWeek.list();\r\nAlso tried\r\n\r\n    Query queryThreeWeek = session.createQuery(&quot;from Users where createdDate = DATE( DATE_SUB( CURDATE() , INTERVAL 21 DAY ) )&quot;); \r\n    List&lt;Users&gt; userDetailsThreeWeekList = queryThreeWeek.list();\r\nbut it is giving me exception like: `org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected token: 21`.\r\n\r\nSo what can I use instead of subtracting the day like this: `CURDATE()-21`? in HQL only","title":"How to Subtract number of days from current date in HQL query","body":"<p>I am using HQL to get the data inserted exact 21 days from now. Here is my Code</p>\n\n<pre><code>Query queryThreeWeek = session.createQuery(\"from Users where createdDate = CURDATE()-21\");\nList&lt;Users&gt; userDetailsThreeWeekList = queryThreeWeek.list();\n</code></pre>\n\n<p>I can not use <code>createSQLQuery</code>.\nRight now I am not getting any data, but there is data for the date <code>2016-06-20</code>. And that is because of the month changed because when I used <code>CURDATE()-7</code> I got the correct data of the date <code>2016-07-04</code>.\nThe calculation for dat is like;</p>\n\n<pre><code>2016-07-11 - 7 = 20160704\n2016-07-11 - 21 = 20160690\n</code></pre>\n\n<p>I also Tired using <code>INTERVAL</code> which is for <code>native sqlQuery</code>. Here is my code for using <code>INTERVAL</code> in HQL: </p>\n\n<pre><code>Query queryThreeWeek = session.createQuery(\"from Users where createdDate = DATE( DATE_SUB( NOW() , INTERVAL 21 DAY ) )\");\nList&lt;Users&gt; userDetailsThreeWeekList = queryThreeWeek.list();\n</code></pre>\n\n<p>Also tried</p>\n\n<pre><code>Query queryThreeWeek = session.createQuery(\"from Users where createdDate = DATE( DATE_SUB( CURDATE() , INTERVAL 21 DAY ) )\"); \nList&lt;Users&gt; userDetailsThreeWeekList = queryThreeWeek.list();\n</code></pre>\n\n<p>but it is giving me exception like: <code>org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected token: 21</code>.</p>\n\n<p>So what can I use instead of subtracting the day like this: <code>CURDATE()-21</code>? in HQL only</p>\n"},{"tags":["java","unit-testing"],"comments":[{"owner":{"account_id":5928013,"reputation":41,"user_id":4663358,"display_name":"wtsolid"},"score":0,"creation_date":1529080128,"post_id":3704747,"comment_id":88761052,"body_markdown":"One way could be found here by customizing the ThreadFactory\nhttps://stackoverflow.com/questions/9280846/how-to-interrupt-executorservices-threads/50879442#50879442","body":"One way could be found here by customizing the ThreadFactory <a href=\"https://stackoverflow.com/questions/9280846/how-to-interrupt-executorservices-threads/50879442#50879442\" title=\"how to interrupt executorservices threads\">stackoverflow.com/questions/9280846/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"down_vote_count":0,"up_vote_count":35,"is_accepted":true,"score":35,"last_activity_date":1284415624,"creation_date":1284415624,"answer_id":3704786,"question_id":3704747,"body_markdown":"Right before invoking `addMessage()`, call `Thread.currentThread().interrupt()`. This will set the &quot;interrupt&quot; status flag on the thread. \r\n\r\nIf the interrupted status is set when the call to `put()` is made on a `LinkedBlockingQueue`, an `InterruptedException` will be raised, even if no waiting is required for the `put` (the lock is un-contended).\r\n\r\nBy the way, some efforts to reach 100% coverage are counter-productive and can actually degrade the quality of code.","title":"How to write unit test for &quot;InterruptedException&quot;","body":"<p>Right before invoking <code>addMessage()</code>, call <code>Thread.currentThread().interrupt()</code>. This will set the \"interrupt\" status flag on the thread. </p>\n\n<p>If the interrupted status is set when the call to <code>put()</code> is made on a <code>LinkedBlockingQueue</code>, an <code>InterruptedException</code> will be raised, even if no waiting is required for the <code>put</code> (the lock is un-contended).</p>\n\n<p>By the way, some efforts to reach 100% coverage are counter-productive and can actually degrade the quality of code.</p>\n"},{"tags":[],"owner":{"account_id":142896,"reputation":35109,"user_id":350890,"accept_rate":100,"display_name":"Peter Tillemans"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1525193012,"creation_date":1284415944,"answer_id":3704813,"question_id":3704747,"body_markdown":"Use a mocking library like Easymock and inject a mock LinkedBlockingQueue\r\n\r\ni.e.\r\n\r\n    @Test(expected=InterruptedException.class)\r\n    public void testInterruptedException() {\r\n        LinkedBlockingQueue queue = EasyMock.createMock(LinkedBlockingQueue.class);\r\n        ExampleMessage message = new ExampleMessage();\r\n        queue.put(message);\r\n        EasyMock.expectLastCall.andThrow(new InterruptedException()); \r\n        replay(queue);\r\n        someObject.setQueue(queue);\r\n        someObject.addMessage(msg);\r\n    }\r\n","title":"How to write unit test for &quot;InterruptedException&quot;","body":"<p>Use a mocking library like Easymock and inject a mock LinkedBlockingQueue</p>\n\n<p>i.e.</p>\n\n<pre><code>@Test(expected=InterruptedException.class)\npublic void testInterruptedException() {\n    LinkedBlockingQueue queue = EasyMock.createMock(LinkedBlockingQueue.class);\n    ExampleMessage message = new ExampleMessage();\n    queue.put(message);\n    EasyMock.expectLastCall.andThrow(new InterruptedException()); \n    replay(queue);\n    someObject.setQueue(queue);\n    someObject.addMessage(msg);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5906169,"reputation":10565,"user_id":4647853,"accept_rate":74,"display_name":"Michal Kordas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1510748085,"creation_date":1432188855,"answer_id":30365862,"question_id":3704747,"body_markdown":"Another option is to delegate dealing with `InterruptedException` to **Guava**&#39;s `Uninterruptibles`, so you don&#39;t need to write and test your custom code for it:\r\n\r\n    import static com.google.common.util.concurrent.Uninterruptibles.putUninterruptibly;\r\n\r\n    private final LinkedBlockingQueue&lt;ExampleMessage&gt; queue;  \r\n\r\n    public void addMessage(ExampleMessage message) {  \r\n        putUninterruptibly(queue, message);\r\n    }\r\n","title":"How to write unit test for &quot;InterruptedException&quot;","body":"<p>Another option is to delegate dealing with <code>InterruptedException</code> to <strong>Guava</strong>'s <code>Uninterruptibles</code>, so you don't need to write and test your custom code for it:</p>\n\n<pre><code>import static com.google.common.util.concurrent.Uninterruptibles.putUninterruptibly;\n\nprivate final LinkedBlockingQueue&lt;ExampleMessage&gt; queue;  \n\npublic void addMessage(ExampleMessage message) {  \n    putUninterruptibly(queue, message);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5928013,"reputation":41,"user_id":4663358,"display_name":"wtsolid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1529330499,"creation_date":1529080222,"answer_id":50879561,"question_id":3704747,"body_markdown":"One proper way could be customizing/injecting the ThreadFactory for the executorservice and from within the thread factory, you got the handle of the thread created, then you can schedule some task to interrupt the thread being interested.\r\n\r\nDemo code part for the overwrited method &quot;newThread&quot; in ThreadFactory:\r\n\r\n    ThreadFactory customThreadfactory new ThreadFactory() {\r\n    \r\n                public Thread newThread(Runnable runnable) {\r\n                    final Thread thread = new Thread(runnable);\r\n                    if (namePrefix != null) {\r\n                        thread.setName(namePrefix + &quot;-&quot; + count.getAndIncrement());\r\n                    }\r\n                    if (daemon != null) {\r\n                        thread.setDaemon(daemon);\r\n                    }\r\n                    if (priority != null) {\r\n                        thread.setPriority(priority);\r\n                    }\r\n    \r\n                    scheduledExecutorService.schedule(new Callable&lt;String&gt;() {\r\n                        public String call() throws Exception {\r\n                            System.out.println(&quot;Executed!&quot;);\r\n                            thread.interrupt();\r\n                            return &quot;Called!&quot;;\r\n    \r\n                        }\r\n                    },\r\n                    5,\r\n                    TimeUnit.SECONDS);\r\n    \r\n                    return thread;\r\n                }\r\n            }\r\n\r\nThen you can use below to construct your executorservice instance:\r\n\r\n    ExecutorService executorService = Executors.newFixedThreadPool(3,\r\n            customThreadfactory);\r\n\r\nThen after 5 seconds, an interrupt signal will be sent to the threads in a way each thread will be interrupted once in executorservice.","title":"How to write unit test for &quot;InterruptedException&quot;","body":"<p>One proper way could be customizing/injecting the ThreadFactory for the executorservice and from within the thread factory, you got the handle of the thread created, then you can schedule some task to interrupt the thread being interested.</p>\n\n<p>Demo code part for the overwrited method \"newThread\" in ThreadFactory:</p>\n\n<pre><code>ThreadFactory customThreadfactory new ThreadFactory() {\n\n            public Thread newThread(Runnable runnable) {\n                final Thread thread = new Thread(runnable);\n                if (namePrefix != null) {\n                    thread.setName(namePrefix + \"-\" + count.getAndIncrement());\n                }\n                if (daemon != null) {\n                    thread.setDaemon(daemon);\n                }\n                if (priority != null) {\n                    thread.setPriority(priority);\n                }\n\n                scheduledExecutorService.schedule(new Callable&lt;String&gt;() {\n                    public String call() throws Exception {\n                        System.out.println(\"Executed!\");\n                        thread.interrupt();\n                        return \"Called!\";\n\n                    }\n                },\n                5,\n                TimeUnit.SECONDS);\n\n                return thread;\n            }\n        }\n</code></pre>\n\n<p>Then you can use below to construct your executorservice instance:</p>\n\n<pre><code>ExecutorService executorService = Executors.newFixedThreadPool(3,\n        customThreadfactory);\n</code></pre>\n\n<p>Then after 5 seconds, an interrupt signal will be sent to the threads in a way each thread will be interrupted once in executorservice.</p>\n"},{"tags":[],"owner":{"account_id":5416976,"reputation":441,"user_id":4311867,"display_name":"ixi"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1536307568,"creation_date":1536307568,"answer_id":52218098,"question_id":3704747,"body_markdown":"As stated above just make use `Thread.currentThread().interrupt()` if you caught `InterruptedException` and isn&#39;t going to rethrow it.\r\n\r\nAs for the unit testing. Test this way: `Assertions.assertThat(Thread.interrupted()).isTrue();`. It both checks that the thread was interrupted and clears the interruption flag so that it won&#39;t break other test, code coverage or anything below.","title":"How to write unit test for &quot;InterruptedException&quot;","body":"<p>As stated above just make use <code>Thread.currentThread().interrupt()</code> if you caught <code>InterruptedException</code> and isn't going to rethrow it.</p>\n\n<p>As for the unit testing. Test this way: <code>Assertions.assertThat(Thread.interrupted()).isTrue();</code>. It both checks that the thread was interrupted and clears the interruption flag so that it won't break other test, code coverage or anything below.</p>\n"},{"tags":[],"owner":{"account_id":3533121,"reputation":1545,"user_id":2952093,"accept_rate":88,"display_name":"kap"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1608554040,"creation_date":1608554040,"answer_id":65392868,"question_id":3704747,"body_markdown":"The example code in the question may be testable by calling `Thread.currentThread().interrupt()`. However, besides the mentioned problems various methods reset the `interrupted` flag. An extensive list is for example here: https://stackoverflow.com/a/12339487/2952093. There may be other methods as well.\r\n\r\nAssuming waiting implemented as follows should be tested:\r\n\r\n    try {\r\n      TimeUnit.SECONDS.sleep(10);\r\n    } catch (InterruptedException ex) {\r\n        // Set the interrupt flag, this is best practice for library code\r\n        Thread.currentThread().interrupt();\r\n        throw new RuntimeException(ex);\r\n    }\r\n\r\nA call to `Thread.sleep` itself clears the `interrupted` flag, so it cannot be set in advance. It can be tested using its own test thread as follows:\r\n\r\n    AtomicBoolean threadInterrupted = new AtomicBoolean(false);\r\n    Runnable toBeInterrupted = () -&gt; {\r\n        try {\r\n            methodUnderTest();\r\n        } catch (RuntimeException unused) {\r\n            // Expected exception\r\n            threadInterrupted.set(true);\r\n        }\r\n    };\r\n\r\n    // Execute the in an operation test thread\r\n    Thread testThread = new Thread(toBeInterrupted);\r\n    testThread.start();\r\n\r\n    // When the test thread is waiting, interrupt\r\n    while (!threadInterrupted.get()) {\r\n        if (testThread.getState() == Thread.State.TIMED_WAITING) {\r\n            testThread.interrupt();\r\n        }\r\n    }\r\n\r\n    // Assert that the interrupted state is re-set after catching the exception\r\n    // Must be happening before thread is joined, as this will clear the flag\r\n    assertThat(testThread.isInterrupted(), is(true));\r\n    testThread.join();","title":"How to write unit test for &quot;InterruptedException&quot;","body":"<p>The example code in the question may be testable by calling <code>Thread.currentThread().interrupt()</code>. However, besides the mentioned problems various methods reset the <code>interrupted</code> flag. An extensive list is for example here: <a href=\"https://stackoverflow.com/a/12339487/2952093\">https://stackoverflow.com/a/12339487/2952093</a>. There may be other methods as well.</p>\n<p>Assuming waiting implemented as follows should be tested:</p>\n<pre><code>try {\n  TimeUnit.SECONDS.sleep(10);\n} catch (InterruptedException ex) {\n    // Set the interrupt flag, this is best practice for library code\n    Thread.currentThread().interrupt();\n    throw new RuntimeException(ex);\n}\n</code></pre>\n<p>A call to <code>Thread.sleep</code> itself clears the <code>interrupted</code> flag, so it cannot be set in advance. It can be tested using its own test thread as follows:</p>\n<pre><code>AtomicBoolean threadInterrupted = new AtomicBoolean(false);\nRunnable toBeInterrupted = () -&gt; {\n    try {\n        methodUnderTest();\n    } catch (RuntimeException unused) {\n        // Expected exception\n        threadInterrupted.set(true);\n    }\n};\n\n// Execute the in an operation test thread\nThread testThread = new Thread(toBeInterrupted);\ntestThread.start();\n\n// When the test thread is waiting, interrupt\nwhile (!threadInterrupted.get()) {\n    if (testThread.getState() == Thread.State.TIMED_WAITING) {\n        testThread.interrupt();\n    }\n}\n\n// Assert that the interrupted state is re-set after catching the exception\n// Must be happening before thread is joined, as this will clear the flag\nassertThat(testThread.isInterrupted(), is(true));\ntestThread.join();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":87230,"reputation":36816,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691245667,"creation_date":1691245667,"answer_id":76842093,"question_id":3704747,"body_markdown":"To expand on @ixi&#39;s answer here&#39;s a code example.\r\nThe purpose of the test is to ensure correct implementation of the `InterruptedException` handling on code that is not able to rethrow `InterruptedException`.\r\n\r\n\r\nThis is assuming that the code in the OP was done correctly.  In which case the corrected code would be:\r\n\r\n```java\r\n@RequiredArgsConstructor\r\n@Slf4j\r\nclass SomeClass {\r\n  private final LinkedBlockingQueue&lt;ExampleMessage&gt; m_Queue;  \r\n\r\n  public void addMessage(ExampleMessage hm) {  \r\n    if (hm!=null){\r\n      try {\r\n        m_Queue.put(hm);\r\n      } catch (InterruptedException e) {\r\n        Thread.currentThread().interrupt();\r\n        log.warn(&quot;Thread interrupted&quot;, e);\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThe test would be\r\n\r\n```java\r\n@Test\r\npublic void testInterruptedException() throws Exception {\r\n  @SuppressWarnings(&quot;unchecked&quot;)\r\n  final LinkedBlockingQueue&lt;ExampleMessage&gt; queue = \r\n    spy(LinkedBlockingQueue.class);\r\n\r\n  doThrow(InterruptedException.class)\r\n    .when(queue)\r\n    .put(any(ExampleMessage.class));\r\n\r\n  queue.put(mock(ExampleMessage.class));\r\n  \r\n  assertThat(Thread.interrupted())\r\n   .isTrue();\r\n\r\n}\r\n```\r\n\r\nAs I noted earlier, a test like this guards your implementation so that you ensure correct implementation of the `InterruptedException` handling.","title":"How to write unit test for &quot;InterruptedException&quot;","body":"<p>To expand on @ixi's answer here's a code example.\nThe purpose of the test is to ensure correct implementation of the <code>InterruptedException</code> handling on code that is not able to rethrow <code>InterruptedException</code>.</p>\n<p>This is assuming that the code in the OP was done correctly.  In which case the corrected code would be:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequiredArgsConstructor\n@Slf4j\nclass SomeClass {\n  private final LinkedBlockingQueue&lt;ExampleMessage&gt; m_Queue;  \n\n  public void addMessage(ExampleMessage hm) {  \n    if (hm!=null){\n      try {\n        m_Queue.put(hm);\n      } catch (InterruptedException e) {\n        Thread.currentThread().interrupt();\n        log.warn(&quot;Thread interrupted&quot;, e);\n      }\n    }\n  }\n}\n</code></pre>\n<p>The test would be</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void testInterruptedException() throws Exception {\n  @SuppressWarnings(&quot;unchecked&quot;)\n  final LinkedBlockingQueue&lt;ExampleMessage&gt; queue = \n    spy(LinkedBlockingQueue.class);\n\n  doThrow(InterruptedException.class)\n    .when(queue)\n    .put(any(ExampleMessage.class));\n\n  queue.put(mock(ExampleMessage.class));\n  \n  assertThat(Thread.interrupted())\n   .isTrue();\n\n}\n</code></pre>\n<p>As I noted earlier, a test like this guards your implementation so that you ensure correct implementation of the <code>InterruptedException</code> handling.</p>\n"}],"owner":{"account_id":22942,"reputation":1336,"user_id":57089,"accept_rate":100,"display_name":"HipsterZipster"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36620,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"accepted_answer_id":3704786,"answer_count":7,"score":27,"last_activity_date":1691245667,"creation_date":1284415224,"question_id":3704747,"body_markdown":"In attempts of 100% code coverage, I came across a situation where I need to unit test block of code that catches an `InterruptedException`. How does one correctly unit test this? (JUnit 4 syntax please)\r\n\r\n\r\n    private final LinkedBlockingQueue&lt;ExampleMessage&gt; m_Queue;  \r\n\r\n    public void addMessage(ExampleMessage hm) {  \r\n  \t    if( hm!=null){\r\n\t        try {\r\n\t\t        m_Queue.put(hm);\r\n\t\t    } catch (InterruptedException e) {\r\n\t\t        e.printStackTrace();\r\n\t\t    }\r\n        }\r\n    }\r\n\r\n","title":"How to write unit test for &quot;InterruptedException&quot;","body":"<p>In attempts of 100% code coverage, I came across a situation where I need to unit test block of code that catches an <code>InterruptedException</code>. How does one correctly unit test this? (JUnit 4 syntax please)</p>\n\n<pre><code>private final LinkedBlockingQueue&lt;ExampleMessage&gt; m_Queue;  \n\npublic void addMessage(ExampleMessage hm) {  \n    if( hm!=null){\n        try {\n            m_Queue.put(hm);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","http","angular6","httpclient"],"comments":[{"owner":{"account_id":58650,"reputation":3399,"user_id":175554,"accept_rate":40,"display_name":"ozkanpakdil"},"score":0,"creation_date":1691526952,"post_id":76842077,"comment_id":135503103,"body_markdown":"the logs shows that there are 2 requests, and there is 53 seconds between them, I think this is coming from outside, you can enable request log https://stackoverflow.com/a/43155103/175554 and see.","body":"the logs shows that there are 2 requests, and there is 53 seconds between them, I think this is coming from outside, you can enable request log <a href=\"https://stackoverflow.com/a/43155103/175554\">stackoverflow.com/a/43155103/175554</a> and see."}],"owner":{"account_id":29166148,"reputation":11,"user_id":22343685,"display_name":"ADKL"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691245397,"creation_date":1691245397,"question_id":76842077,"body_markdown":"I have an microservice application where we use \r\n- Angular 6 (Client)\r\n- Java 8 (Server)\r\n- PostgreSQL (DB)\r\nThe network tab on devtools shows single entry, so I added logs at each level (Filter, Controller, Ps). The log4j logs shows multiple threads created for accessing same query/function, hence delaying the response time.\r\nDoes anyone have any idea?\r\n\r\n[logs](https://i.stack.imgur.com/2nVJJ.png)\r\n\r\nI have tried with adding shareReplay() to the http service to always have single network call  but it is not feasible for me as user can trigger the same nw call again and in that case it won&#39;t work.\r\n\r\nAlso checked my Filter configuration in spring boot, there does not seem any issue as the filter is annotated with @Component and no other extra configuration logic is applied there.\r\n\r\nThere is no multiple subscriptions of the observable that calls the http network call as the UI is blocked until the user gets response from the DB.","title":"Sporadic: REST service gets triggered multiple times even if in DevTools the network call is triggered only once","body":"<p>I have an microservice application where we use</p>\n<ul>\n<li>Angular 6 (Client)</li>\n<li>Java 8 (Server)</li>\n<li>PostgreSQL (DB)\nThe network tab on devtools shows single entry, so I added logs at each level (Filter, Controller, Ps). The log4j logs shows multiple threads created for accessing same query/function, hence delaying the response time.\nDoes anyone have any idea?</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/2nVJJ.png\" rel=\"nofollow noreferrer\">logs</a></p>\n<p>I have tried with adding shareReplay() to the http service to always have single network call  but it is not feasible for me as user can trigger the same nw call again and in that case it won't work.</p>\n<p>Also checked my Filter configuration in spring boot, there does not seem any issue as the filter is annotated with @Component and no other extra configuration logic is applied there.</p>\n<p>There is no multiple subscriptions of the observable that calls the http network call as the UI is blocked until the user gets response from the DB.</p>\n"},{"tags":["java","spring-boot","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1691241689,"post_id":76841832,"comment_id":135467154,"body_markdown":"&quot;*I know that hibernate is capable of generating sql code when we write functions names in specific format in our database interface*&quot; - Afaik, this is a feature of `spring-data-jpa`, not hibernate itself.","body":"&quot;<i>I know that hibernate is capable of generating sql code when we write functions names in specific format in our database interface</i>&quot; - Afaik, this is a feature of <code>spring-data-jpa</code>, not hibernate itself."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1691241886,"post_id":76841832,"comment_id":135467171,"body_markdown":"Are you using `spring-data-jpa`&#39;s `CrudRepository` or `JpaRepository`? If so, you could try adding `List&lt;Notification&gt; findByRoleId(long roleId);` (not sure if it works, but I vaguely remember doing something like this in the poast).","body":"Are you using <code>spring-data-jpa</code>&#39;s <code>CrudRepository</code> or <code>JpaRepository</code>? If so, you could try adding <code>List&lt;Notification&gt; findByRoleId(long roleId);</code> (not sure if it works, but I vaguely remember doing something like this in the poast)."},{"owner":{"account_id":21831314,"reputation":1,"user_id":18754015,"display_name":"Mohammad"},"score":0,"creation_date":1691242500,"post_id":76841832,"comment_id":135467237,"body_markdown":"I&#39;m using spring-data-jpa but just using Repository interface (not JpaRepository or CrudRepositry). I will try","body":"I&#39;m using spring-data-jpa but just using Repository interface (not JpaRepository or CrudRepositry). I will try"}],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691244779,"creation_date":1691244779,"answer_id":76842043,"question_id":76841832,"body_markdown":"Assuming you have a Role entity like this:\r\n```\r\n@Entity\r\npublic class Role {\r\n    private String role;\r\n\r\n\\\\ id and some other fields.\r\n\r\n}\r\n```\r\nTo fetch all notifications that contain a specific role in their roles list you just need to define a method in the JpaRepository like this:\r\n```\r\npublic interface NotificationRepository extends JpaRepository&lt;Notification, Long&gt; {\r\n    List&lt;Notification&gt; findByRolesRole(String role);\r\n}\r\n```\r\nAnd call the method in your service like this:\r\n```\r\n@Autowired\r\nNotificationRepository notificationRepository;\r\n\r\nList&lt;Notification&gt; adminNotifications = notificationRepository.findByRolesRole(&quot;admin&quot;);\r\n```","title":"How to get all entities in database using hibernate with a critria?","body":"<p>Assuming you have a Role entity like this:</p>\n<pre><code>@Entity\npublic class Role {\n    private String role;\n\n\\\\ id and some other fields.\n\n}\n</code></pre>\n<p>To fetch all notifications that contain a specific role in their roles list you just need to define a method in the JpaRepository like this:</p>\n<pre><code>public interface NotificationRepository extends JpaRepository&lt;Notification, Long&gt; {\n    List&lt;Notification&gt; findByRolesRole(String role);\n}\n</code></pre>\n<p>And call the method in your service like this:</p>\n<pre><code>@Autowired\nNotificationRepository notificationRepository;\n\nList&lt;Notification&gt; adminNotifications = notificationRepository.findByRolesRole(&quot;admin&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691244939,"creation_date":1691244939,"answer_id":76842053,"question_id":76841832,"body_markdown":"Multiple ways to consider there, let&#39;s try to breakdown each:\r\n\r\n### Using JPQL\r\n\r\n```java\r\n@Query(&quot;SELECT n FROM Notification n JOIN n.roles r WHERE r.name = :roleName&quot;)\r\nList&lt;Notification&gt; findNotificationsByRoleName(@Param(&quot;roleName&quot;) String roleName);\r\n```\r\n### Using Spring Data JPA method naming\r\n\r\n```java\r\nList&lt;Notification&gt; findByRolesName(String roleName);\r\n```\r\n\r\n### Using the Criteria API\r\n\r\n(more verbose and programmatic approach to construct queries)\r\n\r\n```java\r\nCriteriaBuilder cb = entityManager.getCriteriaBuilder();\r\nCriteriaQuery&lt;Notification&gt; cq = cb.createQuery(Notification.class);\r\nRoot&lt;Notification&gt; notificationRoot = cq.from(Notification.class);\r\nJoin&lt;Notification, Role&gt; roleJoin = notificationRoot.join(&quot;roles&quot;);\r\n\r\nPredicate roleNamePredicate = cb.equal(roleJoin.get(&quot;name&quot;), &quot;admin&quot;);\r\ncq.where(roleNamePredicate);\r\n\r\nTypedQuery&lt;Notification&gt; query = entityManager.createQuery(cq);\r\nList&lt;Notification&gt; notifications = query.getResultList();\r\n```\r\n\r\nBasically, you may choose any. If you prefer a bit more declarative approach and simplicity, then the first two methods are recommended. If you need a dynamic and programmatic approach, then the Criteria API would be the choice","title":"How to get all entities in database using hibernate with a critria?","body":"<p>Multiple ways to consider there, let's try to breakdown each:</p>\n<h3>Using JPQL</h3>\n<pre class=\"lang-java prettyprint-override\"><code>@Query(&quot;SELECT n FROM Notification n JOIN n.roles r WHERE r.name = :roleName&quot;)\nList&lt;Notification&gt; findNotificationsByRoleName(@Param(&quot;roleName&quot;) String roleName);\n</code></pre>\n<h3>Using Spring Data JPA method naming</h3>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Notification&gt; findByRolesName(String roleName);\n</code></pre>\n<h3>Using the Criteria API</h3>\n<p>(more verbose and programmatic approach to construct queries)</p>\n<pre class=\"lang-java prettyprint-override\"><code>CriteriaBuilder cb = entityManager.getCriteriaBuilder();\nCriteriaQuery&lt;Notification&gt; cq = cb.createQuery(Notification.class);\nRoot&lt;Notification&gt; notificationRoot = cq.from(Notification.class);\nJoin&lt;Notification, Role&gt; roleJoin = notificationRoot.join(&quot;roles&quot;);\n\nPredicate roleNamePredicate = cb.equal(roleJoin.get(&quot;name&quot;), &quot;admin&quot;);\ncq.where(roleNamePredicate);\n\nTypedQuery&lt;Notification&gt; query = entityManager.createQuery(cq);\nList&lt;Notification&gt; notifications = query.getResultList();\n</code></pre>\n<p>Basically, you may choose any. If you prefer a bit more declarative approach and simplicity, then the first two methods are recommended. If you need a dynamic and programmatic approach, then the Criteria API would be the choice</p>\n"}],"owner":{"account_id":21831314,"reputation":1,"user_id":18754015,"display_name":"Mohammad"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691244939,"creation_date":1691241403,"question_id":76841832,"body_markdown":"I am writing an springBoot application and have 3 classes :\r\n\r\n    @Table(name = &quot;notification&quot;)\r\n    public class Notification{\r\n      \r\n      @Id\r\n      @Column(&quot;notification_id&quot;)\r\n      // generateStrategy\r\n      long id;\r\n\r\n      @ManyToMany\r\n      List&lt;Role&gt; roles;\r\n      \r\n      @ManyToMany \r\n      List&lt;User&gt; users;\r\n    }\r\n\r\n\r\nanother class :\r\n\r\n    public class Role{\r\n\r\n    \\\\ id and some other fields.\r\n\r\n    }\r\n\r\nthe User class is the same. The relation between Notification and Role is unidirectional.(also true for notification and user)\r\n\r\n\r\nNow, I&#39;m using hibernate to persist data in database.\r\n\r\nmy question is how can I retrieve all Notification which has a given role ? for example I have an &quot;admin&quot; role(which is an object!) and I want to find all notification that contain &quot;admin&quot; in their &quot;roles&quot; list.\r\n\r\n\r\nIs it possible to write just by Hibernate Itself ?(I know that hibernate is capable of generating sql code when we write functions names in specific format in our database interface).\r\n\r\nif it is not possible, how can I write an efficient SQL query manually? ","title":"How to get all entities in database using hibernate with a critria?","body":"<p>I am writing an springBoot application and have 3 classes :</p>\n<pre><code>@Table(name = &quot;notification&quot;)\npublic class Notification{\n  \n  @Id\n  @Column(&quot;notification_id&quot;)\n  // generateStrategy\n  long id;\n\n  @ManyToMany\n  List&lt;Role&gt; roles;\n  \n  @ManyToMany \n  List&lt;User&gt; users;\n}\n</code></pre>\n<p>another class :</p>\n<pre><code>public class Role{\n\n\\\\ id and some other fields.\n\n}\n</code></pre>\n<p>the User class is the same. The relation between Notification and Role is unidirectional.(also true for notification and user)</p>\n<p>Now, I'm using hibernate to persist data in database.</p>\n<p>my question is how can I retrieve all Notification which has a given role ? for example I have an &quot;admin&quot; role(which is an object!) and I want to find all notification that contain &quot;admin&quot; in their &quot;roles&quot; list.</p>\n<p>Is it possible to write just by Hibernate Itself ?(I know that hibernate is capable of generating sql code when we write functions names in specific format in our database interface).</p>\n<p>if it is not possible, how can I write an efficient SQL query manually?</p>\n"},{"tags":["java","date","calendar","timezone"],"comments":[{"owner":{"account_id":45934,"reputation":203649,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1687770322,"post_id":76554980,"comment_id":134977841,"body_markdown":"You forgot to format the result of `calendar.getTime()` with the `SimpleDateFormat`. Change your last line to: `System.out.println(simpleDateFormat.format(calendar.getTime()));`. Better: Do not use the old `java.util.Date` and `java.util.Calendar` classes anymore; use the classes from the package `java.time`.","body":"You forgot to format the result of <code>calendar.getTime()</code> with the <code>SimpleDateFormat</code>. Change your last line to: <code>System.out.println(simpleDateFormat.format(calendar.getTime(&zwnj;&#8203;)));</code>. Better: Do not use the old <code>java.util.Date</code> and <code>java.util.Calendar</code> classes anymore; use the classes from the package <code>java.time</code>."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1691244720,"post_id":76554980,"comment_id":135467419,"body_markdown":"I strongly recommend that you don’t use `Date`, `Calendar` and `SimpleDateFormat`. All of those classes were poorly designed, the last in particular notoriously troublesome, and all are long outdated. Use `Instant` and/or other classes from [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/index.html). If you indispensbly need a `Date` for an API that you cannot afford to upgrade just now, use `Date.from(Instant.now().plus(Duration.ofHours(1)))`. The `Date` will always print in the local time zone of your JVM, though, nothing we can do about that.","body":"I strongly recommend that you don’t use <code>Date</code>, <code>Calendar</code> and <code>SimpleDateFormat</code>. All of those classes were poorly designed, the last in particular notoriously troublesome, and all are long outdated. Use <code>Instant</code> and/or other classes from <a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>. If you indispensbly need a <code>Date</code> for an API that you cannot afford to upgrade just now, use <code>Date.from(Instant.now().plus(Duration.ofHours(1)))</code>. The <code>Date</code> will always print in the local time zone of your JVM, though, nothing we can do about that."}],"answers":[{"tags":[],"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1687790474,"creation_date":1687770779,"answer_id":76555241,"question_id":76554980,"body_markdown":"Try `ZonedTimeDate`:\r\n\r\n```Java\r\nfinal var dateOfDeletion = ZonedDateTime.now()\r\n  .plusHours( 1 )\r\n  .withZoneSameInstant( ZoneId.of( &quot;UTC&quot; ) );\r\n```\r\n\r\n`now()` gives you the current time, `plusHours()` moves that by the given number of hours, and `withZoneSameInstant()` changes the time zone, by keeping the time (the instant).\r\n\r\nOriginally, I used `withZoneSameLocal()`, but that just replaces the original time zone with the given one, without adjusting the time (the instant); in most cases this is not what you want.\r\n\r\nIf you really need an instance of `java.util.Date` you can convert `dateOfDeletion`, but that means you will lose the time zone again.\r\n\r\nIf you just need the date as a string, `dateOfDeletion.toString()` already does the job for an ISO 8601 format. Other formats are possible through a `DateTimeFormatter` instance.\r\n\r\nRefer to the [documentation of the `java.time` package][1].\r\n\r\n---\r\n\r\nFrom the comments, I understood that the PO just want to have a `java.util.Date` adjusted by one hour, provided in UTC.\r\n\r\nInternally, an instance of `java.util.Date` is just a thin wrapper around a `long` representing the milliseconds since the begin of the epoch (1970-01-01T00:00:00.000 UTC). So `Date::getTime` returns this time, already for UTC. To get the adjusted `Date` instance, try this:\r\n\r\n```Java\r\nfinal var dateOfDeletion = new Date( new Date().getTime() + 3_600_000 );\r\n```\r\n\r\nBut printing a `Date` instance with a time zone other than the default one is a challenge …\r\n\r\nYou can convert it to a `Calendar` instance and print that:\r\n\r\n```Java\r\nfinal var calendar = Calendar.getInstance( TimeZone.getTimeZone( &quot;UTC&quot; ) );\r\ncalendar.setTime( dateOfDeletion );\r\nSystem.out.printf(&quot;%tDT%&lt;tT %&lt;tZ%n&quot;, calendar );\r\n```\r\n\r\nBut still your `Date` has no time zone …\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/package-summary.html","title":"How to add an hour and set the timezone to &quot;UTC&quot; in java?","body":"<p>Try <code>ZonedTimeDate</code>:</p>\n<pre><code>final var dateOfDeletion = ZonedDateTime.now()\n  .plusHours( 1 )\n  .withZoneSameInstant( ZoneId.of( &quot;UTC&quot; ) );\n</code></pre>\n<p><code>now()</code> gives you the current time, <code>plusHours()</code> moves that by the given number of hours, and <code>withZoneSameInstant()</code> changes the time zone, by keeping the time (the instant).</p>\n<p>Originally, I used <code>withZoneSameLocal()</code>, but that just replaces the original time zone with the given one, without adjusting the time (the instant); in most cases this is not what you want.</p>\n<p>If you really need an instance of <code>java.util.Date</code> you can convert <code>dateOfDeletion</code>, but that means you will lose the time zone again.</p>\n<p>If you just need the date as a string, <code>dateOfDeletion.toString()</code> already does the job for an ISO 8601 format. Other formats are possible through a <code>DateTimeFormatter</code> instance.</p>\n<p>Refer to the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/package-summary.html\" rel=\"nofollow noreferrer\">documentation of the <code>java.time</code> package</a>.</p>\n<hr />\n<p>From the comments, I understood that the PO just want to have a <code>java.util.Date</code> adjusted by one hour, provided in UTC.</p>\n<p>Internally, an instance of <code>java.util.Date</code> is just a thin wrapper around a <code>long</code> representing the milliseconds since the begin of the epoch (1970-01-01T00:00:00.000 UTC). So <code>Date::getTime</code> returns this time, already for UTC. To get the adjusted <code>Date</code> instance, try this:</p>\n<pre><code>final var dateOfDeletion = new Date( new Date().getTime() + 3_600_000 );\n</code></pre>\n<p>But printing a <code>Date</code> instance with a time zone other than the default one is a challenge …</p>\n<p>You can convert it to a <code>Calendar</code> instance and print that:</p>\n<pre><code>final var calendar = Calendar.getInstance( TimeZone.getTimeZone( &quot;UTC&quot; ) );\ncalendar.setTime( dateOfDeletion );\nSystem.out.printf(&quot;%tDT%&lt;tT %&lt;tZ%n&quot;, calendar );\n</code></pre>\n<p>But still your <code>Date</code> has no time zone …</p>\n"}],"owner":{"account_id":28272340,"reputation":11,"user_id":21615324,"display_name":"Niharika Baruah"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":189,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1691244760,"answer_count":1,"score":1,"last_activity_date":1691244906,"creation_date":1687768863,"question_id":76554980,"body_markdown":"I want to increment an hour to the current time and also get the date in UTC. I tried to use Calender class but that only increments the hour but doesn&#39;t give the Date in UTC timezone, on the other hand, SimpleDateFormat sets the timezone but doesn&#39;t increment an hour. How to do it?\r\n\r\n```Java\r\npublic static void main(String[] args) \r\n{\r\n  Date currentDate = new Date();\r\n\r\n  Calendar calendar = Calendar.getInstance();\r\n  calendar.add(Calendar.HOUR, 1);\r\n  calendar.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));\r\n\r\n  SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;EEE MMM d HH:mm:ss z yyyy&quot;);\r\n  simpleDateFormat.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));\r\n  simpleDateFormat.format(calendar.get(Calendar.HOUR));\r\n\r\n  String dateOfDeletion = simpleDateFormat.format(new Date()).toString();\r\n  System.out.println(currentDate) ;\r\n  System.out.println(dateOfDeletion);\r\n  System.out.print(calendar.getTime());\r\n}\r\n```\r\n\r\nOutput:\r\n\r\nMon Jun 26 14:05:56 IST 2023  \r\nMon Jun 26 08:35:56 UTC 2023  \r\nMon Jun 26 15:05:56 IST 2023\r\n\r\n\r\nI want the date to be in UTC with 1 hour incremented from the current time.","title":"How to add an hour and set the timezone to &quot;UTC&quot; in java?","body":"<p>I want to increment an hour to the current time and also get the date in UTC. I tried to use Calender class but that only increments the hour but doesn't give the Date in UTC timezone, on the other hand, SimpleDateFormat sets the timezone but doesn't increment an hour. How to do it?</p>\n<pre><code>public static void main(String[] args) \n{\n  Date currentDate = new Date();\n\n  Calendar calendar = Calendar.getInstance();\n  calendar.add(Calendar.HOUR, 1);\n  calendar.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));\n\n  SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;EEE MMM d HH:mm:ss z yyyy&quot;);\n  simpleDateFormat.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));\n  simpleDateFormat.format(calendar.get(Calendar.HOUR));\n\n  String dateOfDeletion = simpleDateFormat.format(new Date()).toString();\n  System.out.println(currentDate) ;\n  System.out.println(dateOfDeletion);\n  System.out.print(calendar.getTime());\n}\n</code></pre>\n<p>Output:</p>\n<p>Mon Jun 26 14:05:56 IST 2023<br />\nMon Jun 26 08:35:56 UTC 2023<br />\nMon Jun 26 15:05:56 IST 2023</p>\n<p>I want the date to be in UTC with 1 hour incremented from the current time.</p>\n"},{"tags":["java","spring","transactional"],"comments":[{"owner":{"account_id":12339808,"reputation":363,"user_id":9003441,"display_name":"Charis Moutafidis"},"score":0,"creation_date":1554828841,"post_id":55597661,"comment_id":97891898,"body_markdown":"What you need to do is to sync your function, so the execution of the first call blocks the execution of the second. Although, this is totally not efficient. Maybe what you need to do is prevent the function from being called twice.","body":"What you need to do is to sync your function, so the execution of the first call blocks the execution of the second. Although, this is totally not efficient. Maybe what you need to do is prevent the function from being called twice."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":3,"creation_date":1554831833,"post_id":55597661,"comment_id":97893255,"body_markdown":"Depending on which database and technology you use either use a DB lock so that you have singular access. If you use something like hibernate use optimistic locking to prevent this. Also you might want to add some unique indexes so that you prevent duplicates to be inserted (as a last resort).","body":"Depending on which database and technology you use either use a DB lock so that you have singular access. If you use something like hibernate use optimistic locking to prevent this. Also you might want to add some unique indexes so that you prevent duplicates to be inserted (as a last resort)."},{"owner":{"account_id":2602089,"reputation":856,"user_id":2254180,"accept_rate":73,"display_name":"user2254180"},"score":0,"creation_date":1554908931,"post_id":55597661,"comment_id":97925219,"body_markdown":"M. Deinum - moving to Hibernate is not an option, therefore the only solution available is to add a constraint on the database, so your answer is the closest to a solution.","body":"M. Deinum - moving to Hibernate is not an option, therefore the only solution available is to add a constraint on the database, so your answer is the closest to a solution."}],"answers":[{"tags":[],"owner":{"account_id":347993,"reputation":157,"user_id":6520807,"display_name":"ksaraiya"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1554829971,"creation_date":1554829971,"answer_id":55598001,"question_id":55597661,"body_markdown":"Both the calls will open different threads and hence have different transactions. Unless you have something at some place else that&#39;s independent of the database that can tell you a thread is using this resource (like a file with a flag), the only other way is to synchronize your block of code in my opinion.","title":"Service Called Twice At Same Time","body":"<p>Both the calls will open different threads and hence have different transactions. Unless you have something at some place else that's independent of the database that can tell you a thread is using this resource (like a file with a flag), the only other way is to synchronize your block of code in my opinion.</p>\n"},{"tags":[],"owner":{"account_id":10346755,"reputation":21971,"user_id":7631480,"display_name":"CryptoFool"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1554836501,"creation_date":1554831486,"answer_id":55598349,"question_id":55597661,"body_markdown":"You can use the database to do this, possibly even with the status column it seems like maybe you&#39;re already using.  I&#39;m not trying to handle all the details here...just to convey the idea.  The HUGE thing here is that this mechanism works across threads, processes and even machines, any database I&#39;ve ever come across, and you have nothing else to set up.  No Redis, etc. when you get to the point where you want to scale to multiple instances:\r\n\r\nYou would create another state, and use a test-and-set operation:\r\n\r\n    public ServiceResponse update(ServiceRequest serviceRequest) {\r\n    ....\r\n    while true:\r\n        String status = myDao.getStatus();\r\n        if (status.equals(&quot;COMPLETE&quot;)) {\r\n            return serviceError;\r\n        }\r\n        else if (status.equals(&quot;PROCESSING&quot;)) {\r\n            // do whatever you want to do if some other process or thread is\r\n            // already handling this. Maybe also return an error\r\n            return serviceError;\r\n        }\r\n        else if (myDao.testAndUpdateStatus(status, &quot;PROCESSING&quot;)) {\r\n            // You would probably want to re-introduce a transaction here, maybe\r\n            // by moving this block to its own method.  Sorry for cutting a\r\n            // corner here trying to just demonstrate the lock idea, which needs\r\n            // to not be in a transaction.\r\n            try {\r\n                myDao.insertRow();\r\n                myDao.updateStatus(&quot;COMPLETE&quot;);\r\n                sendAlert();\r\n                return serviceOK;\r\n            } catch (Exception ex) {\r\n               // What you do for the failure case will be very app specific. This\r\n               // is mostly to point out that you would want to set the status\r\n               // explicitly in the case of an error, to whatever is appropriate\r\n               myDao.updateStatus(&quot;COMPLETE&quot;)\r\n               return serviceError;\r\n            }\r\n        }\r\n    }\r\n\r\nYou would need to have the lock operation not be transactional...the whole point of it is that each op is truly atomic.  If you really needed transactional semantics, you&#39;d want the final processing block to be wrapped in a transaction somehow.  I&#39;m not trying to get the transactional part of this just right.  I&#39;m pointing out an often used way of controlling synchronization and race conditions by using the database itself.  This mechanism falls outside of the transaction, which would only start once a thread had gotten `true` back from `testAndUpdateStatus`.\r\n\r\nThe key here is that `testAndUpdateStatus()` will only set the status and return `true` if the status passed in as the first parameter is the current status.  Otherwise, it will not do anything and will return `false`.  This solves the race condition where one process samples the status but then another process also samples the same value before you can set the status to `&quot;PROCESSING&quot;`, ending up with two processes handling the same update.  One of the two will fail because the database will fail the operation when the status is no longer what it was when that process read the value.\r\n\r\nNote that this will work not only in a single process, but across processes, and even machines.\r\n            \r\n","title":"Service Called Twice At Same Time","body":"<p>You can use the database to do this, possibly even with the status column it seems like maybe you're already using.  I'm not trying to handle all the details here...just to convey the idea.  The HUGE thing here is that this mechanism works across threads, processes and even machines, any database I've ever come across, and you have nothing else to set up.  No Redis, etc. when you get to the point where you want to scale to multiple instances:</p>\n\n<p>You would create another state, and use a test-and-set operation:</p>\n\n<pre><code>public ServiceResponse update(ServiceRequest serviceRequest) {\n....\nwhile true:\n    String status = myDao.getStatus();\n    if (status.equals(\"COMPLETE\")) {\n        return serviceError;\n    }\n    else if (status.equals(\"PROCESSING\")) {\n        // do whatever you want to do if some other process or thread is\n        // already handling this. Maybe also return an error\n        return serviceError;\n    }\n    else if (myDao.testAndUpdateStatus(status, \"PROCESSING\")) {\n        // You would probably want to re-introduce a transaction here, maybe\n        // by moving this block to its own method.  Sorry for cutting a\n        // corner here trying to just demonstrate the lock idea, which needs\n        // to not be in a transaction.\n        try {\n            myDao.insertRow();\n            myDao.updateStatus(\"COMPLETE\");\n            sendAlert();\n            return serviceOK;\n        } catch (Exception ex) {\n           // What you do for the failure case will be very app specific. This\n           // is mostly to point out that you would want to set the status\n           // explicitly in the case of an error, to whatever is appropriate\n           myDao.updateStatus(\"COMPLETE\")\n           return serviceError;\n        }\n    }\n}\n</code></pre>\n\n<p>You would need to have the lock operation not be transactional...the whole point of it is that each op is truly atomic.  If you really needed transactional semantics, you'd want the final processing block to be wrapped in a transaction somehow.  I'm not trying to get the transactional part of this just right.  I'm pointing out an often used way of controlling synchronization and race conditions by using the database itself.  This mechanism falls outside of the transaction, which would only start once a thread had gotten <code>true</code> back from <code>testAndUpdateStatus</code>.</p>\n\n<p>The key here is that <code>testAndUpdateStatus()</code> will only set the status and return <code>true</code> if the status passed in as the first parameter is the current status.  Otherwise, it will not do anything and will return <code>false</code>.  This solves the race condition where one process samples the status but then another process also samples the same value before you can set the status to <code>\"PROCESSING\"</code>, ending up with two processes handling the same update.  One of the two will fail because the database will fail the operation when the status is no longer what it was when that process read the value.</p>\n\n<p>Note that this will work not only in a single process, but across processes, and even machines.</p>\n"},{"tags":[],"owner":{"account_id":449256,"reputation":2122,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1554834376,"creation_date":1554834376,"answer_id":55599054,"question_id":55597661,"body_markdown":"Unfortunately Hibernate rely on the Database functionality in this case. Hibernate is designed to be able to support other services working with the exact same database. \r\n\r\nThere is a case where we can manualy set the future primary key by modify the generator-strategy. But this will not prevent content-&quot;duplicates&quot;.\r\n\r\nOne solution might be having ReSTful API having a Rest-Entity that &quot;request&quot; the state of the database in a specific state.\r\n\r\nIn example:\r\n\r\n1. Request A to INSERT a Car-Entity.\r\n2. At the same time a second request B arrives to INSERT the Car-Entity.\r\n3. A is executed successfull.\r\n4. B is executed successfull.\r\n5. We have a duplicate.\r\n\r\nTo prevent this we could store a Car-Existence-Request.\r\n\r\n1. Car-Existence-Request A arives the Server.\r\n2. Car-Existence-Request B arives the Server.\r\n3. Both are stoed to the database\r\n4. Car-Existence-Request A finishes.\r\n5. Car-Existence-Request B finishes.\r\n6. Server try to store Car A - succeed.\r\n7. Server try to store Car B - fail -duplicate.\r\n8. Mark Cart-Existence-Request A as successfull.\r\n9. Mark Cart-Existence-Request B as failed.\r\n\r\nOr just switch to PostGreSQL","title":"Service Called Twice At Same Time","body":"<p>Unfortunately Hibernate rely on the Database functionality in this case. Hibernate is designed to be able to support other services working with the exact same database. </p>\n\n<p>There is a case where we can manualy set the future primary key by modify the generator-strategy. But this will not prevent content-\"duplicates\".</p>\n\n<p>One solution might be having ReSTful API having a Rest-Entity that \"request\" the state of the database in a specific state.</p>\n\n<p>In example:</p>\n\n<ol>\n<li>Request A to INSERT a Car-Entity.</li>\n<li>At the same time a second request B arrives to INSERT the Car-Entity.</li>\n<li>A is executed successfull.</li>\n<li>B is executed successfull.</li>\n<li>We have a duplicate.</li>\n</ol>\n\n<p>To prevent this we could store a Car-Existence-Request.</p>\n\n<ol>\n<li>Car-Existence-Request A arives the Server.</li>\n<li>Car-Existence-Request B arives the Server.</li>\n<li>Both are stoed to the database</li>\n<li>Car-Existence-Request A finishes.</li>\n<li>Car-Existence-Request B finishes.</li>\n<li>Server try to store Car A - succeed.</li>\n<li>Server try to store Car B - fail -duplicate.</li>\n<li>Mark Cart-Existence-Request A as successfull.</li>\n<li>Mark Cart-Existence-Request B as failed.</li>\n</ol>\n\n<p>Or just switch to PostGreSQL</p>\n"},{"tags":[],"owner":{"account_id":1019013,"reputation":5314,"user_id":1029926,"accept_rate":64,"display_name":"Somasundaram Sekar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1554838623,"creation_date":1554838623,"answer_id":55600101,"question_id":55597661,"body_markdown":"From your question, I assume the `update(..)` is going to be invoked under some degree of concurrency. \r\n\r\nI see a few problems with this approach of using an external data store for coordination. For default &quot;**Read Committed**&quot; isolation you will encounter what you have encountering now, however, even if you can use &quot;**Read Un-Committed**&quot; you will have a problem where the second transaction having read the dirty &quot;COMPLETE&quot; data, returns but the first transaction may still fail and rollback. \r\n\r\nI propose a couple of approaches(I made a lot of assumptions of-course)\r\n\r\n 1. Idempotency: By making the database updates idempotent, you don&#39;t have to worry about duplicate updates\r\n 2. Compaction: If there is a possibility that latest records are always the correct you can let all the writes pass through but read only the latest records, this is akin to how Kafka does compaction internally\r\n\r\n","title":"Service Called Twice At Same Time","body":"<p>From your question, I assume the <code>update(..)</code> is going to be invoked under some degree of concurrency. </p>\n\n<p>I see a few problems with this approach of using an external data store for coordination. For default \"<strong>Read Committed</strong>\" isolation you will encounter what you have encountering now, however, even if you can use \"<strong>Read Un-Committed</strong>\" you will have a problem where the second transaction having read the dirty \"COMPLETE\" data, returns but the first transaction may still fail and rollback. </p>\n\n<p>I propose a couple of approaches(I made a lot of assumptions of-course)</p>\n\n<ol>\n<li>Idempotency: By making the database updates idempotent, you don't have to worry about duplicate updates</li>\n<li>Compaction: If there is a possibility that latest records are always the correct you can let all the writes pass through but read only the latest records, this is akin to how Kafka does compaction internally</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":21703644,"reputation":1,"user_id":16016474,"display_name":"Ngọc Nguy&#234;̃n"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630153763,"creation_date":1630121992,"answer_id":68961191,"question_id":55597661,"body_markdown":"In my case, I changed build configuration to release when build API.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wZNXW.png","title":"Service Called Twice At Same Time","body":"<p>In my case, I changed build configuration to release when build API.</p>\n<p><a href=\"https://i.stack.imgur.com/wZNXW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wZNXW.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":2602089,"reputation":856,"user_id":2254180,"accept_rate":73,"display_name":"user2254180"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2950,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":5,"score":1,"last_activity_date":1691243183,"creation_date":1554828566,"question_id":55597661,"body_markdown":"I have the following web service written in Java using Spring, I have wrapped it with the @Transactional annotation to ensure we can roll back if required.\r\n\r\nIt works fine, except for the scenario where the service is called twice, with the second call happening before the first call finishes.\r\n\r\nIn that scenario, because the first transaction is still running and hasn&#39;t yet committed to the DB, the second transaction will go through the full method, inserting a duplicate row, updating the status again, and calling sendAlert(). \r\n\r\nHere&#39;s the pseudo code. \r\n\r\n    @Transactional\r\n    public ServiceResponse update(ServiceRequest serviceRequest) {\r\n    ....\r\n    if (myDao.getStatus() == &quot;COMPLETE&quot;) {\r\n     return serviceError;\r\n    }\r\n     myDao.insertRow();\r\n     myDao.updateStatus(&quot;COMPLETE&quot;);\r\n     sendAlert();\r\n    }\r\n\r\nHow can I prevent the second transaction from going through before the first? Setting the isolation level as read uncommitted is not an option as the database doesn&#39;t support it.\r\n","title":"Service Called Twice At Same Time","body":"<p>I have the following web service written in Java using Spring, I have wrapped it with the @Transactional annotation to ensure we can roll back if required.</p>\n\n<p>It works fine, except for the scenario where the service is called twice, with the second call happening before the first call finishes.</p>\n\n<p>In that scenario, because the first transaction is still running and hasn't yet committed to the DB, the second transaction will go through the full method, inserting a duplicate row, updating the status again, and calling sendAlert(). </p>\n\n<p>Here's the pseudo code. </p>\n\n<pre><code>@Transactional\npublic ServiceResponse update(ServiceRequest serviceRequest) {\n....\nif (myDao.getStatus() == \"COMPLETE\") {\n return serviceError;\n}\n myDao.insertRow();\n myDao.updateStatus(\"COMPLETE\");\n sendAlert();\n}\n</code></pre>\n\n<p>How can I prevent the second transaction from going through before the first? Setting the isolation level as read uncommitted is not an option as the database doesn't support it.</p>\n"},{"tags":["java","fitnesse","dbfit"],"owner":{"account_id":22572286,"reputation":133,"user_id":16758296,"display_name":"kim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691243055,"creation_date":1691241940,"question_id":76841859,"body_markdown":"I try connecting to Oracle database with DbFit version 3.2.0\r\n\r\nI&#39;ve start with a postgres Sample\r\n\r\n```\r\n!|Database environment|${DB_ENVIRONMENT}                                                                                       |\r\n|Connect              |jdbc:postgresql://${DB_URL}/${DB_SID}?currentSchema=${DB_SCHEMA}&amp;user=${DB_USER}&amp;password=${DB_PASSWORD}|\r\n```\r\n\r\nthat I adapted to \r\n```\r\n!|Database environment|${DB_ENVIRONMENT}                                                                                       |\r\n|Connect              |jdbc:oracle:thin:${DB_USER}/${DB_PASSWORD}@${DB_URL}/${DB_SID}\r\n```\r\nDB_ENVIRONMET was set to POSTGREJSON that I&#39;ve changed to ORACLE\r\nand I had an error message :\r\n```\r\njava.lang.NullPointerException: Cannot invoke &quot;dbfit.api.DBEnvironment.getConnection()&quot; because the return value of &quot;dbfit.api.DbEnvironmentFactory.getDefaultEnvironment()&quot; is null\r\n```\r\n\r\nI&#39;ve found that some was using\r\n```\r\n!|dbfit.OracleTest|\r\n```\r\nbut I still have the same error message.\r\n\r\nI suppose that I need to set &#39;database environment&#39; to the right values, but did not found any information.\r\nCan anyone help?\r\n","title":"Error connecting to DBFit database : &quot;DbEnvironmentFactory.getDefaultEnvironment()&quot; is null","body":"<p>I try connecting to Oracle database with DbFit version 3.2.0</p>\n<p>I've start with a postgres Sample</p>\n<pre><code>!|Database environment|${DB_ENVIRONMENT}                                                                                       |\n|Connect              |jdbc:postgresql://${DB_URL}/${DB_SID}?currentSchema=${DB_SCHEMA}&amp;user=${DB_USER}&amp;password=${DB_PASSWORD}|\n</code></pre>\n<p>that I adapted to</p>\n<pre><code>!|Database environment|${DB_ENVIRONMENT}                                                                                       |\n|Connect              |jdbc:oracle:thin:${DB_USER}/${DB_PASSWORD}@${DB_URL}/${DB_SID}\n</code></pre>\n<p>DB_ENVIRONMET was set to POSTGREJSON that I've changed to ORACLE\nand I had an error message :</p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;dbfit.api.DBEnvironment.getConnection()&quot; because the return value of &quot;dbfit.api.DbEnvironmentFactory.getDefaultEnvironment()&quot; is null\n</code></pre>\n<p>I've found that some was using</p>\n<pre><code>!|dbfit.OracleTest|\n</code></pre>\n<p>but I still have the same error message.</p>\n<p>I suppose that I need to set 'database environment' to the right values, but did not found any information.\nCan anyone help?</p>\n"},{"tags":["java","hibernate","spring-data-jpa"],"owner":{"account_id":16435976,"reputation":162,"user_id":11873562,"display_name":"IceMajor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691241627,"creation_date":1691241627,"question_id":76841843,"body_markdown":"In my Spring app there&#39;s the `Store` entity and `StoreImage` entity. `StoreImage` may be associated with several `Store`s (store company has one logo, but the company has multiple stores located in different places).\r\n\r\nI&#39;ve managed, I think, to get it working. Below I copy these 2 models and the mapping. I however am not sure if it&#39;s the proper practice. I&#39;d be really grateful for some feedback and explanations of drawbacks of this implementation.\r\n\r\nI&#39;ve mostly based my code on [How to map a @ManyToOne association using a non-Primary Key column with JPA and Hibernate][1] article.\r\n\r\n```\r\n@Table(name = &quot;store&quot;)\r\n@Entity(name = &quot;Store&quot;)\r\npublic class Store {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\r\n\tprivate String name;\r\n\r\n\tprivate String city;\r\n\r\n\tprivate String street;\r\n\r\n\t@ManyToOne(fetch = FetchType.LAZY)\r\n\t@JoinColumn(\r\n\t\t\tname = &quot;name&quot;,\r\n\t\t\treferencedColumnName = &quot;store_name&quot;,\r\n\t\t\tinsertable = false,\r\n\t\t\tupdatable = false\r\n\t)\r\n\tprivate StoreImage image;\r\n\r\n    // getters and setters\r\n}\r\n```\r\n```\r\n@Entity(name = &quot;StoreImage&quot;)\r\n@Table(name = &quot;store_image&quot;)\r\npublic class StoreImage extends ImageModel implements Serializable {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\t@Column(name = &quot;id&quot;)\r\n\tprivate Long id;\r\n\r\n\t@Column(name = &quot;store_name&quot;)\r\n\t@NaturalId\r\n\tprivate String storeName;\r\n\r\n\t@OneToMany(mappedBy = &quot;image&quot;)\r\n\t@JsonIgnore\r\n\tprivate Set&lt;Store&gt; stores = new HashSet&lt;&gt;();\r\n\r\n\tpublic StoreImage(String imageUrl, String remoteId) {\r\n\t\tsuper(imageUrl, remoteId);\r\n\t}\r\n\r\n    // getters and setters\r\n}\r\n```\r\n\r\n\r\n  [1]: https://vladmihalcea.com/how-to-map-a-manytoone-association-using-a-non-primary-key-column/","title":"Many-to-one mapping (with non-primary-key column and &quot;many&quot; side as parent)","body":"<p>In my Spring app there's the <code>Store</code> entity and <code>StoreImage</code> entity. <code>StoreImage</code> may be associated with several <code>Store</code>s (store company has one logo, but the company has multiple stores located in different places).</p>\n<p>I've managed, I think, to get it working. Below I copy these 2 models and the mapping. I however am not sure if it's the proper practice. I'd be really grateful for some feedback and explanations of drawbacks of this implementation.</p>\n<p>I've mostly based my code on <a href=\"https://vladmihalcea.com/how-to-map-a-manytoone-association-using-a-non-primary-key-column/\" rel=\"nofollow noreferrer\">How to map a @ManyToOne association using a non-Primary Key column with JPA and Hibernate</a> article.</p>\n<pre><code>@Table(name = &quot;store&quot;)\n@Entity(name = &quot;Store&quot;)\npublic class Store {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private String name;\n\n    private String city;\n\n    private String street;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(\n            name = &quot;name&quot;,\n            referencedColumnName = &quot;store_name&quot;,\n            insertable = false,\n            updatable = false\n    )\n    private StoreImage image;\n\n    // getters and setters\n}\n</code></pre>\n<pre><code>@Entity(name = &quot;StoreImage&quot;)\n@Table(name = &quot;store_image&quot;)\npublic class StoreImage extends ImageModel implements Serializable {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;)\n    private Long id;\n\n    @Column(name = &quot;store_name&quot;)\n    @NaturalId\n    private String storeName;\n\n    @OneToMany(mappedBy = &quot;image&quot;)\n    @JsonIgnore\n    private Set&lt;Store&gt; stores = new HashSet&lt;&gt;();\n\n    public StoreImage(String imageUrl, String remoteId) {\n        super(imageUrl, remoteId);\n    }\n\n    // getters and setters\n}\n</code></pre>\n"},{"tags":["java","google-cloud-storage","nio"],"comments":[{"owner":{"account_id":426109,"reputation":302012,"user_id":807126,"display_name":"Doug Stevenson"},"score":0,"creation_date":1603223607,"post_id":64451345,"comment_id":113968077,"body_markdown":"I&#39;m not clear on what you mean by &quot;it doesn&#39;t show how to iterate the bytes&quot;.  Maybe you could edit the question to show the code you have so far, and what specifically you are stuck with or isn&#39;t working the way you exepect.  It&#39;s generally not difficult in java to read and write data between channels.  If you have a question about the java channel API, then you should focus your question on that.","body":"I&#39;m not clear on what you mean by &quot;it doesn&#39;t show how to iterate the bytes&quot;.  Maybe you could edit the question to show the code you have so far, and what specifically you are stuck with or isn&#39;t working the way you exepect.  It&#39;s generally not difficult in java to read and write data between channels.  If you have a question about the java channel API, then you should focus your question on that."},{"owner":{"account_id":179362,"reputation":15005,"user_id":411965,"accept_rate":87,"display_name":"oshai"},"score":0,"creation_date":1603228135,"post_id":64451345,"comment_id":113969808,"body_markdown":"I tried to clarify the question. I am not sure if I am looking for a different GCP api or different NIO api.","body":"I tried to clarify the question. I am not sure if I am looking for a different GCP api or different NIO api."},{"owner":{"account_id":426109,"reputation":302012,"user_id":807126,"display_name":"Doug Stevenson"},"score":0,"creation_date":1603228934,"post_id":64451345,"comment_id":113970088,"body_markdown":"Seems like your problem is that `Joiner.on(&#39;\\n&#39;).join(set)` returns the full byte array in memory.  If you want to stream the source data, you&#39;ll need an API that streams the byte content instead of returning everything at once.","body":"Seems like your problem is that <code>Joiner.on(&#39;\\n&#39;).join(set)</code> returns the full byte array in memory.  If you want to stream the source data, you&#39;ll need an API that streams the byte content instead of returning everything at once."}],"answers":[{"tags":[],"owner":{"account_id":1844033,"reputation":11661,"user_id":1672803,"display_name":"Mike Schwartz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1603220726,"creation_date":1603220726,"answer_id":64451782,"question_id":64451345,"body_markdown":"To avoid creating an intermediate String with all the bytes you can upload from a file. You can find example code to do an upload from a file in various languages [here][1].\r\n\r\n\r\n  [1]: https://cloud.google.com/storage/docs/uploading-objects#storage-upload-object-code-sample","title":"Stream content to Google Cloud Storage","body":"<p>To avoid creating an intermediate String with all the bytes you can upload from a file. You can find example code to do an upload from a file in various languages <a href=\"https://cloud.google.com/storage/docs/uploading-objects#storage-upload-object-code-sample\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":30002,"reputation":37409,"user_id":81491,"accept_rate":82,"display_name":"Brandon Yarbrough"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1603260853,"creation_date":1603260853,"answer_id":64457640,"question_id":64451345,"body_markdown":"The most straightforward approach I could think of would be:\r\n\r\n     try (WriteChannel writer = storage.writer(blobInfo)) {\r\n       for(Integer val : set) {\r\n         String valLine = val.toString() + &#39;\\n&#39;;\r\n         writer.write(ByteBuffer.wrap(valLine.getBytes(UTF_8));\r\n       }\r\n     }\r\n\r\nMind you, this isn&#39;t very efficient. It creates a lot of small ByteBuffers. You could greatly improve on this by writing into a single larger ByteBuffer and periodically calling writer.write with it.","title":"Stream content to Google Cloud Storage","body":"<p>The most straightforward approach I could think of would be:</p>\n<pre><code> try (WriteChannel writer = storage.writer(blobInfo)) {\n   for(Integer val : set) {\n     String valLine = val.toString() + '\\n';\n     writer.write(ByteBuffer.wrap(valLine.getBytes(UTF_8));\n   }\n }\n</code></pre>\n<p>Mind you, this isn't very efficient. It creates a lot of small ByteBuffers. You could greatly improve on this by writing into a single larger ByteBuffer and periodically calling writer.write with it.</p>\n"}],"owner":{"account_id":179362,"reputation":15005,"user_id":411965,"accept_rate":87,"display_name":"oshai"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1132,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691240955,"creation_date":1603218796,"question_id":64451345,"body_markdown":"I would like to upload a large `Set&lt;Integer&gt;` to Google Cloud Storage. I can do that with:\r\n```\r\nBlob result = storage.create(blobInfo, Joiner.on(&#39;\\n&#39;).join(set).getBytes(UTF_8));\r\n```\r\nBut this will create an intermediate String with all the content that might be too large.  \r\nI found an [example](https://googleapis.dev/java/google-cloud-storage/latest/com/google/cloud/storage/Storage.html#writer-com.google.cloud.storage.BlobInfo-com.google.cloud.storage.Storage.BlobWriteOption...-) with `WriteChannel.write()`:\r\n```java\r\n Set&lt;Integer&gt; set = ...\r\n String bucketName = &quot;my-unique-bucket&quot;;\r\n String blobName = &quot;my-blob-name&quot;;\r\n BlobId blobId = BlobId.of(bucketName, blobName);\r\n byte[] content = Joiner.on(&#39;\\n&#39;).join(set).getBytes(UTF_8);\r\n BlobInfo blobInfo = BlobInfo.newBuilder(blobId).setContentType(&quot;text/plain&quot;).build();\r\n try (WriteChannel writer = storage.writer(blobInfo)) {\r\n     writer.write(ByteBuffer.wrap(content, 0, content.length));\r\n } catch (IOException ex) {\r\n   // handle exception\r\n }\r\n```\r\nHowever, if I do that, the entire `set` is converted to a String and then to `byte[]`. The String itself might be too big.\r\n\r\nIs there an example how to iterate over the set and transform it to a ByteBuffer? or should I do a loop on chunks of the set?","title":"Stream content to Google Cloud Storage","body":"<p>I would like to upload a large <code>Set&lt;Integer&gt;</code> to Google Cloud Storage. I can do that with:</p>\n<pre><code>Blob result = storage.create(blobInfo, Joiner.on('\\n').join(set).getBytes(UTF_8));\n</code></pre>\n<p>But this will create an intermediate String with all the content that might be too large.<br />\nI found an <a href=\"https://googleapis.dev/java/google-cloud-storage/latest/com/google/cloud/storage/Storage.html#writer-com.google.cloud.storage.BlobInfo-com.google.cloud.storage.Storage.BlobWriteOption...-\" rel=\"nofollow noreferrer\">example</a> with <code>WriteChannel.write()</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code> Set&lt;Integer&gt; set = ...\n String bucketName = &quot;my-unique-bucket&quot;;\n String blobName = &quot;my-blob-name&quot;;\n BlobId blobId = BlobId.of(bucketName, blobName);\n byte[] content = Joiner.on('\\n').join(set).getBytes(UTF_8);\n BlobInfo blobInfo = BlobInfo.newBuilder(blobId).setContentType(&quot;text/plain&quot;).build();\n try (WriteChannel writer = storage.writer(blobInfo)) {\n     writer.write(ByteBuffer.wrap(content, 0, content.length));\n } catch (IOException ex) {\n   // handle exception\n }\n</code></pre>\n<p>However, if I do that, the entire <code>set</code> is converted to a String and then to <code>byte[]</code>. The String itself might be too big.</p>\n<p>Is there an example how to iterate over the set and transform it to a ByteBuffer? or should I do a loop on chunks of the set?</p>\n"},{"tags":["java","visual-studio-code","gradle","gradle-plugin"],"comments":[{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1690182404,"post_id":76744155,"comment_id":135312087,"body_markdown":"Have you set the correct JDK? Was [this link](https://github.com/microsoft/vscode-gradle/issues/1221) helpful?","body":"Have you set the correct JDK? Was <a href=\"https://github.com/microsoft/vscode-gradle/issues/1221\" rel=\"nofollow noreferrer\">this link</a> helpful?"},{"owner":{"account_id":29065283,"reputation":11,"user_id":22265030,"display_name":"Raffi Martin"},"score":0,"creation_date":1690255182,"post_id":76744155,"comment_id":135324160,"body_markdown":"Hi! I am sorry for no update, I have figured it out and it is the configuration of JAVA_HOME in path variables. Thank you for replying to my question I really appreciated it!","body":"Hi! I am sorry for no update, I have figured it out and it is the configuration of JAVA_HOME in path variables. Thank you for replying to my question I really appreciated it!"},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1690262856,"post_id":76744155,"comment_id":135324809,"body_markdown":"Welcome to StackOverflow. If you find the solution, Please consider answering it and accepting it as an answer to change its status to Answered. It will also help others to solve a similar issue. See [can I answer my own question..](https://stackoverflow.com/help/self-answer), Just a reminder :)","body":"Welcome to StackOverflow. If you find the solution, Please consider answering it and accepting it as an answer to change its status to Answered. It will also help others to solve a similar issue. See <a href=\"https://stackoverflow.com/help/self-answer\">can I answer my own question..</a>, Just a reminder :)"},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1690769146,"post_id":76744155,"comment_id":135394513,"body_markdown":"May I know what&#39;s going on with the problem? If it has been solved, can you change the status of the answer to help more people with similar problems.","body":"May I know what&#39;s going on with the problem? If it has been solved, can you change the status of the answer to help more people with similar problems."},{"owner":{"account_id":29065283,"reputation":11,"user_id":22265030,"display_name":"Raffi Martin"},"score":0,"creation_date":1691239380,"post_id":76744155,"comment_id":135466935,"body_markdown":"Im sorry I just added the jdk path to the JAVA_HOME. I am still learning how to use Stack Overflow. Thank you for reminding me!","body":"Im sorry I just added the jdk path to the JAVA_HOME. I am still learning how to use Stack Overflow. Thank you for reminding me!"}],"answers":[{"tags":[],"owner":{"account_id":29065283,"reputation":11,"user_id":22265030,"display_name":"Raffi Martin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691240446,"creation_date":1691240446,"answer_id":76841760,"question_id":76744155,"body_markdown":"**SOLUTION:**\r\n\r\n 1. Go to the **Windows** search bar.\r\n 2. Type **&quot;Edit the System Environment Variables&quot;**.\r\n 3. In the **&quot;Adavance&quot;** tab click **&quot;Environment Variables&quot;**.\r\n 4. Go to **&quot;System Variables&quot;**.\r\n 5. Check if you have made an option for **&quot;JAVA_HOME&quot;**.\r\n 6. If there is no **&quot;JAVA_HOME&quot;**. Click **&quot;New&quot;** and provide the name **&quot;JAVA_HOME&quot;** then save it.\r\n 7. Click **&quot;Edit&quot;** and enter the path of your **JDK**.\r\n \r\n**e.g C:\\Program Files\\Eclipse Adoptium\\jdk-17.0.6.10-hotspot**\r\n\r\nI hope it helps, Happy Coding!","title":"No Connection To Gradle Server &amp;&amp; The Gradle Client Was Unable To Connect in Visual Studio Code","body":"<p><strong>SOLUTION:</strong></p>\n<ol>\n<li>Go to the <strong>Windows</strong> search bar.</li>\n<li>Type <strong>&quot;Edit the System Environment Variables&quot;</strong>.</li>\n<li>In the <strong>&quot;Adavance&quot;</strong> tab click <strong>&quot;Environment Variables&quot;</strong>.</li>\n<li>Go to <strong>&quot;System Variables&quot;</strong>.</li>\n<li>Check if you have made an option for <strong>&quot;JAVA_HOME&quot;</strong>.</li>\n<li>If there is no <strong>&quot;JAVA_HOME&quot;</strong>. Click <strong>&quot;New&quot;</strong> and provide the name <strong>&quot;JAVA_HOME&quot;</strong> then save it.</li>\n<li>Click <strong>&quot;Edit&quot;</strong> and enter the path of your <strong>JDK</strong>.</li>\n</ol>\n<p><strong>e.g C:\\Program Files\\Eclipse Adoptium\\jdk-17.0.6.10-hotspot</strong></p>\n<p>I hope it helps, Happy Coding!</p>\n"}],"owner":{"account_id":29065283,"reputation":11,"user_id":22265030,"display_name":"Raffi Martin"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2987,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76841760,"answer_count":1,"score":1,"last_activity_date":1691240446,"creation_date":1690034213,"question_id":76744155,"body_markdown":"I am new to Java Projects in Visual Studio Code. This is mainly for my school project. I was setting up Gradle for Java according to YouTube videos and follows the step. I just simply installed the &quot;**Gradle for Java&quot;** in Visual Studio Code but  I have an error. I have restarted and reconnected it but it is showing no progress. Any help will be appreciated. Cheers!\r\n\r\nError:\r\n**No Connection To Gradle Server. Try Restarting The Server.**\r\nError:\r\n**The Gradle Client Was Unable To Connect. Try re-connecting.**\r\n\r\n[No Connection To Gradle Server. Try Restarting The Server\r\n&amp;&amp; The Gradle Client Was Unable To Connect. Try re-connecting.](https://i.stack.imgur.com/3F6Tj.png)\r\n\r\nI tried restarting my PC, Vscode and even followed the instructions to reconnect but I am not really sure what does **Restart Server** means. I would like to acquire some answers and eventually able to run Gradle on Vscode.","title":"No Connection To Gradle Server &amp;&amp; The Gradle Client Was Unable To Connect in Visual Studio Code","body":"<p>I am new to Java Projects in Visual Studio Code. This is mainly for my school project. I was setting up Gradle for Java according to YouTube videos and follows the step. I just simply installed the &quot;<strong>Gradle for Java&quot;</strong> in Visual Studio Code but  I have an error. I have restarted and reconnected it but it is showing no progress. Any help will be appreciated. Cheers!</p>\n<p>Error:\n<strong>No Connection To Gradle Server. Try Restarting The Server.</strong>\nError:\n<strong>The Gradle Client Was Unable To Connect. Try re-connecting.</strong></p>\n<p><a href=\"https://i.stack.imgur.com/3F6Tj.png\" rel=\"nofollow noreferrer\">No Connection To Gradle Server. Try Restarting The Server\n&amp;&amp; The Gradle Client Was Unable To Connect. Try re-connecting.</a></p>\n<p>I tried restarting my PC, Vscode and even followed the instructions to reconnect but I am not really sure what does <strong>Restart Server</strong> means. I would like to acquire some answers and eventually able to run Gradle on Vscode.</p>\n"},{"tags":["java","mongodb"],"comments":[{"owner":{"account_id":26391128,"reputation":4716,"user_id":20042973,"display_name":"user20042973"},"score":2,"creation_date":1691240492,"post_id":76841674,"comment_id":135467054,"body_markdown":"Hard to begin answering this question without more information. Can you provide sample input documents and the output you expect from them?","body":"Hard to begin answering this question without more information. Can you provide sample input documents and the output you expect from them?"}],"owner":{"account_id":22509458,"reputation":11,"user_id":16704597,"display_name":"Sameer kr"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691240443,"creation_date":1691239136,"question_id":76841674,"body_markdown":"I want to sort the array return by lookup in Mongo and then use projection on that data in java. Can someone suggest how to do that ?\r\n\r\nSample code:\r\n```\r\nMongoclient.getDatabase(db).get collection(order request).aggregate(Arrays.asList(new Document(&quot;$lookup&quot;,new Document( &quot;from&quot;, &quot;order&quot;).append(&quot;localfield&quot;,&quot;Id&quot;).append(&quot;foreignField&quot;,&quot;Id&quot;).append(&quot;as&quot;, &quot;orders&quot;)),\r\nnew Document(&quot;$lookup&quot;,new Document( &quot;from&quot;, &quot;Inventory&quot;).append(&quot;localfield&quot;,&quot;Id&quot;).append(&quot;foreignField&quot;,&quot;Id&quot;).append(&quot;as&quot;, &quot;inventory&quot;)),\r\nnew Document(&quot;$project&quot;, new Document (&quot;I&#39;d&quot;,0L).append(&quot;order date&quot;, new Document(&quot;$arrayElementAt&quot;, Arrays.asList(&quot;$orders.date&quot;,0L)))\r\n```\r\nI want to have max order date return by lookup on orders","title":"Sort on look up in mongo using java","body":"<p>I want to sort the array return by lookup in Mongo and then use projection on that data in java. Can someone suggest how to do that ?</p>\n<p>Sample code:</p>\n<pre><code>Mongoclient.getDatabase(db).get collection(order request).aggregate(Arrays.asList(new Document(&quot;$lookup&quot;,new Document( &quot;from&quot;, &quot;order&quot;).append(&quot;localfield&quot;,&quot;Id&quot;).append(&quot;foreignField&quot;,&quot;Id&quot;).append(&quot;as&quot;, &quot;orders&quot;)),\nnew Document(&quot;$lookup&quot;,new Document( &quot;from&quot;, &quot;Inventory&quot;).append(&quot;localfield&quot;,&quot;Id&quot;).append(&quot;foreignField&quot;,&quot;Id&quot;).append(&quot;as&quot;, &quot;inventory&quot;)),\nnew Document(&quot;$project&quot;, new Document (&quot;I'd&quot;,0L).append(&quot;order date&quot;, new Document(&quot;$arrayElementAt&quot;, Arrays.asList(&quot;$orders.date&quot;,0L)))\n</code></pre>\n<p>I want to have max order date return by lookup on orders</p>\n"},{"tags":["java","spring-boot","websocket","stomp","spring-websocket"],"owner":{"account_id":27593137,"reputation":51,"user_id":21059880,"display_name":"Alok Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691240275,"creation_date":1691240275,"question_id":76841751,"body_markdown":"\r\n\r\nI am using Stomp in a Spring Boot app where I am getting memory leak warning after adding below code. How to resolve it.\r\n````\r\n@Configuration\r\n@EnableWebSocketMessageBroker\r\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\r\n\r\n    @Override\r\n    public void configureMessageBroker(final MessageBrokerRegistry registry) {\r\n        registry.enableSimpleBroker(&quot;/topic&quot;);\r\n        registry.setApplicationDestinationPrefixes(&quot;/ws&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void registerStompEndpoints(final StompEndpointRegistry registry) {\r\n        registry.addEndpoint(&quot;/our-websocket&quot;)\r\n                .setHandshakeHandler(new UserHandshakeHandler())\r\n                .withSockJS();\r\n    }\r\n}\r\n````\r\nI am running this in my local. After terminating the app,\r\nI am getting a warning -- The web application [ROOT] appears to have started a thread named [MessageBroker-4] but has failed to stop it. This is very likely to create a memory leak.","title":"Memory leak warning due to websocket and stomp in Spring Boot app","body":"<p>I am using Stomp in a Spring Boot app where I am getting memory leak warning after adding below code. How to resolve it.</p>\n<pre><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\n\n    @Override\n    public void configureMessageBroker(final MessageBrokerRegistry registry) {\n        registry.enableSimpleBroker(&quot;/topic&quot;);\n        registry.setApplicationDestinationPrefixes(&quot;/ws&quot;);\n    }\n\n    @Override\n    public void registerStompEndpoints(final StompEndpointRegistry registry) {\n        registry.addEndpoint(&quot;/our-websocket&quot;)\n                .setHandshakeHandler(new UserHandshakeHandler())\n                .withSockJS();\n    }\n}\n</code></pre>\n<p>I am running this in my local. After terminating the app,\nI am getting a warning -- The web application [ROOT] appears to have started a thread named [MessageBroker-4] but has failed to stop it. This is very likely to create a memory leak.</p>\n"},{"tags":["java","swing","groovy","groovy-console"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1691242745,"post_id":76841740,"comment_id":135467251,"body_markdown":"Is it designed to be reused in that way? Maybe not","body":"Is it designed to be reused in that way? Maybe not"}],"owner":{"account_id":29165903,"reputation":11,"user_id":22343499,"display_name":"utku"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691240108,"creation_date":1691240108,"question_id":76841740,"body_markdown":"I have a Java swing app. I want to use groovy.console.ui.Console (GroovyConsole) in my app. I can run groovy console but it opens in a new window. It should be in my frame.\r\n\r\nI tried to add output and input panel in new JPanels but it is not enough and also console runs in a new window.","title":"How can i integrate GroovyConsole to in my java swing app?","body":"<p>I have a Java swing app. I want to use groovy.console.ui.Console (GroovyConsole) in my app. I can run groovy console but it opens in a new window. It should be in my frame.</p>\n<p>I tried to add output and input panel in new JPanels but it is not enough and also console runs in a new window.</p>\n"},{"tags":["java","rabbitmq","keycloak","keycloak-spi"],"owner":{"account_id":14997010,"reputation":13,"user_id":11356966,"display_name":"finwes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691238820,"creation_date":1691191377,"question_id":76839575,"body_markdown":"I&#39;m working on a Keycloak SPI that publishes changes to Realms and Clients in Keycloak via RabbitMQ and handles RabbitMQ RPC requests to receive Keycloak specific configuration. The first part is already functioning.\r\n\r\nThe second part is causing issues. I&#39;m using a singleton class called `RabbitMqRpcReceiver` which handles the reception of RPC requests. This singleton class is instantiated within the Factory inside the `RabbitMqEventListenerProviderFactory`, in the `postInit()` method.\r\n\r\nHere are the code snippets:\r\n\r\n```java\r\n@AutoService(EventListenerProviderFactory.class)\r\n@JBossLog\r\npublic class RabbitMqEventListenerProviderFactory implements EventListenerProviderFactory {\r\n\r\n    private RabbitMqConfig cfg;\r\n    private RabbitMqRpcReceiver rpcReceiver;\r\n\r\n    @Override\r\n    public EventListenerProvider create(KeycloakSession session) {\r\n        return new RabbitMqEventListenerProvider(cfg, session);\r\n    }\r\n\r\n    @Override\r\n    public void init(Scope config) {\r\n        cfg = RabbitMqConfig.createFromScope(config);\r\n    }\r\n\r\n    @Override\r\n    public void postInit(KeycloakSessionFactory factory) {\r\n        rpcReceiver = RabbitMqRpcReceiver.getInstance(cfg, factory.create());\r\n    }\r\n\r\n    @Override\r\n    public void close() {\r\n        if (rpcReceiver != null) {\r\n            rpcReceiver.close();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public String getId() {\r\n        return &quot;keycloak-to-rabbitmq&quot;;\r\n    }\r\n\r\n}\r\n```\r\n\r\n```java\r\n\r\n@JBossLog\r\npublic class RabbitMqRpcReceiver {\r\n    private final KeycloakSession keycloakSession;\r\n    public static final String RPC_QUEUE_NAME = &quot;rpc_queue&quot;;\r\n    private Channel rpcChannel;\r\n    private static RabbitMqRpcReceiver instance = null;\r\n\r\n    public static RabbitMqRpcReceiver getInstance(RabbitMqConfig cfg, KeycloakSession session) {\r\n        if (instance == null) {\r\n            instance = new RabbitMqRpcReceiver(cfg, session);\r\n        }\r\n        return instance;\r\n    }\r\n\r\n    private RabbitMqRpcReceiver(RabbitMqConfig cfg, KeycloakSession session) {\r\n        this.keycloakSession = session;\r\n\r\n        ConnectionFactory factory = new ConnectionFactory();\r\n\r\n        factory.setUsername(cfg.getUsername());\r\n        factory.setPassword(cfg.getPassword());\r\n        factory.setVirtualHost(cfg.getVhost());\r\n        factory.setHost(cfg.getHostUrl());\r\n        factory.setPort(cfg.getPort());\r\n\r\n        if (Boolean.TRUE.equals(cfg.getUseTls())) {\r\n            try {\r\n                factory.useSslProtocol();\r\n            } catch (Exception e) {\r\n                log.error(&quot;Could not use SSL protocol&quot;, e);\r\n            }\r\n        }\r\n\r\n        try {\r\n            rpcChannel = factory.newConnection().createChannel();\r\n            rpcChannel.queueDeclare(RPC_QUEUE_NAME, false, false, false, null);\r\n            rpcChannel.basicQos(1);\r\n\r\n            log.infof(&quot; [x] Awaiting RPC requests&quot;);\r\n\r\n            rpcChannel.basicConsume(RPC_QUEUE_NAME, false, (consumerTag, delivery) -&gt; handleDelivery(delivery), (consumerTag -&gt; {}));\r\n\r\n        } catch (IOException e) {\r\n            log.error(&quot;Error declaring RPC queue&quot;, e);\r\n        } catch (TimeoutException e) {\r\n            log.error(&quot;Timeout declaring RPC queue&quot;, e);\r\n        }\r\n    }\r\n\r\n    private void handleDelivery(Delivery delivery) {\r\n        AMQP.BasicProperties replyProps = new AMQP.BasicProperties\r\n                .Builder()\r\n                .contentType(&quot;application/json&quot;)\r\n                .headers(Map.of(&quot;__TypeId__&quot;, ConfigurationResponse.class.getName()))\r\n                .contentEncoding(StandardCharsets.UTF_8.name())\r\n                .correlationId(delivery.getProperties().getCorrelationId())\r\n                .build();\r\n\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        ConfigurationRequest request = null;\r\n        ConfigurationResponse response = null;\r\n        try {\r\n            request = mapper.readValue(delivery.getBody(), ConfigurationRequest.class);\r\n            log.infof(&quot; [.] Received request for client %s&quot;, request.client());\r\n\r\n            response = getConfiguration(request.client());\r\n\r\n        } catch (RuntimeException | IOException e) {\r\n            log.error(&quot; [.] &quot; + e.toString());\r\n        } finally {\r\n            try {\r\n                rpcChannel.basicPublish(&quot;&quot;, delivery.getProperties().getReplyTo(), replyProps, mapper.writeValueAsBytes(response));\r\n                rpcChannel.basicAck(delivery.getEnvelope().getDeliveryTag(), false);\r\n            } catch (IOException e) {\r\n                log.error(&quot;Error sending response&quot;, e);\r\n            }\r\n        }\r\n    }\r\n\r\n    public ConfigurationResponse getConfiguration(String clientName) {\r\n        log.info(&quot;Getting configuration for client &quot; + clientName);\r\n        RealmProvider realmProvider = keycloakSession.realms();\r\n\r\n        // This one succeeds\r\n        log.info(&quot;Realms: &quot; + realmProvider);\r\n        // This one fails\r\n        log.info(&quot;Realms: &quot; + realmProvider.getRealmsStream().toList());\r\n\r\n        return null;\r\n    }\r\n\r\n    public void close() {\r\n        try {\r\n            rpcChannel.close();\r\n        } catch (IOException | TimeoutException e) {\r\n            log.error(&quot;Error closing RPC channel&quot;, e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe code works except for the invocation of `realmProvider.getRealmsStream()` within the `getConfiguration(String clientName)` method. This invocation results in the following error message: `java.lang.IllegalStateException: Cannot access delegate without a transaction`\r\n\r\nI would be genuinely grateful for any resources which might lead me to a working RabbitMQ Queue Consumer with access to the realms and clients within keycloak.\r\n\r\n**Further Testing – 1:**\r\n\r\nI edited the method `getConfiguration(String clientName)` to begin a transaction if none is active.\r\n\r\n```java\r\npublic ConfigurationResponse getConfiguration(String clientName) {\r\n        if (!keycloakSession.getTransactionManager().isActive()) {\r\n            keycloakSession.getTransactionManager().begin();\r\n        }\r\n        log.info(&quot;Getting configuration for client &quot; + clientName);\r\n        RealmProvider realmProvider = keycloakSession.realms();\r\n        // This one succeeds\r\n        log.info(&quot;Realms: &quot; + realmProvider);\r\n        // This one fails\r\n        log.info(keycloakSession.getTransactionManager().isActive());\r\n        log.info(&quot;Realms: &quot; + realmProvider.getRealmsStream().toList());\r\n        keycloakSession.getTransactionManager().commit();\r\n        return null;\r\n    }\r\n```\r\nThe first method call succeeds, as you can see in the log. Any call afterward fails:\r\n\r\n```\r\n11:40:40,155 INFO  [RabbitMqRpcReceiver] (pool-8-thread-4)  [.] Received request for client gateway-test-client\r\n11:40:40,156 INFO  [RabbitMqRpcReceiver] (pool-8-thread-4) Getting configuration for client gateway-test-client\r\n11:40:40,156 INFO  [RabbitMqRpcReceiver] (pool-8-thread-4) Realms: org.keycloak.models.cache.infinispan.RealmCacheSession@5de3281a\r\n11:40:40,156 INFO  [RabbitMqRpcReceiver] (pool-8-thread-4) true\r\n11:40:40,505 INFO  [RabbitMqRpcReceiver] (pool-8-thread-4) Realms: [7d0ce53d-a1fe-4769-bbdc-b4410c162a3d@72a3d4c0, c73da31a-2c74-4650-a5e8-3f514516fb5f@1cd216b1, 188fcb9d-1411-445b-9849-3e0f849c06fb@65507055, c5dbb5ef-1482-4b88-9b94-3004b62a7508@7a07c3fb]\r\n11:40:48,014 INFO  [RabbitMqRpcReceiver] (pool-8-thread-3)  [.] Received request for client gateway-test-client\r\n11:40:48,015 INFO  [RabbitMqRpcReceiver] (pool-8-thread-3) Getting configuration for client gateway-test-client\r\n11:40:48,016 INFO  [RabbitMqRpcReceiver] (pool-8-thread-3) Realms: org.keycloak.models.cache.infinispan.RealmCacheSession@5de3281a\r\n11:40:48,016 INFO  [RabbitMqRpcReceiver] (pool-8-thread-3) true\r\n11:40:48,016 ERROR [RabbitMqRpcReceiver] (pool-8-thread-3)  [.] java.lang.IllegalStateException: Cannot access delegate without a transaction\r\n```\r\n\r\n**Further Testing – 2 (Possible Solution):**\r\n\r\nI changed the method `postInit(KeycloakSessionFactory factory)` in the `RabbitMqEventListenerProviderFactory` Class as follows:\r\n\r\n```java\r\n@Override\r\n    public void postInit(KeycloakSessionFactory factory) {\r\n        rpcReceiver = RabbitMqRpcReceiver.getInstance(cfg, factory);\r\n    }\r\n```\r\n\r\nInstead of handing over a Keycloak Session created by `factory.create()` I pass the KeycloakSessionFactory to the `RabbitMqRpcReceiver`.\r\n\r\nThis gives me the opportunity to create a new session every time the method `getConfiguration`:\r\n\r\n```java\r\npublic ConfigurationResponse getConfiguration(String clientName) {\r\n        KeycloakSession keycloakSession = sessionFactory.create();\r\n        if (!keycloakSession.getTransactionManager().isActive()) {\r\n            keycloakSession.getTransactionManager().begin();\r\n        }\r\n        log.info(&quot;Getting configuration for client &quot; + clientName);\r\n        RealmProvider realmProvider = keycloakSession.realms();\r\n        // This one succeeds\r\n        log.info(&quot;Realms: &quot; + realmProvider);\r\n        // This one fails\r\n        log.info(keycloakSession.getTransactionManager().isActive());\r\n        log.info(&quot;Realms: &quot; + realmProvider.getRealmsStream().toList());\r\n        keycloakSession.getTransactionManager().commit();\r\n        keycloakSession.close();\r\n        return null;\r\n    }\r\n```\r\n\r\nThis approach seems to work as expected every call succeeds now, but I do not know if this is best practice.\r\nUntil I find some better solution, I will stick to this one.\r\n","title":"Keycloak SPI access realmProvider.getRealmsStream() | Usage of transactions","body":"<p>I'm working on a Keycloak SPI that publishes changes to Realms and Clients in Keycloak via RabbitMQ and handles RabbitMQ RPC requests to receive Keycloak specific configuration. The first part is already functioning.</p>\n<p>The second part is causing issues. I'm using a singleton class called <code>RabbitMqRpcReceiver</code> which handles the reception of RPC requests. This singleton class is instantiated within the Factory inside the <code>RabbitMqEventListenerProviderFactory</code>, in the <code>postInit()</code> method.</p>\n<p>Here are the code snippets:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@AutoService(EventListenerProviderFactory.class)\n@JBossLog\npublic class RabbitMqEventListenerProviderFactory implements EventListenerProviderFactory {\n\n    private RabbitMqConfig cfg;\n    private RabbitMqRpcReceiver rpcReceiver;\n\n    @Override\n    public EventListenerProvider create(KeycloakSession session) {\n        return new RabbitMqEventListenerProvider(cfg, session);\n    }\n\n    @Override\n    public void init(Scope config) {\n        cfg = RabbitMqConfig.createFromScope(config);\n    }\n\n    @Override\n    public void postInit(KeycloakSessionFactory factory) {\n        rpcReceiver = RabbitMqRpcReceiver.getInstance(cfg, factory.create());\n    }\n\n    @Override\n    public void close() {\n        if (rpcReceiver != null) {\n            rpcReceiver.close();\n        }\n    }\n\n    @Override\n    public String getId() {\n        return &quot;keycloak-to-rabbitmq&quot;;\n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>\n@JBossLog\npublic class RabbitMqRpcReceiver {\n    private final KeycloakSession keycloakSession;\n    public static final String RPC_QUEUE_NAME = &quot;rpc_queue&quot;;\n    private Channel rpcChannel;\n    private static RabbitMqRpcReceiver instance = null;\n\n    public static RabbitMqRpcReceiver getInstance(RabbitMqConfig cfg, KeycloakSession session) {\n        if (instance == null) {\n            instance = new RabbitMqRpcReceiver(cfg, session);\n        }\n        return instance;\n    }\n\n    private RabbitMqRpcReceiver(RabbitMqConfig cfg, KeycloakSession session) {\n        this.keycloakSession = session;\n\n        ConnectionFactory factory = new ConnectionFactory();\n\n        factory.setUsername(cfg.getUsername());\n        factory.setPassword(cfg.getPassword());\n        factory.setVirtualHost(cfg.getVhost());\n        factory.setHost(cfg.getHostUrl());\n        factory.setPort(cfg.getPort());\n\n        if (Boolean.TRUE.equals(cfg.getUseTls())) {\n            try {\n                factory.useSslProtocol();\n            } catch (Exception e) {\n                log.error(&quot;Could not use SSL protocol&quot;, e);\n            }\n        }\n\n        try {\n            rpcChannel = factory.newConnection().createChannel();\n            rpcChannel.queueDeclare(RPC_QUEUE_NAME, false, false, false, null);\n            rpcChannel.basicQos(1);\n\n            log.infof(&quot; [x] Awaiting RPC requests&quot;);\n\n            rpcChannel.basicConsume(RPC_QUEUE_NAME, false, (consumerTag, delivery) -&gt; handleDelivery(delivery), (consumerTag -&gt; {}));\n\n        } catch (IOException e) {\n            log.error(&quot;Error declaring RPC queue&quot;, e);\n        } catch (TimeoutException e) {\n            log.error(&quot;Timeout declaring RPC queue&quot;, e);\n        }\n    }\n\n    private void handleDelivery(Delivery delivery) {\n        AMQP.BasicProperties replyProps = new AMQP.BasicProperties\n                .Builder()\n                .contentType(&quot;application/json&quot;)\n                .headers(Map.of(&quot;__TypeId__&quot;, ConfigurationResponse.class.getName()))\n                .contentEncoding(StandardCharsets.UTF_8.name())\n                .correlationId(delivery.getProperties().getCorrelationId())\n                .build();\n\n        ObjectMapper mapper = new ObjectMapper();\n        ConfigurationRequest request = null;\n        ConfigurationResponse response = null;\n        try {\n            request = mapper.readValue(delivery.getBody(), ConfigurationRequest.class);\n            log.infof(&quot; [.] Received request for client %s&quot;, request.client());\n\n            response = getConfiguration(request.client());\n\n        } catch (RuntimeException | IOException e) {\n            log.error(&quot; [.] &quot; + e.toString());\n        } finally {\n            try {\n                rpcChannel.basicPublish(&quot;&quot;, delivery.getProperties().getReplyTo(), replyProps, mapper.writeValueAsBytes(response));\n                rpcChannel.basicAck(delivery.getEnvelope().getDeliveryTag(), false);\n            } catch (IOException e) {\n                log.error(&quot;Error sending response&quot;, e);\n            }\n        }\n    }\n\n    public ConfigurationResponse getConfiguration(String clientName) {\n        log.info(&quot;Getting configuration for client &quot; + clientName);\n        RealmProvider realmProvider = keycloakSession.realms();\n\n        // This one succeeds\n        log.info(&quot;Realms: &quot; + realmProvider);\n        // This one fails\n        log.info(&quot;Realms: &quot; + realmProvider.getRealmsStream().toList());\n\n        return null;\n    }\n\n    public void close() {\n        try {\n            rpcChannel.close();\n        } catch (IOException | TimeoutException e) {\n            log.error(&quot;Error closing RPC channel&quot;, e);\n        }\n    }\n}\n</code></pre>\n<p>The code works except for the invocation of <code>realmProvider.getRealmsStream()</code> within the <code>getConfiguration(String clientName)</code> method. This invocation results in the following error message: <code>java.lang.IllegalStateException: Cannot access delegate without a transaction</code></p>\n<p>I would be genuinely grateful for any resources which might lead me to a working RabbitMQ Queue Consumer with access to the realms and clients within keycloak.</p>\n<p><strong>Further Testing – 1:</strong></p>\n<p>I edited the method <code>getConfiguration(String clientName)</code> to begin a transaction if none is active.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public ConfigurationResponse getConfiguration(String clientName) {\n        if (!keycloakSession.getTransactionManager().isActive()) {\n            keycloakSession.getTransactionManager().begin();\n        }\n        log.info(&quot;Getting configuration for client &quot; + clientName);\n        RealmProvider realmProvider = keycloakSession.realms();\n        // This one succeeds\n        log.info(&quot;Realms: &quot; + realmProvider);\n        // This one fails\n        log.info(keycloakSession.getTransactionManager().isActive());\n        log.info(&quot;Realms: &quot; + realmProvider.getRealmsStream().toList());\n        keycloakSession.getTransactionManager().commit();\n        return null;\n    }\n</code></pre>\n<p>The first method call succeeds, as you can see in the log. Any call afterward fails:</p>\n<pre><code>11:40:40,155 INFO  [RabbitMqRpcReceiver] (pool-8-thread-4)  [.] Received request for client gateway-test-client\n11:40:40,156 INFO  [RabbitMqRpcReceiver] (pool-8-thread-4) Getting configuration for client gateway-test-client\n11:40:40,156 INFO  [RabbitMqRpcReceiver] (pool-8-thread-4) Realms: org.keycloak.models.cache.infinispan.RealmCacheSession@5de3281a\n11:40:40,156 INFO  [RabbitMqRpcReceiver] (pool-8-thread-4) true\n11:40:40,505 INFO  [RabbitMqRpcReceiver] (pool-8-thread-4) Realms: [7d0ce53d-a1fe-4769-bbdc-b4410c162a3d@72a3d4c0, c73da31a-2c74-4650-a5e8-3f514516fb5f@1cd216b1, 188fcb9d-1411-445b-9849-3e0f849c06fb@65507055, c5dbb5ef-1482-4b88-9b94-3004b62a7508@7a07c3fb]\n11:40:48,014 INFO  [RabbitMqRpcReceiver] (pool-8-thread-3)  [.] Received request for client gateway-test-client\n11:40:48,015 INFO  [RabbitMqRpcReceiver] (pool-8-thread-3) Getting configuration for client gateway-test-client\n11:40:48,016 INFO  [RabbitMqRpcReceiver] (pool-8-thread-3) Realms: org.keycloak.models.cache.infinispan.RealmCacheSession@5de3281a\n11:40:48,016 INFO  [RabbitMqRpcReceiver] (pool-8-thread-3) true\n11:40:48,016 ERROR [RabbitMqRpcReceiver] (pool-8-thread-3)  [.] java.lang.IllegalStateException: Cannot access delegate without a transaction\n</code></pre>\n<p><strong>Further Testing – 2 (Possible Solution):</strong></p>\n<p>I changed the method <code>postInit(KeycloakSessionFactory factory)</code> in the <code>RabbitMqEventListenerProviderFactory</code> Class as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n    public void postInit(KeycloakSessionFactory factory) {\n        rpcReceiver = RabbitMqRpcReceiver.getInstance(cfg, factory);\n    }\n</code></pre>\n<p>Instead of handing over a Keycloak Session created by <code>factory.create()</code> I pass the KeycloakSessionFactory to the <code>RabbitMqRpcReceiver</code>.</p>\n<p>This gives me the opportunity to create a new session every time the method <code>getConfiguration</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public ConfigurationResponse getConfiguration(String clientName) {\n        KeycloakSession keycloakSession = sessionFactory.create();\n        if (!keycloakSession.getTransactionManager().isActive()) {\n            keycloakSession.getTransactionManager().begin();\n        }\n        log.info(&quot;Getting configuration for client &quot; + clientName);\n        RealmProvider realmProvider = keycloakSession.realms();\n        // This one succeeds\n        log.info(&quot;Realms: &quot; + realmProvider);\n        // This one fails\n        log.info(keycloakSession.getTransactionManager().isActive());\n        log.info(&quot;Realms: &quot; + realmProvider.getRealmsStream().toList());\n        keycloakSession.getTransactionManager().commit();\n        keycloakSession.close();\n        return null;\n    }\n</code></pre>\n<p>This approach seems to work as expected every call succeeds now, but I do not know if this is best practice.\nUntil I find some better solution, I will stick to this one.</p>\n"},{"tags":["java","spring-boot","maven","configuration","yaml"],"answers":[{"tags":[],"owner":{"account_id":14402680,"reputation":312,"user_id":10403784,"display_name":"Vadim Yemelyanov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691237342,"creation_date":1691236308,"answer_id":76841504,"question_id":76841306,"body_markdown":"**file** or FileSystemResource is not connected to ApplicationSystemResource, that basically means that you have to put absolute path to it. \r\n\r\nYou if you want relative path - you have to use either **classpath:** or none.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nIf you can`t find what is relative location of your file:\r\nbuild your service, find the jar, unarchive the jar, find your file in the path - thats your relative path in the classpath. **If there is no file** - that means that you have a problem in copying file to jar. \r\nExample photo of my service) \r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5uaD7.png\r\n  [2]: https://i.stack.imgur.com/2WHtX.png\r\n","title":"Inject custom properties folder in Spring Boot Application","body":"<p><strong>file</strong> or FileSystemResource is not connected to ApplicationSystemResource, that basically means that you have to put absolute path to it.</p>\n<p>You if you want relative path - you have to use either <strong>classpath:</strong> or none.</p>\n<p><a href=\"https://i.stack.imgur.com/5uaD7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5uaD7.png\" alt=\"enter image description here\" /></a></p>\n<p>If you can`t find what is relative location of your file:\nbuild your service, find the jar, unarchive the jar, find your file in the path - thats your relative path in the classpath. <strong>If there is no file</strong> - that means that you have a problem in copying file to jar.\nExample photo of my service)</p>\n<p><a href=\"https://i.stack.imgur.com/2WHtX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2WHtX.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":25569534,"reputation":43,"user_id":19350126,"display_name":"datta900"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76841504,"answer_count":1,"score":0,"last_activity_date":1691238578,"creation_date":1691233050,"question_id":76841306,"body_markdown":"In my Spring Boot Application, i would like to externalise my ad-hoc configurations inside a folder. The folder is : src/main/etc/config/advanced/information-properties.yml.\r\n\r\nOf course i have and use application.yml file in resource folder. \r\n\r\nUsing maven-resources-plugin, i&#39;m copying this :\r\n\r\n\r\n\r\n                      &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;copy-config&lt;/id&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;copy-resources&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;phase&gt;generate-resources&lt;/phase&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;outputDirectory&gt;${project.build.directory}/config&lt;/outputDirectory&gt;\r\n                                &lt;resources&gt;\r\n                                    &lt;resource&gt;\r\n                                        &lt;directory&gt;${basedir}/src/main/etc/config/&lt;/directory&gt;\r\n                                        &lt;includes&gt;\r\n                                            &lt;include&gt;**/*&lt;/include&gt;\r\n                                        &lt;/includes&gt;\r\n                                    &lt;/resource&gt;\r\n                                &lt;/resources&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n\r\n\r\nSo, I&#39;m trying to refer to them/it using this property file: \r\n\r\n    @ConfigurationProperties(prefix = &quot;information&quot;)\r\n    @PropertySource(value = &quot;file:config/advanced/information-properties.yml&quot;, ignoreResourceNotFound = true, factory = YamlPropertyLoaderFactory.class)\r\n    public class InformationPropertiesConfiguration {\r\n        private ApplicationConfig application;\r\n    \r\n        @Data\r\n        public class ApplicationConfig{\r\n            private String applicationConfigPath;\r\n        }\r\n    }\r\n\r\n\r\nBut when i start the application my factory doesn&#39;t find the .yml file. \r\n\r\n\r\n    2023-08-05 12:45:16.341  INFO 18708 --- [           main] o.s.c.a.ConfigurationClassParser         : Properties location [file:config/advanced/information-properties.yml] not resolvable: config\\advanced\\information-properties.yml (Impossibile trovare il percorso specificato)&quot;\r\n\r\nWhat am i missing? \r\n\r\nThanks in advance\r\n\r\n\r\n\r\nEDIT \r\nCompiling the project: \r\n[![Compiling the project][1]][1]\r\n\r\n[![Unpacking the Jar][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dyZWR.png\r\n  [2]: https://i.stack.imgur.com/sowFQ.png\r\n\r\n\r\n\r\nI&#39;m trying to understand now if i should in some ways put the folder inside the it. i think in this case it should be the outputDirectory the problem. am i right? ","title":"Inject custom properties folder in Spring Boot Application","body":"<p>In my Spring Boot Application, i would like to externalise my ad-hoc configurations inside a folder. The folder is : src/main/etc/config/advanced/information-properties.yml.</p>\n<p>Of course i have and use application.yml file in resource folder.</p>\n<p>Using maven-resources-plugin, i'm copying this :</p>\n<pre><code>                  &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;copy-config&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;copy-resources&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;phase&gt;generate-resources&lt;/phase&gt;\n                        &lt;configuration&gt;\n                            &lt;outputDirectory&gt;${project.build.directory}/config&lt;/outputDirectory&gt;\n                            &lt;resources&gt;\n                                &lt;resource&gt;\n                                    &lt;directory&gt;${basedir}/src/main/etc/config/&lt;/directory&gt;\n                                    &lt;includes&gt;\n                                        &lt;include&gt;**/*&lt;/include&gt;\n                                    &lt;/includes&gt;\n                                &lt;/resource&gt;\n                            &lt;/resources&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n</code></pre>\n<p>So, I'm trying to refer to them/it using this property file:</p>\n<pre><code>@ConfigurationProperties(prefix = &quot;information&quot;)\n@PropertySource(value = &quot;file:config/advanced/information-properties.yml&quot;, ignoreResourceNotFound = true, factory = YamlPropertyLoaderFactory.class)\npublic class InformationPropertiesConfiguration {\n    private ApplicationConfig application;\n\n    @Data\n    public class ApplicationConfig{\n        private String applicationConfigPath;\n    }\n}\n</code></pre>\n<p>But when i start the application my factory doesn't find the .yml file.</p>\n<pre><code>2023-08-05 12:45:16.341  INFO 18708 --- [           main] o.s.c.a.ConfigurationClassParser         : Properties location [file:config/advanced/information-properties.yml] not resolvable: config\\advanced\\information-properties.yml (Impossibile trovare il percorso specificato)&quot;\n</code></pre>\n<p>What am i missing?</p>\n<p>Thanks in advance</p>\n<p>EDIT\nCompiling the project:\n<a href=\"https://i.stack.imgur.com/dyZWR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dyZWR.png\" alt=\"Compiling the project\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/sowFQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sowFQ.png\" alt=\"Unpacking the Jar\" /></a></p>\n<p>I'm trying to understand now if i should in some ways put the folder inside the it. i think in this case it should be the outputDirectory the problem. am i right?</p>\n"},{"tags":["java","android","android-studio","screenshot"],"comments":[{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1691238440,"post_id":76841623,"comment_id":135466853,"body_markdown":"&quot;I want to hit the default/tradition screenshot from android app code. e.g. Shutter bar screenshot, three finger screenshot or using power and volume button&quot; -- that &quot;captures the whole screen, including the status and navigation bars&quot;, which is what you say that you do not want.","body":"&quot;I want to hit the default/tradition screenshot from android app code. e.g. Shutter bar screenshot, three finger screenshot or using power and volume button&quot; -- that &quot;captures the whole screen, including the status and navigation bars&quot;, which is what you say that you do not want."}],"owner":{"account_id":25956799,"reputation":138,"user_id":19674027,"display_name":"user2357113"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691238570,"creation_date":1691238272,"question_id":76841623,"body_markdown":"I&#39;m currently working on an Android app and I&#39;m facing an issue with taking screenshots programmatically. I want to capture a screenshot of the current activity&#39;s view without including the **Window/Decor** view. I have tried the traditional approach of using `getWindow().getDecorView().getRootView()`\r\n\r\nI did some research on this topic and didn&#39;t find it useful. Then I had an idea what about using this approach instead\r\n\r\nI want to hit the default/traditional screenshot from the Android app code. e.g. **Shutter bar screenshot, three-finger screenshot or using power and volume buttons.**","title":"Taking a screenshot in Android app using Java without using Window/Decor view from Activity","body":"<p>I'm currently working on an Android app and I'm facing an issue with taking screenshots programmatically. I want to capture a screenshot of the current activity's view without including the <strong>Window/Decor</strong> view. I have tried the traditional approach of using <code>getWindow().getDecorView().getRootView()</code></p>\n<p>I did some research on this topic and didn't find it useful. Then I had an idea what about using this approach instead</p>\n<p>I want to hit the default/traditional screenshot from the Android app code. e.g. <strong>Shutter bar screenshot, three-finger screenshot or using power and volume buttons.</strong></p>\n"},{"tags":["java","spring","intellij-idea","spring-webflux","java-platform-module-system"],"owner":{"account_id":1934643,"reputation":119,"user_id":1743210,"accept_rate":60,"display_name":"Jan Nowak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691238461,"creation_date":1691238461,"question_id":76841635,"body_markdown":"I&#39;m learning myself Java Platform Module System, and it&#39;s going very hard. Currently I just trying figure out one problem with my IDE.\r\nI extracted essence into separate project: https://github.com/tomi127/JPMS-problem\r\n\r\nLong story short: \r\nwhen I start ```com.data.Application``` through IntelliJ (PPM&gt;Run/debug) server starts up without any problems. But when I&#39;m making POST request to localhost:8080/storeInDB I got server error:\r\n\r\n```Caused by: java.lang.reflect.InaccessibleObjectException: Unable to make protected final java.lang.Class java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain) throws java.lang.ClassFormatError accessible: module java.base does not &quot;opens java.lang&quot; to module spring.core```\r\n\r\nBut when I do ```mvn clean package``` and then run ```java -jar data-module-3.1.2.jar``` it works without any problems.\r\n\r\nMy questions are: \r\n- is somehow ```spring-boot-maven-plugin``` disables JPMS, or IntelliJ by default uses some special parameters for JVM?\r\n- what is best approach during development in such cases? Should I start server by maven (but it is uncomfortable) or IDE can be somehow configured to not have this type of errors?","title":"Spring multi-module JPMS project - exception only in IntellIJ","body":"<p>I'm learning myself Java Platform Module System, and it's going very hard. Currently I just trying figure out one problem with my IDE.\nI extracted essence into separate project: <a href=\"https://github.com/tomi127/JPMS-problem\" rel=\"nofollow noreferrer\">https://github.com/tomi127/JPMS-problem</a></p>\n<p>Long story short:\nwhen I start <code>com.data.Application</code> through IntelliJ (PPM&gt;Run/debug) server starts up without any problems. But when I'm making POST request to localhost:8080/storeInDB I got server error:</p>\n<p><code>Caused by: java.lang.reflect.InaccessibleObjectException: Unable to make protected final java.lang.Class java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain) throws java.lang.ClassFormatError accessible: module java.base does not &quot;opens java.lang&quot; to module spring.core</code></p>\n<p>But when I do <code>mvn clean package</code> and then run <code>java -jar data-module-3.1.2.jar</code> it works without any problems.</p>\n<p>My questions are:</p>\n<ul>\n<li>is somehow <code>spring-boot-maven-plugin</code> disables JPMS, or IntelliJ by default uses some special parameters for JVM?</li>\n<li>what is best approach during development in such cases? Should I start server by maven (but it is uncomfortable) or IDE can be somehow configured to not have this type of errors?</li>\n</ul>\n"},{"tags":["java","shell","remote-debugging","jvm-arguments"],"answers":[{"tags":[],"owner":{"account_id":73773,"reputation":11214,"user_id":212275,"display_name":"ZoogieZork"},"down_vote_count":1,"up_vote_count":61,"is_accepted":true,"score":60,"last_activity_date":1262761729,"creation_date":1262761729,"answer_id":2011420,"question_id":2011311,"body_markdown":"I don&#39;t know of any JVM that actually checks the `JAVA_OPTS` environment variable.  Usually this is used in scripts which launch the JVM and they usually just add it to the `java` command-line.\r\n\r\nThe key thing to understand here is that arguments to `java` that come *before* the `-jar analyse.jar` bit will only affect the JVM and *won&#39;t* be passed along to your program.  So, modifying the `java` line in your script to:\r\n\r\n    java $JAVA_OPTS -jar analyse.jar $*\r\n\r\nShould &quot;just work&quot;.","title":"Running java with JAVA_OPTS env variable has no effect","body":"<p>I don't know of any JVM that actually checks the <code>JAVA_OPTS</code> environment variable.  Usually this is used in scripts which launch the JVM and they usually just add it to the <code>java</code> command-line.</p>\n\n<p>The key thing to understand here is that arguments to <code>java</code> that come <em>before</em> the <code>-jar analyse.jar</code> bit will only affect the JVM and <em>won't</em> be passed along to your program.  So, modifying the <code>java</code> line in your script to:</p>\n\n<pre><code>java $JAVA_OPTS -jar analyse.jar $*\n</code></pre>\n\n<p>Should \"just work\".</p>\n"},{"tags":[],"owner":{"account_id":1056904,"reputation":1647,"user_id":1059400,"accept_rate":100,"display_name":"HEX"},"down_vote_count":0,"up_vote_count":104,"is_accepted":false,"score":104,"last_activity_date":1343058504,"creation_date":1343058504,"answer_id":11615960,"question_id":2011311,"body_markdown":"You can setup `_JAVA_OPTIONS` instead of `JAVA_OPTS`. This should work without `$_JAVA_OPTIONS`.","title":"Running java with JAVA_OPTS env variable has no effect","body":"<p>You can setup <code>_JAVA_OPTIONS</code> instead of <code>JAVA_OPTS</code>. This should work without <code>$_JAVA_OPTIONS</code>.</p>\n"},{"tags":[],"owner":{"account_id":98194,"reputation":4266,"user_id":265954,"display_name":"t0r0X"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1691237423,"creation_date":1663095238,"answer_id":73708006,"question_id":2011311,"body_markdown":"In the past 12 years some changes were made:\r\n\r\n- **Environment variable `JDK_JAVA_OPTIONS`**: this is the recommended way to do what you wanted starting with Java 9, see [Using the JDK_JAVA_OPTIONS Launcher Environment Variable][1] in the Oracle Java 9 documentation, and this comprehensive answer [What is the difference between JDK_JAVA_OPTIONS and JAVA_TOOL_OPTIONS when using Java 11?][2].\r\n\r\n - Environment variable `JAVA_OPTS`: it was NOT and is NOT a standardized option. Some shell script wrappers for Java based tools do evaluate it, an example of how this works is in the answer from ZoogieZork.\r\n\r\n- Environment variable `_JAVA_OPTIONS` (mentioned by HEX): it is nowadays deprecated/undocumented, see [Oracle announcement][3] (section &quot;`Add a new launcher environment variable JDK_JAVA_OPTIONS`&quot;).\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/tools/java.htm#GUID-3B1CE181-CD30-4178-9602-230B800D4FAE__USINGTHEJDK_JAVA_OPTIONSLAUNCHERENV-F3C0E3BA\r\n  [2]: https://stackoverflow.com/questions/52986487/what-is-the-difference-between-jdk-java-options-and-java-tool-options-when-using\r\n  [3]: https://www.oracle.com/java/technologies/javase/9-enhancements.html","title":"Running java with JAVA_OPTS env variable has no effect","body":"<p>In the past 12 years some changes were made:</p>\n<ul>\n<li><p><strong>Environment variable <code>JDK_JAVA_OPTIONS</code></strong>: this is the recommended way to do what you wanted starting with Java 9, see <a href=\"https://docs.oracle.com/javase/9/tools/java.htm#GUID-3B1CE181-CD30-4178-9602-230B800D4FAE__USINGTHEJDK_JAVA_OPTIONSLAUNCHERENV-F3C0E3BA\" rel=\"nofollow noreferrer\">Using the JDK_JAVA_OPTIONS Launcher Environment Variable</a> in the Oracle Java 9 documentation, and this comprehensive answer <a href=\"https://stackoverflow.com/questions/52986487/what-is-the-difference-between-jdk-java-options-and-java-tool-options-when-using\">What is the difference between JDK_JAVA_OPTIONS and JAVA_TOOL_OPTIONS when using Java 11?</a>.</p>\n</li>\n<li><p>Environment variable <code>JAVA_OPTS</code>: it was NOT and is NOT a standardized option. Some shell script wrappers for Java based tools do evaluate it, an example of how this works is in the answer from ZoogieZork.</p>\n</li>\n<li><p>Environment variable <code>_JAVA_OPTIONS</code> (mentioned by HEX): it is nowadays deprecated/undocumented, see <a href=\"https://www.oracle.com/java/technologies/javase/9-enhancements.html\" rel=\"nofollow noreferrer\">Oracle announcement</a> (section &quot;<code>Add a new launcher environment variable JDK_JAVA_OPTIONS</code>&quot;).</p>\n</li>\n</ul>\n"}],"owner":{"account_id":60584,"reputation":9058,"user_id":180904,"accept_rate":83,"display_name":"Ashika Umanga Umagiliya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115738,"favorite_count":0,"down_vote_count":0,"up_vote_count":59,"accepted_answer_id":2011420,"answer_count":3,"score":59,"last_activity_date":1691237423,"creation_date":1262759652,"question_id":2011311,"body_markdown":"In a shell script, I have set the JAVA_OPTS environment variable (to enable remote debugging and increase memory), and then I execute the jar file as follows:\r\n\r\n    export JAVA_OPTS=&quot;-Xdebug -Xrunjdwp:transport=dt_socket,address=8001,server=y,suspend=n -Xms512m -Xmx512m&quot;\r\n    java -jar analyse.jar $*\r\n\r\nBut it seems there is no effect of the JAVA_OPTS env variable as I cannot connect to remote-debugging and I see no change in memory for the JVM.\r\n\r\nWhat could be the problem?\r\n\r\nPS: I cannot use those settings in the `java -jar analyse.jar $*` command because I process command line arguments in the application. ","title":"Running java with JAVA_OPTS env variable has no effect","body":"<p>In a shell script, I have set the JAVA_OPTS environment variable (to enable remote debugging and increase memory), and then I execute the jar file as follows:</p>\n\n<pre><code>export JAVA_OPTS=\"-Xdebug -Xrunjdwp:transport=dt_socket,address=8001,server=y,suspend=n -Xms512m -Xmx512m\"\njava -jar analyse.jar $*\n</code></pre>\n\n<p>But it seems there is no effect of the JAVA_OPTS env variable as I cannot connect to remote-debugging and I see no change in memory for the JVM.</p>\n\n<p>What could be the problem?</p>\n\n<p>PS: I cannot use those settings in the <code>java -jar analyse.jar $*</code> command because I process command line arguments in the application. </p>\n"},{"tags":["java","groovy","exceptionhandler"],"answers":[{"tags":[],"owner":{"account_id":6325048,"reputation":3074,"user_id":4911775,"display_name":"CodeScale"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691174573,"creation_date":1691174088,"answer_id":76838428,"question_id":76837696,"body_markdown":"That&#39;s a way to go except that in your case it&#39;s not t but tryblockexception which is suppressed and you don&#39;t need to rethrow tryblockexception neither. \r\n\r\nOther options are try-with-resources for autocloseable type or when possible making sure that the finally clause does not throw ex because it can swallow exceptions from the try block.","title":"Avoiding exception hiding when finally block could throw","body":"<p>That's a way to go except that in your case it's not t but tryblockexception which is suppressed and you don't need to rethrow tryblockexception neither.</p>\n<p>Other options are try-with-resources for autocloseable type or when possible making sure that the finally clause does not throw ex because it can swallow exceptions from the try block.</p>\n"},{"tags":[],"owner":{"account_id":30898,"reputation":8917,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691233252,"creation_date":1691233252,"answer_id":76841322,"question_id":76837696,"body_markdown":"Looks fine to me. I would suggest putting the bulk of the code into a re-usable method, e.g.:\r\n\r\n    public interface Attempt {\r\n        void apply() throws Exception;\r\n    }\r\n\r\n    public static void tryCatchFinally(\r\n            Attempt mainF,\r\n            Attempt finallyF\r\n    ) throws Exception {\r\n        Exception tryCatchException = null;\r\n        try {\r\n            mainF.apply();\r\n        } catch (Exception ex) {\r\n            tryCatchException = ex;\r\n            throw ex;\r\n        } finally {\r\n            try {\r\n                finallyF.apply();\r\n            } catch (Exception ex) {\r\n                if (tryCatchException != null) {\r\n                    tryCatchException.addSuppressed(ex);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nthen you can just use it like this:\r\n\r\n    tryCatchFinally(\r\n            () -&gt; {setupTestEnv(); runTests();},\r\n            () -&gt; cleanupTestEnv()\r\n    );","title":"Avoiding exception hiding when finally block could throw","body":"<p>Looks fine to me. I would suggest putting the bulk of the code into a re-usable method, e.g.:</p>\n<pre><code>public interface Attempt {\n    void apply() throws Exception;\n}\n\npublic static void tryCatchFinally(\n        Attempt mainF,\n        Attempt finallyF\n) throws Exception {\n    Exception tryCatchException = null;\n    try {\n        mainF.apply();\n    } catch (Exception ex) {\n        tryCatchException = ex;\n        throw ex;\n    } finally {\n        try {\n            finallyF.apply();\n        } catch (Exception ex) {\n            if (tryCatchException != null) {\n                tryCatchException.addSuppressed(ex);\n            }\n        }\n    }\n}\n</code></pre>\n<p>then you can just use it like this:</p>\n<pre><code>tryCatchFinally(\n        () -&gt; {setupTestEnv(); runTests();},\n        () -&gt; cleanupTestEnv()\n);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691237221,"creation_date":1691237221,"answer_id":76841554,"question_id":76837696,"body_markdown":"I&#39;m not sure why you have to use a `finally` in such a complex way. You could also just use code that runs after the try-catch block:\r\n\r\n``` lang-java\r\nException priorityException;\r\ntry {\r\n  setupTestEnv();\r\n  runTests();\r\n} catch (Exception ex) {\r\n  priorityException = ex;  // delayed handling\r\n}\r\n\r\ntry {\r\n  cleanupTestEnv();\r\n} catch (Exception ex) {\r\n  if (priorityException != null) {\r\n    priorityException.addSuppressed(ex);\r\n  } else {\r\n    priorityException = ex;\r\n  }\r\n  throw priorityException;\r\n}\r\n```\r\n\r\nPlease note that I used a `catch (Exception ...)` instead of your `Throwable` because catching and handling `Error`s is usually not possible in a useful way. See SO question [Catching Java errors](https://stackoverflow.com/questions/11017304/catching-java-errors) and its answers for better insight.","title":"Avoiding exception hiding when finally block could throw","body":"<p>I'm not sure why you have to use a <code>finally</code> in such a complex way. You could also just use code that runs after the try-catch block:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Exception priorityException;\ntry {\n  setupTestEnv();\n  runTests();\n} catch (Exception ex) {\n  priorityException = ex;  // delayed handling\n}\n\ntry {\n  cleanupTestEnv();\n} catch (Exception ex) {\n  if (priorityException != null) {\n    priorityException.addSuppressed(ex);\n  } else {\n    priorityException = ex;\n  }\n  throw priorityException;\n}\n</code></pre>\n<p>Please note that I used a <code>catch (Exception ...)</code> instead of your <code>Throwable</code> because catching and handling <code>Error</code>s is usually not possible in a useful way. See SO question <a href=\"https://stackoverflow.com/questions/11017304/catching-java-errors\">Catching Java errors</a> and its answers for better insight.</p>\n"}],"owner":{"account_id":6017,"reputation":12512,"user_id":9950,"accept_rate":67,"display_name":"Peter Kahn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76841322,"answer_count":3,"score":0,"last_activity_date":1691237221,"creation_date":1691166393,"question_id":76837696,"body_markdown":"When you have a process which you’ve wrapped in a try catch, finally, and the action in the final could possibly throw, how do you handle exception, hiding?\r\n\r\nHere&#39;s an example of a problem and a possible fix.  Does the fix look ok, or am I re-throwing poorly?\r\n\r\n# Code with Hiding Problem\r\n\r\n```\r\ntry {\r\n  // try-block\r\n  setupTestEnv();\r\n  runTests();\r\n} finally {\r\n  // finally-block\r\n  cleanupTestEnv();\r\n}\r\n```\r\n\r\n- try-block throws still result in cleanup and get thrown up the call stack\r\n- try-block throws where finally-block throws as well result in the loss or hiding of try-block throw as finally-block throw goes up the call stack.\r\n\r\n\r\n# Possible Workaround\r\nAdapted from https://stackoverflow.com/a/41246027/9950\r\n\r\n```\r\nThrowable tryBlockException;\r\ntry {\r\n  setupTestEnv();\r\n  runTests();\r\n} catch (Throwable t) {\r\n  // record and throw\r\n  tryBlockException = t;\r\n  throw ex;\r\n} finally {\r\n   try {\r\n      cleanupTestEnv()\r\n   } catch (Throwable t) {\r\n      if (tryBlockException != null) {\r\n         // we have an exception from try-block\r\n         // and that&#39;s priority exception\r\n\r\n         // add the cleanup exception as suppressed\r\n         // it&#39;ll be in the object and call reporting\r\n         tryBlockException.addSuppressed(t);\r\n         throw tryBlockException;\r\n      } else {\r\n         throw t;\r\n      }\r\n  }\r\n}\r\n```","title":"Avoiding exception hiding when finally block could throw","body":"<p>When you have a process which you’ve wrapped in a try catch, finally, and the action in the final could possibly throw, how do you handle exception, hiding?</p>\n<p>Here's an example of a problem and a possible fix.  Does the fix look ok, or am I re-throwing poorly?</p>\n<h1>Code with Hiding Problem</h1>\n<pre><code>try {\n  // try-block\n  setupTestEnv();\n  runTests();\n} finally {\n  // finally-block\n  cleanupTestEnv();\n}\n</code></pre>\n<ul>\n<li>try-block throws still result in cleanup and get thrown up the call stack</li>\n<li>try-block throws where finally-block throws as well result in the loss or hiding of try-block throw as finally-block throw goes up the call stack.</li>\n</ul>\n<h1>Possible Workaround</h1>\n<p>Adapted from <a href=\"https://stackoverflow.com/a/41246027/9950\">https://stackoverflow.com/a/41246027/9950</a></p>\n<pre><code>Throwable tryBlockException;\ntry {\n  setupTestEnv();\n  runTests();\n} catch (Throwable t) {\n  // record and throw\n  tryBlockException = t;\n  throw ex;\n} finally {\n   try {\n      cleanupTestEnv()\n   } catch (Throwable t) {\n      if (tryBlockException != null) {\n         // we have an exception from try-block\n         // and that's priority exception\n\n         // add the cleanup exception as suppressed\n         // it'll be in the object and call reporting\n         tryBlockException.addSuppressed(t);\n         throw tryBlockException;\n      } else {\n         throw t;\n      }\n  }\n}\n</code></pre>\n"},{"tags":["java","apache-mina"],"answers":[{"tags":[],"owner":{"account_id":1496659,"reputation":138,"user_id":1402425,"display_name":"vudangngoc"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1691235957,"creation_date":1679558448,"answer_id":75820444,"question_id":67218410,"body_markdown":"I found an example from integration test, hope this help \r\n\r\nhttps://github.com/apache/mina-sshd/blob/master/sshd-core/src/test/java/org/apache/sshd/client/auth/pubkey/RSAVariantsAuthPublicKeyTest.java#L87\r\n\r\n    @BeforeClass\r\n    public static void setupClientAndServer() throws Exception {\r\n        sshd = CoreTestSupportUtils.setupTestServer(RSAVariantsAuthPublicKeyTest.class);\r\n        sshd.setSignatureFactories(RSA_FACTORIES);\r\n        sshd.setKeyPairProvider(KEYS_PROVIDER);\r\n        sshd.setPasswordAuthenticator(RejectAllPasswordAuthenticator.INSTANCE);\r\n        sshd.setHostBasedAuthenticator(RejectAllHostBasedAuthenticator.INSTANCE);\r\n        sshd.setPublickeyAuthenticator((username, key, session) -&gt; {\r\n            String keyType = KeyUtils.getKeyType(key);\r\n            outputDebugMessage(&quot;authenticate(%s) keyType=%s session=%s&quot;, username, keyType, session);\r\n            return KeyPairProvider.SSH_RSA.equals(keyType);\r\n        });\r\n\r\n        sshd.start();\r\n        port = sshd.getPort();\r\n\r\n        client = CoreTestSupportUtils.setupTestClient(RSAVariantsAuthPublicKeyTest.class);\r\n        client.setServerKeyVerifier((session, peerAddress, key) -&gt; {\r\n            String keyType = KeyUtils.getKeyType(key);\r\n            outputDebugMessage(&quot;verifyServerKey - keyType=%s session=%s&quot;, keyType, session);\r\n            return KeyPairProvider.SSH_RSA.equals(keyType);\r\n        });\r\n        client.start();\r\n    }\r\n","title":"Using Mina SSHD (Client) to connect to SFTP using Private Key","body":"<p>I found an example from integration test, hope this help</p>\n<p><a href=\"https://github.com/apache/mina-sshd/blob/master/sshd-core/src/test/java/org/apache/sshd/client/auth/pubkey/RSAVariantsAuthPublicKeyTest.java#L87\" rel=\"nofollow noreferrer\">https://github.com/apache/mina-sshd/blob/master/sshd-core/src/test/java/org/apache/sshd/client/auth/pubkey/RSAVariantsAuthPublicKeyTest.java#L87</a></p>\n<pre><code>@BeforeClass\npublic static void setupClientAndServer() throws Exception {\n    sshd = CoreTestSupportUtils.setupTestServer(RSAVariantsAuthPublicKeyTest.class);\n    sshd.setSignatureFactories(RSA_FACTORIES);\n    sshd.setKeyPairProvider(KEYS_PROVIDER);\n    sshd.setPasswordAuthenticator(RejectAllPasswordAuthenticator.INSTANCE);\n    sshd.setHostBasedAuthenticator(RejectAllHostBasedAuthenticator.INSTANCE);\n    sshd.setPublickeyAuthenticator((username, key, session) -&gt; {\n        String keyType = KeyUtils.getKeyType(key);\n        outputDebugMessage(&quot;authenticate(%s) keyType=%s session=%s&quot;, username, keyType, session);\n        return KeyPairProvider.SSH_RSA.equals(keyType);\n    });\n\n    sshd.start();\n    port = sshd.getPort();\n\n    client = CoreTestSupportUtils.setupTestClient(RSAVariantsAuthPublicKeyTest.class);\n    client.setServerKeyVerifier((session, peerAddress, key) -&gt; {\n        String keyType = KeyUtils.getKeyType(key);\n        outputDebugMessage(&quot;verifyServerKey - keyType=%s session=%s&quot;, keyType, session);\n        return KeyPairProvider.SSH_RSA.equals(keyType);\n    });\n    client.start();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4796966,"reputation":164,"user_id":3874627,"display_name":"zaxishere"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1682084850,"creation_date":1681844012,"answer_id":76048139,"question_id":67218410,"body_markdown":"Mina SSHD supports authorized key authentication.\r\n\r\nExample client setup\r\n\r\n```java\r\n    KeyPairResourceLoader loader = SecurityUtils.getKeyPairResourceParser();\r\n    Collection&lt;KeyPair&gt; keys = loader.loadKeyPairs(null, filePath, passwordProvider);\r\n\r\n    // provide keys to client session\r\n    try (ClientSession session = ...estblish initial session...) {\r\n        for (KeyPair kp : keys) {\r\n            session.addKeyIdentity(kp);\r\n        }\r\n        \r\n        session.auth().await(...);\r\n    }\r\n```\r\nSee [client setup][2]\r\n\r\nA more complete client setup example is provided [here][3].\r\n\r\n\r\n  [1]: https://github.com/apache/mina-sshd/blob/master/sshd-core/src/main/java/org/apache/sshd/server/config/keys/DefaultAuthorizedKeysAuthenticator.java\r\n  [2]: https://github.com/apache/mina-sshd/blob/master/docs/client-setup.md#set-up-client-side-security\r\n  [3]: https://github.com/apache/mina-sshd/blob/master/docs/client-setup.md#using-the-sshclient-to-connect-to-a-server","title":"Using Mina SSHD (Client) to connect to SFTP using Private Key","body":"<p>Mina SSHD supports authorized key authentication.</p>\n<p>Example client setup</p>\n<pre class=\"lang-java prettyprint-override\"><code>    KeyPairResourceLoader loader = SecurityUtils.getKeyPairResourceParser();\n    Collection&lt;KeyPair&gt; keys = loader.loadKeyPairs(null, filePath, passwordProvider);\n\n    // provide keys to client session\n    try (ClientSession session = ...estblish initial session...) {\n        for (KeyPair kp : keys) {\n            session.addKeyIdentity(kp);\n        }\n        \n        session.auth().await(...);\n    }\n</code></pre>\n<p>See <a href=\"https://github.com/apache/mina-sshd/blob/master/docs/client-setup.md#set-up-client-side-security\" rel=\"nofollow noreferrer\">client setup</a></p>\n<p>A more complete client setup example is provided <a href=\"https://github.com/apache/mina-sshd/blob/master/docs/client-setup.md#using-the-sshclient-to-connect-to-a-server\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688141068,"creation_date":1688141068,"answer_id":76590570,"question_id":67218410,"body_markdown":"According to [ClientSession][1] documentation:\r\n&gt; A client session is established using the SshClient. Once the session has been created, the user has to authenticate using either `ClientAuthenticationManager.addPasswordIdentity(String)` or `ClientAuthenticationManager.addPublicKeyIdentity(java.security.KeyPair)` followed by a call to `auth()`\r\n\r\nSo you may need to try something like this:\r\n```java\r\n// path to your private key\r\nPath privateKeyPath = Paths.get(&quot;/path/to/your/privatekey.pem&quot;);\r\n        \r\n// load the private key\r\nFileKeyPairProvider fileKeyPairProvider = new FileKeyPairProvider(privateKeyPath);\r\nIterable&lt;KeyPair&gt; keyPairs = fileKeyPairProvider.loadKeys();\r\n\r\ntry (SshClient client = SshClient.setUpDefaultClient()) {\r\n    client.start();\r\n\r\n    try (ClientSession session = client.connect(&quot;username&quot;, &quot;hostname&quot;, 22).verify().getSession()) {\r\n        // authenticate using the private key\r\n        session.addPublicKeyIdentity(keyPairs.iterator().next());\r\n\r\n        // auth agent can be null\r\n        session.auth().verify();\r\n\r\n        ...\r\n    }\r\n} ...\r\n```\r\n\r\n\r\n  [1]: https://javadoc.io/doc/org.apache.sshd/sshd-core/2.2.0/org/apache/sshd/client/session/ClientSession.html","title":"Using Mina SSHD (Client) to connect to SFTP using Private Key","body":"<p>According to <a href=\"https://javadoc.io/doc/org.apache.sshd/sshd-core/2.2.0/org/apache/sshd/client/session/ClientSession.html\" rel=\"nofollow noreferrer\">ClientSession</a> documentation:</p>\n<blockquote>\n<p>A client session is established using the SshClient. Once the session has been created, the user has to authenticate using either <code>ClientAuthenticationManager.addPasswordIdentity(String)</code> or <code>ClientAuthenticationManager.addPublicKeyIdentity(java.security.KeyPair)</code> followed by a call to <code>auth()</code></p>\n</blockquote>\n<p>So you may need to try something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// path to your private key\nPath privateKeyPath = Paths.get(&quot;/path/to/your/privatekey.pem&quot;);\n        \n// load the private key\nFileKeyPairProvider fileKeyPairProvider = new FileKeyPairProvider(privateKeyPath);\nIterable&lt;KeyPair&gt; keyPairs = fileKeyPairProvider.loadKeys();\n\ntry (SshClient client = SshClient.setUpDefaultClient()) {\n    client.start();\n\n    try (ClientSession session = client.connect(&quot;username&quot;, &quot;hostname&quot;, 22).verify().getSession()) {\n        // authenticate using the private key\n        session.addPublicKeyIdentity(keyPairs.iterator().next());\n\n        // auth agent can be null\n        session.auth().verify();\n\n        ...\n    }\n} ...\n</code></pre>\n"}],"owner":{"account_id":387326,"reputation":922,"user_id":745619,"accept_rate":80,"display_name":"Chuck Lowery"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1333,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":3,"score":10,"last_activity_date":1691235957,"creation_date":1619113781,"question_id":67218410,"body_markdown":"I am attempting to connect to an SFTP server that requires private key authentication and wanting to use the Mina. Looking through the documentation, I can see how to perform that authentication using password authentication but not private key authentication. I do not see any example code that would demonstrate how to perform private key authentication using mina.\r\n\r\nIs it currently possible with this library, and if so, can you provide an example code on how to load the key and perform the connection?  \r\n\r\nHere is an example of what I want to do using SSHTools for reference.\r\n\r\n       private static void authenticate(Ssh2Client ssh2, String host, Integer port, String username, InputStream privateKey) {\r\n        Ssh2PublicKeyAuthentication auth = createKeyAuthentication(privateKey);\r\n\r\n        try {\r\n            int result = ssh2.authenticate(auth);\r\n            if (result != SshAuthentication.COMPLETE) {\r\n                throw new AuthenticationIncomplete(host, port, username, result);\r\n            }\r\n        } catch (SshException ex) {\r\n            throw new UnableToAuthenticate(host, port, username, ex);\r\n        }\r\n    }\r\n\r\n    private static Ssh2PublicKeyAuthentication createKeyAuthentication(InputStream privateKey) {\r\n        try {\r\n            SshPrivateKeyFile privateKeyFile = SshPrivateKeyFileFactory.parse(StreamUtil.readIntoByteArray(privateKey));\r\n            SshKeyPair keyPair = privateKeyFile.toKeyPair(&quot;&quot;);\r\n\r\n            Ssh2PublicKeyAuthentication auth = new Ssh2PublicKeyAuthentication();\r\n            auth.setPrivateKey(keyPair.getPrivateKey());\r\n            auth.setPublicKey(keyPair.getPublicKey());\r\n            return auth;\r\n        } catch (IOException | InvalidPassphraseException ex) {\r\n            throw new ConfigurationIssue(ex);\r\n        }\r\n    }\r\n","title":"Using Mina SSHD (Client) to connect to SFTP using Private Key","body":"<p>I am attempting to connect to an SFTP server that requires private key authentication and wanting to use the Mina. Looking through the documentation, I can see how to perform that authentication using password authentication but not private key authentication. I do not see any example code that would demonstrate how to perform private key authentication using mina.</p>\n<p>Is it currently possible with this library, and if so, can you provide an example code on how to load the key and perform the connection?</p>\n<p>Here is an example of what I want to do using SSHTools for reference.</p>\n<pre><code>   private static void authenticate(Ssh2Client ssh2, String host, Integer port, String username, InputStream privateKey) {\n    Ssh2PublicKeyAuthentication auth = createKeyAuthentication(privateKey);\n\n    try {\n        int result = ssh2.authenticate(auth);\n        if (result != SshAuthentication.COMPLETE) {\n            throw new AuthenticationIncomplete(host, port, username, result);\n        }\n    } catch (SshException ex) {\n        throw new UnableToAuthenticate(host, port, username, ex);\n    }\n}\n\nprivate static Ssh2PublicKeyAuthentication createKeyAuthentication(InputStream privateKey) {\n    try {\n        SshPrivateKeyFile privateKeyFile = SshPrivateKeyFileFactory.parse(StreamUtil.readIntoByteArray(privateKey));\n        SshKeyPair keyPair = privateKeyFile.toKeyPair(&quot;&quot;);\n\n        Ssh2PublicKeyAuthentication auth = new Ssh2PublicKeyAuthentication();\n        auth.setPrivateKey(keyPair.getPrivateKey());\n        auth.setPublicKey(keyPair.getPublicKey());\n        return auth;\n    } catch (IOException | InvalidPassphraseException ex) {\n        throw new ConfigurationIssue(ex);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","devops"],"comments":[{"owner":{"account_id":24885,"reputation":30822,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1691235881,"post_id":75373057,"comment_id":135466605,"body_markdown":"The title is not representative.","body":"The title is not representative."}],"answers":[{"tags":[],"owner":{"account_id":15377139,"reputation":1,"user_id":18274065,"display_name":"maycon araujo"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1691201065,"creation_date":1691201065,"answer_id":76839879,"question_id":75373057,"body_markdown":"combine spotless with commitlint for spring boot project\r\n\r\n`Spotless` is a code formatter for Java (and other languages) that integrates with build tools like Gradle and Maven, whereas `commitlint` is a tool for linting commit messages in a Git repository. They serve different roles in a project, but they can certainly be used together to enforce both code style and commit message conventions in a Spring Boot project.\r\n\r\nHere&#39;s a brief guide on how to configure each in a Spring Boot project:\r\n\r\n## Spotless Setup with Gradle\r\n\r\n1. Add the Spotless plugin to your build.gradle file:\r\n\r\n```groovy\r\nplugins {\r\n  id &#39;com.diffplug.spotless&#39; version &#39;5.14.2&#39;\r\n}\r\n```\r\n\r\n2. Configure Spotless:\r\n\r\n```groovy\r\nspotless {\r\n  java {\r\n    googleJavaFormat() // Use the Google Java Format\r\n    target &#39;src/**/*.java&#39; // Point to the Java source\r\n  }\r\n}\r\n```\r\n\r\n3. To format your code according to the defined rules, you can run:\r\n\r\n```bash\r\n./gradlew spotlessApply\r\n```\r\n\r\n4. To check if your code complies with the defined rules, you can run:\r\n\r\n```bash\r\n./gradlew spotlessCheck\r\n```\r\n\r\n## Commitlint Setup\r\n\r\nCommitlint setup in a Spring Boot project can be accomplished as described in the previous messages. Here is a quick recap:\r\n\r\n1. Install Node.js and npm.\r\n2. Initialize a package.json in your project root:\r\n\r\n```bash\r\nnpm init -y \r\n```\r\n\r\n3. Install commitlint and Husky:\r\n\r\n```bash\r\nnpm install @commitlint/{config-conventional,cli} husky --save-dev\r\n```\r\n\r\n4. Configure commitlint:\r\n\r\n```bash\r\necho &quot;module.exports = {extends: [&#39;@commitlint/config-conventional&#39;]};&quot; &gt; commitlint.config.js\r\n```\r\n\r\n5. Configure Husky:\r\n\r\n```bash\r\nnpx husky install\r\nnpx husky add .husky/commit-msg &#39;npx --no-install commitlint --edit &quot;$1&quot;&#39;\r\n```\r\n\r\n## Combining Both\r\n\r\nIf you want to ensure that all checks pass before committing the code, you can add a pre-commit hook with Husky to run `./gradlew spotlessCheck`. Here&#39;s how you can do it:\r\n\r\n1. First, install Husky and lint-staged:\r\n\r\n```bash\r\nnpm install --save-dev husky lint-staged\r\n```\r\n\r\n2. Add a lint-staged configuration in your `package.json`:\r\n\r\n```json\r\n&quot;lint-staged&quot;: {\r\n  &quot;*.java&quot;: [\r\n    &quot;./gradlew spotlessApply&quot;,\r\n    &quot;git add&quot;\r\n  ]\r\n}\r\n```\r\n\r\n3. Install husky hooks:\r\n\r\n```bash\r\nnpx husky install\r\n```\r\n\r\n4. Add pre-commit and commit-msg hooks:\r\n\r\n```bash\r\nnpx husky add .husky/pre-commit &quot;npx lint-staged&quot;\r\nnpx husky add .husky/commit-msg &#39;npx --no-install commitlint --edit &quot;$1&quot;&#39;\r\n```\r\n\r\nThis setup will run Spotless to format your Java files and add them to the commit. Then it will check the commit message using commitlint. If any of these steps fail, the commit will be aborted.\r\n\r\n\r\n\r\n","title":"How can I configure Commitlint and Husky for Java projects?","body":"<p>combine spotless with commitlint for spring boot project</p>\n<p><code>Spotless</code> is a code formatter for Java (and other languages) that integrates with build tools like Gradle and Maven, whereas <code>commitlint</code> is a tool for linting commit messages in a Git repository. They serve different roles in a project, but they can certainly be used together to enforce both code style and commit message conventions in a Spring Boot project.</p>\n<p>Here's a brief guide on how to configure each in a Spring Boot project:</p>\n<h2>Spotless Setup with Gradle</h2>\n<ol>\n<li>Add the Spotless plugin to your build.gradle file:</li>\n</ol>\n<pre><code>plugins {\n  id 'com.diffplug.spotless' version '5.14.2'\n}\n</code></pre>\n<ol start=\"2\">\n<li>Configure Spotless:</li>\n</ol>\n<pre><code>spotless {\n  java {\n    googleJavaFormat() // Use the Google Java Format\n    target 'src/**/*.java' // Point to the Java source\n  }\n}\n</code></pre>\n<ol start=\"3\">\n<li>To format your code according to the defined rules, you can run:</li>\n</ol>\n<pre class=\"lang-bash prettyprint-override\"><code>./gradlew spotlessApply\n</code></pre>\n<ol start=\"4\">\n<li>To check if your code complies with the defined rules, you can run:</li>\n</ol>\n<pre class=\"lang-bash prettyprint-override\"><code>./gradlew spotlessCheck\n</code></pre>\n<h2>Commitlint Setup</h2>\n<p>Commitlint setup in a Spring Boot project can be accomplished as described in the previous messages. Here is a quick recap:</p>\n<ol>\n<li>Install Node.js and npm.</li>\n<li>Initialize a package.json in your project root:</li>\n</ol>\n<pre class=\"lang-bash prettyprint-override\"><code>npm init -y \n</code></pre>\n<ol start=\"3\">\n<li>Install commitlint and Husky:</li>\n</ol>\n<pre class=\"lang-bash prettyprint-override\"><code>npm install @commitlint/{config-conventional,cli} husky --save-dev\n</code></pre>\n<ol start=\"4\">\n<li>Configure commitlint:</li>\n</ol>\n<pre class=\"lang-bash prettyprint-override\"><code>echo &quot;module.exports = {extends: ['@commitlint/config-conventional']};&quot; &gt; commitlint.config.js\n</code></pre>\n<ol start=\"5\">\n<li>Configure Husky:</li>\n</ol>\n<pre class=\"lang-bash prettyprint-override\"><code>npx husky install\nnpx husky add .husky/commit-msg 'npx --no-install commitlint --edit &quot;$1&quot;'\n</code></pre>\n<h2>Combining Both</h2>\n<p>If you want to ensure that all checks pass before committing the code, you can add a pre-commit hook with Husky to run <code>./gradlew spotlessCheck</code>. Here's how you can do it:</p>\n<ol>\n<li>First, install Husky and lint-staged:</li>\n</ol>\n<pre class=\"lang-bash prettyprint-override\"><code>npm install --save-dev husky lint-staged\n</code></pre>\n<ol start=\"2\">\n<li>Add a lint-staged configuration in your <code>package.json</code>:</li>\n</ol>\n<pre class=\"lang-json prettyprint-override\"><code>&quot;lint-staged&quot;: {\n  &quot;*.java&quot;: [\n    &quot;./gradlew spotlessApply&quot;,\n    &quot;git add&quot;\n  ]\n}\n</code></pre>\n<ol start=\"3\">\n<li>Install husky hooks:</li>\n</ol>\n<pre class=\"lang-bash prettyprint-override\"><code>npx husky install\n</code></pre>\n<ol start=\"4\">\n<li>Add pre-commit and commit-msg hooks:</li>\n</ol>\n<pre class=\"lang-bash prettyprint-override\"><code>npx husky add .husky/pre-commit &quot;npx lint-staged&quot;\nnpx husky add .husky/commit-msg 'npx --no-install commitlint --edit &quot;$1&quot;'\n</code></pre>\n<p>This setup will run Spotless to format your Java files and add them to the commit. Then it will check the commit message using commitlint. If any of these steps fail, the commit will be aborted.</p>\n"}],"owner":{"account_id":19730480,"reputation":173,"user_id":14446071,"display_name":"Sujith"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":769,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1691235925,"creation_date":1675771233,"question_id":75373057,"body_markdown":"I&#39;m using [Commitlint][1] and [Husky][2] for my Node.js projects. How can I use the same concept for Spring Boot projects as well? I am not getting enough leads.\r\n\r\nThis is for Java/Spring Boot projects with [pom.xml][3].\r\n\r\n  [1]: https://github.com/conventional-changelog/commitlint\r\n  [2]: https://www.freecodecamp.org/news/how-to-add-commit-hooks-to-git-with-husky-to-automate-code-tasks/#what-is-husky\r\n  [3]: https://maven.apache.org/pom.html#What_is_the_POM.3F\r\n","title":"How can I configure Commitlint and Husky for Java projects?","body":"<p>I'm using <a href=\"https://github.com/conventional-changelog/commitlint\" rel=\"nofollow noreferrer\">Commitlint</a> and <a href=\"https://www.freecodecamp.org/news/how-to-add-commit-hooks-to-git-with-husky-to-automate-code-tasks/#what-is-husky\" rel=\"nofollow noreferrer\">Husky</a> for my Node.js projects. How can I use the same concept for Spring Boot projects as well? I am not getting enough leads.</p>\n<p>This is for Java/Spring Boot projects with <a href=\"https://maven.apache.org/pom.html#What_is_the_POM.3F\" rel=\"nofollow noreferrer\">pom.xml</a>.</p>\n"},{"tags":["java","spring-boot","upload"],"comments":[{"owner":{"account_id":1075012,"reputation":796,"user_id":5987836,"display_name":"Venu Duggireddy"},"score":1,"creation_date":1521132250,"post_id":49304767,"comment_id":85611912,"body_markdown":"possible duplicate https://stackoverflow.com/questions/28572700/i-am-trying-to-set-maxfilesize-but-it-is-not-honored","body":"possible duplicate <a href=\"https://stackoverflow.com/questions/28572700/i-am-trying-to-set-maxfilesize-but-it-is-not-honored\" title=\"i am trying to set maxfilesize but it is not honored\">stackoverflow.com/questions/28572700/&hellip;</a>"},{"owner":{"account_id":4271284,"reputation":12416,"user_id":3493036,"accept_rate":81,"display_name":"Patrick"},"score":1,"creation_date":1521132290,"post_id":49304767,"comment_id":85611939,"body_markdown":"try to use `spring.servlet.multipart.max-file-size=51200KB` and `spring.servlet.multipart.max-request-size=51200KB`","body":"try to use <code>spring.servlet.multipart.max-file-size=51200KB</code> and <code>spring.servlet.multipart.max-request-size=51200KB</code>"},{"owner":{"account_id":12994497,"reputation":393,"user_id":9392631,"display_name":"Estudeiro"},"score":0,"creation_date":1521132893,"post_id":49304767,"comment_id":85612358,"body_markdown":"Thx for the replies. I&#39;ve tried with &quot;spring.servlet&quot; but without success.\nAnd i don&#39;t think it&#39;s duplicated since the solution in that question didn&#39;t solve my problem.","body":"Thx for the replies. I&#39;ve tried with &quot;spring.servlet&quot; but without success. And i don&#39;t think it&#39;s duplicated since the solution in that question didn&#39;t solve my problem."},{"owner":{"account_id":6111309,"reputation":11786,"user_id":7831045,"display_name":"Rahul Mahadik"},"score":0,"creation_date":1521133048,"post_id":49304767,"comment_id":85612472,"body_markdown":"Can you please provide `application.yml` file","body":"Can you please provide <code>application.yml</code> file"},{"owner":{"account_id":12994497,"reputation":393,"user_id":9392631,"display_name":"Estudeiro"},"score":0,"creation_date":1521133493,"post_id":49304767,"comment_id":85612768,"body_markdown":"@Rahul Mahadik i&#39;ve just added my application.yml.\nEven within the &quot;spring.http&quot; this doesn&#39;t work...","body":"@Rahul Mahadik i&#39;ve just added my application.yml. Even within the &quot;spring.http&quot; this doesn&#39;t work..."}],"answers":[{"tags":[],"owner":{"account_id":6111309,"reputation":11786,"user_id":7831045,"display_name":"Rahul Mahadik"},"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1616690514,"creation_date":1521133643,"answer_id":49305339,"question_id":49304767,"body_markdown":"    spring:\r\n      http:\r\n        multipart:\r\n          enabled: true\r\n          max-file-size: 50MB\r\n          max-request-size: 50MB\r\n\r\nor \r\n\r\n    spring.http.multipart.max-file-size=50MB\r\n    spring.http.multipart.max-request-size=50MB\r\n\r\nReference [here][1]\r\n\r\nHope it will works\r\n\r\n\r\n  [1]: https://spring.io/guides/gs/uploading-files/","title":"&quot;the request was rejected because its size &quot; Spring, tomcat","body":"<pre><code>spring:\n  http:\n    multipart:\n      enabled: true\n      max-file-size: 50MB\n      max-request-size: 50MB\n</code></pre>\n<p>or</p>\n<pre><code>spring.http.multipart.max-file-size=50MB\nspring.http.multipart.max-request-size=50MB\n</code></pre>\n<p>Reference <a href=\"https://spring.io/guides/gs/uploading-files/\" rel=\"noreferrer\">here</a></p>\n<p>Hope it will works</p>\n"},{"tags":[],"owner":{"account_id":4900086,"reputation":3091,"user_id":3948697,"accept_rate":67,"display_name":"Atul"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1559212122,"creation_date":1559212122,"answer_id":56376431,"question_id":49304767,"body_markdown":"For SpringBoot 1.5.7 till 2.1.2 the property need to set in application.properties file are: \r\n\r\n    spring.http.multipart.max-file-size=100MB\r\n    spring.http.multipart.max-request-size=100MB\r\n\r\n\r\nAlso make sure you have application.properties file in &quot;resources&quot; folder.","title":"&quot;the request was rejected because its size &quot; Spring, tomcat","body":"<p>For SpringBoot 1.5.7 till 2.1.2 the property need to set in application.properties file are: </p>\n\n<pre><code>spring.http.multipart.max-file-size=100MB\nspring.http.multipart.max-request-size=100MB\n</code></pre>\n\n<p>Also make sure you have application.properties file in \"resources\" folder.</p>\n"},{"tags":[],"owner":{"account_id":5242326,"reputation":1,"user_id":4189008,"display_name":"Yuvraj P"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1587106037,"creation_date":1587106037,"answer_id":61265605,"question_id":49304767,"body_markdown":"For configuring CommonsMultipartResolver\r\nDefine a bean with bean name as **MultipartFilter.DEFAULT_MULTIPART_RESOLVER_BEAN_NAME**\r\nAs the default spring boot&#39;s default MultipartFilter looks for resolver with default bean name.\r\n\r\n    @Bean(name = MultipartFilter.DEFAULT_MULTIPART_RESOLVER_BEAN_NAME)\r\n\tprotected MultipartResolver getMultipartResolver() {\r\n\t\tCommonsMultipartResolver multipartResolver = new CommonsMultipartResolver();\r\n\t\tmultipartResolver.setMaxUploadSize(20971520);\r\n\t\tmultipartResolver.setMaxInMemorySize(20971520);\r\n\t\treturn multipartResolver;\r\n\t}\r\n\r\n","title":"&quot;the request was rejected because its size &quot; Spring, tomcat","body":"<p>For configuring CommonsMultipartResolver\nDefine a bean with bean name as <strong>MultipartFilter.DEFAULT_MULTIPART_RESOLVER_BEAN_NAME</strong>\nAs the default spring boot's default MultipartFilter looks for resolver with default bean name.</p>\n\n<pre><code>@Bean(name = MultipartFilter.DEFAULT_MULTIPART_RESOLVER_BEAN_NAME)\nprotected MultipartResolver getMultipartResolver() {\n    CommonsMultipartResolver multipartResolver = new CommonsMultipartResolver();\n    multipartResolver.setMaxUploadSize(20971520);\n    multipartResolver.setMaxInMemorySize(20971520);\n    return multipartResolver;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13059268,"reputation":2323,"user_id":9437031,"display_name":"Dhwanil Patel"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1594897334,"creation_date":1594897334,"answer_id":62933287,"question_id":49304767,"body_markdown":"Following are the ways based on version,\r\n\r\n1&#39;st :\r\n\r\n    spring.servlet.multipart.max-file-size=1000MB\r\n    spring.servlet.multipart.max-request-size=1000MB\r\n\r\n2&#39;nd :\r\n\r\n    spring.http.multipart.max-file-size=50MB\r\n    spring.http.multipart.max-request-size=50MB\r\n\r\n3&#39;rd : \r\n\r\n    multipart.enabled=true\r\n    multipart.max-file-size=100MB\r\n    multipart.max-request-size=100MB","title":"&quot;the request was rejected because its size &quot; Spring, tomcat","body":"<p>Following are the ways based on version,</p>\n<p>1'st :</p>\n<pre><code>spring.servlet.multipart.max-file-size=1000MB\nspring.servlet.multipart.max-request-size=1000MB\n</code></pre>\n<p>2'nd :</p>\n<pre><code>spring.http.multipart.max-file-size=50MB\nspring.http.multipart.max-request-size=50MB\n</code></pre>\n<p>3'rd :</p>\n<pre><code>multipart.enabled=true\nmultipart.max-file-size=100MB\nmultipart.max-request-size=100MB\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18764567,"reputation":21,"user_id":13682753,"display_name":"ASH achraf"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1606294329,"creation_date":1606294329,"answer_id":65001317,"question_id":49304767,"body_markdown":"```yaml \r\nspring:\r\n  servlet: \r\n    multipart: \r\n       enabled: true \r\n       file-size-threshold: 200KB   \r\n       max-file-size:       500MB \r\n       max-request-size:    500MB\r\n\r\n```","title":"&quot;the request was rejected because its size &quot; Spring, tomcat","body":"<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  servlet: \n    multipart: \n       enabled: true \n       file-size-threshold: 200KB   \n       max-file-size:       500MB \n       max-request-size:    500MB\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11829005,"reputation":81,"user_id":8656239,"display_name":"dcnis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643148098,"creation_date":1643148098,"answer_id":70856230,"question_id":49304767,"body_markdown":"In SpringBoot 2.6.3 setting &quot;spring.http.multipart.max-file-size&quot; did not work. Following did work for me:\r\n\r\n    spring:\r\n      servlet:\r\n        multipart:\r\n          max-file-size: 50MB\r\n          max-request-size: 50MB","title":"&quot;the request was rejected because its size &quot; Spring, tomcat","body":"<p>In SpringBoot 2.6.3 setting &quot;spring.http.multipart.max-file-size&quot; did not work. Following did work for me:</p>\n<pre><code>spring:\n  servlet:\n    multipart:\n      max-file-size: 50MB\n      max-request-size: 50MB\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25720146,"reputation":1,"user_id":19477244,"display_name":"bkoz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682327581,"creation_date":1682327581,"answer_id":76090341,"question_id":49304767,"body_markdown":"I also had this problem and I don&#39;t know why setting properties spring.http.multipart.max-file-size=20MB and spring.http.multipart.max-request-size=20MB in application.properties didn&#39;t work. To change max file size I&#39;ve followed this guide https://www.baeldung.com/spring-maxuploadsizeexceeded\r\n\r\nSo I&#39;ve added this to my principal class:\r\n```\r\n@Bean\r\npublic MultipartResolver multipartResolver() {\r\n    CommonsMultipartResolver multipartResolver\r\n      = new CommonsMultipartResolver();\r\n    multipartResolver.setMaxUploadSize(20000000);\r\n    return multipartResolver;\r\n}\r\n```\r\nand then, to handle MaxUploadSizeExceededException, I&#39;ve copied this\r\n\r\n```\r\n@ControllerAdvice\r\npublic class FileUploadExceptionAdvice {\r\n     \r\n    @ExceptionHandler(MaxUploadSizeExceededException.class)\r\n    public ModelAndView handleMaxSizeException(\r\n      MaxUploadSizeExceededException exc, \r\n      HttpServletRequest request,\r\n      HttpServletResponse response) {\r\n \r\n        ModelAndView modelAndView = new ModelAndView(&quot;file&quot;);\r\n        modelAndView.getModel().put(&quot;message&quot;, &quot;File too large!&quot;);\r\n        return modelAndView;\r\n    }\r\n}\r\n```\r\nand wrote this simple file.html template:\r\n```\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html lang=&quot;en&quot;\r\n      xmlns:th=&quot;http://www.thymeleaf.org&quot;\r\n&gt;\r\n&lt;head&gt;\r\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n    &lt;title&gt;Title&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n&lt;h3 th:text=&quot;${message}&quot;&gt;&lt;/h3&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\nAfter adding this code I&#39;ve seen in logs that the MaxUploadSizeExceededException error was handled, but in browser I still got error. The solution was adding this to application.properties:\r\n```\r\nserver.tomcat.max-swallow-size=60MB\r\n```\r\nlike in this tutorial: https://www.youtube.com/watch?v=ZZMcg6LHC2k","title":"&quot;the request was rejected because its size &quot; Spring, tomcat","body":"<p>I also had this problem and I don't know why setting properties spring.http.multipart.max-file-size=20MB and spring.http.multipart.max-request-size=20MB in application.properties didn't work. To change max file size I've followed this guide <a href=\"https://www.baeldung.com/spring-maxuploadsizeexceeded\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-maxuploadsizeexceeded</a></p>\n<p>So I've added this to my principal class:</p>\n<pre><code>@Bean\npublic MultipartResolver multipartResolver() {\n    CommonsMultipartResolver multipartResolver\n      = new CommonsMultipartResolver();\n    multipartResolver.setMaxUploadSize(20000000);\n    return multipartResolver;\n}\n</code></pre>\n<p>and then, to handle MaxUploadSizeExceededException, I've copied this</p>\n<pre><code>@ControllerAdvice\npublic class FileUploadExceptionAdvice {\n     \n    @ExceptionHandler(MaxUploadSizeExceededException.class)\n    public ModelAndView handleMaxSizeException(\n      MaxUploadSizeExceededException exc, \n      HttpServletRequest request,\n      HttpServletResponse response) {\n \n        ModelAndView modelAndView = new ModelAndView(&quot;file&quot;);\n        modelAndView.getModel().put(&quot;message&quot;, &quot;File too large!&quot;);\n        return modelAndView;\n    }\n}\n</code></pre>\n<p>and wrote this simple file.html template:</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot;\n      xmlns:th=&quot;http://www.thymeleaf.org&quot;\n&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;title&gt;Title&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h3 th:text=&quot;${message}&quot;&gt;&lt;/h3&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>After adding this code I've seen in logs that the MaxUploadSizeExceededException error was handled, but in browser I still got error. The solution was adding this to application.properties:</p>\n<pre><code>server.tomcat.max-swallow-size=60MB\n</code></pre>\n<p>like in this tutorial: <a href=\"https://www.youtube.com/watch?v=ZZMcg6LHC2k\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=ZZMcg6LHC2k</a></p>\n"},{"tags":[],"owner":{"account_id":4907986,"reputation":1440,"user_id":3997460,"accept_rate":62,"display_name":"megloff"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691234986,"creation_date":1691233725,"answer_id":76841362,"question_id":49304767,"body_markdown":"For me the following worked in `application.properties` of  a Spring Boot 3 application (v3.0.5). This should be also the correct properties according to the [following guide / reference of spring.io][1] and as well here at the [source code documentation][2] and the related Spring Boot [Multipart Auto Configuration][3].\r\n\r\n```\r\nspring.servlet.multipart.max-file-size=128MB\r\nspring.servlet.multipart.max-request-size=128MB\r\n```\r\n\r\nI had **NOT** to add any special `@Bean`configuration. According to the [Multipart Auto Configuration][3] documentation:\r\n\r\n```\r\nAuto-configuration for multipart uploads. Adds a\r\nStandardServletMultipartResolver if none is present, and adds a \r\nmultipartConfigElement if none is otherwise defined. The \r\nServletWebServerApplicationContext will associate the \r\nMultipartConfigElement bean to any Servlet beans. \r\n```\r\n\r\nthe following did **NOT** work (may be it worked in an earlier version of Spring boot).\r\n\r\n```\r\n#spring.http.multipart.enabled=true\r\n#spring.http.multipart.max-file-size=128MB\r\n#spring.http.multipart.max-request-size=128MB\r\n```\r\n\r\n  [1]: https://spring.io/guides/gs/uploading-files/\r\n  [2]: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/web/servlet/MultipartProperties.html\r\n  [3]: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/web/servlet/MultipartAutoConfiguration.html","title":"&quot;the request was rejected because its size &quot; Spring, tomcat","body":"<p>For me the following worked in <code>application.properties</code> of  a Spring Boot 3 application (v3.0.5). This should be also the correct properties according to the <a href=\"https://spring.io/guides/gs/uploading-files/\" rel=\"nofollow noreferrer\">following guide / reference of spring.io</a> and as well here at the <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/web/servlet/MultipartProperties.html\" rel=\"nofollow noreferrer\">source code documentation</a> and the related Spring Boot <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/web/servlet/MultipartAutoConfiguration.html\" rel=\"nofollow noreferrer\">Multipart Auto Configuration</a>.</p>\n<pre><code>spring.servlet.multipart.max-file-size=128MB\nspring.servlet.multipart.max-request-size=128MB\n</code></pre>\n<p>I had <strong>NOT</strong> to add any special <code>@Bean</code>configuration. According to the <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/web/servlet/MultipartAutoConfiguration.html\" rel=\"nofollow noreferrer\">Multipart Auto Configuration</a> documentation:</p>\n<pre><code>Auto-configuration for multipart uploads. Adds a\nStandardServletMultipartResolver if none is present, and adds a \nmultipartConfigElement if none is otherwise defined. The \nServletWebServerApplicationContext will associate the \nMultipartConfigElement bean to any Servlet beans. \n</code></pre>\n<p>the following did <strong>NOT</strong> work (may be it worked in an earlier version of Spring boot).</p>\n<pre><code>#spring.http.multipart.enabled=true\n#spring.http.multipart.max-file-size=128MB\n#spring.http.multipart.max-request-size=128MB\n</code></pre>\n"}],"owner":{"account_id":12994497,"reputation":393,"user_id":9392631,"display_name":"Estudeiro"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41167,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":49305339,"answer_count":8,"score":16,"last_activity_date":1691234986,"creation_date":1521131791,"question_id":49304767,"body_markdown":"I&#39;m trying to make a simple upload app with springboot and it works fine until i try to upload 10Mb+ files, i receive this message on my screen: \r\n\r\n    There was an unexpected error (type=Internal Server Error, status=500).\r\n    Could not parse multipart servlet request; nested exception is java.lang.IllegalStateException: org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (14326061) exceeds the configured maximum (10485760)\r\n\r\nI&#39;ve done some research, and nothing have worked until now. I&#39;ll leave here below the things i&#39;ve tried so far.\r\n\r\nput this code(In various ways) in my &quot;application.yml&quot;\r\n\r\n    multipart: \r\n     maxFileSize: 51200KB\r\n     maxRequestFile: 51200KB  \r\n\r\nI&#39;ve also tried this in my principal class:\r\n\r\n        @Bean\r\n    public TomcatEmbeddedServletContainerFactory containerFactory() {\r\n        TomcatEmbeddedServletContainerFactory factory = new TomcatEmbeddedServletContainerFactory();\r\n         factory.addConnectorCustomizers(new TomcatConnectorCustomizer() {\r\n            @Override\r\n            public void customize(Connector connector) {\r\n             ((AbstractHttp11Protocol&lt;?&gt;) connector.getProtocolHandler()).setMaxSwallowSize(-1);\r\n            }\r\n         });\r\n         return factory;\r\n    }\r\n\r\nAnd some strange thing. If i enter in my tomcat web.xml, the multipart-config is:\r\n\r\n    &lt;multipart-config&gt;\r\n          &lt;!-- 50MB max --&gt;\r\n          &lt;max-file-size&gt;52428800&lt;/max-file-size&gt;\r\n          &lt;max-request-size&gt;52428800&lt;/max-request-size&gt;\r\n          &lt;file-size-threshold&gt;0&lt;/file-size-threshold&gt;\r\n        &lt;/multipart-config&gt;\r\n\r\nSo where the hell this &quot;...configured maximum (10485760)&quot; is coming from ?\r\n(Sidenote: I&#39;m using netbeans 8.1 and springboot 1.5).\r\n\r\nThx guys.(And sorry for the english s2)\r\n\r\nSince asked, this is my application.yml\r\n\r\n\r\n     server:\r\n          port: 9999\r\n          context-path: /client\r\n        logging:\r\n          level:\r\n            org.springframework.security: DEBUG\r\n        endpoints:\r\n          trace:\r\n            sensitive: false\r\n            \r\n        spring:\r\n            thymeleaf:\r\n                cache: false\r\n            multipart: \r\n              maxFileSize: 51200KB\r\n              maxRequestFile: 51200KB  \r\n            \r\n        #################################################################################\r\n          \r\n        security:\r\n          basic:\r\n            enabled: false\r\n          oauth2:\r\n            client:\r\n              client-id: acme2\r\n              client-secret: acmesecret2\r\n              access-token-uri: http://localhost:8080/oauth/token\r\n              user-authorization-uri: http://localhost:8080/oauth/authorize\r\n            resource:\r\n              user-info-uri: http://localhost:8080/me\r\n        #    \r\n\r\n  \r\n\r\n    ","title":"&quot;the request was rejected because its size &quot; Spring, tomcat","body":"<p>I'm trying to make a simple upload app with springboot and it works fine until i try to upload 10Mb+ files, i receive this message on my screen: </p>\n\n<pre><code>There was an unexpected error (type=Internal Server Error, status=500).\nCould not parse multipart servlet request; nested exception is java.lang.IllegalStateException: org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (14326061) exceeds the configured maximum (10485760)\n</code></pre>\n\n<p>I've done some research, and nothing have worked until now. I'll leave here below the things i've tried so far.</p>\n\n<p>put this code(In various ways) in my \"application.yml\"</p>\n\n<pre><code>multipart: \n maxFileSize: 51200KB\n maxRequestFile: 51200KB  \n</code></pre>\n\n<p>I've also tried this in my principal class:</p>\n\n<pre><code>    @Bean\npublic TomcatEmbeddedServletContainerFactory containerFactory() {\n    TomcatEmbeddedServletContainerFactory factory = new TomcatEmbeddedServletContainerFactory();\n     factory.addConnectorCustomizers(new TomcatConnectorCustomizer() {\n        @Override\n        public void customize(Connector connector) {\n         ((AbstractHttp11Protocol&lt;?&gt;) connector.getProtocolHandler()).setMaxSwallowSize(-1);\n        }\n     });\n     return factory;\n}\n</code></pre>\n\n<p>And some strange thing. If i enter in my tomcat web.xml, the multipart-config is:</p>\n\n<pre><code>&lt;multipart-config&gt;\n      &lt;!-- 50MB max --&gt;\n      &lt;max-file-size&gt;52428800&lt;/max-file-size&gt;\n      &lt;max-request-size&gt;52428800&lt;/max-request-size&gt;\n      &lt;file-size-threshold&gt;0&lt;/file-size-threshold&gt;\n    &lt;/multipart-config&gt;\n</code></pre>\n\n<p>So where the hell this \"...configured maximum (10485760)\" is coming from ?\n(Sidenote: I'm using netbeans 8.1 and springboot 1.5).</p>\n\n<p>Thx guys.(And sorry for the english s2)</p>\n\n<p>Since asked, this is my application.yml</p>\n\n<pre><code> server:\n      port: 9999\n      context-path: /client\n    logging:\n      level:\n        org.springframework.security: DEBUG\n    endpoints:\n      trace:\n        sensitive: false\n\n    spring:\n        thymeleaf:\n            cache: false\n        multipart: \n          maxFileSize: 51200KB\n          maxRequestFile: 51200KB  \n\n    #################################################################################\n\n    security:\n      basic:\n        enabled: false\n      oauth2:\n        client:\n          client-id: acme2\n          client-secret: acmesecret2\n          access-token-uri: http://localhost:8080/oauth/token\n          user-authorization-uri: http://localhost:8080/oauth/authorize\n        resource:\n          user-info-uri: http://localhost:8080/me\n    #    \n</code></pre>\n"},{"tags":["java","lucene","fuzzy-search"],"owner":{"account_id":8736919,"reputation":129,"user_id":6535239,"display_name":"Elegant.Obj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691234287,"creation_date":1691234287,"question_id":76841396,"body_markdown":"I am using Lucene 9.7.0 java library\r\n\r\nI like the FuzzyQuery method for searching and my intention is to search phrases\r\n\r\nNow my code is working fine but I think there should be more convenient way to do the same:\r\n```java\r\nnew BooleanQuery.Builder()\r\n    .add(new FuzzyQuery(new Term(&quot;title&quot;, analyzer.normalize(null, &quot;foo&quot;)), 1), BooleanClause.Occur.MUST)\r\n    .add(new FuzzyQuery(new Term(&quot;title&quot;, analyzer.normalize(null, &quot;bar&quot;)), 1), BooleanClause.Occur.MUST)\r\n.build()\r\n```\r\n\r\nMaybe something like that (I got it from Lucene&#39;s documentation):\r\n```java\r\n String[] query = {&quot;query1&quot;, &quot;query2&quot;, &quot;query3&quot;};\r\n String[] fields = {&quot;filename&quot;, &quot;contents&quot;, &quot;description&quot;};\r\n BooleanClause.Occur[] flags = {BooleanClause.Occur.SHOULD,\r\n                BooleanClause.Occur.MUST,\r\n                BooleanClause.Occur.MUST_NOT};\r\n MultiFieldQueryParser.parse(query, fields, flags, analyzer);\r\n```\r\nI&#39;d appreciate a hint","title":"Lucene Query API: multi filed fuzzy query","body":"<p>I am using Lucene 9.7.0 java library</p>\n<p>I like the FuzzyQuery method for searching and my intention is to search phrases</p>\n<p>Now my code is working fine but I think there should be more convenient way to do the same:</p>\n<pre class=\"lang-java prettyprint-override\"><code>new BooleanQuery.Builder()\n    .add(new FuzzyQuery(new Term(&quot;title&quot;, analyzer.normalize(null, &quot;foo&quot;)), 1), BooleanClause.Occur.MUST)\n    .add(new FuzzyQuery(new Term(&quot;title&quot;, analyzer.normalize(null, &quot;bar&quot;)), 1), BooleanClause.Occur.MUST)\n.build()\n</code></pre>\n<p>Maybe something like that (I got it from Lucene's documentation):</p>\n<pre class=\"lang-java prettyprint-override\"><code> String[] query = {&quot;query1&quot;, &quot;query2&quot;, &quot;query3&quot;};\n String[] fields = {&quot;filename&quot;, &quot;contents&quot;, &quot;description&quot;};\n BooleanClause.Occur[] flags = {BooleanClause.Occur.SHOULD,\n                BooleanClause.Occur.MUST,\n                BooleanClause.Occur.MUST_NOT};\n MultiFieldQueryParser.parse(query, fields, flags, analyzer);\n</code></pre>\n<p>I'd appreciate a hint</p>\n"},{"tags":["java","date"],"comments":[{"owner":{"account_id":299251,"reputation":335905,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"score":8,"creation_date":1307435324,"post_id":6262310,"comment_id":7305819,"body_markdown":"Can we add Wiki/FAQ entry or article for date parsing/formatting and timezones? Looks like 1 out of 5 Java questions are about this topic...","body":"Can we add Wiki/FAQ entry or article for date parsing/formatting and timezones? Looks like 1 out of 5 Java questions are about this topic..."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1549965975,"post_id":6262310,"comment_id":96086180,"body_markdown":"For latecomers: don’t use `Date` and certainly don’t use `SimpleDateFormat`. Use `LocalDate` and `DateTimeFormatter` from [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/). For everyone: You are asking the impossible. A `Date` doesn’t have a format, and you cannot change how its `toString` method works (the same goes for the modern `LocalDate`)..","body":"For latecomers: don’t use <code>Date</code> and certainly don’t use <code>SimpleDateFormat</code>. Use <code>LocalDate</code> and <code>DateTimeFormatter</code> from <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>. For everyone: You are asking the impossible. A <code>Date</code> doesn’t have a format, and you cannot change how its <code>toString</code> method works (the same goes for the modern <code>LocalDate</code>).."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1691248920,"post_id":6262310,"comment_id":135467918,"body_markdown":"For a modern solution using *java.time*, see the Answers [by Ole V.V.](https://stackoverflow.com/a/54649203/642706) and [by Avinash](https://stackoverflow.com/a/76841385/642706).","body":"For a modern solution using <i>java.time</i>, see the Answers <a href=\"https://stackoverflow.com/a/54649203/642706\">by Ole V.V.</a> and <a href=\"https://stackoverflow.com/a/76841385/642706\">by Avinash</a>."}],"answers":[{"tags":[],"owner":{"account_id":102965,"reputation":415230,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"down_vote_count":0,"up_vote_count":55,"is_accepted":false,"score":55,"last_activity_date":1387214048,"creation_date":1307434108,"answer_id":6262336,"question_id":6262310,"body_markdown":"You need to go through [`SimpleDateFormat.format`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html#SimpleDateFormat%28java.lang.String%29) in order to format the date as a string.\r\n\r\nHere&#39;s an example that goes from `String` -&gt; `Date` -&gt; `String`.\r\n\r\n    SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n    Date date = dateFormat.parse(&quot;31/05/2011&quot;);\r\n\r\n    System.out.println(dateFormat.format(date));   // prints 31/05/2011\r\n    //                            ^^^^^^","title":"display Java.util.Date in a specific format","body":"<p>You need to go through <a href=\"http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html#SimpleDateFormat%28java.lang.String%29\"><code>SimpleDateFormat.format</code></a> in order to format the date as a string.</p>\n\n<p>Here's an example that goes from <code>String</code> -> <code>Date</code> -> <code>String</code>.</p>\n\n<pre><code>SimpleDateFormat dateFormat = new SimpleDateFormat(\"dd/MM/yyyy\");\nDate date = dateFormat.parse(\"31/05/2011\");\n\nSystem.out.println(dateFormat.format(date));   // prints 31/05/2011\n//                            ^^^^^^\n</code></pre>\n"},{"tags":[],"owner":{"account_id":212263,"reputation":136294,"user_id":464988,"accept_rate":94,"display_name":"MByD"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1307434123,"creation_date":1307434123,"answer_id":6262337,"question_id":6262310,"body_markdown":"You already has this (that&#39;s what you entered) `parse` will parse a date into a giving format and print the full date object (`toString`).","title":"display Java.util.Date in a specific format","body":"<p>You already has this (that's what you entered) <code>parse</code> will parse a date into a giving format and print the full date object (<code>toString</code>).</p>\n"},{"tags":[],"owner":{"account_id":297677,"reputation":3564,"user_id":603314,"accept_rate":88,"display_name":"bugs_"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1307434649,"creation_date":1307434191,"answer_id":6262347,"question_id":6262310,"body_markdown":"It makes no sense, but:\r\n\r\n    System.out.println(dateFormat.format(dateFormat.parse(&quot;31/05/2011&quot;)))\r\n    \r\n    SimpleDateFormat.parse() = // parse Date from String\r\n    SimpleDateFormat.format() = // format Date into String","title":"display Java.util.Date in a specific format","body":"<p>It makes no sense, but:</p>\n\n<pre><code>System.out.println(dateFormat.format(dateFormat.parse(\"31/05/2011\")))\n\nSimpleDateFormat.parse() = // parse Date from String\nSimpleDateFormat.format() = // format Date into String\n</code></pre>\n"},{"tags":[],"owner":{"account_id":33206,"reputation":10107,"user_id":92764,"accept_rate":84,"display_name":"Luciano Fiandesio"},"down_vote_count":1,"up_vote_count":74,"is_accepted":true,"score":73,"last_activity_date":1505820314,"creation_date":1307434328,"answer_id":6262370,"question_id":6262310,"body_markdown":"How about: \r\n\r\n    SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n    System.out.println(dateFormat.format(dateFormat.parse(&quot;31/05/2011&quot;)));\r\n\r\n    &gt; 31/05/2011","title":"display Java.util.Date in a specific format","body":"<p>How about: </p>\n\n<pre><code>SimpleDateFormat dateFormat = new SimpleDateFormat(\"dd/MM/yyyy\");\nSystem.out.println(dateFormat.format(dateFormat.parse(\"31/05/2011\")));\n\n&gt; 31/05/2011\n</code></pre>\n"},{"tags":[],"owner":{"account_id":222134,"reputation":2003,"user_id":480536,"accept_rate":100,"display_name":"BadSkillz"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1307434334,"creation_date":1307434334,"answer_id":6262371,"question_id":6262310,"body_markdown":"Use the SimpleDateFormat.format\r\n\r\n    SimpleDateFormat sdf = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n    Date date = new Date();\r\n    String sDate= sdf.format(date);","title":"display Java.util.Date in a specific format","body":"<p>Use the SimpleDateFormat.format</p>\n\n<pre><code>SimpleDateFormat sdf = new SimpleDateFormat(\"dd/MM/yyyy\");\nDate date = new Date();\nString sDate= sdf.format(date);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":227818,"reputation":3518,"user_id":489718,"accept_rate":71,"display_name":"Sanjay Jain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1307435504,"creation_date":1307435504,"answer_id":6262567,"question_id":6262310,"body_markdown":"This will help you.\r\nDateFormat df = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\nprint (df.format(new Date());","title":"display Java.util.Date in a specific format","body":"<p>This will help you.\nDateFormat df = new SimpleDateFormat(\"dd/MM/yyyy\");\nprint (df.format(new Date());</p>\n"},{"tags":[],"owner":{"account_id":2367632,"reputation":893,"user_id":2073032,"accept_rate":67,"display_name":"Thiago"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1381933087,"creation_date":1381933087,"answer_id":19405888,"question_id":6262310,"body_markdown":"If you want to simply output a date, just use the following:\r\n\r\n    System.out.printf(&quot;Date: %1$te/%1$tm/%1$tY at %1$tH:%1$tM:%1$tS%n&quot;, new Date());\r\n\r\nAs seen [here][1]. Or if you want to get the value into a String (for SQL building, for example) you can use:\r\n\r\n    String formattedDate = String.format(&quot;%1$te/%1$tm/%1$tY&quot;, new Date());\r\n\r\nYou can also customize your output by following the [Java API on Date/Time conversions][2].\r\n\r\n\r\n  [1]: http://blog.smartkey.co.uk/2011/10/quick-formatting-of-date-using-a-java-string-format-expression/\r\n  [2]: http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html#dt","title":"display Java.util.Date in a specific format","body":"<p>If you want to simply output a date, just use the following:</p>\n\n<pre><code>System.out.printf(\"Date: %1$te/%1$tm/%1$tY at %1$tH:%1$tM:%1$tS%n\", new Date());\n</code></pre>\n\n<p>As seen <a href=\"http://blog.smartkey.co.uk/2011/10/quick-formatting-of-date-using-a-java-string-format-expression/\" rel=\"nofollow\">here</a>. Or if you want to get the value into a String (for SQL building, for example) you can use:</p>\n\n<pre><code>String formattedDate = String.format(\"%1$te/%1$tm/%1$tY\", new Date());\n</code></pre>\n\n<p>You can also customize your output by following the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html#dt\" rel=\"nofollow\">Java API on Date/Time conversions</a>.</p>\n"},{"tags":[],"owner":{"account_id":1924499,"reputation":769,"user_id":1735269,"accept_rate":40,"display_name":"somshivam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1384017398,"creation_date":1384017398,"answer_id":19879720,"question_id":6262310,"body_markdown":"\r\nI had something like this, my suggestion would be to use java for things like this, don&#39;t put in boilerplate code\r\n\r\n![BasicImplementation][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/1Dbcx.png","title":"display Java.util.Date in a specific format","body":"<p>I had something like this, my suggestion would be to use java for things like this, don't put in boilerplate code</p>\n\n<p><img src=\"https://i.stack.imgur.com/1Dbcx.png\" alt=\"BasicImplementation\"></p>\n"},{"tags":[],"owner":{"account_id":4164931,"reputation":65,"user_id":3414090,"display_name":"Shan Abeywicrema"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1396459892,"creation_date":1396458550,"answer_id":22818376,"question_id":6262310,"body_markdown":"You can use simple date format in Java using the code below\r\n\r\n    SimpleDateFormat simpledatafo = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n    Date newDate = new Date();\r\n    String expectedDate= simpledatafo.format(newDate);\r\n","title":"display Java.util.Date in a specific format","body":"<p>You can use simple date format in Java using the code below</p>\n\n<pre><code>SimpleDateFormat simpledatafo = new SimpleDateFormat(\"dd/MM/yyyy\");\nDate newDate = new Date();\nString expectedDate= simpledatafo.format(newDate);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1549971148,"creation_date":1549971148,"answer_id":54649203,"question_id":6262310,"body_markdown":"## java.time\r\n\r\nHere’s the modern answer.\r\n\r\n\t\tDateTimeFormatter sourceFormatter = DateTimeFormatter.ofPattern(&quot;dd/MM/uuuu&quot;);\r\n\t\tDateTimeFormatter displayFormatter = DateTimeFormatter\r\n\t\t\t\t.ofLocalizedDate(FormatStyle.SHORT)\r\n\t\t\t\t.withLocale(Locale.forLanguageTag(&quot;zh-SG&quot;));\r\n\t\t\r\n\t\tString dateString = &quot;31/05/2011&quot;;\r\n\t\tLocalDate date = LocalDate.parse(dateString, sourceFormatter);\r\n\t\tSystem.out.println(date.format(displayFormatter));\r\n\r\nOutput from this snippet is:\r\n\r\n&gt; 31/05/11\r\n\r\nSee if you can live with the 2-digit year. Or use `FormatStyle.MEDIUM` to obtain `2011年5月31日`. I recommend you use Java’s built-in date and time formats when you can. It’s easier and lends itself very well to internationalization.\r\n\r\nIf you need the exact format you gave, just use the source formatter as display formatter too:\r\n\r\n\t\tSystem.out.println(date.format(sourceFormatter));\r\n\r\n&gt; 31/05/2011\r\n\r\nI recommend you don’t use `SimpleDateFormat`. It’s notoriously troublesome and long outdated. Instead I use java.time, the modern Java date and time API.\r\n\r\nTo obtain a specific format you need to format the parsed date back into a string. Netiher an old-fashioned `Date` nor a modern `LocalDate`can have a format in it.\r\n\r\n**Link:** [Oracle tutorial: Date Time](https://docs.oracle.com/javase/tutorial/datetime/) explaining how to use java.time.","title":"display Java.util.Date in a specific format","body":"<h2>java.time</h2>\n\n<p>Here’s the modern answer.</p>\n\n<pre><code>    DateTimeFormatter sourceFormatter = DateTimeFormatter.ofPattern(\"dd/MM/uuuu\");\n    DateTimeFormatter displayFormatter = DateTimeFormatter\n            .ofLocalizedDate(FormatStyle.SHORT)\n            .withLocale(Locale.forLanguageTag(\"zh-SG\"));\n\n    String dateString = \"31/05/2011\";\n    LocalDate date = LocalDate.parse(dateString, sourceFormatter);\n    System.out.println(date.format(displayFormatter));\n</code></pre>\n\n<p>Output from this snippet is:</p>\n\n<blockquote>\n  <p>31/05/11</p>\n</blockquote>\n\n<p>See if you can live with the 2-digit year. Or use <code>FormatStyle.MEDIUM</code> to obtain <code>2011年5月31日</code>. I recommend you use Java’s built-in date and time formats when you can. It’s easier and lends itself very well to internationalization.</p>\n\n<p>If you need the exact format you gave, just use the source formatter as display formatter too:</p>\n\n<pre><code>    System.out.println(date.format(sourceFormatter));\n</code></pre>\n\n<blockquote>\n  <p>31/05/2011</p>\n</blockquote>\n\n<p>I recommend you don’t use <code>SimpleDateFormat</code>. It’s notoriously troublesome and long outdated. Instead I use java.time, the modern Java date and time API.</p>\n\n<p>To obtain a specific format you need to format the parsed date back into a string. Netiher an old-fashioned <code>Date</code> nor a modern <code>LocalDate</code>can have a format in it.</p>\n\n<p><strong>Link:</strong> <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">Oracle tutorial: Date Time</a> explaining how to use java.time.</p>\n"},{"tags":[],"owner":{"account_id":5340830,"reputation":668,"user_id":4258006,"display_name":"Shiva kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646836145,"creation_date":1646836145,"answer_id":71410961,"question_id":6262310,"body_markdown":"This looks more compact. Finishes in a single line.\r\n\r\n\r\n    import org.apache.commons.lang3.time.DateFormatUtils;\r\n    \r\n    System.out.println(DateFormatUtils.format(newDate, &quot;yyyy-MM-dd HH:mm:ss&quot;));\r\n\r\n","title":"display Java.util.Date in a specific format","body":"<p>This looks more compact. Finishes in a single line.</p>\n<pre><code>import org.apache.commons.lang3.time.DateFormatUtils;\n\nSystem.out.println(DateFormatUtils.format(newDate, &quot;yyyy-MM-dd HH:mm:ss&quot;));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691234144,"creation_date":1691234144,"answer_id":76841385,"question_id":6262310,"body_markdown":"java.time\r\n--\r\n\r\nThe question and the answers written at that time use `java.util` Date-Time API and their formatting API, `SimpleDateFormat` which was the right thing to do at that time. Java 8, released in March 2014, brought the modern date-time API.  It is recommended to stop using the legacy date-time API entirely and switch to the [modern Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html).\r\n\r\nAlso, quoted below is a notice from the [home page of **Joda-Time**](https://www.joda.org/joda-time/):\r\n\r\n&gt; Note that from Java SE 8 onwards, users are asked to migrate to java.time (JSR-310) - a core part of the JDK which replaces this project.\r\n\r\nYour problem\r\n--\r\nYou are trying to parse the date string into a `java.util.Date` object and print it. A `java.util.Date` object represents only the number of milliseconds since January 1, 1970, 00:00:00 GMT. When you print its object, the string returned by [`Date#toString`](https://docs.oracle.com/javase/8/docs/api/java/util/Date.html#toString--), which applies your system&#39;s timezone, is printed. Note that a date-time object holds only date-time information, not a format. A format is represented using a string you obtain by formatting the date-time object using a date-time formatting class with the desired pattern.\r\n\r\nModern Date-Time API\r\n--\r\n\r\nThe following [table](https://docs.oracle.com/javase/tutorial/datetime/iso/overview.html) shows an overview of different types available in the modern Date-Time API.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe type, `LocalDate` fits your requirement. You can use different patterns for parsing and formatting using a [`DateTimeFormatter`](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html). The following example uses the same pattern for parsing and formatting:\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            String strDate = &quot;31/05/2011&quot;;\r\n            DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;dd/MM/uuuu&quot;, Locale.ENGLISH);\r\n            LocalDate date = LocalDate.parse(strDate, dtf);\r\n            System.out.printf(&quot;Default format: %s, Custom format: %s%n&quot;, date, date.format(dtf));\r\n        }\r\n    }\r\n    \r\n**Output:**\r\n\r\n    Default format: 2011-05-31, Custom format: 31/05/2011\r\n\r\n[ONLINE DEMO](https://ideone.com/NC7gUj)\r\n\r\n**Note:** Here, you can use `y` instead of `u` but [I prefer `u` to `y`](https://stackoverflow.com/a/65928023/10819573). Also, [never use `DateTimeFormatter` for custom formats without a Locale](https://stackoverflow.com/a/65544056/10819573).\r\n\r\n\r\nLearn more about the modern Date-Time API from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Z13Rb.png","title":"display Java.util.Date in a specific format","body":"<h2>java.time</h2>\n<p>The question and the answers written at that time use <code>java.util</code> Date-Time API and their formatting API, <code>SimpleDateFormat</code> which was the right thing to do at that time. Java 8, released in March 2014, brought the modern date-time API.  It is recommended to stop using the legacy date-time API entirely and switch to the <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html\" rel=\"nofollow noreferrer\">modern Date-Time API</a>.</p>\n<p>Also, quoted below is a notice from the <a href=\"https://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\">home page of <strong>Joda-Time</strong></a>:</p>\n<blockquote>\n<p>Note that from Java SE 8 onwards, users are asked to migrate to java.time (JSR-310) - a core part of the JDK which replaces this project.</p>\n</blockquote>\n<h2>Your problem</h2>\n<p>You are trying to parse the date string into a <code>java.util.Date</code> object and print it. A <code>java.util.Date</code> object represents only the number of milliseconds since January 1, 1970, 00:00:00 GMT. When you print its object, the string returned by <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Date.html#toString--\" rel=\"nofollow noreferrer\"><code>Date#toString</code></a>, which applies your system's timezone, is printed. Note that a date-time object holds only date-time information, not a format. A format is represented using a string you obtain by formatting the date-time object using a date-time formatting class with the desired pattern.</p>\n<h2>Modern Date-Time API</h2>\n<p>The following <a href=\"https://docs.oracle.com/javase/tutorial/datetime/iso/overview.html\" rel=\"nofollow noreferrer\">table</a> shows an overview of different types available in the modern Date-Time API.</p>\n<p><a href=\"https://i.stack.imgur.com/Z13Rb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Z13Rb.png\" alt=\"enter image description here\" /></a></p>\n<p>The type, <code>LocalDate</code> fits your requirement. You can use different patterns for parsing and formatting using a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html\" rel=\"nofollow noreferrer\"><code>DateTimeFormatter</code></a>. The following example uses the same pattern for parsing and formatting:</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        String strDate = &quot;31/05/2011&quot;;\n        DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;dd/MM/uuuu&quot;, Locale.ENGLISH);\n        LocalDate date = LocalDate.parse(strDate, dtf);\n        System.out.printf(&quot;Default format: %s, Custom format: %s%n&quot;, date, date.format(dtf));\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>Default format: 2011-05-31, Custom format: 31/05/2011\n</code></pre>\n<p><a href=\"https://ideone.com/NC7gUj\" rel=\"nofollow noreferrer\">ONLINE DEMO</a></p>\n<p><strong>Note:</strong> Here, you can use <code>y</code> instead of <code>u</code> but <a href=\"https://stackoverflow.com/a/65928023/10819573\">I prefer <code>u</code> to <code>y</code></a>. Also, <a href=\"https://stackoverflow.com/a/65544056/10819573\">never use <code>DateTimeFormatter</code> for custom formats without a Locale</a>.</p>\n<p>Learn more about the modern Date-Time API from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong>.</p>\n"}],"owner":{"account_id":761110,"reputation":719,"user_id":782287,"accept_rate":80,"display_name":"bhavya "},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":195080,"favorite_count":0,"down_vote_count":0,"up_vote_count":57,"accepted_answer_id":6262370,"answer_count":12,"score":57,"last_activity_date":1691234144,"creation_date":1307433976,"question_id":6262310,"body_markdown":"I have the following scenario :\r\n\r\n    SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n    System.out.println(dateFormat.parse(&quot;31/05/2011&quot;));\r\n\r\ngives an output \r\n\r\n    Tue May 31 00:00:00 SGT 2011\r\n\r\nbut I want the output to be \r\n\r\n    31/05/2011 \r\n\r\nI need to use parse here because the dates need to be sorted as Dates and not as String.\r\n\r\nAny ideas ??\r\n\r\n","title":"display Java.util.Date in a specific format","body":"<p>I have the following scenario :</p>\n\n<pre><code>SimpleDateFormat dateFormat = new SimpleDateFormat(\"dd/MM/yyyy\");\nSystem.out.println(dateFormat.parse(\"31/05/2011\"));\n</code></pre>\n\n<p>gives an output </p>\n\n<pre><code>Tue May 31 00:00:00 SGT 2011\n</code></pre>\n\n<p>but I want the output to be </p>\n\n<pre><code>31/05/2011 \n</code></pre>\n\n<p>I need to use parse here because the dates need to be sorted as Dates and not as String.</p>\n\n<p>Any ideas ??</p>\n"},{"tags":["java","lucene","full-text-search"],"owner":{"account_id":8736919,"reputation":129,"user_id":6535239,"display_name":"Elegant.Obj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691233220,"creation_date":1691232011,"question_id":76841244,"body_markdown":"I started to use the Lucene search library (v9.7.0). It works fine and as expected but I don&#39;t understand some API. Maybe there exists the best way to go?\r\n\r\nI use StandardAnalizer for indexing and preparing search terms. The question is - why StandardAnalizer#normileze requires a field name? I found out that it is not necessary to pass it\r\n\r\n```java\r\nnew FuzzyQuery(new Term(&quot;title&quot;, analyzer.normalize(null, &quot;foo&quot;)), 1)\r\n```\r\n\r\nI have to pass null and it smells","title":"Why Lucene&#39;s analyzer&#39;s normalize method needs a field name","body":"<p>I started to use the Lucene search library (v9.7.0). It works fine and as expected but I don't understand some API. Maybe there exists the best way to go?</p>\n<p>I use StandardAnalizer for indexing and preparing search terms. The question is - why StandardAnalizer#normileze requires a field name? I found out that it is not necessary to pass it</p>\n<pre class=\"lang-java prettyprint-override\"><code>new FuzzyQuery(new Term(&quot;title&quot;, analyzer.normalize(null, &quot;foo&quot;)), 1)\n</code></pre>\n<p>I have to pass null and it smells</p>\n"},{"tags":["java","weblogic","weblogic12c"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1691093060,"post_id":76831289,"comment_id":135448928,"body_markdown":"Please use [code format](https://stackoverflow.com/editing-help#code) for code, errors and logs.","body":"Please use <a href=\"https://stackoverflow.com/editing-help#code\">code format</a> for code, errors and logs."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1691093124,"post_id":76831289,"comment_id":135448941,"body_markdown":"Please share the source code of the error class.","body":"Please share the source code of the error class."},{"owner":{"account_id":2635556,"reputation":145,"user_id":2280352,"accept_rate":30,"display_name":"user2280352"},"score":0,"creation_date":1691094726,"post_id":76831289,"comment_id":135449252,"body_markdown":"This application is already deployed on Production Weblogic. I am trying to get it run locally for myself. The application is running fine on production.","body":"This application is already deployed on Production Weblogic. I am trying to get it run locally for myself. The application is running fine on production."}],"owner":{"account_id":2635556,"reputation":145,"user_id":2280352,"accept_rate":30,"display_name":"user2280352"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691140664,"answer_count":0,"score":0,"last_activity_date":1691232781,"creation_date":1691092819,"question_id":76831289,"body_markdown":"I get the following error while deploying Java application to Weblogic server\r\n\r\n    weblogic.utils.ErrorCollectionException: \r\n     There are 3 nested errors:\r\n        java.lang.IllegalArgumentException: \r\n             Method &quot;initialize&quot; in class  &quot;com.sim.try.ght.ment.cob.MentAdvancedQueueMessageListener&quot; is \r\n             defined as lifecycle callback method with annotation @PostConstruct,\r\n             but it cannot be declared to throw checked exception. \r\n\r\n     at weblogic.j2ee.dd.xml.validator.lifecyclecallback.BaseValidator.error(BaseValidator.java:206) \r\n     at weblogic.j2ee.dd.xml.validator.lifecyclecallback.BaseValidator.error(BaseValidator.java:229) \r\n     at weblogic.j2ee.dd.xml.validator.lifecyclecallback.BaseValidator.checkException(BaseValidator.java:178) \r\n     at weblogic.j2ee.dd.xml.validator.AbstractAnnotationValidator.checkMethod(AbstractAnnotationValidator.java:64) \r\n     at weblogic.j2ee.dd.xml.validator.AbstractAnnotationValidator.validate(AbstractAnnotationValidator.java:31) \r\n     at weblogic.j2ee.dd.xml.validator.AnnotationValidatorVisitor.visitLifeCycleCallbackBean(AnnotationValidatorVisitor.java:37) \r\n     at weblogic.j2ee.dd.xml.validator.AnnotationValidatorVisitor.visit(AnnotationValidatorVisitor.java:24) \r\n     at weblogic.descriptor.internal.AbstractDescriptorBean.accept(AbstractDescriptorBean.java:1448) \r\n     at weblogic.descriptor.internal.AbstractDescriptorBean.accept(AbstractDescriptorBean.java:1452) \r\n     at weblogic.descriptor.internal.AbstractDescriptorBean.accept(AbstractDescriptorBean.java:1452)\r\n     at weblogic.descriptor.internal.AbstractDescriptorBean.accept(AbstractDescriptorBean.java:1452) \r\n    \r\n  &gt; Weblogic version -12, Jdk -1,8\r\n\r\nHow can I resolve this error?\r\n\r\n\r\n","title":"Error while deploying Java application to Weblogic","body":"<p>I get the following error while deploying Java application to Weblogic server</p>\n<pre><code>weblogic.utils.ErrorCollectionException: \n There are 3 nested errors:\n    java.lang.IllegalArgumentException: \n         Method &quot;initialize&quot; in class  &quot;com.sim.try.ght.ment.cob.MentAdvancedQueueMessageListener&quot; is \n         defined as lifecycle callback method with annotation @PostConstruct,\n         but it cannot be declared to throw checked exception. \n\n at weblogic.j2ee.dd.xml.validator.lifecyclecallback.BaseValidator.error(BaseValidator.java:206) \n at weblogic.j2ee.dd.xml.validator.lifecyclecallback.BaseValidator.error(BaseValidator.java:229) \n at weblogic.j2ee.dd.xml.validator.lifecyclecallback.BaseValidator.checkException(BaseValidator.java:178) \n at weblogic.j2ee.dd.xml.validator.AbstractAnnotationValidator.checkMethod(AbstractAnnotationValidator.java:64) \n at weblogic.j2ee.dd.xml.validator.AbstractAnnotationValidator.validate(AbstractAnnotationValidator.java:31) \n at weblogic.j2ee.dd.xml.validator.AnnotationValidatorVisitor.visitLifeCycleCallbackBean(AnnotationValidatorVisitor.java:37) \n at weblogic.j2ee.dd.xml.validator.AnnotationValidatorVisitor.visit(AnnotationValidatorVisitor.java:24) \n at weblogic.descriptor.internal.AbstractDescriptorBean.accept(AbstractDescriptorBean.java:1448) \n at weblogic.descriptor.internal.AbstractDescriptorBean.accept(AbstractDescriptorBean.java:1452) \n at weblogic.descriptor.internal.AbstractDescriptorBean.accept(AbstractDescriptorBean.java:1452)\n at weblogic.descriptor.internal.AbstractDescriptorBean.accept(AbstractDescriptorBean.java:1452) \n</code></pre>\n<blockquote>\n<p>Weblogic version -12, Jdk -1,8</p>\n</blockquote>\n<p>How can I resolve this error?</p>\n"},{"tags":["java","sql","spring","apache-commons-dbutils"],"answers":[{"tags":[],"owner":{"account_id":1721698,"reputation":3579,"user_id":1577363,"display_name":"erhun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1461743964,"creation_date":1442241982,"answer_id":32567733,"question_id":30156127,"body_markdown":"I didn&#39;t find any official solution from [DBUtils API][1] so i just return generated ID and then query it after insert the record with this id at Service layer. This way method return Object at service layer, but i do one extra query.\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-dbutils/","title":"QueryRunner Insert method Return Type","body":"<p>I didn't find any official solution from <a href=\"https://commons.apache.org/proper/commons-dbutils/\" rel=\"nofollow\">DBUtils API</a> so i just return generated ID and then query it after insert the record with this id at Service layer. This way method return Object at service layer, but i do one extra query.</p>\n"},{"tags":[],"owner":{"account_id":7974658,"reputation":87,"user_id":6018232,"display_name":"Zhenhua Sheng"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691223385,"creation_date":1691223385,"answer_id":76840724,"question_id":30156127,"body_markdown":"the ResultSet of QueryRunner.insert return value only has one param that is the GENERATED_KEY of the record, you can get with rs.getInteger\r\n\r\n    Integer id = qr.insert(sql, rs -&gt; rs.next() ? rs.getInteger(&quot;GENERATED_KEY&quot;) : null, params);\r\n\r\nthen query with this id","title":"QueryRunner Insert method Return Type","body":"<p>the ResultSet of QueryRunner.insert return value only has one param that is the GENERATED_KEY of the record, you can get with rs.getInteger</p>\n<pre><code>Integer id = qr.insert(sql, rs -&gt; rs.next() ? rs.getInteger(&quot;GENERATED_KEY&quot;) : null, params);\n</code></pre>\n<p>then query with this id</p>\n"}],"owner":{"account_id":1721698,"reputation":3579,"user_id":1577363,"display_name":"erhun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2332,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":32567733,"answer_count":2,"score":0,"last_activity_date":1691232709,"creation_date":1431288429,"question_id":30156127,"body_markdown":" I am using Apache Commons DBUtils according to [QueryRunner#insert][1] method in its documentation, insert return the generic type of ResultSetHandler. I have a BR_Author object for my project. \r\n\r\n***BR_Author.java***\r\n\r\n\r\n    import org.springframework.stereotype.Repository;\r\n    \r\n    @Repository\r\n    public class BR_Author {\r\n    \tprivate int id;\r\n    \tprivate String authorName;\r\n    \r\n    \tpublic int getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    \r\n    \tpublic void setId(int id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \r\n    \tpublic String getAuthorName() {\r\n    \t\treturn authorName;\r\n    \t}\r\n    \r\n    \tpublic void setAuthorName(String authorName) {\r\n    \t\tthis.authorName = authorName;\r\n    \t}\r\n    }\r\n\r\nI write a simple insert statement at my service class like \r\n\r\n***AuthorService#createAuthor***\r\n\r\n    public BR_Author createAuthor(String authorName) throws ApiException {\r\n    \t\tString sql = &quot;Insert into BR_AUTHOR(authorName) VALUES(?)&quot;;\r\n    \t\tResultSetHandler&lt;BR_Author&gt; rs = new BeanHandler&lt;BR_Author&gt;(\r\n    \t\t\t\tBR_Author.class);\r\n    \t\tQueryRunner qr = new QueryRunner(dataSource);\r\n    \t\tObject[] params = { authorName };\r\n    \t\ttry {\r\n    \t\t\tBR_Author author = qr.insert(sql, rs, params);\r\n    \t\t\tSystem.out.println(&quot;Br_Author:&quot; + author);\r\n    \t\t\treturn author;\r\n    \r\n    \t\t} catch (SQLException e) {\r\n    \t\t\tthrow new ApiException(ErrorCode.ERR20001, e.getMessage());\r\n    \t\t}\r\n    \t}\r\n\r\nI am trying to return the added value at the createAuthor method, but if i configure the id field as auto-increment object return as \r\n\r\n    Br_Author:Br_Author [id=0, authorName=null]\r\n\r\nwhen I check the db I see that it adds the values successfully.\r\n\r\nIf I disable auto-increment and set the id from the code, the author object is null. So I want to learn that am I misunderstood the QueryRunner#insert method or if it has a bug. I already checked the below links.\r\n\r\n - [QueryRunner_insert_add_javadoc.patch][2]\r\n - [Generated key handling for updates][3]\r\n\r\n***BTW:*** Select queries working fine for the BR_Author class so it means there shouldn&#39;t be any mapping issue.\r\n\r\n  [1]: https://commons.apache.org/proper/commons-dbutils/apidocs/org/apache/commons/dbutils/QueryRunner.html#insert(java.lang.String,%20org.apache.commons.dbutils.ResultSetHandler)\r\n  [2]: https://issues.apache.org/jira/secure/attachment/12541287/QueryRunner_insert_add_javadoc.patch\r\n  [3]: https://issues.apache.org/jira/browse/DBUTILS-54","title":"QueryRunner Insert method Return Type","body":"<p>I am using Apache Commons DBUtils according to <a href=\"https://commons.apache.org/proper/commons-dbutils/apidocs/org/apache/commons/dbutils/QueryRunner.html#insert(java.lang.String,%20org.apache.commons.dbutils.ResultSetHandler)\" rel=\"nofollow noreferrer\">QueryRunner#insert</a> method in its documentation, insert return the generic type of ResultSetHandler. I have a BR_Author object for my project.</p>\n<p><em><strong>BR_Author.java</strong></em></p>\n<pre><code>import org.springframework.stereotype.Repository;\n\n@Repository\npublic class BR_Author {\n    private int id;\n    private String authorName;\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getAuthorName() {\n        return authorName;\n    }\n\n    public void setAuthorName(String authorName) {\n        this.authorName = authorName;\n    }\n}\n</code></pre>\n<p>I write a simple insert statement at my service class like</p>\n<p><em><strong>AuthorService#createAuthor</strong></em></p>\n<pre><code>public BR_Author createAuthor(String authorName) throws ApiException {\n        String sql = &quot;Insert into BR_AUTHOR(authorName) VALUES(?)&quot;;\n        ResultSetHandler&lt;BR_Author&gt; rs = new BeanHandler&lt;BR_Author&gt;(\n                BR_Author.class);\n        QueryRunner qr = new QueryRunner(dataSource);\n        Object[] params = { authorName };\n        try {\n            BR_Author author = qr.insert(sql, rs, params);\n            System.out.println(&quot;Br_Author:&quot; + author);\n            return author;\n\n        } catch (SQLException e) {\n            throw new ApiException(ErrorCode.ERR20001, e.getMessage());\n        }\n    }\n</code></pre>\n<p>I am trying to return the added value at the createAuthor method, but if i configure the id field as auto-increment object return as</p>\n<pre><code>Br_Author:Br_Author [id=0, authorName=null]\n</code></pre>\n<p>when I check the db I see that it adds the values successfully.</p>\n<p>If I disable auto-increment and set the id from the code, the author object is null. So I want to learn that am I misunderstood the QueryRunner#insert method or if it has a bug. I already checked the below links.</p>\n<ul>\n<li><a href=\"https://issues.apache.org/jira/secure/attachment/12541287/QueryRunner_insert_add_javadoc.patch\" rel=\"nofollow noreferrer\">QueryRunner_insert_add_javadoc.patch</a></li>\n<li><a href=\"https://issues.apache.org/jira/browse/DBUTILS-54\" rel=\"nofollow noreferrer\">Generated key handling for updates</a></li>\n</ul>\n<p><em><strong>BTW:</strong></em> Select queries working fine for the BR_Author class so it means there shouldn't be any mapping issue.</p>\n"},{"tags":["java","unit-testing","junit","junit5","parameterized-tests"],"comments":[{"owner":{"account_id":3455718,"reputation":102,"user_id":2894291,"display_name":"Josef Vesel&#253;"},"score":1,"creation_date":1691061791,"post_id":68419266,"comment_id":135442168,"body_markdown":"that would be useful but I don&#39;t think there is a better solution that the one you came up with","body":"that would be useful but I don&#39;t think there is a better solution that the one you came up with"},{"owner":{"account_id":11726648,"reputation":19523,"user_id":8583692,"display_name":"Mahozad"},"score":0,"creation_date":1694754242,"post_id":68419266,"comment_id":135935373,"body_markdown":"See https://github.com/junit-team/junit5/issues/1427","body":"See <a href=\"https://github.com/junit-team/junit5/issues/1427\" rel=\"nofollow noreferrer\">github.com/junit-team/junit5/issues/1427</a>"}],"answers":[{"tags":[],"owner":{"account_id":4185213,"reputation":7640,"user_id":3429133,"accept_rate":73,"display_name":"beatngu13"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1691231942,"creation_date":1691231942,"answer_id":76841237,"question_id":68419266,"body_markdown":"[JUnit Pioneer](https://github.com/junit-pioneer/junit-pioneer) comes with [`@CartesianTest`](https://junit-pioneer.org/docs/cartesian-product/):\r\n\r\n```java\r\nimport org.junitpioneer.jupiter.cartesian.CartesianTest;\r\nimport org.junitpioneer.jupiter.cartesian.CartesianTest.Enum;\r\n\r\nclass FigureAndColorTest {\r\n\r\n\tenum Figure {\r\n\t\tTRIANGE, SQUARE\r\n\t}\r\n\r\n\tenum Color {\r\n\t\tRED, YELLOW\r\n\t}\r\n\r\n\t@CartesianTest\r\n\tvoid test(@Enum Figure figure, @Enum Color color) {\r\n\t\tSystem.out.printf(&quot;%s %s%n&quot;, figure, color);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nOutput:\r\n\r\n```text\r\nTRIANGE RED\r\nTRIANGE YELLOW\r\nSQUARE RED\r\nSQUARE YELLOW\r\n```\r\n\r\n**DISCLAIMER:** I&#39;m one of the maintainers of JUnit Pionner.","title":"How to create parameterized test with few enums in JUnit 5?","body":"<p><a href=\"https://github.com/junit-pioneer/junit-pioneer\" rel=\"nofollow noreferrer\">JUnit Pioneer</a> comes with <a href=\"https://junit-pioneer.org/docs/cartesian-product/\" rel=\"nofollow noreferrer\"><code>@CartesianTest</code></a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.junitpioneer.jupiter.cartesian.CartesianTest;\nimport org.junitpioneer.jupiter.cartesian.CartesianTest.Enum;\n\nclass FigureAndColorTest {\n\n    enum Figure {\n        TRIANGE, SQUARE\n    }\n\n    enum Color {\n        RED, YELLOW\n    }\n\n    @CartesianTest\n    void test(@Enum Figure figure, @Enum Color color) {\n        System.out.printf(&quot;%s %s%n&quot;, figure, color);\n    }\n\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>TRIANGE RED\nTRIANGE YELLOW\nSQUARE RED\nSQUARE YELLOW\n</code></pre>\n<p><strong>DISCLAIMER:</strong> I'm one of the maintainers of JUnit Pionner.</p>\n"}],"owner":{"account_id":20654871,"reputation":236,"user_id":15164253,"display_name":"Victor Levin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11243,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":1,"score":11,"last_activity_date":1691231942,"creation_date":1626514632,"question_id":68419266,"body_markdown":"For example, I have few enums in my project:\r\n  - Figure, with values TRIANGLE and SQUARE\r\n  - Color, with values are RED and YELLOW\r\n\r\nHow to create a test, using the cartesian product of all of the combinations? The follow code doesn&#39;t work:\r\n\r\n    // this doesn&#39;t work\r\n    @ParameterizedTest\r\n    @EnumSource(value = Figure.class)\r\n    @EnumSource(value = Color.class)\r\n    void test(Figure figure, Color color) {\r\n        System.out.println(String.format(&quot;%s_%s&quot;,figure,color));\r\n    }\r\n\r\nI want to get all of combinations:\r\n\r\n    TRIANGLE RED\r\n    TRIANGLE YELLOW\r\n    SQUARE RED\r\n    SQUARE YELLOW\r\n\r\nMy temporary solution is using annotation @MethodSource\r\n\r\n    // this works\r\n    @ParameterizedTest\r\n    @MethodSource(&quot;generateCartesianProduct&quot;)\r\n    void test(Figure figure, Color color) {\r\n        System.out.println(String.format(&quot;%s_%s&quot;,figure,color));\r\n    }\r\n\r\n\r\n    private static Stream&lt;Arguments&gt; generateCartesianProduct() {\r\n        List&lt;Arguments&gt; argumentsList = new ArrayList&lt;&gt;();\r\n\r\n        for(Figure figure : Figure.values()) {\r\n            for(Color color : Color.values()) {\r\n                argumentsList.add(Arguments.of(figure,color));\r\n            }\r\n        }\r\n\r\n        return argumentsList.stream();\r\n    }\r\n\r\nBut I don&#39;t want to have extra code in my tests. Has JUnit 5 any solution for my problem?","title":"How to create parameterized test with few enums in JUnit 5?","body":"<p>For example, I have few enums in my project:</p>\n<ul>\n<li>Figure, with values TRIANGLE and SQUARE</li>\n<li>Color, with values are RED and YELLOW</li>\n</ul>\n<p>How to create a test, using the cartesian product of all of the combinations? The follow code doesn't work:</p>\n<pre><code>// this doesn't work\n@ParameterizedTest\n@EnumSource(value = Figure.class)\n@EnumSource(value = Color.class)\nvoid test(Figure figure, Color color) {\n    System.out.println(String.format(&quot;%s_%s&quot;,figure,color));\n}\n</code></pre>\n<p>I want to get all of combinations:</p>\n<pre><code>TRIANGLE RED\nTRIANGLE YELLOW\nSQUARE RED\nSQUARE YELLOW\n</code></pre>\n<p>My temporary solution is using annotation @MethodSource</p>\n<pre><code>// this works\n@ParameterizedTest\n@MethodSource(&quot;generateCartesianProduct&quot;)\nvoid test(Figure figure, Color color) {\n    System.out.println(String.format(&quot;%s_%s&quot;,figure,color));\n}\n\n\nprivate static Stream&lt;Arguments&gt; generateCartesianProduct() {\n    List&lt;Arguments&gt; argumentsList = new ArrayList&lt;&gt;();\n\n    for(Figure figure : Figure.values()) {\n        for(Color color : Color.values()) {\n            argumentsList.add(Arguments.of(figure,color));\n        }\n    }\n\n    return argumentsList.stream();\n}\n</code></pre>\n<p>But I don't want to have extra code in my tests. Has JUnit 5 any solution for my problem?</p>\n"},{"tags":["java","spring-boot","hibernate","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":26105575,"reputation":56,"user_id":19800332,"display_name":"butterCup"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691231763,"creation_date":1691231763,"answer_id":76841226,"question_id":76840712,"body_markdown":"\r\n    @RestController\r\n    @RequestMapping(&quot;/lookup/{tableName}&quot;)\r\n    public class LookupController {\r\n\r\n    @Autowired\r\n    private GenericRepository repository;\r\n\r\n    @GetMapping\r\n    public List&lt;?&gt; list(@PathVariable String tableName) {\r\n        return repository.findAll(tableName);\r\n    }\r\n\r\n    @GetMapping(&quot;/{id}&quot;)\r\n    public Object get(@PathVariable String tableName, @PathVariable Long id) {\r\n        return repository.findById(tableName, id);\r\n    }\r\n\r\n    @PutMapping(&quot;/{id}&quot;)\r\n    public void update(@PathVariable String tableName, @PathVariable Long id, @RequestBody Object entity) {\r\n        repository.save(tableName, entity);\r\n    }\r\n\r\n    @GetMapping(&quot;/findBy/{property}/{value}&quot;)\r\n    public List&lt;?&gt; findByProperty(@PathVariable String tableName, @PathVariable String property, @PathVariable String value) {\r\n        return repository.findByProperty(tableName, property, value);\r\n    }\r\n}\r\n\r\n\r\n\r\n    @Repository\r\n    public class GenericRepository {\r\n\r\n    @PersistenceContext\r\n    private EntityManager entityManager;\r\n\r\n    public List&lt;?&gt; findAll(String tableName) {\r\n        return entityManager.createQuery(&quot;SELECT e FROM &quot; + tableName + &quot; e&quot;).getResultList();\r\n    }\r\n\r\n    public Object findById(String tableName, Long id) {\r\n        return entityManager.find(tableName, id);\r\n    }\r\n\r\n    public void save(String tableName, Object entity) {\r\n        entityManager.merge(entity);\r\n    }\r\n\r\n    public List&lt;?&gt; findByProperty(String tableName, String property, String value) {\r\n        String query = &quot;SELECT e FROM &quot; + tableName + &quot; e WHERE e.&quot; + property + &quot; = :value&quot;;\r\n        TypedQuery&lt;?&gt; typedQuery = entityManager.createQuery(query, Object.class);\r\n        typedQuery.setParameter(&quot;value&quot;, value);\r\n        return typedQuery.getResultList();\r\n    }\r\n\r\nAbove reference is one way or generic entity class that can be used to represent all your lookup tables. And create a generic repository that extends JPA repository and inject it in controller and use it to perform various CRUD operations for lookup entities.\r\n\r\n    public interface GenericRepository &lt;T, ID extends Serializable&gt; extends JpaRepository&lt;T, ID&gt; {\r\n    \r\n}\r\n","title":"Is there a way to use a single controller and single generic JPARepository to handle multiple entities?","body":"<pre><code>@RestController\n@RequestMapping(&quot;/lookup/{tableName}&quot;)\npublic class LookupController {\n\n@Autowired\nprivate GenericRepository repository;\n\n@GetMapping\npublic List&lt;?&gt; list(@PathVariable String tableName) {\n    return repository.findAll(tableName);\n}\n\n@GetMapping(&quot;/{id}&quot;)\npublic Object get(@PathVariable String tableName, @PathVariable Long id) {\n    return repository.findById(tableName, id);\n}\n\n@PutMapping(&quot;/{id}&quot;)\npublic void update(@PathVariable String tableName, @PathVariable Long id, @RequestBody Object entity) {\n    repository.save(tableName, entity);\n}\n\n@GetMapping(&quot;/findBy/{property}/{value}&quot;)\npublic List&lt;?&gt; findByProperty(@PathVariable String tableName, @PathVariable String property, @PathVariable String value) {\n    return repository.findByProperty(tableName, property, value);\n}\n</code></pre>\n<p>}</p>\n<pre><code>@Repository\npublic class GenericRepository {\n\n@PersistenceContext\nprivate EntityManager entityManager;\n\npublic List&lt;?&gt; findAll(String tableName) {\n    return entityManager.createQuery(&quot;SELECT e FROM &quot; + tableName + &quot; e&quot;).getResultList();\n}\n\npublic Object findById(String tableName, Long id) {\n    return entityManager.find(tableName, id);\n}\n\npublic void save(String tableName, Object entity) {\n    entityManager.merge(entity);\n}\n\npublic List&lt;?&gt; findByProperty(String tableName, String property, String value) {\n    String query = &quot;SELECT e FROM &quot; + tableName + &quot; e WHERE e.&quot; + property + &quot; = :value&quot;;\n    TypedQuery&lt;?&gt; typedQuery = entityManager.createQuery(query, Object.class);\n    typedQuery.setParameter(&quot;value&quot;, value);\n    return typedQuery.getResultList();\n}\n</code></pre>\n<p>Above reference is one way or generic entity class that can be used to represent all your lookup tables. And create a generic repository that extends JPA repository and inject it in controller and use it to perform various CRUD operations for lookup entities.</p>\n<pre><code>public interface GenericRepository &lt;T, ID extends Serializable&gt; extends JpaRepository&lt;T, ID&gt; {\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":14043131,"reputation":43,"user_id":10144089,"display_name":"Jugs"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691231763,"creation_date":1691223170,"question_id":76840712,"body_markdown":"The product I&#39;m working on has more than 80 lookup tables and each with their own CRUD operations.\r\n\r\nI don&#39;t want to create separate controllers and JPARepositories for each of those models but I&#39;d like to use a single controller and a generic JPARepository to handle all the lookup table entities.\r\n\r\nController is a @RestController and it accepts json data and needs to have 4 operations namely LIST, GET, POST and PUT. Since the json data format is the same as there is only one table involved and no relations whatsoever, I think it must be possible achieve this in Sprint Hibernate.\r\n\r\nAppreciate some advice.","title":"Is there a way to use a single controller and single generic JPARepository to handle multiple entities?","body":"<p>The product I'm working on has more than 80 lookup tables and each with their own CRUD operations.</p>\n<p>I don't want to create separate controllers and JPARepositories for each of those models but I'd like to use a single controller and a generic JPARepository to handle all the lookup table entities.</p>\n<p>Controller is a @RestController and it accepts json data and needs to have 4 operations namely LIST, GET, POST and PUT. Since the json data format is the same as there is only one table involved and no relations whatsoever, I think it must be possible achieve this in Sprint Hibernate.</p>\n<p>Appreciate some advice.</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":10580983,"reputation":420,"user_id":7794806,"display_name":"Jes&#250;s Barrera"},"score":1,"creation_date":1644553174,"post_id":71075233,"comment_id":125642957,"body_markdown":"I think that DELETE annotation could be the retrofit one, for Room the right annotation is Delete (in lowercase)","body":"I think that DELETE annotation could be the retrofit one, for Room the right annotation is Delete (in lowercase)"}],"answers":[{"tags":[],"owner":{"account_id":23358250,"reputation":774,"user_id":17430910,"display_name":"Vaishnav Kanhirathingal"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1644634081,"creation_date":1644634081,"answer_id":71088583,"question_id":71075233,"body_markdown":"@Jes&#250;sBarrera from the comments is correct. check your imports. the annotation should be like this\r\n\r\n    @Delete\r\nandroid studio will probably import this\r\n\r\n    import androidx.room.*\r\nif not already present","title":"An abstract DAO method must be annotated with one and only one of the following annotations: Insert,Delete,Query,Update,RawQuery","body":"<p>@JesúsBarrera from the comments is correct. check your imports. the annotation should be like this</p>\n<pre><code>@Delete\n</code></pre>\n<p>android studio will probably import this</p>\n<pre><code>import androidx.room.*\n</code></pre>\n<p>if not already present</p>\n"},{"tags":[],"owner":{"account_id":14172306,"reputation":1738,"user_id":10238560,"display_name":"Tarif Chakder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644646386,"creation_date":1644646386,"answer_id":71089430,"question_id":71075233,"body_markdown":"You entered wrong annotation\r\n\r\nreplace \r\n\r\n    @DELETE\r\n\r\nto\r\n\r\n    @Delete","title":"An abstract DAO method must be annotated with one and only one of the following annotations: Insert,Delete,Query,Update,RawQuery","body":"<p>You entered wrong annotation</p>\n<p>replace</p>\n<pre><code>@DELETE\n</code></pre>\n<p>to</p>\n<pre><code>@Delete\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15006936,"reputation":2131,"user_id":10832700,"display_name":"ahmnouira"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691231402,"creation_date":1691231402,"answer_id":76841202,"question_id":71075233,"body_markdown":"I just forget to annotate the method with @Insert.\r\n\r\n```kotlin\r\nfun insertAll(postDbModels: Array&lt;PostDbModel&gt;)\r\n```\r\n\r\nJust adding @Insert fixed this.\r\n\r\n```kotlin\r\n@Insert\r\nfun insertAll(postDbModels: Array&lt;PostDbModel&gt;)\r\n```\r\n","title":"An abstract DAO method must be annotated with one and only one of the following annotations: Insert,Delete,Query,Update,RawQuery","body":"<p>I just forget to annotate the method with @Insert.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun insertAll(postDbModels: Array&lt;PostDbModel&gt;)\n</code></pre>\n<p>Just adding @Insert fixed this.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Insert\nfun insertAll(postDbModels: Array&lt;PostDbModel&gt;)\n</code></pre>\n"}],"owner":{"account_id":24222233,"reputation":11,"user_id":18177252,"display_name":"Atharv Vishwas Gupta"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1631,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1691231402,"creation_date":1644552591,"question_id":71075233,"body_markdown":"    @Dao\r\n    interface ArticleDAO {\r\n\r\n        @Insert(onConflict = OnConflictStrategy.REPLACE)\r\n        suspend fun upsert(article: Article) : Long\r\n\r\n        @Query(&quot;SELECT * FROM articles&quot;)\r\n        fun getAllArticles(): LiveData&lt;List&lt;Article&gt;&gt;\r\n\r\n        @DELETE\r\n        suspend fun deleteArticles(article: Article)\r\n    }\r\n\r\nHi! On running this code, I get the following error: \r\nAn abstract DAO method must be annotated with one and only one of the following annotations: Insert,Delete,Query,Update,RawQuery\r\nPlease help me with this","title":"An abstract DAO method must be annotated with one and only one of the following annotations: Insert,Delete,Query,Update,RawQuery","body":"<pre><code>@Dao\ninterface ArticleDAO {\n\n    @Insert(onConflict = OnConflictStrategy.REPLACE)\n    suspend fun upsert(article: Article) : Long\n\n    @Query(&quot;SELECT * FROM articles&quot;)\n    fun getAllArticles(): LiveData&lt;List&lt;Article&gt;&gt;\n\n    @DELETE\n    suspend fun deleteArticles(article: Article)\n}\n</code></pre>\n<p>Hi! On running this code, I get the following error:\nAn abstract DAO method must be annotated with one and only one of the following annotations: Insert,Delete,Query,Update,RawQuery\nPlease help me with this</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9727,"page":265,"page_size":100}
