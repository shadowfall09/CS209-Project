{"items":[{"tags":["java","arrays","list","for-loop"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":3,"creation_date":1667546533,"post_id":74313292,"comment_id":131196159,"body_markdown":"Sort the array being searched, then use `Arrays.binarySearch`. If you want to optimize further, sort the source array too, then as you iterate remember the results of the previous search to restrict the next search to a subset of the array being searched, using `fromIndex` &amp;  `toIndex` in `binarySearch` call.","body":"Sort the array being searched, then use <code>Arrays.binarySearch</code>. If you want to optimize further, sort the source array too, then as you iterate remember the results of the previous search to restrict the next search to a subset of the array being searched, using <code>fromIndex</code> &amp;  <code>toIndex</code> in <code>binarySearch</code> call."},{"owner":{"account_id":18315148,"reputation":105,"user_id":13337068,"display_name":"Neel Chavan"},"score":0,"creation_date":1667547533,"post_id":74313292,"comment_id":131196372,"body_markdown":"no arrays are not sorted","body":"no arrays are not sorted"}],"answers":[{"comments":[{"owner":{"account_id":18315148,"reputation":105,"user_id":13337068,"display_name":"Neel Chavan"},"score":0,"creation_date":1667549135,"post_id":74313710,"comment_id":131196778,"body_markdown":"can you explain in brief how binary search worked in this problem ?","body":"can you explain in brief how binary search worked in this problem ?"},{"owner":{"display_name":"user17233545"},"score":1,"creation_date":1667550457,"post_id":74313710,"comment_id":131197149,"body_markdown":"@NeelChavan Updated my answer.  Sorry, I&#39;m not good at English.","body":"@NeelChavan Updated my answer.  Sorry, I&#39;m not good at English."}],"tags":[],"owner":{"display_name":"user17233545"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1667556064,"creation_date":1667548193,"answer_id":74313710,"question_id":74313292,"body_markdown":"An implementation of Basil Bourque&#39;s comment.\r\nThis is `O(n log n)`. (Sort is `O(n log n)` and binary search `O(log n)` repeated `n` times)\r\n\r\n    static List&lt;Integer&gt; giantArmy(int a[],int b[]){\r\n        int aLength = a.length;\r\n        List&lt;Integer&gt; result = new ArrayList&lt;&gt;();\r\n        Arrays.sort(a);\r\n        for (int i : b) {\r\n            int index = Arrays.binarySearch(a, i);\r\n            if (index &lt; 0)\r\n                index = -index - 1;\r\n            result.add(aLength - index);\r\n        }\r\n        return result;\r\n    }\r\n    \r\n    public static void main(String[] args) {\r\n        System.out.println(giantArmy(new int[] {1, 2, 3, 4, 5}, new int[] {6, 5, 4, 3, 2}));\r\n    }\r\n\r\noutput:\r\n\r\n    [0, 1, 2, 3, 4]\r\n\r\n\r\nA binary search of `n` for the sorted `a` yields the number of elements of `a` whose number of elements to the right of the position found is greater than or equal to `n`.\r\n\r\n    [1 2 3 4 5]\r\n                    (number of elements &gt;= 6) = 0\r\n             x      (number of elements &gt;= 5) = 1\r\n           x x      (number of elements &gt;= 4) = 2\r\n         x x x      (number of elements &gt;= 3) = 3\r\n       x x x x      (number of elements &gt;= 2) = 4\r\n     x x x x x      (number of elements &gt;= 1) = 5\r\n     x x x x x      (number of elements &gt;= 0) = 5\r\n","title":"how to loop over two array&#39;s but saving execution time as much as possible","body":"<p>An implementation of Basil Bourque's comment.\nThis is <code>O(n log n)</code>. (Sort is <code>O(n log n)</code> and binary search <code>O(log n)</code> repeated <code>n</code> times)</p>\n<pre><code>static List&lt;Integer&gt; giantArmy(int a[],int b[]){\n    int aLength = a.length;\n    List&lt;Integer&gt; result = new ArrayList&lt;&gt;();\n    Arrays.sort(a);\n    for (int i : b) {\n        int index = Arrays.binarySearch(a, i);\n        if (index &lt; 0)\n            index = -index - 1;\n        result.add(aLength - index);\n    }\n    return result;\n}\n\npublic static void main(String[] args) {\n    System.out.println(giantArmy(new int[] {1, 2, 3, 4, 5}, new int[] {6, 5, 4, 3, 2}));\n}\n</code></pre>\n<p>output:</p>\n<pre><code>[0, 1, 2, 3, 4]\n</code></pre>\n<p>A binary search of <code>n</code> for the sorted <code>a</code> yields the number of elements of <code>a</code> whose number of elements to the right of the position found is greater than or equal to <code>n</code>.</p>\n<pre><code>[1 2 3 4 5]\n                (number of elements &gt;= 6) = 0\n         x      (number of elements &gt;= 5) = 1\n       x x      (number of elements &gt;= 4) = 2\n     x x x      (number of elements &gt;= 3) = 3\n   x x x x      (number of elements &gt;= 2) = 4\n x x x x x      (number of elements &gt;= 1) = 5\n x x x x x      (number of elements &gt;= 0) = 5\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2616652,"reputation":833,"user_id":2265587,"accept_rate":78,"display_name":"Anand"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667912187,"creation_date":1667825658,"answer_id":74346930,"question_id":74313292,"body_markdown":"    static List&lt;Integer&gt; giantArmy(Integer a[],Integer b[]){\r\n\t\tTreeSet&lt;Integer&gt; ts = new TreeSet&lt;&gt;();\r\n\t\tList&lt;Integer&gt; aList = Arrays.asList(a);\r\n\r\n\t\tts.addAll(aList);\r\n\t\tInteger[] count = new Integer[b.length];\r\n\r\n\t\tfor (int i = 0; i &lt; b.length; i++) {\r\n\t\t\tSet&lt;Integer&gt; tail_set = ts.tailSet(b[i]);\r\n\t  \r\n\t\t\tcount[i] = tail_set.size();\r\n\t\t}\r\n\r\n\t\treturn Arrays.asList(count);\r\n\t\t\r\n\t}\r\n\r\nOUTPUT:\r\n\r\n    [0, 1, 2, 3, 4]","title":"how to loop over two array&#39;s but saving execution time as much as possible","body":"<pre><code>static List&lt;Integer&gt; giantArmy(Integer a[],Integer b[]){\n    TreeSet&lt;Integer&gt; ts = new TreeSet&lt;&gt;();\n    List&lt;Integer&gt; aList = Arrays.asList(a);\n\n    ts.addAll(aList);\n    Integer[] count = new Integer[b.length];\n\n    for (int i = 0; i &lt; b.length; i++) {\n        Set&lt;Integer&gt; tail_set = ts.tailSet(b[i]);\n  \n        count[i] = tail_set.size();\n    }\n\n    return Arrays.asList(count);\n    \n}\n</code></pre>\n<p>OUTPUT:</p>\n<pre><code>[0, 1, 2, 3, 4]\n</code></pre>\n"}],"owner":{"account_id":18315148,"reputation":105,"user_id":13337068,"display_name":"Neel Chavan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74313710,"answer_count":2,"score":0,"last_activity_date":1667912187,"creation_date":1667545470,"question_id":74313292,"body_markdown":"I have two arrays **array a = [1, 2, 3, 4, 5]** and **array b = [6, 5, 4, 3, 2]** and i am returning a array list which contains a count where i taking elements of **array b** and checking what elements of **array a** are greater than or equal to the each element of **array b**, and i am storing this in **count** varible and later adding each **count** to the list so the output will be **list = [0, 1, 2, 3, 4]**, but the code i&#39;ve written is lacking in the performance for larger sets of input and not giving supposed answer&#39;s in the expected way any idea of how can i improve my code to improve the performance\r\n\r\n```\r\nstatic List&lt;Integer&gt; giantArmy(int a[],int b[]){\r\n\t\tList&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();\r\n\t\tif (a.length == 1 &amp;&amp; a[0] == 0) {\r\n\t\t\tlist.add(0);\r\n\t\t\treturn list;\r\n\t\t}\r\n\r\n\t\tint count = 0;\r\n\t\tfor (int i = 0; i &lt; b.length; i++) {\r\n\t\t\tfor (int j = 0; j &lt; a.length; j++) {\r\n\t\t\t\tif (a[j] &gt;= b[i]) {\r\n\t\t\t\t\tcount++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlist.add(count);\r\n\t\t\tcount = 0;\r\n\t\t}\r\n\t\treturn list;\r\n\t}\r\n```","title":"how to loop over two array&#39;s but saving execution time as much as possible","body":"<p>I have two arrays <strong>array a = [1, 2, 3, 4, 5]</strong> and <strong>array b = [6, 5, 4, 3, 2]</strong> and i am returning a array list which contains a count where i taking elements of <strong>array b</strong> and checking what elements of <strong>array a</strong> are greater than or equal to the each element of <strong>array b</strong>, and i am storing this in <strong>count</strong> varible and later adding each <strong>count</strong> to the list so the output will be <strong>list = [0, 1, 2, 3, 4]</strong>, but the code i've written is lacking in the performance for larger sets of input and not giving supposed answer's in the expected way any idea of how can i improve my code to improve the performance</p>\n<pre><code>static List&lt;Integer&gt; giantArmy(int a[],int b[]){\n        List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();\n        if (a.length == 1 &amp;&amp; a[0] == 0) {\n            list.add(0);\n            return list;\n        }\n\n        int count = 0;\n        for (int i = 0; i &lt; b.length; i++) {\n            for (int j = 0; j &lt; a.length; j++) {\n                if (a[j] &gt;= b[i]) {\n                    count++;\n                }\n            }\n            list.add(count);\n            count = 0;\n        }\n        return list;\n    }\n</code></pre>\n"},{"tags":["java","jackson","swagger","objectmapper","coverity"],"comments":[{"owner":{"account_id":3144597,"reputation":9476,"user_id":2659307,"display_name":"Scott McPeak"},"score":0,"creation_date":1668214366,"post_id":74350959,"comment_id":131358770,"body_markdown":"Where does `body` come from?","body":"Where does <code>body</code> come from?"}],"owner":{"account_id":5622940,"reputation":58,"user_id":4452157,"display_name":"Shashank Jain"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":214,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1667912089,"creation_date":1667844078,"question_id":74350959,"body_markdown":"Coverity shows the block of code with unsafe deserialization.\r\n\r\nHere the body that i am receiving is internal api call which it treats as external. but i am not sure how to get the fix. is there a way we can validate here so that it is acceptable. i can always mark it as false positive but was looking out for a solution. \r\n\r\nthis is one of the newer issues that are released with the newer version (Coverity 2022.3)\r\n```\r\n           String str = jacksonObjectMapper.writeValueAsString(body);\r\n\t\t\tContentDto contentDto = jacksonObjectMapper.readValue(str, ContentDto.class);\r\n//Calling &quot;readValue&quot;. This call uses &quot;str&quot; for sensitive computation. (The virtual call resolves to &quot;com.fasterxml.jackson.databind.ObjectMapper.readValue(java.lang.String, java.lang.Class)&quot;.)\r\n```\r\n","title":"Security tool unsafe deserialization","body":"<p>Coverity shows the block of code with unsafe deserialization.</p>\n<p>Here the body that i am receiving is internal api call which it treats as external. but i am not sure how to get the fix. is there a way we can validate here so that it is acceptable. i can always mark it as false positive but was looking out for a solution.</p>\n<p>this is one of the newer issues that are released with the newer version (Coverity 2022.3)</p>\n<pre><code>           String str = jacksonObjectMapper.writeValueAsString(body);\n            ContentDto contentDto = jacksonObjectMapper.readValue(str, ContentDto.class);\n//Calling &quot;readValue&quot;. This call uses &quot;str&quot; for sensitive computation. (The virtual call resolves to &quot;com.fasterxml.jackson.databind.ObjectMapper.readValue(java.lang.String, java.lang.Class)&quot;.)\n</code></pre>\n"},{"tags":["java","spring","jaxb","spring-oxm"],"owner":{"account_id":12140581,"reputation":193,"user_id":8864570,"display_name":"Suthan S M"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":668,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1667911761,"creation_date":1667902331,"question_id":74358995,"body_markdown":"I&#39;m using `spring-oxm v5.3.23`. With `jakarta.xml.bind-api v2.3.3` it all works fine. But if I upgrade `jakarta.xml.bind-api` to `v4.0.0` below exception is thrown.\r\n\r\n```\r\norg.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.oxm.jaxb.Jaxb2Marshaller]: Factory method &#39;marshaller&#39; threw exception; nested exception is java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException\r\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:659)\r\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:639)\r\n        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\r\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)\r\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\r\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)\r\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)\r\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)\r\n        at com.example.provisioninggateway.ProvisioningGatewayApplication.main(ProvisioningGatewayApplication.java:25)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49)\r\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:108)\r\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:58)\r\n        at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:65)\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;soapClientForCntdbTrigger&#39; defined in class path resource [de/telekom/pd/rcsecs/provisioninggateway/configuration/SoapWebServiceConfig.class]: Unsatisfied dependency expressed through method &#39;soapClientForCntdbTrigger&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;marshaller&#39; defined in class path resource [de/telekom/pd/rcsecs/provisioninggateway/configuration/SoapWebServiceConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.oxm.jaxb.Jaxb2Marshaller]: Factory method &#39;marshaller&#39; threw exception; nested exception is java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException\r\n        at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)\r\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n        at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\r\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:656)\r\n        ... 28 common frames omitted\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;marshaller&#39; defined in class path resource [de/telekom/pd/rcsecs/provisioninggateway/configuration/SoapWebServiceConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.oxm.jaxb.Jaxb2Marshaller]: Factory method &#39;marshaller&#39; threw exception; nested exception is java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException\r\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658)\r\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:486)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\nat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\r\n        at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)\r\n        at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)\r\n        ... 41 common frames omitted\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.oxm.jaxb.Jaxb2Marshaller]: Factory method &#39;marshaller&#39; threw exception; nested exception is java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException\r\n        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\r\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\r\n        ... 55 common frames omitted\r\nCaused by: java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException\r\n        at com.example.provisioninggateway.configuration.SoapWebServiceConfig.marshaller(SoapWebServiceConfig.java:54)\r\n        at com.example.provisioninggateway.configuration.SoapWebServiceConfig$$EnhancerBySpringCGLIB$$acee654f.CGLIB$marshaller$4(&lt;generated&gt;)\r\n        at com.example.provisioninggateway.configuration.SoapWebServiceConfig$$EnhancerBySpringCGLIB$$acee654f$$FastClassBySpringCGLIB$$6fcdb592.invoke(&lt;generated&gt;)\r\n        at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244)\r\n        at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)\r\n        at com.example.provisioninggateway.configuration.SoapWebServiceConfig$$EnhancerBySpringCGLIB$$acee654f.marshaller(&lt;generated&gt;)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\r\n        ... 56 common frames omitted\r\nCaused by: java.lang.ClassNotFoundException: javax.xml.bind.JAXBException\r\n        at java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:445)\r\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:587)\r\n        at org.springframework.boot.loader.LaunchedURLClassLoader.loadClass(LaunchedURLClassLoader.java:151)\r\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\r\n        ... 67 common frames omitted\r\n```\r\n\r\nLooks like `spring-oxm v5.3.23` which is the latest version in the maven repository released in September 2022 is using `javax.xml.bind.JAXBException` which is the old namespace used in `jakarta.xml.bind-api v2.3.3` which is changed to `jakarta.xml.bind.JAXBException`. But I can see in the spring-oxm Git repo [here][1] it is using the new jakarta namespace from long back (Aug 2021 at least)\r\n\r\nSo is there any other possibility to use jakarta.xml.bind-api v4.0.0 or it can be done only after a new release from spring-oxm ?\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-framework/blob/main/spring-oxm/src/main/java/org/springframework/oxm/jaxb/Jaxb2Marshaller.java","title":"Using jakarta.xml.bind-api v4.0.0 with spring-oxm","body":"<p>I'm using <code>spring-oxm v5.3.23</code>. With <code>jakarta.xml.bind-api v2.3.3</code> it all works fine. But if I upgrade <code>jakarta.xml.bind-api</code> to <code>v4.0.0</code> below exception is thrown.</p>\n<pre><code>org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.oxm.jaxb.Jaxb2Marshaller]: Factory method 'marshaller' threw exception; nested exception is java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:659)\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:639)\n        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)\n        at com.example.provisioninggateway.ProvisioningGatewayApplication.main(ProvisioningGatewayApplication.java:25)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49)\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:108)\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:58)\n        at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:65)\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'soapClientForCntdbTrigger' defined in class path resource [de/telekom/pd/rcsecs/provisioninggateway/configuration/SoapWebServiceConfig.class]: Unsatisfied dependency expressed through method 'soapClientForCntdbTrigger' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'marshaller' defined in class path resource [de/telekom/pd/rcsecs/provisioninggateway/configuration/SoapWebServiceConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.oxm.jaxb.Jaxb2Marshaller]: Factory method 'marshaller' threw exception; nested exception is java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException\n        at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:541)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n        at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:656)\n        ... 28 common frames omitted\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'marshaller' defined in class path resource [de/telekom/pd/rcsecs/provisioninggateway/configuration/SoapWebServiceConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.oxm.jaxb.Jaxb2Marshaller]: Factory method 'marshaller' threw exception; nested exception is java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658)\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:486)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\nat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\n        at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)\n        at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)\n        ... 41 common frames omitted\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.oxm.jaxb.Jaxb2Marshaller]: Factory method 'marshaller' threw exception; nested exception is java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException\n        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\n        ... 55 common frames omitted\nCaused by: java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException\n        at com.example.provisioninggateway.configuration.SoapWebServiceConfig.marshaller(SoapWebServiceConfig.java:54)\n        at com.example.provisioninggateway.configuration.SoapWebServiceConfig$$EnhancerBySpringCGLIB$$acee654f.CGLIB$marshaller$4(&lt;generated&gt;)\n        at com.example.provisioninggateway.configuration.SoapWebServiceConfig$$EnhancerBySpringCGLIB$$acee654f$$FastClassBySpringCGLIB$$6fcdb592.invoke(&lt;generated&gt;)\n        at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244)\n        at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)\n        at com.example.provisioninggateway.configuration.SoapWebServiceConfig$$EnhancerBySpringCGLIB$$acee654f.marshaller(&lt;generated&gt;)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\n        ... 56 common frames omitted\nCaused by: java.lang.ClassNotFoundException: javax.xml.bind.JAXBException\n        at java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:445)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:587)\n        at org.springframework.boot.loader.LaunchedURLClassLoader.loadClass(LaunchedURLClassLoader.java:151)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\n        ... 67 common frames omitted\n</code></pre>\n<p>Looks like <code>spring-oxm v5.3.23</code> which is the latest version in the maven repository released in September 2022 is using <code>javax.xml.bind.JAXBException</code> which is the old namespace used in <code>jakarta.xml.bind-api v2.3.3</code> which is changed to <code>jakarta.xml.bind.JAXBException</code>. But I can see in the spring-oxm Git repo <a href=\"https://github.com/spring-projects/spring-framework/blob/main/spring-oxm/src/main/java/org/springframework/oxm/jaxb/Jaxb2Marshaller.java\" rel=\"nofollow noreferrer\">here</a> it is using the new jakarta namespace from long back (Aug 2021 at least)</p>\n<p>So is there any other possibility to use jakarta.xml.bind-api v4.0.0 or it can be done only after a new release from spring-oxm ?</p>\n"},{"tags":["java","object","generics","properties"],"answers":[{"tags":[],"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667911726,"creation_date":1667911726,"answer_id":74361028,"question_id":74358979,"body_markdown":"Use class `PropertyUtils` from [Apache Commons BeanUtils][1].\r\n\r\n    public static void main( String[] args ) {\r\n      Emp emp = new Emp();\r\n      emp.setId(1);\r\n      emp.setMsisdn(&quot;msisdnvalue&quot;);\r\n\r\n      try {\r\n        String msisdn = (String) PropertyUtils.getProperty(emp, &quot;msisdn&quot;);\r\n        System.out.println(String.format(&quot;msisdn: %s&quot;, msisdn));\r\n      } catch(Exception e) {\r\n        e.printStackTrace();\r\n      }\r\n    }\r\n\r\n\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-beanutils/","title":"Get object properties from a generic object in java","body":"<p>Use class <code>PropertyUtils</code> from <a href=\"https://commons.apache.org/proper/commons-beanutils/\" rel=\"nofollow noreferrer\">Apache Commons BeanUtils</a>.</p>\n<pre><code>public static void main( String[] args ) {\n  Emp emp = new Emp();\n  emp.setId(1);\n  emp.setMsisdn(&quot;msisdnvalue&quot;);\n\n  try {\n    String msisdn = (String) PropertyUtils.getProperty(emp, &quot;msisdn&quot;);\n    System.out.println(String.format(&quot;msisdn: %s&quot;, msisdn));\n  } catch(Exception e) {\n    e.printStackTrace();\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":22956011,"reputation":26,"user_id":17086565,"display_name":"Yeasin Arafat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1667911726,"creation_date":1667902248,"question_id":74358979,"body_markdown":"I have a method to get properties from a generic object in c# below. How can I get the same in java? \r\n\r\n```\r\npublic string GetProperty&lt;T&gt;(T obj)\r\n        {\r\n            var s = string.Empty;\r\n            var t = obj.GetType();\r\n            foreach (var pi in t.GetProperties()) \r\n                s += &quot;  &quot; + pi.Name + &quot;:&quot; + pi.GetValue(obj, null);\r\n            return s;\r\n        }\r\n```\r\n\r\n\r\n\r\nSuppose I have a class Emp as below\r\n\r\n```\r\npublic class Emp {\r\n\tint Id;\r\n\tString Msisdn;\r\n\t\r\n\t\r\n\tpublic int getId() {\r\n\t\treturn Id;\r\n\t}\r\n\tpublic void setId(int id) {\r\n\t\tId = id;\r\n\t}\r\n\tpublic String getMsisdn() {\r\n\t\treturn Msisdn;\r\n\t}\r\n\tpublic void setMsisdn(String msisdn) {\r\n\t\tMsisdn = msisdn;\r\n\t}\r\n\t\r\n}\r\n```\r\n\r\nI want to call a method like below\r\n\r\n```\r\npublic Emp data = new Emp();\r\nemp.setId(1);\r\nemp.SetMsisdn(&quot;1404850126&quot;);\r\n\r\nString s = ConvertString(data);\r\n```\r\n\r\nIt will Return \r\n\r\n&gt; Id:1 Msisdn:1404850126\r\n","title":"Get object properties from a generic object in java","body":"<p>I have a method to get properties from a generic object in c# below. How can I get the same in java?</p>\n<pre><code>public string GetProperty&lt;T&gt;(T obj)\n        {\n            var s = string.Empty;\n            var t = obj.GetType();\n            foreach (var pi in t.GetProperties()) \n                s += &quot;  &quot; + pi.Name + &quot;:&quot; + pi.GetValue(obj, null);\n            return s;\n        }\n</code></pre>\n<p>Suppose I have a class Emp as below</p>\n<pre><code>public class Emp {\n    int Id;\n    String Msisdn;\n    \n    \n    public int getId() {\n        return Id;\n    }\n    public void setId(int id) {\n        Id = id;\n    }\n    public String getMsisdn() {\n        return Msisdn;\n    }\n    public void setMsisdn(String msisdn) {\n        Msisdn = msisdn;\n    }\n    \n}\n</code></pre>\n<p>I want to call a method like below</p>\n<pre><code>public Emp data = new Emp();\nemp.setId(1);\nemp.SetMsisdn(&quot;1404850126&quot;);\n\nString s = ConvertString(data);\n</code></pre>\n<p>It will Return</p>\n<blockquote>\n<p>Id:1 Msisdn:1404850126</p>\n</blockquote>\n"},{"tags":["java","spring-boot","junit","spring-boot-test","application.properties"],"comments":[{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1667899224,"post_id":74358115,"comment_id":131271764,"body_markdown":"As `ServerLoadConfiguration` is not `static` it will contain a  `IntegrationTest .this`, which is what you are probably experiencing. Make it `static`.","body":"As <code>ServerLoadConfiguration</code> is not <code>static</code> it will contain a  <code>IntegrationTest .this</code>, which is what you are probably experiencing. Make it <code>static</code>."},{"owner":{"account_id":26856552,"reputation":13,"user_id":20440772,"display_name":"nixadet464"},"score":0,"creation_date":1667899405,"post_id":74358115,"comment_id":131271831,"body_markdown":"@JoopEggen I get &quot;Only non-static nested classes can serve as &#39;@Nested&#39; test classes &quot; also I won&#39;t be able to use @Autowired objects from `IntegrationTest`","body":"@JoopEggen I get &quot;Only non-static nested classes can serve as &#39;@Nested&#39; test classes &quot; also I won&#39;t be able to use @Autowired objects from <code>IntegrationTest</code>"},{"owner":{"account_id":26856552,"reputation":13,"user_id":20440772,"display_name":"nixadet464"},"score":0,"creation_date":1667900984,"post_id":74358115,"comment_id":131272448,"body_markdown":"@xerx593 it&#39;s just an example.","body":"@xerx593 it&#39;s just an example."},{"owner":{"account_id":26856552,"reputation":13,"user_id":20440772,"display_name":"nixadet464"},"score":0,"creation_date":1667901178,"post_id":74358115,"comment_id":131272529,"body_markdown":"@xerx593 then I guess it would not work if I would put this annotation on outer class.","body":"@xerx593 then I guess it would not work if I would put this annotation on outer class."}],"answers":[{"comments":[{"owner":{"account_id":26856552,"reputation":13,"user_id":20440772,"display_name":"nixadet464"},"score":0,"creation_date":1667907924,"post_id":74359273,"comment_id":131274945,"body_markdown":"nah. This property has special meaning in application so I have not confused annotations.","body":"nah. This property has special meaning in application so I have not confused annotations."},{"owner":{"account_id":26856552,"reputation":13,"user_id":20440772,"display_name":"nixadet464"},"score":1,"creation_date":1667908788,"post_id":74359273,"comment_id":131275231,"body_markdown":"Okay. I got it why it works for you, because you have used @Value. I use @Autowired on record which is annotated with `@ConfigurationProperties(prefix = &quot;myfoo&quot;)\n@ConstructorBinding` inside. If I use @Value then I got updated value, but if I refer to this object then I got old value and propably that&#39;s because object was initialized once at start. Am I right?","body":"Okay. I got it why it works for you, because you have used @Value. I use @Autowired on record which is annotated with <code>@ConfigurationProperties(prefix = &quot;myfoo&quot;) @ConstructorBinding</code> inside. If I use @Value then I got updated value, but if I refer to this object then I got old value and propably that&#39;s because object was initialized once at start. Am I right?"},{"owner":{"account_id":26856552,"reputation":13,"user_id":20440772,"display_name":"nixadet464"},"score":0,"creation_date":1667908939,"post_id":74359273,"comment_id":131275280,"body_markdown":"I&#39;ve updated question how it looks. Please, take a look.","body":"I&#39;ve updated question how it looks. Please, take a look."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1667909357,"post_id":74359273,"comment_id":131275416,"body_markdown":"please note the significance between `myFoo` and `myInnerFoo` (tests) (if you&#39;d `@Autowired PropertyConfig propertyConfig;` on nested/inner level, I&#39;d expect new value, too)","body":"please note the significance between <code>myFoo</code> and <code>myInnerFoo</code> (tests) (if you&#39;d <code>@Autowired PropertyConfig propertyConfig;</code> on nested/inner level, I&#39;d expect new value, too)"},{"owner":{"account_id":26856552,"reputation":13,"user_id":20440772,"display_name":"nixadet464"},"score":1,"creation_date":1667910399,"post_id":74359273,"comment_id":131275831,"body_markdown":"I would too, but it&#39;s not. If I debug without additional `@Autowired PropertyConfig property config;` then I get old values in getter method. If I add additional @Autowired, then I git new value, BUT inside some other beans I got not refreshed value, so application get wrong results.\n\nYes. This class is @ConfigurationProperties as I typed in https://stackoverflow.com/questions/74358115/nested-class-takes-default-application-properties-values/74359273?noredirect=1#comment131275231_74359273","body":"I would too, but it&#39;s not. If I debug without additional <code>@Autowired PropertyConfig property config;</code> then I get old values in getter method. If I add additional @Autowired, then I git new value, BUT inside some other beans I got not refreshed value, so application get wrong results.  Yes. This class is @ConfigurationProperties as I typed in <a href=\"https://stackoverflow.com/questions/74358115/nested-class-takes-default-application-properties-values/74359273?noredirect=1#comment131275231_74359273\" title=\"nested class takes default application properties values\">stackoverflow.com/questions/74358115/&hellip;</a>"},{"owner":{"account_id":26856552,"reputation":13,"user_id":20440772,"display_name":"nixadet464"},"score":1,"creation_date":1667910605,"post_id":74359273,"comment_id":131275920,"body_markdown":"Other services depends on this PropertyConfig and it got not refreshed value as other services were loaded in another spring context initialization I guess.","body":"Other services depends on this PropertyConfig and it got not refreshed value as other services were loaded in another spring context initialization I guess."},{"owner":{"account_id":26856552,"reputation":13,"user_id":20440772,"display_name":"nixadet464"},"score":0,"creation_date":1667910719,"post_id":74359273,"comment_id":131275969,"body_markdown":"so I need to add additional @Autowired variables for other objects or reload context somehow.","body":"so I need to add additional @Autowired variables for other objects or reload context somehow."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1667911309,"post_id":74359273,"comment_id":131276181,"body_markdown":"yes, of course! since handling &quot;immutable objects&quot; (like record in my sample) ..on &quot;singleton objects&quot;(initliazed once, always reused) and doing such (grave) things like `@TestPropertySource`, i wouldn&#39;t try it otherwise.. :)","body":"yes, of course! since handling &quot;immutable objects&quot; (like record in my sample) ..on &quot;singleton objects&quot;(initliazed once, always reused) and doing such (grave) things like <code>@TestPropertySource</code>, i wouldn&#39;t try it otherwise.. :)"},{"owner":{"account_id":26856552,"reputation":13,"user_id":20440772,"display_name":"nixadet464"},"score":1,"creation_date":1667911483,"post_id":74359273,"comment_id":131276225,"body_markdown":"Okay then. We got the solution. My fault that I&#39;ve missed it in question (about @ConfigurationProperties). Thanks for help :)","body":"Okay then. We got the solution. My fault that I&#39;ve missed it in question (about @ConfigurationProperties). Thanks for help :)"}],"tags":[],"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"comment_count":9,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1667911405,"creation_date":1667903685,"answer_id":74359273,"question_id":74358115,"body_markdown":"Sorry, cannot reproduce, with:\r\n1. With [simple(st) quickstarter][1]\r\n2. Simple (java&gt;16) props:\r\n   ```\r\n   package com.example.demo;\r\n\r\n   import org.springframework.boot.context.properties.ConfigurationProperties;\r\n\r\n   @ConfigurationProperties(&quot;my&quot;)\r\n   record PropertyConfig(String foo) { }\r\n   ```\r\n3. Simple(st) Config:\r\n   ```\r\n   package com.example.demo;\r\n\r\n   import org.springframework.boot.SpringApplication;\r\n   import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n   import org.springframework.boot.context.properties.EnableConfigurationProperties;\r\n\r\n   @SpringBootApplication\r\n   @EnableConfigurationProperties(PropertyConfig.class)\r\n   public class DemoApplication {\r\n\r\n     public static void main(String[] args) {\r\n       SpringApplication.run(DemoApplication.class, args);\r\n     }\r\n\r\n   }\r\n   ```\r\n4. Test:\r\n   ```\r\n   package com.example.demo;\r\n\r\n   import org.junit.jupiter.api.Assertions;\r\n   import org.junit.jupiter.api.Nested;\r\n   import org.junit.jupiter.api.Test;\r\n   import org.springframework.beans.factory.annotation.Autowired;\r\n   import org.springframework.boot.test.context.SpringBootTest;\r\n   import org.springframework.context.ApplicationContext;\r\n   import org.springframework.test.context.TestPropertySource;\r\n\r\n   @SpringBootTest\r\n   @TestPropertySource(properties = {&quot;my.foo=bar&quot;})\r\n   public class DemoApplicationIT {\r\n\r\n     @Autowired\r\n     private PropertyConfig my;\r\n\r\n     @Nested\r\n     class InnerDefaultIT {\r\n\r\n       @Autowired\r\n       private PropertyConfig myInner;\r\n\r\n       @Test\r\n       void testInner() {\r\n         Assertions.assertNotNull(myInner.foo());\r\n         Assertions.assertEquals(my.foo(), myInner.foo());\r\n       }\r\n     }\r\n\r\n     @Nested\r\n     @TestPropertySource(properties = {&quot;my.foo=baz&quot;})\r\n     class InnerIT {\r\n\r\n       @Autowired\r\n       private PropertyConfig myInner;\r\n\r\n       @Test\r\n       void testInner() {\r\n         Assertions.assertEquals(&quot;bar&quot;, my.foo());\r\n         Assertions.assertEquals(&quot;baz&quot;, myInner.foo());\r\n       }\r\n     }\r\n\r\n     @Test\r\n     void testOuter() {\r\n       Assertions.assertEquals(&quot;bar&quot;, my.foo());\r\n     }\r\n\r\n   }\r\n\r\n   ```\r\n4. Passes (as &quot;unit&quot; as &quot;integration&quot;):\r\n   ```lang-bash\r\n   Tests run: 3, Failures: 0, Errors: 0, Skipped: 0\r\n   ```\r\n\r\n\r\n\r\n  [1]: https://start.spring.io/#!type=gradle-project&amp;language=java&amp;platformVersion=2.7.5&amp;packaging=jar&amp;jvmVersion=17&amp;groupId=com.example&amp;artifactId=demo&amp;name=demo&amp;description=Demo%20project%20for%20Spring%20Boot&amp;packageName=com.example.demo\r\n  [2]: https://www.google.com/search?q=testpropertysource%20site:github.com/spring-projects/spring-framework/releases\r\n  [3]: https://github.com/spring-projects/spring-framework/issues?q=is%3Aissue%20is%3Aopen%20%22TestPropertySource%22%20in%3Atitle%20","title":"@Nested class takes default application.properties values","body":"<p>Sorry, cannot reproduce, with:</p>\n<ol>\n<li>With <a href=\"https://start.spring.io/#!type=gradle-project&amp;language=java&amp;platformVersion=2.7.5&amp;packaging=jar&amp;jvmVersion=17&amp;groupId=com.example&amp;artifactId=demo&amp;name=demo&amp;description=Demo%20project%20for%20Spring%20Boot&amp;packageName=com.example.demo\" rel=\"nofollow noreferrer\">simple(st) quickstarter</a></li>\n<li>Simple (java&gt;16) props:\n<pre><code>package com.example.demo;\n\nimport org.springframework.boot.context.properties.ConfigurationProperties;\n\n@ConfigurationProperties(&quot;my&quot;)\nrecord PropertyConfig(String foo) { }\n</code></pre>\n</li>\n<li>Simple(st) Config:\n<pre><code>package com.example.demo;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.context.properties.EnableConfigurationProperties;\n\n@SpringBootApplication\n@EnableConfigurationProperties(PropertyConfig.class)\npublic class DemoApplication {\n\n  public static void main(String[] args) {\n    SpringApplication.run(DemoApplication.class, args);\n  }\n\n}\n</code></pre>\n</li>\n<li>Test:\n<pre><code>package com.example.demo;\n\nimport org.junit.jupiter.api.Assertions;\nimport org.junit.jupiter.api.Nested;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.test.context.TestPropertySource;\n\n@SpringBootTest\n@TestPropertySource(properties = {&quot;my.foo=bar&quot;})\npublic class DemoApplicationIT {\n\n  @Autowired\n  private PropertyConfig my;\n\n  @Nested\n  class InnerDefaultIT {\n\n    @Autowired\n    private PropertyConfig myInner;\n\n    @Test\n    void testInner() {\n      Assertions.assertNotNull(myInner.foo());\n      Assertions.assertEquals(my.foo(), myInner.foo());\n    }\n  }\n\n  @Nested\n  @TestPropertySource(properties = {&quot;my.foo=baz&quot;})\n  class InnerIT {\n\n    @Autowired\n    private PropertyConfig myInner;\n\n    @Test\n    void testInner() {\n      Assertions.assertEquals(&quot;bar&quot;, my.foo());\n      Assertions.assertEquals(&quot;baz&quot;, myInner.foo());\n    }\n  }\n\n  @Test\n  void testOuter() {\n    Assertions.assertEquals(&quot;bar&quot;, my.foo());\n  }\n\n}\n\n</code></pre>\n</li>\n<li>Passes (as &quot;unit&quot; as &quot;integration&quot;):\n<pre class=\"lang-bash prettyprint-override\"><code>Tests run: 3, Failures: 0, Errors: 0, Skipped: 0\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":26856552,"reputation":13,"user_id":20440772,"display_name":"nixadet464"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1192,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74359273,"answer_count":1,"score":1,"last_activity_date":1667911405,"creation_date":1667898303,"question_id":74358115,"body_markdown":"Could you tell me why if I have integration test like:\r\n\r\n\r\n```\r\n@TestPropertySource(properties = {&quot;spring.application.environment=dev&quot;})\r\n@SpringBootTest\r\nclass IntegrationTest  {\r\n\r\n@Autowired\r\nPropertyConfig propertyConfig;\r\n\r\n@Nested\r\n@SpringBootTest\r\n@TestPropertySource(properties = {&quot;spring.application.environment=dev&quot;, &quot;spring.application.property=example&quot;})\r\nclass ServerLoadConfiguration  {\r\n    \r\n    @Test\r\n\r\n    void exampleTest() {\r\nString someProperty = propertyConfig.getSomeProperty(); // old value\r\n        ....\r\n    }\r\n}\r\n```\r\n\r\n\r\nfor exampleTest I get values of properties from &#39;default&#39; properties instead of overridden with that one property specified in @TestPropertySource spring.application.property?\r\n\r\nIf I make `@TestPropertySource(properties = {&quot;spring.application.environment=dev&quot;, &quot;spring.application.property=example&quot;})\r\n` on IntegrationTest level, then nested class have this value applied.","title":"@Nested class takes default application.properties values","body":"<p>Could you tell me why if I have integration test like:</p>\n<pre><code>@TestPropertySource(properties = {&quot;spring.application.environment=dev&quot;})\n@SpringBootTest\nclass IntegrationTest  {\n\n@Autowired\nPropertyConfig propertyConfig;\n\n@Nested\n@SpringBootTest\n@TestPropertySource(properties = {&quot;spring.application.environment=dev&quot;, &quot;spring.application.property=example&quot;})\nclass ServerLoadConfiguration  {\n    \n    @Test\n\n    void exampleTest() {\nString someProperty = propertyConfig.getSomeProperty(); // old value\n        ....\n    }\n}\n</code></pre>\n<p>for exampleTest I get values of properties from 'default' properties instead of overridden with that one property specified in @TestPropertySource spring.application.property?</p>\n<p>If I make <code>@TestPropertySource(properties = {&quot;spring.application.environment=dev&quot;, &quot;spring.application.property=example&quot;}) </code> on IntegrationTest level, then nested class have this value applied.</p>\n"},{"tags":["java","stream"],"comments":[{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":1,"creation_date":1667907772,"post_id":74359957,"comment_id":131274895,"body_markdown":"Sorry, but the snippet of code you&#39;ve shared doesn&#39;t make much sense even without streams. If you want to use streams but don&#39;t know where to start - then start with **learning** basic information about [lambda expressions](https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html) and [streams](https://docs.oracle.com/javase/tutorial/collections/streams/index.html). And one of the very first thing you need to remember is that streams are **not** a just another way of writing loop, and they are not applicable in every case where loops can be used.","body":"Sorry, but the snippet of code you&#39;ve shared doesn&#39;t make much sense even without streams. If you want to use streams but don&#39;t know where to start - then start with <b>learning</b> basic information about <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html\" rel=\"nofollow noreferrer\">lambda expressions</a> and <a href=\"https://docs.oracle.com/javase/tutorial/collections/streams/index.html\" rel=\"nofollow noreferrer\">streams</a>. And one of the very first thing you need to remember is that streams are <b>not</b> a just another way of writing loop, and they are not applicable in every case where loops can be used."},{"owner":{"account_id":6560244,"reputation":1,"user_id":5071614,"display_name":"Adeel Aslam"},"score":0,"creation_date":1667907896,"post_id":74359957,"comment_id":131274930,"body_markdown":"I want characterAfterEncryption in range 97 to 122 and until it is not I am subtracting  26 in each iteration from it.","body":"I want characterAfterEncryption in range 97 to 122 and until it is not I am subtracting  26 in each iteration from it."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1667908021,"post_id":74359957,"comment_id":131274981,"body_markdown":"Did you manage to read so quickly the information provided via links in [this comment](https://stackoverflow.com/questions/74359957/should-a-traditional-while-loop-like-this-change-to-streams-in-java-and-how?noredirect=1#comment131274895_74359957) ?","body":"Did you manage to read so quickly the information provided via links in <a href=\"https://stackoverflow.com/questions/74359957/should-a-traditional-while-loop-like-this-change-to-streams-in-java-and-how?noredirect=1#comment131274895_74359957\">this comment</a> ?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1667909311,"post_id":74359957,"comment_id":131275396,"body_markdown":"Why are you using a loop rather than n&#39; = n - (n-97)/26 * 26 (all integer operations)?","body":"Why are you using a loop rather than n&#39; = n - (n-97)/26 * 26 (all integer operations)?"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1667914651,"post_id":74359957,"comment_id":131277558,"body_markdown":"*Should I focus on trying to change every loop in my project to new Streams?* In a word, **No**.","body":"<i>Should I focus on trying to change every loop in my project to new Streams?</i> In a word, <b>No</b>."}],"answers":[{"tags":[],"owner":{"account_id":11180480,"reputation":7031,"user_id":8207228,"display_name":"Ralf Kleberhoff"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667911174,"creation_date":1667911174,"answer_id":74360921,"question_id":74359957,"body_markdown":"Use streams if and only if the stream-based code is easier to understand than the loop-based code. Streams and loops are both valid Java constructs, and it&#39;s the developer&#39;s responsibility to decide which one to use.\r\n\r\nStreams are designed to support cases where you want to operate on multiple input values, e.g. from lists or sets or other series of data. And this does not apply to your snippet: you have a single input value. So, while it might be possible to create some piece of code that replicates the iterative algorithm using the streams API, the result will surely be very hard to read.\r\n\r\nSo, forget about &quot;Trying to avoid using Traditional loops in Java 8&quot;. There are cases where this is a good idea, but also cases where the traditional loop is exactly the right thing to do. And if you ever tried to debug a streams expression, you&#39;ll be even more hesitant to use the streams API.","title":"Should a traditional while loop like this change to streams in Java and how?","body":"<p>Use streams if and only if the stream-based code is easier to understand than the loop-based code. Streams and loops are both valid Java constructs, and it's the developer's responsibility to decide which one to use.</p>\n<p>Streams are designed to support cases where you want to operate on multiple input values, e.g. from lists or sets or other series of data. And this does not apply to your snippet: you have a single input value. So, while it might be possible to create some piece of code that replicates the iterative algorithm using the streams API, the result will surely be very hard to read.</p>\n<p>So, forget about &quot;Trying to avoid using Traditional loops in Java 8&quot;. There are cases where this is a good idea, but also cases where the traditional loop is exactly the right thing to do. And if you ever tried to debug a streams expression, you'll be even more hesitant to use the streams API.</p>\n"}],"owner":{"account_id":6560244,"reputation":1,"user_id":5071614,"display_name":"Adeel Aslam"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1667926870,"answer_count":1,"score":-2,"last_activity_date":1667911174,"creation_date":1667906787,"question_id":74359957,"body_markdown":"Should I focus on trying to change every loop in my project to new Streams ? Should the loop below change to streams and how? \r\n\r\n\r\n```\r\nwhile(characterAfterEncryption &gt; 122) {\r\n                \tcharacterAfterEncryption -= 26; \r\n                }\r\n```\r\n\r\n\r\nTrying to avoid using Traditional loops in Java 8. \r\n\r\nUnable to find a way how to do it using Streams? ","title":"Should a traditional while loop like this change to streams in Java and how?","body":"<p>Should I focus on trying to change every loop in my project to new Streams ? Should the loop below change to streams and how?</p>\n<pre><code>while(characterAfterEncryption &gt; 122) {\n                    characterAfterEncryption -= 26; \n                }\n</code></pre>\n<p>Trying to avoid using Traditional loops in Java 8.</p>\n<p>Unable to find a way how to do it using Streams?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":5184208,"reputation":1197,"user_id":4149026,"display_name":"Koloritnij"},"score":0,"creation_date":1667906099,"post_id":74359749,"comment_id":131274275,"body_markdown":"Why you don&#39;t want to use JWT for API authentication?","body":"Why you don&#39;t want to use JWT for API authentication?"},{"owner":{"account_id":26782616,"reputation":313,"user_id":20377250,"display_name":"Alex_X1"},"score":0,"creation_date":1667906782,"post_id":74359749,"comment_id":131274527,"body_markdown":"I never heard of JWT before, but I&#39;ll take a look into it.","body":"I never heard of JWT before, but I&#39;ll take a look into it."},{"owner":{"account_id":26782616,"reputation":313,"user_id":20377250,"display_name":"Alex_X1"},"score":0,"creation_date":1667907995,"post_id":74359749,"comment_id":131274970,"body_markdown":"But it doesn&#39;t solve my problem though","body":"But it doesn&#39;t solve my problem though"},{"owner":{"account_id":5184208,"reputation":1197,"user_id":4149026,"display_name":"Koloritnij"},"score":0,"creation_date":1667910576,"post_id":74359749,"comment_id":131275908,"body_markdown":"you don&#39;t need to validate the creds and put something into the session as it would be done by spring security. Link to docs https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/jwt.html","body":"you don&#39;t need to validate the creds and put something into the session as it would be done by spring security. Link to docs <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/jwt.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/reference/servlet/oauth2/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":26782616,"reputation":313,"user_id":20377250,"display_name":"Alex_X1"},"score":0,"creation_date":1667909702,"post_id":74360545,"comment_id":131275556,"body_markdown":"And how? Can you send the function / example","body":"And how? Can you send the function / example"}],"tags":[],"owner":{"account_id":13316371,"reputation":80,"user_id":13393881,"display_name":"fire_Rising"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1667910563,"creation_date":1667909549,"answer_id":74360545,"question_id":74359749,"body_markdown":"You can check session cookie validation with Spring Security:\r\n\r\n```\r\n@Bean\r\npublic SecurityFilterChain filterChain(HttpSecurity http) {\r\n    http\r\n        .sessionManagement(session -&gt; session\r\n            .sessionCreationPolicy(SessionCreationPolicy.ALWAYS)\r\n        );\r\n    return http.build();\r\n}\r\n```\r\n\r\ncookie: JSESSIONID\r\n\r\nSo in that case you&#39;ll have automatic session cookie validation.\r\n\r\nhttps://docs.spring.io/spring-security/reference/servlet/authentication/session-management.html\r\n&lt;hr/&gt;\r\n\r\n**But I would recommend to use JWT Tokens (OAuth 2.0 standard). With Spring Security it&#39;s easy to validate and inject Tokens with spring-boot-starter-oauth2-resource-server dependency** ","title":"Spring only allow access if Session Cookie is valid","body":"<p>You can check session cookie validation with Spring Security:</p>\n<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) {\n    http\n        .sessionManagement(session -&gt; session\n            .sessionCreationPolicy(SessionCreationPolicy.ALWAYS)\n        );\n    return http.build();\n}\n</code></pre>\n<p>cookie: JSESSIONID</p>\n<p>So in that case you'll have automatic session cookie validation.</p>\n<p><a href=\"https://docs.spring.io/spring-security/reference/servlet/authentication/session-management.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-security/reference/servlet/authentication/session-management.html</a></p>\n<hr/>\n<p><strong>But I would recommend to use JWT Tokens (OAuth 2.0 standard). With Spring Security it's easy to validate and inject Tokens with spring-boot-starter-oauth2-resource-server dependency</strong></p>\n"}],"owner":{"account_id":26782616,"reputation":313,"user_id":20377250,"display_name":"Alex_X1"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":766,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74360545,"answer_count":1,"score":0,"last_activity_date":1667910563,"creation_date":1667905864,"question_id":74359749,"body_markdown":"I want to lock all functions of my API behind an authentication. I managed it so send a Session cookie, but I don&#39;t want to check if the cookie is valid in every single function. There gotta be a better way, right? I know I am not supposed to save passwords in clear text, but this code is only for testing purposes.\r\nLogin:\r\n```\r\n@RestController\r\n@EnableSpringHttpSession\r\npublic class OnlineMapping {\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n    @PostMapping(path = &quot;/online&quot;)\r\n    public ResponseEntity&lt;?&gt; onlineRequest(@RequestBody OnlineRequest onlineRequest, HttpSession session) {\r\n        User user;\r\n        user = userRepository.findUserByUsernameAndPassword(onlineRequest.username, onlineRequest.password);\r\n        if (user!=null){\r\n            user.setLatestTimeStamp(System.currentTimeMillis());\r\n\r\n            return new ResponseEntity&lt;&gt;(&quot;You are now online, Enjoy!&quot;, HttpStatus.OK);\r\n        } else {\r\n            session.setAttribute(&quot;valid&quot;, false);\r\n            session.invalidate();\r\n            return new ResponseEntity&lt;&gt;(&quot;Invalid login&quot;, HttpStatus.valueOf(401));\r\n        }\r\n    }\r\n}\r\n```\r\nExample function:\r\n```java @PostMapping(&quot;/add&quot;)\r\n    public ResponseEntity&lt;?&gt; createMessage(@RequestBody MessageCreateRequest messageCreateRequest, HttpSession session) {\r\n        if (session.getAttribute(&quot;valid&quot;).equals(true)){ //I dont want this\r\n            Message m = new Message();\r\n            m.setContent(messageCreateRequest.content);\r\n            m.setSenderID(messageCreateRequest.senderID);\r\n            m.setChannelID(messageCreateRequest.channelID);\r\n            m.setTimeStamp(System.currentTimeMillis());\r\n            messageRepository.save(m);\r\n            return new ResponseEntity&lt;&gt;(&quot;Message created!&quot;, HttpStatus.OK);\r\n        }//\r\n        return new ResponseEntity&lt;&gt;(&quot;Invalid Session&quot;, HttpStatus.UNAUTHORIZED);\r\n    }```","title":"Spring only allow access if Session Cookie is valid","body":"<p>I want to lock all functions of my API behind an authentication. I managed it so send a Session cookie, but I don't want to check if the cookie is valid in every single function. There gotta be a better way, right? I know I am not supposed to save passwords in clear text, but this code is only for testing purposes.\nLogin:</p>\n<pre><code>@RestController\n@EnableSpringHttpSession\npublic class OnlineMapping {\n    @Autowired\n    private UserRepository userRepository;\n    @PostMapping(path = &quot;/online&quot;)\n    public ResponseEntity&lt;?&gt; onlineRequest(@RequestBody OnlineRequest onlineRequest, HttpSession session) {\n        User user;\n        user = userRepository.findUserByUsernameAndPassword(onlineRequest.username, onlineRequest.password);\n        if (user!=null){\n            user.setLatestTimeStamp(System.currentTimeMillis());\n\n            return new ResponseEntity&lt;&gt;(&quot;You are now online, Enjoy!&quot;, HttpStatus.OK);\n        } else {\n            session.setAttribute(&quot;valid&quot;, false);\n            session.invalidate();\n            return new ResponseEntity&lt;&gt;(&quot;Invalid login&quot;, HttpStatus.valueOf(401));\n        }\n    }\n}\n</code></pre>\n<p>Example function:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public ResponseEntity&lt;?&gt; createMessage(@RequestBody MessageCreateRequest messageCreateRequest, HttpSession session) {\n        if (session.getAttribute(&quot;valid&quot;).equals(true)){ //I dont want this\n            Message m = new Message();\n            m.setContent(messageCreateRequest.content);\n            m.setSenderID(messageCreateRequest.senderID);\n            m.setChannelID(messageCreateRequest.channelID);\n            m.setTimeStamp(System.currentTimeMillis());\n            messageRepository.save(m);\n            return new ResponseEntity&lt;&gt;(&quot;Message created!&quot;, HttpStatus.OK);\n        }//\n        return new ResponseEntity&lt;&gt;(&quot;Invalid Session&quot;, HttpStatus.UNAUTHORIZED);\n    }```\n</code></pre>\n"},{"tags":["java","android","java-native-interface","loadlibrary"],"answers":[{"comments":[{"owner":{"account_id":22215880,"reputation":41,"user_id":16454332,"display_name":"Markusbug"},"score":0,"creation_date":1667913141,"post_id":74360779,"comment_id":131276865,"body_markdown":"I am actually not sure. I just took this rust project and compiled it for target android and I loaded the .so file that this produced. Any chance you know where I can lookup how rust code can be translated into java?","body":"I am actually not sure. I just took this rust project and compiled it for target android and I loaded the .so file that this produced. Any chance you know where I can lookup how rust code can be translated into java?"},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1667913280,"post_id":74360779,"comment_id":131276929,"body_markdown":"I have never done Rust or Rust with JNI, but the same principle applies: look for calls to RegisterNative, look for functions with a Java_ prefix, probably with the `#[no_mangle]` attribute.","body":"I have never done Rust or Rust with JNI, but the same principle applies: look for calls to RegisterNative, look for functions with a Java_ prefix, probably with the <code>#[no_mangle]</code> attribute."}],"tags":[],"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1667910549,"creation_date":1667910549,"answer_id":74360779,"question_id":74360121,"body_markdown":"Depends on how the library maps Java methods to native function pointers: it can do one or both of the following:\r\n\r\n- Dynamic symbols that start with `Java_` are [mangled names for the class and method name][1].\r\n\r\n- If the code uses RegisterNatives system call you will have to put a breakpoint on `env-&gt;RegisterNatives` and look at the surrounding code/arguments.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/design.html#wp615","title":"See result of System.loadLibrary/ the defined methods and classes?","body":"<p>Depends on how the library maps Java methods to native function pointers: it can do one or both of the following:</p>\n<ul>\n<li><p>Dynamic symbols that start with <code>Java_</code> are <a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/design.html#wp615\" rel=\"nofollow noreferrer\">mangled names for the class and method name</a>.</p>\n</li>\n<li><p>If the code uses RegisterNatives system call you will have to put a breakpoint on <code>env-&gt;RegisterNatives</code> and look at the surrounding code/arguments.</p>\n</li>\n</ul>\n"}],"owner":{"account_id":22215880,"reputation":41,"user_id":16454332,"display_name":"Markusbug"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74360779,"answer_count":1,"score":0,"last_activity_date":1667910549,"creation_date":1667907614,"question_id":74360121,"body_markdown":"I have an .so file that I successfully integrated into android studio and I can load the file by calling `System.loadLibrary`. \r\n\r\nIs there a way I can see what methods and classes I can use now with this library loaded?","title":"See result of System.loadLibrary/ the defined methods and classes?","body":"<p>I have an .so file that I successfully integrated into android studio and I can load the file by calling <code>System.loadLibrary</code>.</p>\n<p>Is there a way I can see what methods and classes I can use now with this library loaded?</p>\n"},{"tags":["java","algorithm","data-structures","hashmap"],"comments":[{"owner":{"account_id":9838723,"reputation":197,"user_id":7288288,"accept_rate":0,"display_name":"Jayamal Jayamaha  "},"score":0,"creation_date":1667898637,"post_id":74358040,"comment_id":131271567,"body_markdown":"in your solution, I think time complexity is O(n) right?","body":"in your solution, I think time complexity is O(n) right?"},{"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"score":0,"creation_date":1667900491,"post_id":74358040,"comment_id":131272231,"body_markdown":"you can use a `HashMap&lt;String, Integer&gt;` to store the candidate and the number of votes and with the help of `Map::merge` keep track of the candidate with the maximum number of votes without reiteratre the map to find the max but I don&#39;t think you can do better of O(n). I don&#39;t see the necessity to store the time in the map","body":"you can use a <code>HashMap&lt;String, Integer&gt;</code> to store the candidate and the number of votes and with the help of <code>Map::merge</code> keep track of the candidate with the maximum number of votes without reiteratre the map to find the max but I don&#39;t think you can do better of O(n). I don&#39;t see the necessity to store the time in the map"},{"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1667904174,"post_id":74358040,"comment_id":131273615,"body_markdown":"Do you get only one time to give the answer for, or are there multiple queries for the same data set?","body":"Do you get only one time to give the answer for, or are there multiple queries for the same data set?"},{"owner":{"account_id":5736180,"reputation":21,"user_id":4530284,"display_name":"Shobhit Mittal"},"score":0,"creation_date":1667904975,"post_id":74358040,"comment_id":131273891,"body_markdown":"yes @trincot, there is just one time for a single testcase","body":"yes @trincot, there is just one time for a single testcase"},{"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1667905109,"post_id":74358040,"comment_id":131273948,"body_markdown":"Well since you have to read every vote as input, you are already spending time that is linear to the number of inputs, so you cannot hope to get a lesser time complexity than that, i.e. O(n).","body":"Well since you have to read every vote as input, you are already spending time that is linear to the number of inputs, so you cannot hope to get a lesser time complexity than that, i.e. O(n)."},{"owner":{"account_id":5736180,"reputation":21,"user_id":4530284,"display_name":"Shobhit Mittal"},"score":0,"creation_date":1667905189,"post_id":74358040,"comment_id":131273972,"body_markdown":"@JayamalJayamaha It will be nlogn since we will have to iterate through the list as well, iterating over the list could be binary search though since times will be sorted (increasing) order","body":"@JayamalJayamaha It will be nlogn since we will have to iterate through the list as well, iterating over the list could be binary search though since times will be sorted (increasing) order"},{"owner":{"account_id":5736180,"reputation":21,"user_id":4530284,"display_name":"Shobhit Mittal"},"score":0,"creation_date":1667905363,"post_id":74358040,"comment_id":131274031,"body_markdown":"@Pp88 could you please elaborate a bit, i cannot see how it will work without having &quot;time&quot; stored somehow..","body":"@Pp88 could you please elaborate a bit, i cannot see how it will work without having &quot;time&quot; stored somehow.."},{"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"score":0,"creation_date":1667905809,"post_id":74358040,"comment_id":131274158,"body_markdown":"Who will win if they have the same votes?","body":"Who will win if they have the same votes?"},{"owner":{"account_id":2684795,"reputation":182470,"user_id":2319407,"display_name":"Dmitry Bychenko"},"score":0,"creation_date":1667906192,"post_id":74358040,"comment_id":131274308,"body_markdown":"I suggest sorting the votes by time and then compute winners changes with a help of prefix sums: `(time : 4, A), (time 18 : C), (time 42: B)` now you can query it with a help of binary search: At time `20` we have closest record `(time : 18, C)`. Time complexity `O(n * log(n))` to build the structure, `O(log(n))` to query for each time.","body":"I suggest sorting the votes by time and then compute winners changes with a help of prefix sums: <code>(time : 4, A), (time 18 : C), (time 42: B)</code> now you can query it with a help of binary search: At time <code>20</code> we have closest record <code>(time : 18, C)</code>. Time complexity <code>O(n * log(n))</code> to build the structure, <code>O(log(n))</code> to query for each time."},{"owner":{"account_id":5736180,"reputation":21,"user_id":4530284,"display_name":"Shobhit Mittal"},"score":0,"creation_date":1667922720,"post_id":74358040,"comment_id":131281019,"body_markdown":"Thank you everyone for the answers :)","body":"Thank you everyone for the answers :)"}],"answers":[{"comments":[{"owner":{"account_id":5736180,"reputation":21,"user_id":4530284,"display_name":"Shobhit Mittal"},"score":0,"creation_date":1667924039,"post_id":74359884,"comment_id":131281578,"body_markdown":"Thank you for the response Pp88","body":"Thank you for the response Pp88"}],"tags":[],"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667906803,"creation_date":1667906455,"answer_id":74359884,"question_id":74358040,"body_markdown":"This is an O(N) solution, I&#39;m assuming you have in input 2 arrays one for candidates and one for times. Who will win if there are the same amount of votes is not clear so in this case the first wins. \r\n```\r\npublic Optional&lt;Character&gt; findCandidateWithMaxVotes(Character[] candidates, int[] times, int timeLimit) {\r\n    Character cadidateWithMaxVotes = null;\r\n    int max = 0, count = 0;\r\n    Map&lt;Character, Integer&gt; numberOvVotesForCandidate = new HashMap&lt;&gt;();\r\n    for(int i = 0; i &lt; times.length; i++) {\r\n    \tif(times[i] &lt;= timeLimit) {\r\n\t    \tcount = numberOvVotesForCandidate.merge(candidates[i], 1, Integer::sum);\r\n\t    \tif(max &lt; count) {\r\n\t    \t\tmax = count;\r\n\t    \t\tcadidateWithMaxVotes = candidates[i];\r\n\t    \t}\r\n    \t}\r\n    }\r\n    return Optional.ofNullable(cadidateWithMaxVotes);\r\n}\r\n```","title":"Optimal way to solve the below problem based on Data Structure","body":"<p>This is an O(N) solution, I'm assuming you have in input 2 arrays one for candidates and one for times. Who will win if there are the same amount of votes is not clear so in this case the first wins.</p>\n<pre><code>public Optional&lt;Character&gt; findCandidateWithMaxVotes(Character[] candidates, int[] times, int timeLimit) {\n    Character cadidateWithMaxVotes = null;\n    int max = 0, count = 0;\n    Map&lt;Character, Integer&gt; numberOvVotesForCandidate = new HashMap&lt;&gt;();\n    for(int i = 0; i &lt; times.length; i++) {\n        if(times[i] &lt;= timeLimit) {\n            count = numberOvVotesForCandidate.merge(candidates[i], 1, Integer::sum);\n            if(max &lt; count) {\n                max = count;\n                cadidateWithMaxVotes = candidates[i];\n            }\n        }\n    }\n    return Optional.ofNullable(cadidateWithMaxVotes);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5736180,"reputation":21,"user_id":4530284,"display_name":"Shobhit Mittal"},"score":0,"creation_date":1667924029,"post_id":74360089,"comment_id":131281570,"body_markdown":"Thank you for the response Dmitry","body":"Thank you for the response Dmitry"}],"tags":[],"owner":{"account_id":2684795,"reputation":182470,"user_id":2319407,"display_name":"Dmitry Bychenko"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667907439,"creation_date":1667907439,"answer_id":74360089,"question_id":74358040,"body_markdown":"It&#39;s a bit unclear should we answer just one question (&quot;who is the winner at time 20&quot;) or we are\r\nsupposed to preprocess the data provided and then answer several queries (&quot;who is the winner at time 20&quot;, &quot;who is winner at time 8&quot; etc.).\r\n\r\nThe *first* problem is easy: \r\n\r\n```\r\n// Nobody is leading before elections with 0 votes\r\nString leader = null;\r\nint leaderVotes = 0;\r\n\r\nHashMap&lt;string, Integer&gt; ballots = new HashMap&lt;string, Integer&gt;();\r\n\r\nfor (int i = 0; i &lt; candidates.length; ++i) {\r\n    // too late, don&#39;t count this vote\r\n    if (times[i] &gt; givenTime)\r\n        continue;\r\n\r\n    // number of votes \r\n    int current = ballots.containsKey(candidates[i]) \r\n      ? ballots.get(candidates[i]) + 1\r\n      : 1;\r\n\r\n    ballots.set(candidates[i], current);\r\n\r\n    // do we have a leader change?\r\n    //TODO: add tie breaking logic here\r\n    if (current &gt; leaderVotes) {\r\n        leaderVotes = current;\r\n        leader = candidates[i];\r\n    }\r\n}\r\n\r\n// at givenTime we have leader with leaderVotes\r\n```\r\n\r\nThe *second* problem is trickier: \r\n\r\n1. We sort the votes by time \r\n2. Scan them as we do in the first problem\r\n3. On every leader change we add a record into `(time, leader)` list\r\n4. Having all these done we have a *sorted* list which is ready for *binary search*: for given `time` we are looking for the latest record which is not later than `time`.","title":"Optimal way to solve the below problem based on Data Structure","body":"<p>It's a bit unclear should we answer just one question (&quot;who is the winner at time 20&quot;) or we are\nsupposed to preprocess the data provided and then answer several queries (&quot;who is the winner at time 20&quot;, &quot;who is winner at time 8&quot; etc.).</p>\n<p>The <em>first</em> problem is easy:</p>\n<pre><code>// Nobody is leading before elections with 0 votes\nString leader = null;\nint leaderVotes = 0;\n\nHashMap&lt;string, Integer&gt; ballots = new HashMap&lt;string, Integer&gt;();\n\nfor (int i = 0; i &lt; candidates.length; ++i) {\n    // too late, don't count this vote\n    if (times[i] &gt; givenTime)\n        continue;\n\n    // number of votes \n    int current = ballots.containsKey(candidates[i]) \n      ? ballots.get(candidates[i]) + 1\n      : 1;\n\n    ballots.set(candidates[i], current);\n\n    // do we have a leader change?\n    //TODO: add tie breaking logic here\n    if (current &gt; leaderVotes) {\n        leaderVotes = current;\n        leader = candidates[i];\n    }\n}\n\n// at givenTime we have leader with leaderVotes\n</code></pre>\n<p>The <em>second</em> problem is trickier:</p>\n<ol>\n<li>We sort the votes by time</li>\n<li>Scan them as we do in the first problem</li>\n<li>On every leader change we add a record into <code>(time, leader)</code> list</li>\n<li>Having all these done we have a <em>sorted</em> list which is ready for <em>binary search</em>: for given <code>time</code> we are looking for the latest record which is not later than <code>time</code>.</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":5736180,"reputation":21,"user_id":4530284,"display_name":"Shobhit Mittal"},"score":1,"creation_date":1667924060,"post_id":74360296,"comment_id":131281587,"body_markdown":"Thank you for the response Mike","body":"Thank you for the response Mike"}],"tags":[],"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1667910388,"creation_date":1667908408,"answer_id":74360296,"question_id":74358040,"body_markdown":"What I would do is as follows:\r\n\r\n1. First, implement a naive solution, such as the one you thought of, or the one suggested by Pp88 above.\r\n2. Then, immediately write a test for it, which shows&lt;sup&gt;(1)&lt;/sup&gt; that it works.\r\n3. Then, implement a more optimal solution, such as the one which follows.\r\n4. Finally, re-use the previous test to show&lt;sup&gt;(1)&lt;/sup&gt; that the more optimal solution also works.\r\n\r\nA more optimal solution could be as follows:\r\n\r\n1. Build a `LinkedHashMap` where the key is a time coordinate, and the value is one more map, in which the keys are the names of all candidates, and the values are the accumulated vote count of each candidate at that time coordinate.\r\n1. Traverse this `LinkedHashMap` and create a new map, where the key is again a time coordinate, and the value is the name of the winning candidate at that time coordinate. Throw away the previous map.\r\n1. Build an `ArrayList` containing all the keys in the map.\r\n\r\nOnce you have done all of the above, any query of the type &quot;who is the winner at time X&quot; can be answered by performing a binary search in the `ArrayList` to find the time coordinate which is closest to but does not exceed X, and then a look-up of the time coordinate in the map to find the name of the candidate who was winning at that moment.\r\n\r\nIgnoring the overhead of preparing the data structures, the time complexity of each query is equal to the time complexity of binary search, which is **O(log&lt;sub&gt;2&lt;/sub&gt; n)**. This is sub-linear, so it is better than O(N).\r\n\r\n--------------\r\n&lt;sup&gt;(1)&lt;/sup&gt; At best, we can say that a test &quot;shows that it works&quot;; it does not prove anything. The most accurate way of putting it is that it &quot;gives sufficient reason to believe that it works&quot;, but that&#39;s too long, so &quot;it shows that it works&quot; is a decent alternative.","title":"Optimal way to solve the below problem based on Data Structure","body":"<p>What I would do is as follows:</p>\n<ol>\n<li>First, implement a naive solution, such as the one you thought of, or the one suggested by Pp88 above.</li>\n<li>Then, immediately write a test for it, which shows<sup>(1)</sup> that it works.</li>\n<li>Then, implement a more optimal solution, such as the one which follows.</li>\n<li>Finally, re-use the previous test to show<sup>(1)</sup> that the more optimal solution also works.</li>\n</ol>\n<p>A more optimal solution could be as follows:</p>\n<ol>\n<li>Build a <code>LinkedHashMap</code> where the key is a time coordinate, and the value is one more map, in which the keys are the names of all candidates, and the values are the accumulated vote count of each candidate at that time coordinate.</li>\n<li>Traverse this <code>LinkedHashMap</code> and create a new map, where the key is again a time coordinate, and the value is the name of the winning candidate at that time coordinate. Throw away the previous map.</li>\n<li>Build an <code>ArrayList</code> containing all the keys in the map.</li>\n</ol>\n<p>Once you have done all of the above, any query of the type &quot;who is the winner at time X&quot; can be answered by performing a binary search in the <code>ArrayList</code> to find the time coordinate which is closest to but does not exceed X, and then a look-up of the time coordinate in the map to find the name of the candidate who was winning at that moment.</p>\n<p>Ignoring the overhead of preparing the data structures, the time complexity of each query is equal to the time complexity of binary search, which is <strong>O(log<sub>2</sub> n)</strong>. This is sub-linear, so it is better than O(N).</p>\n<hr />\n<p><sup>(1)</sup> At best, we can say that a test &quot;shows that it works&quot;; it does not prove anything. The most accurate way of putting it is that it &quot;gives sufficient reason to believe that it works&quot;, but that's too long, so &quot;it shows that it works&quot; is a decent alternative.</p>\n"}],"owner":{"account_id":5736180,"reputation":21,"user_id":4530284,"display_name":"Shobhit Mittal"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74360296,"answer_count":3,"score":0,"last_activity_date":1667910388,"creation_date":1667898006,"question_id":74358040,"body_markdown":"I was recently asked this in an interview.\r\n\r\nGiven below are the the candidates and the time at which they got a vote.\r\n\r\nQ. Given a time, print the person winning till that time.\r\n\r\n**Cand.      Time**\r\n\r\nA          4\r\n\r\nB           10\r\n\r\nC           15\r\n\r\n\r\nC           18\r\n\r\nC           21\r\n\r\nB           35\r\n\r\nB           40\r\n\r\nB           42\r\n\r\nE.g In the Qsn above, if we are asked to find the winner at time 20, answer would be C -&gt; Since C has 2 votes.\r\n\r\n\r\n**Tried Solution**\r\n\r\nHave a Map&lt;String, List&lt;Integer&gt;&gt; to store Map&lt;Candidate, [Time, votes]&gt;\r\n\r\nWe can iterate through the array &amp; fetch only the times which are less than 20 (as per the question).\r\n\r\nBut I believe there will be a more optimum way to solve this type of problem.\r\nEssentially store the given data in a proper Data Structure which will give us the result in optimum time.\r\n\r\nThanks","title":"Optimal way to solve the below problem based on Data Structure","body":"<p>I was recently asked this in an interview.</p>\n<p>Given below are the the candidates and the time at which they got a vote.</p>\n<p>Q. Given a time, print the person winning till that time.</p>\n<p><strong>Cand.      Time</strong></p>\n<p>A          4</p>\n<p>B           10</p>\n<p>C           15</p>\n<p>C           18</p>\n<p>C           21</p>\n<p>B           35</p>\n<p>B           40</p>\n<p>B           42</p>\n<p>E.g In the Qsn above, if we are asked to find the winner at time 20, answer would be C -&gt; Since C has 2 votes.</p>\n<p><strong>Tried Solution</strong></p>\n<p>Have a Map&lt;String, List&gt; to store Map&lt;Candidate, [Time, votes]&gt;</p>\n<p>We can iterate through the array &amp; fetch only the times which are less than 20 (as per the question).</p>\n<p>But I believe there will be a more optimum way to solve this type of problem.\nEssentially store the given data in a proper Data Structure which will give us the result in optimum time.</p>\n<p>Thanks</p>\n"},{"tags":["java","multithreading","completable-future"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1667900857,"post_id":74358481,"comment_id":131272392,"body_markdown":"You could use `whenComplete()` to provide a function that gets both the result and exception, checks for non-null parameters and handles the result accordingly. Or use the `allOf()` method to wait for all futures to be completed, then split the list into succeeded and failed futures and do bulk operations.","body":"You could use <code>whenComplete()</code> to provide a function that gets both the result and exception, checks for non-null parameters and handles the result accordingly. Or use the <code>allOf()</code> method to wait for all futures to be completed, then split the list into succeeded and failed futures and do bulk operations."},{"owner":{"account_id":20936085,"reputation":483,"user_id":15381219,"display_name":"Nishikant Tayade"},"score":0,"creation_date":1667901844,"post_id":74358481,"comment_id":131272785,"body_markdown":"I have the List&lt;Either&gt; where Either has data or exception. ```whenComplete()```seems to accept BiConsumer, in my case it will be ```List&lt;Either&gt;``` and ```Throwable```, but the problem is I dont have exception thrown from ```convertDSRowToJson()``` method, so there is no throwable actually, only ```List&lt;Either&gt;```.","body":"I have the List&lt;Either&gt; where Either has data or exception. <code>whenComplete()</code>seems to accept BiConsumer, in my case it will be <code>List&lt;Either&gt;</code> and <code>Throwable</code>, but the problem is I dont have exception thrown from <code>convertDSRowToJson()</code> method, so there is no throwable actually, only <code>List&lt;Either&gt;</code>."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1667902796,"post_id":74358481,"comment_id":131273157,"body_markdown":"Well, in that case you&#39;d need to get the `List&lt;Either&gt;` and check each element individually.","body":"Well, in that case you&#39;d need to get the <code>List&lt;Either&gt;</code> and check each element individually."}],"answers":[{"tags":[],"owner":{"account_id":9850021,"reputation":411,"user_id":7296372,"display_name":"mrkachariker"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667910244,"creation_date":1667910244,"answer_id":74360712,"question_id":74358481,"body_markdown":"You could try smth like this: \r\n```java\r\nvar futureList = mainList.stream()\r\n        .map(sublist -&gt; CompletableFuture.supplyAsync(() -&gt; FutureImpl.convertBusinessObjectJson(sublist)))\r\n        .collect(Collectors.toList());\r\n```\r\nThe above would collect a list of `CompletableFutures`. Now what needs to happen is we need to wait for the completion of all those futures. We do this by: \r\n```java\r\nvar joinedFutureList = futureList.stream()\r\n        .map(objectCompletableFuture -&gt; {\r\n            try {\r\n                return objectCompletableFuture.get();\r\n            } catch (InterruptedException | ExecutionException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }).collect(Collectors.toList());\r\n});\r\n```\r\nAfter that the separation would look smth like this:\r\n```java \r\nvar exceptionList = joinedFutureList.stream()\r\n        .filter(obj -&gt; obj instanceof Exception)\r\n        .peek(System.out::println)\r\n        .collect(Collectors.toList());\r\nvar successList = joinedFutureList.stream()\r\n        .filter(obj -&gt; obj instanceof String)\r\n        .peek(System.out::println)\r\n        .collect(Collectors.toList());\r\n```","title":"How to run Either values by using CompletableFuture?","body":"<p>You could try smth like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var futureList = mainList.stream()\n        .map(sublist -&gt; CompletableFuture.supplyAsync(() -&gt; FutureImpl.convertBusinessObjectJson(sublist)))\n        .collect(Collectors.toList());\n</code></pre>\n<p>The above would collect a list of <code>CompletableFutures</code>. Now what needs to happen is we need to wait for the completion of all those futures. We do this by:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var joinedFutureList = futureList.stream()\n        .map(objectCompletableFuture -&gt; {\n            try {\n                return objectCompletableFuture.get();\n            } catch (InterruptedException | ExecutionException e) {\n                throw new RuntimeException(e);\n            }\n        }).collect(Collectors.toList());\n});\n</code></pre>\n<p>After that the separation would look smth like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var exceptionList = joinedFutureList.stream()\n        .filter(obj -&gt; obj instanceof Exception)\n        .peek(System.out::println)\n        .collect(Collectors.toList());\nvar successList = joinedFutureList.stream()\n        .filter(obj -&gt; obj instanceof String)\n        .peek(System.out::println)\n        .collect(Collectors.toList());\n</code></pre>\n"}],"owner":{"account_id":20936085,"reputation":483,"user_id":15381219,"display_name":"Nishikant Tayade"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":177,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1667910244,"creation_date":1667900117,"question_id":74358481,"body_markdown":"Java version : 11\r\n\r\nI have a List, which contains many sublist and for each sublist I want to perform certain transformation/operations.\r\n\r\nI want to perform this operation in non-blocking asynchronous fashion, so I am using CompletableFuture.\r\n\r\n\r\n\r\nThis is my operation:\r\n\r\n```\r\npublic static List&lt;String&gt; convertBusinessObjectJson(List&lt;BusinessObject&gt; businessObjList) {\r\n   \r\n    List&lt;Either&gt; eitherValueOrException = {//omitted logic to convert to json}\r\n    return eitherValueOrException;\r\n}\r\n```\r\n&gt; It returns a List of `Either` Objects, where Either holds, either runtime exception thrown by conversion logic or `String` result when conversion is successful.\r\n\r\nThis is my caller code:\r\n\r\n\r\n```\r\nmainList.forEach(sublist -&gt; {\r\n    CompletableFuture&lt;List&lt;Either&gt;&gt; listCompletableFuture = CompletableFuture.supplyAsync(() -&gt; FutureImpl.convertBusinessObjectJson(sublist));\r\n});\r\n```\r\n\r\nOnce the `CompletableFuture&lt;List&lt;Either&gt;&gt; listCompletableFuture` is received, I want to chain the operation,\r\nAs in\r\n1. take `CompletableFuture&lt;List&lt;Either&gt;&gt; listCompletableFuture`, take exceptions only from list and, perform certain operation\r\n2. take `CompletableFuture&lt;List&lt;Either&gt;&gt; listCompletableFuture`, take results only from list and, perform certain operation\r\n\r\nSomething like this (pseudo code):\r\n\r\n```\r\nmainList.forEach(sublist -&gt; {\r\n    CompletableFuture&lt;List&lt;Either&gt;&gt; listCompletableFuture = CompletableFuture.supplyAsync(() -&gt; FutureImpl.convertDSRowToJson(subDSRowList));\r\nlistCompletableFuture.thenApply(//function which pushes exception to say kafka)\r\nlistCompletableFuture.thenApply(//function which pushes result to say database)\r\n});\r\n```\r\n\r\nCan it be done?\r\n\r\nAny help is much appreciated :) \r\n\r\n\r\n","title":"How to run Either values by using CompletableFuture?","body":"<p>Java version : 11</p>\n<p>I have a List, which contains many sublist and for each sublist I want to perform certain transformation/operations.</p>\n<p>I want to perform this operation in non-blocking asynchronous fashion, so I am using CompletableFuture.</p>\n<p>This is my operation:</p>\n<pre><code>public static List&lt;String&gt; convertBusinessObjectJson(List&lt;BusinessObject&gt; businessObjList) {\n   \n    List&lt;Either&gt; eitherValueOrException = {//omitted logic to convert to json}\n    return eitherValueOrException;\n}\n</code></pre>\n<blockquote>\n<p>It returns a List of <code>Either</code> Objects, where Either holds, either runtime exception thrown by conversion logic or <code>String</code> result when conversion is successful.</p>\n</blockquote>\n<p>This is my caller code:</p>\n<pre><code>mainList.forEach(sublist -&gt; {\n    CompletableFuture&lt;List&lt;Either&gt;&gt; listCompletableFuture = CompletableFuture.supplyAsync(() -&gt; FutureImpl.convertBusinessObjectJson(sublist));\n});\n</code></pre>\n<p>Once the <code>CompletableFuture&lt;List&lt;Either&gt;&gt; listCompletableFuture</code> is received, I want to chain the operation,\nAs in</p>\n<ol>\n<li>take <code>CompletableFuture&lt;List&lt;Either&gt;&gt; listCompletableFuture</code>, take exceptions only from list and, perform certain operation</li>\n<li>take <code>CompletableFuture&lt;List&lt;Either&gt;&gt; listCompletableFuture</code>, take results only from list and, perform certain operation</li>\n</ol>\n<p>Something like this (pseudo code):</p>\n<pre><code>mainList.forEach(sublist -&gt; {\n    CompletableFuture&lt;List&lt;Either&gt;&gt; listCompletableFuture = CompletableFuture.supplyAsync(() -&gt; FutureImpl.convertDSRowToJson(subDSRowList));\nlistCompletableFuture.thenApply(//function which pushes exception to say kafka)\nlistCompletableFuture.thenApply(//function which pushes result to say database)\n});\n</code></pre>\n<p>Can it be done?</p>\n<p>Any help is much appreciated :)</p>\n"},{"tags":["java","spring","multithreading","spring-boot","java-threads"],"answers":[{"comments":[{"owner":{"account_id":12261935,"reputation":167,"user_id":8949390,"display_name":"MAHIE"},"score":0,"creation_date":1616392699,"post_id":66740905,"comment_id":117977709,"body_markdown":"I apologize if my question confused you, but what I meant to ask is, how they behave if they called individually, it could be one is on &#39;A&#39; JVM and another one is on &#39;B&#39; JVM, and if I don&#39;t call .join() in both cases, will opened threads will ever be closed?","body":"I apologize if my question confused you, but what I meant to ask is, how they behave if they called individually, it could be one is on &#39;A&#39; JVM and another one is on &#39;B&#39; JVM, and if I don&#39;t call .join() in both cases, will opened threads will ever be closed?"}],"tags":[],"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1616393877,"creation_date":1616392174,"answer_id":66740905,"question_id":66740833,"body_markdown":"From the docs of [`CompletableFuture.supplyAsync(Supplier)`](https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/util/concurrent/CompletableFuture.html#supplyAsync(java.util.function.Supplier)):\r\n\r\n&gt; Returns a new CompletableFuture that is asynchronously completed by a task running in the [ForkJoinPool.commonPool()](https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/util/concurrent/ForkJoinPool.html#commonPool()) with the value obtained by calling the given Supplier.\r\n\r\nIt uses a thread pool in the background. This means that both futures can run in different threads.\r\n\r\nIf you wait for the first future to finish and then run the second future after it finishes, it might use the same thread because it is reused but it can also use a different thread.\r\n\r\nAs the thread pool belongs to a JVM instance, it will be closed when the JVM is closed so when a JVM is stopped, the thread pool will also be stopped.\r\n\r\nFrom the docs of [ForkJoinPool.commonPool()](https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/util/concurrent/ForkJoinPool.html#commonPool()):\r\n\r\n&gt; Returns the common pool instance. This pool is statically constructed; its run state is unaffected by attempts to shutdown() or shutdownNow(). However this pool and any ongoing processing are automatically terminated upon program System.exit(int). Any program that relies on asynchronous task processing to complete before program termination should invoke commonPool().awaitQuiescence, before exit.\r\n\r\nThe thread pool used for [`CompletableFuture.supplyAsync(Supplier)`](https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/util/concurrent/CompletableFuture.html#supplyAsync(java.util.function.Supplier)) will stay alive as long as the JVM stays alive.\r\n\r\nThe only thing that [`.join`](https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/util/concurrent/CompletableFuture.html#join()) is waiting for a future to complete, this does not close anything.","title":"CompletableFuture thread will ever be closed if I don&#39;t call .join() method?","body":"<p>From the docs of <a href=\"https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/util/concurrent/CompletableFuture.html#supplyAsync(java.util.function.Supplier)\" rel=\"nofollow noreferrer\"><code>CompletableFuture.supplyAsync(Supplier)</code></a>:</p>\n<blockquote>\n<p>Returns a new CompletableFuture that is asynchronously completed by a task running in the <a href=\"https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/util/concurrent/ForkJoinPool.html#commonPool()\" rel=\"nofollow noreferrer\">ForkJoinPool.commonPool()</a> with the value obtained by calling the given Supplier.</p>\n</blockquote>\n<p>It uses a thread pool in the background. This means that both futures can run in different threads.</p>\n<p>If you wait for the first future to finish and then run the second future after it finishes, it might use the same thread because it is reused but it can also use a different thread.</p>\n<p>As the thread pool belongs to a JVM instance, it will be closed when the JVM is closed so when a JVM is stopped, the thread pool will also be stopped.</p>\n<p>From the docs of <a href=\"https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/util/concurrent/ForkJoinPool.html#commonPool()\" rel=\"nofollow noreferrer\">ForkJoinPool.commonPool()</a>:</p>\n<blockquote>\n<p>Returns the common pool instance. This pool is statically constructed; its run state is unaffected by attempts to shutdown() or shutdownNow(). However this pool and any ongoing processing are automatically terminated upon program System.exit(int). Any program that relies on asynchronous task processing to complete before program termination should invoke commonPool().awaitQuiescence, before exit.</p>\n</blockquote>\n<p>The thread pool used for <a href=\"https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/util/concurrent/CompletableFuture.html#supplyAsync(java.util.function.Supplier)\" rel=\"nofollow noreferrer\"><code>CompletableFuture.supplyAsync(Supplier)</code></a> will stay alive as long as the JVM stays alive.</p>\n<p>The only thing that <a href=\"https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/util/concurrent/CompletableFuture.html#join()\" rel=\"nofollow noreferrer\"><code>.join</code></a> is waiting for a future to complete, this does not close anything.</p>\n"},{"tags":[],"owner":{"account_id":18315197,"reputation":1,"user_id":13337105,"display_name":"Sandeep Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1616393381,"creation_date":1616393381,"answer_id":66741065,"question_id":66740833,"body_markdown":"If you are worried about closure of open threads, i believe you can use \r\n\r\nrunAsync(Runnable runnable, Executor executor)\r\nand \r\nsupplyAsync(Supplier&lt;U&gt; supplier, Executor executor) APIs of CompletableFuture. Both of these APIs expects executor on which you want to execute your task.\r\n ","title":"CompletableFuture thread will ever be closed if I don&#39;t call .join() method?","body":"<p>If you are worried about closure of open threads, i believe you can use</p>\n<p>runAsync(Runnable runnable, Executor executor)\nand\nsupplyAsync(Supplier supplier, Executor executor) APIs of CompletableFuture. Both of these APIs expects executor on which you want to execute your task.</p>\n"}],"owner":{"account_id":12261935,"reputation":167,"user_id":8949390,"display_name":"MAHIE"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1804,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1667909956,"creation_date":1616391635,"question_id":66740833,"body_markdown":"```\r\nCompletableFuture retrunsVal = CompletableFuture.supplyAsync(() -&gt; {\r\n    //some logic\r\n    return new Object();\r\n});\r\n\r\nCompletableFuture notRetrunsVal = CompletableFuture.runAsync(() -&gt; {\r\n    //some logic\r\n});\r\n```\r\n\r\nWith my current understanding, if I don&#39;t call `retrunsVal.join();` then the thread opened in the first call will never be closed as long as the server is up, but even if I don&#39;t call `notRetrunsVal.join();` on the second call, the opened thread will get closed as soon as it did with the execution.\r\n\r\nPlease let me know if I have the correct understanding.\r\n\r\nThank You...","title":"CompletableFuture thread will ever be closed if I don&#39;t call .join() method?","body":"<pre><code>CompletableFuture retrunsVal = CompletableFuture.supplyAsync(() -&gt; {\n    //some logic\n    return new Object();\n});\n\nCompletableFuture notRetrunsVal = CompletableFuture.runAsync(() -&gt; {\n    //some logic\n});\n</code></pre>\n<p>With my current understanding, if I don't call <code>retrunsVal.join();</code> then the thread opened in the first call will never be closed as long as the server is up, but even if I don't call <code>notRetrunsVal.join();</code> on the second call, the opened thread will get closed as soon as it did with the execution.</p>\n<p>Please let me know if I have the correct understanding.</p>\n<p>Thank You...</p>\n"},{"tags":["java","jdbc","db2"],"comments":[{"owner":{"account_id":1270839,"reputation":18313,"user_id":1227152,"display_name":"mustaccio"},"score":0,"creation_date":1440876090,"post_id":32289409,"comment_id":52457255,"body_markdown":"It&#39;s a network error, not DB2. Use `netstat -ap | grep db2sysc` or similar on the server to verify that the instance is indeed listening on the port you think it does, and `telnet serverhost 50001` on the client to confirm that you can connect.","body":"It&#39;s a network error, not DB2. Use <code>netstat -ap | grep db2sysc</code> or similar on the server to verify that the instance is indeed listening on the port you think it does, and <code>telnet serverhost 50001</code> on the client to confirm that you can connect."},{"owner":{"account_id":5678749,"reputation":1049,"user_id":4490818,"accept_rate":44,"display_name":"Mike Storey"},"score":0,"creation_date":1440880542,"post_id":32289409,"comment_id":52458422,"body_markdown":"I&#39;m not ruling out a network problem, but I&#39;m still stumped. netstat shows db2 listening on 50001, and telnet dbserver 50001 results in a Connection Refused error, even from dbserver locally. Both servers are on the same sub-net and both have port 50001 open on the firewall. It seems as though db2 is refusing the connection.","body":"I&#39;m not ruling out a network problem, but I&#39;m still stumped. netstat shows db2 listening on 50001, and telnet dbserver 50001 results in a Connection Refused error, even from dbserver locally. Both servers are on the same sub-net and both have port 50001 open on the firewall. It seems as though db2 is refusing the connection."},{"owner":{"account_id":6342170,"reputation":16858,"user_id":4923755,"accept_rate":100,"display_name":"data_henrik"},"score":1,"creation_date":1440920785,"post_id":32289409,"comment_id":52465643,"body_markdown":"If DB2 is refusing the connection there should be something in the db2diag.log. If it is not, then it is the network alone.","body":"If DB2 is refusing the connection there should be something in the db2diag.log. If it is not, then it is the network alone."},{"owner":{"account_id":1674243,"reputation":10078,"user_id":1553537,"accept_rate":29,"display_name":"Giorgi Tsiklauri"},"score":0,"creation_date":1598210015,"post_id":32289409,"comment_id":112376825,"body_markdown":"Can you just try to disable the firewall completely?","body":"Can you just try to disable the firewall completely?"}],"answers":[{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1440976211,"post_id":32300673,"comment_id":52480271,"body_markdown":"Telnet has nothing to do with it. The DB2 process wasn&#39;t running.","body":"Telnet has nothing to do with it. The DB2 process wasn&#39;t running."},{"owner":{"account_id":206778,"reputation":7655,"user_id":456274,"accept_rate":60,"display_name":"AngocA"},"score":0,"creation_date":1441031169,"post_id":32300673,"comment_id":52502264,"body_markdown":"What you mean is to test the port if it is open: telnet IPserver DB2port, telnet 192.168.0.1 50000","body":"What you mean is to test the port if it is open: telnet IPserver DB2port, telnet 192.168.0.1 50000"}],"tags":[],"owner":{"account_id":5678749,"reputation":1049,"user_id":4490818,"accept_rate":44,"display_name":"Mike Storey"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1440965470,"creation_date":1440965470,"answer_id":32300673,"question_id":32289409,"body_markdown":"It was indeed a network error. I&#39;m not fully sure which fix was the most important but I made sure telnet was enabled and white listed the DB2 process in the RHEL firewall configuration.","title":"DB2 jdbc connection error Connection refused. ERRORCODE=-4499, SQLSTATE=08001","body":"<p>It was indeed a network error. I'm not fully sure which fix was the most important but I made sure telnet was enabled and white listed the DB2 process in the RHEL firewall configuration.</p>\n"},{"tags":[],"owner":{"account_id":10368240,"reputation":23,"user_id":7646671,"display_name":"Bob Marlone"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1488449977,"creation_date":1488449977,"answer_id":42552668,"question_id":32289409,"body_markdown":"I had the same trouble... Its was caused by IPV6... \r\nThe URL connection point to localhost, resolved as ::1 (the IPV6 address of localhost) and DB2 server doens&#39;t listing IPV6 protocol. \r\n\r\nI resolved by modify the c:\\windows\\system32\\driver\\etc\\host file : I uncomment the line 127.0.0.1 locahost to force ipv4 resolution name of locahost... and it&#39;s works. \r\n\r\nI hope that helps. *(sorry for my English)*\r\n","title":"DB2 jdbc connection error Connection refused. ERRORCODE=-4499, SQLSTATE=08001","body":"<p>I had the same trouble... Its was caused by IPV6... \nThe URL connection point to localhost, resolved as ::1 (the IPV6 address of localhost) and DB2 server doens't listing IPV6 protocol. </p>\n\n<p>I resolved by modify the c:\\windows\\system32\\driver\\etc\\host file : I uncomment the line 127.0.0.1 locahost to force ipv4 resolution name of locahost... and it's works. </p>\n\n<p>I hope that helps. <em>(sorry for my English)</em></p>\n"},{"tags":[],"owner":{"account_id":26331198,"reputation":1,"user_id":19991645,"display_name":" "},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667909920,"creation_date":1667909579,"answer_id":74360555,"question_id":32289409,"body_markdown":"I had same problem, when I couldn&#39;t connect to my remote database with Data Studio Client and with DB2 CLP console. Make sure that you checked **ping** to your server and it is successful, you checked **dbm cfg** and you know **svcename**, **tcpip port number**, you checked ..System32\\drivers\\etc\\services file and there is &quot;*svcename*\t*tcpip_port_number*/tcp&quot; in that file.  So, while you get message in your db2diag.log &quot;&quot;TCPIP&quot; protocol support was successfully started.&quot;, it isn&#39;t network problem. I opened ports on my server mashine: DB2 server tcpip port(svcename) and DB2 DAS tcpip port through the Firewall settings. I found help on this reference https://learn.microsoft.com/en-us/sql/reporting-services/report-server/configure-a-firewall-for-report-server-access?view=sql-server-ver16.\r\nBe careful and consult with your system admin about security.\r\n\r\n(*Sorry for my English*)))","title":"DB2 jdbc connection error Connection refused. ERRORCODE=-4499, SQLSTATE=08001","body":"<p>I had same problem, when I couldn't connect to my remote database with Data Studio Client and with DB2 CLP console. Make sure that you checked <strong>ping</strong> to your server and it is successful, you checked <strong>dbm cfg</strong> and you know <strong>svcename</strong>, <strong>tcpip port number</strong>, you checked ..System32\\drivers\\etc\\services file and there is &quot;<em>svcename</em>    <em>tcpip_port_number</em>/tcp&quot; in that file.  So, while you get message in your db2diag.log &quot;&quot;TCPIP&quot; protocol support was successfully started.&quot;, it isn't network problem. I opened ports on my server mashine: DB2 server tcpip port(svcename) and DB2 DAS tcpip port through the Firewall settings. I found help on this reference <a href=\"https://learn.microsoft.com/en-us/sql/reporting-services/report-server/configure-a-firewall-for-report-server-access?view=sql-server-ver16\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/sql/reporting-services/report-server/configure-a-firewall-for-report-server-access?view=sql-server-ver16</a>.\nBe careful and consult with your system admin about security.</p>\n<p>(<em>Sorry for my English</em>)))</p>\n"}],"owner":{"account_id":5678749,"reputation":1049,"user_id":4490818,"accept_rate":44,"display_name":"Mike Storey"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67936,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1667909920,"creation_date":1440872782,"question_id":32289409,"body_markdown":"I have a new DB2 server (v10.5.0.3), and I can connect to the database locally just fine.\r\n\r\nWhen trying to connect from a remote server using JDBC I am getting the &quot;Connection refused. ERRORCODE=-4499, SQLSTATE=08001&quot; error. Based on information found here https://www-304.ibm.com/support/docview.wss?uid=swg21403644 I have confirmed that \r\n\r\n    [db2inst1@db2 ~]$ db2set -all\r\n    [i] DB2COMM=TCPIP\r\n    [i] DB2AUTOSTART=YES\r\n    [g] DB2SYSTEM=db2.xxxx.com\r\n    [g] DB2INSTDEF=db2inst1\r\n    [g] DB2ADMINSERVER=xxxxxx\r\n\r\nand \r\n\r\n    [db2inst1@db2 ~]$ db2 get database manager configuration | grep -i svce\r\n     TCP/IP Service name                          (SVCENAME) = 50001\r\n     SSL service name                         (SSL_SVCENAME) = \r\n\r\nwith these JDBC connection values\r\n\r\n    driver=com.ibm.db2.jcc.DB2Driver\r\n    url=jdbc:db2://db2.xxxxx.com:50001/TESTGEN\r\n    username=XXXXXXXX\r\n    password=XXXXXXX\r\n\r\nI have verified that the firewall on the both servers have opened ports 50000 and 50001. I&#39;ve run out of ideas, any help is greatly appreciated.\r\n\r\n","title":"DB2 jdbc connection error Connection refused. ERRORCODE=-4499, SQLSTATE=08001","body":"<p>I have a new DB2 server (v10.5.0.3), and I can connect to the database locally just fine.</p>\n\n<p>When trying to connect from a remote server using JDBC I am getting the \"Connection refused. ERRORCODE=-4499, SQLSTATE=08001\" error. Based on information found here <a href=\"https://www-304.ibm.com/support/docview.wss?uid=swg21403644\" rel=\"nofollow\">https://www-304.ibm.com/support/docview.wss?uid=swg21403644</a> I have confirmed that </p>\n\n<pre><code>[db2inst1@db2 ~]$ db2set -all\n[i] DB2COMM=TCPIP\n[i] DB2AUTOSTART=YES\n[g] DB2SYSTEM=db2.xxxx.com\n[g] DB2INSTDEF=db2inst1\n[g] DB2ADMINSERVER=xxxxxx\n</code></pre>\n\n<p>and </p>\n\n<pre><code>[db2inst1@db2 ~]$ db2 get database manager configuration | grep -i svce\n TCP/IP Service name                          (SVCENAME) = 50001\n SSL service name                         (SSL_SVCENAME) = \n</code></pre>\n\n<p>with these JDBC connection values</p>\n\n<pre><code>driver=com.ibm.db2.jcc.DB2Driver\nurl=jdbc:db2://db2.xxxxx.com:50001/TESTGEN\nusername=XXXXXXXX\npassword=XXXXXXX\n</code></pre>\n\n<p>I have verified that the firewall on the both servers have opened ports 50000 and 50001. I've run out of ideas, any help is greatly appreciated.</p>\n"},{"tags":["java","bit-manipulation"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1667908163,"post_id":74360074,"comment_id":131275035,"body_markdown":"Find out what representation is used for -7. What pattern of bits is it?","body":"Find out what representation is used for -7. What pattern of bits is it?"},{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1667908816,"post_id":74360074,"comment_id":131275244,"body_markdown":"I would recommend doing `System.out.println(Integer.toBinaryString(a));` + `System.out.println(Integer.toBinaryString(-a));` to see the binary representation of those values. That would probably clear things up","body":"I would recommend doing <code>System.out.println(Integer.toBinaryString(a));</code> + <code>System.out.println(Integer.toBinaryString(-a));</code> to see the binary representation of those values. That would probably clear things up"},{"owner":{"account_id":267086,"reputation":62435,"user_id":555045,"accept_rate":100,"display_name":"harold"},"score":3,"creation_date":1667908845,"post_id":74360074,"comment_id":131275250,"body_markdown":"`a &amp; -a` is an [idiom to get the lowest set bit](https://stackoverflow.com/q/12247186/555045)","body":"<code>a &amp; -a</code> is an <a href=\"https://stackoverflow.com/q/12247186/555045\">idiom to get the lowest set bit</a>"},{"owner":{"account_id":5083689,"reputation":1006,"user_id":4079056,"display_name":"sanurah"},"score":0,"creation_date":1667908949,"post_id":74360074,"comment_id":131275284,"body_markdown":"@OHGODSPIDERS System.out.println(Integer.toBinaryString(-a)) will print 11111111111111111111111111111001","body":"@OHGODSPIDERS System.out.println(Integer.toBinaryString(-a)) will print 11111111111111111111111111111001"},{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1667909110,"post_id":74360074,"comment_id":131275334,"body_markdown":"@SanuraHettiarachchi Which is correct because integers are 32 bit in java. In your answer you ignore that fact and treat the ints as if they are 3 bit, which isn&#39;t the case in java. The binary representation of 7 in java is 00000000000000000000000000000111, and its two-compliment is therefor 11111111111111111111111111111001","body":"@SanuraHettiarachchi Which is correct because integers are 32 bit in java. In your answer you ignore that fact and treat the ints as if they are 3 bit, which isn&#39;t the case in java. The binary representation of 7 in java is 00000000000000000000000000000111, and its two-compliment is therefor 11111111111111111111111111111001"}],"answers":[{"tags":[],"owner":{"account_id":5083689,"reputation":1006,"user_id":4079056,"display_name":"sanurah"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1667908790,"creation_date":1667908790,"answer_id":74360367,"question_id":74360074,"body_markdown":"Think of it in binary.\r\n\r\n    s = 100\r\n    k = 011\r\n\r\n[![enter image description here][1]][1]\r\n\r\n    a = s^k = 100 ^ 011 = 111\r\n    \r\nTo get negative number invert all digits and add 1\r\n   \r\n\r\n        -a = invert a + 1 = 000 + 001 = 001\r\n        \r\n         a &amp; -a = 111 &amp; 001 = 001 = decimal 1\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/MGxBY.png","title":"how does below bit manipulation code works?","body":"<p>Think of it in binary.</p>\n<pre><code>s = 100\nk = 011\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/MGxBY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MGxBY.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>a = s^k = 100 ^ 011 = 111\n</code></pre>\n<p>To get negative number invert all digits and add 1</p>\n<pre><code>    -a = invert a + 1 = 000 + 001 = 001\n    \n     a &amp; -a = 111 &amp; 001 = 001 = decimal 1\n</code></pre>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667909390,"creation_date":1667909060,"answer_id":74360440,"question_id":74360074,"body_markdown":"## -x == ~x + 1\r\n### Negative is ones-complement + 1\r\n\r\n    Should  x     be ababab10..0 (repeated zeros at the end)\r\n    then    ~x    is bababa01..1\r\n    then   ~x+1   is bababa10..0\r\n    then   x&amp;-x   is 0....010..0\r\n\r\n## So `x &amp; -x` gives the right most bit 1 of x.\r\n\r\nFor 7 that would be 1; 12 -&gt; 4, 6 -&gt; 2, 14 -&gt; 2, 8 -&gt; 8, 24 -&gt; 8.\r\n\r\nTo count the number of bits:\r\n\r\n    int bitCount(int n) {\r\n        int count = 0;\r\n        while (n != 0) {\r\n            n ^= (n &amp; -n); // Remove the right-most bit.\r\n            ++count;\r\n        }\r\n        return count;\r\n    }","title":"how does below bit manipulation code works?","body":"<h2>-x == ~x + 1</h2>\n<h3>Negative is ones-complement + 1</h3>\n<pre><code>Should  x     be ababab10..0 (repeated zeros at the end)\nthen    ~x    is bababa01..1\nthen   ~x+1   is bababa10..0\nthen   x&amp;-x   is 0....010..0\n</code></pre>\n<h2>So <code>x &amp; -x</code> gives the right most bit 1 of x.</h2>\n<p>For 7 that would be 1; 12 -&gt; 4, 6 -&gt; 2, 14 -&gt; 2, 8 -&gt; 8, 24 -&gt; 8.</p>\n<p>To count the number of bits:</p>\n<pre><code>int bitCount(int n) {\n    int count = 0;\n    while (n != 0) {\n        n ^= (n &amp; -n); // Remove the right-most bit.\n        ++count;\n    }\n    return count;\n}\n</code></pre>\n"}],"owner":{"account_id":26836948,"reputation":13,"user_id":20424083,"display_name":"Sharath Cherry"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":74360367,"answer_count":2,"score":-2,"last_activity_date":1667909390,"creation_date":1667907357,"question_id":74360074,"body_markdown":"```java\r\nimport java.io.*;\r\n\r\nclass GFG {\r\n  public static void main (String[] args) {\r\n    int s=4;\r\n    int k=3;\r\n    int a=s^k;\r\n    int b=a &amp; -a;\r\n    System.out.println(b);\r\n  } \r\n}\r\n```\r\n\r\n* \r\n\r\nI have compiled the above code it gives 1 as the output.\r\nBut I can&#39;t get that how it is compiling.\r\nif I do XOR OPERATION between s and k it will give 111(7).\r\nbut  don&#39;t  know how `b=a &amp; -a ` working please explain.\\*","title":"how does below bit manipulation code works?","body":"<pre class=\"lang-java prettyprint-override\"><code>import java.io.*;\n\nclass GFG {\n  public static void main (String[] args) {\n    int s=4;\n    int k=3;\n    int a=s^k;\n    int b=a &amp; -a;\n    System.out.println(b);\n  } \n}\n</code></pre>\n<ul>\n<li></li>\n</ul>\n<p>I have compiled the above code it gives 1 as the output.\nBut I can't get that how it is compiling.\nif I do XOR OPERATION between s and k it will give 111(7).\nbut  don't  know how <code>b=a &amp; -a </code> working please explain.*</p>\n"},{"tags":["java","cucumber","karate","testrail"],"comments":[{"owner":{"account_id":2966542,"reputation":6803,"user_id":2519577,"accept_rate":66,"display_name":"Aarish Ramesh"},"score":0,"creation_date":1518605304,"post_id":48785037,"comment_id":84571913,"body_markdown":"Your question is too broad. can you be more specific with your question in the sense sharing what is your effort so far ?","body":"Your question is too broad. can you be more specific with your question in the sense sharing what is your effort so far ?"}],"answers":[{"tags":[],"owner":{"account_id":48302,"reputation":55363,"user_id":143475,"display_name":"Peter Thomas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667909386,"creation_date":1518612344,"answer_id":48787598,"question_id":48785037,"body_markdown":"Please look at &#39;hooks&#39; documented here: https://github.com/intuit/karate#hooks\r\n\r\nAnd there is an example with code over here: https://github.com/intuit/karate/blob/master/karate-demo/src/test/java/demo/hooks/hooks.feature\r\n\r\nI&#39;m sorry I can&#39;t help you with how to push data to testrail, but it may be as simple as an HTTP request. And guess what Karate is famous for :)\r\n\r\nNote that values of tags can be accessed within a test, here is the doc for `karate.tagValues` (with link to example): https://github.com/intuit/karate#the-karate-object\r\n\r\nNote that you need to be on the 0.7.0 version, right now 0.7.0.RC8 is available.\r\n\r\nEdit - also see: https://stackoverflow.com/a/54527955/143475","title":"How to integrate karate with testrail","body":"<p>Please look at 'hooks' documented here: <a href=\"https://github.com/intuit/karate#hooks\" rel=\"nofollow noreferrer\">https://github.com/intuit/karate#hooks</a></p>\n<p>And there is an example with code over here: <a href=\"https://github.com/intuit/karate/blob/master/karate-demo/src/test/java/demo/hooks/hooks.feature\" rel=\"nofollow noreferrer\">https://github.com/intuit/karate/blob/master/karate-demo/src/test/java/demo/hooks/hooks.feature</a></p>\n<p>I'm sorry I can't help you with how to push data to testrail, but it may be as simple as an HTTP request. And guess what Karate is famous for :)</p>\n<p>Note that values of tags can be accessed within a test, here is the doc for <code>karate.tagValues</code> (with link to example): <a href=\"https://github.com/intuit/karate#the-karate-object\" rel=\"nofollow noreferrer\">https://github.com/intuit/karate#the-karate-object</a></p>\n<p>Note that you need to be on the 0.7.0 version, right now 0.7.0.RC8 is available.</p>\n<p>Edit - also see: <a href=\"https://stackoverflow.com/a/54527955/143475\">https://stackoverflow.com/a/54527955/143475</a></p>\n"},{"tags":[],"owner":{"account_id":14345051,"reputation":352,"user_id":10362105,"display_name":"Mert Ekinci"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1667586885,"creation_date":1667585635,"answer_id":74321361,"question_id":48785037,"body_markdown":"I spent a lot of effort for this.\r\nThat&#39;s how I implement. Maybe you can follow it.\r\n\r\n\r\nFirst of all, you should download the `APIClient.java` and `APIException.java` files from the link below.\r\n\r\n[TestrailApi in github][1]\r\n\r\nThen you need to add these files to the following path in your project.\r\nFor example: `YourProjectFolder/src/main/java/testrails/`\r\n\r\nIn your karate-config.js file, after each test, you can send your case tags, test results and error messages to the BaseTest.java file, which I will talk about shortly.\r\n\r\n`karate-config.js file`\r\n\r\n```\r\n\r\nfunction fn() {\r\n\r\n  var config = {\r\n    baseUrl: &#39;http://111.111.1.111:11111&#39;,\r\n  };\r\n    \t\r\n    \r\n  karate.configure(&#39;afterScenario&#39;, () =&gt; {\r\n    try{\r\n         const BaseTestClass = Java.type(&#39;features.BaseTest&#39;);\r\n         BaseTestClass.sendScenarioResults(karate.scenario.failed, \r\n         karate.scenario.tags, karate.info.errorMessage);\r\n        }catch(error) {\r\n       console.log(error)\r\n       }\r\n    });\r\n      \r\n   return config;\r\n}\r\n\r\n```\r\n\r\nPlease dont forget give tag to scenario in Feature file.\r\nFor example **@1111**\r\n\r\n```\r\n\r\nFeature: ExampleFeature\r\n\r\n  Background:\r\n    * def conf = call read(&#39;../karate-config.js&#39;)\r\n    * url conf.baseUrl\r\n\r\n  @1111\r\n  Scenario: Example\r\n\r\n```\r\n\r\nNext, create a runner file named `BaseTests.java`\r\n\r\n\r\n`BaseTest.java file`\r\n\r\n\r\n```\r\n\r\npackage features;\r\n\r\nimport com.intuit.karate.junit5.Karate;\r\nimport net.minidev.json.JSONObject;\r\nimport org.junit.jupiter.api.BeforeAll;\r\nimport testrails.APIClient;\r\nimport testrails.APIException;\r\n\r\nimport java.io.IOException;\r\nimport java.time.LocalDateTime;\r\nimport java.time.format.DateTimeFormatter;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Locale;\r\nimport java.util.Map;\r\n\r\npublic class BaseTest {\r\n\r\n    private static APIClient client = null;\r\n    private static String runID = null;\r\n\r\n    @BeforeAll\r\n    public static void beforeClass() throws Exception {\r\n        String fileName = System.getProperty(&quot;karate.options&quot;);\r\n        //Login to API\r\n        client = new APIClient(&quot;Write Your host, for example \r\n        https://yourcompanyname.testrail.io/&quot;);\r\n        client.setUser(&quot;user.name@companyname.com&quot;);\r\n        client.setPassword(&quot;password&quot;);\r\n\r\n        //Create Test Run\r\n        Map data = new HashMap();\r\n        data.put(&quot;suite_id&quot;, &quot;Write Your Project SuitId(Only number)&quot;);\r\n        data.put(&quot;name&quot;, &quot;Api Test Run&quot;);\r\n        data.put(&quot;description&quot;, &quot;Karate Architect Regression Running&quot;);\r\n\r\n\r\n        JSONObject c = (JSONObject) client.sendPost(&quot;add_run/&quot; + \r\n        TESTRAL_PROJECT_ID, data);\r\n        runID = c.getAsString(&quot;id&quot;);\r\n    }\r\n       //Send Scenario Result to Testrail\r\n    public static void sendScenarioResults(boolean failed, List&lt;String&gt; tags, String errorMessage) {\r\n        try {\r\n            Map data = new HashMap();\r\n            data.put(&quot;status_id&quot;, failed ? 5 : 1);\r\n            data.put(&quot;comment&quot;, errorMessage);\r\n            client.sendPost(&quot;add_result_for_case/&quot; + runID + &quot;/&quot; + tags.get(0), \r\n            data);\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        } catch (APIException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    @Karate.Test\r\n    Karate ExampleFeatureRun() {\r\n        return Karate.run(&quot;ExampleFeatureRun&quot;).relativeTo(getClass());\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\n  [1]: https://github.com/gurock/testrail-api/tree/master/java/com/gurock/testrail","title":"How to integrate karate with testrail","body":"<p>I spent a lot of effort for this.\nThat's how I implement. Maybe you can follow it.</p>\n<p>First of all, you should download the <code>APIClient.java</code> and <code>APIException.java</code> files from the link below.</p>\n<p><a href=\"https://github.com/gurock/testrail-api/tree/master/java/com/gurock/testrail\" rel=\"nofollow noreferrer\">TestrailApi in github</a></p>\n<p>Then you need to add these files to the following path in your project.\nFor example: <code>YourProjectFolder/src/main/java/testrails/</code></p>\n<p>In your karate-config.js file, after each test, you can send your case tags, test results and error messages to the BaseTest.java file, which I will talk about shortly.</p>\n<p><code>karate-config.js file</code></p>\n<pre><code>\nfunction fn() {\n\n  var config = {\n    baseUrl: 'http://111.111.1.111:11111',\n  };\n        \n    \n  karate.configure('afterScenario', () =&gt; {\n    try{\n         const BaseTestClass = Java.type('features.BaseTest');\n         BaseTestClass.sendScenarioResults(karate.scenario.failed, \n         karate.scenario.tags, karate.info.errorMessage);\n        }catch(error) {\n       console.log(error)\n       }\n    });\n      \n   return config;\n}\n\n</code></pre>\n<p>Please dont forget give tag to scenario in Feature file.\nFor example <strong>@1111</strong></p>\n<pre><code>\nFeature: ExampleFeature\n\n  Background:\n    * def conf = call read('../karate-config.js')\n    * url conf.baseUrl\n\n  @1111\n  Scenario: Example\n\n</code></pre>\n<p>Next, create a runner file named <code>BaseTests.java</code></p>\n<p><code>BaseTest.java file</code></p>\n<pre><code>\npackage features;\n\nimport com.intuit.karate.junit5.Karate;\nimport net.minidev.json.JSONObject;\nimport org.junit.jupiter.api.BeforeAll;\nimport testrails.APIClient;\nimport testrails.APIException;\n\nimport java.io.IOException;\nimport java.time.LocalDateTime;\nimport java.time.format.DateTimeFormatter;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Locale;\nimport java.util.Map;\n\npublic class BaseTest {\n\n    private static APIClient client = null;\n    private static String runID = null;\n\n    @BeforeAll\n    public static void beforeClass() throws Exception {\n        String fileName = System.getProperty(&quot;karate.options&quot;);\n        //Login to API\n        client = new APIClient(&quot;Write Your host, for example \n        https://yourcompanyname.testrail.io/&quot;);\n        client.setUser(&quot;user.name@companyname.com&quot;);\n        client.setPassword(&quot;password&quot;);\n\n        //Create Test Run\n        Map data = new HashMap();\n        data.put(&quot;suite_id&quot;, &quot;Write Your Project SuitId(Only number)&quot;);\n        data.put(&quot;name&quot;, &quot;Api Test Run&quot;);\n        data.put(&quot;description&quot;, &quot;Karate Architect Regression Running&quot;);\n\n\n        JSONObject c = (JSONObject) client.sendPost(&quot;add_run/&quot; + \n        TESTRAL_PROJECT_ID, data);\n        runID = c.getAsString(&quot;id&quot;);\n    }\n       //Send Scenario Result to Testrail\n    public static void sendScenarioResults(boolean failed, List&lt;String&gt; tags, String errorMessage) {\n        try {\n            Map data = new HashMap();\n            data.put(&quot;status_id&quot;, failed ? 5 : 1);\n            data.put(&quot;comment&quot;, errorMessage);\n            client.sendPost(&quot;add_result_for_case/&quot; + runID + &quot;/&quot; + tags.get(0), \n            data);\n        } catch (IOException e) {\n            e.printStackTrace();\n        } catch (APIException e) {\n            e.printStackTrace();\n        }\n    }\n\n    @Karate.Test\n    Karate ExampleFeatureRun() {\n        return Karate.run(&quot;ExampleFeatureRun&quot;).relativeTo(getClass());\n    }\n\n}\n\n</code></pre>\n"}],"owner":{"account_id":8624877,"reputation":125,"user_id":6458378,"accept_rate":33,"display_name":"NRT"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":897,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":2,"score":3,"last_activity_date":1667909386,"creation_date":1518604544,"question_id":48785037,"body_markdown":"I am new to Java and using karate for API automation. I need help to integrate testrail with karate. I want to use tags for each scenario which will be the test case id (from testrail) and I want to push the result &#39;after the scenario&#39;.\r\n\r\nCan someone guide me on this? Code snippets would be more appreciated. Thank you! ","title":"How to integrate karate with testrail","body":"<p>I am new to Java and using karate for API automation. I need help to integrate testrail with karate. I want to use tags for each scenario which will be the test case id (from testrail) and I want to push the result 'after the scenario'.</p>\n\n<p>Can someone guide me on this? Code snippets would be more appreciated. Thank you! </p>\n"},{"tags":["java","intellij-idea","log4j2"],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667909377,"creation_date":1667909377,"answer_id":74360511,"question_id":74359307,"body_markdown":"Taken from the FAQ: [How do I debug my configuration?][1]\r\n\r\n*First, make sure you have the right jar files on your classpath. You need at least log4j-api and log4j-core.\r\nNext, check the name of your configuration file. By default, log4j2 will look for a configuration file named log4j2.xml on the classpath. Note the 2 in the file name! (See the [configuration manual page][2] for more details.)*\r\n\r\n**From log4j-2.9 onward**\r\n\r\n*From log4j-2.9 onward, log4j2 will print all internal logging to the console if system property log4j2.debug is either defined empty or its value equals to true (ignoring case).*\r\n\r\n**Prior to log4j-2.9**\r\n\r\n*Prior to log4j-2.9, there are two places where internal logging can be controlled:*\r\n\r\n*If the configuration file is found correctly, log4j2 internal status logging can be controlled by setting &lt;Configuration status=&quot;trace&quot;&gt; in the configuration file. This will display detailed log4j2-internal log statements on the console about what happens during the configuration process. This may be useful to trouble-shoot configuration issues. By default the status logger level is WARN, so you only see notifications when there is a problem.*\r\n\r\n*If the configuration file is not found correctly, you can still enable log4j2 internal status logging by setting system property -Dorg.apache.logging.log4j.simplelog.StatusLogger.level=TRACE.*\r\n\r\n\r\n  [1]: https://logging.apache.org/log4j/2.x/faq.html#troubleshooting\r\n  [2]: https://logging.apache.org/log4j/2.x/manual/configuration.html#AutomaticConfiguration","title":"log4j2 log file is not generating","body":"<p>Taken from the FAQ: <a href=\"https://logging.apache.org/log4j/2.x/faq.html#troubleshooting\" rel=\"nofollow noreferrer\">How do I debug my configuration?</a></p>\n<p><em>First, make sure you have the right jar files on your classpath. You need at least log4j-api and log4j-core.\nNext, check the name of your configuration file. By default, log4j2 will look for a configuration file named log4j2.xml on the classpath. Note the 2 in the file name! (See the <a href=\"https://logging.apache.org/log4j/2.x/manual/configuration.html#AutomaticConfiguration\" rel=\"nofollow noreferrer\">configuration manual page</a> for more details.)</em></p>\n<p><strong>From log4j-2.9 onward</strong></p>\n<p><em>From log4j-2.9 onward, log4j2 will print all internal logging to the console if system property log4j2.debug is either defined empty or its value equals to true (ignoring case).</em></p>\n<p><strong>Prior to log4j-2.9</strong></p>\n<p><em>Prior to log4j-2.9, there are two places where internal logging can be controlled:</em></p>\n<p><em>If the configuration file is found correctly, log4j2 internal status logging can be controlled by setting  in the configuration file. This will display detailed log4j2-internal log statements on the console about what happens during the configuration process. This may be useful to trouble-shoot configuration issues. By default the status logger level is WARN, so you only see notifications when there is a problem.</em></p>\n<p><em>If the configuration file is not found correctly, you can still enable log4j2 internal status logging by setting system property -Dorg.apache.logging.log4j.simplelog.StatusLogger.level=TRACE.</em></p>\n"}],"owner":{"account_id":23791468,"reputation":11,"user_id":17802855,"display_name":"Harish Algat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":366,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1667909377,"creation_date":1667903878,"question_id":74359307,"body_markdown":"the log file is generated when I run the code within IDE (Intellij IDEA).\r\n\r\nas soon as I create runnable jar of the code and then try to run the jar then the logs are not generating.\r\n\r\nI have made sure the log4j2.xml file is a part of classpath.\r\n\r\nis there anything extra I have to do while creating jar in the Intellij IDEA?\r\n","title":"log4j2 log file is not generating","body":"<p>the log file is generated when I run the code within IDE (Intellij IDEA).</p>\n<p>as soon as I create runnable jar of the code and then try to run the jar then the logs are not generating.</p>\n<p>I have made sure the log4j2.xml file is a part of classpath.</p>\n<p>is there anything extra I have to do while creating jar in the Intellij IDEA?</p>\n"},{"tags":["java","postgresql","jdbc","blob"],"answers":[{"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1563446954,"post_id":57092455,"comment_id":100707076,"body_markdown":"Why not just link to the latest revision of the documentation? https://jdbc.postgresql.org/documentation/head/binary-data.html","body":"Why not just link to the latest revision of the documentation? <a href=\"https://jdbc.postgresql.org/documentation/head/binary-data.html\" rel=\"nofollow noreferrer\">jdbc.postgresql.org/documentation/head/binary-data.html</a>"}],"tags":[],"owner":{"account_id":1754145,"reputation":43960,"user_id":1602555,"display_name":"Karol Dowbecki"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1667909022,"creation_date":1563445716,"answer_id":57092455,"question_id":57092307,"body_markdown":"As per [this mail group discussion][1] you should not be using `bytea` for this use case:\r\n\r\n&gt; There are two methods to store binary data in pg and they have different \r\naccess methods and performance characteristics.  Bytea data is expected to \r\nbe shorter and is returned in whole with a ResultSet by the server.  For \r\nlarger data you want to use large objects which return a pointer (oid) to \r\nthe actual data which you can then stream from the server at will.\r\n&gt;\r\n&gt; This page describes some of the differences between the two and \r\ndemonstrates using a pg specific api to access large objects, but \r\ngetBlob/setBlob will work just fine.\r\n\r\n\r\n\r\nSee [Chapter 7. Storing Binary Data][2] which shows example code and [Chapter 35. Large Objects][3] that goes into details:\r\n\r\n&gt; PostgreSQL has a large object facility, which provides stream-style access to user data that is stored in a special large-object structure. Streaming access is useful when working with data values that are too large to manipulate conveniently as a whole.\r\n\r\n\r\n  [1]: https://www.postgresql.org/message-id/Pine.BSO.4.64.0804302236360.24724%40leary.csoft.net\r\n  [2]: https://jdbc.postgresql.org/documentation/binary-data/\r\n  [3]: https://www.postgresql.org/docs/current/largeobjects.html","title":"Streaming big files from postgres database into file system using JDBC","body":"<p>As per <a href=\"https://www.postgresql.org/message-id/Pine.BSO.4.64.0804302236360.24724%40leary.csoft.net\" rel=\"nofollow noreferrer\">this mail group discussion</a> you should not be using <code>bytea</code> for this use case:</p>\n<blockquote>\n<p>There are two methods to store binary data in pg and they have different\naccess methods and performance characteristics.  Bytea data is expected to\nbe shorter and is returned in whole with a ResultSet by the server.  For\nlarger data you want to use large objects which return a pointer (oid) to\nthe actual data which you can then stream from the server at will.</p>\n<p>This page describes some of the differences between the two and\ndemonstrates using a pg specific api to access large objects, but\ngetBlob/setBlob will work just fine.</p>\n</blockquote>\n<p>See <a href=\"https://jdbc.postgresql.org/documentation/binary-data/\" rel=\"nofollow noreferrer\">Chapter 7. Storing Binary Data</a> which shows example code and <a href=\"https://www.postgresql.org/docs/current/largeobjects.html\" rel=\"nofollow noreferrer\">Chapter 35. Large Objects</a> that goes into details:</p>\n<blockquote>\n<p>PostgreSQL has a large object facility, which provides stream-style access to user data that is stored in a special large-object structure. Streaming access is useful when working with data values that are too large to manipulate conveniently as a whole.</p>\n</blockquote>\n"}],"owner":{"account_id":6749044,"reputation":53,"user_id":5199770,"display_name":"pakryb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2979,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":57092455,"answer_count":1,"score":2,"last_activity_date":1667909022,"creation_date":1563445260,"question_id":57092307,"body_markdown":"I store files in my postgres database in a column of type `bytea` with a size potentionaly exceeding the allocated Java heap space so when trying to write those files into the file system I quickly run into out of memory issues.\r\n\r\nI am using JDBC to perform the query and then extract the content as binary stream.\r\n\r\nThis is a simplified version of my code:\r\n\r\n```\r\n    public File readContent(String contentId) {\r\n        PreparedStatement statement = jdbcTemplate.getDataSource().getConnection().prepareStatement(&quot;SELECT content from table.entry WHERE id=?&quot;);\r\n        statement.setString(1, contentId);\r\n        ResultSet resultSet = statement.executeQuery();\r\n        resultSet.next();\r\n        File file = writeToFileSystem(resultSet.getBinaryStream(1));\r\n        resultSet.close();\r\n        return file;\r\n    }\r\n\r\n    \r\n    private File writeToFileSystem(InputStream inputStream) {\r\n        File dir = createDirectories(Paths.get(properties.getTempFolder(), UUID.randomUUID().toString())).toFile();\r\n        File file = new File(dir, &quot;content.zip&quot;);\r\n        FileUtils.copyInputStreamToFile(inputStream, file);\r\n        return file;\r\n    }\r\n```\r\n\r\nMy expectation was that this would let me stream the data from the database into the file without ever having to load it into memory entirely. This approach doesn&#39;t work however as I am still getting `OutOfMemoryErrors` as soon as the query is executed:\r\n\r\n```\r\nCaused by: java.lang.OutOfMemoryError: Java heap space\r\n    at org.postgresql.core.PGStream.receiveTupleV3(PGStream.java:395)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2118)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:288)\r\n\tat org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:430)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:356)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:168)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:116)\r\n\tat sun.reflect.GeneratedMethodAccessor201.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat org.apache.tomcat.jdbc.pool.StatementFacade$StatementProxy.invoke(StatementFacade.java:114)\r\n\tat com.sun.proxy.$Proxy149.executeQuery(Unknown Source)\r\n\tat [...].ContentRepository.readContent(ContentRepository.java:111)\t\r\n\r\n```\r\n\r\nIs there any way I can stream the data from the database into a file without having to increase the Java VMs available memory?\r\n","title":"Streaming big files from postgres database into file system using JDBC","body":"<p>I store files in my postgres database in a column of type <code>bytea</code> with a size potentionaly exceeding the allocated Java heap space so when trying to write those files into the file system I quickly run into out of memory issues.</p>\n\n<p>I am using JDBC to perform the query and then extract the content as binary stream.</p>\n\n<p>This is a simplified version of my code:</p>\n\n<pre><code>    public File readContent(String contentId) {\n        PreparedStatement statement = jdbcTemplate.getDataSource().getConnection().prepareStatement(\"SELECT content from table.entry WHERE id=?\");\n        statement.setString(1, contentId);\n        ResultSet resultSet = statement.executeQuery();\n        resultSet.next();\n        File file = writeToFileSystem(resultSet.getBinaryStream(1));\n        resultSet.close();\n        return file;\n    }\n\n\n    private File writeToFileSystem(InputStream inputStream) {\n        File dir = createDirectories(Paths.get(properties.getTempFolder(), UUID.randomUUID().toString())).toFile();\n        File file = new File(dir, \"content.zip\");\n        FileUtils.copyInputStreamToFile(inputStream, file);\n        return file;\n    }\n</code></pre>\n\n<p>My expectation was that this would let me stream the data from the database into the file without ever having to load it into memory entirely. This approach doesn't work however as I am still getting <code>OutOfMemoryErrors</code> as soon as the query is executed:</p>\n\n<pre><code>Caused by: java.lang.OutOfMemoryError: Java heap space\n    at org.postgresql.core.PGStream.receiveTupleV3(PGStream.java:395)\n    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2118)\n    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:288)\n    at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:430)\n    at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:356)\n    at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:168)\n    at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:116)\n    at sun.reflect.GeneratedMethodAccessor201.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at org.apache.tomcat.jdbc.pool.StatementFacade$StatementProxy.invoke(StatementFacade.java:114)\n    at com.sun.proxy.$Proxy149.executeQuery(Unknown Source)\n    at [...].ContentRepository.readContent(ContentRepository.java:111)  \n\n</code></pre>\n\n<p>Is there any way I can stream the data from the database into a file without having to increase the Java VMs available memory?</p>\n"},{"tags":["java","list"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1667903046,"post_id":74359067,"comment_id":131273257,"body_markdown":"Not quite sure what problem you&#39;re facing, could you provide some code on what the objects containing that data look like? If they are mutable you could just maintain a map with group number being the key and the aggregate being the value. Then just &quot;merge&quot; each corresponding element into the aggregate by applying necessary rules (e.g. update start date only if it&#39;s before the aggregate&#39;s and end date only if it&#39;s after).","body":"Not quite sure what problem you&#39;re facing, could you provide some code on what the objects containing that data look like? If they are mutable you could just maintain a map with group number being the key and the aggregate being the value. Then just &quot;merge&quot; each corresponding element into the aggregate by applying necessary rules (e.g. update start date only if it&#39;s before the aggregate&#39;s and end date only if it&#39;s after)."},{"owner":{"account_id":10787811,"reputation":59,"user_id":9090704,"display_name":"Rody"},"score":0,"creation_date":1667903781,"post_id":74359067,"comment_id":131273504,"body_markdown":"Thanks for the response.\nI just updated the question, and yes they are mutable, they are saved in an arrayList","body":"Thanks for the response. I just updated the question, and yes they are mutable, they are saved in an arrayList"}],"answers":[{"tags":[],"owner":{"display_name":"user17233545"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667908322,"creation_date":1667907834,"answer_id":74360170,"question_id":74359067,"body_markdown":"Try this.\r\n\r\n    public static void main(String[] args) throws ParseException {\r\n        List&lt;Entities&gt; baseList = List.of(\r\n            new Entities(&quot;2018-11-13&quot;, &quot;2019-01-13&quot;, 1),\r\n            new Entities(&quot;2019-01-14&quot;, &quot;2019-03-06&quot;, 1),\r\n            new Entities(&quot;2019-03-07&quot;, &quot;2019-11-18&quot;, 1),\r\n            new Entities(&quot;2020-08-23&quot;, &quot;2020-08-23&quot;, 2),\r\n            new Entities(&quot;2021-11-19&quot;, &quot;2022-12-23&quot;, 2));\r\n        List&lt;Entities&gt; result = baseList.stream()\r\n            .collect(Collectors.groupingBy(Entities::getGroupNum))\r\n            .entrySet().stream()\r\n            .map(e -&gt; new Entities(\r\n                e.getValue().get(0).getStart_dt(),\r\n                e.getValue().get(e.getValue().size() - 1).getStop_dt(),\r\n                e.getKey()))\r\n            .toList();\r\n        result.forEach(System.out::println);\r\n    }\r\n\r\noutput:\r\n\r\n    Entities [start_dt=2018-11-13, stop_dt=2019-11-18, groupNum=1]\r\n    Entities [start_dt=2020-08-23, stop_dt=2022-12-23, groupNum=2]\r\n\r\n","title":"How to aggregate elements based on a value they share Java","body":"<p>Try this.</p>\n<pre><code>public static void main(String[] args) throws ParseException {\n    List&lt;Entities&gt; baseList = List.of(\n        new Entities(&quot;2018-11-13&quot;, &quot;2019-01-13&quot;, 1),\n        new Entities(&quot;2019-01-14&quot;, &quot;2019-03-06&quot;, 1),\n        new Entities(&quot;2019-03-07&quot;, &quot;2019-11-18&quot;, 1),\n        new Entities(&quot;2020-08-23&quot;, &quot;2020-08-23&quot;, 2),\n        new Entities(&quot;2021-11-19&quot;, &quot;2022-12-23&quot;, 2));\n    List&lt;Entities&gt; result = baseList.stream()\n        .collect(Collectors.groupingBy(Entities::getGroupNum))\n        .entrySet().stream()\n        .map(e -&gt; new Entities(\n            e.getValue().get(0).getStart_dt(),\n            e.getValue().get(e.getValue().size() - 1).getStop_dt(),\n            e.getKey()))\n        .toList();\n    result.forEach(System.out::println);\n}\n</code></pre>\n<p>output:</p>\n<pre><code>Entities [start_dt=2018-11-13, stop_dt=2019-11-18, groupNum=1]\nEntities [start_dt=2020-08-23, stop_dt=2022-12-23, groupNum=2]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1667908938,"creation_date":1667908938,"answer_id":74360410,"question_id":74359067,"body_markdown":"I assume you want to aggregate `Entities` as follows:\r\n- `groupNum` will be the grouping criteria\r\n- earliest `start_dt` and latest `stop_dt` should be used.\r\n\r\nAs I already suggested in my comment, try to use a `Map&lt;Integer, Entities&gt;` where the key is the group number:\r\n\r\n\r\n    Map&lt;Integer, Entities&gt; aggregates = new HashMap&lt;&gt;();\r\n\r\n    for( Entities entry : baseList ) {\r\n      //get the aggregate or create it if none exists for this group\r\n      Entities aggregate = aggregates.computeIfAbsent(entry.getGroupNum(), \r\n         k -&gt; new Entities(entry.getStart_Dt(), entry.getStop_Dt(), entry.getGroupNum());\r\n\r\n      //compare and update the dates as needed\r\n      if( aggregate.getStart_Dt().compareTo(entry.getStart_Dt()) &gt; 0) {\r\n        aggregate.setStart_Dt(entry.getStart_Dt());\r\n      }\r\n\r\n      if( aggregate.getStop_Dt().compareTo(entry.getStop_Dt()) &lt; 0) {\r\n        aggregate.setStart_Dt(entry.getStop_Dt());\r\n      }\r\n    }\r\n\r\nA few notes:\r\n\r\n- This approach doesn&#39;t require the list to be sorted and doesn&#39;t maintain any order. If order by group number should be maintained either use a `TreeMap` to sort by group number or a `LinkedHashMap` to keep the order of the list (as much as applicable - you&#39;re merging list elements after all)\r\n- If you&#39;d use the `java.time`, e.g. `LocalDate` instead of `java.util.Date` you could use the easier to read methods `isBefore()` and `isAfter()`.\r\n- If you don&#39;t want to check the dates on a newly created aggregate use the following snippet as the loop body:\r\n\r\n      Entities aggregate = aggregates.get(entry.getGroupNum());\r\n      if( aggregate == null ) {\r\n        aggregates.put( entry.getGroupNum(), new Entities(entry.getStart_Dt(), entry.getStop_Dt(), entry.getGroupNum());\r\n      } else {\r\n        if( aggregate.getStart_Dt().compareTo(entry.getStart_Dt()) &gt; 0) {\r\n          aggregate.setStart_Dt(entry.getStart_Dt());\r\n        }\r\n\r\n        if( aggregate.getStop_Dt().compareTo(entry.getStop_Dt()) &lt; 0) {\r\n          aggregate.setStart_Dt(entry.getStop_Dt());\r\n        }\r\n      }","title":"How to aggregate elements based on a value they share Java","body":"<p>I assume you want to aggregate <code>Entities</code> as follows:</p>\n<ul>\n<li><code>groupNum</code> will be the grouping criteria</li>\n<li>earliest <code>start_dt</code> and latest <code>stop_dt</code> should be used.</li>\n</ul>\n<p>As I already suggested in my comment, try to use a <code>Map&lt;Integer, Entities&gt;</code> where the key is the group number:</p>\n<pre><code>Map&lt;Integer, Entities&gt; aggregates = new HashMap&lt;&gt;();\n\nfor( Entities entry : baseList ) {\n  //get the aggregate or create it if none exists for this group\n  Entities aggregate = aggregates.computeIfAbsent(entry.getGroupNum(), \n     k -&gt; new Entities(entry.getStart_Dt(), entry.getStop_Dt(), entry.getGroupNum());\n\n  //compare and update the dates as needed\n  if( aggregate.getStart_Dt().compareTo(entry.getStart_Dt()) &gt; 0) {\n    aggregate.setStart_Dt(entry.getStart_Dt());\n  }\n\n  if( aggregate.getStop_Dt().compareTo(entry.getStop_Dt()) &lt; 0) {\n    aggregate.setStart_Dt(entry.getStop_Dt());\n  }\n}\n</code></pre>\n<p>A few notes:</p>\n<ul>\n<li><p>This approach doesn't require the list to be sorted and doesn't maintain any order. If order by group number should be maintained either use a <code>TreeMap</code> to sort by group number or a <code>LinkedHashMap</code> to keep the order of the list (as much as applicable - you're merging list elements after all)</p>\n</li>\n<li><p>If you'd use the <code>java.time</code>, e.g. <code>LocalDate</code> instead of <code>java.util.Date</code> you could use the easier to read methods <code>isBefore()</code> and <code>isAfter()</code>.</p>\n</li>\n<li><p>If you don't want to check the dates on a newly created aggregate use the following snippet as the loop body:</p>\n<pre><code>Entities aggregate = aggregates.get(entry.getGroupNum());\nif( aggregate == null ) {\n  aggregates.put( entry.getGroupNum(), new Entities(entry.getStart_Dt(), entry.getStop_Dt(), entry.getGroupNum());\n} else {\n  if( aggregate.getStart_Dt().compareTo(entry.getStart_Dt()) &gt; 0) {\n    aggregate.setStart_Dt(entry.getStart_Dt());\n  }\n\n  if( aggregate.getStop_Dt().compareTo(entry.getStop_Dt()) &lt; 0) {\n    aggregate.setStart_Dt(entry.getStop_Dt());\n  }\n}\n</code></pre>\n</li>\n</ul>\n"}],"owner":{"account_id":10787811,"reputation":59,"user_id":9090704,"display_name":"Rody"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74360410,"answer_count":2,"score":-1,"last_activity_date":1667908938,"creation_date":1667902668,"question_id":74359067,"body_markdown":"I have list of Entities which share equal Group number if they belong to the same group\r\n\r\nStart        |Stop         |GroupNum\r\n-------------|-------------|----\r\n***2018-11-13***   |2019-01-13   |1\r\n2019-01-14   |2019-03-06         |1\r\n2019-03-07   |***2019-11-18***   |1\r\n***2020-08-23***   |2020-08-23   |2\r\n2021-11-19   |***2022-12-23***   |2\r\n\r\nThese Entities are saved in an ArrayList&lt;Entities&gt; \r\n```\r\nList&lt;Entities&gt; baseList = new ArrayList&lt;&gt;();\r\n    public static class Entities {\r\n        private final Date start_dt;\r\n        private final Date stop_dt;\r\n        private int groupNum;\r\n```\r\n\r\nI want to aggregate objects based on the GroupNum, and take the first **Start** date from the first element of the (this).group and the last **stop** date from the same group.\r\n\r\nFinal result should look something like this:\r\n\r\nStart        |Stop         |GroupNum\r\n-------------|-------------|----\r\n***2018-11-13***    |***2019-11-18***   |1\r\n***2020-08-23***    |***2022-12-23***   |2\r\n\r\nI wanted to share my solution, however I couldn&#39;t come up with any ideas.\r\n\r\nThanks in advance.\r\n\r\n","title":"How to aggregate elements based on a value they share Java","body":"<p>I have list of Entities which share equal Group number if they belong to the same group</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Start</th>\n<th>Stop</th>\n<th>GroupNum</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><em><strong>2018-11-13</strong></em></td>\n<td>2019-01-13</td>\n<td>1</td>\n</tr>\n<tr>\n<td>2019-01-14</td>\n<td>2019-03-06</td>\n<td>1</td>\n</tr>\n<tr>\n<td>2019-03-07</td>\n<td><em><strong>2019-11-18</strong></em></td>\n<td>1</td>\n</tr>\n<tr>\n<td><em><strong>2020-08-23</strong></em></td>\n<td>2020-08-23</td>\n<td>2</td>\n</tr>\n<tr>\n<td>2021-11-19</td>\n<td><em><strong>2022-12-23</strong></em></td>\n<td>2</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>These Entities are saved in an ArrayList</p>\n<pre><code>List&lt;Entities&gt; baseList = new ArrayList&lt;&gt;();\n    public static class Entities {\n        private final Date start_dt;\n        private final Date stop_dt;\n        private int groupNum;\n</code></pre>\n<p>I want to aggregate objects based on the GroupNum, and take the first <strong>Start</strong> date from the first element of the (this).group and the last <strong>stop</strong> date from the same group.</p>\n<p>Final result should look something like this:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Start</th>\n<th>Stop</th>\n<th>GroupNum</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><em><strong>2018-11-13</strong></em></td>\n<td><em><strong>2019-11-18</strong></em></td>\n<td>1</td>\n</tr>\n<tr>\n<td><em><strong>2020-08-23</strong></em></td>\n<td><em><strong>2022-12-23</strong></em></td>\n<td>2</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>I wanted to share my solution, however I couldn't come up with any ideas.</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring-boot","spring-boot-actuator","spring-aspects"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1667822624,"post_id":74346225,"comment_id":131251730,"body_markdown":"You also need the `aspectj-rt` dependency.","body":"You also need the <code>aspectj-rt</code> dependency."},{"owner":{"account_id":1801257,"reputation":8969,"user_id":1639556,"accept_rate":79,"display_name":"Leos Literak"},"score":0,"creation_date":1667823957,"post_id":74346225,"comment_id":131252184,"body_markdown":"The jar aspectjweaver-1.9.6.jar contains org\\aspectj\\lang\\ProceedingJoinPoint.class, so rt variant is not neccessary.","body":"The jar aspectjweaver-1.9.6.jar contains org\\aspectj\\lang\\ProceedingJoinPoint.class, so rt variant is not neccessary."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1667825069,"post_id":74346225,"comment_id":131252560,"body_markdown":"And how are you building your jar?","body":"And how are you building your jar?"},{"owner":{"account_id":1801257,"reputation":8969,"user_id":1639556,"accept_rate":79,"display_name":"Leos Literak"},"score":0,"creation_date":1667825127,"post_id":74346225,"comment_id":131252582,"body_markdown":"mvn install and then run in Idea debugger","body":"mvn install and then run in Idea debugger"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1667825496,"post_id":74346225,"comment_id":131252710,"body_markdown":"Please add your full pom. Also if you are building your jar then why run it in IDEA? Why not run the main class. Also is this an issue when running the app on the command line or when running it (as a main method) in Idea?","body":"Please add your full pom. Also if you are building your jar then why run it in IDEA? Why not run the main class. Also is this an issue when running the app on the command line or when running it (as a main method) in Idea?"},{"owner":{"account_id":1801257,"reputation":8969,"user_id":1639556,"accept_rate":79,"display_name":"Leos Literak"},"score":0,"creation_date":1667907851,"post_id":74346225,"comment_id":131274920,"body_markdown":"The problem was in Intellij IDEA that was not in sync with pom dependencies.","body":"The problem was in Intellij IDEA that was not in sync with pom dependencies."}],"owner":{"account_id":1801257,"reputation":8969,"user_id":1639556,"accept_rate":79,"display_name":"Leos Literak"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":192,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667907899,"creation_date":1667822268,"question_id":74346225,"body_markdown":"I have exactly same symptoms like this [question][1] and I followed its accepted answer without luck.\r\n\r\npom.xml\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.4.0&lt;/version&gt;\r\n        &lt;relativePath/&gt;\r\n    &lt;/parent&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\nApplication.java\r\n\r\n    @Bean\r\n    public TimedAspect timedAspect(MeterRegistry registry) {\r\n        return new TimedAspect(registry);\r\n    }\r\n\r\nException:\r\n\r\n    Caused by: java.lang.BootstrapMethodError: java.lang.NoClassDefFoundError: org/aspectj/lang/ProceedingJoinPoint\r\n    \tat io.micrometer.core.aop.TimedAspect.&lt;init&gt;(TimedAspect.java:73)\r\n    \tat com..mcs.Application.timedAspect(Application.java:29)\r\n    \tat com..mcs.Application$$EnhancerBySpringCGLIB$$b6a83328.CGLIB$timedAspect$1(&lt;generated&gt;)\r\n    \tat com..mcs.Application$$EnhancerBySpringCGLIB$$b6a83328$$FastClassBySpringCGLIB$$be4485cd.invoke(&lt;generated&gt;)\r\n    \tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244)\r\n    \tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)\r\n    \tat com..mcs.Application$$EnhancerBySpringCGLIB$$b6a83328.timedAspect(&lt;generated&gt;)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\r\n    \t... 21 more\r\n    Caused by: java.lang.NoClassDefFoundError: org/aspectj/lang/ProceedingJoinPoint\r\n    \t... 33 more\r\n    Caused by: java.lang.ClassNotFoundException: org.aspectj.lang.ProceedingJoinPoint\r\n    \tat java.net.URLClassLoader.findClass(URLClassLoader.java:382)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:418)\r\n    \tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:355)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:351)\r\n\r\nDependencies:\r\n\r\n    [INFO] +- org.springframework.boot:spring-boot-starter-actuator:jar:2.4.0:compile\r\n    [INFO] |  +- org.springframework.boot:spring-boot-actuator-autoconfigure:jar:2.4.0:compile\r\n    [INFO] |  |  \\- org.springframework.boot:spring-boot-actuator:jar:2.4.0:compile\r\n    [INFO] |  \\- io.micrometer:micrometer-core:jar:1.6.1:compile\r\n    [INFO] |     +- org.hdrhistogram:HdrHistogram:jar:2.1.12:compile\r\n    [INFO] |     \\- org.latencyutils:LatencyUtils:jar:2.0.3:runtime\r\n    [INFO] +- org.springframework:spring-aspects:jar:5.3.1:compile\r\n    [INFO] |  \\- org.aspectj:aspectjweaver:jar:1.9.6:compile\r\n\r\nIt does not make sense to me. The jar aspectjweaver-1.9.6.jar contains org\\aspectj\\lang\\ProceedingJoinPoint.class. The class should be loaded.\r\n\r\nSimilar questions: https://stackoverflow.com/questions/46162813/classnotfoundexception-org-aspectj-lang-annotation-around\r\n\r\nUpdate:\r\n\r\nThe problem was in Intellij IDEA that was not in sync with pom dependencies. A reload in Maven tab helped.\r\n\r\n  [1]: https://stackoverflow.com/questions/63230291/how-to-resolve-java-lang-classnotfoundexception-org-aspectj-lang-proceedingjoin\r\n\r\n","title":"AspectJ dep not loaded for @Timed annotation","body":"<p>I have exactly same symptoms like this <a href=\"https://stackoverflow.com/questions/63230291/how-to-resolve-java-lang-classnotfoundexception-org-aspectj-lang-proceedingjoin\">question</a> and I followed its accepted answer without luck.</p>\n<p>pom.xml</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.4.0&lt;/version&gt;\n    &lt;relativePath/&gt;\n&lt;/parent&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Application.java</p>\n<pre><code>@Bean\npublic TimedAspect timedAspect(MeterRegistry registry) {\n    return new TimedAspect(registry);\n}\n</code></pre>\n<p>Exception:</p>\n<pre><code>Caused by: java.lang.BootstrapMethodError: java.lang.NoClassDefFoundError: org/aspectj/lang/ProceedingJoinPoint\n    at io.micrometer.core.aop.TimedAspect.&lt;init&gt;(TimedAspect.java:73)\n    at com..mcs.Application.timedAspect(Application.java:29)\n    at com..mcs.Application$$EnhancerBySpringCGLIB$$b6a83328.CGLIB$timedAspect$1(&lt;generated&gt;)\n    at com..mcs.Application$$EnhancerBySpringCGLIB$$b6a83328$$FastClassBySpringCGLIB$$be4485cd.invoke(&lt;generated&gt;)\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244)\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)\n    at com..mcs.Application$$EnhancerBySpringCGLIB$$b6a83328.timedAspect(&lt;generated&gt;)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\n    ... 21 more\nCaused by: java.lang.NoClassDefFoundError: org/aspectj/lang/ProceedingJoinPoint\n    ... 33 more\nCaused by: java.lang.ClassNotFoundException: org.aspectj.lang.ProceedingJoinPoint\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:382)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:355)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\n</code></pre>\n<p>Dependencies:</p>\n<pre><code>[INFO] +- org.springframework.boot:spring-boot-starter-actuator:jar:2.4.0:compile\n[INFO] |  +- org.springframework.boot:spring-boot-actuator-autoconfigure:jar:2.4.0:compile\n[INFO] |  |  \\- org.springframework.boot:spring-boot-actuator:jar:2.4.0:compile\n[INFO] |  \\- io.micrometer:micrometer-core:jar:1.6.1:compile\n[INFO] |     +- org.hdrhistogram:HdrHistogram:jar:2.1.12:compile\n[INFO] |     \\- org.latencyutils:LatencyUtils:jar:2.0.3:runtime\n[INFO] +- org.springframework:spring-aspects:jar:5.3.1:compile\n[INFO] |  \\- org.aspectj:aspectjweaver:jar:1.9.6:compile\n</code></pre>\n<p>It does not make sense to me. The jar aspectjweaver-1.9.6.jar contains org\\aspectj\\lang\\ProceedingJoinPoint.class. The class should be loaded.</p>\n<p>Similar questions: <a href=\"https://stackoverflow.com/questions/46162813/classnotfoundexception-org-aspectj-lang-annotation-around\">ClassNotFoundException - org.aspectj.lang.annotation.Around</a></p>\n<p>Update:</p>\n<p>The problem was in Intellij IDEA that was not in sync with pom dependencies. A reload in Maven tab helped.</p>\n"},{"tags":["python","java"],"comments":[{"owner":{"account_id":5529755,"reputation":28257,"user_id":4390160,"accept_rate":100,"display_name":"Grismar"},"score":1,"creation_date":1667802914,"post_id":74342719,"comment_id":131245549,"body_markdown":"Have you tried increasing or decreasing the amount of available memory you&#39;re setting with `&quot;-Xmx2g&quot;`? That sets the max allocation pool to 2GB.","body":"Have you tried increasing or decreasing the amount of available memory you&#39;re setting with <code>&quot;-Xmx2g&quot;</code>? That sets the max allocation pool to 2GB."},{"owner":{"account_id":26804094,"reputation":3,"user_id":20395623,"display_name":"Lucifer MorningStar"},"score":0,"creation_date":1667802974,"post_id":74342719,"comment_id":131245563,"body_markdown":"Yes I tried but not worked. Can u please write a code and paste it hear it really helpful to me.  Thanks in advance.","body":"Yes I tried but not worked. Can u please write a code and paste it hear it really helpful to me.  Thanks in advance."},{"owner":{"account_id":5529755,"reputation":28257,"user_id":4390160,"accept_rate":100,"display_name":"Grismar"},"score":0,"creation_date":1667803016,"post_id":74342719,"comment_id":131245583,"body_markdown":"No matter the size you give it, it always gives you this error? What is the size of your Excel workbook? The name `LargeFile.xlsx` is ominous - why are you trying to pull everything through these specific libraries and frameworks, just to save the Excel workbook out again?","body":"No matter the size you give it, it always gives you this error? What is the size of your Excel workbook? The name <code>LargeFile.xlsx</code> is ominous - why are you trying to pull everything through these specific libraries and frameworks, just to save the Excel workbook out again?"},{"owner":{"account_id":26804094,"reputation":3,"user_id":20395623,"display_name":"Lucifer MorningStar"},"score":0,"creation_date":1667803065,"post_id":74342719,"comment_id":131245596,"body_markdown":"320MB+ Size it&#39;s I also try in configure java and increase the size also but still same error are found","body":"320MB+ Size it&#39;s I also try in configure java and increase the size also but still same error are found"},{"owner":{"account_id":26804094,"reputation":3,"user_id":20395623,"display_name":"Lucifer MorningStar"},"score":0,"creation_date":1667803493,"post_id":74342719,"comment_id":131245687,"body_markdown":"Only i just need we have to save the file in xlsb because it open in few seconds in xlsb file size will be reduce an open soons","body":"Only i just need we have to save the file in xlsb because it open in few seconds in xlsb file size will be reduce an open soons"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1667803499,"post_id":74342719,"comment_id":131245689,"body_markdown":"&quot;I also try in configure java and increase the size&quot; -  How?","body":"&quot;I also try in configure java and increase the size&quot; -  How?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1667803537,"post_id":74342719,"comment_id":131245702,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":26804094,"reputation":3,"user_id":20395623,"display_name":"Lucifer MorningStar"},"score":0,"creation_date":1667803934,"post_id":74342719,"comment_id":131245776,"body_markdown":"@StephenC  - I download the JVM and in configure Java App i increased the size.                      Help of this Video:- https://youtu.be/WYtH5yJRz5s","body":"@StephenC  - I download the JVM and in configure Java App i increased the size.                      Help of this Video:- <a href=\"https://youtu.be/WYtH5yJRz5s\" rel=\"nofollow noreferrer\">youtu.be/WYtH5yJRz5s</a>"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1667804356,"post_id":74342719,"comment_id":131245882,"body_markdown":"Well that is telling me that you (probably) are increasing the heap size, and that 2GB is still too small.  And that implies either it needs to be bigger still ... or the workbook you are trying to load is simply too large to handle in Java.   Java (POI) is very memory inefficient.","body":"Well that is telling me that you (probably) are increasing the heap size, and that 2GB is still too small.  And that implies either it needs to be bigger still ... or the workbook you are trying to load is simply too large to handle in Java.   Java (POI) is very memory inefficient."},{"owner":{"account_id":26804094,"reputation":3,"user_id":20395623,"display_name":"Lucifer MorningStar"},"score":0,"creation_date":1667804767,"post_id":74342719,"comment_id":131245971,"body_markdown":"Okay so now how i can solve this error any solution do you have? Because i tried since last week but not worked.  And i am using anaconda 3 Jupyter Notebook.  If you have a solution please send he the correct code it&#39;s really helpful to me. Thanks @StephenC","body":"Okay so now how i can solve this error any solution do you have? Because i tried since last week but not worked.  And i am using anaconda 3 Jupyter Notebook.  If you have a solution please send he the correct code it&#39;s really helpful to me. Thanks @StephenC"},{"owner":{"account_id":26738201,"reputation":1550,"user_id":20339407,"display_name":"0x0fba"},"score":1,"creation_date":1667805481,"post_id":74342719,"comment_id":131246176,"body_markdown":"What do you want to achieve ? Testing JPype or manipulate Excel files in Python ?","body":"What do you want to achieve ? Testing JPype or manipulate Excel files in Python ?"},{"owner":{"account_id":26804094,"reputation":3,"user_id":20395623,"display_name":"Lucifer MorningStar"},"score":0,"creation_date":1667805611,"post_id":74342719,"comment_id":131246215,"body_markdown":"@fbattello  Hi, I just want to this code is Book2.xlsx is download in TestFile1.xlsb only need to reduce the file size that sit not testing the Jpype or manipulating the excel files","body":"@fbattello  Hi, I just want to this code is Book2.xlsx is download in TestFile1.xlsb only need to reduce the file size that sit not testing the Jpype or manipulating the excel files"},{"owner":{"account_id":26738201,"reputation":1550,"user_id":20339407,"display_name":"0x0fba"},"score":0,"creation_date":1667806660,"post_id":74342719,"comment_id":131246476,"body_markdown":"If the goal is just to convert the format.\nYour solution looks quite complicated.\nWhy you don&#39;t do use the Aspose.Cells Java library directly in Java ?\nOr better is there any executable on windows that would do the job ? the `soffice` binary from LibreOffice ?","body":"If the goal is just to convert the format. Your solution looks quite complicated. Why you don&#39;t do use the Aspose.Cells Java library directly in Java ? Or better is there any executable on windows that would do the job ? the <code>soffice</code> binary from LibreOffice ?"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1667807586,"post_id":74342719,"comment_id":131246744,"body_markdown":"Actually, since you are using Windows, you ought to be able to use (real) Excel to do this format conversion.   Alternatively, just get a machine with more RAM so that you can make the Java heap *as large as it needs to be* to perform the conversion.","body":"Actually, since you are using Windows, you ought to be able to use (real) Excel to do this format conversion.   Alternatively, just get a machine with more RAM so that you can make the Java heap <i>as large as it needs to be</i> to perform the conversion."},{"owner":{"account_id":26804094,"reputation":3,"user_id":20395623,"display_name":"Lucifer MorningStar"},"score":0,"creation_date":1667811673,"post_id":74342719,"comment_id":131247946,"body_markdown":"Hii All, Please open this https://products.aspose.com/cells/python-java/conversion/xlsx-to-xlsb/    site i am solving this error because this is my project where i have to solve. Thanks.   \n@StephenC   &amp; fbattello","body":"Hii All, Please open this <a href=\"https://products.aspose.com/cells/python-java/conversion/xlsx-to-xlsb/\" rel=\"nofollow noreferrer\">products.aspose.com/cells/python-java/conversion/xlsx-to-xls&zwnj;&#8203;b</a>    site i am solving this error because this is my project where i have to solve. Thanks.    @StephenC   &amp; fbattello"}],"answers":[{"tags":[],"owner":{"account_id":15429506,"reputation":26,"user_id":11131324,"display_name":"sainivetha"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1667899870,"creation_date":1667899870,"answer_id":74358426,"question_id":74342719,"body_markdown":"You can try this to increase your memory to 2gb \r\n\r\n```jpype.startJVM(&quot;-Xms2g&quot;)```","title":"java.io.FileNotFoundException: Can&#39;t find file: How i can save xlxb file from calling URL","body":"<p>You can try this to increase your memory to 2gb</p>\n<p><code>jpype.startJVM(&quot;-Xms2g&quot;)</code></p>\n"}],"owner":{"account_id":26804094,"reputation":3,"user_id":20395623,"display_name":"Lucifer MorningStar"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74358426,"answer_count":1,"score":-1,"last_activity_date":1667907763,"creation_date":1667802664,"question_id":74342719,"body_markdown":"Their is new error now i want to download this from calling to url. Means in this code i have to upload it on live but their is no option in live that give the static path of our computer. So, now how i can save the file calling for the url.\r\n\r\n```import  jpype\r\nimport  asposecells\r\nimport urllib.request\r\njpype.startJVM(&quot;-Xmx10g&quot;)\r\nfrom asposecells.api import Workbook\r\nworkbook = Workbook(&quot;http://localhost/cafe_ci/assets/TestFile.xlsx&quot;)\r\nworkbook.save(&quot;http://localhost/cafe_ci/assets/TestFile2.xlsb&quot;)\r\njpype.shutdownJVM()```\r\n\r\nERROR&#128071;\r\n\r\n\r\nException Traceback (most recent call last)\r\n~\\anaconda3\\lib\\site-packages\\_jpype.cp39-win_amd64.pyd in com.aspose.cells.Workbook.&lt;init&gt;()\r\n\r\nException: Java Exception The above exception was the direct cause of the following exception:\r\njava.io.FileNotFoundException Traceback (most recent call last)\r\n~\\AppData\\Local\\Temp\\ipykernel_7624\\3627910572.py in &lt;module&gt;\r\n      4 jpype.startJVM(&quot;-Xmx10g&quot;)\r\n      5 from asposecells.api import Workbook\r\n----&gt; 6 workbook = Workbook(&quot;http://localhost/cafe_ci/assets/TestFile.xlsx&quot;)\r\n      7 workbook.save(&quot;http://localhost/cafe_ci/assets/TestFile2.xlsb&quot;)\r\n      8 jpype.shutdownJVM()\r\n\r\njava.io.FileNotFoundException: java.io.FileNotFoundException: Can&#39;t find file: http://localhost/cafe_ci/assets/TestFile.xlsx.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/t76pv.png","title":"java.io.FileNotFoundException: Can&#39;t find file: How i can save xlxb file from calling URL","body":"<p>Their is new error now i want to download this from calling to url. Means in this code i have to upload it on live but their is no option in live that give the static path of our computer. So, now how i can save the file calling for the url.</p>\n<pre><code>import  asposecells\nimport urllib.request\njpype.startJVM(&quot;-Xmx10g&quot;)\nfrom asposecells.api import Workbook\nworkbook = Workbook(&quot;http://localhost/cafe_ci/assets/TestFile.xlsx&quot;)\nworkbook.save(&quot;http://localhost/cafe_ci/assets/TestFile2.xlsb&quot;)\njpype.shutdownJVM()```\n\nERROR\n\n\nException Traceback (most recent call last)\n~\\anaconda3\\lib\\site-packages\\_jpype.cp39-win_amd64.pyd in com.aspose.cells.Workbook.&lt;init&gt;()\n\nException: Java Exception The above exception was the direct cause of the following exception:\njava.io.FileNotFoundException Traceback (most recent call last)\n~\\AppData\\Local\\Temp\\ipykernel_7624\\3627910572.py in &lt;module&gt;\n      4 jpype.startJVM(&quot;-Xmx10g&quot;)\n      5 from asposecells.api import Workbook\n----&gt; 6 workbook = Workbook(&quot;http://localhost/cafe_ci/assets/TestFile.xlsx&quot;)\n      7 workbook.save(&quot;http://localhost/cafe_ci/assets/TestFile2.xlsb&quot;)\n      8 jpype.shutdownJVM()\n\njava.io.FileNotFoundException: java.io.FileNotFoundException: Can't find file: http://localhost/cafe_ci/assets/TestFile.xlsx.\n\n\n  [1]: https://i.stack.imgur.com/t76pv.png\n</code></pre>\n"},{"tags":["java","docker"],"comments":[{"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1667902356,"post_id":74358889,"comment_id":131272980,"body_markdown":"I would have guessed that the third one works. Are the files in the same directory? Java uses `:` as the separator on Linux, `;` is only used on Windows. Also make sure to not have *both* `ENTRYPOINT` and `CMD` in your Dockerfile, unless you know why/how to use that combination.","body":"I would have guessed that the third one works. Are the files in the same directory? Java uses <code>:</code> as the separator on Linux, <code>;</code> is only used on Windows. Also make sure to not have <i>both</i> <code>ENTRYPOINT</code> and <code>CMD</code> in your Dockerfile, unless you know why/how to use that combination."},{"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1667902486,"post_id":74358889,"comment_id":131273034,"body_markdown":"Also, can you post the error message? Because it can happen that a class from `another.jar` fails to load because *it itself* is missing a required class from `third.jar` (which is why I usually leave the job of &quot;collect the dependencies&quot; to a proper build system like Gradle).","body":"Also, can you post the error message? Because it can happen that a class from <code>another.jar</code> fails to load because <i>it itself</i> is missing a required class from <code>third.jar</code> (which is why I usually leave the job of &quot;collect the dependencies&quot; to a proper build system like Gradle)."},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1667902808,"post_id":74358889,"comment_id":131273165,"body_markdown":"Related: [Run a JAR file from the command line and specify classpath](https://stackoverflow.com/questions/18413014/run-a-jar-file-from-the-command-line-and-specify-classpath).","body":"Related: <a href=\"https://stackoverflow.com/questions/18413014/run-a-jar-file-from-the-command-line-and-specify-classpath\">Run a JAR file from the command line and specify classpath</a>."},{"owner":{"account_id":455809,"reputation":12993,"user_id":854207,"accept_rate":62,"display_name":"paul"},"score":0,"creation_date":1667904701,"post_id":74358889,"comment_id":131273788,"body_markdown":"I already update with error","body":"I already update with error"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1667905435,"post_id":74358889,"comment_id":131274045,"body_markdown":"Looks like your `ServiceProvider` stuff is wrong","body":"Looks like your <code>ServiceProvider</code> stuff is wrong"},{"owner":{"account_id":455809,"reputation":12993,"user_id":854207,"accept_rate":62,"display_name":"paul"},"score":0,"creation_date":1667906675,"post_id":74358889,"comment_id":131274491,"body_markdown":"It&#39;s working in local fine","body":"It&#39;s working in local fine"},{"owner":{"account_id":2339925,"reputation":15581,"user_id":2051454,"accept_rate":60,"display_name":"Software Engineer"},"score":0,"creation_date":1667907366,"post_id":74358889,"comment_id":131274739,"body_markdown":"You cannot use both cmd and entrypoint like that. Also, you&#39;re missing the `.` before the `/*` in your example. Try removing cmd and using just the `./*` classpath.","body":"You cannot use both cmd and entrypoint like that. Also, you&#39;re missing the <code>.</code> before the <code>&#47;*</code> in your example. Try removing cmd and using just the <code>.&#47;*</code> classpath."},{"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"score":1,"creation_date":1667907802,"post_id":74358889,"comment_id":131274903,"body_markdown":"could you please post the &quot;ls -l&quot; of the folder you&#39;re trying to run. I believe that the third option is the way to go, however there can be many things that can go wrong: permissions (that&#39;s why I&#39;ve asked to post / check the ls inside the docker), lack of other jars that you haven&#39;t included and many others. Also its possible to define a CLASSSPATH env. variable &#39;separately&#39; (define it in Dockerfile) and you won&#39;t need to use -cp. In non-dockerized env. such a global var can be too fragile, but in docker you have one process anyway, so it doesn&#39;t matter.","body":"could you please post the &quot;ls -l&quot; of the folder you&#39;re trying to run. I believe that the third option is the way to go, however there can be many things that can go wrong: permissions (that&#39;s why I&#39;ve asked to post / check the ls inside the docker), lack of other jars that you haven&#39;t included and many others. Also its possible to define a CLASSSPATH env. variable &#39;separately&#39; (define it in Dockerfile) and you won&#39;t need to use -cp. In non-dockerized env. such a global var can be too fragile, but in docker you have one process anyway, so it doesn&#39;t matter."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1667909035,"post_id":74358889,"comment_id":131275315,"body_markdown":"*Works perfectly fine and Service provider load the instance fine.* That&#39;s a different thing. In additional to the trivial difference (that it&#39;s running on WIndows), you are using a glob there that could take in other paths (e.g. to other jars) as well. Do `java -verbose:class -cp &quot;app.jar;./*&quot;  com.pol.Main` and make a careful note of the paths. Then make sure those are used in the Docker version. Of course the equivalent would be `CMD [ &quot;java&quot;, &quot;-classpath&quot;, &quot;app.jar:/*&quot;, &quot;com.pol.Main&quot; ]` but I&#39;d avoid globs","body":"<i>Works perfectly fine and Service provider load the instance fine.</i> That&#39;s a different thing. In additional to the trivial difference (that it&#39;s running on WIndows), you are using a glob there that could take in other paths (e.g. to other jars) as well. Do <code>java -verbose:class -cp &quot;app.jar;.&#47;*&quot;  com.pol.Main</code> and make a careful note of the paths. Then make sure those are used in the Docker version. Of course the equivalent would be <code>CMD [ &quot;java&quot;, &quot;-classpath&quot;, &quot;app.jar:&#47;*&quot;, &quot;com.pol.Main&quot; ]</code> but I&#39;d avoid globs"},{"owner":{"account_id":455809,"reputation":12993,"user_id":854207,"accept_rate":62,"display_name":"paul"},"score":0,"creation_date":1667910191,"post_id":74358889,"comment_id":131275745,"body_markdown":"@MarkBramnik how the Dockerfile it should looks like if I use ENV CLASSPATH, not sure how to configure then the CMD","body":"@MarkBramnik how the Dockerfile it should looks like if I use ENV CLASSPATH, not sure how to configure then the CMD"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1667910461,"post_id":74358889,"comment_id":131275857,"body_markdown":"Your classpath is wrong. Trying to place it elsewhere is not going to help you","body":"Your classpath is wrong. Trying to place it elsewhere is not going to help you"},{"owner":{"account_id":455809,"reputation":12993,"user_id":854207,"accept_rate":62,"display_name":"paul"},"score":0,"creation_date":1667912155,"post_id":74358889,"comment_id":131276464,"body_markdown":"@MarkBramnik you were right after do ls -l I found the another.jar is actually empty, thanks a lot!","body":"@MarkBramnik you were right after do ls -l I found the another.jar is actually empty, thanks a lot!"}],"owner":{"account_id":455809,"reputation":12993,"user_id":854207,"accept_rate":62,"display_name":"paul"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1667906767,"creation_date":1667901912,"question_id":74358889,"body_markdown":"I follow several entries here with solutions but still, I cannot make it work.\r\n\r\nI have a Java application to be executed inside a Docker container, and that requires running with two JAR files in `classpath` and I&#39;m not able to make it with all these combinations in my `Dockerfile`.\r\n\r\n```dockerfile\r\nENTRYPOINT [ &quot;java&quot;, &quot;-classpath&quot;, &quot;app.jar;another.jar&quot;, &quot;com.pol.Main&quot; ]\r\nCMD [ &quot;java&quot;, &quot;-classpath&quot;, &quot;app.jar;another.jar&quot;, &quot;com.pol.Main&quot; ]\r\nCMD [ &quot;java&quot;, &quot;-classpath&quot;, &quot;app.jar:another.jar&quot;, &quot;com.pol.Main&quot; ]\r\nCMD [ &quot;java&quot;, &quot;-classpath&quot;, &quot;app.jar;/*&quot;, &quot;com.pol.Main&quot; ]\r\n```\r\n\r\nI know the `app.jar` is there since if I add this one it&#39;s able to find the `Main` class, but then it fails because it cannot find some Classes required from `another.jar`\r\n\r\n\r\nWith option 3 \r\n\r\n    CMD [ &quot;java&quot;, &quot;-classpath&quot;, &quot;app.jar:another.jar&quot;, &quot;com.pol.Main&quot; ]\r\n\r\nI can find the main class of `app.jar` but `another.jar` is not loaded\r\n\r\n    java.util.NoSuchElementException: null\r\n    \tat java.util.ServiceLoader$2.next(ServiceLoader.java:1308) ~[?:?]\r\n    \tat java.util.ServiceLoader$2.next(ServiceLoader.java:1296) ~[?:?]\r\n    \tat java.util.ServiceLoader$3.next(ServiceLoader.java:1394) ~[?:?]\r\n\r\nIn local running with the command\r\n\r\n    java -cp &quot;app.jar;./*&quot;  com.pol.Main\r\n\r\nWorks perfectly fine and Service provider load the instance fine.\r\n","title":"Run Java classpath in CMD","body":"<p>I follow several entries here with solutions but still, I cannot make it work.</p>\n<p>I have a Java application to be executed inside a Docker container, and that requires running with two JAR files in <code>classpath</code> and I'm not able to make it with all these combinations in my <code>Dockerfile</code>.</p>\n<pre><code>ENTRYPOINT [ &quot;java&quot;, &quot;-classpath&quot;, &quot;app.jar;another.jar&quot;, &quot;com.pol.Main&quot; ]\nCMD [ &quot;java&quot;, &quot;-classpath&quot;, &quot;app.jar;another.jar&quot;, &quot;com.pol.Main&quot; ]\nCMD [ &quot;java&quot;, &quot;-classpath&quot;, &quot;app.jar:another.jar&quot;, &quot;com.pol.Main&quot; ]\nCMD [ &quot;java&quot;, &quot;-classpath&quot;, &quot;app.jar;/*&quot;, &quot;com.pol.Main&quot; ]\n</code></pre>\n<p>I know the <code>app.jar</code> is there since if I add this one it's able to find the <code>Main</code> class, but then it fails because it cannot find some Classes required from <code>another.jar</code></p>\n<p>With option 3</p>\n<pre><code>CMD [ &quot;java&quot;, &quot;-classpath&quot;, &quot;app.jar:another.jar&quot;, &quot;com.pol.Main&quot; ]\n</code></pre>\n<p>I can find the main class of <code>app.jar</code> but <code>another.jar</code> is not loaded</p>\n<pre><code>java.util.NoSuchElementException: null\n    at java.util.ServiceLoader$2.next(ServiceLoader.java:1308) ~[?:?]\n    at java.util.ServiceLoader$2.next(ServiceLoader.java:1296) ~[?:?]\n    at java.util.ServiceLoader$3.next(ServiceLoader.java:1394) ~[?:?]\n</code></pre>\n<p>In local running with the command</p>\n<pre><code>java -cp &quot;app.jar;./*&quot;  com.pol.Main\n</code></pre>\n<p>Works perfectly fine and Service provider load the instance fine.</p>\n"},{"tags":["java","android","ionic-framework","capacitor"],"answers":[{"tags":[],"owner":{"account_id":1428527,"reputation":52235,"user_id":1351469,"accept_rate":100,"display_name":"jcesarmobile"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1667899239,"creation_date":1667899239,"answer_id":74358291,"question_id":74350034,"body_markdown":"Use `getContext()` instead of `context`","title":"How to set &quot;context&quot; of an capacitor plugin to use UsageStatsManager","body":"<p>Use <code>getContext()</code> instead of <code>context</code></p>\n"}],"owner":{"account_id":14057281,"reputation":143,"user_id":10154279,"display_name":"Stefan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":308,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74358291,"answer_count":1,"score":1,"last_activity_date":1667906583,"creation_date":1667839593,"question_id":74350034,"body_markdown":"I&#39;m trying to write a capacitor plugin following this [explanation][1]. The Plugin should make use of Androids [usageStatsManager][2]. \r\n\r\nWith the code further below, I&#39;m getting the following error in Android Studio:\r\n\r\n&gt; error: cannot find symbol\r\n        UsageStatsManager usm = (UsageStatsManager) context.getSystemService(Context.USAGE_STATS_SERVICE);                             \r\n  symbol:   variable context                \r\n  location: class echoPlugin\r\n\r\n\r\n So it seems somehow I&#39;m not using context correctly. \r\n\r\n\r\nMy code in echoPlugin.java:\r\n\r\n```\r\npackage com.echo.capacitor;\r\n\r\nimport com.getcapacitor.JSObject;\r\nimport com.getcapacitor.Plugin;\r\nimport com.getcapacitor.PluginMethod;\r\nimport com.getcapacitor.annotation.CapacitorPlugin;\r\nimport android.content.Context;\r\nimport android.util.Log;\r\nimport android.app.usage.UsageStats;\r\nimport android.app.usage.UsageStatsManager;\r\n\r\nimport java.util.Calendar;\r\nimport java.util.List;\r\n\r\n@CapacitorPlugin(name = &quot;echo&quot;)\r\npublic class echoPlugin extends Plugin {    \r\n\r\n    @PluginMethod    \r\n    public void getStats(Context call) {\r\n        Log.i(&quot;Method: &quot;, &quot;getStats&quot;);           \r\n\r\n        UsageStatsManager usm = (UsageStatsManager) context.getSystemService(Context.USAGE_STATS_SERVICE);\r\n        long now  = Calendar.getInstance().getTimeInMillis();       \r\n        List&lt;UsageStats&gt; stats = usm.queryUsageStats(UsageStatsManager.INTERVAL_DAILY, 0, now);\r\n\r\n         JSObject ret = new JSObject();\r\n         ret.put(&quot;my Stats&quot;,stats);\r\n\r\n        call.resolve(ret);\r\n\r\n }\r\n}\r\n```\r\n\r\nI have to add that I&#39;m a complete Java beginner. I&#39;m normally doing Apps with Vue+Ionic+Capacitor, but because there is no implementation of the UsageStatsManager in Capacitor I&#39;m trying to find a way to make it work.\r\n\r\n\r\n  [1]: https://capacitorjs.com/docs/plugins/creating-plugins\r\n  [2]: https://developer.android.com/reference/android/app/usage/UsageStatsManager","title":"How to set &quot;context&quot; of an capacitor plugin to use UsageStatsManager","body":"<p>I'm trying to write a capacitor plugin following this <a href=\"https://capacitorjs.com/docs/plugins/creating-plugins\" rel=\"nofollow noreferrer\">explanation</a>. The Plugin should make use of Androids <a href=\"https://developer.android.com/reference/android/app/usage/UsageStatsManager\" rel=\"nofollow noreferrer\">usageStatsManager</a>.</p>\n<p>With the code further below, I'm getting the following error in Android Studio:</p>\n<blockquote>\n<p>error: cannot find symbol\nUsageStatsManager usm = (UsageStatsManager) context.getSystemService(Context.USAGE_STATS_SERVICE);<br />\nsymbol:   variable context<br />\nlocation: class echoPlugin</p>\n</blockquote>\n<p>So it seems somehow I'm not using context correctly.</p>\n<p>My code in echoPlugin.java:</p>\n<pre><code>package com.echo.capacitor;\n\nimport com.getcapacitor.JSObject;\nimport com.getcapacitor.Plugin;\nimport com.getcapacitor.PluginMethod;\nimport com.getcapacitor.annotation.CapacitorPlugin;\nimport android.content.Context;\nimport android.util.Log;\nimport android.app.usage.UsageStats;\nimport android.app.usage.UsageStatsManager;\n\nimport java.util.Calendar;\nimport java.util.List;\n\n@CapacitorPlugin(name = &quot;echo&quot;)\npublic class echoPlugin extends Plugin {    \n\n    @PluginMethod    \n    public void getStats(Context call) {\n        Log.i(&quot;Method: &quot;, &quot;getStats&quot;);           \n\n        UsageStatsManager usm = (UsageStatsManager) context.getSystemService(Context.USAGE_STATS_SERVICE);\n        long now  = Calendar.getInstance().getTimeInMillis();       \n        List&lt;UsageStats&gt; stats = usm.queryUsageStats(UsageStatsManager.INTERVAL_DAILY, 0, now);\n\n         JSObject ret = new JSObject();\n         ret.put(&quot;my Stats&quot;,stats);\n\n        call.resolve(ret);\n\n }\n}\n</code></pre>\n<p>I have to add that I'm a complete Java beginner. I'm normally doing Apps with Vue+Ionic+Capacitor, but because there is no implementation of the UsageStatsManager in Capacitor I'm trying to find a way to make it work.</p>\n"},{"tags":["java","sql","database","oracle","optimization"],"comments":[{"owner":{"account_id":6389739,"reputation":2892,"user_id":4956336,"display_name":"p3consulting"},"score":0,"creation_date":1667909328,"post_id":74359902,"comment_id":131275404,"body_markdown":"change from IN() to EXISTS() and change &quot;table2.trdate is null&quot; to an expression you can create an index on, be sure there is an index on both tables&#39;s col3.","body":"change from IN() to EXISTS() and change &quot;table2.trdate is null&quot; to an expression you can create an index on, be sure there is an index on both tables&#39;s col3."},{"owner":{"account_id":9938323,"reputation":4258,"user_id":7355859,"display_name":"BobC"},"score":0,"creation_date":1667920375,"post_id":74359902,"comment_id":131280034,"body_markdown":"How many rows in table1?","body":"How many rows in table1?"},{"owner":{"account_id":16042081,"reputation":21,"user_id":11578271,"display_name":"rishabh"},"score":0,"creation_date":1667928830,"post_id":74359902,"comment_id":131283409,"body_markdown":"@p3consulting yes index is there on both col3, does adding index on col table2.trdate can help?","body":"@p3consulting yes index is there on both col3, does adding index on col table2.trdate can help?"},{"owner":{"account_id":16042081,"reputation":21,"user_id":11578271,"display_name":"rishabh"},"score":0,"creation_date":1667928869,"post_id":74359902,"comment_id":131283424,"body_markdown":"@BobC total rows in table1 are more than 40 million.","body":"@BobC total rows in table1 are more than 40 million."},{"owner":{"account_id":6389739,"reputation":2892,"user_id":4956336,"display_name":"p3consulting"},"score":1,"creation_date":1667929598,"post_id":74359902,"comment_id":131283709,"body_markdown":"NULL values are not in a single column index, so answer is no: adding an index on trdate alone will not help here. An index on a compound like (trdate,1) will contains NULL trdate.","body":"NULL values are not in a single column index, so answer is no: adding an index on trdate alone will not help here. An index on a compound like (trdate,1) will contains NULL trdate."},{"owner":{"account_id":16042081,"reputation":21,"user_id":11578271,"display_name":"rishabh"},"score":0,"creation_date":1667981073,"post_id":74359902,"comment_id":131294623,"body_markdown":"@p3consulting So you mean compound index can help? and what is this 1 you are referring in &quot;compound like (trdate,1) &quot;. I am sorry but I am not aware much on this topic.","body":"@p3consulting So you mean compound index can help? and what is this 1 you are referring in &quot;compound like (trdate,1) &quot;. I am sorry but I am not aware much on this topic."},{"owner":{"account_id":6389739,"reputation":2892,"user_id":4956336,"display_name":"p3consulting"},"score":0,"creation_date":1667981451,"post_id":74359902,"comment_id":131294744,"body_markdown":"&quot;1&quot; can be anything, even another non-nullable column if you have usage of such an index in other queries. The (column, constant) as an index is just a trick to have an index including also the rows where column IS NULL.\nBut anyway the presence of the index is just a possible improvement that will depend on the statistics of the values in the indexed column, if anyway ORACLE sees that the criteria will select a significant % of the data so that full scan is still more efficient, the index will not be used.","body":"&quot;1&quot; can be anything, even another non-nullable column if you have usage of such an index in other queries. The (column, constant) as an index is just a trick to have an index including also the rows where column IS NULL. But anyway the presence of the index is just a possible improvement that will depend on the statistics of the values in the indexed column, if anyway ORACLE sees that the criteria will select a significant % of the data so that full scan is still more efficient, the index will not be used."},{"owner":{"account_id":16042081,"reputation":21,"user_id":11578271,"display_name":"rishabh"},"score":0,"creation_date":1668021053,"post_id":74359902,"comment_id":131309071,"body_markdown":"select col3 from table1 inner join table2 on table1.col3 = table2.col3 where table2.trdate is null or table2.trdate &gt;= current_timestamp group by table1.col3\n\nIf table1.col3 is unique but table2.col3 is not unique then can I remove group by?","body":"select col3 from table1 inner join table2 on table1.col3 = table2.col3 where table2.trdate is null or table2.trdate &gt;= current_timestamp group by table1.col3  If table1.col3 is unique but table2.col3 is not unique then can I remove group by?"}],"owner":{"account_id":16042081,"reputation":21,"user_id":11578271,"display_name":"rishabh"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667906555,"creation_date":1667906555,"question_id":74359902,"body_markdown":"I have one update query which I am updating using JAVA. It is connected to a Oracle SQL database. It is a combination of an update and select query.\r\n\r\nQuery: &quot;Update table1 set col1 = &#39;true&#39;, col2= current_timestamp where table1.col1 &lt;&gt; &#39;true&#39; and table1.col3 in (select col3 from table1 inner join table2 on table1.col3 = table2.col3 where table2.trdate is null or table2.trdate &gt;= current_timestamp group by table1.col3 )\r\n\r\n\r\n(select col3 from table1 inner join table2 on table1.col3 = table2.col3 where table2.trdate is null or table2.trdate &gt;= current_timestamp group by table1.col3 ) -&gt; Output of this query will be more 10 million rcords.\r\n\r\nselect table1.col3 where table1.col1 &lt;&gt; &#39;true&#39; and table1.col3 in (select table1.col3 from table1 inner join table2 on table1.col3 = table2.col3 where table2.trdate is null or table2.trdate &gt;= current_timestamp group by table1.col3 ) -&gt; Output of this query will be around 30k rcords.\r\n\r\n\r\ntrdate is a timestamp.\r\ncol3 is a varchar and is connecting the two tables using join.\r\n\r\nThe above update query is taking lot of time (more than 6-7 hours) and is blocking the database. \r\nCan someone suggest any better approach to optimize the query?\r\n\r\nI am thinking to split the process into batches but since there are more than 10 million records, they will be using my space. Can someone help?","title":"Optimizing a combination of update and select query using JAVA","body":"<p>I have one update query which I am updating using JAVA. It is connected to a Oracle SQL database. It is a combination of an update and select query.</p>\n<p>Query: &quot;Update table1 set col1 = 'true', col2= current_timestamp where table1.col1 &lt;&gt; 'true' and table1.col3 in (select col3 from table1 inner join table2 on table1.col3 = table2.col3 where table2.trdate is null or table2.trdate &gt;= current_timestamp group by table1.col3 )</p>\n<p>(select col3 from table1 inner join table2 on table1.col3 = table2.col3 where table2.trdate is null or table2.trdate &gt;= current_timestamp group by table1.col3 ) -&gt; Output of this query will be more 10 million rcords.</p>\n<p>select table1.col3 where table1.col1 &lt;&gt; 'true' and table1.col3 in (select table1.col3 from table1 inner join table2 on table1.col3 = table2.col3 where table2.trdate is null or table2.trdate &gt;= current_timestamp group by table1.col3 ) -&gt; Output of this query will be around 30k rcords.</p>\n<p>trdate is a timestamp.\ncol3 is a varchar and is connecting the two tables using join.</p>\n<p>The above update query is taking lot of time (more than 6-7 hours) and is blocking the database.\nCan someone suggest any better approach to optimize the query?</p>\n<p>I am thinking to split the process into batches but since there are more than 10 million records, they will be using my space. Can someone help?</p>\n"},{"tags":["java","gradle","testing","intellij-idea","junit"],"comments":[{"owner":{"account_id":1906088,"reputation":2053,"user_id":1720938,"accept_rate":68,"display_name":"hamid"},"score":1,"creation_date":1667906422,"post_id":74359859,"comment_id":131274399,"body_markdown":"can you add a screenshot of `Tests.java`","body":"can you add a screenshot of <code>Tests.java</code>"},{"owner":{"account_id":6543678,"reputation":3232,"user_id":5060325,"display_name":"naimdjon"},"score":0,"creation_date":1667907042,"post_id":74359859,"comment_id":131274620,"body_markdown":"@Hendrik H&#252;bner you don&#39;t need to list the `sourceSet` in the gradle file. You are following the default project layout pattern.","body":"@Hendrik H&#252;bner you don&#39;t need to list the <code>sourceSet</code> in the gradle file. You are following the default project layout pattern."},{"owner":{"account_id":4753102,"reputation":3151,"user_id":4886722,"display_name":"Dmitry Khamitov"},"score":0,"creation_date":1668127653,"post_id":74359859,"comment_id":131337001,"body_markdown":"You can also check the `Tests` &quot;Run configuration&quot;","body":"You can also check the <code>Tests</code> &quot;Run configuration&quot;"}],"owner":{"account_id":17896820,"reputation":149,"user_id":13096063,"display_name":"Hendrik H&#252;bner"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667906353,"creation_date":1667906353,"question_id":74359859,"body_markdown":"I have tried making different projects, looked through dozens of threads but couldn&#39;t find anything that helped. Whenever I try to run my tests intellij/gradle returns something like &quot;Test events were not received&quot; or &quot;No tests were found&quot; depending on which button I click to run them.\r\n\r\nMy build.gradle looks like this:\r\n\r\n    repositories { mavenCentral() }\r\n\r\n    sourceSets {\r\n        main {\r\n            java {\r\n                srcDir &#39;src&#39;\r\n            }\r\n       }\r\n       test {\r\n            java {\r\n                srcDir &#39;test&#39;\r\n            }\r\n        }\r\n    }\r\n\r\n    dependencies {\r\n        testImplementation &#39;org.junit.jupiter:junit-jupiter-api:5.7.2&#39;\r\n        implementation &#39;org.junit.jupiter:junit-jupiter-engine:5.7.2&#39;\r\n    }\r\n\r\n    test { useJUnitPlatform() }\r\n\r\nMy folder structure looks like this:\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nThe SDK I use is Java 17, these are my gradle settings (the gradle version is 7.5)\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/muWG4.png\r\n  [2]: https://i.stack.imgur.com/x6M11.png\r\n\r\n\r\nI tried invalidating caches, restarting my ide, tried different gradle, JUnit and SDK versions but nothing seems to help.\r\nMy uni grades depend on me fixing this somehow, so if anyone knows whats going on, please let me know :(","title":"Gradle - The tests were not received","body":"<p>I have tried making different projects, looked through dozens of threads but couldn't find anything that helped. Whenever I try to run my tests intellij/gradle returns something like &quot;Test events were not received&quot; or &quot;No tests were found&quot; depending on which button I click to run them.</p>\n<p>My build.gradle looks like this:</p>\n<pre><code>repositories { mavenCentral() }\n\nsourceSets {\n    main {\n        java {\n            srcDir 'src'\n        }\n   }\n   test {\n        java {\n            srcDir 'test'\n        }\n    }\n}\n\ndependencies {\n    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.7.2'\n    implementation 'org.junit.jupiter:junit-jupiter-engine:5.7.2'\n}\n\ntest { useJUnitPlatform() }\n</code></pre>\n<p>My folder structure looks like this:</p>\n<p><a href=\"https://i.stack.imgur.com/muWG4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/muWG4.png\" alt=\"enter image description here\" /></a></p>\n<p>The SDK I use is Java 17, these are my gradle settings (the gradle version is 7.5)\n<a href=\"https://i.stack.imgur.com/x6M11.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/x6M11.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried invalidating caches, restarting my ide, tried different gradle, JUnit and SDK versions but nothing seems to help.\nMy uni grades depend on me fixing this somehow, so if anyone knows whats going on, please let me know :(</p>\n"},{"tags":["java","logging","java-11","java-17"],"answers":[{"tags":[],"owner":{"account_id":20679093,"reputation":316,"user_id":15183075,"display_name":"Yannick Mussche"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1667906040,"creation_date":1667906040,"answer_id":74359795,"question_id":74359138,"body_markdown":"When I upgrade to Java17, I also upgraded the spring-boot-starter-parent to the latest version 2.7.3. Due to this upgrade, logging.file was deprecated and had to be replaced by logging.file.name. So upgrading to Java17 doesn&#39;t cause it, upgrading the spring-boot-starter-parent does.","title":"Does upgrading to java17 affects the Logger?","body":"<p>When I upgrade to Java17, I also upgraded the spring-boot-starter-parent to the latest version 2.7.3. Due to this upgrade, logging.file was deprecated and had to be replaced by logging.file.name. So upgrading to Java17 doesn't cause it, upgrading the spring-boot-starter-parent does.</p>\n"}],"owner":{"account_id":20679093,"reputation":316,"user_id":15183075,"display_name":"Yannick Mussche"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":653,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74359795,"answer_count":1,"score":0,"last_activity_date":1667906040,"creation_date":1667903041,"question_id":74359138,"body_markdown":"I had a java 11 project, which printed logs to a file ussing the LOGGER. In my classes I used:\r\n\r\n``` \r\n    private final static Logger LOGGER = LoggerFactory.getLogger(object.class);\r\n```\r\n\r\nto send info and errors to my log file. This file was determined in my application.properties by\r\n\r\n``` logging.file=logs/file.log```\r\n\r\nNow this worked fine. I recently upgraded the project to Java17. Now I can still see the logs with &#39;journalctl -u program&#39;, but they don&#39;t get logged anymore into the previous designated file. First I had a &#39;SLF4J: class path contains multiple SLF4J bindings&#39; warning, but I removed the conflicting dependency. When I go trough java17 changes, I see nothing regarding the Logger. But the file where the logs should be saved, remains empty.\r\n\r\n\r\n\r\nCan upgrading to java17 interfer somehow with the logger? \r\nWhat could cause my logger not to log to the file anymore?\r\n\r\n","title":"Does upgrading to java17 affects the Logger?","body":"<p>I had a java 11 project, which printed logs to a file ussing the LOGGER. In my classes I used:</p>\n<pre><code>    private final static Logger LOGGER = LoggerFactory.getLogger(object.class);\n</code></pre>\n<p>to send info and errors to my log file. This file was determined in my application.properties by</p>\n<p><code> logging.file=logs/file.log</code></p>\n<p>Now this worked fine. I recently upgraded the project to Java17. Now I can still see the logs with 'journalctl -u program', but they don't get logged anymore into the previous designated file. First I had a 'SLF4J: class path contains multiple SLF4J bindings' warning, but I removed the conflicting dependency. When I go trough java17 changes, I see nothing regarding the Logger. But the file where the logs should be saved, remains empty.</p>\n<p>Can upgrading to java17 interfer somehow with the logger?\nWhat could cause my logger not to log to the file anymore?</p>\n"},{"tags":["java","string","parsing","formatting"],"comments":[{"owner":{"account_id":4230213,"reputation":4164,"user_id":3462681,"accept_rate":50,"display_name":"Roushan"},"score":0,"creation_date":1524841134,"post_id":50065101,"comment_id":87146863,"body_markdown":"paste the full line","body":"paste the full line"},{"owner":{"account_id":3467880,"reputation":5813,"user_id":2902996,"accept_rate":44,"display_name":"Joel"},"score":0,"creation_date":1524841221,"post_id":50065101,"comment_id":87146921,"body_markdown":"@Roushan updated","body":"@Roushan updated"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":1,"creation_date":1524841225,"post_id":50065101,"comment_id":87146926,"body_markdown":"Beyond that, such things can also depend on your locale. If your JVM for some reason uses say a US local ... then &quot;,&quot; is not seen as comma separator!","body":"Beyond that, such things can also depend on your locale. If your JVM for some reason uses say a US local ... then &quot;,&quot; is not seen as comma separator!"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1524841276,"post_id":50065101,"comment_id":87146961,"body_markdown":"And then: isolate such things: have a little method that *parses* the line and returns the isolated number as string. And pass the result of that into BigDecimal. Do **one** thing at a time (also much easier to test)!","body":"And then: isolate such things: have a little method that <i>parses</i> the line and returns the isolated number as string. And pass the result of that into BigDecimal. Do <b>one</b> thing at a time (also much easier to test)!"},{"owner":{"account_id":3467880,"reputation":5813,"user_id":2902996,"accept_rate":44,"display_name":"Joel"},"score":0,"creation_date":1524841497,"post_id":50065101,"comment_id":87147090,"body_markdown":"@GhostCat I&#39;ve tried parsing the number into a string and then trimmed away the whitespace. then tried converting it to BigDecimal. No luck. I&#39;ve also tried `DecimalFormatSymbols decimalFormatSymbols = DecimalFormatSymbols.getInstance();\n\t\t\t\t\t\tdecimalFormatSymbols.setDecimalSeparator(&#39;,&#39;);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tDecimalFormat format = new DecimalFormat();\n\t\t\t\t\t\t\tformat.setDecimalFormatSymbols(decimalFormatSymbols);\n\t\t\t\t\t\t\tamount = new BigDecimal(line.substring(17, 30));`","body":"@GhostCat I&#39;ve tried parsing the number into a string and then trimmed away the whitespace. then tried converting it to BigDecimal. No luck. I&#39;ve also tried <code>DecimalFormatSymbols decimalFormatSymbols = DecimalFormatSymbols.getInstance(); \t\t\t\t\t\tdecimalFormatSymbols.setDecimalSeparator(&#39;,&#39;); \t\t\t\t\t\t\t \t\t\t\t\t\t\tDecimalFormat format = new DecimalFormat(); \t\t\t\t\t\t\tformat.setDecimalFormatSymbols(decimalFormatSymbols); \t\t\t\t\t\t\tamount = new BigDecimal(line.substring(17, 30));</code>"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1524842328,"post_id":50065101,"comment_id":87147614,"body_markdown":"Always update your question instead of putting so many details into comments! Go step by step: first make sure that the **incoming** string looks as expected. Again: first make sure the parsed number looks exactly as you expect it. Then worry about passing it to that ctor.","body":"Always update your question instead of putting so many details into comments! Go step by step: first make sure that the <b>incoming</b> string looks as expected. Again: first make sure the parsed number looks exactly as you expect it. Then worry about passing it to that ctor."},{"owner":{"account_id":2824719,"reputation":9468,"user_id":2427596,"accept_rate":100,"display_name":"ccjmne"},"score":0,"creation_date":1524857910,"post_id":50065101,"comment_id":87154857,"body_markdown":"@Joel Do you still have an issue? If your problem has been resolved, don&#39;t hesitate to [accept an answer](https://meta.stackexchange.com/a/5235)!","body":"@Joel Do you still have an issue? If your problem has been resolved, don&#39;t hesitate to <a href=\"https://meta.stackexchange.com/a/5235\">accept an answer</a>!"}],"answers":[{"comments":[{"owner":{"account_id":3467880,"reputation":5813,"user_id":2902996,"accept_rate":44,"display_name":"Joel"},"score":0,"creation_date":1524841580,"post_id":50065262,"comment_id":87147156,"body_markdown":"Sorry, but as stated in the question... I cannot change from comma to dots (or remove them)","body":"Sorry, but as stated in the question... I cannot change from comma to dots (or remove them)"},{"owner":{"account_id":4230213,"reputation":4164,"user_id":3462681,"accept_rate":50,"display_name":"Roushan"},"score":0,"creation_date":1524841768,"post_id":50065262,"comment_id":87147281,"body_markdown":"but ultimately you will get the same value,","body":"but ultimately you will get the same value,"},{"owner":{"account_id":3467880,"reputation":5813,"user_id":2902996,"accept_rate":44,"display_name":"Joel"},"score":0,"creation_date":1524841825,"post_id":50065262,"comment_id":87147309,"body_markdown":"Sure, but it kinda defeats the purpose of being fed data in a certain way then altering it. If I could change the format of the files, i would.","body":"Sure, but it kinda defeats the purpose of being fed data in a certain way then altering it. If I could change the format of the files, i would."},{"owner":{"account_id":418189,"reputation":1882,"user_id":794606,"accept_rate":80,"display_name":"Jacek Cz"},"score":0,"creation_date":1524842181,"post_id":50065262,"comment_id":87147522,"body_markdown":"precisely use locales - or replace substring comma into dot. In Polish reality (where comma is traditional separator, but many data has dots) I prefer for many reasons replace","body":"precisely use locales - or replace substring comma into dot. In Polish reality (where comma is traditional separator, but many data has dots) I prefer for many reasons replace"}],"tags":[],"owner":{"account_id":4230213,"reputation":4164,"user_id":3462681,"accept_rate":50,"display_name":"Roushan"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524842221,"creation_date":1524841497,"answer_id":50065262,"question_id":50065101,"body_markdown":"using trim remove the whitespaces from substring:\r\n\r\n    String line=&quot;O5555 5555555555       4711,17         420110315SEK&quot;;\r\n     DecimalFormatSymbols symbols = new DecimalFormatSymbols();\r\n     symbols.setGroupingSeparator(&#39;,&#39;);\r\n    String pattern = &quot;#,##&quot;;\r\n    DecimalFormat decimalFormat = new DecimalFormat(pattern, symbols);\r\n    decimalFormat.setParseBigDecimal(true);\r\n     BigDecimal amount = null;\r\n                try {\r\n                    amount = (BigDecimal) decimalFormat.parse(line.substring(17,30).trim());\r\n                } catch (ParseException e) {\r\n                    e.printStackTrace();\r\n                }\r\n                System.out.println(amount);\r\n\r\n#out\r\n`471117`","title":"Format string into BigDecimal","body":"<p>using trim remove the whitespaces from substring:</p>\n\n<pre><code>String line=\"O5555 5555555555       4711,17         420110315SEK\";\n DecimalFormatSymbols symbols = new DecimalFormatSymbols();\n symbols.setGroupingSeparator(',');\nString pattern = \"#,##\";\nDecimalFormat decimalFormat = new DecimalFormat(pattern, symbols);\ndecimalFormat.setParseBigDecimal(true);\n BigDecimal amount = null;\n            try {\n                amount = (BigDecimal) decimalFormat.parse(line.substring(17,30).trim());\n            } catch (ParseException e) {\n                e.printStackTrace();\n            }\n            System.out.println(amount);\n</code></pre>\n\n<h1>out</h1>\n\n<p><code>471117</code></p>\n"},{"comments":[{"owner":{"account_id":3467880,"reputation":5813,"user_id":2902996,"accept_rate":44,"display_name":"Joel"},"score":0,"creation_date":1524911648,"post_id":50065439,"comment_id":87167267,"body_markdown":"I understand what you are trying to produce here, but unfortunately this doesn&#39;t give me `,` but `.` instead. Or is that the fault of System.out.println ?","body":"I understand what you are trying to produce here, but unfortunately this doesn&#39;t give me <code>,</code> but <code>.</code> instead. Or is that the fault of System.out.println ?"},{"owner":{"account_id":2824719,"reputation":9468,"user_id":2427596,"accept_rate":100,"display_name":"ccjmne"},"score":0,"creation_date":1524911765,"post_id":50065439,"comment_id":87167305,"body_markdown":"Yes, it&#39;s just printed out `&quot;4711.17&quot;` ! The value is the right one! If you add `0.83` to it, you get `4712.0`.","body":"Yes, it&#39;s just printed out <code>&quot;4711.17&quot;</code> ! The value is the right one! If you add <code>0.83</code> to it, you get <code>4712.0</code>."}],"tags":[],"owner":{"account_id":2824719,"reputation":9468,"user_id":2427596,"accept_rate":100,"display_name":"ccjmne"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1524842760,"creation_date":1524842058,"answer_id":50065439,"question_id":50065101,"body_markdown":"You have 2 issues here:\r\n\r\n# Extraneous whitespaces\r\n\r\nYou are trying to parse the following `String`: `&quot;      4711,17&quot;`.\r\n\r\nYou need to **trim** it in order to remove the leading and trailing whitespace characters, using `String#trim`.\r\n\r\n# Using comma (`,`) as a decimal separator\r\n\r\nJust like parsing `Date`s, currencies and even numbers are somewhat `Locale`-dependant. In some (many) countries, the comma (`,`) is used as a separator for thousands, and the dot (`.`) indicates decimals.\r\n\r\nThus, you&#39;ll have to specify the `Locale` you&#39;re working with for your computer to interpret this `String` the same way you do (or assume the default `Locale` is the one you want).\r\n\r\nFor instance, let&#39;s use the `Locale.FRANCE` locale, which **does** use `,` as a separator for decimals:\r\n\r\n    //                                                  &#39;,&#39; indicates decimals\r\n    //                                                      v           v\r\n\tfinal NumberFormat formatter = NumberFormat.getInstance(Locale.FRANCE);\r\n\tfinal String line = &quot;O5555 5555555555       4711,17         420110315SEK&quot;;\r\n\tfinal Number parsed = formatter.parse(line.substring(17, 30).trim());\r\n    //                                                          ^     ^\r\n    //                                                          trimmed\r\n\r\nUsing the snippet above, you&#39;ll be left with a `Number` whose value is the one you want :)\r\n\r\nSince you&#39;re looking for a `BigDecimal` though, I&#39;d simply use `BigDecimal.valueOf(parsed .doubleValue())` to &#39;convert&#39; it, like so:\r\n\r\n    final BigDecimal amount = BigDecimal.valueOf(formatter.parse(line.substring(17, 30).trim()).doubleValue());\r\n\r\nIncorporating this into your piece of code would give:\r\n\r\n    BigDecimal amount;\r\n    while((line = inputStream.readLine()) != null) {\r\n        amount = BigDecimal.valueOf(formatter.parse(line.substring(17, 30).trim()).doubleValue());\r\n    }","title":"Format string into BigDecimal","body":"<p>You have 2 issues here:</p>\n\n<h1>Extraneous whitespaces</h1>\n\n<p>You are trying to parse the following <code>String</code>: <code>\"      4711,17\"</code>.</p>\n\n<p>You need to <strong>trim</strong> it in order to remove the leading and trailing whitespace characters, using <code>String#trim</code>.</p>\n\n<h1>Using comma (<code>,</code>) as a decimal separator</h1>\n\n<p>Just like parsing <code>Date</code>s, currencies and even numbers are somewhat <code>Locale</code>-dependant. In some (many) countries, the comma (<code>,</code>) is used as a separator for thousands, and the dot (<code>.</code>) indicates decimals.</p>\n\n<p>Thus, you'll have to specify the <code>Locale</code> you're working with for your computer to interpret this <code>String</code> the same way you do (or assume the default <code>Locale</code> is the one you want).</p>\n\n<p>For instance, let's use the <code>Locale.FRANCE</code> locale, which <strong>does</strong> use <code>,</code> as a separator for decimals:</p>\n\n<pre><code>//                                                  ',' indicates decimals\n//                                                      v           v\nfinal NumberFormat formatter = NumberFormat.getInstance(Locale.FRANCE);\nfinal String line = \"O5555 5555555555       4711,17         420110315SEK\";\nfinal Number parsed = formatter.parse(line.substring(17, 30).trim());\n//                                                          ^     ^\n//                                                          trimmed\n</code></pre>\n\n<p>Using the snippet above, you'll be left with a <code>Number</code> whose value is the one you want :)</p>\n\n<p>Since you're looking for a <code>BigDecimal</code> though, I'd simply use <code>BigDecimal.valueOf(parsed .doubleValue())</code> to 'convert' it, like so:</p>\n\n<pre><code>final BigDecimal amount = BigDecimal.valueOf(formatter.parse(line.substring(17, 30).trim()).doubleValue());\n</code></pre>\n\n<p>Incorporating this into your piece of code would give:</p>\n\n<pre><code>BigDecimal amount;\nwhile((line = inputStream.readLine()) != null) {\n    amount = BigDecimal.valueOf(formatter.parse(line.substring(17, 30).trim()).doubleValue());\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3467880,"reputation":5813,"user_id":2902996,"accept_rate":44,"display_name":"Joel"},"score":0,"creation_date":1524911355,"post_id":50065920,"comment_id":87167193,"body_markdown":"`Exception in thread &quot;main&quot; java.text.ParseException: Format.parseObject(String) failed\n\tat java.text.Format.parseObject(Format.java:245)`","body":"<code>Exception in thread &quot;main&quot; java.text.ParseException: Format.parseObject(String) failed \tat java.text.Format.parseObject(Format.java:245)</code>"},{"owner":{"account_id":3702826,"reputation":683,"user_id":3082046,"accept_rate":50,"display_name":"xagaffar"},"score":0,"creation_date":1524911939,"post_id":50065920,"comment_id":87167353,"body_markdown":"@Joel it&#39;s probably a different line from the file - the code example that i put on my answer works with no exceptions. Try printing out the numStr before parsing it to see which line causes exception","body":"@Joel it&#39;s probably a different line from the file - the code example that i put on my answer works with no exceptions. Try printing out the numStr before parsing it to see which line causes exception"}],"tags":[],"owner":{"account_id":3702826,"reputation":683,"user_id":3082046,"accept_rate":50,"display_name":"xagaffar"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524844752,"creation_date":1524843704,"answer_id":50065920,"question_id":50065101,"body_markdown":"Looks like the number you receive is not en_US locale, since it uses commas to separate decimal part, so you can use different locale to parse it.\r\n\r\n    String numStr = &quot;O5555 5555555555       4711,17         420110315SEK&quot;.substring(17, 30).trim();\r\n    NumberFormat nf = DecimalFormat.getInstance(Locale.GERMAN);\r\n    BigDecimal bd = new BigDecimal(nf.parseObject(numStr).toString());\r\n\r\nMore info here: https://stackoverflow.com/questions/12836647/best-way-to-convert-locale-specific-string-to-bigdecimal","title":"Format string into BigDecimal","body":"<p>Looks like the number you receive is not en_US locale, since it uses commas to separate decimal part, so you can use different locale to parse it.</p>\n\n<pre><code>String numStr = \"O5555 5555555555       4711,17         420110315SEK\".substring(17, 30).trim();\nNumberFormat nf = DecimalFormat.getInstance(Locale.GERMAN);\nBigDecimal bd = new BigDecimal(nf.parseObject(numStr).toString());\n</code></pre>\n\n<p>More info here: <a href=\"https://stackoverflow.com/questions/12836647/best-way-to-convert-locale-specific-string-to-bigdecimal\">Best way to convert Locale specific String to BigDecimal</a></p>\n"}],"owner":{"account_id":3467880,"reputation":5813,"user_id":2902996,"accept_rate":44,"display_name":"Joel"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1242,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":50065439,"answer_count":3,"score":1,"last_activity_date":1667905898,"creation_date":1524841015,"question_id":50065101,"body_markdown":"I&#39;m parsing out a bunch of numbers from a text-file.\r\n\r\nI&#39;ve isolated the number: `4711,17` from the file which is supposed to be converted into BigDecimal for further processing. (note the comma)\r\n\r\nBut i am unable to convert it. I get parseExceptions.\r\n \r\n\r\n    public BigDecimal amount; //variable\r\n    while((line = inputStream.readLine()) != null) { //reading from file\r\n        amount = new BigDecimal(line.substring(17,30)); //parsing out the number\r\n    }\r\n    \r\nIs it because of the comma or what is going on here? (I am unable to change it from a comma to a dot)\r\n\r\nThanks\r\n\r\n&lt;hr&gt;\r\n\r\nFirst line in output looks like this:\r\n\r\n`O5555 5555555555       4711,17         420110315SEK`\r\n\r\n","title":"Format string into BigDecimal","body":"<p>I'm parsing out a bunch of numbers from a text-file.</p>\n\n<p>I've isolated the number: <code>4711,17</code> from the file which is supposed to be converted into BigDecimal for further processing. (note the comma)</p>\n\n<p>But i am unable to convert it. I get parseExceptions.</p>\n\n<pre><code>public BigDecimal amount; //variable\nwhile((line = inputStream.readLine()) != null) { //reading from file\n    amount = new BigDecimal(line.substring(17,30)); //parsing out the number\n}\n</code></pre>\n\n<p>Is it because of the comma or what is going on here? (I am unable to change it from a comma to a dot)</p>\n\n<p>Thanks</p>\n\n<hr>\n\n<p>First line in output looks like this:</p>\n\n<p><code>O5555 5555555555       4711,17         420110315SEK</code></p>\n"},{"tags":["java","selenium","selenium-chromedriver"],"answers":[{"comments":[{"owner":{"account_id":26689169,"reputation":31,"user_id":20297998,"display_name":"CtrlAltTest"},"score":0,"creation_date":1666331540,"post_id":74149253,"comment_id":130915922,"body_markdown":"yes I have added but still same error","body":"yes I have added but still same error"},{"owner":{"account_id":2508750,"reputation":4397,"user_id":2181703,"accept_rate":20,"display_name":"Optional"},"score":0,"creation_date":1666331815,"post_id":74149253,"comment_id":130915980,"body_markdown":"Do you have a selenium docker container or standalone?","body":"Do you have a selenium docker container or standalone?"},{"owner":{"account_id":26689169,"reputation":31,"user_id":20297998,"display_name":"CtrlAltTest"},"score":0,"creation_date":1666680496,"post_id":74149253,"comment_id":130988141,"body_markdown":"it&#39;s standalone","body":"it&#39;s standalone"}],"tags":[],"owner":{"account_id":2508750,"reputation":4397,"user_id":2181703,"accept_rate":20,"display_name":"Optional"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666331377,"creation_date":1666331377,"answer_id":74149253,"question_id":74149207,"body_markdown":"Did you add options to capabilities?\r\n\r\n    ChromeOptions options = new ChromeOptions();\r\n    options.addArguments(&quot;--incognito&quot;);\r\n    DesiredCapabilities capabilities = DesiredCapabilities.chrome();\r\n    capabilities.setCapability(ChromeOptions.CAPABILITY, options);\r\n    WebDriver chromedriver=new ChromeDriver(capabilities);","title":"How to enable incognito mode in chrome when using selenium","body":"<p>Did you add options to capabilities?</p>\n<pre><code>ChromeOptions options = new ChromeOptions();\noptions.addArguments(&quot;--incognito&quot;);\nDesiredCapabilities capabilities = DesiredCapabilities.chrome();\ncapabilities.setCapability(ChromeOptions.CAPABILITY, options);\nWebDriver chromedriver=new ChromeDriver(capabilities);\n</code></pre>\n"}],"owner":{"account_id":26689169,"reputation":31,"user_id":20297998,"display_name":"CtrlAltTest"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":669,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1667905856,"creation_date":1666330948,"question_id":74149207,"body_markdown":"I have added  `options.addArguments(&quot;--incognito&quot;);` to use chrome incognito. However I am getting the following error:\r\n\r\n    Exception in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: unknown error: Chrome failed to start: crashed.\r\n      (chrome not reachable)\r\n      (The process started from chrome location C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe is no longer running, so ChromeDriver is assuming that Chrome has crashed.) \r\n   \r\n    Build info: version: &#39;4.5.0&#39;, revision: &#39;fe167b119a&#39;\r\n    System info: os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;18.0.2.1&#39;\r\n    Driver info: org.openqa.selenium.chrome.ChromeDriver\r\n    Command: [null, newSession {capabilities=[Capabilities {browserName: chrome, goog:chromeOptions: {args: [--disable-application-cache, --incognito, --no-sandbox, --disable-dev-shm-usage, --disable-application-cache], extensions: [], prefs: {download.default_directory: C:\\AutomationFramework\\mvn-..., profile.default_content_settings.popups: 0}}}], desiredCapabilities=Capabilities {browserName: chrome, goog:chromeOptions: {args: [--disable-application-cache, --incognito, --no-sandbox, --disable-dev-shm-usage, --disable-application-cache], extensions: [], prefs: {download.default_directory: C:\\AutomationFramework\\mvn-..., profile.default_content_settings.popups: 0}}}}]\r\n    \tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:144)\r\n    \tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:102)\r\n    \tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:67)\r\n    \tat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:156)\r\n    \tat org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:167)\r\n    \tat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:142)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:547)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:242)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:157)\r\n    \tat org.openqa.selenium.chromium.ChromiumDriver.&lt;init&gt;(ChromiumDriver.java:101)\r\n    \tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:81)\r\n    \tat org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:70)\r\n    \tat com.company.IniWebDriver.OpenBrowser(IniWebDriver.java:139)\r\n    \tat com.company.Main.main(Main.java:306)\r\n\r\n\r\ncode:\r\n\r\n    ChromeOptions options = new ChromeOptions();\r\n    options.addArguments(&quot;--incognito&quot;);\r\n\r\n\r\nThe chrome version is 106.0.5249.119 and the chrome driver version is 106.0.5249.61. \r\n\r\n\r\nIs there any other way to use incognito without using ChromeOptions? After chromedriver update, chrome incognito stopped working.\r\n\r\n                ","title":"How to enable incognito mode in chrome when using selenium","body":"<p>I have added  <code>options.addArguments(&quot;--incognito&quot;);</code> to use chrome incognito. However I am getting the following error:</p>\n<pre><code>Exception in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: unknown error: Chrome failed to start: crashed.\n  (chrome not reachable)\n  (The process started from chrome location C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe is no longer running, so ChromeDriver is assuming that Chrome has crashed.) \n\nBuild info: version: '4.5.0', revision: 'fe167b119a'\nSystem info: os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '18.0.2.1'\nDriver info: org.openqa.selenium.chrome.ChromeDriver\nCommand: [null, newSession {capabilities=[Capabilities {browserName: chrome, goog:chromeOptions: {args: [--disable-application-cache, --incognito, --no-sandbox, --disable-dev-shm-usage, --disable-application-cache], extensions: [], prefs: {download.default_directory: C:\\AutomationFramework\\mvn-..., profile.default_content_settings.popups: 0}}}], desiredCapabilities=Capabilities {browserName: chrome, goog:chromeOptions: {args: [--disable-application-cache, --incognito, --no-sandbox, --disable-dev-shm-usage, --disable-application-cache], extensions: [], prefs: {download.default_directory: C:\\AutomationFramework\\mvn-..., profile.default_content_settings.popups: 0}}}}]\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:144)\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:102)\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:67)\n    at org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:156)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:167)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:142)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:547)\n    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:242)\n    at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:157)\n    at org.openqa.selenium.chromium.ChromiumDriver.&lt;init&gt;(ChromiumDriver.java:101)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:81)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:70)\n    at com.company.IniWebDriver.OpenBrowser(IniWebDriver.java:139)\n    at com.company.Main.main(Main.java:306)\n</code></pre>\n<p>code:</p>\n<pre><code>ChromeOptions options = new ChromeOptions();\noptions.addArguments(&quot;--incognito&quot;);\n</code></pre>\n<p>The chrome version is 106.0.5249.119 and the chrome driver version is 106.0.5249.61.</p>\n<p>Is there any other way to use incognito without using ChromeOptions? After chromedriver update, chrome incognito stopped working.</p>\n"},{"tags":["java","grid","vaadin","vaadin-flow","vaadin-grid"],"answers":[{"comments":[{"owner":{"account_id":16000883,"reputation":740,"user_id":11547578,"display_name":"Clancinio"},"score":0,"creation_date":1667907100,"post_id":74359697,"comment_id":131274644,"body_markdown":"Hey, Thank you. I actually just needed to update the code in addComponentColumn. It works fine without adding eventGrid.addSlectionListener() :)","body":"Hey, Thank you. I actually just needed to update the code in addComponentColumn. It works fine without adding eventGrid.addSlectionListener() :)"}],"tags":[],"owner":{"account_id":4430906,"reputation":3990,"user_id":3608089,"display_name":"ollitietavainen"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1667905661,"creation_date":1667905661,"answer_id":74359697,"question_id":74359203,"body_markdown":"Assuming you have an in-memory DataProvider:\r\n```java\r\n        Grid&lt;Person&gt; eventGrid = new Grid&lt;Person&gt;();\r\n        eventGrid.addColumn(Person::getFirst).setHeader(&quot;First Name&quot;);\r\n        eventGrid.addColumn(Person::getLast).setHeader(&quot;Last Name&quot;);\r\n        eventGrid.addColumn(Person::getNumber).setHeader(&quot;Phone Number&quot;);\r\n        eventGrid.addComponentColumn(item -&gt; {\r\n            Icon icon = new Icon(&quot;lumo&quot;, &quot;angle-down&quot;);\r\n            if (item.equals(eventGrid.asSingleSelect().getValue())) {\r\n                icon = new Icon(&quot;lumo&quot;, &quot;angle-up&quot;);\r\n            }\r\n            return icon;\r\n        }).setWidth(&quot;6em&quot;).setFlexGrow(0);\r\n        eventGrid.addSelectionListener(e -&gt; {\r\n            eventGrid.getListDataView().refreshAll();\r\n        });\r\n```","title":"Change icon on a selected row in a Vaadin Grid","body":"<p>Assuming you have an in-memory DataProvider:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        Grid&lt;Person&gt; eventGrid = new Grid&lt;Person&gt;();\n        eventGrid.addColumn(Person::getFirst).setHeader(&quot;First Name&quot;);\n        eventGrid.addColumn(Person::getLast).setHeader(&quot;Last Name&quot;);\n        eventGrid.addColumn(Person::getNumber).setHeader(&quot;Phone Number&quot;);\n        eventGrid.addComponentColumn(item -&gt; {\n            Icon icon = new Icon(&quot;lumo&quot;, &quot;angle-down&quot;);\n            if (item.equals(eventGrid.asSingleSelect().getValue())) {\n                icon = new Icon(&quot;lumo&quot;, &quot;angle-up&quot;);\n            }\n            return icon;\n        }).setWidth(&quot;6em&quot;).setFlexGrow(0);\n        eventGrid.addSelectionListener(e -&gt; {\n            eventGrid.getListDataView().refreshAll();\n        });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2759852,"reputation":7920,"user_id":2376954,"display_name":"Leif &#197;strand"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1667905738,"creation_date":1667905738,"answer_id":74359718,"question_id":74359203,"body_markdown":"There are two steps to the solution. First you need to make the renderer react differently for selected items and second, you need to make the grid re-render the row for which the selected status changes.\r\n\r\nThe first part can be handled in the component renderer:\r\n```java\r\neventGrid.addComponentColumn(item -&gt; {\r\n\tString name = eventGrid.getSelectedItems().contains(item) ? &quot;angle-down&quot; : &quot;angle-up&quot;;\r\n\tIcon icon = new Icon(&quot;lumo&quot;, name);\r\n\treturn icon;\r\n}).setWidth(&quot;6em&quot;).setFlexGrow(0);\r\n```\r\n\r\nThe second part is a listener that uses `DataProvider::refreshItem` to trigger specific rows to be rendered again. This is implemented through `asSingeSelect` to get an event that contains both the old and the new value.\r\n```java\r\neventGrid.asSingleSelect().addValueChangeListener(event -&gt; {\r\n\tString newValue = event.getValue();\r\n\tString oldValue = event.getOldValue();\r\n\r\n\tif (newValue != null) {\r\n\t\teventGrid.getDataProvider().refreshItem(newValue);\r\n\t}\r\n\tif (oldValue != null) {\r\n\t\teventGrid.getDataProvider().refreshItem(oldValue);\r\n\t}\r\n});\r\n```","title":"Change icon on a selected row in a Vaadin Grid","body":"<p>There are two steps to the solution. First you need to make the renderer react differently for selected items and second, you need to make the grid re-render the row for which the selected status changes.</p>\n<p>The first part can be handled in the component renderer:</p>\n<pre class=\"lang-java prettyprint-override\"><code>eventGrid.addComponentColumn(item -&gt; {\n    String name = eventGrid.getSelectedItems().contains(item) ? &quot;angle-down&quot; : &quot;angle-up&quot;;\n    Icon icon = new Icon(&quot;lumo&quot;, name);\n    return icon;\n}).setWidth(&quot;6em&quot;).setFlexGrow(0);\n</code></pre>\n<p>The second part is a listener that uses <code>DataProvider::refreshItem</code> to trigger specific rows to be rendered again. This is implemented through <code>asSingeSelect</code> to get an event that contains both the old and the new value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>eventGrid.asSingleSelect().addValueChangeListener(event -&gt; {\n    String newValue = event.getValue();\n    String oldValue = event.getOldValue();\n\n    if (newValue != null) {\n        eventGrid.getDataProvider().refreshItem(newValue);\n    }\n    if (oldValue != null) {\n        eventGrid.getDataProvider().refreshItem(oldValue);\n    }\n});\n</code></pre>\n"}],"owner":{"account_id":16000883,"reputation":740,"user_id":11547578,"display_name":"Clancinio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":200,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74359697,"answer_count":2,"score":0,"last_activity_date":1667905738,"creation_date":1667903314,"question_id":74359203,"body_markdown":"So, I have a grid called &quot;eventGrid&quot;. I added a component column with a down-arrow icon. When a user clicks on a row, addition information is displayed for that row. I want to change the down arrow to an up arrow for the selected row. How can I achieve this?\r\n\r\n     eventGrid.addColumn(Person::getFirst).setHeader(&quot;First Name&quot;);\r\n        eventGrid.addColumn(Person::getLast).setHeader(&quot;Last Name&quot;);\r\n        eventGrid.addColumn(Person::getNumber).setHeader(&quot;Phone Number&quot;);\r\n\r\n\r\n     eventGrid.addComponentColumn(item -&gt; {\r\n          Icon icon = new Icon(&quot;lumo&quot;, &quot;angle-down&quot;);\r\n          return icon;\r\n        }).setWidth(&quot;6em&quot;).setFlexGrow(0);","title":"Change icon on a selected row in a Vaadin Grid","body":"<p>So, I have a grid called &quot;eventGrid&quot;. I added a component column with a down-arrow icon. When a user clicks on a row, addition information is displayed for that row. I want to change the down arrow to an up arrow for the selected row. How can I achieve this?</p>\n<pre><code> eventGrid.addColumn(Person::getFirst).setHeader(&quot;First Name&quot;);\n    eventGrid.addColumn(Person::getLast).setHeader(&quot;Last Name&quot;);\n    eventGrid.addColumn(Person::getNumber).setHeader(&quot;Phone Number&quot;);\n\n\n eventGrid.addComponentColumn(item -&gt; {\n      Icon icon = new Icon(&quot;lumo&quot;, &quot;angle-down&quot;);\n      return icon;\n    }).setWidth(&quot;6em&quot;).setFlexGrow(0);\n</code></pre>\n"},{"tags":["java","interface","abstract-class","abstract","abstraction"],"answers":[{"tags":[],"owner":{"account_id":23257203,"reputation":49,"user_id":17344072,"display_name":"M. Muhammadsodiq"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667905674,"creation_date":1667905674,"answer_id":74359698,"question_id":74359538,"body_markdown":"Generally, an abstract class in Java is a template that stores the data members and methods that we use in a program. Abstraction in Java keeps the user from viewing complex code implementations and provides the user with the necessary information.\r\nAnd also it helps us to avoid duplication in code. \r\n[See for more information][1] and [See why it abstraction is important][2]\r\n\r\n\r\n  [1]: https://www.simplilearn.com/tutorials/java-tutorial/abstract-class-in-java\r\n  [2]: https://www.java67.com/2014/06/why-abstract-class-is-important-in-java.html","title":"How abstract classes, interfaces hides implementation details","body":"<p>Generally, an abstract class in Java is a template that stores the data members and methods that we use in a program. Abstraction in Java keeps the user from viewing complex code implementations and provides the user with the necessary information.\nAnd also it helps us to avoid duplication in code.\n<a href=\"https://www.simplilearn.com/tutorials/java-tutorial/abstract-class-in-java\" rel=\"nofollow noreferrer\">See for more information</a> and <a href=\"https://www.java67.com/2014/06/why-abstract-class-is-important-in-java.html\" rel=\"nofollow noreferrer\">See why it abstraction is important</a></p>\n"}],"owner":{"account_id":26865623,"reputation":1,"user_id":20448437,"display_name":"Shivankit Aggarwal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1667905674,"creation_date":1667904917,"question_id":74359538,"body_markdown":"Here in below mentioned code we have abstract class with abstract method and implemetation is present in child classes. and We can create object of child classes with referance var of parent class and can access the methods. So how we are hiding implementation here. Same thing can be done with normal class as well using method overriding. \r\nwhat we would acheive with the help of abstract classes and interfaces?\r\nWhat is the meaning of hiding implementation details?\r\n\r\n\r\n\r\n```\r\n// Code for abstract class\r\n\r\n\r\nabstract class Bank\r\n{  \r\nabstract int getRateOfInterest();  \r\n}\r\n\r\nclass SBI extends Bank\r\n{  \r\nint getRateOfInterest()\r\n{\r\nreturn 7;\r\n}  \r\n}\r\n\r\nclass PNB extends Bank  \r\n{  \r\nint getRateOfInterest()\r\n{\r\nreturn 8;\r\n}  \r\n}\r\n\r\nclass TestBank{  \r\npublic static void main(String args[])\r\n{  \r\nBank b;  \r\nb=new SBI();  \r\nSystem.out.println(&quot;Rate of Interest is: &quot;+b.getRateOfInterest()+&quot; %&quot;);  \r\nb=new PNB();  \r\nSystem.out.println(&quot;Rate of Interest is: &quot;+b.getRateOfInterest()+&quot; %&quot;);  \r\n}\r\n}\r\n\r\n```\r\n```\r\n//code for non abstract class\r\n\r\n\r\n\r\npublic class Bank\r\n{  \r\npublic int getRateOfInterest()\r\n{\r\nreturn 5;\r\n}  \r\n}\r\n\r\nclass SBI extends Bank\r\n{  \r\nint getRateOfInterest()\r\n{\r\nreturn 7;\r\n}  \r\n}\r\n\r\nclass PNB extends Bank  \r\n{  \r\nint getRateOfInterest()\r\n{\r\nreturn 8;\r\n}  \r\n}\r\n\r\nclass TestBank{  \r\npublic static void main(String args[])\r\n{  \r\nBank b;  \r\nb=new SBI();  \r\nSystem.out.println(&quot;Rate of Interest is: &quot;+b.getRateOfInterest()+&quot; %&quot;);  \r\nb=new PNB();  \r\nSystem.out.println(&quot;Rate of Interest is: &quot;+b.getRateOfInterest()+&quot; %&quot;);  \r\n}\r\n}\r\n```","title":"How abstract classes, interfaces hides implementation details","body":"<p>Here in below mentioned code we have abstract class with abstract method and implemetation is present in child classes. and We can create object of child classes with referance var of parent class and can access the methods. So how we are hiding implementation here. Same thing can be done with normal class as well using method overriding.\nwhat we would acheive with the help of abstract classes and interfaces?\nWhat is the meaning of hiding implementation details?</p>\n<pre><code>// Code for abstract class\n\n\nabstract class Bank\n{  \nabstract int getRateOfInterest();  \n}\n\nclass SBI extends Bank\n{  \nint getRateOfInterest()\n{\nreturn 7;\n}  \n}\n\nclass PNB extends Bank  \n{  \nint getRateOfInterest()\n{\nreturn 8;\n}  \n}\n\nclass TestBank{  \npublic static void main(String args[])\n{  \nBank b;  \nb=new SBI();  \nSystem.out.println(&quot;Rate of Interest is: &quot;+b.getRateOfInterest()+&quot; %&quot;);  \nb=new PNB();  \nSystem.out.println(&quot;Rate of Interest is: &quot;+b.getRateOfInterest()+&quot; %&quot;);  \n}\n}\n\n</code></pre>\n<pre><code>//code for non abstract class\n\n\n\npublic class Bank\n{  \npublic int getRateOfInterest()\n{\nreturn 5;\n}  \n}\n\nclass SBI extends Bank\n{  \nint getRateOfInterest()\n{\nreturn 7;\n}  \n}\n\nclass PNB extends Bank  \n{  \nint getRateOfInterest()\n{\nreturn 8;\n}  \n}\n\nclass TestBank{  \npublic static void main(String args[])\n{  \nBank b;  \nb=new SBI();  \nSystem.out.println(&quot;Rate of Interest is: &quot;+b.getRateOfInterest()+&quot; %&quot;);  \nb=new PNB();  \nSystem.out.println(&quot;Rate of Interest is: &quot;+b.getRateOfInterest()+&quot; %&quot;);  \n}\n}\n</code></pre>\n"},{"tags":["java","maven","resources"],"comments":[{"owner":{"account_id":26774791,"reputation":826,"user_id":20370596,"display_name":"Christoph Dahlen"},"score":1,"creation_date":1667904143,"post_id":74359224,"comment_id":131273604,"body_markdown":"try `classLoader.getResource(&quot;fileC.p12&quot;)`. The directory ./src/main/resources of a Maven project is mapped to the root-level of the generated artifact (jar, war, etc.).","body":"try <code>classLoader.getResource(&quot;fileC.p12&quot;)</code>. The directory ./src/main/resources of a Maven project is mapped to the root-level of the generated artifact (jar, war, etc.)."},{"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"score":0,"creation_date":1667904796,"post_id":74359224,"comment_id":131273824,"body_markdown":"And getFile() won&#39;t work if the file is actually inside a jar/war/etc. Effectively the code you write may only work when running it from the IDE.","body":"And getFile() won&#39;t work if the file is actually inside a jar/war/etc. Effectively the code you write may only work when running it from the IDE."}],"answers":[{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667904364,"creation_date":1667904364,"answer_id":74359410,"question_id":74359224,"body_markdown":"    String data = new String(getClass().getResourceAsStream(&quot;/fileC.p12&quot;).readAllBytes());\r\n\r\nYour resource (which shouldn&#39;t be seen as a file as it could and probably should be packaged with your app) is at the root, so useful to start with &#39;/&#39; then it can be addressed from any package. Be cautious with Java &gt;= 17 as that will be decoded by default as UTF-8, so if that&#39;s not the encoding, you will have to specify what is in the `String` ctor. It might be safer to do that anyway.\r\n","title":"Read a file from resources folder JAVA","body":"<pre><code>String data = new String(getClass().getResourceAsStream(&quot;/fileC.p12&quot;).readAllBytes());\n</code></pre>\n<p>Your resource (which shouldn't be seen as a file as it could and probably should be packaged with your app) is at the root, so useful to start with '/' then it can be addressed from any package. Be cautious with Java &gt;= 17 as that will be decoded by default as UTF-8, so if that's not the encoding, you will have to specify what is in the <code>String</code> ctor. It might be safer to do that anyway.</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1667905118,"creation_date":1667905118,"answer_id":74359593,"question_id":74359224,"body_markdown":"`new File` In java, `File` means __File__. As in, an actual file on your actual harddisk. Resources __aren&#39;t__ - they are entries in a jarfile and therefore not a file. Simply put, resources __cannot be read this way__.\r\n\r\nFortunately, File in general is barking up the wrong tree: The correct abstraction is `InputStream` or similar - that represents &#39;any stream of bytes&#39;. A file can be an InputStream. So can a network socket, a blob from a network, or, indeed, a resource being streamed to you by the classloader, which could very well be getting it from a network or generating it whole cloth - classloaders can do that. It&#39;s an abstract mechanism.\r\n\r\nYou&#39;re also doing it wrong - you want `Type.class.getResource`. Your way is needlessly wordy and will fail in exotic scenarios (such as bootloaders and agents and the like, which have no classloader).\r\n\r\n```java\r\nclass Example {\r\n  public String getDataFromFileC() throws IOException {\r\n    try (var in = Example.class.getResourceAsStream(&quot;/resources/fileC.p12&quot;)) {\r\n      return new String(in.readAllBytes(), StandardCharsets.UTF_8);\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThis:\r\n\r\n* Uses `getResourceAsStream` which gives you an inputstream. As I mentioned, if you mention `File`, you lose. Hence, we don&#39;t.\r\n* Uses the proper form: `MyType.class.get`. This avoids issues when subclassing or in root classloader situations.\r\n* `MyType.class.get` needs a leading slash. the `getResource` on classloaders requires you _not_ to have it (which explains why your snippet wouldn&#39;t work in any scenario - that leading slash).\r\n* Uses try-with-resources as you should.\r\n* Propagates exceptions as you should.\r\n* Configures charset which you should do anytime you go from bytes to strings or vice versa.\r\n\r\nNB: Depending on your build system, it may package those resources in the jar as `/fileC.p12` and not as `/resources/fileC.p12` - in fact, that is likely. You may want to update this to `&quot;/fileC.p12&quot;`.\r\n\r\n\r\nNB2: `String.valueOf(file);` does not read files. It just calls `toString()` on the file object which gives you a path. Resources don&#39;t have to be a path so this cannot work. They do have a URL, which may or may not be useful. If you want that: `return MyClass.class.getResource(&quot;/resources/fileC.p12&quot;).toString();`.\r\n","title":"Read a file from resources folder JAVA","body":"<p><code>new File</code> In java, <code>File</code> means <strong>File</strong>. As in, an actual file on your actual harddisk. Resources <strong>aren't</strong> - they are entries in a jarfile and therefore not a file. Simply put, resources <strong>cannot be read this way</strong>.</p>\n<p>Fortunately, File in general is barking up the wrong tree: The correct abstraction is <code>InputStream</code> or similar - that represents 'any stream of bytes'. A file can be an InputStream. So can a network socket, a blob from a network, or, indeed, a resource being streamed to you by the classloader, which could very well be getting it from a network or generating it whole cloth - classloaders can do that. It's an abstract mechanism.</p>\n<p>You're also doing it wrong - you want <code>Type.class.getResource</code>. Your way is needlessly wordy and will fail in exotic scenarios (such as bootloaders and agents and the like, which have no classloader).</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Example {\n  public String getDataFromFileC() throws IOException {\n    try (var in = Example.class.getResourceAsStream(&quot;/resources/fileC.p12&quot;)) {\n      return new String(in.readAllBytes(), StandardCharsets.UTF_8);\n    }\n  }\n}\n</code></pre>\n<p>This:</p>\n<ul>\n<li>Uses <code>getResourceAsStream</code> which gives you an inputstream. As I mentioned, if you mention <code>File</code>, you lose. Hence, we don't.</li>\n<li>Uses the proper form: <code>MyType.class.get</code>. This avoids issues when subclassing or in root classloader situations.</li>\n<li><code>MyType.class.get</code> needs a leading slash. the <code>getResource</code> on classloaders requires you <em>not</em> to have it (which explains why your snippet wouldn't work in any scenario - that leading slash).</li>\n<li>Uses try-with-resources as you should.</li>\n<li>Propagates exceptions as you should.</li>\n<li>Configures charset which you should do anytime you go from bytes to strings or vice versa.</li>\n</ul>\n<p>NB: Depending on your build system, it may package those resources in the jar as <code>/fileC.p12</code> and not as <code>/resources/fileC.p12</code> - in fact, that is likely. You may want to update this to <code>&quot;/fileC.p12&quot;</code>.</p>\n<p>NB2: <code>String.valueOf(file);</code> does not read files. It just calls <code>toString()</code> on the file object which gives you a path. Resources don't have to be a path so this cannot work. They do have a URL, which may or may not be useful. If you want that: <code>return MyClass.class.getResource(&quot;/resources/fileC.p12&quot;).toString();</code>.</p>\n"}],"owner":{"account_id":23698915,"reputation":36,"user_id":17722317,"display_name":"raskoo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3763,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1667905118,"creation_date":1667903428,"question_id":74359224,"body_markdown":"I want to get a file from the resource file, and to use it in string.\r\n\r\n[![My folder](https://i.stack.imgur.com/GgKne.png)](https://i.stack.imgur.com/GgKne.png)\r\n\r\nI tried this :\r\n\r\n\r\n\r\n\r\n```\r\nClassLoader classLoader = getClass().getClassLoader();\r\nFile file = new File(classLoader.getResource(&quot;/resources/fileC.p12&quot;).getFile());\r\n\r\nString data = String.valueOf(file);\r\n\r\n```\r\n\r\nbut doesnt work, thanks for helping\r\n\r\n\r\n\r\nI tried this but i had a error, it returns a null value","title":"Read a file from resources folder JAVA","body":"<p>I want to get a file from the resource file, and to use it in string.</p>\n<p><a href=\"https://i.stack.imgur.com/GgKne.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GgKne.png\" alt=\"My folder\" /></a></p>\n<p>I tried this :</p>\n<pre><code>ClassLoader classLoader = getClass().getClassLoader();\nFile file = new File(classLoader.getResource(&quot;/resources/fileC.p12&quot;).getFile());\n\nString data = String.valueOf(file);\n\n</code></pre>\n<p>but doesnt work, thanks for helping</p>\n<p>I tried this but i had a error, it returns a null value</p>\n"},{"tags":["java","mongodb","spring-data"],"comments":[{"owner":{"account_id":9744,"reputation":80816,"user_id":18122,"accept_rate":80,"display_name":"Oliver Drotbohm"},"score":1,"creation_date":1358283977,"post_id":14346028,"comment_id":19944196,"body_markdown":"It seems that you store `String` values that can be `ObjectId`s internally. What&#39;s the reason for this? The `String`-to-`ObjectId` conversion is present to be able to use `String` in your Java objects and still have `ObjectId`s in the database.","body":"It seems that you store <code>String</code> values that can be <code>ObjectId</code>s internally. What&#39;s the reason for this? The <code>String</code>-to-<code>ObjectId</code> conversion is present to be able to use <code>String</code> in your Java objects and still have <code>ObjectId</code>s in the database."},{"owner":{"account_id":1923489,"reputation":3432,"user_id":1734454,"accept_rate":42,"display_name":"alex"},"score":0,"creation_date":1358284497,"post_id":14346028,"comment_id":19944438,"body_markdown":"Maybe I&#39;m missing something then. I&#39;m using Strings as _id for the User objects; my Vote objects have a userid String field that I use as reference to the User _id. The votes &quot;field&quot; in the db is an arrays of documents. When I $push a vote.userid in this array, I have a String in the db, not an ObjectId. I&#39;ll update my post with some code to make it more clear.","body":"Maybe I&#39;m missing something then. I&#39;m using Strings as _id for the User objects; my Vote objects have a userid String field that I use as reference to the User _id. The votes &quot;field&quot; in the db is an arrays of documents. When I $push a vote.userid in this array, I have a String in the db, not an ObjectId. I&#39;ll update my post with some code to make it more clear."},{"owner":{"account_id":191427,"reputation":1559,"user_id":431998,"accept_rate":44,"display_name":"Mick Sear"},"score":0,"creation_date":1372864587,"post_id":14346028,"comment_id":25354841,"body_markdown":"You don&#39;t say what version you&#39;re using of Spring-data-mongodb.  I&#39;ve recently been bitten by the reverse of this when upgrading from 1.0.3 to 1.1.0, since they seem to have taken away this automatic conversion.  I was bitten because I&#39;d exported as JSON and then re-imported, leaving me with &quot;_id&quot; : { &quot;$id&quot; : &quot;4ee76418f3e1450f11000000&quot; }, which gives me org.springframework.data.mapping.model.MappingException: No mapping metadata found for java.lang.String. I don&#39;t think you can have it both ways","body":"You don&#39;t say what version you&#39;re using of Spring-data-mongodb.  I&#39;ve recently been bitten by the reverse of this when upgrading from 1.0.3 to 1.1.0, since they seem to have taken away this automatic conversion.  I was bitten because I&#39;d exported as JSON and then re-imported, leaving me with &quot;_id&quot; : { &quot;$id&quot; : &quot;4ee76418f3e1450f11000000&quot; }, which gives me org.springframework.data.mapping.model.MappingException: No mapping metadata found for java.lang.String. I don&#39;t think you can have it both ways"},{"owner":{"account_id":1923489,"reputation":3432,"user_id":1734454,"accept_rate":42,"display_name":"alex"},"score":0,"creation_date":1372926665,"post_id":14346028,"comment_id":25378663,"body_markdown":"It was Spring Data Mongodb 1.2.0","body":"It was Spring Data Mongodb 1.2.0"},{"owner":{"account_id":3848484,"reputation":2078,"user_id":3189213,"accept_rate":57,"display_name":"Poorna Subhash"},"score":0,"creation_date":1418279691,"post_id":14346028,"comment_id":43276996,"body_markdown":"I face similar issue. If I use same string in high level document, the comparison works. But If I put this in nested object, then it try to do ObjectId comparison. Very wierd. Otherwise also, the behavior should be same while inserting / querying. Must be a BUG.","body":"I face similar issue. If I use same string in high level document, the comparison works. But If I put this in nested object, then it try to do ObjectId comparison. Very wierd. Otherwise also, the behavior should be same while inserting / querying. Must be a BUG."}],"answers":[{"tags":[],"owner":{"account_id":1923489,"reputation":3432,"user_id":1734454,"accept_rate":42,"display_name":"alex"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1411453048,"creation_date":1358335372,"answer_id":14357231,"question_id":14346028,"body_markdown":"It seems to me the problem can be described like this: if you use String in your classes in place of an ObjectId, if you want to use those ids as references (no dbrefs) in other documents (and embedded documents), they are pushed as String (it&#39;s ok because they are Strings). It&#39;s fine because spring data can map them again to objectid, but it&#39;s not fine if you do a query like the one I mentioned; the field is converted to an objectid in the comparison (the $ne operator in this case) but is considered as a string in the embedded document. So, to wrap up, in my opinion the $ne operator in this case should consider the field a String.\r\n\r\nMy solution was to write a custom converter to store the String as an objectid in the documents where the id is a reference\r\n\r\n    public class VoteWriteConverter implements Converter&lt;Vote, DBObject&gt; {\r\n\r\n      @Override\r\n      public DBObject convert(Vote vote) {\r\n        DBObject dbo = new BasicDBObject();\r\n        dbo.put(&quot;userid&quot;, new ObjectId(vote.getUserid()));\r\n        dbo.put(&quot;value&quot;, vote.getValue());\r\n        return dbo;\r\n      }\r\n    }","title":"Spring data mongodb query converts String to ObjectId automatically","body":"<p>It seems to me the problem can be described like this: if you use String in your classes in place of an ObjectId, if you want to use those ids as references (no dbrefs) in other documents (and embedded documents), they are pushed as String (it's ok because they are Strings). It's fine because spring data can map them again to objectid, but it's not fine if you do a query like the one I mentioned; the field is converted to an objectid in the comparison (the $ne operator in this case) but is considered as a string in the embedded document. So, to wrap up, in my opinion the $ne operator in this case should consider the field a String.</p>\n\n<p>My solution was to write a custom converter to store the String as an objectid in the documents where the id is a reference</p>\n\n<pre><code>public class VoteWriteConverter implements Converter&lt;Vote, DBObject&gt; {\n\n  @Override\n  public DBObject convert(Vote vote) {\n    DBObject dbo = new BasicDBObject();\n    dbo.put(\"userid\", new ObjectId(vote.getUserid()));\n    dbo.put(\"value\", vote.getValue());\n    return dbo;\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":1923489,"reputation":3432,"user_id":1734454,"accept_rate":42,"display_name":"alex"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26603,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1667905070,"creation_date":1358280730,"question_id":14346028,"body_markdown":"The title might not be super clear, here the problem\r\n\r\nI&#39;m executing an update in this form:\r\n\r\n    db.poi.update({\r\n      _id: ObjectId(&quot;50f40cd052187a491707053b&quot;),\r\n      &quot;votes.userid&quot;: {\r\n        &quot;$ne&quot;: &quot;50f5460d5218fe9d1e2c7b4f&quot;\r\n      }\r\n    },\r\n    {\r\n      $push: {\r\n        votes: {\r\n          &quot;userid&quot;: &quot;50f5460d5218fe9d1e2c7b4f&quot;, \r\n          &quot;value&quot;: 1\r\n        }\r\n      },\r\n      $inc: { &quot;score&quot;:1 }\r\n    })\r\n\r\nTo insert a document in an array only if there isn&#39;t one with the same userid (workaround because unique indexes don&#39;t work on arrays). The code works fine from mongo console. From my application I&#39;m using this:\r\n\r\n    @Override\r\n\tpublic void vote(String id, Vote vote) {\r\n\t\tQuery query = new Query(Criteria.where(&quot;_id&quot;).is(id).and(&quot;votes.userid&quot;).ne(vote.getUserid()));\r\n\t\tUpdate update = new Update().inc(&quot;score&quot;, vote.getValue()).push(&quot;votes&quot;, vote);\r\n\t\tmongoOperations.updateFirst(query, update, Poi.class);\r\n\t}\r\n\r\nThis works fine if as &quot;userid&quot; I use a String that can&#39;t be a mongo ObjectId, but if I use the string in the example, the query executed translates like this (from mongosniff):\r\n\r\n    update  flags:0 q:{ _id: ObjectId(&#39;50f40cd052187a491707053b&#39;), votes.userid: { $ne: ObjectId(&#39;50f5460d5218fe9d1e2c7b4f&#39;) } } o:{ $inc: { score: 1 }, $push: { votes: { userid: &quot;50f5460d5218fe9d1e2c7b4f&quot;, value: 1 } } }\r\n\r\nThe string is now an Objectid. Is this a bug? BasicQuery do the same thing. The only other solution I see is to use ObjectId instead of String for all classes ids.\r\n\r\nAny thoughts?\r\n\r\n**UPDATE:**\r\n\r\nThis is the Vote class\r\n\r\n    public class Vote {\r\n      private String userid;\r\n      private int value;\r\n    }\r\n\r\nThis is the User class\r\n\r\n    @Document\r\n    public class User {\r\n\r\n      @Id\r\n      private String id;\r\n      private String username;\r\n    }\r\n\r\nThis is the class and mongo document where I&#39;m doing this update\r\n\r\n    @Document\r\n    public class MyClass {\r\n\r\n      @Id\r\n      private String id;\r\n      @Indexed\r\n      private String name;\r\n      int score\r\n      private Set&lt;Vote&gt;votes = new HashSet&lt;Vote&gt;();\r\n    }\r\n\r\nAs Json\r\n\r\n    {\r\n      &quot;_id&quot; : ObjectId(&quot;50f40cd052187a491707053b&quot;),\r\n      &quot;name&quot; : &quot;Test&quot;,\r\n      &quot;score&quot; : 12,\r\n      &quot;votes&quot; : [\r\n        {\r\n          &quot;userid&quot; : &quot;50f5460d5218fe9d1e2c7b4f&quot;,\r\n          &quot;value&quot; : 1\r\n        }\r\n      ]\r\n    }\r\n\r\nUserid in votes.userid is pushed as String, but the same String is compared as an ObjectId in the $ne","title":"Spring data mongodb query converts String to ObjectId automatically","body":"<p>The title might not be super clear, here the problem</p>\n\n<p>I'm executing an update in this form:</p>\n\n<pre><code>db.poi.update({\n  _id: ObjectId(\"50f40cd052187a491707053b\"),\n  \"votes.userid\": {\n    \"$ne\": \"50f5460d5218fe9d1e2c7b4f\"\n  }\n},\n{\n  $push: {\n    votes: {\n      \"userid\": \"50f5460d5218fe9d1e2c7b4f\", \n      \"value\": 1\n    }\n  },\n  $inc: { \"score\":1 }\n})\n</code></pre>\n\n<p>To insert a document in an array only if there isn't one with the same userid (workaround because unique indexes don't work on arrays). The code works fine from mongo console. From my application I'm using this:</p>\n\n<pre><code>@Override\npublic void vote(String id, Vote vote) {\n    Query query = new Query(Criteria.where(\"_id\").is(id).and(\"votes.userid\").ne(vote.getUserid()));\n    Update update = new Update().inc(\"score\", vote.getValue()).push(\"votes\", vote);\n    mongoOperations.updateFirst(query, update, Poi.class);\n}\n</code></pre>\n\n<p>This works fine if as \"userid\" I use a String that can't be a mongo ObjectId, but if I use the string in the example, the query executed translates like this (from mongosniff):</p>\n\n<pre><code>update  flags:0 q:{ _id: ObjectId('50f40cd052187a491707053b'), votes.userid: { $ne: ObjectId('50f5460d5218fe9d1e2c7b4f') } } o:{ $inc: { score: 1 }, $push: { votes: { userid: \"50f5460d5218fe9d1e2c7b4f\", value: 1 } } }\n</code></pre>\n\n<p>The string is now an Objectid. Is this a bug? BasicQuery do the same thing. The only other solution I see is to use ObjectId instead of String for all classes ids.</p>\n\n<p>Any thoughts?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>This is the Vote class</p>\n\n<pre><code>public class Vote {\n  private String userid;\n  private int value;\n}\n</code></pre>\n\n<p>This is the User class</p>\n\n<pre><code>@Document\npublic class User {\n\n  @Id\n  private String id;\n  private String username;\n}\n</code></pre>\n\n<p>This is the class and mongo document where I'm doing this update</p>\n\n<pre><code>@Document\npublic class MyClass {\n\n  @Id\n  private String id;\n  @Indexed\n  private String name;\n  int score\n  private Set&lt;Vote&gt;votes = new HashSet&lt;Vote&gt;();\n}\n</code></pre>\n\n<p>As Json</p>\n\n<pre><code>{\n  \"_id\" : ObjectId(\"50f40cd052187a491707053b\"),\n  \"name\" : \"Test\",\n  \"score\" : 12,\n  \"votes\" : [\n    {\n      \"userid\" : \"50f5460d5218fe9d1e2c7b4f\",\n      \"value\" : 1\n    }\n  ]\n}\n</code></pre>\n\n<p>Userid in votes.userid is pushed as String, but the same String is compared as an ObjectId in the $ne</p>\n"},{"tags":["java","velocity","xdocreport"],"answers":[{"comments":[{"owner":{"account_id":1161351,"reputation":325,"user_id":1140788,"accept_rate":75,"display_name":"martinixs"},"score":0,"creation_date":1489227986,"post_id":42719670,"comment_id":72586412,"body_markdown":"Thanks for your answer!","body":"Thanks for your answer!"}],"tags":[],"owner":{"account_id":10430546,"reputation":56,"user_id":7690499,"display_name":"Magomed Gamzatov"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1489152874,"creation_date":1489152874,"answer_id":42719670,"question_id":42272170,"body_markdown":"This is because you set FieldsMetadata to report two times.\r\nYou need to create one FieldsMetadata metadata = ixDocReport.createFieldsMetadata()  and add two image to it.\r\nFoe example:\r\n\r\n     FieldsMetadata metadata = new FieldsMetadata();\r\n     metadata.addFieldAsImage(&quot;chart1&quot;);\r\n     metadata.addFieldAsImage(&quot;chart2&quot;);\r\n     report.setFieldsMetadata(metadata);\r\n\r\n     IImageProvider logo = new FileImageProvider(new File(&quot;path/to/image1&quot;), true);\r\n     context.put(&quot;chart1&quot;, logo);\r\n\r\n     IImageProvider logo2 = new FileImageProvider(new File(&quot;path/to/image2&quot;), true);\r\n     context.put(&quot;chart2&quot;, logo2);","title":"XDocReport can&#39;t display two image in generated document","body":"<p>This is because you set FieldsMetadata to report two times.\nYou need to create one FieldsMetadata metadata = ixDocReport.createFieldsMetadata()  and add two image to it.\nFoe example:</p>\n\n<pre><code> FieldsMetadata metadata = new FieldsMetadata();\n metadata.addFieldAsImage(\"chart1\");\n metadata.addFieldAsImage(\"chart2\");\n report.setFieldsMetadata(metadata);\n\n IImageProvider logo = new FileImageProvider(new File(\"path/to/image1\"), true);\n context.put(\"chart1\", logo);\n\n IImageProvider logo2 = new FileImageProvider(new File(\"path/to/image2\"), true);\n context.put(\"chart2\", logo2);\n</code></pre>\n"}],"owner":{"account_id":1161351,"reputation":325,"user_id":1140788,"accept_rate":75,"display_name":"martinixs"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2613,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":42719670,"answer_count":1,"score":0,"last_activity_date":1667904808,"creation_date":1487243195,"question_id":42272170,"body_markdown":"I insert two image to template: &quot;logo&quot; and &quot;background&quot;\r\nBut only background image presented in template.\r\n\r\nI create ImageProdiver \r\n\r\n    private IImageProvider createImageProvider(IXDocReport ixDocReport, String fieldName, Blob image) {\r\n        FieldsMetadata metadata = ixDocReport.createFieldsMetadata();\r\n        metadata.addFieldAsImage( fieldName);\r\n        ixDocReport.setFieldsMetadata(metadata);\r\n        InputStream inputStream = null;\r\n\r\n        try {\r\n            inputStream = image.getBinaryStream();\r\n            IImageProvider logo = new ByteArrayImageProvider(inputStream);\r\n            logo.setUseImageSize(true);\r\n            logo.setResize(true);\r\n            inputStream.close();\r\n            return logo;\r\n        } catch (SQLException | IOException e) {\r\n            throw new GeneralException(&quot;Error reading logo&quot;);\r\n        } finally {\r\n            if(inputStream != null) {\r\n                IOUtils.closeQuietly(inputStream);\r\n            }\r\n        }\r\n    }\r\n\r\nCreate two Image provider\r\n\r\n    IImageProvider logo = createImageProdider(report, &quot;logo&quot;, blobimage));\r\n    IImageProvider background = createImageProdider(report, &quot;logo&quot;, blobimagebacground));\r\n\r\nand insert to context in builder\r\n\r\n    context = this.report.createContext();\r\n    context.put(&quot;logo&quot;, logo);\r\n    context.put(&quot;background&quot;, background);\r\n\r\nafter generate document, exist only background image.\r\n\r\nI do not understand why there is this problem, why only one picture is displayed.\r\n\r\nHow to solve this problem?","title":"XDocReport can&#39;t display two image in generated document","body":"<p>I insert two image to template: \"logo\" and \"background\"\nBut only background image presented in template.</p>\n\n<p>I create ImageProdiver </p>\n\n<pre><code>private IImageProvider createImageProvider(IXDocReport ixDocReport, String fieldName, Blob image) {\n    FieldsMetadata metadata = ixDocReport.createFieldsMetadata();\n    metadata.addFieldAsImage( fieldName);\n    ixDocReport.setFieldsMetadata(metadata);\n    InputStream inputStream = null;\n\n    try {\n        inputStream = image.getBinaryStream();\n        IImageProvider logo = new ByteArrayImageProvider(inputStream);\n        logo.setUseImageSize(true);\n        logo.setResize(true);\n        inputStream.close();\n        return logo;\n    } catch (SQLException | IOException e) {\n        throw new GeneralException(\"Error reading logo\");\n    } finally {\n        if(inputStream != null) {\n            IOUtils.closeQuietly(inputStream);\n        }\n    }\n}\n</code></pre>\n\n<p>Create two Image provider</p>\n\n<pre><code>IImageProvider logo = createImageProdider(report, \"logo\", blobimage));\nIImageProvider background = createImageProdider(report, \"logo\", blobimagebacground));\n</code></pre>\n\n<p>and insert to context in builder</p>\n\n<pre><code>context = this.report.createContext();\ncontext.put(\"logo\", logo);\ncontext.put(\"background\", background);\n</code></pre>\n\n<p>after generate document, exist only background image.</p>\n\n<p>I do not understand why there is this problem, why only one picture is displayed.</p>\n\n<p>How to solve this problem?</p>\n"},{"tags":["java","floating-point","double"],"comments":[{"owner":{"account_id":26774791,"reputation":826,"user_id":20370596,"display_name":"Christoph Dahlen"},"score":2,"creation_date":1667902067,"post_id":74358694,"comment_id":131272872,"body_markdown":"But these are two different numbers then. If you want to *display* a Double with less fraction digits, use String.format(&quot;%.3f&quot;, myLongNumber).","body":"But these are two different numbers then. If you want to <i>display</i> a Double with less fraction digits, use String.format(&quot;%.3f&quot;, myLongNumber)."},{"owner":{"account_id":20664898,"reputation":155,"user_id":15172005,"display_name":"lLauriix"},"score":1,"creation_date":1667902270,"post_id":74358694,"comment_id":131272950,"body_markdown":"@ChristophDahlen that makes sense! If you answer the question with that same message i will be happy to mark it as resolved. Thank you!","body":"@ChristophDahlen that makes sense! If you answer the question with that same message i will be happy to mark it as resolved. Thank you!"},{"owner":{"account_id":4865492,"reputation":45981,"user_id":3923896,"accept_rate":69,"display_name":"Steve Summit"},"score":1,"creation_date":1667908381,"post_id":74358694,"comment_id":131275107,"body_markdown":"One thing to note is that after you do this, you will *not* have a value of exactly 50.1234.  It will probably be something like 50.12339999999999.","body":"One thing to note is that after you do this, you will <i>not</i> have a value of exactly 50.1234.  It will probably be something like 50.12339999999999."}],"answers":[{"comments":[{"owner":{"account_id":20664898,"reputation":155,"user_id":15172005,"display_name":"lLauriix"},"score":0,"creation_date":1667902791,"post_id":74359044,"comment_id":131273154,"body_markdown":"Thank you! I really appreciate the many options you gave in your answer.","body":"Thank you! I really appreciate the many options you gave in your answer."}],"tags":[],"owner":{"account_id":5083689,"reputation":1006,"user_id":4079056,"display_name":"sanurah"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667902553,"creation_date":1667902553,"answer_id":74359044,"question_id":74358694,"body_markdown":"Please check below options\r\n\r\n    import java.math.BigDecimal;\r\n    import java.math.RoundingMode;\r\n    import java.util.Locale;\r\n    import org.apache.commons.math3.util.Precision;\r\n    \r\n    class DoubleTrimmer {\r\n        public static void main(String[] args) {\r\n    \r\n            Double myLongNumber = 50.12345678998658576546;\r\n    \r\n            //Option1. just trim the number\r\n            Double trimmedNumber  = Double.valueOf(String.format(Locale.ENGLISH, &quot;%.4f&quot;, myLongNumber));\r\n            System.out.println(trimmedNumber);\r\n    \r\n            //Option2. Round the number using BigDecimal\r\n            trimmedNumber = round(myLongNumber, 4);\r\n            System.out.println(trimmedNumber);\r\n    \r\n            //Option3. Round the number using Apache commons math\r\n            trimmedNumber = Precision.round(myLongNumber, 4);\r\n            System.out.println(trimmedNumber);\r\n        }\r\n    \r\n        public static double round(double value, int places) {\r\n            if (places &lt; 0) throw new IllegalArgumentException();\r\n    \r\n            BigDecimal bd = BigDecimal.valueOf(value);\r\n            bd = bd.setScale(places, RoundingMode.HALF_UP);\r\n            return bd.doubleValue();\r\n        }\r\n    }","title":"How to REDUCE decimal values from a value of type &#39;double&#39; in Java","body":"<p>Please check below options</p>\n<pre><code>import java.math.BigDecimal;\nimport java.math.RoundingMode;\nimport java.util.Locale;\nimport org.apache.commons.math3.util.Precision;\n\nclass DoubleTrimmer {\n    public static void main(String[] args) {\n\n        Double myLongNumber = 50.12345678998658576546;\n\n        //Option1. just trim the number\n        Double trimmedNumber  = Double.valueOf(String.format(Locale.ENGLISH, &quot;%.4f&quot;, myLongNumber));\n        System.out.println(trimmedNumber);\n\n        //Option2. Round the number using BigDecimal\n        trimmedNumber = round(myLongNumber, 4);\n        System.out.println(trimmedNumber);\n\n        //Option3. Round the number using Apache commons math\n        trimmedNumber = Precision.round(myLongNumber, 4);\n        System.out.println(trimmedNumber);\n    }\n\n    public static double round(double value, int places) {\n        if (places &lt; 0) throw new IllegalArgumentException();\n\n        BigDecimal bd = BigDecimal.valueOf(value);\n        bd = bd.setScale(places, RoundingMode.HALF_UP);\n        return bd.doubleValue();\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2802349,"reputation":146437,"user_id":2410359,"accept_rate":87,"display_name":"chux - Reinstate Monica"},"score":0,"creation_date":1667914807,"post_id":74359060,"comment_id":131277630,"body_markdown":"This apporach fails to round properly when 1) the product `myLongNumber * 1E4`  exceeds `double` range 2) sometimes when product is inexact and near xxx.5.  Not a robust solution.","body":"This apporach fails to round properly when 1) the product <code>myLongNumber * 1E4</code>  exceeds <code>double</code> range 2) sometimes when product is inexact and near xxx.5.  Not a robust solution."}],"tags":[],"owner":{"account_id":26774791,"reputation":826,"user_id":20370596,"display_name":"Christoph Dahlen"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1667902615,"creation_date":1667902615,"answer_id":74359060,"question_id":74358694,"body_markdown":"If you really want to *change* that number, you can do something like\r\n\r\n```java\r\nDouble myNotSoLongNumber = Math.round(myLongNumber * 1E4) / 1E4;\r\n```\r\n\r\nIf you want to display a Double with less fraction digits, use \r\n\r\n```java\r\nString myLongNumberAsString = String.format(&quot;%.4f&quot;, myLongNumber);\r\n```\r\n\r\n","title":"How to REDUCE decimal values from a value of type &#39;double&#39; in Java","body":"<p>If you really want to <em>change</em> that number, you can do something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>Double myNotSoLongNumber = Math.round(myLongNumber * 1E4) / 1E4;\n</code></pre>\n<p>If you want to display a Double with less fraction digits, use</p>\n<pre class=\"lang-java prettyprint-override\"><code>String myLongNumberAsString = String.format(&quot;%.4f&quot;, myLongNumber);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":16397024,"reputation":1,"user_id":11844224,"display_name":"Andrew"},"score":0,"creation_date":1667903697,"post_id":74359148,"comment_id":131273475,"body_markdown":"50.12345678998658576546 rounded to 6 decimal places is 50.1234, not 50.1235. This rounding uses the round to nearest even rule, which is the universally accepted rule for rounding.  Even if you are simply truncating, the result is still 50.1234.","body":"50.12345678998658576546 rounded to 6 decimal places is 50.1234, not 50.1235. This rounding uses the round to nearest even rule, which is the universally accepted rule for rounding.  Even if you are simply truncating, the result is still 50.1234."},{"owner":{"account_id":10977881,"reputation":79,"user_id":8066029,"display_name":"johnson"},"score":0,"creation_date":1667904806,"post_id":74359148,"comment_id":131273829,"body_markdown":"do you know how to fix this","body":"do you know how to fix this"}],"tags":[],"owner":{"account_id":10977881,"reputation":79,"user_id":8066029,"display_name":"johnson"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667904461,"creation_date":1667903097,"answer_id":74359148,"question_id":74358694,"body_markdown":"Use BigDecimal package\r\n  \r\n    import java.math.BigDecimal;\r\n    public class ReduceDecimalNumbers {\r\n        public static void main(String args[]){\r\n            double myLongNumber = 50.12345678998658576546;\r\n            int decimalsToConsider = 4;\r\n            BigDecimal bigDecimal = new BigDecimal(myLongNumber );\r\n\r\n            bigDecimal = new BigDecimal(myLongNumber );\r\n            BigDecimal roundedValueWithDivideLogic = bigDecimal.divide(BigDecimal.ONE,decimalsToConsider,BigDecimal.ROUND_HALF_UP);\r\n            System.out.println(&quot;Rounded value with Dividing by one = &quot;+roundedValueWithDivideLogic);\r\n    \r\n        }\r\n    }\r\noutput:\r\n\r\n       Rounded value with Dividing by one = 50.1235\r\n\r\nor you can try this\r\n\r\n        public class round{\r\n           public static void main(String args[]){\r\n        \r\n           double myLongNumber = 50.12345678998658576546;\r\n           double roundOff = Math.round(myLongNumber *1E4)/1E4;\r\n        \r\n           System.out.println(String.format(&quot;%.4f&quot;, roundOff));   //%.4f defines decimal precision you want\r\n          }\r\n       }\r\n\r\noutput:\r\n   \r\n \r\n\r\n    50.1235","title":"How to REDUCE decimal values from a value of type &#39;double&#39; in Java","body":"<p>Use BigDecimal package</p>\n<pre><code>import java.math.BigDecimal;\npublic class ReduceDecimalNumbers {\n    public static void main(String args[]){\n        double myLongNumber = 50.12345678998658576546;\n        int decimalsToConsider = 4;\n        BigDecimal bigDecimal = new BigDecimal(myLongNumber );\n\n        bigDecimal = new BigDecimal(myLongNumber );\n        BigDecimal roundedValueWithDivideLogic = bigDecimal.divide(BigDecimal.ONE,decimalsToConsider,BigDecimal.ROUND_HALF_UP);\n        System.out.println(&quot;Rounded value with Dividing by one = &quot;+roundedValueWithDivideLogic);\n\n    }\n}\n</code></pre>\n<p>output:</p>\n<pre><code>   Rounded value with Dividing by one = 50.1235\n</code></pre>\n<p>or you can try this</p>\n<pre><code>    public class round{\n       public static void main(String args[]){\n    \n       double myLongNumber = 50.12345678998658576546;\n       double roundOff = Math.round(myLongNumber *1E4)/1E4;\n    \n       System.out.println(String.format(&quot;%.4f&quot;, roundOff));   //%.4f defines decimal precision you want\n      }\n   }\n</code></pre>\n<p>output:</p>\n<pre><code>50.1235\n</code></pre>\n"}],"owner":{"account_id":20664898,"reputation":155,"user_id":15172005,"display_name":"lLauriix"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74359060,"answer_count":3,"score":0,"last_activity_date":1667904461,"creation_date":1667901098,"question_id":74358694,"body_markdown":"This is probably a really simple question but, is there a simple way to go from\r\n```\r\nDouble myLongNumber = 50.12345678998658576546\r\n```\r\nto\r\n```\r\nDouble myLongNumber = 50.1234\r\n```\r\n?\r\n\r\nI just want to reduce the number of decimal digits, not remove them all.\r\n","title":"How to REDUCE decimal values from a value of type &#39;double&#39; in Java","body":"<p>This is probably a really simple question but, is there a simple way to go from</p>\n<pre><code>Double myLongNumber = 50.12345678998658576546\n</code></pre>\n<p>to</p>\n<pre><code>Double myLongNumber = 50.1234\n</code></pre>\n<p>?</p>\n<p>I just want to reduce the number of decimal digits, not remove them all.</p>\n"},{"tags":["java","constructor","this"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":7,"creation_date":1472550225,"post_id":39223996,"comment_id":65785609,"body_markdown":"`void Demo()` - that isn&#39;t declaring a constructor... it&#39;s declaring a void method.","body":"<code>void Demo()</code> - that isn&#39;t declaring a constructor... it&#39;s declaring a void method."},{"owner":{"account_id":6476776,"reputation":81,"user_id":5653616,"accept_rate":20,"display_name":"Pravin Kamble"},"score":0,"creation_date":1472550749,"post_id":39223996,"comment_id":65785983,"body_markdown":"got it !! silly mistake .. thanks :)","body":"got it !! silly mistake .. thanks :)"}],"answers":[{"comments":[{"owner":{"account_id":6476776,"reputation":81,"user_id":5653616,"accept_rate":20,"display_name":"Pravin Kamble"},"score":0,"creation_date":1472550758,"post_id":39224135,"comment_id":65785987,"body_markdown":"got it !! silly mistake .. thanks :)","body":"got it !! silly mistake .. thanks :)"},{"owner":{"account_id":3063678,"reputation":1961,"user_id":2595847,"accept_rate":57,"display_name":"Thomas Stubbe"},"score":0,"creation_date":1514470943,"post_id":39224135,"comment_id":82986471,"body_markdown":"This does not not answer the question, even the link to the other topic. It only explains the super()","body":"This does not not answer the question, even the link to the other topic. It only explains the super()"}],"tags":[],"owner":{"account_id":51589,"reputation":17531,"user_id":154186,"accept_rate":97,"display_name":"Russell"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1472550438,"creation_date":1472550438,"answer_id":39224135,"question_id":39223996,"body_markdown":"To specifically answer your question, this or super needs to be the first call to ensure the base class has been setup correctly.\r\nhttps://stackoverflow.com/a/1168356/154186\r\n\r\nTo solve your error above, remove the void type from the function call. e.g.:\r\n\r\n    Demo(int x) {\r\n      this.x = x;\r\n    }\r\n    Demo() {\r\n      this(50);\r\n    }","title":"Why call to &quot; this &quot; must be first statement in constructor?","body":"<p>To specifically answer your question, this or super needs to be the first call to ensure the base class has been setup correctly.\n<a href=\"https://stackoverflow.com/a/1168356/154186\">https://stackoverflow.com/a/1168356/154186</a></p>\n\n<p>To solve your error above, remove the void type from the function call. e.g.:</p>\n\n<pre><code>Demo(int x) {\n  this.x = x;\n}\nDemo() {\n  this(50);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6476776,"reputation":81,"user_id":5653616,"accept_rate":20,"display_name":"Pravin Kamble"},"score":0,"creation_date":1472553204,"post_id":39224185,"comment_id":65787669,"body_markdown":"Yup !! its working .. thanks for reply .","body":"Yup !! its working .. thanks for reply ."}],"tags":[],"owner":{"account_id":7611631,"reputation":370,"user_id":5772296,"accept_rate":0,"display_name":"aru007"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1472550560,"creation_date":1472550560,"answer_id":39224185,"question_id":39223996,"body_markdown":"You should remove void.Constructor must have no explicit return type.\r\nThen it will work fine.\r\n","title":"Why call to &quot; this &quot; must be first statement in constructor?","body":"<p>You should remove void.Constructor must have no explicit return type.\nThen it will work fine.</p>\n"},{"comments":[{"owner":{"account_id":6476776,"reputation":81,"user_id":5653616,"accept_rate":20,"display_name":"Pravin Kamble"},"score":0,"creation_date":1472553177,"post_id":39224232,"comment_id":65787647,"body_markdown":"Perfect .. thanks for reply :)","body":"Perfect .. thanks for reply :)"}],"tags":[],"owner":{"account_id":72628,"reputation":32475,"user_id":209629,"accept_rate":58,"display_name":"vz0"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1472550656,"creation_date":1472550656,"answer_id":39224232,"question_id":39223996,"body_markdown":"Remove void from Demo constructors\r\n\r\n    class Demo\r\n    {\r\n        int x=23;\r\n    \r\n        Demo()\r\n        {\r\n            this(55);\r\n        }\r\n        Demo(int x)\r\n        {\r\n            this.x=x;\r\n            System.out.println(&quot;Inside Parameterise Constructor 2&quot;+&quot;\\n Value of x:&quot;+x);     \r\n        }\r\n    }","title":"Why call to &quot; this &quot; must be first statement in constructor?","body":"<p>Remove void from Demo constructors</p>\n\n<pre><code>class Demo\n{\n    int x=23;\n\n    Demo()\n    {\n        this(55);\n    }\n    Demo(int x)\n    {\n        this.x=x;\n        System.out.println(\"Inside Parameterise Constructor 2\"+\"\\n Value of x:\"+x);     \n    }\n}\n</code></pre>\n"}],"owner":{"account_id":6476776,"reputation":81,"user_id":5653616,"accept_rate":20,"display_name":"Pravin Kamble"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2466,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"closed_date":1472558280,"answer_count":3,"score":3,"last_activity_date":1667903884,"creation_date":1472550086,"question_id":39223996,"body_markdown":"I am trying to execute this below code sample to understand why call to &quot; this &quot;  must be first statement in constructor ?? I had read lot of About it and I understand Why this is so !! \r\n\r\nso I write the below simple program But Still showing me the same Error even I use &#39;this&#39; as a First Statement in my Program .\r\n\r\n    import java.io.*;\r\n    import java.lang.*;\r\n    \r\n    class Demo\r\n    {\r\n        int x=23;\r\n    \r\n        Demo()\r\n        {\r\n    \t    this(55);\r\n        }\r\n    \r\n        Demo(int x)\r\n        {\r\n    \t    this.x=x;\r\n    \t    System.out.println(&quot;Inside Parameterise Constructor 2&quot;+&quot;\\n Value of x:&quot;+x);    \t\r\n        }\r\n        \r\n    }\r\n    \r\n    class ThisDemo\r\n    {\r\n        public static void main(String []args)\r\n        {\r\n    \t    Demo obj = new Demo();\r\n        }\r\n    }\r\n     \r\n\r\n \r\n\r\n","title":"Why call to &quot; this &quot; must be first statement in constructor?","body":"<p>I am trying to execute this below code sample to understand why call to &quot; this &quot;  must be first statement in constructor ?? I had read lot of About it and I understand Why this is so !!</p>\n<p>so I write the below simple program But Still showing me the same Error even I use 'this' as a First Statement in my Program .</p>\n<pre><code>import java.io.*;\nimport java.lang.*;\n\nclass Demo\n{\n    int x=23;\n\n    Demo()\n    {\n        this(55);\n    }\n\n    Demo(int x)\n    {\n        this.x=x;\n        System.out.println(&quot;Inside Parameterise Constructor 2&quot;+&quot;\\n Value of x:&quot;+x);     \n    }\n    \n}\n\nclass ThisDemo\n{\n    public static void main(String []args)\n    {\n        Demo obj = new Demo();\n    }\n}\n \n</code></pre>\n"},{"tags":["java","string","performance","hashmap","hashset"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1667898674,"post_id":74358075,"comment_id":131271580,"body_markdown":"Have you considered a wrapper class containing the two string fields?","body":"Have you considered a wrapper class containing the two string fields?"}],"answers":[{"tags":[],"owner":{"account_id":26844832,"reputation":26,"user_id":20430742,"display_name":"Divyansh Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667903609,"creation_date":1667903609,"answer_id":74359252,"question_id":74358075,"body_markdown":"There is going to be no significant difference between **HashSet** and **HashMap** because HashSet internally uses HashMap to store data. \r\n\r\nYour 2nd approach makes no sense to me because you are storing a Set inside a Map just to check if it contains a string. \r\n\r\n`contains()` method of HashSet has a time complexity of O(1) same as `containsKey()` of HashMap.\r\n\r\nSo use a HashSet i.e. your approach 1.\r\n\r\nRead [this answer.][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/42530927/20430742","title":"Which is faster? Concat 2 string then hashset contain or doing 2 hashset contains","body":"<p>There is going to be no significant difference between <strong>HashSet</strong> and <strong>HashMap</strong> because HashSet internally uses HashMap to store data.</p>\n<p>Your 2nd approach makes no sense to me because you are storing a Set inside a Map just to check if it contains a string.</p>\n<p><code>contains()</code> method of HashSet has a time complexity of O(1) same as <code>containsKey()</code> of HashMap.</p>\n<p>So use a HashSet i.e. your approach 1.</p>\n<p>Read <a href=\"https://stackoverflow.com/a/42530927/20430742\">this answer.</a></p>\n"}],"owner":{"account_id":4068985,"reputation":1,"user_id":3342825,"display_name":"user3342825"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1667903609,"creation_date":1667898164,"question_id":74358075,"body_markdown":"I&#39;m writing a high throughput java application and need your help settle a debate.\r\nThe application process strings at a very high frequency and I need to be able to check if the input contains a certain string.\r\n\r\nThe string is made up of two parts, part 1 and part 2. The two parts are concatenated with a space character.\r\n\r\n```\r\nvar data = string1 + &quot; &quot; + string2;\r\n``` \r\n\r\nTo check if the input belong to my list, I have two approaches:\r\n\r\n#### Approach 1:\r\n```\r\nSet&lt;String&gt; mylist;\r\n\r\n...\r\n\r\nvoid boolean isThere(String part1, String2 part2) {\r\n   return mylist.contains(part1 + &quot; &quot; + part2);\r\n}\r\n```\r\n\r\n#### Approach 2:\r\n```\r\n\r\nMap&lt;String,Set&lt;String&gt;&gt; mylist;\r\n\r\nvoid boolean isThere(String part1, String2 part2) {\r\n   var partA = mylist.get(part1);\r\n   if (partA != null) {\r\n      return partA.contains(part2);\r\n   }\r\n   return false;\r\n}\r\n\r\n```\r\n\r\nThe nature of the string parts are short-ish in nature, around 2 to 50 characters each.\r\n\r\nDid some benchmarking with some mixed outcomes.","title":"Which is faster? Concat 2 string then hashset contain or doing 2 hashset contains","body":"<p>I'm writing a high throughput java application and need your help settle a debate.\nThe application process strings at a very high frequency and I need to be able to check if the input contains a certain string.</p>\n<p>The string is made up of two parts, part 1 and part 2. The two parts are concatenated with a space character.</p>\n<pre><code>var data = string1 + &quot; &quot; + string2;\n</code></pre>\n<p>To check if the input belong to my list, I have two approaches:</p>\n<h4>Approach 1:</h4>\n<pre><code>Set&lt;String&gt; mylist;\n\n...\n\nvoid boolean isThere(String part1, String2 part2) {\n   return mylist.contains(part1 + &quot; &quot; + part2);\n}\n</code></pre>\n<h4>Approach 2:</h4>\n<pre><code>\nMap&lt;String,Set&lt;String&gt;&gt; mylist;\n\nvoid boolean isThere(String part1, String2 part2) {\n   var partA = mylist.get(part1);\n   if (partA != null) {\n      return partA.contains(part2);\n   }\n   return false;\n}\n\n</code></pre>\n<p>The nature of the string parts are short-ish in nature, around 2 to 50 characters each.</p>\n<p>Did some benchmarking with some mixed outcomes.</p>\n"},{"tags":["java","security","xss","sanitization","owasp"],"comments":[{"owner":{"account_id":21746,"reputation":646279,"user_id":53114,"accept_rate":45,"display_name":"Gumbo"},"score":0,"creation_date":1348464267,"post_id":12558471,"comment_id":16917186,"body_markdown":"Do you apply the encoding before inserting it into the database or before printing it out in HTML? Because for HTML encoding, you would only do the latter.","body":"Do you apply the encoding before inserting it into the database or before printing it out in HTML? Because for HTML encoding, you would only do the latter."},{"owner":{"account_id":195439,"reputation":60926,"user_id":438319,"accept_rate":73,"display_name":"ams"},"score":0,"creation_date":1348465544,"post_id":12558471,"comment_id":16917454,"body_markdown":"I am applying the encoding before inserting to the database. why write text to the db that has illegal characters and tags?","body":"I am applying the encoding before inserting to the database. why write text to the db that has illegal characters and tags?"},{"owner":{"account_id":21746,"reputation":646279,"user_id":53114,"accept_rate":45,"display_name":"Gumbo"},"score":1,"creation_date":1348465599,"post_id":12558471,"comment_id":16917462,"body_markdown":"Because they are only illegal for HTML and (probably) not for SQL.","body":"Because they are only illegal for HTML and (probably) not for SQL."}],"answers":[{"tags":[],"owner":{"account_id":75641,"reputation":3178,"user_id":216911,"display_name":"sstendal"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1348695076,"creation_date":1348695076,"answer_id":12610759,"question_id":12558471,"body_markdown":"The danger in XSS is that one user may insert html code in his input data that you later inserts in a web page that is sent to another user.\r\n\r\nThere are in principle two strategies you can follow if you want to protect against this. You can either remove all dangerous characters from user input when they enter your system or you can html-encode the dangerous characters when you later on write them back to the browser. \r\n\r\nExample of the first strategy:\r\n\r\nUser enter data (with html code)\r\n\r\n 1. Server remove all dangerous characters\r\n 2. Modified data is stored in database\r\n 3. Some time later, server reads modified data from database\r\n 4. Server inserts modified data in a web page to another user\r\n\r\nExample of second strategy:\r\n\r\n 1. User enter data (with html code)\r\n 2. Unmodified data, with dangerous characters, is stored in database\r\n 3. Some time later, server reads unmodified data from database\r\n 4. Server html-encodes dangerous data and insert them into a web page to another user\r\n\r\nThe first strategy is simpler, since you usually reads data less often that you use them. However, it is also more difficult because it potentially destroys the data. It is particulary difficult if you needs the data for something other than sending them back to the browser later on (like using an email address to actually send an email). It makes it more difficult to i.e. make a search in the database, include data in an pdf report, insert data in an email and so on. \r\n\r\nThe other strategy has the advantage of not destroying the input data, so you have a greater freedom in how you want to use the data later on. However, it may be more difficult to actually check that you html-encode all user submitted data that is sent to the browser. A solution to your particular problem would be to html-encode the email address when (or if) you ever put that email address on a web page.\r\n\r\nThe XSS problem is an example of a more general problem that arise when you mix user submitted data and control code. SQL injection is another example of the same problem. The problem is that the user submitted data is interpreted as instructions and not data. A third, less well known example is if you mix user submitted data in an email. The user submitted data may contain strings that the email server interprets as instructions. The &quot;dangerous character&quot; in this scenario is a line break followed by &quot;From:&quot;.\r\n\r\nIt would be impossible to validate all input data against all possible control characters or sequences of characters that may in some way be interpreted as instructions in some potential application in the future. The only permanent solution to this is to actually sanitize all data that is potentially unsafe when you actually use that data.","title":"How to allow specific characters with OWASP HTML Sanitizer?","body":"<p>The danger in XSS is that one user may insert html code in his input data that you later inserts in a web page that is sent to another user.</p>\n\n<p>There are in principle two strategies you can follow if you want to protect against this. You can either remove all dangerous characters from user input when they enter your system or you can html-encode the dangerous characters when you later on write them back to the browser. </p>\n\n<p>Example of the first strategy:</p>\n\n<p>User enter data (with html code)</p>\n\n<ol>\n<li>Server remove all dangerous characters</li>\n<li>Modified data is stored in database</li>\n<li>Some time later, server reads modified data from database</li>\n<li>Server inserts modified data in a web page to another user</li>\n</ol>\n\n<p>Example of second strategy:</p>\n\n<ol>\n<li>User enter data (with html code)</li>\n<li>Unmodified data, with dangerous characters, is stored in database</li>\n<li>Some time later, server reads unmodified data from database</li>\n<li>Server html-encodes dangerous data and insert them into a web page to another user</li>\n</ol>\n\n<p>The first strategy is simpler, since you usually reads data less often that you use them. However, it is also more difficult because it potentially destroys the data. It is particulary difficult if you needs the data for something other than sending them back to the browser later on (like using an email address to actually send an email). It makes it more difficult to i.e. make a search in the database, include data in an pdf report, insert data in an email and so on. </p>\n\n<p>The other strategy has the advantage of not destroying the input data, so you have a greater freedom in how you want to use the data later on. However, it may be more difficult to actually check that you html-encode all user submitted data that is sent to the browser. A solution to your particular problem would be to html-encode the email address when (or if) you ever put that email address on a web page.</p>\n\n<p>The XSS problem is an example of a more general problem that arise when you mix user submitted data and control code. SQL injection is another example of the same problem. The problem is that the user submitted data is interpreted as instructions and not data. A third, less well known example is if you mix user submitted data in an email. The user submitted data may contain strings that the email server interprets as instructions. The \"dangerous character\" in this scenario is a line break followed by \"From:\".</p>\n\n<p>It would be impossible to validate all input data against all possible control characters or sequences of characters that may in some way be interpreted as instructions in some potential application in the future. The only permanent solution to this is to actually sanitize all data that is potentially unsafe when you actually use that data.</p>\n"},{"comments":[{"owner":{"account_id":195439,"reputation":60926,"user_id":438319,"accept_rate":73,"display_name":"ams"},"score":0,"creation_date":1349101385,"post_id":12621222,"comment_id":17104998,"body_markdown":"I have a Rich text areas in my app where users can type comments and you get the typical things such as &quot;Jim likes Joe&#39;s car&#39; or something like that, a while list approach would allow &#39; as a valid character.","body":"I have a Rich text areas in my app where users can type comments and you get the typical things such as &quot;Jim likes Joe&#39;s car&#39; or something like that, a while list approach would allow &#39; as a valid character."}],"tags":[],"owner":{"account_id":400792,"reputation":926,"user_id":766969,"accept_rate":40,"display_name":"bsimic"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1348748352,"creation_date":1348748352,"answer_id":12621222,"question_id":12558471,"body_markdown":"To be honest you should really be doing a whitelist against all user supplied input. If it&#39;s an email address, just use the OWASP ESAPI or something to validate the input against their Validator and email regular expressions. \r\n\r\nIf the input passes the whitelist, you should go ahead and store it in the DB. When displaying the text back to a user, you should always HTML encode it. \r\n\r\nYour blacklist approach is not recommended by OWASP and could be bypassed by someone who is committed to attacking your users. ","title":"How to allow specific characters with OWASP HTML Sanitizer?","body":"<p>To be honest you should really be doing a whitelist against all user supplied input. If it's an email address, just use the OWASP ESAPI or something to validate the input against their Validator and email regular expressions. </p>\n\n<p>If the input passes the whitelist, you should go ahead and store it in the DB. When displaying the text back to a user, you should always HTML encode it. </p>\n\n<p>Your blacklist approach is not recommended by OWASP and could be bypassed by someone who is committed to attacking your users. </p>\n"},{"tags":[],"owner":{"account_id":5343329,"reputation":41,"user_id":4259592,"display_name":"Mahendra"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1416196978,"creation_date":1416193346,"answer_id":26964867,"question_id":12558471,"body_markdown":"You may want to use ESAPI API to filter specific characters. Although if you like to allow specific HTML element or attribute you can use following allowElements and allowAttributes. \r\n\r\n\r\n// Define the policy.\r\n\r\n    Function&lt;HtmlStreamEventReceiver, HtmlSanitizer.Policy&gt; policy\r\n         = new HtmlPolicyBuilder()\r\n             .allowElements(&quot;a&quot;, &quot;p&quot;)\r\n             .allowAttributes(&quot;href&quot;).onElements(&quot;a&quot;)\r\n             .toFactory();\r\n    \r\n     // Sanitize your output.\r\n     HtmlSanitizer.sanitize(myHtml, policy.apply(myHtmlStreamRenderer));","title":"How to allow specific characters with OWASP HTML Sanitizer?","body":"<p>You may want to use ESAPI API to filter specific characters. Although if you like to allow specific HTML element or attribute you can use following allowElements and allowAttributes. </p>\n\n<p>// Define the policy.</p>\n\n<pre><code>Function&lt;HtmlStreamEventReceiver, HtmlSanitizer.Policy&gt; policy\n     = new HtmlPolicyBuilder()\n         .allowElements(\"a\", \"p\")\n         .allowAttributes(\"href\").onElements(\"a\")\n         .toFactory();\n\n // Sanitize your output.\n HtmlSanitizer.sanitize(myHtml, policy.apply(myHtmlStreamRenderer));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":330065,"reputation":101,"user_id":653958,"display_name":"RickTi"},"score":0,"creation_date":1575570236,"post_id":55234097,"comment_id":104620043,"body_markdown":"This was helpful to me, and I don&#39;t think I have a bad design.  I need to allow users to create HTML email templates with embedded variables like &quot;Hello ${user.lastName}&quot;, and the brackets were getting escaped.  Tacking on .replace(&quot;%7b&quot;, &quot;{&quot;).replace(&quot;%7d&quot;, &quot;}&quot;) got my emails working again.","body":"This was helpful to me, and I don&#39;t think I have a bad design.  I need to allow users to create HTML email templates with embedded variables like &quot;Hello ${user.lastName}&quot;, and the brackets were getting escaped.  Tacking on .replace(&quot;%7b&quot;, &quot;{&quot;).replace(&quot;%7d&quot;, &quot;}&quot;) got my emails working again."},{"owner":{"account_id":1591496,"reputation":1127,"user_id":1474729,"display_name":"Ghurdyl"},"score":0,"creation_date":1696252992,"post_id":55234097,"comment_id":136125541,"body_markdown":"Keep in mind that this `replace(&quot;&amp;#64;&quot;, &quot;@&quot;)` will also replace `&amp;#64;` of the original input into &quot;@&quot;. While probably harmless for a &#39;@&#39;, it becomes more dangerous if you apply the same principle for a `&amp;lt;` One way to dodge this is to `replace(&quot;&amp;lt;&quot;, &quot;&lt;&quot;)` then `sanitize` then `replace(&quot;&amp;lt;&quot;, &quot;&lt;&quot;)`","body":"Keep in mind that this <code>replace(&quot;&amp;#64;&quot;, &quot;@&quot;)</code> will also replace <code>&amp;#64;</code> of the original input into &quot;@&quot;. While probably harmless for a &#39;@&#39;, it becomes more dangerous if you apply the same principle for a <code>&amp;lt;</code> One way to dodge this is to <code>replace(&quot;&amp;lt;&quot;, &quot;&lt;&quot;)</code> then <code>sanitize</code> then <code>replace(&quot;&amp;lt;&quot;, &quot;&lt;&quot;)</code>"}],"tags":[],"owner":{"account_id":3546655,"reputation":567,"user_id":2962455,"display_name":"Maciej Skrzypiski"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1552972739,"creation_date":1552972739,"answer_id":55234097,"question_id":12558471,"body_markdown":"I know I am answering question after 7 years, but maybe it will be useful for someone.\r\nSo, basically I agree with you guys, we should not allow specific character for security reasons (you covered this topic, thanks). \r\nHowever I was working on legacy internal project which requried escaping html characters but &quot;@&quot; for reason I cannot tell (but it does not matter). My workaround for this was simple:\r\n\r\n    private static final PolicyFactory PLAIN_TEXT_SANITIZER_POLICY = new HtmlPolicyBuilder().toFactory();\r\n\r\n\r\n\tpublic static String toString(Object stringValue) {\r\n\t\tif (stringValue != null &amp;&amp; stringValue.getClass() == String.class) {\r\n\t\t\treturn HTMLSanitizerUtils.PLAIN_TEXT_SANITIZER_POLICY.sanitize((String) stringValue).replace(&quot;&amp;#64;&quot;, &quot;@&quot;);\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\nI know it is not clean, creates additional String, but we badly need this.\r\nSo, if you need to allow specific characters you can use this workaround. But if you need to do this your application is probably incorrectly designed.","title":"How to allow specific characters with OWASP HTML Sanitizer?","body":"<p>I know I am answering question after 7 years, but maybe it will be useful for someone.\nSo, basically I agree with you guys, we should not allow specific character for security reasons (you covered this topic, thanks). \nHowever I was working on legacy internal project which requried escaping html characters but \"@\" for reason I cannot tell (but it does not matter). My workaround for this was simple:</p>\n\n<pre><code>private static final PolicyFactory PLAIN_TEXT_SANITIZER_POLICY = new HtmlPolicyBuilder().toFactory();\n\n\npublic static String toString(Object stringValue) {\n    if (stringValue != null &amp;&amp; stringValue.getClass() == String.class) {\n        return HTMLSanitizerUtils.PLAIN_TEXT_SANITIZER_POLICY.sanitize((String) stringValue).replace(\"&amp;#64;\", \"@\");\n    } else {\n        return null;\n    }\n}\n</code></pre>\n\n<p>I know it is not clean, creates additional String, but we badly need this.\nSo, if you need to allow specific characters you can use this workaround. But if you need to do this your application is probably incorrectly designed.</p>\n"},{"comments":[{"owner":{"account_id":13116351,"reputation":456,"user_id":9475395,"display_name":"Cananau Cristian"},"score":0,"creation_date":1689664752,"post_id":74359179,"comment_id":135241758,"body_markdown":"I had the same solution but I read this one https://github.com/owasp/java-html-sanitizer/issues/15#issuecomment-936086926 . Just be careful by using _StringEscapeUtils.unescapeHtml_.","body":"I had the same solution but I read this one <a href=\"https://github.com/owasp/java-html-sanitizer/issues/15#issuecomment-936086926\" rel=\"nofollow noreferrer\">github.com/owasp/java-html-sanitizer/issues/&hellip;</a> . Just be careful by using <i>StringEscapeUtils.unescapeHtml</i>."}],"tags":[],"owner":{"account_id":26865793,"reputation":11,"user_id":20448584,"display_name":"raghu kallepalli"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667903296,"creation_date":1667903220,"answer_id":74359179,"question_id":12558471,"body_markdown":"You should decode after sanitising your input:\r\n\r\n```\r\nSystem.out.println(StringEscapeUtils.unescapeHtml(&quot;&lt;br /&gt;foo&amp;#39;example.com&quot;));\r\n```","title":"How to allow specific characters with OWASP HTML Sanitizer?","body":"<p>You should decode after sanitising your input:</p>\n<pre><code>System.out.println(StringEscapeUtils.unescapeHtml(&quot;&lt;br /&gt;foo&amp;#39;example.com&quot;));\n</code></pre>\n"}],"owner":{"account_id":195439,"reputation":60926,"user_id":438319,"accept_rate":73,"display_name":"ams"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15081,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":12610759,"answer_count":5,"score":15,"last_activity_date":1667903296,"creation_date":1348457196,"question_id":12558471,"body_markdown":"I am using the OWASP Html Sanitizer to prevent XSS attacks on my web app. For many fields that should be plain text the Sanitizer is doing more than I expect. \r\n\r\nFor example: \r\n\r\n    HtmlPolicyBuilder htmlPolicyBuilder = new HtmlPolicyBuilder();\r\n    stripAllTagsPolicy = htmlPolicyBuilder.toFactory();\r\n    stripAllTagsPolicy.sanitize(&#39;a+b&#39;); // return a&amp;#43;b\r\n    stripAllTagsPolicy.sanitize(&#39;foo@example.com&#39;); // return foo&amp;#64;example.com\r\n\r\nWhen I have fields such as email address that have a `+` in it such as `foo+bar@gmail.com` I end up with the wrong data in the the database. So two questions: \r\n\r\n 1. Are characters such as `+ - @` dangerous on their own do they really need to be encoded? \r\n 2. How do I configure the OWASP html sanitizer to allow specific characters such as + - @?\r\n\r\n**Question 2 is the more important one for me to get an answer to.** \r\n\r\n","title":"How to allow specific characters with OWASP HTML Sanitizer?","body":"<p>I am using the OWASP Html Sanitizer to prevent XSS attacks on my web app. For many fields that should be plain text the Sanitizer is doing more than I expect. </p>\n\n<p>For example: </p>\n\n<pre><code>HtmlPolicyBuilder htmlPolicyBuilder = new HtmlPolicyBuilder();\nstripAllTagsPolicy = htmlPolicyBuilder.toFactory();\nstripAllTagsPolicy.sanitize('a+b'); // return a&amp;#43;b\nstripAllTagsPolicy.sanitize('foo@example.com'); // return foo&amp;#64;example.com\n</code></pre>\n\n<p>When I have fields such as email address that have a <code>+</code> in it such as <code>foo+bar@gmail.com</code> I end up with the wrong data in the the database. So two questions: </p>\n\n<ol>\n<li>Are characters such as <code>+ - @</code> dangerous on their own do they really need to be encoded? </li>\n<li>How do I configure the OWASP html sanitizer to allow specific characters such as + - @?</li>\n</ol>\n\n<p><strong>Question 2 is the more important one for me to get an answer to.</strong> </p>\n"},{"tags":["java","vb.net"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":2,"creation_date":1667903462,"post_id":74359157,"comment_id":131273407,"body_markdown":"Your base64 string has an invalid length, i.e. the padding is missing. It should be `q128qjafnAdcbkfrhfWim783bCvDWsak9bfe2ERjnAc=`. I assume VB is more strict than the 3rd party library you&#39;re using in Java (note that `org.jose4j.base64url.Base64Url` is _not_ a standard library class).","body":"Your base64 string has an invalid length, i.e. the padding is missing. It should be <code>q128qjafnAdcbkfrhfWim783bCvDWsak9bfe2ERjnAc=</code>. I assume VB is more strict than the 3rd party library you&#39;re using in Java (note that <code>org.jose4j.base64url.Base64Url</code> is <i>not</i> a standard library class)."},{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - "},"score":0,"creation_date":1667904177,"post_id":74359157,"comment_id":131273618,"body_markdown":"Perhaps try: `Dim decodeResult As Byte() = System.Convert.FromBase64String(Base64str)`.","body":"Perhaps try: <code>Dim decodeResult As Byte() = System.Convert.FromBase64String(Base64str)</code>."},{"owner":{"account_id":10070332,"reputation":30328,"user_id":7444103,"display_name":"Jimi"},"score":1,"creation_date":1667905911,"post_id":74359157,"comment_id":131274195,"body_markdown":"You have [already asked](https://stackoverflow.com/q/74273756/7444103) this question, the problem is still the same. Where is this Base64 string coming from? What is it supposed to represent?","body":"You have <a href=\"https://stackoverflow.com/q/74273756/7444103\">already asked</a> this question, the problem is still the same. Where is this Base64 string coming from? What is it supposed to represent?"}],"owner":{"account_id":6698252,"reputation":89,"user_id":5165659,"display_name":"joe"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667903132,"creation_date":1667903132,"question_id":74359157,"body_markdown":"I use Visual Basic to Simulate java program language Base64Url.decode, this is my code:\r\n    \r\nJava\r\n    \r\n    import org.jose4j.base64url.Base64Url;\r\n    public class ss {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tString Base64str = &quot;q128qjafnAdcbkfrhfWim783bCvDWsak9bfe2ERjnAc&quot;;\r\n    \t\tbyte[] decodeResult = Base64Url.decode(Base64str);\r\n    \t}\r\n    }\r\n    \r\nVisual Basic\r\n    \r\n    Dim Base64str As String = &quot;q128qjafnAdcbkfrhfWim783bCvDWsak9bfe2ERjnAc&quot;\r\n    Dim decodeResult() As Byte = System.Convert.FromBase64String(Base64str)\r\n    \r\nIt showed System.FormatException - Invalid length for a Base-64 char array.\r\n    \r\nHow to solve it?","title":"Simulating Java Base64Url.decode by using Visual Basic","body":"<p>I use Visual Basic to Simulate java program language Base64Url.decode, this is my code:</p>\n<p>Java</p>\n<pre><code>import org.jose4j.base64url.Base64Url;\npublic class ss {\n    public static void main(String[] args) {\n        String Base64str = &quot;q128qjafnAdcbkfrhfWim783bCvDWsak9bfe2ERjnAc&quot;;\n        byte[] decodeResult = Base64Url.decode(Base64str);\n    }\n}\n</code></pre>\n<p>Visual Basic</p>\n<pre><code>Dim Base64str As String = &quot;q128qjafnAdcbkfrhfWim783bCvDWsak9bfe2ERjnAc&quot;\nDim decodeResult() As Byte = System.Convert.FromBase64String(Base64str)\n</code></pre>\n<p>It showed System.FormatException - Invalid length for a Base-64 char array.</p>\n<p>How to solve it?</p>\n"},{"tags":["java","spring","spring-boot","spring-test"],"comments":[{"owner":{"account_id":7291906,"reputation":503,"user_id":7789681,"display_name":"Alexey Bril"},"score":0,"creation_date":1667902137,"post_id":74358722,"comment_id":131272899,"body_markdown":"You need add @Import(Exceptionhandler.class)","body":"You need add @Import(Exceptionhandler.class)"},{"owner":{"account_id":1315495,"reputation":17293,"user_id":1262477,"accept_rate":74,"display_name":"Patan"},"score":0,"creation_date":1667902569,"post_id":74358722,"comment_id":131273080,"body_markdown":"@AlexeyBril thank you. is there any option to include some base package.","body":"@AlexeyBril thank you. is there any option to include some base package."},{"owner":{"account_id":7291906,"reputation":503,"user_id":7789681,"display_name":"Alexey Bril"},"score":0,"creation_date":1667902761,"post_id":74358722,"comment_id":131273141,"body_markdown":"As far as I could figure out, only if you do not specify a specific controller","body":"As far as I could figure out, only if you do not specify a specific controller"}],"answers":[{"tags":[],"owner":{"account_id":7291906,"reputation":503,"user_id":7789681,"display_name":"Alexey Bril"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667902627,"creation_date":1667902627,"answer_id":74359063,"question_id":74358722,"body_markdown":"You need to add @Import(Exceptionhandler.class). \r\n\r\nI described a similar problem, when using @WebMvcTest with specific controllers and its solution here: https://stackoverflow.com/a/74191408/7789681","title":"webMvc test not invoking the error handler","body":"<p>You need to add @Import(Exceptionhandler.class).</p>\n<p>I described a similar problem, when using @WebMvcTest with specific controllers and its solution here: <a href=\"https://stackoverflow.com/a/74191408/7789681\">https://stackoverflow.com/a/74191408/7789681</a></p>\n"}],"owner":{"account_id":1315495,"reputation":17293,"user_id":1262477,"accept_rate":74,"display_name":"Patan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":406,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1667902627,"creation_date":1667901205,"question_id":74358722,"body_markdown":"I am trying to write the integration test for my controller.\r\n\r\nException handler is there in a library as part of dependency. But my webMvc Test is not able to invoke the handler\r\n\r\nThe exception is thrown from method\r\n\r\n    @WebMvcTest(controllers = MyController.class, excludeAutoConfiguration = {\r\n        SecurityAutoConfiguration.class})\r\n    @ExtendWith(SpringExtension.class)\r\n    public class WebMockTest {\r\n    \r\n      @Autowired\r\n      private MockMvc mockMvc;\r\n    \r\n      @MockBean\r\n      private MyService service;\r\n    \r\n      \r\n      @Test\r\n      public void shall_make_get_call_404_not_ok() throws Exception {\r\n        when(service.getById(any())).thenThrow(new CustomException(&quot;Not found&quot;));\r\n        this.mockMvc.perform(get(&quot;/items/&quot; + &quot;12&quot;)).andDo(print())\r\n            .andExpect(status().isNotFound());\r\n    \r\n      }\r\n    }\r\n\r\nHere I am not able to get the response but exception is thrown from test method.\r\n\r\nHow do I trigger the exception handler.\r\n\r\n\r\n","title":"webMvc test not invoking the error handler","body":"<p>I am trying to write the integration test for my controller.</p>\n<p>Exception handler is there in a library as part of dependency. But my webMvc Test is not able to invoke the handler</p>\n<p>The exception is thrown from method</p>\n<pre><code>@WebMvcTest(controllers = MyController.class, excludeAutoConfiguration = {\n    SecurityAutoConfiguration.class})\n@ExtendWith(SpringExtension.class)\npublic class WebMockTest {\n\n  @Autowired\n  private MockMvc mockMvc;\n\n  @MockBean\n  private MyService service;\n\n  \n  @Test\n  public void shall_make_get_call_404_not_ok() throws Exception {\n    when(service.getById(any())).thenThrow(new CustomException(&quot;Not found&quot;));\n    this.mockMvc.perform(get(&quot;/items/&quot; + &quot;12&quot;)).andDo(print())\n        .andExpect(status().isNotFound());\n\n  }\n}\n</code></pre>\n<p>Here I am not able to get the response but exception is thrown from test method.</p>\n<p>How do I trigger the exception handler.</p>\n"},{"tags":["java","json","jackson","objectmapper"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":2,"creation_date":1667897053,"post_id":74357829,"comment_id":131271006,"body_markdown":"Add `&quot;Test1&quot;` to `testObjectList`.","body":"Add <code>&quot;Test1&quot;</code> to <code>testObjectList</code>."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1667897114,"post_id":74357829,"comment_id":131271028,"body_markdown":"@Stultuske it looks invalid, but its actually allowed to have values as array elements.","body":"@Stultuske it looks invalid, but its actually allowed to have values as array elements."}],"answers":[{"tags":[],"owner":{"account_id":26863921,"reputation":43,"user_id":20446959,"display_name":"Arkady Dymkov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667902615,"creation_date":1667902615,"answer_id":74359061,"question_id":74357829,"body_markdown":"Easy way to do it - use [Gson library][1]\r\n\r\n\r\n    Gson gson = new Gson();\r\n    String json = gson.toJson(testObjectList);\r\n\r\n  [1]: https://github.com/google/gson\r\n","title":"Add Value without key to JSON","body":"<p>Easy way to do it - use <a href=\"https://github.com/google/gson\" rel=\"nofollow noreferrer\">Gson library</a></p>\n<pre><code>Gson gson = new Gson();\nString json = gson.toJson(testObjectList);\n</code></pre>\n"}],"owner":{"account_id":12834353,"reputation":65,"user_id":9284489,"display_name":"Beanssss"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":156,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1667902615,"creation_date":1667896737,"question_id":74357829,"body_markdown":"Im Trying to achive a Json structure like this:\r\n\r\n```\r\n[\r\n    &quot;Test1&quot;,\r\n    {\r\n        &quot;name&quot;: &quot;testName&quot;,\r\n        &quot;phone&quot;: &quot;123456&quot;\r\n    }\r\n]\r\n```\r\n\r\nbut when i output my testObjectList i dont really know how to add the &quot;Test1&quot; String. \r\n\r\nAt the moment i create my Json Output like this:\r\n\r\n\r\n```\r\n\r\npublic class TestClass {\r\n\tString name;\r\n\tString phone;\r\n\r\n\tpublic TestClass(String name, String phone) {\r\n\t\tsuper();\r\n\t\tthis.name = name;\r\n\t\tthis.phone = phone;\r\n\t}\r\n\r\n\tpublic String getName() {\r\n\t\treturn name;\r\n\t}\r\n\tpublic String getPhone() {\r\n\t\treturn phone;\r\n\t}\r\n}\r\n```\r\n```\r\npublic class TestProjectApplication {\r\n\r\n\tpublic static void main(String[] args) throws JsonMappingException, JsonProcessingException {\r\n\t\tvar testObject = new TestClass(&quot;testName&quot;, &quot;123456&quot;);\r\n\t\tvar testObjectList = new ArrayList();\r\n\t\ttestObjectList.add(testObject);\r\n\t\tvar mapper = new ObjectMapper();\r\n\t\tSystem.out.println(mapper.readTree(mapper.writeValueAsString(testObjectList)));\r\n\t}\r\n}\r\n```\r\n\r\n\r\nThe output looks like this:\r\n```\r\n[\r\n    {\r\n        &quot;name&quot;: &quot;testName&quot;,\r\n        &quot;phone&quot;: &quot;123456&quot;\r\n    }\r\n]\r\n```\r\n\r\nBut how do i add &quot;Test1&quot; ?","title":"Add Value without key to JSON","body":"<p>Im Trying to achive a Json structure like this:</p>\n<pre><code>[\n    &quot;Test1&quot;,\n    {\n        &quot;name&quot;: &quot;testName&quot;,\n        &quot;phone&quot;: &quot;123456&quot;\n    }\n]\n</code></pre>\n<p>but when i output my testObjectList i dont really know how to add the &quot;Test1&quot; String.</p>\n<p>At the moment i create my Json Output like this:</p>\n<pre><code>\npublic class TestClass {\n    String name;\n    String phone;\n\n    public TestClass(String name, String phone) {\n        super();\n        this.name = name;\n        this.phone = phone;\n    }\n\n    public String getName() {\n        return name;\n    }\n    public String getPhone() {\n        return phone;\n    }\n}\n</code></pre>\n<pre><code>public class TestProjectApplication {\n\n    public static void main(String[] args) throws JsonMappingException, JsonProcessingException {\n        var testObject = new TestClass(&quot;testName&quot;, &quot;123456&quot;);\n        var testObjectList = new ArrayList();\n        testObjectList.add(testObject);\n        var mapper = new ObjectMapper();\n        System.out.println(mapper.readTree(mapper.writeValueAsString(testObjectList)));\n    }\n}\n</code></pre>\n<p>The output looks like this:</p>\n<pre><code>[\n    {\n        &quot;name&quot;: &quot;testName&quot;,\n        &quot;phone&quot;: &quot;123456&quot;\n    }\n]\n</code></pre>\n<p>But how do i add &quot;Test1&quot; ?</p>\n"},{"tags":["java","spring","unit-testing"],"comments":[{"owner":{"account_id":4662993,"reputation":1515,"user_id":3776810,"accept_rate":76,"display_name":"Jaims"},"score":0,"creation_date":1473437785,"post_id":39415367,"comment_id":66156227,"body_markdown":"Perhaps [this answer](http://stackoverflow.com/a/27333573/3776810) might help.","body":"Perhaps <a href=\"http://stackoverflow.com/a/27333573/3776810\">this answer</a> might help."},{"owner":{"account_id":460984,"reputation":3455,"user_id":862410,"accept_rate":89,"display_name":"Josh"},"score":0,"creation_date":1473438172,"post_id":39415367,"comment_id":66156452,"body_markdown":"Thanks @Jaims, I&#39;ve seen the conditional annotations but can&#39;t figure out what my condition would be. Any ideas?","body":"Thanks @Jaims, I&#39;ve seen the conditional annotations but can&#39;t figure out what my condition would be. Any ideas?"},{"owner":{"account_id":4662993,"reputation":1515,"user_id":3776810,"accept_rate":76,"display_name":"Jaims"},"score":1,"creation_date":1473440976,"post_id":39415367,"comment_id":66157809,"body_markdown":"A common way is to use different profiles. You have a `TestConfig` class with a `@Profile()` annotation which could mock your Database to a light object. On your test class you could then use `@ActiveProfiles()` to select your test config. While in production, you could provide a different configuration profile.","body":"A common way is to use different profiles. You have a <code>TestConfig</code> class with a <code>@Profile()</code> annotation which could mock your Database to a light object. On your test class you could then use <code>@ActiveProfiles()</code> to select your test config. While in production, you could provide a different configuration profile."}],"answers":[{"comments":[{"owner":{"account_id":460984,"reputation":3455,"user_id":862410,"accept_rate":89,"display_name":"Josh"},"score":0,"creation_date":1473669282,"post_id":39417344,"comment_id":66214382,"body_markdown":"Thanks Alex. While this solves the immediate problem of the tests not passing, I still don&#39;t think it makes sense that Spring registers scheduled tasks when running tests. The tests should just be the classes I instantiated, surely?!","body":"Thanks Alex. While this solves the immediate problem of the tests not passing, I still don&#39;t think it makes sense that Spring registers scheduled tasks when running tests. The tests should just be the classes I instantiated, surely?!"},{"owner":{"account_id":964700,"reputation":1819,"user_id":988346,"display_name":"user988346"},"score":0,"creation_date":1564781137,"post_id":39417344,"comment_id":101157033,"body_markdown":"This doesn&#39;t remove the other bean from the context. If you want to replace a bean you need to make sure the bean&#39;s name is the same in your test configuration as it is in the spring context normally. This answer only helps if you are trying to inject a new value into a singled-valued dependency.","body":"This doesn&#39;t remove the other bean from the context. If you want to replace a bean you need to make sure the bean&#39;s name is the same in your test configuration as it is in the spring context normally. This answer only helps if you are trying to inject a new value into a singled-valued dependency."}],"tags":[],"owner":{"account_id":322284,"reputation":16565,"user_id":641627,"display_name":"alexbt"},"comment_count":2,"down_vote_count":1,"up_vote_count":6,"is_accepted":true,"score":5,"last_activity_date":1473444625,"creation_date":1473444285,"answer_id":39417344,"question_id":39415367,"body_markdown":"I know you said: \r\n\r\n&gt; I obviously don&#39;t want to create mocks  in these tests for completely unrelated classes.\r\n\r\nStill, just so you know, you can easily override the unwanted component just for this test:\r\n\r\n    @RunWith(...)\r\n    @Context...\r\n    public class YourTest {\r\n        public static class TestConfiguration {\r\n            @Bean\r\n            @Primary\r\n            public Database unwantedComponent(){\r\n                return Mockito.mock(Database.class);\r\n            }\r\n        }\r\n\r\n        @Test\r\n        public void yourTest(){\r\n            ...\r\n        }\r\n    }\r\n\r\nSimilar question/answer: https://stackoverflow.com/questions/39041542/override-a-single-configuration-class-on-every-spring-boot-test","title":"Spring Boot remove @Component when unit testing","body":"<p>I know you said: </p>\n\n<blockquote>\n  <p>I obviously don't want to create mocks  in these tests for completely unrelated classes.</p>\n</blockquote>\n\n<p>Still, just so you know, you can easily override the unwanted component just for this test:</p>\n\n<pre><code>@RunWith(...)\n@Context...\npublic class YourTest {\n    public static class TestConfiguration {\n        @Bean\n        @Primary\n        public Database unwantedComponent(){\n            return Mockito.mock(Database.class);\n        }\n    }\n\n    @Test\n    public void yourTest(){\n        ...\n    }\n}\n</code></pre>\n\n<p>Similar question/answer: <a href=\"https://stackoverflow.com/questions/39041542/override-a-single-configuration-class-on-every-spring-boot-test\">Override a single @Configuration class on every spring boot @Test</a></p>\n"},{"comments":[{"owner":{"account_id":3546725,"reputation":1194,"user_id":2962507,"display_name":"dinvlad"},"score":0,"creation_date":1639096537,"post_id":55243657,"comment_id":124268537,"body_markdown":"This is ingenious! Used `@SpringBean Database d = Mock()` in Spock.","body":"This is ingenious! Used <code>@SpringBean Database d = Mock()</code> in Spock."}],"tags":[],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1553006633,"creation_date":1553006633,"answer_id":55243657,"question_id":39415367,"body_markdown":"Just add the following to your test class:\r\n\r\n    @MockBean\r\n    public Database d;","title":"Spring Boot remove @Component when unit testing","body":"<p>Just add the following to your test class:</p>\n\n<pre><code>@MockBean\npublic Database d;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1734438,"reputation":36275,"user_id":1587329,"accept_rate":94,"display_name":"serv-inc"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667902594,"creation_date":1667902594,"answer_id":74359057,"question_id":39415367,"body_markdown":"Another alternative: use a in-memory database like h2 when testing. Create an `application-test.properties` with\r\n\r\n    spring.datasource.url=jdbc:h2:mem:testdb\r\n    spring.datasource.driverClassName=org.h2.Driver\r\n    spring.datasource.username=sa\r\n    spring.datasource.password=password\r\n    spring.jpa.database-platform=org.hibernate.dialect.H2Dialect\r\n\r\nSee e.g. https://www.baeldung.com/spring-boot-h2-database .\r\n\r\n","title":"Spring Boot remove @Component when unit testing","body":"<p>Another alternative: use a in-memory database like h2 when testing. Create an <code>application-test.properties</code> with</p>\n<pre><code>spring.datasource.url=jdbc:h2:mem:testdb\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=password\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\n</code></pre>\n<p>See e.g. <a href=\"https://www.baeldung.com/spring-boot-h2-database\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-boot-h2-database</a> .</p>\n"}],"owner":{"account_id":460984,"reputation":3455,"user_id":862410,"accept_rate":89,"display_name":"Josh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8561,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":39417344,"answer_count":3,"score":3,"last_activity_date":1667902594,"creation_date":1473436167,"question_id":39415367,"body_markdown":"Bear with me as this is the first time I&#39;ve used Spring Boot so this is only what I _think_ is happening...\r\n\r\nI have a couple of methods which are annotated with `@Scheduled`. They work great, and I have all of the dependencies configured and injected. These dependencies are quite heavy weight, relying on internet connections etc. I&#39;ve annotated them as `@Lazy`, so they&#39;re only instantiated at the very last minute.\r\n\r\nHowever, the classes which contain the scheduled methods need to be marked with `@Component` which means they&#39;re created on launch. This sets off a chain reaction which creates all of my dependencies whether I actually need them for the test I&#39;m currently running.\r\n\r\nWhen I run my unit tests on our CI server, they fail because the server isn&#39;t auth&#39;d with the database (nor should it be).\r\n\r\nThe tests which test these `@Scheduled` jobs inject their own mocks, so they work fine. However, the tests which are completely unrelated are causing the problems as the classes are still created. I obviously don&#39;t want to create mocks in these tests for completely unrelated classes.\r\n\r\nHow can I prevent certain a `@Component` from being created when the tests are running?\r\n\r\nScheduled jobs class:\r\n\r\n    package example.scheduledtasks;\r\n\t\r\n\t@Component\r\n\tpublic class ScheduledJob {\r\n\t\r\n\t\tprivate Database database;\r\n\t\r\n\t\t@Autowired\r\n\t\tpublic AccountsImporter(Database database) {\r\n\t\t\tthis.database = database;\r\n\t\t}\r\n\t\r\n\t\t@Scheduled(cron=&quot;0 0 04 * * *&quot;)\r\n\t\tpublic void run() {\r\n\t\t\t// Do something with the database\r\n\t\t}\r\n\t}\r\n\r\n\r\nConfig class:\r\n\r\n    package example\r\n    \r\n    @Configuration\r\n    public class ApplicationConfig {\r\n\r\n\t    @Bean\r\n\t    @Lazy\r\n\t    public Database database() {\r\n\t\t    return ...;// Some heavy operation I don&#39;t want to do while testing.\r\n\t    }\r\n}\r\n\r\n","title":"Spring Boot remove @Component when unit testing","body":"<p>Bear with me as this is the first time I've used Spring Boot so this is only what I <em>think</em> is happening...</p>\n\n<p>I have a couple of methods which are annotated with <code>@Scheduled</code>. They work great, and I have all of the dependencies configured and injected. These dependencies are quite heavy weight, relying on internet connections etc. I've annotated them as <code>@Lazy</code>, so they're only instantiated at the very last minute.</p>\n\n<p>However, the classes which contain the scheduled methods need to be marked with <code>@Component</code> which means they're created on launch. This sets off a chain reaction which creates all of my dependencies whether I actually need them for the test I'm currently running.</p>\n\n<p>When I run my unit tests on our CI server, they fail because the server isn't auth'd with the database (nor should it be).</p>\n\n<p>The tests which test these <code>@Scheduled</code> jobs inject their own mocks, so they work fine. However, the tests which are completely unrelated are causing the problems as the classes are still created. I obviously don't want to create mocks in these tests for completely unrelated classes.</p>\n\n<p>How can I prevent certain a <code>@Component</code> from being created when the tests are running?</p>\n\n<p>Scheduled jobs class:</p>\n\n<pre><code>package example.scheduledtasks;\n\n@Component\npublic class ScheduledJob {\n\n    private Database database;\n\n    @Autowired\n    public AccountsImporter(Database database) {\n        this.database = database;\n    }\n\n    @Scheduled(cron=\"0 0 04 * * *\")\n    public void run() {\n        // Do something with the database\n    }\n}\n</code></pre>\n\n<p>Config class:</p>\n\n<pre><code>package example\n\n@Configuration\npublic class ApplicationConfig {\n\n    @Bean\n    @Lazy\n    public Database database() {\n        return ...;// Some heavy operation I don't want to do while testing.\n    }\n</code></pre>\n\n<p>}</p>\n"},{"tags":["java","spring-boot","kotlin","amazon-elastic-beanstalk"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":2,"creation_date":1661117017,"post_id":73438308,"comment_id":129689568,"body_markdown":"Have you tried running the jar locally rather than via the IDE?","body":"Have you tried running the jar locally rather than via the IDE?"},{"owner":{"account_id":9303498,"reputation":351,"user_id":15123161,"display_name":"Marco"},"score":0,"creation_date":1661123358,"post_id":73438308,"comment_id":129690447,"body_markdown":"I&#39;ve run it by doing `java -jar xxx.jar` and i got the same error that I see on AWS. \nWhat does this mean? Why is happening? What does IntelliJ do to make it work that I&#39;m unaware of?","body":"I&#39;ve run it by doing <code>java -jar xxx.jar</code> and i got the same error that I see on AWS.  What does this mean? Why is happening? What does IntelliJ do to make it work that I&#39;m unaware of?"},{"owner":{"account_id":9303498,"reputation":351,"user_id":15123161,"display_name":"Marco"},"score":0,"creation_date":1661157084,"post_id":73438308,"comment_id":129696060,"body_markdown":"@OneCricketeer, your comment pointed me in the right direction, thank you so much.","body":"@OneCricketeer, your comment pointed me in the right direction, thank you so much."}],"answers":[{"tags":[],"owner":{"account_id":9303498,"reputation":351,"user_id":15123161,"display_name":"Marco"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1661157673,"creation_date":1661157673,"answer_id":73442318,"question_id":73438308,"body_markdown":"The issue was raised by the following property declared in my POM file: `&lt;start-class&gt;com.prototype.demo.DemoApplication&lt;/start-class&gt;`.\r\nOnce I removed it and added the `open` keyword to the `Configuration` annotated classes and to the `DemoApplication`(the class containing the `main`) it finally worked.","title":"AWS Beanstalk + Kotlin + Spring boot: NoSuchMethodException main()","body":"<p>The issue was raised by the following property declared in my POM file: <code>&lt;start-class&gt;com.prototype.demo.DemoApplication&lt;/start-class&gt;</code>.\nOnce I removed it and added the <code>open</code> keyword to the <code>Configuration</code> annotated classes and to the <code>DemoApplication</code>(the class containing the <code>main</code>) it finally worked.</p>\n"},{"tags":[],"owner":{"account_id":8341024,"reputation":1015,"user_id":6266336,"accept_rate":38,"display_name":"Diana"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667902489,"creation_date":1667902489,"answer_id":74359024,"question_id":73438308,"body_markdown":"## Solution for build.gradle.kts\r\n\r\nI had the same problem when deploying my application to ECS. \r\n\r\n**First things first:**\r\n\r\nWhen you see such an error in AWS logs -&gt; do as the author of the question has done and test the issue locally. Most probably if the application is failing on AWS, it will also fail on you local machine. To do so, you build a jar locally, the jar file is usually saved in `build/libs/application-x.x.x-SNAPSHOT.jar` and run `java -jar application-x.x.x-SNAPSHOT.jar`\r\n\r\nNow you can fix your build task and test it locally before deploying it again.\r\n\r\n**Fix Gradle:**\r\nMy main method was defined in `MyApplication.kt` file, but in the definition of the main class in gradle I had to set the following:\r\n\r\n```\r\ntasks.getByName&lt;org.springframework.boot.gradle.tasks.bundling.BootJar&gt;(&quot;bootJar&quot;) {\r\n    mainClass.set(&quot;com.company.app.MyApplicationKt&quot;)\r\n}\r\n```\r\n\r\nNotice: MyApplication**Kt**\r\n\r\n\r\nThat is the only thing I had to change for me to fix this issue. \r\n\r\n\r\n","title":"AWS Beanstalk + Kotlin + Spring boot: NoSuchMethodException main()","body":"<h2>Solution for build.gradle.kts</h2>\n<p>I had the same problem when deploying my application to ECS.</p>\n<p><strong>First things first:</strong></p>\n<p>When you see such an error in AWS logs -&gt; do as the author of the question has done and test the issue locally. Most probably if the application is failing on AWS, it will also fail on you local machine. To do so, you build a jar locally, the jar file is usually saved in <code>build/libs/application-x.x.x-SNAPSHOT.jar</code> and run <code>java -jar application-x.x.x-SNAPSHOT.jar</code></p>\n<p>Now you can fix your build task and test it locally before deploying it again.</p>\n<p><strong>Fix Gradle:</strong>\nMy main method was defined in <code>MyApplication.kt</code> file, but in the definition of the main class in gradle I had to set the following:</p>\n<pre><code>tasks.getByName&lt;org.springframework.boot.gradle.tasks.bundling.BootJar&gt;(&quot;bootJar&quot;) {\n    mainClass.set(&quot;com.company.app.MyApplicationKt&quot;)\n}\n</code></pre>\n<p>Notice: MyApplication<strong>Kt</strong></p>\n<p>That is the only thing I had to change for me to fix this issue.</p>\n"}],"owner":{"account_id":9303498,"reputation":351,"user_id":15123161,"display_name":"Marco"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":323,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":73442318,"answer_count":2,"score":3,"last_activity_date":1667902489,"creation_date":1661116848,"question_id":73438308,"body_markdown":"I&#39;ve a Spring Boot app written in Kotlin that I have deployed to AWS Beanstalk that is throwing the following exception: \r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoSuchMethodException: com.prototype.demo.DemoApplication.main([Ljava.lang.String;)\r\n    at java.base/java.lang.Class.getDeclaredMethod(Class.java:2675)\r\n    at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:47)\r\n\r\n\r\nLocally, when I run the app from IntelliJ I&#39;ve no issues.\r\nI have the `spring-boot-maven-plugin` and the `kotlin-maven-plugin` in my project. \r\n\r\nAny ideas about what could be causing the issue? I previously built a similar app in Java but didn&#39;t run into this issue.\r\n\r\nThank you for your expertise and time.\r\n\r\n---\r\n\r\nUpdate: something interesting to notice is that I had to set in the properties of my POM the following line in order to make the project executable by IntelliJ during development (i had forgotten about it): `&lt;start-class&gt;com.prototype.demo.DemoApplication&lt;/start-class&gt;`\r\n\r\nNow I&#39;ve removed it and I get a different error when running the jar file. I will spend some time on it and see if that&#39;s related or not and update the question accordingly.\r\nThank you!","title":"AWS Beanstalk + Kotlin + Spring boot: NoSuchMethodException main()","body":"<p>I've a Spring Boot app written in Kotlin that I have deployed to AWS Beanstalk that is throwing the following exception:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NoSuchMethodException: com.prototype.demo.DemoApplication.main([Ljava.lang.String;)\nat java.base/java.lang.Class.getDeclaredMethod(Class.java:2675)\nat org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:47)\n</code></pre>\n<p>Locally, when I run the app from IntelliJ I've no issues.\nI have the <code>spring-boot-maven-plugin</code> and the <code>kotlin-maven-plugin</code> in my project.</p>\n<p>Any ideas about what could be causing the issue? I previously built a similar app in Java but didn't run into this issue.</p>\n<p>Thank you for your expertise and time.</p>\n<hr />\n<p>Update: something interesting to notice is that I had to set in the properties of my POM the following line in order to make the project executable by IntelliJ during development (i had forgotten about it): <code>&lt;start-class&gt;com.prototype.demo.DemoApplication&lt;/start-class&gt;</code></p>\n<p>Now I've removed it and I get a different error when running the jar file. I will spend some time on it and see if that's related or not and update the question accordingly.\nThank you!</p>\n"},{"tags":["java","spring","spring-boot","oauth-2.0","keycloak"],"answers":[{"tags":[],"owner":{"account_id":1903913,"reputation":1209,"user_id":1719147,"display_name":"Maurizio Lo Bosco"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667902250,"creation_date":1667902250,"answer_id":74358981,"question_id":61451892,"body_markdown":"I think the property you are looking for is [spring-security 5.2.12.RELEASE - Spring Boot 2.x Property Mappings ][1]\r\n\r\n    spring.security.oauth2.client.provider.[providerId].issuer-uri\r\n\r\n&gt; A ClientRegistration can be initially configured using discovery of an OpenID Connect Providers Configuration endpoint or an Authorization Servers Metadata endpoint, by specifying the spring.security.oauth2.client.provider.[providerId].issuer-uri property.\r\n\r\n\r\nFor a resource-server it would be \r\n[spring-security/reference/servlet/oauth2/resource-server/jwt.html][2] \r\n\r\n    spring:\r\n     security:\r\n       oauth2:\r\n         resourceserver:\r\n           jwt:\r\n             issuer-uri: https://idp.example.com/issuer\r\n\r\nWith the note\r\n\r\n&gt; To use the issuer-uri property, it must also be true that one of idp.example.com/issuer/.well-known/openid-configuration, idp.example.com/.well-known/openid-configuration/issuer, or idp.example.com/.well-known/oauth-authorization-server/issuer is a supported endpoint for the authorization server. This endpoint is referred to as a Provider Configuration endpoint or a Authorization Server Metadata endpoint.\r\n\r\n  [1]: https://docs.spring.io/spring-security/site/docs/5.2.12.RELEASE/reference/html/oauth2.html#oauth2login-boot-property-mappings\r\n  [2]: https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/jwt.html","title":"Is there a way to use `.well-known/openid-configuration` with Spring Security?","body":"<p>I think the property you are looking for is <a href=\"https://docs.spring.io/spring-security/site/docs/5.2.12.RELEASE/reference/html/oauth2.html#oauth2login-boot-property-mappings\" rel=\"nofollow noreferrer\">spring-security 5.2.12.RELEASE - Spring Boot 2.x Property Mappings </a></p>\n<pre><code>spring.security.oauth2.client.provider.[providerId].issuer-uri\n</code></pre>\n<blockquote>\n<p>A ClientRegistration can be initially configured using discovery of an OpenID Connect Providers Configuration endpoint or an Authorization Servers Metadata endpoint, by specifying the spring.security.oauth2.client.provider.[providerId].issuer-uri property.</p>\n</blockquote>\n<p>For a resource-server it would be\n<a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/jwt.html\" rel=\"nofollow noreferrer\">spring-security/reference/servlet/oauth2/resource-server/jwt.html</a></p>\n<pre><code>spring:\n security:\n   oauth2:\n     resourceserver:\n       jwt:\n         issuer-uri: https://idp.example.com/issuer\n</code></pre>\n<p>With the note</p>\n<blockquote>\n<p>To use the issuer-uri property, it must also be true that one of idp.example.com/issuer/.well-known/openid-configuration, idp.example.com/.well-known/openid-configuration/issuer, or idp.example.com/.well-known/oauth-authorization-server/issuer is a supported endpoint for the authorization server. This endpoint is referred to as a Provider Configuration endpoint or a Authorization Server Metadata endpoint.</p>\n</blockquote>\n"}],"owner":{"account_id":87230,"reputation":36826,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1361,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1667902250,"creation_date":1587962764,"question_id":61451892,"body_markdown":"I see in the examples defining a provider as follows\r\n\r\n```\r\nspring.security.oauth2.client.provider.xxxxxxxxx.authorization-uri=https://api.xxxxxxxxx.com/authorize\r\nspring.security.oauth2.client.provider.xxxxxxxxx.token-uri=https://api.xxxxxxxxx.com/token\r\nspring.security.oauth2.client.provider.xxxxxxxxx.user-info-uri=https://api.xxxxxxxxx.com/userinfo?schema=openid\r\nspring.security.oauth2.client.provider.xxxxxxxxx.user-name-attribute=name\r\nspring.security.oauth2.client.provider.xxxxxxxxx.user-info-authentication-method=header\r\nspring.security.oauth2.client.provider.xxxxxxxxx.jwk-set-uri=https://api.xxxxxxxxx.com/jwks\r\n```\r\n\r\nIs there a property that would just let me do\r\n\r\n```\r\nspring.security.oauth2.client.provider.xxxxxxxxx.openid-configuration=https://keycloak/.well-known/openid-configuration\r\n```\r\n","title":"Is there a way to use `.well-known/openid-configuration` with Spring Security?","body":"<p>I see in the examples defining a provider as follows</p>\n\n<pre><code>spring.security.oauth2.client.provider.xxxxxxxxx.authorization-uri=https://api.xxxxxxxxx.com/authorize\nspring.security.oauth2.client.provider.xxxxxxxxx.token-uri=https://api.xxxxxxxxx.com/token\nspring.security.oauth2.client.provider.xxxxxxxxx.user-info-uri=https://api.xxxxxxxxx.com/userinfo?schema=openid\nspring.security.oauth2.client.provider.xxxxxxxxx.user-name-attribute=name\nspring.security.oauth2.client.provider.xxxxxxxxx.user-info-authentication-method=header\nspring.security.oauth2.client.provider.xxxxxxxxx.jwk-set-uri=https://api.xxxxxxxxx.com/jwks\n</code></pre>\n\n<p>Is there a property that would just let me do</p>\n\n<pre><code>spring.security.oauth2.client.provider.xxxxxxxxx.openid-configuration=https://keycloak/.well-known/openid-configuration\n</code></pre>\n"},{"tags":["java","spring-boot","junit","lombok"],"answers":[{"comments":[{"owner":{"account_id":21734037,"reputation":55,"user_id":16042294,"display_name":"Pouria Saleh"},"score":0,"creation_date":1667713144,"post_id":74330117,"comment_id":131229825,"body_markdown":"how can I add provided? is this a tag in lombok dependency?","body":"how can I add provided? is this a tag in lombok dependency?"},{"owner":{"account_id":21734037,"reputation":55,"user_id":16042294,"display_name":"Pouria Saleh"},"score":0,"creation_date":1667713248,"post_id":74330117,"comment_id":131229836,"body_markdown":"how about lombok in exclude tag ? should I remove it or not?","body":"how about lombok in exclude tag ? should I remove it or not?"},{"owner":{"account_id":9838723,"reputation":197,"user_id":7288288,"accept_rate":0,"display_name":"Jayamal Jayamaha  "},"score":1,"creation_date":1667755706,"post_id":74330117,"comment_id":131237650,"body_markdown":"look about this \nhttps://projectlombok.org/setup/maven","body":"look about this  <a href=\"https://projectlombok.org/setup/maven\" rel=\"nofollow noreferrer\">projectlombok.org/setup/maven</a>"},{"owner":{"account_id":21734037,"reputation":55,"user_id":16042294,"display_name":"Pouria Saleh"},"score":0,"creation_date":1667901447,"post_id":74330117,"comment_id":131272639,"body_markdown":"I found the solution I have not added the lombok plugin to my IDE. that was the case.","body":"I found the solution I have not added the lombok plugin to my IDE. that was the case."}],"tags":[],"owner":{"account_id":9838723,"reputation":197,"user_id":7288288,"accept_rate":0,"display_name":"Jayamal Jayamaha  "},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667755639,"creation_date":1667670456,"answer_id":74330117,"question_id":74329222,"body_markdown":"You should add &lt;scope&gt;provided&lt;/scope&gt; to the Lombok dependency in your maven file. this will enable this dependency for test classpath as well. as like this doc\r\n\r\nhttps://projectlombok.org/setup/maven","title":"I don&#39;t have access to Lombok features of my entity class from test class","body":"<p>You should add provided to the Lombok dependency in your maven file. this will enable this dependency for test classpath as well. as like this doc</p>\n<p><a href=\"https://projectlombok.org/setup/maven\" rel=\"nofollow noreferrer\">https://projectlombok.org/setup/maven</a></p>\n"}],"owner":{"account_id":21734037,"reputation":55,"user_id":16042294,"display_name":"Pouria Saleh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1667901854,"creation_date":1667663464,"question_id":74329222,"body_markdown":"I have an entity class in my src/main/java directory like this:\r\n\r\n```java\r\n@Entity\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Builder\r\npublic class Student {\r\n    private String firstName;\r\n    private String lastName;\r\n\r\n    @Column(name = &quot;email_address&quot;,\r\n    nullable = false\r\n    )\r\n    private String emailId;\r\n    private String gaurdianName;\r\n    private String gaurdianEmail;\r\n    private String gaurdianMobile;\r\n\r\n}\r\n```\r\n\r\nIn my test class in src/test/java directory I don&#39;t have access to Lombok features in my above class like setters and getters, builder methods and other features of Lombok.\r\n\r\nWhere is the problem?\r\n\r\nIn my test class I want to make an object of student class with builder method or use getter and setter methods like this: \r\n\r\n```java\r\nStudent student = new Student();\r\n\r\nstudent.setFirstName(&quot;John&quot;); // it doesn&#39;t work\r\nstudent.getFirstName(); // it doesn&#39;t work\r\nStudent student = Student.builder().firstName(&quot;JOHN&quot;).build(); // it doesn&#39;t work\r\n```\r\n\r\nHere is my pom.xml:\r\n\r\n```xml\r\n     &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;excludes&gt;\r\n                        &lt;exclude&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                        &lt;/exclude&gt;\r\n                    &lt;/excludes&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n","title":"I don&#39;t have access to Lombok features of my entity class from test class","body":"<p>I have an entity class in my src/main/java directory like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Builder\npublic class Student {\n    private String firstName;\n    private String lastName;\n\n    @Column(name = &quot;email_address&quot;,\n    nullable = false\n    )\n    private String emailId;\n    private String gaurdianName;\n    private String gaurdianEmail;\n    private String gaurdianMobile;\n\n}\n</code></pre>\n<p>In my test class in src/test/java directory I don't have access to Lombok features in my above class like setters and getters, builder methods and other features of Lombok.</p>\n<p>Where is the problem?</p>\n<p>In my test class I want to make an object of student class with builder method or use getter and setter methods like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Student student = new Student();\n\nstudent.setFirstName(&quot;John&quot;); // it doesn't work\nstudent.getFirstName(); // it doesn't work\nStudent student = Student.builder().firstName(&quot;JOHN&quot;).build(); // it doesn't work\n</code></pre>\n<p>Here is my pom.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>     &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","android","react-native"],"answers":[{"comments":[{"owner":{"account_id":9009858,"reputation":1394,"user_id":7445389,"display_name":"amit pandya"},"score":2,"creation_date":1668519677,"post_id":74346417,"comment_id":131420902,"body_markdown":"thanks a lot Shivam, this worked out for me and i was getting this issue from 2 hours and your solution made it work.","body":"thanks a lot Shivam, this worked out for me and i was getting this issue from 2 hours and your solution made it work."},{"owner":{"account_id":21202669,"reputation":172,"user_id":15592981,"display_name":"Lauro235"},"score":0,"creation_date":1677515589,"post_id":74346417,"comment_id":133348647,"body_markdown":"Hey so, my build.gradle already has this. Just to add that this anwer isn&#39;t complete","body":"Hey so, my build.gradle already has this. Just to add that this anwer isn&#39;t complete"}],"tags":[],"owner":{"account_id":11901140,"reputation":2217,"user_id":8709100,"display_name":"Shivam"},"comment_count":2,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1667823292,"creation_date":1667823292,"answer_id":74346417,"question_id":74346206,"body_markdown":"Add the following lines in `android/build.gradle` file\r\n```\r\ndef REACT_NATIVE_VERSION = new File([&#39;node&#39;, &#39;--print&#39;,&quot;JSON.parse(require(&#39;fs&#39;).readFileSync(require.resolve(&#39;react-native/package.json&#39;), &#39;utf-8&#39;)).version&quot;].execute(null, rootDir).text.trim())\r\n\r\nallprojects {\r\n     \r\n    configurations.all {\r\n        resolutionStrategy {\r\n            force &quot;com.facebook.react:react-native:&quot; + REACT_NATIVE_VERSION\r\n        }\r\n    }\r\n   // other code\r\n}\r\n```\r\nhttps://github.com/facebook/react-native/issues/35204#issuecomment-1304281740","title":"Task app:compileDebugJavaWithJavac failed","body":"<p>Add the following lines in <code>android/build.gradle</code> file</p>\n<pre><code>def REACT_NATIVE_VERSION = new File(['node', '--print',&quot;JSON.parse(require('fs').readFileSync(require.resolve('react-native/package.json'), 'utf-8')).version&quot;].execute(null, rootDir).text.trim())\n\nallprojects {\n     \n    configurations.all {\n        resolutionStrategy {\n            force &quot;com.facebook.react:react-native:&quot; + REACT_NATIVE_VERSION\n        }\n    }\n   // other code\n}\n</code></pre>\n<p><a href=\"https://github.com/facebook/react-native/issues/35204#issuecomment-1304281740\" rel=\"noreferrer\">https://github.com/facebook/react-native/issues/35204#issuecomment-1304281740</a></p>\n"},{"tags":[],"owner":{"account_id":10108859,"reputation":98,"user_id":7470531,"display_name":"Karthik Suthan"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1667828537,"creation_date":1667828537,"answer_id":74347556,"question_id":74346206,"body_markdown":"There will be build failures for Android due to the publish of the React Native version 0.71.0-rc0.\r\n\r\nMethod 1\r\n\r\nAdd this fix to your android -&gt; build.gradle file as follows:\r\n\r\n    buildscript {\r\n        // ...\r\n    }\r\n    \r\n    \r\n    allprojects {\r\n        repositories {\r\n           exclusiveContent {\r\n               filter {\r\n                   includeGroup &quot;com.facebook.react&quot;\r\n               }\r\n               forRepository {\r\n                   maven {\r\n                       url &quot;$rootDir/../node_modules/react-native/android&quot;\r\n                   }\r\n               }\r\n           }\r\n            // ...\r\n        }\r\n    }\r\n\r\nWhat this fix will do is apply an exclusiveContent resolution rule that will force the resolution of React Native Android library, to use the one inside node_modules\r\n\r\nRef: Fix and updates on Android build failures happening since Nov 4th 2022 #35210\r\n\r\nMethod 2\r\n\r\nIf your gradle doesn&#39;t support above, then add this to your android -&gt; build.gradle file as follows:\r\n\r\n    def REACT_NATIVE_VERSION = new File([&#39;node&#39;, &#39;--print&#39;,&quot;JSON.parse(require(&#39;fs&#39;).readFileSync(require.resolve(&#39;react-native/package.json&#39;), &#39;utf-8&#39;)).version&quot;].execute(null, rootDir).text.trim())\r\n    \r\n    \r\n    buildscript {\r\n         // ...\r\n    }\r\n        \r\n        \r\n    allprojects {\r\n        configurations.all {\r\n              resolutionStrategy {\r\n                force &quot;com.facebook.react:react-native:&quot; + REACT_NATIVE_VERSION\r\n              }\r\n        }\r\n        // ...  \r\n    }\r\n\r\nRef: https://github.com/facebook/react-native/issues/35210#issuecomment-1304536693\r\n\r\noriginal answer by [Thanhal][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/74334163/7470531","title":"Task app:compileDebugJavaWithJavac failed","body":"<p>There will be build failures for Android due to the publish of the React Native version 0.71.0-rc0.</p>\n<p>Method 1</p>\n<p>Add this fix to your android -&gt; build.gradle file as follows:</p>\n<pre><code>buildscript {\n    // ...\n}\n\n\nallprojects {\n    repositories {\n       exclusiveContent {\n           filter {\n               includeGroup &quot;com.facebook.react&quot;\n           }\n           forRepository {\n               maven {\n                   url &quot;$rootDir/../node_modules/react-native/android&quot;\n               }\n           }\n       }\n        // ...\n    }\n}\n</code></pre>\n<p>What this fix will do is apply an exclusiveContent resolution rule that will force the resolution of React Native Android library, to use the one inside node_modules</p>\n<p>Ref: Fix and updates on Android build failures happening since Nov 4th 2022 #35210</p>\n<p>Method 2</p>\n<p>If your gradle doesn't support above, then add this to your android -&gt; build.gradle file as follows:</p>\n<pre><code>def REACT_NATIVE_VERSION = new File(['node', '--print',&quot;JSON.parse(require('fs').readFileSync(require.resolve('react-native/package.json'), 'utf-8')).version&quot;].execute(null, rootDir).text.trim())\n\n\nbuildscript {\n     // ...\n}\n    \n    \nallprojects {\n    configurations.all {\n          resolutionStrategy {\n            force &quot;com.facebook.react:react-native:&quot; + REACT_NATIVE_VERSION\n          }\n    }\n    // ...  \n}\n</code></pre>\n<p>Ref: <a href=\"https://github.com/facebook/react-native/issues/35210#issuecomment-1304536693\" rel=\"nofollow noreferrer\">https://github.com/facebook/react-native/issues/35210#issuecomment-1304536693</a></p>\n<p>original answer by <a href=\"https://stackoverflow.com/a/74334163/7470531\">Thanhal</a></p>\n"},{"tags":[],"owner":{"account_id":20230650,"reputation":19,"user_id":14837281,"display_name":"LedioNase"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667900819,"creation_date":1667900819,"answer_id":74358633,"question_id":74346206,"body_markdown":"I referred to this GitHub thread https://github.com/facebook/react-native/issues/35210. It worked for me!\r\n\r\nThe steps I followed:\r\n- Deleted node_modules\r\n- Changed &quot;react-native&quot; package version (in the package.json file) from &quot;0.70.1&quot; to the latest patch I found in the thread (that was &quot;0.70.5&quot; for me)\r\n- Ran `npm install` to generate again the node_modules folder (you may want to use `yarn install` if your project is based on yarn packages)\r\n- Then `cd android` &amp;&amp; `./gradlew clean`\r\n- Finally `cd ..` (back to root folder) and `npm run android` to build the app.\r\n\r\nNote that I followed the instructions for React Native &gt;= 0.63 (version)\r\n\r\nHope this works for somebody else too!","title":"Task app:compileDebugJavaWithJavac failed","body":"<p>I referred to this GitHub thread <a href=\"https://github.com/facebook/react-native/issues/35210\" rel=\"nofollow noreferrer\">https://github.com/facebook/react-native/issues/35210</a>. It worked for me!</p>\n<p>The steps I followed:</p>\n<ul>\n<li>Deleted node_modules</li>\n<li>Changed &quot;react-native&quot; package version (in the package.json file) from &quot;0.70.1&quot; to the latest patch I found in the thread (that was &quot;0.70.5&quot; for me)</li>\n<li>Ran <code>npm install</code> to generate again the node_modules folder (you may want to use <code>yarn install</code> if your project is based on yarn packages)</li>\n<li>Then <code>cd android</code> &amp;&amp; <code>./gradlew clean</code></li>\n<li>Finally <code>cd ..</code> (back to root folder) and <code>npm run android</code> to build the app.</li>\n</ul>\n<p>Note that I followed the instructions for React Native &gt;= 0.63 (version)</p>\n<p>Hope this works for somebody else too!</p>\n"}],"owner":{"account_id":21122331,"reputation":85,"user_id":15528101,"display_name":"Kiruba kk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14005,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":74346417,"answer_count":3,"score":6,"last_activity_date":1667900819,"creation_date":1667822192,"question_id":74346206,"body_markdown":"When trying to run my react native app on android, I get this error:\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\nWhat went wrong:\r\nExecution failed for task &#39;:@react-native-firebase_app:compileDebugJavaWithJavac&#39;.\r\nCompilation failed; see the compiler error output for details.\r\n\r\nBuild failed error\r\n[link][1]\r\n\r\nIf i commented the react-native-firebase_app package, some other package also return same error.\r\n\r\n\r\n**Example:**\r\n`\r\n```\r\n&gt; Task :amazon-cognito-identity-js:compileDebugJavaWithJavac FAILED\r\nwarning: [options] source value 7 is obsolete and will be removed in a future release\r\nwarning: [options] target value 7 is obsolete and will be removed in a future release\r\nwarning: [options] To suppress warnings about obsolete options, use -Xlint:-options.\r\n/Users/spurge/Music/ghoshak_owner/node_modules/amazon-cognito-identity-js/android/src/main/java/com/amazonaws/RNAWSCognitoPackage.java:7: error: package com.facebook.react does not exist\r\nimport com.facebook.react.ReactPackage;\r\n                         ^\r\n/Users/spurge/Music/ghoshak_owner/node_modules/amazon-cognito-identity-js/android/src/main/java/com/amazonaws/RNAWSCognitoPackage.java:8: error: package com.facebook.react.bridge does not exist\r\nimport com.facebook.react.bridge.NativeModule;\r\n                                ^\r\n/Users/spurge/Music/ghoshak_owner/node_modules/amazon-cognito-identity-js/android/src/main/java/com/amazonaws/RNAWSCognitoPackage.java:9: error: package com.facebook.react.bridge does not exist\r\nimport com.facebook.react.bridge.ReactApplicationContext;\r\n                                ^\r\n/Users/spurge/Music/ghoshak_owner/node_modules/amazon-cognito-identity-js/android/src/main/java/com/amazonaws/RNAWSCognitoPackage.java:10: error: package com.facebook.react.uimanager does not exist\r\nimport com.facebook.react.uimanager.ViewManager;\r\n                                   ^\r\n/Users/spurge/Music/ghoshak_owner/node_modules/amazon-cognito-identity-js/android/src/main/java/com/amazonaws/RNAWSCognitoPackage.java:11: error: package com.facebook.react.bridge does not exist\r\nimport com.facebook.react.bridge.JavaScriptModule;\r\n                                ^\r\n/Users/spurge/Music/ghoshak_owner/node_modules/amazon-cognito-identity-js/android/src/main/java/com/amazonaws/RNAWSCognitoPackage.java:13: error: cannot find symbol\r\npublic class RNAWSCognitoPackage implements ReactPackage {\r\n                                            ^\r\n  symbol: class ReactPackage\r\n/Users/spurge/Music/ghoshak_owner/node_modules/amazon-cognito-identity-js/android/src/main/java/com/amazonaws/RNAWSCognitoPackage.java:15: error: cannot find symbol\r\n    public List&lt;NativeModule&gt; createNativeModules(ReactApplicationContext reactContext) {\r\n                                                  ^\r\n  symbol:   class ReactApplicationContext\r\n  location: class RNAWSCognitoPackage\r\n/Users/spurge/Music/ghoshak_owner/node_modules/amazon-cognito-identity-js/android/src/main/java/com/amazonaws/RNAWSCognitoPackage.java:15: error: cannot find symbol\r\n    public List&lt;NativeModule&gt; createNativeModules(ReactApplicationContext reactContext) {\r\n                ^\r\n  symbol:   class NativeModule\r\n  location: class RNAWSCognitoPackage\r\n\r\n```\r\n` \r\n\r\n**Android/build.gradle**\r\n\r\n`\r\n```\r\next {\r\n    var = &#39;3.1.1&#39;\r\n    var1 = &#39;3.6.3&#39;\r\n}\r\nbuildscript {\r\n    ext {\r\n        buildToolsVersion = &quot;28.0.3&quot;\r\n        minSdkVersion = 21\r\n        compileSdkVersion = 28\r\n        targetSdkVersion = 30\r\n        supportLibVersion = &quot;28.0.0&quot;\r\n        googlePlayServicesVersion = &quot;16.+&quot;\r\n        firebaseVersion = &quot;17.6.0&quot;\r\n        googlePlayServicesAuthVersion = &quot;19.2.0&quot; // &lt;--- use this version or newer\r\n\r\n    }\r\n    repositories {\r\n        google()\r\n        jcenter()\r\n        mavenLocal()\r\n        mavenCentral()\r\n\r\n    }\r\n    dependencies {\r\n        classpath &#39;com.android.tools.build:gradle:3.4.3&#39;\r\n        classpath &#39;com.google.gms:google-services:4.3.14&#39;\r\n\r\n    //  classpath &#39;com.android.tools.build:gradle:4.2.1&#39; // &lt;--- use this version or newer\r\n    //     classpath &#39;com.google.gms:google-services:4.3.10&#39;\r\n\r\n    }\r\n}\r\n\r\nallprojects {\r\n    repositories {\r\n        mavenLocal()\r\n        google()\r\n        mavenCentral()\r\n         maven { url &#39;https://maven.google.com&#39; }\r\n        jcenter()\r\n        maven {\r\n            // All of React Native (JS, Obj-C sources, Android binaries) is installed from npm\r\n            url &quot;$rootDir/../node_modules/react-native/android&quot;\r\n        }\r\n        maven { url &#39;https://jitpack.io&#39; }\r\n    }\r\n}\r\nsubprojects { subproject -&gt;\r\n    afterEvaluate {\r\n        if ((subproject.plugins.hasPlugin(&#39;android&#39;) || subproject.plugins.hasPlugin(&#39;android-library&#39;))) {\r\n            android {\r\n                compileSdkVersion 29\r\n                buildToolsVersion &quot;28.0.3&quot;\r\n                variantFilter { variant -&gt;\r\n                    def names = variant.flavors*.name\r\n                    if (names.contains(&quot;reactNative51&quot;) || names.contains(&quot;reactNative55&quot;)) {\r\n                        setIgnore(true)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n`\r\n**Android/app/build.gradle**\r\n\r\n`\r\n```\r\napply plugin: &quot;com.android.application&quot;\r\nimport com.android.build.OutputFile\r\n\r\n/**\r\n * The react.gradle file registers a task for each build variant (e.g. bundleDebugJsAndAssets\r\n * and bundleReleaseJsAndAssets).\r\n * These basically call `react-native bundle` with the correct arguments during the Android build\r\n * cycle. By default, bundleDebugJsAndAssets is skipped, as in debug/dev mode we prefer to load the\r\n * bundle directly from the development server. Below you can see all the possible configurations\r\n * and their defaults. If you decide to add a configuration block, make sure to add it before the\r\n * `apply from: &quot;../../node_modules/react-native/react.gradle&quot;` line.\r\n *\r\n * project.ext.react = [\r\n *   // the name of the generated asset file containing your JS bundle\r\n *   bundleAssetName: &quot;index.android.bundle&quot;,\r\n *\r\n *   // the entry file for bundle generation\r\n *   entryFile: &quot;index.android.js&quot;,\r\n *\r\n *   // whether to bundle JS and assets in debug mode\r\n *   bundleInDebug: false,\r\n *\r\n *   // whether to bundle JS and assets in release mode\r\n *   bundleInRelease: true,\r\n *\r\n *   // whether to bundle JS and assets in another build variant (if configured).\r\n *   // See http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-Build-Variants\r\n *   // The configuration property can be in the following formats\r\n *   //         &#39;bundleIn${productFlavor}${buildType}&#39;\r\n *   //         &#39;bundleIn${buildType}&#39;\r\n *   // bundleInFreeDebug: true,\r\n *   // bundleInPaidRelease: true,\r\n *   // bundleInBeta: true,\r\n *\r\n *   // whether to disable dev mode in custom build variants (by default only disabled in release)\r\n *   // for example: to disable dev mode in the staging build type (if configured)\r\n *   devDisabledInStaging: true,\r\n *   // The configuration property can be in the following formats\r\n *   //         &#39;devDisabledIn${productFlavor}${buildType}&#39;\r\n *   //         &#39;devDisabledIn${buildType}&#39;\r\n *\r\n *   // the root of your project, i.e. where &quot;package.json&quot; lives\r\n *   root: &quot;../../&quot;,\r\n *\r\n *   // where to put the JS bundle asset in debug mode\r\n *   jsBundleDirDebug: &quot;$buildDir/intermediates/assets/debug&quot;,\r\n *\r\n *   // where to put the JS bundle asset in release mode\r\n *   jsBundleDirRelease: &quot;$buildDir/intermediates/assets/release&quot;,\r\n *\r\n *   // where to put drawable resources / React Native assets, e.g. the ones you use via\r\n *   // require(&#39;./image.png&#39;)), in debug mode\r\n *   resourcesDirDebug: &quot;$buildDir/intermediates/res/merged/debug&quot;,\r\n *\r\n *   // where to put drawable resources / React Native assets, e.g. the ones you use via\r\n *   // require(&#39;./image.png&#39;)), in release mode\r\n *   resourcesDirRelease: &quot;$buildDir/intermediates/res/merged/release&quot;,\r\n *\r\n *   // by default the gradle tasks are skipped if none of the JS files or assets change; this means\r\n *   // that we don&#39;t look at files in android/ or ios/ to determine whether the tasks are up to\r\n *   // date; if you have any other folders that you want to ignore for performance reasons (gradle\r\n *   // indexes the entire tree), add them here. Alternatively, if you have JS files in android/\r\n *   // for example, you might want to remove it from here.\r\n *   inputExcludes: [&quot;android/**&quot;, &quot;ios/**&quot;],\r\n *\r\n *   // override which node gets called and with what additional arguments\r\n *   nodeExecutableAndArgs: [&quot;node&quot;],\r\n *\r\n *   // supply additional arguments to the packager\r\n *   extraPackagerArgs: []\r\n * ]\r\n */\r\n\r\nproject.ext.react = [\r\n    entryFile: &quot;index.js&quot;,\r\n    // bundleCommand: &quot;ram-bundle&quot;,\r\n    // bundleAssetName: &quot;index.android.bundle&quot;,\r\n    // bundleInAlpha: true,\r\n    // bundleInBeta: true\r\n]\r\n\r\napply from: &quot;../../node_modules/react-native/react.gradle&quot;\r\n\r\nproject.ext.vectoricons = [\r\n    iconFontNames: [ &#39;MaterialIcons.ttf&#39;, &#39;EvilIcons.ttf&#39; ] // Name of the font files you want to copy\r\n]\r\n\r\napply from: &quot;../../node_modules/react-native-vector-icons/fonts.gradle&quot;\r\n\r\n/**\r\n * Set this to true to create two separate APKs instead of one:\r\n *   - An APK that only works on ARM devices\r\n *   - An APK that only works on x86 devices\r\n * The advantage is the size of the APK is reduced by about 4MB.\r\n * Upload all the APKs to the Play Store and people will download\r\n * the correct one based on the CPU architecture of their device.\r\n */\r\ndef enableSeparateBuildPerCPUArchitecture = false\r\n\r\n/**\r\n * Run Proguard to shrink the Java bytecode in release builds.\r\n */\r\ndef enableProguardInReleaseBuilds = true\r\n\r\nandroid {\r\n    compileSdkVersion rootProject.ext.compileSdkVersion\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n\r\n\r\n    // configurations {\r\n    //     exclude group: &#39;com.google.zxing&#39;\r\n    // }\r\n\r\n\r\n  packagingOptions {\r\n     pickFirst &#39;lib/x86/libc++_shared.so&#39;\r\n     pickFirst &#39;lib/x86_64/libjsc.so&#39;\r\n     pickFirst &#39;lib/arm64-v8a/libjsc.so&#39;\r\n     pickFirst &#39;lib/arm64-v8a/libc++_shared.so&#39;\r\n     pickFirst &#39;lib/x86_64/libc++_shared.so&#39;\r\n     pickFirst &#39;lib/armeabi-v7a/libc++_shared.so&#39;\r\n   }\r\n    defaultConfig {\r\n        applicationId &quot;com.ghoshak_owner&quot;\r\n        minSdkVersion rootProject.ext.minSdkVersion\r\n        targetSdkVersion rootProject.ext.targetSdkVersion\r\n        missingDimensionStrategy &quot;RNN.reactNativeVersion&quot;, &quot;reactNative57&quot; // See note below!\r\n        versionCode 188\r\n        versionName &quot;1.0.5&quot;\r\n        multiDexEnabled true\r\n    }\r\n\r\n    signingConfigs {\r\n        debug {\r\n            storeFile file(MYAPP_RELEASE_STORE_FILE)\r\n            storePassword MYAPP_RELEASE_STORE_PASSWORD\r\n            keyAlias MYAPP_RELEASE_KEY_ALIAS\r\n            keyPassword MYAPP_RELEASE_KEY_PASSWORD\r\n        }\r\n       \r\n        release {\r\n            if (project.hasProperty(&#39;MYAPP_UPLOAD_STORE_FILE&#39;)) {\r\n                storeFile file(MYAPP_UPLOAD_STORE_FILE)\r\n                storePassword MYAPP_UPLOAD_STORE_PASSWORD\r\n                keyAlias MYAPP_UPLOAD_KEY_ALIAS\r\n                keyPassword MYAPP_UPLOAD_KEY_PASSWORD\r\n            }\r\n        }\r\n    }\r\n    splits {\r\n        abi {\r\n            reset()\r\n            enable enableSeparateBuildPerCPUArchitecture\r\n            universalApk false  // If true, also generate a universal APK\r\n            include &quot;armeabi-v7a&quot;, &quot;x86&quot;, &quot;arm64-v8a&quot;, &quot;x86_64&quot;\r\n        }\r\n    }\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled enableProguardInReleaseBuilds\r\n            shrinkResources  enableProguardInReleaseBuilds\r\n            proguardFiles getDefaultProguardFile(&quot;proguard-android.txt&quot;), &quot;proguard-rules.pro&quot;\r\n            signingConfig signingConfigs.release\r\n        }\r\n    }\r\n    // applicationVariants are e.g. debug, release\r\n    applicationVariants.all { variant -&gt;\r\n        variant.outputs.each { output -&gt;\r\n            // For each separate APK per architecture, set a unique version code as described here:\r\n            // http://tools.android.com/tech-docs/new-build-system/user-guide/apk-splits\r\n            def versionCodes = [&quot;armeabi-v7a&quot;:1, &quot;x86&quot;:2, &quot;arm64-v8a&quot;: 3, &quot;x86_64&quot;: 4]\r\n            \r\n            def abi = output.getFilter(OutputFile.ABI)\r\n            if (abi != null) {  // null for the universal-debug, universal-release variants\r\n                output.versionCodeOverride =\r\n                        versionCodes.get(abi) * 1048576 + defaultConfig.versionCode\r\n            }\r\n        }\r\n    }\r\n    dexOptions {\r\n    incremental true\r\n    javaMaxHeapSize &quot;2048M&quot;\r\n    jumboMode = true\r\n}\r\n}\r\n\r\nconfigurations {\r\ncompile.exclude group: &#39;com.google.zxing&#39;\r\n compile.exclude group: &quot;junit&quot;, module: &quot;junit&quot;\r\n}\r\n\r\ndependencies {\r\n    implementation project(&#39;:react-native-bluetooth-escpos-printer&#39;)\r\n    implementation project(&#39;:react-native-google-signin&#39;)\r\n    implementation project(&#39;:react-native-linear-gradient&#39;)\r\n    implementation project(&#39;:react-native-view-shot&#39;)\r\n    // implementation project(&#39;:@react-native-community_toolbar-android&#39;)\r\n    // implementation project(&#39;:@react-native-firebase_dynamic-links&#39;)\r\n    // implementation project(&#39;:@react-native-firebase_app&#39;)\r\n    // implementation project(&#39;:react-native-safe-area-context&#39;)\r\n    // implementation project(&#39;:react-native-reanimated&#39;)\r\n    implementation project(&#39;:react-native-localization&#39;)\r\n    // implementation project(&#39;:@leesiongchan_react-native-esc-pos&#39;)\r\n    implementation project(&#39;:react-native-notification-sounds&#39;)\r\n    implementation project(&#39;:react-native-image-resizer&#39;)\r\n    implementation project(&#39;:react-native-charts-wrapper&#39;)\r\n    implementation project(&#39;:react-native-razorpay&#39;)\r\n    implementation project(&#39;:react-native-device-info&#39;)\r\n    implementation project(&#39;:react-native-html-to-pdf&#39;)\r\n    implementation project(&#39;:react-native-share&#39;)\r\n    implementation project(&#39;:react-native-pdf-lib&#39;)\r\n    implementation project(&#39;:react-native-google-places&#39;)\r\n    // implementation project(&#39;:react-native-camera&#39;)\r\n    implementation project(&#39;:react-native-maps&#39;)\r\n    implementation project(&#39;:react-native-pdf&#39;)\r\n    implementation project(&#39;:rn-fetch-blob&#39;)\r\n    // implementation project(&#39;:@philly25_react-native-paytm&#39;)\r\n    implementation project(&#39;:react-native-webview&#39;)\r\n    implementation project(&#39;:react-native-youtube&#39;)\r\n    implementation project(&#39;:react-native-camera-kit&#39;)\r\n    implementation project(&#39;:react-native-push-notification&#39;)\r\n    implementation project(&#39;:react-native-image-crop-picker&#39;)\r\n    implementation project(&#39;:react-native-svg&#39;)\r\n    implementation project(&#39;:react-native-vector-icons&#39;)\r\n    implementation project(&#39;:amazon-cognito-identity-js&#39;)\r\n    implementation fileTree(dir: &quot;libs&quot;, include: [&quot;*.jar&quot;])\r\n    implementation &quot;com.android.support:appcompat-v7:${rootProject.ext.supportLibVersion}&quot;\r\n    implementation &quot;com.facebook.react:react-native:+&quot;  // From node_modules\r\n    implementation project(&#39;:react-native-navigation&#39;)\r\n    implementation project(&#39;:react-native-splash-screen&#39;)\r\n    implementation project(&#39;:react-native-geolocation-service&#39;)\r\n    // implementation &#39;com.android.support:multidex:1.0.3&#39;\r\n    implementation &#39;com.android.support:multidex:1.0.3&#39;\r\n      // For WebP support, including animated WebP\r\n    implementation &#39;com.facebook.fresco:animated-webp:1.3.0&#39;\r\n    implementation &#39;com.facebook.fresco:webpsupport:1.3.0&#39; \r\n    // For WebP support, without animations\r\n    compile &#39;com.facebook.fresco:webpsupport:1.3.0&#39;\r\n    implementation &#39;com.facebook.android:facebook-android-sdk:[5,6)&#39;\r\n    implementation &#39;com.facebook.fresco:webpsupport:1.3.0&#39;\r\n    // implementation project(path: &quot;:@react-native-firebase_app&quot;)\r\n    // implementation project(path: &quot;:@react-native-firebase_dynamic-links&quot;)\r\n    // implementation project(&#39;:react-native-esc-pos&#39;)\r\n    implementation &#39;com.android.support:support-compat:+&#39;\r\n\r\n   \r\n\r\n     implementation &#39;com.google.android.play:core:1.8.2&#39;\r\n        implementation &#39;com.google.android.material:material:1.2.1&#39;\r\n\r\n        implementation &#39;com.android.support:design:25.1.0&#39;\r\n    implementation &#39;androidx.swiperefreshlayout:swiperefreshlayout:1.0.0&#39; // &lt;-- add this; newer versions should work too\r\n\r\n    // implementation platform(&#39;com.google.firebase:firebase-bom:26.5.0&#39;)\r\n}\r\n\r\n// Run this once to be able to run the application with BUCK\r\n// puts all compile dependencies into folder libs for BUCK to use\r\ntask copyDownloadableDepsToLibs(type: Copy) {\r\n    from configurations.compile\r\n    into &#39;libs&#39;\r\n}\r\n //apply plugin: &#39;com.google.gms.google-services&#39;\r\n\r\n```\r\n`\r\n**setting.gradle**\r\n\r\n`\r\n```\r\nrootProject.name = &#39;ghoshak_owner&#39;\r\ninclude &#39;:react-native-bluetooth-escpos-printer&#39;\r\nproject(&#39;:react-native-bluetooth-escpos-printer&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-bluetooth-escpos-printer/android&#39;)\r\ninclude &#39;:react-native-google-signin&#39;\r\nproject(&#39;:react-native-google-signin&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-google-signin/android&#39;)\r\ninclude &#39;:react-native-linear-gradient&#39;\r\nproject(&#39;:react-native-linear-gradient&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-linear-gradient/android&#39;)\r\ninclude &#39;:react-native-view-shot&#39;\r\nproject(&#39;:react-native-view-shot&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-view-shot/android&#39;)\r\n// include &#39;:@react-native-community_toolbar-android&#39;\r\n// project(&#39;:@react-native-community_toolbar-android&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/@react-native-community/toolbar-android/android&#39;)\r\n// include &#39;:@react-native-firebase_dynamic-links&#39;\r\n// project(&#39;:@react-native-firebase_dynamic-links&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/@react-native-firebase/dynamic-links/android&#39;)\r\n// include &#39;:@react-native-firebase_app&#39;\r\n// project(&#39;:@react-native-firebase_app&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/@react-native-firebase/app/android&#39;)\r\n// include &#39;:react-native-safe-area-context&#39;\r\n// project(&#39;:react-native-safe-area-context&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-safe-area-context/android&#39;)\r\n// include &#39;:react-native-reanimated&#39;\r\n// project(&#39;:react-native-reanimated&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-reanimated/android&#39;)\r\ninclude &#39;:react-native-localization&#39;\r\nproject(&#39;:react-native-localization&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-localization/android&#39;)\r\n// include &#39;:@leesiongchan_react-native-esc-pos&#39;\r\n// project(&#39;:@leesiongchan_react-native-esc-pos&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/@leesiongchan/react-native-esc-pos/android&#39;)\r\ninclude &#39;:react-native-notification-sounds&#39;\r\nproject(&#39;:react-native-notification-sounds&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-notification-sounds/android&#39;)\r\ninclude &#39;:react-native-image-resizer&#39;\r\nproject(&#39;:react-native-image-resizer&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-image-resizer/android&#39;)\r\ninclude &#39;:react-native-charts-wrapper&#39;\r\nproject(&#39;:react-native-charts-wrapper&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-charts-wrapper/android&#39;)\r\ninclude &#39;:react-native-razorpay&#39;\r\nproject(&#39;:react-native-razorpay&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-razorpay/android&#39;)\r\ninclude &#39;:react-native-device-info&#39;\r\nproject(&#39;:react-native-device-info&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-device-info/android&#39;)\r\ninclude &#39;:react-native-html-to-pdf&#39;\r\nproject(&#39;:react-native-html-to-pdf&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-html-to-pdf/android&#39;)\r\ninclude &#39;:react-native-share&#39;\r\nproject(&#39;:react-native-share&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-share/android&#39;)\r\ninclude &#39;:react-native-pdf-lib&#39;\r\nproject(&#39;:react-native-pdf-lib&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-pdf-lib/android&#39;)\r\ninclude &#39;:react-native-google-places&#39;\r\nproject(&#39;:react-native-google-places&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-google-places/android&#39;)\r\n// include &#39;:react-native-camera&#39;\r\n// project(&#39;:react-native-camera&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-camera/android&#39;)\r\ninclude &#39;:react-native-maps&#39;\r\nproject(&#39;:react-native-maps&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-maps/lib/android&#39;)\r\ninclude &#39;:react-native-pdf&#39;\r\nproject(&#39;:react-native-pdf&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-pdf/android&#39;)\r\ninclude &#39;:rn-fetch-blob&#39;\r\nproject(&#39;:rn-fetch-blob&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/rn-fetch-blob/android&#39;)\r\n// include &#39;:@philly25_react-native-paytm&#39;\r\n// project(&#39;:@philly25_react-native-paytm&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/@philly25/react-native-paytm/android&#39;)\r\ninclude &#39;:react-native-webview&#39;\r\nproject(&#39;:react-native-webview&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-webview/android&#39;)\r\ninclude &#39;:react-native-youtube&#39;\r\nproject(&#39;:react-native-youtube&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-youtube/android&#39;)\r\ninclude &#39;:react-native-camera-kit&#39;\r\nproject(&#39;:react-native-camera-kit&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-camera-kit/android&#39;)\r\ninclude &#39;:react-native-push-notification&#39;\r\nproject(&#39;:react-native-push-notification&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-push-notification/android&#39;)\r\ninclude &#39;:react-native-image-crop-picker&#39;\r\nproject(&#39;:react-native-image-crop-picker&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-image-crop-picker/android&#39;)\r\ninclude &#39;:react-native-svg&#39;\r\nproject(&#39;:react-native-svg&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-svg/android&#39;)\r\ninclude &#39;:react-native-vector-icons&#39;\r\nproject(&#39;:react-native-vector-icons&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-vector-icons/android&#39;)\r\ninclude &#39;:amazon-cognito-identity-js&#39;\r\nproject(&#39;:amazon-cognito-identity-js&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/amazon-cognito-identity-js/android&#39;)\r\ninclude &#39;:react-native-navigation&#39;\r\nproject(&#39;:react-native-navigation&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-navigation/lib/android/app/&#39;)\r\ninclude &#39;:react-native-image-crop-picker&#39;\r\nproject(&#39;:react-native-image-crop-picker&#39;).projectDir = new File(settingsDir, &#39;../node_modules/react-native-image-crop-picker/android&#39;)\r\ninclude &#39;:react-native-push-notification&#39;\r\nproject(&#39;:react-native-push-notification&#39;).projectDir = file(&#39;../node_modules/react-native-push-notification/android&#39;)\r\ninclude &#39;:react-native-splash-screen&#39;   \r\nproject(&#39;:react-native-splash-screen&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-splash-screen/android&#39;)\r\ninclude &#39;:react-native-geolocation-service&#39;\r\nproject(&#39;:react-native-geolocation-service&#39;).projectDir = new File(rootProject.projectDir, &#39;../node_modules/react-native-geolocation-service/android&#39;)\r\n\r\n// include &#39;:@react-native-firebase_app&#39;\r\n// project(&#39;:@react-native-firebase_app&#39;).projectDir = new File(rootProject.projectDir, &#39;./../node_modules/@react-native-firebase/app/android&#39;)\r\n// include &#39;:@react-native-firebase_dynamic-links&#39;\r\n// project(&#39;:@react-native-firebase_dynamic-links&#39;).projectDir = new File(rootProject.projectDir, &#39;./../node_modules/@react-native-firebase/dynamic-links/android&#39;)\r\n\r\n// include &#39;:react-native-esc-pos&#39;\r\n// project(&#39;:react-native-esc-pos&#39;).projectDir = new File(rootProject.projectDir, \t&#39;../node_modules/@leesiongchan/react-native-esc-pos/android&#39;)\r\ninclude &#39;:app&#39;\r\n\r\n```\r\n`\r\n\r\n\r\n  [1]: https://justpaste.it/27m0w","title":"Task app:compileDebugJavaWithJavac failed","body":"<p>When trying to run my react native app on android, I get this error:</p>\n<p>FAILURE: Build failed with an exception.</p>\n<p>What went wrong:\nExecution failed for task ':@react-native-firebase_app:compileDebugJavaWithJavac'.\nCompilation failed; see the compiler error output for details.</p>\n<p>Build failed error\n<a href=\"https://justpaste.it/27m0w\" rel=\"noreferrer\">link</a></p>\n<p>If i commented the react-native-firebase_app package, some other package also return same error.</p>\n<p><strong>Example:</strong>\n`</p>\n<pre><code>&gt; Task :amazon-cognito-identity-js:compileDebugJavaWithJavac FAILED\nwarning: [options] source value 7 is obsolete and will be removed in a future release\nwarning: [options] target value 7 is obsolete and will be removed in a future release\nwarning: [options] To suppress warnings about obsolete options, use -Xlint:-options.\n/Users/spurge/Music/ghoshak_owner/node_modules/amazon-cognito-identity-js/android/src/main/java/com/amazonaws/RNAWSCognitoPackage.java:7: error: package com.facebook.react does not exist\nimport com.facebook.react.ReactPackage;\n                         ^\n/Users/spurge/Music/ghoshak_owner/node_modules/amazon-cognito-identity-js/android/src/main/java/com/amazonaws/RNAWSCognitoPackage.java:8: error: package com.facebook.react.bridge does not exist\nimport com.facebook.react.bridge.NativeModule;\n                                ^\n/Users/spurge/Music/ghoshak_owner/node_modules/amazon-cognito-identity-js/android/src/main/java/com/amazonaws/RNAWSCognitoPackage.java:9: error: package com.facebook.react.bridge does not exist\nimport com.facebook.react.bridge.ReactApplicationContext;\n                                ^\n/Users/spurge/Music/ghoshak_owner/node_modules/amazon-cognito-identity-js/android/src/main/java/com/amazonaws/RNAWSCognitoPackage.java:10: error: package com.facebook.react.uimanager does not exist\nimport com.facebook.react.uimanager.ViewManager;\n                                   ^\n/Users/spurge/Music/ghoshak_owner/node_modules/amazon-cognito-identity-js/android/src/main/java/com/amazonaws/RNAWSCognitoPackage.java:11: error: package com.facebook.react.bridge does not exist\nimport com.facebook.react.bridge.JavaScriptModule;\n                                ^\n/Users/spurge/Music/ghoshak_owner/node_modules/amazon-cognito-identity-js/android/src/main/java/com/amazonaws/RNAWSCognitoPackage.java:13: error: cannot find symbol\npublic class RNAWSCognitoPackage implements ReactPackage {\n                                            ^\n  symbol: class ReactPackage\n/Users/spurge/Music/ghoshak_owner/node_modules/amazon-cognito-identity-js/android/src/main/java/com/amazonaws/RNAWSCognitoPackage.java:15: error: cannot find symbol\n    public List&lt;NativeModule&gt; createNativeModules(ReactApplicationContext reactContext) {\n                                                  ^\n  symbol:   class ReactApplicationContext\n  location: class RNAWSCognitoPackage\n/Users/spurge/Music/ghoshak_owner/node_modules/amazon-cognito-identity-js/android/src/main/java/com/amazonaws/RNAWSCognitoPackage.java:15: error: cannot find symbol\n    public List&lt;NativeModule&gt; createNativeModules(ReactApplicationContext reactContext) {\n                ^\n  symbol:   class NativeModule\n  location: class RNAWSCognitoPackage\n\n</code></pre>\n<p>`</p>\n<p><strong>Android/build.gradle</strong></p>\n<p>`</p>\n<pre><code>ext {\n    var = '3.1.1'\n    var1 = '3.6.3'\n}\nbuildscript {\n    ext {\n        buildToolsVersion = &quot;28.0.3&quot;\n        minSdkVersion = 21\n        compileSdkVersion = 28\n        targetSdkVersion = 30\n        supportLibVersion = &quot;28.0.0&quot;\n        googlePlayServicesVersion = &quot;16.+&quot;\n        firebaseVersion = &quot;17.6.0&quot;\n        googlePlayServicesAuthVersion = &quot;19.2.0&quot; // &lt;--- use this version or newer\n\n    }\n    repositories {\n        google()\n        jcenter()\n        mavenLocal()\n        mavenCentral()\n\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.4.3'\n        classpath 'com.google.gms:google-services:4.3.14'\n\n    //  classpath 'com.android.tools.build:gradle:4.2.1' // &lt;--- use this version or newer\n    //     classpath 'com.google.gms:google-services:4.3.10'\n\n    }\n}\n\nallprojects {\n    repositories {\n        mavenLocal()\n        google()\n        mavenCentral()\n         maven { url 'https://maven.google.com' }\n        jcenter()\n        maven {\n            // All of React Native (JS, Obj-C sources, Android binaries) is installed from npm\n            url &quot;$rootDir/../node_modules/react-native/android&quot;\n        }\n        maven { url 'https://jitpack.io' }\n    }\n}\nsubprojects { subproject -&gt;\n    afterEvaluate {\n        if ((subproject.plugins.hasPlugin('android') || subproject.plugins.hasPlugin('android-library'))) {\n            android {\n                compileSdkVersion 29\n                buildToolsVersion &quot;28.0.3&quot;\n                variantFilter { variant -&gt;\n                    def names = variant.flavors*.name\n                    if (names.contains(&quot;reactNative51&quot;) || names.contains(&quot;reactNative55&quot;)) {\n                        setIgnore(true)\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>`\n<strong>Android/app/build.gradle</strong></p>\n<p>`</p>\n<pre><code>apply plugin: &quot;com.android.application&quot;\nimport com.android.build.OutputFile\n\n/**\n * The react.gradle file registers a task for each build variant (e.g. bundleDebugJsAndAssets\n * and bundleReleaseJsAndAssets).\n * These basically call `react-native bundle` with the correct arguments during the Android build\n * cycle. By default, bundleDebugJsAndAssets is skipped, as in debug/dev mode we prefer to load the\n * bundle directly from the development server. Below you can see all the possible configurations\n * and their defaults. If you decide to add a configuration block, make sure to add it before the\n * `apply from: &quot;../../node_modules/react-native/react.gradle&quot;` line.\n *\n * project.ext.react = [\n *   // the name of the generated asset file containing your JS bundle\n *   bundleAssetName: &quot;index.android.bundle&quot;,\n *\n *   // the entry file for bundle generation\n *   entryFile: &quot;index.android.js&quot;,\n *\n *   // whether to bundle JS and assets in debug mode\n *   bundleInDebug: false,\n *\n *   // whether to bundle JS and assets in release mode\n *   bundleInRelease: true,\n *\n *   // whether to bundle JS and assets in another build variant (if configured).\n *   // See http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-Build-Variants\n *   // The configuration property can be in the following formats\n *   //         'bundleIn${productFlavor}${buildType}'\n *   //         'bundleIn${buildType}'\n *   // bundleInFreeDebug: true,\n *   // bundleInPaidRelease: true,\n *   // bundleInBeta: true,\n *\n *   // whether to disable dev mode in custom build variants (by default only disabled in release)\n *   // for example: to disable dev mode in the staging build type (if configured)\n *   devDisabledInStaging: true,\n *   // The configuration property can be in the following formats\n *   //         'devDisabledIn${productFlavor}${buildType}'\n *   //         'devDisabledIn${buildType}'\n *\n *   // the root of your project, i.e. where &quot;package.json&quot; lives\n *   root: &quot;../../&quot;,\n *\n *   // where to put the JS bundle asset in debug mode\n *   jsBundleDirDebug: &quot;$buildDir/intermediates/assets/debug&quot;,\n *\n *   // where to put the JS bundle asset in release mode\n *   jsBundleDirRelease: &quot;$buildDir/intermediates/assets/release&quot;,\n *\n *   // where to put drawable resources / React Native assets, e.g. the ones you use via\n *   // require('./image.png')), in debug mode\n *   resourcesDirDebug: &quot;$buildDir/intermediates/res/merged/debug&quot;,\n *\n *   // where to put drawable resources / React Native assets, e.g. the ones you use via\n *   // require('./image.png')), in release mode\n *   resourcesDirRelease: &quot;$buildDir/intermediates/res/merged/release&quot;,\n *\n *   // by default the gradle tasks are skipped if none of the JS files or assets change; this means\n *   // that we don't look at files in android/ or ios/ to determine whether the tasks are up to\n *   // date; if you have any other folders that you want to ignore for performance reasons (gradle\n *   // indexes the entire tree), add them here. Alternatively, if you have JS files in android/\n *   // for example, you might want to remove it from here.\n *   inputExcludes: [&quot;android/**&quot;, &quot;ios/**&quot;],\n *\n *   // override which node gets called and with what additional arguments\n *   nodeExecutableAndArgs: [&quot;node&quot;],\n *\n *   // supply additional arguments to the packager\n *   extraPackagerArgs: []\n * ]\n */\n\nproject.ext.react = [\n    entryFile: &quot;index.js&quot;,\n    // bundleCommand: &quot;ram-bundle&quot;,\n    // bundleAssetName: &quot;index.android.bundle&quot;,\n    // bundleInAlpha: true,\n    // bundleInBeta: true\n]\n\napply from: &quot;../../node_modules/react-native/react.gradle&quot;\n\nproject.ext.vectoricons = [\n    iconFontNames: [ 'MaterialIcons.ttf', 'EvilIcons.ttf' ] // Name of the font files you want to copy\n]\n\napply from: &quot;../../node_modules/react-native-vector-icons/fonts.gradle&quot;\n\n/**\n * Set this to true to create two separate APKs instead of one:\n *   - An APK that only works on ARM devices\n *   - An APK that only works on x86 devices\n * The advantage is the size of the APK is reduced by about 4MB.\n * Upload all the APKs to the Play Store and people will download\n * the correct one based on the CPU architecture of their device.\n */\ndef enableSeparateBuildPerCPUArchitecture = false\n\n/**\n * Run Proguard to shrink the Java bytecode in release builds.\n */\ndef enableProguardInReleaseBuilds = true\n\nandroid {\n    compileSdkVersion rootProject.ext.compileSdkVersion\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n\n\n    // configurations {\n    //     exclude group: 'com.google.zxing'\n    // }\n\n\n  packagingOptions {\n     pickFirst 'lib/x86/libc++_shared.so'\n     pickFirst 'lib/x86_64/libjsc.so'\n     pickFirst 'lib/arm64-v8a/libjsc.so'\n     pickFirst 'lib/arm64-v8a/libc++_shared.so'\n     pickFirst 'lib/x86_64/libc++_shared.so'\n     pickFirst 'lib/armeabi-v7a/libc++_shared.so'\n   }\n    defaultConfig {\n        applicationId &quot;com.ghoshak_owner&quot;\n        minSdkVersion rootProject.ext.minSdkVersion\n        targetSdkVersion rootProject.ext.targetSdkVersion\n        missingDimensionStrategy &quot;RNN.reactNativeVersion&quot;, &quot;reactNative57&quot; // See note below!\n        versionCode 188\n        versionName &quot;1.0.5&quot;\n        multiDexEnabled true\n    }\n\n    signingConfigs {\n        debug {\n            storeFile file(MYAPP_RELEASE_STORE_FILE)\n            storePassword MYAPP_RELEASE_STORE_PASSWORD\n            keyAlias MYAPP_RELEASE_KEY_ALIAS\n            keyPassword MYAPP_RELEASE_KEY_PASSWORD\n        }\n       \n        release {\n            if (project.hasProperty('MYAPP_UPLOAD_STORE_FILE')) {\n                storeFile file(MYAPP_UPLOAD_STORE_FILE)\n                storePassword MYAPP_UPLOAD_STORE_PASSWORD\n                keyAlias MYAPP_UPLOAD_KEY_ALIAS\n                keyPassword MYAPP_UPLOAD_KEY_PASSWORD\n            }\n        }\n    }\n    splits {\n        abi {\n            reset()\n            enable enableSeparateBuildPerCPUArchitecture\n            universalApk false  // If true, also generate a universal APK\n            include &quot;armeabi-v7a&quot;, &quot;x86&quot;, &quot;arm64-v8a&quot;, &quot;x86_64&quot;\n        }\n    }\n    buildTypes {\n        release {\n            minifyEnabled enableProguardInReleaseBuilds\n            shrinkResources  enableProguardInReleaseBuilds\n            proguardFiles getDefaultProguardFile(&quot;proguard-android.txt&quot;), &quot;proguard-rules.pro&quot;\n            signingConfig signingConfigs.release\n        }\n    }\n    // applicationVariants are e.g. debug, release\n    applicationVariants.all { variant -&gt;\n        variant.outputs.each { output -&gt;\n            // For each separate APK per architecture, set a unique version code as described here:\n            // http://tools.android.com/tech-docs/new-build-system/user-guide/apk-splits\n            def versionCodes = [&quot;armeabi-v7a&quot;:1, &quot;x86&quot;:2, &quot;arm64-v8a&quot;: 3, &quot;x86_64&quot;: 4]\n            \n            def abi = output.getFilter(OutputFile.ABI)\n            if (abi != null) {  // null for the universal-debug, universal-release variants\n                output.versionCodeOverride =\n                        versionCodes.get(abi) * 1048576 + defaultConfig.versionCode\n            }\n        }\n    }\n    dexOptions {\n    incremental true\n    javaMaxHeapSize &quot;2048M&quot;\n    jumboMode = true\n}\n}\n\nconfigurations {\ncompile.exclude group: 'com.google.zxing'\n compile.exclude group: &quot;junit&quot;, module: &quot;junit&quot;\n}\n\ndependencies {\n    implementation project(':react-native-bluetooth-escpos-printer')\n    implementation project(':react-native-google-signin')\n    implementation project(':react-native-linear-gradient')\n    implementation project(':react-native-view-shot')\n    // implementation project(':@react-native-community_toolbar-android')\n    // implementation project(':@react-native-firebase_dynamic-links')\n    // implementation project(':@react-native-firebase_app')\n    // implementation project(':react-native-safe-area-context')\n    // implementation project(':react-native-reanimated')\n    implementation project(':react-native-localization')\n    // implementation project(':@leesiongchan_react-native-esc-pos')\n    implementation project(':react-native-notification-sounds')\n    implementation project(':react-native-image-resizer')\n    implementation project(':react-native-charts-wrapper')\n    implementation project(':react-native-razorpay')\n    implementation project(':react-native-device-info')\n    implementation project(':react-native-html-to-pdf')\n    implementation project(':react-native-share')\n    implementation project(':react-native-pdf-lib')\n    implementation project(':react-native-google-places')\n    // implementation project(':react-native-camera')\n    implementation project(':react-native-maps')\n    implementation project(':react-native-pdf')\n    implementation project(':rn-fetch-blob')\n    // implementation project(':@philly25_react-native-paytm')\n    implementation project(':react-native-webview')\n    implementation project(':react-native-youtube')\n    implementation project(':react-native-camera-kit')\n    implementation project(':react-native-push-notification')\n    implementation project(':react-native-image-crop-picker')\n    implementation project(':react-native-svg')\n    implementation project(':react-native-vector-icons')\n    implementation project(':amazon-cognito-identity-js')\n    implementation fileTree(dir: &quot;libs&quot;, include: [&quot;*.jar&quot;])\n    implementation &quot;com.android.support:appcompat-v7:${rootProject.ext.supportLibVersion}&quot;\n    implementation &quot;com.facebook.react:react-native:+&quot;  // From node_modules\n    implementation project(':react-native-navigation')\n    implementation project(':react-native-splash-screen')\n    implementation project(':react-native-geolocation-service')\n    // implementation 'com.android.support:multidex:1.0.3'\n    implementation 'com.android.support:multidex:1.0.3'\n      // For WebP support, including animated WebP\n    implementation 'com.facebook.fresco:animated-webp:1.3.0'\n    implementation 'com.facebook.fresco:webpsupport:1.3.0' \n    // For WebP support, without animations\n    compile 'com.facebook.fresco:webpsupport:1.3.0'\n    implementation 'com.facebook.android:facebook-android-sdk:[5,6)'\n    implementation 'com.facebook.fresco:webpsupport:1.3.0'\n    // implementation project(path: &quot;:@react-native-firebase_app&quot;)\n    // implementation project(path: &quot;:@react-native-firebase_dynamic-links&quot;)\n    // implementation project(':react-native-esc-pos')\n    implementation 'com.android.support:support-compat:+'\n\n   \n\n     implementation 'com.google.android.play:core:1.8.2'\n        implementation 'com.google.android.material:material:1.2.1'\n\n        implementation 'com.android.support:design:25.1.0'\n    implementation 'androidx.swiperefreshlayout:swiperefreshlayout:1.0.0' // &lt;-- add this; newer versions should work too\n\n    // implementation platform('com.google.firebase:firebase-bom:26.5.0')\n}\n\n// Run this once to be able to run the application with BUCK\n// puts all compile dependencies into folder libs for BUCK to use\ntask copyDownloadableDepsToLibs(type: Copy) {\n    from configurations.compile\n    into 'libs'\n}\n //apply plugin: 'com.google.gms.google-services'\n\n</code></pre>\n<p>`\n<strong>setting.gradle</strong></p>\n<p>`</p>\n<pre><code>rootProject.name = 'ghoshak_owner'\ninclude ':react-native-bluetooth-escpos-printer'\nproject(':react-native-bluetooth-escpos-printer').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-bluetooth-escpos-printer/android')\ninclude ':react-native-google-signin'\nproject(':react-native-google-signin').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-google-signin/android')\ninclude ':react-native-linear-gradient'\nproject(':react-native-linear-gradient').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-linear-gradient/android')\ninclude ':react-native-view-shot'\nproject(':react-native-view-shot').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-view-shot/android')\n// include ':@react-native-community_toolbar-android'\n// project(':@react-native-community_toolbar-android').projectDir = new File(rootProject.projectDir, '../node_modules/@react-native-community/toolbar-android/android')\n// include ':@react-native-firebase_dynamic-links'\n// project(':@react-native-firebase_dynamic-links').projectDir = new File(rootProject.projectDir, '../node_modules/@react-native-firebase/dynamic-links/android')\n// include ':@react-native-firebase_app'\n// project(':@react-native-firebase_app').projectDir = new File(rootProject.projectDir, '../node_modules/@react-native-firebase/app/android')\n// include ':react-native-safe-area-context'\n// project(':react-native-safe-area-context').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-safe-area-context/android')\n// include ':react-native-reanimated'\n// project(':react-native-reanimated').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-reanimated/android')\ninclude ':react-native-localization'\nproject(':react-native-localization').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-localization/android')\n// include ':@leesiongchan_react-native-esc-pos'\n// project(':@leesiongchan_react-native-esc-pos').projectDir = new File(rootProject.projectDir, '../node_modules/@leesiongchan/react-native-esc-pos/android')\ninclude ':react-native-notification-sounds'\nproject(':react-native-notification-sounds').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-notification-sounds/android')\ninclude ':react-native-image-resizer'\nproject(':react-native-image-resizer').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-image-resizer/android')\ninclude ':react-native-charts-wrapper'\nproject(':react-native-charts-wrapper').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-charts-wrapper/android')\ninclude ':react-native-razorpay'\nproject(':react-native-razorpay').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-razorpay/android')\ninclude ':react-native-device-info'\nproject(':react-native-device-info').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-device-info/android')\ninclude ':react-native-html-to-pdf'\nproject(':react-native-html-to-pdf').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-html-to-pdf/android')\ninclude ':react-native-share'\nproject(':react-native-share').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-share/android')\ninclude ':react-native-pdf-lib'\nproject(':react-native-pdf-lib').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-pdf-lib/android')\ninclude ':react-native-google-places'\nproject(':react-native-google-places').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-google-places/android')\n// include ':react-native-camera'\n// project(':react-native-camera').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-camera/android')\ninclude ':react-native-maps'\nproject(':react-native-maps').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-maps/lib/android')\ninclude ':react-native-pdf'\nproject(':react-native-pdf').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-pdf/android')\ninclude ':rn-fetch-blob'\nproject(':rn-fetch-blob').projectDir = new File(rootProject.projectDir, '../node_modules/rn-fetch-blob/android')\n// include ':@philly25_react-native-paytm'\n// project(':@philly25_react-native-paytm').projectDir = new File(rootProject.projectDir, '../node_modules/@philly25/react-native-paytm/android')\ninclude ':react-native-webview'\nproject(':react-native-webview').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-webview/android')\ninclude ':react-native-youtube'\nproject(':react-native-youtube').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-youtube/android')\ninclude ':react-native-camera-kit'\nproject(':react-native-camera-kit').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-camera-kit/android')\ninclude ':react-native-push-notification'\nproject(':react-native-push-notification').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-push-notification/android')\ninclude ':react-native-image-crop-picker'\nproject(':react-native-image-crop-picker').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-image-crop-picker/android')\ninclude ':react-native-svg'\nproject(':react-native-svg').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-svg/android')\ninclude ':react-native-vector-icons'\nproject(':react-native-vector-icons').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-vector-icons/android')\ninclude ':amazon-cognito-identity-js'\nproject(':amazon-cognito-identity-js').projectDir = new File(rootProject.projectDir, '../node_modules/amazon-cognito-identity-js/android')\ninclude ':react-native-navigation'\nproject(':react-native-navigation').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-navigation/lib/android/app/')\ninclude ':react-native-image-crop-picker'\nproject(':react-native-image-crop-picker').projectDir = new File(settingsDir, '../node_modules/react-native-image-crop-picker/android')\ninclude ':react-native-push-notification'\nproject(':react-native-push-notification').projectDir = file('../node_modules/react-native-push-notification/android')\ninclude ':react-native-splash-screen'   \nproject(':react-native-splash-screen').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-splash-screen/android')\ninclude ':react-native-geolocation-service'\nproject(':react-native-geolocation-service').projectDir = new File(rootProject.projectDir, '../node_modules/react-native-geolocation-service/android')\n\n// include ':@react-native-firebase_app'\n// project(':@react-native-firebase_app').projectDir = new File(rootProject.projectDir, './../node_modules/@react-native-firebase/app/android')\n// include ':@react-native-firebase_dynamic-links'\n// project(':@react-native-firebase_dynamic-links').projectDir = new File(rootProject.projectDir, './../node_modules/@react-native-firebase/dynamic-links/android')\n\n// include ':react-native-esc-pos'\n// project(':react-native-esc-pos').projectDir = new File(rootProject.projectDir,   '../node_modules/@leesiongchan/react-native-esc-pos/android')\ninclude ':app'\n\n</code></pre>\n<p>`</p>\n"},{"tags":["java","api","selenium-webdriver","testng","rest-assured"],"comments":[{"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"score":0,"creation_date":1667840121,"post_id":74346703,"comment_id":131258363,"body_markdown":"Does this answer your question? [How can we use local Chrome&#39;s cookies to login using Selenium?](https://stackoverflow.com/questions/48869775/how-can-we-use-local-chromes-cookies-to-login-using-selenium)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/48869775/how-can-we-use-local-chromes-cookies-to-login-using-selenium\">How can we use local Chrome&#39;s cookies to login using Selenium?</a>"}],"answers":[{"tags":[],"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667900544,"creation_date":1667900544,"answer_id":74358581,"question_id":74346703,"body_markdown":"It&#39;s pretty simple, see https://www.guru99.com/handling-cookies-selenium-webdriver.html\r\n\r\n**Code sample:**\r\n\r\n    package tests;\r\n    \r\n    import java.util.Set;\r\n    \r\n    import org.openqa.selenium.Cookie;\r\n    import org.openqa.selenium.WebDriver;\r\n    \r\n    import selenium.ChromeDriverSetup;\r\n    \r\n    public class CookieValueTest extends ChromeDriverSetup {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t\r\n    \t\tWebDriver driver = startChromeDriver(); // wrapped driver init\r\n    \t\tdriver.get(&quot;https://www.stackoverflow.com&quot;);\r\n    \t\tSet&lt;Cookie&gt; allCookies = driver.manage().getCookies();\r\n    \t\tfor (Cookie cookie: allCookies) {\r\n    \t\t\tSystem.out.println(&quot;Cookie domain: &quot; + cookie.getDomain());\r\n    \t\t\tSystem.out.println(&quot;Cookie name: &quot; + cookie.getName());\r\n    \t\t\tSystem.out.println(&quot;Cookie value: &quot; + cookie.getValue());\r\n    \t\t}\r\n    \t\tdriver.quit();\r\n    \t}\r\n    \r\n    }\r\n\r\n**Output:**\r\n\r\n    Cookie domain: .stackoverflow.com\r\n    Cookie name: prov\r\n    Cookie value: 3dad3e4b-5cdd-6e2b-8890-bcca530e2f67","title":"How to get token from application cookies part by using java selenium","body":"<p>It's pretty simple, see <a href=\"https://www.guru99.com/handling-cookies-selenium-webdriver.html\" rel=\"nofollow noreferrer\">https://www.guru99.com/handling-cookies-selenium-webdriver.html</a></p>\n<p><strong>Code sample:</strong></p>\n<pre><code>package tests;\n\nimport java.util.Set;\n\nimport org.openqa.selenium.Cookie;\nimport org.openqa.selenium.WebDriver;\n\nimport selenium.ChromeDriverSetup;\n\npublic class CookieValueTest extends ChromeDriverSetup {\n\n    public static void main(String[] args) {\n        \n        WebDriver driver = startChromeDriver(); // wrapped driver init\n        driver.get(&quot;https://www.stackoverflow.com&quot;);\n        Set&lt;Cookie&gt; allCookies = driver.manage().getCookies();\n        for (Cookie cookie: allCookies) {\n            System.out.println(&quot;Cookie domain: &quot; + cookie.getDomain());\n            System.out.println(&quot;Cookie name: &quot; + cookie.getName());\n            System.out.println(&quot;Cookie value: &quot; + cookie.getValue());\n        }\n        driver.quit();\n    }\n\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>Cookie domain: .stackoverflow.com\nCookie name: prov\nCookie value: 3dad3e4b-5cdd-6e2b-8890-bcca530e2f67\n</code></pre>\n"}],"owner":{"account_id":26855749,"reputation":9,"user_id":20440088,"display_name":"Random Boy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":812,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1667900544,"creation_date":1667824549,"question_id":74346703,"body_markdown":"[![enter image description here](https://i.stack.imgur.com/H1Ilo.jpg)](https://i.stack.imgur.com/H1Ilo.jpg)\r\nHow to fetch the token from the browser by using java selenium for using it in rest assured\r\n\r\nHow to write code, for elements we use find elements but here what we can use to get the token","title":"How to get token from application cookies part by using java selenium","body":"<p><a href=\"https://i.stack.imgur.com/H1Ilo.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H1Ilo.jpg\" alt=\"enter image description here\" /></a>\nHow to fetch the token from the browser by using java selenium for using it in rest assured</p>\n<p>How to write code, for elements we use find elements but here what we can use to get the token</p>\n"},{"tags":["java","xml","java-8","jaxb","java-11"],"comments":[{"owner":{"account_id":1988337,"reputation":598,"user_id":1782997,"display_name":"Attila T"},"score":0,"creation_date":1668275077,"post_id":74358325,"comment_id":131367688,"body_markdown":"Does this answer your question? [java.lang.ClassNotFoundException: com.sun.org.apache.xml.internal.resolver.CatalogManager Java 11](https://stackoverflow.com/questions/58319199/java-lang-classnotfoundexception-com-sun-org-apache-xml-internal-resolver-catal)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/58319199/java-lang-classnotfoundexception-com-sun-org-apache-xml-internal-resolver-catal\">java.lang.ClassNotFoundException: com.sun.org.apache.xml.internal.resolver.CatalogManager Java 11</a>"}],"owner":{"account_id":9175107,"reputation":7,"user_id":6820971,"display_name":"praveen Babu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":688,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667900361,"creation_date":1667899434,"question_id":74358325,"body_markdown":"In Java 8 to 11 migration, I am getting  migration java.lang.NoClassDefFoundError: com/sun/org/apache/xml/internal/resolver/CatalogManager\r\n\r\n```\r\ntried adding below, but its not working\r\n\r\n```\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.sun.org.apache.xml.internal&lt;/groupId&gt;\r\n    &lt;artifactId&gt;resolver&lt;/artifactId&gt;\r\n    &lt;version&gt;20050927&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n```\r\n```\r\n","title":"java.lang.NoClassDefFoundError: com/sun/org/apache/xml/internal/resolver/CatalogManager","body":"<p>In Java 8 to 11 migration, I am getting  migration java.lang.NoClassDefFoundError: com/sun/org/apache/xml/internal/resolver/CatalogManager</p>\n<pre><code>tried adding below, but its not working\n\n</code></pre>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.sun.org.apache.xml.internal&lt;/groupId&gt;\n    &lt;artifactId&gt;resolver&lt;/artifactId&gt;\n    &lt;version&gt;20050927&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<pre><code></code></pre>\n"},{"tags":["java","automation","appium"],"comments":[{"owner":{"account_id":5464663,"reputation":407,"user_id":4345808,"display_name":"dmytro Minz"},"score":0,"creation_date":1599856328,"post_id":54646837,"comment_id":112915268,"body_markdown":"An unknown server-side error occurred while processing the command. Original error: Could not proxy command to remote server. Original error: Error: ESOCKETTIMEDOUT                    \n       I get  this during parallel run on iOS simulators an attempt to type  some string in input fields","body":"An unknown server-side error occurred while processing the command. Original error: Could not proxy command to remote server. Original error: Error: ESOCKETTIMEDOUT                            I get  this during parallel run on iOS simulators an attempt to type  some string in input fields"}],"answers":[{"comments":[{"owner":{"account_id":9933941,"reputation":1741,"user_id":7352883,"accept_rate":50,"display_name":"Shivam Mishra"},"score":3,"creation_date":1570041701,"post_id":54647046,"comment_id":102792948,"body_markdown":"This did not resolve my problem. I am getting this when running tests in parallel, any help?","body":"This did not resolve my problem. I am getting this when running tests in parallel, any help?"},{"owner":{"account_id":10624693,"reputation":590,"user_id":7824672,"accept_rate":33,"display_name":"Vasanth"},"score":1,"creation_date":1580796485,"post_id":54647046,"comment_id":106205395,"body_markdown":"I&#39;m facing same issue in iOS ? any help ?","body":"I&#39;m facing same issue in iOS ? any help ?"},{"owner":{"account_id":15190063,"reputation":335,"user_id":10960948,"display_name":"T.Che"},"score":3,"creation_date":1620195365,"post_id":54647046,"comment_id":119125248,"body_markdown":"this helps when the socket hangs up.","body":"this helps when the socket hangs up."},{"owner":{"account_id":11474264,"reputation":375,"user_id":8410182,"display_name":"Ahtisham Ilyas"},"score":2,"creation_date":1649911720,"post_id":54647046,"comment_id":126996071,"body_markdown":"My issue got resolved after using these commands, thanks mate.","body":"My issue got resolved after using these commands, thanks mate."},{"owner":{"account_id":1649600,"reputation":3114,"user_id":1520443,"accept_rate":31,"display_name":"deepak"},"score":1,"creation_date":1652336277,"post_id":54647046,"comment_id":127582452,"body_markdown":"it would be great if someone could explain why this is happening, and how the fix works","body":"it would be great if someone could explain why this is happening, and how the fix works"}],"tags":[],"owner":{"account_id":12218669,"reputation":2466,"user_id":8918302,"display_name":"Suban Dhyako"},"comment_count":5,"down_vote_count":0,"up_vote_count":29,"is_accepted":true,"score":29,"last_activity_date":1584782478,"creation_date":1549964723,"answer_id":54647046,"question_id":54646837,"body_markdown":"I found the answer to this problem. The solution is to remove **io.appium.uiautomator2.server** and **io.appium.uiautomator2.server.test** from the device.\r\n\r\n1. Make sure appium server is not executing.\r\n2. Connect your android device with USB,  also verify that device is connected properly by using command:\r\n    ```\r\n    adb devices\r\n    ```\r\n3. Execute below commands:\r\n    ```\r\n    adb uninstall io.appium.uiautomator2.server\r\n    adb uninstall io.appium.uiautomator2.server.test\r\n    ``` \r\n4. Start appium server\r\n5. Start executing appium test cases","title":"Could not proxy command to remote server. Original error: Error: read ECONNRESET","body":"<p>I found the answer to this problem. The solution is to remove <strong>io.appium.uiautomator2.server</strong> and <strong>io.appium.uiautomator2.server.test</strong> from the device.</p>\n\n<ol>\n<li>Make sure appium server is not executing.</li>\n<li>Connect your android device with USB,  also verify that device is connected properly by using command:\n\n<pre><code>adb devices\n</code></pre></li>\n<li>Execute below commands:\n\n<pre><code>adb uninstall io.appium.uiautomator2.server\nadb uninstall io.appium.uiautomator2.server.test\n</code></pre></li>\n<li>Start appium server</li>\n<li>Start executing appium test cases</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2619708,"reputation":137,"user_id":2268030,"accept_rate":36,"display_name":"Marco Antonio Carcini Mora"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1584738097,"creation_date":1581036564,"answer_id":60105689,"question_id":54646837,"body_markdown":"Try setting the `newCommandTimeout` to `0`.\r\n\r\n\r\n","title":"Could not proxy command to remote server. Original error: Error: read ECONNRESET","body":"<p>Try setting the <code>newCommandTimeout</code> to <code>0</code>.</p>\n"},{"tags":[],"owner":{"account_id":3577370,"reputation":3514,"user_id":2986279,"accept_rate":50,"display_name":"Gaurav Khurana"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635419856,"creation_date":1635419856,"answer_id":69753133,"question_id":54646837,"body_markdown":"I have uninstalled below app(manually) from emulator which solved the problem \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/MSBgN.png","title":"Could not proxy command to remote server. Original error: Error: read ECONNRESET","body":"<p>I have uninstalled below app(manually) from emulator which solved the problem</p>\n<p><a href=\"https://i.stack.imgur.com/MSBgN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MSBgN.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":26146032,"reputation":1,"user_id":19834617,"display_name":"Pavel Kotiai"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661753714,"creation_date":1661319606,"answer_id":73467927,"question_id":54646837,"body_markdown":"Just kill all the Appium processes.\r\nEnter this command in terminal\r\n`taskkill /F /IM node.exe`\r\n","title":"Could not proxy command to remote server. Original error: Error: read ECONNRESET","body":"<p>Just kill all the Appium processes.\nEnter this command in terminal\n<code>taskkill /F /IM node.exe</code></p>\n"}],"owner":{"account_id":12218669,"reputation":2466,"user_id":8918302,"display_name":"Suban Dhyako"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23260,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":54647046,"answer_count":4,"score":8,"last_activity_date":1667900301,"creation_date":1549963984,"question_id":54646837,"body_markdown":"I am not able to run the automation script that was running earlier. When i try to run the same code in new device its works fine.\r\n\r\n**Appium Server Log**\r\n&gt; [UiAutomator2] Running command: &#39;adb -s K3V4C18B16002502 shell am\r\n&gt; instrument -w\r\n&gt; io.appium.uiautomator2.server.test/android.support.test.runner.AndroidJUnitRunner&#39;\r\n&gt; [UiAutomator2] Waiting up to 20000ms for UiAutomator2 to be online...\r\n&gt; [debug] [JSONWP Proxy] Matched &#39;/status&#39; to command name &#39;getStatus&#39;\r\n&gt; [debug] [JSONWP Proxy] Proxying [GET /status] to [GET\r\n&gt; http://localhost:8200/wd/hub/status] with no body [JSONWP Proxy] Got\r\n&gt; an unexpected response:\r\n&gt; {&quot;errno&quot;:&quot;ECONNRESET&quot;,&quot;code&quot;:&quot;ECONNRESET&quot;,&quot;syscall&quot;:&quot;read&quot;} [debug]\r\n&gt; [JSONWP Proxy] Matched &#39;/status&#39; to command name &#39;getStatus&#39; [debug]\r\n&gt; [JSONWP Proxy] Proxying [GET /status] to [GET\r\n&gt; http://localhost:8200/wd/hub/status] with no body [JSONWP Proxy] Got\r\n&gt; an unexpected response:\r\n&gt; {&quot;errno&quot;:&quot;ECONNRESET&quot;,&quot;code&quot;:&quot;ECONNRESET&quot;,&quot;syscall&quot;:&quot;read&quot;} [debug]\r\n&gt; [UiAutomator2] [UIAutomator2] android.util.AndroidException:\r\n&gt; INSTRUMENTATION_FAILED:\r\n&gt; io.appium.uiautomator2.server.test/android.support.test.runner.AndroidJUnitRunner\r\n&gt; [debug] [UiAutomator2] [UIAutomator2] INSTRUMENTATION_STATUS:\r\n&gt; Error=Unable to find instrumentation info for:\r\n&gt; ComponentInfo{io.appium.uiautomator2.server.test/android.support.test.runner.AndroidJUnitRunner}\r\n&gt; [debug] [UiAutomator2] [UIAutomator2] INSTRUMENTATION_STATUS:\r\n&gt; id=ActivityManagerService [debug] [UiAutomator2] [UIAutomator2]\r\n&gt; INSTRUMENTATION_STATUS_CODE: -1 [debug] [UiAutomator2] [UIAutomator2]\r\n&gt; \tat com.android.commands.am.Instrument.run(Instrument.java:486)\r\n&gt; [debug] [UiAutomator2] [UIAutomator2] \tat\r\n&gt; com.android.commands.am.Am.runInstrument(Am.java:194) [debug]\r\n&gt; [UiAutomator2] [UIAutomator2] \tat\r\n&gt; com.android.commands.am.Am.onRun(Am.java:80) [debug] [UiAutomator2]\r\n&gt; [UIAutomator2] \tat\r\n&gt; com.android.internal.os.BaseCommand.run(BaseCommand.java:54) [debug]\r\n&gt; [UiAutomator2] [UIAutomator2] \tat\r\n&gt; com.android.commands.am.Am.main(Am.java:50) [debug] [UiAutomator2]\r\n&gt; [UIAutomator2] \tat\r\n&gt; com.android.internal.os.RuntimeInit.nativeFinishInit(Native Method)\r\n&gt; [debug] [UiAutomator2] [UIAutomator2] \tat\r\n&gt; com.android.internal.os.RuntimeInit.main(RuntimeInit.java:371) [debug]\r\n&gt; [JSONWP Proxy] Matched &#39;/status&#39; to command name &#39;getStatus&#39; [debug]\r\n&gt; [JSONWP Proxy] Proxying [GET /status] to [GET\r\n&gt; http://localhost:8200/wd/hub/status] with no body [JSONWP Proxy] Got\r\n&gt; an unexpected response:\r\n&gt; {&quot;errno&quot;:&quot;ECONNRESET&quot;,&quot;code&quot;:&quot;ECONNRESET&quot;,&quot;syscall&quot;:&quot;read&quot;} [debug]\r\n&gt; [JSONWP Proxy] Matched &#39;/status&#39; to command name &#39;getStatus&#39; [debug]\r\n&gt; [JSONWP Proxy] Proxying [GET /status] to [GET\r\n&gt; http://localhost:8200/wd/hub/status] with no body [JSONWP Proxy] Got\r\n&gt; an unexpected response:\r\n&gt; {&quot;errno&quot;:&quot;ECONNRESET&quot;,&quot;code&quot;:&quot;ECONNRESET&quot;,&quot;syscall&quot;:&quot;read&quot;} [debug]\r\n&gt; [JSONWP Proxy] Matched &#39;/status&#39; to command name &#39;getStatus&#39; [debug]\r\n&gt; [JSONWP Proxy] Proxying [GET /status] to [GET\r\n&gt; http://localhost:8200/wd/hub/status] with no body [JSONWP Proxy] Got\r\n&gt; an unexpected response:\r\n&gt; {&quot;errno&quot;:&quot;ECONNRESET&quot;,&quot;code&quot;:&quot;ECONNRESET&quot;,&quot;syscall&quot;:&quot;read&quot;} [debug]\r\n&gt; [JSONWP Proxy] Matched &#39;/status&#39; to command name &#39;getStatus&#39; [debug]\r\n&gt; [JSONWP Proxy] Proxying [GET /status] to [GET\r\n&gt; http://localhost:8200/wd/hub/status] with no body [JSONWP Proxy] Got\r\n&gt; an unexpected response:\r\n&gt; {&quot;errno&quot;:&quot;ECONNRESET&quot;,&quot;code&quot;:&quot;ECONNRESET&quot;,&quot;syscall&quot;:&quot;read&quot;} [debug]\r\n&gt; [JSONWP Proxy] Matched &#39;/status&#39; to command name &#39;getStatus&#39; [debug]\r\n&gt; [JSONWP Proxy] Proxying [GET /status] to [GET\r\n&gt; http://localhost:8200/wd/hub/status] with no body [JSONWP Proxy] Got\r\n&gt; an unexpected response:\r\n&gt; {&quot;errno&quot;:&quot;ECONNRESET&quot;,&quot;code&quot;:&quot;ECONNRESET&quot;,&quot;syscall&quot;:&quot;read&quot;} [debug]\r\n&gt; [JSONWP Proxy] Matched &#39;/status&#39; to command name &#39;getStatus&#39; [debug]\r\n&gt; [JSONWP Proxy] Proxying [GET /status] to [GET\r\n&gt; http://localhost:8200/wd/hub/status] with no body [JSONWP Proxy] Got\r\n&gt; an unexpected response:\r\n&gt; {&quot;errno&quot;:&quot;ECONNRESET&quot;,&quot;code&quot;:&quot;ECONNRESET&quot;,&quot;syscall&quot;:&quot;read&quot;} [debug]\r\n&gt; [JSONWP Proxy] Matched &#39;/status&#39; to command name &#39;getStatus&#39; [debug]\r\n&gt; [JSONWP Proxy] Proxying [GET /status] to [GET\r\n&gt; http://localhost:8200/wd/hub/status] with no body [JSONWP Proxy] Got\r\n&gt; an unexpected response:\r\n&gt; {&quot;errno&quot;:&quot;ECONNRESET&quot;,&quot;code&quot;:&quot;ECONNRESET&quot;,&quot;syscall&quot;:&quot;read&quot;} [debug]\r\n&gt; [JSONWP Proxy] Matched &#39;/status&#39; to command name &#39;getStatus&#39; [debug]\r\n&gt; [JSONWP Proxy] Proxying [GET /status] to [GET\r\n&gt; http://localhost:8200/wd/hub/status] with no body [JSONWP Proxy] Got\r\n&gt; an unexpected response:\r\n&gt; {&quot;errno&quot;:&quot;ECONNRESET&quot;,&quot;code&quot;:&quot;ECONNRESET&quot;,&quot;syscall&quot;:&quot;read&quot;} [debug]\r\n&gt; [JSONWP Proxy] Matched &#39;/status&#39; to command name &#39;getStatus&#39; [debug]\r\n&gt; [JSONWP Proxy] Proxying [GET /status] to [GET\r\n&gt; http://localhost:8200/wd/hub/status] with no body [JSONWP Proxy] Got\r\n&gt; an unexpected response:\r\n&gt; {&quot;errno&quot;:&quot;ECONNRESET&quot;,&quot;code&quot;:&quot;ECONNRESET&quot;,&quot;syscall&quot;:&quot;read&quot;} [debug]\r\n&gt; [JSONWP Proxy] Matched &#39;/status&#39; to command name &#39;getStatus&#39; [debug]\r\n&gt; [JSONWP Proxy] Proxying [GET /status] to [GET\r\n&gt; http://localhost:8200/wd/hub/status] with no body [JSONWP Proxy] Got\r\n&gt; an unexpected response:\r\n&gt; {&quot;errno&quot;:&quot;ECONNRESET&quot;,&quot;code&quot;:&quot;ECONNRESET&quot;,&quot;syscall&quot;:&quot;read&quot;} [debug]\r\n&gt; [JSONWP Proxy] Matched &#39;/status&#39; to command name &#39;getStatus&#39; [debug]\r\n&gt; [JSONWP Proxy] Proxying [GET /status] to [GET\r\n&gt; http://localhost:8200/wd/hub/status] with no body [JSONWP Proxy] Got\r\n&gt; an unexpected response:\r\n&gt; {&quot;errno&quot;:&quot;ECONNRESET&quot;,&quot;code&quot;:&quot;ECONNRESET&quot;,&quot;syscall&quot;:&quot;read&quot;} [debug]\r\n&gt; [JSONWP Proxy] Matched &#39;/status&#39; to command name &#39;getStatus&#39; [debug]\r\n&gt; [JSONWP Proxy] Proxying [GET /status] to [GET\r\n&gt; http://localhost:8200/wd/hub/status] with no body [JSONWP Proxy] Got\r\n&gt; an unexpected response:\r\n&gt; {&quot;errno&quot;:&quot;ECONNRESET&quot;,&quot;code&quot;:&quot;ECONNRESET&quot;,&quot;syscall&quot;:&quot;read&quot;} [debug]\r\n&gt; [JSONWP Proxy] Matched &#39;/status&#39; to command name &#39;getStatus&#39; [debug]\r\n&gt; [JSONWP Proxy] Proxying [GET /status] to [GET\r\n&gt; http://localhost:8200/wd/hub/status] with no body [JSONWP Proxy] Got\r\n&gt; an unexpected response:\r\n&gt; {&quot;errno&quot;:&quot;ECONNRESET&quot;,&quot;code&quot;:&quot;ECONNRESET&quot;,&quot;syscall&quot;:&quot;read&quot;} [debug]\r\n&gt; [JSONWP Proxy] Matched &#39;/status&#39; to command name &#39;getStatus&#39; [debug]\r\n&gt; [JSONWP Proxy] Proxying [GET /status] to [GET\r\n&gt; http://localhost:8200/wd/hub/status] with no body [JSONWP Proxy] Got\r\n&gt; an unexpected response:\r\n&gt; {&quot;errno&quot;:&quot;ECONNRESET&quot;,&quot;code&quot;:&quot;ECONNRESET&quot;,&quot;syscall&quot;:&quot;read&quot;} [debug]\r\n&gt; [JSONWP Proxy] Matched &#39;/status&#39; to command name &#39;getStatus&#39; [debug]\r\n&gt; [JSONWP Proxy] Proxying [GET /status] to [GET\r\n&gt; http://localhost:8200/wd/hub/status] with no body [JSONWP Proxy] Got\r\n&gt; an unexpected response:\r\n&gt; {&quot;errno&quot;:&quot;ECONNRESET&quot;,&quot;code&quot;:&quot;ECONNRESET&quot;,&quot;syscall&quot;:&quot;read&quot;} [debug]\r\n&gt; [JSONWP Proxy] Matched &#39;/status&#39; to command name &#39;getStatus&#39; [debug]\r\n&gt; [JSONWP Proxy] Proxying [GET /status] to [GET\r\n&gt; http://localhost:8200/wd/hub/status] with no body [JSONWP Proxy] Got\r\n&gt; an unexpected response:\r\n&gt; {&quot;errno&quot;:&quot;ECONNRESET&quot;,&quot;code&quot;:&quot;ECONNRESET&quot;,&quot;syscall&quot;:&quot;read&quot;} [debug]\r\n&gt; [JSONWP Proxy] Matched &#39;/status&#39; to command name &#39;getStatus&#39; [debug]\r\n&gt; [JSONWP Proxy] Proxying [GET /status] to [GET\r\n&gt; http://localhost:8200/wd/hub/status] with no body [JSONWP Proxy] Got\r\n&gt; an unexpected response:\r\n&gt; {&quot;errno&quot;:&quot;ECONNRESET&quot;,&quot;code&quot;:&quot;ECONNRESET&quot;,&quot;syscall&quot;:&quot;read&quot;} [debug]\r\n&gt; [JSONWP Proxy] Matched &#39;/status&#39; to command name &#39;getStatus&#39; [debug]\r\n&gt; [JSONWP Proxy] Proxying [GET /status] to [GET\r\n&gt; http://localhost:8200/wd/hub/status] with no body [JSONWP Proxy] Got\r\n&gt; an unexpected response:\r\n&gt; {&quot;errno&quot;:&quot;ECONNRESET&quot;,&quot;code&quot;:&quot;ECONNRESET&quot;,&quot;syscall&quot;:&quot;read&quot;} [debug]\r\n&gt; [UiAutomator2] Deleting UiAutomator2 session [debug] [UiAutomator2]\r\n&gt; Deleting UiAutomator2 server session [debug] [JSONWP Proxy] Matched\r\n&gt; &#39;/&#39; to command name &#39;deleteSession&#39; [UiAutomator2] Did not get\r\n&gt; confirmation UiAutomator2 deleteSession worked; Error was:\r\n&gt; UnknownError: An unknown server-side error occurred while processing\r\n&gt; the command. Original error: Trying to proxy a session command without\r\n&gt; session id [debug] [UiAutomator2] Resetting IME to\r\n&gt; &#39;com.touchtype.swiftkey/com.touchtype.KeyboardService&#39; [debug] [ADB]\r\n&gt; Running &#39;/Users/infotmt/Library/Android/sdk/platform-tools/adb -P 5037\r\n&gt; -s K3V4C18B16002402 shell ime set com.touchtype.swiftkey/com.touchtype.KeyboardService&#39; [debug] [ADB]\r\n&gt; Running &#39;/Users/infotmt/Library/Android/sdk/platform-tools/adb -P 5037\r\n&gt; -s K3V4C18B16002402 shell am force-stop eu.niko.smart.naswi.personalization&#39; [debug] [Logcat] Stopping logcat\r\n&gt; capture [debug] [ADB] Removing forwarded port socket connection: 8200 \r\n&gt; [debug] [ADB] Running\r\n&gt; &#39;/Users/infotmt/Library/Android/sdk/platform-tools/adb -P 5037 -s\r\n&gt; K3V4C18B16002402 forward --remove tcp\\:8200&#39; [debug] [ADB] Device API\r\n&gt; level: 28 [UiAutomator2] Restoring hidden api policy to the device\r\n&gt; default configuration [debug] [ADB] Running\r\n&gt; &#39;/Users/infotmt/Library/Android/sdk/platform-tools/adb -P 5037 -s\r\n&gt; K3V4C18B16002402 shell settings delete global\r\n&gt; hidden_api_policy_pre_p_apps&#39; [debug] [ADB] Running\r\n&gt; &#39;/Users/infotmt/Library/Android/sdk/platform-tools/adb -P 5037 -s\r\n&gt; K3V4C18B16002402 shell settings delete global\r\n&gt; hidden_api_policy_p_apps&#39; [debug] [BaseDriver] Event\r\n&gt; &#39;newSessionStarted&#39; logged at 1549963457849 (15:09:17 GMT+0545 (Nepal\r\n&gt; Time)) [debug] [W3C] Encountered internal error running command:\r\n&gt; UnknownError: An unknown server-side error occurred while processing\r\n&gt; the command. Original error: Could not proxy command to remote server.\r\n&gt; Original error: Error: read ECONNRESET [debug] [W3C]     at\r\n&gt; JWProxy.command\r\n&gt; (/usr/local/lib/node_modules/appium/node_modules/appium-base-driver/lib/jsonwp-proxy/proxy.js:236:13)\r\n&gt; [HTTP] &lt;-- POST /wd/hub/session 500 50913 ms - 532\r\n\r\n**Java error log**\r\n\r\n&gt; org.openqa.selenium.SessionNotCreatedException: Unable to create a new\r\n&gt; remote session. Please check the server log for more details. Original\r\n&gt; error: An unknown server-side error occurred while processing the\r\n&gt; command. Original error: Could not proxy command to remote server.\r\n&gt; Original error: Error: read ECONNRESET Build info: version:\r\n&gt; &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39; System\r\n&gt; info: host: &#39;Suban12.local&#39;, ip: &#39;fe80:0:0:0:486:de1:7ae1:b02d%en0&#39;,\r\n&gt; os.name: &#39;Mac OS X&#39;, os.arch: &#39;x86_64&#39;, os.version: &#39;10.14.3&#39;,\r\n&gt; java.version: &#39;1.8.0_202&#39; Driver info: driver.version: AndroidDriver\r\n&gt; remote stacktrace: UnknownError: An unknown server-side error occurred\r\n&gt; while processing the command. Original error: Could not proxy command\r\n&gt; to remote server. Original error: Error: read ECONNRESET\r\n&gt;     at JWProxy.command (/usr/local/lib/node_modules/appium/node_modules/appium-base-driver/lib/jsonwp-proxy/proxy.js:236:13)\r\n&gt; Build info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time:\r\n&gt; &#39;2018-11-14T08:17:03&#39; System info: host: &#39;Suban12.local&#39;, ip:\r\n&gt; &#39;fe80:0:0:0:486:de1:7ae1:b02d%en0&#39;, os.name: &#39;Mac OS X&#39;, os.arch:\r\n&gt; &#39;x86_64&#39;, os.version: &#39;10.14.3&#39;, java.version: &#39;1.8.0_202&#39; Driver\r\n&gt; info: driver.version: AndroidDriver\r\n&gt; \r\n&gt; \tat\r\n&gt; io.appium.java_client.remote.AppiumCommandExecutor$1.createSession(AppiumCommandExecutor.java:208)\r\n&gt; \tat\r\n&gt; io.appium.java_client.remote.AppiumCommandExecutor.createSession(AppiumCommandExecutor.java:217)\r\n&gt; \tat\r\n&gt; io.appium.java_client.remote.AppiumCommandExecutor.execute(AppiumCommandExecutor.java:239)\r\n&gt; \tat\r\n&gt; org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\r\n&gt; \tat\r\n&gt; io.appium.java_client.DefaultGenericMobileDriver.execute(DefaultGenericMobileDriver.java:42)\r\n&gt; \tat io.appium.java_client.AppiumDriver.execute(AppiumDriver.java:1)\r\n&gt; \tat\r\n&gt; io.appium.java_client.android.AndroidDriver.execute(AndroidDriver.java:1)\r\n&gt; \tat\r\n&gt; org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:213)\r\n&gt; \tat\r\n&gt; org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:131)\r\n&gt; \tat\r\n&gt; io.appium.java_client.DefaultGenericMobileDriver.&lt;init&gt;(DefaultGenericMobileDriver.java:38)\r\n&gt; \tat io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:84)\r\n&gt; \tat io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:94)\r\n&gt; \tat\r\n&gt; io.appium.java_client.android.AndroidDriver.&lt;init&gt;(AndroidDriver.java:95)\r\n&gt; \tat util.AppiumHelper.setupPersDriver(AppiumHelper.java:74) \tat\r\n&gt; test_cases.PersHelper.startPersAppReset(PersHelper.java:21) \tat\r\n&gt; sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \tat\r\n&gt; sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n&gt; \tat\r\n&gt; sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt; \tat java.lang.reflect.Method.invoke(Method.java:498) \tat\r\n&gt; org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:124)\r\n&gt; \tat org.testng.internal.Invoker.invokeMethod(Invoker.java:583) \tat\r\n&gt; org.testng.internal.Invoker.invokeTestMethod(Invoker.java:719) \tat\r\n&gt; org.testng.internal.Invoker.invokeTestMethods(Invoker.java:989) \tat\r\n&gt; org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)\r\n&gt; \tat\r\n&gt; org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)\r\n&gt; \tat org.testng.TestRunner.privateRun(TestRunner.java:648) \tat\r\n&gt; org.testng.TestRunner.run(TestRunner.java:505) \tat\r\n&gt; org.testng.SuiteRunner.runTest(SuiteRunner.java:455) \tat\r\n&gt; org.testng.SuiteRunner.runSequentially(SuiteRunner.java:450) \tat\r\n&gt; org.testng.SuiteRunner.privateRun(SuiteRunner.java:415) \tat\r\n&gt; org.testng.SuiteRunner.run(SuiteRunner.java:364) \tat\r\n&gt; org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52) \tat\r\n&gt; org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:84) \tat\r\n&gt; org.testng.TestNG.runSuitesSequentially(TestNG.java:1208) \tat\r\n&gt; org.testng.TestNG.runSuitesLocally(TestNG.java:1137) \tat\r\n&gt; org.testng.TestNG.runSuites(TestNG.java:1049) \tat\r\n&gt; org.testng.TestNG.run(TestNG.java:1017) \tat\r\n&gt; org.testng.IDEARemoteTestNG.run(IDEARemoteTestNG.java:73) \tat\r\n&gt; org.testng.RemoteTestNGStarter.main(RemoteTestNGStarter.java:123)\r\n&gt; Caused by: java.lang.reflect.InvocationTargetException \tat\r\n&gt; sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \tat\r\n&gt; sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n&gt; \tat\r\n&gt; sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt; \tat java.lang.reflect.Method.invoke(Method.java:498) \tat\r\n&gt; io.appium.java_client.remote.AppiumCommandExecutor$1.createSession(AppiumCommandExecutor.java:186)\r\n&gt; \t... 38 more Caused by: org.openqa.selenium.WebDriverException: An\r\n&gt; unknown server-side error occurred while processing the command.\r\n&gt; Original error: Could not proxy command to remote server. Original\r\n&gt; error: Error: read ECONNRESET Build info: version: &#39;3.141.59&#39;,\r\n&gt; revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39; System info: host:\r\n&gt; &#39;Suban12.local&#39;, ip: &#39;fe80:0:0:0:486:de1:7ae1:b02d%en0&#39;, os.name: &#39;Mac\r\n&gt; OS X&#39;, os.arch: &#39;x86_64&#39;, os.version: &#39;10.14.3&#39;, java.version:\r\n&gt; &#39;1.8.0_202&#39; Driver info: driver.version: AndroidDriver remote\r\n&gt; stacktrace: UnknownError: An unknown server-side error occurred while\r\n&gt; processing the command. Original error: Could not proxy command to\r\n&gt; remote server. Original error: Error: read ECONNRESET\r\n&gt;     at JWProxy.command (/usr/local/lib/node_modules/appium/node_modules/appium-base-driver/lib/jsonwp-proxy/proxy.js:236:13)\r\n&gt; \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native\r\n&gt; Method) \tat\r\n&gt; sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n&gt; \tat\r\n&gt; sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n&gt; \tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n&gt; \tat\r\n&gt; org.openqa.selenium.remote.W3CHandshakeResponse.lambda$errorHandler$0(W3CHandshakeResponse.java:62)\r\n&gt; \tat\r\n&gt; org.openqa.selenium.remote.HandshakeResponse.lambda$getResponseFunction$0(HandshakeResponse.java:30)\r\n&gt; \tat\r\n&gt; org.openqa.selenium.remote.ProtocolHandshake.lambda$createSession$0(ProtocolHandshake.java:126)\r\n&gt; \tat\r\n&gt; java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\r\n&gt; \tat\r\n&gt; java.util.Spliterators$ArraySpliterator.tryAdvance(Spliterators.java:958)\r\n&gt; \tat\r\n&gt; java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:126)\r\n&gt; \tat\r\n&gt; java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:498)\r\n&gt; \tat\r\n&gt; java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:485)\r\n&gt; \tat\r\n&gt; java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n&gt; \tat\r\n&gt; java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:152)\r\n&gt; \tat\r\n&gt; java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n&gt; \tat\r\n&gt; java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:464)\r\n&gt; \tat\r\n&gt; org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:128)\r\n&gt; \t... 43 more\r\n\r\n","title":"Could not proxy command to remote server. Original error: Error: read ECONNRESET","body":"<p>I am not able to run the automation script that was running earlier. When i try to run the same code in new device its works fine.</p>\n\n<p><strong>Appium Server Log</strong></p>\n\n<blockquote>\n  <p>[UiAutomator2] Running command: 'adb -s K3V4C18B16002502 shell am\n  instrument -w\n  io.appium.uiautomator2.server.test/android.support.test.runner.AndroidJUnitRunner'\n  [UiAutomator2] Waiting up to 20000ms for UiAutomator2 to be online...\n  [debug] [JSONWP Proxy] Matched '/status' to command name 'getStatus'\n  [debug] [JSONWP Proxy] Proxying [GET /status] to [GET\n  <a href=\"http://localhost:8200/wd/hub/status]\" rel=\"noreferrer\">http://localhost:8200/wd/hub/status]</a> with no body [JSONWP Proxy] Got\n  an unexpected response:\n  {\"errno\":\"ECONNRESET\",\"code\":\"ECONNRESET\",\"syscall\":\"read\"} [debug]\n  [JSONWP Proxy] Matched '/status' to command name 'getStatus' [debug]\n  [JSONWP Proxy] Proxying [GET /status] to [GET\n  <a href=\"http://localhost:8200/wd/hub/status]\" rel=\"noreferrer\">http://localhost:8200/wd/hub/status]</a> with no body [JSONWP Proxy] Got\n  an unexpected response:\n  {\"errno\":\"ECONNRESET\",\"code\":\"ECONNRESET\",\"syscall\":\"read\"} [debug]\n  [UiAutomator2] [UIAutomator2] android.util.AndroidException:\n  INSTRUMENTATION_FAILED:\n  io.appium.uiautomator2.server.test/android.support.test.runner.AndroidJUnitRunner\n  [debug] [UiAutomator2] [UIAutomator2] INSTRUMENTATION_STATUS:\n  Error=Unable to find instrumentation info for:\n  ComponentInfo{io.appium.uiautomator2.server.test/android.support.test.runner.AndroidJUnitRunner}\n  [debug] [UiAutomator2] [UIAutomator2] INSTRUMENTATION_STATUS:\n  id=ActivityManagerService [debug] [UiAutomator2] [UIAutomator2]\n  INSTRUMENTATION_STATUS_CODE: -1 [debug] [UiAutomator2] [UIAutomator2]\n    at com.android.commands.am.Instrument.run(Instrument.java:486)\n  [debug] [UiAutomator2] [UIAutomator2]     at\n  com.android.commands.am.Am.runInstrument(Am.java:194) [debug]\n  [UiAutomator2] [UIAutomator2]     at\n  com.android.commands.am.Am.onRun(Am.java:80) [debug] [UiAutomator2]\n  [UIAutomator2]    at\n  com.android.internal.os.BaseCommand.run(BaseCommand.java:54) [debug]\n  [UiAutomator2] [UIAutomator2]     at\n  com.android.commands.am.Am.main(Am.java:50) [debug] [UiAutomator2]\n  [UIAutomator2]    at\n  com.android.internal.os.RuntimeInit.nativeFinishInit(Native Method)\n  [debug] [UiAutomator2] [UIAutomator2]     at\n  com.android.internal.os.RuntimeInit.main(RuntimeInit.java:371) [debug]\n  [JSONWP Proxy] Matched '/status' to command name 'getStatus' [debug]\n  [JSONWP Proxy] Proxying [GET /status] to [GET\n  <a href=\"http://localhost:8200/wd/hub/status]\" rel=\"noreferrer\">http://localhost:8200/wd/hub/status]</a> with no body [JSONWP Proxy] Got\n  an unexpected response:\n  {\"errno\":\"ECONNRESET\",\"code\":\"ECONNRESET\",\"syscall\":\"read\"} [debug]\n  [JSONWP Proxy] Matched '/status' to command name 'getStatus' [debug]\n  [JSONWP Proxy] Proxying [GET /status] to [GET\n  <a href=\"http://localhost:8200/wd/hub/status]\" rel=\"noreferrer\">http://localhost:8200/wd/hub/status]</a> with no body [JSONWP Proxy] Got\n  an unexpected response:\n  {\"errno\":\"ECONNRESET\",\"code\":\"ECONNRESET\",\"syscall\":\"read\"} [debug]\n  [JSONWP Proxy] Matched '/status' to command name 'getStatus' [debug]\n  [JSONWP Proxy] Proxying [GET /status] to [GET\n  <a href=\"http://localhost:8200/wd/hub/status]\" rel=\"noreferrer\">http://localhost:8200/wd/hub/status]</a> with no body [JSONWP Proxy] Got\n  an unexpected response:\n  {\"errno\":\"ECONNRESET\",\"code\":\"ECONNRESET\",\"syscall\":\"read\"} [debug]\n  [JSONWP Proxy] Matched '/status' to command name 'getStatus' [debug]\n  [JSONWP Proxy] Proxying [GET /status] to [GET\n  <a href=\"http://localhost:8200/wd/hub/status]\" rel=\"noreferrer\">http://localhost:8200/wd/hub/status]</a> with no body [JSONWP Proxy] Got\n  an unexpected response:\n  {\"errno\":\"ECONNRESET\",\"code\":\"ECONNRESET\",\"syscall\":\"read\"} [debug]\n  [JSONWP Proxy] Matched '/status' to command name 'getStatus' [debug]\n  [JSONWP Proxy] Proxying [GET /status] to [GET\n  <a href=\"http://localhost:8200/wd/hub/status]\" rel=\"noreferrer\">http://localhost:8200/wd/hub/status]</a> with no body [JSONWP Proxy] Got\n  an unexpected response:\n  {\"errno\":\"ECONNRESET\",\"code\":\"ECONNRESET\",\"syscall\":\"read\"} [debug]\n  [JSONWP Proxy] Matched '/status' to command name 'getStatus' [debug]\n  [JSONWP Proxy] Proxying [GET /status] to [GET\n  <a href=\"http://localhost:8200/wd/hub/status]\" rel=\"noreferrer\">http://localhost:8200/wd/hub/status]</a> with no body [JSONWP Proxy] Got\n  an unexpected response:\n  {\"errno\":\"ECONNRESET\",\"code\":\"ECONNRESET\",\"syscall\":\"read\"} [debug]\n  [JSONWP Proxy] Matched '/status' to command name 'getStatus' [debug]\n  [JSONWP Proxy] Proxying [GET /status] to [GET\n  <a href=\"http://localhost:8200/wd/hub/status]\" rel=\"noreferrer\">http://localhost:8200/wd/hub/status]</a> with no body [JSONWP Proxy] Got\n  an unexpected response:\n  {\"errno\":\"ECONNRESET\",\"code\":\"ECONNRESET\",\"syscall\":\"read\"} [debug]\n  [JSONWP Proxy] Matched '/status' to command name 'getStatus' [debug]\n  [JSONWP Proxy] Proxying [GET /status] to [GET\n  <a href=\"http://localhost:8200/wd/hub/status]\" rel=\"noreferrer\">http://localhost:8200/wd/hub/status]</a> with no body [JSONWP Proxy] Got\n  an unexpected response:\n  {\"errno\":\"ECONNRESET\",\"code\":\"ECONNRESET\",\"syscall\":\"read\"} [debug]\n  [JSONWP Proxy] Matched '/status' to command name 'getStatus' [debug]\n  [JSONWP Proxy] Proxying [GET /status] to [GET\n  <a href=\"http://localhost:8200/wd/hub/status]\" rel=\"noreferrer\">http://localhost:8200/wd/hub/status]</a> with no body [JSONWP Proxy] Got\n  an unexpected response:\n  {\"errno\":\"ECONNRESET\",\"code\":\"ECONNRESET\",\"syscall\":\"read\"} [debug]\n  [JSONWP Proxy] Matched '/status' to command name 'getStatus' [debug]\n  [JSONWP Proxy] Proxying [GET /status] to [GET\n  <a href=\"http://localhost:8200/wd/hub/status]\" rel=\"noreferrer\">http://localhost:8200/wd/hub/status]</a> with no body [JSONWP Proxy] Got\n  an unexpected response:\n  {\"errno\":\"ECONNRESET\",\"code\":\"ECONNRESET\",\"syscall\":\"read\"} [debug]\n  [JSONWP Proxy] Matched '/status' to command name 'getStatus' [debug]\n  [JSONWP Proxy] Proxying [GET /status] to [GET\n  <a href=\"http://localhost:8200/wd/hub/status]\" rel=\"noreferrer\">http://localhost:8200/wd/hub/status]</a> with no body [JSONWP Proxy] Got\n  an unexpected response:\n  {\"errno\":\"ECONNRESET\",\"code\":\"ECONNRESET\",\"syscall\":\"read\"} [debug]\n  [JSONWP Proxy] Matched '/status' to command name 'getStatus' [debug]\n  [JSONWP Proxy] Proxying [GET /status] to [GET\n  <a href=\"http://localhost:8200/wd/hub/status]\" rel=\"noreferrer\">http://localhost:8200/wd/hub/status]</a> with no body [JSONWP Proxy] Got\n  an unexpected response:\n  {\"errno\":\"ECONNRESET\",\"code\":\"ECONNRESET\",\"syscall\":\"read\"} [debug]\n  [JSONWP Proxy] Matched '/status' to command name 'getStatus' [debug]\n  [JSONWP Proxy] Proxying [GET /status] to [GET\n  <a href=\"http://localhost:8200/wd/hub/status]\" rel=\"noreferrer\">http://localhost:8200/wd/hub/status]</a> with no body [JSONWP Proxy] Got\n  an unexpected response:\n  {\"errno\":\"ECONNRESET\",\"code\":\"ECONNRESET\",\"syscall\":\"read\"} [debug]\n  [JSONWP Proxy] Matched '/status' to command name 'getStatus' [debug]\n  [JSONWP Proxy] Proxying [GET /status] to [GET\n  <a href=\"http://localhost:8200/wd/hub/status]\" rel=\"noreferrer\">http://localhost:8200/wd/hub/status]</a> with no body [JSONWP Proxy] Got\n  an unexpected response:\n  {\"errno\":\"ECONNRESET\",\"code\":\"ECONNRESET\",\"syscall\":\"read\"} [debug]\n  [JSONWP Proxy] Matched '/status' to command name 'getStatus' [debug]\n  [JSONWP Proxy] Proxying [GET /status] to [GET\n  <a href=\"http://localhost:8200/wd/hub/status]\" rel=\"noreferrer\">http://localhost:8200/wd/hub/status]</a> with no body [JSONWP Proxy] Got\n  an unexpected response:\n  {\"errno\":\"ECONNRESET\",\"code\":\"ECONNRESET\",\"syscall\":\"read\"} [debug]\n  [JSONWP Proxy] Matched '/status' to command name 'getStatus' [debug]\n  [JSONWP Proxy] Proxying [GET /status] to [GET\n  <a href=\"http://localhost:8200/wd/hub/status]\" rel=\"noreferrer\">http://localhost:8200/wd/hub/status]</a> with no body [JSONWP Proxy] Got\n  an unexpected response:\n  {\"errno\":\"ECONNRESET\",\"code\":\"ECONNRESET\",\"syscall\":\"read\"} [debug]\n  [JSONWP Proxy] Matched '/status' to command name 'getStatus' [debug]\n  [JSONWP Proxy] Proxying [GET /status] to [GET\n  <a href=\"http://localhost:8200/wd/hub/status]\" rel=\"noreferrer\">http://localhost:8200/wd/hub/status]</a> with no body [JSONWP Proxy] Got\n  an unexpected response:\n  {\"errno\":\"ECONNRESET\",\"code\":\"ECONNRESET\",\"syscall\":\"read\"} [debug]\n  [JSONWP Proxy] Matched '/status' to command name 'getStatus' [debug]\n  [JSONWP Proxy] Proxying [GET /status] to [GET\n  <a href=\"http://localhost:8200/wd/hub/status]\" rel=\"noreferrer\">http://localhost:8200/wd/hub/status]</a> with no body [JSONWP Proxy] Got\n  an unexpected response:\n  {\"errno\":\"ECONNRESET\",\"code\":\"ECONNRESET\",\"syscall\":\"read\"} [debug]\n  [UiAutomator2] Deleting UiAutomator2 session [debug] [UiAutomator2]\n  Deleting UiAutomator2 server session [debug] [JSONWP Proxy] Matched\n  '/' to command name 'deleteSession' [UiAutomator2] Did not get\n  confirmation UiAutomator2 deleteSession worked; Error was:\n  UnknownError: An unknown server-side error occurred while processing\n  the command. Original error: Trying to proxy a session command without\n  session id [debug] [UiAutomator2] Resetting IME to\n  'com.touchtype.swiftkey/com.touchtype.KeyboardService' [debug] [ADB]\n  Running '/Users/infotmt/Library/Android/sdk/platform-tools/adb -P 5037\n  -s K3V4C18B16002402 shell ime set com.touchtype.swiftkey/com.touchtype.KeyboardService' [debug] [ADB]\n  Running '/Users/infotmt/Library/Android/sdk/platform-tools/adb -P 5037\n  -s K3V4C18B16002402 shell am force-stop eu.niko.smart.naswi.personalization' [debug] [Logcat] Stopping logcat\n  capture [debug] [ADB] Removing forwarded port socket connection: 8200 \n  [debug] [ADB] Running\n  '/Users/infotmt/Library/Android/sdk/platform-tools/adb -P 5037 -s\n  K3V4C18B16002402 forward --remove tcp:8200' [debug] [ADB] Device API\n  level: 28 [UiAutomator2] Restoring hidden api policy to the device\n  default configuration [debug] [ADB] Running\n  '/Users/infotmt/Library/Android/sdk/platform-tools/adb -P 5037 -s\n  K3V4C18B16002402 shell settings delete global\n  hidden_api_policy_pre_p_apps' [debug] [ADB] Running\n  '/Users/infotmt/Library/Android/sdk/platform-tools/adb -P 5037 -s\n  K3V4C18B16002402 shell settings delete global\n  hidden_api_policy_p_apps' [debug] [BaseDriver] Event\n  'newSessionStarted' logged at 1549963457849 (15:09:17 GMT+0545 (Nepal\n  Time)) [debug] [W3C] Encountered internal error running command:\n  UnknownError: An unknown server-side error occurred while processing\n  the command. Original error: Could not proxy command to remote server.\n  Original error: Error: read ECONNRESET [debug] [W3C]     at\n  JWProxy.command\n  (/usr/local/lib/node_modules/appium/node_modules/appium-base-driver/lib/jsonwp-proxy/proxy.js:236:13)\n  [HTTP] &lt;-- POST /wd/hub/session 500 50913 ms - 532</p>\n</blockquote>\n\n<p><strong>Java error log</strong></p>\n\n<blockquote>\n  <p>org.openqa.selenium.SessionNotCreatedException: Unable to create a new\n  remote session. Please check the server log for more details. Original\n  error: An unknown server-side error occurred while processing the\n  command. Original error: Could not proxy command to remote server.\n  Original error: Error: read ECONNRESET Build info: version:\n  '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:17:03' System\n  info: host: 'Suban12.local', ip: 'fe80:0:0:0:486:de1:7ae1:b02d%en0',\n  os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '10.14.3',\n  java.version: '1.8.0_202' Driver info: driver.version: AndroidDriver\n  remote stacktrace: UnknownError: An unknown server-side error occurred\n  while processing the command. Original error: Could not proxy command\n  to remote server. Original error: Error: read ECONNRESET\n      at JWProxy.command (/usr/local/lib/node_modules/appium/node_modules/appium-base-driver/lib/jsonwp-proxy/proxy.js:236:13)\n  Build info: version: '3.141.59', revision: 'e82be7d358', time:\n  '2018-11-14T08:17:03' System info: host: 'Suban12.local', ip:\n  'fe80:0:0:0:486:de1:7ae1:b02d%en0', os.name: 'Mac OS X', os.arch:\n  'x86_64', os.version: '10.14.3', java.version: '1.8.0_202' Driver\n  info: driver.version: AndroidDriver</p>\n  \n  <p>at\n  io.appium.java_client.remote.AppiumCommandExecutor$1.createSession(AppiumCommandExecutor.java:208)\n    at\n  io.appium.java_client.remote.AppiumCommandExecutor.createSession(AppiumCommandExecutor.java:217)\n    at\n  io.appium.java_client.remote.AppiumCommandExecutor.execute(AppiumCommandExecutor.java:239)\n    at\n  org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\n    at\n  io.appium.java_client.DefaultGenericMobileDriver.execute(DefaultGenericMobileDriver.java:42)\n    at io.appium.java_client.AppiumDriver.execute(AppiumDriver.java:1)\n    at\n  io.appium.java_client.android.AndroidDriver.execute(AndroidDriver.java:1)\n    at\n  org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:213)\n    at\n  org.openqa.selenium.remote.RemoteWebDriver.(RemoteWebDriver.java:131)\n    at\n  io.appium.java_client.DefaultGenericMobileDriver.(DefaultGenericMobileDriver.java:38)\n    at io.appium.java_client.AppiumDriver.(AppiumDriver.java:84)\n    at io.appium.java_client.AppiumDriver.(AppiumDriver.java:94)\n    at\n  io.appium.java_client.android.AndroidDriver.(AndroidDriver.java:95)\n    at util.AppiumHelper.setupPersDriver(AppiumHelper.java:74)  at\n  test_cases.PersHelper.startPersAppReset(PersHelper.java:21)   at\n  sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)   at\n  sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at\n  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)     at\n  org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:124)\n    at org.testng.internal.Invoker.invokeMethod(Invoker.java:583)   at\n  org.testng.internal.Invoker.invokeTestMethod(Invoker.java:719)    at\n  org.testng.internal.Invoker.invokeTestMethods(Invoker.java:989)   at\n  org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)\n    at\n  org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)\n    at org.testng.TestRunner.privateRun(TestRunner.java:648)    at\n  org.testng.TestRunner.run(TestRunner.java:505)    at\n  org.testng.SuiteRunner.runTest(SuiteRunner.java:455)  at\n  org.testng.SuiteRunner.runSequentially(SuiteRunner.java:450)  at\n  org.testng.SuiteRunner.privateRun(SuiteRunner.java:415)   at\n  org.testng.SuiteRunner.run(SuiteRunner.java:364)  at\n  org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)  at\n  org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:84)   at\n  org.testng.TestNG.runSuitesSequentially(TestNG.java:1208)     at\n  org.testng.TestNG.runSuitesLocally(TestNG.java:1137)  at\n  org.testng.TestNG.runSuites(TestNG.java:1049)     at\n  org.testng.TestNG.run(TestNG.java:1017)   at\n  org.testng.IDEARemoteTestNG.run(IDEARemoteTestNG.java:73)     at\n  org.testng.RemoteTestNGStarter.main(RemoteTestNGStarter.java:123)\n  Caused by: java.lang.reflect.InvocationTargetException    at\n  sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)   at\n  sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at\n  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)     at\n  io.appium.java_client.remote.AppiumCommandExecutor$1.createSession(AppiumCommandExecutor.java:186)\n    ... 38 more Caused by: org.openqa.selenium.WebDriverException: An\n  unknown server-side error occurred while processing the command.\n  Original error: Could not proxy command to remote server. Original\n  error: Error: read ECONNRESET Build info: version: '3.141.59',\n  revision: 'e82be7d358', time: '2018-11-14T08:17:03' System info: host:\n  'Suban12.local', ip: 'fe80:0:0:0:486:de1:7ae1:b02d%en0', os.name: 'Mac\n  OS X', os.arch: 'x86_64', os.version: '10.14.3', java.version:\n  '1.8.0_202' Driver info: driver.version: AndroidDriver remote\n  stacktrace: UnknownError: An unknown server-side error occurred while\n  processing the command. Original error: Could not proxy command to\n  remote server. Original error: Error: read ECONNRESET\n      at JWProxy.command (/usr/local/lib/node_modules/appium/node_modules/appium-base-driver/lib/jsonwp-proxy/proxy.js:236:13)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native\n  Method)   at\n  sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at\n  sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at\n  org.openqa.selenium.remote.W3CHandshakeResponse.lambda$errorHandler$0(W3CHandshakeResponse.java:62)\n    at\n  org.openqa.selenium.remote.HandshakeResponse.lambda$getResponseFunction$0(HandshakeResponse.java:30)\n    at\n  org.openqa.selenium.remote.ProtocolHandshake.lambda$createSession$0(ProtocolHandshake.java:126)\n    at\n  java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n    at\n  java.util.Spliterators$ArraySpliterator.tryAdvance(Spliterators.java:958)\n    at\n  java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:126)\n    at\n  java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:498)\n    at\n  java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:485)\n    at\n  java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\n    at\n  java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:152)\n    at\n  java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at\n  java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:464)\n    at\n  org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:128)\n    ... 43 more</p>\n</blockquote>\n"},{"tags":["java","spring","intellij-idea"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1652681299,"post_id":72253564,"comment_id":127655561,"body_markdown":"The community version doesn&#39;t have spring support so doesn&#39;t do any checking. The ultimate version does have spring support and does the checking hence the error. It will still work as Intellij doesn&#39;t know about the auto configuration (unless you explicitly configure the context for this).","body":"The community version doesn&#39;t have spring support so doesn&#39;t do any checking. The ultimate version does have spring support and does the checking hence the error. It will still work as Intellij doesn&#39;t know about the auto configuration (unless you explicitly configure the context for this)."},{"owner":{"account_id":20073688,"reputation":11,"user_id":14717862,"display_name":"depthkim"},"score":0,"creation_date":1652682245,"post_id":72253564,"comment_id":127655750,"body_markdown":"@M.Deinum well... i missed some in content. previous version of intellij ultimate version(2021.3) works well too.","body":"@M.Deinum well... i missed some in content. previous version of intellij ultimate version(2021.3) works well too."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1652682826,"post_id":72253564,"comment_id":127655879,"body_markdown":"Still you need to tell the ultimate version the configuration (and enable the proper plugins). It is just intellij being drunk your app just works fine.","body":"Still you need to tell the ultimate version the configuration (and enable the proper plugins). It is just intellij being drunk your app just works fine."},{"owner":{"account_id":11179248,"reputation":11910,"user_id":8203759,"display_name":"Konstantin Annikov"},"score":0,"creation_date":1652687381,"post_id":72253564,"comment_id":127657121,"body_markdown":"Could be a bug in the IDE. Please share a sample project at https://youtrack.jetbrains.com/newIssue?project=IDEA","body":"Could be a bug in the IDE. Please share a sample project at <a href=\"https://youtrack.jetbrains.com/newIssue?project=IDEA\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/newIssue?project=IDEA</a>"},{"owner":{"account_id":3538058,"reputation":5428,"user_id":2960034,"display_name":"y.bedrov"},"score":2,"creation_date":1654162980,"post_id":72253564,"comment_id":128027614,"body_markdown":"You may try &quot;Spring Batch&quot; plugin","body":"You may try &quot;Spring Batch&quot; plugin"}],"answers":[{"comments":[{"owner":{"account_id":22118,"reputation":3832,"user_id":54289,"display_name":"EnocNRoll - AnandaGopal Pardue"},"score":0,"creation_date":1681319762,"post_id":74358505,"comment_id":134038645,"body_markdown":"This really works! I have no idea why this problem started happening and how this plugin fixes the issue. Thankful though!","body":"This really works! I have no idea why this problem started happening and how this plugin fixes the issue. Thankful though!"}],"tags":[],"owner":{"account_id":176021,"reputation":262,"user_id":406433,"accept_rate":60,"display_name":"jondow"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1667900227,"creation_date":1667900227,"answer_id":74358505,"question_id":72253564,"body_markdown":"One of the comments above by y.bedrov solved it for me, when I added the &quot;Spring Batch&quot; plugin in IDEA. After it installed the plugin, the error went away.","title":"intellij + spring &#39;could not autowired. no bean of type found&#39; error in latest version?","body":"<p>One of the comments above by y.bedrov solved it for me, when I added the &quot;Spring Batch&quot; plugin in IDEA. After it installed the plugin, the error went away.</p>\n"}],"owner":{"account_id":20073688,"reputation":11,"user_id":14717862,"display_name":"depthkim"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1481,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1667900227,"creation_date":1652667101,"question_id":72253564,"body_markdown":"I&#39;m using intellij ultimate version 2022.1.1(it&#39;s latest)\r\n\r\nI just tested simple spring project generated by &#39;start.spring.io&#39; default.\r\n\r\nand make simple config code for batch testing(official guide of spring batch)\r\n\r\n    @Configuration\r\n    public class BatchConfig {\r\n    \r\n        @Autowired\r\n        private JobBuilderFactory jobBuilderFactory;\r\n    }\r\n\r\nBut it always told me &#39;could not autowired. no bean of type found&#39; in JobBuilderFactory\r\n\r\nand problem is, **it works well in lower version of intellij(21.3) community, ultimate version but errors in this latest version.**\r\n\r\nand i think this is not only error. above code is just simple example and there are many errors in some parts.\r\n\r\nsome of spring codes are works well, just like `@Configuration` annotaion, but some codes doesn&#39;t works well `@Autowired`, `@EnableAutoConfiguation` and etc... of course it works well in other version.\r\n\r\ni don&#39;t think(and i don&#39;t want to believe) this is error of intellij. there must be some other reason that i missed. but i really don&#39;t know. it&#39;s same configuration of java version and settings are fresh(del .idea folder and refresh all project settings etc...) and same gradle, path, etc...\r\n\r\n**So what difference makes this codes wrong by intellij version? and how can i deal with? i don&#39;t want to using older version... but it&#39;s the only way?**","title":"intellij + spring &#39;could not autowired. no bean of type found&#39; error in latest version?","body":"<p>I'm using intellij ultimate version 2022.1.1(it's latest)</p>\n<p>I just tested simple spring project generated by 'start.spring.io' default.</p>\n<p>and make simple config code for batch testing(official guide of spring batch)</p>\n<pre><code>@Configuration\npublic class BatchConfig {\n\n    @Autowired\n    private JobBuilderFactory jobBuilderFactory;\n}\n</code></pre>\n<p>But it always told me 'could not autowired. no bean of type found' in JobBuilderFactory</p>\n<p>and problem is, <strong>it works well in lower version of intellij(21.3) community, ultimate version but errors in this latest version.</strong></p>\n<p>and i think this is not only error. above code is just simple example and there are many errors in some parts.</p>\n<p>some of spring codes are works well, just like <code>@Configuration</code> annotaion, but some codes doesn't works well <code>@Autowired</code>, <code>@EnableAutoConfiguation</code> and etc... of course it works well in other version.</p>\n<p>i don't think(and i don't want to believe) this is error of intellij. there must be some other reason that i missed. but i really don't know. it's same configuration of java version and settings are fresh(del .idea folder and refresh all project settings etc...) and same gradle, path, etc...</p>\n<p><strong>So what difference makes this codes wrong by intellij version? and how can i deal with? i don't want to using older version... but it's the only way?</strong></p>\n"},{"tags":["java","multithreading","concurrency","executorservice","executor"],"comments":[{"owner":{"account_id":14116,"reputation":39820,"user_id":28760,"accept_rate":93,"display_name":"Kiril"},"score":3,"creation_date":1281414820,"post_id":3446011,"comment_id":3591662,"body_markdown":"Take a look at this question: http://stackoverflow.com/questions/2001086/how-to-make-threadpoolexecutors-submit-method-block-if-it-is-saturated","body":"Take a look at this question: <a href=\"http://stackoverflow.com/questions/2001086/how-to-make-threadpoolexecutors-submit-method-block-if-it-is-saturated\" title=\"how to make threadpoolexecutors submit method block if it is saturated\">stackoverflow.com/questions/2001086/&hellip;</a>"},{"owner":{"account_id":168764,"reputation":10177,"user_id":394431,"accept_rate":87,"display_name":"Robert Tupelo-Schneck"},"score":4,"creation_date":1396126215,"post_id":3446011,"comment_id":34653517,"body_markdown":"[This answer](http://stackoverflow.com/a/4522411/394431) to another question suggests using a custom `BlockingQueue` subclass which blocks on `offer()` by delegating to `put()`.  I think that ends up working more or less the same as the `RejectedExecutionHandler` which calls `getQueue().put()`.","body":"<a href=\"http://stackoverflow.com/a/4522411/394431\">This answer</a> to another question suggests using a custom <code>BlockingQueue</code> subclass which blocks on <code>offer()</code> by delegating to <code>put()</code>.  I think that ends up working more or less the same as the <code>RejectedExecutionHandler</code> which calls <code>getQueue().put()</code>."},{"owner":{"account_id":286575,"reputation":1484,"user_id":585903,"accept_rate":72,"display_name":"Sumit Jain"},"score":2,"creation_date":1428586977,"post_id":3446011,"comment_id":47232321,"body_markdown":"Putting directly in queue would be incorrect, as explained in this answer http://stackoverflow.com/a/3518588/585903","body":"Putting directly in queue would be incorrect, as explained in this answer <a href=\"http://stackoverflow.com/a/3518588/585903\">stackoverflow.com/a/3518588/585903</a>"},{"owner":{"account_id":1296878,"reputation":2027,"user_id":1247705,"accept_rate":71,"display_name":"Tim"},"score":2,"creation_date":1493328154,"post_id":3446011,"comment_id":74383162,"body_markdown":"@SumitJain Read that answer more carefully; only one of the three objections raised in that answer apply to the approach suggested in @Robert Tupelo-Schneck&#39;s comment. By invoking `put()` from within the queue itself, you don&#39;t access the queue via `getQueue()` (objection #3) and the object you&#39;re putting is already properly wrapped if necessary (objection #2). You&#39;re still at risk of deadlock if all your threads die before the item comes off the queue, but that may be a risk most people looking for this particular solution would be willing to assume.","body":"@SumitJain Read that answer more carefully; only one of the three objections raised in that answer apply to the approach suggested in @Robert Tupelo-Schneck&#39;s comment. By invoking <code>put()</code> from within the queue itself, you don&#39;t access the queue via <code>getQueue()</code> (objection #3) and the object you&#39;re putting is already properly wrapped if necessary (objection #2). You&#39;re still at risk of deadlock if all your threads die before the item comes off the queue, but that may be a risk most people looking for this particular solution would be willing to assume."},{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":0,"creation_date":1538757638,"post_id":3446011,"comment_id":92269814,"body_markdown":"Possible duplicate of [How to make ThreadPoolExecutor&#39;s submit() method block if it is saturated?](https://stackoverflow.com/questions/2001086/how-to-make-threadpoolexecutors-submit-method-block-if-it-is-saturated)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/2001086/how-to-make-threadpoolexecutors-submit-method-block-if-it-is-saturated\">How to make ThreadPoolExecutor&#39;s submit() method block if it is saturated?</a>"}],"answers":[{"comments":[{"owner":{"account_id":440876,"reputation":656,"user_id":830696,"accept_rate":80,"display_name":"skelly"},"score":5,"creation_date":1421332991,"post_id":3518588,"comment_id":44324592,"body_markdown":"A very well thought-out response. I take minor issue with your condition that &gt; &quot;You have to (or want to) have a very small queue length.&quot; You may not be able to predict how many tasks that a given job will queue. Maybe you&#39;re running a daily job that processes data from some DB and on Monday there&#39;s 500 records to process but Tuesday there are 50,000.  You&#39;ve gotta set an upper bound on your queue such that you won&#39;t blow your heap when a big job comes through. In that case there&#39;s no harm in waiting for some tasks to complete before queueing more.","body":"A very well thought-out response. I take minor issue with your condition that &gt; &quot;You have to (or want to) have a very small queue length.&quot; You may not be able to predict how many tasks that a given job will queue. Maybe you&#39;re running a daily job that processes data from some DB and on Monday there&#39;s 500 records to process but Tuesday there are 50,000.  You&#39;ve gotta set an upper bound on your queue such that you won&#39;t blow your heap when a big job comes through. In that case there&#39;s no harm in waiting for some tasks to complete before queueing more."},{"owner":{"account_id":444729,"reputation":27341,"user_id":836738,"display_name":"Tim Pote"},"score":2,"creation_date":1443614736,"post_id":3518588,"comment_id":53563320,"body_markdown":"&quot;It&#39;s prone to deadlock because all the threads in the pool may die before the thing you put in the queue is visible. Mitigate this by setting a reasonable keep alive time.&quot; Can&#39;t deadlock be avoided completely by setting the min pool size to a value greater than zero? Every other reason is fallout of Java not having built-in support for blocking puts to executor queues. Which is interesting, because it seems to be a pretty reasonable strategy. I wonder what the rationale is.","body":"&quot;It&#39;s prone to deadlock because all the threads in the pool may die before the thing you put in the queue is visible. Mitigate this by setting a reasonable keep alive time.&quot; Can&#39;t deadlock be avoided completely by setting the min pool size to a value greater than zero? Every other reason is fallout of Java not having built-in support for blocking puts to executor queues. Which is interesting, because it seems to be a pretty reasonable strategy. I wonder what the rationale is."},{"owner":{"account_id":7164076,"reputation":9426,"user_id":5473824,"display_name":"Adrian Baker"},"score":3,"creation_date":1520709897,"post_id":3518588,"comment_id":85430666,"body_markdown":"Perhaps another condition for a blocking strategy is when order of execution is important. CallerRunsPolicy will mean that the rejected task will likely be executed before other pending items in the executor.","body":"Perhaps another condition for a blocking strategy is when order of execution is important. CallerRunsPolicy will mean that the rejected task will likely be executed before other pending items in the executor."},{"owner":{"account_id":4639178,"reputation":735,"user_id":3759528,"accept_rate":57,"display_name":"madcolonel10"},"score":0,"creation_date":1590530641,"post_id":3518588,"comment_id":109713722,"body_markdown":"@TimPote the current implementation of execute() as of java 8 takes care of that condition also. If a task can be successfully queued, then we still need\n         * to double-check whether we should have added a thread\n         * (because existing ones died since last checking) or that\n         * the pool shut down since entry into this method. So we\n         * recheck state and if necessary roll back the enqueuing if\n         * stopped, or start a new thread if there are none.\nDarren, do you see any issues with this approach with java 8 also ?","body":"@TimPote the current implementation of execute() as of java 8 takes care of that condition also. If a task can be successfully queued, then we still need          * to double-check whether we should have added a thread          * (because existing ones died since last checking) or that          * the pool shut down since entry into this method. So we          * recheck state and if necessary roll back the enqueuing if          * stopped, or start a new thread if there are none. Darren, do you see any issues with this approach with java 8 also ?"}],"tags":[],"owner":{"account_id":31198,"reputation":2071,"user_id":85497,"display_name":"Darren Gilroy"},"comment_count":4,"down_vote_count":0,"up_vote_count":81,"is_accepted":false,"score":81,"last_activity_date":1282189995,"creation_date":1282189665,"answer_id":3518588,"question_id":3446011,"body_markdown":"In some very narrow circumstances, you can implement a java.util.concurrent.RejectedExecutionHandler that does what you need.  \r\n\r\n    RejectedExecutionHandler block = new RejectedExecutionHandler() {\r\n      rejectedExecution(Runnable r, ThreadPoolExecutor executor) {\r\n         executor.getQueue().put( r );\r\n      }\r\n    };\r\n    \r\n    ThreadPoolExecutor pool = new ...\r\n    pool.setRejectedExecutionHandler(block);\r\n\r\nNow.  This is **a very bad idea** for the following reasons\r\n\r\n - It&#39;s prone to deadlock because all the threads in the pool may die before the thing you put in the queue is visible.  Mitigate this by setting a reasonable keep alive time.\r\n - The task is not wrapped the way your Executor may expect.  Lots of executor implementations wrap their tasks in some sort of tracking object before execution.  Look at the source of yours.\r\n - Adding via getQueue() is strongly discouraged by the API, and may be prohibited at some point.\r\n\r\nA almost-always-better strategy is to install ThreadPoolExecutor.CallerRunsPolicy which will throttle your app by running the task on the thread which is calling execute().\r\n\r\nHowever, sometimes a blocking strategy, with all its inherent risks, is really what you want.  I&#39;d say under these conditions\r\n\r\n - You only have one thread calling execute()\r\n - You have to (or want to) have a very small queue length\r\n - You absolutely need to limit the number of threads running this work (usually for external reasons), and a caller-runs strategy would break that.\r\n - Your tasks are of unpredictable size, so caller-runs could introduce starvation if the pool was momentarily busy with 4 short tasks and your one thread calling execute got stuck with a big one.\r\n\r\nSo, as I say.  It&#39;s rarely needed and can be dangerous, but there you go.\r\n\r\nGood Luck.\r\n\r\n","title":"ThreadPoolExecutor Block When its Queue Is Full?","body":"<p>In some very narrow circumstances, you can implement a java.util.concurrent.RejectedExecutionHandler that does what you need.  </p>\n\n<pre><code>RejectedExecutionHandler block = new RejectedExecutionHandler() {\n  rejectedExecution(Runnable r, ThreadPoolExecutor executor) {\n     executor.getQueue().put( r );\n  }\n};\n\nThreadPoolExecutor pool = new ...\npool.setRejectedExecutionHandler(block);\n</code></pre>\n\n<p>Now.  This is <strong>a very bad idea</strong> for the following reasons</p>\n\n<ul>\n<li>It's prone to deadlock because all the threads in the pool may die before the thing you put in the queue is visible.  Mitigate this by setting a reasonable keep alive time.</li>\n<li>The task is not wrapped the way your Executor may expect.  Lots of executor implementations wrap their tasks in some sort of tracking object before execution.  Look at the source of yours.</li>\n<li>Adding via getQueue() is strongly discouraged by the API, and may be prohibited at some point.</li>\n</ul>\n\n<p>A almost-always-better strategy is to install ThreadPoolExecutor.CallerRunsPolicy which will throttle your app by running the task on the thread which is calling execute().</p>\n\n<p>However, sometimes a blocking strategy, with all its inherent risks, is really what you want.  I'd say under these conditions</p>\n\n<ul>\n<li>You only have one thread calling execute()</li>\n<li>You have to (or want to) have a very small queue length</li>\n<li>You absolutely need to limit the number of threads running this work (usually for external reasons), and a caller-runs strategy would break that.</li>\n<li>Your tasks are of unpredictable size, so caller-runs could introduce starvation if the pool was momentarily busy with 4 short tasks and your one thread calling execute got stuck with a big one.</li>\n</ul>\n\n<p>So, as I say.  It's rarely needed and can be dangerous, but there you go.</p>\n\n<p>Good Luck.</p>\n"},{"tags":[],"owner":{"account_id":3813164,"reputation":58,"user_id":3163325,"display_name":"MoeHoss"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1496218314,"creation_date":1496218314,"answer_id":44279184,"question_id":3446011,"body_markdown":"Here is my code snippet in this case:\r\n\r\n\r\n\r\n    public void executeBlocking( Runnable command ) {\r\n        if ( threadPool == null ) {\r\n            logger.error( &quot;Thread pool &#39;{}&#39; not initialized.&quot;, threadPoolName );\r\n            return;\r\n        }\r\n        ThreadPool threadPoolMonitor = this;\r\n        boolean accepted = false;\r\n        do {\r\n            try {\r\n                threadPool.execute( new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        try {\r\n                            command.run();\r\n                        }\r\n                        // to make sure that the monitor is freed on exit\r\n                        finally {\r\n                            // Notify all the threads waiting for the resource, if any.\r\n                            synchronized ( threadPoolMonitor ) {\r\n                                threadPoolMonitor.notifyAll();\r\n                            }\r\n                        }\r\n                    }\r\n                } );\r\n                accepted = true;\r\n            }\r\n            catch ( RejectedExecutionException e ) {\r\n                // Thread pool is full\r\n                try {\r\n                    // Block until one of the threads finishes its job and exits.\r\n                    synchronized ( threadPoolMonitor ) {\r\n                        threadPoolMonitor.wait();\r\n                    }\r\n                }\r\n                catch ( InterruptedException ignored ) {\r\n                    // return immediately\r\n                    break;\r\n                }\r\n            }\r\n        } while ( !accepted );\r\n    }\r\n\r\nthreadPool is a local instance of java.util.concurrent.ExecutorService which has been initialized already.","title":"ThreadPoolExecutor Block When its Queue Is Full?","body":"<p>Here is my code snippet in this case:</p>\n\n<pre><code>public void executeBlocking( Runnable command ) {\n    if ( threadPool == null ) {\n        logger.error( \"Thread pool '{}' not initialized.\", threadPoolName );\n        return;\n    }\n    ThreadPool threadPoolMonitor = this;\n    boolean accepted = false;\n    do {\n        try {\n            threadPool.execute( new Runnable() {\n                @Override\n                public void run() {\n                    try {\n                        command.run();\n                    }\n                    // to make sure that the monitor is freed on exit\n                    finally {\n                        // Notify all the threads waiting for the resource, if any.\n                        synchronized ( threadPoolMonitor ) {\n                            threadPoolMonitor.notifyAll();\n                        }\n                    }\n                }\n            } );\n            accepted = true;\n        }\n        catch ( RejectedExecutionException e ) {\n            // Thread pool is full\n            try {\n                // Block until one of the threads finishes its job and exits.\n                synchronized ( threadPoolMonitor ) {\n                    threadPoolMonitor.wait();\n                }\n            }\n            catch ( InterruptedException ignored ) {\n                // return immediately\n                break;\n            }\n        }\n    } while ( !accepted );\n}\n</code></pre>\n\n<p>threadPool is a local instance of java.util.concurrent.ExecutorService which has been initialized already.</p>\n"},{"tags":[],"owner":{"account_id":131546,"reputation":5705,"user_id":331637,"accept_rate":67,"display_name":"TinkerTank"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1510006121,"creation_date":1510006121,"answer_id":47146662,"question_id":3446011,"body_markdown":"I solved this problem using a custom RejectedExecutionHandler, which simply blocks the calling thread for a little while and then tries to submit the task again:\r\n\r\n    public class BlockWhenQueueFull implements RejectedExecutionHandler {\r\n\r\n        public void rejectedExecution(Runnable r, ThreadPoolExecutor executor) {\r\n\r\n            // The pool is full. Wait, then try again.\r\n            try {\r\n                long waitMs = 250;\r\n                Thread.sleep(waitMs);\r\n            } catch (InterruptedException interruptedException) {}\r\n\r\n            executor.execute(r);\r\n        }\r\n    }\r\n\r\nThis class can just be used in the thread-pool executor as a RejectedExecutionHandler like any other. In this example:\r\n\r\n    executorPool = new def threadPoolExecutor = new ThreadPoolExecutor(3, 3, 1L, TimeUnit.HOURS, workQueue, new BlockWhenQueueFull())\r\n\r\nThe only downside I see is that the calling thread might get locked slightly longer than strictly necessary (up to 250ms). For many short-running tasks, perhaps decrease the wait-time to 10ms or so. Moreover, since this executor is effectively being called recursively, very long waits for a thread to become available (hours) might result in a stack overflow.\r\n\r\nNevertheless, I personally like this method. It&#39;s compact, easy to understand, and works well. Am I missing anything important?\r\n\r\n","title":"ThreadPoolExecutor Block When its Queue Is Full?","body":"<p>I solved this problem using a custom RejectedExecutionHandler, which simply blocks the calling thread for a little while and then tries to submit the task again:</p>\n\n<pre><code>public class BlockWhenQueueFull implements RejectedExecutionHandler {\n\n    public void rejectedExecution(Runnable r, ThreadPoolExecutor executor) {\n\n        // The pool is full. Wait, then try again.\n        try {\n            long waitMs = 250;\n            Thread.sleep(waitMs);\n        } catch (InterruptedException interruptedException) {}\n\n        executor.execute(r);\n    }\n}\n</code></pre>\n\n<p>This class can just be used in the thread-pool executor as a RejectedExecutionHandler like any other. In this example:</p>\n\n<pre><code>executorPool = new def threadPoolExecutor = new ThreadPoolExecutor(3, 3, 1L, TimeUnit.HOURS, workQueue, new BlockWhenQueueFull())\n</code></pre>\n\n<p>The only downside I see is that the calling thread might get locked slightly longer than strictly necessary (up to 250ms). For many short-running tasks, perhaps decrease the wait-time to 10ms or so. Moreover, since this executor is effectively being called recursively, very long waits for a thread to become available (hours) might result in a stack overflow.</p>\n\n<p>Nevertheless, I personally like this method. It's compact, easy to understand, and works well. Am I missing anything important?</p>\n"},{"comments":[{"owner":{"account_id":105902,"reputation":3968,"user_id":282345,"accept_rate":88,"display_name":"asgs"},"score":1,"creation_date":1541973278,"post_id":49482402,"comment_id":93391795,"body_markdown":"Thread 1 is already blocked at time T2 when it finds the queue to be empty. I&#39;m not sure I understood your point on main thread blocking that thread.","body":"Thread 1 is already blocked at time T2 when it finds the queue to be empty. I&#39;m not sure I understood your point on main thread blocking that thread."},{"owner":{"account_id":5567592,"reputation":1162,"user_id":4414229,"display_name":"devkaoru"},"score":0,"creation_date":1542909381,"post_id":49482402,"comment_id":93746072,"body_markdown":"@asgs\n\n&quot;Thread 1 is already blocked at time T2 when it finds the queue to be empty.&quot;\n\n\nRight, and because it&#39;s the main thread&#39;s responsibility to put work into the queue, you can deduce that the main thread is blocking Thread 1.","body":"@asgs  &quot;Thread 1 is already blocked at time T2 when it finds the queue to be empty.&quot;   Right, and because it&#39;s the main thread&#39;s responsibility to put work into the queue, you can deduce that the main thread is blocking Thread 1."}],"tags":[],"owner":{"account_id":5567592,"reputation":1162,"user_id":4414229,"display_name":"devkaoru"},"comment_count":2,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1522024101,"creation_date":1522024101,"answer_id":49482402,"question_id":3446011,"body_markdown":"You could use a `semaphore` to block threads from going into the pool.\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    ExecutorService service = new ThreadPoolExecutor(\r\n        3, \r\n        3, \r\n        1, \r\n        TimeUnit.HOURS, \r\n        new ArrayBlockingQueue&lt;&gt;(6, false)\r\n    );\r\n    \r\n    Semaphore lock = new Semaphore(6); // equal to queue capacity\r\n    \r\n    for (int i = 0; i &lt; 100000; i++ ) {\r\n        try {\r\n            lock.acquire();\r\n            service.submit(() -&gt; {\r\n                try {\r\n                  task.run();\r\n                } finally {\r\n                  lock.release();\r\n                }\r\n            });\r\n        } catch (InterruptedException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n**Some gotchas**:\r\n\r\n - Only use this pattern with a fixed thread pool. The queue is unlikely to be full often, thus new threads won&#39;t be created. Check out the java docs on ThreadPoolExecutor for more details: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadPoolExecutor.html There is a way around this, but it is out of scope of this answer.\r\n - Queue size should be higher than the number of core threads. If we were to make the queue size 3, what would end up happening is:\r\n   - T0: all three threads are doing work, the queue is empty, no permits are available.\r\n   - T1: Thread 1 finishes, releases a permit.\r\n   - T2: Thread 1 polls the queue for new work, finds none, and **waits**.\r\n   - T3: Main thread submits work into the pool, thread 1 starts work.\r\n\r\n The example above translates to thread the main thread **blocking** thread 1. It may seem like a small period, but now multiply the frequency by days and months. All of a sudden, short periods of time add up to a large amount of time wasted.\r\n\r\n","title":"ThreadPoolExecutor Block When its Queue Is Full?","body":"<p>You could use a <code>semaphore</code> to block threads from going into the pool.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>ExecutorService service = new ThreadPoolExecutor(\n    3, \n    3, \n    1, \n    TimeUnit.HOURS, \n    new ArrayBlockingQueue&lt;&gt;(6, false)\n);\n\nSemaphore lock = new Semaphore(6); // equal to queue capacity\n\nfor (int i = 0; i &lt; 100000; i++ ) {\n    try {\n        lock.acquire();\n        service.submit(() -&gt; {\n            try {\n              task.run();\n            } finally {\n              lock.release();\n            }\n        });\n    } catch (InterruptedException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n\n<p><strong>Some gotchas</strong>:</p>\n\n<ul>\n<li>Only use this pattern with a fixed thread pool. The queue is unlikely to be full often, thus new threads won't be created. Check out the java docs on ThreadPoolExecutor for more details: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadPoolExecutor.html\" rel=\"noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadPoolExecutor.html</a> There is a way around this, but it is out of scope of this answer.</li>\n<li><p>Queue size should be higher than the number of core threads. If we were to make the queue size 3, what would end up happening is:</p>\n\n<ul>\n<li>T0: all three threads are doing work, the queue is empty, no permits are available.</li>\n<li>T1: Thread 1 finishes, releases a permit.</li>\n<li>T2: Thread 1 polls the queue for new work, finds none, and <strong>waits</strong>.</li>\n<li>T3: Main thread submits work into the pool, thread 1 starts work.</li>\n</ul>\n\n<p>The example above translates to thread the main thread <strong>blocking</strong> thread 1. It may seem like a small period, but now multiply the frequency by days and months. All of a sudden, short periods of time add up to a large amount of time wasted.</p></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":774364,"reputation":5391,"user_id":820666,"accept_rate":68,"display_name":"Bastian Voigt"},"score":0,"creation_date":1583249853,"post_id":50361304,"comment_id":107048586,"body_markdown":"Nice and smooth. Thank you!","body":"Nice and smooth. Thank you!"},{"owner":{"account_id":6968843,"reputation":63,"user_id":5345877,"display_name":"Xiaoyuan"},"score":1,"creation_date":1670569509,"post_id":50361304,"comment_id":131908873,"body_markdown":"from semaphore.release() executed to release the thread has a duration. in this case, ThreadPoolExecutor will execute rejecthandler: threadpool semaphore.release--&gt;main thread semaphore.acquire--&gt;main thread delegate.execute--&gt;threadpool release thread to another runnable.","body":"from semaphore.release() executed to release the thread has a duration. in this case, ThreadPoolExecutor will execute rejecthandler: threadpool semaphore.release--&gt;main thread semaphore.acquire--&gt;main thread delegate.execute--&gt;threadpool release thread to another runnable."}],"tags":[],"owner":{"account_id":12574718,"reputation":380,"user_id":9147527,"display_name":"Konstantin Abakumov"},"comment_count":2,"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1526434930,"creation_date":1526434930,"answer_id":50361304,"question_id":3446011,"body_markdown":"What you need to do is to wrap your ThreadPoolExecutor into Executor which explicitly limits amount of concurrently executed operations inside it:\r\n\r\n\r\n     private static class BlockingExecutor implements Executor {\r\n\r\n        final Semaphore semaphore;\r\n        final Executor delegate;\r\n\r\n        private BlockingExecutor(final int concurrentTasksLimit, final Executor delegate) {\r\n            semaphore = new Semaphore(concurrentTasksLimit);\r\n            this.delegate = delegate;\r\n        }\r\n\r\n        @Override\r\n        public void execute(final Runnable command) {\r\n            try {\r\n                semaphore.acquire();\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n                return;\r\n            }\r\n\r\n            final Runnable wrapped = () -&gt; {\r\n                try {\r\n                    command.run();\r\n                } finally {\r\n                    semaphore.release();\r\n                }\r\n            };\r\n\r\n            delegate.execute(wrapped);\r\n\r\n        }\r\n    }\r\n\r\nYou can adjust concurrentTasksLimit to the threadPoolSize + queueSize of your delegate executor and it will pretty much solve your problem","title":"ThreadPoolExecutor Block When its Queue Is Full?","body":"<p>What you need to do is to wrap your ThreadPoolExecutor into Executor which explicitly limits amount of concurrently executed operations inside it:</p>\n\n<pre><code> private static class BlockingExecutor implements Executor {\n\n    final Semaphore semaphore;\n    final Executor delegate;\n\n    private BlockingExecutor(final int concurrentTasksLimit, final Executor delegate) {\n        semaphore = new Semaphore(concurrentTasksLimit);\n        this.delegate = delegate;\n    }\n\n    @Override\n    public void execute(final Runnable command) {\n        try {\n            semaphore.acquire();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n            return;\n        }\n\n        final Runnable wrapped = () -&gt; {\n            try {\n                command.run();\n            } finally {\n                semaphore.release();\n            }\n        };\n\n        delegate.execute(wrapped);\n\n    }\n}\n</code></pre>\n\n<p>You can adjust concurrentTasksLimit to the threadPoolSize + queueSize of your delegate executor and it will pretty much solve your problem</p>\n"},{"tags":[],"owner":{"account_id":1223333,"reputation":401,"user_id":1189503,"display_name":"disrupt"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1527627852,"creation_date":1527627852,"answer_id":50592918,"question_id":3446011,"body_markdown":"This is what I ended up doing:\r\n\r\n    int NUM_THREADS = 6;\r\n    Semaphore lock = new Semaphore(NUM_THREADS);\r\n    ExecutorService pool = Executors.newCachedThreadPool();\r\n    \r\n    for (int i = 0; i &lt; 100000; i++) {\r\n        try {\r\n            lock.acquire();\r\n        } catch (InterruptedException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        pool.execute(() -&gt; {\r\n            try {\r\n                // Task logic\r\n            } finally {\r\n                lock.release();\r\n            }\r\n        });\r\n    }\r\n\r\n","title":"ThreadPoolExecutor Block When its Queue Is Full?","body":"<p>This is what I ended up doing:</p>\n\n<pre><code>int NUM_THREADS = 6;\nSemaphore lock = new Semaphore(NUM_THREADS);\nExecutorService pool = Executors.newCachedThreadPool();\n\nfor (int i = 0; i &lt; 100000; i++) {\n    try {\n        lock.acquire();\n    } catch (InterruptedException e) {\n        throw new RuntimeException(e);\n    }\n    pool.execute(() -&gt; {\n        try {\n            // Task logic\n        } finally {\n            lock.release();\n        }\n    });\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":74193,"reputation":4313,"user_id":213292,"accept_rate":40,"display_name":"JJ Roman"},"score":0,"creation_date":1674028771,"post_id":58708344,"comment_id":132624922,"body_markdown":"This depends on implementation detail of how ThreadPoolExecutor is implemented and is not guaranteed by jdk spec.","body":"This depends on implementation detail of how ThreadPoolExecutor is implemented and is not guaranteed by jdk spec."}],"tags":[],"owner":{"account_id":5000300,"reputation":506,"user_id":4019540,"display_name":"Thomm"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1572946457,"creation_date":1572946457,"answer_id":58708344,"question_id":3446011,"body_markdown":"A fairly straightforward option is to wrap your `BlockingQueue` with an implementation that calls `put(..)` when `offer(..)` is being invoked:\r\n\r\n```Java\r\npublic class BlockOnOfferAdapter&lt;T&gt; implements BlockingQueue&lt;T&gt; {\r\n\r\n(..)\r\n\r\n  public boolean offer(E o) {\r\n        try {\r\n            delegate.put(o);\r\n        } catch (InterruptedException e) {\r\n            Thread.currentThread().interrupt();\r\n            return false;\r\n        }\r\n        return true;\r\n  }\r\n\r\n(.. implement all other methods simply by delegating ..)\r\n\r\n}\r\n```\r\n\r\nThis works because by default `put(..)` waits until there is capacity in the queue when it is full, [see][1]:\r\n\r\n```Java\r\n    /**\r\n     * Inserts the specified element into this queue, waiting if necessary\r\n     * for space to become available.\r\n     *\r\n     * @param e the element to add\r\n     * @throws InterruptedException if interrupted while waiting\r\n     * @throws ClassCastException if the class of the specified element\r\n     *         prevents it from being added to this queue\r\n     * @throws NullPointerException if the specified element is null\r\n     * @throws IllegalArgumentException if some property of the specified\r\n     *         element prevents it from being added to this queue\r\n     */\r\n    void put(E e) throws InterruptedException;\r\n```\r\n\r\nNo catching of `RejectedExecutionException` or complicated locking necessary.\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html#put(E)","title":"ThreadPoolExecutor Block When its Queue Is Full?","body":"<p>A fairly straightforward option is to wrap your <code>BlockingQueue</code> with an implementation that calls <code>put(..)</code> when <code>offer(..)</code> is being invoked:</p>\n\n<pre><code>public class BlockOnOfferAdapter&lt;T&gt; implements BlockingQueue&lt;T&gt; {\n\n(..)\n\n  public boolean offer(E o) {\n        try {\n            delegate.put(o);\n        } catch (InterruptedException e) {\n            Thread.currentThread().interrupt();\n            return false;\n        }\n        return true;\n  }\n\n(.. implement all other methods simply by delegating ..)\n\n}\n</code></pre>\n\n<p>This works because by default <code>put(..)</code> waits until there is capacity in the queue when it is full, <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html#put(E)\" rel=\"nofollow noreferrer\">see</a>:</p>\n\n<pre><code>    /**\n     * Inserts the specified element into this queue, waiting if necessary\n     * for space to become available.\n     *\n     * @param e the element to add\n     * @throws InterruptedException if interrupted while waiting\n     * @throws ClassCastException if the class of the specified element\n     *         prevents it from being added to this queue\n     * @throws NullPointerException if the specified element is null\n     * @throws IllegalArgumentException if some property of the specified\n     *         element prevents it from being added to this queue\n     */\n    void put(E e) throws InterruptedException;\n</code></pre>\n\n<p>No catching of <code>RejectedExecutionException</code> or complicated locking necessary.</p>\n"},{"comments":[{"owner":{"account_id":5954045,"reputation":3379,"user_id":4681265,"display_name":"Adrian"},"score":0,"creation_date":1649086851,"post_id":61389846,"comment_id":126781618,"body_markdown":"This doesn&#39;t take into account the `void execute(Runnable command)` method which will go to the queue unblocked.","body":"This doesn&#39;t take into account the <code>void execute(Runnable command)</code> method which will go to the queue unblocked."}],"tags":[],"owner":{"account_id":997351,"reputation":1031,"user_id":1012978,"accept_rate":38,"display_name":"Milo van der Zee"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1587652658,"creation_date":1587652658,"answer_id":61389846,"question_id":3446011,"body_markdown":"Ok, old thread but this is what I found when searching for blocking thread executor. My code tries to get a semaphore when the task is submitted to the task queue. This blocks if there are no semaphores left. As soon as a task is done the semaphore is released with the decorator. Scary part is that there is a possibility of losing semaphore but that could be solved with for example a timed job that just clears semaphores on a timed basis.\r\n\r\nSo here my solution:\r\n\r\n    class BlockingThreadPoolTaskExecutor(concurrency: Int) : ThreadPoolTaskExecutor() {\r\n        companion object {\r\n            lateinit var semaphore: Semaphore\r\n        }\r\n    \r\n        init {\r\n            semaphore = Semaphore(concurrency)\r\n            val semaphoreTaskDecorator = SemaphoreTaskDecorator()\r\n            this.setTaskDecorator(semaphoreTaskDecorator)\r\n        }\r\n    \r\n        override fun &lt;T&gt; submit(task: Callable&lt;T&gt;): Future&lt;T&gt; {\r\n            log.debug(&quot;submit&quot;)\r\n            semaphore.acquire()\r\n            return super.submit(task)\r\n        }\r\n    }\r\n    \r\n    private class SemaphoreTaskDecorator : TaskDecorator {\r\n        override fun decorate(runnable: Runnable): Runnable {\r\n            log.debug(&quot;decorate&quot;)\r\n            return Runnable {\r\n                try {\r\n                    runnable.run()\r\n                } finally {\r\n                    log.debug(&quot;decorate done&quot;)\r\n                    semaphore.release()\r\n                }\r\n            }\r\n        }\r\n    }","title":"ThreadPoolExecutor Block When its Queue Is Full?","body":"<p>Ok, old thread but this is what I found when searching for blocking thread executor. My code tries to get a semaphore when the task is submitted to the task queue. This blocks if there are no semaphores left. As soon as a task is done the semaphore is released with the decorator. Scary part is that there is a possibility of losing semaphore but that could be solved with for example a timed job that just clears semaphores on a timed basis.</p>\n\n<p>So here my solution:</p>\n\n<pre><code>class BlockingThreadPoolTaskExecutor(concurrency: Int) : ThreadPoolTaskExecutor() {\n    companion object {\n        lateinit var semaphore: Semaphore\n    }\n\n    init {\n        semaphore = Semaphore(concurrency)\n        val semaphoreTaskDecorator = SemaphoreTaskDecorator()\n        this.setTaskDecorator(semaphoreTaskDecorator)\n    }\n\n    override fun &lt;T&gt; submit(task: Callable&lt;T&gt;): Future&lt;T&gt; {\n        log.debug(\"submit\")\n        semaphore.acquire()\n        return super.submit(task)\n    }\n}\n\nprivate class SemaphoreTaskDecorator : TaskDecorator {\n    override fun decorate(runnable: Runnable): Runnable {\n        log.debug(\"decorate\")\n        return Runnable {\n            try {\n                runnable.run()\n            } finally {\n                log.debug(\"decorate done\")\n                semaphore.release()\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5954045,"reputation":3379,"user_id":4681265,"display_name":"Adrian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657000898,"creation_date":1649087928,"answer_id":71740249,"question_id":3446011,"body_markdown":"One could overwrite `ThreadPoolExecutor.execute(command)` to use a `Semaphore`, e.g.:\r\n\r\n```\r\n/**\r\n * The setup answering the question needs to have:\r\n *\r\n * permits = 3\r\n * corePoolSize = permits (i.e. 3)\r\n * maximumPoolSize = corePoolSize (i.e. 3)\r\n * workQueue = anything different to null\r\n *\r\n * With this setup workQueue wont actually be used but only \r\n * to check if its empty, which should always be the case.\r\n * Any more than permits as value for maximumPoolSize will have \r\n * no effect because at any moment no more than permits calls to \r\n * super.execute() will be allowed by the semaphore.\r\n */\r\npublic class ExecutionBlockingThreadPool extends ThreadPoolExecutor {\r\n  private final Semaphore semaphore;\r\n\r\n  // constructor setting super() parameters and initializing semaphore\r\n  //\r\n  // Below is a bare minimum constructor; using\r\n  // corePoolSize = maximumPoolSize = permits \r\n  // allows one to use SynchronousQueue because I expect\r\n  // none other that isEmpty() to be called on it; it also\r\n  // allows for using 0L SECONDS because no more than \r\n  // corePoolSize threads should be attempted to create.\r\n  public ExecutionBlockingThreadPool(int corePoolSize) {\r\n    super(corePoolSize, corePoolSize, 0L, SECONDS, new SynchronousQueue&lt;Runnable&gt;());\r\n    semaphore = new Semaphore(corePoolSize, true);\r\n  }\r\n\r\n  public void execute(Runnable command) {\r\n    semaphore.acquire();\r\n    super.execute(() -&gt; {\r\n      try {\r\n        command.run();\r\n      } finally {\r\n        semaphore.release();\r\n      }\r\n    }\r\n  }\r\n}\r\n```","title":"ThreadPoolExecutor Block When its Queue Is Full?","body":"<p>One could overwrite <code>ThreadPoolExecutor.execute(command)</code> to use a <code>Semaphore</code>, e.g.:</p>\n<pre><code>/**\n * The setup answering the question needs to have:\n *\n * permits = 3\n * corePoolSize = permits (i.e. 3)\n * maximumPoolSize = corePoolSize (i.e. 3)\n * workQueue = anything different to null\n *\n * With this setup workQueue wont actually be used but only \n * to check if its empty, which should always be the case.\n * Any more than permits as value for maximumPoolSize will have \n * no effect because at any moment no more than permits calls to \n * super.execute() will be allowed by the semaphore.\n */\npublic class ExecutionBlockingThreadPool extends ThreadPoolExecutor {\n  private final Semaphore semaphore;\n\n  // constructor setting super() parameters and initializing semaphore\n  //\n  // Below is a bare minimum constructor; using\n  // corePoolSize = maximumPoolSize = permits \n  // allows one to use SynchronousQueue because I expect\n  // none other that isEmpty() to be called on it; it also\n  // allows for using 0L SECONDS because no more than \n  // corePoolSize threads should be attempted to create.\n  public ExecutionBlockingThreadPool(int corePoolSize) {\n    super(corePoolSize, corePoolSize, 0L, SECONDS, new SynchronousQueue&lt;Runnable&gt;());\n    semaphore = new Semaphore(corePoolSize, true);\n  }\n\n  public void execute(Runnable command) {\n    semaphore.acquire();\n    super.execute(() -&gt; {\n      try {\n        command.run();\n      } finally {\n        semaphore.release();\n      }\n    }\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5412976,"reputation":1,"user_id":4309095,"display_name":"Devesh Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662894523,"creation_date":1662894523,"answer_id":73678758,"question_id":3446011,"body_markdown":"You can imlement RejectedTaskHandler and get all the rejected tasks when Queue size if full. By default executors have the Abort policy so you can add these task back to the queue from handler or whatever the choice is.\r\n\r\n\r\n\r\n    public class ExecutorRejectedTaskHandlerFixedThreadPool {\r\n    public static void main(String[] args) throws InterruptedException {\r\n\r\n        //maximum queue size : 2\r\n        BlockingQueue&lt;Runnable&gt; blockingQueue =\r\n                new LinkedBlockingQueue&lt;Runnable&gt;(2);\r\n\r\n\r\n        CustomThreadPoolExecutor executor =\r\n                new CustomThreadPoolExecutor(4, 5, 5, TimeUnit.SECONDS,\r\n                        blockingQueue);\r\n\r\n        RejectedTaskHandler rejectedHandler = new RejectedTaskHandler();\r\n        executor.setRejectedExecutionHandler(rejectedHandler);\r\n        //submit 20 the tasks for execution\r\n        //Note: only 7 tasks(5-max pool size + 2-queue size) will be executed and rest will be rejected as queue will be overflowed\r\n        for (int i = 0; i &lt; 20; i++) {\r\n            executor.execute(new Task());\r\n        }\r\n        System.out.println(&quot;Thread name &quot; + Thread.currentThread().getName());\r\n\r\n\r\n    }\r\n\r\n    static class Task implements Runnable {\r\n        @Override\r\n        public void run() {\r\n            try {\r\n                Thread.sleep(500);\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n            System.out.println(&quot;Thread - &quot; + Thread.currentThread().getName() + &quot; performing it&#39;s job&quot;);\r\n        }\r\n    }\r\n\r\n\r\n    static class RejectedTaskHandler implements RejectedExecutionHandler {\r\n\r\n        @Override\r\n        public void rejectedExecution(Runnable r, ThreadPoolExecutor executor) {\r\n            System.out.println(&quot;Task rejected&quot; + r.toString());\r\n\r\n        }\r\n    }\r\n\r\n\r\n    public static class CustomThreadPoolExecutor extends ThreadPoolExecutor {\r\n\r\n        public CustomThreadPoolExecutor(int corePoolSize, int maximumPoolSize,\r\n                                        long keepAliveTime, TimeUnit unit,\r\n                                        BlockingQueue&lt;Runnable&gt; workQueue) {\r\n            super(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue);\r\n        }\r\n\r\n        @Override\r\n        protected void beforeExecute(Thread t, Runnable r) {\r\n            super.beforeExecute(t, r);\r\n        }\r\n\r\n        @Override\r\n        protected void afterExecute(Runnable r, Throwable t) {\r\n            super.afterExecute(r, t);\r\n\r\n        }\r\n    }\r\n\r\n}\r\n\r\n","title":"ThreadPoolExecutor Block When its Queue Is Full?","body":"<p>You can imlement RejectedTaskHandler and get all the rejected tasks when Queue size if full. By default executors have the Abort policy so you can add these task back to the queue from handler or whatever the choice is.</p>\n<pre><code>public class ExecutorRejectedTaskHandlerFixedThreadPool {\npublic static void main(String[] args) throws InterruptedException {\n\n    //maximum queue size : 2\n    BlockingQueue&lt;Runnable&gt; blockingQueue =\n            new LinkedBlockingQueue&lt;Runnable&gt;(2);\n\n\n    CustomThreadPoolExecutor executor =\n            new CustomThreadPoolExecutor(4, 5, 5, TimeUnit.SECONDS,\n                    blockingQueue);\n\n    RejectedTaskHandler rejectedHandler = new RejectedTaskHandler();\n    executor.setRejectedExecutionHandler(rejectedHandler);\n    //submit 20 the tasks for execution\n    //Note: only 7 tasks(5-max pool size + 2-queue size) will be executed and rest will be rejected as queue will be overflowed\n    for (int i = 0; i &lt; 20; i++) {\n        executor.execute(new Task());\n    }\n    System.out.println(&quot;Thread name &quot; + Thread.currentThread().getName());\n\n\n}\n\nstatic class Task implements Runnable {\n    @Override\n    public void run() {\n        try {\n            Thread.sleep(500);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        System.out.println(&quot;Thread - &quot; + Thread.currentThread().getName() + &quot; performing it's job&quot;);\n    }\n}\n\n\nstatic class RejectedTaskHandler implements RejectedExecutionHandler {\n\n    @Override\n    public void rejectedExecution(Runnable r, ThreadPoolExecutor executor) {\n        System.out.println(&quot;Task rejected&quot; + r.toString());\n\n    }\n}\n\n\npublic static class CustomThreadPoolExecutor extends ThreadPoolExecutor {\n\n    public CustomThreadPoolExecutor(int corePoolSize, int maximumPoolSize,\n                                    long keepAliveTime, TimeUnit unit,\n                                    BlockingQueue&lt;Runnable&gt; workQueue) {\n        super(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue);\n    }\n\n    @Override\n    protected void beforeExecute(Thread t, Runnable r) {\n        super.beforeExecute(t, r);\n    }\n\n    @Override\n    protected void afterExecute(Runnable r, Throwable t) {\n        super.afterExecute(r, t);\n\n    }\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":29751,"reputation":7797,"user_id":80617,"accept_rate":88,"display_name":"ghempton"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70006,"favorite_count":0,"down_vote_count":0,"up_vote_count":77,"answer_count":10,"score":77,"last_activity_date":1667900225,"creation_date":1281414293,"question_id":3446011,"body_markdown":"I am trying to execute lots of tasks using a ThreadPoolExecutor. Below is a hypothetical example:\r\n\r\n    def workQueue = new ArrayBlockingQueue&lt;Runnable&gt;(3, false)\r\n    def threadPoolExecutor = new ThreadPoolExecutor(3, 3, 1L, TimeUnit.HOURS, workQueue)\r\n    for(int i = 0; i &lt; 100000; i++)\r\n        threadPoolExecutor.execute(runnable)\r\n\r\nThe problem is that I quickly get a `java.util.concurrent.RejectedExecutionException` since the number of tasks exceeds the size of the work queue. However, the desired behavior I am looking for is to have the main thread block until there is room in the queue. What is the best way to accomplish this?\r\n","title":"ThreadPoolExecutor Block When its Queue Is Full?","body":"<p>I am trying to execute lots of tasks using a ThreadPoolExecutor. Below is a hypothetical example:</p>\n\n<pre><code>def workQueue = new ArrayBlockingQueue&lt;Runnable&gt;(3, false)\ndef threadPoolExecutor = new ThreadPoolExecutor(3, 3, 1L, TimeUnit.HOURS, workQueue)\nfor(int i = 0; i &lt; 100000; i++)\n    threadPoolExecutor.execute(runnable)\n</code></pre>\n\n<p>The problem is that I quickly get a <code>java.util.concurrent.RejectedExecutionException</code> since the number of tasks exceeds the size of the work queue. However, the desired behavior I am looking for is to have the main thread block until there is room in the queue. What is the best way to accomplish this?</p>\n"},{"tags":["java","apache-spark","mapreduce","rdd"],"answers":[{"comments":[{"owner":{"account_id":11077445,"reputation":503,"user_id":8133719,"accept_rate":50,"display_name":"zero_yu"},"score":0,"creation_date":1667858886,"post_id":74353262,"comment_id":131264116,"body_markdown":"Thanks. In java, I have to transfer JavaRDD&lt;Long&gt; to a JavaPairRDD&lt;Long, Long&gt; (just add whatever as the second value), then do the same operation.","body":"Thanks. In java, I have to transfer JavaRDD&lt;Long&gt; to a JavaPairRDD&lt;Long, Long&gt; (just add whatever as the second value), then do the same operation."}],"tags":[],"owner":{"account_id":18105895,"reputation":86,"user_id":13163227,"display_name":"Hema Jayachandran"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1667857457,"creation_date":1667857457,"answer_id":74353262,"question_id":74352929,"body_markdown":"I am posting a solution in scala. Should be almost similar in Java.\r\n\r\nDo a `leftOuterJoin` which would give all the records in the first rdd alongwith matching records from the second rdd. Like `WrappedArray((168,(def,None)), (192,(abc,Some(abc))))`. But to keep the record only present in first rdd, we apply a filter over `None`.\r\n\r\n```\r\nval data = spark.sparkContext.parallelize(Seq((192, &quot;abc&quot;),(168, &quot;def&quot;)))\r\nval data2 = spark.sparkContext.parallelize(Seq((192, &quot;abc&quot;)))\r\n\r\nval result = data\r\n.leftOuterJoin(data2)\r\n.filter(record =&gt; record._2._2 == None)\r\n\r\nprintln(result.collect.toSeq)\r\nOutput&gt; WrappedArray((168,(def,None)))\r\n```","title":"Find elements in one RDD but not in ther other RDD","body":"<p>I am posting a solution in scala. Should be almost similar in Java.</p>\n<p>Do a <code>leftOuterJoin</code> which would give all the records in the first rdd alongwith matching records from the second rdd. Like <code>WrappedArray((168,(def,None)), (192,(abc,Some(abc))))</code>. But to keep the record only present in first rdd, we apply a filter over <code>None</code>.</p>\n<pre><code>val data = spark.sparkContext.parallelize(Seq((192, &quot;abc&quot;),(168, &quot;def&quot;)))\nval data2 = spark.sparkContext.parallelize(Seq((192, &quot;abc&quot;)))\n\nval result = data\n.leftOuterJoin(data2)\n.filter(record =&gt; record._2._2 == None)\n\nprintln(result.collect.toSeq)\nOutput&gt; WrappedArray((168,(def,None)))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4157326,"reputation":135,"user_id":3408256,"display_name":"btbbass"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667900107,"creation_date":1667900107,"answer_id":74358478,"question_id":74352929,"body_markdown":"If you use the Dataframe API - RDD is old and does not have a lot of the optimisation of Tungsten engine - you can use an `antijoin` (it could exist also on RDD api, but let&#39;s use the good one ;-) )\r\n\r\n    val dataA = Seq((192, &quot;abc&quot;),(168, &quot;def&quot;) ).toDF(&quot;MyLong&quot;, &quot;MyString&quot;)\r\n    val dataB = Seq((192, &quot;abc&quot;)).toDF.toDF(&quot;MyLong&quot;, &quot;MyString&quot;)\r\n\r\n    dataA.join(dataB, Seq(&quot;MyLong&quot;), &quot;leftanti&quot;).show(false)\r\n\r\n    +------+--------+\r\n    |MyLong|MyString|\r\n    +------+--------+\r\n    |168   |def     |\r\n    +------+--------+\r\n\r\n","title":"Find elements in one RDD but not in ther other RDD","body":"<p>If you use the Dataframe API - RDD is old and does not have a lot of the optimisation of Tungsten engine - you can use an <code>antijoin</code> (it could exist also on RDD api, but let's use the good one ;-) )</p>\n<pre><code>val dataA = Seq((192, &quot;abc&quot;),(168, &quot;def&quot;) ).toDF(&quot;MyLong&quot;, &quot;MyString&quot;)\nval dataB = Seq((192, &quot;abc&quot;)).toDF.toDF(&quot;MyLong&quot;, &quot;MyString&quot;)\n\ndataA.join(dataB, Seq(&quot;MyLong&quot;), &quot;leftanti&quot;).show(false)\n\n+------+--------+\n|MyLong|MyString|\n+------+--------+\n|168   |def     |\n+------+--------+\n</code></pre>\n"}],"owner":{"account_id":11077445,"reputation":503,"user_id":8133719,"accept_rate":50,"display_name":"zero_yu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74353262,"answer_count":2,"score":0,"last_activity_date":1667900107,"creation_date":1667855184,"question_id":74352929,"body_markdown":"I have two JavaRDD&lt;Long&gt; A and B. I want to only keep longs that are in A but not in B. How should I do that? Thanks!","title":"Find elements in one RDD but not in ther other RDD","body":"<p>I have two JavaRDD A and B. I want to only keep longs that are in A but not in B. How should I do that? Thanks!</p>\n"},{"tags":["java","regex","exception"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1667895456,"post_id":74357482,"comment_id":131270455,"body_markdown":"I don&#39;t see any try-catch block. Btw, you don&#39;t need start and end anchors with `matches()`.","body":"I don&#39;t see any try-catch block. Btw, you don&#39;t need start and end anchors with <code>matches()</code>."},{"owner":{"account_id":22175146,"reputation":11,"user_id":16419838,"display_name":"Rawan"},"score":0,"creation_date":1667897337,"post_id":74357482,"comment_id":131271119,"body_markdown":"I just edited it","body":"I just edited it"},{"owner":{"account_id":2883526,"reputation":2320,"user_id":3439993,"accept_rate":33,"display_name":"Deltharis"},"score":0,"creation_date":1667897421,"post_id":74357482,"comment_id":131271156,"body_markdown":"Regex works. But you print the message from the exception. You didn&#39;t provide the details of your regex problem to the exception. What do you expect it to print?","body":"Regex works. But you print the message from the exception. You didn&#39;t provide the details of your regex problem to the exception. What do you expect it to print?"},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":2,"creation_date":1667897662,"post_id":74357482,"comment_id":131271237,"body_markdown":"I would recommend that you don&#39;t use such a pattern in general: throw an exception in your code and in the same piece of code (method) catch that exception and do something with it.\nExceptions are meant to communicate exceptional situations from callee to caller. \nIf you handle the error in the same code you could easily place the output message inside your `else` branch. (Once you `catch` the exception, it will not be processed any further.)","body":"I would recommend that you don&#39;t use such a pattern in general: throw an exception in your code and in the same piece of code (method) catch that exception and do something with it. Exceptions are meant to communicate exceptional situations from callee to caller.  If you handle the error in the same code you could easily place the output message inside your <code>else</code> branch. (Once you <code>catch</code> the exception, it will not be processed any further.)"},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1667898088,"post_id":74357482,"comment_id":131271392,"body_markdown":"Also note that that regular expression matches almost anything, as long as an `@` is present. For instance, it also matches `.@...`.","body":"Also note that that regular expression matches almost anything, as long as an <code>@</code> is present. For instance, it also matches <code>.@...</code>."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667900073,"creation_date":1667900073,"answer_id":74358472,"question_id":74357482,"body_markdown":"This regular expression rejects valid email addresses. Even if you did fix it. For example, `foo@bar` is actually valid (top-level domains can contain `MX` records. A few do!). This is the general formula for &#39;is it valid email&#39;:\r\n\r\n* Does it contain spaces? If yes, reject.\r\n* Does it contain at least 1 `@`? If no, reject.\r\n* Is the last `@` at position 0 (i.e. at the start), or at the end? Reject.\r\n\r\nOtherwise, pass. There are a few invalid emails that would nevertheless pass, but this is by and large no problem: `foo@bar` is not _really_ legal, but the only real way to know that, is to send an email to it and request the user click a link inside it before they can continue. No regexp is ever going to figure out if the email address entered by a user is in fact a valid email address, let alone an email address that belongs to that user, hence, there is no real point in trying to go any further than that. You&#39;re attempting to catch honest typoes, not actually validate anything, because that is impossible. Note that it can easily become legal tomorrow - someone just needs to set up the `bar` top level domain and make sure there&#39;s an MX record for it in its DNS registration and voila. `foo@bar` is now legal.\r\n\r\nYour regex is close to this ideal; you just want `^.+@.+$`\r\n\r\nNB: If you want to break spec and reject any email addresses to top-level domains, your regex is broken. Your intent is clearly to want `foo@a.b`, but you don&#39;t do that - that middle `.`, nestled between `(.+)`, is still a regex dot operator, meaning: &quot;any character&quot;. You&#39;d want `\\\\.` for that instead. But, don&#39;t - as I said, TLDs are themselves rare as mail servers, but valid according to spec!\r\n\r\nFix this and your code &#39;works&#39;, but note that your code can go only one of two ways:\r\n\r\n* The regexp matches, in which case you _again_ run the string through the regexp (seems rather pointless to do it twice!), and then trivially prints &#39;true&#39;. The entire `Pattern pattern = ...; System.out.println(...)` might as well be `System.out.println(&quot;true&quot;);` - that&#39;s what it will _always_ do - yes, the regexp that just matched, is still going to match, of course.\r\n* The regexp does not match, in which case we get to the else block, which throws an exception. This then goes to the catch block which can only catch this (as nothing else throws IllegalArgumentEx here), and prints the &#39;localized message&#39;, which is `null` here.\r\n\r\nSo, this code prints `true` if it matches, and `null` if it does not. That seems.. weird. And is needlessly complicated if that&#39;s what you wanted.\r\n\r\nBetter:\r\n\r\n```java\r\nclass Test {\r\n  private static final Pattern EMAIL_PATTERN = Pattern.compile(&quot;^.+@.+$&quot;);\r\n\r\n  public static boolean isValidEmail(String email) {\r\n    return EMAIL_PATTERN.matcher(email).matches();\r\n  }\r\n\r\n  public static void main(String[] args) {\r\n    var keyboard = new Scanner(System.in);\r\n\r\n    while (true) {\r\n      System.out.print(&quot;Enter an email address: &quot;);\r\n      String line = keyboard.nextLine().trim();\r\n      if (line.isEmpty()) System.exit(0);\r\n      if (isValidEmail(line)) {\r\n        System.out.println(&quot;Valid&quot;);\r\n      } else {\r\n        System.out.println(&quot;Not valid&quot;);\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThe try/catch block do not add anything useful here. You use try/catch when you want to transfer an error condition across method calls, not within the same method call, and not when the only meaningful data you can convey is a boolean flag. If that&#39;s all you have (&#39;valid&#39; or &#39;not valid&#39;), almost always you just want a boolean.\r\n\r\nIf you really want the exception instead:\r\n\r\n```java\r\nclass Test {\r\n  private static final Pattern EMAIL_PATTERN = Pattern.compile(&quot;^.+@.+$&quot;);\r\n\r\n  public static void validateEmail(String email) throws IllegalArgumentException {\r\n    if (!EMAIL_PATTERN.matcher(email).matches()) {\r\n      throw new IllegalArgumentException(&quot;Email &#39;&quot; + email + &quot;&#39; is not valid&quot;);\r\n    }\r\n  }\r\n\r\n  public static void main(String[] args) {\r\n    var keyboard = new Scanner(System.in);\r\n\r\n    while (true) {\r\n      System.out.print(&quot;Enter an email address: &quot;);\r\n      String line = keyboard.nextLine().trim();\r\n      if (line.isEmpty()) System.exit(0);\r\n      try {\r\n        validateEmail(line);\r\n        System.out.println(&quot;Valid&quot;);\r\n      } catch (IllegalArgumentException e) {\r\n        System.out.println(e.getMessage());\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n","title":"Java exception, RegEx","body":"<p>This regular expression rejects valid email addresses. Even if you did fix it. For example, <code>foo@bar</code> is actually valid (top-level domains can contain <code>MX</code> records. A few do!). This is the general formula for 'is it valid email':</p>\n<ul>\n<li>Does it contain spaces? If yes, reject.</li>\n<li>Does it contain at least 1 <code>@</code>? If no, reject.</li>\n<li>Is the last <code>@</code> at position 0 (i.e. at the start), or at the end? Reject.</li>\n</ul>\n<p>Otherwise, pass. There are a few invalid emails that would nevertheless pass, but this is by and large no problem: <code>foo@bar</code> is not <em>really</em> legal, but the only real way to know that, is to send an email to it and request the user click a link inside it before they can continue. No regexp is ever going to figure out if the email address entered by a user is in fact a valid email address, let alone an email address that belongs to that user, hence, there is no real point in trying to go any further than that. You're attempting to catch honest typoes, not actually validate anything, because that is impossible. Note that it can easily become legal tomorrow - someone just needs to set up the <code>bar</code> top level domain and make sure there's an MX record for it in its DNS registration and voila. <code>foo@bar</code> is now legal.</p>\n<p>Your regex is close to this ideal; you just want <code>^.+@.+$</code></p>\n<p>NB: If you want to break spec and reject any email addresses to top-level domains, your regex is broken. Your intent is clearly to want <code>foo@a.b</code>, but you don't do that - that middle <code>.</code>, nestled between <code>(.+)</code>, is still a regex dot operator, meaning: &quot;any character&quot;. You'd want <code>\\\\.</code> for that instead. But, don't - as I said, TLDs are themselves rare as mail servers, but valid according to spec!</p>\n<p>Fix this and your code 'works', but note that your code can go only one of two ways:</p>\n<ul>\n<li>The regexp matches, in which case you <em>again</em> run the string through the regexp (seems rather pointless to do it twice!), and then trivially prints 'true'. The entire <code>Pattern pattern = ...; System.out.println(...)</code> might as well be <code>System.out.println(&quot;true&quot;);</code> - that's what it will <em>always</em> do - yes, the regexp that just matched, is still going to match, of course.</li>\n<li>The regexp does not match, in which case we get to the else block, which throws an exception. This then goes to the catch block which can only catch this (as nothing else throws IllegalArgumentEx here), and prints the 'localized message', which is <code>null</code> here.</li>\n</ul>\n<p>So, this code prints <code>true</code> if it matches, and <code>null</code> if it does not. That seems.. weird. And is needlessly complicated if that's what you wanted.</p>\n<p>Better:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Test {\n  private static final Pattern EMAIL_PATTERN = Pattern.compile(&quot;^.+@.+$&quot;);\n\n  public static boolean isValidEmail(String email) {\n    return EMAIL_PATTERN.matcher(email).matches();\n  }\n\n  public static void main(String[] args) {\n    var keyboard = new Scanner(System.in);\n\n    while (true) {\n      System.out.print(&quot;Enter an email address: &quot;);\n      String line = keyboard.nextLine().trim();\n      if (line.isEmpty()) System.exit(0);\n      if (isValidEmail(line)) {\n        System.out.println(&quot;Valid&quot;);\n      } else {\n        System.out.println(&quot;Not valid&quot;);\n      }\n    }\n  }\n}\n</code></pre>\n<p>The try/catch block do not add anything useful here. You use try/catch when you want to transfer an error condition across method calls, not within the same method call, and not when the only meaningful data you can convey is a boolean flag. If that's all you have ('valid' or 'not valid'), almost always you just want a boolean.</p>\n<p>If you really want the exception instead:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Test {\n  private static final Pattern EMAIL_PATTERN = Pattern.compile(&quot;^.+@.+$&quot;);\n\n  public static void validateEmail(String email) throws IllegalArgumentException {\n    if (!EMAIL_PATTERN.matcher(email).matches()) {\n      throw new IllegalArgumentException(&quot;Email '&quot; + email + &quot;' is not valid&quot;);\n    }\n  }\n\n  public static void main(String[] args) {\n    var keyboard = new Scanner(System.in);\n\n    while (true) {\n      System.out.print(&quot;Enter an email address: &quot;);\n      String line = keyboard.nextLine().trim();\n      if (line.isEmpty()) System.exit(0);\n      try {\n        validateEmail(line);\n        System.out.println(&quot;Valid&quot;);\n      } catch (IllegalArgumentException e) {\n        System.out.println(e.getMessage());\n      }\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":22175146,"reputation":11,"user_id":16419838,"display_name":"Rawan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":264,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1667900073,"creation_date":1667894922,"question_id":74357482,"body_markdown":"i&#39;m new to java programming and i&#39;m trying to validate an email value using RegEx, the program should throw an exception when the user provides a wrong value, i managed to do this with an if-else. However, when i try to handle the error using a try-catch block the RegEx does not work anymore and the wrong value gets displayed anyways. How can i solve this?\r\n\r\nhere&#39;s the code\r\n\r\n``` lang-java\r\ntry {\r\n    String emailRegex = &quot;^(.+)@(.+).(.+)$&quot;;\r\n    if(email.matches(emailRegex)) {\r\n        Pattern pattern = Pattern.compile(emailRegex);\r\n        System.out.println(pattern.matcher(email).matches());\r\n    } else {\r\n        throw new IllegalArgumentException();\r\n    }\r\n} catch (IllegalArgumentException ex) {\r\n    System.out.println(ex.getLocalizedMessage());\r\n}\r\n```","title":"Java exception, RegEx","body":"<p>i'm new to java programming and i'm trying to validate an email value using RegEx, the program should throw an exception when the user provides a wrong value, i managed to do this with an if-else. However, when i try to handle the error using a try-catch block the RegEx does not work anymore and the wrong value gets displayed anyways. How can i solve this?</p>\n<p>here's the code</p>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n    String emailRegex = &quot;^(.+)@(.+).(.+)$&quot;;\n    if(email.matches(emailRegex)) {\n        Pattern pattern = Pattern.compile(emailRegex);\n        System.out.println(pattern.matcher(email).matches());\n    } else {\n        throw new IllegalArgumentException();\n    }\n} catch (IllegalArgumentException ex) {\n    System.out.println(ex.getLocalizedMessage());\n}\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":5613556,"reputation":2315,"user_id":4445625,"accept_rate":50,"display_name":"Marc Stroebel"},"score":0,"creation_date":1667899432,"post_id":74358260,"comment_id":131271840,"body_markdown":"boring one... use a db to store cancel requests userid + jobid, then check in the loop if an entry is present","body":"boring one... use a db to store cancel requests userid + jobid, then check in the loop if an entry is present"},{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":2,"creation_date":1667899551,"post_id":74358260,"comment_id":131271870,"body_markdown":"see this https://stackoverflow.com/questions/57606665/how-can-we-stop-backend-process","body":"see this <a href=\"https://stackoverflow.com/questions/57606665/how-can-we-stop-backend-process\" title=\"how can we stop backend process\">stackoverflow.com/questions/57606665/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":5979633,"reputation":2842,"user_id":4699160,"accept_rate":48,"display_name":"Saurabh Jhunjhunwala"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667899860,"creation_date":1667899860,"answer_id":74358421,"question_id":74358260,"body_markdown":"I think, we need a bit more understanding here. When you say after some time, you want to stop the execution for two apis, \r\n\r\n 1. how will you identify which apis and when to stop, looks like you would need another param there. \r\n\r\nImpl logic, \r\n\r\n - Run each logic in a separate thread, and kill the thread, when you want","title":"Spring Boot How to Cancel API Request After Sometime","body":"<p>I think, we need a bit more understanding here. When you say after some time, you want to stop the execution for two apis,</p>\n<ol>\n<li>how will you identify which apis and when to stop, looks like you would need another param there.</li>\n</ol>\n<p>Impl logic,</p>\n<ul>\n<li>Run each logic in a separate thread, and kill the thread, when you want</li>\n</ul>\n"}],"owner":{"account_id":19534415,"reputation":539,"user_id":14293486,"display_name":"Marcin_S"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":365,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1667899860,"creation_date":1667899094,"question_id":74358260,"body_markdown":"I have API exposed which sends a data to some other application, currently my code look like this : \r\n\r\n         @PostMapping(&quot;/run/}&quot;)\r\n            public ResponseEntity&lt;Void&gt;  runQuery(@PathVariable String timeToRun) {\r\n                  \r\n                          for(int i = 0 ; i &lt; timeToRun ; i++) {\r\n                              // Do some logic\r\n    }\r\n                        \r\n            }\r\n\r\nLet say i have 10 API request comes simultaneously, with different `timeToRun` parameters after sometime lets say 2 users want to stop their API request execution i.e `stop runQuery method` for those users, how i can maintain the state and how i can stop those 2 API request.","title":"Spring Boot How to Cancel API Request After Sometime","body":"<p>I have API exposed which sends a data to some other application, currently my code look like this :</p>\n<pre><code>     @PostMapping(&quot;/run/}&quot;)\n        public ResponseEntity&lt;Void&gt;  runQuery(@PathVariable String timeToRun) {\n              \n                      for(int i = 0 ; i &lt; timeToRun ; i++) {\n                          // Do some logic\n}\n                    \n        }\n</code></pre>\n<p>Let say i have 10 API request comes simultaneously, with different <code>timeToRun</code> parameters after sometime lets say 2 users want to stop their API request execution i.e <code>stop runQuery method</code> for those users, how i can maintain the state and how i can stop those 2 API request.</p>\n"},{"tags":["java","android","hashmap"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1667887552,"post_id":74356295,"comment_id":131268519,"body_markdown":"You can&#39;t override private methods.","body":"You can&#39;t override private methods."}],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1667899687,"creation_date":1667899687,"answer_id":74358373,"question_id":74356295,"body_markdown":"`android.content.ContextWrapper` has gained [a method called `getParams`][1] in API level 31.\r\n\r\nApparently you somehow extend that class and added your own (private) method called `getParams()` to it.\r\n\r\nNow that the base class has changed, this no longer works.\r\n\r\nThe simple fix is to rename your method to some other name so as not to clash with the one added in the base class. This of course also means you need to change all code that *calls* that method, or it will try to call the new one from `ContextWrapper` and become confused that it has a different return type (which at least will make this a compile time error, so it&#39;s hard to miss).\r\n\r\n  [1]: https://developer.android.com/reference/android/content/ContextWrapper#getParams()","title":"Private HashMap - Attempting to assign weaker access privileges; was public","body":"<p><code>android.content.ContextWrapper</code> has gained <a href=\"https://developer.android.com/reference/android/content/ContextWrapper#getParams()\" rel=\"nofollow noreferrer\">a method called <code>getParams</code></a> in API level 31.</p>\n<p>Apparently you somehow extend that class and added your own (private) method called <code>getParams()</code> to it.</p>\n<p>Now that the base class has changed, this no longer works.</p>\n<p>The simple fix is to rename your method to some other name so as not to clash with the one added in the base class. This of course also means you need to change all code that <em>calls</em> that method, or it will try to call the new one from <code>ContextWrapper</code> and become confused that it has a different return type (which at least will make this a compile time error, so it's hard to miss).</p>\n"}],"owner":{"account_id":19289729,"reputation":53,"user_id":14100027,"display_name":"Sandeep Kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1667899687,"creation_date":1667887403,"question_id":74356295,"body_markdown":"I bought an app from Codecanyon 3 years ago. Now app is a no more active update. So I decided to update SDK version 30 to 32 for the latest device update.\r\nBut an issue arises on 3 files. Please pardon me for my java skills.\r\n\r\nAn error was like this.\r\n\r\n&gt; error: getParams() in ManageProfile cannot override getParams() in ContextWrapper\r\n&gt; private HashMap&lt;String, String&gt; getParams() {\r\n&gt; \r\n&gt; attempting to assign weaker access privileges; was public\r\n\r\n\r\n\r\nManageProfile.java\r\n\r\n```\r\nprivate HashMap&lt;String, String&gt; getParams() {\r\n    if (!ProjectUtils.isEditTextFilled(binding.cetName))\r\n    params.put(Consts.NAME,ProjectUtils.getEditTextValue(binding.cetName));\r\n    else\r\n        Toast.makeText(mContext,R.string.addname, Toast.LENGTH_SHORT).show();\r\n\r\n    params.put(Consts.NAME,ProjectUtils.getEditTextValue(binding.cetName));\r\n    params.put(Consts.MOBILE,ProjectUtils.getEditTextValue(binding.cetNumber));\r\n    params.put(Consts.COUNTRY_CODE,&quot;91&quot;);\r\n    params.put(Consts.DEVICE_TYPE,&quot;Android&quot;);\r\n    params.put(Consts.DEVICE_TOKEN, Settings.Secure.getString(getApplicationContext().getContentResolver(),Settings.Secure.ANDROID_ID));\r\n\r\n\r\n    return params;\r\n}\r\n```\r\n\r\n\r\nSchedulepickDate.java\r\n\r\n```\r\nprivate HashMap&lt;String, String&gt; getParams() {\r\n    hashMap.put(Consts.PICKUP_DATE, ProjectUtils.getEditTextValue(binding.ctvPickupDate));\r\n    hashMap.put(Consts.PICKUP_TIME,  ProjectUtils.getEditTextValue(binding.ctvPickupTime));\r\n    hashMap.put(Consts.DELIVERY_DATE,  ProjectUtils.getEditTextValue(binding.ctvDeliveryDate));\r\n    hashMap.put(Consts.DELIVERY_TIME,  ProjectUtils.getEditTextValue(binding.ctvDeliveryTime));\r\n\r\n    return hashMap;\r\n}\r\n```\r\n\r\n\r\nSchedulePickup.java\r\n\r\n\r\n```\r\nprivate HashMap&lt;String, String&gt; getParams() {\r\n    HashMap&lt;String, String&gt; params = new HashMap&lt;&gt;();\r\n    params.put(Consts.SHIPPING_ADDRESS, address);\r\n    params.put(Consts.LATITUDE, String.valueOf(lats));\r\n    if (landmark.equalsIgnoreCase(&quot;&quot;)) {\r\n        params.put(Consts.LANDMARK, &quot;&quot;);\r\n    } else {\r\n        params.put(Consts.LANDMARK, landmark);\r\n    }\r\n    params.put(Consts.LONGITUDE, String.valueOf(longs));\r\n\r\n    return params;\r\n}\r\n```\r\n\r\nBuild.gradle\r\n\r\n```\r\napply plugin: &#39;com.android.application&#39;\r\napply plugin: &#39;com.google.gms.google-services&#39;\r\n\r\nandroid {\r\n\r\n    configurations.all {\r\n        resolutionStrategy.force &#39;com.google.code.findbugs:jsr305:1.3.9&#39;\r\n    }\r\n    dataBinding {\r\n        enabled = true\r\n    }\r\n    compileSdkVersion 32\r\n    buildToolsVersion &quot;29.0.3&quot;\r\n    defaultConfig {\r\n        applicationId &quot;com.myapp.in&quot;\r\n        minSdkVersion 23\r\n        targetSdkVersion 32\r\n        versionCode 8\r\n        versionName &quot;1.8&quot;\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n\r\n    android {\r\n        lintOptions {\r\n            checkReleaseBuilds false\r\n            // Or, if you prefer, you can continue to check for errors in release builds,\r\n            // but continue the build even when errors are found:\r\n            abortOnError false\r\n        }\r\n    }\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n\r\n}\r\next {\r\n    permissionsDispatcherVersion = &#39;2.2.0&#39;\r\n}\r\n\r\ndependencies {\r\n    implementation &quot;com.github.hotchemi:permissionsdispatcher:${permissionsDispatcherVersion}&quot;\r\n    implementation &#39;androidx.legacy:legacy-support-v4:1.0.0&#39;\r\n    implementation &#39;com.google.android.material:material:1.4.0&#39;\r\n    annotationProcessor &quot;com.github.hotchemi:permissionsdispatcher-processor:${permissionsDispatcherVersion}&quot;\r\n\r\n    implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n    implementation &#39;androidx.appcompat:appcompat:1.5.1&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:1.1.3&#39;\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n    androidTestImplementation &#39;androidx.test:runner:1.2.0&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.2.0&#39;\r\n\r\n    implementation &#39;com.ToxicBakery.viewpager.transforms:view-pager-transforms:1.2.32@aar&#39;\r\n\r\n    implementation &#39;com.nostra13.universalimageloader:universal-image-loader:1.9.5&#39;\r\n    implementation &#39;com.amitshekhar.android:android-networking:1.0.2&#39;\r\n    implementation &#39;com.google.code.gson:gson:2.8.2&#39;\r\n    implementation &#39;com.tbuonomo.andrui:viewpagerdotsindicator:3.0.3&#39;\r\n    implementation &#39;com.cocosw:bottomsheet:1.4.0&#39;\r\n    implementation &#39;com.github.hani-momanii:SuperNova-Emoji:1.1&#39;\r\n\r\n    implementation &#39;com.google.android.gms:play-services-maps:17.0.0&#39;\r\n    implementation &#39;com.google.android.gms:play-services-location:17.0.0&#39;\r\n    implementation &#39;com.miguelcatalan:materialsearchview:1.4.0&#39;\r\n    implementation &#39;com.github.bumptech.glide:glide:4.9.0&#39;\r\n    implementation &#39;de.hdodenhof:circleimageview:3.0.0&#39;\r\n    //noinspection GradleCompatible\r\n    implementation &#39;com.android.support:design:28.0.0&#39;\r\n    //noinspection GradleCompatible\r\n    implementation &#39;com.android.support:support-v4:28.0.0&#39;\r\n    implementation &#39;com.intuit.sdp:sdp-android:1.0.4&#39;\r\n    implementation &#39;com.google.firebase:firebase-messaging:20.2.0&#39;\r\n    implementation &#39;com.google.firebase:firebase-core:17.4.2&#39;\r\n    implementation &#39;androidx.browser:browser:1.2.0&#39;\r\n    implementation &#39;com.google.firebase:firebase-auth:21.0.3&#39;\r\n    implementation &#39;com.google.guava:listenablefuture:9999.0-empty-to-avoid-conflict-with-guava&#39;\r\n\r\n\r\n    implementation &#39;io.michaelrocks:libphonenumber-android:8.11.2&#39;\r\n    implementation &#39;de.hdodenhof:circleimageview:3.0.0&#39;\r\n    //noinspection GradleCompatible\r\n    implementation &#39;com.android.support:cardview-v7:28.0.0&#39;\r\n    //noinspection GradleCompatible\r\n    implementation &#39;com.android.support:recyclerview-v7:28.0.0&#39;\r\n    implementation &#39;org.jsoup:jsoup:1.13.1&#39;\r\n    implementation &#39;com.isseiaoki:simplecropview:1.1.4&#39;\r\n    implementation &#39;net.gotev:uploadservice:2.1&#39;\r\n    implementation &#39;id.zelory:compressor:2.1.0&#39;\r\n\r\n    implementation &#39;android.arch.lifecycle:extensions:1.1.0&#39;\r\n    implementation &#39;com.google.android.gms:play-services-maps:16.1.0&#39;\r\n\r\n    implementation &#39;com.github.bigstark:animated-ratingbar:0.3.0&#39;\r\n    implementation &#39;com.github.mahimrocky:TagView:1.0.3&#39;\r\n    implementation &#39;com.google.android:flexbox:1.0.0&#39;\r\n    implementation &#39;com.google.android.libraries.places:places-compat:1.0.0&#39;\r\n\r\n    implementation &quot;android.arch.persistence.room:runtime:1.1.1&quot;\r\n    annotationProcessor &quot;android.arch.persistence.room:compiler:1.1.1&quot;\r\n    testImplementation &quot;android.arch.persistence.room:testing:1.1.1&quot;\r\n\r\n    implementation &#39;com.hbb20:ccp:2.3.8&#39;\r\n    implementation &#39;com.github.florent37:singledateandtimepicker:1.2.2&#39;\r\n    implementation(&quot;com.schibstedspain.android:leku:5.0.0&quot;) {\r\n        exclude group: &#39;com.google.android.gms&#39;\r\n        exclude module: &quot;play-services-places&quot;\r\n    }\r\n    implementation &#39;com.google.android.gms:play-services-location:17.0.0&#39;\r\n    implementation &#39;com.firebaseui:firebase-ui-auth:7.2.0&#39;\r\n\r\n\r\n    implementation &#39;com.razorpay:checkout:1.4.9&#39; //for Razorpay\r\n}\r\n```\r\n\r\n\r\nI tried to make these function public using override method but not works for me, I was expecting to make these function work properly ","title":"Private HashMap - Attempting to assign weaker access privileges; was public","body":"<p>I bought an app from Codecanyon 3 years ago. Now app is a no more active update. So I decided to update SDK version 30 to 32 for the latest device update.\nBut an issue arises on 3 files. Please pardon me for my java skills.</p>\n<p>An error was like this.</p>\n<blockquote>\n<p>error: getParams() in ManageProfile cannot override getParams() in ContextWrapper\nprivate HashMap&lt;String, String&gt; getParams() {</p>\n<p>attempting to assign weaker access privileges; was public</p>\n</blockquote>\n<p>ManageProfile.java</p>\n<pre><code>private HashMap&lt;String, String&gt; getParams() {\n    if (!ProjectUtils.isEditTextFilled(binding.cetName))\n    params.put(Consts.NAME,ProjectUtils.getEditTextValue(binding.cetName));\n    else\n        Toast.makeText(mContext,R.string.addname, Toast.LENGTH_SHORT).show();\n\n    params.put(Consts.NAME,ProjectUtils.getEditTextValue(binding.cetName));\n    params.put(Consts.MOBILE,ProjectUtils.getEditTextValue(binding.cetNumber));\n    params.put(Consts.COUNTRY_CODE,&quot;91&quot;);\n    params.put(Consts.DEVICE_TYPE,&quot;Android&quot;);\n    params.put(Consts.DEVICE_TOKEN, Settings.Secure.getString(getApplicationContext().getContentResolver(),Settings.Secure.ANDROID_ID));\n\n\n    return params;\n}\n</code></pre>\n<p>SchedulepickDate.java</p>\n<pre><code>private HashMap&lt;String, String&gt; getParams() {\n    hashMap.put(Consts.PICKUP_DATE, ProjectUtils.getEditTextValue(binding.ctvPickupDate));\n    hashMap.put(Consts.PICKUP_TIME,  ProjectUtils.getEditTextValue(binding.ctvPickupTime));\n    hashMap.put(Consts.DELIVERY_DATE,  ProjectUtils.getEditTextValue(binding.ctvDeliveryDate));\n    hashMap.put(Consts.DELIVERY_TIME,  ProjectUtils.getEditTextValue(binding.ctvDeliveryTime));\n\n    return hashMap;\n}\n</code></pre>\n<p>SchedulePickup.java</p>\n<pre><code>private HashMap&lt;String, String&gt; getParams() {\n    HashMap&lt;String, String&gt; params = new HashMap&lt;&gt;();\n    params.put(Consts.SHIPPING_ADDRESS, address);\n    params.put(Consts.LATITUDE, String.valueOf(lats));\n    if (landmark.equalsIgnoreCase(&quot;&quot;)) {\n        params.put(Consts.LANDMARK, &quot;&quot;);\n    } else {\n        params.put(Consts.LANDMARK, landmark);\n    }\n    params.put(Consts.LONGITUDE, String.valueOf(longs));\n\n    return params;\n}\n</code></pre>\n<p>Build.gradle</p>\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'com.google.gms.google-services'\n\nandroid {\n\n    configurations.all {\n        resolutionStrategy.force 'com.google.code.findbugs:jsr305:1.3.9'\n    }\n    dataBinding {\n        enabled = true\n    }\n    compileSdkVersion 32\n    buildToolsVersion &quot;29.0.3&quot;\n    defaultConfig {\n        applicationId &quot;com.myapp.in&quot;\n        minSdkVersion 23\n        targetSdkVersion 32\n        versionCode 8\n        versionName &quot;1.8&quot;\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n\n    android {\n        lintOptions {\n            checkReleaseBuilds false\n            // Or, if you prefer, you can continue to check for errors in release builds,\n            // but continue the build even when errors are found:\n            abortOnError false\n        }\n    }\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n\n}\next {\n    permissionsDispatcherVersion = '2.2.0'\n}\n\ndependencies {\n    implementation &quot;com.github.hotchemi:permissionsdispatcher:${permissionsDispatcherVersion}&quot;\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\n    implementation 'com.google.android.material:material:1.4.0'\n    annotationProcessor &quot;com.github.hotchemi:permissionsdispatcher-processor:${permissionsDispatcherVersion}&quot;\n\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation 'androidx.appcompat:appcompat:1.5.1'\n    implementation 'androidx.constraintlayout:constraintlayout:1.1.3'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test:runner:1.2.0'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0'\n\n    implementation 'com.ToxicBakery.viewpager.transforms:view-pager-transforms:1.2.32@aar'\n\n    implementation 'com.nostra13.universalimageloader:universal-image-loader:1.9.5'\n    implementation 'com.amitshekhar.android:android-networking:1.0.2'\n    implementation 'com.google.code.gson:gson:2.8.2'\n    implementation 'com.tbuonomo.andrui:viewpagerdotsindicator:3.0.3'\n    implementation 'com.cocosw:bottomsheet:1.4.0'\n    implementation 'com.github.hani-momanii:SuperNova-Emoji:1.1'\n\n    implementation 'com.google.android.gms:play-services-maps:17.0.0'\n    implementation 'com.google.android.gms:play-services-location:17.0.0'\n    implementation 'com.miguelcatalan:materialsearchview:1.4.0'\n    implementation 'com.github.bumptech.glide:glide:4.9.0'\n    implementation 'de.hdodenhof:circleimageview:3.0.0'\n    //noinspection GradleCompatible\n    implementation 'com.android.support:design:28.0.0'\n    //noinspection GradleCompatible\n    implementation 'com.android.support:support-v4:28.0.0'\n    implementation 'com.intuit.sdp:sdp-android:1.0.4'\n    implementation 'com.google.firebase:firebase-messaging:20.2.0'\n    implementation 'com.google.firebase:firebase-core:17.4.2'\n    implementation 'androidx.browser:browser:1.2.0'\n    implementation 'com.google.firebase:firebase-auth:21.0.3'\n    implementation 'com.google.guava:listenablefuture:9999.0-empty-to-avoid-conflict-with-guava'\n\n\n    implementation 'io.michaelrocks:libphonenumber-android:8.11.2'\n    implementation 'de.hdodenhof:circleimageview:3.0.0'\n    //noinspection GradleCompatible\n    implementation 'com.android.support:cardview-v7:28.0.0'\n    //noinspection GradleCompatible\n    implementation 'com.android.support:recyclerview-v7:28.0.0'\n    implementation 'org.jsoup:jsoup:1.13.1'\n    implementation 'com.isseiaoki:simplecropview:1.1.4'\n    implementation 'net.gotev:uploadservice:2.1'\n    implementation 'id.zelory:compressor:2.1.0'\n\n    implementation 'android.arch.lifecycle:extensions:1.1.0'\n    implementation 'com.google.android.gms:play-services-maps:16.1.0'\n\n    implementation 'com.github.bigstark:animated-ratingbar:0.3.0'\n    implementation 'com.github.mahimrocky:TagView:1.0.3'\n    implementation 'com.google.android:flexbox:1.0.0'\n    implementation 'com.google.android.libraries.places:places-compat:1.0.0'\n\n    implementation &quot;android.arch.persistence.room:runtime:1.1.1&quot;\n    annotationProcessor &quot;android.arch.persistence.room:compiler:1.1.1&quot;\n    testImplementation &quot;android.arch.persistence.room:testing:1.1.1&quot;\n\n    implementation 'com.hbb20:ccp:2.3.8'\n    implementation 'com.github.florent37:singledateandtimepicker:1.2.2'\n    implementation(&quot;com.schibstedspain.android:leku:5.0.0&quot;) {\n        exclude group: 'com.google.android.gms'\n        exclude module: &quot;play-services-places&quot;\n    }\n    implementation 'com.google.android.gms:play-services-location:17.0.0'\n    implementation 'com.firebaseui:firebase-ui-auth:7.2.0'\n\n\n    implementation 'com.razorpay:checkout:1.4.9' //for Razorpay\n}\n</code></pre>\n<p>I tried to make these function public using override method but not works for me, I was expecting to make these function work properly</p>\n"},{"tags":["java","events","apache-kafka","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":4282200,"reputation":1648,"user_id":4203773,"display_name":"Pawe Szymczyk"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1667899574,"creation_date":1667723944,"answer_id":74334348,"question_id":74331435,"body_markdown":"The solution to your problem is spring-boot extension for Kafka, and [@KafkaListener][1] annotation. You should rather use a `@KafkaListener` annotation instead of `@EventListener` for handling events from Kafka. It is simple, stable, and the preferred solution.\r\n\r\nHowever, if you still want to use `@EventListener` you can inject `ApplicationEventPublisher` into the class responsible for polling messages from Kafka (eg. via `@KafkaListener`), example code below, but it is overengineering, introducing a lot of unnecessary complexity.\r\n\r\nPossible, but **not the recommended** solution: \r\n```java\r\n@Component\r\nclass SomeKafkaHandler{\r\n\r\n@Autowired\r\nApplicationEventPublisher eventPublisher;\r\n\r\n@KafkaListener\r\nvoid handleEvent(Event event){\r\n   //forward to @EventListener\r\n   eventPublisher.publishEvent(event);\r\n  }\r\n}\r\n\r\n```\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-kafka/reference/html/#kafka-listener-annotation","title":"How to use @EventListeners with Kafka poll() method?","body":"<p>The solution to your problem is spring-boot extension for Kafka, and <a href=\"https://docs.spring.io/spring-kafka/reference/html/#kafka-listener-annotation\" rel=\"nofollow noreferrer\">@KafkaListener</a> annotation. You should rather use a <code>@KafkaListener</code> annotation instead of <code>@EventListener</code> for handling events from Kafka. It is simple, stable, and the preferred solution.</p>\n<p>However, if you still want to use <code>@EventListener</code> you can inject <code>ApplicationEventPublisher</code> into the class responsible for polling messages from Kafka (eg. via <code>@KafkaListener</code>), example code below, but it is overengineering, introducing a lot of unnecessary complexity.</p>\n<p>Possible, but <strong>not the recommended</strong> solution:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\nclass SomeKafkaHandler{\n\n@Autowired\nApplicationEventPublisher eventPublisher;\n\n@KafkaListener\nvoid handleEvent(Event event){\n   //forward to @EventListener\n   eventPublisher.publishEvent(event);\n  }\n}\n\n</code></pre>\n"}],"owner":{"account_id":26842000,"reputation":1,"user_id":20428355,"display_name":"BallBreakerz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":232,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1667899574,"creation_date":1667681841,"question_id":74331435,"body_markdown":"There will be an event coming from kafka from some other applications and I want to listen to that event using spring events. The events are transported via kafka but How can I listen to that event?\r\n\r\n    `class Event{\r\n    String name;\r\n    int id;\r\n\r\n    }\r\n    `\r\nThe event transported would be of the type Event class, but how can I use poll which is to be used for kafka events?\r\n\r\nExample :\r\n    `@EventListener\r\n    public void handleEvent(){\r\n    &lt;KafkaEvent&gt;.poll()\r\n    }\r\n    `\r\nI couldn&#39;t understand how should I proceed with calling poll inside @EventListener method","title":"How to use @EventListeners with Kafka poll() method?","body":"<p>There will be an event coming from kafka from some other applications and I want to listen to that event using spring events. The events are transported via kafka but How can I listen to that event?</p>\n<pre><code>`class Event{\nString name;\nint id;\n\n}\n`\n</code></pre>\n<p>The event transported would be of the type Event class, but how can I use poll which is to be used for kafka events?</p>\n<p>Example :\n<code>@EventListener public void handleEvent(){ &lt;KafkaEvent&gt;.poll() } </code>\nI couldn't understand how should I proceed with calling poll inside @EventListener method</p>\n"},{"tags":["java","android"],"answers":[{"comments":[{"owner":{"account_id":15465752,"reputation":111,"user_id":11157146,"display_name":"Dennis Manicani Jr."},"score":0,"creation_date":1667900512,"post_id":74358241,"comment_id":131272243,"body_markdown":"What method should I import for getSystemService in DownloadManager manager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE); ?","body":"What method should I import for getSystemService in DownloadManager manager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE); ?"},{"owner":{"account_id":22341995,"reputation":750,"user_id":16561638,"display_name":"Robin Hood"},"score":1,"creation_date":1667900623,"post_id":74358241,"comment_id":131272293,"body_markdown":"import androidx.core.app.ActivityCompat;\nimport android.app.DownloadManager;\nimport android.content.Context;\nimport android.content.pm.PackageManager;\nimport android.net.Uri;\nimport android.os.Bundle;\nimport android.os.Environment;","body":"import androidx.core.app.ActivityCompat; import android.app.DownloadManager; import android.content.Context; import android.content.pm.PackageManager; import android.net.Uri; import android.os.Bundle; import android.os.Environment;"},{"owner":{"account_id":15465752,"reputation":111,"user_id":11157146,"display_name":"Dennis Manicani Jr."},"score":0,"creation_date":1667900656,"post_id":74358241,"comment_id":131272308,"body_markdown":"Oh wait nvm, I forgot to add context before it. I forgot I&#39;m not coding inside an Activity.","body":"Oh wait nvm, I forgot to add context before it. I forgot I&#39;m not coding inside an Activity."},{"owner":{"account_id":22341995,"reputation":750,"user_id":16561638,"display_name":"Robin Hood"},"score":0,"creation_date":1667900669,"post_id":74358241,"comment_id":131272316,"body_markdown":"this is my import there is nothing specific for getSystemService its default import for android simply ALT+ENTER","body":"this is my import there is nothing specific for getSystemService its default import for android simply ALT+ENTER"},{"owner":{"account_id":22341995,"reputation":750,"user_id":16561638,"display_name":"Robin Hood"},"score":0,"creation_date":1667900712,"post_id":74358241,"comment_id":131272327,"body_markdown":"ok you are using adapter then you must include context","body":"ok you are using adapter then you must include context"},{"owner":{"account_id":15465752,"reputation":111,"user_id":11157146,"display_name":"Dennis Manicani Jr."},"score":0,"creation_date":1667900822,"post_id":74358241,"comment_id":131272379,"body_markdown":"Oh no, it is inside the Handler Class for the RecyclerView.","body":"Oh no, it is inside the Handler Class for the RecyclerView."},{"owner":{"account_id":22341995,"reputation":750,"user_id":16561638,"display_name":"Robin Hood"},"score":1,"creation_date":1667900886,"post_id":74358241,"comment_id":131272407,"body_markdown":"i edited my answer after seeing recyclerview in your question","body":"i edited my answer after seeing recyclerview in your question"}],"tags":[],"owner":{"account_id":22341995,"reputation":750,"user_id":16561638,"display_name":"Robin Hood"},"comment_count":7,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1667899341,"creation_date":1667898972,"answer_id":74358241,"question_id":74357511,"body_markdown":"To download any file from Url you can simply use the Download Manager of Android \r\nthis is code to download file from URL\r\n\r\n    String[] PERMISSIONS = {\r\n                android.Manifest.permission.WRITE_EXTERNAL_STORAGE,\r\n                android.Manifest.permission.READ_EXTERNAL_STORAGE,\r\n        };\r\n\r\n    if (!hasPermissions(activity.this, PERMISSIONS)) {\r\n                String url = &quot;https://firebasestorage.googleapis.com/v0/b/smart-edubox-90c5d.appspot.com/o/uploaded_files%2Fpdf_files%2F08-11-2022_15%3A43%3A02_dummy.pdf?alt=media&amp;token=f68e7403-0cb7-4c86-9799-1c47fffd9cb5&quot;;\r\n                DownloadManager.Request request = new DownloadManager.Request(Uri.parse(url));\r\n                request.setDescription(&quot;Some descrition&quot;);\r\n                request.setTitle(&quot;Some title&quot;);\r\n                // in order for this if to run, you must use the android 3.2 to compile your app\r\n                request.allowScanningByMediaScanner();\r\n                request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);\r\n                request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, &quot;name-of-the-file.pdf&quot;);\r\n    \r\n                // get download service and enqueue file\r\n                DownloadManager manager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);\r\n                manager.enqueue(request);\r\n            }\r\n\r\nthis is permission for Storage\r\n\r\n    public static boolean hasPermissions(Context context, String... permissions) {\r\n            if (context != null &amp;&amp; permissions != null) {\r\n                for (String permission : permissions) {\r\n                    if (ActivityCompat.checkSelfPermission(context, permission) != PackageManager.PERMISSION_GRANTED) {\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n\r\nand your manifest permissions will be\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;","title":"Download File from FirebaseStorage using the file&#39;s downloadUrl. (Android, Java)","body":"<p>To download any file from Url you can simply use the Download Manager of Android\nthis is code to download file from URL</p>\n<pre><code>String[] PERMISSIONS = {\n            android.Manifest.permission.WRITE_EXTERNAL_STORAGE,\n            android.Manifest.permission.READ_EXTERNAL_STORAGE,\n    };\n\nif (!hasPermissions(activity.this, PERMISSIONS)) {\n            String url = &quot;https://firebasestorage.googleapis.com/v0/b/smart-edubox-90c5d.appspot.com/o/uploaded_files%2Fpdf_files%2F08-11-2022_15%3A43%3A02_dummy.pdf?alt=media&amp;token=f68e7403-0cb7-4c86-9799-1c47fffd9cb5&quot;;\n            DownloadManager.Request request = new DownloadManager.Request(Uri.parse(url));\n            request.setDescription(&quot;Some descrition&quot;);\n            request.setTitle(&quot;Some title&quot;);\n            // in order for this if to run, you must use the android 3.2 to compile your app\n            request.allowScanningByMediaScanner();\n            request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);\n            request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, &quot;name-of-the-file.pdf&quot;);\n\n            // get download service and enqueue file\n            DownloadManager manager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);\n            manager.enqueue(request);\n        }\n</code></pre>\n<p>this is permission for Storage</p>\n<pre><code>public static boolean hasPermissions(Context context, String... permissions) {\n        if (context != null &amp;&amp; permissions != null) {\n            for (String permission : permissions) {\n                if (ActivityCompat.checkSelfPermission(context, permission) != PackageManager.PERMISSION_GRANTED) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n</code></pre>\n<p>and your manifest permissions will be</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\n</code></pre>\n"}],"owner":{"account_id":15465752,"reputation":111,"user_id":11157146,"display_name":"Dennis Manicani Jr."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74358241,"answer_count":1,"score":0,"last_activity_date":1667899341,"creation_date":1667895097,"question_id":74357511,"body_markdown":"How do I download a specific file from the FirebaseStorage using its downloadURL?\r\n\r\n(e.g. https://firebasestorage.googleapis.com/v0/b/smart-edubox-90c5d.appspot.com/o/uploaded_files%2Fpdf_files%2F08-11-2022_15%3A43%3A02_dummy.pdf?alt=media&amp;token=f68e7403-0cb7-4c86-9799-1c47fffd9cb5 )\r\n\r\nI load the image, pdf, and text file into a RecyclerView. When I tap on a CardView (in the RecyclerView) I will be redirected to the file&#39;s corresponding download url in a browser. How should I do it so that instead of opening it in a web browser, the file would be downloaded to a specific folder in the user&#39;s phone.\r\n\r\nAny help is appreciated. Thanks!","title":"Download File from FirebaseStorage using the file&#39;s downloadUrl. (Android, Java)","body":"<p>How do I download a specific file from the FirebaseStorage using its downloadURL?</p>\n<p>(e.g. <a href=\"https://firebasestorage.googleapis.com/v0/b/smart-edubox-90c5d.appspot.com/o/uploaded_files%2Fpdf_files%2F08-11-2022_15%3A43%3A02_dummy.pdf?alt=media&amp;token=f68e7403-0cb7-4c86-9799-1c47fffd9cb5\" rel=\"nofollow noreferrer\">https://firebasestorage.googleapis.com/v0/b/smart-edubox-90c5d.appspot.com/o/uploaded_files%2Fpdf_files%2F08-11-2022_15%3A43%3A02_dummy.pdf?alt=media&amp;token=f68e7403-0cb7-4c86-9799-1c47fffd9cb5</a> )</p>\n<p>I load the image, pdf, and text file into a RecyclerView. When I tap on a CardView (in the RecyclerView) I will be redirected to the file's corresponding download url in a browser. How should I do it so that instead of opening it in a web browser, the file would be downloaded to a specific folder in the user's phone.</p>\n<p>Any help is appreciated. Thanks!</p>\n"},{"tags":["java","spring","apache-kafka","spring-kafka","messagebroker"],"comments":[{"owner":{"account_id":2010707,"reputation":890,"user_id":1799206,"accept_rate":48,"display_name":"Valath"},"score":0,"creation_date":1667706168,"post_id":74330877,"comment_id":131229147,"body_markdown":"May I know why you selected H2 in first place and overloading with an additional infrastructure to sync it. Why cant you consider a single db and all services connect to it? If you dont have a kafka cluster in your organisation, bring Kafka only for this purpose looks to be a bit complex for me.","body":"May I know why you selected H2 in first place and overloading with an additional infrastructure to sync it. Why cant you consider a single db and all services connect to it? If you dont have a kafka cluster in your organisation, bring Kafka only for this purpose looks to be a bit complex for me."},{"owner":{"account_id":22928628,"reputation":15,"user_id":17063310,"display_name":"Renzo Redoran"},"score":0,"creation_date":1667720499,"post_id":74330877,"comment_id":131230581,"body_markdown":"This is just a requirement","body":"This is just a requirement"}],"answers":[{"tags":[],"owner":{"account_id":4282200,"reputation":1648,"user_id":4203773,"display_name":"Pawe Szymczyk"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1667899260,"creation_date":1667679652,"answer_id":74331229,"question_id":74330877,"body_markdown":"Have you considered Kafka Streams? In my opinion, your solution is already done by internal RocksDB and Global KTable implementation in Kafka Streams. \r\n\r\nRocksDB will behave exactly like the H2 database which you&#39;ve mentioned. GlobalKTables functionality allows you to broadcast the current state to all running KafkaStreams instances and read data with ease. \r\n\r\n\r\nExample:\r\n\r\n1. Producer part:\r\n```java\r\n@RestController\r\nclass MessageEventForDepartmentController {\r\n  \r\n  @Autowired\r\n  KafkaTemplate&lt;String, MessageEventForDepartment&gt; kafkaTemplate;\r\n\r\n  @PostMapping(path = &quot;/departments&quot;, consumes = &quot;application/json&quot;)\r\n  @ResponseStatus(HttpStatus.ACCEPTED)\r\n  void(@RequestBody MessageEventForDepartment event) {\r\n     kafkaTemplate.send(&quot;topic-a&quot;, event.getId(), event);\r\n  }\r\n}\r\n```\r\n\r\n2. Consumer part - KafkaStreams GlobalKTable\r\n\r\n```\r\n@Component\r\npublic class StreamsBuilderMessageEventForDepartment {\r\n\r\n    @Autowired\r\n    void buildPipeline(StreamsBuilder streamsBuilder) {\r\n        KeyValueBytesStoreSupplier storeSupplier = Stores.inMemoryKeyValueStore(&quot;MessageEventForDepartmentGlobalStateStore&quot;);\r\n        Materialized&lt;String, MessageEventForDepartment, KeyValueStore&lt;Bytes, byte[]&gt;&gt; materialized = Materialized.&lt;String, MessageEventForDepartment&gt;as(storeSupplier)\r\n                .withKeySerde(Serdes.String())\r\n                .withValueSerde(new JsonSerde(MessageEventForDepartment.class));\r\n\r\n        GlobalKTable&lt;String, MessageEventForDepartment&gt; messagesCount = messagesGroupedByUser.globalTable(&quot;topic-a&quot;, materialized);\r\n    }\r\n}\r\n\r\n```\r\n\r\n3. Read data from RocksDB\r\n\r\n```\r\n@RestController\r\nclass MessageEventForDepartmentReadModelController {\r\n\r\n  @Autowired\r\n  KafkaStreams kafkaStreams\r\n\r\n  @Get(path = &quot;/departments&quot;)\r\n  MessageEventForDepartment getMessageEventForDepartment(String eventId) {\r\n      ReadOnlyKeyValueStore&lt;String, MessageEventForDepartment&gt; store = kafkaStreams.store(StoreQueryParameters.fromNameAndType(&quot;MessageEventForDepartmentGlobalStateStore&quot;, QueryableStoreTypes.keyValueStore()));\r\n   return store.get(eventId);\r\n  }\r\n}\r\n\r\n```","title":"How to run multiple instances of the same app as producer/consumer in Kafka","body":"<p>Have you considered Kafka Streams? In my opinion, your solution is already done by internal RocksDB and Global KTable implementation in Kafka Streams.</p>\n<p>RocksDB will behave exactly like the H2 database which you've mentioned. GlobalKTables functionality allows you to broadcast the current state to all running KafkaStreams instances and read data with ease.</p>\n<p>Example:</p>\n<ol>\n<li>Producer part:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\nclass MessageEventForDepartmentController {\n  \n  @Autowired\n  KafkaTemplate&lt;String, MessageEventForDepartment&gt; kafkaTemplate;\n\n  @PostMapping(path = &quot;/departments&quot;, consumes = &quot;application/json&quot;)\n  @ResponseStatus(HttpStatus.ACCEPTED)\n  void(@RequestBody MessageEventForDepartment event) {\n     kafkaTemplate.send(&quot;topic-a&quot;, event.getId(), event);\n  }\n}\n</code></pre>\n<ol start=\"2\">\n<li>Consumer part - KafkaStreams GlobalKTable</li>\n</ol>\n<pre><code>@Component\npublic class StreamsBuilderMessageEventForDepartment {\n\n    @Autowired\n    void buildPipeline(StreamsBuilder streamsBuilder) {\n        KeyValueBytesStoreSupplier storeSupplier = Stores.inMemoryKeyValueStore(&quot;MessageEventForDepartmentGlobalStateStore&quot;);\n        Materialized&lt;String, MessageEventForDepartment, KeyValueStore&lt;Bytes, byte[]&gt;&gt; materialized = Materialized.&lt;String, MessageEventForDepartment&gt;as(storeSupplier)\n                .withKeySerde(Serdes.String())\n                .withValueSerde(new JsonSerde(MessageEventForDepartment.class));\n\n        GlobalKTable&lt;String, MessageEventForDepartment&gt; messagesCount = messagesGroupedByUser.globalTable(&quot;topic-a&quot;, materialized);\n    }\n}\n\n</code></pre>\n<ol start=\"3\">\n<li>Read data from RocksDB</li>\n</ol>\n<pre><code>@RestController\nclass MessageEventForDepartmentReadModelController {\n\n  @Autowired\n  KafkaStreams kafkaStreams\n\n  @Get(path = &quot;/departments&quot;)\n  MessageEventForDepartment getMessageEventForDepartment(String eventId) {\n      ReadOnlyKeyValueStore&lt;String, MessageEventForDepartment&gt; store = kafkaStreams.store(StoreQueryParameters.fromNameAndType(&quot;MessageEventForDepartmentGlobalStateStore&quot;, QueryableStoreTypes.keyValueStore()));\n   return store.get(eventId);\n  }\n}\n\n</code></pre>\n"},{"comments":[{"owner":{"account_id":22928628,"reputation":15,"user_id":17063310,"display_name":"Renzo Redoran"},"score":0,"creation_date":1667684562,"post_id":74331360,"comment_id":131226429,"body_markdown":"But if each consumer group gets each message delivered once that does not mean that each instance will get an message because all instance are from the same group?","body":"But if each consumer group gets each message delivered once that does not mean that each instance will get an message because all instance are from the same group?"},{"owner":{"account_id":25715816,"reputation":322,"user_id":19473610,"display_name":"cmcnealy"},"score":1,"creation_date":1667684992,"post_id":74331360,"comment_id":131226507,"body_markdown":"Not quite. The basics of Kafka are: topics are split into Partitions. Each message goes to one partition. When a consumer group has multiple instances, the partitions are divided among the instances. Therefore, only one instance will receive the message.","body":"Not quite. The basics of Kafka are: topics are split into Partitions. Each message goes to one partition. When a consumer group has multiple instances, the partitions are divided among the instances. Therefore, only one instance will receive the message."},{"owner":{"account_id":22928628,"reputation":15,"user_id":17063310,"display_name":"Renzo Redoran"},"score":0,"creation_date":1667685284,"post_id":74331360,"comment_id":131226550,"body_markdown":"ok , so if i will change group id each time i start a new instance of my app and set the number of partitions lets say to 4 and my number of instances also to 4 , may this work?\nP.S thanks for stream advice , i am quite new to kafka so ...","body":"ok , so if i will change group id each time i start a new instance of my app and set the number of partitions lets say to 4 and my number of instances also to 4 , may this work? P.S thanks for stream advice , i am quite new to kafka so ..."},{"owner":{"account_id":25715816,"reputation":322,"user_id":19473610,"display_name":"cmcnealy"},"score":0,"creation_date":1667691668,"post_id":74331360,"comment_id":131227543,"body_markdown":"In general you just want to make sure that for every consumer group, there are more partitions than instances *of that group*, otherwise you&#39;ll have idle consumer instances which don&#39;t get assigned any partitions and therefore read no events.","body":"In general you just want to make sure that for every consumer group, there are more partitions than instances <i>of that group</i>, otherwise you&#39;ll have idle consumer instances which don&#39;t get assigned any partitions and therefore read no events."},{"owner":{"account_id":25715816,"reputation":322,"user_id":19473610,"display_name":"cmcnealy"},"score":0,"creation_date":1667691705,"post_id":74331360,"comment_id":131227547,"body_markdown":"However, in your use-case (which I highly recommend re-thinking as per Pawel&#39;s suggestion or the suggestion in the answer below), each group would only have one instance, so your number of partitions doesn&#39;t really matter relative to how many consumers you have.","body":"However, in your use-case (which I highly recommend re-thinking as per Pawel&#39;s suggestion or the suggestion in the answer below), each group would only have one instance, so your number of partitions doesn&#39;t really matter relative to how many consumers you have."}],"tags":[],"owner":{"account_id":25715816,"reputation":322,"user_id":19473610,"display_name":"cmcnealy"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1667680945,"creation_date":1667680945,"answer_id":74331360,"question_id":74330877,"body_markdown":"The reason why only one instance of the application receives each message is that each instance has the same `ConsumerConfig.GROUP_ID_CONFIG`. Kafka&#39;s consumer protocol is such that each consumer group gets each message delivered once (obviously, there&#39;s a lot more nuance to it, but this is basically how it works).\r\n\r\nPawel&#39;s suggestion to use KafkaStreams is a good onea GlobalKTable would provide what you want.\r\n\r\nLuca Pette wrote a great primer on Kakfa Streams here: https://lucapette.me/writing/getting-started-with-kafka-streams/","title":"How to run multiple instances of the same app as producer/consumer in Kafka","body":"<p>The reason why only one instance of the application receives each message is that each instance has the same <code>ConsumerConfig.GROUP_ID_CONFIG</code>. Kafka's consumer protocol is such that each consumer group gets each message delivered once (obviously, there's a lot more nuance to it, but this is basically how it works).</p>\n<p>Pawel's suggestion to use KafkaStreams is a good onea GlobalKTable would provide what you want.</p>\n<p>Luca Pette wrote a great primer on Kakfa Streams here: <a href=\"https://lucapette.me/writing/getting-started-with-kafka-streams/\" rel=\"nofollow noreferrer\">https://lucapette.me/writing/getting-started-with-kafka-streams/</a></p>\n"},{"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1667742509,"post_id":74331490,"comment_id":131234539,"body_markdown":"MirrorMaker 1 is deprecated, and OP doesn&#39;t state having multiple Kafka clusters. Replication is already builtin feature of Kafka","body":"MirrorMaker 1 is deprecated, and OP doesn&#39;t state having multiple Kafka clusters. Replication is already builtin feature of Kafka"},{"owner":{"account_id":19606885,"reputation":63,"user_id":14350340,"display_name":"Jeevananthan S"},"score":0,"creation_date":1667798563,"post_id":74331490,"comment_id":131244746,"body_markdown":"So I need more to know about Kafka.","body":"So I need more to know about Kafka."}],"tags":[],"owner":{"account_id":19606885,"reputation":63,"user_id":14350340,"display_name":"Jeevananthan S"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667682447,"creation_date":1667682447,"answer_id":74331490,"question_id":74330877,"body_markdown":"My understanding to your qus is that your using multiple instances for the same app which uses `IN-MEMEORY` so for `Eventually consistency` your going with Kafka stream.\r\n\r\nMY SOLUTIONS:\r\n1. I have used Rabbitmq mirroring which solves the same problem you have in Kafka also supports mirroring find the doc: https://cwiki.apache.org/confluence/plugins/servlet/mobile?contentId=27846330#content/view/27846330\r\n\r\n2. Consider redis cluster or master slave for In-memory db \r\n\r\n\r\n","title":"How to run multiple instances of the same app as producer/consumer in Kafka","body":"<p>My understanding to your qus is that your using multiple instances for the same app which uses <code>IN-MEMEORY</code> so for <code>Eventually consistency</code> your going with Kafka stream.</p>\n<p>MY SOLUTIONS:</p>\n<ol>\n<li><p>I have used Rabbitmq mirroring which solves the same problem you have in Kafka also supports mirroring find the doc: <a href=\"https://cwiki.apache.org/confluence/plugins/servlet/mobile?contentId=27846330#content/view/27846330\" rel=\"nofollow noreferrer\">https://cwiki.apache.org/confluence/plugins/servlet/mobile?contentId=27846330#content/view/27846330</a></p>\n</li>\n<li><p>Consider redis cluster or master slave for In-memory db</p>\n</li>\n</ol>\n"}],"owner":{"account_id":22928628,"reputation":15,"user_id":17063310,"display_name":"Renzo Redoran"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":617,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74331360,"answer_count":3,"score":0,"last_activity_date":1667899260,"creation_date":1667676480,"question_id":74330877,"body_markdown":"i have an simple rest api that have a h2 database so my plan is when i run multiple instances of the same app they will have different in memory databases.Now i want to syncronize these databases beetwen them.I thought kafka to be a good solution , so for example when i get an POST for instance with port 8080 , i should post also for all other instances. Now my app acts as a producer/consumer at the same time and i do not know why only one instance receive the message.\r\nThe code:\r\n```\r\n    @EnableKafka\r\n@Configuration\r\npublic class KafkaProducerConfigForDepartment {\r\n\r\n\r\n    @Value(value = &quot;${kafka.bootstrapAddress}&quot;)\r\n    private String bootstrapAddress;\r\n\r\n    @Bean\r\n    public ProducerFactory&lt;String, MessageEventForDepartment&gt; producerFactoryForDepartment() {\r\n        Map&lt;String, Object&gt; configProps = new HashMap&lt;&gt;();\r\n        configProps.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapAddress);\r\n        configProps.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\r\n        configProps.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, JsonSerializer.class);\r\n        return new DefaultKafkaProducerFactory&lt;&gt;(configProps);\r\n    }\r\n\r\n    @Bean\r\n    public KafkaTemplate&lt;String, MessageEventForDepartment&gt; kafkaTemplate() {\r\n        return new KafkaTemplate&lt;&gt;(producerFactoryForDepartment());\r\n    }\r\n\r\n}\r\n```\r\n```\r\n    @Configuration\r\npublic class KafkaTopicConfig {\r\n\r\n    @Value(value = &quot;${kafka.bootstrapAddress}&quot;)\r\n    private String bootstrapAddress;\r\n\r\n    @Bean\r\n    public ConsumerFactory&lt;String, MessageEventForDepartment&gt; consumerFactoryForDepartments() {\r\n        Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\r\n        props.put(JsonDeserializer.TRUSTED_PACKAGES, &quot;*&quot;);\r\n        props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapAddress);\r\n        props.put(ConsumerConfig.GROUP_ID_CONFIG, &quot;groupId&quot;);\r\n        return new DefaultKafkaConsumerFactory&lt;&gt;(props, new StringDeserializer(), new JsonDeserializer&lt;&gt;(MessageEventForDepartment.class));\r\n    }\r\n\r\n    @Bean\r\n    public NewTopic topic1() {\r\n        return TopicBuilder.name(&quot;topic12&quot;)\r\n                .partitions(10)\r\n                .replicas(10)\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n    public ConcurrentKafkaListenerContainerFactory&lt;String, MessageEventForDepartment&gt;\r\n    kafkaListenerContainerFactoryForDepartments() {\r\n\r\n        ConcurrentKafkaListenerContainerFactory&lt;String, MessageEventForDepartment&gt; factory =\r\n                new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n        factory.setConsumerFactory(consumerFactoryForDepartments());\r\n        return factory;\r\n    }\r\n\r\n}\r\n```\r\n```\r\n    @Component\r\n@Slf4j\r\npublic class DepartmentKafkaService {\r\n\r\n    @Autowired\r\n    private  DepartmentService departmentService;\r\n\r\n    @KafkaListener(topics = &quot;topic12&quot; , groupId = &quot;groupId&quot;,containerFactory = &quot;kafkaListenerContainerFactoryForDepartments&quot;)\r\n    public void listenGroupFoo(MessageEventForDepartment message) {\r\n         log.info(message.toString());\r\n    }\r\n}\r\n\r\n```\r\n\r\nWhy is this happening ? or maybe my approach is not very good , what are your thoughts ,guys?\r\n\r\n\r\n","title":"How to run multiple instances of the same app as producer/consumer in Kafka","body":"<p>i have an simple rest api that have a h2 database so my plan is when i run multiple instances of the same app they will have different in memory databases.Now i want to syncronize these databases beetwen them.I thought kafka to be a good solution , so for example when i get an POST for instance with port 8080 , i should post also for all other instances. Now my app acts as a producer/consumer at the same time and i do not know why only one instance receive the message.\nThe code:</p>\n<pre><code>    @EnableKafka\n@Configuration\npublic class KafkaProducerConfigForDepartment {\n\n\n    @Value(value = &quot;${kafka.bootstrapAddress}&quot;)\n    private String bootstrapAddress;\n\n    @Bean\n    public ProducerFactory&lt;String, MessageEventForDepartment&gt; producerFactoryForDepartment() {\n        Map&lt;String, Object&gt; configProps = new HashMap&lt;&gt;();\n        configProps.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapAddress);\n        configProps.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\n        configProps.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, JsonSerializer.class);\n        return new DefaultKafkaProducerFactory&lt;&gt;(configProps);\n    }\n\n    @Bean\n    public KafkaTemplate&lt;String, MessageEventForDepartment&gt; kafkaTemplate() {\n        return new KafkaTemplate&lt;&gt;(producerFactoryForDepartment());\n    }\n\n}\n</code></pre>\n<pre><code>    @Configuration\npublic class KafkaTopicConfig {\n\n    @Value(value = &quot;${kafka.bootstrapAddress}&quot;)\n    private String bootstrapAddress;\n\n    @Bean\n    public ConsumerFactory&lt;String, MessageEventForDepartment&gt; consumerFactoryForDepartments() {\n        Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\n        props.put(JsonDeserializer.TRUSTED_PACKAGES, &quot;*&quot;);\n        props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapAddress);\n        props.put(ConsumerConfig.GROUP_ID_CONFIG, &quot;groupId&quot;);\n        return new DefaultKafkaConsumerFactory&lt;&gt;(props, new StringDeserializer(), new JsonDeserializer&lt;&gt;(MessageEventForDepartment.class));\n    }\n\n    @Bean\n    public NewTopic topic1() {\n        return TopicBuilder.name(&quot;topic12&quot;)\n                .partitions(10)\n                .replicas(10)\n                .build();\n    }\n\n    @Bean\n    public ConcurrentKafkaListenerContainerFactory&lt;String, MessageEventForDepartment&gt;\n    kafkaListenerContainerFactoryForDepartments() {\n\n        ConcurrentKafkaListenerContainerFactory&lt;String, MessageEventForDepartment&gt; factory =\n                new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n        factory.setConsumerFactory(consumerFactoryForDepartments());\n        return factory;\n    }\n\n}\n</code></pre>\n<pre><code>    @Component\n@Slf4j\npublic class DepartmentKafkaService {\n\n    @Autowired\n    private  DepartmentService departmentService;\n\n    @KafkaListener(topics = &quot;topic12&quot; , groupId = &quot;groupId&quot;,containerFactory = &quot;kafkaListenerContainerFactoryForDepartments&quot;)\n    public void listenGroupFoo(MessageEventForDepartment message) {\n         log.info(message.toString());\n    }\n}\n\n</code></pre>\n<p>Why is this happening ? or maybe my approach is not very good , what are your thoughts ,guys?</p>\n"},{"tags":["java","string","spring-boot","enums","annotations"],"comments":[{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1667867631,"post_id":74354466,"comment_id":131265833,"body_markdown":"Your question is unclear.  Are you asking how to create a new custom `@ConvertToEnum` annotation?  Also, what do you mean about uppercase &quot;working&quot; but not lowercase?","body":"Your question is unclear.  Are you asking how to create a new custom <code>@ConvertToEnum</code> annotation?  Also, what do you mean about uppercase &quot;working&quot; but not lowercase?"},{"owner":{"account_id":16006888,"reputation":3,"user_id":11552184,"display_name":"Amin Norouzi"},"score":0,"creation_date":1667868013,"post_id":74354466,"comment_id":131265890,"body_markdown":"Yes. I mean if you send lowercase String in request, it does not convert to Enum unless you use &quot;Type.valueOf(&quot;movie_capable&quot;.toUpperCase())&quot;.","body":"Yes. I mean if you send lowercase String in request, it does not convert to Enum unless you use &quot;Type.valueOf(&quot;movie_capable&quot;.toUpperCase())&quot;."}],"answers":[{"tags":[],"owner":{"account_id":10693447,"reputation":878,"user_id":7871511,"display_name":"Rohit Agarwal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1667899223,"creation_date":1667899223,"answer_id":74358287,"question_id":74354466,"body_markdown":"Yes this is possible, you can use ```@JsonDeserialize``` annotation on top of ```private Type type;``` \r\n\r\nHere is the full working implementation.\r\n\r\n```\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class ProviderRequest implements Serializable {\r\n\r\n    @JsonDeserialize(using = EnumTypeDeserializer.class)\r\n    private Type type;\r\n    // Other stuff\r\n}\r\n```\r\n\r\n```\r\npublic class EnumTypeDeserializer extends JsonDeserializer&lt;Type&gt; {\r\n\r\n    @Override\r\n    public Type deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException {\r\n        final ObjectCodec objectCodec = jsonParser.getCodec();\r\n        final JsonNode node = objectCodec.readTree(jsonParser);\r\n        final String type = node.asText();\r\n        return Type.valueOf(type.toUpperCase());\r\n    }\r\n}\r\n```","title":"How to convert String to Enum with an annotation in spring boot","body":"<p>Yes this is possible, you can use <code>@JsonDeserialize</code> annotation on top of <code>private Type type;</code></p>\n<p>Here is the full working implementation.</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class ProviderRequest implements Serializable {\n\n    @JsonDeserialize(using = EnumTypeDeserializer.class)\n    private Type type;\n    // Other stuff\n}\n</code></pre>\n<pre><code>public class EnumTypeDeserializer extends JsonDeserializer&lt;Type&gt; {\n\n    @Override\n    public Type deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException {\n        final ObjectCodec objectCodec = jsonParser.getCodec();\n        final JsonNode node = objectCodec.readTree(jsonParser);\n        final String type = node.asText();\n        return Type.valueOf(type.toUpperCase());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":16006888,"reputation":3,"user_id":11552184,"display_name":"Amin Norouzi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1901,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74358287,"answer_count":1,"score":-1,"last_activity_date":1667899223,"creation_date":1667867232,"question_id":74354466,"body_markdown":"I want to create an annotation that converts String to my Enum object. I have a DTO object that gets a String field named type as request body. Here I want to take that `String and covert it to my Enum` object with a custom `annotation`.\r\n\r\nEnum object:\r\n\r\n```\r\npublic enum Type {\r\n\r\n    MOVIE_CAPABLE,\r\n    SERIES_CAPABLE,\r\n    MOVIE_SERIES_CAPABLE\r\n}\r\n```\r\n\r\nDTO object:\r\n\r\n```\r\n@Data\r\npublic class ProviderRequest {\r\n\r\n    @ConvertToEnum\r\n    private Type type;\r\n\r\n    // Other stuff\r\n}\r\n```\r\n\r\nI know that it will work with uppercase String like `MOVIE_CAPABLE` without any kind of converting but I want to be able to send lowercase string too.\r\n\r\nThanks!","title":"How to convert String to Enum with an annotation in spring boot","body":"<p>I want to create an annotation that converts String to my Enum object. I have a DTO object that gets a String field named type as request body. Here I want to take that <code>String and covert it to my Enum</code> object with a custom <code>annotation</code>.</p>\n<p>Enum object:</p>\n<pre><code>public enum Type {\n\n    MOVIE_CAPABLE,\n    SERIES_CAPABLE,\n    MOVIE_SERIES_CAPABLE\n}\n</code></pre>\n<p>DTO object:</p>\n<pre><code>@Data\npublic class ProviderRequest {\n\n    @ConvertToEnum\n    private Type type;\n\n    // Other stuff\n}\n</code></pre>\n<p>I know that it will work with uppercase String like <code>MOVIE_CAPABLE</code> without any kind of converting but I want to be able to send lowercase string too.</p>\n<p>Thanks!</p>\n"},{"tags":["java","json","jackson","deserialization","fasterxml"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1667836750,"post_id":74349301,"comment_id":131257076,"body_markdown":"[This](https://stackoverflow.com/a/39413177/3636601) should help you","body":"<a href=\"https://stackoverflow.com/a/39413177/3636601\">This</a> should help you"},{"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"score":0,"creation_date":1667837895,"post_id":74349301,"comment_id":131257526,"body_markdown":"The message error seems referring to the `FileTransferStructureExecution` class, not to the `FileTransferStructure`class.","body":"The message error seems referring to the <code>FileTransferStructureExecution</code> class, not to the <code>FileTransferStructure</code>class."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1667846170,"post_id":74349301,"comment_id":131260538,"body_markdown":"`TransferDirection` and `FileType` are still missing.","body":"<code>TransferDirection</code> and <code>FileType</code> are still missing."},{"owner":{"account_id":5735326,"reputation":11,"user_id":4529691,"display_name":"Paolo"},"score":0,"creation_date":1667861129,"post_id":74349301,"comment_id":131264616,"body_markdown":"@AlexanderIvanchenko what do you mean ?","body":"@AlexanderIvanchenko what do you mean ?"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1667862856,"post_id":74349301,"comment_id":131264989,"body_markdown":"I mean that I can&#39;t try to parse the sample data without these two classes.","body":"I mean that I can&#39;t try to parse the sample data without these two classes."},{"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"score":0,"creation_date":1667901110,"post_id":74349301,"comment_id":131272500,"body_markdown":"Not sure if it can help but I noticed `deleteSource` property is visible, there is some difference between `deleteSource` setter and `deleteFile` setter?","body":"Not sure if it can help but I noticed <code>deleteSource</code> property is visible, there is some difference between <code>deleteSource</code> setter and <code>deleteFile</code> setter?"},{"owner":{"account_id":5735326,"reputation":11,"user_id":4529691,"display_name":"Paolo"},"score":0,"creation_date":1667904181,"post_id":74349301,"comment_id":131273621,"body_markdown":"Hi @dariosicily , no differences between deleteSource and deleteFile","body":"Hi @dariosicily , no differences between deleteSource and deleteFile"}],"owner":{"account_id":5735326,"reputation":11,"user_id":4529691,"display_name":"Paolo"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":203,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667898992,"creation_date":1667836243,"question_id":74349301,"body_markdown":"I&#39;m trying to deserialize a JSON but I still get the same ***UnrecognizedPropertyException*** even though the Object has all the properties needed for the process of deserialization, at least I think!\r\n\r\nThe property not recognized is &quot;deleteFile&quot; .\r\n\r\n\r\nHere the JSON:\r\n\r\n\r\n    {\r\n        &quot;host&quot; : &quot;xxx.xxx.xxxx&quot;,\r\n        &quot;port&quot; : 22,\r\n        &quot;credential&quot; : &quot;yyyyy&quot;,,\r\n        &quot;path&quot; : &quot;/xx/yy/zz/&quot;,\r\n        &quot;name&quot; : &quot;readme.txt&quot;,\r\n        &quot;type&quot;: &quot;TXT&quot;,\r\n        &quot;direction&quot; : &quot;TO_KUBE&quot;,\r\n        &quot;deleteFile&quot;: true\r\n    }\r\n\r\n\r\nHere the POJO classes:\r\n\r\n\r\n    public class FileTransferStructureExecution&lt;F extends FileStructure&gt; extends FileTransferStructure&lt;F&gt; {\r\n\t\r\n\r\n        private Integer fixedLength;\r\n    \tprivate Boolean flagJes = false;\r\n    \r\n    \tpublic FileTransferStructureExecution() {}\r\n    \t\r\n    \tpublic FileTransferStructureExecution(F fileStructure) {\r\n    \t\tsuper(fileStructure);\r\n    \t}\r\n    \t\r\n    \tpublic FileTransferStructureExecution(TransferDirection direction, String path, String name, FileType type) {\r\n    \t\tsuper(direction, path, name, type);\r\n    \t}\r\n    \t\r\n    \tpublic FileTransferStructureExecution(TransferDirection direction, String path, String name, FileType type, String credential) {\r\n    \t\tsuper(direction, path, name, type, credential);\r\n    \t}\r\n        // getters and setters\r\n    }\r\n\r\n    public class FileTransferStructure&lt;F extends FileStructure&gt; {\r\n    \r\n    \tprivate TransferDirection direction;\r\n    \tprivate String path;\r\n    \tprivate String name;\r\n    \tprivate String inputName;\r\n    \tprivate FileType type;\r\n    \tprivate String host;\r\n    \tprivate String port;\r\n    \tprivate String credential;\r\n    \tprivate Boolean deleteSource = false;\r\n    \tprivate Boolean deleteFile = false;\r\n    \tprivate F fileStructure;\r\n    \t\r\n    \tpublic FileTransferStructure() {}\r\n    \t\r\n    \tpublic FileTransferStructure(F fileStructure) {\r\n    \t\tthis.path = fileStructure.getPath();\r\n    \t\tthis.name = fileStructure.getName();\r\n    \t\tthis.type = fileStructure.getType();\r\n    \t\tthis.fileStructure = fileStructure;\r\n    \t}\r\n    \t\r\n    \tpublic FileTransferStructure(TransferDirection direction, String path, String name, FileType type) {\r\n    \t\tthis.direction = direction;\r\n    \t\tthis.path = path;\r\n    \t\tthis.name = name;\r\n    \t\tthis.type = type;\r\n    \t}\r\n    \t\r\n    \tpublic FileTransferStructure(TransferDirection direction, String path, String name, FileType type, String credential) {\r\n    \t\tthis.direction = direction;\r\n    \t\tthis.path = path;\r\n    \t\tthis.name = name;\r\n    \t\tthis.type = type;\r\n    \t\tthis.credential = credential;\r\n    \t}\r\n        // getters and setters\r\n    \r\n     }\r\n     \r\n     public enum FileType {\r\n         CSV, XLS, XLSX, TXT, KSQL;\r\n     }\r\n   \r\n     public enum TransferDirection {\r\n    \tTO_KUBE, FROM_KUBE;\r\n     }\r\n\r\n\r\n\r\n*FileStructure* class : \r\n\r\n    @JsonInclude(Include.NON_NULL)\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public class FileStructure {\r\n    \r\n    \tprivate FileType type;\r\n    \tprivate String path;\r\n    \tprivate String name;\r\n    \tprivate Boolean compress = false;\r\n    \t\r\n    \tpublic FileStructure() {}\r\n    \t\r\n    \tpublic FileStructure(FileType type, String path, String name) {\r\n    \t\tthis.type = type;\r\n    \t\tthis.path = path;\r\n    \t\tthis.name = name;\r\n    \t}\r\n        // getters and setters\r\n    }\r\n\r\nThe *ObjectMapper* readValue() call , which is the source of the exception :\r\n\r\n\r\n    protected &lt;C&gt; C parseJson(String content, Class&lt;C&gt; clazz) throws MB3BfException {\r\n    \t\ttry {\r\n    \t\t\tObjectMapper jsonMapper = new ObjectMapper();\r\n    \t\t\treturn jsonMapper.readValue(content, clazz);\r\n    \t\t}catch(IOException e) {\r\n    \t\t\tthrow new MB3BfException(&quot;Cannot decode action content&quot;, e);\r\n    \t\t}\r\n    \t}\r\n\r\n\r\n\r\nHere the detailed exception : \r\n\r\n\r\n    com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field &quot;deleteFile&quot; (class eu.unicredit.mb3.kube.business.executor.pojo.FileTransferStructureExecution), not marked as ignorable (12 known properties: &quot;port&quot;, &quot;path&quot;, &quot;deleteSource&quot;, &quot;credential&quot;, &quot;host&quot;, &quot;type&quot;, &quot;name&quot;, &quot;flagJes&quot;, &quot;direction&quot;, &quot;inputName&quot;, &quot;fileStructure&quot;, &quot;fixedLength&quot;])\r\n     at [Source: {\r\n        &quot;host&quot; : &quot;xxx.xxx.xxxx&quot;,\r\n        &quot;port&quot; : 22,\r\n        &quot;credential&quot; : &quot;yyyyy&quot;,\r\n        &quot;path&quot; : &quot;/xx/yy/zz/&quot;,\r\n        &quot;name&quot; : &quot;readme.txt&quot;,\r\n        &quot;type&quot;: &quot;TXT&quot;,\r\n        &quot;direction&quot; : &quot;TO_KUBE&quot;,\r\n        &quot;deleteFile&quot;: true\r\n    }; line: 9, column: 23] (through reference chain: eu.unicredit.mb3.kube.business.executor.pojo.FileTransferStructureExecution[&quot;deleteFile&quot;])\r\n\r\n\r\n\r\n\r\n\r\n\r\nI want to have the property &quot;`deleteFile`&quot; recognized for deserialization.\r\nWhat could be the problem ? thank you !\r\n","title":"Jackson deserialization : Unrecognized field","body":"<p>I'm trying to deserialize a JSON but I still get the same <em><strong>UnrecognizedPropertyException</strong></em> even though the Object has all the properties needed for the process of deserialization, at least I think!</p>\n<p>The property not recognized is &quot;deleteFile&quot; .</p>\n<p>Here the JSON:</p>\n<pre><code>{\n    &quot;host&quot; : &quot;xxx.xxx.xxxx&quot;,\n    &quot;port&quot; : 22,\n    &quot;credential&quot; : &quot;yyyyy&quot;,,\n    &quot;path&quot; : &quot;/xx/yy/zz/&quot;,\n    &quot;name&quot; : &quot;readme.txt&quot;,\n    &quot;type&quot;: &quot;TXT&quot;,\n    &quot;direction&quot; : &quot;TO_KUBE&quot;,\n    &quot;deleteFile&quot;: true\n}\n</code></pre>\n<p>Here the POJO classes:</p>\n<pre><code>public class FileTransferStructureExecution&lt;F extends FileStructure&gt; extends FileTransferStructure&lt;F&gt; {\n\n\n    private Integer fixedLength;\n    private Boolean flagJes = false;\n\n    public FileTransferStructureExecution() {}\n    \n    public FileTransferStructureExecution(F fileStructure) {\n        super(fileStructure);\n    }\n    \n    public FileTransferStructureExecution(TransferDirection direction, String path, String name, FileType type) {\n        super(direction, path, name, type);\n    }\n    \n    public FileTransferStructureExecution(TransferDirection direction, String path, String name, FileType type, String credential) {\n        super(direction, path, name, type, credential);\n    }\n    // getters and setters\n}\n\npublic class FileTransferStructure&lt;F extends FileStructure&gt; {\n\n    private TransferDirection direction;\n    private String path;\n    private String name;\n    private String inputName;\n    private FileType type;\n    private String host;\n    private String port;\n    private String credential;\n    private Boolean deleteSource = false;\n    private Boolean deleteFile = false;\n    private F fileStructure;\n    \n    public FileTransferStructure() {}\n    \n    public FileTransferStructure(F fileStructure) {\n        this.path = fileStructure.getPath();\n        this.name = fileStructure.getName();\n        this.type = fileStructure.getType();\n        this.fileStructure = fileStructure;\n    }\n    \n    public FileTransferStructure(TransferDirection direction, String path, String name, FileType type) {\n        this.direction = direction;\n        this.path = path;\n        this.name = name;\n        this.type = type;\n    }\n    \n    public FileTransferStructure(TransferDirection direction, String path, String name, FileType type, String credential) {\n        this.direction = direction;\n        this.path = path;\n        this.name = name;\n        this.type = type;\n        this.credential = credential;\n    }\n    // getters and setters\n\n }\n \n public enum FileType {\n     CSV, XLS, XLSX, TXT, KSQL;\n }\n\n public enum TransferDirection {\n    TO_KUBE, FROM_KUBE;\n }\n</code></pre>\n<p><em>FileStructure</em> class :</p>\n<pre><code>@JsonInclude(Include.NON_NULL)\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class FileStructure {\n\n    private FileType type;\n    private String path;\n    private String name;\n    private Boolean compress = false;\n    \n    public FileStructure() {}\n    \n    public FileStructure(FileType type, String path, String name) {\n        this.type = type;\n        this.path = path;\n        this.name = name;\n    }\n    // getters and setters\n}\n</code></pre>\n<p>The <em>ObjectMapper</em> readValue() call , which is the source of the exception :</p>\n<pre><code>protected &lt;C&gt; C parseJson(String content, Class&lt;C&gt; clazz) throws MB3BfException {\n        try {\n            ObjectMapper jsonMapper = new ObjectMapper();\n            return jsonMapper.readValue(content, clazz);\n        }catch(IOException e) {\n            throw new MB3BfException(&quot;Cannot decode action content&quot;, e);\n        }\n    }\n</code></pre>\n<p>Here the detailed exception :</p>\n<pre><code>com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field &quot;deleteFile&quot; (class eu.unicredit.mb3.kube.business.executor.pojo.FileTransferStructureExecution), not marked as ignorable (12 known properties: &quot;port&quot;, &quot;path&quot;, &quot;deleteSource&quot;, &quot;credential&quot;, &quot;host&quot;, &quot;type&quot;, &quot;name&quot;, &quot;flagJes&quot;, &quot;direction&quot;, &quot;inputName&quot;, &quot;fileStructure&quot;, &quot;fixedLength&quot;])\n at [Source: {\n    &quot;host&quot; : &quot;xxx.xxx.xxxx&quot;,\n    &quot;port&quot; : 22,\n    &quot;credential&quot; : &quot;yyyyy&quot;,\n    &quot;path&quot; : &quot;/xx/yy/zz/&quot;,\n    &quot;name&quot; : &quot;readme.txt&quot;,\n    &quot;type&quot;: &quot;TXT&quot;,\n    &quot;direction&quot; : &quot;TO_KUBE&quot;,\n    &quot;deleteFile&quot;: true\n}; line: 9, column: 23] (through reference chain: eu.unicredit.mb3.kube.business.executor.pojo.FileTransferStructureExecution[&quot;deleteFile&quot;])\n</code></pre>\n<p>I want to have the property &quot;<code>deleteFile</code>&quot; recognized for deserialization.\nWhat could be the problem ? thank you !</p>\n"},{"tags":["java","quarkus","mutiny","quarkus-reactive"],"answers":[{"tags":[],"owner":{"account_id":427958,"reputation":548,"user_id":809984,"display_name":"jponge"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1667898670,"creation_date":1667898670,"answer_id":74358189,"question_id":74354317,"body_markdown":"What you have here is a thread safety problem that&#39;s relatively classic. You might consider an `AtomicReference` to hold the `token` field.\r\n\r\nThat being said `Uni` has a [`memoize()`](https://javadoc.io/static/io.smallrye.reactive/mutiny/1.7.0/io/smallrye/mutiny/groups/UniMemoize.html) operator that might just do what you want. You should be able to do something like:\r\n\r\n```java\r\nreturn doGetToken().memoize().until(() -&gt; someExpirationLogic());\r\n```","title":"Token caching with Mutiny","body":"<p>What you have here is a thread safety problem that's relatively classic. You might consider an <code>AtomicReference</code> to hold the <code>token</code> field.</p>\n<p>That being said <code>Uni</code> has a <a href=\"https://javadoc.io/static/io.smallrye.reactive/mutiny/1.7.0/io/smallrye/mutiny/groups/UniMemoize.html\" rel=\"nofollow noreferrer\"><code>memoize()</code></a> operator that might just do what you want. You should be able to do something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>return doGetToken().memoize().until(() -&gt; someExpirationLogic());\n</code></pre>\n"}],"owner":{"account_id":206701,"reputation":1433,"user_id":456143,"accept_rate":78,"display_name":"Evgeny"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1667898717,"creation_date":1667865587,"question_id":74354317,"body_markdown":"I&#39;m new in reactive programming and trying to wrap my head around base concepts.\r\nBasically, I want to implement a logic, that would return auth token if it&#39;s still valid or requests the new one otherwise.\r\nMy best take is the code like below:\r\n\r\n```java\r\npublic class AsyncTokenSupplier implements Supplier&lt;Uni&lt;Token&gt;&gt; {\r\n   private Token cachedToken;\r\n\r\n   @Override\r\n   public Uni&lt;Token&gt; get() {\r\n        if (isTokenValid(cachedToken)) {\r\n            return Uni.createFrom().item(cachedToken);\r\n        } else {\r\n            return doGetToken().onItem().invoke(token -&gt; {\r\n                cachedToken = token;\r\n            });\r\n        }\r\n    }\r\n\r\n   private Uni&lt;Token&gt; doGetToken() {\r\n      //Api call here\r\n   }\r\n\r\n   private boolean isTokenValid(Token token) {\r\n      if (token == null) {\r\n         return false;\r\n      }\r\n      //Expiration check here\r\n   }\r\n}\r\n```\r\nThe problem with this code is that it doesn&#39;t look like a thread safe - if a few threads execute &quot;get()&quot; method in parallel, it could end up in a few new tokens requested at the same time.\r\nI&#39;d appreciate any guidance and recommendations. \r\n","title":"Token caching with Mutiny","body":"<p>I'm new in reactive programming and trying to wrap my head around base concepts.\nBasically, I want to implement a logic, that would return auth token if it's still valid or requests the new one otherwise.\nMy best take is the code like below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class AsyncTokenSupplier implements Supplier&lt;Uni&lt;Token&gt;&gt; {\n   private Token cachedToken;\n\n   @Override\n   public Uni&lt;Token&gt; get() {\n        if (isTokenValid(cachedToken)) {\n            return Uni.createFrom().item(cachedToken);\n        } else {\n            return doGetToken().onItem().invoke(token -&gt; {\n                cachedToken = token;\n            });\n        }\n    }\n\n   private Uni&lt;Token&gt; doGetToken() {\n      //Api call here\n   }\n\n   private boolean isTokenValid(Token token) {\n      if (token == null) {\n         return false;\n      }\n      //Expiration check here\n   }\n}\n</code></pre>\n<p>The problem with this code is that it doesn't look like a thread safe - if a few threads execute &quot;get()&quot; method in parallel, it could end up in a few new tokens requested at the same time.\nI'd appreciate any guidance and recommendations.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":6278449,"reputation":2408,"user_id":4880379,"display_name":"kasptom"},"score":1,"creation_date":1667772248,"post_id":74338959,"comment_id":131241176,"body_markdown":"Hi, could you provide more details? Does `MyInterface` definition compile?\nI can&#39;t see the `ID` corresponding to the one from `Repository&lt;T, ID&gt;`.\nWhat are the imports used in this class? Please provide a [Minimal Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example)","body":"Hi, could you provide more details? Does <code>MyInterface</code> definition compile? I can&#39;t see the <code>ID</code> corresponding to the one from <code>Repository&lt;T, ID&gt;</code>. What are the imports used in this class? Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal Reproducible Example</a>"},{"owner":{"account_id":9838723,"reputation":197,"user_id":7288288,"accept_rate":0,"display_name":"Jayamal Jayamaha  "},"score":0,"creation_date":1667812980,"post_id":74338959,"comment_id":131248395,"body_markdown":"How do you autowire the RepositoryImpl instance? is it by RepositoryImpl or by the interface (MyInterface) ?","body":"How do you autowire the RepositoryImpl instance? is it by RepositoryImpl or by the interface (MyInterface) ?"},{"owner":{"account_id":9031204,"reputation":23,"user_id":6728731,"display_name":"SUBHASHC37"},"score":0,"creation_date":1667893071,"post_id":74338959,"comment_id":131269748,"body_markdown":"@kasptom I am trying to create a simple reproducible, but till now no luck. I will update you as soon as I have a reproducible","body":"@kasptom I am trying to create a simple reproducible, but till now no luck. I will update you as soon as I have a reproducible"},{"owner":{"account_id":9031204,"reputation":23,"user_id":6728731,"display_name":"SUBHASHC37"},"score":0,"creation_date":1667893164,"post_id":74338959,"comment_id":131269778,"body_markdown":"@JayamalJayamaha  it is by MyInterface","body":"@JayamalJayamaha  it is by MyInterface"}],"answers":[{"tags":[],"owner":{"account_id":9838723,"reputation":197,"user_id":7288288,"accept_rate":0,"display_name":"Jayamal Jayamaha  "},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667898396,"creation_date":1667898396,"answer_id":74358139,"question_id":74338959,"body_markdown":"hence you are autowiring by the interface, you need to add @Qulifire annotation top of @Autowire annotation or you need to autorwire by actually implemented class. please refer this to use @Qualifire annotation\r\n\r\nhttps://www.baeldung.com/spring-qualifier-annotation","title":"spring - java interface default method overriden is avoided","body":"<p>hence you are autowiring by the interface, you need to add @Qulifire annotation top of @Autowire annotation or you need to autorwire by actually implemented class. please refer this to use @Qualifire annotation</p>\n<p><a href=\"https://www.baeldung.com/spring-qualifier-annotation\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-qualifier-annotation</a></p>\n"}],"owner":{"account_id":9031204,"reputation":23,"user_id":6728731,"display_name":"SUBHASHC37"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1667898396,"creation_date":1667761966,"question_id":74338959,"body_markdown":"I have below the interface\r\n```\r\npublic interface MyInterface&lt;T, H extends Serializable, R extends Serializable&gt; extends Repository&lt;T, ID&gt; {\r\n  default List&lt;T&gt; findAll(H key) {\r\n    return Collections.EMPTY_LIST;\r\n  }\r\n}\r\n```\r\n\r\nThe implementation is below,\r\n```\r\npublic class RepositoryImpl&lt;T, H extends Serializable, R extends Serializable&gt;\r\n    extends ACConcreateClassWhichImplementRepository&lt;T, H&gt; implements MyInterface&lt;T, H, R&gt; {\r\n  @Override\r\n  public List&lt;T&gt; findAll(H key) {\r\n    return findSome(hashKey); //some method\r\n  }\r\n}\r\n\r\n```\r\n\r\nUpon calling this through the controller, the call is hitting the default method defined in MyInterface, instead of hitting the implementation in RepositoryImpl.\r\n\r\n```\r\njava.lang.Thread.State: RUNNABLE\r\n\t  at com.MyInterface.findAll(MyInterface.java:12)\r\n\t  at java.lang.invoke.LambdaForm$DMH.1294483354.invokeSpecialIFC(LambdaForm$DMH:-1)\r\n\t  at java.lang.invoke.LambdaForm$MH.995808242.invoke(LambdaForm$MH:-1)\r\n\t  at java.lang.invoke.LambdaForm$MH.1531802663.invoke(LambdaForm$MH:-1)\r\n\t  at java.lang.invoke.Invokers$Holder.invokeExact_MT(Invokers$Holder:-1)\r\n\t  at java.lang.invoke.MethodHandle.invokeWithArguments(MethodHandle.java:710)\r\n\t  at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:86)\r\n\t  \r\n\t  at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\t  at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n\t  at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\t  at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\r\n\t  at com.sun.proxy.$Proxy167.findAll(Unknown Source:-1)\r\n```\r\n\r\n\r\n\r\ninstead of default method if i define an abstract method in interface, then it hit on the implementation.\r\n\r\n```\r\nat com.RepositoryImpl.findAll(RepositoryImpl.java:16)\r\n\t  at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(NativeMethodAccessorImpl.java:-1)\r\n\t  at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\t  at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\t  at java.lang.reflect.Method.invoke(Method.java:566)\r\n\t  at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)\r\n\t  at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker$$Lambda$1357.2068454901.invoke(Unknown Source:-1)\r\n\t  at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)\r\n\t  at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)\r\n\t  at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:529)\r\n\t  at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)\r\n\t  at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:639)\r\n\t  at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\t  at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:163)\r\n\t  at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:138)\r\n\t  \r\n\t  at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\t  at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n\t  at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\t  at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\r\n\t  at com.sun.proxy.$Proxy167.findAll(Unknown Source:-1)\r\n```\r\n\r\nI am using,\r\nspring version 5.3.21\r\nspring-boot version 2.7.0\r\n","title":"spring - java interface default method overriden is avoided","body":"<p>I have below the interface</p>\n<pre><code>public interface MyInterface&lt;T, H extends Serializable, R extends Serializable&gt; extends Repository&lt;T, ID&gt; {\n  default List&lt;T&gt; findAll(H key) {\n    return Collections.EMPTY_LIST;\n  }\n}\n</code></pre>\n<p>The implementation is below,</p>\n<pre><code>public class RepositoryImpl&lt;T, H extends Serializable, R extends Serializable&gt;\n    extends ACConcreateClassWhichImplementRepository&lt;T, H&gt; implements MyInterface&lt;T, H, R&gt; {\n  @Override\n  public List&lt;T&gt; findAll(H key) {\n    return findSome(hashKey); //some method\n  }\n}\n\n</code></pre>\n<p>Upon calling this through the controller, the call is hitting the default method defined in MyInterface, instead of hitting the implementation in RepositoryImpl.</p>\n<pre><code>java.lang.Thread.State: RUNNABLE\n      at com.MyInterface.findAll(MyInterface.java:12)\n      at java.lang.invoke.LambdaForm$DMH.1294483354.invokeSpecialIFC(LambdaForm$DMH:-1)\n      at java.lang.invoke.LambdaForm$MH.995808242.invoke(LambdaForm$MH:-1)\n      at java.lang.invoke.LambdaForm$MH.1531802663.invoke(LambdaForm$MH:-1)\n      at java.lang.invoke.Invokers$Holder.invokeExact_MT(Invokers$Holder:-1)\n      at java.lang.invoke.MethodHandle.invokeWithArguments(MethodHandle.java:710)\n      at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:86)\n      \n      at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n      at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\n      at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n      at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\n      at com.sun.proxy.$Proxy167.findAll(Unknown Source:-1)\n</code></pre>\n<p>instead of default method if i define an abstract method in interface, then it hit on the implementation.</p>\n<pre><code>at com.RepositoryImpl.findAll(RepositoryImpl.java:16)\n      at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(NativeMethodAccessorImpl.java:-1)\n      at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n      at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n      at java.lang.reflect.Method.invoke(Method.java:566)\n      at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)\n      at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker$$Lambda$1357.2068454901.invoke(Unknown Source:-1)\n      at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)\n      at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)\n      at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:529)\n      at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)\n      at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:639)\n      at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n      at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:163)\n      at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:138)\n      \n      at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n      at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\n      at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n      at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\n      at com.sun.proxy.$Proxy167.findAll(Unknown Source:-1)\n</code></pre>\n<p>I am using,\nspring version 5.3.21\nspring-boot version 2.7.0</p>\n"},{"tags":["java","spring-boot","jar","war"],"comments":[{"owner":{"display_name":"user2241537"},"score":1,"creation_date":1493231152,"post_id":43641664,"comment_id":74332007,"body_markdown":"How are you building your war? Are you using Maven? Can you share your pom.xml? Are you using spring-boot-maven-plugin?","body":"How are you building your war? Are you using Maven? Can you share your pom.xml? Are you using spring-boot-maven-plugin?"},{"owner":{"account_id":4999034,"reputation":1880,"user_id":6722075,"display_name":"Tohid Makari"},"score":0,"creation_date":1493232224,"post_id":43641664,"comment_id":74332633,"body_markdown":"I use spring boot maven build plugin..","body":"I use spring boot maven build plugin.."}],"answers":[{"tags":[],"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1493231328,"creation_date":1493231328,"answer_id":43641913,"question_id":43641664,"body_markdown":"I assume that you&#39;re using the spring boot maven build plugin.  This behavior is documented [here][1]: https://docs.spring.io/spring-boot/docs/current/reference/html/build-tool-plugins-maven-plugin.html\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/build-tool-plugins-maven-plugin.html","title":"Why spring boot generates jar or war file with .original extension?","body":"<p>I assume that you're using the spring boot maven build plugin.  This behavior is documented <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/build-tool-plugins-maven-plugin.html\" rel=\"noreferrer\">here</a>: <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/build-tool-plugins-maven-plugin.html\" rel=\"noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/build-tool-plugins-maven-plugin.html</a></p>\n"},{"comments":[{"owner":{"account_id":2511288,"reputation":71,"user_id":2183717,"display_name":"pedrociarlini"},"score":0,"creation_date":1692993395,"post_id":43642289,"comment_id":135706027,"body_markdown":"Nice Answer. In case of need to skip the repackage goal: https://stackoverflow.com/a/60398974/2183717. Works with spring boot 2.7.12","body":"Nice Answer. In case of need to skip the repackage goal: <a href=\"https://stackoverflow.com/a/60398974/2183717\">stackoverflow.com/a/60398974/2183717</a>. Works with spring boot 2.7.12"}],"tags":[],"owner":{"display_name":"user2241537"},"comment_count":1,"down_vote_count":0,"up_vote_count":42,"is_accepted":true,"score":42,"last_activity_date":1493232591,"creation_date":1493232591,"answer_id":43642289,"question_id":43641664,"body_markdown":"The answer is that you are using `repackage` goal in your `spring-boot-maven-plugin`.\r\nSo, What it does?\r\n\r\nMaven first builds your project and packages your classes and resources into a WAR `(${artifactId}.war)` file. \r\n\r\nThen, repackaging happens. In this goal, all the dependencies mentioned in the pom.xml are packaged inside a new WAR `(${artifactId}.war)` and the previously generated war is renamed to `${artifactId}.war.original`.","title":"Why spring boot generates jar or war file with .original extension?","body":"<p>The answer is that you are using <code>repackage</code> goal in your <code>spring-boot-maven-plugin</code>.\nSo, What it does?</p>\n\n<p>Maven first builds your project and packages your classes and resources into a WAR <code>(${artifactId}.war)</code> file. </p>\n\n<p>Then, repackaging happens. In this goal, all the dependencies mentioned in the pom.xml are packaged inside a new WAR <code>(${artifactId}.war)</code> and the previously generated war is renamed to <code>${artifactId}.war.original</code>.</p>\n"}],"owner":{"account_id":4999034,"reputation":1880,"user_id":6722075,"display_name":"Tohid Makari"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24393,"favorite_count":0,"down_vote_count":0,"up_vote_count":40,"accepted_answer_id":43642289,"answer_count":2,"score":40,"last_activity_date":1667897840,"creation_date":1493230510,"question_id":43641664,"body_markdown":"Why after building spring boot app, it generates two jar or war files with `.original` extension? I use spring boot maven build plugin.\r\nFor example: \r\n\r\n1. `application.jar`   \r\n2. `application.jar.original`","title":"Why spring boot generates jar or war file with .original extension?","body":"<p>Why after building spring boot app, it generates two jar or war files with <code>.original</code> extension? I use spring boot maven build plugin.\nFor example:</p>\n<ol>\n<li><code>application.jar</code></li>\n<li><code>application.jar.original</code></li>\n</ol>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":4000458,"reputation":17823,"user_id":3296621,"accept_rate":78,"display_name":"Smutje"},"score":0,"creation_date":1607694194,"post_id":65252375,"comment_id":115359623,"body_markdown":"You might need to add the code that uses `webClientBean`","body":"You might need to add the code that uses <code>webClientBean</code>"},{"owner":{"account_id":10351852,"reputation":216,"user_id":7635045,"display_name":"Pampa Nello"},"score":0,"creation_date":1607694314,"post_id":65252375,"comment_id":115359679,"body_markdown":"If WebClient is the interface provided by Spring, then you should create the bean using return WebClient.create(&quot;http://localhost:8080&quot;); // substitute host and port naturally...","body":"If WebClient is the interface provided by Spring, then you should create the bean using return WebClient.create(&quot;<a href=\"http://localhost:8080&quot;\" rel=\"nofollow noreferrer\">localhost:8080&quot;</a>); // substitute host and port naturally..."}],"answers":[{"comments":[{"owner":{"account_id":938881,"reputation":14223,"user_id":967330,"accept_rate":90,"display_name":"Thom"},"score":0,"creation_date":1607694994,"post_id":65252647,"comment_id":115360054,"body_markdown":"Wow! Thanks for the hard work. I&#39;m humbled.","body":"Wow! Thanks for the hard work. I&#39;m humbled."},{"owner":{"account_id":938881,"reputation":14223,"user_id":967330,"accept_rate":90,"display_name":"Thom"},"score":0,"creation_date":1607696010,"post_id":65252647,"comment_id":115360550,"body_markdown":"Unfortunately, that&#39;s what I&#39;m doing and it&#39;s not working.","body":"Unfortunately, that&#39;s what I&#39;m doing and it&#39;s not working."}],"tags":[],"owner":{"account_id":4000458,"reputation":17823,"user_id":3296621,"accept_rate":78,"display_name":"Smutje"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1607694841,"creation_date":1607694841,"answer_id":65252647,"question_id":65252375,"body_markdown":"Please consider the following working minimal example that will print out &quot;Hello, StackOverflow&quot; on start-up using a `@Configuration` producing an object of a class with no-arg constructor.\r\n\r\nApplication.java\r\n=\r\n\r\n```\r\npackage org.example;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class Application {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(Application.class, args);\r\n    }\r\n}\r\n```\r\n\r\nApplicationConfiguration.java\r\n=\r\n\r\n```\r\npackage org.example;\r\n\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@Configuration\r\npublic class ApplicationConfiguration {\r\n\r\n    @Bean\r\n    public Greeter greeter() {\r\n        return new Greeter(&quot;StackOverflow&quot;);\r\n    }\r\n}\r\n\r\n```\r\n\r\nAppStartupRunner.java\r\n=\r\n\r\n```\r\npackage org.example;\r\n\r\nimport org.springframework.boot.ApplicationArguments;\r\nimport org.springframework.boot.ApplicationRunner;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\npublic class AppStartupRunner implements ApplicationRunner {\r\n\r\n    private final Greeter greeter;\r\n\r\n    public AppStartupRunner(Greeter greeter) {\r\n        this.greeter = greeter;\r\n    }\r\n\r\n    @Override\r\n    public void run(ApplicationArguments args) {\r\n        this.greeter.greet();\r\n    }\r\n}\r\n```\r\n\r\nGreeter.java\r\n=\r\n\r\n```\r\npackage org.example;\r\n\r\npublic class Greeter {\r\n\r\n    private final String name;\r\n\r\n    public Greeter(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public void greet() {\r\n        System.out.println(&quot;Hello, &quot; + this.name);\r\n    }\r\n}\r\n```","title":"Spring Boot java configuration not working","body":"<p>Please consider the following working minimal example that will print out &quot;Hello, StackOverflow&quot; on start-up using a <code>@Configuration</code> producing an object of a class with no-arg constructor.</p>\n<h1>Application.java</h1>\n<pre><code>package org.example;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n</code></pre>\n<h1>ApplicationConfiguration.java</h1>\n<pre><code>package org.example;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class ApplicationConfiguration {\n\n    @Bean\n    public Greeter greeter() {\n        return new Greeter(&quot;StackOverflow&quot;);\n    }\n}\n\n</code></pre>\n<h1>AppStartupRunner.java</h1>\n<pre><code>package org.example;\n\nimport org.springframework.boot.ApplicationArguments;\nimport org.springframework.boot.ApplicationRunner;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class AppStartupRunner implements ApplicationRunner {\n\n    private final Greeter greeter;\n\n    public AppStartupRunner(Greeter greeter) {\n        this.greeter = greeter;\n    }\n\n    @Override\n    public void run(ApplicationArguments args) {\n        this.greeter.greet();\n    }\n}\n</code></pre>\n<h1>Greeter.java</h1>\n<pre><code>package org.example;\n\npublic class Greeter {\n\n    private final String name;\n\n    public Greeter(String name) {\n        this.name = name;\n    }\n\n    public void greet() {\n        System.out.println(&quot;Hello, &quot; + this.name);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8023840,"reputation":499,"user_id":6051625,"display_name":"Theo"},"score":0,"creation_date":1642647319,"post_id":65252951,"comment_id":125128902,"body_markdown":"Mine was an Intellij problem too.  I had to close the project, restart Intellij, and then re-open the project","body":"Mine was an Intellij problem too.  I had to close the project, restart Intellij, and then re-open the project"}],"tags":[],"owner":{"account_id":938881,"reputation":14223,"user_id":967330,"accept_rate":90,"display_name":"Thom"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1607696101,"creation_date":1607696101,"answer_id":65252951,"question_id":65252375,"body_markdown":"I was running inside the intelliJ idea environment when I found this issue. After trying many things, I tried turning debug on in the run configuration and there was nothing helpful in the messages generated.\r\n\r\nWhen I turned the setting back off and re-ran the app it started working perfectly on its own.\r\n\r\nPlease post a comment if this helps someone else. I&#39;m curious if this was it.","title":"Spring Boot java configuration not working","body":"<p>I was running inside the intelliJ idea environment when I found this issue. After trying many things, I tried turning debug on in the run configuration and there was nothing helpful in the messages generated.</p>\n<p>When I turned the setting back off and re-ran the app it started working perfectly on its own.</p>\n<p>Please post a comment if this helps someone else. I'm curious if this was it.</p>\n"},{"tags":[],"owner":{"account_id":4642939,"reputation":171,"user_id":3762209,"display_name":"fengma"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667897555,"creation_date":1667897555,"answer_id":74357964,"question_id":65252375,"body_markdown":"Check whether the `webClientBean` bean already exists. \r\n\r\nMy case fails because my bean is repeated and the previous bean is initialized first.","title":"Spring Boot java configuration not working","body":"<p>Check whether the <code>webClientBean</code> bean already exists.</p>\n<p>My case fails because my bean is repeated and the previous bean is initialized first.</p>\n"}],"owner":{"account_id":938881,"reputation":14223,"user_id":967330,"accept_rate":90,"display_name":"Thom"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6337,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1667897555,"creation_date":1607693822,"question_id":65252375,"body_markdown":"I&#39;m not sure what&#39;s going on here. I&#39;ve been building spring apps for years and years and feel like I&#39;ve just missed something.\r\n\r\nI have a spring boot app created through the spring initializer. I created a configuration class like this.\r\n\r\n    @Configuration\r\n    public class WfwwebConfiguration {\r\n    \r\n    \r\n        @Bean\r\n        public WebClient webClientBean() {\r\n            return new WebClient(MpesaPaymentService.MPESA_HOST, MpesaPaymentService.MPESA_PORT);\r\n        }\r\n    }\r\n\r\n\r\nThe goal, of course, here is to create my WebClient class myself. The problem is that spring kept running the no-argument constructor on it, which was trying to go to localhost.\r\n\r\nSo I deleted that constructor and now my spring boot app won&#39;t start because WebClient doesn&#39;t have a no-arg constructor.\r\n\r\nSo what did I miss? I have\r\n\r\n    @SpringBootApplication\r\n    public class WfwwebApplication {\r\n        public static void main(String[] args) {\r\n            SpringApplication.run(WfwwebApplication.class, args);\r\n        }\r\n    }\r\n\r\nWhich is supposed to turn on auto configuration and all the research I&#39;ve done says it will now pick up the configuration class automatically.\r\n\r\nI double checked my @Configuration to make sure it wasn&#39;t loading it from another library. ;)\r\n\r\nIdeas?","title":"Spring Boot java configuration not working","body":"<p>I'm not sure what's going on here. I've been building spring apps for years and years and feel like I've just missed something.</p>\n<p>I have a spring boot app created through the spring initializer. I created a configuration class like this.</p>\n<pre><code>@Configuration\npublic class WfwwebConfiguration {\n\n\n    @Bean\n    public WebClient webClientBean() {\n        return new WebClient(MpesaPaymentService.MPESA_HOST, MpesaPaymentService.MPESA_PORT);\n    }\n}\n</code></pre>\n<p>The goal, of course, here is to create my WebClient class myself. The problem is that spring kept running the no-argument constructor on it, which was trying to go to localhost.</p>\n<p>So I deleted that constructor and now my spring boot app won't start because WebClient doesn't have a no-arg constructor.</p>\n<p>So what did I miss? I have</p>\n<pre><code>@SpringBootApplication\npublic class WfwwebApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(WfwwebApplication.class, args);\n    }\n}\n</code></pre>\n<p>Which is supposed to turn on auto configuration and all the research I've done says it will now pick up the configuration class automatically.</p>\n<p>I double checked my @Configuration to make sure it wasn't loading it from another library. ;)</p>\n<p>Ideas?</p>\n"},{"tags":["java","project"],"comments":[{"owner":{"account_id":8648244,"reputation":367,"user_id":6474819,"accept_rate":89,"display_name":"M. Rogers"},"score":0,"creation_date":1667855611,"post_id":74353004,"comment_id":131263339,"body_markdown":"Can you post your code?","body":"Can you post your code?"}],"answers":[{"comments":[{"owner":{"account_id":26860337,"reputation":1,"user_id":20443949,"display_name":"mert sezgin"},"score":0,"creation_date":1667857784,"post_id":74353062,"comment_id":131263851,"body_markdown":"What is the default parameter?  I did not fully understand.  i am new to this topic","body":"What is the default parameter?  I did not fully understand.  i am new to this topic"},{"owner":{"account_id":8648244,"reputation":367,"user_id":6474819,"accept_rate":89,"display_name":"M. Rogers"},"score":0,"creation_date":1667915621,"post_id":74353062,"comment_id":131277998,"body_markdown":"int max=0,min=0,b=0; is where your setting default max and mins. So think about it, &quot;min&quot; variable starts equaling 0, so if your number set contains no numbers less than 0, you won&#39;t properly track the minimum. You should start your min with a very high number, or better yet &quot;Integer.MAX_VALUE&quot;, to ensure no matter what, your first comparison will store the first value as a minimum. Use the same logic for the maximum","body":"int max=0,min=0,b=0; is where your setting default max and mins. So think about it, &quot;min&quot; variable starts equaling 0, so if your number set contains no numbers less than 0, you won&#39;t properly track the minimum. You should start your min with a very high number, or better yet &quot;Integer.MAX_VALUE&quot;, to ensure no matter what, your first comparison will store the first value as a minimum. Use the same logic for the maximum"},{"owner":{"account_id":26860337,"reputation":1,"user_id":20443949,"display_name":"mert sezgin"},"score":0,"creation_date":1668489085,"post_id":74353062,"comment_id":131411176,"body_markdown":"i still couldn&#39;t run the program.","body":"i still couldn&#39;t run the program."}],"tags":[],"owner":{"account_id":8648244,"reputation":367,"user_id":6474819,"accept_rate":89,"display_name":"M. Rogers"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1667855989,"creation_date":1667855989,"answer_id":74353062,"question_id":74353004,"body_markdown":"    b=input.nextInt();\r\n    max=b;\r\n    min=b;\r\n\r\nLook here, you&#39;re assigning b to the next int, then setting max and min to whatever b was. \r\n\r\nChange to \r\n\r\n    b=input.nextInt();\r\n    if(b &gt; max)\r\n            max=b;\r\n    if(b &lt; min)\r\n            min=b;\r\n\r\nAnd remove the ifs after the loop. Also, think about default parameters for Max and Min","title":"To Find the Largest (MAX) and Smallest (MIN) Number Typed by the User in Java","body":"<pre><code>b=input.nextInt();\nmax=b;\nmin=b;\n</code></pre>\n<p>Look here, you're assigning b to the next int, then setting max and min to whatever b was.</p>\n<p>Change to</p>\n<pre><code>b=input.nextInt();\nif(b &gt; max)\n        max=b;\nif(b &lt; min)\n        min=b;\n</code></pre>\n<p>And remove the ifs after the loop. Also, think about default parameters for Max and Min</p>\n"},{"comments":[{"owner":{"account_id":26860337,"reputation":1,"user_id":20443949,"display_name":"mert sezgin"},"score":0,"creation_date":1667857956,"post_id":74353083,"comment_id":131263900,"body_markdown":"why we said &#39;Integer.MIN_VALUE&#39; and &#39;Integer MAX_VALUE&#39;.  values are zero or one ?","body":"why we said &#39;Integer.MIN_VALUE&#39; and &#39;Integer MAX_VALUE&#39;.  values are zero or one ?"},{"owner":{"account_id":5083689,"reputation":1006,"user_id":4079056,"display_name":"sanurah"},"score":0,"creation_date":1667859848,"post_id":74353083,"comment_id":131264338,"body_markdown":"I used min and max int values initially so the input will be between those. But you can also start with the first input as default value like M.Rogers has mentioned in his answer. Check updated code above. Run in debug mode and see how it works.","body":"I used min and max int values initially so the input will be between those. But you can also start with the first input as default value like M.Rogers has mentioned in his answer. Check updated code above. Run in debug mode and see how it works."},{"owner":{"account_id":26860337,"reputation":1,"user_id":20443949,"display_name":"mert sezgin"},"score":0,"creation_date":1667884638,"post_id":74353083,"comment_id":131268033,"body_markdown":"`enter how many numbers:  3\n1.enter number:  10\n2.enter number:  5\nmax:10\nmin:0`      this is how the screen output works. After a long struggle, my situation is still the same.","body":"<code>enter how many numbers:  3 1.enter number:  10 2.enter number:  5 max:10 min:0</code>      this is how the screen output works. After a long struggle, my situation is still the same."},{"owner":{"account_id":5083689,"reputation":1006,"user_id":4079056,"display_name":"sanurah"},"score":0,"creation_date":1667892784,"post_id":74353083,"comment_id":131269670,"body_markdown":"@mertsezgin I have updated the loop condition.check now","body":"@mertsezgin I have updated the loop condition.check now"},{"owner":{"account_id":26860337,"reputation":1,"user_id":20443949,"display_name":"mert sezgin"},"score":0,"creation_date":1667933604,"post_id":74353083,"comment_id":131285051,"body_markdown":"Thank you for your comments, but I still can&#39;t write the minimum value","body":"Thank you for your comments, but I still can&#39;t write the minimum value"},{"owner":{"account_id":5083689,"reputation":1006,"user_id":4079056,"display_name":"sanurah"},"score":0,"creation_date":1668028072,"post_id":74353083,"comment_id":131311242,"body_markdown":"@mertsezgin sorry, I don&#39;t understand. you copied the code from my answer and it doesn&#39;t work? take the code from end of my answer and run it.","body":"@mertsezgin sorry, I don&#39;t understand. you copied the code from my answer and it doesn&#39;t work? take the code from end of my answer and run it."},{"owner":{"account_id":26860337,"reputation":1,"user_id":20443949,"display_name":"mert sezgin"},"score":0,"creation_date":1668488896,"post_id":74353083,"comment_id":131411137,"body_markdown":"Sorry, I&#39;m making a mistake. The program doesn&#39;t work.","body":"Sorry, I&#39;m making a mistake. The program doesn&#39;t work."}],"tags":[],"owner":{"account_id":5083689,"reputation":1006,"user_id":4079056,"display_name":"sanurah"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667892764,"creation_date":1667856118,"answer_id":74353083,"question_id":74353004,"body_markdown":"     public static void main(String[] args) {\r\n        \r\n        Scanner input=new Scanner(System.in);   \r\n        \r\n        System.out.print(&quot;ka&#231; say gireceksiniz:  &quot;);\r\n        int a=input.nextInt();\r\n        int max=0,min=0,b=0;\r\n        \r\n        for(int i=1;i&lt;=a;i++) {\r\n            System.out.print( i +&quot;.sayy giriniz:  &quot;);\r\n            b=input.nextInt();\r\n            max=b;\r\n            min=b;\r\n        }if(b &gt;max) {\r\n            max=b;\r\n        }else if(b&lt;min) {\r\n            min=b;\r\n        }else {\r\n            System.out.print( &quot;saylar eit.&quot;);\r\n        }\r\n        System.out.print(max);\r\n        System.out.print(min);\r\n    }\r\n\r\n\r\n 1. The if else condition is outside the for loop. Move it inside the loop.\r\n 2. The if else condition logic is wrong. It should be two if conditions.\r\n  E.g.: Let&#39;s say a=3, numbers = {10, 11, 12}. The input will always satisfy b &gt; max and never go in b &lt; min. output {max:12, min: 0}\r\n 3. The starting default number 0 is wrong.\r\n E.g.: a=3, numbers = {-1, -2, -6}, output: {max: 0, min: -6}\r\n\r\n\r\nRemove if else condition and start with a proper default number.\r\n\r\nCheck below\r\n\r\n    public static void main(String[] args) {\r\n    \r\n            Scanner input=new Scanner(System.in);\r\n    \r\n            System.out.print(&quot;ka&#231; say gireceksiniz:  &quot;);\r\n            int a=input.nextInt();\r\n    \r\n            System.out.print( &quot;1.sayy giriniz:  &quot;);\r\n            int b = input.nextInt();\r\n            //this is the 1st input, start with it as both max and min\r\n            int max=b, min=b;\r\n    \r\n            //since we already took 1 input we run loop for a-1 times\r\n            for(int i=2; i &lt;= a; i++) {\r\n                System.out.print( i +&quot;.sayy giriniz:  &quot;);\r\n                b = input.nextInt();\r\n    \r\n                if(b &gt; max) {\r\n                    max = b;\r\n                }\r\n                if(b &lt; min) {\r\n                    min = b;\r\n                }\r\n            }\r\n            System.out.println(&quot;max:&quot;+ max);\r\n            System.out.println(&quot;min:&quot;+ min);\r\n        }","title":"To Find the Largest (MAX) and Smallest (MIN) Number Typed by the User in Java","body":"<pre><code> public static void main(String[] args) {\n    \n    Scanner input=new Scanner(System.in);   \n    \n    System.out.print(&quot;ka say gireceksiniz:  &quot;);\n    int a=input.nextInt();\n    int max=0,min=0,b=0;\n    \n    for(int i=1;i&lt;=a;i++) {\n        System.out.print( i +&quot;.sayy giriniz:  &quot;);\n        b=input.nextInt();\n        max=b;\n        min=b;\n    }if(b &gt;max) {\n        max=b;\n    }else if(b&lt;min) {\n        min=b;\n    }else {\n        System.out.print( &quot;saylar eit.&quot;);\n    }\n    System.out.print(max);\n    System.out.print(min);\n}\n</code></pre>\n<ol>\n<li>The if else condition is outside the for loop. Move it inside the loop.</li>\n<li>The if else condition logic is wrong. It should be two if conditions.\nE.g.: Let's say a=3, numbers = {10, 11, 12}. The input will always satisfy b &gt; max and never go in b &lt; min. output {max:12, min: 0}</li>\n<li>The starting default number 0 is wrong.\nE.g.: a=3, numbers = {-1, -2, -6}, output: {max: 0, min: -6}</li>\n</ol>\n<p>Remove if else condition and start with a proper default number.</p>\n<p>Check below</p>\n<pre><code>public static void main(String[] args) {\n\n        Scanner input=new Scanner(System.in);\n\n        System.out.print(&quot;ka say gireceksiniz:  &quot;);\n        int a=input.nextInt();\n\n        System.out.print( &quot;1.sayy giriniz:  &quot;);\n        int b = input.nextInt();\n        //this is the 1st input, start with it as both max and min\n        int max=b, min=b;\n\n        //since we already took 1 input we run loop for a-1 times\n        for(int i=2; i &lt;= a; i++) {\n            System.out.print( i +&quot;.sayy giriniz:  &quot;);\n            b = input.nextInt();\n\n            if(b &gt; max) {\n                max = b;\n            }\n            if(b &lt; min) {\n                min = b;\n            }\n        }\n        System.out.println(&quot;max:&quot;+ max);\n        System.out.println(&quot;min:&quot;+ min);\n    }\n</code></pre>\n"}],"owner":{"account_id":26860337,"reputation":1,"user_id":20443949,"display_name":"mert sezgin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1667869901,"answer_count":2,"score":-2,"last_activity_date":1667896965,"creation_date":1667855568,"question_id":74353004,"body_markdown":"    import java.util.Scanner;\r\n    \r\n    public class GirilenSayilardanMinveMaxDeerleriBulma {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t\r\n    \t\tScanner input=new Scanner(System.in);\t\r\n    \t\t\r\n    \t\tSystem.out.print(&quot;ka&#231; say gireceksiniz:  &quot;);\r\n    \t\tint a=input.nextInt();\r\n    \t\tint max=0,min=0,b=0;\r\n    \t\t\r\n    \t\tfor(int i=1;i&lt;=a;i++) {\r\n    \t\t\tSystem.out.print( i +&quot;.sayy giriniz:  &quot;);\r\n    \t\t\tb=input.nextInt();\r\n    \t\t\tmax=b;\r\n    \t\t\tmin=b;\r\n    \t\t}if(b &gt;max) {\r\n    \t\t\tmax=b;\r\n    \t\t}else if(b&lt;min) {\r\n    \t\t\tmin=b;\r\n    \t\t}else {\r\n    \t\t\tSystem.out.print( &quot;saylar eit.&quot;);\r\n    \t\t}\r\n    \t\tSystem.out.print(max);\r\n    \t\tSystem.out.print(min);\r\n    \t}\r\n    }\r\n\r\nI want to Find the Largest (MAX) and Smallest (MIN) Number Typed by the User in Java, but I&#39;m making a mistake somewhere. i would be glad if you would support.by the way, I just want to use loop.\r\n\r\nI took a number from the user and asked how many times to enter it. after entering the numbers, there is a calculation error and he gets the last number. max and min throw the last number to the value.thank you","title":"To Find the Largest (MAX) and Smallest (MIN) Number Typed by the User in Java","body":"<pre><code>import java.util.Scanner;\n\npublic class GirilenSayilardanMinveMaxDeerleriBulma {\n\n    public static void main(String[] args) {\n        \n        Scanner input=new Scanner(System.in);   \n        \n        System.out.print(&quot;ka say gireceksiniz:  &quot;);\n        int a=input.nextInt();\n        int max=0,min=0,b=0;\n        \n        for(int i=1;i&lt;=a;i++) {\n            System.out.print( i +&quot;.sayy giriniz:  &quot;);\n            b=input.nextInt();\n            max=b;\n            min=b;\n        }if(b &gt;max) {\n            max=b;\n        }else if(b&lt;min) {\n            min=b;\n        }else {\n            System.out.print( &quot;saylar eit.&quot;);\n        }\n        System.out.print(max);\n        System.out.print(min);\n    }\n}\n</code></pre>\n<p>I want to Find the Largest (MAX) and Smallest (MIN) Number Typed by the User in Java, but I'm making a mistake somewhere. i would be glad if you would support.by the way, I just want to use loop.</p>\n<p>I took a number from the user and asked how many times to enter it. after entering the numbers, there is a calculation error and he gets the last number. max and min throw the last number to the value.thank you</p>\n"},{"tags":["java","docker","apache-kafka","docker-compose"],"answers":[{"tags":[],"owner":{"account_id":16933460,"reputation":81,"user_id":12247112,"display_name":"N7Legend"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1667896927,"creation_date":1667896927,"answer_id":74357867,"question_id":74339970,"body_markdown":"I noticed by reading logs that sometimes the bootstrap-server adress change, which is problematic because I have a this line in my producer class:\r\n\r\n    String defaultClusterValue = &quot;172.21.0.4:29092&quot;;\r\n\r\nWhich is now:\r\n\r\n    String defaultClusterValue = &quot;kafka:29092&quot;;\r\n\r\n\r\nto always point to the right address.\r\nIt solve the problem for me","title":"Can&#39;t send messages to kafka topics in docker-compose","body":"<p>I noticed by reading logs that sometimes the bootstrap-server adress change, which is problematic because I have a this line in my producer class:</p>\n<pre><code>String defaultClusterValue = &quot;172.21.0.4:29092&quot;;\n</code></pre>\n<p>Which is now:</p>\n<pre><code>String defaultClusterValue = &quot;kafka:29092&quot;;\n</code></pre>\n<p>to always point to the right address.\nIt solve the problem for me</p>\n"}],"owner":{"account_id":16933460,"reputation":81,"user_id":12247112,"display_name":"N7Legend"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":478,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74357867,"answer_count":1,"score":0,"last_activity_date":1667896927,"creation_date":1667770737,"question_id":74339970,"body_markdown":"I have written a docker-compose.yml file to allow multiple services to be linked and started at once.\r\n\r\nI have a jar that sends messages in JSON format to a kafka topic inside a container, only it happens that sometimes it is impossible to send the data to the topic and I get this error message \r\n\r\n    WARNING: Error sending message with key 1,667,770,078,000\r\n    Topic general-events not present in metadata after 60000 ms.\r\n\r\nHere is my docker-compose file:\r\n\r\n    version: &quot;3&quot;\r\n    \r\n    services:\r\n      zookeeper:\r\n        image: &quot;bitnami/zookeeper:latest&quot;\r\n        container_name: zookeeper\r\n        hostname: zookeeper\r\n        ports:\r\n          - &quot;2181:2181&quot;\r\n        environment:\r\n          - ALLOW_ANONYMOUS_LOGIN=yes\r\n    \r\n      kafka:\r\n        image: confluentinc/cp-kafka:6.1.1\r\n        container_name: kafka\r\n        depends_on:\r\n          - zookeeper\r\n        ports:\r\n          - &#39;9092:9092&#39;\r\n        expose:\r\n          - &#39;29092&#39;\r\n        environment:\r\n          KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181\r\n          KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT\r\n          KAFKA_INTER_BROKER_LISTENER_NAME: PLAINTEXT\r\n          KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://kafka:29092,PLAINTEXT_HOST://localhost:9092\r\n          KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: &#39;1&#39;\r\n          KAFKA_MIN_INSYNC_REPLICAS: &#39;1&#39;\r\n    \r\n    \r\n      init-kafka:\r\n        image: confluentinc/cp-kafka:6.1.1\r\n        container_name: init-kafka\r\n        depends_on:\r\n          - kafka\r\n          - zookeeper\r\n        entrypoint: [ &#39;/bin/sh&#39;, &#39;-c&#39; ]\r\n        command: |\r\n          &quot;\r\n          # blocks until kafka is reachable\r\n          kafka-topics --bootstrap-server kafka:29092 --list\r\n    \r\n          echo -e &#39;Creating kafka topics&#39;\r\n          kafka-topics --bootstrap-server kafka:29092 --create --if-not-exists --topic general-events --replication-factor 1 --partitions 1\r\n    \r\n          echo -e &#39;Successfully created the following topics:&#39;\r\n          kafka-topics --bootstrap-server kafka:29092 --list\r\n    \r\n          kafka-console-consumer --topic general-events --from-beginning --bootstrap-server kafka:29092\r\n          &quot;\r\n        \r\n      influxdb:\r\n        image: influxdb\r\n        container_name: influxdb\r\n        hostname: influxdb\r\n        volumes:\r\n          - influxdb-storage:/var/lib/influxdb2:rw\r\n        env_file:\r\n          - .env\r\n        entrypoint: [&quot;./entrypoint.sh&quot;]\r\n        ports:\r\n          - ${DOCKER_INFLUXDB_INIT_PORT}:8086\r\n    \r\n      telegraf:\r\n        image: telegraf\r\n        depends_on:\r\n          - influxdb\r\n          - kafka\r\n        container_name: telegraf\r\n        links:\r\n          - influxdb\r\n        restart: on-failure\r\n        env_file:\r\n          - .env\r\n        environment: \r\n          - DOCKER_INFLUXDB_INIT_ORG=earthWatch\r\n          - DOCKER_INFLUXDB_INIT_BUCKET=telegraf\r\n          - DOCKER_INFLUXDB_INIT_ADMIN_TOKEN=60b42f6f12a91425b4fc02d1dd4e44eff9231f737171da79a993055c3aa367ab\r\n        volumes:\r\n          - ./telegraf/telegraf.conf:/etc/telegraf/telegraf.conf:rw\r\n    \r\n      java:\r\n        image: openjdk:15\r\n        depends_on:\r\n          - init-kafka\r\n        container_name: data-source\r\n        volumes:\r\n          - ./earthWatch.jar:/usr/src/java \r\n        command: bash -c &quot;java -jar /usr/src/java earthWatch.jar&quot;\r\n    \r\n    volumes:\r\n      influxdb-storage:\r\n\r\n\r\nMy producer class config:\r\n\r\n    public class Producer implements Runnable {\r\n    \r\n        private static final Logger LOGGER = Logger.getLogger(Producer.class.getName());\r\n        private static final String TOPIC_NAME = &quot;general-events&quot;;\r\n        private KafkaProducer&lt;Long, String&gt; kafkaProducer = null;\r\n        private final String KAFKA_CLUSTER_ENV_VAR_NAME = &quot;KAFKA_CLUSTER&quot;;\r\n    \r\n        public Producer() {\r\n            LOGGER.log(Level.INFO, &quot;Kafka Producer running in thread {0}&quot;, Thread.currentThread().getName());\r\n            Properties kafkaProps = new Properties();\r\n    \r\n            String defaultClusterValue = &quot;172.21.0.4:29092&quot;;\r\n            String kafkaCluster = System.getProperty(KAFKA_CLUSTER_ENV_VAR_NAME, defaultClusterValue);\r\n            LOGGER.log(Level.INFO, &quot;Kafka cluster {0}&quot;, kafkaCluster);\r\n    \r\n            kafkaProps.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaCluster);\r\n            kafkaProps.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, &quot;org.apache.kafka.common.serialization.LongSerializer&quot;);\r\n            kafkaProps.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\r\n            kafkaProps.put(ProducerConfig.ACKS_CONFIG, &quot;0&quot;);\r\n    \r\n            this.kafkaProducer = new KafkaProducer&lt;&gt;(kafkaProps);\r\n    \r\n        }\r\n\r\nAnd when I check the logs I know that the topic is successfuly created:\r\n\r\n    [2022-11-06 21:35:13,759] WARN [AdminClient clientId=adminclient-1] Connection to node -1 (kafka/172.21.0.5:29092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\r\n    [2022-11-06 21:35:13,866] WARN [AdminClient clientId=adminclient-1] Connection to node -1 (kafka/172.21.0.5:29092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\r\n    [2022-11-06 21:35:13,969] WARN [AdminClient clientId=adminclient-1] Connection to node -1 (kafka/172.21.0.5:29092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\r\n    [2022-11-06 21:35:14,176] WARN [AdminClient clientId=adminclient-1] Connection to node -1 (kafka/172.21.0.5:29092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\r\n    [2022-11-06 21:35:14,578] WARN [AdminClient clientId=adminclient-1] Connection to node -1 (kafka/172.21.0.5:29092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\r\n    [2022-11-06 21:35:15,383] WARN [AdminClient clientId=adminclient-1] Connection to node -1 (kafka/172.21.0.5:29092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\r\n    [2022-11-06 21:35:16,591] WARN [AdminClient clientId=adminclient-1] Connection to node -1 (kafka/172.21.0.5:29092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\r\n    [2022-11-06 21:35:17,795] WARN [AdminClient clientId=adminclient-1] Connection to node -1 (kafka/172.21.0.5:29092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\r\n    [2022-11-06 21:35:18,900] WARN [AdminClient clientId=adminclient-1] Connection to node -1 (kafka/172.21.0.5:29092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\r\n    \r\n    Creating kafka topics\r\n    Created topic general-events.\r\n    Successfully created the following topics:\r\n    general-events\r\n\r\nBut it consume nothing a the end, any ideas of what&#39;s wrong ?","title":"Can&#39;t send messages to kafka topics in docker-compose","body":"<p>I have written a docker-compose.yml file to allow multiple services to be linked and started at once.</p>\n<p>I have a jar that sends messages in JSON format to a kafka topic inside a container, only it happens that sometimes it is impossible to send the data to the topic and I get this error message</p>\n<pre><code>WARNING: Error sending message with key 1,667,770,078,000\nTopic general-events not present in metadata after 60000 ms.\n</code></pre>\n<p>Here is my docker-compose file:</p>\n<pre><code>version: &quot;3&quot;\n\nservices:\n  zookeeper:\n    image: &quot;bitnami/zookeeper:latest&quot;\n    container_name: zookeeper\n    hostname: zookeeper\n    ports:\n      - &quot;2181:2181&quot;\n    environment:\n      - ALLOW_ANONYMOUS_LOGIN=yes\n\n  kafka:\n    image: confluentinc/cp-kafka:6.1.1\n    container_name: kafka\n    depends_on:\n      - zookeeper\n    ports:\n      - '9092:9092'\n    expose:\n      - '29092'\n    environment:\n      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181\n      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT\n      KAFKA_INTER_BROKER_LISTENER_NAME: PLAINTEXT\n      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://kafka:29092,PLAINTEXT_HOST://localhost:9092\n      KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: '1'\n      KAFKA_MIN_INSYNC_REPLICAS: '1'\n\n\n  init-kafka:\n    image: confluentinc/cp-kafka:6.1.1\n    container_name: init-kafka\n    depends_on:\n      - kafka\n      - zookeeper\n    entrypoint: [ '/bin/sh', '-c' ]\n    command: |\n      &quot;\n      # blocks until kafka is reachable\n      kafka-topics --bootstrap-server kafka:29092 --list\n\n      echo -e 'Creating kafka topics'\n      kafka-topics --bootstrap-server kafka:29092 --create --if-not-exists --topic general-events --replication-factor 1 --partitions 1\n\n      echo -e 'Successfully created the following topics:'\n      kafka-topics --bootstrap-server kafka:29092 --list\n\n      kafka-console-consumer --topic general-events --from-beginning --bootstrap-server kafka:29092\n      &quot;\n    \n  influxdb:\n    image: influxdb\n    container_name: influxdb\n    hostname: influxdb\n    volumes:\n      - influxdb-storage:/var/lib/influxdb2:rw\n    env_file:\n      - .env\n    entrypoint: [&quot;./entrypoint.sh&quot;]\n    ports:\n      - ${DOCKER_INFLUXDB_INIT_PORT}:8086\n\n  telegraf:\n    image: telegraf\n    depends_on:\n      - influxdb\n      - kafka\n    container_name: telegraf\n    links:\n      - influxdb\n    restart: on-failure\n    env_file:\n      - .env\n    environment: \n      - DOCKER_INFLUXDB_INIT_ORG=earthWatch\n      - DOCKER_INFLUXDB_INIT_BUCKET=telegraf\n      - DOCKER_INFLUXDB_INIT_ADMIN_TOKEN=60b42f6f12a91425b4fc02d1dd4e44eff9231f737171da79a993055c3aa367ab\n    volumes:\n      - ./telegraf/telegraf.conf:/etc/telegraf/telegraf.conf:rw\n\n  java:\n    image: openjdk:15\n    depends_on:\n      - init-kafka\n    container_name: data-source\n    volumes:\n      - ./earthWatch.jar:/usr/src/java \n    command: bash -c &quot;java -jar /usr/src/java earthWatch.jar&quot;\n\nvolumes:\n  influxdb-storage:\n</code></pre>\n<p>My producer class config:</p>\n<pre><code>public class Producer implements Runnable {\n\n    private static final Logger LOGGER = Logger.getLogger(Producer.class.getName());\n    private static final String TOPIC_NAME = &quot;general-events&quot;;\n    private KafkaProducer&lt;Long, String&gt; kafkaProducer = null;\n    private final String KAFKA_CLUSTER_ENV_VAR_NAME = &quot;KAFKA_CLUSTER&quot;;\n\n    public Producer() {\n        LOGGER.log(Level.INFO, &quot;Kafka Producer running in thread {0}&quot;, Thread.currentThread().getName());\n        Properties kafkaProps = new Properties();\n\n        String defaultClusterValue = &quot;172.21.0.4:29092&quot;;\n        String kafkaCluster = System.getProperty(KAFKA_CLUSTER_ENV_VAR_NAME, defaultClusterValue);\n        LOGGER.log(Level.INFO, &quot;Kafka cluster {0}&quot;, kafkaCluster);\n\n        kafkaProps.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaCluster);\n        kafkaProps.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, &quot;org.apache.kafka.common.serialization.LongSerializer&quot;);\n        kafkaProps.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\n        kafkaProps.put(ProducerConfig.ACKS_CONFIG, &quot;0&quot;);\n\n        this.kafkaProducer = new KafkaProducer&lt;&gt;(kafkaProps);\n\n    }\n</code></pre>\n<p>And when I check the logs I know that the topic is successfuly created:</p>\n<pre><code>[2022-11-06 21:35:13,759] WARN [AdminClient clientId=adminclient-1] Connection to node -1 (kafka/172.21.0.5:29092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\n[2022-11-06 21:35:13,866] WARN [AdminClient clientId=adminclient-1] Connection to node -1 (kafka/172.21.0.5:29092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\n[2022-11-06 21:35:13,969] WARN [AdminClient clientId=adminclient-1] Connection to node -1 (kafka/172.21.0.5:29092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\n[2022-11-06 21:35:14,176] WARN [AdminClient clientId=adminclient-1] Connection to node -1 (kafka/172.21.0.5:29092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\n[2022-11-06 21:35:14,578] WARN [AdminClient clientId=adminclient-1] Connection to node -1 (kafka/172.21.0.5:29092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\n[2022-11-06 21:35:15,383] WARN [AdminClient clientId=adminclient-1] Connection to node -1 (kafka/172.21.0.5:29092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\n[2022-11-06 21:35:16,591] WARN [AdminClient clientId=adminclient-1] Connection to node -1 (kafka/172.21.0.5:29092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\n[2022-11-06 21:35:17,795] WARN [AdminClient clientId=adminclient-1] Connection to node -1 (kafka/172.21.0.5:29092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\n[2022-11-06 21:35:18,900] WARN [AdminClient clientId=adminclient-1] Connection to node -1 (kafka/172.21.0.5:29092) could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)\n\nCreating kafka topics\nCreated topic general-events.\nSuccessfully created the following topics:\ngeneral-events\n</code></pre>\n<p>But it consume nothing a the end, any ideas of what's wrong ?</p>\n"},{"tags":["java","reflection","java-native-interface","classloader"],"answers":[{"comments":[{"owner":{"account_id":4248264,"reputation":2399,"user_id":3476226,"accept_rate":92,"display_name":"kmecpp"},"score":0,"creation_date":1530985254,"post_id":51225369,"comment_id":89431340,"body_markdown":"I don&#39;t think this is the issue, even if it is the same error. The example I gave is quite different from the situation you&#39;re describing.","body":"I don&#39;t think this is the issue, even if it is the same error. The example I gave is quite different from the situation you&#39;re describing."}],"tags":[],"owner":{"account_id":4867663,"reputation":1326,"user_id":3925319,"display_name":"Joe"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1530983886,"creation_date":1530983886,"answer_id":51225369,"question_id":51224804,"body_markdown":"I had this issue today actually. \r\n\r\nMake sure that you are not loading the same class twice in the systems class loader. \r\n\r\nI.E) I had a reference being made to a.b.class in a front-end thread, and I was attempting to reference a library method with the same path and class name, and thus threw the same error for me. \r\n\r\nI changed the names in the agent references to be different from the front-end references and the error ceased.\r\n\r\nhope this can help","title":"How to avoid NoClassDefFoundError thrown by unused code in Java","body":"<p>I had this issue today actually. </p>\n\n<p>Make sure that you are not loading the same class twice in the systems class loader. </p>\n\n<p>I.E) I had a reference being made to a.b.class in a front-end thread, and I was attempting to reference a library method with the same path and class name, and thus threw the same error for me. </p>\n\n<p>I changed the names in the agent references to be different from the front-end references and the error ceased.</p>\n\n<p>hope this can help</p>\n"},{"tags":[],"owner":{"account_id":10932052,"reputation":12327,"user_id":8034839,"display_name":"shizhen"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1531101856,"creation_date":1531101856,"answer_id":51237449,"question_id":51224804,"body_markdown":"&gt; Deleting DeleteClass and DeleteInterface from the jar produces the\r\n&gt; following error at runtime:\r\n\r\nIf the needed class does not exist at runtime, **for sure**, `java.lang.NoClassDefFoundError` will be thrown. \r\n\r\n&gt; Even if PlatformOne does not exist at runtime, the check beforehand\r\n&gt; means the code does not run and no error will be thrown.\r\n\r\nPlease check if your code digested the error thrown, if yes, your app won&#39;t crash and can execute as normal. E.g. below code snippet will throw the `NoClassDefFoundError` but won&#39;t crash because that you digest the error. \r\n\r\n    public bool isPlatformOne() {\r\n        try  {\r\n            ...\r\n            return true;\r\n        }  catch (ClassNotFoundException e) {\r\n           return false;\r\n        }\r\n    }\r\n\r\nIf your use case is just to check if a particular class exists, then you can use `Class.forName` to check the class&#39;s existence. E.g. \r\n\r\n    // className is the fully qualified class name. \r\n    public boolean hasClass(String className) {\r\n        try  {\r\n            Class.forName(className);\r\n            return true;\r\n        }  catch (ClassNotFoundException e) {\r\n            return false;\r\n        }\r\n    }\r\n\r\nExample for using it in code. \r\n\r\n    if (hasClass(&quot;android.support.v7.app.AppCompatActivity&quot;)) {\r\n        ...\r\n    }\r\n\r\n\r\n\r\n","title":"How to avoid NoClassDefFoundError thrown by unused code in Java","body":"<blockquote>\n  <p>Deleting DeleteClass and DeleteInterface from the jar produces the\n  following error at runtime:</p>\n</blockquote>\n\n<p>If the needed class does not exist at runtime, <strong>for sure</strong>, <code>java.lang.NoClassDefFoundError</code> will be thrown. </p>\n\n<blockquote>\n  <p>Even if PlatformOne does not exist at runtime, the check beforehand\n  means the code does not run and no error will be thrown.</p>\n</blockquote>\n\n<p>Please check if your code digested the error thrown, if yes, your app won't crash and can execute as normal. E.g. below code snippet will throw the <code>NoClassDefFoundError</code> but won't crash because that you digest the error. </p>\n\n<pre><code>public bool isPlatformOne() {\n    try  {\n        ...\n        return true;\n    }  catch (ClassNotFoundException e) {\n       return false;\n    }\n}\n</code></pre>\n\n<p>If your use case is just to check if a particular class exists, then you can use <code>Class.forName</code> to check the class's existence. E.g. </p>\n\n<pre><code>// className is the fully qualified class name. \npublic boolean hasClass(String className) {\n    try  {\n        Class.forName(className);\n        return true;\n    }  catch (ClassNotFoundException e) {\n        return false;\n    }\n}\n</code></pre>\n\n<p>Example for using it in code. </p>\n\n<pre><code>if (hasClass(\"android.support.v7.app.AppCompatActivity\")) {\n    ...\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4248264,"reputation":2399,"user_id":3476226,"accept_rate":92,"display_name":"kmecpp"},"score":0,"creation_date":1532547136,"post_id":51248670,"comment_id":90021395,"body_markdown":"None of those were actually the cause of the issue with the interfaces but this is the most helpful answer so I&#39;m accepting it. I managed to solve the issue by moving the execution code into separate classes.","body":"None of those were actually the cause of the issue with the interfaces but this is the most helpful answer so I&#39;m accepting it. I managed to solve the issue by moving the execution code into separate classes."}],"tags":[],"owner":{"account_id":5513230,"reputation":3625,"user_id":4378853,"accept_rate":100,"display_name":"GotoFinal"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1667896923,"creation_date":1531148811,"answer_id":51248670,"question_id":51224804,"body_markdown":"Java validator might throw `NoClassDefFoundError` before even fully loading your class because of additional validations, like method return types must exist, additionally you are doing that in your Main class that is scanned by JRE on launch as you can see in stack-trace.  \r\nMove code that requires not-existing code to other class and then in place where you want to use it first check if that class exist and then invoke method from that extra class:\r\n\r\n```java\r\nclass MyExtraClass {\r\n    public static void doStuff() {\r\n        DeleteClass c = new DeleteClass();\r\n        c.test(c);\r\n    }\r\n}\r\n\r\npublic boolean checkForClass(String className) {\r\n    try  {\r\n        Class.forName(className);\r\n        return true;\r\n    }  catch (ClassNotFoundException e) {\r\n        return false;\r\n    }\r\n}\r\n\r\n// somewhere in your code\r\nif (checkForClass(&quot;package.DeletedClass&quot;)) {\r\n    MyExtraClass.doStuff();\r\n}\r\n```\r\n\r\nThis is just safest option for such cases, also if this is very short code you can just use some local class: (but it does not look good in most cases)\r\n\r\n```java\r\n// somewhere in your code\r\nif (checkForClass(&quot;package.DeletedClass&quot;)) {\r\n    new Runnable() {\r\n        @Override\r\n        public void run() {\r\n            DeleteClass c = new DeleteClass();\r\n            c.test(c);\r\n        }\r\n    }.run();\r\n}\r\n```","title":"How to avoid NoClassDefFoundError thrown by unused code in Java","body":"<p>Java validator might throw <code>NoClassDefFoundError</code> before even fully loading your class because of additional validations, like method return types must exist, additionally you are doing that in your Main class that is scanned by JRE on launch as you can see in stack-trace.<br />\nMove code that requires not-existing code to other class and then in place where you want to use it first check if that class exist and then invoke method from that extra class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class MyExtraClass {\n    public static void doStuff() {\n        DeleteClass c = new DeleteClass();\n        c.test(c);\n    }\n}\n\npublic boolean checkForClass(String className) {\n    try  {\n        Class.forName(className);\n        return true;\n    }  catch (ClassNotFoundException e) {\n        return false;\n    }\n}\n\n// somewhere in your code\nif (checkForClass(&quot;package.DeletedClass&quot;)) {\n    MyExtraClass.doStuff();\n}\n</code></pre>\n<p>This is just safest option for such cases, also if this is very short code you can just use some local class: (but it does not look good in most cases)</p>\n<pre class=\"lang-java prettyprint-override\"><code>// somewhere in your code\nif (checkForClass(&quot;package.DeletedClass&quot;)) {\n    new Runnable() {\n        @Override\n        public void run() {\n            DeleteClass c = new DeleteClass();\n            c.test(c);\n        }\n    }.run();\n}\n</code></pre>\n"}],"owner":{"account_id":4248264,"reputation":2399,"user_id":3476226,"accept_rate":92,"display_name":"kmecpp"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1265,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":51248670,"answer_count":3,"score":4,"last_activity_date":1667896923,"creation_date":1530979572,"question_id":51224804,"body_markdown":"The project I am working on is an API to support two different platforms. At runtime only one of the two platforms will actually be available on the classpath.\r\n\r\nFor the most part, I have been pretty easily able to write code like this that works fine\r\n\r\n    if (isPlatformOne()) {\r\n        PlatformOne.doSomething();\r\n    }\r\n\r\nEven if `PlatformOne` does not exist at runtime, the check beforehand means the code does not run and no error will be thrown. This technique works for the VAST majority of situations however there is one case that I have run into where an error is thrown.\r\n\r\nIf `PlatformOne` also implements a nonexistent interface AND that is used with a parameter that ALSO does not exist, then a `NoClassDefFoundError` is thrown immediately when the containing class is loaded, regardless of whether the code actually executes or not.\r\n\r\n\r\n**Here&#39;s an example:**\r\n\r\nInterface:\r\n\r\n    public interface DeleteInterface {\r\n    \r\n    \tvoid test(DeleteInterface delete);\r\n    \r\n    }\r\n\r\nClass:\r\n\r\n    public class DeleteClass implements DeleteInterface {\r\n    \r\n    \t@Override\r\n    \tpublic void test(DeleteInterface delete) {\r\n    \t}\r\n    \r\n    }\r\n\r\nMain:\r\n\r\n    public class Test {\r\n    \r\n    \tprivate final boolean test; //Cannot be constant or compiler will erase unreachable code\r\n    \r\n    \tpublic Test() {\r\n    \t\ttest = false;\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tif (new Test().test) {\r\n    \t\t\tDeleteClass c = new DeleteClass();\r\n    \t\t\tc.test(c);\r\n    \t\t}\r\n    \r\n    \t\tSystem.out.println(&quot;SUCCESS!&quot;);\r\n    \t}\r\n    \r\n    }\r\n\r\nDeleting `DeleteClass` and `DeleteInterface` from the jar produces the following error at runtime:\r\n\r\n    A JNI error has occurred, please check your installation and try again\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/kmecpp/test/DeleteInterface\r\n            at java.lang.Class.getDeclaredMethods0(Native Method)\r\n            at java.lang.Class.privateGetDeclaredMethods(Class.java:2701)\r\n            at java.lang.Class.privateGetMethodRecursive(Class.java:3048)\r\n            at java.lang.Class.getMethod0(Class.java:3018)\r\n            at java.lang.Class.getMethod(Class.java:1784)\r\n            at sun.launcher.LauncherHelper.validateMainClass(LauncherHelper.java:544)\r\n            at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:526)\r\n    Caused by: java.lang.ClassNotFoundException: com.kmecpp.test.DeleteInterface\r\n            at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\r\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n            at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:338)\r\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n            ... 7 more\r\n\r\nWhy is an error thrown only for this specific case, and what&#39;s the best way to work around it without access to any of the target platforms&#39; code?\r\n","title":"How to avoid NoClassDefFoundError thrown by unused code in Java","body":"<p>The project I am working on is an API to support two different platforms. At runtime only one of the two platforms will actually be available on the classpath.</p>\n<p>For the most part, I have been pretty easily able to write code like this that works fine</p>\n<pre><code>if (isPlatformOne()) {\n    PlatformOne.doSomething();\n}\n</code></pre>\n<p>Even if <code>PlatformOne</code> does not exist at runtime, the check beforehand means the code does not run and no error will be thrown. This technique works for the VAST majority of situations however there is one case that I have run into where an error is thrown.</p>\n<p>If <code>PlatformOne</code> also implements a nonexistent interface AND that is used with a parameter that ALSO does not exist, then a <code>NoClassDefFoundError</code> is thrown immediately when the containing class is loaded, regardless of whether the code actually executes or not.</p>\n<p><strong>Here's an example:</strong></p>\n<p>Interface:</p>\n<pre><code>public interface DeleteInterface {\n\n    void test(DeleteInterface delete);\n\n}\n</code></pre>\n<p>Class:</p>\n<pre><code>public class DeleteClass implements DeleteInterface {\n\n    @Override\n    public void test(DeleteInterface delete) {\n    }\n\n}\n</code></pre>\n<p>Main:</p>\n<pre><code>public class Test {\n\n    private final boolean test; //Cannot be constant or compiler will erase unreachable code\n\n    public Test() {\n        test = false;\n    }\n\n    public static void main(String[] args) {\n        if (new Test().test) {\n            DeleteClass c = new DeleteClass();\n            c.test(c);\n        }\n\n        System.out.println(&quot;SUCCESS!&quot;);\n    }\n\n}\n</code></pre>\n<p>Deleting <code>DeleteClass</code> and <code>DeleteInterface</code> from the jar produces the following error at runtime:</p>\n<pre><code>A JNI error has occurred, please check your installation and try again\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/kmecpp/test/DeleteInterface\n        at java.lang.Class.getDeclaredMethods0(Native Method)\n        at java.lang.Class.privateGetDeclaredMethods(Class.java:2701)\n        at java.lang.Class.privateGetMethodRecursive(Class.java:3048)\n        at java.lang.Class.getMethod0(Class.java:3018)\n        at java.lang.Class.getMethod(Class.java:1784)\n        at sun.launcher.LauncherHelper.validateMainClass(LauncherHelper.java:544)\n        at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:526)\nCaused by: java.lang.ClassNotFoundException: com.kmecpp.test.DeleteInterface\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:338)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n        ... 7 more\n</code></pre>\n<p>Why is an error thrown only for this specific case, and what's the best way to work around it without access to any of the target platforms' code?</p>\n"},{"tags":["java","mysql","spring","spring-data-jpa","jpql"],"comments":[{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1667897634,"post_id":74357859,"comment_id":131271232,"body_markdown":"I did not ask **PAGINATION** ! I just need one time select and limit result. So, why did not try to READ the question first before close it??? Open pls now!!!","body":"I did not ask <b>PAGINATION</b> ! I just need one time select and limit result. So, why did not try to READ the question first before close it??? Open pls now!!!"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1667897846,"post_id":74357859,"comment_id":131271306,"body_markdown":"@Moderator Why did you open the question?","body":"@Moderator Why did you open the question?"},{"owner":{"account_id":26185931,"reputation":386,"user_id":19868455,"display_name":"Pierre Demeestere"},"score":0,"creation_date":1668544623,"post_id":74357859,"comment_id":131430353,"body_markdown":"It seems that pagination is a way to solve the problem by using a paginated query and asking for the first page.","body":"It seems that pagination is a way to solve the problem by using a paginated query and asking for the first page."},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1668890349,"post_id":74357859,"comment_id":131517798,"body_markdown":"@PierreDemeestere Thanks a lot, I will considerate it","body":"@PierreDemeestere Thanks a lot, I will considerate it"}],"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1667897256,"answer_count":0,"score":0,"last_activity_date":1667896904,"creation_date":1667896904,"question_id":74357859,"body_markdown":"I have a `JPQL` query for retrieving data from MySQL and although I can use `LIMIT 10` at the end of my MySQL query, I cannot us it in my `JPQL` clause:\r\n\r\nNote: I simplified the query, I am not using this query for a simple SELECT:\r\n\r\n```\r\n@Query(value = &quot;SELECT m.id AS id, m.title AS title FROM Movie m ORDER BY title LIMIT 10&quot;)\r\nList&lt;MovieProjection&gt; listMovies();\r\n```\r\n\r\nIs it possible to get top 10 result **without using nativeQuery**?","title":"How to limit result with JPQL @Query (without nativeQuery)?","body":"<p>I have a <code>JPQL</code> query for retrieving data from MySQL and although I can use <code>LIMIT 10</code> at the end of my MySQL query, I cannot us it in my <code>JPQL</code> clause:</p>\n<p>Note: I simplified the query, I am not using this query for a simple SELECT:</p>\n<pre><code>@Query(value = &quot;SELECT m.id AS id, m.title AS title FROM Movie m ORDER BY title LIMIT 10&quot;)\nList&lt;MovieProjection&gt; listMovies();\n</code></pre>\n<p>Is it possible to get top 10 result <strong>without using nativeQuery</strong>?</p>\n"},{"tags":["java","spring","dependency-injection","quartz-scheduler","quartz"],"comments":[{"owner":{"account_id":6816538,"reputation":1507,"user_id":5245032,"accept_rate":100,"display_name":"Robert I"},"score":0,"creation_date":1512593136,"post_id":47683071,"comment_id":82325670,"body_markdown":"Also make sure you are using spring-3.2.1 and quartz-2.1.6. If not post which version you are using of quartz/spring","body":"Also make sure you are using spring-3.2.1 and quartz-2.1.6. If not post which version you are using of quartz/spring"},{"owner":{"account_id":880958,"reputation":5860,"user_id":222676,"accept_rate":76,"display_name":"Richard"},"score":0,"creation_date":1512595733,"post_id":47683071,"comment_id":82326988,"body_markdown":"@RobertI using quartz-2.2, spring-boot-1.5.7 and spring-4.3.4","body":"@RobertI using quartz-2.2, spring-boot-1.5.7 and spring-4.3.4"}],"answers":[{"comments":[{"owner":{"account_id":880958,"reputation":5860,"user_id":222676,"accept_rate":76,"display_name":"Richard"},"score":1,"creation_date":1512661472,"post_id":47697873,"comment_id":82357260,"body_markdown":"this doesn&#39;t work because I get the error: `Cannot reference foo before supertype constructor has been called`","body":"this doesn&#39;t work because I get the error: <code>Cannot reference foo before supertype constructor has been called</code>"},{"owner":{"account_id":880958,"reputation":5860,"user_id":222676,"accept_rate":76,"display_name":"Richard"},"score":1,"creation_date":1512665036,"post_id":47697873,"comment_id":82359537,"body_markdown":"I don&#39;t want to touch the base class as it affect many other classes","body":"I don&#39;t want to touch the base class as it affect many other classes"},{"owner":{"account_id":81495,"reputation":3962,"user_id":229743,"display_name":"Taylor"},"score":0,"creation_date":1512665145,"post_id":47697873,"comment_id":82359607,"body_markdown":"@Richard, you can pass in `null` which is ugly, change the parent class, or move the logic out of the job, and just delegate to some field-injected bean that calls your `fooB`","body":"@Richard, you can pass in <code>null</code> which is ugly, change the parent class, or move the logic out of the job, and just delegate to some field-injected bean that calls your <code>fooB</code>"}],"tags":[],"owner":{"account_id":3083000,"reputation":1020,"user_id":2610821,"display_name":"dev4Fun"},"comment_count":3,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1512664739,"creation_date":1512658762,"answer_id":47697873,"question_id":47683071,"body_markdown":"As stated in [docs][1]:\r\n\r\n&gt; One of the ramifications of this behavior is the fact that jobs must\r\n&gt; have a no-argument constructor (when using the default JobFactory\r\n&gt; implementation).\r\n\r\nYou essentially using default JobFactory with autowiring capability added. What I found from my personal tests is that autowiring will not work with constructor injection. Also, don&#39;t mark your job with Spring annotations (Component, Service, e.c.t) as it has no effect.\r\n\r\nTo solve your problem, refactor your job to have default constructor and autowire dependencies with field injection (maybe setter injection will work too).\r\n\r\n\r\n\r\n    abstract public class AbstractFoo {\r\n        @Autowired\r\n        protected FooB fooB;\r\n    }\r\n    \r\n    public class SomeJob extends AbstractFoo implements Job {\r\n    \r\n        @Override\r\n        public void execute(final JobExecutionContext context) throws JobExecutionException {\r\n            //do stuff\r\n        }\r\n    }\r\n\r\n\r\n  [1]: http://www.quartz-scheduler.org/documentation/quartz-2.2.x/tutorials/tutorial-lesson-03.html","title":"Spring Quartz Setting up Constructor based Injection with Parent Class Constructor","body":"<p>As stated in <a href=\"http://www.quartz-scheduler.org/documentation/quartz-2.2.x/tutorials/tutorial-lesson-03.html\" rel=\"noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>One of the ramifications of this behavior is the fact that jobs must\n  have a no-argument constructor (when using the default JobFactory\n  implementation).</p>\n</blockquote>\n\n<p>You essentially using default JobFactory with autowiring capability added. What I found from my personal tests is that autowiring will not work with constructor injection. Also, don't mark your job with Spring annotations (Component, Service, e.c.t) as it has no effect.</p>\n\n<p>To solve your problem, refactor your job to have default constructor and autowire dependencies with field injection (maybe setter injection will work too).</p>\n\n<pre><code>abstract public class AbstractFoo {\n    @Autowired\n    protected FooB fooB;\n}\n\npublic class SomeJob extends AbstractFoo implements Job {\n\n    @Override\n    public void execute(final JobExecutionContext context) throws JobExecutionException {\n        //do stuff\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3505857,"reputation":5593,"user_id":2931410,"accept_rate":33,"display_name":"Karthik R"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1521191414,"creation_date":1521191414,"answer_id":49316852,"question_id":47683071,"body_markdown":"I just posted an answer here with just normal quartz with autowiring capability.\r\nHowever, please note that you need to have a no-args constructor(Use both no-args and arg constructor in your case). Quartz uses class name to instantiate instance and so, your constructor with argument wont work.\r\n\r\nIf you still are working on the same problem, try my approach where you can auto wire the required dependency instead of going via `super(foo);`\r\n\r\nhttps://stackoverflow.com/a/49316580/2931410","title":"Spring Quartz Setting up Constructor based Injection with Parent Class Constructor","body":"<p>I just posted an answer here with just normal quartz with autowiring capability.\nHowever, please note that you need to have a no-args constructor(Use both no-args and arg constructor in your case). Quartz uses class name to instantiate instance and so, your constructor with argument wont work.</p>\n\n<p>If you still are working on the same problem, try my approach where you can auto wire the required dependency instead of going via <code>super(foo);</code></p>\n\n<p><a href=\"https://stackoverflow.com/a/49316580/2931410\">https://stackoverflow.com/a/49316580/2931410</a></p>\n"},{"tags":[],"owner":{"account_id":17426473,"reputation":990,"user_id":12631293,"display_name":"Tomasz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667896325,"creation_date":1667896325,"answer_id":74357751,"question_id":47683071,"body_markdown":"This problem occures when class not contains default constructor.\r\n\r\nExample : &lt;b&gt;YourJob extends QuartzJobBean&lt;/b&gt; then class should contains default constructor. Add &lt;b&gt;@Component&lt;/b&gt; adnotation and &lt;b&gt;@NoArgsConstructor&lt;/b&gt; if you use lombok. Other required beans should be autowired to this class by @Autowired\r\n\r\n","title":"Spring Quartz Setting up Constructor based Injection with Parent Class Constructor","body":"<p>This problem occures when class not contains default constructor.</p>\n<p>Example : <b>YourJob extends QuartzJobBean</b> then class should contains default constructor. Add <b>@Component</b> adnotation and <b>@NoArgsConstructor</b> if you use lombok. Other required beans should be autowired to this class by @Autowired</p>\n"}],"owner":{"account_id":880958,"reputation":5860,"user_id":222676,"accept_rate":76,"display_name":"Richard"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7560,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":3,"score":6,"last_activity_date":1667896325,"creation_date":1512592698,"question_id":47683071,"body_markdown":"I have a spring boot project that I want to use quartz with to run certain jobs at certain times. I have this class layout:\r\n\r\n    abstract public class AbstractFoo {\r\n    \tprotected final FooB fooB;\r\n    \r\n    \tpublic AbstractFoo(FooB fooB) {\r\n    \t\tthis.fooB = fooB;\r\n    \t}\r\n    }\r\n    \r\n    @Service\r\n    public class SomeJob extends AbstractFoo implements Job {\r\n    \tpublic SomeJob(FooB fooB) {\r\n    \t\tsuper(fooB);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void execute(final JobExecutionContext context) throws JobExecutionException {\r\n    \t\t//do stuff\r\n    \t}\r\n    }\r\n\r\nHowever, when I run this job I get the following error:\r\n\r\n    2017-12-06 14:18:01,383  ERROR --- [quartz-jobs] org.quartz.core.ErrorLogger                                                                : An error occured instantiating job to be executed. job= &#39;jobGroup.someJob&#39; \r\n    org.quartz.SchedulerException: Job instantiation failed\r\n    \tat org.springframework.scheduling.quartz.AdaptableJobFactory.newJob(AdaptableJobFactory.java:45)\r\n    \tat org.quartz.core.JobRunShell.initialize(JobRunShell.java:127)\r\n    \tat org.quartz.core.QuartzSchedulerThread.run(QuartzSchedulerThread.java:375)\r\n    Caused by: java.lang.InstantiationException: com.jobs.SomeJob\r\n    \tat java.lang.Class.newInstance(Class.java:427)\r\n    \tat org.springframework.scheduling.quartz.AdaptableJobFactory.createJobInstance(AdaptableJobFactory.java:58)\r\n    \tat org.springframework.scheduling.quartz.SpringBeanJobFactory.createJobInstance(SpringBeanJobFactory.java:74)\r\n    \tat com.config.AutowiringSpringBeanJobFactory.createJobInstance(AutowiringSpringBeanJobFactory.java:27)\r\n    \tat org.springframework.scheduling.quartz.AdaptableJobFactory.newJob(AdaptableJobFactory.java:41)\r\n    \t... 2 common frames omitted\r\n    Caused by: java.lang.NoSuchMethodException: com.jobs.SomeJob.&lt;init&gt;()\r\n    \tat java.lang.Class.getConstructor0(Class.java:3082)\r\n    \tat java.lang.Class.newInstance(Class.java:412)\r\n    \t... 6 common frames omitted\r\n\r\nI already have an autowire factory like so:\r\n\r\n    public final class AutowiringSpringBeanJobFactory extends SpringBeanJobFactory implements\r\n            ApplicationContextAware {\r\n    \r\n        private transient AutowireCapableBeanFactory beanFactory;\r\n    \r\n        @Override\r\n        public void setApplicationContext(final ApplicationContext context) {\r\n            beanFactory = context.getAutowireCapableBeanFactory();\r\n        }\r\n    \r\n        @Override\r\n        protected Object createJobInstance(final TriggerFiredBundle bundle) throws Exception {\r\n            final Object job = super.createJobInstance(bundle);\r\n            beanFactory.autowireBean(job);\r\n            return job;\r\n        }\r\n    }\r\n\r\nAnd here&#39;s my quartz config:\r\n\r\n    @Configuration\r\n    public class QuartzConfig {\r\n    \t@Autowired\r\n        private DataSource dataSource;\r\n        @Autowired\r\n        private PlatformTransactionManager transactionManager;\r\n        @Autowired\r\n        private ApplicationContext applicationContext;\r\n    \r\n    \t@Bean\r\n        public SchedulerFactoryBean quartzScheduler() {\r\n            SchedulerFactoryBean quartzScheduler = new SchedulerFactoryBean();\r\n    \r\n            quartzScheduler.setDataSource(dataSource);\r\n            quartzScheduler.setTransactionManager(transactionManager);\r\n            quartzScheduler.setOverwriteExistingJobs(true);\r\n            quartzScheduler.setSchedulerName(&quot;quartz-jobs&quot;);\r\n    \r\n            AutowiringSpringBeanJobFactory jobFactory = new AutowiringSpringBeanJobFactory();\r\n            jobFactory.setApplicationContext(applicationContext);\r\n            quartzScheduler.setJobFactory(jobFactory);\r\n    \r\n            quartzScheduler.setQuartzProperties(quartzProperties());\r\n    \r\n            Trigger[] triggers = {someJobTrigger().getObject();\r\n            quartzScheduler.setTriggers(triggers);\r\n    \r\n            return quartzScheduler;\r\n        }\r\n    \r\n        @Bean\r\n        public CronTriggerFactoryBean someJobTrigger() {\r\n            CronTriggerFactoryBean cronTriggerFactoryBean = new CronTriggerFactoryBean();\r\n            cronTriggerFactoryBean.setJobDetail(someJob().getObject());\r\n            cronTriggerFactoryBean.setCronExpression(cronExp);\r\n            cronTriggerFactoryBean.setGroup(someGroup);\r\n            return cronTriggerFactoryBean;\r\n        }\r\n    \r\n        @Bean\r\n        public JobDetailFactoryBean someJob() {\r\n            JobDetailFactoryBean jobDetailFactory = new JobDetailFactoryBean();\r\n            jobDetailFactory.setJobClass(SomeJob.class);\r\n            jobDetailFactory.setGroup(someGroup);\r\n            jobDetailFactory.setDurability(true);\r\n            return jobDetailFactory;\r\n        }\r\n    \r\n        @Bean\r\n        public Properties quartzProperties() {\r\n            PropertiesFactoryBean propertiesFactoryBean = new PropertiesFactoryBean();\r\n            propertiesFactoryBean.setLocation(new ClassPathResource(&quot;/quartz.properties&quot;));\r\n            Properties properties = null;\r\n            try {\r\n                propertiesFactoryBean.afterPropertiesSet();\r\n                properties = propertiesFactoryBean.getObject();\r\n            } catch (IOException e) {\r\n            }\r\n    \r\n            return properties;\r\n        }\r\n    }\r\n\r\nHow do I get Quartz to wire in the appropriate dependencies through the constructor?","title":"Spring Quartz Setting up Constructor based Injection with Parent Class Constructor","body":"<p>I have a spring boot project that I want to use quartz with to run certain jobs at certain times. I have this class layout:</p>\n\n<pre><code>abstract public class AbstractFoo {\n    protected final FooB fooB;\n\n    public AbstractFoo(FooB fooB) {\n        this.fooB = fooB;\n    }\n}\n\n@Service\npublic class SomeJob extends AbstractFoo implements Job {\n    public SomeJob(FooB fooB) {\n        super(fooB);\n    }\n\n    @Override\n    public void execute(final JobExecutionContext context) throws JobExecutionException {\n        //do stuff\n    }\n}\n</code></pre>\n\n<p>However, when I run this job I get the following error:</p>\n\n<pre><code>2017-12-06 14:18:01,383  ERROR --- [quartz-jobs] org.quartz.core.ErrorLogger                                                                : An error occured instantiating job to be executed. job= 'jobGroup.someJob' \norg.quartz.SchedulerException: Job instantiation failed\n    at org.springframework.scheduling.quartz.AdaptableJobFactory.newJob(AdaptableJobFactory.java:45)\n    at org.quartz.core.JobRunShell.initialize(JobRunShell.java:127)\n    at org.quartz.core.QuartzSchedulerThread.run(QuartzSchedulerThread.java:375)\nCaused by: java.lang.InstantiationException: com.jobs.SomeJob\n    at java.lang.Class.newInstance(Class.java:427)\n    at org.springframework.scheduling.quartz.AdaptableJobFactory.createJobInstance(AdaptableJobFactory.java:58)\n    at org.springframework.scheduling.quartz.SpringBeanJobFactory.createJobInstance(SpringBeanJobFactory.java:74)\n    at com.config.AutowiringSpringBeanJobFactory.createJobInstance(AutowiringSpringBeanJobFactory.java:27)\n    at org.springframework.scheduling.quartz.AdaptableJobFactory.newJob(AdaptableJobFactory.java:41)\n    ... 2 common frames omitted\nCaused by: java.lang.NoSuchMethodException: com.jobs.SomeJob.&lt;init&gt;()\n    at java.lang.Class.getConstructor0(Class.java:3082)\n    at java.lang.Class.newInstance(Class.java:412)\n    ... 6 common frames omitted\n</code></pre>\n\n<p>I already have an autowire factory like so:</p>\n\n<pre><code>public final class AutowiringSpringBeanJobFactory extends SpringBeanJobFactory implements\n        ApplicationContextAware {\n\n    private transient AutowireCapableBeanFactory beanFactory;\n\n    @Override\n    public void setApplicationContext(final ApplicationContext context) {\n        beanFactory = context.getAutowireCapableBeanFactory();\n    }\n\n    @Override\n    protected Object createJobInstance(final TriggerFiredBundle bundle) throws Exception {\n        final Object job = super.createJobInstance(bundle);\n        beanFactory.autowireBean(job);\n        return job;\n    }\n}\n</code></pre>\n\n<p>And here's my quartz config:</p>\n\n<pre><code>@Configuration\npublic class QuartzConfig {\n    @Autowired\n    private DataSource dataSource;\n    @Autowired\n    private PlatformTransactionManager transactionManager;\n    @Autowired\n    private ApplicationContext applicationContext;\n\n    @Bean\n    public SchedulerFactoryBean quartzScheduler() {\n        SchedulerFactoryBean quartzScheduler = new SchedulerFactoryBean();\n\n        quartzScheduler.setDataSource(dataSource);\n        quartzScheduler.setTransactionManager(transactionManager);\n        quartzScheduler.setOverwriteExistingJobs(true);\n        quartzScheduler.setSchedulerName(\"quartz-jobs\");\n\n        AutowiringSpringBeanJobFactory jobFactory = new AutowiringSpringBeanJobFactory();\n        jobFactory.setApplicationContext(applicationContext);\n        quartzScheduler.setJobFactory(jobFactory);\n\n        quartzScheduler.setQuartzProperties(quartzProperties());\n\n        Trigger[] triggers = {someJobTrigger().getObject();\n        quartzScheduler.setTriggers(triggers);\n\n        return quartzScheduler;\n    }\n\n    @Bean\n    public CronTriggerFactoryBean someJobTrigger() {\n        CronTriggerFactoryBean cronTriggerFactoryBean = new CronTriggerFactoryBean();\n        cronTriggerFactoryBean.setJobDetail(someJob().getObject());\n        cronTriggerFactoryBean.setCronExpression(cronExp);\n        cronTriggerFactoryBean.setGroup(someGroup);\n        return cronTriggerFactoryBean;\n    }\n\n    @Bean\n    public JobDetailFactoryBean someJob() {\n        JobDetailFactoryBean jobDetailFactory = new JobDetailFactoryBean();\n        jobDetailFactory.setJobClass(SomeJob.class);\n        jobDetailFactory.setGroup(someGroup);\n        jobDetailFactory.setDurability(true);\n        return jobDetailFactory;\n    }\n\n    @Bean\n    public Properties quartzProperties() {\n        PropertiesFactoryBean propertiesFactoryBean = new PropertiesFactoryBean();\n        propertiesFactoryBean.setLocation(new ClassPathResource(\"/quartz.properties\"));\n        Properties properties = null;\n        try {\n            propertiesFactoryBean.afterPropertiesSet();\n            properties = propertiesFactoryBean.getObject();\n        } catch (IOException e) {\n        }\n\n        return properties;\n    }\n}\n</code></pre>\n\n<p>How do I get Quartz to wire in the appropriate dependencies through the constructor?</p>\n"},{"tags":["java","generics","gson","deserialization"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1667896669,"post_id":74357747,"comment_id":131270872,"body_markdown":"Why would Gson make you pass a `TypeToken` if it could be constructed from `T` alone?","body":"Why would Gson make you pass a <code>TypeToken</code> if it could be constructed from <code>T</code> alone?"},{"owner":{"account_id":12561011,"reputation":170,"user_id":9138779,"display_name":"Nikhil Rathore"},"score":0,"creation_date":1667925063,"post_id":74357747,"comment_id":131281953,"body_markdown":"@shmosel I didn&#39;t get what you are saying. I didn&#39;t pass `TypeToken`. I am evaluating that myself through `Type typeOfT = new TypeToken&lt;T&gt;(){}.getType();` And that is not working.","body":"@shmosel I didn&#39;t get what you are saying. I didn&#39;t pass <code>TypeToken</code>. I am evaluating that myself through <code>Type typeOfT = new TypeToken&lt;T&gt;(){}.getType();</code> And that is not working."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1667951079,"post_id":74357747,"comment_id":131289756,"body_markdown":"I&#39;m saying you can&#39;t construct `TypeToken` with a generic type, otherwise `fromJson()` would have done that internally.","body":"I&#39;m saying you can&#39;t construct <code>TypeToken</code> with a generic type, otherwise <code>fromJson()</code> would have done that internally."},{"owner":{"account_id":12561011,"reputation":170,"user_id":9138779,"display_name":"Nikhil Rathore"},"score":0,"creation_date":1668049412,"post_id":74357747,"comment_id":131315121,"body_markdown":"Ok so if TypeToken is not the way to go is there any way I can deserialize it to generic type? @shmosel","body":"Ok so if TypeToken is not the way to go is there any way I can deserialize it to generic type? @shmosel"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1668049620,"post_id":74357747,"comment_id":131315152,"body_markdown":"TypeToken is the way to go, but you have to construct it with an explicit type parameter, like `new TypeToken&lt;List&lt;String&gt;&gt;`.","body":"TypeToken is the way to go, but you have to construct it with an explicit type parameter, like <code>new TypeToken&lt;List&lt;String&gt;&gt;</code>."},{"owner":{"account_id":12561011,"reputation":170,"user_id":9138779,"display_name":"Nikhil Rathore"},"score":0,"creation_date":1668050129,"post_id":74357747,"comment_id":131315232,"body_markdown":"Ok let me give this a try","body":"Ok let me give this a try"},{"owner":{"account_id":12561011,"reputation":170,"user_id":9138779,"display_name":"Nikhil Rathore"},"score":0,"creation_date":1668170468,"post_id":74357747,"comment_id":131346676,"body_markdown":"there is no public constructor for `TypeToken`. only a private and protected. so can&#39;t do `new TypeToken&lt;List&lt;String&gt;&gt;`","body":"there is no public constructor for <code>TypeToken</code>. only a private and protected. so can&#39;t do <code>new TypeToken&lt;List&lt;String&gt;&gt;</code>"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1668199925,"post_id":74357747,"comment_id":131356133,"body_markdown":"Right, you need the whole `() {}`. I shortened it because my point was about the generic type.","body":"Right, you need the whole <code>() {}</code>. I shortened it because my point was about the generic type."}],"owner":{"account_id":12561011,"reputation":170,"user_id":9138779,"display_name":"Nikhil Rathore"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667896298,"creation_date":1667896298,"question_id":74357747,"body_markdown":"**I know this has been asked before. But the mentioned solutions are not working for me.**\r\n\r\nI have the following method\r\n\r\n    public class JsonDesializer&lt;T&gt; implements Deserializer&lt;T&gt; {\r\n    \r\n        @Override\r\n        public T deserialize(String topic, byte[] data) {\r\n            Gson gson = new GsonBuilder().create();\r\n            if (data == null) {\r\n                return null;\r\n            }\r\n            Type typeOfT = new TypeToken&lt;T&gt;(){}.getType();\r\n            var a =  gson.fromJson(new String(data, StandardCharsets.UTF_8), typeOfT);\r\n            return (T) a;\r\n        }\r\n    }\r\n\r\nThis is what I found mostly while browsing the internet (which included SO as well).\r\nUnfortunately this returns a **LinkedTreeMap**, something that belongs to gson only. If I inspect the values of this object, these values are present. But the type is not that of T. Attaching a ss of the vs code debug console showing the structure of this treemap.\r\n\r\n[![ss of structure][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/NNenO.png\r\n\r\nThe properties in the target class would be patientId, systolicPressure, etc. I have seen solutions where we have to pass TargetClass.class as a constructor parameter.\r\n\r\nFor eg, if I want to deserialize into a class called BloddPressure then I can pass BloodPressure.class and then I can use that for the type. But the problem with that approach is `A&lt;B&gt;.class` doesn&#39;t work.\r\n\r\n How to convert this tree map into T which is passed. ","title":"gson deserilize byte array to generic type","body":"<p><strong>I know this has been asked before. But the mentioned solutions are not working for me.</strong></p>\n<p>I have the following method</p>\n<pre><code>public class JsonDesializer&lt;T&gt; implements Deserializer&lt;T&gt; {\n\n    @Override\n    public T deserialize(String topic, byte[] data) {\n        Gson gson = new GsonBuilder().create();\n        if (data == null) {\n            return null;\n        }\n        Type typeOfT = new TypeToken&lt;T&gt;(){}.getType();\n        var a =  gson.fromJson(new String(data, StandardCharsets.UTF_8), typeOfT);\n        return (T) a;\n    }\n}\n</code></pre>\n<p>This is what I found mostly while browsing the internet (which included SO as well).\nUnfortunately this returns a <strong>LinkedTreeMap</strong>, something that belongs to gson only. If I inspect the values of this object, these values are present. But the type is not that of T. Attaching a ss of the vs code debug console showing the structure of this treemap.</p>\n<p><a href=\"https://i.stack.imgur.com/NNenO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NNenO.png\" alt=\"ss of structure\" /></a></p>\n<p>The properties in the target class would be patientId, systolicPressure, etc. I have seen solutions where we have to pass TargetClass.class as a constructor parameter.</p>\n<p>For eg, if I want to deserialize into a class called BloddPressure then I can pass BloodPressure.class and then I can use that for the type. But the problem with that approach is <code>A&lt;B&gt;.class</code> doesn't work.</p>\n<p>How to convert this tree map into T which is passed.</p>\n"},{"tags":["java","swing","user-interface","icons"],"comments":[{"owner":{"account_id":26864484,"reputation":1,"user_id":20447450,"display_name":"nikstrt"},"score":0,"creation_date":1667896986,"post_id":74357744,"comment_id":131270977,"body_markdown":"I actually runned from the  VS Code Terminal and it worked . I set the directory to the src  file of the project and it worked just fine","body":"I actually runned from the  VS Code Terminal and it worked . I set the directory to the src  file of the project and it worked just fine"},{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - "},"score":1,"creation_date":1667906857,"post_id":74357744,"comment_id":131274557,"body_markdown":"Good....now will it work when it&#39;s a JAR file and run on its own **somewhere** (without the IDE)?","body":"Good....now will it work when it&#39;s a JAR file and run on its own <b>somewhere</b> (without the IDE)?"}],"owner":{"account_id":26864484,"reputation":1,"user_id":20447450,"display_name":"nikstrt"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667896291,"creation_date":1667896291,"question_id":74357744,"body_markdown":"#Java#JavaGUI\r\nHi I&#39;m Nick , I&#39;m coding in Jva and I can&#39;t change the deffault frame icon in a GUI frame I created. \r\nNow I will tell you about the code I wrote in VS Code while trying to change the deffault frame icon in a GUI frame I created in VS Code . The code is exactly the same as in the video by channel Bro Code: https://www.youtube.com/watch?v=xk4_1vDrzzo with time stamp: 5:32:18.\r\n\r\n\r\n\r\n\r\nHere&#39;s the code I tried and which I expected to do the work :\r\n\r\n\r\n\r\n    \r\n```\r\n\r\nimport javax.swing.JFrame;\r\nimport javax.swing.ImageIcon;\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        \r\n        JFrame frame = new JFrame();//creates a frame\r\n        frame.setTitle(&quot;JFrame title goes here&quot;);//This sets frame&#39;s title\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);//exit out of application\r\n        frame.setResizable(false);//prevent frame from being resized\r\n        frame.setSize(420,420);//sets x-dimension and y-dimension\r\n        frame.setVisible(true);//make frame visible\r\n\r\n        ImageIcon image = new ImageIcon(&quot;classybrocode.jpg&quot;);\r\n        frame.setIconImage(image.getImage());//change icon of frame\r\n\r\n    }\r\n}\r\n```\r\n\r\n\r\n","title":"Cannot change deffault gui frame icon in Java","body":"<p>#Java#JavaGUI\nHi I'm Nick , I'm coding in Jva and I can't change the deffault frame icon in a GUI frame I created.\nNow I will tell you about the code I wrote in VS Code while trying to change the deffault frame icon in a GUI frame I created in VS Code . The code is exactly the same as in the video by channel Bro Code: <a href=\"https://www.youtube.com/watch?v=xk4_1vDrzzo\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=xk4_1vDrzzo</a> with time stamp: 5:32:18.</p>\n<p>Here's the code I tried and which I expected to do the work :</p>\n<pre><code>\nimport javax.swing.JFrame;\nimport javax.swing.ImageIcon;\npublic class Main {\n    public static void main(String[] args) {\n        \n        JFrame frame = new JFrame();//creates a frame\n        frame.setTitle(&quot;JFrame title goes here&quot;);//This sets frame's title\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);//exit out of application\n        frame.setResizable(false);//prevent frame from being resized\n        frame.setSize(420,420);//sets x-dimension and y-dimension\n        frame.setVisible(true);//make frame visible\n\n        ImageIcon image = new ImageIcon(&quot;classybrocode.jpg&quot;);\n        frame.setIconImage(image.getImage());//change icon of frame\n\n    }\n}\n</code></pre>\n"},{"tags":["java","recursive-backtracking"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1667896104,"post_id":74357685,"comment_id":131270667,"body_markdown":"do you also have a question to ask?","body":"do you also have a question to ask?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1667909518,"post_id":74357685,"comment_id":131275478,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":26757481,"reputation":3,"user_id":20355888,"display_name":"Aniket Ingawale"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667896094,"creation_date":1667895969,"question_id":74357685,"body_markdown":"In a gold mine grid of size m x n, each cell in this mine has an integer representing the amount of gold in that cell, 0 if it is empty.\r\n\r\nReturn the maximum amount of gold you can collect under the conditions:\r\n\r\nEvery time you are located in a cell you will collect all the gold in that cell.\r\nFrom your position, you can walk one step to the left, right, up, or down.\r\nYou can&#39;t visit the same cell more than once.\r\nNever visit a cell with 0 gold.\r\nYou can start and stop collecting gold from any position in the grid that has some gold.\r\n\r\n```\r\nclass Solution {\r\n    public int getMaximumGold( int[][] grid) {\r\n         int max=0, min=0;\r\n       for(int i=0; i&lt;grid.length; i++){\r\n           for(int j=0; j&lt;grid[i].length; j++){\r\n           \r\n              min=gold(grid, i, j);\r\n               max=Math.max(max, min);\r\n               \r\n           }\r\n       }\r\n       \r\n       \r\n        return max;\r\n    }\r\n    public int gold(int[][] grid,int row, int col) {\r\n        if(grid[row][col]==0) return 0;\r\n        int max=0, min=0; \r\n       int [][] newgrid = grid;\r\n        int currgold = newgrid[row][col];\r\n        \r\n        newgrid[row][col]=0;\r\n        //left check\r\n        if(col-1&gt;=0 &amp;&amp; newgrid[row][col-1]!=0) {\r\n            int[][] ogrid = newgrid;\r\n            max=gold(ogrid,row,col-1);\r\n        }\r\n        //right check\r\n        if(col+1&lt;newgrid[row].length &amp;&amp; newgrid[row][col+1]!=0) {\r\n            int[][] ogrid = newgrid;\r\n            min=gold(ogrid,row,col+1);\r\n        }\r\n        max=Math.max(max,min);\r\n        //up check\r\n        if(row-1&gt;=0 &amp;&amp; newgrid[row-1][col]!=0) {\r\n            int[][] ogrid = newgrid;\r\n            min=gold(ogrid,row-1,col);\r\n            }\r\n        max=Math.max(max,min);\r\n        //downcheck\r\n        if(row+1&lt;newgrid.length &amp;&amp; newgrid[row+1][col] != 0) {\r\n            int[][] ogrid = newgrid;\r\n            min = gold(ogrid, row+1, col);\r\n        }\r\n        \r\n        return Math.max(max,min)+currgold;\r\n    }\r\n}\r\n\r\n```\r\n","title":"why it grid become zero after one travers","body":"<p>In a gold mine grid of size m x n, each cell in this mine has an integer representing the amount of gold in that cell, 0 if it is empty.</p>\n<p>Return the maximum amount of gold you can collect under the conditions:</p>\n<p>Every time you are located in a cell you will collect all the gold in that cell.\nFrom your position, you can walk one step to the left, right, up, or down.\nYou can't visit the same cell more than once.\nNever visit a cell with 0 gold.\nYou can start and stop collecting gold from any position in the grid that has some gold.</p>\n<pre><code>class Solution {\n    public int getMaximumGold( int[][] grid) {\n         int max=0, min=0;\n       for(int i=0; i&lt;grid.length; i++){\n           for(int j=0; j&lt;grid[i].length; j++){\n           \n              min=gold(grid, i, j);\n               max=Math.max(max, min);\n               \n           }\n       }\n       \n       \n        return max;\n    }\n    public int gold(int[][] grid,int row, int col) {\n        if(grid[row][col]==0) return 0;\n        int max=0, min=0; \n       int [][] newgrid = grid;\n        int currgold = newgrid[row][col];\n        \n        newgrid[row][col]=0;\n        //left check\n        if(col-1&gt;=0 &amp;&amp; newgrid[row][col-1]!=0) {\n            int[][] ogrid = newgrid;\n            max=gold(ogrid,row,col-1);\n        }\n        //right check\n        if(col+1&lt;newgrid[row].length &amp;&amp; newgrid[row][col+1]!=0) {\n            int[][] ogrid = newgrid;\n            min=gold(ogrid,row,col+1);\n        }\n        max=Math.max(max,min);\n        //up check\n        if(row-1&gt;=0 &amp;&amp; newgrid[row-1][col]!=0) {\n            int[][] ogrid = newgrid;\n            min=gold(ogrid,row-1,col);\n            }\n        max=Math.max(max,min);\n        //downcheck\n        if(row+1&lt;newgrid.length &amp;&amp; newgrid[row+1][col] != 0) {\n            int[][] ogrid = newgrid;\n            min = gold(ogrid, row+1, col);\n        }\n        \n        return Math.max(max,min)+currgold;\n    }\n}\n\n</code></pre>\n"},{"tags":["java","logging"],"comments":[{"owner":{"account_id":15106724,"reputation":508,"user_id":16163044,"display_name":"Sandro J"},"score":0,"creation_date":1667884033,"post_id":74355871,"comment_id":131267949,"body_markdown":"What about using Lombok? https://projectlombok.org/features/log","body":"What about using Lombok? <a href=\"https://projectlombok.org/features/log\" rel=\"nofollow noreferrer\">projectlombok.org/features/log</a>"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1667884068,"post_id":74355871,"comment_id":131267954,"body_markdown":"There was a lombok solution in the link you gave.","body":"There was a lombok solution in the link you gave."},{"owner":{"account_id":1223835,"reputation":75888,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":1,"creation_date":1667884755,"post_id":74355871,"comment_id":131268048,"body_markdown":"_In general_, this isn&#39;t possible. As noted above, this _specific_ modification is supported by Lombok (through some rather unorthodox and non-generalizable techniques).","body":"<i>In general</i>, this isn&#39;t possible. As noted above, this <i>specific</i> modification is supported by Lombok (through some rather unorthodox and non-generalizable techniques)."},{"owner":{"account_id":3341532,"reputation":486,"user_id":2807723,"accept_rate":43,"display_name":"AhmedRana"},"score":0,"creation_date":1668613697,"post_id":74355871,"comment_id":131449196,"body_markdown":"This is what I am looking for. How is lombok doing it?","body":"This is what I am looking for. How is lombok doing it?"}],"answers":[{"comments":[{"owner":{"account_id":3341532,"reputation":486,"user_id":2807723,"accept_rate":43,"display_name":"AhmedRana"},"score":0,"creation_date":1667895863,"post_id":74357095,"comment_id":131270580,"body_markdown":"Lombok can only provide some specific loggers I believe. The IBM product I am developing for gives logger from its own factory.","body":"Lombok can only provide some specific loggers I believe. The IBM product I am developing for gives logger from its own factory."}],"tags":[],"owner":{"account_id":26863921,"reputation":43,"user_id":20446959,"display_name":"Arkady Dymkov"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667892719,"creation_date":1667892719,"answer_id":74357095,"question_id":74355871,"body_markdown":"Try this:\r\n\r\n 1. Add maven Lombok dependency and user @log4j2\r\n 2. Create a class that will return logger to you\r\n\r\nIf I understand you correctly, this is ur answer.","title":"Using Java annotation to create a Logger in class","body":"<p>Try this:</p>\n<ol>\n<li>Add maven Lombok dependency and user @log4j2</li>\n<li>Create a class that will return logger to you</li>\n</ol>\n<p>If I understand you correctly, this is ur answer.</p>\n"}],"owner":{"account_id":3341532,"reputation":486,"user_id":2807723,"accept_rate":43,"display_name":"AhmedRana"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":122,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1667896082,"creation_date":1667883736,"question_id":74355871,"body_markdown":"Is it possible to create annotation to expose a custom Logger variable into the class for direct use, so that I don&#39;t have to do something to the effect of:\r\n\r\n`Logger logger = CustomerLoggerFactory.getLogger(MyClass.class);`\r\n\r\nIt would be nice if the above was implicitly available due to the annotation and I could just go about doing logger.debug(&quot;...&quot;); without the declaration. \r\n\r\nSimilar question is asked `https://stackoverflow.com/questions/6351082/using-java-annotation-to-inject-logger-dependency` for Spring and all answers are Spring specific. I am looking for simple Java.\r\n\r\nEdit: I cannot use lombok as the IBM product I am developing for provides its own logger factories and those the only way to get a logger via `MXLogger.getLogger(key) method`","title":"Using Java annotation to create a Logger in class","body":"<p>Is it possible to create annotation to expose a custom Logger variable into the class for direct use, so that I don't have to do something to the effect of:</p>\n<p><code>Logger logger = CustomerLoggerFactory.getLogger(MyClass.class);</code></p>\n<p>It would be nice if the above was implicitly available due to the annotation and I could just go about doing logger.debug(&quot;...&quot;); without the declaration.</p>\n<p>Similar question is asked <code>https://stackoverflow.com/questions/6351082/using-java-annotation-to-inject-logger-dependency</code> for Spring and all answers are Spring specific. I am looking for simple Java.</p>\n<p>Edit: I cannot use lombok as the IBM product I am developing for provides its own logger factories and those the only way to get a logger via <code>MXLogger.getLogger(key) method</code></p>\n"},{"tags":["java","spring-boot","api"],"comments":[{"owner":{"account_id":14255669,"reputation":330,"user_id":10297961,"display_name":"Tan Sang"},"score":0,"creation_date":1667886554,"post_id":74355900,"comment_id":131268348,"body_markdown":"take another read at the docs. The JSON response in the two APIs are different, make sure you call or override the right method and read the right response from API","body":"take another read at the docs. The JSON response in the two APIs are different, make sure you call or override the right method and read the right response from API"}],"answers":[{"tags":[],"owner":{"account_id":26380053,"reputation":36,"user_id":20033444,"display_name":"Awais Memon"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1667895966,"creation_date":1667895966,"answer_id":74357684,"question_id":74355900,"body_markdown":"The JSON response of the api to get all characters is in this structure:\r\n\r\nhttps://rickandmortyapi.com/api/character\r\n\r\n    {\r\n        &quot;info&quot;: {\r\n        &quot;count&quot;: 826,\r\n        &quot;pages&quot;: 42,\r\n        &quot;next&quot;: &quot;https://rickandmortyapi.com/api/character/?page=2&quot;,\r\n        &quot;prev&quot;: null\r\n        }\r\n        &quot;results&quot;: [\r\n        {\r\n          &quot;id&quot;: 1,\r\n          &quot;name&quot;: &quot;Rick Sanchez&quot;,\r\n          &quot;status&quot;: &quot;Alive&quot;,\r\n          &quot;species&quot;: &quot;Human&quot;,\r\n          &quot;type&quot;: &quot;&quot;,\r\n          &quot;gender&quot;: &quot;Male&quot;,\r\n          &quot;origin&quot;: {\r\n            &quot;name&quot;: &quot;Earth&quot;,\r\n            &quot;url&quot;: &quot;https://rickandmortyapi.com/api/location/1&quot;\r\n          },\r\n          &quot;location&quot;: {\r\n            &quot;name&quot;: &quot;Earth&quot;,\r\n            &quot;url&quot;: &quot;https://rickandmortyapi.com/api/location/20&quot;\r\n          },\r\n          &quot;image&quot;: &quot;https://rickandmortyapi.com/api/character/avatar/1.jpeg&quot;,\r\n          &quot;episode&quot;: [\r\n            &quot;https://rickandmortyapi.com/api/episode/1&quot;,\r\n            &quot;https://rickandmortyapi.com/api/episode/2&quot;,\r\n            // ...\r\n          ],\r\n          &quot;url&quot;: &quot;https://rickandmortyapi.com/api/character/1&quot;,\r\n          &quot;created&quot;: &quot;2017-11-04T18:48:46.250Z&quot;\r\n        },\r\n       ]\r\n    }\r\n\r\n\r\nWhereas the JSON response of the api to get a single character has different structure:\r\n\r\nhttps://rickandmortyapi.com/api/character/2\r\n\r\n    {\r\n      &quot;id&quot;: 2,\r\n      &quot;name&quot;: &quot;Morty Smith&quot;,\r\n      &quot;status&quot;: &quot;Alive&quot;,\r\n      &quot;species&quot;: &quot;Human&quot;,\r\n      &quot;type&quot;: &quot;&quot;,\r\n      &quot;gender&quot;: &quot;Male&quot;,\r\n      &quot;origin&quot;: {\r\n        &quot;name&quot;: &quot;Earth&quot;,\r\n        &quot;url&quot;: &quot;https://rickandmortyapi.com/api/location/1&quot;\r\n      },\r\n      &quot;location&quot;: {\r\n        &quot;name&quot;: &quot;Earth&quot;,\r\n        &quot;url&quot;: &quot;https://rickandmortyapi.com/api/location/20&quot;\r\n      },\r\n      &quot;image&quot;: &quot;https://rickandmortyapi.com/api/character/avatar/2.jpeg&quot;,\r\n      &quot;episode&quot;: [\r\n        &quot;https://rickandmortyapi.com/api/episode/1&quot;,\r\n        &quot;https://rickandmortyapi.com/api/episode/2&quot;,\r\n        // ...\r\n      ],\r\n      &quot;url&quot;: &quot;https://rickandmortyapi.com/api/character/2&quot;,\r\n      &quot;created&quot;: &quot;2017-11-04T18:50:21.651Z&quot;\r\n    }\r\n\r\n\r\nAs you can see there is no `&quot;results&quot;` Array object in the single-character JSON response.\r\nSo, you need to read the response accordingly.","title":"Consuming Rick and Morty&#39;s API in Spring Boot returns Null","body":"<p>The JSON response of the api to get all characters is in this structure:</p>\n<p><a href=\"https://rickandmortyapi.com/api/character\" rel=\"nofollow noreferrer\">https://rickandmortyapi.com/api/character</a></p>\n<pre><code>{\n    &quot;info&quot;: {\n    &quot;count&quot;: 826,\n    &quot;pages&quot;: 42,\n    &quot;next&quot;: &quot;https://rickandmortyapi.com/api/character/?page=2&quot;,\n    &quot;prev&quot;: null\n    }\n    &quot;results&quot;: [\n    {\n      &quot;id&quot;: 1,\n      &quot;name&quot;: &quot;Rick Sanchez&quot;,\n      &quot;status&quot;: &quot;Alive&quot;,\n      &quot;species&quot;: &quot;Human&quot;,\n      &quot;type&quot;: &quot;&quot;,\n      &quot;gender&quot;: &quot;Male&quot;,\n      &quot;origin&quot;: {\n        &quot;name&quot;: &quot;Earth&quot;,\n        &quot;url&quot;: &quot;https://rickandmortyapi.com/api/location/1&quot;\n      },\n      &quot;location&quot;: {\n        &quot;name&quot;: &quot;Earth&quot;,\n        &quot;url&quot;: &quot;https://rickandmortyapi.com/api/location/20&quot;\n      },\n      &quot;image&quot;: &quot;https://rickandmortyapi.com/api/character/avatar/1.jpeg&quot;,\n      &quot;episode&quot;: [\n        &quot;https://rickandmortyapi.com/api/episode/1&quot;,\n        &quot;https://rickandmortyapi.com/api/episode/2&quot;,\n        // ...\n      ],\n      &quot;url&quot;: &quot;https://rickandmortyapi.com/api/character/1&quot;,\n      &quot;created&quot;: &quot;2017-11-04T18:48:46.250Z&quot;\n    },\n   ]\n}\n</code></pre>\n<p>Whereas the JSON response of the api to get a single character has different structure:</p>\n<p><a href=\"https://rickandmortyapi.com/api/character/2\" rel=\"nofollow noreferrer\">https://rickandmortyapi.com/api/character/2</a></p>\n<pre><code>{\n  &quot;id&quot;: 2,\n  &quot;name&quot;: &quot;Morty Smith&quot;,\n  &quot;status&quot;: &quot;Alive&quot;,\n  &quot;species&quot;: &quot;Human&quot;,\n  &quot;type&quot;: &quot;&quot;,\n  &quot;gender&quot;: &quot;Male&quot;,\n  &quot;origin&quot;: {\n    &quot;name&quot;: &quot;Earth&quot;,\n    &quot;url&quot;: &quot;https://rickandmortyapi.com/api/location/1&quot;\n  },\n  &quot;location&quot;: {\n    &quot;name&quot;: &quot;Earth&quot;,\n    &quot;url&quot;: &quot;https://rickandmortyapi.com/api/location/20&quot;\n  },\n  &quot;image&quot;: &quot;https://rickandmortyapi.com/api/character/avatar/2.jpeg&quot;,\n  &quot;episode&quot;: [\n    &quot;https://rickandmortyapi.com/api/episode/1&quot;,\n    &quot;https://rickandmortyapi.com/api/episode/2&quot;,\n    // ...\n  ],\n  &quot;url&quot;: &quot;https://rickandmortyapi.com/api/character/2&quot;,\n  &quot;created&quot;: &quot;2017-11-04T18:50:21.651Z&quot;\n}\n</code></pre>\n<p>As you can see there is no <code>&quot;results&quot;</code> Array object in the single-character JSON response.\nSo, you need to read the response accordingly.</p>\n"}],"owner":{"account_id":18941674,"reputation":25,"user_id":13821568,"display_name":"Aldo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":162,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74357684,"answer_count":1,"score":0,"last_activity_date":1667895966,"creation_date":1667884027,"question_id":74355900,"body_markdown":"I&#39;m trying to learn about API&#39;s in Spring Boot, and I&#39;m struggling with the Rick and Morty API, when I give the getAllCharacters, the API returns all of the Characters with no problem, but, for example, when I try to retrieve just one Character (with the same logic, just changing the endpoint)\r\n\r\nService:\r\n\r\n```\r\npackage com.burakkutbay.springbootresttemplateexample.service;\r\n\r\nimport com.burakkutbay.springbootresttemplateexample.pojo.Character;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.http.*;\r\nimport org.springframework.stereotype.Service;\r\nimport org.springframework.web.client.RestTemplate;\r\n\r\nimport java.util.List;\r\n\r\n@Service\r\npublic class ApiServiceImpl implements ApiService {\r\n\r\n    @Autowired\r\n    private RestTemplate restTemplate;\r\n\r\n    @Autowired\r\n    private HttpHeaders httpHeaders;\r\n\r\n    private static final String CHAHRACTER_API = &quot;https://rickandmortyapi.com/api/character&quot;;\r\n\r\n    @Override\r\n    public Character getAllCharacter() {\r\n\r\n        httpHeaders.setAccept(List.of(MediaType.APPLICATION_JSON));\r\n\r\n        HttpEntity&lt;String&gt; entity = new HttpEntity&lt;&gt;(httpHeaders);\r\n\r\n        ResponseEntity&lt;Character&gt; response = restTemplate.exchange(CHAHRACTER_API, HttpMethod.GET,\r\n                entity, Character.class);\r\n\r\n        return response.getBody();\r\n    }\r\n}\r\n\r\n```\r\nController\r\n\r\n\r\n```\r\npackage com.burakkutbay.springbootresttemplateexample.controller;\r\n\r\nimport com.burakkutbay.springbootresttemplateexample.pojo.Character;\r\nimport com.burakkutbay.springbootresttemplateexample.service.ApiService;\r\nimport com.burakkutbay.springbootresttemplateexample.service.ApiServiceImpl;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@RestController\r\npublic class ApiController {\r\n\r\n    @Autowired\r\n    private ApiService apiService;\r\n\r\n    @GetMapping(&quot;/&quot;)\r\n    public ResponseEntity&lt;Character&gt; getCharacters() {\r\n        Character characters = apiService.getAllCharacter();\r\n        return new ResponseEntity&lt;&gt;(characters, HttpStatus.OK);\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nThat code returns all the Characters, but, just to learn, if I tried to get to a specific character changing the `private static final String CHAHRACTER_API = &quot;https://rickandmortyapi.com/api/character&quot;;` for `private static final String CHAHRACTER_API = &quot;https://rickandmortyapi.com/api/character/2&quot;;` in the service class, returns null\r\n\r\n\r\n\r\n\r\n```\r\n{\r\n    &quot;info&quot;: null,\r\n    &quot;results&quot;: null\r\n}\r\n```\r\n\r\n&#191;Can anyone please explain why can retrieve many elements of the json but not one?\r\n\r\nThanks!\r\n\r\n```\r\n","title":"Consuming Rick and Morty&#39;s API in Spring Boot returns Null","body":"<p>I'm trying to learn about API's in Spring Boot, and I'm struggling with the Rick and Morty API, when I give the getAllCharacters, the API returns all of the Characters with no problem, but, for example, when I try to retrieve just one Character (with the same logic, just changing the endpoint)</p>\n<p>Service:</p>\n<pre><code>package com.burakkutbay.springbootresttemplateexample.service;\n\nimport com.burakkutbay.springbootresttemplateexample.pojo.Character;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.*;\nimport org.springframework.stereotype.Service;\nimport org.springframework.web.client.RestTemplate;\n\nimport java.util.List;\n\n@Service\npublic class ApiServiceImpl implements ApiService {\n\n    @Autowired\n    private RestTemplate restTemplate;\n\n    @Autowired\n    private HttpHeaders httpHeaders;\n\n    private static final String CHAHRACTER_API = &quot;https://rickandmortyapi.com/api/character&quot;;\n\n    @Override\n    public Character getAllCharacter() {\n\n        httpHeaders.setAccept(List.of(MediaType.APPLICATION_JSON));\n\n        HttpEntity&lt;String&gt; entity = new HttpEntity&lt;&gt;(httpHeaders);\n\n        ResponseEntity&lt;Character&gt; response = restTemplate.exchange(CHAHRACTER_API, HttpMethod.GET,\n                entity, Character.class);\n\n        return response.getBody();\n    }\n}\n\n</code></pre>\n<p>Controller</p>\n<pre><code>package com.burakkutbay.springbootresttemplateexample.controller;\n\nimport com.burakkutbay.springbootresttemplateexample.pojo.Character;\nimport com.burakkutbay.springbootresttemplateexample.service.ApiService;\nimport com.burakkutbay.springbootresttemplateexample.service.ApiServiceImpl;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class ApiController {\n\n    @Autowired\n    private ApiService apiService;\n\n    @GetMapping(&quot;/&quot;)\n    public ResponseEntity&lt;Character&gt; getCharacters() {\n        Character characters = apiService.getAllCharacter();\n        return new ResponseEntity&lt;&gt;(characters, HttpStatus.OK);\n    }\n}\n\n</code></pre>\n<p>That code returns all the Characters, but, just to learn, if I tried to get to a specific character changing the <code>private static final String CHAHRACTER_API = &quot;https://rickandmortyapi.com/api/character&quot;;</code> for <code>private static final String CHAHRACTER_API = &quot;https://rickandmortyapi.com/api/character/2&quot;;</code> in the service class, returns null</p>\n<pre><code>{\n    &quot;info&quot;: null,\n    &quot;results&quot;: null\n}\n</code></pre>\n<p>Can anyone please explain why can retrieve many elements of the json but not one?</p>\n<p>Thanks!</p>\n<pre><code></code></pre>\n"},{"tags":["java","netbeans","exchangewebservices"],"comments":[{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1667968389,"post_id":74356742,"comment_id":131292167,"body_markdown":"That exception is unhelpful, but perhaps some of the comments in this [recent Microsoft Tech Community thread](https://techcommunity.microsoft.com/t5/exchange/ews-with-oauth-quot-an-internal-server-error-occurred-the/m-p/3609047) might be useful. I have no idea whether they are relevant for your problem, but some users have posted specific code changes they made to resolve that exception.","body":"That exception is unhelpful, but perhaps some of the comments in this <a href=\"https://techcommunity.microsoft.com/t5/exchange/ews-with-oauth-quot-an-internal-server-error-occurred-the/m-p/3609047\" rel=\"nofollow noreferrer\">recent Microsoft Tech Community thread</a> might be useful. I have no idea whether they are relevant for your problem, but some users have posted specific code changes they made to resolve that exception."},{"owner":{"account_id":26863475,"reputation":11,"user_id":20446574,"display_name":"Peter Koopman"},"score":0,"creation_date":1667986087,"post_id":74356742,"comment_id":131296286,"body_markdown":"Thank you @skomisa. I hadn&#39;t seen the last suggestions on than page before, so it&#39;s worth a try. And good to know, I&#39;m not the only one with this error. ;)","body":"Thank you @skomisa. I hadn&#39;t seen the last suggestions on than page before, so it&#39;s worth a try. And good to know, I&#39;m not the only one with this error. ;)"},{"owner":{"account_id":26863475,"reputation":11,"user_id":20446574,"display_name":"Peter Koopman"},"score":0,"creation_date":1668065801,"post_id":74356742,"comment_id":131317834,"body_markdown":"The MS Tech community had a few new suggestions.\n1. Changing the scope to https://outlook.office365.com/EWS.AccessAsUser.All which results in an error AADSTS1002012 Client credential flows must have a scope value with /.default suffixed.\n2. And adding service.getHttpHeaders().put(&quot;Authorization&quot;, &quot;Bearer &quot; + token); after which I still receive an InternalServerError.\nSo sadly, this is not the answer.","body":"The MS Tech community had a few new suggestions. 1. Changing the scope to <a href=\"https://outlook.office365.com/EWS.AccessAsUser.All\" rel=\"nofollow noreferrer\">outlook.office365.com/EWS.AccessAsUser.All</a> which results in an error AADSTS1002012 Client credential flows must have a scope value with /.default suffixed. 2. And adding service.getHttpHeaders().put(&quot;Authorization&quot;, &quot;Bearer &quot; + token); after which I still receive an InternalServerError. So sadly, this is not the answer."},{"owner":{"account_id":26863475,"reputation":11,"user_id":20446574,"display_name":"Peter Koopman"},"score":0,"creation_date":1669397066,"post_id":74356742,"comment_id":131639647,"body_markdown":"My manager decided to go for a solution with Javax.mail IMAP with XOAUTH2 for now.","body":"My manager decided to go for a solution with Javax.mail IMAP with XOAUTH2 for now."}],"owner":{"account_id":26863475,"reputation":11,"user_id":20446574,"display_name":"Peter Koopman"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":613,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1667895808,"creation_date":1667890718,"question_id":74356742,"body_markdown":"As a RPGLE programmer I was asked to convert an IMAP mail poller to EWS. So I&#39;m a bit out of my comfort zone.\r\n\r\nWith all documentation I managed to cobble a lot of pieces together, but it looks like I&#39;m missing a vital piece because the program keep crashing at Folder folder = service.bindToFolder(folderId, propertySet);\r\n\r\nIt first I thought it had something to do with authorization. But then I found a little program `EwsEditor` at Github which works just fine.\r\n\r\nCould someone point me to what I am missing?\r\n\r\nWith all documentation I managed to cobble a lot of pieces together. My testing code:\r\n\r\n```\r\npackage test.ewstest;\r\n\r\nimport com.microsoft.aad.msal4j.ClientCredentialFactory;\r\nimport com.microsoft.aad.msal4j.ClientCredentialParameters;\r\nimport com.microsoft.aad.msal4j.ConfidentialClientApplication;\r\nimport java.io.File;\r\nimport java.io.FileInputStream;\r\nimport java.net.URI;\r\nimport java.util.Collections;\r\nimport java.util.Properties;\r\nimport microsoft.exchange.webservices.data.core.ExchangeService;\r\nimport microsoft.exchange.webservices.data.core.PropertySet;\r\nimport microsoft.exchange.webservices.data.core.enumeration.misc.ConnectingIdType;\r\nimport microsoft.exchange.webservices.data.core.enumeration.misc.ExchangeVersion;\r\nimport microsoft.exchange.webservices.data.core.enumeration.property.BasePropertySet;\r\nimport microsoft.exchange.webservices.data.core.enumeration.property.WellKnownFolderName;\r\nimport microsoft.exchange.webservices.data.core.enumeration.search.FolderTraversal;\r\nimport microsoft.exchange.webservices.data.core.service.schema.FolderSchema;\r\nimport microsoft.exchange.webservices.data.credential.TokenCredentials;\r\nimport microsoft.exchange.webservices.data.misc.ImpersonatedUserId;\r\nimport microsoft.exchange.webservices.data.property.complex.FolderId;\r\nimport microsoft.exchange.webservices.data.property.complex.Mailbox;\r\nimport microsoft.exchange.webservices.data.search.FindFoldersResults;\r\nimport microsoft.exchange.webservices.data.search.FolderView;\r\nimport microsoft.exchange.webservices.data.core.service.folder.Folder;\r\nimport org.apache.log4j.LogManager;\r\nimport org.apache.log4j.Logger;\r\n\r\npublic class EwsTest {\r\n\r\n    static String exchangeUser;\r\n    static String exchangeTenant;\r\n    static String exchangeClientId;\r\n    static String exchangeClientSecret;\r\n    \r\n    static ExchangeService service;\r\n    static Logger logger = LogManager.getLogger(EwsTest.class.getName());\r\n    static Properties properties = new Properties();\r\n    \r\n    public static void main(String[] args) {\r\n        try {\r\n            properties.load(new FileInputStream(System.getProperty(&quot;user.dir&quot;) + File.separator + &quot;EwsTest.properties&quot;));\r\n            exchangeUser = properties.getProperty(&quot;user&quot;);\r\n            exchangeTenant = properties.getProperty(&quot;tenant&quot;);\r\n            exchangeClientId = properties.getProperty(&quot;client&quot;);\r\n            exchangeClientSecret = properties.getProperty(&quot;secret&quot;);\r\n\r\n            createConnection();\r\n            displayFolders();\r\n        }\r\n        catch (Exception ex) {\r\n            logger.error(ex.getMessage(), ex);\r\n        }\r\n    \r\n    }\r\n    \r\n    static void createConnection() throws Exception {\r\n        service = new ExchangeService(ExchangeVersion.Exchange2010_SP2);\r\n        service.getHttpHeaders().put(&quot;X-AnchorMailbox&quot;,exchangeUser);\r\n        service.getHttpHeaders().put(&quot;X-PublicFolderMailbox&quot;,exchangeUser);\r\n        service.setCredentials(new TokenCredentials(createOauthToken()));\r\n        service.setImpersonatedUserId(new ImpersonatedUserId(ConnectingIdType.SmtpAddress, exchangeUser));\r\n        service.setUrl(new URI(&quot;https://outlook.office365.com/EWS/Exchange.asmx&quot;));\r\n        }\r\n\r\n    static String createOauthToken() throws Exception {\r\n        ConfidentialClientApplication app = ConfidentialClientApplication.builder(\r\n                exchangeClientId,\r\n                ClientCredentialFactory.createFromSecret(exchangeClientSecret))\r\n                .authority(&quot;https://login.microsoftonline.com/&quot; + exchangeTenant + &quot;/&quot;)\r\n                .build();\t\t     \r\n        ClientCredentialParameters clientCredentialParam = ClientCredentialParameters.builder(\r\n                Collections.singleton(&quot;https://outlook.office365.com/.default&quot;))\r\n                .build();\r\n        return app.acquireToken(clientCredentialParam).get().accessToken();\r\n    }\r\n\r\n    static void displayFolders() throws Exception {\r\n        PropertySet propertySet = new PropertySet(BasePropertySet.IdOnly);\r\n        propertySet.add(FolderSchema.DisplayName);\r\n                \r\n        FolderView view = new FolderView(100);\r\n        view.setPropertySet(propertySet);\r\n        view.setTraversal(FolderTraversal.Deep);\r\n\r\n        Mailbox mailbox = new Mailbox(exchangeUser);\r\n        \r\n        FolderId folderId = new FolderId(WellKnownFolderName.MsgFolderRoot, mailbox);\r\n        \r\n        logger.info(&quot;service.bindToFolder&quot;);\r\n        Folder folder = service.bindToFolder(folderId, propertySet);\r\n        logger.info(&quot;Ok&quot;);\r\n\r\n        logger.info(&quot;service.findFolders&quot;);\r\n        FindFoldersResults findFolderResults = service.findFolders(folder.getId(), view);\r\n        logger.info(&quot;Ok&quot;);\r\n\r\n        // find specific folder\r\n        for (Folder f : findFolderResults)\r\n        {\r\n            logger.info(f.getId());\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAnd my Netbeans maven dependencies:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;groupId&gt;test&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;EwsTest&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;log4j-1.2-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.11.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.xml.ws&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxws-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;msal4j&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.13.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t &lt;dependency&gt;\r\n\t  &lt;groupId&gt;com.microsoft.ews-java-api&lt;/groupId&gt;\r\n\t  &lt;artifactId&gt;ews-java-api&lt;/artifactId&gt;\r\n\t  &lt;version&gt;2.0&lt;/version&gt;\r\n\t &lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;maven.compiler.source&gt;19&lt;/maven.compiler.source&gt;\r\n\t\t&lt;maven.compiler.target&gt;19&lt;/maven.compiler.target&gt;\r\n\t\t&lt;exec.mainClass&gt;test.ewstest.EwsTest&lt;/exec.mainClass&gt;\r\n\t&lt;/properties&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nI created my EwsTest.properties file and filled it with the keys:\r\n```\r\nuser=example@example.nl\r\nclient=9999x9xx-xx99-x99x-xx99-xx99x9999x9x\r\ntenant=x99x9999-xx99-9999-xx99-9999xx9x9999\r\nsecret=XXxxX!9xx-...-\r\n```\r\n\r\nWhen I run the program, I see that the connection is being build and a token is being exchanged. But it crashes at the statement:\r\n\r\nFolder folder = service.bindToFolder(folderId, propertySet);\r\n\r\nWith an error: The request failed. An internal server error occurred. The operation failed.\r\n\r\n\r\n```\r\nmicrosoft.exchange.webservices.data.core.exception.service.remote.ServiceRequestException: The request failed. An internal server error occurred. The operation failed.\r\n\tat microsoft.exchange.webservices.data.core.request.SimpleServiceRequestBase.internalExecute(SimpleServiceRequestBase.java:74) ~[ews-java-api-2.0.jar:?]\r\n\tat microsoft.exchange.webservices.data.core.request.MultiResponseServiceRequest.execute(MultiResponseServiceRequest.java:158) ~[ews-java-api-2.0.jar:?]\r\n\tat microsoft.exchange.webservices.data.core.ExchangeService.bindToFolder(ExchangeService.java:504) ~[ews-java-api-2.0.jar:?]\r\n\tat test.ewstest.EwsTest.displayFolders(EwsTest.java:91) ~[classes/:?]\r\n\tat test.ewstest.EwsTest.main(EwsTest.java:49) [classes/:?]\r\nCaused by: microsoft.exchange.webservices.data.core.exception.service.remote.ServiceResponseException: An internal server error occurred. The operation failed.\r\n\tat microsoft.exchange.webservices.data.core.request.ServiceRequestBase.processWebException(ServiceRequestBase.java:548) ~[ews-java-api-2.0.jar:?]\r\n\tat microsoft.exchange.webservices.data.core.request.ServiceRequestBase.validateAndEmitRequest(ServiceRequestBase.java:641) ~[ews-java-api-2.0.jar:?]\r\n\tat microsoft.exchange.webservices.data.core.request.SimpleServiceRequestBase.internalExecute(SimpleServiceRequestBase.java:62) ~[ews-java-api-2.0.jar:?]\r\n\t... 4 more\r\n```\r\n\r\nI tried several folders like inbox and root but they all give that same error: \r\n```\r\n        FolderId folderId = new FolderId(WellKnownFolderName.MsgFolderRoot, mailbox);\r\n\r\n```\r\n\r\nBut since EwsEditor seems to work, I&#39;m clearly missing something. I tried looking at the code of EwsEditor but that&#39;s C# which is even harder to understand for me.","title":"Anyone any idea why Exchange Web Services (EWS) from Microsoft gives me an (500) &quot;An internal server error occurred&quot; on bindToFolder?","body":"<p>As a RPGLE programmer I was asked to convert an IMAP mail poller to EWS. So I'm a bit out of my comfort zone.</p>\n<p>With all documentation I managed to cobble a lot of pieces together, but it looks like I'm missing a vital piece because the program keep crashing at Folder folder = service.bindToFolder(folderId, propertySet);</p>\n<p>It first I thought it had something to do with authorization. But then I found a little program <code>EwsEditor</code> at Github which works just fine.</p>\n<p>Could someone point me to what I am missing?</p>\n<p>With all documentation I managed to cobble a lot of pieces together. My testing code:</p>\n<pre><code>package test.ewstest;\n\nimport com.microsoft.aad.msal4j.ClientCredentialFactory;\nimport com.microsoft.aad.msal4j.ClientCredentialParameters;\nimport com.microsoft.aad.msal4j.ConfidentialClientApplication;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.net.URI;\nimport java.util.Collections;\nimport java.util.Properties;\nimport microsoft.exchange.webservices.data.core.ExchangeService;\nimport microsoft.exchange.webservices.data.core.PropertySet;\nimport microsoft.exchange.webservices.data.core.enumeration.misc.ConnectingIdType;\nimport microsoft.exchange.webservices.data.core.enumeration.misc.ExchangeVersion;\nimport microsoft.exchange.webservices.data.core.enumeration.property.BasePropertySet;\nimport microsoft.exchange.webservices.data.core.enumeration.property.WellKnownFolderName;\nimport microsoft.exchange.webservices.data.core.enumeration.search.FolderTraversal;\nimport microsoft.exchange.webservices.data.core.service.schema.FolderSchema;\nimport microsoft.exchange.webservices.data.credential.TokenCredentials;\nimport microsoft.exchange.webservices.data.misc.ImpersonatedUserId;\nimport microsoft.exchange.webservices.data.property.complex.FolderId;\nimport microsoft.exchange.webservices.data.property.complex.Mailbox;\nimport microsoft.exchange.webservices.data.search.FindFoldersResults;\nimport microsoft.exchange.webservices.data.search.FolderView;\nimport microsoft.exchange.webservices.data.core.service.folder.Folder;\nimport org.apache.log4j.LogManager;\nimport org.apache.log4j.Logger;\n\npublic class EwsTest {\n\n    static String exchangeUser;\n    static String exchangeTenant;\n    static String exchangeClientId;\n    static String exchangeClientSecret;\n    \n    static ExchangeService service;\n    static Logger logger = LogManager.getLogger(EwsTest.class.getName());\n    static Properties properties = new Properties();\n    \n    public static void main(String[] args) {\n        try {\n            properties.load(new FileInputStream(System.getProperty(&quot;user.dir&quot;) + File.separator + &quot;EwsTest.properties&quot;));\n            exchangeUser = properties.getProperty(&quot;user&quot;);\n            exchangeTenant = properties.getProperty(&quot;tenant&quot;);\n            exchangeClientId = properties.getProperty(&quot;client&quot;);\n            exchangeClientSecret = properties.getProperty(&quot;secret&quot;);\n\n            createConnection();\n            displayFolders();\n        }\n        catch (Exception ex) {\n            logger.error(ex.getMessage(), ex);\n        }\n    \n    }\n    \n    static void createConnection() throws Exception {\n        service = new ExchangeService(ExchangeVersion.Exchange2010_SP2);\n        service.getHttpHeaders().put(&quot;X-AnchorMailbox&quot;,exchangeUser);\n        service.getHttpHeaders().put(&quot;X-PublicFolderMailbox&quot;,exchangeUser);\n        service.setCredentials(new TokenCredentials(createOauthToken()));\n        service.setImpersonatedUserId(new ImpersonatedUserId(ConnectingIdType.SmtpAddress, exchangeUser));\n        service.setUrl(new URI(&quot;https://outlook.office365.com/EWS/Exchange.asmx&quot;));\n        }\n\n    static String createOauthToken() throws Exception {\n        ConfidentialClientApplication app = ConfidentialClientApplication.builder(\n                exchangeClientId,\n                ClientCredentialFactory.createFromSecret(exchangeClientSecret))\n                .authority(&quot;https://login.microsoftonline.com/&quot; + exchangeTenant + &quot;/&quot;)\n                .build();            \n        ClientCredentialParameters clientCredentialParam = ClientCredentialParameters.builder(\n                Collections.singleton(&quot;https://outlook.office365.com/.default&quot;))\n                .build();\n        return app.acquireToken(clientCredentialParam).get().accessToken();\n    }\n\n    static void displayFolders() throws Exception {\n        PropertySet propertySet = new PropertySet(BasePropertySet.IdOnly);\n        propertySet.add(FolderSchema.DisplayName);\n                \n        FolderView view = new FolderView(100);\n        view.setPropertySet(propertySet);\n        view.setTraversal(FolderTraversal.Deep);\n\n        Mailbox mailbox = new Mailbox(exchangeUser);\n        \n        FolderId folderId = new FolderId(WellKnownFolderName.MsgFolderRoot, mailbox);\n        \n        logger.info(&quot;service.bindToFolder&quot;);\n        Folder folder = service.bindToFolder(folderId, propertySet);\n        logger.info(&quot;Ok&quot;);\n\n        logger.info(&quot;service.findFolders&quot;);\n        FindFoldersResults findFolderResults = service.findFolders(folder.getId(), view);\n        logger.info(&quot;Ok&quot;);\n\n        // find specific folder\n        for (Folder f : findFolderResults)\n        {\n            logger.info(f.getId());\n        }\n    }\n}\n</code></pre>\n<p>And my Netbeans maven dependencies:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;test&lt;/groupId&gt;\n    &lt;artifactId&gt;EwsTest&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-1.2-api&lt;/artifactId&gt;\n            &lt;version&gt;2.11.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.ws&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxws-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;\n            &lt;artifactId&gt;msal4j&lt;/artifactId&gt;\n            &lt;version&gt;1.13.3&lt;/version&gt;\n        &lt;/dependency&gt;\n     &lt;dependency&gt;\n      &lt;groupId&gt;com.microsoft.ews-java-api&lt;/groupId&gt;\n      &lt;artifactId&gt;ews-java-api&lt;/artifactId&gt;\n      &lt;version&gt;2.0&lt;/version&gt;\n     &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.source&gt;19&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;19&lt;/maven.compiler.target&gt;\n        &lt;exec.mainClass&gt;test.ewstest.EwsTest&lt;/exec.mainClass&gt;\n    &lt;/properties&gt;\n&lt;/project&gt;\n</code></pre>\n<p>I created my EwsTest.properties file and filled it with the keys:</p>\n<pre><code>user=example@example.nl\nclient=9999x9xx-xx99-x99x-xx99-xx99x9999x9x\ntenant=x99x9999-xx99-9999-xx99-9999xx9x9999\nsecret=XXxxX!9xx-...-\n</code></pre>\n<p>When I run the program, I see that the connection is being build and a token is being exchanged. But it crashes at the statement:</p>\n<p>Folder folder = service.bindToFolder(folderId, propertySet);</p>\n<p>With an error: The request failed. An internal server error occurred. The operation failed.</p>\n<pre><code>microsoft.exchange.webservices.data.core.exception.service.remote.ServiceRequestException: The request failed. An internal server error occurred. The operation failed.\n    at microsoft.exchange.webservices.data.core.request.SimpleServiceRequestBase.internalExecute(SimpleServiceRequestBase.java:74) ~[ews-java-api-2.0.jar:?]\n    at microsoft.exchange.webservices.data.core.request.MultiResponseServiceRequest.execute(MultiResponseServiceRequest.java:158) ~[ews-java-api-2.0.jar:?]\n    at microsoft.exchange.webservices.data.core.ExchangeService.bindToFolder(ExchangeService.java:504) ~[ews-java-api-2.0.jar:?]\n    at test.ewstest.EwsTest.displayFolders(EwsTest.java:91) ~[classes/:?]\n    at test.ewstest.EwsTest.main(EwsTest.java:49) [classes/:?]\nCaused by: microsoft.exchange.webservices.data.core.exception.service.remote.ServiceResponseException: An internal server error occurred. The operation failed.\n    at microsoft.exchange.webservices.data.core.request.ServiceRequestBase.processWebException(ServiceRequestBase.java:548) ~[ews-java-api-2.0.jar:?]\n    at microsoft.exchange.webservices.data.core.request.ServiceRequestBase.validateAndEmitRequest(ServiceRequestBase.java:641) ~[ews-java-api-2.0.jar:?]\n    at microsoft.exchange.webservices.data.core.request.SimpleServiceRequestBase.internalExecute(SimpleServiceRequestBase.java:62) ~[ews-java-api-2.0.jar:?]\n    ... 4 more\n</code></pre>\n<p>I tried several folders like inbox and root but they all give that same error:</p>\n<pre><code>        FolderId folderId = new FolderId(WellKnownFolderName.MsgFolderRoot, mailbox);\n\n</code></pre>\n<p>But since EwsEditor seems to work, I'm clearly missing something. I tried looking at the code of EwsEditor but that's C# which is even harder to understand for me.</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1667896017,"post_id":74357601,"comment_id":131270628,"body_markdown":"Implement this with a filter and not a `HandlerInterceptor`. Why because you need to wrap your response with a caching wrapper like the `ContentCachingResponseWrapper` from Spring so you can read the response twice.","body":"Implement this with a filter and not a <code>HandlerInterceptor</code>. Why because you need to wrap your response with a caching wrapper like the <code>ContentCachingResponseWrapper</code> from Spring so you can read the response twice."},{"owner":{"account_id":10693447,"reputation":878,"user_id":7871511,"display_name":"Rohit Agarwal"},"score":0,"creation_date":1667896769,"post_id":74357601,"comment_id":131270906,"body_markdown":"You can use HttpServletResponse to get response headers.","body":"You can use HttpServletResponse to get response headers."}],"owner":{"account_id":26864303,"reputation":1,"user_id":20447304,"display_name":"Weixing Wang"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":308,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667895597,"creation_date":1667895597,"question_id":74357601,"body_markdown":"I want to use `HandlerInterceptor` to achive idempotent check, and if the request pass the intercepter, cache the response body which retrun from controller, and the key for cache is a token which from request header. but now, i can get request header(it contains the key for cache) in &#39;postHandle&#39;, but can&#39;t get response body(the value for cache) in this method. is there any way to achieve it?\r\n\r\nhere is my code:\r\n\r\n```java\r\n@Target(ElementType.METHOD)\r\n@Retention(RetentionPolicy.RUNTIME)\r\npublic @interface Idempotent {\r\n}\r\n```\r\n\r\n```java\r\npublic class IdempotentInterceptor implements HandlerInterceptor {\r\n    @Autowired\r\n    private TokenService tokenService;\r\n    @Autowired\r\n    private RedisCache redisCache;\r\n    @Value(&quot;${idempotent.tokenName}&quot;)\r\n    private String TOKEN_NAME;\r\n    @Value(&quot;${idempotent.respCachePrefix}&quot;)\r\n    private String prefix;\r\n\r\n    @Override\r\n    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {\r\n        if (!(handler instanceof HandlerMethod)) {\r\n            return true;\r\n        }\r\n        HandlerMethod handlerMethod = (HandlerMethod) handler;\r\n        Method method = handlerMethod.getMethod();\r\n        Idempotent methodAnnotation = method.getAnnotation(Idempotent.class);\r\n        if (methodAnnotation != null) {\r\n            if (!tokenService.checkIdempotent(request)) {\r\n                String token = request.getHeader(TOKEN_NAME);\r\n                log.info(&quot;duplicate request, IdempotentToken: {}&quot;, token);\r\n                Object result = redisCache.get(prefix + token);\r\n                response.setCharacterEncoding(&quot;UTF-8&quot;);\r\n                response.setContentType(&quot;application/json&quot;);\r\n                if (result != null) {\r\n                    log.info(&quot;{} exist result, return the cached result: {}&quot;, token, result);\r\n                    response.getWriter().print(JSON.toJSONString(result));\r\n                } else {\r\n                    response.getWriter().print(JSON.toJSONString(new ResultDTO&lt;&gt;(ResultDTO.FAIL_CODE, &quot;invalid request, please check idempotent token.&quot;)));\r\n                }\r\n                response.getWriter().flush();\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception {\r\n        if (!(handler instanceof HandlerMethod)) {\r\n            return;\r\n        }\r\n        HandlerMethod handlerMethod = (HandlerMethod) handler;\r\n        Method method = handlerMethod.getMethod();\r\n        Idempotent methodAnnotation = method.getAnnotation(Idempotent.class);\r\n        if (methodAnnotation != null) {\r\n            // I want to cache the response body here, but can&#39;t get infos...\r\n            redisCache.set(prefix + request.getHeader(TOKEN_NAME), &quot;&quot;, 600L);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n```java\r\n@GetMapping(&quot;/test/{data}&quot;)\r\n@Idempotent\r\npublic ResultDTO test(@PathVariable(&quot;data&quot;) String data) {\r\n    return new ResultDTO(data);\r\n}\r\n```\r\n\r\nin a word, i want to get both request headers and response body in one method","title":"How to get response body and request header at the same time in SpringBoot?","body":"<p>I want to use <code>HandlerInterceptor</code> to achive idempotent check, and if the request pass the intercepter, cache the response body which retrun from controller, and the key for cache is a token which from request header. but now, i can get request header(it contains the key for cache) in 'postHandle', but can't get response body(the value for cache) in this method. is there any way to achieve it?</p>\n<p>here is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface Idempotent {\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class IdempotentInterceptor implements HandlerInterceptor {\n    @Autowired\n    private TokenService tokenService;\n    @Autowired\n    private RedisCache redisCache;\n    @Value(&quot;${idempotent.tokenName}&quot;)\n    private String TOKEN_NAME;\n    @Value(&quot;${idempotent.respCachePrefix}&quot;)\n    private String prefix;\n\n    @Override\n    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {\n        if (!(handler instanceof HandlerMethod)) {\n            return true;\n        }\n        HandlerMethod handlerMethod = (HandlerMethod) handler;\n        Method method = handlerMethod.getMethod();\n        Idempotent methodAnnotation = method.getAnnotation(Idempotent.class);\n        if (methodAnnotation != null) {\n            if (!tokenService.checkIdempotent(request)) {\n                String token = request.getHeader(TOKEN_NAME);\n                log.info(&quot;duplicate request, IdempotentToken: {}&quot;, token);\n                Object result = redisCache.get(prefix + token);\n                response.setCharacterEncoding(&quot;UTF-8&quot;);\n                response.setContentType(&quot;application/json&quot;);\n                if (result != null) {\n                    log.info(&quot;{} exist result, return the cached result: {}&quot;, token, result);\n                    response.getWriter().print(JSON.toJSONString(result));\n                } else {\n                    response.getWriter().print(JSON.toJSONString(new ResultDTO&lt;&gt;(ResultDTO.FAIL_CODE, &quot;invalid request, please check idempotent token.&quot;)));\n                }\n                response.getWriter().flush();\n                return false;\n            }\n            return true;\n        }\n        return true;\n    }\n\n    @Override\n    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception {\n        if (!(handler instanceof HandlerMethod)) {\n            return;\n        }\n        HandlerMethod handlerMethod = (HandlerMethod) handler;\n        Method method = handlerMethod.getMethod();\n        Idempotent methodAnnotation = method.getAnnotation(Idempotent.class);\n        if (methodAnnotation != null) {\n            // I want to cache the response body here, but can't get infos...\n            redisCache.set(prefix + request.getHeader(TOKEN_NAME), &quot;&quot;, 600L);\n        }\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;/test/{data}&quot;)\n@Idempotent\npublic ResultDTO test(@PathVariable(&quot;data&quot;) String data) {\n    return new ResultDTO(data);\n}\n</code></pre>\n<p>in a word, i want to get both request headers and response body in one method</p>\n"},{"tags":["java","multithreading","swing"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1667848731,"post_id":74351783,"comment_id":131261360,"body_markdown":"Use `javax.swing.timer`, which manages the thread for you.","body":"Use <code>javax.swing.timer</code>, which manages the thread for you."},{"owner":{"account_id":21501507,"reputation":25,"user_id":15845644,"display_name":"Umutcan Adg&#252;zel"},"score":0,"creation_date":1667849343,"post_id":74351783,"comment_id":131261565,"body_markdown":"how I will use it is it with action listener and if else if","body":"how I will use it is it with action listener and if else if"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1667851044,"post_id":74351783,"comment_id":131262123,"body_markdown":"Check out: https://stackoverflow.com/a/54028681/131872 for an example that uses a Swing Timer to animation the movement of circles. Also demonstrates a better way to paint the circles from an ArrayList.","body":"Check out: <a href=\"https://stackoverflow.com/a/54028681/131872\">stackoverflow.com/a/54028681/131872</a> for an example that uses a Swing Timer to animation the movement of circles. Also demonstrates a better way to paint the circles from an ArrayList."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1667854174,"post_id":74351783,"comment_id":131262896,"body_markdown":"More threads doesn&#39;t always mean more work done.  In this kind of context you could end up with all sorts of weird issues","body":"More threads doesn&#39;t always mean more work done.  In this kind of context you could end up with all sorts of weird issues"}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1667895489,"creation_date":1667855402,"answer_id":74352977,"question_id":74351783,"body_markdown":"Swing is not thread safe.  This means that you should not be updating the UI  or updating any state the UI relies on from outside the context of the Event Dispatching Thread.\r\n\r\nSwing is single threaded.  This means that you should not be performing any long running or blocking operations from within the context of the Event Dispatching Thread.\r\n\r\nSee [Concurrency in Swing](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html) for more details and [How to Use Swing Timers](https://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html) for a common solution.\r\n\r\n&gt; I dont know where I should place to Thread starters\r\n\r\nThere&#39;s no reliable method for determining when a component is made visible on the screen (at least in a meaningful manner).  You could look at [`WindowListener`](https://docs.oracle.com/en/java/javase/16/docs/api/java.desktop/java/awt/event/WindowListener.html) and [`ComponentListener`](https://docs.oracle.com/en/java/javase/16/docs/api/java.desktop/java/awt/event/ComponentListener.html) but I&#39;ve found them not be to overly reliable in this context.\r\n\r\nOne trick I do tend to use is overriding `add/removeNotify`, while this won&#39;t tell you when the component is made visible on the screen, it does give you a good indicator of when the component might come into a &quot;usable&quot; state.\r\n\r\nThe following makes use of a simple Swing `Timer` and fixes your movement logic (the circle can&#39;t be simultaneously less then and greater then the bounding box)\r\n\r\n    import java.awt.Color;\r\n    import java.awt.Dimension;\r\n    import java.awt.EventQueue;\r\n    import java.awt.Graphics;\r\n    import java.awt.Graphics2D;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.Timer;\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            new Main();\r\n        }\r\n\r\n        public Main() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    JFrame frame = new JFrame();\r\n                    frame.add(new TestPane());\r\n                    frame.pack();\r\n                    frame.setLocationRelativeTo(null);\r\n                    frame.setVisible(true);\r\n                }\r\n            });\r\n        }\r\n\r\n        public class TestPane extends JPanel {\r\n\r\n            private List&lt;Circle&gt; circles = new ArrayList&lt;&gt;(5);        \r\n            private Timer timer;\r\n\r\n            public TestPane() {\r\n                circles.add(new Circle(100, 100, 2, 2, new int[]{100, 100, 150, 150}, Color.blue));\r\n                circles.add(new Circle(150, 150, -2, 0, new int[]{50, 150, 150, 150}, Color.red));\r\n                circles.add(new Circle(50, 150, 2, -2, new int[]{100, 10, 150, 150}, Color.green));\r\n            }\r\n\r\n            @Override\r\n            public Dimension getPreferredSize() {\r\n                return new Dimension(300, 300);\r\n            }\r\n\r\n            @Override\r\n            public void addNotify() {\r\n                super.addNotify();\r\n                if (timer != null) {\r\n                    timer.stop();\r\n                }\r\n                timer = new Timer(5, new ActionListener() {\r\n                    @Override\r\n                    public void actionPerformed(ActionEvent e) {\r\n                        for (Circle circle : circles) {\r\n                            circle.tick();\r\n                        }\r\n                        repaint();\r\n                    }\r\n                });\r\n                timer.start();\r\n            }\r\n\r\n            @Override\r\n            public void removeNotify() {\r\n                super.removeNotify();\r\n                if (timer != null) {\r\n                    timer.stop();\r\n                }\r\n                timer = null;\r\n            }\r\n\r\n            @Override\r\n            protected void paintComponent(Graphics g) {\r\n                super.paintComponent(g);\r\n                Graphics2D g2d = (Graphics2D) g.create();\r\n                for (Circle circle : circles) {\r\n                    g2d.setColor(circle.getColor());\r\n                    g2d.fillOval(circle.getX(), circle.getY(), 10, 10);\r\n                }\r\n                g2d.dispose();\r\n            }\r\n\r\n        }\r\n\r\n        public class Circle {\r\n            private int x, y;\r\n            private int xs, ys;\r\n\r\n            private Color color;\r\n            private int[] boundries;\r\n\r\n            public Circle(int x, int y, int xs, int ys, int[] boundries, Color color) {\r\n                this.x = x;\r\n                this.y = y;\r\n                this.xs = xs;\r\n                this.ys = ys;\r\n                this.boundries = boundries;  //kordinatlar ve buyukluk \r\n                this.color = color;\r\n            }\r\n\r\n            public void tick() {\r\n                move();\r\n            }\r\n\r\n            protected void move() {\r\n                updateSpeed();\r\n\r\n                this.x += this.xs;  //xs art kordinat hz\r\n                this.y += this.ys;\r\n            }\r\n\r\n            protected void updateSpeed() {\r\n                if (x &lt;= boundries[0]) {\r\n                    xs *= -1;\r\n                    x = boundries[0];\r\n                } else if (x &gt;= boundries[2]) {\r\n                    xs *= -1;\r\n                    x = boundries[2];\r\n                }\r\n                if (y &lt;= boundries[1]) {\r\n                    ys *= -1;\r\n                    y = boundries[1];\r\n                } else if (y &gt;= boundries[3]) {\r\n                    ys *= -1;\r\n                    y = boundries[2];\r\n                }\r\n            }\r\n\r\n            public int getX() {\r\n                return x;\r\n            }\r\n\r\n            public Color getColor() {\r\n                return color;\r\n            }\r\n\r\n            public int getY() {\r\n                return y;\r\n            }\r\n        }\r\n    }\r\n\r\nYou could then extend on this by adding `start` and `stop` methods to the `TestPane` and use a `WindowListener` to further trigger actions based on the window state.","title":"Java Thread Swing","body":"<p>Swing is not thread safe.  This means that you should not be updating the UI  or updating any state the UI relies on from outside the context of the Event Dispatching Thread.</p>\n<p>Swing is single threaded.  This means that you should not be performing any long running or blocking operations from within the context of the Event Dispatching Thread.</p>\n<p>See <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html\" rel=\"nofollow noreferrer\">Concurrency in Swing</a> for more details and <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html\" rel=\"nofollow noreferrer\">How to Use Swing Timers</a> for a common solution.</p>\n<blockquote>\n<p>I dont know where I should place to Thread starters</p>\n</blockquote>\n<p>There's no reliable method for determining when a component is made visible on the screen (at least in a meaningful manner).  You could look at <a href=\"https://docs.oracle.com/en/java/javase/16/docs/api/java.desktop/java/awt/event/WindowListener.html\" rel=\"nofollow noreferrer\"><code>WindowListener</code></a> and <a href=\"https://docs.oracle.com/en/java/javase/16/docs/api/java.desktop/java/awt/event/ComponentListener.html\" rel=\"nofollow noreferrer\"><code>ComponentListener</code></a> but I've found them not be to overly reliable in this context.</p>\n<p>One trick I do tend to use is overriding <code>add/removeNotify</code>, while this won't tell you when the component is made visible on the screen, it does give you a good indicator of when the component might come into a &quot;usable&quot; state.</p>\n<p>The following makes use of a simple Swing <code>Timer</code> and fixes your movement logic (the circle can't be simultaneously less then and greater then the bounding box)</p>\n<pre><code>import java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.EventQueue;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.Timer;\n\npublic class Main {\n    public static void main(String[] args) {\n        new Main();\n    }\n\n    public Main() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                JFrame frame = new JFrame();\n                frame.add(new TestPane());\n                frame.pack();\n                frame.setLocationRelativeTo(null);\n                frame.setVisible(true);\n            }\n        });\n    }\n\n    public class TestPane extends JPanel {\n\n        private List&lt;Circle&gt; circles = new ArrayList&lt;&gt;(5);        \n        private Timer timer;\n\n        public TestPane() {\n            circles.add(new Circle(100, 100, 2, 2, new int[]{100, 100, 150, 150}, Color.blue));\n            circles.add(new Circle(150, 150, -2, 0, new int[]{50, 150, 150, 150}, Color.red));\n            circles.add(new Circle(50, 150, 2, -2, new int[]{100, 10, 150, 150}, Color.green));\n        }\n\n        @Override\n        public Dimension getPreferredSize() {\n            return new Dimension(300, 300);\n        }\n\n        @Override\n        public void addNotify() {\n            super.addNotify();\n            if (timer != null) {\n                timer.stop();\n            }\n            timer = new Timer(5, new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    for (Circle circle : circles) {\n                        circle.tick();\n                    }\n                    repaint();\n                }\n            });\n            timer.start();\n        }\n\n        @Override\n        public void removeNotify() {\n            super.removeNotify();\n            if (timer != null) {\n                timer.stop();\n            }\n            timer = null;\n        }\n\n        @Override\n        protected void paintComponent(Graphics g) {\n            super.paintComponent(g);\n            Graphics2D g2d = (Graphics2D) g.create();\n            for (Circle circle : circles) {\n                g2d.setColor(circle.getColor());\n                g2d.fillOval(circle.getX(), circle.getY(), 10, 10);\n            }\n            g2d.dispose();\n        }\n\n    }\n\n    public class Circle {\n        private int x, y;\n        private int xs, ys;\n\n        private Color color;\n        private int[] boundries;\n\n        public Circle(int x, int y, int xs, int ys, int[] boundries, Color color) {\n            this.x = x;\n            this.y = y;\n            this.xs = xs;\n            this.ys = ys;\n            this.boundries = boundries;  //kordinatlar ve buyukluk \n            this.color = color;\n        }\n\n        public void tick() {\n            move();\n        }\n\n        protected void move() {\n            updateSpeed();\n\n            this.x += this.xs;  //xs art kordinat hz\n            this.y += this.ys;\n        }\n\n        protected void updateSpeed() {\n            if (x &lt;= boundries[0]) {\n                xs *= -1;\n                x = boundries[0];\n            } else if (x &gt;= boundries[2]) {\n                xs *= -1;\n                x = boundries[2];\n            }\n            if (y &lt;= boundries[1]) {\n                ys *= -1;\n                y = boundries[1];\n            } else if (y &gt;= boundries[3]) {\n                ys *= -1;\n                y = boundries[2];\n            }\n        }\n\n        public int getX() {\n            return x;\n        }\n\n        public Color getColor() {\n            return color;\n        }\n\n        public int getY() {\n            return y;\n        }\n    }\n}\n</code></pre>\n<p>You could then extend on this by adding <code>start</code> and <code>stop</code> methods to the <code>TestPane</code> and use a <code>WindowListener</code> to further trigger actions based on the window state.</p>\n"}],"owner":{"account_id":21501507,"reputation":25,"user_id":15845644,"display_name":"Umutcan Adg&#252;zel"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74352977,"answer_count":1,"score":0,"last_activity_date":1667895489,"creation_date":1667848557,"question_id":74351783,"body_markdown":"Application class    \r\n```\r\nimport java.awt.Color;\r\nimport java.awt.Graphics;\r\n\r\nimport javax.swing.JFrame;\r\n\r\npublic class Application extends JFrame {\r\n\r\n\tpublic Circle c1,c2,c3;  \r\n\t\r\n\tpublic Application() {\r\n\t\tc1 =new Circle(100,100,2,2,new int[] {100,100,150,150},Color.blue);  \r\n\t\tc2 =new Circle(150,150,-2,0,new int[] {50,150,150,150},Color.red);\r\n\t\tc3 =new Circle(50,150,2,-2,new int[] {100,10,150,150},Color.green);\r\n\r\n\t\tsetSize(1000,1000);\t\r\n\t\tsetVisible(true);\r\n\t\tsetDefaultCloseOperation(EXIT_ON_CLOSE);\r\n\t}\r\n\r\n\tpublic void paint(Graphics g) {\r\n\t\tsuper.paint(g);\r\n\t\t\r\n\t\tg.setColor(c1.getColor());\r\n\t\tg.fillOval(c1.getX(), c1.getY(), 10, 10);\r\n\t\tg.setColor(c2.getColor());\r\n\t\tg.fillOval(c2.getX(), c2.getY(), 10, 10);\r\n\t\tg.setColor(c3.getColor());\r\n\t\tg.fillOval(c3.getX(), c3.getY(), 10, 10);\r\n\t}\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tApplication a = new Application();\t\t\r\n\t\tnew Application();  \t\t \r\n\t}\r\n}\r\n```\r\nCircle Class\r\n```\r\nimport java.awt.Color;\r\n    \r\npublic class Circle extends Thread {\r\n  \tprivate int x,y;\r\n   \tprivate int xs,ys;\r\n    \t\r\n   \tprivate Color color;\r\n   \tprivate int[] boundries;\r\n    \r\n    public  Circle(int x ,int y ,int xs,int ys,int[]boundries,Color color) {\r\n    \tthis.x=x;\r\n    \tthis.y=y;\r\n    \tthis.xs=xs;\r\n    \tthis.ys=ys;\r\n    \tthis.boundries=boundries;  //kordinatlar ve buyukluk \r\n    \tthis.color=color;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n    \twhile(true) {\r\n    \t\tmove();\r\n    \t}\r\n    }\r\n\r\n    public void move() {\r\n    \tUpdateSpeedInformation();\r\n    \t\r\n    \tthis.x +=this.xs;  //xs art kordinat hz\r\n    \tthis.y +=this.ys;\r\n    \ttry {\r\n    \t\tThread.sleep(100);\r\n    \t} catch (InterruptedException e) {\r\n    \t\t// TODO Auto-generated catch block\r\n    \t\te.printStackTrace();\r\n    \t}\r\n    }\r\n    \r\n    public void UpdateSpeedInformation() {\r\n        if(x&lt;boundries[0] &amp;&amp; x&gt;boundries[2]) {  //eger x 0.indexten k&#252;c&#252;k 2.indexten b&#252;y&#252;kse \r\n    \t    this.xs  *= -1;\r\n    \t    this.ys  *= -1;\r\n    \t    //kontrol operat&#246;r&#252; bu     \t\r\n        }\r\n        else if(y&lt;boundries[1] &amp;&amp; y&gt;boundries[3]) {\r\n    \t    this.xs=xs;\r\n    \t    this.ys=ys; //..\r\n        }\r\n    }\r\n    \t\r\n    public int getX() {\r\n    \treturn x ;\r\n    }\r\n    \r\n    public Color getColor() {\r\n    \treturn color;\r\n    }\r\n\r\n    public int getY() {\r\n    \treturn y;\t\r\n    }\r\n}\r\n```\r\nThese are the classes this three circle have to move but I dont know where I should place to Thread starters ask me if you need more information thanks \r\n\r\nThese are the classes this three circle have to move but I dont know where I should place to Thread starters ask me if you need more information thanks \r\n\r\nThese are the classes this three circle have to move but I dont know where I should place to Thread starters ask me if you need more information thanks ","title":"Java Thread Swing","body":"<p>Application class</p>\n<pre><code>import java.awt.Color;\nimport java.awt.Graphics;\n\nimport javax.swing.JFrame;\n\npublic class Application extends JFrame {\n\n    public Circle c1,c2,c3;  \n    \n    public Application() {\n        c1 =new Circle(100,100,2,2,new int[] {100,100,150,150},Color.blue);  \n        c2 =new Circle(150,150,-2,0,new int[] {50,150,150,150},Color.red);\n        c3 =new Circle(50,150,2,-2,new int[] {100,10,150,150},Color.green);\n\n        setSize(1000,1000); \n        setVisible(true);\n        setDefaultCloseOperation(EXIT_ON_CLOSE);\n    }\n\n    public void paint(Graphics g) {\n        super.paint(g);\n        \n        g.setColor(c1.getColor());\n        g.fillOval(c1.getX(), c1.getY(), 10, 10);\n        g.setColor(c2.getColor());\n        g.fillOval(c2.getX(), c2.getY(), 10, 10);\n        g.setColor(c3.getColor());\n        g.fillOval(c3.getX(), c3.getY(), 10, 10);\n    }\n    \n    public static void main(String[] args) {\n        Application a = new Application();      \n        new Application();           \n    }\n}\n</code></pre>\n<p>Circle Class</p>\n<pre><code>import java.awt.Color;\n    \npublic class Circle extends Thread {\n    private int x,y;\n    private int xs,ys;\n        \n    private Color color;\n    private int[] boundries;\n    \n    public  Circle(int x ,int y ,int xs,int ys,int[]boundries,Color color) {\n        this.x=x;\n        this.y=y;\n        this.xs=xs;\n        this.ys=ys;\n        this.boundries=boundries;  //kordinatlar ve buyukluk \n        this.color=color;\n    }\n\n    @Override\n    public void run() {\n        while(true) {\n            move();\n        }\n    }\n\n    public void move() {\n        UpdateSpeedInformation();\n        \n        this.x +=this.xs;  //xs art kordinat hz\n        this.y +=this.ys;\n        try {\n            Thread.sleep(100);\n        } catch (InterruptedException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n    }\n    \n    public void UpdateSpeedInformation() {\n        if(x&lt;boundries[0] &amp;&amp; x&gt;boundries[2]) {  //eger x 0.indexten kck 2.indexten bykse \n            this.xs  *= -1;\n            this.ys  *= -1;\n            //kontrol operatr bu      \n        }\n        else if(y&lt;boundries[1] &amp;&amp; y&gt;boundries[3]) {\n            this.xs=xs;\n            this.ys=ys; //..\n        }\n    }\n        \n    public int getX() {\n        return x ;\n    }\n    \n    public Color getColor() {\n        return color;\n    }\n\n    public int getY() {\n        return y;   \n    }\n}\n</code></pre>\n<p>These are the classes this three circle have to move but I dont know where I should place to Thread starters ask me if you need more information thanks</p>\n<p>These are the classes this three circle have to move but I dont know where I should place to Thread starters ask me if you need more information thanks</p>\n<p>These are the classes this three circle have to move but I dont know where I should place to Thread starters ask me if you need more information thanks</p>\n"},{"tags":["java","arrays","joptionpane"],"comments":[{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1667895376,"post_id":74357513,"comment_id":131270418,"body_markdown":"Does that mean you want to accept input values only if they are contained in `VALID_FUEL_TANKS`?","body":"Does that mean you want to accept input values only if they are contained in <code>VALID_FUEL_TANKS</code>?"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1667895440,"post_id":74357513,"comment_id":131270449,"body_markdown":"while(aNbrTanks &lt;= VALID_FUEL_TANKS){ what exactly do you think this does?","body":"while(aNbrTanks &lt;= VALID_FUEL_TANKS){ what exactly do you think this does?"}],"owner":{"account_id":26577691,"reputation":1,"user_id":20202796,"display_name":"Jared Castaneda"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667895102,"creation_date":1667895102,"question_id":74357513,"body_markdown":"I need the values 2,4,8,10,15,20 when I insert it but any other number I don&#39;t. This is what I came up with but it doesn&#39;t work.\r\n\r\n```\r\nint [] VALID_FUEL_TANKS = {2,4,8,10,15,20};\r\n        int aNbrTanks = Integer.parseInt(JOptionPane.showInputDialog(&quot;Enter the number of Tanks&quot;));\r\n        while(aNbrTanks &lt;= VALID_FUEL_TANKS){\r\n            aNbrTanks = Integer.parseInt(JOptionPane.showInputDialog(&quot;valid number of Tanks&quot;));\r\n        }\r\n```\r\n\r\n\r\nI got the between certain number right but I&#39;m trying to use arrays with JOption.\r\n```\r\nint aNbrVehicles = Integer.parseInt(JOptionPane.showInputDialog(&quot;Enter the number of Vehicles&quot;));\r\n        while(aNbrVehicles &lt; 1  || aNbrVehicles &gt; 10 ){\r\n            aNbrVehicles = Integer.parseInt(JOptionPane.showInputDialog(&quot;valid number of Vehicles&quot;));\r\n        }\r\n        int [] VALID_FUEL_TANKS = {2,4,8,10,15,20};\r\n        int aNbrTanks = Integer.parseInt(JOptionPane.showInputDialog(&quot;Enter the number of Tanks&quot;));\r\n        while(aNbrTanks &lt;= VALID_FUEL_TANKS){\r\n            aNbrTanks = Integer.parseInt(JOptionPane.showInputDialog(&quot;valid number of Tanks&quot;));\r\n        }\r\n```\r\n","title":"Trying to use arrays while a int statement in a while loop","body":"<p>I need the values 2,4,8,10,15,20 when I insert it but any other number I don't. This is what I came up with but it doesn't work.</p>\n<pre><code>int [] VALID_FUEL_TANKS = {2,4,8,10,15,20};\n        int aNbrTanks = Integer.parseInt(JOptionPane.showInputDialog(&quot;Enter the number of Tanks&quot;));\n        while(aNbrTanks &lt;= VALID_FUEL_TANKS){\n            aNbrTanks = Integer.parseInt(JOptionPane.showInputDialog(&quot;valid number of Tanks&quot;));\n        }\n</code></pre>\n<p>I got the between certain number right but I'm trying to use arrays with JOption.</p>\n<pre><code>int aNbrVehicles = Integer.parseInt(JOptionPane.showInputDialog(&quot;Enter the number of Vehicles&quot;));\n        while(aNbrVehicles &lt; 1  || aNbrVehicles &gt; 10 ){\n            aNbrVehicles = Integer.parseInt(JOptionPane.showInputDialog(&quot;valid number of Vehicles&quot;));\n        }\n        int [] VALID_FUEL_TANKS = {2,4,8,10,15,20};\n        int aNbrTanks = Integer.parseInt(JOptionPane.showInputDialog(&quot;Enter the number of Tanks&quot;));\n        while(aNbrTanks &lt;= VALID_FUEL_TANKS){\n            aNbrTanks = Integer.parseInt(JOptionPane.showInputDialog(&quot;valid number of Tanks&quot;));\n        }\n</code></pre>\n"},{"tags":["java","xml","xml-parsing","domparser"],"answers":[{"comments":[{"owner":{"account_id":4777108,"reputation":89,"user_id":3859913,"display_name":"Oasis001"},"score":0,"creation_date":1667502698,"post_id":36004249,"comment_id":131188032,"body_markdown":"SAXReader seems to be a lot cleaner, but it  doesn&#39;t seem to work for me with the namespace in the xml. If I remove the namespace it works","body":"SAXReader seems to be a lot cleaner, but it  doesn&#39;t seem to work for me with the namespace in the xml. If I remove the namespace it works"}],"tags":[],"owner":{"account_id":1638127,"reputation":1407,"user_id":1511077,"display_name":"Eugene Lebedev"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1667894809,"creation_date":1458023821,"answer_id":36004249,"question_id":36003863,"body_markdown":"Don&#39;t use indexes or offsets for nodes (hardcoding is anti-pattern), it makes your code fragile\r\n\r\n    SAXReader reader = new SAXReader();\r\n    Document document = reader.read(file);\r\n    List&lt;Node&gt; nodes = document.selectNodes(&quot;/options/category/option&quot;);\r\n\r\n    for (Node node : nodes) {\r\n        System.out.println(&quot;caption: &quot; + node.selectSingleNode(&quot;control/caption&quot;).getText());\r\n        System.out.println(&quot;value : &quot; + node.selectSingleNode(&quot;value&quot;).getText());\r\n    }\r\n\r\n**example output (cutted):**\r\n\r\n    caption:  String Name\r\n    value : 350.16.01a\r\n    caption: file version\r\n    value : 1601\r\n    caption: System ID\r\n    value : 0\r\n\r\n\r\ndependencies required:\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;jaxen&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;jaxen&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.1.6&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n\t    &lt;groupId&gt;dom4j&lt;/groupId&gt;\r\n\t    &lt;artifactId&gt;dom4j&lt;/artifactId&gt;\r\n\t    &lt;version&gt;1.6.1&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"Parsing the multilevel XML File using java (DOM Parser)","body":"<p>Don't use indexes or offsets for nodes (hardcoding is anti-pattern), it makes your code fragile</p>\n<pre><code>SAXReader reader = new SAXReader();\nDocument document = reader.read(file);\nList&lt;Node&gt; nodes = document.selectNodes(&quot;/options/category/option&quot;);\n\nfor (Node node : nodes) {\n    System.out.println(&quot;caption: &quot; + node.selectSingleNode(&quot;control/caption&quot;).getText());\n    System.out.println(&quot;value : &quot; + node.selectSingleNode(&quot;value&quot;).getText());\n}\n</code></pre>\n<p><strong>example output (cutted):</strong></p>\n<pre><code>caption:  String Name\nvalue : 350.16.01a\ncaption: file version\nvalue : 1601\ncaption: System ID\nvalue : 0\n</code></pre>\n<p>dependencies required:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;jaxen&lt;/groupId&gt;\n    &lt;artifactId&gt;jaxen&lt;/artifactId&gt;\n    &lt;version&gt;1.1.6&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;dom4j&lt;/groupId&gt;\n    &lt;artifactId&gt;dom4j&lt;/artifactId&gt;\n    &lt;version&gt;1.6.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5729658,"reputation":1391,"user_id":4525620,"display_name":"Alexander"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1458024316,"creation_date":1458024316,"answer_id":36004362,"question_id":36003863,"body_markdown":"The method `node.getElementsByTagName ()` searches for all occurences within `node`. Because you always use the Category node as search base instead of the option or the item node, you will get unexpected results. ","title":"Parsing the multilevel XML File using java (DOM Parser)","body":"<p>The method <code>node.getElementsByTagName ()</code> searches for all occurences within <code>node</code>. Because you always use the Category node as search base instead of the option or the item node, you will get unexpected results. </p>\n"}],"owner":{"account_id":8043682,"reputation":13,"user_id":6064511,"display_name":"Amit Prakash Pandey"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1482,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":36004249,"answer_count":2,"score":0,"last_activity_date":1667894809,"creation_date":1458022222,"question_id":36003863,"body_markdown":"Here is example of my XML file :\r\n    \r\n        ?xml version=&quot;1.0&quot;?&gt;\r\n        &lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;xslt/options.xsl&quot;?&gt;\r\n        &lt;options&gt;\r\n          &lt;version&gt;0001&lt;/version&gt;\r\n          &lt;title&gt;ConfigData&lt;/title&gt;\r\n          &lt;category&gt;\r\n            &lt;name&gt;GConfigData&lt;/name&gt;\r\n            &lt;option&gt;\r\n              &lt;name&gt;String_name&lt;/name&gt;\r\n              &lt;value&gt;350.16.01a&lt;/value&gt;\r\n              &lt;control&gt;\r\n                &lt;type&gt;TextBox2&lt;/type&gt;\r\n                &lt;caption&gt; String Name&lt;/caption&gt;\r\n                &lt;left&gt;0&lt;/left&gt;\r\n                &lt;top&gt;0&lt;/top&gt;\r\n                &lt;width&gt;2600&lt;/width&gt;\r\n                &lt;height&gt;900&lt;/height&gt;\r\n                &lt;font&gt;Courier&lt;/font&gt;\r\n                &lt;scroll_bar&gt;0&lt;/scroll_bar&gt;\r\n              &lt;/control&gt;\r\n            &lt;/option&gt;\r\n            &lt;option&gt;\r\n              &lt;name&gt;FileID&lt;/name&gt;\r\n              &lt;value&gt;1601&lt;/value&gt;\r\n              &lt;control&gt;\r\n                &lt;type&gt;TextBox2&lt;/type&gt;\r\n                &lt;caption&gt;file version&lt;/caption&gt;\r\n                &lt;left&gt;0&lt;/left&gt;\r\n                &lt;top&gt;900&lt;/top&gt;\r\n                &lt;width&gt;2600&lt;/width&gt;\r\n                &lt;height&gt;900&lt;/height&gt;\r\n                &lt;font&gt;Courier&lt;/font&gt;\r\n                &lt;scroll_bar&gt;0&lt;/scroll_bar&gt;\r\n              &lt;/control&gt;\r\n            &lt;/option&gt;\r\n            &lt;option&gt;\r\n              &lt;name&gt;systemID&lt;/name&gt;\r\n              &lt;value&gt;0&lt;/value&gt;\r\n              &lt;control&gt;\r\n                &lt;type&gt;TextBox2&lt;/type&gt;\r\n                &lt;caption&gt;System ID&lt;/caption&gt;\r\n                &lt;left&gt;0&lt;/left&gt;\r\n                &lt;top&gt;1800&lt;/top&gt;\r\n                &lt;width&gt;2400&lt;/width&gt;\r\n                &lt;height&gt;900&lt;/height&gt;\r\n                &lt;font&gt;Courier&lt;/font&gt;\r\n                &lt;scroll_bar&gt;0&lt;/scroll_bar&gt;\r\n              &lt;/control&gt;\r\n            &lt;/option&gt;\r\n            &lt;option&gt;\r\n              &lt;name&gt;SyncTime&lt;/name&gt;\r\n              &lt;value&gt;2&lt;/value&gt;\r\n              &lt;control&gt;\r\n                &lt;type&gt;TextBox2&lt;/type&gt;\r\n                &lt;caption&gt;Sync Time&lt;/caption&gt;\r\n                &lt;left&gt;0&lt;/left&gt;\r\n                &lt;top&gt;2700&lt;/top&gt;\r\n                &lt;width&gt;2400&lt;/width&gt;\r\n                &lt;height&gt;900&lt;/height&gt;\r\n                &lt;font&gt;Courier&lt;/font&gt;\r\n                &lt;scroll_bar&gt;0&lt;/scroll_bar&gt;\r\n              &lt;/control&gt;\r\n            &lt;/option&gt;\r\n            &lt;option&gt;\r\n              &lt;name&gt;UseServer&lt;/name&gt;\r\n              &lt;value&gt;0&lt;/value&gt;\r\n              &lt;control&gt;\r\n                &lt;type&gt;TextBox2&lt;/type&gt;\r\n                &lt;caption&gt;Use Server&lt;/caption&gt;\r\n                &lt;left&gt;0&lt;/left&gt;\r\n                &lt;top&gt;3600&lt;/top&gt;\r\n                &lt;width&gt;2400&lt;/width&gt;\r\n                &lt;height&gt;900&lt;/height&gt;\r\n                &lt;font&gt;Courier&lt;/font&gt;\r\n                &lt;scroll_bar&gt;0&lt;/scroll_bar&gt;\r\n              &lt;/control&gt;\r\n            &lt;/option&gt;\r\n            &lt;option&gt;\r\n              &lt;name&gt;CommType&lt;/name&gt;\r\n              &lt;value&gt;0&lt;/value&gt;\r\n              &lt;control&gt;\r\n                &lt;type&gt;FixedList&lt;/type&gt;\r\n                &lt;caption&gt;Comm Type&lt;/caption&gt;\r\n                &lt;left&gt;0&lt;/left&gt;\r\n                &lt;top&gt;4500&lt;/top&gt;\r\n                &lt;width&gt;2400&lt;/width&gt;\r\n                &lt;height&gt;900&lt;/height&gt;\r\n                &lt;list&gt;                                              \r\n                  &lt;item&gt;\r\n                    &lt;text&gt;Parellel&lt;/text&gt;\r\n                    &lt;value&gt;0&lt;/value&gt;\r\n                  &lt;/item&gt;\r\n                  &lt;item&gt;\r\n                    &lt;text&gt;Simple Serial&lt;/text&gt;\r\n                    &lt;value&gt;1&lt;/value&gt;\r\n                  &lt;/item&gt;\r\n                  &lt;item&gt;\r\n                    &lt;text&gt;Complex Serial&lt;/text&gt;\r\n                    &lt;value&gt;2&lt;/value&gt;\r\n                  &lt;/item&gt;\r\n                &lt;/list&gt;\r\n              &lt;/control&gt;\r\n            &lt;/option&gt;\r\n            &lt;option&gt;\r\n              &lt;name&gt;YYBasis&lt;/name&gt;\r\n        \t  &lt;value&gt;70&lt;/value&gt;\r\n              &lt;control&gt;\r\n                &lt;type&gt;TextBox2&lt;/type&gt;\r\n                &lt;caption&gt;Set YY Basis&lt;/caption&gt;\r\n                &lt;left&gt;0&lt;/left&gt;\r\n                &lt;top&gt;5400&lt;/top&gt;\r\n                &lt;width&gt;2400&lt;/width&gt;\r\n                &lt;height&gt;900&lt;/height&gt;\r\n                &lt;font&gt;Courier&lt;/font&gt;\r\n                &lt;scroll_bar&gt;0&lt;/scroll_bar&gt;\r\n              &lt;/control&gt;\r\n            &lt;/option&gt;\r\n            &lt;option&gt;\r\n              &lt;name&gt;Separator&lt;/name&gt;\r\n              &lt;value&gt;46&lt;/value&gt;\r\n              &lt;control&gt;\r\n                &lt;type&gt;TextBox2&lt;/type&gt;\r\n                &lt;caption&gt;Separator&lt;/caption&gt;\r\n                &lt;left&gt;0&lt;/left&gt;\r\n                &lt;top&gt;6300&lt;/top&gt;\r\n                &lt;width&gt;2400&lt;/width&gt;\r\n                &lt;height&gt;900&lt;/height&gt;\r\n                &lt;font&gt;Courier&lt;/font&gt;\r\n                &lt;scroll_bar&gt;0&lt;/scroll_bar&gt;\r\n              &lt;/control&gt;\r\n            &lt;/option&gt;\r\n            &lt;option&gt;\r\n              &lt;name&gt;WholeSeparator&lt;/name&gt;\r\n              &lt;value&gt;44&lt;/value&gt;\r\n              &lt;control&gt;\r\n                &lt;type&gt;TextBox2&lt;/type&gt;\r\n                &lt;caption&gt;Whole Separator&lt;/caption&gt;\r\n                &lt;left&gt;0&lt;/left&gt;\r\n                &lt;top&gt;7200&lt;/top&gt;\r\n                &lt;width&gt;2400&lt;/width&gt;\r\n                &lt;height&gt;900&lt;/height&gt;\r\n                &lt;font&gt;Courier&lt;/font&gt;\r\n                &lt;scroll_bar&gt;0&lt;/scroll_bar&gt;\r\n              &lt;/control&gt;\r\n            &lt;/option&gt;\r\n            &lt;option&gt;\r\n              &lt;name&gt;DateFormat&lt;/name&gt;\r\n              &lt;value&gt;0&lt;/value&gt;\r\n              &lt;control&gt;\r\n                &lt;type&gt;FixedList&lt;/type&gt;\r\n                &lt;caption&gt;Date Format&lt;/caption&gt;\r\n                &lt;left&gt;2600&lt;/left&gt;\r\n                &lt;top&gt;0&lt;/top&gt;\r\n                &lt;width&gt;2400&lt;/width&gt;\r\n                &lt;height&gt;900&lt;/height&gt;\r\n                &lt;list&gt;\r\n                  &lt;item&gt;\r\n                    &lt;text&gt;MM/DD/YY&lt;/text&gt;\r\n                    &lt;value&gt;0&lt;/value&gt;\r\n                  &lt;/item&gt;\r\n                  &lt;item&gt;\r\n                    &lt;text&gt;MM/DD/YYYY&lt;/text&gt;\r\n                    &lt;value&gt;1&lt;/value&gt;\r\n                  &lt;/item&gt;\r\n                  &lt;item&gt;\r\n                    &lt;text&gt;DD/MM/YY&lt;/text&gt;\r\n                    &lt;value&gt;2&lt;/value&gt;\r\n                  &lt;/item&gt;\r\n                  &lt;item&gt;\r\n                    &lt;text&gt;DD/MM/YYYY&lt;/text&gt;\r\n                    &lt;value&gt;3&lt;/value&gt;\r\n                  &lt;/item&gt;\r\n                  &lt;item&gt;\r\n                    &lt;text&gt;YY/MM/DD&lt;/text&gt;\r\n                    &lt;value&gt;4&lt;/value&gt;\r\n                  &lt;/item&gt;\r\n                  &lt;item&gt;\r\n                    &lt;text&gt;MM.DD.YY&lt;/text&gt;\r\n                    &lt;value&gt;6&lt;/value&gt;\r\n                  &lt;/item&gt;\r\n                  &lt;item&gt;\r\n                    &lt;text&gt;MM.DD.YYYY&lt;/text&gt;\r\n                    &lt;value&gt;7&lt;/value&gt;\r\n                  &lt;/item&gt;\r\n                  &lt;item&gt;\r\n                    &lt;text&gt;DD.MM.YY&lt;/text&gt;\r\n                    &lt;value&gt;8&lt;/value&gt;\r\n                  &lt;/item&gt;\r\n                  &lt;item&gt;\r\n                    &lt;text&gt;DD.MM.YYYY&lt;/text&gt;\r\n                    &lt;value&gt;9&lt;/value&gt;\r\n                  &lt;/item&gt;\r\n                  &lt;item&gt;\r\n                    &lt;text&gt;YY.MM.DD&lt;/text&gt;\r\n                    &lt;value&gt;10&lt;/value&gt;\r\n                  &lt;/item&gt;\r\n                  &lt;item&gt;\r\n                    &lt;text&gt;YYYY.MM.DD&lt;/text&gt;\r\n                    &lt;value&gt;11&lt;/value&gt;\r\n                  &lt;/item&gt;\r\n                &lt;/list&gt;\r\n              &lt;/control&gt;\r\n            &lt;/option&gt;\r\n          &lt;/category&gt;\r\n        &lt;/options&gt;\r\n        \r\n       \r\n \r\n\r\n I wrote the java code to parse the name , caption and value of each option. Here is code :\r\n    \r\n    public class XMLParsingSingleFileFinal {\r\n    \r\n    \r\n    \r\n    \tpublic static void main(String[] args) throws ParserConfigurationException, SAXException, IOException\r\n    \t   {\r\n    \t      //Get Document Builder\r\n    \t      DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\r\n    \t      DocumentBuilder builder = factory.newDocumentBuilder();\r\n    \t       \r\n    \t      //Build Document\r\n    \t      Document document = builder.parse(new File(&quot;options.xml&quot;));\r\n    \t       \r\n    \t      //Normalize the XML Structure; It&#39;s just too important !!\r\n    \t      document.getDocumentElement().normalize();\r\n    \t      XPath xPath =  XPathFactory.newInstance().newXPath();\r\n    \t       \r\n    \t      //Here comes the root node\r\n    \t      Element root = document.getDocumentElement();\r\n    \t      System.out.println(root.getNodeName());\r\n    \t       \r\n    \t      //Get all options\r\n    \t      NodeList nList = document.getElementsByTagName(&quot;options&quot;);\r\n    \t      System.out.println(&quot;Total Options = &quot; + nList.getLength());\r\n    \t      System.out.println(&quot;TITLE = &quot; + document.getElementsByTagName(&quot;title&quot;).item(0).getTextContent());\r\n    \t\t  System.out.println(&quot;VERSION = &quot; + document.getElementsByTagName(&quot;version&quot;).item(0).getTextContent());\r\n    \t\t \r\n    \t      System.out.println(&quot;===================================&quot;);\r\n    \t      \r\n    \t      //Get all category\r\n    \t      NodeList nList1 = document.getElementsByTagName(&quot;category&quot;);\r\n    \t      System.out.println(&quot;Total Category inside options = &quot; + nList1.getLength());\r\n    \t      //int count1 = nList1.getLength();\r\n    \t      \r\n    \t      \r\n    \t      for (int temp = 0; temp &lt; nList1.getLength(); temp++)\r\n    \t      {\r\n    \t         Node node = nList1.item(temp);\r\n    \t         if (node.getNodeType() == Node.ELEMENT_NODE)\r\n    \t         {\r\n    \t        \t Element mElement = (Element) node;\r\n    \t        \t System.out.println(&quot;\\nCategory Name = &quot; + mElement.getElementsByTagName(&quot;name&quot;).item(0).getTextContent());\r\n    \t        \t NodeList nList2 = mElement.getElementsByTagName(&quot;option&quot;);\r\n    \t        \t System.out.println(&quot;option inside category = &quot; + nList2.getLength());\r\n    \t        \t System.out.println(&quot;\\n\\t&quot;);\r\n    \t        \t// int count = nList2.getLength();\r\n    \t        \t \r\n    \t       \t \r\n    \t        \t for (int temp1 = 0; temp1 &lt; nList2.getLength()/2; temp1++) \r\n    \t   \t      \t{\r\n    \t        \t \r\n    \t        \t\tNode nNode = nList2.item(temp1);\r\n    \t        \t\tif (nNode.getNodeType() == Node.ELEMENT_NODE)\r\n    \t         \t\t{\r\n    \t        \t\t\t \r\n    \t        \t\tElement nElement = (Element) nNode;\r\n    \t        \t\t \r\n    \t        \t System.out.println(&quot;\\tOption Name = &quot; + mElement.getElementsByTagName(&quot;name&quot;).item(temp1+1).getTextContent());\r\n    \t        \t System.out.println(&quot;\\t\\tCaption Name = &quot; + mElement.getElementsByTagName(&quot;caption&quot;).item(temp1).getTextContent());\r\n    \t        \t\r\n    \t        \t System.out.println(&quot;\\t\\tValue = &quot; + mElement.getElementsByTagName(&quot;value&quot;).item(temp1).getTextContent());\r\n    \t        \t\r\n    \t        \t\r\n    \t        \t \r\n    \t        \t System.out.println(&quot;\\n\\t&quot;);\r\n    \r\n    \t        }\r\n    \t        \t \r\n    \t   \t      }  \r\n    \t        \t System.out.println(&quot;\\n\\t&quot;);\r\n    \t         }   \r\n    \t      }   \r\n    \t   }\r\n    }\r\n    \r\n   \r\n\r\n My main aim is to parse the &quot;value&quot; of the node &quot;option&quot;.\r\n    \r\nAs you can see that in the &quot;option&quot; - commtype , there is attribute &quot;item&quot; which also have childnode &quot;value&quot;.\r\n\r\nSo while parsing , Till the Option name &quot;commtype&quot; it is producing the correct data. Moving on to next option its taking the &quot;value&quot; of childnode &quot;item&quot; from previous option.\r\n    \r\n    Example:(Parse Result)\r\n    \r\n    options\r\n    Total Options = 1\r\n    TITLE = ConfigData\r\n    VERSION = 0001\r\n    ===================================\r\n    Total Category inside options = 23\r\n    \r\n    Category Name = GConfigData\r\n    option inside category = 38\r\n    \r\n    \t\r\n    \tOption Name = String_name\r\n    \t\tCaption Name = String Name\r\n    \t\tValue = 350.16.01a\r\n    \r\n    \t\r\n    \tOption Name = FileID\r\n    \t\tCaption Name =  file version\r\n    \t\tValue = 1601\r\n    \r\n    \t\r\n    \tOption Name = SystemID\r\n    \t\tCaption Name = System ID\r\n    \t\tValue = 0\r\n    \r\n    \t\r\n    \tOption Name = SyncTime\r\n    \t\tCaption Name = Sync Time\r\n    \t\tValue = 2\r\n    \r\n    \t\r\n    \tOption Name = UseServer\r\n    \t\tCaption Name = Use Server\r\n    \t\tValue = 0\r\n    \r\n    \t\r\n    \tOption Name = CommType\r\n    \t\tCaption Name = Comm Type\r\n    \t\tValue = 0\r\n    \r\n    \t\r\n    \tOption Name = YYBasis\r\n    \t\tCaption Name = Set YY Basis\r\n    \t\tValue = 0        /*(Here the value should be 70 as in XML file , But its taking the value of option(Name:CommType)/control/list/item(text:parellel)/value )*/\r\n    \r\n    \t\r\n    \tOption Name = Separator\r\n    \t\tCaption Name =  Separator\r\n    \t\tValue = 1       /*(Here the value should be 46 as in XML file , But its taking the value of option(Name:CommType)/control/list/item(text:simple serial)/value)*/\r\n    \r\n    \t\r\n    \tOption Name =WholeSeparator\r\n    \t\tCaption Name = Whole Separator\r\n    \t\tValue = 2     /*(Here the value should be 44 as in XML file , But its taking the value of option(Name:CommType)/control/list/item(text:complex serial)/value)*/\r\n    \r\n    \t\r\n    \tOption Name = DateFormat\r\n    \t\tCaption Name = Date Format\r\n    \t\tValue = 70    //(Value should be 0)\r\n    \r\n    \r\n \r\n\r\n   \r\nAfter the Option Name: CommType , the value of each option is parsed wrongly.\r\n\r\nWhat can be the solution of this? I am new to java as well as XML.\r\n\r\nPS: This is my first question on this forum.I apologize of any spelling mistake and if the way of questioning is wrong. Please try to help me in possible ways. \r\n\r\n\r\n\r\n","title":"Parsing the multilevel XML File using java (DOM Parser)","body":"<p>Here is example of my XML file :</p>\n\n<pre><code>    ?xml version=\"1.0\"?&gt;\n    &lt;?xml-stylesheet type=\"text/xsl\" href=\"xslt/options.xsl\"?&gt;\n    &lt;options&gt;\n      &lt;version&gt;0001&lt;/version&gt;\n      &lt;title&gt;ConfigData&lt;/title&gt;\n      &lt;category&gt;\n        &lt;name&gt;GConfigData&lt;/name&gt;\n        &lt;option&gt;\n          &lt;name&gt;String_name&lt;/name&gt;\n          &lt;value&gt;350.16.01a&lt;/value&gt;\n          &lt;control&gt;\n            &lt;type&gt;TextBox2&lt;/type&gt;\n            &lt;caption&gt; String Name&lt;/caption&gt;\n            &lt;left&gt;0&lt;/left&gt;\n            &lt;top&gt;0&lt;/top&gt;\n            &lt;width&gt;2600&lt;/width&gt;\n            &lt;height&gt;900&lt;/height&gt;\n            &lt;font&gt;Courier&lt;/font&gt;\n            &lt;scroll_bar&gt;0&lt;/scroll_bar&gt;\n          &lt;/control&gt;\n        &lt;/option&gt;\n        &lt;option&gt;\n          &lt;name&gt;FileID&lt;/name&gt;\n          &lt;value&gt;1601&lt;/value&gt;\n          &lt;control&gt;\n            &lt;type&gt;TextBox2&lt;/type&gt;\n            &lt;caption&gt;file version&lt;/caption&gt;\n            &lt;left&gt;0&lt;/left&gt;\n            &lt;top&gt;900&lt;/top&gt;\n            &lt;width&gt;2600&lt;/width&gt;\n            &lt;height&gt;900&lt;/height&gt;\n            &lt;font&gt;Courier&lt;/font&gt;\n            &lt;scroll_bar&gt;0&lt;/scroll_bar&gt;\n          &lt;/control&gt;\n        &lt;/option&gt;\n        &lt;option&gt;\n          &lt;name&gt;systemID&lt;/name&gt;\n          &lt;value&gt;0&lt;/value&gt;\n          &lt;control&gt;\n            &lt;type&gt;TextBox2&lt;/type&gt;\n            &lt;caption&gt;System ID&lt;/caption&gt;\n            &lt;left&gt;0&lt;/left&gt;\n            &lt;top&gt;1800&lt;/top&gt;\n            &lt;width&gt;2400&lt;/width&gt;\n            &lt;height&gt;900&lt;/height&gt;\n            &lt;font&gt;Courier&lt;/font&gt;\n            &lt;scroll_bar&gt;0&lt;/scroll_bar&gt;\n          &lt;/control&gt;\n        &lt;/option&gt;\n        &lt;option&gt;\n          &lt;name&gt;SyncTime&lt;/name&gt;\n          &lt;value&gt;2&lt;/value&gt;\n          &lt;control&gt;\n            &lt;type&gt;TextBox2&lt;/type&gt;\n            &lt;caption&gt;Sync Time&lt;/caption&gt;\n            &lt;left&gt;0&lt;/left&gt;\n            &lt;top&gt;2700&lt;/top&gt;\n            &lt;width&gt;2400&lt;/width&gt;\n            &lt;height&gt;900&lt;/height&gt;\n            &lt;font&gt;Courier&lt;/font&gt;\n            &lt;scroll_bar&gt;0&lt;/scroll_bar&gt;\n          &lt;/control&gt;\n        &lt;/option&gt;\n        &lt;option&gt;\n          &lt;name&gt;UseServer&lt;/name&gt;\n          &lt;value&gt;0&lt;/value&gt;\n          &lt;control&gt;\n            &lt;type&gt;TextBox2&lt;/type&gt;\n            &lt;caption&gt;Use Server&lt;/caption&gt;\n            &lt;left&gt;0&lt;/left&gt;\n            &lt;top&gt;3600&lt;/top&gt;\n            &lt;width&gt;2400&lt;/width&gt;\n            &lt;height&gt;900&lt;/height&gt;\n            &lt;font&gt;Courier&lt;/font&gt;\n            &lt;scroll_bar&gt;0&lt;/scroll_bar&gt;\n          &lt;/control&gt;\n        &lt;/option&gt;\n        &lt;option&gt;\n          &lt;name&gt;CommType&lt;/name&gt;\n          &lt;value&gt;0&lt;/value&gt;\n          &lt;control&gt;\n            &lt;type&gt;FixedList&lt;/type&gt;\n            &lt;caption&gt;Comm Type&lt;/caption&gt;\n            &lt;left&gt;0&lt;/left&gt;\n            &lt;top&gt;4500&lt;/top&gt;\n            &lt;width&gt;2400&lt;/width&gt;\n            &lt;height&gt;900&lt;/height&gt;\n            &lt;list&gt;                                              \n              &lt;item&gt;\n                &lt;text&gt;Parellel&lt;/text&gt;\n                &lt;value&gt;0&lt;/value&gt;\n              &lt;/item&gt;\n              &lt;item&gt;\n                &lt;text&gt;Simple Serial&lt;/text&gt;\n                &lt;value&gt;1&lt;/value&gt;\n              &lt;/item&gt;\n              &lt;item&gt;\n                &lt;text&gt;Complex Serial&lt;/text&gt;\n                &lt;value&gt;2&lt;/value&gt;\n              &lt;/item&gt;\n            &lt;/list&gt;\n          &lt;/control&gt;\n        &lt;/option&gt;\n        &lt;option&gt;\n          &lt;name&gt;YYBasis&lt;/name&gt;\n          &lt;value&gt;70&lt;/value&gt;\n          &lt;control&gt;\n            &lt;type&gt;TextBox2&lt;/type&gt;\n            &lt;caption&gt;Set YY Basis&lt;/caption&gt;\n            &lt;left&gt;0&lt;/left&gt;\n            &lt;top&gt;5400&lt;/top&gt;\n            &lt;width&gt;2400&lt;/width&gt;\n            &lt;height&gt;900&lt;/height&gt;\n            &lt;font&gt;Courier&lt;/font&gt;\n            &lt;scroll_bar&gt;0&lt;/scroll_bar&gt;\n          &lt;/control&gt;\n        &lt;/option&gt;\n        &lt;option&gt;\n          &lt;name&gt;Separator&lt;/name&gt;\n          &lt;value&gt;46&lt;/value&gt;\n          &lt;control&gt;\n            &lt;type&gt;TextBox2&lt;/type&gt;\n            &lt;caption&gt;Separator&lt;/caption&gt;\n            &lt;left&gt;0&lt;/left&gt;\n            &lt;top&gt;6300&lt;/top&gt;\n            &lt;width&gt;2400&lt;/width&gt;\n            &lt;height&gt;900&lt;/height&gt;\n            &lt;font&gt;Courier&lt;/font&gt;\n            &lt;scroll_bar&gt;0&lt;/scroll_bar&gt;\n          &lt;/control&gt;\n        &lt;/option&gt;\n        &lt;option&gt;\n          &lt;name&gt;WholeSeparator&lt;/name&gt;\n          &lt;value&gt;44&lt;/value&gt;\n          &lt;control&gt;\n            &lt;type&gt;TextBox2&lt;/type&gt;\n            &lt;caption&gt;Whole Separator&lt;/caption&gt;\n            &lt;left&gt;0&lt;/left&gt;\n            &lt;top&gt;7200&lt;/top&gt;\n            &lt;width&gt;2400&lt;/width&gt;\n            &lt;height&gt;900&lt;/height&gt;\n            &lt;font&gt;Courier&lt;/font&gt;\n            &lt;scroll_bar&gt;0&lt;/scroll_bar&gt;\n          &lt;/control&gt;\n        &lt;/option&gt;\n        &lt;option&gt;\n          &lt;name&gt;DateFormat&lt;/name&gt;\n          &lt;value&gt;0&lt;/value&gt;\n          &lt;control&gt;\n            &lt;type&gt;FixedList&lt;/type&gt;\n            &lt;caption&gt;Date Format&lt;/caption&gt;\n            &lt;left&gt;2600&lt;/left&gt;\n            &lt;top&gt;0&lt;/top&gt;\n            &lt;width&gt;2400&lt;/width&gt;\n            &lt;height&gt;900&lt;/height&gt;\n            &lt;list&gt;\n              &lt;item&gt;\n                &lt;text&gt;MM/DD/YY&lt;/text&gt;\n                &lt;value&gt;0&lt;/value&gt;\n              &lt;/item&gt;\n              &lt;item&gt;\n                &lt;text&gt;MM/DD/YYYY&lt;/text&gt;\n                &lt;value&gt;1&lt;/value&gt;\n              &lt;/item&gt;\n              &lt;item&gt;\n                &lt;text&gt;DD/MM/YY&lt;/text&gt;\n                &lt;value&gt;2&lt;/value&gt;\n              &lt;/item&gt;\n              &lt;item&gt;\n                &lt;text&gt;DD/MM/YYYY&lt;/text&gt;\n                &lt;value&gt;3&lt;/value&gt;\n              &lt;/item&gt;\n              &lt;item&gt;\n                &lt;text&gt;YY/MM/DD&lt;/text&gt;\n                &lt;value&gt;4&lt;/value&gt;\n              &lt;/item&gt;\n              &lt;item&gt;\n                &lt;text&gt;MM.DD.YY&lt;/text&gt;\n                &lt;value&gt;6&lt;/value&gt;\n              &lt;/item&gt;\n              &lt;item&gt;\n                &lt;text&gt;MM.DD.YYYY&lt;/text&gt;\n                &lt;value&gt;7&lt;/value&gt;\n              &lt;/item&gt;\n              &lt;item&gt;\n                &lt;text&gt;DD.MM.YY&lt;/text&gt;\n                &lt;value&gt;8&lt;/value&gt;\n              &lt;/item&gt;\n              &lt;item&gt;\n                &lt;text&gt;DD.MM.YYYY&lt;/text&gt;\n                &lt;value&gt;9&lt;/value&gt;\n              &lt;/item&gt;\n              &lt;item&gt;\n                &lt;text&gt;YY.MM.DD&lt;/text&gt;\n                &lt;value&gt;10&lt;/value&gt;\n              &lt;/item&gt;\n              &lt;item&gt;\n                &lt;text&gt;YYYY.MM.DD&lt;/text&gt;\n                &lt;value&gt;11&lt;/value&gt;\n              &lt;/item&gt;\n            &lt;/list&gt;\n          &lt;/control&gt;\n        &lt;/option&gt;\n      &lt;/category&gt;\n    &lt;/options&gt;\n</code></pre>\n\n<p>I wrote the java code to parse the name , caption and value of each option. Here is code :</p>\n\n<pre><code>public class XMLParsingSingleFileFinal {\n\n\n\n    public static void main(String[] args) throws ParserConfigurationException, SAXException, IOException\n       {\n          //Get Document Builder\n          DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\n          DocumentBuilder builder = factory.newDocumentBuilder();\n\n          //Build Document\n          Document document = builder.parse(new File(\"options.xml\"));\n\n          //Normalize the XML Structure; It's just too important !!\n          document.getDocumentElement().normalize();\n          XPath xPath =  XPathFactory.newInstance().newXPath();\n\n          //Here comes the root node\n          Element root = document.getDocumentElement();\n          System.out.println(root.getNodeName());\n\n          //Get all options\n          NodeList nList = document.getElementsByTagName(\"options\");\n          System.out.println(\"Total Options = \" + nList.getLength());\n          System.out.println(\"TITLE = \" + document.getElementsByTagName(\"title\").item(0).getTextContent());\n          System.out.println(\"VERSION = \" + document.getElementsByTagName(\"version\").item(0).getTextContent());\n\n          System.out.println(\"===================================\");\n\n          //Get all category\n          NodeList nList1 = document.getElementsByTagName(\"category\");\n          System.out.println(\"Total Category inside options = \" + nList1.getLength());\n          //int count1 = nList1.getLength();\n\n\n          for (int temp = 0; temp &lt; nList1.getLength(); temp++)\n          {\n             Node node = nList1.item(temp);\n             if (node.getNodeType() == Node.ELEMENT_NODE)\n             {\n                 Element mElement = (Element) node;\n                 System.out.println(\"\\nCategory Name = \" + mElement.getElementsByTagName(\"name\").item(0).getTextContent());\n                 NodeList nList2 = mElement.getElementsByTagName(\"option\");\n                 System.out.println(\"option inside category = \" + nList2.getLength());\n                 System.out.println(\"\\n\\t\");\n                // int count = nList2.getLength();\n\n\n                 for (int temp1 = 0; temp1 &lt; nList2.getLength()/2; temp1++) \n                {\n\n                    Node nNode = nList2.item(temp1);\n                    if (nNode.getNodeType() == Node.ELEMENT_NODE)\n                    {\n\n                    Element nElement = (Element) nNode;\n\n                 System.out.println(\"\\tOption Name = \" + mElement.getElementsByTagName(\"name\").item(temp1+1).getTextContent());\n                 System.out.println(\"\\t\\tCaption Name = \" + mElement.getElementsByTagName(\"caption\").item(temp1).getTextContent());\n\n                 System.out.println(\"\\t\\tValue = \" + mElement.getElementsByTagName(\"value\").item(temp1).getTextContent());\n\n\n\n                 System.out.println(\"\\n\\t\");\n\n            }\n\n              }  \n                 System.out.println(\"\\n\\t\");\n             }   \n          }   \n       }\n}\n</code></pre>\n\n<p>My main aim is to parse the \"value\" of the node \"option\".</p>\n\n<p>As you can see that in the \"option\" - commtype , there is attribute \"item\" which also have childnode \"value\".</p>\n\n<p>So while parsing , Till the Option name \"commtype\" it is producing the correct data. Moving on to next option its taking the \"value\" of childnode \"item\" from previous option.</p>\n\n<pre><code>Example:(Parse Result)\n\noptions\nTotal Options = 1\nTITLE = ConfigData\nVERSION = 0001\n===================================\nTotal Category inside options = 23\n\nCategory Name = GConfigData\noption inside category = 38\n\n\n    Option Name = String_name\n        Caption Name = String Name\n        Value = 350.16.01a\n\n\n    Option Name = FileID\n        Caption Name =  file version\n        Value = 1601\n\n\n    Option Name = SystemID\n        Caption Name = System ID\n        Value = 0\n\n\n    Option Name = SyncTime\n        Caption Name = Sync Time\n        Value = 2\n\n\n    Option Name = UseServer\n        Caption Name = Use Server\n        Value = 0\n\n\n    Option Name = CommType\n        Caption Name = Comm Type\n        Value = 0\n\n\n    Option Name = YYBasis\n        Caption Name = Set YY Basis\n        Value = 0        /*(Here the value should be 70 as in XML file , But its taking the value of option(Name:CommType)/control/list/item(text:parellel)/value )*/\n\n\n    Option Name = Separator\n        Caption Name =  Separator\n        Value = 1       /*(Here the value should be 46 as in XML file , But its taking the value of option(Name:CommType)/control/list/item(text:simple serial)/value)*/\n\n\n    Option Name =WholeSeparator\n        Caption Name = Whole Separator\n        Value = 2     /*(Here the value should be 44 as in XML file , But its taking the value of option(Name:CommType)/control/list/item(text:complex serial)/value)*/\n\n\n    Option Name = DateFormat\n        Caption Name = Date Format\n        Value = 70    //(Value should be 0)\n</code></pre>\n\n<p>After the Option Name: CommType , the value of each option is parsed wrongly.</p>\n\n<p>What can be the solution of this? I am new to java as well as XML.</p>\n\n<p>PS: This is my first question on this forum.I apologize of any spelling mistake and if the way of questioning is wrong. Please try to help me in possible ways. </p>\n"},{"tags":["java","amazon-web-services","amazon-s3"],"comments":[{"owner":{"account_id":216605,"reputation":11967,"user_id":471955,"accept_rate":0,"display_name":"Dave Moten"},"score":0,"creation_date":1511549933,"post_id":21725453,"comment_id":81912342,"body_markdown":"The `text = text + temp` line can really slow down as `text` grows in size. Use `StringBuilder`","body":"The <code>text = text + temp</code> line can really slow down as <code>text</code> grows in size. Use <code>StringBuilder</code>"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1667894936,"post_id":21725453,"comment_id":131270269,"body_markdown":"`InputStreamReader` has an overloaded method with an extra Charset parameter Now the default Charset encoding of your platform is used - non-portable. Also `readLine` strips the trailing line end character(s). So you have to add them back again.","body":"<code>InputStreamReader</code> has an overloaded method with an extra Charset parameter Now the default Charset encoding of your platform is used - non-portable. Also <code>readLine</code> strips the trailing line end character(s). So you have to add them back again."}],"answers":[{"tags":[],"owner":{"account_id":3658872,"reputation":746,"user_id":3049205,"display_name":"joker"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1392202131,"creation_date":1392202131,"answer_id":21725714,"question_id":21725453,"body_markdown":"Your code looks correct to me (although I&#39;d put the close statements in a `finally` block, and handle line endings in concatenating the rows of the file in the `text = text + temp` statement).\r\n\r\nLooking at the error message, I get the feeling that this is something occurring in the framework. Have you tried to get data from another object? Or to download the object you&#39;re trying to read through an alternative means to see that the data isn&#39;t corrupted?\r\n\r\nGood Luck!\r\n","title":"How to write an S3 object to a String in java","body":"<p>Your code looks correct to me (although I'd put the close statements in a <code>finally</code> block, and handle line endings in concatenating the rows of the file in the <code>text = text + temp</code> statement).</p>\n\n<p>Looking at the error message, I get the feeling that this is something occurring in the framework. Have you tried to get data from another object? Or to download the object you're trying to read through an alternative means to see that the data isn't corrupted?</p>\n\n<p>Good Luck!</p>\n"},{"tags":[],"owner":{"account_id":63162,"reputation":102381,"user_id":187141,"accept_rate":82,"display_name":"yegor256"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1401094922,"creation_date":1393423453,"answer_id":22043746,"question_id":21725453,"body_markdown":"You can try [jcabi-s3](http://s3.jcabi.com) (I&#39;m a developer), which does this job for you:\r\n\r\n    Region region = new Region.Simple(&quot;key&quot;, &quot;secret&quot;);\r\n    Bucket bucket = region.bucket(&quot;my.example.com&quot;);\r\n    Ocket.Text ocket = new Ocket.Text(bucket.ocket(&quot;test.txt&quot;));\r\n    String content = ocket.read();\r\n\r\nCheck this blog post: http://www.yegor256.com/2014/05/26/amazon-s3-java-oop-adapter.html","title":"How to write an S3 object to a String in java","body":"<p>You can try <a href=\"http://s3.jcabi.com\" rel=\"nofollow\">jcabi-s3</a> (I'm a developer), which does this job for you:</p>\n\n<pre><code>Region region = new Region.Simple(\"key\", \"secret\");\nBucket bucket = region.bucket(\"my.example.com\");\nOcket.Text ocket = new Ocket.Text(bucket.ocket(\"test.txt\"));\nString content = ocket.read();\n</code></pre>\n\n<p>Check this blog post: <a href=\"http://www.yegor256.com/2014/05/26/amazon-s3-java-oop-adapter.html\" rel=\"nofollow\">http://www.yegor256.com/2014/05/26/amazon-s3-java-oop-adapter.html</a></p>\n"}],"owner":{"account_id":1044374,"reputation":31,"user_id":1049681,"accept_rate":0,"display_name":"Dheeraj Tyagi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9334,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1667894600,"creation_date":1392201522,"question_id":21725453,"body_markdown":"I am trying to download the content from s3object to a string in the following manner:\r\n\r\n    S3Object s3Object = amazonS3Client.getObject(bucketName, key);\r\n    S3ObjectInputStream stream = s3Object.getObjectContent();\r\n    BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(stream));\r\n    String text = &quot;&quot;;\r\n    String temp = &quot;&quot;;\r\n    \t\t\r\n    try {\r\n    \twhile((temp = bufferedReader.readLine()) != null){\r\n    \t\ttext = text+temp;\r\n    \t}\r\n    \tbufferedReader.close();\r\n    \tstream.close();\r\n    } catch (IOException e) {\r\n    m_logger.error(&quot;Exception while reading the string &quot; + e);\r\n    }\r\n\r\nbut while downloading the content, i am getting the following error\r\n\r\n     Client calculated content hash didn&#39;t match hash calculated by Amazon S3.  The data may be corrupt.\r\n            at com.amazonaws.services.s3.internal.DigestValidationInputStream.validateMD5Digest(DigestValidationInputStream.java:73)\r\n            at com.amazonaws.services.s3.internal.DigestValidationInputStream.read(DigestValidationInputStream.java:61)\r\n            at java.io.FilterInputStream.read(FilterInputStream.java:133)\r\n    \r\n    \r\n    \t\t\r\n\r\n","title":"How to write an S3 object to a String in java","body":"<p>I am trying to download the content from s3object to a string in the following manner:</p>\n\n<pre><code>S3Object s3Object = amazonS3Client.getObject(bucketName, key);\nS3ObjectInputStream stream = s3Object.getObjectContent();\nBufferedReader bufferedReader = new BufferedReader(new InputStreamReader(stream));\nString text = \"\";\nString temp = \"\";\n\ntry {\n    while((temp = bufferedReader.readLine()) != null){\n        text = text+temp;\n    }\n    bufferedReader.close();\n    stream.close();\n} catch (IOException e) {\nm_logger.error(\"Exception while reading the string \" + e);\n}\n</code></pre>\n\n<p>but while downloading the content, i am getting the following error</p>\n\n<pre><code> Client calculated content hash didn't match hash calculated by Amazon S3.  The data may be corrupt.\n        at com.amazonaws.services.s3.internal.DigestValidationInputStream.validateMD5Digest(DigestValidationInputStream.java:73)\n        at com.amazonaws.services.s3.internal.DigestValidationInputStream.read(DigestValidationInputStream.java:61)\n        at java.io.FilterInputStream.read(FilterInputStream.java:133)\n</code></pre>\n"},{"tags":["java","retrofit","retrofit2"],"owner":{"account_id":163324,"reputation":991,"user_id":385390,"accept_rate":91,"display_name":"bliako"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":144,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667893840,"creation_date":1667828084,"question_id":74347445,"body_markdown":"In a not so exotic situation I need access to the original request when I handle the response in the ```responseBodyConverter```. For example, right now I need the original url -- e.g. I want to adjust relative urls in the response HTML. And perhaps I will need some request header, like a cookie.\r\n\r\nBut I don&#39;t know how to get the request data.\r\n\r\nHere is what I have:\r\n```\r\n\t\tHttpLoggingInterceptor hlog = ses.http_logger(servername);\r\n\t\tif (hlog != null) {\r\n\t\t\tbuilder.addInterceptor(hlog);\r\n\t\t}\r\n\t\tOkHttpClient okhttpClient = builder\r\n\t\t\t\t.build();\r\n\t\treturn new Retrofit.Builder()\r\n\t\t\t\t.baseUrl(base_url)\r\n\t\t\t\t.client(okhttpClient)\r\n\t\t\t\t.addConverterFactory(\r\n\t\t\t\t\t\tnew Converter.Factory() {\r\n\t\t\t\t\t\t\t@Override\r\n\t\t\t\t\t\t\tpublic Converter&lt;ResponseBody, ?&gt; responseBodyConverter(final Type type, final Annotation[] annotations, final Retrofit retrofit) {\r\n\t\t\t\t\t\t\t\treturn responseBody -&gt; {\r\n\t\t\t\t\t\t\t\t\tBufferedSource buffer = Okio.buffer(responseBody.source());\r\n\t\t\t\t\t\t\t\t\tString html = buffer.readUtf8();\r\n\t\t\t\t\t\t\t\t\tSystem.out.println(html);\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t.addCallAdapterFactory(RxJava3CallAdapterFactory.create())\r\n\t\t\t\t.build()\r\n\t\t\t\t;\r\n```\r\n\r\nI found this solution https://github.com/square/retrofit/issues/2267/\r\n\r\nBut I can not understand what it does or whether it is too complex or any side effects.\r\n\r\nCan I get access to the request data in Retrofit2 while processing the response in ```responseBodyConverter``` and how?\r\n\r\nEdit: the above works as expected, but a simpler way is preferred.","title":"Retrofit2 responseBodyConverter: I need request too","body":"<p>In a not so exotic situation I need access to the original request when I handle the response in the <code>responseBodyConverter</code>. For example, right now I need the original url -- e.g. I want to adjust relative urls in the response HTML. And perhaps I will need some request header, like a cookie.</p>\n<p>But I don't know how to get the request data.</p>\n<p>Here is what I have:</p>\n<pre><code>        HttpLoggingInterceptor hlog = ses.http_logger(servername);\n        if (hlog != null) {\n            builder.addInterceptor(hlog);\n        }\n        OkHttpClient okhttpClient = builder\n                .build();\n        return new Retrofit.Builder()\n                .baseUrl(base_url)\n                .client(okhttpClient)\n                .addConverterFactory(\n                        new Converter.Factory() {\n                            @Override\n                            public Converter&lt;ResponseBody, ?&gt; responseBodyConverter(final Type type, final Annotation[] annotations, final Retrofit retrofit) {\n                                return responseBody -&gt; {\n                                    BufferedSource buffer = Okio.buffer(responseBody.source());\n                                    String html = buffer.readUtf8();\n                                    System.out.println(html);\n                                };\n                            }\n                        })\n                .addCallAdapterFactory(RxJava3CallAdapterFactory.create())\n                .build()\n                ;\n</code></pre>\n<p>I found this solution <a href=\"https://github.com/square/retrofit/issues/2267/\" rel=\"nofollow noreferrer\">https://github.com/square/retrofit/issues/2267/</a></p>\n<p>But I can not understand what it does or whether it is too complex or any side effects.</p>\n<p>Can I get access to the request data in Retrofit2 while processing the response in <code>responseBodyConverter</code> and how?</p>\n<p>Edit: the above works as expected, but a simpler way is preferred.</p>\n"},{"tags":["java","sorting","tree","logarithm","avl-tree"],"answers":[{"comments":[{"owner":{"account_id":26481542,"reputation":11,"user_id":20120723,"display_name":"Good Drink"},"score":0,"creation_date":1667921833,"post_id":74357270,"comment_id":131280677,"body_markdown":"thanks for the answer, but I used the attribute to store it so it can run O(log(N)). Honestly, I don&#39;t know how much time complexity in this code?","body":"thanks for the answer, but I used the attribute to store it so it can run O(log(N)). Honestly, I don&#39;t know how much time complexity in this code?"},{"owner":{"account_id":19780517,"reputation":141,"user_id":14485623,"display_name":"kuriboh"},"score":0,"creation_date":1667929782,"post_id":74357270,"comment_id":131283771,"body_markdown":"@GoodDrink My advice code should be O(N) in worst case and O(logN) in best case. If you want to achieve O(logN), I think you need to introduce a variable to record sum of each node&#39;s descendant nodes&#39; values like the original ```desc```. After all, ```desc``` is much like a kind of sum which assumes each node&#39;s value is 1.","body":"@GoodDrink My advice code should be O(N) in worst case and O(logN) in best case. If you want to achieve O(logN), I think you need to introduce a variable to record sum of each node&#39;s descendant nodes&#39; values like the original <code>desc</code>. After all, <code>desc</code> is much like a kind of sum which assumes each node&#39;s value is 1."}],"tags":[],"owner":{"account_id":19780517,"reputation":141,"user_id":14485623,"display_name":"kuriboh"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667893798,"creation_date":1667893798,"answer_id":74357270,"question_id":74356726,"body_markdown":"Does ```desc``` also represent the number of descendant nodes for a node? Then it is unnecessary to take it into account when you want to count the sum of value of nodes greater than n. You should sum their keys. Besides, since your function doesn&#39;t modify the tree, there is no need to consider rotation.\r\n\r\nHere is my advice code in recursion.\r\n```\r\n    int SumGreater(Node root, int x) {\r\n        int res = 0;\r\n     \r\n        while (root != null) {\r\n            if (root.key &gt; x) {\r\n                res += root.key;\r\n                res += SumGreater(root.right, x);\r\n                root = root.left;\r\n            } else {\r\n                root = root.right;\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n```","title":"Find sum of smaller node from given element in AVL Tree","body":"<p>Does <code>desc</code> also represent the number of descendant nodes for a node? Then it is unnecessary to take it into account when you want to count the sum of value of nodes greater than n. You should sum their keys. Besides, since your function doesn't modify the tree, there is no need to consider rotation.</p>\n<p>Here is my advice code in recursion.</p>\n<pre><code>    int SumGreater(Node root, int x) {\n        int res = 0;\n     \n        while (root != null) {\n            if (root.key &gt; x) {\n                res += root.key;\n                res += SumGreater(root.right, x);\n                root = root.left;\n            } else {\n                root = root.right;\n            }\n        }\n        return res;\n    }\n</code></pre>\n"}],"owner":{"account_id":26481542,"reputation":11,"user_id":20120723,"display_name":"Good Drink"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1667893798,"creation_date":1667890627,"question_id":74356726,"body_markdown":"Can anyone help me.\r\nIf i have tree, the inorder traversal AVL Tree is\r\n\\-1 0 1 2 5 6 9 10 11 12\r\nthen i want to have method sumGreater(n)\r\nif \r\n\r\nsumGreater(6) = 9 + 10 + 11 + 12 = 42\r\n\r\nI tried to modified this.\r\nhttps://www.geeksforgeeks.org/count-greater-nodes-in-avl-tree/\r\nbut it wont work.\r\n\r\n```\r\n\tNode rightRotate(Node y, int key) {\r\n\t\tNode x = y.left;\r\n\t\tNode T2 = x.right;\r\n\r\n\t\tx.right = y;\r\n\t\ty.left = T2;\r\n\r\n\t\ty.height = max(height(y.left), height(y.right)) + 1;\r\n\t\tx.height = max(height(x.left), height(x.right)) + 1;\r\n\t\t\r\n\t    int val = (T2 != null) ? T2.desc : -1;\r\n\t    y.desc = y.desc - (x.desc + key) + (val + key); // modified\r\n\t    x.desc = x.desc - (val + key) + (y.desc + key); // modified\r\n\r\n\t\treturn x;\r\n\t}\r\n```\r\n\r\n```\r\n\tint SumGreater(Node root, int x) {\r\n\t    int res = 0;\r\n\t \r\n\t    while (root != null) {\r\n\t        int desc = (root.right != null) ? root.right.desc : -1;\r\n\t        if (root.key &gt; x) {\r\n                res = res + desc + 1 + 1;\r\n\t            root = root.left;\r\n\t        } else if (root.key &lt; x) {\r\n\t            root = root.right;\r\n\t        } else {\r\n\t            res = res + desc + 1;\r\n\t            break;\r\n\t        }\r\n\t    }\r\n\t    return res;\r\n\t}\r\n```\r\n\r\nthis still count node not sum of node.\r\nCan anyone help me with O(logN) time complexity\r\nPlease help me\r\n\r\ncorrected code and help","title":"Find sum of smaller node from given element in AVL Tree","body":"<p>Can anyone help me.\nIf i have tree, the inorder traversal AVL Tree is\n-1 0 1 2 5 6 9 10 11 12\nthen i want to have method sumGreater(n)\nif</p>\n<p>sumGreater(6) = 9 + 10 + 11 + 12 = 42</p>\n<p>I tried to modified this.\n<a href=\"https://www.geeksforgeeks.org/count-greater-nodes-in-avl-tree/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/count-greater-nodes-in-avl-tree/</a>\nbut it wont work.</p>\n<pre><code>    Node rightRotate(Node y, int key) {\n        Node x = y.left;\n        Node T2 = x.right;\n\n        x.right = y;\n        y.left = T2;\n\n        y.height = max(height(y.left), height(y.right)) + 1;\n        x.height = max(height(x.left), height(x.right)) + 1;\n        \n        int val = (T2 != null) ? T2.desc : -1;\n        y.desc = y.desc - (x.desc + key) + (val + key); // modified\n        x.desc = x.desc - (val + key) + (y.desc + key); // modified\n\n        return x;\n    }\n</code></pre>\n<pre><code>    int SumGreater(Node root, int x) {\n        int res = 0;\n     \n        while (root != null) {\n            int desc = (root.right != null) ? root.right.desc : -1;\n            if (root.key &gt; x) {\n                res = res + desc + 1 + 1;\n                root = root.left;\n            } else if (root.key &lt; x) {\n                root = root.right;\n            } else {\n                res = res + desc + 1;\n                break;\n            }\n        }\n        return res;\n    }\n</code></pre>\n<p>this still count node not sum of node.\nCan anyone help me with O(logN) time complexity\nPlease help me</p>\n<p>corrected code and help</p>\n"},{"tags":["java","spring","spring-boot","spring-hateoas","hateoas"],"answers":[{"tags":[],"owner":{"account_id":25823770,"reputation":58,"user_id":19562377,"display_name":"Alexander Novikov"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1667893726,"creation_date":1667893726,"answer_id":74357246,"question_id":71912090,"body_markdown":"The question is pretty old, but I faced the same issue today, and it looks pretty hard to find the correct answer.\r\n\r\nAfter some research, I found this example in Spring HATEOAS Docs: [3.3 Affordances][1]\r\n\r\n    @GetMapping(&quot;/employees/{id}&quot;)\r\n    public EntityModel&lt;Employee&gt; findOne(@PathVariable Integer id) {\r\n    \r\n      Class&lt;EmployeeController&gt; controllerClass = EmployeeController.class;\r\n    \r\n      // Start the affordance with the &quot;self&quot; link, i.e. this method.\r\n      Link findOneLink = linkTo(methodOn(controllerClass).findOne(id)).withSelfRel(); \r\n    \r\n      // Return the affordance + a link back to the entire collection resource.\r\n      return EntityModel.of(EMPLOYEES.get(id), //\r\n          findOneLink //\r\n              .andAffordance(afford(methodOn(controllerClass).updateEmployee(null, id))) \r\n              .andAffordance(afford(methodOn(controllerClass).partiallyUpdateEmployee(null, id)))); \r\n    }\r\nIn this case, they use a method **afford(...)**, which works pretty similar to **linkTo(...)**. Looks like passing a null object is a best practice, or at least it is encouraged by the Spring team. So in your case it would look like this:\r\n\r\n    .add(linkTo(methodOn(NotificationItemController.class).saveNotification(null)).withRel(&quot;save&quot;))\r\n\r\n  [1]: https://docs.spring.io/spring-hateoas/docs/current/reference/html/#server.affordances","title":"Representing a request body on HATEOAS link","body":"<p>The question is pretty old, but I faced the same issue today, and it looks pretty hard to find the correct answer.</p>\n<p>After some research, I found this example in Spring HATEOAS Docs: <a href=\"https://docs.spring.io/spring-hateoas/docs/current/reference/html/#server.affordances\" rel=\"nofollow noreferrer\">3.3 Affordances</a></p>\n<pre><code>@GetMapping(&quot;/employees/{id}&quot;)\npublic EntityModel&lt;Employee&gt; findOne(@PathVariable Integer id) {\n\n  Class&lt;EmployeeController&gt; controllerClass = EmployeeController.class;\n\n  // Start the affordance with the &quot;self&quot; link, i.e. this method.\n  Link findOneLink = linkTo(methodOn(controllerClass).findOne(id)).withSelfRel(); \n\n  // Return the affordance + a link back to the entire collection resource.\n  return EntityModel.of(EMPLOYEES.get(id), //\n      findOneLink //\n          .andAffordance(afford(methodOn(controllerClass).updateEmployee(null, id))) \n          .andAffordance(afford(methodOn(controllerClass).partiallyUpdateEmployee(null, id)))); \n}\n</code></pre>\n<p>In this case, they use a method <strong>afford(...)</strong>, which works pretty similar to <strong>linkTo(...)</strong>. Looks like passing a null object is a best practice, or at least it is encouraged by the Spring team. So in your case it would look like this:</p>\n<pre><code>.add(linkTo(methodOn(NotificationItemController.class).saveNotification(null)).withRel(&quot;save&quot;))\n</code></pre>\n"}],"owner":{"account_id":9949128,"reputation":1376,"user_id":8286276,"accept_rate":77,"display_name":"Pelicer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":718,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74357246,"answer_count":1,"score":2,"last_activity_date":1667893726,"creation_date":1650286472,"question_id":71912090,"body_markdown":"I have a simple question regarding how do I link an endpoint through HATEOAS if that endpoint requires a valid `@RequestBody`? I&#39;ve seen [another question][1] regarding this but with no straight answers and so I wonder if the question was not clear enough. \r\n\r\nTake a look at the code below:\r\n\r\n    @GetMapping(path = &quot;/notification/{id}&quot;)\r\n    @ResponseStatus(HttpStatus.OK)\r\n    public NotificationItemResponse getNotification(@PathVariable final String id) {\r\n        return notificationItemMapper.toResponse(findUseCase.findNotification(id))\r\n                .add(linkTo(methodOn(NotificationItemController.class).getNotification(id)).withSelfRel())\r\n                .add(linkTo(methodOn(NotificationItemController.class).saveNotification()).withRel(&quot;save&quot;)) &lt;- error here, saveNotification expects a valid request body\r\n                .add(linkTo(methodOn(NotificationItemController.class).revokeNotification(id)).withRel(&quot;revoke&quot;))\r\n                .add(linkTo(methodOn(NotificationItemController.class).markNotificationAsSeen(id, &quot;{userName}&quot;)).withRel(&quot;visualize&quot;));\r\n    }\r\n\r\n`saveNotification()` is a method on this controller that requires a request body. That request body is a long json containing a notification message, target users, etc. \r\n\r\nIt doesn&#39;t seem right to create a dummy body just to pass down here, and it hardly seem right to pass a null value. What is the correct approach here? How do I correctly link a method that requires a request body? More specifically, what do I pass down as that request body? \r\n\r\nWhat is the best practice here, other than passing a null or dummy body, as I stated before as a non-optimal solution?\r\n\r\n  [1]: https://stackoverflow.com/questions/32469997/hateoas-links-with-put-post","title":"Representing a request body on HATEOAS link","body":"<p>I have a simple question regarding how do I link an endpoint through HATEOAS if that endpoint requires a valid <code>@RequestBody</code>? I've seen <a href=\"https://stackoverflow.com/questions/32469997/hateoas-links-with-put-post\">another question</a> regarding this but with no straight answers and so I wonder if the question was not clear enough.</p>\n<p>Take a look at the code below:</p>\n<pre><code>@GetMapping(path = &quot;/notification/{id}&quot;)\n@ResponseStatus(HttpStatus.OK)\npublic NotificationItemResponse getNotification(@PathVariable final String id) {\n    return notificationItemMapper.toResponse(findUseCase.findNotification(id))\n            .add(linkTo(methodOn(NotificationItemController.class).getNotification(id)).withSelfRel())\n            .add(linkTo(methodOn(NotificationItemController.class).saveNotification()).withRel(&quot;save&quot;)) &lt;- error here, saveNotification expects a valid request body\n            .add(linkTo(methodOn(NotificationItemController.class).revokeNotification(id)).withRel(&quot;revoke&quot;))\n            .add(linkTo(methodOn(NotificationItemController.class).markNotificationAsSeen(id, &quot;{userName}&quot;)).withRel(&quot;visualize&quot;));\n}\n</code></pre>\n<p><code>saveNotification()</code> is a method on this controller that requires a request body. That request body is a long json containing a notification message, target users, etc.</p>\n<p>It doesn't seem right to create a dummy body just to pass down here, and it hardly seem right to pass a null value. What is the correct approach here? How do I correctly link a method that requires a request body? More specifically, what do I pass down as that request body?</p>\n<p>What is the best practice here, other than passing a null or dummy body, as I stated before as a non-optimal solution?</p>\n"},{"tags":["java","pom.xml","extentreports"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":2,"creation_date":1667893275,"post_id":74357153,"comment_id":131269801,"body_markdown":"have you tried with just updating the pom? did it work?","body":"have you tried with just updating the pom? did it work?"},{"owner":{"account_id":11120048,"reputation":1,"user_id":8163194,"display_name":"Aathil"},"score":0,"creation_date":1667963314,"post_id":74357153,"comment_id":131291557,"body_markdown":"not yet, is that only enough ?","body":"not yet, is that only enough ?"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1667976883,"post_id":74357153,"comment_id":131293552,"body_markdown":"try and find out","body":"try and find out"},{"owner":{"account_id":11120048,"reputation":1,"user_id":8163194,"display_name":"Aathil"},"score":0,"creation_date":1668511352,"post_id":74357153,"comment_id":131417759,"body_markdown":"I have updated the pom. but It require some code changes as well in Test Listeners and etc.","body":"I have updated the pom. but It require some code changes as well in Test Listeners and etc."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1668585189,"post_id":74357153,"comment_id":131438366,"body_markdown":"so, that answered that question","body":"so, that answered that question"}],"owner":{"account_id":11120048,"reputation":1,"user_id":8163194,"display_name":"Aathil"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667893203,"creation_date":1667893203,"question_id":74357153,"body_markdown":"I have an extent report, which is currently in Version 2. so the details produce by the extent report are not enough. so I want to upgrade the version from 2 to latest version (v5). so do I need to change the Java code for it or only changing the POM.xml is enough? \r\n\r\nI want to upgrade it to newer version.","title":"Do I need to change the code if I upgrade my Extent Report from Version 2 to Version 5","body":"<p>I have an extent report, which is currently in Version 2. so the details produce by the extent report are not enough. so I want to upgrade the version from 2 to latest version (v5). so do I need to change the Java code for it or only changing the POM.xml is enough?</p>\n<p>I want to upgrade it to newer version.</p>\n"},{"tags":["java","oop","data-structures","doubly-linked-list"],"comments":[{"owner":{"account_id":1781365,"reputation":3989,"user_id":1762193,"display_name":"Mike Housky"},"score":0,"creation_date":1667882758,"post_id":74355726,"comment_id":131267788,"body_markdown":"Rather than repeatedly checking for `head!=null`, consider checking once at entry for the case of trying to delete from an empty list and then proceeding to following links to see if the indexed element actually exists.","body":"Rather than repeatedly checking for <code>head!=null</code>, consider checking once at entry for the case of trying to delete from an empty list and then proceeding to following links to see if the indexed element actually exists."},{"owner":{"account_id":1781365,"reputation":3989,"user_id":1762193,"display_name":"Mike Housky"},"score":0,"creation_date":1667882924,"post_id":74355726,"comment_id":131267806,"body_markdown":"Also, if your application (assignment?) allows it, you might keep a count of the entries in the list so that you can (a) tell without link-chasing whether the link exists, and (b) decide whether an indexed node is nearer the front or or the back.","body":"Also, if your application (assignment?) allows it, you might keep a count of the entries in the list so that you can (a) tell without link-chasing whether the link exists, and (b) decide whether an indexed node is nearer the front or or the back."},{"owner":{"account_id":14826207,"reputation":534,"user_id":10707092,"display_name":"Alois Christen"},"score":0,"creation_date":1667892200,"post_id":74355726,"comment_id":131269513,"body_markdown":"I posted an answer with general remarks regarding your code. For the future, try to ask a specific question, and not a broad one. Like &quot;I input `a` and expect `b`, but got `c`.&quot; Also if this is homework, say it : it won&#39;t help you to have just the code, you won&#39;t learn anything","body":"I posted an answer with general remarks regarding your code. For the future, try to ask a specific question, and not a broad one. Like &quot;I input <code>a</code> and expect <code>b</code>, but got <code>c</code>.&quot; Also if this is homework, say it : it won&#39;t help you to have just the code, you won&#39;t learn anything"}],"answers":[{"tags":[],"owner":{"account_id":14826207,"reputation":534,"user_id":10707092,"display_name":"Alois Christen"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667893014,"creation_date":1667892083,"answer_id":74356972,"question_id":74355726,"body_markdown":"This seems to be homework, so I won&#39;t give a full code, but pointers to where mistakes are. If this isn&#39;t the case feel free to comment and I&#39;ll remove this. This should be a comment, but this is too long to fit in the comment section.\r\n\r\nThere are four things that seem off in the `delete` method:\r\n\r\n### When iterating over the array to find the node to delete, the head is modified. \r\n```java\r\nfor (i = 1; head != null &amp;&amp; i &lt; location; i++) {\r\n     head = head.next;\r\n}\r\n```\r\nThis will permanently modify the head of the doubled linked list, meaning that the nodes before the new head are lost.\r\nYou should use a variable to iterate (I believe `current` was supposed to be that ?)\r\n\r\n### When you delete the head\r\nIt&#39;s correct that there is additional work to do when the location to delete is the head, but `head.next.previous = head;` does nothing : `head` is already the previous node of `head.next`.\r\n\r\n### When you delete the tail\r\nThere is additional work to do when you delete the head, but also when you delete the tail.\r\n\r\n### You never actually remove anything\r\nOther than the lost nodes when iteration, you never remove any node form the list.\r\n\r\nI suggest you start with simple case and see what your current implementation does, then try to correct it. You can also do it pen and paper by drawing the double linked list, this could help you build an intuition on what steps should be done.\r\n","title":"Deleting a Node in a Doubly Linked List at a specfic index in java","body":"<p>This seems to be homework, so I won't give a full code, but pointers to where mistakes are. If this isn't the case feel free to comment and I'll remove this. This should be a comment, but this is too long to fit in the comment section.</p>\n<p>There are four things that seem off in the <code>delete</code> method:</p>\n<h3>When iterating over the array to find the node to delete, the head is modified.</h3>\n<pre class=\"lang-java prettyprint-override\"><code>for (i = 1; head != null &amp;&amp; i &lt; location; i++) {\n     head = head.next;\n}\n</code></pre>\n<p>This will permanently modify the head of the doubled linked list, meaning that the nodes before the new head are lost.\nYou should use a variable to iterate (I believe <code>current</code> was supposed to be that ?)</p>\n<h3>When you delete the head</h3>\n<p>It's correct that there is additional work to do when the location to delete is the head, but <code>head.next.previous = head;</code> does nothing : <code>head</code> is already the previous node of <code>head.next</code>.</p>\n<h3>When you delete the tail</h3>\n<p>There is additional work to do when you delete the head, but also when you delete the tail.</p>\n<h3>You never actually remove anything</h3>\n<p>Other than the lost nodes when iteration, you never remove any node form the list.</p>\n<p>I suggest you start with simple case and see what your current implementation does, then try to correct it. You can also do it pen and paper by drawing the double linked list, this could help you build an intuition on what steps should be done.</p>\n"},{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667892590,"creation_date":1667892590,"answer_id":74357068,"question_id":74355726,"body_markdown":"Your `DoublyLinkedList` class is generic. Therefore class `Node` should also be generic. Consequently, class `Student` needs to implement interface `Comparable`.\r\n\r\nSince you have a doubly-linked list, method `delete` also needs to update `tail` in class `DoublyLinkedList`.\r\n\r\nSince class `DoublyLinkedList` has member `size`, method `delete` also needs to update that member as well.\r\n\r\nBecause class `DoublyLinkedList` has member `size`, the parameter, `location`, of method `delete` is valid if it is not negative and also if it is less than `size`.\r\n\r\nThere are three, separate cases that method `delete` needs to handle:\r\n1. You are deleting the first `Node` in `DoublyLinkedList`.\r\n    - You also need to handle the case where there is only one `Node` in `DoublyLinkedList`.\r\n2. You are deleting the last `Node` in `DoublyLinkedList`.\r\n3. You are deleting a `Node` which is neither the first nor the last.\r\n    - You also need to handle the case where you are deleting the second last `Node`.\r\n\r\nYou didn&#39;t post code for class `Student` so I just made up a class.\r\n\r\nIn the below code, I added `toString` method in class `DoublyLinkedList` simply in order to help &quot;visualize&quot; the list.\r\n\r\nI also added a `main` method to class `DoublyLinkedList` to demonstrate use of method `delete`.\r\n```java\r\npublic class DoublyLinkedList&lt;T extends Comparable&lt;T&gt;&gt; {\r\n    protected Node&lt;T&gt; head;\r\n    protected Node&lt;T&gt; tail;\r\n    int size = 0;\r\n\r\n    public DoublyLinkedList() {\r\n        this.head = null;\r\n        this.tail = null;\r\n    }\r\n\r\n    public Node&lt;T&gt; append(T student) {\r\n        Node&lt;T&gt; append = new Node&lt;&gt;(student);\r\n        if (head == null) {\r\n            head = append;\r\n            tail = append;\r\n        }\r\n        else {\r\n            append.previous = tail;\r\n            tail.next = append;\r\n            tail = tail.next;\r\n        }\r\n        size++;\r\n        return append;\r\n    }\r\n\r\n    public void delete(int location) throws IllegalArgumentException {\r\n        // Exception error for cases in which there are no nodes\r\n        if (head == null || location &lt; 0 || location &gt;= size)\r\n            throw new IllegalArgumentException(&quot;Sorry but the DLL is NULL, please add nodes&quot;);\r\n        // Cases in which the person wants to delete the head at index 0\r\n        if (location == 0) {\r\n            head = head.next;\r\n            if (head != null) {\r\n                head.previous = null;\r\n            }\r\n            if (size == 2) {\r\n                tail = head;\r\n            }\r\n        }\r\n        else if (location == size - 1) {\r\n            tail = tail.previous;\r\n            tail.next = null;\r\n        }\r\n        else {\r\n            Node&lt;T&gt; current = head;\r\n            for (int i = 1; i &lt; location; i++) {\r\n                current = current.next;\r\n            }\r\n            current.next = current.next.next;\r\n            if (current.next == null) {\r\n                tail = current;\r\n            }\r\n            else {\r\n                current.next.previous = current;\r\n            }\r\n        }\r\n        size--;\r\n    }\r\n\r\n    public String toString() {\r\n        StringBuilder sb = new StringBuilder();\r\n        sb.append(String.format(&quot;[%d]:&quot;, size));\r\n        Node&lt;T&gt; current = head;\r\n        while (current != null) {\r\n            sb.append(current);\r\n            sb.append(&#39;\\u2192&#39;);\r\n            current = current.next;\r\n        }\r\n        return sb.toString();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        DoublyLinkedList&lt;Student&gt; dll = new DoublyLinkedList&lt;&gt;();\r\n        System.out.println(dll);\r\n        dll.append(new Student());\r\n        System.out.println(dll);\r\n        dll.append(new Student());\r\n        System.out.println(dll);\r\n        dll.append(new Student());\r\n        System.out.println(dll);\r\n        dll.append(new Student());\r\n        System.out.println(dll);\r\n        dll.delete(1);\r\n        System.out.println(dll);\r\n    }\r\n}\r\n\r\nclass Student implements Comparable&lt;Student&gt; {\r\n    private static int counter;\r\n    private int id;\r\n\r\n    public Student() {\r\n        id = ++counter;\r\n    }\r\n\r\n    @Override\r\n    public int compareTo(Student o) {\r\n        return id - o.id;\r\n    }\r\n\r\n    public boolean equals(Object obj) {\r\n        boolean equal = this == obj;\r\n        if (!equal) {\r\n            if (obj instanceof Student) {\r\n                Student other = (Student) obj;\r\n                equal = id == other.id;\r\n            }\r\n        }\r\n        return equal;\r\n    }\r\n\r\n    public int hashCode() {\r\n        return id;\r\n    }\r\n\r\n    public String toString() {\r\n        return String.format(&quot;%d&quot;, id);\r\n    }\r\n}\r\n\r\nclass Node&lt;T&gt; {\r\n    T student;\r\n    Node&lt;T&gt; next;\r\n    Node&lt;T&gt; previous;\r\n\r\n    public Node(T student) {\r\n        this.student = student;\r\n        this.next = null;\r\n        this.previous = null;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return student.toString();\r\n    }\r\n}\r\n```\r\n","title":"Deleting a Node in a Doubly Linked List at a specfic index in java","body":"<p>Your <code>DoublyLinkedList</code> class is generic. Therefore class <code>Node</code> should also be generic. Consequently, class <code>Student</code> needs to implement interface <code>Comparable</code>.</p>\n<p>Since you have a doubly-linked list, method <code>delete</code> also needs to update <code>tail</code> in class <code>DoublyLinkedList</code>.</p>\n<p>Since class <code>DoublyLinkedList</code> has member <code>size</code>, method <code>delete</code> also needs to update that member as well.</p>\n<p>Because class <code>DoublyLinkedList</code> has member <code>size</code>, the parameter, <code>location</code>, of method <code>delete</code> is valid if it is not negative and also if it is less than <code>size</code>.</p>\n<p>There are three, separate cases that method <code>delete</code> needs to handle:</p>\n<ol>\n<li>You are deleting the first <code>Node</code> in <code>DoublyLinkedList</code>.\n<ul>\n<li>You also need to handle the case where there is only one <code>Node</code> in <code>DoublyLinkedList</code>.</li>\n</ul>\n</li>\n<li>You are deleting the last <code>Node</code> in <code>DoublyLinkedList</code>.</li>\n<li>You are deleting a <code>Node</code> which is neither the first nor the last.\n<ul>\n<li>You also need to handle the case where you are deleting the second last <code>Node</code>.</li>\n</ul>\n</li>\n</ol>\n<p>You didn't post code for class <code>Student</code> so I just made up a class.</p>\n<p>In the below code, I added <code>toString</code> method in class <code>DoublyLinkedList</code> simply in order to help &quot;visualize&quot; the list.</p>\n<p>I also added a <code>main</code> method to class <code>DoublyLinkedList</code> to demonstrate use of method <code>delete</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class DoublyLinkedList&lt;T extends Comparable&lt;T&gt;&gt; {\n    protected Node&lt;T&gt; head;\n    protected Node&lt;T&gt; tail;\n    int size = 0;\n\n    public DoublyLinkedList() {\n        this.head = null;\n        this.tail = null;\n    }\n\n    public Node&lt;T&gt; append(T student) {\n        Node&lt;T&gt; append = new Node&lt;&gt;(student);\n        if (head == null) {\n            head = append;\n            tail = append;\n        }\n        else {\n            append.previous = tail;\n            tail.next = append;\n            tail = tail.next;\n        }\n        size++;\n        return append;\n    }\n\n    public void delete(int location) throws IllegalArgumentException {\n        // Exception error for cases in which there are no nodes\n        if (head == null || location &lt; 0 || location &gt;= size)\n            throw new IllegalArgumentException(&quot;Sorry but the DLL is NULL, please add nodes&quot;);\n        // Cases in which the person wants to delete the head at index 0\n        if (location == 0) {\n            head = head.next;\n            if (head != null) {\n                head.previous = null;\n            }\n            if (size == 2) {\n                tail = head;\n            }\n        }\n        else if (location == size - 1) {\n            tail = tail.previous;\n            tail.next = null;\n        }\n        else {\n            Node&lt;T&gt; current = head;\n            for (int i = 1; i &lt; location; i++) {\n                current = current.next;\n            }\n            current.next = current.next.next;\n            if (current.next == null) {\n                tail = current;\n            }\n            else {\n                current.next.previous = current;\n            }\n        }\n        size--;\n    }\n\n    public String toString() {\n        StringBuilder sb = new StringBuilder();\n        sb.append(String.format(&quot;[%d]:&quot;, size));\n        Node&lt;T&gt; current = head;\n        while (current != null) {\n            sb.append(current);\n            sb.append('\\u2192');\n            current = current.next;\n        }\n        return sb.toString();\n    }\n\n    public static void main(String[] args) {\n        DoublyLinkedList&lt;Student&gt; dll = new DoublyLinkedList&lt;&gt;();\n        System.out.println(dll);\n        dll.append(new Student());\n        System.out.println(dll);\n        dll.append(new Student());\n        System.out.println(dll);\n        dll.append(new Student());\n        System.out.println(dll);\n        dll.append(new Student());\n        System.out.println(dll);\n        dll.delete(1);\n        System.out.println(dll);\n    }\n}\n\nclass Student implements Comparable&lt;Student&gt; {\n    private static int counter;\n    private int id;\n\n    public Student() {\n        id = ++counter;\n    }\n\n    @Override\n    public int compareTo(Student o) {\n        return id - o.id;\n    }\n\n    public boolean equals(Object obj) {\n        boolean equal = this == obj;\n        if (!equal) {\n            if (obj instanceof Student) {\n                Student other = (Student) obj;\n                equal = id == other.id;\n            }\n        }\n        return equal;\n    }\n\n    public int hashCode() {\n        return id;\n    }\n\n    public String toString() {\n        return String.format(&quot;%d&quot;, id);\n    }\n}\n\nclass Node&lt;T&gt; {\n    T student;\n    Node&lt;T&gt; next;\n    Node&lt;T&gt; previous;\n\n    public Node(T student) {\n        this.student = student;\n        this.next = null;\n        this.previous = null;\n    }\n\n    @Override\n    public String toString() {\n        return student.toString();\n    }\n}\n</code></pre>\n"}],"owner":{"display_name":"user20445910"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":394,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1667893014,"creation_date":1667882097,"question_id":74355726,"body_markdown":"I have created a doubly linked list, that appends new nodes to the doubly linked list. I am currently trying to work on deleting a node at a specific index. \r\nThis is my node class, which initializes three variables, next, previous, and it imports objects from a student class that I have. Shouldn&#39;t the `for` loop iterate up to the value of the index entered and then redirect the next value?\r\n\r\n`Node` Class:\r\n```java\r\npublic class Node {\r\n    Student student;\r\n    Node next;\r\n    Node previous;\r\n\r\n    public Node(Student student) {\r\n        this.student = student;\r\n        this.next = null;\r\n        this.previous = null;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return student.toString();\r\n    }\r\n}\r\n```\r\n-----------\r\n`DoublyLinkedList` Class:\r\n```java\r\npublic class DoublyLinkedList &lt;T extends Comparable&lt;T&gt;&gt; {\r\n    protected Node head;\r\n    protected Node tail;\r\n    int size=0;\r\n\r\n    public DoublyLinkedList() {\r\n        this.head = null;\r\n        this.tail = null;\r\n    }\r\n\r\n    public Node append(Student student) {\r\n        Node append = new Node(student);\r\n        if (head == null) {\r\n            head = append;\r\n            tail = append;\r\n        }\r\n        else {\r\n            append.previous = tail;\r\n            tail.next = append;\r\n            tail = tail.next;\r\n        }\r\n        size++;\r\n        return append;\r\n    }\r\n\r\n    public void delete(int location) throws IllegalArgumentException {\r\n        Node current = head;\r\n        int counter = 1;\r\n        int i;\r\n        // Exception error for cases in which there are no nodes\r\n        if (head == null || location &lt; 0)\r\n            throw new IllegalArgumentException(&quot;Sorry but the DLL is NULL, please add nodes&quot;);\r\n        // Cases in which the person wants to delete the head at index 0\r\n        if (location == 0) {\r\n            /* If the node that is next is not null we make that the head\r\n             */\r\n            if (head.next != null) {\r\n                head.next.previous = head;\r\n            }\r\n        }\r\n        for (i = 1; head != null &amp;&amp; i &lt; location; i++) {\r\n            head = head.next;\r\n        }\r\n        if (head == null)\r\n            head = head.next.previous;\r\n    }\r\n}\r\n```\r\nI believe the cases that I made for situations where the head is null, a negative value is entered, and the head node is being deleted are correct. I believe the problem is iterating up the given parameter (index of node being deleted). I did a `for` loop that iterates up to the given index. What I was trying to do is once the value of head reaches the parameter entered, it would redirect the next of the `Node` it iterated up to. Is this logic correct and the syntax wrong or is there another logic for a case like this?","title":"Deleting a Node in a Doubly Linked List at a specfic index in java","body":"<p>I have created a doubly linked list, that appends new nodes to the doubly linked list. I am currently trying to work on deleting a node at a specific index.\nThis is my node class, which initializes three variables, next, previous, and it imports objects from a student class that I have. Shouldn't the <code>for</code> loop iterate up to the value of the index entered and then redirect the next value?</p>\n<p><code>Node</code> Class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Node {\n    Student student;\n    Node next;\n    Node previous;\n\n    public Node(Student student) {\n        this.student = student;\n        this.next = null;\n        this.previous = null;\n    }\n\n    @Override\n    public String toString() {\n        return student.toString();\n    }\n}\n</code></pre>\n<hr />\n<p><code>DoublyLinkedList</code> Class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class DoublyLinkedList &lt;T extends Comparable&lt;T&gt;&gt; {\n    protected Node head;\n    protected Node tail;\n    int size=0;\n\n    public DoublyLinkedList() {\n        this.head = null;\n        this.tail = null;\n    }\n\n    public Node append(Student student) {\n        Node append = new Node(student);\n        if (head == null) {\n            head = append;\n            tail = append;\n        }\n        else {\n            append.previous = tail;\n            tail.next = append;\n            tail = tail.next;\n        }\n        size++;\n        return append;\n    }\n\n    public void delete(int location) throws IllegalArgumentException {\n        Node current = head;\n        int counter = 1;\n        int i;\n        // Exception error for cases in which there are no nodes\n        if (head == null || location &lt; 0)\n            throw new IllegalArgumentException(&quot;Sorry but the DLL is NULL, please add nodes&quot;);\n        // Cases in which the person wants to delete the head at index 0\n        if (location == 0) {\n            /* If the node that is next is not null we make that the head\n             */\n            if (head.next != null) {\n                head.next.previous = head;\n            }\n        }\n        for (i = 1; head != null &amp;&amp; i &lt; location; i++) {\n            head = head.next;\n        }\n        if (head == null)\n            head = head.next.previous;\n    }\n}\n</code></pre>\n<p>I believe the cases that I made for situations where the head is null, a negative value is entered, and the head node is being deleted are correct. I believe the problem is iterating up the given parameter (index of node being deleted). I did a <code>for</code> loop that iterates up to the given index. What I was trying to do is once the value of head reaches the parameter entered, it would redirect the next of the <code>Node</code> it iterated up to. Is this logic correct and the syntax wrong or is there another logic for a case like this?</p>\n"},{"tags":["java","spring-boot","java-stream"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":2,"creation_date":1667886595,"post_id":74356147,"comment_id":131268358,"body_markdown":"Sounds like a job for SQL.","body":"Sounds like a job for SQL."},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1667886620,"post_id":74356147,"comment_id":131268364,"body_markdown":"Does anybody else have no idea if this is possible or not using **Java Stream**?","body":"Does anybody else have no idea if this is possible or not using <b>Java Stream</b>?"},{"owner":{"account_id":14255669,"reputation":330,"user_id":10297961,"display_name":"Tan Sang"},"score":2,"creation_date":1667886755,"post_id":74356147,"comment_id":131268387,"body_markdown":"Stream is possible, but this suit SQL more.\nStream the score list and find all the highest scores and distinct() them by movie_id. then take movie_ids to get a list of movies and sort it the way you want","body":"Stream is possible, but this suit SQL more. Stream the score list and find all the highest scores and distinct() them by movie_id. then take movie_ids to get a list of movies and sort it the way you want"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1667886781,"post_id":74356147,"comment_id":131268391,"body_markdown":"Probably, if you can get the data into a stream. You&#39;re not giving us any code to work with.","body":"Probably, if you can get the data into a stream. You&#39;re not giving us any code to work with."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":3,"creation_date":1667887380,"post_id":74356147,"comment_id":131268485,"body_markdown":"There&#39;s no point in retrieving all this data to your client when it can be processed via SQL on your DB server.","body":"There&#39;s no point in retrieving all this data to your client when it can be processed via SQL on your DB server."},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1667891333,"post_id":74356147,"comment_id":131269263,"body_markdown":"Thanks a lot to all of you for your useful helps. Then I think I should go on SQL query. Regards...","body":"Thanks a lot to all of you for your useful helps. Then I think I should go on SQL query. Regards..."}],"answers":[{"tags":[],"owner":{"display_name":"user17233545"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1667890997,"creation_date":1667890997,"answer_id":74356792,"question_id":74356147,"body_markdown":"Try this.\r\n\r\n    public static void main(String[] args) {\r\n        record Score(int userId, int movieId, int score) {}\r\n        record Movie(int id, String name, int budget) {}\r\n\r\n        List&lt;Movie&gt; movies = List.of(\r\n            new Movie(101, &quot;Mov 1&quot;, 200),\r\n            new Movie(102, &quot;Mov 2&quot;, 500),\r\n            new Movie(103, &quot;Mov 3&quot;, 300));\r\n        List&lt;Score&gt; scores = List.of(\r\n            new Score(1, 101, 6),\r\n            new Score(2, 101, 8),\r\n            new Score(1, 102, 6),\r\n            new Score(2, 102, 9));\r\n\r\n        Map&lt;Integer, Movie&gt; movieMap = movies.stream()\r\n            .collect(Collectors.toMap(Movie::id, Function.identity()));\r\n\r\n        List&lt;Movie&gt; top5 = scores.stream()\r\n            .collect(Collectors.groupingBy(\r\n                Score::movieId, Collectors.averagingDouble(Score::score)))\r\n            .entrySet().stream()\r\n            .sorted(Collections.reverseOrder(Entry.comparingByValue()))\r\n            .limit(5)\r\n            .map(e -&gt; movieMap.get(e.getKey()))\r\n            .sorted(Collections.reverseOrder(Comparator.comparing(Movie::budget)))\r\n            .toList();\r\n        top5.stream().forEach(System.out::println);\r\n    }\r\n\r\noutput:\r\n\r\n    Movie[id=102, name=Mov 2, budget=500]\r\n    Movie[id=101, name=Mov 1, budget=200]\r\n\r\n","title":"Java stream to get average value based on multiple tables","body":"<p>Try this.</p>\n<pre><code>public static void main(String[] args) {\n    record Score(int userId, int movieId, int score) {}\n    record Movie(int id, String name, int budget) {}\n\n    List&lt;Movie&gt; movies = List.of(\n        new Movie(101, &quot;Mov 1&quot;, 200),\n        new Movie(102, &quot;Mov 2&quot;, 500),\n        new Movie(103, &quot;Mov 3&quot;, 300));\n    List&lt;Score&gt; scores = List.of(\n        new Score(1, 101, 6),\n        new Score(2, 101, 8),\n        new Score(1, 102, 6),\n        new Score(2, 102, 9));\n\n    Map&lt;Integer, Movie&gt; movieMap = movies.stream()\n        .collect(Collectors.toMap(Movie::id, Function.identity()));\n\n    List&lt;Movie&gt; top5 = scores.stream()\n        .collect(Collectors.groupingBy(\n            Score::movieId, Collectors.averagingDouble(Score::score)))\n        .entrySet().stream()\n        .sorted(Collections.reverseOrder(Entry.comparingByValue()))\n        .limit(5)\n        .map(e -&gt; movieMap.get(e.getKey()))\n        .sorted(Collections.reverseOrder(Comparator.comparing(Movie::budget)))\n        .toList();\n    top5.stream().forEach(System.out::println);\n}\n</code></pre>\n<p>output:</p>\n<pre><code>Movie[id=102, name=Mov 2, budget=500]\nMovie[id=101, name=Mov 1, budget=200]\n</code></pre>\n"},{"comments":[{"owner":{"account_id":21330249,"reputation":297,"user_id":15702124,"display_name":"LenglBoy"},"score":0,"creation_date":1667892886,"post_id":74356937,"comment_id":131269692,"body_markdown":"That should be the common way true - additional information: It still can be a very &quot;expansive&quot; operation so if you&#39;re not really 100% having the need that it has the real-time-state i would create a 4th column and run a batchwise calculational scheduler all time long beside. More space but over all less traffic/load on DB and faster available results that are almost &quot;up-to-date&quot;","body":"That should be the common way true - additional information: It still can be a very &quot;expansive&quot; operation so if you&#39;re not really 100% having the need that it has the real-time-state i would create a 4th column and run a batchwise calculational scheduler all time long beside. More space but over all less traffic/load on DB and faster available results that are almost &quot;up-to-date&quot;"},{"owner":{"account_id":26863921,"reputation":43,"user_id":20446959,"display_name":"Arkady Dymkov"},"score":0,"creation_date":1667899698,"post_id":74356937,"comment_id":131271919,"body_markdown":"Yep. I don&#39;t know what DB you use, but I suggest to use Materialised View instead of changing the DB structure. I agree with the rest, but the question is what accuracy is needed. In my projects I use a separate statistics module and database replication for this","body":"Yep. I don&#39;t know what DB you use, but I suggest to use Materialised View instead of changing the DB structure. I agree with the rest, but the question is what accuracy is needed. In my projects I use a separate statistics module and database replication for this"}],"tags":[],"owner":{"account_id":26863921,"reputation":43,"user_id":20446959,"display_name":"Arkady Dymkov"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667891851,"creation_date":1667891851,"answer_id":74356937,"question_id":74356147,"body_markdown":"I think, that do by java Stream is not a great idea, because, if ud like to user Pagination, this will not work correctly. (Imagine, that u have 100000000 of movies and scores. Ur server RAM will die)\r\n\r\nIn ur situation I&#39;ll suggest to use JPA query.\r\n\r\n    @Repository\r\n    public interface Movie extends JpaRepository&lt;Movie, Long&gt; {\r\n        @Query(&quot;select m from Movie m &quot; +\r\n                &quot;left join Score s on s.movie_id == m.id&quot; +\r\n                &quot;order by avg(s.score), m.budget&quot;)\r\n        List&lt;Movie&gt; findTopFive();\r\n    }\r\nI hope, that will help u!\r\n    \r\n","title":"Java stream to get average value based on multiple tables","body":"<p>I think, that do by java Stream is not a great idea, because, if ud like to user Pagination, this will not work correctly. (Imagine, that u have 100000000 of movies and scores. Ur server RAM will die)</p>\n<p>In ur situation I'll suggest to use JPA query.</p>\n<pre><code>@Repository\npublic interface Movie extends JpaRepository&lt;Movie, Long&gt; {\n    @Query(&quot;select m from Movie m &quot; +\n            &quot;left join Score s on s.movie_id == m.id&quot; +\n            &quot;order by avg(s.score), m.budget&quot;)\n    List&lt;Movie&gt; findTopFive();\n}\n</code></pre>\n<p>I hope, that will help u!</p>\n"}],"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":130,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74356792,"answer_count":2,"score":0,"last_activity_date":1667891851,"creation_date":1667886230,"question_id":74356147,"body_markdown":"I have 3 related tables; user, movie and score:\r\n\r\n***User:**\r\n\r\n```\r\nid   | name  |\r\n--------------\r\n1    | Hans  |\r\n2    | Carry |\r\n```\r\n\r\n&lt;br/&gt;\r\n\r\n\r\n\r\n***Movie:**\r\n\r\n```\r\nid   | name  | budget |\r\n----------------------\r\n101  | Mov 1 | 200    |\r\n102  | Mov 2 | 500    |\r\n103  | Mov 2 | 300    |\r\n```\r\n\r\n&lt;br/&gt;\r\n\r\n\r\n***Score:**\r\n\r\n```\r\nuser_id   | movie_id  | score  |\r\n--------------------------------\r\n1         | 101       | 7      |\r\n2         | 101       | 8      |\r\n1         | 102       | 6      |\r\n2         | 102       | 9      |\r\n```\r\n\r\n&lt;br/&gt;\r\n\r\n\r\nI am trying to find the 5 movies whose average score is max and then sort these movies based on their budget. So, is that possible using Java Stream? How can I get this kind of list? \r\n\r\nOr if it is not possible, should I use Query and retrieve data from projection?\r\n\r\n\r\n\r\n","title":"Java stream to get average value based on multiple tables","body":"<p>I have 3 related tables; user, movie and score:</p>\n<p>*<strong>User:</strong></p>\n<pre><code>id   | name  |\n--------------\n1    | Hans  |\n2    | Carry |\n</code></pre>\n<br/>\n<p>*<strong>Movie:</strong></p>\n<pre><code>id   | name  | budget |\n----------------------\n101  | Mov 1 | 200    |\n102  | Mov 2 | 500    |\n103  | Mov 2 | 300    |\n</code></pre>\n<br/>\n<p>*<strong>Score:</strong></p>\n<pre><code>user_id   | movie_id  | score  |\n--------------------------------\n1         | 101       | 7      |\n2         | 101       | 8      |\n1         | 102       | 6      |\n2         | 102       | 9      |\n</code></pre>\n<br/>\n<p>I am trying to find the 5 movies whose average score is max and then sort these movies based on their budget. So, is that possible using Java Stream? How can I get this kind of list?</p>\n<p>Or if it is not possible, should I use Query and retrieve data from projection?</p>\n"},{"tags":["java","list","aem","sightly"],"answers":[{"tags":[],"owner":{"account_id":441424,"reputation":10612,"user_id":831507,"accept_rate":100,"display_name":"Vlad"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1667891760,"creation_date":1667891760,"answer_id":74356925,"question_id":74322341,"body_markdown":"You need to explicitly invoke the `colValue` property on the `TableColumn`, I refactored your HTL/Sightly snippet to better show which variable is what type/class:\r\n\r\n```\r\n&lt;table class=&quot;table&quot; data-sly-use.table=&quot;models.Table&quot;&gt;\r\n    &lt;tbody&gt;\r\n        &lt;tr data-sly-repeat.tableRow=&quot;${table.tableRowList}&quot;&gt;\r\n            &lt;th&gt;${tableRow.key @context=&#39;html&#39;}&lt;/th&gt;\r\n            &lt;th data-sly-repeat.tableColumn=&quot;${tableRow.tableColumnList}&quot;&gt;${tableColumn.colValue @context=&#39;html&#39;}&lt;/th&gt;\r\n        &lt;/tr&gt;\r\n    &lt;/tbody&gt;\r\n&lt;/table&gt;\r\n```\r\n\r\nPS: I strongly advise you do not access private properties like that but rather expose them publicly through getters.","title":"Render List Of List in HTL Slightly","body":"<p>You need to explicitly invoke the <code>colValue</code> property on the <code>TableColumn</code>, I refactored your HTL/Sightly snippet to better show which variable is what type/class:</p>\n<pre><code>&lt;table class=&quot;table&quot; data-sly-use.table=&quot;models.Table&quot;&gt;\n    &lt;tbody&gt;\n        &lt;tr data-sly-repeat.tableRow=&quot;${table.tableRowList}&quot;&gt;\n            &lt;th&gt;${tableRow.key @context='html'}&lt;/th&gt;\n            &lt;th data-sly-repeat.tableColumn=&quot;${tableRow.tableColumnList}&quot;&gt;${tableColumn.colValue @context='html'}&lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n<p>PS: I strongly advise you do not access private properties like that but rather expose them publicly through getters.</p>\n"}],"owner":{"account_id":12892506,"reputation":3238,"user_id":9324000,"accept_rate":100,"display_name":"superninja"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74356925,"answer_count":1,"score":-1,"last_activity_date":1667891760,"creation_date":1667591731,"question_id":74322341,"body_markdown":"I have a table and need to render its rows and columns. I am able to see the data properly on CRXDE Lite but I am unable to render it on HTL. \r\n\r\nHere are the java classes:\r\n\r\n\r\n    public class Table {\r\n        \r\n            @ChildResource\r\n            private List&lt;TableRow&gt; tableRowList;\r\n        }\r\n        \r\n        public class TableRow\r\n        {\r\n            @ValueMapValue\r\n            private String key;\r\n            @ChildResource\r\n            private List&lt;TableColumn&gt; tableColumnList;\r\n        }\r\n        \r\n        public class TableColumn\r\n        {\r\n            @ValueMapValue\r\n            private String colValue;\r\n        }\r\n\r\nHere&#39;s the simplified HTL:\r\n\r\n    &lt;sly data-sly-use.model=&quot;models.Table&quot;\r\n        &lt;table class=&quot;table&quot;&gt;\r\n                &lt;tbody&gt;\r\n                &lt;sly data-sly-list=&quot;${model.tableRowList}&quot;&gt;\r\n                    &lt;tr&gt;\r\n                        &lt;th&gt;${item.key @context=&#39;html&#39;}&lt;/th&gt;\r\n                        &lt;th data-sly-repeat.colValue=&quot;${item.tableColumnList}&quot;&gt;${colValue @context=&#39;html&#39;}&lt;/th&gt;\r\n                    &lt;/tr&gt;\r\n                &lt;/sly&gt;\r\n                &lt;/tbody&gt;\r\n            &lt;/table&gt;\r\n    &lt;/sly&gt;\r\n\r\n**The `key` is rendered properly, but not the column list for each row.** When I checked CRXDE, the data is being stored as expected. \r\n [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bhoPd.png\r\n\r\n\r\nAny idea what went wrong?","title":"Render List Of List in HTL Slightly","body":"<p>I have a table and need to render its rows and columns. I am able to see the data properly on CRXDE Lite but I am unable to render it on HTL.</p>\n<p>Here are the java classes:</p>\n<pre><code>public class Table {\n    \n        @ChildResource\n        private List&lt;TableRow&gt; tableRowList;\n    }\n    \n    public class TableRow\n    {\n        @ValueMapValue\n        private String key;\n        @ChildResource\n        private List&lt;TableColumn&gt; tableColumnList;\n    }\n    \n    public class TableColumn\n    {\n        @ValueMapValue\n        private String colValue;\n    }\n</code></pre>\n<p>Here's the simplified HTL:</p>\n<pre><code>&lt;sly data-sly-use.model=&quot;models.Table&quot;\n    &lt;table class=&quot;table&quot;&gt;\n            &lt;tbody&gt;\n            &lt;sly data-sly-list=&quot;${model.tableRowList}&quot;&gt;\n                &lt;tr&gt;\n                    &lt;th&gt;${item.key @context='html'}&lt;/th&gt;\n                    &lt;th data-sly-repeat.colValue=&quot;${item.tableColumnList}&quot;&gt;${colValue @context='html'}&lt;/th&gt;\n                &lt;/tr&gt;\n            &lt;/sly&gt;\n            &lt;/tbody&gt;\n        &lt;/table&gt;\n&lt;/sly&gt;\n</code></pre>\n<p><strong>The <code>key</code> is rendered properly, but not the column list for each row.</strong> When I checked CRXDE, the data is being stored as expected.\n<a href=\"https://i.stack.imgur.com/bhoPd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bhoPd.png\" alt=\"enter image description here\" /></a></p>\n<p>Any idea what went wrong?</p>\n"},{"tags":["java","vaadin8","magnolia"],"owner":{"account_id":12437022,"reputation":15,"user_id":9057003,"display_name":"fuchsa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667891564,"creation_date":1667828096,"question_id":74347447,"body_markdown":"When I create the CustomCheckBoxGroup field, all options of the field are displayed. But if I select one or more options and then save them, they are not saved in Magnolia. I suspect that wrong dataProvider is initialized (JcrDatasource instead of OptionListProvider). \r\n\r\nform:\r\n  properties:\r\n    checkboxGroup:\r\n      $type: customCheckBoxGroupField\r\n    \r\n\r\nWhat is wrong here?\r\n\r\n    public class CustomCheckBoxGroupFieldFactory&lt;T&gt; extends AbstractOptionGroupFieldFactory&lt;CustomCheckBoxGroupFieldDefinition&lt;T&gt;, Set&lt;T&gt;&gt; {\r\n\r\n    private final static String STORES = &quot;stores&quot;;\r\n\r\n    public CustomCheckBoxGroupFieldFactory(\r\n            CustomCheckBoxGroupFieldDefinition&lt;T&gt; definition,\r\n            ComponentProvider componentProvider,\r\n            SelectFieldSupport&lt;Set&lt;T&gt;&gt; selectFieldSupport) {\r\n        super(definition, componentProvider, selectFieldSupport);\r\n    }\r\n\r\n\r\n    @Override\r\n    public CheckBoxGroup&lt;T&gt; createFieldComponent() {\r\n\r\n        CheckBoxGroup&lt;T&gt; items = new CheckBoxGroup&lt;T&gt;(&quot;Test&quot;);\r\n        items.setItems((Collection)(this.selectStores()));\r\n        items.setItemCaptionGenerator(\r\n                item -&gt; ((Option) item).getName() //((Option) item).getLabel()\r\n        );\r\n\r\n        return items;\r\n    }\r\n\r\n    public HasValue&lt;Set&lt;T&gt;&gt; createField() {\r\n            return this.createFieldComponent();\r\n        }\r\n        \r\n    private Collection&lt;Option&gt; selectStores() {\r\n        List&lt;Option&gt; options = new ArrayList&lt;&gt;();\r\n        try {\r\n            Session session = MgnlContext.getJCRSession(STORES);\r\n            Node parent = session.getNode(&quot;/&quot;);\r\n\r\n            for (Node storeNode : NodeUtil.getNodes(parent, NodeTypes.Content.NAME)) {\r\n                if (storeNode.hasProperty(PROPERTY_NAME_DISPLAY_NAME)) {\r\n                    Option option = new Option();\r\n                    option.setValue(storeNode.getIdentifier());\r\n                    option.setLabel(storeNode.getProperty(PROPERTY_NAME_DISPLAY_NAME).getString());\r\n                    option.setName(storeNode.getProperty(PROPERTY_NAME_DISPLAY_NAME).getString());\r\n                    options.add(option);\r\n                }\r\n\r\n            }\r\n\r\n        } catch (RepositoryException e) {\r\n            log.error(&quot;Cannot preselect already configured workspaces.&quot;, e);\r\n        }\r\n        return options;\r\n    }\r\n\r\n}","title":"How do I build a custom CheckBoxGroup field in Magnolia 6.2 CMS?","body":"<p>When I create the CustomCheckBoxGroup field, all options of the field are displayed. But if I select one or more options and then save them, they are not saved in Magnolia. I suspect that wrong dataProvider is initialized (JcrDatasource instead of OptionListProvider).</p>\n<p>form:\nproperties:\ncheckboxGroup:\n$type: customCheckBoxGroupField</p>\n<p>What is wrong here?</p>\n<pre><code>public class CustomCheckBoxGroupFieldFactory&lt;T&gt; extends AbstractOptionGroupFieldFactory&lt;CustomCheckBoxGroupFieldDefinition&lt;T&gt;, Set&lt;T&gt;&gt; {\n\nprivate final static String STORES = &quot;stores&quot;;\n\npublic CustomCheckBoxGroupFieldFactory(\n        CustomCheckBoxGroupFieldDefinition&lt;T&gt; definition,\n        ComponentProvider componentProvider,\n        SelectFieldSupport&lt;Set&lt;T&gt;&gt; selectFieldSupport) {\n    super(definition, componentProvider, selectFieldSupport);\n}\n\n\n@Override\npublic CheckBoxGroup&lt;T&gt; createFieldComponent() {\n\n    CheckBoxGroup&lt;T&gt; items = new CheckBoxGroup&lt;T&gt;(&quot;Test&quot;);\n    items.setItems((Collection)(this.selectStores()));\n    items.setItemCaptionGenerator(\n            item -&gt; ((Option) item).getName() //((Option) item).getLabel()\n    );\n\n    return items;\n}\n\npublic HasValue&lt;Set&lt;T&gt;&gt; createField() {\n        return this.createFieldComponent();\n    }\n    \nprivate Collection&lt;Option&gt; selectStores() {\n    List&lt;Option&gt; options = new ArrayList&lt;&gt;();\n    try {\n        Session session = MgnlContext.getJCRSession(STORES);\n        Node parent = session.getNode(&quot;/&quot;);\n\n        for (Node storeNode : NodeUtil.getNodes(parent, NodeTypes.Content.NAME)) {\n            if (storeNode.hasProperty(PROPERTY_NAME_DISPLAY_NAME)) {\n                Option option = new Option();\n                option.setValue(storeNode.getIdentifier());\n                option.setLabel(storeNode.getProperty(PROPERTY_NAME_DISPLAY_NAME).getString());\n                option.setName(storeNode.getProperty(PROPERTY_NAME_DISPLAY_NAME).getString());\n                options.add(option);\n            }\n\n        }\n\n    } catch (RepositoryException e) {\n        log.error(&quot;Cannot preselect already configured workspaces.&quot;, e);\n    }\n    return options;\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":2592003,"reputation":752,"user_id":2246511,"display_name":"jibbs"},"score":1,"creation_date":1477423986,"post_id":40248035,"comment_id":67758719,"body_markdown":"Chrome 54?\nhttp://stackoverflow.com/questions/40240299/chrome-driver-stopped-working-for-chrome-browser-version-54-with-the-latest-chro","body":"Chrome 54? <a href=\"http://stackoverflow.com/questions/40240299/chrome-driver-stopped-working-for-chrome-browser-version-54-with-the-latest-chro\" title=\"chrome driver stopped working for chrome browser version 54 with the latest chro\">stackoverflow.com/questions/40240299/&hellip;</a>"},{"owner":{"account_id":2746777,"reputation":433,"user_id":2367036,"accept_rate":33,"display_name":"Uma Senthil"},"score":1,"creation_date":1477429548,"post_id":40248035,"comment_id":67761913,"body_markdown":"Thank you @jibbs! Yes it is Chrome 54. It is not the chrome driver version or Selenium web driver version. It is the Google chrome update. Reverted back to version 53, It worked.","body":"Thank you @jibbs! Yes it is Chrome 54. It is not the chrome driver version or Selenium web driver version. It is the Google chrome update. Reverted back to version 53, It worked."},{"owner":{"account_id":9623343,"reputation":1,"user_id":7143791,"display_name":"Dina Bo"},"score":0,"creation_date":1480500650,"post_id":40248035,"comment_id":68988668,"body_markdown":"Use chromedriver version 2.25 with Selenium 3, it works for me","body":"Use chromedriver version 2.25 with Selenium 3, it works for me"}],"answers":[{"tags":[],"owner":{"account_id":8037196,"reputation":958,"user_id":6059967,"display_name":"Justin Lambert"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1592480956,"creation_date":1592480956,"answer_id":62449315,"question_id":40248035,"body_markdown":"System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/Users../Applications/chromedriver&quot;)\r\n\r\nneed to change in above Line \r\nSystem.setProperty(&quot;**W**ebdriver.chrome.driver&quot;, &quot;/Users../Applications/chromedriver&quot;)\r\n\r\nW should be capital letter","title":"session not created exception while running Selenium webdriver","body":"<p>System.setProperty(\"webdriver.chrome.driver\", \"/Users../Applications/chromedriver\")</p>\n\n<p>need to change in above Line \nSystem.setProperty(\"<strong>W</strong>ebdriver.chrome.driver\", \"/Users../Applications/chromedriver\")</p>\n\n<p>W should be capital letter</p>\n"},{"tags":[],"owner":{"account_id":18437444,"reputation":417,"user_id":13430888,"display_name":"Ayren King"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1595136773,"creation_date":1595136773,"answer_id":62976663,"question_id":40248035,"body_markdown":"Here is a bit of code I used with working with Selenium. Make sure your Chrome Driver is the correct version.\r\n```\r\n// Link to Chrome Driver\r\n// This gives Selenium access to the Chrome Driver in the parent directory\r\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;chromedriver.exe&quot;);\r\n\r\n// Launches Driver\r\n        final WebDriver driver = new ChromeDriver();\r\n        driver.get(&quot;http://google.com/&quot;);\r\n\r\n// Maximizes Google Chrome window\r\n        driver.manage().window().maximize();\r\n```","title":"session not created exception while running Selenium webdriver","body":"<p>Here is a bit of code I used with working with Selenium. Make sure your Chrome Driver is the correct version.</p>\n<pre><code>// Link to Chrome Driver\n// This gives Selenium access to the Chrome Driver in the parent directory\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;chromedriver.exe&quot;);\n\n// Launches Driver\n        final WebDriver driver = new ChromeDriver();\n        driver.get(&quot;http://google.com/&quot;);\n\n// Maximizes Google Chrome window\n        driver.manage().window().maximize();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20290145,"reputation":103,"user_id":14881972,"display_name":"Gidoneli"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667891546,"creation_date":1667891546,"answer_id":74356888,"question_id":40248035,"body_markdown":"The first error you encountered was indeed caused by a mismatch in the binary version between Chrome and the WebDriver.\r\n\r\nBut you&#39;ve already figured this out, so onto the issue, you are facing now:\r\n\r\n    org.openqa.selenium.NoSuchSessionException: no such session\r\n\r\nThis error implies that the ChromeDriver was unable to communicate with the existing Browsing Context i.e. Chrome Browser session.\r\n\r\nThis can be due to a variety of reasons as [discussed here](https://bugs.chromium.org/p/chromedriver/issues/detail?id=732). But given those issues have been fixed in a more recent version of ChromeDriver, if you are still running into this issue now it&#39;s most likely due to explicit or implicit session deletion.\r\n\r\nIt&#39;s a common mistake where you delete the session, either by calling .quit() or by closing the last window or tab, then attempting to use the session again.\r\n\r\nExample:\r\n\r\n```python\r\nfrom selenium import webdriver\r\n\r\nsession = webdriver.Firefox()\r\nprint(&quot;Current session is {}&quot;.format(session.session_id))\r\n\r\n# Explicit session deletion\r\nsession.quit()\r\n\r\n# OR\r\n\r\n# Implicit session deletion (close window/tab)\r\nsession.close()\r\n\r\n# Attempting to use the session here will throw the NoSuchSessionException\r\nsession.get(&quot;https://example.com&quot;)\r\n```\r\n","title":"session not created exception while running Selenium webdriver","body":"<p>The first error you encountered was indeed caused by a mismatch in the binary version between Chrome and the WebDriver.</p>\n<p>But you've already figured this out, so onto the issue, you are facing now:</p>\n<pre><code>org.openqa.selenium.NoSuchSessionException: no such session\n</code></pre>\n<p>This error implies that the ChromeDriver was unable to communicate with the existing Browsing Context i.e. Chrome Browser session.</p>\n<p>This can be due to a variety of reasons as <a href=\"https://bugs.chromium.org/p/chromedriver/issues/detail?id=732\" rel=\"nofollow noreferrer\">discussed here</a>. But given those issues have been fixed in a more recent version of ChromeDriver, if you are still running into this issue now it's most likely due to explicit or implicit session deletion.</p>\n<p>It's a common mistake where you delete the session, either by calling .quit() or by closing the last window or tab, then attempting to use the session again.</p>\n<p>Example:</p>\n<pre class=\"lang-py prettyprint-override\"><code>from selenium import webdriver\n\nsession = webdriver.Firefox()\nprint(&quot;Current session is {}&quot;.format(session.session_id))\n\n# Explicit session deletion\nsession.quit()\n\n# OR\n\n# Implicit session deletion (close window/tab)\nsession.close()\n\n# Attempting to use the session here will throw the NoSuchSessionException\nsession.get(&quot;https://example.com&quot;)\n</code></pre>\n"}],"owner":{"account_id":2746777,"reputation":433,"user_id":2367036,"accept_rate":33,"display_name":"Uma Senthil"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18148,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":3,"score":7,"last_activity_date":1667891546,"creation_date":1477423246,"question_id":40248035,"body_markdown":"Till yesterday: The below code was working fine.\r\n\r\n\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/Users../Applications/chromedriver&quot;);\r\n\t\t\t\t\r\n\tWebDriver driver = new ChromeDriver();\r\n\tdriver.get(&quot;www.google.com&quot;);\r\n\t\t\t\r\n\tDimension dim = new Dimension(1280,5277);\r\n\tdriver.manage().window().setSize(dim);\r\n\t\t\t\r\n\tdriver.quit();\r\n\r\nBut today morning it started throwing:\r\n**Exception in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: session not created exception**\r\n\r\nI read several answers in Stackoverflow. I understood that this error is thrown if there is a version mismatch between the selenium webdriver and chrome driver. So I download the latest Selenium Webdriver(3.0.1 for java) and chromedriver(2.4).I get an error \r\n\r\norg.openqa.selenium.NoSuchSessionException: no such session\r\n\r\nSo reverted back to the version I was using(2.53 for selenium web driver, I get the same error.\r\n\r\nI tried below solutions: \r\n\r\nkilling all the chromedriver processes. \r\n\r\nRebooting the machine. \r\n\r\n`Eclipse-&gt;project clean`\r\n\r\nNothing helps","title":"session not created exception while running Selenium webdriver","body":"<p>Till yesterday: The below code was working fine.</p>\n\n<pre><code>System.setProperty(\"webdriver.chrome.driver\", \"/Users../Applications/chromedriver\");\n\nWebDriver driver = new ChromeDriver();\ndriver.get(\"www.google.com\");\n\nDimension dim = new Dimension(1280,5277);\ndriver.manage().window().setSize(dim);\n\ndriver.quit();\n</code></pre>\n\n<p>But today morning it started throwing:\n<strong>Exception in thread \"main\" org.openqa.selenium.SessionNotCreatedException: session not created exception</strong></p>\n\n<p>I read several answers in Stackoverflow. I understood that this error is thrown if there is a version mismatch between the selenium webdriver and chrome driver. So I download the latest Selenium Webdriver(3.0.1 for java) and chromedriver(2.4).I get an error </p>\n\n<p>org.openqa.selenium.NoSuchSessionException: no such session</p>\n\n<p>So reverted back to the version I was using(2.53 for selenium web driver, I get the same error.</p>\n\n<p>I tried below solutions: </p>\n\n<p>killing all the chromedriver processes. </p>\n\n<p>Rebooting the machine. </p>\n\n<p><code>Eclipse-&gt;project clean</code></p>\n\n<p>Nothing helps</p>\n"},{"tags":["java","tomcat","log4j","log4j2","tomcat9"],"comments":[{"owner":{"account_id":16269349,"reputation":13462,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1667654699,"post_id":74314037,"comment_id":131220458,"body_markdown":"Can you add the code of `com.demo.custom.filter.NewSession` to your question?","body":"Can you add the code of <code>com.demo.custom.filter.NewSession</code> to your question?"},{"owner":{"account_id":4201054,"reputation":1880,"user_id":3441151,"accept_rate":47,"display_name":"user3441151"},"score":0,"creation_date":1667809501,"post_id":74314037,"comment_id":131247297,"body_markdown":"@PiotrP.Karwasz I have pasted my java code, please check and help me to fix it.","body":"@PiotrP.Karwasz I have pasted my java code, please check and help me to fix it."}],"answers":[{"tags":[],"owner":{"account_id":4201054,"reputation":1880,"user_id":3441151,"accept_rate":47,"display_name":"user3441151"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1667887241,"creation_date":1667887241,"answer_id":74356279,"question_id":74314037,"body_markdown":"My issue is resolved by doing the below changes TEST_log4j.xml file as given below.\r\n\r\n    &lt;Configuration&gt;\r\n    \t&lt;Appenders&gt;\r\n    \t\t&lt;Console name=&quot;STDOUT&quot; target=&quot;SYSTEM_OUT&quot;&gt;\r\n    \t\t\t&lt;PatternLayout pattern=&quot;%d{MM/dd HH:mm:ss} %-5p %30.30c %x - %m\\n&quot;/&gt;\r\n    \t\t&lt;/Console&gt;\r\n    \t\t&lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;/opt/tomcat/logs/MyCustomClassLogs.log&quot; filePattern=&quot;/opt/tomcat/logs/MyCustomClassLogs.log-%i&quot;&gt;\r\n    \t\t\t&lt;PatternLayout&gt;\r\n    \t\t\t\t&lt;pattern&gt;%d{MM/dd HH:mm:ss} %-5p %30.30c %x - %m\\n&lt;/pattern&gt;\r\n    \t\t\t&lt;/PatternLayout&gt;\r\n    \t\t\t&lt;Policies&gt;\r\n    \t\t\t\t&lt;SizeBasedTriggeringPolicy size=&quot;5 MB&quot; /&gt;\r\n    \t\t\t&lt;/Policies&gt;\r\n    \t\t\t&lt;DefaultRolloverStrategy max=&quot;5&quot;/&gt;\r\n    \t\t&lt;/RollingFile&gt;\r\n    \t\t&lt;RollingFile name=&quot;ResetClass&quot; fileName=&quot;/opt/tomcat/logs/resetTrace.log&quot; filePattern=&quot;/opt/tomcat/logs/resetTrace.log-%i&quot;&gt;\r\n    \t\t\t&lt;PatternLayout&gt;\r\n    \t\t\t\t&lt;pattern&gt;%d{MM/dd HH:mm:ss} %-5p %30.30c %x - %m\\n&lt;/pattern&gt;\r\n    \t\t\t&lt;/PatternLayout&gt;\r\n    \t\t\t&lt;Policies&gt;\r\n    \t\t\t\t&lt;SizeBasedTriggeringPolicy size=&quot;5 MB&quot; /&gt;\r\n    \t\t\t&lt;/Policies&gt;\r\n    \t\t\t&lt;DefaultRolloverStrategy max=&quot;5&quot;/&gt;\r\n    \t\t&lt;/RollingFile&gt;\r\n    \t&lt;/Appenders&gt;\r\n    \t&lt;Loggers&gt;\r\n    \t\t&lt;Logger name=&quot;com.demo.custom.filter.ResetClass&quot; level=&quot;TRACE&quot;&gt;\r\n    \t\t\t&lt;AppenderRef ref=&quot;ResetClass&quot;/&gt;\r\n    \t\t&lt;/Logger&gt;\r\n    \t\t&lt;Logger name=&quot;com.demo.custom.test.MyCustomClass&quot; level=&quot;TRACE&quot;&gt;\r\n    \t\t\t&lt;AppenderRef ref=&quot;RollingFile&quot;/&gt;\r\n    \t\t&lt;/Logger&gt;\r\n    \t\t&lt;Root level=&quot;error&quot;&gt;\r\n    \t\t\t&lt;AppenderRef ref=&quot;STDOUT&quot;/&gt;\r\n    \t\t&lt;/Root&gt;\r\n    \t&lt;/Loggers&gt;\r\n    &lt;/Configuration&gt;","title":"tomcat error configuration filter got null from web.xml","body":"<p>My issue is resolved by doing the below changes TEST_log4j.xml file as given below.</p>\n<pre><code>&lt;Configuration&gt;\n    &lt;Appenders&gt;\n        &lt;Console name=&quot;STDOUT&quot; target=&quot;SYSTEM_OUT&quot;&gt;\n            &lt;PatternLayout pattern=&quot;%d{MM/dd HH:mm:ss} %-5p %30.30c %x - %m\\n&quot;/&gt;\n        &lt;/Console&gt;\n        &lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;/opt/tomcat/logs/MyCustomClassLogs.log&quot; filePattern=&quot;/opt/tomcat/logs/MyCustomClassLogs.log-%i&quot;&gt;\n            &lt;PatternLayout&gt;\n                &lt;pattern&gt;%d{MM/dd HH:mm:ss} %-5p %30.30c %x - %m\\n&lt;/pattern&gt;\n            &lt;/PatternLayout&gt;\n            &lt;Policies&gt;\n                &lt;SizeBasedTriggeringPolicy size=&quot;5 MB&quot; /&gt;\n            &lt;/Policies&gt;\n            &lt;DefaultRolloverStrategy max=&quot;5&quot;/&gt;\n        &lt;/RollingFile&gt;\n        &lt;RollingFile name=&quot;ResetClass&quot; fileName=&quot;/opt/tomcat/logs/resetTrace.log&quot; filePattern=&quot;/opt/tomcat/logs/resetTrace.log-%i&quot;&gt;\n            &lt;PatternLayout&gt;\n                &lt;pattern&gt;%d{MM/dd HH:mm:ss} %-5p %30.30c %x - %m\\n&lt;/pattern&gt;\n            &lt;/PatternLayout&gt;\n            &lt;Policies&gt;\n                &lt;SizeBasedTriggeringPolicy size=&quot;5 MB&quot; /&gt;\n            &lt;/Policies&gt;\n            &lt;DefaultRolloverStrategy max=&quot;5&quot;/&gt;\n        &lt;/RollingFile&gt;\n    &lt;/Appenders&gt;\n    &lt;Loggers&gt;\n        &lt;Logger name=&quot;com.demo.custom.filter.ResetClass&quot; level=&quot;TRACE&quot;&gt;\n            &lt;AppenderRef ref=&quot;ResetClass&quot;/&gt;\n        &lt;/Logger&gt;\n        &lt;Logger name=&quot;com.demo.custom.test.MyCustomClass&quot; level=&quot;TRACE&quot;&gt;\n            &lt;AppenderRef ref=&quot;RollingFile&quot;/&gt;\n        &lt;/Logger&gt;\n        &lt;Root level=&quot;error&quot;&gt;\n            &lt;AppenderRef ref=&quot;STDOUT&quot;/&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16269349,"reputation":13462,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667891152,"creation_date":1667891152,"answer_id":74356821,"question_id":74314037,"body_markdown":"The error message you cite in the title _&quot;domConfigFile got null from web.xml, setting hardcoded value&quot;_ is caused by the [`@WebFilter`](https://jakarta.ee/specifications/servlet/4.0/apidocs/javax/servlet/annotation/webfilter) on your filter class. This annotation registers a **second** instance of your filter, with an empty configuration (and an empty mapping).\r\n\r\nIf you want a single instance of your filter, either add `name=&quot;newsession&quot;` to your `@WebFilter` annotation or use the fully qualified class name (`com.demo.custom.filter.NewSession`) as filter name in `web.xml`.","title":"tomcat error configuration filter got null from web.xml","body":"<p>The error message you cite in the title <em>&quot;domConfigFile got null from web.xml, setting hardcoded value&quot;</em> is caused by the <a href=\"https://jakarta.ee/specifications/servlet/4.0/apidocs/javax/servlet/annotation/webfilter\" rel=\"nofollow noreferrer\"><code>@WebFilter</code></a> on your filter class. This annotation registers a <strong>second</strong> instance of your filter, with an empty configuration (and an empty mapping).</p>\n<p>If you want a single instance of your filter, either add <code>name=&quot;newsession&quot;</code> to your <code>@WebFilter</code> annotation or use the fully qualified class name (<code>com.demo.custom.filter.NewSession</code>) as filter name in <code>web.xml</code>.</p>\n"}],"owner":{"account_id":4201054,"reputation":1880,"user_id":3441151,"accept_rate":47,"display_name":"user3441151"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":347,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74356279,"answer_count":2,"score":0,"last_activity_date":1667891152,"creation_date":1667550068,"question_id":74314037,"body_markdown":"I have configured some filters (given below) in web.xml of the tomcat server which were working fine before when we are on log4j1.x.\r\n\r\n    &lt;filter&gt;\r\n    \t&lt;filter-name&gt;newsession&lt;/filter-name&gt;\r\n    \t&lt;display-name&gt;newsession&lt;/display-name&gt;\r\n    \t&lt;description&gt;newsession&lt;/description&gt;\r\n    \t&lt;filter-class&gt;com.demo.custom.filter.NewSession&lt;/filter-class&gt;\r\n    \t&lt;init-param&gt;\r\n    \t\t&lt;param-name&gt;DomainName&lt;/param-name&gt;\r\n    \t\t&lt;param-value&gt;.testlab.com&lt;/param-value&gt;\r\n    \t&lt;/init-param&gt;\r\n    \t&lt;init-param&gt;\r\n    \t\t&lt;param-name&gt;DomConfigFile&lt;/param-name&gt;\r\n    \t\t&lt;param-value&gt;/opt/tomcat/webapp/demoapp/WEB-INF/classes/NAM_log4j.xml&lt;/param-value&gt;\r\n    \t&lt;/init-param&gt;\r\n    \t&lt;init-param&gt;\r\n    \t\t&lt;param-name&gt;customPropFile&lt;/param-name&gt;\r\n    \t\t&lt;param-value&gt;/opt/tomcat/webapp/demoapp/WEB-INF/classes/custom_resources.properties&lt;/param-value&gt;\r\n    \t&lt;/init-param&gt;\r\n    &lt;/filter&gt;\r\n    &lt;filter-mapping&gt;\r\n    \t&lt;filter-name&gt;newsession&lt;/filter-name&gt;\r\n    \t&lt;url-pattern&gt;/idff/sso&lt;/url-pattern&gt;\r\n    &lt;/filter-mapping&gt;\r\n\r\nBut now when I have moved from log4j1.x to log4j2.x after that when we are starting the tomcat service we are getting the below error in the log. If I placed the &quot;log4j-1.2.15.jar&quot; file again it is working fine. But now we are on log4j2.x so we cannot use the old log4j1.x.\r\n\r\n    ERROR com.demo.custom.filter.NewSession - No transformation given\r\n    ERROR com.demo.custom.filter.NewSession - domConfigFile got null from web.xml, setting hardcoded value\r\n    ERROR com.demo.custom.filter.NewSession - custom_resources got null from web.xml, setting hardcoded value\r\n    main ERROR Error processing element category ([Configuration: null]): CLASS_NOT_FOUND\r\n    main ERROR Unknown object &quot;root&quot; of type org.apache.logging.log4j.core.config.LoggerConfig is ignored: try nesting it inside one of: [&quot;Appenders&quot;, &quot;Loggers&quot;, &quot;Properties&quot;, &quot;Scripts&quot;, &quot;CustomLevels&quot;]\r\n\r\nMy Java code is given below, I have pasted only the code where I am trying to initialize the servlet filters.\r\n\r\n    package com.demo.custom.filter;\r\n    \r\n    import javax.servlet.Filter;\r\n    import javax.servlet.FilterConfig;\r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.ServletRequest;\r\n    import javax.servlet.annotation.WebFilter;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletRequestWrapper;\r\n    import org.apache.logging.log4j.Logger;\r\n    import org.apache.logging.log4j.LogManager;\r\n    \r\n    @WebFilter({ &quot;/NewSession&quot; })\r\n    public class NewSession implements Filter {\r\n    \tstatic class FilteredRequest extends HttpServletRequestWrapper {\r\n        \tpublic FilteredRequest(ServletRequest request) {\r\n        \t\tsuper((HttpServletRequest)request);\r\n        \t}\r\n    \r\n        \tpublic String getParameter(String paramName) {\r\n        \t\tString value = super.getParameter(paramName);\r\n        \t\t*********************************************\r\n        \t\treturn value;\r\n        \t}\r\n    \r\n        \tpublic static String decryptValue(String value){\r\n        \t\tString decryptvalue = null;\r\n        \t\t********************************************\r\n        \t    return decryptvalue;\r\n        \t}\r\n        }\r\n    \r\n    \tprivate static String domainName = null;\r\n    \tprivate static String domConfigFile=null;\r\n    \tprivate static Logger myLogger = LogManager.getLogger(NewSession.class);\r\n    \tprivate String custom_resources;\r\n    \r\n    \tpublic void init(FilterConfig fConfig) throws ServletException {\r\n    \t\ttry{\r\n    \t\t\tdomainName = fConfig.getInitParameter(&quot;DomainName&quot;);\r\n    \t\t\tdomConfigFile=fConfig.getInitParameter(&quot;DomConfigFile&quot;);\r\n    \t\t\tcustom_resources=fConfig.getInitParameter(&quot;customPropFile&quot;);\r\n    \t\t}catch(Exception e){\r\n    \t\t\tmyLogger.error(e.getMessage());\r\n    \t\t}\r\n    \t\tif(domainName == null){\r\n    \t\t\tdomainName = &quot;.testlab.com&quot;;\r\n    \t\t}\r\n    \t\tif(domConfigFile==null){\r\n    \t\t\tmyLogger.error(&quot;domConfigFile got null from web.xml, setting hardcoded value&quot;);\r\n    \t\t\tdomConfigFile = &quot;/opt/tomcat/webapp/demoapp/WEB-INF/classes/NAM_log4j.xml&quot;;\r\n    \t\t}\r\n    \t\tif(custom_resources==null){\r\n    \t\t\tmyLogger.error(&quot;custom_resources got null from web.xml, setting hardcoded value&quot;);\r\n    \t\t\tnidp_custom_resources = &quot;/opt/tomcat/webapp/demoapp/WEB-INF/classes/custom_resources.properties&quot;;\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nPlease help me on this. I am using tomcat 9 and log4j v2.17.1.","title":"tomcat error configuration filter got null from web.xml","body":"<p>I have configured some filters (given below) in web.xml of the tomcat server which were working fine before when we are on log4j1.x.</p>\n<pre><code>&lt;filter&gt;\n    &lt;filter-name&gt;newsession&lt;/filter-name&gt;\n    &lt;display-name&gt;newsession&lt;/display-name&gt;\n    &lt;description&gt;newsession&lt;/description&gt;\n    &lt;filter-class&gt;com.demo.custom.filter.NewSession&lt;/filter-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;DomainName&lt;/param-name&gt;\n        &lt;param-value&gt;.testlab.com&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;DomConfigFile&lt;/param-name&gt;\n        &lt;param-value&gt;/opt/tomcat/webapp/demoapp/WEB-INF/classes/NAM_log4j.xml&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;customPropFile&lt;/param-name&gt;\n        &lt;param-value&gt;/opt/tomcat/webapp/demoapp/WEB-INF/classes/custom_resources.properties&lt;/param-value&gt;\n    &lt;/init-param&gt;\n&lt;/filter&gt;\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;newsession&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/idff/sso&lt;/url-pattern&gt;\n&lt;/filter-mapping&gt;\n</code></pre>\n<p>But now when I have moved from log4j1.x to log4j2.x after that when we are starting the tomcat service we are getting the below error in the log. If I placed the &quot;log4j-1.2.15.jar&quot; file again it is working fine. But now we are on log4j2.x so we cannot use the old log4j1.x.</p>\n<pre><code>ERROR com.demo.custom.filter.NewSession - No transformation given\nERROR com.demo.custom.filter.NewSession - domConfigFile got null from web.xml, setting hardcoded value\nERROR com.demo.custom.filter.NewSession - custom_resources got null from web.xml, setting hardcoded value\nmain ERROR Error processing element category ([Configuration: null]): CLASS_NOT_FOUND\nmain ERROR Unknown object &quot;root&quot; of type org.apache.logging.log4j.core.config.LoggerConfig is ignored: try nesting it inside one of: [&quot;Appenders&quot;, &quot;Loggers&quot;, &quot;Properties&quot;, &quot;Scripts&quot;, &quot;CustomLevels&quot;]\n</code></pre>\n<p>My Java code is given below, I have pasted only the code where I am trying to initialize the servlet filters.</p>\n<pre><code>package com.demo.custom.filter;\n\nimport javax.servlet.Filter;\nimport javax.servlet.FilterConfig;\nimport javax.servlet.ServletException;\nimport javax.servlet.ServletRequest;\nimport javax.servlet.annotation.WebFilter;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletRequestWrapper;\nimport org.apache.logging.log4j.Logger;\nimport org.apache.logging.log4j.LogManager;\n\n@WebFilter({ &quot;/NewSession&quot; })\npublic class NewSession implements Filter {\n    static class FilteredRequest extends HttpServletRequestWrapper {\n        public FilteredRequest(ServletRequest request) {\n            super((HttpServletRequest)request);\n        }\n\n        public String getParameter(String paramName) {\n            String value = super.getParameter(paramName);\n            *********************************************\n            return value;\n        }\n\n        public static String decryptValue(String value){\n            String decryptvalue = null;\n            ********************************************\n            return decryptvalue;\n        }\n    }\n\n    private static String domainName = null;\n    private static String domConfigFile=null;\n    private static Logger myLogger = LogManager.getLogger(NewSession.class);\n    private String custom_resources;\n\n    public void init(FilterConfig fConfig) throws ServletException {\n        try{\n            domainName = fConfig.getInitParameter(&quot;DomainName&quot;);\n            domConfigFile=fConfig.getInitParameter(&quot;DomConfigFile&quot;);\n            custom_resources=fConfig.getInitParameter(&quot;customPropFile&quot;);\n        }catch(Exception e){\n            myLogger.error(e.getMessage());\n        }\n        if(domainName == null){\n            domainName = &quot;.testlab.com&quot;;\n        }\n        if(domConfigFile==null){\n            myLogger.error(&quot;domConfigFile got null from web.xml, setting hardcoded value&quot;);\n            domConfigFile = &quot;/opt/tomcat/webapp/demoapp/WEB-INF/classes/NAM_log4j.xml&quot;;\n        }\n        if(custom_resources==null){\n            myLogger.error(&quot;custom_resources got null from web.xml, setting hardcoded value&quot;);\n            nidp_custom_resources = &quot;/opt/tomcat/webapp/demoapp/WEB-INF/classes/custom_resources.properties&quot;;\n        }\n    }\n}\n</code></pre>\n<p>Please help me on this. I am using tomcat 9 and log4j v2.17.1.</p>\n"},{"tags":["java","android","android-bluetooth"],"comments":[{"owner":{"account_id":14283811,"reputation":6405,"user_id":10317684,"display_name":"Ricky Mo"},"score":1,"creation_date":1667892005,"post_id":74259796,"comment_id":131269449,"body_markdown":"I would recommend using [NordicSemiconductor/Android-Scanner-Compat-Library](https://github.com/NordicSemiconductor/Android-Scanner-Compat-Library), which save you a lot of hassle.","body":"I would recommend using <a href=\"https://github.com/NordicSemiconductor/Android-Scanner-Compat-Library\" rel=\"nofollow noreferrer\">NordicSemiconductor/Android-Scanner-Compat-Library</a>, which save you a lot of hassle."},{"owner":{"account_id":14283811,"reputation":6405,"user_id":10317684,"display_name":"Ricky Mo"},"score":1,"creation_date":1667892216,"post_id":74259796,"comment_id":131269520,"body_markdown":"Apart from that, what is your app target SDK version, and what are the android version on the problematic devices? Be aware of the [Android 12 Bluetooth permission changes](https://developer.android.com/guide/topics/connectivity/bluetooth/permissions)","body":"Apart from that, what is your app target SDK version, and what are the android version on the problematic devices? Be aware of the <a href=\"https://developer.android.com/guide/topics/connectivity/bluetooth/permissions\" rel=\"nofollow noreferrer\">Android 12 Bluetooth permission changes</a>"},{"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"score":1,"creation_date":1667899391,"post_id":74259796,"comment_id":131271825,"body_markdown":"Well Google&#39;s BLE APIs and permissions are a total mess. Ranging from API 23 (Android 6) to API 31, your application has to deal with 4 different runime permissions depending on what API it runs. These permissions are: `ACCESS_COARSE_LOCATION` for between API 23 and 28, `ACCESS_FINE_LOCATION` for between API 29 and 30, `BLUETOOTH_SCAN` and `BLUETOOTH_SCAN` for 31 and above respectively. Now I raise the question of &quot;Have you handled all these runtime permissions correctly?&quot;","body":"Well Google&#39;s BLE APIs and permissions are a total mess. Ranging from API 23 (Android 6) to API 31, your application has to deal with 4 different runime permissions depending on what API it runs. These permissions are: <code>ACCESS_COARSE_LOCATION</code> for between API 23 and 28, <code>ACCESS_FINE_LOCATION</code> for between API 29 and 30, <code>BLUETOOTH_SCAN</code> and <code>BLUETOOTH_SCAN</code> for 31 and above respectively. Now I raise the question of &quot;Have you handled all these runtime permissions correctly?&quot;"},{"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"score":1,"creation_date":1667900030,"post_id":74259796,"comment_id":131272030,"body_markdown":"Have a look at this [mini guide like answer](https://stackoverflow.com/a/72842249/12749998) about a complete BLE master permission handling if you struggle implementing it.","body":"Have a look at this <a href=\"https://stackoverflow.com/a/72842249/12749998\">mini guide like answer</a> about a complete BLE master permission handling if you struggle implementing it."},{"owner":{"account_id":15404070,"reputation":86,"user_id":11112643,"display_name":"zafercaliskan"},"score":0,"creation_date":1667909037,"post_id":74259796,"comment_id":131275317,"body_markdown":"I am using all 4 permissions. I think I am asking permission correctly. I&#39;ll try @RickyMo &#39;s suggestion. I will keep you informed of the result. Thank you","body":"I am using all 4 permissions. I think I am asking permission correctly. I&#39;ll try @RickyMo &#39;s suggestion. I will keep you informed of the result. Thank you"}],"owner":{"account_id":15404070,"reputation":86,"user_id":11112643,"display_name":"zafercaliskan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":364,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667890927,"creation_date":1667200082,"question_id":74259796,"body_markdown":"I&#39;m working on a project right now, no one has been able to solve this error. It only happens on some real devices.\r\n\r\nI&#39;m trying to capture bluetooth signals in a dialog. I force bluetooth to be turned on before the dialog opens, I force it to get location information and androidManifest permissions are all there. It works correctly on almost all of the phones used in the project, but in a few of them, the bluetooth scan falls into the onScanFailed method as soon as it starts. It is included as **errorCode 2** in **onScanFailed**. I couldn&#39;t find the solution, can you help me?\r\n\r\nscan method\r\n\r\n```\r\nprivate void scanForBeacon(){\r\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\r\n        btAdapter = BluetoothAdapter.getDefaultAdapter();\r\n        mLEScanner = btAdapter.getBluetoothLeScanner();\r\n        if (btAdapter != null){\r\n            if(btAdapter.isEnabled()){\r\n                beaconList = new ArrayList&lt;BeaconItem&gt;();\r\n                peripheralList = new ArrayList&lt;String&gt;();\r\n                receiver = new BroadcastReceiver() {\r\n                    @Override\r\n                    public void onReceive(Context context, Intent intent) {\r\n                        final String action = intent.getAction();\r\n                        if (action.equals(BluetoothAdapter.ACTION_STATE_CHANGED)) {\r\n                            final int state = intent.getIntExtra(BluetoothAdapter.EXTRA_STATE, BluetoothAdapter.ERROR);\r\n                            switch(state) {\r\n                                case BluetoothAdapter.STATE_OFF:\r\n                                    break;\r\n                                case BluetoothAdapter.STATE_TURNING_OFF:\r\n                                    Handler handler = new Handler();\r\n                                    handler.postDelayed(new Runnable() {\r\n                                        @Override\r\n                                        public void run() {\r\n                                            Log.d(TAG, &quot;bluetooth adapter try to enable&quot;);\r\n                                            btAdapter.getDefaultAdapter().enable();\r\n                                        }}, 500);\r\n                                    break;\r\n                                case BluetoothAdapter.STATE_ON:\r\n                                    mLEScanner = btAdapter.getBluetoothLeScanner();\r\n                                    mLEScanner.startScan(filters, settings, mScanCallback);\r\n                                    break;\r\n                                case BluetoothAdapter.STATE_TURNING_ON:\r\n                                    break;\r\n                            }\r\n                        }\r\n                    }\r\n                };\r\n                IntentFilter filter = new IntentFilter(BluetoothAdapter.ACTION_STATE_CHANGED);\r\n                getOwnActivity().registerReceiver(receiver, filter);\r\n                settings = new ScanSettings.Builder()\r\n                        .setScanMode(ScanSettings.SCAN_MODE_LOW_LATENCY)\r\n                        .build();\r\n                filters = new ArrayList&lt;&gt;();\r\n\r\n                if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.LOLLIPOP) {\r\n                    beaconList.clear();\r\n                    peripheralList.clear();\r\n                    btAdapter.startLeScan(leScanCallback);\r\n                } else {\r\n                    try{\r\n                        beaconList.clear();\r\n                        peripheralList.clear();\r\n                        mLEScanner = btAdapter.getBluetoothLeScanner();\r\n                        mLEScanner.startScan(filters, settings, mScanCallback);\r\n                    }catch (Exception e) {\r\n                        Log.e(&quot;hata&quot;, e.getMessage());\r\n                    }\r\n                }\r\n            } else{\r\n                getOwnActivity().runOnUiThread(new Runnable() {\r\n                    public void run() {\r\n                        Global.showAlert(getOwnActivity(), SweetAlertDialog.ERROR_TYPE, R.string.error, R.string.must_enabled_bt_for_join_attendance, R.string.ok, new SweetAlertDialog.OnSweetClickListener() {\r\n                            @Override\r\n                            public void onClick(SweetAlertDialog sweetAlertDialog) {\r\n                                dismiss();\r\n                                if(timer != null)\r\n                                    timer.cancel();\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\n```\r\n\r\nonScanFailed\r\n\r\n```\r\n@Override\r\npublic void onScanFailed(final int errorCode) {\r\n    try{\r\n        if (tryTime == 0){\r\n            mLEScanner.stopScan(mScanCallback);\r\n            btAdapter.getDefaultAdapter().disable();\r\n            tryTime++;\r\n        } else{\r\n            getOwnActivity().runOnUiThread(new Runnable() {\r\n                public void run() {\r\n                    Global.closeLoadingView();\r\n                    Global.showAlert(getOwnActivity(),  SweetAlertDialog.ERROR_TYPE, getString(R.string.error), getString(R.string.cbn_scan_failed).replace(&quot;[error_code]&quot;, String.valueOf(errorCode)));\r\n                }\r\n            });\r\n        }\r\n    } catch (Exception e){\r\n        try{\r\n            getOwnActivity().runOnUiThread(new Runnable() {\r\n                public void run() {\r\n                    Global.closeLoadingView();\r\n                    Global.showAlert(getOwnActivity(),  SweetAlertDialog.ERROR_TYPE, getString(R.string.error), getString(R.string.cbn_scan_failed).replace(&quot;[error_code]&quot;, String.valueOf(errorCode)));\r\n                }\r\n            });\r\n        } catch (Exception x){\r\n            x.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI forced bluetooth and location information to be turned on before the dialog opens.\r\n\r\n**Some devices with problems**\r\n\r\n - Samsung A7 2017 \r\n - Tecno spark 5 pro kd7 -&gt; android version 10\r\n - Xiaomi redmi note 9s","title":"Bluetooth (BLE) scans throws error code 2","body":"<p>I'm working on a project right now, no one has been able to solve this error. It only happens on some real devices.</p>\n<p>I'm trying to capture bluetooth signals in a dialog. I force bluetooth to be turned on before the dialog opens, I force it to get location information and androidManifest permissions are all there. It works correctly on almost all of the phones used in the project, but in a few of them, the bluetooth scan falls into the onScanFailed method as soon as it starts. It is included as <strong>errorCode 2</strong> in <strong>onScanFailed</strong>. I couldn't find the solution, can you help me?</p>\n<p>scan method</p>\n<pre><code>private void scanForBeacon(){\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\n        btAdapter = BluetoothAdapter.getDefaultAdapter();\n        mLEScanner = btAdapter.getBluetoothLeScanner();\n        if (btAdapter != null){\n            if(btAdapter.isEnabled()){\n                beaconList = new ArrayList&lt;BeaconItem&gt;();\n                peripheralList = new ArrayList&lt;String&gt;();\n                receiver = new BroadcastReceiver() {\n                    @Override\n                    public void onReceive(Context context, Intent intent) {\n                        final String action = intent.getAction();\n                        if (action.equals(BluetoothAdapter.ACTION_STATE_CHANGED)) {\n                            final int state = intent.getIntExtra(BluetoothAdapter.EXTRA_STATE, BluetoothAdapter.ERROR);\n                            switch(state) {\n                                case BluetoothAdapter.STATE_OFF:\n                                    break;\n                                case BluetoothAdapter.STATE_TURNING_OFF:\n                                    Handler handler = new Handler();\n                                    handler.postDelayed(new Runnable() {\n                                        @Override\n                                        public void run() {\n                                            Log.d(TAG, &quot;bluetooth adapter try to enable&quot;);\n                                            btAdapter.getDefaultAdapter().enable();\n                                        }}, 500);\n                                    break;\n                                case BluetoothAdapter.STATE_ON:\n                                    mLEScanner = btAdapter.getBluetoothLeScanner();\n                                    mLEScanner.startScan(filters, settings, mScanCallback);\n                                    break;\n                                case BluetoothAdapter.STATE_TURNING_ON:\n                                    break;\n                            }\n                        }\n                    }\n                };\n                IntentFilter filter = new IntentFilter(BluetoothAdapter.ACTION_STATE_CHANGED);\n                getOwnActivity().registerReceiver(receiver, filter);\n                settings = new ScanSettings.Builder()\n                        .setScanMode(ScanSettings.SCAN_MODE_LOW_LATENCY)\n                        .build();\n                filters = new ArrayList&lt;&gt;();\n\n                if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.LOLLIPOP) {\n                    beaconList.clear();\n                    peripheralList.clear();\n                    btAdapter.startLeScan(leScanCallback);\n                } else {\n                    try{\n                        beaconList.clear();\n                        peripheralList.clear();\n                        mLEScanner = btAdapter.getBluetoothLeScanner();\n                        mLEScanner.startScan(filters, settings, mScanCallback);\n                    }catch (Exception e) {\n                        Log.e(&quot;hata&quot;, e.getMessage());\n                    }\n                }\n            } else{\n                getOwnActivity().runOnUiThread(new Runnable() {\n                    public void run() {\n                        Global.showAlert(getOwnActivity(), SweetAlertDialog.ERROR_TYPE, R.string.error, R.string.must_enabled_bt_for_join_attendance, R.string.ok, new SweetAlertDialog.OnSweetClickListener() {\n                            @Override\n                            public void onClick(SweetAlertDialog sweetAlertDialog) {\n                                dismiss();\n                                if(timer != null)\n                                    timer.cancel();\n                            }\n                        });\n                    }\n                });\n            }\n        }\n\n    }\n}\n</code></pre>\n<p>onScanFailed</p>\n<pre><code>@Override\npublic void onScanFailed(final int errorCode) {\n    try{\n        if (tryTime == 0){\n            mLEScanner.stopScan(mScanCallback);\n            btAdapter.getDefaultAdapter().disable();\n            tryTime++;\n        } else{\n            getOwnActivity().runOnUiThread(new Runnable() {\n                public void run() {\n                    Global.closeLoadingView();\n                    Global.showAlert(getOwnActivity(),  SweetAlertDialog.ERROR_TYPE, getString(R.string.error), getString(R.string.cbn_scan_failed).replace(&quot;[error_code]&quot;, String.valueOf(errorCode)));\n                }\n            });\n        }\n    } catch (Exception e){\n        try{\n            getOwnActivity().runOnUiThread(new Runnable() {\n                public void run() {\n                    Global.closeLoadingView();\n                    Global.showAlert(getOwnActivity(),  SweetAlertDialog.ERROR_TYPE, getString(R.string.error), getString(R.string.cbn_scan_failed).replace(&quot;[error_code]&quot;, String.valueOf(errorCode)));\n                }\n            });\n        } catch (Exception x){\n            x.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>I forced bluetooth and location information to be turned on before the dialog opens.</p>\n<p><strong>Some devices with problems</strong></p>\n<ul>\n<li>Samsung A7 2017</li>\n<li>Tecno spark 5 pro kd7 -&gt; android version 10</li>\n<li>Xiaomi redmi note 9s</li>\n</ul>\n"},{"tags":["java","android","performance","xpath"],"comments":[{"owner":{"display_name":"user357812"},"score":0,"creation_date":1285278635,"post_id":3782618,"comment_id":4006641,"body_markdown":"@Andrew Shelansky: Did you try to run just one query ussing `|` union node set oparator? Result node set would be in document order.","body":"@Andrew Shelansky: Did you try to run just one query ussing <code>|</code> union node set oparator? Result node set would be in document order."},{"owner":{"account_id":197308,"reputation":6433,"user_id":441314,"display_name":"Nick Jones"},"score":1,"creation_date":1285278680,"post_id":3782618,"comment_id":4006649,"body_markdown":"@Andrew Shelansky: My guess would be that the NodeList being return by the XPath expression is evaluated lazily. So each time you do nodes.item(i) it is having to count through i items to find the node. Try storing the node in the variable at the start of the loop and see if that helps.","body":"@Andrew Shelansky: My guess would be that the NodeList being return by the XPath expression is evaluated lazily. So each time you do nodes.item(i) it is having to count through i items to find the node. Try storing the node in the variable at the start of the loop and see if that helps."},{"owner":{"account_id":170443,"reputation":4952,"user_id":397155,"accept_rate":50,"display_name":"Andrew Shelansky"},"score":0,"creation_date":1285278815,"post_id":3782618,"comment_id":4006668,"body_markdown":"@Nick Jones.  In my test code, I&#39;m doing lazy eval for nodes.item(i).  In my production code, I&#39;m actually iterating through nodes immediately after calling the first xp.evaluate.  The resulting nodes get stored in a hashmap from UUID to Node, and evaluated that way.  The production code exhibits the same problem.  Good thought, though.","body":"@Nick Jones.  In my test code, I&#39;m doing lazy eval for nodes.item(i).  In my production code, I&#39;m actually iterating through nodes immediately after calling the first xp.evaluate.  The resulting nodes get stored in a hashmap from UUID to Node, and evaluated that way.  The production code exhibits the same problem.  Good thought, though."},{"owner":{"account_id":131213,"reputation":47334,"user_id":331052,"display_name":"Affe"},"score":0,"creation_date":1285285738,"post_id":3782618,"comment_id":4007370,"body_markdown":"I cannot help, but wanted to commiserate that &#39;absurd&#39; also describes my experience with trying to use the reference javax.xml.xpath in production.  The only real solution for us was switching everything to Jaxen.  Don&#39;t know if that&#39;s even possible on android :(","body":"I cannot help, but wanted to commiserate that &#39;absurd&#39; also describes my experience with trying to use the reference javax.xml.xpath in production.  The only real solution for us was switching everything to Jaxen.  Don&#39;t know if that&#39;s even possible on android :("},{"owner":{"account_id":170443,"reputation":4952,"user_id":397155,"accept_rate":50,"display_name":"Andrew Shelansky"},"score":0,"creation_date":1285289478,"post_id":3782618,"comment_id":4007646,"body_markdown":"@Alejandro: no, I didn&#39;t do that.  I don&#39;t actually know ahead of time what the document order is going to be for the items that I want.  As far as I can tell, though, the only important consideration for how long it will take to execute is how far down in the document the context node is.","body":"@Alejandro: no, I didn&#39;t do that.  I don&#39;t actually know ahead of time what the document order is going to be for the items that I want.  As far as I can tell, though, the only important consideration for how long it will take to execute is how far down in the document the context node is."},{"owner":{"account_id":170443,"reputation":4952,"user_id":397155,"accept_rate":50,"display_name":"Andrew Shelansky"},"score":0,"creation_date":1285545033,"post_id":3782618,"comment_id":4028994,"body_markdown":"I still haven&#39;t figured out why this is going on, other than to be certain that it is purely about how far from the top of the document the context node is.  For my purposes, since I&#39;m always working with fairly large documents, and never using XPaths that care about the parents/ancestors, I&#39;m just calling cloneNode() before calling xp.evaluate.  It runs about 800% faster.  This is a terrible &quot;solution&quot; because I know that some day I&#39;ll have an expression that cares about the parent, but for now...","body":"I still haven&#39;t figured out why this is going on, other than to be certain that it is purely about how far from the top of the document the context node is.  For my purposes, since I&#39;m always working with fairly large documents, and never using XPaths that care about the parents/ancestors, I&#39;m just calling cloneNode() before calling xp.evaluate.  It runs about 800% faster.  This is a terrible &quot;solution&quot; because I know that some day I&#39;ll have an expression that cares about the parent, but for now..."}],"answers":[{"comments":[{"owner":{"account_id":121926,"reputation":14344,"user_id":315386,"accept_rate":79,"display_name":"Mick Byrne"},"score":4,"creation_date":1363089243,"post_id":8596013,"comment_id":21701305,"body_markdown":"Great answer. I&#39;d love to see some code examples - how do you clone a node list, what&#39;s the quickest way to turn it into an array of nodes, etc?","body":"Great answer. I&#39;d love to see some code examples - how do you clone a node list, what&#39;s the quickest way to turn it into an array of nodes, etc?"}],"tags":[],"owner":{"account_id":184661,"reputation":13796,"user_id":420851,"display_name":"jasso"},"comment_count":1,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1324499715,"creation_date":1324499715,"answer_id":8596013,"question_id":3782618,"body_markdown":"This seems to be another case where using XPath appears to be slow but instead of XPath, the reason is probably caused by DOM method `nodelist.item(i)`\r\n\r\n**The default implementation of `NodeList` in Java has certain features:**\r\n\r\n1. It is evaluated lazily\r\n1. The DOM list is live\r\n1. It is implemented as a linked list\r\n1. The list has some caching\r\n\r\nWhen you look at those features separately, you could wonder why should the result object of an XPath expression have a feature like that, but they make more sense when you put them together.\r\n\r\n**1)** \r\nLazy evaluation might blur the the location of a performance bottleneck. Because of it, returning the NodeList appears to be fast but if the task is to always iterate through the list, it more or less just defers the performance cost. Lazy evaluation becomes costly, if the evaluation of the whole list must be processed again every time when the next item in the list is read.\r\n\r\n**2)** \r\n`NodeList` being a &quot;live&quot; list means that it is updated and refers to nodes that are currently in the document tree, not to nodes that were in the tree when the list was initially constructed or to clones of those nodes. This is an important feature to grasp for DOM beginners. For example, if you select a `NodeList` of sibling elements and try to add one new sibling element to each node, taking a step to `item(i+1)` will always reach the latest added node and the loop will never finish.\r\n\r\n**3)** \r\nThe list being live also gives some explanation why it is implemented as a linked list (or AFAIK the actual implementation is a doubly linked list). The effect of this can clearly be seen on your test where accessing the last elements is always the slowest, whether you iterate it through backwards or forwards.\r\n\r\n**4)** \r\nBecause of the caching, looping over a single list while not causing any changes to the tree should be fairly efficient, if the cache stays clean. In some versions of Java there has been problems with this caching. I have not investigated what all procedures invalidate caching but probably the safest bets would be to advice to keep the evaluated expression the same, make no changes to tree, loop over one list at a time, and always step to next or previous list item.\r\n\r\n**Real performance wins depend on the use case, of course.** Instead of just tweaking the list looping, you should try getting rid of looping a live list altogether - at least for reference. Cloning makes the list not live. Direct access to nodes can be achieved by copying the nodes to an array. If the structure is suitable, you can also use other DOM methods like `getNextSibling()` which said to give more effective results than looping over a NodeList.\r\n","title":"XPath.evaluate performance slows down (absurdly) over multiple calls","body":"<p>This seems to be another case where using XPath appears to be slow but instead of XPath, the reason is probably caused by DOM method <code>nodelist.item(i)</code></p>\n\n<p><strong>The default implementation of <code>NodeList</code> in Java has certain features:</strong></p>\n\n<ol>\n<li>It is evaluated lazily</li>\n<li>The DOM list is live</li>\n<li>It is implemented as a linked list</li>\n<li>The list has some caching</li>\n</ol>\n\n<p>When you look at those features separately, you could wonder why should the result object of an XPath expression have a feature like that, but they make more sense when you put them together.</p>\n\n<p><strong>1)</strong> \nLazy evaluation might blur the the location of a performance bottleneck. Because of it, returning the NodeList appears to be fast but if the task is to always iterate through the list, it more or less just defers the performance cost. Lazy evaluation becomes costly, if the evaluation of the whole list must be processed again every time when the next item in the list is read.</p>\n\n<p><strong>2)</strong> \n<code>NodeList</code> being a \"live\" list means that it is updated and refers to nodes that are currently in the document tree, not to nodes that were in the tree when the list was initially constructed or to clones of those nodes. This is an important feature to grasp for DOM beginners. For example, if you select a <code>NodeList</code> of sibling elements and try to add one new sibling element to each node, taking a step to <code>item(i+1)</code> will always reach the latest added node and the loop will never finish.</p>\n\n<p><strong>3)</strong> \nThe list being live also gives some explanation why it is implemented as a linked list (or AFAIK the actual implementation is a doubly linked list). The effect of this can clearly be seen on your test where accessing the last elements is always the slowest, whether you iterate it through backwards or forwards.</p>\n\n<p><strong>4)</strong> \nBecause of the caching, looping over a single list while not causing any changes to the tree should be fairly efficient, if the cache stays clean. In some versions of Java there has been problems with this caching. I have not investigated what all procedures invalidate caching but probably the safest bets would be to advice to keep the evaluated expression the same, make no changes to tree, loop over one list at a time, and always step to next or previous list item.</p>\n\n<p><strong>Real performance wins depend on the use case, of course.</strong> Instead of just tweaking the list looping, you should try getting rid of looping a live list altogether - at least for reference. Cloning makes the list not live. Direct access to nodes can be achieved by copying the nodes to an array. If the structure is suitable, you can also use other DOM methods like <code>getNextSibling()</code> which said to give more effective results than looping over a NodeList.</p>\n"},{"comments":[{"owner":{"account_id":483323,"reputation":36115,"user_id":898289,"accept_rate":92,"display_name":"Adam"},"score":5,"creation_date":1347277014,"post_id":9027458,"comment_id":16583601,"body_markdown":"+1 for detachment tip. Improved my code from several minutes to less than 10 secs !","body":"+1 for detachment tip. Improved my code from several minutes to less than 10 secs !"},{"owner":{"account_id":36277,"reputation":4006,"user_id":103345,"accept_rate":52,"display_name":"Lee"},"score":3,"creation_date":1352671902,"post_id":9027458,"comment_id":18197105,"body_markdown":"Yes that makes a huge difference.","body":"Yes that makes a huge difference."},{"owner":{"account_id":31685,"reputation":3185,"user_id":87206,"display_name":"CurtainDog"},"score":7,"creation_date":1363846906,"post_id":9027458,"comment_id":22018436,"body_markdown":"I can&#39;t believe it works, but it does. In my case, rather than removing the node I cloned it and still saw a twenty-fold performance improvement.","body":"I can&#39;t believe it works, but it does. In my case, rather than removing the node I cloned it and still saw a twenty-fold performance improvement."},{"owner":{"account_id":82461,"reputation":4705,"user_id":231839,"accept_rate":88,"display_name":"Brain2000"},"score":4,"creation_date":1449187650,"post_id":9027458,"comment_id":55910711,"body_markdown":"You sort of got me onto the right track.  I did something similar to removing the node, I cloned it.  It reduced my processing time from 12 minutes to 10 seconds.  I&#39;m not joking.","body":"You sort of got me onto the right track.  I did something similar to removing the node, I cloned it.  It reduced my processing time from 12 minutes to 10 seconds.  I&#39;m not joking."}],"tags":[],"owner":{"account_id":1202089,"reputation":651,"user_id":1172527,"display_name":"Tyler Zerr"},"comment_count":4,"down_vote_count":0,"up_vote_count":65,"is_accepted":false,"score":65,"last_activity_date":1327649974,"creation_date":1327623713,"answer_id":9027458,"question_id":3782618,"body_markdown":"Try adding this code inside the loop at the top;\r\n\r\n    Node singleNode = nodes.item(i);\r\n    singleNode.getParentNode().removeChild(singleNode);\r\n\r\nthen run each evaluation using the `singleNode` variable instead of `nodes.item(i);` \r\n(of course you change the name)\r\n\r\nDoing this detaches the node you are working with from the large main document. This will speed up the evaluate methods processing time by a huge amount.\r\n\r\nEX:\r\n\r\n    for(int i=0;i&lt;nodes.getLength();i++)\r\n    {\r\n        Node singleNode = nodes.item(i);\r\n        singleNode.getParentNode().removeChild(singleNode);\r\n\r\n        printTimestamp(1);\r\n        xp.evaluate(&quot;atom:id/text()&quot;, singleNode );\r\n        printTimestamp(2);\r\n        xp.evaluate(&quot;samplens:fieldA/text()&quot;, singleNode );\r\n        printTimestamp(3);\r\n        xp.evaluate(&quot;atom:author/atom:uri/text()&quot;, singleNode );\r\n        printTimestamp(4);\r\n        xp.evaluate(&quot;samplens:fieldA/samplens:fieldB/&amp;at;attrC&quot;, singleNode );\r\n        printTimestamp(5);\r\n\r\n        //etc.  My real example has 10 of these xp.evaluate lines\r\n\r\n     }","title":"XPath.evaluate performance slows down (absurdly) over multiple calls","body":"<p>Try adding this code inside the loop at the top;</p>\n\n<pre><code>Node singleNode = nodes.item(i);\nsingleNode.getParentNode().removeChild(singleNode);\n</code></pre>\n\n<p>then run each evaluation using the <code>singleNode</code> variable instead of <code>nodes.item(i);</code> \n(of course you change the name)</p>\n\n<p>Doing this detaches the node you are working with from the large main document. This will speed up the evaluate methods processing time by a huge amount.</p>\n\n<p>EX:</p>\n\n<pre><code>for(int i=0;i&lt;nodes.getLength();i++)\n{\n    Node singleNode = nodes.item(i);\n    singleNode.getParentNode().removeChild(singleNode);\n\n    printTimestamp(1);\n    xp.evaluate(\"atom:id/text()\", singleNode );\n    printTimestamp(2);\n    xp.evaluate(\"samplens:fieldA/text()\", singleNode );\n    printTimestamp(3);\n    xp.evaluate(\"atom:author/atom:uri/text()\", singleNode );\n    printTimestamp(4);\n    xp.evaluate(\"samplens:fieldA/samplens:fieldB/&amp;at;attrC\", singleNode );\n    printTimestamp(5);\n\n    //etc.  My real example has 10 of these xp.evaluate lines\n\n }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":150404,"reputation":42109,"user_id":363573,"accept_rate":97,"display_name":"Stephan"},"score":0,"creation_date":1544693949,"post_id":29223196,"comment_id":94369740,"body_markdown":"As of this writing, the links are dead.","body":"As of this writing, the links are dead."}],"tags":[],"owner":{"account_id":3132103,"reputation":3987,"user_id":2649570,"accept_rate":83,"display_name":"ced-b"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1427158769,"creation_date":1427158769,"answer_id":29223196,"question_id":3782618,"body_markdown":"This is a little bit late, but I ran into the same situation, but it seemed like my document was so big that none of the other answers really resolved the problem. \r\n\r\nEventually, I found [jaxen](http://jaxen.codehaus.org). Once I used it, the document which previously took 15 seconds to parse took mere milliseconds.\r\n\r\nJaxen is unfortunately rather badly documented, but worked quite well:\r\n\r\n    DOMXPath myXPath = new DOMXPath(&quot;atom:id/text()&quot;);\r\n    String myContent = myXPath.stringValueOf(myDocument);\r\n\r\nThe Java Doc can be found here http://jaxen.codehaus.org/apidocs/org/jaxen/dom/DOMXPath.html","title":"XPath.evaluate performance slows down (absurdly) over multiple calls","body":"<p>This is a little bit late, but I ran into the same situation, but it seemed like my document was so big that none of the other answers really resolved the problem. </p>\n\n<p>Eventually, I found <a href=\"http://jaxen.codehaus.org\" rel=\"nofollow\">jaxen</a>. Once I used it, the document which previously took 15 seconds to parse took mere milliseconds.</p>\n\n<p>Jaxen is unfortunately rather badly documented, but worked quite well:</p>\n\n<pre><code>DOMXPath myXPath = new DOMXPath(\"atom:id/text()\");\nString myContent = myXPath.stringValueOf(myDocument);\n</code></pre>\n\n<p>The Java Doc can be found here <a href=\"http://jaxen.codehaus.org/apidocs/org/jaxen/dom/DOMXPath.html\" rel=\"nofollow\">http://jaxen.codehaus.org/apidocs/org/jaxen/dom/DOMXPath.html</a></p>\n"},{"comments":[{"owner":{"account_id":1338817,"reputation":1602,"user_id":1280947,"accept_rate":81,"display_name":"Balz Guenat"},"score":2,"creation_date":1538748995,"post_id":35139365,"comment_id":92265023,"body_markdown":"I used this for parsing incoming messages where the obvious way was hopelessly inadequate. The speed increase is as ridiculous as it is unexpected.","body":"I used this for parsing incoming messages where the obvious way was hopelessly inadequate. The speed increase is as ridiculous as it is unexpected."},{"owner":{"account_id":1136363,"reputation":596,"user_id":1121366,"accept_rate":89,"display_name":"vakarami"},"score":3,"creation_date":1613558055,"post_id":35139365,"comment_id":117109054,"body_markdown":"**This is the absolute fix!!!**\nI ran a xpath on 45K child nodes and it took 50 minutes! after using clone it only took 5 seconds. This is an absolute bizarre from java implementation.","body":"<b>This is the absolute fix!!!</b> I ran a xpath on 45K child nodes and it took 50 minutes! after using clone it only took 5 seconds. This is an absolute bizarre from java implementation."},{"owner":{"account_id":16155396,"reputation":73,"user_id":11662715,"display_name":"sandeep P"},"score":0,"creation_date":1616132233,"post_id":35139365,"comment_id":117912052,"body_markdown":"No changes observed in my case.","body":"No changes observed in my case."},{"owner":{"account_id":16155396,"reputation":73,"user_id":11662715,"display_name":"sandeep P"},"score":0,"creation_date":1616132259,"post_id":35139365,"comment_id":117912060,"body_markdown":"NodeList result = (NodeList) expr.evaluate(inputStr, XPathConstants.NODESET);\n            for (int index = 0; index &lt; result.getLength(); index++) {\n                Node node = result.item(index).cloneNode(true);\n                String value = node.getTextContent();\n                xpathOut.add(value);\n            }\nAny thing wrong here?","body":"NodeList result = (NodeList) expr.evaluate(inputStr, XPathConstants.NODESET);             for (int index = 0; index &lt; result.getLength(); index++) {                 Node node = result.item(index).cloneNode(true);                 String value = node.getTextContent();                 xpathOut.add(value);             } Any thing wrong here?"}],"tags":[],"owner":{"account_id":7754756,"reputation":221,"user_id":5869536,"display_name":"tmbh"},"comment_count":4,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1530626017,"creation_date":1454357209,"answer_id":35139365,"question_id":3782618,"body_markdown":"Try cloning the node (so you won&#39;t have unnecessary references from its ancestors)\r\n\r\n    Node singleNode = nodes.item(i).cloneNode(true);\r\n\r\nIf you remove children, you will lose references and only get half of the nodes you want to process.","title":"XPath.evaluate performance slows down (absurdly) over multiple calls","body":"<p>Try cloning the node (so you won't have unnecessary references from its ancestors)</p>\n\n<pre><code>Node singleNode = nodes.item(i).cloneNode(true);\n</code></pre>\n\n<p>If you remove children, you will lose references and only get half of the nodes you want to process.</p>\n"},{"tags":[],"owner":{"account_id":3653711,"reputation":131,"user_id":3045259,"display_name":"HouseFragance"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1463068168,"creation_date":1463068168,"answer_id":37191801,"question_id":3782618,"body_markdown":"Every time you take a Node from a Nodelist, seems that it keep references to whole structure of xml; for this reason\r\nwhen you navigate the node, the xpath process starts every time from root of xml, and for this reason, when you go down in the trhee\r\nit takes more time.\r\n\r\nFor this reason when you take a node, before navigate it, you have to cast in string by this method:\r\n\r\n    private String nodeToString(Node node) {\r\n    \t\t  StringWriter sw = new StringWriter();\r\n    \t\t  try {\r\n    \t\t    Transformer t = TransformerFactory.newInstance().newTransformer();\r\n    \t\t    t.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, &quot;yes&quot;);\r\n    \t\t    t.transform(new DOMSource(node), new StreamResult(sw));\r\n    \t\t  } catch (TransformerException te) {\r\n    \t\t    System.out.println(&quot;nodeToString Transformer Exception&quot;);\r\n    \t\t  }\r\n    \t\t  return sw.toString();\r\n    \t\t}\r\n\r\nand then retransform it in a Element / Node: \r\n\r\n    String xml = nodeToString(node);\r\n        \t\t\t\t\t\t\r\n    Element nodeNew =  DocumentBuilderFactory\r\n    \t\t.newInstance()\r\n    \t\t.newDocumentBuilder()\r\n    \t\t.parse(new ByteArrayInputStream(xml.getBytes()))\r\n    \t\t.getDocumentElement();\r\n    \r\n    node = nodeNew;\r\n\r\nIn this way the new Element, lost all references to his ancestors, and will be use as a simple Node and not as a nested Node. \r\nObviously this method is good only if you have to navigate deep into a node.","title":"XPath.evaluate performance slows down (absurdly) over multiple calls","body":"<p>Every time you take a Node from a Nodelist, seems that it keep references to whole structure of xml; for this reason\nwhen you navigate the node, the xpath process starts every time from root of xml, and for this reason, when you go down in the trhee\nit takes more time.</p>\n\n<p>For this reason when you take a node, before navigate it, you have to cast in string by this method:</p>\n\n<pre><code>private String nodeToString(Node node) {\n          StringWriter sw = new StringWriter();\n          try {\n            Transformer t = TransformerFactory.newInstance().newTransformer();\n            t.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, \"yes\");\n            t.transform(new DOMSource(node), new StreamResult(sw));\n          } catch (TransformerException te) {\n            System.out.println(\"nodeToString Transformer Exception\");\n          }\n          return sw.toString();\n        }\n</code></pre>\n\n<p>and then retransform it in a Element / Node: </p>\n\n<pre><code>String xml = nodeToString(node);\n\nElement nodeNew =  DocumentBuilderFactory\n        .newInstance()\n        .newDocumentBuilder()\n        .parse(new ByteArrayInputStream(xml.getBytes()))\n        .getDocumentElement();\n\nnode = nodeNew;\n</code></pre>\n\n<p>In this way the new Element, lost all references to his ancestors, and will be use as a simple Node and not as a nested Node. \nObviously this method is good only if you have to navigate deep into a node.</p>\n"},{"tags":[],"owner":{"account_id":20283727,"reputation":51,"user_id":14876851,"display_name":"Mnh H&#249;ng Chu"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1667890899,"creation_date":1667374897,"answer_id":74285801,"question_id":3782618,"body_markdown":"It because `nodes.getLength()` take long time, just make it out of for loop\r\n\r\n    int nodes_len=nodes.getLength();\r\n    for(int i=0;i&lt;nodes_len;i++)\r\n    {\r\n    //your code here\r\n    }\r\n\r\n","title":"XPath.evaluate performance slows down (absurdly) over multiple calls","body":"<p>It because <code>nodes.getLength()</code> take long time, just make it out of for loop</p>\n<pre><code>int nodes_len=nodes.getLength();\nfor(int i=0;i&lt;nodes_len;i++)\n{\n//your code here\n}\n</code></pre>\n"}],"owner":{"account_id":170443,"reputation":4952,"user_id":397155,"accept_rate":50,"display_name":"Andrew Shelansky"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18967,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"answer_count":6,"score":35,"last_activity_date":1667890899,"creation_date":1285276792,"question_id":3782618,"body_markdown":"I am trying to use the javax.xml.xpath package to run XPath expressions on a document with multiple namespaces, and I&#39;m having goofy performance problems.\r\n\r\nMy test document is pulled from a real, production example.  It is about 600k of xml.  The document is a fairly complex Atom feed.\r\n\r\nI realize that what I&#39;m doing with XPath could be done without.  However, the same implementation on other, vastly inferior platforms performs absurdly better.  Right now, rebuilding my system to not use XPath is beyond the scope of what I can do in the time that I have.\r\n\r\nMy test code is something like this:\r\n\r\n&lt;pre&gt;&lt;code&gt;\r\n\r\nvoid testXPathPerformance()\r\n{\r\n    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\r\n    factory.setNamespaceAware(true);\r\n    DocumentBuilder builder = factory.newDocumentBuilder();\r\n\r\n    Document doc = builder.parse(loadTestDocument());\r\n\r\n    XPathFactory xpf = XPathFactory.newInstance();\r\n    XPath xp = xpf.newXPath();\r\n\r\n    NamespaceContext names = loadTestNamespaces();\r\n    //there are 12 namespaces in names.  In this example code, I&#39;m using\r\n    //&#39;samplens&#39; instead of the actual namespaces that my application uses\r\n    //for simplicity.  In my real code, the queries are different text, but\r\n    //precisely the same complexity.\r\n\r\n    xp.setNamespaceContext(names);\r\n\r\n    NodeList nodes = (NodeList) xp.evaluate(&quot;/atom:feed/atom:entry&quot;,\r\n                     doc.getDocumentElement(), XPathConstants.NODESET);\r\n\r\n\r\n    for(int i=0;i&amp;lt;nodes.getLength();i++)\r\n    {\r\n        printTimestamp(1);\r\n        xp.evaluate(&quot;atom:id/text()&quot;, nodes.item(i));\r\n        printTimestamp(2);\r\n        xp.evaluate(&quot;samplens:fieldA/text()&quot;, nodes.item(i));\r\n        printTimestamp(3);\r\n        xp.evaluate(&quot;atom:author/atom:uri/text()&quot;, nodes.item(i));\r\n        printTimestamp(4);\r\n        xp.evaluate(&quot;samplens:fieldA/samplens:fieldB/&amp;at;attrC&quot;, nodes.item(i));\r\n        printTimestamp(5);\r\n      \r\n        //etc.  My real example has 10 of these xp.evaluate lines\r\n\r\n     }\r\n}\r\n&lt;/code&gt;&lt;/pre&gt;\r\n\r\nWhen I run on a Nexus One, (not in the debugger, but with USB connected), the first time through the loop, each xp.evaluate takes somewhere from 10ms to 20ms.  By the 15th time through the loop, each xp.evaluate takes somewhere from 200ms to 300ms.  By the end of the loop (there are 150 items in &lt;code&gt;nodes&lt;/code&gt;), it takes about 500ms-600ms for each xp.evaluate.\r\n\r\nI&#39;ve tried using xp.compile().  The compiles all take &lt;5ms.  I&#39;ve done xp.reset() (makes no difference).  I&#39;ve done a new XPath object for each evaluate (adds about 4ms).\r\n\r\nMemory usage does not appear to spiral out of control during execution.\r\n\r\nI&#39;m running this on a single thread in a JUnit test case that doesn&#39;t create an activity or anything.\r\n\r\nI&#39;m really puzzled.\r\n\r\nDoes anybody have any idea what else to try?\r\n\r\nThanks! \r\n\r\n**update**\r\n\r\nIf I run the for loop backwards (&lt;code&gt;for(int i=nodes.getLength()-1;i&gt;=0;i--)&lt;/code&gt;), then the first few nodes take the 500ms-600ms, and the last ones go fast 10ms-20ms.  So, this seems like it has nothing to do with the number of calls, but instead that expressions whose context is near the end of the document take longer than expressions whose context is near the beginning of the document.\r\n\r\nDoes anybody have any thoughts on what I can do about this?","title":"XPath.evaluate performance slows down (absurdly) over multiple calls","body":"<p>I am trying to use the javax.xml.xpath package to run XPath expressions on a document with multiple namespaces, and I'm having goofy performance problems.</p>\n\n<p>My test document is pulled from a real, production example.  It is about 600k of xml.  The document is a fairly complex Atom feed.</p>\n\n<p>I realize that what I'm doing with XPath could be done without.  However, the same implementation on other, vastly inferior platforms performs absurdly better.  Right now, rebuilding my system to not use XPath is beyond the scope of what I can do in the time that I have.</p>\n\n<p>My test code is something like this:</p>\n\n<pre><code>\n\nvoid testXPathPerformance()\n{\n    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\n    factory.setNamespaceAware(true);\n    DocumentBuilder builder = factory.newDocumentBuilder();\n\n    Document doc = builder.parse(loadTestDocument());\n\n    XPathFactory xpf = XPathFactory.newInstance();\n    XPath xp = xpf.newXPath();\n\n    NamespaceContext names = loadTestNamespaces();\n    //there are 12 namespaces in names.  In this example code, I'm using\n    //'samplens' instead of the actual namespaces that my application uses\n    //for simplicity.  In my real code, the queries are different text, but\n    //precisely the same complexity.\n\n    xp.setNamespaceContext(names);\n\n    NodeList nodes = (NodeList) xp.evaluate(\"/atom:feed/atom:entry\",\n                     doc.getDocumentElement(), XPathConstants.NODESET);\n\n\n    for(int i=0;i&lt;nodes.getLength();i++)\n    {\n        printTimestamp(1);\n        xp.evaluate(\"atom:id/text()\", nodes.item(i));\n        printTimestamp(2);\n        xp.evaluate(\"samplens:fieldA/text()\", nodes.item(i));\n        printTimestamp(3);\n        xp.evaluate(\"atom:author/atom:uri/text()\", nodes.item(i));\n        printTimestamp(4);\n        xp.evaluate(\"samplens:fieldA/samplens:fieldB/&at;attrC\", nodes.item(i));\n        printTimestamp(5);\n\n        //etc.  My real example has 10 of these xp.evaluate lines\n\n     }\n}\n</code></pre>\n\n<p>When I run on a Nexus One, (not in the debugger, but with USB connected), the first time through the loop, each xp.evaluate takes somewhere from 10ms to 20ms.  By the 15th time through the loop, each xp.evaluate takes somewhere from 200ms to 300ms.  By the end of the loop (there are 150 items in <code>nodes</code>), it takes about 500ms-600ms for each xp.evaluate.</p>\n\n<p>I've tried using xp.compile().  The compiles all take &lt;5ms.  I've done xp.reset() (makes no difference).  I've done a new XPath object for each evaluate (adds about 4ms).</p>\n\n<p>Memory usage does not appear to spiral out of control during execution.</p>\n\n<p>I'm running this on a single thread in a JUnit test case that doesn't create an activity or anything.</p>\n\n<p>I'm really puzzled.</p>\n\n<p>Does anybody have any idea what else to try?</p>\n\n<p>Thanks! </p>\n\n<p><strong>update</strong></p>\n\n<p>If I run the for loop backwards (<code>for(int i=nodes.getLength()-1;i>=0;i--)</code>), then the first few nodes take the 500ms-600ms, and the last ones go fast 10ms-20ms.  So, this seems like it has nothing to do with the number of calls, but instead that expressions whose context is near the end of the document take longer than expressions whose context is near the beginning of the document.</p>\n\n<p>Does anybody have any thoughts on what I can do about this?</p>\n"},{"tags":["java","intellij-idea","jetbrains-ide","intellij-plugin","jetbrains-gateway"],"answers":[{"comments":[{"owner":{"account_id":26717370,"reputation":3,"user_id":20321782,"display_name":"IceCream-jy"},"score":0,"creation_date":1667897536,"post_id":74356766,"comment_id":131271200,"body_markdown":"Thank you very much, but I can&#39;t find the class BackendTerminalManger. How could I install the related dependencies, and how could I get some related documents. Thanks","body":"Thank you very much, but I can&#39;t find the class BackendTerminalManger. How could I install the related dependencies, and how could I get some related documents. Thanks"},{"owner":{"account_id":26717370,"reputation":3,"user_id":20321782,"display_name":"IceCream-jy"},"score":0,"creation_date":1667962212,"post_id":74356766,"comment_id":131291405,"body_markdown":"I added the dependency and tried but this message was shown: `java.lang.NoClassDefFoundError: com/jetbrains/rdserver/terminal/BackendTerminalManager`. And my GoLand version is 2022.2.","body":"I added the dependency and tried but this message was shown: <code>java.lang.NoClassDefFoundError: com&#47;jetbrains&#47;rdserver&#47;terminal&#47;BackendTerminalManager</code>. And my GoLand version is 2022.2."},{"owner":{"account_id":534957,"reputation":3430,"user_id":904679,"accept_rate":75,"display_name":"xtmq"},"score":0,"creation_date":1668009026,"post_id":74356766,"comment_id":131304823,"body_markdown":"Yes, you have to reference backend terminal plugin in your plugin in that case","body":"Yes, you have to reference backend terminal plugin in your plugin in that case"}],"tags":[],"owner":{"account_id":534957,"reputation":3430,"user_id":904679,"accept_rate":75,"display_name":"xtmq"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1667890825,"creation_date":1667890825,"answer_id":74356766,"question_id":74343236,"body_markdown":"Right now such code creates an invisible terminal which should be shared explicitly:\r\n```\r\nBackendTerminalManager.getInstance(project).shareTerminal(...)\r\n```\r\n\r\nBut we are going to fix in and automatically share all created local terminals in remoteDev, feel free to trach this issue:\r\n\r\nhttps://youtrack.jetbrains.com/issue/CWM-6928","title":"In JetBrains plugin development, how to execute command in the terminal from plugin action with Gateway","body":"<p>Right now such code creates an invisible terminal which should be shared explicitly:</p>\n<pre><code>BackendTerminalManager.getInstance(project).shareTerminal(...)\n</code></pre>\n<p>But we are going to fix in and automatically share all created local terminals in remoteDev, feel free to trach this issue:</p>\n<p><a href=\"https://youtrack.jetbrains.com/issue/CWM-6928\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/CWM-6928</a></p>\n"}],"owner":{"account_id":26717370,"reputation":3,"user_id":20321782,"display_name":"IceCream-jy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":276,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74356766,"answer_count":1,"score":0,"last_activity_date":1667890825,"creation_date":1667806102,"question_id":74343236,"body_markdown":"I am new to plugin development for JetBrains and would like to know how I can execute a command in the terminal with JetBrains Gateway.\r\n\r\nI&#39;ve tried like this:\r\n\r\n```java\r\nvar shellTerminalWidget = TerminalView.getInstance(project).createLocalShellWidget(currentWorkspacePath, &quot;NewTab&quot;);\r\nshellTerminalWidget.executeCommand(command);\r\n```\r\n\r\nIt works well when I test locally. However, when I use JetBrains Gateway and install this plugin on the host, it doesn&#39;t work any longer, and I can&#39;t find any exceptions in the log.\r\n\r\nIs there any difference when using Gateway?\r\n","title":"In JetBrains plugin development, how to execute command in the terminal from plugin action with Gateway","body":"<p>I am new to plugin development for JetBrains and would like to know how I can execute a command in the terminal with JetBrains Gateway.</p>\n<p>I've tried like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var shellTerminalWidget = TerminalView.getInstance(project).createLocalShellWidget(currentWorkspacePath, &quot;NewTab&quot;);\nshellTerminalWidget.executeCommand(command);\n</code></pre>\n<p>It works well when I test locally. However, when I use JetBrains Gateway and install this plugin on the host, it doesn't work any longer, and I can't find any exceptions in the log.</p>\n<p>Is there any difference when using Gateway?</p>\n"},{"tags":["java","spring","tomcat7","apache-tiles"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1450354528,"post_id":34333946,"comment_id":56409885,"body_markdown":"You are using Spring Boot that already configures things for you. Remove `@EnableWebMvc`. The component scan should already be done through the `@SpringBootApplication` annotation. Why do you have 2 competing view resolvers? Remove the `UrlBasedViewResolver` and set the `order` property of the `TilesViewResolver` to `-1`","body":"You are using Spring Boot that already configures things for you. Remove <code>@EnableWebMvc</code>. The component scan should already be done through the <code>@SpringBootApplication</code> annotation. Why do you have 2 competing view resolvers? Remove the <code>UrlBasedViewResolver</code> and set the <code>order</code> property of the <code>TilesViewResolver</code> to <code>-1</code>"},{"owner":{"account_id":17426473,"reputation":990,"user_id":12631293,"display_name":"Tomasz"},"score":0,"creation_date":1667890777,"post_id":34333946,"comment_id":131269135,"body_markdown":"In my case I had the same problem with tiles configuration. In jar packaging src/main/webapp folder won&#39;t be included. I added :\n\n&lt;packaging&gt;war&lt;/packaging&gt;\nand running like before :\n\njava -jar myproject.war","body":"In my case I had the same problem with tiles configuration. In jar packaging src/main/webapp folder won&#39;t be included. I added :  &lt;packaging&gt;war&lt;/packaging&gt; and running like before :  java -jar myproject.war"},{"owner":{"account_id":222825,"reputation":1179,"user_id":481682,"accept_rate":57,"display_name":"jaleel"},"score":0,"creation_date":1679236458,"post_id":34333946,"comment_id":133681227,"body_markdown":"getting same issue, it is working in eclipse , but not working in jar execution.  any idea..??","body":"getting same issue, it is working in eclipse , but not working in jar execution.  any idea..??"}],"answers":[{"comments":[{"owner":{"account_id":222825,"reputation":1179,"user_id":481682,"accept_rate":57,"display_name":"jaleel"},"score":0,"creation_date":1679236496,"post_id":34337142,"comment_id":133681236,"body_markdown":"tried, but not working","body":"tried, but not working"}],"tags":[],"owner":{"account_id":2771244,"reputation":11224,"user_id":2385808,"accept_rate":62,"display_name":"Fritz Duchardt"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1450362932,"creation_date":1450362932,"answer_id":34337142,"question_id":34333946,"body_markdown":"Looks to me like your tiles configuration file is not referenced properly. The location `file:src/main/webapp/WEB-INF/tiles/tiles-main.xml` is usually not accessible from a deployed web application. \r\n\r\nTry this instead:\r\n\r\n        \r\n\r\n    tilesConfigurer.setDefinitions(new String[] { &quot;/WEB-INF/tiles/tiles-main.xml&quot; });\r\n","title":"Tiles configuration issue in spring boot","body":"<p>Looks to me like your tiles configuration file is not referenced properly. The location <code>file:src/main/webapp/WEB-INF/tiles/tiles-main.xml</code> is usually not accessible from a deployed web application. </p>\n\n<p>Try this instead:</p>\n\n<pre><code>tilesConfigurer.setDefinitions(new String[] { \"/WEB-INF/tiles/tiles-main.xml\" });\n</code></pre>\n"}],"owner":{"account_id":7404188,"reputation":195,"user_id":5633565,"display_name":"Nil"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2326,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1667890733,"creation_date":1450353187,"question_id":34333946,"body_markdown":"When I am executing my code through eclipse it works fine, but when i am trying to execute my code through .jar file generated it shows error \r\n&quot;Could not resolve view with name &#39;success&#39; in servlet with name &#39;dispatcherServlet&#39;&quot;\r\n\r\nthe view should be resolved through tiles-main.xml instead it try to resolve the view through &quot;`InternalResourceViewResolver`&quot;\r\n\r\nhere is my configuration file\r\n\r\n    @Configuration\r\n    @EnableWebMvc\r\n    @ComponentScan(&quot;com.xyz.abc&quot;)\r\n    public class WebMvcConfig extends WebMvcConfigurerAdapter {\r\n    \r\n    \r\n    \r\n    \t\r\n    \t @Bean\r\n    \t    public UrlBasedViewResolver setupviewResolver() {\r\n    \t        UrlBasedViewResolver viewResolver = new UrlBasedViewResolver();\r\n    \t        viewResolver.setViewClass(TilesView.class);\r\n    \t        return viewResolver;\r\n    \t    }\r\n    \t \r\n    \t\t/*@Bean\r\n    \t\tInternalResourceViewResolver viewResolver(){\r\n    \t\t\tInternalResourceViewResolver  resolver=new InternalResourceViewResolver();\r\n    \t\t\tresolver.setPrefix(&quot;/WEB-INF/pages/&quot;);\r\n    \t\t\tresolver.setSuffix(&quot;.jsp&quot;);\r\n    \t\t\treturn resolver;\r\n    \t\t\t\r\n    \t\t}*/\r\n    \t\r\n    \r\n         @Bean\r\n         public TilesViewResolver tilesViewResolver() {\r\n             final TilesViewResolver resolver = new TilesViewResolver();\r\n             resolver.setPrefix(&quot;/WEB-INF/tiles/pages&quot;);\r\n             resolver.setViewClass(TilesView.class);\r\n             return resolver;\r\n         }\r\n    \t\r\n         @Bean\r\n    \t    public TilesConfigurer tilesConfigurer() {\r\n    \t        TilesConfigurer tilesConfigurer = new TilesConfigurer();\r\n    \t        tilesConfigurer.setDefinitions(new String[] { &quot;file:src/main/webapp/WEB-INF/tiles/tiles-main.xml&quot; });\r\n    \t        tilesConfigurer.setCheckRefresh(true);\r\n    \t        return tilesConfigurer;\r\n    \t    }\r\n    \t \r\n    \t\t@Override\r\n    \t\tpublic void configureDefaultServletHandling(\r\n    \t\t\t\tDefaultServletHandlerConfigurer configurer) {\r\n    \t\t\tconfigurer.enable();\r\n    \t\t}\r\n    \t\t\r\n    \t\r\n    }\r\n\r\n \r\n\r\n\r\n\r\n\r\n","title":"Tiles configuration issue in spring boot","body":"<p>When I am executing my code through eclipse it works fine, but when i am trying to execute my code through .jar file generated it shows error \n\"Could not resolve view with name 'success' in servlet with name 'dispatcherServlet'\"</p>\n\n<p>the view should be resolved through tiles-main.xml instead it try to resolve the view through \"<code>InternalResourceViewResolver</code>\"</p>\n\n<p>here is my configuration file</p>\n\n<pre><code>@Configuration\n@EnableWebMvc\n@ComponentScan(\"com.xyz.abc\")\npublic class WebMvcConfig extends WebMvcConfigurerAdapter {\n\n\n\n\n     @Bean\n        public UrlBasedViewResolver setupviewResolver() {\n            UrlBasedViewResolver viewResolver = new UrlBasedViewResolver();\n            viewResolver.setViewClass(TilesView.class);\n            return viewResolver;\n        }\n\n        /*@Bean\n        InternalResourceViewResolver viewResolver(){\n            InternalResourceViewResolver  resolver=new InternalResourceViewResolver();\n            resolver.setPrefix(\"/WEB-INF/pages/\");\n            resolver.setSuffix(\".jsp\");\n            return resolver;\n\n        }*/\n\n\n     @Bean\n     public TilesViewResolver tilesViewResolver() {\n         final TilesViewResolver resolver = new TilesViewResolver();\n         resolver.setPrefix(\"/WEB-INF/tiles/pages\");\n         resolver.setViewClass(TilesView.class);\n         return resolver;\n     }\n\n     @Bean\n        public TilesConfigurer tilesConfigurer() {\n            TilesConfigurer tilesConfigurer = new TilesConfigurer();\n            tilesConfigurer.setDefinitions(new String[] { \"file:src/main/webapp/WEB-INF/tiles/tiles-main.xml\" });\n            tilesConfigurer.setCheckRefresh(true);\n            return tilesConfigurer;\n        }\n\n        @Override\n        public void configureDefaultServletHandling(\n                DefaultServletHandlerConfigurer configurer) {\n            configurer.enable();\n        }\n\n\n}\n</code></pre>\n"},{"tags":["java","selenium","appium","nativeapplication"],"comments":[{"owner":{"account_id":10621254,"reputation":2639,"user_id":7822301,"accept_rate":56,"display_name":"Zakaria Shahed"},"score":1,"creation_date":1667889555,"post_id":74356350,"comment_id":131268872,"body_markdown":"Welcome to Stackoverflow.\nhttps://stackoverflow.com/help/how-to-ask","body":"Welcome to Stackoverflow. <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}],"answers":[{"tags":[],"owner":{"account_id":6931083,"reputation":949,"user_id":5320558,"display_name":"Wasiq Bhamla"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667890590,"creation_date":1667890590,"answer_id":74356714,"question_id":74356350,"body_markdown":"You can find the OTP input box using Appium specific locator and do `sendKeys` on that element to input the OTP you have got in Email. This should be straight forward if you know Selenium WebDriver.\r\n\r\nTo find the OTP input locator, you can use [Appium inspector][1].\r\n\r\nHope this answers your question.\r\n\r\n  [1]: https://github.com/appium/appium-inspector/releases","title":"How to test Gmail OTP verification with Appium. I want to do OTP verification by appium can any one help me?","body":"<p>You can find the OTP input box using Appium specific locator and do <code>sendKeys</code> on that element to input the OTP you have got in Email. This should be straight forward if you know Selenium WebDriver.</p>\n<p>To find the OTP input locator, you can use <a href=\"https://github.com/appium/appium-inspector/releases\" rel=\"nofollow noreferrer\">Appium inspector</a>.</p>\n<p>Hope this answers your question.</p>\n"}],"owner":{"account_id":26863326,"reputation":1,"user_id":20446442,"display_name":"Priya_Thangavel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":321,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1667890590,"creation_date":1667887807,"question_id":74356350,"body_markdown":"\r\nI can get the OTP from gmail but i don&#39;t know how to enter the OTP into the mobile application?\r\nWhat is the best way of approach to handle gmail otp into mobile application?","title":"How to test Gmail OTP verification with Appium. I want to do OTP verification by appium can any one help me?","body":"<p>I can get the OTP from gmail but i don't know how to enter the OTP into the mobile application?\nWhat is the best way of approach to handle gmail otp into mobile application?</p>\n"},{"tags":["java","scala","file"],"comments":[{"owner":{"account_id":1966171,"reputation":5909,"user_id":1766382,"accept_rate":67,"display_name":"Daniel Langdon"},"score":0,"creation_date":1439490897,"post_id":25999255,"comment_id":51895869,"body_markdown":"Personally, I feel that for comprehensions are much easier to read: `    for(list &lt;- Option(file.listFiles()) ; child &lt;- list)\n      delete(child)\n`","body":"Personally, I feel that for comprehensions are much easier to read: `    for(list &lt;- Option(file.listFiles()) ; child &lt;- list)       delete(child) `"},{"owner":{"account_id":114845,"reputation":3728,"user_id":301829,"accept_rate":96,"display_name":"Vilius Normantas"},"score":0,"creation_date":1448711745,"post_id":25999255,"comment_id":55698587,"body_markdown":"What&#39;s the point of creating that Option and mapping through it? What&#39;s wrong with simple &quot;file.listFiles.foreach(delete)&quot;?","body":"What&#39;s the point of creating that Option and mapping through it? What&#39;s wrong with simple &quot;file.listFiles.foreach(delete)&quot;?"},{"owner":{"account_id":246765,"reputation":41329,"user_id":521070,"accept_rate":72,"display_name":"Michael"},"score":1,"creation_date":1448728313,"post_id":25999255,"comment_id":55703555,"body_markdown":"@ViliusNormantas The `listFiles` may return `null` so you need to check it for `null` or wrap it with `Option`. Moreover you probably need to distinguish b/w two cases: (1) `listFiles` returns an empty array and (2) `listFiles` returns null (I/O error occurred)","body":"@ViliusNormantas The <code>listFiles</code> may return <code>null</code> so you need to check it for <code>null</code> or wrap it with <code>Option</code>. Moreover you probably need to distinguish b/w two cases: (1) <code>listFiles</code> returns an empty array and (2) <code>listFiles</code> returns null (I/O error occurred)"},{"owner":{"account_id":1141351,"reputation":18550,"user_id":1125159,"accept_rate":78,"display_name":"Powers"},"score":0,"creation_date":1607912862,"post_id":25999255,"comment_id":115413280,"body_markdown":"[os-lib](https://github.com/lihaoyi/os-lib) makes this possible with a one liner: `os.remove.all(os.pwd/&quot;dogs&quot;)`.  See my answer for more details.  This library is the easiest way to use a performant solution with an elegantly simple API.  Using the underlying Java libraries, like `java.nio`, directly makes you write code that&#39;s complex and ugly.","body":"<a href=\"https://github.com/lihaoyi/os-lib\" rel=\"nofollow noreferrer\">os-lib</a> makes this possible with a one liner: <code>os.remove.all(os.pwd&#47;&quot;dogs&quot;)</code>.  See my answer for more details.  This library is the easiest way to use a performant solution with an elegantly simple API.  Using the underlying Java libraries, like <code>java.nio</code>, directly makes you write code that&#39;s complex and ugly."},{"owner":{"account_id":246765,"reputation":41329,"user_id":521070,"accept_rate":72,"display_name":"Michael"},"score":1,"creation_date":1607925856,"post_id":25999255,"comment_id":115415496,"body_markdown":"@Powers Thanks a lot for suggesting `os-lib`. I use `java.nio` directly but would prefer a nice Scala wrapper instead.","body":"@Powers Thanks a lot for suggesting <code>os-lib</code>. I use <code>java.nio</code> directly but would prefer a nice Scala wrapper instead."}],"answers":[{"comments":[{"owner":{"account_id":246765,"reputation":41329,"user_id":521070,"accept_rate":72,"display_name":"Michael"},"score":4,"creation_date":1411487475,"post_id":25999465,"comment_id":40716573,"body_markdown":"Thank you. I would not like to use any external dependencies though.","body":"Thank you. I would not like to use any external dependencies though."}],"tags":[],"owner":{"account_id":450771,"reputation":107243,"user_id":846273,"accept_rate":93,"display_name":"Gabriele Petronella"},"comment_count":1,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1454275054,"creation_date":1411487410,"answer_id":25999465,"question_id":25999255,"body_markdown":"Using [scala IO][1]\r\n\r\n    import scalax.file.Path\r\n     \r\n    val path = Path.fromString(&quot;/tmp/testfile&quot;)    \r\n    try {\r\n      path.deleteRecursively(continueOnFailure = false) \r\n    } catch {\r\n      case e: IOException =&gt; // some file could not be deleted\r\n    }\r\n\r\nor better, you could use a `Try`\r\n\r\n    val path: Path = Path (&quot;/tmp/file&quot;)\r\n    Try(path.deleteRecursively(continueOnFailure = false))\r\n\r\nwhich will either result in a `Success[Int]` containing the number of files deleted, or a `Failure[IOException]`.\r\n\r\n  [1]: http://jesseeichar.github.io/scala-io-doc/0.4.3/index.html#!/file/delete\r\n","title":"Delete directory recursively in Scala","body":"<p>Using <a href=\"http://jesseeichar.github.io/scala-io-doc/0.4.3/index.html#!/file/delete\" rel=\"noreferrer\">scala IO</a></p>\n\n<pre><code>import scalax.file.Path\n\nval path = Path.fromString(\"/tmp/testfile\")    \ntry {\n  path.deleteRecursively(continueOnFailure = false) \n} catch {\n  case e: IOException =&gt; // some file could not be deleted\n}\n</code></pre>\n\n<p>or better, you could use a <code>Try</code></p>\n\n<pre><code>val path: Path = Path (\"/tmp/file\")\nTry(path.deleteRecursively(continueOnFailure = false))\n</code></pre>\n\n<p>which will either result in a <code>Success[Int]</code> containing the number of files deleted, or a <code>Failure[IOException]</code>.</p>\n"},{"comments":[{"owner":{"account_id":1053202,"reputation":59956,"user_id":1056563,"accept_rate":90,"display_name":"WestCoastProjects"},"score":0,"creation_date":1464022093,"post_id":26048916,"comment_id":62301439,"body_markdown":"One (ok admiittedly long ;) ) liner!","body":"One (ok admiittedly long ;) ) liner!"}],"tags":[],"owner":{"account_id":238870,"reputation":1883,"user_id":508064,"accept_rate":71,"display_name":"roterl"},"comment_count":1,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1411685194,"creation_date":1411682746,"answer_id":26048916,"question_id":25999255,"body_markdown":"Using java 6 without using dependencies this is pretty much the only way to do so.&lt;br/&gt;\r\nThe problem with your function is that it return Unit (which I btw would explicit note it using `def delete(file: File): Unit = {`\r\n\r\nI took your code and modify it to return map from file name to the deleting status.\r\n\r\n    def delete(file: File): Array[(String, Boolean)] = {\r\n      Option(file.listFiles).map(_.flatMap(f =&gt; delete(f))).getOrElse(Array()) :+ (file.getPath -&gt; file.delete)\r\n    }","title":"Delete directory recursively in Scala","body":"<p>Using java 6 without using dependencies this is pretty much the only way to do so.<br/>\nThe problem with your function is that it return Unit (which I btw would explicit note it using <code>def delete(file: File): Unit = {</code></p>\n\n<p>I took your code and modify it to return map from file name to the deleting status.</p>\n\n<pre><code>def delete(file: File): Array[(String, Boolean)] = {\n  Option(file.listFiles).map(_.flatMap(f =&gt; delete(f))).getOrElse(Array()) :+ (file.getPath -&gt; file.delete)\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1053202,"reputation":59956,"user_id":1056563,"accept_rate":90,"display_name":"WestCoastProjects"},"score":0,"creation_date":1464022050,"post_id":26769030,"comment_id":62301419,"body_markdown":"Nice recursive structure.","body":"Nice recursive structure."}],"tags":[],"owner":{"account_id":267053,"reputation":29704,"user_id":554988,"accept_rate":86,"display_name":"Garrett Hall"},"comment_count":1,"down_vote_count":3,"up_vote_count":30,"is_accepted":false,"score":27,"last_activity_date":1558363508,"creation_date":1415229627,"answer_id":26769030,"question_id":25999255,"body_markdown":"Try this code that throws an exception if it fails:\r\n\r\n    def deleteRecursively(file: File): Unit = {\r\n      if (file.isDirectory) {\r\n        file.listFiles.foreach(deleteRecursively)\r\n      }\r\n      if (file.exists &amp;&amp; !file.delete) {\r\n        throw new Exception(s&quot;Unable to delete ${file.getAbsolutePath}&quot;)\r\n      }\r\n    }\r\n\r\nYou could also fold or map over the delete if you want to return a value for all the deletes.","title":"Delete directory recursively in Scala","body":"<p>Try this code that throws an exception if it fails:</p>\n\n<pre><code>def deleteRecursively(file: File): Unit = {\n  if (file.isDirectory) {\n    file.listFiles.foreach(deleteRecursively)\n  }\n  if (file.exists &amp;&amp; !file.delete) {\n    throw new Exception(s\"Unable to delete ${file.getAbsolutePath}\")\n  }\n}\n</code></pre>\n\n<p>You could also fold or map over the delete if you want to return a value for all the deletes.</p>\n"},{"tags":[],"owner":{"account_id":1416173,"reputation":6877,"user_id":1341806,"accept_rate":80,"display_name":"Dan Ciborowski - MSFT"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1427285460,"creation_date":1427280950,"answer_id":29253684,"question_id":25999255,"body_markdown":"From\r\nhttp://alvinalexander.com/blog/post/java/java-io-faq-how-delete-directory-tree\r\n\r\nUsing Apache Common IO\r\n\r\n    import org.apache.commons.io.FileUtils;\r\n    import org.apache.commons.io.filefilter.WildcardFileFilter;\r\n    public void deleteDirectory(String directoryName)\r\n    throws IOException\r\n    {\r\n      try\r\n      {\r\n        FileUtils.deleteDirectory(new File(directoryName));\r\n      }\r\n      catch (IOException ioe)\r\n      {\r\n        // log the exception here\r\n        ioe.printStackTrace();\r\n        throw ioe;\r\n      }\r\n    }\r\n\r\n\r\nThe Scala one can just do this...\r\n\r\n    import org.apache.commons.io.FileUtils\r\n    import org.apache.commons.io.filefilter.WildcardFileFilter\r\n    FileUtils.deleteDirectory(new File(outputFile))\r\n\r\n\r\n[Maven Repo Imports][1]\r\n\r\n\r\n  [1]: http://mvnrepository.com/artifact/org.apache.commons/commons-io/1.3.2","title":"Delete directory recursively in Scala","body":"<p>From\n<a href=\"http://alvinalexander.com/blog/post/java/java-io-faq-how-delete-directory-tree\" rel=\"noreferrer\">http://alvinalexander.com/blog/post/java/java-io-faq-how-delete-directory-tree</a></p>\n\n<p>Using Apache Common IO</p>\n\n<pre><code>import org.apache.commons.io.FileUtils;\nimport org.apache.commons.io.filefilter.WildcardFileFilter;\npublic void deleteDirectory(String directoryName)\nthrows IOException\n{\n  try\n  {\n    FileUtils.deleteDirectory(new File(directoryName));\n  }\n  catch (IOException ioe)\n  {\n    // log the exception here\n    ioe.printStackTrace();\n    throw ioe;\n  }\n}\n</code></pre>\n\n<p>The Scala one can just do this...</p>\n\n<pre><code>import org.apache.commons.io.FileUtils\nimport org.apache.commons.io.filefilter.WildcardFileFilter\nFileUtils.deleteDirectory(new File(outputFile))\n</code></pre>\n\n<p><a href=\"http://mvnrepository.com/artifact/org.apache.commons/commons-io/1.3.2\" rel=\"noreferrer\">Maven Repo Imports</a></p>\n"},{"tags":[],"owner":{"account_id":320974,"reputation":1383,"user_id":639536,"accept_rate":17,"display_name":"Pramit"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1447961000,"creation_date":1435799407,"answer_id":31174138,"question_id":25999255,"body_markdown":"This one uses java.io but one can delete directories matching it with wildcard string which may or may not contain any content within it.\r\n\r\n     for (file &lt;- new File(&quot;&lt;path as String&gt;&quot;).listFiles;\r\n            if( file.getName() matches(&quot;[1-9]*&quot;))) FileUtils.deleteDirectory(file)\r\nDirectory structure e.g.\r\n* A/1/, A/2/, A/300/ ... thats why the regex String: [1-9]*, couldn&#39;t find a File API in scala which supports regex(may be i missed something).","title":"Delete directory recursively in Scala","body":"<p>This one uses java.io but one can delete directories matching it with wildcard string which may or may not contain any content within it.</p>\n\n<pre><code> for (file &lt;- new File(\"&lt;path as String&gt;\").listFiles;\n        if( file.getName() matches(\"[1-9]*\"))) FileUtils.deleteDirectory(file)\n</code></pre>\n\n<p>Directory structure e.g.\n* A/1/, A/2/, A/300/ ... thats why the regex String: [1-9]*, couldn't find a File API in scala which supports regex(may be i missed something).</p>\n"},{"tags":[],"owner":{"account_id":1395805,"reputation":853,"user_id":1325582,"accept_rate":92,"display_name":"Julian Peeters"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1463385446,"creation_date":1463377959,"answer_id":37247486,"question_id":25999255,"body_markdown":"Getting little lengthy, but here&#39;s one that combines the recursivity of Garrette&#39;s solution with the npe-safety of the original question.\r\n\r\n    def deleteFile(path: String) = {\r\n      val penultimateFile = new File(path.split(&#39;/&#39;).take(2).mkString(&quot;/&quot;))\r\n      def getFiles(f: File): Set[File] = {\r\n        Option(f.listFiles)\r\n          .map(a =&gt; a.toSet)\r\n          .getOrElse(Set.empty)\r\n      }\r\n      def getRecursively(f: File): Set[File] = {\r\n        val files = getFiles(f)\r\n        val subDirectories = files.filter(path =&gt; path.isDirectory)\r\n        subDirectories.flatMap(getRecursively) ++ files + penultimateFile\r\n      }\r\n      getRecursively(penultimateFile).foreach(file =&gt; {\r\n        if (getFiles(file).isEmpty &amp;&amp; file.getAbsoluteFile().exists) file.delete\r\n      })\r\n    }","title":"Delete directory recursively in Scala","body":"<p>Getting little lengthy, but here's one that combines the recursivity of Garrette's solution with the npe-safety of the original question.</p>\n\n<pre><code>def deleteFile(path: String) = {\n  val penultimateFile = new File(path.split('/').take(2).mkString(\"/\"))\n  def getFiles(f: File): Set[File] = {\n    Option(f.listFiles)\n      .map(a =&gt; a.toSet)\n      .getOrElse(Set.empty)\n  }\n  def getRecursively(f: File): Set[File] = {\n    val files = getFiles(f)\n    val subDirectories = files.filter(path =&gt; path.isDirectory)\n    subDirectories.flatMap(getRecursively) ++ files + penultimateFile\n  }\n  getRecursively(penultimateFile).foreach(file =&gt; {\n    if (getFiles(file).isEmpty &amp;&amp; file.getAbsoluteFile().exists) file.delete\n  })\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7045671,"reputation":1177,"user_id":5396562,"accept_rate":81,"display_name":"Slavik  Muz"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1479485872,"creation_date":1479485872,"answer_id":40681670,"question_id":25999255,"body_markdown":"   This is recursive method that clean all in directory, and return count of deleted files\r\n\r\n \r\n\r\n    def cleanDir(dir: File): Int = {\r\n        \r\n          @tailrec\r\n          def loop(list: Array[File], deletedFiles: Int): Int = {\r\n            if (list.isEmpty) deletedFiles\r\n            else {\r\n              if (list.head.isDirectory &amp;&amp; !list.head.listFiles().isEmpty) {\r\n                loop(list.head.listFiles() ++ list.tail ++ Array(list.head), deletedFiles)\r\n              } else {\r\n                val isDeleted = list.head.delete()\r\n                if (isDeleted) loop(list.tail, deletedFiles + 1)\r\n                else loop(list.tail, deletedFiles)\r\n              }\r\n            }\r\n          }\r\n        \r\n          loop(dir.listFiles(), 0)\r\n        }","title":"Delete directory recursively in Scala","body":"<p>This is recursive method that clean all in directory, and return count of deleted files</p>\n\n<pre><code>def cleanDir(dir: File): Int = {\n\n      @tailrec\n      def loop(list: Array[File], deletedFiles: Int): Int = {\n        if (list.isEmpty) deletedFiles\n        else {\n          if (list.head.isDirectory &amp;&amp; !list.head.listFiles().isEmpty) {\n            loop(list.head.listFiles() ++ list.tail ++ Array(list.head), deletedFiles)\n          } else {\n            val isDeleted = list.head.delete()\n            if (isDeleted) loop(list.tail, deletedFiles + 1)\n            else loop(list.tail, deletedFiles)\n          }\n        }\n      }\n\n      loop(dir.listFiles(), 0)\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":208069,"reputation":1871,"user_id":458325,"accept_rate":80,"display_name":"Chris Martin"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1502836729,"creation_date":1484016934,"answer_id":41560402,"question_id":25999255,"body_markdown":"To add to Slavik Muz&#39;s answer:\r\n\r\n    def deleteFile(file: File): Boolean = {\r\n\r\n      def childrenOf(file: File): List[File] = Option(file.listFiles()).getOrElse(Array.empty).toList\r\n    \r\n      @annotation.tailrec\r\n      def loop(files: List[File]): Boolean = files match {\r\n\r\n        case Nil  true\r\n        \r\n        case child :: parents if child.isDirectory &amp;&amp; child.listFiles().nonEmpty \r\n          loop((childrenOf(child) :+ child) ++ parents)\r\n          \r\n        case fileOrEmptyDir :: rest \r\n          println(s&quot;deleting $fileOrEmptyDir&quot;)\r\n          fileOrEmptyDir.delete()\r\n          loop(rest)\r\n    \r\n      }\r\n    \r\n      if (!file.exists()) false\r\n      else loop(childrenOf(file) :+ file)\r\n    }","title":"Delete directory recursively in Scala","body":"<p>To add to Slavik Muz's answer:</p>\n\n<pre><code>def deleteFile(file: File): Boolean = {\n\n  def childrenOf(file: File): List[File] = Option(file.listFiles()).getOrElse(Array.empty).toList\n\n  @annotation.tailrec\n  def loop(files: List[File]): Boolean = files match {\n\n    case Nil  true\n\n    case child :: parents if child.isDirectory &amp;&amp; child.listFiles().nonEmpty \n      loop((childrenOf(child) :+ child) ++ parents)\n\n    case fileOrEmptyDir :: rest \n      println(s\"deleting $fileOrEmptyDir\")\n      fileOrEmptyDir.delete()\n      loop(rest)\n\n  }\n\n  if (!file.exists()) false\n  else loop(childrenOf(file) :+ file)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":414154,"reputation":122081,"user_id":788207,"accept_rate":84,"display_name":"Vladimir Matveev"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1502841213,"creation_date":1502841213,"answer_id":45703150,"question_id":25999255,"body_markdown":"Using the Java NIO.2 API:\r\n\r\n    import java.nio.file.{Files, Paths, Path, SimpleFileVisitor, FileVisitResult}\r\n    import java.nio.file.attribute.BasicFileAttributes\r\n\r\n    def remove(root: Path): Unit = {\r\n      Files.walkFileTree(root, new SimpleFileVisitor[Path] {\r\n        override def visitFile(file: Path, attrs: BasicFileAttributes): FileVisitResult = {\r\n          Files.delete(file)\r\n          FileVisitResult.CONTINUE\r\n        }\r\n        override def postVisitDirectory(dir: Path, exc: IOException): FileVisitResult = {\r\n          Files.delete(dir)\r\n          FileVisitResult.CONTINUE\r\n        }\r\n      })\r\n    }\r\n\r\n    remove(Paths.get(&quot;/tmp/testdir&quot;))\r\n\r\nReally, it&#39;s a pity that the NIO.2 API is with us for so many years and yet few people are using it, even though it is really superior to the old `File` API.","title":"Delete directory recursively in Scala","body":"<p>Using the Java NIO.2 API:</p>\n\n<pre><code>import java.nio.file.{Files, Paths, Path, SimpleFileVisitor, FileVisitResult}\nimport java.nio.file.attribute.BasicFileAttributes\n\ndef remove(root: Path): Unit = {\n  Files.walkFileTree(root, new SimpleFileVisitor[Path] {\n    override def visitFile(file: Path, attrs: BasicFileAttributes): FileVisitResult = {\n      Files.delete(file)\n      FileVisitResult.CONTINUE\n    }\n    override def postVisitDirectory(dir: Path, exc: IOException): FileVisitResult = {\n      Files.delete(dir)\n      FileVisitResult.CONTINUE\n    }\n  })\n}\n\nremove(Paths.get(\"/tmp/testdir\"))\n</code></pre>\n\n<p>Really, it's a pity that the NIO.2 API is with us for so many years and yet few people are using it, even though it is really superior to the old <code>File</code> API.</p>\n"},{"comments":[{"owner":{"account_id":1141351,"reputation":18550,"user_id":1125159,"accept_rate":78,"display_name":"Powers"},"score":0,"creation_date":1571161710,"post_id":47380288,"comment_id":103145483,"body_markdown":"I packaged this code in a SBT project, so it&#39;s easily accessible for folks that have access to Maven: https://github.com/MrPowers/spark-daria/blob/master/src/main/scala/com/github/mrpowers/spark/daria/utils/NioUtils.scala  Thanks!","body":"I packaged this code in a SBT project, so it&#39;s easily accessible for folks that have access to Maven: <a href=\"https://github.com/MrPowers/spark-daria/blob/master/src/main/scala/com/github/mrpowers/spark/daria/utils/NioUtils.scala\" rel=\"nofollow noreferrer\">github.com/MrPowers/spark-daria/blob/master/src/main/scala/c&zwnj;&#8203;om/&hellip;</a>  Thanks!"}],"tags":[],"owner":{"account_id":266342,"reputation":7863,"user_id":553865,"accept_rate":67,"display_name":"Mike Slinn"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1511115214,"creation_date":1511115214,"answer_id":47380288,"question_id":25999255,"body_markdown":"Expanding on Vladimir Matveev&#39;s NIO2 solution:\r\n\r\n    object Util {\r\n      import java.io.IOException\r\n      import java.nio.file.{Files, Paths, Path, SimpleFileVisitor, FileVisitResult}\r\n      import java.nio.file.attribute.BasicFileAttributes\r\n    \r\n      def remove(root: Path, deleteRoot: Boolean = true): Unit =\r\n        Files.walkFileTree(root, new SimpleFileVisitor[Path] {\r\n          override def visitFile(file: Path, attributes: BasicFileAttributes): FileVisitResult = {\r\n            Files.delete(file)\r\n            FileVisitResult.CONTINUE\r\n          }\r\n    \r\n          override def postVisitDirectory(dir: Path, exception: IOException): FileVisitResult = {\r\n            if (deleteRoot) Files.delete(dir)\r\n            FileVisitResult.CONTINUE\r\n          }\r\n        })\r\n    \r\n      def removeUnder(string: String): Unit = remove(Paths.get(string), deleteRoot=false)\r\n    \r\n      def removeAll(string: String): Unit = remove(Paths.get(string))\r\n    \r\n      def removeUnder(file: java.io.File): Unit = remove(file.toPath, deleteRoot=false)\r\n    \r\n      def removeAll(file: java.io.File): Unit = remove(file.toPath)\r\n    }\r\n ","title":"Delete directory recursively in Scala","body":"<p>Expanding on Vladimir Matveev's NIO2 solution:</p>\n\n<pre><code>object Util {\n  import java.io.IOException\n  import java.nio.file.{Files, Paths, Path, SimpleFileVisitor, FileVisitResult}\n  import java.nio.file.attribute.BasicFileAttributes\n\n  def remove(root: Path, deleteRoot: Boolean = true): Unit =\n    Files.walkFileTree(root, new SimpleFileVisitor[Path] {\n      override def visitFile(file: Path, attributes: BasicFileAttributes): FileVisitResult = {\n        Files.delete(file)\n        FileVisitResult.CONTINUE\n      }\n\n      override def postVisitDirectory(dir: Path, exception: IOException): FileVisitResult = {\n        if (deleteRoot) Files.delete(dir)\n        FileVisitResult.CONTINUE\n      }\n    })\n\n  def removeUnder(string: String): Unit = remove(Paths.get(string), deleteRoot=false)\n\n  def removeAll(string: String): Unit = remove(Paths.get(string))\n\n  def removeUnder(file: java.io.File): Unit = remove(file.toPath, deleteRoot=false)\n\n  def removeAll(file: java.io.File): Unit = remove(file.toPath)\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":456840,"reputation":2947,"user_id":855809,"accept_rate":59,"display_name":"Knight71"},"score":3,"creation_date":1560947907,"post_id":51330257,"comment_id":99903401,"body_markdown":"This is simple and clean when compared to other solutions posted here.","body":"This is simple and clean when compared to other solutions posted here."},{"owner":{"account_id":3093694,"reputation":5811,"user_id":3973175,"accept_rate":52,"display_name":"con"},"score":0,"creation_date":1570829941,"post_id":51330257,"comment_id":103052554,"body_markdown":"this does not work, as this gives errors `error: not found: type File`","body":"this does not work, as this gives errors <code>error: not found: type File</code>"},{"owner":{"account_id":1714422,"reputation":5361,"user_id":1571826,"accept_rate":67,"display_name":"Def_Os"},"score":1,"creation_date":1578090943,"post_id":51330257,"comment_id":105338701,"body_markdown":"@con , make sure to have `import java.io.File`","body":"@con , make sure to have <code>import java.io.File</code>"}],"tags":[],"owner":{"account_id":3838953,"reputation":2411,"user_id":3182598,"display_name":"nomadSK25"},"comment_count":3,"down_vote_count":2,"up_vote_count":50,"is_accepted":true,"score":48,"last_activity_date":1578287055,"creation_date":1531503335,"answer_id":51330257,"question_id":25999255,"body_markdown":"With pure scala + java way \r\n\r\n    import scala.reflect.io.Directory\r\n    import java.io.File\r\n\r\n    val directory = new Directory(new File(&quot;/sampleDirectory&quot;))\r\n    directory.deleteRecursively()\r\n\r\n&gt; deleteRecursively() Returns false on failure","title":"Delete directory recursively in Scala","body":"<p>With pure scala + java way </p>\n\n<pre><code>import scala.reflect.io.Directory\nimport java.io.File\n\nval directory = new Directory(new File(\"/sampleDirectory\"))\ndirectory.deleteRecursively()\n</code></pre>\n\n<blockquote>\n  <p>deleteRecursively() Returns false on failure</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":8612350,"reputation":1094,"user_id":6450431,"display_name":"belgacea"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1574875387,"creation_date":1574875387,"answer_id":59075467,"question_id":25999255,"body_markdown":"What I ended up with \r\n\r\n    def deleteRecursively(f: File): Boolean = {\r\n      if (f.isDirectory) f.listFiles match {\r\n        case files: Array[File] =&gt; files.foreach(deleteRecursively)\r\n        case null =&gt;\r\n      }\r\n      f.delete()\r\n    }","title":"Delete directory recursively in Scala","body":"<p>What I ended up with </p>\n\n<pre><code>def deleteRecursively(f: File): Boolean = {\n  if (f.isDirectory) f.listFiles match {\n    case files: Array[File] =&gt; files.foreach(deleteRecursively)\n    case null =&gt;\n  }\n  f.delete()\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1141351,"reputation":18550,"user_id":1125159,"accept_rate":78,"display_name":"Powers"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1607912760,"creation_date":1607912760,"answer_id":65282858,"question_id":25999255,"body_markdown":"[os-lib](https://github.com/lihaoyi/os-lib) makes it easy to delete recursively with a one-liner:\r\n\r\n```scala\r\nos.remove.all(os.pwd/&quot;dogs&quot;)\r\n```\r\n\r\nos-lib uses java.nio under the hood, just doesn&#39;t expose all the Java ugliness.  See [here](https://mungingdata.com/scala/filesystem-paths-move-copy-list-delete-folders/) for more info on how to use the library.","title":"Delete directory recursively in Scala","body":"<p><a href=\"https://github.com/lihaoyi/os-lib\" rel=\"nofollow noreferrer\">os-lib</a> makes it easy to delete recursively with a one-liner:</p>\n<pre class=\"lang-scala prettyprint-override\"><code>os.remove.all(os.pwd/&quot;dogs&quot;)\n</code></pre>\n<p>os-lib uses java.nio under the hood, just doesn't expose all the Java ugliness.  See <a href=\"https://mungingdata.com/scala/filesystem-paths-move-copy-list-delete-folders/\" rel=\"nofollow noreferrer\">here</a> for more info on how to use the library.</p>\n"},{"comments":[{"owner":{"account_id":14436534,"reputation":879,"user_id":10428392,"display_name":"counter2015"},"score":0,"creation_date":1667900447,"post_id":74356666,"comment_id":131272212,"body_markdown":"Please consider adding a comment if you think this post can be improved.","body":"Please consider adding a comment if you think this post can be improved."}],"tags":[],"owner":{"account_id":14436534,"reputation":879,"user_id":10428392,"display_name":"counter2015"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1667890289,"creation_date":1667890289,"answer_id":74356666,"question_id":25999255,"body_markdown":"You can do this by excute external system commands.\r\n\r\n```scala\r\nimport sys.process._\r\n\r\n\r\ndef delete(path: String) = {\r\n  s&quot;&quot;&quot;rm -rf ${path}&quot;&quot;&quot;.!!\r\n}\r\n```","title":"Delete directory recursively in Scala","body":"<p>You can do this by excute external system commands.</p>\n<pre class=\"lang-scala prettyprint-override\"><code>import sys.process._\n\n\ndef delete(path: String) = {\n  s&quot;&quot;&quot;rm -rf ${path}&quot;&quot;&quot;.!!\n}\n</code></pre>\n"}],"owner":{"account_id":246765,"reputation":41329,"user_id":521070,"accept_rate":72,"display_name":"Michael"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37111,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"accepted_answer_id":51330257,"answer_count":14,"score":35,"last_activity_date":1667890289,"creation_date":1411486851,"question_id":25999255,"body_markdown":"I am writing the following (with Scala 2.10 and Java 6):\r\n\r\n    import java.io._\r\n\r\n    def delete(file: File) {\r\n      if (file.isDirectory) \r\n        Option(file.listFiles).map(_.toList).getOrElse(Nil).foreach(delete(_))\r\n      file.delete\r\n    }\r\n\r\nHow would you improve it ? The code seems working but it ignores the return value of `java.io.File.delete`. Can it be done easier with `scala.io` instead of `java.io` ? ","title":"Delete directory recursively in Scala","body":"<p>I am writing the following (with Scala 2.10 and Java 6):</p>\n\n<pre><code>import java.io._\n\ndef delete(file: File) {\n  if (file.isDirectory) \n    Option(file.listFiles).map(_.toList).getOrElse(Nil).foreach(delete(_))\n  file.delete\n}\n</code></pre>\n\n<p>How would you improve it ? The code seems working but it ignores the return value of <code>java.io.File.delete</code>. Can it be done easier with <code>scala.io</code> instead of <code>java.io</code> ? </p>\n"},{"tags":["java","math","permutation"],"comments":[{"owner":{"account_id":162866,"reputation":6068,"user_id":384617,"accept_rate":79,"display_name":"David P&#228;rsson"},"score":3,"creation_date":1354994308,"post_id":13780947,"comment_id":18949456,"body_markdown":"[What have you tried?](http://whathaveyoutried.com)","body":"<a href=\"http://whathaveyoutried.com\" rel=\"nofollow noreferrer\">What have you tried?</a>"},{"owner":{"account_id":277416,"reputation":681888,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1354994364,"post_id":13780947,"comment_id":18949470,"body_markdown":"Look at the &quot;Related&quot; section at the right. There are already dozens of questions asking for this.","body":"Look at the &quot;Related&quot; section at the right. There are already dozens of questions asking for this."},{"owner":{"account_id":1485477,"reputation":201,"user_id":1393857,"accept_rate":56,"display_name":"nitrogenhurricane"},"score":0,"creation_date":1354994829,"post_id":13780947,"comment_id":18949593,"body_markdown":"Of course I did search before I asked the question, but I couldn&#39;t find anything like this.","body":"Of course I did search before I asked the question, but I couldn&#39;t find anything like this."},{"owner":{"account_id":1485477,"reputation":201,"user_id":1393857,"accept_rate":56,"display_name":"nitrogenhurricane"},"score":0,"creation_date":1354994867,"post_id":13780947,"comment_id":18949606,"body_markdown":"As for the code, I didn&#39;t get far after I realized that my original concept was extremely stupid, I was just thinking since then.\n(originally my code just subtracted 1 from each dice&#39;s value, until it was 0, and then it went to the next one)","body":"As for the code, I didn&#39;t get far after I realized that my original concept was extremely stupid, I was just thinking since then. (originally my code just subtracted 1 from each dice&#39;s value, until it was 0, and then it went to the next one)"},{"owner":{"account_id":543740,"reputation":5767,"user_id":912935,"accept_rate":100,"display_name":"The111"},"score":0,"creation_date":1354996602,"post_id":13780947,"comment_id":18950023,"body_markdown":"FYI, *dice* is plural.  The singular form is *die*.  Perhaps this is not programming related, but if your software has a user interface, you should present the user with the right words. :-)","body":"FYI, <i>dice</i> is plural.  The singular form is <i>die</i>.  Perhaps this is not programming related, but if your software has a user interface, you should present the user with the right words. :-)"},{"owner":{"account_id":1485477,"reputation":201,"user_id":1393857,"accept_rate":56,"display_name":"nitrogenhurricane"},"score":0,"creation_date":1355000986,"post_id":13780947,"comment_id":18951094,"body_markdown":"Thanks, another thing I learned today.","body":"Thanks, another thing I learned today."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":1,"creation_date":1667917375,"post_id":13780947,"comment_id":131278671,"body_markdown":"Im voting to close this question because it is a well understood problem, but the OP has shown no thought or effort whatsoever.","body":"Im voting to close this question because it is a well understood problem, but the OP has shown no thought or effort whatsoever."}],"answers":[{"comments":[{"owner":{"account_id":1485477,"reputation":201,"user_id":1393857,"accept_rate":56,"display_name":"nitrogenhurricane"},"score":0,"creation_date":1354995025,"post_id":13780979,"comment_id":18949643,"body_markdown":"Thanks! I thought of the 6 level nested loop first, but I thought that there must be a more convenient solution. (I still wonder if this could be done with recursion somehow.)\n\nI think I&#39;ll go with the second, great idea, thanks!","body":"Thanks! I thought of the 6 level nested loop first, but I thought that there must be a more convenient solution. (I still wonder if this could be done with recursion somehow.)  I think I&#39;ll go with the second, great idea, thanks!"},{"owner":{"account_id":1435980,"reputation":127999,"user_id":1357341,"accept_rate":100,"display_name":"arshajii"},"score":0,"creation_date":1354995148,"post_id":13780979,"comment_id":18949676,"body_markdown":"The first method is very messy, and will be very hard to modify/update in the future. The second method is *extremely* inefficient.","body":"The first method is very messy, and will be very hard to modify/update in the future. The second method is <i>extremely</i> inefficient."},{"owner":{"account_id":1485477,"reputation":201,"user_id":1393857,"accept_rate":56,"display_name":"nitrogenhurricane"},"score":0,"creation_date":1354995226,"post_id":13780979,"comment_id":18949690,"body_markdown":"Yeah, but I only need it for this particular problem, so it would do fine. Altough the recursive method is nicer.","body":"Yeah, but I only need it for this particular problem, so it would do fine. Altough the recursive method is nicer."}],"tags":[],"owner":{"account_id":1932818,"reputation":46083,"user_id":1741864,"display_name":"sampson-chen"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1354994331,"creation_date":1354994331,"answer_id":13780979,"question_id":13780947,"body_markdown":"Since you specifically asked for *&quot;only the general concept&quot;*, here are two general approaches, either:\r\n\r\n- Use a 6-level nested for-loop for just do an exhaustive enumeration of all possible rolls between `0-6` (more efficient)\r\n- Just use 1 for-loop to generate all numbers between `0-66666`, and discard any numbers that contain `7, 8, 9`; and then print the numbers with some formatted padding, and commas (cleaner code to look at if you don&#39;t care about the small efficiency difference)","title":"All possible permutations of dice rolls","body":"<p>Since you specifically asked for <em>\"only the general concept\"</em>, here are two general approaches, either:</p>\n\n<ul>\n<li>Use a 6-level nested for-loop for just do an exhaustive enumeration of all possible rolls between <code>0-6</code> (more efficient)</li>\n<li>Just use 1 for-loop to generate all numbers between <code>0-66666</code>, and discard any numbers that contain <code>7, 8, 9</code>; and then print the numbers with some formatted padding, and commas (cleaner code to look at if you don't care about the small efficiency difference)</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":1485477,"reputation":201,"user_id":1393857,"accept_rate":56,"display_name":"nitrogenhurricane"},"score":0,"creation_date":1354995280,"post_id":13781050,"comment_id":18949704,"body_markdown":"Awesome! I&#39;ll accept your answer because I was looking for a recursive solution, but also thanks to all the others!","body":"Awesome! I&#39;ll accept your answer because I was looking for a recursive solution, but also thanks to all the others!"}],"tags":[],"owner":{"account_id":225474,"reputation":4101,"user_id":485971,"display_name":"irrelephant"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1354995549,"creation_date":1354994857,"answer_id":13781050,"question_id":13780947,"body_markdown":"You can use a recursive method, keeping track of depth:\r\nEDIT, maybe this method would be better:\r\n\r\n    class Main {\r\n        public static void roll(String s, int depth) {\r\n            if(depth == 0)\r\n                System.out.println(s.substring(1));\r\n            else\r\n                for(int i = 0; i &lt;= 6; i++)\r\n                    roll(s + &quot;,&quot; + i, depth - 1);\r\n        }\r\n        public static void main(String[] args) {\r\n            roll(&quot;&quot;, 6); //2nd parameter &gt; 0\r\n        }\r\n    }","title":"All possible permutations of dice rolls","body":"<p>You can use a recursive method, keeping track of depth:\nEDIT, maybe this method would be better:</p>\n\n<pre><code>class Main {\n    public static void roll(String s, int depth) {\n        if(depth == 0)\n            System.out.println(s.substring(1));\n        else\n            for(int i = 0; i &lt;= 6; i++)\n                roll(s + \",\" + i, depth - 1);\n    }\n    public static void main(String[] args) {\n        roll(\"\", 6); //2nd parameter &gt; 0\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1354994938,"creation_date":1354994938,"answer_id":13781058,"question_id":13780947,"body_markdown":"Just for elegance sake, I would write a recursive method that calls loops through 0-7 for a given index then itself to initialize the next index.\r\n\r\nIt could then initialize an array or abritrary size.","title":"All possible permutations of dice rolls","body":"<p>Just for elegance sake, I would write a recursive method that calls loops through 0-7 for a given index then itself to initialize the next index.</p>\n\n<p>It could then initialize an array or abritrary size.</p>\n"},{"tags":[],"owner":{"account_id":4842611,"reputation":21017,"user_id":3907250,"accept_rate":79,"display_name":"aerin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1496639096,"creation_date":1496633086,"answer_id":44361250,"question_id":13780947,"body_markdown":"Simple Python implementation.\r\n\r\nThis is when you just print.\r\n\r\n    def PrintAllPerms(n, str_):\r\n        if (n == 0):\r\n            print str_\r\n        else:\r\n            for i in [&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;,&quot;6&quot;]:\r\n                str_ = str_ + i\r\n                PrintAllPerms(n-1, str_)\r\n                str_ = str_[:-1]\r\n    \r\n    PrintAllPerms(2,&quot;&quot;)\r\n\r\nThis is when you want to return the whole permutation.\r\n\r\n    def PrintAllPerms(n, arr, str_):\r\n        if (n == 0):\r\n            arr.append(str_)\r\n            return arr\r\n        else:\r\n            for i in [&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;,&quot;6&quot;]:\r\n                str_ = str_ + i\r\n                arr = PrintAllPerms(n-1,arr,str_)\r\n                str_ = str_[:-1]\r\n            return arr\r\n\r\n    PrintAllPerms(2,[],&quot;&quot;)","title":"All possible permutations of dice rolls","body":"<p>Simple Python implementation.</p>\n\n<p>This is when you just print.</p>\n\n<pre><code>def PrintAllPerms(n, str_):\n    if (n == 0):\n        print str_\n    else:\n        for i in [\"1\",\"2\",\"3\",\"4\",\"5\",\"6\"]:\n            str_ = str_ + i\n            PrintAllPerms(n-1, str_)\n            str_ = str_[:-1]\n\nPrintAllPerms(2,\"\")\n</code></pre>\n\n<p>This is when you want to return the whole permutation.</p>\n\n<pre><code>def PrintAllPerms(n, arr, str_):\n    if (n == 0):\n        arr.append(str_)\n        return arr\n    else:\n        for i in [\"1\",\"2\",\"3\",\"4\",\"5\",\"6\"]:\n            str_ = str_ + i\n            arr = PrintAllPerms(n-1,arr,str_)\n            str_ = str_[:-1]\n        return arr\n\nPrintAllPerms(2,[],\"\")\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2618097,"reputation":21734,"user_id":2266772,"display_name":"Matthieu Brucher"},"score":2,"creation_date":1545237905,"post_id":53855230,"comment_id":94559164,"body_markdown":"Please provide some context to your answer.","body":"Please provide some context to your answer."}],"tags":[],"owner":{"account_id":14976920,"reputation":1,"user_id":10812121,"display_name":"MyJava"},"comment_count":1,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1545272275,"creation_date":1545236303,"answer_id":53855230,"question_id":13780947,"body_markdown":"    public class DiceTest {\r\n\t    public static void main(String[] args) {\r\n\t\t    int[] dice = {0, 1, 2, 3, 4, 5, 6 };\r\n\t\t    for (int i : dice) {\r\n\t\t\t    for (int j : dice) {\r\n\t\t\t\t    System.out.println(&quot;Printing dice values : &quot; + i + &quot; &quot; + j);\r\n\t\t\t    }\r\n\t\t    }\r\n\t    }\r\n    }","title":"All possible permutations of dice rolls","body":"<pre><code>public class DiceTest {\n    public static void main(String[] args) {\n        int[] dice = {0, 1, 2, 3, 4, 5, 6 };\n        for (int i : dice) {\n            for (int j : dice) {\n                System.out.println(\"Printing dice values : \" + i + \" \" + j);\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1485477,"reputation":201,"user_id":1393857,"accept_rate":56,"display_name":"nitrogenhurricane"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4267,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":13781050,"answer_count":5,"score":0,"last_activity_date":1667890246,"creation_date":1354994139,"question_id":13780947,"body_markdown":"I want to write a program that simulates the following: I have 6 dice, and I roll with some dice every time.\r\n\r\nWhen I don&#39;t roll with a die, I just assume that I rolled 0 with that. \r\n\r\nI want to list all the possible variations I can get this way. A few examples:\r\n\r\n1,2,4,6,0,1\r\n\r\n3,5,1,0,0,4\r\n\r\n6,6,4,2,0,0\r\netc.\r\n\r\nAny ideas on how to do this?\r\n(I am using Java, but of course, I&#39;m only interested in the general concept.)\r\n","title":"All possible permutations of dice rolls","body":"<p>I want to write a program that simulates the following: I have 6 dice, and I roll with some dice every time.</p>\n<p>When I don't roll with a die, I just assume that I rolled 0 with that.</p>\n<p>I want to list all the possible variations I can get this way. A few examples:</p>\n<p>1,2,4,6,0,1</p>\n<p>3,5,1,0,0,4</p>\n<p>6,6,4,2,0,0\netc.</p>\n<p>Any ideas on how to do this?\n(I am using Java, but of course, I'm only interested in the general concept.)</p>\n"},{"tags":["java","apache","download","wildfly"],"owner":{"account_id":1590496,"reputation":1304,"user_id":1473907,"accept_rate":73,"display_name":"mcacorner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1667889847,"creation_date":1667831145,"question_id":74348143,"body_markdown":"I am using wildfly-9 with java-8 on windows OS.\r\nbrowser: chrome and firefox\r\nFor download file implemented Range support.\r\nRefer some of the article related range support\r\n\r\n 1. https://github.com/spring-projects/spring-framework/blob/v4.2.0.RC1/spring-\r\nwebmvc/src/main/java/org/springframework/web/servlet/resource/ResourceHttpRequestHandler.java#L463\r\n 2. https://stackoverflow.com/questions/28427339/how-to-implement-http-byte-range-requests-in-spring-mvc\r\n 3. https://stackoverflow.com/questions/3411480/how-to-resume-an-interrupted-download\r\n\r\nImplemented code fore reference\r\nRequest from initial servlet\r\n\r\n    if (httpRequest.getHeader(HttpHeaders.RANGE) == null) {\r\n    \r\n    \tsetHeaders(httpResponse, contentType, contentDisposition, contentEncoding, asrFile.getSize());\r\n    \twriteContent(httpResponse, asrFile.getInputStream());\r\n    }\r\n    else {\r\n    \twritePartialContent(httpRequest, httpResponse, asrFile.getInputStream(), contentType, contentDisposition,contentEncoding,asrFile.getSize());\r\n    }\r\n\r\n\r\nImplementation for file download to support range\r\n\r\n    protected void writePartialContent(HttpServletRequest request, HttpServletResponse response,\r\n    \t\t\tInputStream in, String contentType, String contentDisposition, String contentEncoding, long contentLength) throws IOException {\r\n    \r\n    \t\tlong length = contentLength;\r\n    \r\n    \t\tList&lt;HttpRange&gt; ranges;\r\n    \t\ttry {\r\n    \t\t\tHttpHeaders headers = new ServletServerHttpRequest(request).getHeaders();\r\n    \t\t\tranges = headers.getRange();\r\n    \t\t}\r\n    \t\tcatch (IllegalArgumentException ex) {\r\n    \t\t\tresponse.addHeader(&quot;Content-Range&quot;, &quot;bytes */&quot; + length);\r\n    \t\t\tresponse.sendError(HttpServletResponse.SC_REQUESTED_RANGE_NOT_SATISFIABLE);\r\n                return;\r\n    \t\t}\r\n    \r\n    \t\tresponse.setStatus(HttpServletResponse.SC_PARTIAL_CONTENT);\r\n    \r\n    \t\tif (ranges.size() == 1) {\r\n    \t\t\tHttpRange range = ranges.get(0);\r\n    \r\n    \t\t\tlong start = range.getRangeStart(length);\r\n    \t\t\tlong end = range.getRangeEnd(length);\r\n    \t\t\tlong rangeLength = end - start + 1;\r\n    \r\n    \t\t\tsetHeaders(response, contentType,contentDisposition,contentEncoding,contentLength);\r\n    \t\t\tresponse.addHeader(&quot;Content-Range&quot;, &quot;bytes &quot; + start + &quot;-&quot; + end + &quot;/&quot; + length);\r\n                response.setContentLength((int) rangeLength);\r\n    \r\n    \t\t\ttry {\r\n    \t\t\t\tcopyRange(in, response.getOutputStream(), start, end);\r\n    \t\t\t}\r\n    \t\t\tfinally {\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\tin.close();\r\n    \t\t\t\t}\r\n    \t\t\t\tcatch (IOException ex) {\r\n    \t\t\t\t\tlog.error(&quot;IOException while closing:&quot;+ex,ex);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\telse {\r\n    \t\t\tString boundaryString = MimeTypeUtils.generateMultipartBoundaryString();\r\n    \t\t\tresponse.setContentType(&quot;multipart/byteranges; boundary=&quot; + boundaryString);\r\n    \r\n    \t\t\tServletOutputStream out = response.getOutputStream();\r\n    \r\n    \t\t\tfor (HttpRange range : ranges) {\r\n    \t\t\t\tlong start = range.getRangeStart(length);\r\n    \t\t\t\tlong end = range.getRangeEnd(length);\r\n    \r\n                    // Writing MIME header.\r\n                    out.println();\r\n                    out.println(&quot;--&quot; + boundaryString);\r\n                    if (contentType != null) {\r\n    \t                out.println(&quot;Content-Type: &quot; + contentType);\r\n                    }\r\n                    out.println(&quot;Content-Range: bytes &quot; + start + &quot;-&quot; + end + &quot;/&quot; + length);\r\n                    out.println();\r\n    \r\n                    // Printing content\r\n                    copyRange(in, out, start, end);\r\n    \t\t\t}\r\n    \t\t\tout.println();\r\n                out.print(&quot;--&quot; + boundaryString + &quot;--&quot;);\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \t\r\n    \tprivate void copyRange(InputStream in, OutputStream out, long start, long end) throws IOException {\r\n    \r\n    \t\tlong skipped = in.skip(start);\r\n    \r\n    \t\tif (skipped &lt; start) {\r\n    \t\t\tthrow new IOException(&quot;Skipped only &quot; + skipped + &quot; bytes out of &quot; + start + &quot; required.&quot;);\r\n    \t\t}\r\n    \r\n    \t\tlong bytesToCopy = end - start + 1;\r\n    \r\n    \t\tbyte buffer[] = new byte[StreamUtils.BUFFER_SIZE];\r\n    \t\twhile (bytesToCopy &gt; 0) {\r\n    \t\t\tint bytesRead = in.read(buffer);\r\n    \t\t\tif (bytesRead &lt;= bytesToCopy) {\r\n    \t\t\t\tout.write(buffer, 0, bytesRead);\r\n    \t\t\t\tbytesToCopy -= bytesRead;\r\n    \t\t\t}\r\n    \t\t\telse {\r\n    \t\t\t\tout.write(buffer, 0, (int) bytesToCopy);\r\n    \t\t\t\tbytesToCopy = 0;\r\n    \t\t\t}\r\n    \t\t\tif (bytesRead &lt; buffer.length) {\r\n    \t\t\t\tbreak;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tprotected void setHeaders(HttpServletResponse response, String contentType, String contentDisposition, String contentEncoding, long contentLength) throws IOException {\r\n    \t\tresponse.setContentLength((int) contentLength);\r\n    \r\n    \t\tif (contentType != null) {\r\n    \t\t\tresponse.setContentType(contentType);\r\n    \t\t}\r\n    \r\n    \t\tif(contentEncoding != null) {\r\n    \t\t\tresponse.setHeader(&quot;Content-Encoding&quot;, contentEncoding);\r\n    \t\t}\r\n    \t\tresponse.setHeader(HttpHeaders.ACCEPT_RANGES, &quot;bytes&quot;);\r\n    \t\tresponse.setHeader(&quot;Content-Disposition&quot;, contentDisposition);\r\n    \t\t\r\n    \t\t//note: setting unique value per download file\r\n    \t\tresponse.setHeader(&quot;ETag&quot;, ETag);\t\t   \t\t\r\n\r\n    \t}\r\n    \t\r\n    \t\r\n    \tprotected void writeContent(HttpServletResponse response, InputStream in) throws IOException {\r\n    \t\ttry {\r\n    \t\t\ttry {\r\n    \t\t\t\tStreamUtils.copy(in, response.getOutputStream());\r\n    \t\t\t}\r\n    \t\t\tfinally {\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\tin.close();\r\n    \t\t\t\t}\r\n    \t\t\t\tcatch (Throwable ex) {\r\n    \t\t\t\t\tlog.error(&quot;Throwable while closing:&quot;+ex,ex);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tcatch (FileNotFoundException ex) {\r\n    \t\t\tlog.error(&quot;FileNotFoundException while closing:&quot;+ex,ex);\r\n    \t\t}\r\n    \t}\r\n\r\nto check its working or not I am shutdown server in my system &amp; notice some of bytes are corrupted in downloaded file.\r\n\r\n1st line with junk character\r\n2nd line was original content\r\n[![enter image description here][1]][1]\r\nApache Log details\r\n&lt;pre&gt;\r\n+----+------------+------+-------------------------------+-----------------------------------------+-------------------+------------------------+-----------------------------------------+\r\n| No |    Host    | - -  |          Date&amp;Time            |           &quot;Request details&quot;             | HTTP status code  | content lenght(bytes)  |               Description               |\r\n+----+------------+------+-------------------------------+-----------------------------------------+-------------------+------------------------+-----------------------------------------+\r\n|  1 | 127.0.0.1  | - -  | [07/Nov/2022:18:41:06 +0530]  | &quot;GET /lnk/x7y7gUMpa99bCz4Boe HTTP/1.1&quot;  |              502  |              15466666  | (when server is stopped)                |\r\n|  2 | 127.0.0.1  | - -  | [07/Nov/2022:18:42:14 +0530]  | &quot;GET /lnk/x7y7gUMpa99bCz4Boe HTTP/1.1&quot;  |              503  |                   323  | (after server is stopped)               |\r\n|  3 | 127.0.0.1  | - -  | [07/Nov/2022:18:48:14 +0530]  | &quot;GET /lnk/x7y7gUMpa99bCz4Boe HTTP/1.1&quot;  |              206  |              27905015  | (after re-start server partial content) |\r\n+----+------------+------+-------------------------------+-----------------------------------------+-------------------+------------------------+-----------------------------------------+\r\n&lt;/pre&gt;\r\nI have doubt on second request, however content size is not match (323) with that junk char size.\r\n\r\nI have also check with Download manager(single thread)\r\n[![enter image description here][2]][2]\r\n\r\nApache logs\r\n&lt;pre&gt;\r\n\r\n+----+------------+-------------------------------+-----------------------------------------+-------------------+------------------------+---------------------------------+\r\n| No |    Host    |          Date&amp;Time            |           &quot;Request details&quot;             | HTTP status code  | content lenght(bytes)  |           Description           |\r\n+----+------------+-------------------------------+-----------------------------------------+-------------------+------------------------+---------------------------------+\r\n|  1 | 127.0.0.1  | [07/Nov/2022:19:00:49 +0530]  | &quot;HEAD /lnk/x7y7gUMpa99bCz4Boe HTTP/1.1&quot; |              502  |                      - | Initial request                 |\r\n|  2 | 127.0.0.1  | [07/Nov/2022:19:01:35 +0530]  | &quot;GET /lnk/x7y7gUMpa99bCz4Boe HTTP/1.1&quot;  |              503  |                    323 | Once server is shutdown         |\r\n|  3 | 127.0.0.1  | [07/Nov/2022:19:05:18 +0530]  | &quot;GET /lnk/x7y7gUMpa99bCz4Boe HTTP/1.1&quot;  |              200  |                  40952 | Once server re-start done       |\r\n|  4 | 127.0.0.1  | [07/Nov/2022:19:05:44 +0530]  | &quot;GET /lnk/x7y7gUMpa99bCz4Boe HTTP/1.1&quot;  |              206  |               33672353 | another partial content request |\r\n+----+------------+-------------------------------+-----------------------------------------+-------------------+------------------------+---------------------------------+\r\n&lt;/pre&gt;\r\n\r\nSeems like below request is served by apache when server is shutdown(offline)\r\n\r\n&lt;pre&gt;\r\n+----+------------+-------------------------------+-----------------------------------------+-------------------+------------------------+-------------------------+\r\n| No |    Host    |          Date&amp;Time            |           &quot;Request details&quot;             | HTTP status code  | content lenght(bytes)  |       Description       |\r\n+----+------------+-------------------------------+-----------------------------------------+-------------------+------------------------+-------------------------+\r\n|  2 | 127.0.0.1  | [07/Nov/2022:19:01:35 +0530]  | &quot;GET /lnk/x7y7gUMpa99bCz4Boe HTTP/1.1&quot;  |              503  |                    323 | Once server is shutdown |\r\n+----+------------+-------------------------------+-----------------------------------------+-------------------+------------------------+-------------------------+\r\n&lt;/pre&gt;\r\nIs there any configuration to avoid these junk characters/data or any details so I can troubleshoot this issue further.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nWJyZ.png\r\n  [2]: https://i.stack.imgur.com/DAXMY.png","title":"java: range file download issue with wildfly and apache","body":"<p>I am using wildfly-9 with java-8 on windows OS.\nbrowser: chrome and firefox\nFor download file implemented Range support.\nRefer some of the article related range support</p>\n<ol>\n<li><a href=\"https://github.com/spring-projects/spring-framework/blob/v4.2.0.RC1/spring-\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-framework/blob/v4.2.0.RC1/spring-</a>\nwebmvc/src/main/java/org/springframework/web/servlet/resource/ResourceHttpRequestHandler.java#L463</li>\n<li><a href=\"https://stackoverflow.com/questions/28427339/how-to-implement-http-byte-range-requests-in-spring-mvc\">How to Implement HTTP byte-range requests in Spring MVC</a></li>\n<li><a href=\"https://stackoverflow.com/questions/3411480/how-to-resume-an-interrupted-download\">how to resume an interrupted download</a></li>\n</ol>\n<p>Implemented code fore reference\nRequest from initial servlet</p>\n<pre><code>if (httpRequest.getHeader(HttpHeaders.RANGE) == null) {\n\n    setHeaders(httpResponse, contentType, contentDisposition, contentEncoding, asrFile.getSize());\n    writeContent(httpResponse, asrFile.getInputStream());\n}\nelse {\n    writePartialContent(httpRequest, httpResponse, asrFile.getInputStream(), contentType, contentDisposition,contentEncoding,asrFile.getSize());\n}\n</code></pre>\n<p>Implementation for file download to support range</p>\n<pre><code>protected void writePartialContent(HttpServletRequest request, HttpServletResponse response,\n            InputStream in, String contentType, String contentDisposition, String contentEncoding, long contentLength) throws IOException {\n\n        long length = contentLength;\n\n        List&lt;HttpRange&gt; ranges;\n        try {\n            HttpHeaders headers = new ServletServerHttpRequest(request).getHeaders();\n            ranges = headers.getRange();\n        }\n        catch (IllegalArgumentException ex) {\n            response.addHeader(&quot;Content-Range&quot;, &quot;bytes */&quot; + length);\n            response.sendError(HttpServletResponse.SC_REQUESTED_RANGE_NOT_SATISFIABLE);\n            return;\n        }\n\n        response.setStatus(HttpServletResponse.SC_PARTIAL_CONTENT);\n\n        if (ranges.size() == 1) {\n            HttpRange range = ranges.get(0);\n\n            long start = range.getRangeStart(length);\n            long end = range.getRangeEnd(length);\n            long rangeLength = end - start + 1;\n\n            setHeaders(response, contentType,contentDisposition,contentEncoding,contentLength);\n            response.addHeader(&quot;Content-Range&quot;, &quot;bytes &quot; + start + &quot;-&quot; + end + &quot;/&quot; + length);\n            response.setContentLength((int) rangeLength);\n\n            try {\n                copyRange(in, response.getOutputStream(), start, end);\n            }\n            finally {\n                try {\n                    in.close();\n                }\n                catch (IOException ex) {\n                    log.error(&quot;IOException while closing:&quot;+ex,ex);\n                }\n            }\n        }\n        else {\n            String boundaryString = MimeTypeUtils.generateMultipartBoundaryString();\n            response.setContentType(&quot;multipart/byteranges; boundary=&quot; + boundaryString);\n\n            ServletOutputStream out = response.getOutputStream();\n\n            for (HttpRange range : ranges) {\n                long start = range.getRangeStart(length);\n                long end = range.getRangeEnd(length);\n\n                // Writing MIME header.\n                out.println();\n                out.println(&quot;--&quot; + boundaryString);\n                if (contentType != null) {\n                    out.println(&quot;Content-Type: &quot; + contentType);\n                }\n                out.println(&quot;Content-Range: bytes &quot; + start + &quot;-&quot; + end + &quot;/&quot; + length);\n                out.println();\n\n                // Printing content\n                copyRange(in, out, start, end);\n            }\n            out.println();\n            out.print(&quot;--&quot; + boundaryString + &quot;--&quot;);\n        }\n    }\n    \n    \n    private void copyRange(InputStream in, OutputStream out, long start, long end) throws IOException {\n\n        long skipped = in.skip(start);\n\n        if (skipped &lt; start) {\n            throw new IOException(&quot;Skipped only &quot; + skipped + &quot; bytes out of &quot; + start + &quot; required.&quot;);\n        }\n\n        long bytesToCopy = end - start + 1;\n\n        byte buffer[] = new byte[StreamUtils.BUFFER_SIZE];\n        while (bytesToCopy &gt; 0) {\n            int bytesRead = in.read(buffer);\n            if (bytesRead &lt;= bytesToCopy) {\n                out.write(buffer, 0, bytesRead);\n                bytesToCopy -= bytesRead;\n            }\n            else {\n                out.write(buffer, 0, (int) bytesToCopy);\n                bytesToCopy = 0;\n            }\n            if (bytesRead &lt; buffer.length) {\n                break;\n            }\n        }\n    }\n    \n    protected void setHeaders(HttpServletResponse response, String contentType, String contentDisposition, String contentEncoding, long contentLength) throws IOException {\n        response.setContentLength((int) contentLength);\n\n        if (contentType != null) {\n            response.setContentType(contentType);\n        }\n\n        if(contentEncoding != null) {\n            response.setHeader(&quot;Content-Encoding&quot;, contentEncoding);\n        }\n        response.setHeader(HttpHeaders.ACCEPT_RANGES, &quot;bytes&quot;);\n        response.setHeader(&quot;Content-Disposition&quot;, contentDisposition);\n        \n        //note: setting unique value per download file\n        response.setHeader(&quot;ETag&quot;, ETag);               \n\n    }\n    \n    \n    protected void writeContent(HttpServletResponse response, InputStream in) throws IOException {\n        try {\n            try {\n                StreamUtils.copy(in, response.getOutputStream());\n            }\n            finally {\n                try {\n                    in.close();\n                }\n                catch (Throwable ex) {\n                    log.error(&quot;Throwable while closing:&quot;+ex,ex);\n                }\n            }\n        }\n        catch (FileNotFoundException ex) {\n            log.error(&quot;FileNotFoundException while closing:&quot;+ex,ex);\n        }\n    }\n</code></pre>\n<p>to check its working or not I am shutdown server in my system &amp; notice some of bytes are corrupted in downloaded file.</p>\n<p>1st line with junk character\n2nd line was original content\n<a href=\"https://i.stack.imgur.com/nWJyZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nWJyZ.png\" alt=\"enter image description here\" /></a>\nApache Log details</p>\n<pre>\n+----+------------+------+-------------------------------+-----------------------------------------+-------------------+------------------------+-----------------------------------------+\n| No |    Host    | - -  |          Date&Time            |           \"Request details\"             | HTTP status code  | content lenght(bytes)  |               Description               |\n+----+------------+------+-------------------------------+-----------------------------------------+-------------------+------------------------+-----------------------------------------+\n|  1 | 127.0.0.1  | - -  | [07/Nov/2022:18:41:06 +0530]  | \"GET /lnk/x7y7gUMpa99bCz4Boe HTTP/1.1\"  |              502  |              15466666  | (when server is stopped)                |\n|  2 | 127.0.0.1  | - -  | [07/Nov/2022:18:42:14 +0530]  | \"GET /lnk/x7y7gUMpa99bCz4Boe HTTP/1.1\"  |              503  |                   323  | (after server is stopped)               |\n|  3 | 127.0.0.1  | - -  | [07/Nov/2022:18:48:14 +0530]  | \"GET /lnk/x7y7gUMpa99bCz4Boe HTTP/1.1\"  |              206  |              27905015  | (after re-start server partial content) |\n+----+------------+------+-------------------------------+-----------------------------------------+-------------------+------------------------+-----------------------------------------+\n</pre>\n<p>I have doubt on second request, however content size is not match (323) with that junk char size.</p>\n<p>I have also check with Download manager(single thread)\n<a href=\"https://i.stack.imgur.com/DAXMY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DAXMY.png\" alt=\"enter image description here\" /></a></p>\n<p>Apache logs</p>\n<pre>\n\n+----+------------+-------------------------------+-----------------------------------------+-------------------+------------------------+---------------------------------+\n| No |    Host    |          Date&Time            |           \"Request details\"             | HTTP status code  | content lenght(bytes)  |           Description           |\n+----+------------+-------------------------------+-----------------------------------------+-------------------+------------------------+---------------------------------+\n|  1 | 127.0.0.1  | [07/Nov/2022:19:00:49 +0530]  | \"HEAD /lnk/x7y7gUMpa99bCz4Boe HTTP/1.1\" |              502  |                      - | Initial request                 |\n|  2 | 127.0.0.1  | [07/Nov/2022:19:01:35 +0530]  | \"GET /lnk/x7y7gUMpa99bCz4Boe HTTP/1.1\"  |              503  |                    323 | Once server is shutdown         |\n|  3 | 127.0.0.1  | [07/Nov/2022:19:05:18 +0530]  | \"GET /lnk/x7y7gUMpa99bCz4Boe HTTP/1.1\"  |              200  |                  40952 | Once server re-start done       |\n|  4 | 127.0.0.1  | [07/Nov/2022:19:05:44 +0530]  | \"GET /lnk/x7y7gUMpa99bCz4Boe HTTP/1.1\"  |              206  |               33672353 | another partial content request |\n+----+------------+-------------------------------+-----------------------------------------+-------------------+------------------------+---------------------------------+\n</pre>\n<p>Seems like below request is served by apache when server is shutdown(offline)</p>\n<pre>\n+----+------------+-------------------------------+-----------------------------------------+-------------------+------------------------+-------------------------+\n| No |    Host    |          Date&Time            |           \"Request details\"             | HTTP status code  | content lenght(bytes)  |       Description       |\n+----+------------+-------------------------------+-----------------------------------------+-------------------+------------------------+-------------------------+\n|  2 | 127.0.0.1  | [07/Nov/2022:19:01:35 +0530]  | \"GET /lnk/x7y7gUMpa99bCz4Boe HTTP/1.1\"  |              503  |                    323 | Once server is shutdown |\n+----+------------+-------------------------------+-----------------------------------------+-------------------+------------------------+-------------------------+\n</pre>\n<p>Is there any configuration to avoid these junk characters/data or any details so I can troubleshoot this issue further.</p>\n"},{"tags":["java","web-crawler"],"comments":[{"owner":{"account_id":11732873,"reputation":734,"user_id":8587732,"display_name":"Vitaly Chura"},"score":0,"creation_date":1667908610,"post_id":74356556,"comment_id":131275178,"body_markdown":"Why does it not work, is there an exception? What happens in twoDepthCrawling?","body":"Why does it not work, is there an exception? What happens in twoDepthCrawling?"},{"owner":{"account_id":14440817,"reputation":419,"user_id":10431512,"display_name":"kidulf"},"score":0,"creation_date":1667912852,"post_id":74356556,"comment_id":131276735,"body_markdown":"Exception in thread &quot;main&quot; java.util.ConcurrentModificationException\n\tat java.base/java.util.HashMap$HashIterator.nextNode(HashMap.java:1584)\n\tat java.base/java.util.HashMap$KeyIterator.next(HashMap.java:1607)\n\tat utils.HtmlHandler.oneDepthCrawling(HtmlHandler.java:63)\n\tat utils.HtmlHandler.twoDepthCrawling(HtmlHandler.java:53)\n\tat utils.HtmlHandler.getPageLinks(HtmlHandler.java:48)\n\tat utils.HtmlHandler.crawlWebPages(HtmlHandler.java:32)\n\tat main.Main.main(Main.java:16)","body":"Exception in thread &quot;main&quot; java.util.ConcurrentModificationException \tat java.base/java.util.HashMap$HashIterator.nextNode(HashMap.ja&zwnj;&#8203;va:1584) \tat java.base/java.util.HashMap$KeyIterator.next(HashMap.java:16&zwnj;&#8203;07) \tat utils.HtmlHandler.oneDepthCrawling(HtmlHandler.java:63) \tat utils.HtmlHandler.twoDepthCrawling(HtmlHandler.java:53) \tat utils.HtmlHandler.getPageLinks(HtmlHandler.java:48) \tat utils.HtmlHandler.crawlWebPages(HtmlHandler.java:32) \tat main.Main.main(Main.java:16)"},{"owner":{"account_id":14440817,"reputation":419,"user_id":10431512,"display_name":"kidulf"},"score":0,"creation_date":1667912863,"post_id":74356556,"comment_id":131276740,"body_markdown":"this is the exception","body":"this is the exception"},{"owner":{"account_id":11732873,"reputation":734,"user_id":8587732,"display_name":"Vitaly Chura"},"score":0,"creation_date":1667915093,"post_id":74356556,"comment_id":131277757,"body_markdown":"I don&#39;t see any multithreaded code, but apparently, there are some threads involved.\nWhere do you initialize a HashMap? What if you try to use ConcurrentHashMap?","body":"I don&#39;t see any multithreaded code, but apparently, there are some threads involved. Where do you initialize a HashMap? What if you try to use ConcurrentHashMap?"},{"owner":{"account_id":14440817,"reputation":419,"user_id":10431512,"display_name":"kidulf"},"score":0,"creation_date":1667917783,"post_id":74356556,"comment_id":131278863,"body_markdown":"I am not using HashMap at all. I think it has something to do with the for loop. But anyway, I still think that the logic that I created here won&#39;t give me the 25 HTML sources I am looking for. This is where I am having troubles The part where I fetch 5 HTMLs from each url","body":"I am not using HashMap at all. I think it has something to do with the for loop. But anyway, I still think that the logic that I created here won&#39;t give me the 25 HTML sources I am looking for. This is where I am having troubles The part where I fetch 5 HTMLs from each url"},{"owner":{"account_id":11732873,"reputation":734,"user_id":8587732,"display_name":"Vitaly Chura"},"score":0,"creation_date":1667918287,"post_id":74356556,"comment_id":131279065,"body_markdown":"urlLinks seems to be a HashMap","body":"urlLinks seems to be a HashMap"},{"owner":{"account_id":14440817,"reputation":419,"user_id":10431512,"display_name":"kidulf"},"score":0,"creation_date":1667922823,"post_id":74356556,"comment_id":131281074,"body_markdown":"trust me it&#39;s not. it&#39;s a Set","body":"trust me it&#39;s not. it&#39;s a Set"}],"owner":{"account_id":14440817,"reputation":419,"user_id":10431512,"display_name":"kidulf"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1667889325,"creation_date":1667889325,"question_id":74356556,"body_markdown":"I am trying to create a web crawler that gets a URL, download its HTML source and save it, fetch the links on that HTML, and for every link extracted I should repeat the process.\r\nThe program should accept those arguments:\r\n\r\n1. The maximal amount of different URLs to extract from the page\r\n2. How deep the process should run\r\n3. Boolean flag indicating cross-level uniqueness\r\n\r\nFor example: `    \r\n        \r\n        public static void main(String[] args) throws IOException {\r\n                HtmlHandler htmlHandler = HtmlHandler.builder()\r\n                .url(&quot;https://www.google.com&quot;)\r\n                .amountOfUrls(5)\r\n                .depth(Depth.TWO)\r\n                .isUnique(true)\r\n                .build();\r\n               htmlHandler.crawlWebPages();\r\n    }`\r\n\r\nThe desired result from it would be:\r\n1. save the HTML of the provided URL to: 0/www_google_com_html and fetch 5 unique URL&#39;s from the HTML\r\n\r\n2. save the 5 HTML&#39;s from step 1 to: 1/www......  and fetch 5 unique URL&#39;s from each HTML\r\n \r\n3. save the 25 HTML&#39;s from step 2 to 2/www...... and quit the program\r\n\r\nI basically was able to make it work for depth 1 ( step 2) but I am not able to make the program work for depth 2 ( fetching the 25 HTML&#39;s)\r\n\r\nthis is the code that saves the HTML: \r\n\r\n        private void downloadHtml(String url, Depth depth) {\r\n        try {\r\n            FileUtils.copyURLToFile(new URL(url), new    File(StringHandler.createFileName(url, depth)));\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(&quot;error downloading html source file&quot;, e);\r\n        }\r\n    }\r\n\r\n\r\nthis is the code that should fetch the URL&#39;s:\r\n\r\n     private void getPageLinks(Depth depth)  {\r\n        switch (depth) {\r\n            case ZERO -&gt; zeroDepthCrawling();\r\n            case ONE -&gt; oneDepthCrawling();\r\n            case TWO -&gt; twoDepthCrawling();\r\n        }\r\n    }\r\n\r\n    private void twoDepthCrawling()  {\r\n        oneDepthCrawling();\r\n        for(String url : urlLinks){\r\n            downloadHtml(url, Depth.TWO);\r\n            System.out.println(url + &quot; downloaded&quot;);\r\n        }\r\n    }\r\n\r\n    private void oneDepthCrawling()  {\r\n        zeroDepthCrawling();\r\n        getUrls(this.url);\r\n        for (String url : urlLinks) {\r\n            downloadHtml(url, Depth.ONE);\r\n            System.out.println(url + &quot; downloaded&quot;);\r\n            getUrls(url);\r\n        }\r\n    }\r\n\r\n    private void zeroDepthCrawling() {\r\n        downloadHtml(this.url, Depth.ZERO);\r\n        System.out.println(url + &quot; downloaded&quot;);\r\n    }\r\n\r\n    private void getUrls(String url)  {\r\n            Document doc;\r\n            int counter =0;\r\n            try {\r\n                doc = Jsoup.connect(url).get();\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(&quot;couldn&#39;t fetch links&quot;);\r\n            }\r\n            Elements availableLinksOnPage = doc.select(&quot;a[href]&quot;);\r\n            for (Element element : availableLinksOnPage) {\r\n                if(counter &lt;= amountOfUrls){\r\n                    if(!urlLinks.contains(element.absUrl(&quot;href&quot;))){\r\n                        urlLinks.add(element.absUrl(&quot;href&quot;));\r\n                        counter++;\r\n                    }\r\n                }\r\n            }\r\n    }\r\n\r\n\r\nI am not sure what I am doing wrong. \r\nCan anyone please help?\r\nThanks\r\n\r\n","title":"java depth web crawler issue","body":"<p>I am trying to create a web crawler that gets a URL, download its HTML source and save it, fetch the links on that HTML, and for every link extracted I should repeat the process.\nThe program should accept those arguments:</p>\n<ol>\n<li>The maximal amount of different URLs to extract from the page</li>\n<li>How deep the process should run</li>\n<li>Boolean flag indicating cross-level uniqueness</li>\n</ol>\n<p>For example: `</p>\n<pre><code>    public static void main(String[] args) throws IOException {\n            HtmlHandler htmlHandler = HtmlHandler.builder()\n            .url(&quot;https://www.google.com&quot;)\n            .amountOfUrls(5)\n            .depth(Depth.TWO)\n            .isUnique(true)\n            .build();\n           htmlHandler.crawlWebPages();\n}`\n</code></pre>\n<p>The desired result from it would be:</p>\n<ol>\n<li><p>save the HTML of the provided URL to: 0/www_google_com_html and fetch 5 unique URL's from the HTML</p>\n</li>\n<li><p>save the 5 HTML's from step 1 to: 1/www......  and fetch 5 unique URL's from each HTML</p>\n</li>\n<li><p>save the 25 HTML's from step 2 to 2/www...... and quit the program</p>\n</li>\n</ol>\n<p>I basically was able to make it work for depth 1 ( step 2) but I am not able to make the program work for depth 2 ( fetching the 25 HTML's)</p>\n<p>this is the code that saves the HTML:</p>\n<pre><code>    private void downloadHtml(String url, Depth depth) {\n    try {\n        FileUtils.copyURLToFile(new URL(url), new    File(StringHandler.createFileName(url, depth)));\n    } catch (IOException e) {\n        throw new RuntimeException(&quot;error downloading html source file&quot;, e);\n    }\n}\n</code></pre>\n<p>this is the code that should fetch the URL's:</p>\n<pre><code> private void getPageLinks(Depth depth)  {\n    switch (depth) {\n        case ZERO -&gt; zeroDepthCrawling();\n        case ONE -&gt; oneDepthCrawling();\n        case TWO -&gt; twoDepthCrawling();\n    }\n}\n\nprivate void twoDepthCrawling()  {\n    oneDepthCrawling();\n    for(String url : urlLinks){\n        downloadHtml(url, Depth.TWO);\n        System.out.println(url + &quot; downloaded&quot;);\n    }\n}\n\nprivate void oneDepthCrawling()  {\n    zeroDepthCrawling();\n    getUrls(this.url);\n    for (String url : urlLinks) {\n        downloadHtml(url, Depth.ONE);\n        System.out.println(url + &quot; downloaded&quot;);\n        getUrls(url);\n    }\n}\n\nprivate void zeroDepthCrawling() {\n    downloadHtml(this.url, Depth.ZERO);\n    System.out.println(url + &quot; downloaded&quot;);\n}\n\nprivate void getUrls(String url)  {\n        Document doc;\n        int counter =0;\n        try {\n            doc = Jsoup.connect(url).get();\n        } catch (IOException e) {\n            throw new RuntimeException(&quot;couldn't fetch links&quot;);\n        }\n        Elements availableLinksOnPage = doc.select(&quot;a[href]&quot;);\n        for (Element element : availableLinksOnPage) {\n            if(counter &lt;= amountOfUrls){\n                if(!urlLinks.contains(element.absUrl(&quot;href&quot;))){\n                    urlLinks.add(element.absUrl(&quot;href&quot;));\n                    counter++;\n                }\n            }\n        }\n}\n</code></pre>\n<p>I am not sure what I am doing wrong.\nCan anyone please help?\nThanks</p>\n"},{"tags":["javascript","java","regex","regex-lookarounds"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1667877547,"post_id":74355285,"comment_id":131267192,"body_markdown":"I don&#39;t believe that regular expressions are the right tool for this particular job.  Why do you think a regular expression is what you need?","body":"I don&#39;t believe that regular expressions are the right tool for this particular job.  Why do you think a regular expression is what you need?"},{"owner":{"account_id":933882,"reputation":2693,"user_id":963182,"accept_rate":76,"display_name":"Invictus"},"score":0,"creation_date":1667877708,"post_id":74355285,"comment_id":131267214,"body_markdown":"Then what would be the best way to the key and value ? Because, I need to find a way to get the key. I can&#39;t use the split here, as the `:` can be repeated in the string.","body":"Then what would be the best way to the key and value ? Because, I need to find a way to get the key. I can&#39;t use the split here, as the <code>:</code> can be repeated in the string."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1667878744,"post_id":74355285,"comment_id":131267335,"body_markdown":"Your string `&quot;abcd-1234\\&quot;:&quot;  :   value\\&quot;:1234\\&quot;:` is not in the form `&quot;key&quot; : &quot;value&quot;`","body":"Your string <code>&quot;abcd-1234\\&quot;:&quot;  :   value\\&quot;:1234\\&quot;:</code> is not in the form <code>&quot;key&quot; : &quot;value&quot;</code>"},{"owner":{"account_id":933882,"reputation":2693,"user_id":963182,"accept_rate":76,"display_name":"Invictus"},"score":0,"creation_date":1667879600,"post_id":74355285,"comment_id":131267441,"body_markdown":"the key/value can contain anything... like double quotes/ blackslashes.","body":"the key/value can contain anything... like double quotes/ blackslashes."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1667881289,"post_id":74355285,"comment_id":131267622,"body_markdown":"If this is JSON, you could use a JSON parser.  If these strings not intended to conform to JSON rules, you might have to write your own parser which iterates through the string and identifies the correct `:` character to split on, and any unescaped quote marks.","body":"If this is JSON, you could use a JSON parser.  If these strings not intended to conform to JSON rules, you might have to write your own parser which iterates through the string and identifies the correct <code>:</code> character to split on, and any unescaped quote marks."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1667887835,"post_id":74355285,"comment_id":131268580,"body_markdown":"`value\\&quot;:1234\\&quot;:` is not surrounded with `&quot;` characters.","body":"<code>value\\&quot;:1234\\&quot;:</code> is not surrounded with <code>&quot;</code> characters."},{"owner":{"account_id":3486275,"reputation":7429,"user_id":7475450,"display_name":"Peter Thoeny"},"score":0,"creation_date":1668029143,"post_id":74355285,"comment_id":131311532,"body_markdown":"Not clear. In your input `&quot;abcd-1234\\&quot;:&quot;  :   value\\&quot;:1234\\&quot;:`, what is the key (`abcd-1234\\&quot;:`?) and value (`value\\&quot;:1234\\&quot;:`?). Also could you post an example with multiple key/values, and expected result?","body":"Not clear. In your input <code>&quot;abcd-1234\\&quot;:&quot;  :   value\\&quot;:1234\\&quot;:</code>, what is the key (<code>abcd-1234\\&quot;:</code>?) and value (<code>value\\&quot;:1234\\&quot;:</code>?). Also could you post an example with multiple key/values, and expected result?"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667877779,"creation_date":1667877779,"answer_id":74355363,"question_id":74355285,"body_markdown":"Imagine the following string: `&quot;\\\\&quot;` - That contains `\\&quot;` but is still a complete, valid string. You can&#39;t just &#39;ignore `\\&quot;` - you have to count backslashes.\r\n\r\n`(?:[^&quot;\\\\]|\\\\.)` will cover any &#39;in-the-string&#39; character: Either a backslash followed by anything (. is anything), or any character at all, as long as it isn&#39;t either a backslash, or a quote. A string is a quote, followed by any amount of those, followed by a quote, thus, a regexp appears.\r\n\r\nHowever, regexps probably aren&#39;t the right tool for the job. This looks like a part of a JSON formatted input; there are JSON parsers that do a much better job on this, covering far more cases.","title":"regex for capturing the values","body":"<p>Imagine the following string: <code>&quot;\\\\&quot;</code> - That contains <code>\\&quot;</code> but is still a complete, valid string. You can't just 'ignore <code>\\&quot;</code> - you have to count backslashes.</p>\n<p><code>(?:[^&quot;\\\\]|\\\\.)</code> will cover any 'in-the-string' character: Either a backslash followed by anything (. is anything), or any character at all, as long as it isn't either a backslash, or a quote. A string is a quote, followed by any amount of those, followed by a quote, thus, a regexp appears.</p>\n<p>However, regexps probably aren't the right tool for the job. This looks like a part of a JSON formatted input; there are JSON parsers that do a much better job on this, covering far more cases.</p>\n"}],"owner":{"account_id":933882,"reputation":2693,"user_id":963182,"accept_rate":76,"display_name":"Invictus"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1667889267,"creation_date":1667876941,"question_id":74355285,"body_markdown":"need some help with nested double quotes regex, \r\n\r\nI have the following string:\r\n\r\n    &quot;abcd-1234\\&quot;:&quot;  :   value\\&quot;:1234\\&quot;:\r\n\r\n and I want to capture the entire string and separate it out into key and value pair but I am not able to come with a proper regex. \r\n\r\nBasically, I have the following string format --&gt;\r\n\r\n     &quot;key&quot; : &quot;value&quot;\r\n\r\n and I want to find a proper regex for the string format. \r\n\r\nI am able capture the key and value individually  with the following regex --&gt; \r\n\r\n    ((^[\\&quot;]).*\\2(?![^:]))\r\n\r\nBut not able to get a proper regex for the entire string. \r\n\r\nPlease, can someone help me with the regex.","title":"regex for capturing the values","body":"<p>need some help with nested double quotes regex,</p>\n<p>I have the following string:</p>\n<pre><code>&quot;abcd-1234\\&quot;:&quot;  :   value\\&quot;:1234\\&quot;:\n</code></pre>\n<p>and I want to capture the entire string and separate it out into key and value pair but I am not able to come with a proper regex.</p>\n<p>Basically, I have the following string format --&gt;</p>\n<pre><code> &quot;key&quot; : &quot;value&quot;\n</code></pre>\n<p>and I want to find a proper regex for the string format.</p>\n<p>I am able capture the key and value individually  with the following regex --&gt;</p>\n<pre><code>((^[\\&quot;]).*\\2(?![^:]))\n</code></pre>\n<p>But not able to get a proper regex for the entire string.</p>\n<p>Please, can someone help me with the regex.</p>\n"},{"tags":["java","mysql","hibernate"],"comments":[{"owner":{"account_id":1223835,"reputation":75888,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":2,"creation_date":1528637503,"post_id":50783644,"comment_id":88574829,"body_markdown":"It&#39;s worth noting that you are using an obsolete version of Hibernate.","body":"It&#39;s worth noting that you are using an obsolete version of Hibernate."}],"answers":[{"tags":[],"owner":{"account_id":2799929,"reputation":8527,"user_id":2408342,"accept_rate":90,"display_name":"Roshana Pitigala"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1528634606,"creation_date":1528633449,"answer_id":50783645,"question_id":50783644,"body_markdown":"I have found a way to add backticks to the column names in hibernate.\r\n\r\n 1. Open the xml file (TableName.hbm.xml) relative to the pojo file which has been mapped.\r\n 2. Find the property for the relative column.\r\n\r\n        &lt;property name=&quot;key&quot; type=&quot;string&quot;&gt;\r\n            &lt;column name=&quot;key&quot; /&gt;\r\n        &lt;/property&gt;\r\n 3. Surround the column name with square brackets.\r\n\r\n        &lt;property name=&quot;key&quot; type=&quot;string&quot;&gt;\r\n            &lt;column name=&quot;[key]&quot; /&gt;\r\n        &lt;/property&gt;\r\n\r\n----------\r\n\r\nBut this is a painstaking process as You&#39;ll have to do this to all the columns one by one for all the [MySQL keywords][1]. The best way is to avoid adding [MySQL keywords][1] as your database, table or column name.\r\n\r\nReferences :\r\n\r\n - [How to use database reserved keyword in Hibernate ?](http://www.mkyong.com/hibernate/how-to-use-database-reserved-keyword-in-hibernate/)\r\n\r\n\r\n\r\n  [1]: https://dev.mysql.com/doc/refman/5.5/en/keywords.html","title":"Add `backticks` to column names in hibernate","body":"<p>I have found a way to add backticks to the column names in hibernate.</p>\n\n<ol>\n<li>Open the xml file (TableName.hbm.xml) relative to the pojo file which has been mapped.</li>\n<li><p>Find the property for the relative column.</p>\n\n<pre><code>&lt;property name=\"key\" type=\"string\"&gt;\n    &lt;column name=\"key\" /&gt;\n&lt;/property&gt;\n</code></pre></li>\n<li><p>Surround the column name with square brackets.</p>\n\n<pre><code>&lt;property name=\"key\" type=\"string\"&gt;\n    &lt;column name=\"[key]\" /&gt;\n&lt;/property&gt;\n</code></pre></li>\n</ol>\n\n<hr>\n\n<p>But this is a painstaking process as You'll have to do this to all the columns one by one for all the <a href=\"https://dev.mysql.com/doc/refman/5.5/en/keywords.html\" rel=\"nofollow noreferrer\">MySQL keywords</a>. The best way is to avoid adding <a href=\"https://dev.mysql.com/doc/refman/5.5/en/keywords.html\" rel=\"nofollow noreferrer\">MySQL keywords</a> as your database, table or column name.</p>\n\n<p>References :</p>\n\n<ul>\n<li><a href=\"http://www.mkyong.com/hibernate/how-to-use-database-reserved-keyword-in-hibernate/\" rel=\"nofollow noreferrer\">How to use database reserved keyword in Hibernate ?</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":24382084,"reputation":31,"user_id":18313463,"display_name":"Yao"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667888715,"creation_date":1667888715,"answer_id":74356464,"question_id":50783644,"body_markdown":"The best solution is:\r\n\r\n 1. choose the right dialect class (e.g. if it is mysql8.0, use MySQL8Dialect;\r\n    mysql5.7, use MySQL57Dialect...)\r\n 2. configure **hibernate.auto_quote_keyword**=true (default:false)\r\n\r\nThe correct dialect class will register all key words of the corresponding mysql version.\r\nthe #2 will enable the quote for key words in all statements (DDL, select, insert...).\r\n\r\n","title":"Add `backticks` to column names in hibernate","body":"<p>The best solution is:</p>\n<ol>\n<li>choose the right dialect class (e.g. if it is mysql8.0, use MySQL8Dialect;\nmysql5.7, use MySQL57Dialect...)</li>\n<li>configure <strong>hibernate.auto_quote_keyword</strong>=true (default:false)</li>\n</ol>\n<p>The correct dialect class will register all key words of the corresponding mysql version.\nthe #2 will enable the quote for key words in all statements (DDL, select, insert...).</p>\n"}],"owner":{"account_id":2799929,"reputation":8527,"user_id":2408342,"accept_rate":90,"display_name":"Roshana Pitigala"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1028,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":50783645,"answer_count":2,"score":0,"last_activity_date":1667888715,"creation_date":1528633449,"question_id":50783644,"body_markdown":"Consider the query\r\n\r\n    INSERT INTO order (id, key, value) VALUES (?, ?, ?);\r\n\r\nThere are MySQL syntax errors in the above query as `order` and `key` are keywords in MySQL. So the solution would be to add backticks in the query.\r\n\r\n    INSERT INTO `order` (id, `key`, value) VALUES (?, ?, ?);\r\n\r\nHibernate is dumb enough not to do this automatically. According to [this answer](https://stackoverflow.com/a/14943679/2408342) by adding the following property to the hibernate configuration file solves the problem with the table name.\r\n\r\n    &lt;property name=&quot;hibernate.globally_quoted_identifiers&quot;&gt;true&lt;/property&gt;\r\n\r\nBut this only adds backticks to the database name and the table name. Problem is still there with the column name.\r\n\r\n&gt;**How can I add backticks to all the column names?**\r\n\r\n\r\n----------\r\n\r\n\r\n - Hibernate version : 3.6.10.Final\r\n - MySQL version : 5.7\r\n - hibernate.dialect : org.hibernate.dialect.MySQL5Dialect\r\n - JDK version : 1.8 (if that has to do with anything)","title":"Add `backticks` to column names in hibernate","body":"<p>Consider the query</p>\n\n<pre><code>INSERT INTO order (id, key, value) VALUES (?, ?, ?);\n</code></pre>\n\n<p>There are MySQL syntax errors in the above query as <code>order</code> and <code>key</code> are keywords in MySQL. So the solution would be to add backticks in the query.</p>\n\n<pre><code>INSERT INTO `order` (id, `key`, value) VALUES (?, ?, ?);\n</code></pre>\n\n<p>Hibernate is dumb enough not to do this automatically. According to <a href=\"https://stackoverflow.com/a/14943679/2408342\">this answer</a> by adding the following property to the hibernate configuration file solves the problem with the table name.</p>\n\n<pre><code>&lt;property name=\"hibernate.globally_quoted_identifiers\"&gt;true&lt;/property&gt;\n</code></pre>\n\n<p>But this only adds backticks to the database name and the table name. Problem is still there with the column name.</p>\n\n<blockquote>\n  <p><strong>How can I add backticks to all the column names?</strong></p>\n</blockquote>\n\n<hr>\n\n<ul>\n<li>Hibernate version : 3.6.10.Final</li>\n<li>MySQL version : 5.7</li>\n<li>hibernate.dialect : org.hibernate.dialect.MySQL5Dialect</li>\n<li>JDK version : 1.8 (if that has to do with anything)</li>\n</ul>\n"},{"tags":["java","spring","spring-boot","application.properties"],"answers":[{"tags":[],"owner":{"account_id":2402802,"reputation":1973,"user_id":3651739,"accept_rate":90,"display_name":"Jishnu Prathap"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1667888465,"creation_date":1667888465,"answer_id":74356439,"question_id":74356422,"body_markdown":" 1.  `server.port = ${PORT:8080}` will check for an environment variable `PORT` and take its value , if not present defaults to `8080`.\r\n 2. `server.port =8080` will always be `8080`","title":"what is the difference between below two statements in application.properties file in spring boot","body":"<ol>\n<li><code>server.port = ${PORT:8080}</code> will check for an environment variable <code>PORT</code> and take its value , if not present defaults to <code>8080</code>.</li>\n<li><code>server.port =8080</code> will always be <code>8080</code></li>\n</ol>\n"}],"owner":{"account_id":26863484,"reputation":33,"user_id":20446580,"display_name":"Richu Andrews"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":74356439,"answer_count":1,"score":3,"last_activity_date":1667888465,"creation_date":1667888320,"question_id":74356422,"body_markdown":"what is the difference between below two statements in application.properties file in spring boot.\r\n\r\nserver.port =8080\r\nand \r\nserver.port = ${PORT:8080}\r\n\r\nplease help with the explanation","title":"what is the difference between below two statements in application.properties file in spring boot","body":"<p>what is the difference between below two statements in application.properties file in spring boot.</p>\n<p>server.port =8080\nand\nserver.port = ${PORT:8080}</p>\n<p>please help with the explanation</p>\n"},{"tags":["java","tomcat","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":25313691,"reputation":83,"user_id":19136108,"display_name":"Andromeda"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1667888217,"creation_date":1667888217,"answer_id":74356410,"question_id":74356168,"body_markdown":"You need to set the `WAR` file, which should be deployed in part `&quot;Deployment&quot;`. And you need to set the application context e.g. to `/my_web_war`\r\n","title":"Intellij IDEA Java no web page found for the following web address: http://localhost:8090","body":"<p>You need to set the <code>WAR</code> file, which should be deployed in part <code>&quot;Deployment&quot;</code>. And you need to set the application context e.g. to <code>/my_web_war</code></p>\n"}],"owner":{"display_name":"user20263794"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74356410,"answer_count":1,"score":0,"last_activity_date":1667888217,"creation_date":1667886416,"question_id":74356168,"body_markdown":"When I changed project directory in my Java project on Intellij IDEA and when I started the project I got error what &quot;no web page found for the following web address: http://localhost:8090&quot;. My Tomcat settings is below. I fixed all settings for new directory but I can&#39;t start the project. How can I fix it ?\r\n\r\n[Tomcat settings][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/X5P1r.png","title":"Intellij IDEA Java no web page found for the following web address: http://localhost:8090","body":"<p>When I changed project directory in my Java project on Intellij IDEA and when I started the project I got error what &quot;no web page found for the following web address: http://localhost:8090&quot;. My Tomcat settings is below. I fixed all settings for new directory but I can't start the project. How can I fix it ?</p>\n<p><a href=\"https://i.stack.imgur.com/X5P1r.png\" rel=\"nofollow noreferrer\">Tomcat settings</a></p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9322,"page":901,"page_size":100}
