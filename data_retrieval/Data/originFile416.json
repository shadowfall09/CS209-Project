{"items":[{"tags":["java","android","emulation","nfc","card"],"answers":[{"tags":[],"owner":{"account_id":2755641,"reputation":8688,"user_id":2373819,"display_name":"Andrew"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1679311103,"creation_date":1679311103,"answer_id":75789626,"question_id":75789540,"body_markdown":"There are many different types of NFC Tags\r\n\r\nYou can emulate a Type 4 tag without rooting the phone.\r\nAs you have seen this can be done as per https://developer.android.com/guide/topics/connectivity/nfc/hce\r\n\r\nAn example of HCE is available at https://github.com/underwindfall/NFCAndroid\r\n\r\nThis works without rooting the phone.\r\n\r\nI believe that some (not all) phone hardware might be able to emulate one other type of Tag if you have rooted the phone and know the non public API to access the hardware in the right manner (not confirmed).","title":"NFC Emulate card witout root","body":"<p>There are many different types of NFC Tags</p>\n<p>You can emulate a Type 4 tag without rooting the phone.\nAs you have seen this can be done as per <a href=\"https://developer.android.com/guide/topics/connectivity/nfc/hce\" rel=\"nofollow noreferrer\">https://developer.android.com/guide/topics/connectivity/nfc/hce</a></p>\n<p>An example of HCE is available at <a href=\"https://github.com/underwindfall/NFCAndroid\" rel=\"nofollow noreferrer\">https://github.com/underwindfall/NFCAndroid</a></p>\n<p>This works without rooting the phone.</p>\n<p>I believe that some (not all) phone hardware might be able to emulate one other type of Tag if you have rooted the phone and know the non public API to access the hardware in the right manner (not confirmed).</p>\n"}],"owner":{"account_id":10560695,"reputation":99,"user_id":7780558,"display_name":"Enes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8951,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75789626,"answer_count":1,"score":0,"last_activity_date":1684840315,"creation_date":1679310524,"question_id":75789540,"body_markdown":"I am developing a simple app that emulates reading a card.\r\n\r\nThe big problem is, is it possible to emulate a card WITHOUT root access on an Android device?\r\n\r\nif yes, can you share your information\r\n\r\nthank you all.\r\n\r\n\r\nI have looked at the following:\r\nhttps://developer.android.com/guide/topics/connectivity/nfc/hce\r\n\r\nthis is the working app with root access only\r\nhttps://play.google.com/store/apps/details?id=com.yuanwofei.cardemulator.pro&amp;hl=tr&amp;gl=US","title":"NFC Emulate card witout root","body":"<p>I am developing a simple app that emulates reading a card.</p>\n<p>The big problem is, is it possible to emulate a card WITHOUT root access on an Android device?</p>\n<p>if yes, can you share your information</p>\n<p>thank you all.</p>\n<p>I have looked at the following:\n<a href=\"https://developer.android.com/guide/topics/connectivity/nfc/hce\" rel=\"nofollow noreferrer\">https://developer.android.com/guide/topics/connectivity/nfc/hce</a></p>\n<p>this is the working app with root access only\n<a href=\"https://play.google.com/store/apps/details?id=com.yuanwofei.cardemulator.pro&amp;hl=tr&amp;gl=US\" rel=\"nofollow noreferrer\">https://play.google.com/store/apps/details?id=com.yuanwofei.cardemulator.pro&amp;hl=tr&amp;gl=US</a></p>\n"},{"tags":["java","android","auto-increment"],"answers":[{"tags":[],"owner":{"account_id":1948424,"reputation":12649,"user_id":1753073,"display_name":"navylover"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1535872337,"creation_date":1535872337,"answer_id":52134782,"question_id":52134728,"body_markdown":"Convert number 1 to String &quot;001&quot; via below code:\r\n\r\n  \r\n\r\n      int num = 1; \r\n      String var = String.format(&quot;%03d&quot;, num); // var is &quot;001&quot;\r\n      int num = 99; \r\n      String var = String.format(&quot;%03d&quot;, num); // var is &quot;099&quot;\r\n\r\n\r\nand you could split 001001-001099 into two strings, each string has three digits.\r\n\r\n","title":"How to make auto-increment number start with (001…009, 011…099)?","body":"<p>Convert number 1 to String \"001\" via below code:</p>\n\n<pre><code>  int num = 1; \n  String var = String.format(\"%03d\", num); // var is \"001\"\n  int num = 99; \n  String var = String.format(\"%03d\", num); // var is \"099\"\n</code></pre>\n\n<p>and you could split 001001-001099 into two strings, each string has three digits.</p>\n"},{"tags":[],"owner":{"account_id":1791757,"reputation":22216,"user_id":1631967,"display_name":"aminography"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1535872405,"creation_date":1535872405,"answer_id":52134791,"question_id":52134728,"body_markdown":"Simply you can use this snippet to generate your desired sequence:\r\n\r\n        for (int i = 1; i &lt; 100; i++) {\r\n            String res = String.format(Locale.getDefault(), &quot;001%03d&quot;, i);\r\n        }","title":"How to make auto-increment number start with (001…009, 011…099)?","body":"<p>Simply you can use this snippet to generate your desired sequence:</p>\n\n<pre><code>    for (int i = 1; i &lt; 100; i++) {\n        String res = String.format(Locale.getDefault(), \"001%03d\", i);\n    }\n</code></pre>\n"}],"owner":{"account_id":13974552,"reputation":35,"user_id":10092237,"display_name":"aslam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4127,"favorite_count":0,"down_vote_count":8,"up_vote_count":4,"closed_date":1684937599,"accepted_answer_id":52134791,"answer_count":2,"score":-4,"last_activity_date":1684840114,"creation_date":1535871762,"question_id":52134728,"body_markdown":"Please help me, I don&#39;t know how to create an auto-incrementing number that starts with 001 - 999 in Android studio..\r\n\r\nI want to play audio from url like [this][1].\r\n\r\nI want to modify 001001 to 001002, 001003 &gt;&gt; 001099 etc\r\n\r\nThanks in advance..!\r\n\r\n\r\n  [1]: http://www.everyayah.com/data/Alafasy_64kbps/001001.Mp3","title":"How to make auto-increment number start with (001…009, 011…099)?","body":"<p>Please help me, I don't know how to create an auto-incrementing number that starts with 001 - 999 in Android studio..</p>\n<p>I want to play audio from url like <a href=\"http://www.everyayah.com/data/Alafasy_64kbps/001001.Mp3\" rel=\"nofollow noreferrer\">this</a>.</p>\n<p>I want to modify 001001 to 001002, 001003 &gt;&gt; 001099 etc</p>\n<p>Thanks in advance..!</p>\n"},{"tags":["java","regex","performance","cpu-usage"],"comments":[{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":1,"creation_date":1684314176,"post_id":76270212,"comment_id":134498839,"body_markdown":"The library implementation is probably fairly well optimized. We may not be able to provide you with drop-in replacements for it that would perform better. The part you can improve is probably your pattern, especially if it uses backtracking. And you have not shared that.","body":"The library implementation is probably fairly well optimized. We may not be able to provide you with drop-in replacements for it that would perform better. The part you can improve is probably your pattern, especially if it uses backtracking. And you have not shared that."},{"owner":{"account_id":262183,"reputation":13618,"user_id":546871,"accept_rate":40,"display_name":"AdrianHHH"},"score":1,"creation_date":1684317549,"post_id":76270212,"comment_id":134499629,"body_markdown":"Why are there two `.*` items in the pattern? The RegEx will have to process the first `.*` which will match the entire string, then the match for the `p` in `purchase` will fail. It will backtrack by one character and the `p` will fail again, and so on. Perhaps changing to a non-greedy initial part (i.e. to `.*?\\\\b(purchase)\\\\b.*`) would improve matters. But, I repeat, why are the two `.*` items present.","body":"Why are there two <code>.*</code> items in the pattern? The RegEx will have to process the first <code>.*</code> which will match the entire string, then the match for the <code>p</code> in <code>purchase</code> will fail. It will backtrack by one character and the <code>p</code> will fail again, and so on. Perhaps changing to a non-greedy initial part (i.e. to <code>.*?\\\\b(purchase)\\\\b.*</code>) would improve matters. But, I repeat, why are the two <code>.*</code> items present."},{"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"score":1,"creation_date":1684320944,"post_id":76270212,"comment_id":134500336,"body_markdown":"Should also get same result without &quot;.*&quot; if you use find not matches - `Pattern.compile(&quot;\\\\b(purchase)\\\\b&quot;).matcher(text).find()` and you can also re-use the Pattern.compile part.","body":"Should also get same result without &quot;.*&quot; if you use find not matches - <code>Pattern.compile(&quot;\\\\b(purchase)\\\\b&quot;).matcher(text).find()</code> and you can also re-use the Pattern.compile part."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":4,"creation_date":1684328249,"post_id":76270212,"comment_id":134501952,"body_markdown":"As @DuncG said, use the right operation, i.e. `find()` instead of abusing `matches()` with expensive `.*` around the pattern. This already avoids backtracking. But you also don’t need capturing groups, so `Pattern.compile(&quot;\\\\bpurchase\\\\b&quot;).matcher(text).find()` will do. Keep in mind that you can keep and reuse the result of `Pattern.compile(…)`, i.e.  instead of storing the pattern string in a `static final` field, store the `Pattern` object, so you’re not repeating the work on every invocation.","body":"As @DuncG said, use the right operation, i.e. <code>find()</code> instead of abusing <code>matches()</code> with expensive <code>.*</code> around the pattern. This already avoids backtracking. But you also don’t need capturing groups, so <code>Pattern.compile(&quot;\\\\bpurchase\\\\b&quot;).matcher(text).find()</code> will do. Keep in mind that you can keep and reuse the result of <code>Pattern.compile(…)</code>, i.e.  instead of storing the pattern string in a <code>static final</code> field, store the <code>Pattern</code> object, so you’re not repeating the work on every invocation."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1684328479,"post_id":76270212,"comment_id":134502020,"body_markdown":"If you want to squeeze out the maximum performance with the reference implementation, use `Pattern.compile(&quot;purchase\\\\b(?&lt;=\\\\b.{8})&quot;)`. Having the literal text at the beginning of the pattern will enable the internal use of the [Boyer–Moore algorithm](https://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string-search_algorithm). But avoiding backtracking and reusing the `Pattern` object are more important.","body":"If you want to squeeze out the maximum performance with the reference implementation, use <code>Pattern.compile(&quot;purchase\\\\b(?&lt;=\\\\b.{8})&quot;)</code>. Having the literal text at the beginning of the pattern will enable the internal use of the <a href=\"https://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string-search_algorithm\" rel=\"nofollow noreferrer\">Boyer–Moore algorithm</a>. But avoiding backtracking and reusing the <code>Pattern</code> object are more important."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1684334051,"post_id":76270212,"comment_id":134503490,"body_markdown":"If you really want to optimize, avoid using regular expressions for such a simple problem.  You could just do this:  `int i = text.indexOf(&quot;purchase&quot;); return i &gt;= 0 &amp;&amp; (i == 0 || !Character.isLetter(text.charAt(i))) &amp;&amp; (i == text.length() - 8 || !Character.isLetter(text.charAt(i + 8)))`.  It may look longer, but regular expressions do a lot of work under the hood and involve a lot more code than this approach.","body":"If you really want to optimize, avoid using regular expressions for such a simple problem.  You could just do this:  <code>int i = text.indexOf(&quot;purchase&quot;); return i &gt;= 0 &amp;&amp; (i == 0 || !Character.isLetter(text.charAt(i))) &amp;&amp; (i == text.length() - 8 || !Character.isLetter(text.charAt(i + 8)))</code>.  It may look longer, but regular expressions do a lot of work under the hood and involve a lot more code than this approach."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1684756009,"post_id":76270212,"comment_id":134558485,"body_markdown":"@VGR that’s not doing the same. Your variant checks whether the first occurrence of “purchase” is at word boundaries whereas the original code checks whether there is any occurrence of “purchase” at word boundaries.","body":"@VGR that’s not doing the same. Your variant checks whether the first occurrence of “purchase” is at word boundaries whereas the original code checks whether there is any occurrence of “purchase” at word boundaries."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684814179,"creation_date":1684813497,"answer_id":76311173,"question_id":76270212,"body_markdown":"There are a few changes you can make.\r\n\r\nYou can greatly reduce the CPU consumption by creating re-usable objects.\r\n\r\n```java\r\npublic class Example {\r\n    Pattern pattern = Pattern.compile(&quot;\\\\bpurchase\\\\b&quot;);\r\n    Matcher matcher;\r\n\r\n    private boolean isMatchPattern(String text) {\r\n        matcher = pattern.matcher(text);\r\n        return matcher.find();\r\n    }\r\n}\r\n```\r\n\r\nBehind the scenes, upon each call of `String.matches`, a new `Pattern` and `Matcher` object is created.\r\n\r\nTo combat this, you can create `Pattern` and `Matcher` fields within your class.  \r\nThen, access these fields from within your `isMatchPattern` method.\r\n\r\nFurthermore, for the regular expression pattern, there is no need to capture the text &quot;purchase&quot;, so you can remove the parentheses.\r\n\r\nAdditionally, the context of a `Pattern` pattern is non-conforming; it&#39;s expected to be anywhere within the text.  \r\nAs opposed to a `String.matches` call, which requires the entire parameter to match.  \r\nSo, you don&#39;t need the starting and ending `.*`, as they are redundant.\r\n\r\nIn regard to using an `String.indexOf`, or `String.contains`.\r\n\r\nIf you require the word-boundary check, then this is somewhat out of the question in terms of an idiomatic approach, as you&#39;d have to make more than one call.\r\n\r\nIf you don&#39;t require the check, then this would be the way to go.  \r\n\r\nAs a final solution, you can create a character array for-loop, which is more or less what the `Matcher` class does.","title":"Optimizing CPU Usage in Java Regex Matching","body":"<p>There are a few changes you can make.</p>\n<p>You can greatly reduce the CPU consumption by creating re-usable objects.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Example {\n    Pattern pattern = Pattern.compile(&quot;\\\\bpurchase\\\\b&quot;);\n    Matcher matcher;\n\n    private boolean isMatchPattern(String text) {\n        matcher = pattern.matcher(text);\n        return matcher.find();\n    }\n}\n</code></pre>\n<p>Behind the scenes, upon each call of <code>String.matches</code>, a new <code>Pattern</code> and <code>Matcher</code> object is created.</p>\n<p>To combat this, you can create <code>Pattern</code> and <code>Matcher</code> fields within your class.<br />\nThen, access these fields from within your <code>isMatchPattern</code> method.</p>\n<p>Furthermore, for the regular expression pattern, there is no need to capture the text &quot;purchase&quot;, so you can remove the parentheses.</p>\n<p>Additionally, the context of a <code>Pattern</code> pattern is non-conforming; it's expected to be anywhere within the text.<br />\nAs opposed to a <code>String.matches</code> call, which requires the entire parameter to match.<br />\nSo, you don't need the starting and ending <code>.*</code>, as they are redundant.</p>\n<p>In regard to using an <code>String.indexOf</code>, or <code>String.contains</code>.</p>\n<p>If you require the word-boundary check, then this is somewhat out of the question in terms of an idiomatic approach, as you'd have to make more than one call.</p>\n<p>If you don't require the check, then this would be the way to go.</p>\n<p>As a final solution, you can create a character array for-loop, which is more or less what the <code>Matcher</code> class does.</p>\n"}],"owner":{"account_id":4745793,"reputation":923,"user_id":3837201,"display_name":"zohreh"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":238,"favorite_count":0,"down_vote_count":5,"up_vote_count":1,"accepted_answer_id":76311173,"answer_count":1,"score":-4,"last_activity_date":1684839294,"creation_date":1684313466,"question_id":76270212,"body_markdown":"I encountered a performance issue related to regex matching in my Java project, which resulted in high CPU usage. Despite my attempts at regex optimization, I&#39;m still experiencing performance problems, particularly when multiple threads concurrently invoke the code.\r\n\r\nFor instance, when calling a method that performs regex matching concurrently 100 times, the CPU usage spikes to 90% for a brief period.\r\n\r\nHere&#39;s a simplified example of my code:\r\n\r\n    String BUY_PATTERN =&quot;.*\\\\b(purchase)\\\\b.*&quot;;\r\n\r\n    private static boolean isMatchPattern(String pattern, String text) {\r\n         return text.matches(BUY_PATTERN);\r\n    }\r\n\r\n\r\nI would like to reduce the CPU usage during regex matching. Can you provide suggestions for more efficient regex patterns that achieve the same functionality?\r\n\r\nAdditionally, I came across an article ([link provided][1]) discussing the impact of backtracking on performance, but I find it challenging to rewrite the regex to minimize backtracking.\r\n\r\nThank you for your assistance!\r\n\r\n\r\n  [1]: https://medium.com/javarevisited/a-regular-expression-makes-the-cpu-soar-to-100-72036a4b0771","title":"Optimizing CPU Usage in Java Regex Matching","body":"<p>I encountered a performance issue related to regex matching in my Java project, which resulted in high CPU usage. Despite my attempts at regex optimization, I'm still experiencing performance problems, particularly when multiple threads concurrently invoke the code.</p>\n<p>For instance, when calling a method that performs regex matching concurrently 100 times, the CPU usage spikes to 90% for a brief period.</p>\n<p>Here's a simplified example of my code:</p>\n<pre><code>String BUY_PATTERN =&quot;.*\\\\b(purchase)\\\\b.*&quot;;\n\nprivate static boolean isMatchPattern(String pattern, String text) {\n     return text.matches(BUY_PATTERN);\n}\n</code></pre>\n<p>I would like to reduce the CPU usage during regex matching. Can you provide suggestions for more efficient regex patterns that achieve the same functionality?</p>\n<p>Additionally, I came across an article (<a href=\"https://medium.com/javarevisited/a-regular-expression-makes-the-cpu-soar-to-100-72036a4b0771\" rel=\"nofollow noreferrer\">link provided</a>) discussing the impact of backtracking on performance, but I find it challenging to rewrite the regex to minimize backtracking.</p>\n<p>Thank you for your assistance!</p>\n"},{"tags":["java","spring-boot","spring-security","jwt"],"comments":[{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1684169769,"post_id":76255236,"comment_id":134474727,"body_markdown":"this is documented here in https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/jwt.html#oauth2resourceserver-jwt-authorization-extraction in the spring security documentation here is a fully documented example with code, and a large blogpost about how to do what you want to do https://github.com/Tandolf/spring-security-jwt-demo","body":"this is documented here in <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/jwt.html#oauth2resourceserver-jwt-authorization-extraction\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/reference/servlet/oauth2/&hellip;</a> in the spring security documentation here is a fully documented example with code, and a large blogpost about how to do what you want to do <a href=\"https://github.com/Tandolf/spring-security-jwt-demo\" rel=\"nofollow noreferrer\">github.com/Tandolf/spring-security-jwt-demo</a>"}],"answers":[{"tags":[],"owner":{"account_id":9256941,"reputation":1073,"user_id":6875688,"accept_rate":75,"display_name":"Hugo L.M"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1684165790,"creation_date":1684165790,"answer_id":76255841,"question_id":76255236,"body_markdown":"Finally, I implemented a new class to convert granted authorities:\r\n\r\n    public class JwtGrantedAuthoritiesConverter implements Converter&lt;Jwt, Collection&lt;GrantedAuthority&gt;&gt; {\r\n    \r\n        @Override\r\n        public Collection&lt;GrantedAuthority&gt; convert(Jwt jwt) {\r\n            List&lt;Map&lt;String, String&gt;&gt; authorities = jwt.getClaim(&quot;authorities&quot;);\r\n    \r\n            return authorities.stream()\r\n                    .map(authority -&gt; new SimpleGrantedAuthority(authority.get(&quot;authority&quot;)))\r\n                    .collect(Collectors.toList());\r\n        }\r\n    }\r\n\r\n\r\n\r\nThen I use it in SecurityFilterChain:\r\n    \r\n                    .oauth2ResourceServer(oauth2 -&gt; oauth2.jwt(jwt -&gt; {\r\n                        jwt.decoder(jwtDecoder);\r\n                        jwt.jwtAuthenticationConverter(jwtAuthenticationConverter());\r\n                    }));","title":"Authorities not loaded in Spring Security with JWT token and Spring Boot 3","body":"<p>Finally, I implemented a new class to convert granted authorities:</p>\n<pre><code>public class JwtGrantedAuthoritiesConverter implements Converter&lt;Jwt, Collection&lt;GrantedAuthority&gt;&gt; {\n\n    @Override\n    public Collection&lt;GrantedAuthority&gt; convert(Jwt jwt) {\n        List&lt;Map&lt;String, String&gt;&gt; authorities = jwt.getClaim(&quot;authorities&quot;);\n\n        return authorities.stream()\n                .map(authority -&gt; new SimpleGrantedAuthority(authority.get(&quot;authority&quot;)))\n                .collect(Collectors.toList());\n    }\n}\n</code></pre>\n<p>Then I use it in SecurityFilterChain:</p>\n<pre><code>                .oauth2ResourceServer(oauth2 -&gt; oauth2.jwt(jwt -&gt; {\n                    jwt.decoder(jwtDecoder);\n                    jwt.jwtAuthenticationConverter(jwtAuthenticationConverter());\n                }));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25690087,"reputation":1360,"user_id":19451633,"display_name":"Andrei Titov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684838949,"creation_date":1684835500,"answer_id":76313432,"question_id":76255236,"body_markdown":"With `spring-boot-starter-oauth2-resource-server` dependency you can also do that with out-of-box [JwtAuthenticationConverter](https://github.com/spring-projects/spring-security/blob/main/oauth2/oauth2-resource-server/src/main/java/org/springframework/security/oauth2/server/resource/authentication/JwtAuthenticationConverter.java) class by just defining an additional `@Bean`:\r\n\r\n```java\r\n@Bean\r\npublic JwtAuthenticationConverter jwtAuthenticationConverter() {\r\n    final JwtGrantedAuthoritiesConverter grantedAuthoritiesConverter = new JwtGrantedAuthoritiesConverter();\r\n    grantedAuthoritiesConverter.setAuthoritiesClaimName(&quot;authorities&quot;); // defaults to &quot;scope&quot; or &quot;scp&quot;\r\n    grantedAuthoritiesConverter.setAuthorityPrefix(&quot;&quot;); // defaults to &quot;SCOPE_&quot;\r\n\r\n    final JwtAuthenticationConverter jwtAuthenticationConverter = new JwtAuthenticationConverter();\r\n    jwtAuthenticationConverter.setJwtGrantedAuthoritiesConverter(grantedAuthoritiesConverter);\r\n    return jwtAuthenticationConverter;\r\n}\r\n```\r\n\r\nWith it you don&#39;t need to additionally configure your `JwtDecoder` and set any converters manually to a security filter chain config.  \r\nThis converter supports authorities claim as array and as string, in case of string representation consider defining delimiter using [`setAuthoritiesClaimDelimiter()`](https://github.com/spring-projects/spring-security/blob/main/oauth2/oauth2-resource-server/src/main/java/org/springframework/security/oauth2/server/resource/authentication/JwtGrantedAuthoritiesConverter.java#L91) method, default is `&quot; &quot;` (single space character).","title":"Authorities not loaded in Spring Security with JWT token and Spring Boot 3","body":"<p>With <code>spring-boot-starter-oauth2-resource-server</code> dependency you can also do that with out-of-box <a href=\"https://github.com/spring-projects/spring-security/blob/main/oauth2/oauth2-resource-server/src/main/java/org/springframework/security/oauth2/server/resource/authentication/JwtAuthenticationConverter.java\" rel=\"nofollow noreferrer\">JwtAuthenticationConverter</a> class by just defining an additional <code>@Bean</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic JwtAuthenticationConverter jwtAuthenticationConverter() {\n    final JwtGrantedAuthoritiesConverter grantedAuthoritiesConverter = new JwtGrantedAuthoritiesConverter();\n    grantedAuthoritiesConverter.setAuthoritiesClaimName(&quot;authorities&quot;); // defaults to &quot;scope&quot; or &quot;scp&quot;\n    grantedAuthoritiesConverter.setAuthorityPrefix(&quot;&quot;); // defaults to &quot;SCOPE_&quot;\n\n    final JwtAuthenticationConverter jwtAuthenticationConverter = new JwtAuthenticationConverter();\n    jwtAuthenticationConverter.setJwtGrantedAuthoritiesConverter(grantedAuthoritiesConverter);\n    return jwtAuthenticationConverter;\n}\n</code></pre>\n<p>With it you don't need to additionally configure your <code>JwtDecoder</code> and set any converters manually to a security filter chain config.<br />\nThis converter supports authorities claim as array and as string, in case of string representation consider defining delimiter using <a href=\"https://github.com/spring-projects/spring-security/blob/main/oauth2/oauth2-resource-server/src/main/java/org/springframework/security/oauth2/server/resource/authentication/JwtGrantedAuthoritiesConverter.java#L91\" rel=\"nofollow noreferrer\"><code>setAuthoritiesClaimDelimiter()</code></a> method, default is <code>&quot; &quot;</code> (single space character).</p>\n"}],"owner":{"account_id":9256941,"reputation":1073,"user_id":6875688,"accept_rate":75,"display_name":"Hugo L.M"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":997,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1684838949,"creation_date":1684161855,"question_id":76255236,"body_markdown":"I am developing a Java service using JDK 17, Spring Boot 3, and Spring Security 6.0.3. The service is an API that requires validation of a JWT token using a public key.\r\n\r\nI have the following security configuration in SecurityConfig.java:\r\n\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\n    import org.springframework.security.config.http.SessionCreationPolicy;\r\n    import org.springframework.security.oauth2.jwt.JwtDecoder;\r\n    import org.springframework.security.web.SecurityFilterChain;\r\n    \r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfig {\r\n        public static final String ADMIN = &quot;ROLE_ADMIN&quot;;\r\n    \r\n        private static final String[] AUTH_WHITELIST = {\r\n            &quot;/actuator/**&quot;,\r\n        };\r\n    \r\n        @Bean\r\n        public SecurityFilterChain securityFilterChain(HttpSecurity http, JwtDecoder jwtDecoder) throws Exception {\r\n            http\r\n                .csrf().disable()\r\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                .and()\r\n                .formLogin().disable()\r\n                .authorizeHttpRequests(requests -&gt; requests\r\n                    .requestMatchers(AUTH_WHITELIST).permitAll()\r\n                    .requestMatchers(&quot;/api/test/**&quot;).hasAnyAuthority(ADMIN)\r\n                    .anyRequest().authenticated()\r\n                )\r\n                .oauth2ResourceServer(oauth2 -&gt; oauth2.jwt(jwt -&gt; {\r\n                    jwt.decoder(jwtDecoder);\r\n                }));\r\n    \r\n            return http.build();\r\n        }\r\n    }\r\n\r\nIn addition, the AppConfig.java class contains the following code:\r\n\r\n    import lombok.RequiredArgsConstructor;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.core.convert.converter.Converter;\r\n    import org.springframework.security.oauth2.jwt.JwtDecoder;\r\n    import org.springframework.security.oauth2.jwt.NimbusJwtDecoder;\r\n    \r\n    import java.time.Instant;\r\n    import java.util.*;\r\n    \r\n    @Configuration\r\n    @RequiredArgsConstructor\r\n    public class AppConfig {\r\n        private final RsaKeyProperties rsaKeys;\r\n    \r\n        @Bean\r\n        JwtDecoder jwtDecoder() {\r\n            return NimbusJwtDecoder.withPublicKey(rsaKeys.publicKey()).build();\r\n        }\r\n    }\r\n\r\n\r\nThe problem I&#39;m facing is that Spring Security is not loading the authorities as expected. The following log message shows an authenticated token, but the &quot;Granted Authorities&quot; are empty:\r\n\r\n&gt; 2023-05-15T16:26:39.048+02:00 DEBUG 74733 --- [nio-8080-exec-3]\r\n&gt; o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token\r\n&gt; 2023-05-15T16:26:39.048+02:00 DEBUG 74733 --- [nio-8080-exec-3]\r\n&gt; .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder\r\n&gt; to JwtAuthenticationToken\r\n&gt; [Principal=org.springframework.security.oauth2.jwt.Jwt@d70a35df,\r\n&gt; Credentials=[PROTECTED], Authenticated=true,\r\n&gt; Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1,\r\n&gt; SessionId=null], Granted Authorities=[]]\r\n\r\nI have even tried using a custom Converter in AppConfig.java to convert the claims and add the authorities, but the issue persists. Here is the relevant code from AppConfig.java:\r\n\r\n    import lombok.RequiredArgsConstructor;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.core.convert.converter.Converter;\r\n    import org.springframework.security.oauth2.jwt.JwtDecoder;\r\n    import org.springframework.security.oauth2.jwt.NimbusJwtDecoder;\r\n    \r\n    import java.time.Instant;\r\n    import java.util.*;\r\n    \r\n    @Configuration\r\n    @RequiredArgsConstructor\r\n    public class AppConfig {\r\n        private final RsaKeyProperties rsaKeys;\r\n    \r\n        @Bean\r\n        JwtDecoder jwtDecoder() {\r\n            NimbusJwtDecoder jwtDecoder = NimbusJwtDecoder.withPublicKey(rsaKeys.publicKey()).build();\r\n            jwtDecoder.setClaimSetConverter(getClaimConverter());\r\n            return jwtDecoder;\r\n        }\r\n    \r\n        private Converter&lt;Map&lt;String, Object&gt;, Map&lt;String, Object&gt;&gt; getClaimConverter() {\r\n            return claims -&gt; {\r\n                Map&lt;String, Object&gt; mutableClaims = new HashMap&lt;&gt;(claims);\r\n    \r\n                // Convert &#39;exp&#39; and &#39;iat&#39; fields to Instant\r\n                if (claims.containsKey(&quot;exp&quot;)) {\r\n                    Date expDate = (Date) claims.get(&quot;exp&quot;);\r\n                    Instant expInstant = expDate.toInstant();\r\n                    mutableClaims.put(&quot;exp&quot;, expInstant);\r\n                }\r\n    \r\n                if (claims.containsKey(&quot;iat&quot;)) {\r\n                    Date iatDate = (Date) claims.get(&quot;iat&quot;);\r\n                    Instant iatInstant = iatDate.toInstant();\r\n                    mutableClaims.put(&quot;iat&quot;, iatInstant);\r\n                }\r\n    \r\n                // Hardcoded authorities for testing\r\n                List&lt;String&gt; authorities = List.of(&quot;ROLE_ADMIN&quot;);\r\n                mutableClaims.put(&quot;authorities&quot;, authorities);\r\n    \r\n                System.out.println(&quot;Claims: &quot; + claims);\r\n                System.out.println(&quot;Mutable claims: &quot; + mutableClaims);\r\n    \r\n                return mutableClaims;\r\n            };\r\n        }\r\n    }\r\n\r\n\r\n\r\nDespite these modifications, the &quot;Granted Authorities&quot; in the authentication token are still empty. As a result, I receive a 403 Forbidden response with the following message:\r\n\r\n&gt; www-authenticate: Bearer error=&quot;insufficient_scope&quot;,\r\n&gt; error_description=&quot;The request requires higher privileges than\r\n&gt; provided by the access token.&quot;,\r\n&gt; error_uri=&quot;https://tools.ietf.org/html/rfc6750#section-3.1&quot; I have\r\n&gt; also tested with hardcoding the authorities to ensure that the token\r\n&gt; format is not the issue. However, the authorities are still not\r\n&gt; properly loaded.\r\n\r\nI would greatly appreciate any guidance or suggestions on how to resolve this issue and ensure that the authorities are correctly loaded in Spring Security based on the provided token.\r\n\r\nThank you in advance for your help!\r\n\r\n----\r\n\r\nEdit 1\r\n\r\nToken example\r\n\r\n    {\r\n      &quot;sub&quot;: &quot;admin@example.com&quot;,\r\n      &quot;iss&quot;: &quot;self&quot;,\r\n      &quot;exp&quot;: 1684164375,\r\n      &quot;token_type&quot;: &quot;access_token&quot;,\r\n      &quot;iat&quot;: 1684160775,\r\n      &quot;authorities&quot;: [\r\n        &quot;ROLE_TEST&quot;,\r\n        &quot;ROLE_ADMIN&quot;,\r\n      ]\r\n    }","title":"Authorities not loaded in Spring Security with JWT token and Spring Boot 3","body":"<p>I am developing a Java service using JDK 17, Spring Boot 3, and Spring Security 6.0.3. The service is an API that requires validation of a JWT token using a public key.</p>\n<p>I have the following security configuration in SecurityConfig.java:</p>\n<pre><code>import org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.oauth2.jwt.JwtDecoder;\nimport org.springframework.security.web.SecurityFilterChain;\n\n@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n    public static final String ADMIN = &quot;ROLE_ADMIN&quot;;\n\n    private static final String[] AUTH_WHITELIST = {\n        &quot;/actuator/**&quot;,\n    };\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http, JwtDecoder jwtDecoder) throws Exception {\n        http\n            .csrf().disable()\n            .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n            .and()\n            .formLogin().disable()\n            .authorizeHttpRequests(requests -&gt; requests\n                .requestMatchers(AUTH_WHITELIST).permitAll()\n                .requestMatchers(&quot;/api/test/**&quot;).hasAnyAuthority(ADMIN)\n                .anyRequest().authenticated()\n            )\n            .oauth2ResourceServer(oauth2 -&gt; oauth2.jwt(jwt -&gt; {\n                jwt.decoder(jwtDecoder);\n            }));\n\n        return http.build();\n    }\n}\n</code></pre>\n<p>In addition, the AppConfig.java class contains the following code:</p>\n<pre><code>import lombok.RequiredArgsConstructor;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.core.convert.converter.Converter;\nimport org.springframework.security.oauth2.jwt.JwtDecoder;\nimport org.springframework.security.oauth2.jwt.NimbusJwtDecoder;\n\nimport java.time.Instant;\nimport java.util.*;\n\n@Configuration\n@RequiredArgsConstructor\npublic class AppConfig {\n    private final RsaKeyProperties rsaKeys;\n\n    @Bean\n    JwtDecoder jwtDecoder() {\n        return NimbusJwtDecoder.withPublicKey(rsaKeys.publicKey()).build();\n    }\n}\n</code></pre>\n<p>The problem I'm facing is that Spring Security is not loading the authorities as expected. The following log message shows an authenticated token, but the &quot;Granted Authorities&quot; are empty:</p>\n<blockquote>\n<p>2023-05-15T16:26:39.048+02:00 DEBUG 74733 --- [nio-8080-exec-3]\no.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token\n2023-05-15T16:26:39.048+02:00 DEBUG 74733 --- [nio-8080-exec-3]\n.s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder\nto JwtAuthenticationToken\n[Principal=org.springframework.security.oauth2.jwt.Jwt@d70a35df,\nCredentials=[PROTECTED], Authenticated=true,\nDetails=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1,\nSessionId=null], Granted Authorities=[]]</p>\n</blockquote>\n<p>I have even tried using a custom Converter in AppConfig.java to convert the claims and add the authorities, but the issue persists. Here is the relevant code from AppConfig.java:</p>\n<pre><code>import lombok.RequiredArgsConstructor;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.core.convert.converter.Converter;\nimport org.springframework.security.oauth2.jwt.JwtDecoder;\nimport org.springframework.security.oauth2.jwt.NimbusJwtDecoder;\n\nimport java.time.Instant;\nimport java.util.*;\n\n@Configuration\n@RequiredArgsConstructor\npublic class AppConfig {\n    private final RsaKeyProperties rsaKeys;\n\n    @Bean\n    JwtDecoder jwtDecoder() {\n        NimbusJwtDecoder jwtDecoder = NimbusJwtDecoder.withPublicKey(rsaKeys.publicKey()).build();\n        jwtDecoder.setClaimSetConverter(getClaimConverter());\n        return jwtDecoder;\n    }\n\n    private Converter&lt;Map&lt;String, Object&gt;, Map&lt;String, Object&gt;&gt; getClaimConverter() {\n        return claims -&gt; {\n            Map&lt;String, Object&gt; mutableClaims = new HashMap&lt;&gt;(claims);\n\n            // Convert 'exp' and 'iat' fields to Instant\n            if (claims.containsKey(&quot;exp&quot;)) {\n                Date expDate = (Date) claims.get(&quot;exp&quot;);\n                Instant expInstant = expDate.toInstant();\n                mutableClaims.put(&quot;exp&quot;, expInstant);\n            }\n\n            if (claims.containsKey(&quot;iat&quot;)) {\n                Date iatDate = (Date) claims.get(&quot;iat&quot;);\n                Instant iatInstant = iatDate.toInstant();\n                mutableClaims.put(&quot;iat&quot;, iatInstant);\n            }\n\n            // Hardcoded authorities for testing\n            List&lt;String&gt; authorities = List.of(&quot;ROLE_ADMIN&quot;);\n            mutableClaims.put(&quot;authorities&quot;, authorities);\n\n            System.out.println(&quot;Claims: &quot; + claims);\n            System.out.println(&quot;Mutable claims: &quot; + mutableClaims);\n\n            return mutableClaims;\n        };\n    }\n}\n</code></pre>\n<p>Despite these modifications, the &quot;Granted Authorities&quot; in the authentication token are still empty. As a result, I receive a 403 Forbidden response with the following message:</p>\n<blockquote>\n<p>www-authenticate: Bearer error=&quot;insufficient_scope&quot;,\nerror_description=&quot;The request requires higher privileges than\nprovided by the access token.&quot;,\nerror_uri=&quot;https://tools.ietf.org/html/rfc6750#section-3.1&quot; I have\nalso tested with hardcoding the authorities to ensure that the token\nformat is not the issue. However, the authorities are still not\nproperly loaded.</p>\n</blockquote>\n<p>I would greatly appreciate any guidance or suggestions on how to resolve this issue and ensure that the authorities are correctly loaded in Spring Security based on the provided token.</p>\n<p>Thank you in advance for your help!</p>\n<hr />\n<p>Edit 1</p>\n<p>Token example</p>\n<pre><code>{\n  &quot;sub&quot;: &quot;admin@example.com&quot;,\n  &quot;iss&quot;: &quot;self&quot;,\n  &quot;exp&quot;: 1684164375,\n  &quot;token_type&quot;: &quot;access_token&quot;,\n  &quot;iat&quot;: 1684160775,\n  &quot;authorities&quot;: [\n    &quot;ROLE_TEST&quot;,\n    &quot;ROLE_ADMIN&quot;,\n  ]\n}\n</code></pre>\n"},{"tags":["java","selenium","selenium-webdriver"],"answers":[{"tags":[],"owner":{"account_id":1208658,"reputation":32250,"user_id":1177636,"accept_rate":50,"display_name":"Yi Zeng"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1390509883,"creation_date":1383080730,"answer_id":19669109,"question_id":19668893,"body_markdown":"First a quote from Selenium&#39;s documentation.\r\n\r\n&gt; Get the value of a given CSS property. Color values should be returned\r\n&gt; as rgba strings, so, for example if the &quot;background-color&quot; property is\r\n&gt; set as &quot;green&quot; in the HTML source, the returned value will be &quot;rgba(0,\r\n&gt; 255, 0, 1)&quot;. Note that shorthand CSS properties (e.g. background,\r\n&gt; font, border, border-top, margin, margin-top, padding, padding-top,\r\n&gt; list-style, outline, pause, cue) are not returned, in accordance with\r\n&gt; the DOM CSS2 specification - you should directly access the longhand\r\n&gt; properties (e.g. background-color) to access the desired values.\r\n\r\nThen this is not a Selenium specific question, this is just a general programming question about how to parse string `rgba(102,102,102)` to three number.\r\n\r\n    // Originally untested code, just the logic.\r\n    // Thanks for Ripon Al Wasim&#39;s correction.\r\n\r\n    String color = driver.findElement(By.xpath(&quot;//div[@class=&#39;gb_e gb_f gb_g gb_xb&#39;]/a&quot;)).getCssValue(&quot;color&quot;);\r\n\r\n    String[] numbers = color.replace(&quot;rgba(&quot;, &quot;&quot;).replace(&quot;)&quot;, &quot;&quot;).split(&quot;,&quot;);\r\n    int r = Integer.parseInt(numbers[0].trim());\r\n    int g = Integer.parseInt(numbers[1].trim());\r\n    int b = Integer.parseInt(numbers[2].trim());\r\n    System.out.println(&quot;r: &quot; + r + &quot;g: &quot; + g + &quot;b: &quot; + b);\r\n\r\n    String hex = &quot;#&quot; + Integer.toHexString(r) + Integer.toHexString(g) + Integer.toHexString(b);\r\n    System.out.println(hex);","title":"getCssValue (Color) in Hex format in Selenium WebDriver","body":"<p>First a quote from Selenium's documentation.</p>\n\n<blockquote>\n  <p>Get the value of a given CSS property. Color values should be returned\n  as rgba strings, so, for example if the \"background-color\" property is\n  set as \"green\" in the HTML source, the returned value will be \"rgba(0,\n  255, 0, 1)\". Note that shorthand CSS properties (e.g. background,\n  font, border, border-top, margin, margin-top, padding, padding-top,\n  list-style, outline, pause, cue) are not returned, in accordance with\n  the DOM CSS2 specification - you should directly access the longhand\n  properties (e.g. background-color) to access the desired values.</p>\n</blockquote>\n\n<p>Then this is not a Selenium specific question, this is just a general programming question about how to parse string <code>rgba(102,102,102)</code> to three number.</p>\n\n<pre><code>// Originally untested code, just the logic.\n// Thanks for Ripon Al Wasim's correction.\n\nString color = driver.findElement(By.xpath(\"//div[@class='gb_e gb_f gb_g gb_xb']/a\")).getCssValue(\"color\");\n\nString[] numbers = color.replace(\"rgba(\", \"\").replace(\")\", \"\").split(\",\");\nint r = Integer.parseInt(numbers[0].trim());\nint g = Integer.parseInt(numbers[1].trim());\nint b = Integer.parseInt(numbers[2].trim());\nSystem.out.println(\"r: \" + r + \"g: \" + g + \"b: \" + b);\n\nString hex = \"#\" + Integer.toHexString(r) + Integer.toHexString(g) + Integer.toHexString(b);\nSystem.out.println(hex);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":306604,"reputation":37084,"user_id":617450,"accept_rate":61,"display_name":"Ripon Al Wasim"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1511349240,"creation_date":1390477903,"answer_id":21307354,"question_id":19668893,"body_markdown":"Way 1: Using StringTokenizer:\r\n\r\n    String color = driver.findElement(By.xpath(&quot;//div[@class=&#39;gb_e gb_f gb_g gb_xb&#39;]/a&quot;)).getCssValue(&quot;color&quot;);\r\n    String s1 = color.substring(4);\r\n    color = s1.replace(&#39;)&#39;, &#39; &#39;);\r\n    StringTokenizer st = new StringTokenizer(color);\r\n    int r = Integer.parseInt(st.nextToken(&quot;,&quot;).trim());\r\n    int g = Integer.parseInt(st.nextToken(&quot;,&quot;).trim());\r\n    int b = Integer.parseInt(st.nextToken(&quot;,&quot;).trim());\r\n    Color c = new Color(r, g, b);\r\n    String hex = &quot;#&quot;+Integer.toHexString(c.getRGB()).substring(2);\r\n    System.out.println(hex);\r\n\r\nWay 2:\r\n\r\n    String color = driver.findElement(By.xpath(&quot;//div[@class=&#39;gb_e gb_f gb_g gb_xb&#39;]/a&quot;)).getCssValue(&quot;color&quot;);\r\n    String[] numbers = color.replace(&quot;rgb(&quot;, &quot;&quot;).replace(&quot;)&quot;, &quot;&quot;).split(&quot;,&quot;);\r\n    int r = Integer.parseInt(numbers[0].trim());\r\n    int g = Integer.parseInt(numbers[1].trim());\r\n    int b = Integer.parseInt(numbers[2].trim());\r\n    System.out.println(&quot;r: &quot; + r + &quot;g: &quot; + g + &quot;b: &quot; + b);\r\n    String hex = &quot;#&quot; + Integer.toHexString(r) + Integer.toHexString(g) + Integer.toHexString(b);\r\n    System.out.println(hex);\r\n\r\n","title":"getCssValue (Color) in Hex format in Selenium WebDriver","body":"<p>Way 1: Using StringTokenizer:</p>\n\n<pre><code>String color = driver.findElement(By.xpath(\"//div[@class='gb_e gb_f gb_g gb_xb']/a\")).getCssValue(\"color\");\nString s1 = color.substring(4);\ncolor = s1.replace(')', ' ');\nStringTokenizer st = new StringTokenizer(color);\nint r = Integer.parseInt(st.nextToken(\",\").trim());\nint g = Integer.parseInt(st.nextToken(\",\").trim());\nint b = Integer.parseInt(st.nextToken(\",\").trim());\nColor c = new Color(r, g, b);\nString hex = \"#\"+Integer.toHexString(c.getRGB()).substring(2);\nSystem.out.println(hex);\n</code></pre>\n\n<p>Way 2:</p>\n\n<pre><code>String color = driver.findElement(By.xpath(\"//div[@class='gb_e gb_f gb_g gb_xb']/a\")).getCssValue(\"color\");\nString[] numbers = color.replace(\"rgb(\", \"\").replace(\")\", \"\").split(\",\");\nint r = Integer.parseInt(numbers[0].trim());\nint g = Integer.parseInt(numbers[1].trim());\nint b = Integer.parseInt(numbers[2].trim());\nSystem.out.println(\"r: \" + r + \"g: \" + g + \"b: \" + b);\nString hex = \"#\" + Integer.toHexString(r) + Integer.toHexString(g) + Integer.toHexString(b);\nSystem.out.println(hex);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8468750,"reputation":964,"user_id":6352151,"display_name":"Victor Moraes"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1495583044,"creation_date":1494253553,"answer_id":43850214,"question_id":19668893,"body_markdown":"I know this is rather old, but you can get a simpler solution by using `org.openqa.selenium.support.Color`:\r\n\r\n    import org.openqa.selenium.support.Color;\r\n    String color = driver.findElement(By.xpath(&quot;//div[@class=&#39;gb_e gb_f gb_g gb_xb&#39;]/a&quot;)).getCssValue(&quot;color&quot;);\r\n    System.out.println(color);\r\n    String hex = Color.fromString(color).asHex();\r\n    System.out.println(hex);\r\n\r\nIt gives you a single line solution and even adds leading zeroes when required (something that the previous answers aren&#39;t accounting for)","title":"getCssValue (Color) in Hex format in Selenium WebDriver","body":"<p>I know this is rather old, but you can get a simpler solution by using <code>org.openqa.selenium.support.Color</code>:</p>\n\n<pre><code>import org.openqa.selenium.support.Color;\nString color = driver.findElement(By.xpath(\"//div[@class='gb_e gb_f gb_g gb_xb']/a\")).getCssValue(\"color\");\nSystem.out.println(color);\nString hex = Color.fromString(color).asHex();\nSystem.out.println(hex);\n</code></pre>\n\n<p>It gives you a single line solution and even adds leading zeroes when required (something that the previous answers aren't accounting for)</p>\n"},{"tags":[],"owner":{"account_id":10737218,"reputation":151,"user_id":7901526,"display_name":"Fai Hasan"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1495570454,"creation_date":1495570085,"answer_id":44144119,"question_id":19668893,"body_markdown":"The code works, but just a little typo. The Color.fromString would be upper case C\r\n\r\n\r\n    import org.openqa.selenium.support.Color;\r\n    \r\n    String color = driver.findElement(By.xpath(&quot;xpath_value&quot;)).getCssValue(&quot;color&quot;);\r\n    System.out.println(color);\r\n    String hex = Color.fromString(color).asHex();\r\n    System.out.println(hex);\r\n\r\n","title":"getCssValue (Color) in Hex format in Selenium WebDriver","body":"<p>The code works, but just a little typo. The Color.fromString would be upper case C</p>\n\n<pre><code>import org.openqa.selenium.support.Color;\n\nString color = driver.findElement(By.xpath(\"xpath_value\")).getCssValue(\"color\");\nSystem.out.println(color);\nString hex = Color.fromString(color).asHex();\nSystem.out.println(hex);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23058055,"reputation":1,"user_id":17173821,"display_name":"Akshat Jain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684838560,"creation_date":1684838560,"answer_id":76313855,"question_id":19668893,"body_markdown":"    import org.openqa.selenium.support.Color;\r\n    \r\n    String color = driver.findElement(By.xpath(&quot;xpath_value&quot;)).getCssValue(&quot;color&quot;);\r\n    System.out.println(color);\r\n    String hex = Color.fromString(color).asHex();\r\n    System.out.println(hex);\r\n\r\njust a simple and sweet code will help you to get a answer","title":"getCssValue (Color) in Hex format in Selenium WebDriver","body":"<pre><code>import org.openqa.selenium.support.Color;\n\nString color = driver.findElement(By.xpath(&quot;xpath_value&quot;)).getCssValue(&quot;color&quot;);\nSystem.out.println(color);\nString hex = Color.fromString(color).asHex();\nSystem.out.println(hex);\n</code></pre>\n<p>just a simple and sweet code will help you to get a answer</p>\n"}],"owner":{"account_id":2802238,"reputation":531,"user_id":2410266,"accept_rate":55,"display_name":"user2410266"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42410,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":21307354,"answer_count":5,"score":9,"last_activity_date":1684838560,"creation_date":1383080072,"question_id":19668893,"body_markdown":"In the following code I need to print the `color` in `Hex format`. \r\n\r\n*First* Print statement is showing value in `RGB` format which is `rgb(102,102,102)`.\r\n\r\nThe *Second* statement is showing value in `Hex`  which is `#666666`\r\n\r\nBut I am manually entering the value into the second print statement which is `102,102,102`.\r\n\r\nIs there any way to pass the value which I got from the 1st statement (Color) into the second print statement and get result?\r\n\r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.firefox.FirefoxDriver;\r\n    \r\n    public class Google {\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n          \r\n            WebDriver driver = new FirefoxDriver();\r\n            driver.get(&quot;http://www.google.com/&quot;);\r\n            String Color = driver.findElement(By.xpath(&quot;//div[@class=&#39;gb_e gb_f gb_g gb_xb&#39;]/a&quot;)).getCssValue(&quot;color&quot;);\r\n            System.out.println(Color);\r\n            String hex = String.format(&quot;#%02x%02x%02x&quot;, 102,102,102);\r\n            System.out.println(hex);\r\n        }\r\n    }","title":"getCssValue (Color) in Hex format in Selenium WebDriver","body":"<p>In the following code I need to print the <code>color</code> in <code>Hex format</code>. </p>\n\n<p><em>First</em> Print statement is showing value in <code>RGB</code> format which is <code>rgb(102,102,102)</code>.</p>\n\n<p>The <em>Second</em> statement is showing value in <code>Hex</code>  which is <code>#666666</code></p>\n\n<p>But I am manually entering the value into the second print statement which is <code>102,102,102</code>.</p>\n\n<p>Is there any way to pass the value which I got from the 1st statement (Color) into the second print statement and get result?</p>\n\n<pre><code>import org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.firefox.FirefoxDriver;\n\npublic class Google {\n\n    public static void main(String[] args) throws Exception {\n\n        WebDriver driver = new FirefoxDriver();\n        driver.get(\"http://www.google.com/\");\n        String Color = driver.findElement(By.xpath(\"//div[@class='gb_e gb_f gb_g gb_xb']/a\")).getCssValue(\"color\");\n        System.out.println(Color);\n        String hex = String.format(\"#%02x%02x%02x\", 102,102,102);\n        System.out.println(hex);\n    }\n}\n</code></pre>\n"},{"tags":["java","junit","mockito","lombok","testcase"],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1684835837,"creation_date":1684835837,"answer_id":76313483,"question_id":76313443,"body_markdown":"Lombok author here: You don&#39;t.\r\n\r\nYou don&#39;t write test code to test that the inner workings of hibernate work correctly either; it&#39;s hibernate&#39;s job to test that. You don&#39;t test whether java&#39;s `switch` statement does what the spec says it does; it&#39;s team OpenJDK (the authors of `javac`)&#39;s job to test that.\r\n\r\nIf you&#39;re chasing 100% code coverage by your tests, configure your code coverage tool to exclude lombok-generated code.","title":"How can I write the test cases for Lombok annotation","body":"<p>Lombok author here: You don't.</p>\n<p>You don't write test code to test that the inner workings of hibernate work correctly either; it's hibernate's job to test that. You don't test whether java's <code>switch</code> statement does what the spec says it does; it's team OpenJDK (the authors of <code>javac</code>)'s job to test that.</p>\n<p>If you're chasing 100% code coverage by your tests, configure your code coverage tool to exclude lombok-generated code.</p>\n"},{"tags":[],"owner":{"account_id":22577442,"reputation":758,"user_id":16775102,"display_name":"Feel free"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684837912,"creation_date":1684837912,"answer_id":76313757,"question_id":76313443,"body_markdown":"You are testing only all args constructor. You can add test for no args constructor like:\r\n\r\n        @Test\r\n        public void testABC() {\r\n            ABC abc = new ABC();\r\n            assertNotNull(abc); \r\n        }","title":"How can I write the test cases for Lombok annotation","body":"<p>You are testing only all args constructor. You can add test for no args constructor like:</p>\n<pre><code>    @Test\n    public void testABC() {\n        ABC abc = new ABC();\n        assertNotNull(abc); \n    }\n</code></pre>\n"}],"owner":{"account_id":15461608,"reputation":11,"user_id":11154158,"display_name":"Praveen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":139,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1684837912,"creation_date":1684835563,"question_id":76313443,"body_markdown":"**How can I write the test cases for Lombok annotation?**\r\n```\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class ABC{\r\n\t\r\n\tprivate String status;\r\n\tprivate String errorCode;\r\n\tprivate String message;\r\n\tprivate String id;\r\n\tprivate Long orderNumber;\r\n\tprivate Long lineId;\r\n}\r\n//writing testcases for above class\t\r\n@Test\r\n\tpublic void testupdate_1()throws Exception{\r\n\t\t\r\n\t\r\n\tABC result=new ABC();\r\n\tresult.setStatus(&quot;&quot;);\r\n\tresult.setErrorCode(&quot;&quot;);\r\n\tresult.setMessage(&quot;&quot;);\r\n\tresult.setId(&quot;&quot;);\r\n\tresult.setOrderNumber(123l);\r\n\tresult.setLineId(12l);;\r\n\tassertNotNull(result);\r\n\tassertEquals(&quot;&quot;, result.getStatus());\r\n\tassertEquals(&quot;&quot;, result.getErrorCode());\r\n\tassertEquals(&quot;&quot;, result.getMessage());\r\n\tassertEquals(&quot;&quot;, result.getId());\r\n\tassertEquals(Long.valueOf(123l), result.getOrderNumber());\r\n\tassertEquals(Long.valueOf(12l), result.getLineId());\r\n\t\r\n\t}\r\n```\r\n\r\n\r\neven I tried this but code coverage is showing very less. Please, anyone can help me to find correct answer for this.","title":"How can I write the test cases for Lombok annotation","body":"<p><strong>How can I write the test cases for Lombok annotation?</strong></p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class ABC{\n    \n    private String status;\n    private String errorCode;\n    private String message;\n    private String id;\n    private Long orderNumber;\n    private Long lineId;\n}\n//writing testcases for above class \n@Test\n    public void testupdate_1()throws Exception{\n        \n    \n    ABC result=new ABC();\n    result.setStatus(&quot;&quot;);\n    result.setErrorCode(&quot;&quot;);\n    result.setMessage(&quot;&quot;);\n    result.setId(&quot;&quot;);\n    result.setOrderNumber(123l);\n    result.setLineId(12l);;\n    assertNotNull(result);\n    assertEquals(&quot;&quot;, result.getStatus());\n    assertEquals(&quot;&quot;, result.getErrorCode());\n    assertEquals(&quot;&quot;, result.getMessage());\n    assertEquals(&quot;&quot;, result.getId());\n    assertEquals(Long.valueOf(123l), result.getOrderNumber());\n    assertEquals(Long.valueOf(12l), result.getLineId());\n    \n    }\n</code></pre>\n<p>even I tried this but code coverage is showing very less. Please, anyone can help me to find correct answer for this.</p>\n"},{"tags":["java","file","replace","copy"],"answers":[{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"down_vote_count":0,"up_vote_count":129,"is_accepted":false,"score":129,"last_activity_date":1371560570,"creation_date":1371560570,"answer_id":17169576,"question_id":17169541,"body_markdown":"You need to pass `Path` arguments as explained by the error message:\r\n\r\n    Path from = cfgFilePath.toPath(); //convert from File to Path\r\n    Path to = Paths.get(strTarget); //convert from String to Path\r\n    Files.copy(from, to, StandardCopyOption.REPLACE_EXISTING);\r\n\r\nThat assumes your `strTarget` is a valid path.","title":"Copy file in Java and replace existing target","body":"<p>You need to pass <code>Path</code> arguments as explained by the error message:</p>\n\n<pre><code>Path from = cfgFilePath.toPath(); //convert from File to Path\nPath to = Paths.get(strTarget); //convert from String to Path\nFiles.copy(from, to, StandardCopyOption.REPLACE_EXISTING);\n</code></pre>\n\n<p>That assumes your <code>strTarget</code> is a valid path.</p>\n"},{"tags":[],"owner":{"account_id":2690688,"reputation":46,"user_id":2324109,"display_name":"vincentcjl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1371560632,"creation_date":1371560632,"answer_id":17169599,"question_id":17169541,"body_markdown":"strTarget is a &quot;String&quot; object and not a &quot;Path&quot; object","title":"Copy file in Java and replace existing target","body":"<p>strTarget is a \"String\" object and not a \"Path\" object</p>\n"},{"tags":[],"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"down_vote_count":5,"up_vote_count":15,"is_accepted":true,"score":10,"last_activity_date":1371732747,"creation_date":1371560887,"answer_id":17169700,"question_id":17169541,"body_markdown":"As a complement to @assylias&#39; answer:\r\n\r\nIf you use Java 7, drop `File` entirely. What you want is `Path` instead.\r\n\r\nAnd to get a `Path` object matching a path on your filesystem, you do:\r\n\r\n    Paths.get(&quot;path/to/file&quot;); // argument may also be absolute\r\n\r\nGet used to it real fast. Note that if you still use APIs which require `File`, `Path` has a `.toFile()` method.\r\n\r\nNote that if you are in the unfortunate case where you use an API which returns `File` objects, you can always do:\r\n\r\n    theFileObject.toPath()\r\n\r\nBut in code of yours, use `Path`. Systematically. Without a second thought.\r\n\r\n**EDIT** Copying a file to another using 1.6 using NIO can be done as such; note that the `Closer` class is inspited by [Guava][1]:\r\n\r\n    public final class Closer\r\n        implements Closeable\r\n    {\r\n        private final List&lt;Closeable&gt; closeables = new ArrayList&lt;Closeable&gt;();\r\n\r\n        // @Nullable is a JSR 305 annotation\r\n        public &lt;T extends Closeable&gt; T add(@Nullable final T closeable)\r\n        {\r\n            closeables.add(closeable);\r\n            return closeable;\r\n        }\r\n\r\n        public void closeQuietly()\r\n        {\r\n            try {\r\n                close();\r\n            } catch (IOException ignored) {\r\n            }\r\n        }\r\n\r\n        @Override\r\n        public void close()\r\n            throws IOException\r\n        {\r\n            IOException toThrow = null;\r\n            final List&lt;Closeable&gt; l = new ArrayList&lt;Closeable&gt;(closeables);\r\n            Collections.reverse(l);\r\n\r\n            for (final Closeable closeable: l) {\r\n                if (closeable == null)\r\n                    continue;\r\n                try {\r\n                    closeable.close();\r\n                } catch (IOException e) {\r\n                    if (toThrow == null)\r\n                        toThrow = e;\r\n                }\r\n            }\r\n\r\n            if (toThrow != null)\r\n                throw toThrow;\r\n        }\r\n    }\r\n\r\n    // Copy one file to another using NIO\r\n    public static void doCopy(final File source, final File destination)\r\n        throws IOException\r\n    {\r\n        final Closer closer = new Closer();\r\n        final RandomAccessFile src, dst;\r\n        final FileChannel in, out;\r\n    \r\n        try {\r\n            src = closer.add(new RandomAccessFile(source.getCanonicalFile(), &quot;r&quot;);\r\n            dst = closer.add(new RandomAccessFile(destination.getCanonicalFile(), &quot;rw&quot;);\r\n            in = closer.add(src.getChannel());\r\n            out = closer.add(dst.getChannel());\r\n            in.transferTo(0L, in.size(), out);\r\n            out.force(false);\r\n        } finally {\r\n            closer.close();\r\n        }\r\n    }\r\n\r\n\r\n  [1]: http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/Closer.html","title":"Copy file in Java and replace existing target","body":"<p>As a complement to @assylias' answer:</p>\n\n<p>If you use Java 7, drop <code>File</code> entirely. What you want is <code>Path</code> instead.</p>\n\n<p>And to get a <code>Path</code> object matching a path on your filesystem, you do:</p>\n\n<pre><code>Paths.get(\"path/to/file\"); // argument may also be absolute\n</code></pre>\n\n<p>Get used to it real fast. Note that if you still use APIs which require <code>File</code>, <code>Path</code> has a <code>.toFile()</code> method.</p>\n\n<p>Note that if you are in the unfortunate case where you use an API which returns <code>File</code> objects, you can always do:</p>\n\n<pre><code>theFileObject.toPath()\n</code></pre>\n\n<p>But in code of yours, use <code>Path</code>. Systematically. Without a second thought.</p>\n\n<p><strong>EDIT</strong> Copying a file to another using 1.6 using NIO can be done as such; note that the <code>Closer</code> class is inspited by <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/Closer.html\" rel=\"noreferrer\">Guava</a>:</p>\n\n<pre><code>public final class Closer\n    implements Closeable\n{\n    private final List&lt;Closeable&gt; closeables = new ArrayList&lt;Closeable&gt;();\n\n    // @Nullable is a JSR 305 annotation\n    public &lt;T extends Closeable&gt; T add(@Nullable final T closeable)\n    {\n        closeables.add(closeable);\n        return closeable;\n    }\n\n    public void closeQuietly()\n    {\n        try {\n            close();\n        } catch (IOException ignored) {\n        }\n    }\n\n    @Override\n    public void close()\n        throws IOException\n    {\n        IOException toThrow = null;\n        final List&lt;Closeable&gt; l = new ArrayList&lt;Closeable&gt;(closeables);\n        Collections.reverse(l);\n\n        for (final Closeable closeable: l) {\n            if (closeable == null)\n                continue;\n            try {\n                closeable.close();\n            } catch (IOException e) {\n                if (toThrow == null)\n                    toThrow = e;\n            }\n        }\n\n        if (toThrow != null)\n            throw toThrow;\n    }\n}\n\n// Copy one file to another using NIO\npublic static void doCopy(final File source, final File destination)\n    throws IOException\n{\n    final Closer closer = new Closer();\n    final RandomAccessFile src, dst;\n    final FileChannel in, out;\n\n    try {\n        src = closer.add(new RandomAccessFile(source.getCanonicalFile(), \"r\");\n        dst = closer.add(new RandomAccessFile(destination.getCanonicalFile(), \"rw\");\n        in = closer.add(src.getChannel());\n        out = closer.add(dst.getChannel());\n        in.transferTo(0L, in.size(), out);\n        out.force(false);\n    } finally {\n        closer.close();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9959452,"reputation":2037,"user_id":7369238,"display_name":"ABHAY JOHRI"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1550584011,"creation_date":1550584011,"answer_id":54767775,"question_id":17169541,"body_markdown":"    package main.java;\r\n    \r\n    import java.io.IOException;\r\n    import java.nio.file.Files;\r\n    import java.nio.file.Path;\r\n    import java.nio.file.Paths;\r\n    import java.nio.file.StandardCopyOption;\r\n    \r\n    public class CopyFileOnExist {\r\n    \r\n    \tpublic static void main(String[] args)  {\r\n    \r\n    \t\tPath sourceDirectory = Paths.get(&quot;C:/Users/abc/Downloads/FileNotFoundExceptionExample/append.txt&quot;);\r\n            Path targetDirectory = Paths.get(&quot;C:/Users/abc/Downloads/FileNotFoundExceptionExample/append5.txt&quot;);\r\n    \r\n            //copy source to target using Files Class\r\n            try {\r\n    \t\t\tFiles.copy(sourceDirectory, targetDirectory,StandardCopyOption.REPLACE_EXISTING);\r\n    \t\t} catch (IOException e) {\r\n    \t\t\tSystem.out.println(e.toString());\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"Copy file in Java and replace existing target","body":"<pre><code>package main.java;\n\nimport java.io.IOException;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\nimport java.nio.file.StandardCopyOption;\n\npublic class CopyFileOnExist {\n\n    public static void main(String[] args)  {\n\n        Path sourceDirectory = Paths.get(\"C:/Users/abc/Downloads/FileNotFoundExceptionExample/append.txt\");\n        Path targetDirectory = Paths.get(\"C:/Users/abc/Downloads/FileNotFoundExceptionExample/append5.txt\");\n\n        //copy source to target using Files Class\n        try {\n            Files.copy(sourceDirectory, targetDirectory,StandardCopyOption.REPLACE_EXISTING);\n        } catch (IOException e) {\n            System.out.println(e.toString());\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22194583,"reputation":1,"user_id":16436166,"display_name":"Ashish Gusian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684837326,"creation_date":1684837261,"answer_id":76313660,"question_id":17169541,"body_markdown":"your statement Files.copy(path,Stringor address,StandardCopyOption) is this While you are giving a String where you have to set path of where you want to save file. \r\nSo simple Use this statement below:-\r\n\r\nFiles.copy(path,Paths.get(String or address),StandardCopyOption) by using Paths.get converts String into File location or path source path where you have to save file.","title":"Copy file in Java and replace existing target","body":"<p>your statement Files.copy(path,Stringor address,StandardCopyOption) is this While you are giving a String where you have to set path of where you want to save file.\nSo simple Use this statement below:-</p>\n<p>Files.copy(path,Paths.get(String or address),StandardCopyOption) by using Paths.get converts String into File location or path source path where you have to save file.</p>\n"}],"owner":{"account_id":399609,"reputation":691,"user_id":765075,"display_name":"commander_keen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101818,"favorite_count":0,"down_vote_count":2,"up_vote_count":54,"accepted_answer_id":17169700,"answer_count":5,"score":52,"last_activity_date":1684837326,"creation_date":1371560454,"question_id":17169541,"body_markdown":"I&#39;m trying to copy a file with java.nio.file.Files like this:\r\n\r\n    Files.copy(cfgFilePath, strTarget, StandardCopyOption.REPLACE_EXISTING);\r\n\r\nThe problem is that Eclipse says &quot;The method copy(Path, Path, CopyOption...) in the type Files is not applicable for the arguments (File, String, StandardCopyOption)&quot;\r\n\r\nI&#39;m using Eclipse and Java 7 on Win7 x64. My project is set up to use Java 1.6 compatibility.\r\n\r\nIs there a solution to this or do I have to create something like this as a workaround:\r\n\r\n    File temp = new File(target);\r\n \r\n    if(temp.exists())\r\n      temp.delete();\r\n\r\nThanks.","title":"Copy file in Java and replace existing target","body":"<p>I'm trying to copy a file with java.nio.file.Files like this:</p>\n\n<pre><code>Files.copy(cfgFilePath, strTarget, StandardCopyOption.REPLACE_EXISTING);\n</code></pre>\n\n<p>The problem is that Eclipse says \"The method copy(Path, Path, CopyOption...) in the type Files is not applicable for the arguments (File, String, StandardCopyOption)\"</p>\n\n<p>I'm using Eclipse and Java 7 on Win7 x64. My project is set up to use Java 1.6 compatibility.</p>\n\n<p>Is there a solution to this or do I have to create something like this as a workaround:</p>\n\n<pre><code>File temp = new File(target);\n\nif(temp.exists())\n  temp.delete();\n</code></pre>\n\n<p>Thanks.</p>\n"},{"tags":["java","spring","docker","kubernetes","minikube"],"comments":[{"owner":{"account_id":13863020,"reputation":137023,"user_id":10008173,"display_name":"David Maze"},"score":1,"creation_date":1684753096,"post_id":76301618,"comment_id":134557941,"body_markdown":"Can you `docker run` your image normally?  (As it is constructed, I&#39;d be surprised if `docker run ... bash` gave you an interactive shell.)  If the problem is specifically in Minikube, can you [edit] the question to include your Kubernetes Deployment YAML file?","body":"Can you <code>docker run</code> your image normally?  (As it is constructed, I&#39;d be surprised if <code>docker run ... bash</code> gave you an interactive shell.)  If the problem is specifically in Minikube, can you <a href=\"https://stackoverflow.com/posts/76301618/edit\">edit</a> the question to include your Kubernetes Deployment YAML file?"},{"owner":{"account_id":16149079,"reputation":493,"user_id":12898912,"display_name":"Maksym Rybalkin"},"score":0,"creation_date":1684771509,"post_id":76301618,"comment_id":134562049,"body_markdown":"@DavidMaze Just added my deployment config.\nI had a typo, I didn&#39;t use `bash` but used `docker run maxrybalkin91/revise-words-ws:1.0` and saw the app logs in console, which means that the `jar` was found in the image and was executed","body":"@DavidMaze Just added my deployment config. I had a typo, I didn&#39;t use <code>bash</code> but used <code>docker run maxrybalkin91&#47;revise-words-ws:1.0</code> and saw the app logs in console, which means that the <code>jar</code> was found in the image and was executed"},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":1,"creation_date":1684835885,"post_id":76301618,"comment_id":134571854,"body_markdown":"I just tried a `docker run maxrybalkin91/revise-words-ws:1.0`, and it seems the application starts up but complains about missing configuration. Have not tried the environment you specified. But: The title of the question states the jar is not found - and that is not true.\nWhat are we searching here?","body":"I just tried a <code>docker run maxrybalkin91&#47;revise-words-ws:1.0</code>, and it seems the application starts up but complains about missing configuration. Have not tried the environment you specified. But: The title of the question states the jar is not found - and that is not true. What are we searching here?"},{"owner":{"account_id":16149079,"reputation":493,"user_id":12898912,"display_name":"Maksym Rybalkin"},"score":0,"creation_date":1684838273,"post_id":76301618,"comment_id":134572381,"body_markdown":"@Queeg it doesn&#39;t find the configuration because it&#39;s taken from vault, which is run in my minikube","body":"@Queeg it doesn&#39;t find the configuration because it&#39;s taken from vault, which is run in my minikube"},{"owner":{"account_id":16149079,"reputation":493,"user_id":12898912,"display_name":"Maksym Rybalkin"},"score":1,"creation_date":1684838355,"post_id":76301618,"comment_id":134572400,"body_markdown":"@Queeg We&#39;re searching for a reason why the image is starting in docker, even with an error; but isn&#39;t starting in Kubernetes","body":"@Queeg We&#39;re searching for a reason why the image is starting in docker, even with an error; but isn&#39;t starting in Kubernetes"}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1684704206,"creation_date":1684704206,"answer_id":76301979,"question_id":76301618,"body_markdown":"As ENTRYPOINT you specify Java to run `./ws.jar`, assuming it would resolve from within work directory `/app`.\r\nAt runtime you get the error message that `/ws.jar` is not accessible, which looks like an absolute path.\r\n\r\nWhen running your container with /bin/bash, please check out where your jar file exists and which mode it has. Then decide who is right and who is broken: Your docker file or your error message. Fix the broken one.","title":"Kubernetes doesn&#39;t find a jar file","body":"<p>As ENTRYPOINT you specify Java to run <code>./ws.jar</code>, assuming it would resolve from within work directory <code>/app</code>.\nAt runtime you get the error message that <code>/ws.jar</code> is not accessible, which looks like an absolute path.</p>\n<p>When running your container with /bin/bash, please check out where your jar file exists and which mode it has. Then decide who is right and who is broken: Your docker file or your error message. Fix the broken one.</p>\n"},{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684769074,"creation_date":1684769074,"answer_id":76307710,"question_id":76301618,"body_markdown":"If, as you say the jar file is in the right location (and I assume that is /app), how about using the absolute path for execution?\r\n\r\n    ENTRYPOINT java $JAVA_OPTS -jar $APP_HOME/ws.jar $JAVA_ARGS","title":"Kubernetes doesn&#39;t find a jar file","body":"<p>If, as you say the jar file is in the right location (and I assume that is /app), how about using the absolute path for execution?</p>\n<pre><code>ENTRYPOINT java $JAVA_OPTS -jar $APP_HOME/ws.jar $JAVA_ARGS\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684837058,"creation_date":1684837058,"answer_id":76313634,"question_id":76301618,"body_markdown":"As it seems a `docker run maxrybalkin91/revise-words-ws:1.0` brings up the application which complains about missing configuration data - but nowhere a jar file that is not found.\r\n\r\nSince in minikube you see a completely different error, is it possible you are running some outdated image?\r\n\r\nTry changing `imagePullPolilcy=Always` and see what you get.\r\n\r\nhttps://kubernetes.io/docs/concepts/containers/images/","title":"Kubernetes doesn&#39;t find a jar file","body":"<p>As it seems a <code>docker run maxrybalkin91/revise-words-ws:1.0</code> brings up the application which complains about missing configuration data - but nowhere a jar file that is not found.</p>\n<p>Since in minikube you see a completely different error, is it possible you are running some outdated image?</p>\n<p>Try changing <code>imagePullPolilcy=Always</code> and see what you get.</p>\n<p><a href=\"https://kubernetes.io/docs/concepts/containers/images/\" rel=\"nofollow noreferrer\">https://kubernetes.io/docs/concepts/containers/images/</a></p>\n"}],"owner":{"account_id":16149079,"reputation":493,"user_id":12898912,"display_name":"Maksym Rybalkin"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":405,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76313634,"answer_count":3,"score":2,"last_activity_date":1684837058,"creation_date":1684697834,"question_id":76301618,"body_markdown":"I&#39;m using this `Dockerfile` configuration\r\n```\r\nFROM openjdk:17-alpine\r\n\r\nARG APP_HOME=/app\r\n\r\nWORKDIR $APP_HOME\r\n\r\nCOPY ./target/ws-exec.jar ws.jar\r\n\r\nENV JAVA_OPTS=&quot;-Dspring.profiles.active=prod -Dspring.application.name=words&quot;\r\n\r\nENTRYPOINT java $JAVA_OPTS -jar ./ws.jar $JAVA_ARGS\r\n```\r\n\r\nAfter deploying it to minikube, I see the only log:\r\n```Error: Unable to access jarfile /ws.jar```.\r\n\r\nI&#39;ve tried to run `docker run -it &lt;image&gt;` with my image&#39;s name, and it successfuly started with docker. Running `docker exec -it &lt;container&gt;` shew me that the `jar` is present in the right folder. I tried to make the jar executable adding a `CMD` or `RUN` layer into my `Dockerfile`, but nothing helped.\r\nWhere is my mistake, or what I don&#39;t understand?\r\n\r\nUPD here is my deployment.yaml\r\n```\r\napiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  labels:\r\n    app: revise-words-ws\r\n  name: revise-words-ws\r\n  namespace: default\r\nspec:\r\n  replicas: 1\r\n  minReadySeconds: 45\r\n  selector:\r\n    matchLabels:\r\n      app: revise-words-ws\r\n  strategy:\r\n    rollingUpdate:\r\n      maxSurge: 25%\r\n      maxUnavailable: 25%\r\n    type: RollingUpdate\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app: revise-words-ws\r\n    spec:\r\n      containers:\r\n        - image: maxrybalkin91/revise-words-ws:1.0\r\n          imagePullPolicy: IfNotPresent\r\n          name: revise-words-ws\r\n          env:\r\n            - name: VAULT_TOKEN\r\n              valueFrom:\r\n                secretKeyRef:\r\n                  name: words\r\n                  key: vault_token\r\n            - name: VAULT_HOST\r\n              valueFrom:\r\n                secretKeyRef:\r\n                  name: words\r\n                  key: vault_host\r\n            - name: VAULT_PORT\r\n              valueFrom:\r\n                secretKeyRef:\r\n                  name: words\r\n                  key: vault_port\r\n          ports:\r\n            - name: liveness-port\r\n              containerPort: 8089\r\n          resources:\r\n            requests:\r\n              cpu: 100m\r\n              memory: 256Mi\r\n            limits:\r\n              cpu: 300m\r\n              memory: 512Mi\r\n          readinessProbe:\r\n            httpGet:\r\n              path: /\r\n              port: liveness-port\r\n            failureThreshold: 5\r\n            periodSeconds: 10\r\n            initialDelaySeconds: 60\r\n          livenessProbe:\r\n            httpGet:\r\n              path: /\r\n              port: liveness-port\r\n            failureThreshold: 5\r\n            periodSeconds: 10\r\n            initialDelaySeconds: 60\r\n            terminationGracePeriodSeconds: 30\r\n      restartPolicy: Always\r\n``` \r\n ","title":"Kubernetes doesn&#39;t find a jar file","body":"<p>I'm using this <code>Dockerfile</code> configuration</p>\n<pre><code>FROM openjdk:17-alpine\n\nARG APP_HOME=/app\n\nWORKDIR $APP_HOME\n\nCOPY ./target/ws-exec.jar ws.jar\n\nENV JAVA_OPTS=&quot;-Dspring.profiles.active=prod -Dspring.application.name=words&quot;\n\nENTRYPOINT java $JAVA_OPTS -jar ./ws.jar $JAVA_ARGS\n</code></pre>\n<p>After deploying it to minikube, I see the only log:\n<code>Error: Unable to access jarfile /ws.jar</code>.</p>\n<p>I've tried to run <code>docker run -it &lt;image&gt;</code> with my image's name, and it successfuly started with docker. Running <code>docker exec -it &lt;container&gt;</code> shew me that the <code>jar</code> is present in the right folder. I tried to make the jar executable adding a <code>CMD</code> or <code>RUN</code> layer into my <code>Dockerfile</code>, but nothing helped.\nWhere is my mistake, or what I don't understand?</p>\n<p>UPD here is my deployment.yaml</p>\n<pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  labels:\n    app: revise-words-ws\n  name: revise-words-ws\n  namespace: default\nspec:\n  replicas: 1\n  minReadySeconds: 45\n  selector:\n    matchLabels:\n      app: revise-words-ws\n  strategy:\n    rollingUpdate:\n      maxSurge: 25%\n      maxUnavailable: 25%\n    type: RollingUpdate\n  template:\n    metadata:\n      labels:\n        app: revise-words-ws\n    spec:\n      containers:\n        - image: maxrybalkin91/revise-words-ws:1.0\n          imagePullPolicy: IfNotPresent\n          name: revise-words-ws\n          env:\n            - name: VAULT_TOKEN\n              valueFrom:\n                secretKeyRef:\n                  name: words\n                  key: vault_token\n            - name: VAULT_HOST\n              valueFrom:\n                secretKeyRef:\n                  name: words\n                  key: vault_host\n            - name: VAULT_PORT\n              valueFrom:\n                secretKeyRef:\n                  name: words\n                  key: vault_port\n          ports:\n            - name: liveness-port\n              containerPort: 8089\n          resources:\n            requests:\n              cpu: 100m\n              memory: 256Mi\n            limits:\n              cpu: 300m\n              memory: 512Mi\n          readinessProbe:\n            httpGet:\n              path: /\n              port: liveness-port\n            failureThreshold: 5\n            periodSeconds: 10\n            initialDelaySeconds: 60\n          livenessProbe:\n            httpGet:\n              path: /\n              port: liveness-port\n            failureThreshold: 5\n            periodSeconds: 10\n            initialDelaySeconds: 60\n            terminationGracePeriodSeconds: 30\n      restartPolicy: Always\n</code></pre>\n"},{"tags":["java","spring-boot","apache-spark","etl"],"comments":[{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":1,"creation_date":1684836946,"post_id":76313391,"comment_id":134572107,"body_markdown":"`&lt;exclusion&gt;&lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;&lt;artifactId&gt;jersey-server&lt;/artifactId&gt;&lt;/exclusion&gt;` might have something to do with not loading the class `org.glassfish.jersey.server.spi.Container`","body":"<code>&lt;exclusion&gt;&lt;groupId&gt;org.glassfish.jersey.core&lt;&#47;groupId&gt;&lt;arti&zwnj;&#8203;factId&gt;jersey-server&zwnj;&#8203;&lt;&#47;artifactId&gt;&lt;&#47;exclu&zwnj;&#8203;sion&gt;</code> might have something to do with not loading the class <code>org.glassfish.jersey.server.spi.Container</code>"},{"owner":{"account_id":25926402,"reputation":55,"user_id":19648218,"display_name":"Kiolimandars"},"score":0,"creation_date":1684837182,"post_id":76313391,"comment_id":134572161,"body_markdown":"@Bohemian I tried omitting that exclusion but I still get the same error.","body":"@Bohemian I tried omitting that exclusion but I still get the same error."},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":1,"creation_date":1684859010,"post_id":76313391,"comment_id":134577644,"body_markdown":"Did you remove the `jersey-server` exclusion? The class `org.glassfish.jersey.server.spi.Container` is in the `org.glassfish.jersey.core` jar: Perhaps you should add that as a dependency too.","body":"Did you remove the <code>jersey-server</code> exclusion? The class <code>org.glassfish.jersey.server.spi.Container</code> is in the <code>org.glassfish.jersey.core</code> jar: Perhaps you should add that as a dependency too."}],"owner":{"account_id":25926402,"reputation":55,"user_id":19648218,"display_name":"Kiolimandars"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684836782,"creation_date":1684835252,"question_id":76313391,"body_markdown":"I am trying to read a CSV file from a database using apache spark and then print each line in the console (just to test). The csv file in encoded to utf8 when I upload it to the database then decoded when I try print it. I am getting the following error: \r\n\r\n\r\n```\r\njava.lang.NoClassDefFoundError: org/glassfish/jersey/server/spi/Container\r\n\tat org.apache.spark.status.api.v1.ApiRootResource$.getServletHandler(ApiRootResource.scala:63) ~[spark-core_2.12-2.4.8.jar:2.4.8]\r\n\tat org.apache.spark.ui.SparkUI.initialize(SparkUI.scala:70) ~[spark-core_2.12-2.4.8.jar:2.4.8]\r\n\tat org.apache.spark.ui.SparkUI.&lt;init&gt;(SparkUI.scala:80) ~[spark-core_2.12-2.4.8.jar:2.4.8]\r\n\tat org.apache.spark.ui.SparkUI$.create(SparkUI.scala:178) ~[spark-core_2.12-2.4.8.jar:2.4.8]\r\n\tat org.apache.spark.SparkContext.&lt;init&gt;(SparkContext.scala:444) ~[spark-core_2.12-2.4.8.jar:2.4.8]\r\n\tat org.apache.spark.SparkContext$.getOrCreate(SparkContext.scala:2526) ~[spark-core_2.12-2.4.8.jar:2.4.8]\r\n\tat org.apache.spark.sql.SparkSession$Builder.$anonfun$getOrCreate$1(SparkSession.scala:930) ~[spark-sql_2.12-2.4.8.jar:2.4.8]\r\n\tat scala.Option.getOrElse(Option.scala:189) ~[scala-library-2.12.10.jar:na]\r\n\tat org.apache.spark.sql.SparkSession$Builder.getOrCreate(SparkSession.scala:921) ~[spark-sql_2.12-2.4.8.jar:2.4.8]\r\n\tat com.example.dbtest.model.Job$1.run(Job.java:90) ~[classes/:na]\r\n\tat com.example.dbtest.components.JobScheduler.lambda$updateJobList$0(JobScheduler.java:49) ~[classes/:na]\r\n\tat org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54) ~[spring-context-6.0.7.jar:6.0.7]\r\n\tat org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:96) ~[spring-context-6.0.7.jar:6.0.7]\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:577) ~[na:na]\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]\r\n\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) ~[na:na]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]\r\n\tat java.base/java.lang.Thread.run(Thread.java:1589) ~[na:na]\r\nCaused by: java.lang.ClassNotFoundException: org.glassfish.jersey.server.spi.Container\r\n```\r\n\r\n\r\nThis is the code I am trying to execute: \r\n\r\n```\r\nSparkConf sparkConf = new SparkConf()\r\n    .setAppName(&quot;dbtest&quot;)\r\n    .setMaster(&quot;local[*]&quot;); // Set the master URL for local testing\r\n\r\n// Create a SparkSession using the SparkConf object\r\nSparkSession spark = SparkSession.builder()\r\n    .config(sparkConf)\r\n    .getOrCreate();\r\n\r\nString jdbcUrl = &quot;jdbc:postgresql://localhost:5432/mydatabase&quot;;\r\nString username = &quot;postgres&quot;;\r\n\r\n// Read the file data from the database table, selecting the &quot;body&quot; column\r\nDataset&lt;Row&gt; pdfData = spark.read()\r\n    .format(&quot;jdbc&quot;)\r\n    .option(&quot;url&quot;, jdbcUrl)\r\n    .option(&quot;dbtable&quot;, &quot;configurations&quot;)\r\n    .option(&quot;user&quot;, username)\r\n    .load()\r\n    .select(&quot;body&quot;);\r\n\r\n// Convert the fileData DataFrame to an RDD of Strings\r\nDataset&lt;String&gt; pdfContent = pdfData\r\n    .withColumn(&quot;body&quot;, functions.col(&quot;body&quot;)\r\n    .cast(&quot;string&quot;))\r\n    .select(&quot;body&quot;)\r\n    .as(Encoders.STRING());\r\n// Perform further processing or analysis on the fileLinesRDD\r\nSystem.out.println(pdfContent);\r\n```\r\n\r\nAnd this is my pom.xml file:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.5&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;dbtest&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;dbtest&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!--&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.annotation&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.3.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;--&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;!-- Add more exclusions if needed --&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spark-core_2.12&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.4.8&lt;/version&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-starter-jersey&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;jersey-server&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;slf4j-reload4j&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;hadoop-client&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;hadoop-yarn-client&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\r\n\r\n\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.ws.rs&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;javax.ws.rs-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hadoop-client&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.3.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hadoop-yarn-client&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.3.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spark-sql_2.12&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.4.8&lt;/version&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;slf4j-reload4j&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;7.0.2.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spark-streaming_2.12&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.4.8&lt;/version&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;slf4j-reload4j&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.7.32&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.0.26&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.2.6&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\n","title":"How to solve a glassfish error when trying to use apache Spark with Springboot","body":"<p>I am trying to read a CSV file from a database using apache spark and then print each line in the console (just to test). The csv file in encoded to utf8 when I upload it to the database then decoded when I try print it. I am getting the following error:</p>\n<pre><code>java.lang.NoClassDefFoundError: org/glassfish/jersey/server/spi/Container\n    at org.apache.spark.status.api.v1.ApiRootResource$.getServletHandler(ApiRootResource.scala:63) ~[spark-core_2.12-2.4.8.jar:2.4.8]\n    at org.apache.spark.ui.SparkUI.initialize(SparkUI.scala:70) ~[spark-core_2.12-2.4.8.jar:2.4.8]\n    at org.apache.spark.ui.SparkUI.&lt;init&gt;(SparkUI.scala:80) ~[spark-core_2.12-2.4.8.jar:2.4.8]\n    at org.apache.spark.ui.SparkUI$.create(SparkUI.scala:178) ~[spark-core_2.12-2.4.8.jar:2.4.8]\n    at org.apache.spark.SparkContext.&lt;init&gt;(SparkContext.scala:444) ~[spark-core_2.12-2.4.8.jar:2.4.8]\n    at org.apache.spark.SparkContext$.getOrCreate(SparkContext.scala:2526) ~[spark-core_2.12-2.4.8.jar:2.4.8]\n    at org.apache.spark.sql.SparkSession$Builder.$anonfun$getOrCreate$1(SparkSession.scala:930) ~[spark-sql_2.12-2.4.8.jar:2.4.8]\n    at scala.Option.getOrElse(Option.scala:189) ~[scala-library-2.12.10.jar:na]\n    at org.apache.spark.sql.SparkSession$Builder.getOrCreate(SparkSession.scala:921) ~[spark-sql_2.12-2.4.8.jar:2.4.8]\n    at com.example.dbtest.model.Job$1.run(Job.java:90) ~[classes/:na]\n    at com.example.dbtest.components.JobScheduler.lambda$updateJobList$0(JobScheduler.java:49) ~[classes/:na]\n    at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54) ~[spring-context-6.0.7.jar:6.0.7]\n    at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:96) ~[spring-context-6.0.7.jar:6.0.7]\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:577) ~[na:na]\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]\n    at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]\n    at java.base/java.lang.Thread.run(Thread.java:1589) ~[na:na]\nCaused by: java.lang.ClassNotFoundException: org.glassfish.jersey.server.spi.Container\n</code></pre>\n<p>This is the code I am trying to execute:</p>\n<pre><code>SparkConf sparkConf = new SparkConf()\n    .setAppName(&quot;dbtest&quot;)\n    .setMaster(&quot;local[*]&quot;); // Set the master URL for local testing\n\n// Create a SparkSession using the SparkConf object\nSparkSession spark = SparkSession.builder()\n    .config(sparkConf)\n    .getOrCreate();\n\nString jdbcUrl = &quot;jdbc:postgresql://localhost:5432/mydatabase&quot;;\nString username = &quot;postgres&quot;;\n\n// Read the file data from the database table, selecting the &quot;body&quot; column\nDataset&lt;Row&gt; pdfData = spark.read()\n    .format(&quot;jdbc&quot;)\n    .option(&quot;url&quot;, jdbcUrl)\n    .option(&quot;dbtable&quot;, &quot;configurations&quot;)\n    .option(&quot;user&quot;, username)\n    .load()\n    .select(&quot;body&quot;);\n\n// Convert the fileData DataFrame to an RDD of Strings\nDataset&lt;String&gt; pdfContent = pdfData\n    .withColumn(&quot;body&quot;, functions.col(&quot;body&quot;)\n    .cast(&quot;string&quot;))\n    .select(&quot;body&quot;)\n    .as(Encoders.STRING());\n// Perform further processing or analysis on the fileLinesRDD\nSystem.out.println(pdfContent);\n</code></pre>\n<p>And this is my pom.xml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.5&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;dbtest&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;dbtest&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!--&lt;dependency&gt;\n            &lt;groupId&gt;javax.annotation&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\n            &lt;version&gt;1.3.2&lt;/version&gt;\n        &lt;/dependency&gt;--&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\n                    &lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;!-- Add more exclusions if needed --&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n            &lt;artifactId&gt;spark-core_2.12&lt;/artifactId&gt;\n            &lt;version&gt;2.4.8&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-jersey&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\n                    &lt;artifactId&gt;jersey-server&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                    &lt;artifactId&gt;slf4j-reload4j&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\n                    &lt;artifactId&gt;hadoop-client&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\n                    &lt;artifactId&gt;hadoop-yarn-client&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n\n\n\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.ws.rs&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.ws.rs-api&lt;/artifactId&gt;\n            &lt;version&gt;2.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\n            &lt;artifactId&gt;hadoop-client&lt;/artifactId&gt;\n            &lt;version&gt;3.3.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\n            &lt;artifactId&gt;hadoop-yarn-client&lt;/artifactId&gt;\n            &lt;version&gt;3.3.3&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n            &lt;artifactId&gt;spark-sql_2.12&lt;/artifactId&gt;\n            &lt;version&gt;2.4.8&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                    &lt;artifactId&gt;slf4j-reload4j&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n            &lt;version&gt;7.0.2.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n            &lt;artifactId&gt;spark-streaming_2.12&lt;/artifactId&gt;\n            &lt;version&gt;2.4.8&lt;/version&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n                    &lt;artifactId&gt;slf4j-reload4j&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;1.7.32&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\n            &lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\n            &lt;version&gt;2.0.26&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n            &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n            &lt;version&gt;1.2.6&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n"},{"tags":["java","maven","bots","discord-jda"],"comments":[{"owner":{"account_id":14719989,"reputation":5867,"user_id":10630900,"display_name":"Minn"},"score":0,"creation_date":1684791942,"post_id":76308638,"comment_id":134565946,"body_markdown":"You have to update JDA.","body":"You have to update JDA."},{"owner":{"account_id":27521195,"reputation":15,"user_id":21931651,"display_name":"Николай"},"score":0,"creation_date":1684830132,"post_id":76308638,"comment_id":134570470,"body_markdown":"Thank you. It helped, but apparently there is another problem in the code. I have edited the question.","body":"Thank you. It helped, but apparently there is another problem in the code. I have edited the question."}],"answers":[{"tags":[],"owner":{"account_id":27521195,"reputation":15,"user_id":21931651,"display_name":"Николай"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684836742,"creation_date":1684836742,"answer_id":76313606,"question_id":76308638,"body_markdown":"After I upgraded to the latest version of JDA, the problem was due to incorrect program logic. Remove the else block in the question code:\r\n\r\nInstead of:\r\n```\r\n    public void queue(AudioTrack track) {\r\n        if(!player.startTrack(track, true)) {\r\n            System.out.println(&quot;1&quot;);\r\n            queue.offer(track);\r\n            System.out.println(&quot;2&quot;);\r\n        } else {\r\n            System.out.println(&quot;3&quot;);\r\n            StackTraceElement[] stackTraceElements = Thread.currentThread().getStackTrace();\r\n            for (StackTraceElement element:stackTraceElements) {\r\n                System.out.println(element.getMethodName());\r\n            }\r\n            player.startTrack(track, false);\r\n            System.out.println(&quot;4&quot;);\r\n        }\r\n    }\r\n```\r\nThis:\r\n```\r\n    public void queue(AudioTrack track) {\r\n        if(!player.startTrack(track, true)) {\r\n            queue.offer(track);\r\n        }\r\n    }\r\n```","title":"What could be causing my Java Discord bot using Lavaplayer and Maven to not play music?","body":"<p>After I upgraded to the latest version of JDA, the problem was due to incorrect program logic. Remove the else block in the question code:</p>\n<p>Instead of:</p>\n<pre><code>    public void queue(AudioTrack track) {\n        if(!player.startTrack(track, true)) {\n            System.out.println(&quot;1&quot;);\n            queue.offer(track);\n            System.out.println(&quot;2&quot;);\n        } else {\n            System.out.println(&quot;3&quot;);\n            StackTraceElement[] stackTraceElements = Thread.currentThread().getStackTrace();\n            for (StackTraceElement element:stackTraceElements) {\n                System.out.println(element.getMethodName());\n            }\n            player.startTrack(track, false);\n            System.out.println(&quot;4&quot;);\n        }\n    }\n</code></pre>\n<p>This:</p>\n<pre><code>    public void queue(AudioTrack track) {\n        if(!player.startTrack(track, true)) {\n            queue.offer(track);\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":27521195,"reputation":15,"user_id":21931651,"display_name":"Николай"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":215,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76313606,"answer_count":1,"score":0,"last_activity_date":1684836742,"creation_date":1684776598,"question_id":76308638,"body_markdown":"I am writing a music bot for discord. The program successfully finds and downloads music, but does not play it. No code works, even completely copied from a manual, whose author has similar versions, and his code performs its function. Further study of the problem led to the fact that the program hangs on the line (after stacktrace):\r\n`\r\nplayer.startTrack(track, false);\r\n`\r\nHanging also happens if you replace the line above with:\r\n`\r\nplayer.playTrack(track);\r\n`\r\n\r\nI found information published a few years ago that some platforms restricted access to downloads from them for bots. The guide I tested the code for was released in February of this year. I think the problem is on my side.\r\n\r\nAlso, when using /play, I tried to enter links to different platforms and tracks on them, but nothing helps.\r\nMaybe i should specify some intentions in the code?\r\n\r\nCode:\r\n\r\n - Main\r\n\r\n```\r\npublic static void main(String[] args) throws Exception {\r\n        JDA jda = JDABuilder.createDefault(TOKEN).setChunkingFilter(ChunkingFilter.ALL)\r\n                .setMemberCachePolicy(MemberCachePolicy.ALL).enableIntents(GatewayIntent.GUILD_MEMBERS,\r\n                        GatewayIntent.GUILD_MESSAGES,\r\n                        GatewayIntent.GUILD_VOICE_STATES).build();\r\n        jda.addEventListener(new checker()); \r\n    }  \r\n```\r\n - AudioSendHandler\r\n ```\r\npublic class AudioForwarder implements AudioSendHandler {\r\n\r\n    private final AudioPlayer player;\r\n    private final Guild guild;\r\n    private final ByteBuffer buffer = ByteBuffer.allocate(1024);\r\n    private final MutableAudioFrame frame = new MutableAudioFrame();\r\n    private int time;\r\n\r\n    public AudioForwarder(AudioPlayer player, Guild guild) {\r\n        this.player = player;\r\n        this.guild = guild;\r\n        frame.setBuffer(buffer);\r\n    }\r\n\r\n    @Override\r\n    public boolean canProvide() {\r\n        boolean canProvide = player.provide(frame);\r\n        if(!canProvide) {\r\n            time += 20;\r\n            if (time &gt;= 300000) {\r\n                time = 0;\r\n                System.out.println(&quot;timeout&quot;);\r\n                guild.getAudioManager().closeAudioConnection();\r\n            }\r\n        } else {\r\n            time = 0;\r\n        }\r\n        return canProvide;\r\n    }\r\n\r\n    @Nullable\r\n    @Override\r\n    public ByteBuffer provide20MsAudio() {\r\n        final Buffer tmp = ((Buffer) buffer).flip();\r\n\r\n        return (ByteBuffer) tmp;\r\n    }\r\n\r\n    @Override\r\n    public boolean isOpus() {\r\n        return true;\r\n    }\r\n}\r\n```\r\n - TrackScheduler\r\n```\r\npublic class TrackScheduler extends AudioEventAdapter {\r\n\r\n    private final AudioPlayer player;\r\n    private final BlockingQueue&lt;AudioTrack&gt; queue = new LinkedBlockingQueue&lt;&gt;();\r\n    private boolean isRepeat = false;\r\n\r\n    public TrackScheduler(AudioPlayer player) {\r\n        this.player = player;\r\n    }\r\n\r\n    @Override\r\n    public void onTrackEnd(AudioPlayer player, AudioTrack track, AudioTrackEndReason endReason) {\r\n        if(isRepeat) {\r\n            System.out.println(&quot;6&quot;);\r\n            player.startTrack(track.makeClone(), false);\r\n            System.out.println(&quot;7&quot;);\r\n        } else {\r\n            System.out.println(&quot;8&quot;);\r\n            player.startTrack(queue.poll(), false);\r\n            System.out.println(&quot;9&quot;);\r\n        }\r\n    }\r\n\r\n    public void queue(AudioTrack track) {\r\n        if(!player.startTrack(track, true)) {\r\n            System.out.println(&quot;1&quot;);\r\n            queue.offer(track);\r\n            System.out.println(&quot;2&quot;);\r\n        } else {\r\n            System.out.println(&quot;3&quot;);\r\n            StackTraceElement[] stackTraceElements = Thread.currentThread().getStackTrace();\r\n            for (StackTraceElement element:stackTraceElements) {\r\n                System.out.println(element.getMethodName());\r\n            }\r\n            player.startTrack(track, false);\r\n            System.out.println(&quot;4&quot;);\r\n        }\r\n    }\r\n\r\n    public AudioPlayer getPlayer() {\r\n        return player;\r\n    }\r\n\r\n    public BlockingQueue&lt;AudioTrack&gt; getQueue() {\r\n        return queue;\r\n    }\r\n\r\n    public boolean isRepeat() {\r\n        return isRepeat;\r\n    }\r\n\r\n    public void setRepeat(boolean repeat) {\r\n        isRepeat = repeat;\r\n    }\r\n}\r\n```\r\n - GuildMusicManager\r\n```\r\npublic class GuildMusicManager {\r\n\r\n    private TrackScheduler trackScheduler;\r\n    private AudioForwarder audioForwarder;\r\n\r\n    public GuildMusicManager(AudioPlayerManager manager, Guild guild) {\r\n        AudioPlayer player = manager.createPlayer();\r\n        trackScheduler = new TrackScheduler(player);\r\n        player.addListener(trackScheduler);\r\n        audioForwarder = new AudioForwarder(player, guild);\r\n    }\r\n\r\n    public TrackScheduler getTrackScheduler() {\r\n        return trackScheduler;\r\n    }\r\n\r\n    public AudioForwarder getAudioForwarder() {\r\n        return audioForwarder;\r\n    }\r\n}\r\n```\r\n - PlayerManager\r\n```\r\npublic class PlayerManager {\r\n\r\n    private static PlayerManager INSTANCE;\r\n    private final Map&lt;Long, GuildMusicManager&gt; guildMusicManagers = new HashMap&lt;&gt;();\r\n    private final AudioPlayerManager audioPlayerManager = new DefaultAudioPlayerManager();\r\n\r\n    private PlayerManager() {\r\n        AudioSourceManagers.registerRemoteSources(audioPlayerManager);\r\n        AudioSourceManagers.registerLocalSource(audioPlayerManager);\r\n    }\r\n\r\n    public static PlayerManager get() {\r\n        if(INSTANCE == null) {\r\n            INSTANCE = new PlayerManager();\r\n        }\r\n        return INSTANCE;\r\n    }\r\n\r\n    public GuildMusicManager getGuildMusicManager(Guild guild) {\r\n        return guildMusicManagers.computeIfAbsent(guild.getIdLong(), (guildId) -&gt; {\r\n            GuildMusicManager musicManager = new GuildMusicManager(audioPlayerManager, guild);\r\n\r\n            guild.getAudioManager().setSendingHandler(musicManager.getAudioForwarder());\r\n\r\n            return musicManager;\r\n        });\r\n    }\r\n\r\n    public void play(Guild guild, String trackURL) {\r\n        GuildMusicManager guildMusicManager = getGuildMusicManager(guild);\r\n        audioPlayerManager.loadItemOrdered(guildMusicManager, trackURL, new AudioLoadResultHandler() {\r\n            @Override\r\n            public void trackLoaded(AudioTrack track) {\r\n                System.out.println(&quot;0&quot;);\r\n                guildMusicManager.getTrackScheduler().queue(track);\r\n                System.out.println(&quot;5&quot;);\r\n            }\r\n\r\n            @Override\r\n            public void playlistLoaded(AudioPlaylist playlist) {\r\n                System.out.println(&quot;0.1&quot;);\r\n                guildMusicManager.getTrackScheduler().queue(playlist.getTracks().get(0));\r\n                System.out.println(&quot;5.1&quot;);\r\n            }\r\n\r\n            @Override\r\n            public void noMatches() {\r\n                System.out.println(&quot;no_matches&quot;);\r\n            }\r\n\r\n            @Override\r\n            public void loadFailed(FriendlyException exception) {\r\n                System.out.println(&quot;failed&quot;);\r\n            }\r\n        });\r\n    }\r\n}\r\n```\r\n - /play\r\n```\r\npublic void onSlashCommandInteraction(@NotNull SlashCommandInteractionEvent event) {\r\n     if (event.getName().equals(&quot;play&quot;)) {\r\n                event.getGuild().getAudioManager().openAudioConnection(event.getMember().getVoiceState().getChannel());\r\n\r\n                String name = event.getOption(&quot;name&quot;).getAsString();\r\n                try {\r\n                    new URI(name);\r\n                } catch (URISyntaxException e) {\r\n                    name = name + &quot;ytsearch:&quot;;\r\n                }\r\n                PlayerManager playerManager = PlayerManager.get();\r\n                event.reply(&quot;Playing&quot;).setEphemeral(true).submit();\r\n                playerManager.play(event.getGuild(), name);\r\n        }\r\n}\r\n```\r\n\r\n[Console output][1]\r\n\r\nAfter using /play, the bot successfully connects to the voice channel, but immediately starts reconnecting to it every few seconds without playing music.\r\n\r\nOn the discord developer portal, all intents are enabled, on the test server the bot has administrator rights, the role of the bot is prioritized above all others.\r\n\r\nMy versions:\r\n\r\nJDA 5.0.0-alpha.11\r\n\r\nlavaplayer 1.3.77\r\n\r\nP.S. updated: \r\nMoved to version of JDA 5.0.0-beta.9. The hanging is gone, but the program still doesn&#39;t play sound, and this time I don&#39;t understand what&#39;s going on there. Updated code above and screenshot of console output.\r\n\r\nIf you move the stacktrace to the place where the code reaches during /play:\r\n\r\n[Console output 2][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/S5AkP.png\r\n  [2]: https://i.stack.imgur.com/8RG81.png","title":"What could be causing my Java Discord bot using Lavaplayer and Maven to not play music?","body":"<p>I am writing a music bot for discord. The program successfully finds and downloads music, but does not play it. No code works, even completely copied from a manual, whose author has similar versions, and his code performs its function. Further study of the problem led to the fact that the program hangs on the line (after stacktrace):\n<code>player.startTrack(track, false);</code>\nHanging also happens if you replace the line above with:\n<code>player.playTrack(track);</code></p>\n<p>I found information published a few years ago that some platforms restricted access to downloads from them for bots. The guide I tested the code for was released in February of this year. I think the problem is on my side.</p>\n<p>Also, when using /play, I tried to enter links to different platforms and tracks on them, but nothing helps.\nMaybe i should specify some intentions in the code?</p>\n<p>Code:</p>\n<ul>\n<li>Main</li>\n</ul>\n<pre><code>public static void main(String[] args) throws Exception {\n        JDA jda = JDABuilder.createDefault(TOKEN).setChunkingFilter(ChunkingFilter.ALL)\n                .setMemberCachePolicy(MemberCachePolicy.ALL).enableIntents(GatewayIntent.GUILD_MEMBERS,\n                        GatewayIntent.GUILD_MESSAGES,\n                        GatewayIntent.GUILD_VOICE_STATES).build();\n        jda.addEventListener(new checker()); \n    }  \n</code></pre>\n<ul>\n<li>AudioSendHandler</li>\n</ul>\n<pre><code>public class AudioForwarder implements AudioSendHandler {\n\n   private final AudioPlayer player;\n   private final Guild guild;\n   private final ByteBuffer buffer = ByteBuffer.allocate(1024);\n   private final MutableAudioFrame frame = new MutableAudioFrame();\n   private int time;\n\n   public AudioForwarder(AudioPlayer player, Guild guild) {\n       this.player = player;\n       this.guild = guild;\n       frame.setBuffer(buffer);\n   }\n\n   @Override\n   public boolean canProvide() {\n       boolean canProvide = player.provide(frame);\n       if(!canProvide) {\n           time += 20;\n           if (time &gt;= 300000) {\n               time = 0;\n               System.out.println(&quot;timeout&quot;);\n               guild.getAudioManager().closeAudioConnection();\n           }\n       } else {\n           time = 0;\n       }\n       return canProvide;\n   }\n\n   @Nullable\n   @Override\n   public ByteBuffer provide20MsAudio() {\n       final Buffer tmp = ((Buffer) buffer).flip();\n\n       return (ByteBuffer) tmp;\n   }\n\n   @Override\n   public boolean isOpus() {\n       return true;\n   }\n}\n</code></pre>\n<ul>\n<li>TrackScheduler</li>\n</ul>\n<pre><code>public class TrackScheduler extends AudioEventAdapter {\n\n    private final AudioPlayer player;\n    private final BlockingQueue&lt;AudioTrack&gt; queue = new LinkedBlockingQueue&lt;&gt;();\n    private boolean isRepeat = false;\n\n    public TrackScheduler(AudioPlayer player) {\n        this.player = player;\n    }\n\n    @Override\n    public void onTrackEnd(AudioPlayer player, AudioTrack track, AudioTrackEndReason endReason) {\n        if(isRepeat) {\n            System.out.println(&quot;6&quot;);\n            player.startTrack(track.makeClone(), false);\n            System.out.println(&quot;7&quot;);\n        } else {\n            System.out.println(&quot;8&quot;);\n            player.startTrack(queue.poll(), false);\n            System.out.println(&quot;9&quot;);\n        }\n    }\n\n    public void queue(AudioTrack track) {\n        if(!player.startTrack(track, true)) {\n            System.out.println(&quot;1&quot;);\n            queue.offer(track);\n            System.out.println(&quot;2&quot;);\n        } else {\n            System.out.println(&quot;3&quot;);\n            StackTraceElement[] stackTraceElements = Thread.currentThread().getStackTrace();\n            for (StackTraceElement element:stackTraceElements) {\n                System.out.println(element.getMethodName());\n            }\n            player.startTrack(track, false);\n            System.out.println(&quot;4&quot;);\n        }\n    }\n\n    public AudioPlayer getPlayer() {\n        return player;\n    }\n\n    public BlockingQueue&lt;AudioTrack&gt; getQueue() {\n        return queue;\n    }\n\n    public boolean isRepeat() {\n        return isRepeat;\n    }\n\n    public void setRepeat(boolean repeat) {\n        isRepeat = repeat;\n    }\n}\n</code></pre>\n<ul>\n<li>GuildMusicManager</li>\n</ul>\n<pre><code>public class GuildMusicManager {\n\n    private TrackScheduler trackScheduler;\n    private AudioForwarder audioForwarder;\n\n    public GuildMusicManager(AudioPlayerManager manager, Guild guild) {\n        AudioPlayer player = manager.createPlayer();\n        trackScheduler = new TrackScheduler(player);\n        player.addListener(trackScheduler);\n        audioForwarder = new AudioForwarder(player, guild);\n    }\n\n    public TrackScheduler getTrackScheduler() {\n        return trackScheduler;\n    }\n\n    public AudioForwarder getAudioForwarder() {\n        return audioForwarder;\n    }\n}\n</code></pre>\n<ul>\n<li>PlayerManager</li>\n</ul>\n<pre><code>public class PlayerManager {\n\n    private static PlayerManager INSTANCE;\n    private final Map&lt;Long, GuildMusicManager&gt; guildMusicManagers = new HashMap&lt;&gt;();\n    private final AudioPlayerManager audioPlayerManager = new DefaultAudioPlayerManager();\n\n    private PlayerManager() {\n        AudioSourceManagers.registerRemoteSources(audioPlayerManager);\n        AudioSourceManagers.registerLocalSource(audioPlayerManager);\n    }\n\n    public static PlayerManager get() {\n        if(INSTANCE == null) {\n            INSTANCE = new PlayerManager();\n        }\n        return INSTANCE;\n    }\n\n    public GuildMusicManager getGuildMusicManager(Guild guild) {\n        return guildMusicManagers.computeIfAbsent(guild.getIdLong(), (guildId) -&gt; {\n            GuildMusicManager musicManager = new GuildMusicManager(audioPlayerManager, guild);\n\n            guild.getAudioManager().setSendingHandler(musicManager.getAudioForwarder());\n\n            return musicManager;\n        });\n    }\n\n    public void play(Guild guild, String trackURL) {\n        GuildMusicManager guildMusicManager = getGuildMusicManager(guild);\n        audioPlayerManager.loadItemOrdered(guildMusicManager, trackURL, new AudioLoadResultHandler() {\n            @Override\n            public void trackLoaded(AudioTrack track) {\n                System.out.println(&quot;0&quot;);\n                guildMusicManager.getTrackScheduler().queue(track);\n                System.out.println(&quot;5&quot;);\n            }\n\n            @Override\n            public void playlistLoaded(AudioPlaylist playlist) {\n                System.out.println(&quot;0.1&quot;);\n                guildMusicManager.getTrackScheduler().queue(playlist.getTracks().get(0));\n                System.out.println(&quot;5.1&quot;);\n            }\n\n            @Override\n            public void noMatches() {\n                System.out.println(&quot;no_matches&quot;);\n            }\n\n            @Override\n            public void loadFailed(FriendlyException exception) {\n                System.out.println(&quot;failed&quot;);\n            }\n        });\n    }\n}\n</code></pre>\n<ul>\n<li>/play</li>\n</ul>\n<pre><code>public void onSlashCommandInteraction(@NotNull SlashCommandInteractionEvent event) {\n     if (event.getName().equals(&quot;play&quot;)) {\n                event.getGuild().getAudioManager().openAudioConnection(event.getMember().getVoiceState().getChannel());\n\n                String name = event.getOption(&quot;name&quot;).getAsString();\n                try {\n                    new URI(name);\n                } catch (URISyntaxException e) {\n                    name = name + &quot;ytsearch:&quot;;\n                }\n                PlayerManager playerManager = PlayerManager.get();\n                event.reply(&quot;Playing&quot;).setEphemeral(true).submit();\n                playerManager.play(event.getGuild(), name);\n        }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/S5AkP.png\" rel=\"nofollow noreferrer\">Console output</a></p>\n<p>After using /play, the bot successfully connects to the voice channel, but immediately starts reconnecting to it every few seconds without playing music.</p>\n<p>On the discord developer portal, all intents are enabled, on the test server the bot has administrator rights, the role of the bot is prioritized above all others.</p>\n<p>My versions:</p>\n<p>JDA 5.0.0-alpha.11</p>\n<p>lavaplayer 1.3.77</p>\n<p>P.S. updated:\nMoved to version of JDA 5.0.0-beta.9. The hanging is gone, but the program still doesn't play sound, and this time I don't understand what's going on there. Updated code above and screenshot of console output.</p>\n<p>If you move the stacktrace to the place where the code reaches during /play:</p>\n<p><a href=\"https://i.stack.imgur.com/8RG81.png\" rel=\"nofollow noreferrer\">Console output 2</a></p>\n"},{"tags":["java","kubernetes","kubernetes-operator"],"answers":[{"tags":[],"owner":{"account_id":9979280,"reputation":1,"user_id":7382741,"display_name":"user7382741"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684836446,"creation_date":1684746283,"answer_id":76304551,"question_id":74487916,"body_markdown":"client-java version:13.0.1  \r\n \r\nI met the same question several times, and recently find it happends when the machine which has apiserver is down.\r\nThe java client use okhttp: http1.1、long connection.When the server is down, client don&#39;t know. It depends on tcp keep alive to notice,but I don&#39;t know why the client don&#39; receive.So I add caltimeout to finish the conenction.\r\n\r\n      ApiClient apiClient = Config.fromToken(xxx, xxx,false);\r\n\r\n            apiClient.setHttpClient(\r\n                    apiClient\r\n                            .getHttpClient()\r\n                            .newBuilder()\r\n                            .callTimeout(Duration.ofMinutes(10))\r\n                            .build());\r\n\r\nI make the machine down,and find it works.\r\n\r\nThis is the func of caltimeout:\r\n\r\n    /**\r\n     * Sets the default timeout for complete calls. A value of 0 means no timeout, otherwise values\r\n     * must be between 1 and {@link Integer#MAX_VALUE} when converted to milliseconds.\r\n     *\r\n     * &lt;p&gt;The call timeout spans the entire call: resolving DNS, connecting, writing the request\r\n     * body, server processing, and reading the response body. If the call requires redirects or\r\n     * retries all must complete within one timeout period.\r\n     *\r\n     * &lt;p&gt;The default value is 0 which imposes no timeout.\r\n     */\r\n    @IgnoreJRERequirement\r\n    public Builder callTimeout(Duration duration) {\r\n      callTimeout = checkDuration(&quot;timeout&quot;, duration.toMillis(), TimeUnit.MILLISECONDS);\r\n      return this;\r\n    }\r\n\r\n\r\nset 10 minute just because watch last less than 10 minutes:\r\n\r\n          Watchable&lt;ApiType&gt; newWatch =\r\n              listerWatcher.watch(\r\n                  new CallGeneratorParams(\r\n                      Boolean.TRUE,\r\n                      lastSyncResourceVersion,\r\n                      Long.valueOf(jitteredWatchTimeoutSeconds).intValue()));\r\n\r\nlong jitteredWatchTimeoutSeconds =\r\n              Double.valueOf(REFLECTOR_WATCH_CLIENTSIDE_TIMEOUT.getSeconds() * (1 + Math.random()))\r\n.longValue();","title":"SharedIndexInformer (io.kubernetes) not working after few hours randomly","body":"<p>client-java version:13.0.1</p>\n<p>I met the same question several times, and recently find it happends when the machine which has apiserver is down.\nThe java client use okhttp: http1.1、long connection.When the server is down, client don't know. It depends on tcp keep alive to notice,but I don't know why the client don' receive.So I add caltimeout to finish the conenction.</p>\n<pre><code>  ApiClient apiClient = Config.fromToken(xxx, xxx,false);\n\n        apiClient.setHttpClient(\n                apiClient\n                        .getHttpClient()\n                        .newBuilder()\n                        .callTimeout(Duration.ofMinutes(10))\n                        .build());\n</code></pre>\n<p>I make the machine down,and find it works.</p>\n<p>This is the func of caltimeout:</p>\n<pre><code>/**\n * Sets the default timeout for complete calls. A value of 0 means no timeout, otherwise values\n * must be between 1 and {@link Integer#MAX_VALUE} when converted to milliseconds.\n *\n * &lt;p&gt;The call timeout spans the entire call: resolving DNS, connecting, writing the request\n * body, server processing, and reading the response body. If the call requires redirects or\n * retries all must complete within one timeout period.\n *\n * &lt;p&gt;The default value is 0 which imposes no timeout.\n */\n@IgnoreJRERequirement\npublic Builder callTimeout(Duration duration) {\n  callTimeout = checkDuration(&quot;timeout&quot;, duration.toMillis(), TimeUnit.MILLISECONDS);\n  return this;\n}\n</code></pre>\n<p>set 10 minute just because watch last less than 10 minutes:</p>\n<pre><code>      Watchable&lt;ApiType&gt; newWatch =\n          listerWatcher.watch(\n              new CallGeneratorParams(\n                  Boolean.TRUE,\n                  lastSyncResourceVersion,\n                  Long.valueOf(jitteredWatchTimeoutSeconds).intValue()));\n</code></pre>\n<p>long jitteredWatchTimeoutSeconds =\nDouble.valueOf(REFLECTOR_WATCH_CLIENTSIDE_TIMEOUT.getSeconds() * (1 + Math.random()))\n.longValue();</p>\n"}],"owner":{"account_id":6765473,"reputation":1,"user_id":5210610,"display_name":"Gilad Keinan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":314,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684836446,"creation_date":1668765709,"question_id":74487916,"body_markdown":"**Background**\r\n\r\nI made a PoC of a Java application using the following library:\r\n\r\n```\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;io.kubernetes&lt;/groupId&gt;\r\n  &lt;artifactId&gt;client-java-spring-integration&lt;/artifactId&gt;\r\n  &lt;version&gt;11.0.3&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nThe application is creating new k8s Jobs and watch for their events using SharedIndexInformer:\r\n\r\n```\r\nBatchV1Api batchV1Api = k8sApiClientService.getK8sBatchV1Api();\r\nreturn sharedInformerFactory.sharedIndexInformerFor(\r\n\t(CallGeneratorParams params) -&gt; {\r\n\t\treturn batchV1Api.listJobForAllNamespacesCall(\r\n\t\t\t\tnull,\r\n\t\t\t\tnull,\r\n\t\t\t\tnull,\r\n\t\t\t\tnull,\r\n\t\t\t\tnull,\r\n\t\t\t\tnull,\r\n\t\t\t\tparams.resourceVersion,\r\n\t\t\t\tnull,\r\n\t\t\t\tparams.timeoutSeconds,\r\n\t\t\t\tparams.watch,\r\n\t\t\t\tnull);\r\n\t},\r\n\tV1Job.class,\r\n\tV1JobList.class,\r\n\t30000);\r\n\r\n```\r\n\r\nI starts all informers this way:\r\n\r\n```\r\nsharedInformerFactory.startAllRegisteredInformers();\r\n```\r\n\r\nAnd initialize the k8s API this way:\r\n\r\n```\r\napiClient = new ClientBuilder()\r\n        .setCertificateAuthority(Base64.decodeBase64(kubernetesCertificateAuthData))\r\n        .setAuthentication(authentication)\r\n        .setVerifyingSsl(true)\r\n        .setBasePath(kubernetesAPI)\r\n        .build();\r\nOkHttpClient httpClient =\r\n        apiClient.getHttpClient().newBuilder().readTimeout(0, TimeUnit.SECONDS).build();\r\napiClient.setHttpClient(httpClient);\r\nio.kubernetes.client.openapi.Configuration.setDefaultApiClient(apiClient);\r\n```\r\n\r\n**What is the problem?**\r\nThe informer works great, I succeed to create new Jobs and get informed about completion/error/running events.\r\nBut, after a while the inform stopped working and I don&#39;t know why.\r\nI see that creation of new Job still works, so this is not a problem of communication.\r\nI thought to upgrade the library to the latest version v16.0.2, but I&#39;m not sure if this will fix the issue.\r\n\r\nCan you please assist?\r\n\r\n\r\n\r\nI have tried different resync duration of 30sec to 10min, the resync seems to work, but it seems that specific Jobs are not getting informed, even in the resync events it is missing.","title":"SharedIndexInformer (io.kubernetes) not working after few hours randomly","body":"<p><strong>Background</strong></p>\n<p>I made a PoC of a Java application using the following library:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;io.kubernetes&lt;/groupId&gt;\n  &lt;artifactId&gt;client-java-spring-integration&lt;/artifactId&gt;\n  &lt;version&gt;11.0.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>The application is creating new k8s Jobs and watch for their events using SharedIndexInformer:</p>\n<pre><code>BatchV1Api batchV1Api = k8sApiClientService.getK8sBatchV1Api();\nreturn sharedInformerFactory.sharedIndexInformerFor(\n    (CallGeneratorParams params) -&gt; {\n        return batchV1Api.listJobForAllNamespacesCall(\n                null,\n                null,\n                null,\n                null,\n                null,\n                null,\n                params.resourceVersion,\n                null,\n                params.timeoutSeconds,\n                params.watch,\n                null);\n    },\n    V1Job.class,\n    V1JobList.class,\n    30000);\n\n</code></pre>\n<p>I starts all informers this way:</p>\n<pre><code>sharedInformerFactory.startAllRegisteredInformers();\n</code></pre>\n<p>And initialize the k8s API this way:</p>\n<pre><code>apiClient = new ClientBuilder()\n        .setCertificateAuthority(Base64.decodeBase64(kubernetesCertificateAuthData))\n        .setAuthentication(authentication)\n        .setVerifyingSsl(true)\n        .setBasePath(kubernetesAPI)\n        .build();\nOkHttpClient httpClient =\n        apiClient.getHttpClient().newBuilder().readTimeout(0, TimeUnit.SECONDS).build();\napiClient.setHttpClient(httpClient);\nio.kubernetes.client.openapi.Configuration.setDefaultApiClient(apiClient);\n</code></pre>\n<p><strong>What is the problem?</strong>\nThe informer works great, I succeed to create new Jobs and get informed about completion/error/running events.\nBut, after a while the inform stopped working and I don't know why.\nI see that creation of new Job still works, so this is not a problem of communication.\nI thought to upgrade the library to the latest version v16.0.2, but I'm not sure if this will fix the issue.</p>\n<p>Can you please assist?</p>\n<p>I have tried different resync duration of 30sec to 10min, the resync seems to work, but it seems that specific Jobs are not getting informed, even in the resync events it is missing.</p>\n"},{"tags":["javascript","java","graphics","3d","webgl"],"owner":{"account_id":234688,"reputation":1366,"user_id":501004,"accept_rate":56,"display_name":"Piyush Soni"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1684836340,"creation_date":1684836042,"question_id":76313514,"body_markdown":"One of the problems I&#39;m facing in the 3d graphics application I&#39;m working on (Client written in Javascript &amp; WebGL 1.*, Server that sends geometry data for each object through web socket written in Java) is the initial model loading efficiency. It is because if the set of geometry objects are too big, we first have to serialize that data from the server, deserialize that on the client, and then process it to create different VBOs for each of them finding suitable space in the client memory pool (to eventually send the graphics data to the GPU). My question is, is there a way I can create VBOs on the server itself and transmit them in their &#39;raw&#39; binary form so that I can just bind them to the GPU buffer data and be done without doing all of it? If I can&#39;t create, can I do something like when I create WebGL Buffers on the client side for the first time I send them back and store them on the server for future use? \r\n\r\nIt will take additional processing on the server to create such buffers but overall it might be time saving if I don&#39;t need to serialize/deserialize and then create webgl buffers every time on the client side. \r\n\r\nThanks!","title":"Can we create/store WebGL VBOs on a Java Server?","body":"<p>One of the problems I'm facing in the 3d graphics application I'm working on (Client written in Javascript &amp; WebGL 1.*, Server that sends geometry data for each object through web socket written in Java) is the initial model loading efficiency. It is because if the set of geometry objects are too big, we first have to serialize that data from the server, deserialize that on the client, and then process it to create different VBOs for each of them finding suitable space in the client memory pool (to eventually send the graphics data to the GPU). My question is, is there a way I can create VBOs on the server itself and transmit them in their 'raw' binary form so that I can just bind them to the GPU buffer data and be done without doing all of it? If I can't create, can I do something like when I create WebGL Buffers on the client side for the first time I send them back and store them on the server for future use?</p>\n<p>It will take additional processing on the server to create such buffers but overall it might be time saving if I don't need to serialize/deserialize and then create webgl buffers every time on the client side.</p>\n<p>Thanks!</p>\n"},{"tags":["java","azure","ant","jackson","jackson-databind"],"comments":[{"owner":{"display_name":"anon"},"score":0,"creation_date":1635316124,"post_id":69666622,"comment_id":123261154,"body_markdown":"Could you provide the `pom.xml` code to see dependencies you are used?","body":"Could you provide the <code>pom.xml</code> code to see dependencies you are used?"},{"owner":{"account_id":2108743,"reputation":161,"user_id":1874435,"accept_rate":28,"display_name":"user1874435"},"score":0,"creation_date":1635378464,"post_id":69666622,"comment_id":123285067,"body_markdown":"There is no pom.xml, this is old application.","body":"There is no pom.xml, this is old application."},{"owner":{"account_id":2108743,"reputation":161,"user_id":1874435,"accept_rate":28,"display_name":"user1874435"},"score":0,"creation_date":1635468838,"post_id":69666622,"comment_id":123313367,"body_markdown":"I finally got this. ```java.lang.LinkageError: Package versions: jackson-annotations=2.9.9, jackson-core=2.9.9, jackson-databind=2.9.9, jackson-dataformat-xml=2.12.5, jackson-datatype-jsr310=2.12.5, azure-core=1.21.0```","body":"I finally got this. <code>java.lang.LinkageError: Package versions: jackson-annotations=2.9.9, jackson-core=2.9.9, jackson-databind=2.9.9, jackson-dataformat-xml=2.12.5, jackson-datatype-jsr310=2.12.5, azure-core=1.21.0</code>"},{"owner":{"display_name":"anon"},"score":0,"creation_date":1635472289,"post_id":69666622,"comment_id":123313873,"body_markdown":"In the Question You mentioned azure Core 1.20 and in the error it is azure-core 1.21.0. Did you updated? And, what all are the dependencies you installed for that, in the project?","body":"In the Question You mentioned azure Core 1.20 and in the error it is azure-core 1.21.0. Did you updated? And, what all are the dependencies you installed for that, in the project?"},{"owner":{"account_id":2108743,"reputation":161,"user_id":1874435,"accept_rate":28,"display_name":"user1874435"},"score":0,"creation_date":1635525763,"post_id":69666622,"comment_id":123330800,"body_markdown":"Yes, I did. I also tried Ivy. code is included above.","body":"Yes, I did. I also tried Ivy. code is included above."},{"owner":{"display_name":"anon"},"score":1,"creation_date":1635554027,"post_id":69666622,"comment_id":123337774,"body_markdown":"Try update to this [dependencies compatibility version](https://azuresdkartifacts.blob.core.windows.net/azure-sdk-for-java/staging/sdk/identity/azure-identity/dependencies.html) package installations.","body":"Try update to this <a href=\"https://azuresdkartifacts.blob.core.windows.net/azure-sdk-for-java/staging/sdk/identity/azure-identity/dependencies.html\" rel=\"nofollow noreferrer\">dependencies compatibility version</a> package installations."},{"owner":{"account_id":2108743,"reputation":161,"user_id":1874435,"accept_rate":28,"display_name":"user1874435"},"score":0,"creation_date":1635927130,"post_id":69666622,"comment_id":123419509,"body_markdown":"lol. finally. azure-core 1.4.0 works. Thank you for the help.","body":"lol. finally. azure-core 1.4.0 works. Thank you for the help."}],"answers":[{"tags":[],"owner":{"display_name":"anon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635927321,"creation_date":1635927321,"answer_id":69821535,"question_id":69666622,"body_markdown":"Try update to this [dependencies compatibility version][1] package installations\r\n\r\n\r\n  [1]: https://azuresdkartifacts.blob.core.windows.net/azure-sdk-for-java/staging/sdk/identity/azure-identity/dependencies.html","title":"JacksonAdapter cannot resolve correctly in azure-core-1.20 and Java web app","body":"<p>Try update to this <a href=\"https://azuresdkartifacts.blob.core.windows.net/azure-sdk-for-java/staging/sdk/identity/azure-identity/dependencies.html\" rel=\"nofollow noreferrer\">dependencies compatibility version</a> package installations</p>\n"},{"tags":[],"owner":{"account_id":3590209,"reputation":1021,"user_id":2996452,"accept_rate":62,"display_name":"Jokkeri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684836244,"creation_date":1684830401,"answer_id":76312682,"question_id":69666622,"body_markdown":"I had the exact same conflict when using azure-storage-file-datalake-12.15.1 where azure-core is requesting jackson versions 2.13.5.\r\n\r\nI forced the jackson libs to use 2.15.1 version and that resolved the problem for me.\r\nJackson libs for me was annotations, core, databind and datatype-jsr310\r\n\r\nI couldn&#39;t reproduce this in Eclipse but happened when running the Java app in prod, so it was quite tricky to resolve.\r\n\r\nStill using IVY as well.\r\n\r\nEdit:\r\nUseful link:\r\n[https://learn.microsoft.com/en-us/azure/developer/java/sdk/troubleshooting-dependency-version-conflict][1]\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/azure/developer/java/sdk/troubleshooting-dependency-version-conflict","title":"JacksonAdapter cannot resolve correctly in azure-core-1.20 and Java web app","body":"<p>I had the exact same conflict when using azure-storage-file-datalake-12.15.1 where azure-core is requesting jackson versions 2.13.5.</p>\n<p>I forced the jackson libs to use 2.15.1 version and that resolved the problem for me.\nJackson libs for me was annotations, core, databind and datatype-jsr310</p>\n<p>I couldn't reproduce this in Eclipse but happened when running the Java app in prod, so it was quite tricky to resolve.</p>\n<p>Still using IVY as well.</p>\n<p>Edit:\nUseful link:\n<a href=\"https://learn.microsoft.com/en-us/azure/developer/java/sdk/troubleshooting-dependency-version-conflict\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/developer/java/sdk/troubleshooting-dependency-version-conflict</a></p>\n"}],"owner":{"account_id":2108743,"reputation":161,"user_id":1874435,"accept_rate":28,"display_name":"user1874435"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1417,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1684836244,"creation_date":1634838622,"question_id":69666622,"body_markdown":"I am using azure-core-1.20 to connect to Azure KeyVault. \r\nIt is failing on line 35.\r\n\r\nCould anyone see a cause of this conflict?\r\nThank you\r\n\r\nFailing call:\r\n\r\n[![Failing function][1]][1]\r\n```\r\njava.lang.VerifyError: Bad return type\r\nException Details:\r\n  Location:\r\n    com/fasterxml/jackson/databind/cfg/MapperBuilder.streamFactory()Lcom/fasterxml/jackson/core/TokenStreamFactory; @7: areturn\r\n  Reason:\r\n    Type &#39;com/fasterxml/jackson/core/JsonFactory&#39; (current frame, stack[0]) is not assignable to &#39;com/fasterxml/jackson/core/TokenStreamFactory&#39; (from method signature)\r\n  Current Frame:\r\n    bci: @7\r\n    flags: { }\r\n    locals: { &#39;com/fasterxml/jackson/databind/cfg/MapperBuilder&#39; }\r\n    stack: { &#39;com/fasterxml/jackson/core/JsonFactory&#39; }\r\n  Bytecode:\r\n    0x0000000: 2ab4 0002 b600 08b0                    \r\n\r\n\tat com.fasterxml.jackson.databind.json.JsonMapper.builder(JsonMapper.java:114)\r\n\tat com.azure.core.util.serializer.JacksonAdapter.(JacksonAdapter.java:133)\r\n\tat com.azure.core.util.serializer.JacksonAdapter.createDefaultSerializerAdapter(JacksonAdapter.java:192)\r\n\tat com.azure.identity.implementation.IdentityClient.(IdentityClient.java:96)\r\n\tat com.azure.identity.implementation.IdentityClientBuilder.build(IdentityClientBuilder.java:113)\r\n\tat com.azure.identity.ManagedIdentityCredential.(ManagedIdentityCredential.java:39)\r\n\tat com.azure.identity.DefaultAzureCredentialBuilder.getCredentialsChain(DefaultAzureCredentialBuilder.java:129)\r\n\tat com.azure.identity.DefaultAzureCredentialBuilder.build(DefaultAzureCredentialBuilder.java:123)\r\n```\r\nCurrent Lib for the app:\r\n[![azure lib][2]][2]\r\n[![web app libs][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Pq33I.png\r\n  [2]: https://i.stack.imgur.com/UF3VK.png\r\n  [3]: https://i.stack.imgur.com/juSi4.png\r\n\r\nTry Ivy, but now jackson 2.9.9 is conflicting with 2.12.5 .\r\nDont know where jackson 2.9.9 is coming from. The Ivy report show no version 2.9.9\r\n```\r\n&lt;dependencies&gt;\r\n        &lt;dependency org=&quot;com.azure&quot; name=&quot;azure-core&quot; rev=&quot;1.21.0&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\r\n        &lt;dependency org=&quot;com.novell.ldap&quot; name=&quot;jldap&quot; rev=&quot;2009-10-07&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\r\n        &lt;dependency org=&quot;org.springframework&quot; name=&quot;spring-jdbc&quot; rev=&quot;5.3.11&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\r\n        &lt;dependency org=&quot;org.apache.tomcat&quot; name=&quot;tomcat-jdbc&quot; rev=&quot;9.0.52&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\r\n        &lt;dependency org=&quot;com.azure&quot; name=&quot;azure-security-keyvault-secrets&quot; rev=&quot;4.3.3&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\r\n        &lt;dependency org=&quot;com.azure&quot; name=&quot;azure-identity&quot; rev=&quot;1.3.6&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\r\n        &lt;dependency org=&quot;javax.resource&quot; name=&quot;javax.resource-api&quot; rev=&quot;1.7.1&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\r\n        &lt;dependency org=&quot;org.springframework&quot; name=&quot;spring-webmvc&quot; rev=&quot;5.3.12&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\r\n        &lt;dependency org=&quot;org.springframework&quot; name=&quot;spring-context&quot; rev=&quot;5.3.12&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\r\n        &lt;!-- &lt;dependency org=&quot;org.springframework&quot; name=&quot;spring-jca&quot; rev=&quot;2.0.8&quot; conf=&quot;binaries-&gt;default&quot; &gt;\r\n            &lt;exclude module=&quot;spring-bean&quot;&gt;&lt;/exclude&gt;\r\n            &lt;exclude module=&quot;spring-core&quot;&gt;&lt;/exclude&gt;\r\n            &lt;exclude module=&quot;spring-dao&quot;&gt;&lt;/exclude&gt;\r\n        &lt;/dependency&gt;  --&gt;\r\n        &lt;dependency org=&quot;commons-configuration&quot; name=&quot;commons-configuration&quot; rev=&quot;1.10&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\r\n        &lt;dependency org=&quot;commons-collections&quot; name=&quot;commons-collections&quot; rev=&quot;3.2.2&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\r\n        &lt;dependency org=&quot;displaytag&quot; name=&quot;displaytag&quot; rev=&quot;1.2&quot; conf=&quot;binaries-&gt;default&quot; &gt;\r\n            &lt;exclude  module=&quot;jcl104-over-slf4j&quot;&gt;&lt;/exclude&gt;\r\n            &lt;exclude module=&quot;slf4j-log4j12&quot;&gt;&lt;/exclude&gt;\r\n        &lt;/dependency&gt; \r\n        &lt;dependency org=&quot;com.google.code.gson&quot; name=&quot;gson&quot; rev=&quot;2.8.8&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\r\n        &lt;dependency org=&quot;org.apache.struts&quot; name=&quot;struts-core&quot; rev=&quot;1.3.10&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\r\n        &lt;dependency org=&quot;org.apache.struts&quot; name=&quot;struts-taglib&quot; rev=&quot;1.3.10&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\r\n        &lt;dependency org=&quot;org.apache.struts&quot; name=&quot;struts-extras&quot; rev=&quot;1.3.10&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\r\n        &lt;dependency org=&quot;org.apache.struts&quot; name=&quot;struts-tiles&quot; rev=&quot;1.3.10&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\r\n        &lt;dependency org=&quot;org.apache.struts&quot; name=&quot;struts-el&quot; rev=&quot;1.3.10&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\r\n        &lt;dependency org=&quot;org.apache.struts&quot; name=&quot;struts-faces&quot; rev=&quot;1.3.10&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\r\n        &lt;dependency org=&quot;org.apache.logging.log4j&quot; name=&quot;log4j-core&quot; rev=&quot;2.14.1&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\r\n        &lt;dependency org=&quot;org.apache.logging.log4j&quot; name=&quot;log4j-api&quot; rev=&quot;2.14.1&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\r\n        &lt;dependency org=&quot;org.apache.logging.log4j&quot; name=&quot;log4j-slf4j-impl&quot; rev=&quot;2.14.1&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\r\n        &lt;dependency org=&quot;org.slf4j&quot; name=&quot;slf4j-api&quot; rev=&quot;1.7.32&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\r\n        &lt;dependency org=&quot;org.slf4j&quot; name=&quot;slf4j-log4j12&quot; rev=&quot;1.7.32&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\r\n        &lt;dependency org=&quot;org.slf4j&quot; name=&quot;slf4j-simple&quot; rev=&quot;1.7.32&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\r\n        &lt;dependency org=&quot;org.slf4j&quot; name=&quot;jcl-over-slf4j&quot; rev=&quot;1.7.32&quot; conf=&quot;binaries-&gt;default&quot;  /&gt;\r\n    &lt;/dependencies&gt;\r\n```","title":"JacksonAdapter cannot resolve correctly in azure-core-1.20 and Java web app","body":"<p>I am using azure-core-1.20 to connect to Azure KeyVault.\nIt is failing on line 35.</p>\n<p>Could anyone see a cause of this conflict?\nThank you</p>\n<p>Failing call:</p>\n<p><a href=\"https://i.stack.imgur.com/Pq33I.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Pq33I.png\" alt=\"Failing function\" /></a></p>\n<pre><code>java.lang.VerifyError: Bad return type\nException Details:\n  Location:\n    com/fasterxml/jackson/databind/cfg/MapperBuilder.streamFactory()Lcom/fasterxml/jackson/core/TokenStreamFactory; @7: areturn\n  Reason:\n    Type 'com/fasterxml/jackson/core/JsonFactory' (current frame, stack[0]) is not assignable to 'com/fasterxml/jackson/core/TokenStreamFactory' (from method signature)\n  Current Frame:\n    bci: @7\n    flags: { }\n    locals: { 'com/fasterxml/jackson/databind/cfg/MapperBuilder' }\n    stack: { 'com/fasterxml/jackson/core/JsonFactory' }\n  Bytecode:\n    0x0000000: 2ab4 0002 b600 08b0                    \n\n    at com.fasterxml.jackson.databind.json.JsonMapper.builder(JsonMapper.java:114)\n    at com.azure.core.util.serializer.JacksonAdapter.(JacksonAdapter.java:133)\n    at com.azure.core.util.serializer.JacksonAdapter.createDefaultSerializerAdapter(JacksonAdapter.java:192)\n    at com.azure.identity.implementation.IdentityClient.(IdentityClient.java:96)\n    at com.azure.identity.implementation.IdentityClientBuilder.build(IdentityClientBuilder.java:113)\n    at com.azure.identity.ManagedIdentityCredential.(ManagedIdentityCredential.java:39)\n    at com.azure.identity.DefaultAzureCredentialBuilder.getCredentialsChain(DefaultAzureCredentialBuilder.java:129)\n    at com.azure.identity.DefaultAzureCredentialBuilder.build(DefaultAzureCredentialBuilder.java:123)\n</code></pre>\n<p>Current Lib for the app:\n<a href=\"https://i.stack.imgur.com/UF3VK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UF3VK.png\" alt=\"azure lib\" /></a>\n<a href=\"https://i.stack.imgur.com/juSi4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/juSi4.png\" alt=\"web app libs\" /></a></p>\n<p>Try Ivy, but now jackson 2.9.9 is conflicting with 2.12.5 .\nDont know where jackson 2.9.9 is coming from. The Ivy report show no version 2.9.9</p>\n<pre><code>&lt;dependencies&gt;\n        &lt;dependency org=&quot;com.azure&quot; name=&quot;azure-core&quot; rev=&quot;1.21.0&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\n        &lt;dependency org=&quot;com.novell.ldap&quot; name=&quot;jldap&quot; rev=&quot;2009-10-07&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\n        &lt;dependency org=&quot;org.springframework&quot; name=&quot;spring-jdbc&quot; rev=&quot;5.3.11&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\n        &lt;dependency org=&quot;org.apache.tomcat&quot; name=&quot;tomcat-jdbc&quot; rev=&quot;9.0.52&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\n        &lt;dependency org=&quot;com.azure&quot; name=&quot;azure-security-keyvault-secrets&quot; rev=&quot;4.3.3&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\n        &lt;dependency org=&quot;com.azure&quot; name=&quot;azure-identity&quot; rev=&quot;1.3.6&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\n        &lt;dependency org=&quot;javax.resource&quot; name=&quot;javax.resource-api&quot; rev=&quot;1.7.1&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\n        &lt;dependency org=&quot;org.springframework&quot; name=&quot;spring-webmvc&quot; rev=&quot;5.3.12&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\n        &lt;dependency org=&quot;org.springframework&quot; name=&quot;spring-context&quot; rev=&quot;5.3.12&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\n        &lt;!-- &lt;dependency org=&quot;org.springframework&quot; name=&quot;spring-jca&quot; rev=&quot;2.0.8&quot; conf=&quot;binaries-&gt;default&quot; &gt;\n            &lt;exclude module=&quot;spring-bean&quot;&gt;&lt;/exclude&gt;\n            &lt;exclude module=&quot;spring-core&quot;&gt;&lt;/exclude&gt;\n            &lt;exclude module=&quot;spring-dao&quot;&gt;&lt;/exclude&gt;\n        &lt;/dependency&gt;  --&gt;\n        &lt;dependency org=&quot;commons-configuration&quot; name=&quot;commons-configuration&quot; rev=&quot;1.10&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\n        &lt;dependency org=&quot;commons-collections&quot; name=&quot;commons-collections&quot; rev=&quot;3.2.2&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\n        &lt;dependency org=&quot;displaytag&quot; name=&quot;displaytag&quot; rev=&quot;1.2&quot; conf=&quot;binaries-&gt;default&quot; &gt;\n            &lt;exclude  module=&quot;jcl104-over-slf4j&quot;&gt;&lt;/exclude&gt;\n            &lt;exclude module=&quot;slf4j-log4j12&quot;&gt;&lt;/exclude&gt;\n        &lt;/dependency&gt; \n        &lt;dependency org=&quot;com.google.code.gson&quot; name=&quot;gson&quot; rev=&quot;2.8.8&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\n        &lt;dependency org=&quot;org.apache.struts&quot; name=&quot;struts-core&quot; rev=&quot;1.3.10&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\n        &lt;dependency org=&quot;org.apache.struts&quot; name=&quot;struts-taglib&quot; rev=&quot;1.3.10&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\n        &lt;dependency org=&quot;org.apache.struts&quot; name=&quot;struts-extras&quot; rev=&quot;1.3.10&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\n        &lt;dependency org=&quot;org.apache.struts&quot; name=&quot;struts-tiles&quot; rev=&quot;1.3.10&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\n        &lt;dependency org=&quot;org.apache.struts&quot; name=&quot;struts-el&quot; rev=&quot;1.3.10&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\n        &lt;dependency org=&quot;org.apache.struts&quot; name=&quot;struts-faces&quot; rev=&quot;1.3.10&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\n        &lt;dependency org=&quot;org.apache.logging.log4j&quot; name=&quot;log4j-core&quot; rev=&quot;2.14.1&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\n        &lt;dependency org=&quot;org.apache.logging.log4j&quot; name=&quot;log4j-api&quot; rev=&quot;2.14.1&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\n        &lt;dependency org=&quot;org.apache.logging.log4j&quot; name=&quot;log4j-slf4j-impl&quot; rev=&quot;2.14.1&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\n        &lt;dependency org=&quot;org.slf4j&quot; name=&quot;slf4j-api&quot; rev=&quot;1.7.32&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\n        &lt;dependency org=&quot;org.slf4j&quot; name=&quot;slf4j-log4j12&quot; rev=&quot;1.7.32&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\n        &lt;dependency org=&quot;org.slf4j&quot; name=&quot;slf4j-simple&quot; rev=&quot;1.7.32&quot; conf=&quot;binaries-&gt;default&quot; /&gt;\n        &lt;dependency org=&quot;org.slf4j&quot; name=&quot;jcl-over-slf4j&quot; rev=&quot;1.7.32&quot; conf=&quot;binaries-&gt;default&quot;  /&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n"},{"tags":["java","keycloak","keycloak-admin-client"],"owner":{"account_id":9197181,"reputation":81,"user_id":6835528,"display_name":"MCLonips"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684836010,"creation_date":1684836010,"question_id":76313509,"body_markdown":"Unfortunaly we can not use the keycloak interface directly so we had to build a proxy communicating with the keycloak over the java-admin-client in our application. Currently you are able to login and change your password with our proxy.\r\n\r\nNow we want to detect if a password is expired or temporary to force the user to choose and set a new password. To reach this we catch the possible HttpResponseException due to the authClient.obtainAccessToken(String,String) method. If the StatusCode is 400 we check if the users password is expired.\r\nTo check this we first check if the UserRepresentation contains the required action “UPDATE_PASSWORD”. Additionally we try to validate if the given password is correct.\r\nAs now we remove the UPDATE_PASSWORD action and try to login again. If this works correctly we assume the password may be correct and the user is able to change its password.\r\nThis worked for us when using a temporary password or setting the UPDATE_PASSWORD action manually.\r\n\r\nNow we activated a password policy with an expiration date. but now our approach to detect if a password is valid does not work anymore. The UPDATE_PASSWORD action is set but if we remove it login is still not possible (probably because of the password policy and the reached expiration?).\r\n\r\nI know this is veeeeeeery hacky and we are not happy with this approach. Is there any way to check if a password is valid even if its expired or temprorary?\r\n\r\nWe use the keycloak admin and auth client maven dependency in version 18.0.2 and a keycloak in version 18.0.0\r\n\r\nGreetings from Germany!","title":"Validate a password with keycloak with the java admin client","body":"<p>Unfortunaly we can not use the keycloak interface directly so we had to build a proxy communicating with the keycloak over the java-admin-client in our application. Currently you are able to login and change your password with our proxy.</p>\n<p>Now we want to detect if a password is expired or temporary to force the user to choose and set a new password. To reach this we catch the possible HttpResponseException due to the authClient.obtainAccessToken(String,String) method. If the StatusCode is 400 we check if the users password is expired.\nTo check this we first check if the UserRepresentation contains the required action “UPDATE_PASSWORD”. Additionally we try to validate if the given password is correct.\nAs now we remove the UPDATE_PASSWORD action and try to login again. If this works correctly we assume the password may be correct and the user is able to change its password.\nThis worked for us when using a temporary password or setting the UPDATE_PASSWORD action manually.</p>\n<p>Now we activated a password policy with an expiration date. but now our approach to detect if a password is valid does not work anymore. The UPDATE_PASSWORD action is set but if we remove it login is still not possible (probably because of the password policy and the reached expiration?).</p>\n<p>I know this is veeeeeeery hacky and we are not happy with this approach. Is there any way to check if a password is valid even if its expired or temprorary?</p>\n<p>We use the keycloak admin and auth client maven dependency in version 18.0.2 and a keycloak in version 18.0.0</p>\n<p>Greetings from Germany!</p>\n"},{"tags":["java","ms-word","apache-poi"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":2,"creation_date":1684845531,"post_id":76313496,"comment_id":134574122,"body_markdown":"https://stackoverflow.com/questions/75259180/how-to-implement-the-hanging-indent-in-word-document-with-apache-poi/75259685#75259685 -&gt; [XWPFParagraph.setIndentFromLeft](https://poi.apache.org/apidocs/dev/org/apache/poi/xwpf/usermodel/XWPFParagraph.html#setIndentFromLeft-int-) without `XWPFParagraph.setIndentationHanging`.","body":"<a href=\"https://stackoverflow.com/questions/75259180/how-to-implement-the-hanging-indent-in-word-document-with-apache-poi/75259685#75259685\" title=\"how to implement the hanging indent in word document with apache poi\">stackoverflow.com/questions/75259180/&hellip;</a> -&gt; <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/xwpf/usermodel/XWPFParagraph.html#setIndentFromLeft-int-\" rel=\"nofollow noreferrer\">XWPFParagraph.setIndentFromLeft</a> without <code>XWPFParagraph.setIndentationHanging</code>."},{"owner":{"account_id":19332777,"reputation":921,"user_id":14133995,"display_name":"Charles Kenyon"},"score":2,"creation_date":1684848133,"post_id":76313496,"comment_id":134574802,"body_markdown":"You are adding a Tab character in Word, similar to pressing the Tab key when in text. What you want to do is change the paragraph formatting to set a left indent.","body":"You are adding a Tab character in Word, similar to pressing the Tab key when in text. What you want to do is change the paragraph formatting to set a left indent."}],"owner":{"account_id":11317917,"reputation":51,"user_id":8299076,"display_name":"Bharath Naidu Yenumula"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1684835894,"creation_date":1684835894,"question_id":76313496,"body_markdown":"I am trying to add indentation(of 3 tabs) to the whole paragraph using Apache poi. Here is the code that i have used to create indentation.\r\n\r\n```\r\n    import org.apache.poi.xwpf.usermodel.*;\r\n    import java.io.FileOutputStream;\r\n    import java.io.IOException;\r\n\r\n    public class ApachePOIExample {\r\n        public static void main(String[] args) {\r\n            // Create a new Word document\r\n            XWPFDocument document = new XWPFDocument();\r\n\r\n            // Create a paragraph\r\n            XWPFParagraph paragraph = document.createParagraph();\r\n\r\n            // Create a run and add text to it\r\n            XWPFRun run = paragraph.createRun();\r\n            run.addTab();\r\n            run.addTab();\r\n            run.addTab();\r\n            run.setText(&quot;A paragraph is a series of sentences that are organized and \r\n    coherent, and are all related to a single topic. Almost every piece of writing you do \r\n    that is longer than a few sentences should be organized into paragraphs. This is because \r\n    paragraphs show a reader where the subdivisions of an essay begin and end, and thus help \r\n    the reader see the organization of the essay and grasp its main points.&quot;);\r\n\r\n        // Save the document to a file\r\n            try (FileOutputStream fileOutputStream = new FileOutputStream(&quot;example.docx&quot;)) {\r\n                document.write(fileOutputStream);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n```\r\nAnd this is the output that i got from the above code. The run.addTab() function is indenting only the first line of the paragraph as shown below.\r\n[![code output][1]][1]\r\n\r\n\r\nIs there any way in apache poi that i could have format like this?\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/PvTAx.png\r\n  [2]: https://i.stack.imgur.com/mPWOP.png\r\nAny help or insights would be much appreciated.","title":"Add indentation to whole paragraph using apache poi","body":"<p>I am trying to add indentation(of 3 tabs) to the whole paragraph using Apache poi. Here is the code that i have used to create indentation.</p>\n<pre><code>    import org.apache.poi.xwpf.usermodel.*;\n    import java.io.FileOutputStream;\n    import java.io.IOException;\n\n    public class ApachePOIExample {\n        public static void main(String[] args) {\n            // Create a new Word document\n            XWPFDocument document = new XWPFDocument();\n\n            // Create a paragraph\n            XWPFParagraph paragraph = document.createParagraph();\n\n            // Create a run and add text to it\n            XWPFRun run = paragraph.createRun();\n            run.addTab();\n            run.addTab();\n            run.addTab();\n            run.setText(&quot;A paragraph is a series of sentences that are organized and \n    coherent, and are all related to a single topic. Almost every piece of writing you do \n    that is longer than a few sentences should be organized into paragraphs. This is because \n    paragraphs show a reader where the subdivisions of an essay begin and end, and thus help \n    the reader see the organization of the essay and grasp its main points.&quot;);\n\n        // Save the document to a file\n            try (FileOutputStream fileOutputStream = new FileOutputStream(&quot;example.docx&quot;)) {\n                document.write(fileOutputStream);\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n\n</code></pre>\n<p>And this is the output that i got from the above code. The run.addTab() function is indenting only the first line of the paragraph as shown below.\n<a href=\"https://i.stack.imgur.com/PvTAx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PvTAx.png\" alt=\"code output\" /></a></p>\n<p>Is there any way in apache poi that i could have format like this?\n<a href=\"https://i.stack.imgur.com/mPWOP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mPWOP.png\" alt=\"enter image description here\" /></a></p>\n<p>Any help or insights would be much appreciated.</p>\n"},{"tags":["java","switch-statement","java.util.scanner"],"comments":[{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1506415459,"post_id":46421569,"comment_id":79800626,"body_markdown":"Have you noticed that you have no break in your cases, and that your while loop is inside the switch statement?","body":"Have you noticed that you have no break in your cases, and that your while loop is inside the switch statement?"},{"owner":{"account_id":11781310,"reputation":13,"user_id":8620755,"display_name":"Gege"},"score":0,"creation_date":1506415640,"post_id":46421569,"comment_id":79800757,"body_markdown":"@MauricePerry i had it as default: but it wasn&#39;t reading certain values. Also breaks don&#39;t seem to impact my result(?)","body":"@MauricePerry i had it as default: but it wasn&#39;t reading certain values. Also breaks don&#39;t seem to impact my result(?)"},{"owner":{"account_id":128226,"reputation":10041,"user_id":325900,"accept_rate":78,"display_name":"DaveyDaveDave"},"score":0,"creation_date":1506415759,"post_id":46421569,"comment_id":79800841,"body_markdown":"Are you sure you&#39;ve posted the real code? When I copy and paste it I&#39;m not seeing the results you say you&#39;re seeing. In particular, my stack looks like: `[^, 2.0, -, *, /, ^, 3.0, /, ^, 2.0, 6.0, *, /, ^, 8.0, +, -, *, /, ^, 2.5, 3.0]`, which is consistent with @MauricePerry&#39;s observation that you are missing `break` statements.","body":"Are you sure you&#39;ve posted the real code? When I copy and paste it I&#39;m not seeing the results you say you&#39;re seeing. In particular, my stack looks like: <code>[^, 2.0, -, *, &#47;, ^, 3.0, &#47;, ^, 2.0, 6.0, *, &#47;, ^, 8.0, +, -, *, &#47;, ^, 2.5, 3.0]</code>, which is consistent with @MauricePerry&#39;s observation that you are missing <code>break</code> statements."},{"owner":{"account_id":11781310,"reputation":13,"user_id":8620755,"display_name":"Gege"},"score":1,"creation_date":1506416661,"post_id":46421569,"comment_id":79801466,"body_markdown":"@DaveyDaveDave oh I totally realize what I was doing wrong-- wasn&#39;t reading the stack correctly.. Thanks for your help","body":"@DaveyDaveDave oh I totally realize what I was doing wrong-- wasn&#39;t reading the stack correctly.. Thanks for your help"}],"answers":[{"tags":[],"owner":{"account_id":128226,"reputation":10041,"user_id":325900,"accept_rate":78,"display_name":"DaveyDaveDave"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1506416230,"creation_date":1506416230,"answer_id":46421963,"question_id":46421569,"body_markdown":"Copying your code and modifying slightly to use a `Stack&lt;String&gt;` rather than implementing your `operationNode` and `numberNode` classes, I find that the following works as (I think) you expect:\r\n\r\n    public static void main(String... args) {\r\n        Scanner stackScanner = new Scanner(&quot;^ 2 - 3 / 2 6 * 8 + 2.5 3&quot;);\r\n\r\n        Stack&lt;String&gt; stack = new Stack&lt;&gt;();\r\n\r\n        while (stackScanner.hasNextLine()) {\r\n\r\n            switch (stackScanner.next()) {\r\n                case &quot;+&quot;: {\r\n                    stack.push(&quot;+&quot;);\r\n                    break;\r\n                }\r\n\r\n                case &quot;-&quot;: {\r\n                    stack.push(&quot;-&quot;);\r\n                    break;\r\n                }\r\n\r\n                case &quot;*&quot;: {\r\n                    stack.push(&quot;*&quot;);\r\n                    break;\r\n                }\r\n\r\n                case &quot;/&quot;: {\r\n                    stack.push(&quot;/&quot;);\r\n                    break;\r\n                }\r\n\r\n                case &quot;^&quot;: {\r\n                    stack.push(&quot;^&quot;);\r\n                    break;\r\n                }\r\n            }\r\n\r\n            while (stackScanner.hasNextDouble()) {\r\n                stack.push(Double.toString(stackScanner.nextDouble()));\r\n            }\r\n        }\r\n\r\n        System.out.println(stack);\r\n    }\r\n\r\nThat is, I&#39;ve added the `break;` statements, which you seem to not need (perhaps some sort of JVM difference?) and moved the `while` loop outside of the `switch`.","title":"Java Scanner nextDouble command skipping values with switch case?","body":"<p>Copying your code and modifying slightly to use a <code>Stack&lt;String&gt;</code> rather than implementing your <code>operationNode</code> and <code>numberNode</code> classes, I find that the following works as (I think) you expect:</p>\n\n<pre><code>public static void main(String... args) {\n    Scanner stackScanner = new Scanner(\"^ 2 - 3 / 2 6 * 8 + 2.5 3\");\n\n    Stack&lt;String&gt; stack = new Stack&lt;&gt;();\n\n    while (stackScanner.hasNextLine()) {\n\n        switch (stackScanner.next()) {\n            case \"+\": {\n                stack.push(\"+\");\n                break;\n            }\n\n            case \"-\": {\n                stack.push(\"-\");\n                break;\n            }\n\n            case \"*\": {\n                stack.push(\"*\");\n                break;\n            }\n\n            case \"/\": {\n                stack.push(\"/\");\n                break;\n            }\n\n            case \"^\": {\n                stack.push(\"^\");\n                break;\n            }\n        }\n\n        while (stackScanner.hasNextDouble()) {\n            stack.push(Double.toString(stackScanner.nextDouble()));\n        }\n    }\n\n    System.out.println(stack);\n}\n</code></pre>\n\n<p>That is, I've added the <code>break;</code> statements, which you seem to not need (perhaps some sort of JVM difference?) and moved the <code>while</code> loop outside of the <code>switch</code>.</p>\n"},{"tags":[],"owner":{"account_id":1135699,"reputation":30287,"user_id":1120793,"accept_rate":35,"display_name":"Darshan Mehta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1506416519,"creation_date":1506416519,"answer_id":46422070,"question_id":46421569,"body_markdown":"You need to wrap `switch` into `while` and move the handling of `double` into `default` block, e.g.:\r\n\r\n    while (stackScanner.hasNextLine()) {\r\n    \tString nextToken = stackScanner.next();\r\n        switch(nextToken) { \r\n    \r\n        case&quot;+&quot;: {\r\n            System.out.println(&quot;+&quot;);\r\n            break;\r\n            }\r\n    \r\n        case&quot;-&quot;:{\r\n        \tSystem.out.println(&quot;-&quot;);\r\n        \tbreak;\r\n        }\r\n    \r\n        case&quot;*&quot;:{\r\n        \tSystem.out.println(&quot;*&quot;);\r\n        \tbreak;\r\n        }\r\n    \r\n        case&quot;/&quot;:{\r\n        \tSystem.out.println(&quot;/&quot;);\r\n        \tbreak;\r\n        }\r\n    \r\n        case&quot;^&quot;:{\r\n        \tSystem.out.println(&quot;^&quot;);\r\n        \tbreak;\r\n        }\r\n    \r\n        default:\r\n        \tif(isDouble(nextToken)){\r\n        \t\t//Do something\r\n        \t}\r\n        \tbreak;\r\n        }\r\n    }\r\n\r\nYou also need to write a method to check for `double`. It would look something like this:\r\n\r\n    private boolean isDouble(String number){\r\n    \ttry{\r\n            Double.parseDouble(number);\r\n            return true;\r\n        }Catch(Exception e){\r\n            return false;\r\n        }\r\n    }","title":"Java Scanner nextDouble command skipping values with switch case?","body":"<p>You need to wrap <code>switch</code> into <code>while</code> and move the handling of <code>double</code> into <code>default</code> block, e.g.:</p>\n\n<pre><code>while (stackScanner.hasNextLine()) {\n    String nextToken = stackScanner.next();\n    switch(nextToken) { \n\n    case\"+\": {\n        System.out.println(\"+\");\n        break;\n        }\n\n    case\"-\":{\n        System.out.println(\"-\");\n        break;\n    }\n\n    case\"*\":{\n        System.out.println(\"*\");\n        break;\n    }\n\n    case\"/\":{\n        System.out.println(\"/\");\n        break;\n    }\n\n    case\"^\":{\n        System.out.println(\"^\");\n        break;\n    }\n\n    default:\n        if(isDouble(nextToken)){\n            //Do something\n        }\n        break;\n    }\n}\n</code></pre>\n\n<p>You also need to write a method to check for <code>double</code>. It would look something like this:</p>\n\n<pre><code>private boolean isDouble(String number){\n    try{\n        Double.parseDouble(number);\n        return true;\n    }Catch(Exception e){\n        return false;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":11781310,"reputation":13,"user_id":8620755,"display_name":"Gege"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":173,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":46421963,"answer_count":2,"score":1,"last_activity_date":1684835848,"creation_date":1506415032,"question_id":46421569,"body_markdown":"I&#39;m scanning an argument file with a switch case into a `Stack` and it&#39;s skipping over values with a `.nextDouble` command?\r\n\r\nHere is my code fragment:\r\n\r\n    while (stackScanner.hasNextLine()) {\t\t\r\n\t\t\r\n\t\tswitch(stackScanner.next()) { \r\n\t\t\t\t\r\n\t\tcase&quot;+&quot;: {\r\n\t\t\toperator= new operationNode(&quot;+&quot;);\r\n\t\t\tstack.push(operator);}\r\n\t\t\t\r\n\t\tcase&quot;-&quot;:{\r\n\t\t\toperator= new operationNode(&quot;-&quot;);\r\n\t\t\tstack.push(operator);}\r\n\t\t\t\r\n\t\tcase&quot;*&quot;:{\r\n\t\t\toperator= new operationNode(&quot;*&quot;);\r\n\t\t\tstack.push(operator);}\r\n\t\t\t\r\n\t\tcase&quot;/&quot;:{\r\n\t\t\toperator= new operationNode(&quot;/&quot;);\r\n\t\t\tstack.push(operator);}\r\n\t\t\t\r\n\t\tcase&quot;^&quot;:{\r\n\t\t\toperator= new operationNode(&quot;^&quot;);\r\n\t\t\tstack.push(operator);}\r\n\t\t\r\n\t\twhile(stackScanner.hasNextDouble()) {\r\n\t\t\tstack.push(new numberNode(stackScanner.nextDouble()));\r\n\t\t}\r\n\t}\r\n\r\nThe problem is in this last line here, where the argument file contains the following: `^ 2 - 3 / 2 6 * 8 + 2.5 3`\r\n\r\nYet, the scanner only collects: `^ 2 - 3 / 6 * 8 + 3`.\r\n\r\nSo it&#39;s skipping over the first numbers that come in a pair here (2 and 2.5).\r\n\r\nThing is, when I add `stackScanner.next();` at the end of the while loop, the only numbers that it saves are those values 2 and 2.5?","title":"Java Scanner nextDouble command skipping values with switch case?","body":"<p>I'm scanning an argument file with a switch case into a <code>Stack</code> and it's skipping over values with a <code>.nextDouble</code> command?</p>\n\n<p>Here is my code fragment:</p>\n\n<pre><code>while (stackScanner.hasNextLine()) {        \n\n    switch(stackScanner.next()) { \n\n    case\"+\": {\n        operator= new operationNode(\"+\");\n        stack.push(operator);}\n\n    case\"-\":{\n        operator= new operationNode(\"-\");\n        stack.push(operator);}\n\n    case\"*\":{\n        operator= new operationNode(\"*\");\n        stack.push(operator);}\n\n    case\"/\":{\n        operator= new operationNode(\"/\");\n        stack.push(operator);}\n\n    case\"^\":{\n        operator= new operationNode(\"^\");\n        stack.push(operator);}\n\n    while(stackScanner.hasNextDouble()) {\n        stack.push(new numberNode(stackScanner.nextDouble()));\n    }\n}\n</code></pre>\n\n<p>The problem is in this last line here, where the argument file contains the following: <code>^ 2 - 3 / 2 6 * 8 + 2.5 3</code></p>\n\n<p>Yet, the scanner only collects: <code>^ 2 - 3 / 6 * 8 + 3</code>.</p>\n\n<p>So it's skipping over the first numbers that come in a pair here (2 and 2.5).</p>\n\n<p>Thing is, when I add <code>stackScanner.next();</code> at the end of the while loop, the only numbers that it saves are those values 2 and 2.5?</p>\n"},{"tags":["java","java.util.scanner"],"comments":[{"owner":{"account_id":8153102,"reputation":15213,"user_id":6139527,"display_name":"Nicholas K"},"score":1,"creation_date":1548248298,"post_id":54327660,"comment_id":95473608,"body_markdown":"`cmdScanner.nextLine().split(&quot; &quot;);`","body":"<code>cmdScanner.nextLine().split(&quot; &quot;);</code>"},{"owner":{"account_id":12824720,"reputation":115,"user_id":9278225,"display_name":"CoreNoob"},"score":0,"creation_date":1548248449,"post_id":54327660,"comment_id":95473693,"body_markdown":"Yeah, but then I need to use an array. I want to assign the &quot;argument&quot; to a String.","body":"Yeah, but then I need to use an array. I want to assign the &quot;argument&quot; to a String."},{"owner":{"account_id":8153102,"reputation":15213,"user_id":6139527,"display_name":"Nicholas K"},"score":0,"creation_date":1548248483,"post_id":54327660,"comment_id":95473715,"body_markdown":"What exactly are you trying to do? Please provide a sample input with expected output. *That could be helpful because later on I want to get the &quot;next&quot; BigDecimal in a proper way* -- This is highly unclear.","body":"What exactly are you trying to do? Please provide a sample input with expected output. <i>That could be helpful because later on I want to get the &quot;next&quot; BigDecimal in a proper way</i> -- This is highly unclear."},{"owner":{"account_id":12824720,"reputation":115,"user_id":9278225,"display_name":"CoreNoob"},"score":0,"creation_date":1548249213,"post_id":54327660,"comment_id":95474108,"body_markdown":"I want to let the user enter a command like this: *transact fromWallet toWallet 12.00*. And then a method should be called, for example: *transact(fromWallet, toWallet, new BigDecimal(12.00));* and the last argument will be a *BigDecimal* That is how I implemented *Money* in my code. With my implementation of getting *arguments* for my methods I wouldn&#39;t be able to get the *BigDecimal* in a good way I think.","body":"I want to let the user enter a command like this: <i>transact fromWallet toWallet 12.00</i>. And then a method should be called, for example: <i>transact(fromWallet, toWallet, new BigDecimal(12.00));</i> and the last argument will be a <i>BigDecimal</i> That is how I implemented <i>Money</i> in my code. With my implementation of getting <i>arguments</i> for my methods I wouldn&#39;t be able to get the <i>BigDecimal</i> in a good way I think."}],"answers":[{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1548252405,"creation_date":1548248481,"answer_id":54327891,"question_id":54327660,"body_markdown":"    public static void main(String... obj) {\r\n        try (Scanner scan = new Scanner(System.in)) {\r\n            final Pattern whiteSpace = Pattern.compile(&quot;\\\\s+&quot;);\r\n            System.out.println(&quot;Type your command!&quot;);\r\n    \r\n            do {\r\n                String[] args = whiteSpace.split(scan.nextLine().trim());\r\n    \r\n                if (args.length == 1 &amp;&amp; &quot;exit&quot;.equalsIgnoreCase(args[0]))\r\n                    return;\r\n    \r\n                for (int i = 0; i &lt; args.length; i++)\r\n                    System.out.println(&quot;arg&quot; + (i + 1) + &quot; = &quot; + args[i]);\r\n    \r\n                System.out.println(&quot;Type your command!&quot;);\r\n            } while (scan.hasNext());\r\n        }\r\n    }","title":"How to scan &quot;arguments&quot; from a String and leave out whitespaces?","body":"<pre><code>public static void main(String... obj) {\n    try (Scanner scan = new Scanner(System.in)) {\n        final Pattern whiteSpace = Pattern.compile(\"\\\\s+\");\n        System.out.println(\"Type your command!\");\n\n        do {\n            String[] args = whiteSpace.split(scan.nextLine().trim());\n\n            if (args.length == 1 &amp;&amp; \"exit\".equalsIgnoreCase(args[0]))\n                return;\n\n            for (int i = 0; i &lt; args.length; i++)\n                System.out.println(\"arg\" + (i + 1) + \" = \" + args[i]);\n\n            System.out.println(\"Type your command!\");\n        } while (scan.hasNext());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":12824720,"reputation":115,"user_id":9278225,"display_name":"CoreNoob"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":54327891,"answer_count":1,"score":0,"last_activity_date":1684835818,"creation_date":1548247741,"question_id":54327660,"body_markdown":"I wanted to make the user type a command (For ex.: `transact fromWallet toWallet 12.00` ) and then get the arguments without whitespaces out of the `Scanner` and pass them to variables to call specific methods with them. I&#39;m still working on it but I managed to extract the arguments from the inputString without the methods that the Scanner provides. The `Scanner` was too problematic. It asked me to make 5 inputs, where I just needed 4 and so on. What is the &quot;better way&quot;? Is my solution okay? I ended up doing it this way (please tell me about &quot;bad practices&quot; in my code):\r\n\r\nHELP METHODS IN THE CLASS:\r\n\r\n    public static String getNextArg(String s) {\r\n\t\t// get last char\r\n\t\tint cut = s.indexOf(&quot; &quot;);\r\n\t\tif (cut == -1)\r\n\t\t\tcut = s.length();\r\n\r\n\t\t// split arg\r\n\t\tString arg = s.substring(0, cut);\r\n\r\n\t\treturn arg;\r\n\t}\r\n\r\n\tpublic static String getLeftOver(String s) {\r\n\t\tint cut = s.indexOf(&quot; &quot;);\r\n\t\tif (cut == -1)\r\n\t\t\tcut = s.length() - 1;\r\n\r\n\t\ts = s.substring(cut + 1);\r\n\t\treturn s;\r\n\t}\r\n\r\n\r\n\r\nCOMMAND PART IN THE MAIN:\r\n\r\n      String cmd = &quot;&quot;;\r\n\t\tString arg1, arg2, arg3, arg4;\r\n\r\n\t\tSystem.out.println(&quot;Type your command!&quot;);\r\n\t\tScanner cmdScanner = new Scanner(System.in);\r\n\t\tdo {\r\n\t\t\tcmd = cmdScanner.nextLine();\r\n\t\t\t\r\n\t\t\t// Check for &quot;exit&quot;\r\n\t\t\tif (cmd.length() &gt;= 4)\r\n\t\t\t\tif(cmd.substring(0, 4).equalsIgnoreCase(&quot;exit&quot;))\r\n\t\t\t\t\tSystem.exit(0); // Is this a good way to exit a program?\r\n\t\t\t\r\n\t\t\tSystem.out.println(&quot;The args passed to cmd are: &quot;);\r\n\t\t\tif (!cmd.trim().isEmpty()) {\r\n\t\t\t\targ1 = getNextArg(cmd);\r\n\t\t\t\tcmd = getLeftOver(cmd);\r\n\t\t\t\tSystem.out.println(&quot;arg1 = &quot; + arg1);\r\n\t\t\t}\r\n\t\t\tif (!cmd.trim().isEmpty()) {\r\n\t\t\t\targ2 = getNextArg(cmd);\r\n\t\t\t\tcmd = getLeftOver(cmd);\r\n\t\t\t\tSystem.out.println(&quot;arg2 = &quot; + arg2);\r\n\t\t\t}\r\n\t\t\tif (!cmd.trim().isEmpty()) {\r\n\t\t\t\targ3 = getNextArg(cmd);\r\n\t\t\t\tcmd = getLeftOver(cmd);\r\n\t\t\t\tSystem.out.println(&quot;arg3 = &quot; + arg3);\r\n\t\t\t}\r\n\t\t\tif (!cmd.trim().isEmpty()) {\r\n\t\t\t\targ4 = getNextArg(cmd);\r\n\t\t\t\tcmd = getLeftOver(cmd);\r\n\t\t\t\tSystem.out.println(&quot;arg4 = &quot; + arg4);\r\n\t\t\t}\r\n\t\t\tSystem.out.println(&quot;Type your command!&quot;);\r\n\t\t} while (cmdScanner.hasNext());\r\n\t}\r\n\r\nThe result fits my expectations. I just want to know how I could do this with the `Scanner`&#39;s `next()` methods. That could be helpful because later on I want to get the &quot;next&quot; `BigDecimal` in a proper way, and implementing own methods for everything would be a little bit to much for a noob like me.\r\n\r\n","title":"How to scan &quot;arguments&quot; from a String and leave out whitespaces?","body":"<p>I wanted to make the user type a command (For ex.: <code>transact fromWallet toWallet 12.00</code> ) and then get the arguments without whitespaces out of the <code>Scanner</code> and pass them to variables to call specific methods with them. I'm still working on it but I managed to extract the arguments from the inputString without the methods that the Scanner provides. The <code>Scanner</code> was too problematic. It asked me to make 5 inputs, where I just needed 4 and so on. What is the \"better way\"? Is my solution okay? I ended up doing it this way (please tell me about \"bad practices\" in my code):</p>\n\n<p>HELP METHODS IN THE CLASS:</p>\n\n<pre><code>public static String getNextArg(String s) {\n    // get last char\n    int cut = s.indexOf(\" \");\n    if (cut == -1)\n        cut = s.length();\n\n    // split arg\n    String arg = s.substring(0, cut);\n\n    return arg;\n}\n\npublic static String getLeftOver(String s) {\n    int cut = s.indexOf(\" \");\n    if (cut == -1)\n        cut = s.length() - 1;\n\n    s = s.substring(cut + 1);\n    return s;\n}\n</code></pre>\n\n<p>COMMAND PART IN THE MAIN:</p>\n\n<pre><code>  String cmd = \"\";\n    String arg1, arg2, arg3, arg4;\n\n    System.out.println(\"Type your command!\");\n    Scanner cmdScanner = new Scanner(System.in);\n    do {\n        cmd = cmdScanner.nextLine();\n\n        // Check for \"exit\"\n        if (cmd.length() &gt;= 4)\n            if(cmd.substring(0, 4).equalsIgnoreCase(\"exit\"))\n                System.exit(0); // Is this a good way to exit a program?\n\n        System.out.println(\"The args passed to cmd are: \");\n        if (!cmd.trim().isEmpty()) {\n            arg1 = getNextArg(cmd);\n            cmd = getLeftOver(cmd);\n            System.out.println(\"arg1 = \" + arg1);\n        }\n        if (!cmd.trim().isEmpty()) {\n            arg2 = getNextArg(cmd);\n            cmd = getLeftOver(cmd);\n            System.out.println(\"arg2 = \" + arg2);\n        }\n        if (!cmd.trim().isEmpty()) {\n            arg3 = getNextArg(cmd);\n            cmd = getLeftOver(cmd);\n            System.out.println(\"arg3 = \" + arg3);\n        }\n        if (!cmd.trim().isEmpty()) {\n            arg4 = getNextArg(cmd);\n            cmd = getLeftOver(cmd);\n            System.out.println(\"arg4 = \" + arg4);\n        }\n        System.out.println(\"Type your command!\");\n    } while (cmdScanner.hasNext());\n}\n</code></pre>\n\n<p>The result fits my expectations. I just want to know how I could do this with the <code>Scanner</code>'s <code>next()</code> methods. That could be helpful because later on I want to get the \"next\" <code>BigDecimal</code> in a proper way, and implementing own methods for everything would be a little bit to much for a noob like me.</p>\n"},{"tags":["java","spring-boot","spring-boot-actuator"],"answers":[{"tags":[],"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655379622,"creation_date":1655378981,"answer_id":72645122,"question_id":72644265,"body_markdown":"In addition to a git contributor, Spring boot also comes with a [`EnvironmentInfoContributor`](https://github.com/spring-projects/spring-boot/blob/d370d19e7a26623f0076765e257230f28e152ade/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/info/EnvironmentInfoContributor.java). This contributor automatically includes all application properties starting with `info.*`.\r\n\r\nSo the easiest solution is to make sure your custom properties all start with `info.*` and to treat your custom properties file as an additional application properties file. This can be done by providing the `spring.config.additional-location` VM argument. For example:\r\n\r\n```\r\njava -jar -Dspring.config.additional-location=classpath:custom-properties myApp.jar \r\n```\r\n\r\nNow you only have to enable the environment info contributor by setting:\r\n\r\n```\r\nmanagement.info.env.enabled=true\r\n```\r\n\r\nIf this isn&#39;t possible, you can indeed write your own contributor. One way of doing so is by [programmatically reading your properties](https://stackoverflow.com/q/1771166/1915448) and [converting it to a `Map&lt;String, String&gt;`](https://stackoverflow.com/questions/17209260/converting-java-util-properties-to-hashmapstring-string). Once that&#39;s done, you can call the `Info.Builder.withDetails(..)` method with your `Map` (see the source code of `EnvironmentInfoContributor`).\r\n","title":"Using .properties file in Spring Info contributor","body":"<p>In addition to a git contributor, Spring boot also comes with a <a href=\"https://github.com/spring-projects/spring-boot/blob/d370d19e7a26623f0076765e257230f28e152ade/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/info/EnvironmentInfoContributor.java\" rel=\"nofollow noreferrer\"><code>EnvironmentInfoContributor</code></a>. This contributor automatically includes all application properties starting with <code>info.*</code>.</p>\n<p>So the easiest solution is to make sure your custom properties all start with <code>info.*</code> and to treat your custom properties file as an additional application properties file. This can be done by providing the <code>spring.config.additional-location</code> VM argument. For example:</p>\n<pre><code>java -jar -Dspring.config.additional-location=classpath:custom-properties myApp.jar \n</code></pre>\n<p>Now you only have to enable the environment info contributor by setting:</p>\n<pre><code>management.info.env.enabled=true\n</code></pre>\n<p>If this isn't possible, you can indeed write your own contributor. One way of doing so is by <a href=\"https://stackoverflow.com/q/1771166/1915448\">programmatically reading your properties</a> and <a href=\"https://stackoverflow.com/questions/17209260/converting-java-util-properties-to-hashmapstring-string\">converting it to a <code>Map&lt;String, String&gt;</code></a>. Once that's done, you can call the <code>Info.Builder.withDetails(..)</code> method with your <code>Map</code> (see the source code of <code>EnvironmentInfoContributor</code>).</p>\n"}],"owner":{"account_id":8932967,"reputation":1,"user_id":6671374,"display_name":"Sam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":272,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684835083,"creation_date":1655374690,"question_id":72644265,"body_markdown":"I am writing a custom Info Contributor. I have a properties file that is generated during the build process in target/classes folder.\r\nHow Can I use this generated file in the custom info contributor.\r\n\r\nI checked the below code for [GitInfoContributor][1]\r\n\r\n```\r\npublic class GitInfoContributor extends InfoPropertiesInfoContributor&lt;GitProperties&gt; {\r\n\r\n\tpublic GitInfoContributor(GitProperties properties) {\r\n\t\tthis(properties, Mode.SIMPLE);\r\n\t}\r\n\r\n\tpublic GitInfoContributor(GitProperties properties, Mode mode) {\r\n\t\tsuper(properties, mode);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void contribute(Info.Builder builder) {\r\n\t\tbuilder.withDetail(&quot;git&quot;, generateContent());\r\n\t}\r\n\r\n\t@Override\r\n\tprotected PropertySource&lt;?&gt; toSimplePropertySource() {\r\n\t\tProperties props = new Properties();\r\n\t\tcopyIfSet(props, &quot;branch&quot;);\r\n\t\tString commitId = getProperties().getShortCommitId();\r\n\t\tif (commitId != null) {\r\n\t\t\tprops.put(&quot;commit.id&quot;, commitId);\r\n\t\t}\r\n\t\tcopyIfSet(props, &quot;commit.time&quot;);\r\n\t\treturn new PropertiesPropertySource(&quot;git&quot;, props);\r\n\t}\r\n\r\n\t/**\r\n\t * Post-process the content to expose. By default, well known keys representing dates\r\n\t * are converted to {@link Instant} instances.\r\n\t * @param content the content to expose\r\n\t */\r\n\t@Override\r\n\tprotected void postProcessContent(Map&lt;String, Object&gt; content) {\r\n\t\treplaceValue(getNestedMap(content, &quot;commit&quot;), &quot;time&quot;, getProperties().getCommitTime());\r\n\t\treplaceValue(getNestedMap(content, &quot;build&quot;), &quot;time&quot;, getProperties().getInstant(&quot;build.time&quot;));\r\n\t}\r\n\r\n}\r\n```\r\n\r\nI am not able to figure out how the git properties are being injected to GitProperties class here ?\r\nI need to do the same for my custom info contributor using my properties file.\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/blob/v2.1.7.RELEASE/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/info/GitInfoContributor.java","title":"Using .properties file in Spring Info contributor","body":"<p>I am writing a custom Info Contributor. I have a properties file that is generated during the build process in target/classes folder.\nHow Can I use this generated file in the custom info contributor.</p>\n<p>I checked the below code for <a href=\"https://github.com/spring-projects/spring-boot/blob/v2.1.7.RELEASE/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/info/GitInfoContributor.java\" rel=\"nofollow noreferrer\">GitInfoContributor</a></p>\n<pre><code>public class GitInfoContributor extends InfoPropertiesInfoContributor&lt;GitProperties&gt; {\n\n    public GitInfoContributor(GitProperties properties) {\n        this(properties, Mode.SIMPLE);\n    }\n\n    public GitInfoContributor(GitProperties properties, Mode mode) {\n        super(properties, mode);\n    }\n\n    @Override\n    public void contribute(Info.Builder builder) {\n        builder.withDetail(&quot;git&quot;, generateContent());\n    }\n\n    @Override\n    protected PropertySource&lt;?&gt; toSimplePropertySource() {\n        Properties props = new Properties();\n        copyIfSet(props, &quot;branch&quot;);\n        String commitId = getProperties().getShortCommitId();\n        if (commitId != null) {\n            props.put(&quot;commit.id&quot;, commitId);\n        }\n        copyIfSet(props, &quot;commit.time&quot;);\n        return new PropertiesPropertySource(&quot;git&quot;, props);\n    }\n\n    /**\n     * Post-process the content to expose. By default, well known keys representing dates\n     * are converted to {@link Instant} instances.\n     * @param content the content to expose\n     */\n    @Override\n    protected void postProcessContent(Map&lt;String, Object&gt; content) {\n        replaceValue(getNestedMap(content, &quot;commit&quot;), &quot;time&quot;, getProperties().getCommitTime());\n        replaceValue(getNestedMap(content, &quot;build&quot;), &quot;time&quot;, getProperties().getInstant(&quot;build.time&quot;));\n    }\n\n}\n</code></pre>\n<p>I am not able to figure out how the git properties are being injected to GitProperties class here ?\nI need to do the same for my custom info contributor using my properties file.</p>\n"},{"tags":["java","android","multithreading","android-theme"],"comments":[{"owner":{"account_id":13009440,"reputation":81,"user_id":9402979,"display_name":"Isidro Rodriguez"},"score":0,"creation_date":1685034063,"post_id":76313003,"comment_id":134608305,"body_markdown":"Can you share the error stack trace?","body":"Can you share the error stack trace?"}],"answers":[{"tags":[],"owner":{"account_id":28652645,"reputation":14,"user_id":21939331,"display_name":"user123 user"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1684833385,"creation_date":1684833385,"answer_id":76313109,"question_id":76313003,"body_markdown":"It also depends upon the mobile setting in developers option you should change them.\r\n","title":"Android MultiThreading is working in Android 8.0 but not Android 11","body":"<p>It also depends upon the mobile setting in developers option you should change them.</p>\n"}],"owner":{"account_id":22951635,"reputation":45,"user_id":17174960,"display_name":"Arya_"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684834847,"creation_date":1684832673,"question_id":76313003,"body_markdown":"```\r\n@Override\r\npublic void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\r\n\r\n        super.onViewCreated(view, savedInstanceState);\r\n        String[] themeStrings = {&quot;Light&quot;,&quot;Dark&quot;,&quot;System Default&quot;};\r\n        ListView lv = requireView().findViewById(R.id.themeChangeLV);\r\n        ArrayAdapter&lt;String&gt; ad = new ArrayAdapter&lt;String&gt;(requireContext(), android.R.layout.simple_list_item_1,themeStrings);\r\n        lv.setAdapter(ad);\r\n        \r\n\r\n        sharedPreferences = requireContext().getSharedPreferences(&quot;MODE&quot;, Context.MODE_PRIVATE);\r\n        nightMODE = sharedPreferences.getBoolean(&quot;night&quot;,false);\r\n\r\n        lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView&lt;?&gt; adapterView, View view, int i, long l) {\r\n                editor = sharedPreferences.edit();\r\n                switch (i){\r\n                    case 0:\r\n                        new Thread(new Runnable() {\r\n                            @Override\r\n                            public void run() {\r\n                                AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO);\r\n                                editor.putBoolean(getString(R.string.night),false);\r\n                                editor.putBoolean(getString(R.string.sdt),false);\r\n                                editor.apply();\r\n                            }\r\n                        }).start();\r\n                        break;\r\n                    case 1:\r\n                        new Thread(new Runnable() {\r\n                            @Override\r\n                            public void run() {\r\n                                AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_YES);\r\n                                editor.putBoolean(getString(R.string.night),true);\r\n                                editor.putBoolean(getString(R.string.sdt),false);\r\n                                editor.apply();\r\n                            }\r\n                        }).start();\r\n                        break;\r\n                    case 2:\r\n                        editor.putBoolean(getString(R.string.sdt),true);\r\n                        editor.apply();\r\n                        break;\r\n                }\r\n            }\r\n        });\r\n    }\r\n```\r\n\r\nThe code above me uses a new thread to change **APP THEME** so that my app doesn&#39;t go BLACK for around half a second.\r\n\r\nAnd it works in an emulator (Android 8.0), but in my phone (Android 11), what happens is on click, the app stops working? \r\n\r\nCan anyone help me this?","title":"Android MultiThreading is working in Android 8.0 but not Android 11","body":"<pre><code>@Override\npublic void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\n\n        super.onViewCreated(view, savedInstanceState);\n        String[] themeStrings = {&quot;Light&quot;,&quot;Dark&quot;,&quot;System Default&quot;};\n        ListView lv = requireView().findViewById(R.id.themeChangeLV);\n        ArrayAdapter&lt;String&gt; ad = new ArrayAdapter&lt;String&gt;(requireContext(), android.R.layout.simple_list_item_1,themeStrings);\n        lv.setAdapter(ad);\n        \n\n        sharedPreferences = requireContext().getSharedPreferences(&quot;MODE&quot;, Context.MODE_PRIVATE);\n        nightMODE = sharedPreferences.getBoolean(&quot;night&quot;,false);\n\n        lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n            @Override\n            public void onItemClick(AdapterView&lt;?&gt; adapterView, View view, int i, long l) {\n                editor = sharedPreferences.edit();\n                switch (i){\n                    case 0:\n                        new Thread(new Runnable() {\n                            @Override\n                            public void run() {\n                                AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO);\n                                editor.putBoolean(getString(R.string.night),false);\n                                editor.putBoolean(getString(R.string.sdt),false);\n                                editor.apply();\n                            }\n                        }).start();\n                        break;\n                    case 1:\n                        new Thread(new Runnable() {\n                            @Override\n                            public void run() {\n                                AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_YES);\n                                editor.putBoolean(getString(R.string.night),true);\n                                editor.putBoolean(getString(R.string.sdt),false);\n                                editor.apply();\n                            }\n                        }).start();\n                        break;\n                    case 2:\n                        editor.putBoolean(getString(R.string.sdt),true);\n                        editor.apply();\n                        break;\n                }\n            }\n        });\n    }\n</code></pre>\n<p>The code above me uses a new thread to change <strong>APP THEME</strong> so that my app doesn't go BLACK for around half a second.</p>\n<p>And it works in an emulator (Android 8.0), but in my phone (Android 11), what happens is on click, the app stops working?</p>\n<p>Can anyone help me this?</p>\n"},{"tags":["java","selenium-webdriver","jenkins"],"comments":[{"owner":{"account_id":4599455,"reputation":2892,"user_id":3730626,"display_name":"M B"},"score":0,"creation_date":1684908194,"post_id":76310731,"comment_id":134584157,"body_markdown":"Your description is not clear. Are the tests in a different job that you are trying to trigger?","body":"Your description is not clear. Are the tests in a different job that you are trying to trigger?"},{"owner":{"account_id":20424491,"reputation":29,"user_id":15100491,"display_name":"sneedster"},"score":0,"creation_date":1684967045,"post_id":76310731,"comment_id":134596664,"body_markdown":"Yes they are. @M B","body":"Yes they are. @M B"},{"owner":{"account_id":4599455,"reputation":2892,"user_id":3730626,"display_name":"M B"},"score":0,"creation_date":1684986853,"post_id":76310731,"comment_id":134598489,"body_markdown":"What does your build trigger look like? Have you specified that the pipeline should wait until the downstream build finishes before continuing?","body":"What does your build trigger look like? Have you specified that the pipeline should wait until the downstream build finishes before continuing?"}],"answers":[{"tags":[],"owner":{"account_id":4599455,"reputation":2892,"user_id":3730626,"display_name":"M B"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684814987,"creation_date":1684814987,"answer_id":76311237,"question_id":76310731,"body_markdown":"You don&#39;t need to go looking for any external libraries or frameworks because Jenkins has an inbuilt `retry` keyword ([doc](https://www.jenkins.io/doc/pipeline/steps/workflow-basic-steps/#retry-retry-the-body-up-to-n-times)).\r\n\r\n```\r\nstage (&#39;selenium-tests&#39;) {\r\n    retry(3) {\r\n        &lt;tests&gt;\r\n    }\r\n}\r\n```\r\n\r\n","title":"Retry mechanism for Selenium Java tests on Jenkins to handle intermittent failures","body":"<p>You don't need to go looking for any external libraries or frameworks because Jenkins has an inbuilt <code>retry</code> keyword (<a href=\"https://www.jenkins.io/doc/pipeline/steps/workflow-basic-steps/#retry-retry-the-body-up-to-n-times\" rel=\"nofollow noreferrer\">doc</a>).</p>\n<pre><code>stage ('selenium-tests') {\n    retry(3) {\n        &lt;tests&gt;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":20424491,"reputation":29,"user_id":15100491,"display_name":"sneedster"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684834591,"creation_date":1684804327,"question_id":76310731,"body_markdown":"I have a set of Selenium Java tests that I run on Jenkins, and I&#39;m experiencing intermittent failures on the Jenkins environment, even though the same tests pass consistently when executed locally. I suspect these failures are caused by factors such as slow remote machines or random timeouts.\r\n\r\nI&#39;ll get reports on an element not appearing, simply due to the website not loading on time, so timeouts are frequent. They don&#39;t happen too often though.\r\n\r\nTo address this issue, I would like to implement a retry mechanism for these tests in order to increase their reliability on Jenkins. Ideally, I would like the tests to automatically retry until they pass, or at most, retry a maximum of three times. It seems that a simple retry often results in a successful execution on the subsequent attempt. Important thing to note that about 80% of the tests pass all the time, but the remaining 20% will fail, randomly, no specific tests.\r\n\r\nIs there a recommended approach or best practice for implementing such a retry mechanism in Selenium Java tests on Jenkins? Are there any libraries, frameworks, or specific techniques that can be leveraged to achieve this goal?\r\n\r\nI would appreciate any insights, suggestions, or code examples that can help me address this intermittent test failure issue on Jenkins. Thank you in advance for your assistance.\r\n\r\nI&#39;m using TestNG.\r\n\r\nEdit:\r\n\r\nI created a new pipeline item that goes as follows:\r\n\r\n```\r\npipeline {\r\n    agent any\r\n    \r\n    stages {\r\n        stage(&#39;Build&#39;) {\r\n            steps {\r\n                sh &#39;ant compile&#39;\r\n            }\r\n        }\r\n        \r\n        stage(&#39;Run Tests&#39;) {\r\n            steps {\r\n                retry(3) {\r\n                    sh &#39;ant runTests&#39;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\nHowever, when I run it, it finishes in 2 seconds, successfully, without actually doing anything. I&#39;m assuming I&#39;m missing some stuff related to the actual repository of my tests, basically, the pipeline has no idea what to run. So, how do I connect my pipeline to the build that&#39;s running my tests?","title":"Retry mechanism for Selenium Java tests on Jenkins to handle intermittent failures","body":"<p>I have a set of Selenium Java tests that I run on Jenkins, and I'm experiencing intermittent failures on the Jenkins environment, even though the same tests pass consistently when executed locally. I suspect these failures are caused by factors such as slow remote machines or random timeouts.</p>\n<p>I'll get reports on an element not appearing, simply due to the website not loading on time, so timeouts are frequent. They don't happen too often though.</p>\n<p>To address this issue, I would like to implement a retry mechanism for these tests in order to increase their reliability on Jenkins. Ideally, I would like the tests to automatically retry until they pass, or at most, retry a maximum of three times. It seems that a simple retry often results in a successful execution on the subsequent attempt. Important thing to note that about 80% of the tests pass all the time, but the remaining 20% will fail, randomly, no specific tests.</p>\n<p>Is there a recommended approach or best practice for implementing such a retry mechanism in Selenium Java tests on Jenkins? Are there any libraries, frameworks, or specific techniques that can be leveraged to achieve this goal?</p>\n<p>I would appreciate any insights, suggestions, or code examples that can help me address this intermittent test failure issue on Jenkins. Thank you in advance for your assistance.</p>\n<p>I'm using TestNG.</p>\n<p>Edit:</p>\n<p>I created a new pipeline item that goes as follows:</p>\n<pre><code>pipeline {\n    agent any\n    \n    stages {\n        stage('Build') {\n            steps {\n                sh 'ant compile'\n            }\n        }\n        \n        stage('Run Tests') {\n            steps {\n                retry(3) {\n                    sh 'ant runTests'\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>However, when I run it, it finishes in 2 seconds, successfully, without actually doing anything. I'm assuming I'm missing some stuff related to the actual repository of my tests, basically, the pipeline has no idea what to run. So, how do I connect my pipeline to the build that's running my tests?</p>\n"},{"tags":["java","spring-boot","spring-boot-actuator","spring-data-redis","jedis"],"owner":{"account_id":16257617,"reputation":690,"user_id":11739905,"display_name":"Lavish"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":303,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1684834290,"creation_date":1684834290,"question_id":76313249,"body_markdown":"I&#39;m working with spring boot actuator - 2.6.6 and spring-boot-starter-data-redis - 2.6.6 along with  jedis client - 3.6.3 and I want to enable JMX monitoring so that the metrics of cache hit and misses can be populated in datadog client. I&#39;m creating connection beans in the following way:\r\n\r\n\r\n```\r\n    @Bean\r\n    public JedisClientConfiguration getJedisClientConfiguration() {\r\n        JedisClientConfiguration.JedisClientConfigurationBuilder builder = JedisClientConfiguration.builder();\r\n        JedisPoolConfig poolConfig = new JedisPoolConfig();\r\n        poolConfig.setJmxEnabled(true);\r\n        poolConfig.setJmxNameBase(&quot;com.example:type=Pools,name=&quot;);\r\n        poolConfig.setJmxNamePrefix(&quot;Redis Connection Pool&quot;);\r\n        poolConfig.setMaxTotal(redisPoolSize);\r\n        return builder.usePooling().poolConfig(poolConfig).build();\r\n    }\r\n\r\n    @Bean(&quot;redisTemplate&quot;)\r\n    public RedisTemplate&lt;?, ?&gt; redisTemplate(RedisConnectionFactory redisConnectionFactory) {\r\n        RedisTemplate&lt;byte[], byte[]&gt; template = new RedisTemplate&lt;byte[], byte[]&gt;();\r\n        template.setConnectionFactory(redisConnectionFactory);\r\n        template.setDefaultSerializer(new GenericJackson2JsonRedisSerializer());\r\n        return template;\r\n    }\r\n    @Bean(&quot;redisCacheManager&quot;)\r\n    public RedisCacheManager cacheManager(RedisConnectionFactory connectionFactory) {\r\n        return RedisCacheManager.builder(connectionFactory)\r\n                .cacheDefaults(RedisCacheConfiguration\r\n                        .defaultCacheConfig()\r\n                        .serializeValuesWith(RedisSerializationContext.SerializationPair.fromSerializer(new GenericJackson2JsonRedisSerializer())))\r\n                .enableStatistics()\r\n                .build();\r\n    }\r\n```\r\nbut when I open localhost:8080/actuator/metrics, I don&#39;t see any metrics available for Redis connection. Can anyone please help here?\r\n\r\nI tried adding @ManagedAttribute on the bean but it doesn&#39;t work. \r\nI tried adding the following in my application.properties\r\n```\r\nmanagement.endpoints.jmx.domain=example-application-domain\r\nspring.jmx.unique-names=true\r\nspring.jmx.enabled=true\r\nmanagement.metrics.export.jmx.enabled=true\r\nmanagement.endpoints.jmx.exposure.include=*\r\nmanagement.endpoints.web.exposure.include=*\r\nmanagement.endpoints.enabled-by-default=true\r\nspring.redis.cache.enable-statistics=true\r\n```\r\nBut this too didn&#39;t help.","title":"Unable to access actuator metrics for spring data redis in springboot","body":"<p>I'm working with spring boot actuator - 2.6.6 and spring-boot-starter-data-redis - 2.6.6 along with  jedis client - 3.6.3 and I want to enable JMX monitoring so that the metrics of cache hit and misses can be populated in datadog client. I'm creating connection beans in the following way:</p>\n<pre><code>    @Bean\n    public JedisClientConfiguration getJedisClientConfiguration() {\n        JedisClientConfiguration.JedisClientConfigurationBuilder builder = JedisClientConfiguration.builder();\n        JedisPoolConfig poolConfig = new JedisPoolConfig();\n        poolConfig.setJmxEnabled(true);\n        poolConfig.setJmxNameBase(&quot;com.example:type=Pools,name=&quot;);\n        poolConfig.setJmxNamePrefix(&quot;Redis Connection Pool&quot;);\n        poolConfig.setMaxTotal(redisPoolSize);\n        return builder.usePooling().poolConfig(poolConfig).build();\n    }\n\n    @Bean(&quot;redisTemplate&quot;)\n    public RedisTemplate&lt;?, ?&gt; redisTemplate(RedisConnectionFactory redisConnectionFactory) {\n        RedisTemplate&lt;byte[], byte[]&gt; template = new RedisTemplate&lt;byte[], byte[]&gt;();\n        template.setConnectionFactory(redisConnectionFactory);\n        template.setDefaultSerializer(new GenericJackson2JsonRedisSerializer());\n        return template;\n    }\n    @Bean(&quot;redisCacheManager&quot;)\n    public RedisCacheManager cacheManager(RedisConnectionFactory connectionFactory) {\n        return RedisCacheManager.builder(connectionFactory)\n                .cacheDefaults(RedisCacheConfiguration\n                        .defaultCacheConfig()\n                        .serializeValuesWith(RedisSerializationContext.SerializationPair.fromSerializer(new GenericJackson2JsonRedisSerializer())))\n                .enableStatistics()\n                .build();\n    }\n</code></pre>\n<p>but when I open localhost:8080/actuator/metrics, I don't see any metrics available for Redis connection. Can anyone please help here?</p>\n<p>I tried adding @ManagedAttribute on the bean but it doesn't work.\nI tried adding the following in my application.properties</p>\n<pre><code>management.endpoints.jmx.domain=example-application-domain\nspring.jmx.unique-names=true\nspring.jmx.enabled=true\nmanagement.metrics.export.jmx.enabled=true\nmanagement.endpoints.jmx.exposure.include=*\nmanagement.endpoints.web.exposure.include=*\nmanagement.endpoints.enabled-by-default=true\nspring.redis.cache.enable-statistics=true\n</code></pre>\n<p>But this too didn't help.</p>\n"},{"tags":["java","spring","spring-security"],"comments":[{"owner":{"account_id":1612518,"reputation":797,"user_id":1491081,"display_name":"sarath"},"score":0,"creation_date":1626778812,"post_id":68453338,"comment_id":120978862,"body_markdown":"Do you have a custom AuthenticationProvider? SO that way you can Override public Authentication authenticate(Authentication authentication) and would be able to get username by String userName = authentication.getName(); and password by String password = authentication.getCredentials().toString();","body":"Do you have a custom AuthenticationProvider? SO that way you can Override public Authentication authenticate(Authentication authentication) and would be able to get username by String userName = authentication.getName(); and password by String password = authentication.getCredentials().toString();"},{"owner":{"account_id":15841746,"reputation":6011,"user_id":11430047,"display_name":"Eleftheria Stein-Kousathana"},"score":5,"creation_date":1626779040,"post_id":68453338,"comment_id":120978925,"body_markdown":"Please be aware that storing the passwords in that way is no longer secure. You can learn more about why, as well as a better approach in the Spring Security [reference documentation](https://docs.spring.io/spring-security/site/docs/current/reference/html5/#authentication-password-storage-history).","body":"Please be aware that storing the passwords in that way is no longer secure. You can learn more about why, as well as a better approach in the Spring Security <a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/html5/#authentication-password-storage-history\" rel=\"nofollow noreferrer\">reference documentation</a>."}],"answers":[{"tags":[],"owner":{"account_id":1140175,"reputation":41,"user_id":1124315,"display_name":"user1124315"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662203960,"creation_date":1662203960,"answer_id":73591828,"question_id":68453338,"body_markdown":"A clever trick to solve this is to load the user first in your `/authenticate` method\r\n\r\nencrypt the password into the form it was stored in the database and then use a `NoOpPasswordEncoder` to compare.\r\n\r\n----\r\nEnsure you include the salt with your own `CustomUserDetails` impl\r\n\r\n----\r\nWithin your `/authenticate` method\r\nCall\r\n\r\n`final  CustomUserDetails userDetails = (CustomUserDetails) userDetailsService.loadUserByUsername(auth.getUsername());`\r\n\r\n---\r\nExtract your salt and then create an encoded password from the normal password the user provided\r\n\r\n`String encodedPassword = encode(auth.getPassword, userDetails.getSalt());`\r\n\r\n----\r\nthen pass the encodedPassword to the authenticate method\r\n\r\n`authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(username, encodedPassword ));`","title":"Spring Security how to get username from PasswordEncoder?","body":"<p>A clever trick to solve this is to load the user first in your <code>/authenticate</code> method</p>\n<p>encrypt the password into the form it was stored in the database and then use a <code>NoOpPasswordEncoder</code> to compare.</p>\n<hr />\n<p>Ensure you include the salt with your own <code>CustomUserDetails</code> impl</p>\n<hr />\n<p>Within your <code>/authenticate</code> method\nCall</p>\n<p><code>final  CustomUserDetails userDetails = (CustomUserDetails) userDetailsService.loadUserByUsername(auth.getUsername());</code></p>\n<hr />\n<p>Extract your salt and then create an encoded password from the normal password the user provided</p>\n<p><code>String encodedPassword = encode(auth.getPassword, userDetails.getSalt());</code></p>\n<hr />\n<p>then pass the encodedPassword to the authenticate method</p>\n<p><code>authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(username, encodedPassword ));</code></p>\n"},{"tags":[],"owner":{"account_id":28657265,"reputation":21,"user_id":21942966,"display_name":"Ivan JDev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684834197,"creation_date":1684786521,"answer_id":76309599,"question_id":68453338,"body_markdown":"I had a similar requirement and solved this problem by using Java thread local variables. Probably it looks ugly but I did not have much time back then and it worked for me. This is my thread local declaration\r\n\r\n        public class MySecurityContext {\r\n        private static final ThreadLocal&lt;String&gt; usernameTL = new ThreadLocal&lt;&gt;();\r\n\r\n        public static void setUsername(String username) {\r\n            usernameTL.set(username);\r\n        }\r\n\r\n        public static String getUsername() {\r\n            return usernameTL.get();\r\n        }\r\n\r\n        public static void clear() {\r\n            usernameTL.remove();\r\n        }\r\n}\r\n\r\nThen I define my UserDetailsService bean where I have the username and can place it in the thread local variable\r\n\r\n        @Bean\r\n    public UserDetailsService userDetailsService(UserRepository userRepository){\r\n        return username -&gt; {\r\n            User user = userRepository.findUserByUsername(username);\r\n            if (user != null) {\r\n                MySecurityContext.setUsername(user.getUsername());\r\n                return user;\r\n            }\r\n            throw new UsernameNotFoundException(&quot;User &#39;&quot; + username + &quot;&#39; not found&quot;);\r\n        };\r\n    }\r\n\r\nAnd finally I have my custom password encoder where I extract the thread variable value\r\n\r\n    public class DatabasePasswordEncoder implements PasswordEncoder {\r\n    private JdbcTemplate jdbcTemplate;\r\n    private String salt;\r\n\r\n    public DatabasePasswordEncoder(JdbcTemplate jdbcTemplate, String salt){\r\n        this.jdbcTemplate = jdbcTemplate;\r\n        this.salt = salt;\r\n    }\r\n\r\n    @Override\r\n    public String encode(CharSequence rawPassword) {\r\n        String username = MySecurityContext.getUsername();\r\n        String passwordString = username + salt + rawPassword.toString();\r\n        MySecurityContext.clear();\r\n\r\n","title":"Spring Security how to get username from PasswordEncoder?","body":"<p>I had a similar requirement and solved this problem by using Java thread local variables. Probably it looks ugly but I did not have much time back then and it worked for me. This is my thread local declaration</p>\n<pre><code>    public class MySecurityContext {\n    private static final ThreadLocal&lt;String&gt; usernameTL = new ThreadLocal&lt;&gt;();\n\n    public static void setUsername(String username) {\n        usernameTL.set(username);\n    }\n\n    public static String getUsername() {\n        return usernameTL.get();\n    }\n\n    public static void clear() {\n        usernameTL.remove();\n    }\n</code></pre>\n<p>}</p>\n<p>Then I define my UserDetailsService bean where I have the username and can place it in the thread local variable</p>\n<pre><code>    @Bean\npublic UserDetailsService userDetailsService(UserRepository userRepository){\n    return username -&gt; {\n        User user = userRepository.findUserByUsername(username);\n        if (user != null) {\n            MySecurityContext.setUsername(user.getUsername());\n            return user;\n        }\n        throw new UsernameNotFoundException(&quot;User '&quot; + username + &quot;' not found&quot;);\n    };\n}\n</code></pre>\n<p>And finally I have my custom password encoder where I extract the thread variable value</p>\n<pre><code>public class DatabasePasswordEncoder implements PasswordEncoder {\nprivate JdbcTemplate jdbcTemplate;\nprivate String salt;\n\npublic DatabasePasswordEncoder(JdbcTemplate jdbcTemplate, String salt){\n    this.jdbcTemplate = jdbcTemplate;\n    this.salt = salt;\n}\n\n@Override\npublic String encode(CharSequence rawPassword) {\n    String username = MySecurityContext.getUsername();\n    String passwordString = username + salt + rawPassword.toString();\n    MySecurityContext.clear();\n</code></pre>\n"}],"owner":{"account_id":10416430,"reputation":353,"user_id":11993600,"display_name":"SorryForAsking"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":589,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1684834197,"creation_date":1626776876,"question_id":68453338,"body_markdown":"When adding a new user, I save his password in the database, in the form of SHA256 (cleartext_password + salt). The salt value  I save next to it in a separate column for each user. Accordingly, the password check should be performed as follows: we extract the password cleartext from the BasicAuth header, get the salt value for this user from the database, execute SHA256 (cleartext_password + salt) and check that the resulting string and the passwored stored in the database matches. In order to implement this, I to create a custom PasswordEncoder which will perform verification, but I can&#39;t access username from PasswordEncoder. I need username to get salt for this user and execute verifcation. How can I get out of this situation?\r\n\r\nHere&#39;s the current implementation of Security:\r\n\r\n    @Configuration\r\n    public class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n        private final UserDetailsService customUserDetailsService;\r\n    \r\n        public SecurityConfig(UserDetailsService customUserDetailsService) {\r\n            this.customUserDetailsService = customUserDetailsService;\r\n        }\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http\r\n                    .csrf().disable()\r\n                    .authorizeRequests()\r\n                    .requestMatchers(EndpointRequest.toAnyEndpoint()).permitAll()\r\n                    .anyRequest().authenticated()\r\n                    .and().httpBasic();\r\n        }\r\n    \r\n        @Override\r\n        protected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n            auth.userDetailsService(customUserDetailsService)\r\n            .passwordEncoder(new CustomPasswordEncoder());\r\n        }\r\n    \r\n    }\r\n    \r\n    @Component\r\n    public class CustomUserDetailsService implements UserDetailsService {\r\n        private final UserRepository userRepository;\r\n    \r\n        public CustomUserDetailsService(UserRepository userRepository) {\r\n            this.userRepository = userRepository;\r\n        }\r\n    \r\n        @Override\r\n        public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n            User user = userRepository.findByUserName(username);\r\n            if (user != null) {\r\n                return org.springframework.security.core.userdetails.\r\n                        User.withUsername(username)\r\n                        .password(new CustomPasswordEncoder().encode(user.getPassword()))\r\n                        .roles(&quot;USER&quot;)\r\n                        .build();\r\n            }\r\n            throw new IllegalArgumentException();\r\n        }\r\n    }\r\n    \r\n    public class CustomPasswordEncoder implements PasswordEncoder {\r\n    \r\n        @Override\r\n        public String encode(CharSequence rawPassword) {\r\n            return rawPassword.toString();\r\n        }\r\n    \r\n        @Override\r\n        public boolean matches(CharSequence rawPassword, String encodedPassword) {\r\n            String sha256hex = DigestUtils.sha256Hex(rawPassword.toString()); // Here should be DigestUtils.sha256Hex(rawPassword.toString() + salt)\r\n            return sha256hex.equals(encodedPassword);\r\n        }\r\n    \r\n    }","title":"Spring Security how to get username from PasswordEncoder?","body":"<p>When adding a new user, I save his password in the database, in the form of SHA256 (cleartext_password + salt). The salt value  I save next to it in a separate column for each user. Accordingly, the password check should be performed as follows: we extract the password cleartext from the BasicAuth header, get the salt value for this user from the database, execute SHA256 (cleartext_password + salt) and check that the resulting string and the passwored stored in the database matches. In order to implement this, I to create a custom PasswordEncoder which will perform verification, but I can't access username from PasswordEncoder. I need username to get salt for this user and execute verifcation. How can I get out of this situation?</p>\n<p>Here's the current implementation of Security:</p>\n<pre><code>@Configuration\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n    private final UserDetailsService customUserDetailsService;\n\n    public SecurityConfig(UserDetailsService customUserDetailsService) {\n        this.customUserDetailsService = customUserDetailsService;\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n                .csrf().disable()\n                .authorizeRequests()\n                .requestMatchers(EndpointRequest.toAnyEndpoint()).permitAll()\n                .anyRequest().authenticated()\n                .and().httpBasic();\n    }\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth.userDetailsService(customUserDetailsService)\n        .passwordEncoder(new CustomPasswordEncoder());\n    }\n\n}\n\n@Component\npublic class CustomUserDetailsService implements UserDetailsService {\n    private final UserRepository userRepository;\n\n    public CustomUserDetailsService(UserRepository userRepository) {\n        this.userRepository = userRepository;\n    }\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        User user = userRepository.findByUserName(username);\n        if (user != null) {\n            return org.springframework.security.core.userdetails.\n                    User.withUsername(username)\n                    .password(new CustomPasswordEncoder().encode(user.getPassword()))\n                    .roles(&quot;USER&quot;)\n                    .build();\n        }\n        throw new IllegalArgumentException();\n    }\n}\n\npublic class CustomPasswordEncoder implements PasswordEncoder {\n\n    @Override\n    public String encode(CharSequence rawPassword) {\n        return rawPassword.toString();\n    }\n\n    @Override\n    public boolean matches(CharSequence rawPassword, String encodedPassword) {\n        String sha256hex = DigestUtils.sha256Hex(rawPassword.toString()); // Here should be DigestUtils.sha256Hex(rawPassword.toString() + salt)\n        return sha256hex.equals(encodedPassword);\n    }\n\n}\n</code></pre>\n"},{"tags":["java","android","kotlin","android-13"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1684754477,"post_id":76305189,"comment_id":134558185,"body_markdown":"Show your code. Tell what not works. It can work on SDK 33 too using the right public directory.","body":"Show your code. Tell what not works. It can work on SDK 33 too using the right public directory."},{"owner":{"account_id":24659405,"reputation":67,"user_id":18555779,"display_name":"WilliamVietnam"},"score":0,"creation_date":1684807005,"post_id":76305189,"comment_id":134567326,"body_markdown":"@blackapps I followed to this source code https://github.com/Truiton/ScreenCapture","body":"@blackapps I followed to this source code <a href=\"https://github.com/Truiton/ScreenCapture\" rel=\"nofollow noreferrer\">github.com/Truiton/ScreenCapture</a>"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1684815531,"post_id":76305189,"comment_id":134568017,"body_markdown":"Much too much code. All irrelevant. To demonstrate that you cannot create a file five code lines would be enough.","body":"Much too much code. All irrelevant. To demonstrate that you cannot create a file five code lines would be enough."},{"owner":{"account_id":24659405,"reputation":67,"user_id":18555779,"display_name":"WilliamVietnam"},"score":0,"creation_date":1684817125,"post_id":76305189,"comment_id":134568183,"body_markdown":"@blackapps I mean, I&#39;m in need of screen recording. And I did exactly the same code in this repository https://github.com/Truiton/ScreenCapture. And currently it only works on API 29 and below. As for API 29 and above, it doesn&#39;t work.","body":"@blackapps I mean, I&#39;m in need of screen recording. And I did exactly the same code in this repository <a href=\"https://github.com/Truiton/ScreenCapture\" rel=\"nofollow noreferrer\">github.com/Truiton/ScreenCapture</a>. And currently it only works on API 29 and below. As for API 29 and above, it doesn&#39;t work."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1684817260,"post_id":76305189,"comment_id":134568206,"body_markdown":"It does not work becouse you cannot store a file. So only five code lines please to demonstrate that you cannot create a file. Come to the point.","body":"It does not work becouse you cannot store a file. So only five code lines please to demonstrate that you cannot create a file. Come to the point."},{"owner":{"account_id":24659405,"reputation":67,"user_id":18555779,"display_name":"WilliamVietnam"},"score":0,"creation_date":1684817357,"post_id":76305189,"comment_id":134568219,"body_markdown":"I checked and found that WRITE_EXTERNAL_STORAGE was not granted. So I&#39;m looking forward to getting people to come up with a solution. Or the steps to solve my above problem. @blackapps","body":"I checked and found that WRITE_EXTERNAL_STORAGE was not granted. So I&#39;m looking forward to getting people to come up with a solution. Or the steps to solve my above problem. @blackapps"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1684833834,"post_id":76305189,"comment_id":134571336,"body_markdown":"On an Android sdk 33 device you will not ask for write exteral storage permission to begin with.","body":"On an Android sdk 33 device you will not ask for write exteral storage permission to begin with."}],"answers":[{"tags":[],"owner":{"account_id":25155166,"reputation":864,"user_id":19000086,"display_name":"zaid khan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1684752949,"creation_date":1684752949,"answer_id":76305455,"question_id":76305189,"body_markdown":"From Api level 29 accessing external storage has been restricted in order to improve user privacy and security so if your app is working with api level 32 then I am guessing that you have added the storage permissions in manifest and also requested them at the runtime.\r\n\r\nI have code snippet in my app that does the same function that you want .\r\n\r\n```\r\nval intent = Intent(Intent.ACTION_CREATE_DOCUMENT).apply {\r\n    addCategory(Intent.CATEGORY_OPENABLE)\r\n    type = &quot;video/mp4&quot;\r\n    putExtra(Intent.EXTRA_TITLE, &quot;my_video.mp4&quot;)\r\n}\r\n\r\nstartActivityForResult(intent, CREATE_DOCUMENT_REQUEST_CODE)\r\n```\r\nintent with the action ACTION_CREATE_DOCUMENT to create a new document.Specify the category CATEGORY_OPENABLE to allow the user to choose a location. The type specifies the MIME type of the file. In this case, we use &quot;video/mp4&quot;. The putExtra method is used to specify the default file name.\r\n\r\n```\r\noverride fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\r\n    super.onActivityResult(requestCode, resultCode, data)\r\n\r\n    if (requestCode == CREATE_DOCUMENT_REQUEST_CODE &amp;&amp; resultCode == Activity.RESULT_OK) {\r\n        val uri: Uri? = data?.data\r\n        if (uri != null) {\r\n            // Save the video file to the chosen location\r\n            saveVideoToUri(uri)\r\n        }\r\n    }\r\n}\r\n``` \r\nThe result is RESULT_OK. If so, we retrieve the Uri of the chosen location and pass it to the saveVideoToUri function.\r\n\r\n``` \r\nfun saveVideoToUri(uri: Uri,context:Context) {\r\n    try {\r\n        context.contentResolver.openOutputStream(uri)?.use { outputStream -&gt;\r\n            // Write the video data to the output stream\r\n            outputStream.write(videoData)\r\n        }\r\n    } catch (e: IOException) {\r\n        e.printStackTrace()\r\n    }\r\n}\r\n```\r\n\r\n","title":"How to save file to storage (android 13 - API33)","body":"<p>From Api level 29 accessing external storage has been restricted in order to improve user privacy and security so if your app is working with api level 32 then I am guessing that you have added the storage permissions in manifest and also requested them at the runtime.</p>\n<p>I have code snippet in my app that does the same function that you want .</p>\n<pre><code>val intent = Intent(Intent.ACTION_CREATE_DOCUMENT).apply {\n    addCategory(Intent.CATEGORY_OPENABLE)\n    type = &quot;video/mp4&quot;\n    putExtra(Intent.EXTRA_TITLE, &quot;my_video.mp4&quot;)\n}\n\nstartActivityForResult(intent, CREATE_DOCUMENT_REQUEST_CODE)\n</code></pre>\n<p>intent with the action ACTION_CREATE_DOCUMENT to create a new document.Specify the category CATEGORY_OPENABLE to allow the user to choose a location. The type specifies the MIME type of the file. In this case, we use &quot;video/mp4&quot;. The putExtra method is used to specify the default file name.</p>\n<pre><code>override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n    super.onActivityResult(requestCode, resultCode, data)\n\n    if (requestCode == CREATE_DOCUMENT_REQUEST_CODE &amp;&amp; resultCode == Activity.RESULT_OK) {\n        val uri: Uri? = data?.data\n        if (uri != null) {\n            // Save the video file to the chosen location\n            saveVideoToUri(uri)\n        }\n    }\n}\n</code></pre>\n<p>The result is RESULT_OK. If so, we retrieve the Uri of the chosen location and pass it to the saveVideoToUri function.</p>\n<pre><code>fun saveVideoToUri(uri: Uri,context:Context) {\n    try {\n        context.contentResolver.openOutputStream(uri)?.use { outputStream -&gt;\n            // Write the video data to the output stream\n            outputStream.write(videoData)\n        }\n    } catch (e: IOException) {\n        e.printStackTrace()\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22264521,"reputation":329,"user_id":20837030,"display_name":"jcredking"},"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1684752957,"creation_date":1684752957,"answer_id":76305457,"question_id":76305189,"body_markdown":"1. You need these two permissions in your manifest and ask the user for permissions programmatically \r\n\r\n       &lt;uses-permission android:name=&quot;android.permission.READ_MEDIA_VIDEO&quot; /&gt;\r\n       &lt;uses-permission android:name=&quot;android.permission.READ_MEDIA_IMAGES&quot; /&gt;\r\n2. In Android R+ you can not access storage without `MANAGE_EXTERNAL_STORAGE` [see documentation here][1] but you can access **shared storage** Like `Downloads` and your app folder.\r\n\r\n3. now you can create your folder directory using the below code \r\n\r\n        fun createAppDirectoryInDownloads(context: Context): File? {\r\n            val downloadsDirectory = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS)\r\n            val appDirectory = File(downloadsDirectory, &quot;YourAppDirectoryName&quot;)\r\n\r\n            if (!appDirectory.exists()) {\r\n                val directoryCreated = appDirectory.mkdir()\r\n                if (!directoryCreated) {\r\n                    // Failed to create the directory\r\n                    return null\r\n                }\r\n            }\r\n\r\n            return appDirectory\r\n        }\r\n4. now create your video file in your directory using below code\r\n\r\n        companion object {\r\n        @JvmStatic\r\n        fun createFileInAppDirectory(context: Context, fileName: String): File? {\r\n            val appDirectory = createAppDirectoryInDownloads(context)\r\n            if (appDirectory != null) {\r\n                val file = File(appDirectory, fileName)\r\n                try {\r\n                    if (!file.exists()) {\r\n                        val fileCreated = file.createNewFile()\r\n                        if (!fileCreated) {\r\n                            // Failed to create the file\r\n                            return null\r\n                        }\r\n                    }\r\n                    return file\r\n                } catch (e: IOException) {\r\n                    e.printStackTrace()\r\n                }\r\n            }\r\n            return null\r\n        }\r\n\r\n It&#39;s Working For me,I just hope your problem solve with this.\r\n\r\n  [1]: https://developer.android.com/training/data-storage/manage-all-files","title":"How to save file to storage (android 13 - API33)","body":"<ol>\n<li><p>You need these two permissions in your manifest and ask the user for permissions programmatically</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.READ_MEDIA_VIDEO&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.READ_MEDIA_IMAGES&quot; /&gt;\n</code></pre>\n</li>\n<li><p>In Android R+ you can not access storage without <code>MANAGE_EXTERNAL_STORAGE</code> <a href=\"https://developer.android.com/training/data-storage/manage-all-files\" rel=\"nofollow noreferrer\">see documentation here</a> but you can access <strong>shared storage</strong> Like <code>Downloads</code> and your app folder.</p>\n</li>\n<li><p>now you can create your folder directory using the below code</p>\n<pre><code> fun createAppDirectoryInDownloads(context: Context): File? {\n     val downloadsDirectory = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS)\n     val appDirectory = File(downloadsDirectory, &quot;YourAppDirectoryName&quot;)\n\n     if (!appDirectory.exists()) {\n         val directoryCreated = appDirectory.mkdir()\n         if (!directoryCreated) {\n             // Failed to create the directory\n             return null\n         }\n     }\n\n     return appDirectory\n }\n</code></pre>\n</li>\n<li><p>now create your video file in your directory using below code</p>\n<pre><code> companion object {\n @JvmStatic\n fun createFileInAppDirectory(context: Context, fileName: String): File? {\n     val appDirectory = createAppDirectoryInDownloads(context)\n     if (appDirectory != null) {\n         val file = File(appDirectory, fileName)\n         try {\n             if (!file.exists()) {\n                 val fileCreated = file.createNewFile()\n                 if (!fileCreated) {\n                     // Failed to create the file\n                     return null\n                 }\n             }\n             return file\n         } catch (e: IOException) {\n             e.printStackTrace()\n         }\n     }\n     return null\n }\n</code></pre>\n</li>\n</ol>\n<p>It's Working For me,I just hope your problem solve with this.</p>\n"},{"tags":[],"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684833929,"creation_date":1684833929,"answer_id":76313191,"question_id":76305189,"body_markdown":"On an Android sdk 33 device you will not ask for write exteral storage permission to begin with.\r\n\r\nYou have write permission by default to all public directories on external storage.","title":"How to save file to storage (android 13 - API33)","body":"<p>On an Android sdk 33 device you will not ask for write exteral storage permission to begin with.</p>\n<p>You have write permission by default to all public directories on external storage.</p>\n"}],"owner":{"account_id":24659405,"reputation":67,"user_id":18555779,"display_name":"WilliamVietnam"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6320,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":76305457,"answer_count":3,"score":3,"last_activity_date":1684833929,"creation_date":1684750912,"question_id":76305189,"body_markdown":"I&#39;m doing screen recording function for my app. So, I need save video mp4 files to external storage. My function active on API 29 and below, but not working on API 32 and above. Please show me steps to resolve this problem.\r\n\r\nI followed to this source code: https://github.com/Truiton/ScreenCapture\r\n\r\nMainActivity.kt\r\n\r\n    class MainActivity : AppCompatActivity() {\r\n    private var mScreenDensity = 0\r\n    private var mProjectionManager: MediaProjectionManager? = null\r\n    private var mMediaProjection: MediaProjection? = null\r\n    private var mVirtualDisplay: VirtualDisplay? = null\r\n    private var mMediaProjectionCallback: MediaProjectionCallback? = null\r\n    private var mMediaRecorder: MediaRecorder? = null\r\n    private lateinit var binding: ActivityMainBinding\r\n    public override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        binding = ActivityMainBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n        val metrics = DisplayMetrics()\r\n        windowManager.defaultDisplay.getMetrics(metrics)\r\n        mScreenDensity = metrics.densityDpi\r\n        mMediaRecorder = MediaRecorder()\r\n        mProjectionManager = getSystemService(MEDIA_PROJECTION_SERVICE) as MediaProjectionManager\r\n        binding.toggle.setOnClickListener { v: View? -&gt;\r\n            if ((ContextCompat.checkSelfPermission(\r\n                    this@MainActivity,\r\n                    Manifest.permission.WRITE_EXTERNAL_STORAGE\r\n                ) + ContextCompat\r\n                    .checkSelfPermission(\r\n                        this@MainActivity,\r\n                        Manifest.permission.RECORD_AUDIO\r\n                    ) + ContextCompat.checkSelfPermission(\r\n                    this@MainActivity,\r\n                    MANAGE_EXTERNAL_STORAGE\r\n                ))\r\n                != PackageManager.PERMISSION_GRANTED\r\n            ) {\r\n                if (ActivityCompat.shouldShowRequestPermissionRationale(\r\n                        this@MainActivity,\r\n                        Manifest.permission.WRITE_EXTERNAL_STORAGE\r\n                    ) ||\r\n                    ActivityCompat.shouldShowRequestPermissionRationale(\r\n                        this@MainActivity,\r\n                        Manifest.permission.RECORD_AUDIO\r\n                    ) || ActivityCompat.shouldShowRequestPermissionRationale(\r\n                        this@MainActivity,\r\n                        MANAGE_EXTERNAL_STORAGE\r\n                    )\r\n                ) {\r\n                    binding.toggle.isChecked = false\r\n                    Snackbar.make(\r\n                        findViewById(android.R.id.content), R.string.label_permissions,\r\n                        Snackbar.LENGTH_INDEFINITE\r\n                    ).setAction(&quot;ENABLE&quot;,\r\n                        View.OnClickListener { v1: View? -&gt;\r\n                            ActivityCompat.requestPermissions(\r\n                                this@MainActivity,\r\n                                arrayOf(\r\n                                    Manifest.permission.WRITE_EXTERNAL_STORAGE,\r\n                                    Manifest.permission.RECORD_AUDIO,\r\n                                    MANAGE_EXTERNAL_STORAGE\r\n                                ),\r\n                                REQUEST_PERMISSIONS\r\n                            )\r\n                        }).show()\r\n                } else {\r\n                    ActivityCompat.requestPermissions(\r\n                        this@MainActivity,\r\n                        arrayOf(\r\n                            Manifest.permission.WRITE_EXTERNAL_STORAGE,\r\n                            Manifest.permission.RECORD_AUDIO,\r\n                            MANAGE_EXTERNAL_STORAGE\r\n                        ),\r\n                        REQUEST_PERMISSIONS\r\n                    )\r\n                }\r\n            } else {\r\n                onToggleScreenShare(v)\r\n            }\r\n        }\r\n    }\r\n\r\n    public override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\r\n        super.onActivityResult(requestCode, resultCode, data)\r\n        if (requestCode != REQUEST_CODE) {\r\n            Log.e(TAG, &quot;Unknown request code: $requestCode&quot;)\r\n            return\r\n        }\r\n        if (resultCode != RESULT_OK) {\r\n            Toast.makeText(\r\n                this,\r\n                &quot;Screen Cast Permission Denied&quot;, Toast.LENGTH_SHORT\r\n            ).show()\r\n            binding.toggle.isChecked = false\r\n            return\r\n        }\r\n        mMediaProjectionCallback = MediaProjectionCallback()\r\n        mMediaProjection = mProjectionManager!!.getMediaProjection(resultCode, data!!)\r\n        mMediaProjection?.registerCallback(mMediaProjectionCallback, null)\r\n        mVirtualDisplay = createVirtualDisplay()\r\n        mMediaRecorder!!.start()\r\n    }\r\n\r\n    fun onToggleScreenShare(view: View?) {\r\n        if ((view as ToggleButton?)!!.isChecked) {\r\n            initRecorder()\r\n            shareScreen()\r\n        } else {\r\n            mMediaRecorder!!.stop()\r\n            mMediaRecorder!!.reset()\r\n            Log.v(TAG, &quot;Stopping Recording&quot;)\r\n            stopScreenSharing()\r\n        }\r\n    }\r\n\r\n    private fun shareScreen() {\r\n        if (mMediaProjection == null) {\r\n            startActivityForResult(mProjectionManager!!.createScreenCaptureIntent(), REQUEST_CODE)\r\n            return\r\n        }\r\n        mVirtualDisplay = createVirtualDisplay()\r\n        mMediaRecorder!!.start()\r\n    }\r\n\r\n    private fun createVirtualDisplay(): VirtualDisplay {\r\n        return mMediaProjection!!.createVirtualDisplay(\r\n            &quot;MainActivity&quot;,\r\n            DISPLAY_WIDTH, DISPLAY_HEIGHT, mScreenDensity,\r\n            DisplayManager.VIRTUAL_DISPLAY_FLAG_AUTO_MIRROR,\r\n            mMediaRecorder!!.surface, null /*Callbacks*/, null /*Handler*/\r\n        )\r\n    }\r\n\r\n    @SuppressLint(&quot;SimpleDateFormat&quot;)\r\n    private fun initRecorder() {\r\n        try {\r\n            mMediaRecorder!!.setAudioSource(MediaRecorder.AudioSource.MIC)\r\n            mMediaRecorder!!.setVideoSource(MediaRecorder.VideoSource.SURFACE)\r\n            mMediaRecorder!!.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP)\r\n            mMediaRecorder!!.setOutputFile(\r\n                Environment\r\n                    .getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS)\r\n                    .toString() + &quot;/&quot; + &quot;Prank_Record_&quot; + SimpleDateFormat(&quot;dd-MM-yyyy-hh_mm_ss&quot;).format(\r\n                    Date()\r\n                ) + &quot;.mp4&quot;\r\n            )\r\n            mMediaRecorder!!.setVideoSize(DISPLAY_WIDTH, DISPLAY_HEIGHT)\r\n            mMediaRecorder!!.setVideoEncoder(MediaRecorder.VideoEncoder.H264)\r\n            mMediaRecorder!!.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB)\r\n            mMediaRecorder!!.setVideoEncodingBitRate(512 * 1000)\r\n            mMediaRecorder!!.setVideoFrameRate(30)\r\n            val rotation = windowManager.defaultDisplay.rotation\r\n            val orientation = ORIENTATIONS[rotation + 90]\r\n            mMediaRecorder!!.setOrientationHint(orientation)\r\n            mMediaRecorder!!.prepare()\r\n        } catch (e: IOException) {\r\n            e.printStackTrace()\r\n        }\r\n    }\r\n\r\n    private inner class MediaProjectionCallback : MediaProjection.Callback() {\r\n        override fun onStop() {\r\n            if (binding.toggle.isChecked) {\r\n                binding.toggle.isChecked = false\r\n                mMediaRecorder!!.stop()\r\n                mMediaRecorder!!.reset()\r\n                Log.v(TAG, &quot;Recording Stopped&quot;)\r\n            }\r\n            mMediaProjection = null\r\n            stopScreenSharing()\r\n        }\r\n    }\r\n\r\n    private fun stopScreenSharing() {\r\n        if (mVirtualDisplay == null) {\r\n            return\r\n        }\r\n        mVirtualDisplay!!.release()\r\n        //mMediaRecorder.release(); //If used: mMediaRecorder object cannot\r\n        // be reused again\r\n        destroyMediaProjection()\r\n    }\r\n\r\n    public override fun onDestroy() {\r\n        super.onDestroy()\r\n        destroyMediaProjection()\r\n    }\r\n\r\n    private fun destroyMediaProjection() {\r\n        if (mMediaProjection != null) {\r\n            mMediaProjection!!.unregisterCallback(mMediaProjectionCallback)\r\n            mMediaProjection!!.stop()\r\n            mMediaProjection = null\r\n        }\r\n        Log.i(TAG, &quot;MediaProjection Stopped&quot;)\r\n    }\r\n\r\n    @RequiresApi(Build.VERSION_CODES.R)\r\n    override fun onRequestPermissionsResult(\r\n        requestCode: Int,\r\n        permissions: Array&lt;String&gt;,\r\n        grantResults: IntArray\r\n    ) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults)\r\n        when (requestCode) {\r\n            REQUEST_PERMISSIONS -&gt; {\r\n                if (true) {\r\n                    onToggleScreenShare(binding.toggle)\r\n                } else {\r\n                    binding.toggle.isChecked = false\r\n                    Snackbar.make(\r\n                        findViewById(android.R.id.content), R.string.label_permissions,\r\n                        Snackbar.LENGTH_INDEFINITE\r\n                    ).setAction(&quot;ENABLE&quot;,\r\n                        View.OnClickListener {\r\n                            val intent = Intent()\r\n                            intent.action = Settings.ACTION_MANAGE_APP_ALL_FILES_ACCESS_PERMISSION\r\n                            intent.addCategory(Intent.CATEGORY_DEFAULT)\r\n                            intent.data = Uri.parse(&quot;package:$packageName&quot;)\r\n                            intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)\r\n                            intent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY)\r\n                            intent.addFlags(Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS)\r\n                            startActivity(intent)\r\n                        }).show()\r\n                }\r\n                return\r\n            }\r\n        }\r\n    }\r\n\r\n    companion object {\r\n        private const val TAG = &quot;MainActivity&quot;\r\n        private const val REQUEST_CODE = 1000\r\n        private const val DISPLAY_WIDTH = 720\r\n        private const val DISPLAY_HEIGHT = 1280\r\n        private val ORIENTATIONS = SparseIntArray()\r\n        private const val REQUEST_PERMISSIONS = 10\r\n\r\n        init {\r\n            ORIENTATIONS.append(Surface.ROTATION_0, 90)\r\n            ORIENTATIONS.append(Surface.ROTATION_90, 0)\r\n            ORIENTATIONS.append(Surface.ROTATION_180, 270)\r\n            ORIENTATIONS.append(Surface.ROTATION_270, 180)\r\n        }\r\n    }\r\n}\r\n\r\n\r\nAndroidManifest.xml\r\n\r\n     &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot;\r\n        tools:ignore=&quot;ScopedStorage&quot; /&gt;\r\n\r\n","title":"How to save file to storage (android 13 - API33)","body":"<p>I'm doing screen recording function for my app. So, I need save video mp4 files to external storage. My function active on API 29 and below, but not working on API 32 and above. Please show me steps to resolve this problem.</p>\n<p>I followed to this source code: <a href=\"https://github.com/Truiton/ScreenCapture\" rel=\"nofollow noreferrer\">https://github.com/Truiton/ScreenCapture</a></p>\n<p>MainActivity.kt</p>\n<pre><code>class MainActivity : AppCompatActivity() {\nprivate var mScreenDensity = 0\nprivate var mProjectionManager: MediaProjectionManager? = null\nprivate var mMediaProjection: MediaProjection? = null\nprivate var mVirtualDisplay: VirtualDisplay? = null\nprivate var mMediaProjectionCallback: MediaProjectionCallback? = null\nprivate var mMediaRecorder: MediaRecorder? = null\nprivate lateinit var binding: ActivityMainBinding\npublic override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    binding = ActivityMainBinding.inflate(layoutInflater)\n    setContentView(binding.root)\n    val metrics = DisplayMetrics()\n    windowManager.defaultDisplay.getMetrics(metrics)\n    mScreenDensity = metrics.densityDpi\n    mMediaRecorder = MediaRecorder()\n    mProjectionManager = getSystemService(MEDIA_PROJECTION_SERVICE) as MediaProjectionManager\n    binding.toggle.setOnClickListener { v: View? -&gt;\n        if ((ContextCompat.checkSelfPermission(\n                this@MainActivity,\n                Manifest.permission.WRITE_EXTERNAL_STORAGE\n            ) + ContextCompat\n                .checkSelfPermission(\n                    this@MainActivity,\n                    Manifest.permission.RECORD_AUDIO\n                ) + ContextCompat.checkSelfPermission(\n                this@MainActivity,\n                MANAGE_EXTERNAL_STORAGE\n            ))\n            != PackageManager.PERMISSION_GRANTED\n        ) {\n            if (ActivityCompat.shouldShowRequestPermissionRationale(\n                    this@MainActivity,\n                    Manifest.permission.WRITE_EXTERNAL_STORAGE\n                ) ||\n                ActivityCompat.shouldShowRequestPermissionRationale(\n                    this@MainActivity,\n                    Manifest.permission.RECORD_AUDIO\n                ) || ActivityCompat.shouldShowRequestPermissionRationale(\n                    this@MainActivity,\n                    MANAGE_EXTERNAL_STORAGE\n                )\n            ) {\n                binding.toggle.isChecked = false\n                Snackbar.make(\n                    findViewById(android.R.id.content), R.string.label_permissions,\n                    Snackbar.LENGTH_INDEFINITE\n                ).setAction(&quot;ENABLE&quot;,\n                    View.OnClickListener { v1: View? -&gt;\n                        ActivityCompat.requestPermissions(\n                            this@MainActivity,\n                            arrayOf(\n                                Manifest.permission.WRITE_EXTERNAL_STORAGE,\n                                Manifest.permission.RECORD_AUDIO,\n                                MANAGE_EXTERNAL_STORAGE\n                            ),\n                            REQUEST_PERMISSIONS\n                        )\n                    }).show()\n            } else {\n                ActivityCompat.requestPermissions(\n                    this@MainActivity,\n                    arrayOf(\n                        Manifest.permission.WRITE_EXTERNAL_STORAGE,\n                        Manifest.permission.RECORD_AUDIO,\n                        MANAGE_EXTERNAL_STORAGE\n                    ),\n                    REQUEST_PERMISSIONS\n                )\n            }\n        } else {\n            onToggleScreenShare(v)\n        }\n    }\n}\n\npublic override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n    super.onActivityResult(requestCode, resultCode, data)\n    if (requestCode != REQUEST_CODE) {\n        Log.e(TAG, &quot;Unknown request code: $requestCode&quot;)\n        return\n    }\n    if (resultCode != RESULT_OK) {\n        Toast.makeText(\n            this,\n            &quot;Screen Cast Permission Denied&quot;, Toast.LENGTH_SHORT\n        ).show()\n        binding.toggle.isChecked = false\n        return\n    }\n    mMediaProjectionCallback = MediaProjectionCallback()\n    mMediaProjection = mProjectionManager!!.getMediaProjection(resultCode, data!!)\n    mMediaProjection?.registerCallback(mMediaProjectionCallback, null)\n    mVirtualDisplay = createVirtualDisplay()\n    mMediaRecorder!!.start()\n}\n\nfun onToggleScreenShare(view: View?) {\n    if ((view as ToggleButton?)!!.isChecked) {\n        initRecorder()\n        shareScreen()\n    } else {\n        mMediaRecorder!!.stop()\n        mMediaRecorder!!.reset()\n        Log.v(TAG, &quot;Stopping Recording&quot;)\n        stopScreenSharing()\n    }\n}\n\nprivate fun shareScreen() {\n    if (mMediaProjection == null) {\n        startActivityForResult(mProjectionManager!!.createScreenCaptureIntent(), REQUEST_CODE)\n        return\n    }\n    mVirtualDisplay = createVirtualDisplay()\n    mMediaRecorder!!.start()\n}\n\nprivate fun createVirtualDisplay(): VirtualDisplay {\n    return mMediaProjection!!.createVirtualDisplay(\n        &quot;MainActivity&quot;,\n        DISPLAY_WIDTH, DISPLAY_HEIGHT, mScreenDensity,\n        DisplayManager.VIRTUAL_DISPLAY_FLAG_AUTO_MIRROR,\n        mMediaRecorder!!.surface, null /*Callbacks*/, null /*Handler*/\n    )\n}\n\n@SuppressLint(&quot;SimpleDateFormat&quot;)\nprivate fun initRecorder() {\n    try {\n        mMediaRecorder!!.setAudioSource(MediaRecorder.AudioSource.MIC)\n        mMediaRecorder!!.setVideoSource(MediaRecorder.VideoSource.SURFACE)\n        mMediaRecorder!!.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP)\n        mMediaRecorder!!.setOutputFile(\n            Environment\n                .getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS)\n                .toString() + &quot;/&quot; + &quot;Prank_Record_&quot; + SimpleDateFormat(&quot;dd-MM-yyyy-hh_mm_ss&quot;).format(\n                Date()\n            ) + &quot;.mp4&quot;\n        )\n        mMediaRecorder!!.setVideoSize(DISPLAY_WIDTH, DISPLAY_HEIGHT)\n        mMediaRecorder!!.setVideoEncoder(MediaRecorder.VideoEncoder.H264)\n        mMediaRecorder!!.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB)\n        mMediaRecorder!!.setVideoEncodingBitRate(512 * 1000)\n        mMediaRecorder!!.setVideoFrameRate(30)\n        val rotation = windowManager.defaultDisplay.rotation\n        val orientation = ORIENTATIONS[rotation + 90]\n        mMediaRecorder!!.setOrientationHint(orientation)\n        mMediaRecorder!!.prepare()\n    } catch (e: IOException) {\n        e.printStackTrace()\n    }\n}\n\nprivate inner class MediaProjectionCallback : MediaProjection.Callback() {\n    override fun onStop() {\n        if (binding.toggle.isChecked) {\n            binding.toggle.isChecked = false\n            mMediaRecorder!!.stop()\n            mMediaRecorder!!.reset()\n            Log.v(TAG, &quot;Recording Stopped&quot;)\n        }\n        mMediaProjection = null\n        stopScreenSharing()\n    }\n}\n\nprivate fun stopScreenSharing() {\n    if (mVirtualDisplay == null) {\n        return\n    }\n    mVirtualDisplay!!.release()\n    //mMediaRecorder.release(); //If used: mMediaRecorder object cannot\n    // be reused again\n    destroyMediaProjection()\n}\n\npublic override fun onDestroy() {\n    super.onDestroy()\n    destroyMediaProjection()\n}\n\nprivate fun destroyMediaProjection() {\n    if (mMediaProjection != null) {\n        mMediaProjection!!.unregisterCallback(mMediaProjectionCallback)\n        mMediaProjection!!.stop()\n        mMediaProjection = null\n    }\n    Log.i(TAG, &quot;MediaProjection Stopped&quot;)\n}\n\n@RequiresApi(Build.VERSION_CODES.R)\noverride fun onRequestPermissionsResult(\n    requestCode: Int,\n    permissions: Array&lt;String&gt;,\n    grantResults: IntArray\n) {\n    super.onRequestPermissionsResult(requestCode, permissions, grantResults)\n    when (requestCode) {\n        REQUEST_PERMISSIONS -&gt; {\n            if (true) {\n                onToggleScreenShare(binding.toggle)\n            } else {\n                binding.toggle.isChecked = false\n                Snackbar.make(\n                    findViewById(android.R.id.content), R.string.label_permissions,\n                    Snackbar.LENGTH_INDEFINITE\n                ).setAction(&quot;ENABLE&quot;,\n                    View.OnClickListener {\n                        val intent = Intent()\n                        intent.action = Settings.ACTION_MANAGE_APP_ALL_FILES_ACCESS_PERMISSION\n                        intent.addCategory(Intent.CATEGORY_DEFAULT)\n                        intent.data = Uri.parse(&quot;package:$packageName&quot;)\n                        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)\n                        intent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY)\n                        intent.addFlags(Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS)\n                        startActivity(intent)\n                    }).show()\n            }\n            return\n        }\n    }\n}\n\ncompanion object {\n    private const val TAG = &quot;MainActivity&quot;\n    private const val REQUEST_CODE = 1000\n    private const val DISPLAY_WIDTH = 720\n    private const val DISPLAY_HEIGHT = 1280\n    private val ORIENTATIONS = SparseIntArray()\n    private const val REQUEST_PERMISSIONS = 10\n\n    init {\n        ORIENTATIONS.append(Surface.ROTATION_0, 90)\n        ORIENTATIONS.append(Surface.ROTATION_90, 0)\n        ORIENTATIONS.append(Surface.ROTATION_180, 270)\n        ORIENTATIONS.append(Surface.ROTATION_270, 180)\n    }\n}\n</code></pre>\n<p>}</p>\n<p>AndroidManifest.xml</p>\n<pre><code> &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;\n&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;\n&lt;uses-permission android:name=&quot;android.permission.RECORD_AUDIO&quot;/&gt;\n&lt;uses-permission android:name=&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot;\n    tools:ignore=&quot;ScopedStorage&quot; /&gt;\n</code></pre>\n"},{"tags":["java","json","jsonpath","jsonparser","json-path-expression"],"answers":[{"tags":[],"owner":{"account_id":10907310,"reputation":2214,"user_id":8017666,"display_name":"SRJ"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684833664,"creation_date":1684833664,"answer_id":76313151,"question_id":76313004,"body_markdown":"## Debugging\r\nAfter debugging jsonPath code using breakpoints in intellij IDE, Realised we need to pass Configuration in each instance of DocumentContext.\r\n\r\nFor e.g.\r\n\r\n#### Configuration\r\n\r\n```\r\n    private static final Configuration suppressExceptionConfiguration = Configuration\r\n            .defaultConfiguration()\r\n            .addOptions(Option.DEFAULT_PATH_LEAF_TO_NULL)\r\n            .addOptions(Option.SUPPRESS_EXCEPTIONS);\r\n```\r\n\r\n#### Example\r\nPass above configuration in each instance of DocumentContext to make sure configuration is always applied and not missed.\r\n\r\n```\r\n        DocumentContext jsonContext = JsonPath.using(suppressExceptionConfiguration).parse(json);\r\n        DocumentContext name = JsonPath.parse((String) jsonContext.read(&quot;$.abc.name&quot;), suppressExceptionConfiguration);\r\n\r\n```\r\n\r\n","title":"DEFAULT_PATH_LEAF_TO_NULL in jsonPath not working","body":"<h2>Debugging</h2>\n<p>After debugging jsonPath code using breakpoints in intellij IDE, Realised we need to pass Configuration in each instance of DocumentContext.</p>\n<p>For e.g.</p>\n<h4>Configuration</h4>\n<pre><code>    private static final Configuration suppressExceptionConfiguration = Configuration\n            .defaultConfiguration()\n            .addOptions(Option.DEFAULT_PATH_LEAF_TO_NULL)\n            .addOptions(Option.SUPPRESS_EXCEPTIONS);\n</code></pre>\n<h4>Example</h4>\n<p>Pass above configuration in each instance of DocumentContext to make sure configuration is always applied and not missed.</p>\n<pre><code>        DocumentContext jsonContext = JsonPath.using(suppressExceptionConfiguration).parse(json);\n        DocumentContext name = JsonPath.parse((String) jsonContext.read(&quot;$.abc.name&quot;), suppressExceptionConfiguration);\n\n</code></pre>\n"}],"owner":{"account_id":10907310,"reputation":2214,"user_id":8017666,"display_name":"SRJ"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76313151,"answer_count":1,"score":1,"last_activity_date":1684833664,"creation_date":1684832677,"question_id":76313004,"body_markdown":"## JSON \r\n```\r\n{\r\n&quot;abc&quot;: {\r\n    &quot;country&quot;: [\r\n      {\r\n        &quot;city&quot;: &quot;JODHPUR&quot;\r\n      }\r\n    ]\r\n  }\r\n}\r\n```\r\n\r\n## JSONPath Configuration\r\n```\r\n    private static final Configuration suppressExceptionConfiguration = Configuration\r\n            .defaultConfiguration()\r\n            .addOptions(Option.DEFAULT_PATH_LEAF_TO_NULL)\r\n            .addOptions(Option.SUPPRESS_EXCEPTIONS);\r\n```\r\n\r\n## Accessing fields\r\nI am trying to access a field which can exist in some of my sample json and also may not exist.\r\n\r\nfor e.g.\r\n```\r\n        DocumentContext jsonContext = JsonPath.using(suppressExceptionConfiguration).parse(json);\r\n\r\n        String name = jsonContext.read(&quot;$.abc.name&quot;);\r\n```\r\n\r\n## Error\r\nIt is giving me error and exiting.\r\n```\r\ncom.jayway.jsonpath.PathNotFoundException: No results for path: $[&#39;abc&#39;][&#39;name&#39;]\r\n\r\n```\r\n\r\n### Issue\r\nI would like the program to continue and return `null` for this element and this is why I used option like `Option.DEFAULT_PATH_LEAF_TO_NULL` but it is not working.\r\n\r\n## My environment\r\n#### Java 17\r\n\r\n#### JSONPath version \r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.jayway.jsonpath&lt;/groupId&gt;\r\n            &lt;artifactId&gt;json-path&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```","title":"DEFAULT_PATH_LEAF_TO_NULL in jsonPath not working","body":"<h2>JSON</h2>\n<pre><code>{\n&quot;abc&quot;: {\n    &quot;country&quot;: [\n      {\n        &quot;city&quot;: &quot;JODHPUR&quot;\n      }\n    ]\n  }\n}\n</code></pre>\n<h2>JSONPath Configuration</h2>\n<pre><code>    private static final Configuration suppressExceptionConfiguration = Configuration\n            .defaultConfiguration()\n            .addOptions(Option.DEFAULT_PATH_LEAF_TO_NULL)\n            .addOptions(Option.SUPPRESS_EXCEPTIONS);\n</code></pre>\n<h2>Accessing fields</h2>\n<p>I am trying to access a field which can exist in some of my sample json and also may not exist.</p>\n<p>for e.g.</p>\n<pre><code>        DocumentContext jsonContext = JsonPath.using(suppressExceptionConfiguration).parse(json);\n\n        String name = jsonContext.read(&quot;$.abc.name&quot;);\n</code></pre>\n<h2>Error</h2>\n<p>It is giving me error and exiting.</p>\n<pre><code>com.jayway.jsonpath.PathNotFoundException: No results for path: $['abc']['name']\n\n</code></pre>\n<h3>Issue</h3>\n<p>I would like the program to continue and return <code>null</code> for this element and this is why I used option like <code>Option.DEFAULT_PATH_LEAF_TO_NULL</code> but it is not working.</p>\n<h2>My environment</h2>\n<h4>Java 17</h4>\n<h4>JSONPath version</h4>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;com.jayway.jsonpath&lt;/groupId&gt;\n            &lt;artifactId&gt;json-path&lt;/artifactId&gt;\n            &lt;version&gt;2.7.0&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","validation"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1684831086,"post_id":76312573,"comment_id":134570696,"body_markdown":"Show the view, show the controller, show your configuration. Also stating &quot;this doesn&#39;t work&quot; isn&#39;t really helpful, what doesn&#39;t work?","body":"Show the view, show the controller, show your configuration. Also stating &quot;this doesn&#39;t work&quot; isn&#39;t really helpful, what doesn&#39;t work?"}],"owner":{"account_id":19611273,"reputation":3,"user_id":14353731,"display_name":"Cibs84"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":417,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684833451,"creation_date":1684829662,"question_id":76312573,"body_markdown":"I have some problems with validations in Spring Boot 3.\r\nI have 21 fields in 6 Entities that have validations with import jakarta.validation but of these, only 2 with @NotBlank work and return in the Thymeleaf view the message I set. \r\n\r\nAll 6 fields of type LocalDateTime with @Future trigger the error in the view but do not print the message I set in the annotation.\r\nAll other fields do not throw any error in the view.\r\n\r\npom.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.6&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;it.la7.travel&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;la7-travel&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;la7-travel&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;!-- Validator spring-boot-starter --&gt;\r\n\t\t&lt;dependency&gt; \r\n\t\t    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; \r\n\t\t    &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt; \r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;!-- Hibernate Validator --&gt;\r\n&lt;!--\t\t&lt;dependency&gt; --&gt;\r\n&lt;!--\t        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;--&gt;\r\n&lt;!--\t        &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;--&gt;\r\n&lt;!--\t        &lt;version&gt;6.0.13.Final&lt;/version&gt;--&gt;\r\n&lt;!--\t    &lt;/dependency&gt; --&gt;\r\n\t\t\r\n\t\t&lt;!-- bootstrap --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;bootstrap&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;5.2.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;!-- font-awesome --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;font-awesome&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;6.3.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;!-- Vue.js --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.webjars.npm&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;vue&lt;/artifactId&gt;\r\n\t\t    &lt;version&gt;3.3.0-alpha.4&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t            &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n\t            &lt;version&gt;2.7&lt;/version&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\nThis throws the error and prints the error-message I set in the annotation\r\n```\r\nimport jakarta.validation.constraints.Future;\r\nimport jakarta.validation.constraints.NotBlank;\r\nimport jakarta.validation.constraints.Size;\r\n\r\n@Entity\r\npublic class Ticket{\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Size(max = 100, message = &quot;Max 100 characters&quot;)\r\n    @NotBlank(message = &quot;Field required&quot;)\r\n    @Column(nullable=false, length=100)\r\n    private String placeDeparture;\r\n\r\n```\r\nThis throws the error in the view but do not print the error-message I set in the annotation\r\n```\r\nimport jakarta.validation.constraints.Future;\r\nimport jakarta.validation.constraints.NotBlank;\r\nimport jakarta.validation.constraints.NotNull;\r\nimport jakarta.validation.constraints.Size;\r\n\r\n@Entity\r\npublic class CarRental{\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    \r\n    @Future(message=&quot;Future Date required&quot;)\r\n    @Column(nullable=false, columnDefinition = &quot;DATETIME&quot;)\r\n    private LocalDateTime dateTimeRedelivery;\r\n```\r\nThis doesn&#39;t throws any error in the view\r\n```\r\nimport jakarta.validation.constraints.Future;\r\nimport jakarta.validation.constraints.NotBlank;\r\nimport jakarta.validation.constraints.NotNull;\r\nimport jakarta.validation.constraints.Size;\r\n\r\n@Entity\r\npublic class CarRental{\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    \r\n    @Size(max = 100, message = &quot;Max 100 characters&quot;)\r\n    @NotBlank(message = &quot;Field required&quot;)\r\n    @Column(nullable=false, length=100)\r\n    private String placePickup;\r\n```","title":"Spring Boot validation with jakarta.validation doesn&#39;t work","body":"<p>I have some problems with validations in Spring Boot 3.\nI have 21 fields in 6 Entities that have validations with import jakarta.validation but of these, only 2 with @NotBlank work and return in the Thymeleaf view the message I set.</p>\n<p>All 6 fields of type LocalDateTime with @Future trigger the error in the view but do not print the message I set in the annotation.\nAll other fields do not throw any error in the view.</p>\n<p>pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.6&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;it.la7.travel&lt;/groupId&gt;\n    &lt;artifactId&gt;la7-travel&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;la7-travel&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        \n        &lt;!-- Validator spring-boot-starter --&gt;\n        &lt;dependency&gt; \n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; \n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt; \n        &lt;/dependency&gt;\n        \n        &lt;!-- Hibernate Validator --&gt;\n&lt;!--        &lt;dependency&gt; --&gt;\n&lt;!--            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;--&gt;\n&lt;!--            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;--&gt;\n&lt;!--            &lt;version&gt;6.0.13.Final&lt;/version&gt;--&gt;\n&lt;!--        &lt;/dependency&gt; --&gt;\n        \n        &lt;!-- bootstrap --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n            &lt;artifactId&gt;bootstrap&lt;/artifactId&gt;\n            &lt;version&gt;5.2.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n        &lt;!-- font-awesome --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n            &lt;artifactId&gt;font-awesome&lt;/artifactId&gt;\n            &lt;version&gt;6.3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n        &lt;!-- Vue.js --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.webjars.npm&lt;/groupId&gt;\n            &lt;artifactId&gt;vue&lt;/artifactId&gt;\n            &lt;version&gt;3.3.0-alpha.4&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.7&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>This throws the error and prints the error-message I set in the annotation</p>\n<pre><code>import jakarta.validation.constraints.Future;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.Size;\n\n@Entity\npublic class Ticket{\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Size(max = 100, message = &quot;Max 100 characters&quot;)\n    @NotBlank(message = &quot;Field required&quot;)\n    @Column(nullable=false, length=100)\n    private String placeDeparture;\n\n</code></pre>\n<p>This throws the error in the view but do not print the error-message I set in the annotation</p>\n<pre><code>import jakarta.validation.constraints.Future;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Size;\n\n@Entity\npublic class CarRental{\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    \n    @Future(message=&quot;Future Date required&quot;)\n    @Column(nullable=false, columnDefinition = &quot;DATETIME&quot;)\n    private LocalDateTime dateTimeRedelivery;\n</code></pre>\n<p>This doesn't throws any error in the view</p>\n<pre><code>import jakarta.validation.constraints.Future;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Size;\n\n@Entity\npublic class CarRental{\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    \n    @Size(max = 100, message = &quot;Max 100 characters&quot;)\n    @NotBlank(message = &quot;Field required&quot;)\n    @Column(nullable=false, length=100)\n    private String placePickup;\n</code></pre>\n"},{"tags":["java","intellij-idea","java-14","java-record"],"comments":[{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1597193689,"post_id":63366167,"comment_id":112051913,"body_markdown":"IntelliJ is pretty good at broadcasting and documenting their feature releases. All it would have needed is to search it over the net. Besides the current question, doesn&#39;t have any debugging details.","body":"IntelliJ is pretty good at broadcasting and documenting their feature releases. All it would have needed is to search it over the net. Besides the current question, doesn&#39;t have any debugging details."}],"answers":[{"tags":[],"owner":{"account_id":1674243,"reputation":10043,"user_id":1553537,"accept_rate":29,"display_name":"Giorgi Tsiklauri"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1597182988,"creation_date":1597179597,"answer_id":63366300,"question_id":63366167,"body_markdown":"1. Make sure you have an updated version of the IntelliJ IDEA (2020.1 or later);\r\n2. Go to the Project Structure and set your *Project Language Level* to `Java 14` (remember, as well, to set `Java 14` as your *Project SDK*, if not done yet).\r\n\r\nSee more [here][1].\r\n\r\n[1]: https://blog.jetbrains.com/idea/2020/03/java-14-and-intellij-idea/#:~:text=Configure%20IntelliJ%20IDEA%202020.1%20to,IntelliJ%20IDEA%20and%20configure%20it.\r\n","title":"How can I enable Java 14 records in IntelliJ IDEA?","body":"<ol>\n<li>Make sure you have an updated version of the IntelliJ IDEA (2020.1 or later);</li>\n<li>Go to the Project Structure and set your <em>Project Language Level</em> to <code>Java 14</code> (remember, as well, to set <code>Java 14</code> as your <em>Project SDK</em>, if not done yet).</li>\n</ol>\n<p>See more <a href=\"https://blog.jetbrains.com/idea/2020/03/java-14-and-intellij-idea/#:%7E:text=Configure%20IntelliJ%20IDEA%202020.1%20to,IntelliJ%20IDEA%20and%20configure%20it.\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":7281815,"reputation":168,"user_id":5551321,"display_name":"Ramath"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3618,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":63366300,"answer_count":1,"score":1,"last_activity_date":1684831968,"creation_date":1597178931,"question_id":63366167,"body_markdown":"I cannot create Java record class in IntelliJ, and I could not find the option to enable it.\r\n\r\nIs there a way to enable it?","title":"How can I enable Java 14 records in IntelliJ IDEA?","body":"<p>I cannot create Java record class in IntelliJ, and I could not find the option to enable it.</p>\n<p>Is there a way to enable it?</p>\n"},{"tags":["java","hibernate","jpa","apache-tomee"],"answers":[{"tags":[],"owner":{"account_id":5701984,"reputation":5646,"user_id":4506678,"accept_rate":55,"display_name":"rzo1"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1684831705,"creation_date":1684831705,"answer_id":76312857,"question_id":76296222,"body_markdown":"TomEE 9.0.0 is compatible with Jakarta EE 9.1, which includes JPA 3.0.\r\n\r\nHibernate 6.2.x implements JPA 3.1 which includes [API changes such as introducing UUID generators][1].\r\n\r\nThese spec changes aren&#39;t included in the API shade, which is used in TomEE 9. To fix your issue, you need to downgrade Hibernate to it&#39;s 6.1 series, which complies with JPA 3.0.\r\n\r\n  [1]: https://projects.eclipse.org/projects/ee4j.jpa/releases/3.1","title":"TomEE 9 fails to load persistence unit with Hibernate 6.2 - NoSuchFieldError: UUID","body":"<p>TomEE 9.0.0 is compatible with Jakarta EE 9.1, which includes JPA 3.0.</p>\n<p>Hibernate 6.2.x implements JPA 3.1 which includes <a href=\"https://projects.eclipse.org/projects/ee4j.jpa/releases/3.1\" rel=\"nofollow noreferrer\">API changes such as introducing UUID generators</a>.</p>\n<p>These spec changes aren't included in the API shade, which is used in TomEE 9. To fix your issue, you need to downgrade Hibernate to it's 6.1 series, which complies with JPA 3.0.</p>\n"}],"owner":{"account_id":26322680,"reputation":23,"user_id":19984474,"display_name":"DDD"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1278,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76312857,"answer_count":1,"score":2,"last_activity_date":1684831779,"creation_date":1684600008,"question_id":76296222,"body_markdown":"I&#39;m trying to start a TomEE server in version 9.0.0 and deploy a simple webapp.\r\n\r\nI&#39;m using Hibernate 6.2.2 as the provider for jpa and postgres\r\n\r\nWhen i deploy the .war it gives me these errors (the stack is long i just put the severe):\r\n\r\n```\r\n SEVERE [http-nio-8080-exec-3] jdk.internal.reflect.NativeMethodAccessorImpl.invoke Error destroying child org.apache.catalina.LifecycleException: An invalid Lifecycle transition was attempted ([before_destroy]) for component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/servlet-jsp-jdbc-jpa]] in state [STARTING_PREP]\r\n---------------------\r\nSEVERE [http-nio-8080-exec-3] org.apache.openejb.assembler.classic.Assembler.destroyApplication undeployException original cause java.lang.Exception: deployment not found: servlet-jsp-jdbc-jpa.Comp669096535\r\n-------------------------\r\nSEVERE [http-nio-8080-exec-3] org.apache.openejb.assembler.classic.Assembler.destroyApplication undeployException original cause java.lang.Exception: persistence-unit: pu 1912458056localhost: Name &quot;openejb/PersistenceUnit/pu 1912458056localhost&quot; not found. \r\n.... \r\nCaused by: javax.naming.NameNotFoundException: Name &quot;openejb/PersistenceUnit/pu 1912458056localhost&quot; not found.\r\n---------------------------\r\nSEVERE [http-nio-8080-exec-3] org.apache.tomee.catalina.TomcatWebAppBuilder.startInternal Unable to deploy collapsed ear in war StandardEngine[Catalina].StandardHost[localhost].StandardContext[/servlet-jsp-jdbc-jpa] org.apache.openejb.OpenEJBException: Creating application failed: C:\\apache-tomee-microprofile-9.0.0\\webapps\\servlet-jsp-jdbc-jpa: UUID \r\n.......... \r\nCaused by: java.lang.NoSuchFieldError: UUID\r\n----------------------------\r\nSEVERE [http-nio-8080-exec-3] jdk.internal.reflect.NativeMethodAccessorImpl.invoke Error deploying web application archive [C:\\apache-tomee-microprofile-9.0.0\\webapps\\servlet-jsp-jdbc-jpa.war] java.lang.IllegalStateException: Error starting child \r\n........ \r\nCaused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/servlet-jsp-jdbc-jpa]] .............. \r\nCaused by: org.apache.tomee.catalina.TomEERuntimeException: org.apache.openejb.OpenEJBException: Creating application failed: C:\\apache-tomee-microprofile-9.0.0\\webapps\\servlet-jsp-jdbc-jpa: UUID \r\n.........\r\n Caused by: org.apache.openejb.OpenEJBException: Creating application failed: C:\\apache-tomee-microprofile-9.0.0\\webapps\\servlet-jsp-jdbc-jpa: UUID \r\n.......... \r\nCaused by: java.lang.NoSuchFieldError: UUID \r\n.........\r\n```\r\n\r\nThe structure is:\r\n\r\n- webapp\r\n\r\n  - META-INF\r\n\r\n    - persistence.xml\r\n\r\n    - context.xml\r\n\r\n  - WEB-INF\r\n\r\n    - web.xml\r\n\r\n    classes (where i put all the compiled classes)\r\n\r\n    - lib\r\n\r\n      - hibernate-core-6.2.2.Final.jar\r\n\r\n  - index.html\r\n\r\npersistence.xml:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;persistence version=&quot;2.2&quot;\r\n             xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence\r\n                                 http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd&quot;&gt;\r\n\r\n    &lt;!-- NO JNDI --&gt;\r\n    &lt;persistence-unit name=&quot;pu&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\r\n        &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\r\n        &lt;properties&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.driver&quot; value=&quot;org.postgresql.Driver&quot;/&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.url&quot; value=&quot;jdbc:postgresql://localhost/MVC?currentSchema=public&amp;amp;ssl=false&quot;/&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.user&quot; value=&quot;******&quot;/&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.password&quot; value=&quot;********&quot;/&gt;\r\n            &lt;property name=&quot;hibernate.show_sql&quot; value=&quot;true&quot; /&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/persistence-unit&gt;\r\n\r\n&lt;/persistence&gt;\r\n```\r\n\r\ncontext.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;Context path=&quot;/servlet-jsp-jdbc-jpa&quot; &gt;\r\n&lt;/Context&gt;\r\n```\r\n\r\nweb.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;web-app&gt;\r\n    &lt;display-name&gt;servlet_jsp_jdbc_jpa&lt;/display-name&gt;\r\n&lt;/web-app&gt;\r\n```\r\n\r\nThese are the classes that are using the persistence-unit\r\n\r\n```\r\npackage jpa;\r\n\r\nimport jakarta.persistence.EntityManagerFactory;\r\nimport jakarta.persistence.Persistence;\r\nimport jakarta.persistence.PersistenceUnit;\r\n\r\npublic class PersistenceManager {\r\n\r\n    //@PersistenceUnit(unitName=&quot;JTA-pu&quot;)\r\n    private static final EntityManagerFactory emf;\r\n\r\n    static {\r\n        emf = Persistence.createEntityManagerFactory(&quot;pu&quot;);\r\n    }\r\n\r\n    private PersistenceManager() {\r\n    }\r\n\r\n    public static EntityManagerFactory getEmf() {\r\n        return emf;\r\n    }\r\n}\r\n```\r\n\r\n```\r\npackage filters;\r\n\r\nimport jakarta.persistence.EntityManager;\r\nimport jakarta.persistence.EntityManagerFactory;\r\nimport jakarta.persistence.PersistenceContext;\r\nimport jakarta.persistence.PersistenceUnit;\r\nimport jakarta.servlet.*;\r\nimport jakarta.servlet.annotation.WebFilter;\r\nimport jakarta.servlet.http.HttpFilter;\r\nimport jakarta.servlet.http.HttpServletRequest;\r\nimport jakarta.servlet.http.HttpServletResponse;\r\nimport jpa.PersistenceManager;\r\n\r\nimport java.io.IOException;\r\n\r\n@WebFilter(value=&quot;/*&quot;)\r\npublic class SessionBinderFilter extends HttpFilter {\r\n\r\n    // @PersistenceUnit(unitName=&quot;JTA-pu&quot;)\r\n    private EntityManagerFactory emf = PersistenceManager.getEmf();\r\n\r\n    // @PersistenceContext(unitName=&quot;JTA-pu&quot;)\r\n    private EntityManager em = emf.createEntityManager();\r\n\r\n    @Override\r\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain) throws IOException, ServletException {\r\n\r\n        if (!(request instanceof HttpServletRequest) || !(response instanceof HttpServletResponse)) {\r\n            throw new ServletException(&quot;non-HTTP request or response&quot;);\r\n        }\r\n\r\n        request.setAttribute(&quot;EntityManager&quot;, em);\r\n\r\n        filterChain.doFilter(request, response);\r\n\r\n        if (em.isOpen()) {\r\n            em.close();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI can t understand the problem because i&#39;m quite new on jpa and i searched a lot but i didn t find anything.\r\n\r\nI tried also with JTA and RESOURCE_LOCAL with JNDI but nothing works, the problem is the same.\r\n\r\nAny suggest or information is appreciated","title":"TomEE 9 fails to load persistence unit with Hibernate 6.2 - NoSuchFieldError: UUID","body":"<p>I'm trying to start a TomEE server in version 9.0.0 and deploy a simple webapp.</p>\n<p>I'm using Hibernate 6.2.2 as the provider for jpa and postgres</p>\n<p>When i deploy the .war it gives me these errors (the stack is long i just put the severe):</p>\n<pre><code> SEVERE [http-nio-8080-exec-3] jdk.internal.reflect.NativeMethodAccessorImpl.invoke Error destroying child org.apache.catalina.LifecycleException: An invalid Lifecycle transition was attempted ([before_destroy]) for component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/servlet-jsp-jdbc-jpa]] in state [STARTING_PREP]\n---------------------\nSEVERE [http-nio-8080-exec-3] org.apache.openejb.assembler.classic.Assembler.destroyApplication undeployException original cause java.lang.Exception: deployment not found: servlet-jsp-jdbc-jpa.Comp669096535\n-------------------------\nSEVERE [http-nio-8080-exec-3] org.apache.openejb.assembler.classic.Assembler.destroyApplication undeployException original cause java.lang.Exception: persistence-unit: pu 1912458056localhost: Name &quot;openejb/PersistenceUnit/pu 1912458056localhost&quot; not found. \n.... \nCaused by: javax.naming.NameNotFoundException: Name &quot;openejb/PersistenceUnit/pu 1912458056localhost&quot; not found.\n---------------------------\nSEVERE [http-nio-8080-exec-3] org.apache.tomee.catalina.TomcatWebAppBuilder.startInternal Unable to deploy collapsed ear in war StandardEngine[Catalina].StandardHost[localhost].StandardContext[/servlet-jsp-jdbc-jpa] org.apache.openejb.OpenEJBException: Creating application failed: C:\\apache-tomee-microprofile-9.0.0\\webapps\\servlet-jsp-jdbc-jpa: UUID \n.......... \nCaused by: java.lang.NoSuchFieldError: UUID\n----------------------------\nSEVERE [http-nio-8080-exec-3] jdk.internal.reflect.NativeMethodAccessorImpl.invoke Error deploying web application archive [C:\\apache-tomee-microprofile-9.0.0\\webapps\\servlet-jsp-jdbc-jpa.war] java.lang.IllegalStateException: Error starting child \n........ \nCaused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/servlet-jsp-jdbc-jpa]] .............. \nCaused by: org.apache.tomee.catalina.TomEERuntimeException: org.apache.openejb.OpenEJBException: Creating application failed: C:\\apache-tomee-microprofile-9.0.0\\webapps\\servlet-jsp-jdbc-jpa: UUID \n.........\n Caused by: org.apache.openejb.OpenEJBException: Creating application failed: C:\\apache-tomee-microprofile-9.0.0\\webapps\\servlet-jsp-jdbc-jpa: UUID \n.......... \nCaused by: java.lang.NoSuchFieldError: UUID \n.........\n</code></pre>\n<p>The structure is:</p>\n<ul>\n<li><p>webapp</p>\n<ul>\n<li><p>META-INF</p>\n<ul>\n<li><p>persistence.xml</p>\n</li>\n<li><p>context.xml</p>\n</li>\n</ul>\n</li>\n<li><p>WEB-INF</p>\n<ul>\n<li>web.xml</li>\n</ul>\n<p>classes (where i put all the compiled classes)</p>\n<ul>\n<li><p>lib</p>\n<ul>\n<li>hibernate-core-6.2.2.Final.jar</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>index.html</p>\n</li>\n</ul>\n</li>\n</ul>\n<p>persistence.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;persistence version=&quot;2.2&quot;\n             xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n             xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence\n                                 http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd&quot;&gt;\n\n    &lt;!-- NO JNDI --&gt;\n    &lt;persistence-unit name=&quot;pu&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\n        &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\n        &lt;properties&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.driver&quot; value=&quot;org.postgresql.Driver&quot;/&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.url&quot; value=&quot;jdbc:postgresql://localhost/MVC?currentSchema=public&amp;amp;ssl=false&quot;/&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.user&quot; value=&quot;******&quot;/&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.password&quot; value=&quot;********&quot;/&gt;\n            &lt;property name=&quot;hibernate.show_sql&quot; value=&quot;true&quot; /&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n\n&lt;/persistence&gt;\n</code></pre>\n<p>context.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Context path=&quot;/servlet-jsp-jdbc-jpa&quot; &gt;\n&lt;/Context&gt;\n</code></pre>\n<p>web.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;web-app&gt;\n    &lt;display-name&gt;servlet_jsp_jdbc_jpa&lt;/display-name&gt;\n&lt;/web-app&gt;\n</code></pre>\n<p>These are the classes that are using the persistence-unit</p>\n<pre><code>package jpa;\n\nimport jakarta.persistence.EntityManagerFactory;\nimport jakarta.persistence.Persistence;\nimport jakarta.persistence.PersistenceUnit;\n\npublic class PersistenceManager {\n\n    //@PersistenceUnit(unitName=&quot;JTA-pu&quot;)\n    private static final EntityManagerFactory emf;\n\n    static {\n        emf = Persistence.createEntityManagerFactory(&quot;pu&quot;);\n    }\n\n    private PersistenceManager() {\n    }\n\n    public static EntityManagerFactory getEmf() {\n        return emf;\n    }\n}\n</code></pre>\n<pre><code>package filters;\n\nimport jakarta.persistence.EntityManager;\nimport jakarta.persistence.EntityManagerFactory;\nimport jakarta.persistence.PersistenceContext;\nimport jakarta.persistence.PersistenceUnit;\nimport jakarta.servlet.*;\nimport jakarta.servlet.annotation.WebFilter;\nimport jakarta.servlet.http.HttpFilter;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\nimport jpa.PersistenceManager;\n\nimport java.io.IOException;\n\n@WebFilter(value=&quot;/*&quot;)\npublic class SessionBinderFilter extends HttpFilter {\n\n    // @PersistenceUnit(unitName=&quot;JTA-pu&quot;)\n    private EntityManagerFactory emf = PersistenceManager.getEmf();\n\n    // @PersistenceContext(unitName=&quot;JTA-pu&quot;)\n    private EntityManager em = emf.createEntityManager();\n\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain) throws IOException, ServletException {\n\n        if (!(request instanceof HttpServletRequest) || !(response instanceof HttpServletResponse)) {\n            throw new ServletException(&quot;non-HTTP request or response&quot;);\n        }\n\n        request.setAttribute(&quot;EntityManager&quot;, em);\n\n        filterChain.doFilter(request, response);\n\n        if (em.isOpen()) {\n            em.close();\n        }\n    }\n}\n</code></pre>\n<p>I can t understand the problem because i'm quite new on jpa and i searched a lot but i didn t find anything.</p>\n<p>I tried also with JTA and RESOURCE_LOCAL with JNDI but nothing works, the problem is the same.</p>\n<p>Any suggest or information is appreciated</p>\n"},{"tags":["java","android-studio","okhttp"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1677991183,"post_id":75591000,"comment_id":133445280,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":19789999,"reputation":9,"user_id":14493205,"display_name":"Tsandesh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2440,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1684831479,"creation_date":1677581428,"question_id":75591000,"body_markdown":"The error is showing:\r\n\r\n&gt; failed to respond due to okhttp3.internal.http.RealResponseBody@9fce4c6\r\n\r\nThis is my code:\r\n```java\r\n@Override\r\npublic void onResponse(@NonNull Call call, @NonNull Response response) throws IOException {\r\n    if(response.isSuccessful()){\r\n        JSONObject jsonObject = null;\r\n        try {\r\n            jsonObject = new JSONObject(response.body().string());\r\n            JSONArray jsonArray = jsonObject.getJSONArray(&quot;choices&quot;);\r\n            String result = jsonArray.getJSONObject(0).getString(&quot;text&quot;);\r\n            addResponse(result.trim());\r\n\r\n        } catch (JSONException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }else{\r\n        addResponse(&quot;Failed to response due to &quot;+response.body().toString());\r\n    }\r\n}\r\n```","title":"Failed to respond due to okhttp3.internal.http.RealResponseBody@9fce4c6","body":"<p>The error is showing:</p>\n<blockquote>\n<p>failed to respond due to okhttp3.internal.http.RealResponseBody@9fce4c6</p>\n</blockquote>\n<p>This is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic void onResponse(@NonNull Call call, @NonNull Response response) throws IOException {\n    if(response.isSuccessful()){\n        JSONObject jsonObject = null;\n        try {\n            jsonObject = new JSONObject(response.body().string());\n            JSONArray jsonArray = jsonObject.getJSONArray(&quot;choices&quot;);\n            String result = jsonArray.getJSONObject(0).getString(&quot;text&quot;);\n            addResponse(result.trim());\n\n        } catch (JSONException e) {\n            e.printStackTrace();\n        }\n\n    }else{\n        addResponse(&quot;Failed to response due to &quot;+response.body().toString());\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-boot-actuator"],"answers":[{"tags":[],"owner":{"account_id":13019257,"reputation":21,"user_id":9409289,"display_name":"McMill"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1571489681,"creation_date":1571489681,"answer_id":58463895,"question_id":58463744,"body_markdown":"Problem solved, needed to add this property to application.yml:\r\n\r\n    management:\r\n      endpoints:\r\n        web:\r\n          path-mapping:\r\n            my-actuator-endpoint: api/v1/my-service/my-actuator-endpoint","title":"How to make Sprint Boot 2 actuator path based on application properties?","body":"<p>Problem solved, needed to add this property to application.yml:</p>\n\n<pre><code>management:\n  endpoints:\n    web:\n      path-mapping:\n        my-actuator-endpoint: api/v1/my-service/my-actuator-endpoint\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14374791,"reputation":743,"user_id":10383493,"display_name":"sovannarith cheav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1571489759,"creation_date":1571489759,"answer_id":58463904,"question_id":58463744,"body_markdown":"you can expose actuator endpoints&#160;by setting configuration in property file like this\n```\nmanagement.context-path=/manage\n```","title":"How to make Sprint Boot 2 actuator path based on application properties?","body":"<p>you can expose actuator endpoints by setting configuration in property file like this</p>\n\n<pre><code>management.context-path=/manage\n</code></pre>\n"}],"owner":{"account_id":13019257,"reputation":21,"user_id":9409289,"display_name":"McMill"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":737,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1684831302,"creation_date":1571488550,"question_id":58463744,"body_markdown":"I have a microservice application with Spring Boot 2, which used my own library to propagate new endpoint to itself by using actuator functionality - my own actuator implemented an MvcEndpoint interface, and contained &#39;path&#39; variable which got real API mapping from application.yml of microservice that used this library.\r\n\r\nBut after I recoded my library to spring boot 2, I have an issue - **id** property on **@Endpoint** annotation contains only constant value (as every annotation properties), and I haven&#39;t found way to change API path of my actuator endpoint to something like &#39;**/api/v1/my-service/my-actuator-endpoint**&#39;.\r\n\r\nI tried to write this in my application.yml of microservice:\r\n\r\n    endpoints:\r\n      my-actuator-endpoint:\r\n        path: /api/v1/my-service/my-actuator-endpoint\r\n\r\nBut this endpoint still accessible only from /my-actuator-endpoint , which means only by its id.\r\n\r\nHow can I make this be accessible by custom path like /api/v1/my-service/my-actuator-endpoint, which will be configured in application.yml? \r\n","title":"How to make Sprint Boot 2 actuator path based on application properties?","body":"<p>I have a microservice application with Spring Boot 2, which used my own library to propagate new endpoint to itself by using actuator functionality - my own actuator implemented an MvcEndpoint interface, and contained 'path' variable which got real API mapping from application.yml of microservice that used this library.</p>\n\n<p>But after I recoded my library to spring boot 2, I have an issue - <strong>id</strong> property on <strong>@Endpoint</strong> annotation contains only constant value (as every annotation properties), and I haven't found way to change API path of my actuator endpoint to something like '<strong>/api/v1/my-service/my-actuator-endpoint</strong>'.</p>\n\n<p>I tried to write this in my application.yml of microservice:</p>\n\n<pre><code>endpoints:\n  my-actuator-endpoint:\n    path: /api/v1/my-service/my-actuator-endpoint\n</code></pre>\n\n<p>But this endpoint still accessible only from /my-actuator-endpoint , which means only by its id.</p>\n\n<p>How can I make this be accessible by custom path like /api/v1/my-service/my-actuator-endpoint, which will be configured in application.yml? </p>\n"},{"tags":["java","spring","spring-boot","spring-boot-actuator"],"comments":[{"owner":{"account_id":5121316,"reputation":2890,"user_id":4104760,"accept_rate":36,"display_name":"George"},"score":0,"creation_date":1597377402,"post_id":63406277,"comment_id":112118568,"body_markdown":"What&#39;s wrong with making a normal request to `B` and getting an error response back?","body":"What&#39;s wrong with making a normal request to <code>B</code> and getting an error response back?"},{"owner":{"account_id":8529,"reputation":35006,"user_id":15441,"accept_rate":92,"display_name":"hawkeye"},"score":1,"creation_date":1597377595,"post_id":63406277,"comment_id":112118609,"body_markdown":"Because A-&gt;B is replicated in 100 scenarios, and there isn&#39;t a clear view of all those relationships. For the person responsible for keeping these up and available, we need a clear view of what downstream outage has what effect upstream.","body":"Because A-&gt;B is replicated in 100 scenarios, and there isn&#39;t a clear view of all those relationships. For the person responsible for keeping these up and available, we need a clear view of what downstream outage has what effect upstream."}],"answers":[{"tags":[],"owner":{"account_id":960281,"reputation":388,"user_id":9387519,"display_name":"Five"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1597386033,"creation_date":1597386033,"answer_id":63407575,"question_id":63406277,"body_markdown":"Spring boot provides a lot of Health Indicators out of the box. However, you can add your own custom health indicator by implementing `HealthIndicator` interface (`ReactiveHealthIndicator` for reactive apps):\r\n\r\n    @Component\r\n    public class ServiceBHealthIndicator implements HealthIndicator {\r\n        \r\n        private final String message_key = &quot;Service B&quot;;\r\n\r\n        @Override\r\n        public Health health() {\r\n            if (!isRunningServiceB()) {\r\n                return Health.down().withDetail(message_key, &quot;Not Available&quot;).build();\r\n            }\r\n            return Health.up().withDetail(message_key, &quot;Available&quot;).build();\r\n        }\r\n        private Boolean isRunningServiceB() {\r\n            Boolean isRunning = true;\r\n            // Your logic here\r\n            return isRunning;\r\n        }\r\n    }\r\n\r\nIf you combine it with other health indicators like the one before, you can get a health endpoint response in a way like this:\r\n\r\n    {\r\n       &quot;status&quot;:&quot;DOWN&quot;,\r\n       &quot;details&quot;:{\r\n          &quot;serviceB&quot;:{\r\n             &quot;status&quot;:&quot;UP&quot;,\r\n             &quot;details&quot;:{\r\n                &quot;Service B&quot;:&quot;Available&quot;\r\n             }\r\n          },\r\n          &quot;serviceC&quot;:{\r\n             &quot;status&quot;:&quot;DOWN&quot;,\r\n             &quot;details&quot;:{\r\n                &quot;Service C&quot;:&quot;Not Available&quot;\r\n             }\r\n          }\r\n       }\r\n    }\r\n\r\nYou can find more information about [custom health checks][1] and [endpoints][2] in the spring boot documentation.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-features.html#writing-custom-healthindicators\r\n  [2]: https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-features.html#production-ready-endpoints","title":"Is there a standard way in Spring Boot Actuators of checking the health of child services?","body":"<p>Spring boot provides a lot of Health Indicators out of the box. However, you can add your own custom health indicator by implementing <code>HealthIndicator</code> interface (<code>ReactiveHealthIndicator</code> for reactive apps):</p>\n<pre><code>@Component\npublic class ServiceBHealthIndicator implements HealthIndicator {\n    \n    private final String message_key = &quot;Service B&quot;;\n\n    @Override\n    public Health health() {\n        if (!isRunningServiceB()) {\n            return Health.down().withDetail(message_key, &quot;Not Available&quot;).build();\n        }\n        return Health.up().withDetail(message_key, &quot;Available&quot;).build();\n    }\n    private Boolean isRunningServiceB() {\n        Boolean isRunning = true;\n        // Your logic here\n        return isRunning;\n    }\n}\n</code></pre>\n<p>If you combine it with other health indicators like the one before, you can get a health endpoint response in a way like this:</p>\n<pre><code>{\n   &quot;status&quot;:&quot;DOWN&quot;,\n   &quot;details&quot;:{\n      &quot;serviceB&quot;:{\n         &quot;status&quot;:&quot;UP&quot;,\n         &quot;details&quot;:{\n            &quot;Service B&quot;:&quot;Available&quot;\n         }\n      },\n      &quot;serviceC&quot;:{\n         &quot;status&quot;:&quot;DOWN&quot;,\n         &quot;details&quot;:{\n            &quot;Service C&quot;:&quot;Not Available&quot;\n         }\n      }\n   }\n}\n</code></pre>\n<p>You can find more information about <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-features.html#writing-custom-healthindicators\" rel=\"nofollow noreferrer\">custom health checks</a> and <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-features.html#production-ready-endpoints\" rel=\"nofollow noreferrer\">endpoints</a> in the spring boot documentation.</p>\n"}],"owner":{"account_id":8529,"reputation":35006,"user_id":15441,"accept_rate":92,"display_name":"hawkeye"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":766,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":63407575,"answer_count":1,"score":3,"last_activity_date":1684831264,"creation_date":1597377206,"question_id":63406277,"body_markdown":"Suppose I have Spring Boot service A which depends on (calls) Spring Boot service B. \r\n\r\n    A -&gt; B\r\n\r\nSpring Boot [Actuators][1] can tell me if A is up. \r\n\r\nhttps://A/health\r\n\r\nWhat I want to know is if B is up, by calling A. \r\n\r\nhttps://A/integratedhealth\r\n\r\nMy question is: **Is there a standard way in Spring Boot Actuators of checking the health of child services?**\r\n(or do I just have to build a custom actuator service?)\r\n\r\n\r\n  [1]: https://spring.io/guides/gs/actuator-service/","title":"Is there a standard way in Spring Boot Actuators of checking the health of child services?","body":"<p>Suppose I have Spring Boot service A which depends on (calls) Spring Boot service B.</p>\n<pre><code>A -&gt; B\n</code></pre>\n<p>Spring Boot <a href=\"https://spring.io/guides/gs/actuator-service/\" rel=\"nofollow noreferrer\">Actuators</a> can tell me if A is up.</p>\n<p>https://A/health</p>\n<p>What I want to know is if B is up, by calling A.</p>\n<p>https://A/integratedhealth</p>\n<p>My question is: <strong>Is there a standard way in Spring Boot Actuators of checking the health of child services?</strong>\n(or do I just have to build a custom actuator service?)</p>\n"},{"tags":["java","log4j2"],"comments":[{"owner":{"account_id":3700031,"reputation":6378,"user_id":3080094,"display_name":"vanOekel"},"score":0,"creation_date":1391176886,"post_id":21475576,"comment_id":32423254,"body_markdown":"[AbstractAppender](http://logging.apache.org/log4j/2.0/log4j-core/apidocs/org/apache/logging/log4j/core/appender/AbstractAppender.html) looks like the equivalent of [AppenderSkeleton](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/AppenderSkeleton.html)","body":"<a href=\"http://logging.apache.org/log4j/2.0/log4j-core/apidocs/org/apache/logging/log4j/core/appender/AbstractAppender.html\" rel=\"nofollow noreferrer\">AbstractAppender</a> looks like the equivalent of <a href=\"http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/AppenderSkeleton.html\" rel=\"nofollow noreferrer\">AppenderSkeleton</a>"}],"answers":[{"tags":[],"owner":{"account_id":1555751,"reputation":35615,"user_id":1446916,"display_name":"Remko Popma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1391220071,"creation_date":1391220071,"answer_id":21493232,"question_id":21475576,"body_markdown":"It looks like you are trying to do something similar to this: https://issues.apache.org/jira/browse/LOG4J2-303\r\n\r\nThat Jira ticket has a partial solution. You can look at the code for ConsoleAppender to see how to create a custom appender. \r\n\r\nYou can configure your custom appender in your log4j2.xml just like the built-in appenders, but you need to specify the package of your plugin in the _packages_ attribute of the Configuration element (so that the log4j2 PluginManager can find your plugin.) ","title":"append log4j2 output to TextArea","body":"<p>It looks like you are trying to do something similar to this: <a href=\"https://issues.apache.org/jira/browse/LOG4J2-303\" rel=\"nofollow\">https://issues.apache.org/jira/browse/LOG4J2-303</a></p>\n\n<p>That Jira ticket has a partial solution. You can look at the code for ConsoleAppender to see how to create a custom appender. </p>\n\n<p>You can configure your custom appender in your log4j2.xml just like the built-in appenders, but you need to specify the package of your plugin in the <em>packages</em> attribute of the Configuration element (so that the log4j2 PluginManager can find your plugin.) </p>\n"},{"tags":[],"owner":{"account_id":3426706,"reputation":51,"user_id":2872302,"display_name":"Mario Voigt"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1426606874,"creation_date":1426606874,"answer_id":29103454,"question_id":21475576,"body_markdown":"A late answer but i finally found a solution for the problem.\r\nTo append a log4j2 console stream to a JavaFX TextArea, ListView oder similar control or even a swing control is possible. My solution also appends standard System.out to the logger view. See yourself.\r\n\r\nAt first i show you my current result by screenshot (sorry i cannot include it here directly because i have not enough reputation with my user account at stackoverflow...):\r\n[View the screenshot][1]\r\n\r\n**Step 1: Edit your log4j2.xml file and add the attribute follow=&quot;true&quot;:**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;Configuration status=&quot;WARN&quot;&gt;\r\n\t&lt;Appenders&gt;\r\n\t\t&lt;Console name=&quot;STDOUT&quot; target=&quot;SYSTEM_OUT&quot; follow=&quot;true&quot;&gt;\r\n\t\t\t&lt;PatternLayout pattern=&quot;%d %-5p (%F:%L) - %m%n&quot; /&gt;\r\n\t\t&lt;/Console&gt;\r\n\t&lt;/Appenders&gt;\r\n\t&lt;Loggers&gt;\r\n\t\t&lt;Root level=&quot;DEBUG&quot;&gt;\r\n\t\t\t&lt;AppenderRef ref=&quot;STDOUT&quot; /&gt;\r\n\t\t&lt;/Root&gt;\r\n\t&lt;/Loggers&gt;\r\n    &lt;/Configuration&gt;\r\n\r\n**Step 2: Write a class which use is to append the SYSTEM_OUT to the desired visual control**\r\n\r\nFor my example i made up a small ui control composition like shown in screenshot. Therefore you need a fxml, a controller for the fxml and additionally a LogStringCell, which provides color formatting (this is not needed nut nice gimmick)\r\n\r\n**LoggerConsole.fxml**\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;?import java.lang.*?&gt;\r\n    &lt;?import javafx.scene.control.*?&gt;\r\n    &lt;?import javafx.scene.layout.*?&gt;\r\n    &lt;?import javafx.scene.layout.AnchorPane?&gt;\r\n    \r\n    &lt;VBox prefHeight=&quot;200.0&quot; prefWidth=&quot;800.0&quot; xmlns=&quot;http://javafx.com/javafx/8&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;tuc.plentyfx.configurator.views.LoggerConsoleController&quot;&gt;\r\n       &lt;children&gt;\r\n          &lt;ListView fx:id=&quot;listViewLog&quot; /&gt;\r\n          &lt;ToolBar prefHeight=&quot;40.0&quot; prefWidth=&quot;200.0&quot;&gt;\r\n            &lt;items&gt;\r\n                &lt;Button mnemonicParsing=&quot;false&quot; onAction=&quot;#handleRemoveSelected&quot; text=&quot;Selektierte l&#246;schen&quot; /&gt;\r\n                &lt;Button fx:id=&quot;buttonClearLog&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#handleClearLog&quot; text=&quot;Leeren&quot; /&gt;\r\n                &lt;ToggleButton fx:id=&quot;toggleButtonAutoScroll&quot; mnemonicParsing=&quot;false&quot; text=&quot;Auto-Scroll&quot; /&gt;\r\n                &lt;ChoiceBox fx:id=&quot;choiceBoxLogLevel&quot; prefWidth=&quot;150.0&quot; /&gt;\r\n            &lt;/items&gt;\r\n          &lt;/ToolBar&gt;\r\n       &lt;/children&gt;\r\n    &lt;/VBox&gt;\r\n\r\nThe controller class **LoggerConsoleController.java**\r\n    &lt;!-- language: java --&gt;\r\n\r\n    package tuc.plentyfx.configurator.views;\r\n    \r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    import java.io.PipedInputStream;\r\n    import java.io.PipedOutputStream;\r\n    import java.io.PrintStream;\r\n    \r\n    import javafx.application.Platform;\r\n    import javafx.beans.value.ChangeListener;\r\n    import javafx.beans.value.ObservableValue;\r\n    import javafx.concurrent.Task;\r\n    import javafx.fxml.FXML;\r\n    import javafx.scene.control.ChoiceBox;\r\n    import javafx.scene.control.ListCell;\r\n    import javafx.scene.control.ListView;\r\n    import javafx.scene.control.SelectionMode;\r\n    import javafx.scene.control.ToggleButton;\r\n    import javafx.util.Callback;\r\n    \r\n    import org.apache.logging.log4j.Level;\r\n    import org.apache.logging.log4j.LogManager;\r\n    import org.apache.logging.log4j.Logger;\r\n    import org.apache.logging.log4j.core.LoggerContext;\r\n    import org.apache.logging.log4j.core.config.Configuration;\r\n    import org.apache.logging.log4j.core.config.LoggerConfig;\r\n    \r\n    import tuc.plentyfx.common.LogStringCell;\r\n    \r\n    public class LoggerConsoleController {\r\n    \tstatic final Logger logger = LogManager.getLogger(LoggerConsoleController.class.getName());\r\n    \r\n    \t@FXML\r\n    \tprivate ListView&lt;String&gt; listViewLog;\r\n    \r\n    \t@FXML\r\n    \tprivate ToggleButton toggleButtonAutoScroll;\r\n    \r\n    \t@FXML\r\n    \tprivate ChoiceBox&lt;Level&gt; choiceBoxLogLevel;\r\n    \r\n    \t@FXML\r\n    \tvoid handleRemoveSelected() {\r\n    \t\tlistViewLog.getItems().removeAll(listViewLog.getSelectionModel().getSelectedItems());\r\n    \t}\r\n    \r\n    \t@FXML\r\n    \tvoid handleClearLog() {\r\n    \t\tlistViewLog.getItems().clear();\r\n    \t}\r\n    \r\n    \t@FXML\r\n    \tvoid initialize() {\r\n    \t\tlistViewLog.getSelectionModel().setSelectionMode(SelectionMode.MULTIPLE);\r\n    \t\tLoggerContext loggerContext = (LoggerContext) LogManager.getContext(false);\r\n    \t\tConfiguration loggerConfiguration = loggerContext.getConfiguration();\r\n    \t\tLoggerConfig loggerConfig = loggerConfiguration.getLoggerConfig(LogManager.ROOT_LOGGER_NAME);\r\n    \t\t/* ChoiceBox f&#252;llen */\r\n    \t\tfor (Level level : Level.values()) {\r\n    \t\t\tchoiceBoxLogLevel.getItems().add(level);\r\n    \t\t}\r\n    \t\t/* Aktuellen LogLevel in der ChoiceBox als Auswahl setzen */\r\n    \t\tchoiceBoxLogLevel.getSelectionModel().select(loggerConfig.getLevel());\r\n    \t\tchoiceBoxLogLevel.getSelectionModel().selectedItemProperty().addListener(new ChangeListener&lt;Level&gt;() {\r\n    \t\t\t@Override\r\n    \t\t\tpublic void changed(ObservableValue&lt;? extends Level&gt; arg0, Level oldLevel, Level newLevel) {\r\n    \t\t\t\tloggerConfig.setLevel(newLevel);\r\n    \t\t\t\tloggerContext.updateLoggers(); // &#252;bernehme aktuellen LogLevel\r\n    \t\t\t}\r\n    \t\t});\r\n    \r\n    \t\tlistViewLog.setCellFactory(new Callback&lt;ListView&lt;String&gt;, ListCell&lt;String&gt;&gt;() {\r\n    \t\t\t@Override\r\n    \t\t\tpublic ListCell&lt;String&gt; call(ListView&lt;String&gt; listView) {\r\n    \t\t\t\treturn new LogStringCell();\r\n    \t\t\t}\r\n    \t\t});\r\n    \r\n    \t\t/* den Origial System.out Stream in die ListView umleiten */\r\n    \t\tPipedOutputStream pOut = new PipedOutputStream();\r\n    \t\tSystem.setOut(new PrintStream(pOut));\r\n    \t\tPipedInputStream pIn = null;\r\n    \t\ttry {\r\n    \t\t\tpIn = new PipedInputStream(pOut);\r\n    \t\t}\r\n    \t\tcatch (IOException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t\tBufferedReader reader = new BufferedReader(new InputStreamReader(pIn));\r\n    \r\n    \t\tTask&lt;Void&gt; task = new Task&lt;Void&gt;() {\r\n    \t\t\t@Override\r\n    \t\t\tprotected Void call() throws Exception {\r\n    \t\t\t\twhile (!isCancelled()) {\r\n    \t\t\t\t\ttry {\r\n    \t\t\t\t\t\tString line = reader.readLine();\r\n    \t\t\t\t\t\tif (line != null) {\r\n    \t\t\t\t\t\t\tPlatform.runLater(new Runnable() {\r\n    \t\t\t\t\t\t\t\t@Override\r\n    \t\t\t\t\t\t\t\tpublic void run() {\r\n    \t\t\t\t\t\t\t\t\tlistViewLog.getItems().add(line);\r\n    \r\n    \t\t\t\t\t\t\t\t\t/* Auto-Scroll + Select */\r\n    \t\t\t\t\t\t\t\t\tif (toggleButtonAutoScroll.selectedProperty().get()) {\r\n    \t\t\t\t\t\t\t\t\t\tlistViewLog.scrollTo(listViewLog.getItems().size() - 1);\r\n    \t\t\t\t\t\t\t\t\t\tlistViewLog.getSelectionModel().select(listViewLog.getItems().size() - 1);\r\n    \t\t\t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t});\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tcatch (IOException e) {\r\n    \t\t\t\t\t\te.printStackTrace();\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t\treturn null;\r\n    \t\t\t}\r\n    \t\t};\r\n    \t\tThread thread = new Thread(task);\r\n    \t\tthread.setDaemon(true);\r\n    \t\tthread.start();\r\n    \t}\r\n    }\r\n\r\nThe **LogStringCell.class**\r\n    &lt;!-- language: java --&gt;\r\n\r\n    package tuc.plentyfx.common;\r\n    \r\n    import javafx.scene.control.ListCell;\r\n    import javafx.scene.layout.FlowPane;\r\n    import javafx.scene.text.Text;\r\n    \r\n    public class LogStringCell extends ListCell&lt;String&gt; {\r\n    \r\n    \t@Override\r\n    \tprotected void updateItem(String string, boolean empty) {\r\n    \t\tsuper.updateItem(string, empty);\r\n    \t\tif (string != null &amp;&amp; !isEmpty()) {\r\n    \t\t\tsetGraphic(createAssembledFlowPane(string));\r\n    \t\t}\r\n    \t\telse {\r\n    \t\t\tsetGraphic(null);\r\n    \t\t\tsetText(null);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t/* Erzeuge ein FlowPane mit gef&#252;llten Textbausteien */\r\n    \tprivate FlowPane createAssembledFlowPane(String... messageTokens) {\r\n    \t\tFlowPane flow = new FlowPane();\r\n    \t\tfor (String token : messageTokens) {\r\n    \t\t\tText text = new Text(token);\r\n    \r\n    \t\t\tif (text.toString().contains(&quot; TRACE &quot;)) {\r\n    \t\t\t\ttext.setStyle(&quot;-fx-fill: #0000FF&quot;);\r\n    \t\t\t}\r\n    \t\t\tif (text.toString().contains(&quot; ALL &quot;)) {\r\n    \t\t\t\ttext.setStyle(&quot;-fx-fill: #FF00FF&quot;);\r\n    \t\t\t}\r\n    \t\t\tif (text.toString().contains(&quot; ERROR &quot;)) {\r\n    \t\t\t\ttext.setStyle(&quot;-fx-fill: #FF8080&quot;);\r\n    \t\t\t}\r\n    \t\t\tif (text.toString().contains(&quot; INFO &quot;)) {\r\n    \t\t\t\ttext.setStyle(&quot;-fx-fill: #000000&quot;);\r\n    \t\t\t}\r\n    \t\t\tif (text.toString().contains(&quot; FATAL &quot;)) {\r\n    \t\t\t\ttext.setStyle(&quot;-fx-fill: #FF0000&quot;);\r\n    \t\t\t}\r\n    \t\t\tif (text.toString().contains(&quot; DEBUG &quot;)) {\r\n    \t\t\t\ttext.setStyle(&quot;-fx-fill: #808080&quot;);\r\n    \t\t\t}\r\n    \t\t\tif (text.toString().contains(&quot; OFF &quot;)) {\r\n    \t\t\t\ttext.setStyle(&quot;-fx-fill: #8040FF&quot;);\r\n    \t\t\t}\r\n    \t\t\tif (text.toString().contains(&quot; WARN &quot;)) {\r\n    \t\t\t\ttext.setStyle(&quot;-fx-fill: #FF8000&quot;);\r\n    \t\t\t}\r\n    \r\n    \t\t\tflow.getChildren().add(text);\r\n    \t\t}\r\n    \t\treturn flow;\r\n    \t}\r\n    }\r\n\r\n**Step 3: Use it in your application. Done...!**\r\n\r\n**Problems/Ideas/Limitations:**\r\nThere are currently some issues with my code when using it with threads: creating a log statement from another thread will break the piped stream and throw an error. maybe there is needed a sync pipe. i found code for that with google but didnt try it yet (look also here: [http://www.certpal.com/blogs/2010/11/using-a-pipedinputstream-and-pipedoutputstream/][2]\r\n):\r\n\r\n    package application.common;\r\n\r\n    import java.io.InputStream;\r\n    import java.io.OutputStream;\r\n    \r\n    public class SyncPipe implements Runnable {\r\n    \r\n    \tprivate final OutputStream outputStream;\r\n    \tprivate final InputStream inputStream;\r\n    \r\n    \tpublic SyncPipe(InputStream inputStream, OutputStream outputStream) {\r\n    \t\tthis.inputStream = inputStream;\r\n    \t\tthis.outputStream = outputStream;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\ttry {\r\n    \t\t\tfinal byte[] buffer = new byte[1024];\r\n    \t\t\tfor (int length = 0; (length = inputStream.read(buffer)) != -1;) {\r\n    \t\t\t\toutputStream.write(buffer, 0, length);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tcatch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\nAnother problem: The colored string formatting should be recoded with some better detection for the logging message type (info, debug, trace, etc.). Filtering with things like &quot;text.toString().contains(&quot; TRACE &quot;))&quot; is really ugly.\r\n\r\n***Let me know if you have any questions to this. This thread is really old but if you write here i will receive an email. Then i can answer you directly***\r\n\r\n\r\n  [1]: http://s23.postimg.org/ut5vkh72j/Zwischenablage01.jpg\r\n  [2]: http://www.certpal.com/blogs/2010/11/using-a-pipedinputstream-and-pipedoutputstream/","title":"append log4j2 output to TextArea","body":"<p>A late answer but i finally found a solution for the problem.\nTo append a log4j2 console stream to a JavaFX TextArea, ListView oder similar control or even a swing control is possible. My solution also appends standard System.out to the logger view. See yourself.</p>\n\n<p>At first i show you my current result by screenshot (sorry i cannot include it here directly because i have not enough reputation with my user account at stackoverflow...):\n<a href=\"http://s23.postimg.org/ut5vkh72j/Zwischenablage01.jpg\">View the screenshot</a></p>\n\n<p><strong>Step 1: Edit your log4j2.xml file and add the attribute follow=\"true\":</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;Configuration status=\"WARN\"&gt;\n&lt;Appenders&gt;\n    &lt;Console name=\"STDOUT\" target=\"SYSTEM_OUT\" follow=\"true\"&gt;\n        &lt;PatternLayout pattern=\"%d %-5p (%F:%L) - %m%n\" /&gt;\n    &lt;/Console&gt;\n&lt;/Appenders&gt;\n&lt;Loggers&gt;\n    &lt;Root level=\"DEBUG\"&gt;\n        &lt;AppenderRef ref=\"STDOUT\" /&gt;\n    &lt;/Root&gt;\n&lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n\n<p><strong>Step 2: Write a class which use is to append the SYSTEM_OUT to the desired visual control</strong></p>\n\n<p>For my example i made up a small ui control composition like shown in screenshot. Therefore you need a fxml, a controller for the fxml and additionally a LogStringCell, which provides color formatting (this is not needed nut nice gimmick)</p>\n\n<p><strong>LoggerConsole.fxml</strong>\n    </p>\n\n<pre><code>&lt;?import java.lang.*?&gt;\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n&lt;?import javafx.scene.layout.AnchorPane?&gt;\n\n&lt;VBox prefHeight=\"200.0\" prefWidth=\"800.0\" xmlns=\"http://javafx.com/javafx/8\" xmlns:fx=\"http://javafx.com/fxml/1\" fx:controller=\"tuc.plentyfx.configurator.views.LoggerConsoleController\"&gt;\n   &lt;children&gt;\n      &lt;ListView fx:id=\"listViewLog\" /&gt;\n      &lt;ToolBar prefHeight=\"40.0\" prefWidth=\"200.0\"&gt;\n        &lt;items&gt;\n            &lt;Button mnemonicParsing=\"false\" onAction=\"#handleRemoveSelected\" text=\"Selektierte löschen\" /&gt;\n            &lt;Button fx:id=\"buttonClearLog\" mnemonicParsing=\"false\" onAction=\"#handleClearLog\" text=\"Leeren\" /&gt;\n            &lt;ToggleButton fx:id=\"toggleButtonAutoScroll\" mnemonicParsing=\"false\" text=\"Auto-Scroll\" /&gt;\n            &lt;ChoiceBox fx:id=\"choiceBoxLogLevel\" prefWidth=\"150.0\" /&gt;\n        &lt;/items&gt;\n      &lt;/ToolBar&gt;\n   &lt;/children&gt;\n&lt;/VBox&gt;\n</code></pre>\n\n<p>The controller class <strong>LoggerConsoleController.java</strong>\n    </p>\n\n<pre><code>package tuc.plentyfx.configurator.views;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.PipedInputStream;\nimport java.io.PipedOutputStream;\nimport java.io.PrintStream;\n\nimport javafx.application.Platform;\nimport javafx.beans.value.ChangeListener;\nimport javafx.beans.value.ObservableValue;\nimport javafx.concurrent.Task;\nimport javafx.fxml.FXML;\nimport javafx.scene.control.ChoiceBox;\nimport javafx.scene.control.ListCell;\nimport javafx.scene.control.ListView;\nimport javafx.scene.control.SelectionMode;\nimport javafx.scene.control.ToggleButton;\nimport javafx.util.Callback;\n\nimport org.apache.logging.log4j.Level;\nimport org.apache.logging.log4j.LogManager;\nimport org.apache.logging.log4j.Logger;\nimport org.apache.logging.log4j.core.LoggerContext;\nimport org.apache.logging.log4j.core.config.Configuration;\nimport org.apache.logging.log4j.core.config.LoggerConfig;\n\nimport tuc.plentyfx.common.LogStringCell;\n\npublic class LoggerConsoleController {\n    static final Logger logger = LogManager.getLogger(LoggerConsoleController.class.getName());\n\n    @FXML\n    private ListView&lt;String&gt; listViewLog;\n\n    @FXML\n    private ToggleButton toggleButtonAutoScroll;\n\n    @FXML\n    private ChoiceBox&lt;Level&gt; choiceBoxLogLevel;\n\n    @FXML\n    void handleRemoveSelected() {\n        listViewLog.getItems().removeAll(listViewLog.getSelectionModel().getSelectedItems());\n    }\n\n    @FXML\n    void handleClearLog() {\n        listViewLog.getItems().clear();\n    }\n\n    @FXML\n    void initialize() {\n        listViewLog.getSelectionModel().setSelectionMode(SelectionMode.MULTIPLE);\n        LoggerContext loggerContext = (LoggerContext) LogManager.getContext(false);\n        Configuration loggerConfiguration = loggerContext.getConfiguration();\n        LoggerConfig loggerConfig = loggerConfiguration.getLoggerConfig(LogManager.ROOT_LOGGER_NAME);\n        /* ChoiceBox füllen */\n        for (Level level : Level.values()) {\n            choiceBoxLogLevel.getItems().add(level);\n        }\n        /* Aktuellen LogLevel in der ChoiceBox als Auswahl setzen */\n        choiceBoxLogLevel.getSelectionModel().select(loggerConfig.getLevel());\n        choiceBoxLogLevel.getSelectionModel().selectedItemProperty().addListener(new ChangeListener&lt;Level&gt;() {\n            @Override\n            public void changed(ObservableValue&lt;? extends Level&gt; arg0, Level oldLevel, Level newLevel) {\n                loggerConfig.setLevel(newLevel);\n                loggerContext.updateLoggers(); // übernehme aktuellen LogLevel\n            }\n        });\n\n        listViewLog.setCellFactory(new Callback&lt;ListView&lt;String&gt;, ListCell&lt;String&gt;&gt;() {\n            @Override\n            public ListCell&lt;String&gt; call(ListView&lt;String&gt; listView) {\n                return new LogStringCell();\n            }\n        });\n\n        /* den Origial System.out Stream in die ListView umleiten */\n        PipedOutputStream pOut = new PipedOutputStream();\n        System.setOut(new PrintStream(pOut));\n        PipedInputStream pIn = null;\n        try {\n            pIn = new PipedInputStream(pOut);\n        }\n        catch (IOException e) {\n            e.printStackTrace();\n        }\n        BufferedReader reader = new BufferedReader(new InputStreamReader(pIn));\n\n        Task&lt;Void&gt; task = new Task&lt;Void&gt;() {\n            @Override\n            protected Void call() throws Exception {\n                while (!isCancelled()) {\n                    try {\n                        String line = reader.readLine();\n                        if (line != null) {\n                            Platform.runLater(new Runnable() {\n                                @Override\n                                public void run() {\n                                    listViewLog.getItems().add(line);\n\n                                    /* Auto-Scroll + Select */\n                                    if (toggleButtonAutoScroll.selectedProperty().get()) {\n                                        listViewLog.scrollTo(listViewLog.getItems().size() - 1);\n                                        listViewLog.getSelectionModel().select(listViewLog.getItems().size() - 1);\n                                    }\n                                }\n                            });\n                        }\n                    }\n                    catch (IOException e) {\n                        e.printStackTrace();\n                    }\n                }\n                return null;\n            }\n        };\n        Thread thread = new Thread(task);\n        thread.setDaemon(true);\n        thread.start();\n    }\n}\n</code></pre>\n\n<p>The <strong>LogStringCell.class</strong>\n    </p>\n\n<pre><code>package tuc.plentyfx.common;\n\nimport javafx.scene.control.ListCell;\nimport javafx.scene.layout.FlowPane;\nimport javafx.scene.text.Text;\n\npublic class LogStringCell extends ListCell&lt;String&gt; {\n\n    @Override\n    protected void updateItem(String string, boolean empty) {\n        super.updateItem(string, empty);\n        if (string != null &amp;&amp; !isEmpty()) {\n            setGraphic(createAssembledFlowPane(string));\n        }\n        else {\n            setGraphic(null);\n            setText(null);\n        }\n    }\n\n    /* Erzeuge ein FlowPane mit gefüllten Textbausteien */\n    private FlowPane createAssembledFlowPane(String... messageTokens) {\n        FlowPane flow = new FlowPane();\n        for (String token : messageTokens) {\n            Text text = new Text(token);\n\n            if (text.toString().contains(\" TRACE \")) {\n                text.setStyle(\"-fx-fill: #0000FF\");\n            }\n            if (text.toString().contains(\" ALL \")) {\n                text.setStyle(\"-fx-fill: #FF00FF\");\n            }\n            if (text.toString().contains(\" ERROR \")) {\n                text.setStyle(\"-fx-fill: #FF8080\");\n            }\n            if (text.toString().contains(\" INFO \")) {\n                text.setStyle(\"-fx-fill: #000000\");\n            }\n            if (text.toString().contains(\" FATAL \")) {\n                text.setStyle(\"-fx-fill: #FF0000\");\n            }\n            if (text.toString().contains(\" DEBUG \")) {\n                text.setStyle(\"-fx-fill: #808080\");\n            }\n            if (text.toString().contains(\" OFF \")) {\n                text.setStyle(\"-fx-fill: #8040FF\");\n            }\n            if (text.toString().contains(\" WARN \")) {\n                text.setStyle(\"-fx-fill: #FF8000\");\n            }\n\n            flow.getChildren().add(text);\n        }\n        return flow;\n    }\n}\n</code></pre>\n\n<p><strong>Step 3: Use it in your application. Done...!</strong></p>\n\n<p><strong>Problems/Ideas/Limitations:</strong>\nThere are currently some issues with my code when using it with threads: creating a log statement from another thread will break the piped stream and throw an error. maybe there is needed a sync pipe. i found code for that with google but didnt try it yet (look also here: <a href=\"http://www.certpal.com/blogs/2010/11/using-a-pipedinputstream-and-pipedoutputstream/\">http://www.certpal.com/blogs/2010/11/using-a-pipedinputstream-and-pipedoutputstream/</a>\n):</p>\n\n<pre><code>package application.common;\n\nimport java.io.InputStream;\nimport java.io.OutputStream;\n\npublic class SyncPipe implements Runnable {\n\n    private final OutputStream outputStream;\n    private final InputStream inputStream;\n\n    public SyncPipe(InputStream inputStream, OutputStream outputStream) {\n        this.inputStream = inputStream;\n        this.outputStream = outputStream;\n    }\n\n    @Override\n    public void run() {\n        try {\n            final byte[] buffer = new byte[1024];\n            for (int length = 0; (length = inputStream.read(buffer)) != -1;) {\n                outputStream.write(buffer, 0, length);\n            }\n        }\n        catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n}\n</code></pre>\n\n<p>Another problem: The colored string formatting should be recoded with some better detection for the logging message type (info, debug, trace, etc.). Filtering with things like \"text.toString().contains(\" TRACE \"))\" is really ugly.</p>\n\n<p><strong><em>Let me know if you have any questions to this. This thread is really old but if you write here i will receive an email. Then i can answer you directly</em></strong></p>\n"}],"owner":{"account_id":2019615,"reputation":39,"user_id":1806116,"display_name":"christianPro"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3405,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1684831130,"creation_date":1391157518,"question_id":21475576,"body_markdown":"I&#39;m searching for a simple method in log4j2 to append logs to a textArea. \r\n\r\nIn log4j, this would be possible by extending the AppenderSkeleton class, but I can&#39;t find a similar mechanism in log4j2. \r\n\r\nFurthermore, rerouting the System output with \r\n\r\n    System.setOut(myPrintStream);\r\n\r\ndoesn&#39;t work either. \r\n\r\nIs there a possiblity to get this to work with log4j2?","title":"append log4j2 output to TextArea","body":"<p>I'm searching for a simple method in log4j2 to append logs to a textArea. </p>\n\n<p>In log4j, this would be possible by extending the AppenderSkeleton class, but I can't find a similar mechanism in log4j2. </p>\n\n<p>Furthermore, rerouting the System output with </p>\n\n<pre><code>System.setOut(myPrintStream);\n</code></pre>\n\n<p>doesn't work either. </p>\n\n<p>Is there a possiblity to get this to work with log4j2?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":21225504,"reputation":1108,"user_id":15611270,"display_name":"Rocco"},"score":1,"creation_date":1621247832,"post_id":67568025,"comment_id":119428992,"body_markdown":"You don&#39;t close the BufferedReader for file1, this is the problem. Insert `br.close();` before `br = new BufferedReader(new FileReader(resultPath+&quot;file2.txt&quot;)); `","body":"You don&#39;t close the BufferedReader for file1, this is the problem. Insert <code>br.close();</code> before <code>br = new BufferedReader(new FileReader(resultPath+&quot;file2.txt&quot;)); </code>"},{"owner":{"account_id":19382678,"reputation":774,"user_id":14173556,"display_name":"paladin"},"score":1,"creation_date":1621248174,"post_id":67568025,"comment_id":119429135,"body_markdown":"No, he needs to close the anonymous `FileReader` -&gt; `new FileReader(resultPath+&quot;...&quot;);`. Better create a `FileReader` object, like `FileReader fr = new FileReader(resultPath+&quot;...&quot;);`, use this object for your `BufferedReader`, like `BufferedReader br = new BufferedReader(fr);`, so you are able to close the `FileReader` independently from the `BufferedReader`, using `fr.close();`.","body":"No, he needs to close the anonymous <code>FileReader</code> -&gt; <code>new FileReader(resultPath+&quot;...&quot;);</code>. Better create a <code>FileReader</code> object, like <code>FileReader fr = new FileReader(resultPath+&quot;...&quot;);</code>, use this object for your <code>BufferedReader</code>, like <code>BufferedReader br = new BufferedReader(fr);</code>, so you are able to close the <code>FileReader</code> independently from the <code>BufferedReader</code>, using <code>fr.close();</code>."},{"owner":{"account_id":3716652,"reputation":75,"user_id":13994935,"display_name":"fairyjee"},"score":0,"creation_date":1621248183,"post_id":67568025,"comment_id":119429141,"body_markdown":"@Rocco you are right. I thought i have used same br for both files so one close statement is enough. Thankyou :)","body":"@Rocco you are right. I thought i have used same br for both files so one close statement is enough. Thankyou :)"}],"answers":[{"tags":[],"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1684830931,"creation_date":1621248838,"answer_id":67568300,"question_id":67568025,"body_markdown":"Closing the streams as suggested in the comments will fix. However you are writing a lot of code which is hard to debug / fix later. Instead simplify to NIO calls and add try with resources handling to auto-close everything on the way:\r\n\r\n        String tmp  = System.getProperty(&quot;java.io.tmpdir&quot;);\r\n        Path result = Path.of(tmp, &quot;NewFolder&quot;, &quot;file3.txt&quot;);\r\n        Path file1  = Path.of(tmp,&quot;file1.txt&quot;);\r\n        Path file2  = Path.of(tmp,&quot;file2.txt&quot;);\r\n\r\n        try(OutputStream output = Files.newOutputStream(result)) {\r\n            try(InputStream input = Files.newInputStream(file1))  {\r\n                input.transferTo(output);\r\n            }\r\n            try(InputStream input = Files.newInputStream(file2))  {\r\n                input.transferTo(output);\r\n            }\r\n        }\r\n        Files.deleteIfExists(file1);\r\n        Files.deleteIfExists(file2);\r\n\r\n**EDIT**\r\n\r\nThe above works fine though I am unsure as to why I didn&#39;t suggest using `Files.copy(Path, OutputStream)` which does exactly what is shown above, simplifying the copying as:\r\n\r\n    try(OutputStream output = Files.newOutputStream(result)) {\r\n        // use a loop over the files to copy or:\r\n        Files.copy(file1, output);\r\n        Files.copy(file2, output);\r\n    }\r\n\r\nViewing source of JDK20 `Files.copy(Path, OutputStream)` shows this implementation:\r\n\r\n    public static long copy(Path source, OutputStream out) throws IOException {\r\n        // ensure not null before opening file\r\n        Objects.requireNonNull(out);\r\n\r\n        try (InputStream in = newInputStream(source)) {\r\n            return in.transferTo(out);\r\n        }\r\n    }\r\n","title":"merge file and delete the old file","body":"<p>Closing the streams as suggested in the comments will fix. However you are writing a lot of code which is hard to debug / fix later. Instead simplify to NIO calls and add try with resources handling to auto-close everything on the way:</p>\n<pre><code>    String tmp  = System.getProperty(&quot;java.io.tmpdir&quot;);\n    Path result = Path.of(tmp, &quot;NewFolder&quot;, &quot;file3.txt&quot;);\n    Path file1  = Path.of(tmp,&quot;file1.txt&quot;);\n    Path file2  = Path.of(tmp,&quot;file2.txt&quot;);\n\n    try(OutputStream output = Files.newOutputStream(result)) {\n        try(InputStream input = Files.newInputStream(file1))  {\n            input.transferTo(output);\n        }\n        try(InputStream input = Files.newInputStream(file2))  {\n            input.transferTo(output);\n        }\n    }\n    Files.deleteIfExists(file1);\n    Files.deleteIfExists(file2);\n</code></pre>\n<p><strong>EDIT</strong></p>\n<p>The above works fine though I am unsure as to why I didn't suggest using <code>Files.copy(Path, OutputStream)</code> which does exactly what is shown above, simplifying the copying as:</p>\n<pre><code>try(OutputStream output = Files.newOutputStream(result)) {\n    // use a loop over the files to copy or:\n    Files.copy(file1, output);\n    Files.copy(file2, output);\n}\n</code></pre>\n<p>Viewing source of JDK20 <code>Files.copy(Path, OutputStream)</code> shows this implementation:</p>\n<pre><code>public static long copy(Path source, OutputStream out) throws IOException {\n    // ensure not null before opening file\n    Objects.requireNonNull(out);\n\n    try (InputStream in = newInputStream(source)) {\n        return in.transferTo(out);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3716652,"reputation":75,"user_id":13994935,"display_name":"fairyjee"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":353,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":67568300,"answer_count":1,"score":0,"last_activity_date":1684830931,"creation_date":1621247690,"question_id":67568025,"body_markdown":"I have been trying to merge two files into new file and below code does it job. But after the merge i want to delete the old files. The code I am using to delete files just delete 1 file (file2) not the both of them. \r\n``` \r\npublic static void Filemerger() throws IOException  \r\n    { \r\n\t    \r\n\t   String resultPath = System.getProperty(&quot;java.io.tmpdir&quot;);\r\n\t   File result = new File(resultPath+&quot;//NewFolder&quot;, &quot;//file3.txt&quot;); \r\n\t\t\r\n\t\t// PrintWriter object for file3.txt \r\n        PrintWriter pw = new PrintWriter(result); \r\n          \r\n        // BufferedReader object for file1.txt \r\n        BufferedReader br = new BufferedReader(new FileReader(resultPath+&quot;file1.txt&quot;)); \r\n          \r\n        String line = br.readLine(); \r\n          \r\n        // loop to copy each line of  \r\n        // file1.txt to  file3.txt \r\n        while (line != null) \r\n        { \r\n            pw.println(line); \r\n            line = br.readLine(); \r\n        } \r\n        \r\n        pw.flush();\r\n          \r\n        br = new BufferedReader(new FileReader(resultPath+&quot;file2.txt&quot;)); \r\n          \r\n        line = br.readLine(); \r\n          \r\n        // loop to copy each line of  \r\n        // file2.txt to  file3.txt \r\n        while(line != null) \r\n        { \r\n            pw.println(line); \r\n            line = br.readLine(); \r\n        } \r\n          \r\n        pw.flush(); \r\n          \r\n        // closing resources \r\n        br.close(); \r\n         \r\n        pw.close(); \r\n        \r\n        File dir = new File(resultPath);\r\n    \t\r\n    \tFileFilter fileFilter1 = new WildcardFileFilter(new String[] {&quot;file1.txt&quot;, &quot;file2.txt&quot;}, IOCase.SENSITIVE); \r\n    \tFile[] fileList1 = dir.listFiles(fileFilter1);\r\n    \t\t\r\n    \tfor (int i = 0; i &lt; fileList1.length; i++) {\r\n    \t\t  if (fileList1[i].isFile()) {\r\n    \t\t\t  \r\n    \t\t    File file1 = fileList1[i].getAbsoluteFile();\r\n      \t\t    file1.delete();\r\n    \t\t  }\r\n    \t}\r\n    \t\r\n    }\r\n```\r\nI also try this code to delete the file1 as above code delete the file2:\r\n ```\r\n Path fileToDeletePath = Paths.get(resultPath+&quot;file1.txt&quot;);\r\n        Files.delete(fileToDeletePath);\r\n```\r\nbut it throws an exception that **Exception in thread &quot;main&quot; java.nio.file.FileSystemException: C:\\Users\\haya\\AppData\\Local\\Temp\\file1: The process cannot access the file because it is being used by another process.**","title":"merge file and delete the old file","body":"<p>I have been trying to merge two files into new file and below code does it job. But after the merge i want to delete the old files. The code I am using to delete files just delete 1 file (file2) not the both of them.</p>\n<pre><code>public static void Filemerger() throws IOException  \n    { \n        \n       String resultPath = System.getProperty(&quot;java.io.tmpdir&quot;);\n       File result = new File(resultPath+&quot;//NewFolder&quot;, &quot;//file3.txt&quot;); \n        \n        // PrintWriter object for file3.txt \n        PrintWriter pw = new PrintWriter(result); \n          \n        // BufferedReader object for file1.txt \n        BufferedReader br = new BufferedReader(new FileReader(resultPath+&quot;file1.txt&quot;)); \n          \n        String line = br.readLine(); \n          \n        // loop to copy each line of  \n        // file1.txt to  file3.txt \n        while (line != null) \n        { \n            pw.println(line); \n            line = br.readLine(); \n        } \n        \n        pw.flush();\n          \n        br = new BufferedReader(new FileReader(resultPath+&quot;file2.txt&quot;)); \n          \n        line = br.readLine(); \n          \n        // loop to copy each line of  \n        // file2.txt to  file3.txt \n        while(line != null) \n        { \n            pw.println(line); \n            line = br.readLine(); \n        } \n          \n        pw.flush(); \n          \n        // closing resources \n        br.close(); \n         \n        pw.close(); \n        \n        File dir = new File(resultPath);\n        \n        FileFilter fileFilter1 = new WildcardFileFilter(new String[] {&quot;file1.txt&quot;, &quot;file2.txt&quot;}, IOCase.SENSITIVE); \n        File[] fileList1 = dir.listFiles(fileFilter1);\n            \n        for (int i = 0; i &lt; fileList1.length; i++) {\n              if (fileList1[i].isFile()) {\n                  \n                File file1 = fileList1[i].getAbsoluteFile();\n                file1.delete();\n              }\n        }\n        \n    }\n</code></pre>\n<p>I also try this code to delete the file1 as above code delete the file2:</p>\n<pre><code>Path fileToDeletePath = Paths.get(resultPath+&quot;file1.txt&quot;);\n       Files.delete(fileToDeletePath);\n</code></pre>\n<p>but it throws an exception that <strong>Exception in thread &quot;main&quot; java.nio.file.FileSystemException: C:\\Users\\haya\\AppData\\Local\\Temp\\file1: The process cannot access the file because it is being used by another process.</strong></p>\n"},{"tags":["java","eclipse","intellij-idea","configuration","jboss7.x"],"comments":[{"owner":{"account_id":3538058,"reputation":5428,"user_id":2960034,"display_name":"y.bedrov"},"score":1,"creation_date":1618418792,"post_id":67092037,"comment_id":118597606,"body_markdown":"Please check &quot;Settings/Preferences | Build, Execution, Deployment | Application Servers&quot;. As for &quot;launch configuration&quot; - you could configure options in run configuration.","body":"Please check &quot;Settings/Preferences | Build, Execution, Deployment | Application Servers&quot;. As for &quot;launch configuration&quot; - you could configure options in run configuration."}],"answers":[{"tags":[],"owner":{"account_id":7425610,"reputation":9,"user_id":7351955,"display_name":"lstan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684830872,"creation_date":1657130418,"answer_id":72888038,"question_id":67092037,"body_markdown":"There are instructions from IntelliJ site:\r\n\r\n[Application Servers][2]\r\n\r\n[Application server run configurations][3]\r\n\r\nUpdate:\r\nBasically you add your JBoss server\r\n\r\nSettings-&gt;Application Servers- click + icon to add server\r\n\r\n![screenshot here][1]\r\n\r\nThen in run configurations you add and config  your JBoss server\r\n![screenshot here][5]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AWKqp.png\r\n  [2]: https://www.jetbrains.com/help/idea/application-servers-settings.html\r\n  [3]: https://www.jetbrains.com/help/idea/creating-run-debug-configuration-for-application-server.html\r\n  [4]: https://i.stack.imgur.com/z4ghv.png\r\n  [5]: https://i.stack.imgur.com/I0nOL.png","title":"How to configure JBoss server in IntelliJ with server base dir and a settings.xml","body":"<p>There are instructions from IntelliJ site:</p>\n<p><a href=\"https://www.jetbrains.com/help/idea/application-servers-settings.html\" rel=\"nofollow noreferrer\">Application Servers</a></p>\n<p><a href=\"https://www.jetbrains.com/help/idea/creating-run-debug-configuration-for-application-server.html\" rel=\"nofollow noreferrer\">Application server run configurations</a></p>\n<p>Update:\nBasically you add your JBoss server</p>\n<p>Settings-&gt;Application Servers- click + icon to add server</p>\n<p><img src=\"https://i.stack.imgur.com/AWKqp.png\" alt=\"screenshot here\" /></p>\n<p>Then in run configurations you add and config  your JBoss server\n<img src=\"https://i.stack.imgur.com/I0nOL.png\" alt=\"screenshot here\" /></p>\n"}],"owner":{"account_id":8736925,"reputation":73,"user_id":7475630,"display_name":"El Cattivo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2229,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1684830872,"creation_date":1618404233,"question_id":67092037,"body_markdown":"I&#39;m trying to switch from Eclipse to IntelliJ Ultimate. But I have trouble configuring an application server.\r\n\r\n**What I have:**\r\n- IntelliJ IDEA Ultimate 2020.3\r\n- a JavaEE application running on JBoss EAP 7.1\r\n\r\n**What I already achieved:**\r\n- Adding an application server in Settings -&gt; Build, Execution, Deployment -&gt; Application Servers: I added a JBoss Server and specified the JBoss home directory\r\n- Adding a Run/Debug Configuration where I chose the JBoss server, added the artifacts which should be deployed, added some VM options, specified the JRE\r\n\r\n**Where I am stuck:**\r\nHere are the things I miss from the Eclipse configuration, and I can&#39;t find any documentation or help about that:\r\n- In Eclipse, there is a &quot;server runtime environment&quot; which specifies a &quot;server base directory&quot; and a &quot;configuration file&quot; (settings.xml) in addition to the server home directory and JRE. Where can I find these settings in IntelliJ?\r\n- Alternatively, there is the &quot;launch configuration&quot; in Eclipse, where you can define &quot;program arguments&quot; in addition to VM arguments. These also seem to set the server config and base dir.\r\n\r\nAny help is highly appreciated. Thanks a lot!","title":"How to configure JBoss server in IntelliJ with server base dir and a settings.xml","body":"<p>I'm trying to switch from Eclipse to IntelliJ Ultimate. But I have trouble configuring an application server.</p>\n<p><strong>What I have:</strong></p>\n<ul>\n<li>IntelliJ IDEA Ultimate 2020.3</li>\n<li>a JavaEE application running on JBoss EAP 7.1</li>\n</ul>\n<p><strong>What I already achieved:</strong></p>\n<ul>\n<li>Adding an application server in Settings -&gt; Build, Execution, Deployment -&gt; Application Servers: I added a JBoss Server and specified the JBoss home directory</li>\n<li>Adding a Run/Debug Configuration where I chose the JBoss server, added the artifacts which should be deployed, added some VM options, specified the JRE</li>\n</ul>\n<p><strong>Where I am stuck:</strong>\nHere are the things I miss from the Eclipse configuration, and I can't find any documentation or help about that:</p>\n<ul>\n<li>In Eclipse, there is a &quot;server runtime environment&quot; which specifies a &quot;server base directory&quot; and a &quot;configuration file&quot; (settings.xml) in addition to the server home directory and JRE. Where can I find these settings in IntelliJ?</li>\n<li>Alternatively, there is the &quot;launch configuration&quot; in Eclipse, where you can define &quot;program arguments&quot; in addition to VM arguments. These also seem to set the server config and base dir.</li>\n</ul>\n<p>Any help is highly appreciated. Thanks a lot!</p>\n"},{"tags":["java","spring","metrics","spring-boot-actuator"],"answers":[{"tags":[],"owner":{"account_id":4657214,"reputation":1415,"user_id":3772478,"accept_rate":83,"display_name":"Hazim"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1548760315,"creation_date":1548760315,"answer_id":54419761,"question_id":54419431,"body_markdown":"You can inject properties which are exposed through actuator endpoints (like `/health`) by injecting instance of endpoint class  using actuator API.\r\n\r\nThis stackoverflow answer explains about it in detail: \r\nhttps://stackoverflow.com/questions/50996603/does-spring-boot-actuator-have-a-java-api","title":"Obtain Spring actuator &#39;health&#39; metrics","body":"<p>You can inject properties which are exposed through actuator endpoints (like <code>/health</code>) by injecting instance of endpoint class  using actuator API.</p>\n\n<p>This stackoverflow answer explains about it in detail: \n<a href=\"https://stackoverflow.com/questions/50996603/does-spring-boot-actuator-have-a-java-api\">Does Spring Boot Actuator have a Java API?</a></p>\n"},{"tags":[],"owner":{"account_id":1709537,"reputation":77,"user_id":1567858,"display_name":"formatqs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1613567322,"creation_date":1613567322,"answer_id":66242569,"question_id":54419431,"body_markdown":"Take a look on this example\r\n\r\n```\r\npackage ru.formatko;\r\n\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport io.prometheus.client.Collector;\r\nimport io.prometheus.client.exporter.common.TextFormat;\r\nimport java.io.IOException;\r\nimport java.io.StringWriter;\r\nimport java.io.Writer;\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport lombok.Data;\r\nimport lombok.SneakyThrows;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.boot.actuate.endpoint.annotation.Endpoint;\r\nimport org.springframework.boot.actuate.endpoint.annotation.ReadOperation;\r\nimport org.springframework.boot.actuate.endpoint.web.WebEndpointResponse;\r\nimport org.springframework.boot.actuate.health.HealthEndpoint;\r\nimport org.springframework.boot.actuate.health.HttpCodeStatusMapper;\r\nimport org.springframework.boot.actuate.health.Status;\r\nimport org.springframework.stereotype.Component;\r\n\r\n/**\r\n * Example:\r\n * # HELP health_status HealthCheck result in prometheus&#39;s response format\r\n * # TYPE health_status gauge\r\n * health_status{application=&quot;java-service&quot;,type=&quot;main&quot;,} 1.0\r\n * health_status{application=&quot;java-service&quot;,type=&quot;db&quot;,database=&quot;PostgreSQL&quot;,validationQuery=&quot;isValid()&quot;,} 1.0\r\n * health_status{application=&quot;java-service&quot;,type=&quot;diskSpace&quot;,total=&quot;506332180480&quot;,exists=&quot;true&quot;,threshold=&quot;10485760&quot;,free=&quot;412188921856&quot;,} 1.0\r\n * health_status{application=&quot;java-service&quot;,type=&quot;ping&quot;,} 1.0\r\n*/\r\n@Component\r\n@Endpoint(id = &quot;health-check&quot;)\r\npublic class HeathPrometheusEndpoint {\r\n\r\n    private static final String APPLICATION = &quot;application&quot;;\r\n    private static final String TYPE = &quot;type&quot;;\r\n    public static final String SAMPLE_HEALTH_STATUS = &quot;health_status&quot;;\r\n\r\n    private final HealthEndpoint healthEndpoint;\r\n    private final String appName;\r\n    private final ObjectMapper mapper;\r\n    private final HttpCodeStatusMapper httpCodeStatusMapper;\r\n\r\n    public HeathPrometheusEndpoint(HealthEndpoint healthEndpoint,\r\n                                   ObjectMapper mapper,\r\n                                   @Value(&quot;${spring.application.name:}&quot;) String appName,\r\n                                   HttpCodeStatusMapper httpCodeStatusMapper) {\r\n        this.healthEndpoint = healthEndpoint;\r\n        this.mapper = mapper;\r\n        this.appName = appName;\r\n        this.httpCodeStatusMapper = httpCodeStatusMapper;\r\n    }\r\n\r\n    @ReadOperation(produces = TextFormat.CONTENT_TYPE_004)\r\n    public WebEndpointResponse&lt;String&gt; healthPrometheus() {\r\n        StatusDto status = createStatusDto();\r\n        List&lt;Collector.MetricFamilySamples.Sample&gt; samples = new ArrayList&lt;&gt;();\r\n        samples.add(createMainSample(status));\r\n        samples.addAll(createComponentSamples(status));\r\n        return createStringWebEndpointResponse(status, createMetricFamily(samples));\r\n    }\r\n\r\n    @SneakyThrows\r\n    private StatusDto createStatusDto() {\r\n        return mapper.readValue(mapper.writeValueAsString(healthEndpoint.health()), StatusDto.class);\r\n    }\r\n\r\n\r\n    private Collector.MetricFamilySamples.Sample createMainSample(StatusDto status) {\r\n        Labels labels = new Labels();\r\n        labels.add(APPLICATION, appName);\r\n        labels.add(TYPE, &quot;main&quot;);\r\n\r\n        return createSample(SAMPLE_HEALTH_STATUS, labels, status.getStatus());\r\n    }\r\n\r\n    private List&lt;Collector.MetricFamilySamples.Sample&gt; createComponentSamples(StatusDto status) {\r\n        List&lt;Collector.MetricFamilySamples.Sample&gt; list = new ArrayList&lt;&gt;();\r\n        for (Map.Entry&lt;String, StatusDto&gt; entry : status.components.entrySet()) {\r\n            Labels labels = new Labels();\r\n            labels.add(APPLICATION, appName);\r\n            labels.add(TYPE, entry.getKey());\r\n\r\n            StatusDto statusDto = entry.getValue();\r\n            Map&lt;String, Object&gt; details = statusDto.getDetails();\r\n            if (details != null &amp;&amp; !details.isEmpty()) {\r\n                details.forEach((k, v) -&gt; labels.add(k, String.valueOf(v)));\r\n            }\r\n            list.add(createSample(SAMPLE_HEALTH_STATUS, labels, statusDto.getStatus()));\r\n        }\r\n        return list;\r\n    }\r\n\r\n    private Collector.MetricFamilySamples.Sample createSample(String name, Labels labels, Status status) {\r\n        double v = Status.UP.equals(status) ? 1 : 0;\r\n        return new Collector.MetricFamilySamples.Sample(name, labels.getLabels(), labels.getValues(), v);\r\n    }\r\n\r\n    private Collector.MetricFamilySamples createMetricFamily(List&lt;Collector.MetricFamilySamples.Sample&gt; s) {\r\n        return new Collector.MetricFamilySamples(\r\n            &quot;health_status&quot;, Collector.Type.GAUGE,\r\n            &quot;HealthCheck result in prometheus&#39;s response format&quot;, s);\r\n    }\r\n\r\n    private WebEndpointResponse&lt;String&gt; createStringWebEndpointResponse(\r\n        StatusDto status, Collector.MetricFamilySamples metricFamilySamples\r\n    ) {\r\n        try {\r\n            Writer writer = new StringWriter();\r\n            TextFormat.write004(writer,\r\n                Collections.enumeration(Collections.singletonList(metricFamilySamples)));\r\n\r\n            return wrapResponse(writer.toString(), status);\r\n        } catch (IOException ex) {\r\n            // This actually never happens since StringWriter::write() doesn&#39;t throw any\r\n            // IOException\r\n            throw new RuntimeException(&quot;Writing metrics failed&quot;, ex);\r\n        }\r\n    }\r\n\r\n    private WebEndpointResponse&lt;String&gt; wrapResponse(String body, StatusDto status) {\r\n        if (body == null || body.isEmpty()) {\r\n            return new WebEndpointResponse&lt;&gt;(&quot;&quot;, 500);\r\n        } else {\r\n            int statusCode = httpCodeStatusMapper.getStatusCode(status.getStatus());\r\n            return new WebEndpointResponse&lt;&gt;(body, statusCode);\r\n        }\r\n    }\r\n\r\n    public static class Labels {\r\n        private final Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\r\n\r\n        public void add(String label, String value) {\r\n            if (value != null &amp;&amp; !value.isEmpty()) {\r\n                map.put(label, value);\r\n            }\r\n        }\r\n\r\n        public List&lt;String&gt; getLabels() {\r\n            return new ArrayList&lt;&gt;(map.keySet());\r\n        }\r\n\r\n        public List&lt;String&gt; getValues() {\r\n            return new ArrayList&lt;&gt;(map.values());\r\n        }\r\n    }\r\n\r\n    @Data\r\n    public static class StatusDto {\r\n        private Status status;\r\n        private Map&lt;String, StatusDto&gt; components;\r\n        private Map&lt;String, Object&gt; details;\r\n    }\r\n}\r\n```","title":"Obtain Spring actuator &#39;health&#39; metrics","body":"<p>Take a look on this example</p>\n<pre><code>package ru.formatko;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport io.prometheus.client.Collector;\nimport io.prometheus.client.exporter.common.TextFormat;\nimport java.io.IOException;\nimport java.io.StringWriter;\nimport java.io.Writer;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport lombok.Data;\nimport lombok.SneakyThrows;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.boot.actuate.endpoint.annotation.Endpoint;\nimport org.springframework.boot.actuate.endpoint.annotation.ReadOperation;\nimport org.springframework.boot.actuate.endpoint.web.WebEndpointResponse;\nimport org.springframework.boot.actuate.health.HealthEndpoint;\nimport org.springframework.boot.actuate.health.HttpCodeStatusMapper;\nimport org.springframework.boot.actuate.health.Status;\nimport org.springframework.stereotype.Component;\n\n/**\n * Example:\n * # HELP health_status HealthCheck result in prometheus's response format\n * # TYPE health_status gauge\n * health_status{application=&quot;java-service&quot;,type=&quot;main&quot;,} 1.0\n * health_status{application=&quot;java-service&quot;,type=&quot;db&quot;,database=&quot;PostgreSQL&quot;,validationQuery=&quot;isValid()&quot;,} 1.0\n * health_status{application=&quot;java-service&quot;,type=&quot;diskSpace&quot;,total=&quot;506332180480&quot;,exists=&quot;true&quot;,threshold=&quot;10485760&quot;,free=&quot;412188921856&quot;,} 1.0\n * health_status{application=&quot;java-service&quot;,type=&quot;ping&quot;,} 1.0\n*/\n@Component\n@Endpoint(id = &quot;health-check&quot;)\npublic class HeathPrometheusEndpoint {\n\n    private static final String APPLICATION = &quot;application&quot;;\n    private static final String TYPE = &quot;type&quot;;\n    public static final String SAMPLE_HEALTH_STATUS = &quot;health_status&quot;;\n\n    private final HealthEndpoint healthEndpoint;\n    private final String appName;\n    private final ObjectMapper mapper;\n    private final HttpCodeStatusMapper httpCodeStatusMapper;\n\n    public HeathPrometheusEndpoint(HealthEndpoint healthEndpoint,\n                                   ObjectMapper mapper,\n                                   @Value(&quot;${spring.application.name:}&quot;) String appName,\n                                   HttpCodeStatusMapper httpCodeStatusMapper) {\n        this.healthEndpoint = healthEndpoint;\n        this.mapper = mapper;\n        this.appName = appName;\n        this.httpCodeStatusMapper = httpCodeStatusMapper;\n    }\n\n    @ReadOperation(produces = TextFormat.CONTENT_TYPE_004)\n    public WebEndpointResponse&lt;String&gt; healthPrometheus() {\n        StatusDto status = createStatusDto();\n        List&lt;Collector.MetricFamilySamples.Sample&gt; samples = new ArrayList&lt;&gt;();\n        samples.add(createMainSample(status));\n        samples.addAll(createComponentSamples(status));\n        return createStringWebEndpointResponse(status, createMetricFamily(samples));\n    }\n\n    @SneakyThrows\n    private StatusDto createStatusDto() {\n        return mapper.readValue(mapper.writeValueAsString(healthEndpoint.health()), StatusDto.class);\n    }\n\n\n    private Collector.MetricFamilySamples.Sample createMainSample(StatusDto status) {\n        Labels labels = new Labels();\n        labels.add(APPLICATION, appName);\n        labels.add(TYPE, &quot;main&quot;);\n\n        return createSample(SAMPLE_HEALTH_STATUS, labels, status.getStatus());\n    }\n\n    private List&lt;Collector.MetricFamilySamples.Sample&gt; createComponentSamples(StatusDto status) {\n        List&lt;Collector.MetricFamilySamples.Sample&gt; list = new ArrayList&lt;&gt;();\n        for (Map.Entry&lt;String, StatusDto&gt; entry : status.components.entrySet()) {\n            Labels labels = new Labels();\n            labels.add(APPLICATION, appName);\n            labels.add(TYPE, entry.getKey());\n\n            StatusDto statusDto = entry.getValue();\n            Map&lt;String, Object&gt; details = statusDto.getDetails();\n            if (details != null &amp;&amp; !details.isEmpty()) {\n                details.forEach((k, v) -&gt; labels.add(k, String.valueOf(v)));\n            }\n            list.add(createSample(SAMPLE_HEALTH_STATUS, labels, statusDto.getStatus()));\n        }\n        return list;\n    }\n\n    private Collector.MetricFamilySamples.Sample createSample(String name, Labels labels, Status status) {\n        double v = Status.UP.equals(status) ? 1 : 0;\n        return new Collector.MetricFamilySamples.Sample(name, labels.getLabels(), labels.getValues(), v);\n    }\n\n    private Collector.MetricFamilySamples createMetricFamily(List&lt;Collector.MetricFamilySamples.Sample&gt; s) {\n        return new Collector.MetricFamilySamples(\n            &quot;health_status&quot;, Collector.Type.GAUGE,\n            &quot;HealthCheck result in prometheus's response format&quot;, s);\n    }\n\n    private WebEndpointResponse&lt;String&gt; createStringWebEndpointResponse(\n        StatusDto status, Collector.MetricFamilySamples metricFamilySamples\n    ) {\n        try {\n            Writer writer = new StringWriter();\n            TextFormat.write004(writer,\n                Collections.enumeration(Collections.singletonList(metricFamilySamples)));\n\n            return wrapResponse(writer.toString(), status);\n        } catch (IOException ex) {\n            // This actually never happens since StringWriter::write() doesn't throw any\n            // IOException\n            throw new RuntimeException(&quot;Writing metrics failed&quot;, ex);\n        }\n    }\n\n    private WebEndpointResponse&lt;String&gt; wrapResponse(String body, StatusDto status) {\n        if (body == null || body.isEmpty()) {\n            return new WebEndpointResponse&lt;&gt;(&quot;&quot;, 500);\n        } else {\n            int statusCode = httpCodeStatusMapper.getStatusCode(status.getStatus());\n            return new WebEndpointResponse&lt;&gt;(body, statusCode);\n        }\n    }\n\n    public static class Labels {\n        private final Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\n\n        public void add(String label, String value) {\n            if (value != null &amp;&amp; !value.isEmpty()) {\n                map.put(label, value);\n            }\n        }\n\n        public List&lt;String&gt; getLabels() {\n            return new ArrayList&lt;&gt;(map.keySet());\n        }\n\n        public List&lt;String&gt; getValues() {\n            return new ArrayList&lt;&gt;(map.values());\n        }\n    }\n\n    @Data\n    public static class StatusDto {\n        private Status status;\n        private Map&lt;String, StatusDto&gt; components;\n        private Map&lt;String, Object&gt; details;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":5863731,"reputation":807,"user_id":4618492,"accept_rate":56,"display_name":"littleAlien"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":723,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":54419761,"answer_count":2,"score":0,"last_activity_date":1684830690,"creation_date":1548759239,"question_id":54419431,"body_markdown":"How to obtain Spring actuator `/health` metrics that already working? \r\nFor example, to push them to Grafana. Thus I need them as objects, not text.","title":"Obtain Spring actuator &#39;health&#39; metrics","body":"<p>How to obtain Spring actuator <code>/health</code> metrics that already working? \nFor example, to push them to Grafana. Thus I need them as objects, not text.</p>\n"},{"tags":["java","r","oracle","jdbc","odbc"],"owner":{"account_id":27305922,"reputation":37,"user_id":20821917,"display_name":"avishkar683"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684830535,"creation_date":1684830535,"question_id":76312699,"body_markdown":"I have created a table in the oracle database from a dataframe using the following code:\r\n\r\n```\r\ndrv_oracle &lt;- JDBC(oracle_driver, oracle_jdbc_jar)  #creating DBI driver\r\nconn_oracle &lt;- dbConnect(drv_oracle, oracle_url,&quot;username&quot;,&quot;password&quot;)  #creating DBIConnection Object\r\n\r\ndbWriteTable(conn_oracle,&quot;DECILE_ANALYSIS_BASE_TABLE&quot;,DECILE_ANALYSIS_FINAL) #DECILE_ANALYSIS_FINAL is dataframe\r\n```\r\nUsing the above code, the table is created in the database.\r\n\r\nBut now I have refreshed the DECILE_ANALYSIS_FINAL dataframe with new data. I want to append this data into my created table. \r\n\r\nThis I try to do using following code:\r\n\r\n```\r\nconn_oracle &lt;- dbConnect(drv_oracle, oracle_url,&quot;username&quot;,&quot;password&quot;) \r\ndbAppendTable(conn_oracle,&quot;DECILE_ANALYSIS_BASE_TABLE&quot;,DECILE_ANALYSIS_FINAL)\r\n```\r\n\r\nBut now I am getting following error:\r\n\r\n```\r\nError in dbSendQuery(conn, statement, ...) : \r\n  Unable to retrieve JDBC result set\r\n  JDBC ERROR: Missing IN or OUT parameter at index:: 1\r\n  Statement: INSERT INTO &quot;DECILE_ANALYSIS_BASE_TABLE&quot;\r\n  (&quot;FISCAL_YEAR&quot;, &quot;MONTH&quot;, &quot;GEO_LEVEL&quot;, &quot;GEO_CODE&quot;, &quot;PRODUCT_LEVEL&quot;, &quot;PRODUCT_CODE&quot;, &quot;CHANNEL_TYPE&quot;, &quot;DECILE&quot;, &quot;UOB&quot;, &quot;TULC&quot;, &quot;TTLC&quot;, &quot;TOTAL_SALES&quot;, &quot;PDO&quot;, &quot;UNIQUE_ID&quot;, &quot;AVG_PDO_DROP&quot;)\r\nVALUES\r\n  (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\r\n```\r\n\r\nPlease help me understand how I can resolve this issue.\r\n\r\nI tried the code mentioned above","title":"Unable to append to an Oracle table from R Server using dbAppendTable()","body":"<p>I have created a table in the oracle database from a dataframe using the following code:</p>\n<pre><code>drv_oracle &lt;- JDBC(oracle_driver, oracle_jdbc_jar)  #creating DBI driver\nconn_oracle &lt;- dbConnect(drv_oracle, oracle_url,&quot;username&quot;,&quot;password&quot;)  #creating DBIConnection Object\n\ndbWriteTable(conn_oracle,&quot;DECILE_ANALYSIS_BASE_TABLE&quot;,DECILE_ANALYSIS_FINAL) #DECILE_ANALYSIS_FINAL is dataframe\n</code></pre>\n<p>Using the above code, the table is created in the database.</p>\n<p>But now I have refreshed the DECILE_ANALYSIS_FINAL dataframe with new data. I want to append this data into my created table.</p>\n<p>This I try to do using following code:</p>\n<pre><code>conn_oracle &lt;- dbConnect(drv_oracle, oracle_url,&quot;username&quot;,&quot;password&quot;) \ndbAppendTable(conn_oracle,&quot;DECILE_ANALYSIS_BASE_TABLE&quot;,DECILE_ANALYSIS_FINAL)\n</code></pre>\n<p>But now I am getting following error:</p>\n<pre><code>Error in dbSendQuery(conn, statement, ...) : \n  Unable to retrieve JDBC result set\n  JDBC ERROR: Missing IN or OUT parameter at index:: 1\n  Statement: INSERT INTO &quot;DECILE_ANALYSIS_BASE_TABLE&quot;\n  (&quot;FISCAL_YEAR&quot;, &quot;MONTH&quot;, &quot;GEO_LEVEL&quot;, &quot;GEO_CODE&quot;, &quot;PRODUCT_LEVEL&quot;, &quot;PRODUCT_CODE&quot;, &quot;CHANNEL_TYPE&quot;, &quot;DECILE&quot;, &quot;UOB&quot;, &quot;TULC&quot;, &quot;TTLC&quot;, &quot;TOTAL_SALES&quot;, &quot;PDO&quot;, &quot;UNIQUE_ID&quot;, &quot;AVG_PDO_DROP&quot;)\nVALUES\n  (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n</code></pre>\n<p>Please help me understand how I can resolve this issue.</p>\n<p>I tried the code mentioned above</p>\n"},{"tags":["java","spring-boot","dependency-injection","integration-testing"],"comments":[{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1684829322,"post_id":76312467,"comment_id":134570297,"body_markdown":"Does injecting/autowiring a `MockMvc` bean normally work (Can you inject a `MockMvc` instance in your test) or does that result in an exception as well? What happens when removing the `@ContextConfiguration`?","body":"Does injecting/autowiring a <code>MockMvc</code> bean normally work (Can you inject a <code>MockMvc</code> instance in your test) or does that result in an exception as well? What happens when removing the <code>@ContextConfiguration</code>?"}],"answers":[{"tags":[],"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684830404,"creation_date":1684830404,"answer_id":76312684,"question_id":76312467,"body_markdown":"`@AutoConfigureAfter` only works on a top-level class that is listed in `spring.factories`. You haven&#39;t shown your `spring.factories` file, but assuming that it lists `MyAutoConfiguration`, that&#39;s the class on which `@AutoConfigureAfter` should be placed.","title":"@ConditionalOnBean not being triggered even though Bean exists in SpringBootTest","body":"<p><code>@AutoConfigureAfter</code> only works on a top-level class that is listed in <code>spring.factories</code>. You haven't shown your <code>spring.factories</code> file, but assuming that it lists <code>MyAutoConfiguration</code>, that's the class on which <code>@AutoConfigureAfter</code> should be placed.</p>\n"}],"owner":{"account_id":28660254,"reputation":13,"user_id":21945315,"display_name":"abaudat"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76312684,"answer_count":1,"score":1,"last_activity_date":1684830404,"creation_date":1684828746,"question_id":76312467,"body_markdown":"I have the following AutoConfiguration class:\r\n\r\n```\r\n@Configuration\r\npublic class MyAutoConfiguration {\r\n  @AutoConfigureAfter(MockMvcAutoConfiguration.class)\r\n  class MyNestedAutoConfiguration {\r\n    @ConditionalOnBean(MockMvc.class)\r\n    @Bean\r\n    AugmentedMockMvc augmentedMockMvc(MockMvc mockMvc) {\r\n      return new AugmentedMockMvc(mockMvc);\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThe class is properly registered in spring.factories, and it is imported as a maven dependency in my Spring Boot application. My Spring Boot application looks like the following:\r\n\r\n```\r\n@SpringBootApplication\r\npublic class MySpringBootApp {\r\n  public static void main(String[] args) {\r\n    SpringApplication.run(MySpringBootApp.class, args);\r\n  }\r\n}\r\n```\r\n\r\nFinally, I have an integration test that is defined like this:\r\n\r\n```\r\n@SpringBootTest(classes = {MySpringBootApp.class})\r\n@AutoConfigureMockMvc\r\n@ContextConfiguration(initializers = {MyInitializer.class})\r\nclass MyTest {\r\n  @Autowired\r\n  private AugmentedMockMvc augmentedMockMvc;\r\n}\r\n```\r\n\r\n`MyInitializer` can be ignored, it doesn&#39;t do anything meaningful here, but it is needed and therefore I need to use both `@SpringBootTest` and `@ContextConfiguration`.\r\n\r\n**The issue is the following**: With this setup, the augmentedMockMvc Bean is not created because it does not match the `@ConditionalOnBean(MockMvc.class)` condition. \r\n\r\nI tried two things:\r\n- Adding `classes = {MockMvcAutoConfiguration.class}` to `@ContextConfiguration`. This works fine and fixes the issue, the augmentedMockMvc Bean is now properly registered\r\n- Removing the `@ConditionalOnBean(MockMvc.class)` annotation from the Bean creation. Weirdly enough, this also works! The MockMvc Bean is actually there, but it is not discovered by Spring when evaluating the `@ConditionalOnBean` annotation.\r\n\r\nI don&#39;t understand why the MockMvc Bean is not found by the `@ConditionalOnBean(MockMvc.class)` even though the Bean exists unless I specifically put the class in the `@ContextConfiguration`, I would think that having `@AutoConfigureMockMvc` on `MyTest` should be enough for the `MockMvcAutoConfiguration.class` class to be in the context","title":"@ConditionalOnBean not being triggered even though Bean exists in SpringBootTest","body":"<p>I have the following AutoConfiguration class:</p>\n<pre><code>@Configuration\npublic class MyAutoConfiguration {\n  @AutoConfigureAfter(MockMvcAutoConfiguration.class)\n  class MyNestedAutoConfiguration {\n    @ConditionalOnBean(MockMvc.class)\n    @Bean\n    AugmentedMockMvc augmentedMockMvc(MockMvc mockMvc) {\n      return new AugmentedMockMvc(mockMvc);\n    }\n  }\n}\n</code></pre>\n<p>The class is properly registered in spring.factories, and it is imported as a maven dependency in my Spring Boot application. My Spring Boot application looks like the following:</p>\n<pre><code>@SpringBootApplication\npublic class MySpringBootApp {\n  public static void main(String[] args) {\n    SpringApplication.run(MySpringBootApp.class, args);\n  }\n}\n</code></pre>\n<p>Finally, I have an integration test that is defined like this:</p>\n<pre><code>@SpringBootTest(classes = {MySpringBootApp.class})\n@AutoConfigureMockMvc\n@ContextConfiguration(initializers = {MyInitializer.class})\nclass MyTest {\n  @Autowired\n  private AugmentedMockMvc augmentedMockMvc;\n}\n</code></pre>\n<p><code>MyInitializer</code> can be ignored, it doesn't do anything meaningful here, but it is needed and therefore I need to use both <code>@SpringBootTest</code> and <code>@ContextConfiguration</code>.</p>\n<p><strong>The issue is the following</strong>: With this setup, the augmentedMockMvc Bean is not created because it does not match the <code>@ConditionalOnBean(MockMvc.class)</code> condition.</p>\n<p>I tried two things:</p>\n<ul>\n<li>Adding <code>classes = {MockMvcAutoConfiguration.class}</code> to <code>@ContextConfiguration</code>. This works fine and fixes the issue, the augmentedMockMvc Bean is now properly registered</li>\n<li>Removing the <code>@ConditionalOnBean(MockMvc.class)</code> annotation from the Bean creation. Weirdly enough, this also works! The MockMvc Bean is actually there, but it is not discovered by Spring when evaluating the <code>@ConditionalOnBean</code> annotation.</li>\n</ul>\n<p>I don't understand why the MockMvc Bean is not found by the <code>@ConditionalOnBean(MockMvc.class)</code> even though the Bean exists unless I specifically put the class in the <code>@ContextConfiguration</code>, I would think that having <code>@AutoConfigureMockMvc</code> on <code>MyTest</code> should be enough for the <code>MockMvcAutoConfiguration.class</code> class to be in the context</p>\n"},{"tags":["java","spring-boot","testing","spring-boot-actuator","dynamic-properties"],"answers":[{"tags":[],"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634663434,"creation_date":1634600511,"answer_id":69623653,"question_id":69620134,"body_markdown":"Try the following:\r\n```java\r\n@ExtendWith(SpringExtension.class)\r\n@EnableConfigurationProperties(value = AdapterHealthCheckConfig.class)\r\n@TestPropertySource(&quot;classpath:application-test.properties&quot;)\r\nclass AppHealthCheckConfigTest {\r\n\r\n    @Autowired\r\n    private AdapterHealthCheckConfig config;\r\n\r\n    @Test\r\n    void healthCheckBeansAreInitialized() {\r\n//        config.init();\r\n        System.out.println(config.getApps().get(0));\r\n\r\n    }\r\n}\r\n```","title":"How to test multiple instance creation of a bean of one class filled with values from application.properties?","body":"<p>Try the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@EnableConfigurationProperties(value = AdapterHealthCheckConfig.class)\n@TestPropertySource(&quot;classpath:application-test.properties&quot;)\nclass AppHealthCheckConfigTest {\n\n    @Autowired\n    private AdapterHealthCheckConfig config;\n\n    @Test\n    void healthCheckBeansAreInitialized() {\n//        config.init();\n        System.out.println(config.getApps().get(0));\n\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3274061,"reputation":2691,"user_id":2756760,"accept_rate":51,"display_name":"du-it"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":261,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69623653,"answer_count":1,"score":0,"last_activity_date":1684830396,"creation_date":1634577839,"question_id":69620134,"body_markdown":"After creating multiple beans of a specific class using @PostConstruct according to [Multiple instances of a bean of one class filled with values from application.properties][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/69571749/multiple-instances-of-a-bean-of-one-class-filled-with-values-from-application-pr/69574978?noredirect=1#comment123021394_69574978\r\n\r\nI wonder how I could test the creation of those bean instances.\r\n\r\nI tried it this way:\r\n\r\n    @ActiveProfiles(&quot;test&quot;)\r\n    @RequiredArgsConstructor\r\n    @ExtendWith({SpringExtension.class, MockitoExtension.class})\r\n    @SpringBootTest(classes = {AppHealthCheckContributor.class, AppHealthCheckProperties.class})\r\n    @ConfigurationProperties(prefix = &quot;healthcheck&quot;)\r\n    @ContextConfiguration(classes = { AppHealthCheckConfig.class })\r\n    //@TestPropertySource(properties = &quot;healthcheck.app[0].name=testHealthIndicator, healthcheck.app[0].baseUrl=http://localhost, healthcheck.app[0].basePath=/test&quot;)\r\n    @TestPropertySource(locations = {&quot;/application-test.properties&quot;})\r\n    class AppHealthCheckConfigTest {\r\n    \r\n        @Autowired\r\n        private AdapterHealthCheckConfig config;\r\n    \r\n        @Test\r\n        void healthCheckBeansAreInitialized() {\r\n    //        config.init();\r\n            System.out.println(config.getApps().get(0));\r\n    \r\n        }\r\n    }\r\n\r\nbut this results in: `AppHealthCheckProperties(baseUrl=null, basePath=null, name=null)`\r\n","title":"How to test multiple instance creation of a bean of one class filled with values from application.properties?","body":"<p>After creating multiple beans of a specific class using @PostConstruct according to <a href=\"https://stackoverflow.com/questions/69571749/multiple-instances-of-a-bean-of-one-class-filled-with-values-from-application-pr/69574978?noredirect=1#comment123021394_69574978\">Multiple instances of a bean of one class filled with values from application.properties</a></p>\n<p>I wonder how I could test the creation of those bean instances.</p>\n<p>I tried it this way:</p>\n<pre><code>@ActiveProfiles(&quot;test&quot;)\n@RequiredArgsConstructor\n@ExtendWith({SpringExtension.class, MockitoExtension.class})\n@SpringBootTest(classes = {AppHealthCheckContributor.class, AppHealthCheckProperties.class})\n@ConfigurationProperties(prefix = &quot;healthcheck&quot;)\n@ContextConfiguration(classes = { AppHealthCheckConfig.class })\n//@TestPropertySource(properties = &quot;healthcheck.app[0].name=testHealthIndicator, healthcheck.app[0].baseUrl=http://localhost, healthcheck.app[0].basePath=/test&quot;)\n@TestPropertySource(locations = {&quot;/application-test.properties&quot;})\nclass AppHealthCheckConfigTest {\n\n    @Autowired\n    private AdapterHealthCheckConfig config;\n\n    @Test\n    void healthCheckBeansAreInitialized() {\n//        config.init();\n        System.out.println(config.getApps().get(0));\n\n    }\n}\n</code></pre>\n<p>but this results in: <code>AppHealthCheckProperties(baseUrl=null, basePath=null, name=null)</code></p>\n"},{"tags":["java","environment-variables","redhat","logback","splunk"],"comments":[{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":0,"creation_date":1683794524,"post_id":76120674,"comment_id":134422077,"body_markdown":"VM options aren’t env variables. There’s a separate place for those in IntelliJ. Are you saying you can export it to Splunk from local?","body":"VM options aren’t env variables. There’s a separate place for those in IntelliJ. Are you saying you can export it to Splunk from local?"},{"owner":{"account_id":6383695,"reputation":5206,"user_id":4952262,"accept_rate":71,"display_name":"Michu93"},"score":0,"creation_date":1683798655,"post_id":76120674,"comment_id":134423039,"body_markdown":"in `logback.xml` both are checked (env variables at the end if I recall, JVM options before). Yes, when I put into configuration in IntelliJ into `VM options` `env` and `hostname` then it&#39;s exported to SPLUNK and I can see it there.","body":"in <code>logback.xml</code> both are checked (env variables at the end if I recall, JVM options before). Yes, when I put into configuration in IntelliJ into <code>VM options</code> <code>env</code> and <code>hostname</code> then it&#39;s exported to SPLUNK and I can see it there."}],"answers":[{"tags":[],"owner":{"account_id":6383695,"reputation":5206,"user_id":4952262,"accept_rate":71,"display_name":"Michu93"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684830208,"creation_date":1684830208,"answer_id":76312658,"question_id":76120674,"body_markdown":"    &lt;source&gt;${env}&lt;/source&gt;\r\n\r\nis perfectly fine, there was discrepancy between start scripts which I was using.\r\n\r\nTo conclude: \r\nIf you use `${variable}` and in start script you use `-Dvariable = something` then it works.","title":"Can&#39;t read one variable in logback.xml but can read another","body":"<pre><code>&lt;source&gt;${env}&lt;/source&gt;\n</code></pre>\n<p>is perfectly fine, there was discrepancy between start scripts which I was using.</p>\n<p>To conclude:\nIf you use <code>${variable}</code> and in start script you use <code>-Dvariable = something</code> then it works.</p>\n"}],"owner":{"account_id":6383695,"reputation":5206,"user_id":4952262,"accept_rate":71,"display_name":"Michu93"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76312658,"answer_count":1,"score":0,"last_activity_date":1684830208,"creation_date":1682600027,"question_id":76120674,"body_markdown":"I am trying to read env variable in `logback.xml` file.\r\nI can do:\r\n\r\n    &lt;variable name=&quot;JAVA&quot; value=&quot;${JAVA_HOME}&quot; /&gt;\r\n\r\nand the use it later:\r\n\r\n    &lt;source&gt;MY APP ${JAVA}&lt;/source&gt;\r\nand it works however when I created new variable by `setenv ENV TEST` (it&#39;s Red Hat) and I check if it&#39;s in environment variables by `printenv` then I can see it `ENV=TEST`. When I try to define it in `logback.xml` the same way as `JAVA_HOME` so: `&lt;variable name=&quot;ENVIRONMENT&quot; value=&quot;${ENV}&quot; /&gt;` and use here:\r\n    \r\n\r\n    &lt;source&gt;MY APP ${ENVIRONMENT}&lt;/source&gt;\r\n\r\nthen I can see in SPLUNK: `source = MY APP ENV_IS_UNDEFINED`\r\n\r\nOr is there another way to put `ENVIRONMENT` value somewhere and then read `ENVIRONMENT` in `logback.xml`?\r\n\r\nI found: https://stackoverflow.com/questions/41715211/if-condition-in-logback-print-log-messages-in-two-different-folders but my problem is different\r\n\r\n\r\n@Edit\r\n\r\nEven though I am starting process with:\r\n\r\n    $JAVA_HOME/bin/java \\\r\n        -Duser.timezone=GMT \\\r\n        -Denv=&quot;test&quot; \\\r\n        -Dhost=&quot;127.0.0.1&quot; \\\r\n        ...\r\n\r\nand trying to send it to SPLUNK by `&lt;source&gt;MY APP ${env}&lt;/source&gt;` I can see in SPLNUK UI `source = MY APP env_IS_UNDEFINED`\r\n\r\nWhen I run service locally with: [![VM options][1]][1] then it works locally\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/cOJgn.png","title":"Can&#39;t read one variable in logback.xml but can read another","body":"<p>I am trying to read env variable in <code>logback.xml</code> file.\nI can do:</p>\n<pre><code>&lt;variable name=&quot;JAVA&quot; value=&quot;${JAVA_HOME}&quot; /&gt;\n</code></pre>\n<p>and the use it later:</p>\n<pre><code>&lt;source&gt;MY APP ${JAVA}&lt;/source&gt;\n</code></pre>\n<p>and it works however when I created new variable by <code>setenv ENV TEST</code> (it's Red Hat) and I check if it's in environment variables by <code>printenv</code> then I can see it <code>ENV=TEST</code>. When I try to define it in <code>logback.xml</code> the same way as <code>JAVA_HOME</code> so: <code>&lt;variable name=&quot;ENVIRONMENT&quot; value=&quot;${ENV}&quot; /&gt;</code> and use here:</p>\n<pre><code>&lt;source&gt;MY APP ${ENVIRONMENT}&lt;/source&gt;\n</code></pre>\n<p>then I can see in SPLUNK: <code>source = MY APP ENV_IS_UNDEFINED</code></p>\n<p>Or is there another way to put <code>ENVIRONMENT</code> value somewhere and then read <code>ENVIRONMENT</code> in <code>logback.xml</code>?</p>\n<p>I found: <a href=\"https://stackoverflow.com/questions/41715211/if-condition-in-logback-print-log-messages-in-two-different-folders\">if condition in logback - print log messages in two different folders</a> but my problem is different</p>\n<p>@Edit</p>\n<p>Even though I am starting process with:</p>\n<pre><code>$JAVA_HOME/bin/java \\\n    -Duser.timezone=GMT \\\n    -Denv=&quot;test&quot; \\\n    -Dhost=&quot;127.0.0.1&quot; \\\n    ...\n</code></pre>\n<p>and trying to send it to SPLUNK by <code>&lt;source&gt;MY APP ${env}&lt;/source&gt;</code> I can see in SPLNUK UI <code>source = MY APP env_IS_UNDEFINED</code></p>\n<p>When I run service locally with: <a href=\"https://i.stack.imgur.com/cOJgn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cOJgn.png\" alt=\"VM options\" /></a> then it works locally</p>\n"},{"tags":["java","priority-queue","hamming-numbers"],"comments":[{"owner":{"account_id":13949449,"reputation":757,"user_id":10073327,"display_name":"FailingCoder"},"score":0,"creation_date":1570146471,"post_id":58227806,"comment_id":102831173,"body_markdown":"Use the % sign. i.e. n % 2, n % 3, and n % 5","body":"Use the % sign. i.e. n % 2, n % 3, and n % 5"},{"owner":{"account_id":453089,"reputation":70352,"user_id":849891,"accept_rate":100,"display_name":"Will Ness"},"score":0,"creation_date":1684829993,"post_id":58227806,"comment_id":134570437,"body_markdown":"find the pointers at https://stackoverflow.com/questions/tagged/hamming-numbers.","body":"find the pointers at <a href=\"https://stackoverflow.com/questions/tagged/hamming-numbers\">stackoverflow.com/questions/tagged/hamming-numbers</a>."}],"answers":[{"tags":[],"owner":{"account_id":14543637,"reputation":370,"user_id":10504512,"display_name":"LockieR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1570158879,"creation_date":1570158879,"answer_id":58229444,"question_id":58227806,"body_markdown":"Not sure why the use of PriorityQueue, but a pretty ugly brute force way to solve the question would be something like this.\r\n```\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\nimport java.util.PriorityQueue;\r\nimport java.util.stream.Collectors;\r\n\r\npublic class Driver {\r\n\r\n    public static void main(String[] args) {\r\n        Driver driver = new Driver();\r\n        System.out.println(driver.getRegularNumber(30)\r\n                .toString());\r\n    }\r\n\r\n    public PriorityQueue&lt;Integer&gt; getRegularNumber(int n) {\r\n        PriorityQueue&lt;Integer&gt; regularNumbers = new PriorityQueue&lt;&gt;();\r\n        int count = 0;\r\n        int current = 1;\r\n        List&lt;Integer&gt; pf;\r\n        List&lt;Integer&gt; apf = Arrays.asList(2, 3, 5);\r\n        while (count &lt; n) {\r\n            // Get the prime factors of the current number.\r\n            // If it is a subset of the allowed prime factors then add it to the Queue.\r\n            pf = primeFactors(current);\r\n            if (apf.containsAll(pf)) {\r\n                regularNumbers.add(current);\r\n                count++;\r\n            }\r\n            current++;\r\n        }\r\n        return regularNumbers;\r\n    }\r\n\r\n    public static List&lt;Integer&gt; primeFactors(int n) {\r\n        List&lt;Integer&gt; factors = new ArrayList&lt;&gt;();\r\n        for (int i = 2; i &lt; n; i++) {\r\n            while (n % i == 0) {\r\n                factors.add(i);\r\n                n = n / i;\r\n            }\r\n        }\r\n        if (n &gt; 2) {\r\n            factors.add(n);\r\n        }\r\n\r\n        factors = factors.stream()\r\n                .distinct()\r\n                .collect(Collectors.toList());\r\n        return factors;\r\n    }\r\n}   \r\n```\r\nThis produces ```[1, 2, 3, 4, 5, 6, 8, 9, 10, 12, 15, 16, 18, 20, 24, 25, 27, 30, 32, 36, 40, 45, 48, 50, 54, 60, 64, 72, 75, 80]``` as output.","title":"Need help finding nth regular number","body":"<p>Not sure why the use of PriorityQueue, but a pretty ugly brute force way to solve the question would be something like this.</p>\n\n<pre><code>import java.util.Arrays;\nimport java.util.List;\nimport java.util.PriorityQueue;\nimport java.util.stream.Collectors;\n\npublic class Driver {\n\n    public static void main(String[] args) {\n        Driver driver = new Driver();\n        System.out.println(driver.getRegularNumber(30)\n                .toString());\n    }\n\n    public PriorityQueue&lt;Integer&gt; getRegularNumber(int n) {\n        PriorityQueue&lt;Integer&gt; regularNumbers = new PriorityQueue&lt;&gt;();\n        int count = 0;\n        int current = 1;\n        List&lt;Integer&gt; pf;\n        List&lt;Integer&gt; apf = Arrays.asList(2, 3, 5);\n        while (count &lt; n) {\n            // Get the prime factors of the current number.\n            // If it is a subset of the allowed prime factors then add it to the Queue.\n            pf = primeFactors(current);\n            if (apf.containsAll(pf)) {\n                regularNumbers.add(current);\n                count++;\n            }\n            current++;\n        }\n        return regularNumbers;\n    }\n\n    public static List&lt;Integer&gt; primeFactors(int n) {\n        List&lt;Integer&gt; factors = new ArrayList&lt;&gt;();\n        for (int i = 2; i &lt; n; i++) {\n            while (n % i == 0) {\n                factors.add(i);\n                n = n / i;\n            }\n        }\n        if (n &gt; 2) {\n            factors.add(n);\n        }\n\n        factors = factors.stream()\n                .distinct()\n                .collect(Collectors.toList());\n        return factors;\n    }\n}   \n</code></pre>\n\n<p>This produces <code>[1, 2, 3, 4, 5, 6, 8, 9, 10, 12, 15, 16, 18, 20, 24, 25, 27, 30, 32, 36, 40, 45, 48, 50, 54, 60, 64, 72, 75, 80]</code> as output.</p>\n"}],"owner":{"account_id":16821406,"reputation":19,"user_id":12161764,"display_name":"jahnpahl"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":242,"favorite_count":0,"down_vote_count":8,"up_vote_count":2,"answer_count":1,"score":-6,"last_activity_date":1684830092,"creation_date":1570142751,"question_id":58227806,"body_markdown":"Problem:\r\n\r\n&gt; &quot;Babylonians use regular numbers to keep time.\r\n&gt;\r\n&gt; A *&quot;regular number&quot;* in math is defined to be a number that is a factor of some power of 60 (60, 3600, etc). Equivalently we can say that a regular number is one whose ONLY prime divisors are 2, 3 and 5. The first 10 regular numbers are:\r\n&gt;\r\n&gt; 1, 2, 3, 4, 5, 6, 8, 9, 10, 12.\r\n&gt;\r\n&gt; Your task is to find the *n*-th regular number.&quot;\r\n\r\nMy professor asked us to specifically use priority queue to solve this problem, and the largest number we&#39;ll test is no more than *`n = 300`*. I&#39;m clueless.\r\n\r\nedit: I&#39;m obviously not asking for the complete code, I just need pointers to get me started.","title":"Need help finding nth regular number","body":"<p>Problem:</p>\n<blockquote>\n<p>&quot;Babylonians use regular numbers to keep time.</p>\n<p>A <em>&quot;regular number&quot;</em> in math is defined to be a number that is a factor of some power of 60 (60, 3600, etc). Equivalently we can say that a regular number is one whose ONLY prime divisors are 2, 3 and 5. The first 10 regular numbers are:</p>\n<p>1, 2, 3, 4, 5, 6, 8, 9, 10, 12.</p>\n<p>Your task is to find the <em>n</em>-th regular number.&quot;</p>\n</blockquote>\n<p>My professor asked us to specifically use priority queue to solve this problem, and the largest number we'll test is no more than <em><code>n = 300</code></em>. I'm clueless.</p>\n<p>edit: I'm obviously not asking for the complete code, I just need pointers to get me started.</p>\n"},{"tags":["java","spring","prometheus","spring-boot-actuator"],"answers":[{"tags":[],"owner":{"account_id":5881849,"reputation":158,"user_id":4630958,"display_name":"flo-ferox"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1598356183,"creation_date":1598356183,"answer_id":63578224,"question_id":63575808,"body_markdown":"I solved my problem by updating `micrometer-registry-prometheus` from 1.5.1 to 1.5.4\r\n\r\nWith this update the error message was more speakable:\r\n```\r\nPrometheus requires that all meters with the same name have the same set of tag keys. There is already an existing meter named &#39;jvm_gc_pause_seconds&#39; containing tag keys [username, endpoint]. The meter you are attempting to register has keys [username, endpoint, service].\r\n```\r\n\r\nSo I found the problem. I added a common tag to all metrics. After removing the common tag, the error was solved.","title":"Error from promtheus in java (spring acuator)","body":"<p>I solved my problem by updating <code>micrometer-registry-prometheus</code> from 1.5.1 to 1.5.4</p>\n<p>With this update the error message was more speakable:</p>\n<pre><code>Prometheus requires that all meters with the same name have the same set of tag keys. There is already an existing meter named 'jvm_gc_pause_seconds' containing tag keys [username, endpoint]. The meter you are attempting to register has keys [username, endpoint, service].\n</code></pre>\n<p>So I found the problem. I added a common tag to all metrics. After removing the common tag, the error was solved.</p>\n"}],"owner":{"account_id":5881849,"reputation":158,"user_id":4630958,"display_name":"flo-ferox"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2536,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":63578224,"answer_count":1,"score":6,"last_activity_date":1684829513,"creation_date":1598347363,"question_id":63575808,"body_markdown":"I enabled and configured Spring Actuator with Prometheus endpoint in my spring boot application. But I receive an error, that Prometheus requires that all meters with the same name have the same set of tag keys. But unfortunately Spring Actuator won&#39;t do that for `jvm_gc_pause_seconds`.\r\n\r\nI&#39;m using:\r\n```\r\n&lt;parent&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t&lt;version&gt;2.3.1.RELEASE&lt;/version&gt;\r\n&lt;/parent&gt;\r\n```\r\nwith\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n\r\n....\r\n\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;micrometer-core&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.5.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.5.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n\r\nThis is my error message:\r\n```\r\njava.lang.IllegalArgumentException: Prometheus requires that all meters with the same name have the same set of tag keys. There is already an existing meter named &#39;jvm_gc_pause_seconds&#39;  │\r\n│     at io.micrometer.prometheus.PrometheusMeterRegistry.lambda$applyToCollector$17(PrometheusMeterRegistry.java:429)                                                                       │\r\n│     at java.base/java.util.concurrent.ConcurrentHashMap.compute(Unknown Source)                                                                                                            │\r\n│     at io.micrometer.prometheus.PrometheusMeterRegistry.applyToCollector(PrometheusMeterRegistry.java:413)                                                                                 │\r\n│     at io.micrometer.prometheus.PrometheusMeterRegistry.newTimer(PrometheusMeterRegistry.java:196)                                                                                         │\r\n│     at io.micrometer.core.instrument.MeterRegistry.lambda$timer$2(MeterRegistry.java:308)                                                                                                  │\r\n│     at io.micrometer.core.instrument.MeterRegistry.getOrCreateMeter(MeterRegistry.java:612)                                                                                                │\r\n│     at io.micrometer.core.instrument.MeterRegistry.registerMeterIfNecessary(MeterRegistry.java:566)                                                                                        │\r\n│     at io.micrometer.core.instrument.MeterRegistry.timer(MeterRegistry.java:306)                                                                                                           │\r\n│     at io.micrometer.core.instrument.Timer$Builder.register(Timer.java:539)                                                                                                                │\r\n│     at io.micrometer.core.instrument.binder.jvm.JvmGcMetrics.lambda$bindTo$1(JvmGcMetrics.java:151)                                                                                        │\r\n│     at java.management/sun.management.NotificationEmitterSupport.sendNotification(Unknown Source)                                                                                          │\r\n│     at jdk.management/com.sun.management.internal.GarbageCollectorExtImpl.createGCNotification(Unknown Source)\r\n```\r\n\r\nAny idea?!\r\nI don&#39;t have this error when I remove the Prometheus endpoint configuration (`micrometer-registry-prometheus` dependency).","title":"Error from promtheus in java (spring acuator)","body":"<p>I enabled and configured Spring Actuator with Prometheus endpoint in my spring boot application. But I receive an error, that Prometheus requires that all meters with the same name have the same set of tag keys. But unfortunately Spring Actuator won't do that for <code>jvm_gc_pause_seconds</code>.</p>\n<p>I'm using:</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.3.1.RELEASE&lt;/version&gt;\n&lt;/parent&gt;\n</code></pre>\n<p>with</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n....\n\n&lt;dependency&gt;\n    &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n    &lt;artifactId&gt;micrometer-core&lt;/artifactId&gt;\n    &lt;version&gt;1.5.1&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n    &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\n    &lt;version&gt;1.5.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>This is my error message:</p>\n<pre><code>java.lang.IllegalArgumentException: Prometheus requires that all meters with the same name have the same set of tag keys. There is already an existing meter named 'jvm_gc_pause_seconds'  │\n│     at io.micrometer.prometheus.PrometheusMeterRegistry.lambda$applyToCollector$17(PrometheusMeterRegistry.java:429)                                                                       │\n│     at java.base/java.util.concurrent.ConcurrentHashMap.compute(Unknown Source)                                                                                                            │\n│     at io.micrometer.prometheus.PrometheusMeterRegistry.applyToCollector(PrometheusMeterRegistry.java:413)                                                                                 │\n│     at io.micrometer.prometheus.PrometheusMeterRegistry.newTimer(PrometheusMeterRegistry.java:196)                                                                                         │\n│     at io.micrometer.core.instrument.MeterRegistry.lambda$timer$2(MeterRegistry.java:308)                                                                                                  │\n│     at io.micrometer.core.instrument.MeterRegistry.getOrCreateMeter(MeterRegistry.java:612)                                                                                                │\n│     at io.micrometer.core.instrument.MeterRegistry.registerMeterIfNecessary(MeterRegistry.java:566)                                                                                        │\n│     at io.micrometer.core.instrument.MeterRegistry.timer(MeterRegistry.java:306)                                                                                                           │\n│     at io.micrometer.core.instrument.Timer$Builder.register(Timer.java:539)                                                                                                                │\n│     at io.micrometer.core.instrument.binder.jvm.JvmGcMetrics.lambda$bindTo$1(JvmGcMetrics.java:151)                                                                                        │\n│     at java.management/sun.management.NotificationEmitterSupport.sendNotification(Unknown Source)                                                                                          │\n│     at jdk.management/com.sun.management.internal.GarbageCollectorExtImpl.createGCNotification(Unknown Source)\n</code></pre>\n<p>Any idea?!\nI don't have this error when I remove the Prometheus endpoint configuration (<code>micrometer-registry-prometheus</code> dependency).</p>\n"},{"tags":["java","eclipse","selenium-webdriver","automation","selenium-firefoxdriver"],"answers":[{"tags":[],"owner":{"account_id":10299692,"reputation":5719,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684829508,"creation_date":1684829508,"answer_id":76312565,"question_id":76312266,"body_markdown":"Just get rid of the below line, you don&#39;t need to set property and provide the location of `driver.exe` if you are using Selenium `v4.6.0` or above.\r\n\r\n````\r\nSystem.setProperty(&quot;webdriver.gecko.driver&quot;,\r\n                           &quot;D:\\\\Selenium\\\\BrowserJars\\\\geckodriver113.exe&quot;);\r\n````\r\n\r\nReferences: [Introducing Selenium Manager](https://www.selenium.dev/blog/2022/introducing-selenium-manager/)","title":"Unable to launch Firefox browser using Selenium","body":"<p>Just get rid of the below line, you don't need to set property and provide the location of <code>driver.exe</code> if you are using Selenium <code>v4.6.0</code> or above.</p>\n<pre><code>System.setProperty(&quot;webdriver.gecko.driver&quot;,\n                           &quot;D:\\\\Selenium\\\\BrowserJars\\\\geckodriver113.exe&quot;);\n</code></pre>\n<p>References: <a href=\"https://www.selenium.dev/blog/2022/introducing-selenium-manager/\" rel=\"nofollow noreferrer\">Introducing Selenium Manager</a></p>\n"}],"owner":{"account_id":4312379,"reputation":1,"user_id":3523137,"display_name":"sandeeppandita"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":448,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684829508,"creation_date":1684827190,"question_id":76312266,"body_markdown":"Unable to launch Firefox browser using Selenium.\r\n\r\n\r\nBelow is the code that I executed:\r\n\r\n\r\n    public class BrowserTest {\r\n\t    public static void main(String[] args) {\r\n\t\t    System.setProperty(&quot;webdriver.gecko.driver&quot;,\r\n                               &quot;D:\\\\Selenium\\\\BrowserJars\\\\geckodriver113.exe&quot;);\r\n\t\t    WebDriver driver = new FirefoxDriver();\r\n\t    }\r\n    }\r\n\r\nError that I am getting:\r\n\r\n    Exception in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: Expected browser binary location, but unable to find binary in default location, no &#39;moz:firefoxOptions.binary&#39; capability provided, and no binary flag set on the command line \r\n    Host info: host: &#39;XXXXXXXXX&#39;, ip: &#39;XXX.XXX.XXX.XXX&#39;\r\n    Build info: version: &#39;4.9.1&#39;, revision: &#39;eb2032df7f&#39;\r\n    System info: os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;1.8.0_172&#39;\r\n    Driver info: org.openqa.selenium.firefox.FirefoxDriver\r\n    Command: [null, newSession {capabilities=[Capabilities {acceptInsecureCerts: true, browserName: firefox, moz:debuggerAddress: true, moz:firefoxOptions: {}}]}]\r\n    \tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:136)\r\n    \tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:94)\r\n    \tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:68)\r\n    \tat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:165)\r\n    \tat org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:183)\r\n    \tat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:158)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:543)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:229)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:157)\r\n    \tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:150)\r\n    \tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:146)\r\n    \tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:131)\r\n    \tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:127)\r\n    \tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:112)\r\n    \tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:102)\r\n    \tat BrowserTest.main(BrowserTest.java:12)\r\n\r\nMore details:\r\n\r\n - Firefox Version: 113\r\n - Gecko Driver Version: geckodriver-v0.33.0-win32 (https://github.com/mozilla/geckodriver/releases)\r\n - Eclipse Version: 2019-06 (4.12.0)|Build id: 20190614-1200\r\n","title":"Unable to launch Firefox browser using Selenium","body":"<p>Unable to launch Firefox browser using Selenium.</p>\n<p>Below is the code that I executed:</p>\n<pre><code>public class BrowserTest {\n    public static void main(String[] args) {\n        System.setProperty(&quot;webdriver.gecko.driver&quot;,\n                           &quot;D:\\\\Selenium\\\\BrowserJars\\\\geckodriver113.exe&quot;);\n        WebDriver driver = new FirefoxDriver();\n    }\n}\n</code></pre>\n<p>Error that I am getting:</p>\n<pre><code>Exception in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: Expected browser binary location, but unable to find binary in default location, no 'moz:firefoxOptions.binary' capability provided, and no binary flag set on the command line \nHost info: host: 'XXXXXXXXX', ip: 'XXX.XXX.XXX.XXX'\nBuild info: version: '4.9.1', revision: 'eb2032df7f'\nSystem info: os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '1.8.0_172'\nDriver info: org.openqa.selenium.firefox.FirefoxDriver\nCommand: [null, newSession {capabilities=[Capabilities {acceptInsecureCerts: true, browserName: firefox, moz:debuggerAddress: true, moz:firefoxOptions: {}}]}]\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:136)\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:94)\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:68)\n    at org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:165)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:183)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:158)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:543)\n    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:229)\n    at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:157)\n    at org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:150)\n    at org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:146)\n    at org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:131)\n    at org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:127)\n    at org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:112)\n    at org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:102)\n    at BrowserTest.main(BrowserTest.java:12)\n</code></pre>\n<p>More details:</p>\n<ul>\n<li>Firefox Version: 113</li>\n<li>Gecko Driver Version: geckodriver-v0.33.0-win32 (<a href=\"https://github.com/mozilla/geckodriver/releases\" rel=\"nofollow noreferrer\">https://github.com/mozilla/geckodriver/releases</a>)</li>\n<li>Eclipse Version: 2019-06 (4.12.0)|Build id: 20190614-1200</li>\n</ul>\n"},{"tags":["java","spring","security","spring-boot-actuator"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1557401411,"post_id":56057707,"comment_id":98757295,"body_markdown":"Ordering of rules is important, your `.anyRequest().authenticated()` is before the more specific rule for the actuator. Hence the first one matches and renders your `actuator` maping useless. Switch the order and make sure the ` `.anyRequest().authenticated()` is the last one.","body":"Ordering of rules is important, your <code>.anyRequest().authenticated()</code> is before the more specific rule for the actuator. Hence the first one matches and renders your <code>actuator</code> maping useless. Switch the order and make sure the ` <code>.anyRequest().authenticated()</code> is the last one."},{"owner":{"account_id":3240077,"reputation":2811,"user_id":2733333,"accept_rate":89,"display_name":"Tomas Bisciak"},"score":0,"creation_date":1557401902,"post_id":56057707,"comment_id":98757611,"body_markdown":"God damnit it worked . I have no idea why since i had the admin and actuator endpoint at first totally at the top and the .anyRequest().authenticated() was set afterwards, Now i listened to you and put it into totally last place (that anyRequest().authenticated()) and it works. Please do post it as answer so i can accept it and you get rep :).","body":"God damnit it worked . I have no idea why since i had the admin and actuator endpoint at first totally at the top and the .anyRequest().authenticated() was set afterwards, Now i listened to you and put it into totally last place (that anyRequest().authenticated()) and it works. Please do post it as answer so i can accept it and you get rep :)."}],"answers":[{"tags":[],"owner":{"account_id":3240077,"reputation":2811,"user_id":2733333,"accept_rate":89,"display_name":"Tomas Bisciak"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1557477312,"creation_date":1557477312,"answer_id":56073706,"question_id":56057707,"body_markdown":"&gt; This question was answered in the comment, unfortunately commenter\r\n&gt; didnt post answer so i do it. All credit to  M. Deinum.\r\n\r\nCorrect solution is to move \r\n\r\n    .anyRequest().authenticated()\r\n\r\nInto last position of httpsecurity configuration. Ordering in this case matters.","title":"Spring security , Configuration hasAuthority check on endpoints not working","body":"<blockquote>\n  <p>This question was answered in the comment, unfortunately commenter\n  didnt post answer so i do it. All credit to  M. Deinum.</p>\n</blockquote>\n\n<p>Correct solution is to move </p>\n\n<pre><code>.anyRequest().authenticated()\n</code></pre>\n\n<p>Into last position of httpsecurity configuration. Ordering in this case matters.</p>\n"}],"owner":{"account_id":3240077,"reputation":2811,"user_id":2733333,"accept_rate":89,"display_name":"Tomas Bisciak"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5317,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":56073706,"answer_count":1,"score":3,"last_activity_date":1684829125,"creation_date":1557398830,"question_id":56057707,"body_markdown":"I have spring actuator and administration endpoint for my web application.\r\n\r\nIn configure of my spring security I have following code :\r\n\r\n     .and()\r\n     .authorizeRequests()\r\n     .antMatchers(&quot;/actuator/**&quot;, &quot;/administration/**&quot;)\r\n     .hasAuthority(Authority.ADMIN.name())\r\nThis does not seem to work, **desired outcome is that only User with a  authority of admin**, can access these endpoints, right now, any authenticated user can do it. I did it with user that has authority of USER and not admin and it works.\r\n\r\nThis is too dangerous for me And i dont want to put password protection in place when this can be managed by Authorities.\r\n\r\n&gt; **So how can i make sure that only users with Authority of ADMIN can access the following endpoints ?**\r\n\r\nI have posted only this small snipped of code , tell me if anything else is required in order for you to be able to help :).\r\n\r\nAnd yes I have debugged this and authorities in my process are set correctly, admin has auth admin and it works for both basic auth and oauth2. Anyone knows what could be happening?\r\n\r\nOnly person that is not logged in at all cant access these endpoints at the moment, Here is my full security config :\r\n\r\n            // @formatter:off\r\n        httpSecurity\r\n                .authorizeRequests()\r\n                .antMatchers(\r\n                        Utils.MAPPING_INDEX,\r\n                        Utils.MAPPING_ARTICLE,\r\n                        Utils.MAPPING_IMAGE,\r\n                        Utils.MAPPING_ERROR,\r\n                        Utils.MAPPING_VERIFY_MAIL,\r\n                        Utils.MAPPING_REGISTER,\r\n                        Utils.MAPPING_LOGIN,\r\n                        Utils.MAPPING_LOGIN_ERROR,\r\n                        Utils.MAPPING_LOGIN_VERIFIED,\r\n                        Utils.MAPPING_LOGIN_VERIFICATION_ERROR,\r\n                        Utils.MAPPING_RESET_PASSWORD,\r\n                        Utils.MAPPING_LOGIN_PASSWORD_RESET_SUCCESS,\r\n                        Utils.MAPPING_LOGIN_PASSWORD_RESET_LOCKED,\r\n                        Utils.MAPPING_RESET_PASSWORD_RESET_MAIL_SEND,\r\n                        Utils.MAPPING_LOGIN_PASSWORD_RESET_FAILURE,\r\n                        Utils.MAPPING_INDEX_LOGOUT_SUCCESS,\r\n                        Utils.MAPPING_REGISTER_SUCCESS,\r\n                        Utils.MAPPING_REGISTER,\r\n                        Utils.MAPPING_RESET_PASSWORD,\r\n                        Utils.MAPPING_RESET_PASSWORD_NEW_PASSWORD,\r\n                        Utils.MAPPING_AUTHOR,\r\n                        Utils.MAPPING_CONTACT,\r\n                        Utils.MAPPING_CONTACT_SUCCESS,\r\n                        Utils.MAPPING_CONTACT_FAILURE,\r\n                        Utils.MAPPING_REPORT_WORKAROUND,\r\n                        &quot;/test&quot;,\r\n                        &quot;/test1&quot;,\r\n                        &quot;/frag1&quot;,\r\n                        &quot;/frag2&quot;,\r\n                        &quot;/css/**&quot;,\r\n                        &quot;/js/**&quot;,\r\n                        &quot;/img/**&quot;,\r\n                        &quot;/fonts/**&quot;,\r\n                        &quot;/external/**&quot;,\r\n                        &quot;/favicon.ico&quot;,\r\n                        &quot;/favicon_32.ico&quot;,\r\n                        &quot;/favicon.svg&quot;\r\n                ).permitAll()\r\n                .anyRequest().authenticated()\r\n\r\n                .and()\r\n                .authorizeRequests()\r\n                .antMatchers(&quot;/actuator/**&quot;, &quot;/administration/**&quot;)\r\n                .hasAuthority(Authority.ADMIN.name())\r\n\r\n\r\n                .and()\r\n\r\n                .formLogin()\r\n                .loginPage(Utils.MAPPING_LOGIN)\r\n                .loginProcessingUrl(Utils.MAPPING_LOGIN)\r\n                .usernameParameter(&quot;email&quot;)\r\n                .passwordParameter(&quot;password&quot;)\r\n                .successHandler(basicAuthenticationSuccessHandlerImpl)\r\n                .failureUrl(Utils.MAPPING_LOGIN_ERROR)\r\n\r\n                .and()\r\n\r\n                .logout()\r\n                .logoutUrl(Utils.MAPPING_INDEX)\r\n                .logoutSuccessUrl(Utils.MAPPING_INDEX_LOGOUT_SUCCESS)\r\n                .invalidateHttpSession(true)\r\n\r\n                .and()\r\n\r\n                .oauth2Login()\r\n                .loginPage(Utils.MAPPING_LOGIN)\r\n                .successHandler(oauth2AuthenticationSuccessHandler);\r\n\r\n        // @formatter:on\r\n    }\r\n\r\n\r\n","title":"Spring security , Configuration hasAuthority check on endpoints not working","body":"<p>I have spring actuator and administration endpoint for my web application.</p>\n\n<p>In configure of my spring security I have following code :</p>\n\n<pre><code> .and()\n .authorizeRequests()\n .antMatchers(\"/actuator/**\", \"/administration/**\")\n .hasAuthority(Authority.ADMIN.name())\n</code></pre>\n\n<p>This does not seem to work, <strong>desired outcome is that only User with a  authority of admin</strong>, can access these endpoints, right now, any authenticated user can do it. I did it with user that has authority of USER and not admin and it works.</p>\n\n<p>This is too dangerous for me And i dont want to put password protection in place when this can be managed by Authorities.</p>\n\n<blockquote>\n  <p><strong>So how can i make sure that only users with Authority of ADMIN can access the following endpoints ?</strong></p>\n</blockquote>\n\n<p>I have posted only this small snipped of code , tell me if anything else is required in order for you to be able to help :).</p>\n\n<p>And yes I have debugged this and authorities in my process are set correctly, admin has auth admin and it works for both basic auth and oauth2. Anyone knows what could be happening?</p>\n\n<p>Only person that is not logged in at all cant access these endpoints at the moment, Here is my full security config :</p>\n\n<pre><code>        // @formatter:off\n    httpSecurity\n            .authorizeRequests()\n            .antMatchers(\n                    Utils.MAPPING_INDEX,\n                    Utils.MAPPING_ARTICLE,\n                    Utils.MAPPING_IMAGE,\n                    Utils.MAPPING_ERROR,\n                    Utils.MAPPING_VERIFY_MAIL,\n                    Utils.MAPPING_REGISTER,\n                    Utils.MAPPING_LOGIN,\n                    Utils.MAPPING_LOGIN_ERROR,\n                    Utils.MAPPING_LOGIN_VERIFIED,\n                    Utils.MAPPING_LOGIN_VERIFICATION_ERROR,\n                    Utils.MAPPING_RESET_PASSWORD,\n                    Utils.MAPPING_LOGIN_PASSWORD_RESET_SUCCESS,\n                    Utils.MAPPING_LOGIN_PASSWORD_RESET_LOCKED,\n                    Utils.MAPPING_RESET_PASSWORD_RESET_MAIL_SEND,\n                    Utils.MAPPING_LOGIN_PASSWORD_RESET_FAILURE,\n                    Utils.MAPPING_INDEX_LOGOUT_SUCCESS,\n                    Utils.MAPPING_REGISTER_SUCCESS,\n                    Utils.MAPPING_REGISTER,\n                    Utils.MAPPING_RESET_PASSWORD,\n                    Utils.MAPPING_RESET_PASSWORD_NEW_PASSWORD,\n                    Utils.MAPPING_AUTHOR,\n                    Utils.MAPPING_CONTACT,\n                    Utils.MAPPING_CONTACT_SUCCESS,\n                    Utils.MAPPING_CONTACT_FAILURE,\n                    Utils.MAPPING_REPORT_WORKAROUND,\n                    \"/test\",\n                    \"/test1\",\n                    \"/frag1\",\n                    \"/frag2\",\n                    \"/css/**\",\n                    \"/js/**\",\n                    \"/img/**\",\n                    \"/fonts/**\",\n                    \"/external/**\",\n                    \"/favicon.ico\",\n                    \"/favicon_32.ico\",\n                    \"/favicon.svg\"\n            ).permitAll()\n            .anyRequest().authenticated()\n\n            .and()\n            .authorizeRequests()\n            .antMatchers(\"/actuator/**\", \"/administration/**\")\n            .hasAuthority(Authority.ADMIN.name())\n\n\n            .and()\n\n            .formLogin()\n            .loginPage(Utils.MAPPING_LOGIN)\n            .loginProcessingUrl(Utils.MAPPING_LOGIN)\n            .usernameParameter(\"email\")\n            .passwordParameter(\"password\")\n            .successHandler(basicAuthenticationSuccessHandlerImpl)\n            .failureUrl(Utils.MAPPING_LOGIN_ERROR)\n\n            .and()\n\n            .logout()\n            .logoutUrl(Utils.MAPPING_INDEX)\n            .logoutSuccessUrl(Utils.MAPPING_INDEX_LOGOUT_SUCCESS)\n            .invalidateHttpSession(true)\n\n            .and()\n\n            .oauth2Login()\n            .loginPage(Utils.MAPPING_LOGIN)\n            .successHandler(oauth2AuthenticationSuccessHandler);\n\n    // @formatter:on\n}\n</code></pre>\n"},{"tags":["java","spring-boot","spring-boot-actuator"],"comments":[{"owner":{"account_id":3540948,"reputation":5877,"user_id":2958086,"display_name":"Compass"},"score":0,"creation_date":1529074943,"post_id":50877746,"comment_id":88758414,"body_markdown":"Sanity check: component scan on?","body":"Sanity check: component scan on?"},{"owner":{"account_id":1425986,"reputation":3033,"user_id":2306595,"display_name":"Innokenty"},"score":0,"creation_date":1529075559,"post_id":50877746,"comment_id":88758751,"body_markdown":"Yeah, checked it. See the answer by me below. I&#39;m actually just stupid.","body":"Yeah, checked it. See the answer by me below. I&#39;m actually just stupid."}],"answers":[{"tags":[],"owner":{"account_id":1425986,"reputation":3033,"user_id":2306595,"display_name":"Innokenty"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1529076412,"creation_date":1529075184,"answer_id":50878256,"question_id":50877746,"body_markdown":"After posting the question I found the answer almost immediately. It was a combination of typos in the config and the fact that it&#39;s actually **not exposed by default**. Despite [the official post saying][1]: \r\n\r\n&gt; To configure an endpoint, all that’s required really is to expose it as a @Bean\r\n\r\nThese are the proper ways to define the property:\r\n\r\n    management.endpoints.web.exposure.include=*\r\n    management.endpoints.web.exposure.include=&#39;health,info,metrics,hello&#39;\r\n\r\nOr as a YAML:\r\n\r\n    management:\r\n      endpoints:\r\n        web:\r\n          exposure:\r\n            include: &#39;health,info,metrics,hello&#39;\r\n\r\nHere is the official reference: https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html#production-ready-endpoints-exposing-endpoints\r\n\r\nInteresting, that you can&#39;t use underscores in endpoint names anymore. At least without additional changes.\r\n\r\n  [1]: https://spring.io/blog/2017/08/22/introducing-actuator-endpoints-in-spring-boot-2-0#configuration","title":"Spring Boot 2.0 Not Registering Custom Actuator Endpoint Bean","body":"<p>After posting the question I found the answer almost immediately. It was a combination of typos in the config and the fact that it's actually <strong>not exposed by default</strong>. Despite <a href=\"https://spring.io/blog/2017/08/22/introducing-actuator-endpoints-in-spring-boot-2-0#configuration\" rel=\"noreferrer\">the official post saying</a>: </p>\n\n<blockquote>\n  <p>To configure an endpoint, all that’s required really is to expose it as a @Bean</p>\n</blockquote>\n\n<p>These are the proper ways to define the property:</p>\n\n<pre><code>management.endpoints.web.exposure.include=*\nmanagement.endpoints.web.exposure.include='health,info,metrics,hello'\n</code></pre>\n\n<p>Or as a YAML:</p>\n\n<pre><code>management:\n  endpoints:\n    web:\n      exposure:\n        include: 'health,info,metrics,hello'\n</code></pre>\n\n<p>Here is the official reference: <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html#production-ready-endpoints-exposing-endpoints\" rel=\"noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html#production-ready-endpoints-exposing-endpoints</a></p>\n\n<p>Interesting, that you can't use underscores in endpoint names anymore. At least without additional changes.</p>\n"}],"owner":{"account_id":1425986,"reputation":3033,"user_id":2306595,"display_name":"Innokenty"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5439,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"closed_date":1529329032,"accepted_answer_id":50878256,"answer_count":1,"score":3,"last_activity_date":1684829048,"creation_date":1529073436,"question_id":50877746,"body_markdown":"I&#39;m trying to add a custom actuator endpoint in Spring Boot 2.0.2.RELEASE application.\r\nI&#39;m following [the official guidelines][1], [the official migration guide][2] and also [this post][3].\r\n\r\nI am able to configure everything via properties: hide/expose endpoints, change base path etc. Everything works, except my custom endpoint bean is not picked up by `WebMvcEndpointHandlerMapping`. It simply doesn&#39;t show up in these famous logging lines:\r\n\r\n    EndpointLinksResolver        : Exposing 2 endpoint(s) beneath base path &#39;/actuator&#39;\r\n    WebMvcEndpointHandlerMapping : Mapped &quot;{[/actuator/health],methods=[GET],produces=[application/vnd.spring-boot.actuator.v2+json || application/json]}&quot; onto public java.lang.Object org.springframework.boot.actuate.endpoint.web.servlet.AbstractWebMvcEndpointHandlerMapping$OperationHandler.handle(javax.servlet.http.HttpServletRequest,java.util.Map&lt;java.lang.String, java.lang.String&gt;)\r\n    WebMvcEndpointHandlerMapping : Mapped &quot;{[/actuator/info],methods=[GET],produces=[application/vnd.spring-boot.actuator.v2+json || application/json]}&quot; onto public java.lang.Object org.springframework.boot.actuate.endpoint.web.servlet.AbstractWebMvcEndpointHandlerMapping$OperationHandler.handle(javax.servlet.http.HttpServletRequest,java.util.Map&lt;java.lang.String, java.lang.String&gt;)\r\n    WebMvcEndpointHandlerMapping : Mapped &quot;{[/actuator],methods=[GET],produces=[application/vnd.spring-boot.actuator.v2+json || application/json]}&quot; onto protected java.util.Map&lt;java.lang.String, java.util.Map&lt;java.lang.String, org.springframework.boot.actuate.endpoint.web.Link&gt;&gt; org.springframework.boot.actuate.endpoint.web.servlet.WebMvcEndpointHandlerMapping.links(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)\r\n\r\nThese three lines is all I get. I can access `/actuator/health` and `/actuator/info` without any trouble, but not my custom endpoint. I get 404 obviously.\r\n\r\nWhat I tried so far:\r\n\r\n - Checked that my endpoint class is registered in the context as a bean.\r\n - Exposed it explicitly via yaml configuration.\r\n - Exposed everything via `management.endpoints.web.exposure.include=*`\r\n - Removed all the management configuration completely, because it should be actually available by default.\r\n - Triple checked the endpoint id.\r\n - Renamed the endpoint id.\r\n\r\nAny ideas of what I can at least look into? All the questions I found so far end up in person not realizing they need `@Component` annotation too.\r\n\r\nAh, here is my class by the way:\r\n\r\n    @Component\r\n    @Endpoint(id = &quot;hello&quot;)\r\n    public class HelloEndpoint {\r\n\r\n        @ReadOperation\r\n        public String sayHello() {\r\n            return &quot;Hello!&quot;;\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://spring.io/blog/2017/08/22/introducing-actuator-endpoints-in-spring-boot-2-0\r\n  [2]: https://github.com/spring-projects/spring-boot/wiki/Migrating-a-custom-Actuator-endpoint-to-Spring-Boot-2\r\n  [3]: http://www.baeldung.com/spring-boot-actuators","title":"Spring Boot 2.0 Not Registering Custom Actuator Endpoint Bean","body":"<p>I'm trying to add a custom actuator endpoint in Spring Boot 2.0.2.RELEASE application.\nI'm following <a href=\"https://spring.io/blog/2017/08/22/introducing-actuator-endpoints-in-spring-boot-2-0\" rel=\"nofollow noreferrer\">the official guidelines</a>, <a href=\"https://github.com/spring-projects/spring-boot/wiki/Migrating-a-custom-Actuator-endpoint-to-Spring-Boot-2\" rel=\"nofollow noreferrer\">the official migration guide</a> and also <a href=\"http://www.baeldung.com/spring-boot-actuators\" rel=\"nofollow noreferrer\">this post</a>.</p>\n\n<p>I am able to configure everything via properties: hide/expose endpoints, change base path etc. Everything works, except my custom endpoint bean is not picked up by <code>WebMvcEndpointHandlerMapping</code>. It simply doesn't show up in these famous logging lines:</p>\n\n<pre><code>EndpointLinksResolver        : Exposing 2 endpoint(s) beneath base path '/actuator'\nWebMvcEndpointHandlerMapping : Mapped \"{[/actuator/health],methods=[GET],produces=[application/vnd.spring-boot.actuator.v2+json || application/json]}\" onto public java.lang.Object org.springframework.boot.actuate.endpoint.web.servlet.AbstractWebMvcEndpointHandlerMapping$OperationHandler.handle(javax.servlet.http.HttpServletRequest,java.util.Map&lt;java.lang.String, java.lang.String&gt;)\nWebMvcEndpointHandlerMapping : Mapped \"{[/actuator/info],methods=[GET],produces=[application/vnd.spring-boot.actuator.v2+json || application/json]}\" onto public java.lang.Object org.springframework.boot.actuate.endpoint.web.servlet.AbstractWebMvcEndpointHandlerMapping$OperationHandler.handle(javax.servlet.http.HttpServletRequest,java.util.Map&lt;java.lang.String, java.lang.String&gt;)\nWebMvcEndpointHandlerMapping : Mapped \"{[/actuator],methods=[GET],produces=[application/vnd.spring-boot.actuator.v2+json || application/json]}\" onto protected java.util.Map&lt;java.lang.String, java.util.Map&lt;java.lang.String, org.springframework.boot.actuate.endpoint.web.Link&gt;&gt; org.springframework.boot.actuate.endpoint.web.servlet.WebMvcEndpointHandlerMapping.links(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)\n</code></pre>\n\n<p>These three lines is all I get. I can access <code>/actuator/health</code> and <code>/actuator/info</code> without any trouble, but not my custom endpoint. I get 404 obviously.</p>\n\n<p>What I tried so far:</p>\n\n<ul>\n<li>Checked that my endpoint class is registered in the context as a bean.</li>\n<li>Exposed it explicitly via yaml configuration.</li>\n<li>Exposed everything via <code>management.endpoints.web.exposure.include=*</code></li>\n<li>Removed all the management configuration completely, because it should be actually available by default.</li>\n<li>Triple checked the endpoint id.</li>\n<li>Renamed the endpoint id.</li>\n</ul>\n\n<p>Any ideas of what I can at least look into? All the questions I found so far end up in person not realizing they need <code>@Component</code> annotation too.</p>\n\n<p>Ah, here is my class by the way:</p>\n\n<pre><code>@Component\n@Endpoint(id = \"hello\")\npublic class HelloEndpoint {\n\n    @ReadOperation\n    public String sayHello() {\n        return \"Hello!\";\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-boot-actuator"],"answers":[{"tags":[],"owner":{"account_id":4497262,"reputation":961,"user_id":3656774,"display_name":"Martin van Wingerden"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1521561811,"creation_date":1521559498,"answer_id":49388154,"question_id":49387867,"body_markdown":"The initial partly problem was that the code did not add an endpoint with no &quot;selector&quot;\r\n\r\n[Source][1]\r\n\r\n    @Endpoint(id = &quot;loggers&quot;)\r\n    @Component\r\n    public class LoggersEndpoint {\r\n    \r\n        @ReadOperation\r\n        public Map&lt;String, Object&gt; loggers() { ... }\r\n    \r\n        @ReadOperation\r\n        public LoggerLevels loggerLevels(@Selector String name) { ... }\r\n    \r\n        @WriteOperation\r\n        public void configureLogLevel(@Selector String name, LogLevel configuredLevel) { ... }\r\n    \r\n    }\r\n\r\n&gt; This endpoint exposes three operations:\r\n&gt; \r\n&gt; GET on /application/loggers: the configuration of all loggers (as it\r\n&gt; has no &quot;selector&quot; parameter):\r\n&gt; \r\n&gt; GET on /application/loggers/{name}: the configuration of a named\r\n&gt; logger (using the name @Selector).\r\n&gt; \r\n&gt; ...\r\n\r\nThe edited question led to the conclusion [that it should be a bean][2] \r\n\r\n&gt; If you add a @Bean annotated with @Endpoint, any methods annotated\r\n&gt; with @ReadOperation, @WriteOperation, or @DeleteOperation are\r\n&gt; automatically exposed over JMX and, in a web application, over HTTP as\r\n&gt; well. Endpoints can be exposed over HTTP using Jersey, Spring MVC, or\r\n&gt; Spring WebFlux.\r\n\r\nOr see [comments in the announcement of the feature][3]\r\n\r\n\r\n  [1]: https://spring.io/blog/2017/08/22/introducing-actuator-endpoints-in-spring-boot-2-0\r\n  [2]: https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html#production-ready-endpoints-custom\r\n  [3]: https://spring.io/blog/2017/08/22/introducing-actuator-endpoints-in-spring-boot-2-0#comment-3481606304","title":"Spring Boot 2 Custom Actuator Endpoints","body":"<p>The initial partly problem was that the code did not add an endpoint with no \"selector\"</p>\n\n<p><a href=\"https://spring.io/blog/2017/08/22/introducing-actuator-endpoints-in-spring-boot-2-0\" rel=\"nofollow noreferrer\">Source</a></p>\n\n<pre><code>@Endpoint(id = \"loggers\")\n@Component\npublic class LoggersEndpoint {\n\n    @ReadOperation\n    public Map&lt;String, Object&gt; loggers() { ... }\n\n    @ReadOperation\n    public LoggerLevels loggerLevels(@Selector String name) { ... }\n\n    @WriteOperation\n    public void configureLogLevel(@Selector String name, LogLevel configuredLevel) { ... }\n\n}\n</code></pre>\n\n<blockquote>\n  <p>This endpoint exposes three operations:</p>\n  \n  <p>GET on /application/loggers: the configuration of all loggers (as it\n  has no \"selector\" parameter):</p>\n  \n  <p>GET on /application/loggers/{name}: the configuration of a named\n  logger (using the name @Selector).</p>\n  \n  <p>...</p>\n</blockquote>\n\n<p>The edited question led to the conclusion <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html#production-ready-endpoints-custom\" rel=\"nofollow noreferrer\">that it should be a bean</a> </p>\n\n<blockquote>\n  <p>If you add a @Bean annotated with @Endpoint, any methods annotated\n  with @ReadOperation, @WriteOperation, or @DeleteOperation are\n  automatically exposed over JMX and, in a web application, over HTTP as\n  well. Endpoints can be exposed over HTTP using Jersey, Spring MVC, or\n  Spring WebFlux.</p>\n</blockquote>\n\n<p>Or see <a href=\"https://spring.io/blog/2017/08/22/introducing-actuator-endpoints-in-spring-boot-2-0#comment-3481606304\" rel=\"nofollow noreferrer\">comments in the announcement of the feature</a></p>\n"},{"tags":[],"owner":{"account_id":8866557,"reputation":331,"user_id":6621555,"display_name":"Gene Knight"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1521560814,"creation_date":1521560814,"answer_id":49388589,"question_id":49387867,"body_markdown":"OK, solved:\r\n\r\n\t\t@Endpoint(id=&quot;mypoint&quot;)\r\n\t\t@Component\r\n\t\tpublic class myPointEndPoint {\r\n\t\t\t@ReadOperation\r\n\t\t\tpublic String mypoint(){\r\n\t\t\t\treturn &quot;Hello&quot; ;\r\n\t\t\t}\r\n\t\t}\r\n\r\nWhat was missing was the &quot;@Component&quot; annotation. But, where is this in the docs?","title":"Spring Boot 2 Custom Actuator Endpoints","body":"<p>OK, solved:</p>\n\n<pre><code>    @Endpoint(id=\"mypoint\")\n    @Component\n    public class myPointEndPoint {\n        @ReadOperation\n        public String mypoint(){\n            return \"Hello\" ;\n        }\n    }\n</code></pre>\n\n<p>What was missing was the \"@Component\" annotation. But, where is this in the docs?</p>\n"},{"tags":[],"owner":{"account_id":305881,"reputation":5247,"user_id":616290,"accept_rate":57,"display_name":"Dmytro Boichenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1531294599,"creation_date":1531237544,"answer_id":51269469,"question_id":49387867,"body_markdown":"Maybe this will help somebody.\r\n\r\nLooks like `@ReadOperation` doesn&#39;t support return type `Void`. You should return at least an empty string on your `invoke` method. \r\n\r\nspring-boot 2.0.3.RELEASE\r\n\r\n\r\n    @Component\r\n    @Endpoint(id = &quot;heartbeat&quot;)\r\n    public class HeartbeatEndpoint {\r\n\r\n        @ReadOperation\r\n        public String invoke() {\r\n            return &quot;&quot;;\r\n        }\r\n    }\r\n","title":"Spring Boot 2 Custom Actuator Endpoints","body":"<p>Maybe this will help somebody.</p>\n\n<p>Looks like <code>@ReadOperation</code> doesn't support return type <code>Void</code>. You should return at least an empty string on your <code>invoke</code> method. </p>\n\n<p>spring-boot 2.0.3.RELEASE</p>\n\n<pre><code>@Component\n@Endpoint(id = \"heartbeat\")\npublic class HeartbeatEndpoint {\n\n    @ReadOperation\n    public String invoke() {\n        return \"\";\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":8866557,"reputation":331,"user_id":6621555,"display_name":"Gene Knight"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10060,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":3,"score":5,"last_activity_date":1684828976,"creation_date":1521558729,"question_id":49387867,"body_markdown":"Spring Noob: OK. I start with a STS Spring Starter Project / Maven / Java 8 / Spring Boot 2.0, and select the Web and Actuator dependencies. It builds and runs fine, and reponds to http://localhost:8080/actuator/health. I add an &quot;Endpoint&quot; to the main application class, so that it looks like this.\r\n\r\n\tpackage com.thumbsup;\r\n\t\r\n\timport org.springframework.boot.SpringApplication;\r\n\timport org.springframework.boot.actuate.endpoint.annotation.Endpoint;\r\n\timport org.springframework.boot.actuate.endpoint.annotation.ReadOperation;\r\n\timport org.springframework.boot.actuate.endpoint.annotation.Selector;\r\n\timport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\t\r\n\t@SpringBootApplication\r\n\tpublic class YourStash11Application {\r\n\t\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tSpringApplication.run(YourStash11Application.class, args);\r\n\t\t}\r\n\t\t\r\n\t\t@Endpoint(id=&quot;mypoint&quot;)\r\n\t\tpublic class CustomPoint {\r\n\t\t\t@ReadOperation\r\n\t\t\tpublic String getHello(){\r\n\t\t\t\treturn &quot;Hello&quot; ;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\nI try to enable everything in application.properties:\r\n\r\n\tmanagement.endpoints.enabled-by-default=true\r\n\tmanagement.endpoint.conditions.enabled=true\r\n\tmanagement.endpoint.mypoint.enabled=true\r\n\tmanagement.endpoints.web.exposure.include=*\r\n\r\nBut when it builds, there&#39;s no reference to mapping /actuator/mypoint, and  \r\nhttp://localhost:8080/actuator/mypoint and  \r\nhttp://localhost:8080/application/mypoint  \r\nboth return 404 errors.\r\n\r\nWhat am I missing? Thanks!\r\n","title":"Spring Boot 2 Custom Actuator Endpoints","body":"<p>Spring Noob: OK. I start with a STS Spring Starter Project / Maven / Java 8 / Spring Boot 2.0, and select the Web and Actuator dependencies. It builds and runs fine, and reponds to <a href=\"http://localhost:8080/actuator/health\" rel=\"noreferrer\">http://localhost:8080/actuator/health</a>. I add an \"Endpoint\" to the main application class, so that it looks like this.</p>\n\n<pre><code>package com.thumbsup;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.actuate.endpoint.annotation.Endpoint;\nimport org.springframework.boot.actuate.endpoint.annotation.ReadOperation;\nimport org.springframework.boot.actuate.endpoint.annotation.Selector;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class YourStash11Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(YourStash11Application.class, args);\n    }\n\n    @Endpoint(id=\"mypoint\")\n    public class CustomPoint {\n        @ReadOperation\n        public String getHello(){\n            return \"Hello\" ;\n        }\n    }\n\n}\n</code></pre>\n\n<p>I try to enable everything in application.properties:</p>\n\n<pre><code>management.endpoints.enabled-by-default=true\nmanagement.endpoint.conditions.enabled=true\nmanagement.endpoint.mypoint.enabled=true\nmanagement.endpoints.web.exposure.include=*\n</code></pre>\n\n<p>But when it builds, there's no reference to mapping /actuator/mypoint, and<br>\n<a href=\"http://localhost:8080/actuator/mypoint\" rel=\"noreferrer\">http://localhost:8080/actuator/mypoint</a> and<br>\n<a href=\"http://localhost:8080/application/mypoint\" rel=\"noreferrer\">http://localhost:8080/application/mypoint</a><br>\nboth return 404 errors.</p>\n\n<p>What am I missing? Thanks!</p>\n"},{"tags":["java","spring","spring-boot-actuator"],"comments":[{"owner":{"account_id":8447748,"reputation":38021,"user_id":6337748,"accept_rate":38,"display_name":"notionquest"},"score":0,"creation_date":1520507859,"post_id":49169614,"comment_id":85348490,"body_markdown":"Auto configured health indicators check the database, jmx etc. https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html","body":"Auto configured health indicators check the database, jmx etc. <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/html/&hellip;</a>"},{"owner":{"account_id":8258676,"reputation":973,"user_id":6210973,"display_name":"Mick"},"score":0,"creation_date":1520509062,"post_id":49169614,"comment_id":85349206,"body_markdown":"So you cannot know when the application context has been fully initialized?","body":"So you cannot know when the application context has been fully initialized?"},{"owner":{"account_id":8447748,"reputation":38021,"user_id":6337748,"accept_rate":38,"display_name":"notionquest"},"score":0,"creation_date":1520509860,"post_id":49169614,"comment_id":85349666,"body_markdown":"it is mainly for endpoints and databases. If you want to check for application context initialization, you can write the listener to check that.","body":"it is mainly for endpoints and databases. If you want to check for application context initialization, you can write the listener to check that."},{"owner":{"account_id":8258676,"reputation":973,"user_id":6210973,"display_name":"Mick"},"score":0,"creation_date":1520601550,"post_id":49169614,"comment_id":85394043,"body_markdown":"ok, thanks! there is a &quot;status&quot; attribut on the top level, though. This must be application wide - and I am wondering what it tells us?\n\n{\n  &quot;status&quot; : &quot;UP&quot;,\n.....","body":"ok, thanks! there is a &quot;status&quot; attribut on the top level, though. This must be application wide - and I am wondering what it tells us?  {   &quot;status&quot; : &quot;UP&quot;, ....."}],"answers":[{"tags":[],"owner":{"account_id":8447748,"reputation":38021,"user_id":6337748,"accept_rate":38,"display_name":"notionquest"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1520604744,"creation_date":1520604744,"answer_id":49195646,"question_id":49169614,"body_markdown":"In order to test whether the application context is loaded, you can perform this custom implementation.\r\n\r\n`@EventListener` - The method annotated with EventListener is triggered when the context is initialized.\r\n\r\nIn the below code, I have incremented the counter on successful initialization. When you hit the actuator health endpoint, you will get the status as UP.\r\n\r\n**Sample implementation for context initialization health check:-**\r\n\r\n    @Component\r\n    public class ApplicationContextHealthIndicator implements HealthIndicator {\r\n    \r\n        private final Logger LOG = Logger.getLogger(getClass().getName());\r\n    \r\n        public static int counter;\r\n    \r\n        @EventListener\r\n        public void onApplicationEvent(ContextRefreshedEvent event) {\r\n            LOG.info(&quot;Increment counter :&quot; + counter);\r\n            counter++;\r\n        }\r\n    \r\n        @Override\r\n        public Health health() {\r\n            if (counter == 0) {\r\n                return Health.down().withDetail(&quot;Error Code&quot;, 500).build();\r\n            }\r\n            return Health.up().build();\r\n        }\r\n    }\r\n\r\n**Endpoint Spring boot version 5:-**\r\n\r\n&gt; http://localhost:8080/actuator/health\r\n\r\nSpring actuator can check the database, web service endpoints, email server etc. It can provide the status for all these resources which are part of the application.\r\n\r\n[Some default health indicators available][1]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html#_auto_configured_healthindicators","title":"Spring Boot&#39;s health actuator - WHEN is it UP?","body":"<p>In order to test whether the application context is loaded, you can perform this custom implementation.</p>\n\n<p><code>@EventListener</code> - The method annotated with EventListener is triggered when the context is initialized.</p>\n\n<p>In the below code, I have incremented the counter on successful initialization. When you hit the actuator health endpoint, you will get the status as UP.</p>\n\n<p><strong>Sample implementation for context initialization health check:-</strong></p>\n\n<pre><code>@Component\npublic class ApplicationContextHealthIndicator implements HealthIndicator {\n\n    private final Logger LOG = Logger.getLogger(getClass().getName());\n\n    public static int counter;\n\n    @EventListener\n    public void onApplicationEvent(ContextRefreshedEvent event) {\n        LOG.info(\"Increment counter :\" + counter);\n        counter++;\n    }\n\n    @Override\n    public Health health() {\n        if (counter == 0) {\n            return Health.down().withDetail(\"Error Code\", 500).build();\n        }\n        return Health.up().build();\n    }\n}\n</code></pre>\n\n<p><strong>Endpoint Spring boot version 5:-</strong></p>\n\n<blockquote>\n  <p><a href=\"http://localhost:8080/actuator/health\" rel=\"nofollow noreferrer\">http://localhost:8080/actuator/health</a></p>\n</blockquote>\n\n<p>Spring actuator can check the database, web service endpoints, email server etc. It can provide the status for all these resources which are part of the application.</p>\n\n<p><a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html#_auto_configured_healthindicators\" rel=\"nofollow noreferrer\">Some default health indicators available</a></p>\n"}],"owner":{"account_id":8258676,"reputation":973,"user_id":6210973,"display_name":"Mick"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6012,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1684828788,"creation_date":1520501314,"question_id":49169614,"body_markdown":"I cannot find any documentation on when Springs Health Actuator will return the UP status. Can you rely on all *`@Components`* being initialized? Will a *`@Controller`* be ready to serve requests?","title":"Spring Boot&#39;s health actuator - WHEN is it UP?","body":"<p>I cannot find any documentation on when Springs Health Actuator will return the UP status. Can you rely on all <em><code>@Components</code></em> being initialized? Will a <em><code>@Controller</code></em> be ready to serve requests?</p>\n"},{"tags":["java","mysql","spring-boot","docker","container-image"],"comments":[{"owner":{"account_id":2032415,"reputation":1277,"user_id":1815716,"accept_rate":38,"display_name":"prasad"},"score":0,"creation_date":1684822460,"post_id":76311639,"comment_id":134568856,"body_markdown":"can you please provide complete stacktrace looking some permissions issue","body":"can you please provide complete stacktrace looking some permissions issue"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1684825191,"post_id":76311639,"comment_id":134569365,"body_markdown":"Your jdbc url is for a docker service not for running locally. So it probably fails to connect to the database.","body":"Your jdbc url is for a docker service not for running locally. So it probably fails to connect to the database."}],"answers":[{"tags":[],"owner":{"account_id":28177079,"reputation":118,"user_id":21534708,"display_name":"Farfetch&#39;d"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684828752,"creation_date":1684828752,"answer_id":76312471,"question_id":76311639,"body_markdown":"like M. Deinum suggest it you problably got this error due of a wrong jdbc url inside your application.properties. To solve that add mysql in your container (by adding an image of mysql inside your Dockerfile) or create an another container with mysql (with this second solution you have to modify jdbc url)\r\n","title":"Getting spring boot build error when trying to create jar file using docker container configurations in application.properties","body":"<p>like M. Deinum suggest it you problably got this error due of a wrong jdbc url inside your application.properties. To solve that add mysql in your container (by adding an image of mysql inside your Dockerfile) or create an another container with mysql (with this second solution you have to modify jdbc url)</p>\n"}],"owner":{"account_id":28386002,"reputation":13,"user_id":21712461,"display_name":"Dhruv Singhal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76312471,"answer_count":1,"score":1,"last_activity_date":1684828752,"creation_date":1684821324,"question_id":76311639,"body_markdown":"Spring boot build failure when using docker configurations of mysql databases\r\n\r\n**Application.properties**\r\n\r\n    `spring.datasource.url=jdbc:mysql://mysqldb:3306/employeedb?useSSL=false\r\n     spring.datasource.username=sa\r\n     spring.datasource.password=1234\r\n     spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n     spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect\r\n     spring.jpa.hibernate.ddl-auto=update\r\n     spring.jpa.show-sql=true`\r\n\r\n**Dockerfile**\r\n\r\n\r\n    `FROM openjdk:8\r\n     ADD target/demo-0.0.1-SNAPSHOT.jar demo-0.0.1-SNAPSHOT.jar\r\n     EXPOSE 8080\r\n     ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;demo-0.0.1-SNAPSHOT.jar&quot;]`\r\n\r\n\r\nI am very new to docker and I am trying to dockerize my spring boot application which is using Mysql database, I have been following a tutorial, but when i am running mvn clean install to build the jar file, it is giving this error\r\n\r\n\r\n  **Error**\r\n    \r\n                 \r\n    ```Error starting ApplicationContext. To display the conditions \r\n     report re-run your application with &#39;debug&#39; enabled.\r\n     2023-05-22 16:33:55.304 ERROR 6245 --- [           main] \r\n     o.s.boot.SpringApplication               : Application run \r\n     failed\r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.26.jar:5.3.26]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.26.jar:5.3.26]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.26.jar:5.3.26]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.26.jar:5.3.26]\r\n","title":"Getting spring boot build error when trying to create jar file using docker container configurations in application.properties","body":"<p>Spring boot build failure when using docker configurations of mysql databases</p>\n<p><strong>Application.properties</strong></p>\n<pre><code>`spring.datasource.url=jdbc:mysql://mysqldb:3306/employeedb?useSSL=false\n spring.datasource.username=sa\n spring.datasource.password=1234\n spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\n spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect\n spring.jpa.hibernate.ddl-auto=update\n spring.jpa.show-sql=true`\n</code></pre>\n<p><strong>Dockerfile</strong></p>\n<pre><code>`FROM openjdk:8\n ADD target/demo-0.0.1-SNAPSHOT.jar demo-0.0.1-SNAPSHOT.jar\n EXPOSE 8080\n ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;demo-0.0.1-SNAPSHOT.jar&quot;]`\n</code></pre>\n<p>I am very new to docker and I am trying to dockerize my spring boot application which is using Mysql database, I have been following a tutorial, but when i am running mvn clean install to build the jar file, it is giving this error</p>\n<p><strong>Error</strong></p>\n<pre><code>```Error starting ApplicationContext. To display the conditions \n report re-run your application with 'debug' enabled.\n 2023-05-22 16:33:55.304 ERROR 6245 --- [           main] \n o.s.boot.SpringApplication               : Application run \n failed\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.26.jar:5.3.26]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.26.jar:5.3.26]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.26.jar:5.3.26]\nat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.26.jar:5.3.26]\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-boot-actuator"],"answers":[{"tags":[],"owner":{"account_id":6089340,"reputation":138,"user_id":4752210,"display_name":"nakul shukla"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1609852005,"creation_date":1609852005,"answer_id":65579506,"question_id":65349051,"body_markdown":"I suppose you are talking about `/actuator/httptrace`.  Spring boot doesn&#39;t publish request and response payload by default. Also you need to provide implementation of &quot;InMemoryHttpTraceRepository&quot; bean to expose custom information for tracing. [This](https://developer.okta.com/blog/2019/07/17/monitoring-with-actuator) blog could be helpful.","title":"Adding response body to Spring Boot Actuator","body":"<p>I suppose you are talking about <code>/actuator/httptrace</code>.  Spring boot doesn't publish request and response payload by default. Also you need to provide implementation of &quot;InMemoryHttpTraceRepository&quot; bean to expose custom information for tracing. <a href=\"https://developer.okta.com/blog/2019/07/17/monitoring-with-actuator\" rel=\"nofollow noreferrer\">This</a> blog could be helpful.</p>\n"}],"owner":{"account_id":330015,"reputation":55,"user_id":6400480,"display_name":"Hesham Abboud"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1517,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":65579506,"answer_count":1,"score":0,"last_activity_date":1684828620,"creation_date":1608243150,"question_id":65349051,"body_markdown":"I&#39;d like to view the response body in Spring Boot Actuator. I have tried couple of tutorials I found but none is working. The most concrete answer I found was using WebRequestTraceFilter which is no longer supported in Spring Boot 2.X.\r\n\r\nAlternatively, if there&#39;s any tool like Laravel Telescope for Spring Boot would be great. I&#39;m already using Spring Boot Admin and it&#39;s great except for the response body part.","title":"Adding response body to Spring Boot Actuator","body":"<p>I'd like to view the response body in Spring Boot Actuator. I have tried couple of tutorials I found but none is working. The most concrete answer I found was using WebRequestTraceFilter which is no longer supported in Spring Boot 2.X.</p>\n<p>Alternatively, if there's any tool like Laravel Telescope for Spring Boot would be great. I'm already using Spring Boot Admin and it's great except for the response body part.</p>\n"},{"tags":["java","maven","quarkus","quarkus-panache"],"comments":[{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":0,"creation_date":1684820536,"post_id":76309856,"comment_id":134568569,"body_markdown":"vintage-store is still using quarkus 2.x branch as opposite as other projects using Quarkus 3. Mistery solved.","body":"vintage-store is still using quarkus 2.x branch as opposite as other projects using Quarkus 3. Mistery solved."},{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":1,"creation_date":1684822210,"post_id":76309856,"comment_id":134568811,"body_markdown":"@LucaBassoRicci why not add that as an answer? That way future readers can know immediately what the fix is instead of reading through comments.","body":"@LucaBassoRicci why not add that as an answer? That way future readers can know immediately what the fix is instead of reading through comments."},{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":1,"creation_date":1684827710,"post_id":76309856,"comment_id":134569925,"body_markdown":"@geoand you&#39;re right, done :)","body":"@geoand you&#39;re right, done :)"}],"answers":[{"tags":[],"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1684827567,"creation_date":1684827567,"answer_id":76312312,"question_id":76309856,"body_markdown":"As @geoand pointed out of me I&#39;m moving my comment as answer for future readers.\r\n\r\n`vintage-store` is still using Quarkus 2.x branch as opposite as other projects are using Quarkus 3.","title":"java.lang.ClassNotFoundException: javax.inject.Provider - Quarkus","body":"<p>As @geoand pointed out of me I'm moving my comment as answer for future readers.</p>\n<p><code>vintage-store</code> is still using Quarkus 2.x branch as opposite as other projects are using Quarkus 3.</p>\n"}],"owner":{"account_id":10383987,"reputation":2344,"user_id":7657749,"display_name":"Jan D.M."},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":351,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":76312312,"answer_count":1,"score":-2,"last_activity_date":1684828618,"creation_date":1684789065,"question_id":76309856,"body_markdown":"This is my Publisher object:\r\n```package org.agoncal.quarkus.panache.model;\r\n\r\nimport io.quarkus.hibernate.orm.panache.PanacheEntity;\r\n\r\nimport jakarta.persistence.Entity;\r\nimport java.time.Instant;\r\n\r\n@Entity\r\npublic class Publisher extends PanacheEntity {\r\n\r\n    // ======================================\r\n    // =             Attributes             =\r\n    // ======================================\r\n\r\n    public String name;\r\n\r\n    public Instant createdDate = Instant.now();\r\n\r\n    // ======================================\r\n    // =           Constructors             =\r\n    // ======================================\r\n\r\n    public Publisher(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public Publisher() {\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Publisher{&quot; +\r\n                &quot;name=&#39;&quot; + name + &#39;\\&#39;&#39; +\r\n                &quot;, createdDate=&quot; + createdDate +\r\n                &quot;, id=&quot; + id +\r\n                &#39;}&#39;;\r\n    }\r\n}\r\n```\r\n\r\nThis is my test:\r\n\r\n```package org.agoncal.quarkus.panache.repository;\r\n\r\nimport io.quarkus.test.TestTransaction;\r\nimport io.quarkus.test.junit.QuarkusTest;\r\nimport org.agoncal.quarkus.panache.model.Publisher;\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\nimport static org.junit.jupiter.api.Assertions.assertNotNull;\r\n\r\n@QuarkusTest\r\npublic class PublisherRepositoryTest {\r\n    @Test\r\n    @TestTransaction\r\n    public void shouldCreateAndFindPublisher() {\r\n        Publisher publisher = new Publisher(&quot;name&quot;);\r\n\r\n        publisher.persist(publisher);\r\n        assertNotNull(publisher.id);\r\n\r\n        publisher = publisher.findById(publisher.id);\r\n        assertEquals(&quot;name&quot;, publisher.name);\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\nThis is the error when doing a `mvn clean install`:\r\n```\r\n-------------------------------------------------------------------------------\r\nTest set: org.agoncal.quarkus.panache.repository.PublisherRepositoryTest\r\n-------------------------------------------------------------------------------\r\nTests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 3.755 s &lt;&lt;&lt; FAILURE! - in org.agoncal.quarkus.panache.repository.PublisherRepositoryTest\r\norg.agoncal.quarkus.panache.repository.PublisherRepositoryTest.shouldCreateAndFindPublisher  Time elapsed: 0.002 s  &lt;&lt;&lt; ERROR!\r\njava.lang.RuntimeException: java.lang.NoClassDefFoundError: javax/inject/Provider\r\nCaused by: java.lang.NoClassDefFoundError: javax/inject/Provider\r\nCaused by: java.lang.ClassNotFoundException: javax.inject.Provider\r\n```\r\n\r\nI think the error is quite weird, because I do not use javax in my code...\r\n","title":"java.lang.ClassNotFoundException: javax.inject.Provider - Quarkus","body":"<p>This is my Publisher object:</p>\n<pre><code>\nimport io.quarkus.hibernate.orm.panache.PanacheEntity;\n\nimport jakarta.persistence.Entity;\nimport java.time.Instant;\n\n@Entity\npublic class Publisher extends PanacheEntity {\n\n    // ======================================\n    // =             Attributes             =\n    // ======================================\n\n    public String name;\n\n    public Instant createdDate = Instant.now();\n\n    // ======================================\n    // =           Constructors             =\n    // ======================================\n\n    public Publisher(String name) {\n        this.name = name;\n    }\n\n    public Publisher() {\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Publisher{&quot; +\n                &quot;name='&quot; + name + '\\'' +\n                &quot;, createdDate=&quot; + createdDate +\n                &quot;, id=&quot; + id +\n                '}';\n    }\n}\n</code></pre>\n<p>This is my test:</p>\n<pre><code>\nimport io.quarkus.test.TestTransaction;\nimport io.quarkus.test.junit.QuarkusTest;\nimport org.agoncal.quarkus.panache.model.Publisher;\nimport org.junit.jupiter.api.Test;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.junit.jupiter.api.Assertions.assertNotNull;\n\n@QuarkusTest\npublic class PublisherRepositoryTest {\n    @Test\n    @TestTransaction\n    public void shouldCreateAndFindPublisher() {\n        Publisher publisher = new Publisher(&quot;name&quot;);\n\n        publisher.persist(publisher);\n        assertNotNull(publisher.id);\n\n        publisher = publisher.findById(publisher.id);\n        assertEquals(&quot;name&quot;, publisher.name);\n\n    }\n\n}\n</code></pre>\n<p>This is the error when doing a <code>mvn clean install</code>:</p>\n<pre><code>-------------------------------------------------------------------------------\nTest set: org.agoncal.quarkus.panache.repository.PublisherRepositoryTest\n-------------------------------------------------------------------------------\nTests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 3.755 s &lt;&lt;&lt; FAILURE! - in org.agoncal.quarkus.panache.repository.PublisherRepositoryTest\norg.agoncal.quarkus.panache.repository.PublisherRepositoryTest.shouldCreateAndFindPublisher  Time elapsed: 0.002 s  &lt;&lt;&lt; ERROR!\njava.lang.RuntimeException: java.lang.NoClassDefFoundError: javax/inject/Provider\nCaused by: java.lang.NoClassDefFoundError: javax/inject/Provider\nCaused by: java.lang.ClassNotFoundException: javax.inject.Provider\n</code></pre>\n<p>I think the error is quite weird, because I do not use javax in my code...</p>\n"},{"tags":["java","spring-boot","prometheus","metrics","spring-boot-actuator"],"comments":[{"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"score":0,"creation_date":1612434635,"post_id":66025939,"comment_id":116768040,"body_markdown":"I have no idea what you&#39;re trying to ask here. subject talks about logs but I see no logs in this question whatsoever.","body":"I have no idea what you&#39;re trying to ask here. subject talks about logs but I see no logs in this question whatsoever."},{"owner":{"account_id":20618965,"reputation":1,"user_id":15136395,"display_name":"Tobias Schnupp"},"score":0,"creation_date":1612446287,"post_id":66025939,"comment_id":116773274,"body_markdown":"Thanks for you comment. Spring Boot Actuator is recording the request within it&#39;s metrics.","body":"Thanks for you comment. Spring Boot Actuator is recording the request within it&#39;s metrics."},{"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"score":0,"creation_date":1612449718,"post_id":66025939,"comment_id":116774989,"body_markdown":"yes, but that&#39;s not related to logging. So you&#39;re worried about naming in metrics? also, are you sure if [simpleclient_spring_boot](https://github.com/prometheus/client_java) is recording the metrics and not spring? and what does your options controller look like?","body":"yes, but that&#39;s not related to logging. So you&#39;re worried about naming in metrics? also, are you sure if <a href=\"https://github.com/prometheus/client_java\" rel=\"nofollow noreferrer\">simpleclient_spring_boot</a> is recording the metrics and not spring? and what does your options controller look like?"},{"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"score":0,"creation_date":1612449947,"post_id":66025939,"comment_id":116775097,"body_markdown":"if your OPTIONS requests go to unmapped metrics, are they even mapped to any controller...","body":"if your OPTIONS requests go to unmapped metrics, are they even mapped to any controller..."},{"owner":{"account_id":20618965,"reputation":1,"user_id":15136395,"display_name":"Tobias Schnupp"},"score":0,"creation_date":1612533664,"post_id":66025939,"comment_id":116803903,"body_markdown":"The OPTIONS requests are not mapped by me. I&#39;m using the default Spring Mapping for this request.","body":"The OPTIONS requests are not mapped by me. I&#39;m using the default Spring Mapping for this request."}],"answers":[{"tags":[],"owner":{"account_id":20618965,"reputation":1,"user_id":15136395,"display_name":"Tobias Schnupp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1612431719,"creation_date":1612431719,"answer_id":66043022,"question_id":66025939,"body_markdown":"Seems that updating Spring Boot to 1.5.22.RELEASE\r\n\r\nresults in an output for OPTIONS requests like this:\r\n```\r\n# HELP counter_status_200_unmapped counter_status_200_unmapped\r\n# TYPE counter_status_200_unmapped gauge\r\ncounter_status_200_unmapped 5.0\r\n```\r\n\r\nIt&#39;s not perfect but alle OPTIONS requests are collected into one metric and not each one in a seperate one.","title":"Spring Boot Actuator is recording OPTIONS requests with dynamic parameter of URL","body":"<p>Seems that updating Spring Boot to 1.5.22.RELEASE</p>\n<p>results in an output for OPTIONS requests like this:</p>\n<pre><code># HELP counter_status_200_unmapped counter_status_200_unmapped\n# TYPE counter_status_200_unmapped gauge\ncounter_status_200_unmapped 5.0\n</code></pre>\n<p>It's not perfect but alle OPTIONS requests are collected into one metric and not each one in a seperate one.</p>\n"}],"owner":{"account_id":20618965,"reputation":1,"user_id":15136395,"display_name":"Tobias Schnupp"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":379,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684828604,"creation_date":1612349357,"question_id":66025939,"body_markdown":"we are unsing Spring Boot 1.5.9 and we do provide metrics for Prometheus.\r\n\r\nWhen we do receive OPTIONS requests the path parameter is not replaced. For GET Requests the parameter is replaced. The controller looks like this:\r\n\r\n```\r\n@Slf4j\r\n@RequestMapping(method = { RequestMethod.GET }, path = &quot;/claims/{token}&quot;)\r\n@RestController\r\npublic class ClaimDetailController {\r\n\r\n    @GetMapping(value = &quot;&quot;, produces = MediaType.APPLICATION_JSON_UTF8_VALUE, params = &quot;token&quot;)\r\n    public ResponseEntity getDetail(@PathVariable(value = &quot;token&quot;) final String token) {\r\n      ...\r\n    }\r\n}\r\n\r\n```\r\n\r\nWhen calling actuator with endpoint &quot;/prometheus&quot; we get:\r\n```\r\n# HELP gauge_response_claims_clgrRFhIRlNDV3pJTXhXRG40dWlPWURrVTJnMU1nPT0 gauge_response_claims_clgrRFhIRlNDV3pJTXhXRG40dWlPWURrVTJnMU1nPT0\r\n# TYPE gauge_response_claims_clgrRFhIRlNDV3pJTXhXRG40dWlPWURrVTJnMU1nPT0 gauge\r\ngauge_response_claims_clgrRFhIRlNDV3pJTXhXRG40dWlPWURrVTJnMU1nPT0 5.0\r\n# HELP gauge_response_claims_token gauge_response_claims_token\r\n# TYPE gauge_response_claims_token gauge\r\ngauge_response_claims_token 1502.0\r\n```\r\n\r\nThe first one is from the OPTIONS request. The second one from the GET request.\r\n\r\nSo why is the token from the OPTIONS request not replaced? Can this be achived?\r\nIf not - is it possible to remove OPTIONS requests from the metrics?\r\n\r\nAnd this is the /metrics output:\r\n\r\n&gt;counter.status.200.claims.clgrRFhIRlNDV3pJTXhXRG40dWlPWURrVTJnMU1nPT0\t2\r\n&gt;counter.status.200.cloudfoundryapplication\t4\r\n\r\nHere are some dependencies used by us:\r\n\r\n```\r\n&lt;parent&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.5.9.RELEASE&lt;/version&gt;\r\n&lt;/parent&gt;\r\n\t\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-cloud-cloudfoundry-web&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-hateoas&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;micrometer-spring-legacy&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.3.16&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;io.prometheus&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;simpleclient_spring_boot&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.3.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;io.prometheus&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;simpleclient_servlet&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.3.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;io.prometheus&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;simpleclient_hotspot&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.3.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Spring Boot Actuator is recording OPTIONS requests with dynamic parameter of URL","body":"<p>we are unsing Spring Boot 1.5.9 and we do provide metrics for Prometheus.</p>\n<p>When we do receive OPTIONS requests the path parameter is not replaced. For GET Requests the parameter is replaced. The controller looks like this:</p>\n<pre><code>@Slf4j\n@RequestMapping(method = { RequestMethod.GET }, path = &quot;/claims/{token}&quot;)\n@RestController\npublic class ClaimDetailController {\n\n    @GetMapping(value = &quot;&quot;, produces = MediaType.APPLICATION_JSON_UTF8_VALUE, params = &quot;token&quot;)\n    public ResponseEntity getDetail(@PathVariable(value = &quot;token&quot;) final String token) {\n      ...\n    }\n}\n\n</code></pre>\n<p>When calling actuator with endpoint &quot;/prometheus&quot; we get:</p>\n<pre><code># HELP gauge_response_claims_clgrRFhIRlNDV3pJTXhXRG40dWlPWURrVTJnMU1nPT0 gauge_response_claims_clgrRFhIRlNDV3pJTXhXRG40dWlPWURrVTJnMU1nPT0\n# TYPE gauge_response_claims_clgrRFhIRlNDV3pJTXhXRG40dWlPWURrVTJnMU1nPT0 gauge\ngauge_response_claims_clgrRFhIRlNDV3pJTXhXRG40dWlPWURrVTJnMU1nPT0 5.0\n# HELP gauge_response_claims_token gauge_response_claims_token\n# TYPE gauge_response_claims_token gauge\ngauge_response_claims_token 1502.0\n</code></pre>\n<p>The first one is from the OPTIONS request. The second one from the GET request.</p>\n<p>So why is the token from the OPTIONS request not replaced? Can this be achived?\nIf not - is it possible to remove OPTIONS requests from the metrics?</p>\n<p>And this is the /metrics output:</p>\n<blockquote>\n<p>counter.status.200.claims.clgrRFhIRlNDV3pJTXhXRG40dWlPWURrVTJnMU1nPT0  2\ncounter.status.200.cloudfoundryapplication 4</p>\n</blockquote>\n<p>Here are some dependencies used by us:</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;1.5.9.RELEASE&lt;/version&gt;\n&lt;/parent&gt;\n    \n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-cloudfoundry-web&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-hateoas&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n    &lt;artifactId&gt;micrometer-spring-legacy&lt;/artifactId&gt;\n    &lt;version&gt;1.3.16&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;io.prometheus&lt;/groupId&gt;\n    &lt;artifactId&gt;simpleclient_spring_boot&lt;/artifactId&gt;\n    &lt;version&gt;0.3.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.prometheus&lt;/groupId&gt;\n    &lt;artifactId&gt;simpleclient_servlet&lt;/artifactId&gt;\n    &lt;version&gt;0.3.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.prometheus&lt;/groupId&gt;\n    &lt;artifactId&gt;simpleclient_hotspot&lt;/artifactId&gt;\n    &lt;version&gt;0.3.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-boot-actuator"],"comments":[{"owner":{"account_id":3480040,"reputation":180,"user_id":2912358,"accept_rate":62,"display_name":"I2obiN"},"score":0,"creation_date":1649671091,"post_id":67091134,"comment_id":126926673,"body_markdown":"did you ever get this to work? have been asked to make reloadable configs happen with Springboot and have tried everything seemingly","body":"did you ever get this to work? have been asked to make reloadable configs happen with Springboot and have tried everything seemingly"}],"owner":{"account_id":14797232,"reputation":105,"user_id":10686571,"display_name":"Kropius Dop"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":304,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1684828546,"creation_date":1618400789,"question_id":67091134,"body_markdown":"i am trying to refresh a refresh scope bean using actuator.The class that needs to be refreshed:\r\n``` \r\n@ConfigurationProperties(prefix = &quot;push-sync&quot;)\r\n@RefreshScope\r\npublic class PushSyncProperties {\r\n\r\n    private boolean available = true;\r\n    private int maxSyncThreads = 5;\r\n    private int maxRequestsPerSecond = 5;\r\n    private int maxRetries = 10;\r\n    private long initialRetryDelay = 7 * 1000L;\r\n    private long maxRetryDelay = 8 * 60 * 60 * 1000L;\r\n    private int retryBackOffMultiplier = 3;\r\n    private long dbCheckInterval = 10 * 1000L;\r\n\r\n    @PostConstruct\r\n    public void refresh()\r\n    {\r\n        log.info(&quot;Application Refreshed!&quot;);\r\n        log.info(String.valueOf(maxSyncThreads));\r\n    } \r\n```\r\npart of the pom\r\n\r\n```\r\n &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-starter&lt;/artifactId&gt;\r\n            &lt;version&gt;2.2.3.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n```\r\nand the main class \r\n\r\n```\r\n@EnableConfigurationProperties({PushSyncProperties.class})\r\n@EnableScheduling\r\n@PropertySource(&quot;file:${push.sync.config}&quot;)\r\n@SpringBootApplication\r\npublic class Application extends SpringBootServletInitializer {\r\n\r\n    @Override\r\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\r\n        String pushSyncConfigPath = SystemProperties.get(&quot;push.sync.config&quot;);\r\n        return application.sources(Application.class)\r\n                .properties(\r\n                        &quot;spring.config.location:classpath:/application.yml, &quot; + pushSyncConfigPath\r\n                );\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(Application.class, args);\r\n    }\r\n\r\n}\r\n ```\r\n\r\nhowever, whenever changing a property from that specific file that maps my property class, the postConstruct function is called, but the value is never updated. Any idea why?","title":"Refresh scope not updating properties but refreshing the bean itself","body":"<p>i am trying to refresh a refresh scope bean using actuator.The class that needs to be refreshed:</p>\n<pre><code>@ConfigurationProperties(prefix = &quot;push-sync&quot;)\n@RefreshScope\npublic class PushSyncProperties {\n\n    private boolean available = true;\n    private int maxSyncThreads = 5;\n    private int maxRequestsPerSecond = 5;\n    private int maxRetries = 10;\n    private long initialRetryDelay = 7 * 1000L;\n    private long maxRetryDelay = 8 * 60 * 60 * 1000L;\n    private int retryBackOffMultiplier = 3;\n    private long dbCheckInterval = 10 * 1000L;\n\n    @PostConstruct\n    public void refresh()\n    {\n        log.info(&quot;Application Refreshed!&quot;);\n        log.info(String.valueOf(maxSyncThreads));\n    } \n</code></pre>\n<p>part of the pom</p>\n<pre><code> &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter&lt;/artifactId&gt;\n            &lt;version&gt;2.2.3.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n\n</code></pre>\n<p>and the main class</p>\n<pre><code>@EnableConfigurationProperties({PushSyncProperties.class})\n@EnableScheduling\n@PropertySource(&quot;file:${push.sync.config}&quot;)\n@SpringBootApplication\npublic class Application extends SpringBootServletInitializer {\n\n    @Override\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\n        String pushSyncConfigPath = SystemProperties.get(&quot;push.sync.config&quot;);\n        return application.sources(Application.class)\n                .properties(\n                        &quot;spring.config.location:classpath:/application.yml, &quot; + pushSyncConfigPath\n                );\n    }\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n\n}\n</code></pre>\n<p>however, whenever changing a property from that specific file that maps my property class, the postConstruct function is called, but the value is never updated. Any idea why?</p>\n"},{"tags":["java","spring-boot","spring-boot-actuator","health-monitoring","health-check"],"comments":[{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":0,"creation_date":1621259539,"post_id":67567665,"comment_id":119434339,"body_markdown":"We can&#39;t help without any knowledge on how &quot;Base Service Servlet&quot; disable the GET.","body":"We can&#39;t help without any knowledge on how &quot;Base Service Servlet&quot; disable the GET."},{"owner":{"account_id":1546187,"reputation":131,"user_id":1439695,"accept_rate":80,"display_name":"Brian Antao"},"score":0,"creation_date":1621330252,"post_id":67567665,"comment_id":119456619,"body_markdown":"Thanks, I have updated the description with these details.","body":"Thanks, I have updated the description with these details."},{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":0,"creation_date":1621352114,"post_id":67567665,"comment_id":119467425,"body_markdown":"This is much better, and can you include more details for &quot;Base Service Servlet&quot;, how do you configure it with springboot, such that we can reproduce the problem.","body":"This is much better, and can you include more details for &quot;Base Service Servlet&quot;, how do you configure it with springboot, such that we can reproduce the problem."},{"owner":{"account_id":1546187,"reputation":131,"user_id":1439695,"accept_rate":80,"display_name":"Brian Antao"},"score":0,"creation_date":1621354833,"post_id":67567665,"comment_id":119468822,"body_markdown":"More details added to reproduce the problem","body":"More details added to reproduce the problem"}],"answers":[{"tags":[],"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1621396652,"creation_date":1621396652,"answer_id":67596723,"question_id":67567665,"body_markdown":"We can register `DispatcherServlet` with health endpoint in mapping before the `ServiceServlet`.\r\n\r\n```java\r\n@SpringBootApplication\r\npublic class ServletInitializer extends SpringBootServletInitializer implements ServletContextInitializer {\r\n    @Autowired\r\n    private DispatcherServlet dispatcherServlet;\r\n\r\n    @Override\r\n    public void onStartup(ServletContext container) throws ServletException {\r\n        ServletRegistration.Dynamic dispatcher =\r\n                container.addServlet(&quot;dispatcher&quot;, dispatcherServlet);\r\n        dispatcher.setLoadOnStartup(1);\r\n        dispatcher.addMapping(&quot;/manage&quot;, &quot;/manage/health&quot;);\r\n\r\n        ServletRegistration.Dynamic application = container\r\n                .addServlet(&quot;ServiceServlet&quot;, new ServiceServlet());\r\n        application.setLoadOnStartup(2);\r\n        application.addMapping(&quot;/*&quot;);\r\n    }\r\n}\r\n```","title":"SpringBoot Actuator getting overshadowed by BaseService Servlet on same Port","body":"<p>We can register <code>DispatcherServlet</code> with health endpoint in mapping before the <code>ServiceServlet</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\npublic class ServletInitializer extends SpringBootServletInitializer implements ServletContextInitializer {\n    @Autowired\n    private DispatcherServlet dispatcherServlet;\n\n    @Override\n    public void onStartup(ServletContext container) throws ServletException {\n        ServletRegistration.Dynamic dispatcher =\n                container.addServlet(&quot;dispatcher&quot;, dispatcherServlet);\n        dispatcher.setLoadOnStartup(1);\n        dispatcher.addMapping(&quot;/manage&quot;, &quot;/manage/health&quot;);\n\n        ServletRegistration.Dynamic application = container\n                .addServlet(&quot;ServiceServlet&quot;, new ServiceServlet());\n        application.setLoadOnStartup(2);\n        application.addMapping(&quot;/*&quot;);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1546187,"reputation":131,"user_id":1439695,"accept_rate":80,"display_name":"Brian Antao"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":372,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":67596723,"answer_count":1,"score":1,"last_activity_date":1684828496,"creation_date":1621246111,"question_id":67567665,"body_markdown":"We are Attempting to Migrate Our Existing Spring WebServices App to SpringBoot and ran into an issue for which we seek your advice.\r\n\r\nWe have a Base Service Servlet that disables the GET on the port that the App is deployed on for Security reasons this servlet returns 501 Unimplemented Response as follows:\r\n\r\n```java\r\n @Override\r\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        log.warn(&quot;GET request received!&quot;);\r\n        response.setStatus(HttpServletResponse.SC_NOT_IMPLEMENTED);\r\n    }\r\n```\r\n```java\r\npublic abstract class BaseServiceServlet extends HttpServlet {\r\n ...\r\n } \r\n  \r\n public class ServiceServlet extends BaseServiceServlet {\r\n ...\r\n } \r\n  \r\n  \r\n  public class ServletInitializer extends SpringBootServletInitializer implements ServletContextInitializer { \r\n  @Override\r\n    public void onStartup(ServletContext container) throws ServletException {\r\n\t\t \r\n      ServletRegistration.Dynamic application = container\r\n                .addServlet(&quot;ServiceServlet&quot;, new ServiceServlet()); \r\n      application.setLoadOnStartup(2);\r\n      application.addMapping(&quot;/*&quot;);\r\n        \r\n    }\r\n }\r\n```\r\nPreviously we had an old-fashioned HealthCheck JSP that we implemented. With the move to SpringBoot we are now using the SpringBoot Actuator.\r\n\r\nBut we find that if we set the Actuator health monitor port to the same one as the App when we try to monitor the health we get the 501 Unimplemented response.\r\n\r\nConfig is as follows:\r\n\r\n```\r\n# Spring-Boot Embedded Tomcat Config\r\nserver.port=8080\r\nserver.connection-timeout=10s\r\nserver.ssl.enabled=false\r\n## Springboot based health monitor\r\nmanagement.endpoints.enabled-by-default=true\r\nmanagement.endpoint.health.enabled=true\r\nmanagement.endpoint.loggers.enabled=true\r\nmanagement.endpoints.web.cors.allowed-methods=GET\r\nmanagement.endpoint.beans.cache.time-to-live=20s\r\nmanagement.endpoints.web.base-path=/manage\r\nmanagement.server.port=8080\r\nmanagement.security.enabled=false \r\n```\r\n\r\nOne way we could get around this problem is if we changed the actuator health check port to something else that Works.\r\n\r\nQuestion:\r\n    How can we set the Actuator port to be the same as the App and make the actuator health check url which is something like http://localhost:8080/manage/health not return 501 Unimplemented from the Base Service Servlet ?","title":"SpringBoot Actuator getting overshadowed by BaseService Servlet on same Port","body":"<p>We are Attempting to Migrate Our Existing Spring WebServices App to SpringBoot and ran into an issue for which we seek your advice.</p>\n<p>We have a Base Service Servlet that disables the GET on the port that the App is deployed on for Security reasons this servlet returns 501 Unimplemented Response as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code> @Override\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        log.warn(&quot;GET request received!&quot;);\n        response.setStatus(HttpServletResponse.SC_NOT_IMPLEMENTED);\n    }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class BaseServiceServlet extends HttpServlet {\n ...\n } \n  \n public class ServiceServlet extends BaseServiceServlet {\n ...\n } \n  \n  \n  public class ServletInitializer extends SpringBootServletInitializer implements ServletContextInitializer { \n  @Override\n    public void onStartup(ServletContext container) throws ServletException {\n         \n      ServletRegistration.Dynamic application = container\n                .addServlet(&quot;ServiceServlet&quot;, new ServiceServlet()); \n      application.setLoadOnStartup(2);\n      application.addMapping(&quot;/*&quot;);\n        \n    }\n }\n</code></pre>\n<p>Previously we had an old-fashioned HealthCheck JSP that we implemented. With the move to SpringBoot we are now using the SpringBoot Actuator.</p>\n<p>But we find that if we set the Actuator health monitor port to the same one as the App when we try to monitor the health we get the 501 Unimplemented response.</p>\n<p>Config is as follows:</p>\n<pre><code># Spring-Boot Embedded Tomcat Config\nserver.port=8080\nserver.connection-timeout=10s\nserver.ssl.enabled=false\n## Springboot based health monitor\nmanagement.endpoints.enabled-by-default=true\nmanagement.endpoint.health.enabled=true\nmanagement.endpoint.loggers.enabled=true\nmanagement.endpoints.web.cors.allowed-methods=GET\nmanagement.endpoint.beans.cache.time-to-live=20s\nmanagement.endpoints.web.base-path=/manage\nmanagement.server.port=8080\nmanagement.security.enabled=false \n</code></pre>\n<p>One way we could get around this problem is if we changed the actuator health check port to something else that Works.</p>\n<p>Question:\nHow can we set the Actuator port to be the same as the App and make the actuator health check url which is something like http://localhost:8080/manage/health not return 501 Unimplemented from the Base Service Servlet ?</p>\n"},{"tags":["java","spring-boot","spring-boot-actuator","dynamic-properties"],"comments":[{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":0,"creation_date":1634231346,"post_id":69571749,"comment_id":122975957,"body_markdown":"Is the logic in `doHealthCheck` method of `App1HealthCheckContributor` and `MyHealthCheckContributor` exactly the same so that you can have a single class covering both use cases?","body":"Is the logic in <code>doHealthCheck</code> method of <code>App1HealthCheckContributor</code> and <code>MyHealthCheckContributor</code> exactly the same so that you can have a single class covering both use cases?"},{"owner":{"account_id":3274061,"reputation":2691,"user_id":2756760,"accept_rate":51,"display_name":"du-it"},"score":0,"creation_date":1634341064,"post_id":69571749,"comment_id":123006641,"body_markdown":"Yes, the logic is equal.","body":"Yes, the logic is equal."}],"answers":[{"tags":[],"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634232590,"creation_date":1634232590,"answer_id":69574978,"question_id":69571749,"body_markdown":"Assuming the code in `doHealthCheck` is exactly the same for all apps to be checked you could do the following.\r\n\r\nYou would start by creating a single health check class:\r\n```java\r\n@Slf4j\r\npublic class AppHealthCheckContributor extends AbstractHealthIndicator {\r\n\r\n    private final AppProperties appProperties;\r\n\r\n    public App1HealthCheckContributor(final AppProperties appProperties) {\r\n        this.appProperties = appProperties;\r\n    }\r\n\r\n    @Override\r\n    protected void doHealthCheck(Health.Builder builder) {...}\r\n}\r\n```\r\n\r\nAnd the properties model as follows:\r\n```java\r\n@Slf4j\r\n@Data\r\npublic class AppProperties {\r\n    private String baseUrl;\r\n    private String name;\r\n}\r\n```\r\n\r\nThis means that the configuration would be something like the following (in `application.yml`):\r\n```yml\r\nhealth-check:\r\n  apps:\r\n    - baseUrl: http://localhost:10000\r\n      name: app1\r\n    - baseUrl: http://localhost:10001\r\n      name: app2\r\n```\r\n\r\nFinally, you would need to create a bean for each app and register them in the application context:\r\n```java\r\n@Slf4j\r\n@Data\r\n@Configuration\r\n@ConfigurationProperties(prefix = &quot;health-check&quot;)\r\npublic class AllAppPropertiesConfiguration {\r\n    private List&lt;AppProperties&gt; apps;\r\n\r\n    @Autowired\r\n    private GenericApplicationContext applicationContext;\r\n\r\n    @PostConstruct\r\n    fun init() {\r\n        for (AppProperties app : apps) {\r\n            applicationContext.registerBean(app.getName(), AppHealthCheckContributor.class, app);\r\n        }\r\n    }\r\n}\r\n```","title":"Multiple instances of a bean of one class filled with values from application.properties","body":"<p>Assuming the code in <code>doHealthCheck</code> is exactly the same for all apps to be checked you could do the following.</p>\n<p>You would start by creating a single health check class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\npublic class AppHealthCheckContributor extends AbstractHealthIndicator {\n\n    private final AppProperties appProperties;\n\n    public App1HealthCheckContributor(final AppProperties appProperties) {\n        this.appProperties = appProperties;\n    }\n\n    @Override\n    protected void doHealthCheck(Health.Builder builder) {...}\n}\n</code></pre>\n<p>And the properties model as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\n@Data\npublic class AppProperties {\n    private String baseUrl;\n    private String name;\n}\n</code></pre>\n<p>This means that the configuration would be something like the following (in <code>application.yml</code>):</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>health-check:\n  apps:\n    - baseUrl: http://localhost:10000\n      name: app1\n    - baseUrl: http://localhost:10001\n      name: app2\n</code></pre>\n<p>Finally, you would need to create a bean for each app and register them in the application context:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\n@Data\n@Configuration\n@ConfigurationProperties(prefix = &quot;health-check&quot;)\npublic class AllAppPropertiesConfiguration {\n    private List&lt;AppProperties&gt; apps;\n\n    @Autowired\n    private GenericApplicationContext applicationContext;\n\n    @PostConstruct\n    fun init() {\n        for (AppProperties app : apps) {\n            applicationContext.registerBean(app.getName(), AppHealthCheckContributor.class, app);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3274061,"reputation":2691,"user_id":2756760,"accept_rate":51,"display_name":"du-it"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":793,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":69574978,"answer_count":1,"score":3,"last_activity_date":1684828423,"creation_date":1634218724,"question_id":69571749,"body_markdown":"I intend to write some `HealtCheckContributors` for a Spring Boot application using *spring-boot-actuator*. Hence, I implemented two of them. they are intended for checking the health of different apps, of course, but have a nearly identical structure, except the configuration properties, ...\r\n\r\nSonarQube complains about that and I wonder if it is possible to have a single health check class but instantiated as many times as defined in `application.properties`. \r\nAn example: \r\n\r\n`application.properties`:\r\n```\r\n# actuator\r\napp1.management.baseUrl=http://localhost:10000\r\napp1.management.name=app1HealthCheckContributor\r\napp2.management.basUrl=http://localhost:10001\r\napp2.management.name=app2HealthCheckContributor\r\n```\r\n\r\n`HealthCheckContributor` for app1:\r\n```java\r\n@Slf4j\r\n@Component(&quot;xxx&quot;)\r\npublic class App1HealthCheckContributor extends AbstractHealthIndicator {\r\n\r\n    private final App1Properties app1Properties;\r\n\r\n    public App1HealthCheckContributor(final App1Properties app1Properties) {\r\n        this.app1Properties = app1Properties;\r\n    }\r\n\r\n    @Override\r\n    protected void doHealthCheck(Health.Builder builder) {...}\r\n}\r\n```\r\n\r\n...and this code for each `HealthCheckContributor` only distinct in its *appXProperties*. \r\n\r\nIsn&#39;t it possible to have some kind of base class like:\r\n```java\r\n@Slf4j\r\n@Component()\r\npublic class MyHealthCheckContributor extends AbstractHealthIndicator {\r\n\r\n    private final MyProperties myProperties;\r\n\r\n    public MyHealthCheckContributor(final MyProperties myProperties) {\r\n        this.myProperties = myProperties;\r\n    }\r\n\r\n    @Override\r\n    protected void doHealthCheck(Health.Builder builder) {...}\r\n}\r\n```\r\n\r\nand let Spring Boot take care of instantiating two `HealthCheckContributors` (in our case `App1HealthCheckContributor` and `App2HealthCheckContributor`)? \r\nThis would eliminate code duplication.\r\n\r\nAn example of the properties class file:\r\n```java\r\n@Slf4j\r\n@Data\r\n@ConfigurationProperties(prefix = &quot;app1.management&quot;)\r\npublic class App1Properties {\r\n    private String baseUrl;\r\n    private String ...;\r\n}\r\n```\r\n\r\nHow can I achieve this and how must an `application.properties` file looks like to achieve what I intend to do?\r\n\r\nThe final question: [How to test multiple instance creation of a bean of one class filled with values from application.properties?][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/69620134/how-to-test-multiple-instance-creation-of-a-bean-of-one-class-filled-with-values","title":"Multiple instances of a bean of one class filled with values from application.properties","body":"<p>I intend to write some <code>HealtCheckContributors</code> for a Spring Boot application using <em>spring-boot-actuator</em>. Hence, I implemented two of them. they are intended for checking the health of different apps, of course, but have a nearly identical structure, except the configuration properties, ...</p>\n<p>SonarQube complains about that and I wonder if it is possible to have a single health check class but instantiated as many times as defined in <code>application.properties</code>.\nAn example:</p>\n<p><code>application.properties</code>:</p>\n<pre><code># actuator\napp1.management.baseUrl=http://localhost:10000\napp1.management.name=app1HealthCheckContributor\napp2.management.basUrl=http://localhost:10001\napp2.management.name=app2HealthCheckContributor\n</code></pre>\n<p><code>HealthCheckContributor</code> for app1:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\n@Component(&quot;xxx&quot;)\npublic class App1HealthCheckContributor extends AbstractHealthIndicator {\n\n    private final App1Properties app1Properties;\n\n    public App1HealthCheckContributor(final App1Properties app1Properties) {\n        this.app1Properties = app1Properties;\n    }\n\n    @Override\n    protected void doHealthCheck(Health.Builder builder) {...}\n}\n</code></pre>\n<p>...and this code for each <code>HealthCheckContributor</code> only distinct in its <em>appXProperties</em>.</p>\n<p>Isn't it possible to have some kind of base class like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\n@Component()\npublic class MyHealthCheckContributor extends AbstractHealthIndicator {\n\n    private final MyProperties myProperties;\n\n    public MyHealthCheckContributor(final MyProperties myProperties) {\n        this.myProperties = myProperties;\n    }\n\n    @Override\n    protected void doHealthCheck(Health.Builder builder) {...}\n}\n</code></pre>\n<p>and let Spring Boot take care of instantiating two <code>HealthCheckContributors</code> (in our case <code>App1HealthCheckContributor</code> and <code>App2HealthCheckContributor</code>)?\nThis would eliminate code duplication.</p>\n<p>An example of the properties class file:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\n@Data\n@ConfigurationProperties(prefix = &quot;app1.management&quot;)\npublic class App1Properties {\n    private String baseUrl;\n    private String ...;\n}\n</code></pre>\n<p>How can I achieve this and how must an <code>application.properties</code> file looks like to achieve what I intend to do?</p>\n<p>The final question: <a href=\"https://stackoverflow.com/questions/69620134/how-to-test-multiple-instance-creation-of-a-bean-of-one-class-filled-with-values\">How to test multiple instance creation of a bean of one class filled with values from application.properties?</a></p>\n"},{"tags":["java","spring","logging","filter","spring-boot-actuator"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1625655425,"post_id":68284273,"comment_id":120683076,"body_markdown":"I don&#39;t know the answer, but a log level of DEBUG will always be spammy.","body":"I don&#39;t know the answer, but a log level of DEBUG will always be spammy."}],"answers":[{"tags":[],"owner":{"account_id":11119792,"reputation":2581,"user_id":8163025,"display_name":"saver"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1625784239,"creation_date":1625784239,"answer_id":68309373,"question_id":68284273,"body_markdown":"I recommend to use Spring Built-In request logging filter ```CommonsRequestLoggingFilter```. \r\n\r\nTo enable the logging filter, you need to set the property:\r\n```\r\nlogging.level.org.springframework.web.filter.CommonsRequestLoggingFilter=DEBUG\r\n```\r\nBut when you need specify custom rules for enabling logging, you can create custom implementation in following way:\r\n```\r\n@Component\r\npublic class RequestLoggingFilter extends AbstractRequestLoggingFilter {\r\n\r\n    private Set&lt;String&gt; excludedUrls = Set.of(&quot;/health&quot;);\r\n\r\n    @Override\r\n    protected boolean shouldLog(HttpServletRequest request) {\r\n        if(excludedUrls.contains(request.getRequestURI())) {\r\n            return false;\r\n        }\r\n        return logger.isDebugEnabled();\r\n    }\r\n\r\n    @Override\r\n    protected void beforeRequest(HttpServletRequest request, String message) {\r\n        logger.debug(message);\r\n    }\r\n\r\n    @Override\r\n    protected void afterRequest(HttpServletRequest request, String message) {\r\n        logger.debug(message);\r\n    }\r\n}\r\n```\r\nand to enable the filter add the following config property to ```application.properties```:\r\n```\r\nlogging.level.&lt;package_name&gt;.RequestLoggingFilter=DEBUG\r\n```","title":"How to exclude certain HTTP requests from being logged in Java Spring (e.g. /health Endpoint)","body":"<p>I recommend to use Spring Built-In request logging filter <code>CommonsRequestLoggingFilter</code>.</p>\n<p>To enable the logging filter, you need to set the property:</p>\n<pre><code>logging.level.org.springframework.web.filter.CommonsRequestLoggingFilter=DEBUG\n</code></pre>\n<p>But when you need specify custom rules for enabling logging, you can create custom implementation in following way:</p>\n<pre><code>@Component\npublic class RequestLoggingFilter extends AbstractRequestLoggingFilter {\n\n    private Set&lt;String&gt; excludedUrls = Set.of(&quot;/health&quot;);\n\n    @Override\n    protected boolean shouldLog(HttpServletRequest request) {\n        if(excludedUrls.contains(request.getRequestURI())) {\n            return false;\n        }\n        return logger.isDebugEnabled();\n    }\n\n    @Override\n    protected void beforeRequest(HttpServletRequest request, String message) {\n        logger.debug(message);\n    }\n\n    @Override\n    protected void afterRequest(HttpServletRequest request, String message) {\n        logger.debug(message);\n    }\n}\n</code></pre>\n<p>and to enable the filter add the following config property to <code>application.properties</code>:</p>\n<pre><code>logging.level.&lt;package_name&gt;.RequestLoggingFilter=DEBUG\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24037555,"reputation":1,"user_id":18017655,"display_name":"Couch Potato"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680858159,"creation_date":1680858159,"answer_id":75956983,"question_id":68284273,"body_markdown":"What if i get this error?\r\n\r\n&gt; 2023-04-07 11:57:05.227 INFO \r\n&gt; org.springframework.aop.framework.CglibAopProxy.doValidateClass():263\r\n&gt; - Unable to proxy interface-implementing method [public final void org.springframework.web.filter.OncePerRequestFilter.doFilter(javax.servlet.ServletRequest,javax.servlet.ServletResponse,javax.servlet.FilterChain)\r\n&gt; throws javax.servlet.ServletException,java.io.IOException] because it\r\n&gt; is marked as final: Consider using interface-based JDK proxies\r\n&gt; instead! 2023-04-07 11:57:05.228 INFO \r\n&gt; org.springframework.aop.framework.CglibAopProxy.doValidateClass():263\r\n&gt; - Unable to proxy interface-implementing method [public final void org.springframework.web.filter.GenericFilterBean.init(javax.servlet.FilterConfig)\r\n&gt; throws javax.servlet.ServletException] because it is marked as final:\r\n&gt; Consider using interface-based JDK proxies instead! 2023-04-07\r\n&gt; 11:57:05.343 ERROR org.apache.juli.logging.DirectJDKLog.log():175 -\r\n&gt; Exception starting filter [requestLoggingFilter]\r\n&gt; java.lang.NullPointerException: Cannot invoke\r\n&gt; &quot;org.apache.commons.logging.Log.isDebugEnabled()&quot; because\r\n&gt; &quot;this.logger&quot; is null\r\n\r\n    @Component\r\n    \r\n    public class RequestLoggingFilter extends AbstractRequestLoggingFilter {\r\n\r\n    @Override\r\n    protected boolean shouldLog(HttpServletRequest request) {\r\n        return !request.getServletPath().contains(&quot;actuator/health&quot;);\r\n    }\r\n\r\n    @Override\r\n    protected void beforeRequest(HttpServletRequest request, String message) {\r\n        logger.debug(message);\r\n    }\r\n\r\n    @Override\r\n    protected void afterRequest(HttpServletRequest request, String message) {\r\n        logger.debug(message);\r\n    }\r\n    }","title":"How to exclude certain HTTP requests from being logged in Java Spring (e.g. /health Endpoint)","body":"<p>What if i get this error?</p>\n<blockquote>\n<p>2023-04-07 11:57:05.227 INFO\norg.springframework.aop.framework.CglibAopProxy.doValidateClass():263</p>\n<ul>\n<li>Unable to proxy interface-implementing method [public final void org.springframework.web.filter.OncePerRequestFilter.doFilter(javax.servlet.ServletRequest,javax.servlet.ServletResponse,javax.servlet.FilterChain)\nthrows javax.servlet.ServletException,java.io.IOException] because it\nis marked as final: Consider using interface-based JDK proxies\ninstead! 2023-04-07 11:57:05.228 INFO\norg.springframework.aop.framework.CglibAopProxy.doValidateClass():263</li>\n<li>Unable to proxy interface-implementing method [public final void org.springframework.web.filter.GenericFilterBean.init(javax.servlet.FilterConfig)\nthrows javax.servlet.ServletException] because it is marked as final:\nConsider using interface-based JDK proxies instead! 2023-04-07\n11:57:05.343 ERROR org.apache.juli.logging.DirectJDKLog.log():175 -\nException starting filter [requestLoggingFilter]\njava.lang.NullPointerException: Cannot invoke\n&quot;org.apache.commons.logging.Log.isDebugEnabled()&quot; because\n&quot;this.logger&quot; is null</li>\n</ul>\n</blockquote>\n<pre><code>@Component\n\npublic class RequestLoggingFilter extends AbstractRequestLoggingFilter {\n\n@Override\nprotected boolean shouldLog(HttpServletRequest request) {\n    return !request.getServletPath().contains(&quot;actuator/health&quot;);\n}\n\n@Override\nprotected void beforeRequest(HttpServletRequest request, String message) {\n    logger.debug(message);\n}\n\n@Override\nprotected void afterRequest(HttpServletRequest request, String message) {\n    logger.debug(message);\n}\n}\n</code></pre>\n"}],"owner":{"account_id":2259461,"reputation":147,"user_id":1989887,"accept_rate":80,"display_name":"MonitorLizard"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4383,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1684828390,"creation_date":1625653612,"question_id":68284273,"body_markdown":"In my Spring boot application the following setting: \r\n\r\n    logging.org.springframework.web: DEBUG\r\n\r\ncauses all HTTP requests to be logged, which is cool!\r\n\r\nHowever, as the /health endpoint is continuously polled, this spams the logfile.\r\nHow can I disable request logging just for this endpoint?","title":"How to exclude certain HTTP requests from being logged in Java Spring (e.g. /health Endpoint)","body":"<p>In my Spring boot application the following setting:</p>\n<pre><code>logging.org.springframework.web: DEBUG\n</code></pre>\n<p>causes all HTTP requests to be logged, which is cool!</p>\n<p>However, as the /health endpoint is continuously polled, this spams the logfile.\nHow can I disable request logging just for this endpoint?</p>\n"},{"tags":["java","instance-variables"],"comments":[{"owner":{"account_id":4291034,"reputation":452,"user_id":8244977,"display_name":"BingLi224"},"score":2,"creation_date":1549255766,"post_id":54510263,"comment_id":95823866,"body_markdown":"`&lt;class name&gt;.&lt;instance variable&gt;` is static variable?","body":"<code>&lt;class name&gt;.&lt;instance variable&gt;</code> is static variable?"},{"owner":{"account_id":13737414,"reputation":613,"user_id":10147834,"display_name":"Sara"},"score":0,"creation_date":1549255799,"post_id":54510263,"comment_id":95823873,"body_markdown":"No. These are instance variables","body":"No. These are instance variables"},{"owner":{"account_id":7424117,"reputation":56335,"user_id":5647260,"accept_rate":82,"display_name":"Andrew Li"},"score":1,"creation_date":1549255831,"post_id":54510263,"comment_id":95823877,"body_markdown":"@Sara That makes no sense. Instance variables are associated *with instances*, not the class themselves","body":"@Sara That makes no sense. Instance variables are associated <i>with instances</i>, not the class themselves"},{"owner":{"account_id":13737414,"reputation":613,"user_id":10147834,"display_name":"Sara"},"score":0,"creation_date":1549255835,"post_id":54510263,"comment_id":95823879,"body_markdown":"@BingLi224 no. These are instance variables.","body":"@BingLi224 no. These are instance variables."},{"owner":{"account_id":10661768,"reputation":9318,"user_id":7849549,"accept_rate":44,"display_name":"Shubham Dixit"},"score":1,"creation_date":1549255917,"post_id":54510263,"comment_id":95823896,"body_markdown":"Its better if you post some code??","body":"Its better if you post some code??"},{"owner":{"account_id":89056,"reputation":8068,"user_id":2684196,"accept_rate":80,"display_name":"Willis Blackburn"},"score":0,"creation_date":1549256017,"post_id":54510263,"comment_id":95823917,"body_markdown":"Sure it&#39;s not `&lt;class name&gt;.this.&lt;instance variable&gt;`?","body":"Sure it&#39;s not <code>&lt;class name&gt;.this.&lt;instance variable&gt;</code>?"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1549256450,"post_id":54510263,"comment_id":95823999,"body_markdown":"*no. These are instance variables.* If you are so adamant, please show your code","body":"<i>no. These are instance variables.</i> If you are so adamant, please show your code"},{"owner":{"account_id":10661768,"reputation":9318,"user_id":7849549,"accept_rate":44,"display_name":"Shubham Dixit"},"score":0,"creation_date":1549256500,"post_id":54510263,"comment_id":95824012,"body_markdown":"your variable might be static.","body":"your variable might be static."}],"answers":[{"tags":[],"owner":{"account_id":11839556,"reputation":1520,"user_id":8663811,"display_name":"Rahul sharma"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1684828049,"creation_date":1549257890,"answer_id":54510522,"question_id":54510263,"body_markdown":"You have to make that variable or method static then you can use through class name.\r\n\r\n    public static int a=5;\r\n    /*declaring static variable*/\r\n\r\n \r\n\r\n      System.out.println(classname.a);\r\n      /*calling static variable*/\r\n\r\n","title":"Accessing object variables by class name instead of this","body":"<p>You have to make that variable or method static then you can use through class name.</p>\n<pre><code>public static int a=5;\n/*declaring static variable*/\n\n\n\n  System.out.println(classname.a);\n  /*calling static variable*/\n</code></pre>\n"}],"owner":{"account_id":13737414,"reputation":613,"user_id":10147834,"display_name":"Sara"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":527,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1684828049,"creation_date":1549255578,"question_id":54510263,"body_markdown":"Usually when there is getter/setter in a POJO class, the general convention I have seen until now was to use `return this.&lt;instance variable&gt;` / `this.&lt;instance variable&gt; = something`\n\nBut, the current project I am working on uses a strange convention of `return &lt;class name&gt;.&lt;instance variable&gt;`\n\nI understand that this works, but was wondering if this is the right approach at all? ","title":"Accessing object variables by class name instead of this","body":"<p>Usually when there is getter/setter in a POJO class, the general convention I have seen until now was to use <code>return this.&lt;instance variable&gt;</code> / <code>this.&lt;instance variable&gt; = something</code></p>\n\n<p>But, the current project I am working on uses a strange convention of <code>return &lt;class name&gt;.&lt;instance variable&gt;</code></p>\n\n<p>I understand that this works, but was wondering if this is the right approach at all? </p>\n"},{"tags":["java","iterator"],"comments":[{"owner":{"account_id":44379,"reputation":14328,"user_id":130224,"accept_rate":84,"display_name":"reprogrammer"},"score":2,"creation_date":1354558810,"post_id":13689288,"comment_id":18794862,"body_markdown":"Why not create a new iterator?","body":"Why not create a new iterator?"},{"owner":{"account_id":940870,"reputation":20212,"user_id":968969,"display_name":"Tony Hopkinson"},"score":1,"creation_date":1354558915,"post_id":13689288,"comment_id":18794902,"body_markdown":"well you&#39;ve missed something, if you need to do more than next and maybe previous, iterator is not the best choice. Why do you need to reset?","body":"well you&#39;ve missed something, if you need to do more than next and maybe previous, iterator is not the best choice. Why do you need to reset?"},{"owner":{"account_id":1512818,"reputation":1873,"user_id":1414499,"accept_rate":89,"display_name":"Krzysztof"},"score":0,"creation_date":1354561117,"post_id":13689288,"comment_id":18795717,"body_markdown":"I trying to understand the idea of dynamic list in java. A few weeks ago I have a problem with session variable on jsp oage. From EL and taglibs I can use a method of iterator but I cant redefine it (I still have poor knowledge about jsp but I still improving it :)) What do You mind when You wrote &quot;iterator is not the best choice&quot; ? Could You explain it to me? :)","body":"I trying to understand the idea of dynamic list in java. A few weeks ago I have a problem with session variable on jsp oage. From EL and taglibs I can use a method of iterator but I cant redefine it (I still have poor knowledge about jsp but I still improving it :)) What do You mind when You wrote &quot;iterator is not the best choice&quot; ? Could You explain it to me? :)"}],"answers":[{"tags":[],"owner":{"account_id":262968,"reputation":767110,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"down_vote_count":0,"up_vote_count":65,"is_accepted":false,"score":65,"last_activity_date":1354558852,"creation_date":1354558852,"answer_id":13689311,"question_id":13689288,"body_markdown":"You can call `listIterator` method again to get an instance of iterator pointing at beginning of list:\r\n\r\n    iter = list.listIterator();","title":"java- reset list iterator to first element of the list","body":"<p>You can call <code>listIterator</code> method again to get an instance of iterator pointing at beginning of list:</p>\n\n<pre><code>iter = list.listIterator();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1005212,"reputation":28558,"user_id":1019167,"accept_rate":92,"display_name":"AlexWien"},"down_vote_count":3,"up_vote_count":29,"is_accepted":true,"score":26,"last_activity_date":1384203283,"creation_date":1354559024,"answer_id":13689355,"question_id":13689288,"body_markdown":"Best would be not using `LinkedList` at all, usually it is slower in all disciplines, and less handy. (When mainly inserting/deleting to the front, especially for big arrays LinkedList is faster)\r\n\r\nUse `ArrayList`, and iterate with \r\n\r\n    int len = list.size();\r\n    for (int i = 0; i &lt; len; i++) {\r\n      Element ele = list.get(i);\r\n    }\r\n\r\nReset is trivial, just loop again.&lt;br&gt;\r\nIf you insist on using an iterator,  then you have to use a new iterator:\r\n\r\n    iter = list.listIterator();\r\n\r\n(I saw only once in my life an advantage of LinkedList: i could loop through whith a while loop and remove the first element)","title":"java- reset list iterator to first element of the list","body":"<p>Best would be not using <code>LinkedList</code> at all, usually it is slower in all disciplines, and less handy. (When mainly inserting/deleting to the front, especially for big arrays LinkedList is faster)</p>\n\n<p>Use <code>ArrayList</code>, and iterate with </p>\n\n<pre><code>int len = list.size();\nfor (int i = 0; i &lt; len; i++) {\n  Element ele = list.get(i);\n}\n</code></pre>\n\n<p>Reset is trivial, just loop again.<br>\nIf you insist on using an iterator,  then you have to use a new iterator:</p>\n\n<pre><code>iter = list.listIterator();\n</code></pre>\n\n<p>(I saw only once in my life an advantage of LinkedList: i could loop through whith a while loop and remove the first element)</p>\n"},{"tags":[],"owner":{"account_id":256670,"reputation":16061,"user_id":537554,"display_name":"ryenus"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1421497976,"creation_date":1421402115,"answer_id":27981306,"question_id":13689288,"body_markdown":"If the order doesn&#39;t matter, we can re-iterate **backward** with the same iterator using the `hasPrevious()` and `previous()` methods:\r\n\r\n&lt;!-- language-all: java --&gt;\r\n\r\n    ListIterator&lt;T&gt; lit = myList.listIterator(); // create just one iterator\r\n\r\nInitially the iterator sits at the beginning, we do *forward* iteration:\r\n\r\n    while (lit.hasNext()) process(lit.next()); // begin -&gt; end\r\n\r\nThen the iterator sits at the end, we can do **backward** iteration:\r\n\r\n    while (lit.hasPrevious()) process2(lit.previous()); // end -&gt; begin\r\n\r\n\r\n","title":"java- reset list iterator to first element of the list","body":"<p>If the order doesn't matter, we can re-iterate <strong>backward</strong> with the same iterator using the <code>hasPrevious()</code> and <code>previous()</code> methods:</p>\n\n\n\n<pre class=\"lang-java prettyprint-override\"><code>ListIterator&lt;T&gt; lit = myList.listIterator(); // create just one iterator\n</code></pre>\n\n<p>Initially the iterator sits at the beginning, we do <em>forward</em> iteration:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>while (lit.hasNext()) process(lit.next()); // begin -&gt; end\n</code></pre>\n\n<p>Then the iterator sits at the end, we can do <strong>backward</strong> iteration:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>while (lit.hasPrevious()) process2(lit.previous()); // end -&gt; begin\n</code></pre>\n"},{"tags":[],"owner":{"account_id":310422,"reputation":485,"user_id":623388,"accept_rate":75,"display_name":"tkane2000"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1425091586,"creation_date":1425091586,"answer_id":28777539,"question_id":13689288,"body_markdown":"This is an alternative solution, but one could argue it doesn&#39;t add enough value to make it worth it:\r\n\r\n    import com.google.common.collect.Iterables;\r\n    ...\r\n    Iterator&lt;String&gt; iter = Iterables.cycle(list).iterator();\r\n    if(iter.hasNext()) {\r\n        str = iter.next();\r\n    }\r\n\r\nCalling hasNext() will reset the iterator cursor to the beginning if it&#39;s a the end.\r\n","title":"java- reset list iterator to first element of the list","body":"<p>This is an alternative solution, but one could argue it doesn't add enough value to make it worth it:</p>\n\n<pre><code>import com.google.common.collect.Iterables;\n...\nIterator&lt;String&gt; iter = Iterables.cycle(list).iterator();\nif(iter.hasNext()) {\n    str = iter.next();\n}\n</code></pre>\n\n<p>Calling hasNext() will reset the iterator cursor to the beginning if it's a the end.</p>\n"},{"tags":[],"owner":{"account_id":1710481,"reputation":22873,"user_id":1568658,"accept_rate":82,"display_name":"Eric"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1546158215,"creation_date":1546158215,"answer_id":53976170,"question_id":13689288,"body_markdown":"Calling `iterator()` on a Collection impl, probably would get a new Iterator on each call.\r\n\r\nThus, you can simply call `iterator()` again to get a new one.\r\n\r\n---\r\nCode\r\n---\r\n\r\n**IteratorLearn.java**\r\n\r\n    \r\n    import org.testng.Assert;\r\n    import org.testng.annotations.Test;\r\n    \r\n    import java.util.Collection;\r\n    import java.util.HashSet;\r\n    import java.util.Iterator;\r\n    \r\n    /**\r\n     * Iterator learn.\r\n     *\r\n     * @author eric\r\n     * @date 12/30/18 4:03 PM\r\n     */\r\n    public class IteratorLearn {\r\n        @Test\r\n        public void test() {\r\n            Collection&lt;Integer&gt; c = new HashSet&lt;&gt;();\r\n            for (int i = 0; i &lt; 10; i++) {\r\n                c.add(i);\r\n            }\r\n    \r\n            Iterator it;\r\n    \r\n            // iterate,\r\n            it = c.iterator();\r\n            System.out.println(&quot;\\niterate:&quot;);\r\n            while (it.hasNext()) {\r\n                System.out.printf(&quot;\\t%d\\n&quot;, it.next());\r\n            }\r\n            Assert.assertFalse(it.hasNext());\r\n    \r\n            // consume,\r\n            it = c.iterator();\r\n            System.out.println(&quot;\\nconsume elements:&quot;);\r\n            it.forEachRemaining(ele -&gt; System.out.printf(&quot;\\t%d\\n&quot;, ele));\r\n            Assert.assertFalse(it.hasNext());\r\n        }\r\n    }\r\n\r\n\r\n**Output:**\r\n\r\n    iterate:\r\n        0\r\n        1\r\n        2\r\n        3\r\n        4\r\n        5\r\n        6\r\n        7\r\n        8\r\n        9\r\n\r\n    consume elements:\r\n        0\r\n        1\r\n        2\r\n        3\r\n        4\r\n        5\r\n        6\r\n        7\r\n        8\r\n        9\r\n","title":"java- reset list iterator to first element of the list","body":"<p>Calling <code>iterator()</code> on a Collection impl, probably would get a new Iterator on each call.</p>\n\n<p>Thus, you can simply call <code>iterator()</code> again to get a new one.</p>\n\n<hr>\n\n<h2>Code</h2>\n\n<p><strong>IteratorLearn.java</strong></p>\n\n<pre><code>import org.testng.Assert;\nimport org.testng.annotations.Test;\n\nimport java.util.Collection;\nimport java.util.HashSet;\nimport java.util.Iterator;\n\n/**\n * Iterator learn.\n *\n * @author eric\n * @date 12/30/18 4:03 PM\n */\npublic class IteratorLearn {\n    @Test\n    public void test() {\n        Collection&lt;Integer&gt; c = new HashSet&lt;&gt;();\n        for (int i = 0; i &lt; 10; i++) {\n            c.add(i);\n        }\n\n        Iterator it;\n\n        // iterate,\n        it = c.iterator();\n        System.out.println(\"\\niterate:\");\n        while (it.hasNext()) {\n            System.out.printf(\"\\t%d\\n\", it.next());\n        }\n        Assert.assertFalse(it.hasNext());\n\n        // consume,\n        it = c.iterator();\n        System.out.println(\"\\nconsume elements:\");\n        it.forEachRemaining(ele -&gt; System.out.printf(\"\\t%d\\n\", ele));\n        Assert.assertFalse(it.hasNext());\n    }\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>iterate:\n    0\n    1\n    2\n    3\n    4\n    5\n    6\n    7\n    8\n    9\n\nconsume elements:\n    0\n    1\n    2\n    3\n    4\n    5\n    6\n    7\n    8\n    9\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2485164,"reputation":2314,"user_id":2163727,"accept_rate":80,"display_name":"MasterHD"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1567446694,"creation_date":1562068988,"answer_id":56852039,"question_id":13689288,"body_markdown":"What you may actually want to use is an `Iterable` that can return a fresh `Iterator` multiple times by calling `iterator()`.\r\n\r\n    //A function that needs to iterate multiple times can be given one Iterable:\r\n    public void func(Iterable&lt;Type&gt; ible) {\r\n\t\tIterator&lt;Type&gt; it = ible.iterator(); //Gets an iterator\r\n\t\twhile (it.hasNext()) {\r\n\t\t\tit.next();\r\n        }\r\n        it = ible.iterator(); //Gets a NEW iterator, also from the beginning\r\n\t\twhile (it.hasNext()) {\r\n\t\t\tit.next();\r\n        }\r\n    }\r\n\r\nYou must define what the `iterator()` method does just once beforehand:\r\n\r\n    void main() {\r\n        LinkedList&lt;String&gt; list; //This could be any type of object that has an iterator\r\n        //Define an Iterable that knows how to retrieve a fresh iterator\r\n\t\tIterable&lt;Type&gt; ible = new Iterable&lt;Type&gt;() {\r\n            @Override\r\n\t\t    public Iterator&lt;Type&gt; iterator() {\r\n\t\t        return list.listIterator(); //Define how to get a fresh iterator from any object\r\n\t\t    }\r\n\t\t};\r\n        //Now with a single instance of an Iterable,\r\n        func(ible); //you can iterate through it multiple times.\r\n    }","title":"java- reset list iterator to first element of the list","body":"<p>What you may actually want to use is an <code>Iterable</code> that can return a fresh <code>Iterator</code> multiple times by calling <code>iterator()</code>.</p>\n\n<pre><code>//A function that needs to iterate multiple times can be given one Iterable:\npublic void func(Iterable&lt;Type&gt; ible) {\n    Iterator&lt;Type&gt; it = ible.iterator(); //Gets an iterator\n    while (it.hasNext()) {\n        it.next();\n    }\n    it = ible.iterator(); //Gets a NEW iterator, also from the beginning\n    while (it.hasNext()) {\n        it.next();\n    }\n}\n</code></pre>\n\n<p>You must define what the <code>iterator()</code> method does just once beforehand:</p>\n\n<pre><code>void main() {\n    LinkedList&lt;String&gt; list; //This could be any type of object that has an iterator\n    //Define an Iterable that knows how to retrieve a fresh iterator\n    Iterable&lt;Type&gt; ible = new Iterable&lt;Type&gt;() {\n        @Override\n        public Iterator&lt;Type&gt; iterator() {\n            return list.listIterator(); //Define how to get a fresh iterator from any object\n        }\n    };\n    //Now with a single instance of an Iterable,\n    func(ible); //you can iterate through it multiple times.\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20225378,"reputation":13,"user_id":14833456,"display_name":"Henrique Krever"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1627344904,"creation_date":1627344904,"answer_id":68537581,"question_id":13689288,"body_markdown":"What you can do is, set the iterator to the first position mannualy with a while loop.\r\n\r\n    while(iter.hasPrevious())\r\n    {\r\n        iter.previous();\r\n    }\r\nwhen you get out of the loop you will have your iterator at the position 0\r\n\r\n###### sorry any grammar mistakes ######","title":"java- reset list iterator to first element of the list","body":"<p>What you can do is, set the iterator to the first position mannualy with a while loop.</p>\n<pre><code>while(iter.hasPrevious())\n{\n    iter.previous();\n}\n</code></pre>\n<p>when you get out of the loop you will have your iterator at the position 0</p>\n<h6 id=\"sorry-any-grammar-mistakes-ydm0\">sorry any grammar mistakes</h6>\n"},{"tags":[],"owner":{"account_id":27791953,"reputation":1,"user_id":21218222,"display_name":"Harendra Pratap Singh Sisodia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676456110,"creation_date":1676456110,"answer_id":75458265,"question_id":13689288,"body_markdown":"Well some of the version of java does not have a reset method for the iterator, so we are required to use the multiple iterator for number of use cases, which ultimately increases the memory consumption.\r\n\r\nso it&#39;s simple way to use the same iterator again if needed by declaring a global function and pass the collection as argument.\r\n\r\nfor eg.\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/459UL.jpg\r\n\r\n\r\nfor eg (Written program)\r\npackage com.javalearn;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Iterator;\r\n\r\npublic class Java_Learn {\r\n\r\n        public static void main(String[] args) {\r\n                ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n                list.add(&quot;Hello&quot;);\r\n                list.add(&quot;World&quot;);\r\n                list.add(&quot;It&#39;s&quot;);\r\n                list.add(&quot;me.&quot;);\r\n\r\n                iter(list);\r\n\r\n                System.out.println(list.size());\r\n                System.out.println(list.indexOf(&quot;me.&quot;));\r\n                System.out.println(list.remove(3));\r\n\r\n                iter(list);\r\n        }\r\n        static void iter(ArrayList&lt;String&gt; arr){\r\n                Iterator itr = arr.iterator();\r\n                while(itr.hasNext()){\r\n                        System.out.println(itr.next());\r\n                }\r\n        }\r\n}\r\n","title":"java- reset list iterator to first element of the list","body":"<p>Well some of the version of java does not have a reset method for the iterator, so we are required to use the multiple iterator for number of use cases, which ultimately increases the memory consumption.</p>\n<p>so it's simple way to use the same iterator again if needed by declaring a global function and pass the collection as argument.</p>\n<p>for eg.\n<a href=\"https://i.stack.imgur.com/459UL.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>for eg (Written program)\npackage com.javalearn;</p>\n<p>import java.util.ArrayList;\nimport java.util.Iterator;</p>\n<p>public class Java_Learn {</p>\n<pre><code>    public static void main(String[] args) {\n            ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\n            list.add(&quot;Hello&quot;);\n            list.add(&quot;World&quot;);\n            list.add(&quot;It's&quot;);\n            list.add(&quot;me.&quot;);\n\n            iter(list);\n\n            System.out.println(list.size());\n            System.out.println(list.indexOf(&quot;me.&quot;));\n            System.out.println(list.remove(3));\n\n            iter(list);\n    }\n    static void iter(ArrayList&lt;String&gt; arr){\n            Iterator itr = arr.iterator();\n            while(itr.hasNext()){\n                    System.out.println(itr.next());\n            }\n    }\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":1512818,"reputation":1873,"user_id":1414499,"accept_rate":89,"display_name":"Krzysztof"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":142319,"favorite_count":0,"down_vote_count":1,"up_vote_count":56,"accepted_answer_id":13689355,"answer_count":8,"score":55,"last_activity_date":1684827818,"creation_date":1354558741,"question_id":13689288,"body_markdown":"I need to know how to &quot;reset&quot; LinkedList iterator to its first element.\r\n\r\nFor example:\r\n\r\n    LinkedList&lt;String&gt; list;\r\n    Iterator iter=list.listIterator;\r\n    iter.next();\r\n    iter.next();\r\n\r\nOver and over again and after many moves of the iterator, I need to &quot;reset&quot; the position of the iterator.\r\n\r\nI want to ask how I can &quot;reset&quot; my iterator to the first element.\r\n\r\nI know that I can get list iterator of the first element in this way:\r\n\r\n    iter= list.listIterator(1);\r\n\r\nIs this the best solution? Or maybe I missed something in Oracle docs? \r\n\r\n \r\n\r\n","title":"java- reset list iterator to first element of the list","body":"<p>I need to know how to &quot;reset&quot; LinkedList iterator to its first element.</p>\n<p>For example:</p>\n<pre><code>LinkedList&lt;String&gt; list;\nIterator iter=list.listIterator;\niter.next();\niter.next();\n</code></pre>\n<p>Over and over again and after many moves of the iterator, I need to &quot;reset&quot; the position of the iterator.</p>\n<p>I want to ask how I can &quot;reset&quot; my iterator to the first element.</p>\n<p>I know that I can get list iterator of the first element in this way:</p>\n<pre><code>iter= list.listIterator(1);\n</code></pre>\n<p>Is this the best solution? Or maybe I missed something in Oracle docs?</p>\n"},{"tags":["java","profiler","yourkit"],"comments":[{"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1684777398,"post_id":76307975,"comment_id":134563305,"body_markdown":"By the way: both methods you list are instance methods - `&quot;abca&quot;.lastIndexOf(&#39;a&#39;)` is 3. Perhaps base your checks on something like &quot;String.format()&quot; which is static.","body":"By the way: both methods you list are instance methods - <code>&quot;abca&quot;.lastIndexOf(&#39;a&#39;)</code> is 3. Perhaps base your checks on something like &quot;String.format()&quot; which is static."}],"owner":{"account_id":14429973,"reputation":2483,"user_id":10423604,"display_name":"Volodya Lombrozo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684827748,"creation_date":1684771061,"question_id":76307975,"body_markdown":"I&#39;m currently using YourKit Java Profiler to gather information about the total number of invoked methods during profiling. However, I&#39;m facing difficulty in distinguishing between static methods and instance methods.\r\n\r\nWhen I perform [CPU profiling (tracing)](https://www.yourkit.com/docs/java/help/tracing.jsp), I obtain a list of methods, but there seems to be no apparent way to identify whether a method is static or instance-based. For instance, here are two sample entries from the method list:\r\n\r\n- Instance `java.lang.String.charAt(int) String.java`\r\n- Static `java.lang.String.lastIndexOf(byte[], byte, int, String, int) String.java`\r\n\r\nBoth methods appear identical and lack any indication of their type (static or instance). I have extensively searched through the official documentation provided by YourKit, but have been unable to find any relevant information on this matter.\r\n\r\nIs it possible to differentiate between static and instance methods during profiling using YourKit? If so, what approach or feature should I utilize to achieve this? I would greatly appreciate any insights or guidance regarding this issue.","title":"How to differentiate between static and instance methods using YourKit Java Profiler?","body":"<p>I'm currently using YourKit Java Profiler to gather information about the total number of invoked methods during profiling. However, I'm facing difficulty in distinguishing between static methods and instance methods.</p>\n<p>When I perform <a href=\"https://www.yourkit.com/docs/java/help/tracing.jsp\" rel=\"nofollow noreferrer\">CPU profiling (tracing)</a>, I obtain a list of methods, but there seems to be no apparent way to identify whether a method is static or instance-based. For instance, here are two sample entries from the method list:</p>\n<ul>\n<li>Instance <code>java.lang.String.charAt(int) String.java</code></li>\n<li>Static <code>java.lang.String.lastIndexOf(byte[], byte, int, String, int) String.java</code></li>\n</ul>\n<p>Both methods appear identical and lack any indication of their type (static or instance). I have extensively searched through the official documentation provided by YourKit, but have been unable to find any relevant information on this matter.</p>\n<p>Is it possible to differentiate between static and instance methods during profiling using YourKit? If so, what approach or feature should I utilize to achieve this? I would greatly appreciate any insights or guidance regarding this issue.</p>\n"},{"tags":["java","android","json","instagram","instagram-api"],"answers":[{"tags":[],"owner":{"account_id":7096830,"reputation":3555,"user_id":5430055,"display_name":"Ishara Madhawa"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1525007917,"creation_date":1525007917,"answer_id":50087005,"question_id":50086945,"body_markdown":"Using the [Instagram API users endpoint][1] (`https://api.instagram.com/v1/users/{user-id}/?access_token=ACCESS-TOKEN` ) you will receive a response like this one:\r\n\r\n    {\r\n        &quot;data&quot;: {\r\n            &quot;id&quot;: &quot;1574083&quot;,\r\n            &quot;username&quot;: &quot;snoopdogg&quot;,\r\n            &quot;full_name&quot;: &quot;Snoop Dogg&quot;,\r\n            &quot;profile_picture&quot;: &quot;http://distillery.s3.amazonaws.com/profiles/profile_1574083_75sq_1295469061.jpg&quot;,\r\n            &quot;bio&quot;: &quot;This is my bio&quot;,\r\n            &quot;website&quot;: &quot;http://snoopdogg.com&quot;,\r\n            &quot;counts&quot;: {\r\n                &quot;media&quot;: 1320,\r\n                &quot;follows&quot;: 420,\r\n                &quot;followed_by&quot;: 3410\r\n            }\r\n    }\r\n\r\n\r\nUsing this you can get the profile picture.\r\n  [1]: https://instagram.com/developer/endpoints/users/#get_users\r\n","title":"How to get Instagram Profile Picture?","body":"<p>Using the <a href=\"https://instagram.com/developer/endpoints/users/#get_users\" rel=\"nofollow noreferrer\">Instagram API users endpoint</a> (<code>https://api.instagram.com/v1/users/{user-id}/?access_token=ACCESS-TOKEN</code> ) you will receive a response like this one:</p>\n\n<pre><code>{\n    \"data\": {\n        \"id\": \"1574083\",\n        \"username\": \"snoopdogg\",\n        \"full_name\": \"Snoop Dogg\",\n        \"profile_picture\": \"http://distillery.s3.amazonaws.com/profiles/profile_1574083_75sq_1295469061.jpg\",\n        \"bio\": \"This is my bio\",\n        \"website\": \"http://snoopdogg.com\",\n        \"counts\": {\n            \"media\": 1320,\n            \"follows\": 420,\n            \"followed_by\": 3410\n        }\n}\n</code></pre>\n\n<p>Using this you can get the profile picture.</p>\n"},{"tags":[],"owner":{"account_id":10148917,"reputation":2458,"user_id":7496198,"display_name":"Chhaileng"},"down_vote_count":1,"up_vote_count":50,"is_accepted":false,"score":49,"last_activity_date":1684808967,"creation_date":1564758300,"answer_id":57329107,"question_id":50086945,"body_markdown":"By May 2023, to get Instagram profile URL via API, use this:\r\n\r\n[https://www.instagram.com/USERNAME/?__a=1&amp;__d=1][1]\r\n\r\n\r\n  [1]: https://www.instagram.com/USERNAME/?__a=1&amp;__d=1","title":"How to get Instagram Profile Picture?","body":"<p>By May 2023, to get Instagram profile URL via API, use this:</p>\n<p><a href=\"https://www.instagram.com/USERNAME/?__a=1&amp;__d=1\" rel=\"noreferrer\">https://www.instagram.com/USERNAME/?__a=1&amp;__d=1</a></p>\n"},{"tags":[],"owner":{"account_id":7302345,"reputation":165,"user_id":5564584,"display_name":"Rodrigo Vieira"},"down_vote_count":3,"up_vote_count":17,"is_accepted":false,"score":14,"last_activity_date":1566886802,"creation_date":1566886323,"answer_id":57668576,"question_id":50086945,"body_markdown":"To get profile photo, use the function bellow:\r\n   \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    function getPhoto(a) {\r\n      \r\n      // validation for instagram usernames\r\n      var regex = new RegExp(/^(?!.*\\.\\.)(?!.*\\.$)[^\\W][\\w.]{0,29}$/);\r\n      var validation = regex.test(a);\r\n\r\n      if(validation) {\r\n      \r\n        $.get(&quot;https://www.instagram.com/&quot;+a+&quot;/?__a=1&quot;)\r\n        .done(function(data) { \r\n\r\n          // getting the url\r\n          var photoURL = data[&quot;graphql&quot;][&quot;user&quot;][&quot;profile_pic_url_hd&quot;];\r\n\r\n          // update img element\r\n          $(&quot;#photoReturn&quot;).attr(&quot;src&quot;,photoURL)\r\n         \r\n         })\r\n        .fail(function() { \r\n          // code for 404 error \r\n          alert(&#39;Username was not found!&#39;)\r\n        })\r\n      \r\n      } else {\r\n      \r\n        alert(&#39;The username is invalid!&#39;)\r\n      }\r\n\r\n    }\r\n\r\n        \r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js&quot;&gt;&lt;/script&gt;\r\n\r\n    &lt;img src=&quot;&quot; id=&quot;photoReturn&quot;&gt;\r\n\r\n    &lt;br&gt;&lt;br&gt;\r\n\r\n    &lt;input type=&quot;text&quot; id=&quot;usernameInput&quot;&gt;\r\n\r\n    &lt;button onclick=&quot;getPhoto($(&#39;#usernameInput&#39;).val().trim())&quot;&gt;Get profile photo&lt;/button&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"How to get Instagram Profile Picture?","body":"<p>To get profile photo, use the function bellow:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function getPhoto(a) {\r\n  \r\n  // validation for instagram usernames\r\n  var regex = new RegExp(/^(?!.*\\.\\.)(?!.*\\.$)[^\\W][\\w.]{0,29}$/);\r\n  var validation = regex.test(a);\r\n\r\n  if(validation) {\r\n  \r\n    $.get(\"https://www.instagram.com/\"+a+\"/?__a=1\")\r\n    .done(function(data) { \r\n\r\n      // getting the url\r\n      var photoURL = data[\"graphql\"][\"user\"][\"profile_pic_url_hd\"];\r\n\r\n      // update img element\r\n      $(\"#photoReturn\").attr(\"src\",photoURL)\r\n     \r\n     })\r\n    .fail(function() { \r\n      // code for 404 error \r\n      alert('Username was not found!')\r\n    })\r\n  \r\n  } else {\r\n  \r\n    alert('The username is invalid!')\r\n  }\r\n\r\n}\r\n\r\n    </code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n\r\n&lt;img src=\"\" id=\"photoReturn\"&gt;\r\n\r\n&lt;br&gt;&lt;br&gt;\r\n\r\n&lt;input type=\"text\" id=\"usernameInput\"&gt;\r\n\r\n&lt;button onclick=\"getPhoto($('#usernameInput').val().trim())\"&gt;Get profile photo&lt;/button&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":13467879,"reputation":360,"user_id":9717489,"display_name":"Yash Arora"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52539,"favorite_count":0,"down_vote_count":2,"up_vote_count":29,"closed_date":1587198951,"answer_count":3,"score":27,"last_activity_date":1684827391,"creation_date":1525007521,"question_id":50086945,"body_markdown":"How to extract Instagram Profile picture using instagram API in android ?\r\nOr any other Method To extract Insta Profile Picture?\r\n ","title":"How to get Instagram Profile Picture?","body":"<p>How to extract Instagram Profile picture using instagram API in android ?\nOr any other Method To extract Insta Profile Picture?</p>\n"},{"tags":["java","graph-databases"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1684825834,"post_id":76311950,"comment_id":134569504,"body_markdown":"How an object is written is totally depending on it&#39;s `toString` implementation in your code, so in your case on the implementation of whatever `Object` is returned from your `GremlinResultSet`. As we don&#39;t see any implementation of parsing here, I can&#39;t tell if it&#39;s from the parsing part or from the output part.","body":"How an object is written is totally depending on it&#39;s <code>toString</code> implementation in your code, so in your case on the implementation of whatever <code>Object</code> is returned from your <code>GremlinResultSet</code>. As we don&#39;t see any implementation of parsing here, I can&#39;t tell if it&#39;s from the parsing part or from the output part."}],"answers":[{"tags":[],"owner":{"account_id":25445016,"reputation":647,"user_id":19247339,"display_name":"CreateLink Galaxybase"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684826312,"creation_date":1684826312,"answer_id":76312171,"question_id":76311950,"body_markdown":"Properties of type double, when written to a file after parsing, will become scientific notation. \r\nThe problem of this scientific notation is that java will automatically convert the data that is too big or too small to scientific notation.It can be solved by BigDecimal class of java.\r\n```\r\nString str=new BigDecimal(num+&quot;&quot;).toString().\r\n```\r\n\r\nFor your case, it can be optimized as follows:\r\n\r\n```\r\n            while (result.hasNext()) {\r\n                Object[] values = result.next();\r\n                for (int i = 0; i &lt; values.length; i++) {\r\n                    Object value = values[i];\r\n                    if (value instanceof Double) {\r\n                        String str = new BigDecimal(Double.toString((Double)value)).toString();\r\n                        fw.write(str);\r\n                    } else {\r\n                        fw.write(value.toString());\r\n                    }\r\n                    if (i &lt; values.length - 1) {\r\n                        fw.write(&quot;,&quot;);\r\n                    }\r\n                }\r\n                fw.write(&quot;\\n&quot;);\r\n            }\r\n```\r\n\r\n","title":"Why do property values appear in scientific notation when parsing and writing results after executing queries on Galaxybase with Java?","body":"<p>Properties of type double, when written to a file after parsing, will become scientific notation.\nThe problem of this scientific notation is that java will automatically convert the data that is too big or too small to scientific notation.It can be solved by BigDecimal class of java.</p>\n<pre><code>String str=new BigDecimal(num+&quot;&quot;).toString().\n</code></pre>\n<p>For your case, it can be optimized as follows:</p>\n<pre><code>            while (result.hasNext()) {\n                Object[] values = result.next();\n                for (int i = 0; i &lt; values.length; i++) {\n                    Object value = values[i];\n                    if (value instanceof Double) {\n                        String str = new BigDecimal(Double.toString((Double)value)).toString();\n                        fw.write(str);\n                    } else {\n                        fw.write(value.toString());\n                    }\n                    if (i &lt; values.length - 1) {\n                        fw.write(&quot;,&quot;);\n                    }\n                }\n                fw.write(&quot;\\n&quot;);\n            }\n</code></pre>\n"}],"owner":{"account_id":25445016,"reputation":647,"user_id":19247339,"display_name":"CreateLink Galaxybase"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76312171,"answer_count":1,"score":0,"last_activity_date":1684826312,"creation_date":1684824368,"question_id":76311950,"body_markdown":"Why do property values appear in scientific notation when parsing and writing the results returned to the client after executing algorithm queries in Java on Galaxybase? \r\n\r\nHere is the code I wrote：\r\n\r\n```\r\npublic class Test {\r\n    public static void main(String[] args) throws IOException {\r\n        GalaxyBaseClient client = new GalaxyBaseClient(&quot;localhost&quot;, 8180);\r\n\r\n        String query = &quot;g.V().hasLabel(&#39;person&#39;).has(&#39;age&#39;, gt(20)).values(&#39;name&#39;, &#39;age&#39;)&quot;;\r\n        GremlinResultSet result = client.submit(query);\r\n\r\n        FileWriter fw = null;\r\n        try {\r\n            fw = new FileWriter(&quot;test.csv&quot;);\r\n\r\n            String[] columnNames = {&quot;name&quot;, &quot;age&quot;};\r\n            for (int i = 0; i &lt; columnNames.length; i++) {\r\n                fw.write(columnNames[i]);\r\n                if (i &lt; columnNames.length - 1) {\r\n                    fw.write(&quot;,&quot;);\r\n                }\r\n            }\r\n            fw.write(&quot;\\n&quot;);\r\n\r\n            while (result.hasNext()) {\r\n                Object[] values = result.next();\r\n                for (int i = 0; i &lt; values.length; i++) {\r\n                    Object value = values[i];\r\n                    fw.write(value.toString());\r\n                    if (i &lt; values.length - 1) {\r\n                        fw.write(&quot;,&quot;);\r\n                    }\r\n                }\r\n                fw.write(&quot;\\n&quot;);\r\n            }\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        } finally {\r\n            if (fw != null) {\r\n                fw.close();\r\n            }\r\n            result.close();\r\n            client.close();\r\n        }\r\n    }\r\n}\r\n```\r\n","title":"Why do property values appear in scientific notation when parsing and writing results after executing queries on Galaxybase with Java?","body":"<p>Why do property values appear in scientific notation when parsing and writing the results returned to the client after executing algorithm queries in Java on Galaxybase?</p>\n<p>Here is the code I wrote：</p>\n<pre><code>public class Test {\n    public static void main(String[] args) throws IOException {\n        GalaxyBaseClient client = new GalaxyBaseClient(&quot;localhost&quot;, 8180);\n\n        String query = &quot;g.V().hasLabel('person').has('age', gt(20)).values('name', 'age')&quot;;\n        GremlinResultSet result = client.submit(query);\n\n        FileWriter fw = null;\n        try {\n            fw = new FileWriter(&quot;test.csv&quot;);\n\n            String[] columnNames = {&quot;name&quot;, &quot;age&quot;};\n            for (int i = 0; i &lt; columnNames.length; i++) {\n                fw.write(columnNames[i]);\n                if (i &lt; columnNames.length - 1) {\n                    fw.write(&quot;,&quot;);\n                }\n            }\n            fw.write(&quot;\\n&quot;);\n\n            while (result.hasNext()) {\n                Object[] values = result.next();\n                for (int i = 0; i &lt; values.length; i++) {\n                    Object value = values[i];\n                    fw.write(value.toString());\n                    if (i &lt; values.length - 1) {\n                        fw.write(&quot;,&quot;);\n                    }\n                }\n                fw.write(&quot;\\n&quot;);\n            }\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        } finally {\n            if (fw != null) {\n                fw.close();\n            }\n            result.close();\n            client.close();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","android","parallel-processing"],"answers":[{"tags":[],"owner":{"account_id":25155166,"reputation":864,"user_id":19000086,"display_name":"zaid khan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684826241,"creation_date":1684826241,"answer_id":76312165,"question_id":76309952,"body_markdown":"In Java, you can execute the three functions in parallel using threads or the Executor framework.  Here is an example of ExecutorService\r\n\r\n```\r\n // Create an ExecutorService with a fixed number of threads\r\n ExecutorService executorService = Executors.newFixedThreadPool(3);\r\n\r\n       // Create the tasks\r\n        Callable&lt;List&lt;Integer&gt;&gt; task1 = () -&gt; function1();\r\n        Callable&lt;List&lt;Integer&gt;&gt; task2 = () -&gt; function2();\r\n        Callable&lt;List&lt;Integer&gt;&gt; task3 = () -&gt; function3();\r\n\r\n        // Submit the tasks to the executor\r\n        Future&lt;List&lt;Integer&gt;&gt; result1 = executorService.submit(task1);\r\n        Future&lt;List&lt;Integer&gt;&gt; result2 = executorService.submit(task2);\r\n        Future&lt;List&lt;Integer&gt;&gt; result3 = executorService.submit(task3);\r\n\r\n\r\n           // Retrieve the results asynchronously\r\n        executorService.execute(() -&gt; {\r\n            try {\r\n                List&lt;Integer&gt; resultList1 = result1.get();\r\n                // Process the result of function1\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        });\r\n\r\n        executorService.execute(() -&gt; {\r\n            try {\r\n                List&lt;Integer&gt; resultList2 = result2.get();\r\n                // Process the result of function2\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        });\r\n\r\n        executorService.execute(() -&gt; {\r\n            try {\r\n                List&lt;Integer&gt; resultList3 = result3.get();\r\n                // Process the result of function3\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        });\r\n\r\n        // Shutdown the executor when you&#39;re done\r\n        executorService.shutdown();\r\n}\r\n","title":"Running parallel processes in Android app","body":"<p>In Java, you can execute the three functions in parallel using threads or the Executor framework.  Here is an example of ExecutorService</p>\n<pre><code> // Create an ExecutorService with a fixed number of threads\n ExecutorService executorService = Executors.newFixedThreadPool(3);\n\n       // Create the tasks\n        Callable&lt;List&lt;Integer&gt;&gt; task1 = () -&gt; function1();\n        Callable&lt;List&lt;Integer&gt;&gt; task2 = () -&gt; function2();\n        Callable&lt;List&lt;Integer&gt;&gt; task3 = () -&gt; function3();\n\n        // Submit the tasks to the executor\n        Future&lt;List&lt;Integer&gt;&gt; result1 = executorService.submit(task1);\n        Future&lt;List&lt;Integer&gt;&gt; result2 = executorService.submit(task2);\n        Future&lt;List&lt;Integer&gt;&gt; result3 = executorService.submit(task3);\n\n\n           // Retrieve the results asynchronously\n        executorService.execute(() -&gt; {\n            try {\n                List&lt;Integer&gt; resultList1 = result1.get();\n                // Process the result of function1\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        });\n\n        executorService.execute(() -&gt; {\n            try {\n                List&lt;Integer&gt; resultList2 = result2.get();\n                // Process the result of function2\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        });\n\n        executorService.execute(() -&gt; {\n            try {\n                List&lt;Integer&gt; resultList3 = result3.get();\n                // Process the result of function3\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        });\n\n        // Shutdown the executor when you're done\n        executorService.shutdown();\n}\n</code></pre>\n"}],"owner":{"account_id":11196358,"reputation":77,"user_id":8214882,"display_name":"Mike"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76312165,"answer_count":1,"score":0,"last_activity_date":1684826241,"creation_date":1684790021,"question_id":76309952,"body_markdown":"I&#39;m new to Android app programming.\r\n\r\nI&#39;m making a native Android app in Java. Inside an Activity, I have some ArrayLists and 3 different functions receiving 2 ArrayLists as parameters and returning an ArrayList based on the content of the 2 parameters. Each function makes different operations and receives different lists as input. Since these 3 functions are independent of each other and since if the 2 ArrayLists are big the execution of these functions can take a while, I would like to execute them in parallel so I don&#39;t wait for the first function to complete in order to launch the second function, etc. \r\n\r\nWhich is the best way to run these functions in parallel and receive their result back in my ViewModel in order to show it in the Activity?","title":"Running parallel processes in Android app","body":"<p>I'm new to Android app programming.</p>\n<p>I'm making a native Android app in Java. Inside an Activity, I have some ArrayLists and 3 different functions receiving 2 ArrayLists as parameters and returning an ArrayList based on the content of the 2 parameters. Each function makes different operations and receives different lists as input. Since these 3 functions are independent of each other and since if the 2 ArrayLists are big the execution of these functions can take a while, I would like to execute them in parallel so I don't wait for the first function to complete in order to launch the second function, etc.</p>\n<p>Which is the best way to run these functions in parallel and receive their result back in my ViewModel in order to show it in the Activity?</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","oracle11g","spring-data-envers"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1684697144,"post_id":76301369,"comment_id":134551155,"body_markdown":"What exactly is this type: `Number(10)`.  I&#39;m not an expert in JPA but I don&#39;t see where this comes from.  I see `numeric(p,s)` in the SQL docs but nothing is `Number`.  Being more clear what this is would help here.","body":"What exactly is this type: <code>Number(10)</code>.  I&#39;m not an expert in JPA but I don&#39;t see where this comes from.  I see <code>numeric(p,s)</code> in the SQL docs but nothing is <code>Number</code>.  Being more clear what this is would help here."},{"owner":{"account_id":2712123,"reputation":813,"user_id":2340345,"accept_rate":50,"display_name":"user2340345"},"score":0,"creation_date":1684734981,"post_id":76301369,"comment_id":134554405,"body_markdown":"rev is the column autogenerated in revinfo table from spring data envers, which of type Number(10)","body":"rev is the column autogenerated in revinfo table from spring data envers, which of type Number(10)"},{"owner":{"account_id":3418957,"reputation":1176,"user_id":4029174,"accept_rate":100,"display_name":"bananas"},"score":0,"creation_date":1684736685,"post_id":76301369,"comment_id":134554678,"body_markdown":"did you check in google what Number(10) data type represents in java? You might end up writing converter","body":"did you check in google what Number(10) data type represents in java? You might end up writing converter"},{"owner":{"account_id":2712123,"reputation":813,"user_id":2340345,"accept_rate":50,"display_name":"user2340345"},"score":0,"creation_date":1684738789,"post_id":76301369,"comment_id":134555032,"body_markdown":"at oracle.jdbc.driver.NumberCommonAccessor.throwOverflow(NumberCommonAccessor.java:4139)\n    at oracle.jdbc.driver.NumberCommonAccessor.getInt(NumberCommonAccessor.java:125)\nInteger value is being picked up from Oracle by getInt method, Im not sure which class to extend so that I write the rs.getLong() or rs.getBigInteger().","body":"at oracle.jdbc.driver.NumberCommonAccessor.throwOverflow(Number&zwnj;&#8203;CommonAccessor.java:&zwnj;&#8203;4139)     at oracle.jdbc.driver.NumberCommonAccessor.getInt(NumberCommonA&zwnj;&#8203;ccessor.java:125) Integer value is being picked up from Oracle by getInt method, Im not sure which class to extend so that I write the rs.getLong() or rs.getBigInteger()."}],"answers":[{"tags":[],"owner":{"account_id":779805,"reputation":4963,"user_id":836215,"display_name":"ibre5041"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684749416,"creation_date":1684749108,"answer_id":76304950,"question_id":76301369,"body_markdown":"Do not use `int` or `long` for identifiers and numbers retrieved from database. Most likely you do not perform any mathematical operations with them anyway.\r\n\r\nOracle stores numbers in decimal format, the corresponding type in Java is `BigDecimal`.\r\n\r\nYour stack trace shows it:\r\n\r\n    at oracle.jdbc.driver.GeneratedResultSet.getInt(GeneratedResultSet.java:556)\r\n    at com.ibm.ws.rsadapter.jdbc.WSJdbcResultSet.getInt(WSJdbcResultSet.java:1089)\r\n\r\nYou&#39;re calling `getInt()` on ResultSet, you should call `getBigDecimal()`","title":"Numeric Overflow exception when calling findRevisions() or even custom audit query - spring-data-jpa with oracle","body":"<p>Do not use <code>int</code> or <code>long</code> for identifiers and numbers retrieved from database. Most likely you do not perform any mathematical operations with them anyway.</p>\n<p>Oracle stores numbers in decimal format, the corresponding type in Java is <code>BigDecimal</code>.</p>\n<p>Your stack trace shows it:</p>\n<pre><code>at oracle.jdbc.driver.GeneratedResultSet.getInt(GeneratedResultSet.java:556)\nat com.ibm.ws.rsadapter.jdbc.WSJdbcResultSet.getInt(WSJdbcResultSet.java:1089)\n</code></pre>\n<p>You're calling <code>getInt()</code> on ResultSet, you should call <code>getBigDecimal()</code></p>\n"},{"tags":[],"owner":{"account_id":5844056,"reputation":141,"user_id":4604665,"display_name":"tausif"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684823788,"creation_date":1684823788,"answer_id":76311886,"question_id":76301369,"body_markdown":"A revision number(`REV`) value should always be increasing and never overflows.\r\n\r\nThe default implementations provided by Envers use an `int` data type that has an upper bound of `Integer.MAX_VALUE`.\r\n\r\nSince you have already mentioned that your `REV` number has the value of `4686710314` and it exceeds this limit, that&#39;s why you are getting a Numeric Overflow exception.\r\n\r\nTo resolve this issue, you can modify the data type of the `REV` column in the `REVINFO` table to accommodate larger values. But this is not possible in your case as the `REVINFO` is auto-generated. \r\n\r\nSo you should consider using a custom revision entity mapping using a `long` data type.\r\n\r\nBelow is the implementation\r\n\r\n    @Entity\r\n    @Table(name = &quot;REV_INFO&quot;)\r\n    @RevisionEntity\r\n    public  class CustomRevisionEntity implements Serializable {\r\n    \r\n    \tprivate static final long serialVersionUID = 8530213963961662300L;\r\n    \r\n    \t@Id\r\n    \t@GeneratedValue\r\n    \t@RevisionNumber\r\n        @Column(name = &quot;REV&quot;)\r\n    \tprivate long id;\r\n    \r\n    \t@RevisionTimestamp\r\n        @Column(name = &quot;REVTSTMP&quot;)\r\n    \tprivate long timestamp;\r\n    \r\n    \tpublic long getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    \r\n    \tpublic void setId(long id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \r\n    \t@Transient\r\n    \tpublic Date getRevisionDate() {\r\n    \t\treturn new Date( timestamp );\r\n    \t}\r\n    \r\n    \tpublic long getTimestamp() {\r\n    \t\treturn timestamp;\r\n    \t}\r\n    \r\n    \tpublic void setTimestamp(long timestamp) {\r\n    \t\tthis.timestamp = timestamp;\r\n    \t}\r\n    }\r\n\r\n\r\nAnd then `RevisionRepository&lt;ImmigrationFile, Long, Long&gt;`\r\n\r\nNote: Verify the autogenerated `REVINFO` table `REV` column datatype length in Oracle.\r\n\r\n\r\n","title":"Numeric Overflow exception when calling findRevisions() or even custom audit query - spring-data-jpa with oracle","body":"<p>A revision number(<code>REV</code>) value should always be increasing and never overflows.</p>\n<p>The default implementations provided by Envers use an <code>int</code> data type that has an upper bound of <code>Integer.MAX_VALUE</code>.</p>\n<p>Since you have already mentioned that your <code>REV</code> number has the value of <code>4686710314</code> and it exceeds this limit, that's why you are getting a Numeric Overflow exception.</p>\n<p>To resolve this issue, you can modify the data type of the <code>REV</code> column in the <code>REVINFO</code> table to accommodate larger values. But this is not possible in your case as the <code>REVINFO</code> is auto-generated.</p>\n<p>So you should consider using a custom revision entity mapping using a <code>long</code> data type.</p>\n<p>Below is the implementation</p>\n<pre><code>@Entity\n@Table(name = &quot;REV_INFO&quot;)\n@RevisionEntity\npublic  class CustomRevisionEntity implements Serializable {\n\n    private static final long serialVersionUID = 8530213963961662300L;\n\n    @Id\n    @GeneratedValue\n    @RevisionNumber\n    @Column(name = &quot;REV&quot;)\n    private long id;\n\n    @RevisionTimestamp\n    @Column(name = &quot;REVTSTMP&quot;)\n    private long timestamp;\n\n    public long getId() {\n        return id;\n    }\n\n    public void setId(long id) {\n        this.id = id;\n    }\n\n    @Transient\n    public Date getRevisionDate() {\n        return new Date( timestamp );\n    }\n\n    public long getTimestamp() {\n        return timestamp;\n    }\n\n    public void setTimestamp(long timestamp) {\n        this.timestamp = timestamp;\n    }\n}\n</code></pre>\n<p>And then <code>RevisionRepository&lt;ImmigrationFile, Long, Long&gt;</code></p>\n<p>Note: Verify the autogenerated <code>REVINFO</code> table <code>REV</code> column datatype length in Oracle.</p>\n"}],"owner":{"account_id":2712123,"reputation":813,"user_id":2340345,"accept_rate":50,"display_name":"user2340345"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":276,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1684825162,"creation_date":1684693867,"question_id":76301369,"body_markdown":"I&#39;m struggling with exception since the past 4 days and being completely frustrated with it that I&#39;m asking this question, I have referred various answers already on StackoverOverflow but they dont seem to have the issue as mine, so please don&#39;t mark it as duplicate.\r\n\r\nhttps://stackoverflow.com/questions/58570032/hibernate-could-not-fetch-the-sequenceinformation-from-the-database\r\n\r\nI have spring data jpa 2.4.4 version and I&#39;m using spring data envers with spring boot on oracle database, I have ojdbc 7 as a dependency.\r\n\r\nAll my tables are audited using envers and generated automatically by confirguration, so Im facing Numeric overflow exception when Im trying to fetch records whose rev is Number(10), my rev table has 2 columns where rev is a Number(10) digits precision.\r\n\r\nREVINFO table is auto generated by spring data envers and i have not customised it in my code.\r\n\r\n    REVINFO table columns :\r\n    REV            NUMBER(10)\r\n    REVTIMESTAMP   TIMESTAMP\r\n\r\nMain Table - Immigration_file\r\n\r\n    @Entity\r\n    @Audited\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class ImmigrationFile extends BaseEntity implements ImmigrationFileAware&lt;ImmigrationFile&gt;,Serializable, Cloneable {\r\n    \r\n        @Id\r\n        @SequenceGenerator(name = &quot;IMMIGRATION_FILE_ID_GENERATOR&quot;,\r\n                sequenceName = &quot;SEQ_IMMIGRATION_FILE_ID&quot;,\r\n                allocationSize = 1)\r\n        @GeneratedValue(strategy = GenerationType.AUTO, generator = &quot;IMMIGRATION_FILE_ID_GENERATOR&quot;)\r\n        @Column(name = &quot;ID&quot;, unique = true, nullable = false)\r\n        private Long immigrationFileId;\r\n    \r\n    ...other columns\r\n    }\r\n\r\nAudit table - Immigration_file_hist, having all columns of main table along with REV and REVTYPE, so the error is being thrown when the value of REV is &quot;4686710314&quot;.\r\n\r\nI have tried both the approached of using RevisionRepository and custom Audit Query and I get the same exception with both of them\r\ncode to fetch the revisions of immigration_file_hist repository\r\n\r\n    @Repository\r\n    public interface ImmigrationFileDaoRepository extends RevisionRepository&lt;ImmigrationFile, Long, BigInteger&gt;, JpaRepository&lt;ImmigrationFile, Long&gt; {\r\n    \r\n            Page&lt;Revision&lt;BigInteger, ImmigrationFile&gt;&gt; revisions = immigrationFileDaoRepository.findRevisions(immigrationFile.getImmigrationFileId(), PageRequest.of(Integer.valueOf(startPageIndex), Integer.valueOf(endPageIndex), RevisionSort.desc()));\r\n\r\n\r\nI was using Long earlier and i have changed it to BigInteger and i still face the same issue.\r\n\r\nCustom Audit Query \r\n\r\n    public List&lt;ImmigrationFile&gt; findRevisions(Long immigrationFileId) {\r\n            AuditReader reader = AuditReaderFactory.get(entityManager);\r\n            List&lt;ImmigrationFile&gt; results = reader\r\n                    .createQuery()\r\n                    .forRevisionsOfEntity(ImmigrationFile.class, true, false)\r\n                    .add(AuditEntity.id().eq(immigrationFileId))\r\n                    .addOrder(AuditEntity.property(&quot;version&quot;).desc())\r\n                    .setMaxResults(maxResult)\r\n                    .getResultList();\r\n            return results;\r\n\r\n\r\nIm getting the below exception : \r\n\r\n   \r\n\r\n     Caused by: org.springframework.orm.jpa.JpaSystemException: could not execute query; nested exception is org.hibernate.exception.GenericJDBCException: could not execute query\r\n    \tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:331)\r\n    \tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n    \tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:548)\r\n    \tat org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\r\n    \tat org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)\r\n    \tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\r\n    \tat com.sun.proxy.$Proxy252.findRevisions(Unknown Source)\r\n    \tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:687)\r\n    \t... 82 common frames omitted\r\n    Caused by: org.hibernate.exception.GenericJDBCException: could not execute query\r\n    \tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:47)\r\n    \tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\r\n    \tat org.hibernate.loader.Loader.doList(Loader.java:2853)\r\n    \tat org.hibernate.loader.Loader.doList(Loader.java:2832)\r\n    \tat org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2664)\r\n    \tat org.hibernate.loader.Loader.list(Loader.java:2659)\r\n    \tat org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:506)\r\n    \tat org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:400)\r\n    \tat org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:219)\r\n    \tat org.hibernate.internal.SessionImpl.list(SessionImpl.java:1414)/\r\n    \tat org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1565)\r\n    \tat org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1533)\r\n    \tat org.hibernate.envers.query.internal.impl.AbstractAuditQuery.buildAndExecuteQuery(AbstractAuditQuery.java:106)\r\n    \tat org.hibernate.envers.query.internal.impl.RevisionsOfEntityQuery.getQueryResults(RevisionsOfEntityQuery.java:173)\r\n    \tat org.hibernate.envers.query.internal.impl.RevisionsOfEntityQuery.list(RevisionsOfEntityQuery.java:136)\r\n    \tat org.hibernate.envers.query.internal.impl.AbstractAuditQuery.getResultList(AbstractAuditQuery.java:112)\r\n    \tat org.springframework.data.envers.repository.support.EnversRevisionRepositoryImpl.findRevisions(EnversRevisionRepositoryImpl.java:155)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \tat org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)\r\n    \tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)\r\n    \tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)\r\n    \tat org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:524)\r\n    \tat org.springframework.data.repository.core.support.Reposito.ryComposition.invoke(RepositoryComposition.java:285)\r\n    \tat org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:531)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:156)\r\n    \tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:131)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:134)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\r\n    \t... 97 common frames omitted\r\n    Caused by: java.sql.SQLException: Numeric Overflow\r\n    \tat oracle.jdbc.driver.NumberCommonAccessor.throwOverflow(NumberCommonAccessor.java:4139)\r\n    \tat oracle.jdbc.driver.NumberCommonAccessor.getInt(NumberCommonAccessor.java:125)\r\n    \tat oracle.jdbc.driver.GeneratedStatement.getInt(GeneratedStatement.java:199)\r\n    \tat oracle.jdbc.driver.GeneratedScrollableResultSet.getInt(GeneratedScrollableResultSet.java:246)\r\n    \tat oracle.jdbc.driver.GeneratedResultSet.getInt(GeneratedResultSet.java:556)\r\n    \tat com.ibm.ws.rsadapter.jdbc.WSJdbcResultSet.getInt(WSJdbcResultSet.java:1089)\r\n    \tat org.hibernate.type.descriptor.sql.IntegerTypeDescriptor$2.doExtract(IntegerTypeDescriptor.java:62)\r\n    \tat org.hibernate.type.descriptor.sql.BasicExtractor.extract(BasicExtractor.java:47)\r\n    \tat org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:257)\r\n    \tat org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:253)\r\n    \tat org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:243)\r\n    \tat org.hibernate.type.AbstractStandardBasicType.hydrate(AbstractStandardBasicType.java:329)\r\n    \tat org.hibernate.type.ManyToOneType.hydrate(ManyToOneType.java:184)\r\n    \tat org.hibernate.type.ComponentType.hydrate(ComponentType.java:670)\r\n    \tat org.hibernate.loader.Loader.extractKeysFromResultSet(Loader.java:803)\r\n    \tat org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:727)\r\n    \tat org.hibernate.loader.Loader.getRowsFromResultSet(Loader.java:1039)\r\n    \tat org.hibernate.loader.Loader.processResultSet(Loader.java:990)\r\n    \tat org.hibernate.loader.Loader.doQuery(Loader.java:959)\r\n    \tat org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:349)\r\n    \tat org.hibernate.loader.Loader.doList(Loader.java:2850)\r\n    \t... 131 common frames omitted\r\n\r\n","title":"Numeric Overflow exception when calling findRevisions() or even custom audit query - spring-data-jpa with oracle","body":"<p>I'm struggling with exception since the past 4 days and being completely frustrated with it that I'm asking this question, I have referred various answers already on StackoverOverflow but they dont seem to have the issue as mine, so please don't mark it as duplicate.</p>\n<p><a href=\"https://stackoverflow.com/questions/58570032/hibernate-could-not-fetch-the-sequenceinformation-from-the-database\">Hibernate could not fetch the SequenceInformation from the database</a></p>\n<p>I have spring data jpa 2.4.4 version and I'm using spring data envers with spring boot on oracle database, I have ojdbc 7 as a dependency.</p>\n<p>All my tables are audited using envers and generated automatically by confirguration, so Im facing Numeric overflow exception when Im trying to fetch records whose rev is Number(10), my rev table has 2 columns where rev is a Number(10) digits precision.</p>\n<p>REVINFO table is auto generated by spring data envers and i have not customised it in my code.</p>\n<pre><code>REVINFO table columns :\nREV            NUMBER(10)\nREVTIMESTAMP   TIMESTAMP\n</code></pre>\n<p>Main Table - Immigration_file</p>\n<pre><code>@Entity\n@Audited\n@NoArgsConstructor\n@AllArgsConstructor\npublic class ImmigrationFile extends BaseEntity implements ImmigrationFileAware&lt;ImmigrationFile&gt;,Serializable, Cloneable {\n\n    @Id\n    @SequenceGenerator(name = &quot;IMMIGRATION_FILE_ID_GENERATOR&quot;,\n            sequenceName = &quot;SEQ_IMMIGRATION_FILE_ID&quot;,\n            allocationSize = 1)\n    @GeneratedValue(strategy = GenerationType.AUTO, generator = &quot;IMMIGRATION_FILE_ID_GENERATOR&quot;)\n    @Column(name = &quot;ID&quot;, unique = true, nullable = false)\n    private Long immigrationFileId;\n\n...other columns\n}\n</code></pre>\n<p>Audit table - Immigration_file_hist, having all columns of main table along with REV and REVTYPE, so the error is being thrown when the value of REV is &quot;4686710314&quot;.</p>\n<p>I have tried both the approached of using RevisionRepository and custom Audit Query and I get the same exception with both of them\ncode to fetch the revisions of immigration_file_hist repository</p>\n<pre><code>@Repository\npublic interface ImmigrationFileDaoRepository extends RevisionRepository&lt;ImmigrationFile, Long, BigInteger&gt;, JpaRepository&lt;ImmigrationFile, Long&gt; {\n\n        Page&lt;Revision&lt;BigInteger, ImmigrationFile&gt;&gt; revisions = immigrationFileDaoRepository.findRevisions(immigrationFile.getImmigrationFileId(), PageRequest.of(Integer.valueOf(startPageIndex), Integer.valueOf(endPageIndex), RevisionSort.desc()));\n</code></pre>\n<p>I was using Long earlier and i have changed it to BigInteger and i still face the same issue.</p>\n<p>Custom Audit Query</p>\n<pre><code>public List&lt;ImmigrationFile&gt; findRevisions(Long immigrationFileId) {\n        AuditReader reader = AuditReaderFactory.get(entityManager);\n        List&lt;ImmigrationFile&gt; results = reader\n                .createQuery()\n                .forRevisionsOfEntity(ImmigrationFile.class, true, false)\n                .add(AuditEntity.id().eq(immigrationFileId))\n                .addOrder(AuditEntity.property(&quot;version&quot;).desc())\n                .setMaxResults(maxResult)\n                .getResultList();\n        return results;\n</code></pre>\n<p>Im getting the below exception :</p>\n<pre><code> Caused by: org.springframework.orm.jpa.JpaSystemException: could not execute query; nested exception is org.hibernate.exception.GenericJDBCException: could not execute query\n    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:331)\n    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:548)\n    at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\n    at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\n    at com.sun.proxy.$Proxy252.findRevisions(Unknown Source)\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:687)\n    ... 82 common frames omitted\nCaused by: org.hibernate.exception.GenericJDBCException: could not execute query\n    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:47)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\n    at org.hibernate.loader.Loader.doList(Loader.java:2853)\n    at org.hibernate.loader.Loader.doList(Loader.java:2832)\n    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2664)\n    at org.hibernate.loader.Loader.list(Loader.java:2659)\n    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:506)\n    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:400)\n    at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:219)\n    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1414)/\n    at org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1565)\n    at org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1533)\n    at org.hibernate.envers.query.internal.impl.AbstractAuditQuery.buildAndExecuteQuery(AbstractAuditQuery.java:106)\n    at org.hibernate.envers.query.internal.impl.RevisionsOfEntityQuery.getQueryResults(RevisionsOfEntityQuery.java:173)\n    at org.hibernate.envers.query.internal.impl.RevisionsOfEntityQuery.list(RevisionsOfEntityQuery.java:136)\n    at org.hibernate.envers.query.internal.impl.AbstractAuditQuery.getResultList(AbstractAuditQuery.java:112)\n    at org.springframework.data.envers.repository.support.EnversRevisionRepositoryImpl.findRevisions(EnversRevisionRepositoryImpl.java:155)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)\n    at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:524)\n    at org.springframework.data.repository.core.support.Reposito.ryComposition.invoke(RepositoryComposition.java:285)\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:531)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:156)\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:131)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:134)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\n    ... 97 common frames omitted\nCaused by: java.sql.SQLException: Numeric Overflow\n    at oracle.jdbc.driver.NumberCommonAccessor.throwOverflow(NumberCommonAccessor.java:4139)\n    at oracle.jdbc.driver.NumberCommonAccessor.getInt(NumberCommonAccessor.java:125)\n    at oracle.jdbc.driver.GeneratedStatement.getInt(GeneratedStatement.java:199)\n    at oracle.jdbc.driver.GeneratedScrollableResultSet.getInt(GeneratedScrollableResultSet.java:246)\n    at oracle.jdbc.driver.GeneratedResultSet.getInt(GeneratedResultSet.java:556)\n    at com.ibm.ws.rsadapter.jdbc.WSJdbcResultSet.getInt(WSJdbcResultSet.java:1089)\n    at org.hibernate.type.descriptor.sql.IntegerTypeDescriptor$2.doExtract(IntegerTypeDescriptor.java:62)\n    at org.hibernate.type.descriptor.sql.BasicExtractor.extract(BasicExtractor.java:47)\n    at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:257)\n    at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:253)\n    at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:243)\n    at org.hibernate.type.AbstractStandardBasicType.hydrate(AbstractStandardBasicType.java:329)\n    at org.hibernate.type.ManyToOneType.hydrate(ManyToOneType.java:184)\n    at org.hibernate.type.ComponentType.hydrate(ComponentType.java:670)\n    at org.hibernate.loader.Loader.extractKeysFromResultSet(Loader.java:803)\n    at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:727)\n    at org.hibernate.loader.Loader.getRowsFromResultSet(Loader.java:1039)\n    at org.hibernate.loader.Loader.processResultSet(Loader.java:990)\n    at org.hibernate.loader.Loader.doQuery(Loader.java:959)\n    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:349)\n    at org.hibernate.loader.Loader.doList(Loader.java:2850)\n    ... 131 common frames omitted\n</code></pre>\n"},{"tags":["java","clipboard"],"comments":[{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":0,"creation_date":1499908946,"post_id":45069475,"comment_id":77112948,"body_markdown":"You can discuss/buy premier or extended support from Oracle, and see if that includes fixing this bug. Jdk7 has been end-of-public-updates for more than 2 years. It&#39;s probably a better idea to migrate to jdk8. http://www.oracle.com/technetwork/java/eol-135779.html","body":"You can discuss/buy premier or extended support from Oracle, and see if that includes fixing this bug. Jdk7 has been end-of-public-updates for more than 2 years. It&#39;s probably a better idea to migrate to jdk8. <a href=\"http://www.oracle.com/technetwork/java/eol-135779.html\" rel=\"nofollow noreferrer\">oracle.com/technetwork/java/eol-135779.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":3025392,"reputation":1695,"user_id":2565527,"accept_rate":100,"display_name":"hiropon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684824951,"creation_date":1499906743,"answer_id":45069703,"question_id":45069475,"body_markdown":"My answer is probably useless, but I post.  \r\nAccording to Bugzilla tickets [JDK-7107490][1] and [JDK-7199196][2], these bugs are fixed from jdk8. So, it&#39;s better recommending to migrate to java 8.\r\n\r\nI&#39;m not so familiar with JDK&#39;s updating schedule, but I think JDK7 is no more maintained (EOL: [Java 7 Reaches End of Life][3]). If you created any patches for this bug, it would not be merged.\r\n\r\n\r\n  [1]: http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7107490\r\n  [2]: http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7199196\r\n  [3]: https://www.infoq.com/news/2015/05/Oracle-Ends-Java-7Public-Updates","title":"java.io.IOException: Owner failed to convert data","body":"<p>My answer is probably useless, but I post.<br />\nAccording to Bugzilla tickets <a href=\"http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7107490\" rel=\"nofollow noreferrer\">JDK-7107490</a> and <a href=\"http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7199196\" rel=\"nofollow noreferrer\">JDK-7199196</a>, these bugs are fixed from jdk8. So, it's better recommending to migrate to java 8.</p>\n<p>I'm not so familiar with JDK's updating schedule, but I think JDK7 is no more maintained (EOL: <a href=\"https://www.infoq.com/news/2015/05/Oracle-Ends-Java-7Public-Updates\" rel=\"nofollow noreferrer\">Java 7 Reaches End of Life</a>). If you created any patches for this bug, it would not be merged.</p>\n"}],"owner":{"account_id":2229924,"reputation":5666,"user_id":1967800,"accept_rate":78,"display_name":"Sharcoux"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":468,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":45069703,"answer_count":1,"score":1,"last_activity_date":1684824951,"creation_date":1499904840,"question_id":45069475,"body_markdown":"When copying an image from the clipboard into my application, I get :\r\n\r\n    java.io.IOException: Owner failed to convert data\r\n    \tat sun.awt.X11.XSelection.validateDataGetter(XSelection.java:444)\r\n    \tat sun.awt.X11.XSelection.getData(XSelection.java:305)\r\n    \tat sun.awt.X11.XClipboard.getClipboardData(XClipboard.java:120)\r\n    \tat sun.awt.datatransfer.SunClipboard.getData(SunClipboard.java:225)\r\n\r\nAccording to [this](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7107490), it appears that the issues is from jdk 1.7.0. Great. But what can I do for my users that are currently using Java 7 (except asking them to migrate to java 8 ?)\r\n\r\nOr maybe I didn&#39;t understand the issue ?","title":"java.io.IOException: Owner failed to convert data","body":"<p>When copying an image from the clipboard into my application, I get :</p>\n\n<pre><code>java.io.IOException: Owner failed to convert data\n    at sun.awt.X11.XSelection.validateDataGetter(XSelection.java:444)\n    at sun.awt.X11.XSelection.getData(XSelection.java:305)\n    at sun.awt.X11.XClipboard.getClipboardData(XClipboard.java:120)\n    at sun.awt.datatransfer.SunClipboard.getData(SunClipboard.java:225)\n</code></pre>\n\n<p>According to <a href=\"http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7107490\" rel=\"nofollow noreferrer\">this</a>, it appears that the issues is from jdk 1.7.0. Great. But what can I do for my users that are currently using Java 7 (except asking them to migrate to java 8 ?)</p>\n\n<p>Or maybe I didn't understand the issue ?</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":5856142,"reputation":4645,"user_id":4613320,"accept_rate":40,"display_name":"Maddy"},"score":0,"creation_date":1505303089,"post_id":46196632,"comment_id":79355637,"body_markdown":"try this : `databaseReference.child(user.getUid()).push(userInformations);`","body":"try this : <code>databaseReference.child(user.getUid()).push(userInformations&zwnj;&#8203;);</code>"}],"answers":[{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1505303030,"creation_date":1505303030,"answer_id":46196667,"question_id":46196632,"body_markdown":"You need to use the following code:\r\n\r\n    databaseReference.child(&quot;Users&quot;).child(user.getUid()).setValue(userInformations);\r\n\r\nThis means that all those objects will be hosted within the `Users` node. Please the new `child(&quot;Users&quot;)` added. In the same way you need to use for the posts.","title":"Firebase add a new node","body":"<p>You need to use the following code:</p>\n\n<pre><code>databaseReference.child(\"Users\").child(user.getUid()).setValue(userInformations);\n</code></pre>\n\n<p>This means that all those objects will be hosted within the <code>Users</code> node. Please the new <code>child(\"Users\")</code> added. In the same way you need to use for the posts.</p>\n"},{"tags":[],"owner":{"account_id":18496791,"reputation":57,"user_id":13475031,"display_name":"azizkale"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684824590,"creation_date":1684824590,"answer_id":76311972,"question_id":46196632,"body_markdown":"     {\r\n        assigned: true,\r\n        groupId: pir.groupId\r\n     }     \r\n\r\n the object above is added to the object in firebase db as update\r\n\r\n    const refff = admin.database().ref(`pirs/${pir.pirId}`);\r\n            return refff.update({\r\n                assigned: true,\r\n                groupId: pir.groupId\r\n            })\r\n                .then(() =&gt; {\r\n                    return { pir }\r\n                })\r\n                .catch((error) =&gt; {\r\n                    console.error(&quot;Error updating data:&quot;, error);\r\n                    return { errror: error }\r\n                });","title":"Firebase add a new node","body":"<pre><code> {\n    assigned: true,\n    groupId: pir.groupId\n }     \n</code></pre>\n<p>the object above is added to the object in firebase db as update</p>\n<pre><code>const refff = admin.database().ref(`pirs/${pir.pirId}`);\n        return refff.update({\n            assigned: true,\n            groupId: pir.groupId\n        })\n            .then(() =&gt; {\n                return { pir }\n            })\n            .catch((error) =&gt; {\n                console.error(&quot;Error updating data:&quot;, error);\n                return { errror: error }\n            });\n</code></pre>\n"}],"owner":{"account_id":11755026,"reputation":41,"user_id":8602995,"accept_rate":33,"display_name":"Ameni Kerkeni"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5958,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":46196667,"answer_count":2,"score":2,"last_activity_date":1684824590,"creation_date":1505302935,"question_id":46196632,"body_markdown":"![Capture of my database][1]\r\n\r\nHow to put these nodes inside a users node and make another one to store posts.\r\nMy database reference:\r\n\r\n    databaseReference.child(user.getUid()).setValue(userInformations);\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8vdlN.png","title":"Firebase add a new node","body":"<p><img src=\"https://i.stack.imgur.com/8vdlN.png\" alt=\"Capture of my database\"></p>\n\n<p>How to put these nodes inside a users node and make another one to store posts.\nMy database reference:</p>\n\n<pre><code>databaseReference.child(user.getUid()).setValue(userInformations);\n</code></pre>\n"},{"tags":["java","intellij-idea","web-applications","wildfly","remote-debugging"],"comments":[{"owner":{"account_id":4362282,"reputation":92954,"user_id":3558960,"accept_rate":60,"display_name":"Robby Cornelissen"},"score":0,"creation_date":1684824636,"post_id":76311932,"comment_id":134569264,"body_markdown":"https://www.jetbrains.com/help/idea/updating-applications-on-application-servers.html","body":"<a href=\"https://www.jetbrains.com/help/idea/updating-applications-on-application-servers.html\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/&hellip;</a>"},{"owner":{"account_id":1873956,"reputation":2761,"user_id":1695592,"accept_rate":58,"display_name":"Ronald"},"score":0,"creation_date":1684825750,"post_id":76311932,"comment_id":134569483,"body_markdown":"@RobbyCornelissen: I choosen Update classes and resources but it is not working. Even restarting the server do not help, I have to clean install on parent porject","body":"@RobbyCornelissen: I choosen Update classes and resources but it is not working. Even restarting the server do not help, I have to clean install on parent porject"}],"owner":{"account_id":1873956,"reputation":2761,"user_id":1695592,"accept_rate":58,"display_name":"Ronald"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1684824235,"creation_date":1684824235,"question_id":76311932,"body_markdown":"I am using Intellij with wildfly/jboss server and I have webapp consists of parent project and submodules. I would like to be able to see code changes in my java code in one of the submodules without having to clean install and restart. For that I have configured Remote JVM Debug as you can see in the screenshot. When I start the debugger, it stops at break points and I can debug step by step which is fine. \r\n[![enter image description here][1]][1]\r\nProblem: When I change the code like I change string variable value from a to b, this change has no affect. I have first to clean install the whole parent project and restart wildfly. Is it possible to get changes reflected without having to clean install and restart wilfly server like it is in eclipse? In eclipse I got this problem, when I forget to tick project-&gt; automatically build but I dont know how to fix this in intellij\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/34iiO.png","title":"Code changes in intellij have no affect while debugging. I have to clean install first and restart wildfly server","body":"<p>I am using Intellij with wildfly/jboss server and I have webapp consists of parent project and submodules. I would like to be able to see code changes in my java code in one of the submodules without having to clean install and restart. For that I have configured Remote JVM Debug as you can see in the screenshot. When I start the debugger, it stops at break points and I can debug step by step which is fine.\n<a href=\"https://i.stack.imgur.com/34iiO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/34iiO.png\" alt=\"enter image description here\" /></a>\nProblem: When I change the code like I change string variable value from a to b, this change has no affect. I have first to clean install the whole parent project and restart wildfly. Is it possible to get changes reflected without having to clean install and restart wilfly server like it is in eclipse? In eclipse I got this problem, when I forget to tick project-&gt; automatically build but I dont know how to fix this in intellij</p>\n"},{"tags":["java","docker","selenium-webdriver","bitbucket-pipelines"],"owner":{"account_id":14093375,"reputation":3,"user_id":10180974,"display_name":"Pranjal Saxena"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":316,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684824077,"creation_date":1684822384,"question_id":76311726,"body_markdown":"I want to run selenium script (Java, Maven &amp; Selenium) in bitbucket pipeline. For this I want to use a image [selenium/standalone-chrome](https://hub.docker.com/r/selenium/standalone-chrome) from docker hub. But I dont know how to configure my bitbucket-pipelines.yml for this. Currently I am using below yml file in my project and I am getting below error on bitbucket pipeline - \r\n\r\n**Error**\r\n\r\nCould not start a new session. Possible causes are invalid address of the remote server or browser start-up failure.\r\n\r\nBuild info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39;\r\n\r\nSystem info: host: &#39;2469e757-cd7e-46a6-815f-e4e651a95a17-5cdxg&#39;, ip: &#39;10.36.149.209&#39;, os.name: &#39;Linux&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;5.15.0-1035-aws&#39;, java.version: &#39;11.0.3&#39;\r\n\r\n**Bitbucket YAML file**\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    image: maven:3.6.0\r\n\r\n    pipelines:\r\n      default:\r\n        - parallel:\r\n            - step:\r\n                name: Build and Test\r\n                caches:\r\n                  - maven\r\n                script:\r\n                #  - mvn -B verify\r\n                  - ls -l /opt/atlassian/pipelines/agent/build/chromedriver_win32/\r\n                  - mvn test\r\n                after-script:\r\n                  # Collect checkstyle results, if any, and convert to Bitbucket Code Insights.\r\n                  - pipe: atlassian/checkstyle-report:0.3.0\r\n            - step:\r\n                name: Security Scan\r\n                script:\r\n                  # Run a security scan for sensitive data.\r\n                  # See more security tools at https://bitbucket.org/product/features/pipelines/integrations?&amp;category=security\r\n                  - pipe: atlassian/git-secrets-scan:0.5.1\r\n                    definitions:\r\n                      services:\r\n                        chrome:\r\n                          image: selenium/standalone-chrome\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LyUpK.png\r\n\r\n**Note**\r\n\r\nI am using selenium hub server(http://localhost:4444/wd/hub) to host the selenium/standalone-chrome container and its working fine when I am launching from my local. But giving above error when pipeline is running on bitbucket.","title":"How to configure the bitbucket pipeline YAML file to add the selenium chrome image (selenium/standalone-chrome)?","body":"<p>I want to run selenium script (Java, Maven &amp; Selenium) in bitbucket pipeline. For this I want to use a image <a href=\"https://hub.docker.com/r/selenium/standalone-chrome\" rel=\"nofollow noreferrer\">selenium/standalone-chrome</a> from docker hub. But I dont know how to configure my bitbucket-pipelines.yml for this. Currently I am using below yml file in my project and I am getting below error on bitbucket pipeline -</p>\n<p><strong>Error</strong></p>\n<p>Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure.</p>\n<p>Build info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:17:03'</p>\n<p>System info: host: '2469e757-cd7e-46a6-815f-e4e651a95a17-5cdxg', ip: '10.36.149.209', os.name: 'Linux', os.arch: 'amd64', os.version: '5.15.0-1035-aws', java.version: '11.0.3'</p>\n<p><strong>Bitbucket YAML file</strong>\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>image: maven:3.6.0\n\npipelines:\n  default:\n    - parallel:\n        - step:\n            name: Build and Test\n            caches:\n              - maven\n            script:\n            #  - mvn -B verify\n              - ls -l /opt/atlassian/pipelines/agent/build/chromedriver_win32/\n              - mvn test\n            after-script:\n              # Collect checkstyle results, if any, and convert to Bitbucket Code Insights.\n              - pipe: atlassian/checkstyle-report:0.3.0\n        - step:\n            name: Security Scan\n            script:\n              # Run a security scan for sensitive data.\n              # See more security tools at https://bitbucket.org/product/features/pipelines/integrations?&amp;category=security\n              - pipe: atlassian/git-secrets-scan:0.5.1\n                definitions:\n                  services:\n                    chrome:\n                      image: selenium/standalone-chrome</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p><strong>Note</strong></p>\n<p>I am using selenium hub server(http://localhost:4444/wd/hub) to host the selenium/standalone-chrome container and its working fine when I am launching from my local. But giving above error when pipeline is running on bitbucket.</p>\n"},{"tags":["java","spring","apache-httpclient-5.x"],"owner":{"account_id":28652283,"reputation":1,"user_id":21939038,"display_name":"ypn12"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684823220,"creation_date":1684742126,"question_id":76304061,"body_markdown":"I am currently migrating our project to the latest version of Spring. Since Spring 6 is using the new Apache HttpClient5, I am struggling to find any kind of replacement for the old removed methods from the `DefaultRedirectStrategy` class:\r\n\r\n`protected boolean isRedirectable(String method)`\r\n\r\n and \r\n\r\n`public HttpUriRequest getRedirect(final HttpRequest request, final HttpResponse response, final HttpContext context) throws ProtocolException `\r\n\r\n\r\n\r\nWith HttpClient4 these methods were used to make all request redirectable and reset streams if possible.\r\nI tried to search for any replacement or documentation about it, but unfortunately I could not find anything.\r\n\r\nI am happy for each answer :) ","title":"How to handle redirected request in Apache HttpClient5?","body":"<p>I am currently migrating our project to the latest version of Spring. Since Spring 6 is using the new Apache HttpClient5, I am struggling to find any kind of replacement for the old removed methods from the <code>DefaultRedirectStrategy</code> class:</p>\n<p><code>protected boolean isRedirectable(String method)</code></p>\n<p>and</p>\n<p><code>public HttpUriRequest getRedirect(final HttpRequest request, final HttpResponse response, final HttpContext context) throws ProtocolException </code></p>\n<p>With HttpClient4 these methods were used to make all request redirectable and reset streams if possible.\nI tried to search for any replacement or documentation about it, but unfortunately I could not find anything.</p>\n<p>I am happy for each answer :)</p>\n"},{"tags":["java","spring","testing","spring-security"],"answers":[{"tags":[],"owner":{"account_id":2258060,"reputation":3689,"user_id":1988798,"accept_rate":83,"display_name":"Gaurav"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1633326475,"creation_date":1633326475,"answer_id":69431396,"question_id":69431307,"body_markdown":"Please take a look [here](https://docs.spring.io/spring-security/site/docs/current/reference/html5/#test). Spring security comes with proper testing support. I have shared link for section dedicated to test support for Security.\r\n\r\nExample: \r\n\r\n    @Test\r\n    @WithMockUser(username=&quot;admin&quot;,roles={&quot;USER&quot;,&quot;ADMIN&quot;})\r\n    public void getMessageWithMockUserCustomUser() {\r\n        String message = messageService.getMessage();\r\n        ...\r\n    }\r\n\r\nThis is how you apply test annotations on a class.\r\n\r\n\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @ContextConfiguration\r\n    @WithMockUser(username=&quot;admin&quot;,roles={&quot;USER&quot;,&quot;ADMIN&quot;})\r\n    public class WithMockUserTests {\r\n    }","title":"How to test secured end-points in Spring application using JUnit?","body":"<p>Please take a look <a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/html5/#test\" rel=\"nofollow noreferrer\">here</a>. Spring security comes with proper testing support. I have shared link for section dedicated to test support for Security.</p>\n<p>Example:</p>\n<pre><code>@Test\n@WithMockUser(username=&quot;admin&quot;,roles={&quot;USER&quot;,&quot;ADMIN&quot;})\npublic void getMessageWithMockUserCustomUser() {\n    String message = messageService.getMessage();\n    ...\n}\n</code></pre>\n<p>This is how you apply test annotations on a class.</p>\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration\n@WithMockUser(username=&quot;admin&quot;,roles={&quot;USER&quot;,&quot;ADMIN&quot;})\npublic class WithMockUserTests {\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15841746,"reputation":6011,"user_id":11430047,"display_name":"Eleftheria Stein-Kousathana"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633604258,"creation_date":1633604258,"answer_id":69479921,"question_id":69431307,"body_markdown":"In the security configuration you have specified that any endpoints that match `&quot;/user/**&quot;` must have the authority &quot;VT&quot;, &quot;Admin&quot;, &quot;User&quot; or &quot;Developer&quot;.\r\n```java\r\n.mvcMatchers(&quot;/user/**&quot;).hasAnyAuthority(VT_SCOPE, ADMIN_SCOPE, USER_SCOPE, DEVELOPER_SCOPE)\r\n```\r\n\r\nHowever, in the test, the request is made with a user that has the authorities &quot;VT_SCOPE&quot;, &quot;ADMIN_SCOPE&quot;, &quot;USER_SCOPE&quot; and &quot;DEVELOPER_SCOPE&quot;.   \r\nNone of these authorities match the required authorities, which is why you see a 403 response.\r\n\r\nNote that you can more robustly test JWT authentication, using the built-in [`jwt()` RequestPostProcessor](https://docs.spring.io/spring-security/site/docs/current/reference/html5/#testing-jwt). \r\n\r\n```java\r\nmvc\r\n    .perform(post(&quot;/user/forum/add&quot;)\r\n        .with(jwt().authorities(new SimpleGrantedAuthority(&quot;SCOPE_example&quot;))));\r\n```\r\n\r\nYou can find extensive details and examples in the Spring Security [reference documentation](https://docs.spring.io/spring-security/site/docs/current/reference/html5/#testing-jwt). ","title":"How to test secured end-points in Spring application using JUnit?","body":"<p>In the security configuration you have specified that any endpoints that match <code>&quot;/user/**&quot;</code> must have the authority &quot;VT&quot;, &quot;Admin&quot;, &quot;User&quot; or &quot;Developer&quot;.</p>\n<pre class=\"lang-java prettyprint-override\"><code>.mvcMatchers(&quot;/user/**&quot;).hasAnyAuthority(VT_SCOPE, ADMIN_SCOPE, USER_SCOPE, DEVELOPER_SCOPE)\n</code></pre>\n<p>However, in the test, the request is made with a user that has the authorities &quot;VT_SCOPE&quot;, &quot;ADMIN_SCOPE&quot;, &quot;USER_SCOPE&quot; and &quot;DEVELOPER_SCOPE&quot;.<br />\nNone of these authorities match the required authorities, which is why you see a 403 response.</p>\n<p>Note that you can more robustly test JWT authentication, using the built-in <a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/html5/#testing-jwt\" rel=\"nofollow noreferrer\"><code>jwt()</code> RequestPostProcessor</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>mvc\n    .perform(post(&quot;/user/forum/add&quot;)\n        .with(jwt().authorities(new SimpleGrantedAuthority(&quot;SCOPE_example&quot;))));\n</code></pre>\n<p>You can find extensive details and examples in the Spring Security <a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/html5/#testing-jwt\" rel=\"nofollow noreferrer\">reference documentation</a>.</p>\n"},{"tags":[],"owner":{"account_id":28659948,"reputation":1,"user_id":21945074,"display_name":"DavitAM"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684822282,"creation_date":1684822282,"answer_id":76311712,"question_id":69431307,"body_markdown":"For me I had to do \r\n\r\n    with(SecurityMockMvcRequestPostProcessors.jwt().authorities(new SimpleGrantedAuthority(&quot;ADMIN&quot;))))\r\n\r\nhope this helps you!","title":"How to test secured end-points in Spring application using JUnit?","body":"<p>For me I had to do</p>\n<pre><code>with(SecurityMockMvcRequestPostProcessors.jwt().authorities(new SimpleGrantedAuthority(&quot;ADMIN&quot;))))\n</code></pre>\n<p>hope this helps you!</p>\n"}],"owner":{"account_id":16437243,"reputation":377,"user_id":11874530,"display_name":"Sugata Kar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":781,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1684822282,"creation_date":1633325775,"question_id":69431307,"body_markdown":"I am using JWT based authentication in my Spring project and I was trying to write JUnit Test cases for the secured end-points though I am not able to test it and getting\r\n\r\n**org.opentest4j.AssertionFailedError:\r\nExpected :201\r\nActual :403**\r\n\r\n\r\nMy Security Config file is :\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity(debug = true)\r\n@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true, jsr250Enabled = true)\r\npublic class ScopeMapping extends WebSecurityConfigurerAdapter {\r\n    @Autowired\r\n    XsuaaServiceConfiguration xsuaaServiceConfiguration;\r\n    private static final String VT_SCOPE = &quot;VT&quot;;\r\n    private static final String DEVELOPER_SCOPE = &quot;Developer&quot;;\r\n    private static final String USER_SCOPE = &quot;User&quot;;\r\n    private static final String ADMIN_SCOPE = &quot;Admin&quot;;\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.csrf().disable();\r\n        http\r\n                .headers()\r\n                .contentSecurityPolicy(&quot;script-src &#39;self&#39; https://trustedscripts.example.com; object-src https://trustedplugins.example.com; report-uri /csp-report-endpoint/&quot;);\r\n        http\r\n                .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                .and()\r\n                .authorizeRequests()\r\n                .mvcMatchers(HttpMethod.GET,&quot;/health&quot;).permitAll()\r\n                .mvcMatchers(&quot;/v2/api-docs/**&quot;, &quot;/swagger-ui.html&quot;, &quot;/swagger-ui/**&quot;, &quot;/swagger-resources/**&quot;).permitAll()\r\n                .mvcMatchers(&quot;/v1/**&quot;).hasAuthority(VT_SCOPE)\r\n                .mvcMatchers(&quot;/v2/**&quot;).permitAll()\r\n                .mvcMatchers(&quot;/user/**&quot;).hasAnyAuthority(VT_SCOPE, ADMIN_SCOPE, USER_SCOPE, DEVELOPER_SCOPE)\r\n                .mvcMatchers(&quot;/admin/**&quot;).hasAnyAuthority(VT_SCOPE, ADMIN_SCOPE, DEVELOPER_SCOPE)\r\n                .mvcMatchers(&quot;/vt/**&quot;).hasAnyAuthority(VT_SCOPE, DEVELOPER_SCOPE)\r\n                .anyRequest().denyAll()\r\n                .and()\r\n                .oauth2ResourceServer()\r\n                .jwt()\r\n                .jwtAuthenticationConverter(getJwtAuthenticationConverter());\r\n    }\r\n    Converter&lt;Jwt, AbstractAuthenticationToken&gt; getJwtAuthenticationConverter() {\r\n        TokenAuthenticationConverter converter = new TokenAuthenticationConverter(xsuaaServiceConfiguration);\r\n        converter.setLocalScopeAsAuthorities(true);\r\n        return converter;\r\n    }\r\n}\r\n```\r\n\r\n**Test-case**\r\n```\r\n@WithUserDetails(value=&quot;ram&quot;,userDetailsServiceBeanName = &quot;secureBean&quot;)\r\n    public void addForumTest() throws Exception {\r\n        //  ForumQuery forumQuery = new ForumQuery(&quot;1&quot;,&quot;Query 1&quot;,&quot;Query 1 Desc&quot;,&quot;1&quot;,currentTime,replies,forumLikes);\r\n        ForumQueryDto forumQueryDto = new ForumQueryDto(&quot;1&quot;,&quot;Query 1&quot;,&quot;Query 1 Desc&quot;,userDto,currentTime,repliesDto);\r\n        Mockito.when(forumService.insertQuery(Mockito.any(ForumQueryDto.class))).thenReturn(forumQueryDto);\r\n        MvcResult result = mockMvc.perform(MockMvcRequestBuilders.post(&quot;/user/forum/add&quot;)\r\n                .contentType(&quot;application/json&quot;)\r\n//                .header(HttpHeaders.AUTHORIZATION,&lt;JWT-TOKEN&gt;)\r\n                .content(objectMapper.writeValueAsString(forumQueryDto)))\r\n                .andReturn();\r\n        MockHttpServletResponse response = result.getResponse();\r\n        assertEquals(HttpStatus.CREATED.value(), response.getStatus());\r\n    }\r\n```\r\n**Custom-Bean**\r\n```\r\n@Bean(&quot;secureBean&quot;)\r\n    public UserDetailsService userDetailsService() {\r\n        GrantedAuthority authority = new SimpleGrantedAuthority(&quot;VT_SCOPE&quot;);\r\n        GrantedAuthority authority1 = new SimpleGrantedAuthority(&quot;ADMIN_SCOPE&quot;);\r\n        GrantedAuthority authority2 = new SimpleGrantedAuthority(&quot;USER_SCOPE&quot;);\r\n        GrantedAuthority authority3 = new SimpleGrantedAuthority(&quot;DEVELOPER_SCOPE&quot;);\r\n        UserDetails userDetails = (UserDetails) new User(&quot;ram&quot;, &quot;ram123&quot;, Arrays.asList(authority\r\n                , authority1, authority2, authority3));\r\n        return new InMemoryUserDetailsManager(Arrays.asList(userDetails));\r\n    }\r\n```","title":"How to test secured end-points in Spring application using JUnit?","body":"<p>I am using JWT based authentication in my Spring project and I was trying to write JUnit Test cases for the secured end-points though I am not able to test it and getting</p>\n<p><strong>org.opentest4j.AssertionFailedError:\nExpected :201\nActual :403</strong></p>\n<p>My Security Config file is :</p>\n<pre><code>@Configuration\n@EnableWebSecurity(debug = true)\n@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true, jsr250Enabled = true)\npublic class ScopeMapping extends WebSecurityConfigurerAdapter {\n    @Autowired\n    XsuaaServiceConfiguration xsuaaServiceConfiguration;\n    private static final String VT_SCOPE = &quot;VT&quot;;\n    private static final String DEVELOPER_SCOPE = &quot;Developer&quot;;\n    private static final String USER_SCOPE = &quot;User&quot;;\n    private static final String ADMIN_SCOPE = &quot;Admin&quot;;\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.csrf().disable();\n        http\n                .headers()\n                .contentSecurityPolicy(&quot;script-src 'self' https://trustedscripts.example.com; object-src https://trustedplugins.example.com; report-uri /csp-report-endpoint/&quot;);\n        http\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .authorizeRequests()\n                .mvcMatchers(HttpMethod.GET,&quot;/health&quot;).permitAll()\n                .mvcMatchers(&quot;/v2/api-docs/**&quot;, &quot;/swagger-ui.html&quot;, &quot;/swagger-ui/**&quot;, &quot;/swagger-resources/**&quot;).permitAll()\n                .mvcMatchers(&quot;/v1/**&quot;).hasAuthority(VT_SCOPE)\n                .mvcMatchers(&quot;/v2/**&quot;).permitAll()\n                .mvcMatchers(&quot;/user/**&quot;).hasAnyAuthority(VT_SCOPE, ADMIN_SCOPE, USER_SCOPE, DEVELOPER_SCOPE)\n                .mvcMatchers(&quot;/admin/**&quot;).hasAnyAuthority(VT_SCOPE, ADMIN_SCOPE, DEVELOPER_SCOPE)\n                .mvcMatchers(&quot;/vt/**&quot;).hasAnyAuthority(VT_SCOPE, DEVELOPER_SCOPE)\n                .anyRequest().denyAll()\n                .and()\n                .oauth2ResourceServer()\n                .jwt()\n                .jwtAuthenticationConverter(getJwtAuthenticationConverter());\n    }\n    Converter&lt;Jwt, AbstractAuthenticationToken&gt; getJwtAuthenticationConverter() {\n        TokenAuthenticationConverter converter = new TokenAuthenticationConverter(xsuaaServiceConfiguration);\n        converter.setLocalScopeAsAuthorities(true);\n        return converter;\n    }\n}\n</code></pre>\n<p><strong>Test-case</strong></p>\n<pre><code>@WithUserDetails(value=&quot;ram&quot;,userDetailsServiceBeanName = &quot;secureBean&quot;)\n    public void addForumTest() throws Exception {\n        //  ForumQuery forumQuery = new ForumQuery(&quot;1&quot;,&quot;Query 1&quot;,&quot;Query 1 Desc&quot;,&quot;1&quot;,currentTime,replies,forumLikes);\n        ForumQueryDto forumQueryDto = new ForumQueryDto(&quot;1&quot;,&quot;Query 1&quot;,&quot;Query 1 Desc&quot;,userDto,currentTime,repliesDto);\n        Mockito.when(forumService.insertQuery(Mockito.any(ForumQueryDto.class))).thenReturn(forumQueryDto);\n        MvcResult result = mockMvc.perform(MockMvcRequestBuilders.post(&quot;/user/forum/add&quot;)\n                .contentType(&quot;application/json&quot;)\n//                .header(HttpHeaders.AUTHORIZATION,&lt;JWT-TOKEN&gt;)\n                .content(objectMapper.writeValueAsString(forumQueryDto)))\n                .andReturn();\n        MockHttpServletResponse response = result.getResponse();\n        assertEquals(HttpStatus.CREATED.value(), response.getStatus());\n    }\n</code></pre>\n<p><strong>Custom-Bean</strong></p>\n<pre><code>@Bean(&quot;secureBean&quot;)\n    public UserDetailsService userDetailsService() {\n        GrantedAuthority authority = new SimpleGrantedAuthority(&quot;VT_SCOPE&quot;);\n        GrantedAuthority authority1 = new SimpleGrantedAuthority(&quot;ADMIN_SCOPE&quot;);\n        GrantedAuthority authority2 = new SimpleGrantedAuthority(&quot;USER_SCOPE&quot;);\n        GrantedAuthority authority3 = new SimpleGrantedAuthority(&quot;DEVELOPER_SCOPE&quot;);\n        UserDetails userDetails = (UserDetails) new User(&quot;ram&quot;, &quot;ram123&quot;, Arrays.asList(authority\n                , authority1, authority2, authority3));\n        return new InMemoryUserDetailsManager(Arrays.asList(userDetails));\n    }\n</code></pre>\n"},{"tags":["java","hibernate"],"comments":[{"owner":{"account_id":13696,"reputation":17521,"user_id":27657,"accept_rate":65,"display_name":"javamonkey79"},"score":0,"creation_date":1291427739,"post_id":4351443,"comment_id":4733837,"body_markdown":"Possible duplicate: http://stackoverflow.com/questions/821466/how-can-i-get-the-database-name-i-am-connected-to-through-hibernate","body":"Possible duplicate: <a href=\"http://stackoverflow.com/questions/821466/how-can-i-get-the-database-name-i-am-connected-to-through-hibernate\" title=\"how can i get the database name i am connected to through hibernate\">stackoverflow.com/questions/821466/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":238298,"reputation":13730,"user_id":507099,"display_name":"Costis Aivalis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1291427496,"creation_date":1291427496,"answer_id":4351499,"question_id":4351443,"body_markdown":"Since you have either a hibernate.properties or a hibernate.cfg.xml, you can allways read any information off these files.","title":"How to know underlying database name from hibernate provider","body":"<p>Since you have either a hibernate.properties or a hibernate.cfg.xml, you can allways read any information off these files.</p>\n"},{"tags":[],"owner":{"account_id":13696,"reputation":17521,"user_id":27657,"accept_rate":65,"display_name":"javamonkey79"},"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1291427695,"creation_date":1291427695,"answer_id":4351514,"question_id":4351443,"body_markdown":"I think you can do it this way:\r\n\r\n    sessionFactory.getCurrentSession().connection().getMetaData().getURL()","title":"How to know underlying database name from hibernate provider","body":"<p>I think you can do it this way:</p>\n\n<pre><code>sessionFactory.getCurrentSession().connection().getMetaData().getURL()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":252201,"reputation":221,"user_id":530081,"display_name":"user530081"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1416998889,"creation_date":1291531424,"answer_id":4357715,"question_id":4351443,"body_markdown":"Thanks very much javamonkey79 and costis for responding to this question.\r\n\r\nYes - I can read the hibernate.properties/cfg.xml file - but I wanted to avoid the file reading workflow.\r\n\r\nIt appears that `Session::connection()` api is deprecated now, but it still works.\r\nWe also can retrieve the same info in another way as listed below.\r\n\r\nOPTION 1\r\n=========\r\n\r\n    Session session = sessionFactory.openSession();\r\n    String dbURL = session.connection().getMetaData().getURL().toString();\r\n    session.close();\r\n\r\nOPTION 2\r\n=========\r\n\r\n    Settings settings = ((SessionFactoryImpl) sessionFactory).getSettings();\r\n    if (settings != null) {\r\n        Connection connection = settings.getConnectionProvider().getConnection();\r\n        String dbURL  = connection.getMetaData().getURL();\r\n        connection.close();\r\n    }\r\n\r\nFor MySql, the return URL will be in form of:\r\n\r\n    jdbc:mysql://localhost:3306/edm?useUnicode=true","title":"How to know underlying database name from hibernate provider","body":"<p>Thanks very much javamonkey79 and costis for responding to this question.</p>\n\n<p>Yes - I can read the hibernate.properties/cfg.xml file - but I wanted to avoid the file reading workflow.</p>\n\n<p>It appears that <code>Session::connection()</code> api is deprecated now, but it still works.\nWe also can retrieve the same info in another way as listed below.</p>\n\n<h1>OPTION 1</h1>\n\n<pre><code>Session session = sessionFactory.openSession();\nString dbURL = session.connection().getMetaData().getURL().toString();\nsession.close();\n</code></pre>\n\n<h1>OPTION 2</h1>\n\n<pre><code>Settings settings = ((SessionFactoryImpl) sessionFactory).getSettings();\nif (settings != null) {\n    Connection connection = settings.getConnectionProvider().getConnection();\n    String dbURL  = connection.getMetaData().getURL();\n    connection.close();\n}\n</code></pre>\n\n<p>For MySql, the return URL will be in form of:</p>\n\n<pre><code>jdbc:mysql://localhost:3306/edm?useUnicode=true\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user321068"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1319532237,"creation_date":1319532237,"answer_id":7886773,"question_id":4351443,"body_markdown":"    sessionFactory.getDialect();\r\n\r\ngives you the `Dialect` and  \r\n\r\n    sessionFactory.getSettings().getConnectionProvider().getConnection().getMetaData().getURL();\r\n\r\nprovides you the connection url.\r\n\r\n**Note**: This only works with the `SessionFactoryImpl` class, not with the interface","title":"How to know underlying database name from hibernate provider","body":"<pre><code>sessionFactory.getDialect();\n</code></pre>\n\n<p>gives you the <code>Dialect</code> and  </p>\n\n<pre><code>sessionFactory.getSettings().getConnectionProvider().getConnection().getMetaData().getURL();\n</code></pre>\n\n<p>provides you the connection url.</p>\n\n<p><strong>Note</strong>: This only works with the <code>SessionFactoryImpl</code> class, not with the interface</p>\n"},{"tags":[],"owner":{"account_id":1149482,"reputation":1382,"user_id":1131491,"accept_rate":64,"display_name":"louis xie"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1327039286,"creation_date":1327039286,"answer_id":8937361,"question_id":4351443,"body_markdown":"Or you can try:\r\n\r\n    SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();\r\n    SessionFactoryImpl sessionFactoryImpl = (SessionFactoryImpl) sessionFactory;\r\n    Properties props = sessionFactoryImpl.getProperties();\r\n    String url = props.get(&quot;hibernate.connection.url&quot;).toString();\r\n    String[] urlArray = url.split(&quot;:&quot;);\r\n    String db_name = urlArray[urlArray.length - 1];","title":"How to know underlying database name from hibernate provider","body":"<p>Or you can try:</p>\n\n<pre><code>SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();\nSessionFactoryImpl sessionFactoryImpl = (SessionFactoryImpl) sessionFactory;\nProperties props = sessionFactoryImpl.getProperties();\nString url = props.get(\"hibernate.connection.url\").toString();\nString[] urlArray = url.split(\":\");\nString db_name = urlArray[urlArray.length - 1];\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1370392,"reputation":1080,"user_id":1305764,"accept_rate":100,"display_name":"Vito"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1383889855,"creation_date":1383889855,"answer_id":19852479,"question_id":4351443,"body_markdown":"and you can try this code: \r\n\r\n\r\n    String url = null;\r\n    try {\r\n    \turl = getSession().connection().getMetaData().getURL().toString();\r\n    } catch (HibernateException e) {\r\n    \te.printStackTrace();\r\n    } catch (SQLException e) {\r\n    \te.printStackTrace();\r\n    }\r\n    String[] urlArray = url.split(&quot;:&quot;);\r\n    String db_name = urlArray[1];\r\n\r\n\r\n\r\n;)","title":"How to know underlying database name from hibernate provider","body":"<p>and you can try this code: </p>\n\n<pre><code>String url = null;\ntry {\n    url = getSession().connection().getMetaData().getURL().toString();\n} catch (HibernateException e) {\n    e.printStackTrace();\n} catch (SQLException e) {\n    e.printStackTrace();\n}\nString[] urlArray = url.split(\":\");\nString db_name = urlArray[1];\n</code></pre>\n\n<p>;)</p>\n"},{"tags":[],"owner":{"account_id":2773242,"reputation":1056,"user_id":2387391,"accept_rate":57,"display_name":"Eagle_Eye"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1533722765,"creation_date":1533722765,"answer_id":51743968,"question_id":4351443,"body_markdown":"For Hibernate 5.2.0, to get the datasource..\r\n\r\n    SessionFactoryImplementor entityManagerFactory = (SessionFactoryImplementor) sessionFactory.openSession().getEntityManagerFactory();\r\n    DatasourceConnectionProviderImpl connectionProvider = (DatasourceConnectionProviderImpl) entityManagerFactory.getServiceRegistry().getService(ConnectionProvider.class);\r\n    BasicDataSource dataSource = (BasicDataSource) connectionProvider.getDataSource();\r\n    dataSource.getUrl();","title":"How to know underlying database name from hibernate provider","body":"<p>For Hibernate 5.2.0, to get the datasource..</p>\n\n<pre><code>SessionFactoryImplementor entityManagerFactory = (SessionFactoryImplementor) sessionFactory.openSession().getEntityManagerFactory();\nDatasourceConnectionProviderImpl connectionProvider = (DatasourceConnectionProviderImpl) entityManagerFactory.getServiceRegistry().getService(ConnectionProvider.class);\nBasicDataSource dataSource = (BasicDataSource) connectionProvider.getDataSource();\ndataSource.getUrl();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17142060,"reputation":31,"user_id":12405838,"display_name":"renuka28"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1592260372,"creation_date":1592260372,"answer_id":62398065,"question_id":4351443,"body_markdown":"Easiest way is to get the currently configured properties and then get your db URL using key &quot;hibernate.connection.url&quot;. The following code prints current session url\r\n\r\n    System.out.println(sessionFactory.getProperties().get(&quot;hibernate.connection.url&quot;))\r\n\r\non my system I get\r\n\r\n    jdbc:postgresql://localhost:15432/tempdb\r\n\r\n","title":"How to know underlying database name from hibernate provider","body":"<p>Easiest way is to get the currently configured properties and then get your db URL using key \"hibernate.connection.url\". The following code prints current session url</p>\n\n<pre><code>System.out.println(sessionFactory.getProperties().get(\"hibernate.connection.url\"))\n</code></pre>\n\n<p>on my system I get</p>\n\n<pre><code>jdbc:postgresql://localhost:15432/tempdb\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2589411,"reputation":435,"user_id":2244431,"display_name":"phray2002"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1616027146,"creation_date":1616027146,"answer_id":66683138,"question_id":4351443,"body_markdown":"You can inspect it in variable view in IntelliJ as below\r\n\r\n[![Screenshot][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DRJ6t.png","title":"How to know underlying database name from hibernate provider","body":"<p>You can inspect it in variable view in IntelliJ as below</p>\n<p><a href=\"https://i.stack.imgur.com/DRJ6t.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DRJ6t.png\" alt=\"Screenshot\" /></a></p>\n"},{"tags":[],"owner":{"account_id":13386693,"reputation":1,"user_id":9660343,"display_name":"Ricardo Dias"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626822176,"creation_date":1626822176,"answer_id":68462273,"question_id":4351443,"body_markdown":"this worked for me:\r\n```\r\nDataSource dataSource = (DataSource)entityManagerFactory.getProperties()\r\n.get(&quot;hibernate.connection.datasource&quot;);\r\n\r\nConnection connection = dataSource.getConnection();\r\nString databaseName = connection.getCatalog();\t\r\n```","title":"How to know underlying database name from hibernate provider","body":"<p>this worked for me:</p>\n<pre><code>DataSource dataSource = (DataSource)entityManagerFactory.getProperties()\n.get(&quot;hibernate.connection.datasource&quot;);\n\nConnection connection = dataSource.getConnection();\nString databaseName = connection.getCatalog();  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":285638,"reputation":10283,"user_id":584420,"accept_rate":60,"display_name":"James Jithin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684822009,"creation_date":1684822009,"answer_id":76311687,"question_id":4351443,"body_markdown":"With Hibernate5 and C3P0 managed connection pool, the following returned me the JDBC URL:\r\n\r\n        ((DriverManagerDataSource) \r\n                ((WrapperConnectionPoolDataSource) \r\n                ((ComboPooledDataSource) hibernateTemplate.getSessionFactory().getProperties()\r\n                        .get(&quot;hibernate.connection.datasource&quot;))\r\n                .getConnectionPoolDataSource())\r\n                .getNestedDataSource()).getJdbcUrl();","title":"How to know underlying database name from hibernate provider","body":"<p>With Hibernate5 and C3P0 managed connection pool, the following returned me the JDBC URL:</p>\n<pre><code>    ((DriverManagerDataSource) \n            ((WrapperConnectionPoolDataSource) \n            ((ComboPooledDataSource) hibernateTemplate.getSessionFactory().getProperties()\n                    .get(&quot;hibernate.connection.datasource&quot;))\n            .getConnectionPoolDataSource())\n            .getNestedDataSource()).getJdbcUrl();\n</code></pre>\n"}],"owner":{"account_id":252201,"reputation":221,"user_id":530081,"display_name":"user530081"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25432,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"answer_count":11,"score":14,"last_activity_date":1684822009,"creation_date":1291426658,"question_id":4351443,"body_markdown":"I am using hibernate 3.x with Jboss.\r\nCurrently we support multiple databases.\r\n\r\nNow in runtime, how can I know the underlying database information ? at least name or database-dialect? (e.g. MySQL, Derby, Oracle, etc)?\r\n\r\nCan any one suggests any way to find this information?\r\nI thought hibernate SessionFactory class will provide such api - but it is not?\r\n\r\nThanks in advance, ","title":"How to know underlying database name from hibernate provider","body":"<p>I am using hibernate 3.x with Jboss.\nCurrently we support multiple databases.</p>\n\n<p>Now in runtime, how can I know the underlying database information ? at least name or database-dialect? (e.g. MySQL, Derby, Oracle, etc)?</p>\n\n<p>Can any one suggests any way to find this information?\nI thought hibernate SessionFactory class will provide such api - but it is not?</p>\n\n<p>Thanks in advance, </p>\n"},{"tags":["javascript","java","regex","regex-group","regex-lookarounds"],"comments":[{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":1,"creation_date":1683090187,"post_id":76160558,"comment_id":134311259,"body_markdown":"could you enumerate what is the input string, what is the expected behaviour and what is the expected output? also format the code","body":"could you enumerate what is the input string, what is the expected behaviour and what is the expected output? also format the code"},{"owner":{"account_id":28489718,"reputation":11,"user_id":21802533,"display_name":"javacoder"},"score":0,"creation_date":1683093721,"post_id":76160558,"comment_id":134311713,"body_markdown":"We need to assign payment for EB6764589 even if theres a space after 5. Currently above regex is only accepting space after EB and not b/w digits. I need to make regex accept space in b/w digits. @Gast&#243;nSchabas","body":"We need to assign payment for EB6764589 even if theres a space after 5. Currently above regex is only accepting space after EB and not b/w digits. I need to make regex accept space in b/w digits. @Gast&#243;nSchabas"},{"owner":{"account_id":6426510,"reputation":17091,"user_id":5527985,"display_name":"bobble bubble"},"score":0,"creation_date":1683103715,"post_id":76160558,"comment_id":134313742,"body_markdown":"You mention *Using `value.replaceAll(&quot;\\s&quot;,&quot;&quot;);` in code*. Does this work? I guess the syntax would be `value.replaceAll(new RegExp(&quot;\\\\s+&quot;,&quot;g&quot;), &#39;&#39;)` but `value.replace(/\\s+/g, &quot;&quot;)` is shorter and does the same. You can combine it with `match` and [capture](https://www.regular-expressions.info/brackets.html) 7 digits like this demo at tio.run: [`value.replace(/\\s+/g,&quot;&quot;).match(/EB(\\d{7})/)[1]`](https://tio.run/##y0osSyxOLsosKNEts/j/Pye1RKEsMac0VcFWQd3VScHM3MzEVMHCUp2LKzk/rzg/J1UvJz9dA6xEryi1ICcxOVVDP6ZYWz9dR0lJUy83sSQ5Q0Pf1UkjJqXavFZTXzPaMFbz/38A)","body":"You mention <i>Using <code>value.replaceAll(&quot;\\s&quot;,&quot;&quot;);</code> in code</i>. Does this work? I guess the syntax would be <code>value.replaceAll(new RegExp(&quot;\\\\s+&quot;,&quot;g&quot;), &#39;&#39;)</code> but <code>value.replace(&#47;\\s+&#47;g, &quot;&quot;)</code> is shorter and does the same. You can combine it with <code>match</code> and <a href=\"https://www.regular-expressions.info/brackets.html\" rel=\"nofollow noreferrer\">capture</a> 7 digits like this demo at tio.run: <a href=\"https://tio.run/##y0osSyxOLsosKNEts/j/Pye1RKEsMac0VcFWQd3VScHM3MzEVMHCUp2LKzk/rzg/J1UvJz9dA6xEryi1ICcxOVVDP6ZYWz9dR0lJUy83sSQ5Q0Pf1UkjJqXavFZTXzPaMFbz/38A\" rel=\"nofollow noreferrer\"><code>value.replace(&#47;\\s+&#47;g,&quot;&quot;).match(&#47;EB(\\d{7})&#47;)[1]</code></a>"}],"answers":[{"tags":[],"owner":{"account_id":10662643,"reputation":689,"user_id":7899567,"display_name":"Anton Tokmakov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683096913,"creation_date":1683095242,"answer_id":76160988,"question_id":76160558,"body_markdown":"You can try this regex, it should help to solve your problem:\r\n \r\n\r\n    (.*)(EB)\\s*(\\d\\s*){7}\r\n\r\nBy the way you can use regex101 to play with regex, it&#39;s very useful environment when you&#39;re working with regexps.","title":"Regex is not accepting space in between digits","body":"<p>You can try this regex, it should help to solve your problem:</p>\n<pre><code>(.*)(EB)\\s*(\\d\\s*){7}\n</code></pre>\n<p>By the way you can use regex101 to play with regex, it's very useful environment when you're working with regexps.</p>\n"},{"tags":[],"owner":{"account_id":7089168,"reputation":157110,"user_id":5424988,"display_name":"The fourth bird"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683100723,"creation_date":1683100723,"answer_id":76161625,"question_id":76160558,"body_markdown":"To match the example string you don&#39;t need the capture groups, you can match 7 times a digit preceded by optional whitespace chars (note that it can also match newlines).\r\n\r\nThen you can remove the whitespace chars from this match using replaceAll:\r\n\r\n    \\bEB(?:\\s*\\d){7}\\b\r\n\r\nIn Java\r\n\r\n    String regex = &quot;\\\\bEB(?:\\\\s*\\\\d){7}\\\\b&quot;;\r\n\r\n[Regex demo](https://regex101.com/r/ULfRL6/1)","title":"Regex is not accepting space in between digits","body":"<p>To match the example string you don't need the capture groups, you can match 7 times a digit preceded by optional whitespace chars (note that it can also match newlines).</p>\n<p>Then you can remove the whitespace chars from this match using replaceAll:</p>\n<pre><code>\\bEB(?:\\s*\\d){7}\\b\n</code></pre>\n<p>In Java</p>\n<pre><code>String regex = &quot;\\\\bEB(?:\\\\s*\\\\d){7}\\\\b&quot;;\n</code></pre>\n<p><a href=\"https://regex101.com/r/ULfRL6/1\" rel=\"nofollow noreferrer\">Regex demo</a></p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684821237,"creation_date":1684821237,"answer_id":76311633,"question_id":76160558,"body_markdown":"If the space will only ever appear after the 5th digit, then the following pattern will work.\r\n\r\n```none\r\nEB\\s(?:\\d{7}|\\d{5}\\s\\d\\d)\r\n```\r\n\r\nYou can use a literal space, also.\r\n\r\n```none\r\nEB (?:\\d{7}|\\d{5} \\d\\d)\r\n```","title":"Regex is not accepting space in between digits","body":"<p>If the space will only ever appear after the 5th digit, then the following pattern will work.</p>\n<pre class=\"lang-none prettyprint-override\"><code>EB\\s(?:\\d{7}|\\d{5}\\s\\d\\d)\n</code></pre>\n<p>You can use a literal space, also.</p>\n<pre class=\"lang-none prettyprint-override\"><code>EB (?:\\d{7}|\\d{5} \\d\\d)\n</code></pre>\n"}],"owner":{"account_id":28489718,"reputation":11,"user_id":21802533,"display_name":"javacoder"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1684821237,"creation_date":1683089943,"question_id":76160558,"body_markdown":"Using this regex: `(.*)(EB([\\s]{0,})[0-9]{7})` to remove white spaces and able to read 7 digits after `EB` but its not accepting space between digits.\r\n\r\nCurrently it&#39;s passing value with space after `EB` and not accepting space in b/w 7 digits.\r\n\r\nInput string: `EB 67645 89`\r\n\r\nUsing `value.replaceAll(&quot;\\s&quot;,&quot;&quot;);` in code.","title":"Regex is not accepting space in between digits","body":"<p>Using this regex: <code>(.*)(EB([\\s]{0,})[0-9]{7})</code> to remove white spaces and able to read 7 digits after <code>EB</code> but its not accepting space between digits.</p>\n<p>Currently it's passing value with space after <code>EB</code> and not accepting space in b/w 7 digits.</p>\n<p>Input string: <code>EB 67645 89</code></p>\n<p>Using <code>value.replaceAll(&quot;\\s&quot;,&quot;&quot;);</code> in code.</p>\n"},{"tags":["java","inner-classes"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":2,"creation_date":1684772628,"post_id":76308110,"comment_id":134562332,"body_markdown":"Everything here that I can see is within the context of an enclosing class.  They all have access to each other&#39;s `private` fields and methods, that&#39;s just how it works.  There&#39;s no difference between accessing a private field from `ListPool` or from `MyLinkedList`.  It&#39;s all &quot;one class&quot; so you have access to all private members.","body":"Everything here that I can see is within the context of an enclosing class.  They all have access to each other&#39;s <code>private</code> fields and methods, that&#39;s just how it works.  There&#39;s no difference between accessing a private field from <code>ListPool</code> or from <code>MyLinkedList</code>.  It&#39;s all &quot;one class&quot; so you have access to all private members."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1684773006,"post_id":76308110,"comment_id":134562411,"body_markdown":"Java Language Specification [6.6.1. Determining Accessibility](https://docs.oracle.com/javase/specs/jls/se20/html/jls-6.html#jls-6.6.1-100-D-D-A): &quot;*A member (...) of a class, ..., is accessible only if (i) the class, ... is accessible, and (ii) the member or constructor is declared to permit access: ..., the member or constructor is declared private. Access is permitted only when one of the following is true:  Access occurs from within the body of the top level class or interface that encloses the declaration of the member or constructor. ...*&quot; (one advantage/reason for nested classes)","body":"Java Language Specification <a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-6.html#jls-6.6.1-100-D-D-A\" rel=\"nofollow noreferrer\">6.6.1. Determining Accessibility</a>: &quot;<i>A member (...) of a class, ..., is accessible only if (i) the class, ... is accessible, and (ii) the member or constructor is declared to permit access: ..., the member or constructor is declared private. Access is permitted only when one of the following is true:  Access occurs from within the body of the top level class or interface that encloses the declaration of the member or constructor. ...</i>&quot; (one advantage/reason for nested classes)"}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684809863,"creation_date":1684809863,"answer_id":76310994,"question_id":76308110,"body_markdown":"If it&#39;s an inner or nested class, even the `private` members are accessible to the enclosing class.","title":"Accessing the private static members of nested static classes","body":"<p>If it's an inner or nested class, even the <code>private</code> members are accessible to the enclosing class.</p>\n"}],"owner":{"account_id":5324511,"reputation":89,"user_id":8441793,"display_name":"Sy Pham"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76310994,"answer_count":1,"score":0,"last_activity_date":1684821128,"creation_date":1684772056,"question_id":76308110,"body_markdown":"Consider the following code snippet:\r\n\r\n**File: ListPool.java**\r\n\r\n```\r\npackage smc;\r\n\r\nimport smc.ListPool.MyLinkedList;\r\n\r\npublic class ListPool {                          // (1) Top-level class\r\n\r\n\tpublic static class MyLinkedList {             // (2) Static member class\r\n\r\n\t\tprivate static String str = &quot;test&quot;;\t\t// (2&#39;)\r\n\r\n\t\tprivate interface ILink { }                  // (3) Static member interface\r\n\r\n\t\tpublic static class BiNode                   // (4) Static member class\r\n\t\timplements IBiLink {\r\n\r\n\t\t\tpublic static void printSimpleName() {     // (5) Static method\r\n\t\t\t\tSystem.out.println(BiNode.class.getSimpleName());\r\n\t\t\t}\r\n\r\n\t\t\tpublic void printName() {                  // (6) Instance method\r\n\t\t\t\tSystem.out.println(this.getClass().getName());\r\n\t\t\t}\r\n\t\t} // end BiNode\r\n\t} // end MyLinkedList\r\n\r\n\tinterface IBiLink\r\n\textends MyLinkedList.ILink {         // (7) Static member interface\r\n\t\t//  private static class Traversal { }           // (8) Compile-time error!\r\n\t\t//     Can only be public.\r\n\t\tclass BiTraversal { }                        // (9) Class is public and static\r\n\t} // end IBiLink\r\n\r\n\tpublic class SortedList {                      // (10) Non-static member class\r\n\t\tprivate static class SortCriteria {}         // (11) Static member class\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tString test = MyLinkedList.str;\t\t\t\t// (12)\r\n\t}\r\n}\r\n```\r\n\r\nI&#39;m surprised that (7) and (12) are compiled without error as they are accessing the private field of a class. Is this something special that static nested classes bring to Java?","title":"Accessing the private static members of nested static classes","body":"<p>Consider the following code snippet:</p>\n<p><strong>File: ListPool.java</strong></p>\n<pre><code>package smc;\n\nimport smc.ListPool.MyLinkedList;\n\npublic class ListPool {                          // (1) Top-level class\n\n    public static class MyLinkedList {             // (2) Static member class\n\n        private static String str = &quot;test&quot;;     // (2')\n\n        private interface ILink { }                  // (3) Static member interface\n\n        public static class BiNode                   // (4) Static member class\n        implements IBiLink {\n\n            public static void printSimpleName() {     // (5) Static method\n                System.out.println(BiNode.class.getSimpleName());\n            }\n\n            public void printName() {                  // (6) Instance method\n                System.out.println(this.getClass().getName());\n            }\n        } // end BiNode\n    } // end MyLinkedList\n\n    interface IBiLink\n    extends MyLinkedList.ILink {         // (7) Static member interface\n        //  private static class Traversal { }           // (8) Compile-time error!\n        //     Can only be public.\n        class BiTraversal { }                        // (9) Class is public and static\n    } // end IBiLink\n\n    public class SortedList {                      // (10) Non-static member class\n        private static class SortCriteria {}         // (11) Static member class\n    }\n\n    public static void main(String[] args) {\n        String test = MyLinkedList.str;             // (12)\n    }\n}\n</code></pre>\n<p>I'm surprised that (7) and (12) are compiled without error as they are accessing the private field of a class. Is this something special that static nested classes bring to Java?</p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":1056927,"reputation":1725,"user_id":1059421,"display_name":"Barny"},"score":0,"creation_date":1684832574,"post_id":76311609,"comment_id":134571012,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":28659846,"reputation":1,"user_id":21945004,"display_name":"Joseph"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684820939,"creation_date":1684820939,"question_id":76311609,"body_markdown":"I&#39;m not able to find a solution to visit menus and sub-menus while automating an website, I can visit them but the problem is the code is like 500-700 lines. I need a solution like using for loop for the problem.\r\n\r\nI expected the driver to visit the menus and it&#39;s sub menus but I was only able to visit a single menu and a single sub menu which is present in the first menu.","title":"How to visit multiple menus say a website has 5 menus, and also visit each of their sub menus by clicking them using selenium with java","body":"<p>I'm not able to find a solution to visit menus and sub-menus while automating an website, I can visit them but the problem is the code is like 500-700 lines. I need a solution like using for loop for the problem.</p>\n<p>I expected the driver to visit the menus and it's sub menus but I was only able to visit a single menu and a single sub menu which is present in the first menu.</p>\n"},{"tags":["java","reactjs","react-native","android-studio","react-redux"],"comments":[{"owner":{"account_id":19885594,"reputation":41,"user_id":14568623,"display_name":"Nassir Ghraizi"},"score":0,"creation_date":1610015331,"post_id":65610603,"comment_id":116001702,"body_markdown":"&gt; Task :app:bundleReleaseJsAndAssets FAILED","body":"&gt; Task :app:bundleReleaseJsAndAssets FAILED"}],"answers":[{"tags":[],"owner":{"account_id":4248189,"reputation":231,"user_id":3476181,"display_name":"Rashed"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1610016486,"creation_date":1610016486,"answer_id":65610938,"question_id":65610603,"body_markdown":"Delete All drawable dir\r\n\r\nrm -rf android/app/src/main/res/drawable-*\r\n\r\n&amp; also change the formate of Your Image\r\n\r\nThen Try to generate Again, Hope your Problem will solve.","title":"Error while trying to build an APK file for React Native project","body":"<p>Delete All drawable dir</p>\n<p>rm -rf android/app/src/main/res/drawable-*</p>\n<p>&amp; also change the formate of Your Image</p>\n<p>Then Try to generate Again, Hope your Problem will solve.</p>\n"},{"tags":[],"owner":{"account_id":20387901,"reputation":311,"user_id":14956443,"display_name":"Sajib saha"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1610016712,"creation_date":1610016712,"answer_id":65610982,"question_id":65610603,"body_markdown":"You Using splash screen in java file. and the splash screen image maybe.. &quot;.png&quot; file. so just change the file name &quot;.png&quot; to &quot;.jpg&quot;.....\r\n\r\nmain background in splash screen should be in .jpg...\r\n\r\n//this will help you to Removing error ","title":"Error while trying to build an APK file for React Native project","body":"<p>You Using splash screen in java file. and the splash screen image maybe.. &quot;.png&quot; file. so just change the file name &quot;.png&quot; to &quot;.jpg&quot;.....</p>\n<p>main background in splash screen should be in .jpg...</p>\n<p>//this will help you to Removing error</p>\n"},{"tags":[],"owner":{"account_id":20287355,"reputation":1667,"user_id":14879760,"display_name":"Muhammad Haidar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1610020773,"creation_date":1610020773,"answer_id":65612009,"question_id":65610603,"body_markdown":"You are facing this error because some of your Icons or Images are not in the PNG extension. Make sure all of your Icons and Images are in PNG. ","title":"Error while trying to build an APK file for React Native project","body":"<p>You are facing this error because some of your Icons or Images are not in the PNG extension. Make sure all of your Icons and Images are in PNG.</p>\n"},{"tags":[],"owner":{"account_id":15966404,"reputation":7,"user_id":11521899,"display_name":"Muhammad Yasir"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667904828,"creation_date":1667904828,"answer_id":74359513,"question_id":65610603,"body_markdown":"I have download some icons in .webp format and just change their extention to .png I thought it will work but it hasn&#39;t work, that why I were unable to release .apk. latter I convert all those images icons to .png and it works for me.\r\n","title":"Error while trying to build an APK file for React Native project","body":"<p>I have download some icons in .webp format and just change their extention to .png I thought it will work but it hasn't work, that why I were unable to release .apk. latter I convert all those images icons to .png and it works for me.</p>\n"},{"tags":[],"owner":{"account_id":21865680,"reputation":39,"user_id":16155908,"display_name":"Kumail Baloch"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1669915307,"creation_date":1669915307,"answer_id":74645813,"question_id":65610603,"body_markdown":"You have a folder named assets/images/ in your root project directory and a image file nour.png like assets/images/nour.png in it.\r\n\r\nFirst change this png file to jpg. you can use this https://png2jpg.com/ image convertor tool. Then after delete nour.png from assets/images and paste your downloaded nour.jpg file here.\r\nYou need to change the image extension png to jpg in your code somewhere too, means if you write nour.png somewhere in your code change it to nour.jpg.\r\nThen delete the build folder android/app/build. Now everything is done, run command\r\n\r\n    ./gradlew assemblerelease\r\nin android folder.","title":"Error while trying to build an APK file for React Native project","body":"<p>You have a folder named assets/images/ in your root project directory and a image file nour.png like assets/images/nour.png in it.</p>\n<p>First change this png file to jpg. you can use this <a href=\"https://png2jpg.com/\" rel=\"nofollow noreferrer\">https://png2jpg.com/</a> image convertor tool. Then after delete nour.png from assets/images and paste your downloaded nour.jpg file here.\nYou need to change the image extension png to jpg in your code somewhere too, means if you write nour.png somewhere in your code change it to nour.jpg.\nThen delete the build folder android/app/build. Now everything is done, run command</p>\n<pre><code>./gradlew assemblerelease\n</code></pre>\n<p>in android folder.</p>\n"}],"owner":{"account_id":19885594,"reputation":41,"user_id":14568623,"display_name":"Nassir Ghraizi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4439,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":5,"score":4,"last_activity_date":1684820804,"creation_date":1610015239,"question_id":65610603,"body_markdown":"&gt; ****Task** :app:mergeReleaseResources FAILED\r\n*FAILURE*: Build failed with an exception.\r\n* What went wrong:**\r\nExecution failed for task &#39;:app:mergeReleaseResources&#39;.\r\n&gt; A failure occurred while executing com.android.build.gradle.internal.tasks.Workers$ActionFacade\r\n   &gt; Android resource compilation failed\r\n   \\mobile\\flyfoot2\\android\\app\\build\\generated\\res\\react\\release\\drawable-mdpi\\assets_images_nour.png: AAPT: error: failed \r\nto read PNG signature: file does not start with PNG signature.\r\n\r\n     \\mobile\\flyfoot2\\android\\app\\build\\generated\\res\\react\\release\\drawable-mdpi\\assets_images_nour.png: AAPT: error: file failed to compile.","title":"Error while trying to build an APK file for React Native project","body":"<blockquote>\n<p>**<strong>Task</strong> :app:mergeReleaseResources FAILED\n<em>FAILURE</em>: Build failed with an exception.</p>\n</blockquote>\n<ul>\n<li>What went wrong:**\nExecution failed for task ':app:mergeReleaseResources'.</li>\n</ul>\n<blockquote>\n<p>A failure occurred while executing com.android.build.gradle.internal.tasks.Workers$ActionFacade\nAndroid resource compilation failed\n\\mobile\\flyfoot2\\android\\app\\build\\generated\\res\\react\\release\\drawable-mdpi\\assets_images_nour.png: AAPT: error: failed\nto read PNG signature: file does not start with PNG signature.</p>\n</blockquote>\n<pre><code> \\mobile\\flyfoot2\\android\\app\\build\\generated\\res\\react\\release\\drawable-mdpi\\assets_images_nour.png: AAPT: error: file failed to compile.\n</code></pre>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":2188609,"reputation":3007,"user_id":1936366,"display_name":"Onur A."},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1684820323,"creation_date":1404308892,"answer_id":24532876,"question_id":24532672,"body_markdown":"Take a look at [`setRequestProperty()`](https://www.w3docs.com/snippets/java/adding-header-for-httpurlconnection.html) method\r\n","title":"Android how to add a header to this: new java.net.URL(&quot;http://example.com/&quot;).openStream()","body":"<p>Take a look at <a href=\"https://www.w3docs.com/snippets/java/adding-header-for-httpurlconnection.html\" rel=\"nofollow noreferrer\"><code>setRequestProperty()</code></a> method</p>\n"}],"owner":{"account_id":3039548,"reputation":14565,"user_id":2576903,"accept_rate":90,"display_name":"Kaloyan Roussev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3556,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1404313702,"accepted_answer_id":24532876,"answer_count":1,"score":1,"last_activity_date":1684820323,"creation_date":1404308362,"question_id":24532672,"body_markdown":"I need to send a header If-Modified-Since to this address and only download if the server returns 200 not 304. Is there a way I can add/modify the header in this code?\r\n\r\n    new java.net.URL(API.JSON_ZIP_OF_ALL_FILES).openStream()","title":"Android how to add a header to this: new java.net.URL(&quot;http://example.com/&quot;).openStream()","body":"<p>I need to send a header If-Modified-Since to this address and only download if the server returns 200 not 304. Is there a way I can add/modify the header in this code?</p>\n\n<pre><code>new java.net.URL(API.JSON_ZIP_OF_ALL_FILES).openStream()\n</code></pre>\n"},{"tags":["java","spring-boot","caching","guava","spring-cache"],"comments":[{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1684782524,"post_id":76309139,"comment_id":134564343,"body_markdown":"If the class exposes the cache, sure, why not? If it is private only, then no (unless you are allowing Reflection)","body":"If the class exposes the cache, sure, why not? If it is private only, then no (unless you are allowing Reflection)"}],"answers":[{"tags":[],"owner":{"account_id":131689,"reputation":451,"user_id":331864,"accept_rate":67,"display_name":"isomeme"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684818563,"creation_date":1684818563,"answer_id":76311430,"question_id":76309139,"body_markdown":"The phrasing of your question is a bit unclear, so if I&#39;m answering the wrong question, please try rephrasing it.\r\n\r\nA Guava cache is a Java object like any other Java object. Its visibility can be as narrow or as wide as you want it to be. I would recommend making access to it available through a method (or methods) on the class it&#39;s in, rather than directly, since that keeps the pieces of your implementation better encapsulated. But it&#39;s totally up to you.","title":"Guava Cache Access From Different Classes","body":"<p>The phrasing of your question is a bit unclear, so if I'm answering the wrong question, please try rephrasing it.</p>\n<p>A Guava cache is a Java object like any other Java object. Its visibility can be as narrow or as wide as you want it to be. I would recommend making access to it available through a method (or methods) on the class it's in, rather than directly, since that keeps the pieces of your implementation better encapsulated. But it's totally up to you.</p>\n"}],"owner":{"account_id":7817520,"reputation":141,"user_id":5911686,"display_name":"Jithesh Nair"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684818563,"creation_date":1684781593,"question_id":76309139,"body_markdown":"Is it possible to access the guava cache from any of the class within that project?\r\n\r\nSuppose if I create class cache ```bannelUrl``` within ```FetchBanner.java```, can the values from ```bannelUrl``` from any other class other than ```FetchBanner.java```?","title":"Guava Cache Access From Different Classes","body":"<p>Is it possible to access the guava cache from any of the class within that project?</p>\n<p>Suppose if I create class cache <code>bannelUrl</code> within <code>FetchBanner.java</code>, can the values from <code>bannelUrl</code> from any other class other than <code>FetchBanner.java</code>?</p>\n"},{"tags":["java","algorithm","memory","data-structures","hashmap"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1684817538,"post_id":76311356,"comment_id":134568235,"body_markdown":"First, note [the `HashMap` documentation](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/HashMap.html) states: &quot;_This implementation provides constant-time performance for the basic operations (get and put), **assuming the hash function disperses the elements properly among the buckets**_&quot;. And this is exactly why. The linked list you&#39;re seeing in the code is how `HashMap` handles two keys that hash to the same bucket. Figuring out which bucket to look at is still constant time, however. And you&#39;re _likely_ still not iterating the entire key set.","body":"First, note <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/HashMap.html\" rel=\"nofollow noreferrer\">the <code>HashMap</code> documentation</a> states: &quot;<i>This implementation provides constant-time performance for the basic operations (get and put), <b>assuming the hash function disperses the elements properly among the buckets</b></i>&quot;. And this is exactly why. The linked list you&#39;re seeing in the code is how <code>HashMap</code> handles two keys that hash to the same bucket. Figuring out which bucket to look at is still constant time, however. And you&#39;re <i>likely</i> still not iterating the entire key set."},{"owner":{"account_id":267086,"reputation":62435,"user_id":555045,"accept_rate":100,"display_name":"harold"},"score":0,"creation_date":1684817725,"post_id":76311356,"comment_id":134568255,"body_markdown":"This is [well known](https://stackoverflow.com/q/4553624/555045) but also note that eventually a [tree is used instead of a linked list](https://stackoverflow.com/q/31373648/555045) (this is also visible in the code you quoted, but it doesn&#39;t show the conditions under which the tree is created)","body":"This is <a href=\"https://stackoverflow.com/q/4553624/555045\">well known</a> but also note that eventually a <a href=\"https://stackoverflow.com/q/31373648/555045\">tree is used instead of a linked list</a> (this is also visible in the code you quoted, but it doesn&#39;t show the conditions under which the tree is created)"},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1684817794,"post_id":76311356,"comment_id":134568260,"body_markdown":"So, yes, if somehow every key was hashed to the same bucket, then the performance degrades to O(n). Though if enough keys are hashed to the same bucket, then `HashMap` switches from a linked list to a balanced tree which, if I&#39;m not mistaken, keeps the performance to O(log(n)).","body":"So, yes, if somehow every key was hashed to the same bucket, then the performance degrades to O(n). Though if enough keys are hashed to the same bucket, then <code>HashMap</code> switches from a linked list to a balanced tree which, if I&#39;m not mistaken, keeps the performance to O(log(n))."}],"owner":{"account_id":26945933,"reputation":7,"user_id":20515929,"display_name":"Brendan B"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684817157,"creation_date":1684817157,"question_id":76311356,"body_markdown":"This is the documentation for HashMap.containsKey(). As you can see, it uses getNode(). I could be wrong, but it looks like the the hash map is still being iterated through, which would be linear time.\r\n\r\n```\r\n/**\r\n * Implements Map.get and related methods.\r\n *\r\n * @param key the key\r\n * @return the node, or null if none\r\n */\r\nfinal Node&lt;K,V&gt; getNode(Object key) {\r\n    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; int n, hash; K k;\r\n    if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp;\r\n        (first = tab[(n - 1) &amp; (hash = hash(key))]) != null) {\r\n        if (first.hash == hash &amp;&amp; // always check first node\r\n            ((k = first.key) == key || (key != null &amp;&amp; key.equals(k))))\r\n            return first;\r\n        if ((e = first.next) != null) {\r\n            if (first instanceof TreeNode)\r\n                return ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);\r\n            do {\r\n                if (e.hash == hash &amp;&amp;\r\n                    ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))\r\n                    return e;\r\n            } while ((e = e.next) != null);\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\n/**\r\n * Returns {@code true} if this map contains a mapping for the\r\n * specified key.\r\n *\r\n * @param   key   The key whose presence in this map is to be tested\r\n * @return {@code true} if this map contains a mapping for the specified\r\n * key.\r\n */\r\npublic boolean containsKey(Object key) {\r\n    return getNode(key) != null;\r\n}\r\n```","title":"How is HashMap.containsKey() in Java able to run in constant time?","body":"<p>This is the documentation for HashMap.containsKey(). As you can see, it uses getNode(). I could be wrong, but it looks like the the hash map is still being iterated through, which would be linear time.</p>\n<pre><code>/**\n * Implements Map.get and related methods.\n *\n * @param key the key\n * @return the node, or null if none\n */\nfinal Node&lt;K,V&gt; getNode(Object key) {\n    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; int n, hash; K k;\n    if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp;\n        (first = tab[(n - 1) &amp; (hash = hash(key))]) != null) {\n        if (first.hash == hash &amp;&amp; // always check first node\n            ((k = first.key) == key || (key != null &amp;&amp; key.equals(k))))\n            return first;\n        if ((e = first.next) != null) {\n            if (first instanceof TreeNode)\n                return ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);\n            do {\n                if (e.hash == hash &amp;&amp;\n                    ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))\n                    return e;\n            } while ((e = e.next) != null);\n        }\n    }\n    return null;\n}\n\n/**\n * Returns {@code true} if this map contains a mapping for the\n * specified key.\n *\n * @param   key   The key whose presence in this map is to be tested\n * @return {@code true} if this map contains a mapping for the specified\n * key.\n */\npublic boolean containsKey(Object key) {\n    return getNode(key) != null;\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":2,"creation_date":1684683798,"post_id":76300685,"comment_id":134549474,"body_markdown":"Don&#39;t like to your code, include it in your question. Check the formatting help for how (basically, put three backticks (The &#39;`&#39; character) on a line, paste your code, another line with 3 backticks.","body":"Don&#39;t like to your code, include it in your question. Check the formatting help for how (basically, put three backticks (The &#39;`&#39; character) on a line, paste your code, another line with 3 backticks."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1684684199,"post_id":76300685,"comment_id":134549527,"body_markdown":"Yes, this isn&#39;t a &quot;please check the code in the link&quot; help site, and in fact isn&#39;t even a help site per se, but rather a question and answer site, where we hope to have high quality questions and answers that are helpful to all -- to the original poster as well as to future visitors who come to the site for solutions to similar problems. Mainly for this reason, it is best to have all code and all important resources readily visible in your question as text (for code, as code-formatted text). Please check out the [ask] and [tour] link for the details as well as the [help] link.","body":"Yes, this isn&#39;t a &quot;please check the code in the link&quot; help site, and in fact isn&#39;t even a help site per se, but rather a question and answer site, where we hope to have high quality questions and answers that are helpful to all -- to the original poster as well as to future visitors who come to the site for solutions to similar problems. Mainly for this reason, it is best to have all code and all important resources readily visible in your question as text (for code, as code-formatted text). Please check out the <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and <a href=\"https://stackoverflow.com/tour\">tour</a> link for the details as well as the <a href=\"https://stackoverflow.com/help\">help center</a> link."},{"owner":{"account_id":1938802,"reputation":12091,"user_id":1745544,"accept_rate":23,"display_name":"OldProgrammer"},"score":3,"creation_date":1684686500,"post_id":76300685,"comment_id":134549810,"body_markdown":"split does not include the delimiter in the resulting array so there will never be a newline in it.","body":"split does not include the delimiter in the resulting array so there will never be a newline in it."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1684733075,"post_id":76300685,"comment_id":134554217,"body_markdown":"I think you should post a [mcve]. Are you saying that you are not getting your expected result?","body":"I think you should post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Are you saying that you are not getting your expected result?"},{"owner":{"account_id":28648346,"reputation":3,"user_id":21935848,"display_name":"Bayron Viamonte Almonte"},"score":0,"creation_date":1684740222,"post_id":76300685,"comment_id":134555274,"body_markdown":"Edited giving a minimal reproducible example. Yes, the result of the test is not the expected.","body":"Edited giving a minimal reproducible example. Yes, the result of the test is not the expected."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684816993,"creation_date":1684743610,"answer_id":76304258,"question_id":76300685,"body_markdown":"The `Scanner` class (Java 17 at least) uses the following regex to match a line separator:\r\n\r\n    \\r\\n|[\\n\\r\\u2028\\u2029\\u0085]\r\n\r\nAs you can see, this will match a CR, an LF or a CR followed by a LF&lt;sup&gt;1&lt;/sup&gt;. After matching,  line separator at the end of the line is then removed, as per the javadoc.  That means that `readLine()` will NEVER return a line that ends with an LF (i.e. `&#39;\\n&#39;`) or a CR (i.e. `&#39;\\r&#39;`).  \r\n\r\n\r\n&gt; Is there a way to read the text by lines without removing the delimiters?\r\n\r\nNot using `Scanner.nextLine()` or `BufferedReader.readLine()`.  If you really need to preserve the line separator, the simplest way is to use a `for` loop to read a characters from `BufferedReader`, recognize line separators, and assemble lines yourself.  You can then include the line separators in the line strings, or put them into a different variable.\r\n\r\nHOWEVER ... it is not obvious to me why you need to preserve the line separators if you are simply reading a CSV file.  If I was doing this, I would use `BufferedReader.readLine` to read each line, and then use a `Scanner` or `String.split` or something more sophisticated to deal with the commas and quotes.\r\n\r\nOr ... find and use a 3rd party CSV parser library and save the effort of implementing the code yourself.\r\n\r\n-----------------\r\n\r\n&lt;sup&gt;1 - ... and some other obscure codes that you&#39;ve probably never heard of.&lt;/sup&gt;\r\n","title":"Why my linebreak checker is not giving the expected result?","body":"<p>The <code>Scanner</code> class (Java 17 at least) uses the following regex to match a line separator:</p>\n<pre><code>\\r\\n|[\\n\\r\\u2028\\u2029\\u0085]\n</code></pre>\n<p>As you can see, this will match a CR, an LF or a CR followed by a LF<sup>1</sup>. After matching,  line separator at the end of the line is then removed, as per the javadoc.  That means that <code>readLine()</code> will NEVER return a line that ends with an LF (i.e. <code>'\\n'</code>) or a CR (i.e. <code>'\\r'</code>).</p>\n<blockquote>\n<p>Is there a way to read the text by lines without removing the delimiters?</p>\n</blockquote>\n<p>Not using <code>Scanner.nextLine()</code> or <code>BufferedReader.readLine()</code>.  If you really need to preserve the line separator, the simplest way is to use a <code>for</code> loop to read a characters from <code>BufferedReader</code>, recognize line separators, and assemble lines yourself.  You can then include the line separators in the line strings, or put them into a different variable.</p>\n<p>HOWEVER ... it is not obvious to me why you need to preserve the line separators if you are simply reading a CSV file.  If I was doing this, I would use <code>BufferedReader.readLine</code> to read each line, and then use a <code>Scanner</code> or <code>String.split</code> or something more sophisticated to deal with the commas and quotes.</p>\n<p>Or ... find and use a 3rd party CSV parser library and save the effort of implementing the code yourself.</p>\n<hr />\n<p><sup>1 - ... and some other obscure codes that you've probably never heard of.</sup></p>\n"}],"owner":{"account_id":28648346,"reputation":3,"user_id":21935848,"display_name":"Bayron Viamonte Almonte"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":76304258,"answer_count":1,"score":-2,"last_activity_date":1684816993,"creation_date":1684683624,"question_id":76300685,"body_markdown":"I have created a project using Java to simulate a Library, I have a method named &quot;Arrumbadas&quot; that return those publishings which have never been lend separated by a linefeed and a test that only checks if each line of this result (&quot;Arrumbadas&quot; method) has a linefeed at the end.\r\n\r\nI have implemented &quot;Arrumbadas&quot; method as follow:\r\n\r\n   \r\n\r\n    (Omitted code)\r\n         result = new StringBuilder();\r\n          for(omitted code){\r\n           if(omitted code){\r\n             result.append(publishing).append(\\n)\r\n            }\r\n           }\r\n          return result.toString()\r\n\r\nI have implemented the test as follow:\r\n\r\n      \r\n      public static boolean hasLineFeed(String t){\r\n            Scanner text = new Scanner(t);\r\n            while(text.hasNextLine()){\r\n                String line = text.nextLine();\r\n                System.out.println(line);\r\n                if(!line.endsWith(&quot;\\n&quot;) &amp;&amp; !line.isEmpty()){\r\n                    return false;\r\n                }\r\n            }\r\n    \r\n            return true;\r\n        }\r\n\r\nGiven this certain text:\r\n\r\n    &quot;9780547928227&quot;,&quot;The Hobbit&quot;,&quot;J.R.R. Tolkien&quot;,&quot;2&quot;,&quot;0&quot;,&quot;High fantasy&quot;\r\n    &quot;9780316769174&quot;,&quot;The Catcher in the Rye&quot;,&quot;J.R.R. Tolkien&quot;,&quot;3&quot;,&quot;0&quot;,&quot;Coming-of-age fiction&quot;\r\n    &quot;9780143124672&quot;,&quot;Moby-Dick&quot;,&quot;J.R.R. Tolkien&quot;,&quot;1&quot;,&quot;0&quot;,&quot;Adventure fiction&quot;\r\n\r\nThe output of the test is:\r\n\r\n    &quot;9780547928227&quot;,&quot;The Hobbit&quot;,&quot;J.R.R. Tolkien&quot;,&quot;2&quot;,&quot;0&quot;,&quot;High fantasy&quot;\r\n    Has linefeed: false\r\n\r\nFigure out that .hasNextLine() doesnt include the delimiter, neither does .split() that I had used it before. Is there a way to read the text by lines without removing the delimiters?\r\n\r\n","title":"Why my linebreak checker is not giving the expected result?","body":"<p>I have created a project using Java to simulate a Library, I have a method named &quot;Arrumbadas&quot; that return those publishings which have never been lend separated by a linefeed and a test that only checks if each line of this result (&quot;Arrumbadas&quot; method) has a linefeed at the end.</p>\n<p>I have implemented &quot;Arrumbadas&quot; method as follow:</p>\n<pre><code>(Omitted code)\n     result = new StringBuilder();\n      for(omitted code){\n       if(omitted code){\n         result.append(publishing).append(\\n)\n        }\n       }\n      return result.toString()\n</code></pre>\n<p>I have implemented the test as follow:</p>\n<pre><code>  public static boolean hasLineFeed(String t){\n        Scanner text = new Scanner(t);\n        while(text.hasNextLine()){\n            String line = text.nextLine();\n            System.out.println(line);\n            if(!line.endsWith(&quot;\\n&quot;) &amp;&amp; !line.isEmpty()){\n                return false;\n            }\n        }\n\n        return true;\n    }\n</code></pre>\n<p>Given this certain text:</p>\n<pre><code>&quot;9780547928227&quot;,&quot;The Hobbit&quot;,&quot;J.R.R. Tolkien&quot;,&quot;2&quot;,&quot;0&quot;,&quot;High fantasy&quot;\n&quot;9780316769174&quot;,&quot;The Catcher in the Rye&quot;,&quot;J.R.R. Tolkien&quot;,&quot;3&quot;,&quot;0&quot;,&quot;Coming-of-age fiction&quot;\n&quot;9780143124672&quot;,&quot;Moby-Dick&quot;,&quot;J.R.R. Tolkien&quot;,&quot;1&quot;,&quot;0&quot;,&quot;Adventure fiction&quot;\n</code></pre>\n<p>The output of the test is:</p>\n<pre><code>&quot;9780547928227&quot;,&quot;The Hobbit&quot;,&quot;J.R.R. Tolkien&quot;,&quot;2&quot;,&quot;0&quot;,&quot;High fantasy&quot;\nHas linefeed: false\n</code></pre>\n<p>Figure out that .hasNextLine() doesnt include the delimiter, neither does .split() that I had used it before. Is there a way to read the text by lines without removing the delimiters?</p>\n"},{"tags":["java","spring","eclipse","spring-boot","tomcat"],"answers":[{"tags":[],"owner":{"account_id":15663576,"reputation":2342,"user_id":11301941,"display_name":"George"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1634746315,"creation_date":1634746315,"answer_id":69649564,"question_id":69649041,"body_markdown":"You need to override the properties in the parent pom.xml .\r\n\r\n```\r\n&lt;properties&gt;\r\n......\r\n    &lt;tomcat.version&gt;10.0.11&lt;/tomcat.version&gt;\r\n......\r\n&lt;properties&gt;\r\n```\r\n\r\n[This link](https://www.springboottutorial.com/spring-boot-starter-parent) can be helpful in your case .\r\n\r\n","title":"Spring Tool Suite 4 how to change deployment server","body":"<p>You need to override the properties in the parent pom.xml .</p>\n<pre><code>&lt;properties&gt;\n......\n    &lt;tomcat.version&gt;10.0.11&lt;/tomcat.version&gt;\n......\n&lt;properties&gt;\n</code></pre>\n<p><a href=\"https://www.springboottutorial.com/spring-boot-starter-parent\" rel=\"nofollow noreferrer\">This link</a> can be helpful in your case .</p>\n"}],"owner":{"account_id":1518790,"reputation":958,"user_id":1419099,"accept_rate":64,"display_name":"Henrique C."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":473,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1684816272,"creation_date":1634744304,"question_id":69649041,"body_markdown":"How to change deployment server for project in spring tool suite 4 eclipse to another A.S. like another tomcat outside embembed tomcat?\r\n\r\nSo I have dowloaded Spring Tool Suite package pre installed in eclipse from [here][1] and followed a basic tutorial to start building a maven REST webservice app.\r\nEverything works very well, I have well builded project structure, connects to Postgres DB... etc.\r\n\r\nLater I noticed that this app runs on an internal tomcat server in this development &quot;pack&quot;, meaning there are no servers displayed.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI tried to add to eclipse the latest tomcat server ( 10 at the time ) but my project doesn&#180;t show up to add.\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n[![enter image description here][4]][4]\r\n\r\n[![Spring Tool Suite 4][5]][5]\r\n\r\n\r\n  [1]: https://spring.io/tools\r\n  [2]: https://i.stack.imgur.com/Nf72D.png\r\n  [3]: https://i.stack.imgur.com/Dh96E.png\r\n  [4]: https://i.stack.imgur.com/AJmxC.png\r\n  [5]: https://i.stack.imgur.com/53h6J.png","title":"Spring Tool Suite 4 how to change deployment server","body":"<p>How to change deployment server for project in spring tool suite 4 eclipse to another A.S. like another tomcat outside embembed tomcat?</p>\n<p>So I have dowloaded Spring Tool Suite package pre installed in eclipse from <a href=\"https://spring.io/tools\" rel=\"nofollow noreferrer\">here</a> and followed a basic tutorial to start building a maven REST webservice app.\nEverything works very well, I have well builded project structure, connects to Postgres DB... etc.</p>\n<p>Later I noticed that this app runs on an internal tomcat server in this development &quot;pack&quot;, meaning there are no servers displayed.</p>\n<p><a href=\"https://i.stack.imgur.com/Nf72D.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Nf72D.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried to add to eclipse the latest tomcat server ( 10 at the time ) but my project doesn´t show up to add.</p>\n<p><a href=\"https://i.stack.imgur.com/Dh96E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Dh96E.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/AJmxC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AJmxC.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/53h6J.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/53h6J.png\" alt=\"Spring Tool Suite 4\" /></a></p>\n"},{"tags":["java","pdf","pdfbox","preflight","pdfa"],"comments":[{"owner":{"account_id":24771967,"reputation":33,"user_id":18655652,"display_name":"Tanmay Sharma"},"score":0,"creation_date":1684817627,"post_id":76308725,"comment_id":134568243,"body_markdown":"@KJ, I need to check pdf/a-2b compliance using pdfbox or any other java library. Is there any way to check that?","body":"@KJ, I need to check pdf/a-2b compliance using pdfbox or any other java library. Is there any way to check that?"},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1684827758,"post_id":76308725,"comment_id":134569932,"body_markdown":"Try VeraPDF, this is a EU funded checker","body":"Try VeraPDF, this is a EU funded checker"}],"answers":[{"tags":[],"owner":{"account_id":14313923,"reputation":8884,"user_id":10802527,"display_name":"K J"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684813691,"creation_date":1684813691,"answer_id":76311183,"question_id":76308725,"body_markdown":"The file is tolerated by some PDF applications, as many will fix such discrepancies but pdf box is detecting many oddities, I did not try to spend much time but the comments seemed potentially valid thus the file is potentially non conformant.\r\n```\r\nThe file Doc1-withHelvetica-pdfa1b.pdf is not a valid PDF/A-1b file, error(s) :\r\n1.2.2 : Body Syntax error, Expected &#39;EOL&#39; before the endstream keyword at offset 32264 but found &#39;101&#39;\r\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Length}:COSInt{8702};COSName{Subtype}:COSName{XML};COSName{Type}:COSName{Metadata};}; defined length=8702; actual length=8702, starting offset=23561\r\n1.2.2 : Body Syntax error, Expected &#39;EOL&#39; before the endstream keyword at offset 35134 but found &#39;101&#39;\r\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{2574};COSName{N}:COSInt{3};COSName{Range}:COSArray{COSFloat{0.0};COSFloat{1.0};0;1065353216;0;1065353216;};}; defined length=2574; actual length=2574, starting offset=32559\r\n1.2.2 : Body Syntax error, Expected &#39;EOL&#39; before the endstream keyword at offset 1562 but found &#39;101&#39;\r\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{202};}; defined length=202; actual length=202, starting offset=1359\r\n1.2.2 : Body Syntax error, Expected &#39;EOL&#39; before the endstream keyword at offset 4486 but found &#39;101&#39;\r\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Alternate}:COSName{DeviceRGB};COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{2612};COSName{N}:COSInt{3};}; defined length=2612; actual length=2612, starting offset=1873\r\n1.2.2 : Body Syntax error, Expected &#39;EOL&#39; before the endstream keyword at offset 4640 but found &#39;101&#39;\r\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{17};}; defined length=17; actual length=17, starting offset=4622\r\n1.2.2 : Body Syntax error, Expected &#39;EOL&#39; before the endstream keyword at offset 15067 but found &#39;101&#39;\r\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{10342};COSName{Length1}:COSInt{27968};}; defined length=10342; actual length=10342, starting offset=4724\r\n1.2.2 : Body Syntax error, Expected &#39;EOL&#39; before the endstream keyword at offset 16081 but found &#39;101&#39;\r\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{407};}; defined length=407; actual length=407, starting offset=15673\r\n1.2.2 : Body Syntax error, Expected &#39;EOL&#39; before the endstream keyword at offset 22792 but found &#39;101&#39;\r\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{6627};COSName{Length1}:COSInt{15080};}; defined length=6627; actual length=6627, starting offset=16164\r\n1.2.2 : Body Syntax error, Expected &#39;EOL&#39; before the endstream keyword at offset 23435 but found &#39;101&#39;\r\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{355};}; defined length=355; actual length=355, starting offset=23079\r\n1.2.2 : Body Syntax error, Expected &#39;EOL&#39; before the endstream keyword at offset 822 but found &#39;101&#39;\r\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{I}:COSInt{93};COSName{Length}:COSInt{85};COSName{S}:COSInt{39};}; defined length=85; actual length=85, starting offset=736\r\n```\r\n\r\nSo on the face of it I simply rebuilt the file using &quot;clean&quot; in MuPDF and reran for validation in PDF box.\r\n\r\n\r\n`C:\\Apps\\PDF\\inspectors\\Apache\\preflight-app-3.0.0-alpha3.jar Doc1-withHelvetica-pdfa1ba.pdf`  \r\n&gt; The file Doc1-withHelvetica-pdfa1ba.pdf is a valid PDF/A-1b file\r\n\r\nHOWEVER catch 22, now it fails others validations as it reports  \r\n&gt; The PDF structure was damaged but has been repaired. Depending on the extent of the damage, some data may theoretically have been lost (although typically this is unlikely).\r\n\r\nSo recycle by remove PDF/A compatibility and see what&#39;s wrong by regenerate as PDF/A and now the report is there is at least 1 bad font definition for Calibri (not surprising as it was previously a word document printout.) What is not obvious is there is a rogue Calibri space character at the end of the line that contains Helvetica Bold and on removal, then that reports other problems so another run through the Editors and finally with all the dross removed, both agree no more problems.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UTHpe.png","title":"PDFBox Preflight parser is not able to detect PDF/A-1b file","body":"<p>The file is tolerated by some PDF applications, as many will fix such discrepancies but pdf box is detecting many oddities, I did not try to spend much time but the comments seemed potentially valid thus the file is potentially non conformant.</p>\n<pre><code>The file Doc1-withHelvetica-pdfa1b.pdf is not a valid PDF/A-1b file, error(s) :\n1.2.2 : Body Syntax error, Expected 'EOL' before the endstream keyword at offset 32264 but found '101'\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Length}:COSInt{8702};COSName{Subtype}:COSName{XML};COSName{Type}:COSName{Metadata};}; defined length=8702; actual length=8702, starting offset=23561\n1.2.2 : Body Syntax error, Expected 'EOL' before the endstream keyword at offset 35134 but found '101'\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{2574};COSName{N}:COSInt{3};COSName{Range}:COSArray{COSFloat{0.0};COSFloat{1.0};0;1065353216;0;1065353216;};}; defined length=2574; actual length=2574, starting offset=32559\n1.2.2 : Body Syntax error, Expected 'EOL' before the endstream keyword at offset 1562 but found '101'\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{202};}; defined length=202; actual length=202, starting offset=1359\n1.2.2 : Body Syntax error, Expected 'EOL' before the endstream keyword at offset 4486 but found '101'\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Alternate}:COSName{DeviceRGB};COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{2612};COSName{N}:COSInt{3};}; defined length=2612; actual length=2612, starting offset=1873\n1.2.2 : Body Syntax error, Expected 'EOL' before the endstream keyword at offset 4640 but found '101'\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{17};}; defined length=17; actual length=17, starting offset=4622\n1.2.2 : Body Syntax error, Expected 'EOL' before the endstream keyword at offset 15067 but found '101'\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{10342};COSName{Length1}:COSInt{27968};}; defined length=10342; actual length=10342, starting offset=4724\n1.2.2 : Body Syntax error, Expected 'EOL' before the endstream keyword at offset 16081 but found '101'\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{407};}; defined length=407; actual length=407, starting offset=15673\n1.2.2 : Body Syntax error, Expected 'EOL' before the endstream keyword at offset 22792 but found '101'\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{6627};COSName{Length1}:COSInt{15080};}; defined length=6627; actual length=6627, starting offset=16164\n1.2.2 : Body Syntax error, Expected 'EOL' before the endstream keyword at offset 23435 but found '101'\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{355};}; defined length=355; actual length=355, starting offset=23079\n1.2.2 : Body Syntax error, Expected 'EOL' before the endstream keyword at offset 822 but found '101'\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{I}:COSInt{93};COSName{Length}:COSInt{85};COSName{S}:COSInt{39};}; defined length=85; actual length=85, starting offset=736\n</code></pre>\n<p>So on the face of it I simply rebuilt the file using &quot;clean&quot; in MuPDF and reran for validation in PDF box.</p>\n<p><code>C:\\Apps\\PDF\\inspectors\\Apache\\preflight-app-3.0.0-alpha3.jar Doc1-withHelvetica-pdfa1ba.pdf</code></p>\n<blockquote>\n<p>The file Doc1-withHelvetica-pdfa1ba.pdf is a valid PDF/A-1b file</p>\n</blockquote>\n<p>HOWEVER catch 22, now it fails others validations as it reports</p>\n<blockquote>\n<p>The PDF structure was damaged but has been repaired. Depending on the extent of the damage, some data may theoretically have been lost (although typically this is unlikely).</p>\n</blockquote>\n<p>So recycle by remove PDF/A compatibility and see what's wrong by regenerate as PDF/A and now the report is there is at least 1 bad font definition for Calibri (not surprising as it was previously a word document printout.) What is not obvious is there is a rogue Calibri space character at the end of the line that contains Helvetica Bold and on removal, then that reports other problems so another run through the Editors and finally with all the dross removed, both agree no more problems.</p>\n<p><a href=\"https://i.stack.imgur.com/UTHpe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UTHpe.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":24771967,"reputation":33,"user_id":18655652,"display_name":"Tanmay Sharma"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":340,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1684813691,"creation_date":1684777472,"question_id":76308725,"body_markdown":"I am using following code to detect whether a file is PDF/A-1b file or not?\r\n\r\n    public boolean isPDF_A1BFile(File file) throws IOException {\r\n            PreflightParser parser = new PreflightParser(file);\r\n            parser.parse(Format.PDF_A1B);\r\n            PreflightDocument preflightDocument = parser.getPreflightDocument();\r\n            preflightDocument.validate();\r\n    \r\n            ValidationResult validationResult = preflightDocument.getResult();\r\n            \r\n            return validationResult.isValid(); //Return false in every case\r\n        }\r\n\r\nBut it is always returning false irrespective of file is PDF/A-1b or not. I am using this [pdf/a-1b file][1]. I have validated using preflight tool in acrobat and it is saying that the file is PDF/A-1b compliance. Sharing the screenshot for the same[![enter image description here][2]][2]\r\nCan anyone please tell me whats wrong in my code or am I missing something?\r\n\r\nAlso, is there any way where I can check that the file is PDF/A-**2B** compliance or not?\r\n\r\n\r\n  [1]: https://drive.google.com/file/d/1kCd1vcRuqTKPR8DTRnunWr7CEZLyYmyN/view?usp=sharing\r\n  [2]: https://i.stack.imgur.com/AgWBl.png","title":"PDFBox Preflight parser is not able to detect PDF/A-1b file","body":"<p>I am using following code to detect whether a file is PDF/A-1b file or not?</p>\n<pre><code>public boolean isPDF_A1BFile(File file) throws IOException {\n        PreflightParser parser = new PreflightParser(file);\n        parser.parse(Format.PDF_A1B);\n        PreflightDocument preflightDocument = parser.getPreflightDocument();\n        preflightDocument.validate();\n\n        ValidationResult validationResult = preflightDocument.getResult();\n        \n        return validationResult.isValid(); //Return false in every case\n    }\n</code></pre>\n<p>But it is always returning false irrespective of file is PDF/A-1b or not. I am using this <a href=\"https://drive.google.com/file/d/1kCd1vcRuqTKPR8DTRnunWr7CEZLyYmyN/view?usp=sharing\" rel=\"nofollow noreferrer\">pdf/a-1b file</a>. I have validated using preflight tool in acrobat and it is saying that the file is PDF/A-1b compliance. Sharing the screenshot for the same<a href=\"https://i.stack.imgur.com/AgWBl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AgWBl.png\" alt=\"enter image description here\" /></a>\nCan anyone please tell me whats wrong in my code or am I missing something?</p>\n<p>Also, is there any way where I can check that the file is PDF/A-<strong>2B</strong> compliance or not?</p>\n"},{"tags":["java","spring","spring-data","spring-jdbc"],"answers":[{"tags":[],"owner":{"account_id":7988880,"reputation":1070,"user_id":9528658,"display_name":"Vladimir.V.Bvn"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1644565367,"creation_date":1644565367,"answer_id":71076622,"question_id":71076358,"body_markdown":"    long size = jdbcTemplate.queryForObject(query, Long.class);","title":"Spring jdbcTemplate retrieve numeric values from query","body":"<pre><code>long size = jdbcTemplate.queryForObject(query, Long.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2324765,"reputation":3694,"user_id":2039546,"display_name":"İsmail Y."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644565635,"creation_date":1644565635,"answer_id":71076663,"question_id":71076358,"body_markdown":"If you look at the [`query`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcOperations.html#query-java.lang.String-java.lang.Object:A-org.springframework.jdbc.core.RowMapper-) javadocs in `JdbcOperations` it states:\r\n\r\n&gt; **Deprecated.** as of 5.3, in favor of [query(String, RowMapper, Object...)](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcOperations.html#query-java.lang.String-org.springframework.jdbc.core.RowMapper-java.lang.Object...-)\r\n\r\nSo you can use it like this:\r\n\r\n```java\r\nList&lt;Long&gt; sizeResults = jdbcTemplate.query(query, (rs, rowNum) -&gt;\r\n        rs.getLong(&quot;size&quot;), id, type);\r\nif (sizeResults.isEmpty()){\r\n    System.out.println(&quot;Result not found!&quot;);\r\n} else {\r\n    System.out.println(&quot;Result found!&quot;);\r\n}\r\n```\r\n\r\n***Note:** [`queryForObject`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcOperations.html#queryForObject-java.lang.String-org.springframework.jdbc.core.RowMapper-) throws `EmptyResultDataAccessException` for empty results. Often it is not desired behavior.*","title":"Spring jdbcTemplate retrieve numeric values from query","body":"<p>If you look at the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcOperations.html#query-java.lang.String-java.lang.Object:A-org.springframework.jdbc.core.RowMapper-\" rel=\"nofollow noreferrer\"><code>query</code></a> javadocs in <code>JdbcOperations</code> it states:</p>\n<blockquote>\n<p><strong>Deprecated.</strong> as of 5.3, in favor of <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcOperations.html#query-java.lang.String-org.springframework.jdbc.core.RowMapper-java.lang.Object...-\" rel=\"nofollow noreferrer\">query(String, RowMapper, Object...)</a></p>\n</blockquote>\n<p>So you can use it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Long&gt; sizeResults = jdbcTemplate.query(query, (rs, rowNum) -&gt;\n        rs.getLong(&quot;size&quot;), id, type);\nif (sizeResults.isEmpty()){\n    System.out.println(&quot;Result not found!&quot;);\n} else {\n    System.out.println(&quot;Result found!&quot;);\n}\n</code></pre>\n<p><em><strong>Note:</strong> <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcOperations.html#queryForObject-java.lang.String-org.springframework.jdbc.core.RowMapper-\" rel=\"nofollow noreferrer\"><code>queryForObject</code></a> throws <code>EmptyResultDataAccessException</code> for empty results. Often it is not desired behavior.</em></p>\n"}],"owner":{"account_id":22757501,"reputation":35,"user_id":16916796,"display_name":"Giner28"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2750,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71076622,"answer_count":2,"score":1,"last_activity_date":1684812159,"creation_date":1644563706,"question_id":71076358,"body_markdown":"I have this query for my jdbcTemplate and I wanna get just the long value from the database, what should be fixed here? \r\n\r\n\r\n    String query = &quot;SELECT size from users where name = ? AND type = ?&quot;;\r\n    long size = jdbcTemplate.query(query, new Object[]{id, type}, (rs, rowNum) -&gt; \r\n    rs.getLong(&quot;size&quot;));\r\n\r\n","title":"Spring jdbcTemplate retrieve numeric values from query","body":"<p>I have this query for my jdbcTemplate and I wanna get just the long value from the database, what should be fixed here?</p>\n<pre><code>String query = &quot;SELECT size from users where name = ? AND type = ?&quot;;\nlong size = jdbcTemplate.query(query, new Object[]{id, type}, (rs, rowNum) -&gt; \nrs.getLong(&quot;size&quot;));\n</code></pre>\n"},{"tags":["java","inner-classes","anonymous-class"],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1684811862,"creation_date":1684811862,"answer_id":76311087,"question_id":76311067,"body_markdown":"You&#39;ll need an instance of `B`, to instantiate `C`\r\n\r\n```java\r\nA.B b = new A.B();\r\nA.C c = new A.C(b);\r\nassert c.foo() == 42;\r\n```\r\n\r\nOr, simplified.\r\n\r\n```java\r\nassert new A.C(new A.B()).foo() == 42;\r\n```\r\n\r\nIf a class contains no constructor, an empty constructor is inferred.","title":"Java inner/anon classes","body":"<p>You'll need an instance of <code>B</code>, to instantiate <code>C</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>A.B b = new A.B();\nA.C c = new A.C(b);\nassert c.foo() == 42;\n</code></pre>\n<p>Or, simplified.</p>\n<pre class=\"lang-java prettyprint-override\"><code>assert new A.C(new A.B()).foo() == 42;\n</code></pre>\n<p>If a class contains no constructor, an empty constructor is inferred.</p>\n"}],"owner":{"account_id":26235747,"reputation":47,"user_id":19910923,"display_name":"acidic231"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684811862,"creation_date":1684811508,"question_id":76311067,"body_markdown":"I&#39;m stuck on this question where we need to instantiate the C class through A\r\n```//The answer must have balanced parentheses\r\nclass A{\r\n  static class B{}\r\n  static class C{ B b;\r\n    C(B b){this.b=b;}\r\n    int foo(){return 42;}\r\n  }\r\n}\r\npublic class Exercise{\r\n\r\n  public static void main(String [] arg){\r\n    assert ([???].foo()==42);\r\n  }\r\n}     \r\n```\r\nObviously we need to instantiate the C class within the A class, however I tried doing\r\nsomething like ```A.C(new B b)``` and a few other variations, but I can&#39;t seem to figure it out, does anyone have any suggestions?\r\n","title":"Java inner/anon classes","body":"<p>I'm stuck on this question where we need to instantiate the C class through A</p>\n<pre><code>class A{\n  static class B{}\n  static class C{ B b;\n    C(B b){this.b=b;}\n    int foo(){return 42;}\n  }\n}\npublic class Exercise{\n\n  public static void main(String [] arg){\n    assert ([???].foo()==42);\n  }\n}     \n</code></pre>\n<p>Obviously we need to instantiate the C class within the A class, however I tried doing\nsomething like <code>A.C(new B b)</code> and a few other variations, but I can't seem to figure it out, does anyone have any suggestions?</p>\n"},{"tags":["java","spring-boot","mybatis"],"comments":[{"owner":{"account_id":1314580,"reputation":3289,"user_id":1261766,"display_name":"ave"},"score":0,"creation_date":1685334910,"post_id":76311064,"comment_id":134642047,"body_markdown":"The error says `BIGINT` is specified in a wrong place (e.g. `javaType`, `resultType`, etc.). If you still need help, you should improve your question. You should use text instead of images. And check &#39;preview&#39; before submit.  Including the entire `RoleMapper.xml` might help.","body":"The error says <code>BIGINT</code> is specified in a wrong place (e.g. <code>javaType</code>, <code>resultType</code>, etc.). If you still need help, you should improve your question. You should use text instead of images. And check &#39;preview&#39; before submit.  Including the entire <code>RoleMapper.xml</code> might help."}],"owner":{"account_id":28659103,"reputation":1,"user_id":21944391,"display_name":"zhouyanhuang"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684811472,"creation_date":1684811472,"question_id":76311064,"body_markdown":"```\r\n\r\n      mybatis always doesn&#39;t map to my xml file. The BIGINT error is not found, but the mybatis plug-in recognizes it and locates it. Have checked all corresponding class names are OK, looking forward to your answer.Have a nice day.\r\n```\r\n[enter image description here](https://i.stack.imgur.com/ytSux.png)\r\n This is the error reported\r\n     [enter image description here](https://i.stack.imgur.com/rw9dZ.png)\r\n     This is the compiled file directory\r\n      [enter image description here](https://i.stack.imgur.com/3dS3s.png)\r\n       Caused by: java.lang.ClassNotFoundException: Cannot find class: BIGINT\r\n","title":"Why is mybatis not mapping to my xml file in spring-boot java?","body":"<pre><code>\n      mybatis always doesn't map to my xml file. The BIGINT error is not found, but the mybatis plug-in recognizes it and locates it. Have checked all corresponding class names are OK, looking forward to your answer.Have a nice day.\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/ytSux.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nThis is the error reported\n<a href=\"https://i.stack.imgur.com/rw9dZ.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nThis is the compiled file directory\n<a href=\"https://i.stack.imgur.com/3dS3s.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nCaused by: java.lang.ClassNotFoundException: Cannot find class: BIGINT</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":1938802,"reputation":12091,"user_id":1745544,"accept_rate":23,"display_name":"OldProgrammer"},"score":1,"creation_date":1684254026,"post_id":76265197,"comment_id":134490095,"body_markdown":"https://stackoverflow.com/questions/1200621/how-do-i-declare-and-initialize-an-array-in-java","body":"<a href=\"https://stackoverflow.com/questions/1200621/how-do-i-declare-and-initialize-an-array-in-java\" title=\"how do i declare and initialize an array in java\">stackoverflow.com/questions/1200621/&hellip;</a>"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1684254862,"post_id":76265197,"comment_id":134490272,"body_markdown":"If this is not a duplicate, please [edit] your question to include a [mre] that shows your revised approach.","body":"If this is not a duplicate, please <a href=\"https://stackoverflow.com/posts/76265197/edit\">edit</a> your question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that shows your revised approach."},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1684254980,"post_id":76265197,"comment_id":134490299,"body_markdown":"Your title says int array but your example uses a char array.  And what are all the dimensions for x,y,and z?","body":"Your title says int array but your example uses a char array.  And what are all the dimensions for x,y,and z?"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1684255496,"post_id":76265197,"comment_id":134490427,"body_markdown":"`int x = size[2]; int y = size[0]; int z = size[1]; char[][][] map = new char[y][z][x];`","body":"<code>int x = size[2]; int y = size[0]; int z = size[1]; char[][][] map = new char[y][z][x];</code>"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1684369668,"post_id":76265197,"comment_id":134510145,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684806248,"creation_date":1684444303,"answer_id":76284528,"question_id":76265197,"body_markdown":"If I understand the question correctly, you&#39;re looking to initialize the array with a set of values.  \r\nAs opposed to initializing an array with a fixed length, and then adding the values one at a time.\r\n\r\nYour code is correct, just remove the `new` keyword.\r\n\r\n```java\r\nint[] size = { y, z, x };\r\n```","title":"How do i create a 3d array using a int array with a length of 3 to define the size of said 3d array?","body":"<p>If I understand the question correctly, you're looking to initialize the array with a set of values.<br />\nAs opposed to initializing an array with a fixed length, and then adding the values one at a time.</p>\n<p>Your code is correct, just remove the <code>new</code> keyword.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[] size = { y, z, x };\n</code></pre>\n"}],"owner":{"account_id":28613892,"reputation":19,"user_id":21908330,"display_name":"Oscar Lockard"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":5,"up_vote_count":2,"answer_count":1,"score":-3,"last_activity_date":1684811169,"creation_date":1684253843,"question_id":76265197,"body_markdown":"how do i do:\r\n`char[][][] map = new char[y][z][x];`\r\nbut define the size with:\r\n&gt; int[] size = new {y,z,x};\r\n\r\nI tried looking it up but i couldn&#39;t find anything helpful.\r\n","title":"How do i create a 3d array using a int array with a length of 3 to define the size of said 3d array?","body":"<p>how do i do:\n<code>char[][][] map = new char[y][z][x];</code>\nbut define the size with:</p>\n<blockquote>\n<p>int[] size = new {y,z,x};</p>\n</blockquote>\n<p>I tried looking it up but i couldn't find anything helpful.</p>\n"},{"tags":["java","android","alarmmanager","android-12"],"comments":[{"owner":{"account_id":7704866,"reputation":69,"user_id":5836108,"display_name":"Андрей Воробьев"},"score":0,"creation_date":1683810515,"post_id":72646917,"comment_id":134425689,"body_markdown":"It is so until you set Unrestricted battery mode in Android settings for your app. And this all is bad for user. Did you manage to do something?","body":"It is so until you set Unrestricted battery mode in Android settings for your app. And this all is bad for user. Did you manage to do something?"}],"answers":[{"tags":[],"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1655407499,"creation_date":1655388114,"answer_id":72647174,"question_id":72646917,"body_markdown":"It will return `isGranted = true` when the permission is being requested the `AndroidManifest.xml`.\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.SCHEDULE_EXACT_ALARM&quot;/&gt;\r\n\r\nAnd actually, the intent is `Settings.ACTION_REQUEST_SCHEDULE_EXACT_ALARM`:\r\n\r\n    ActivityResultLauncher&lt;Intent&gt; startActivityForResult = registerForActivityResult(\r\n            new ActivityResultContracts.StartActivityForResult(), (ActivityResult result) -&gt; {\r\n                if (result.getResultCode() == RESULT_OK) {}\r\n            });\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.S_V2)\r\n    void hasPermission(@NonNull Context context) {\r\n        AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S_V2) {\r\n\r\n            // it depends on the manifest permission, just alike the toggle does.\r\n            if (! alarmManager.canScheduleExactAlarms()) {\r\n\r\n            }\r\n\r\n            // one can only disable the permission, when the manifest requested it.\r\n            startActivityForResult.launch(new Intent(\r\n                    Settings.ACTION_REQUEST_SCHEDULE_EXACT_ALARM,\r\n                    Uri.parse(&quot;package:&quot; + getPackageName())\r\n            ));\r\n        }\r\n    }\r\n\r\nListen for broadcast action [`AlarmManager.ACTION_SCHEDULE_EXACT_ALARM_PERMISSION_STATE_CHANGED`](https://developer.android.com/reference/android/app/AlarmManager#ACTION_SCHEDULE_EXACT_ALARM_PERMISSION_STATE_CHANGED).\r\n\r\nAnd there&#39;s also permission [`USE_EXACT_ALARM`](https://developer.android.com/reference/android/Manifest.permission#USE_EXACT_ALARM), when targeting API `33` onwards.\r\n\r\nSee behavioral changes: [exact alarm permission](https://developer.android.com/about/versions/12/behavior-changes-12#exact-alarm-permission).","title":"Can&#39;t toggle alarms and reminders permission","body":"<p>It will return <code>isGranted = true</code> when the permission is being requested the <code>AndroidManifest.xml</code>.</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.SCHEDULE_EXACT_ALARM&quot;/&gt;\n</code></pre>\n<p>And actually, the intent is <code>Settings.ACTION_REQUEST_SCHEDULE_EXACT_ALARM</code>:</p>\n<pre><code>ActivityResultLauncher&lt;Intent&gt; startActivityForResult = registerForActivityResult(\n        new ActivityResultContracts.StartActivityForResult(), (ActivityResult result) -&gt; {\n            if (result.getResultCode() == RESULT_OK) {}\n        });\n\n@RequiresApi(api = Build.VERSION_CODES.S_V2)\nvoid hasPermission(@NonNull Context context) {\n    AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S_V2) {\n\n        // it depends on the manifest permission, just alike the toggle does.\n        if (! alarmManager.canScheduleExactAlarms()) {\n\n        }\n\n        // one can only disable the permission, when the manifest requested it.\n        startActivityForResult.launch(new Intent(\n                Settings.ACTION_REQUEST_SCHEDULE_EXACT_ALARM,\n                Uri.parse(&quot;package:&quot; + getPackageName())\n        ));\n    }\n}\n</code></pre>\n<p>Listen for broadcast action <a href=\"https://developer.android.com/reference/android/app/AlarmManager#ACTION_SCHEDULE_EXACT_ALARM_PERMISSION_STATE_CHANGED\" rel=\"nofollow noreferrer\"><code>AlarmManager.ACTION_SCHEDULE_EXACT_ALARM_PERMISSION_STATE_CHANGED</code></a>.</p>\n<p>And there's also permission <a href=\"https://developer.android.com/reference/android/Manifest.permission#USE_EXACT_ALARM\" rel=\"nofollow noreferrer\"><code>USE_EXACT_ALARM</code></a>, when targeting API <code>33</code> onwards.</p>\n<p>See behavioral changes: <a href=\"https://developer.android.com/about/versions/12/behavior-changes-12#exact-alarm-permission\" rel=\"nofollow noreferrer\">exact alarm permission</a>.</p>\n"}],"owner":{"account_id":17952829,"reputation":87,"user_id":13045597,"display_name":"Tomasz Stępnik"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":844,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1684809685,"creation_date":1655387078,"question_id":72646917,"body_markdown":"I have app which set alarms. I use this code to ask user for permission:\r\n\r\n    Intent intent = new Intent(\r\n    &quot;android.settings.REQUEST_SCHEDULE_EXACT_ALARM&quot;,\r\n     Uri.parse(&quot;package:&quot;+ getPackageName())\r\n    );\r\n     someActivityResultLauncher.launch(intent);\r\n\r\nIn manifest I added permission:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.SCHEDULE_EXACT_ALARM&quot;/&gt;\r\n\r\nWhen I click the button which launch the intent I can see:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xb7Qh.png\r\n\r\nBut I can&#39;t toggle button with permission and I don&#39;t know why.","title":"Can&#39;t toggle alarms and reminders permission","body":"<p>I have app which set alarms. I use this code to ask user for permission:</p>\n<pre><code>Intent intent = new Intent(\n&quot;android.settings.REQUEST_SCHEDULE_EXACT_ALARM&quot;,\n Uri.parse(&quot;package:&quot;+ getPackageName())\n);\n someActivityResultLauncher.launch(intent);\n</code></pre>\n<p>In manifest I added permission:</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.SCHEDULE_EXACT_ALARM&quot;/&gt;\n</code></pre>\n<p>When I click the button which launch the intent I can see:</p>\n<p><a href=\"https://i.stack.imgur.com/xb7Qh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xb7Qh.png\" alt=\"enter image description here\" /></a></p>\n<p>But I can't toggle button with permission and I don't know why.</p>\n"},{"tags":["java","methods","return-value"],"answers":[{"tags":[],"owner":{"account_id":9664937,"reputation":69,"user_id":7171710,"display_name":"Abned"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684776385,"creation_date":1684776385,"answer_id":76308613,"question_id":76308524,"body_markdown":"You can&#39;t do a return like you do in java. You should change a return type of **play** to array if you want call this method to return two values.\r\n\r\nMy suggestion is to change **play** and call it from constructor.\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class UI {\r\n    Scanner input = new Scanner(System.in);\r\n    int Store, Week;\r\n    \r\n    public UI() {\r\n        play();\r\n    }\r\n\r\n    public void play() {\r\n        System.out.print(&quot; Please enter the store #(1-6)&quot;);\r\n        Store = input.nextInt();`\r\n\r\n        System.out.print(&quot;please enter the operation (1-7)&quot;);\r\n        Week = input.nextInt();\r\n    }\r\n}\r\n```\r\n","title":"return the Scanner inputs by calling the methods and return it to the public class value","body":"<p>You can't do a return like you do in java. You should change a return type of <strong>play</strong> to array if you want call this method to return two values.</p>\n<p>My suggestion is to change <strong>play</strong> and call it from constructor.</p>\n<pre><code>import java.util.Scanner;\n\npublic class UI {\n    Scanner input = new Scanner(System.in);\n    int Store, Week;\n    \n    public UI() {\n        play();\n    }\n\n    public void play() {\n        System.out.print(&quot; Please enter the store #(1-6)&quot;);\n        Store = input.nextInt();`\n\n        System.out.print(&quot;please enter the operation (1-7)&quot;);\n        Week = input.nextInt();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684809123,"creation_date":1684809123,"answer_id":76310961,"question_id":76308524,"body_markdown":"The `play` method doesn&#39;t need to return a value.\r\n\r\nIf the values are fields, you can simply assign them from within the method.\r\n\r\n```java\r\npublic class UI {\r\n    Scanner input = new Scanner(System.in);\r\n    int store, week;\r\n\r\n    void play() {\r\n        System.out.print(&quot; Please enter the store #(1-6)&quot;);\r\n        store = input.nextInt();\r\n        System.out.print(&quot;please enter the operation (1-7)&quot;);\r\n        week = input.nextInt();\r\n    }\r\n}\r\n```","title":"return the Scanner inputs by calling the methods and return it to the public class value","body":"<p>The <code>play</code> method doesn't need to return a value.</p>\n<p>If the values are fields, you can simply assign them from within the method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class UI {\n    Scanner input = new Scanner(System.in);\n    int store, week;\n\n    void play() {\n        System.out.print(&quot; Please enter the store #(1-6)&quot;);\n        store = input.nextInt();\n        System.out.print(&quot;please enter the operation (1-7)&quot;);\n        week = input.nextInt();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":28596526,"reputation":11,"user_id":21894510,"display_name":"coding beginner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1684809123,"creation_date":1684775670,"question_id":76308524,"body_markdown":"```\r\nimport java.util.Scanner;\r\n\r\npublic class UI {\r\nScanner input = new Scanner(System.in);\r\n\r\n    int Store ,Week = play();\r\n\r\n    public int play() {\r\n\r\n           System.out.print(&quot; Please enter the store #(1-6)&quot;);\r\n           Store = input.nextInt();`\r\n\r\n           System.out.print(&quot;please enter the operation (1-7)&quot;);\r\n           Week = input.nextInt();\r\n\r\nreturn Store,Week;\r\n}\r\n\r\n}\r\n```\r\n\r\nhow can I possibly return Store and Week value into ui class. So I can use these values for further coding.","title":"return the Scanner inputs by calling the methods and return it to the public class value","body":"<pre><code>import java.util.Scanner;\n\npublic class UI {\nScanner input = new Scanner(System.in);\n\n    int Store ,Week = play();\n\n    public int play() {\n\n           System.out.print(&quot; Please enter the store #(1-6)&quot;);\n           Store = input.nextInt();`\n\n           System.out.print(&quot;please enter the operation (1-7)&quot;);\n           Week = input.nextInt();\n\nreturn Store,Week;\n}\n\n}\n</code></pre>\n<p>how can I possibly return Store and Week value into ui class. So I can use these values for further coding.</p>\n"},{"tags":["java","regex","logstash","logstash-configuration","logstash-file"],"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684781193,"post_id":76308969,"comment_id":134564085,"body_markdown":"To clarify your question, what part of the provided text would you like extracted?  The `testt`, `**`, and `xls` values?","body":"To clarify your question, what part of the provided text would you like extracted?  The <code>testt</code>, <code>**</code>, and <code>xls</code> values?"}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1684808590,"creation_date":1684782699,"answer_id":76309258,"question_id":76308969,"body_markdown":"To reiterate, you&#39;re saying that within the log-file there are sections which start and end with the example text you provided.\r\n\r\nTo capture these sections, you can use the following regular expression pattern.\r\n\r\n```regex\r\n(?s)(\\d{4}-\\d\\d-\\d\\d .+?rspDesc.+?$)\r\n```\r\n\r\n- Use the `s` flag to enable single-line mode, causing a `.` to additionally match new-line characters.  \r\n- The beginning of the pattern will match the time-stamp.  \r\n- Then, match all characters up to &quot;rspDesc&quot;.  \r\n- Finally, continue until the end of the line is reached.","title":"What is the best way to extract request and response data from a log file using Logstash and regex?","body":"<p>To reiterate, you're saying that within the log-file there are sections which start and end with the example text you provided.</p>\n<p>To capture these sections, you can use the following regular expression pattern.</p>\n<pre><code>(?s)(\\d{4}-\\d\\d-\\d\\d .+?rspDesc.+?$)\n</code></pre>\n<ul>\n<li>Use the <code>s</code> flag to enable single-line mode, causing a <code>.</code> to additionally match new-line characters.</li>\n<li>The beginning of the pattern will match the time-stamp.</li>\n<li>Then, match all characters up to &quot;rspDesc&quot;.</li>\n<li>Finally, continue until the end of the line is reached.</li>\n</ul>\n"}],"owner":{"account_id":18339487,"reputation":37,"user_id":13356110,"display_name":"Hamzeh Abu Ajamieh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1684808590,"creation_date":1684779979,"question_id":76308969,"body_markdown":"I have application log file which contains the application requests and responses, the complete request and response looks like the below, I tried different patterns using RegEx but unfortunately without any luck, can some one suggest what should I change :\r\n\r\npattern =&gt; \r\n```\r\n&quot;\r\n(?m)\\b\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2},\\d{3}\\b.?\\bRequest given by the user\\b.?\\brspDesc is\\b(?!.\\n)..?(?=\\R|$)\r\n&quot;\r\n```\r\n\r\n    2023-05-11 00:20:26,103 [http-apr-7777-exec-46] INFO com.welcome.ws.AccountWebServiceImpl. - Request given by the user\r\n    \r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\r\n    &lt;ns2:GetCustomerBalanceReq xmlns=&quot;url&quot; xmlns:ns2=&quot;url&quot;&gt;\r\n    \r\n    testt\r\n    **\r\n    xls\r\n    \r\n    ns2:ID/EID/5000000004/123456****1234&lt;/ns2:ID&gt;\r\n    &lt;/ns2:GetCustomerBalanceReq&gt;\r\n    \r\n    2023-05-11 00:20:26,144 [http-apr-7777-exec-46] INFO com.welcome.svc.AccountService. - rspCode is:1001 and rspDesc is:Account or Media does not Exist\r\n\r\nI was trying this regex but it wasn&#39;t matching anything \r\n\r\n    &quot;(?m)\\b\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2},\\d{3}\\b.?\\bRequest given by the user\\b.?\\brspDesc is\\b(?!.\\n)..?(?=\\R|$) \r\n\r\n","title":"What is the best way to extract request and response data from a log file using Logstash and regex?","body":"<p>I have application log file which contains the application requests and responses, the complete request and response looks like the below, I tried different patterns using RegEx but unfortunately without any luck, can some one suggest what should I change :</p>\n<p>pattern =&gt;</p>\n<pre><code>&quot;\n(?m)\\b\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2},\\d{3}\\b.?\\bRequest given by the user\\b.?\\brspDesc is\\b(?!.\\n)..?(?=\\R|$)\n&quot;\n</code></pre>\n<pre><code>2023-05-11 00:20:26,103 [http-apr-7777-exec-46] INFO com.welcome.ws.AccountWebServiceImpl. - Request given by the user\n\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\n&lt;ns2:GetCustomerBalanceReq xmlns=&quot;url&quot; xmlns:ns2=&quot;url&quot;&gt;\n\ntestt\n**\nxls\n\nns2:ID/EID/5000000004/123456****1234&lt;/ns2:ID&gt;\n&lt;/ns2:GetCustomerBalanceReq&gt;\n\n2023-05-11 00:20:26,144 [http-apr-7777-exec-46] INFO com.welcome.svc.AccountService. - rspCode is:1001 and rspDesc is:Account or Media does not Exist\n</code></pre>\n<p>I was trying this regex but it wasn't matching anything</p>\n<pre><code>&quot;(?m)\\b\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2},\\d{3}\\b.?\\bRequest given by the user\\b.?\\brspDesc is\\b(?!.\\n)..?(?=\\R|$) \n</code></pre>\n"},{"tags":["java","arrays","swing","graphics"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1684808235,"post_id":76310894,"comment_id":134567419,"body_markdown":"Check out: https://stackoverflow.com/a/54028681/131872 for an example to get you started. It uses a Swing Timer to animate multiple objects. You will be able to simplify the logic. Note that your Polygon object should be created relative to offset (0, 0). Then in the painting method you would use the g.translate(...) method to move the object to its new location. Maybe you would even want to paint the projectile to a BufferedImage, then you can simply paint the image at its new location each time the Timer fires. This will be more efficient.","body":"Check out: <a href=\"https://stackoverflow.com/a/54028681/131872\">stackoverflow.com/a/54028681/131872</a> for an example to get you started. It uses a Swing Timer to animate multiple objects. You will be able to simplify the logic. Note that your Polygon object should be created relative to offset (0, 0). Then in the painting method you would use the g.translate(...) method to move the object to its new location. Maybe you would even want to paint the projectile to a BufferedImage, then you can simply paint the image at its new location each time the Timer fires. This will be more efficient."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1684810981,"post_id":76310894,"comment_id":134567644,"body_markdown":"For [example](https://stackoverflow.com/questions/41785697/graphics-stuttering-in-java-space-invaders/41787291#41787291); [example](https://stackoverflow.com/questions/72411743/how-to-move-paint-graphics-along-slope/72412859#72412859); [example](https://stackoverflow.com/questions/35003520/program-not-painting-screen-properly/35004777#35004777);","body":"For <a href=\"https://stackoverflow.com/questions/41785697/graphics-stuttering-in-java-space-invaders/41787291#41787291\">example</a>; <a href=\"https://stackoverflow.com/questions/72411743/how-to-move-paint-graphics-along-slope/72412859#72412859\">example</a>; <a href=\"https://stackoverflow.com/questions/35003520/program-not-painting-screen-properly/35004777#35004777\">example</a>;"}],"owner":{"account_id":26134584,"reputation":21,"user_id":19824755,"display_name":"shge"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1684808563,"creation_date":1684807821,"question_id":76310894,"body_markdown":"I have a Java final, and I would like to make a bullet hell type game, but what I&#39;m stumped on is how to make the projectiles move. My first idea would be to constantly update the projectile; I just don&#39;t know how to do that. Any ideas?\r\n\r\n```\r\n//outer polygon\r\ng.setColor(Color.ORANGE);\r\nPolygon projectile = new Polygon();\r\nprojectile.addPoint(220,100);\r\nprojectile.addPoint(224,106);\r\nprojectile.addPoint(227,110);\r\nprojectile.addPoint(227,128);\r\nprojectile.addPoint(222,140);\r\nprojectile.addPoint(216,140);\r\nprojectile.addPoint(208,128);\r\nprojectile.addPoint(208,110);\r\nprojectile.addPoint(213,104);\r\nprojectile.addPoint(215,100);\r\ng.fillPolygon(projectile);\r\n\r\n//inner polygon, like a highlight\r\ng.setColor(Color.CYAN);\r\nPolygon innerColor = new Polygon();\r\nint scaleFactor = 80; \r\ndouble scale = scaleFactor / 100.0;\r\nfor (int i = 0; i &lt; projectile.npoints; i++) {\r\n    int smallX = (int) ((projectile.xpoints[i] - 220) * scale);\r\n    int smallY = (int) ((projectile.ypoints[i] - 120) * scale);\r\n    int x = 220 + smallX;\r\n    int y = 120 + smallY;\r\n    innerColor.addPoint(x, y);\r\n}\r\ng.fillPolygon(innerColor);\r\n```\r\n","title":"How would I make a projectile move using java.swing by constantly updating its points?","body":"<p>I have a Java final, and I would like to make a bullet hell type game, but what I'm stumped on is how to make the projectiles move. My first idea would be to constantly update the projectile; I just don't know how to do that. Any ideas?</p>\n<pre><code>//outer polygon\ng.setColor(Color.ORANGE);\nPolygon projectile = new Polygon();\nprojectile.addPoint(220,100);\nprojectile.addPoint(224,106);\nprojectile.addPoint(227,110);\nprojectile.addPoint(227,128);\nprojectile.addPoint(222,140);\nprojectile.addPoint(216,140);\nprojectile.addPoint(208,128);\nprojectile.addPoint(208,110);\nprojectile.addPoint(213,104);\nprojectile.addPoint(215,100);\ng.fillPolygon(projectile);\n\n//inner polygon, like a highlight\ng.setColor(Color.CYAN);\nPolygon innerColor = new Polygon();\nint scaleFactor = 80; \ndouble scale = scaleFactor / 100.0;\nfor (int i = 0; i &lt; projectile.npoints; i++) {\n    int smallX = (int) ((projectile.xpoints[i] - 220) * scale);\n    int smallY = (int) ((projectile.ypoints[i] - 120) * scale);\n    int x = 220 + smallX;\n    int y = 120 + smallY;\n    innerColor.addPoint(x, y);\n}\ng.fillPolygon(innerColor);\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1684803493,"post_id":76310692,"comment_id":134567055,"body_markdown":"`NoClassDefFoundError: org/springframework/security/oauth2/server/resource/web/BearerTokenResolver` looks like a missing runtime dependency","body":"<code>NoClassDefFoundError: org&#47;springframework&#47;security&#47;oauth2&#47;server&#47;resource&#47;web&#47;Bear&zwnj;&#8203;erTokenResolver</code> looks like a missing runtime dependency"},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1684803626,"post_id":76310692,"comment_id":134567071,"body_markdown":"Also check out [this SO question](https://stackoverflow.com/a/75829647/18157), which I found by searching for the NoClassDefFoundError message text.","body":"Also check out <a href=\"https://stackoverflow.com/a/75829647/18157\">this SO question</a>, which I found by searching for the NoClassDefFoundError message text."}],"answers":[{"tags":[],"owner":{"account_id":26294109,"reputation":242,"user_id":19960660,"display_name":"Ivan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684808245,"creation_date":1684808245,"answer_id":76310923,"question_id":76310692,"body_markdown":"Clean and Build your application through your preferred build tool manager (ex. Gradle), then check back again, if the issue still persists it might miss a dependency in the pom.xml (if maven) or build.gradle (if gradle) file.","title":"NoClassDefFoundError: org/springframework/security/oauth2/server/resource/web/BearerTokenResolver","body":"<p>Clean and Build your application through your preferred build tool manager (ex. Gradle), then check back again, if the issue still persists it might miss a dependency in the pom.xml (if maven) or build.gradle (if gradle) file.</p>\n"}],"owner":{"account_id":8100499,"reputation":485,"user_id":6103665,"accept_rate":40,"display_name":"Gerald Mathabela"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":296,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684808245,"creation_date":1684803331,"question_id":76310692,"body_markdown":"Authenticating Azure AD token to authorize some endpoints/controllers\r\n\r\nSecurity configuration\r\n\r\nCompilation Error\r\n```\r\nError creating bean with name &#39;springSecurityFilterChain&#39; defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; threw exception; nested exception is java.lang.NoClassDefFoundError: org/springframework/security/oauth2/server/resource/web/BearerTokenResolver\r\n```\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableGlobalMethodSecurity(prePostEnabled = true)\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    @Autowired\r\n    private JwtAuthenticationEntryPoint unauthorizedHandler;\r\n\r\n    @Autowired\r\n    private TokenFilter tokenFilter;\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.cors().and().csrf().disable()\r\n                .authorizeRequests()\r\n                .antMatchers(\r\n                        &quot;/api/authenticate/username&quot;)\r\n                .permitAll().anyRequest().authenticated().and()\r\n                .exceptionHandling().authenticationEntryPoint(unauthorizedHandler)\r\n                .and()\r\n                .oauth2ResourceServer()\r\n                .jwt()\r\n                .jwtAuthenticationConverter(new AADJwtBearerTokenAuthenticationConverter());\r\n    }\r\n\r\n}\r\n```","title":"NoClassDefFoundError: org/springframework/security/oauth2/server/resource/web/BearerTokenResolver","body":"<p>Authenticating Azure AD token to authorize some endpoints/controllers</p>\n<p>Security configuration</p>\n<p>Compilation Error</p>\n<pre><code>Error creating bean with name 'springSecurityFilterChain' defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method 'springSecurityFilterChain' threw exception; nested exception is java.lang.NoClassDefFoundError: org/springframework/security/oauth2/server/resource/web/BearerTokenResolver\n</code></pre>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    private JwtAuthenticationEntryPoint unauthorizedHandler;\n\n    @Autowired\n    private TokenFilter tokenFilter;\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.cors().and().csrf().disable()\n                .authorizeRequests()\n                .antMatchers(\n                        &quot;/api/authenticate/username&quot;)\n                .permitAll().anyRequest().authenticated().and()\n                .exceptionHandling().authenticationEntryPoint(unauthorizedHandler)\n                .and()\n                .oauth2ResourceServer()\n                .jwt()\n                .jwtAuthenticationConverter(new AADJwtBearerTokenAuthenticationConverter());\n    }\n\n}\n</code></pre>\n"},{"tags":["java","android-studio","firebase-realtime-database","get","retrofit2"],"comments":[{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1684802546,"post_id":76310396,"comment_id":134566974,"body_markdown":"From the structure of your code it looks like `enqueue` queues a callback object, which will then be executed asynchronously. In other words, your code continues onward in your thread while the callback is run on another thread.  If you expect the return to wait for completion of the request you will need to synchronize.  That will depend on the implementation of `TokensService`.","body":"From the structure of your code it looks like <code>enqueue</code> queues a callback object, which will then be executed asynchronously. In other words, your code continues onward in your thread while the callback is run on another thread.  If you expect the return to wait for completion of the request you will need to synchronize.  That will depend on the implementation of <code>TokensService</code>."},{"owner":{"account_id":28600107,"reputation":1,"user_id":21897270,"display_name":"DFDev3"},"score":0,"creation_date":1684807699,"post_id":76310396,"comment_id":134567378,"body_markdown":"I just updated the question with TokensService interface. How should I modify it in order to make execute() a suitable option for the request?","body":"I just updated the question with TokensService interface. How should I modify it in order to make execute() a suitable option for the request?"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1684821295,"post_id":76310396,"comment_id":134568679,"body_markdown":"There is no way you can return the `listTokens` as a result of a method, even if you&#39;re using Retrofit. Firebase API is asynchronous. So please check the duplicate to see how can you solve this using a callback. You might also be interested in reading this [resource](https://medium.com/firebase-tips-tricks/how-to-read-data-from-firebase-realtime-database-using-get-269ef3e179c5).","body":"There is no way you can return the <code>listTokens</code> as a result of a method, even if you&#39;re using Retrofit. Firebase API is asynchronous. So please check the duplicate to see how can you solve this using a callback. You might also be interested in reading this <a href=\"https://medium.com/firebase-tips-tricks/how-to-read-data-from-firebase-realtime-database-using-get-269ef3e179c5\" rel=\"nofollow noreferrer\">resource</a>."}],"owner":{"account_id":28600107,"reputation":1,"user_id":21897270,"display_name":"DFDev3"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1684821317,"answer_count":0,"score":0,"last_activity_date":1684807827,"creation_date":1684797205,"question_id":76310396,"body_markdown":"I am currently trying to get tokens from a Realtime Database (Firebase) using Retrofit2 and Gson, in Android Studio. My API class and TokensService is correctly defined, and I&#39;m using the .enqueue() method in order to perform the GET command. \r\n\r\n\r\nTokensService\r\n```\r\npublic interface TokensService {\r\n\r\n    @GET(&quot;Tokens.json&quot;)\r\n    Call&lt;Object&gt; getAllTokens();\r\n\r\n    @POST(&quot;Tokens.json&quot;)\r\n    Call&lt;Object&gt; postToken(@Body Tokens miToken);\r\n\r\n}\r\n```\r\n\r\nHelperTokens\r\n\r\n```\r\npublic ArrayList&lt;Tokens&gt; getTokens() {\r\n        Arraylist&lt;Tokens&gt; listTokens=new ArrayList&lt;&gt;();\r\n        Retrofit myRetro = APIService.getInstancia();\r\n        TokensService myTokensService = myRetro.create(TokensService.class);\r\n\r\n            myTokensService.getAllTokens().enqueue(new Callback&lt;Object&gt;() {\r\n                @Override\r\n                public void onResponse(Call&lt;Object&gt; call, Response&lt;Object&gt; response) {\r\n\r\n                    //Here, I verified that the info is being received in the response.body()\r\n\r\n                    Map&lt;String,Map&gt; datos = (Map&lt;String, Map&gt;) response.body();\r\n\r\n                    for (Map.Entry&lt;String, Map&gt; item : datos.entrySet()){\r\n                        Log.d(&quot;Entered the for loop&quot;,&quot;iterations&quot;);\r\n                        Tokens eachToken = new Tokens();\r\n                        eachToken.setTheToken((String) item.getValue().get(&quot;theToken&quot;));\r\n                        eachToken.setfCreacion((String) item.getValue().get(&quot;fCreacion&quot;));\r\n                        eachToken.setLimited((double) item.getValue().get(&quot;isLimited&quot;));\r\n                        eachToken.setfVencimiento((String) item.getValue().get(&quot;fVencimiento&quot;));\r\n\r\n                        //Here, I assign each attribute to a new instance of &quot;Tokens&quot; and add it\r\n                        //to the Arraylist that will be returned from getTokens()\r\n\r\n                        listTokens.add(eachToken);\r\n                    }\r\n                    Log.d(&quot;Finishing onResponse, this is the Arraylist&quot;,listTokens.toString());\r\n                }\r\n                @Override\r\n                public void onFailure(Call&lt;Object&gt; call, Throwable t) {\r\n                    Log.d(&quot;Fallo&quot;,t.getMessage());\r\n\r\n                }\r\n            });\r\n\r\n        Log.d(&quot;Arraylist about to be returned&quot;,listTokens.toString());\r\n\r\n        return listTokens;\r\n\r\n    }\r\n```\r\n\r\n\r\nHowever, I&#39;m having trouble with getting this right. There is no error, but the execution order looks a bit weird. As soon as I call the method getTokens() on my java.class, it goes through each line, creates the Arraylist, gets the Retrofit instance (singleton), creates the TokensService class, and finally arrives at the getAllTokens().enqueue().\r\n\r\nBut it returns listTokens before entering the onResponse/onFailure. It returns an empty array, and just then goes into the onResponse and performs all it&#39;s tasks switfly. But there&#39;s nothing I can do with the empty Arraylist it returns. Is almost like onResponse executes with a delay\r\n\r\nCheck the Logs and compare them to the following Logcat, so you can get what I&#39;m talking about.\r\n\r\nANNOTATIONS:\r\n\r\nThe class for a singular instance is called Tokens, in plural. &quot;Token&quot; would be hard to work with, since is a word used in a lot of methods and commands, and etc. So keep it in mind.\r\n\r\nI just have one single Tokens up in the Realtime Database, so in the &quot;filled&quot; listTokens, you can only observe 1 Tokens being added. It&#39;s not because the for is only iterating once. I&#39;ve tested it, and iterates as many times as there are Tokens in the database.\r\n\r\nSince I first thought it may be a online-type issue, like a little delay in the connection, I tried to Thread.sleep() the program, so that the connection would have time more than enough to perform it&#39;s duties. But no matter how much time it sleeps, the return command keeps executing before the onResponse","title":"enqueue.onResponse() executing after return statemente in a GET request","body":"<p>I am currently trying to get tokens from a Realtime Database (Firebase) using Retrofit2 and Gson, in Android Studio. My API class and TokensService is correctly defined, and I'm using the .enqueue() method in order to perform the GET command.</p>\n<p>TokensService</p>\n<pre><code>public interface TokensService {\n\n    @GET(&quot;Tokens.json&quot;)\n    Call&lt;Object&gt; getAllTokens();\n\n    @POST(&quot;Tokens.json&quot;)\n    Call&lt;Object&gt; postToken(@Body Tokens miToken);\n\n}\n</code></pre>\n<p>HelperTokens</p>\n<pre><code>public ArrayList&lt;Tokens&gt; getTokens() {\n        Arraylist&lt;Tokens&gt; listTokens=new ArrayList&lt;&gt;();\n        Retrofit myRetro = APIService.getInstancia();\n        TokensService myTokensService = myRetro.create(TokensService.class);\n\n            myTokensService.getAllTokens().enqueue(new Callback&lt;Object&gt;() {\n                @Override\n                public void onResponse(Call&lt;Object&gt; call, Response&lt;Object&gt; response) {\n\n                    //Here, I verified that the info is being received in the response.body()\n\n                    Map&lt;String,Map&gt; datos = (Map&lt;String, Map&gt;) response.body();\n\n                    for (Map.Entry&lt;String, Map&gt; item : datos.entrySet()){\n                        Log.d(&quot;Entered the for loop&quot;,&quot;iterations&quot;);\n                        Tokens eachToken = new Tokens();\n                        eachToken.setTheToken((String) item.getValue().get(&quot;theToken&quot;));\n                        eachToken.setfCreacion((String) item.getValue().get(&quot;fCreacion&quot;));\n                        eachToken.setLimited((double) item.getValue().get(&quot;isLimited&quot;));\n                        eachToken.setfVencimiento((String) item.getValue().get(&quot;fVencimiento&quot;));\n\n                        //Here, I assign each attribute to a new instance of &quot;Tokens&quot; and add it\n                        //to the Arraylist that will be returned from getTokens()\n\n                        listTokens.add(eachToken);\n                    }\n                    Log.d(&quot;Finishing onResponse, this is the Arraylist&quot;,listTokens.toString());\n                }\n                @Override\n                public void onFailure(Call&lt;Object&gt; call, Throwable t) {\n                    Log.d(&quot;Fallo&quot;,t.getMessage());\n\n                }\n            });\n\n        Log.d(&quot;Arraylist about to be returned&quot;,listTokens.toString());\n\n        return listTokens;\n\n    }\n</code></pre>\n<p>However, I'm having trouble with getting this right. There is no error, but the execution order looks a bit weird. As soon as I call the method getTokens() on my java.class, it goes through each line, creates the Arraylist, gets the Retrofit instance (singleton), creates the TokensService class, and finally arrives at the getAllTokens().enqueue().</p>\n<p>But it returns listTokens before entering the onResponse/onFailure. It returns an empty array, and just then goes into the onResponse and performs all it's tasks switfly. But there's nothing I can do with the empty Arraylist it returns. Is almost like onResponse executes with a delay</p>\n<p>Check the Logs and compare them to the following Logcat, so you can get what I'm talking about.</p>\n<p>ANNOTATIONS:</p>\n<p>The class for a singular instance is called Tokens, in plural. &quot;Token&quot; would be hard to work with, since is a word used in a lot of methods and commands, and etc. So keep it in mind.</p>\n<p>I just have one single Tokens up in the Realtime Database, so in the &quot;filled&quot; listTokens, you can only observe 1 Tokens being added. It's not because the for is only iterating once. I've tested it, and iterates as many times as there are Tokens in the database.</p>\n<p>Since I first thought it may be a online-type issue, like a little delay in the connection, I tried to Thread.sleep() the program, so that the connection would have time more than enough to perform it's duties. But no matter how much time it sleeps, the return command keeps executing before the onResponse</p>\n"},{"tags":["java","react-native"],"owner":{"account_id":28658743,"reputation":1,"user_id":21944097,"display_name":"Diego Rosselot"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":129,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684805671,"creation_date":1684805671,"question_id":76310795,"body_markdown":"I&#180;m working on a react native app, and started recently to implement some native modules. I&#180;m trying to handle an ArrayList in java but I am having trouble understanding how react implements ReadableArrays. I don&#180;t really know much about java, I usually work with js.\r\n\r\nI have the following function in java:\r\n\r\n```\r\n@ReactMethod\r\n    private void serveCoffee(ReadableArray steps) {\r\n        ArrayList&lt;Object&gt; recipe = steps.toArrayList();\r\n        String listString = TextUtils.join(&quot;, &quot;, recipe);\r\n        Log.d(&quot;MachineDriverModule&quot;, listString);\r\n    }\r\n```\r\n\r\nI then use it in React defined like this:\r\n\r\n```\r\ntype step = {\r\n    canister: number,\r\n    water_volume: number,\r\n    powder_volume: number,\r\n    stirring_speed: number,\r\n    water_temperature: string,\r\n}\r\n\r\nserveCoffee(steps: Array&lt;step&gt;): void;\r\n```\r\n\r\nI have no problem with that code, but I have no idea how to get any value inside java. The function prints as expected (two identical steps inside the array): `{canister: 1, water_volume: 1, powder_volume: 1, stirring_speed: 1, water_temperature: string}, {canister: 1, water_volume: 1, powder_volume: 1, stirring_speed: 1, water_temperature: string} `\r\n\r\nNow, how would I get the value of canister or water_temperature of any of these?","title":"How do I handle a ReadableArray received in a React Native native module","body":"<p>I´m working on a react native app, and started recently to implement some native modules. I´m trying to handle an ArrayList in java but I am having trouble understanding how react implements ReadableArrays. I don´t really know much about java, I usually work with js.</p>\n<p>I have the following function in java:</p>\n<pre><code>@ReactMethod\n    private void serveCoffee(ReadableArray steps) {\n        ArrayList&lt;Object&gt; recipe = steps.toArrayList();\n        String listString = TextUtils.join(&quot;, &quot;, recipe);\n        Log.d(&quot;MachineDriverModule&quot;, listString);\n    }\n</code></pre>\n<p>I then use it in React defined like this:</p>\n<pre><code>type step = {\n    canister: number,\n    water_volume: number,\n    powder_volume: number,\n    stirring_speed: number,\n    water_temperature: string,\n}\n\nserveCoffee(steps: Array&lt;step&gt;): void;\n</code></pre>\n<p>I have no problem with that code, but I have no idea how to get any value inside java. The function prints as expected (two identical steps inside the array): <code>{canister: 1, water_volume: 1, powder_volume: 1, stirring_speed: 1, water_temperature: string}, {canister: 1, water_volume: 1, powder_volume: 1, stirring_speed: 1, water_temperature: string} </code></p>\n<p>Now, how would I get the value of canister or water_temperature of any of these?</p>\n"},{"tags":["java","arrays","string","object","while-loop"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1678702082,"post_id":75720392,"comment_id":133578121,"body_markdown":"Have you tried anything yet? Using `substring` with a few length checks should to the trick. Nobody here will just do your homework for you if you don&#39;t show what you&#39;ve tried.","body":"Have you tried anything yet? Using <code>substring</code> with a few length checks should to the trick. Nobody here will just do your homework for you if you don&#39;t show what you&#39;ve tried."},{"owner":{"account_id":20508639,"reputation":9,"user_id":15050866,"display_name":"Vaibhav"},"score":1,"creation_date":1678706412,"post_id":75720392,"comment_id":133579403,"body_markdown":"I figured out a way :)","body":"I figured out a way :)"}],"answers":[{"tags":[],"owner":{"account_id":27635017,"reputation":43,"user_id":21093121,"display_name":"ARNR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678959303,"creation_date":1678959303,"answer_id":75754323,"question_id":75720392,"body_markdown":"A similar issue was resolved here [Generate all rotations of a number][1]\r\n\r\n\r\n  [1]: https://www.geeksforgeeks.org/generate-all-rotations-of-a-number/\r\n\r\n\r\n    public class Pattern28 {\r\n    \r\n    \r\n            // Function to return the count of digits of n\r\n            static int numberOfDigits(int n)\r\n            {\r\n                int cnt = 0;\r\n                while (n &gt; 0)\r\n                {\r\n                    cnt++;\r\n                    n /= 10;\r\n                }\r\n                return cnt;\r\n            }\r\n    \r\n            // Function to print the left shift numbers\r\n            static void cal(int num)\r\n            {\r\n                int digits = numberOfDigits(num);\r\n                int powTen = (int) Math.pow(10, digits - 1);\r\n    \r\n                for (int i = 0; i &lt; digits - 1; i++)\r\n                {\r\n                    int firstDigit = num / powTen;\r\n    \r\n                    // Formula to calculate left shift\r\n                    // from previous number\r\n                    int left = ((num * 10) + firstDigit) -\r\n                            (firstDigit * powTen * 10);\r\n    \r\n                    System.out.println(left + &quot; &quot;);\r\n    \r\n                    // Update the original number\r\n                    num = left;\r\n                }\r\n            }\r\n    \r\n            // Driver Code\r\n            public static void main(String[] args)\r\n            {\r\n                int num = 1445;\r\n                Scanner sc = new Scanner(System.in);\r\n                System.out.println(&quot;Please enter your number ?&quot;);\r\n                int n = sc.nextInt();\r\n                cal(n);\r\n            }\r\n        }","title":"In java how to print chars of a string from any particular index and after reaching end of string again start from index 0 if printed not equal length","body":"<p>A similar issue was resolved here <a href=\"https://www.geeksforgeeks.org/generate-all-rotations-of-a-number/\" rel=\"nofollow noreferrer\">Generate all rotations of a number</a></p>\n<pre><code>public class Pattern28 {\n\n\n        // Function to return the count of digits of n\n        static int numberOfDigits(int n)\n        {\n            int cnt = 0;\n            while (n &gt; 0)\n            {\n                cnt++;\n                n /= 10;\n            }\n            return cnt;\n        }\n\n        // Function to print the left shift numbers\n        static void cal(int num)\n        {\n            int digits = numberOfDigits(num);\n            int powTen = (int) Math.pow(10, digits - 1);\n\n            for (int i = 0; i &lt; digits - 1; i++)\n            {\n                int firstDigit = num / powTen;\n\n                // Formula to calculate left shift\n                // from previous number\n                int left = ((num * 10) + firstDigit) -\n                        (firstDigit * powTen * 10);\n\n                System.out.println(left + &quot; &quot;);\n\n                // Update the original number\n                num = left;\n            }\n        }\n\n        // Driver Code\n        public static void main(String[] args)\n        {\n            int num = 1445;\n            Scanner sc = new Scanner(System.in);\n            System.out.println(&quot;Please enter your number ?&quot;);\n            int n = sc.nextInt();\n            cal(n);\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684804746,"creation_date":1684648148,"answer_id":76298475,"question_id":75720392,"body_markdown":"Append the first character of the string to the end, and `substring` the string at index `1`.\r\n\r\n```java\r\nString rotate(String string) {\r\n    return string.substring(1) + string.substring(0, 1);\r\n}\r\n```\r\n\r\n```java\r\nString string = &quot;13579&quot;;\r\ndo {\r\n    System.out.println(string);\r\n    string = rotate(string);\r\n} while (!string.equals(&quot;13579&quot;));\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n13579\r\n35791\r\n57913\r\n79135\r\n91357\r\n```\r\n\r\nIf you need all these values in a `String` array, you can use the following.\r\n\r\n```java\r\nString string = &quot;13579&quot;;\r\nString[] strings = new String[string.length()];\r\nfor (int index = 0; index &lt; strings.length; index++) {\r\n    strings[index] = string;\r\n    string = rotate(string);\r\n}\r\n```\r\n\r\nOutput of `strings`\r\n\r\n```none\r\n[13579, 35791, 57913, 79135, 91357]\r\n```","title":"In java how to print chars of a string from any particular index and after reaching end of string again start from index 0 if printed not equal length","body":"<p>Append the first character of the string to the end, and <code>substring</code> the string at index <code>1</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String rotate(String string) {\n    return string.substring(1) + string.substring(0, 1);\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>String string = &quot;13579&quot;;\ndo {\n    System.out.println(string);\n    string = rotate(string);\n} while (!string.equals(&quot;13579&quot;));\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>13579\n35791\n57913\n79135\n91357\n</code></pre>\n<p>If you need all these values in a <code>String</code> array, you can use the following.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String string = &quot;13579&quot;;\nString[] strings = new String[string.length()];\nfor (int index = 0; index &lt; strings.length; index++) {\n    strings[index] = string;\n    string = rotate(string);\n}\n</code></pre>\n<p>Output of <code>strings</code></p>\n<pre class=\"lang-none prettyprint-override\"><code>[13579, 35791, 57913, 79135, 91357]\n</code></pre>\n"}],"owner":{"account_id":20508639,"reputation":9,"user_id":15050866,"display_name":"Vaibhav"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"answer_count":2,"score":-4,"last_activity_date":1684804746,"creation_date":1678701872,"question_id":75720392,"body_markdown":"Basically I have a string of numbers and that string will be dynamic in nature both content wise and length wise ex. &quot;13579&quot;, &quot;12345789&quot; etc.\r\nIf the length of string is n then I want to create n strings from it.\r\nSuppose string is &quot;13579&quot; then I have to create 5 Strings from it starting from different index like below:\r\n```none\r\n13579\r\n35791\r\n57913\r\n79135\r\n91357\r\n```\r\nHow can I do this using a generic loop which works for all the string lengths?\r\n\r\nCan someone help?\r\n\r\nThank!!!\r\n\r\nEDIT:\r\n---\r\nHere is what I have tried\r\n\r\n    public class Pattern28 {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tScanner sc= new Scanner(System.in);\r\n\t\tint n= sc.nextInt();\r\n\t\tint i=1;\r\n\t\tint odd=1;\r\n\t\tString sNum=&quot;&quot;;\r\n\t\twhile(i&lt;=n) {\r\n\t\t\tint j=1;\r\n\t\t\tif(i==1) {\r\n\t\t\twhile(j&lt;=n) {\r\n\t\t\t   System.out.print(odd);\r\n\t\t\t if(i==1 &amp;&amp; j&lt;=n) sNum=sNum.concat(Integer.toString(odd)); //to get first row numbers in string\r\n\t\t\t\todd+=2;\r\n\t\t\t\tj++;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//System.out.println(&quot;im &quot;+sNum);\r\n\t\tj=i-1;\r\n\t\tif(i!=1) {\r\n\t\t\t//\tint k=i-1;\r\n\t\t\twhile(j&lt;=n) {\r\n\t\t\t\tSystem.out.print(sNum.charAt(j));\r\n\t\t\t\tj++;\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println();\r\n\t\ti++;\r\n\t}\r\n\t}\r\n    }\r\n\r\nStuck at last while loop. Every time I do something there I end up with &quot;java.lang.StringIndexOutOfBoundsException&quot; as index either reaches string length+ or goes in negative.","title":"In java how to print chars of a string from any particular index and after reaching end of string again start from index 0 if printed not equal length","body":"<p>Basically I have a string of numbers and that string will be dynamic in nature both content wise and length wise ex. &quot;13579&quot;, &quot;12345789&quot; etc.\nIf the length of string is n then I want to create n strings from it.\nSuppose string is &quot;13579&quot; then I have to create 5 Strings from it starting from different index like below:</p>\n<pre class=\"lang-none prettyprint-override\"><code>13579\n35791\n57913\n79135\n91357\n</code></pre>\n<p>How can I do this using a generic loop which works for all the string lengths?</p>\n<p>Can someone help?</p>\n<p>Thank!!!</p>\n<h2>EDIT:</h2>\n<p>Here is what I have tried</p>\n<pre><code>public class Pattern28 {\n\npublic static void main(String[] args) {\n    // TODO Auto-generated method stub\n    Scanner sc= new Scanner(System.in);\n    int n= sc.nextInt();\n    int i=1;\n    int odd=1;\n    String sNum=&quot;&quot;;\n    while(i&lt;=n) {\n        int j=1;\n        if(i==1) {\n        while(j&lt;=n) {\n           System.out.print(odd);\n         if(i==1 &amp;&amp; j&lt;=n) sNum=sNum.concat(Integer.toString(odd)); //to get first row numbers in string\n            odd+=2;\n            j++;\n        }\n    }\n    //System.out.println(&quot;im &quot;+sNum);\n    j=i-1;\n    if(i!=1) {\n        //  int k=i-1;\n        while(j&lt;=n) {\n            System.out.print(sNum.charAt(j));\n            j++;\n        }\n    }\n    System.out.println();\n    i++;\n}\n}\n}\n</code></pre>\n<p>Stuck at last while loop. Every time I do something there I end up with &quot;java.lang.StringIndexOutOfBoundsException&quot; as index either reaches string length+ or goes in negative.</p>\n"},{"tags":["java","arrays","parent-child"],"comments":[{"owner":{"account_id":45934,"reputation":203649,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":6,"creation_date":1684764167,"post_id":76306973,"comment_id":134560298,"body_markdown":"Because the array is declared as an `Animal[]`, in other words: according to the type of the variable, the type of the elements in the array is `Animal` and not some specific subtype of `Animal`. This doesn&#39;t have anything to do with arrays; it&#39;s exactly the same as with &#39;normal&#39; (non-array) variables.","body":"Because the array is declared as an <code>Animal[]</code>, in other words: according to the type of the variable, the type of the elements in the array is <code>Animal</code> and not some specific subtype of <code>Animal</code>. This doesn&#39;t have anything to do with arrays; it&#39;s exactly the same as with &#39;normal&#39; (non-array) variables."},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":1,"creation_date":1684764438,"post_id":76306973,"comment_id":134560369,"body_markdown":"You can check the runtime type of the array contents (e.g. with the instanceof operator) and cast to the resulting type. But this is usually a bad idea.","body":"You can check the runtime type of the array contents (e.g. with the instanceof operator) and cast to the resulting type. But this is usually a bad idea."},{"owner":{"account_id":1938802,"reputation":12091,"user_id":1745544,"accept_rate":23,"display_name":"OldProgrammer"},"score":1,"creation_date":1684765297,"post_id":76306973,"comment_id":134560591,"body_markdown":"Because that&#39;s not how polymorphism works.","body":"Because that&#39;s not how polymorphism works."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":1,"creation_date":1684765865,"post_id":76306973,"comment_id":134560765,"body_markdown":"An `Animal` is not a `Dog`. A list of animals can include any animal, not just dogs. Calling `setBreedOfDog` only makes sense for a dog. *(Tangential: `setBreed` is sufficient--you already know it&#39;s a `Dog`, and `setBreed` is a general-purpose method that might belong on `Animal`)*.","body":"An <code>Animal</code> is not a <code>Dog</code>. A list of animals can include any animal, not just dogs. Calling <code>setBreedOfDog</code> only makes sense for a dog. <i>(Tangential: <code>setBreed</code> is sufficient--you already know it&#39;s a <code>Dog</code>, and <code>setBreed</code> is a general-purpose method that might belong on <code>Animal</code>)</i>."},{"owner":{"account_id":14587108,"reputation":155,"user_id":10535520,"display_name":"Stone"},"score":2,"creation_date":1684765897,"post_id":76306973,"comment_id":134560774,"body_markdown":"You could abstract a method such as &quot;setBreed&quot; to Animal class, then you could call  Animal object&#39;s &quot;setBreed&quot; and actually invoke subclass&#39;s &quot;Dog&quot; method. This is polymorphism in Java.","body":"You could abstract a method such as &quot;setBreed&quot; to Animal class, then you could call  Animal object&#39;s &quot;setBreed&quot; and actually invoke subclass&#39;s &quot;Dog&quot; method. This is polymorphism in Java."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":2,"creation_date":1684766763,"post_id":76306973,"comment_id":134560975,"body_markdown":"Why are you putting an Animal in the dog instance? I assume a Dog is a subclass of Animal. Or are you not using inheritance?","body":"Why are you putting an Animal in the dog instance? I assume a Dog is a subclass of Animal. Or are you not using inheritance?"}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684804534,"creation_date":1684804534,"answer_id":76310741,"question_id":76306973,"body_markdown":"You&#39;ll need to cast your array item to the representing class, `Dog`.\r\n\r\n```java\r\nAnimal[] c = new Animal[6];\r\nc[0] = new Dog();\r\n((Dog) c[0]).setBreedOfDog(&quot;Pug&quot;);\r\n```","title":"Can I create an array of a parent class that contains its subclasses and then apply subclass methods to the array?","body":"<p>You'll need to cast your array item to the representing class, <code>Dog</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Animal[] c = new Animal[6];\nc[0] = new Dog();\n((Dog) c[0]).setBreedOfDog(&quot;Pug&quot;);\n</code></pre>\n"}],"owner":{"account_id":28654856,"reputation":33,"user_id":21941130,"display_name":"Smile D"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":1,"score":0,"last_activity_date":1684804534,"creation_date":1684763954,"question_id":76306973,"body_markdown":"In java, can I create an array of a parent class that contains its subclasses. Then after that, can I apply the methods found in the subclass to the object in the array.\r\n\r\n\r\nFor example, \r\n\r\n    Animal[] c =new Animal[6]; \r\n    \r\n    c[0] = new Dog(new Animal()); \r\n     \r\n    c[0].setBreedOfDog(&quot;Pug&quot;)\r\n\r\nIn this, I create an parent array using Animal, and then put in the subclass Dog into it. But when I try to use a setter in the Dog class, I get an error. **Can&#39;t I do this with pointers?** Can anyone tell me why this is. Thank you.\r\n","title":"Can I create an array of a parent class that contains its subclasses and then apply subclass methods to the array?","body":"<p>In java, can I create an array of a parent class that contains its subclasses. Then after that, can I apply the methods found in the subclass to the object in the array.</p>\n<p>For example,</p>\n<pre><code>Animal[] c =new Animal[6]; \n\nc[0] = new Dog(new Animal()); \n \nc[0].setBreedOfDog(&quot;Pug&quot;)\n</code></pre>\n<p>In this, I create an parent array using Animal, and then put in the subclass Dog into it. But when I try to use a setter in the Dog class, I get an error. <strong>Can't I do this with pointers?</strong> Can anyone tell me why this is. Thank you.</p>\n"},{"tags":["java","android","android-studio","webview","android-webview"],"answers":[{"tags":[],"owner":{"account_id":7162415,"reputation":121,"user_id":5472740,"display_name":"Youssef Wagih"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684804458,"creation_date":1684804458,"answer_id":76310736,"question_id":76306575,"body_markdown":"Add the below code statement\r\n\r\n        webView?.getSettings().setDomStorageEnabled(true);\r\n\r\nAlso add **www.** in the beginning of URL\r\n    \r\n\r\n    webView.loadUrl(&quot;https://www.softcommerceltd.com/&quot;)\r\n\r\nfor reference:\r\nhttps://stackoverflow.com/questions/16207094/android-webview-not-loading-url","title":"google.com is working in my webview app but when i run the app my website link is not appearing","body":"<p>Add the below code statement</p>\n<pre><code>    webView?.getSettings().setDomStorageEnabled(true);\n</code></pre>\n<p>Also add <strong>www.</strong> in the beginning of URL</p>\n<pre><code>webView.loadUrl(&quot;https://www.softcommerceltd.com/&quot;)\n</code></pre>\n<p>for reference:\n<a href=\"https://stackoverflow.com/questions/16207094/android-webview-not-loading-url\">Android WebView not loading URL</a></p>\n"}],"owner":{"account_id":12870885,"reputation":21,"user_id":9309388,"display_name":"Asikur Rahman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684804458,"creation_date":1684761224,"question_id":76306575,"body_markdown":"when i replace webView.loadUrl(&quot;https://softcommerceltd.com/&quot;); to webView.loadUrl(&quot;https://google.com/&quot;); then the app works fine , i can brows google and do everything. but when i put my website url then when i run the app the app shows blank activity. my internet is fine. how i can solve that issue? is that fault of my website? that website working fine in my browser.\r\n\r\nMainactivity.java: \r\n```\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private WebView webView;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        CustomWebViewClient client = new CustomWebViewClient(this);\r\n\r\n        webView = findViewById(R.id.webView);\r\n        webView.setWebViewClient(client);\r\n        webView.getSettings().setJavaScriptEnabled(true);\r\n        webView.loadUrl(&quot;https://softcommerceltd.com/&quot;);\r\n    }\r\n\r\n    @Override\r\n    public boolean onKeyDown(int keyCode, KeyEvent event){\r\n        if(keyCode == KeyEvent.KEYCODE_BACK &amp;&amp; this.webView.canGoBack()){\r\n            this.webView.goBack();\r\n            return true;\r\n        }\r\n        return super.onKeyDown(keyCode, event);\r\n    }\r\n}\r\n\r\nclass CustomWebViewClient extends WebViewClient{\r\n    private Activity activity;\r\n    public CustomWebViewClient(Activity activity){\r\n        this.activity = activity;\r\n    }\r\n\r\n    @Override\r\n    public boolean shouldOverrideUrlLoading(WebView webView, String url){\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    public boolean shouldOverrideUrlLoading(WebView webView, WebResourceRequest request){\r\n        return false;\r\n    }\r\n}\r\n```\r\n\r\nactivity_main.xml : \r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;&gt;\r\n\r\n    &lt;WebView\r\n        android:id=&quot;@+id/webView&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;/&gt;\r\n\r\n\r\n&lt;/LinearLayout&gt;\r\n```\r\n\r\nAndroidManifest.xml:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    package=&quot;com.tochy.webapp&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.Tochy&quot;&gt;\r\n        &lt;activity android:name=&quot;.MainActivity&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```","title":"google.com is working in my webview app but when i run the app my website link is not appearing","body":"<p>when i replace webView.loadUrl(&quot;https://softcommerceltd.com/&quot;); to webView.loadUrl(&quot;https://google.com/&quot;); then the app works fine , i can brows google and do everything. but when i put my website url then when i run the app the app shows blank activity. my internet is fine. how i can solve that issue? is that fault of my website? that website working fine in my browser.</p>\n<p>Mainactivity.java:</p>\n<pre><code>\npublic class MainActivity extends AppCompatActivity {\n\n    private WebView webView;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        CustomWebViewClient client = new CustomWebViewClient(this);\n\n        webView = findViewById(R.id.webView);\n        webView.setWebViewClient(client);\n        webView.getSettings().setJavaScriptEnabled(true);\n        webView.loadUrl(&quot;https://softcommerceltd.com/&quot;);\n    }\n\n    @Override\n    public boolean onKeyDown(int keyCode, KeyEvent event){\n        if(keyCode == KeyEvent.KEYCODE_BACK &amp;&amp; this.webView.canGoBack()){\n            this.webView.goBack();\n            return true;\n        }\n        return super.onKeyDown(keyCode, event);\n    }\n}\n\nclass CustomWebViewClient extends WebViewClient{\n    private Activity activity;\n    public CustomWebViewClient(Activity activity){\n        this.activity = activity;\n    }\n\n    @Override\n    public boolean shouldOverrideUrlLoading(WebView webView, String url){\n        return false;\n    }\n\n    @Override\n    public boolean shouldOverrideUrlLoading(WebView webView, WebResourceRequest request){\n        return false;\n    }\n}\n</code></pre>\n<p>activity_main.xml :</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;&gt;\n\n    &lt;WebView\n        android:id=&quot;@+id/webView&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;/&gt;\n\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>AndroidManifest.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    package=&quot;com.tochy.webapp&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.Tochy&quot;&gt;\n        &lt;activity android:name=&quot;.MainActivity&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n"},{"tags":["java","sockets","network-programming","nio","file-transfer"],"answers":[{"tags":[],"owner":{"account_id":152622,"reputation":490044,"user_id":367273,"accept_rate":96,"display_name":"NPE"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1316609694,"creation_date":1316609694,"answer_id":7500102,"question_id":7500059,"body_markdown":"At 2.8MB/s, it is unlikely that the slowness has anything to do with your code. It is almost certainly due to the wireless network not being able to achieve the theoretical throughput (possibly due to environmental conditions).\r\n\r\nIt&#39;s easy to test whether this is the case: simply time a large `ftp` or `scp` file transfer between the same two computers and see what kind of throughput you&#39;re seeing.","title":"Making file transfer more efficient Java","body":"<p>At 2.8MB/s, it is unlikely that the slowness has anything to do with your code. It is almost certainly due to the wireless network not being able to achieve the theoretical throughput (possibly due to environmental conditions).</p>\n\n<p>It's easy to test whether this is the case: simply time a large <code>ftp</code> or <code>scp</code> file transfer between the same two computers and see what kind of throughput you're seeing.</p>\n"},{"tags":[],"owner":{"account_id":13245,"reputation":5748,"user_id":26483,"display_name":"Peter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1316611563,"creation_date":1316610519,"answer_id":7500285,"question_id":7500059,"body_markdown":"Your timer is wrong ! you should start it after you accept the connection not when you start the host\r\n\r\nDid you try increasing your buffer size ?\r\n\r\n","title":"Making file transfer more efficient Java","body":"<p>Your timer is wrong ! you should start it after you accept the connection not when you start the host</p>\n\n<p>Did you try increasing your buffer size ?</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1319635332,"creation_date":1316611001,"answer_id":7500397,"question_id":7500059,"body_markdown":"I suggest you try the following code which prints\r\n\r\n    Wed Oct 26 14:21:03 BST 2011: Accepted a connection\r\n    Wed Oct 26 14:21:13 BST 2011: Transfer rate was 3212.5 MB/s\r\n\r\non the server and on the client prints\r\n\r\n    Wed Oct 26 14:21:03 BST 2011 Sending for 10.0 seconds.\r\n    Wed Oct 26 14:21:13 BST 2011 ... sent.\r\n    Wed Oct 26 14:21:13 BST 2011 ... received 33691287552\r\n    Send and received 3212.8 MB/s\r\n\r\nNote: the total amount transferred is double this as everything sent client to server is sent server to client.\r\n\r\n---\r\n\r\n    import java.io.IOException;\r\n    import java.net.InetSocketAddress;\r\n    import java.net.ServerSocket;\r\n    import java.net.Socket;\r\n    import java.nio.ByteBuffer;\r\n    import java.nio.channels.ServerSocketChannel;\r\n    import java.nio.channels.SocketChannel;\r\n    import java.util.Date;\r\n    \r\n    public class EchoServerMain {\r\n      public static void main(String... args) throws IOException {\r\n        int port = args.length &lt; 1 ? 55555 : Integer.parseInt(args[0]);\r\n        ServerSocketChannel ss = ServerSocketChannel.open();\r\n        ss.socket().bind(new InetSocketAddress(port));\r\n        while (!ss.socket().isClosed()) {\r\n          SocketChannel s = ss.accept();\r\n          System.out.println(new Date() + &quot;: Accepted a connection&quot;);\r\n          long start = System.nanoTime();\r\n          ByteBuffer bytes = ByteBuffer.allocateDirect(32*1024);\r\n          int len;\r\n          long total = 0;\r\n          // Thank you @EJP, for a more elegant single loop.\r\n          while ((len = s.read(bytes)) &gt;= 0 || bytes.position() &gt; 0) { \r\n            bytes.flip(); \r\n            s.write(bytes); \r\n            bytes.compact(); \r\n            total += len;\r\n          }\r\n          long time = System.nanoTime() - start;\r\n          System.out.printf(new Date() + &quot;: Transfer rate was %.1f MB/s%n&quot;, total * 1e9 / 1024 / 1024 / time);\r\n        }\r\n        ss.close();\r\n      }\r\n    }\r\n\r\nand\r\n\r\n    import java.io.EOFException;\r\n    import java.io.IOException;\r\n    import java.net.InetSocketAddress;\r\n    import java.net.Socket;\r\n    import java.net.UnknownHostException;\r\n    import java.nio.ByteBuffer;\r\n    import java.nio.channels.SocketChannel;\r\n    import java.util.Date;\r\n    \r\n    public class EchoClientMain {\r\n      public static void main(String ... args) throws IOException {\r\n        String hostname = args.length &lt; 1 ? &quot;localhost&quot; : args[0];\r\n        int port = args.length &lt; 2 ? 55555 : Integer.parseInt(args[1]);\r\n        double seconds = args.length &lt; 3 ? 10 : Double.parseDouble(args[2]);\r\n    \r\n        SocketChannel s = SocketChannel.open(new InetSocketAddress(hostname, port));\r\n        s.configureBlocking(false);\r\n        ByteBuffer bytes = ByteBuffer.allocateDirect(32*1024);\r\n    \r\n        System.out.printf(new Date()+ &quot; Sending for %.1f seconds.%n&quot;, seconds);\r\n        long start = System.nanoTime();\r\n        long dataSent = 0, dataReceived = 0;\r\n        // run for 10 seconds.\r\n        while(start + seconds*1e9 &gt; System.nanoTime()) {\r\n          bytes.clear();\r\n          int wlen = s.write(bytes);\r\n          if (wlen &lt; 0) throw new IOException();\r\n          dataSent += wlen;\r\n    \r\n          bytes.clear();\r\n          int rlen = s.read(bytes);\r\n          if (rlen &lt; 0) throw new EOFException();\r\n          dataReceived += rlen;\r\n        }\r\n        System.out.println(new Date()+ &quot; ... sent.&quot;);\r\n    \r\n        while(dataReceived &lt; dataSent) {\r\n          bytes.clear();\r\n          int rlen = s.read(bytes);\r\n          if (rlen &lt; 0) throw new EOFException();\r\n          dataReceived += rlen;\r\n        }\r\n        s.close();\r\n        long time = System.nanoTime() - start;\r\n        System.out.println(new Date()+ &quot; ... received &quot;+dataReceived);\r\n        System.out.printf(&quot;Send and received %.1f MB/s%n&quot;, dataReceived * 1e9/1024/1024/time);\r\n      }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n","title":"Making file transfer more efficient Java","body":"<p>I suggest you try the following code which prints</p>\n\n<pre><code>Wed Oct 26 14:21:03 BST 2011: Accepted a connection\nWed Oct 26 14:21:13 BST 2011: Transfer rate was 3212.5 MB/s\n</code></pre>\n\n<p>on the server and on the client prints</p>\n\n<pre><code>Wed Oct 26 14:21:03 BST 2011 Sending for 10.0 seconds.\nWed Oct 26 14:21:13 BST 2011 ... sent.\nWed Oct 26 14:21:13 BST 2011 ... received 33691287552\nSend and received 3212.8 MB/s\n</code></pre>\n\n<p>Note: the total amount transferred is double this as everything sent client to server is sent server to client.</p>\n\n<hr>\n\n<pre><code>import java.io.IOException;\nimport java.net.InetSocketAddress;\nimport java.net.ServerSocket;\nimport java.net.Socket;\nimport java.nio.ByteBuffer;\nimport java.nio.channels.ServerSocketChannel;\nimport java.nio.channels.SocketChannel;\nimport java.util.Date;\n\npublic class EchoServerMain {\n  public static void main(String... args) throws IOException {\n    int port = args.length &lt; 1 ? 55555 : Integer.parseInt(args[0]);\n    ServerSocketChannel ss = ServerSocketChannel.open();\n    ss.socket().bind(new InetSocketAddress(port));\n    while (!ss.socket().isClosed()) {\n      SocketChannel s = ss.accept();\n      System.out.println(new Date() + \": Accepted a connection\");\n      long start = System.nanoTime();\n      ByteBuffer bytes = ByteBuffer.allocateDirect(32*1024);\n      int len;\n      long total = 0;\n      // Thank you @EJP, for a more elegant single loop.\n      while ((len = s.read(bytes)) &gt;= 0 || bytes.position() &gt; 0) { \n        bytes.flip(); \n        s.write(bytes); \n        bytes.compact(); \n        total += len;\n      }\n      long time = System.nanoTime() - start;\n      System.out.printf(new Date() + \": Transfer rate was %.1f MB/s%n\", total * 1e9 / 1024 / 1024 / time);\n    }\n    ss.close();\n  }\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>import java.io.EOFException;\nimport java.io.IOException;\nimport java.net.InetSocketAddress;\nimport java.net.Socket;\nimport java.net.UnknownHostException;\nimport java.nio.ByteBuffer;\nimport java.nio.channels.SocketChannel;\nimport java.util.Date;\n\npublic class EchoClientMain {\n  public static void main(String ... args) throws IOException {\n    String hostname = args.length &lt; 1 ? \"localhost\" : args[0];\n    int port = args.length &lt; 2 ? 55555 : Integer.parseInt(args[1]);\n    double seconds = args.length &lt; 3 ? 10 : Double.parseDouble(args[2]);\n\n    SocketChannel s = SocketChannel.open(new InetSocketAddress(hostname, port));\n    s.configureBlocking(false);\n    ByteBuffer bytes = ByteBuffer.allocateDirect(32*1024);\n\n    System.out.printf(new Date()+ \" Sending for %.1f seconds.%n\", seconds);\n    long start = System.nanoTime();\n    long dataSent = 0, dataReceived = 0;\n    // run for 10 seconds.\n    while(start + seconds*1e9 &gt; System.nanoTime()) {\n      bytes.clear();\n      int wlen = s.write(bytes);\n      if (wlen &lt; 0) throw new IOException();\n      dataSent += wlen;\n\n      bytes.clear();\n      int rlen = s.read(bytes);\n      if (rlen &lt; 0) throw new EOFException();\n      dataReceived += rlen;\n    }\n    System.out.println(new Date()+ \" ... sent.\");\n\n    while(dataReceived &lt; dataSent) {\n      bytes.clear();\n      int rlen = s.read(bytes);\n      if (rlen &lt; 0) throw new EOFException();\n      dataReceived += rlen;\n    }\n    s.close();\n    long time = System.nanoTime() - start;\n    System.out.println(new Date()+ \" ... received \"+dataReceived);\n    System.out.printf(\"Send and received %.1f MB/s%n\", dataReceived * 1e9/1024/1024/time);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10448,"reputation":91684,"user_id":19746,"accept_rate":91,"display_name":"Piskvor left the building"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1316612250,"creation_date":1316612250,"answer_id":7500696,"question_id":7500059,"body_markdown":"Test the same program using a wired, Fast Ethernet (100Mbit/s) link between the computers (and then possibly using a 1Gbit link). That way, you&#39;ll see whether the transfer rate is actually limited by your program or by the link.","title":"Making file transfer more efficient Java","body":"<p>Test the same program using a wired, Fast Ethernet (100Mbit/s) link between the computers (and then possibly using a 1Gbit link). That way, you'll see whether the transfer rate is actually limited by your program or by the link.</p>\n"},{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684803640,"creation_date":1316696753,"answer_id":7515203,"question_id":7500059,"body_markdown":"Just set a very large socket send buffer, and if possible set a very large socket receive buffer at the receiver. Code &#39;optimizations&#39; contribute basically nothing to these scenarios.\r\n\r\nSet a very large socket receive buffer at the receiver, 256K or more. Use a `BufferedOutputStream` around the `FileOutputStream` so that you are always writing to block boundaries. NB your test `if (bytesRead &gt; 0)` can never be false. The only way `InputStream.read()` can return zero is if you supply a zero length buffer or a zero length parameter, and you aren&#39;t. I would get rid of the `println()` calls inside the loops.","title":"Making file transfer more efficient Java","body":"<p>Just set a very large socket send buffer, and if possible set a very large socket receive buffer at the receiver. Code 'optimizations' contribute basically nothing to these scenarios.</p>\n<p>Set a very large socket receive buffer at the receiver, 256K or more. Use a <code>BufferedOutputStream</code> around the <code>FileOutputStream</code> so that you are always writing to block boundaries. NB your test <code>if (bytesRead &gt; 0)</code> can never be false. The only way <code>InputStream.read()</code> can return zero is if you supply a zero length buffer or a zero length parameter, and you aren't. I would get rid of the <code>println()</code> calls inside the loops.</p>\n"}],"owner":{"account_id":331959,"reputation":15742,"user_id":656963,"accept_rate":90,"display_name":"David"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11506,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":7500102,"answer_count":5,"score":6,"last_activity_date":1684803692,"creation_date":1316609514,"question_id":7500059,"body_markdown":"I have two wireless computers connected to an N wireless router. Each of these PCs are connected at between 108-150Mbps. \r\n\r\nTheoretically, I should be able to transfer at 13.5MB/s to 18.75MB/s, under the absolute best of conditions.\r\n\r\nThe first computer (that is sending), uses a very fast SSD, which is around 100MB/s if I remember correctly. CPU usage also stays below 20%.\r\n\r\nIt sent 1960273535 bytes (1.8GB) in 656367ms. That&#39;s 2.8MB/s (22 out of 108 Megabits).\r\nWhen I open up task manager, I see that only 25-27% of the network connection is being used.\r\n\r\nI am looking for any ideas, suggestions, or improvements that can make the transfer faster (over a network). I was thinking of buffering the file from the disk on a thread and sending the buffered data from another thread but I&#39;m not sure if it&#39;s a good idea.\r\nHere is the SSCCE:\r\n\r\nHost:\r\n\r\n    import java.io.*;\r\n    import java.net.*;\r\n    \r\n    \r\n    public class Host {\r\n    \r\n    \r\n    \tpublic static void main(String[] args) throws IOException {\r\n    \t\t\r\n    \t\t\r\n    \t\tServerSocket servsock = new ServerSocket(15064);\r\n    \t\tSocket sock = servsock.accept();\r\n                long time = System.currentTimeMillis();\r\n\r\n    \t\tOutputStream out = sock.getOutputStream();\r\n    \t\tFileInputStream fileInputStream = new FileInputStream(&quot;C:\\\\complete.rar&quot;);\r\n    \r\n    \t\tbyte [] buffer = new byte[64*1024]; \r\n    \t\tint bytesRead = 0;\r\n    \t\tlong totalSent = 0;\r\n    \t\t\r\n    \t\twhile ( (bytesRead = fileInputStream.read(buffer)) != -1)\r\n    \t\t{\r\n    \t\t\tif (bytesRead &gt; 0)\r\n    \t\t\t{\t\r\n    \t\t\t\tout.write(buffer, 0, bytesRead);\r\n    \t\t\t\ttotalSent += bytesRead;\r\n    \t\t\t\tSystem.out.println(&quot;sent &quot; + totalSent);\r\n    \t\t\t}\t\r\n    \t\t}\r\n    \t\t\r\n    \t\tsock.close();\r\n    \t\t\r\n    \t\tSystem.out.println(&quot;Sent &quot; + totalSent + &quot; bytes in &quot;\r\n    \t\t\t\t+ (System.currentTimeMillis() - time) + &quot;ms.&quot;);\r\n    \t\t\r\n    \t}\r\n    }\r\n\r\n\r\nClient:\r\n\r\n    import java.io.*;\r\n    import java.net.*;\r\n    \r\n    public class Client {\r\n    \r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t\tSocket sock = new Socket(&quot;127.0.0.1&quot;, 15064);\r\n    \t\tInputStream in = sock.getInputStream();\r\n    \t\tFileOutputStream fileOutputStream = new FileOutputStream(&quot;output.rar&quot;);\r\n    \r\n    \t\tbyte [] buffer = new byte[64*1024]; \r\n    \t\tint bytesRead = 0;\r\n    \r\n    \t\twhile ( (bytesRead = in.read(buffer)) != -1)\r\n    \t\t\tfileOutputStream.write(buffer, 0, bytesRead);\r\n    \t\tsock.close();\r\n    \t\tfileOutputStream.close();\r\n    \t}\r\n    }\r\n\r\nEdit: I tried mapping a network drive and sending the file over that, and windows did even worse - 2.35MB/s. According to [this article][1] mapping a network drive is faster than FTP, and I also don&#39;t have the time to stay playing around and setting up the FTP server.\r\n\r\nEdit2: After changing the timer, turns out it was transferring at 3MB/s over WiFi. I hate the &quot;theoretical&quot; throughput. When I buy something, I want to know it&#39;s REAL performance.\r\nIt turns out the code is indeed limited by WiFi speeds. I am still open to suggestions though.\r\n\r\nEdit 3: After running the program on 100Mbps LAN, it managed to transfer the file at 11.8MB/s. That&#39;s pretty good considering that the maximum transfer rate is 12.5MB/s.\r\n\r\n\r\n  [1]: http://webcache.googleusercontent.com/search?q=cache:gWffoluxtm4J:www.seabreezecomputers.com/tips/filexfer.htm%20Fastest%20wireless%20Lan%20file%20transfer&amp;cd=1&amp;hl=en&amp;ct=clnk","title":"Making file transfer more efficient Java","body":"<p>I have two wireless computers connected to an N wireless router. Each of these PCs are connected at between 108-150Mbps.</p>\n<p>Theoretically, I should be able to transfer at 13.5MB/s to 18.75MB/s, under the absolute best of conditions.</p>\n<p>The first computer (that is sending), uses a very fast SSD, which is around 100MB/s if I remember correctly. CPU usage also stays below 20%.</p>\n<p>It sent 1960273535 bytes (1.8GB) in 656367ms. That's 2.8MB/s (22 out of 108 Megabits).\nWhen I open up task manager, I see that only 25-27% of the network connection is being used.</p>\n<p>I am looking for any ideas, suggestions, or improvements that can make the transfer faster (over a network). I was thinking of buffering the file from the disk on a thread and sending the buffered data from another thread but I'm not sure if it's a good idea.\nHere is the SSCCE:</p>\n<p>Host:</p>\n<pre><code>import java.io.*;\nimport java.net.*;\n\n\npublic class Host {\n\n\n    public static void main(String[] args) throws IOException {\n        \n        \n        ServerSocket servsock = new ServerSocket(15064);\n        Socket sock = servsock.accept();\n            long time = System.currentTimeMillis();\n\n        OutputStream out = sock.getOutputStream();\n        FileInputStream fileInputStream = new FileInputStream(&quot;C:\\\\complete.rar&quot;);\n\n        byte [] buffer = new byte[64*1024]; \n        int bytesRead = 0;\n        long totalSent = 0;\n        \n        while ( (bytesRead = fileInputStream.read(buffer)) != -1)\n        {\n            if (bytesRead &gt; 0)\n            {   \n                out.write(buffer, 0, bytesRead);\n                totalSent += bytesRead;\n                System.out.println(&quot;sent &quot; + totalSent);\n            }   \n        }\n        \n        sock.close();\n        \n        System.out.println(&quot;Sent &quot; + totalSent + &quot; bytes in &quot;\n                + (System.currentTimeMillis() - time) + &quot;ms.&quot;);\n        \n    }\n}\n</code></pre>\n<p>Client:</p>\n<pre><code>import java.io.*;\nimport java.net.*;\n\npublic class Client {\n\n    public static void main(String[] args) throws Exception {\n        Socket sock = new Socket(&quot;127.0.0.1&quot;, 15064);\n        InputStream in = sock.getInputStream();\n        FileOutputStream fileOutputStream = new FileOutputStream(&quot;output.rar&quot;);\n\n        byte [] buffer = new byte[64*1024]; \n        int bytesRead = 0;\n\n        while ( (bytesRead = in.read(buffer)) != -1)\n            fileOutputStream.write(buffer, 0, bytesRead);\n        sock.close();\n        fileOutputStream.close();\n    }\n}\n</code></pre>\n<p>Edit: I tried mapping a network drive and sending the file over that, and windows did even worse - 2.35MB/s. According to <a href=\"http://webcache.googleusercontent.com/search?q=cache:gWffoluxtm4J:www.seabreezecomputers.com/tips/filexfer.htm%20Fastest%20wireless%20Lan%20file%20transfer&amp;cd=1&amp;hl=en&amp;ct=clnk\" rel=\"nofollow noreferrer\">this article</a> mapping a network drive is faster than FTP, and I also don't have the time to stay playing around and setting up the FTP server.</p>\n<p>Edit2: After changing the timer, turns out it was transferring at 3MB/s over WiFi. I hate the &quot;theoretical&quot; throughput. When I buy something, I want to know it's REAL performance.\nIt turns out the code is indeed limited by WiFi speeds. I am still open to suggestions though.</p>\n<p>Edit 3: After running the program on 100Mbps LAN, it managed to transfer the file at 11.8MB/s. That's pretty good considering that the maximum transfer rate is 12.5MB/s.</p>\n"},{"tags":["java","html","string","listview","string-formatting"],"comments":[{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1486142503,"post_id":42029603,"comment_id":71233756,"body_markdown":"Apache commons has a function that escapes html aka converts characters to HTML entities. See function escapeHtml: https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringEscapeUtils.html","body":"Apache commons has a function that escapes html aka converts characters to HTML entities. See function escapeHtml: <a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringEscapeUtils.html\" rel=\"nofollow noreferrer\">commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/&zwnj;&#8203;&hellip;</a>"},{"owner":{"account_id":4785346,"reputation":787,"user_id":3960650,"display_name":"DejaVuSansMono"},"score":0,"creation_date":1486142639,"post_id":42029603,"comment_id":71233843,"body_markdown":"You could run this through an HTML reader. Though it isn&#39;t a complete document. https://docs.oracle.com/javase/7/docs/api/javax/swing/text/html/HTMLDocument.HTMLReader.html","body":"You could run this through an HTML reader. Though it isn&#39;t a complete document. <a href=\"https://docs.oracle.com/javase/7/docs/api/javax/swing/text/html/HTMLDocument.HTMLReader.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/javax/swing/text/html/&hellip;</a>"},{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1486143213,"post_id":42029603,"comment_id":71234155,"body_markdown":"Btw. Are you talking about an android ListView? in that case this might help: http://stackoverflow.com/questions/6502759/how-to-strip-or-escape-html-tags-in-android","body":"Btw. Are you talking about an android ListView? in that case this might help: <a href=\"http://stackoverflow.com/questions/6502759/how-to-strip-or-escape-html-tags-in-android\" title=\"how to strip or escape html tags in android\">stackoverflow.com/questions/6502759/&hellip;</a>"},{"owner":{"account_id":10170785,"reputation":41,"user_id":7511152,"display_name":"Giovanni Scieri"},"score":0,"creation_date":1486143563,"post_id":42029603,"comment_id":71234342,"body_markdown":"@DejaVuSansMono Sorry but I don&#39;t know how to do it. Can you explain better how to use it please?","body":"@DejaVuSansMono Sorry but I don&#39;t know how to do it. Can you explain better how to use it please?"}],"answers":[{"tags":[],"owner":{"account_id":120028,"reputation":35734,"user_id":312172,"accept_rate":86,"display_name":"user unknown"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1520669212,"creation_date":1520669212,"answer_id":49206797,"question_id":42029603,"body_markdown":"If you heal the html, it will be rendered fine by many Swing components, without assistance:\r\n\r\n    import javax.swing.*;\r\n    import java.awt.*;\r\n    \r\n    public class Se0124 extends JFrame\r\n    {\r\n        String myString = &quot;&lt;html&gt;&quot; +\r\n                       &quot;The accuracy of a potentiometer (pH meter) is&quot; +\r\n                       &quot;&amp;#177;0.1 mV. A solution contains 1x10&lt;SUP&gt;-4&lt;/SUP&gt; mol/L Cl&quot; +\r\n                       &quot;&lt;SUP&gt;-&lt;/SUP&gt; and 1x10&lt;SUP&gt;-3&lt;/SUP&gt; mol/L Ca&lt;SUP&gt;2+&lt;/SUP&gt;.&quot; +\r\n                       &quot;What is the error in concentration to be expected when measuring&quot; +\r\n                       &quot;these ions with a chloride or a calcium ion selective electrode?&quot; +\r\n                       &quot;&lt;/html&gt;&quot;;\r\n    \r\n    \tpublic Se0124 ()\r\n    \t{\r\n    \t\tsuper (&quot;Se0124&quot;);\r\n    \t\tJPanel mainpanel = new JPanel ();\r\n    \t\tmainpanel.setLayout (new BorderLayout ());\r\n    \t\tthis.getContentPane ().add (mainpanel);\r\n    \r\n    \t\tJLabel jl = new JLabel (myString);\r\n    \t\tmainpanel.add (jl, BorderLayout.CENTER);\r\n    \t\tsetSize (400, 400);\r\n    \t\tsetLocation (100, 100);\r\n    \t\tsetDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);\r\n    \t\tsetVisible (true);\r\n    \t}\r\n    \r\n    \tpublic static void main (String args[])\r\n    \t{\r\n            SwingUtilities.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    new Se0124 ();\r\n                }\r\n            });\r\n    \t}\r\n    }\r\n\r\nAs you can see, I have removed the trailing &lt;TABLE&gt;, which looks empty. Then I capsulated it in &lt;html&gt;&lt;/html&gt; tags. And I removed the backslashes from the slashes.\r\n\r\nThis can be done by regular expressions. Now SUP and SUB are rendered fine.\r\n\r\n","title":"Format html tag to a string java","body":"<p>If you heal the html, it will be rendered fine by many Swing components, without assistance:</p>\n\n<pre><code>import javax.swing.*;\nimport java.awt.*;\n\npublic class Se0124 extends JFrame\n{\n    String myString = \"&lt;html&gt;\" +\n                   \"The accuracy of a potentiometer (pH meter) is\" +\n                   \"&amp;#177;0.1 mV. A solution contains 1x10&lt;SUP&gt;-4&lt;/SUP&gt; mol/L Cl\" +\n                   \"&lt;SUP&gt;-&lt;/SUP&gt; and 1x10&lt;SUP&gt;-3&lt;/SUP&gt; mol/L Ca&lt;SUP&gt;2+&lt;/SUP&gt;.\" +\n                   \"What is the error in concentration to be expected when measuring\" +\n                   \"these ions with a chloride or a calcium ion selective electrode?\" +\n                   \"&lt;/html&gt;\";\n\n    public Se0124 ()\n    {\n        super (\"Se0124\");\n        JPanel mainpanel = new JPanel ();\n        mainpanel.setLayout (new BorderLayout ());\n        this.getContentPane ().add (mainpanel);\n\n        JLabel jl = new JLabel (myString);\n        mainpanel.add (jl, BorderLayout.CENTER);\n        setSize (400, 400);\n        setLocation (100, 100);\n        setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);\n        setVisible (true);\n    }\n\n    public static void main (String args[])\n    {\n        SwingUtilities.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                new Se0124 ();\n            }\n        });\n    }\n}\n</code></pre>\n\n<p>As you can see, I have removed the trailing , which looks empty. Then I capsulated it in  tags. And I removed the backslashes from the slashes.</p>\n\n<p>This can be done by regular expressions. Now SUP and SUB are rendered fine.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684803165,"creation_date":1684802274,"answer_id":76310638,"question_id":42029603,"body_markdown":"You can use the `String.replaceAll` method to replace all occurrences of a specified regular expression.\r\n\r\nExample\r\n\r\n```java\r\nmyString = myString.replaceAll(&quot;&lt;\\\\s*.+?&gt;&quot;, &quot;&quot;);\r\n```\r\n\r\nOutput (I&#39;ve added new lines, to provide readablity)\r\n```none\r\nThe accuracy of a potentiometer (pH meter) is\r\n&amp;#177;0.1 mV. A solution contains 1x10-4 mol/L Cl\r\n- and 1x10-3 mol/L Ca2+.\r\nWhat is the error in concentration to be expected when measuring\r\nthese ions with a chloride or a calcium ion selective electrode?\r\n     &amp;nbsp;\r\n```\r\n\r\nIn regard to the entity value, `&amp;#177;`, this is a trivial task.\r\n\r\nYou _could_ create a method to capture the value, and parse it to it&#39;s Unicode equivalent, although not all entities use the Unicode value, sometimes it&#39;s a literal, such as &quot;amp&quot;, or &quot;lt&quot;.\r\n\r\nMany people choose to use the Apache Commons Text library, to decode entities.\r\n\r\n[StringEscapeUtils (Apache Commons Text 1.10.0 API)](https://commons.apache.org/proper/commons-text/apidocs/org/apache/commons/text/StringEscapeUtils.html#unescapeHtml4-java.lang.String-)","title":"Format html tag to a string java","body":"<p>You can use the <code>String.replaceAll</code> method to replace all occurrences of a specified regular expression.</p>\n<p>Example</p>\n<pre class=\"lang-java prettyprint-override\"><code>myString = myString.replaceAll(&quot;&lt;\\\\s*.+?&gt;&quot;, &quot;&quot;);\n</code></pre>\n<p>Output (I've added new lines, to provide readablity)</p>\n<pre class=\"lang-none prettyprint-override\"><code>The accuracy of a potentiometer (pH meter) is\n&amp;#177;0.1 mV. A solution contains 1x10-4 mol/L Cl\n- and 1x10-3 mol/L Ca2+.\nWhat is the error in concentration to be expected when measuring\nthese ions with a chloride or a calcium ion selective electrode?\n     &amp;nbsp;\n</code></pre>\n<p>In regard to the entity value, <code>&amp;#177;</code>, this is a trivial task.</p>\n<p>You <em>could</em> create a method to capture the value, and parse it to it's Unicode equivalent, although not all entities use the Unicode value, sometimes it's a literal, such as &quot;amp&quot;, or &quot;lt&quot;.</p>\n<p>Many people choose to use the Apache Commons Text library, to decode entities.</p>\n<p><a href=\"https://commons.apache.org/proper/commons-text/apidocs/org/apache/commons/text/StringEscapeUtils.html#unescapeHtml4-java.lang.String-\" rel=\"nofollow noreferrer\">StringEscapeUtils (Apache Commons Text 1.10.0 API)</a></p>\n"}],"owner":{"account_id":10170785,"reputation":41,"user_id":7511152,"display_name":"Giovanni Scieri"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2328,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1684803165,"creation_date":1486142214,"question_id":42029603,"body_markdown":"I need help\r\nI have a string like this \r\n\r\n    String myString = &quot;The accuracy of a potentiometer (pH meter) is\r\n                       &amp;#177;0.1 mV. A solution contains 1x10&lt;SUP&gt;-4&lt;\\/SUP&gt; mol\\/L Cl\r\n                       &lt;SUP&gt;-&lt;\\/SUP&gt; and 1x10&lt;SUP&gt;-3&lt;\\/SUP&gt; mol\\/L Ca&lt;SUP&gt;2+&lt;\\/SUP&gt;. \r\n                       What is the error in concentration to be expected when measuring\r\n                       these ions with a chloride or a calcium ion selective electrode? \r\n                       &lt;TABLE BORDER=0 ALIGN=CENTER&gt; &lt;TR&gt;&lt;TD&gt;    &lt;\\/TD&gt;&lt;TD&gt;&amp;nbsp;&lt;\\/TD&gt;&lt;TD&gt;\r\n                       &lt;\\/TD&gt;&lt;\\/TR&gt;&lt;\\/TABLE&gt;&quot;;\r\n\r\nI have to show this string in a listView but obviously when I print it there are these html tags. \r\n\r\nI already tried to get rid of the tags but if so I lost informations (like -4 as superscipt). \r\nI&#39;d like to know if it is possible to format the string in a proper way.\r\n\r\nThanks\r\n\r\n**UPDATE:**\r\n\r\nI have partially solved by using Html.fromHtml(String)\r\n\r\n    public String processString(String html) {\r\n        Spanned spanned;\r\n        if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.N) {\r\n            spanned = Html.fromHtml(html, Html.FROM_HTML_MODE_LEGACY);\r\n        } else {\r\n            spanned = Html.fromHtml(html);\r\n        }\r\n        return spanned.toString();\r\n    }\r\nNow the problem is that the &lt;IMG&gt; tag is displayed like an obj icon\r\n[![image][1]][1] \r\nand i don&#39;t know how to visualize them.\r\n\r\nIs it possible?\r\n\r\n  [1]: https://i.stack.imgur.com/itvF1.png","title":"Format html tag to a string java","body":"<p>I need help\nI have a string like this </p>\n\n<pre><code>String myString = \"The accuracy of a potentiometer (pH meter) is\n                   &amp;#177;0.1 mV. A solution contains 1x10&lt;SUP&gt;-4&lt;\\/SUP&gt; mol\\/L Cl\n                   &lt;SUP&gt;-&lt;\\/SUP&gt; and 1x10&lt;SUP&gt;-3&lt;\\/SUP&gt; mol\\/L Ca&lt;SUP&gt;2+&lt;\\/SUP&gt;. \n                   What is the error in concentration to be expected when measuring\n                   these ions with a chloride or a calcium ion selective electrode? \n                   &lt;TABLE BORDER=0 ALIGN=CENTER&gt; &lt;TR&gt;&lt;TD&gt;    &lt;\\/TD&gt;&lt;TD&gt;&amp;nbsp;&lt;\\/TD&gt;&lt;TD&gt;\n                   &lt;\\/TD&gt;&lt;\\/TR&gt;&lt;\\/TABLE&gt;\";\n</code></pre>\n\n<p>I have to show this string in a listView but obviously when I print it there are these html tags. </p>\n\n<p>I already tried to get rid of the tags but if so I lost informations (like -4 as superscipt). \nI'd like to know if it is possible to format the string in a proper way.</p>\n\n<p>Thanks</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>I have partially solved by using Html.fromHtml(String)</p>\n\n<pre><code>public String processString(String html) {\n    Spanned spanned;\n    if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.N) {\n        spanned = Html.fromHtml(html, Html.FROM_HTML_MODE_LEGACY);\n    } else {\n        spanned = Html.fromHtml(html);\n    }\n    return spanned.toString();\n}\n</code></pre>\n\n<p>Now the problem is that the  tag is displayed like an obj icon\n<a href=\"https://i.stack.imgur.com/itvF1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/itvF1.png\" alt=\"image\"></a> \nand i don't know how to visualize them.</p>\n\n<p>Is it possible?</p>\n"},{"tags":["java","spring-webflux","spring-data-r2dbc","r2dbc-mysql"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1672533848,"post_id":74972672,"comment_id":132303997,"body_markdown":"Put a breakpoint where the cast is attempted and see if you can figure out what is happening by looking at values up the stack.","body":"Put a breakpoint where the cast is attempted and see if you can figure out what is happening by looking at values up the stack."},{"owner":{"account_id":216950,"reputation":20103,"user_id":472495,"accept_rate":92,"display_name":"halfer"},"score":0,"creation_date":1677736067,"post_id":74972672,"comment_id":133397623,"body_markdown":"Note that we prefer a technical style of writing here. We gently discourage greetings, hope-you-can-helps, thanks, advance thanks, notes of appreciation, regards, kind regards, signatures, please-can-you-helps, chatty material and abbreviated txtspk, pleading, how long you&#39;ve been stuck, voting advice, meta commentary, etc. Just explain your problem, and show what you&#39;ve tried, what you expected, and what actually happened.","body":"Note that we prefer a technical style of writing here. We gently discourage greetings, hope-you-can-helps, thanks, advance thanks, notes of appreciation, regards, kind regards, signatures, please-can-you-helps, chatty material and abbreviated txtspk, pleading, how long you&#39;ve been stuck, voting advice, meta commentary, etc. Just explain your problem, and show what you&#39;ve tried, what you expected, and what actually happened."}],"answers":[{"tags":[],"owner":{"account_id":480584,"reputation":8226,"user_id":893898,"accept_rate":42,"display_name":"Hantsy"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1684802787,"creation_date":1672639438,"answer_id":74979387,"question_id":74972672,"body_markdown":"If you are using https://github.com/mirromutth/r2dbc-mysql 0.8.x RELEASE and the latest Spring Boot 2.7 or Spring Boot 3.0.x, I think there is a compatibility issue between the R2dbc MySQL driver you are using and R2dbc SPI managed by Spring Boot.\r\n\r\nIn the latest Spring Boot 3.0, R2dbc SPI was updated to 1.0, which introduced several incompatible APIs since 0.8(r2dbc-mysql 0.8.x RELEASE is aligned with R2dbc SPI 0.8). **I have encountered similar exceptions when upgrading to R2dbc 0.9 and 1.0 but used driver version is incompatible**.\r\n\r\n* Try to use the latest [MariaDB R2dbc Driver](https://github.com/mariadb-corporation/mariadb-connector-r2dbc) to connect your MySQL\r\n* Consider other database, eg. PostgreSQL or switch to MariaDB directly.\r\n\r\n\r\n**Update(2023-5-23)**: In the latest Spring Boot 3.x, it includes [jasycn r2dbc mysql](https://github.com/jasync-sql/jasync-sql/tree/master/r2dbc-mysql) instead of the original [r2dbc mysql driver](https://github.com/mirromutth/r2dbc-mysql) which is not active and stick on the old R2dbc SPI 0.8.","title":"java.lang.Integer cannot be cast to class java.lang.Long in R2DBC mysql model classes","body":"<p>If you are using <a href=\"https://github.com/mirromutth/r2dbc-mysql\" rel=\"nofollow noreferrer\">https://github.com/mirromutth/r2dbc-mysql</a> 0.8.x RELEASE and the latest Spring Boot 2.7 or Spring Boot 3.0.x, I think there is a compatibility issue between the R2dbc MySQL driver you are using and R2dbc SPI managed by Spring Boot.</p>\n<p>In the latest Spring Boot 3.0, R2dbc SPI was updated to 1.0, which introduced several incompatible APIs since 0.8(r2dbc-mysql 0.8.x RELEASE is aligned with R2dbc SPI 0.8). <strong>I have encountered similar exceptions when upgrading to R2dbc 0.9 and 1.0 but used driver version is incompatible</strong>.</p>\n<ul>\n<li>Try to use the latest <a href=\"https://github.com/mariadb-corporation/mariadb-connector-r2dbc\" rel=\"nofollow noreferrer\">MariaDB R2dbc Driver</a> to connect your MySQL</li>\n<li>Consider other database, eg. PostgreSQL or switch to MariaDB directly.</li>\n</ul>\n<p><strong>Update(2023-5-23)</strong>: In the latest Spring Boot 3.x, it includes <a href=\"https://github.com/jasync-sql/jasync-sql/tree/master/r2dbc-mysql\" rel=\"nofollow noreferrer\">jasycn r2dbc mysql</a> instead of the original <a href=\"https://github.com/mirromutth/r2dbc-mysql\" rel=\"nofollow noreferrer\">r2dbc mysql driver</a> which is not active and stick on the old R2dbc SPI 0.8.</p>\n"},{"tags":[],"owner":{"account_id":4285658,"reputation":1,"user_id":3503558,"display_name":"AlekseiG"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675929194,"creation_date":1675929194,"answer_id":75395646,"question_id":74972672,"body_markdown":"Helped for me change dependency from \r\n\r\n    implementation(&quot;org.postgresql:r2dbc-postgresql:1.0.0.RELEASE&quot;)\r\n\r\nto\r\n\r\n    \r\n    implementation(&quot;io.r2dbc:r2dbc-postgresql:0.8.13.RELEASE&quot;)\r\n\r\nfor springboot 2.7.6\r\n\r\nThanks to Hantsy.","title":"java.lang.Integer cannot be cast to class java.lang.Long in R2DBC mysql model classes","body":"<p>Helped for me change dependency from</p>\n<pre><code>implementation(&quot;org.postgresql:r2dbc-postgresql:1.0.0.RELEASE&quot;)\n</code></pre>\n<p>to</p>\n<pre><code>implementation(&quot;io.r2dbc:r2dbc-postgresql:0.8.13.RELEASE&quot;)\n</code></pre>\n<p>for springboot 2.7.6</p>\n<p>Thanks to Hantsy.</p>\n"},{"tags":[],"owner":{"account_id":25264024,"reputation":11,"user_id":19094502,"display_name":"Anton Kotov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678987535,"creation_date":1678987535,"answer_id":75759656,"question_id":74972672,"body_markdown":"I had the same issue on delete operations with latest kotlin: 1.8.10, spring-boot: 3.0.4, r2dbc-spi: 1.0.0.RELEASE, r2dbc-postgresql: 1.0.1.RELEASE and jooq: 3.17.8.\r\n\r\nIt is interesting to note that the same code worked in coroutine style, when I converted jooq r2dbc publishers to suspend function with awaitSingle() method. But it failed in reactor mode.\r\n\r\nNevertheless the issue was resolved by updating jooq version to 3.18.0.","title":"java.lang.Integer cannot be cast to class java.lang.Long in R2DBC mysql model classes","body":"<p>I had the same issue on delete operations with latest kotlin: 1.8.10, spring-boot: 3.0.4, r2dbc-spi: 1.0.0.RELEASE, r2dbc-postgresql: 1.0.1.RELEASE and jooq: 3.17.8.</p>\n<p>It is interesting to note that the same code worked in coroutine style, when I converted jooq r2dbc publishers to suspend function with awaitSingle() method. But it failed in reactor mode.</p>\n<p>Nevertheless the issue was resolved by updating jooq version to 3.18.0.</p>\n"},{"tags":[],"owner":{"account_id":26348420,"reputation":11,"user_id":20006426,"display_name":"jchrys"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681245089,"creation_date":1681108447,"answer_id":75974790,"question_id":74972672,"body_markdown":"I assume you&#39;re using a recent version of Spring Boot and Spring Framework.\r\n\r\nThe issue&#39;s root cause is using r2dbc-spi:1.0.0, which requires `getRowsUpdated()` to return a Long, but you&#39;re using dev.miku:r2dbc-mysql:0.8.2, which returns an Integer.\r\n\r\nI suggest switching to [`io.asyncer:r2dbc-mysql:1.0.0`][1] which is official successor to `dev.miku:r2dbc-mysql`. for more information see the [Deprecation NEWS][2]\r\n\r\n\r\n  [1]: https://github.com/asyncer-io/r2dbc-mysql\r\n  [2]: https://github.com/mirromutth/r2dbc-mysql/issues/251","title":"java.lang.Integer cannot be cast to class java.lang.Long in R2DBC mysql model classes","body":"<p>I assume you're using a recent version of Spring Boot and Spring Framework.</p>\n<p>The issue's root cause is using r2dbc-spi:1.0.0, which requires <code>getRowsUpdated()</code> to return a Long, but you're using dev.miku:r2dbc-mysql:0.8.2, which returns an Integer.</p>\n<p>I suggest switching to <a href=\"https://github.com/asyncer-io/r2dbc-mysql\" rel=\"nofollow noreferrer\"><code>io.asyncer:r2dbc-mysql:1.0.0</code></a> which is official successor to <code>dev.miku:r2dbc-mysql</code>. for more information see the <a href=\"https://github.com/mirromutth/r2dbc-mysql/issues/251\" rel=\"nofollow noreferrer\">Deprecation NEWS</a></p>\n"},{"tags":[],"owner":{"account_id":6146647,"reputation":121,"user_id":4792411,"display_name":"naav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684235906,"creation_date":1684235906,"answer_id":76262411,"question_id":74972672,"body_markdown":"The compatibility now seems to be documented and can be found here https://github.com/asyncer-io/r2dbc-mysql#spring-framework-and-r2dbc-spi-compatibility","title":"java.lang.Integer cannot be cast to class java.lang.Long in R2DBC mysql model classes","body":"<p>The compatibility now seems to be documented and can be found here <a href=\"https://github.com/asyncer-io/r2dbc-mysql#spring-framework-and-r2dbc-spi-compatibility\" rel=\"nofollow noreferrer\">https://github.com/asyncer-io/r2dbc-mysql#spring-framework-and-r2dbc-spi-compatibility</a></p>\n"}],"owner":{"account_id":4750876,"reputation":1347,"user_id":3840940,"accept_rate":87,"display_name":"Joseph Hwang"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1905,"favorite_count":0,"down_vote_count":2,"up_vote_count":4,"accepted_answer_id":74979387,"answer_count":5,"score":2,"last_activity_date":1684802787,"creation_date":1672533484,"question_id":74972672,"body_markdown":"I use R2DBC MySQL driver in my Spring Webflux reactive web. And I try to execute table schema SQL script. But the script continuously cause errors. \r\n\r\nFirst, I make 3 model classes.\r\n\r\n**User.java**\r\n\r\n    @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Builder \r\n    @Table(&quot;blog_user&quot;) \r\n    public class User {\r\n     \t \r\n     \t@Id\r\n     \t@Column(&quot;user_id&quot;)\r\n     \tprivate Long id;\r\n     \t\r\n     \t@Column\r\n     \tprivate String username;\r\n     \r\n     \t@Column\r\n     \t@JsonIgnore\r\n     \tprivate String password;\r\n     \t \r\n     \t@Column\r\n     \tprivate String fullname;\r\n     \t\r\n     \t@Column\r\n    \tprivate Integer role;\r\n    }\r\n\r\n**Post.java**\r\n\r\n    @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Builder\r\n    @Table\r\n    public class Post {\r\n     \r\n     \t@Id\r\n     \t@Column(&quot;post_id&quot;)\r\n     \tprivate Long id;\r\n     \t\r\n     \t@Column\r\n     \tprivate String title;\r\n      \r\n     \t@Column\r\n    \tprivate String body;\r\n    \t\t\r\n     \t@Column(&quot;created_date&quot;)\r\n     \tprivate LocalDateTime createdDate;\r\n     \t\r\n     \t@Column(&quot;user_id&quot;)\r\n     \tprivate User user;\r\n     \t\r\n     \t@Column(&quot;posts&quot;)\r\n     \tprivate Collection&lt;Tag&gt; tags;\r\n    }\r\n\r\n\r\n**Tag.java**\r\n\r\n    @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Builder\r\n    @Table\r\n    public class Tag {\r\n      \r\n     \t@Id\r\n     \t@Column(&quot;tag_id&quot;)\r\n     \tprivate Long id;\r\n     \t\r\n     \t@Column\r\n     \tprivate String body;\r\n     \t\r\n     \t@Column(&quot;created_date&quot;)\r\n     \tprivate LocalDateTime createdDate;\r\n     \t\r\n     \t@Column(&quot;post_id&quot;)\r\n     \tprivate Post post;\r\n     \t\t\r\n     \t@Column(&quot;user_id&quot;)\r\n     \tprivate User user;\r\n    }\r\n\r\n**schema.sql**\r\n\r\n    -- TABLE intialized.\r\n    DROP TABLE IF EXISTS tag;\r\n    DROP TABLE IF EXISTS post;\r\n    DROP TABLE IF EXISTS blog_user;\r\n    \r\n    \r\n    -- TABLE created.\r\n    CREATE TABLE IF NOT EXISTS blog_user (\r\n    \tuser_id BIGINT NOT NULL,\r\n    \tusername VARCHAR(30) NOT NULL,\r\n    \tpassword VARCHAR(255) NOT NULL,\r\n    \temail VARCHAR(255),\r\n    \tfullname VARCHAR(255),\r\n    \trole SMALLINT CHECK (role IN (0, 1)),\r\n    \r\n    \tPRIMARY KEY (user_id),\r\n    \tUNIQUE (username)\r\n    );\r\n    \r\n    CREATE TABLE IF NOT EXISTS post (\r\n    \tpost_id BIGINT NOT NULL,\r\n    \ttitle VARCHAR(30) NOT NULL,\r\n    \tbody TEXT,\r\n    \tcreated_date DATETIME(6) NOT NULL,\r\n    \tuser_id BIGINT NOT NULL,\r\n    \r\n    \tPRIMARY KEY (post_id),\r\n    \tFOREIGN KEY (user_id) REFERENCES blog_user (user_id)\r\n    );\r\n    \r\n    CREATE TABLE IF NOT EXISTS tag(\r\n    \ttag_id BIGINT NOT NULL,\r\n    \tbody VARCHAR(255),\r\n    \tcreated_date DATETIME(6) NOT NULL,\r\n    \tpost_id BIGINT NOT NULL,\r\n    \tuser_id BIGINT NOT NULL,\r\n    \r\n    \tPRIMARY KEY (tag_id),\r\n    \tFOREIGN KEY (post_id) REFERENCES post (post_id),\r\n    \tFOREIGN KEY (user_id) REFERENCES blog_user (user_id)\r\n    );\r\n\r\nBelow configuration method executes schema.sql.\r\n\r\n**reactive web initializer method** \r\n\r\n    @Bean\r\n    ConnectionFactoryInitializer initializer(ConnectionFactory connectionFactory) {\r\n    \r\n            ConnectionFactoryInitializer initializer = new ConnectionFactoryInitializer();\r\n            initializer.setConnectionFactory(connectionFactory);\r\n            \r\n            ResourceDatabasePopulator databasePopulator = new ResourceDatabasePopulator();\r\n            databasePopulator.addScripts(new ClassPathResource(schema.sql));\r\n            initializer.setDatabasePopulator(databasePopulator);\r\n    \r\n    \r\n            return initializer;\r\n    }\r\n\r\nHowever, initially executed schema.sql throws errors,\r\n\r\n    Error starting ApplicationContext. To display the condition evaluation report re-run your application with &#39;debug&#39; enabled.\r\n    [2m2023-01-01T09:06:30.943+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that&#39;s unknown, trying to use system default timezone\r\n    [2m2023-01-01T09:06:30.945+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that&#39;s unknown, trying to use system default timezone\r\n    [2m2023-01-01T09:06:30.947+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that&#39;s unknown, trying to use system default timezone\r\n    [2m2023-01-01T09:06:30.948+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that&#39;s unknown, trying to use system default timezone\r\n    [2m2023-01-01T09:06:30.951+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that&#39;s unknown, trying to use system default timezone\r\n    [2m2023-01-01T09:06:30.953+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that&#39;s unknown, trying to use system default timezone\r\n    [2m2023-01-01T09:06:30.955+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that&#39;s unknown, trying to use system default timezone\r\n    [2m2023-01-01T09:06:30.974+09:00[0;39m [31mERROR[0;39m [35m10464[0;39m [2m---[0;39m [2m[  restartedMain][0;39m [36mo.s.boot.SpringApplication              [0;39m [2m:[0;39m Application run failed\r\n    \r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;initializer&#39; defined in class path resource [com/aaa/blog/wf/config/BlogWebFluxConfig.class]: Failed to execute SQL script statement #1 of class path resource [sql/spring-boot-mysql-schema.sql]: DROP TABLE IF EXISTS tag\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:915) ~[spring-context-6.0.3.jar:6.0.3]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584) ~[spring-context-6.0.3.jar:6.0.3]\r\n    \tat org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-3.0.1.jar:3.0.1]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[spring-boot-3.0.1.jar:3.0.1]\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432) ~[spring-boot-3.0.1.jar:3.0.1]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-3.0.1.jar:3.0.1]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-3.0.1.jar:3.0.1]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[spring-boot-3.0.1.jar:3.0.1]\r\n    \tat com.aaa.blog.wf.SpringBlogWebFluxMySqlApplication.main(SpringBlogWebFluxMySqlApplication.java:10) ~[classes/:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n    \tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-3.0.1.jar:3.0.1]\r\n    Caused by: org.springframework.r2dbc.connection.init.ScriptStatementFailedException: Failed to execute SQL script statement #1 of class path resource [sql/spring-boot-mysql-schema.sql]: DROP TABLE IF EXISTS tag\r\n    \tat org.springframework.r2dbc.connection.init.ScriptUtils.lambda$runStatement$9(ScriptUtils.java:571) ~[spring-r2dbc-6.0.3.jar:6.0.3]\r\n    \tat reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onError(FluxOnErrorResume.java:94) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.MonoStreamCollector$StreamCollectorSubscriber.onError(MonoStreamCollector.java:149) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.MonoStreamCollector$StreamCollectorSubscriber.onNext(MonoStreamCollector.java:126) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.FluxFlatMap$FlatMapMain.tryEmit(FluxFlatMap.java:543) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.FluxFlatMap$FlatMapInner.onNext(FluxFlatMap.java:984) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1839) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.NextProcessor.tryEmitValue(NextProcessor.java:358) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.NextProcessor.onNext(NextProcessor.java:298) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat dev.miku.r2dbc.mysql.MySqlResult.lambda$null$3(MySqlResult.java:114) ~[r2dbc-mysql-0.8.2.RELEASE.jar:0.8.2.RELEASE]\r\n    \tat reactor.core.publisher.LambdaSubscriber.onNext(LambdaSubscriber.java:160) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.FluxWindowPredicate$WindowFlux.drainRegular(FluxWindowPredicate.java:670) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.FluxWindowPredicate$WindowFlux.drain(FluxWindowPredicate.java:748) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.FluxWindowPredicate$WindowFlux.onNext(FluxWindowPredicate.java:790) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.FluxWindowPredicate$WindowPredicateMain.onNext(FluxWindowPredicate.java:241) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.FluxHandleFuseable$HandleFuseableSubscriber.onNext(FluxHandleFuseable.java:193) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat dev.miku.r2dbc.mysql.util.DiscardOnCancelSubscriber.onNext(DiscardOnCancelSubscriber.java:70) ~[r2dbc-mysql-0.8.2.RELEASE.jar:0.8.2.RELEASE]\r\n    \tat reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onNext(FluxPeekFuseable.java:854) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onNext(MonoFlatMapMany.java:250) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.FluxHandle$HandleSubscriber.onNext(FluxHandle.java:128) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onNext(FluxPeekFuseable.java:854) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.EmitterProcessor.drain(EmitterProcessor.java:537) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.EmitterProcessor.tryEmitNext(EmitterProcessor.java:343) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.InternalManySink.emitNext(InternalManySink.java:27) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.EmitterProcessor.onNext(EmitterProcessor.java:309) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat dev.miku.r2dbc.mysql.client.ReactorNettyClient$ResponseSink.next(ReactorNettyClient.java:340) ~[r2dbc-mysql-0.8.2.RELEASE.jar:0.8.2.RELEASE]\r\n    \tat dev.miku.r2dbc.mysql.client.ReactorNettyClient.lambda$new$0(ReactorNettyClient.java:103) ~[r2dbc-mysql-0.8.2.RELEASE.jar:0.8.2.RELEASE]\r\n    \tat reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:185) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.netty.channel.FluxReceive.drainReceiver(FluxReceive.java:292) ~[reactor-netty-core-1.1.1.jar:1.1.1]\r\n    \tat reactor.netty.channel.FluxReceive.onInboundNext(FluxReceive.java:401) ~[reactor-netty-core-1.1.1.jar:1.1.1]\r\n    \tat reactor.netty.channel.ChannelOperations.onInboundNext(ChannelOperations.java:411) ~[reactor-netty-core-1.1.1.jar:1.1.1]\r\n    \tat reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.java:113) ~[reactor-netty-core-1.1.1.jar:1.1.1]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat dev.miku.r2dbc.mysql.client.MessageDuplexCodec.handleDecoded(MessageDuplexCodec.java:187) ~[r2dbc-mysql-0.8.2.RELEASE.jar:0.8.2.RELEASE]\r\n    \tat dev.miku.r2dbc.mysql.client.MessageDuplexCodec.channelRead(MessageDuplexCodec.java:95) ~[r2dbc-mysql-0.8.2.RELEASE.jar:0.8.2.RELEASE]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346) ~[netty-codec-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:318) ~[netty-codec-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1373) ~[netty-handler-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1236) ~[netty-handler-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1285) ~[netty-handler-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:529) ~[netty-codec-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:468) ~[netty-codec-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290) ~[netty-codec-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n    \tSuppressed: java.lang.Exception: #block terminated with an error\r\n    \t\tat reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:99) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \t\tat reactor.core.publisher.Mono.block(Mono.java:1710) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \t\tat org.springframework.r2dbc.connection.init.ConnectionFactoryInitializer.execute(ConnectionFactoryInitializer.java:112) ~[spring-r2dbc-6.0.3.jar:6.0.3]\r\n    \t\tat org.springframework.r2dbc.connection.init.ConnectionFactoryInitializer.afterPropertiesSet(ConnectionFactoryInitializer.java:97) ~[spring-r2dbc-6.0.3.jar:6.0.3]\r\n    \t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \t\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \t\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \t\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \t\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \t\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \t\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:915) ~[spring-context-6.0.3.jar:6.0.3]\r\n    \t\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584) ~[spring-context-6.0.3.jar:6.0.3]\r\n    \t\tat org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-3.0.1.jar:3.0.1]\r\n    \t\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[spring-boot-3.0.1.jar:3.0.1]\r\n    \t\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432) ~[spring-boot-3.0.1.jar:3.0.1]\r\n    \t\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-3.0.1.jar:3.0.1]\r\n    \t\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-3.0.1.jar:3.0.1]\r\n    \t\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[spring-boot-3.0.1.jar:3.0.1]\r\n    \t\tat com.aaa.blog.wf.SpringBlogWebFluxMySqlApplication.main(SpringBlogWebFluxMySqlApplication.java:10) ~[classes/:na]\r\n    \t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n    \t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \t\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n    \t\tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-3.0.1.jar:3.0.1]\r\n    Caused by: java.lang.ClassCastException: class java.lang.Integer cannot be cast to class java.lang.Long (java.lang.Integer and java.lang.Long are in module java.base of loader &#39;bootstrap&#39;)\r\n    \tat java.base/java.util.stream.Collectors.lambda$summingLong$23(Collectors.java:699) ~[na:na]\r\n    \tat reactor.core.publisher.MonoStreamCollector$StreamCollectorSubscriber.onNext(MonoStreamCollector.java:117) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \t... 67 common frames omitted\r\n\r\nI think my reactive R2DBC model classes contains some errors. ClassCastException. But I have no idea what element has wrong class type. The printed error message show no code line number. I changed the id type of model class(User, Post, Tag) into Integer type, but the same errors are thrown.\r\n","title":"java.lang.Integer cannot be cast to class java.lang.Long in R2DBC mysql model classes","body":"<p>I use R2DBC MySQL driver in my Spring Webflux reactive web. And I try to execute table schema SQL script. But the script continuously cause errors.</p>\n<p>First, I make 3 model classes.</p>\n<p><strong>User.java</strong></p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Builder \n@Table(&quot;blog_user&quot;) \npublic class User {\n     \n    @Id\n    @Column(&quot;user_id&quot;)\n    private Long id;\n    \n    @Column\n    private String username;\n \n    @Column\n    @JsonIgnore\n    private String password;\n     \n    @Column\n    private String fullname;\n    \n    @Column\n    private Integer role;\n}\n</code></pre>\n<p><strong>Post.java</strong></p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Builder\n@Table\npublic class Post {\n \n    @Id\n    @Column(&quot;post_id&quot;)\n    private Long id;\n    \n    @Column\n    private String title;\n  \n    @Column\n    private String body;\n        \n    @Column(&quot;created_date&quot;)\n    private LocalDateTime createdDate;\n    \n    @Column(&quot;user_id&quot;)\n    private User user;\n    \n    @Column(&quot;posts&quot;)\n    private Collection&lt;Tag&gt; tags;\n}\n</code></pre>\n<p><strong>Tag.java</strong></p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Builder\n@Table\npublic class Tag {\n  \n    @Id\n    @Column(&quot;tag_id&quot;)\n    private Long id;\n    \n    @Column\n    private String body;\n    \n    @Column(&quot;created_date&quot;)\n    private LocalDateTime createdDate;\n    \n    @Column(&quot;post_id&quot;)\n    private Post post;\n        \n    @Column(&quot;user_id&quot;)\n    private User user;\n}\n</code></pre>\n<p><strong>schema.sql</strong></p>\n<pre><code>-- TABLE intialized.\nDROP TABLE IF EXISTS tag;\nDROP TABLE IF EXISTS post;\nDROP TABLE IF EXISTS blog_user;\n\n\n-- TABLE created.\nCREATE TABLE IF NOT EXISTS blog_user (\n    user_id BIGINT NOT NULL,\n    username VARCHAR(30) NOT NULL,\n    password VARCHAR(255) NOT NULL,\n    email VARCHAR(255),\n    fullname VARCHAR(255),\n    role SMALLINT CHECK (role IN (0, 1)),\n\n    PRIMARY KEY (user_id),\n    UNIQUE (username)\n);\n\nCREATE TABLE IF NOT EXISTS post (\n    post_id BIGINT NOT NULL,\n    title VARCHAR(30) NOT NULL,\n    body TEXT,\n    created_date DATETIME(6) NOT NULL,\n    user_id BIGINT NOT NULL,\n\n    PRIMARY KEY (post_id),\n    FOREIGN KEY (user_id) REFERENCES blog_user (user_id)\n);\n\nCREATE TABLE IF NOT EXISTS tag(\n    tag_id BIGINT NOT NULL,\n    body VARCHAR(255),\n    created_date DATETIME(6) NOT NULL,\n    post_id BIGINT NOT NULL,\n    user_id BIGINT NOT NULL,\n\n    PRIMARY KEY (tag_id),\n    FOREIGN KEY (post_id) REFERENCES post (post_id),\n    FOREIGN KEY (user_id) REFERENCES blog_user (user_id)\n);\n</code></pre>\n<p>Below configuration method executes schema.sql.</p>\n<p><strong>reactive web initializer method</strong></p>\n<pre><code>@Bean\nConnectionFactoryInitializer initializer(ConnectionFactory connectionFactory) {\n\n        ConnectionFactoryInitializer initializer = new ConnectionFactoryInitializer();\n        initializer.setConnectionFactory(connectionFactory);\n        \n        ResourceDatabasePopulator databasePopulator = new ResourceDatabasePopulator();\n        databasePopulator.addScripts(new ClassPathResource(schema.sql));\n        initializer.setDatabasePopulator(databasePopulator);\n\n\n        return initializer;\n}\n</code></pre>\n<p>However, initially executed schema.sql throws errors,</p>\n<pre><code>Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\n[2m2023-01-01T09:06:30.943+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that's unknown, trying to use system default timezone\n[2m2023-01-01T09:06:30.945+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that's unknown, trying to use system default timezone\n[2m2023-01-01T09:06:30.947+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that's unknown, trying to use system default timezone\n[2m2023-01-01T09:06:30.948+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that's unknown, trying to use system default timezone\n[2m2023-01-01T09:06:30.951+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that's unknown, trying to use system default timezone\n[2m2023-01-01T09:06:30.953+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that's unknown, trying to use system default timezone\n[2m2023-01-01T09:06:30.955+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that's unknown, trying to use system default timezone\n[2m2023-01-01T09:06:30.974+09:00[0;39m [31mERROR[0;39m [35m10464[0;39m [2m---[0;39m [2m[  restartedMain][0;39m [36mo.s.boot.SpringApplication              [0;39m [2m:[0;39m Application run failed\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'initializer' defined in class path resource [com/aaa/blog/wf/config/BlogWebFluxConfig.class]: Failed to execute SQL script statement #1 of class path resource [sql/spring-boot-mysql-schema.sql]: DROP TABLE IF EXISTS tag\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751) ~[spring-beans-6.0.3.jar:6.0.3]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.0.3.jar:6.0.3]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521) ~[spring-beans-6.0.3.jar:6.0.3]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.3.jar:6.0.3]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.3.jar:6.0.3]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.3.jar:6.0.3]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.3.jar:6.0.3]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961) ~[spring-beans-6.0.3.jar:6.0.3]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:915) ~[spring-context-6.0.3.jar:6.0.3]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584) ~[spring-context-6.0.3.jar:6.0.3]\n    at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-3.0.1.jar:3.0.1]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[spring-boot-3.0.1.jar:3.0.1]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432) ~[spring-boot-3.0.1.jar:3.0.1]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-3.0.1.jar:3.0.1]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-3.0.1.jar:3.0.1]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[spring-boot-3.0.1.jar:3.0.1]\n    at com.aaa.blog.wf.SpringBlogWebFluxMySqlApplication.main(SpringBlogWebFluxMySqlApplication.java:10) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-3.0.1.jar:3.0.1]\nCaused by: org.springframework.r2dbc.connection.init.ScriptStatementFailedException: Failed to execute SQL script statement #1 of class path resource [sql/spring-boot-mysql-schema.sql]: DROP TABLE IF EXISTS tag\n    at org.springframework.r2dbc.connection.init.ScriptUtils.lambda$runStatement$9(ScriptUtils.java:571) ~[spring-r2dbc-6.0.3.jar:6.0.3]\n    at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onError(FluxOnErrorResume.java:94) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.MonoStreamCollector$StreamCollectorSubscriber.onError(MonoStreamCollector.java:149) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.MonoStreamCollector$StreamCollectorSubscriber.onNext(MonoStreamCollector.java:126) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.FluxFlatMap$FlatMapMain.tryEmit(FluxFlatMap.java:543) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.FluxFlatMap$FlatMapInner.onNext(FluxFlatMap.java:984) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1839) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.NextProcessor.tryEmitValue(NextProcessor.java:358) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.NextProcessor.onNext(NextProcessor.java:298) ~[reactor-core-3.5.1.jar:3.5.1]\n    at dev.miku.r2dbc.mysql.MySqlResult.lambda$null$3(MySqlResult.java:114) ~[r2dbc-mysql-0.8.2.RELEASE.jar:0.8.2.RELEASE]\n    at reactor.core.publisher.LambdaSubscriber.onNext(LambdaSubscriber.java:160) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.FluxWindowPredicate$WindowFlux.drainRegular(FluxWindowPredicate.java:670) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.FluxWindowPredicate$WindowFlux.drain(FluxWindowPredicate.java:748) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.FluxWindowPredicate$WindowFlux.onNext(FluxWindowPredicate.java:790) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.FluxWindowPredicate$WindowPredicateMain.onNext(FluxWindowPredicate.java:241) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.FluxHandleFuseable$HandleFuseableSubscriber.onNext(FluxHandleFuseable.java:193) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107) ~[reactor-core-3.5.1.jar:3.5.1]\n    at dev.miku.r2dbc.mysql.util.DiscardOnCancelSubscriber.onNext(DiscardOnCancelSubscriber.java:70) ~[r2dbc-mysql-0.8.2.RELEASE.jar:0.8.2.RELEASE]\n    at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onNext(FluxPeekFuseable.java:854) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onNext(MonoFlatMapMany.java:250) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.FluxHandle$HandleSubscriber.onNext(FluxHandle.java:128) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onNext(FluxPeekFuseable.java:854) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.EmitterProcessor.drain(EmitterProcessor.java:537) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.EmitterProcessor.tryEmitNext(EmitterProcessor.java:343) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.InternalManySink.emitNext(InternalManySink.java:27) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.EmitterProcessor.onNext(EmitterProcessor.java:309) ~[reactor-core-3.5.1.jar:3.5.1]\n    at dev.miku.r2dbc.mysql.client.ReactorNettyClient$ResponseSink.next(ReactorNettyClient.java:340) ~[r2dbc-mysql-0.8.2.RELEASE.jar:0.8.2.RELEASE]\n    at dev.miku.r2dbc.mysql.client.ReactorNettyClient.lambda$new$0(ReactorNettyClient.java:103) ~[r2dbc-mysql-0.8.2.RELEASE.jar:0.8.2.RELEASE]\n    at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:185) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.netty.channel.FluxReceive.drainReceiver(FluxReceive.java:292) ~[reactor-netty-core-1.1.1.jar:1.1.1]\n    at reactor.netty.channel.FluxReceive.onInboundNext(FluxReceive.java:401) ~[reactor-netty-core-1.1.1.jar:1.1.1]\n    at reactor.netty.channel.ChannelOperations.onInboundNext(ChannelOperations.java:411) ~[reactor-netty-core-1.1.1.jar:1.1.1]\n    at reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.java:113) ~[reactor-netty-core-1.1.1.jar:1.1.1]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at dev.miku.r2dbc.mysql.client.MessageDuplexCodec.handleDecoded(MessageDuplexCodec.java:187) ~[r2dbc-mysql-0.8.2.RELEASE.jar:0.8.2.RELEASE]\n    at dev.miku.r2dbc.mysql.client.MessageDuplexCodec.channelRead(MessageDuplexCodec.java:95) ~[r2dbc-mysql-0.8.2.RELEASE.jar:0.8.2.RELEASE]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346) ~[netty-codec-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:318) ~[netty-codec-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1373) ~[netty-handler-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1236) ~[netty-handler-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1285) ~[netty-handler-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:529) ~[netty-codec-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:468) ~[netty-codec-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290) ~[netty-codec-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.86.Final.jar:4.1.86.Final]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n    Suppressed: java.lang.Exception: #block terminated with an error\n        at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:99) ~[reactor-core-3.5.1.jar:3.5.1]\n        at reactor.core.publisher.Mono.block(Mono.java:1710) ~[reactor-core-3.5.1.jar:3.5.1]\n        at org.springframework.r2dbc.connection.init.ConnectionFactoryInitializer.execute(ConnectionFactoryInitializer.java:112) ~[spring-r2dbc-6.0.3.jar:6.0.3]\n        at org.springframework.r2dbc.connection.init.ConnectionFactoryInitializer.afterPropertiesSet(ConnectionFactoryInitializer.java:97) ~[spring-r2dbc-6.0.3.jar:6.0.3]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797) ~[spring-beans-6.0.3.jar:6.0.3]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747) ~[spring-beans-6.0.3.jar:6.0.3]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.0.3.jar:6.0.3]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521) ~[spring-beans-6.0.3.jar:6.0.3]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.3.jar:6.0.3]\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.3.jar:6.0.3]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.3.jar:6.0.3]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.3.jar:6.0.3]\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961) ~[spring-beans-6.0.3.jar:6.0.3]\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:915) ~[spring-context-6.0.3.jar:6.0.3]\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584) ~[spring-context-6.0.3.jar:6.0.3]\n        at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-3.0.1.jar:3.0.1]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[spring-boot-3.0.1.jar:3.0.1]\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432) ~[spring-boot-3.0.1.jar:3.0.1]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-3.0.1.jar:3.0.1]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-3.0.1.jar:3.0.1]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[spring-boot-3.0.1.jar:3.0.1]\n        at com.aaa.blog.wf.SpringBlogWebFluxMySqlApplication.main(SpringBlogWebFluxMySqlApplication.java:10) ~[classes/:na]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n        at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-3.0.1.jar:3.0.1]\nCaused by: java.lang.ClassCastException: class java.lang.Integer cannot be cast to class java.lang.Long (java.lang.Integer and java.lang.Long are in module java.base of loader 'bootstrap')\n    at java.base/java.util.stream.Collectors.lambda$summingLong$23(Collectors.java:699) ~[na:na]\n    at reactor.core.publisher.MonoStreamCollector$StreamCollectorSubscriber.onNext(MonoStreamCollector.java:117) ~[reactor-core-3.5.1.jar:3.5.1]\n    ... 67 common frames omitted\n</code></pre>\n<p>I think my reactive R2DBC model classes contains some errors. ClassCastException. But I have no idea what element has wrong class type. The printed error message show no code line number. I changed the id type of model class(User, Post, Tag) into Integer type, but the same errors are thrown.</p>\n"},{"tags":["java","mysql","jdbc"],"comments":[{"owner":{"account_id":1686851,"reputation":7640,"user_id":1549950,"accept_rate":69,"display_name":"Michael Lihs"},"score":1,"creation_date":1538768303,"post_id":52672230,"comment_id":92274350,"body_markdown":"Maybe you are missing a `:` in the jdbc string - try `jdbc:mysql://localhost:3306/java`","body":"Maybe you are missing a <code>:</code> in the jdbc string - try <code>jdbc:mysql:&#47;&#47;localhost:3306&#47;java</code>"},{"owner":{"display_name":"user10036786"},"score":0,"creation_date":1538768519,"post_id":52672230,"comment_id":92274452,"body_markdown":"OMG you&#39;re right! Thanks a lot man","body":"OMG you&#39;re right! Thanks a lot man"}],"answers":[{"tags":[],"owner":{"account_id":1754145,"reputation":43950,"user_id":1602555,"display_name":"Karol Dowbecki"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1538768800,"creation_date":1538768800,"answer_id":52672396,"question_id":52672230,"body_markdown":"Your JDBC URL should follow `jdbc:mysql://localhost/test` format as per [\r\n7.1 Connecting to MySQL Using the JDBC DriverManager Interface][1] docs.\r\n\r\nYou are missing a semicolon after `mysql` part, it should be\r\n\r\n    private static final String CONN_STRING = &quot;jdbc:mysql://localhost:3306/java&quot;;\r\n\r\n\r\n  [1]: https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-usagenotes-connect-drivermanager.html","title":"java.sql.SQLException: No suitable driver found for jdbc:mysql//127.0.0.1:3306/java Error - JDK 1.8, mysql-connector 8.0.12","body":"<p>Your JDBC URL should follow <code>jdbc:mysql://localhost/test</code> format as per <a href=\"https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-usagenotes-connect-drivermanager.html\" rel=\"nofollow noreferrer\">\n7.1 Connecting to MySQL Using the JDBC DriverManager Interface</a> docs.</p>\n\n<p>You are missing a semicolon after <code>mysql</code> part, it should be</p>\n\n<pre><code>private static final String CONN_STRING = \"jdbc:mysql://localhost:3306/java\";\n</code></pre>\n"}],"owner":{"display_name":"user10036786"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":368,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1683817226,"accepted_answer_id":52672396,"answer_count":1,"score":0,"last_activity_date":1684802764,"creation_date":1538767975,"question_id":52672230,"body_markdown":"I tried searching for a solution but the questions on this website just weren&#39;t the answer I&#39;m looking for.\r\n\r\nI tried running:\r\n\r\n    private static final String USERNAME= &quot;root&quot;;\r\n    private static final String PASSWORD= &quot;root&quot;;\r\n    private static final String CONN_STRING= &quot;jdbc:mysql//localhost:3306/java&quot;;\r\n\r\n    conn Connection = null;\r\n    \r\n    try{\r\n        conn = DriverManager.getConnection(CONN_STRING, USERNAME, PASSWORD);\r\n        System.out.println(&quot;Connected&quot;);\r\n    } catch (SQLException e){\r\n        System.err.println(e);\r\n    }\r\n\r\nI&#39;ve got the 8.0.12 version of both server and connector.","title":"java.sql.SQLException: No suitable driver found for jdbc:mysql//127.0.0.1:3306/java Error - JDK 1.8, mysql-connector 8.0.12","body":"<p>I tried searching for a solution but the questions on this website just weren't the answer I'm looking for.</p>\n<p>I tried running:</p>\n<pre><code>private static final String USERNAME= &quot;root&quot;;\nprivate static final String PASSWORD= &quot;root&quot;;\nprivate static final String CONN_STRING= &quot;jdbc:mysql//localhost:3306/java&quot;;\n\nconn Connection = null;\n\ntry{\n    conn = DriverManager.getConnection(CONN_STRING, USERNAME, PASSWORD);\n    System.out.println(&quot;Connected&quot;);\n} catch (SQLException e){\n    System.err.println(e);\n}\n</code></pre>\n<p>I've got the 8.0.12 version of both server and connector.</p>\n"},{"tags":["java","list","linked-list"],"comments":[{"owner":{"account_id":5368387,"reputation":442,"user_id":4277582,"accept_rate":38,"display_name":"Ayoub Abid"},"score":0,"creation_date":1548573830,"post_id":54385888,"comment_id":95584224,"body_markdown":"It &#39;s not clear what you are trying to compare. What ist &quot;front&quot; ?","body":"It &#39;s not clear what you are trying to compare. What ist &quot;front&quot; ?"},{"owner":{"account_id":14235514,"reputation":21,"user_id":10283421,"display_name":"Zhong Zhiwei"},"score":0,"creation_date":1548575062,"post_id":54385888,"comment_id":95584425,"body_markdown":"&quot;front&quot; is a head name which lead my LinkedList, and I need to compare the int value in two LinkedList","body":"&quot;front&quot; is a head name which lead my LinkedList, and I need to compare the int value in two LinkedList"},{"owner":{"account_id":2045726,"reputation":1580,"user_id":1825844,"display_name":"gvmani"},"score":0,"creation_date":1548575388,"post_id":54385888,"comment_id":95584476,"body_markdown":"`while(prev.next.next != null &amp;&amp; current.next.next != null)` will throw exception if either of `prev.next` or `current.next` is null.","body":"<code>while(prev.next.next != null &amp;&amp; current.next.next != null)</code> will throw exception if either of <code>prev.next</code> or <code>current.next</code> is null."},{"owner":{"account_id":14235514,"reputation":21,"user_id":10283421,"display_name":"Zhong Zhiwei"},"score":0,"creation_date":1548575740,"post_id":54385888,"comment_id":95584547,"body_markdown":"Thanks for mentioning this, and I changed this. But the solution is still not working, I think there must be some problems in my solution.","body":"Thanks for mentioning this, and I changed this. But the solution is still not working, I think there must be some problems in my solution."},{"owner":{"account_id":4962253,"reputation":18492,"user_id":3992939,"accept_rate":73,"display_name":"c0der"},"score":0,"creation_date":1548576647,"post_id":54385888,"comment_id":95584735,"body_markdown":"The question is about &quot;lists of integers&quot;, not linked list, isn&#39;t it ?","body":"The question is about &quot;lists of integers&quot;, not linked list, isn&#39;t it ?"},{"owner":{"account_id":4062291,"reputation":2366,"user_id":3338483,"display_name":"Toris"},"score":0,"creation_date":1548576757,"post_id":54385888,"comment_id":95584765,"body_markdown":"It seems that next is a reference, so `front.next = other.front.next;` (at this point `temp` also be set `other.front.next`) and other lines seems to try to point same objects like that.","body":"It seems that next is a reference, so <code>front.next = other.front.next;</code> (at this point <code>temp</code> also be set <code>other.front.next</code>) and other lines seems to try to point same objects like that."},{"owner":{"account_id":2045726,"reputation":1580,"user_id":1825844,"display_name":"gvmani"},"score":0,"creation_date":1548577215,"post_id":54385888,"comment_id":95584831,"body_markdown":"instead of `temp = temp.next;\n                current.next.next =prev.next.next;\n                prev.next.next = temp;`  do `curr = prev.next; prev = temp;`","body":"instead of <code>temp = temp.next;                 current.next.next =prev.next.next;                 prev.next.next = temp;</code>  do <code>curr = prev.next; prev = temp;</code>"},{"owner":{"account_id":14235514,"reputation":21,"user_id":10283421,"display_name":"Zhong Zhiwei"},"score":0,"creation_date":1548577463,"post_id":54385888,"comment_id":95584875,"body_markdown":"ummm I tried to edit my code as you told, but it&#39;s still not working","body":"ummm I tried to edit my code as you told, but it&#39;s still not working"}],"answers":[{"tags":[],"owner":{"account_id":25155312,"reputation":19,"user_id":21552621,"display_name":"Elena"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1684802572,"creation_date":1684802572,"answer_id":76310654,"question_id":54385888,"body_markdown":"If i understood correct, heres an idea:\r\n\r\n\r\nThere are a few issues in your code that need to be addressed:\r\n\r\n 1. Comparison of values: The condition if(front.data &gt; other.front.data) compares the values of the nodes in the first list with the values of the nodes in the second list. However, your task states that you need to ensure the first list has smaller values in corresponding positions. In other words, you should compare values at the same positions in both lists. To fix this, you need to modify the comparison logic.\r\n\r\n 2. Swapping nodes: In the code segment front = other.front; and other.front = prev;, you are swapping the entire nodes instead of just their values. This can lead to incorrect results and a broken linked list structure. Instead, you should swap the values of the nodes.\r\n\r\n 3. Loop conditions: The conditions prev.next.next != null and current.next.next != null in the while loop check for the next two nodes, which can cause issues if one of the lists is shorter than the other. You should change the conditions to prev.next != null and current.next != null to ensure the loop terminates correctly.\r\n\r\n 4. Incorrect node connections: In the inner loop, you are incorrectly reconnecting the nodes after swapping their values. The lines temp = temp.next;, current.next.next = prev.next.next;, and prev.next.next = temp; are unnecessary and can lead to incorrect connections.\r\n\r\n   Try to use this:\r\n\r\n    enter code here\r\n    public void takeSmallerFrom(LinkedIntList other) {\r\n    if (front != null &amp;&amp; other.front != null) {\r\n        ListNode prev = null;\r\n        ListNode current = other.front;\r\n\r\n        while (front != null &amp;&amp; current != null) {\r\n            if (front.data &gt; current.data) {\r\n                int temp = front.data;\r\n                front.data = current.data;\r\n                current.data = temp;\r\n            }\r\n\r\n            prev = front;\r\n            front = front.next;\r\n            current = current.next;\r\n        }\r\n\r\n        if (current != null) {\r\n            prev.next = current;\r\n        }\r\n    }\r\n}\r\n\r\nIn this code, we iterate through both lists simultaneously, comparing values and swapping them when necessary. After the loop, if the second list is longer, we append the remaining nodes of the second list to the end of the first list.\r\n\r\n\r\n","title":"Something about LinkedList","body":"<p>If i understood correct, heres an idea:</p>\n<p>There are a few issues in your code that need to be addressed:</p>\n<ol>\n<li><p>Comparison of values: The condition if(front.data &gt; other.front.data) compares the values of the nodes in the first list with the values of the nodes in the second list. However, your task states that you need to ensure the first list has smaller values in corresponding positions. In other words, you should compare values at the same positions in both lists. To fix this, you need to modify the comparison logic.</p>\n</li>\n<li><p>Swapping nodes: In the code segment front = other.front; and other.front = prev;, you are swapping the entire nodes instead of just their values. This can lead to incorrect results and a broken linked list structure. Instead, you should swap the values of the nodes.</p>\n</li>\n<li><p>Loop conditions: The conditions prev.next.next != null and current.next.next != null in the while loop check for the next two nodes, which can cause issues if one of the lists is shorter than the other. You should change the conditions to prev.next != null and current.next != null to ensure the loop terminates correctly.</p>\n</li>\n<li><p>Incorrect node connections: In the inner loop, you are incorrectly reconnecting the nodes after swapping their values. The lines temp = temp.next;, current.next.next = prev.next.next;, and prev.next.next = temp; are unnecessary and can lead to incorrect connections.</p>\n</li>\n</ol>\n<p>Try to use this:</p>\n<pre><code>enter code here\npublic void takeSmallerFrom(LinkedIntList other) {\nif (front != null &amp;&amp; other.front != null) {\n    ListNode prev = null;\n    ListNode current = other.front;\n\n    while (front != null &amp;&amp; current != null) {\n        if (front.data &gt; current.data) {\n            int temp = front.data;\n            front.data = current.data;\n            current.data = temp;\n        }\n\n        prev = front;\n        front = front.next;\n        current = current.next;\n    }\n\n    if (current != null) {\n        prev.next = current;\n    }\n}\n</code></pre>\n<p>}</p>\n<p>In this code, we iterate through both lists simultaneously, comparing values and swapping them when necessary. After the loop, if the second list is longer, we append the remaining nodes of the second list to the end of the first list.</p>\n"}],"owner":{"account_id":14235514,"reputation":21,"user_id":10283421,"display_name":"Zhong Zhiwei"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":195,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684802572,"creation_date":1548573181,"question_id":54385888,"body_markdown":"I am very new in Java and met some trouble when learning LinkedList.\n\nI am stuck at this problem: \nWrite a method takeSmallerFrom that compares two lists of integers, making sure that the first list has smaller values in corresponding positions. Either one of lists can be longer than another.\n\nAnd my attempting solution is below:\n\n    public void takeSmallerFrom(LinkedIntList other) {\n    if(front != null &amp;&amp; other.front != null) {\n        ListNode temp = front.next;\n        ListNode prev = front;\n        if(front.next != null &amp;&amp; other.front != null) {\n            if(front.data &gt; other.front.data) {\n                front.next = other.front.next;\n                other.front.next = temp;\n                front = other.front;\n                other.front = prev;\n            }\n            ListNode current = other.front;\n            while(prev.next.next != null &amp;&amp; current.next.next != null) {\n                if(prev.next.data &gt; current.next.data) {\n                    temp = prev.next;\n                    prev.next = current.next;\n                    current.next = temp;\n                    temp = temp.next;\n                    current.next.next =prev.next.next;\n                    prev.next.next = temp; \n                } \n                prev = prev.next;\n                current = current.next;\n            }\n        }\n    }\nThe result shows that my solution failed after the first ListNode, but I can&#39;t find the reason why the rest of them failed. I am really stuck at this, if anyone here can help me, thank you!\n\n## Sorry I didn&#39;t clarify: &quot;front&quot; means the head which leads my LinkedList\nThe whole solution is for a special LinkedList which only stores int, so I need to compare the each int value in these LinkedLists respectively","title":"Something about LinkedList","body":"<p>I am very new in Java and met some trouble when learning LinkedList.</p>\n<p>I am stuck at this problem:\nWrite a method takeSmallerFrom that compares two lists of integers, making sure that the first list has smaller values in corresponding positions. Either one of lists can be longer than another.</p>\n<p>And my attempting solution is below:</p>\n<pre><code>public void takeSmallerFrom(LinkedIntList other) {\nif(front != null &amp;&amp; other.front != null) {\n    ListNode temp = front.next;\n    ListNode prev = front;\n    if(front.next != null &amp;&amp; other.front != null) {\n        if(front.data &gt; other.front.data) {\n            front.next = other.front.next;\n            other.front.next = temp;\n            front = other.front;\n            other.front = prev;\n        }\n        ListNode current = other.front;\n        while(prev.next.next != null &amp;&amp; current.next.next != null) {\n            if(prev.next.data &gt; current.next.data) {\n                temp = prev.next;\n                prev.next = current.next;\n                current.next = temp;\n                temp = temp.next;\n                current.next.next =prev.next.next;\n                prev.next.next = temp; \n            } \n            prev = prev.next;\n            current = current.next;\n        }\n    }\n}\n</code></pre>\n<p>The result shows that my solution failed after the first ListNode, but I can't find the reason why the rest of them failed. I am really stuck at this, if anyone here can help me, thank you!</p>\n<h2>Sorry I didn't clarify: &quot;front&quot; means the head which leads my LinkedList</h2>\n<p>The whole solution is for a special LinkedList which only stores int, so I need to compare the each int value in these LinkedLists respectively</p>\n"},{"tags":["java","arrays","generics","kotlin","reification"],"answers":[{"tags":[],"owner":{"account_id":4633949,"reputation":8005,"user_id":3755692,"accept_rate":62,"display_name":"msrd0"},"down_vote_count":0,"up_vote_count":51,"is_accepted":true,"score":51,"last_activity_date":1668866485,"creation_date":1508647108,"answer_id":46870546,"question_id":46869353,"body_markdown":"Looking at the declaration of `emptyArray()` in the kotlin stdlib (jvm), we notice the `reified` type parameter:\r\n\r\n    public inline fun &lt;reified @PureReifiable T&gt; emptyArray(): Array&lt;T&gt;\r\n\r\nThe `reified` type parameter means that you have access to the class of `T` at compile-time and can access it like `T::class`. You can read more about `reified` type parameters in the [Kotlin reference](https://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters). Since `Array&lt;T&gt;` compiles to java `T[]`, we need to know the type at compile-time, hence the `reified` parameter. If you try writing an emptyArray() function without the `reified` keyword, you&#39;ll get a compiler error:\r\n\r\n    fun &lt;T&gt; emptyArray() : Array&lt;T&gt; = Array(0, { throw Exception() })\r\n\r\n&gt; Cannot use T as a reified type parameter. Use a class instead.\r\n\r\n&lt;hr/&gt;\r\n\r\nNow, let&#39;s take a look at the implementation of `emptyList()`:\r\n\r\n    public fun &lt;T&gt; emptyList(): List&lt;T&gt; = EmptyList\r\n\r\nThis implementation doesn&#39;t need the parameter `T` at all. It just returns the internal object `EmptyList`, which itself inherits from `List&lt;Nothing&gt;`. The kotlin type `Nothing` is the return-type of the `throw` keyword and is _a value that never exists_ ([reference](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing.html)). If a method returns `Nothing`, is is equivalent to throwing an exception at that place. So we can safely use `Nothing` here because everytime we would call `EmptyList.get()` the compiler knows that this will return an exception.\r\n\r\n&lt;hr/&gt;\r\n\r\n**Bonus question:**\r\n\r\nComing from Java and C++, I am used to `ArrayList` or `std::vector` to be far easier to use that arrays. I use kotlin now for a few month and I usually don&#39;t see a big difference between arrays and lists when writing source code. Both have tons of useful extension functions which behave in a similar way. However, the Kotlin compiler handles arrays and lists very different, as Java interoperability is very important for the Kotlin team. I usually prefer using lists, and that&#39;s what I&#39;d recommend in your case too.","title":"Kotlin generics Array&lt;T&gt; results in &quot;Cannot use T as a reified type parameter. Use a class instead&quot; but List&lt;T&gt; does not","body":"<p>Looking at the declaration of <code>emptyArray()</code> in the kotlin stdlib (jvm), we notice the <code>reified</code> type parameter:</p>\n<pre><code>public inline fun &lt;reified @PureReifiable T&gt; emptyArray(): Array&lt;T&gt;\n</code></pre>\n<p>The <code>reified</code> type parameter means that you have access to the class of <code>T</code> at compile-time and can access it like <code>T::class</code>. You can read more about <code>reified</code> type parameters in the <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters\" rel=\"noreferrer\">Kotlin reference</a>. Since <code>Array&lt;T&gt;</code> compiles to java <code>T[]</code>, we need to know the type at compile-time, hence the <code>reified</code> parameter. If you try writing an emptyArray() function without the <code>reified</code> keyword, you'll get a compiler error:</p>\n<pre><code>fun &lt;T&gt; emptyArray() : Array&lt;T&gt; = Array(0, { throw Exception() })\n</code></pre>\n<blockquote>\n<p>Cannot use T as a reified type parameter. Use a class instead.</p>\n</blockquote>\n<hr/>\n<p>Now, let's take a look at the implementation of <code>emptyList()</code>:</p>\n<pre><code>public fun &lt;T&gt; emptyList(): List&lt;T&gt; = EmptyList\n</code></pre>\n<p>This implementation doesn't need the parameter <code>T</code> at all. It just returns the internal object <code>EmptyList</code>, which itself inherits from <code>List&lt;Nothing&gt;</code>. The kotlin type <code>Nothing</code> is the return-type of the <code>throw</code> keyword and is <em>a value that never exists</em> (<a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing.html\" rel=\"noreferrer\">reference</a>). If a method returns <code>Nothing</code>, is is equivalent to throwing an exception at that place. So we can safely use <code>Nothing</code> here because everytime we would call <code>EmptyList.get()</code> the compiler knows that this will return an exception.</p>\n<hr/>\n<p><strong>Bonus question:</strong></p>\n<p>Coming from Java and C++, I am used to <code>ArrayList</code> or <code>std::vector</code> to be far easier to use that arrays. I use kotlin now for a few month and I usually don't see a big difference between arrays and lists when writing source code. Both have tons of useful extension functions which behave in a similar way. However, the Kotlin compiler handles arrays and lists very different, as Java interoperability is very important for the Kotlin team. I usually prefer using lists, and that's what I'd recommend in your case too.</p>\n"},{"tags":[],"owner":{"account_id":10988981,"reputation":77763,"user_id":8073652,"accept_rate":100,"display_name":"s1m0nw1"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1588343355,"creation_date":1508677156,"answer_id":46874354,"question_id":46869353,"body_markdown":"The problem is that the generic type of an `Array` must be known at *compile time*, which is indicated by the `reified` type parameter here, as seen in the declaration:\r\n\r\n    public inline fun &lt;reified @PureReifiable T&gt; emptyArray(): Array&lt;T&gt;\r\n\r\nIt&#39;s only possible to create concrete arrays like `Array&lt;String&gt;` or `Array&lt;Int&gt;` but not of type `Array&lt;T&gt;`.\r\n\r\nIn this [answer][1], you can find several workarounds.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/41946516/8073652","title":"Kotlin generics Array&lt;T&gt; results in &quot;Cannot use T as a reified type parameter. Use a class instead&quot; but List&lt;T&gt; does not","body":"<p>The problem is that the generic type of an <code>Array</code> must be known at <em>compile time</em>, which is indicated by the <code>reified</code> type parameter here, as seen in the declaration:</p>\n\n<pre><code>public inline fun &lt;reified @PureReifiable T&gt; emptyArray(): Array&lt;T&gt;\n</code></pre>\n\n<p>It's only possible to create concrete arrays like <code>Array&lt;String&gt;</code> or <code>Array&lt;Int&gt;</code> but not of type <code>Array&lt;T&gt;</code>.</p>\n\n<p>In this <a href=\"https://stackoverflow.com/a/41946516/8073652\">answer</a>, you can find several workarounds.</p>\n"},{"tags":[],"owner":{"account_id":361497,"reputation":2155,"user_id":704132,"accept_rate":81,"display_name":"Riki137"},"down_vote_count":3,"up_vote_count":4,"is_accepted":false,"score":1,"last_activity_date":1526114434,"creation_date":1526114434,"answer_id":50304366,"question_id":46869353,"body_markdown":"The workaround that worked best for me was:\r\n\r\n    @Suppress(&quot;UNCHECKED_CAST&quot;)\r\n    var pool: Array&lt;T?&gt; = arrayOfNulls&lt;Any?&gt;(initialCapacity) as Array&lt;T?&gt;\r\n\r\n","title":"Kotlin generics Array&lt;T&gt; results in &quot;Cannot use T as a reified type parameter. Use a class instead&quot; but List&lt;T&gt; does not","body":"<p>The workaround that worked best for me was:</p>\n\n<pre><code>@Suppress(\"UNCHECKED_CAST\")\nvar pool: Array&lt;T?&gt; = arrayOfNulls&lt;Any?&gt;(initialCapacity) as Array&lt;T?&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3482475,"reputation":27230,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1598975584,"creation_date":1585239318,"answer_id":60871541,"question_id":46869353,"body_markdown":"I got `Type parameter T cannot be called as function` when tried to return T.\r\n\r\n    private fun &lt;T&gt; getData(): T {\r\n        return T()\r\n    }\r\n\r\nSee https://stackoverflow.com/questions/26992039/what-is-the-proper-way-to-create-new-instance-of-generic-class-in-kotlin:\r\n\r\n    private fun &lt;T&gt; create(\r\n        method: (Int) -&gt; T,\r\n        value: Int\r\n    ): T {\r\n        return method(value) // Creates T(value).\r\n    }\r\n\r\n    // Usage:\r\n\r\n    create(::ClassName, 1)\r\n\r\nwhere `ClassName` extends `T`.\r\n\r\nAlso maybe this will help:\r\n\r\n    private inline fun &lt;reified T&gt; getData(): T {\r\n        return T::class.java.newInstance()\r\n    }\r\n\r\nBut in my case I had to return `T(parameter)`, not `T()`, so, didn&#39;t try. See also https://stackoverflow.com/questions/52446900/how-to-get-class-of-generic-type-parameter-in-kotlin.","title":"Kotlin generics Array&lt;T&gt; results in &quot;Cannot use T as a reified type parameter. Use a class instead&quot; but List&lt;T&gt; does not","body":"<p>I got <code>Type parameter T cannot be called as function</code> when tried to return T.</p>\n<pre><code>private fun &lt;T&gt; getData(): T {\n    return T()\n}\n</code></pre>\n<p>See <a href=\"https://stackoverflow.com/questions/26992039/what-is-the-proper-way-to-create-new-instance-of-generic-class-in-kotlin\">What is the proper way to create new instance of generic class in kotlin?</a>:</p>\n<pre><code>private fun &lt;T&gt; create(\n    method: (Int) -&gt; T,\n    value: Int\n): T {\n    return method(value) // Creates T(value).\n}\n\n// Usage:\n\ncreate(::ClassName, 1)\n</code></pre>\n<p>where <code>ClassName</code> extends <code>T</code>.</p>\n<p>Also maybe this will help:</p>\n<pre><code>private inline fun &lt;reified T&gt; getData(): T {\n    return T::class.java.newInstance()\n}\n</code></pre>\n<p>But in my case I had to return <code>T(parameter)</code>, not <code>T()</code>, so, didn't try. See also <a href=\"https://stackoverflow.com/questions/52446900/how-to-get-class-of-generic-type-parameter-in-kotlin\">How to get class of generic type parameter in Kotlin</a>.</p>\n"},{"tags":[],"owner":{"account_id":10512827,"reputation":6163,"user_id":7747942,"display_name":"Sylhare"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1634842257,"creation_date":1634841922,"answer_id":69667249,"question_id":46869353,"body_markdown":"I had some trouble in the solution above. Here is what I came up with using [`typeOf`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/type-of.html) from [kotlin-reflect](https://kotlinlang.org/docs/reflection.html):\r\n\r\n```kotlin\r\n@Suppress(&quot;UNCHECKED_CAST&quot;)\r\nprivate inline fun &lt;reified T&gt; createArrayOfGeneric(): Array&lt;T&gt; {\r\n    return java.lang.reflect.Array.newInstance(typeOf&lt;T&gt;().javaType as Class&lt;*&gt;, 10) as Array&lt;T&gt;\r\n}\r\n```\r\n\r\nThe `newInstance` method takes the java type as class of the generic that you get from `typeOf`, and the second parameter is the length of the array. ","title":"Kotlin generics Array&lt;T&gt; results in &quot;Cannot use T as a reified type parameter. Use a class instead&quot; but List&lt;T&gt; does not","body":"<p>I had some trouble in the solution above. Here is what I came up with using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/type-of.html\" rel=\"nofollow noreferrer\"><code>typeOf</code></a> from <a href=\"https://kotlinlang.org/docs/reflection.html\" rel=\"nofollow noreferrer\">kotlin-reflect</a>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Suppress(&quot;UNCHECKED_CAST&quot;)\nprivate inline fun &lt;reified T&gt; createArrayOfGeneric(): Array&lt;T&gt; {\n    return java.lang.reflect.Array.newInstance(typeOf&lt;T&gt;().javaType as Class&lt;*&gt;, 10) as Array&lt;T&gt;\n}\n</code></pre>\n<p>The <code>newInstance</code> method takes the java type as class of the generic that you get from <code>typeOf</code>, and the second parameter is the length of the array.</p>\n"},{"tags":[],"owner":{"account_id":302395,"reputation":1357,"user_id":1146712,"display_name":"Sherwin Zadeh"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1684801613,"creation_date":1684801613,"answer_id":76310617,"question_id":46869353,"body_markdown":"I changed it from `Array&lt;T&gt;` to `ArrayList&lt;T&gt;` and it worked.","title":"Kotlin generics Array&lt;T&gt; results in &quot;Cannot use T as a reified type parameter. Use a class instead&quot; but List&lt;T&gt; does not","body":"<p>I changed it from <code>Array&lt;T&gt;</code> to <code>ArrayList&lt;T&gt;</code> and it worked.</p>\n"}],"owner":{"account_id":5372553,"reputation":3631,"user_id":4280615,"accept_rate":73,"display_name":"Nate Vaughan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55999,"favorite_count":0,"down_vote_count":0,"up_vote_count":68,"accepted_answer_id":46870546,"answer_count":6,"score":68,"last_activity_date":1684801613,"creation_date":1508631619,"question_id":46869353,"body_markdown":"I have an interface that contains an array (or list) of T and some metadata.\r\n\r\n    interface DataWithMetadata&lt;T&gt; {\r\n        val someMetadata: Int\r\n        fun getData(): Array&lt;T&gt;\r\n    }\r\n\r\nIf I write the simplest implementation of the interface, I get a compile error on the `emptyArray()`: &quot;Cannot use T as a reified type parameter. Use a class instead.&quot;\r\n\r\n    class ArrayWithMetadata&lt;T&gt;(override val someMetadata: Int): DataWithMetadata&lt;T&gt; {\r\n        private var myData: Array&lt;T&gt; = emptyArray()\r\n        \r\n        override fun getData(): Array&lt;T&gt; {\r\n            return myData\r\n        }\r\n        \r\n        fun addData(moreData: Array&lt;T&gt;) {\r\n            this.myData += moreData\r\n        }\r\n    }\r\n\r\nHowever, if I change both the interface and the implementation to a list, I have no compile-time issues:\r\n\r\n    interface DataWithMetadata&lt;T&gt; {\r\n        val someMetadata: Int\r\n        fun getData(): List&lt;T&gt;\r\n    }\r\n    \r\n    class ListWithMetadata&lt;T&gt;(override val someMetadata: Int): DataWithMetadata&lt;T&gt; {\r\n        private var myData: List&lt;T&gt; = emptyList()\r\n    \r\n        override fun getData(): List&lt;T&gt; {\r\n            return myData\r\n        }\r\n    \r\n        fun addData(moreData: Array&lt;T&gt;) {\r\n            this.myData += moreData\r\n        }\r\n    }\r\n\r\nI suspect there is some interesting lesson in Kotlin generics inside my issue. Can anyone tell me what the compiler is doing under the hood and why Array&lt;T&gt; fails but List&lt;T&gt; does not? Is there an idiomatic way to make the Array&lt;T&gt; implementation compile in this context?\r\n\r\nBonus question: The only reason I reached for Array&lt;T&gt; over List&lt;T&gt; is that I often see Kotlin developers favor Arrays. Is this the case, and if so, why?","title":"Kotlin generics Array&lt;T&gt; results in &quot;Cannot use T as a reified type parameter. Use a class instead&quot; but List&lt;T&gt; does not","body":"<p>I have an interface that contains an array (or list) of T and some metadata.</p>\n\n<pre><code>interface DataWithMetadata&lt;T&gt; {\n    val someMetadata: Int\n    fun getData(): Array&lt;T&gt;\n}\n</code></pre>\n\n<p>If I write the simplest implementation of the interface, I get a compile error on the <code>emptyArray()</code>: \"Cannot use T as a reified type parameter. Use a class instead.\"</p>\n\n<pre><code>class ArrayWithMetadata&lt;T&gt;(override val someMetadata: Int): DataWithMetadata&lt;T&gt; {\n    private var myData: Array&lt;T&gt; = emptyArray()\n\n    override fun getData(): Array&lt;T&gt; {\n        return myData\n    }\n\n    fun addData(moreData: Array&lt;T&gt;) {\n        this.myData += moreData\n    }\n}\n</code></pre>\n\n<p>However, if I change both the interface and the implementation to a list, I have no compile-time issues:</p>\n\n<pre><code>interface DataWithMetadata&lt;T&gt; {\n    val someMetadata: Int\n    fun getData(): List&lt;T&gt;\n}\n\nclass ListWithMetadata&lt;T&gt;(override val someMetadata: Int): DataWithMetadata&lt;T&gt; {\n    private var myData: List&lt;T&gt; = emptyList()\n\n    override fun getData(): List&lt;T&gt; {\n        return myData\n    }\n\n    fun addData(moreData: Array&lt;T&gt;) {\n        this.myData += moreData\n    }\n}\n</code></pre>\n\n<p>I suspect there is some interesting lesson in Kotlin generics inside my issue. Can anyone tell me what the compiler is doing under the hood and why Array fails but List does not? Is there an idiomatic way to make the Array implementation compile in this context?</p>\n\n<p>Bonus question: The only reason I reached for Array over List is that I often see Kotlin developers favor Arrays. Is this the case, and if so, why?</p>\n"},{"tags":["java","arrays","string","parsing","jtree"],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684801420,"creation_date":1684801420,"answer_id":76310606,"question_id":50209160,"body_markdown":"You can use a for-loop to iterate each collection, and add each value to a new list of values.\r\n\r\n```java\r\n@SafeVarargs\r\nList&lt;List&lt;String&gt;&gt; parse(Collection&lt;String&gt;... collections) {\r\n    List&lt;List&lt;String&gt;&gt; strings = new ArrayList&lt;&gt;();\r\n    for (Collection&lt;String&gt; collection : collections)\r\n        strings.add(new ArrayList&lt;&gt;(collection));\r\n    return strings;\r\n}\r\n```\r\n\r\nExample\r\n\r\n```java\r\nSet&lt;String&gt; hash1 = new HashSet&lt;&gt;(Set.of(&quot;abc&quot;, &quot;def&quot;));\r\nSet&lt;String&gt; hash2 = new HashSet&lt;&gt;(Set.of(&quot;ghi&quot;, &quot;jkl&quot;, &quot;mno&quot;));\r\nList&lt;String&gt; list1 = new ArrayList&lt;&gt;(List.of(&quot;pqr&quot;));\r\nSystem.out.println(parse(hash1, hash2, list1));\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n[[abc, def], [ghi, jkl, mno], [pqr]]\r\n```","title":"JTree to String with hashs and arrays","body":"<p>You can use a for-loop to iterate each collection, and add each value to a new list of values.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SafeVarargs\nList&lt;List&lt;String&gt;&gt; parse(Collection&lt;String&gt;... collections) {\n    List&lt;List&lt;String&gt;&gt; strings = new ArrayList&lt;&gt;();\n    for (Collection&lt;String&gt; collection : collections)\n        strings.add(new ArrayList&lt;&gt;(collection));\n    return strings;\n}\n</code></pre>\n<p>Example</p>\n<pre class=\"lang-java prettyprint-override\"><code>Set&lt;String&gt; hash1 = new HashSet&lt;&gt;(Set.of(&quot;abc&quot;, &quot;def&quot;));\nSet&lt;String&gt; hash2 = new HashSet&lt;&gt;(Set.of(&quot;ghi&quot;, &quot;jkl&quot;, &quot;mno&quot;));\nList&lt;String&gt; list1 = new ArrayList&lt;&gt;(List.of(&quot;pqr&quot;));\nSystem.out.println(parse(hash1, hash2, list1));\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>[[abc, def], [ghi, jkl, mno], [pqr]]\n</code></pre>\n"}],"owner":{"account_id":13375569,"reputation":51,"user_id":9652533,"display_name":"Luis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1684801420,"creation_date":1525678345,"question_id":50209160,"body_markdown":"I have a Jtree from a Hash&lt;String, Object&gt; where the object can be another hash or an array.\r\nNow i need to take this JTree and convert it to String but i cant difference an array from a hash, how can I difference it?\r\nExists something like a tag in DefaultTreeNode with i could difference the nodes when i insert them on the JTree?\r\n\r\nFor example: \r\n\r\nMy Jtree is\r\n\r\n    &gt;     Array\r\n    &gt;         Hash1\r\n    &gt;             String1\r\n    &gt;             String2\r\n    &gt;         Hash2\r\n    &gt;             String1\r\n    &gt;             String2\r\n    &gt;             String3\r\n    &gt;         Array1\r\n    &gt;              String1\r\n\r\nAnd the finally string must be \r\n\r\n&gt; [{String1, String2}, {String1, String2, String3}, [String1]]\r\n\r\nThank you.","title":"JTree to String with hashs and arrays","body":"<p>I have a Jtree from a Hash where the object can be another hash or an array.\nNow i need to take this JTree and convert it to String but i cant difference an array from a hash, how can I difference it?\nExists something like a tag in DefaultTreeNode with i could difference the nodes when i insert them on the JTree?</p>\n\n<p>For example: </p>\n\n<p>My Jtree is</p>\n\n<pre><code>&gt;     Array\n&gt;         Hash1\n&gt;             String1\n&gt;             String2\n&gt;         Hash2\n&gt;             String1\n&gt;             String2\n&gt;             String3\n&gt;         Array1\n&gt;              String1\n</code></pre>\n\n<p>And the finally string must be </p>\n\n<blockquote>\n  <p>[{String1, String2}, {String1, String2, String3}, [String1]]</p>\n</blockquote>\n\n<p>Thank you.</p>\n"},{"tags":["java","android","android-room"],"answers":[{"tags":[],"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684702047,"creation_date":1684702047,"answer_id":76301866,"question_id":76300620,"body_markdown":"Try `SELECT b.position,b.name,b.capacity,b.currentAmount, it.name AS ingredientName FROM ....`\r\n\r\n- where `....` is the rest of the query. i.e. the important part is aliasing the **name** column to be **ingredientName** using **`AS`**.\r\n\r\ni.e. you are supplying the value that can/will be associated with the ingredientName member variable. \r\n\r\nThis is assuming that you want the value of the **name** column from the ingredient_types table to be the **ingredientName**.","title":"Room&#39;s DAOimpl not generating correctly","body":"<p>Try <code>SELECT b.position,b.name,b.capacity,b.currentAmount, it.name AS ingredientName FROM ....</code></p>\n<ul>\n<li>where <code>....</code> is the rest of the query. i.e. the important part is aliasing the <strong>name</strong> column to be <strong>ingredientName</strong> using <strong><code>AS</code></strong>.</li>\n</ul>\n<p>i.e. you are supplying the value that can/will be associated with the ingredientName member variable.</p>\n<p>This is assuming that you want the value of the <strong>name</strong> column from the ingredient_types table to be the <strong>ingredientName</strong>.</p>\n"}],"owner":{"account_id":25676685,"reputation":91,"user_id":19440016,"display_name":"Dioswison"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76301866,"answer_count":1,"score":0,"last_activity_date":1684798167,"creation_date":1684682568,"question_id":76300620,"body_markdown":"I am trying to use Room library to access a DB, but DAO implementation is not generating well.\r\nIn my DAO interface i have:\r\n```java\r\n @Query(&quot;SELECT b.position,b.name,b.capacity,b.currentAmount, it.name FROM bottles AS b &quot; +\r\n            &quot;INNER JOIN bottle_ingredient AS bi ON bi.bottlePos=b.position &quot; +\r\n            &quot;INNER JOIN ingredient_types AS it ON it.id=bi.ingredientId&quot; +\r\n            &quot; WHERE position = :position&quot;)\r\n    Bottle getBottleWithIngredientFromPosition(int position);\r\n```\r\nAnd my bottle class is the following:\r\n```java\r\npublic class Bottle {\r\n    public int position;\r\n    public String name;\r\n    public int capacity;\r\n    public int currentAmount;\r\n    public String ingredientName;\r\n\r\n    //Constructor, getters and setters\r\n}\r\n```\r\nBut when i create a new Bottle object with the DAO it gets created with &quot;ingredientName&quot; as null. I checked the implementation Room generates and is the following:\r\n```java\r\n@Override\r\n  public Bottle getBottleWithIngredientFromPosition(final int position) {\r\n    final String _sql = &quot;SELECT b.position,b.name,b.capacity,b.currentAmount, it.name FROM bottles AS b INNER JOIN bottle_ingredient AS bi ON bi.bottlePos=b.position INNER JOIN ingredient_types AS it ON it.id=bi.ingredientId WHERE position = ?&quot;;\r\n    final RoomSQLiteQuery _statement = RoomSQLiteQuery.acquire(_sql, 1);\r\n    int _argIndex = 1;\r\n    _statement.bindLong(_argIndex, position);\r\n    __db.assertNotSuspendingTransaction();\r\n    final Cursor _cursor = DBUtil.query(__db, _statement, false, null);\r\n    try {\r\n      final int _cursorIndexOfPosition = 0;\r\n      final int _cursorIndexOfName = 1;\r\n      final int _cursorIndexOfCapacity = 2;\r\n      final int _cursorIndexOfCurrentAmount = 3;\r\n      final Bottle _result;\r\n      if(_cursor.moveToFirst()) {\r\n        final int _tmpPosition;\r\n        _tmpPosition = _cursor.getInt(_cursorIndexOfPosition);\r\n        final String _tmpName;\r\n        if (_cursor.isNull(_cursorIndexOfName)) {\r\n          _tmpName = null;\r\n        } else {\r\n          _tmpName = _cursor.getString(_cursorIndexOfName);\r\n        }\r\n        final int _tmpCapacity;\r\n        _tmpCapacity = _cursor.getInt(_cursorIndexOfCapacity);\r\n        final int _tmpCurrentAmount;\r\n        _tmpCurrentAmount = _cursor.getInt(_cursorIndexOfCurrentAmount);\r\n        _result = new Bottle(_tmpPosition,_tmpName,_tmpCapacity,_tmpCurrentAmount,null);\r\n      } else {\r\n        _result = null;\r\n      }\r\n      return _result;\r\n    } finally {\r\n      _cursor.close();\r\n      _statement.release();\r\n    }\r\n  }\r\n```\r\nAs we can see it calls the constructor with last parameter as null and never tries to get it from the DB. \r\nI downloaded SQLite DB and run the query manually and it works as espected","title":"Room&#39;s DAOimpl not generating correctly","body":"<p>I am trying to use Room library to access a DB, but DAO implementation is not generating well.\nIn my DAO interface i have:</p>\n<pre class=\"lang-java prettyprint-override\"><code> @Query(&quot;SELECT b.position,b.name,b.capacity,b.currentAmount, it.name FROM bottles AS b &quot; +\n            &quot;INNER JOIN bottle_ingredient AS bi ON bi.bottlePos=b.position &quot; +\n            &quot;INNER JOIN ingredient_types AS it ON it.id=bi.ingredientId&quot; +\n            &quot; WHERE position = :position&quot;)\n    Bottle getBottleWithIngredientFromPosition(int position);\n</code></pre>\n<p>And my bottle class is the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Bottle {\n    public int position;\n    public String name;\n    public int capacity;\n    public int currentAmount;\n    public String ingredientName;\n\n    //Constructor, getters and setters\n}\n</code></pre>\n<p>But when i create a new Bottle object with the DAO it gets created with &quot;ingredientName&quot; as null. I checked the implementation Room generates and is the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n  public Bottle getBottleWithIngredientFromPosition(final int position) {\n    final String _sql = &quot;SELECT b.position,b.name,b.capacity,b.currentAmount, it.name FROM bottles AS b INNER JOIN bottle_ingredient AS bi ON bi.bottlePos=b.position INNER JOIN ingredient_types AS it ON it.id=bi.ingredientId WHERE position = ?&quot;;\n    final RoomSQLiteQuery _statement = RoomSQLiteQuery.acquire(_sql, 1);\n    int _argIndex = 1;\n    _statement.bindLong(_argIndex, position);\n    __db.assertNotSuspendingTransaction();\n    final Cursor _cursor = DBUtil.query(__db, _statement, false, null);\n    try {\n      final int _cursorIndexOfPosition = 0;\n      final int _cursorIndexOfName = 1;\n      final int _cursorIndexOfCapacity = 2;\n      final int _cursorIndexOfCurrentAmount = 3;\n      final Bottle _result;\n      if(_cursor.moveToFirst()) {\n        final int _tmpPosition;\n        _tmpPosition = _cursor.getInt(_cursorIndexOfPosition);\n        final String _tmpName;\n        if (_cursor.isNull(_cursorIndexOfName)) {\n          _tmpName = null;\n        } else {\n          _tmpName = _cursor.getString(_cursorIndexOfName);\n        }\n        final int _tmpCapacity;\n        _tmpCapacity = _cursor.getInt(_cursorIndexOfCapacity);\n        final int _tmpCurrentAmount;\n        _tmpCurrentAmount = _cursor.getInt(_cursorIndexOfCurrentAmount);\n        _result = new Bottle(_tmpPosition,_tmpName,_tmpCapacity,_tmpCurrentAmount,null);\n      } else {\n        _result = null;\n      }\n      return _result;\n    } finally {\n      _cursor.close();\n      _statement.release();\n    }\n  }\n</code></pre>\n<p>As we can see it calls the constructor with last parameter as null and never tries to get it from the DB.\nI downloaded SQLite DB and run the query manually and it works as espected</p>\n"},{"tags":["java","android","google-play-services","ocr","google-mlkit"],"answers":[{"tags":[],"owner":{"account_id":7176905,"reputation":67,"user_id":5482475,"display_name":"Pramod Nikule"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682315795,"creation_date":1682315795,"answer_id":76088922,"question_id":76041749,"body_markdown":"I tried after updating the Google Play services to latest (23.13.12) and it worked!\r\n\r\nI don&#39;t see any documentation of minimum version of Google Play Services required for MLKit.","title":"MLKit unable to detect text on Android-8","body":"<p>I tried after updating the Google Play services to latest (23.13.12) and it worked!</p>\n<p>I don't see any documentation of minimum version of Google Play Services required for MLKit.</p>\n"},{"tags":[],"owner":{"account_id":26359810,"reputation":39,"user_id":20016188,"display_name":"stunningdimension22"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684797555,"creation_date":1684797555,"answer_id":76310418,"question_id":76041749,"body_markdown":"Glad to see you got it working. If you had any logs of the issue to share, it would be helpful to figure out why.\r\n\r\nThx!","title":"MLKit unable to detect text on Android-8","body":"<p>Glad to see you got it working. If you had any logs of the issue to share, it would be helpful to figure out why.</p>\n<p>Thx!</p>\n"}],"owner":{"account_id":7176905,"reputation":67,"user_id":5482475,"display_name":"Pramod Nikule"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1684797555,"creation_date":1681801969,"question_id":76041749,"body_markdown":"I am trying `com.google.android.gms:play-services-mlkit-text-recognition` library for OCR which is working absolutely fine on all Android versions except Android-8.\r\n\r\nThe library `play-services-mlkit-text-recognition` is able to recognise text on all Android versions but it fails to recognise text on Android-8 and returning empty array.\r\n\r\nI followed all the steps given in https://developers.google.com/ml-kit/vision/text-recognition/android.\r\n\r\nThe library I am using is `com.google.android.gms:play-services-mlkit-text-recognition:18.0.2` with Google Play Services (`com.google.android.gms`) version `22.50.14 (version code: 225014021)`.\r\n\r\nDoes anyone have any idea whats going wrong here?","title":"MLKit unable to detect text on Android-8","body":"<p>I am trying <code>com.google.android.gms:play-services-mlkit-text-recognition</code> library for OCR which is working absolutely fine on all Android versions except Android-8.</p>\n<p>The library <code>play-services-mlkit-text-recognition</code> is able to recognise text on all Android versions but it fails to recognise text on Android-8 and returning empty array.</p>\n<p>I followed all the steps given in <a href=\"https://developers.google.com/ml-kit/vision/text-recognition/android\" rel=\"nofollow noreferrer\">https://developers.google.com/ml-kit/vision/text-recognition/android</a>.</p>\n<p>The library I am using is <code>com.google.android.gms:play-services-mlkit-text-recognition:18.0.2</code> with Google Play Services (<code>com.google.android.gms</code>) version <code>22.50.14 (version code: 225014021)</code>.</p>\n<p>Does anyone have any idea whats going wrong here?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9576,"page":416,"page_size":100}
