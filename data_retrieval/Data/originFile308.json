{"items":[{"tags":["java","linux","aws-lambda","docker-networking","aws-sam-cli"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1689359557,"post_id":76690311,"comment_id":135207714,"body_markdown":"This part of Stack Overflow is &quot;English Only&quot;. For Portuguese, please use https://pt.stackoverflow.com/  (Translation by translate.google.com)   /// Esta parte do Stack Overflow &#233; &quot;somente em ingl&#234;s&quot;. Para portugu&#234;s, use https://pt.stackoverflow.com/ (Tradu&#231;&#227;o por translate.google.com)","body":"This part of Stack Overflow is &quot;English Only&quot;. For Portuguese, please use <a href=\"https://pt.stackoverflow.com/\">pt.stackoverflow.com</a>  (Translation by translate.google.com)   /// Esta parte do Stack Overflow &#233; &quot;somente em ingl&#234;s&quot;. Para portugu&#234;s, use <a href=\"https://pt.stackoverflow.com/\">pt.stackoverflow.com</a> (Tradu&#231;&#227;o por translate.google.com)"}],"owner":{"account_id":29019249,"reputation":1,"user_id":22229063,"display_name":"Henrique Fernandes"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689360608,"creation_date":1689359307,"question_id":76690311,"body_markdown":"When running  \r\n```\r\nsam build --docker-network host \r\n```\r\nand inspecting the initialized Docker container, que can see that default network (bridge) was assigned, that is, the `docker-network` option had no effect.\r\n\r\n# Environment details\r\nSAM CLI version: 1.90.0\r\n\r\nOS: CentOS 7\r\n\r\nAWS region: us-east-1\r\n\r\nPackageType: Zip\r\n\r\n# Observed result:\r\n\r\n`sam build Function --template um-template.yaml --build-dir .aws-sam/build --docker-network host\r\n`\r\n\r\n`sam local invoke --template um-template.yaml --event &quot;um-event.json&quot; --docker-network host`\r\n\r\n```\r\nCONTAINER ID   IMAGE                COMMAND                  CREATED  STATUS  PORTS    NAMES\r\n4226540e96f4   public.ecr.aws/...   &quot;/var/rapid/aws-lamb…&quot;   2...     Up...   ...tcp   lambda\r\n\r\n\r\nCONTAINER ID   STATUS         NAMES      NETWORKS\r\n4226540e96f4   Up 2 minutes   lambda     bridge\r\n\r\n```\r\n# Expected result:\r\n\r\n```\r\nCONTAINER ID   IMAGE                COMMAND                  CREATED  STATUS  PORTS    NAMES\r\n4226540e96f4   public.ecr.aws/...   &quot;/var/rapid/aws-lamb…&quot;   2...     Up...   ...tcp   lambda\r\n\r\n\r\nCONTAINER ID   STATUS         NAMES      NETWORKS\r\n4226540e96f4   Up 2 minutes   lambda     host\r\n\r\n```\r\n","title":"Setting --docker-network option on sam build command has no effect","body":"<p>When running</p>\n<pre><code>sam build --docker-network host \n</code></pre>\n<p>and inspecting the initialized Docker container, que can see that default network (bridge) was assigned, that is, the <code>docker-network</code> option had no effect.</p>\n<h1>Environment details</h1>\n<p>SAM CLI version: 1.90.0</p>\n<p>OS: CentOS 7</p>\n<p>AWS region: us-east-1</p>\n<p>PackageType: Zip</p>\n<h1>Observed result:</h1>\n<p><code>sam build Function --template um-template.yaml --build-dir .aws-sam/build --docker-network host </code></p>\n<p><code>sam local invoke --template um-template.yaml --event &quot;um-event.json&quot; --docker-network host</code></p>\n<pre><code>CONTAINER ID   IMAGE                COMMAND                  CREATED  STATUS  PORTS    NAMES\n4226540e96f4   public.ecr.aws/...   &quot;/var/rapid/aws-lamb…&quot;   2...     Up...   ...tcp   lambda\n\n\nCONTAINER ID   STATUS         NAMES      NETWORKS\n4226540e96f4   Up 2 minutes   lambda     bridge\n\n</code></pre>\n<h1>Expected result:</h1>\n<pre><code>CONTAINER ID   IMAGE                COMMAND                  CREATED  STATUS  PORTS    NAMES\n4226540e96f4   public.ecr.aws/...   &quot;/var/rapid/aws-lamb…&quot;   2...     Up...   ...tcp   lambda\n\n\nCONTAINER ID   STATUS         NAMES      NETWORKS\n4226540e96f4   Up 2 minutes   lambda     host\n\n</code></pre>\n"},{"tags":["javascript","java","spring","spring-boot","rest"],"comments":[{"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1689359362,"post_id":76690306,"comment_id":135207680,"body_markdown":"Please post your Spring CORS configuration.","body":"Please post your Spring CORS configuration."},{"owner":{"account_id":13548231,"reputation":631,"user_id":9773847,"display_name":"Nyamkhuu Buyanjargal"},"score":0,"creation_date":1689359399,"post_id":76690306,"comment_id":135207687,"body_markdown":"first of all, you have to configure your cors configuration on your spring boot application, then try again","body":"first of all, you have to configure your cors configuration on your spring boot application, then try again"},{"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1689359529,"post_id":76690306,"comment_id":135207710,"body_markdown":"Also, please post the exact error.","body":"Also, please post the exact error."},{"owner":{"account_id":24344471,"reputation":3,"user_id":18281338,"display_name":"Abdelrahman Amr Attia Ewais"},"score":0,"creation_date":1689361486,"post_id":76690306,"comment_id":135208033,"body_markdown":"@Unmitigated i add the error from Browser but In spring boot app there is no errors","body":"@Unmitigated i add the error from Browser but In spring boot app there is no errors"},{"owner":{"account_id":24344471,"reputation":3,"user_id":18281338,"display_name":"Abdelrahman Amr Attia Ewais"},"score":0,"creation_date":1689361508,"post_id":76690306,"comment_id":135208036,"body_markdown":"@NyamkhuuBuyanjargal i already add it","body":"@NyamkhuuBuyanjargal i already add it"},{"owner":{"account_id":13548231,"reputation":631,"user_id":9773847,"display_name":"Nyamkhuu Buyanjargal"},"score":0,"creation_date":1689364730,"post_id":76690306,"comment_id":135208559,"body_markdown":"@AbdelrahmanAmrAttiaEwais if it&#39;s possible can you show us&gt;?","body":"@AbdelrahmanAmrAttiaEwais if it&#39;s possible can you show us&gt;?"}],"owner":{"account_id":24344471,"reputation":3,"user_id":18281338,"display_name":"Abdelrahman Amr Attia Ewais"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689359738,"creation_date":1689359252,"question_id":76690306,"body_markdown":"When make Spring boot app and simple controller and API for login and run JS script \r\n\r\n     fetch(&quot;http://localhost:8080/authenticate/login&quot;, {\r\n      method: &quot;POST&quot;,\r\n      body: JSON.stringify({\r\n        email: &quot;abdelrahman.amr@gmail.com&quot;,\r\n        password: &quot;admin&quot;,\r\n      }),\r\n\t  headers: {\r\n        &quot;Content-Type&quot;: &quot;application/json&quot;,\r\n      },\r\n    })\r\n      .then(console.log)\r\n      .catch(console.error);\r\n\r\nthe request call spring boot app and when i debug the request return a success response while in browser catch an error with status 200 and type cors while in Spring i allow all origins\r\n\r\n     @Override\r\n    public void addCorsMappings(CorsRegistry registry) {\r\n        registry.addMapping(&quot;/**&quot;)\r\n                .allowedOrigins(&quot;*&quot;)\r\n                .allowedMethods(&quot;*&quot;)\r\n                .allowedHeaders(&quot;*&quot;);\r\n    }\r\n\r\n\r\nis this Error Can Produced From My AuthFilter or Interceptor ? or where this issue generated\r\n\r\nThe Browser Response \r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fOyXL.png","title":"CORS Exception From Browser","body":"<p>When make Spring boot app and simple controller and API for login and run JS script</p>\n<pre><code> fetch(&quot;http://localhost:8080/authenticate/login&quot;, {\n  method: &quot;POST&quot;,\n  body: JSON.stringify({\n    email: &quot;abdelrahman.amr@gmail.com&quot;,\n    password: &quot;admin&quot;,\n  }),\n  headers: {\n    &quot;Content-Type&quot;: &quot;application/json&quot;,\n  },\n})\n  .then(console.log)\n  .catch(console.error);\n</code></pre>\n<p>the request call spring boot app and when i debug the request return a success response while in browser catch an error with status 200 and type cors while in Spring i allow all origins</p>\n<pre><code> @Override\npublic void addCorsMappings(CorsRegistry registry) {\n    registry.addMapping(&quot;/**&quot;)\n            .allowedOrigins(&quot;*&quot;)\n            .allowedMethods(&quot;*&quot;)\n            .allowedHeaders(&quot;*&quot;);\n}\n</code></pre>\n<p>is this Error Can Produced From My AuthFilter or Interceptor ? or where this issue generated</p>\n<p>The Browser Response\n<a href=\"https://i.stack.imgur.com/fOyXL.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","arrays","csv","int","genetic"],"comments":[{"owner":{"account_id":12695174,"reputation":45171,"user_id":9223839,"display_name":"Joakim Danielson"},"score":3,"creation_date":1576220696,"post_id":59317619,"comment_id":104836009,"body_markdown":"Is that the real format of the integers or just how they are displayed in a spreadsheet? Please post (correct) sample values as text to your question.","body":"Is that the real format of the integers or just how they are displayed in a spreadsheet? Please post (correct) sample values as text to your question."},{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":2,"creation_date":1576220740,"post_id":59317619,"comment_id":104836021,"body_markdown":"Start by fixing the code you have. Use your debugger. Use println in the code to understand what you&#39;re doing. Splitting a line on &quot;\\n&quot; doesn&#39;t make much sense. Once you really have an array of Strings, parse each string into an integer.","body":"Start by fixing the code you have. Use your debugger. Use println in the code to understand what you&#39;re doing. Splitting a line on &quot;\\n&quot; doesn&#39;t make much sense. Once you really have an array of Strings, parse each string into an integer."},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":1,"creation_date":1576220946,"post_id":59317619,"comment_id":104836091,"body_markdown":"You can use `Integer.parseInt(text)` on the individual strings and collect them into `int[]`. Sounds like a bad approach in general though. Go OOP, create a dedicated class to logically represent the data you have per line. Give it a `parseLine` method that creates it from a given line. Then simply read doing `List&lt;Foo&gt; foos = Files.lines(Paths,get(&quot;file.csv&quot;)).map(Foo::parseLine).collect(Collectors.toList());` - modern Java, hurray.","body":"You can use <code>Integer.parseInt(text)</code> on the individual strings and collect them into <code>int[]</code>. Sounds like a bad approach in general though. Go OOP, create a dedicated class to logically represent the data you have per line. Give it a <code>parseLine</code> method that creates it from a given line. Then simply read doing <code>List&lt;Foo&gt; foos = Files.lines(Paths,get(&quot;file.csv&quot;)).map(Foo::parseLine).colle&zwnj;&#8203;ct(Collectors.toList&zwnj;&#8203;());</code> - modern Java, hurray."}],"answers":[{"tags":[],"owner":{"account_id":8593005,"reputation":1706,"user_id":6436977,"display_name":"T A"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1576223876,"creation_date":1576223876,"answer_id":59318358,"question_id":59317619,"body_markdown":"You are parsing your lines as `String` values, not as `Integers`. Judging from your image your integers are in exponential notation, meaning you would have to parse them first as double, and then cast them to an integer:\r\n\r\n        List&lt;Integer&gt; x_values = new ArrayList&lt;&gt;();\r\n\r\n        try (BufferedReader br = new BufferedReader(new FileReader(&quot;x.csv&quot;))) {\r\n            String line;\r\n            while ((line = br.readLine()) != null) {\r\n                String[] values = line.split(&quot;\\n&quot;);\r\n                List&lt;Integer&gt; intValues = Arrays.asList(values).stream()\r\n                        .map(Double::parseDouble) // parse x.xxE+02 to xxx.0\r\n                        .map(Double::intValue) // xxx.0 to integer xxx\r\n                        .collect(Collectors.toList()); // back to List\r\n                x_values.addAll(intValues);\r\n            }\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\nYou should make sure though that your csv file only contains integers, otherwise use `List&lt;Double&gt; x_values` instead and skip the int conversion.","title":"How can I convert CSV file into an integer array in java?","body":"<p>You are parsing your lines as <code>String</code> values, not as <code>Integers</code>. Judging from your image your integers are in exponential notation, meaning you would have to parse them first as double, and then cast them to an integer:</p>\n\n<pre><code>    List&lt;Integer&gt; x_values = new ArrayList&lt;&gt;();\n\n    try (BufferedReader br = new BufferedReader(new FileReader(\"x.csv\"))) {\n        String line;\n        while ((line = br.readLine()) != null) {\n            String[] values = line.split(\"\\n\");\n            List&lt;Integer&gt; intValues = Arrays.asList(values).stream()\n                    .map(Double::parseDouble) // parse x.xxE+02 to xxx.0\n                    .map(Double::intValue) // xxx.0 to integer xxx\n                    .collect(Collectors.toList()); // back to List\n            x_values.addAll(intValues);\n        }\n\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n</code></pre>\n\n<p>You should make sure though that your csv file only contains integers, otherwise use <code>List&lt;Double&gt; x_values</code> instead and skip the int conversion.</p>\n"},{"tags":[],"owner":{"account_id":4973669,"reputation":23,"user_id":4013042,"display_name":"Bob Wojack"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689359174,"creation_date":1689359174,"answer_id":76690298,"question_id":59317619,"body_markdown":"A slightly more modern and concise answer\r\n\r\n```\r\n\t List&lt;Integer&gt; x_values = new ArrayList&lt;&gt;();\r\n\r\n\t try (BufferedReader br = Files.newBufferedReader(Paths.get(&quot;x.csv&quot;))) {\r\n\t\t List&lt;Integer&gt; intValues = br.lines()\r\n\t\t\t\t .map(Double::parseDouble) // parse x.xxE+02 to xxx.0\r\n\t\t\t\t .map(Double::intValue) // xxx.0 to integer xxx\r\n\t\t\t\t .collect(Collectors.toList()); // back to List\r\n\t\t x_values.addAll(intValues);\r\n\r\n\t } catch (IOException e) {\r\n\t\t e.printStackTrace();\r\n\t }\r\n```","title":"How can I convert CSV file into an integer array in java?","body":"<p>A slightly more modern and concise answer</p>\n<pre><code>     List&lt;Integer&gt; x_values = new ArrayList&lt;&gt;();\n\n     try (BufferedReader br = Files.newBufferedReader(Paths.get(&quot;x.csv&quot;))) {\n         List&lt;Integer&gt; intValues = br.lines()\n                 .map(Double::parseDouble) // parse x.xxE+02 to xxx.0\n                 .map(Double::intValue) // xxx.0 to integer xxx\n                 .collect(Collectors.toList()); // back to List\n         x_values.addAll(intValues);\n\n     } catch (IOException e) {\n         e.printStackTrace();\n     }\n</code></pre>\n"}],"owner":{"account_id":13664826,"reputation":3,"user_id":9858989,"display_name":"Vhd. h"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2630,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":59318358,"answer_count":2,"score":0,"last_activity_date":1689359174,"creation_date":1576220447,"question_id":59317619,"body_markdown":"I have a CSV file including integer numbers :  \r\n[![x.csv][1]][1]\r\n\r\n\r\nI convert it into an String array:\r\n\r\n    try (BufferedReader br = new BufferedReader(new FileReader(&quot;x.csv&quot;))) {\r\n            String line;\r\n            while ((line = br.readLine()) != null) {\r\n                String[] values = line.split(&quot;\\n&quot;);\r\n                x_values.add(Arrays.asList(values));\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\nThe output is like this :\r\n[output][2]\r\n\r\nbut I want to use values as integer numbers and find their average. How can I do that?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/66yXL.png\r\n  [2]: https://i.stack.imgur.com/L8GhN.png","title":"How can I convert CSV file into an integer array in java?","body":"<p>I have a CSV file including integer numbers :<br>\n<a href=\"https://i.stack.imgur.com/66yXL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/66yXL.png\" alt=\"x.csv\"></a></p>\n\n<p>I convert it into an String array:</p>\n\n<pre><code>try (BufferedReader br = new BufferedReader(new FileReader(\"x.csv\"))) {\n        String line;\n        while ((line = br.readLine()) != null) {\n            String[] values = line.split(\"\\n\");\n            x_values.add(Arrays.asList(values));\n        }\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n</code></pre>\n\n<p>The output is like this :\n<a href=\"https://i.stack.imgur.com/L8GhN.png\" rel=\"nofollow noreferrer\">output</a></p>\n\n<p>but I want to use values as integer numbers and find their average. How can I do that?</p>\n"},{"tags":["java","spring-boot","hikaricp"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1689318567,"post_id":76685008,"comment_id":135199237,"body_markdown":"Looks like the oracle driver isn&#39;t part of yuour dependencies. Also you shouldn&#39;t need to specify a version for your starter dependencies (assuming you have the `spring-boot-starter-parent` as your `&lt;parent&gt;`).","body":"Looks like the oracle driver isn&#39;t part of yuour dependencies. Also you shouldn&#39;t need to specify a version for your starter dependencies (assuming you have the <code>spring-boot-starter-parent</code> as your <code>&lt;parent&gt;</code>)."},{"owner":{"account_id":12883738,"reputation":47,"user_id":9317986,"display_name":"Manoj Kumar"},"score":0,"creation_date":1689343825,"post_id":76685008,"comment_id":135204334,"body_markdown":"oracle driver is also part of the dependency, updated the earlier post","body":"oracle driver is also part of the dependency, updated the earlier post"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689575375,"post_id":76685008,"comment_id":135227144,"body_markdown":"How are you constructing the jar? If you are using the proper way it should be part of your fatjar. Also are you using the same properties for your other deployment? Looks like either the JDBC isn&#39;t there **or** you are using different URL.","body":"How are you constructing the jar? If you are using the proper way it should be part of your fatjar. Also are you using the same properties for your other deployment? Looks like either the JDBC isn&#39;t there <b>or</b> you are using different URL."}],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689359090,"creation_date":1689317354,"answer_id":76685309,"question_id":76685008,"body_markdown":"I have checked the Spring source code where the exception is thrown. It will be thrown only if there is **NO** property `driver-class-name`. Your code shows however that it is present in `application.properties`.\r\n\r\nThe only reasonable explanation is that the above property file is either missing in the application JAR or not on the classpath.\r\n\r\nBased on: [DataSourceProperties.java][1]\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/blob/main/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/jdbc/DataSourceProperties.java","title":"HikariCP configuration not working in my app developed in Spring Boot","body":"<p>I have checked the Spring source code where the exception is thrown. It will be thrown only if there is <strong>NO</strong> property <code>driver-class-name</code>. Your code shows however that it is present in <code>application.properties</code>.</p>\n<p>The only reasonable explanation is that the above property file is either missing in the application JAR or not on the classpath.</p>\n<p>Based on: <a href=\"https://github.com/spring-projects/spring-boot/blob/main/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/jdbc/DataSourceProperties.java\" rel=\"nofollow noreferrer\">DataSourceProperties.java</a></p>\n"}],"owner":{"account_id":12883738,"reputation":47,"user_id":9317986,"display_name":"Manoj Kumar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":294,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689359090,"creation_date":1689313789,"question_id":76685008,"body_markdown":"I have an application developed in Springboot and I am in need to use Connection Pool settings as connections are getting exhausted while running a load test. I am relying on SpringBoot auto configuration to set the &quot;datasource&quot;. Application is working fine when tested in my local workspace in IntelliJ but the same is not working when deployed in Kubernetes cluster. My spring boot version in 2.6.6 and using JDK11. \r\n\r\nI have read that based on &quot;spring.datasource.url&quot; springBoot identifies the driver class name, but in my case it is not happening\r\n\r\nMaven dependency\r\n        \r\n\r\n    &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.boot.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.boot.version}&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.boot.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\r\n                &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\r\n                &lt;version&gt;21.9.0.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n\r\n  \r\n\r\nMy application.properties looks like below\r\n\r\n    spring.datasource.url=jdbc:oracle:thin:@......\r\n    spring.datasource.username=test\r\n    spring.datasource.password=test\r\n    spring.datasource.driver-class-name=oracle.jdbc.OracleDriver\r\n    spring.main.allow-bean-definition-overriding=true\r\n    \r\n    #connection pool configuration\r\n    spring.datasource.hikari.pool-name=SVMConnectionPool\r\n    spring.datasource.hikari.maximum-pool-size=60\r\n\r\nError that I see in the logs\r\n\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method &#39;dataSource&#39; threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\r\n    2023-07-14T05:34:41.696439652Z \t\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\r\n    2023-07-14T05:34:41.696442966Z \t\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\r\n    2023-07-14T05:34:41.696445978Z \t\t... 121 more\r\n    2023-07-14T05:34:41.696449043Z \tCaused by: org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\r\n    \t\tat org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.determineDriverClassName(DataSourceProperties.java:252)\r\n    \t\tat org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.initializeDataSourceBuilder(DataSourceProperties.java:193)\r\n    2023-07-14T05:34:41.696457775Z \t\tat org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration.createDataSource(DataSourceConfiguration.java:48)\r\n    2023-07-14T05:34:41.696460846Z \t\tat org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration$Hikari.dataSource(DataSourceConfiguration.java:90)\r\n    2023-07-14T05:34:41.696464391Z \t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    2023-07-14T05:34:41.696467454Z \t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    2023-07-14T05:34:41.696470269Z \t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    2023-07-14T05:34:41.696473242Z \t\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \t\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)","title":"HikariCP configuration not working in my app developed in Spring Boot","body":"<p>I have an application developed in Springboot and I am in need to use Connection Pool settings as connections are getting exhausted while running a load test. I am relying on SpringBoot auto configuration to set the &quot;datasource&quot;. Application is working fine when tested in my local workspace in IntelliJ but the same is not working when deployed in Kubernetes cluster. My spring boot version in 2.6.6 and using JDK11.</p>\n<p>I have read that based on &quot;spring.datasource.url&quot; springBoot identifies the driver class name, but in my case it is not happening</p>\n<p>Maven dependency</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;${spring.boot.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;version&gt;${spring.boot.version}&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n            &lt;version&gt;${spring.boot.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\n            &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\n            &lt;version&gt;21.9.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>My application.properties looks like below</p>\n<pre><code>spring.datasource.url=jdbc:oracle:thin:@......\nspring.datasource.username=test\nspring.datasource.password=test\nspring.datasource.driver-class-name=oracle.jdbc.OracleDriver\nspring.main.allow-bean-definition-overriding=true\n\n#connection pool configuration\nspring.datasource.hikari.pool-name=SVMConnectionPool\nspring.datasource.hikari.maximum-pool-size=60\n</code></pre>\n<p>Error that I see in the logs</p>\n<pre><code>Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\n2023-07-14T05:34:41.696439652Z      at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\n2023-07-14T05:34:41.696442966Z      at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\n2023-07-14T05:34:41.696445978Z      ... 121 more\n2023-07-14T05:34:41.696449043Z  Caused by: org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class\n        at org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.determineDriverClassName(DataSourceProperties.java:252)\n        at org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.initializeDataSourceBuilder(DataSourceProperties.java:193)\n2023-07-14T05:34:41.696457775Z      at org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration.createDataSource(DataSourceConfiguration.java:48)\n2023-07-14T05:34:41.696460846Z      at org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration$Hikari.dataSource(DataSourceConfiguration.java:90)\n2023-07-14T05:34:41.696464391Z      at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n2023-07-14T05:34:41.696467454Z      at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n2023-07-14T05:34:41.696470269Z      at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n2023-07-14T05:34:41.696473242Z      at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","tomcat","intellij-idea"],"comments":[{"owner":{"account_id":11024638,"reputation":126,"user_id":8097900,"display_name":"Leon Klute"},"score":0,"creation_date":1688718563,"post_id":76635175,"comment_id":135114256,"body_markdown":"What does the logging show? You could set the logging level for spring very low to see what is happening internally.","body":"What does the logging show? You could set the logging level for spring very low to see what is happening internally."},{"owner":{"account_id":23176387,"reputation":29,"user_id":17274825,"display_name":"vegaLDN"},"score":0,"creation_date":1688718952,"post_id":76635175,"comment_id":135114331,"body_markdown":"@LeonKlute i have edited question. What kind of log did u mean exactly?","body":"@LeonKlute i have edited question. What kind of log did u mean exactly?"},{"owner":{"account_id":1807376,"reputation":1019,"user_id":1644214,"accept_rate":100,"display_name":"alvonellos"},"score":0,"creation_date":1688719440,"post_id":76635175,"comment_id":135114412,"body_markdown":"Hey, quick question. Is there a particular reason you&#39;re not using Spring Boot?","body":"Hey, quick question. Is there a particular reason you&#39;re not using Spring Boot?"},{"owner":{"account_id":23176387,"reputation":29,"user_id":17274825,"display_name":"vegaLDN"},"score":0,"creation_date":1688719909,"post_id":76635175,"comment_id":135114487,"body_markdown":"@alvonellos sorry, but my spring knowledge is so little and all that i know, i training spring MVC for web apps and do this","body":"@alvonellos sorry, but my spring knowledge is so little and all that i know, i training spring MVC for web apps and do this"},{"owner":{"account_id":23176387,"reputation":29,"user_id":17274825,"display_name":"vegaLDN"},"score":0,"creation_date":1688720013,"post_id":76635175,"comment_id":135114510,"body_markdown":"@alvonellos or you told about dependencies?","body":"@alvonellos or you told about dependencies?"}],"answers":[{"tags":[],"owner":{"account_id":419537,"reputation":4992,"user_id":796761,"accept_rate":50,"display_name":"dbreaux"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689005206,"creation_date":1689005206,"answer_id":76655511,"question_id":76635175,"body_markdown":"&gt; java.lang.ClassCastException: class org.springframework.web.servlet.DispatcherServlet cannot be cast to class javax.servlet.Servlet (org.springframework.web.servlet.DispatcherServlet\r\n\r\nSpring 6.0 requires the new `jakarta.servlet` namespace instead of `javax.servlet`. So you&#39;ll need Tomcat 10, it appears.\r\n\r\nhttps://spring.io/blog/2022/11/16/spring-framework-6-0-goes-ga\r\n\r\nhttps://tomcat.apache.org/migration-10.html\r\n","title":"Spring MVC application doesnt mapping. Apache TomCat 9. IntelliJ IDEA. Linux Mint","body":"<blockquote>\n<p>java.lang.ClassCastException: class org.springframework.web.servlet.DispatcherServlet cannot be cast to class javax.servlet.Servlet (org.springframework.web.servlet.DispatcherServlet</p>\n</blockquote>\n<p>Spring 6.0 requires the new <code>jakarta.servlet</code> namespace instead of <code>javax.servlet</code>. So you'll need Tomcat 10, it appears.</p>\n<p><a href=\"https://spring.io/blog/2022/11/16/spring-framework-6-0-goes-ga\" rel=\"nofollow noreferrer\">https://spring.io/blog/2022/11/16/spring-framework-6-0-goes-ga</a></p>\n<p><a href=\"https://tomcat.apache.org/migration-10.html\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/migration-10.html</a></p>\n"},{"tags":[],"owner":{"account_id":23176387,"reputation":29,"user_id":17274825,"display_name":"vegaLDN"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689358271,"creation_date":1689358271,"answer_id":76690213,"question_id":76635175,"body_markdown":"So, in 1 week i solve my problem and i hope if someone take a same problem my answer help you.\r\n\r\nAll dependencies in pom.xml was right (jakarta-api 6 with spring6 and thymeleaf6) ofc i need use TomCat 10+ for Spring 6+ (10.1.11 - currently my version).\r\n\r\nI tried use `mvn clean install` command in the terminal and i see that problem: \r\n\r\n    Failed to execute goal org.apache.maven.plugins:maven-war-plugin:2.2:war \r\n    (default-war) on project spring_web_app1: Execution default-war of goal \r\n    org.apache.maven.plugins:maven-war-plugin:2.2:war failed: Unable to load \r\n    the mojo &#39;war&#39; in the plugin &#39;org.apache.maven.plugins:maven-war- \r\n    plugin:2.2&#39; due to an API incompatibility: \r\n org.codehaus.plexus.component.repository.exception.ComponentLookupException: Cannot access defaults field of Properties\r\n\r\nThe problem is related to version compatibility of the **Maven War Plugin**.\r\n\r\nAfter that i add plugin with new version:\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.2.3&lt;/version&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n\r\n&gt; Maybe Perhaps the default version was 2.2\r\n\r\nAnd after that if u run use `mvn clean install` u will take an error with web.xml and u need add that file and use basic config (u can find it in google) after configurating web.xml u can use `mvn clean install`. \r\n\r\nMy full pom.xml:\r\n\r\n   \r\n\r\n     &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;edu.vega.spring&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring_web_app1&lt;/artifactId&gt;\r\n      &lt;packaging&gt;war&lt;/packaging&gt;\r\n      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n      &lt;name&gt;spring_web_app1 Maven Webapp&lt;/name&gt;\r\n      &lt;url&gt;https://maven.apache.org&lt;/url&gt;\r\n      &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;20&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;20&lt;/maven.compiler.target&gt;\r\n      &lt;/properties&gt;\r\n    \r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;junit&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n          &lt;version&gt;4.13.1&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n          &lt;version&gt;6.0.11&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n          &lt;version&gt;6.0.11&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n          &lt;version&gt;6.0.11&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n          &lt;version&gt;6.0.11&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\r\n          &lt;artifactId&gt;thymeleaf-spring6&lt;/artifactId&gt;\r\n          &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\r\n          &lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\r\n          &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\r\n          &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\r\n          &lt;version&gt;6.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n      &lt;/dependencies&gt;\r\n      &lt;build&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.2.3&lt;/version&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n&gt; Please correcting me if u will find some mistakes in my answer.","title":"Spring MVC application doesnt mapping. Apache TomCat 9. IntelliJ IDEA. Linux Mint","body":"<p>So, in 1 week i solve my problem and i hope if someone take a same problem my answer help you.</p>\n<p>All dependencies in pom.xml was right (jakarta-api 6 with spring6 and thymeleaf6) ofc i need use TomCat 10+ for Spring 6+ (10.1.11 - currently my version).</p>\n<p>I tried use <code>mvn clean install</code> command in the terminal and i see that problem:</p>\n<pre><code>Failed to execute goal org.apache.maven.plugins:maven-war-plugin:2.2:war \n(default-war) on project spring_web_app1: Execution default-war of goal \norg.apache.maven.plugins:maven-war-plugin:2.2:war failed: Unable to load \nthe mojo 'war' in the plugin 'org.apache.maven.plugins:maven-war- \nplugin:2.2' due to an API incompatibility: \n</code></pre>\n<p>org.codehaus.plexus.component.repository.exception.ComponentLookupException: Cannot access defaults field of Properties</p>\n<p>The problem is related to version compatibility of the <strong>Maven War Plugin</strong>.</p>\n<p>After that i add plugin with new version:</p>\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.2.3&lt;/version&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n</code></pre>\n<blockquote>\n<p>Maybe Perhaps the default version was 2.2</p>\n</blockquote>\n<p>And after that if u run use <code>mvn clean install</code> u will take an error with web.xml and u need add that file and use basic config (u can find it in google) after configurating web.xml u can use <code>mvn clean install</code>.</p>\n<p>My full pom.xml:</p>\n<pre><code> &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;edu.vega.spring&lt;/groupId&gt;\n  &lt;artifactId&gt;spring_web_app1&lt;/artifactId&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n  &lt;name&gt;spring_web_app1 Maven Webapp&lt;/name&gt;\n  &lt;url&gt;https://maven.apache.org&lt;/url&gt;\n  &lt;properties&gt;\n    &lt;maven.compiler.source&gt;20&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;20&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;4.13.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n      &lt;version&gt;6.0.11&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n      &lt;version&gt;6.0.11&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n      &lt;version&gt;6.0.11&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n      &lt;version&gt;6.0.11&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n      &lt;artifactId&gt;thymeleaf-spring6&lt;/artifactId&gt;\n      &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n      &lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\n      &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\n      &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\n      &lt;version&gt;6.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n  &lt;/dependencies&gt;\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.2.3&lt;/version&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<blockquote>\n<p>Please correcting me if u will find some mistakes in my answer.</p>\n</blockquote>\n"}],"owner":{"account_id":23176387,"reputation":29,"user_id":17274825,"display_name":"vegaLDN"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76690213,"answer_count":2,"score":0,"last_activity_date":1689358271,"creation_date":1688718169,"question_id":76635175,"body_markdown":"****I just started learning how to make Spring MVC applications. Installed Tomcat 9. The error is most likely that the mapping does not work. Also i use thymeleaf. The execution of the program basically does not reach my Java code (I set breakpoints and the application did not stop).****\r\n\r\n&gt; I have tried installing different versions of Tomcat\r\n\r\nI also checked the port and entered the correct URL. I would also like to note that when entering the full path to the hello.html file (relative to the webapp), in my case *http://localhost:8080/views/hello.html*, it also gives a 404 error, but everything will work with the jsp file *http://localhost:8080/views/hello.jsp* (but it&#39;s still not the right thing, because the mapping doesn&#39;t work).\r\n\r\n&gt; As planned, hello.html should be displayed in the browser when you\r\n&gt; enter the string *http://localhost:8080/helloW* in the url.\r\n\r\nThe problem is that when I type in the URL ***http://localhost:8080/helloW*** and see:\r\n[![enter image description here][1]][1]\r\n\r\n\r\nI also tried to put different Application Context in the configuration:\r\n[![enter image description here][2]][2]\r\n\r\n\r\nMy project structure:\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\nBelow i going to show code of my classes:\r\n\r\nHelloController:\r\n```java\r\n    package edu.vega.spring;\r\n    \r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    \r\n    @Controller\r\n    public class HelloController {\r\n        @GetMapping(value = {&quot;/helloW&quot;, &quot;/&quot;})\r\n        public String sayHello(){\r\n            return &quot;hello&quot;;\r\n        }\r\n    }\r\n```\r\n\r\nMySpringMVCDispatcherServletInitializer:\r\n```java\r\n    package edu.vega.spring.config;\r\n    \r\n    import org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;\r\n    \r\n    public class MySpringMVCDispatcherServletInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {\r\n    \r\n        @Override\r\n        protected Class&lt;?&gt;[] getRootConfigClasses() {\r\n            return null;\r\n        }\r\n    \r\n        @Override\r\n        protected Class&lt;?&gt;[] getServletConfigClasses() {\r\n            return new Class[] {SpringConfig.class};\r\n        }\r\n    \r\n        @Override\r\n        protected String[] getServletMappings() {\r\n            return new String[]{&quot;/&quot;};\r\n        }\r\n    }\r\n```\r\n\r\nSpringConfig:\r\n```java\r\n    package edu.vega.spring.config;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.ApplicationContext;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.web.servlet.config.annotation.EnableWebMvc;\r\n    import org.springframework.web.servlet.config.annotation.ViewResolverRegistry;\r\n    import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\n    import org.thymeleaf.spring5.SpringTemplateEngine;\r\n    import org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver;\r\n    import org.thymeleaf.spring5.view.ThymeleafViewResolver;\r\n    \r\n    @Configuration\r\n    @ComponentScan(&quot;edu.vega.spring&quot;)\r\n    @EnableWebMvc\r\n    public class SpringConfig implements WebMvcConfigurer {\r\n        private final ApplicationContext applicationContext;\r\n    \r\n        @Autowired\r\n        public SpringConfig(ApplicationContext applicationContext) {\r\n            this.applicationContext = applicationContext;\r\n        }\r\n    \r\n        @Bean\r\n        public SpringResourceTemplateResolver templateResolver() {\r\n            SpringResourceTemplateResolver templateResolver = new SpringResourceTemplateResolver();\r\n            templateResolver.setApplicationContext(applicationContext);\r\n            templateResolver.setPrefix(&quot;views/&quot;);\r\n            templateResolver.setSuffix(&quot;.html&quot;);\r\n            return templateResolver;\r\n        }\r\n    \r\n        @Bean\r\n        public SpringTemplateEngine templateEngine() {\r\n            SpringTemplateEngine templateEngine = new SpringTemplateEngine();\r\n            templateEngine.setTemplateResolver(templateResolver());\r\n            templateEngine.setEnableSpringELCompiler(true);\r\n            return templateEngine;\r\n        }\r\n    \r\n        @Override\r\n        public void configureViewResolvers(ViewResolverRegistry registry) {\r\n            ThymeleafViewResolver resolver = new ThymeleafViewResolver();\r\n            resolver.setTemplateEngine(templateEngine());\r\n            registry.viewResolver(resolver);\r\n        }\r\n    }\r\n```\r\npom.xml (dependencies):\r\n  \r\n```xml\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;junit&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n          &lt;version&gt;3.8.1&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n          &lt;version&gt;${spring.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n          &lt;version&gt;${spring.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n          &lt;version&gt;${spring.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n          &lt;version&gt;${spring.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\r\n          &lt;artifactId&gt;thymeleaf-spring5&lt;/artifactId&gt;\r\n          &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\r\n          &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\r\n          &lt;version&gt;6.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n      &lt;/dependencies&gt;\r\n      &lt;build&gt;\r\n        &lt;finalName&gt;spring_web_app1&lt;/finalName&gt;\r\n      &lt;/build&gt;\r\n    &lt;/project&gt;\r\n```\r\n\r\nI tried a lot of things, but it doesn’t work, I’m already thinking about completely changing the OS to Ubuntu and maybe then it will help.\r\n\r\nAll logs that i have (now i in Access Log):\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\nOutput:\r\n\r\n        127.0.0.1 - - [07/Jul/2023:11:30:41 +0300] &quot;GET / HTTP/1.1&quot; 200 48\r\n    127.0.0.1 - - [07/Jul/2023:11:30:41 +0300] &quot;GET / HTTP/1.1&quot; 200 48\r\n    0:0:0:0:0:0:0:1 - - [07/Jul/2023:11:30:41 +0300] &quot;GET / HTTP/1.1&quot; 200 48\r\n    0:0:0:0:0:0:0:1 - - [07/Jul/2023:11:30:47 +0300] &quot;GET /helloW HTTP/1.1&quot; 404 682\r\n\r\n\r\nLocalHost log output:\r\n\r\n    07-Jul-2023 11:30:40.491 INFO [RMI TCP Connection(2)-127.0.0.1] org.apache.catalina.core.ApplicationContext.log Marking servlet [dispatcher] as unavailable\r\n    07-Jul-2023 11:30:40.492 SEVERE [RMI TCP Connection(2)-127.0.0.1] org.apache.catalina.core.StandardContext.loadOnStartup Servlet [dispatcher] in web application [] threw load() exception\r\n    \tjava.lang.ClassCastException: class org.springframework.web.servlet.DispatcherServlet cannot be cast to class javax.servlet.Servlet (org.springframework.web.servlet.DispatcherServlet is in unnamed module of loader org.apache.catalina.loader.ParallelWebappClassLoader @168986bb; javax.servlet.Servlet is in unnamed module of loader java.net.URLClassLoader @3aeaafa6)\r\n    \t\tat org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1020)\r\n    \t\tat org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:960)\r\n    \t\tat org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4673)\r\n    \t\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4980)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \t\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:683)\r\n    \t\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:658)\r\n    \t\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:662)\r\n    \t\tat org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1782)\r\n    \t\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n    \t\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n    \t\tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\r\n    \t\tat java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)\r\n    \t\tat java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\r\n    \t\tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:460)\r\n    \t\tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:408)\r\n    \t\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n    \t\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n    \t\tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\r\n    \t\tat java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)\r\n    \t\tat java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\r\n    \t\tat java.management/com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.java:472)\r\n    \t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)\r\n    \t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)\r\n    \t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:714)\r\n    \t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1412)\r\n    \t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\r\n    \t\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n    \t\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n    \t\tat java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)\r\n    \t\tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\r\n    \t\tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\r\n    \t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:714)\r\n    \t\tat java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\r\n    \t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)\r\n    \t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)\r\n    \t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)\r\n    \t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\r\n    \t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)\r\n    \t\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n    \t\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n    \t\tat java.base/java.lang.Thread.run(Thread.java:1623)\r\n\r\nException with Tomcat 10+\r\n\r\n    12-Jul-2023 13:32:02.151 SEVERE [RMI TCP Connection(2)-127.0.0.1] org.apache.catalina.core.ApplicationContext.log Servlet.init() for servlet [dispatcher] threw exception\r\n    \tjava.lang.NoSuchMethodError: &#39;void org.springframework.web.context.support.ServletContextResourceLoader.&lt;init&gt;(jakarta.servlet.ServletContext)&#39;\r\n    \t\tat org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:155)\r\n    \t\tat jakarta.servlet.GenericServlet.init(GenericServlet.java:143)\r\n    \t\tat jakarta.servlet.http.HttpServlet.init(HttpServlet.java:121)\r\n    \t\tat org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:944)\r\n    \t\tat org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:901)\r\n    \t\tat org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:805)\r\n    \t\tat org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4633)\r\n    \t\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4926)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \t\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:683)\r\n    \t\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:658)\r\n    \t\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:713)\r\n    \t\tat org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1821)\r\n    \t\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n    \t\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n    \t\tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\r\n    \t\tat java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)\r\n    \t\tat java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\r\n    \t\tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:428)\r\n    \t\tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:376)\r\n    \t\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n    \t\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n    \t\tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\r\n    \t\tat java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)\r\n    \t\tat java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\r\n    \t\tat java.management/com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.java:472)\r\n    \t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)\r\n    \t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)\r\n    \t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:714)\r\n    \t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1412)\r\n    \t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\r\n    \t\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n    \t\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n    \t\tat java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)\r\n    \t\tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\r\n    \t\tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\r\n    \t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:714)\r\n    \t\tat java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\r\n    \t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)\r\n    \t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)\r\n    \t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)\r\n    \t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\r\n    \t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)\r\n    \t\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n    \t\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n    \t\tat java.base/java.lang.Thread.run(Thread.java:1623)\r\n    12-Jul-2023 13:32:02.151 SEVERE [RMI TCP Connection(2)-127.0.0.1] org.apache.catalina.core.StandardContext.loadOnStartup Servlet [dispatcher] in web application [] threw load() exception\r\n    \tjava.lang.NoSuchMethodError: &#39;void org.springframework.web.context.support.ServletContextResourceLoader.&lt;init&gt;(jakarta.servlet.ServletContext)&#39;\r\n    \t\tat org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:155)\r\n    \t\tat jakarta.servlet.GenericServlet.init(GenericServlet.java:143)\r\n    \t\tat jakarta.servlet.http.HttpServlet.init(HttpServlet.java:121)\r\n    \t\tat org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:944)\r\n    \t\tat org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:901)\r\n    \t\tat org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:805)\r\n    \t\tat org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4633)\r\n    \t\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4926)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \t\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:683)\r\n    \t\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:658)\r\n    \t\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:713)\r\n    \t\tat org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1821)\r\n    \t\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n    \t\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n    \t\tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\r\n    \t\tat java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)\r\n    \t\tat java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\r\n    \t\tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:428)\r\n    \t\tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:376)\r\n    \t\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n    \t\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n    \t\tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\r\n    \t\tat java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)\r\n    \t\tat java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\r\n    \t\tat java.management/com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.java:472)\r\n    \t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)\r\n    \t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)\r\n    \t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:714)\r\n    \t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1412)\r\n    \t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\r\n    \t\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n    \t\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n    \t\tat java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)\r\n    \t\tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\r\n    \t\tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\r\n    \t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:714)\r\n    \t\tat java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\r\n    \t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)\r\n    \t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)\r\n    \t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)\r\n    \t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\r\n    \t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)\r\n    \t\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n    \t\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n    \t\tat java.base/java.lang.Thread.run(Thread.java:1623)\r\n\r\n\r\nException with spring5 and thymeleaf5\r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;org.thymeleaf.spring5.view.ThymeleafViewResolver#0&#39; defined in ServletContext resource [/WEB-INF/applicationContextMVC.xml]: Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property &#39;debug&#39; of bean class [org.thymeleaf.spring5.view.ThymeleafViewResolver]: Bean property &#39;debug&#39; is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter?\r\n\r\nMy pom.xml with openJDK 20:\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;edu.vega.spring&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring_web_app1&lt;/artifactId&gt;\r\n      &lt;packaging&gt;war&lt;/packaging&gt;\r\n      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n      &lt;name&gt;spring_web_app1 Maven Webapp&lt;/name&gt;\r\n      &lt;url&gt;https://maven.apache.org&lt;/url&gt;\r\n      &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;20&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;20&lt;/maven.compiler.target&gt;\r\n      &lt;/properties&gt;\r\n    \r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;junit&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n          &lt;version&gt;4.13.1&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n          &lt;version&gt;6.0.11&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n          &lt;version&gt;6.0.11&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n          &lt;version&gt;6.0.11&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n          &lt;version&gt;6.0.11&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\r\n          &lt;artifactId&gt;thymeleaf-spring6&lt;/artifactId&gt;\r\n          &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\r\n          &lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\r\n          &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\r\n          &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\r\n          &lt;version&gt;6.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n      &lt;/dependencies&gt;\r\n      &lt;build&gt;\r\n        &lt;finalName&gt;spring_web_app1&lt;/finalName&gt;\r\n      &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nError log with pom.xml above (sorry for screenshot but 30k symbols limit in body):\r\n[![enter image description here][5]][5]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/oPh0Z.png\r\n  [2]: https://i.stack.imgur.com/Vhzem.png\r\n  [3]: https://i.stack.imgur.com/Vu7qE.png\r\n  [4]: https://i.stack.imgur.com/WehUB.png\r\n  [5]: https://i.stack.imgur.com/nHP68.png","title":"Spring MVC application doesnt mapping. Apache TomCat 9. IntelliJ IDEA. Linux Mint","body":"<p><strong><strong>I just started learning how to make Spring MVC applications. Installed Tomcat 9. The error is most likely that the mapping does not work. Also i use thymeleaf. The execution of the program basically does not reach my Java code (I set breakpoints and the application did not stop).</strong></strong></p>\n<blockquote>\n<p>I have tried installing different versions of Tomcat</p>\n</blockquote>\n<p>I also checked the port and entered the correct URL. I would also like to note that when entering the full path to the hello.html file (relative to the webapp), in my case <em>http://localhost:8080/views/hello.html</em>, it also gives a 404 error, but everything will work with the jsp file <em>http://localhost:8080/views/hello.jsp</em> (but it's still not the right thing, because the mapping doesn't work).</p>\n<blockquote>\n<p>As planned, hello.html should be displayed in the browser when you\nenter the string <em>http://localhost:8080/helloW</em> in the url.</p>\n</blockquote>\n<p>The problem is that when I type in the URL <em><strong>http://localhost:8080/helloW</strong></em> and see:\n<a href=\"https://i.stack.imgur.com/oPh0Z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oPh0Z.png\" alt=\"enter image description here\" /></a></p>\n<p>I also tried to put different Application Context in the configuration:\n<a href=\"https://i.stack.imgur.com/Vhzem.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Vhzem.png\" alt=\"enter image description here\" /></a></p>\n<p>My project structure:</p>\n<p><a href=\"https://i.stack.imgur.com/Vu7qE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Vu7qE.png\" alt=\"enter image description here\" /></a></p>\n<p>Below i going to show code of my classes:</p>\n<p>HelloController:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    package edu.vega.spring;\n    \n    import org.springframework.stereotype.Controller;\n    import org.springframework.web.bind.annotation.GetMapping;\n    \n    @Controller\n    public class HelloController {\n        @GetMapping(value = {&quot;/helloW&quot;, &quot;/&quot;})\n        public String sayHello(){\n            return &quot;hello&quot;;\n        }\n    }\n</code></pre>\n<p>MySpringMVCDispatcherServletInitializer:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    package edu.vega.spring.config;\n    \n    import org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;\n    \n    public class MySpringMVCDispatcherServletInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {\n    \n        @Override\n        protected Class&lt;?&gt;[] getRootConfigClasses() {\n            return null;\n        }\n    \n        @Override\n        protected Class&lt;?&gt;[] getServletConfigClasses() {\n            return new Class[] {SpringConfig.class};\n        }\n    \n        @Override\n        protected String[] getServletMappings() {\n            return new String[]{&quot;/&quot;};\n        }\n    }\n</code></pre>\n<p>SpringConfig:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    package edu.vega.spring.config;\n    \n    import org.springframework.beans.factory.annotation.Autowired;\n    import org.springframework.context.ApplicationContext;\n    import org.springframework.context.annotation.Bean;\n    import org.springframework.context.annotation.ComponentScan;\n    import org.springframework.context.annotation.Configuration;\n    import org.springframework.web.servlet.config.annotation.EnableWebMvc;\n    import org.springframework.web.servlet.config.annotation.ViewResolverRegistry;\n    import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n    import org.thymeleaf.spring5.SpringTemplateEngine;\n    import org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver;\n    import org.thymeleaf.spring5.view.ThymeleafViewResolver;\n    \n    @Configuration\n    @ComponentScan(&quot;edu.vega.spring&quot;)\n    @EnableWebMvc\n    public class SpringConfig implements WebMvcConfigurer {\n        private final ApplicationContext applicationContext;\n    \n        @Autowired\n        public SpringConfig(ApplicationContext applicationContext) {\n            this.applicationContext = applicationContext;\n        }\n    \n        @Bean\n        public SpringResourceTemplateResolver templateResolver() {\n            SpringResourceTemplateResolver templateResolver = new SpringResourceTemplateResolver();\n            templateResolver.setApplicationContext(applicationContext);\n            templateResolver.setPrefix(&quot;views/&quot;);\n            templateResolver.setSuffix(&quot;.html&quot;);\n            return templateResolver;\n        }\n    \n        @Bean\n        public SpringTemplateEngine templateEngine() {\n            SpringTemplateEngine templateEngine = new SpringTemplateEngine();\n            templateEngine.setTemplateResolver(templateResolver());\n            templateEngine.setEnableSpringELCompiler(true);\n            return templateEngine;\n        }\n    \n        @Override\n        public void configureViewResolvers(ViewResolverRegistry registry) {\n            ThymeleafViewResolver resolver = new ThymeleafViewResolver();\n            resolver.setTemplateEngine(templateEngine());\n            registry.viewResolver(resolver);\n        }\n    }\n</code></pre>\n<p>pom.xml (dependencies):</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;dependencies&gt;\n        &lt;dependency&gt;\n          &lt;groupId&gt;junit&lt;/groupId&gt;\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\n          &lt;version&gt;3.8.1&lt;/version&gt;\n          &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    \n        &lt;dependency&gt;\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n          &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n          &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    \n        &lt;dependency&gt;\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n          &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n          &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    \n        &lt;dependency&gt;\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n          &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n          &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    \n        &lt;dependency&gt;\n          &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n          &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n          &lt;version&gt;${spring.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    \n        &lt;dependency&gt;\n          &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n          &lt;artifactId&gt;thymeleaf-spring5&lt;/artifactId&gt;\n          &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n    \n        &lt;dependency&gt;\n          &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\n          &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\n          &lt;version&gt;6.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    \n      &lt;/dependencies&gt;\n      &lt;build&gt;\n        &lt;finalName&gt;spring_web_app1&lt;/finalName&gt;\n      &lt;/build&gt;\n    &lt;/project&gt;\n</code></pre>\n<p>I tried a lot of things, but it doesn’t work, I’m already thinking about completely changing the OS to Ubuntu and maybe then it will help.</p>\n<p>All logs that i have (now i in Access Log):</p>\n<p><a href=\"https://i.stack.imgur.com/WehUB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WehUB.png\" alt=\"enter image description here\" /></a></p>\n<p>Output:</p>\n<pre><code>    127.0.0.1 - - [07/Jul/2023:11:30:41 +0300] &quot;GET / HTTP/1.1&quot; 200 48\n127.0.0.1 - - [07/Jul/2023:11:30:41 +0300] &quot;GET / HTTP/1.1&quot; 200 48\n0:0:0:0:0:0:0:1 - - [07/Jul/2023:11:30:41 +0300] &quot;GET / HTTP/1.1&quot; 200 48\n0:0:0:0:0:0:0:1 - - [07/Jul/2023:11:30:47 +0300] &quot;GET /helloW HTTP/1.1&quot; 404 682\n</code></pre>\n<p>LocalHost log output:</p>\n<pre><code>07-Jul-2023 11:30:40.491 INFO [RMI TCP Connection(2)-127.0.0.1] org.apache.catalina.core.ApplicationContext.log Marking servlet [dispatcher] as unavailable\n07-Jul-2023 11:30:40.492 SEVERE [RMI TCP Connection(2)-127.0.0.1] org.apache.catalina.core.StandardContext.loadOnStartup Servlet [dispatcher] in web application [] threw load() exception\n    java.lang.ClassCastException: class org.springframework.web.servlet.DispatcherServlet cannot be cast to class javax.servlet.Servlet (org.springframework.web.servlet.DispatcherServlet is in unnamed module of loader org.apache.catalina.loader.ParallelWebappClassLoader @168986bb; javax.servlet.Servlet is in unnamed module of loader java.net.URLClassLoader @3aeaafa6)\n        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1020)\n        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:960)\n        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4673)\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4980)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:683)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:658)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:662)\n        at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1782)\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n        at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\n        at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)\n        at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\n        at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:460)\n        at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:408)\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n        at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\n        at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)\n        at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\n        at java.management/com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.java:472)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1412)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n        at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)\n        at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\n        at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)\n        at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n        at java.base/java.lang.Thread.run(Thread.java:1623)\n</code></pre>\n<p>Exception with Tomcat 10+</p>\n<pre><code>12-Jul-2023 13:32:02.151 SEVERE [RMI TCP Connection(2)-127.0.0.1] org.apache.catalina.core.ApplicationContext.log Servlet.init() for servlet [dispatcher] threw exception\n    java.lang.NoSuchMethodError: 'void org.springframework.web.context.support.ServletContextResourceLoader.&lt;init&gt;(jakarta.servlet.ServletContext)'\n        at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:155)\n        at jakarta.servlet.GenericServlet.init(GenericServlet.java:143)\n        at jakarta.servlet.http.HttpServlet.init(HttpServlet.java:121)\n        at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:944)\n        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:901)\n        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:805)\n        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4633)\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4926)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:683)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:658)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:713)\n        at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1821)\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n        at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\n        at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)\n        at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\n        at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:428)\n        at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:376)\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n        at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\n        at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)\n        at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\n        at java.management/com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.java:472)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1412)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n        at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)\n        at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\n        at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)\n        at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n        at java.base/java.lang.Thread.run(Thread.java:1623)\n12-Jul-2023 13:32:02.151 SEVERE [RMI TCP Connection(2)-127.0.0.1] org.apache.catalina.core.StandardContext.loadOnStartup Servlet [dispatcher] in web application [] threw load() exception\n    java.lang.NoSuchMethodError: 'void org.springframework.web.context.support.ServletContextResourceLoader.&lt;init&gt;(jakarta.servlet.ServletContext)'\n        at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:155)\n        at jakarta.servlet.GenericServlet.init(GenericServlet.java:143)\n        at jakarta.servlet.http.HttpServlet.init(HttpServlet.java:121)\n        at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:944)\n        at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:901)\n        at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:805)\n        at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4633)\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4926)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:683)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:658)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:713)\n        at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1821)\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n        at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\n        at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)\n        at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\n        at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:428)\n        at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:376)\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n        at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\n        at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:803)\n        at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\n        at java.management/com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.java:472)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1412)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n        at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)\n        at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\n        at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:714)\n        at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:598)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:844)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:721)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:720)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n        at java.base/java.lang.Thread.run(Thread.java:1623)\n</code></pre>\n<p>Exception with spring5 and thymeleaf5</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.thymeleaf.spring5.view.ThymeleafViewResolver#0' defined in ServletContext resource [/WEB-INF/applicationContextMVC.xml]: Error setting property values; nested exception is org.springframework.beans.NotWritablePropertyException: Invalid property 'debug' of bean class [org.thymeleaf.spring5.view.ThymeleafViewResolver]: Bean property 'debug' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter?\n</code></pre>\n<p>My pom.xml with openJDK 20:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;edu.vega.spring&lt;/groupId&gt;\n  &lt;artifactId&gt;spring_web_app1&lt;/artifactId&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n  &lt;name&gt;spring_web_app1 Maven Webapp&lt;/name&gt;\n  &lt;url&gt;https://maven.apache.org&lt;/url&gt;\n  &lt;properties&gt;\n    &lt;maven.compiler.source&gt;20&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;20&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;4.13.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n      &lt;version&gt;6.0.11&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n      &lt;version&gt;6.0.11&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n      &lt;version&gt;6.0.11&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n      &lt;version&gt;6.0.11&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n      &lt;artifactId&gt;thymeleaf-spring6&lt;/artifactId&gt;\n      &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n      &lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\n      &lt;version&gt;3.1.1.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\n      &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\n      &lt;version&gt;6.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n  &lt;/dependencies&gt;\n  &lt;build&gt;\n    &lt;finalName&gt;spring_web_app1&lt;/finalName&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Error log with pom.xml above (sorry for screenshot but 30k symbols limit in body):\n<a href=\"https://i.stack.imgur.com/nHP68.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nHP68.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","pdfbox","digital-signature","trusted-timestamp"],"comments":[{"owner":{"account_id":28668458,"reputation":15,"user_id":21951977,"display_name":"Qazazazaz"},"score":0,"creation_date":1689587633,"post_id":76688070,"comment_id":135229457,"body_markdown":"@mkl any suggestions on this?","body":"@mkl any suggestions on this?"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1689596702,"post_id":76688070,"comment_id":135231366,"body_markdown":"Strictly speaking, *&quot;DocMDP permission as 1&quot;* by itself is not a problem because even in that case an incremental update containing only DSS additions is allowed by the specs (both ETSI EN 319 142-1 and ISO 32000-2). Unfortunately, Adobe Acrobat has a bug in this regard and erroneously reports DSS updates as disallowed. Apparently you want to make Adobe Acrobat happy in spite of its bug. This means that you cannot have incremental updates after the revision with the signature. This in turn means that you need to have all validation related information (also for the time stamp!) before signing.","body":"Strictly speaking, <i>&quot;DocMDP permission as 1&quot;</i> by itself is not a problem because even in that case an incremental update containing only DSS additions is allowed by the specs (both ETSI EN 319 142-1 and ISO 32000-2). Unfortunately, Adobe Acrobat has a bug in this regard and erroneously reports DSS updates as disallowed. Apparently you want to make Adobe Acrobat happy in spite of its bug. This means that you cannot have incremental updates after the revision with the signature. This in turn means that you need to have all validation related information (also for the time stamp!) before signing."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1689602384,"post_id":76688070,"comment_id":135232749,"body_markdown":"Essentially, therefore, you have to know the time stamp certificate in advance (or a small set of candidate certificates) and add its (their) validation related information together with the information for the signer certificate. If that&#39;s no option, you&#39;ll have to use incremental updates, probably with a higher MDP level value.","body":"Essentially, therefore, you have to know the time stamp certificate in advance (or a small set of candidate certificates) and add its (their) validation related information together with the information for the signer certificate. If that&#39;s no option, you&#39;ll have to use incremental updates, probably with a higher MDP level value."},{"owner":{"account_id":28668458,"reputation":15,"user_id":21951977,"display_name":"Qazazazaz"},"score":0,"creation_date":1689624323,"post_id":76688070,"comment_id":135237324,"body_markdown":"Thanks @mkl for the suggestions in this matter. I was not aware that it&#39;s Acrobat&#39;s bug. I decided to not to add timestamp validation information in case of DocMDP permission as 1, since it is not mandatory as per PDF Specs. Also, for getting timestamp certs and validation information before the getting the actual timestamp, I will need an additional call to generate dummy timestamp token, which will give me the required validation info. This extra call seems like a hack and not the actual solution. I will add the timestamp validation information for DocMDP permission 2 and 3.","body":"Thanks @mkl for the suggestions in this matter. I was not aware that it&#39;s Acrobat&#39;s bug. I decided to not to add timestamp validation information in case of DocMDP permission as 1, since it is not mandatory as per PDF Specs. Also, for getting timestamp certs and validation information before the getting the actual timestamp, I will need an additional call to generate dummy timestamp token, which will give me the required validation info. This extra call seems like a hack and not the actual solution. I will add the timestamp validation information for DocMDP permission 2 and 3."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1689689425,"post_id":76688070,"comment_id":135247266,"body_markdown":"*&quot;I was not aware that it&#39;s Acrobat&#39;s bug.&quot;* - The PAdES basics are introduced in ETSI EN 319 142-1 and ISO 32000-2, and both indicate that even with MDP level 1 adding incremental updates updating DSS are allowed. Thus, a software that understands and supports the PAdES basics consequentially must allow such updates. - *&quot; I will add the timestamp validation information for DocMDP permission 2 and 3.&quot;* - that&#39;s the safest way","body":"<i>&quot;I was not aware that it&#39;s Acrobat&#39;s bug.&quot;</i> - The PAdES basics are introduced in ETSI EN 319 142-1 and ISO 32000-2, and both indicate that even with MDP level 1 adding incremental updates updating DSS are allowed. Thus, a software that understands and supports the PAdES basics consequentially must allow such updates. - <i>&quot; I will add the timestamp validation information for DocMDP permission 2 and 3.&quot;</i> - that&#39;s the safest way"},{"owner":{"account_id":28668458,"reputation":15,"user_id":21951977,"display_name":"Qazazazaz"},"score":0,"creation_date":1689749218,"post_id":76688070,"comment_id":135255436,"body_markdown":"Just to add, even PDFBox sample for Document Timestamp is generating error : &quot;No changes to the document are permitted due to DocMDP transform parameters dictionary&quot; when I try to use input PDF with DocMDP Permission as 1.","body":"Just to add, even PDFBox sample for Document Timestamp is generating error : &quot;No changes to the document are permitted due to DocMDP transform parameters dictionary&quot; when I try to use input PDF with DocMDP Permission as 1."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1689750789,"post_id":76688070,"comment_id":135255705,"body_markdown":"Well, pdfbox tries to behave very much like Acrobat, both in good and in bad ways...","body":"Well, pdfbox tries to behave very much like Acrobat, both in good and in bad ways..."}],"owner":{"account_id":28668458,"reputation":15,"user_id":21951977,"display_name":"Qazazazaz"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689358086,"creation_date":1689340703,"question_id":76688070,"body_markdown":"I am using [this](https://github.com/mkl-public/testarea-pdfbox2/blob/ff28bf955f2d7d371bec176989f7c491485a3790/src/test/java/mkl/testarea/pdfbox2/sign/RemoteSigning.java#L218) flow for performing digital signatures using external trust service provider.\r\n\r\nI have integrated [this](https://stackoverflow.com/questions/27441042/pdfbox-1-8-signing-pdf-document-using-tsa-time-stamp-autority) approach to add timestamp to my current certifying signature.\r\n\r\nUsing these, I am able to perform signature timestamp with embedded trusted timestamp.\r\n\r\nIn my DSS dictionary of PDF, I have added revocation information before calling `saveIncrementalForExternalSigning`. But I am unable to add revocation information and certificates for timestamp since timestamp token is not available before `saveIncrementalForExternalSigning`. Later on, when I get the timestamp token, I am making changes to DSS dictionary but they are not being reflected in output PDF. Below is my source code flow:\r\n\r\n    public ByteArrayOutputStream getSignedStream(PDDocument document, SignRequest request, Certificate[] certificateChain) throws Exception {\r\n\r\n    // adding revocation info for signature\r\n    validationService.addValidationInformation(document, certificateChain);\r\n\r\n    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n    ExternalSigningSupport externalSigningSupport = document.saveIncrementalForExternalSigning(outputStream);\r\n\r\n    InputStream inputStream = request.getDocument();\r\n    CMSSignedData signedData = generateCMSSignedData(certificateChain, externalSigningSupport, inputStream, signParams...);\r\n\r\n    MessageDigest digest = MessageDigest.getInstance(&quot;SHA-256&quot;);\r\n    //Initialized TSAClient\r\n    tsaClient = new TimestampClient(new URL(options.getUrl()),\r\n        options.getUsername(), options.getPassword(), digest);\r\n\r\n    //Here, timestampToken is generated using the signedData Inputstream\r\n    signedData = TimestampUtil.addSignedTimeStamp(signedData, tsaClient, document);\r\n\r\n    //Using above timestamp token, certificates and revocation information is available now.\r\n    CMSSignedData data = new CMSSignedData(TSAUtil.token);\r\n    TimeStampToken timeStampToken = new TimeStampToken(data);\r\n    Store certificatesStore = timeStampToken.getCertificates();\r\n    TSAUtil.certificates = TSARevocationInfoUtil.convertCertificates(certificatesStore);\r\n\r\n    /*trying to add revocation info for timestamp to DSS dictionary, which is not being reflected in output document */\r\n    validationService.addValidationInformation(document, certificateChain);\r\n\r\n    byte[] cmsSignature = signedData.getEncoded();\r\n    externalSigningSupport.setSignature(cmsSignature);\r\n\r\n    return outputStream; }\r\n\r\nAlso, with certifying signatures, I want to use DocMDP permission as 1 (No changes allowed). So, I cannot save the document multiple times.\r\n\r\n\r\n\r\nPlease suggest, how can I update DSS dictionary for certificates of embedded signature timestamp without corrupting the document and in compliance with docMDP permission as 1.","title":"How to update DSS dictionary for revocation information and certificates of embedded signature timestamp?","body":"<p>I am using <a href=\"https://github.com/mkl-public/testarea-pdfbox2/blob/ff28bf955f2d7d371bec176989f7c491485a3790/src/test/java/mkl/testarea/pdfbox2/sign/RemoteSigning.java#L218\" rel=\"nofollow noreferrer\">this</a> flow for performing digital signatures using external trust service provider.</p>\n<p>I have integrated <a href=\"https://stackoverflow.com/questions/27441042/pdfbox-1-8-signing-pdf-document-using-tsa-time-stamp-autority\">this</a> approach to add timestamp to my current certifying signature.</p>\n<p>Using these, I am able to perform signature timestamp with embedded trusted timestamp.</p>\n<p>In my DSS dictionary of PDF, I have added revocation information before calling <code>saveIncrementalForExternalSigning</code>. But I am unable to add revocation information and certificates for timestamp since timestamp token is not available before <code>saveIncrementalForExternalSigning</code>. Later on, when I get the timestamp token, I am making changes to DSS dictionary but they are not being reflected in output PDF. Below is my source code flow:</p>\n<pre><code>public ByteArrayOutputStream getSignedStream(PDDocument document, SignRequest request, Certificate[] certificateChain) throws Exception {\n\n// adding revocation info for signature\nvalidationService.addValidationInformation(document, certificateChain);\n\nByteArrayOutputStream outputStream = new ByteArrayOutputStream();\nExternalSigningSupport externalSigningSupport = document.saveIncrementalForExternalSigning(outputStream);\n\nInputStream inputStream = request.getDocument();\nCMSSignedData signedData = generateCMSSignedData(certificateChain, externalSigningSupport, inputStream, signParams...);\n\nMessageDigest digest = MessageDigest.getInstance(&quot;SHA-256&quot;);\n//Initialized TSAClient\ntsaClient = new TimestampClient(new URL(options.getUrl()),\n    options.getUsername(), options.getPassword(), digest);\n\n//Here, timestampToken is generated using the signedData Inputstream\nsignedData = TimestampUtil.addSignedTimeStamp(signedData, tsaClient, document);\n\n//Using above timestamp token, certificates and revocation information is available now.\nCMSSignedData data = new CMSSignedData(TSAUtil.token);\nTimeStampToken timeStampToken = new TimeStampToken(data);\nStore certificatesStore = timeStampToken.getCertificates();\nTSAUtil.certificates = TSARevocationInfoUtil.convertCertificates(certificatesStore);\n\n/*trying to add revocation info for timestamp to DSS dictionary, which is not being reflected in output document */\nvalidationService.addValidationInformation(document, certificateChain);\n\nbyte[] cmsSignature = signedData.getEncoded();\nexternalSigningSupport.setSignature(cmsSignature);\n\nreturn outputStream; }\n</code></pre>\n<p>Also, with certifying signatures, I want to use DocMDP permission as 1 (No changes allowed). So, I cannot save the document multiple times.</p>\n<p>Please suggest, how can I update DSS dictionary for certificates of embedded signature timestamp without corrupting the document and in compliance with docMDP permission as 1.</p>\n"},{"tags":["java","android","animation","textview","marquee"],"comments":[{"owner":{"account_id":8373673,"reputation":61868,"user_id":6287910,"display_name":"Cheticamp"},"score":0,"creation_date":1689365516,"post_id":76690182,"comment_id":135208703,"body_markdown":"Take a look at a custom view [here](https://stackoverflow.com/a/8971920/6287910).","body":"Take a look at a custom view <a href=\"https://stackoverflow.com/a/8971920/6287910\">here</a>."}],"owner":{"account_id":16990065,"reputation":31,"user_id":12289859,"display_name":"bilykralik16"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689357962,"creation_date":1689357962,"question_id":76690182,"body_markdown":"I would like to ask how to make a marquee text without stopping when reaching the beginning programmaticaly. Currently I have the plain TextView made programmatically as marquee:\r\n\r\n    textview47.setEllipsize(TextUtils.TruncateAt.MARQUEE);\r\n    textview47.setMarqueeRepeatLimit(-1);\r\n    textview47.setSelected(true);\r\n\r\nHowever when the text reaches its beginning, it stops moving for one or two seconds. How do I disable this &quot;stopping feature&quot; programmatically (not by XML)? Thank you.","title":"How to make marquee text without stopping programmatically- Android Java","body":"<p>I would like to ask how to make a marquee text without stopping when reaching the beginning programmaticaly. Currently I have the plain TextView made programmatically as marquee:</p>\n<pre><code>textview47.setEllipsize(TextUtils.TruncateAt.MARQUEE);\ntextview47.setMarqueeRepeatLimit(-1);\ntextview47.setSelected(true);\n</code></pre>\n<p>However when the text reaches its beginning, it stops moving for one or two seconds. How do I disable this &quot;stopping feature&quot; programmatically (not by XML)? Thank you.</p>\n"},{"tags":["java","code-generation","json-deserialization","mixins","objectmapper"],"owner":{"account_id":10595855,"reputation":2708,"user_id":7804595,"display_name":"Valeriy K."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689357314,"creation_date":1689355757,"question_id":76689999,"body_markdown":"I have some json and need to map it to other third party objects. JSON: \r\n\r\n    {\r\n    &quot;date&quot;: &quot;2023-01-01&quot;,\r\n    &quot;employee&quot;: {\r\n      &quot;idNumber&quot;: &quot;29255&quot;,\r\n      &quot;gender&quot;: &quot;M&quot;,\r\n      &quot;age&quot;: 32\r\n    },\r\n    &quot;product&quot;: {\r\n      &quot;productNo&quot;: 11,\r\n      &quot;productName&quot;: &quot;someProduct&quot;\r\n    },\r\n      &quot;building&quot;: {\r\n        &quot;buildingNo&quot;: 11,\r\n        &quot;buildingName&quot;: &quot;someBuilding&quot;\r\n      }\r\n    }\r\n\r\nThe result object is like:\r\n\r\n    class Employee {\r\n            String id;\r\n            String gender;\r\n            Integer age;\r\n            Product[] products;\r\n        }\r\n        \r\n        class Product {\r\n            Integer id;\r\n            String name;\r\n        }\r\n\r\nSo I need to put product object in the Json to array of products. And as seen from Json it will always be a single product for such a structure. But maybe I&#39;ll want to add some other objects like building to the products. I wrote some mixin for this:\r\n\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public class EmployeeMixin {\r\n        @JsonProperty(&quot;idNumber&quot;)\r\n        Integer id;\r\n        String gender;\r\n        Integer age;\r\n        @JsonProperty(&quot;product&quot;)\r\n        @JsonDeserialize(using = ProductArrayDeserializer.class)\r\n        Product[] products;\r\n    }\r\n    \r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public class ProductMixin {\r\n        @JsonProperty(&quot;productNo&quot;)\r\n        Integer id;\r\n        @JsonProperty(&quot;productName&quot;)\r\n        String name;\r\n    }\r\n    \r\n    public class ProductArrayDeserializer extends JsonDeserializer&lt;Product[]&gt; {\r\n        @Override\r\n        public Product[] deserialize(JsonParser p, DeserializationContext ctxt) throws IOException, JacksonException {\r\n            var jsonNode = p.readValueAsTree();\r\n            Product product = ctxt.readValue(jsonNode.traverse(), Product.class);\r\n            return new Product[]{product};\r\n        }\r\n    }\r\n\r\n\r\nBut when I tying to parse it with object mapper I get error:\r\n\r\n    Exception in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.MismatchedInputException: Unexpected end-of-input when trying read value of type `com.my.users.examples.mixin.Product`\r\n     at [Source: (String)&quot;{\r\n        &quot;date&quot;: &quot;2023-01-01&quot;,\r\n    .....\r\n    }&quot;; line: 11, column: 5] (through reference chain: com.my.users.examples.mixin.Employee[&quot;product&quot;])\r\n\tat com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:59)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.reportInputMismatch(DeserializationContext.java:1741)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1515)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1462)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeOther(BeanDeserializer.java:223)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:186)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.readValue(DeserializationContext.java:966)\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.readValue(DeserializationContext.java:953)\r\n\tat com.my.users.examples.mixin.ProductArrayDeserializer.deserialize(ProductArrayDeserializer.java:14)\r\n\tat com.my.users.examples.mixin.ProductArrayDeserializer.deserialize(ProductArrayDeserializer.java:10)\r\n\tat com.fasterxml.jackson.databind.deser.impl.FieldProperty.deserializeAndSet(FieldProperty.java:138)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:313)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:176)\r\n\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:322)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4675)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3630)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3598)\r\n\tat com.my.users.examples.mixin.MixinTest.main(MixinTest.java:12)\r\n\r\nin line `Product product = ctxt.readValue(jsonNode.traverse(), Product.class);` of `ProductArrayDeserializer` class. Code for testing is next:\r\n\r\n    var mapper = new ObjectMapper();\r\n            mapper.addMixIn(Employee.class, EmployeeMixin.class)\r\n                    .addMixIn(Product.class, ProductMixin.class);\r\n    \r\n            Employee employee = mapper.readValue(employeeJson);\r\n\r\nWhat is wrong with my code? Thanks in advance.","title":"Put object in array with Jackson mixin","body":"<p>I have some json and need to map it to other third party objects. JSON:</p>\n<pre><code>{\n&quot;date&quot;: &quot;2023-01-01&quot;,\n&quot;employee&quot;: {\n  &quot;idNumber&quot;: &quot;29255&quot;,\n  &quot;gender&quot;: &quot;M&quot;,\n  &quot;age&quot;: 32\n},\n&quot;product&quot;: {\n  &quot;productNo&quot;: 11,\n  &quot;productName&quot;: &quot;someProduct&quot;\n},\n  &quot;building&quot;: {\n    &quot;buildingNo&quot;: 11,\n    &quot;buildingName&quot;: &quot;someBuilding&quot;\n  }\n}\n</code></pre>\n<p>The result object is like:</p>\n<pre><code>class Employee {\n        String id;\n        String gender;\n        Integer age;\n        Product[] products;\n    }\n    \n    class Product {\n        Integer id;\n        String name;\n    }\n</code></pre>\n<p>So I need to put product object in the Json to array of products. And as seen from Json it will always be a single product for such a structure. But maybe I'll want to add some other objects like building to the products. I wrote some mixin for this:</p>\n<pre><code>@JsonIgnoreProperties(ignoreUnknown = true)\npublic class EmployeeMixin {\n    @JsonProperty(&quot;idNumber&quot;)\n    Integer id;\n    String gender;\n    Integer age;\n    @JsonProperty(&quot;product&quot;)\n    @JsonDeserialize(using = ProductArrayDeserializer.class)\n    Product[] products;\n}\n\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class ProductMixin {\n    @JsonProperty(&quot;productNo&quot;)\n    Integer id;\n    @JsonProperty(&quot;productName&quot;)\n    String name;\n}\n\npublic class ProductArrayDeserializer extends JsonDeserializer&lt;Product[]&gt; {\n    @Override\n    public Product[] deserialize(JsonParser p, DeserializationContext ctxt) throws IOException, JacksonException {\n        var jsonNode = p.readValueAsTree();\n        Product product = ctxt.readValue(jsonNode.traverse(), Product.class);\n        return new Product[]{product};\n    }\n}\n</code></pre>\n<p>But when I tying to parse it with object mapper I get error:</p>\n<pre><code>Exception in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.MismatchedInputException: Unexpected end-of-input when trying read value of type `com.my.users.examples.mixin.Product`\n at [Source: (String)&quot;{\n    &quot;date&quot;: &quot;2023-01-01&quot;,\n.....\n}&quot;; line: 11, column: 5] (through reference chain: com.my.users.examples.mixin.Employee[&quot;product&quot;])\nat com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:59)\nat com.fasterxml.jackson.databind.DeserializationContext.reportInputMismatch(DeserializationContext.java:1741)\nat com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1515)\nat com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1462)\nat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeOther(BeanDeserializer.java:223)\nat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:186)\nat com.fasterxml.jackson.databind.DeserializationContext.readValue(DeserializationContext.java:966)\nat com.fasterxml.jackson.databind.DeserializationContext.readValue(DeserializationContext.java:953)\nat com.my.users.examples.mixin.ProductArrayDeserializer.deserialize(ProductArrayDeserializer.java:14)\nat com.my.users.examples.mixin.ProductArrayDeserializer.deserialize(ProductArrayDeserializer.java:10)\nat com.fasterxml.jackson.databind.deser.impl.FieldProperty.deserializeAndSet(FieldProperty.java:138)\nat com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:313)\nat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:176)\nat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:322)\nat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4675)\nat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3630)\nat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3598)\nat com.my.users.examples.mixin.MixinTest.main(MixinTest.java:12)\n</code></pre>\n<p>in line <code>Product product = ctxt.readValue(jsonNode.traverse(), Product.class);</code> of <code>ProductArrayDeserializer</code> class. Code for testing is next:</p>\n<pre><code>var mapper = new ObjectMapper();\n        mapper.addMixIn(Employee.class, EmployeeMixin.class)\n                .addMixIn(Product.class, ProductMixin.class);\n\n        Employee employee = mapper.readValue(employeeJson);\n</code></pre>\n<p>What is wrong with my code? Thanks in advance.</p>\n"},{"tags":["java","spring-boot","get","spring-webclient"],"comments":[{"owner":{"account_id":25926563,"reputation":119,"user_id":19648355,"display_name":"Irremediable"},"score":0,"creation_date":1689355195,"post_id":76689598,"comment_id":135206920,"body_markdown":"You can replace bodyToMono with bodyToFlux method , which itself represent the unbound stream of elements and easily converts from Json array response","body":"You can replace bodyToMono with bodyToFlux method , which itself represent the unbound stream of elements and easily converts from Json array response"},{"owner":{"account_id":20919730,"reputation":207,"user_id":15368642,"display_name":"ilie alexandru"},"score":0,"creation_date":1689355456,"post_id":76689598,"comment_id":135206975,"body_markdown":"@Irremediable hello! I already tried and it did not work, if you can provide an example I would much appreciate it.","body":"@Irremediable hello! I already tried and it did not work, if you can provide an example I would much appreciate it."},{"owner":{"account_id":3593904,"reputation":129,"user_id":2999226,"display_name":"user2999226"},"score":0,"creation_date":1689355915,"post_id":76689598,"comment_id":135207080,"body_markdown":"Try bodyToFlux(..).collectList().block()","body":"Try bodyToFlux(..).collectList().block()"}],"answers":[{"tags":[],"owner":{"account_id":3593904,"reputation":129,"user_id":2999226,"display_name":"user2999226"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689357090,"creation_date":1689357090,"answer_id":76690118,"question_id":76689598,"body_markdown":"The following code will return a `List` of `Interface` objects.\r\n```java\r\nreturn this.webClient\r\n    .get()\r\n    .uri(uri)\r\n    .retrieve()\r\n    .bodyToFlux(Interface.class)\r\n    .collectList()\r\n    .block();\r\n```\r\n`bodyToFlux` will create a `Flux` to handle the `Interface` objects in the response. Since you don&#39;t want to process them once at a time, but want a `List` containing all of them you need to call `collectList()` on the `Flux`. The result of that call is a `Mono&lt;List&lt;Interface&gt;&gt;`. That `Mono` can be handled the way you did in your code using the `block` method.","title":"Get list of objects as response Web client Java","body":"<p>The following code will return a <code>List</code> of <code>Interface</code> objects.</p>\n<pre class=\"lang-java prettyprint-override\"><code>return this.webClient\n    .get()\n    .uri(uri)\n    .retrieve()\n    .bodyToFlux(Interface.class)\n    .collectList()\n    .block();\n</code></pre>\n<p><code>bodyToFlux</code> will create a <code>Flux</code> to handle the <code>Interface</code> objects in the response. Since you don't want to process them once at a time, but want a <code>List</code> containing all of them you need to call <code>collectList()</code> on the <code>Flux</code>. The result of that call is a <code>Mono&lt;List&lt;Interface&gt;&gt;</code>. That <code>Mono</code> can be handled the way you did in your code using the <code>block</code> method.</p>\n"}],"owner":{"account_id":20919730,"reputation":207,"user_id":15368642,"display_name":"ilie alexandru"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":500,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689357090,"creation_date":1689352293,"question_id":76689598,"body_markdown":"I have a spring boot application that will send requests to another using &quot;WebClient&quot;. I am using java 20 and spring boot 3.0. I am a noob in spring boot, I am trying my best.\r\n\r\nThis is the model class:\r\n\r\n        @Data\r\n        @AllArgsConstructor\r\n        public class Interface {\r\n            public String interface_name;\r\n            public String network;\r\n        }\r\n    \r\nThis is the class that will make the request:\r\n\r\n       @Service\r\n    public class Get_Interfaces_Service {\r\n    \r\n        private final WebClient webClient;\r\n    \r\n        private String url=&quot;http://&quot;;\r\n    \r\n        public Get_Interfaces_Service(WebClient webClient) {\r\n            this.webClient = webClient;\r\n        }\r\n     public List&lt;Interface&gt; get_Interfaces_Service_Method(String minion_name){\r\n    \r\n            Minion minion = Syncronized_Mininos.getMinion(minion_name);\r\n    \r\n    \r\n            if(minion == null){\r\n                return null;\r\n            }\r\n    \r\n    \r\n            String url_for_interfaces = this.url +\r\n                    minion.ip_address +\r\n                    &quot;:&quot; +\r\n                    minion.port\r\n                    +&quot;/minion/getInterfaces&quot;;\r\n    \r\n            URI uri = UriComponentsBuilder\r\n                    .fromHttpUrl(url_for_interfaces)\r\n                    .build(Collections\r\n                            .emptyMap());\r\n    \r\n    \r\n            return this.webClient\r\n                    .get()\r\n                    .uri(uri)\r\n                    .retrieve()\r\n                    .bodyToMono(Interface.class)\r\n                    .block();\r\n        }\r\n\r\nThe other application is working perfectly:\r\n\r\nThis is the second model:\r\n\r\n    @Data\r\n    public class Interface {\r\n    \r\n        public String interface_name;\r\n        public String network;\r\n    \r\n        public Interface(String interface_name,\r\n                         String network){\r\n            this.interface_name = interface_name;\r\n            this.network = network;\r\n        }\r\n    }\r\n\r\n This is the class that returns the list:\r\n\r\n    static List&lt;Interface&gt; interfaces;\r\n    .....\r\n    public static synchronized List&lt;Interface&gt; get_synchronized_interfaces_method() {\r\n        return interfaces;\r\n    }\r\n\r\nThe output using postman of the second application is:\r\n\r\n\r\n    [\r\n        {\r\n            &quot;interface_name&quot;: &quot;default&quot;,\r\n            &quot;network&quot;: &quot;10.33.16.1&quot;\r\n        },\r\n        {\r\n            &quot;interface_name&quot;: &quot;10.33.16.0/24&quot;,\r\n            &quot;network&quot;: &quot;wlp3s0&quot;\r\n        },\r\n        {\r\n            &quot;interface_name&quot;: &quot;169.254.0.0/16&quot;,\r\n            &quot;network&quot;: &quot;virbr0&quot;\r\n        },....\r\n\r\n\r\nAnd this is the output of the first application when is requesting the list:\r\n\r\n\r\n    org.springframework.core.codec.CodecException: Type definition error: [collection type; class com.Master_Hacking_Node.Master_Node.indexes.model.Interface, contains [recursive type; com.Master_Hacking_Node.Master_Node.indexes.model.Interface]\\n\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.processException(AbstractJackson2Decoder.java:271)\\n\\tSuppressed: The stacktrace has been enhanced by Reactor, refer to additional information below: \\nError has been observed at the following site(s):\\n\\t*__checkpoint ⇢ Body from GET http://127.0.0.1:8080/minion/getInterfaces [DefaultClientResponse]\\nOriginal Stack Trace:\\n\\t\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.processException(AbstractJackson2Decoder.java:271)\\n\\t\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.decode(AbstractJackson2Decoder.java:211)\\n\\t\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.lambda$decodeToMono$2(AbstractJackson2Decoder.java:191)\\n\\t\\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:132)\\n\\t\\tat reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107)\\n\\t\\tat reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:299)\\n\\t\\tat reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.onNext(FluxFilterFuseable.java:337)\\n\\t\\tat reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2071)\\n\\t\\tat reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:145)\\n\\t\\tat reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onComplete(FluxContextWrite.java:126)\\n\\t\\tat reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onComplete(FluxMapFuseable.java:350)\\n\\t\\tat reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.drainAsync(FluxFlattenIterable.java:371)\\n\\t\\tat reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.drain(FluxFlattenIterable.java:724)\\n\\t\\tat reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.onComplete(FluxFlattenIterable.java:273)\\n\\t\\tat reactor.adapter.JdkFlowAdapter$SubscriberToRS.onComplete(JdkFlowAdapter.java:160)\\n\\t\\tat java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.complete(ResponseSubscribers.java:939)\\n\\t\\tat java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.lambda$new$1(ResponseSubscribers.java:870)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture.uniAcceptNow(CompletableFuture.java:757)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture.uniAcceptStage(CompletableFuture.java:735)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture.thenAccept(CompletableFuture.java:2214)\\n\\t\\tat java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.lambda$new$2(ResponseSubscribers.java:870)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:841)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:2179)\\n\\t\\tat java.net.http/jdk.internal.net.http.\r\n\r\nDo you have any idea what should I do in this situation?","title":"Get list of objects as response Web client Java","body":"<p>I have a spring boot application that will send requests to another using &quot;WebClient&quot;. I am using java 20 and spring boot 3.0. I am a noob in spring boot, I am trying my best.</p>\n<p>This is the model class:</p>\n<pre><code>    @Data\n    @AllArgsConstructor\n    public class Interface {\n        public String interface_name;\n        public String network;\n    }\n</code></pre>\n<p>This is the class that will make the request:</p>\n<pre><code>   @Service\npublic class Get_Interfaces_Service {\n\n    private final WebClient webClient;\n\n    private String url=&quot;http://&quot;;\n\n    public Get_Interfaces_Service(WebClient webClient) {\n        this.webClient = webClient;\n    }\n public List&lt;Interface&gt; get_Interfaces_Service_Method(String minion_name){\n\n        Minion minion = Syncronized_Mininos.getMinion(minion_name);\n\n\n        if(minion == null){\n            return null;\n        }\n\n\n        String url_for_interfaces = this.url +\n                minion.ip_address +\n                &quot;:&quot; +\n                minion.port\n                +&quot;/minion/getInterfaces&quot;;\n\n        URI uri = UriComponentsBuilder\n                .fromHttpUrl(url_for_interfaces)\n                .build(Collections\n                        .emptyMap());\n\n\n        return this.webClient\n                .get()\n                .uri(uri)\n                .retrieve()\n                .bodyToMono(Interface.class)\n                .block();\n    }\n</code></pre>\n<p>The other application is working perfectly:</p>\n<p>This is the second model:</p>\n<pre><code>@Data\npublic class Interface {\n\n    public String interface_name;\n    public String network;\n\n    public Interface(String interface_name,\n                     String network){\n        this.interface_name = interface_name;\n        this.network = network;\n    }\n}\n</code></pre>\n<p>This is the class that returns the list:</p>\n<pre><code>static List&lt;Interface&gt; interfaces;\n.....\npublic static synchronized List&lt;Interface&gt; get_synchronized_interfaces_method() {\n    return interfaces;\n}\n</code></pre>\n<p>The output using postman of the second application is:</p>\n<pre><code>[\n    {\n        &quot;interface_name&quot;: &quot;default&quot;,\n        &quot;network&quot;: &quot;10.33.16.1&quot;\n    },\n    {\n        &quot;interface_name&quot;: &quot;10.33.16.0/24&quot;,\n        &quot;network&quot;: &quot;wlp3s0&quot;\n    },\n    {\n        &quot;interface_name&quot;: &quot;169.254.0.0/16&quot;,\n        &quot;network&quot;: &quot;virbr0&quot;\n    },....\n</code></pre>\n<p>And this is the output of the first application when is requesting the list:</p>\n<pre><code>org.springframework.core.codec.CodecException: Type definition error: [collection type; class com.Master_Hacking_Node.Master_Node.indexes.model.Interface, contains [recursive type; com.Master_Hacking_Node.Master_Node.indexes.model.Interface]\\n\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.processException(AbstractJackson2Decoder.java:271)\\n\\tSuppressed: The stacktrace has been enhanced by Reactor, refer to additional information below: \\nError has been observed at the following site(s):\\n\\t*__checkpoint ⇢ Body from GET http://127.0.0.1:8080/minion/getInterfaces [DefaultClientResponse]\\nOriginal Stack Trace:\\n\\t\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.processException(AbstractJackson2Decoder.java:271)\\n\\t\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.decode(AbstractJackson2Decoder.java:211)\\n\\t\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.lambda$decodeToMono$2(AbstractJackson2Decoder.java:191)\\n\\t\\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:132)\\n\\t\\tat reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107)\\n\\t\\tat reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:299)\\n\\t\\tat reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.onNext(FluxFilterFuseable.java:337)\\n\\t\\tat reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2071)\\n\\t\\tat reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:145)\\n\\t\\tat reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onComplete(FluxContextWrite.java:126)\\n\\t\\tat reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onComplete(FluxMapFuseable.java:350)\\n\\t\\tat reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.drainAsync(FluxFlattenIterable.java:371)\\n\\t\\tat reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.drain(FluxFlattenIterable.java:724)\\n\\t\\tat reactor.core.publisher.FluxFlattenIterable$FlattenIterableSubscriber.onComplete(FluxFlattenIterable.java:273)\\n\\t\\tat reactor.adapter.JdkFlowAdapter$SubscriberToRS.onComplete(JdkFlowAdapter.java:160)\\n\\t\\tat java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.complete(ResponseSubscribers.java:939)\\n\\t\\tat java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.lambda$new$1(ResponseSubscribers.java:870)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture.uniAcceptNow(CompletableFuture.java:757)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture.uniAcceptStage(CompletableFuture.java:735)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture.thenAccept(CompletableFuture.java:2214)\\n\\t\\tat java.net.http/jdk.internal.net.http.ResponseSubscribers$PublishingBodySubscriber.lambda$new$2(ResponseSubscribers.java:870)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:841)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)\\n\\t\\tat java.base/java.util.concurrent.CompletableFuture.complete(CompletableFuture.java:2179)\\n\\t\\tat java.net.http/jdk.internal.net.http.\n</code></pre>\n<p>Do you have any idea what should I do in this situation?</p>\n"},{"tags":["javascript","java","encryption","rsa","jsencrypt"],"comments":[{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1689328513,"post_id":76686318,"comment_id":135201121,"body_markdown":"You have to encrypt with the public key and decrypt with the private key. You do it the other way around. Encrypt with the public and decrypt with the private, and see if that fixes the problem.","body":"You have to encrypt with the public key and decrypt with the private key. You do it the other way around. Encrypt with the public and decrypt with the private, and see if that fixes the problem."},{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1689328666,"post_id":76686318,"comment_id":135201143,"body_markdown":"Or do you want to sign (private key) and verify (public key)? Sometimes signing is **incorrectly** referred to as *encrypting with the private key*. In reality, encrypting and signing are technically and intentionally quite different and the libraries provide dedicated methods for signing and verifying.","body":"Or do you want to sign (private key) and verify (public key)? Sometimes signing is <b>incorrectly</b> referred to as <i>encrypting with the private key</i>. In reality, encrypting and signing are technically and intentionally quite different and the libraries provide dedicated methods for signing and verifying."},{"owner":{"account_id":3187825,"reputation":8415,"user_id":2692962,"accept_rate":82,"display_name":"Kleber Mota"},"score":0,"creation_date":1689352982,"post_id":76686318,"comment_id":135206483,"body_markdown":"yes, it is the second option (sign and verify) i wanted. did not knew there was a difference. which changes will be necessary to the javascript and java code then?","body":"yes, it is the second option (sign and verify) i wanted. did not knew there was a difference. which changes will be necessary to the javascript and java code then?"},{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1689355964,"post_id":76686318,"comment_id":135207087,"body_markdown":"You have to use the dedicated functions of both libraries for signing and verifying, see my answer.","body":"You have to use the dedicated functions of both libraries for signing and verifying, see my answer."}],"answers":[{"tags":[],"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689356321,"creation_date":1689355895,"answer_id":76690017,"question_id":76686318,"body_markdown":"Both libraries have dedicated functions for signing and verification. For *JSEncrypt*, see the [documentation][1], sec. *How to use this library*, 2nd code snippet, for Java, see the [`Signature`][2] class.\r\n\r\nIn the case of *JSEncrypt*, a possible implementation for signing is (using [*RSASSA-PKCS1-v1_5*][3] as signature algorithm and SHA256 as digest):\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    var privPkcs8Pem = `-----BEGIN PRIVATE KEY-----\r\n    MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCYiWw16W1eGdG2\r\n    INU24v4EBjir6dYRQ4rhacVhiqOGXvnvC3M7XYMnT1+rTVTJpPrl/KY7OnskOYJj\r\n    BQOdV61hh7/uacvfG27xKuBmm5YZOcIcWHWzuMijF9MynmnzeEBVGbUlm5NyMaS4\r\n    xNVNnv/c3jagWHXDnygzQgvW6K7HmZ6+ZWCxKa+dpcVtnrG7dApdDbMkMaj+zJvL\r\n    1fWDrQYDPWrt3bdewXBHA6LjwyrQfuOvVxlxSuvvo1E/Xi0aW5taZQQi86ltz331\r\n    uLGp7pZnhIQPldDhoXSX4TI5rv12LEs9KPKLDiG1e4QkjeDCJAG4uHxEvcGA7LXz\r\n    GSAs2y/DAgMBAAECggEAFhYBGjXqv9nK221El0u6+OKHuR3vVhTqr88MpR4ZpZ6X\r\n    NLf6iX7K5dm1zKFdT0xj3FdpIEv27DH8LDyGdJ/vJZ8uDftj6VwuWPKwMYXXRV7E\r\n    uYL2GT1+UN27FuoIsEKEmhh8pJiH+wcExpC6y8rjrttpRcKZMT0YaSznzEho6ihy\r\n    6HtHMkXOI6KO/aZDRbI9n6Sdkul4qWmBAHj1CcKAFAHOaxVzYHpMaIPcZ+Mr++Bw\r\n    +m0qyMOlYvXFnUvpgwgL5KQ5id6wLT6WrBOybaHfmtAsVV7/baAxh7urdEHv+zCc\r\n    YJHhM/PnFOTzTfkUMDt1pWJyMAZCAygZWesaHtzsiQKBgQDS2RRivF7TekB/Tl+C\r\n    nFWF4SR9YNeIKXMywFiyQDD2lPnMwagWjcbCqp9ZjYhv3siAHhsTCbnkSsnQcq40\r\n    CxqUxeDmX6PZCTVgWw0Uj6IZmPUVDj9twVWYyv5FF33C5Qwwwdu7DSZaA8Jl+JKv\r\n    InMsI6vNdCN6Of94F3pnBu1NawKBgQC5M6kMX+negUUJQPeWEjt4TCvUxqWMUmkx\r\n    4ly8XyCOCM6Wt1kmhHN1NYs4+O60cO8x/6JSBq94eiS5otpDBGTL1tRjq3Kvvytg\r\n    jOpAlNIhfEBiPABfcwV/+k2fz8uGFZFMIUliDMLAa4wxo3rBbmuSPEsioyQ3dOmV\r\n    /GnHELklCQKBgHFOzUC+QCtfsFd5s6QKBX+73RMvvsPimpC0gzXPf0CUEKXzkDQG\r\n    nsCwVpAWmjKcQ51uEFirymUft9K4Plujd/ZpXJIQ5YlWBIQyihX5lkAxTcux6249\r\n    DpXcyMYyeJgK5QEyvLWJvIl1KbwI2DMbzU70IHh5qDMgBeTwoQvK0i3fAoGBAKQX\r\n    nLmlJd8KpHNth7EFGIIe41sUYsvwnNohGU+h7YNLVFf/vdK92lrIhUGGdmGUCqs/\r\n    N7/7wm85sd5053QnqXNeNjLVTrle5X0XfdqYwZH/uEARr7bif8YDrdFiWI7F/0X3\r\n    3EAu1EOPRtkYYwSN5GveVigrakRkpy5IRiSlsZWZAoGAM3y4tYRbOVCmp4Z419gQ\r\n    /9HlEgRjBaGnDQRcDEFqcLtIm1C6mygdjP+wCkDNwVoszSbsgdRMuoZ2ReD6gFRv\r\n    bBZM7lHICA5tPaARgGgeKomUZnozTxgVH7FMxax+BJPrI/dpXcX0fCNinAJo48l0\r\n    GOHy1iLgxKUEEli3j6hchjU=\r\n    -----END PRIVATE KEY-----`\r\n\r\n    var sign = new JSEncrypt()\r\n\r\n    // key import\r\n    sign.setPrivateKey(privPkcs8Pem)\r\n\r\n    // signing\r\n    var message = &#39;The quick brown fox jumps over the lazy dog&#39;\r\n    var signature = sign.sign(message, CryptoJS.SHA256, &#39;sha256&#39;)\r\n\r\n    console.log(signature) // E888/KGgC0Zgw8/1Ojd5wxMI/0KmuzhP+YYoBawSb7w6EGRvPf0SXSYfZeiiiEDMFKchb9k6lH4M/Foi++y2Lvuaqd8ZA+/fv1uiAhzwAzBsNolPWIxN3K1yO9kc+d0YZCDaEz7abasDOubppd6cNnyIgZnEwd3JjSoqs+zWayKxYGb1CqbhXVNKWoRgwkPqzs1pw0kcZsAuTBa0uZ/hAYIdaQh7X7n/ZjNXCddZ2iHQJExtPNquay80pfL1HVA0FlX1QM1smw3OP/hj7DSYswhayr98pKIPZeLtrbzOBrpLfk/nF/YBIEj+1KQH5ZD9wjK7q4ulaF6uy03rAZ5eaQ==\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/jsencrypt/3.3.2/jsencrypt.min.js&quot;&gt;&lt;/script&gt;\r\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js&quot;&gt;&lt;/script&gt;\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nA possible Java counterpart for verification is:\r\n\r\n```java\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.security.KeyFactory;\r\nimport java.security.PublicKey;\r\nimport java.security.Signature;\r\nimport java.security.interfaces.RSAPublicKey;\r\nimport java.security.spec.X509EncodedKeySpec;\r\nimport java.util.Base64;\r\n\r\n...\r\n\r\nString pubX509Pem = &quot;&quot;&quot;\r\n-----BEGIN PUBLIC KEY-----\r\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmIlsNeltXhnRtiDVNuL+\r\nBAY4q+nWEUOK4WnFYYqjhl757wtzO12DJ09fq01UyaT65fymOzp7JDmCYwUDnVet\r\nYYe/7mnL3xtu8SrgZpuWGTnCHFh1s7jIoxfTMp5p83hAVRm1JZuTcjGkuMTVTZ7/\r\n3N42oFh1w58oM0IL1uiux5mevmVgsSmvnaXFbZ6xu3QKXQ2zJDGo/syby9X1g60G\r\nAz1q7d23XsFwRwOi48Mq0H7jr1cZcUrr76NRP14tGlubWmUEIvOpbc999bixqe6W\r\nZ4SED5XQ4aF0l+EyOa79dixLPSjyiw4htXuEJI3gwiQBuLh8RL3BgOy18xkgLNsv\r\nwwIDAQAB\r\n-----END PUBLIC KEY-----&quot;&quot;&quot;;\r\n\t\t\r\n// key import\r\nString pubX509DerB64 = pubX509Pem.replace(&quot;-----BEGIN PUBLIC KEY-----&quot;, &quot;&quot;).replace(&quot;-----END PUBLIC KEY-----&quot;, &quot;&quot;).replace(&quot;\\n&quot;, &quot;&quot;);\r\nbyte[] pubX509Der = Base64.getDecoder().decode(pubX509DerB64);\t\t\r\nKeyFactory kf = KeyFactory.getInstance(&quot;RSA&quot;);\r\nX509EncodedKeySpec keySpec = new X509EncodedKeySpec(pubX509Der);\r\nPublicKey pubKey = (RSAPublicKey) kf.generatePublic(keySpec);\r\n\r\n// verification\r\nbyte[] message = &quot;The quick brown fox jumps over the lazy dog&quot;.getBytes(StandardCharsets.UTF_8);\r\nbyte[] signature = Base64.getDecoder().decode(&quot;E888/KGgC0Zgw8/1Ojd5wxMI/0KmuzhP+YYoBawSb7w6EGRvPf0SXSYfZeiiiEDMFKchb9k6lH4M/Foi++y2Lvuaqd8ZA+/fv1uiAhzwAzBsNolPWIxN3K1yO9kc+d0YZCDaEz7abasDOubppd6cNnyIgZnEwd3JjSoqs+zWayKxYGb1CqbhXVNKWoRgwkPqzs1pw0kcZsAuTBa0uZ/hAYIdaQh7X7n/ZjNXCddZ2iHQJExtPNquay80pfL1HVA0FlX1QM1smw3OP/hj7DSYswhayr98pKIPZeLtrbzOBrpLfk/nF/YBIEj+1KQH5ZD9wjK7q4ulaF6uy03rAZ5eaQ==&quot;);\r\nSignature verifier = Signature.getInstance(&quot;SHA256withRSA&quot;);\r\nverifier.initVerify(pubKey);\r\nverifier.update(message);\r\nboolean result = verifier.verify(signature);\r\n\r\nSystem.out.println(result); // true\r\n```\r\n\r\n[1]: https://github.com/travist/jsencrypt#how-to-use-this-library\r\n[2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/security/Signature.html\r\n[3]: https://datatracker.ietf.org/doc/html/rfc8017#section-8.2","title":"Error &#39;javax.crypto.BadPaddingException: Decryption error&#39; while trying decrypt data encrypted in the client-side with JSEncrypt","body":"<p>Both libraries have dedicated functions for signing and verification. For <em>JSEncrypt</em>, see the <a href=\"https://github.com/travist/jsencrypt#how-to-use-this-library\" rel=\"nofollow noreferrer\">documentation</a>, sec. <em>How to use this library</em>, 2nd code snippet, for Java, see the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/security/Signature.html\" rel=\"nofollow noreferrer\"><code>Signature</code></a> class.</p>\n<p>In the case of <em>JSEncrypt</em>, a possible implementation for signing is (using <a href=\"https://datatracker.ietf.org/doc/html/rfc8017#section-8.2\" rel=\"nofollow noreferrer\"><em>RSASSA-PKCS1-v1_5</em></a> as signature algorithm and SHA256 as digest):</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var privPkcs8Pem = `-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCYiWw16W1eGdG2\nINU24v4EBjir6dYRQ4rhacVhiqOGXvnvC3M7XYMnT1+rTVTJpPrl/KY7OnskOYJj\nBQOdV61hh7/uacvfG27xKuBmm5YZOcIcWHWzuMijF9MynmnzeEBVGbUlm5NyMaS4\nxNVNnv/c3jagWHXDnygzQgvW6K7HmZ6+ZWCxKa+dpcVtnrG7dApdDbMkMaj+zJvL\n1fWDrQYDPWrt3bdewXBHA6LjwyrQfuOvVxlxSuvvo1E/Xi0aW5taZQQi86ltz331\nuLGp7pZnhIQPldDhoXSX4TI5rv12LEs9KPKLDiG1e4QkjeDCJAG4uHxEvcGA7LXz\nGSAs2y/DAgMBAAECggEAFhYBGjXqv9nK221El0u6+OKHuR3vVhTqr88MpR4ZpZ6X\nNLf6iX7K5dm1zKFdT0xj3FdpIEv27DH8LDyGdJ/vJZ8uDftj6VwuWPKwMYXXRV7E\nuYL2GT1+UN27FuoIsEKEmhh8pJiH+wcExpC6y8rjrttpRcKZMT0YaSznzEho6ihy\n6HtHMkXOI6KO/aZDRbI9n6Sdkul4qWmBAHj1CcKAFAHOaxVzYHpMaIPcZ+Mr++Bw\n+m0qyMOlYvXFnUvpgwgL5KQ5id6wLT6WrBOybaHfmtAsVV7/baAxh7urdEHv+zCc\nYJHhM/PnFOTzTfkUMDt1pWJyMAZCAygZWesaHtzsiQKBgQDS2RRivF7TekB/Tl+C\nnFWF4SR9YNeIKXMywFiyQDD2lPnMwagWjcbCqp9ZjYhv3siAHhsTCbnkSsnQcq40\nCxqUxeDmX6PZCTVgWw0Uj6IZmPUVDj9twVWYyv5FF33C5Qwwwdu7DSZaA8Jl+JKv\nInMsI6vNdCN6Of94F3pnBu1NawKBgQC5M6kMX+negUUJQPeWEjt4TCvUxqWMUmkx\n4ly8XyCOCM6Wt1kmhHN1NYs4+O60cO8x/6JSBq94eiS5otpDBGTL1tRjq3Kvvytg\njOpAlNIhfEBiPABfcwV/+k2fz8uGFZFMIUliDMLAa4wxo3rBbmuSPEsioyQ3dOmV\n/GnHELklCQKBgHFOzUC+QCtfsFd5s6QKBX+73RMvvsPimpC0gzXPf0CUEKXzkDQG\nnsCwVpAWmjKcQ51uEFirymUft9K4Plujd/ZpXJIQ5YlWBIQyihX5lkAxTcux6249\nDpXcyMYyeJgK5QEyvLWJvIl1KbwI2DMbzU70IHh5qDMgBeTwoQvK0i3fAoGBAKQX\nnLmlJd8KpHNth7EFGIIe41sUYsvwnNohGU+h7YNLVFf/vdK92lrIhUGGdmGUCqs/\nN7/7wm85sd5053QnqXNeNjLVTrle5X0XfdqYwZH/uEARr7bif8YDrdFiWI7F/0X3\n3EAu1EOPRtkYYwSN5GveVigrakRkpy5IRiSlsZWZAoGAM3y4tYRbOVCmp4Z419gQ\n/9HlEgRjBaGnDQRcDEFqcLtIm1C6mygdjP+wCkDNwVoszSbsgdRMuoZ2ReD6gFRv\nbBZM7lHICA5tPaARgGgeKomUZnozTxgVH7FMxax+BJPrI/dpXcX0fCNinAJo48l0\nGOHy1iLgxKUEEli3j6hchjU=\n-----END PRIVATE KEY-----`\n\nvar sign = new JSEncrypt()\n\n// key import\nsign.setPrivateKey(privPkcs8Pem)\n\n// signing\nvar message = 'The quick brown fox jumps over the lazy dog'\nvar signature = sign.sign(message, CryptoJS.SHA256, 'sha256')\n\nconsole.log(signature) // E888/KGgC0Zgw8/1Ojd5wxMI/0KmuzhP+YYoBawSb7w6EGRvPf0SXSYfZeiiiEDMFKchb9k6lH4M/Foi++y2Lvuaqd8ZA+/fv1uiAhzwAzBsNolPWIxN3K1yO9kc+d0YZCDaEz7abasDOubppd6cNnyIgZnEwd3JjSoqs+zWayKxYGb1CqbhXVNKWoRgwkPqzs1pw0kcZsAuTBa0uZ/hAYIdaQh7X7n/ZjNXCddZ2iHQJExtPNquay80pfL1HVA0FlX1QM1smw3OP/hj7DSYswhayr98pKIPZeLtrbzOBrpLfk/nF/YBIEj+1KQH5ZD9wjK7q4ulaF6uy03rAZ5eaQ==</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/jsencrypt/3.3.2/jsencrypt.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js\"&gt;&lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>A possible Java counterpart for verification is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.nio.charset.StandardCharsets;\nimport java.security.KeyFactory;\nimport java.security.PublicKey;\nimport java.security.Signature;\nimport java.security.interfaces.RSAPublicKey;\nimport java.security.spec.X509EncodedKeySpec;\nimport java.util.Base64;\n\n...\n\nString pubX509Pem = &quot;&quot;&quot;\n-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmIlsNeltXhnRtiDVNuL+\nBAY4q+nWEUOK4WnFYYqjhl757wtzO12DJ09fq01UyaT65fymOzp7JDmCYwUDnVet\nYYe/7mnL3xtu8SrgZpuWGTnCHFh1s7jIoxfTMp5p83hAVRm1JZuTcjGkuMTVTZ7/\n3N42oFh1w58oM0IL1uiux5mevmVgsSmvnaXFbZ6xu3QKXQ2zJDGo/syby9X1g60G\nAz1q7d23XsFwRwOi48Mq0H7jr1cZcUrr76NRP14tGlubWmUEIvOpbc999bixqe6W\nZ4SED5XQ4aF0l+EyOa79dixLPSjyiw4htXuEJI3gwiQBuLh8RL3BgOy18xkgLNsv\nwwIDAQAB\n-----END PUBLIC KEY-----&quot;&quot;&quot;;\n        \n// key import\nString pubX509DerB64 = pubX509Pem.replace(&quot;-----BEGIN PUBLIC KEY-----&quot;, &quot;&quot;).replace(&quot;-----END PUBLIC KEY-----&quot;, &quot;&quot;).replace(&quot;\\n&quot;, &quot;&quot;);\nbyte[] pubX509Der = Base64.getDecoder().decode(pubX509DerB64);      \nKeyFactory kf = KeyFactory.getInstance(&quot;RSA&quot;);\nX509EncodedKeySpec keySpec = new X509EncodedKeySpec(pubX509Der);\nPublicKey pubKey = (RSAPublicKey) kf.generatePublic(keySpec);\n\n// verification\nbyte[] message = &quot;The quick brown fox jumps over the lazy dog&quot;.getBytes(StandardCharsets.UTF_8);\nbyte[] signature = Base64.getDecoder().decode(&quot;E888/KGgC0Zgw8/1Ojd5wxMI/0KmuzhP+YYoBawSb7w6EGRvPf0SXSYfZeiiiEDMFKchb9k6lH4M/Foi++y2Lvuaqd8ZA+/fv1uiAhzwAzBsNolPWIxN3K1yO9kc+d0YZCDaEz7abasDOubppd6cNnyIgZnEwd3JjSoqs+zWayKxYGb1CqbhXVNKWoRgwkPqzs1pw0kcZsAuTBa0uZ/hAYIdaQh7X7n/ZjNXCddZ2iHQJExtPNquay80pfL1HVA0FlX1QM1smw3OP/hj7DSYswhayr98pKIPZeLtrbzOBrpLfk/nF/YBIEj+1KQH5ZD9wjK7q4ulaF6uy03rAZ5eaQ==&quot;);\nSignature verifier = Signature.getInstance(&quot;SHA256withRSA&quot;);\nverifier.initVerify(pubKey);\nverifier.update(message);\nboolean result = verifier.verify(signature);\n\nSystem.out.println(result); // true\n</code></pre>\n"}],"owner":{"account_id":3187825,"reputation":8415,"user_id":2692962,"accept_rate":82,"display_name":"Kleber Mota"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":216,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76690017,"answer_count":1,"score":0,"last_activity_date":1689356321,"creation_date":1689326030,"question_id":76686318,"body_markdown":"I am trying decrypt in a web application (developed with java/servlet) a token encrypted on the client-side with a javascript/JSEncrypt code.\r\n\r\nthis is the javascript code:\r\n\r\n    function submit() {\r\n        var form = document.querySelector(&quot;form&quot;);\r\n        var plainText = document.querySelector(&quot;input[name=ip]&quot;).value;\r\n    \r\n        var fileInput = document.createElement(&#39;input&#39;);\r\n        fileInput.type = &#39;file&#39;;\r\n    \r\n        fileInput.addEventListener(&#39;change&#39;, function (e) {\r\n            var file = e.target.files[0];\r\n            var reader = new FileReader();\r\n    \r\n            reader.onloadend = function (e) {\r\n                var privateKey = e.target.result;\r\n    \r\n                var encryptor = new JSEncrypt();\r\n                encryptor.setPrivateKey(privateKey);\r\n                var encryptedText = encryptor.encrypt(plainText);\r\n    \r\n                const params = new URLSearchParams();\r\n                params.append(&#39;token&#39;, encryptedText);\r\n    \r\n                fetch(form.action, {\r\n                    method: form.method,\r\n                    headers: {\r\n                        &#39;Content-Type&#39;: &#39;application/x-www-form-urlencoded&#39;\r\n                    },\r\n                    body: params\r\n                })\r\n                .then(response =&gt; {\r\n                    var main = document.querySelector(&quot;main&quot;);\r\n                    var p = document.createElement(&quot;h1&quot;);\r\n                    p.textContent = response.text();\r\n                    main.appendChild(p);\r\n                    //window.location.href = &quot;http://localhost/inbox/home&quot;;\r\n                })\r\n                .catch(error =&gt; {\r\n                    var main = document.querySelector(&quot;main&quot;);\r\n                    var p = document.createElement(&quot;h1&quot;);\r\n                    p.textContent = error.text();\r\n                    main.appendChild(p);\r\n                });            \r\n            };\r\n    \r\n            reader.readAsText(file);\r\n        });\r\n    \r\n        fileInput.click();\r\n    }\r\n\r\nthis is the java code that is trying to do the decryption:\r\n\r\n    public class RSADecryptor {\r\n        public static String decrypt(byte[] cipherText, PublicKey publicKey) throws Exception {\r\n            Cipher cipher = Cipher.getInstance(RSAKeyGenerator.RSA_ALGORITHM);\r\n            cipher.init(Cipher.DECRYPT_MODE, publicKey);\r\n    \r\n            int keySize = ((RSAKey) publicKey).getModulus().bitLength();\r\n            int blockSize = keySize / 8;\r\n    \r\n            ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n            int offset = 0;\r\n    \r\n            while(offset &lt; cipherText.length) {\r\n                int length = Math.min(cipherText.length - offset, blockSize);\r\n                byte[] block = cipher.doFinal(cipherText, offset, length);\r\n                outputStream.write(block, 0, block.length);\r\n                offset += blockSize;\r\n            }\r\n    \r\n            byte[] decryptedBytes = outputStream.toByteArray();\r\n    \r\n            //byte[] decryptedBytes = cipher.doFinal(cipherext);\r\n            return new String(decryptedBytes);\r\n        }\r\n    }\r\n\r\n\r\nAnyone can point out what I am doing wrong here?\r\n","title":"Error &#39;javax.crypto.BadPaddingException: Decryption error&#39; while trying decrypt data encrypted in the client-side with JSEncrypt","body":"<p>I am trying decrypt in a web application (developed with java/servlet) a token encrypted on the client-side with a javascript/JSEncrypt code.</p>\n<p>this is the javascript code:</p>\n<pre><code>function submit() {\n    var form = document.querySelector(&quot;form&quot;);\n    var plainText = document.querySelector(&quot;input[name=ip]&quot;).value;\n\n    var fileInput = document.createElement('input');\n    fileInput.type = 'file';\n\n    fileInput.addEventListener('change', function (e) {\n        var file = e.target.files[0];\n        var reader = new FileReader();\n\n        reader.onloadend = function (e) {\n            var privateKey = e.target.result;\n\n            var encryptor = new JSEncrypt();\n            encryptor.setPrivateKey(privateKey);\n            var encryptedText = encryptor.encrypt(plainText);\n\n            const params = new URLSearchParams();\n            params.append('token', encryptedText);\n\n            fetch(form.action, {\n                method: form.method,\n                headers: {\n                    'Content-Type': 'application/x-www-form-urlencoded'\n                },\n                body: params\n            })\n            .then(response =&gt; {\n                var main = document.querySelector(&quot;main&quot;);\n                var p = document.createElement(&quot;h1&quot;);\n                p.textContent = response.text();\n                main.appendChild(p);\n                //window.location.href = &quot;http://localhost/inbox/home&quot;;\n            })\n            .catch(error =&gt; {\n                var main = document.querySelector(&quot;main&quot;);\n                var p = document.createElement(&quot;h1&quot;);\n                p.textContent = error.text();\n                main.appendChild(p);\n            });            \n        };\n\n        reader.readAsText(file);\n    });\n\n    fileInput.click();\n}\n</code></pre>\n<p>this is the java code that is trying to do the decryption:</p>\n<pre><code>public class RSADecryptor {\n    public static String decrypt(byte[] cipherText, PublicKey publicKey) throws Exception {\n        Cipher cipher = Cipher.getInstance(RSAKeyGenerator.RSA_ALGORITHM);\n        cipher.init(Cipher.DECRYPT_MODE, publicKey);\n\n        int keySize = ((RSAKey) publicKey).getModulus().bitLength();\n        int blockSize = keySize / 8;\n\n        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n        int offset = 0;\n\n        while(offset &lt; cipherText.length) {\n            int length = Math.min(cipherText.length - offset, blockSize);\n            byte[] block = cipher.doFinal(cipherText, offset, length);\n            outputStream.write(block, 0, block.length);\n            offset += blockSize;\n        }\n\n        byte[] decryptedBytes = outputStream.toByteArray();\n\n        //byte[] decryptedBytes = cipher.doFinal(cipherext);\n        return new String(decryptedBytes);\n    }\n}\n</code></pre>\n<p>Anyone can point out what I am doing wrong here?</p>\n"},{"tags":["java","json","comparison"],"comments":[{"owner":{"account_id":1528364,"reputation":125594,"user_id":1426227,"accept_rate":79,"display_name":"cassiomolin"},"score":2,"creation_date":1532334868,"post_id":6526911,"comment_id":89917460,"body_markdown":"In this [answer](https://stackoverflow.com/a/50969020/1426227) you will find a solution with Jackson/Gson and Guava.","body":"In this <a href=\"https://stackoverflow.com/a/50969020/1426227\">answer</a> you will find a solution with Jackson/Gson and Guava."},{"owner":{"account_id":4944314,"reputation":149,"user_id":3980164,"display_name":"Slev Florin"},"score":0,"creation_date":1609771533,"post_id":6526911,"comment_id":115918970,"body_markdown":"Json Compare [Json-Compare](https://github.com/fslev/json-compare)","body":"Json Compare <a href=\"https://github.com/fslev/json-compare\" rel=\"nofollow noreferrer\">Json-Compare</a>"}],"answers":[{"tags":[],"owner":{"account_id":239282,"reputation":1674,"user_id":508760,"accept_rate":69,"display_name":"W. Goeman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1309380711,"creation_date":1309380711,"answer_id":6527113,"question_id":6526911,"body_markdown":"## json-lib ##\r\nWhat I would do is parse the json data using [json-lib][1]. This will result in regular java objects which you can compare using the equals methods. This is only valid though **assuming** the guys from json-lib properly implemented the equals method, but that you can easily test.\r\n\r\n\r\n  [1]: http://json-lib.sourceforge.net/ &quot;json-lib&quot;","title":"Best way to compare two JSON files in Java","body":"<h2>json-lib</h2>\n\n<p>What I would do is parse the json data using <a href=\"http://json-lib.sourceforge.net/\" rel=\"nofollow\" title=\"json-lib\">json-lib</a>. This will result in regular java objects which you can compare using the equals methods. This is only valid though <strong>assuming</strong> the guys from json-lib properly implemented the equals method, but that you can easily test.</p>\n"},{"tags":[],"owner":{"account_id":390729,"reputation":65307,"user_id":750987,"display_name":"Programmer Bruce"},"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1455301973,"creation_date":1309380730,"answer_id":6527118,"question_id":6526911,"body_markdown":"This only addresses equality, not differences.\r\n\r\n----\r\n\r\nWith Jackson.\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    \r\n    JsonNode tree1 = mapper.readTree(jsonInput1);\r\n    JsonNode tree2 = mapper.readTree(jsonInput2);\r\n    \r\n    boolean areTheyEqual = tree1.equals(tree2);\r\n\r\nFrom [the JavaDoc for JsonNode.equals][1]:\r\n\r\n&gt; Equality for node objects is defined as full (deep) value equality. This means that it is possible to compare complete JSON trees for equality by comparing equality of root nodes. \r\n\r\n\r\n  [1]: http://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/JsonNode.html#equals(java.lang.Object)","title":"Best way to compare two JSON files in Java","body":"<p>This only addresses equality, not differences.</p>\n\n<hr>\n\n<p>With Jackson.</p>\n\n<pre><code>ObjectMapper mapper = new ObjectMapper();\n\nJsonNode tree1 = mapper.readTree(jsonInput1);\nJsonNode tree2 = mapper.readTree(jsonInput2);\n\nboolean areTheyEqual = tree1.equals(tree2);\n</code></pre>\n\n<p>From <a href=\"http://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/JsonNode.html#equals(java.lang.Object)\" rel=\"noreferrer\">the JavaDoc for JsonNode.equals</a>:</p>\n\n<blockquote>\n  <p>Equality for node objects is defined as full (deep) value equality. This means that it is possible to compare complete JSON trees for equality by comparing equality of root nodes. </p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":171224,"reputation":4385,"user_id":398499,"accept_rate":100,"display_name":"Jean-Fran&#231;ois Beaulieu"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1475610568,"creation_date":1309380955,"answer_id":6527161,"question_id":6526911,"body_markdown":"You could try the [XStream&#39;s architecture, handling of JSON mappings][1]\r\n\r\nAlso, take a look at this post: [Comparing two XML files &amp; generating a third with XMLDiff in C#][2]. It&#39;s in C# but the logic is the same.\r\n\r\n\r\n  [1]: http://x-stream.github.io/json-tutorial.html\r\n  [2]: https://stackoverflow.com/questions/4590214/comparing-two-xml-files-generating-a-third-with-xmldiff-in-c","title":"Best way to compare two JSON files in Java","body":"<p>You could try the <a href=\"http://x-stream.github.io/json-tutorial.html\" rel=\"nofollow noreferrer\">XStream's architecture, handling of JSON mappings</a></p>\n\n<p>Also, take a look at this post: <a href=\"https://stackoverflow.com/questions/4590214/comparing-two-xml-files-generating-a-third-with-xmldiff-in-c\">Comparing two XML files &amp; generating a third with XMLDiff in C#</a>. It's in C# but the logic is the same.</p>\n"},{"tags":[],"owner":{"account_id":195025,"reputation":13170,"user_id":437679,"accept_rate":63,"display_name":"Martin Algesten"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1367822607,"creation_date":1320507290,"answer_id":8021203,"question_id":6526911,"body_markdown":"I had a similar problem and ended up writing my own library:\r\n\r\nhttps://github.com/algesten/jsondiff\r\n\r\nIt does both diffing/patching.\r\n\r\nDiffs are JSON-objects themselves and have a simple syntax for object merge/replace and array insert/replace.\r\n\r\nExample:\r\n\r\n    original\r\n    {\r\n       a: { b: 42 }\r\n    }\r\n\r\n    patch\r\n    {\r\n      &quot;~a&quot;: { c: 43 }\r\n    }\r\n\r\nThe ```~``` indicates an object merge.\r\n\r\n    result\r\n    {\r\n       a: { b: 42, c: 43 }\r\n    }","title":"Best way to compare two JSON files in Java","body":"<p>I had a similar problem and ended up writing my own library:</p>\n\n<p><a href=\"https://github.com/algesten/jsondiff\" rel=\"nofollow\">https://github.com/algesten/jsondiff</a></p>\n\n<p>It does both diffing/patching.</p>\n\n<p>Diffs are JSON-objects themselves and have a simple syntax for object merge/replace and array insert/replace.</p>\n\n<p>Example:</p>\n\n<pre><code>original\n{\n   a: { b: 42 }\n}\n\npatch\n{\n  \"~a\": { c: 43 }\n}\n</code></pre>\n\n<p>The <code>~</code> indicates an object merge.</p>\n\n<pre><code>result\n{\n   a: { b: 42, c: 43 }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3491286,"reputation":2056,"user_id":2920922,"accept_rate":18,"display_name":"Didac Montero"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1412864830,"creation_date":1412864830,"answer_id":26281005,"question_id":6526911,"body_markdown":"For people who are already using **Jackson**, I recommend [**json-patch**](https://github.com/fge/json-patch)\r\n\r\n    final JsonNode patchNode = JsonDiff.asJson(firstNode, secondNode);\r\n    System.out.println(&quot;Diff=&quot; + m.writeValueAsString(patchNode));","title":"Best way to compare two JSON files in Java","body":"<p>For people who are already using <strong>Jackson</strong>, I recommend <a href=\"https://github.com/fge/json-patch\" rel=\"nofollow\"><strong>json-patch</strong></a></p>\n\n<pre><code>final JsonNode patchNode = JsonDiff.asJson(firstNode, secondNode);\nSystem.out.println(\"Diff=\" + m.writeValueAsString(patchNode));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":410264,"reputation":3756,"user_id":782011,"accept_rate":47,"display_name":"pacoverflow"},"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1689356304,"creation_date":1435334392,"answer_id":31077548,"question_id":6526911,"body_markdown":"I recommend the [zjsonpatch][1] library, which presents the diff information in accordance with [RFC 6902][2] (JSON Patch).  You can use it with Jackson:\r\n\r\n    import com.fasterxml.jackson.databind.{ObjectMapper, JsonNode}\r\n   \tJsonNode beforeNode = jacksonObjectMapper.readTree(beforeJsonString);\r\n   \tJsonNode afterNode = jacksonObjectMapper.readTree(afterJsonString);\r\n    \r\n    import com.flipkart.zjsonpatch.JsonDiff\r\n   \tJsonNode patch = JsonDiff.asJson(beforeNode, afterNode);\r\n   \tString diffs = patch.toString();\r\n\r\nThis library is better than [fge-json-patch][3] (which was mentioned in another answer) because it can detect items being inserted/removed from arrays.  Fge-json-patch cannot handle that (if an item is inserted into the middle of an array, it will think that item and every item after that was changed since they are all shifted over by one).\r\n\r\n\r\n  [1]: https://github.com/flipkart-incubator/zjsonpatch\r\n  [2]: https://www.rfc-editor.org/rfc/rfc6902\r\n  [3]: https://github.com/fge/json-patch","title":"Best way to compare two JSON files in Java","body":"<p>I recommend the <a href=\"https://github.com/flipkart-incubator/zjsonpatch\" rel=\"nofollow noreferrer\">zjsonpatch</a> library, which presents the diff information in accordance with <a href=\"https://www.rfc-editor.org/rfc/rfc6902\" rel=\"nofollow noreferrer\">RFC 6902</a> (JSON Patch).  You can use it with Jackson:</p>\n<pre><code>import com.fasterxml.jackson.databind.{ObjectMapper, JsonNode}\nJsonNode beforeNode = jacksonObjectMapper.readTree(beforeJsonString);\nJsonNode afterNode = jacksonObjectMapper.readTree(afterJsonString);\n\nimport com.flipkart.zjsonpatch.JsonDiff\nJsonNode patch = JsonDiff.asJson(beforeNode, afterNode);\nString diffs = patch.toString();\n</code></pre>\n<p>This library is better than <a href=\"https://github.com/fge/json-patch\" rel=\"nofollow noreferrer\">fge-json-patch</a> (which was mentioned in another answer) because it can detect items being inserted/removed from arrays.  Fge-json-patch cannot handle that (if an item is inserted into the middle of an array, it will think that item and every item after that was changed since they are all shifted over by one).</p>\n"},{"tags":[],"owner":{"account_id":387465,"reputation":4697,"user_id":745827,"accept_rate":88,"display_name":"Cengiz"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1446480511,"creation_date":1446480511,"answer_id":33481923,"question_id":6526911,"body_markdown":"I&#39;ve done good experience with [JSONAssert][1].\r\n\r\n    import org.junit.Test;\r\n    import org.apache.commons.io.FileUtils;\r\n    import org.skyscreamer.jsonassert.JSONAssert;\r\n    import org.skyscreamer.jsonassert.JSONCompareMode;\r\n\r\n    ... \r\n    @Test\r\n    public void myTest() {\r\n      String expectedJson = FileUtils.readFileToString(&quot;/expectedFile&quot;);\r\n      String actualJson = FileUtils.readFileToString(&quot;/actualFile&quot;);\r\n      JSONAssert.assertEquals(expectedJson, actualJson, JSONCompareMode.STRICT);\r\n    }\r\n    ... \r\n\r\n  [1]: https://github.com/skyscreamer/JSONassert","title":"Best way to compare two JSON files in Java","body":"<p>I've done good experience with <a href=\"https://github.com/skyscreamer/JSONassert\" rel=\"noreferrer\">JSONAssert</a>.</p>\n\n<pre><code>import org.junit.Test;\nimport org.apache.commons.io.FileUtils;\nimport org.skyscreamer.jsonassert.JSONAssert;\nimport org.skyscreamer.jsonassert.JSONCompareMode;\n\n... \n@Test\npublic void myTest() {\n  String expectedJson = FileUtils.readFileToString(\"/expectedFile\");\n  String actualJson = FileUtils.readFileToString(\"/actualFile\");\n  JSONAssert.assertEquals(expectedJson, actualJson, JSONCompareMode.STRICT);\n}\n... \n</code></pre>\n"},{"tags":[],"owner":{"account_id":3200349,"reputation":5199,"user_id":2702510,"accept_rate":25,"display_name":"Ean V"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1488533751,"creation_date":1475024400,"answer_id":39736461,"question_id":6526911,"body_markdown":"The easiest way to compare json strings is using `JSONCompare` from [JSONAssert][1] library. The advantage is, it&#39;s not limited to structure only and can compare values if you wish:\r\n\r\n    JSONCompareResult result = \r\n         JSONCompare.compareJSON(json1, json2, JSONCompareMode.STRICT);\r\n    System.out.println(result.toString());\r\n\r\nwhich will output something like:\r\n\r\n    Expected: VALUE1\r\n         got: VALUE2\r\n     ; field1.field2\r\n\r\n  [1]: https://github.com/skyscreamer/JSONassert\r\n","title":"Best way to compare two JSON files in Java","body":"<p>The easiest way to compare json strings is using <code>JSONCompare</code> from <a href=\"https://github.com/skyscreamer/JSONassert\" rel=\"noreferrer\">JSONAssert</a> library. The advantage is, it's not limited to structure only and can compare values if you wish:</p>\n\n<pre><code>JSONCompareResult result = \n     JSONCompare.compareJSON(json1, json2, JSONCompareMode.STRICT);\nSystem.out.println(result.toString());\n</code></pre>\n\n<p>which will output something like:</p>\n\n<pre><code>Expected: VALUE1\n     got: VALUE2\n ; field1.field2\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4091881,"reputation":25,"user_id":3359659,"display_name":"Naresh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1603535940,"creation_date":1603534597,"answer_id":64512274,"question_id":6526911,"body_markdown":"In case if want to compare two JSON Ignoring the order of elements/object, see if this [library][1] helps you.\r\n\r\n    \r\nUsage:\r\n\r\n    List&lt;Diff&gt; diff = new DnjsonDiff().getDiff(String left, String right)\r\n    Left =[{&quot;name&quot;:&quot;Bob&quot;,&quot;businessKey&quot;:&quot;4444&quot;},{&quot;name&quot;:&quot;John&quot;,&quot;businessKey&quot;:&quot;5555&quot;}]\r\n    Right = [{&quot;name&quot;:&quot;Bob&quot;,&quot;businessKey&quot;:&quot;6666&quot;},{&quot;name&quot;:&quot;John&quot;, &quot;businessKey&quot;:&quot;4444&quot;}]\r\n    \r\n    Diff:\r\n    \r\n    [\r\n        {\r\n            &quot;op&quot;: &quot;replace&quot;,\r\n            &quot;configuredValue&quot;: &quot;John&quot;,\r\n            &quot;intendedValue&quot;: &quot;Bob&quot;,\r\n            &quot;businessKey&quot;: &quot;4444&quot;\r\n        },\r\n        {\r\n            &quot;op&quot;: &quot;remove&quot;,\r\n            &quot;configuredValue&quot;: null,\r\n            &quot;intendedValue&quot;: &quot;{\\&quot;name\\&quot;:\\&quot;John\\&quot;,\\&quot;businessKey\\&quot;:\\&quot;5555\\&quot;}&quot;,\r\n            &quot;businessKey&quot;: &quot;5555&quot;\r\n        },\r\n        {\r\n            &quot;op&quot;: &quot;add&quot;,\r\n            &quot;configuredValue&quot;: &quot;{\\&quot;name\\&quot;:\\&quot;Bob\\&quot;,\\&quot;businessKey\\&quot;:\\&quot;6666\\&quot;}&quot;,\r\n            &quot;intendedValue&quot;: null,\r\n            &quot;businessKey&quot;: &quot;null&quot;\r\n        }\r\n    ]\r\n\r\n  [1]: https://github.com/nareshsaw5/common-json-diff\r\n","title":"Best way to compare two JSON files in Java","body":"<p>In case if want to compare two JSON Ignoring the order of elements/object, see if this <a href=\"https://github.com/nareshsaw5/common-json-diff\" rel=\"nofollow noreferrer\">library</a> helps you.</p>\n<p>Usage:</p>\n<pre><code>List&lt;Diff&gt; diff = new DnjsonDiff().getDiff(String left, String right)\nLeft =[{&quot;name&quot;:&quot;Bob&quot;,&quot;businessKey&quot;:&quot;4444&quot;},{&quot;name&quot;:&quot;John&quot;,&quot;businessKey&quot;:&quot;5555&quot;}]\nRight = [{&quot;name&quot;:&quot;Bob&quot;,&quot;businessKey&quot;:&quot;6666&quot;},{&quot;name&quot;:&quot;John&quot;, &quot;businessKey&quot;:&quot;4444&quot;}]\n\nDiff:\n\n[\n    {\n        &quot;op&quot;: &quot;replace&quot;,\n        &quot;configuredValue&quot;: &quot;John&quot;,\n        &quot;intendedValue&quot;: &quot;Bob&quot;,\n        &quot;businessKey&quot;: &quot;4444&quot;\n    },\n    {\n        &quot;op&quot;: &quot;remove&quot;,\n        &quot;configuredValue&quot;: null,\n        &quot;intendedValue&quot;: &quot;{\\&quot;name\\&quot;:\\&quot;John\\&quot;,\\&quot;businessKey\\&quot;:\\&quot;5555\\&quot;}&quot;,\n        &quot;businessKey&quot;: &quot;5555&quot;\n    },\n    {\n        &quot;op&quot;: &quot;add&quot;,\n        &quot;configuredValue&quot;: &quot;{\\&quot;name\\&quot;:\\&quot;Bob\\&quot;,\\&quot;businessKey\\&quot;:\\&quot;6666\\&quot;}&quot;,\n        &quot;intendedValue&quot;: null,\n        &quot;businessKey&quot;: &quot;null&quot;\n    }\n]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4612886,"reputation":565,"user_id":3740432,"accept_rate":0,"display_name":"Afsar Ali"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1646885593,"creation_date":1646885593,"answer_id":71418756,"question_id":6526911,"body_markdown":"You can use below dependancy to compare Json with STRICT,LENIENT,IGNORE_ORDER etc. \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.skyscreamer&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jsonassert&lt;/artifactId&gt;\r\n        &lt;version&gt;1.5.0&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n      public static boolean isTwoJsonEquals(JSONObject firstObj,JSONObject secondObj, JSONCompareMode compareMode){\r\n        try {\r\n          JSONCompareResult result = JSONCompare.compareJSON(firstObj, secondObj, compareMode);\r\n\r\n          return result.passed();\r\n        } catch (JSONException e) {\r\n          e.printStackTrace();\r\n        }\r\n        return false;\r\n      }\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\n","title":"Best way to compare two JSON files in Java","body":"<p>You can use below dependancy to compare Json with STRICT,LENIENT,IGNORE_ORDER etc.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.skyscreamer&lt;/groupId&gt;\n    &lt;artifactId&gt;jsonassert&lt;/artifactId&gt;\n    &lt;version&gt;1.5.0&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<pre class=\"lang-java prettyprint-override\"><code>  public static boolean isTwoJsonEquals(JSONObject firstObj,JSONObject secondObj, JSONCompareMode compareMode){\n    try {\n      JSONCompareResult result = JSONCompare.compareJSON(firstObj, secondObj, compareMode);\n\n      return result.passed();\n    } catch (JSONException e) {\n      e.printStackTrace();\n    }\n    return false;\n  }\n</code></pre>\n\n"},{"tags":[],"owner":{"account_id":23744703,"reputation":21,"user_id":17762303,"display_name":"KRISH C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674546356,"creation_date":1674546356,"answer_id":75218682,"question_id":6526911,"body_markdown":"Using **Google&#39;s Guava library** for comparison. Check this answer which has detailed explanation on how to use this.\r\n\r\nhttps://stackoverflow.com/a/50969020/17762303","title":"Best way to compare two JSON files in Java","body":"<p>Using <strong>Google's Guava library</strong> for comparison. Check this answer which has detailed explanation on how to use this.</p>\n<p><a href=\"https://stackoverflow.com/a/50969020/17762303\">https://stackoverflow.com/a/50969020/17762303</a></p>\n"}],"owner":{"account_id":148236,"reputation":93535,"user_id":359862,"accept_rate":95,"display_name":"James Raitsev"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":155143,"favorite_count":0,"down_vote_count":0,"up_vote_count":45,"accepted_answer_id":6527161,"answer_count":11,"score":45,"last_activity_date":1689356304,"creation_date":1309379681,"question_id":6526911,"body_markdown":"How would you suggest this task is approached?\r\n\r\nThe challenge as i see it is in presenting diff information intelligently. Before i go reinventing the wheel, is there an accepted approach of how such a comparison should be handled? ","title":"Best way to compare two JSON files in Java","body":"<p>How would you suggest this task is approached?</p>\n\n<p>The challenge as i see it is in presenting diff information intelligently. Before i go reinventing the wheel, is there an accepted approach of how such a comparison should be handled? </p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1689359969,"post_id":76690029,"comment_id":135207792,"body_markdown":"why do you need the token?","body":"why do you need the token?"},{"owner":{"account_id":29019036,"reputation":1,"user_id":22228894,"display_name":"alex"},"score":0,"creation_date":1689365777,"post_id":76690029,"comment_id":135208745,"body_markdown":"The structure of the application I am working with requires it to be passed between various components. This isn&#39;t something I have the liberty to change.","body":"The structure of the application I am working with requires it to be passed between various components. This isn&#39;t something I have the liberty to change."},{"owner":{"account_id":21488921,"reputation":4715,"user_id":15835039,"display_name":"Steve Riesenberg"},"score":1,"creation_date":1689372322,"post_id":76690029,"comment_id":135209615,"body_markdown":"Please have a look at the docs: https://docs.spring.io/spring-security/reference/servlet/oauth2/client/authorized-clients.html","body":"Please have a look at the docs: <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/client/authorized-clients.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/reference/servlet/oauth2/clie&zwnj;&#8203;nt/&hellip;</a>"}],"owner":{"account_id":29019036,"reputation":1,"user_id":22228894,"display_name":"alex"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689356009,"creation_date":1689355963,"question_id":76690029,"body_markdown":"I am trying to use OAuth2 to authenticate / authorize users in a Spring Boot MVC application. \r\n\r\nFrom the [Spring Security docs](https://docs.spring.io/spring-security/reference/servlet/oauth2/login/core.html#:~:text=The%20default%20redirect%20URI%20template,the%20application%20is%20correctly%20configured.), I know that the default redirect uri (where the authentication server redirects to with an authorization code after successful sign in) is `{baseUrl}/login/oauth2/code/{registrationId}`. \r\n\r\nHowever, what happens at this point? Does Spring Boot provide this endpoint and handle things? Or do I need to make a controller that maps this endpoint (e.g. `@GetMapping(/login/oauth2/code/{registrationId}, ...)`, and deal with things myself?\r\n\r\nIf Spring does things for me, what exactly does it do? I notice that you can specify a `security.oauth2.client.provider.&lt;registrationId&gt;.token-uri` in the `application.yml` file. Does this mean Spring Boot will automatically fetch the access token for you when the redirect uri is accessed?\r\n\r\nBasically, I am wondering how I can get the access token from the server after the user has successfully logged in. If Spring Boot gets the access token for you, how can I get it from Spring Boot to use it in HTTP requests?","title":"Spring Security OAuth2 Flow - What Does Spring Boot Do After Redirect?","body":"<p>I am trying to use OAuth2 to authenticate / authorize users in a Spring Boot MVC application.</p>\n<p>From the <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/login/core.html#:%7E:text=The%20default%20redirect%20URI%20template,the%20application%20is%20correctly%20configured.\" rel=\"nofollow noreferrer\">Spring Security docs</a>, I know that the default redirect uri (where the authentication server redirects to with an authorization code after successful sign in) is <code>{baseUrl}/login/oauth2/code/{registrationId}</code>.</p>\n<p>However, what happens at this point? Does Spring Boot provide this endpoint and handle things? Or do I need to make a controller that maps this endpoint (e.g. <code>@GetMapping(/login/oauth2/code/{registrationId}, ...)</code>, and deal with things myself?</p>\n<p>If Spring does things for me, what exactly does it do? I notice that you can specify a <code>security.oauth2.client.provider.&lt;registrationId&gt;.token-uri</code> in the <code>application.yml</code> file. Does this mean Spring Boot will automatically fetch the access token for you when the redirect uri is accessed?</p>\n<p>Basically, I am wondering how I can get the access token from the server after the user has successfully logged in. If Spring Boot gets the access token for you, how can I get it from Spring Boot to use it in HTTP requests?</p>\n"},{"tags":["java","android","html","gradle","libgdx"],"answers":[{"tags":[],"owner":{"account_id":26318201,"reputation":5076,"user_id":19980636,"display_name":"Krokomot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686992849,"creation_date":1686992414,"answer_id":76495472,"question_id":76346966,"body_markdown":"Lets take a look at the error message.\r\n\r\n```\r\nUnable to load class &#39;org.gradle.api.internal.artifacts.dsl.dependencies.DependencyFactory$ClassPathNotation&#39;.\r\n```\r\nThe guide on [Upgrading your build from Gradle 7.x to 8.0][1] says that [Internal DependencyFactory was renamed][2].\r\n\r\n&gt; The internal `org.gradle.api.internal.artifacts.dsl.dependencies.DependencyFactory` type was renamed to `org.gradle.api.internal.artifacts.dsl.dependencies.DependencyFactoryInternal`. As an internal type, it should not be used, but for compatibility reasons the inner `ClassPathNotation` type is still available. This name for the type is deprecated and will be removed in Gradle 8.0. The public API for this is on `DependencyHandler`, with methods such as `localGroovy()` providing the same functionality.\r\n\r\nThat exactly fits the error message you get when updating to Gradle 8. Those internal Gradle APIs are mainly relevant for the developers of Gradle plugins. That&#39;s why the above mentioned Upgrading Guide for Gradle recommends in a second step to\r\n\r\n&gt; Update your plugins.\r\n&gt; \r\n&gt; Some plugins will break with this new version of Gradle, for example because they use internal APIs that have been removed or changed. The previous step will help you identify potential problems by issuing deprecation warnings when a plugin does try to use a deprecated part of the API.\r\n\r\nNow, you have problems with a HTML setup of libGDX, but not with a non-HTML setup, because different plugins are used. Those non-HTML plugins, like the Android Gradle Plugin, are either not affected or have been updated duly. There are, if I&#39;m not mistaken, two plugins one has to apply in a libGDX HTML-project -- the [WAR plugin][3] and the [GWT plugin][4]. The first one is a Gradle Core plugin and I doubt that it isn&#39;t up-to-date. The latter is a custom one and there are various implementations to choose from, as you can see.\r\n\r\nSo -- Ensure, that all your plugins are up-to-date. If that doesn&#39;t help and you need a HTML-setup of libGDX you probably have to stick with Gradle 7 for now.\r\n\r\n\r\n  [1]: https://docs.gradle.org/current/userguide/upgrading_version_7.html\r\n  [2]: https://docs.gradle.org/current/userguide/upgrading_version_7.html#dependency_factory_renamed\r\n  [3]: https://docs.gradle.org/current/userguide/war_plugin.html\r\n  [4]: https://plugins.gradle.org/search?term=gwt","title":"LibGDX - android studio: Unable to load class &#39;org.gradle.api.internal.artifacts.dsl.dependencies.DependencyFactory$ClassPathNotation&#39;","body":"<p>Lets take a look at the error message.</p>\n<pre><code>Unable to load class 'org.gradle.api.internal.artifacts.dsl.dependencies.DependencyFactory$ClassPathNotation'.\n</code></pre>\n<p>The guide on <a href=\"https://docs.gradle.org/current/userguide/upgrading_version_7.html\" rel=\"nofollow noreferrer\">Upgrading your build from Gradle 7.x to 8.0</a> says that <a href=\"https://docs.gradle.org/current/userguide/upgrading_version_7.html#dependency_factory_renamed\" rel=\"nofollow noreferrer\">Internal DependencyFactory was renamed</a>.</p>\n<blockquote>\n<p>The internal <code>org.gradle.api.internal.artifacts.dsl.dependencies.DependencyFactory</code> type was renamed to <code>org.gradle.api.internal.artifacts.dsl.dependencies.DependencyFactoryInternal</code>. As an internal type, it should not be used, but for compatibility reasons the inner <code>ClassPathNotation</code> type is still available. This name for the type is deprecated and will be removed in Gradle 8.0. The public API for this is on <code>DependencyHandler</code>, with methods such as <code>localGroovy()</code> providing the same functionality.</p>\n</blockquote>\n<p>That exactly fits the error message you get when updating to Gradle 8. Those internal Gradle APIs are mainly relevant for the developers of Gradle plugins. That's why the above mentioned Upgrading Guide for Gradle recommends in a second step to</p>\n<blockquote>\n<p>Update your plugins.</p>\n<p>Some plugins will break with this new version of Gradle, for example because they use internal APIs that have been removed or changed. The previous step will help you identify potential problems by issuing deprecation warnings when a plugin does try to use a deprecated part of the API.</p>\n</blockquote>\n<p>Now, you have problems with a HTML setup of libGDX, but not with a non-HTML setup, because different plugins are used. Those non-HTML plugins, like the Android Gradle Plugin, are either not affected or have been updated duly. There are, if I'm not mistaken, two plugins one has to apply in a libGDX HTML-project -- the <a href=\"https://docs.gradle.org/current/userguide/war_plugin.html\" rel=\"nofollow noreferrer\">WAR plugin</a> and the <a href=\"https://plugins.gradle.org/search?term=gwt\" rel=\"nofollow noreferrer\">GWT plugin</a>. The first one is a Gradle Core plugin and I doubt that it isn't up-to-date. The latter is a custom one and there are various implementations to choose from, as you can see.</p>\n<p>So -- Ensure, that all your plugins are up-to-date. If that doesn't help and you need a HTML-setup of libGDX you probably have to stick with Gradle 7 for now.</p>\n"},{"tags":[],"owner":{"account_id":9947340,"reputation":222,"user_id":7361496,"display_name":"Jiř&#237;"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689200425,"creation_date":1689200425,"answer_id":76674810,"question_id":76346966,"body_markdown":"You will first have to update `org.gretty:gretty:3.0.7` to version `4.0.3`, then the Gradle upgrade will work fine.","title":"LibGDX - android studio: Unable to load class &#39;org.gradle.api.internal.artifacts.dsl.dependencies.DependencyFactory$ClassPathNotation&#39;","body":"<p>You will first have to update <code>org.gretty:gretty:3.0.7</code> to version <code>4.0.3</code>, then the Gradle upgrade will work fine.</p>\n"}],"owner":{"account_id":24269076,"reputation":29,"user_id":18217490,"display_name":"HermannGo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":418,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1689355815,"creation_date":1685191156,"question_id":76346966,"body_markdown":"I have the following problem:\r\n\r\nIf I create a new project with LIBGDX Project Setup (latest version 1.11.0) and then open it in Android Studio, I can upgrade to Gradle 7.4.2 without any problems.\r\nHowever, when upgrading to Gradle 8.0.1 I always get the same error: &quot;Unable to load class &#39;org.gradle.api.internal.artifacts.dsl.dependencies.DependencyFactory$ClassPathNotation&#39;.&quot;\r\n&quot;org/gradle/api/internal/artifacts/dsl/dependencies/DependencyFactory$ClassPathNotation&quot;\r\n\r\nIt must have something to do with HTML, because if I create a LIBGDX setup without HTML, I can update to Gradle 8.0.1 without any problems. Everything works fine without HTML.\r\n\r\nAndroid Studio Flamingo Patch 2, LIBGDX Setup Version 1.11.0\r\n\r\nWould be grateful for help...\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/n3lHs.png","title":"LibGDX - android studio: Unable to load class &#39;org.gradle.api.internal.artifacts.dsl.dependencies.DependencyFactory$ClassPathNotation&#39;","body":"<p>I have the following problem:</p>\n<p>If I create a new project with LIBGDX Project Setup (latest version 1.11.0) and then open it in Android Studio, I can upgrade to Gradle 7.4.2 without any problems.\nHowever, when upgrading to Gradle 8.0.1 I always get the same error: &quot;Unable to load class 'org.gradle.api.internal.artifacts.dsl.dependencies.DependencyFactory$ClassPathNotation'.&quot;\n&quot;org/gradle/api/internal/artifacts/dsl/dependencies/DependencyFactory$ClassPathNotation&quot;</p>\n<p>It must have something to do with HTML, because if I create a LIBGDX setup without HTML, I can update to Gradle 8.0.1 without any problems. Everything works fine without HTML.</p>\n<p>Android Studio Flamingo Patch 2, LIBGDX Setup Version 1.11.0</p>\n<p>Would be grateful for help...\n<a href=\"https://i.stack.imgur.com/n3lHs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/n3lHs.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","multithreading","synchronization"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":6,"creation_date":1688195381,"post_id":76593611,"comment_id":135044159,"body_markdown":"The reason is your expectations are wrong. Why did you expect that?","body":"The reason is your expectations are wrong. Why did you expect that?"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1688216065,"post_id":76593611,"comment_id":135046026,"body_markdown":"If you want a specific order, why are you using threads? and what makes you think they should execute in any specific order?","body":"If you want a specific order, why are you using threads? and what makes you think they should execute in any specific order?"},{"owner":{"account_id":23962756,"reputation":11,"user_id":17952624,"display_name":"Tejas Hegde"},"score":0,"creation_date":1688285087,"post_id":76593611,"comment_id":135051464,"body_markdown":"Shouldn&#39;t the display order depend upon the sequence in which the print statements are present? And the output should have been as expected because of thread synchronisation right?","body":"Shouldn&#39;t the display order depend upon the sequence in which the print statements are present? And the output should have been as expected because of thread synchronisation right?"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1688292094,"post_id":76593611,"comment_id":135052094,"body_markdown":"No. The display order depends on the order in which they are executed: and as threads execute in parallel, there are no rational grounds for expecting one specific order over any other.","body":"No. The display order depends on the order in which they are executed: and as threads execute in parallel, there are no rational grounds for expecting one specific order over any other."}],"answers":[{"tags":[],"owner":{"account_id":23962756,"reputation":11,"user_id":17952624,"display_name":"Tejas Hegde"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689355579,"creation_date":1689355579,"answer_id":76689976,"question_id":76593611,"body_markdown":"As a user pointed out(thank you, sorry for not responding to your comment), the OS only schedules a thread for execution and does not immediately start the thread(Thread.start()).\r\n\r\nThe reason that the thread outputs appear after A,B,C in this case is because the for loop (initialization, condition check and then print) seems to add an overhead. So by the time the thread prints a message, A,B,C would have been printed. However if the thread prints only a simple print message like System.out.println(name); then in the output I observed that the thread output appears most of the times like this:  A,t1,B,C,t2,t3 and then main.\r\n\r\nFinally, since the OS schedules the threads, one cannot expect the same order of threads to be scheduled every time. This is what I observed when I executed the program several times. For simple print message, the above mentioned output appeared  many times. Some times the output was perfectly as expected. But with the for loop, the thread output almost always appears after A,B,C.","title":"Java Thread Synchronization does not work as expected","body":"<p>As a user pointed out(thank you, sorry for not responding to your comment), the OS only schedules a thread for execution and does not immediately start the thread(Thread.start()).</p>\n<p>The reason that the thread outputs appear after A,B,C in this case is because the for loop (initialization, condition check and then print) seems to add an overhead. So by the time the thread prints a message, A,B,C would have been printed. However if the thread prints only a simple print message like System.out.println(name); then in the output I observed that the thread output appears most of the times like this:  A,t1,B,C,t2,t3 and then main.</p>\n<p>Finally, since the OS schedules the threads, one cannot expect the same order of threads to be scheduled every time. This is what I observed when I executed the program several times. For simple print message, the above mentioned output appeared  many times. Some times the output was perfectly as expected. But with the for loop, the thread output almost always appears after A,B,C.</p>\n"}],"owner":{"account_id":23962756,"reputation":11,"user_id":17952624,"display_name":"Tejas Hegde"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1689355579,"creation_date":1688194979,"question_id":76593611,"body_markdown":"The following is a Java Program demonstrating Threading and Synchronization in Java.\r\n\r\n\r\n```\r\n    class AB{\r\n\tsynchronized public void print(String name) {\r\n\t\tfor(int i=0;i&lt;5;i++) {\r\n\t\t\tSystem.out.println(name+&quot; &quot;+i);\r\n\t\t\ttry {\r\n\t\t\t\tThread.sleep(1000);\r\n\t\t\t}\r\n\t\t\tcatch(InterruptedException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n//extending thread is another way. Usually we use Runnable Interface\r\nclass NewThread implements Runnable{\r\n\tString name;\r\n\tAB obj;\r\n\tThread t;\r\n\tNewThread(String name,AB o){\r\n\t\tthis.name=name;\r\n\t\tobj=o;\r\n\t\tt=new Thread(this,name);\r\n\t\tt.start();\r\n\t}\r\n\t\r\n\tpublic void run() {\r\n\t\tobj.print(name);\r\n\t}\r\n}\r\n\r\npublic class ThreadExample {\r\npublic static void main(String g[]) {\r\n\tAB t=new AB();\r\n\tNewThread t1=new NewThread(&quot;1&quot;,t);\r\n\tSystem.out.println(&quot;A&quot;);\r\n\tNewThread t2=new NewThread(&quot;2&quot;,t);\r\n\tSystem.out.println(&quot;B&quot;);\r\n\tNewThread t3=new NewThread(&quot;3&quot;,t);\r\n\tSystem.out.println(&quot;C&quot;);\r\n\t//join is similar to wait for processes. Parent thread(main) waits for children to terminate\r\n\t//note that without synchronization, all three threads execute simultaneously.\r\n\ttry {\r\n\tt1.t.join();\r\n\tt2.t.join();\r\n\tt3.t.join();\r\n\t}\r\n\tcatch(InterruptedException e) {\r\n\t\te.printStackTrace();\r\n\t}\r\n\tfor(int i=0;i&lt;5;i++) {\r\n\t\tSystem.out.println(&quot;main thread&quot;+&quot; &quot;+i);\r\n\t\ttry {\r\n\t\t\tThread.sleep(1000);\r\n\t\t}\r\n\t\tcatch(InterruptedException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n}\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nThe expected output should have been t1 thread output, A, t2, B, t3, C and then main thread. Because of the order in which the print and thread creation statements are present. And also because synchronised keyword has been added to synchronize the threads. But the observed output is as follows:\r\n\r\nA,B,C,t1,t3,t2,main\r\n\r\nWhat could be the reason for the deviation between the expected and the observed behavior?\r\nI believe that Java is Synchronous so only after thread t1 is created and printed then system print (A) should work?","title":"Java Thread Synchronization does not work as expected","body":"<p>The following is a Java Program demonstrating Threading and Synchronization in Java.</p>\n<pre><code>    class AB{\n    synchronized public void print(String name) {\n        for(int i=0;i&lt;5;i++) {\n            System.out.println(name+&quot; &quot;+i);\n            try {\n                Thread.sleep(1000);\n            }\n            catch(InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n//extending thread is another way. Usually we use Runnable Interface\nclass NewThread implements Runnable{\n    String name;\n    AB obj;\n    Thread t;\n    NewThread(String name,AB o){\n        this.name=name;\n        obj=o;\n        t=new Thread(this,name);\n        t.start();\n    }\n    \n    public void run() {\n        obj.print(name);\n    }\n}\n\npublic class ThreadExample {\npublic static void main(String g[]) {\n    AB t=new AB();\n    NewThread t1=new NewThread(&quot;1&quot;,t);\n    System.out.println(&quot;A&quot;);\n    NewThread t2=new NewThread(&quot;2&quot;,t);\n    System.out.println(&quot;B&quot;);\n    NewThread t3=new NewThread(&quot;3&quot;,t);\n    System.out.println(&quot;C&quot;);\n    //join is similar to wait for processes. Parent thread(main) waits for children to terminate\n    //note that without synchronization, all three threads execute simultaneously.\n    try {\n    t1.t.join();\n    t2.t.join();\n    t3.t.join();\n    }\n    catch(InterruptedException e) {\n        e.printStackTrace();\n    }\n    for(int i=0;i&lt;5;i++) {\n        System.out.println(&quot;main thread&quot;+&quot; &quot;+i);\n        try {\n            Thread.sleep(1000);\n        }\n        catch(InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n}\n}\n</code></pre>\n<p>The expected output should have been t1 thread output, A, t2, B, t3, C and then main thread. Because of the order in which the print and thread creation statements are present. And also because synchronised keyword has been added to synchronize the threads. But the observed output is as follows:</p>\n<p>A,B,C,t1,t3,t2,main</p>\n<p>What could be the reason for the deviation between the expected and the observed behavior?\nI believe that Java is Synchronous so only after thread t1 is created and printed then system print (A) should work?</p>\n"},{"tags":["java","htmlunit"],"answers":[{"tags":[],"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689246904,"creation_date":1689246904,"answer_id":76678737,"question_id":76677648,"body_markdown":"So far (HtmlUnit 3.3.0) there is no real public API to do interaction with the storage outside of the js support.\r\n\r\nPlease open an issue at github and we can work together to add some methods to support your case (and maybe some documentation also).","title":"How to load a &quot;local storage&quot; value to HtmlUnit web client?","body":"<p>So far (HtmlUnit 3.3.0) there is no real public API to do interaction with the storage outside of the js support.</p>\n<p>Please open an issue at github and we can work together to add some methods to support your case (and maybe some documentation also).</p>\n"},{"tags":[],"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689355416,"creation_date":1689355416,"answer_id":76689958,"question_id":76677648,"body_markdown":"Starting with version 3.4.0 there is a documented (https://www.htmlunit.org/details.html#Local.2FSession_Storage) way to do this.\r\n\r\n    try (WebClient webClient = new WebClient()) {\r\n\r\n        // get the local storage for the url\r\n        // the url has to match the page url you will load later\r\n        final Map&lt;String, String&gt; localStorage = webClient.getStorageHolder().getLocalStorage(url);\r\n\r\n\r\n        // place some data in the session storage\r\n        localStorage.put(&quot;myKey&quot;, &quot;myData&quot;);\r\n\r\n        // load the page that consumes the session storage data\r\n        webClient.getPage(url);\r\n\r\n        // make sure the new data are in\r\n        assertEquals(&quot;myNewData&quot;, localStorage.get(&quot;myNewKey&quot;));\r\n    }\r\n\r\n(Btw the latest 3.4.0-SNAPSHOT already constains this) \r\n","title":"How to load a &quot;local storage&quot; value to HtmlUnit web client?","body":"<p>Starting with version 3.4.0 there is a documented (<a href=\"https://www.htmlunit.org/details.html#Local.2FSession_Storage\" rel=\"nofollow noreferrer\">https://www.htmlunit.org/details.html#Local.2FSession_Storage</a>) way to do this.</p>\n<pre><code>try (WebClient webClient = new WebClient()) {\n\n    // get the local storage for the url\n    // the url has to match the page url you will load later\n    final Map&lt;String, String&gt; localStorage = webClient.getStorageHolder().getLocalStorage(url);\n\n\n    // place some data in the session storage\n    localStorage.put(&quot;myKey&quot;, &quot;myData&quot;);\n\n    // load the page that consumes the session storage data\n    webClient.getPage(url);\n\n    // make sure the new data are in\n    assertEquals(&quot;myNewData&quot;, localStorage.get(&quot;myNewKey&quot;));\n}\n</code></pre>\n<p>(Btw the latest 3.4.0-SNAPSHOT already constains this)</p>\n"}],"owner":{"account_id":412334,"reputation":33758,"user_id":785349,"accept_rate":94,"display_name":"quarks"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76689958,"answer_count":2,"score":0,"last_activity_date":1689355416,"creation_date":1689238924,"question_id":76677648,"body_markdown":"I&#39;m trying to load a *local storage* value into the HtmlUnit web client before it loads a specific website:\r\n\r\n```\r\nHtmlPage initialPage = webClient.getPage(url);\r\n        if (httpHeadersSpec != null &amp;&amp; httpHeadersSpec.getLocal_storage() != null) {\r\n            for (StorageItemSpec item : httpHeadersSpec.getLocal_storage()) {\r\n                initialPage.executeJavaScript(\r\n                        &quot;localStorage.setItem(&#39;&quot; + item.getKey() + &quot;&#39;, &#39;&quot; + item.getValue() + &quot;&#39;);&quot;);\r\n            }\r\n        }\r\n\r\nHtmlPage page = webClient.getPage(url);\r\nwebClient.waitForBackgroundJavaScriptStartingBefore(3000);\r\nURL baseUrl = page.getFullyQualifiedUrl(page.getBaseURI());\r\n```\r\n\r\nThe problems are:\r\n\r\n 1. How do I check if the local storage value is loaded? \r\n 2. What is the correct approach to load a browser&#39;s local storage value to HtmlUnit before loading a page? ","title":"How to load a &quot;local storage&quot; value to HtmlUnit web client?","body":"<p>I'm trying to load a <em>local storage</em> value into the HtmlUnit web client before it loads a specific website:</p>\n<pre><code>HtmlPage initialPage = webClient.getPage(url);\n        if (httpHeadersSpec != null &amp;&amp; httpHeadersSpec.getLocal_storage() != null) {\n            for (StorageItemSpec item : httpHeadersSpec.getLocal_storage()) {\n                initialPage.executeJavaScript(\n                        &quot;localStorage.setItem('&quot; + item.getKey() + &quot;', '&quot; + item.getValue() + &quot;');&quot;);\n            }\n        }\n\nHtmlPage page = webClient.getPage(url);\nwebClient.waitForBackgroundJavaScriptStartingBefore(3000);\nURL baseUrl = page.getFullyQualifiedUrl(page.getBaseURI());\n</code></pre>\n<p>The problems are:</p>\n<ol>\n<li>How do I check if the local storage value is loaded?</li>\n<li>What is the correct approach to load a browser's local storage value to HtmlUnit before loading a page?</li>\n</ol>\n"},{"tags":["java","scala","playframework"],"comments":[{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":1,"creation_date":1689288404,"post_id":76683239,"comment_id":135196299,"body_markdown":"Could you share your build gradle? Or at least a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example)? Also not sure if it will be possible to use jdk 19 with play framework. They added [experimental support for jdk 17 in play 2.8](https://github.com/playframework/playframework/releases/tag/2.8.15) and it will be stable for play 2.9","body":"Could you share your build gradle? Or at least a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? Also not sure if it will be possible to use jdk 19 with play framework. They added <a href=\"https://github.com/playframework/playframework/releases/tag/2.8.15\" rel=\"nofollow noreferrer\">experimental support for jdk 17 in play 2.8</a> and it will be stable for play 2.9"},{"owner":{"account_id":1021670,"reputation":479,"user_id":1031846,"accept_rate":83,"display_name":"raul782"},"score":0,"creation_date":1689299076,"post_id":76683239,"comment_id":135197202,"body_markdown":"I actually git clone the xef repo and tried to build it. The reason I wanted to do that is because,  I was running a project with play(from source) and xef, which worked just fine, but I was getting some issues with the prompts, hence, I wanted to dive deeper into Xef source code, and that’s why I faced this issue, because I wanted to build it from source.","body":"I actually git clone the xef repo and tried to build it. The reason I wanted to do that is because,  I was running a project with play(from source) and xef, which worked just fine, but I was getting some issues with the prompts, hence, I wanted to dive deeper into Xef source code, and that’s why I faced this issue, because I wanted to build it from source."},{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":1,"creation_date":1689349347,"post_id":76683239,"comment_id":135205708,"body_markdown":"Instead of follow the suggestion in the question about how to install missing dependency in sdkman, have you tried what sdkman says in its docs about [how to install a local version](https://sdkman.io/usage#localversion). Maybe that could help with the problem of not finding a local install.","body":"Instead of follow the suggestion in the question about how to install missing dependency in sdkman, have you tried what sdkman says in its docs about <a href=\"https://sdkman.io/usage#localversion\" rel=\"nofollow noreferrer\">how to install a local version</a>. Maybe that could help with the problem of not finding a local install."},{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":1,"creation_date":1689349487,"post_id":76683239,"comment_id":135205746,"body_markdown":"As I said before, without a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example) is hard to guess. please edit your post trying to detail what were the steps yo followed to get there and share how your `build.gradle` looks like","body":"As I said before, without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> is hard to guess. please edit your post trying to detail what were the steps yo followed to get there and share how your <code>build.gradle</code> looks like"},{"owner":{"account_id":1021670,"reputation":479,"user_id":1031846,"accept_rate":83,"display_name":"raul782"},"score":0,"creation_date":1689354083,"post_id":76683239,"comment_id":135206726,"body_markdown":"Thanks a lot @Gast&#243;nSchabas Installing the local version fixed it. I didn&#39;t read the docs for a local installation :/","body":"Thanks a lot @Gast&#243;nSchabas Installing the local version fixed it. I didn&#39;t read the docs for a local installation :/"}],"answers":[{"tags":[],"owner":{"account_id":1021670,"reputation":479,"user_id":1031846,"accept_rate":83,"display_name":"raul782"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689354811,"creation_date":1689354811,"answer_id":76689890,"question_id":76683239,"body_markdown":"Thanks to @Gast&#243;nSchabas for helping me in the comments.\r\n\r\nSo in summary, I cloned the repository\r\n\r\n    git clone git@github.com:xebia-functional/xef.git\r\n    cd xef\r\n    ./gradlew build\r\n\r\nPretty much I needed to download the gz file from adoptium and then install it locally using the `sdk` command:\r\n\r\n\r\n    sdk install java 19.0.2-tem ~/Downloads/jdk-19.0.2+7/Contents/Home\r\n\r\nI also needed to install java 11:\r\n\r\n    sdk install java 11.0.19-tem\r\n\r\nAnd finally:\r\n\r\n    ./gradlew build --stacktrace\r\n\r\nWorked like a charm.\r\n","title":"Building Xef with Java 19 fails","body":"<p>Thanks to @GastónSchabas for helping me in the comments.</p>\n<p>So in summary, I cloned the repository</p>\n<pre><code>git clone git@github.com:xebia-functional/xef.git\ncd xef\n./gradlew build\n</code></pre>\n<p>Pretty much I needed to download the gz file from adoptium and then install it locally using the <code>sdk</code> command:</p>\n<pre><code>sdk install java 19.0.2-tem ~/Downloads/jdk-19.0.2+7/Contents/Home\n</code></pre>\n<p>I also needed to install java 11:</p>\n<pre><code>sdk install java 11.0.19-tem\n</code></pre>\n<p>And finally:</p>\n<pre><code>./gradlew build --stacktrace\n</code></pre>\n<p>Worked like a charm.</p>\n"}],"owner":{"account_id":1021670,"reputation":479,"user_id":1031846,"accept_rate":83,"display_name":"raul782"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76689890,"answer_count":1,"score":0,"last_activity_date":1689355179,"creation_date":1689282366,"question_id":76683239,"body_markdown":"I&#39;m integrating Xef with the latest snapshot of Playframework that supports scala 3.3 and I bumped into an issue, so I went and git cloned Xef.ai repo and I started getting issues by trying to build from source the Xef project.\r\n\r\n    git clone git@github.com:xebia-functional/xef.git\r\n    cd xef\r\n    ./gradlew build --stacktrace\r\n\r\n\r\nI&#39;m using sdkman to manage my multiple java versions.\r\n\r\nHowever, I&#39;ve noticed that `sdk ls java` doesn&#39;t have java 19.\r\nSo I tried to build Xef with java 20, but It looks like the project needs to be upgraded to Kotlin 1.9 so that target is available. Given that&#39;s a bigger lift.\r\nSo I downloaded java 19 from https://adoptium.net/temurin/releases/?version=19\r\n\r\nI had to follow this SO https://stackoverflow.com/questions/55809928/sdkman-is-missing-a-specific-java-version to accomplish my goal.\r\n\r\nBut now I&#39;m facing the following issue, I&#39;m kind of new to Kotlin, my PATH is correctly setup: /Users/raul/.sdkman/candidates/java/19.0.2-tem/bin, I wonder what else is needed, will keep looking;\r\n\r\n    ./gradlew build\r\n    Type-safe project accessors is an incubating feature.\r\n\r\n    &gt; Configure project :kotlin-loom\r\n    Kotlin DSL property assignment is an incubating feature.\r\n\r\n    &gt; Configure project :xef-scala\r\n    signing.keyId Gradle property and SIGNING_KEY_ID environment variable are missing\r\n    signing.key Gradle property and SIGNING_KEY environment variable are missing\r\n    signing.passphrase Gradle property and SIGNING_KEY_PASSPHRASE environment variable are missing\r\n\r\n    &gt; Configure project :xef-scala-cats\r\n    signing.keyId Gradle property and SIGNING_KEY_ID environment variable are missing\r\n    signing.key Gradle property and SIGNING_KEY environment variable are missing\r\n    signing.passphrase Gradle property and SIGNING_KEY_PASSPHRASE environment variable are missing\r\n    Path for java installation &#39;/Users/raul/.sdkman/candidates/java/19.0.2-tem/Contents/Home&#39; (SDKMAN!) does not contain a java executable\r\n    Path for java installation &#39;/Users/raul/.sdkman/candidates/java/19.0.2-tem/Contents/Home&#39; (Current JVM) does not contain a java executable\r\n    Path for java installation &#39;/Users/raul/.sdkman/candidates/java/19.0.2-tem/Contents/Home&#39; (SDKMAN!) does not contain a java executable\r\n\r\n    FAILURE: Build failed with an exception.\r\n\r\n    * What went wrong:\r\n    Could not determine the dependencies of task &#39;:kotlin-loom:compileKotlin&#39;.\r\n    &gt; No matching toolchains found for requested specification: {languageVersion=19, vendor=any, implementation=vendor-specific}.\r\n    &gt; No locally installed toolchains match (see https://docs.gradle.org/8.1/userguide/toolchains.html#sec:auto_detection) and toolchain download repositories have not been configured (see https://docs.gradle.org/8.1/userguide/toolchains.html#sub:download_repositories).\r\n\r\n    * Try:\r\n    &gt; Run with --info or --debug option to get more log output.\r\n    &gt; Run with --scan to get full insights.\r\n\r\n        * Exception is:\r\n      org.gradle.api.internal.tasks.TaskDependencyResolveException: Could not determine the dependencies of task &#39;:kotlin-loom:compileKotlin&#39;.\r\n      at org.gradle.api.internal.tasks.CachingTaskDependencyResolveContext.getDependencies(CachingTaskDependencyResolveContext.java:68)\r\n      at org.gradle.execution.plan.TaskDependencyResolver.resolveDependenciesFor(TaskDependencyResolver.java:49)\r\n      at org.gradle.execution.plan.LocalTaskNode.getDependencies(LocalTaskNode.java:148)\r\n      at org.gradle.execution.plan.LocalTaskNode.resolveDependencies(LocalTaskNode.java:122)\r\n      at org.gradle.execution.plan.DefaultExecutionPlan.discoverNodeRelationships(DefaultExecutionPlan.java:184)\r\n      at org.gradle.execution.plan.DefaultExecutionPlan.doAddEntryNodes(DefaultExecutionPlan.java:156)\r\n      at org.gradle.execution.plan.DefaultExecutionPlan.addEntryTasks(DefaultExecutionPlan.java:131)\r\n      at org.gradle.execution.plan.DefaultExecutionPlan.addEntryTasks(DefaultExecutionPlan.java:123)\r\n      at org.gradle.execution.TaskNameResolvingBuildTaskScheduler.scheduleRequestedTasks(TaskNameResolvingBuildTaskScheduler.java:53)\r\n      at org.gradle.execution.DefaultTasksBuildTaskScheduler.scheduleRequestedTasks(DefaultTasksBuildTaskScheduler.java:72)\r\n      at org.gradle.initialization.DefaultTaskExecutionPreparer.lambda$scheduleRequestedTasks$0(DefaultTaskExecutionPreparer.java:46)\r\n      at org.gradle.internal.Factories$1.create(Factories.java:31)\r\n      at org.gradle.internal.work.DefaultWorkerLeaseService.withReplacedLocks(DefaultWorkerLeaseService.java:345)\r\n      at org.gradle.api.internal.project.DefaultProjectStateRegistry$DefaultBuildProjectRegistry.withMutableStateOfAllProjects(DefaultProjectStateRegistry.java:228)\r\n      at org.gradle.api.internal.project.DefaultProjectStateRegistry$DefaultBuildProjectRegistry.withMutableStateOfAllProjects(DefaultProjectStateRegistry.java:221)\r\n      at org.gradle.initialization.DefaultTaskExecutionPreparer.scheduleRequestedTasks(DefaultTaskExecutionPreparer.java:45)\r\n      at org.gradle.initialization.VintageBuildModelController.lambda$scheduleRequestedTasks$0(VintageBuildModelController.java:76)\r\n      at org.gradle.internal.model.StateTransitionController.lambda$inState$1(StateTransitionController.java:99)\r\n      at org.gradle.internal.model.StateTransitionController.lambda$inState$2(StateTransitionController.java:114)\r\n      at org.gradle.internal.work.DefaultSynchronizer.withLock(DefaultSynchronizer.java:44)\r\n      at org.gradle.internal.model.StateTransitionController.inState(StateTransitionController.java:110)\r\n      at org.gradle.internal.model.StateTransitionController.inState(StateTransitionController.java:98)\r\n      at org.gradle.initialization.VintageBuildModelController.scheduleRequestedTasks(VintageBuildModelController.java:76)\r\n      at org.gradle.internal.build.DefaultBuildLifecycleController$DefaultWorkGraphBuilder.addRequestedTasks(DefaultBuildLifecycleController.java:282)\r\n      at org.gradle.internal.buildtree.DefaultBuildTreeWorkPreparer.lambda$scheduleRequestedTasks$0(DefaultBuildTreeWorkPreparer.java:38)\r\n      at org.gradle.internal.build.DefaultBuildLifecycleController.lambda$populateWorkGraph$7(DefaultBuildLifecycleController.java:178)\r\n      at org.gradle.internal.build.DefaultBuildWorkPreparer.populateWorkGraph(DefaultBuildWorkPreparer.java:42)\r\n      at org.gradle.internal.build.BuildOperationFiringBuildWorkPreparer$PopulateWorkGraph.populateTaskGraph(BuildOperationFiringBuildWorkPreparer.java:115)\r\n      at org.gradle.internal.build.BuildOperationFiringBuildWorkPreparer$PopulateWorkGraph.run(BuildOperationFiringBuildWorkPreparer.java:101)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)\r\n      at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)\r\n      at org.gradle.internal.build.BuildOperationFiringBuildWorkPreparer.populateWorkGraph(BuildOperationFiringBuildWorkPreparer.java:74)\r\n      at org.gradle.internal.build.DefaultBuildLifecycleController.lambda$populateWorkGraph$8(DefaultBuildLifecycleController.java:178)\r\n      at org.gradle.internal.model.StateTransitionController.lambda$inState$1(StateTransitionController.java:99)\r\n      at org.gradle.internal.model.StateTransitionController.lambda$inState$2(StateTransitionController.java:114)\r\n      at org.gradle.internal.work.DefaultSynchronizer.withLock(DefaultSynchronizer.java:44)\r\n      at org.gradle.internal.model.StateTransitionController.inState(StateTransitionController.java:110)\r\n      at org.gradle.internal.model.StateTransitionController.inState(StateTransitionController.java:98)\r\n      at org.gradle.internal.build.DefaultBuildLifecycleController.populateWorkGraph(DefaultBuildLifecycleController.java:178)\r\n      at org.gradle.internal.build.DefaultBuildWorkGraphController$DefaultBuildWorkGraph.populateWorkGraph(DefaultBuildWorkGraphController.java:167)\r\n      at org.gradle.composite.internal.DefaultBuildController.populateWorkGraph(DefaultBuildController.java:73)\r\n      at org.gradle.composite.internal.DefaultIncludedBuildTaskGraph$DefaultBuildTreeWorkGraphBuilder.withWorkGraph(DefaultIncludedBuildTaskGraph.java:150)\r\n      at org.gradle.internal.buildtree.DefaultBuildTreeWorkPreparer.lambda$scheduleRequestedTasks$1(DefaultBuildTreeWorkPreparer.java:38)\r\n      at org.gradle.composite.internal.DefaultIncludedBuildTaskGraph$DefaultBuildTreeWorkGraph$1.run(DefaultIncludedBuildTaskGraph.java:197)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)\r\n      at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)\r\n      at org.gradle.composite.internal.DefaultIncludedBuildTaskGraph$DefaultBuildTreeWorkGraph.scheduleWork(DefaultIncludedBuildTaskGraph.java:192)\r\n      at org.gradle.internal.buildtree.DefaultBuildTreeWorkPreparer.scheduleRequestedTasks(DefaultBuildTreeWorkPreparer.java:37)\r\n      at org.gradle.configurationcache.VintageBuildTreeWorkController$scheduleAndRunRequestedTasks$1.apply(VintageBuildTreeWorkController.kt:36)\r\n      at org.gradle.configurationcache.VintageBuildTreeWorkController$scheduleAndRunRequestedTasks$1.apply(VintageBuildTreeWorkController.kt:35)\r\n      at org.gradle.composite.internal.DefaultIncludedBuildTaskGraph.withNewWorkGraph(DefaultIncludedBuildTaskGraph.java:109)\r\n      at org.gradle.configurationcache.VintageBuildTreeWorkController.scheduleAndRunRequestedTasks(VintageBuildTreeWorkController.kt:35)\r\n      at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.lambda$scheduleAndRunTasks$1(DefaultBuildTreeLifecycleController.java:68)\r\n      at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.lambda$runBuild$4(DefaultBuildTreeLifecycleController.java:98)\r\n      at org.gradle.internal.model.StateTransitionController.lambda$transition$6(StateTransitionController.java:169)\r\n      at org.gradle.internal.model.StateTransitionController.doTransition(StateTransitionController.java:266)\r\n      at org.gradle.internal.model.StateTransitionController.lambda$transition$7(StateTransitionController.java:169)\r\n      at org.gradle.internal.work.DefaultSynchronizer.withLock(DefaultSynchronizer.java:44)\r\n      at org.gradle.internal.model.StateTransitionController.transition(StateTransitionController.java:169)\r\n      at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.runBuild(DefaultBuildTreeLifecycleController.java:95)\r\n      at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.scheduleAndRunTasks(DefaultBuildTreeLifecycleController.java:68)\r\n      at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.scheduleAndRunTasks(DefaultBuildTreeLifecycleController.java:63)\r\n      at org.gradle.tooling.internal.provider.ExecuteBuildActionRunner.run(ExecuteBuildActionRunner.java:31)\r\n      at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\r\n      at org.gradle.internal.buildtree.ProblemReportingBuildActionRunner.run(ProblemReportingBuildActionRunner.java:49)\r\n      at org.gradle.launcher.exec.BuildOutcomeReportingBuildActionRunner.run(BuildOutcomeReportingBuildActionRunner.java:65)\r\n      at org.gradle.tooling.internal.provider.FileSystemWatchingBuildActionRunner.run(FileSystemWatchingBuildActionRunner.java:140)\r\n      at org.gradle.launcher.exec.BuildCompletionNotifyingBuildActionRunner.run(BuildCompletionNotifyingBuildActionRunner.java:41)\r\n      at org.gradle.launcher.exec.RootBuildLifecycleBuildActionExecutor.lambda$execute$0(RootBuildLifecycleBuildActionExecutor.java:40)\r\n      at org.gradle.composite.internal.DefaultRootBuildState.run(DefaultRootBuildState.java:122)\r\n      at org.gradle.launcher.exec.RootBuildLifecycleBuildActionExecutor.execute(RootBuildLifecycleBuildActionExecutor.java:40)\r\n      at org.gradle.internal.buildtree.InitDeprecationLoggingActionExecutor.execute(InitDeprecationLoggingActionExecutor.java:58)\r\n      at org.gradle.internal.buildtree.DefaultBuildTreeContext.execute(DefaultBuildTreeContext.java:40)\r\n      at org.gradle.launcher.exec.BuildTreeLifecycleBuildActionExecutor.lambda$execute$0(BuildTreeLifecycleBuildActionExecutor.java:65)\r\n      at org.gradle.internal.buildtree.BuildTreeState.run(BuildTreeState.java:53)\r\n      at org.gradle.launcher.exec.BuildTreeLifecycleBuildActionExecutor.execute(BuildTreeLifecycleBuildActionExecutor.java:65)\r\n      at org.gradle.launcher.exec.RunAsBuildOperationBuildActionExecutor$3.call(RunAsBuildOperationBuildActionExecutor.java:61)\r\n      at org.gradle.launcher.exec.RunAsBuildOperationBuildActionExecutor$3.call(RunAsBuildOperationBuildActionExecutor.java:57)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n      at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\r\n      at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\r\n      at org.gradle.launcher.exec.RunAsBuildOperationBuildActionExecutor.execute(RunAsBuildOperationBuildActionExecutor.java:57)\r\n      at org.gradle.launcher.exec.RunAsWorkerThreadBuildActionExecutor.lambda$execute$0(RunAsWorkerThreadBuildActionExecutor.java:36)\r\n      at org.gradle.internal.work.DefaultWorkerLeaseService.withLocks(DefaultWorkerLeaseService.java:249)\r\n      at org.gradle.internal.work.DefaultWorkerLeaseService.runAsWorkerThread(DefaultWorkerLeaseService.java:109)\r\n      at org.gradle.launcher.exec.RunAsWorkerThreadBuildActionExecutor.execute(RunAsWorkerThreadBuildActionExecutor.java:36)\r\n      at org.gradle.tooling.internal.provider.continuous.ContinuousBuildActionExecutor.execute(ContinuousBuildActionExecutor.java:110)\r\n      at org.gradle.tooling.internal.provider.SubscribableBuildActionExecutor.execute(SubscribableBuildActionExecutor.java:64)\r\n      at org.gradle.internal.session.DefaultBuildSessionContext.execute(DefaultBuildSessionContext.java:46)\r\n      at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter$ActionImpl.apply(BuildSessionLifecycleBuildActionExecuter.java:100)\r\n      at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter$ActionImpl.apply(BuildSessionLifecycleBuildActionExecuter.java:88)\r\n      at org.gradle.internal.session.BuildSessionState.run(BuildSessionState.java:69)\r\n      at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter.execute(BuildSessionLifecycleBuildActionExecuter.java:62)\r\n      at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter.execute(BuildSessionLifecycleBuildActionExecuter.java:41)\r\n      at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:64)\r\n      at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:32)\r\n      at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:50)\r\n      at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:38)\r\n      at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:47)\r\n      at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:31)\r\n      at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:65)\r\n      at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\r\n      at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n      at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:39)\r\n      at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n      at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:29)\r\n      at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n      at org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:35)\r\n      at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n      at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.create(ForwardClientInput.java:78)\r\n      at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.create(ForwardClientInput.java:75)\r\n      at org.gradle.util.internal.Swapper.swap(Swapper.java:38)\r\n      at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:75)\r\n      at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n      at org.gradle.launcher.daemon.server.exec.LogAndCheckHealth.execute(LogAndCheckHealth.java:64)\r\n      at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n      at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:63)\r\n      at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\r\n      at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n      at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:84)\r\n      at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\r\n      at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\r\n      at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:52)\r\n      at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:297)\r\n      at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\n      at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:49)\r\n      Caused by: org.gradle.jvm.toolchain.internal.NoToolchainAvailableException: No matching toolchains found for requested specification: {languageVersion=19, vendor=any, implementation=vendor-specific}.\r\n      at org.gradle.jvm.toolchain.internal.JavaToolchainQueryService.downloadToolchain(JavaToolchainQueryService.java:167)\r\n      at org.gradle.jvm.toolchain.internal.JavaToolchainQueryService.query(JavaToolchainQueryService.java:143)\r\n      at org.gradle.jvm.toolchain.internal.JavaToolchainQueryService.lambda$resolveToolchain$1(JavaToolchainQueryService.java:109)\r\n      at org.gradle.jvm.toolchain.internal.JavaToolchainQueryService.resolveToolchain(JavaToolchainQueryService.java:107)\r\n      at org.gradle.jvm.toolchain.internal.JavaToolchainQueryService.lambda$findMatchingToolchain$0(JavaToolchainQueryService.java:88)\r\n      at org.gradle.api.internal.provider.DefaultProvider.calculateOwnValue(DefaultProvider.java:72)\r\n      at org.gradle.api.internal.provider.AbstractMinimalProvider.calculateValue(AbstractMinimalProvider.java:108)\r\n      at org.gradle.api.internal.provider.WithSideEffectProvider.calculateOwnValue(WithSideEffectProvider.java:54)\r\n      at org.gradle.api.internal.provider.AbstractMinimalProvider.calculateValue(AbstractMinimalProvider.java:108)\r\n      at org.gradle.api.internal.provider.TransformBackedProvider.calculateOwnValue(TransformBackedProvider.java:82)\r\n      at org.gradle.api.internal.provider.AbstractMinimalProvider.calculateValue(AbstractMinimalProvider.java:108)\r\n      at org.gradle.api.internal.provider.FlatMapProvider.calculateOwnValue(FlatMapProvider.java:50)\r\n      at org.gradle.api.internal.provider.AbstractMinimalProvider.calculateValue(AbstractMinimalProvider.java:108)\r\n      at org.gradle.api.internal.provider.TransformBackedProvider.calculateOwnValue(TransformBackedProvider.java:82)\r\n      at org.gradle.api.internal.provider.AbstractMinimalProvider.calculateValue(AbstractMinimalProvider.java:108)\r\n      at org.gradle.api.internal.provider.AbstractMinimalProvider.withFinalValue(AbstractMinimalProvider.java:164)\r\n      at org.gradle.api.internal.provider.DefaultProperty.finalValue(DefaultProperty.java:133)\r\n      at org.gradle.api.internal.provider.DefaultProperty.finalValue(DefaultProperty.java:26)\r\n      at org.gradle.api.internal.provider.AbstractProperty.finalizeNow(AbstractProperty.java:245)\r\n      at org.gradle.api.internal.provider.AbstractProperty.beforeRead(AbstractProperty.java:239)\r\n      at org.gradle.api.internal.provider.AbstractProperty.calculateOwnValue(AbstractProperty.java:135)\r\n      at org.gradle.api.internal.provider.AbstractMinimalProvider.getOrNull(AbstractMinimalProvider.java:98)\r\n      at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.lambda$walkNestedProvider$0(AbstractTypeMetadataWalker.java:142)\r\n      at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.walkNestedChild(AbstractTypeMetadataWalker.java:190)\r\n      at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.walkNestedProvider(AbstractTypeMetadataWalker.java:141)\r\n      at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.walkNestedProvider(AbstractTypeMetadataWalker.java:123)\r\n      at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker.walkNested(AbstractTypeMetadataWalker.java:60)\r\n      at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker.lambda$walkChildren$3(AbstractTypeMetadataWalker.java:85)\r\n      at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.walkNestedChild(AbstractTypeMetadataWalker.java:196)\r\n      at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.walkNestedChild(AbstractTypeMetadataWalker.java:177)\r\n      at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.walkNestedChild(AbstractTypeMetadataWalker.java:123)\r\n      at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker.lambda$walkChildren$4(AbstractTypeMetadataWalker.java:85)\r\n      at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker.walkChildren(AbstractTypeMetadataWalker.java:83)\r\n      at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker.walk(AbstractTypeMetadataWalker.java:53)\r\n      at org.gradle.internal.properties.bean.DefaultPropertyWalker.visitProperties(DefaultPropertyWalker.java:64)\r\n      at org.gradle.api.internal.tasks.TaskPropertyUtils.visitAnnotatedProperties(TaskPropertyUtils.java:58)\r\n      at org.gradle.api.internal.tasks.TaskPropertyUtils.visitProperties(TaskPropertyUtils.java:45)\r\n      at org.gradle.api.internal.tasks.TaskPropertyUtils.visitProperties(TaskPropertyUtils.java:35)\r\n      at org.gradle.api.internal.tasks.DefaultTaskInputs.visitDependencies(DefaultTaskInputs.java:195)\r\n      at org.gradle.api.internal.tasks.DefaultTaskDependency.visitDependencies(DefaultTaskDependency.java:112)\r\n      at org.gradle.api.internal.tasks.CachingTaskDependencyResolveContext$TaskGraphImpl.getNodeValues(CachingTaskDependencyResolveContext.java:103)\r\n      at org.gradle.internal.graph.CachingDirectedGraphWalker$GraphWithEmptyEdges.getNodeValues(CachingDirectedGraphWalker.java:213)\r\n      at org.gradle.internal.graph.CachingDirectedGraphWalker.doSearch(CachingDirectedGraphWalker.java:121)\r\n      at org.gradle.internal.graph.CachingDirectedGraphWalker.findValues(CachingDirectedGraphWalker.java:73)\r\n      at org.gradle.api.internal.tasks.CachingTaskDependencyResolveContext.getDependencies(CachingTaskDependencyResolveContext.java:66)\r\n      ... 142 more\r\n      Caused by: org.gradle.jvm.toolchain.internal.ToolchainDownloadFailedException: No locally installed toolchains match (see https://docs.gradle.org/8.1/userguide/toolchains.html#sec:auto_detection) and toolchain download repositories have not been configured (see https://docs.gradle.org/8.1/userguide/toolchains.html#sub:download_repositories).\r\n      at org.gradle.jvm.toolchain.internal.install.DefaultJavaToolchainProvisioningService.tryInstall(DefaultJavaToolchainProvisioningService.java:113)\r\n      at org.gradle.jvm.toolchain.internal.JavaToolchainQueryService.downloadToolchain(JavaToolchainQueryService.java:164)\r\n      ... 186 more\r\n    * Get more help at https://help.gradle.org\r\n\r\n    BUILD FAILED in 3s\r\n    10 actionable tasks: 10 up-to-date\r\n\r\n","title":"Building Xef with Java 19 fails","body":"<p>I'm integrating Xef with the latest snapshot of Playframework that supports scala 3.3 and I bumped into an issue, so I went and git cloned Xef.ai repo and I started getting issues by trying to build from source the Xef project.</p>\n<pre><code>git clone git@github.com:xebia-functional/xef.git\ncd xef\n./gradlew build --stacktrace\n</code></pre>\n<p>I'm using sdkman to manage my multiple java versions.</p>\n<p>However, I've noticed that <code>sdk ls java</code> doesn't have java 19.\nSo I tried to build Xef with java 20, but It looks like the project needs to be upgraded to Kotlin 1.9 so that target is available. Given that's a bigger lift.\nSo I downloaded java 19 from <a href=\"https://adoptium.net/temurin/releases/?version=19\" rel=\"nofollow noreferrer\">https://adoptium.net/temurin/releases/?version=19</a></p>\n<p>I had to follow this SO <a href=\"https://stackoverflow.com/questions/55809928/sdkman-is-missing-a-specific-java-version\">sdkman is missing a specific java version</a> to accomplish my goal.</p>\n<p>But now I'm facing the following issue, I'm kind of new to Kotlin, my PATH is correctly setup: /Users/raul/.sdkman/candidates/java/19.0.2-tem/bin, I wonder what else is needed, will keep looking;</p>\n<pre><code>./gradlew build\nType-safe project accessors is an incubating feature.\n\n&gt; Configure project :kotlin-loom\nKotlin DSL property assignment is an incubating feature.\n\n&gt; Configure project :xef-scala\nsigning.keyId Gradle property and SIGNING_KEY_ID environment variable are missing\nsigning.key Gradle property and SIGNING_KEY environment variable are missing\nsigning.passphrase Gradle property and SIGNING_KEY_PASSPHRASE environment variable are missing\n\n&gt; Configure project :xef-scala-cats\nsigning.keyId Gradle property and SIGNING_KEY_ID environment variable are missing\nsigning.key Gradle property and SIGNING_KEY environment variable are missing\nsigning.passphrase Gradle property and SIGNING_KEY_PASSPHRASE environment variable are missing\nPath for java installation '/Users/raul/.sdkman/candidates/java/19.0.2-tem/Contents/Home' (SDKMAN!) does not contain a java executable\nPath for java installation '/Users/raul/.sdkman/candidates/java/19.0.2-tem/Contents/Home' (Current JVM) does not contain a java executable\nPath for java installation '/Users/raul/.sdkman/candidates/java/19.0.2-tem/Contents/Home' (SDKMAN!) does not contain a java executable\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nCould not determine the dependencies of task ':kotlin-loom:compileKotlin'.\n&gt; No matching toolchains found for requested specification: {languageVersion=19, vendor=any, implementation=vendor-specific}.\n&gt; No locally installed toolchains match (see https://docs.gradle.org/8.1/userguide/toolchains.html#sec:auto_detection) and toolchain download repositories have not been configured (see https://docs.gradle.org/8.1/userguide/toolchains.html#sub:download_repositories).\n\n* Try:\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n\n    * Exception is:\n  org.gradle.api.internal.tasks.TaskDependencyResolveException: Could not determine the dependencies of task ':kotlin-loom:compileKotlin'.\n  at org.gradle.api.internal.tasks.CachingTaskDependencyResolveContext.getDependencies(CachingTaskDependencyResolveContext.java:68)\n  at org.gradle.execution.plan.TaskDependencyResolver.resolveDependenciesFor(TaskDependencyResolver.java:49)\n  at org.gradle.execution.plan.LocalTaskNode.getDependencies(LocalTaskNode.java:148)\n  at org.gradle.execution.plan.LocalTaskNode.resolveDependencies(LocalTaskNode.java:122)\n  at org.gradle.execution.plan.DefaultExecutionPlan.discoverNodeRelationships(DefaultExecutionPlan.java:184)\n  at org.gradle.execution.plan.DefaultExecutionPlan.doAddEntryNodes(DefaultExecutionPlan.java:156)\n  at org.gradle.execution.plan.DefaultExecutionPlan.addEntryTasks(DefaultExecutionPlan.java:131)\n  at org.gradle.execution.plan.DefaultExecutionPlan.addEntryTasks(DefaultExecutionPlan.java:123)\n  at org.gradle.execution.TaskNameResolvingBuildTaskScheduler.scheduleRequestedTasks(TaskNameResolvingBuildTaskScheduler.java:53)\n  at org.gradle.execution.DefaultTasksBuildTaskScheduler.scheduleRequestedTasks(DefaultTasksBuildTaskScheduler.java:72)\n  at org.gradle.initialization.DefaultTaskExecutionPreparer.lambda$scheduleRequestedTasks$0(DefaultTaskExecutionPreparer.java:46)\n  at org.gradle.internal.Factories$1.create(Factories.java:31)\n  at org.gradle.internal.work.DefaultWorkerLeaseService.withReplacedLocks(DefaultWorkerLeaseService.java:345)\n  at org.gradle.api.internal.project.DefaultProjectStateRegistry$DefaultBuildProjectRegistry.withMutableStateOfAllProjects(DefaultProjectStateRegistry.java:228)\n  at org.gradle.api.internal.project.DefaultProjectStateRegistry$DefaultBuildProjectRegistry.withMutableStateOfAllProjects(DefaultProjectStateRegistry.java:221)\n  at org.gradle.initialization.DefaultTaskExecutionPreparer.scheduleRequestedTasks(DefaultTaskExecutionPreparer.java:45)\n  at org.gradle.initialization.VintageBuildModelController.lambda$scheduleRequestedTasks$0(VintageBuildModelController.java:76)\n  at org.gradle.internal.model.StateTransitionController.lambda$inState$1(StateTransitionController.java:99)\n  at org.gradle.internal.model.StateTransitionController.lambda$inState$2(StateTransitionController.java:114)\n  at org.gradle.internal.work.DefaultSynchronizer.withLock(DefaultSynchronizer.java:44)\n  at org.gradle.internal.model.StateTransitionController.inState(StateTransitionController.java:110)\n  at org.gradle.internal.model.StateTransitionController.inState(StateTransitionController.java:98)\n  at org.gradle.initialization.VintageBuildModelController.scheduleRequestedTasks(VintageBuildModelController.java:76)\n  at org.gradle.internal.build.DefaultBuildLifecycleController$DefaultWorkGraphBuilder.addRequestedTasks(DefaultBuildLifecycleController.java:282)\n  at org.gradle.internal.buildtree.DefaultBuildTreeWorkPreparer.lambda$scheduleRequestedTasks$0(DefaultBuildTreeWorkPreparer.java:38)\n  at org.gradle.internal.build.DefaultBuildLifecycleController.lambda$populateWorkGraph$7(DefaultBuildLifecycleController.java:178)\n  at org.gradle.internal.build.DefaultBuildWorkPreparer.populateWorkGraph(DefaultBuildWorkPreparer.java:42)\n  at org.gradle.internal.build.BuildOperationFiringBuildWorkPreparer$PopulateWorkGraph.populateTaskGraph(BuildOperationFiringBuildWorkPreparer.java:115)\n  at org.gradle.internal.build.BuildOperationFiringBuildWorkPreparer$PopulateWorkGraph.run(BuildOperationFiringBuildWorkPreparer.java:101)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)\n  at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)\n  at org.gradle.internal.build.BuildOperationFiringBuildWorkPreparer.populateWorkGraph(BuildOperationFiringBuildWorkPreparer.java:74)\n  at org.gradle.internal.build.DefaultBuildLifecycleController.lambda$populateWorkGraph$8(DefaultBuildLifecycleController.java:178)\n  at org.gradle.internal.model.StateTransitionController.lambda$inState$1(StateTransitionController.java:99)\n  at org.gradle.internal.model.StateTransitionController.lambda$inState$2(StateTransitionController.java:114)\n  at org.gradle.internal.work.DefaultSynchronizer.withLock(DefaultSynchronizer.java:44)\n  at org.gradle.internal.model.StateTransitionController.inState(StateTransitionController.java:110)\n  at org.gradle.internal.model.StateTransitionController.inState(StateTransitionController.java:98)\n  at org.gradle.internal.build.DefaultBuildLifecycleController.populateWorkGraph(DefaultBuildLifecycleController.java:178)\n  at org.gradle.internal.build.DefaultBuildWorkGraphController$DefaultBuildWorkGraph.populateWorkGraph(DefaultBuildWorkGraphController.java:167)\n  at org.gradle.composite.internal.DefaultBuildController.populateWorkGraph(DefaultBuildController.java:73)\n  at org.gradle.composite.internal.DefaultIncludedBuildTaskGraph$DefaultBuildTreeWorkGraphBuilder.withWorkGraph(DefaultIncludedBuildTaskGraph.java:150)\n  at org.gradle.internal.buildtree.DefaultBuildTreeWorkPreparer.lambda$scheduleRequestedTasks$1(DefaultBuildTreeWorkPreparer.java:38)\n  at org.gradle.composite.internal.DefaultIncludedBuildTaskGraph$DefaultBuildTreeWorkGraph$1.run(DefaultIncludedBuildTaskGraph.java:197)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)\n  at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)\n  at org.gradle.composite.internal.DefaultIncludedBuildTaskGraph$DefaultBuildTreeWorkGraph.scheduleWork(DefaultIncludedBuildTaskGraph.java:192)\n  at org.gradle.internal.buildtree.DefaultBuildTreeWorkPreparer.scheduleRequestedTasks(DefaultBuildTreeWorkPreparer.java:37)\n  at org.gradle.configurationcache.VintageBuildTreeWorkController$scheduleAndRunRequestedTasks$1.apply(VintageBuildTreeWorkController.kt:36)\n  at org.gradle.configurationcache.VintageBuildTreeWorkController$scheduleAndRunRequestedTasks$1.apply(VintageBuildTreeWorkController.kt:35)\n  at org.gradle.composite.internal.DefaultIncludedBuildTaskGraph.withNewWorkGraph(DefaultIncludedBuildTaskGraph.java:109)\n  at org.gradle.configurationcache.VintageBuildTreeWorkController.scheduleAndRunRequestedTasks(VintageBuildTreeWorkController.kt:35)\n  at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.lambda$scheduleAndRunTasks$1(DefaultBuildTreeLifecycleController.java:68)\n  at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.lambda$runBuild$4(DefaultBuildTreeLifecycleController.java:98)\n  at org.gradle.internal.model.StateTransitionController.lambda$transition$6(StateTransitionController.java:169)\n  at org.gradle.internal.model.StateTransitionController.doTransition(StateTransitionController.java:266)\n  at org.gradle.internal.model.StateTransitionController.lambda$transition$7(StateTransitionController.java:169)\n  at org.gradle.internal.work.DefaultSynchronizer.withLock(DefaultSynchronizer.java:44)\n  at org.gradle.internal.model.StateTransitionController.transition(StateTransitionController.java:169)\n  at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.runBuild(DefaultBuildTreeLifecycleController.java:95)\n  at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.scheduleAndRunTasks(DefaultBuildTreeLifecycleController.java:68)\n  at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.scheduleAndRunTasks(DefaultBuildTreeLifecycleController.java:63)\n  at org.gradle.tooling.internal.provider.ExecuteBuildActionRunner.run(ExecuteBuildActionRunner.java:31)\n  at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\n  at org.gradle.internal.buildtree.ProblemReportingBuildActionRunner.run(ProblemReportingBuildActionRunner.java:49)\n  at org.gradle.launcher.exec.BuildOutcomeReportingBuildActionRunner.run(BuildOutcomeReportingBuildActionRunner.java:65)\n  at org.gradle.tooling.internal.provider.FileSystemWatchingBuildActionRunner.run(FileSystemWatchingBuildActionRunner.java:140)\n  at org.gradle.launcher.exec.BuildCompletionNotifyingBuildActionRunner.run(BuildCompletionNotifyingBuildActionRunner.java:41)\n  at org.gradle.launcher.exec.RootBuildLifecycleBuildActionExecutor.lambda$execute$0(RootBuildLifecycleBuildActionExecutor.java:40)\n  at org.gradle.composite.internal.DefaultRootBuildState.run(DefaultRootBuildState.java:122)\n  at org.gradle.launcher.exec.RootBuildLifecycleBuildActionExecutor.execute(RootBuildLifecycleBuildActionExecutor.java:40)\n  at org.gradle.internal.buildtree.InitDeprecationLoggingActionExecutor.execute(InitDeprecationLoggingActionExecutor.java:58)\n  at org.gradle.internal.buildtree.DefaultBuildTreeContext.execute(DefaultBuildTreeContext.java:40)\n  at org.gradle.launcher.exec.BuildTreeLifecycleBuildActionExecutor.lambda$execute$0(BuildTreeLifecycleBuildActionExecutor.java:65)\n  at org.gradle.internal.buildtree.BuildTreeState.run(BuildTreeState.java:53)\n  at org.gradle.launcher.exec.BuildTreeLifecycleBuildActionExecutor.execute(BuildTreeLifecycleBuildActionExecutor.java:65)\n  at org.gradle.launcher.exec.RunAsBuildOperationBuildActionExecutor$3.call(RunAsBuildOperationBuildActionExecutor.java:61)\n  at org.gradle.launcher.exec.RunAsBuildOperationBuildActionExecutor$3.call(RunAsBuildOperationBuildActionExecutor.java:57)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n  at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\n  at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\n  at org.gradle.launcher.exec.RunAsBuildOperationBuildActionExecutor.execute(RunAsBuildOperationBuildActionExecutor.java:57)\n  at org.gradle.launcher.exec.RunAsWorkerThreadBuildActionExecutor.lambda$execute$0(RunAsWorkerThreadBuildActionExecutor.java:36)\n  at org.gradle.internal.work.DefaultWorkerLeaseService.withLocks(DefaultWorkerLeaseService.java:249)\n  at org.gradle.internal.work.DefaultWorkerLeaseService.runAsWorkerThread(DefaultWorkerLeaseService.java:109)\n  at org.gradle.launcher.exec.RunAsWorkerThreadBuildActionExecutor.execute(RunAsWorkerThreadBuildActionExecutor.java:36)\n  at org.gradle.tooling.internal.provider.continuous.ContinuousBuildActionExecutor.execute(ContinuousBuildActionExecutor.java:110)\n  at org.gradle.tooling.internal.provider.SubscribableBuildActionExecutor.execute(SubscribableBuildActionExecutor.java:64)\n  at org.gradle.internal.session.DefaultBuildSessionContext.execute(DefaultBuildSessionContext.java:46)\n  at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter$ActionImpl.apply(BuildSessionLifecycleBuildActionExecuter.java:100)\n  at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter$ActionImpl.apply(BuildSessionLifecycleBuildActionExecuter.java:88)\n  at org.gradle.internal.session.BuildSessionState.run(BuildSessionState.java:69)\n  at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter.execute(BuildSessionLifecycleBuildActionExecuter.java:62)\n  at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter.execute(BuildSessionLifecycleBuildActionExecuter.java:41)\n  at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:64)\n  at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:32)\n  at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:50)\n  at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:38)\n  at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:47)\n  at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:31)\n  at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:65)\n  at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\n  at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n  at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:39)\n  at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n  at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:29)\n  at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n  at org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:35)\n  at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n  at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.create(ForwardClientInput.java:78)\n  at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.create(ForwardClientInput.java:75)\n  at org.gradle.util.internal.Swapper.swap(Swapper.java:38)\n  at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:75)\n  at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n  at org.gradle.launcher.daemon.server.exec.LogAndCheckHealth.execute(LogAndCheckHealth.java:64)\n  at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n  at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:63)\n  at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\n  at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n  at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:84)\n  at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\n  at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n  at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:52)\n  at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:297)\n  at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\n  at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:49)\n  Caused by: org.gradle.jvm.toolchain.internal.NoToolchainAvailableException: No matching toolchains found for requested specification: {languageVersion=19, vendor=any, implementation=vendor-specific}.\n  at org.gradle.jvm.toolchain.internal.JavaToolchainQueryService.downloadToolchain(JavaToolchainQueryService.java:167)\n  at org.gradle.jvm.toolchain.internal.JavaToolchainQueryService.query(JavaToolchainQueryService.java:143)\n  at org.gradle.jvm.toolchain.internal.JavaToolchainQueryService.lambda$resolveToolchain$1(JavaToolchainQueryService.java:109)\n  at org.gradle.jvm.toolchain.internal.JavaToolchainQueryService.resolveToolchain(JavaToolchainQueryService.java:107)\n  at org.gradle.jvm.toolchain.internal.JavaToolchainQueryService.lambda$findMatchingToolchain$0(JavaToolchainQueryService.java:88)\n  at org.gradle.api.internal.provider.DefaultProvider.calculateOwnValue(DefaultProvider.java:72)\n  at org.gradle.api.internal.provider.AbstractMinimalProvider.calculateValue(AbstractMinimalProvider.java:108)\n  at org.gradle.api.internal.provider.WithSideEffectProvider.calculateOwnValue(WithSideEffectProvider.java:54)\n  at org.gradle.api.internal.provider.AbstractMinimalProvider.calculateValue(AbstractMinimalProvider.java:108)\n  at org.gradle.api.internal.provider.TransformBackedProvider.calculateOwnValue(TransformBackedProvider.java:82)\n  at org.gradle.api.internal.provider.AbstractMinimalProvider.calculateValue(AbstractMinimalProvider.java:108)\n  at org.gradle.api.internal.provider.FlatMapProvider.calculateOwnValue(FlatMapProvider.java:50)\n  at org.gradle.api.internal.provider.AbstractMinimalProvider.calculateValue(AbstractMinimalProvider.java:108)\n  at org.gradle.api.internal.provider.TransformBackedProvider.calculateOwnValue(TransformBackedProvider.java:82)\n  at org.gradle.api.internal.provider.AbstractMinimalProvider.calculateValue(AbstractMinimalProvider.java:108)\n  at org.gradle.api.internal.provider.AbstractMinimalProvider.withFinalValue(AbstractMinimalProvider.java:164)\n  at org.gradle.api.internal.provider.DefaultProperty.finalValue(DefaultProperty.java:133)\n  at org.gradle.api.internal.provider.DefaultProperty.finalValue(DefaultProperty.java:26)\n  at org.gradle.api.internal.provider.AbstractProperty.finalizeNow(AbstractProperty.java:245)\n  at org.gradle.api.internal.provider.AbstractProperty.beforeRead(AbstractProperty.java:239)\n  at org.gradle.api.internal.provider.AbstractProperty.calculateOwnValue(AbstractProperty.java:135)\n  at org.gradle.api.internal.provider.AbstractMinimalProvider.getOrNull(AbstractMinimalProvider.java:98)\n  at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.lambda$walkNestedProvider$0(AbstractTypeMetadataWalker.java:142)\n  at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.walkNestedChild(AbstractTypeMetadataWalker.java:190)\n  at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.walkNestedProvider(AbstractTypeMetadataWalker.java:141)\n  at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.walkNestedProvider(AbstractTypeMetadataWalker.java:123)\n  at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker.walkNested(AbstractTypeMetadataWalker.java:60)\n  at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker.lambda$walkChildren$3(AbstractTypeMetadataWalker.java:85)\n  at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.walkNestedChild(AbstractTypeMetadataWalker.java:196)\n  at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.walkNestedChild(AbstractTypeMetadataWalker.java:177)\n  at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker$InstanceTypeMetadataWalker.walkNestedChild(AbstractTypeMetadataWalker.java:123)\n  at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker.lambda$walkChildren$4(AbstractTypeMetadataWalker.java:85)\n  at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker.walkChildren(AbstractTypeMetadataWalker.java:83)\n  at org.gradle.internal.properties.annotations.AbstractTypeMetadataWalker.walk(AbstractTypeMetadataWalker.java:53)\n  at org.gradle.internal.properties.bean.DefaultPropertyWalker.visitProperties(DefaultPropertyWalker.java:64)\n  at org.gradle.api.internal.tasks.TaskPropertyUtils.visitAnnotatedProperties(TaskPropertyUtils.java:58)\n  at org.gradle.api.internal.tasks.TaskPropertyUtils.visitProperties(TaskPropertyUtils.java:45)\n  at org.gradle.api.internal.tasks.TaskPropertyUtils.visitProperties(TaskPropertyUtils.java:35)\n  at org.gradle.api.internal.tasks.DefaultTaskInputs.visitDependencies(DefaultTaskInputs.java:195)\n  at org.gradle.api.internal.tasks.DefaultTaskDependency.visitDependencies(DefaultTaskDependency.java:112)\n  at org.gradle.api.internal.tasks.CachingTaskDependencyResolveContext$TaskGraphImpl.getNodeValues(CachingTaskDependencyResolveContext.java:103)\n  at org.gradle.internal.graph.CachingDirectedGraphWalker$GraphWithEmptyEdges.getNodeValues(CachingDirectedGraphWalker.java:213)\n  at org.gradle.internal.graph.CachingDirectedGraphWalker.doSearch(CachingDirectedGraphWalker.java:121)\n  at org.gradle.internal.graph.CachingDirectedGraphWalker.findValues(CachingDirectedGraphWalker.java:73)\n  at org.gradle.api.internal.tasks.CachingTaskDependencyResolveContext.getDependencies(CachingTaskDependencyResolveContext.java:66)\n  ... 142 more\n  Caused by: org.gradle.jvm.toolchain.internal.ToolchainDownloadFailedException: No locally installed toolchains match (see https://docs.gradle.org/8.1/userguide/toolchains.html#sec:auto_detection) and toolchain download repositories have not been configured (see https://docs.gradle.org/8.1/userguide/toolchains.html#sub:download_repositories).\n  at org.gradle.jvm.toolchain.internal.install.DefaultJavaToolchainProvisioningService.tryInstall(DefaultJavaToolchainProvisioningService.java:113)\n  at org.gradle.jvm.toolchain.internal.JavaToolchainQueryService.downloadToolchain(JavaToolchainQueryService.java:164)\n  ... 186 more\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 3s\n10 actionable tasks: 10 up-to-date\n</code></pre>\n"},{"tags":["java","android","kotlin"],"answers":[{"tags":[],"owner":{"account_id":5902223,"reputation":700,"user_id":4645332,"display_name":"SepJaPro2.4"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1689354459,"creation_date":1689354459,"answer_id":76689851,"question_id":76689345,"body_markdown":"You can measure the data usage of an app during a session programmatically in Android using Kotlin. Android provides the TrafficStats class, which allows you to monitor the network traffic statistics for your app. You can use this class to measure the data usage of both Wi-Fi and mobile data.\r\n\r\nHere&#39;s an example of how you can use TrafficStats to measure data usage:\r\n\r\n    import android.net.TrafficStats\r\n\r\n    // Start measuring data usage\r\n    val initialTxBytes = TrafficStats.getTotalTxBytes()\r\n    val initialRxBytes = TrafficStats.getTotalRxBytes()\r\n    \r\n    // Perform your app operations here\r\n    \r\n    // End measuring data usage\r\n    val finalTxBytes = TrafficStats.getTotalTxBytes()\r\n    val finalRxBytes = TrafficStats.getTotalRxBytes()\r\n    \r\n    // Calculate the data usage\r\n    val totalTxBytes = finalTxBytes - initialTxBytes\r\n    val totalRxBytes = finalRxBytes - initialRxBytes\r\n    val totalBytes = totalTxBytes + totalRxBytes\r\n    \r\n    // Convert bytes to a human-readable format (e.g., MB, GB)\r\n    val formattedTotalBytes = \r\n    android.text.format.Formatter.formatFileSize(context, totalBytes)\r\n    \r\n    // Print or display the total data usage\r\n    Log.d(&quot;Data Usage&quot;, &quot;Total Data Usage: $formattedTotalBytes&quot;)\r\n\r\nIn this example, we first capture the initial number of transmitted (`initialTxBytes`) and received (`initialRxBytes`) bytes using `TrafficStats.getTotalTxBytes()` and `TrafficStats.getTotalRxBytes()`, respectively. Then, after performing your app operations, you capture the final transmitted and received bytes (`finalTxBytes` and `finalRxBytes`). Finally, you calculate the total data usage by subtracting the initial values from the final values.\r\n\r\nNote that you need to make sure you have the necessary permissions in your app&#39;s manifest file to access network state:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n\r\nAdditionally, keep in mind that TrafficStats measures the cumulative network traffic since the device was last booted. If you want to measure the data usage specifically during your app session, you should reset the values of TrafficStats at the start of your session by calling `TrafficStats.clearThreadStatsTag()`.\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Is there a way to measure the entire data usage (wifi/mobile-data) of the app during the session?","body":"<p>You can measure the data usage of an app during a session programmatically in Android using Kotlin. Android provides the TrafficStats class, which allows you to monitor the network traffic statistics for your app. You can use this class to measure the data usage of both Wi-Fi and mobile data.</p>\n<p>Here's an example of how you can use TrafficStats to measure data usage:</p>\n<pre><code>import android.net.TrafficStats\n\n// Start measuring data usage\nval initialTxBytes = TrafficStats.getTotalTxBytes()\nval initialRxBytes = TrafficStats.getTotalRxBytes()\n\n// Perform your app operations here\n\n// End measuring data usage\nval finalTxBytes = TrafficStats.getTotalTxBytes()\nval finalRxBytes = TrafficStats.getTotalRxBytes()\n\n// Calculate the data usage\nval totalTxBytes = finalTxBytes - initialTxBytes\nval totalRxBytes = finalRxBytes - initialRxBytes\nval totalBytes = totalTxBytes + totalRxBytes\n\n// Convert bytes to a human-readable format (e.g., MB, GB)\nval formattedTotalBytes = \nandroid.text.format.Formatter.formatFileSize(context, totalBytes)\n\n// Print or display the total data usage\nLog.d(&quot;Data Usage&quot;, &quot;Total Data Usage: $formattedTotalBytes&quot;)\n</code></pre>\n<p>In this example, we first capture the initial number of transmitted (<code>initialTxBytes</code>) and received (<code>initialRxBytes</code>) bytes using <code>TrafficStats.getTotalTxBytes()</code> and <code>TrafficStats.getTotalRxBytes()</code>, respectively. Then, after performing your app operations, you capture the final transmitted and received bytes (<code>finalTxBytes</code> and <code>finalRxBytes</code>). Finally, you calculate the total data usage by subtracting the initial values from the final values.</p>\n<p>Note that you need to make sure you have the necessary permissions in your app's manifest file to access network state:</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n</code></pre>\n<p>Additionally, keep in mind that TrafficStats measures the cumulative network traffic since the device was last booted. If you want to measure the data usage specifically during your app session, you should reset the values of TrafficStats at the start of your session by calling <code>TrafficStats.clearThreadStatsTag()</code>.</p>\n"}],"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689354459,"creation_date":1689350014,"question_id":76689345,"body_markdown":"I am trying to measure how much data the app uses during the session. For example, open the app -&gt; use it for some time -&gt; check how much data has been consumed (eg: entire data usage - 150Mb).\r\n\r\nI see there is some info in the network profiler, like how much data has been consumed by each query (in/out), however, there is no &quot;entire usage&quot; value.\r\n\r\nAre there any ideas?\r\n\r\n","title":"Is there a way to measure the entire data usage (wifi/mobile-data) of the app during the session?","body":"<p>I am trying to measure how much data the app uses during the session. For example, open the app -&gt; use it for some time -&gt; check how much data has been consumed (eg: entire data usage - 150Mb).</p>\n<p>I see there is some info in the network profiler, like how much data has been consumed by each query (in/out), however, there is no &quot;entire usage&quot; value.</p>\n<p>Are there any ideas?</p>\n"},{"tags":["java","spring","system-design"],"comments":[{"owner":{"account_id":10933290,"reputation":2086,"user_id":8035759,"display_name":"Asgar"},"score":3,"creation_date":1688374790,"post_id":76603264,"comment_id":135060843,"body_markdown":"You seem confused. Whether null should be allowed or not for `subjects` depends on your use case. If it is mandatory, don&#39;t allow null else allow null.","body":"You seem confused. Whether null should be allowed or not for <code>subjects</code> depends on your use case. If it is mandatory, don&#39;t allow null else allow null."},{"owner":{"account_id":365431,"reputation":4956,"user_id":2057091,"accept_rate":89,"display_name":"Aserre"},"score":0,"creation_date":1688376206,"post_id":76603264,"comment_id":135061126,"body_markdown":"This seems mostly like an opinion based question. Note that you could always attribute a default value to `subjects` by doing `private List&lt;String&gt; subjects = new ArrayList&lt;&gt;();` with a builder","body":"This seems mostly like an opinion based question. Note that you could always attribute a default value to <code>subjects</code> by doing <code>private List&lt;String&gt; subjects = new ArrayList&lt;&gt;();</code> with a builder"}],"answers":[{"tags":[],"owner":{"account_id":17054653,"reputation":605,"user_id":12339564,"display_name":"ABC"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689354294,"creation_date":1689354294,"answer_id":76689836,"question_id":76603264,"body_markdown":"It depends on your project requirements, but from a clean code standpoint, there are two key principles that are relevant in this context.\r\n\r\n1. &lt;b&gt;Do not return NULL&lt;/b&gt; &lt;br&gt;\r\n- If you are tempted to return ```NULL```, you should consider throwing an exception or returning a ```special case``` (a special case is a specific situation or condition that deviates from the normal flow of execution or behavior)&lt;br&gt;&lt;br&gt;\r\nSpecial case example:\r\n```\r\n\r\nList&lt;Employee&gt; employees = getEmployees();\r\nif (employees != null) { // we check for null because getEmployees can return null\r\n   for(Employee e : employees) {\r\n      totalPay += e.getPay();\r\n   }\r\n}\r\n```\r\n```\r\n// If we change getEmployees so that it returns an empty list,\r\n// we can clean up the code\r\n\r\nList&lt;Employee&gt; employees = getEmployees();\r\nfor(Employee e : employees) {\r\n   totalPay += e.getPay();\r\n}\r\n```\r\n2. &lt;b&gt;Do not pass NULL&lt;/b&gt; &lt;br&gt;\r\n- you should avoid passing ```NULL``` in your code whenever possible, unless you\r\nare working with an API which expects you to pass ```NULL``` \r\n- if someone passes ```NULL```, we could not handle it better than throwing a ```Runtime Exception``` - so we&#39;ll still have a runtime error\r\n\r\nThese two points help us understand that we should consider simplifying the client code and reducing clutter in the business logic.\r\n\r\n\r\nTherefore, from a clean code perspective, we should &lt;b&gt;avoid&lt;/b&gt; dealing with ```NULL``` in our code whenever possible.\r\n\r\n\r\nReference: &quot;Clean Code. A Handbook of Agile Software Craftsmanship&quot;","title":"Java- Spring: should we handle null on a list in a request-Object?","body":"<p>It depends on your project requirements, but from a clean code standpoint, there are two key principles that are relevant in this context.</p>\n<ol>\n<li><b>Do not return NULL</b> <br></li>\n</ol>\n<ul>\n<li>If you are tempted to return <code>NULL</code>, you should consider throwing an exception or returning a <code>special case</code> (a special case is a specific situation or condition that deviates from the normal flow of execution or behavior)<br><br>\nSpecial case example:</li>\n</ul>\n<pre><code>\nList&lt;Employee&gt; employees = getEmployees();\nif (employees != null) { // we check for null because getEmployees can return null\n   for(Employee e : employees) {\n      totalPay += e.getPay();\n   }\n}\n</code></pre>\n<pre><code>// If we change getEmployees so that it returns an empty list,\n// we can clean up the code\n\nList&lt;Employee&gt; employees = getEmployees();\nfor(Employee e : employees) {\n   totalPay += e.getPay();\n}\n</code></pre>\n<ol start=\"2\">\n<li><b>Do not pass NULL</b> <br></li>\n</ol>\n<ul>\n<li>you should avoid passing <code>NULL</code> in your code whenever possible, unless you\nare working with an API which expects you to pass <code>NULL</code></li>\n<li>if someone passes <code>NULL</code>, we could not handle it better than throwing a <code>Runtime Exception</code> - so we'll still have a runtime error</li>\n</ul>\n<p>These two points help us understand that we should consider simplifying the client code and reducing clutter in the business logic.</p>\n<p>Therefore, from a clean code perspective, we should <b>avoid</b> dealing with <code>NULL</code> in our code whenever possible.</p>\n<p>Reference: &quot;Clean Code. A Handbook of Agile Software Craftsmanship&quot;</p>\n"}],"owner":{"account_id":14595960,"reputation":7,"user_id":10770017,"display_name":"NothingIsIrrational"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76689836,"answer_count":1,"score":0,"last_activity_date":1689354294,"creation_date":1688374519,"question_id":76603264,"body_markdown":"should we handle null on a list in a request-Object.\r\n\r\nI am using Spring (java) to accept `the request to save a new Student`.\r\n\r\nEg :\r\n\r\n```\r\n@Data\r\npublic class Student implements Serializable {\r\n\r\n    private String name;\r\n    \r\n    private List&lt;String&gt; subjects;\r\n\r\n}\r\n```\r\n\r\n**My question**  is more of a contract between front-end and backend.\r\n\r\n**What I need is** : a logical-explanation/opinion on should we allow NULLs on `student.subjects` OR not ?\r\n\r\n--\r\n\r\n**Extra :** \r\n\r\ni have referenced multiple opinions on the internet.\r\n\r\nThe one that makes the most sense is : https://salesforce.stackexchange.com/a/217411","title":"Java- Spring: should we handle null on a list in a request-Object?","body":"<p>should we handle null on a list in a request-Object.</p>\n<p>I am using Spring (java) to accept <code>the request to save a new Student</code>.</p>\n<p>Eg :</p>\n<pre><code>@Data\npublic class Student implements Serializable {\n\n    private String name;\n    \n    private List&lt;String&gt; subjects;\n\n}\n</code></pre>\n<p><strong>My question</strong>  is more of a contract between front-end and backend.</p>\n<p><strong>What I need is</strong> : a logical-explanation/opinion on should we allow NULLs on <code>student.subjects</code> OR not ?</p>\n<p>--</p>\n<p><strong>Extra :</strong></p>\n<p>i have referenced multiple opinions on the internet.</p>\n<p>The one that makes the most sense is : <a href=\"https://salesforce.stackexchange.com/a/217411\">https://salesforce.stackexchange.com/a/217411</a></p>\n"},{"tags":["java","gradle","swagger"],"comments":[{"owner":{"account_id":1711670,"reputation":2138,"user_id":1569604,"accept_rate":50,"display_name":"maslan"},"score":0,"creation_date":1552478304,"post_id":55141247,"comment_id":97022755,"body_markdown":"in the pasted stacktrace there is nothing about bad magic number (something got truncated?) but magic number always means that the classes compiled are of higher version then the java you are trying to run it with. Please provide the exact name and version of the jar and the version of the java you are trying to run with.\n\nAlso if you look into the mentioned manifest it sometimes contains information about java used for compilation","body":"in the pasted stacktrace there is nothing about bad magic number (something got truncated?) but magic number always means that the classes compiled are of higher version then the java you are trying to run it with. Please provide the exact name and version of the jar and the version of the java you are trying to run with.  Also if you look into the mentioned manifest it sometimes contains information about java used for compilation"},{"owner":{"account_id":10484208,"reputation":686,"user_id":7728305,"display_name":"Aravinth"},"score":0,"creation_date":1552478533,"post_id":55141247,"comment_id":97022900,"body_markdown":"I am using source compatible java  version as 8 in my gradle file. But I don&#39;t how to find the java version of compiled class files and also I have around 40 dependent libraries.","body":"I am using source compatible java  version as 8 in my gradle file. But I don&#39;t how to find the java version of compiled class files and also I have around 40 dependent libraries."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1552478551,"post_id":55141247,"comment_id":97022911,"body_markdown":"Well, the message states it: &quot;could not create class object from file META-INF/MANIFEST.MF&quot; - why it tries to create a _class_ from a _text_ file would be the issue to tackle.","body":"Well, the message states it: &quot;could not create class object from file META-INF/MANIFEST.MF&quot; - why it tries to create a <i>class</i> from a <i>text</i> file would be the issue to tackle."},{"owner":{"account_id":1711670,"reputation":2138,"user_id":1569604,"accept_rate":50,"display_name":"maslan"},"score":0,"creation_date":1552478718,"post_id":55141247,"comment_id":97023044,"body_markdown":"@Thomas unless manifest entries contain a detail of a class to be loaded such as java agent. That is why OP should look into the contents of a manifest using some standard unzipping software, or for windows by changing the extension to .zip and opening","body":"@Thomas unless manifest entries contain a detail of a class to be loaded such as java agent. That is why OP should look into the contents of a manifest using some standard unzipping software, or for windows by changing the extension to .zip and opening"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":1,"creation_date":1552479488,"post_id":55141247,"comment_id":97023536,"body_markdown":"@maslan yes, that could be the case. However, that would mean the manifest would be used to create/analyze _other_ files and not to try to create a class from the manifest itself.","body":"@maslan yes, that could be the case. However, that would mean the manifest would be used to create/analyze <i>other</i> files and not to try to create a class from the manifest itself."},{"owner":{"account_id":1711670,"reputation":2138,"user_id":1569604,"accept_rate":50,"display_name":"maslan"},"score":0,"creation_date":1552500530,"post_id":55141247,"comment_id":97037554,"body_markdown":"@Thomas thats why we would need to see the manifest file, and the full stacktrace with causes (it is possible that simply a few lines below lies the real reason)","body":"@Thomas thats why we would need to see the manifest file, and the full stacktrace with causes (it is possible that simply a few lines below lies the real reason)"}],"answers":[{"tags":[],"owner":{"account_id":10484208,"reputation":686,"user_id":7728305,"display_name":"Aravinth"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1584077994,"creation_date":1552500717,"answer_id":55148688,"question_id":55141247,"body_markdown":"Found the problem: I was using swagger core plugin 2.5.0 with java source compatibility as 8.1. Then I changed the plugin version 2.7.0, then it worked fine with no errors. Looks like 2.5.0 has some problem. Thanks guys for the response.","title":"Could not able to scan jar file : bad magic number","body":"<p>Found the problem: I was using swagger core plugin 2.5.0 with java source compatibility as 8.1. Then I changed the plugin version 2.7.0, then it worked fine with no errors. Looks like 2.5.0 has some problem. Thanks guys for the response.</p>\n"},{"tags":[],"owner":{"account_id":17951329,"reputation":1,"user_id":13044380,"display_name":"June"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1583920702,"creation_date":1583920702,"answer_id":60633335,"question_id":55141247,"body_markdown":"Thanks for your tips.\r\nI got the same problem when using cxf-rt-rs-service-description-swagger 3.2.0. (dependency reflections-0.9.11.jar)\r\nFinally needs downgrade to 3.1.13 (dependency reflections-0.9.10.jar).\r\n","title":"Could not able to scan jar file : bad magic number","body":"<p>Thanks for your tips.\nI got the same problem when using cxf-rt-rs-service-description-swagger 3.2.0. (dependency reflections-0.9.11.jar)\nFinally needs downgrade to 3.1.13 (dependency reflections-0.9.10.jar).</p>\n"},{"tags":[],"owner":{"account_id":19076508,"reputation":11,"user_id":13929679,"display_name":"Ankit Garg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689353769,"creation_date":1689353769,"answer_id":76689779,"question_id":55141247,"body_markdown":"You can use filterInputsBy which will only scan classes. \r\n\r\n    Reflections reflections = new Reflections(new ConfigurationBuilder()\r\n                .setUrls(ClasspathHelper.forPackage(&quot;com.abc.service&quot;))\r\n                .setScanners(new TypeAnnotationsScanner())\r\n             .filterInputsBy(new FilterBuilder().include(&quot;.*class&quot;))\r\n     \r\n     );\r\n\r\n\r\n     ","title":"Could not able to scan jar file : bad magic number","body":"<p>You can use filterInputsBy which will only scan classes.</p>\n<pre><code>Reflections reflections = new Reflections(new ConfigurationBuilder()\n            .setUrls(ClasspathHelper.forPackage(&quot;com.abc.service&quot;))\n            .setScanners(new TypeAnnotationsScanner())\n         .filterInputsBy(new FilterBuilder().include(&quot;.*class&quot;))\n \n );\n\n\n \n</code></pre>\n"}],"owner":{"account_id":10484208,"reputation":686,"user_id":7728305,"display_name":"Aravinth"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2949,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":55148688,"answer_count":3,"score":1,"last_activity_date":1689353769,"creation_date":1552477880,"question_id":55141247,"body_markdown":"I am trying to generate swagger from an interface in my project. I am writing a new task in gradle which assembles the specs. When trying to read a jar or scan a jar file it throws an error like \r\n\r\n    DEBUG org.reflections.Reflections - could not scan file META-INF/MANIFEST.MF in url jar&lt;JAR URL&gt;\r\n\r\n    org.reflections.ReflectionsException: could not create class object from file META-INF/MANIFEST.MF\r\n\r\n    Caused by: org.reflections.ReflectionsException: could not create class file from MANIFEST.MF\r\n        at org.reflections.adapters.JavassistAdapter.getOfCreateClassObject(JavassistAdapter.java:102)\r\n        at org.reflections.adapters.JavassistAdapter.getOfCreateClassObject(JavassistAdapter.java:24)\r\n        at org.reflections.scanners.AbstractScanner.scan(AbstractScanner.java:30)\r\n        ... 62 common frames omitted\r\n\r\nCan anyone please assist me on this? This is a major blocker for my project.","title":"Could not able to scan jar file : bad magic number","body":"<p>I am trying to generate swagger from an interface in my project. I am writing a new task in gradle which assembles the specs. When trying to read a jar or scan a jar file it throws an error like</p>\n<pre><code>DEBUG org.reflections.Reflections - could not scan file META-INF/MANIFEST.MF in url jar&lt;JAR URL&gt;\n\norg.reflections.ReflectionsException: could not create class object from file META-INF/MANIFEST.MF\n\nCaused by: org.reflections.ReflectionsException: could not create class file from MANIFEST.MF\n    at org.reflections.adapters.JavassistAdapter.getOfCreateClassObject(JavassistAdapter.java:102)\n    at org.reflections.adapters.JavassistAdapter.getOfCreateClassObject(JavassistAdapter.java:24)\n    at org.reflections.scanners.AbstractScanner.scan(AbstractScanner.java:30)\n    ... 62 common frames omitted\n</code></pre>\n<p>Can anyone please assist me on this? This is a major blocker for my project.</p>\n"},{"tags":["java","spring","scheduled-tasks"],"comments":[{"owner":{"account_id":6365827,"reputation":3652,"user_id":4939853,"accept_rate":69,"display_name":"Oreste Viron"},"score":0,"creation_date":1534417461,"post_id":51875028,"comment_id":90702295,"body_markdown":"Hello, I think you can&#39;t autowire static objects.Try remove static.","body":"Hello, I think you can&#39;t autowire static objects.Try remove static."},{"owner":{"account_id":3751239,"reputation":2505,"user_id":3118692,"accept_rate":53,"display_name":"Syed"},"score":0,"creation_date":1534418159,"post_id":51875028,"comment_id":90702755,"body_markdown":"@OresteViron, tried with that also, still it doesn&#39;t work","body":"@OresteViron, tried with that also, still it doesn&#39;t work"},{"owner":{"account_id":2400394,"reputation":318,"user_id":2098182,"display_name":"Dhaval Desai"},"score":0,"creation_date":1534428105,"post_id":51875028,"comment_id":90709178,"body_markdown":"You need to remove static and either add autowire attribute like &lt;bean id=&quot;getEmployeeServiceAdapter&quot; class=&quot;com.dev.adapter.GetEmployeeServiceAdapter&quot; autowire=&quot;byName&quot;&gt;     \n&lt;/bean&gt;  or add &lt;property name=&quot;getEmployeeServiceAdapter&quot; ref=&quot;getEmployeeServiceAdapter&quot; /&gt; as child for bean testListener.","body":"You need to remove static and either add autowire attribute like &lt;bean id=&quot;getEmployeeServiceAdapter&quot; class=&quot;com.dev.adapter.GetEmployeeServiceAdapter&quot; autowire=&quot;byName&quot;&gt;      &lt;/bean&gt;  or add &lt;property name=&quot;getEmployeeServiceAdapter&quot; ref=&quot;getEmployeeServiceAdapter&quot; /&gt; as child for bean testListener."}],"owner":{"account_id":3751239,"reputation":2505,"user_id":3118692,"accept_rate":53,"display_name":"Syed"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":138,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1534416069,"answer_count":0,"score":0,"last_activity_date":1689353662,"creation_date":1534415815,"question_id":51875028,"body_markdown":"I&#39;ve written a task scheduler in Spring. Its running properly. Now my condition is I&#39;m trying to inject one bean into the listener. But, it returns me null object. But if the same bean is injected into a controller/component, it works fine. Please let me know if I need to make any modifications.\r\n\r\nHere is my code\r\n\r\nMy configurations in application context configuration file\r\n\r\n    &lt;task:scheduler id=&quot;testScheduler&quot; pool-size=&quot;1&quot; /&gt;\r\n   \t&lt;bean id=&quot;testListener&quot;\r\n\t\tclass=&quot;com.dev.util.TestListener&quot; &gt;\t\t\r\n\t&lt;/bean&gt;\r\n\t&lt;task:scheduled-tasks scheduler=&quot;testScheduler&quot;&gt;\r\n\t\t&lt;task:scheduled ref=&quot;testListener&quot; method=&quot;run&quot;\r\n\t\t\tfixed-delay=&quot;60000&quot; /&gt;\r\n\t&lt;/task:scheduled-tasks&gt; \r\n\r\nThe bean which I&#39;m trying to inject\r\n\r\n    &lt;bean id=&quot;getEmployeeServiceAdapter&quot; class=&quot;com.dev.adapter.GetEmployeeServiceAdapter&quot;&gt;\t\t\r\n\t&lt;/bean&gt;\r\n\r\n\r\nAnd finally my class \r\n\r\n    public class TestListener {\r\n\t\r\n\t\t@Autowired\r\n\t\tstatic\r\n\t\tGetEmployeeServiceAdapter getEmployeeServiceAdapter;\r\n\t\t\r\n\t\tpublic void run() throws Exception{\r\n\t\t\tSystem.out.println(&quot;Hii&quot;);\r\n\t\t\t// Code \r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\nwhen I do in debug mode, and place my cursor on the object, it gets as null","title":"Not able to autowire a bean in task scheduler class in Java","body":"<p>I've written a task scheduler in Spring. Its running properly. Now my condition is I'm trying to inject one bean into the listener. But, it returns me null object. But if the same bean is injected into a controller/component, it works fine. Please let me know if I need to make any modifications.</p>\n\n<p>Here is my code</p>\n\n<p>My configurations in application context configuration file</p>\n\n<pre><code>&lt;task:scheduler id=\"testScheduler\" pool-size=\"1\" /&gt;\n&lt;bean id=\"testListener\"\n    class=\"com.dev.util.TestListener\" &gt;     \n&lt;/bean&gt;\n&lt;task:scheduled-tasks scheduler=\"testScheduler\"&gt;\n    &lt;task:scheduled ref=\"testListener\" method=\"run\"\n        fixed-delay=\"60000\" /&gt;\n&lt;/task:scheduled-tasks&gt; \n</code></pre>\n\n<p>The bean which I'm trying to inject</p>\n\n<pre><code>&lt;bean id=\"getEmployeeServiceAdapter\" class=\"com.dev.adapter.GetEmployeeServiceAdapter\"&gt;     \n&lt;/bean&gt;\n</code></pre>\n\n<p>And finally my class </p>\n\n<pre><code>public class TestListener {\n\n    @Autowired\n    static\n    GetEmployeeServiceAdapter getEmployeeServiceAdapter;\n\n    public void run() throws Exception{\n        System.out.println(\"Hii\");\n        // Code \n    }\n\n}\n</code></pre>\n\n<p>when I do in debug mode, and place my cursor on the object, it gets as null</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1689353264,"post_id":76688967,"comment_id":135206549,"body_markdown":"*&quot;but It doesn&#39;t work, control f6 is still enabled in JDesktopPane.&quot;* -- it may be that you&#39;re using the wrong input map. Please create and post a valid [mre] with your question code that we can copy/paste and run, similar to that seen within my answer.","body":"<i>&quot;but It doesn&#39;t work, control f6 is still enabled in JDesktopPane.&quot;</i> -- it may be that you&#39;re using the wrong input map. Please create and post a valid <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with your question code that we can copy/paste and run, similar to that seen within my answer."},{"owner":{"account_id":633896,"reputation":3552,"user_id":399637,"accept_rate":90,"display_name":"res1"},"score":0,"creation_date":1689353728,"post_id":76688967,"comment_id":135206660,"body_markdown":"You right. I posted an edit while you wrote your comments. I didn&#39;t posted a reproducible example just a test I did on my code.","body":"You right. I posted an edit while you wrote your comments. I didn&#39;t posted a reproducible example just a test I did on my code."}],"answers":[{"tags":[],"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689348789,"creation_date":1689347731,"answer_id":76689063,"question_id":76688967,"body_markdown":"You will want to get the original key value and use it to get the original Action held by the ActionMap, save that value and then replace it when you want to restore the key&#39;s original function:\r\n\r\n```\r\nKeyStroke remove = KeyStroke.getKeyStroke(KeyEvent.VK_F6, InputEvent.CTRL_DOWN_MASK);\r\nInputMap im = desktop.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);\r\nObject keyValue = im.get(remove);\r\nActionMap am = desktop.getActionMap();\r\n\r\n// store this original action somewhere   \r\nAction originalAction = am.get(keyValue);\r\n```\r\n\r\nThen again, later when you want to restore the f6 ctrl-down key stroke to original function, put that action back into the action map, associating it with the key value in the input map.\r\n________________________\r\n\r\nActually, you can use `.enabled(true)` and `.enabled(false)` on the Action associated with the key stroke of interest if you do not disassociate the key from the action. For example, in the code below, I can enable and disable a JTextArea&#39;s ability to paste text using ctrl-V by enabling and disabling the associated action with the ctrl-V keystroke.\r\n\r\n```\r\nimport java.awt.BorderLayout;\r\nimport java.awt.event.InputEvent;\r\nimport java.awt.event.ItemEvent;\r\nimport java.awt.event.KeyEvent;\r\nimport javax.swing.*;\r\n\r\n@SuppressWarnings(&quot;serial&quot;)\r\npublic class TestInputActionMaps extends JPanel {\r\n    private JCheckBox enableAction = new JCheckBox(&quot;Enable Action&quot;, true);\r\n    private KeyStroke controlV = KeyStroke.getKeyStroke(KeyEvent.VK_V, InputEvent.CTRL_DOWN_MASK);\r\n    private JTextArea textArea = new JTextArea(&quot;This is text&quot;, 10, 30);\r\n    private InputMap inputMap = textArea.getInputMap(JComponent.WHEN_FOCUSED);\r\n    private ActionMap actionMap = textArea.getActionMap();    \r\n    String ctrlVKey = (String) inputMap.get(controlV);\r\n    Action ctrlVAction = actionMap.get(ctrlVKey);\r\n    \r\n    public TestInputActionMaps() {\r\n        enableAction.addItemListener(e -&gt; checkBoxChanged(e));\r\n        \r\n        \r\n        textArea.setWrapStyleWord(true);\r\n        textArea.setLineWrap(true);\r\n        JScrollPane scrollPane = new JScrollPane(textArea);\r\n        \r\n        JPanel topPanel = new JPanel();\r\n        topPanel.add(enableAction);\r\n        \r\n        setLayout(new BorderLayout());\r\n        add(topPanel, BorderLayout.PAGE_START);\r\n        add(scrollPane);\r\n    }\r\n    \r\n    private void checkBoxChanged(ItemEvent e) {\r\n        if (e.getStateChange() == ItemEvent.SELECTED) {\r\n            ctrlVAction.setEnabled(true);\r\n        } else {\r\n            ctrlVAction.setEnabled(false);\r\n        }\r\n    }\r\n    \r\n    public static void main(String[] args) {\r\n        SwingUtilities.invokeLater(() -&gt; {\r\n            TestInputActionMaps mainPanel = new TestInputActionMaps();\r\n\r\n            JFrame frame = new JFrame(&quot;GUI&quot;);\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            frame.add(mainPanel);\r\n            frame.pack();\r\n            frame.setLocationRelativeTo(null);\r\n            frame.setVisible(true);\r\n        });\r\n    }\r\n}\r\n```","title":"java swing: enable disable a specific key binding for a component","body":"<p>You will want to get the original key value and use it to get the original Action held by the ActionMap, save that value and then replace it when you want to restore the key's original function:</p>\n<pre><code>KeyStroke remove = KeyStroke.getKeyStroke(KeyEvent.VK_F6, InputEvent.CTRL_DOWN_MASK);\nInputMap im = desktop.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);\nObject keyValue = im.get(remove);\nActionMap am = desktop.getActionMap();\n\n// store this original action somewhere   \nAction originalAction = am.get(keyValue);\n</code></pre>\n<p>Then again, later when you want to restore the f6 ctrl-down key stroke to original function, put that action back into the action map, associating it with the key value in the input map.</p>\n<hr />\n<p>Actually, you can use <code>.enabled(true)</code> and <code>.enabled(false)</code> on the Action associated with the key stroke of interest if you do not disassociate the key from the action. For example, in the code below, I can enable and disable a JTextArea's ability to paste text using ctrl-V by enabling and disabling the associated action with the ctrl-V keystroke.</p>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.event.InputEvent;\nimport java.awt.event.ItemEvent;\nimport java.awt.event.KeyEvent;\nimport javax.swing.*;\n\n@SuppressWarnings(&quot;serial&quot;)\npublic class TestInputActionMaps extends JPanel {\n    private JCheckBox enableAction = new JCheckBox(&quot;Enable Action&quot;, true);\n    private KeyStroke controlV = KeyStroke.getKeyStroke(KeyEvent.VK_V, InputEvent.CTRL_DOWN_MASK);\n    private JTextArea textArea = new JTextArea(&quot;This is text&quot;, 10, 30);\n    private InputMap inputMap = textArea.getInputMap(JComponent.WHEN_FOCUSED);\n    private ActionMap actionMap = textArea.getActionMap();    \n    String ctrlVKey = (String) inputMap.get(controlV);\n    Action ctrlVAction = actionMap.get(ctrlVKey);\n    \n    public TestInputActionMaps() {\n        enableAction.addItemListener(e -&gt; checkBoxChanged(e));\n        \n        \n        textArea.setWrapStyleWord(true);\n        textArea.setLineWrap(true);\n        JScrollPane scrollPane = new JScrollPane(textArea);\n        \n        JPanel topPanel = new JPanel();\n        topPanel.add(enableAction);\n        \n        setLayout(new BorderLayout());\n        add(topPanel, BorderLayout.PAGE_START);\n        add(scrollPane);\n    }\n    \n    private void checkBoxChanged(ItemEvent e) {\n        if (e.getStateChange() == ItemEvent.SELECTED) {\n            ctrlVAction.setEnabled(true);\n        } else {\n            ctrlVAction.setEnabled(false);\n        }\n    }\n    \n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(() -&gt; {\n            TestInputActionMaps mainPanel = new TestInputActionMaps();\n\n            JFrame frame = new JFrame(&quot;GUI&quot;);\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            frame.add(mainPanel);\n            frame.pack();\n            frame.setLocationRelativeTo(null);\n            frame.setVisible(true);\n        });\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":633896,"reputation":3552,"user_id":399637,"accept_rate":90,"display_name":"res1"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689353624,"creation_date":1689347168,"question_id":76688967,"body_markdown":"In my case I want to be able to enable and disable `ctrl F6` on `JDesktopPane`.\r\n\r\nRight now I am disabling it in this way:\r\n\r\n```\r\nKeyStroke remove = KeyStroke.getKeyStroke(KeyEvent.VK_F6, InputEvent.CTRL_DOWN_MASK);\r\nInputMap im = desktop.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);\r\nim.put(remove, &quot;none&quot;);\r\n```\r\n\r\nAnd it seems to works the key binding is no more active.\r\n\r\nI don&#39;t know how to re-enable it, or what to save before disabling for enabling it again later.\r\n\r\nThanks for the help\r\n\r\n**UPDATE1:**\r\n\r\nbased on the answer https://stackoverflow.com/a/76689063/399637 \r\nI tried to work on the `Action`, this is a test code:\r\n\r\n```\r\ndesktop = new JDesktopPane();\r\nKeyStroke keyStroke = KeyStroke.getKeyStroke(KeyEvent.VK_F6, InputEvent.CTRL_DOWN_MASK);\r\nInputMap im = desktop.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);\r\nActionMap am = desktop.getActionMap();\r\nString key = (String)im.get(keyStroke);\r\nAction action = am.get(key);\r\nassert action != null;\r\naction.setEnabled(false);\r\n```\r\n\r\nbut It doesn&#39;t work, `control f6` is still enabled in `JDesktopPane`.\r\n\r\n**UPDATE2:**\r\n\r\nI was able to make it to work using a wrapper class for the action, non a very good solution but it seems to work:\r\n\r\n```\r\n\tprivate static class ActionWrapper extends AbstractAction{\r\n\t\t\r\n\t\tprivate final Action action;\r\n\t\t\r\n\t\tprivate boolean active = true;\r\n\t\t\r\n\t\t@Override\r\n\t\tpublic void actionPerformed(ActionEvent evt) {\r\n\t\t\t\r\n\t\t\tif(active){\t\t\t\r\n\t\t\t\taction.actionPerformed(evt);\r\n\t\t\t}\t\r\n\t\t}\r\n\t}\r\n```\r\n\r\nand then the code:\r\n```\r\ndesktop = new JDesktopPane();\r\nKeyStroke keyStroke = KeyStroke.getKeyStroke(KeyEvent.VK_F6, InputEvent.CTRL_DOWN_MASK);\r\nInputMap im = desktop.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);\r\nActionMap am = desktop.getActionMap();\r\nString key = (String)im.get(keyStroke);\r\nAction action = am.get(key);\r\nassert action != null;\r\nactionWrapper = new ActionWrapper(action);\r\nam.put(key, actionWrapper);\r\n```\r\n\r\nand then `setActive(boolean)` on the wrapper class.\r\n\r\nIf someone wants to review this solution.\r\n","title":"java swing: enable disable a specific key binding for a component","body":"<p>In my case I want to be able to enable and disable <code>ctrl F6</code> on <code>JDesktopPane</code>.</p>\n<p>Right now I am disabling it in this way:</p>\n<pre><code>KeyStroke remove = KeyStroke.getKeyStroke(KeyEvent.VK_F6, InputEvent.CTRL_DOWN_MASK);\nInputMap im = desktop.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);\nim.put(remove, &quot;none&quot;);\n</code></pre>\n<p>And it seems to works the key binding is no more active.</p>\n<p>I don't know how to re-enable it, or what to save before disabling for enabling it again later.</p>\n<p>Thanks for the help</p>\n<p><strong>UPDATE1:</strong></p>\n<p>based on the answer <a href=\"https://stackoverflow.com/a/76689063/399637\">https://stackoverflow.com/a/76689063/399637</a>\nI tried to work on the <code>Action</code>, this is a test code:</p>\n<pre><code>desktop = new JDesktopPane();\nKeyStroke keyStroke = KeyStroke.getKeyStroke(KeyEvent.VK_F6, InputEvent.CTRL_DOWN_MASK);\nInputMap im = desktop.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);\nActionMap am = desktop.getActionMap();\nString key = (String)im.get(keyStroke);\nAction action = am.get(key);\nassert action != null;\naction.setEnabled(false);\n</code></pre>\n<p>but It doesn't work, <code>control f6</code> is still enabled in <code>JDesktopPane</code>.</p>\n<p><strong>UPDATE2:</strong></p>\n<p>I was able to make it to work using a wrapper class for the action, non a very good solution but it seems to work:</p>\n<pre><code>    private static class ActionWrapper extends AbstractAction{\n        \n        private final Action action;\n        \n        private boolean active = true;\n        \n        @Override\n        public void actionPerformed(ActionEvent evt) {\n            \n            if(active){         \n                action.actionPerformed(evt);\n            }   \n        }\n    }\n</code></pre>\n<p>and then the code:</p>\n<pre><code>desktop = new JDesktopPane();\nKeyStroke keyStroke = KeyStroke.getKeyStroke(KeyEvent.VK_F6, InputEvent.CTRL_DOWN_MASK);\nInputMap im = desktop.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);\nActionMap am = desktop.getActionMap();\nString key = (String)im.get(keyStroke);\nAction action = am.get(key);\nassert action != null;\nactionWrapper = new ActionWrapper(action);\nam.put(key, actionWrapper);\n</code></pre>\n<p>and then <code>setActive(boolean)</code> on the wrapper class.</p>\n<p>If someone wants to review this solution.</p>\n"},{"tags":["java","multithreading","scheduled-tasks"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1536066031,"post_id":52166906,"comment_id":91283556,"body_markdown":"You aren&#39;t scheduling threads, you are scheduling tasks which are processed by 5 threads. Why would you need to expand the poolsize?","body":"You aren&#39;t scheduling threads, you are scheduling tasks which are processed by 5 threads. Why would you need to expand the poolsize?"},{"owner":{"account_id":2861266,"reputation":6734,"user_id":4781349,"accept_rate":33,"display_name":"ip696"},"score":0,"creation_date":1536066659,"post_id":52166906,"comment_id":91283960,"body_markdown":"@ M. Deinum I poll the third-party system with a very short time interval. I do this in N threads. Periodically, you need to take data at a faster rate and for this the number of threads that poll it changes. believe me, I was shocked to learn that the system works this way, but it exists and it really works.","body":"@ M. Deinum I poll the third-party system with a very short time interval. I do this in N threads. Periodically, you need to take data at a faster rate and for this the number of threads that poll it changes. believe me, I was shocked to learn that the system works this way, but it exists and it really works."},{"owner":{"account_id":2861266,"reputation":6734,"user_id":4781349,"accept_rate":33,"display_name":"ip696"},"score":0,"creation_date":1536066743,"post_id":52166906,"comment_id":91284011,"body_markdown":"My system sends a request to another system. the third-party system says - well, I accepted your request and put it in the queue for processing. And after that I start constantly asking her - are there any answers for me?","body":"My system sends a request to another system. the third-party system says - well, I accepted your request and put it in the queue for processing. And after that I start constantly asking her - are there any answers for me?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1536083056,"post_id":52166906,"comment_id":91293688,"body_markdown":"But why would you need more threads for that? Design the tasks in such a way that they poll, if there is nothing, let them sleep for a bit (not 10 seconds) and poll again. You don&#39;t need 10 or 100 threads for that.","body":"But why would you need more threads for that? Design the tasks in such a way that they poll, if there is nothing, let them sleep for a bit (not 10 seconds) and poll again. You don&#39;t need 10 or 100 threads for that."},{"owner":{"account_id":2861266,"reputation":6734,"user_id":4781349,"accept_rate":33,"display_name":"ip696"},"score":0,"creation_date":1536133238,"post_id":52166906,"comment_id":91309328,"body_markdown":"@M. Deinum I did not understand very well what you mean. My server will be installed in different locations. by default there will be 50 threads and intrudal in 10 milliseconds. This will be enough to parse the third-party server queue. Most answers will be - for you there is nothing. But there are times when the queue is full, and my server will not be able to disassemble it. you need to increase the number of threads. This is my technical task from the lead","body":"@M. Deinum I did not understand very well what you mean. My server will be installed in different locations. by default there will be 50 threads and intrudal in 10 milliseconds. This will be enough to parse the third-party server queue. Most answers will be - for you there is nothing. But there are times when the queue is full, and my server will not be able to disassemble it. you need to increase the number of threads. This is my technical task from the lead"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1536136595,"post_id":52166906,"comment_id":91311276,"body_markdown":"Imho that task is wrong... If you need more threads then create more threads. But that isn&#39;t a solution but rather a hack/workaround for the real problem. The real problem, imho, is that it is implemented in a wrong way. With a proper implementation you can achieve what you want with the same amount of threads.","body":"Imho that task is wrong... If you need more threads then create more threads. But that isn&#39;t a solution but rather a hack/workaround for the real problem. The real problem, imho, is that it is implemented in a wrong way. With a proper implementation you can achieve what you want with the same amount of threads."}],"answers":[{"tags":[],"owner":{"account_id":6915299,"reputation":397,"user_id":5309807,"display_name":"Markus Mauksch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536083011,"creation_date":1536066135,"answer_id":52166985,"question_id":52166906,"body_markdown":"According to the documentation you can resize the scheduler at runtime by calling setPoolSize() (see: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/concurrent/ThreadPoolTaskScheduler.html#setPoolSize-int-)\r\n\r\nThe problem is: you need to have a reference to the specific class `ThreadPoolTaskScheduler` instead of the interface `TaskScheduler`. \r\n\r\nYou need to decide if you want to change the references from `TaskScheduler` to `ThreadPoolTaskScheduler` without breaking anyhting in your code","title":"ThreadPoolTaskScheduler change poolSize in runtime","body":"<p>According to the documentation you can resize the scheduler at runtime by calling setPoolSize() (see: <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/concurrent/ThreadPoolTaskScheduler.html#setPoolSize-int-\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/concurrent/ThreadPoolTaskScheduler.html#setPoolSize-int-</a>)</p>\n\n<p>The problem is: you need to have a reference to the specific class <code>ThreadPoolTaskScheduler</code> instead of the interface <code>TaskScheduler</code>. </p>\n\n<p>You need to decide if you want to change the references from <code>TaskScheduler</code> to <code>ThreadPoolTaskScheduler</code> without breaking anyhting in your code</p>\n"}],"owner":{"account_id":2861266,"reputation":6734,"user_id":4781349,"accept_rate":33,"display_name":"ip696"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1720,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689353582,"creation_date":1536065844,"question_id":52166906,"body_markdown":"I create a scheduler:\r\n\r\n    @Bean\r\n    TaskScheduler taskScheduler(){\r\n        ThreadPoolTaskScheduler threadPoolTaskScheduler = new ThreadPoolTaskScheduler();\r\n        threadPoolTaskScheduler.setPoolSize(5);\r\n        threadPoolTaskScheduler.setAwaitTerminationSeconds(60);\r\n        threadPoolTaskScheduler.setThreadNamePrefix(&quot;Test-&quot;);\r\n        return threadPoolTaskScheduler;\r\n    }\r\n\r\n\r\nI wait next:\r\n\r\nEach 1 second triggered my scheduled method and start 5 threads(`PoolSize(5)`) and each thread will make my logic. For that I create scheduled method in @Component bean:\r\n\r\n\r\n    @Slf4j\r\n    @Component\r\n    public class MyScheduler {\r\n    \r\n        private final TaskScheduler taskScheduler;\r\n    \r\n        public MyScheduler(TaskScheduler taskScheduler) {\r\n            this.taskScheduler = taskScheduler;\r\n        }\r\n    \r\n        @Scheduled(fixedDelay = 1000L)\r\n        public void test(){\r\n            taskScheduler.schedule(() -&gt; {\r\n                try {\r\n                    Thread.sleep(9000L);\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n                log.info(&quot;test&quot;);\r\n            }, new Date());\r\n    \r\n        }\r\n    }\r\n\r\nIt works fine. \r\n\r\neach 1 second start `test()` method and work 9 seconds. On 5 secon I have full threadPool and wait first free thread. If I set `sleep(5000L)` - threadPool can not fill up.\r\n\r\nBut now I need to change the poolSize in runtime. For example from 5 to 10. How can I do it?","title":"ThreadPoolTaskScheduler change poolSize in runtime","body":"<p>I create a scheduler:</p>\n<pre><code>@Bean\nTaskScheduler taskScheduler(){\n    ThreadPoolTaskScheduler threadPoolTaskScheduler = new ThreadPoolTaskScheduler();\n    threadPoolTaskScheduler.setPoolSize(5);\n    threadPoolTaskScheduler.setAwaitTerminationSeconds(60);\n    threadPoolTaskScheduler.setThreadNamePrefix(&quot;Test-&quot;);\n    return threadPoolTaskScheduler;\n}\n</code></pre>\n<p>I wait next:</p>\n<p>Each 1 second triggered my scheduled method and start 5 threads(<code>PoolSize(5)</code>) and each thread will make my logic. For that I create scheduled method in @Component bean:</p>\n<pre><code>@Slf4j\n@Component\npublic class MyScheduler {\n\n    private final TaskScheduler taskScheduler;\n\n    public MyScheduler(TaskScheduler taskScheduler) {\n        this.taskScheduler = taskScheduler;\n    }\n\n    @Scheduled(fixedDelay = 1000L)\n    public void test(){\n        taskScheduler.schedule(() -&gt; {\n            try {\n                Thread.sleep(9000L);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n            log.info(&quot;test&quot;);\n        }, new Date());\n\n    }\n}\n</code></pre>\n<p>It works fine.</p>\n<p>each 1 second start <code>test()</code> method and work 9 seconds. On 5 secon I have full threadPool and wait first free thread. If I set <code>sleep(5000L)</code> - threadPool can not fill up.</p>\n<p>But now I need to change the poolSize in runtime. For example from 5 to 10. How can I do it?</p>\n"},{"tags":["java","html","validation","jtidy"],"answers":[{"tags":[],"owner":{"account_id":2145385,"reputation":2499,"user_id":1903108,"accept_rate":80,"display_name":"Tariq"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1451425720,"creation_date":1414499699,"answer_id":26608501,"question_id":26608365,"body_markdown":"According to the documentation you can get total error counts for your last parse operation using [getParseErrors][1]\r\n\r\n\r\n  [1]: http://jtidy.sourceforge.net/apidocs/org/w3c/tidy/Tidy.html#getParseErrors()\r\n\r\nSo you can do something like\r\n\r\n    private boolean isValid(String htmlData){\r\n       Tidy tidy = new Tidy();\r\n       InputStream stream = new ByteArrayInputStream(htmlData.getBytes());\r\n       tidy.parse(stream, System.out);\r\n       return (tidy.getParseErrors() == 0);\r\n    }","title":"How to validate HTML using JTidy?","body":"<p>According to the documentation you can get total error counts for your last parse operation using <a href=\"http://jtidy.sourceforge.net/apidocs/org/w3c/tidy/Tidy.html#getParseErrors()\" rel=\"nofollow\">getParseErrors</a></p>\n\n<p>So you can do something like</p>\n\n<pre><code>private boolean isValid(String htmlData){\n   Tidy tidy = new Tidy();\n   InputStream stream = new ByteArrayInputStream(htmlData.getBytes());\n   tidy.parse(stream, System.out);\n   return (tidy.getParseErrors() == 0);\n}\n</code></pre>\n"}],"owner":{"account_id":2458107,"reputation":1484,"user_id":2142786,"accept_rate":29,"display_name":"user2142786"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3113,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1689353505,"creation_date":1414499226,"question_id":26608365,"body_markdown":"I want to validate my HTML using JTidy. I want a response of true or false if it is valid or not, respectively. Currently I am using this code:\r\n\r\n    String htmlData = &quot;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;div&gt;Hello Java &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;&quot;;  \r\n    Tidy tidy = new Tidy();\r\n    \r\n    InputStream stream = new ByteArrayInputStream(htmlData.getBytes());\r\n    tidy.parse(stream, System.out);\r\n\r\nIs there a way to get a boolean response whether my HTML is valid or not?","title":"How to validate HTML using JTidy?","body":"<p>I want to validate my HTML using JTidy. I want a response of true or false if it is valid or not, respectively. Currently I am using this code:</p>\n<pre><code>String htmlData = &quot;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;div&gt;Hello Java &lt;/div&gt;&lt;/body&gt;&lt;/html&gt;&quot;;  \nTidy tidy = new Tidy();\n\nInputStream stream = new ByteArrayInputStream(htmlData.getBytes());\ntidy.parse(stream, System.out);\n</code></pre>\n<p>Is there a way to get a boolean response whether my HTML is valid or not?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":5,"creation_date":1689159329,"post_id":76669782,"comment_id":135173022,"body_markdown":"The stack frames that contain the local variables and recently-returned return values are part of the GC roots, so everything on there is considered a &quot;root reference&quot;, so to say. Also that the &quot;stop the world&quot; model you describe in the first sentence isn&#39;t *necessarily* true for all GC implementations. Some never stop the whole JVM.","body":"The stack frames that contain the local variables and recently-returned return values are part of the GC roots, so everything on there is considered a &quot;root reference&quot;, so to say. Also that the &quot;stop the world&quot; model you describe in the first sentence isn&#39;t <i>necessarily</i> true for all GC implementations. Some never stop the whole JVM."},{"owner":{"account_id":27557975,"reputation":23,"user_id":22215161,"display_name":"user22215161"},"score":0,"creation_date":1689159857,"post_id":76669782,"comment_id":135173153,"body_markdown":"is that the stack frame itself is considered the gc root? then, how do know that stack frame is related to the heap instance? \nthank you","body":"is that the stack frame itself is considered the gc root? then, how do know that stack frame is related to the heap instance?  thank you"},{"owner":{"account_id":24885,"reputation":30822,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1689353404,"post_id":76669782,"comment_id":135206584,"body_markdown":"The title ought to be more specific.","body":"The title ought to be more specific."}],"answers":[{"tags":[],"owner":{"account_id":27810413,"reputation":456,"user_id":21232911,"display_name":"nischal sharma"},"down_vote_count":2,"up_vote_count":4,"is_accepted":true,"score":2,"last_activity_date":1689160955,"creation_date":1689159545,"answer_id":76669823,"question_id":76669782,"body_markdown":"In the specific case of the Java code you provided, the reference returned by the returnRef() method will be stored on the stack frame of the main() method until it is assigned to the ref variable. This is because the Java Virtual Machine (JVM) specification requires that method results be stored in memory, rather than being solely held in registers. Therefore, the JVM ensures that the object reference is available and can be assigned to the ref variable.\r\n\r\nOnce the returnRef() method is executed, it will return the reference to the newly created Object, and the JVM will store this reference in memory, making it accessible to the main() method. When the ref variable is assigned this reference, it becomes a valid reference to the object, and the object remains reachable.\r\n\r\nIn this case, if garbage collection were to occur immediately after the returnRef() method is executed and before the assignment to ref, the GC would still recognize that the object is reachable. It would consider the object reachable through the stack frame of the returnRef() method, even though the ref variable in the main() method has not yet been initialized.","title":"Questions about the Garbage Collector","body":"<p>In the specific case of the Java code you provided, the reference returned by the returnRef() method will be stored on the stack frame of the main() method until it is assigned to the ref variable. This is because the Java Virtual Machine (JVM) specification requires that method results be stored in memory, rather than being solely held in registers. Therefore, the JVM ensures that the object reference is available and can be assigned to the ref variable.</p>\n<p>Once the returnRef() method is executed, it will return the reference to the newly created Object, and the JVM will store this reference in memory, making it accessible to the main() method. When the ref variable is assigned this reference, it becomes a valid reference to the object, and the object remains reachable.</p>\n<p>In this case, if garbage collection were to occur immediately after the returnRef() method is executed and before the assignment to ref, the GC would still recognize that the object is reachable. It would consider the object reachable through the stack frame of the returnRef() method, even though the ref variable in the main() method has not yet been initialized.</p>\n"}],"owner":{"account_id":27557975,"reputation":23,"user_id":22215161,"display_name":"user22215161"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":100,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76669823,"answer_count":1,"score":1,"last_activity_date":1689353365,"creation_date":1689159187,"question_id":76669782,"body_markdown":"GC periodically suspends execution while the application is running. It marks the currently referenced object by referring to the method area and stack reference variables. Then the unreferenced objects are removed.\r\n\r\nAnd suddenly I have a question.\r\n\r\n```\r\npublic static void main(String[] args) {\r\n\r\n   Object ref = this.returnRef();\r\n\r\n}\r\n\r\npublic Object returnRef() {\r\n\r\n   return new Object();\r\n\r\n}\r\n```\r\n\r\nWhen there is the above code, the reference to return new Object() is returned and the ref variable is normally initialized, but *if* we assume that GC is executed right after returning, how will GC recognize this and judge it as an object being referenced? (while the reference variable ref is not yet in the stack frame)?\r\n\r\n\r\n\r\n\r\n","title":"Questions about the Garbage Collector","body":"<p>GC periodically suspends execution while the application is running. It marks the currently referenced object by referring to the method area and stack reference variables. Then the unreferenced objects are removed.</p>\n<p>And suddenly I have a question.</p>\n<pre><code>public static void main(String[] args) {\n\n   Object ref = this.returnRef();\n\n}\n\npublic Object returnRef() {\n\n   return new Object();\n\n}\n</code></pre>\n<p>When there is the above code, the reference to return new Object() is returned and the ref variable is normally initialized, but <em>if</em> we assume that GC is executed right after returning, how will GC recognize this and judge it as an object being referenced? (while the reference variable ref is not yet in the stack frame)?</p>\n"},{"tags":["java","powershell"],"comments":[{"owner":{"account_id":235911,"reputation":23311,"user_id":503046,"display_name":"vonPryz"},"score":1,"creation_date":1689353582,"post_id":76689719,"comment_id":135206628,"body_markdown":"Powershell doesn&#39;t support Java archives, so what you are trying to do will not work. Either use Java all the way, use ODBC, or [DB2 native .Net](https://www.ibm.com/docs/en/db2-warehouse?topic=programmatically-net) library.","body":"Powershell doesn&#39;t support Java archives, so what you are trying to do will not work. Either use Java all the way, use ODBC, or <a href=\"https://www.ibm.com/docs/en/db2-warehouse?topic=programmatically-net\" rel=\"nofollow noreferrer\">DB2 native .Net</a> library."},{"owner":{"account_id":946589,"reputation":23,"user_id":973733,"display_name":"Papa Dilbert"},"score":0,"creation_date":1689357855,"post_id":76689719,"comment_id":135207412,"body_markdown":"Interesting. ChatGPT provided the solution to use Add-Type -P with a jar. It&#39;s not so smart after all. Thanks!","body":"Interesting. ChatGPT provided the solution to use Add-Type -P with a jar. It&#39;s not so smart after all. Thanks!"}],"owner":{"account_id":946589,"reputation":23,"user_id":973733,"display_name":"Papa Dilbert"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689353271,"creation_date":1689353271,"question_id":76689719,"body_markdown":"I&#39;m attempting to use Windows Powershell to query a DB2 database using db2jcc.jar to connect.\r\n\r\n$classpath is set to the Windows path of db2jcc.jar.\r\n\r\nAdd-Type -Path &quot;$classpath&quot; \r\n\r\nfails with messsage:\r\nAdd-Type : Cannot add type. The &quot;.JAR&quot; extension is not supported.\r\n\r\nSo how do I use jdbc to connect to DB2 with Powershell?\r\n\r\n","title":"Windows Powershell AddType jar extension not supported","body":"<p>I'm attempting to use Windows Powershell to query a DB2 database using db2jcc.jar to connect.</p>\n<p>$classpath is set to the Windows path of db2jcc.jar.</p>\n<p>Add-Type -Path &quot;$classpath&quot;</p>\n<p>fails with messsage:\nAdd-Type : Cannot add type. The &quot;.JAR&quot; extension is not supported.</p>\n<p>So how do I use jdbc to connect to DB2 with Powershell?</p>\n"},{"tags":["java","postgresql","tomcat","datasource","jndi"],"answers":[{"tags":[],"owner":{"account_id":5629908,"reputation":1224,"user_id":4457144,"accept_rate":60,"display_name":"vincent"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1442308822,"creation_date":1442308822,"answer_id":32582307,"question_id":32581833,"body_markdown":"for the second question, deployed means that your datasource is declared in the context.xml in tomcat.\r\nHere is an example of an oracle database (you have to change the driver  for postgres) : \r\n\r\n    &lt;Resource name=&quot;jdbc/myoracle&quot; auth=&quot;Container&quot;\r\n                  type=&quot;javax.sql.DataSource&quot; driverClassName=&quot;oracle.jdbc.OracleDriver&quot;\r\n                  url=&quot;jdbc:oracle:thin:@127.0.0.1:1521:mysid&quot;\r\n                  username=&quot;scott&quot; password=&quot;tiger&quot; maxTotal=&quot;20&quot; maxIdle=&quot;10&quot;\r\n                  maxWaitMillis=&quot;-1&quot;/&gt;\r\n\r\nAfter that, you can code the java part, for that you can watch this link http://www.javapractices.com/topic/TopicAction.do?Id=127\r\n\r\nFor a complete example, there&#39;s a good tutorial here http://alvinalexander.com/blog/post/java/how-configure-tomcat-dbcp-connection-pool-pooling-postgres.\r\n\r\nHope this help\r\n","title":"Working with DataSource and Tomcat JNDI API","body":"<p>for the second question, deployed means that your datasource is declared in the context.xml in tomcat.\nHere is an example of an oracle database (you have to change the driver  for postgres) : </p>\n\n<pre><code>&lt;Resource name=\"jdbc/myoracle\" auth=\"Container\"\n              type=\"javax.sql.DataSource\" driverClassName=\"oracle.jdbc.OracleDriver\"\n              url=\"jdbc:oracle:thin:@127.0.0.1:1521:mysid\"\n              username=\"scott\" password=\"tiger\" maxTotal=\"20\" maxIdle=\"10\"\n              maxWaitMillis=\"-1\"/&gt;\n</code></pre>\n\n<p>After that, you can code the java part, for that you can watch this link <a href=\"http://www.javapractices.com/topic/TopicAction.do?Id=127\" rel=\"nofollow\">http://www.javapractices.com/topic/TopicAction.do?Id=127</a></p>\n\n<p>For a complete example, there's a good tutorial here <a href=\"http://alvinalexander.com/blog/post/java/how-configure-tomcat-dbcp-connection-pool-pooling-postgres\" rel=\"nofollow\">http://alvinalexander.com/blog/post/java/how-configure-tomcat-dbcp-connection-pool-pooling-postgres</a>.</p>\n\n<p>Hope this help</p>\n"}],"owner":{"account_id":5459164,"reputation":1126,"user_id":4366957,"accept_rate":88,"display_name":"jwi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3668,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":32582307,"answer_count":1,"score":1,"last_activity_date":1689352631,"creation_date":1442307479,"question_id":32581833,"body_markdown":"I&#39;m trying to understand establishing a database-connection with a `DataSource Object` and the `JNDI API`.\r\n\r\nI&#39;m working with Intellij UE and have a local `Tomcat-8`- and `Postgres-Server` running.\r\n\r\nI proceed as mentioned in the Oracle Java Documentation:\r\n\r\n1. Creating Instance of `DataSource Class` and Setting its Properties\r\n\r\n        org.postgresql.ds.PGSimpleDataSource dataSource = new org.postgresql.ds.PGSimpleDataSource();\r\n        dataSource.setServerName(&quot;localhost&quot;);\r\n        dataSource.setDatabaseName(&quot;db01&quot;);\r\n        dataSource.setUser(&quot;jwi&quot;);\r\n        dataSource.setPassword(&quot;password&quot;);\r\n\r\n2. Registering `DataSource Object` with Naming Service That Uses `JNDI API`\r\n\r\n        Context ctx = null;\r\n\r\n        try {\r\n            ctx = new InitialContext();\r\n            ctx.bind(&quot;jdbc/localDB&quot;, dataSource);\r\n        } catch (NamingException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\nThe Oracle Documentation says:\r\n\r\n&gt; With the properties set, the system administrator can register the BasicDataSource object with a JNDI (Java Naming and Directory Interface) naming service.\r\n\r\nSo my first Question is: What means to register a `DataSource`? Is my code obove already the registration of an `DataSource Object` to `JNDI`?\r\n\r\n3. Using Deployed `DataSource Object`\r\n\r\n        try {\r\n\r\n            Context ctx = new InitialContext();\r\n            DataSource ds = (DataSource) ctx.lookup(&quot;jdbc/localDB&quot;);\r\n            dbCon = ds.getConnection();\r\n            ...\r\n\r\nIn this code cutting IntelliJ always claims, that it can&#39;t resolve the method `getConnection()`.\r\n\r\nThe Oracle Documentation says:\r\n\r\n&gt; After a basic DataSource implementation is deployed by a system administrator, it is ready for a programmer to use.\r\n\r\nSo my second Question is: What exactly means deployed in this case? Creating a `DataSource Instance` and execute the registration with `JDNI`? Or does deployed mean the `Tomcat` `context.xml` and `web.xml` configuration ([Tomcat 8 JNDI How-To][1])?\r\n\r\nI&#39;d really appreciate if anybody has a good step by step instruction for this issue, in fact that the Oracle Documentation isn&#39;t really clear about some points imho.\r\n\r\n  [1]: https://tomcat.apache.org/tomcat-8.0-doc/jndi-datasource-examples-howto.html","title":"Working with DataSource and Tomcat JNDI API","body":"<p>I'm trying to understand establishing a database-connection with a <code>DataSource Object</code> and the <code>JNDI API</code>.</p>\n\n<p>I'm working with Intellij UE and have a local <code>Tomcat-8</code>- and <code>Postgres-Server</code> running.</p>\n\n<p>I proceed as mentioned in the Oracle Java Documentation:</p>\n\n<ol>\n<li><p>Creating Instance of <code>DataSource Class</code> and Setting its Properties</p>\n\n<pre><code>org.postgresql.ds.PGSimpleDataSource dataSource = new org.postgresql.ds.PGSimpleDataSource();\ndataSource.setServerName(\"localhost\");\ndataSource.setDatabaseName(\"db01\");\ndataSource.setUser(\"jwi\");\ndataSource.setPassword(\"password\");\n</code></pre></li>\n<li><p>Registering <code>DataSource Object</code> with Naming Service That Uses <code>JNDI API</code></p>\n\n<pre><code>Context ctx = null;\n\ntry {\n    ctx = new InitialContext();\n    ctx.bind(\"jdbc/localDB\", dataSource);\n} catch (NamingException e) {\n    e.printStackTrace();\n}\n</code></pre></li>\n</ol>\n\n<p>The Oracle Documentation says:</p>\n\n<blockquote>\n  <p>With the properties set, the system administrator can register the BasicDataSource object with a JNDI (Java Naming and Directory Interface) naming service.</p>\n</blockquote>\n\n<p>So my first Question is: What means to register a <code>DataSource</code>? Is my code obove already the registration of an <code>DataSource Object</code> to <code>JNDI</code>?</p>\n\n<ol start=\"3\">\n<li><p>Using Deployed <code>DataSource Object</code></p>\n\n<pre><code>try {\n\n    Context ctx = new InitialContext();\n    DataSource ds = (DataSource) ctx.lookup(\"jdbc/localDB\");\n    dbCon = ds.getConnection();\n    ...\n</code></pre></li>\n</ol>\n\n<p>In this code cutting IntelliJ always claims, that it can't resolve the method <code>getConnection()</code>.</p>\n\n<p>The Oracle Documentation says:</p>\n\n<blockquote>\n  <p>After a basic DataSource implementation is deployed by a system administrator, it is ready for a programmer to use.</p>\n</blockquote>\n\n<p>So my second Question is: What exactly means deployed in this case? Creating a <code>DataSource Instance</code> and execute the registration with <code>JDNI</code>? Or does deployed mean the <code>Tomcat</code> <code>context.xml</code> and <code>web.xml</code> configuration (<a href=\"https://tomcat.apache.org/tomcat-8.0-doc/jndi-datasource-examples-howto.html\" rel=\"nofollow\">Tomcat 8 JNDI How-To</a>)?</p>\n\n<p>I'd really appreciate if anybody has a good step by step instruction for this issue, in fact that the Oracle Documentation isn't really clear about some points imho.</p>\n"},{"tags":["java","java-module","java-platform-module-system"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1669803049,"post_id":74582070,"comment_id":131724083,"body_markdown":"Your problem is entirely unrelated to modules. If you load class `Foo` through `Interpreters$ClassLoaders$$anon$1@45815ffc` and another class `Foo` through `Loader@e9b78b0`, these are different classes. Whether these `Foo` classes belong to a module, doesn’t matter.","body":"Your problem is entirely unrelated to modules. If you load class <code>Foo</code> through <code>Interpreters$ClassLoaders$$anon$1@45815ffc</code> and another class <code>Foo</code> through <code>Loader@e9b78b0</code>, these are different classes. Whether these <code>Foo</code> classes belong to a module, doesn’t matter."}],"answers":[{"tags":[],"owner":{"account_id":21851467,"reputation":682,"user_id":16143492,"display_name":"nineninesevenfour"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689352610,"creation_date":1689348643,"answer_id":76689193,"question_id":74582070,"body_markdown":"The comment from @Holger names the problem: That `Foo` isn&#39;t `Foo` as soon as they are both loaded by different class/module loaders.\r\n\r\nLet me sketch two different approaches:\r\n\r\nSolution1: The module way\r\n---\r\nThe goal here is to have class `Foo` only loaded once.\r\nTo achieve this the application with the code above should be in a module as well and require `Model`:\r\n```java\r\nmodule App {\r\n    requires Model;\r\n}\r\n```\r\nTo make this work you have additionally to avoid having `Model` loaded a second time through the presented code. This can be achieved either (a) by *not* having it placed into `&quot;\\\\model\\\\lib\\\\EC&quot;`. Or by (b) changing the order of `ModuleFinder`s in `Configuration.resolve()`:\r\n```\r\nConfiguration cf = parent.configuration().resolve(ModuleFinder.of(), finder. Set.of(&quot;Implementation&quot;));\r\n```\r\nThis way `Implementation` will use the version of `Model` present in the module path of the calling code and not load it via `finder`. \r\n\r\nSolution 2: Use a proxy\r\n---\r\nThis requires `Foo` to be an interface.\r\n\r\nYou could have a method `proxyOf` that looks like this:\r\n```java\r\n    private Foo proxyOf(Object result) {\r\n        InvocationHandler handler = (proxy, method, args) -&gt; {\r\n            Method delegate = result.getClass().getMethod(method.getName(), method.getParameterTypes());\r\n            return delegate.invoke(result, args);\r\n        };\r\n        return (Foo) Proxy.newProxyInstance(this.getClass().getClassLoader(), new Class[]{ Foo.class }, handler);\r\n    }\r\n```\r\nThis way you can have two versions of `Foo`. You just have to get sure, that the application code is actually allowed to access method `delegate`. So it (and the containing implementation class) must either be `public` or you will need an additional `delegate.setAccessible(true);` before calling it. If the application is within a module (like in Solution 1), the package of `delegate` must be opened through the `opens` clause:\r\n```java\r\nmodule Implementation {\r\n    requires transitive Model;\r\n    exports org.example.impl;\r\n    opens org.example.impl;\r\n}\r\n```\r\nPlease not that there is a _**major pitfall**_ in the proxy solution: It works well as long as you are passing types of the JRE, but as soon as you pass your own types `method.getParameterTypes()` will return the wrong types leading to a `NoSuchMethodException`. Even when you manage to get the correct types you would need to pass proxies of that types. Then all this will get *really* complicated and you will end up with your own little &quot;back and forth proxyfication&quot; framework.\r\n\r\nFinal notes\r\n---\r\nUnfortunately you do not describe what you *actually* want to achieve. So we cannot know what problem you want to solve with it and why you need the code above. Honestly, it seems quite difficult to me that your code could be maintained by someone else. Maybe you could achieve the same thing by using [`ServiceLoader`][1]?\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/ServiceLoader.html","title":"How to cast object returned from Module","body":"<p>The comment from @Holger names the problem: That <code>Foo</code> isn't <code>Foo</code> as soon as they are both loaded by different class/module loaders.</p>\n<p>Let me sketch two different approaches:</p>\n<h2>Solution1: The module way</h2>\n<p>The goal here is to have class <code>Foo</code> only loaded once.\nTo achieve this the application with the code above should be in a module as well and require <code>Model</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>module App {\n    requires Model;\n}\n</code></pre>\n<p>To make this work you have additionally to avoid having <code>Model</code> loaded a second time through the presented code. This can be achieved either (a) by <em>not</em> having it placed into <code>&quot;\\\\model\\\\lib\\\\EC&quot;</code>. Or by (b) changing the order of <code>ModuleFinder</code>s in <code>Configuration.resolve()</code>:</p>\n<pre><code>Configuration cf = parent.configuration().resolve(ModuleFinder.of(), finder. Set.of(&quot;Implementation&quot;));\n</code></pre>\n<p>This way <code>Implementation</code> will use the version of <code>Model</code> present in the module path of the calling code and not load it via <code>finder</code>.</p>\n<h2>Solution 2: Use a proxy</h2>\n<p>This requires <code>Foo</code> to be an interface.</p>\n<p>You could have a method <code>proxyOf</code> that looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private Foo proxyOf(Object result) {\n        InvocationHandler handler = (proxy, method, args) -&gt; {\n            Method delegate = result.getClass().getMethod(method.getName(), method.getParameterTypes());\n            return delegate.invoke(result, args);\n        };\n        return (Foo) Proxy.newProxyInstance(this.getClass().getClassLoader(), new Class[]{ Foo.class }, handler);\n    }\n</code></pre>\n<p>This way you can have two versions of <code>Foo</code>. You just have to get sure, that the application code is actually allowed to access method <code>delegate</code>. So it (and the containing implementation class) must either be <code>public</code> or you will need an additional <code>delegate.setAccessible(true);</code> before calling it. If the application is within a module (like in Solution 1), the package of <code>delegate</code> must be opened through the <code>opens</code> clause:</p>\n<pre class=\"lang-java prettyprint-override\"><code>module Implementation {\n    requires transitive Model;\n    exports org.example.impl;\n    opens org.example.impl;\n}\n</code></pre>\n<p>Please not that there is a <em><strong>major pitfall</strong></em> in the proxy solution: It works well as long as you are passing types of the JRE, but as soon as you pass your own types <code>method.getParameterTypes()</code> will return the wrong types leading to a <code>NoSuchMethodException</code>. Even when you manage to get the correct types you would need to pass proxies of that types. Then all this will get <em>really</em> complicated and you will end up with your own little &quot;back and forth proxyfication&quot; framework.</p>\n<h2>Final notes</h2>\n<p>Unfortunately you do not describe what you <em>actually</em> want to achieve. So we cannot know what problem you want to solve with it and why you need the code above. Honestly, it seems quite difficult to me that your code could be maintained by someone else. Maybe you could achieve the same thing by using <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/ServiceLoader.html\" rel=\"nofollow noreferrer\"><code>ServiceLoader</code></a>?</p>\n"}],"owner":{"account_id":1457199,"reputation":4503,"user_id":1629242,"accept_rate":56,"display_name":"Amogh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":155,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689352610,"creation_date":1669464871,"question_id":74582070,"body_markdown":"I trying `ModuleLayer` with JDK 11, I have created two modules `Implementation` and `Model`. Consider the `Implementation` module provides a method which returns an object which is of type `Foo`, the class `Foo` is defined in `Model` module.\r\n\r\nSo module `Implementation` `requires Model;` and module `Model` exports all its namespaces.\r\n\r\nI a separate application, I am creating  `Configuration` to resolve both the modules and created `ModuleLayer` as well. By using `layer.findLoader(&quot;Implementation&quot;).loadClass()` I have loaded a class from `Implementation` module and invoked static method using `method.invoke(null, &quot;test&quot;);`\r\nwhich returns an `Object`.\r\n\r\nNow I don&#39;t understand, how should I can cast this object to `Foo`? I cannot use `(Foo) obj` because the jar of `Model` module is not on classpath. and even if I put it I end up with exception\r\n\r\n`Caused by: java.lang.ClassCastException: class com.test.model.Foo cannot be cast to class com.test.model.Foo (com.test.model.Foo is in module Model of loader jdk.internal.loader.Loader @e9b78b0; com.test.model.Foo is in unnamed module of loader com.company.container.internal.Interpreters$ClassLoaders$$anon$1 @45815ffc)`\r\n\r\n```\r\nObject provider=null;\r\ntry\r\n{\r\n   var path = Path.of(Core.getConfiguration().getBasePath().getPath() ,&quot;\\\\model\\\\lib\\\\EC&quot;);\r\n   ModuleFinder finder = ModuleFinder.of(path);\r\n   var parent = ModuleLayer.boot();\r\n   Configuration cf = parent.configuration().resolve(finder, ModuleFinder.of(), Set.of(&quot;Implementation&quot;));\r\n   ClassLoader scl = this.getClass().getClassLoader(); // intentionally using this class&#39;s loader  \r\n   ModuleLayer layer = parent.defineModulesWithOneLoader(cf, scl);\r\n   var cl = layer.findLoader(&quot;Implementation&quot;);\r\n   Class&lt;?&gt; classTest = cl.loadClass(&quot;com.test.AutoConfiguration&quot;);\r\n   var method = classSendMailFromX.getMethod(&quot;getProvider&quot;, String.class);\r\n   provider = method.invoke(null, &quot;test&quot;);\r\n}\r\ncatch (Exception e) {\r\n   throw new CoreException(e);\r\n}\r\nif(provider == null)\r\n{\r\n   throw new Exception(&quot;provider cannot be empty&quot;);\r\n}\r\n\r\nvar myProvider = (Foo) provider; // This line compiles but calls fails at runtime if I put `Model` module jar on classpath\r\n```\r\n\r\nI understand the reason, that any jar (even if it is a module) at classpath will be treated as unnamed module. But, why I cannot able to cast it? And is there any way to do it? ","title":"How to cast object returned from Module","body":"<p>I trying <code>ModuleLayer</code> with JDK 11, I have created two modules <code>Implementation</code> and <code>Model</code>. Consider the <code>Implementation</code> module provides a method which returns an object which is of type <code>Foo</code>, the class <code>Foo</code> is defined in <code>Model</code> module.</p>\n<p>So module <code>Implementation</code> <code>requires Model;</code> and module <code>Model</code> exports all its namespaces.</p>\n<p>I a separate application, I am creating  <code>Configuration</code> to resolve both the modules and created <code>ModuleLayer</code> as well. By using <code>layer.findLoader(&quot;Implementation&quot;).loadClass()</code> I have loaded a class from <code>Implementation</code> module and invoked static method using <code>method.invoke(null, &quot;test&quot;);</code>\nwhich returns an <code>Object</code>.</p>\n<p>Now I don't understand, how should I can cast this object to <code>Foo</code>? I cannot use <code>(Foo) obj</code> because the jar of <code>Model</code> module is not on classpath. and even if I put it I end up with exception</p>\n<p><code>Caused by: java.lang.ClassCastException: class com.test.model.Foo cannot be cast to class com.test.model.Foo (com.test.model.Foo is in module Model of loader jdk.internal.loader.Loader @e9b78b0; com.test.model.Foo is in unnamed module of loader com.company.container.internal.Interpreters$ClassLoaders$$anon$1 @45815ffc)</code></p>\n<pre><code>Object provider=null;\ntry\n{\n   var path = Path.of(Core.getConfiguration().getBasePath().getPath() ,&quot;\\\\model\\\\lib\\\\EC&quot;);\n   ModuleFinder finder = ModuleFinder.of(path);\n   var parent = ModuleLayer.boot();\n   Configuration cf = parent.configuration().resolve(finder, ModuleFinder.of(), Set.of(&quot;Implementation&quot;));\n   ClassLoader scl = this.getClass().getClassLoader(); // intentionally using this class's loader  \n   ModuleLayer layer = parent.defineModulesWithOneLoader(cf, scl);\n   var cl = layer.findLoader(&quot;Implementation&quot;);\n   Class&lt;?&gt; classTest = cl.loadClass(&quot;com.test.AutoConfiguration&quot;);\n   var method = classSendMailFromX.getMethod(&quot;getProvider&quot;, String.class);\n   provider = method.invoke(null, &quot;test&quot;);\n}\ncatch (Exception e) {\n   throw new CoreException(e);\n}\nif(provider == null)\n{\n   throw new Exception(&quot;provider cannot be empty&quot;);\n}\n\nvar myProvider = (Foo) provider; // This line compiles but calls fails at runtime if I put `Model` module jar on classpath\n</code></pre>\n<p>I understand the reason, that any jar (even if it is a module) at classpath will be treated as unnamed module. But, why I cannot able to cast it? And is there any way to do it?</p>\n"},{"tags":["java","optaplanner","timefold"],"comments":[{"owner":{"account_id":2524334,"reputation":232,"user_id":2193981,"display_name":"Istvan"},"score":0,"creation_date":1689944290,"post_id":76681267,"comment_id":135288477,"body_markdown":"I assume you&#39;re running your constraint tests when this happens. If so, make sure each `@PlanningVariable` is initialized otherwise your `@PlanningEntity` is ignored by the tests, hence the 0 score.","body":"I assume you&#39;re running your constraint tests when this happens. If so, make sure each <code>@PlanningVariable</code> is initialized otherwise your <code>@PlanningEntity</code> is ignored by the tests, hence the 0 score."}],"answers":[{"tags":[],"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225;š Petrovick&#253;"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689267820,"creation_date":1689267820,"answer_id":76681773,"question_id":76681267,"body_markdown":"What you&#39;re describing sounds a lot like a score corruption. Enable `[FULL_ASSERT][1]` to confirm that. Once confirmed, through a process of elimination, find the constraint which causes the score corruption. (Only rarely is it a combination of multiple constraints, it can usually be narrowed down to one.) \r\n\r\nOnce you know which one it is, we can discuss why.\r\n\r\n\r\n  [1]: https://timefold.ai/docs/timefold-solver/latest/configuration/configuration.html#environmentMode","title":"OptaPlanner starts violating hard constraints if I introduce a new problem fact (and says the hard score is 0)","body":"<p>What you're describing sounds a lot like a score corruption. Enable <code>[FULL_ASSERT][1]</code> to confirm that. Once confirmed, through a process of elimination, find the constraint which causes the score corruption. (Only rarely is it a combination of multiple constraints, it can usually be narrowed down to one.)</p>\n<p>Once you know which one it is, we can discuss why.</p>\n"}],"owner":{"account_id":4005154,"reputation":106,"user_id":3299989,"display_name":"MattWolc24"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689351944,"creation_date":1689263404,"question_id":76681267,"body_markdown":"I&#39;m very confused about this. Even ChatGPT is unsure of what&#39;s wrong. So I need to turn to the real experts.\r\n\r\nMy project can be found here: https://github.com/matthewjd24/OptaPlanner-Scheduler\r\n\r\nThis code has been adapted from the [Hello world quick start][1]. In summary, I have a job shop scheduling problem, but there are no &#39;projects&#39; - each job just needs to pass through a machine once and it&#39;s done. My hard and soft constraints work fine, but if I attempt to add a new problem fact/planning variable, it starts breaking the hard constraints and acting like it hasn&#39;t (as in, the hard score in the resulting solution is 0). I&#39;ll show you some relevant snippets of code:\r\n\r\nThis is my Planning Solution class:\r\n\r\n    @PlanningSolution\r\n    public class TimeTable {\r\n\r\n    @ValueRangeProvider\r\n    @ProblemFactCollectionProperty\r\n    private List&lt;Cycle&gt; timeslotList;\r\n    @ValueRangeProvider\r\n    @ProblemFactCollectionProperty\r\n    private List&lt;Machine&gt; machineList;\r\n    @ValueRangeProvider\r\n    @ProblemFactCollectionProperty\r\n    private List&lt;Mold&gt; moldList;\r\n    @PlanningEntityCollectionProperty\r\n    private List&lt;Job&gt; lessonList;\r\n\r\n    @PlanningScore\r\n    private HardSoftScore score;\r\n\r\nThis is my Planning Entity, the Job class:\r\n\r\n    @PlanningEntity\r\n    public class Job {\r\n\r\n    @PlanningId\r\n    private Long id;\r\n\r\n    public String jobName;\r\n    public Integer width;\r\n    public Integer height;\r\n    public Integer weight;\r\n\r\n    @PlanningVariable(nullable = true)\r\n    private Cycle timeslot;\r\n    @PlanningVariable(nullable = true)\r\n    private Machine machine;\r\n    @PlanningVariable(nullable = true)\r\n    private Mold mold;\r\n\r\n    public Job() {\r\n    }\r\n\r\n    public Job(Long id, String jobName, Integer width, Integer height, Integer weight) {\r\n        this.id = id;\r\n        this.jobName = jobName;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.weight = weight;\r\n    }\r\n\r\nMy constraint that applies a hard score penalty when two jobs have the same timeslot, same machine, and different IDs:\r\n\r\n    private Constraint machineProcessOneJobAtATime(ConstraintFactory constraintFactory) {\r\n        return constraintFactory\r\n            .forEach(Job.class)\r\n            .join(Job.class,\r\n                Joiners.equal(Job::getTimeslot),\r\n                Joiners.equal(Job::getMachine),\r\n                Joiners.lessThan(Job::getId))\r\n            .penalize(HardSoftScore.ONE_HARD)\r\n            .asConstraint(&quot;Multiple jobs scheduled for a machine at once&quot;);\r\n    }\r\n\r\nIf I comment out the @ValueRangeProvider and @ProblemFactCollectionProperty modifiers for the moldList in the planning solution, and @PlanningVariable(nullable = true) in the Job class, the constraint works fine. But the moment I add in the mold list as a variable, OptaPlanner starts breaking this hard constraint and saying the hard score is 0 (essentially acting like it hasn&#39;t broken the constraint). I have no constraints set up that interact with the Mold variable. Does anyone know why the machineProcessOneJobAtATime would stop working properly when the Mold planning variable is added? I&#39;m very confused about this. Thank you.\r\n\r\n  [1]: https://www.optaplanner.org/docs/optaplanner/latest/quickstart/hello-world/hello-world-quickstart.html","title":"OptaPlanner starts violating hard constraints if I introduce a new problem fact (and says the hard score is 0)","body":"<p>I'm very confused about this. Even ChatGPT is unsure of what's wrong. So I need to turn to the real experts.</p>\n<p>My project can be found here: <a href=\"https://github.com/matthewjd24/OptaPlanner-Scheduler\" rel=\"nofollow noreferrer\">https://github.com/matthewjd24/OptaPlanner-Scheduler</a></p>\n<p>This code has been adapted from the <a href=\"https://www.optaplanner.org/docs/optaplanner/latest/quickstart/hello-world/hello-world-quickstart.html\" rel=\"nofollow noreferrer\">Hello world quick start</a>. In summary, I have a job shop scheduling problem, but there are no 'projects' - each job just needs to pass through a machine once and it's done. My hard and soft constraints work fine, but if I attempt to add a new problem fact/planning variable, it starts breaking the hard constraints and acting like it hasn't (as in, the hard score in the resulting solution is 0). I'll show you some relevant snippets of code:</p>\n<p>This is my Planning Solution class:</p>\n<pre><code>@PlanningSolution\npublic class TimeTable {\n\n@ValueRangeProvider\n@ProblemFactCollectionProperty\nprivate List&lt;Cycle&gt; timeslotList;\n@ValueRangeProvider\n@ProblemFactCollectionProperty\nprivate List&lt;Machine&gt; machineList;\n@ValueRangeProvider\n@ProblemFactCollectionProperty\nprivate List&lt;Mold&gt; moldList;\n@PlanningEntityCollectionProperty\nprivate List&lt;Job&gt; lessonList;\n\n@PlanningScore\nprivate HardSoftScore score;\n</code></pre>\n<p>This is my Planning Entity, the Job class:</p>\n<pre><code>@PlanningEntity\npublic class Job {\n\n@PlanningId\nprivate Long id;\n\npublic String jobName;\npublic Integer width;\npublic Integer height;\npublic Integer weight;\n\n@PlanningVariable(nullable = true)\nprivate Cycle timeslot;\n@PlanningVariable(nullable = true)\nprivate Machine machine;\n@PlanningVariable(nullable = true)\nprivate Mold mold;\n\npublic Job() {\n}\n\npublic Job(Long id, String jobName, Integer width, Integer height, Integer weight) {\n    this.id = id;\n    this.jobName = jobName;\n    this.width = width;\n    this.height = height;\n    this.weight = weight;\n}\n</code></pre>\n<p>My constraint that applies a hard score penalty when two jobs have the same timeslot, same machine, and different IDs:</p>\n<pre><code>private Constraint machineProcessOneJobAtATime(ConstraintFactory constraintFactory) {\n    return constraintFactory\n        .forEach(Job.class)\n        .join(Job.class,\n            Joiners.equal(Job::getTimeslot),\n            Joiners.equal(Job::getMachine),\n            Joiners.lessThan(Job::getId))\n        .penalize(HardSoftScore.ONE_HARD)\n        .asConstraint(&quot;Multiple jobs scheduled for a machine at once&quot;);\n}\n</code></pre>\n<p>If I comment out the @ValueRangeProvider and @ProblemFactCollectionProperty modifiers for the moldList in the planning solution, and @PlanningVariable(nullable = true) in the Job class, the constraint works fine. But the moment I add in the mold list as a variable, OptaPlanner starts breaking this hard constraint and saying the hard score is 0 (essentially acting like it hasn't broken the constraint). I have no constraints set up that interact with the Mold variable. Does anyone know why the machineProcessOneJobAtATime would stop working properly when the Mold planning variable is added? I'm very confused about this. Thank you.</p>\n"},{"tags":["java","playframework"],"comments":[{"owner":{"account_id":17104557,"reputation":23,"user_id":12376869,"display_name":"CbSo"},"score":0,"creation_date":1693328820,"post_id":76689550,"comment_id":135745209,"body_markdown":"Sad this didn&#39;t get any responses :(","body":"Sad this didn&#39;t get any responses :("}],"owner":{"account_id":17104557,"reputation":23,"user_id":12376869,"display_name":"CbSo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689351902,"creation_date":1689351902,"question_id":76689550,"body_markdown":"I&#39;m currently trying to find a way to use a filter to catch all inbound requests and then send the body off somewhere else, per the officaldocumentation here: https://www.playframework.com/documentation/2.8.x/JavaHttpFilters this should be possible as the last section states:\r\n&quot;Play provides a lower level filter API called EssentialFilter that gives you full access to the body of the request. This API allows you to wrap EssentialAction with another action.&quot;\r\n\r\nHowever, when I create an EssentialAction wrapped in my EssentialFilter I&#39;m only given access to the header of the request and the example listed doesn&#39;t really cover how to access the body.\r\n\r\nThis makes sense per this accepted answer: https://stackoverflow.com/questions/25492592/how-to-log-the-body-from-every-request-in-play, but is in conflict with what the official docs state.\r\n\r\nIs there something I&#39;m missing?\r\n\r\n\r\n```java\r\npublic class SendBodyFilter extends EssentialFilter {\r\n    private final Materializer mat;\r\n    \r\n    @Inject\r\n    SendBodyFilter(\r\n            Materializer mat\r\n    ) {\r\n        super();\r\n        this.mat = mat;\r\n    }\r\n    @Override\r\n    public EssentialAction apply(EssentialAction next) {\r\n        return EssentialAction.of(request -&gt; {\r\n            System.out.println(request);\r\n            return next.apply(request);\r\n        });\r\n    }\r\n}\r\n\r\n```\r\n","title":"Java Play: Using an EssentialAction in an EssentialFilter to access the body of a request?","body":"<p>I'm currently trying to find a way to use a filter to catch all inbound requests and then send the body off somewhere else, per the officaldocumentation here: <a href=\"https://www.playframework.com/documentation/2.8.x/JavaHttpFilters\" rel=\"nofollow noreferrer\">https://www.playframework.com/documentation/2.8.x/JavaHttpFilters</a> this should be possible as the last section states:\n&quot;Play provides a lower level filter API called EssentialFilter that gives you full access to the body of the request. This API allows you to wrap EssentialAction with another action.&quot;</p>\n<p>However, when I create an EssentialAction wrapped in my EssentialFilter I'm only given access to the header of the request and the example listed doesn't really cover how to access the body.</p>\n<p>This makes sense per this accepted answer: <a href=\"https://stackoverflow.com/questions/25492592/how-to-log-the-body-from-every-request-in-play\">How to log the body from every request in Play?</a>, but is in conflict with what the official docs state.</p>\n<p>Is there something I'm missing?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SendBodyFilter extends EssentialFilter {\n    private final Materializer mat;\n    \n    @Inject\n    SendBodyFilter(\n            Materializer mat\n    ) {\n        super();\n        this.mat = mat;\n    }\n    @Override\n    public EssentialAction apply(EssentialAction next) {\n        return EssentialAction.of(request -&gt; {\n            System.out.println(request);\n            return next.apply(request);\n        });\n    }\n}\n\n</code></pre>\n"},{"tags":["java","html-to-pdf","openhtmltopdf"],"comments":[{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":0,"creation_date":1689358063,"post_id":76689504,"comment_id":135207455,"body_markdown":"[Have you tried this](https://www.sejda.com/html-to-pdf)?","body":"<a href=\"https://www.sejda.com/html-to-pdf\" rel=\"nofollow noreferrer\">Have you tried this</a>?"},{"owner":{"account_id":18320732,"reputation":173,"user_id":13341552,"display_name":"Faizan Shaikh Sarkar"},"score":0,"creation_date":1689568752,"post_id":76689504,"comment_id":135226404,"body_markdown":"Bu this isn&#39;t free, right? I will have to buy license to use this library?","body":"Bu this isn&#39;t free, right? I will have to buy license to use this library?"},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1689578987,"post_id":76689504,"comment_id":135227725,"body_markdown":"Try https://wkhtmltopdf.org/downloads.html but make sure your HTML is sanitized","body":"Try <a href=\"https://wkhtmltopdf.org/downloads.html\" rel=\"nofollow noreferrer\">wkhtmltopdf.org/downloads.html</a> but make sure your HTML is sanitized"}],"owner":{"account_id":18320732,"reputation":173,"user_id":13341552,"display_name":"Faizan Shaikh Sarkar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689351493,"creation_date":1689351493,"question_id":76689504,"body_markdown":"I am trying to look for a way to generate PDF for a very large complex HTML page(almost 500 PDF pages) that was created using angular 13 view but I am not able to find any proper solution. I tried many Java based Libraries like Openhtmltopdf, Ironpdf, pdfbox, flyingsaucer but as it was a complex page even after cleaning, parsing and trying to fix HTML with the help of JSOUP I was getting exceptions in all, I also tried rendering PDF from HTML from them but same issue.\r\n\r\nI also tried to capture an image/screenshot from backend and then convert it to PDF but that also didn&#39;t work as instead of the page it captures something else only, I tried this with html2image ava java library but similar issue. I looked into a way to do that using selenium or headless browser but I want it to work on linux cli as this app will be deployed there so without any GUI browser it won&#39;t work there as well.\r\n\r\nOnly thing that worked was html2canvas and jspdf but that also generated blurry pics with high size even after I tried compressing it and maintaining quality. Also it only worked for small HTML pages and failed drastically for medium to large HTML pages.\r\n\r\nFYI I am using Angular 13 in front end and Groovy/Java/Grails in backend.\r\n\r\nIs there anyway I can achieve what I want to achieve by using a free Java library?\r\n\r\nYour help is highly appreciated!","title":"Generate PDF from very large complex html page in java","body":"<p>I am trying to look for a way to generate PDF for a very large complex HTML page(almost 500 PDF pages) that was created using angular 13 view but I am not able to find any proper solution. I tried many Java based Libraries like Openhtmltopdf, Ironpdf, pdfbox, flyingsaucer but as it was a complex page even after cleaning, parsing and trying to fix HTML with the help of JSOUP I was getting exceptions in all, I also tried rendering PDF from HTML from them but same issue.</p>\n<p>I also tried to capture an image/screenshot from backend and then convert it to PDF but that also didn't work as instead of the page it captures something else only, I tried this with html2image ava java library but similar issue. I looked into a way to do that using selenium or headless browser but I want it to work on linux cli as this app will be deployed there so without any GUI browser it won't work there as well.</p>\n<p>Only thing that worked was html2canvas and jspdf but that also generated blurry pics with high size even after I tried compressing it and maintaining quality. Also it only worked for small HTML pages and failed drastically for medium to large HTML pages.</p>\n<p>FYI I am using Angular 13 in front end and Groovy/Java/Grails in backend.</p>\n<p>Is there anyway I can achieve what I want to achieve by using a free Java library?</p>\n<p>Your help is highly appreciated!</p>\n"},{"tags":["java","vaadin","vaadin-flow"],"answers":[{"tags":[],"owner":{"account_id":12280349,"reputation":10212,"user_id":8962195,"display_name":"Tatu Lund"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1689351348,"creation_date":1688408103,"answer_id":76607262,"question_id":76607137,"body_markdown":"I think there are two flaws in your code. \r\n\r\n1. If you are using route templates `@Route(&quot;blappity/display/:id/:blahID&quot;)`, hence RouteParameters, you should not implement `HasUrlParameter` and override `setParameter`. Instead you should take those parameters in beforeEnter or afterNavigation.\r\n\r\n2. If you want to forward the user with new parameters, you should note that `rerouteTo` does not update the URL, but forwardTo does. So if you use `beforeEnter`, you can use `forwardTo`. If you move the code to `afterNavigation`, you should use normal `ui.navigate(..)` instead, as when `afterNavigation` runs, the previous navigation cycle is complete.\r\n\r\nIMHO the best practice is just to store the url parameters to class field in `beforeEnter`, and do the actual `Grid` setup and fetching data in `afterNavigation`. Say you have view based access control, you do not want to fetch anything from database before navigation cycle is complete. \r\n\r\n","title":"Routing and Parameters in Vaadin flow","body":"<p>I think there are two flaws in your code.</p>\n<ol>\n<li><p>If you are using route templates <code>@Route(&quot;blappity/display/:id/:blahID&quot;)</code>, hence RouteParameters, you should not implement <code>HasUrlParameter</code> and override <code>setParameter</code>. Instead you should take those parameters in beforeEnter or afterNavigation.</p>\n</li>\n<li><p>If you want to forward the user with new parameters, you should note that <code>rerouteTo</code> does not update the URL, but forwardTo does. So if you use <code>beforeEnter</code>, you can use <code>forwardTo</code>. If you move the code to <code>afterNavigation</code>, you should use normal <code>ui.navigate(..)</code> instead, as when <code>afterNavigation</code> runs, the previous navigation cycle is complete.</p>\n</li>\n</ol>\n<p>IMHO the best practice is just to store the url parameters to class field in <code>beforeEnter</code>, and do the actual <code>Grid</code> setup and fetching data in <code>afterNavigation</code>. Say you have view based access control, you do not want to fetch anything from database before navigation cycle is complete.</p>\n"}],"owner":{"account_id":2393236,"reputation":123,"user_id":2092658,"display_name":"SriniMurthy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":150,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76607262,"answer_count":1,"score":1,"last_activity_date":1689351348,"creation_date":1688406828,"question_id":76607137,"body_markdown":"I see many questions pertaining to query and route parameters. Somehow each new flow and parameter resolutions seem to be a mystery just as soon as I think I have mastered them.\r\n\r\nI have two flows, MainView and a DisplayView\r\nMy MainView has a `setParameter(BeforeEvent beforeEvent)` thats like this\r\n\r\n      private void doGridSetup(BeforeEvent event) {\r\n        id  = id.isEmpty() ? event.getRouteParameters().\r\n                                    get(&quot;id&quot;).orElse(&quot;&quot;): id;\r\n        if (!id.isEmpty()) {\r\n            Optional&lt;BlappityBlahDTO&gt; blappityBlah = getBlappityBlah(id);\r\n            if (!blappityBlah.isEmpty()) {\r\n                setAllFields(blappityBlah);\r\n                try {\r\n                    event.rerouteTo(DisplayVeiw.class,\r\n                            prepRouteParameters(id, blappityBlah.get().getBlahID()));\r\n                } catch (Throwable th) {\r\n                    th.printStackTrace(System.err);\r\n                    //HACK HACK HACK.. doesn&#39;t work anyways\r\n                    UI.getCurrent().navigate(DisplayView.class, prepRouteParameters(id,\r\n                            blappityBlah.get().getBlahID()));\r\n                }\r\n            }\r\n            binder.bindInstanceFields(this);\r\n        }\r\n    }\r\n    \r\n    RouteParameters prepRouteParameters(String id ,String blahID) {\r\n        RouteParam idParam = new RouteParam(&quot;id&quot;, id);\r\n        RouteParam blahParam = new RouteParam(&quot;blahID&quot;, blahID;\r\n        RouteParameters routeParameters = new RouteParameters(  idParam, blahParam);\r\n        return routeParameters;\r\n   }\r\n\r\n        @Route(&quot;blappity/display/:id/:blahID&quot;)\r\n        @Slf4j\r\n       public class DisplayView extends VerticalLayout\r\n            implements BeforeEnterObserver, BeforeLeaveObserver, HasUrlParameter&lt;String&gt; {\r\n\r\nDoesn&#39;t seem to matter if I try `event.reroute` or `UI.getCurrent().navigate()`, my `DisplayView` never gets displayed and the error I see is &#39;Navigation target &#39;com.blappity.blaha.DisplayView&#39; requires a parameter.&#39; \r\nI am not sure what&#39;s going on anymore.\r\n\r\n`Java: 17.0.6`\r\n`Vaadin: 24.1.1`","title":"Routing and Parameters in Vaadin flow","body":"<p>I see many questions pertaining to query and route parameters. Somehow each new flow and parameter resolutions seem to be a mystery just as soon as I think I have mastered them.</p>\n<p>I have two flows, MainView and a DisplayView\nMy MainView has a <code>setParameter(BeforeEvent beforeEvent)</code> thats like this</p>\n<pre><code>  private void doGridSetup(BeforeEvent event) {\n    id  = id.isEmpty() ? event.getRouteParameters().\n                                get(&quot;id&quot;).orElse(&quot;&quot;): id;\n    if (!id.isEmpty()) {\n        Optional&lt;BlappityBlahDTO&gt; blappityBlah = getBlappityBlah(id);\n        if (!blappityBlah.isEmpty()) {\n            setAllFields(blappityBlah);\n            try {\n                event.rerouteTo(DisplayVeiw.class,\n                        prepRouteParameters(id, blappityBlah.get().getBlahID()));\n            } catch (Throwable th) {\n                th.printStackTrace(System.err);\n                //HACK HACK HACK.. doesn't work anyways\n                UI.getCurrent().navigate(DisplayView.class, prepRouteParameters(id,\n                        blappityBlah.get().getBlahID()));\n            }\n        }\n        binder.bindInstanceFields(this);\n    }\n}\n\nRouteParameters prepRouteParameters(String id ,String blahID) {\n    RouteParam idParam = new RouteParam(&quot;id&quot;, id);\n    RouteParam blahParam = new RouteParam(&quot;blahID&quot;, blahID;\n    RouteParameters routeParameters = new RouteParameters(  idParam, blahParam);\n    return routeParameters;\n</code></pre>\n<p>}</p>\n<pre><code>    @Route(&quot;blappity/display/:id/:blahID&quot;)\n    @Slf4j\n   public class DisplayView extends VerticalLayout\n        implements BeforeEnterObserver, BeforeLeaveObserver, HasUrlParameter&lt;String&gt; {\n</code></pre>\n<p>Doesn't seem to matter if I try <code>event.reroute</code> or <code>UI.getCurrent().navigate()</code>, my <code>DisplayView</code> never gets displayed and the error I see is 'Navigation target 'com.blappity.blaha.DisplayView' requires a parameter.'\nI am not sure what's going on anymore.</p>\n<p><code>Java: 17.0.6</code>\n<code>Vaadin: 24.1.1</code></p>\n"},{"tags":["java","openshift","sslhandshakeexception","ssl-handshake"],"owner":{"account_id":2162674,"reputation":1,"user_id":1916496,"display_name":"subbu kandula"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":162,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689351287,"creation_date":1688550952,"question_id":76619196,"body_markdown":"I need some help to enable SSL Handshake debug logs in Openshift. I have an application running in Openshift container and created POD for that application. I&#39;m not able to enable SSL Handshake debug logs and able to see only the application logs in the POD logs.\r\n\r\nFor stand alone application, we can enable SSL Handshake debug logs using below system parameter passing in java command.\r\n\r\n           -Djavax.net.debug=ssl,handshake\r\n\r\nFor Openshift, I tried to enable manually (`System.setParameter(&#39;javax.net.debug&#39;, &#39;ssl,handshake&#39;)` in Java, but not able to see debug logs in the POD application logs.\r\n\r\nCan someone please suggest to enable SSL Handshake debug logs in the Red Hat Openshift container.\r\n\r\nPlease let me know if you need more info.","title":"How to enable SSL Handshake Debug logs in Red Hat OpenShift application","body":"<p>I need some help to enable SSL Handshake debug logs in Openshift. I have an application running in Openshift container and created POD for that application. I'm not able to enable SSL Handshake debug logs and able to see only the application logs in the POD logs.</p>\n<p>For stand alone application, we can enable SSL Handshake debug logs using below system parameter passing in java command.</p>\n<pre><code>       -Djavax.net.debug=ssl,handshake\n</code></pre>\n<p>For Openshift, I tried to enable manually (<code>System.setParameter('javax.net.debug', 'ssl,handshake')</code> in Java, but not able to see debug logs in the POD application logs.</p>\n<p>Can someone please suggest to enable SSL Handshake debug logs in the Red Hat Openshift container.</p>\n<p>Please let me know if you need more info.</p>\n"},{"tags":["java","spring-boot","cassandra","cassandra-3.0","dsbulk"],"comments":[{"owner":{"account_id":15129760,"reputation":341,"user_id":10918015,"display_name":"stevenlacerda"},"score":1,"creation_date":1689348164,"post_id":76688422,"comment_id":135205420,"body_markdown":"dsbulk count will count rows, but that depends on your dsbulk query.","body":"dsbulk count will count rows, but that depends on your dsbulk query."}],"answers":[{"tags":[],"owner":{"account_id":3708341,"reputation":4302,"user_id":3086289,"accept_rate":100,"display_name":"Sangam Belose"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689345711,"creation_date":1689344100,"answer_id":76688531,"question_id":76688422,"body_markdown":"The issue you mentioned, CASSANDRA-14683, refers to a limitation where SELECT statements without a specific partition key can only scan up to 2 billion rows. \r\n\r\nAlternative approach to solve this could be using Pagination using token range and read your data in chunks untill all the data is fetched.\r\n\r\nSomething like below:\r\n\r\n     private static final int PAGE_SIZE = 10000; // Number of rows to fetch per page\r\n\r\n    public void getData() {\r\n        try (CqlSession session = CqlSession.builder().build()) {\r\n            Metadata metadata = session.getMetadata();\r\n            TokenRange fullRange = metadata.getTokenMap().get().getPagingTokenRange();\r\n            PagingIterable&lt;Row&gt; rows = session.execute(createPagingQuery(fullRange));\r\n            for (Row row : rows) {\r\n                // Process your data\r\n            }\r\n        }\r\n    }\r\n    \r\n    private String createPagingQuery(TokenRange range) {\r\n        return &quot;SELECT * FROM YOUR_TABLE WHERE token(partition_key) &gt;= &quot; + range.getStart().getValue()\r\n                + &quot; AND token(partition_key) &lt;= &quot; + range.getEnd().getValue()\r\n                + &quot; LIMIT &quot; + PAGE_SIZE;\r\n    }","title":"How can I scan the entire cassandra table which has 10B entries and no indexing?","body":"<p>The issue you mentioned, CASSANDRA-14683, refers to a limitation where SELECT statements without a specific partition key can only scan up to 2 billion rows.</p>\n<p>Alternative approach to solve this could be using Pagination using token range and read your data in chunks untill all the data is fetched.</p>\n<p>Something like below:</p>\n<pre><code> private static final int PAGE_SIZE = 10000; // Number of rows to fetch per page\n\npublic void getData() {\n    try (CqlSession session = CqlSession.builder().build()) {\n        Metadata metadata = session.getMetadata();\n        TokenRange fullRange = metadata.getTokenMap().get().getPagingTokenRange();\n        PagingIterable&lt;Row&gt; rows = session.execute(createPagingQuery(fullRange));\n        for (Row row : rows) {\n            // Process your data\n        }\n    }\n}\n\nprivate String createPagingQuery(TokenRange range) {\n    return &quot;SELECT * FROM YOUR_TABLE WHERE token(partition_key) &gt;= &quot; + range.getStart().getValue()\n            + &quot; AND token(partition_key) &lt;= &quot; + range.getEnd().getValue()\n            + &quot; LIMIT &quot; + PAGE_SIZE;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15129760,"reputation":341,"user_id":10918015,"display_name":"stevenlacerda"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689348101,"creation_date":1689348101,"answer_id":76689113,"question_id":76688422,"body_markdown":"I&#39;m not sure what you mean by scan, but you have two options when you want all of the data within a Cassandra table:\r\n\r\ndsbulk\r\nspark\r\n\r\nTrying to do a query like `select * from foo.bar` is never going to be efficient and will more than likely timeout with 10B rows. \r\n\r\nThe above two applications will break the queries down into partition range queries and you can set throttles to limit the number of operations so you don&#39;t get those same timeouts.\r\n\r\nWith dsbulk, you can get a count, or you can unload the data to a csv if you need to do that.","title":"How can I scan the entire cassandra table which has 10B entries and no indexing?","body":"<p>I'm not sure what you mean by scan, but you have two options when you want all of the data within a Cassandra table:</p>\n<p>dsbulk\nspark</p>\n<p>Trying to do a query like <code>select * from foo.bar</code> is never going to be efficient and will more than likely timeout with 10B rows.</p>\n<p>The above two applications will break the queries down into partition range queries and you can set throttles to limit the number of operations so you don't get those same timeouts.</p>\n<p>With dsbulk, you can get a count, or you can unload the data to a csv if you need to do that.</p>\n"},{"tags":[],"owner":{"account_id":4819783,"reputation":1505,"user_id":3890779,"display_name":"clunven"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689350831,"creation_date":1689350831,"answer_id":76689441,"question_id":76688422,"body_markdown":"It is totally possible to process such an amount of data. \r\n\r\nYour issue is likely relative to the abstraction layer (_Spring Data Cassandra_). The java drivers can easily process this amount data with 2 features (that can be used at the same time):\r\n- **Paging:** Very well [describe in the documentation](https://docs.datastax.com/en/developer/java-driver/4.17/manual/core/paging/)\r\n- **Distribute the query among multiple nodes (map/reduce) with a token map**. To do so you are using TokenRanges as describe by other. You can know more about it in the [official documentation](https://docs.datastax.com/en/developer/java-driver/4.17/manual/core/metadata/token/) as well.\r\n\r\n**1/ Spark**\r\n\r\nSpark uses the token range trick. You should look at [Spark Cassandra Connector](https://github.com/datastax/spark-cassandra-connector) (SCC). Now it is scala and a spark runtime.\r\n\r\n**2/ DSBulk**\r\n\r\nAllows only data copy or count so not something you can use to process you data. \r\n\r\n**3/ Apache Beam**\r\n\r\nA not-so-famous great way to process in a distributed way. It distributes the load among nodes as well and java compatible. [code](https://github.com/apache/beam/tree/master/sdks/java/io/cassandra).  Hre some [sample](https://beam.apache.org/releases/javadoc/2.33.0/org/apache/beam/sdk/io/cassandra/CassandraIO.html)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How can I scan the entire cassandra table which has 10B entries and no indexing?","body":"<p>It is totally possible to process such an amount of data.</p>\n<p>Your issue is likely relative to the abstraction layer (<em>Spring Data Cassandra</em>). The java drivers can easily process this amount data with 2 features (that can be used at the same time):</p>\n<ul>\n<li><strong>Paging:</strong> Very well <a href=\"https://docs.datastax.com/en/developer/java-driver/4.17/manual/core/paging/\" rel=\"nofollow noreferrer\">describe in the documentation</a></li>\n<li><strong>Distribute the query among multiple nodes (map/reduce) with a token map</strong>. To do so you are using TokenRanges as describe by other. You can know more about it in the <a href=\"https://docs.datastax.com/en/developer/java-driver/4.17/manual/core/metadata/token/\" rel=\"nofollow noreferrer\">official documentation</a> as well.</li>\n</ul>\n<p><strong>1/ Spark</strong></p>\n<p>Spark uses the token range trick. You should look at <a href=\"https://github.com/datastax/spark-cassandra-connector\" rel=\"nofollow noreferrer\">Spark Cassandra Connector</a> (SCC). Now it is scala and a spark runtime.</p>\n<p><strong>2/ DSBulk</strong></p>\n<p>Allows only data copy or count so not something you can use to process you data.</p>\n<p><strong>3/ Apache Beam</strong></p>\n<p>A not-so-famous great way to process in a distributed way. It distributes the load among nodes as well and java compatible. <a href=\"https://github.com/apache/beam/tree/master/sdks/java/io/cassandra\" rel=\"nofollow noreferrer\">code</a>.  Hre some <a href=\"https://beam.apache.org/releases/javadoc/2.33.0/org/apache/beam/sdk/io/cassandra/CassandraIO.html\" rel=\"nofollow noreferrer\">sample</a></p>\n"}],"owner":{"account_id":7668294,"reputation":79,"user_id":5811410,"accept_rate":0,"display_name":"Anish"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1689350831,"creation_date":1689343392,"question_id":76688422,"body_markdown":"I have a cassandra database which contains a table over 10B entries with no indexes. I need to get every row and do some data grouping. However I did using java &amp; spring boot framework and it only scanned 2B records which is the cassandra limit on select * from abc.abc as documented here : https://issues.apache.org/jira/browse/CASSANDRA-14683\r\nIs there a way in java to do it ? I tried ds bulk but that count whole table and does not read each row.","title":"How can I scan the entire cassandra table which has 10B entries and no indexing?","body":"<p>I have a cassandra database which contains a table over 10B entries with no indexes. I need to get every row and do some data grouping. However I did using java &amp; spring boot framework and it only scanned 2B records which is the cassandra limit on select * from abc.abc as documented here : <a href=\"https://issues.apache.org/jira/browse/CASSANDRA-14683\" rel=\"nofollow noreferrer\">https://issues.apache.org/jira/browse/CASSANDRA-14683</a>\nIs there a way in java to do it ? I tried ds bulk but that count whole table and does not read each row.</p>\n"},{"tags":["java","multithreading","wait"],"comments":[{"owner":{"account_id":962952,"reputation":5975,"user_id":986890,"accept_rate":55,"display_name":"Cedric Martin"},"score":4,"creation_date":1319896198,"post_id":7939257,"comment_id":9700678,"body_markdown":"*Thread.join* is a rather low-level very Java idiosynchratic way to solve the issue.  Moreover it&#39;s problematic because the *Thread* API is flawed: you cannot know whether the *join* completed successfuly or not (see *Java Concurrency In Practice*).  Higher level abstraction, like using a *CountDownLatch* may be preferrable and will look more natural to programmers who aren&#39;t &quot;stuck&quot; in the Java-idiosynchratic mindset.  Don&#39;t argue with me, go argue with Doug Lea ; )","body":"<i>Thread.join</i> is a rather low-level very Java idiosynchratic way to solve the issue.  Moreover it&#39;s problematic because the <i>Thread</i> API is flawed: you cannot know whether the <i>join</i> completed successfuly or not (see <i>Java Concurrency In Practice</i>).  Higher level abstraction, like using a <i>CountDownLatch</i> may be preferrable and will look more natural to programmers who aren&#39;t &quot;stuck&quot; in the Java-idiosynchratic mindset.  Don&#39;t argue with me, go argue with Doug Lea ; )"},{"owner":{"account_id":23619,"reputation":135298,"user_id":59303,"accept_rate":84,"display_name":"ChrisF"},"score":0,"creation_date":1322231451,"post_id":7939257,"comment_id":10180954,"body_markdown":"possible duplicate of [How to wait for a set of threads to complete?](http://stackoverflow.com/questions/1252190/how-to-wait-for-a-set-of-threads-to-complete)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/1252190/how-to-wait-for-a-set-of-threads-to-complete\">How to wait for a set of threads to complete?</a>"}],"answers":[{"tags":[],"owner":{"account_id":24377,"reputation":818003,"user_id":61974,"display_name":"Mark Byers"},"down_vote_count":0,"up_vote_count":64,"is_accepted":false,"score":64,"last_activity_date":1469255732,"creation_date":1319895761,"answer_id":7939262,"question_id":7939257,"body_markdown":"You can [`join`][1] to the threads. The join blocks until the thread completes.\r\n\r\n    for (Thread thread : threads) {\r\n        thread.join();\r\n    }\r\n\r\nNote that `join` throws an `InterruptedException`. You&#39;ll have to decide what to do if that happens (e.g. try to cancel the other threads to prevent unnecessary work being done).\r\n\r\n[1]: http://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#join%28%29","title":"wait until all threads finish their work in java","body":"<p>You can <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#join%28%29\" rel=\"noreferrer\"><code>join</code></a> to the threads. The join blocks until the thread completes.</p>\n\n<pre><code>for (Thread thread : threads) {\n    thread.join();\n}\n</code></pre>\n\n<p>Note that <code>join</code> throws an <code>InterruptedException</code>. You'll have to decide what to do if that happens (e.g. try to cancel the other threads to prevent unnecessary work being done).</p>\n"},{"tags":[],"owner":{"account_id":102965,"reputation":415230,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1319895761,"creation_date":1319895761,"answer_id":7939263,"question_id":7939257,"body_markdown":"You do\r\n\r\n    for (Thread t : new Thread[] { th1, th2, th3, th4, th5 })\r\n        t.join()\r\n\r\nAfter this for loop, you can be sure all threads have finished their jobs.","title":"wait until all threads finish their work in java","body":"<p>You do</p>\n\n<pre><code>for (Thread t : new Thread[] { th1, th2, th3, th4, th5 })\n    t.join()\n</code></pre>\n\n<p>After this for loop, you can be sure all threads have finished their jobs.</p>\n"},{"tags":[],"owner":{"account_id":305188,"reputation":9584,"user_id":615182,"accept_rate":86,"display_name":"Narendra Yadala"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1471683582,"creation_date":1319895762,"answer_id":7939264,"question_id":7939257,"body_markdown":"You can use [Threadf#join][1] method for this purpose.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#join%28%29","title":"wait until all threads finish their work in java","body":"<p>You can use <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#join%28%29\" rel=\"nofollow\">Threadf#join</a> method for this purpose.</p>\n"},{"tags":[],"owner":{"account_id":291800,"reputation":15905,"user_id":594183,"display_name":"esaj"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1471683630,"creation_date":1319895820,"answer_id":7939272,"question_id":7939257,"body_markdown":"Store the Thread-objects into some collection (like a List or a Set), then loop through the collection once the threads are started and call [join()][1] on the Threads.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#join%28%29","title":"wait until all threads finish their work in java","body":"<p>Store the Thread-objects into some collection (like a List or a Set), then loop through the collection once the threads are started and call <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#join%28%29\" rel=\"nofollow\">join()</a> on the Threads.</p>\n"},{"tags":[],"owner":{"display_name":"user974465"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1319896001,"creation_date":1319896001,"answer_id":7939290,"question_id":7939257,"body_markdown":"An executor service can be used to manage multiple threads including status and completion.  See http://programmingexamples.wikidot.com/executorservice\r\n","title":"wait until all threads finish their work in java","body":"<p>An executor service can be used to manage multiple threads including status and completion.  See <a href=\"http://programmingexamples.wikidot.com/executorservice\" rel=\"nofollow\">http://programmingexamples.wikidot.com/executorservice</a></p>\n"},{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1466611621,"creation_date":1319896907,"answer_id":7939359,"question_id":7939257,"body_markdown":"Apart from `Thread.join()` suggested by others, java 5 introduced the executor framework. There you don&#39;t work with `Thread` objects. Instead, you submit your `Callable` or `Runnable` objects to an executor. There&#39;s a special executor that is meant to execute multiple tasks and return their results out of order. That&#39;s the &lt;a href=&quot;http://download.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorCompletionService.html&quot;&gt;`ExecutorCompletionService`&lt;/a&gt;:\r\n\r\n    \r\n    ExecutorCompletionService executor;\r\n    for (..) {\r\n        executor.submit(Executors.callable(yourRunnable));\r\n    }\r\n\r\nThen you can repeatedly call `take()` until there are no more `Future&lt;?&gt;` objects to return, which means all of them are completed.\r\n\r\n----\r\n\r\nAnother thing that may be relevant, depending on your scenario is [`CyclicBarrier`][1].\r\n\r\n&gt; A synchronization aid that allows a set of threads to all wait for each other to reach a common barrier point. CyclicBarriers are useful in programs involving a fixed sized party of threads that must occasionally wait for each other. The barrier is called cyclic because it can be re-used after the waiting threads are released. \r\n    \r\n\r\n\r\n  [1]: http://download.oracle.com/javase/8/docs/api/java/util/concurrent/CyclicBarrier.html","title":"wait until all threads finish their work in java","body":"<p>Apart from <code>Thread.join()</code> suggested by others, java 5 introduced the executor framework. There you don't work with <code>Thread</code> objects. Instead, you submit your <code>Callable</code> or <code>Runnable</code> objects to an executor. There's a special executor that is meant to execute multiple tasks and return their results out of order. That's the <a href=\"http://download.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorCompletionService.html\" rel=\"noreferrer\"><code>ExecutorCompletionService</code></a>:</p>\n\n<pre><code>ExecutorCompletionService executor;\nfor (..) {\n    executor.submit(Executors.callable(yourRunnable));\n}\n</code></pre>\n\n<p>Then you can repeatedly call <code>take()</code> until there are no more <code>Future&lt;?&gt;</code> objects to return, which means all of them are completed.</p>\n\n<hr>\n\n<p>Another thing that may be relevant, depending on your scenario is <a href=\"http://download.oracle.com/javase/8/docs/api/java/util/concurrent/CyclicBarrier.html\" rel=\"noreferrer\"><code>CyclicBarrier</code></a>.</p>\n\n<blockquote>\n  <p>A synchronization aid that allows a set of threads to all wait for each other to reach a common barrier point. CyclicBarriers are useful in programs involving a fixed sized party of threads that must occasionally wait for each other. The barrier is called cyclic because it can be re-used after the waiting threads are released. </p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":156,"is_accepted":true,"score":156,"last_activity_date":1689350826,"creation_date":1319898597,"answer_id":7939499,"question_id":7939257,"body_markdown":"The approach I take is to use an [ExecutorService][1] to manage pools of threads.\r\n\r\n    ExecutorService es = Executors.newCachedThreadPool();\r\n    for(int i=0;i&lt;5;i++){\r\n        es.execute(new Runnable() { /*  your task */ });\r\n    }\r\n    es.shutdown();\r\n    boolean finished = es.awaitTermination(1, TimeUnit.MINUTES);\r\n    // all tasks have finished or the time has been reached.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html","title":"wait until all threads finish their work in java","body":"<p>The approach I take is to use an <a href=\"http://download.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html\" rel=\"noreferrer\">ExecutorService</a> to manage pools of threads.</p>\n<pre><code>ExecutorService es = Executors.newCachedThreadPool();\nfor(int i=0;i&lt;5;i++){\n    es.execute(new Runnable() { /*  your task */ });\n}\nes.shutdown();\nboolean finished = es.awaitTermination(1, TimeUnit.MINUTES);\n// all tasks have finished or the time has been reached.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":909520,"reputation":526,"user_id":1019109,"accept_rate":75,"display_name":"interDist"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1469811900,"creation_date":1319900088,"answer_id":7939645,"question_id":7939257,"body_markdown":"Another possibility is the [`CountDownLatch`](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html) object, which is useful for simple situations : since you know in advance the number of threads, you initialize it with the relevant count, and pass the reference of the object to each thread.  \r\nUpon completion of its task, each thread calls `CountDownLatch.countDown()` which decrements the internal counter. The main thread, after starting all others, should do the `CountDownLatch.await()` blocking call. It will be released as soon as the internal counter has reached 0.\r\n\r\nPay attention that with this object, an `InterruptedException` can be thrown as well.","title":"wait until all threads finish their work in java","body":"<p>Another possibility is the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html\" rel=\"nofollow noreferrer\"><code>CountDownLatch</code></a> object, which is useful for simple situations : since you know in advance the number of threads, you initialize it with the relevant count, and pass the reference of the object to each thread.<br>\nUpon completion of its task, each thread calls <code>CountDownLatch.countDown()</code> which decrements the internal counter. The main thread, after starting all others, should do the <code>CountDownLatch.await()</code> blocking call. It will be released as soon as the internal counter has reached 0.</p>\n\n<p>Pay attention that with this object, an <code>InterruptedException</code> can be thrown as well.</p>\n"},{"tags":[],"owner":{"account_id":558770,"reputation":16438,"user_id":755804,"accept_rate":20,"display_name":"18446744073709551615"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1471683809,"creation_date":1359028974,"answer_id":14500933,"question_id":7939257,"body_markdown":"Although not relevant to OP&#39;s problem, if you are interested in synchronization (more precisely, a rendez-vous) with exactly one thread, you may use an [Exchanger][1]\r\n\r\n\r\nIn my case, I needed to pause the parent thread until the child thread did something, e.g. completed its initialization. A [CountDownLatch][2] also works well.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Exchanger.html\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html","title":"wait until all threads finish their work in java","body":"<p>Although not relevant to OP's problem, if you are interested in synchronization (more precisely, a rendez-vous) with exactly one thread, you may use an <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Exchanger.html\" rel=\"nofollow\">Exchanger</a></p>\n\n<p>In my case, I needed to pause the parent thread until the child thread did something, e.g. completed its initialization. A <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html\" rel=\"nofollow\">CountDownLatch</a> also works well.</p>\n"},{"tags":[],"owner":{"account_id":6262687,"reputation":11,"user_id":4869351,"display_name":"Jeyaraj.J"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1430917992,"creation_date":1430896162,"answer_id":30069842,"question_id":7939257,"body_markdown":"try this, will work.\r\n\r\n      Thread[] threads = new Thread[10];\r\n\r\n      List&lt;Thread&gt; allThreads = new ArrayList&lt;Thread&gt;();\r\n\r\n      for(Thread thread : threads){\r\n\r\n            if(null != thread){\r\n\r\n                  if(thread.isAlive()){\r\n\r\n                        allThreads.add(thread);\r\n\r\n                  }\r\n\r\n            }\r\n\r\n      }\r\n\r\n      while(!allThreads.isEmpty()){\r\n\r\n            Iterator&lt;Thread&gt; ite = allThreads.iterator();\r\n\r\n            while(ite.hasNext()){\r\n\r\n                  Thread thread = ite.next();\r\n\r\n                  if(!thread.isAlive()){\r\n\r\n                       ite.remove();\r\n                  }\r\n\r\n            }\r\n\r\n       }\r\n","title":"wait until all threads finish their work in java","body":"<p>try this, will work.</p>\n\n<pre><code>  Thread[] threads = new Thread[10];\n\n  List&lt;Thread&gt; allThreads = new ArrayList&lt;Thread&gt;();\n\n  for(Thread thread : threads){\n\n        if(null != thread){\n\n              if(thread.isAlive()){\n\n                    allThreads.add(thread);\n\n              }\n\n        }\n\n  }\n\n  while(!allThreads.isEmpty()){\n\n        Iterator&lt;Thread&gt; ite = allThreads.iterator();\n\n        while(ite.hasNext()){\n\n              Thread thread = ite.next();\n\n              if(!thread.isAlive()){\n\n                   ite.remove();\n              }\n\n        }\n\n   }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2864877,"reputation":1,"user_id":2459393,"display_name":"Maggy"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1452179617,"creation_date":1452179617,"answer_id":34658665,"question_id":7939257,"body_markdown":"Use this in your main thread: while(!executor.isTerminated());\r\nPut this line of code after starting all the threads from executor service. This will only start the main thread after all the threads started by executors are finished. Make sure to call executor.shutdown(); before the above loop.","title":"wait until all threads finish their work in java","body":"<p>Use this in your main thread: while(!executor.isTerminated());\nPut this line of code after starting all the threads from executor service. This will only start the main thread after all the threads started by executors are finished. Make sure to call executor.shutdown(); before the above loop.</p>\n"},{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1680262020,"creation_date":1461338188,"answer_id":36797569,"question_id":7939257,"body_markdown":"Have a look at various solutions. \r\n\r\n1. `join()` API has been introduced in early versions of Java. Some good alternatives are available with this [concurrent][1] package since the JDK 1.5 release.\r\n\r\n2. [ExecutorService#invokeAll()][2]\r\n&gt; Executes the given tasks, returning a list of Futures holding their status and results when everything is completed.\r\n\r\n Refer to this related SE question for code example:\r\n\r\n https://stackoverflow.com/questions/18202388/how-to-use-invokeall-to-let-all-thread-pool-do-their-task/39547616#39547616\r\n\r\n\r\n3. [CountDownLatch][3]\r\n\r\n &gt;  A synchronization aid that allows one or more threads to wait until a set of operations being performed in other threads completes.\r\n\r\n &gt; A **CountDownLatch** is initialized with a given count. The await methods block until the current count reaches zero due to invocations of the `countDown()` method, after which all waiting threads are released and any subsequent invocations of await return immediately. This is a one-shot phenomenon -- the count cannot be reset. If you need a version that resets the count, consider using a **CyclicBarrier**.\r\n\r\n   Refer to this question for usage of CountDownLatch  [here][4]\r\n\r\n    \r\n\r\n\r\n4. [ForkJoinPool][5] or \t[newWorkStealingPool()][6] in [Executors][7] \r\n\r\n5. Iterate through all [Future][8] objects created after submitting to `ExecutorService` \r\n\r\nSource : Various links from **docs.oracle.com**\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/package-summary.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html#invokeAll-java.util.Collection-\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html\r\n  [4]: https://stackoverflow.com/questions/35075886/how-to-wait-for-a-thread-that-spawns-its-own-thread/35076391#35076391\r\n  [5]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html\r\n  [6]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html#newWorkStealingPool--\r\n  [7]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html\r\n  [8]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Future.html","title":"wait until all threads finish their work in java","body":"<p>Have a look at various solutions.</p>\n<ol>\n<li><p><code>join()</code> API has been introduced in early versions of Java. Some good alternatives are available with this <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/package-summary.html\" rel=\"nofollow noreferrer\">concurrent</a> package since the JDK 1.5 release.</p>\n</li>\n<li><p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html#invokeAll-java.util.Collection-\" rel=\"nofollow noreferrer\">ExecutorService#invokeAll()</a></p>\n</li>\n</ol>\n<blockquote>\n<p>Executes the given tasks, returning a list of Futures holding their status and results when everything is completed.</p>\n</blockquote>\n<p>Refer to this related SE question for code example:</p>\n<p><a href=\"https://stackoverflow.com/questions/18202388/how-to-use-invokeall-to-let-all-thread-pool-do-their-task/39547616#39547616\">How to use invokeAll() to let all thread pool do their task?</a></p>\n<ol start=\"3\">\n<li><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html\" rel=\"nofollow noreferrer\">CountDownLatch</a></li>\n</ol>\n<blockquote>\n<p>A synchronization aid that allows one or more threads to wait until a set of operations being performed in other threads completes.</p>\n</blockquote>\n<blockquote>\n<p>A <strong>CountDownLatch</strong> is initialized with a given count. The await methods block until the current count reaches zero due to invocations of the <code>countDown()</code> method, after which all waiting threads are released and any subsequent invocations of await return immediately. This is a one-shot phenomenon -- the count cannot be reset. If you need a version that resets the count, consider using a <strong>CyclicBarrier</strong>.</p>\n</blockquote>\n<p>Refer to this question for usage of CountDownLatch  <a href=\"https://stackoverflow.com/questions/35075886/how-to-wait-for-a-thread-that-spawns-its-own-thread/35076391#35076391\">here</a></p>\n<ol start=\"4\">\n<li><p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html\" rel=\"nofollow noreferrer\">ForkJoinPool</a> or     <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html#newWorkStealingPool--\" rel=\"nofollow noreferrer\">newWorkStealingPool()</a> in <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html\" rel=\"nofollow noreferrer\">Executors</a></p>\n</li>\n<li><p>Iterate through all <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Future.html\" rel=\"nofollow noreferrer\">Future</a> objects created after submitting to <code>ExecutorService</code></p>\n</li>\n</ol>\n<p>Source : Various links from <strong>docs.oracle.com</strong></p>\n"},{"tags":[],"owner":{"account_id":1413263,"reputation":1095,"user_id":1339452,"display_name":"Madis Pukkonen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1466402421,"creation_date":1466402421,"answer_id":37915470,"question_id":7939257,"body_markdown":"I had a similar problem and ended up using Java 8 parallelStream.\r\n\r\n    requestList.parallelStream().forEach(req -&gt; makeRequest(req));\r\n\r\nIt&#39;s super simple and readable.\r\nBehind the scenes it is using default JVM’s fork join pool which means that it will wait for all the threads to finish before continuing. For my case it was a neat solution, because it was the only parallelStream in my application. If you have more than one parallelStream running simultaneously, please read the link below.\r\n\r\nMore information about parallel streams [here][1].\r\n\r\n\r\n  [1]: http://zeroturnaround.com/rebellabs/java-parallel-streams-are-bad-for-your-health/","title":"wait until all threads finish their work in java","body":"<p>I had a similar problem and ended up using Java 8 parallelStream.</p>\n\n<pre><code>requestList.parallelStream().forEach(req -&gt; makeRequest(req));\n</code></pre>\n\n<p>It's super simple and readable.\nBehind the scenes it is using default JVM’s fork join pool which means that it will wait for all the threads to finish before continuing. For my case it was a neat solution, because it was the only parallelStream in my application. If you have more than one parallelStream running simultaneously, please read the link below.</p>\n\n<p>More information about parallel streams <a href=\"http://zeroturnaround.com/rebellabs/java-parallel-streams-are-bad-for-your-health/\" rel=\"nofollow\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":1710481,"reputation":22873,"user_id":1568658,"accept_rate":82,"display_name":"Eric"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1546518639,"creation_date":1546518639,"answer_id":54022338,"question_id":7939257,"body_markdown":"The existing answers said could `join()` each thread.\r\n\r\nBut there are several ways to get the thread array / list:  \r\n\r\n- Add the Thread into a list on creation.\r\n- Use `ThreadGroup` to manage the threads.\r\n\r\nFollowing code will use the `ThreadGruop` approach. It create a group first, then when create each thread specify the group in constructor, later could get the thread array via `ThreadGroup.enumerate()`\r\n\r\n---\r\nCode\r\n---\r\n\r\n**SyncBlockLearn.java**\r\n\r\n    import org.testng.Assert;\r\n    import org.testng.annotations.Test;\r\n    \r\n    /**\r\n     * synchronized block - learn,\r\n     *\r\n     * @author eric\r\n     * @date Apr 20, 2015 1:37:11 PM\r\n     */\r\n    public class SyncBlockLearn {\r\n        private static final int TD_COUNT = 5; // thread count\r\n        private static final int ROUND_PER_THREAD = 100; // round for each thread,\r\n        private static final long INC_DELAY = 10; // delay of each increase,\r\n    \r\n        // sync block test,\r\n        @Test\r\n        public void syncBlockTest() throws InterruptedException {\r\n            Counter ct = new Counter();\r\n            ThreadGroup tg = new ThreadGroup(&quot;runner&quot;);\r\n    \r\n            for (int i = 0; i &lt; TD_COUNT; i++) {\r\n                new Thread(tg, ct, &quot;t-&quot; + i).start();\r\n            }\r\n    \r\n            Thread[] tArr = new Thread[TD_COUNT];\r\n            tg.enumerate(tArr); // get threads,\r\n    \r\n            // wait all runner to finish,\r\n            for (Thread t : tArr) {\r\n                t.join();\r\n            }\r\n    \r\n            System.out.printf(&quot;\\nfinal count: %d\\n&quot;, ct.getCount());\r\n            Assert.assertEquals(ct.getCount(), TD_COUNT * ROUND_PER_THREAD);\r\n        }\r\n    \r\n        static class Counter implements Runnable {\r\n            private final Object lkOn = new Object(); // the object to lock on,\r\n            private int count = 0;\r\n    \r\n            @Override\r\n            public void run() {\r\n                System.out.printf(&quot;[%s] begin\\n&quot;, Thread.currentThread().getName());\r\n    \r\n                for (int i = 0; i &lt; ROUND_PER_THREAD; i++) {\r\n                    synchronized (lkOn) {\r\n                        System.out.printf(&quot;[%s] [%d] inc to: %d\\n&quot;, Thread.currentThread().getName(), i, ++count);\r\n                    }\r\n                    try {\r\n                        Thread.sleep(INC_DELAY); // wait a while,\r\n                    } catch (InterruptedException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n    \r\n                System.out.printf(&quot;[%s] end\\n&quot;, Thread.currentThread().getName());\r\n            }\r\n    \r\n            public int getCount() {\r\n                return count;\r\n            }\r\n        }\r\n    }\r\n\r\nThe main thread will wait for all threads in the group to finish.\r\n","title":"wait until all threads finish their work in java","body":"<p>The existing answers said could <code>join()</code> each thread.</p>\n\n<p>But there are several ways to get the thread array / list:  </p>\n\n<ul>\n<li>Add the Thread into a list on creation.</li>\n<li>Use <code>ThreadGroup</code> to manage the threads.</li>\n</ul>\n\n<p>Following code will use the <code>ThreadGruop</code> approach. It create a group first, then when create each thread specify the group in constructor, later could get the thread array via <code>ThreadGroup.enumerate()</code></p>\n\n<hr>\n\n<h2>Code</h2>\n\n<p><strong>SyncBlockLearn.java</strong></p>\n\n<pre><code>import org.testng.Assert;\nimport org.testng.annotations.Test;\n\n/**\n * synchronized block - learn,\n *\n * @author eric\n * @date Apr 20, 2015 1:37:11 PM\n */\npublic class SyncBlockLearn {\n    private static final int TD_COUNT = 5; // thread count\n    private static final int ROUND_PER_THREAD = 100; // round for each thread,\n    private static final long INC_DELAY = 10; // delay of each increase,\n\n    // sync block test,\n    @Test\n    public void syncBlockTest() throws InterruptedException {\n        Counter ct = new Counter();\n        ThreadGroup tg = new ThreadGroup(\"runner\");\n\n        for (int i = 0; i &lt; TD_COUNT; i++) {\n            new Thread(tg, ct, \"t-\" + i).start();\n        }\n\n        Thread[] tArr = new Thread[TD_COUNT];\n        tg.enumerate(tArr); // get threads,\n\n        // wait all runner to finish,\n        for (Thread t : tArr) {\n            t.join();\n        }\n\n        System.out.printf(\"\\nfinal count: %d\\n\", ct.getCount());\n        Assert.assertEquals(ct.getCount(), TD_COUNT * ROUND_PER_THREAD);\n    }\n\n    static class Counter implements Runnable {\n        private final Object lkOn = new Object(); // the object to lock on,\n        private int count = 0;\n\n        @Override\n        public void run() {\n            System.out.printf(\"[%s] begin\\n\", Thread.currentThread().getName());\n\n            for (int i = 0; i &lt; ROUND_PER_THREAD; i++) {\n                synchronized (lkOn) {\n                    System.out.printf(\"[%s] [%d] inc to: %d\\n\", Thread.currentThread().getName(), i, ++count);\n                }\n                try {\n                    Thread.sleep(INC_DELAY); // wait a while,\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n\n            System.out.printf(\"[%s] end\\n\", Thread.currentThread().getName());\n        }\n\n        public int getCount() {\n            return count;\n        }\n    }\n}\n</code></pre>\n\n<p>The main thread will wait for all threads in the group to finish.</p>\n"},{"tags":[],"owner":{"account_id":12267155,"reputation":3075,"user_id":8953378,"display_name":"Alon Gouldman"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1559487491,"creation_date":1559487491,"answer_id":56416180,"question_id":7939257,"body_markdown":"I created a small helper method to wait for a few Threads to finish: \r\n\r\n```\r\npublic static void waitForThreadsToFinish(Thread... threads) {\r\n        try {\r\n            for (Thread thread : threads) {\r\n                thread.join();\r\n            }\r\n        }\r\n        catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n```","title":"wait until all threads finish their work in java","body":"<p>I created a small helper method to wait for a few Threads to finish: </p>\n\n<pre><code>public static void waitForThreadsToFinish(Thread... threads) {\n        try {\n            for (Thread thread : threads) {\n                thread.join();\n            }\n        }\n        catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6575754,"reputation":9298,"user_id":5081877,"accept_rate":92,"display_name":"Yash"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1559561084,"creation_date":1559561084,"answer_id":56426361,"question_id":7939257,"body_markdown":"Wait/block the Thread Main until some other threads complete their work.\r\n\r\nAs `@Ravindra babu` said it can be achieved in various ways, but showing with examples.\r\n\r\n * java.lang.Thread.[join()](https://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#join--) &lt;sup&gt;Since:1.0&lt;/sup&gt;\r\n\r\n    ```java\r\n\tpublic static void joiningThreads() throws InterruptedException {\r\n\t\tThread t1 = new Thread( new LatchTask(1, null), &quot;T1&quot; );\r\n\t\tThread t2 = new Thread( new LatchTask(7, null), &quot;T2&quot; );\r\n\t\tThread t3 = new Thread( new LatchTask(5, null), &quot;T3&quot; );\r\n\t\tThread t4 = new Thread( new LatchTask(2, null), &quot;T4&quot; );\r\n\t\t\r\n\t\t// Start all the threads\r\n\t\tt1.start();\r\n\t\tt2.start();\r\n\t\tt3.start();\r\n\t\tt4.start();\r\n\t\t\r\n\t\t// Wait till all threads completes\r\n\t\tt1.join();\r\n\t\tt2.join();\r\n\t\tt3.join();\r\n\t\tt4.join();\r\n\t}\r\n    ```\r\n\r\n * [java.util.concurrent.CountDownLatch](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html) &lt;sup&gt;Since:1.5&lt;/sup&gt;\r\n    * `.countDown()` &#171; Decrements the count of the latch group.\r\n    * `.await()` &#171; The await methods block until the current count reaches zero.\r\n \r\n If you created `latchGroupCount = 4` then `countDown()` should be called 4 times to make count 0. So, that `await()` will release the blocking threads.\r\n    ```java\r\n\tpublic static void latchThreads() throws InterruptedException {\r\n\t\tint latchGroupCount = 4;\r\n\t\tCountDownLatch latch = new CountDownLatch(latchGroupCount);\r\n\t\tThread t1 = new Thread( new LatchTask(1, latch), &quot;T1&quot; );\r\n\t\tThread t2 = new Thread( new LatchTask(7, latch), &quot;T2&quot; );\r\n\t\tThread t3 = new Thread( new LatchTask(5, latch), &quot;T3&quot; );\r\n\t\tThread t4 = new Thread( new LatchTask(2, latch), &quot;T4&quot; );\r\n\t\t\r\n\t\tt1.start();\r\n\t\tt2.start();\r\n\t\tt3.start();\r\n\t\tt4.start();\r\n\t\t\r\n\t\t//latch.countDown();\r\n\r\n\t\tlatch.await(); // block until latchGroupCount is 0.\r\n\t}\r\n    ```\r\n\r\n\r\n\r\nExample code of Threaded class `LatchTask`. To test the approach use `joiningThreads();`\r\nand `latchThreads();` from main method.\r\n\r\n```java\r\nclass LatchTask extends Thread {\r\n\tCountDownLatch latch;\r\n\tint iterations = 10;\r\n\tpublic LatchTask(int iterations, CountDownLatch latch) {\r\n\t\tthis.iterations = iterations;\r\n\t\tthis.latch = latch;\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic void run() {\r\n\t\tString threadName = Thread.currentThread().getName();\r\n\t\tSystem.out.println(threadName + &quot; : Started Task...&quot;);\r\n\t\t\r\n\t\tfor (int i = 0; i &lt; iterations; i++) {\r\n\t\t\tSystem.out.println(threadName + &quot; : &quot; + i);\r\n\t\t\tMainThread_Wait_TillWorkerThreadsComplete.sleep(1);\r\n\t\t}\r\n\t\tSystem.out.println(threadName + &quot; : Completed Task&quot;);\r\n\t\t// countDown() &#171; Decrements the count of the latch group.\r\n\t\tif(latch != null)\r\n\t\t\tlatch.countDown();\r\n\t}\r\n}\r\n```\r\n\r\n *  [CyclicBarriers](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CyclicBarrier.html) A synchronization aid that allows a set of threads to all wait for each other to reach a common barrier point.CyclicBarriers are useful in programs involving a fixed sized party of threads that must occasionally wait for each other. The barrier is called cyclic because it can be re-used after the waiting threads are released.\r\n    ```java\r\n\tCyclicBarrier barrier = new CyclicBarrier(3);\r\n\tbarrier.await();\r\n    ```\r\nFor example refer this [Concurrent_ParallelNotifyies](https://github.com/Yash-777/LearnJava/blob/master/src/com/github/os/threads/Concurrent_ParallelNotifyies.java) class.\r\n\r\n\r\n\r\n---\r\n\r\n * Executer framework: we can use [ExecutorService](https://docs.oracle.com/javase/tutorial/essential/concurrency/exinter.html) to create a thread pool, and tracks the progress of the asynchronous tasks with Future.\r\n\r\n   * `submit(Runnable)`, `submit(Callable)` which return Future Object. By using `future.get()` function we can block the main thread till the working threads completes its work.\r\n\r\n   * `invokeAll(...)` - returns a list of Future objects via which you can obtain the results of the executions of each Callable.\r\n\r\n[Find example](https://stackoverflow.com/a/56424946/5081877) of using Interfaces Runnable, Callable with Executor framework.\r\n\r\n----\r\n\r\n@See also\r\n\r\n * [Find out thread is still alive?](https://stackoverflow.com/a/48166865/5081877)\r\n","title":"wait until all threads finish their work in java","body":"<p>Wait/block the Thread Main until some other threads complete their work.</p>\n\n<p>As <code>@Ravindra babu</code> said it can be achieved in various ways, but showing with examples.</p>\n\n<ul>\n<li><p>java.lang.Thread.<a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#join--\" rel=\"noreferrer\">join()</a> <sup>Since:1.0</sup></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static void joiningThreads() throws InterruptedException {\n    Thread t1 = new Thread( new LatchTask(1, null), \"T1\" );\n    Thread t2 = new Thread( new LatchTask(7, null), \"T2\" );\n    Thread t3 = new Thread( new LatchTask(5, null), \"T3\" );\n    Thread t4 = new Thread( new LatchTask(2, null), \"T4\" );\n\n    // Start all the threads\n    t1.start();\n    t2.start();\n    t3.start();\n    t4.start();\n\n    // Wait till all threads completes\n    t1.join();\n    t2.join();\n    t3.join();\n    t4.join();\n}\n</code></pre></li>\n<li><p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CountDownLatch.html\" rel=\"noreferrer\">java.util.concurrent.CountDownLatch</a> <sup>Since:1.5</sup></p>\n\n<ul>\n<li><code>.countDown()</code> « Decrements the count of the latch group.</li>\n<li><code>.await()</code> « The await methods block until the current count reaches zero.</li>\n</ul>\n\n<p>If you created <code>latchGroupCount = 4</code> then <code>countDown()</code> should be called 4 times to make count 0. So, that <code>await()</code> will release the blocking threads.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static void latchThreads() throws InterruptedException {\n    int latchGroupCount = 4;\n    CountDownLatch latch = new CountDownLatch(latchGroupCount);\n    Thread t1 = new Thread( new LatchTask(1, latch), \"T1\" );\n    Thread t2 = new Thread( new LatchTask(7, latch), \"T2\" );\n    Thread t3 = new Thread( new LatchTask(5, latch), \"T3\" );\n    Thread t4 = new Thread( new LatchTask(2, latch), \"T4\" );\n\n    t1.start();\n    t2.start();\n    t3.start();\n    t4.start();\n\n    //latch.countDown();\n\n    latch.await(); // block until latchGroupCount is 0.\n}\n</code></pre></li>\n</ul>\n\n<p>Example code of Threaded class <code>LatchTask</code>. To test the approach use <code>joiningThreads();</code>\nand <code>latchThreads();</code> from main method.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>class LatchTask extends Thread {\n    CountDownLatch latch;\n    int iterations = 10;\n    public LatchTask(int iterations, CountDownLatch latch) {\n        this.iterations = iterations;\n        this.latch = latch;\n    }\n\n    @Override\n    public void run() {\n        String threadName = Thread.currentThread().getName();\n        System.out.println(threadName + \" : Started Task...\");\n\n        for (int i = 0; i &lt; iterations; i++) {\n            System.out.println(threadName + \" : \" + i);\n            MainThread_Wait_TillWorkerThreadsComplete.sleep(1);\n        }\n        System.out.println(threadName + \" : Completed Task\");\n        // countDown() « Decrements the count of the latch group.\n        if(latch != null)\n            latch.countDown();\n    }\n}\n</code></pre>\n\n<ul>\n<li><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CyclicBarrier.html\" rel=\"noreferrer\">CyclicBarriers</a> A synchronization aid that allows a set of threads to all wait for each other to reach a common barrier point.CyclicBarriers are useful in programs involving a fixed sized party of threads that must occasionally wait for each other. The barrier is called cyclic because it can be re-used after the waiting threads are released.\n\n<pre class=\"lang-java prettyprint-override\"><code>CyclicBarrier barrier = new CyclicBarrier(3);\nbarrier.await();\n</code></pre>\n\nFor example refer this <a href=\"https://github.com/Yash-777/LearnJava/blob/master/src/com/github/os/threads/Concurrent_ParallelNotifyies.java\" rel=\"noreferrer\">Concurrent_ParallelNotifyies</a> class.</li>\n</ul>\n\n<hr>\n\n<ul>\n<li><p>Executer framework: we can use <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/exinter.html\" rel=\"noreferrer\">ExecutorService</a> to create a thread pool, and tracks the progress of the asynchronous tasks with Future.</p>\n\n<ul>\n<li><p><code>submit(Runnable)</code>, <code>submit(Callable)</code> which return Future Object. By using <code>future.get()</code> function we can block the main thread till the working threads completes its work.</p></li>\n<li><p><code>invokeAll(...)</code> - returns a list of Future objects via which you can obtain the results of the executions of each Callable.</p></li>\n</ul></li>\n</ul>\n\n<p><a href=\"https://stackoverflow.com/a/56424946/5081877\">Find example</a> of using Interfaces Runnable, Callable with Executor framework.</p>\n\n<hr>\n\n<p>@See also</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/a/48166865/5081877\">Find out thread is still alive?</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":4612886,"reputation":565,"user_id":3740432,"accept_rate":0,"display_name":"Afsar Ali"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614435206,"creation_date":1614435206,"answer_id":66399662,"question_id":7939257,"body_markdown":"I had similar situation , where i had to wait till all child threads complete its execution then only i could get the status result for each of them .. hence i needed to wait till all child thread completed.\r\n\r\nbelow is my code where i did multi-threading using \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n     public static void main(String[] args) {\r\n            List&lt;RunnerPojo&gt; testList = ExcelObject.getTestStepsList();//.parallelStream().collect(Collectors.toList());\r\n            int threadCount = ConfigFileReader.getInstance().readConfig().getParallelThreadCount();\r\n            System.out.println(&quot;Thread count is : =========  &quot; + threadCount); // 5\r\n\r\n            ExecutorService threadExecutor = new DriverScript().threadExecutor(testList, threadCount);\r\n\r\n\r\n            boolean isProcessCompleted = waitUntilCondition(() -&gt; threadExecutor.isTerminated()); // Here i used waitUntil condition \r\n\r\n            if (isProcessCompleted) {\r\n                testList.forEach(x -&gt; {\r\n                    System.out.println(&quot;Test Name: &quot; + x.getTestCaseId());\r\n                    System.out.println(&quot;Test Status : &quot; + x.getStatus());\r\n                    System.out.println(&quot;======= Test Steps ===== &quot;);\r\n\r\n                    x.getTestStepsList().forEach(y -&gt; {\r\n                        System.out.println(&quot;Step Name: &quot; + y.getDescription());\r\n                        System.out.println(&quot;Test caseId : &quot; + y.getTestCaseId());\r\n                        System.out.println(&quot;Step Status: &quot; + y.getResult());\r\n                        System.out.println(&quot;\\n ============ ==========&quot;);\r\n                    });\r\n                });\r\n            }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\nBelow method is for distribution of list with parallel proccessing\r\n&lt;!-- language: java --&gt;\r\n\r\n    // This method will split my list and run in a parallel process with mutliple threads\r\n        private ExecutorService threadExecutor(List&lt;RunnerPojo&gt; testList, int threadSize) {\r\n            ExecutorService exec = Executors.newFixedThreadPool(threadSize);\r\n            testList.forEach(tests -&gt; {\r\n                exec.submit(() -&gt; {\r\n                    driverScript(tests);\r\n                });\r\n            });\r\n            exec.shutdown();\r\n            return exec;\r\n        }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\nThis is my wait until method: here you can wait till your condition satisfies within do while loop . in my case i waited for some max timeout .\r\nthis will keep checking until your `threadExecutor.isTerminated()` is `true` with polling period of 5 sec.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n\r\n        static boolean waitUntilCondition(Supplier&lt;Boolean&gt; function) {\r\n            Double timer = 0.0;\r\n            Double maxTimeOut = 20.0;\r\n\r\n            boolean isFound;\r\n            do {\r\n                isFound = function.get();\r\n                if (isFound) {\r\n                    break;\r\n                } else {\r\n                    try {\r\n                        Thread.sleep(5000); // Sleeping for 5 sec (main thread will sleep for 5 sec)\r\n                    } catch (InterruptedException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                    timer++;\r\n                    System.out.println(&quot;Waiting for condition to be true .. waited ..&quot; + timer * 5 + &quot; sec.&quot;);\r\n                }\r\n            } while (timer &lt; maxTimeOut + 1.0);\r\n\r\n            return isFound;\r\n        }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"wait until all threads finish their work in java","body":"<p>I had similar situation , where i had to wait till all child threads complete its execution then only i could get the status result for each of them .. hence i needed to wait till all child thread completed.</p>\n<p>below is my code where i did multi-threading using</p>\n<pre class=\"lang-java prettyprint-override\"><code> public static void main(String[] args) {\n        List&lt;RunnerPojo&gt; testList = ExcelObject.getTestStepsList();//.parallelStream().collect(Collectors.toList());\n        int threadCount = ConfigFileReader.getInstance().readConfig().getParallelThreadCount();\n        System.out.println(&quot;Thread count is : =========  &quot; + threadCount); // 5\n\n        ExecutorService threadExecutor = new DriverScript().threadExecutor(testList, threadCount);\n\n\n        boolean isProcessCompleted = waitUntilCondition(() -&gt; threadExecutor.isTerminated()); // Here i used waitUntil condition \n\n        if (isProcessCompleted) {\n            testList.forEach(x -&gt; {\n                System.out.println(&quot;Test Name: &quot; + x.getTestCaseId());\n                System.out.println(&quot;Test Status : &quot; + x.getStatus());\n                System.out.println(&quot;======= Test Steps ===== &quot;);\n\n                x.getTestStepsList().forEach(y -&gt; {\n                    System.out.println(&quot;Step Name: &quot; + y.getDescription());\n                    System.out.println(&quot;Test caseId : &quot; + y.getTestCaseId());\n                    System.out.println(&quot;Step Status: &quot; + y.getResult());\n                    System.out.println(&quot;\\n ============ ==========&quot;);\n                });\n            });\n        }\n</code></pre>\n<p>Below method is for distribution of list with parallel proccessing</p>\n<pre class=\"lang-java prettyprint-override\"><code>// This method will split my list and run in a parallel process with mutliple threads\n    private ExecutorService threadExecutor(List&lt;RunnerPojo&gt; testList, int threadSize) {\n        ExecutorService exec = Executors.newFixedThreadPool(threadSize);\n        testList.forEach(tests -&gt; {\n            exec.submit(() -&gt; {\n                driverScript(tests);\n            });\n        });\n        exec.shutdown();\n        return exec;\n    }\n</code></pre>\n<p>This is my wait until method: here you can wait till your condition satisfies within do while loop . in my case i waited for some max timeout .\nthis will keep checking until your <code>threadExecutor.isTerminated()</code> is <code>true</code> with polling period of 5 sec.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    static boolean waitUntilCondition(Supplier&lt;Boolean&gt; function) {\n        Double timer = 0.0;\n        Double maxTimeOut = 20.0;\n\n        boolean isFound;\n        do {\n            isFound = function.get();\n            if (isFound) {\n                break;\n            } else {\n                try {\n                    Thread.sleep(5000); // Sleeping for 5 sec (main thread will sleep for 5 sec)\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                timer++;\n                System.out.println(&quot;Waiting for condition to be true .. waited ..&quot; + timer * 5 + &quot; sec.&quot;);\n            }\n        } while (timer &lt; maxTimeOut + 1.0);\n\n        return isFound;\n    }\n</code></pre>\n"}],"owner":{"account_id":137693,"reputation":14870,"user_id":342059,"accept_rate":71,"display_name":"Ariyan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":236389,"favorite_count":0,"down_vote_count":0,"up_vote_count":123,"accepted_answer_id":7939499,"answer_count":17,"score":123,"last_activity_date":1689350826,"creation_date":1319895624,"question_id":7939257,"body_markdown":"I&#39;m writing an application that has 5 threads that get some information from web simultaneously and fill 5 different fields in a buffer class.  \r\nI need to validate buffer data and store it in a database when all threads finished their job.  \r\nHow can I do this (get alerted when all threads finished their work) ?  \r\n\r\n","title":"wait until all threads finish their work in java","body":"<p>I'm writing an application that has 5 threads that get some information from web simultaneously and fill 5 different fields in a buffer class.<br>\nI need to validate buffer data and store it in a database when all threads finished their job.<br>\nHow can I do this (get alerted when all threads finished their work) ?  </p>\n"},{"tags":["java","android","swipe","bottomnavigationview","swipe-gesture"],"owner":{"account_id":25447864,"reputation":1,"user_id":19249798,"display_name":"Krushna"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689350535,"creation_date":1689315281,"question_id":76685115,"body_markdown":"I found a better file management app named as MT Manager. But there is a feature I like most you can see the GIF. Here if we swipe from Bottom Navigation Menu then you can see a beautiful custom layout coming up. If we see some Vivo Device this type gesture we found normally when we open the settings menu. So if anyone knows about it, then kindly please help me. I want to implement it on my app. You can check the below picture how the swipe gesture working.\r\n\r\n![Like this ](https://i.stack.imgur.com/twOmq.gif)","title":"How to make swipe gesture from down to up to show a inner layout in java?","body":"<p>I found a better file management app named as MT Manager. But there is a feature I like most you can see the GIF. Here if we swipe from Bottom Navigation Menu then you can see a beautiful custom layout coming up. If we see some Vivo Device this type gesture we found normally when we open the settings menu. So if anyone knows about it, then kindly please help me. I want to implement it on my app. You can check the below picture how the swipe gesture working.</p>\n<p><img src=\"https://i.stack.imgur.com/twOmq.gif\" alt=\"Like this \" /></p>\n"},{"tags":["java","spring","spring-boot","error-handling","exceptionhandler"],"answers":[{"tags":[],"owner":{"account_id":2184114,"reputation":659,"user_id":1932930,"accept_rate":40,"display_name":"tdemay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689349893,"creation_date":1689349893,"answer_id":76689333,"question_id":76689332,"body_markdown":"\r\nThe solution was a CORS related problem. Adding `Access-Control-Allow-Origin` to the header was the solution. \r\n\r\nHere&#39;s what you need to do if you want to catch all exceptions globally and send back a meaningful response. Forgive me as I&#39;m new to this, so if there is something I&#39;m missing, please let me know. \r\n\r\nGlobal exception handler:\r\n\r\n    @RestControllerAdvice\r\n    public class GlobalExceptionHandler {\r\n        @ExceptionHandler\r\n        public ResponseEntity&lt;UserResponseException&gt; handleException(Exception ex) {\r\n            return ResponseException.ResponseEntity(HttpStatus.INTERNAL_SERVER_ERROR, ex.getMessage());\r\n        }\r\n        // Add more handlers as needed. \r\n    }\r\n\r\nand my response exception class\r\n\r\n    @AllArgsConstructor(access = AccessLevel.PRIVATE)\r\n    public class ResponseException {\r\n        private int status;\r\n        private List&lt;String&gt; messages;\r\n        // add anything else you want to return\r\n\r\n        public static ResponseEntity&lt;ResponseException&gt; ResponseEntity(HttpStatus status, List&lt;String&gt; messages) {\r\n            ResponseException ure = new ResponseException(status.value(), messages);\r\n            HttpHeaders headers = new HttpHeaders();\r\n            headers.set(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);\r\n            return new ResponseEntity&lt;ResponseException&gt;(ure, headers, status);\r\n        }\r\n    }\r\n\r\nNow I can get back the data and it&#39;s available in CURL and in WebBrowser and most importantly to my front-end client. \r\n\r\n\r\n    curl -i http://localhost:8080/api/users/test\r\n    HTTP/1.1 409\r\n    Access-Control-Allow-Origin: *\r\n    Content-Type: application/json\r\n    Transfer-Encoding: chunked\r\n    Date: Fri, 14 Jul 2023 05:45:19 GMT\r\n    \r\n    {&quot;status&quot;:422,&quot;messages&quot;:[&quot;Email address is invalid: john.doegmail.com&quot;, &quot;Phone number is invalid: &#39;2323&#39;, expecting in format &#39;999-999-9999&#39;&quot;, &quot;Invalid State &#39;xx&#39;. A valid US state is required.&quot;]}\r\n\r\n","title":"Can&#39;t get response body from Spring Boot REST API on Error","body":"<p>The solution was a CORS related problem. Adding <code>Access-Control-Allow-Origin</code> to the header was the solution.</p>\n<p>Here's what you need to do if you want to catch all exceptions globally and send back a meaningful response. Forgive me as I'm new to this, so if there is something I'm missing, please let me know.</p>\n<p>Global exception handler:</p>\n<pre><code>@RestControllerAdvice\npublic class GlobalExceptionHandler {\n    @ExceptionHandler\n    public ResponseEntity&lt;UserResponseException&gt; handleException(Exception ex) {\n        return ResponseException.ResponseEntity(HttpStatus.INTERNAL_SERVER_ERROR, ex.getMessage());\n    }\n    // Add more handlers as needed. \n}\n</code></pre>\n<p>and my response exception class</p>\n<pre><code>@AllArgsConstructor(access = AccessLevel.PRIVATE)\npublic class ResponseException {\n    private int status;\n    private List&lt;String&gt; messages;\n    // add anything else you want to return\n\n    public static ResponseEntity&lt;ResponseException&gt; ResponseEntity(HttpStatus status, List&lt;String&gt; messages) {\n        ResponseException ure = new ResponseException(status.value(), messages);\n        HttpHeaders headers = new HttpHeaders();\n        headers.set(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);\n        return new ResponseEntity&lt;ResponseException&gt;(ure, headers, status);\n    }\n}\n</code></pre>\n<p>Now I can get back the data and it's available in CURL and in WebBrowser and most importantly to my front-end client.</p>\n<pre><code>curl -i http://localhost:8080/api/users/test\nHTTP/1.1 409\nAccess-Control-Allow-Origin: *\nContent-Type: application/json\nTransfer-Encoding: chunked\nDate: Fri, 14 Jul 2023 05:45:19 GMT\n\n{&quot;status&quot;:422,&quot;messages&quot;:[&quot;Email address is invalid: john.doegmail.com&quot;, &quot;Phone number is invalid: '2323', expecting in format '999-999-9999'&quot;, &quot;Invalid State 'xx'. A valid US state is required.&quot;]}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689350436,"creation_date":1689350436,"answer_id":76689400,"question_id":76689332,"body_markdown":"It is not necessary to set the `Access-Control-Allow-Origin` header manually. The [`@CrossOrigin`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/CrossOrigin.html) annotation can be used to configure CORS directly on a controller or any handler method.\r\n\r\n```java\r\n@CrossOrigin(&quot;*&quot;)\r\n@RestControllerAdvice\r\npublic class GlobalExceptionHandler {\r\n    // ...\r\n}\r\n```","title":"Can&#39;t get response body from Spring Boot REST API on Error","body":"<p>It is not necessary to set the <code>Access-Control-Allow-Origin</code> header manually. The <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/CrossOrigin.html\" rel=\"nofollow noreferrer\"><code>@CrossOrigin</code></a> annotation can be used to configure CORS directly on a controller or any handler method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@CrossOrigin(&quot;*&quot;)\n@RestControllerAdvice\npublic class GlobalExceptionHandler {\n    // ...\n}\n</code></pre>\n"}],"owner":{"account_id":2184114,"reputation":659,"user_id":1932930,"accept_rate":40,"display_name":"tdemay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":546,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689350436,"creation_date":1689349893,"question_id":76689332,"body_markdown":"I spent way too much time on this I thought I would share what I found out. I&#39;m surprised I couldn&#39;t find this information anywhere as it would seem like something ever app must have. \r\n\r\nI expect to be able to send additional data back to the client from my Spring Boot REST API when an error occurs. Something like this:\r\n\r\n    &gt;curl -i GET https://api.twitter.com/1.1/statuses/update.json?include_entities=true\r\n    HTTP/1.1 400 Bad Request\r\n    date: Fri, 14 Jul 2023 15:23:34 GMT\r\n    content-type: application/json; charset=utf-8\r\n    cache-control: no-cache, no-store, max-age=0\r\n    content-length: 62\r\n    \r\n    {&quot;errors&quot;:[{&quot;code&quot;:215,&quot;message&quot;:&quot;Bad Authentication data.&quot;}]}\r\n\r\nI could get this working with curl, but in a browser, the response data was not received. I confirmed this using Google Dev Tools to view the network traffic. And the data was being sent from my REST API.\r\n\r\nI would have expected to find some useful information here at one of these links, but I didn&#39;t.\r\n\r\n[Error Handling for REST with Spring][1]\r\n\r\n[Best Practices for REST API Error Handling][2]\r\n\r\n  [1]: https://www.baeldung.com/exception-handling-for-rest-with-spring\r\n  [2]: https://www.baeldung.com/rest-api-error-handling-best-practices","title":"Can&#39;t get response body from Spring Boot REST API on Error","body":"<p>I spent way too much time on this I thought I would share what I found out. I'm surprised I couldn't find this information anywhere as it would seem like something ever app must have.</p>\n<p>I expect to be able to send additional data back to the client from my Spring Boot REST API when an error occurs. Something like this:</p>\n<pre><code>&gt;curl -i GET https://api.twitter.com/1.1/statuses/update.json?include_entities=true\nHTTP/1.1 400 Bad Request\ndate: Fri, 14 Jul 2023 15:23:34 GMT\ncontent-type: application/json; charset=utf-8\ncache-control: no-cache, no-store, max-age=0\ncontent-length: 62\n\n{&quot;errors&quot;:[{&quot;code&quot;:215,&quot;message&quot;:&quot;Bad Authentication data.&quot;}]}\n</code></pre>\n<p>I could get this working with curl, but in a browser, the response data was not received. I confirmed this using Google Dev Tools to view the network traffic. And the data was being sent from my REST API.</p>\n<p>I would have expected to find some useful information here at one of these links, but I didn't.</p>\n<p><a href=\"https://www.baeldung.com/exception-handling-for-rest-with-spring\" rel=\"nofollow noreferrer\">Error Handling for REST with Spring</a></p>\n<p><a href=\"https://www.baeldung.com/rest-api-error-handling-best-practices\" rel=\"nofollow noreferrer\">Best Practices for REST API Error Handling</a></p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":120605,"reputation":24173,"user_id":313137,"display_name":"Romain Hippeau"},"score":0,"creation_date":1689351222,"post_id":76689380,"comment_id":135206099,"body_markdown":"The runtime needs to be at least as new as the compiler. For the list: https://www.baeldung.com/java-find-class-version - Maybe time to update the runtime jre ?","body":"The runtime needs to be at least as new as the compiler. For the list: <a href=\"https://www.baeldung.com/java-find-class-version\" rel=\"nofollow noreferrer\">baeldung.com/java-find-class-version</a> - Maybe time to update the runtime jre ?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689353605,"post_id":76689380,"comment_id":135206631,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":0,"creation_date":1689362163,"post_id":76689380,"comment_id":135208120,"body_markdown":"In your case, you&#39;re using a Java 16 JVM and trying to run code compiled with Java 17.  Use a JVM that&#39;s at least version 17 or higher to run it with.","body":"In your case, you&#39;re using a Java 16 JVM and trying to run code compiled with Java 17.  Use a JVM that&#39;s at least version 17 or higher to run it with."}],"owner":{"account_id":29018131,"reputation":21,"user_id":22228142,"display_name":"Akarsh Gaud"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3530,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1689350306,"creation_date":1689350306,"question_id":76689380,"body_markdown":"I know there is lots of answer about this problem but in case what we do in  my problem.\r\nI have try changes in java build path and  but not working.\r\nException in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: org/springframework/boot/SpringApplication has been compiled by a more recent version of the Java Runtime (class file version 61.0), this version of the Java Runtime only recognizes class file versions up to 60.0\r\n\t","title":"Java Runtime (class file version 61.0), this version of the Java Runtime only recognizes class file versions up to 60.0","body":"<p>I know there is lots of answer about this problem but in case what we do in  my problem.\nI have try changes in java build path and  but not working.\nException in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: org/springframework/boot/SpringApplication has been compiled by a more recent version of the Java Runtime (class file version 61.0), this version of the Java Runtime only recognizes class file versions up to 60.0</p>\n"},{"tags":["java","mysql","spring-boot","backend"],"comments":[{"owner":{"account_id":24308075,"reputation":11,"user_id":18250525,"display_name":"Soumya priyadarshi Das"},"score":0,"creation_date":1689336146,"post_id":76687475,"comment_id":135202533,"body_markdown":"If any more information required, please give a comment here","body":"If any more information required, please give a comment here"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1689336846,"post_id":76687475,"comment_id":135202666,"body_markdown":"Do you have any entities? Can you share logfiles?","body":"Do you have any entities? Can you share logfiles?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689337704,"post_id":76687475,"comment_id":135202903,"body_markdown":"Why *would* it create a table, did you save entities? btw, it&#39;s a bad plan to use an account called &#39;root&#39; in MySql","body":"Why <i>would</i> it create a table, did you save entities? btw, it&#39;s a bad plan to use an account called &#39;root&#39; in MySql"},{"owner":{"account_id":9531412,"reputation":2010,"user_id":7082956,"display_name":"Valerij Dobler"},"score":0,"creation_date":1689340044,"post_id":76687475,"comment_id":135203402,"body_markdown":"Well if you want to create the tables use `spring.jpa.hibernate.ddl-auto=create`","body":"Well if you want to create the tables use <code>spring.jpa.hibernate.ddl-auto=create</code>"},{"owner":{"account_id":24308075,"reputation":11,"user_id":18250525,"display_name":"Soumya priyadarshi Das"},"score":0,"creation_date":1689341285,"post_id":76687475,"comment_id":135203712,"body_markdown":"@g00se-yes. but I have just started to learn to learn spring boot few days back. It is for practice purpose only","body":"@g00se-yes. but I have just started to learn to learn spring boot few days back. It is for practice purpose only"},{"owner":{"account_id":24308075,"reputation":11,"user_id":18250525,"display_name":"Soumya priyadarshi Das"},"score":0,"creation_date":1689341423,"post_id":76687475,"comment_id":135203757,"body_markdown":"@Jens Added a pic. Please check","body":"@Jens Added a pic. Please check"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1689341461,"post_id":76687475,"comment_id":135203771,"body_markdown":"No picture please. Text only","body":"No picture please. Text only"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689342239,"post_id":76687475,"comment_id":135203959,"body_markdown":"[Please never post images of text](https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557). They are not searchable, we cannot copy-paste... Always copy-paste the text and format it properly.","body":"<a href=\"https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557\">Please never post images of text</a>. They are not searchable, we cannot copy-paste... Always copy-paste the text and format it properly."},{"owner":{"account_id":24308075,"reputation":11,"user_id":18250525,"display_name":"Soumya priyadarshi Das"},"score":0,"creation_date":1689349874,"post_id":76687475,"comment_id":135205818,"body_markdown":"@g00se added code. Please check","body":"@g00se added code. Please check"},{"owner":{"account_id":24308075,"reputation":11,"user_id":18250525,"display_name":"Soumya priyadarshi Das"},"score":0,"creation_date":1689349888,"post_id":76687475,"comment_id":135205820,"body_markdown":"@Jens added code Please check","body":"@Jens added code Please check"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689351980,"post_id":76687475,"comment_id":135206254,"body_markdown":"That doesn&#39;t really tell us much. You&#39;ve defined an entity and wired up persistence. But we don&#39;t see you doing anything with entities","body":"That doesn&#39;t really tell us much. You&#39;ve defined an entity and wired up persistence. But we don&#39;t see you doing anything with entities"},{"owner":{"account_id":24308075,"reputation":11,"user_id":18250525,"display_name":"Soumya priyadarshi Das"},"score":0,"creation_date":1689352905,"post_id":76687475,"comment_id":135206466,"body_markdown":"@g00se first thing after running the application, it should create a table in the data base with declared columns. But it is not creating any table","body":"@g00se first thing after running the application, it should create a table in the data base with declared columns. But it is not creating any table"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689353161,"post_id":76687475,"comment_id":135206520,"body_markdown":"Save an entity and see what happens","body":"Save an entity and see what happens"},{"owner":{"account_id":24308075,"reputation":11,"user_id":18250525,"display_name":"Soumya priyadarshi Das"},"score":0,"creation_date":1689354016,"post_id":76687475,"comment_id":135206713,"body_markdown":"@g00se still no table","body":"@g00se still no table"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689354434,"post_id":76687475,"comment_id":135206790,"body_markdown":"Show the code you&#39;ve just written please and also the server output where you try to save","body":"Show the code you&#39;ve just written please and also the server output where you try to save"}],"owner":{"account_id":24308075,"reputation":11,"user_id":18250525,"display_name":"Soumya priyadarshi Das"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1689349837,"creation_date":1689336113,"question_id":76687475,"body_markdown":"[enter image description here][1]I have started a new spring bot project. spring boot is running without error, but table is not created in database.\r\n\r\nI have added these lines in application.properties.\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/ems?useSSL=false\r\n    spring.datasource.username=root\r\n    spring.datasource.password=password\r\n    \r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect\r\n    \r\n    spring.jpa.hibernate.ddl-auto=update\r\n\r\n    package com.employee.management.system.model;\r\n    \r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Getter;\r\n    import lombok.NoArgsConstructor;\r\n    import lombok.Setter;\r\n    \r\n    import javax.persistence.*;\r\n    \r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Entity\r\n    @Table(name=&quot;employee&quot;)\r\n    \r\n    public class Employee {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private String id;\r\n        @Column(name=&quot;first_name&quot;)\r\n        private String firstName;\r\n        @Column(name=&quot;last_name&quot;)\r\n        private String lastName;\r\n        @Column(name=&quot;email_id&quot;)\r\n        private String emailId;\r\n    }\r\n    \r\n        \r\n\r\n","title":"Spring boot executes without error, but no table created in MySQL database","body":"<p>[enter image description here][1]I have started a new spring bot project. spring boot is running without error, but table is not created in database.</p>\n<p>I have added these lines in application.properties.</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/ems?useSSL=false\nspring.datasource.username=root\nspring.datasource.password=password\n\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect\n\nspring.jpa.hibernate.ddl-auto=update\n\npackage com.employee.management.system.model;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\n\nimport javax.persistence.*;\n\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name=&quot;employee&quot;)\n\npublic class Employee {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private String id;\n    @Column(name=&quot;first_name&quot;)\n    private String firstName;\n    @Column(name=&quot;last_name&quot;)\n    private String lastName;\n    @Column(name=&quot;email_id&quot;)\n    private String emailId;\n}\n\n    \n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","docker","docker-compose"],"comments":[{"owner":{"account_id":5591028,"reputation":502,"user_id":4430246,"display_name":"Rob"},"score":0,"creation_date":1689337295,"post_id":76686711,"comment_id":135202780,"body_markdown":"Does this answer your question? [Docker Compose wait for container X before starting Y](https://stackoverflow.com/questions/31746182/docker-compose-wait-for-container-x-before-starting-y)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/31746182/docker-compose-wait-for-container-x-before-starting-y\">Docker Compose wait for container X before starting Y</a>"}],"answers":[{"tags":[],"owner":{"account_id":19206274,"reputation":107,"user_id":14033074,"display_name":"Sampeteq"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689349441,"creation_date":1689349441,"answer_id":76689290,"question_id":76686711,"body_markdown":"I solved this. Only api image has to be on Docker Hub. It can be run via docer-compose.yaml file. Download it from Github and run in console: docker-compose up -d","title":"Using pulled Docker image - Postgres error (Spring Boot, Postgres)","body":"<p>I solved this. Only api image has to be on Docker Hub. It can be run via docer-compose.yaml file. Download it from Github and run in console: docker-compose up -d</p>\n"}],"owner":{"account_id":19206274,"reputation":107,"user_id":14033074,"display_name":"Sampeteq"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689349441,"creation_date":1689329420,"question_id":76686711,"body_markdown":"I pushed simple Spring Boot web app with Postgres on Docker Hub.\r\n[![enter image description here][1]][1] \r\n\r\n\r\nBut when i pulled it and try to run it in Docker Desktop i got: org.postgresql.util.PSQLException: The connection attempt failed\r\n\r\n[![enter image description here][2]][2]\r\n\r\nDockerfile:\r\n\r\n    FROM openjdk:17\r\n    VOLUME /tmp\r\n    EXPOSE 8080\r\n    COPY target/docker-compose-test-0.0.1-SNAPSHOT.jar test.jar\r\n    ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/test.jar&quot;]\r\n\r\nDocker compose:\r\n\r\n    services:\r\n    psql-db:\r\n    image: postgres\r\n    container_name: persons-db\r\n    restart: always\r\n    environment:\r\n      - POSTGRES_USER=postgres\r\n      - POSTGRES_PASSWORD=12345\r\n      - POSTGRES_DB=persons\r\n      - POSTGRES_HOST_AUTH_METHOD=trust\r\n    ports:\r\n      - &#39;5432:5432&#39;\r\n\r\n    api:\r\n     container_name: persons-api\r\n     build:\r\n      context: .\r\n      dockerfile: Dockerfile\r\n     ports:\r\n      - &#39;8080:8080&#39;\r\n     environment:\r\n      - SPRING_DATASOURCE_URL=jdbc:postgresql://psql-db:5432/persons\r\n      - SPRING_DATASOURCE_USERNAME=postgres\r\n      - SPRING_DATASOURCE_PASSWORD=12345\r\n      - SPRING_JPA_HIBERNATE_DDL_AUTO=create\r\n     depends_on:\r\n      - psql-db\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BoOpl.png\r\n  [2]: https://i.stack.imgur.com/xjE2M.png","title":"Using pulled Docker image - Postgres error (Spring Boot, Postgres)","body":"<p>I pushed simple Spring Boot web app with Postgres on Docker Hub.\n<a href=\"https://i.stack.imgur.com/BoOpl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BoOpl.png\" alt=\"enter image description here\" /></a></p>\n<p>But when i pulled it and try to run it in Docker Desktop i got: org.postgresql.util.PSQLException: The connection attempt failed</p>\n<p><a href=\"https://i.stack.imgur.com/xjE2M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xjE2M.png\" alt=\"enter image description here\" /></a></p>\n<p>Dockerfile:</p>\n<pre><code>FROM openjdk:17\nVOLUME /tmp\nEXPOSE 8080\nCOPY target/docker-compose-test-0.0.1-SNAPSHOT.jar test.jar\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/test.jar&quot;]\n</code></pre>\n<p>Docker compose:</p>\n<pre><code>services:\npsql-db:\nimage: postgres\ncontainer_name: persons-db\nrestart: always\nenvironment:\n  - POSTGRES_USER=postgres\n  - POSTGRES_PASSWORD=12345\n  - POSTGRES_DB=persons\n  - POSTGRES_HOST_AUTH_METHOD=trust\nports:\n  - '5432:5432'\n\napi:\n container_name: persons-api\n build:\n  context: .\n  dockerfile: Dockerfile\n ports:\n  - '8080:8080'\n environment:\n  - SPRING_DATASOURCE_URL=jdbc:postgresql://psql-db:5432/persons\n  - SPRING_DATASOURCE_USERNAME=postgres\n  - SPRING_DATASOURCE_PASSWORD=12345\n  - SPRING_JPA_HIBERNATE_DDL_AUTO=create\n depends_on:\n  - psql-db\n</code></pre>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1689371907,"post_id":76688465,"comment_id":135209571,"body_markdown":"Does this answer your question? [Java Generics PECS , add capture ? super cannot be applied to java.util.list](https://stackoverflow.com/questions/75667328/java-generics-pecs-add-capture-super-cannot-be-applied-to-java-util-list)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/75667328/java-generics-pecs-add-capture-super-cannot-be-applied-to-java-util-list\">Java Generics PECS , add capture ? super cannot be applied to java.util.list</a>"},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1689372216,"post_id":76688465,"comment_id":135209604,"body_markdown":"[See this answer from rzwitserloot for a terrific explanation of your problem](https://stackoverflow.com/a/75667524/2985643). It is one of the best written answers I have seen on SO on any subject.","body":"<a href=\"https://stackoverflow.com/a/75667524/2985643\">See this answer from rzwitserloot for a terrific explanation of your problem</a>. It is one of the best written answers I have seen on SO on any subject."}],"answers":[{"tags":[],"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1689344629,"creation_date":1689344629,"answer_id":76688606,"question_id":76688465,"body_markdown":"The bounded wildcard `? super Number` represents some type that is a supertype of `Number`. However, it&#39;s unknown what specific type that is, so two different wildcards of the same bounds could refer to different types.\r\n\r\nFor instance, `numList` could be a `List&lt;Number&gt;` and `l` could be a `List&lt;Object&gt;` (both of which are valid because `Object` and `Number` satisfy the wildcard). In this case, it is clear that you cannot add arbitrary `Object`s to a `List` of `Number`s.","title":"Java Generics: collection with same lower bound cannot be added to another collection with the same lower bound","body":"<p>The bounded wildcard <code>? super Number</code> represents some type that is a supertype of <code>Number</code>. However, it's unknown what specific type that is, so two different wildcards of the same bounds could refer to different types.</p>\n<p>For instance, <code>numList</code> could be a <code>List&lt;Number&gt;</code> and <code>l</code> could be a <code>List&lt;Object&gt;</code> (both of which are valid because <code>Object</code> and <code>Number</code> satisfy the wildcard). In this case, it is clear that you cannot add arbitrary <code>Object</code>s to a <code>List</code> of <code>Number</code>s.</p>\n"}],"owner":{"account_id":3739057,"reputation":3667,"user_id":3109248,"display_name":"Khanna111"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76688606,"answer_count":1,"score":0,"last_activity_date":1689348932,"creation_date":1689343650,"question_id":76688465,"body_markdown":"Not able to understand why this is disallowed. \r\n\r\n    List&lt;? super Number&gt; numList = Arrays.asList(1, 2, 3.0, &quot;hello&quot;);  \r\n    List&lt;? super Number&gt; l = new ArrayList&lt;&gt;();\r\n    l.add(1);\r\n    numList.addAll(l); // &lt;----- Error Here\r\n\r\n\r\nThe Error Description:\r\n\r\n    &#39;addAll(java.util.Collection&lt;? extends capture&lt;? super java.lang.Number&gt;&gt;)&#39; in &#39;java.util.List&#39; cannot be applied to &#39;(java.util.List&lt;capture&lt;? super java.lang.Number&gt;&gt;)&#39;","title":"Java Generics: collection with same lower bound cannot be added to another collection with the same lower bound","body":"<p>Not able to understand why this is disallowed.</p>\n<pre><code>List&lt;? super Number&gt; numList = Arrays.asList(1, 2, 3.0, &quot;hello&quot;);  \nList&lt;? super Number&gt; l = new ArrayList&lt;&gt;();\nl.add(1);\nnumList.addAll(l); // &lt;----- Error Here\n</code></pre>\n<p>The Error Description:</p>\n<pre><code>'addAll(java.util.Collection&lt;? extends capture&lt;? super java.lang.Number&gt;&gt;)' in 'java.util.List' cannot be applied to '(java.util.List&lt;capture&lt;? super java.lang.Number&gt;&gt;)'\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","spring-security"],"answers":[{"tags":[],"owner":{"account_id":21488921,"reputation":4715,"user_id":15835039,"display_name":"Steve Riesenberg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689348810,"creation_date":1689348810,"answer_id":76689222,"question_id":76678336,"body_markdown":"The error you receive comes from calling `authenticationManagerBuilder.build()` yourself. You are accessing an internal framework instance of the builder and calling `build()` yourself, while Spring Security also builds the authentication manager internally.\r\n\r\nGenerally, any `AuthenticationProvider` that is a `@Bean` (or `@Component`, etc.) will be autowired by Spring Security. You will want to restructure your application so you can conditionally apply the desired `AuthenticationProvider` to the relevant filter chain (instead of publishing as beans). The entire `getAuthenticationManager` method should be removed.","title":"AlreadyBuiltException while configuring multiple HttpSecurity instances with Spring Security","body":"<p>The error you receive comes from calling <code>authenticationManagerBuilder.build()</code> yourself. You are accessing an internal framework instance of the builder and calling <code>build()</code> yourself, while Spring Security also builds the authentication manager internally.</p>\n<p>Generally, any <code>AuthenticationProvider</code> that is a <code>@Bean</code> (or <code>@Component</code>, etc.) will be autowired by Spring Security. You will want to restructure your application so you can conditionally apply the desired <code>AuthenticationProvider</code> to the relevant filter chain (instead of publishing as beans). The entire <code>getAuthenticationManager</code> method should be removed.</p>\n"}],"owner":{"account_id":1591018,"reputation":1555,"user_id":1474335,"accept_rate":77,"display_name":"diminuta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1689348810,"creation_date":1689243879,"question_id":76678336,"body_markdown":"I&#39;m using Spring v.5.3.28 and Spring Security v.5.8.4, and I&#39;m trying to configure Spring Security without extending WebSecurityConfigurerAdapter as it has been deprecated.\r\n\r\nMy Spring Security configuration looks like this:\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableMethodSecurity(prePostEnabled = true)\r\n    public class SecurityConfiguration {\r\n    \r\n        private static final String SIGNIN = &quot;/signin&quot;;\r\n    \r\n        @Autowired\r\n        ApiCustomAuthenticationProviderImpl apiCustomAuthenticationProvider;\r\n    \r\n        @Autowired\r\n        CustomAuthenticationProviderImpl customAuthenticationProvider;\r\n    \r\n        @Autowired\r\n        LdapAuthenticationProviderImpl ldapAuthenticationProvider;\r\n    \r\n        @Autowired\r\n        SautenticaAuthenticationProviderImpl sautenticaAuthenticationProvider;\r\n    \r\n        @Autowired\r\n        ConfigurationService configurationService;\r\n    \r\n        @Bean\r\n        protected UserDetailsService userDetailsService () {\r\n            return new AutenticacionServiceImpl();\r\n        }\r\n    \r\n        @Bean\r\n        public EvaluationContextExtension securityExtension () {\r\n            return new SecurityEvaluationContextExtension();\r\n        }\r\n    \r\n        @Bean\r\n        public AuditorAware&lt;Usuario&gt; auditorAware () {\r\n            return new SpringSecurityAuditorAware();\r\n        }\r\n    \r\n        public AuthenticationManager getAuthenticationManager (HttpSecurity http) throws Exception {\r\n            AuthenticationManagerBuilder authenticationManagerBuilder = http.getSharedObject(AuthenticationManagerBuilder.class);\r\n    \r\n            final String authMode = configurationService.findByCode(Constants.CT_AUTH_MODE);\r\n    \r\n            if (StringUtils.isNotEmpty(authMode) &amp;&amp; Constants.CT_LDAP.equalsIgnoreCase(authMode)) {\r\n                authenticationManagerBuilder.authenticationProvider(ldapAuthenticationProvider);\r\n            } else if (StringUtils.isNotEmpty(authMode) &amp;&amp; Constants.CT_SAUTENTICA.equalsIgnoreCase(authMode)) {\r\n                authenticationManagerBuilder.authenticationProvider(sautenticaAuthenticationProvider);\r\n            } else {\r\n                authenticationManagerBuilder.authenticationProvider(customAuthenticationProvider);\r\n            }\r\n    \r\n            authenticationManagerBuilder.eraseCredentials(false);\r\n    \r\n            return authenticationManagerBuilder.build();\r\n        }\r\n    \r\n        @Bean\r\n        @Order(1)\r\n        public SecurityFilterChain apiSecurityFilterChain (HttpSecurity http) throws Exception {\r\n            try {\r\n                http.securityMatcher(&quot;/api-ws/**&quot;);\r\n                http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n                http.authorizeHttpRequests().requestMatchers(&quot;/api-ws/**&quot;).authenticated().and().httpBasic().and().csrf().disable()\r\n                        .addFilterAfter(new ApiCustomBasicAuthenticationFilter(), BasicAuthenticationFilter.class);\r\n                http.authenticationProvider(apiCustomAuthenticationProvider);\r\n    \r\n            } catch (final Exception e) {\r\n                throw new SecurityException(e);\r\n            }\r\n            return http.build();\r\n        }\r\n    \r\n        @Bean\r\n        @Order(2)\r\n        public SecurityFilterChain wsSecurityFilterChain (HttpSecurity http) throws Exception {\r\n            try {\r\n                http.securityMatcher(&quot;/ws/**&quot;);\r\n                http.authorizeHttpRequests().requestMatchers(&quot;/ws/patient/**&quot;, &quot;/meet-ws/case/**&quot;).authenticated();\r\n                http.httpBasic().and().addFilterAt(new CustomBasicAuthenticationFilter(getAuthenticationManager(http)), BasicAuthenticationFilter.class);\r\n                http.headers().frameOptions().disable();\r\n            } catch (final Exception e) {\r\n                throw new SecurityException(e);\r\n            }\r\n            return http.build();\r\n        }\r\n    \r\n        @Bean\r\n        public WebSecurityCustomizer webSecurityCustomizer () {\r\n            return web -&gt; web.ignoring().requestMatchers(&quot;/ws/login**&quot;, &quot;/ws/new/xml**&quot;);\r\n        }\r\n    \r\n        @Bean\r\n        public SecurityFilterChain securityFilterChain (HttpSecurity http) throws Exception {\r\n    \r\n            try {\r\n                http.authorizeHttpRequests().requestMatchers(&quot;/favicon.ico&quot;, &quot;/resources/**&quot;, &quot;/health**&quot;, &quot;/signin**&quot;, &quot;/authenticate**&quot;).permitAll().anyRequest().authenticated()\r\n                        .and().authenticationManager(getAuthenticationManager(http)).formLogin().loginPage(SIGNIN).permitAll().loginProcessingUrl(&quot;/authenticate&quot;).permitAll()\r\n                        .failureUrl(&quot;/signin?error=1&quot;).successHandler(new CustomAuthenticationSuccessHandler()).and().sessionManagement().invalidSessionUrl(SIGNIN).and()\r\n                        .exceptionHandling().accessDeniedHandler(new AccessDeniedHandler()).and().headers().frameOptions().disable();\r\n    \r\n                http.logout().logoutUrl(&quot;/logout&quot;).logoutSuccessUrl(SIGNIN).permitAll();\r\n            \r\n            } catch (final Exception e) {\r\n                throw new SecurityException(e);\r\n            }\r\n            return http.build();\r\n        }\r\n    \r\n    }\r\n\r\nWhen I build the project it builds successfully but when I start the server it throws the following exception:\r\n\r\n        org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration&#39;: Unsatisfied dependency expressed through method &#39;setFilterChains&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;wsSecurityFilterChain&#39; defined in es.mycompany.myapp.SecurityConfiguration: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method &#39;wsSecurityFilterChain&#39; threw exception; nested exception is org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built\r\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:768)\r\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:720)\r\n        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\r\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)\r\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:920)\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\r\n        at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:399)\r\n        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:278)\r\n        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:103)\r\n        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4766)\r\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\r\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n        at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\r\n        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n        at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\r\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n        at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\r\n        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n        at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:263)\r\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n        at org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\r\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n        at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:927)\r\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:772)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\r\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;wsSecurityFilterChain&#39; defined in es.mycompany.myapp.SecurityConfiguration: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method &#39;wsSecurityFilterChain&#39; threw exception; nested exception is org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built\r\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658)\r\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n        at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1609)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1573)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1462)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1349)\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\r\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:760)\r\n        ... 46 more\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method &#39;wsSecurityFilterChain&#39; threw exception; nested exception is org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built\r\n        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\r\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\r\n        ... 62 more\r\n    Caused by: org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built\r\n        at org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:41)\r\n        at org.springframework.security.config.annotation.web.builders.HttpSecurity.beforeConfigure(HttpSecurity.java:3225)\r\n        at org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.doBuild(AbstractConfiguredSecurityBuilder.java:308)\r\n        at org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:38)\r\n        at es.mycompany.myapp.SecurityConfiguration.wsSecurityFilterChain(SecurityConfiguration.java:152)\r\n        at es.mycompany.myapp.SecurityConfiguration$$EnhancerBySpringCGLIB$$aaa83f30.CGLIB$wsSecurityFilterChain$7(&lt;generated&gt;)\r\n        at es.mycompany.myapp.SecurityConfiguration$$EnhancerBySpringCGLIB$$aaa83f30$$FastClassBySpringCGLIB$$ed15352b.invoke(&lt;generated&gt;)\r\n        at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244)\r\n        at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)\r\n        at es.mycompany.myapp.SecurityConfiguration$$EnhancerBySpringCGLIB$$aaa83f30.wsSecurityFilterChain(&lt;generated&gt;)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\r\n        ... 63 more\r\n\r\nThe only thing that I can think of is http.build(); being called twice, but they do the exact same thing in the documentation: https://docs.spring.io/spring-security/reference/servlet/configuration/java.html#_multiple_httpsecurity_instances","title":"AlreadyBuiltException while configuring multiple HttpSecurity instances with Spring Security","body":"<p>I'm using Spring v.5.3.28 and Spring Security v.5.8.4, and I'm trying to configure Spring Security without extending WebSecurityConfigurerAdapter as it has been deprecated.</p>\n<p>My Spring Security configuration looks like this:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableMethodSecurity(prePostEnabled = true)\npublic class SecurityConfiguration {\n\n    private static final String SIGNIN = &quot;/signin&quot;;\n\n    @Autowired\n    ApiCustomAuthenticationProviderImpl apiCustomAuthenticationProvider;\n\n    @Autowired\n    CustomAuthenticationProviderImpl customAuthenticationProvider;\n\n    @Autowired\n    LdapAuthenticationProviderImpl ldapAuthenticationProvider;\n\n    @Autowired\n    SautenticaAuthenticationProviderImpl sautenticaAuthenticationProvider;\n\n    @Autowired\n    ConfigurationService configurationService;\n\n    @Bean\n    protected UserDetailsService userDetailsService () {\n        return new AutenticacionServiceImpl();\n    }\n\n    @Bean\n    public EvaluationContextExtension securityExtension () {\n        return new SecurityEvaluationContextExtension();\n    }\n\n    @Bean\n    public AuditorAware&lt;Usuario&gt; auditorAware () {\n        return new SpringSecurityAuditorAware();\n    }\n\n    public AuthenticationManager getAuthenticationManager (HttpSecurity http) throws Exception {\n        AuthenticationManagerBuilder authenticationManagerBuilder = http.getSharedObject(AuthenticationManagerBuilder.class);\n\n        final String authMode = configurationService.findByCode(Constants.CT_AUTH_MODE);\n\n        if (StringUtils.isNotEmpty(authMode) &amp;&amp; Constants.CT_LDAP.equalsIgnoreCase(authMode)) {\n            authenticationManagerBuilder.authenticationProvider(ldapAuthenticationProvider);\n        } else if (StringUtils.isNotEmpty(authMode) &amp;&amp; Constants.CT_SAUTENTICA.equalsIgnoreCase(authMode)) {\n            authenticationManagerBuilder.authenticationProvider(sautenticaAuthenticationProvider);\n        } else {\n            authenticationManagerBuilder.authenticationProvider(customAuthenticationProvider);\n        }\n\n        authenticationManagerBuilder.eraseCredentials(false);\n\n        return authenticationManagerBuilder.build();\n    }\n\n    @Bean\n    @Order(1)\n    public SecurityFilterChain apiSecurityFilterChain (HttpSecurity http) throws Exception {\n        try {\n            http.securityMatcher(&quot;/api-ws/**&quot;);\n            http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n            http.authorizeHttpRequests().requestMatchers(&quot;/api-ws/**&quot;).authenticated().and().httpBasic().and().csrf().disable()\n                    .addFilterAfter(new ApiCustomBasicAuthenticationFilter(), BasicAuthenticationFilter.class);\n            http.authenticationProvider(apiCustomAuthenticationProvider);\n\n        } catch (final Exception e) {\n            throw new SecurityException(e);\n        }\n        return http.build();\n    }\n\n    @Bean\n    @Order(2)\n    public SecurityFilterChain wsSecurityFilterChain (HttpSecurity http) throws Exception {\n        try {\n            http.securityMatcher(&quot;/ws/**&quot;);\n            http.authorizeHttpRequests().requestMatchers(&quot;/ws/patient/**&quot;, &quot;/meet-ws/case/**&quot;).authenticated();\n            http.httpBasic().and().addFilterAt(new CustomBasicAuthenticationFilter(getAuthenticationManager(http)), BasicAuthenticationFilter.class);\n            http.headers().frameOptions().disable();\n        } catch (final Exception e) {\n            throw new SecurityException(e);\n        }\n        return http.build();\n    }\n\n    @Bean\n    public WebSecurityCustomizer webSecurityCustomizer () {\n        return web -&gt; web.ignoring().requestMatchers(&quot;/ws/login**&quot;, &quot;/ws/new/xml**&quot;);\n    }\n\n    @Bean\n    public SecurityFilterChain securityFilterChain (HttpSecurity http) throws Exception {\n\n        try {\n            http.authorizeHttpRequests().requestMatchers(&quot;/favicon.ico&quot;, &quot;/resources/**&quot;, &quot;/health**&quot;, &quot;/signin**&quot;, &quot;/authenticate**&quot;).permitAll().anyRequest().authenticated()\n                    .and().authenticationManager(getAuthenticationManager(http)).formLogin().loginPage(SIGNIN).permitAll().loginProcessingUrl(&quot;/authenticate&quot;).permitAll()\n                    .failureUrl(&quot;/signin?error=1&quot;).successHandler(new CustomAuthenticationSuccessHandler()).and().sessionManagement().invalidSessionUrl(SIGNIN).and()\n                    .exceptionHandling().accessDeniedHandler(new AccessDeniedHandler()).and().headers().frameOptions().disable();\n\n            http.logout().logoutUrl(&quot;/logout&quot;).logoutSuccessUrl(SIGNIN).permitAll();\n        \n        } catch (final Exception e) {\n            throw new SecurityException(e);\n        }\n        return http.build();\n    }\n\n}\n</code></pre>\n<p>When I build the project it builds successfully but when I start the server it throws the following exception:</p>\n<pre><code>    org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'wsSecurityFilterChain' defined in es.mycompany.myapp.SecurityConfiguration: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'wsSecurityFilterChain' threw exception; nested exception is org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:768)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:720)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:920)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\n    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:399)\n    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:278)\n    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:103)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4766)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:263)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:927)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.startup.Catalina.start(Catalina.java:772)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\n    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'wsSecurityFilterChain' defined in es.mycompany.myapp.SecurityConfiguration: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'wsSecurityFilterChain' threw exception; nested exception is org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:638)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1352)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1195)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1609)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1573)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1462)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1349)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:760)\n    ... 46 more\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'wsSecurityFilterChain' threw exception; nested exception is org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\n    ... 62 more\nCaused by: org.springframework.security.config.annotation.AlreadyBuiltException: This object has already been built\n    at org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:41)\n    at org.springframework.security.config.annotation.web.builders.HttpSecurity.beforeConfigure(HttpSecurity.java:3225)\n    at org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.doBuild(AbstractConfiguredSecurityBuilder.java:308)\n    at org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:38)\n    at es.mycompany.myapp.SecurityConfiguration.wsSecurityFilterChain(SecurityConfiguration.java:152)\n    at es.mycompany.myapp.SecurityConfiguration$$EnhancerBySpringCGLIB$$aaa83f30.CGLIB$wsSecurityFilterChain$7(&lt;generated&gt;)\n    at es.mycompany.myapp.SecurityConfiguration$$EnhancerBySpringCGLIB$$aaa83f30$$FastClassBySpringCGLIB$$ed15352b.invoke(&lt;generated&gt;)\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244)\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)\n    at es.mycompany.myapp.SecurityConfiguration$$EnhancerBySpringCGLIB$$aaa83f30.wsSecurityFilterChain(&lt;generated&gt;)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\n    ... 63 more\n</code></pre>\n<p>The only thing that I can think of is http.build(); being called twice, but they do the exact same thing in the documentation: <a href=\"https://docs.spring.io/spring-security/reference/servlet/configuration/java.html#_multiple_httpsecurity_instances\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-security/reference/servlet/configuration/java.html#_multiple_httpsecurity_instances</a></p>\n"},{"tags":["java","android-studio","admob"],"answers":[{"tags":[],"owner":{"account_id":22471780,"reputation":234,"user_id":16672126,"display_name":"ZeroZero1"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660563434,"creation_date":1660563434,"answer_id":73360466,"question_id":73217889,"body_markdown":"Check your Performance index by Waterfall and Bidding.\r\n\r\nIf you are not getting bid requests then you need to Implement bidding.\r\nFAN is Currently showing ads with Bidding only. \r\n\r\nIf you didn&#39;t integrated FAN with any Ad Network Mediation, follow instructions [here][1] to bid your FAN ads.\r\n\r\nFor FAN issues, You can check for issues at [Monetization Manager][2] to figure out main issues. \r\n\r\n\r\n  [1]: https://developers.facebook.com/docs/audience-network/bidding-integration\r\n  [2]: https://business.facebook.com/pub/issues","title":"Audience Network not displaying Ads with Admob mediation","body":"<p>Check your Performance index by Waterfall and Bidding.</p>\n<p>If you are not getting bid requests then you need to Implement bidding.\nFAN is Currently showing ads with Bidding only.</p>\n<p>If you didn't integrated FAN with any Ad Network Mediation, follow instructions <a href=\"https://developers.facebook.com/docs/audience-network/bidding-integration\" rel=\"nofollow noreferrer\">here</a> to bid your FAN ads.</p>\n<p>For FAN issues, You can check for issues at <a href=\"https://business.facebook.com/pub/issues\" rel=\"nofollow noreferrer\">Monetization Manager</a> to figure out main issues.</p>\n"},{"tags":[],"owner":{"account_id":14326724,"reputation":291,"user_id":10348628,"display_name":"Techy Rakshak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689348779,"creation_date":1689348779,"answer_id":76689217,"question_id":73217889,"body_markdown":"Firstly, as @ZeroZero1 said make sure that you have implemented a bidding setup only. Facebook has already stopped responding to simple waterfall mediation requests.\r\n\r\nIf Incase, you have already confirmed that you did the bidding setup only and still not getting response from Facebook Audience Network, then you must cross check your integration of Facebook Audience Network. \r\nTake Help of Admob&#39;s Mediation Suite (Now known as Ad inspector) to Check if you have integrated all the bidding setup correctly or not.\r\n\r\nHere The Mediation Test Suite (Ad Inspector) Reference [Link][1]\r\n\r\nUse this Ad Inspector to check if you have any errors in your integration. Also, while testing make sure to enable test ads in Facebook Audience Network by adding your device id is FAN Testing Section So that you can see test ads. Refer to this [Link][2].\r\n\r\n\r\n  [1]: https://developers.google.com/admob/android/migrate-to-ad-inspector\r\n  [2]: https://developers.facebook.com/docs/audience-network/setting-up/testing/platform","title":"Audience Network not displaying Ads with Admob mediation","body":"<p>Firstly, as @ZeroZero1 said make sure that you have implemented a bidding setup only. Facebook has already stopped responding to simple waterfall mediation requests.</p>\n<p>If Incase, you have already confirmed that you did the bidding setup only and still not getting response from Facebook Audience Network, then you must cross check your integration of Facebook Audience Network.\nTake Help of Admob's Mediation Suite (Now known as Ad inspector) to Check if you have integrated all the bidding setup correctly or not.</p>\n<p>Here The Mediation Test Suite (Ad Inspector) Reference <a href=\"https://developers.google.com/admob/android/migrate-to-ad-inspector\" rel=\"nofollow noreferrer\">Link</a></p>\n<p>Use this Ad Inspector to check if you have any errors in your integration. Also, while testing make sure to enable test ads in Facebook Audience Network by adding your device id is FAN Testing Section So that you can see test ads. Refer to this <a href=\"https://developers.facebook.com/docs/audience-network/setting-up/testing/platform\" rel=\"nofollow noreferrer\">Link</a>.</p>\n"}],"owner":{"account_id":11202866,"reputation":1,"user_id":8219327,"display_name":"Smart Bingari"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":715,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689348779,"creation_date":1659512009,"question_id":73217889,"body_markdown":"My Meta Audience Network not displaying Ads with Admob mediation Android, I am only getting requests and no impressions.\r\nPlease I need help, I have set up bidding and Admob Facebook mediation SDK \r\n    \r\n\r\n&gt; implementation &#39;com.google.ads.mediation:facebook:6.11.0.1&#39;\r\n\r\n&#39;[Screenshot][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/c2ywY.png","title":"Audience Network not displaying Ads with Admob mediation","body":"<p>My Meta Audience Network not displaying Ads with Admob mediation Android, I am only getting requests and no impressions.\nPlease I need help, I have set up bidding and Admob Facebook mediation SDK</p>\n<blockquote>\n<p>implementation 'com.google.ads.mediation:facebook:6.11.0.1'</p>\n</blockquote>\n<p>'<a href=\"https://i.stack.imgur.com/c2ywY.png\" rel=\"nofollow noreferrer\">Screenshot</a></p>\n"},{"tags":["java","spring","saml","saml-2.0","opensaml"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1635876317,"post_id":69810956,"comment_id":123408115,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":6387352,"reputation":159,"user_id":4954816,"display_name":"Eder Armando Anillo Lora"},"score":1,"creation_date":1649369954,"post_id":69810956,"comment_id":126865114,"body_markdown":"Hi, Did you solve this? I have the same problem. If you have a page with the solution please share it.","body":"Hi, Did you solve this? I have the same problem. If you have a page with the solution please share it."}],"answers":[{"tags":[],"owner":{"account_id":307264,"reputation":2065,"user_id":618465,"accept_rate":95,"display_name":"Navigatron"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646244577,"creation_date":1646244577,"answer_id":71327298,"question_id":69810956,"body_markdown":"So I found this issue looking for something else, but I think I can point you in the right direction here.\r\n\r\nSo in [this commit][1], you can see that some of the classes that your error mentions. The classes missing their symbols have been deleted from the project. \r\n\r\nIt appears they have been deleted in a &quot;clean up&quot; commit after [implementing OpenSAML 3.3][2] into the spring SAML extension for [version 2.0.0-M1][3]. So if you upgraded to 2.0.0-M1, I&#39;d assume you get the same errors, which you can confirm.\r\n\r\nI&#39;d assume you will have to re-implement your code to work with this version of the Spring SAML extension 2.0.0-M31. Although, you should really be using the [Spring security core SAML libraries][4] and not the extension, since the extension is considered [&quot;end of life&quot;][5]. Either way, you will need to re-implement your code.\r\n\r\nNote: I&#39;ve not seen any document or guide on how to migrate from version 1.0.10 to any version of 2.0. There is a request for a guide [here][6] on the extensions github and another [here][7] on the integrated spring security core github.\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-security-saml/commit/cac24f2c6ff077ff48a4a05fd99a9cb54e93ff35\r\n  [2]: https://github.com/spring-projects/spring-security-saml/commit/4e4f580a42c4316fe24adda83791f64fb46fca35\r\n  [3]: https://github.com/spring-projects/spring-security-saml/commits/2.0.0.M1?before=d4c169d28e90c7c7c79d68e21df26d2dd52c7276%20175&amp;branch=2.0.0.M1\r\n  [4]: https://github.com/spring-projects/spring-security\r\n  [5]: https://github.com/spring-projects/spring-security-saml#maintenance-mode\r\n  [6]: https://github.com/spring-projects/spring-security-saml/issues/462\r\n  [7]: https://github.com/spring-projects/spring-security/issues/8685","title":"Saml2 Core upgrade fails when upgraded spring-security-saml2-core from 1.0.10.RELEASE to 2.0.0.M31","body":"<p>So I found this issue looking for something else, but I think I can point you in the right direction here.</p>\n<p>So in <a href=\"https://github.com/spring-projects/spring-security-saml/commit/cac24f2c6ff077ff48a4a05fd99a9cb54e93ff35\" rel=\"nofollow noreferrer\">this commit</a>, you can see that some of the classes that your error mentions. The classes missing their symbols have been deleted from the project.</p>\n<p>It appears they have been deleted in a &quot;clean up&quot; commit after <a href=\"https://github.com/spring-projects/spring-security-saml/commit/4e4f580a42c4316fe24adda83791f64fb46fca35\" rel=\"nofollow noreferrer\">implementing OpenSAML 3.3</a> into the spring SAML extension for <a href=\"https://github.com/spring-projects/spring-security-saml/commits/2.0.0.M1?before=d4c169d28e90c7c7c79d68e21df26d2dd52c7276%20175&amp;branch=2.0.0.M1\" rel=\"nofollow noreferrer\">version 2.0.0-M1</a>. So if you upgraded to 2.0.0-M1, I'd assume you get the same errors, which you can confirm.</p>\n<p>I'd assume you will have to re-implement your code to work with this version of the Spring SAML extension 2.0.0-M31. Although, you should really be using the <a href=\"https://github.com/spring-projects/spring-security\" rel=\"nofollow noreferrer\">Spring security core SAML libraries</a> and not the extension, since the extension is considered <a href=\"https://github.com/spring-projects/spring-security-saml#maintenance-mode\" rel=\"nofollow noreferrer\">&quot;end of life&quot;</a>. Either way, you will need to re-implement your code.</p>\n<p>Note: I've not seen any document or guide on how to migrate from version 1.0.10 to any version of 2.0. There is a request for a guide <a href=\"https://github.com/spring-projects/spring-security-saml/issues/462\" rel=\"nofollow noreferrer\">here</a> on the extensions github and another <a href=\"https://github.com/spring-projects/spring-security/issues/8685\" rel=\"nofollow noreferrer\">here</a> on the integrated spring security core github.</p>\n"},{"tags":[],"owner":{"account_id":6387352,"reputation":159,"user_id":4954816,"display_name":"Eder Armando Anillo Lora"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689348652,"creation_date":1689347845,"answer_id":76689079,"question_id":69810956,"body_markdown":"Effectively, the saml library for 1.0.10.RELEASE is the last version that contains  those classes. Navigatron is right, Spring considers the extension library as [&quot;End of life&quot;][1]. So, we must implement the spring security library to configure the SAML. Here some links for checking:\r\n\r\n - [Baeldung][2] \r\n - [Dev okta][3] \r\n - [Medium][4]\r\n\r\nThe new library implemented there is spring-security-saml2-service-provider. It uses opensaml-core and not opensaml-2.6.6. You probably need to rewrite your core for SAML even the custom classes.\r\n\r\nI hope to help with this info.\r\n\r\n  [1]: https://github.com/spring-projects/spring-security-saml#maintenance-mode\r\n  [2]: https://www.baeldung.com/spring-security-saml\r\n  [3]: https://developer.okta.com/blog/2022/08/05/spring-boot-saml\r\n  [4]: https://medium.com/digital-software-architecture/spring-boot-spring-security-with-saml-2-83d87df5b470","title":"Saml2 Core upgrade fails when upgraded spring-security-saml2-core from 1.0.10.RELEASE to 2.0.0.M31","body":"<p>Effectively, the saml library for 1.0.10.RELEASE is the last version that contains  those classes. Navigatron is right, Spring considers the extension library as <a href=\"https://github.com/spring-projects/spring-security-saml#maintenance-mode\" rel=\"nofollow noreferrer\">&quot;End of life&quot;</a>. So, we must implement the spring security library to configure the SAML. Here some links for checking:</p>\n<ul>\n<li><a href=\"https://www.baeldung.com/spring-security-saml\" rel=\"nofollow noreferrer\">Baeldung</a></li>\n<li><a href=\"https://developer.okta.com/blog/2022/08/05/spring-boot-saml\" rel=\"nofollow noreferrer\">Dev okta</a></li>\n<li><a href=\"https://medium.com/digital-software-architecture/spring-boot-spring-security-with-saml-2-83d87df5b470\" rel=\"nofollow noreferrer\">Medium</a></li>\n</ul>\n<p>The new library implemented there is spring-security-saml2-service-provider. It uses opensaml-core and not opensaml-2.6.6. You probably need to rewrite your core for SAML even the custom classes.</p>\n<p>I hope to help with this info.</p>\n"}],"owner":{"account_id":22457481,"reputation":31,"user_id":16659963,"display_name":"Alison"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1583,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1689348652,"creation_date":1635858168,"question_id":69810956,"body_markdown":"I recently tried to upgrade saml2-core from 1.0.10 to 2.0.0.M31. When I tried building the project it fails with many &quot;cannot find symbol&quot; and &quot;package does not exists&quot; exceptions. \r\n\r\n```\r\n[ERROR] /C:/restproject/restsecurity/restsaml2/src/main/java/security/entry/AbstractSaml2AuthEntryPoint.java:[33,99] cannot find symbol\r\n  symbol:   class SAMLEntryPoint\r\n  location: package org.springframework.security.saml\r\n[ERROR] /C:/restproject/restsecurity/restsaml2/src/main/java/security/binding/RestHTTPArtifactEncoder.java:[35,46] cannot find symbol\r\n  symbol: class BaseSAML2MessageEncoder\r\n[ERROR] /C:/restproject/restsecurity/restsaml2/src/main/java/security/discovery/Saml2AuthDiscovery.java:[16,41] cannot find symbol\r\n  symbol:   class SAMLDiscovery\r\n  location: package org.springframework.security.saml\r\n[ERROR] /C:/restproject/restsecurity/restsaml2/src/main/java/security/ticket/Saml2UserDetails.java:[33,34] cannot find symbol\r\n  symbol:   class SAMLCredential\r\n  location: package org.springframework.security.saml\r\n```\r\n\r\nWhen I compared the package structure of both the version the structure and classes are different which is why It cannot find the required classes. What are replacement classes for these or is there any other new jar introduced which contains these missing classes. ","title":"Saml2 Core upgrade fails when upgraded spring-security-saml2-core from 1.0.10.RELEASE to 2.0.0.M31","body":"<p>I recently tried to upgrade saml2-core from 1.0.10 to 2.0.0.M31. When I tried building the project it fails with many &quot;cannot find symbol&quot; and &quot;package does not exists&quot; exceptions.</p>\n<pre><code>[ERROR] /C:/restproject/restsecurity/restsaml2/src/main/java/security/entry/AbstractSaml2AuthEntryPoint.java:[33,99] cannot find symbol\n  symbol:   class SAMLEntryPoint\n  location: package org.springframework.security.saml\n[ERROR] /C:/restproject/restsecurity/restsaml2/src/main/java/security/binding/RestHTTPArtifactEncoder.java:[35,46] cannot find symbol\n  symbol: class BaseSAML2MessageEncoder\n[ERROR] /C:/restproject/restsecurity/restsaml2/src/main/java/security/discovery/Saml2AuthDiscovery.java:[16,41] cannot find symbol\n  symbol:   class SAMLDiscovery\n  location: package org.springframework.security.saml\n[ERROR] /C:/restproject/restsecurity/restsaml2/src/main/java/security/ticket/Saml2UserDetails.java:[33,34] cannot find symbol\n  symbol:   class SAMLCredential\n  location: package org.springframework.security.saml\n</code></pre>\n<p>When I compared the package structure of both the version the structure and classes are different which is why It cannot find the required classes. What are replacement classes for these or is there any other new jar introduced which contains these missing classes.</p>\n"},{"tags":["java","velocity","apache-velocity"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689365282,"post_id":76689034,"comment_id":135208659,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":27810413,"reputation":456,"user_id":21232911,"display_name":"nischal sharma"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1689348576,"creation_date":1689348576,"answer_id":76689180,"question_id":76689034,"body_markdown":" Here is an example of how you can replace multiple variables in a string using Velocity Template Language:\r\n\r\n```velocity\r\n#set($SerialNumber = &quot;1234&quot;)\r\n#set($abcd = &quot;xyz&quot;)\r\nSERIAL_NUMBER $SerialNumber not found in iLPN/Tote $abcd\r\n```\r\n\r\nIn the above example, `$SerialNumber` and `$abcd` are two variables that are being replaced with the values `&quot;1234&quot;` and `&quot;xyz&quot;` respectively.\r\n","title":"replace 2 strings at a time in velocity template","body":"<p>Here is an example of how you can replace multiple variables in a string using Velocity Template Language:</p>\n<pre><code>#set($SerialNumber = &quot;1234&quot;)\n#set($abcd = &quot;xyz&quot;)\nSERIAL_NUMBER $SerialNumber not found in iLPN/Tote $abcd\n</code></pre>\n<p>In the above example, <code>$SerialNumber</code> and <code>$abcd</code> are two variables that are being replaced with the values <code>&quot;1234&quot;</code> and <code>&quot;xyz&quot;</code> respectively.</p>\n"}],"owner":{"account_id":23606155,"reputation":11,"user_id":17641873,"display_name":"Chinmaya Y Hegde"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689348576,"creation_date":1689347572,"question_id":76689034,"body_markdown":"SERIAL_NUMBER {SerialNumber} not found in iLPN/Tote {IlpnId}\r\n\r\nI want to replace {SerialNumber} with some value and also want to replace {abcd} with some value at a time.\r\nI am able to replace either {SerialNumber} or {abcd} one at a time but not both.\r\n\r\nhow to do this using velocity template language?","title":"replace 2 strings at a time in velocity template","body":"<p>SERIAL_NUMBER {SerialNumber} not found in iLPN/Tote {IlpnId}</p>\n<p>I want to replace {SerialNumber} with some value and also want to replace {abcd} with some value at a time.\nI am able to replace either {SerialNumber} or {abcd} one at a time but not both.</p>\n<p>how to do this using velocity template language?</p>\n"},{"tags":["java","json","jackson","jackson-databind"],"owner":{"account_id":1786983,"reputation":615,"user_id":1628247,"accept_rate":75,"display_name":"Krotz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689348315,"creation_date":1689348315,"question_id":76689137,"body_markdown":"Firstly thank you for your time!\r\nAny hints would be highly appreciated on how to do this with Jackson\r\n\r\n```json\r\n{\r\n  &quot;operation&quot;: &quot;create|update|delete|etc&quot;,\r\n  &quot;key&quot;: {&quot;type&quot;: &quot;type1&quot;, &quot;id&quot;: &quot;1&quot; },\r\n  &quot;payload&quot;: { //fields that are specific to **operation and key.type** at the same time },\r\n  &quot;...&quot;: // other fields based only on operation\r\n}\r\n```\r\n\r\nI&#39;ve tried doing this with annotations only, and I managed to get the root object deserialized based on the operation type using `@JsonTypeInfo`, and managed to get the key and the other fields to work with it as well using the `external_property` mode, but can&#39;t figure out a way to get the payload out correctly. If there is a way to achieve this solely with annotations, please do tell :)\r\n\r\nAfter, I tried creating a custom deserializer for the root object, manually parsed the top fields by inspecting the operation property, getting to a point similar to the annotations only approach, but got stuck again on the payload.\r\n\r\n```java\r\n@JsonSubTypes(Type(Type1CreatePayload.class))\r\nsealed interface CreatePayload {}\r\n\r\n@JsonTypeName(&quot;type1&quot;) // matches key.type\r\nfinal record Type1CreatePayload(..)\r\n\r\nsealed abstract class Operation {\r\n  // operation field\r\n  // key object\r\n}\r\n\r\nfinal class CreateOperation&lt;P extends CreatePayload&gt; extends Operation {\r\n  P payload;\r\n}\r\n```\r\n\r\n**I can&#39;t figure out how to find the type reference or java type from the DeserializerContext or parser, so I can reuse @JsonTypeName annotations from subtypes to dynamically call parser.readValueAs(type).**\r\n\r\nAlso during my research I&#39;ve seen wiki links that are now dead any ideas where the official docs are? espcially for custom serializers(error handling / reporting), @JsonTypeDeserializer etc. as I feel this is more complicated than usual usage patterns.\r\n\r\n","title":"Jackson dynamic/custom deserialization of nested object based on multiple fields at different nest levels","body":"<p>Firstly thank you for your time!\nAny hints would be highly appreciated on how to do this with Jackson</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;operation&quot;: &quot;create|update|delete|etc&quot;,\n  &quot;key&quot;: {&quot;type&quot;: &quot;type1&quot;, &quot;id&quot;: &quot;1&quot; },\n  &quot;payload&quot;: { //fields that are specific to **operation and key.type** at the same time },\n  &quot;...&quot;: // other fields based only on operation\n}\n</code></pre>\n<p>I've tried doing this with annotations only, and I managed to get the root object deserialized based on the operation type using <code>@JsonTypeInfo</code>, and managed to get the key and the other fields to work with it as well using the <code>external_property</code> mode, but can't figure out a way to get the payload out correctly. If there is a way to achieve this solely with annotations, please do tell :)</p>\n<p>After, I tried creating a custom deserializer for the root object, manually parsed the top fields by inspecting the operation property, getting to a point similar to the annotations only approach, but got stuck again on the payload.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonSubTypes(Type(Type1CreatePayload.class))\nsealed interface CreatePayload {}\n\n@JsonTypeName(&quot;type1&quot;) // matches key.type\nfinal record Type1CreatePayload(..)\n\nsealed abstract class Operation {\n  // operation field\n  // key object\n}\n\nfinal class CreateOperation&lt;P extends CreatePayload&gt; extends Operation {\n  P payload;\n}\n</code></pre>\n<p><strong>I can't figure out how to find the type reference or java type from the DeserializerContext or parser, so I can reuse @JsonTypeName annotations from subtypes to dynamically call parser.readValueAs(type).</strong></p>\n<p>Also during my research I've seen wiki links that are now dead any ideas where the official docs are? espcially for custom serializers(error handling / reporting), @JsonTypeDeserializer etc. as I feel this is more complicated than usual usage patterns.</p>\n"},{"tags":["java","spring-boot","jwt","refresh-token"],"answers":[{"tags":[],"owner":{"account_id":22551306,"reputation":186,"user_id":16740373,"display_name":"David Mališ"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1646228273,"creation_date":1646228273,"answer_id":71323673,"question_id":71323058,"body_markdown":"The problem is with this\r\n\r\n \r\n    @Bean\r\n    public AuthTokenFilter authenticationJwtTokenFilter() {\r\n        return new AuthTokenFilter();\r\n    }\r\n\r\nYou are using the wrong constructor to create a bean, and expecting that the dependency injection will do its magic afterwards - it&#39;s not how it works.\r\n\r\n\r\nBasically I would delete the no-args constructor in the filter, and rewrite the above method like this:\r\n\r\n    @Bean\r\n    public AuthTokenFilter authenticationJwtTokenFilter(JwtUtils jwtUtils, CustomUserDetailsService customUserDetailsService) {\r\n        return new AuthTokenFilter(jwtUtils, customUserDetailsService);\r\n    }\r\n","title":"Refresh Token with JWT - JWTUtils Cannot set user authentication because &quot;this.jwtUtils&quot; is null","body":"<p>The problem is with this</p>\n<pre><code>@Bean\npublic AuthTokenFilter authenticationJwtTokenFilter() {\n    return new AuthTokenFilter();\n}\n</code></pre>\n<p>You are using the wrong constructor to create a bean, and expecting that the dependency injection will do its magic afterwards - it's not how it works.</p>\n<p>Basically I would delete the no-args constructor in the filter, and rewrite the above method like this:</p>\n<pre><code>@Bean\npublic AuthTokenFilter authenticationJwtTokenFilter(JwtUtils jwtUtils, CustomUserDetailsService customUserDetailsService) {\n    return new AuthTokenFilter(jwtUtils, customUserDetailsService);\n}\n</code></pre>\n"}],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1731,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71323673,"answer_count":1,"score":1,"last_activity_date":1689348247,"creation_date":1646225716,"question_id":71323058,"body_markdown":"I have a problem about fix the error in my Refresh Token with JWT in Spring Boot Application.\r\n\r\nMy issue is related with validating JWT Token.\r\n\r\nEven if I defined @Component annotation in JWTUtil class, the issue cannot be disappeared.\r\n\r\n\r\nHere is my error shown below.\r\n\r\n    AuthTokenFilter | doFilterInternal | Cannot set user authentication: Cannot invoke &quot;com.refreshtokenjwt.app.jwt.JwtUtils.validateJwtToken(String)&quot; because &quot;this.jwtUtils&quot; is null\r\n\r\nHow can I fix my issue?\r\n\r\nHere is my JWTUtils shown below.\r\n\r\n    @Component\r\n    public class JwtUtils {\r\n    \r\n        private static final Logger LOGGER = LoggerFactory.getLogger(JwtUtils.class);\r\n    \r\n        @Value(&quot;${jwt.secret}&quot;)\r\n        private String jwtSecret;\r\n    \r\n        @Value(&quot;${jwt.secret.expireMs}&quot;)\r\n        private int jwtExpirationMs;\r\n    \r\n        public String generateJwtToken(CustomUserDetails userPrincipal) {\r\n            return generateTokenFromUsername(userPrincipal.getUsername());\r\n        }\r\n    \r\n        public String generateTokenFromUsername(String username) {\r\n            return Jwts.builder().setSubject(username).setIssuedAt(new Date())\r\n                    .setExpiration(new Date((new Date()).getTime() + jwtExpirationMs))\r\n                    .signWith(SignatureAlgorithm.HS512, jwtSecret).compact();\r\n        }\r\n    \r\n        public String getUserNameFromJwtToken(String token) {\r\n            return Jwts.parser().setSigningKey(jwtSecret).parseClaimsJws(token).getBody().getSubject();\r\n        }\r\n    \r\n        public boolean validateJwtToken(String authToken) {\r\n            try {\r\n                Jwts.parser().setSigningKey(jwtSecret).parseClaimsJws(authToken);\r\n                return true;\r\n            } catch (SignatureException e) {\r\n                LOGGER.error(&quot;JwtUtils | validateJwtToken | Invalid JWT signature: {}&quot;, e.getMessage());\r\n            } catch (MalformedJwtException e) {\r\n                LOGGER.error(&quot;JwtUtils | validateJwtToken | Invalid JWT token: {}&quot;, e.getMessage());\r\n            } catch (ExpiredJwtException e) {\r\n                LOGGER.error(&quot;JwtUtils | validateJwtToken | JWT token is expired: {}&quot;, e.getMessage());\r\n            } catch (UnsupportedJwtException e) {\r\n                LOGGER.error(&quot;JwtUtils | validateJwtToken | JWT token is unsupported: {}&quot;, e.getMessage());\r\n            } catch (IllegalArgumentException e) {\r\n                LOGGER.error(&quot;JwtUtils | validateJwtToken | JWT claims string is empty: {}&quot;, e.getMessage());\r\n            }\r\n    \r\n            return false;\r\n        }\r\n    }\r\n\r\nHere is my AuthTokenFilter class shown below.\r\n\r\n    public class AuthTokenFilter extends OncePerRequestFilter {\r\n    \r\n        private static final Logger LOGGER = LoggerFactory.getLogger(AuthTokenFilter.class);\r\n    \r\n        private JwtUtils jwtUtils;\r\n    \r\n        CustomUserDetailsService customUserDetailsService;\r\n    \r\n        public AuthTokenFilter() {\r\n        }\r\n    \r\n        @Autowired\r\n        public AuthTokenFilter(JwtUtils jwtUtils, CustomUserDetailsService customUserDetailsService) {\r\n            this.jwtUtils = jwtUtils;\r\n            this.customUserDetailsService = customUserDetailsService;\r\n        }\r\n    \r\n        @Override\r\n        protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response,\r\n                                        FilterChain filterChain) throws ServletException, IOException {\r\n    \r\n            try {\r\n    \r\n                String jwt = parseJwt(request);\r\n                LOGGER.error(&quot;AuthTokenFilter | doFilterInternal | jwt: {}&quot;, jwt);\r\n    \r\n                if (jwt != null &amp;&amp; jwtUtils.validateJwtToken(jwt)) {\r\n    \r\n                    String username = jwtUtils.getUserNameFromJwtToken(jwt);\r\n    \r\n                    UserDetails userDetails = customUserDetailsService.loadUserByUsername(username);\r\n                    UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(\r\n                            userDetails, null, userDetails.getAuthorities());\r\n                    authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n    \r\n                    SecurityContextHolder.getContext().setAuthentication(authentication);\r\n                }\r\n            } catch (Exception e) {\r\n                LOGGER.error(&quot;AuthTokenFilter | doFilterInternal | Cannot set user authentication: {}&quot;, e.getMessage());\r\n            }\r\n    \r\n            filterChain.doFilter(request, response);\r\n        }\r\n    \r\n    \r\n        private String parseJwt(HttpServletRequest request) {\r\n    \r\n            String headerAuth = request.getHeader(&quot;Authorization&quot;);\r\n    \r\n            if (StringUtils.hasText(headerAuth) &amp;&amp; headerAuth.startsWith(&quot;Bearer &quot;)) {\r\n                return headerAuth.substring(7, headerAuth.length());\r\n            }\r\n    \r\n            return null;\r\n        }\r\n    }\r\n\r\nHere is my AuthEntryPointJwt class shown below.\r\n\r\n    @Component\r\n    public class AuthEntryPointJwt implements AuthenticationEntryPoint {\r\n    \r\n        private static final Logger LOGGER = LoggerFactory.getLogger(AuthEntryPointJwt.class);\r\n    \r\n        @Override\r\n        public void commence(HttpServletRequest request, HttpServletResponse response,\r\n                             AuthenticationException authException) throws IOException, ServletException {\r\n    \r\n            LOGGER.error(&quot;AuthEntryPointJwt | commence | Unauthorized error: {}&quot;, authException.getMessage());\r\n    \r\n            response.setContentType(MediaType.APPLICATION_JSON_VALUE);\r\n            response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\r\n    \r\n            Map&lt;String, Object&gt; body = new HashMap&lt;&gt;();\r\n            body.put(&quot;status&quot;, HttpServletResponse.SC_UNAUTHORIZED);\r\n            body.put(&quot;error&quot;, &quot;Unauthorized&quot;);\r\n            body.put(&quot;message&quot;, authException.getMessage());\r\n            body.put(&quot;path&quot;, request.getServletPath());\r\n    \r\n            LOGGER.info(&quot;AuthEntryPointJwt | commence | status: {}&quot;, HttpServletResponse.SC_UNAUTHORIZED);\r\n            LOGGER.info(&quot;AuthEntryPointJwt | commence | error: {}&quot;, &quot;Unauthorized&quot;);\r\n            LOGGER.info(&quot;AuthEntryPointJwt | commence | message: {}&quot;, authException.getMessage());\r\n            LOGGER.info(&quot;AuthEntryPointJwt | commence | path: {}&quot;, request.getServletPath());\r\n    \r\n            final ObjectMapper mapper = new ObjectMapper();\r\n            mapper.writeValue(response.getOutputStream(), body);\r\n    \r\n        }\r\n    }\r\n\r\nHere is my WebSecurityConfig class shown below.\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n        CustomUserDetailsService customUserDetailsService;;\r\n    \r\n        private AuthEntryPointJwt unauthorizedHandler;\r\n    \r\n        @Autowired\r\n        public WebSecurityConfig(CustomUserDetailsService customUserDetailsService, AuthEntryPointJwt unauthorizedHandler) {\r\n            this.customUserDetailsService = customUserDetailsService;\r\n            this.unauthorizedHandler = unauthorizedHandler;\r\n        }\r\n    \r\n        @Bean\r\n        public PasswordEncoder passwordEncoder() {\r\n            return new BCryptPasswordEncoder();\r\n        }\r\n    \r\n        @Override\r\n        public void configure(AuthenticationManagerBuilder authenticationManagerBuilder) throws Exception {\r\n            authenticationManagerBuilder.userDetailsService(customUserDetailsService).passwordEncoder(passwordEncoder());\r\n        }\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http.cors().and()\r\n                    .csrf().disable()\r\n                    .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\r\n                    .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n                    .authorizeRequests().antMatchers(&quot;/api/auth/**&quot;).permitAll()\r\n                    .antMatchers(&quot;/api/pages/**&quot;).permitAll()\r\n                    .anyRequest().authenticated();\r\n    \r\n            http.addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\r\n        }\r\n    \r\n        @Bean\r\n        @Override\r\n        public AuthenticationManager authenticationManagerBean() throws Exception {\r\n            return super.authenticationManagerBean();\r\n        }\r\n    \r\n        @Bean\r\n        public AuthTokenFilter authenticationJwtTokenFilter() {\r\n            return new AuthTokenFilter();\r\n        }\r\n    }\r\n\r\n","title":"Refresh Token with JWT - JWTUtils Cannot set user authentication because &quot;this.jwtUtils&quot; is null","body":"<p>I have a problem about fix the error in my Refresh Token with JWT in Spring Boot Application.</p>\n<p>My issue is related with validating JWT Token.</p>\n<p>Even if I defined @Component annotation in JWTUtil class, the issue cannot be disappeared.</p>\n<p>Here is my error shown below.</p>\n<pre><code>AuthTokenFilter | doFilterInternal | Cannot set user authentication: Cannot invoke &quot;com.refreshtokenjwt.app.jwt.JwtUtils.validateJwtToken(String)&quot; because &quot;this.jwtUtils&quot; is null\n</code></pre>\n<p>How can I fix my issue?</p>\n<p>Here is my JWTUtils shown below.</p>\n<pre><code>@Component\npublic class JwtUtils {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(JwtUtils.class);\n\n    @Value(&quot;${jwt.secret}&quot;)\n    private String jwtSecret;\n\n    @Value(&quot;${jwt.secret.expireMs}&quot;)\n    private int jwtExpirationMs;\n\n    public String generateJwtToken(CustomUserDetails userPrincipal) {\n        return generateTokenFromUsername(userPrincipal.getUsername());\n    }\n\n    public String generateTokenFromUsername(String username) {\n        return Jwts.builder().setSubject(username).setIssuedAt(new Date())\n                .setExpiration(new Date((new Date()).getTime() + jwtExpirationMs))\n                .signWith(SignatureAlgorithm.HS512, jwtSecret).compact();\n    }\n\n    public String getUserNameFromJwtToken(String token) {\n        return Jwts.parser().setSigningKey(jwtSecret).parseClaimsJws(token).getBody().getSubject();\n    }\n\n    public boolean validateJwtToken(String authToken) {\n        try {\n            Jwts.parser().setSigningKey(jwtSecret).parseClaimsJws(authToken);\n            return true;\n        } catch (SignatureException e) {\n            LOGGER.error(&quot;JwtUtils | validateJwtToken | Invalid JWT signature: {}&quot;, e.getMessage());\n        } catch (MalformedJwtException e) {\n            LOGGER.error(&quot;JwtUtils | validateJwtToken | Invalid JWT token: {}&quot;, e.getMessage());\n        } catch (ExpiredJwtException e) {\n            LOGGER.error(&quot;JwtUtils | validateJwtToken | JWT token is expired: {}&quot;, e.getMessage());\n        } catch (UnsupportedJwtException e) {\n            LOGGER.error(&quot;JwtUtils | validateJwtToken | JWT token is unsupported: {}&quot;, e.getMessage());\n        } catch (IllegalArgumentException e) {\n            LOGGER.error(&quot;JwtUtils | validateJwtToken | JWT claims string is empty: {}&quot;, e.getMessage());\n        }\n\n        return false;\n    }\n}\n</code></pre>\n<p>Here is my AuthTokenFilter class shown below.</p>\n<pre><code>public class AuthTokenFilter extends OncePerRequestFilter {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(AuthTokenFilter.class);\n\n    private JwtUtils jwtUtils;\n\n    CustomUserDetailsService customUserDetailsService;\n\n    public AuthTokenFilter() {\n    }\n\n    @Autowired\n    public AuthTokenFilter(JwtUtils jwtUtils, CustomUserDetailsService customUserDetailsService) {\n        this.jwtUtils = jwtUtils;\n        this.customUserDetailsService = customUserDetailsService;\n    }\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response,\n                                    FilterChain filterChain) throws ServletException, IOException {\n\n        try {\n\n            String jwt = parseJwt(request);\n            LOGGER.error(&quot;AuthTokenFilter | doFilterInternal | jwt: {}&quot;, jwt);\n\n            if (jwt != null &amp;&amp; jwtUtils.validateJwtToken(jwt)) {\n\n                String username = jwtUtils.getUserNameFromJwtToken(jwt);\n\n                UserDetails userDetails = customUserDetailsService.loadUserByUsername(username);\n                UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(\n                        userDetails, null, userDetails.getAuthorities());\n                authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n\n                SecurityContextHolder.getContext().setAuthentication(authentication);\n            }\n        } catch (Exception e) {\n            LOGGER.error(&quot;AuthTokenFilter | doFilterInternal | Cannot set user authentication: {}&quot;, e.getMessage());\n        }\n\n        filterChain.doFilter(request, response);\n    }\n\n\n    private String parseJwt(HttpServletRequest request) {\n\n        String headerAuth = request.getHeader(&quot;Authorization&quot;);\n\n        if (StringUtils.hasText(headerAuth) &amp;&amp; headerAuth.startsWith(&quot;Bearer &quot;)) {\n            return headerAuth.substring(7, headerAuth.length());\n        }\n\n        return null;\n    }\n}\n</code></pre>\n<p>Here is my AuthEntryPointJwt class shown below.</p>\n<pre><code>@Component\npublic class AuthEntryPointJwt implements AuthenticationEntryPoint {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(AuthEntryPointJwt.class);\n\n    @Override\n    public void commence(HttpServletRequest request, HttpServletResponse response,\n                         AuthenticationException authException) throws IOException, ServletException {\n\n        LOGGER.error(&quot;AuthEntryPointJwt | commence | Unauthorized error: {}&quot;, authException.getMessage());\n\n        response.setContentType(MediaType.APPLICATION_JSON_VALUE);\n        response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\n\n        Map&lt;String, Object&gt; body = new HashMap&lt;&gt;();\n        body.put(&quot;status&quot;, HttpServletResponse.SC_UNAUTHORIZED);\n        body.put(&quot;error&quot;, &quot;Unauthorized&quot;);\n        body.put(&quot;message&quot;, authException.getMessage());\n        body.put(&quot;path&quot;, request.getServletPath());\n\n        LOGGER.info(&quot;AuthEntryPointJwt | commence | status: {}&quot;, HttpServletResponse.SC_UNAUTHORIZED);\n        LOGGER.info(&quot;AuthEntryPointJwt | commence | error: {}&quot;, &quot;Unauthorized&quot;);\n        LOGGER.info(&quot;AuthEntryPointJwt | commence | message: {}&quot;, authException.getMessage());\n        LOGGER.info(&quot;AuthEntryPointJwt | commence | path: {}&quot;, request.getServletPath());\n\n        final ObjectMapper mapper = new ObjectMapper();\n        mapper.writeValue(response.getOutputStream(), body);\n\n    }\n}\n</code></pre>\n<p>Here is my WebSecurityConfig class shown below.</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    CustomUserDetailsService customUserDetailsService;;\n\n    private AuthEntryPointJwt unauthorizedHandler;\n\n    @Autowired\n    public WebSecurityConfig(CustomUserDetailsService customUserDetailsService, AuthEntryPointJwt unauthorizedHandler) {\n        this.customUserDetailsService = customUserDetailsService;\n        this.unauthorizedHandler = unauthorizedHandler;\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Override\n    public void configure(AuthenticationManagerBuilder authenticationManagerBuilder) throws Exception {\n        authenticationManagerBuilder.userDetailsService(customUserDetailsService).passwordEncoder(passwordEncoder());\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.cors().and()\n                .csrf().disable()\n                .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n                .authorizeRequests().antMatchers(&quot;/api/auth/**&quot;).permitAll()\n                .antMatchers(&quot;/api/pages/**&quot;).permitAll()\n                .anyRequest().authenticated();\n\n        http.addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\n    }\n\n    @Bean\n    @Override\n    public AuthenticationManager authenticationManagerBean() throws Exception {\n        return super.authenticationManagerBean();\n    }\n\n    @Bean\n    public AuthTokenFilter authenticationJwtTokenFilter() {\n        return new AuthTokenFilter();\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","docker","dockerfile","activemq"],"answers":[{"tags":[],"owner":{"account_id":13173434,"reputation":1,"user_id":9514973,"display_name":"almartino"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689348201,"creation_date":1689348201,"answer_id":76689125,"question_id":75214364,"body_markdown":"I&#39;m trying to do a similar thing but with docker-compose, here&#39;s what i found until now:\r\n\r\n```yaml\r\n  activemq:\r\n    image: apache/activemq:5.17.5\r\n    hostname: &quot;0.0.0.0&quot;\r\n    ports:\r\n      - &quot;61616:61616&quot;\r\n      - &quot;8161:8161&quot;\r\n    volumes:\r\n      - ./jetty.xml:/opt/apache-activemq/conf/jetty.xml\r\n```\r\n\r\nI&#39;ve taken the `jetty.xml` from the container itself. If you look carefully to your logs at the end:\r\n```\r\n..INFO | ActiveMQ WebConsole available at http://127.0.0.1:8161/\r\n..INFO | ActiveMQ Jolokia REST API available at http://127.0.0.1:8161/api/jolokia/\r\n```\r\nModifying the jetty.xml configuration, will do the trick.\r\n\r\n```xml\r\n&lt;bean id=&quot;jettyPort&quot; class=&quot;org.apache.activemq.web.WebConsolePort&quot; init-method=&quot;start&quot;&gt;\r\n        &lt;property name=&quot;host&quot; value=&quot;0.0.0.0&quot;/&gt;\r\n        &lt;property name=&quot;port&quot; value=&quot;8161&quot;/&gt;\r\n    &lt;/bean&gt;\r\n```\r\n\r\n&gt; When a service listens on 0.0.0.0, it accepts connections from any network interface, including the loopback interface (127.0.0.1) and any external interfaces.","title":"Setting up Apache ActiveMQ in Docker","body":"<p>I'm trying to do a similar thing but with docker-compose, here's what i found until now:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>  activemq:\n    image: apache/activemq:5.17.5\n    hostname: &quot;0.0.0.0&quot;\n    ports:\n      - &quot;61616:61616&quot;\n      - &quot;8161:8161&quot;\n    volumes:\n      - ./jetty.xml:/opt/apache-activemq/conf/jetty.xml\n</code></pre>\n<p>I've taken the <code>jetty.xml</code> from the container itself. If you look carefully to your logs at the end:</p>\n<pre><code>..INFO | ActiveMQ WebConsole available at http://127.0.0.1:8161/\n..INFO | ActiveMQ Jolokia REST API available at http://127.0.0.1:8161/api/jolokia/\n</code></pre>\n<p>Modifying the jetty.xml configuration, will do the trick.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;bean id=&quot;jettyPort&quot; class=&quot;org.apache.activemq.web.WebConsolePort&quot; init-method=&quot;start&quot;&gt;\n        &lt;property name=&quot;host&quot; value=&quot;0.0.0.0&quot;/&gt;\n        &lt;property name=&quot;port&quot; value=&quot;8161&quot;/&gt;\n    &lt;/bean&gt;\n</code></pre>\n<blockquote>\n<p>When a service listens on 0.0.0.0, it accepts connections from any network interface, including the loopback interface (127.0.0.1) and any external interfaces.</p>\n</blockquote>\n"}],"owner":{"account_id":7604456,"reputation":28,"user_id":9420915,"display_name":"Naman Jain"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":718,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689348201,"creation_date":1674503469,"question_id":75214364,"body_markdown":"I&#39;m trying to setup Apache ActiveMQ in Docker.\r\n\r\nThis is the dockerfile I&#39;m using:\r\n```\r\nFROM ubuntu\r\nLABEL owner=&quot;Naman Jain&quot;\r\n\r\nRUN apt-get update &amp;&amp; apt-get install openjdk-11-jdk wget curl zookeeperd -y\r\n\r\nRUN wget http://archive.apache.org/dist/activemq/5.16.5/apache-activemq-5.16.5-bin.tar.gz --output-document apache-activemq.tar.gz\r\n\r\nRUN tar -xvzf apache-activemq.tar.gz --directory /opt\r\n\r\nRUN rm apache-activemq.tar.gz\r\n```\r\n\r\nAfter building the dockerfile and running the image -&gt;\r\n```\r\ndocker container run -it --name spring -p 8161:8161 -p 61616:61616 65e2b6f0f1529172ef8df15658347aa1898c653502f7cb507e798f12da43b81f\r\n```\r\n\r\nI started the ActiveMQ server -&gt;\r\n```\r\n./activemq console\r\n```\r\nIt has given the following output:\r\n[![ActiveMQ output](https://i.stack.imgur.com/VwEJN.png)](https://i.stack.imgur.com/VwEJN.png)\r\n\r\nBut I&#39;m not able to see the webpage on the browser:\r\n[![enter image description here](https://i.stack.imgur.com/QVxHw.png)](https://i.stack.imgur.com/QVxHw.png)\r\n\r\nI tried running the image using -p option but the webpage didn&#39;t work.","title":"Setting up Apache ActiveMQ in Docker","body":"<p>I'm trying to setup Apache ActiveMQ in Docker.</p>\n<p>This is the dockerfile I'm using:</p>\n<pre><code>FROM ubuntu\nLABEL owner=&quot;Naman Jain&quot;\n\nRUN apt-get update &amp;&amp; apt-get install openjdk-11-jdk wget curl zookeeperd -y\n\nRUN wget http://archive.apache.org/dist/activemq/5.16.5/apache-activemq-5.16.5-bin.tar.gz --output-document apache-activemq.tar.gz\n\nRUN tar -xvzf apache-activemq.tar.gz --directory /opt\n\nRUN rm apache-activemq.tar.gz\n</code></pre>\n<p>After building the dockerfile and running the image -&gt;</p>\n<pre><code>docker container run -it --name spring -p 8161:8161 -p 61616:61616 65e2b6f0f1529172ef8df15658347aa1898c653502f7cb507e798f12da43b81f\n</code></pre>\n<p>I started the ActiveMQ server -&gt;</p>\n<pre><code>./activemq console\n</code></pre>\n<p>It has given the following output:\n<a href=\"https://i.stack.imgur.com/VwEJN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VwEJN.png\" alt=\"ActiveMQ output\" /></a></p>\n<p>But I'm not able to see the webpage on the browser:\n<a href=\"https://i.stack.imgur.com/QVxHw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QVxHw.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried running the image using -p option but the webpage didn't work.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689357395,"post_id":76689123,"comment_id":135207335,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":29018324,"reputation":1,"user_id":22228311,"display_name":"Dipak Kumbhar"},"score":0,"creation_date":1689504018,"post_id":76689123,"comment_id":135220108,"body_markdown":"[ERROR] Failed to execute goal org.apache.maven.plugins:maven-enforcer-plugin:3.3.0:enforce (enforce-banned-dependencies) on project \n[ERROR] Rule 0: org.apache.maven.enforcer.rules.dependency.BannedDependencies failed with message:\n\n[ERROR]com.ebay.aero:aero-perfmon:jar:2.4.0\n[ERROR]com.ebayinc.platform.config:config-client-impl:jar:5.2.0\n[ERROR] org.apache.maven:maven-artifact:jar:3.6.1 &lt;--- banned via the exclude/include list","body":"[ERROR] Failed to execute goal org.apache.maven.plugins:maven-enforcer-plugin:3.3.0:enforce (enforce-banned-dependencies) on project  [ERROR] Rule 0: org.apache.maven.enforcer.rules.dependency.BannedDependencie&zwnj;&#8203;s failed with message:  [ERROR]com.ebay.aero:aero-perfmon:jar:2.4.0 [ERROR]com.ebayinc.platform.config:config-client-impl:jar:5.&zwnj;&#8203;2.0 [ERROR] org.apache.maven:maven-artifact:jar:3.6.1 &lt;--- banned via the exclude/include list"}],"owner":{"account_id":29018324,"reputation":1,"user_id":22228311,"display_name":"Dipak Kumbhar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689348179,"creation_date":1689348179,"question_id":76689123,"body_markdown":"I am facing error when I try to run mvn version:display-dependency-updates in local system. \r\n\r\norg.apache.maven.plugin.prefix.NoPluginFoundForPrefixException: No plugin found for prefix &#39;version&#39; in the current project and in the plugin groups [org.mortbay.jetty, org.codehaus.mojo, org.sonatype.maven.plugins, org.apache.maven.plugins] \r\n\r\nI have tried below commands\r\n\r\nmvn version:display-dependency-updates\r\nmvn dependency:analyze-duplicate\r\nmvn enforcer:enforce -X","title":"mvn version:display-dependency-updates giving an error org.apache.maven.plugin.prefix.NoPluginFoundForPrefixException:","body":"<p>I am facing error when I try to run mvn version:display-dependency-updates in local system.</p>\n<p>org.apache.maven.plugin.prefix.NoPluginFoundForPrefixException: No plugin found for prefix 'version' in the current project and in the plugin groups [org.mortbay.jetty, org.codehaus.mojo, org.sonatype.maven.plugins, org.apache.maven.plugins]</p>\n<p>I have tried below commands</p>\n<p>mvn version:display-dependency-updates\nmvn dependency:analyze-duplicate\nmvn enforcer:enforce -X</p>\n"},{"tags":["java","join","apache-beam"],"answers":[{"tags":[],"owner":{"account_id":523682,"reputation":5868,"user_id":949327,"display_name":"Kenn Knowles"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689347717,"creation_date":1689347717,"answer_id":76689059,"question_id":76688694,"body_markdown":"Good question.\r\n\r\nA _deterministic_ coder means that if two values are equal according to Java then they both will encode to the same bytes.\r\n\r\nWhy is this important? Because the engines that run Beam pipelines group by key according to the encoded bytes, because they are often implemented in different languages and do not call the `equals` methods or anything like that.\r\n\r\nSo if you have a `nondeterministic` coder, two equal values (like two `Set` objects with the same elements) may encode to different bytes. Then they will not be grouped together.\r\n\r\nCoders are responsible for reporting whether or not they are deterministic. For example, a `SetCoder` that just uses iteration order is not deterministic. A `SetCoder` that sorts elements before it encodes them is deterministic as long as the individual elements are also encoded deterministically. By default, the `CustomCoder` class will report that [it is nondeterministic](https://github.com/apache/beam/blob/7e8c789c6979a30cd42a99ca71129abf7497a369/sdks/java/core/src/main/java/org/apache/beam/sdk/coders/CustomCoder.java#L48). You can just override this `verifyDeterministic` method.\r\n\r\nBut I recommend using Beam&#39;s `Row` type as much as possible unless you really require custom encodings. If you just make your key type a `Row` with a schema that has `id1` and `id2` fields then it will automatically know if it is deterministic based on the schema of the row.\r\n\r\nHope this helps!","title":"Fix non deterministic keyCoder in a GroupByKey error","body":"<p>Good question.</p>\n<p>A <em>deterministic</em> coder means that if two values are equal according to Java then they both will encode to the same bytes.</p>\n<p>Why is this important? Because the engines that run Beam pipelines group by key according to the encoded bytes, because they are often implemented in different languages and do not call the <code>equals</code> methods or anything like that.</p>\n<p>So if you have a <code>nondeterministic</code> coder, two equal values (like two <code>Set</code> objects with the same elements) may encode to different bytes. Then they will not be grouped together.</p>\n<p>Coders are responsible for reporting whether or not they are deterministic. For example, a <code>SetCoder</code> that just uses iteration order is not deterministic. A <code>SetCoder</code> that sorts elements before it encodes them is deterministic as long as the individual elements are also encoded deterministically. By default, the <code>CustomCoder</code> class will report that <a href=\"https://github.com/apache/beam/blob/7e8c789c6979a30cd42a99ca71129abf7497a369/sdks/java/core/src/main/java/org/apache/beam/sdk/coders/CustomCoder.java#L48\" rel=\"nofollow noreferrer\">it is nondeterministic</a>. You can just override this <code>verifyDeterministic</code> method.</p>\n<p>But I recommend using Beam's <code>Row</code> type as much as possible unless you really require custom encodings. If you just make your key type a <code>Row</code> with a schema that has <code>id1</code> and <code>id2</code> fields then it will automatically know if it is deterministic based on the schema of the row.</p>\n<p>Hope this helps!</p>\n"}],"owner":{"account_id":29017889,"reputation":3,"user_id":22227950,"display_name":"Alberto Martin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76689059,"answer_count":1,"score":0,"last_activity_date":1689347717,"creation_date":1689345233,"question_id":76688694,"body_markdown":"I want to perform a CoGroupByKey operation between two PCollections by a pair of key-values: `id1` and `id2` . I defined a custom class which includes both keys. I read that I also need to define a `Coder` to specify the byte conversion, so I did.  \r\n\r\nHowever, I keep getting this error:  \r\n  \r\n`java.lang.IllegalStateException: the keyCoder of a GroupByKey must be deterministic`\r\n\r\nAm I missing something? Non deterministic means that the keyCoder cannot always guarantee that `id1` will come before `id2` . Doesn&#39;t my `Coder` already includes the order of the keys?\r\n\r\nThanks for your time!\r\n\r\n```\r\npublic static PCollection&lt;output&gt; joinById1Id2(PCollection&lt;Foo1&gt; foo1, PCollection&lt;Foo2&gt; foo2){\r\n\r\n        PCollection&lt;KV&lt;KeysId1Id2, Foo1&gt;&gt; Foo1WithKeys = Foo1.apply(WithKeys.of(new MapFoo1ByKeysId1Id2()))\r\n             .setCoder(KvCoder.of(KeysId1Id2Coder.of(), SerializableCoder.of(Foo1.class)));\r\n\r\n        PCollection&lt;KV&lt;KeysId1Id2, Foo2&gt;&gt; Foo1WithKeys = Foo2.apply(WithKeys.of(new MapFoo2ByKeysId1Id2()))\r\n             .setCoder(KvCoder.of(KeysId1Id2Coder.of(), SerializableCoder.of(Foo2.class)));\r\n\r\n        TupleTag&lt;Foo1&gt; foo1TupleTag = new TupleTag();\r\n        TupleTag&lt;Foo2&gt; foo2TupleTag = new TupleTag();\r\n\r\n        return KeyedPCollectionTuple\r\n                .of(foo1TupleTag, Foo1WithKeys)\r\n                .and(foo2TupleTag, Foo2WithKeys)\r\n                .apply(CoGroupByKey.create())\r\n                .apply(ParDo.of(new JoinFoo1AndFoo2(Foo1TupleTag, Foo2TupleTag)));\r\n    }\r\n```\r\n\r\n```\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\nimport lombok.experimental.SuperBuilder;\r\n\r\n@Data\r\n@SuperBuilder(toBuilder = true)\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class KeysId1Id2{\r\n    String id1;\r\n    String id2;\r\n}\r\n```\r\n\r\n```\r\npublic class KeysId1Id2Coder extends CustomCoder&lt;KeysId1Id2&gt; {\r\n    private static final StringUtf8Coder STRING_CODER = StringUtf8Coder.of();\r\n\r\n    public static KeysId1Id2Coder.of() {\r\n        return new KeysId1Id2Coder();\r\n    }\r\n\r\n    @Override\r\n    public void encode(KeysId1Id2 value, OutputStream outStream) throws IOException {\r\n        STRING_CODER.encode(value.getId1(), outStream);\r\n        STRING_CODER.encode(value.getId2(), outStream);\r\n    }\r\n\r\n    @Override\r\n    public KeysId1Id2 decode(InputStream inStream) throws IOException {\r\n        String id1 = STRING_CODER.decode(inStream);\r\n        String id2 = STRING_CODER.decode(inStream);\r\n        return new KeysId1Id2(id1, id2);\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic class MapFoo1ByKeysId1Id2 extends SimpleFunction&lt;Foo1, KeysId1Id2&gt; {\r\n    @Override\r\n    public MapFoo1ByKeysId1Id2 apply(Foo1 line) {\r\n\r\n        return new KeysId1Id2(line.getId1(), line.getId2());\r\n    }\r\n}\r\n\r\npublic class MapFoo2ByKeysId1Id2 extends SimpleFunction&lt;Foo2, KeysId1Id2&gt; {\r\n    @Override\r\n    public MapFoo2ByKeysId1Id2 apply(Foo2 line) {\r\n\r\n        return new KeysId1Id2(line.getId1(), line.getId2());\r\n    }\r\n}\r\n```","title":"Fix non deterministic keyCoder in a GroupByKey error","body":"<p>I want to perform a CoGroupByKey operation between two PCollections by a pair of key-values: <code>id1</code> and <code>id2</code> . I defined a custom class which includes both keys. I read that I also need to define a <code>Coder</code> to specify the byte conversion, so I did.</p>\n<p>However, I keep getting this error:</p>\n<p><code>java.lang.IllegalStateException: the keyCoder of a GroupByKey must be deterministic</code></p>\n<p>Am I missing something? Non deterministic means that the keyCoder cannot always guarantee that <code>id1</code> will come before <code>id2</code> . Doesn't my <code>Coder</code> already includes the order of the keys?</p>\n<p>Thanks for your time!</p>\n<pre><code>public static PCollection&lt;output&gt; joinById1Id2(PCollection&lt;Foo1&gt; foo1, PCollection&lt;Foo2&gt; foo2){\n\n        PCollection&lt;KV&lt;KeysId1Id2, Foo1&gt;&gt; Foo1WithKeys = Foo1.apply(WithKeys.of(new MapFoo1ByKeysId1Id2()))\n             .setCoder(KvCoder.of(KeysId1Id2Coder.of(), SerializableCoder.of(Foo1.class)));\n\n        PCollection&lt;KV&lt;KeysId1Id2, Foo2&gt;&gt; Foo1WithKeys = Foo2.apply(WithKeys.of(new MapFoo2ByKeysId1Id2()))\n             .setCoder(KvCoder.of(KeysId1Id2Coder.of(), SerializableCoder.of(Foo2.class)));\n\n        TupleTag&lt;Foo1&gt; foo1TupleTag = new TupleTag();\n        TupleTag&lt;Foo2&gt; foo2TupleTag = new TupleTag();\n\n        return KeyedPCollectionTuple\n                .of(foo1TupleTag, Foo1WithKeys)\n                .and(foo2TupleTag, Foo2WithKeys)\n                .apply(CoGroupByKey.create())\n                .apply(ParDo.of(new JoinFoo1AndFoo2(Foo1TupleTag, Foo2TupleTag)));\n    }\n</code></pre>\n<pre><code>import lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\nimport lombok.experimental.SuperBuilder;\n\n@Data\n@SuperBuilder(toBuilder = true)\n@NoArgsConstructor\n@AllArgsConstructor\npublic class KeysId1Id2{\n    String id1;\n    String id2;\n}\n</code></pre>\n<pre><code>public class KeysId1Id2Coder extends CustomCoder&lt;KeysId1Id2&gt; {\n    private static final StringUtf8Coder STRING_CODER = StringUtf8Coder.of();\n\n    public static KeysId1Id2Coder.of() {\n        return new KeysId1Id2Coder();\n    }\n\n    @Override\n    public void encode(KeysId1Id2 value, OutputStream outStream) throws IOException {\n        STRING_CODER.encode(value.getId1(), outStream);\n        STRING_CODER.encode(value.getId2(), outStream);\n    }\n\n    @Override\n    public KeysId1Id2 decode(InputStream inStream) throws IOException {\n        String id1 = STRING_CODER.decode(inStream);\n        String id2 = STRING_CODER.decode(inStream);\n        return new KeysId1Id2(id1, id2);\n    }\n}\n</code></pre>\n<pre><code>public class MapFoo1ByKeysId1Id2 extends SimpleFunction&lt;Foo1, KeysId1Id2&gt; {\n    @Override\n    public MapFoo1ByKeysId1Id2 apply(Foo1 line) {\n\n        return new KeysId1Id2(line.getId1(), line.getId2());\n    }\n}\n\npublic class MapFoo2ByKeysId1Id2 extends SimpleFunction&lt;Foo2, KeysId1Id2&gt; {\n    @Override\n    public MapFoo2ByKeysId1Id2 apply(Foo2 line) {\n\n        return new KeysId1Id2(line.getId1(), line.getId2());\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","eclipse","kotlin"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1689591711,"post_id":76689027,"comment_id":135230281,"body_markdown":"Don&#39;t trust Jetbrains, use [_Enhanced Kotlin for Eclipse_](https://github.com/bvfalcon/kotlin-eclipse-2023) instead.","body":"Don&#39;t trust Jetbrains, use <a href=\"https://github.com/bvfalcon/kotlin-eclipse-2023\" rel=\"nofollow noreferrer\"><i>Enhanced Kotlin for Eclipse</i></a> instead."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1689663651,"post_id":76689027,"comment_id":135241539,"body_markdown":"@Thorbj&#248;rnRavnAndersen Be smarter by avoiding the vendor lock-in trap. Please respect that this question is about Eclipse and that software recommendations and advertising commercial products are off-topic on Stack Overflow.","body":"@Thorbj&#248;rnRavnAndersen Be smarter by avoiding the vendor lock-in trap. Please respect that this question is about Eclipse and that software recommendations and advertising commercial products are off-topic on Stack Overflow."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1689671571,"post_id":76689027,"comment_id":135243274,"body_markdown":"@Thorbj&#248;rnRavnAndersen Software recommendations are generally off-topic on Stack Overflow. So please stop bothering others with that. Your personal favorite tool might be fine for your needs, but it doesn&#39;t even work for mine. This question is about a different tool. Yes, maybe you are right and Jetbrains lied, but there is a pretty well maintained fork for more than three years now.","body":"@Thorbj&#248;rnRavnAndersen Software recommendations are generally off-topic on Stack Overflow. So please stop bothering others with that. Your personal favorite tool might be fine for your needs, but it doesn&#39;t even work for mine. This question is about a different tool. Yes, maybe you are right and Jetbrains lied, but there is a pretty well maintained fork for more than three years now."},{"owner":{"account_id":3248793,"reputation":880,"user_id":2739637,"display_name":"Mwongera808"},"score":1,"creation_date":1689889356,"post_id":76689027,"comment_id":135281206,"body_markdown":"Guys I gave up on this. Will just continue to use good old Java. Thanks for your comments.","body":"Guys I gave up on this. Will just continue to use good old Java. Thanks for your comments."}],"owner":{"account_id":3248793,"reputation":880,"user_id":2739637,"display_name":"Mwongera808"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689347533,"creation_date":1689347533,"question_id":76689027,"body_markdown":"I have been trying to launch a spring boot app written in kotlin on Eclipse IDE(latest) but to no avail.\r\n\r\nJava fails to find the main class.\r\n\r\n\r\n\r\nBelow is my configuration file: \r\n[![enter image description here](https://i.stack.imgur.com/cJaXh.png)](https://i.stack.imgur.com/cJaXh.png)\r\n\r\nThis is the error i&#39;m getting:\r\n[![enter image description here](https://i.stack.imgur.com/FLFTc.png)](https://i.stack.imgur.com/FLFTc.png)\r\n\r\nI have tried a number of solutions:\r\n1. Add &#39;Kt&#39; on the build path. Failed\r\n2. Rollback the kotlin eclipse plugin to older versions. - Jetbrains deleted old versions\r\n3. Tried to manually update the build path: - Java cant find the main class\r\n[![enter image description here](https://i.stack.imgur.com/wI7p4.png)](https://i.stack.imgur.com/wI7p4.png)\r\n\r\nAny help would be appreciated.","title":"Error Launching Kotlin spring boot application in Eclipse","body":"<p>I have been trying to launch a spring boot app written in kotlin on Eclipse IDE(latest) but to no avail.</p>\n<p>Java fails to find the main class.</p>\n<p>Below is my configuration file:\n<a href=\"https://i.stack.imgur.com/cJaXh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cJaXh.png\" alt=\"enter image description here\" /></a></p>\n<p>This is the error i'm getting:\n<a href=\"https://i.stack.imgur.com/FLFTc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FLFTc.png\" alt=\"enter image description here\" /></a></p>\n<p>I have tried a number of solutions:</p>\n<ol>\n<li>Add 'Kt' on the build path. Failed</li>\n<li>Rollback the kotlin eclipse plugin to older versions. - Jetbrains deleted old versions</li>\n<li>Tried to manually update the build path: - Java cant find the main class\n<a href=\"https://i.stack.imgur.com/wI7p4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wI7p4.png\" alt=\"enter image description here\" /></a></li>\n</ol>\n<p>Any help would be appreciated.</p>\n"},{"tags":["java","elasticsearch","kibana"],"comments":[{"owner":{"account_id":24908380,"reputation":3091,"user_id":18778181,"display_name":"rabbitbr"},"score":0,"creation_date":1689359707,"post_id":76689006,"comment_id":135207741,"body_markdown":"I believe that you have documents duplicate.","body":"I believe that you have documents duplicate."},{"owner":{"account_id":16213808,"reputation":1,"user_id":11707061,"display_name":"Mik"},"score":0,"creation_date":1689411732,"post_id":76689006,"comment_id":135212092,"body_markdown":"@rabbitbr No the documents coming in response have same id. also, i cross checked on kibana","body":"@rabbitbr No the documents coming in response have same id. also, i cross checked on kibana"}],"owner":{"account_id":16213808,"reputation":1,"user_id":11707061,"display_name":"Mik"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689347419,"creation_date":1689347419,"question_id":76689006,"body_markdown":"I am using Elasticsearch Java API Client but getting duplicate documents in the response.\r\n\r\nBasically, I am trying to fetch documents from MyDocument index, which are in ON mode and have a certain tag from elastic. But the query returns duplicate results. I am getting the same documents twice. I have searched for solution on web but not able to get a solution for this. What is wrong with the below query?\r\nMost of the results on stack overflow shows solutions for High Level REST Client which is now deprecated.\r\n\r\n\r\n\r\n```\r\n\t\tSearchResponse&lt;MyDocument&gt; response = elasticsearchClient.search(fn -&gt; fn\r\n\t\t\t\t.query(query -&gt; query\r\n\t\t\t\t\t\t.bool(bq -&gt; bq\r\n\t\t\t\t\t\t\t\t.must(\r\n\t\t\t\t\t\t\t\t\tList.of(\r\n\t\t\t\t\t\t        \t\t    new Query.Builder()\r\n\t\t\t\t\t\t\t    \t\t    .term(t -&gt; t\r\n\t\t\t\t\t\t\t        \t\t        .field(mode.keyword)\r\n\t\t\t\t\t\t\t        \t\t        .value(&quot;ON&quot;)\r\n\t\t\t\t\t\t\t        \t\t    ).build()\r\n\t\t\t\t\t\t\t    \t\t    ,new Query.Builder()\r\n\t\t\t\t\t\t\t    \t\t    .matchPhrase(phrase -&gt; phrase\r\n\t\t\t\t\t\t\t        \t\t        .field(&quot;tags&quot;)                    \r\n\t\t\t\t\t\t\t        \t\t        .query(&quot;My tag&quot;)\r\n\t\t\t\t\t\t\t        \t\t    )\r\n\t\t\t\t\t\t\t        \t\t    .build()\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t))\r\n\t\t\t\t, MyDocument.class);\r\n```\r\n\r\n\r\n\r\n","title":"ElasticSearch Java API Client returning same document multiple times in response","body":"<p>I am using Elasticsearch Java API Client but getting duplicate documents in the response.</p>\n<p>Basically, I am trying to fetch documents from MyDocument index, which are in ON mode and have a certain tag from elastic. But the query returns duplicate results. I am getting the same documents twice. I have searched for solution on web but not able to get a solution for this. What is wrong with the below query?\nMost of the results on stack overflow shows solutions for High Level REST Client which is now deprecated.</p>\n<pre><code>        SearchResponse&lt;MyDocument&gt; response = elasticsearchClient.search(fn -&gt; fn\n                .query(query -&gt; query\n                        .bool(bq -&gt; bq\n                                .must(\n                                    List.of(\n                                            new Query.Builder()\n                                            .term(t -&gt; t\n                                                    .field(mode.keyword)\n                                                    .value(&quot;ON&quot;)\n                                                ).build()\n                                            ,new Query.Builder()\n                                            .matchPhrase(phrase -&gt; phrase\n                                                    .field(&quot;tags&quot;)                    \n                                                    .query(&quot;My tag&quot;)\n                                                )\n                                                .build()\n                                            )\n                                )\n                        ))\n                , MyDocument.class);\n</code></pre>\n"},{"tags":["java","list","variables","reference","reference-counting"],"comments":[{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":1,"creation_date":1689343891,"post_id":76688476,"comment_id":135204357,"body_markdown":"Because each index of the array (memory address) is its own pointer back to the `a` reference. You should take a look at pointers in the C language to get some historical background. Java hides the pointer logic.","body":"Because each index of the array (memory address) is its own pointer back to the <code>a</code> reference. You should take a look at pointers in the C language to get some historical background. Java hides the pointer logic."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":2,"creation_date":1689343937,"post_id":76688476,"comment_id":135204375,"body_markdown":"&quot;variables referencing&quot;? Two: `a` and `b`. How many *references* are there to `Car` objects? 6: `a`, `b`, `cars[0]`, `cars[1]`, `cars[2]` and `cars[3]`. References can exist in local variables, fields, as array members or as method parameters.","body":"&quot;variables referencing&quot;? Two: <code>a</code> and <code>b</code>. How many <i>references</i> are there to <code>Car</code> objects? 6: <code>a</code>, <code>b</code>, <code>cars[0]</code>, <code>cars[1]</code>, <code>cars[2]</code> and <code>cars[3]</code>. References can exist in local variables, fields, as array members or as method parameters."},{"owner":{"account_id":29017768,"reputation":1,"user_id":22227844,"display_name":"ImNotARobot"},"score":0,"creation_date":1689344427,"post_id":76688476,"comment_id":135204496,"body_markdown":"Are cars[0],cars[1],cars[2],cars[3] reference to &quot;a&quot;, not to Object Car() ? \ncars[0-3]--&gt;a--&gt;Car()&lt;--b","body":"Are cars[0],cars[1],cars[2],cars[3] reference to &quot;a&quot;, not to Object Car() ?  cars[0-3]--&gt;a--&gt;Car()&lt;--b"},{"owner":{"account_id":10121318,"reputation":421,"user_id":7478145,"display_name":"elgsylvain85"},"score":0,"creation_date":1689344677,"post_id":76688476,"comment_id":135204553,"body_markdown":"Please note that in Java, Array is completly different with List. Inside List you can add/remove item but Array cannot anymore change length after because each index is its own pointer to new reference like saying @Mr.Polywhirl","body":"Please note that in Java, Array is completly different with List. Inside List you can add/remove item but Array cannot anymore change length after because each index is its own pointer to new reference like saying @Mr.Polywhirl"},{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1689344807,"post_id":76688476,"comment_id":135204590,"body_markdown":"@ImNotARobot if you reassign / change `a` after you initialize the `{a,a,a,a}` like `a = new Car(&quot;BMW&quot;);` this will not have any effect on your array and the array elements will still point to the old Car objects and not the new &quot;BMW&quot;. That should show you that all of those are separate reference variables. (This is because java [is pass by value](https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value))","body":"@ImNotARobot if you reassign / change <code>a</code> after you initialize the <code>{a,a,a,a}</code> like <code>a = new Car(&quot;BMW&quot;);</code> this will not have any effect on your array and the array elements will still point to the old Car objects and not the new &quot;BMW&quot;. That should show you that all of those are separate reference variables. (This is because java <a href=\"https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value\">is pass by value</a>)"}],"answers":[{"tags":[],"owner":{"account_id":4290427,"reputation":101,"user_id":9429560,"display_name":"Ash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689345051,"creation_date":1689344620,"answer_id":76688604,"question_id":76688476,"body_markdown":"I&#39;ve added line numbers to your code to ease explaining what happens. This answer combines what Mr. Polywhirl and Joachim Sauer said in comments.\r\n\r\nFor this type of exercises (for example on an OCP exam) it can also help to draw out what happens using boxes and arrows.\r\n\r\n    1 class Car {}\r\n    2 \r\n    3 class Example {\r\n    4     public static void main (String[] args){\r\n    5         a=new Car();\r\n    6         b=new Car();\r\n    7         Car[] cars ={a,a,a,a};\r\n    8     }\r\n    9 }\r\n\r\nProgram execution starts on line 4. On line 5 the first reference to Car is made and stored in variable a. On line 6 a second reference to Car is made and stored in variable b.\r\n\r\nOn line 7, the Cars[] array is created, which is a new object containing the value of a four times. This creates four new references to Car stored in cars[0] through cars[3].\r\n\r\nDrawn out it looks like this (corrected, based on OH GOD SPIDER&#39;s comment):\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/HWpS6.png","title":"How to count references in java correctly?","body":"<p>I've added line numbers to your code to ease explaining what happens. This answer combines what Mr. Polywhirl and Joachim Sauer said in comments.</p>\n<p>For this type of exercises (for example on an OCP exam) it can also help to draw out what happens using boxes and arrows.</p>\n<pre><code>1 class Car {}\n2 \n3 class Example {\n4     public static void main (String[] args){\n5         a=new Car();\n6         b=new Car();\n7         Car[] cars ={a,a,a,a};\n8     }\n9 }\n</code></pre>\n<p>Program execution starts on line 4. On line 5 the first reference to Car is made and stored in variable a. On line 6 a second reference to Car is made and stored in variable b.</p>\n<p>On line 7, the Cars[] array is created, which is a new object containing the value of a four times. This creates four new references to Car stored in cars[0] through cars[3].</p>\n<p>Drawn out it looks like this (corrected, based on OH GOD SPIDER's comment):</p>\n<p><a href=\"https://i.stack.imgur.com/HWpS6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HWpS6.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":29017768,"reputation":1,"user_id":22227844,"display_name":"ImNotARobot"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689347380,"creation_date":1689343691,"question_id":76688476,"body_markdown":"I have difficulties understanding how to correctly count a reference variables.\r\n\r\nExample (adopted from some book for java learning):\r\n\r\n```java\r\nclass Car {\r\n}\r\n\r\nclass Example {\r\n    public static void main(String[] args) {\r\n        a = new Car();\r\n        b = new Car();\r\n        Car[] cars = {a,a,a,a};\r\n    }\r\n}\r\n```\r\n\r\nHow many reference variables does class Car() have (variables referring to it)?\r\n\r\nMy answer is 2. There is only two variables &quot;a&quot; and &quot;b&quot; referring to object Car().\r\nBut correct answer is 6.\r\nWhy are variables a counted as separate references inside the list? Isn&#39;t it same reference &quot;a&quot;?","title":"How to count references in java correctly?","body":"<p>I have difficulties understanding how to correctly count a reference variables.</p>\n<p>Example (adopted from some book for java learning):</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Car {\n}\n\nclass Example {\n    public static void main(String[] args) {\n        a = new Car();\n        b = new Car();\n        Car[] cars = {a,a,a,a};\n    }\n}\n</code></pre>\n<p>How many reference variables does class Car() have (variables referring to it)?</p>\n<p>My answer is 2. There is only two variables &quot;a&quot; and &quot;b&quot; referring to object Car().\nBut correct answer is 6.\nWhy are variables a counted as separate references inside the list? Isn't it same reference &quot;a&quot;?</p>\n"},{"tags":["java","spring"],"answers":[{"tags":[],"owner":{"account_id":20486450,"reputation":1,"user_id":15033501,"display_name":"Brian Anderson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689345600,"creation_date":1689345600,"answer_id":76688739,"question_id":76688618,"body_markdown":"This question seems similar to https://stackoverflow.com/questions/60765875/java-spring-failed-to-convert-property-value-of-type-java-lang-string-to-requ\r\n\r\nPerhaps try changing how you&#39;re sending the body by changing\r\nvar response = service.send(model);\r\n\r\nTo more closely resemble the json format something like:\r\n{ &quot;paramsMap&quot;: { &quot;Key1&quot;:&quot;Value1&quot;, &quot;Key2&quot;:&quot;Value2&quot; } }: \r\n","title":"My request is not able to accept a Map data object and throws 400 bad request","body":"<p>This question seems similar to <a href=\"https://stackoverflow.com/questions/60765875/java-spring-failed-to-convert-property-value-of-type-java-lang-string-to-requ\">Java_Spring: Failed to convert property value of type &#39;java.lang.String&#39; to required type &#39;java.util.Map&#39; for property &#39;paramsMap&#39;</a></p>\n<p>Perhaps try changing how you're sending the body by changing\nvar response = service.send(model);</p>\n<p>To more closely resemble the json format something like:\n{ &quot;paramsMap&quot;: { &quot;Key1&quot;:&quot;Value1&quot;, &quot;Key2&quot;:&quot;Value2&quot; } }:</p>\n"},{"tags":[],"owner":{"account_id":10121318,"reputation":421,"user_id":7478145,"display_name":"elgsylvain85"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689346619,"creation_date":1689346619,"answer_id":76688883,"question_id":76688618,"body_markdown":"Try with @RequestPart annotation : \r\n\r\n    @PostMapping(value = &quot;/send&quot;, produces = { MediaType.APPLICATION_JSON_VALUE }, consumes = {MediaType.MULTIPART_FORM_DATA_VALUE })\r\n    public ResponseEntity&lt;Response&gt; send(@RequestPart Map&lt;String, Object&gt; data){}\r\n\r\nOr if you can consume json then :\r\n\r\n\r\n    @PostMapping(value = &quot;/send&quot;, produces = { MediaType.APPLICATION_JSON_VALUE }, consumes = {MediaType.APPLICATION_JSON_VALUE })\r\n    public ResponseEntity&lt;Response&gt; send(@RequestBody RequestModelDto data){}","title":"My request is not able to accept a Map data object and throws 400 bad request","body":"<p>Try with @RequestPart annotation :</p>\n<pre><code>@PostMapping(value = &quot;/send&quot;, produces = { MediaType.APPLICATION_JSON_VALUE }, consumes = {MediaType.MULTIPART_FORM_DATA_VALUE })\npublic ResponseEntity&lt;Response&gt; send(@RequestPart Map&lt;String, Object&gt; data){}\n</code></pre>\n<p>Or if you can consume json then :</p>\n<pre><code>@PostMapping(value = &quot;/send&quot;, produces = { MediaType.APPLICATION_JSON_VALUE }, consumes = {MediaType.APPLICATION_JSON_VALUE })\npublic ResponseEntity&lt;Response&gt; send(@RequestBody RequestModelDto data){}\n</code></pre>\n"}],"owner":{"account_id":28107709,"reputation":111,"user_id":21476047,"display_name":"user21476047"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1689347265,"creation_date":1689344675,"question_id":76688618,"body_markdown":"My `Map&lt;String, Object&gt;` parameter is throwing a `400 bad request error` with the following message, `Cannot convert value of type &#39;java.lang.String&#39; to required type &#39;java.util.Map&#39; for property &#39;data&#39;` and I am not sure why?\r\n\r\nIn my postman, I go to `Body` then `form-data` and I place `data` under `Key` then I place the following value `{ &quot;key&quot;: &quot;value&quot; }`.\r\n\r\nMy model with the request parameter and controller:\r\n\r\n    public class RequestModel {\r\n\r\n       @Schema(type = &quot;object&quot;)\r\n       private Map&lt;String, Object&gt; data;\r\n\r\n       private MultipartFile file;\r\n       private String requestId;\r\n       private String date;\r\n\r\n    }\r\n\r\n    public class Controller {\r\n       \r\n       @PostMapping(value = &quot;/send&quot;, produces = { MediaType.APPLICATION_JSON_VALUE }, consumes = {\r\n            MediaType.MULTIPART_FORM_DATA_VALUE })\r\n       public ResponseEntity&lt;Response&gt; send(@ModelAttribute final RequestModel model) {\r\n\t      var response = service.send(model);\r\n\t      return ResponseEntity.ok(response);\r\n       }\r\n\r\n    }\r\n\r\n---\r\n\r\nAll my other parameters is able to get pass fine, except for the `Map`.\r\n","title":"My request is not able to accept a Map data object and throws 400 bad request","body":"<p>My <code>Map&lt;String, Object&gt;</code> parameter is throwing a <code>400 bad request error</code> with the following message, <code>Cannot convert value of type 'java.lang.String' to required type 'java.util.Map' for property 'data'</code> and I am not sure why?</p>\n<p>In my postman, I go to <code>Body</code> then <code>form-data</code> and I place <code>data</code> under <code>Key</code> then I place the following value <code>{ &quot;key&quot;: &quot;value&quot; }</code>.</p>\n<p>My model with the request parameter and controller:</p>\n<pre><code>public class RequestModel {\n\n   @Schema(type = &quot;object&quot;)\n   private Map&lt;String, Object&gt; data;\n\n   private MultipartFile file;\n   private String requestId;\n   private String date;\n\n}\n\npublic class Controller {\n   \n   @PostMapping(value = &quot;/send&quot;, produces = { MediaType.APPLICATION_JSON_VALUE }, consumes = {\n        MediaType.MULTIPART_FORM_DATA_VALUE })\n   public ResponseEntity&lt;Response&gt; send(@ModelAttribute final RequestModel model) {\n      var response = service.send(model);\n      return ResponseEntity.ok(response);\n   }\n\n}\n</code></pre>\n<hr />\n<p>All my other parameters is able to get pass fine, except for the <code>Map</code>.</p>\n"},{"tags":["java","gzip","ioexception","gzipstream","gzipinputstream"],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689347219,"creation_date":1689347219,"answer_id":76688976,"question_id":76688738,"body_markdown":"&gt; I have a feeling that this might be related to encoding.\r\n\r\nThat&#39;s not even relevant.\r\n\r\nmemory and disk space (and network pipes and just about every other low-level comms channel a computer system offers) consists of bytes. That means you can send a sequence of values, each value between 0 and 255.\r\n\r\nText is something quite different. There are vastly more than 255 characters one could feasibly want to send, so, how do we do that?\r\n\r\n__That is what encoding is__: An algorithm that turns a sequence of characters into a sequence of bytes. And vice versa.\r\n\r\nThe US-ASCII protocol, for example, maps byte values 0-31 to certain control concepts (Such as &#39;newline&#39; or &#39;tab&#39;), 32-126 to certain symbols (such as &#39;A&#39;) and decrees that __no other symbols can exist__ (and further decrees that the bytestream will simply never contain any values above 127 - the top bit is always 0). If you want to send an &#233;, tough - you can&#39;t. It&#39;s not one of the 94 symbols that the US-ASCII spec defines. The advantage is, it&#39;s a very simple encoding with a few nice properties (such as: The length of the data in bytes is more or less identical to the length of the data in characters).\r\n\r\nThe UTF-8 protocol lets you send any unicode character, at the cost of taking anywhere between 1 and 5 bytes to encode a single character. And so on.\r\n\r\nPoint is, &quot;encoding&quot; is __fundamentally__ a property of __text__.\r\n\r\nGZipped data isn&#39;t. text, therefore &#39;what encoding is this gzip file&#39; is about as sensical a question as &#39;what color is the taste of apple pie&#39;. The question is a non-sequitur.\r\n\r\n&gt; ```\r\n&gt; } catch (IOException ex) {\r\n&gt;      Base.print(ex.getMessage(), Base.TEXT_TYPE.ERROR);\r\n&gt; }\r\n&gt; ```\r\n\r\nThis isn&#39;t good. An exception consists of in basis 5 useful properties:\r\n\r\n* Its type (For example, `NoSuchFileException`)\r\n* Its message (For example, &#39;disk unmounted&#39;)\r\n* Its causal chain (sometimes an exception is caused by another and the cause is often more useful. And that cause can itself have a cause, and so on).\r\n* Its stack trace, which tells you where in the code the problem occurs.\r\n* Its suppressed exceptions (this is rarely useful).\r\n* Exceptions are java types and can have more info. For example, SQLException contains the SQL-side &#39;error state&#39; number which can be useful.\r\n\r\nYou&#39;re tossing all that in the garbage, except for &#39;the message&#39;, which is generally defined as not being meaningful without _also_ having the context of the exception type.\r\n\r\nThis code boils down to the following error handling scheme:\r\n\r\n* An error has occurred.\r\n* Take the top-level explanation of what the problem is and __chuck it in the garbage__. (ditch the exception&#39;s type)\r\n* Take the relevant details about what went wrong under the hood and __rip it to pieces__. (ditch the causal chain).\r\n* Take the info about where the problem occurred in the code so you know as developer where to go to fix it, and __destroy it__. (ditch the stack trace).\r\n* Print the &#39;middle-level&#39; explanation, which is likely a non-sensical string without all the other context, to somewhere.\r\n* Now __continue as if nothing was wrong__.\r\n\r\nNone of this is right.\r\n\r\nAnd that last bullet can easily explain why you are seeing all zeroes: If the exception does occur you print something and just keep on going. A half-baked truncated gzip file (which would cause &#39;not in gzip format&#39; when you try to read the half-baked product) can of course occur if you ignore an error that occurs halfway through the process.\r\n\r\nThe code as pasted will not result in all-zeroes unless your JVM or kernel is corrupted, or you&#39;re not running this code, or you&#39;re editing the file later on, or the storage layer is corrupted (disk failure), or something similarly exotic.\r\n\r\nHence, keeping a better eye out on the error is the first thing to check. It is very very rare that _writing_ to a disk is completely fine (no errors at all), but when reading, due to disk corruption, you get all zeroes back. Writing to disk, getting an error, and then having the half-baked remains of this process read back as all zeroes is still rare but not nearly as rare.\r\n\r\n","title":"Failing GZIPInputStream","body":"<blockquote>\n<p>I have a feeling that this might be related to encoding.</p>\n</blockquote>\n<p>That's not even relevant.</p>\n<p>memory and disk space (and network pipes and just about every other low-level comms channel a computer system offers) consists of bytes. That means you can send a sequence of values, each value between 0 and 255.</p>\n<p>Text is something quite different. There are vastly more than 255 characters one could feasibly want to send, so, how do we do that?</p>\n<p><strong>That is what encoding is</strong>: An algorithm that turns a sequence of characters into a sequence of bytes. And vice versa.</p>\n<p>The US-ASCII protocol, for example, maps byte values 0-31 to certain control concepts (Such as 'newline' or 'tab'), 32-126 to certain symbols (such as 'A') and decrees that <strong>no other symbols can exist</strong> (and further decrees that the bytestream will simply never contain any values above 127 - the top bit is always 0). If you want to send an é, tough - you can't. It's not one of the 94 symbols that the US-ASCII spec defines. The advantage is, it's a very simple encoding with a few nice properties (such as: The length of the data in bytes is more or less identical to the length of the data in characters).</p>\n<p>The UTF-8 protocol lets you send any unicode character, at the cost of taking anywhere between 1 and 5 bytes to encode a single character. And so on.</p>\n<p>Point is, &quot;encoding&quot; is <strong>fundamentally</strong> a property of <strong>text</strong>.</p>\n<p>GZipped data isn't. text, therefore 'what encoding is this gzip file' is about as sensical a question as 'what color is the taste of apple pie'. The question is a non-sequitur.</p>\n<blockquote>\n<pre><code>} catch (IOException ex) {\n     Base.print(ex.getMessage(), Base.TEXT_TYPE.ERROR);\n}\n</code></pre>\n</blockquote>\n<p>This isn't good. An exception consists of in basis 5 useful properties:</p>\n<ul>\n<li>Its type (For example, <code>NoSuchFileException</code>)</li>\n<li>Its message (For example, 'disk unmounted')</li>\n<li>Its causal chain (sometimes an exception is caused by another and the cause is often more useful. And that cause can itself have a cause, and so on).</li>\n<li>Its stack trace, which tells you where in the code the problem occurs.</li>\n<li>Its suppressed exceptions (this is rarely useful).</li>\n<li>Exceptions are java types and can have more info. For example, SQLException contains the SQL-side 'error state' number which can be useful.</li>\n</ul>\n<p>You're tossing all that in the garbage, except for 'the message', which is generally defined as not being meaningful without <em>also</em> having the context of the exception type.</p>\n<p>This code boils down to the following error handling scheme:</p>\n<ul>\n<li>An error has occurred.</li>\n<li>Take the top-level explanation of what the problem is and <strong>chuck it in the garbage</strong>. (ditch the exception's type)</li>\n<li>Take the relevant details about what went wrong under the hood and <strong>rip it to pieces</strong>. (ditch the causal chain).</li>\n<li>Take the info about where the problem occurred in the code so you know as developer where to go to fix it, and <strong>destroy it</strong>. (ditch the stack trace).</li>\n<li>Print the 'middle-level' explanation, which is likely a non-sensical string without all the other context, to somewhere.</li>\n<li>Now <strong>continue as if nothing was wrong</strong>.</li>\n</ul>\n<p>None of this is right.</p>\n<p>And that last bullet can easily explain why you are seeing all zeroes: If the exception does occur you print something and just keep on going. A half-baked truncated gzip file (which would cause 'not in gzip format' when you try to read the half-baked product) can of course occur if you ignore an error that occurs halfway through the process.</p>\n<p>The code as pasted will not result in all-zeroes unless your JVM or kernel is corrupted, or you're not running this code, or you're editing the file later on, or the storage layer is corrupted (disk failure), or something similarly exotic.</p>\n<p>Hence, keeping a better eye out on the error is the first thing to check. It is very very rare that <em>writing</em> to a disk is completely fine (no errors at all), but when reading, due to disk corruption, you get all zeroes back. Writing to disk, getting an error, and then having the half-baked remains of this process read back as all zeroes is still rare but not nearly as rare.</p>\n"}],"owner":{"account_id":14258107,"reputation":3,"user_id":10299751,"display_name":"Obsyd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76688976,"answer_count":1,"score":0,"last_activity_date":1689347219,"creation_date":1689345584,"question_id":76688738,"body_markdown":"My Java app writes out a gzip compressed object to a file using try-with resources statement. The object is a very basic with a couple of primitive fields and an ArrayList of Integers. It has no Strings or more complex objects within.\r\nOn some machines once the object is written out, reading it back fails with the error code of the file not being in proper gzip format. When examining the file it is full of zero values.\r\n\r\nHere is the code that compresses and writes out the object:\r\n\r\n```\r\npublic static void write_SerialisedCompressed_Object(String folder, String fileName, Object objectToBeSerialised) {\r\n        File node = newFile(folder, fileName);\r\n        try (OutputStream os = Files.newOutputStream(node.toPath());\r\n             GZIPOutputStream gOS = new GZIPOutputStream(os);\r\n             ObjectOutputStream oOS = new ObjectOutputStream(gOS)) {\r\n            oOS.writeObject(objectToBeSerialised);\r\n        } catch (IOException ex) {\r\n            Base.print(ex.getMessage(), Base.TEXT_TYPE.ERROR);\r\n        }\r\n    }\r\n```\r\n\r\nHere is the code that reads the file:\r\n\r\n```\r\npublic static Object readCompressedSerialisedObject_File(String folder, String fileName) {\r\n        try (InputStream is = Files.newInputStream(newFile(folder, fileName).toPath());\r\n             GZIPInputStream gIS = new GZIPInputStream(is);\r\n             ObjectInputStream oIS = new ObjectInputStream(gIS)) {\r\n            return oIS.readObject();\r\n        } catch (Exception ex) {\r\n            String error = &quot;Error in: &quot; + folder + fileName + &quot; readCompressedSerialisedObject_File &quot; + ex.getMessage() + &quot; &quot; + ex.getClass() + &quot; &quot; + ex.getCause();\r\n            Base.print(error, Base.TEXT_TYPE.ERROR);\r\n            throw new RuntimeException(error);\r\n        }\r\n    }\r\n```\r\n\r\n\r\n\r\n\r\nI have a feeling that this might be related to encoding. But if the file has been written out on the same machine that it is being read back why would that matter?\r\nAny help is welcome. Thanks!","title":"Failing GZIPInputStream","body":"<p>My Java app writes out a gzip compressed object to a file using try-with resources statement. The object is a very basic with a couple of primitive fields and an ArrayList of Integers. It has no Strings or more complex objects within.\nOn some machines once the object is written out, reading it back fails with the error code of the file not being in proper gzip format. When examining the file it is full of zero values.</p>\n<p>Here is the code that compresses and writes out the object:</p>\n<pre><code>public static void write_SerialisedCompressed_Object(String folder, String fileName, Object objectToBeSerialised) {\n        File node = newFile(folder, fileName);\n        try (OutputStream os = Files.newOutputStream(node.toPath());\n             GZIPOutputStream gOS = new GZIPOutputStream(os);\n             ObjectOutputStream oOS = new ObjectOutputStream(gOS)) {\n            oOS.writeObject(objectToBeSerialised);\n        } catch (IOException ex) {\n            Base.print(ex.getMessage(), Base.TEXT_TYPE.ERROR);\n        }\n    }\n</code></pre>\n<p>Here is the code that reads the file:</p>\n<pre><code>public static Object readCompressedSerialisedObject_File(String folder, String fileName) {\n        try (InputStream is = Files.newInputStream(newFile(folder, fileName).toPath());\n             GZIPInputStream gIS = new GZIPInputStream(is);\n             ObjectInputStream oIS = new ObjectInputStream(gIS)) {\n            return oIS.readObject();\n        } catch (Exception ex) {\n            String error = &quot;Error in: &quot; + folder + fileName + &quot; readCompressedSerialisedObject_File &quot; + ex.getMessage() + &quot; &quot; + ex.getClass() + &quot; &quot; + ex.getCause();\n            Base.print(error, Base.TEXT_TYPE.ERROR);\n            throw new RuntimeException(error);\n        }\n    }\n</code></pre>\n<p>I have a feeling that this might be related to encoding. But if the file has been written out on the same machine that it is being read back why would that matter?\nAny help is welcome. Thanks!</p>\n"},{"tags":["java","for-loop","if-statement"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":3,"creation_date":1689346161,"post_id":76688780,"comment_id":135204955,"body_markdown":"start working on correct/consistent indentation of the code - as posted here it is VERY hard to read/understand/debug || BTW you can compare characters `charAt(i) == &#39;1&#39;` || BTW2 since you are already using `Integer`, it has a `bitCount()` method","body":"start working on correct/consistent indentation of the code - as posted here it is VERY hard to read/understand/debug || BTW you can compare characters <code>charAt(i) == &#39;1&#39;</code> || BTW2 since you are already using <code>Integer</code>, it has a <code>bitCount()</code> method"},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1689346188,"post_id":76688780,"comment_id":135204961,"body_markdown":"VTC as typo. `r =+ 1;` should be `r++;` **or** `r += 1;` also `i == count` should be `i &lt; count` in the loop condition. Converting the `int` to a binary string is a bit wasteful, `int r = 0; for (; n &gt; 0; n /= 2) { if ((n &amp; 1) == 1) { r++; } } return r;`","body":"VTC as typo. <code>r =+ 1;</code> should be <code>r++;</code> <b>or</b> <code>r += 1;</code> also <code>i == count</code> should be <code>i &lt; count</code> in the loop condition. Converting the <code>int</code> to a binary string is a bit wasteful, <code>int r = 0; for (; n &gt; 0; n &#47;= 2) { if ((n &amp; 1) == 1) { r++; } } return r;</code>"},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1689349607,"post_id":76688780,"comment_id":135205775,"body_markdown":"How did this code print anything?  It is syntactically flawed and would not compile.  You did not initialize `r` to `0`.","body":"How did this code print anything?  It is syntactically flawed and would not compile.  You did not initialize <code>r</code> to <code>0</code>."}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689346993,"creation_date":1689346618,"answer_id":76688882,"question_id":76688780,"body_markdown":"\r\nYou are not incrementing `r` correctly.  Use `r++;`  And some ide&#39;s may complain about not explicitly initializing `r`.\r\n\r\nBut you don&#39;t need to convert to a string. Assuming you don&#39;t want to or can&#39;t use `Integer.bitCount()`, then here is one way.\r\n- initialize count to 0.\r\n- check the least significant bit (LSB). If `n&amp;1` return `0` if LSB is `0`, else it returns `1`.\r\n- `n&gt;&gt;1` shifts right 1 bit to expose next bit.\r\n```\r\npublic static int countBits(int n) {\r\n    int count = 0;\r\n    while (n &gt; 0) {\r\n       count += n&amp;1;\r\n       n &gt;&gt;= 1;\r\n    }\r\n   return count;\r\n}","title":"Bit Counting (just the #1)","body":"<p>You are not incrementing <code>r</code> correctly.  Use <code>r++;</code>  And some ide's may complain about not explicitly initializing <code>r</code>.</p>\n<p>But you don't need to convert to a string. Assuming you don't want to or can't use <code>Integer.bitCount()</code>, then here is one way.</p>\n<ul>\n<li>initialize count to 0.</li>\n<li>check the least significant bit (LSB). If <code>n&amp;1</code> return <code>0</code> if LSB is <code>0</code>, else it returns <code>1</code>.</li>\n<li><code>n&gt;&gt;1</code> shifts right 1 bit to expose next bit.</li>\n</ul>\n<pre><code>public static int countBits(int n) {\n    int count = 0;\n    while (n &gt; 0) {\n       count += n&amp;1;\n       n &gt;&gt;= 1;\n    }\n   return count;\n}\n</code></pre>\n"}],"owner":{"account_id":9459090,"reputation":13,"user_id":21831940,"display_name":"Juan Diego Pena Castillo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76688882,"answer_count":1,"score":1,"last_activity_date":1689346993,"creation_date":1689345861,"question_id":76688780,"body_markdown":"I made a function that follows this Example: The binary representation of 1234 is 10011010010, so the function should return 5 in this case. \r\n\r\nBut after testing it do give me the default variable value.\r\n\r\nMy code:\r\n\r\n```\r\npublic class BitCounting {\r\n\r\n\tpublic static int countBits(int n){\r\n\t    int r;\r\n      String bits = Integer.toBinaryString(n);\r\n      if (n &lt; 0){\r\n        r = 0;\r\n        }else{\r\n      int count = bits.length();\r\n      for (int i=0; i == count ;i++){\r\n        int c = Integer.parseInt(String.valueOf(bits.charAt(i)));\r\n        if ( c==1){ \r\n          r =+ 1;\r\n          };\r\n        };\r\n      };\r\n\treturn r;\r\n  }\r\n\t\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nI believe that for some reason it is not reading the `If` statement as well as the `for` statement","title":"Bit Counting (just the #1)","body":"<p>I made a function that follows this Example: The binary representation of 1234 is 10011010010, so the function should return 5 in this case.</p>\n<p>But after testing it do give me the default variable value.</p>\n<p>My code:</p>\n<pre><code>public class BitCounting {\n\n    public static int countBits(int n){\n        int r;\n      String bits = Integer.toBinaryString(n);\n      if (n &lt; 0){\n        r = 0;\n        }else{\n      int count = bits.length();\n      for (int i=0; i == count ;i++){\n        int c = Integer.parseInt(String.valueOf(bits.charAt(i)));\n        if ( c==1){ \n          r =+ 1;\n          };\n        };\n      };\n    return r;\n  }\n    \n}\n</code></pre>\n<p>I believe that for some reason it is not reading the <code>If</code> statement as well as the <code>for</code> statement</p>\n"},{"tags":["java","spring-boot","multithreading","scheduled-tasks","spring-test"],"owner":{"account_id":24109083,"reputation":150,"user_id":18079889,"display_name":"Mohammed Fataka"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689346728,"creation_date":1689333500,"question_id":76687181,"body_markdown":"i have problem understanding some of my test cases and their results when i am trying to test multi-threaded and non-multi-threaded `ThreadPoolTaskScheduler()`\r\n\r\ni have following methods for both scenarios.\r\n```\r\n    private int counter;\r\n\r\n    private void increment() {\r\n        counter++;\r\n    }\r\n\r\n\r\n    public String doWork(final CountDownLatch latch, final int taskNo) {\r\n        System.out.println(&quot;running task: &quot; + taskNo);\r\n        latch.countDown();\r\n        increment();\r\n        return taskNo == 1 ? &quot;First&quot; : &quot;Second&quot;;\r\n    }\r\n\r\n```\r\n\r\n\r\n\r\nbasically one of them will have one thread assigned, and the test case would be to schedule two tasks on it, as below:\r\n\r\n```\r\n    @Test\r\n    @SneakyThrows\r\n    public void shouldNotBeAbleToSimultaneouslyScheduleTest() {\r\n        final var taskScheduler = new ThreadPoolTaskScheduler();\r\n        taskScheduler.setPoolSize(1);\r\n        taskScheduler.setThreadNamePrefix(&quot;test-&quot;);\r\n        taskScheduler.initialize();\r\n\r\n        final var latch = new CountDownLatch(2);\r\n\r\n        final var inOneSecond = Instant.now().plusSeconds(1);\r\n        final var taskOrders = new ArrayList&lt;String&gt;();\r\n        taskScheduler.schedule(() -&gt; {\r\n                    try {\r\n                        Assertions.assertEquals(1, counter); // --&gt; Why it is 1 and not 0?\r\n                        // make thread wait 5 seconds to do increment\r\n                        Thread.sleep(5000);\r\n                        //increment\r\n                        taskOrders.add(doWork(latch, 1));\r\n                    } catch (InterruptedException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                }\r\n\r\n                , inOneSecond);\r\n\r\n        taskScheduler.schedule(() -&gt; {\r\n                    Assertions.assertEquals(0, counter);\r\n                    //increment\r\n                    taskOrders.add(doWork(latch, 2));\r\n                    // counter should be 1 since only current task is completed\r\n                    Assertions.assertEquals(1, counter);\r\n                }\r\n                , inOneSecond);\r\n\r\n        final var bothCompleted = latch.await(7, TimeUnit.SECONDS);\r\n        // assert both tasks completed\r\n        Assertions.assertTrue(bothCompleted);\r\n        // assert both tasks incremented it\r\n        Assertions.assertEquals(2, counter);\r\n        // second task was first to run\r\n        Assertions.assertEquals(&quot;Second&quot;, taskOrders.get(0));\r\n        // first task was second to run\r\n        Assertions.assertEquals(&quot;First&quot;, taskOrders.get(1));\r\n    }\r\n```\r\n\r\nnow in this test scenario i wanna understand why in the first task counter is 1, because how i grasp it, is that one thread is doing first task which initially counter is 0 how it can run second task first, while it is in first task? \r\n\r\n\r\n\r\n\r\n\r\nsecond scenario is when it `ThreadPoolTaskScheduler()` is assigned to have 2 threads as below:\r\n\r\n\r\n\r\n```\r\n    @Test\r\n    @SneakyThrows\r\n    public void shouldSimultaneouslyScheduleTest() {\r\n        final var taskScheduler = new ThreadPoolTaskScheduler();\r\n        taskScheduler.setPoolSize(2);\r\n        taskScheduler.setThreadNamePrefix(&quot;test-&quot;);\r\n        taskScheduler.initialize();\r\n\r\n        final var latch = new CountDownLatch(2);\r\n        final var inOneSecond = Instant.now().plusSeconds(1);\r\n        final var taskOrders = new ArrayList&lt;String&gt;();\r\n        taskScheduler.schedule(() -&gt; {\r\n                    try {\r\n                        Assertions.assertEquals(0, counter); // --&gt; HOW COME HERE counter is 0     but not 1 like previous scenario?\r\n                        // make thread take 5 seconds to complete\r\n                        Thread.sleep(5000);\r\n                        // increment\r\n                        taskOrders.add(doWork(latch, 1));\r\n                    } catch (InterruptedException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                }\r\n\r\n                , inOneSecond);\r\n\r\n        taskScheduler.schedule(() -&gt; {\r\n                    Assertions.assertEquals(0, counter); // why the counter is zero here ?\r\n                    // increment\r\n                    taskOrders.add(doWork(latch, 2));\r\n                    Assertions.assertEquals(1, counter);\r\n                }\r\n                , inOneSecond);\r\n\r\n        final var bothCompleted = latch.await(7, TimeUnit.SECONDS);\r\n        // assert both tasks completed\r\n        Assertions.assertTrue(bothCompleted);\r\n        // assert both tasks incremented it\r\n        Assertions.assertEquals(2, counter);\r\n        // second task was first to run\r\n        Assertions.assertEquals(&quot;Second&quot;, taskOrders.get(0));\r\n        // first task was second to run\r\n        Assertions.assertEquals(&quot;First&quot;, taskOrders.get(1));\r\n    }\r\n\r\n```\r\n\r\n\r\nin this one i wanna understand how come in both tasks counter is 0? ","title":"Testing Multi-threaded and non Multi-threaded task scheduling","body":"<p>i have problem understanding some of my test cases and their results when i am trying to test multi-threaded and non-multi-threaded <code>ThreadPoolTaskScheduler()</code></p>\n<p>i have following methods for both scenarios.</p>\n<pre><code>    private int counter;\n\n    private void increment() {\n        counter++;\n    }\n\n\n    public String doWork(final CountDownLatch latch, final int taskNo) {\n        System.out.println(&quot;running task: &quot; + taskNo);\n        latch.countDown();\n        increment();\n        return taskNo == 1 ? &quot;First&quot; : &quot;Second&quot;;\n    }\n\n</code></pre>\n<p>basically one of them will have one thread assigned, and the test case would be to schedule two tasks on it, as below:</p>\n<pre><code>    @Test\n    @SneakyThrows\n    public void shouldNotBeAbleToSimultaneouslyScheduleTest() {\n        final var taskScheduler = new ThreadPoolTaskScheduler();\n        taskScheduler.setPoolSize(1);\n        taskScheduler.setThreadNamePrefix(&quot;test-&quot;);\n        taskScheduler.initialize();\n\n        final var latch = new CountDownLatch(2);\n\n        final var inOneSecond = Instant.now().plusSeconds(1);\n        final var taskOrders = new ArrayList&lt;String&gt;();\n        taskScheduler.schedule(() -&gt; {\n                    try {\n                        Assertions.assertEquals(1, counter); // --&gt; Why it is 1 and not 0?\n                        // make thread wait 5 seconds to do increment\n                        Thread.sleep(5000);\n                        //increment\n                        taskOrders.add(doWork(latch, 1));\n                    } catch (InterruptedException e) {\n                        throw new RuntimeException(e);\n                    }\n                }\n\n                , inOneSecond);\n\n        taskScheduler.schedule(() -&gt; {\n                    Assertions.assertEquals(0, counter);\n                    //increment\n                    taskOrders.add(doWork(latch, 2));\n                    // counter should be 1 since only current task is completed\n                    Assertions.assertEquals(1, counter);\n                }\n                , inOneSecond);\n\n        final var bothCompleted = latch.await(7, TimeUnit.SECONDS);\n        // assert both tasks completed\n        Assertions.assertTrue(bothCompleted);\n        // assert both tasks incremented it\n        Assertions.assertEquals(2, counter);\n        // second task was first to run\n        Assertions.assertEquals(&quot;Second&quot;, taskOrders.get(0));\n        // first task was second to run\n        Assertions.assertEquals(&quot;First&quot;, taskOrders.get(1));\n    }\n</code></pre>\n<p>now in this test scenario i wanna understand why in the first task counter is 1, because how i grasp it, is that one thread is doing first task which initially counter is 0 how it can run second task first, while it is in first task?</p>\n<p>second scenario is when it <code>ThreadPoolTaskScheduler()</code> is assigned to have 2 threads as below:</p>\n<pre><code>    @Test\n    @SneakyThrows\n    public void shouldSimultaneouslyScheduleTest() {\n        final var taskScheduler = new ThreadPoolTaskScheduler();\n        taskScheduler.setPoolSize(2);\n        taskScheduler.setThreadNamePrefix(&quot;test-&quot;);\n        taskScheduler.initialize();\n\n        final var latch = new CountDownLatch(2);\n        final var inOneSecond = Instant.now().plusSeconds(1);\n        final var taskOrders = new ArrayList&lt;String&gt;();\n        taskScheduler.schedule(() -&gt; {\n                    try {\n                        Assertions.assertEquals(0, counter); // --&gt; HOW COME HERE counter is 0     but not 1 like previous scenario?\n                        // make thread take 5 seconds to complete\n                        Thread.sleep(5000);\n                        // increment\n                        taskOrders.add(doWork(latch, 1));\n                    } catch (InterruptedException e) {\n                        throw new RuntimeException(e);\n                    }\n                }\n\n                , inOneSecond);\n\n        taskScheduler.schedule(() -&gt; {\n                    Assertions.assertEquals(0, counter); // why the counter is zero here ?\n                    // increment\n                    taskOrders.add(doWork(latch, 2));\n                    Assertions.assertEquals(1, counter);\n                }\n                , inOneSecond);\n\n        final var bothCompleted = latch.await(7, TimeUnit.SECONDS);\n        // assert both tasks completed\n        Assertions.assertTrue(bothCompleted);\n        // assert both tasks incremented it\n        Assertions.assertEquals(2, counter);\n        // second task was first to run\n        Assertions.assertEquals(&quot;Second&quot;, taskOrders.get(0));\n        // first task was second to run\n        Assertions.assertEquals(&quot;First&quot;, taskOrders.get(1));\n    }\n\n</code></pre>\n<p>in this one i wanna understand how come in both tasks counter is 0?</p>\n"},{"tags":["java","apache-kafka","spring-kafka"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1689345194,"post_id":76688230,"comment_id":135204695,"body_markdown":"Have you tried providing partition=0 to the KafkaListener annotation?","body":"Have you tried providing partition=0 to the KafkaListener annotation?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689350283,"post_id":76688230,"comment_id":135205914,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1689598227,"post_id":76688230,"comment_id":135231727,"body_markdown":"You can use manual assignment instead of group management.","body":"You can use manual assignment instead of group management."}],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689346419,"creation_date":1689346419,"answer_id":76688854,"question_id":76688230,"body_markdown":"This has nothing to do with Spring for Apache Kafka.\r\n\r\nSee Kafka Clients API like `ConsumerPartitionAssignor`. You may use a `RoundRobinAssignor` for inspiration how to skip undesired partitions and assign them to your subscriptions.\r\n\r\nThen you use your custom class for `partition.assignment.strategy` property of your consumer.\r\n\r\nThis article give more information about assignments in consumer group: https://medium.com/streamthoughts/understanding-kafka-partition-assignment-strategies-and-how-to-write-your-own-custom-assignor-ebeda1fc06f3 ","title":"Exclude specific kafka partition while fetching the messages","body":"<p>This has nothing to do with Spring for Apache Kafka.</p>\n<p>See Kafka Clients API like <code>ConsumerPartitionAssignor</code>. You may use a <code>RoundRobinAssignor</code> for inspiration how to skip undesired partitions and assign them to your subscriptions.</p>\n<p>Then you use your custom class for <code>partition.assignment.strategy</code> property of your consumer.</p>\n<p>This article give more information about assignments in consumer group: <a href=\"https://medium.com/streamthoughts/understanding-kafka-partition-assignment-strategies-and-how-to-write-your-own-custom-assignor-ebeda1fc06f3\" rel=\"nofollow noreferrer\">https://medium.com/streamthoughts/understanding-kafka-partition-assignment-strategies-and-how-to-write-your-own-custom-assignor-ebeda1fc06f3</a></p>\n"}],"owner":{"account_id":29017610,"reputation":1,"user_id":22227724,"display_name":"nits buddy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689346419,"creation_date":1689341965,"question_id":76688230,"body_markdown":"We are reading Kafka messages from few topics. Each topics have two partitions where one partition in not getting use to populate the message.(partition 0 is used where 1 is not getting used. It was created for future purpose) We are using Spring Kafka consumer where we are creating the consumers programmatically configurating ConcurrentKafkaListenerContainerFactory and register with org.springframework.kafka.config.KafkaListenerEndpointRegistry.We do not want to subscribe our consumers to partition number 1 of any topics. Is there any way to exclude it?\r\n\r\nWe have tried to implement a ConsumerRebalanceListener but I believe on onPartitionsAssigned(Collection&lt;TopicPartition&gt; var1), we can not remove those partitions.","title":"Exclude specific kafka partition while fetching the messages","body":"<p>We are reading Kafka messages from few topics. Each topics have two partitions where one partition in not getting use to populate the message.(partition 0 is used where 1 is not getting used. It was created for future purpose) We are using Spring Kafka consumer where we are creating the consumers programmatically configurating ConcurrentKafkaListenerContainerFactory and register with org.springframework.kafka.config.KafkaListenerEndpointRegistry.We do not want to subscribe our consumers to partition number 1 of any topics. Is there any way to exclude it?</p>\n<p>We have tried to implement a ConsumerRebalanceListener but I believe on onPartitionsAssigned(Collection var1), we can not remove those partitions.</p>\n"},{"tags":["java","mockito","powermock","powermockito"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689365177,"post_id":76684334,"comment_id":135208641,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":4495339,"reputation":26,"user_id":3655258,"display_name":"user3655258"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689346242,"creation_date":1689301569,"question_id":76684334,"body_markdown":"I would just like to ask if there&#39;s an easy way or manageable way to convert an existing Junit running on Power Mockito to Mockito Runner? The Powermockito doesn&#39;t seem to be supported for JDK 17 and the work around I found (--ad-opens java.base/java.lang = ALL -UNNAMED) doesn&#39;t really work well. I&#39;m currently using Visual Studio Code for my environment (was the required IDE to use).\r\n\r\nI have been trying to do some research as I&#39;m basically a bean sprout level when it comes to this.","title":"Conversion of Powermockito Junit Tests to MockitoRunner","body":"<p>I would just like to ask if there's an easy way or manageable way to convert an existing Junit running on Power Mockito to Mockito Runner? The Powermockito doesn't seem to be supported for JDK 17 and the work around I found (--ad-opens java.base/java.lang = ALL -UNNAMED) doesn't really work well. I'm currently using Visual Studio Code for my environment (was the required IDE to use).</p>\n<p>I have been trying to do some research as I'm basically a bean sprout level when it comes to this.</p>\n"},{"tags":["java","image-processing","javacv","matchtemplate"],"answers":[{"tags":[],"owner":{"account_id":679446,"reputation":374,"user_id":843014,"accept_rate":44,"display_name":"al0"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1446549219,"creation_date":1446549219,"answer_id":33497702,"question_id":33442515,"body_markdown":"I resolved this by reading bytes from InputStream and passing them into imdecode function:\r\n\r\n    InputStream is = context.getResourceAsStream(&quot;Lenna32.png&quot;);\r\n    int nRead;\r\n    byte[] data = new byte[16 * 1024];\r\n    ByteArrayOutputStream buffer = new ByteArrayOutputStream();\r\n    while ((nRead = is.read(data, 0, data.length)) != -1) {\r\n        buffer.write(data, 0, nRead);\r\n    }\r\n    byte[] bytes = buffer.toByteArray();\r\n    Mat mat = imdecode(new Mat(bytes), CV_LOAD_IMAGE_UNCHANGED);","title":"JavaCV Create Mat from Resource (InputStream)","body":"<p>I resolved this by reading bytes from InputStream and passing them into imdecode function:</p>\n\n<pre><code>InputStream is = context.getResourceAsStream(\"Lenna32.png\");\nint nRead;\nbyte[] data = new byte[16 * 1024];\nByteArrayOutputStream buffer = new ByteArrayOutputStream();\nwhile ((nRead = is.read(data, 0, data.length)) != -1) {\n    buffer.write(data, 0, nRead);\n}\nbyte[] bytes = buffer.toByteArray();\nMat mat = imdecode(new Mat(bytes), CV_LOAD_IMAGE_UNCHANGED);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2644939,"reputation":473,"user_id":2287841,"display_name":"Octav"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689345928,"creation_date":1689345928,"answer_id":76688787,"question_id":33442515,"body_markdown":"Just for reference, in order to convert InputStream to Mat, @Kotlin:\r\n``` kotlin\r\nval bytes = inputStream.readBytes()\r\nval mat = Mat(1, bytes.size, CvType.CV_8UC1)\r\nmat.put(0, 0, bytes)\r\nreturn Imgcodecs.imdecode(mat, Imgcodecs.IMREAD_UNCHANGED)\r\n```","title":"JavaCV Create Mat from Resource (InputStream)","body":"<p>Just for reference, in order to convert InputStream to Mat, @Kotlin:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val bytes = inputStream.readBytes()\nval mat = Mat(1, bytes.size, CvType.CV_8UC1)\nmat.put(0, 0, bytes)\nreturn Imgcodecs.imdecode(mat, Imgcodecs.IMREAD_UNCHANGED)\n</code></pre>\n"}],"owner":{"account_id":679446,"reputation":374,"user_id":843014,"accept_rate":44,"display_name":"al0"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3526,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":33497702,"answer_count":2,"score":2,"last_activity_date":1689345928,"creation_date":1446229137,"question_id":33442515,"body_markdown":"I use JavaCV (not OpenCV). My goal is to obtain a `Mat` object from an image that is stored as a Resource. Then I&#39;m going to pass this `Mat` into `opencv_imgproc.matchTemplate` method. I&#39;ve managed to write this **bad** code:\r\n\r\n        InputStream in = getClass().getResourceAsStream(&quot;Lenna32.png&quot;);\r\n        BufferedImage image = ImageIO.read(in);\r\n        Frame f = new Java2DFrameConverter().getFrame(image);\r\n        Mat mat = new OpenCVFrameConverter.ToMat().convert(f);\r\n\r\nThis works in *some* cases. The problems are:\r\n\r\n 1. For png images that has transparency channel (that is 32BPP), it shifts channels, so that `R=00 G=33 B=66 A=FF` turns to `R=33 G=66 B=FF`\r\n[![Lenna 32BPP color shift][1]][1]\r\n\r\n 2. On my target environment, I can&#39;t use `ImageIO`\r\n 3. There are too many object conversions `InputStream -&gt; BufferedImage -&gt; Frame -&gt; Mat`. I feel like there should be a simple and effective way to do this.\r\n\r\nWhat is the best way to create Mat from a Resource?\r\n\r\n  [1]: http://i.stack.imgur.com/7FBsa.jpg","title":"JavaCV Create Mat from Resource (InputStream)","body":"<p>I use JavaCV (not OpenCV). My goal is to obtain a <code>Mat</code> object from an image that is stored as a Resource. Then I'm going to pass this <code>Mat</code> into <code>opencv_imgproc.matchTemplate</code> method. I've managed to write this <strong>bad</strong> code:</p>\n\n<pre><code>    InputStream in = getClass().getResourceAsStream(\"Lenna32.png\");\n    BufferedImage image = ImageIO.read(in);\n    Frame f = new Java2DFrameConverter().getFrame(image);\n    Mat mat = new OpenCVFrameConverter.ToMat().convert(f);\n</code></pre>\n\n<p>This works in <em>some</em> cases. The problems are:</p>\n\n<ol>\n<li><p>For png images that has transparency channel (that is 32BPP), it shifts channels, so that <code>R=00 G=33 B=66 A=FF</code> turns to <code>R=33 G=66 B=FF</code>\n<a href=\"https://i.stack.imgur.com/7FBsa.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7FBsa.jpg\" alt=\"Lenna 32BPP color shift\"></a></p></li>\n<li><p>On my target environment, I can't use <code>ImageIO</code></p></li>\n<li>There are too many object conversions <code>InputStream -&gt; BufferedImage -&gt; Frame -&gt; Mat</code>. I feel like there should be a simple and effective way to do this.</li>\n</ol>\n\n<p>What is the best way to create Mat from a Resource?</p>\n"},{"tags":["java","java-8","java-stream"],"comments":[{"owner":{"account_id":1853886,"reputation":210597,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":3,"creation_date":1377978166,"post_id":18552005,"comment_id":27291025,"body_markdown":"What is `intRange()`? Haven&#39;t come accross this method in Java 8 till now.","body":"What is <code>intRange()</code>? Haven&#39;t come accross this method in Java 8 till now."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1377978236,"post_id":18552005,"comment_id":27291046,"body_markdown":"@RohitJain Probably an `IntStream.rangeClosed(x, y)`.","body":"@RohitJain Probably an <code>IntStream.rangeClosed(x, y)</code>."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":2,"creation_date":1377978675,"post_id":18552005,"comment_id":27291190,"body_markdown":"As a side comment, challenge 4 looks better (IMO) with `List&lt;String&gt; allCities = map.values().stream().flatMap(list -&gt; list.stream()).collect(Collectors.toList());`","body":"As a side comment, challenge 4 looks better (IMO) with <code>List&lt;String&gt; allCities = map.values().stream().flatMap(list -&gt; list.stream()).collect(Collectors.toList());</code>"},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":4,"creation_date":1378073455,"post_id":18552005,"comment_id":27311524,"body_markdown":"Yes, `zip` was removed, along with experimental two-valued streams variously called `BiStream` or `MapStream`. The main problem is that to do this effectively Java really needs a structurally-typed pair (or tuple) type. Lacking one, it&#39;s easy to create a generic Pair or Tuple class -- it&#39;s been done many times -- but they all erase to the same type.","body":"Yes, <code>zip</code> was removed, along with experimental two-valued streams variously called <code>BiStream</code> or <code>MapStream</code>. The main problem is that to do this effectively Java really needs a structurally-typed pair (or tuple) type. Lacking one, it&#39;s easy to create a generic Pair or Tuple class -- it&#39;s been done many times -- but they all erase to the same type."},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":4,"creation_date":1378075191,"post_id":18552005,"comment_id":27311938,"body_markdown":"Oh, another problem with a generic Pair or Tuple class is that it requires all primitives to be boxed.","body":"Oh, another problem with a generic Pair or Tuple class is that it requires all primitives to be boxed."},{"owner":{"account_id":8488598,"reputation":2394,"user_id":7313872,"accept_rate":0,"display_name":"Liam Kernighan"},"score":0,"creation_date":1567521063,"post_id":18552005,"comment_id":101982730,"body_markdown":"Annimon stream library works exactly like Java 8 streams on earlier versions and has some nice additional methods including filterIndexed() https://github.com/aNNiMON/Lightweight-Stream-API","body":"Annimon stream library works exactly like Java 8 streams on earlier versions and has some nice additional methods including filterIndexed() <a href=\"https://github.com/aNNiMON/Lightweight-Stream-API\" rel=\"nofollow noreferrer\">github.com/aNNiMON/Lightweight-Stream-API</a>"},{"owner":{"account_id":156734,"reputation":26697,"user_id":374198,"accept_rate":62,"display_name":"Josh M."},"score":0,"creation_date":1642170179,"post_id":18552005,"comment_id":125006419,"body_markdown":"Yep, another area where the Java team was like &quot;eh, close enough, ship it!&quot; and we end up with an incomplete API. You would have thought there would be an overload of `map(BiFunction&lt;T, Long, R&gt; mapper)` which would provide you with the object and the index. But nope.","body":"Yep, another area where the Java team was like &quot;eh, close enough, ship it!&quot; and we end up with an incomplete API. You would have thought there would be an overload of <code>map(BiFunction&lt;T, Long, R&gt; mapper)</code> which would provide you with the object and the index. But nope."}],"answers":[{"tags":[],"owner":{"account_id":1306954,"reputation":11661,"user_id":1255746,"accept_rate":78,"display_name":"Josh M"},"down_vote_count":3,"up_vote_count":6,"is_accepted":false,"score":3,"last_activity_date":1377977846,"creation_date":1377977846,"answer_id":18552055,"question_id":18552005,"body_markdown":"There isn&#39;t a way to iterate over a `Stream` whilst having access to the index because a `Stream` is unlike any `Collection`. A `Stream` is merely a pipeline for carrying data from one place to another, as stated in the [documentation](http://download.java.net/jdk8/docs/api/java/util/stream/package-summary.html):\r\n\r\n**No storage. A stream is not a data structure that stores elements; instead, they carry values from a source (which could be a data structure, a generator, an IO channel, etc) through a pipeline of computational operations.**\r\n\r\nOf course, as you appear to be hinting at in your question, you could always convert your `Stream&lt;V&gt;` to a `Collection&lt;V&gt;`, such as a `List&lt;V&gt;`, in which you will have access to the indexes.","title":"Is there a concise way to iterate over a stream with indices in Java 8?","body":"<p>There isn't a way to iterate over a <code>Stream</code> whilst having access to the index because a <code>Stream</code> is unlike any <code>Collection</code>. A <code>Stream</code> is merely a pipeline for carrying data from one place to another, as stated in the <a href=\"http://download.java.net/jdk8/docs/api/java/util/stream/package-summary.html\" rel=\"nofollow\">documentation</a>:</p>\n\n<p><strong>No storage. A stream is not a data structure that stores elements; instead, they carry values from a source (which could be a data structure, a generator, an IO channel, etc) through a pipeline of computational operations.</strong></p>\n\n<p>Of course, as you appear to be hinting at in your question, you could always convert your <code>Stream&lt;V&gt;</code> to a <code>Collection&lt;V&gt;</code>, such as a <code>List&lt;V&gt;</code>, in which you will have access to the indexes.</p>\n"},{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"down_vote_count":3,"up_vote_count":580,"is_accepted":true,"score":577,"last_activity_date":1400578789,"creation_date":1377977921,"answer_id":18552071,"question_id":18552005,"body_markdown":"The cleanest way is to start from a stream of indices:\r\n\r\n    String[] names = {&quot;Sam&quot;, &quot;Pamela&quot;, &quot;Dave&quot;, &quot;Pascal&quot;, &quot;Erik&quot;};\r\n    IntStream.range(0, names.length)\r\n             .filter(i -&gt; names[i].length() &lt;= i)\r\n             .mapToObj(i -&gt; names[i])\r\n             .collect(Collectors.toList());\r\n\r\nThe resulting list contains &quot;Erik&quot; only.\r\n\r\n---\r\n\r\nOne alternative which looks more familiar when you are used to for loops would be to maintain an ad hoc counter using a mutable object, for example an `AtomicInteger`:\r\n\r\n    String[] names = {&quot;Sam&quot;, &quot;Pamela&quot;, &quot;Dave&quot;, &quot;Pascal&quot;, &quot;Erik&quot;};\r\n    AtomicInteger index = new AtomicInteger();\r\n    List&lt;String&gt; list = Arrays.stream(names)\r\n                              .filter(n -&gt; n.length() &lt;= index.incrementAndGet())\r\n                              .collect(Collectors.toList());\r\n\r\nNote that ***using the latter method on a parallel stream could break as the items would not necesarily be processed &quot;in order&quot;***.","title":"Is there a concise way to iterate over a stream with indices in Java 8?","body":"<p>The cleanest way is to start from a stream of indices:</p>\n\n<pre><code>String[] names = {\"Sam\", \"Pamela\", \"Dave\", \"Pascal\", \"Erik\"};\nIntStream.range(0, names.length)\n         .filter(i -&gt; names[i].length() &lt;= i)\n         .mapToObj(i -&gt; names[i])\n         .collect(Collectors.toList());\n</code></pre>\n\n<p>The resulting list contains \"Erik\" only.</p>\n\n<hr>\n\n<p>One alternative which looks more familiar when you are used to for loops would be to maintain an ad hoc counter using a mutable object, for example an <code>AtomicInteger</code>:</p>\n\n<pre><code>String[] names = {\"Sam\", \"Pamela\", \"Dave\", \"Pascal\", \"Erik\"};\nAtomicInteger index = new AtomicInteger();\nList&lt;String&gt; list = Arrays.stream(names)\n                          .filter(n -&gt; n.length() &lt;= index.incrementAndGet())\n                          .collect(Collectors.toList());\n</code></pre>\n\n<p>Note that <strong><em>using the latter method on a parallel stream could break as the items would not necesarily be processed \"in order\"</em></strong>.</p>\n"},{"tags":[],"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"down_vote_count":0,"up_vote_count":96,"is_accepted":false,"score":96,"last_activity_date":1471469843,"creation_date":1378078270,"answer_id":18563928,"question_id":18552005,"body_markdown":"The Java 8 streams API lacks the features of getting the index of a stream element as well as the ability to zip streams together. This is unfortunate, as it makes certain applications (like the LINQ challenges) more difficult than they would be otherwise.\r\n\r\nThere are often workarounds, however. Usually this can be done by &quot;driving&quot; the stream with an integer range, and taking advantage of the fact that the original elements are often in an array or in a collection accessible by index. For example, the Challenge 2 problem can be solved this way:\r\n\r\n    String[] names = {&quot;Sam&quot;, &quot;Pamela&quot;, &quot;Dave&quot;, &quot;Pascal&quot;, &quot;Erik&quot;};\r\n\r\n    List&lt;String&gt; nameList =\r\n        IntStream.range(0, names.length)\r\n            .filter(i -&gt; names[i].length() &lt;= i)\r\n            .mapToObj(i -&gt; names[i])\r\n            .collect(toList());\r\n\r\nAs I mentioned above, this takes advantage of the fact that the data source (the names array) is directly indexable. If it weren&#39;t, this technique wouldn&#39;t work.\r\n\r\nI&#39;ll admit that this doesn&#39;t satisfy the intent of Challenge 2. Nonetheless it does solve the problem reasonably effectively.\r\n\r\n**EDIT**\r\n\r\nMy previous code example used `flatMap` to fuse the filter and map operations, but this was cumbersome and provided no advantage. I&#39;ve updated the example per the comment from Holger.","title":"Is there a concise way to iterate over a stream with indices in Java 8?","body":"<p>The Java 8 streams API lacks the features of getting the index of a stream element as well as the ability to zip streams together. This is unfortunate, as it makes certain applications (like the LINQ challenges) more difficult than they would be otherwise.</p>\n\n<p>There are often workarounds, however. Usually this can be done by \"driving\" the stream with an integer range, and taking advantage of the fact that the original elements are often in an array or in a collection accessible by index. For example, the Challenge 2 problem can be solved this way:</p>\n\n<pre><code>String[] names = {\"Sam\", \"Pamela\", \"Dave\", \"Pascal\", \"Erik\"};\n\nList&lt;String&gt; nameList =\n    IntStream.range(0, names.length)\n        .filter(i -&gt; names[i].length() &lt;= i)\n        .mapToObj(i -&gt; names[i])\n        .collect(toList());\n</code></pre>\n\n<p>As I mentioned above, this takes advantage of the fact that the data source (the names array) is directly indexable. If it weren't, this technique wouldn't work.</p>\n\n<p>I'll admit that this doesn't satisfy the intent of Challenge 2. Nonetheless it does solve the problem reasonably effectively.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>My previous code example used <code>flatMap</code> to fuse the filter and map operations, but this was cumbersome and provided no advantage. I've updated the example per the comment from Holger.</p>\n"},{"tags":[],"owner":{"account_id":1227508,"reputation":542,"user_id":1195526,"display_name":"user1195526"},"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1397444280,"creation_date":1397444280,"answer_id":23051268,"question_id":18552005,"body_markdown":"I&#39;ve used the following solution in my project. I think it is better than using mutable objects or integer ranges.\r\n\r\n\r\n\r\n\timport java.util.*;\r\n\timport java.util.function.*;\r\n\timport java.util.stream.Collector;\r\n\timport java.util.stream.Collector.Characteristics;\r\n\timport java.util.stream.Stream;\r\n\timport java.util.stream.StreamSupport;\r\n\timport static java.util.Objects.requireNonNull;\r\n\r\n\r\n\tpublic class CollectionUtils {\r\n\t\tprivate CollectionUtils() { }\r\n\r\n\t\t/**\r\n\t\t * Converts an {@link java.util.Iterator} to {@link java.util.stream.Stream}.\r\n\t\t */\r\n\t\tpublic static &lt;T&gt; Stream&lt;T&gt; iterate(Iterator&lt;? extends T&gt; iterator) {\r\n\t\t\tint characteristics = Spliterator.ORDERED | Spliterator.IMMUTABLE;\r\n\t\t\treturn StreamSupport.stream(Spliterators.spliteratorUnknownSize(iterator, characteristics), false);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Zips the specified stream with its indices.\r\n\t\t */\r\n\t\tpublic static &lt;T&gt; Stream&lt;Map.Entry&lt;Integer, T&gt;&gt; zipWithIndex(Stream&lt;? extends T&gt; stream) {\r\n\t\t\treturn iterate(new Iterator&lt;Map.Entry&lt;Integer, T&gt;&gt;() {\r\n\t\t\t\tprivate final Iterator&lt;? extends T&gt; streamIterator = stream.iterator();\r\n\t\t\t\tprivate int index = 0;\r\n\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic boolean hasNext() {\r\n\t\t\t\t\treturn streamIterator.hasNext();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic Map.Entry&lt;Integer, T&gt; next() {\r\n\t\t\t\t\treturn new AbstractMap.SimpleImmutableEntry&lt;&gt;(index++, streamIterator.next());\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Returns a stream consisting of the results of applying the given two-arguments function to the elements of this stream.\r\n\t\t * The first argument of the function is the element index and the second one - the element value. \r\n\t\t */\r\n\t\tpublic static &lt;T, R&gt; Stream&lt;R&gt; mapWithIndex(Stream&lt;? extends T&gt; stream, BiFunction&lt;Integer, ? super T, ? extends R&gt; mapper) {\r\n\t\t\treturn zipWithIndex(stream).map(entry -&gt; mapper.apply(entry.getKey(), entry.getValue()));\r\n\t\t}\r\n\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tString[] names = {&quot;Sam&quot;, &quot;Pamela&quot;, &quot;Dave&quot;, &quot;Pascal&quot;, &quot;Erik&quot;};\r\n\r\n\t\t\tSystem.out.println(&quot;Test zipWithIndex&quot;);\r\n\t\t\tzipWithIndex(Arrays.stream(names)).forEach(entry -&gt; System.out.println(entry));\r\n\r\n\t\t\tSystem.out.println();\r\n\t\t\tSystem.out.println(&quot;Test mapWithIndex&quot;);\r\n\t\t\tmapWithIndex(Arrays.stream(names), (Integer index, String name) -&gt; index+&quot;=&quot;+name).forEach((String s) -&gt; System.out.println(s));\r\n\t\t}\r\n\t}\r\n","title":"Is there a concise way to iterate over a stream with indices in Java 8?","body":"<p>I've used the following solution in my project. I think it is better than using mutable objects or integer ranges.</p>\n\n<pre><code>import java.util.*;\nimport java.util.function.*;\nimport java.util.stream.Collector;\nimport java.util.stream.Collector.Characteristics;\nimport java.util.stream.Stream;\nimport java.util.stream.StreamSupport;\nimport static java.util.Objects.requireNonNull;\n\n\npublic class CollectionUtils {\n    private CollectionUtils() { }\n\n    /**\n     * Converts an {@link java.util.Iterator} to {@link java.util.stream.Stream}.\n     */\n    public static &lt;T&gt; Stream&lt;T&gt; iterate(Iterator&lt;? extends T&gt; iterator) {\n        int characteristics = Spliterator.ORDERED | Spliterator.IMMUTABLE;\n        return StreamSupport.stream(Spliterators.spliteratorUnknownSize(iterator, characteristics), false);\n    }\n\n    /**\n     * Zips the specified stream with its indices.\n     */\n    public static &lt;T&gt; Stream&lt;Map.Entry&lt;Integer, T&gt;&gt; zipWithIndex(Stream&lt;? extends T&gt; stream) {\n        return iterate(new Iterator&lt;Map.Entry&lt;Integer, T&gt;&gt;() {\n            private final Iterator&lt;? extends T&gt; streamIterator = stream.iterator();\n            private int index = 0;\n\n            @Override\n            public boolean hasNext() {\n                return streamIterator.hasNext();\n            }\n\n            @Override\n            public Map.Entry&lt;Integer, T&gt; next() {\n                return new AbstractMap.SimpleImmutableEntry&lt;&gt;(index++, streamIterator.next());\n            }\n        });\n    }\n\n    /**\n     * Returns a stream consisting of the results of applying the given two-arguments function to the elements of this stream.\n     * The first argument of the function is the element index and the second one - the element value. \n     */\n    public static &lt;T, R&gt; Stream&lt;R&gt; mapWithIndex(Stream&lt;? extends T&gt; stream, BiFunction&lt;Integer, ? super T, ? extends R&gt; mapper) {\n        return zipWithIndex(stream).map(entry -&gt; mapper.apply(entry.getKey(), entry.getValue()));\n    }\n\n    public static void main(String[] args) {\n        String[] names = {\"Sam\", \"Pamela\", \"Dave\", \"Pascal\", \"Erik\"};\n\n        System.out.println(\"Test zipWithIndex\");\n        zipWithIndex(Arrays.stream(names)).forEach(entry -&gt; System.out.println(entry));\n\n        System.out.println();\n        System.out.println(\"Test mapWithIndex\");\n        mapWithIndex(Arrays.stream(names), (Integer index, String name) -&gt; index+\"=\"+name).forEach((String s) -&gt; System.out.println(s));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":296832,"reputation":1300,"user_id":602018,"display_name":"42n4"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1421429616,"creation_date":1421429616,"answer_id":27989553,"question_id":18552005,"body_markdown":"With https://github.com/poetix/protonpack\r\nu can do that zip:\r\n\r\n\tString[] names = {&quot;Sam&quot;,&quot;Pamela&quot;, &quot;Dave&quot;, &quot;Pascal&quot;, &quot;Erik&quot;};\r\n\t\r\n\tList&lt;String&gt; nameList;\r\n\tStream&lt;Integer&gt; indices = IntStream.range(0, names.length).boxed(); \r\n\t\r\n\tnameList = StreamUtils.zip(indices, stream(names),SimpleEntry::new)\r\n\t\t\t.filter(e -&gt; e.getValue().length() &lt;= e.getKey()).map(Entry::getValue).collect(toList());\t\t\t\t\t\r\n\t\t\r\n    System.out.println(nameList);","title":"Is there a concise way to iterate over a stream with indices in Java 8?","body":"<p>With <a href=\"https://github.com/poetix/protonpack\" rel=\"nofollow\">https://github.com/poetix/protonpack</a>\nu can do that zip:</p>\n\n<pre><code>String[] names = {\"Sam\",\"Pamela\", \"Dave\", \"Pascal\", \"Erik\"};\n\nList&lt;String&gt; nameList;\nStream&lt;Integer&gt; indices = IntStream.range(0, names.length).boxed(); \n\nnameList = StreamUtils.zip(indices, stream(names),SimpleEntry::new)\n        .filter(e -&gt; e.getValue().length() &lt;= e.getKey()).map(Entry::getValue).collect(toList());                   \n\nSystem.out.println(nameList);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5914036,"reputation":5245,"user_id":4653367,"display_name":"John McClean"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1496964647,"creation_date":1427660723,"answer_id":29334431,"question_id":18552005,"body_markdown":"In addition to protonpack, [jOOλ&#39;s Seq][1] provides this functionality (and by extension libraries that build on it like [cyclops-react][2], I am the author of this library).\r\n\r\n    Seq.seq(Stream.of(names)).zipWithIndex()\r\n                             .filter( namesWithIndex -&gt; namesWithIndex.v1.length() &lt;= namesWithIndex.v2 + 1)\r\n                             .toList();\r\n\r\n\r\nSeq also supports just Seq.of(names) and will build a JDK Stream under the covers.\r\n\r\nThe simple-react equivalent would similarly look like \r\n  \r\n     LazyFutureStream.of(names)\r\n                     .zipWithIndex()\r\n                     .filter( namesWithIndex -&gt; namesWithIndex.v1.length() &lt;= namesWithIndex.v2 + 1)\r\n                     .toList();\r\n\r\nThe simple-react version is more tailored for asynchronous / concurrent processing.\r\n\r\n  [1]: http://www.jooq.org/products/jOO%CE%BB/javadoc/latest/org/jooq/lambda/Seq.html\r\n  [2]: https://github.com/aol/cyclops-react","title":"Is there a concise way to iterate over a stream with indices in Java 8?","body":"<p>In addition to protonpack, <a href=\"http://www.jooq.org/products/jOO%CE%BB/javadoc/latest/org/jooq/lambda/Seq.html\" rel=\"noreferrer\">jOOλ's Seq</a> provides this functionality (and by extension libraries that build on it like <a href=\"https://github.com/aol/cyclops-react\" rel=\"noreferrer\">cyclops-react</a>, I am the author of this library).</p>\n\n<pre><code>Seq.seq(Stream.of(names)).zipWithIndex()\n                         .filter( namesWithIndex -&gt; namesWithIndex.v1.length() &lt;= namesWithIndex.v2 + 1)\n                         .toList();\n</code></pre>\n\n<p>Seq also supports just Seq.of(names) and will build a JDK Stream under the covers.</p>\n\n<p>The simple-react equivalent would similarly look like </p>\n\n<pre><code> LazyFutureStream.of(names)\n                 .zipWithIndex()\n                 .filter( namesWithIndex -&gt; namesWithIndex.v1.length() &lt;= namesWithIndex.v2 + 1)\n                 .toList();\n</code></pre>\n\n<p>The simple-react version is more tailored for asynchronous / concurrent processing.</p>\n"},{"tags":[],"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1441850871,"creation_date":1441850871,"answer_id":32491944,"question_id":18552005,"body_markdown":"Just for completeness here&#39;s the solution involving my [StreamEx](https://github.com/amaembo/streamex) library:\r\n\r\n\tString[] names = {&quot;Sam&quot;,&quot;Pamela&quot;, &quot;Dave&quot;, &quot;Pascal&quot;, &quot;Erik&quot;};\r\n\tEntryStream.of(names)\r\n\t\t.filterKeyValue((idx, str) -&gt; str.length() &lt;= idx+1)\r\n\t\t.values().toList();\r\n\r\nHere we create an [`EntryStream&lt;Integer, String&gt;`](http://amaembo.github.io/streamex/javadoc/javax/util/streamex/EntryStream.html) which extends `Stream&lt;Entry&lt;Integer, String&gt;&gt;` and adds some specific operations like [`filterKeyValue`](http://amaembo.github.io/streamex/javadoc/javax/util/streamex/EntryStream.html#filterKeyValue-java.util.function.BiPredicate-) or [`values`](http://amaembo.github.io/streamex/javadoc/javax/util/streamex/EntryStream.html#values--). Also [`toList()`](http://amaembo.github.io/streamex/javadoc/javax/util/streamex/StreamEx.html#toList--) shortcut is used.","title":"Is there a concise way to iterate over a stream with indices in Java 8?","body":"<p>Just for completeness here's the solution involving my <a href=\"https://github.com/amaembo/streamex\" rel=\"noreferrer\">StreamEx</a> library:</p>\n\n<pre><code>String[] names = {\"Sam\",\"Pamela\", \"Dave\", \"Pascal\", \"Erik\"};\nEntryStream.of(names)\n    .filterKeyValue((idx, str) -&gt; str.length() &lt;= idx+1)\n    .values().toList();\n</code></pre>\n\n<p>Here we create an <a href=\"http://amaembo.github.io/streamex/javadoc/javax/util/streamex/EntryStream.html\" rel=\"noreferrer\"><code>EntryStream&lt;Integer, String&gt;</code></a> which extends <code>Stream&lt;Entry&lt;Integer, String&gt;&gt;</code> and adds some specific operations like <a href=\"http://amaembo.github.io/streamex/javadoc/javax/util/streamex/EntryStream.html#filterKeyValue-java.util.function.BiPredicate-\" rel=\"noreferrer\"><code>filterKeyValue</code></a> or <a href=\"http://amaembo.github.io/streamex/javadoc/javax/util/streamex/EntryStream.html#values--\" rel=\"noreferrer\"><code>values</code></a>. Also <a href=\"http://amaembo.github.io/streamex/javadoc/javax/util/streamex/StreamEx.html#toList--\" rel=\"noreferrer\"><code>toList()</code></a> shortcut is used.</p>\n"},{"tags":[],"owner":{"account_id":6136418,"reputation":6502,"user_id":4785114,"accept_rate":69,"display_name":"alexpfx"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1455416043,"creation_date":1455416043,"answer_id":35387641,"question_id":18552005,"body_markdown":"You can create a static inner class to encapsulate the indexer as I needed to do in example below:\r\n\r\n    static class Indexer {\r\n        int i = 0;\r\n    }\r\n    \r\n    public static String getRegex() {\r\n        EnumSet&lt;MeasureUnit&gt; range = EnumSet.allOf(MeasureUnit.class);\r\n        StringBuilder sb = new StringBuilder();\r\n        Indexer indexer = new Indexer();\r\n        range.stream().forEach(\r\n                measureUnit -&gt; {\r\n                    sb.append(measureUnit.acronym);\r\n                    if (indexer.i &lt; range.size() - 1)\r\n                        sb.append(&quot;|&quot;);\r\n    \r\n                    indexer.i++;\r\n                }\r\n        );\r\n        return sb.toString();\r\n    }\r\n\r\n","title":"Is there a concise way to iterate over a stream with indices in Java 8?","body":"<p>You can create a static inner class to encapsulate the indexer as I needed to do in example below:</p>\n\n<pre><code>static class Indexer {\n    int i = 0;\n}\n\npublic static String getRegex() {\n    EnumSet&lt;MeasureUnit&gt; range = EnumSet.allOf(MeasureUnit.class);\n    StringBuilder sb = new StringBuilder();\n    Indexer indexer = new Indexer();\n    range.stream().forEach(\n            measureUnit -&gt; {\n                sb.append(measureUnit.acronym);\n                if (indexer.i &lt; range.size() - 1)\n                    sb.append(\"|\");\n\n                indexer.i++;\n            }\n    );\n    return sb.toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1712726,"reputation":6528,"user_id":1570415,"display_name":"Donald Raab"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1456642392,"creation_date":1456641380,"answer_id":35679577,"question_id":18552005,"body_markdown":"If you don&#39;t mind using a third-party library, [Eclipse Collections][1] has [`zipWithIndex`][2] and [`forEachWithIndex`][3] available for use across many types.  Here&#39;s a set of solutions to this challenge for both JDK types and Eclipse Collections types using `zipWithIndex`.\r\n\r\n    String[] names = { &quot;Sam&quot;, &quot;Pamela&quot;, &quot;Dave&quot;, &quot;Pascal&quot;, &quot;Erik&quot; };\r\n    ImmutableList&lt;String&gt; expected = Lists.immutable.with(&quot;Erik&quot;);\r\n    Predicate&lt;Pair&lt;String, Integer&gt;&gt; predicate =\r\n        pair -&gt; pair.getOne().length() &lt;= pair.getTwo() + 1;\r\n    \r\n    // JDK Types\r\n    List&lt;String&gt; strings1 = ArrayIterate.zipWithIndex(names)\r\n        .collectIf(predicate, Pair::getOne);\r\n    Assert.assertEquals(expected, strings1);\r\n    \r\n    List&lt;String&gt; list = Arrays.asList(names);\r\n    List&lt;String&gt; strings2 = ListAdapter.adapt(list)\r\n        .zipWithIndex()\r\n        .collectIf(predicate, Pair::getOne);\r\n    Assert.assertEquals(expected, strings2);\r\n    \r\n    // Eclipse Collections types\r\n    MutableList&lt;String&gt; mutableNames = Lists.mutable.with(names);\r\n    MutableList&lt;String&gt; strings3 = mutableNames.zipWithIndex()\r\n        .collectIf(predicate, Pair::getOne);\r\n    Assert.assertEquals(expected, strings3);\r\n    \r\n    ImmutableList&lt;String&gt; immutableNames = Lists.immutable.with(names);\r\n    ImmutableList&lt;String&gt; strings4 = immutableNames.zipWithIndex()\r\n        .collectIf(predicate, Pair::getOne);\r\n    Assert.assertEquals(expected, strings4);\r\n    \r\n    MutableList&lt;String&gt; strings5 = mutableNames.asLazy()\r\n        .zipWithIndex()\r\n        .collectIf(predicate, Pair::getOne, Lists.mutable.empty());\r\n    Assert.assertEquals(expected, strings5);\r\n\r\nHere&#39;s a solution using `forEachWithIndex` instead.\r\n\r\n    MutableList&lt;String&gt; mutableNames =\r\n        Lists.mutable.with(&quot;Sam&quot;, &quot;Pamela&quot;, &quot;Dave&quot;, &quot;Pascal&quot;, &quot;Erik&quot;);\r\n    ImmutableList&lt;String&gt; expected = Lists.immutable.with(&quot;Erik&quot;);\r\n    \r\n    List&lt;String&gt; actual = Lists.mutable.empty();\r\n    mutableNames.forEachWithIndex((name, index) -&gt; {\r\n            if (name.length() &lt;= index + 1)\r\n                actual.add(name);\r\n        });\r\n    Assert.assertEquals(expected, actual);\r\n\r\nIf you change the lambdas to anonymous inner classes above, then all of these code examples will work in Java 5 - 7 as well.\r\n\r\n**Note:** I am a committer for Eclipse Collections\r\n\r\n  [1]: https://www.eclipse.org/collections/\r\n  [2]: https://www.eclipse.org/collections/javadoc/7.0.0/org/eclipse/collections/api/ordered/OrderedIterable.html#zipWithIndex--\r\n  [3]: https://www.eclipse.org/collections/javadoc/7.0.0/org/eclipse/collections/api/ordered/OrderedIterable.html#forEachWithIndex-org.eclipse.collections.api.block.procedure.primitive.ObjectIntProcedure-\r\n","title":"Is there a concise way to iterate over a stream with indices in Java 8?","body":"<p>If you don't mind using a third-party library, <a href=\"https://www.eclipse.org/collections/\" rel=\"nofollow\">Eclipse Collections</a> has <a href=\"https://www.eclipse.org/collections/javadoc/7.0.0/org/eclipse/collections/api/ordered/OrderedIterable.html#zipWithIndex--\" rel=\"nofollow\"><code>zipWithIndex</code></a> and <a href=\"https://www.eclipse.org/collections/javadoc/7.0.0/org/eclipse/collections/api/ordered/OrderedIterable.html#forEachWithIndex-org.eclipse.collections.api.block.procedure.primitive.ObjectIntProcedure-\" rel=\"nofollow\"><code>forEachWithIndex</code></a> available for use across many types.  Here's a set of solutions to this challenge for both JDK types and Eclipse Collections types using <code>zipWithIndex</code>.</p>\n\n<pre><code>String[] names = { \"Sam\", \"Pamela\", \"Dave\", \"Pascal\", \"Erik\" };\nImmutableList&lt;String&gt; expected = Lists.immutable.with(\"Erik\");\nPredicate&lt;Pair&lt;String, Integer&gt;&gt; predicate =\n    pair -&gt; pair.getOne().length() &lt;= pair.getTwo() + 1;\n\n// JDK Types\nList&lt;String&gt; strings1 = ArrayIterate.zipWithIndex(names)\n    .collectIf(predicate, Pair::getOne);\nAssert.assertEquals(expected, strings1);\n\nList&lt;String&gt; list = Arrays.asList(names);\nList&lt;String&gt; strings2 = ListAdapter.adapt(list)\n    .zipWithIndex()\n    .collectIf(predicate, Pair::getOne);\nAssert.assertEquals(expected, strings2);\n\n// Eclipse Collections types\nMutableList&lt;String&gt; mutableNames = Lists.mutable.with(names);\nMutableList&lt;String&gt; strings3 = mutableNames.zipWithIndex()\n    .collectIf(predicate, Pair::getOne);\nAssert.assertEquals(expected, strings3);\n\nImmutableList&lt;String&gt; immutableNames = Lists.immutable.with(names);\nImmutableList&lt;String&gt; strings4 = immutableNames.zipWithIndex()\n    .collectIf(predicate, Pair::getOne);\nAssert.assertEquals(expected, strings4);\n\nMutableList&lt;String&gt; strings5 = mutableNames.asLazy()\n    .zipWithIndex()\n    .collectIf(predicate, Pair::getOne, Lists.mutable.empty());\nAssert.assertEquals(expected, strings5);\n</code></pre>\n\n<p>Here's a solution using <code>forEachWithIndex</code> instead.</p>\n\n<pre><code>MutableList&lt;String&gt; mutableNames =\n    Lists.mutable.with(\"Sam\", \"Pamela\", \"Dave\", \"Pascal\", \"Erik\");\nImmutableList&lt;String&gt; expected = Lists.immutable.with(\"Erik\");\n\nList&lt;String&gt; actual = Lists.mutable.empty();\nmutableNames.forEachWithIndex((name, index) -&gt; {\n        if (name.length() &lt;= index + 1)\n            actual.add(name);\n    });\nAssert.assertEquals(expected, actual);\n</code></pre>\n\n<p>If you change the lambdas to anonymous inner classes above, then all of these code examples will work in Java 5 - 7 as well.</p>\n\n<p><strong>Note:</strong> I am a committer for Eclipse Collections</p>\n"},{"tags":[],"owner":{"account_id":4120139,"reputation":1,"user_id":3380739,"display_name":"user_3380739"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1673587208,"creation_date":1480665976,"answer_id":40927427,"question_id":18552005,"body_markdown":"Here is code by [abacus-common][1]\r\n\r\n    Stream.of(names).indexed()\r\n          .filter(e -&gt; e.value().length() &lt;= e.index())\r\n          .map(Indexed::value).toList();\r\n\r\nDisclosure： I&#39;m the developer of abacus-common.\r\n\r\n  [1]: https://github.com/landawn/abacus-common","title":"Is there a concise way to iterate over a stream with indices in Java 8?","body":"<p>Here is code by <a href=\"https://github.com/landawn/abacus-common\" rel=\"nofollow noreferrer\">abacus-common</a></p>\n<pre><code>Stream.of(names).indexed()\n      .filter(e -&gt; e.value().length() &lt;= e.index())\n      .map(Indexed::value).toList();\n</code></pre>\n<p>Disclosure： I'm the developer of abacus-common.</p>\n"},{"tags":[],"owner":{"account_id":10393559,"reputation":91,"user_id":7663973,"display_name":"V0idst4r"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1497987211,"creation_date":1488768375,"answer_id":42616742,"question_id":18552005,"body_markdown":"With a List you can try\r\n\r\n    List&lt;String&gt; strings = new ArrayList&lt;&gt;(Arrays.asList(&quot;First&quot;, &quot;Second&quot;, &quot;Third&quot;, &quot;Fourth&quot;, &quot;Fifth&quot;)); // An example list of Strings\r\n    strings.stream() // Turn the list into a Stream\r\n        .collect(HashMap::new, (h, o) -&gt; h.put(h.size(), o), (h, o) -&gt; {}) // Create a map of the index to the object\r\n            .forEach((i, o) -&gt; { // Now we can use a BiConsumer forEach!\r\n                System.out.println(String.format(&quot;%d =&gt; %s&quot;, i, o));\r\n            });\r\nOutput:\r\n\r\n    0 =&gt; First\r\n    1 =&gt; Second\r\n    2 =&gt; Third\r\n    3 =&gt; Fourth\r\n    4 =&gt; Fifth","title":"Is there a concise way to iterate over a stream with indices in Java 8?","body":"<p>With a List you can try</p>\n\n<pre><code>List&lt;String&gt; strings = new ArrayList&lt;&gt;(Arrays.asList(\"First\", \"Second\", \"Third\", \"Fourth\", \"Fifth\")); // An example list of Strings\nstrings.stream() // Turn the list into a Stream\n    .collect(HashMap::new, (h, o) -&gt; h.put(h.size(), o), (h, o) -&gt; {}) // Create a map of the index to the object\n        .forEach((i, o) -&gt; { // Now we can use a BiConsumer forEach!\n            System.out.println(String.format(\"%d =&gt; %s\", i, o));\n        });\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>0 =&gt; First\n1 =&gt; Second\n2 =&gt; Third\n3 =&gt; Fourth\n4 =&gt; Fifth\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4243811,"reputation":4011,"user_id":3473046,"accept_rate":20,"display_name":"num&#233;ro6"},"down_vote_count":1,"up_vote_count":75,"is_accepted":false,"score":74,"last_activity_date":1488982974,"creation_date":1488982974,"answer_id":42673873,"question_id":18552005,"body_markdown":"Since guava 21, you can use\r\n\r\n    Streams.mapWithIndex()\r\n\r\nExample (from [official doc][1]):\r\n\r\n    Streams.mapWithIndex(\r\n        Stream.of(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;),\r\n        (str, index) -&gt; str + &quot;:&quot; + index)\r\n    ) // will return Stream.of(&quot;a:0&quot;, &quot;b:1&quot;, &quot;c:2&quot;)\r\n\r\n\r\n  [1]: http://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/Streams.html#mapWithIndex-java.util.stream.Stream-com.google.common.collect.Streams.FunctionWithIndex-","title":"Is there a concise way to iterate over a stream with indices in Java 8?","body":"<p>Since guava 21, you can use</p>\n\n<pre><code>Streams.mapWithIndex()\n</code></pre>\n\n<p>Example (from <a href=\"http://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/Streams.html#mapWithIndex-java.util.stream.Stream-com.google.common.collect.Streams.FunctionWithIndex-\" rel=\"noreferrer\">official doc</a>):</p>\n\n<pre><code>Streams.mapWithIndex(\n    Stream.of(\"a\", \"b\", \"c\"),\n    (str, index) -&gt; str + \":\" + index)\n) // will return Stream.of(\"a:0\", \"b:1\", \"c:2\")\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6593416,"reputation":27460,"user_id":5093961,"display_name":"Steven Spungin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1495372700,"creation_date":1495372700,"answer_id":44097360,"question_id":18552005,"body_markdown":"This question (https://stackoverflow.com/questions/38963338/stream-way-to-get-index-of-first-element-matching-boolean)  has marked the current question as a duplicate, so I can not answer it there; I am answering it here.\r\n\r\nHere is a generic solution to get the matching index that does not require an external library.\r\n\r\nIf you have a list.\r\n\r\n    public static &lt;T&gt; int indexOf(List&lt;T&gt; items, Predicate&lt;T&gt; matches) {\r\n            return IntStream.range(0, items.size())\r\n                    .filter(index -&gt; matches.test(items.get(index)))\r\n                    .findFirst().orElse(-1);\r\n    }\r\n\r\nAnd call it like this:\r\n\r\n    int index = indexOf(myList, item-&gt;item.getId()==100);\r\n\r\nAnd if using a collection, try this one.\r\n\r\n       public static &lt;T&gt; int indexOf(Collection&lt;T&gt; items, Predicate&lt;T&gt; matches) {\r\n            int index = -1;\r\n            Iterator&lt;T&gt; it = items.iterator();\r\n            while (it.hasNext()) {\r\n                index++;\r\n                if (matches.test(it.next())) {\r\n                    return index;\r\n                }\r\n            }\r\n            return -1;\r\n        }\r\n\r\n","title":"Is there a concise way to iterate over a stream with indices in Java 8?","body":"<p>This question (<a href=\"https://stackoverflow.com/questions/38963338/stream-way-to-get-index-of-first-element-matching-boolean\">Stream Way to get index of first element matching boolean</a>)  has marked the current question as a duplicate, so I can not answer it there; I am answering it here.</p>\n\n<p>Here is a generic solution to get the matching index that does not require an external library.</p>\n\n<p>If you have a list.</p>\n\n<pre><code>public static &lt;T&gt; int indexOf(List&lt;T&gt; items, Predicate&lt;T&gt; matches) {\n        return IntStream.range(0, items.size())\n                .filter(index -&gt; matches.test(items.get(index)))\n                .findFirst().orElse(-1);\n}\n</code></pre>\n\n<p>And call it like this:</p>\n\n<pre><code>int index = indexOf(myList, item-&gt;item.getId()==100);\n</code></pre>\n\n<p>And if using a collection, try this one.</p>\n\n<pre><code>   public static &lt;T&gt; int indexOf(Collection&lt;T&gt; items, Predicate&lt;T&gt; matches) {\n        int index = -1;\n        Iterator&lt;T&gt; it = items.iterator();\n        while (it.hasNext()) {\n            index++;\n            if (matches.test(it.next())) {\n                return index;\n            }\n        }\n        return -1;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2570598,"reputation":13282,"user_id":2229438,"accept_rate":94,"display_name":"Grzegorz Piwowarek"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1501003436,"creation_date":1501003436,"answer_id":45309948,"question_id":18552005,"body_markdown":"If you happen to use Vavr(formerly known as Javaslang), you can leverage the dedicated method:\r\n\r\n    Stream.of(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;)\r\n      .zipWithIndex();\r\n\r\nIf we print out the content, we will see something interesting:\r\n\r\n    Stream((A, 0), ?)\r\n\r\n\r\nThis is because `Streams` are lazy and we have no clue about next items in the stream.","title":"Is there a concise way to iterate over a stream with indices in Java 8?","body":"<p>If you happen to use Vavr(formerly known as Javaslang), you can leverage the dedicated method:</p>\n\n<pre><code>Stream.of(\"A\", \"B\", \"C\")\n  .zipWithIndex();\n</code></pre>\n\n<p>If we print out the content, we will see something interesting:</p>\n\n<pre><code>Stream((A, 0), ?)\n</code></pre>\n\n<p>This is because <code>Streams</code> are lazy and we have no clue about next items in the stream.</p>\n"},{"tags":[],"owner":{"account_id":312929,"reputation":1478,"user_id":627297,"accept_rate":50,"display_name":"alex.b"},"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1510099200,"creation_date":1504166508,"answer_id":45976269,"question_id":18552005,"body_markdown":"I found the solutions here when the Stream is created of list or array (and you know the size). But what if Stream is with unknown size? In this case try this variant:\r\n\r\n    public class WithIndex&lt;T&gt; {\r\n        private int index;\r\n        private T value;\r\n    \r\n        WithIndex(int index, T value) {\r\n            this.index = index;\r\n            this.value = value;\r\n        }\r\n    \r\n        public int index() {\r\n            return index;\r\n        }\r\n    \r\n        public T value() {\r\n            return value;\r\n        }\r\n\r\n        @Override\r\n        public String toString() {\r\n            return value + &quot;(&quot; + index + &quot;)&quot;;\r\n        }\r\n    \r\n        public static &lt;T&gt; Function&lt;T, WithIndex&lt;T&gt;&gt; indexed() {\r\n            return new Function&lt;T, WithIndex&lt;T&gt;&gt;() {\r\n                int index = 0;\r\n                @Override\r\n                public WithIndex&lt;T&gt; apply(T t) {\r\n                    return new WithIndex&lt;&gt;(index++, t);\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\nUsage:\r\n\r\n    public static void main(String[] args) {\r\n        Stream&lt;String&gt; stream = Stream.of(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;);\r\n        stream.map(WithIndex.indexed()).forEachOrdered(e -&gt; {\r\n            System.out.println(e.index() + &quot; -&gt; &quot; + e.value());\r\n        });\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n","title":"Is there a concise way to iterate over a stream with indices in Java 8?","body":"<p>I found the solutions here when the Stream is created of list or array (and you know the size). But what if Stream is with unknown size? In this case try this variant:</p>\n\n<pre><code>public class WithIndex&lt;T&gt; {\n    private int index;\n    private T value;\n\n    WithIndex(int index, T value) {\n        this.index = index;\n        this.value = value;\n    }\n\n    public int index() {\n        return index;\n    }\n\n    public T value() {\n        return value;\n    }\n\n    @Override\n    public String toString() {\n        return value + \"(\" + index + \")\";\n    }\n\n    public static &lt;T&gt; Function&lt;T, WithIndex&lt;T&gt;&gt; indexed() {\n        return new Function&lt;T, WithIndex&lt;T&gt;&gt;() {\n            int index = 0;\n            @Override\n            public WithIndex&lt;T&gt; apply(T t) {\n                return new WithIndex&lt;&gt;(index++, t);\n            }\n        };\n    }\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>public static void main(String[] args) {\n    Stream&lt;String&gt; stream = Stream.of(\"a\", \"b\", \"c\", \"d\", \"e\");\n    stream.map(WithIndex.indexed()).forEachOrdered(e -&gt; {\n        System.out.println(e.index() + \" -&gt; \" + e.value());\n    });\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1504214523,"creation_date":1504214523,"answer_id":45990267,"question_id":18552005,"body_markdown":"One possible way is to index each element on the flow:\r\n\r\n    AtomicInteger index = new AtomicInteger();\r\n    Stream.of(names)\r\n      .map(e-&gt;new Object() { String n=e; public i=index.getAndIncrement(); })\r\n      .filter(o-&gt;o.n.length()&lt;=o.i) // or do whatever you want with pairs...\r\n      .forEach(o-&gt;System.out.println(&quot;idx:&quot;+o.i+&quot; nam:&quot;+o.n));\r\n\r\nUsing an anonymous class along a stream is not well-used while being very useful.","title":"Is there a concise way to iterate over a stream with indices in Java 8?","body":"<p>One possible way is to index each element on the flow:</p>\n\n<pre><code>AtomicInteger index = new AtomicInteger();\nStream.of(names)\n  .map(e-&gt;new Object() { String n=e; public i=index.getAndIncrement(); })\n  .filter(o-&gt;o.n.length()&lt;=o.i) // or do whatever you want with pairs...\n  .forEach(o-&gt;System.out.println(\"idx:\"+o.i+\" nam:\"+o.n));\n</code></pre>\n\n<p>Using an anonymous class along a stream is not well-used while being very useful.</p>\n"},{"tags":[],"owner":{"account_id":194169,"reputation":49718,"user_id":436341,"accept_rate":67,"display_name":"live-love"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1522948209,"creation_date":1522871979,"answer_id":49659431,"question_id":18552005,"body_markdown":"If you are trying to get an index based on a predicate, try this:\r\n\r\nIf you only care about the first index:\r\n\r\n    OptionalInt index = IntStream.range(0, list.size())\r\n        .filter(i -&gt; list.get(i) == 3)\r\n        .findFirst();\r\n\r\nOr if you want to find multiple indexes:\r\n\r\n    IntStream.range(0, list.size())\r\n       .filter(i -&gt; list.get(i) == 3)\r\n       .collect(Collectors.toList());\r\n\r\n\r\nAdd `.orElse(-1);` in case you want to return a value if it doesn&#39;t find it.\r\n\r\n","title":"Is there a concise way to iterate over a stream with indices in Java 8?","body":"<p>If you are trying to get an index based on a predicate, try this:</p>\n\n<p>If you only care about the first index:</p>\n\n<pre><code>OptionalInt index = IntStream.range(0, list.size())\n    .filter(i -&gt; list.get(i) == 3)\n    .findFirst();\n</code></pre>\n\n<p>Or if you want to find multiple indexes:</p>\n\n<pre><code>IntStream.range(0, list.size())\n   .filter(i -&gt; list.get(i) == 3)\n   .collect(Collectors.toList());\n</code></pre>\n\n<p>Add <code>.orElse(-1);</code> in case you want to return a value if it doesn't find it.</p>\n"},{"tags":[],"owner":{"account_id":13389989,"reputation":10689,"user_id":9662601,"display_name":"Samuel Philipp"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1559768236,"creation_date":1559768236,"answer_id":56467898,"question_id":18552005,"body_markdown":"You can use [`IntStream.iterate()`](https://docs.oracle.com/javase/9/docs/api/java/util/stream/IntStream.html#iterate-int-java.util.function.IntPredicate-java.util.function.IntUnaryOperator-) to get the index:\r\n\r\n    String[] names = {&quot;Sam&quot;,&quot;Pamela&quot;, &quot;Dave&quot;, &quot;Pascal&quot;, &quot;Erik&quot;};\r\n    List&lt;String&gt; nameList = IntStream.iterate(0, i -&gt; i &lt; names.length, i -&gt; i + 1)\r\n            .filter(i -&gt; names[i].length() &lt;= i)\r\n            .mapToObj(i -&gt; names[i])\r\n            .collect(Collectors.toList());\r\n\r\nThis only works for Java 9 upwards in Java 8 you can use this:\r\n\r\n    String[] names = {&quot;Sam&quot;,&quot;Pamela&quot;, &quot;Dave&quot;, &quot;Pascal&quot;, &quot;Erik&quot;};\r\n    List&lt;String&gt; nameList = IntStream.iterate(0, i -&gt; i + 1)\r\n            .limit(names.length)\r\n            .filter(i -&gt; names[i].length() &lt;= i)\r\n            .mapToObj(i -&gt; names[i])\r\n            .collect(Collectors.toList());\r\n","title":"Is there a concise way to iterate over a stream with indices in Java 8?","body":"<p>You can use <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/stream/IntStream.html#iterate-int-java.util.function.IntPredicate-java.util.function.IntUnaryOperator-\" rel=\"nofollow noreferrer\"><code>IntStream.iterate()</code></a> to get the index:</p>\n\n<pre><code>String[] names = {\"Sam\",\"Pamela\", \"Dave\", \"Pascal\", \"Erik\"};\nList&lt;String&gt; nameList = IntStream.iterate(0, i -&gt; i &lt; names.length, i -&gt; i + 1)\n        .filter(i -&gt; names[i].length() &lt;= i)\n        .mapToObj(i -&gt; names[i])\n        .collect(Collectors.toList());\n</code></pre>\n\n<p>This only works for Java 9 upwards in Java 8 you can use this:</p>\n\n<pre><code>String[] names = {\"Sam\",\"Pamela\", \"Dave\", \"Pascal\", \"Erik\"};\nList&lt;String&gt; nameList = IntStream.iterate(0, i -&gt; i + 1)\n        .limit(names.length)\n        .filter(i -&gt; names[i].length() &lt;= i)\n        .mapToObj(i -&gt; names[i])\n        .collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9934922,"reputation":4769,"user_id":7353562,"accept_rate":75,"display_name":"Arpan Saini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1572216563,"creation_date":1567048873,"answer_id":57702557,"question_id":18552005,"body_markdown":"\r\n\r\n  \r\n\r\n    String[] namesArray = {&quot;Sam&quot;,&quot;Pamela&quot;, &quot;Dave&quot;, &quot;Pascal&quot;, &quot;Erik&quot;};\r\n    String completeString\r\n             =  IntStream.range(0,namesArray.length)\r\n               .mapToObj(i -&gt; namesArray[i]) // Converting each array element into Object\r\n               .map(String::valueOf) // Converting object to String again\r\n               .collect(Collectors.joining(&quot;,&quot;)); // getting a Concat String of all values\r\n            System.out.println(completeString);\r\n\r\nOUTPUT : Sam,Pamela,Dave,Pascal,Erik\r\n\r\n\r\n\r\n\r\n    String[] namesArray = {&quot;Sam&quot;,&quot;Pamela&quot;, &quot;Dave&quot;, &quot;Pascal&quot;, &quot;Erik&quot;};\r\n    \r\n    IntStream.range(0,namesArray.length)\r\n                   .mapToObj(i -&gt; namesArray[i]) // Converting each array element into Object\r\n                   .map(String::valueOf) // Converting object to String again\r\n                   .forEach(s -&gt; {\r\n                    //You can do various operation on each element here\r\n                    System.out.println(s);\r\n                   }); // getting a Concat String of all \r\n\r\nTo Collect in the List:\r\n\r\n \r\n\r\n    String[] namesArray = {&quot;Sam&quot;,&quot;Pamela&quot;, &quot;Dave&quot;, &quot;Pascal&quot;, &quot;Erik&quot;};\r\n     List&lt;String&gt; namesList\r\n                    =  IntStream.range(0,namesArray.length)\r\n                    .mapToObj(i -&gt; namesArray[i]) // Converting each array element into Object\r\n                    .map(String::valueOf) // Converting object to String again\r\n                    .collect(Collectors.toList()); // collecting elements in List\r\n            System.out.println(listWithIndex);","title":"Is there a concise way to iterate over a stream with indices in Java 8?","body":"<pre><code>String[] namesArray = {\"Sam\",\"Pamela\", \"Dave\", \"Pascal\", \"Erik\"};\nString completeString\n         =  IntStream.range(0,namesArray.length)\n           .mapToObj(i -&gt; namesArray[i]) // Converting each array element into Object\n           .map(String::valueOf) // Converting object to String again\n           .collect(Collectors.joining(\",\")); // getting a Concat String of all values\n        System.out.println(completeString);\n</code></pre>\n\n<p>OUTPUT : Sam,Pamela,Dave,Pascal,Erik</p>\n\n<pre><code>String[] namesArray = {\"Sam\",\"Pamela\", \"Dave\", \"Pascal\", \"Erik\"};\n\nIntStream.range(0,namesArray.length)\n               .mapToObj(i -&gt; namesArray[i]) // Converting each array element into Object\n               .map(String::valueOf) // Converting object to String again\n               .forEach(s -&gt; {\n                //You can do various operation on each element here\n                System.out.println(s);\n               }); // getting a Concat String of all \n</code></pre>\n\n<p>To Collect in the List:</p>\n\n<pre><code>String[] namesArray = {\"Sam\",\"Pamela\", \"Dave\", \"Pascal\", \"Erik\"};\n List&lt;String&gt; namesList\n                =  IntStream.range(0,namesArray.length)\n                .mapToObj(i -&gt; namesArray[i]) // Converting each array element into Object\n                .map(String::valueOf) // Converting object to String again\n                .collect(Collectors.toList()); // collecting elements in List\n        System.out.println(listWithIndex);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15524669,"reputation":2739,"user_id":11199879,"display_name":"Kaplan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1622648330,"creation_date":1572101288,"answer_id":58571845,"question_id":18552005,"body_markdown":"_you don&#39;t need a_ `map` _necessarily_&lt;br /&gt;\r\nthat is the closest lambda to the LINQ example:\r\n\r\n    int[] idx = new int[] { 0 };\r\n    Stream.of(names)\r\n        .filter(name -&gt; name.length() &lt;= idx[0]++)\r\n        .collect(Collectors.toList());\r\n","title":"Is there a concise way to iterate over a stream with indices in Java 8?","body":"<p><em>you don't need a</em> <code>map</code> <em>necessarily</em><br />\nthat is the closest lambda to the LINQ example:</p>\n<pre><code>int[] idx = new int[] { 0 };\nStream.of(names)\n    .filter(name -&gt; name.length() &lt;= idx[0]++)\n    .collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":482540,"reputation":35,"user_id":896998,"accept_rate":20,"display_name":"mario"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1587584251,"creation_date":1587584251,"answer_id":61373694,"question_id":18552005,"body_markdown":"As jean-baptiste-yun&#232;s said, if your stream is based on a java List then using an AtomicInteger and its incrementAndGet method is a very good solution to the problem and the returned integer does correspond to the index in the original List as long as you do not use a parallel stream.","title":"Is there a concise way to iterate over a stream with indices in Java 8?","body":"<p>As jean-baptiste-yunès said, if your stream is based on a java List then using an AtomicInteger and its incrementAndGet method is a very good solution to the problem and the returned integer does correspond to the index in the original List as long as you do not use a parallel stream.</p>\n"},{"tags":[],"owner":{"account_id":11176081,"reputation":517,"user_id":8201635,"display_name":"B. Stackhouse"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1589231622,"creation_date":1589231622,"answer_id":61739439,"question_id":18552005,"body_markdown":"If you need the index in the forEach then this provides a way.\r\n\r\n      public class IndexedValue {\r\n\r\n        private final int    index;\r\n        private final Object value;\r\n\r\n        public IndexedValue(final int index, final Object value) { \r\n            this.index = index;\r\n            this.value = value;\r\n        }\r\n\r\n        public int getIndex() {\r\n            return index;\r\n        }\r\n\r\n        public Object getValue() {\r\n            return value;\r\n        }\r\n    }\r\n\r\nThen use it as follows. \r\n\r\n    @Test\r\n    public void withIndex() {\r\n        final List&lt;String&gt; list = Arrays.asList(&quot;a&quot;, &quot;b&quot;);\r\n        IntStream.range(0, list.size())\r\n                 .mapToObj(index -&gt; new IndexedValue(index, list.get(index)))\r\n                 .forEach(indexValue -&gt; {\r\n                     System.out.println(String.format(&quot;%d, %s&quot;,\r\n                                                      indexValue.getIndex(),\r\n                                                      indexValue.getValue().toString()));\r\n                 });\r\n    }","title":"Is there a concise way to iterate over a stream with indices in Java 8?","body":"<p>If you need the index in the forEach then this provides a way.</p>\n\n<pre><code>  public class IndexedValue {\n\n    private final int    index;\n    private final Object value;\n\n    public IndexedValue(final int index, final Object value) { \n        this.index = index;\n        this.value = value;\n    }\n\n    public int getIndex() {\n        return index;\n    }\n\n    public Object getValue() {\n        return value;\n    }\n}\n</code></pre>\n\n<p>Then use it as follows. </p>\n\n<pre><code>@Test\npublic void withIndex() {\n    final List&lt;String&gt; list = Arrays.asList(\"a\", \"b\");\n    IntStream.range(0, list.size())\n             .mapToObj(index -&gt; new IndexedValue(index, list.get(index)))\n             .forEach(indexValue -&gt; {\n                 System.out.println(String.format(\"%d, %s\",\n                                                  indexValue.getIndex(),\n                                                  indexValue.getValue().toString()));\n             });\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":121787,"reputation":11660,"user_id":315129,"accept_rate":93,"display_name":"vbezhenar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635412498,"creation_date":1635412498,"answer_id":69751331,"question_id":18552005,"body_markdown":"Here&#39;s solution for standard Java:\r\n\r\nIn-line solution:\r\n\r\n```java\r\nArrays.stream(&quot;zero,one,two,three,four&quot;.split(&quot;,&quot;))\r\n        .map(new Function&lt;String, Map.Entry&lt;Integer, String&gt;&gt;() {\r\n            int index;\r\n\r\n            @Override\r\n            public Map.Entry&lt;Integer, String&gt; apply(String s) {\r\n                return Map.entry(index++, s);\r\n            }\r\n        })\r\n        .forEach(System.out::println);\r\n```\r\n\r\nand more readable solution with utility method:\r\n\r\n```java\r\nstatic &lt;T&gt; Function&lt;T, Map.Entry&lt;Integer, T&gt;&gt; mapWithIntIndex() {\r\n    return new Function&lt;T, Map.Entry&lt;Integer, T&gt;&gt;() {\r\n        int index;\r\n\r\n        @Override\r\n        public Map.Entry&lt;Integer, T&gt; apply(T t) {\r\n            return Map.entry(index++, t);\r\n        }\r\n    };\r\n}\r\n\r\n...\r\nArrays.stream(&quot;zero,one,two,three,four&quot;.split(&quot;,&quot;))\r\n        .map(mapWithIntIndex())\r\n        .forEach(System.out::println);\r\n```","title":"Is there a concise way to iterate over a stream with indices in Java 8?","body":"<p>Here's solution for standard Java:</p>\n<p>In-line solution:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Arrays.stream(&quot;zero,one,two,three,four&quot;.split(&quot;,&quot;))\n        .map(new Function&lt;String, Map.Entry&lt;Integer, String&gt;&gt;() {\n            int index;\n\n            @Override\n            public Map.Entry&lt;Integer, String&gt; apply(String s) {\n                return Map.entry(index++, s);\n            }\n        })\n        .forEach(System.out::println);\n</code></pre>\n<p>and more readable solution with utility method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>static &lt;T&gt; Function&lt;T, Map.Entry&lt;Integer, T&gt;&gt; mapWithIntIndex() {\n    return new Function&lt;T, Map.Entry&lt;Integer, T&gt;&gt;() {\n        int index;\n\n        @Override\n        public Map.Entry&lt;Integer, T&gt; apply(T t) {\n            return Map.entry(index++, t);\n        }\n    };\n}\n\n...\nArrays.stream(&quot;zero,one,two,three,four&quot;.split(&quot;,&quot;))\n        .map(mapWithIntIndex())\n        .forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2704546,"reputation":2297,"user_id":2334422,"display_name":"Ishan Liyanage"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659507776,"creation_date":1659507776,"answer_id":73217100,"question_id":18552005,"body_markdown":"If the list is unique, we can make use of indexOf method.\r\n\r\n    List&lt;String&gt; names = Arrays.asList(&quot;Sam&quot;, &quot;Pamela&quot;, &quot;Dave&quot;, &quot;Pascal&quot;, &quot;Erik&quot;);\r\n\r\n\t\tnames.forEach(name -&gt;{\r\n\t\t\tSystem.out.println((names.indexOf(name) + 1) + &quot;: &quot; + name);\r\n\t\t});","title":"Is there a concise way to iterate over a stream with indices in Java 8?","body":"<p>If the list is unique, we can make use of indexOf method.</p>\n<pre><code>List&lt;String&gt; names = Arrays.asList(&quot;Sam&quot;, &quot;Pamela&quot;, &quot;Dave&quot;, &quot;Pascal&quot;, &quot;Erik&quot;);\n\n    names.forEach(name -&gt;{\n        System.out.println((names.indexOf(name) + 1) + &quot;: &quot; + name);\n    });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2375368,"reputation":4423,"user_id":2078908,"display_name":"ursa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681918005,"creation_date":1681918005,"answer_id":76056292,"question_id":18552005,"body_markdown":"&gt; Is there a concise way to iterate over a stream whilst having access to the index in the stream?\r\n\r\nIf you think of **iterate over** as a terminal operation (like `forEach`), then **yes**, there is a simple way to access index:\r\n\r\n```\r\nStream&lt;String&gt; names = Stream.of(&quot;Sam&quot;,&quot;Pamela&quot;, &quot;Dave&quot;, &quot;Pascal&quot;, &quot;Erik&quot;);\r\nList&lt;String&gt; filtered = new ArrayList&lt;&gt;();\r\n\r\nnames.reduce(0L, (index, item) -&gt; {\r\n    log.info(&quot;Iteration over items [index: {}, item: {}]&quot;, index, item);\r\n    if (item.length() &lt; index) {\r\n        filtered.add(item);\r\n    }\r\n    return index + 1;\r\n}, Long::sum);\r\n```\r\n\r\nThis works for `sequential` streams only. \r\n\r\n`Parallel` streams must be first transformed into `sequential` ones:\r\n```\r\nnames.sequential().reduce(0L, (index, item) -&gt; {\r\n    log.info(&quot;Iteration over items [index: {}, item: {}]&quot;, index, item);\r\n    if (item.length() &lt; index) {\r\n        filtered.add(item);\r\n    }\r\n    return index + 1;\r\n}, Long::sum);\r\n```","title":"Is there a concise way to iterate over a stream with indices in Java 8?","body":"<blockquote>\n<p>Is there a concise way to iterate over a stream whilst having access to the index in the stream?</p>\n</blockquote>\n<p>If you think of <strong>iterate over</strong> as a terminal operation (like <code>forEach</code>), then <strong>yes</strong>, there is a simple way to access index:</p>\n<pre><code>Stream&lt;String&gt; names = Stream.of(&quot;Sam&quot;,&quot;Pamela&quot;, &quot;Dave&quot;, &quot;Pascal&quot;, &quot;Erik&quot;);\nList&lt;String&gt; filtered = new ArrayList&lt;&gt;();\n\nnames.reduce(0L, (index, item) -&gt; {\n    log.info(&quot;Iteration over items [index: {}, item: {}]&quot;, index, item);\n    if (item.length() &lt; index) {\n        filtered.add(item);\n    }\n    return index + 1;\n}, Long::sum);\n</code></pre>\n<p>This works for <code>sequential</code> streams only.</p>\n<p><code>Parallel</code> streams must be first transformed into <code>sequential</code> ones:</p>\n<pre><code>names.sequential().reduce(0L, (index, item) -&gt; {\n    log.info(&quot;Iteration over items [index: {}, item: {}]&quot;, index, item);\n    if (item.length() &lt; index) {\n        filtered.add(item);\n    }\n    return index + 1;\n}, Long::sum);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7838492,"reputation":332,"user_id":5925582,"display_name":"Marcelo Xavier"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689345681,"creation_date":1689345681,"answer_id":76688751,"question_id":18552005,"body_markdown":"\r\n    ArrayList result = new ArrayList()\r\n    for(int i = 0; i &lt; names.length(); i++){\r\n      if(names[i].length() &lt; i+1) {\r\n        result.add(names[i])\r\n      }\r\n    }\r\n    return result;\r\n\r\n\r\nFor god sake, follow KISS principle (Keep it simple s...).\r\n\r\nThe most performant, readable and predictable way to write it. Just put inside a method and be happy without bugs and unprectictability. ","title":"Is there a concise way to iterate over a stream with indices in Java 8?","body":"<pre><code>ArrayList result = new ArrayList()\nfor(int i = 0; i &lt; names.length(); i++){\n  if(names[i].length() &lt; i+1) {\n    result.add(names[i])\n  }\n}\nreturn result;\n</code></pre>\n<p>For god sake, follow KISS principle (Keep it simple s...).</p>\n<p>The most performant, readable and predictable way to write it. Just put inside a method and be happy without bugs and unprectictability.</p>\n"}],"owner":{"account_id":116234,"reputation":8075,"user_id":304874,"accept_rate":84,"display_name":"Graeme Moss"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":433206,"favorite_count":0,"down_vote_count":0,"up_vote_count":518,"accepted_answer_id":18552071,"answer_count":26,"score":518,"last_activity_date":1689345681,"creation_date":1377977469,"question_id":18552005,"body_markdown":"Is there a concise way to iterate over a stream whilst having access to the index in the stream?\r\n\r\n    String[] names = {&quot;Sam&quot;,&quot;Pamela&quot;, &quot;Dave&quot;, &quot;Pascal&quot;, &quot;Erik&quot;};\r\n  \r\n    List&lt;String&gt; nameList;\r\n    Stream&lt;Integer&gt; indices = intRange(1, names.length).boxed();\r\n    nameList = zip(indices, stream(names), SimpleEntry::new)\r\n            .filter(e -&gt; e.getValue().length() &lt;= e.getKey())\r\n            .map(Entry::getValue)\r\n            .collect(toList());\r\n\r\nwhich seems rather disappointing compared to the LINQ example given there\r\n\r\n    string[] names = { &quot;Sam&quot;, &quot;Pamela&quot;, &quot;Dave&quot;, &quot;Pascal&quot;, &quot;Erik&quot; };\r\n    var nameList = names.Where((c, index) =&gt; c.Length &lt;= index + 1).ToList();\r\n\r\nIs there a more concise way?\r\n\r\nFurther it seems the zip has either moved or been removed...\r\n\r\n  [1]: http://blog.lahteenmaki.net/2013/04/java-streams-vs-c-linq-vs-java6.html","title":"Is there a concise way to iterate over a stream with indices in Java 8?","body":"<p>Is there a concise way to iterate over a stream whilst having access to the index in the stream?</p>\n\n<pre><code>String[] names = {\"Sam\",\"Pamela\", \"Dave\", \"Pascal\", \"Erik\"};\n\nList&lt;String&gt; nameList;\nStream&lt;Integer&gt; indices = intRange(1, names.length).boxed();\nnameList = zip(indices, stream(names), SimpleEntry::new)\n        .filter(e -&gt; e.getValue().length() &lt;= e.getKey())\n        .map(Entry::getValue)\n        .collect(toList());\n</code></pre>\n\n<p>which seems rather disappointing compared to the LINQ example given there</p>\n\n<pre><code>string[] names = { \"Sam\", \"Pamela\", \"Dave\", \"Pascal\", \"Erik\" };\nvar nameList = names.Where((c, index) =&gt; c.Length &lt;= index + 1).ToList();\n</code></pre>\n\n<p>Is there a more concise way?</p>\n\n<p>Further it seems the zip has either moved or been removed...</p>\n"},{"tags":["java","upgrade","sap-commerce-cloud","solr5","solr7"],"comments":[{"owner":{"account_id":13121735,"reputation":1877,"user_id":9478932,"display_name":"Benkerroum Mohamed"},"score":0,"creation_date":1689599960,"post_id":76664166,"comment_id":135232148,"body_markdown":"You need to use the new solrconfig.xml and schema from solr 7.7","body":"You need to use the new solrconfig.xml and schema from solr 7.7"}],"owner":{"account_id":28820548,"reputation":1,"user_id":22073150,"display_name":"So.mmelier"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689345434,"creation_date":1689094079,"question_id":76664166,"body_markdown":"I trying to upgrade solr from 5.3(hybris 5.7) to 7.7(hybris 6.7). After start full index from hybris i have NumberFormatException in solr 7.7. Difference that i see, its content-type, 5.3 - application/xml, 7.7 - application/javabin. 5.3 based on content-type uses XmlLoader, and make SolrInputField with correct value like &quot;100.00&quot;, but 7.7 uses another loader and value seems like &quot;SolrInputField:fieldname:fieldname=100.00&quot; and takes NumberFormatException when try to parse to double, because &quot;SolrInputField:fieldname:fieldname=100.00&quot; its not double value ofc.\r\nPS. I take solrconfig.xml and solr.xml form 5.3 and upgrade. \r\n\r\nUPD: solr 7.7 cant convert BigDecimal\r\n\r\nAny ideas, how to fix that?","title":"Solr 7.7 cant parse hybris 6.7 java double value","body":"<p>I trying to upgrade solr from 5.3(hybris 5.7) to 7.7(hybris 6.7). After start full index from hybris i have NumberFormatException in solr 7.7. Difference that i see, its content-type, 5.3 - application/xml, 7.7 - application/javabin. 5.3 based on content-type uses XmlLoader, and make SolrInputField with correct value like &quot;100.00&quot;, but 7.7 uses another loader and value seems like &quot;SolrInputField:fieldname:fieldname=100.00&quot; and takes NumberFormatException when try to parse to double, because &quot;SolrInputField:fieldname:fieldname=100.00&quot; its not double value ofc.\nPS. I take solrconfig.xml and solr.xml form 5.3 and upgrade.</p>\n<p>UPD: solr 7.7 cant convert BigDecimal</p>\n<p>Any ideas, how to fix that?</p>\n"},{"tags":["java","quarkus","open-telemetry","quarkus-reactive"],"comments":[{"owner":{"account_id":5621681,"reputation":229,"user_id":6935180,"display_name":"Bruno Baptista"},"score":0,"creation_date":1689329614,"post_id":76681389,"comment_id":135201303,"body_markdown":"Which version of Quarkus?","body":"Which version of Quarkus?"},{"owner":{"account_id":1290069,"reputation":703,"user_id":1242336,"display_name":"Kiran K"},"score":0,"creation_date":1689345330,"post_id":76681389,"comment_id":135204725,"body_markdown":"@BrunoBaptista updated the question with the info. I am using 2.16.5Final","body":"@BrunoBaptista updated the question with the info. I am using 2.16.5Final"},{"owner":{"account_id":5621681,"reputation":229,"user_id":6935180,"display_name":"Bruno Baptista"},"score":0,"creation_date":1689588019,"post_id":76681389,"comment_id":135229553,"body_markdown":"What baggage propagation are you using? W3C?","body":"What baggage propagation are you using? W3C?"},{"owner":{"account_id":1290069,"reputation":703,"user_id":1242336,"display_name":"Kiran K"},"score":0,"creation_date":1690212987,"post_id":76681389,"comment_id":135318605,"body_markdown":"@BrunoBaptista not sure what you mean ? I am under the impression that all of that happens under the covers by quarkus. Is there a specific property you are referring to here ?","body":"@BrunoBaptista not sure what you mean ? I am under the impression that all of that happens under the covers by quarkus. Is there a specific property you are referring to here ?"},{"owner":{"account_id":5621681,"reputation":229,"user_id":6935180,"display_name":"Bruno Baptista"},"score":0,"creation_date":1690304428,"post_id":76681389,"comment_id":135333614,"body_markdown":"Just to make sure the defaults are in use. Will take a look.","body":"Just to make sure the defaults are in use. Will take a look."},{"owner":{"account_id":5621681,"reputation":229,"user_id":6935180,"display_name":"Bruno Baptista"},"score":0,"creation_date":1690392762,"post_id":76681389,"comment_id":135348588,"body_markdown":"Can you please check if this solution works for you?\nhttps://stackoverflow.com/questions/76767269/quarkus-opentelemetry-baggage/76770235#76770235","body":"Can you please check if this solution works for you? <a href=\"https://stackoverflow.com/questions/76767269/quarkus-opentelemetry-baggage/76770235#76770235\" title=\"quarkus opentelemetry baggage\">stackoverflow.com/questions/76767269/&hellip;</a>"}],"owner":{"account_id":1290069,"reputation":703,"user_id":1242336,"display_name":"Kiran K"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":204,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689345300,"creation_date":1689264363,"question_id":76681389,"body_markdown":"I am adding Baggage to an existing trace as shown below. What I find is that the baggage is not getting propagated. &#39;traceId&#39;,&#39;spanId&#39; do get propagated though.\r\nWhat could be wrong with the setup below ?\r\n\r\nQuarkus version 2.16.5Final\r\n\r\nService A : \r\n```\r\ntry (var scope =\r\n        Context.current()\r\n            .with(\r\n                Baggage.builder()\r\n                    .put(&quot;RequestId&quot;, String.valueOf(message.getRequestId()))\r\n                    .build())\r\n            .makeCurrent()) {\r\n            //......some logic here\r\n            emitter.send(KafkaRecord.of(key, message));\r\n           }\r\n\r\n```\r\n\r\nService B where I receive the Kafka Message: \r\n\r\n```\r\n@ApplicationScoped\r\npublic class MDCEnricher implements OutgoingInterceptor {\r\n  @Override\r\n  public Message&lt;?&gt; onMessage(Message&lt;?&gt; message) {\r\n    Baggage.current()\r\n        .forEach(\r\n            (s, baggageEntry) -&gt; {\r\n              MDC.put(s, baggageEntry.getValue());\r\n            });\r\n\r\n    return message;\r\n  }\r\n\r\n}\r\n```\r\n\r\nService B is also calling Service C using REST.\r\n\r\nService C\r\n```\r\n@Slf4j\r\npublic class MDCFilter {\r\n  @ServerRequestFilter\r\n  public Uni&lt;RestResponse&lt;Void&gt;&gt; copyBaggageIntoMDC(UriInfo uriInfo, HttpHeaders httpHeaders, ContainerRequestContext requestContext){\r\n    SpanContext spanContext = Span.current().getSpanContext();\r\n    Baggage.current()\r\n        .forEach(\r\n            (s, baggageEntry) -&gt; {\r\n              MDC.put(s, baggageEntry.getValue());\r\n            });\r\n    return Uni.createFrom().item((RestResponse&lt;Void&gt;) null);\r\n  }\r\n}\r\n```\r\n\r\nquarkus log format in all service : \r\n\r\n    quarkus.log.console.format=%d{HH:mm:ss} %-5p [%X] [%c{2.}] (%t) %s%e%n\r\n\r\nI expect to see &#39;RequestId&#39; which I added as baggage in Service A to be logged in all applications but that isn&#39;t working. The only MDC values I see are &#39;traceId&#39; and &#39;spanId&#39;","title":"Open Telemetry Baggage not getting propagated across quarkus microservice stack","body":"<p>I am adding Baggage to an existing trace as shown below. What I find is that the baggage is not getting propagated. 'traceId','spanId' do get propagated though.\nWhat could be wrong with the setup below ?</p>\n<p>Quarkus version 2.16.5Final</p>\n<p>Service A :</p>\n<pre><code>try (var scope =\n        Context.current()\n            .with(\n                Baggage.builder()\n                    .put(&quot;RequestId&quot;, String.valueOf(message.getRequestId()))\n                    .build())\n            .makeCurrent()) {\n            //......some logic here\n            emitter.send(KafkaRecord.of(key, message));\n           }\n\n</code></pre>\n<p>Service B where I receive the Kafka Message:</p>\n<pre><code>@ApplicationScoped\npublic class MDCEnricher implements OutgoingInterceptor {\n  @Override\n  public Message&lt;?&gt; onMessage(Message&lt;?&gt; message) {\n    Baggage.current()\n        .forEach(\n            (s, baggageEntry) -&gt; {\n              MDC.put(s, baggageEntry.getValue());\n            });\n\n    return message;\n  }\n\n}\n</code></pre>\n<p>Service B is also calling Service C using REST.</p>\n<p>Service C</p>\n<pre><code>@Slf4j\npublic class MDCFilter {\n  @ServerRequestFilter\n  public Uni&lt;RestResponse&lt;Void&gt;&gt; copyBaggageIntoMDC(UriInfo uriInfo, HttpHeaders httpHeaders, ContainerRequestContext requestContext){\n    SpanContext spanContext = Span.current().getSpanContext();\n    Baggage.current()\n        .forEach(\n            (s, baggageEntry) -&gt; {\n              MDC.put(s, baggageEntry.getValue());\n            });\n    return Uni.createFrom().item((RestResponse&lt;Void&gt;) null);\n  }\n}\n</code></pre>\n<p>quarkus log format in all service :</p>\n<pre><code>quarkus.log.console.format=%d{HH:mm:ss} %-5p [%X] [%c{2.}] (%t) %s%e%n\n</code></pre>\n<p>I expect to see 'RequestId' which I added as baggage in Service A to be logged in all applications but that isn't working. The only MDC values I see are 'traceId' and 'spanId'</p>\n"},{"tags":["java","android","react-native"],"answers":[{"tags":[],"owner":{"account_id":5902223,"reputation":700,"user_id":4645332,"display_name":"SepJaPro2.4"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1689344588,"creation_date":1689344588,"answer_id":76688599,"question_id":76688187,"body_markdown":"To convert a string of zeros in the format &quot;0000000000000000&quot; to a byte array in the format {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00} in Java, you can use the following code:\r\n\r\n\r\n    private byte[] parseStrToHex(String str) {\r\n        byte[] result = new byte[str.length() / 2];\r\n        for (int i = 0; i &lt; result.length; i++) {\r\n            String byteString = str.substring(i * 2, (i * 2) + 2);\r\n            result[i] = (byte) Integer.parseInt(byteString, 16);\r\n        }\r\n        return result;\r\n    }","title":"React Native native module - transform string to hexadecimal","body":"<p>To convert a string of zeros in the format &quot;0000000000000000&quot; to a byte array in the format {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00} in Java, you can use the following code:</p>\n<pre><code>private byte[] parseStrToHex(String str) {\n    byte[] result = new byte[str.length() / 2];\n    for (int i = 0; i &lt; result.length; i++) {\n        String byteString = str.substring(i * 2, (i * 2) + 2);\n        result[i] = (byte) Integer.parseInt(byteString, 16);\n    }\n    return result;\n}\n</code></pre>\n"}],"owner":{"account_id":13473518,"reputation":515,"user_id":9721251,"display_name":"Zirek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76688599,"answer_count":1,"score":0,"last_activity_date":1689344588,"creation_date":1689341590,"question_id":76688187,"body_markdown":"I need to pass string in shape of &quot;0000000000000000&quot; from RN to Java and transform it into hex in shape of {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, thing is that my knowledge of Java is ultra basic and eventho I successfully pass it to native module, I don&#39;t really know how to convert it inside java function. Can anyone help with that?\r\n\r\n     private byte[] parseStrToHex(String str) {\r\n          // found something like that but doesn&#39;t really work\r\n          return String.format(&quot;%040x&quot;, new BigInteger(1, str.getBytes(StandardCharsets.UTF_8)));\r\n        }","title":"React Native native module - transform string to hexadecimal","body":"<p>I need to pass string in shape of &quot;0000000000000000&quot; from RN to Java and transform it into hex in shape of {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, thing is that my knowledge of Java is ultra basic and eventho I successfully pass it to native module, I don't really know how to convert it inside java function. Can anyone help with that?</p>\n<pre><code> private byte[] parseStrToHex(String str) {\n      // found something like that but doesn't really work\n      return String.format(&quot;%040x&quot;, new BigInteger(1, str.getBytes(StandardCharsets.UTF_8)));\n    }\n</code></pre>\n"},{"tags":["java","sftp","jsch"],"comments":[{"owner":{"account_id":2647801,"reputation":1383,"user_id":2290153,"display_name":"Matthias Wiedemann"},"score":2,"creation_date":1679084444,"post_id":75771589,"comment_id":133664040,"body_markdown":"Have you tried jsch fork from https://github.com/mwiede/jsch?","body":"Have you tried jsch fork from <a href=\"https://github.com/mwiede/jsch\" rel=\"nofollow noreferrer\">github.com/mwiede/jsch</a>?"},{"owner":{"account_id":4880671,"reputation":31,"user_id":3934553,"display_name":"Darren Mossman"},"score":0,"creation_date":1679097585,"post_id":75771589,"comment_id":133666050,"body_markdown":"@MatthiasWiedemann - Excellent suggestion, thank you!\nI tried the fork lib, and with a bit of tweaking - added &quot;ssh-rsa&quot; to server_host_key property, I was able to connect and get a directory listing. \nThe logging from this library is also much better than original.","body":"@MatthiasWiedemann - Excellent suggestion, thank you! I tried the fork lib, and with a bit of tweaking - added &quot;ssh-rsa&quot; to server_host_key property, I was able to connect and get a directory listing.  The logging from this library is also much better than original."}],"answers":[{"tags":[],"owner":{"account_id":28419743,"reputation":11,"user_id":21741969,"display_name":"Tyler Cunnion"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682490184,"creation_date":1682490184,"answer_id":76107743,"question_id":75771589,"body_markdown":"Ran into the same problem here - the key was googling the server software: &quot;SSH-2.0-Serv-U_15.3.2.155&quot;. Doing that led me to this support page from the publisher: https://support.solarwinds.com/SuccessCenter/s/article/SFTP-connection-not-established-for-legacy-Java-clients?language=en_US\r\n\r\nBottom line is that this particular server software just became more strict on clients&#39; adherence to the RFC:\r\n\r\n&gt; The Java client doesn&#39;t follow the protocol version exchange correctly. According to RFC ft-ietf-secsh-transport: The Secure Shell (SSH) Transport Layer Protocol, “The identification MUST be terminated by a single Carriage Return (CR) and a single Line Feed (LF) character 2 (ASCII 13 and 10, respectively)” (content provided by Ylonen &amp; Lonvick, available at https://datatracker.ietf.org/, obtained on January 12, 2023).\r\n\r\n&gt; The client identification string SSH-2.0-JSCH-0.1.54 does not contain a CR symbol, which is mandatory according to the RFC.\r\n\r\nIt goes on to say that the only resolution (assuming you don&#39;t control the server itself) is to upgrade to the Matthias&#39; JSch fork (or switch to another library altogether).","title":"JSch - No progress after SSH_MSG_KEXINIT is sent","body":"<p>Ran into the same problem here - the key was googling the server software: &quot;SSH-2.0-Serv-U_15.3.2.155&quot;. Doing that led me to this support page from the publisher: <a href=\"https://support.solarwinds.com/SuccessCenter/s/article/SFTP-connection-not-established-for-legacy-Java-clients?language=en_US\" rel=\"nofollow noreferrer\">https://support.solarwinds.com/SuccessCenter/s/article/SFTP-connection-not-established-for-legacy-Java-clients?language=en_US</a></p>\n<p>Bottom line is that this particular server software just became more strict on clients' adherence to the RFC:</p>\n<blockquote>\n<p>The Java client doesn't follow the protocol version exchange correctly. According to RFC ft-ietf-secsh-transport: The Secure Shell (SSH) Transport Layer Protocol, “The identification MUST be terminated by a single Carriage Return (CR) and a single Line Feed (LF) character 2 (ASCII 13 and 10, respectively)” (content provided by Ylonen &amp; Lonvick, available at <a href=\"https://datatracker.ietf.org/\" rel=\"nofollow noreferrer\">https://datatracker.ietf.org/</a>, obtained on January 12, 2023).</p>\n</blockquote>\n<blockquote>\n<p>The client identification string SSH-2.0-JSCH-0.1.54 does not contain a CR symbol, which is mandatory according to the RFC.</p>\n</blockquote>\n<p>It goes on to say that the only resolution (assuming you don't control the server itself) is to upgrade to the Matthias' JSch fork (or switch to another library altogether).</p>\n"},{"tags":[],"owner":{"account_id":2742984,"reputation":963,"user_id":2364044,"accept_rate":56,"display_name":"Sean N."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689344196,"creation_date":1689344196,"answer_id":76688544,"question_id":75771589,"body_markdown":"You can download the jsch 1.55 source code and apply a fix, then build a new jar file.  The bug is in Session.java.  Search for &quot;Cisco&quot; in the code and then change the code block to this:\r\n\r\n    {\r\n        // Some Cisco devices will miss to read &#39;\\n&#39; if it is sent separately.\r\n        byte[] foo = new byte[V_C.length + 2];\r\n        System.arraycopy(V_C, 0, foo, 0, V_C.length);\r\n        foo[foo.length - 2] = (byte) &#39;\\r&#39;;\r\n        foo[foo.length - 1] = (byte) &#39;\\n&#39;;\r\n        io.put(foo, 0, foo.length);\r\n    }\r\n\r\nAs @Tyler Cunnion mentioned, jsch was not correctly sending CR + LF after identifying itself.  I&#39;ve also seen an additional fix where you change the identify string from &quot;SSH-2.0-JSCH-0.1.55&quot; to &quot;SSH-2.0-JSCH_0.1.54&quot; (underscore instead of hyphen near the end).  With these corrections, the jsch library should connect.\r\n","title":"JSch - No progress after SSH_MSG_KEXINIT is sent","body":"<p>You can download the jsch 1.55 source code and apply a fix, then build a new jar file.  The bug is in Session.java.  Search for &quot;Cisco&quot; in the code and then change the code block to this:</p>\n<pre><code>{\n    // Some Cisco devices will miss to read '\\n' if it is sent separately.\n    byte[] foo = new byte[V_C.length + 2];\n    System.arraycopy(V_C, 0, foo, 0, V_C.length);\n    foo[foo.length - 2] = (byte) '\\r';\n    foo[foo.length - 1] = (byte) '\\n';\n    io.put(foo, 0, foo.length);\n}\n</code></pre>\n<p>As @Tyler Cunnion mentioned, jsch was not correctly sending CR + LF after identifying itself.  I've also seen an additional fix where you change the identify string from &quot;SSH-2.0-JSCH-0.1.55&quot; to &quot;SSH-2.0-JSCH_0.1.54&quot; (underscore instead of hyphen near the end).  With these corrections, the jsch library should connect.</p>\n"}],"owner":{"account_id":4880671,"reputation":31,"user_id":3934553,"display_name":"Darren Mossman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":711,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1689344196,"creation_date":1679082015,"question_id":75771589,"body_markdown":"Simple Java app using JSch (0.1.55) library to connect to SFTP server.\r\nHangs at the key exchange step after SSH_MSG_KEXINIT sent. Logging below.\r\n\r\nCode fails on Windows test machine which **is** able to connect with same creds using WinSCP.\r\nSame code also fails on Linux Docker container where we originally found the problem.\r\nSame creds work fine as long as we aren&#39;t using JSch library.\r\n\r\nWe&#39;ve tried restricting to different kex settings in the config properties but none made any difference.\r\nUp until a month or so ago, we were able to connect to this server without issues, and continue to connect to others with same code.\r\n\r\nSimplified code for testing\r\n```java\r\n        JSch jsch = new JSch();\r\n        java.util.Properties config = new Properties();\r\n        config.put(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\r\n        config.put(&quot;PreferredAuthentication&quot;, &quot;password,keyboard-interactive&quot;);\r\n\r\n        try {\r\n            Session session = jsch.getSession(user, host, 22);\r\n            session.setPassword(password);\r\n            session.setConfig(config);\r\n            session.connect(30 * 1000);\r\n            session.disconnect();\r\n        } catch (Exception e) {\r\n            myLog(e.getMessage());\r\n        }\r\n```\r\n\r\nAny ideas?\r\n```\r\nFri Mar 17 15:07:12 EDT 2023 - Connecting to ****.*******.com port 22  \r\nFri Mar 17 15:07:13 EDT 2023 - Connection established  \r\nFri Mar 17 15:07:13 EDT 2023 - Remote version string: SSH-2.0-Serv-U_15.3.2.155  \r\nFri Mar 17 15:07:13 EDT 2023 - Local version string: SSH-2.0-JSCH-0.1.54  \r\nFri Mar 17 15:07:13 EDT 2023 - CheckCiphers: aes256-ctr,aes192-ctr,aes128-ctr,aes256-cbc,aes192-cbc,aes128-cbc,3des-ctr,arcfour,arcfour128,arcfour256  \r\nFri Mar 17 15:07:13 EDT 2023 - CheckKexes: diffie-hellman-group14-sha1,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521  \r\nFri Mar 17 15:07:13 EDT 2023 - CheckSignatures: ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521  \r\nFri Mar 17 15:07:13 EDT 2023 - SSH_MSG_KEXINIT sent  \r\nFri Mar 17 15:07:43 EDT 2023 - Disconnecting from ****.********.com port 22  \r\nDisconnected from the target VM, address: &#39;localhost:64978&#39;, transport: &#39;socket&#39;\r\nConnected to the target VM, address: &#39;127.0.0.1:64967&#39;, transport: &#39;socket&#39;  \r\nFri Mar 17 15:07:55 EDT 2023 - Session.connect: java.net.SocketTimeoutException: Read timed out  \r\n```","title":"JSch - No progress after SSH_MSG_KEXINIT is sent","body":"<p>Simple Java app using JSch (0.1.55) library to connect to SFTP server.\nHangs at the key exchange step after SSH_MSG_KEXINIT sent. Logging below.</p>\n<p>Code fails on Windows test machine which <strong>is</strong> able to connect with same creds using WinSCP.\nSame code also fails on Linux Docker container where we originally found the problem.\nSame creds work fine as long as we aren't using JSch library.</p>\n<p>We've tried restricting to different kex settings in the config properties but none made any difference.\nUp until a month or so ago, we were able to connect to this server without issues, and continue to connect to others with same code.</p>\n<p>Simplified code for testing</p>\n<pre class=\"lang-java prettyprint-override\"><code>        JSch jsch = new JSch();\n        java.util.Properties config = new Properties();\n        config.put(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\n        config.put(&quot;PreferredAuthentication&quot;, &quot;password,keyboard-interactive&quot;);\n\n        try {\n            Session session = jsch.getSession(user, host, 22);\n            session.setPassword(password);\n            session.setConfig(config);\n            session.connect(30 * 1000);\n            session.disconnect();\n        } catch (Exception e) {\n            myLog(e.getMessage());\n        }\n</code></pre>\n<p>Any ideas?</p>\n<pre><code>Fri Mar 17 15:07:12 EDT 2023 - Connecting to ****.*******.com port 22  \nFri Mar 17 15:07:13 EDT 2023 - Connection established  \nFri Mar 17 15:07:13 EDT 2023 - Remote version string: SSH-2.0-Serv-U_15.3.2.155  \nFri Mar 17 15:07:13 EDT 2023 - Local version string: SSH-2.0-JSCH-0.1.54  \nFri Mar 17 15:07:13 EDT 2023 - CheckCiphers: aes256-ctr,aes192-ctr,aes128-ctr,aes256-cbc,aes192-cbc,aes128-cbc,3des-ctr,arcfour,arcfour128,arcfour256  \nFri Mar 17 15:07:13 EDT 2023 - CheckKexes: diffie-hellman-group14-sha1,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521  \nFri Mar 17 15:07:13 EDT 2023 - CheckSignatures: ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521  \nFri Mar 17 15:07:13 EDT 2023 - SSH_MSG_KEXINIT sent  \nFri Mar 17 15:07:43 EDT 2023 - Disconnecting from ****.********.com port 22  \nDisconnected from the target VM, address: 'localhost:64978', transport: 'socket'\nConnected to the target VM, address: '127.0.0.1:64967', transport: 'socket'  \nFri Mar 17 15:07:55 EDT 2023 - Session.connect: java.net.SocketTimeoutException: Read timed out  \n</code></pre>\n"},{"tags":["java","android","symbols","drawable","resolve"],"comments":[{"owner":{"account_id":25311834,"reputation":73,"user_id":19134480,"display_name":"Patrick Renaud"},"score":0,"creation_date":1689357867,"post_id":76688482,"comment_id":135207419,"body_markdown":"Clean and rebuild your project: Sometimes, changes in resource files may not take effect immediately. Try cleaning your project and then rebuilding it to ensure that the updated drawable resources are properly compiled and included in the build","body":"Clean and rebuild your project: Sometimes, changes in resource files may not take effect immediately. Try cleaning your project and then rebuilding it to ensure that the updated drawable resources are properly compiled and included in the build"}],"owner":{"account_id":20613260,"reputation":11,"user_id":15131959,"display_name":"Italia"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689343724,"creation_date":1689343724,"question_id":76688482,"body_markdown":"At first i had to rename the .png file names because they were not acceptable. Now that i have renamed them and change the name on the code i still get an error that my drawable &#39;d6&#39; etc cannot be found. I have tried restarting my application and look for the issue but, I cannot seem to find the problem.\r\n\r\nIn case this is relevant:\r\n\r\n```\r\n xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    android:background=&quot;@drawable/background&quot;\r\n    android:padding=&quot;10dp&quot;\r\n    android:id=&quot;@+id/diceContainer&quot;&gt;\r\n\r\n    &lt;TextView\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:id=&quot;@+id/tvHelp&quot;\r\n        android:layout_marginLeft=&quot;10dp&quot;\r\n        android:layout_marginTop=&quot;18dp&quot;\r\n        android:layout_marginRight=&quot;10dp&quot;\r\n        android:background=&quot;@drawable/back&quot;\r\n        android:gravity=&quot;center&quot;\r\n        android:padding=&quot;5dp&quot;\r\n        android:text=&quot;Touch on the screen to start rolling.&quot;\r\n        android:textColor=&quot;#ffffff&quot;\r\n        android:textSize=&quot;18sp&quot; /&gt;\r\n\r\n    &lt;LinearLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:gravity=&quot;center&quot;\r\n        android:orientation=&quot;vertical&quot; &gt;\r\n\r\n        &lt;ImageView\r\n            android:layout_width=&quot;150dp&quot;\r\n            android:layout_height=&quot;150dp&quot;\r\n            android:id=&quot;@+id/die1&quot;\r\n            android:layout_marginBottom=&quot;15dp&quot;\r\n            android:src=&quot;@drawable/d6&quot; /&gt;\r\n        &lt;ImageView\r\n            android:layout_width=&quot;150dp&quot;\r\n            android:layout_height=&quot;150dp&quot;\r\n            android:id=&quot;@+id/die2&quot;\r\n            android:layout_marginBottom=&quot;15dp&quot;\r\n            android:src=&quot;@drawable/d6&quot; /&gt;\r\n\r\n\r\n    &lt;/LinearLayout&gt;\r\n\r\n\r\n\r\n\r\n&lt;/LinearLayout&gt;\r\n```\r\n\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    int delayTime =20;\r\n    int rollAnimations = 40;\r\n    int[] diceImages = new int[] {R.drawable.d1,R.drawable.d2,R.drawable.d3,R.drawable.d4,R.drawable.d5,R.drawable.d6};\r\n    Random random = new Random();\r\n    TextView tvHelp;\r\n    ImageView die1;\r\n    ImageView die2;\r\n    LinearLayout diceContainer;\r\n    MediaPlayer mp;\r\n```\r\n\r\nThese are also some screenshots below :\r\n\r\n[![enter image description here](https://i.stack.imgur.com/07flC.png)](https://i.stack.imgur.com/07flC.png)\r\n\r\n[![enter image description here](https://i.stack.imgur.com/gbler.png)](https://i.stack.imgur.com/gbler.png)\r\n\r\nI tried renaming the files and restarting android studio.","title":"Android Studio cannot resolve symbols","body":"<p>At first i had to rename the .png file names because they were not acceptable. Now that i have renamed them and change the name on the code i still get an error that my drawable 'd6' etc cannot be found. I have tried restarting my application and look for the issue but, I cannot seem to find the problem.</p>\n<p>In case this is relevant:</p>\n<pre><code> xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;\n    android:orientation=&quot;vertical&quot;\n    android:background=&quot;@drawable/background&quot;\n    android:padding=&quot;10dp&quot;\n    android:id=&quot;@+id/diceContainer&quot;&gt;\n\n    &lt;TextView\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:id=&quot;@+id/tvHelp&quot;\n        android:layout_marginLeft=&quot;10dp&quot;\n        android:layout_marginTop=&quot;18dp&quot;\n        android:layout_marginRight=&quot;10dp&quot;\n        android:background=&quot;@drawable/back&quot;\n        android:gravity=&quot;center&quot;\n        android:padding=&quot;5dp&quot;\n        android:text=&quot;Touch on the screen to start rolling.&quot;\n        android:textColor=&quot;#ffffff&quot;\n        android:textSize=&quot;18sp&quot; /&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:gravity=&quot;center&quot;\n        android:orientation=&quot;vertical&quot; &gt;\n\n        &lt;ImageView\n            android:layout_width=&quot;150dp&quot;\n            android:layout_height=&quot;150dp&quot;\n            android:id=&quot;@+id/die1&quot;\n            android:layout_marginBottom=&quot;15dp&quot;\n            android:src=&quot;@drawable/d6&quot; /&gt;\n        &lt;ImageView\n            android:layout_width=&quot;150dp&quot;\n            android:layout_height=&quot;150dp&quot;\n            android:id=&quot;@+id/die2&quot;\n            android:layout_marginBottom=&quot;15dp&quot;\n            android:src=&quot;@drawable/d6&quot; /&gt;\n\n\n    &lt;/LinearLayout&gt;\n\n\n\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    int delayTime =20;\n    int rollAnimations = 40;\n    int[] diceImages = new int[] {R.drawable.d1,R.drawable.d2,R.drawable.d3,R.drawable.d4,R.drawable.d5,R.drawable.d6};\n    Random random = new Random();\n    TextView tvHelp;\n    ImageView die1;\n    ImageView die2;\n    LinearLayout diceContainer;\n    MediaPlayer mp;\n</code></pre>\n<p>These are also some screenshots below :</p>\n<p><a href=\"https://i.stack.imgur.com/07flC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/07flC.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/gbler.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gbler.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried renaming the files and restarting android studio.</p>\n"},{"tags":["java","maven","spring-mvc","solr"],"comments":[{"owner":{"account_id":10004293,"reputation":2540,"user_id":7399631,"display_name":"bkis"},"score":1,"creation_date":1557910476,"post_id":56145038,"comment_id":98920341,"body_markdown":"I suggest adding the `solr` tag to this question, so the Solr experts will find it. This is less about `maven` or `spring-mvc` than it is about `solr`.","body":"I suggest adding the <code>solr</code> tag to this question, so the Solr experts will find it. This is less about <code>maven</code> or <code>spring-mvc</code> than it is about <code>solr</code>."}],"answers":[{"tags":[],"owner":{"account_id":46578,"reputation":50301,"user_id":137650,"display_name":"MatsLindh"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1557922292,"creation_date":1557922292,"answer_id":56149080,"question_id":56145038,"body_markdown":"Unless `title` actually is multiValued - can your post have multiple titles - you should [define it as `multiValued=&quot;false&quot;` in your schema](https://lucene.apache.org/solr/guide/6_6/defining-fields.html#DefiningFields-OptionalFieldTypeOverrideProperties). However, there&#39;s a second issue - a field of the default type `text_general` isn&#39;t suited for sorting, as it&#39;ll generate multiple tokens, one for each word in the title. This is useful for searching, but will give weird and non-intuitive results when sorting.\r\n\r\nSo instead, define a `title_sort` field and [use a field type with a `KeywordTokenizer`](https://lucene.apache.org/solr/guide/6_6/tokenizers.html#Tokenizers-KeywordTokenizer) and [`LowerCaseFilter` attached](https://lucene.apache.org/solr/guide/6_6/filter-descriptions.html#FilterDescriptions-LowerCaseFilter) (if you want case insensitive sort), or if you want case sensitive sort, use the already defined `string` field type for the `title_sort` field.\r\n","title":"Sort the search result in ascending order of a multivalued field in Solr","body":"<p>Unless <code>title</code> actually is multiValued - can your post have multiple titles - you should <a href=\"https://lucene.apache.org/solr/guide/6_6/defining-fields.html#DefiningFields-OptionalFieldTypeOverrideProperties\" rel=\"nofollow noreferrer\">define it as <code>multiValued=\"false\"</code> in your schema</a>. However, there's a second issue - a field of the default type <code>text_general</code> isn't suited for sorting, as it'll generate multiple tokens, one for each word in the title. This is useful for searching, but will give weird and non-intuitive results when sorting.</p>\n\n<p>So instead, define a <code>title_sort</code> field and <a href=\"https://lucene.apache.org/solr/guide/6_6/tokenizers.html#Tokenizers-KeywordTokenizer\" rel=\"nofollow noreferrer\">use a field type with a <code>KeywordTokenizer</code></a> and <a href=\"https://lucene.apache.org/solr/guide/6_6/filter-descriptions.html#FilterDescriptions-LowerCaseFilter\" rel=\"nofollow noreferrer\"><code>LowerCaseFilter</code> attached</a> (if you want case insensitive sort), or if you want case sensitive sort, use the already defined <code>string</code> field type for the <code>title_sort</code> field.</p>\n"},{"tags":[],"owner":{"account_id":2979716,"reputation":12923,"user_id":2529954,"display_name":"EricLavault"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689343719,"creation_date":1557925802,"answer_id":56150208,"question_id":56145038,"body_markdown":"The first thing to check is do you really need that title field to be multivalued, or do your documents really have multiple titles ? If not, you just need to fix the field definition by setting `multivalued=&quot;false&quot;`. \r\n\r\nThat said, sorting on a multivalued field doesn&#39;t make sense unless determining which one of these multiple values should be used to sort on, or how to combine them into one. \r\n\r\nLet&#39; say we need to sort a given resultset by title (alphabetically), first using a single-valued title field :\r\n\r\n    # Unsorted\r\n    &quot;docs&quot;: [\r\n      { &quot;id&quot;: &quot;1&quot;, &quot;title&quot;: &quot;One&quot; },\r\n      { &quot;id&quot;: &quot;2&quot;, &quot;title&quot;: &quot;Two&quot; },\r\n      { &quot;id&quot;: &quot;3&quot;, &quot;title&quot;: &quot;Three&quot; },\r\n    ]\r\n\r\n    # Sorted\r\n    &quot;docs&quot;: [\r\n      { &quot;id&quot;: &quot;1&quot;, &quot;title&quot;: &quot;One&quot; },\r\n      { &quot;id&quot;: &quot;3&quot;, &quot;title&quot;: &quot;Three&quot; },\r\n      { &quot;id&quot;: &quot;2&quot;, &quot;title&quot;: &quot;Two&quot; },\r\n    ]\r\n\r\n    # -&gt; ok no problem here\r\n\r\nNow applying the same logic with a multi-valued field is not possible as is, you would necessarily need to determine which title to use in each document to properly sort them : \r\n\r\n    # Unorted\r\n    &quot;docs&quot;: [\r\n      { &quot;id&quot;: &quot;1&quot;, &quot;title&quot;: [&quot;One&quot;, &quot;z-One&quot;, &quot;a-One&quot;] },\r\n      { &quot;id&quot;: &quot;2&quot;, &quot;title&quot;: [&quot;Two&quot;, &quot;z-Two&quot;, &quot;a-Two&quot;] },\r\n      { &quot;id&quot;: &quot;3&quot;, &quot;title&quot;: [&quot;Three&quot;, &quot;z-Three&quot;, &quot;a-Three&quot;] }\r\n    ]\r\n\r\nFortunately, Solr allows to sort results by the output of a function, meaning you can use any from Solr&#39;s [function queries][1] to &quot;get&quot; a single value per title field. The answer you referred to is a good example even though it may not work for you (because title would need docValues enabled - depends on field definition - and knowing that max/min functions should be used only with numeric values), just to get the idea :\r\n\r\n    # here the 2nd argument is a callback to max(), used precisely to get a single value from title\r\n    sort=field(title,max) asc\r\n\r\n\r\n\r\n  [1]: https://lucene.apache.org/solr/guide/6_6/function-queries.html\r\n","title":"Sort the search result in ascending order of a multivalued field in Solr","body":"<p>The first thing to check is do you really need that title field to be multivalued, or do your documents really have multiple titles ? If not, you just need to fix the field definition by setting <code>multivalued=&quot;false&quot;</code>.</p>\n<p>That said, sorting on a multivalued field doesn't make sense unless determining which one of these multiple values should be used to sort on, or how to combine them into one.</p>\n<p>Let' say we need to sort a given resultset by title (alphabetically), first using a single-valued title field :</p>\n<pre><code># Unsorted\n&quot;docs&quot;: [\n  { &quot;id&quot;: &quot;1&quot;, &quot;title&quot;: &quot;One&quot; },\n  { &quot;id&quot;: &quot;2&quot;, &quot;title&quot;: &quot;Two&quot; },\n  { &quot;id&quot;: &quot;3&quot;, &quot;title&quot;: &quot;Three&quot; },\n]\n\n# Sorted\n&quot;docs&quot;: [\n  { &quot;id&quot;: &quot;1&quot;, &quot;title&quot;: &quot;One&quot; },\n  { &quot;id&quot;: &quot;3&quot;, &quot;title&quot;: &quot;Three&quot; },\n  { &quot;id&quot;: &quot;2&quot;, &quot;title&quot;: &quot;Two&quot; },\n]\n\n# -&gt; ok no problem here\n</code></pre>\n<p>Now applying the same logic with a multi-valued field is not possible as is, you would necessarily need to determine which title to use in each document to properly sort them :</p>\n<pre><code># Unorted\n&quot;docs&quot;: [\n  { &quot;id&quot;: &quot;1&quot;, &quot;title&quot;: [&quot;One&quot;, &quot;z-One&quot;, &quot;a-One&quot;] },\n  { &quot;id&quot;: &quot;2&quot;, &quot;title&quot;: [&quot;Two&quot;, &quot;z-Two&quot;, &quot;a-Two&quot;] },\n  { &quot;id&quot;: &quot;3&quot;, &quot;title&quot;: [&quot;Three&quot;, &quot;z-Three&quot;, &quot;a-Three&quot;] }\n]\n</code></pre>\n<p>Fortunately, Solr allows to sort results by the output of a function, meaning you can use any from Solr's <a href=\"https://lucene.apache.org/solr/guide/6_6/function-queries.html\" rel=\"nofollow noreferrer\">function queries</a> to &quot;get&quot; a single value per title field. The answer you referred to is a good example even though it may not work for you (because title would need docValues enabled - depends on field definition - and knowing that max/min functions should be used only with numeric values), just to get the idea :</p>\n<pre><code># here the 2nd argument is a callback to max(), used precisely to get a single value from title\nsort=field(title,max) asc\n</code></pre>\n"}],"owner":{"account_id":11886582,"reputation":179,"user_id":8698775,"display_name":"Sonu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2587,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":56149080,"answer_count":2,"score":2,"last_activity_date":1689343719,"creation_date":1557909818,"question_id":56145038,"body_markdown":"I&#39;m using Solr of `version 6.6.0`. I have a schema of title (text_general), description(text_general), id(integer). When I search for a keyword to list the results in ascending order of the title my code returns an error **can not sort on multivalued field: title.** \r\n\r\n\r\nI have tried to set the sort using the following 3 methods\r\n\r\n    SolrQuery query = new SolrQuery();\r\n    1. query.setSort(&quot;title&quot;, SolrQuery.ORDER order);\r\n    2. query.addSort(&quot;title&quot;, SolrQuery.ORDER order);\r\n    3. SortClause ab = new SolrQuery.SortClause(&quot;title&quot;, SolrQuery.ORDER.asc);\r\n       query.addSort(ab);\r\n\r\nbut all of these returns the same error\r\n\r\nI found a solution by referring to this [answer][1]\r\n\r\n\r\nIt says to use min/max functions. \r\nquery.setSort(field(&quot;pageTitle&quot;,min), ORDER.asc);\r\nthis what I&#39;m trying to set as the query, I didn&#39;t understand what are the arguments used here.\r\n\r\nThis is the maven dependency that I&#39;m using \r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.apache.solr&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;solr-solrj&lt;/artifactId&gt;\r\n    \t&lt;version&gt;6.5.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/54091121/sort-the-solr-search-result-give-error-can-not-sort-on-multivalued-field-name","title":"Sort the search result in ascending order of a multivalued field in Solr","body":"<p>I'm using Solr of <code>version 6.6.0</code>. I have a schema of title (text_general), description(text_general), id(integer). When I search for a keyword to list the results in ascending order of the title my code returns an error <strong>can not sort on multivalued field: title.</strong> </p>\n\n<p>I have tried to set the sort using the following 3 methods</p>\n\n<pre><code>SolrQuery query = new SolrQuery();\n1. query.setSort(\"title\", SolrQuery.ORDER order);\n2. query.addSort(\"title\", SolrQuery.ORDER order);\n3. SortClause ab = new SolrQuery.SortClause(\"title\", SolrQuery.ORDER.asc);\n   query.addSort(ab);\n</code></pre>\n\n<p>but all of these returns the same error</p>\n\n<p>I found a solution by referring to this <a href=\"https://stackoverflow.com/questions/54091121/sort-the-solr-search-result-give-error-can-not-sort-on-multivalued-field-name\">answer</a></p>\n\n<p>It says to use min/max functions. \nquery.setSort(field(\"pageTitle\",min), ORDER.asc);\nthis what I'm trying to set as the query, I didn't understand what are the arguments used here.</p>\n\n<p>This is the maven dependency that I'm using </p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.solr&lt;/groupId&gt;\n    &lt;artifactId&gt;solr-solrj&lt;/artifactId&gt;\n    &lt;version&gt;6.5.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","json","spring-boot"],"comments":[{"owner":{"account_id":11653603,"reputation":2210,"user_id":8534088,"display_name":"Dmitriy Popov"},"score":4,"creation_date":1689342277,"post_id":76688214,"comment_id":135203976,"body_markdown":"Use a Jackson library to de-serialize from a String to a Java object.","body":"Use a Jackson library to de-serialize from a String to a Java object."},{"owner":{"account_id":10209378,"reputation":369,"user_id":7537048,"display_name":"Vaclav Stengl"},"score":1,"creation_date":1689342858,"post_id":76688214,"comment_id":135204108,"body_markdown":"Possible tutorial for jackson library. https://www.baeldung.com/jackson-object-mapper-tutorial","body":"Possible tutorial for jackson library. <a href=\"https://www.baeldung.com/jackson-object-mapper-tutorial\" rel=\"nofollow noreferrer\">baeldung.com/jackson-object-mapper-tutorial</a>"}],"answers":[{"tags":[],"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689342078,"creation_date":1689342078,"answer_id":76688245,"question_id":76688214,"body_markdown":"If you&#39;re using Spring Boot, you have Jackson lib included by default, so you may read your object like this:\r\n```java\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\n\r\n// ...\r\n\r\nString json = &quot;{ \\&quot;currency\\&quot;: \\&quot;BRL\\&quot;, \\&quot;buyRate\\&quot;: 4.18390000, \\&quot;midRate\\&quot;: 4.18390000, \\&quot;sellRate\\&quot;: 4.18390000, \\&quot;conversionType\\&quot;: \\&quot;D\\&quot; }&quot;;\r\n\r\nObjectMapper mapper = new ObjectMapper();\r\n\r\nRate rate = null;\r\ntry {\r\n    rate = mapper.readValue(json, Rate.class);\r\n} catch (IOException e) {\r\n    e.printStackTrace();\r\n}\r\n\r\n// ...\r\n```","title":"Create the instance in Java from a json buffer","body":"<p>If you're using Spring Boot, you have Jackson lib included by default, so you may read your object like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.fasterxml.jackson.databind.ObjectMapper;\n\n// ...\n\nString json = &quot;{ \\&quot;currency\\&quot;: \\&quot;BRL\\&quot;, \\&quot;buyRate\\&quot;: 4.18390000, \\&quot;midRate\\&quot;: 4.18390000, \\&quot;sellRate\\&quot;: 4.18390000, \\&quot;conversionType\\&quot;: \\&quot;D\\&quot; }&quot;;\n\nObjectMapper mapper = new ObjectMapper();\n\nRate rate = null;\ntry {\n    rate = mapper.readValue(json, Rate.class);\n} catch (IOException e) {\n    e.printStackTrace();\n}\n\n// ...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14763186,"reputation":101,"user_id":10661933,"display_name":"PawMaw"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689342517,"creation_date":1689342414,"answer_id":76688289,"question_id":76688214,"body_markdown":"Maybe you could try something like that:\r\n\r\n`import com.google.gson.Gson;`\r\n\r\n`Rate rate = new Gson().fromJson(json, Rate.class);`\r\n\r\nWhere `Rate` is your class, and `json` is your json string.","title":"Create the instance in Java from a json buffer","body":"<p>Maybe you could try something like that:</p>\n<p><code>import com.google.gson.Gson;</code></p>\n<p><code>Rate rate = new Gson().fromJson(json, Rate.class);</code></p>\n<p>Where <code>Rate</code> is your class, and <code>json</code> is your json string.</p>\n"},{"tags":[],"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689343673,"creation_date":1689343673,"answer_id":76688471,"question_id":76688214,"body_markdown":"As others have suggested, use Jackson:\r\n\r\n```java\r\nimport java.io.IOException;\r\nimport java.math.BigDecimal;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport lombok.Data;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\n\r\npublic class JacksonExample {\r\n    private static final Logger log = LoggerFactory.getLogger(JacksonExample.class);\r\n    private static ObjectMapper mapper = new ObjectMapper();\r\n    private static String jsonData = &quot;{ \\&quot;currency\\&quot;: \\&quot;BRL\\&quot;, \\&quot;buyRate\\&quot;: 4.18390000, \\&quot;midRate\\&quot;: 4.18390000, \\&quot;sellRate\\&quot;: 4.18390000, \\&quot;conversionType\\&quot;: \\&quot;D\\&quot; }&quot;;\r\n\r\n    public static void main(String[] args) {\r\n        Rate rate = parseRateData(jsonData);\r\n        System.out.println(rate); // JacksonExample.Rate(currency=BRL, conversionType=D, buyRate=4.18390000, midRate=4.18390000, sellRate=4.18390000)\r\n    }\r\n\r\n    public static Rate parseRateData(String rateData) {\r\n        return parseJsonData(rateData, Rate.class);\r\n    }\r\n\r\n    public static &lt;E&gt; E parseJsonData(String jsonData, Class&lt;E&gt; clazz) {\r\n        try {\r\n            return mapper.readValue(jsonData, clazz);\r\n        } catch (IOException e) {\r\n            log.error(String.format(&quot;Could not parse: %s&quot;, jsonData), e);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    @Data\r\n    public static class Rate {\r\n        private String currency, conversionType;\r\n        private BigDecimal buyRate, midRate, sellRate;\r\n    }\r\n}\r\n```\r\n\r\n```xml\r\n&lt;dependencies&gt;\r\n  &lt;!-- DTOs --&gt;\r\n  &lt;dependency&gt;\r\n    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    &lt;version&gt;${lombok.version}&lt;/version&gt;\r\n    &lt;scope&gt;provided&lt;/scope&gt;\r\n  &lt;/dependency&gt;\r\n  &lt;!-- Deserialization --&gt;\r\n  &lt;dependency&gt;\r\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n    &lt;version&gt;${jackson.version}&lt;/version&gt;\r\n  &lt;/dependency&gt;\r\n  &lt;!-- Logging --&gt;\r\n  &lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n    &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n    &lt;version&gt;${log4j.version}&lt;/version&gt;\r\n  &lt;/dependency&gt;\r\n  &lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n    &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n    &lt;version&gt;${log4j.version}&lt;/version&gt;\r\n  &lt;/dependency&gt;\r\n  &lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n    &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\r\n    &lt;version&gt;${log4j.version}&lt;/version&gt;\r\n  &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```","title":"Create the instance in Java from a json buffer","body":"<p>As others have suggested, use Jackson:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.IOException;\nimport java.math.BigDecimal;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport lombok.Data;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\npublic class JacksonExample {\n    private static final Logger log = LoggerFactory.getLogger(JacksonExample.class);\n    private static ObjectMapper mapper = new ObjectMapper();\n    private static String jsonData = &quot;{ \\&quot;currency\\&quot;: \\&quot;BRL\\&quot;, \\&quot;buyRate\\&quot;: 4.18390000, \\&quot;midRate\\&quot;: 4.18390000, \\&quot;sellRate\\&quot;: 4.18390000, \\&quot;conversionType\\&quot;: \\&quot;D\\&quot; }&quot;;\n\n    public static void main(String[] args) {\n        Rate rate = parseRateData(jsonData);\n        System.out.println(rate); // JacksonExample.Rate(currency=BRL, conversionType=D, buyRate=4.18390000, midRate=4.18390000, sellRate=4.18390000)\n    }\n\n    public static Rate parseRateData(String rateData) {\n        return parseJsonData(rateData, Rate.class);\n    }\n\n    public static &lt;E&gt; E parseJsonData(String jsonData, Class&lt;E&gt; clazz) {\n        try {\n            return mapper.readValue(jsonData, clazz);\n        } catch (IOException e) {\n            log.error(String.format(&quot;Could not parse: %s&quot;, jsonData), e);\n        }\n        return null;\n    }\n\n    @Data\n    public static class Rate {\n        private String currency, conversionType;\n        private BigDecimal buyRate, midRate, sellRate;\n    }\n}\n</code></pre>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencies&gt;\n  &lt;!-- DTOs --&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n    &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n    &lt;version&gt;${lombok.version}&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n  &lt;/dependency&gt;\n  &lt;!-- Deserialization --&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n    &lt;version&gt;${jackson.version}&lt;/version&gt;\n  &lt;/dependency&gt;\n  &lt;!-- Logging --&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n    &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n    &lt;version&gt;${log4j.version}&lt;/version&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n    &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n    &lt;version&gt;${log4j.version}&lt;/version&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n    &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\n    &lt;version&gt;${log4j.version}&lt;/version&gt;\n  &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n"}],"owner":{"account_id":28141109,"reputation":9,"user_id":21504146,"display_name":"Grafana Next"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76688471,"answer_count":3,"score":0,"last_activity_date":1689343673,"creation_date":1689341814,"question_id":76688214,"body_markdown":"I have a JSON (stored in a string, file etc) and I want to read it and create the \r\njava instance. \r\n\r\nFor example for this class\r\n\r\n```\r\n@Data\r\npublic class Rate {\r\n\r\n    private String currency;\r\n    private BigDecimal buyRate;\r\n    private BigDecimal midRate;\r\n    private BigDecimal sellRate;\r\n    private String conversionType;\r\n\r\n}\r\n```\r\n\r\nI have this buffer in a String\r\n\r\n```\r\n{\r\n  &quot;currency&quot;: &quot;BRL&quot;,\r\n  &quot;buyRate&quot;: 4.18390000,\r\n  &quot;midRate&quot;: 4.18390000,\r\n  &quot;sellRate&quot;: 4.18390000,\r\n  &quot;conversionType&quot;: &quot;D&quot;\r\n}\r\n```\r\n\r\nhow can I create the object instance from the string buffer?\r\n\r\n","title":"Create the instance in Java from a json buffer","body":"<p>I have a JSON (stored in a string, file etc) and I want to read it and create the\njava instance.</p>\n<p>For example for this class</p>\n<pre><code>@Data\npublic class Rate {\n\n    private String currency;\n    private BigDecimal buyRate;\n    private BigDecimal midRate;\n    private BigDecimal sellRate;\n    private String conversionType;\n\n}\n</code></pre>\n<p>I have this buffer in a String</p>\n<pre><code>{\n  &quot;currency&quot;: &quot;BRL&quot;,\n  &quot;buyRate&quot;: 4.18390000,\n  &quot;midRate&quot;: 4.18390000,\n  &quot;sellRate&quot;: 4.18390000,\n  &quot;conversionType&quot;: &quot;D&quot;\n}\n</code></pre>\n<p>how can I create the object instance from the string buffer?</p>\n"},{"tags":["java","spring","dto","mapstruct"],"comments":[{"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"score":0,"creation_date":1690449896,"post_id":76688417,"comment_id":135356554,"body_markdown":"BTW: by updating existing bean instances, you don&#39;t need to return the Account. You should use: https://mapstruct.org/documentation/stable/reference/html/#updating-bean-instances","body":"BTW: by updating existing bean instances, you don&#39;t need to return the Account. You should use: <a href=\"https://mapstruct.org/documentation/stable/reference/html/#updating-bean-instances\" rel=\"nofollow noreferrer\">mapstruct.org/documentation/stable/reference/html/&hellip;</a>"},{"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"score":0,"creation_date":1690449986,"post_id":76688417,"comment_id":135356576,"body_markdown":"then you can have control over null properties on update mapping method: https://mapstruct.org/documentation/stable/reference/html/#mapping-result-for-null-properties","body":"then you can have control over null properties on update mapping method: <a href=\"https://mapstruct.org/documentation/stable/reference/html/#mapping-result-for-null-properties\" rel=\"nofollow noreferrer\">mapstruct.org/documentation/stable/reference/html/&hellip;</a>"}],"owner":{"account_id":1447743,"reputation":2678,"user_id":1379730,"accept_rate":52,"display_name":"Jason"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689343421,"creation_date":1689343333,"question_id":76688417,"body_markdown":"I have the following DTO:\r\n\r\n```java\r\npublic class AccountDto {\r\n  private Long id;\r\n  private BigDecimal balance;\r\n  private Currency currency;\r\n}\r\n```\r\n\r\nand its corresponding entity:\r\n\r\n```java\r\npublic class Account {\r\n\r\n  @Id\r\n  @Column(name = &quot;id&quot;)\r\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n  private Long id;\r\n\r\n  @Column(name = &quot;balance&quot;, scale = 2)\r\n  private BigDecimal balance;\r\n\r\n  @Column(name = &quot;currency&quot;)\r\n  @Enumerated(EnumType.STRING)\r\n  private Currency currency;\r\n\r\n  @Column(name = &quot;created_at&quot;)\r\n  @DateTimeFormat(iso = DateTimeFormat.ISO.DATE)\r\n  @Builder.Default\r\n  private Date createdAt = new Date();\r\n  \r\n  .\r\n  .\r\n  .\r\n}\r\n```\r\n\r\n`Currency` is an `enum` of my own with maybe 300 currency symbols:\r\n\r\n```java\r\npublic enum Currency {\r\n  AFN,\r\n  EUR,\r\n  ALL,\r\n  DZD,\r\n  USD,\r\n  AOA,\r\n  XCD,\r\n  NUC,\r\n  .\r\n  .\r\n  .\r\n}\r\n```\r\n\r\nI also have a utility called `CurrencyLedger` which has a method called `convertAmountToTargetCurrency` for converting a certain amount of money from one currency to another. Its implementation is not important for this question; just that it exists. \r\n\r\nHere&#39;s my problem. I want to use `MapStruct` to implement `PATCH` logic for mapping fields from an `AccountDto` dto to an `Account` entity. `id` and `currency` can be straightforwardly mapped, ***but I want to avoid mapping them if they are `null`***. `balance`, on the other hand, needs a bit of since, if the `currency` is supplied by the dto, is different from the entity&#39;s and we DON&#39;T supply a new `balance`, then the entity&#39;s existing `balance` needs to be adjusted through the method I mentioned above.\r\n\r\nTo achieve all this, I followed the advice from [here](https://www.baeldung.com/mapstruct) in section 5.2 to inject my `CurrencyLedger` class into an `abstract` class:\r\n\r\n```java\r\n@Mapper(componentModel = &quot;spring&quot;)\r\n@Component\r\npublic abstract class UpdateMapper {\r\n\r\n    @Autowired\r\n    protected CurrencyLedger currencyLedger;\r\n\r\n    @Mapping(target = &quot;balance&quot;, expression = &quot;java(updateBalanceIfNecessary(entity.getCurrency(), dto.getCurrency(), &quot; +\r\n            &quot;entity.getBalance(), dto.getBalance()))&quot;)\r\n    @Mapping(target = &quot;id&quot;, source = &quot;dto.id&quot;, defaultExpression = &quot;java(entity.getId())&quot;)\r\n    @Mapping(target = &quot;currency&quot;, source = &quot;dto.currency&quot;, defaultExpression = &quot;java(entity.getCurrency())&quot;)\r\n    public abstract Account updateEntityFromDto(AccountDto dto, Account entity);\r\n    \r\n    protected BigDecimal updateBalanceIfNecessary(Currency entityCurrency, Currency dtoCurrency, BigDecimal entityBalance,\r\n                                                  BigDecimal dtoBalance){\r\n        // If the dto provides a balance, just use it and be done with it.\r\n        if(dtoBalance != null){ \r\n            return dtoBalance;\r\n        }\r\n        // Otherwise, if the dto provides a currency that is different from the entity&#39;s, perform the appropriate conversion.\r\n        if(dtoCurrency != null &amp;&amp; dtoCurrency != entityCurrency){\r\n            return currencyLedger.convertAmountToTargetCurrency(entityCurrency, dtoCurrency, entityBalance);\r\n        }\r\n        // Finally, if the dto either does not provide a currency or provides the same currency, return the entity&#39;s balance.\r\n        return entityBalance;\r\n    }\r\n}\r\n```\r\n\r\nand, as you can see, I am calling the method `updateBalanceIfNecessary()` when the `target` is the `balance` field. On the other hand, for the fields `id` and `currency`, I have a `defaultExpression` of whatever the entity gives me, following the advice of [the same Baeldung article](https://www.baeldung.com/mapstruct), section 12. Effectively, if the `dto`&#39;s corresponding `id` or `currency` are `null`, copy over the entity&#39;s field.\r\n\r\nBut this is effectively reproducing the problem for which we are using `MapStruct` in the first place. What if my classes had 100 fields? Would I add 100 `@Mapping` annotations? \r\n\r\nI also tried annotating the method `updateEntityFromDto` by using `@BeanMapping` instead of the two extra `@Mapping` annotations, hoping that it would take care of all the fields except for `balance`:\r\n\r\n```java\r\n @Mapping(target = &quot;balance&quot;, expression = &quot;java(updateBalanceIfNecessary(entity.getCurrency(), dto.getCurrency(), &quot; +\r\n            &quot;entity.getBalance(), dto.getBalance()))&quot;)\r\n    @BeanMapping(nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE)\r\n    public abstract Account updateEntityFromDto(AccountDto dto, Account entity);\r\n```\r\nbut in that case I get a compile-time message telling me that I haven&#39;t taken care of the `currency` and `id` fields:\r\n\r\n[![Several different source properties for fields message.][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/woWgR.png\r\n\r\nSo effectively, what I want is special logic for the `balance` field and default `null`-ignoring logic for _all_ the other fields of my class. I don&#39;t want to have to write one `@Mapping` annotation per field that I simply want copied; that&#39;s what we want to use a solution like `MapStruct` in the first place. How could this be achieved?","title":"Combining basic mapping with custom logic","body":"<p>I have the following DTO:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class AccountDto {\n  private Long id;\n  private BigDecimal balance;\n  private Currency currency;\n}\n</code></pre>\n<p>and its corresponding entity:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Account {\n\n  @Id\n  @Column(name = &quot;id&quot;)\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  private Long id;\n\n  @Column(name = &quot;balance&quot;, scale = 2)\n  private BigDecimal balance;\n\n  @Column(name = &quot;currency&quot;)\n  @Enumerated(EnumType.STRING)\n  private Currency currency;\n\n  @Column(name = &quot;created_at&quot;)\n  @DateTimeFormat(iso = DateTimeFormat.ISO.DATE)\n  @Builder.Default\n  private Date createdAt = new Date();\n  \n  .\n  .\n  .\n}\n</code></pre>\n<p><code>Currency</code> is an <code>enum</code> of my own with maybe 300 currency symbols:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public enum Currency {\n  AFN,\n  EUR,\n  ALL,\n  DZD,\n  USD,\n  AOA,\n  XCD,\n  NUC,\n  .\n  .\n  .\n}\n</code></pre>\n<p>I also have a utility called <code>CurrencyLedger</code> which has a method called <code>convertAmountToTargetCurrency</code> for converting a certain amount of money from one currency to another. Its implementation is not important for this question; just that it exists.</p>\n<p>Here's my problem. I want to use <code>MapStruct</code> to implement <code>PATCH</code> logic for mapping fields from an <code>AccountDto</code> dto to an <code>Account</code> entity. <code>id</code> and <code>currency</code> can be straightforwardly mapped, <em><strong>but I want to avoid mapping them if they are <code>null</code></strong></em>. <code>balance</code>, on the other hand, needs a bit of since, if the <code>currency</code> is supplied by the dto, is different from the entity's and we DON'T supply a new <code>balance</code>, then the entity's existing <code>balance</code> needs to be adjusted through the method I mentioned above.</p>\n<p>To achieve all this, I followed the advice from <a href=\"https://www.baeldung.com/mapstruct\" rel=\"nofollow noreferrer\">here</a> in section 5.2 to inject my <code>CurrencyLedger</code> class into an <code>abstract</code> class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapper(componentModel = &quot;spring&quot;)\n@Component\npublic abstract class UpdateMapper {\n\n    @Autowired\n    protected CurrencyLedger currencyLedger;\n\n    @Mapping(target = &quot;balance&quot;, expression = &quot;java(updateBalanceIfNecessary(entity.getCurrency(), dto.getCurrency(), &quot; +\n            &quot;entity.getBalance(), dto.getBalance()))&quot;)\n    @Mapping(target = &quot;id&quot;, source = &quot;dto.id&quot;, defaultExpression = &quot;java(entity.getId())&quot;)\n    @Mapping(target = &quot;currency&quot;, source = &quot;dto.currency&quot;, defaultExpression = &quot;java(entity.getCurrency())&quot;)\n    public abstract Account updateEntityFromDto(AccountDto dto, Account entity);\n    \n    protected BigDecimal updateBalanceIfNecessary(Currency entityCurrency, Currency dtoCurrency, BigDecimal entityBalance,\n                                                  BigDecimal dtoBalance){\n        // If the dto provides a balance, just use it and be done with it.\n        if(dtoBalance != null){ \n            return dtoBalance;\n        }\n        // Otherwise, if the dto provides a currency that is different from the entity's, perform the appropriate conversion.\n        if(dtoCurrency != null &amp;&amp; dtoCurrency != entityCurrency){\n            return currencyLedger.convertAmountToTargetCurrency(entityCurrency, dtoCurrency, entityBalance);\n        }\n        // Finally, if the dto either does not provide a currency or provides the same currency, return the entity's balance.\n        return entityBalance;\n    }\n}\n</code></pre>\n<p>and, as you can see, I am calling the method <code>updateBalanceIfNecessary()</code> when the <code>target</code> is the <code>balance</code> field. On the other hand, for the fields <code>id</code> and <code>currency</code>, I have a <code>defaultExpression</code> of whatever the entity gives me, following the advice of <a href=\"https://www.baeldung.com/mapstruct\" rel=\"nofollow noreferrer\">the same Baeldung article</a>, section 12. Effectively, if the <code>dto</code>'s corresponding <code>id</code> or <code>currency</code> are <code>null</code>, copy over the entity's field.</p>\n<p>But this is effectively reproducing the problem for which we are using <code>MapStruct</code> in the first place. What if my classes had 100 fields? Would I add 100 <code>@Mapping</code> annotations?</p>\n<p>I also tried annotating the method <code>updateEntityFromDto</code> by using <code>@BeanMapping</code> instead of the two extra <code>@Mapping</code> annotations, hoping that it would take care of all the fields except for <code>balance</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code> @Mapping(target = &quot;balance&quot;, expression = &quot;java(updateBalanceIfNecessary(entity.getCurrency(), dto.getCurrency(), &quot; +\n            &quot;entity.getBalance(), dto.getBalance()))&quot;)\n    @BeanMapping(nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE)\n    public abstract Account updateEntityFromDto(AccountDto dto, Account entity);\n</code></pre>\n<p>but in that case I get a compile-time message telling me that I haven't taken care of the <code>currency</code> and <code>id</code> fields:</p>\n<p><a href=\"https://i.stack.imgur.com/woWgR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/woWgR.png\" alt=\"Several different source properties for fields message.\" /></a></p>\n<p>So effectively, what I want is special logic for the <code>balance</code> field and default <code>null</code>-ignoring logic for <em>all</em> the other fields of my class. I don't want to have to write one <code>@Mapping</code> annotation per field that I simply want copied; that's what we want to use a solution like <code>MapStruct</code> in the first place. How could this be achieved?</p>\n"},{"tags":["java","concurrency","java-memory-model"],"comments":[{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":2,"creation_date":1364372207,"post_id":15654276,"comment_id":22215276,"body_markdown":"Why don&#39;t you hit the [Java Language Specification?](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.2)","body":"Why don&#39;t you hit the <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.2\" rel=\"nofollow noreferrer\">Java Language Specification?</a>"},{"owner":{"account_id":2435146,"reputation":2837,"user_id":2125241,"display_name":"Andrew Bissell"},"score":1,"creation_date":1364375421,"post_id":15654276,"comment_id":22216610,"body_markdown":"I highly recommend picking up a copy of Java Concurrency in Practice by Goetz et al. Although it&#39;s starting to show its age a little it is still something of a gold standard for concurrent programming references. You may also find this GoogleTalk by Jeremy Manson (who co-authored the memory model itself) to be helpful: http://www.youtube.com/watch?v=WTVooKLLVT8","body":"I highly recommend picking up a copy of Java Concurrency in Practice by Goetz et al. Although it&#39;s starting to show its age a little it is still something of a gold standard for concurrent programming references. You may also find this GoogleTalk by Jeremy Manson (who co-authored the memory model itself) to be helpful: <a href=\"http://www.youtube.com/watch?v=WTVooKLLVT8\" rel=\"nofollow noreferrer\">youtube.com/watch?v=WTVooKLLVT8</a>"},{"owner":{"account_id":163842,"reputation":2264,"user_id":1625487,"accept_rate":78,"display_name":"Abs"},"score":0,"creation_date":1364400339,"post_id":15654276,"comment_id":22231129,"body_markdown":"@Andrew: Actually, I did see Jeremy Manson&#39;s video and that&#39;s why I was curious to learn more about the memory model. Looking at the example in his blog [here](http://jeremymanson.blogspot.com/2007/05/roach-motels-and-java-memory-model.html) it appears to me that his example actually violates the program order rule as he moves around the variables x and y around other monitor locks and variable accesses. Why isn&#39;t this rule being violated? If he&#39;s right, what am I missing? He also briefly talks about the roach-motel concept in his video, so I&#39;m sure he&#39;s right.","body":"@Andrew: Actually, I did see Jeremy Manson&#39;s video and that&#39;s why I was curious to learn more about the memory model. Looking at the example in his blog <a href=\"http://jeremymanson.blogspot.com/2007/05/roach-motels-and-java-memory-model.html\" rel=\"nofollow noreferrer\">here</a> it appears to me that his example actually violates the program order rule as he moves around the variables x and y around other monitor locks and variable accesses. Why isn&#39;t this rule being violated? If he&#39;s right, what am I missing? He also briefly talks about the roach-motel concept in his video, so I&#39;m sure he&#39;s right."},{"owner":{"account_id":2435146,"reputation":2837,"user_id":2125241,"display_name":"Andrew Bissell"},"score":1,"creation_date":1364408717,"post_id":15654276,"comment_id":22236530,"body_markdown":"@wagaboy  I added a little more discussion of program order to my answer. The PO rule is less strict than you are thinking; it does not mean that every action within a thread must happen serially, but rather that the *results* of all actions in that thread must be the same *as if* it had run in order. This is known as &quot;within-thread as-if-serial&quot; semantics. If we strip out the `synchronized` block from Manson&#39;s example (not relevant to single-thread program order), then since none of the operations have an effect on any of the others, they can be freely reordered.","body":"@wagaboy  I added a little more discussion of program order to my answer. The PO rule is less strict than you are thinking; it does not mean that every action within a thread must happen serially, but rather that the <i>results</i> of all actions in that thread must be the same <i>as if</i> it had run in order. This is known as &quot;within-thread as-if-serial&quot; semantics. If we strip out the <code>synchronized</code> block from Manson&#39;s example (not relevant to single-thread program order), then since none of the operations have an effect on any of the others, they can be freely reordered."}],"answers":[{"tags":[],"owner":{"account_id":142651,"reputation":6584,"user_id":350491,"accept_rate":78,"display_name":"Ankit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1364373154,"creation_date":1364373154,"answer_id":15654537,"question_id":15654276,"body_markdown":"it simply mean though the thread may be multiplxed, but the internal order of the thread&#39;s action/operation/instruction would remain constant (relatively)\r\n\r\nthread1: T1op1, T1op2, T1op3...\r\nthread2: T2op1, T2op2, T2op3...\r\n\r\nthough the order of operation (Tn&#39;op&#39;M) among thread may vary, but operations `T1op1, T1op2, T1op3` within a thread will always be in this order, and so as the `T2op1, T2op2, T2op3`\r\n\r\nfor ex:\r\n\r\n    T2op1, T1op1, T1op2, T2op2, T2op3, T1op3","title":"Interpretation of &quot;program order rule&quot; in Java concurrency","body":"<p>it simply mean though the thread may be multiplxed, but the internal order of the thread's action/operation/instruction would remain constant (relatively)</p>\n\n<p>thread1: T1op1, T1op2, T1op3...\nthread2: T2op1, T2op2, T2op3...</p>\n\n<p>though the order of operation (Tn'op'M) among thread may vary, but operations <code>T1op1, T1op2, T1op3</code> within a thread will always be in this order, and so as the <code>T2op1, T2op2, T2op3</code></p>\n\n<p>for ex:</p>\n\n<pre><code>T2op1, T1op1, T1op2, T2op2, T2op3, T1op3\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1364374026,"creation_date":1364374026,"answer_id":15654772,"question_id":15654276,"body_markdown":"Java tutorial http://docs.oracle.com/javase/tutorial/essential/concurrency/memconsist.html says that happens-before relationship is simply a guarantee that memory writes by one specific statement are visible to another specific statement. Here is an illustration \r\n\r\n\tint x;\r\n\t\r\n\tsynchronized void x() {\r\n\t\tx += 1;\r\n\t}\r\n\t\r\n\tsynchronized void y() {\r\n\t\tSystem.out.println(x);\r\n\t}\r\n`synchronized` creates a happens-before relationship, if we remove it there will be no guarantee that after thread A increments x thread B will print 1, it may print 0 \r\n","title":"Interpretation of &quot;program order rule&quot; in Java concurrency","body":"<p>Java tutorial <a href=\"http://docs.oracle.com/javase/tutorial/essential/concurrency/memconsist.html\" rel=\"nofollow\">http://docs.oracle.com/javase/tutorial/essential/concurrency/memconsist.html</a> says that happens-before relationship is simply a guarantee that memory writes by one specific statement are visible to another specific statement. Here is an illustration </p>\n\n<pre><code>int x;\n\nsynchronized void x() {\n    x += 1;\n}\n\nsynchronized void y() {\n    System.out.println(x);\n}\n</code></pre>\n\n<p><code>synchronized</code> creates a happens-before relationship, if we remove it there will be no guarantee that after thread A increments x thread B will print 1, it may print 0 </p>\n"},{"tags":[],"owner":{"account_id":83889,"reputation":26612,"user_id":234901,"accept_rate":97,"display_name":"Enno Shioji"},"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1364600267,"creation_date":1364374219,"answer_id":15654830,"question_id":15654276,"body_markdown":"It probably helps to explain why such rule exist in the first place.  \r\n\r\nJava is a procedural language. I.e. you tell Java how to do something for you. If Java executes your instructions not in the order you wrote, it would obviously not work. E.g. in the below example, if Java would do 2 -&gt; 1 -&gt; 3 then the stew would be ruined.\r\n    \r\n    1. Take lid off\r\n    2. Pour salt in\r\n    3. Cook for 3 hours\r\n    \r\nSo, why does the rule not simply say &quot;Java executes what you wrote in the order you wrote&quot;? In a nutshell, because Java is clever. Take the following example:\r\n    \r\n    1. Take eggs out of the freezer\r\n    2. Take lid off\r\n    3. Take milk out of the freezer\r\n    4. Pour egg and milk in\r\n    5. Cook for 3 hours\r\n    \r\nIf Java was like me, it&#39;ll just execute it in order. However Java is clever enough to understand that it&#39;s more efficient AND that the end result would be the same should it do 1 -&gt; 3 -&gt; 2 -&gt; 4 -&gt; 5 (you don&#39;t have to walk to the freezer again, and that doesn&#39;t change the recipe).\r\n\r\nSo what the rule &quot;Each action in a thread happens-before every action in that thread that comes later in the program order&quot; is trying to say is, &quot;In a single thread, your program will run **as if** it was executed in the exact order you wrote it. We might change the ordering behind the scene but we make sure that none of that would change the output.  \r\n\r\nSo far so good. Why does it not do the same across multiple threads? In multi-thread programming, Java isn&#39;t clever enough to do it automatically. It will for some operations (e.g. joining threads, starting threads, when a lock (monitor) is used etc.) but for other stuff you need to explicitly tell it to not do reordering that would change the program output (e.g. `volatile` marker on fields, use of locks etc.).  \r\n\r\nNote:   \r\nQuick addendum about &quot;happens-before relationship&quot;. This is a fancy way of saying no matter what reordering Java might do, stuff A will happen before stuff B. In our weird later stew example, &quot;Step 1 &amp; 3 *happens-before* step 4 &quot;Pour egg and milk in&quot; &quot;. Also for example, &quot;Step 1 &amp; 3 do not need a *happens-before* relationship because they don&#39;t depend on each other in any way&quot;\r\n\r\n\r\n**On the additional question &amp; response to the comment**  \r\n\r\nFirst, let us establish what &quot;time&quot; means in the programming world. In programming, we have the notion of &quot;absolute time&quot; (what&#39;s the time in the world now?) and the notion of &quot;relative time&quot; (how much time has passed since x?). In an ideal world, time is time but unless we have an atomic clock built in, the absolute time would have to be corrected time to time. On the other hand, for relative time we don&#39;t want corrections as we are only interested in the differences between events.\r\n\r\nIn Java, `System.currentTime()` deals with absolute time and `System.nanoTime()` deals with relative time. This is why the Javadoc of nanoTime states, &quot;This method *can only be used to measure elapsed time* and is not related to any other notion of system or wall-clock time&quot;.\r\n\r\nIn practice, both currentTimeMillis and nanoTime are native calls and thus the compiler can&#39;t practically prove if a reordering won&#39;t affect the correctness, which means it will not reorder the execution.  \r\n\r\nBut let us imagine we want to write a compiler implementation that actually looks into native code and reorders everything as long as it&#39;s legal. When we look at the JLS, all that it tells us is that &quot;You can reorder anything as long as it cannot be detected&quot;. Now as the compiler writer, we have to decide if the reordering would violate the semantics. For relative time (nanoTime), it would clearly be useless (i.e. violates the semantics) if we&#39;d reorder the execution. Now, would it violate the semantics if we&#39;d reorder for absolute time (currentTimeMillis)? As long as we can limit the difference from the source of the world&#39;s time (let&#39;s say the system clock) to whatever we decide (like &quot;50ms&quot;)*, I say no. For the below example:\r\n\r\n    long tick = System.currentTimeMillis();\r\n    result = compute();\r\n    long tock = System.currentTimeMillis();\r\n    print(result + &quot;:&quot; + tick - tock);\r\n\r\nIf the compiler can prove that `compute()` takes less than whatever maximum divergence from the system clock we can permit, then it would be legal to reorder this as follows:\r\n\r\n\r\n    long tick = System.currentTimeMillis();\r\n    long tock = System.currentTimeMillis();\r\n    result = compute();\r\n    print(result + &quot;:&quot; + tick - tock);\r\n\r\nSince doing that won&#39;t violate the spec we defined, and thus won&#39;t violate the semantics.  \r\n\r\nYou also asked why this is not included in the JLS. I think the answer would be &quot;to keep the JLS short&quot;. But I don&#39;t know much about this realm so you might want to ask a separate question for that.\r\n\r\n*: In actual implementations, this difference is platform dependent.","title":"Interpretation of &quot;program order rule&quot; in Java concurrency","body":"<p>It probably helps to explain why such rule exist in the first place.  </p>\n\n<p>Java is a procedural language. I.e. you tell Java how to do something for you. If Java executes your instructions not in the order you wrote, it would obviously not work. E.g. in the below example, if Java would do 2 -> 1 -> 3 then the stew would be ruined.</p>\n\n<pre><code>1. Take lid off\n2. Pour salt in\n3. Cook for 3 hours\n</code></pre>\n\n<p>So, why does the rule not simply say \"Java executes what you wrote in the order you wrote\"? In a nutshell, because Java is clever. Take the following example:</p>\n\n<pre><code>1. Take eggs out of the freezer\n2. Take lid off\n3. Take milk out of the freezer\n4. Pour egg and milk in\n5. Cook for 3 hours\n</code></pre>\n\n<p>If Java was like me, it'll just execute it in order. However Java is clever enough to understand that it's more efficient AND that the end result would be the same should it do 1 -> 3 -> 2 -> 4 -> 5 (you don't have to walk to the freezer again, and that doesn't change the recipe).</p>\n\n<p>So what the rule \"Each action in a thread happens-before every action in that thread that comes later in the program order\" is trying to say is, \"In a single thread, your program will run <strong>as if</strong> it was executed in the exact order you wrote it. We might change the ordering behind the scene but we make sure that none of that would change the output.  </p>\n\n<p>So far so good. Why does it not do the same across multiple threads? In multi-thread programming, Java isn't clever enough to do it automatically. It will for some operations (e.g. joining threads, starting threads, when a lock (monitor) is used etc.) but for other stuff you need to explicitly tell it to not do reordering that would change the program output (e.g. <code>volatile</code> marker on fields, use of locks etc.).  </p>\n\n<p>Note:<br>\nQuick addendum about \"happens-before relationship\". This is a fancy way of saying no matter what reordering Java might do, stuff A will happen before stuff B. In our weird later stew example, \"Step 1 &amp; 3 <em>happens-before</em> step 4 \"Pour egg and milk in\" \". Also for example, \"Step 1 &amp; 3 do not need a <em>happens-before</em> relationship because they don't depend on each other in any way\"</p>\n\n<p><strong>On the additional question &amp; response to the comment</strong>  </p>\n\n<p>First, let us establish what \"time\" means in the programming world. In programming, we have the notion of \"absolute time\" (what's the time in the world now?) and the notion of \"relative time\" (how much time has passed since x?). In an ideal world, time is time but unless we have an atomic clock built in, the absolute time would have to be corrected time to time. On the other hand, for relative time we don't want corrections as we are only interested in the differences between events.</p>\n\n<p>In Java, <code>System.currentTime()</code> deals with absolute time and <code>System.nanoTime()</code> deals with relative time. This is why the Javadoc of nanoTime states, \"This method <em>can only be used to measure elapsed time</em> and is not related to any other notion of system or wall-clock time\".</p>\n\n<p>In practice, both currentTimeMillis and nanoTime are native calls and thus the compiler can't practically prove if a reordering won't affect the correctness, which means it will not reorder the execution.  </p>\n\n<p>But let us imagine we want to write a compiler implementation that actually looks into native code and reorders everything as long as it's legal. When we look at the JLS, all that it tells us is that \"You can reorder anything as long as it cannot be detected\". Now as the compiler writer, we have to decide if the reordering would violate the semantics. For relative time (nanoTime), it would clearly be useless (i.e. violates the semantics) if we'd reorder the execution. Now, would it violate the semantics if we'd reorder for absolute time (currentTimeMillis)? As long as we can limit the difference from the source of the world's time (let's say the system clock) to whatever we decide (like \"50ms\")*, I say no. For the below example:</p>\n\n<pre><code>long tick = System.currentTimeMillis();\nresult = compute();\nlong tock = System.currentTimeMillis();\nprint(result + \":\" + tick - tock);\n</code></pre>\n\n<p>If the compiler can prove that <code>compute()</code> takes less than whatever maximum divergence from the system clock we can permit, then it would be legal to reorder this as follows:</p>\n\n<pre><code>long tick = System.currentTimeMillis();\nlong tock = System.currentTimeMillis();\nresult = compute();\nprint(result + \":\" + tick - tock);\n</code></pre>\n\n<p>Since doing that won't violate the spec we defined, and thus won't violate the semantics.  </p>\n\n<p>You also asked why this is not included in the JLS. I think the answer would be \"to keep the JLS short\". But I don't know much about this realm so you might want to ask a separate question for that.</p>\n\n<p>*: In actual implementations, this difference is platform dependent.</p>\n"},{"tags":[],"owner":{"account_id":2435146,"reputation":2837,"user_id":2125241,"display_name":"Andrew Bissell"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1364445563,"creation_date":1364375079,"answer_id":15655048,"question_id":15654276,"body_markdown":"The program order rule guarantees that, *within individual threads*, reordering optimizations introduced by the compiler cannot produce different results from what would have happened if the program had been executed in serial fashion. It makes no guarantees about what order the thread&#39;s actions may appear to occur in to any other threads if its state is observed by those threads without synchronization.\r\n\r\nNote that this rule speaks only to the ultimate *results* of the program, and not to the order of individual executions within that program. For instance, if we have a method which makes the following changes to some local variables:\r\n\r\n    x = 1;\r\n    z = z + 1;\r\n    y = 1;\r\n\r\n\r\nThe compiler remains free to reorder these operations however it sees best fit to improve performance. One way to think of this is: if you could reorder these ops in your source code and still obtain the same results, the compiler is free to do the same. (And in fact, it can go even further and completely discard operations which are shown to have no results, such as invocations of empty methods.)\r\n\r\nWith your second bullet point the **monitor lock rule** comes into play: &quot;An unlock on a monitor *happens-before* every subsequent lock on that main monitor lock.&quot; (*Java Concurrency in Practice* p. 341) This means that a thread acquiring a given lock will have a consistent view of the actions which occurred in other threads before releasing that lock. However, note that this guarantee only applies when two different threads `release` or `acquire` the *same lock*. If Thread A does a bunch of stuff before releasing Lock X, and then Thread B acquires Lock Y, Thread B is not assured to have a consistent view of A&#39;s pre-X actions.\r\n\r\nIt is possible for reads and writes to variables to be reordered with `start` and `join`   if a.) doing so doesn&#39;t break within-thread program order, *and* b.) the variables have not had other &quot;happens-before&quot; thread synchronization semantics applied to them, say by storing them in `volatile` fields.\r\n\r\nA simple example:\r\n\r\n    class ThreadStarter {\r\n       Object a = null;\r\n       Object b = null;\r\n       Thread thread;\r\n       \r\n       ThreadStarter(Thread threadToStart) {\r\n          this.thread = threadToStart;\r\n       }\r\n\r\n       public void aMethod() {\r\n          a = new BeforeStartObject();\r\n          b = new BeforeStartObject();\r\n          thread.start();\r\n          a = new AfterStartObject();\r\n          b = new AfterStartObject();\r\n\r\n          a.doSomeStuff();\r\n          b.doSomeStuff();\r\n       }\r\n    }\r\n    \r\n\r\nSince the fields `a` and `b` and the method `aMethod()` are not synchronized in any way, and the action of starting `thread` does not change the results of the writes to the fields (or the doing of stuff with those fields), the compiler is free to reorder `thread.start()` to anywhere in the method. The only thing it could *not* do with the order of `aMethod()` would be to move the order of writing one of the `BeforeStartObject`s to a field after writing an `AfterStartObject` to that field, or to move one of the `doSomeStuff()` invocations on a field before the `AfterStartObject` is written to it. (That is, assuming that such reordering would change the results of the `doSomeStuff()` invocation in some way.)\r\n\r\nThe critical thing to bear in mind here is that, in the absence of synchronization, the thread started in `aMethod()` could theoretically observe either or both of the fields `a` and `b` in any of the states which they take on during the execution of `aMethod()` (including `null`).\r\n\r\n**Additional question answer**\r\n\r\nThe assignments to `tick` and `tock` cannot be reordered with respect to the code in `Block1` if they are to be actually used in any measurements, for example by calculating the difference between them and printing the result as output. Such reordering would clearly break Java&#39;s *within-thread as-if-serial* semantics. It changes the results from what would have been obtained by executing instructions in the specified program order. If the assignments *aren&#39;t* used for any measurements and have no side-effects of any kind on the program result, they&#39;ll likely be optimized away as no-ops by the compiler rather than being reordered.","title":"Interpretation of &quot;program order rule&quot; in Java concurrency","body":"<p>The program order rule guarantees that, <em>within individual threads</em>, reordering optimizations introduced by the compiler cannot produce different results from what would have happened if the program had been executed in serial fashion. It makes no guarantees about what order the thread's actions may appear to occur in to any other threads if its state is observed by those threads without synchronization.</p>\n\n<p>Note that this rule speaks only to the ultimate <em>results</em> of the program, and not to the order of individual executions within that program. For instance, if we have a method which makes the following changes to some local variables:</p>\n\n<pre><code>x = 1;\nz = z + 1;\ny = 1;\n</code></pre>\n\n<p>The compiler remains free to reorder these operations however it sees best fit to improve performance. One way to think of this is: if you could reorder these ops in your source code and still obtain the same results, the compiler is free to do the same. (And in fact, it can go even further and completely discard operations which are shown to have no results, such as invocations of empty methods.)</p>\n\n<p>With your second bullet point the <strong>monitor lock rule</strong> comes into play: \"An unlock on a monitor <em>happens-before</em> every subsequent lock on that main monitor lock.\" (<em>Java Concurrency in Practice</em> p. 341) This means that a thread acquiring a given lock will have a consistent view of the actions which occurred in other threads before releasing that lock. However, note that this guarantee only applies when two different threads <code>release</code> or <code>acquire</code> the <em>same lock</em>. If Thread A does a bunch of stuff before releasing Lock X, and then Thread B acquires Lock Y, Thread B is not assured to have a consistent view of A's pre-X actions.</p>\n\n<p>It is possible for reads and writes to variables to be reordered with <code>start</code> and <code>join</code>   if a.) doing so doesn't break within-thread program order, <em>and</em> b.) the variables have not had other \"happens-before\" thread synchronization semantics applied to them, say by storing them in <code>volatile</code> fields.</p>\n\n<p>A simple example:</p>\n\n<pre><code>class ThreadStarter {\n   Object a = null;\n   Object b = null;\n   Thread thread;\n\n   ThreadStarter(Thread threadToStart) {\n      this.thread = threadToStart;\n   }\n\n   public void aMethod() {\n      a = new BeforeStartObject();\n      b = new BeforeStartObject();\n      thread.start();\n      a = new AfterStartObject();\n      b = new AfterStartObject();\n\n      a.doSomeStuff();\n      b.doSomeStuff();\n   }\n}\n</code></pre>\n\n<p>Since the fields <code>a</code> and <code>b</code> and the method <code>aMethod()</code> are not synchronized in any way, and the action of starting <code>thread</code> does not change the results of the writes to the fields (or the doing of stuff with those fields), the compiler is free to reorder <code>thread.start()</code> to anywhere in the method. The only thing it could <em>not</em> do with the order of <code>aMethod()</code> would be to move the order of writing one of the <code>BeforeStartObject</code>s to a field after writing an <code>AfterStartObject</code> to that field, or to move one of the <code>doSomeStuff()</code> invocations on a field before the <code>AfterStartObject</code> is written to it. (That is, assuming that such reordering would change the results of the <code>doSomeStuff()</code> invocation in some way.)</p>\n\n<p>The critical thing to bear in mind here is that, in the absence of synchronization, the thread started in <code>aMethod()</code> could theoretically observe either or both of the fields <code>a</code> and <code>b</code> in any of the states which they take on during the execution of <code>aMethod()</code> (including <code>null</code>).</p>\n\n<p><strong>Additional question answer</strong></p>\n\n<p>The assignments to <code>tick</code> and <code>tock</code> cannot be reordered with respect to the code in <code>Block1</code> if they are to be actually used in any measurements, for example by calculating the difference between them and printing the result as output. Such reordering would clearly break Java's <em>within-thread as-if-serial</em> semantics. It changes the results from what would have been obtained by executing instructions in the specified program order. If the assignments <em>aren't</em> used for any measurements and have no side-effects of any kind on the program result, they'll likely be optimized away as no-ops by the compiler rather than being reordered.</p>\n"},{"tags":[],"owner":{"account_id":65386,"reputation":39895,"user_id":192444,"accept_rate":100,"display_name":"John Vint"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689343113,"creation_date":1364386581,"answer_id":15658567,"question_id":15654276,"body_markdown":"Before I answer the question, \r\n\r\n&gt; reads and writes to variables\r\n\r\nShould be \r\n\r\n&gt; volatile reads and volatile writes (of the same field)\r\n\r\nProgram order doesn&#39;t guarantee this happens before relationship, rather the happens-before relationship guarantees program order\r\n\r\nTo your questions:\r\n\r\n&gt; Does this mean that reads and writes can be changed in order, but reads and writes cannot change order with actions specified in 2nd or 3rd lines?\r\n\r\nThe answer actually depends on what action happens first and what action happens second.  Take a look at the [JSR 133 Cookbook for Compiler Writers][1].  There is a *Can Reorder* grid that lists the allowed compiler reordering that can occur.\r\n\r\nFor instance a **Volatile Store** can be re-ordered above or below a **Normal Store** but a **Volatile Store** *cannot be* be reordered above or below a **Volatile Load**.  This is all assuming intrathread semantics still hold.\r\n\r\n&gt; What does &quot;program order&quot; mean?\r\n\r\nThis is from the [JLS][2]  \r\n\r\n&gt; Among all the inter-thread actions performed by each thread t, the\r\n&gt; program order of t is a total order that reflects the order in which\r\n&gt; these actions would be performed according to the intra-thread\r\n&gt; semantics of t.\r\n\r\nIn other words, if you can change the writes and loads of a variable in such a way that it will perform exactly the same way as you wrote it then it maintains program order.\r\n\r\nFor instance\r\n\r\n    public static Object getInstance() {\r\n        if (instance == null) {\r\n             instance = new Object();\r\n        }\r\n\r\n        return instance;\r\n    }\r\n\r\nCan be reordered to\r\n\r\n    public static Object getInstance() {\r\n         Object temp = instance;\r\n         if (instance == null) {\r\n             temp = instance = new Object();\r\n         }\r\n\r\n         return temp;\r\n    }\r\n\r\n  [1]: https://gee.cs.oswego.edu/dl/jmm/cookbook.html\r\n  [2]: http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.3","title":"Interpretation of &quot;program order rule&quot; in Java concurrency","body":"<p>Before I answer the question,</p>\n<blockquote>\n<p>reads and writes to variables</p>\n</blockquote>\n<p>Should be</p>\n<blockquote>\n<p>volatile reads and volatile writes (of the same field)</p>\n</blockquote>\n<p>Program order doesn't guarantee this happens before relationship, rather the happens-before relationship guarantees program order</p>\n<p>To your questions:</p>\n<blockquote>\n<p>Does this mean that reads and writes can be changed in order, but reads and writes cannot change order with actions specified in 2nd or 3rd lines?</p>\n</blockquote>\n<p>The answer actually depends on what action happens first and what action happens second.  Take a look at the <a href=\"https://gee.cs.oswego.edu/dl/jmm/cookbook.html\" rel=\"nofollow noreferrer\">JSR 133 Cookbook for Compiler Writers</a>.  There is a <em>Can Reorder</em> grid that lists the allowed compiler reordering that can occur.</p>\n<p>For instance a <strong>Volatile Store</strong> can be re-ordered above or below a <strong>Normal Store</strong> but a <strong>Volatile Store</strong> <em>cannot be</em> be reordered above or below a <strong>Volatile Load</strong>.  This is all assuming intrathread semantics still hold.</p>\n<blockquote>\n<p>What does &quot;program order&quot; mean?</p>\n</blockquote>\n<p>This is from the <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.3\" rel=\"nofollow noreferrer\">JLS</a></p>\n<blockquote>\n<p>Among all the inter-thread actions performed by each thread t, the\nprogram order of t is a total order that reflects the order in which\nthese actions would be performed according to the intra-thread\nsemantics of t.</p>\n</blockquote>\n<p>In other words, if you can change the writes and loads of a variable in such a way that it will perform exactly the same way as you wrote it then it maintains program order.</p>\n<p>For instance</p>\n<pre><code>public static Object getInstance() {\n    if (instance == null) {\n         instance = new Object();\n    }\n\n    return instance;\n}\n</code></pre>\n<p>Can be reordered to</p>\n<pre><code>public static Object getInstance() {\n     Object temp = instance;\n     if (instance == null) {\n         temp = instance = new Object();\n     }\n\n     return temp;\n}\n</code></pre>\n"}],"owner":{"account_id":163842,"reputation":2264,"user_id":1625487,"accept_rate":78,"display_name":"Abs"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4348,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":15654830,"answer_count":5,"score":15,"last_activity_date":1689343113,"creation_date":1364372057,"question_id":15654276,"body_markdown":"Program order rule states &quot;Each action in a thread happens-before every action in that thread that comes later in the program order&quot;\r\n\r\n1.I read in another [thread][1] that an **action** is\r\n\r\n- reads and writes to variables\r\n- locks and unlocks of monitors\r\n- starting and joining with threads \r\n\r\nDoes this mean that reads and writes can be changed in order, but reads and writes cannot change order with actions specified in 2nd or 3rd lines?\r\n\r\n2.What does &quot;program order&quot; mean? \r\n\r\nExplanation with an examples would be really helpful.\r\n\r\n**Additional related question**\r\n\r\nSuppose I have the following code:\r\n\r\n    long tick = System.nanoTime(); //Line1: Note the time\r\n    //Block1: some code whose time I wish to measure goes here\r\n    long tock = System.nanoTime(); //Line2: Note the time\r\n\r\nFirstly, it&#39;s a single threaded application to keep things simple. Compiler notices that it needs to check the time twice and also notices a block of code that has no dependency with surrounding time-noting lines, so it sees a potential to reorganize the code, which could result in Block1 not being surrounded by the timing calls during actual execution (for instance, consider this order Line1-&gt;Line2-&gt;Block1). But, I as a programmer can see the dependency between Line1,2 and Block1. Line1 should immediately precede Block1, Block1 takes a finite amount of time to complete, and immediately succeeded by Line2.\r\n\r\nSo my question is: Am I measuring the block correctly? \r\n\r\n - If yes, what is preventing the compiler from rearranging the order.\r\n - If no, (which is think is correct after going through Enno&#39;s answer) what can I do to prevent it.\r\n\r\nP.S.: I stole this code from [another question][2] I asked in SO recently.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/11353274/what-is-the-reasoning-behind-volatile-semantics-in-java-and-c-sharp\r\n  [2]: https://stackoverflow.com/questions/15607265/measuring-time-interval-and-out-of-order-execution","title":"Interpretation of &quot;program order rule&quot; in Java concurrency","body":"<p>Program order rule states \"Each action in a thread happens-before every action in that thread that comes later in the program order\"</p>\n\n<p>1.I read in another <a href=\"https://stackoverflow.com/questions/11353274/what-is-the-reasoning-behind-volatile-semantics-in-java-and-c-sharp\">thread</a> that an <strong>action</strong> is</p>\n\n<ul>\n<li>reads and writes to variables</li>\n<li>locks and unlocks of monitors</li>\n<li>starting and joining with threads </li>\n</ul>\n\n<p>Does this mean that reads and writes can be changed in order, but reads and writes cannot change order with actions specified in 2nd or 3rd lines?</p>\n\n<p>2.What does \"program order\" mean? </p>\n\n<p>Explanation with an examples would be really helpful.</p>\n\n<p><strong>Additional related question</strong></p>\n\n<p>Suppose I have the following code:</p>\n\n<pre><code>long tick = System.nanoTime(); //Line1: Note the time\n//Block1: some code whose time I wish to measure goes here\nlong tock = System.nanoTime(); //Line2: Note the time\n</code></pre>\n\n<p>Firstly, it's a single threaded application to keep things simple. Compiler notices that it needs to check the time twice and also notices a block of code that has no dependency with surrounding time-noting lines, so it sees a potential to reorganize the code, which could result in Block1 not being surrounded by the timing calls during actual execution (for instance, consider this order Line1->Line2->Block1). But, I as a programmer can see the dependency between Line1,2 and Block1. Line1 should immediately precede Block1, Block1 takes a finite amount of time to complete, and immediately succeeded by Line2.</p>\n\n<p>So my question is: Am I measuring the block correctly? </p>\n\n<ul>\n<li>If yes, what is preventing the compiler from rearranging the order.</li>\n<li>If no, (which is think is correct after going through Enno's answer) what can I do to prevent it.</li>\n</ul>\n\n<p>P.S.: I stole this code from <a href=\"https://stackoverflow.com/questions/15607265/measuring-time-interval-and-out-of-order-execution\">another question</a> I asked in SO recently.</p>\n"},{"tags":["java","json","linux","xml","spring-boot"],"comments":[{"owner":{"account_id":14763186,"reputation":101,"user_id":10661933,"display_name":"PawMaw"},"score":0,"creation_date":1689342873,"post_id":76688250,"comment_id":135204111,"body_markdown":"Hello! Did you tried adding file path in your application.properties file? I think it happens when you write file path manually, but not in configuration file.","body":"Hello! Did you tried adding file path in your application.properties file? I think it happens when you write file path manually, but not in configuration file."},{"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1689342970,"post_id":76688250,"comment_id":135204129,"body_markdown":"Your local tests are not using the jar, so classpath resources can be accessed as a `File`. A resource loaded from a jar in classpath won&#39;t have a valid `File` equivalent. You should always test locally with the same jars that you deploy.","body":"Your local tests are not using the jar, so classpath resources can be accessed as a <code>File</code>. A resource loaded from a jar in classpath won&#39;t have a valid <code>File</code> equivalent. You should always test locally with the same jars that you deploy."}],"answers":[{"tags":[],"owner":{"account_id":3708341,"reputation":4302,"user_id":3086289,"accept_rate":100,"display_name":"Sangam Belose"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689343094,"creation_date":1689343094,"answer_id":76688377,"question_id":76688250,"body_markdown":"The issue you are facing is likely due to the difference in file paths between your local environment and the Linux server.\r\n\r\nSince your file is inside the jar, I would suggest to read it as InputStream rather than File.\r\n\r\n    Resource resource = new ClassPathResource(&quot;appSettings.xml&quot;);\r\n    InputStream inputStream = resource.getInputStream();\r\n    XmlMapper xmlMapper = new XmlMapper();\r\n    appSettings settings = xmlMapper.readValue(inputStream, appSettings.class);\r\n    \r\n    //rest of your code.\r\n\r\n\r\nAlternatively you can refer your file using @Value annotation as below:\r\n\r\n    @Value(&quot;classpath:appSettings.xml&quot;)\r\n    Resource resourceFile;\r\n\r\n it&#39;s more convenient than previous version. \r\n\r\nPlease check [samples][1] on how you can read files from classpath.\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-classpath-file-access","title":"File is not part of FileSystem Error in reading XML file in Springboot","body":"<p>The issue you are facing is likely due to the difference in file paths between your local environment and the Linux server.</p>\n<p>Since your file is inside the jar, I would suggest to read it as InputStream rather than File.</p>\n<pre><code>Resource resource = new ClassPathResource(&quot;appSettings.xml&quot;);\nInputStream inputStream = resource.getInputStream();\nXmlMapper xmlMapper = new XmlMapper();\nappSettings settings = xmlMapper.readValue(inputStream, appSettings.class);\n\n//rest of your code.\n</code></pre>\n<p>Alternatively you can refer your file using @Value annotation as below:</p>\n<pre><code>@Value(&quot;classpath:appSettings.xml&quot;)\nResource resourceFile;\n</code></pre>\n<p>it's more convenient than previous version.</p>\n<p>Please check <a href=\"https://www.baeldung.com/spring-classpath-file-access\" rel=\"nofollow noreferrer\">samples</a> on how you can read files from classpath.</p>\n"}],"owner":{"account_id":10981964,"reputation":43,"user_id":8068792,"accept_rate":0,"display_name":"Prabhash Mishra"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1689343094,"creation_date":1689342143,"question_id":76688250,"body_markdown":"I am reading Xml file in springboot placed in src/main/resources folder. It is working fine in local but after creating JAR file and deploying on linux server I am getting &quot;File is not part of file system&quot; error. After deployment on linux server system is not able to find the file. \r\n\r\nFile Read Code:\r\n\r\n    Resource resource = new ClassPathResource(&quot;appSettings.xml&quot;);\r\n        File file = resource.getFile();\r\n        XmlMapper xmlMapper = new XmlMapper();\r\n        appSettings settings = xmlMapper.readValue(file, appSettings.class);\r\n        Map&lt;String,String&gt; cGMap = new HashMap&lt;&gt;();\r\n        for(add a : settings.getAdd()){\r\n            String val=ConvertToString(a.getValue());\r\n            cGMap.put(a.getKey(),val);\r\n        }\r\n        return cGMap;\r\n\r\nI am able to read the file and getting file content in my local. But after creating JAR and deploying on linux server system is not getting file path and saying file is not part of file system.\r\nCan anyone please suggest me what I am missing and what I need to do to make this file path available on remote server.\r\n\r\nRegards\r\nPrabahsh Mishta","title":"File is not part of FileSystem Error in reading XML file in Springboot","body":"<p>I am reading Xml file in springboot placed in src/main/resources folder. It is working fine in local but after creating JAR file and deploying on linux server I am getting &quot;File is not part of file system&quot; error. After deployment on linux server system is not able to find the file.</p>\n<p>File Read Code:</p>\n<pre><code>Resource resource = new ClassPathResource(&quot;appSettings.xml&quot;);\n    File file = resource.getFile();\n    XmlMapper xmlMapper = new XmlMapper();\n    appSettings settings = xmlMapper.readValue(file, appSettings.class);\n    Map&lt;String,String&gt; cGMap = new HashMap&lt;&gt;();\n    for(add a : settings.getAdd()){\n        String val=ConvertToString(a.getValue());\n        cGMap.put(a.getKey(),val);\n    }\n    return cGMap;\n</code></pre>\n<p>I am able to read the file and getting file content in my local. But after creating JAR and deploying on linux server system is not getting file path and saying file is not part of file system.\nCan anyone please suggest me what I am missing and what I need to do to make this file path available on remote server.</p>\n<p>Regards\nPrabahsh Mishta</p>\n"},{"tags":["java","spring","hibernate-mapping"],"owner":{"account_id":23167954,"reputation":1,"user_id":17267600,"display_name":"Сэм Қыпшақ"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689343022,"creation_date":1689161050,"question_id":76670016,"body_markdown":"I have a Spring project where for every company registered in the service (CRM system), spring creates a database.\r\n\r\nFor every new database, Spring must create tables for all entities. I made a multidatabase connection by `AbstractRoutingDatasource` but by using this, the tables in the database are not created automatically. How can I create by Hibernate for a lot of databases?\r\n\r\nI expect an example of code in Java. ","title":"how to generate table by hibernate for multiple databases in spring?","body":"<p>I have a Spring project where for every company registered in the service (CRM system), spring creates a database.</p>\n<p>For every new database, Spring must create tables for all entities. I made a multidatabase connection by <code>AbstractRoutingDatasource</code> but by using this, the tables in the database are not created automatically. How can I create by Hibernate for a lot of databases?</p>\n<p>I expect an example of code in Java.</p>\n"},{"tags":["java","for-loop","nested-for-loop"],"comments":[{"owner":{"account_id":10732579,"reputation":666,"user_id":7898202,"display_name":"MorganS42"},"score":0,"creation_date":1689387043,"post_id":76679894,"comment_id":135210587,"body_markdown":"WHEEW, have you read my answer?","body":"WHEEW, have you read my answer?"}],"answers":[{"tags":[],"owner":{"account_id":10732579,"reputation":666,"user_id":7898202,"display_name":"MorganS42"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689302771,"creation_date":1689302771,"answer_id":76684399,"question_id":76679894,"body_markdown":"The issue is you have the `System.out.println()` in the wrong place in your nested-loop. Your current solution starts a new line after iterating over all the characters, when really it should start a new line after iterating over all the x-values for a given row (in this case you&#39;ve named the variable `v`). This just means moving the `System.out.println()` out one loop, such as in the following:\r\n\r\n```java\r\nimport java.util.ArrayList;\r\npublic class Main {\r\n    public static void main(String[] args)\r\n    {\r\n        int a = 10;\r\n        \r\n        ArrayList&lt;Character&gt; characters = new ArrayList&lt;&gt;();\r\n        Character character1  = new Character(5,5);\r\n        Character character2  = new Character(7,8);\r\n        Character character3  = new Character(3,1);\r\n        characters.add(character1);\r\n        characters.add(character2);\r\n        characters.add(character3);\r\n        for (int i = 1; i&lt;=a; i++)\r\n        {\r\n            for (int v = 1; v &lt;= a; v++)\r\n            {\r\n                for (int j = 0; j &lt; characters.size(); j++)\r\n                {\r\n                    if (v == characters.get(j).getXLocation() &amp;&amp; i == characters.get(j).getYLocation())\r\n                    {\r\n                        System.out.print(&quot;O &quot;);\r\n                    }\r\n                    else System.out.print(&quot;* &quot;);\r\n                }\r\n            }\r\n            System.out.println(); // Only line changed\r\n        }\r\n    }\r\n}\r\n```","title":"Question about the problem of shooting stars using Java for statements","body":"<p>The issue is you have the <code>System.out.println()</code> in the wrong place in your nested-loop. Your current solution starts a new line after iterating over all the characters, when really it should start a new line after iterating over all the x-values for a given row (in this case you've named the variable <code>v</code>). This just means moving the <code>System.out.println()</code> out one loop, such as in the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\npublic class Main {\n    public static void main(String[] args)\n    {\n        int a = 10;\n        \n        ArrayList&lt;Character&gt; characters = new ArrayList&lt;&gt;();\n        Character character1  = new Character(5,5);\n        Character character2  = new Character(7,8);\n        Character character3  = new Character(3,1);\n        characters.add(character1);\n        characters.add(character2);\n        characters.add(character3);\n        for (int i = 1; i&lt;=a; i++)\n        {\n            for (int v = 1; v &lt;= a; v++)\n            {\n                for (int j = 0; j &lt; characters.size(); j++)\n                {\n                    if (v == characters.get(j).getXLocation() &amp;&amp; i == characters.get(j).getYLocation())\n                    {\n                        System.out.print(&quot;O &quot;);\n                    }\n                    else System.out.print(&quot;* &quot;);\n                }\n            }\n            System.out.println(); // Only line changed\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":20466223,"reputation":21,"user_id":15017664,"display_name":"WHEEW"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1689342858,"creation_date":1689254793,"question_id":76679894,"body_markdown":"Solving the problem of taking stars in Java. The questions are as follows.\r\n1. Print out a square with a width and length of 10*10 using *.\r\n2. The columns that match the x and y coordinates in the following array list should be outputted 0 instead of *.\r\nThe complete version and array list are as follows.\r\nFor example, if an element in an array list is given,\r\n\r\n        Character character1  = new Character(5,5);\r\n        Character character2  = new Character(7,8);\r\n        Character character3  = new Character(3,1);\r\nThe output shall be as follows like this:\r\n```\r\n* * O * * * * * * * \r\n* * * * * * * * * * \r\n* * * * * * * * * * \r\n* * * * * * * * * * \r\n* * * * O * * * * * \r\n* * * * * * * * * * \r\n* * * * * * * * * * \r\n* * * * * * O * * * \r\n* * * * * * * * * * \r\n* * * * * * * * * * \r\n```\r\n\r\nThis is the code I&#39;m currently writing.\r\n\r\n```java\r\npublic class Character {\r\n     int xLocation;\r\n     int yLocation;\r\n    public Character(int x, int y){\r\n        this.xLocation = x;\r\n        this.yLocation = y;\r\n    }\r\n    public int getXLocation(){return xLocation;}\r\n    public int getYLocation(){\r\n        return yLocation;\r\n    }\r\n}\r\n\r\n```\r\n\r\n```java\r\nimport java.util.ArrayList;\r\npublic class Main {\r\n    public static void main(String[] args)\r\n    {\r\n        int a = 10;\r\n        \r\n        ArrayList&lt;Character&gt; characters = new ArrayList&lt;&gt;();\r\n        Character character1  = new Character(5,5);\r\n        Character character2  = new Character(7,8);\r\n        Character character3  = new Character(3,1);\r\n        characters.add(character1);\r\n        characters.add(character2);\r\n        characters.add(character3);\r\n        for (int i = 1; i&lt;=a; i++)\r\n        {\r\n            for (int v = 1; v &lt;= a; v++)\r\n            {\r\n                for (int j = 0; j &lt; characters.size(); j++)\r\n                {\r\n                    if (v == characters.get(j).getXLocation() &amp;&amp; i == characters.get(j).getYLocation())\r\n                    {\r\n                        System.out.print(&quot;O &quot;);\r\n                    }\r\n                    else System.out.print(&quot;* &quot;);\r\n                }\r\n                System.out.println();\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n```\r\nHowever, the code has the following incorrect output:\r\n\r\n```\r\n* * * \r\n* * * \r\n* * O \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\nO * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* O * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n* * * \r\n```","title":"Question about the problem of shooting stars using Java for statements","body":"<p>Solving the problem of taking stars in Java. The questions are as follows.</p>\n<ol>\n<li><p>Print out a square with a width and length of 10*10 using *.</p>\n</li>\n<li><p>The columns that match the x and y coordinates in the following array list should be outputted 0 instead of *.\nThe complete version and array list are as follows.\nFor example, if an element in an array list is given,</p>\n<pre><code> Character character1  = new Character(5,5);\n Character character2  = new Character(7,8);\n Character character3  = new Character(3,1);\n</code></pre>\n</li>\n</ol>\n<p>The output shall be as follows like this:</p>\n<pre><code>* * O * * * * * * * \n* * * * * * * * * * \n* * * * * * * * * * \n* * * * * * * * * * \n* * * * O * * * * * \n* * * * * * * * * * \n* * * * * * * * * * \n* * * * * * O * * * \n* * * * * * * * * * \n* * * * * * * * * * \n</code></pre>\n<p>This is the code I'm currently writing.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Character {\n     int xLocation;\n     int yLocation;\n    public Character(int x, int y){\n        this.xLocation = x;\n        this.yLocation = y;\n    }\n    public int getXLocation(){return xLocation;}\n    public int getYLocation(){\n        return yLocation;\n    }\n}\n\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\npublic class Main {\n    public static void main(String[] args)\n    {\n        int a = 10;\n        \n        ArrayList&lt;Character&gt; characters = new ArrayList&lt;&gt;();\n        Character character1  = new Character(5,5);\n        Character character2  = new Character(7,8);\n        Character character3  = new Character(3,1);\n        characters.add(character1);\n        characters.add(character2);\n        characters.add(character3);\n        for (int i = 1; i&lt;=a; i++)\n        {\n            for (int v = 1; v &lt;= a; v++)\n            {\n                for (int j = 0; j &lt; characters.size(); j++)\n                {\n                    if (v == characters.get(j).getXLocation() &amp;&amp; i == characters.get(j).getYLocation())\n                    {\n                        System.out.print(&quot;O &quot;);\n                    }\n                    else System.out.print(&quot;* &quot;);\n                }\n                System.out.println();\n            }\n        }\n    }\n}\n\n</code></pre>\n<p>However, the code has the following incorrect output:</p>\n<pre><code>* * * \n* * * \n* * O \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \nO * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* O * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n* * * \n</code></pre>\n"},{"tags":["java","firebase","google-app-engine","google-cloud-platform","google-cloud-storage"],"comments":[{"owner":{"account_id":426109,"reputation":302012,"user_id":807126,"display_name":"Doug Stevenson"},"score":0,"creation_date":1559097542,"post_id":56352239,"comment_id":99309414,"body_markdown":"Yes, it should be possible.","body":"Yes, it should be possible."},{"owner":{"account_id":3147269,"reputation":10469,"user_id":3075340,"accept_rate":70,"display_name":"Micro"},"score":0,"creation_date":1559098297,"post_id":56352239,"comment_id":99309550,"body_markdown":"@DougStevenson I reworded my question. I wasn&#39;t asking if it is possible but how do I actually do it.","body":"@DougStevenson I reworded my question. I wasn&#39;t asking if it is possible but how do I actually do it."},{"owner":{"account_id":426109,"reputation":302012,"user_id":807126,"display_name":"Doug Stevenson"},"score":1,"creation_date":1559098527,"post_id":56352239,"comment_id":99309590,"body_markdown":"Unfortunately, that&#39;s a rather broad question for Stack Overflow. It&#39;s expected that you make an attempt at solving the problem, then post when you have a specific problem that you&#39;re stuck on with your code.","body":"Unfortunately, that&#39;s a rather broad question for Stack Overflow. It&#39;s expected that you make an attempt at solving the problem, then post when you have a specific problem that you&#39;re stuck on with your code."},{"owner":{"account_id":3147269,"reputation":10469,"user_id":3075340,"accept_rate":70,"display_name":"Micro"},"score":0,"creation_date":1559098687,"post_id":56352239,"comment_id":99309622,"body_markdown":"Well besides the image&#39;s api there really isn&#39;t much help out there. This is why I am asking here... Is there a backend service I am unaware of? or some other method?","body":"Well besides the image&#39;s api there really isn&#39;t much help out there. This is why I am asking here... Is there a backend service I am unaware of? or some other method?"},{"owner":{"account_id":426109,"reputation":302012,"user_id":807126,"display_name":"Doug Stevenson"},"score":0,"creation_date":1559098797,"post_id":56352239,"comment_id":99309638,"body_markdown":"The first thing to do would be some web searches for the tools you think you&#39;ll need to accomplish this rather complex task.","body":"The first thing to do would be some web searches for the tools you think you&#39;ll need to accomplish this rather complex task."},{"owner":{"account_id":1929103,"reputation":13962,"user_id":1738915,"accept_rate":90,"display_name":"Kolban"},"score":0,"creation_date":1559101881,"post_id":56352239,"comment_id":99310181,"body_markdown":"A quick Google search seems to show this as a candidate ... http://jcodec.org/","body":"A quick Google search seems to show this as a candidate ... <a href=\"http://jcodec.org/\" rel=\"nofollow noreferrer\">jcodec.org</a>"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1688634138,"post_id":56352239,"comment_id":135100989,"body_markdown":"This should have been closed as Too broad years ago. Can&#39;t do it now that the bounty is active.","body":"This should have been closed as Too broad years ago. Can&#39;t do it now that the bounty is active."},{"owner":{"account_id":3147269,"reputation":10469,"user_id":3075340,"accept_rate":70,"display_name":"Micro"},"score":0,"creation_date":1688673457,"post_id":56352239,"comment_id":135109234,"body_markdown":"@Jorn How is this too broad..? Seems like an important question to me.","body":"@Jorn How is this too broad..? Seems like an important question to me."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1688707638,"post_id":56352239,"comment_id":135112569,"body_markdown":"This is StackOverflow. We have rules ;-) Whether or not a question is interesting or important isn&#39;t relevant for it being on-topic. In this case, it&#39;s more of a &quot;how do I even start doing this&quot; than a &quot;how do I fix this specific issue&quot;, and we consider that too broad. I don&#39;t make the rules, sorry.","body":"This is StackOverflow. We have rules ;-) Whether or not a question is interesting or important isn&#39;t relevant for it being on-topic. In this case, it&#39;s more of a &quot;how do I even start doing this&quot; than a &quot;how do I fix this specific issue&quot;, and we consider that too broad. I don&#39;t make the rules, sorry."},{"owner":{"account_id":3147269,"reputation":10469,"user_id":3075340,"accept_rate":70,"display_name":"Micro"},"score":0,"creation_date":1688863979,"post_id":56352239,"comment_id":135131091,"body_markdown":"@Jorn There are a lot of questions like that on SO that get a lot of answers and up votes. I have provided a starting point with my question. It isn&#39;t a completely out of the blue question. There is context.","body":"@Jorn There are a lot of questions like that on SO that get a lot of answers and up votes. I have provided a starting point with my question. It isn&#39;t a completely out of the blue question. There is context."}],"answers":[{"tags":[],"owner":{"account_id":4243,"reputation":1301824,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1688901960,"creation_date":1688901960,"answer_id":76647226,"question_id":56352239,"body_markdown":"Creating a thumbnail or JPEG image from a video stored in [Google Cloud Storage](https://cloud.google.com/storage) involves a few steps and may require a bit more than just Java to accomplish. Typically, you&#39;d use a media processing software like FFmpeg to generate frames from a video.\r\n\r\nHowever, using [FFmpeg](https://ffmpeg.org/) or similar tools directly in App Engine can be tricky since you are restricted in terms of installing and executing third-party binary files in the App Engine environment. Therefore, the typical solution involves using Google Cloud Functions or Google Cloud Run to execute the FFmpeg commands and App Engine to trigger these functions. \r\n\r\nThat should mean:\r\n\r\n- Uploading the Video to Google Cloud Storage. That could be done from your application running on App Engine.\r\n- Creating a [Google Cloud Function](https://cloud.google.com/functions) or a [Cloud Run instance](https://cloud.google.com/run/docs/overview/what-is-cloud-run) that listens for the upload event. The function would use a tool like `FFmpeg` to generate an image from the video. It would save the image back to a Google Cloud Storage bucket. \r\n- triggering the Cloud Function/Cloud Run instance, when the video is uploaded.\r\n\r\nHere is a Python example of a Google Cloud Function that does this (it is not Java, but it gives you an idea of what the function would need to do).  \r\n(inspired from [`brown-mida/elvo/etl/processed_dag.py#to_public_png()`](https://github.com/brown-mida/elvo/blob/430453f0b71eb77f108a190cdb28b0ab3f70b631/etl/processed_dag.py#L28-L48))  \r\nThe function is triggered when a new video is uploaded, it uses FFmpeg to grab an image from the video, then it stores the image in the bucket:\r\n\r\n```python\r\nimport os\r\nimport tempfile\r\nfrom google.cloud import storage\r\nimport subprocess\r\n\r\ndef generate_thumbnail(data, context):\r\n    file_data = data\r\n    file_name = file_data[&#39;name&#39;]\r\n    bucket_name = file_data[&#39;bucket&#39;]\r\n\r\n    storage_client = storage.Client()\r\n    bucket = storage_client.get_bucket(bucket_name)\r\n    blob = bucket.blob(file_name)\r\n\r\n    _, temp_local_filename = tempfile.mkstemp()\r\n    \r\n    blob.download_to_filename(temp_local_filename)\r\n    print(f&quot;Video downloaded to {temp_local_filename}.&quot;)\r\n\r\n    thumbnail_file = temp_local_filename + &#39;.png&#39;\r\n    \r\n    command = f&quot;ffmpeg -i {temp_local_filename} -ss 00:00:01 -vframes 1 {thumbnail_file}&quot;\r\n    subprocess.call(command, shell=True)\r\n\r\n    print(f&quot;Thumbnail created at {thumbnail_file}.&quot;)\r\n\r\n    thumbnail_blob = bucket.blob(file_name + &#39;.png&#39;)\r\n    thumbnail_blob.upload_from_filename(thumbnail_file)\r\n\r\n    print(f&quot;Thumbnail uploaded to {bucket_name}/{file_name}.png&quot;)\r\n\r\n    os.remove(temp_local_filename)\r\n    os.remove(thumbnail_file)\r\n```\r\n\r\nWith that setup, the work of generating the thumbnail is offloaded from your Java App Engine service to the Cloud Function. That would provide a scalable solution to create video thumbnails without using resources from your App Engine service.  \r\nYou can create Cloud Functions using various runtime environments like Python, Node.js, Java, Go, .NET, etc. Python was used here because FFmpeg interaction is a bit more straightforward. \r\n\r\nWarning: this type of operation might result in additional costs due to the usage of Cloud Functions/Cloud Run and the extra storage requirements for the images generated.\r\n\r\nFinally, if you need to stick with Java and use App Engine only, consider using [App Engine flexible environment](https://cloud.google.com/appengine/docs/flexible), which would let you use FFmpeg or another tool.\r\n\r\n----\r\n\r\nCreating a Cloud Function or Cloud Run instance in Java to do this task is more complex than using a scripting language like Python because Java does not have native support for running shell commands like `FFmpeg`. \r\n\r\nHowever, creating a Cloud Function or Cloud Run instance with FFmpeg is possible with Java if you use a custom Dockerfile and run a shell command from Java. That is typically done in a Cloud Run instance rather than a Cloud Function because Cloud Run allows you to use a custom Dockerfile to include FFmpeg in the runtime.\r\n\r\nFor instance, here is a simple Java application that uses FFmpeg to extract a frame from a video. That could be used as the base for your Cloud Run instance.\r\n\r\n```java\r\nimport java.io.File;\r\nimport java.io.IOException;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        String videoPath = &quot;/path/to/video.mp4&quot;;\r\n        String imagePath = &quot;/path/to/output.png&quot;;\r\n\r\n        // That command extracts a frame from the 1st second of the video\r\n        String command = String.format(&quot;ffmpeg -i %s -ss 00:00:01 -vframes 1 %s&quot;, videoPath, imagePath);\r\n\r\n        try {\r\n            Process process = Runtime.getRuntime().exec(command);\r\n            process.waitFor();\r\n            System.out.println(&quot;Frame extracted successfully!&quot;);\r\n        } catch (IOException | InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n(Note that the Java process will need to have the necessary permissions to execute the FFmpeg command and access the files.)\r\n\r\nIn a real-world application, this should be wrapped in a web server (like Spring Boot) to handle HTTP requests and responses. The video would be downloaded from Google Cloud Storage to a temporary file, the FFmpeg command would be run to generate the frame, then the image file would be uploaded back to Google Cloud Storage. You would also need to include error handling and logging to ensure the process works smoothly, and any issues can be diagnosed.\r\n\r\n----\r\n\r\nAs commented, you do have [JCodec](http://jcodec.org/), a pure Java implementation of video encoders and decoders, including functionality for generating frames from a video. You can certainly use it on Google App Engine Standard Environment.\r\n\r\nThat is how you can use JCodec to extract a frame from a video:\r\n\r\n```java\r\nimport org.jcodec.api.JCodecException;\r\nimport org.jcodec.api.awt.AWTFrameGrab;\r\nimport org.jcodec.common.FileChannelWrapper;\r\nimport org.jcodec.common.NIOUtils;\r\nimport org.jcodec.common.io.SeekableByteChannel;\r\nimport org.jcodec.scale.AWTUtil;\r\n\r\nimport java.awt.image.BufferedImage;\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.nio.file.Path;\r\nimport java.nio.file.Paths;\r\nimport javax.imageio.ImageIO;\r\n\r\npublic class FrameGrabber {\r\n\r\n    public static void getFrame(String videoPath, String framePath, double frameNumber) throws IOException, JCodecException {\r\n        SeekableByteChannel bc = null;\r\n        try {\r\n            bc = NIOUtils.readableFileChannel(videoPath);\r\n            BufferedImage frame = AWTFrameGrab.getFrame(new FileChannelWrapper(bc), frameNumber);\r\n            BufferedImage rgbFrame = AWTUtil.toBufferedImage(frame);\r\n            ImageIO.write(rgbFrame, &quot;png&quot;, new File(framePath));\r\n        } finally {\r\n            NIOUtils.closeQuietly(bc);\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        try {\r\n            String videoPath = &quot;path/to/your/video.mp4&quot;;\r\n            String framePath = &quot;path/to/save/frame.png&quot;;\r\n            getFrame(videoPath, framePath, 1);\r\n            System.out.println(&quot;Frame extracted successfully!&quot;);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nYou would use the `getFrame` method, which opens the video file, extracts a frame at a specified position (the frame number is a double indicating seconds into the video), converts the frame to an RGB image, and saves the frame to a file.\r\n\r\nYou would need to adapt this code to work with your `Blob` object, possibly by first downloading the blob to a temporary file in your App Engine environment, then using JCodec to extract the frame, and finally uploading the resulting image file back to Google Cloud Storage. Note that Google App Engine has restrictions on the file system access, but you can use the temporary directory (`/tmp`) to write files.\r\n\r\nSince decoding video frames is a CPU intensive task and might take a bit of time depending on the size and length of the video, you need to be careful with the App Engine instance&#39;s resources and execution time limit.","title":"How to create thumbnail or jpeg image from a video in Google Cloud Storage server-side with Java","body":"<p>Creating a thumbnail or JPEG image from a video stored in <a href=\"https://cloud.google.com/storage\" rel=\"nofollow noreferrer\">Google Cloud Storage</a> involves a few steps and may require a bit more than just Java to accomplish. Typically, you'd use a media processing software like FFmpeg to generate frames from a video.</p>\n<p>However, using <a href=\"https://ffmpeg.org/\" rel=\"nofollow noreferrer\">FFmpeg</a> or similar tools directly in App Engine can be tricky since you are restricted in terms of installing and executing third-party binary files in the App Engine environment. Therefore, the typical solution involves using Google Cloud Functions or Google Cloud Run to execute the FFmpeg commands and App Engine to trigger these functions.</p>\n<p>That should mean:</p>\n<ul>\n<li>Uploading the Video to Google Cloud Storage. That could be done from your application running on App Engine.</li>\n<li>Creating a <a href=\"https://cloud.google.com/functions\" rel=\"nofollow noreferrer\">Google Cloud Function</a> or a <a href=\"https://cloud.google.com/run/docs/overview/what-is-cloud-run\" rel=\"nofollow noreferrer\">Cloud Run instance</a> that listens for the upload event. The function would use a tool like <code>FFmpeg</code> to generate an image from the video. It would save the image back to a Google Cloud Storage bucket.</li>\n<li>triggering the Cloud Function/Cloud Run instance, when the video is uploaded.</li>\n</ul>\n<p>Here is a Python example of a Google Cloud Function that does this (it is not Java, but it gives you an idea of what the function would need to do).<br />\n(inspired from <a href=\"https://github.com/brown-mida/elvo/blob/430453f0b71eb77f108a190cdb28b0ab3f70b631/etl/processed_dag.py#L28-L48\" rel=\"nofollow noreferrer\"><code>brown-mida/elvo/etl/processed_dag.py#to_public_png()</code></a>)<br />\nThe function is triggered when a new video is uploaded, it uses FFmpeg to grab an image from the video, then it stores the image in the bucket:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import os\nimport tempfile\nfrom google.cloud import storage\nimport subprocess\n\ndef generate_thumbnail(data, context):\n    file_data = data\n    file_name = file_data['name']\n    bucket_name = file_data['bucket']\n\n    storage_client = storage.Client()\n    bucket = storage_client.get_bucket(bucket_name)\n    blob = bucket.blob(file_name)\n\n    _, temp_local_filename = tempfile.mkstemp()\n    \n    blob.download_to_filename(temp_local_filename)\n    print(f&quot;Video downloaded to {temp_local_filename}.&quot;)\n\n    thumbnail_file = temp_local_filename + '.png'\n    \n    command = f&quot;ffmpeg -i {temp_local_filename} -ss 00:00:01 -vframes 1 {thumbnail_file}&quot;\n    subprocess.call(command, shell=True)\n\n    print(f&quot;Thumbnail created at {thumbnail_file}.&quot;)\n\n    thumbnail_blob = bucket.blob(file_name + '.png')\n    thumbnail_blob.upload_from_filename(thumbnail_file)\n\n    print(f&quot;Thumbnail uploaded to {bucket_name}/{file_name}.png&quot;)\n\n    os.remove(temp_local_filename)\n    os.remove(thumbnail_file)\n</code></pre>\n<p>With that setup, the work of generating the thumbnail is offloaded from your Java App Engine service to the Cloud Function. That would provide a scalable solution to create video thumbnails without using resources from your App Engine service.<br />\nYou can create Cloud Functions using various runtime environments like Python, Node.js, Java, Go, .NET, etc. Python was used here because FFmpeg interaction is a bit more straightforward.</p>\n<p>Warning: this type of operation might result in additional costs due to the usage of Cloud Functions/Cloud Run and the extra storage requirements for the images generated.</p>\n<p>Finally, if you need to stick with Java and use App Engine only, consider using <a href=\"https://cloud.google.com/appengine/docs/flexible\" rel=\"nofollow noreferrer\">App Engine flexible environment</a>, which would let you use FFmpeg or another tool.</p>\n<hr />\n<p>Creating a Cloud Function or Cloud Run instance in Java to do this task is more complex than using a scripting language like Python because Java does not have native support for running shell commands like <code>FFmpeg</code>.</p>\n<p>However, creating a Cloud Function or Cloud Run instance with FFmpeg is possible with Java if you use a custom Dockerfile and run a shell command from Java. That is typically done in a Cloud Run instance rather than a Cloud Function because Cloud Run allows you to use a custom Dockerfile to include FFmpeg in the runtime.</p>\n<p>For instance, here is a simple Java application that uses FFmpeg to extract a frame from a video. That could be used as the base for your Cloud Run instance.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.File;\nimport java.io.IOException;\n\npublic class Main {\n    public static void main(String[] args) {\n        String videoPath = &quot;/path/to/video.mp4&quot;;\n        String imagePath = &quot;/path/to/output.png&quot;;\n\n        // That command extracts a frame from the 1st second of the video\n        String command = String.format(&quot;ffmpeg -i %s -ss 00:00:01 -vframes 1 %s&quot;, videoPath, imagePath);\n\n        try {\n            Process process = Runtime.getRuntime().exec(command);\n            process.waitFor();\n            System.out.println(&quot;Frame extracted successfully!&quot;);\n        } catch (IOException | InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>(Note that the Java process will need to have the necessary permissions to execute the FFmpeg command and access the files.)</p>\n<p>In a real-world application, this should be wrapped in a web server (like Spring Boot) to handle HTTP requests and responses. The video would be downloaded from Google Cloud Storage to a temporary file, the FFmpeg command would be run to generate the frame, then the image file would be uploaded back to Google Cloud Storage. You would also need to include error handling and logging to ensure the process works smoothly, and any issues can be diagnosed.</p>\n<hr />\n<p>As commented, you do have <a href=\"http://jcodec.org/\" rel=\"nofollow noreferrer\">JCodec</a>, a pure Java implementation of video encoders and decoders, including functionality for generating frames from a video. You can certainly use it on Google App Engine Standard Environment.</p>\n<p>That is how you can use JCodec to extract a frame from a video:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.jcodec.api.JCodecException;\nimport org.jcodec.api.awt.AWTFrameGrab;\nimport org.jcodec.common.FileChannelWrapper;\nimport org.jcodec.common.NIOUtils;\nimport org.jcodec.common.io.SeekableByteChannel;\nimport org.jcodec.scale.AWTUtil;\n\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport java.io.IOException;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\nimport javax.imageio.ImageIO;\n\npublic class FrameGrabber {\n\n    public static void getFrame(String videoPath, String framePath, double frameNumber) throws IOException, JCodecException {\n        SeekableByteChannel bc = null;\n        try {\n            bc = NIOUtils.readableFileChannel(videoPath);\n            BufferedImage frame = AWTFrameGrab.getFrame(new FileChannelWrapper(bc), frameNumber);\n            BufferedImage rgbFrame = AWTUtil.toBufferedImage(frame);\n            ImageIO.write(rgbFrame, &quot;png&quot;, new File(framePath));\n        } finally {\n            NIOUtils.closeQuietly(bc);\n        }\n    }\n\n    public static void main(String[] args) {\n        try {\n            String videoPath = &quot;path/to/your/video.mp4&quot;;\n            String framePath = &quot;path/to/save/frame.png&quot;;\n            getFrame(videoPath, framePath, 1);\n            System.out.println(&quot;Frame extracted successfully!&quot;);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>You would use the <code>getFrame</code> method, which opens the video file, extracts a frame at a specified position (the frame number is a double indicating seconds into the video), converts the frame to an RGB image, and saves the frame to a file.</p>\n<p>You would need to adapt this code to work with your <code>Blob</code> object, possibly by first downloading the blob to a temporary file in your App Engine environment, then using JCodec to extract the frame, and finally uploading the resulting image file back to Google Cloud Storage. Note that Google App Engine has restrictions on the file system access, but you can use the temporary directory (<code>/tmp</code>) to write files.</p>\n<p>Since decoding video frames is a CPU intensive task and might take a bit of time depending on the size and length of the video, you need to be careful with the App Engine instance's resources and execution time limit.</p>\n"},{"tags":[],"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1688945940,"creation_date":1688943687,"answer_id":76649875,"question_id":56352239,"body_markdown":"Although the answer of @VonC is excellent, I would recommend you using the functionality provided by the [Transcoder API](https://cloud.google.com/transcoder/docs/concepts/overview) instead of a custom solution.\r\n\r\nSpecifically the Transcoder API gives you the capability of [generating a spritesheet of video frames](https://cloud.google.com/transcoder/docs/how-to/generate-spritesheet).\r\n\r\nAs indicated in the documentation, you have two options for generating the thumbnails:\r\n\r\n&gt; You have two options for generating the spritesheet:\r\n&gt;\r\n&gt; - [Generate a set number of thumbnail images](https://cloud.google.com/transcoder/docs/how-to/generate-spritesheet#generate_set_number_of_images) distributed evenly across the \r\n&gt; input video timeline.\r\n&gt; - [Generate a thumbnail image periodically](https://cloud.google.com/transcoder/docs/how-to/generate-spritesheet#generate_image_periodically), that is, every n seconds, across \r\n&gt; the input video timeline.\r\n\r\nThe API provides SDK for different programing languages, [Java](https://cloud.google.com/transcoder/docs/how-to/generate-spritesheet#create-job-set-number-images-spritesheet-java) ([2](https://cloud.google.com/transcoder/docs/how-to/generate-spritesheet#create-job-periodic-images-spritesheet-java)) among them. [This related example](https://cloud.google.com/transcoder/docs/samples/transcoder-create-job-with-set-number-images-spritesheet?hl=en#transcoder_create_job_with_set_number_images_spritesheet-java) could be of help as well. For reference:\r\n\r\n```java\r\n\r\nimport com.google.cloud.video.transcoder.v1.AudioStream;\r\nimport com.google.cloud.video.transcoder.v1.CreateJobRequest;\r\nimport com.google.cloud.video.transcoder.v1.ElementaryStream;\r\nimport com.google.cloud.video.transcoder.v1.Input;\r\nimport com.google.cloud.video.transcoder.v1.Job;\r\nimport com.google.cloud.video.transcoder.v1.JobConfig;\r\nimport com.google.cloud.video.transcoder.v1.LocationName;\r\nimport com.google.cloud.video.transcoder.v1.MuxStream;\r\nimport com.google.cloud.video.transcoder.v1.Output;\r\nimport com.google.cloud.video.transcoder.v1.SpriteSheet;\r\nimport com.google.cloud.video.transcoder.v1.TranscoderServiceClient;\r\nimport com.google.cloud.video.transcoder.v1.VideoStream;\r\nimport java.io.IOException;\r\n\r\npublic class CreateJobWithSetNumberImagesSpritesheet {\r\n\r\n  public static final String smallSpritesheetFilePrefix = &quot;small-sprite-sheet&quot;;\r\n  public static final String largeSpritesheetFilePrefix = &quot;large-sprite-sheet&quot;;\r\n  public static final String spritesheetFileSuffix = &quot;0000000000.jpeg&quot;;\r\n\r\n  public static void main(String[] args) throws IOException {\r\n    // TODO(developer): Replace these variables before running the sample.\r\n    String projectId = &quot;my-project-id&quot;;\r\n    String location = &quot;us-central1&quot;;\r\n    String inputUri = &quot;gs://my-bucket/my-video-file&quot;;\r\n    String outputUri = &quot;gs://my-bucket/my-output-folder/&quot;;\r\n\r\n    createJobWithSetNumberImagesSpritesheet(projectId, location, inputUri, outputUri);\r\n  }\r\n\r\n  // Creates a job from an ad-hoc configuration and generates two spritesheets from the input video.\r\n  // Each spritesheet contains a set number of images.\r\n  public static void createJobWithSetNumberImagesSpritesheet(\r\n      String projectId, String location, String inputUri, String outputUri) throws IOException {\r\n    // Initialize client that will be used to send requests. This client only needs to be created\r\n    // once, and can be reused for multiple requests.\r\n    try (TranscoderServiceClient transcoderServiceClient = TranscoderServiceClient.create()) {\r\n\r\n      VideoStream videoStream0 =\r\n          VideoStream.newBuilder()\r\n              .setH264(\r\n                  VideoStream.H264CodecSettings.newBuilder()\r\n                      .setBitrateBps(550000)\r\n                      .setFrameRate(60)\r\n                      .setHeightPixels(360)\r\n                      .setWidthPixels(640))\r\n              .build();\r\n\r\n      AudioStream audioStream0 =\r\n          AudioStream.newBuilder().setCodec(&quot;aac&quot;).setBitrateBps(64000).build();\r\n\r\n      // Generates a 10x10 spritesheet of small images from the input video. To preserve the source\r\n      // aspect ratio, you should set the spriteWidthPixels field or the spriteHeightPixels\r\n      // field, but not both.\r\n      SpriteSheet smallSpriteSheet =\r\n          SpriteSheet.newBuilder()\r\n              .setFilePrefix(smallSpritesheetFilePrefix)\r\n              .setSpriteHeightPixels(32)\r\n              .setSpriteWidthPixels(64)\r\n              .setColumnCount(10)\r\n              .setRowCount(10)\r\n              .setTotalCount(100)\r\n              .build();\r\n\r\n      // Generates a 10x10 spritesheet of larger images from the input video.\r\n      SpriteSheet largeSpriteSheet =\r\n          SpriteSheet.newBuilder()\r\n              .setFilePrefix(largeSpritesheetFilePrefix)\r\n              .setSpriteHeightPixels(72)\r\n              .setSpriteWidthPixels(128)\r\n              .setColumnCount(10)\r\n              .setRowCount(10)\r\n              .setTotalCount(100)\r\n              .build();\r\n\r\n      JobConfig config =\r\n          JobConfig.newBuilder()\r\n              .addInputs(Input.newBuilder().setKey(&quot;input0&quot;).setUri(inputUri))\r\n              .setOutput(Output.newBuilder().setUri(outputUri))\r\n              .addElementaryStreams(\r\n                  ElementaryStream.newBuilder()\r\n                      .setKey(&quot;video_stream0&quot;)\r\n                      .setVideoStream(videoStream0))\r\n              .addElementaryStreams(\r\n                  ElementaryStream.newBuilder()\r\n                      .setKey(&quot;audio_stream0&quot;)\r\n                      .setAudioStream(audioStream0))\r\n              .addMuxStreams(\r\n                  MuxStream.newBuilder()\r\n                      .setKey(&quot;sd&quot;)\r\n                      .setContainer(&quot;mp4&quot;)\r\n                      .addElementaryStreams(&quot;video_stream0&quot;)\r\n                      .addElementaryStreams(&quot;audio_stream0&quot;)\r\n                      .build())\r\n              .addSpriteSheets(smallSpriteSheet) // Add the spritesheet config to the job config\r\n              .addSpriteSheets(largeSpriteSheet) // Add the spritesheet config to the job config\r\n              .build();\r\n\r\n      var createJobRequest =\r\n          CreateJobRequest.newBuilder()\r\n              .setJob(\r\n                  Job.newBuilder()\r\n                      .setInputUri(inputUri)\r\n                      .setOutputUri(outputUri)\r\n                      .setConfig(config)\r\n                      .build())\r\n              .setParent(LocationName.of(projectId, location).toString())\r\n              .build();\r\n\r\n      // Send the job creation request and process the response.\r\n      Job job = transcoderServiceClient.createJob(createJobRequest);\r\n      System.out.println(&quot;Job: &quot; + job.getName());\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThe input of the transcoder Job is obtained from Cloud Storage.\r\n\r\nAs a consequence, in order to start the transcoding process with this code probably the way to go could be defining a [Cloud Function that responds to the creation] - object finalize event - of a video](https://cloud.google.com/functions/docs/calling/storage). \r\n\r\nYou can find an example of a function that handles this type of events in the [GCP documentation](https://cloud.google.com/functions/docs/tutorials/storage).\r\n\r\n```java\r\nimport com.google.cloud.functions.CloudEventsFunction;\r\nimport com.google.events.cloud.storage.v1.StorageObjectData;\r\nimport com.google.protobuf.InvalidProtocolBufferException;\r\nimport com.google.protobuf.util.JsonFormat;\r\nimport io.cloudevents.CloudEvent;\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.util.logging.Logger;\r\n\r\npublic class HelloGcs implements CloudEventsFunction {\r\n  private static final Logger logger = Logger.getLogger(HelloGcs.class.getName());\r\n\r\n  @Override\r\n  public void accept(CloudEvent event) throws InvalidProtocolBufferException {\r\n    logger.info(&quot;Event: &quot; + event.getId());\r\n    logger.info(&quot;Event Type: &quot; + event.getType());\r\n\r\n    if (event.getData() == null) {\r\n      logger.warning(&quot;No data found in cloud event payload!&quot;);\r\n      return;\r\n    }\r\n\r\n    String cloudEventData = new String(event.getData().toBytes(), StandardCharsets.UTF_8);\r\n    StorageObjectData.Builder builder = StorageObjectData.newBuilder();\r\n    JsonFormat.parser().merge(cloudEventData, builder);\r\n    StorageObjectData data = builder.build();\r\n\r\n    logger.info(&quot;Bucket: &quot; + data.getBucket());\r\n    logger.info(&quot;File: &quot; + data.getName());\r\n    logger.info(&quot;Metageneration: &quot; + data.getMetageneration());\r\n    logger.info(&quot;Created: &quot; + data.getTimeCreated());\r\n    logger.info(&quot;Updated: &quot; + data.getUpdated());\r\n  }\r\n}\r\n```\r\n\r\nThe final code in the function could be similar to this (forgive for any inaccuracy, I just try combining the two samples):\r\n\r\n```java\r\nimport com.google.cloud.functions.CloudEventsFunction;\r\nimport com.google.events.cloud.storage.v1.StorageObjectData;\r\nimport com.google.protobuf.InvalidProtocolBufferException;\r\nimport com.google.protobuf.util.JsonFormat;\r\nimport io.cloudevents.CloudEvent;\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.util.logging.Logger;\r\n\r\nimport com.google.cloud.video.transcoder.v1.AudioStream;\r\nimport com.google.cloud.video.transcoder.v1.CreateJobRequest;\r\nimport com.google.cloud.video.transcoder.v1.ElementaryStream;\r\nimport com.google.cloud.video.transcoder.v1.Input;\r\nimport com.google.cloud.video.transcoder.v1.Job;\r\nimport com.google.cloud.video.transcoder.v1.JobConfig;\r\nimport com.google.cloud.video.transcoder.v1.LocationName;\r\nimport com.google.cloud.video.transcoder.v1.MuxStream;\r\nimport com.google.cloud.video.transcoder.v1.Output;\r\nimport com.google.cloud.video.transcoder.v1.SpriteSheet;\r\nimport com.google.cloud.video.transcoder.v1.TranscoderServiceClient;\r\nimport com.google.cloud.video.transcoder.v1.VideoStream;\r\nimport java.io.IOException;\r\n\r\npublic class TranscodingFunction implements CloudEventsFunction {\r\n  private static final Logger logger = Logger.getLogger(HelloGcs.class.getName());\r\n\r\n  public static final String smallSpritesheetFilePrefix = &quot;small-sprite-sheet&quot;;\r\n  public static final String largeSpritesheetFilePrefix = &quot;large-sprite-sheet&quot;;\r\n  public static final String spritesheetFileSuffix = &quot;0000000000.jpeg&quot;;\r\n\r\n  String projectId = &quot;my-project-id&quot;;\r\n  String location = &quot;us-central1&quot;;\r\n\r\n  @Override\r\n  public void accept(CloudEvent event) throws InvalidProtocolBufferException {\r\n    logger.info(&quot;Event: &quot; + event.getId());\r\n    logger.info(&quot;Event Type: &quot; + event.getType());\r\n\r\n    if (event.getData() == null) {\r\n      logger.warning(&quot;No data found in cloud event payload!&quot;);\r\n      return;\r\n    }\r\n\r\n    String cloudEventData = new String(event.getData().toBytes(), StandardCharsets.UTF_8);\r\n    StorageObjectData.Builder builder = StorageObjectData.newBuilder();\r\n    JsonFormat.parser().merge(cloudEventData, builder);\r\n    StorageObjectData data = builder.build();\r\n\r\n    logger.info(&quot;Bucket: &quot; + data.getBucket());\r\n    logger.info(&quot;File: &quot; + data.getName());\r\n    logger.info(&quot;Metageneration: &quot; + data.getMetageneration());\r\n    logger.info(&quot;Created: &quot; + data.getTimeCreated());\r\n    logger.info(&quot;Updated: &quot; + data.getUpdated());\r\n\r\n    String inputUri = data.getBucket() + data.getName();\r\n    String outputUri = &quot;gs://my-bucket/my-output-folder/&quot;;\r\n\r\n    // Initialize client that will be used to send requests. This client only needs to be created\r\n    // once, and can be reused for multiple requests.\r\n    try (TranscoderServiceClient transcoderServiceClient = TranscoderServiceClient.create()) {\r\n\r\n      VideoStream videoStream0 =\r\n          VideoStream.newBuilder()\r\n              .setH264(\r\n                  VideoStream.H264CodecSettings.newBuilder()\r\n                      .setBitrateBps(550000)\r\n                      .setFrameRate(60)\r\n                      .setHeightPixels(360)\r\n                      .setWidthPixels(640))\r\n              .build();\r\n\r\n      AudioStream audioStream0 =\r\n          AudioStream.newBuilder().setCodec(&quot;aac&quot;).setBitrateBps(64000).build();\r\n\r\n      // Generates a 10x10 spritesheet of small images from the input video. To preserve the source\r\n      // aspect ratio, you should set the spriteWidthPixels field or the spriteHeightPixels\r\n      // field, but not both.\r\n      SpriteSheet smallSpriteSheet =\r\n          SpriteSheet.newBuilder()\r\n              .setFilePrefix(smallSpritesheetFilePrefix)\r\n              .setSpriteHeightPixels(32)\r\n              .setSpriteWidthPixels(64)\r\n              .setColumnCount(10)\r\n              .setRowCount(10)\r\n              .setTotalCount(100)\r\n              .build();\r\n\r\n      // Generates a 10x10 spritesheet of larger images from the input video.\r\n      SpriteSheet largeSpriteSheet =\r\n          SpriteSheet.newBuilder()\r\n              .setFilePrefix(largeSpritesheetFilePrefix)\r\n              .setSpriteHeightPixels(72)\r\n              .setSpriteWidthPixels(128)\r\n              .setColumnCount(10)\r\n              .setRowCount(10)\r\n              .setTotalCount(100)\r\n              .build();\r\n\r\n      JobConfig config =\r\n          JobConfig.newBuilder()\r\n              .addInputs(Input.newBuilder().setKey(&quot;input0&quot;).setUri(inputUri))\r\n              .setOutput(Output.newBuilder().setUri(outputUri))\r\n              .addElementaryStreams(\r\n                  ElementaryStream.newBuilder()\r\n                      .setKey(&quot;video_stream0&quot;)\r\n                      .setVideoStream(videoStream0))\r\n              .addElementaryStreams(\r\n                  ElementaryStream.newBuilder()\r\n                      .setKey(&quot;audio_stream0&quot;)\r\n                      .setAudioStream(audioStream0))\r\n              .addMuxStreams(\r\n                  MuxStream.newBuilder()\r\n                      .setKey(&quot;sd&quot;)\r\n                      .setContainer(&quot;mp4&quot;)\r\n                      .addElementaryStreams(&quot;video_stream0&quot;)\r\n                      .addElementaryStreams(&quot;audio_stream0&quot;)\r\n                      .build())\r\n              .addSpriteSheets(smallSpriteSheet) // Add the spritesheet config to the job config\r\n              .addSpriteSheets(largeSpriteSheet) // Add the spritesheet config to the job config\r\n              .build();\r\n\r\n      var createJobRequest =\r\n          CreateJobRequest.newBuilder()\r\n              .setJob(\r\n                  Job.newBuilder()\r\n                      .setInputUri(inputUri)\r\n                      .setOutputUri(outputUri)\r\n                      .setConfig(config)\r\n                      .build())\r\n              .setParent(LocationName.of(projectId, location).toString())\r\n              .build();\r\n\r\n      // Send the job creation request and process the response.\r\n      Job job = transcoderServiceClient.createJob(createJobRequest);\r\n      System.out.println(&quot;Job: &quot; + job.getName());\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThe event trigger and the function should be properly configured.\r\n\r\nPlease, note that the transcoding job is asynchronous, you may need some additional work to read the results.\r\n\r\nAlthough probably more complex, but based in this idea, [this blog post](https://medium.com/google-cloud/automate-your-vod-transcoding-at-scale-with-gcp-part-1-87503fdd3a9f) and the [companion one](https://medium.com/google-cloud/automate-your-vod-transcoding-at-scale-with-gcp-part-2-b1da0e57823d) could be of help.","title":"How to create thumbnail or jpeg image from a video in Google Cloud Storage server-side with Java","body":"<p>Although the answer of @VonC is excellent, I would recommend you using the functionality provided by the <a href=\"https://cloud.google.com/transcoder/docs/concepts/overview\" rel=\"nofollow noreferrer\">Transcoder API</a> instead of a custom solution.</p>\n<p>Specifically the Transcoder API gives you the capability of <a href=\"https://cloud.google.com/transcoder/docs/how-to/generate-spritesheet\" rel=\"nofollow noreferrer\">generating a spritesheet of video frames</a>.</p>\n<p>As indicated in the documentation, you have two options for generating the thumbnails:</p>\n<blockquote>\n<p>You have two options for generating the spritesheet:</p>\n<ul>\n<li><a href=\"https://cloud.google.com/transcoder/docs/how-to/generate-spritesheet#generate_set_number_of_images\" rel=\"nofollow noreferrer\">Generate a set number of thumbnail images</a> distributed evenly across the\ninput video timeline.</li>\n<li><a href=\"https://cloud.google.com/transcoder/docs/how-to/generate-spritesheet#generate_image_periodically\" rel=\"nofollow noreferrer\">Generate a thumbnail image periodically</a>, that is, every n seconds, across\nthe input video timeline.</li>\n</ul>\n</blockquote>\n<p>The API provides SDK for different programing languages, <a href=\"https://cloud.google.com/transcoder/docs/how-to/generate-spritesheet#create-job-set-number-images-spritesheet-java\" rel=\"nofollow noreferrer\">Java</a> (<a href=\"https://cloud.google.com/transcoder/docs/how-to/generate-spritesheet#create-job-periodic-images-spritesheet-java\" rel=\"nofollow noreferrer\">2</a>) among them. <a href=\"https://cloud.google.com/transcoder/docs/samples/transcoder-create-job-with-set-number-images-spritesheet?hl=en#transcoder_create_job_with_set_number_images_spritesheet-java\" rel=\"nofollow noreferrer\">This related example</a> could be of help as well. For reference:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nimport com.google.cloud.video.transcoder.v1.AudioStream;\nimport com.google.cloud.video.transcoder.v1.CreateJobRequest;\nimport com.google.cloud.video.transcoder.v1.ElementaryStream;\nimport com.google.cloud.video.transcoder.v1.Input;\nimport com.google.cloud.video.transcoder.v1.Job;\nimport com.google.cloud.video.transcoder.v1.JobConfig;\nimport com.google.cloud.video.transcoder.v1.LocationName;\nimport com.google.cloud.video.transcoder.v1.MuxStream;\nimport com.google.cloud.video.transcoder.v1.Output;\nimport com.google.cloud.video.transcoder.v1.SpriteSheet;\nimport com.google.cloud.video.transcoder.v1.TranscoderServiceClient;\nimport com.google.cloud.video.transcoder.v1.VideoStream;\nimport java.io.IOException;\n\npublic class CreateJobWithSetNumberImagesSpritesheet {\n\n  public static final String smallSpritesheetFilePrefix = &quot;small-sprite-sheet&quot;;\n  public static final String largeSpritesheetFilePrefix = &quot;large-sprite-sheet&quot;;\n  public static final String spritesheetFileSuffix = &quot;0000000000.jpeg&quot;;\n\n  public static void main(String[] args) throws IOException {\n    // TODO(developer): Replace these variables before running the sample.\n    String projectId = &quot;my-project-id&quot;;\n    String location = &quot;us-central1&quot;;\n    String inputUri = &quot;gs://my-bucket/my-video-file&quot;;\n    String outputUri = &quot;gs://my-bucket/my-output-folder/&quot;;\n\n    createJobWithSetNumberImagesSpritesheet(projectId, location, inputUri, outputUri);\n  }\n\n  // Creates a job from an ad-hoc configuration and generates two spritesheets from the input video.\n  // Each spritesheet contains a set number of images.\n  public static void createJobWithSetNumberImagesSpritesheet(\n      String projectId, String location, String inputUri, String outputUri) throws IOException {\n    // Initialize client that will be used to send requests. This client only needs to be created\n    // once, and can be reused for multiple requests.\n    try (TranscoderServiceClient transcoderServiceClient = TranscoderServiceClient.create()) {\n\n      VideoStream videoStream0 =\n          VideoStream.newBuilder()\n              .setH264(\n                  VideoStream.H264CodecSettings.newBuilder()\n                      .setBitrateBps(550000)\n                      .setFrameRate(60)\n                      .setHeightPixels(360)\n                      .setWidthPixels(640))\n              .build();\n\n      AudioStream audioStream0 =\n          AudioStream.newBuilder().setCodec(&quot;aac&quot;).setBitrateBps(64000).build();\n\n      // Generates a 10x10 spritesheet of small images from the input video. To preserve the source\n      // aspect ratio, you should set the spriteWidthPixels field or the spriteHeightPixels\n      // field, but not both.\n      SpriteSheet smallSpriteSheet =\n          SpriteSheet.newBuilder()\n              .setFilePrefix(smallSpritesheetFilePrefix)\n              .setSpriteHeightPixels(32)\n              .setSpriteWidthPixels(64)\n              .setColumnCount(10)\n              .setRowCount(10)\n              .setTotalCount(100)\n              .build();\n\n      // Generates a 10x10 spritesheet of larger images from the input video.\n      SpriteSheet largeSpriteSheet =\n          SpriteSheet.newBuilder()\n              .setFilePrefix(largeSpritesheetFilePrefix)\n              .setSpriteHeightPixels(72)\n              .setSpriteWidthPixels(128)\n              .setColumnCount(10)\n              .setRowCount(10)\n              .setTotalCount(100)\n              .build();\n\n      JobConfig config =\n          JobConfig.newBuilder()\n              .addInputs(Input.newBuilder().setKey(&quot;input0&quot;).setUri(inputUri))\n              .setOutput(Output.newBuilder().setUri(outputUri))\n              .addElementaryStreams(\n                  ElementaryStream.newBuilder()\n                      .setKey(&quot;video_stream0&quot;)\n                      .setVideoStream(videoStream0))\n              .addElementaryStreams(\n                  ElementaryStream.newBuilder()\n                      .setKey(&quot;audio_stream0&quot;)\n                      .setAudioStream(audioStream0))\n              .addMuxStreams(\n                  MuxStream.newBuilder()\n                      .setKey(&quot;sd&quot;)\n                      .setContainer(&quot;mp4&quot;)\n                      .addElementaryStreams(&quot;video_stream0&quot;)\n                      .addElementaryStreams(&quot;audio_stream0&quot;)\n                      .build())\n              .addSpriteSheets(smallSpriteSheet) // Add the spritesheet config to the job config\n              .addSpriteSheets(largeSpriteSheet) // Add the spritesheet config to the job config\n              .build();\n\n      var createJobRequest =\n          CreateJobRequest.newBuilder()\n              .setJob(\n                  Job.newBuilder()\n                      .setInputUri(inputUri)\n                      .setOutputUri(outputUri)\n                      .setConfig(config)\n                      .build())\n              .setParent(LocationName.of(projectId, location).toString())\n              .build();\n\n      // Send the job creation request and process the response.\n      Job job = transcoderServiceClient.createJob(createJobRequest);\n      System.out.println(&quot;Job: &quot; + job.getName());\n    }\n  }\n}\n</code></pre>\n<p>The input of the transcoder Job is obtained from Cloud Storage.</p>\n<p>As a consequence, in order to start the transcoding process with this code probably the way to go could be defining a [Cloud Function that responds to the creation] - object finalize event - of a video](<a href=\"https://cloud.google.com/functions/docs/calling/storage\" rel=\"nofollow noreferrer\">https://cloud.google.com/functions/docs/calling/storage</a>).</p>\n<p>You can find an example of a function that handles this type of events in the <a href=\"https://cloud.google.com/functions/docs/tutorials/storage\" rel=\"nofollow noreferrer\">GCP documentation</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.google.cloud.functions.CloudEventsFunction;\nimport com.google.events.cloud.storage.v1.StorageObjectData;\nimport com.google.protobuf.InvalidProtocolBufferException;\nimport com.google.protobuf.util.JsonFormat;\nimport io.cloudevents.CloudEvent;\nimport java.nio.charset.StandardCharsets;\nimport java.util.logging.Logger;\n\npublic class HelloGcs implements CloudEventsFunction {\n  private static final Logger logger = Logger.getLogger(HelloGcs.class.getName());\n\n  @Override\n  public void accept(CloudEvent event) throws InvalidProtocolBufferException {\n    logger.info(&quot;Event: &quot; + event.getId());\n    logger.info(&quot;Event Type: &quot; + event.getType());\n\n    if (event.getData() == null) {\n      logger.warning(&quot;No data found in cloud event payload!&quot;);\n      return;\n    }\n\n    String cloudEventData = new String(event.getData().toBytes(), StandardCharsets.UTF_8);\n    StorageObjectData.Builder builder = StorageObjectData.newBuilder();\n    JsonFormat.parser().merge(cloudEventData, builder);\n    StorageObjectData data = builder.build();\n\n    logger.info(&quot;Bucket: &quot; + data.getBucket());\n    logger.info(&quot;File: &quot; + data.getName());\n    logger.info(&quot;Metageneration: &quot; + data.getMetageneration());\n    logger.info(&quot;Created: &quot; + data.getTimeCreated());\n    logger.info(&quot;Updated: &quot; + data.getUpdated());\n  }\n}\n</code></pre>\n<p>The final code in the function could be similar to this (forgive for any inaccuracy, I just try combining the two samples):</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.google.cloud.functions.CloudEventsFunction;\nimport com.google.events.cloud.storage.v1.StorageObjectData;\nimport com.google.protobuf.InvalidProtocolBufferException;\nimport com.google.protobuf.util.JsonFormat;\nimport io.cloudevents.CloudEvent;\nimport java.nio.charset.StandardCharsets;\nimport java.util.logging.Logger;\n\nimport com.google.cloud.video.transcoder.v1.AudioStream;\nimport com.google.cloud.video.transcoder.v1.CreateJobRequest;\nimport com.google.cloud.video.transcoder.v1.ElementaryStream;\nimport com.google.cloud.video.transcoder.v1.Input;\nimport com.google.cloud.video.transcoder.v1.Job;\nimport com.google.cloud.video.transcoder.v1.JobConfig;\nimport com.google.cloud.video.transcoder.v1.LocationName;\nimport com.google.cloud.video.transcoder.v1.MuxStream;\nimport com.google.cloud.video.transcoder.v1.Output;\nimport com.google.cloud.video.transcoder.v1.SpriteSheet;\nimport com.google.cloud.video.transcoder.v1.TranscoderServiceClient;\nimport com.google.cloud.video.transcoder.v1.VideoStream;\nimport java.io.IOException;\n\npublic class TranscodingFunction implements CloudEventsFunction {\n  private static final Logger logger = Logger.getLogger(HelloGcs.class.getName());\n\n  public static final String smallSpritesheetFilePrefix = &quot;small-sprite-sheet&quot;;\n  public static final String largeSpritesheetFilePrefix = &quot;large-sprite-sheet&quot;;\n  public static final String spritesheetFileSuffix = &quot;0000000000.jpeg&quot;;\n\n  String projectId = &quot;my-project-id&quot;;\n  String location = &quot;us-central1&quot;;\n\n  @Override\n  public void accept(CloudEvent event) throws InvalidProtocolBufferException {\n    logger.info(&quot;Event: &quot; + event.getId());\n    logger.info(&quot;Event Type: &quot; + event.getType());\n\n    if (event.getData() == null) {\n      logger.warning(&quot;No data found in cloud event payload!&quot;);\n      return;\n    }\n\n    String cloudEventData = new String(event.getData().toBytes(), StandardCharsets.UTF_8);\n    StorageObjectData.Builder builder = StorageObjectData.newBuilder();\n    JsonFormat.parser().merge(cloudEventData, builder);\n    StorageObjectData data = builder.build();\n\n    logger.info(&quot;Bucket: &quot; + data.getBucket());\n    logger.info(&quot;File: &quot; + data.getName());\n    logger.info(&quot;Metageneration: &quot; + data.getMetageneration());\n    logger.info(&quot;Created: &quot; + data.getTimeCreated());\n    logger.info(&quot;Updated: &quot; + data.getUpdated());\n\n    String inputUri = data.getBucket() + data.getName();\n    String outputUri = &quot;gs://my-bucket/my-output-folder/&quot;;\n\n    // Initialize client that will be used to send requests. This client only needs to be created\n    // once, and can be reused for multiple requests.\n    try (TranscoderServiceClient transcoderServiceClient = TranscoderServiceClient.create()) {\n\n      VideoStream videoStream0 =\n          VideoStream.newBuilder()\n              .setH264(\n                  VideoStream.H264CodecSettings.newBuilder()\n                      .setBitrateBps(550000)\n                      .setFrameRate(60)\n                      .setHeightPixels(360)\n                      .setWidthPixels(640))\n              .build();\n\n      AudioStream audioStream0 =\n          AudioStream.newBuilder().setCodec(&quot;aac&quot;).setBitrateBps(64000).build();\n\n      // Generates a 10x10 spritesheet of small images from the input video. To preserve the source\n      // aspect ratio, you should set the spriteWidthPixels field or the spriteHeightPixels\n      // field, but not both.\n      SpriteSheet smallSpriteSheet =\n          SpriteSheet.newBuilder()\n              .setFilePrefix(smallSpritesheetFilePrefix)\n              .setSpriteHeightPixels(32)\n              .setSpriteWidthPixels(64)\n              .setColumnCount(10)\n              .setRowCount(10)\n              .setTotalCount(100)\n              .build();\n\n      // Generates a 10x10 spritesheet of larger images from the input video.\n      SpriteSheet largeSpriteSheet =\n          SpriteSheet.newBuilder()\n              .setFilePrefix(largeSpritesheetFilePrefix)\n              .setSpriteHeightPixels(72)\n              .setSpriteWidthPixels(128)\n              .setColumnCount(10)\n              .setRowCount(10)\n              .setTotalCount(100)\n              .build();\n\n      JobConfig config =\n          JobConfig.newBuilder()\n              .addInputs(Input.newBuilder().setKey(&quot;input0&quot;).setUri(inputUri))\n              .setOutput(Output.newBuilder().setUri(outputUri))\n              .addElementaryStreams(\n                  ElementaryStream.newBuilder()\n                      .setKey(&quot;video_stream0&quot;)\n                      .setVideoStream(videoStream0))\n              .addElementaryStreams(\n                  ElementaryStream.newBuilder()\n                      .setKey(&quot;audio_stream0&quot;)\n                      .setAudioStream(audioStream0))\n              .addMuxStreams(\n                  MuxStream.newBuilder()\n                      .setKey(&quot;sd&quot;)\n                      .setContainer(&quot;mp4&quot;)\n                      .addElementaryStreams(&quot;video_stream0&quot;)\n                      .addElementaryStreams(&quot;audio_stream0&quot;)\n                      .build())\n              .addSpriteSheets(smallSpriteSheet) // Add the spritesheet config to the job config\n              .addSpriteSheets(largeSpriteSheet) // Add the spritesheet config to the job config\n              .build();\n\n      var createJobRequest =\n          CreateJobRequest.newBuilder()\n              .setJob(\n                  Job.newBuilder()\n                      .setInputUri(inputUri)\n                      .setOutputUri(outputUri)\n                      .setConfig(config)\n                      .build())\n              .setParent(LocationName.of(projectId, location).toString())\n              .build();\n\n      // Send the job creation request and process the response.\n      Job job = transcoderServiceClient.createJob(createJobRequest);\n      System.out.println(&quot;Job: &quot; + job.getName());\n    }\n  }\n}\n</code></pre>\n<p>The event trigger and the function should be properly configured.</p>\n<p>Please, note that the transcoding job is asynchronous, you may need some additional work to read the results.</p>\n<p>Although probably more complex, but based in this idea, <a href=\"https://medium.com/google-cloud/automate-your-vod-transcoding-at-scale-with-gcp-part-1-87503fdd3a9f\" rel=\"nofollow noreferrer\">this blog post</a> and the <a href=\"https://medium.com/google-cloud/automate-your-vod-transcoding-at-scale-with-gcp-part-2-b1da0e57823d\" rel=\"nofollow noreferrer\">companion one</a> could be of help.</p>\n"}],"owner":{"account_id":3147269,"reputation":10469,"user_id":3075340,"accept_rate":70,"display_name":"Micro"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":884,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":76649875,"answer_count":2,"score":2,"last_activity_date":1689342772,"creation_date":1559096310,"question_id":56352239,"body_markdown":"How do you take a video from Google Cloud Storage and generate a jpeg image from one of its frames? \r\n\r\nThe frame can be used as a thumbnail for the video. Or by getting frames at periodic times that can be used to make preview frames when scrubbing the video.\r\n\r\nI like to do this with Java server-side (on Google App Engine). This is the code I can use to get the Blob of the video in Google Cloud Storage. What are my options after I do that?\r\n\r\n    Storage storage = StorageOptions.getDefaultInstance().getService();\r\n    BlobId blobId = BlobId.of(BUCKET, OBJECT_NAME);\r\n    Blob blob = storage.get(blobId);\r\n\r\nI&#39;m looking for a fast and lightweight solution because this will be run server-side in Google App Engine.","title":"How to create thumbnail or jpeg image from a video in Google Cloud Storage server-side with Java","body":"<p>How do you take a video from Google Cloud Storage and generate a jpeg image from one of its frames?</p>\n<p>The frame can be used as a thumbnail for the video. Or by getting frames at periodic times that can be used to make preview frames when scrubbing the video.</p>\n<p>I like to do this with Java server-side (on Google App Engine). This is the code I can use to get the Blob of the video in Google Cloud Storage. What are my options after I do that?</p>\n<pre><code>Storage storage = StorageOptions.getDefaultInstance().getService();\nBlobId blobId = BlobId.of(BUCKET, OBJECT_NAME);\nBlob blob = storage.get(blobId);\n</code></pre>\n<p>I'm looking for a fast and lightweight solution because this will be run server-side in Google App Engine.</p>\n"},{"tags":["java","android","wear-os"],"comments":[{"owner":{"account_id":22687542,"reputation":271,"user_id":16856898,"display_name":"RatherBeSailing"},"score":0,"creation_date":1689643749,"post_id":74393038,"comment_id":135239565,"body_markdown":"did you manage to get this working? I have added focusable = FOCUSABLE and called requestFocus() (multiple times) but no events are reported by the GenericMotionListener when attached to a TextView (works perfectly when linked to a separate RecyclerView)","body":"did you manage to get this working? I have added focusable = FOCUSABLE and called requestFocus() (multiple times) but no events are reported by the GenericMotionListener when attached to a TextView (works perfectly when linked to a separate RecyclerView)"}],"answers":[{"tags":[],"owner":{"account_id":1481915,"reputation":12601,"user_id":1542667,"accept_rate":75,"display_name":"Yuri Schimke"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668197235,"creation_date":1668169739,"answer_id":74402525,"question_id":74393038,"body_markdown":"Docs here\r\n\r\nhttps://developer.android.com/training/wearables/user-input/rotary-input#custom-scrolling\r\n\r\nLikely issue is focus\r\n\r\n&gt; Remember to make sure your view gains focus, otherwise the events will not come through. \r\n\r\nhttps://developer.android.com/training/wearables/user-input/rotary-input#custom-scrolling\r\n\r\n&gt; By default, launching an activity or even tapping on a view does not give it focus, even if it is focusable. To give your view focus, the view must use the &lt;requestFocus /&gt; tag or manually call View.requestFocus(). ","title":"WearOS onGenericMotionListener not called","body":"<p>Docs here</p>\n<p><a href=\"https://developer.android.com/training/wearables/user-input/rotary-input#custom-scrolling\" rel=\"nofollow noreferrer\">https://developer.android.com/training/wearables/user-input/rotary-input#custom-scrolling</a></p>\n<p>Likely issue is focus</p>\n<blockquote>\n<p>Remember to make sure your view gains focus, otherwise the events will not come through.</p>\n</blockquote>\n<p><a href=\"https://developer.android.com/training/wearables/user-input/rotary-input#custom-scrolling\" rel=\"nofollow noreferrer\">https://developer.android.com/training/wearables/user-input/rotary-input#custom-scrolling</a></p>\n<blockquote>\n<p>By default, launching an activity or even tapping on a view does not give it focus, even if it is focusable. To give your view focus, the view must use the  tag or manually call View.requestFocus().</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":12087915,"reputation":1,"user_id":8835685,"display_name":"Suresh Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689342560,"creation_date":1689072743,"answer_id":76661236,"question_id":74393038,"body_markdown":"For example, if you are going to use for `Recyclerview`.\r\n\r\nAdd the following attribute to your `recyclerview` XML tag.\r\n```xml\r\nfocusable=&quot;true&quot;\r\nfocusableInTouchMode=&quot;true&quot;\r\n```\r\n\r\nThen try `setOnGenericMotionListener`, and it will work.","title":"WearOS onGenericMotionListener not called","body":"<p>For example, if you are going to use for <code>Recyclerview</code>.</p>\n<p>Add the following attribute to your <code>recyclerview</code> XML tag.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>focusable=&quot;true&quot;\nfocusableInTouchMode=&quot;true&quot;\n</code></pre>\n<p>Then try <code>setOnGenericMotionListener</code>, and it will work.</p>\n"}],"owner":{"account_id":17423183,"reputation":390,"user_id":12628376,"display_name":"MaxK123"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":150,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1689342560,"creation_date":1668101096,"question_id":74393038,"body_markdown":"I am trying to catch the action when I rotate my bezel on my Samsung Galaxy Watch 4, but it never &quot;runs&quot;.\r\n\r\nHere is my code:\r\n\r\n    findViewById(R.id.Badtunna).setOnGenericMotionListener(new View.OnGenericMotionListener() {\r\n            @Override\r\n            public boolean onGenericMotion(View view, MotionEvent motionEvent) {\r\n                System.out.println(&quot;GUM&quot;);\r\n                if(motionEvent.getAction() == MotionEvent.ACTION_SCROLL &amp;&amp;\r\n                motionEvent.isFromSource(InputDeviceCompat.SOURCE_ROTARY_ENCODER)) {\r\n                    System.out.println(&quot;BUBBEL&quot;);\r\n\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n        });\r\n\r\nMy view is a normal TextView:\r\n\r\n    &lt;TextView\r\n                android:id=&quot;@+id/Badtunna&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:text=&quot;Badtunna&quot; /&gt;\r\n\r\nHere is my onCreate() in MainActivity\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        binding = ActivityMainBinding.inflate(getLayoutInflater());\r\n        setContentView(binding.getRoot());\r\n\r\n        StrictMode.ThreadPolicy policy = new\r\n        StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n        StrictMode.setThreadPolicy(policy);\r\n\r\n        // Add all the domoticz devices\r\n        domoticz_devices.put(766, &quot;idx_766&quot;);\r\n        domoticz_devices.put(17, &quot;idx_17&quot;);\r\n\r\n        findViewById(R.id.Skymningssensor).requestFocus();\r\n\r\n        findViewById(R.id.Skymningssensor).setOnGenericMotionListener(new View.OnGenericMotionListener() {\r\n            @Override\r\n            public boolean onGenericMotion(View view, MotionEvent motionEvent) {\r\n                System.out.println(&quot;GUM&quot;);\r\n                if(motionEvent.getAction() == MotionEvent.ACTION_SCROLL &amp;&amp;\r\n                        motionEvent.isFromSource(InputDeviceCompat.SOURCE_ROTARY_ENCODER)) {\r\n                    System.out.println(&quot;BUBBEL&quot;);\r\n\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n        });\r\n\r\n        TextView idx_17_button = findViewById(R.id.idx_17);\r\n        idx_17_button.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                try {\r\n                    toggleDomoticzDevice(17, &quot;idx_17&quot;);\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        });\r\n\r\n        TextView idx_657_button = findViewById(R.id.idx_657);\r\n        idx_657_button.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                try {\r\n                    toggleDomoticzDevice(657, &quot;idx_657&quot;);\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n        handler.postDelayed(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                for (Integer i : domoticz_devices.keySet()) {\r\n                    getDomoticzDeviceAndSetTextview(i, domoticz_devices.get(i));\r\n                }\r\n                handler.postDelayed(this, delay);\r\n            }\r\n        }, delay);\r\n    }\r\n\r\nWhen focus is &quot;working&quot; should the keyboard pop up?\r\nI have also updated my TextView and added focusable:true and focusableintouchmode:true\r\n\r\nThanks in advance!\r\n\r\nBest regards Max","title":"WearOS onGenericMotionListener not called","body":"<p>I am trying to catch the action when I rotate my bezel on my Samsung Galaxy Watch 4, but it never &quot;runs&quot;.</p>\n<p>Here is my code:</p>\n<pre><code>findViewById(R.id.Badtunna).setOnGenericMotionListener(new View.OnGenericMotionListener() {\n        @Override\n        public boolean onGenericMotion(View view, MotionEvent motionEvent) {\n            System.out.println(&quot;GUM&quot;);\n            if(motionEvent.getAction() == MotionEvent.ACTION_SCROLL &amp;&amp;\n            motionEvent.isFromSource(InputDeviceCompat.SOURCE_ROTARY_ENCODER)) {\n                System.out.println(&quot;BUBBEL&quot;);\n\n                return true;\n            }\n            return false;\n        }\n    });\n</code></pre>\n<p>My view is a normal TextView:</p>\n<pre><code>&lt;TextView\n            android:id=&quot;@+id/Badtunna&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;Badtunna&quot; /&gt;\n</code></pre>\n<p>Here is my onCreate() in MainActivity</p>\n<pre><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n\n    binding = ActivityMainBinding.inflate(getLayoutInflater());\n    setContentView(binding.getRoot());\n\n    StrictMode.ThreadPolicy policy = new\n    StrictMode.ThreadPolicy.Builder().permitAll().build();\n    StrictMode.setThreadPolicy(policy);\n\n    // Add all the domoticz devices\n    domoticz_devices.put(766, &quot;idx_766&quot;);\n    domoticz_devices.put(17, &quot;idx_17&quot;);\n\n    findViewById(R.id.Skymningssensor).requestFocus();\n\n    findViewById(R.id.Skymningssensor).setOnGenericMotionListener(new View.OnGenericMotionListener() {\n        @Override\n        public boolean onGenericMotion(View view, MotionEvent motionEvent) {\n            System.out.println(&quot;GUM&quot;);\n            if(motionEvent.getAction() == MotionEvent.ACTION_SCROLL &amp;&amp;\n                    motionEvent.isFromSource(InputDeviceCompat.SOURCE_ROTARY_ENCODER)) {\n                System.out.println(&quot;BUBBEL&quot;);\n\n                return true;\n            }\n            return false;\n        }\n    });\n\n    TextView idx_17_button = findViewById(R.id.idx_17);\n    idx_17_button.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            try {\n                toggleDomoticzDevice(17, &quot;idx_17&quot;);\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    });\n\n    TextView idx_657_button = findViewById(R.id.idx_657);\n    idx_657_button.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            try {\n                toggleDomoticzDevice(657, &quot;idx_657&quot;);\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    });\n\n\n    handler.postDelayed(new Runnable() {\n        @Override\n        public void run() {\n            for (Integer i : domoticz_devices.keySet()) {\n                getDomoticzDeviceAndSetTextview(i, domoticz_devices.get(i));\n            }\n            handler.postDelayed(this, delay);\n        }\n    }, delay);\n}\n</code></pre>\n<p>When focus is &quot;working&quot; should the keyboard pop up?\nI have also updated my TextView and added focusable:true and focusableintouchmode:true</p>\n<p>Thanks in advance!</p>\n<p>Best regards Max</p>\n"},{"tags":["java","docker","maven"],"comments":[{"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"score":0,"creation_date":1689179327,"post_id":76672679,"comment_id":135177906,"body_markdown":"Looks similar too: https://stackoverflow.com/questions/138511/what-are-java-command-line-options-to-set-to-allow-jvm-to-be-remotely-debugged, please consider using `address=*:8000` instead, and please check that port 8000 is not already being used by another service","body":"Looks similar too: <a href=\"https://stackoverflow.com/questions/138511/what-are-java-command-line-options-to-set-to-allow-jvm-to-be-remotely-debugged\" title=\"what are java command line options to set to allow jvm to be remotely debugged\">stackoverflow.com/questions/138511/&hellip;</a>, please consider using <code>address=*:8000</code> instead, and please check that port 8000 is not already being used by another service"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689233770,"post_id":76672679,"comment_id":135185040,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":24522084,"reputation":1,"user_id":18434972,"display_name":"user18434972"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689342452,"creation_date":1689179158,"question_id":76672679,"body_markdown":"\r\nThe host is set to `localhost` and the port is set to `8000`.\r\n\r\nCommand line arguments: \r\n`-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=8000`\r\n\r\nTrying to debug my application. Tried setting the port to 5000 and 8983 and got the `&#39;connection refused&#39; error. command line arguments is not editable`.  Here is the screenshot  \r\n\r\nDoes anyone know how to resolve this?","title":"Error running &#39;application&#39;: Unable to open debugger port (localhost:8000): java.io.IOException &quot;handshake failed - connection prematurally closed","body":"<p>The host is set to <code>localhost</code> and the port is set to <code>8000</code>.</p>\n<p>Command line arguments:\n<code>-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=8000</code></p>\n<p>Trying to debug my application. Tried setting the port to 5000 and 8983 and got the <code>'connection refused' error. command line arguments is not editable</code>.  Here is the screenshot</p>\n<p>Does anyone know how to resolve this?</p>\n"},{"tags":["java","overriding","covariance","contravariance","generic-variance"],"owner":{"account_id":4816487,"reputation":4550,"user_id":3888450,"accept_rate":89,"display_name":"Stefan Dollase"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1689340954,"answer_count":0,"score":1,"last_activity_date":1689342393,"creation_date":1689339648,"question_id":76687940,"body_markdown":"In the following code example the compiler does not allow me to override the method `f`.\r\n\r\n```java\r\npublic class A {}\r\npublic class B extends A {}\r\n\r\npublic class X {\r\n    public void f(Consumer&lt;? super A&gt; consumer) {\r\n        consumer.accept(new A());\r\n    }\r\n}\r\n\r\npublic class Y extends X {\r\n    @Override                                        // this is line 14\r\n    public void f(Consumer&lt;? super B&gt; consumer) {    // this is line 15\r\n        consumer.accept(new B());\r\n    }\r\n}\r\n\r\npublic static void main(String[] args) {\r\n    X x = new X();\r\n    Y y = new Y();\r\n    X xy = new Y();\r\n\r\n    Consumer&lt;A&gt; ca = (A a) -&gt; {};\r\n    Consumer&lt;B&gt; cb = (B a) -&gt; {};\r\n\r\n    x.f(ca);     // (1) Consumer takes A and B and is called with A.\r\n    // x.f(cb);  // (2) Consumer only takes  B but would be called with A, which is a type error.\r\n\r\n    y.f(ca);     // (3) Consumer takes A and B and is called with B.\r\n    y.f(cb);     // (4) Consumer only takes  B and is called with B.\r\n\r\n    xy.f(ca);    // (5) Consumer takes A and B and is called with B.\r\n    // xy.f(cb); // (6) Consumer only takes  B and would be called with B, which is not a type error but since xy has the compile type X this is not allowed.\r\n}\r\n```\r\n\r\nIt produces the following error messages.\r\n\r\n```\r\nTesting.java:15: error: name clash: f(Consumer&lt;? super B&gt;) in Y and f(Consumer&lt;? super A&gt;) in X have the same erasure, yet neither overrides the other\r\n\t\t    public void f(Consumer&lt;? super B&gt; consumer) {\r\n\t\t                ^\r\nTesting.java:14: error: method does not override or implement a method from a supertype\r\n\t\t    @Override\r\n\t\t    ^\r\n2 errors\r\n```\r\n\r\nI mapped out all relevant cases in the bottom. Only the cases (2) and (6) produce compiler errors and these errors are irrelevant for me. The case that I need to work is case (5), where I can provide a `Consumer&lt;A&gt;` to a `Y` that is stored in an `X`.\r\n\r\nIn my understanding the example should not only work at runtime, but it should also type check at compile time. Let&#39;s use the notation `A &gt;= B` if `A` is a super type of `B`.\r\n\r\nBecause we have `A &gt;= B` and `? super` is contravariant, we get `Consumer&lt;? super B&gt; &gt;= Consumer&lt;? super A&gt;`.\r\n\r\nSince method parameters are also contravariant, we get `f(Consumer&lt;? super A&gt;) &gt;= f(Consumer&lt;? super B&gt;)` and thus it should be possible to override `f(Consumer&lt;? super A&gt;)` with `f(Consumer&lt;? super B&gt;)`.\r\n\r\nIs this not possible in Java, or is there some other way to write it down such that the compiler accepts it?\r\n\r\n---\r\n\r\nFrom the marked duplicate I understand that my second step in the argument above is not valid, since in Java method parameters are not contravariant when it comes to overriding. I also found the following workaround.\r\n\r\n```java\r\npublic class Y extends X {\r\n    @Override\r\n    public void f(Consumer&lt;? super A&gt; consumer) {\r\n        ff(consumer);\r\n    }\r\n\r\n    public void ff(Consumer&lt;? super B&gt; consumer) {\r\n        consumer.accept(new B());\r\n    }\r\n}\r\n```\r\n\r\nIn this way, the calls can be adjusted like this.\r\n\r\n```java\r\n    x.f(ca);     // (1) Consumer takes A and B and is called with A.\r\n    // x.f(cb);  // (2) Consumer only takes  B but would be called with A, which is a type error.\r\n\r\n    y.ff(ca);    // (3) Consumer takes A and B and is called with B.\r\n    y.ff(cb);    // (4) Consumer only takes  B and is called with B.\r\n\r\n    xy.f(ca);    // (5) Consumer takes A and B and is called with B.\r\n    // xy.f(cb); // (6) Consumer only takes  B and would be called with B, which is not a type error but since xy has the compile type X this is not allowed.\r\n```","title":"Java Covariant Override of Method with Contravariant Consumer as a Parameter","body":"<p>In the following code example the compiler does not allow me to override the method <code>f</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class A {}\npublic class B extends A {}\n\npublic class X {\n    public void f(Consumer&lt;? super A&gt; consumer) {\n        consumer.accept(new A());\n    }\n}\n\npublic class Y extends X {\n    @Override                                        // this is line 14\n    public void f(Consumer&lt;? super B&gt; consumer) {    // this is line 15\n        consumer.accept(new B());\n    }\n}\n\npublic static void main(String[] args) {\n    X x = new X();\n    Y y = new Y();\n    X xy = new Y();\n\n    Consumer&lt;A&gt; ca = (A a) -&gt; {};\n    Consumer&lt;B&gt; cb = (B a) -&gt; {};\n\n    x.f(ca);     // (1) Consumer takes A and B and is called with A.\n    // x.f(cb);  // (2) Consumer only takes  B but would be called with A, which is a type error.\n\n    y.f(ca);     // (3) Consumer takes A and B and is called with B.\n    y.f(cb);     // (4) Consumer only takes  B and is called with B.\n\n    xy.f(ca);    // (5) Consumer takes A and B and is called with B.\n    // xy.f(cb); // (6) Consumer only takes  B and would be called with B, which is not a type error but since xy has the compile type X this is not allowed.\n}\n</code></pre>\n<p>It produces the following error messages.</p>\n<pre><code>Testing.java:15: error: name clash: f(Consumer&lt;? super B&gt;) in Y and f(Consumer&lt;? super A&gt;) in X have the same erasure, yet neither overrides the other\n            public void f(Consumer&lt;? super B&gt; consumer) {\n                        ^\nTesting.java:14: error: method does not override or implement a method from a supertype\n            @Override\n            ^\n2 errors\n</code></pre>\n<p>I mapped out all relevant cases in the bottom. Only the cases (2) and (6) produce compiler errors and these errors are irrelevant for me. The case that I need to work is case (5), where I can provide a <code>Consumer&lt;A&gt;</code> to a <code>Y</code> that is stored in an <code>X</code>.</p>\n<p>In my understanding the example should not only work at runtime, but it should also type check at compile time. Let's use the notation <code>A &gt;= B</code> if <code>A</code> is a super type of <code>B</code>.</p>\n<p>Because we have <code>A &gt;= B</code> and <code>? super</code> is contravariant, we get <code>Consumer&lt;? super B&gt; &gt;= Consumer&lt;? super A&gt;</code>.</p>\n<p>Since method parameters are also contravariant, we get <code>f(Consumer&lt;? super A&gt;) &gt;= f(Consumer&lt;? super B&gt;)</code> and thus it should be possible to override <code>f(Consumer&lt;? super A&gt;)</code> with <code>f(Consumer&lt;? super B&gt;)</code>.</p>\n<p>Is this not possible in Java, or is there some other way to write it down such that the compiler accepts it?</p>\n<hr />\n<p>From the marked duplicate I understand that my second step in the argument above is not valid, since in Java method parameters are not contravariant when it comes to overriding. I also found the following workaround.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Y extends X {\n    @Override\n    public void f(Consumer&lt;? super A&gt; consumer) {\n        ff(consumer);\n    }\n\n    public void ff(Consumer&lt;? super B&gt; consumer) {\n        consumer.accept(new B());\n    }\n}\n</code></pre>\n<p>In this way, the calls can be adjusted like this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    x.f(ca);     // (1) Consumer takes A and B and is called with A.\n    // x.f(cb);  // (2) Consumer only takes  B but would be called with A, which is a type error.\n\n    y.ff(ca);    // (3) Consumer takes A and B and is called with B.\n    y.ff(cb);    // (4) Consumer only takes  B and is called with B.\n\n    xy.f(ca);    // (5) Consumer takes A and B and is called with B.\n    // xy.f(cb); // (6) Consumer only takes  B and would be called with B, which is not a type error but since xy has the compile type X this is not allowed.\n</code></pre>\n"},{"tags":["java","xml","xsd","maven-jaxb2-plugin","iab"],"answers":[{"tags":[],"owner":{"account_id":1462390,"reputation":759,"user_id":1376318,"display_name":"mamift"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689342315,"creation_date":1689115930,"answer_id":76666233,"question_id":76663645,"body_markdown":"In the **vast3_draft.xsd** file, if you add these attributs to the root `xsd:schema` element:\r\n\r\n* xmlns=&quot;http://www.iab.net/videosuite/vast&quot;\r\n* targetNamespace=&quot;http://www.iab.net/videosuite/vast&quot;\r\n\r\nSo it becomes this:\r\n\r\n```XML\r\n&lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; elementFormDefault=&quot;qualified&quot; \r\n    attributeFormDefault=&quot;unqualified&quot; xmlns=&quot;http://www.iab.net/videosuite/vast&quot; targetNamespace=&quot;http://www.iab.net/videosuite/vast&quot;&gt;\r\n```\r\n\r\nThen the **vmap.xsd** should properly parse when class generation occurs again. \r\n\r\nThe reason for this error is because in the **vmap.xsd** schema, it&#39;s importing **vast3_draft.xsd** using the `targetNamespace` value of `http://www.iab.net/videosuite/vast` and that namespace isn&#39;t anywhere in the **vast3_draft.xsd** schema. An `xs:import` element always requires a `targetNamespace` attribute, so the imported schema needs this as well.\r\n\r\nI&#39;m guessing because it has the word &#39;draft&#39; in the file name, the schema itself might not be complete. If you get a new updated version of the schema you&#39;ll have to edit the schema file again if it still doesn&#39;t have the above attributes in the `xs:schema` element.","title":"Cannot generate VMAP classes from xsd","body":"<p>In the <strong>vast3_draft.xsd</strong> file, if you add these attributs to the root <code>xsd:schema</code> element:</p>\n<ul>\n<li>xmlns=&quot;http://www.iab.net/videosuite/vast&quot;</li>\n<li>targetNamespace=&quot;http://www.iab.net/videosuite/vast&quot;</li>\n</ul>\n<p>So it becomes this:</p>\n<pre><code>&lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; elementFormDefault=&quot;qualified&quot; \n    attributeFormDefault=&quot;unqualified&quot; xmlns=&quot;http://www.iab.net/videosuite/vast&quot; targetNamespace=&quot;http://www.iab.net/videosuite/vast&quot;&gt;\n</code></pre>\n<p>Then the <strong>vmap.xsd</strong> should properly parse when class generation occurs again.</p>\n<p>The reason for this error is because in the <strong>vmap.xsd</strong> schema, it's importing <strong>vast3_draft.xsd</strong> using the <code>targetNamespace</code> value of <code>http://www.iab.net/videosuite/vast</code> and that namespace isn't anywhere in the <strong>vast3_draft.xsd</strong> schema. An <code>xs:import</code> element always requires a <code>targetNamespace</code> attribute, so the imported schema needs this as well.</p>\n<p>I'm guessing because it has the word 'draft' in the file name, the schema itself might not be complete. If you get a new updated version of the schema you'll have to edit the schema file again if it still doesn't have the above attributes in the <code>xs:schema</code> element.</p>\n"}],"owner":{"account_id":2270024,"reputation":1657,"user_id":1997707,"accept_rate":80,"display_name":"John Mercier"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689342315,"creation_date":1689089841,"question_id":76663645,"body_markdown":"I started a [project](https://github.com/moaxcp/generate-vmap-example) on github using maven-jaxb2-plugin to generate VMAP classes from the [vmap xsd](https://github.com/InteractiveAdvertisingBureau/vmap/blob/master/xsd/vmap.xsd).\r\n\r\nThe problem I am running into appears to be an issue with the xsd itself.\r\n\r\n```\r\n[ERROR] Error while parsing schema(s).Location [ file:/projects/generate-vmap-example/src/main/resources/vmap.xsd{144,70}].\r\norg.xml.sax.SAXParseException: src-resolve: Cannot resolve the name &#39;vast:VAST&#39; to a(n) &#39;element declaration&#39; component.\r\n```\r\n\r\nEverything seems to be setup correctly. vmap.xsd declares the vast namespace and imports the vast xsd.\r\n\r\n```\r\n&lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:vmap=&quot;http://www.iab.net/videosuite/vmap&quot; xmlns:vast=&quot;http://www.iab.net/videosuite/vast&quot; targetNamespace=&quot;http://www.iab.net/videosuite/vmap&quot; attributeFormDefault=&quot;unqualified&quot; elementFormDefault=&quot;qualified&quot; version=&quot;1.0&quot;&gt;\r\n    &lt;xs:import namespace=&quot;http://www.iab.net/videosuite/vast&quot; schemaLocation=&quot;vast3_draft.xsd&quot;/&gt;\r\n```\r\n\r\nThe VAST element is used here.\r\n\r\n```\r\n    &lt;xs:complexType name=&quot;VASTAdData_type&quot;&gt;\r\n        &lt;xs:sequence&gt;\r\n            &lt;xs:element ref=&quot;vast:VAST&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;1&quot;/&gt;\r\n        &lt;/xs:sequence&gt;\r\n    &lt;/xs:complexType&gt;\r\n```\r\n\r\nShould the vmap xsd be modified for this to work? Why can&#39;t it find the VAST element?\r\n\r\nYou can view the full project [here](https://github.com/moaxcp/generate-vmap-example).","title":"Cannot generate VMAP classes from xsd","body":"<p>I started a <a href=\"https://github.com/moaxcp/generate-vmap-example\" rel=\"nofollow noreferrer\">project</a> on github using maven-jaxb2-plugin to generate VMAP classes from the <a href=\"https://github.com/InteractiveAdvertisingBureau/vmap/blob/master/xsd/vmap.xsd\" rel=\"nofollow noreferrer\">vmap xsd</a>.</p>\n<p>The problem I am running into appears to be an issue with the xsd itself.</p>\n<pre><code>[ERROR] Error while parsing schema(s).Location [ file:/projects/generate-vmap-example/src/main/resources/vmap.xsd{144,70}].\norg.xml.sax.SAXParseException: src-resolve: Cannot resolve the name 'vast:VAST' to a(n) 'element declaration' component.\n</code></pre>\n<p>Everything seems to be setup correctly. vmap.xsd declares the vast namespace and imports the vast xsd.</p>\n<pre><code>&lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:vmap=&quot;http://www.iab.net/videosuite/vmap&quot; xmlns:vast=&quot;http://www.iab.net/videosuite/vast&quot; targetNamespace=&quot;http://www.iab.net/videosuite/vmap&quot; attributeFormDefault=&quot;unqualified&quot; elementFormDefault=&quot;qualified&quot; version=&quot;1.0&quot;&gt;\n    &lt;xs:import namespace=&quot;http://www.iab.net/videosuite/vast&quot; schemaLocation=&quot;vast3_draft.xsd&quot;/&gt;\n</code></pre>\n<p>The VAST element is used here.</p>\n<pre><code>    &lt;xs:complexType name=&quot;VASTAdData_type&quot;&gt;\n        &lt;xs:sequence&gt;\n            &lt;xs:element ref=&quot;vast:VAST&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;1&quot;/&gt;\n        &lt;/xs:sequence&gt;\n    &lt;/xs:complexType&gt;\n</code></pre>\n<p>Should the vmap xsd be modified for this to work? Why can't it find the VAST element?</p>\n<p>You can view the full project <a href=\"https://github.com/moaxcp/generate-vmap-example\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":["java","expression","antlr","antlr4","logical-operators"],"answers":[{"tags":[],"owner":{"account_id":27816,"reputation":6650,"user_id":73764,"accept_rate":91,"display_name":"Mike Cargal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689342224,"creation_date":1689200735,"answer_id":76674828,"question_id":76673570,"body_markdown":"If I run the following using your grammar:\r\n```\r\necho &quot;mike === 5&quot; | grun Filter filter -tokens -tree\r\n```\r\n\r\nI get the following output:\r\n```\r\nline 1:7 token recognition error at: &#39;= &#39;\r\n[@0,0:3=&#39;mike&#39;,&lt;NAME&gt;,1:0]\r\n[@1,5:6=&#39;==&#39;,&lt;&#39;==&#39;&gt;,1:5]\r\n[@2,9:9=&#39;5&#39;,&lt;INT&gt;,1:9]\r\n[@3,11:10=&#39;&lt;EOF&gt;&#39;,&lt;EOF&gt;,2:0]\r\n(filter (expr (compExpr (operand (qualifiedName mike)) == (operand (numOperand 5)))) &lt;EOF&gt;)\r\n```\r\nThat tree is consistent with what you see when you&#39;re visiting the tree expression.\r\n\r\nANTLR will report the token recognition error, discard that input and attempt to continue parsing.\r\n\r\nIt appears that you&#39;re suppressing the error message about the unrecognized token.  (It would come from the Lexer, so if this is your error reporting code, make sure you have a listener attached to the Lexer as well as the parser.)\r\n\r\n\r\nIt&#39;s not uncommon to find a rule like `INVALID: &#39;.&#39;;` at the end of your Lexer rules to handle &quot;anything that didn&#39;t get picked up by previous Lexer rules.  This avoids any token recognition errors (as EVERYTHING will get a token), and then, since the `INVALID` token won&#39;t appear in any parser rules, you&#39;ll get parser error instead.","title":"Problems with comparisons in ANTLR4 grammar","body":"<p>If I run the following using your grammar:</p>\n<pre><code>echo &quot;mike === 5&quot; | grun Filter filter -tokens -tree\n</code></pre>\n<p>I get the following output:</p>\n<pre><code>line 1:7 token recognition error at: '= '\n[@0,0:3='mike',&lt;NAME&gt;,1:0]\n[@1,5:6='==',&lt;'=='&gt;,1:5]\n[@2,9:9='5',&lt;INT&gt;,1:9]\n[@3,11:10='&lt;EOF&gt;',&lt;EOF&gt;,2:0]\n(filter (expr (compExpr (operand (qualifiedName mike)) == (operand (numOperand 5)))) &lt;EOF&gt;)\n</code></pre>\n<p>That tree is consistent with what you see when you're visiting the tree expression.</p>\n<p>ANTLR will report the token recognition error, discard that input and attempt to continue parsing.</p>\n<p>It appears that you're suppressing the error message about the unrecognized token.  (It would come from the Lexer, so if this is your error reporting code, make sure you have a listener attached to the Lexer as well as the parser.)</p>\n<p>It's not uncommon to find a rule like <code>INVALID: '.';</code> at the end of your Lexer rules to handle &quot;anything that didn't get picked up by previous Lexer rules.  This avoids any token recognition errors (as EVERYTHING will get a token), and then, since the <code>INVALID</code> token won't appear in any parser rules, you'll get parser error instead.</p>\n"}],"owner":{"account_id":7033480,"reputation":257,"user_id":5388414,"accept_rate":80,"display_name":"UglyBob"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689342224,"creation_date":1689187240,"question_id":76673570,"body_markdown":"I&#39;ve build a small parser for writing filters in my application and most of it works fine. But now I noticed something weird. I have comparisons like &#39;==&#39;, &#39;!=&#39;, &#39;&gt;=&#39; etc and they also work fine. But for some reason antlr (or my grammar) also accepts combinations of them, like &#39;===&#39;, &#39;&lt;=!&#39;, &#39;!==&#39; etc. And another weird thing is that when I visit the tree for an expression like &#39;number !== value&#39;, antlr have removed the last equal sign in the context.\r\n\r\nMy grammar is like this:\r\n\r\n    grammar Filter;\r\n    \r\n    filter: expr EOF ;\r\n    \r\n    expr: expr &#39;and&#39; expr\r\n        | expr &#39;or&#39; expr\r\n        | &#39;not&#39; expr\r\n        | &#39;(&#39; expr &#39;)&#39;\r\n        | compExpr\r\n        ;\r\n    compExpr: ( operand (EQ | NEQ) operand )\r\n            | ( numOperand (GT | GE | LT | LE) numOperand )\r\n            ;\r\n    operand: qualifiedName | nodeId | STR | bool | numOperand ;\r\n    numOperand: INT | HEX | TIMESTAMP | qualifiedName ;\r\n    bool: TRUE | FALSE ;\r\n    qualifiedName: NAME ( &#39;.&#39; NAME )* ;\r\n    nodeId: SERIAL ;\r\n    \r\n    GT: &#39;&gt;&#39; ;\r\n    GE: &#39;&gt;=&#39; ;\r\n    LT: &#39;&lt;&#39; ;\r\n    LE: &#39;&lt;=&#39; ;\r\n    EQ: &#39;==&#39;;\r\n    NEQ: &#39;!=&#39; ;\r\n    TRUE: &#39;true&#39; ;\r\n    FALSE: &#39;false&#39; ;\r\n    NAME: [a-zA-Z_$][a-zA-Z0-9_$]* ;\r\n    INT: &#39;-&#39;? DIGIT+ ;\r\n    STR: &#39;&quot;&#39; (~[&quot;])* &#39;&quot;&#39; ;\r\n    HEX: &#39;0x&#39; [0-9a-fA-F]+ ;\r\n    SERIAL: [0-9a-zA-Z]+ ;\r\n    TIMESTAMP: DIGIT DIGIT&#39;:&#39;DIGIT DIGIT&#39;:&#39;DIGIT DIGIT(&#39;.&#39;DIGIT DIGIT DIGIT)? ;\r\n    DIGIT: [0-9] ;\r\n    WS  : [ \\t\\r\\n]+ -&gt; skip ;\r\n\r\n","title":"Problems with comparisons in ANTLR4 grammar","body":"<p>I've build a small parser for writing filters in my application and most of it works fine. But now I noticed something weird. I have comparisons like '==', '!=', '&gt;=' etc and they also work fine. But for some reason antlr (or my grammar) also accepts combinations of them, like '===', '&lt;=!', '!==' etc. And another weird thing is that when I visit the tree for an expression like 'number !== value', antlr have removed the last equal sign in the context.</p>\n<p>My grammar is like this:</p>\n<pre><code>grammar Filter;\n\nfilter: expr EOF ;\n\nexpr: expr 'and' expr\n    | expr 'or' expr\n    | 'not' expr\n    | '(' expr ')'\n    | compExpr\n    ;\ncompExpr: ( operand (EQ | NEQ) operand )\n        | ( numOperand (GT | GE | LT | LE) numOperand )\n        ;\noperand: qualifiedName | nodeId | STR | bool | numOperand ;\nnumOperand: INT | HEX | TIMESTAMP | qualifiedName ;\nbool: TRUE | FALSE ;\nqualifiedName: NAME ( '.' NAME )* ;\nnodeId: SERIAL ;\n\nGT: '&gt;' ;\nGE: '&gt;=' ;\nLT: '&lt;' ;\nLE: '&lt;=' ;\nEQ: '==';\nNEQ: '!=' ;\nTRUE: 'true' ;\nFALSE: 'false' ;\nNAME: [a-zA-Z_$][a-zA-Z0-9_$]* ;\nINT: '-'? DIGIT+ ;\nSTR: '&quot;' (~[&quot;])* '&quot;' ;\nHEX: '0x' [0-9a-fA-F]+ ;\nSERIAL: [0-9a-zA-Z]+ ;\nTIMESTAMP: DIGIT DIGIT':'DIGIT DIGIT':'DIGIT DIGIT('.'DIGIT DIGIT DIGIT)? ;\nDIGIT: [0-9] ;\nWS  : [ \\t\\r\\n]+ -&gt; skip ;\n</code></pre>\n"},{"tags":["java","spring","spring-boot","hibernate"],"comments":[{"owner":{"account_id":3273973,"reputation":5791,"user_id":2756574,"accept_rate":89,"display_name":"Sebastian"},"score":0,"creation_date":1664865033,"post_id":73943737,"comment_id":130561880,"body_markdown":"Does this answer your question: https://stackoverflow.com/questions/804514/hibernate-field-id-doesnt-have-a-default-value","body":"Does this answer your question: <a href=\"https://stackoverflow.com/questions/804514/hibernate-field-id-doesnt-have-a-default-value\" title=\"hibernate field id doesnt have a default value\">stackoverflow.com/questions/804514/&hellip;</a>"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1664866997,"post_id":73943737,"comment_id":130562361,"body_markdown":"Please add the full stacktrce instead of a random snippet.","body":"Please add the full stacktrce instead of a random snippet."}],"answers":[{"tags":[],"owner":{"account_id":7371149,"reputation":99,"user_id":5611276,"accept_rate":0,"display_name":"TeeBea"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664868240,"creation_date":1664867560,"answer_id":73944244,"question_id":73943737,"body_markdown":"Looks like you are not setting the @Id `uid`. \r\n\r\nThere are a lot of options, why, and also then how to fix them.\r\n\r\nIs it an auto-incremented column?\r\nWhat kind of database are you using? Is the DB DDL generated (eg.: by hibernate) of is it something given?\r\nEg.: mysql check that the column is auto-incremented, some other databases might need a trigger/sequence.\r\n\r\nBTW, Identity is not the best of GenerationTypes.\r\nYou could rather use SEQUENCE or AUTO.\r\n\r\nAlso, why are you specifying the joinColumn (IMHO, that is not required)? Also the column name `contact_id` looks suspicious, I would have expected `user_id`.\r\n\r\nIt could also be some issue with how the relationship is handled in services.\r\n\r\nHow do you assign the Contacts to a User? \r\nAre you both setting the Contact.user and also adding this to the User.contacts List? (Also, from the exception it is not clear, if the error occurs with User or Contact. Logging the sql might also help.)\r\n","title":"&quot;could not execute statement; nested exception is org.hibernate.exception.GenericJDBCException: could not execute statement&quot; in springboot","body":"<p>Looks like you are not setting the @Id <code>uid</code>.</p>\n<p>There are a lot of options, why, and also then how to fix them.</p>\n<p>Is it an auto-incremented column?\nWhat kind of database are you using? Is the DB DDL generated (eg.: by hibernate) of is it something given?\nEg.: mysql check that the column is auto-incremented, some other databases might need a trigger/sequence.</p>\n<p>BTW, Identity is not the best of GenerationTypes.\nYou could rather use SEQUENCE or AUTO.</p>\n<p>Also, why are you specifying the joinColumn (IMHO, that is not required)? Also the column name <code>contact_id</code> looks suspicious, I would have expected <code>user_id</code>.</p>\n<p>It could also be some issue with how the relationship is handled in services.</p>\n<p>How do you assign the Contacts to a User?\nAre you both setting the Contact.user and also adding this to the User.contacts List? (Also, from the exception it is not clear, if the error occurs with User or Contact. Logging the sql might also help.)</p>\n"}],"owner":{"account_id":16115040,"reputation":1,"user_id":11632405,"display_name":"L Noitra "},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1843,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689341993,"creation_date":1664863962,"question_id":73943737,"body_markdown":"When I try to signup using form it shows error. The form exception shows &quot;could not execute statement; nested exception is org.hibernate.exception.GenericJDBCException: could not execute statement&quot;. Is this some kind of hibernate error? \r\n\r\nHere is my models: \r\n\r\n**Contact.java**\r\n\r\n    @Entity\r\n    public class Contact {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private int cid;\r\n        private String name;\r\n        private String secondName;\r\n        private String work;\r\n        private String email;\r\n        private String phone;\r\n        @Column(name = &quot;image_url&quot;)\r\n        private String imageUrl;\r\n        @Column(length = 1000)\r\n        private String description;\r\n    \r\n        @ManyToOne(fetch = FetchType.LAZY, optional = false)\r\n        @JoinColumn(name = &quot;contact_id&quot;, nullable = false)\r\n        @JsonIgnore\r\n        private User user;\r\n    \r\n        public Contact() {\r\n        }\r\n    \r\n        public int getCid() {\r\n            return cid;\r\n        }\r\n    \r\n        public void setCid(int cid) {\r\n            this.cid = cid;\r\n        }\r\n    \r\n        public String getName() {\r\n            return name;\r\n        }\r\n    \r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n    \r\n        public String getSecondName() {\r\n            return secondName;\r\n        }\r\n    \r\n        public void setSecondName(String secondName) {\r\n            this.secondName = secondName;\r\n        }\r\n    \r\n        public String getWork() {\r\n            return work;\r\n        }\r\n    \r\n        public void setWork(String work) {\r\n            this.work = work;\r\n        }\r\n    \r\n        public String getEmail() {\r\n            return email;\r\n        }\r\n    \r\n        public void setEmail(String email) {\r\n            this.email = email;\r\n        }\r\n    \r\n        public String getPhone() {\r\n            return phone;\r\n        }\r\n    \r\n        public void setPhone(String phone) {\r\n            this.phone = phone;\r\n        }\r\n    \r\n        public String getImageUrl() {\r\n            return imageUrl;\r\n        }\r\n    \r\n        public void setImageUrl(String imageUrl) {\r\n            this.imageUrl = imageUrl;\r\n        }\r\n    \r\n        public String getDescription() {\r\n            return description;\r\n        }\r\n    \r\n        public void setDescription(String description) {\r\n            this.description = description;\r\n        }\r\n    \r\n        public User getUser() {\r\n            return user;\r\n        }\r\n    \r\n        public void setUser(User user) {\r\n            this.user = user;\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return &quot;Contact{&quot; +\r\n                    &quot;cid=&quot; + cid +\r\n                    &quot;, name=&#39;&quot; + name + &#39;\\&#39;&#39; +\r\n                    &quot;, secondName=&#39;&quot; + secondName + &#39;\\&#39;&#39; +\r\n                    &quot;, work=&#39;&quot; + work + &#39;\\&#39;&#39; +\r\n                    &quot;, email=&#39;&quot; + email + &#39;\\&#39;&#39; +\r\n                    &quot;, phone=&#39;&quot; + phone + &#39;\\&#39;&#39; +\r\n                    &quot;, imageUrl=&#39;&quot; + imageUrl + &#39;\\&#39;&#39; +\r\n                    &quot;, description=&#39;&quot; + description + &#39;\\&#39;&#39; +\r\n                    &#39;}&#39;;\r\n        }\r\n    }\r\n\r\n**User.java**\r\n\r\n\r\n        @Entity\r\n        public class User {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private int uid;\r\n        private String name;\r\n        @Column(unique = true)\r\n        private String email;\r\n        private String password;\r\n        private String role;\r\n        private boolean enabled;\r\n    \r\n        @Column(name = &quot;image_url&quot;)\r\n        private String imageUrl;\r\n        @Column(length = 500)\r\n        private String about;\r\n    \r\n        @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;user&quot;)\r\n        private List&lt;Contact&gt; contacts = new ArrayList&lt;&gt;();\r\n    \r\n        public User() {\r\n        }\r\n    \r\n    \r\n        public int getUid() {\r\n            return uid;\r\n        }\r\n    \r\n        public void setUid(int uid) {\r\n            this.uid = uid;\r\n        }\r\n    \r\n        public String getName() {\r\n            return name;\r\n        }\r\n    \r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n    \r\n        public String getEmail() {\r\n            return email;\r\n        }\r\n    \r\n        public void setEmail(String email) {\r\n            this.email = email;\r\n        }\r\n    \r\n        public String getPassword() {\r\n            return password;\r\n        }\r\n    \r\n        public void setPassword(String password) {\r\n            this.password = password;\r\n        }\r\n    \r\n        public String getRole() {\r\n            return role;\r\n        }\r\n    \r\n        public void setRole(String role) {\r\n            this.role = role;\r\n        }\r\n    \r\n        public boolean isEnabled() {\r\n            return enabled;\r\n        }\r\n    \r\n        public void setEnabled(boolean enabled) {\r\n            this.enabled = enabled;\r\n        }\r\n    \r\n        public String getImageUrl() {\r\n            return imageUrl;\r\n        }\r\n    \r\n        public void setImageUrl(String imageUrl) {\r\n            this.imageUrl = imageUrl;\r\n        }\r\n    \r\n        public String getAbout() {\r\n            return about;\r\n        }\r\n    \r\n        public void setAbout(String about) {\r\n            this.about = about;\r\n        }\r\n    \r\n        public List&lt;Contact&gt; getContacts() {\r\n            return contacts;\r\n        }\r\n    \r\n        public void setContacts(List&lt;Contact&gt; contacts) {\r\n            this.contacts = contacts;\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return &quot;User{&quot; +\r\n                    &quot;uid=&quot; + uid +\r\n                    &quot;, name=&#39;&quot; + name + &#39;\\&#39;&#39; +\r\n                    &quot;, email=&#39;&quot; + email + &#39;\\&#39;&#39; +\r\n                    &quot;, password=&#39;&quot; + password + &#39;\\&#39;&#39; +\r\n                    &quot;, role=&#39;&quot; + role + &#39;\\&#39;&#39; +\r\n                    &quot;, enabled=&quot; + enabled +\r\n                    &quot;, imageUrl=&#39;&quot; + imageUrl + &#39;\\&#39;&#39; +\r\n                    &quot;, about=&#39;&quot; + about + &#39;\\&#39;&#39; +\r\n                    &#39;}&#39;;\r\n        }\r\n    }\r\n\r\n\r\n**Signup.html**\r\n\r\n\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot; th:replace=&quot;base::layout(~{::section})&quot;&gt;\r\n    &lt;head&gt;\r\n        &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n        &lt;title&gt;Title&lt;/title&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    &lt;section&gt;\r\n        &lt;div class=&quot;container&quot;&gt;\r\n            &lt;div class=&quot;row&quot;&gt;\r\n                &lt;div class=&quot;col-md-6 offset-md-3&quot;&gt;\r\n                    &lt;div class=&quot;my-card mt-3&quot;&gt;\r\n                        &lt;!--                            error message--&gt;\r\n    \r\n                        &lt;div th:if=&quot;${session.message}&quot; th:classappend=&quot;${session.message.type}&quot; class=&quot;alert&quot; role=&quot;alert&quot;&gt;\r\n                            &lt;p class=&quot;text-center&quot; th:text=&quot;${session.message.content}&quot;&gt;&lt;/p&gt;\r\n                            &lt;th:block th:text=&quot;${#session.removeAttribute(&#39;message&#39;)}&quot;&gt;&lt;/th:block&gt;\r\n                        &lt;/div&gt;\r\n                        &lt;!--                            End of error message--&gt;\r\n    \r\n                        &lt;div class=&quot;container text-center&quot;&gt;\r\n                            &lt;img style=&quot;width:90px&quot; th:src=&quot;@{/image/membership.svg}&quot;/&gt;\r\n                        &lt;/div&gt;\r\n    \r\n                        &lt;h1 class=&quot;text-center&quot;&gt;Register Here!!&lt;/h1&gt;\r\n    \r\n                        &lt;form action=&quot;&quot; th:action=&quot;@{/do_register}&quot; method=&quot;post&quot;\r\n                              enctype=&quot;multipart/form-data&quot; th:object=&quot;${user}&quot;&gt;\r\n    \r\n                            &lt;!--                                Name field--&gt;\r\n                            &lt;div class=&quot;mb-3&quot;&gt;\r\n                                &lt;label for=&quot;name_field&quot; class=&quot;form-label&quot;&gt;Your Name&lt;/label&gt;\r\n                                &lt;input\r\n                                        name=&quot;name&quot;\r\n                                        type=&quot;text&quot;\r\n                                        class=&quot;form-control&quot;\r\n                                        id=&quot;name_field&quot;\r\n                                        aria-describedby=&quot;emailHelp&quot;\r\n                                        placeholder=&quot;Enter Here&quot;\r\n                                        required=&quot;required&quot;\r\n                                        th:value=&quot;${user.name}&quot;&gt;\r\n    \r\n                                &lt;!--                                    &lt;div class=&quot;invalid-feedback&quot; th:each=&quot;e : ${#fields.errors(&#39;name&#39;)}&quot;--&gt;\r\n                                &lt;!--                                    th:text=&quot;${e}&quot;&gt;--&gt;\r\n    \r\n                                &lt;!--                                    &lt;/div&gt;--&gt;\r\n                            &lt;/div&gt;\r\n    \r\n                            &lt;!--                                Email field--&gt;\r\n                            &lt;div class=&quot;mb-3&quot;&gt;\r\n                                &lt;label for=&quot;email_field&quot; class=&quot;form-label&quot;&gt;Your Email&lt;/label&gt;\r\n                                &lt;input\r\n                                        name=&quot;email&quot;\r\n                                        type=&quot;email&quot; class=&quot;form-control&quot; id=&quot;email_field&quot; aria-describedby=&quot;emailHelp&quot;\r\n                                        placeholder=&quot;Enter Here&quot;\r\n                                        required=&quot;required&quot;\r\n                                        th:value=&quot;${user.email}&quot;&gt;\r\n                            &lt;/div&gt;\r\n    \r\n                            &lt;!--                                Password field--&gt;\r\n                            &lt;label for=&quot;password_field&quot; class=&quot;form-label&quot;&gt;Password&lt;/label&gt;\r\n                            &lt;input\r\n                                    name=&quot;password&quot;\r\n                                    type=&quot;password&quot; id=&quot;password_field&quot; class=&quot;form-control&quot;\r\n                                    aria-describedby=&quot;passwordHelpBlock&quot;\r\n                                    placeholder=&quot;Enter Here&quot;\r\n                                    required=&quot;required&quot;&gt;\r\n    \r\n                            &lt;div id=&quot;passwordHelpBlock&quot; class=&quot;form-text&quot;&gt;\r\n                                Your password must be 8-20 characters long, contain letters and numbers, and must not\r\n                                contain spaces, special characters, or emoji.\r\n                            &lt;/div&gt;\r\n    \r\n                            &lt;!--                                User about field--&gt;\r\n                            &lt;div class=&quot;form-group my-3&quot;&gt;\r\n                                        &lt;textarea\r\n                                                name=&quot;about&quot; th:text=&quot;${user.about}&quot;\r\n                                                th:value=&quot;${user.about}&quot; id=&quot;&quot; rows=&quot;8&quot; class=&quot;form-control&quot;\r\n                                                placeholder=&quot;Write something about yourself&quot;&gt;&lt;/textarea&gt;\r\n                            &lt;/div&gt;\r\n    \r\n                            &lt;!--                                User Image--&gt;\r\n    \r\n                            &lt;div class=&quot;custom-file my-3&quot;&gt;\r\n                                &lt;input type=&quot;file&quot; name=&quot;userImage&quot;&gt;\r\n                            &lt;/div&gt;\r\n    \r\n                            &lt;!--                                Terms and condition agreement--&gt;\r\n                            &lt;div class=&quot;form-group form-check mb-2&quot;&gt;\r\n                                &lt;input\r\n                                        name=&quot;agreement&quot;\r\n                                        type=&quot;checkbox&quot; class=&quot;form-check-input&quot; id=&quot;agreement&quot;&gt;\r\n                                &lt;label for=&quot;agreement&quot;&gt;Accept terms and conditions&lt;/label&gt;\r\n                            &lt;/div&gt;\r\n    \r\n    \r\n                            &lt;!--                                button field--&gt;\r\n                            &lt;div class=&quot;container text-center d-grid gap-2&quot;&gt;\r\n                                &lt;button type=&quot;submit&quot; class=&quot;btn primarybackgroud text-white&quot;&gt;Submit&lt;/button&gt;\r\n    \r\n                                &lt;button type=&quot;reset&quot; class=&quot;btn bg-danger text-white&quot;&gt;Reset&lt;/button&gt;\r\n                            &lt;/div&gt;\r\n    \r\n                        &lt;/form&gt;\r\n    \r\n    \r\n                    &lt;/div&gt;\r\n                &lt;/div&gt;\r\n            &lt;/div&gt;\r\n        &lt;/div&gt;\r\n    &lt;/section&gt;\r\n    \r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\n\r\n**pom.xml**\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;parent&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.3&lt;/version&gt;\r\n            &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n        &lt;/parent&gt;\r\n        &lt;groupId&gt;com.smartmanager&lt;/groupId&gt;\r\n        &lt;artifactId&gt;Smart_Contact_Manager&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n        &lt;name&gt;Smart Contact Manager&lt;/name&gt;\r\n        &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n        &lt;properties&gt;\r\n            &lt;java.version&gt;17&lt;/java.version&gt;\r\n        &lt;/properties&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n                &lt;scope&gt;runtime&lt;/scope&gt;\r\n                &lt;optional&gt;true&lt;/optional&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n                &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n                &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n\r\n\r\n**Error messages in console :** \r\n\r\n    2022-10-04 11:55:47.309 ERROR 14668 --- [nio-8282-exec-7] o.h.engine.jdbc.spi.SqlExceptionHelper   : Field &#39;uid&#39; doesn&#39;t have a default value\r\n    org.springframework.orm.jpa.JpaSystemException: could not execute statement; nested exception is org.hibernate.exception.GenericJDBCException: could not execute statement\r\n    \tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:331)\r\n    \tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n    \tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:551)\r\n    \tat org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)","title":"&quot;could not execute statement; nested exception is org.hibernate.exception.GenericJDBCException: could not execute statement&quot; in springboot","body":"<p>When I try to signup using form it shows error. The form exception shows &quot;could not execute statement; nested exception is org.hibernate.exception.GenericJDBCException: could not execute statement&quot;. Is this some kind of hibernate error?</p>\n<p>Here is my models:</p>\n<p><strong>Contact.java</strong></p>\n<pre><code>@Entity\npublic class Contact {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int cid;\n    private String name;\n    private String secondName;\n    private String work;\n    private String email;\n    private String phone;\n    @Column(name = &quot;image_url&quot;)\n    private String imageUrl;\n    @Column(length = 1000)\n    private String description;\n\n    @ManyToOne(fetch = FetchType.LAZY, optional = false)\n    @JoinColumn(name = &quot;contact_id&quot;, nullable = false)\n    @JsonIgnore\n    private User user;\n\n    public Contact() {\n    }\n\n    public int getCid() {\n        return cid;\n    }\n\n    public void setCid(int cid) {\n        this.cid = cid;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getSecondName() {\n        return secondName;\n    }\n\n    public void setSecondName(String secondName) {\n        this.secondName = secondName;\n    }\n\n    public String getWork() {\n        return work;\n    }\n\n    public void setWork(String work) {\n        this.work = work;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getPhone() {\n        return phone;\n    }\n\n    public void setPhone(String phone) {\n        this.phone = phone;\n    }\n\n    public String getImageUrl() {\n        return imageUrl;\n    }\n\n    public void setImageUrl(String imageUrl) {\n        this.imageUrl = imageUrl;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n\n    public User getUser() {\n        return user;\n    }\n\n    public void setUser(User user) {\n        this.user = user;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Contact{&quot; +\n                &quot;cid=&quot; + cid +\n                &quot;, name='&quot; + name + '\\'' +\n                &quot;, secondName='&quot; + secondName + '\\'' +\n                &quot;, work='&quot; + work + '\\'' +\n                &quot;, email='&quot; + email + '\\'' +\n                &quot;, phone='&quot; + phone + '\\'' +\n                &quot;, imageUrl='&quot; + imageUrl + '\\'' +\n                &quot;, description='&quot; + description + '\\'' +\n                '}';\n    }\n}\n</code></pre>\n<p><strong>User.java</strong></p>\n<pre><code>    @Entity\n    public class User {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int uid;\n    private String name;\n    @Column(unique = true)\n    private String email;\n    private String password;\n    private String role;\n    private boolean enabled;\n\n    @Column(name = &quot;image_url&quot;)\n    private String imageUrl;\n    @Column(length = 500)\n    private String about;\n\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;user&quot;)\n    private List&lt;Contact&gt; contacts = new ArrayList&lt;&gt;();\n\n    public User() {\n    }\n\n\n    public int getUid() {\n        return uid;\n    }\n\n    public void setUid(int uid) {\n        this.uid = uid;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    public String getRole() {\n        return role;\n    }\n\n    public void setRole(String role) {\n        this.role = role;\n    }\n\n    public boolean isEnabled() {\n        return enabled;\n    }\n\n    public void setEnabled(boolean enabled) {\n        this.enabled = enabled;\n    }\n\n    public String getImageUrl() {\n        return imageUrl;\n    }\n\n    public void setImageUrl(String imageUrl) {\n        this.imageUrl = imageUrl;\n    }\n\n    public String getAbout() {\n        return about;\n    }\n\n    public void setAbout(String about) {\n        this.about = about;\n    }\n\n    public List&lt;Contact&gt; getContacts() {\n        return contacts;\n    }\n\n    public void setContacts(List&lt;Contact&gt; contacts) {\n        this.contacts = contacts;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;User{&quot; +\n                &quot;uid=&quot; + uid +\n                &quot;, name='&quot; + name + '\\'' +\n                &quot;, email='&quot; + email + '\\'' +\n                &quot;, password='&quot; + password + '\\'' +\n                &quot;, role='&quot; + role + '\\'' +\n                &quot;, enabled=&quot; + enabled +\n                &quot;, imageUrl='&quot; + imageUrl + '\\'' +\n                &quot;, about='&quot; + about + '\\'' +\n                '}';\n    }\n}\n</code></pre>\n<p><strong>Signup.html</strong></p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot; th:replace=&quot;base::layout(~{::section})&quot;&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;title&gt;Title&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;section&gt;\n    &lt;div class=&quot;container&quot;&gt;\n        &lt;div class=&quot;row&quot;&gt;\n            &lt;div class=&quot;col-md-6 offset-md-3&quot;&gt;\n                &lt;div class=&quot;my-card mt-3&quot;&gt;\n                    &lt;!--                            error message--&gt;\n\n                    &lt;div th:if=&quot;${session.message}&quot; th:classappend=&quot;${session.message.type}&quot; class=&quot;alert&quot; role=&quot;alert&quot;&gt;\n                        &lt;p class=&quot;text-center&quot; th:text=&quot;${session.message.content}&quot;&gt;&lt;/p&gt;\n                        &lt;th:block th:text=&quot;${#session.removeAttribute('message')}&quot;&gt;&lt;/th:block&gt;\n                    &lt;/div&gt;\n                    &lt;!--                            End of error message--&gt;\n\n                    &lt;div class=&quot;container text-center&quot;&gt;\n                        &lt;img style=&quot;width:90px&quot; th:src=&quot;@{/image/membership.svg}&quot;/&gt;\n                    &lt;/div&gt;\n\n                    &lt;h1 class=&quot;text-center&quot;&gt;Register Here!!&lt;/h1&gt;\n\n                    &lt;form action=&quot;&quot; th:action=&quot;@{/do_register}&quot; method=&quot;post&quot;\n                          enctype=&quot;multipart/form-data&quot; th:object=&quot;${user}&quot;&gt;\n\n                        &lt;!--                                Name field--&gt;\n                        &lt;div class=&quot;mb-3&quot;&gt;\n                            &lt;label for=&quot;name_field&quot; class=&quot;form-label&quot;&gt;Your Name&lt;/label&gt;\n                            &lt;input\n                                    name=&quot;name&quot;\n                                    type=&quot;text&quot;\n                                    class=&quot;form-control&quot;\n                                    id=&quot;name_field&quot;\n                                    aria-describedby=&quot;emailHelp&quot;\n                                    placeholder=&quot;Enter Here&quot;\n                                    required=&quot;required&quot;\n                                    th:value=&quot;${user.name}&quot;&gt;\n\n                            &lt;!--                                    &lt;div class=&quot;invalid-feedback&quot; th:each=&quot;e : ${#fields.errors('name')}&quot;--&gt;\n                            &lt;!--                                    th:text=&quot;${e}&quot;&gt;--&gt;\n\n                            &lt;!--                                    &lt;/div&gt;--&gt;\n                        &lt;/div&gt;\n\n                        &lt;!--                                Email field--&gt;\n                        &lt;div class=&quot;mb-3&quot;&gt;\n                            &lt;label for=&quot;email_field&quot; class=&quot;form-label&quot;&gt;Your Email&lt;/label&gt;\n                            &lt;input\n                                    name=&quot;email&quot;\n                                    type=&quot;email&quot; class=&quot;form-control&quot; id=&quot;email_field&quot; aria-describedby=&quot;emailHelp&quot;\n                                    placeholder=&quot;Enter Here&quot;\n                                    required=&quot;required&quot;\n                                    th:value=&quot;${user.email}&quot;&gt;\n                        &lt;/div&gt;\n\n                        &lt;!--                                Password field--&gt;\n                        &lt;label for=&quot;password_field&quot; class=&quot;form-label&quot;&gt;Password&lt;/label&gt;\n                        &lt;input\n                                name=&quot;password&quot;\n                                type=&quot;password&quot; id=&quot;password_field&quot; class=&quot;form-control&quot;\n                                aria-describedby=&quot;passwordHelpBlock&quot;\n                                placeholder=&quot;Enter Here&quot;\n                                required=&quot;required&quot;&gt;\n\n                        &lt;div id=&quot;passwordHelpBlock&quot; class=&quot;form-text&quot;&gt;\n                            Your password must be 8-20 characters long, contain letters and numbers, and must not\n                            contain spaces, special characters, or emoji.\n                        &lt;/div&gt;\n\n                        &lt;!--                                User about field--&gt;\n                        &lt;div class=&quot;form-group my-3&quot;&gt;\n                                    &lt;textarea\n                                            name=&quot;about&quot; th:text=&quot;${user.about}&quot;\n                                            th:value=&quot;${user.about}&quot; id=&quot;&quot; rows=&quot;8&quot; class=&quot;form-control&quot;\n                                            placeholder=&quot;Write something about yourself&quot;&gt;&lt;/textarea&gt;\n                        &lt;/div&gt;\n\n                        &lt;!--                                User Image--&gt;\n\n                        &lt;div class=&quot;custom-file my-3&quot;&gt;\n                            &lt;input type=&quot;file&quot; name=&quot;userImage&quot;&gt;\n                        &lt;/div&gt;\n\n                        &lt;!--                                Terms and condition agreement--&gt;\n                        &lt;div class=&quot;form-group form-check mb-2&quot;&gt;\n                            &lt;input\n                                    name=&quot;agreement&quot;\n                                    type=&quot;checkbox&quot; class=&quot;form-check-input&quot; id=&quot;agreement&quot;&gt;\n                            &lt;label for=&quot;agreement&quot;&gt;Accept terms and conditions&lt;/label&gt;\n                        &lt;/div&gt;\n\n\n                        &lt;!--                                button field--&gt;\n                        &lt;div class=&quot;container text-center d-grid gap-2&quot;&gt;\n                            &lt;button type=&quot;submit&quot; class=&quot;btn primarybackgroud text-white&quot;&gt;Submit&lt;/button&gt;\n\n                            &lt;button type=&quot;reset&quot; class=&quot;btn bg-danger text-white&quot;&gt;Reset&lt;/button&gt;\n                        &lt;/div&gt;\n\n                    &lt;/form&gt;\n\n\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/section&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.3&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.smartmanager&lt;/groupId&gt;\n    &lt;artifactId&gt;Smart_Contact_Manager&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;Smart Contact Manager&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p><strong>Error messages in console :</strong></p>\n<pre><code>2022-10-04 11:55:47.309 ERROR 14668 --- [nio-8282-exec-7] o.h.engine.jdbc.spi.SqlExceptionHelper   : Field 'uid' doesn't have a default value\norg.springframework.orm.jpa.JpaSystemException: could not execute statement; nested exception is org.hibernate.exception.GenericJDBCException: could not execute statement\n    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:331)\n    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:551)\n    at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\n</code></pre>\n"},{"tags":["java","environment-variables"],"comments":[{"owner":{"account_id":3023214,"reputation":20362,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":0,"creation_date":1413787924,"post_id":26459904,"comment_id":41559399,"body_markdown":"A system property is set when starting the JVM. Before that there is nothing to read.","body":"A system property is set when starting the JVM. Before that there is nothing to read."},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1413788039,"post_id":26459904,"comment_id":41559452,"body_markdown":"Do you want to be able to distinguish between default system properties and those set/overridden via the command line?","body":"Do you want to be able to distinguish between default system properties and those set/overridden via the command line?"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1413788464,"post_id":26459904,"comment_id":41559592,"body_markdown":"Are you asking how to read system properties?","body":"Are you asking how to read system properties?"},{"owner":{"account_id":181829,"reputation":14000,"user_id":416100,"accept_rate":67,"display_name":"sakhunzai"},"score":0,"creation_date":1413789182,"post_id":26459904,"comment_id":41559856,"body_markdown":"I need to know what are certain directories set e.g what is extension directory set currently","body":"I need to know what are certain directories set e.g what is extension directory set currently"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1413789792,"post_id":26459904,"comment_id":41560096,"body_markdown":"You may wish to read [System Properties](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html) and [The Extension Mechanism Architecture](http://docs.oracle.com/javase/7/docs/technotes/guides/extensions/spec.html) if you haven&#39;t already, or you might just leap right in and try `System.getProperty(&quot;java.ext.dirs&quot;)`.","body":"You may wish to read <a href=\"http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html\" rel=\"nofollow noreferrer\">System Properties</a> and <a href=\"http://docs.oracle.com/javase/7/docs/technotes/guides/extensions/spec.html\" rel=\"nofollow noreferrer\">The Extension Mechanism Architecture</a> if you haven&#39;t already, or you might just leap right in and try <code>System.getProperty(&quot;java.ext.dirs&quot;)</code>."}],"answers":[{"tags":[],"owner":{"account_id":947184,"reputation":48994,"user_id":974186,"accept_rate":79,"display_name":"Ren&#233; Link"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1413790223,"creation_date":1413788088,"answer_id":26459970,"question_id":26459904,"body_markdown":"You can use [jps][1] a tool that comes with the jdk. \r\nIt can print out the system properties that were passed to a java process.\r\n\r\nFor example: On my system eclipse is running and \r\n\r\n    $ jps -v\r\n\r\noutputs\r\n\r\n    6632  -Dosgi.requiredJavaVersion=1.6 -Xms1024m -Xmx2048m -XX:MaxPermSize=512m\r\n\r\n`jps` is located in `JDK_HOME/bin`\r\n\r\n**EDIT**\r\n\r\nIf you want all the properties use the [jinfo][2] tool that is also located in `JDK_HOME/bin`. To use it you must know the process id of the java process you want to get information from. E.g.\r\n\r\n    $ jinfo 6632\r\n\r\nThis tool also prints out the `java.ext.dirs`\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/technotes/tools/share/jps.html\r\n  [2]: http://docs.oracle.com/javase/7/docs/technotes/tools/share/jinfo.html","title":"Reading Java system properties from command line","body":"<p>You can use <a href=\"http://docs.oracle.com/javase/7/docs/technotes/tools/share/jps.html\">jps</a> a tool that comes with the jdk. \nIt can print out the system properties that were passed to a java process.</p>\n\n<p>For example: On my system eclipse is running and </p>\n\n<pre><code>$ jps -v\n</code></pre>\n\n<p>outputs</p>\n\n<pre><code>6632  -Dosgi.requiredJavaVersion=1.6 -Xms1024m -Xmx2048m -XX:MaxPermSize=512m\n</code></pre>\n\n<p><code>jps</code> is located in <code>JDK_HOME/bin</code></p>\n\n<p><strong>EDIT</strong></p>\n\n<p>If you want all the properties use the <a href=\"http://docs.oracle.com/javase/7/docs/technotes/tools/share/jinfo.html\">jinfo</a> tool that is also located in <code>JDK_HOME/bin</code>. To use it you must know the process id of the java process you want to get information from. E.g.</p>\n\n<pre><code>$ jinfo 6632\n</code></pre>\n\n<p>This tool also prints out the <code>java.ext.dirs</code></p>\n"},{"tags":[],"owner":{"account_id":72205,"reputation":2651,"user_id":208576,"accept_rate":100,"display_name":"AdrianRM"},"down_vote_count":0,"up_vote_count":150,"is_accepted":true,"score":150,"last_activity_date":1481800565,"creation_date":1458157258,"answer_id":36045464,"question_id":26459904,"body_markdown":"You can use the `-XshowSettings` flag in the Hotspot JVM version 1.7 and up (not supported in 1.6):\r\n\r\n    java -XshowSettings:properties -version\r\n\r\nOpenJDK has had support for this flag since late 2010.\r\n\r\nSeen in http://marxsoftware.blogspot.de/2016/02/hotspot-jvm-XshowSettings.html\r\n\r\n**EDIT 14 Dec 2016**\r\n\r\nThe Oracle JVM ships with the tool jcmd which allows you to see the flags present in a running JVM. See:\r\n\r\nhttps://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/tooldescr006.html\r\n\r\nFor this use case, you could use:\r\n\r\n    jcmd &lt;pid&gt; VM.system_properties\r\n\r\nBut there are also many other useful commands. For example:\r\n\r\n    jcmd &lt;pid&gt; VM.flags\r\n    jcmd &lt;pid&gt; VM.command_line\r\n    jcmd &lt;pid&gt; GC.run ","title":"Reading Java system properties from command line","body":"<p>You can use the <code>-XshowSettings</code> flag in the Hotspot JVM version 1.7 and up (not supported in 1.6):</p>\n\n<pre><code>java -XshowSettings:properties -version\n</code></pre>\n\n<p>OpenJDK has had support for this flag since late 2010.</p>\n\n<p>Seen in <a href=\"http://marxsoftware.blogspot.de/2016/02/hotspot-jvm-XshowSettings.html\" rel=\"noreferrer\">http://marxsoftware.blogspot.de/2016/02/hotspot-jvm-XshowSettings.html</a></p>\n\n<p><strong>EDIT 14 Dec 2016</strong></p>\n\n<p>The Oracle JVM ships with the tool jcmd which allows you to see the flags present in a running JVM. See:</p>\n\n<p><a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/tooldescr006.html\" rel=\"noreferrer\">https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/tooldescr006.html</a></p>\n\n<p>For this use case, you could use:</p>\n\n<pre><code>jcmd &lt;pid&gt; VM.system_properties\n</code></pre>\n\n<p>But there are also many other useful commands. For example:</p>\n\n<pre><code>jcmd &lt;pid&gt; VM.flags\njcmd &lt;pid&gt; VM.command_line\njcmd &lt;pid&gt; GC.run \n</code></pre>\n"},{"tags":[],"owner":{"account_id":16181340,"reputation":81,"user_id":11682795,"display_name":"ghud"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1561151631,"creation_date":1561143377,"answer_id":56709035,"question_id":26459904,"body_markdown":"If you need defaults that your JVM will initially have set unless overridden, use:\r\n```sh\r\njava -XshowSettings:properties -version  \r\n```\r\n\r\nThis is helpful if you don&#39;t have a Java application already running, thus no pid to pass to one of the other commands.\r\n\r\nIf you are seeking the properties of a JVM already running that has properties set via default or set explicitly by command, then use the pid for that JVM found via `jps` with the `jcmd` or `jinfo` commands as listed in answers above.","title":"Reading Java system properties from command line","body":"<p>If you need defaults that your JVM will initially have set unless overridden, use:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>java -XshowSettings:properties -version  \n</code></pre>\n\n<p>This is helpful if you don't have a Java application already running, thus no pid to pass to one of the other commands.</p>\n\n<p>If you are seeking the properties of a JVM already running that has properties set via default or set explicitly by command, then use the pid for that JVM found via <code>jps</code> with the <code>jcmd</code> or <code>jinfo</code> commands as listed in answers above.</p>\n"},{"tags":[],"owner":{"account_id":57788,"reputation":46110,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662984521,"creation_date":1662984521,"answer_id":73689043,"question_id":26459904,"body_markdown":"Before `jcmd` times one can use JMX management connection from VisualVM. It is UI app so you have to expose JMX port from your remote headless servers to the that info...\r\n\r\nJMX settings might look like:\r\n\r\n```sh\r\nJAVA_OPT=&quot;$JAVA_OPT\r\n-Dcom.sun.management.jmxremote\r\n-Dcom.sun.management.jmxremote.rmi.port=$JMX_PORT\r\n-Dcom.sun.management.jmxremote.port=$JMX_PORT\r\n-Dcom.sun.management.jmxremote.host=localhost\r\n-Dcom.sun.management.jmxremote.local.only=true\r\n-Dcom.sun.management.jmxremote.ssl=false\r\n-Dcom.sun.management.jmxremote.authenticate=false\r\n-Djava.rmi.server.hostname=localhost&quot;\r\n```","title":"Reading Java system properties from command line","body":"<p>Before <code>jcmd</code> times one can use JMX management connection from VisualVM. It is UI app so you have to expose JMX port from your remote headless servers to the that info...</p>\n<p>JMX settings might look like:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>JAVA_OPT=&quot;$JAVA_OPT\n-Dcom.sun.management.jmxremote\n-Dcom.sun.management.jmxremote.rmi.port=$JMX_PORT\n-Dcom.sun.management.jmxremote.port=$JMX_PORT\n-Dcom.sun.management.jmxremote.host=localhost\n-Dcom.sun.management.jmxremote.local.only=true\n-Dcom.sun.management.jmxremote.ssl=false\n-Dcom.sun.management.jmxremote.authenticate=false\n-Djava.rmi.server.hostname=localhost&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":43022,"reputation":22842,"user_id":125562,"accept_rate":64,"display_name":"Basilevs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689341719,"creation_date":1689341719,"answer_id":76688203,"question_id":26459904,"body_markdown":"Yes. No parsing is required.\r\n```\r\njshell --feedback=silent -  &lt;&lt;&lt; &#39;System.out.println(System.getProperty(&quot;java.io.tmpdir&quot;))&#39;\r\n```","title":"Reading Java system properties from command line","body":"<p>Yes. No parsing is required.</p>\n<pre><code>jshell --feedback=silent -  &lt;&lt;&lt; 'System.out.println(System.getProperty(&quot;java.io.tmpdir&quot;))'\n</code></pre>\n"}],"owner":{"account_id":181829,"reputation":14000,"user_id":416100,"accept_rate":67,"display_name":"sakhunzai"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90811,"favorite_count":0,"down_vote_count":1,"up_vote_count":73,"accepted_answer_id":36045464,"answer_count":5,"score":72,"last_activity_date":1689341719,"creation_date":1413787727,"question_id":26459904,"body_markdown":"Is there a better way to print system properties from command line? As we can set the property e.g. \r\n\r\n     java  -D&lt;name&gt;=&lt;value&gt;  //set a system property\r\n\r\nWithout writing a class to do that? \r\n\r\nIf not possible, why is it not possible/feasible/good to do that from the command line ?","title":"Reading Java system properties from command line","body":"<p>Is there a better way to print system properties from command line? As we can set the property e.g. </p>\n\n<pre><code> java  -D&lt;name&gt;=&lt;value&gt;  //set a system property\n</code></pre>\n\n<p>Without writing a class to do that? </p>\n\n<p>If not possible, why is it not possible/feasible/good to do that from the command line ?</p>\n"},{"tags":["java","spring-boot","keycloak","resttemplate","bearer-token"],"comments":[{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1689342335,"post_id":76679905,"comment_id":135203987,"body_markdown":"So what does the other microservice return and where?","body":"So what does the other microservice return and where?"}],"owner":{"account_id":24800295,"reputation":5,"user_id":18682737,"display_name":"Nouhaila Khaouti"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689341466,"creation_date":1689254870,"question_id":76679905,"body_markdown":"i&#39;m working on an tokenValidationInterceptor , where a request for token validation is send to an other micro-service which communicate with keycloak and send an ok status or unautorazed status , then i add some logic to the prehandle function and that&#39;s all , when i try to test it, i get this error:\r\n```\r\njakarta.servlet.ServletException: Request processing failed: org.springframework.web.client.HttpClientErrorException$Unauthorized: 401 : &quot;false&quot;\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1019) ~[spring-webmvc-6.0.9.jar:6.0.9]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.9.jar:6.0.9]\r\n\r\n``` \r\nalways get the same response unauthorized status with body false \r\n\r\ni tested the verifyToken method in the first micro service separatly , and i t was working fine , i get ok status with body true .\r\n\r\n \r\n**TokenValidationInterceptor prehandle method**\r\n```\r\n    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {\r\n        String token = request.getHeader(HttpHeaders.AUTHORIZATION);\r\n        String verificationUrl = &quot;http://localhost:8090/user/info?token=&quot; + token;\r\n        ResponseEntity&lt;Boolean&gt; verificationResponse = restTemplate.getForEntity(verificationUrl, Boolean.class);\r\n        if (verificationResponse.getStatusCode() == HttpStatus.OK &amp;&amp; verificationResponse.getBody() != null &amp;&amp; verificationResponse.getBody()) {\r\n            return true;\r\n        } else {\r\n            response.setStatus(HttpStatus.UNAUTHORIZED.value());\r\n            return false;\r\n        }\r\n    }\r\n```\r\n\r\nand for the verifyToken in the other micro-service\r\n\r\n```\r\npublic ResponseEntity&lt;?&gt; verifyToken(String token) {\r\n            String keycloakUrl = &quot;http://localhost:8080/auth/realms/lbv-realm/protocol/openid-connect/userinfo&quot;;\r\n            if (token != null) {\r\n                HttpHeaders headers = new HttpHeaders();\r\n                headers.setBearerAuth(token);\r\n                HttpEntity&lt;String&gt; requestEntity = new HttpEntity&lt;&gt;(headers);\r\n                RestTemplate restTemplate = new RestTemplate();\r\n                try {\r\n                    ResponseEntity&lt;String&gt; response = restTemplate.exchange(keycloakUrl, HttpMethod.GET, requestEntity, String.class);\r\n                    HttpStatusCode statusCode = response.getStatusCode();\r\n                    if (statusCode.is2xxSuccessful()) {\r\n                        return ResponseEntity.status(HttpStatus.OK).body(true);\r\n                    } else {\r\n                        return ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(false);\r\n                    }\r\n                } catch (Exception ex) {\r\n                    return ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(false);\r\n                }\r\n            } else {\r\n                return ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(false);\r\n            }\r\n    }\r\n```","title":"Request processing failed: org.springframework.web.client.HttpClientErrorException$Unauthorized: 401 : &quot;false&quot;","body":"<p>i'm working on an tokenValidationInterceptor , where a request for token validation is send to an other micro-service which communicate with keycloak and send an ok status or unautorazed status , then i add some logic to the prehandle function and that's all , when i try to test it, i get this error:</p>\n<pre><code>jakarta.servlet.ServletException: Request processing failed: org.springframework.web.client.HttpClientErrorException$Unauthorized: 401 : &quot;false&quot;\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1019) ~[spring-webmvc-6.0.9.jar:6.0.9]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.9.jar:6.0.9]\n\n</code></pre>\n<p>always get the same response unauthorized status with body false</p>\n<p>i tested the verifyToken method in the first micro service separatly , and i t was working fine , i get ok status with body true .</p>\n<p><strong>TokenValidationInterceptor prehandle method</strong></p>\n<pre><code>    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {\n        String token = request.getHeader(HttpHeaders.AUTHORIZATION);\n        String verificationUrl = &quot;http://localhost:8090/user/info?token=&quot; + token;\n        ResponseEntity&lt;Boolean&gt; verificationResponse = restTemplate.getForEntity(verificationUrl, Boolean.class);\n        if (verificationResponse.getStatusCode() == HttpStatus.OK &amp;&amp; verificationResponse.getBody() != null &amp;&amp; verificationResponse.getBody()) {\n            return true;\n        } else {\n            response.setStatus(HttpStatus.UNAUTHORIZED.value());\n            return false;\n        }\n    }\n</code></pre>\n<p>and for the verifyToken in the other micro-service</p>\n<pre><code>public ResponseEntity&lt;?&gt; verifyToken(String token) {\n            String keycloakUrl = &quot;http://localhost:8080/auth/realms/lbv-realm/protocol/openid-connect/userinfo&quot;;\n            if (token != null) {\n                HttpHeaders headers = new HttpHeaders();\n                headers.setBearerAuth(token);\n                HttpEntity&lt;String&gt; requestEntity = new HttpEntity&lt;&gt;(headers);\n                RestTemplate restTemplate = new RestTemplate();\n                try {\n                    ResponseEntity&lt;String&gt; response = restTemplate.exchange(keycloakUrl, HttpMethod.GET, requestEntity, String.class);\n                    HttpStatusCode statusCode = response.getStatusCode();\n                    if (statusCode.is2xxSuccessful()) {\n                        return ResponseEntity.status(HttpStatus.OK).body(true);\n                    } else {\n                        return ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(false);\n                    }\n                } catch (Exception ex) {\n                    return ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(false);\n                }\n            } else {\n                return ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(false);\n            }\n    }\n</code></pre>\n"},{"tags":["java","ical4j"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689345334,"post_id":76688167,"comment_id":135204727,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":9858299,"reputation":1,"user_id":7302148,"display_name":"Krzysztof Filip&#243;w"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689341458,"creation_date":1689341458,"question_id":76688167,"body_markdown":"Let&#39;s say I have an List of unknown length of ical properties of unknown name represented as strings, i.e.\r\n`[&quot;DTSTART;TZID=&quot;Sarajevo, Skopje, Warsaw, Zagreb&quot;:20230726T100000&quot;, &quot;RRULE:FREQ=WEEKLY;WKST=SU;UNTIL=20230831T215959;INTERVAL=1;BYDAY=MO&quot;]`.\r\n\r\nWhat is the best way to parse `String` as `ical4j` `Property`?\r\n\r\nI considered splitting strings at colon and using `new PropertyBuilder(new DefaultPropertyFactorySupplier().get()).name(key).value(value).build()`, but this method fails when some parameters are present like `TZID` in provided example.","title":"How to dynamically create Property in ical4j?","body":"<p>Let's say I have an List of unknown length of ical properties of unknown name represented as strings, i.e.\n<code>[&quot;DTSTART;TZID=&quot;Sarajevo, Skopje, Warsaw, Zagreb&quot;:20230726T100000&quot;, &quot;RRULE:FREQ=WEEKLY;WKST=SU;UNTIL=20230831T215959;INTERVAL=1;BYDAY=MO&quot;]</code>.</p>\n<p>What is the best way to parse <code>String</code> as <code>ical4j</code> <code>Property</code>?</p>\n<p>I considered splitting strings at colon and using <code>new PropertyBuilder(new DefaultPropertyFactorySupplier().get()).name(key).value(value).build()</code>, but this method fails when some parameters are present like <code>TZID</code> in provided example.</p>\n"},{"tags":["java","android","gradle"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1686482592,"post_id":76449830,"comment_id":134801732,"body_markdown":"The mentioned link to `aapt2-8.0.2-9289358-windows.jar` is correct and fully working here. Make sure your network is full functional and the link works. If it still doesn&#39;t work you can try to delete the cached files and force redownload. Local cache: `~/.gradle/caches/modules-2/files-2.1/com.android.tools.build/aapt2-proto/8.0.1-9289358`","body":"The mentioned link to <code>aapt2-8.0.2-9289358-windows.jar</code> is correct and fully working here. Make sure your network is full functional and the link works. If it still doesn&#39;t work you can try to delete the cached files and force redownload. Local cache: <code>~&#47;.gradle&#47;caches&#47;modules-2&#47;files-2.1&#47;com.android.tools.build&zwnj;&#8203;&#47;aapt2-proto&#47;8.0.1-9&zwnj;&#8203;289358</code>"}],"answers":[{"tags":[],"owner":{"account_id":14220953,"reputation":21,"user_id":10273281,"display_name":"Sina Nakhaei"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686519846,"creation_date":1686519846,"answer_id":76452618,"question_id":76449830,"body_markdown":"I faced the same problem , this solution worked for me, just go to ```settings.gradle```, and reorder repositories so they look like this:\r\n\r\n\r\n```\r\npluginManagement {\r\n    repositories {\r\n        mavenCentral()\r\n        google()\r\n        gradlePluginPortal()\r\n    }\r\n}\r\ndependencyResolutionManagement {\r\n    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\r\n    repositories {\r\n        mavenCentral()\r\n        google()\r\n    }\r\n}\r\n```\r\n\r\n** this worked on gradle plugin 8.0.2 and gradle version 8.0 and JDK 17**","title":"Could not find aapt2-8.0.2-9289358-windows.jar","body":"<p>I faced the same problem , this solution worked for me, just go to <code>settings.gradle</code>, and reorder repositories so they look like this:</p>\n<pre><code>pluginManagement {\n    repositories {\n        mavenCentral()\n        google()\n        gradlePluginPortal()\n    }\n}\ndependencyResolutionManagement {\n    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\n    repositories {\n        mavenCentral()\n        google()\n    }\n}\n</code></pre>\n<p>** this worked on gradle plugin 8.0.2 and gradle version 8.0 and JDK 17**</p>\n"},{"tags":[],"owner":{"account_id":7740347,"reputation":452,"user_id":5860352,"display_name":"Doron Ben-Ari"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689341417,"creation_date":1689341417,"answer_id":76688161,"question_id":76449830,"body_markdown":"For me it was resolved by deleting C:\\Users\\&lt;user&gt;\\.gradle\\caches","title":"Could not find aapt2-8.0.2-9289358-windows.jar","body":"<p>For me it was resolved by deleting C:\\Users&lt;user&gt;.gradle\\caches</p>\n"}],"owner":{"account_id":28797597,"reputation":1,"user_id":22055386,"display_name":"MohammadHossein"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":320,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689341417,"creation_date":1686475721,"question_id":76449830,"body_markdown":"when i run my application i get this error :\r\n\r\n```\r\nExecution failed for task &#39;:app:processDebugResources&#39;.\r\n&gt; Could not isolate parameters com.android.build.gradle.internal.dependency.AarResourcesCompilerTransform$Parameters_Decorated@4e59c9e of artifact transform AarResourcesCompilerTransform\r\n   &gt; Could not isolate value com.android.build.gradle.internal.dependency.AarResourcesCompilerTransform$Parameters_Decorated@4e59c9e of type AarResourcesCompilerTransform.Parameters\r\n      &gt; Could not resolve all files for configuration &#39;:app:detachedConfiguration2&#39;.\r\n         &gt; Failed to transform aapt2-8.0.2-9289358-windows.jar (com.android.tools.build:aapt2:8.0.2-9289358) to match attributes {artifactType=_internal-android-aapt2-binary, org.gradle.libraryelements=jar, org.gradle.status=release, org.gradle.usage=java-runtime}.\r\n            &gt; Could not find aapt2-8.0.2-9289358-windows.jar (com.android.tools.build:aapt2:8.0.2-9289358).\r\n              Searched in the following locations:\r\n                  https://dl.google.com/dl/android/maven2/com/android/tools/build/aapt2/8.0.2-9289358/aapt2-8.0.2-9289358-windows.jar\r\n\r\nPossible solution:\r\n - Declare repository providing the artifact, see the documentation at https://docs.gradle.org/current/userguide/declaring_repositories.html\r\n\r\n```\r\n\r\nevrything is ok i update gradle an evrything but problame is still going when i run elomatur","title":"Could not find aapt2-8.0.2-9289358-windows.jar","body":"<p>when i run my application i get this error :</p>\n<pre><code>Execution failed for task ':app:processDebugResources'.\n&gt; Could not isolate parameters com.android.build.gradle.internal.dependency.AarResourcesCompilerTransform$Parameters_Decorated@4e59c9e of artifact transform AarResourcesCompilerTransform\n   &gt; Could not isolate value com.android.build.gradle.internal.dependency.AarResourcesCompilerTransform$Parameters_Decorated@4e59c9e of type AarResourcesCompilerTransform.Parameters\n      &gt; Could not resolve all files for configuration ':app:detachedConfiguration2'.\n         &gt; Failed to transform aapt2-8.0.2-9289358-windows.jar (com.android.tools.build:aapt2:8.0.2-9289358) to match attributes {artifactType=_internal-android-aapt2-binary, org.gradle.libraryelements=jar, org.gradle.status=release, org.gradle.usage=java-runtime}.\n            &gt; Could not find aapt2-8.0.2-9289358-windows.jar (com.android.tools.build:aapt2:8.0.2-9289358).\n              Searched in the following locations:\n                  https://dl.google.com/dl/android/maven2/com/android/tools/build/aapt2/8.0.2-9289358/aapt2-8.0.2-9289358-windows.jar\n\nPossible solution:\n - Declare repository providing the artifact, see the documentation at https://docs.gradle.org/current/userguide/declaring_repositories.html\n\n</code></pre>\n<p>evrything is ok i update gradle an evrything but problame is still going when i run elomatur</p>\n"},{"tags":["java","notion"],"owner":{"account_id":16635777,"reputation":1,"user_id":12022507,"display_name":"Gary"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689341248,"creation_date":1689340312,"question_id":76688022,"body_markdown":"Code:\r\n\r\n    private void GetDBase() throws IOException {\r\n\r\n       try\r\n       {\r\n           client = new NotionClient(TOKEN);\r\n           String t = client.getToken();\r\n           System.out.println(t);\r\n\r\n       }\r\n       catch(Exception e)\r\n       {\r\n  \r\n       }\r\n \r\n       Users users = client.listUsers();\r\n       List&lt;User&gt; uusers = users.getResults();\r\n     for(User u : uusers)\r\n       {\r\n          String out = &quot;&quot;;\r\n          out = &quot;USER:&quot; + u.getName() + &quot; &quot; + u.getId() + &quot;\\n&quot;;\r\n          System.out.println(out);;\r\n      }\r\n        Database db= client.retrieveDatabase(DATABASE_ID);  ---------&gt;error message below\r\n        String id = db.getId();\r\n       System.out.println(id);    \r\n       client.close();\r\n    }\r\n\r\nError Message:\r\n\r\nI get the DATABASE_ID from the URL when the database is displayed in the browser but\r\nthe following error occurs:\r\n\r\n&gt; body      {&quot;object&quot;:&quot;error&quot;,&quot;status&quot;:404,&quot;code&quot;:&quot;object_not_found&quot;,&quot;message&quot;:&quot;Could not find database with ID: 35ecc67e-eda3-4929-94f7-9d3bbf2ad297. Make sure the relevant pages and databases are shared with your integration.&quot;}\r\n\r\nAny suggestions?\r\n\r\n\r\nI should get a Response/Request object that I can parse in Java","title":"Notion API for Java can&#39;t retrieve a Notion DataBase","body":"<p>Code:</p>\n<pre><code>private void GetDBase() throws IOException {\n\n   try\n   {\n       client = new NotionClient(TOKEN);\n       String t = client.getToken();\n       System.out.println(t);\n\n   }\n   catch(Exception e)\n   {\n\n   }\n\n   Users users = client.listUsers();\n   List&lt;User&gt; uusers = users.getResults();\n for(User u : uusers)\n   {\n      String out = &quot;&quot;;\n      out = &quot;USER:&quot; + u.getName() + &quot; &quot; + u.getId() + &quot;\\n&quot;;\n      System.out.println(out);;\n  }\n    Database db= client.retrieveDatabase(DATABASE_ID);  ---------&gt;error message below\n    String id = db.getId();\n   System.out.println(id);    \n   client.close();\n}\n</code></pre>\n<p>Error Message:</p>\n<p>I get the DATABASE_ID from the URL when the database is displayed in the browser but\nthe following error occurs:</p>\n<blockquote>\n<p>body      {&quot;object&quot;:&quot;error&quot;,&quot;status&quot;:404,&quot;code&quot;:&quot;object_not_found&quot;,&quot;message&quot;:&quot;Could not find database with ID: 35ecc67e-eda3-4929-94f7-9d3bbf2ad297. Make sure the relevant pages and databases are shared with your integration.&quot;}</p>\n</blockquote>\n<p>Any suggestions?</p>\n<p>I should get a Response/Request object that I can parse in Java</p>\n"},{"tags":["java","xml","xml-binding"],"comments":[{"owner":{"account_id":14763186,"reputation":101,"user_id":10661933,"display_name":"PawMaw"},"score":0,"creation_date":1689341580,"post_id":76688106,"comment_id":135203802,"body_markdown":"Hello! I suggest you try to change `namespace = &quot;xmlns=urn:nonstandard:****&quot;` to `namespace = &quot;urn:nonstandard:****&quot;`","body":"Hello! I suggest you try to change <code>namespace = &quot;xmlns=urn:nonstandard:****&quot;</code> to <code>namespace = &quot;urn:nonstandard:****&quot;</code>"},{"owner":{"account_id":13535116,"reputation":1,"user_id":9764520,"display_name":"AnilSrinivas Muddineni"},"score":0,"creation_date":1689411644,"post_id":76688106,"comment_id":135212081,"body_markdown":"Thank you @PawMaw . sorry i was new in using xml namespace thing, it worked and its coming as **xmlns:ns2=&quot;urn:nonstandard:mfiu-ttr&quot;**. How can i remove ns2 after xmlns","body":"Thank you @PawMaw . sorry i was new in using xml namespace thing, it worked and its coming as <b>xmlns:ns2=&quot;urn:nonstandard:mfiu-ttr&quot;</b>. How can i remove ns2 after xmlns"},{"owner":{"account_id":14763186,"reputation":101,"user_id":10661933,"display_name":"PawMaw"},"score":0,"creation_date":1689448729,"post_id":76688106,"comment_id":135216213,"body_markdown":"I searched some topics and found 2 solutions. One of them is try to add attribute `prefix=&quot;&quot;` to your report tag. If it wont help go to this question\n\nhttps://stackoverflow.com/questions/16589600/remove-ns2-as-default-namespace-prefix","body":"I searched some topics and found 2 solutions. One of them is try to add attribute <code>prefix=&quot;&quot;</code> to your report tag. If it wont help go to this question  <a href=\"https://stackoverflow.com/questions/16589600/remove-ns2-as-default-namespace-prefix\" title=\"remove ns2 as default namespace prefix\">stackoverflow.com/questions/16589600/&hellip;</a>"},{"owner":{"account_id":13535116,"reputation":1,"user_id":9764520,"display_name":"AnilSrinivas Muddineni"},"score":1,"creation_date":1689573183,"post_id":76688106,"comment_id":135226856,"body_markdown":"I found this similar to my question and it helps\nhttps://stackoverflow.com/questions/4312572/jaxb-generated-xml-problem-with-root-element-prefix","body":"I found this similar to my question and it helps <a href=\"https://stackoverflow.com/questions/4312572/jaxb-generated-xml-problem-with-root-element-prefix\" title=\"jaxb generated xml problem with root element prefix\">stackoverflow.com/questions/4312572/&hellip;</a>"}],"owner":{"account_id":13535116,"reputation":1,"user_id":9764520,"display_name":"AnilSrinivas Muddineni"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689341029,"creation_date":1689341029,"question_id":76688106,"body_markdown":"Please find below xml format where namespace is coming in end tags as well \r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\r\n&lt;report xmlns=&quot;urn:nonstandard:****&quot;&gt;\r\n&lt;headers/&gt;\r\n&lt;report_details/&gt;\r\n&lt;/report xmlns=&quot;urn:nonstandard:****&quot;&gt;\r\n```\r\nPlease check below code snippet which i&#39;m using \r\n```\r\n@XmlRootElement(name = &quot;report&quot;, \r\nnamespace = &quot;xmlns=urn:nonstandard:****&quot;)\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\npublic class ReportVo {\r\n        @XmlElement(name=&quot;header&quot;)\r\n\tprivate HeaderVo headerVo;\r\n\t\r\n\t\r\n\t@XmlElement(name=&quot;report_details&quot;)\r\n\tprivate ReportDetailsVO reportDetailsVo;\r\n}\r\n```\r\nand i&#39;m expecting my xml should generate like below\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\r\n&lt;report xmlns=&quot;urn:nonstandard:****&quot;&gt;\r\n&lt;headers/&gt;\r\n&lt;report_details/&gt;\r\n&lt;/report&gt;\r\n\r\n```","title":"namesspace is coming in ending tag of xml root element","body":"<p>Please find below xml format where namespace is coming in end tags as well</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\n&lt;report xmlns=&quot;urn:nonstandard:****&quot;&gt;\n&lt;headers/&gt;\n&lt;report_details/&gt;\n&lt;/report xmlns=&quot;urn:nonstandard:****&quot;&gt;\n</code></pre>\n<p>Please check below code snippet which i'm using</p>\n<pre><code>@XmlRootElement(name = &quot;report&quot;, \nnamespace = &quot;xmlns=urn:nonstandard:****&quot;)\n@XmlAccessorType(XmlAccessType.FIELD)\npublic class ReportVo {\n        @XmlElement(name=&quot;header&quot;)\n    private HeaderVo headerVo;\n    \n    \n    @XmlElement(name=&quot;report_details&quot;)\n    private ReportDetailsVO reportDetailsVo;\n}\n</code></pre>\n<p>and i'm expecting my xml should generate like below</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\n&lt;report xmlns=&quot;urn:nonstandard:****&quot;&gt;\n&lt;headers/&gt;\n&lt;report_details/&gt;\n&lt;/report&gt;\n\n</code></pre>\n"},{"tags":["java","mongodb","spring-data","spring-data-mongodb"],"comments":[{"owner":{"account_id":12859371,"reputation":103,"user_id":9301666,"display_name":"Peyton Wolf"},"score":0,"creation_date":1651172282,"post_id":72047582,"comment_id":127307040,"body_markdown":"You can type the id field as an ObjectId to begin with (`private ObjectId id`) or if you want it to be a string, set the value from the application code when building the initial object (something like `ObjectId.get().toString()`) instead of letting the database set it for you. Alternatively, since it sounds like you&#39;re using the `MongoOperations#save` function, you could use the `update` function instead.","body":"You can type the id field as an ObjectId to begin with (<code>private ObjectId id</code>) or if you want it to be a string, set the value from the application code when building the initial object (something like <code>ObjectId.get().toString()</code>) instead of letting the database set it for you. Alternatively, since it sounds like you&#39;re using the <code>MongoOperations#save</code> function, you could use the <code>update</code> function instead."},{"owner":{"account_id":12262607,"reputation":1364,"user_id":8949877,"display_name":"Harshit"},"score":0,"creation_date":1651205218,"post_id":72047582,"comment_id":127313470,"body_markdown":"remove ```@Field(&quot;_id&quot;)``` and check","body":"remove <code>@Field(&quot;_id&quot;)</code> and check"},{"owner":{"account_id":5951494,"reputation":12969,"user_id":4679320,"accept_rate":67,"display_name":"prasad_"},"score":1,"creation_date":1651205789,"post_id":72047582,"comment_id":127313543,"body_markdown":"You need to know the usage of the annotations `@Id`, `@Field` and `@MongoId` - how they affect the MongoDB document&#39;s `_id` field. See this post for some details: [Spring Mongo Repository is unable to match String to ObjectId in _id field](https://stackoverflow.com/questions/62590544/spring-mongo-repository-is-unable-to-match-string-to-objectid-in-id-field/62592108#62592108)","body":"You need to know the usage of the annotations <code>@Id</code>, <code>@Field</code> and <code>@MongoId</code> - how they affect the MongoDB document&#39;s <code>_id</code> field. See this post for some details: <a href=\"https://stackoverflow.com/questions/62590544/spring-mongo-repository-is-unable-to-match-string-to-objectid-in-id-field/62592108#62592108\">Spring Mongo Repository is unable to match String to ObjectId in _id field</a>"}],"answers":[{"tags":[],"owner":{"account_id":26415879,"reputation":1,"user_id":20064285,"display_name":"Gabriel Lirio Duarte"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689341018,"creation_date":1689341018,"answer_id":76688104,"question_id":72047582,"body_markdown":"Try to use the properties below in your class:  \r\n\r\n  \r\n\r\n    @Id\r\n    @MongoId\r\n    @org.springframework.data.annotation.Id\r\n    @Column(name = &quot;myId&quot;)\r\n    private String myId;\r\n\r\n\r\n\r\n@MongoId - transforms the ID defined in your class as the primary ID of the document in MongoDB. This way, it does not generate the default ObjectId (MongoDB&#39;s default ID).","title":"Spring data mongodb creates ObjectId on the saving and String _id on updating","body":"<p>Try to use the properties below in your class:</p>\n<pre><code>@Id\n@MongoId\n@org.springframework.data.annotation.Id\n@Column(name = &quot;myId&quot;)\nprivate String myId;\n</code></pre>\n<p>@MongoId - transforms the ID defined in your class as the primary ID of the document in MongoDB. This way, it does not generate the default ObjectId (MongoDB's default ID).</p>\n"}],"owner":{"account_id":16506411,"reputation":1143,"user_id":11926338,"display_name":"Pavel Petrashov"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7557,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1689341018,"creation_date":1651165036,"question_id":72047582,"body_markdown":"I have an entity:\r\n\r\n    @Document(collection = &quot;users&quot;)\r\n    @Getter\r\n    @Setter\r\n    public class User {\r\n    \r\n        @Id\r\n        @Field(&quot;_id&quot;)\r\n        private String id;\r\n\r\nWhen I save an entity via spring repository it creates Id in DB: \r\n\r\n    &quot;_id&quot; : ObjectId(&quot;626ac45dbf00d30e6a67ac73&quot;)\r\n\r\nWhen I select that entity, update a field and save it again, it creates a new item in the DB with Id: \r\n\r\n    &quot;_id&quot; : &quot;626ac45dbf00d30e6a67ac73&quot;\r\n\r\nWhat should I do for keeping the same ids on the creation and updating entity? ","title":"Spring data mongodb creates ObjectId on the saving and String _id on updating","body":"<p>I have an entity:</p>\n<pre><code>@Document(collection = &quot;users&quot;)\n@Getter\n@Setter\npublic class User {\n\n    @Id\n    @Field(&quot;_id&quot;)\n    private String id;\n</code></pre>\n<p>When I save an entity via spring repository it creates Id in DB:</p>\n<pre><code>&quot;_id&quot; : ObjectId(&quot;626ac45dbf00d30e6a67ac73&quot;)\n</code></pre>\n<p>When I select that entity, update a field and save it again, it creates a new item in the DB with Id:</p>\n<pre><code>&quot;_id&quot; : &quot;626ac45dbf00d30e6a67ac73&quot;\n</code></pre>\n<p>What should I do for keeping the same ids on the creation and updating entity?</p>\n"},{"tags":["java","spring-boot","spring-boot-actuator"],"answers":[{"tags":[],"owner":{"account_id":28877964,"reputation":581,"user_id":22118035,"display_name":"Dhruman Desai"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1689340636,"creation_date":1688727928,"answer_id":76636399,"question_id":64847763,"body_markdown":"This solution will work for **version 2.3.5** : \r\n\r\nOpen your application.properties or application.yml file.\r\n\r\nAdd or modify the following property to specify the log file location:\r\n\r\nFor application.properties:\r\n\r\n    logging.file=/dev/stdout\r\n\r\nFor application.yml:\r\n\r\n    logging:\r\n      file: /dev/stdout\r\n\r\nBy explicitly setting the log file to /dev/stdout, you ensure that the logs are streamed to the standard output, which is what you want.\r\n\r\nSave the changes and restart your application.\r\n","title":"SpringBoot 2.3.5 actuator different port causes FileNotFoundException: /dev/management_stdout","body":"<p>This solution will work for <strong>version 2.3.5</strong> :</p>\n<p>Open your application.properties or application.yml file.</p>\n<p>Add or modify the following property to specify the log file location:</p>\n<p>For application.properties:</p>\n<pre><code>logging.file=/dev/stdout\n</code></pre>\n<p>For application.yml:</p>\n<pre><code>logging:\n  file: /dev/stdout\n</code></pre>\n<p>By explicitly setting the log file to /dev/stdout, you ensure that the logs are streamed to the standard output, which is what you want.</p>\n<p>Save the changes and restart your application.</p>\n"}],"owner":{"account_id":192592,"reputation":21561,"user_id":433814,"accept_rate":86,"display_name":"Marcello DeSales"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":671,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":1,"score":12,"last_activity_date":1689340636,"creation_date":1605462309,"question_id":64847763,"body_markdown":"# Requirement\r\n\r\n* We need to change the actuator endpoints to be on a different port number\r\n* Changing the value of `management.server.port: 8404` causes an exception as the server configures the new port to stream logs to `/dev/management_stdout` when it should be `/dev/stdout` (already configured for the server).\r\n\r\n# SpringBoot 2.3.5 Setup\r\n\r\n```gradle\r\nbuildscript {\r\n    repositories {\r\n        mavenCentral()\r\n\r\n        // For src/gradle/tests.gradle\r\n        maven {\r\n            url &quot;https://plugins.gradle.org/m2/&quot;\r\n        }\r\n    }\r\n    dependencies {\r\n        classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:2.3.5.RELEASE&quot;)\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation(&#39;org.springframework.boot:spring-boot-starter-actuator&#39;)\r\n}\r\n```\r\n\r\n# Changing SpringBoot Actuator\r\n\r\n* Changed the port number as follows in `application.yaml`\r\n\r\n```yaml\r\nmanagement:\r\n  endpoints:\r\n    web:\r\n      exposure:\r\n        include: &quot;*&quot;\r\n  server:\r\n    port: 8404\r\n```\r\n\r\n# Error shown during bootstrap\r\n\r\n* The default logger is trying to write to `/dev/management_stdout`\r\n\r\n```\r\n2020-11-15T17:23:41 ERROR [app=parking-plus-service,prf=default][tid=,sid=,sxp=][cid=] 77926 --- [  restartedMain] o.apache.catalina.valves.AccessLogValve  : Failed to open access log file [/dev/management_stdout]\r\n\r\njava.io.FileNotFoundException: /dev/management_stdout (Operation not permitted)\r\n\tat java.base/java.io.FileOutputStream.open0(Native Method)\r\n\tat java.base/java.io.FileOutputStream.open(FileOutputStream.java:291)\r\n\tat java.base/java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:234)\r\n\tat org.apache.catalina.valves.AccessLogValve.open(AccessLogValve.java:651)\r\n\tat org.apache.catalina.valves.AccessLogValve.startInternal(AccessLogValve.java:685)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.StandardPipeline.startInternal(StandardPipeline.java:176)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:933)\r\n\tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:262)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:421)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.startup.Tomcat.start(Tomcat.java:486)\r\n\tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:123)\r\n\tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.&lt;init&gt;(TomcatWebServer.java:104)\r\n\tat org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:440)\r\n\tat org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:193)\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:178)\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:158)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:545)\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:143)\r\n\tat org.springframework.boot.actuate.autoconfigure.web.server.ManagementContextAutoConfiguration$DifferentManagementContextConfiguration.onApplicationEvent(ManagementContextAutoConfiguration.java:142)\r\n\tat org.springframework.boot.actuate.autoconfigure.web.server.ManagementContextAutoConfiguration$DifferentManagementContextConfiguration.onApplicationEvent(ManagementContextAutoConfiguration.java:114)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)\r\n\tat org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:404)\r\n\tat org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:361)\r\n\tat org.springframework.boot.web.servlet.context.WebServerStartStopLifecycle.start(WebServerStartStopLifecycle.java:46)\r\n\tat org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:182)\r\n\tat org.springframework.context.support.DefaultLifecycleProcessor.access$200(DefaultLifecycleProcessor.java:53)\r\n\tat org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.start(DefaultLifecycleProcessor.java:360)\r\n\tat org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:158)\r\n\tat org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:122)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:895)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:554)\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:143)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:758)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:750)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:405)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:315)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1237)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1226)\r\n\tat cash.super_.platform.service.ParkingPlusApplication.main(ParkingPlusApplication.java:12)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:564)\r\n\tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)\r\n```\r\n\r\n# Question\r\n\r\n* Which property sets the file name prefix `stdout` just like on the server settings shown below?\r\n  * Maybe the management embedded tomcat is taking the value of `directory` and using the prefix as `management_stdout` as the value of the file?\r\n\r\n```yaml\r\nserver:\r\n  #port: 8080 default\r\n  tomcat:\r\n    accesslog:\r\n      enabled: true\r\n      directory: /dev\r\n      prefix: stdout\r\n      buffered: false\r\n      suffix:\r\n      file-date-format:\r\n```","title":"SpringBoot 2.3.5 actuator different port causes FileNotFoundException: /dev/management_stdout","body":"<h1>Requirement</h1>\n<ul>\n<li>We need to change the actuator endpoints to be on a different port number</li>\n<li>Changing the value of <code>management.server.port: 8404</code> causes an exception as the server configures the new port to stream logs to <code>/dev/management_stdout</code> when it should be <code>/dev/stdout</code> (already configured for the server).</li>\n</ul>\n<h1>SpringBoot 2.3.5 Setup</h1>\n<pre><code>buildscript {\n    repositories {\n        mavenCentral()\n\n        // For src/gradle/tests.gradle\n        maven {\n            url &quot;https://plugins.gradle.org/m2/&quot;\n        }\n    }\n    dependencies {\n        classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:2.3.5.RELEASE&quot;)\n    }\n}\n\ndependencies {\n    implementation('org.springframework.boot:spring-boot-starter-actuator')\n}\n</code></pre>\n<h1>Changing SpringBoot Actuator</h1>\n<ul>\n<li>Changed the port number as follows in <code>application.yaml</code></li>\n</ul>\n<pre class=\"lang-yaml prettyprint-override\"><code>management:\n  endpoints:\n    web:\n      exposure:\n        include: &quot;*&quot;\n  server:\n    port: 8404\n</code></pre>\n<h1>Error shown during bootstrap</h1>\n<ul>\n<li>The default logger is trying to write to <code>/dev/management_stdout</code></li>\n</ul>\n<pre><code>2020-11-15T17:23:41 ERROR [app=parking-plus-service,prf=default][tid=,sid=,sxp=][cid=] 77926 --- [  restartedMain] o.apache.catalina.valves.AccessLogValve  : Failed to open access log file [/dev/management_stdout]\n\njava.io.FileNotFoundException: /dev/management_stdout (Operation not permitted)\n    at java.base/java.io.FileOutputStream.open0(Native Method)\n    at java.base/java.io.FileOutputStream.open(FileOutputStream.java:291)\n    at java.base/java.io.FileOutputStream.&lt;init&gt;(FileOutputStream.java:234)\n    at org.apache.catalina.valves.AccessLogValve.open(AccessLogValve.java:651)\n    at org.apache.catalina.valves.AccessLogValve.startInternal(AccessLogValve.java:685)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardPipeline.startInternal(StandardPipeline.java:176)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:933)\n    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:262)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:421)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.startup.Tomcat.start(Tomcat.java:486)\n    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:123)\n    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.&lt;init&gt;(TomcatWebServer.java:104)\n    at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:440)\n    at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:193)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:178)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:158)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:545)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:143)\n    at org.springframework.boot.actuate.autoconfigure.web.server.ManagementContextAutoConfiguration$DifferentManagementContextConfiguration.onApplicationEvent(ManagementContextAutoConfiguration.java:142)\n    at org.springframework.boot.actuate.autoconfigure.web.server.ManagementContextAutoConfiguration$DifferentManagementContextConfiguration.onApplicationEvent(ManagementContextAutoConfiguration.java:114)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)\n    at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:404)\n    at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:361)\n    at org.springframework.boot.web.servlet.context.WebServerStartStopLifecycle.start(WebServerStartStopLifecycle.java:46)\n    at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:182)\n    at org.springframework.context.support.DefaultLifecycleProcessor.access$200(DefaultLifecycleProcessor.java:53)\n    at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.start(DefaultLifecycleProcessor.java:360)\n    at org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:158)\n    at org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:122)\n    at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:895)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:554)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:143)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:758)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:750)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:405)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:315)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1237)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1226)\n    at cash.super_.platform.service.ParkingPlusApplication.main(ParkingPlusApplication.java:12)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:564)\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49)\n</code></pre>\n<h1>Question</h1>\n<ul>\n<li>Which property sets the file name prefix <code>stdout</code> just like on the server settings shown below?\n<ul>\n<li>Maybe the management embedded tomcat is taking the value of <code>directory</code> and using the prefix as <code>management_stdout</code> as the value of the file?</li>\n</ul>\n</li>\n</ul>\n<pre class=\"lang-yaml prettyprint-override\"><code>server:\n  #port: 8080 default\n  tomcat:\n    accesslog:\n      enabled: true\n      directory: /dev\n      prefix: stdout\n      buffered: false\n      suffix:\n      file-date-format:\n</code></pre>\n"},{"tags":["java","spring-boot","elasticsearch","kibana"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689349239,"post_id":76687124,"comment_id":135205683,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":149941,"reputation":2907,"user_id":362792,"display_name":"Hitobat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689340441,"creation_date":1689340441,"answer_id":76688038,"question_id":76687124,"body_markdown":"It looks like the `NativeSearchQueryBuilder` class, and the `NativeSearchQuery` instances produced by it were deprecated in Spring Data Elasticsearch 5.0.\r\nI assume your upgrade for Spring Boot 3.1 has also changed the spring data dependency version as well, perhaps to latest.\r\n\r\nInstead you should replace with `NativeQuery.builder()` following the example from this previous SO answer. https://stackoverflow.com/a/76007192/362792\r\n\r\nThe official docs for this (I think) are below, see &quot;Package Changes&quot; section.\r\nhttps://docs.spring.io/spring-data/elasticsearch/docs/5.1.2/reference/html/#elasticsearch-migration-guide-4.4-5.0.breaking-changes-packages","title":"IllegalArgumentException: unhandled Query implementation org.springframework.data.elasticsearch.client.erhlc.NativeSearchQuery","body":"<p>It looks like the <code>NativeSearchQueryBuilder</code> class, and the <code>NativeSearchQuery</code> instances produced by it were deprecated in Spring Data Elasticsearch 5.0.\nI assume your upgrade for Spring Boot 3.1 has also changed the spring data dependency version as well, perhaps to latest.</p>\n<p>Instead you should replace with <code>NativeQuery.builder()</code> following the example from this previous SO answer. <a href=\"https://stackoverflow.com/a/76007192/362792\">https://stackoverflow.com/a/76007192/362792</a></p>\n<p>The official docs for this (I think) are below, see &quot;Package Changes&quot; section.\n<a href=\"https://docs.spring.io/spring-data/elasticsearch/docs/5.1.2/reference/html/#elasticsearch-migration-guide-4.4-5.0.breaking-changes-packages\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/elasticsearch/docs/5.1.2/reference/html/#elasticsearch-migration-guide-4.4-5.0.breaking-changes-packages</a></p>\n"}],"owner":{"account_id":25559284,"reputation":1,"user_id":19342168,"display_name":"user19342168"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":141,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1689340441,"creation_date":1689333065,"question_id":76687124,"body_markdown":"I&#39;m encountering an issue with the Spring Data Elasticsearch library when using JDK 17 and Spring Boot version 3.1. The problem arises when I try to execute a search operation using NativeSearchQueryBuilder and NativeSearchQuery. The search operation works as expected with this configuration.\r\n\r\nHowever, when I upgraded to JDK 17 and Spring Boot version 3.1, the same search operation throws an IllegalArgumentException with the message &quot;unhandled Query implementation org.springframework.data.elasticsearch.client.erhlc.NativeSearchQuery.&quot;\r\n\r\nI have verified that the Elasticsearch dependencies are compatible with Spring Boot 3.1, and the Elasticsearch server is running correctly. It appears that the issue is related to the Spring Data Elasticsearch library or its compatibility with the new versions.\r\n\r\n\r\n\r\nHere are the relevant details of my setup:\r\n\r\nJDK version: JDK 17\r\nSpring Boot version: 3.1\r\nSpring Data Elasticsearch version: [Specify the version you are using]\r\nElasticsearch server version: [Specify the version you are using]\r\nI have already tried the following steps without success:\r\n\r\nChecked the Elasticsearch configuration for correctness\r\nVerified the compatibility of dependencies\r\nHas anyone encountered a similar issue or have any insights on how to resolve it? Any suggestions, guidance, or workarounds would be highly appreciated.\r\n\r\nI have written all my logic of aggregation, date-histogram and all using executing with help of NativeSearchQueryBuilder","title":"IllegalArgumentException: unhandled Query implementation org.springframework.data.elasticsearch.client.erhlc.NativeSearchQuery","body":"<p>I'm encountering an issue with the Spring Data Elasticsearch library when using JDK 17 and Spring Boot version 3.1. The problem arises when I try to execute a search operation using NativeSearchQueryBuilder and NativeSearchQuery. The search operation works as expected with this configuration.</p>\n<p>However, when I upgraded to JDK 17 and Spring Boot version 3.1, the same search operation throws an IllegalArgumentException with the message &quot;unhandled Query implementation org.springframework.data.elasticsearch.client.erhlc.NativeSearchQuery.&quot;</p>\n<p>I have verified that the Elasticsearch dependencies are compatible with Spring Boot 3.1, and the Elasticsearch server is running correctly. It appears that the issue is related to the Spring Data Elasticsearch library or its compatibility with the new versions.</p>\n<p>Here are the relevant details of my setup:</p>\n<p>JDK version: JDK 17\nSpring Boot version: 3.1\nSpring Data Elasticsearch version: [Specify the version you are using]\nElasticsearch server version: [Specify the version you are using]\nI have already tried the following steps without success:</p>\n<p>Checked the Elasticsearch configuration for correctness\nVerified the compatibility of dependencies\nHas anyone encountered a similar issue or have any insights on how to resolve it? Any suggestions, guidance, or workarounds would be highly appreciated.</p>\n<p>I have written all my logic of aggregation, date-histogram and all using executing with help of NativeSearchQueryBuilder</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","many-to-one"],"comments":[{"owner":{"account_id":10933290,"reputation":2086,"user_id":8035759,"display_name":"Asgar"},"score":0,"creation_date":1689335142,"post_id":76687170,"comment_id":135202327,"body_markdown":"Where is your `Event` table?\nalso `EVENT` is a reserved keyword, try avoiding that","body":"Where is your <code>Event</code> table? also <code>EVENT</code> is a reserved keyword, try avoiding that"},{"owner":{"account_id":29016704,"reputation":1,"user_id":22226979,"display_name":"seldonaari"},"score":0,"creation_date":1689336126,"post_id":76687170,"comment_id":135202527,"body_markdown":"Thanks for your answer !\nI forgot to add the event table in my snippets, i&#39;m adding it\nI&#39;m also retrying changing the reserved name of Event","body":"Thanks for your answer ! I forgot to add the event table in my snippets, i&#39;m adding it I&#39;m also retrying changing the reserved name of Event"},{"owner":{"account_id":29016704,"reputation":1,"user_id":22226979,"display_name":"seldonaari"},"score":0,"creation_date":1689339147,"post_id":76687170,"comment_id":135203223,"body_markdown":"Hi, i change my event table as &quot;representation&quot; table and issue stays the same.\nI&#39;ll update my post with the new table name","body":"Hi, i change my event table as &quot;representation&quot; table and issue stays the same. I&#39;ll update my post with the new table name"},{"owner":{"account_id":10933290,"reputation":2086,"user_id":8035759,"display_name":"Asgar"},"score":0,"creation_date":1689342839,"post_id":76687170,"comment_id":135204101,"body_markdown":"Is your code even working?\n`@Id` and `@javax.persistence.Id` in the same place? Is it even allowed?","body":"Is your code even working? <code>@Id</code> and <code>@javax.persistence.Id</code> in the same place? Is it even allowed?"},{"owner":{"account_id":29016704,"reputation":1,"user_id":22226979,"display_name":"seldonaari"},"score":0,"creation_date":1689343945,"post_id":76687170,"comment_id":135204380,"body_markdown":"My crud was working before trying to put a foreign key in one of my tables.\n\nIf I try to delete the @Id annotation (from import org.springframework.data.annotation.Id), i cannot for instance delete an entry and got thjis error\n : \njava.lang.IllegalStateException: Required identifier property not found for class com.remyscreve.starmaniaticketing.model.Representation\n\n\nIf I try to delete the Id from javax persistence, it doesn&#39;t compile","body":"My crud was working before trying to put a foreign key in one of my tables.  If I try to delete the @Id annotation (from import org.springframework.data.annotation.Id), i cannot for instance delete an entry and got thjis error  :  java.lang.IllegalStateException: Required identifier property not found for class com.remyscreve.starmaniaticketing.model.Representation   If I try to delete the Id from javax persistence, it doesn&#39;t compile"},{"owner":{"account_id":10933290,"reputation":2086,"user_id":8035759,"display_name":"Asgar"},"score":0,"creation_date":1689344249,"post_id":76687170,"comment_id":135204462,"body_markdown":"I tried your model and the code. Obviously there were errors like `@Column(value = &quot;phoneNumber&quot;)`. I did not find the issue you are mentioning.","body":"I tried your model and the code. Obviously there were errors like <code>@Column(value = &quot;phoneNumber&quot;)</code>. I did not find the issue you are mentioning."},{"owner":{"account_id":29016704,"reputation":1,"user_id":22226979,"display_name":"seldonaari"},"score":0,"creation_date":1689344655,"post_id":76687170,"comment_id":135204549,"body_markdown":"@Asgar do you mean it worked on your side with my snippets ?","body":"@Asgar do you mean it worked on your side with my snippets ?"},{"owner":{"account_id":10933290,"reputation":2086,"user_id":8035759,"display_name":"Asgar"},"score":0,"creation_date":1689344709,"post_id":76687170,"comment_id":135204563,"body_markdown":"I meant it did not throw the `unknown column` issue.","body":"I meant it did not throw the <code>unknown column</code> issue."},{"owner":{"account_id":29016704,"reputation":1,"user_id":22226979,"display_name":"seldonaari"},"score":0,"creation_date":1689345155,"post_id":76687170,"comment_id":135204683,"body_markdown":"Ok, thank you very much for your help, I really don&#39;t understand what goes wrong in my side :/ ...","body":"Ok, thank you very much for your help, I really don&#39;t understand what goes wrong in my side :/ ..."}],"owner":{"account_id":29016704,"reputation":1,"user_id":22226979,"display_name":"seldonaari"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689339719,"creation_date":1689333459,"question_id":76687170,"body_markdown":"I&#39;m trying to create an association between two tables such as :\r\nRepresentation can have multiple Bookings,\r\nBooking can only have a single Representation\r\n\r\nI was trying to use the Javax persistence @ManyToOne from my Booking.java entity.\r\n\r\nHowever when i&#39;m trying to reach the view of my bookings, I have an error return :\r\n\r\n`java.sql.SQLSyntaxErrorException: Unknown column &#39;representation.booking&#39; in &#39;on clause&#39;` \r\n\r\nThis error makes sens to me, but i don&#39;t uderstand why it tries to call the column representation.booking (which does not exists) in the first place.\r\n\r\nHere&#39;s what I tried :\r\n\r\nMy Booking Entitty :\r\n\r\n```java\r\n@Builder\r\n@NoArgsConstructor(force = true)\r\n@AllArgsConstructor\r\n@Entity\r\npublic class Booking{\r\n\r\n        @Id\r\n        @javax.persistence.Id\r\n        @GeneratedValue(strategy= GenerationType.AUTO)\r\n        Integer id;\r\n\r\n        @NotEmpty\r\n        @NotBlank\r\n        String name;\r\n\r\n        @NotNull\r\n        @DecimalMin(&quot;1&quot;)\r\n        Integer number;\r\n\r\n\r\n        @NotEmpty\r\n        @NotBlank\r\n        @Column(value = &quot;phoneNumber&quot;)\r\n        String phoneNumber;\r\n\r\n        @NotEmpty\r\n        @Email\r\n        String email;\r\n\r\n        @ManyToOne(targetEntity = Representation.class)\r\n        @JoinColumn(name = &quot;fk_representation&quot;)\r\n        Representation representation;\r\n```\r\n\r\nMy Representation entity :\r\n\r\n```java\r\n@Builder\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\npublic class Representation {\r\n\r\n        @Id\r\n        @javax.persistence.Id\r\n        @GeneratedValue(strategy= GenerationType.AUTO)\r\n        Integer id;\r\n\r\n        String place;\r\n\r\n        String location;\r\n\r\n        Integer price;\r\n\r\n        String datetime;\r\n```\r\nMy Controller :\r\n\r\n```java\r\n           @GetMapping(&quot;/view&quot;)\r\n    public String findAllView(Model model) {\r\n        List&lt;Booking&gt; bookings = repository.findAll();\r\n        model.addAttribute(&quot;bookings&quot;, bookings);\r\n        return &quot;bookings&quot;;\r\n    }\r\n```\r\n\r\n\r\nMy Booking View :\r\n\r\n```html\r\n&lt;table id=&quot;datatablesSimple&quot;&gt;\r\n                            &lt;thead&gt;\r\n                            &lt;tr&gt;\r\n                                &lt;th&gt;Id&lt;/th&gt;\r\n                                &lt;th&gt;Nom&lt;/th&gt;\r\n                                &lt;th&gt;Email&lt;/th&gt;\r\n                                &lt;th&gt;Num&#233;ro de t&#233;l&#233;phone&lt;/th&gt;\r\n                                &lt;th&gt;Nombre&lt;/th&gt;\r\n                                &lt;th&gt;Ev&#232;nement&lt;/th&gt;\r\n                            &lt;/tr&gt;\r\n                            &lt;/thead&gt;\r\n                            &lt;tfoot&gt;\r\n                            &lt;tr&gt;\r\n                                &lt;th&gt;Id&lt;/th&gt;\r\n                                &lt;th&gt;Nom&lt;/th&gt;\r\n                                &lt;th&gt;Email&lt;/th&gt;\r\n                                &lt;th&gt;Num&#233;ro de t&#233;l&#233;phone&lt;/th&gt;\r\n                                &lt;th&gt;Nombre&lt;/th&gt;\r\n                                &lt;th&gt;Ev&#232;nement&lt;/th&gt;\r\n                            &lt;/tr&gt;\r\n                            &lt;/tfoot&gt;\r\n                            &lt;tbody&gt;\r\n                            &lt;tr th:each=&quot;booking : ${bookings}&quot;&gt;\r\n                                &lt;td th:utext=&quot;${booking.id}&quot;&gt;&lt;/td&gt;\r\n                                &lt;td th:utext=&quot;${booking.name}&quot;&gt;&lt;/td&gt;\r\n                                &lt;td th:utext=&quot;${booking.email}&quot;&gt;&lt;/td&gt;\r\n                                &lt;td th:utext=&quot;${booking.phoneNumber}&quot;&gt;&lt;/td&gt;\r\n                                &lt;td th:utext=&quot;${booking.number}&quot;&gt;&lt;/td&gt;\r\n                                &lt;td th:utext=&quot;${booking.representation.id}&quot;&gt;&lt;/td&gt;\r\n&lt;!--                                &lt;td th:utext=&quot;${ticket.qrCodeSha}&quot;&gt;&lt;/td&gt;--&gt;\r\n                                &lt;td&gt;&lt;a  th:href=&quot;@{/admin/booking/delete/{id}(id=${booking.id})}&quot;&gt;Delete&lt;/a&gt;&lt;/td&gt;\r\n                            &lt;/tr&gt;\r\n                            &lt;/tbody&gt;\r\n                        &lt;/table&gt;\r\n```\r\n\r\nMy Database Structure :\r\n\r\n```SQL\r\nCREATE TABLE IF NOT EXISTS booking (\r\n    id SERIAL PRIMARY KEY,\r\n    name VARCHAR(255) NOT NULL,\r\n    number INTEGER NOT NULL,\r\n    phoneNumber VARCHAR(255) NOT NULL,\r\n    email VARCHAR(255) NOT NULL,\r\n    fk_representation INTEGER NOT NULL\r\n);\r\n\r\nCREATE TABLE IF NOT EXISTS ticket (\r\n    id SERIAL PRIMARY KEY,\r\n    boo_id INTEGER NOT NULL,\r\n    qrCodeSha VARCHAR(255) NOT NULL\r\n    );\r\n\r\nCREATE TABLE IF NOT EXISTS representation (\r\n    id SERIAL PRIMARY KEY,\r\n    place VARCHAR(255) NOT NULL,\r\n    location VARCHAR(255) NOT NULL,\r\n    price INTEGER NOT NULL,\r\n    datetime VARCHAR(255)\r\n    );\r\n```\r\n\r\n\r\n**\r\nThe query JPA tries :**\r\n\r\n```SQL\r\nSELECT `booking`.`id` AS `id`, `booking`.`name` AS `name`, `booking`.`email` AS `email`, `booking`.`number` AS `number`, `booking`.`phoneNumber` AS `phoneNumber`, `representation`.`id` AS `representation_id`, `representation`.`price` AS `representation_price`, `representation`.`place` AS `representation_place`, `representation`.`location` AS `representation_location`, `representation`.`datetime` AS `representation_datetime` FROM `booking` LEFT OUTER JOIN `representation` `representation` ON `representation`.`booking` = `booking`.`id`\r\n```\r\n\r\nof course it returns :\r\n\\#1054 - Field &#39;representation.booking&#39; unknown in on clause\r\n\r\n**The query i&#39;d like it to send :**\r\n\r\n```SQL\r\nSELECT `booking`.`id` AS `id`, `booking`.`name` AS `name`, `booking`.`email` AS `email`, `booking`.`number` AS `number`, `booking`.`phoneNumber` AS `phoneNumber`, `representation`.`id` AS `representation_id`, `representation`.`price` AS `representation_price`, `representation`.`place` AS `representation_place`, `representation`.`location` AS `representation_location`, `representation`.`datetime` AS `representation_datetime` FROM `booking` LEFT OUTER JOIN `representation` `representation` ON `representation`.`id` = `booking`.`fk_representation`;\r\n```\r\n\r\nIts result :\r\n[Screenshot of answer of expected query][1]\r\n\r\n\r\nCould you please help me understand what I&#39;m doing wrong ?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2EAxd.png","title":"java - Spring Boot JPA - Wrong JOIN by JPA","body":"<p>I'm trying to create an association between two tables such as :\nRepresentation can have multiple Bookings,\nBooking can only have a single Representation</p>\n<p>I was trying to use the Javax persistence @ManyToOne from my Booking.java entity.</p>\n<p>However when i'm trying to reach the view of my bookings, I have an error return :</p>\n<p><code>java.sql.SQLSyntaxErrorException: Unknown column 'representation.booking' in 'on clause'</code></p>\n<p>This error makes sens to me, but i don't uderstand why it tries to call the column representation.booking (which does not exists) in the first place.</p>\n<p>Here's what I tried :</p>\n<p>My Booking Entitty :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Builder\n@NoArgsConstructor(force = true)\n@AllArgsConstructor\n@Entity\npublic class Booking{\n\n        @Id\n        @javax.persistence.Id\n        @GeneratedValue(strategy= GenerationType.AUTO)\n        Integer id;\n\n        @NotEmpty\n        @NotBlank\n        String name;\n\n        @NotNull\n        @DecimalMin(&quot;1&quot;)\n        Integer number;\n\n\n        @NotEmpty\n        @NotBlank\n        @Column(value = &quot;phoneNumber&quot;)\n        String phoneNumber;\n\n        @NotEmpty\n        @Email\n        String email;\n\n        @ManyToOne(targetEntity = Representation.class)\n        @JoinColumn(name = &quot;fk_representation&quot;)\n        Representation representation;\n</code></pre>\n<p>My Representation entity :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\npublic class Representation {\n\n        @Id\n        @javax.persistence.Id\n        @GeneratedValue(strategy= GenerationType.AUTO)\n        Integer id;\n\n        String place;\n\n        String location;\n\n        Integer price;\n\n        String datetime;\n</code></pre>\n<p>My Controller :</p>\n<pre class=\"lang-java prettyprint-override\"><code>           @GetMapping(&quot;/view&quot;)\n    public String findAllView(Model model) {\n        List&lt;Booking&gt; bookings = repository.findAll();\n        model.addAttribute(&quot;bookings&quot;, bookings);\n        return &quot;bookings&quot;;\n    }\n</code></pre>\n<p>My Booking View :</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;table id=&quot;datatablesSimple&quot;&gt;\n                            &lt;thead&gt;\n                            &lt;tr&gt;\n                                &lt;th&gt;Id&lt;/th&gt;\n                                &lt;th&gt;Nom&lt;/th&gt;\n                                &lt;th&gt;Email&lt;/th&gt;\n                                &lt;th&gt;Numéro de téléphone&lt;/th&gt;\n                                &lt;th&gt;Nombre&lt;/th&gt;\n                                &lt;th&gt;Evènement&lt;/th&gt;\n                            &lt;/tr&gt;\n                            &lt;/thead&gt;\n                            &lt;tfoot&gt;\n                            &lt;tr&gt;\n                                &lt;th&gt;Id&lt;/th&gt;\n                                &lt;th&gt;Nom&lt;/th&gt;\n                                &lt;th&gt;Email&lt;/th&gt;\n                                &lt;th&gt;Numéro de téléphone&lt;/th&gt;\n                                &lt;th&gt;Nombre&lt;/th&gt;\n                                &lt;th&gt;Evènement&lt;/th&gt;\n                            &lt;/tr&gt;\n                            &lt;/tfoot&gt;\n                            &lt;tbody&gt;\n                            &lt;tr th:each=&quot;booking : ${bookings}&quot;&gt;\n                                &lt;td th:utext=&quot;${booking.id}&quot;&gt;&lt;/td&gt;\n                                &lt;td th:utext=&quot;${booking.name}&quot;&gt;&lt;/td&gt;\n                                &lt;td th:utext=&quot;${booking.email}&quot;&gt;&lt;/td&gt;\n                                &lt;td th:utext=&quot;${booking.phoneNumber}&quot;&gt;&lt;/td&gt;\n                                &lt;td th:utext=&quot;${booking.number}&quot;&gt;&lt;/td&gt;\n                                &lt;td th:utext=&quot;${booking.representation.id}&quot;&gt;&lt;/td&gt;\n&lt;!--                                &lt;td th:utext=&quot;${ticket.qrCodeSha}&quot;&gt;&lt;/td&gt;--&gt;\n                                &lt;td&gt;&lt;a  th:href=&quot;@{/admin/booking/delete/{id}(id=${booking.id})}&quot;&gt;Delete&lt;/a&gt;&lt;/td&gt;\n                            &lt;/tr&gt;\n                            &lt;/tbody&gt;\n                        &lt;/table&gt;\n</code></pre>\n<p>My Database Structure :</p>\n<pre><code>CREATE TABLE IF NOT EXISTS booking (\n    id SERIAL PRIMARY KEY,\n    name VARCHAR(255) NOT NULL,\n    number INTEGER NOT NULL,\n    phoneNumber VARCHAR(255) NOT NULL,\n    email VARCHAR(255) NOT NULL,\n    fk_representation INTEGER NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS ticket (\n    id SERIAL PRIMARY KEY,\n    boo_id INTEGER NOT NULL,\n    qrCodeSha VARCHAR(255) NOT NULL\n    );\n\nCREATE TABLE IF NOT EXISTS representation (\n    id SERIAL PRIMARY KEY,\n    place VARCHAR(255) NOT NULL,\n    location VARCHAR(255) NOT NULL,\n    price INTEGER NOT NULL,\n    datetime VARCHAR(255)\n    );\n</code></pre>\n<p>**\nThe query JPA tries :**</p>\n<pre><code>SELECT `booking`.`id` AS `id`, `booking`.`name` AS `name`, `booking`.`email` AS `email`, `booking`.`number` AS `number`, `booking`.`phoneNumber` AS `phoneNumber`, `representation`.`id` AS `representation_id`, `representation`.`price` AS `representation_price`, `representation`.`place` AS `representation_place`, `representation`.`location` AS `representation_location`, `representation`.`datetime` AS `representation_datetime` FROM `booking` LEFT OUTER JOIN `representation` `representation` ON `representation`.`booking` = `booking`.`id`\n</code></pre>\n<p>of course it returns :\n#1054 - Field 'representation.booking' unknown in on clause</p>\n<p><strong>The query i'd like it to send :</strong></p>\n<pre><code>SELECT `booking`.`id` AS `id`, `booking`.`name` AS `name`, `booking`.`email` AS `email`, `booking`.`number` AS `number`, `booking`.`phoneNumber` AS `phoneNumber`, `representation`.`id` AS `representation_id`, `representation`.`price` AS `representation_price`, `representation`.`place` AS `representation_place`, `representation`.`location` AS `representation_location`, `representation`.`datetime` AS `representation_datetime` FROM `booking` LEFT OUTER JOIN `representation` `representation` ON `representation`.`id` = `booking`.`fk_representation`;\n</code></pre>\n<p>Its result :\n<a href=\"https://i.stack.imgur.com/2EAxd.png\" rel=\"nofollow noreferrer\">Screenshot of answer of expected query</a></p>\n<p>Could you please help me understand what I'm doing wrong ?</p>\n"},{"tags":["java","spring","spring-boot","junit","nullpointerexception"],"comments":[{"owner":{"account_id":5122022,"reputation":2427,"user_id":4105260,"accept_rate":0,"display_name":"Lovababu Padala"},"score":0,"creation_date":1621692577,"post_id":67646565,"comment_id":119574847,"body_markdown":"@SpringBootTest(classes = Application.class) or @ContextConfiguration(classes = AppConfig.class), try this.","body":"@SpringBootTest(classes = Application.class) or @ContextConfiguration(classes = AppConfig.class), try this."}],"answers":[{"tags":[],"owner":{"account_id":14867049,"reputation":412,"user_id":10735779,"display_name":"Christian G. Faraone"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621663302,"creation_date":1621663302,"answer_id":67646566,"question_id":67646565,"body_markdown":"What I found out is that not always the @SpringBootTest is enough, in some classes/cases (to be honest I don&#39;t have a 100% clear idea so I&#39;m not gonna say stupidities) it is needed that you manually choose the test-runner, like below:\r\n```\r\n@SpringBootTest\r\n@RunWith(SpringRunner.class)\r\npublic class FooTest {\r\n...\r\n}\r\n```\r\n\r\nKeep in mind that if you decide to instantiate a dependency by yourself then Spring won&#39;t be able to inject all the needed classes, and then you&#39;d need to change the runner into something like ```@RunWith(MockitoJUnitRunner.class)``` \r\n\r\n(credits to https://stackoverflow.com/questions/58692353/junit-autowired-instance-is-always-null)","title":"@Autowired Injected dependency in Junit Test is always null","body":"<p>What I found out is that not always the @SpringBootTest is enough, in some classes/cases (to be honest I don't have a 100% clear idea so I'm not gonna say stupidities) it is needed that you manually choose the test-runner, like below:</p>\n<pre><code>@SpringBootTest\n@RunWith(SpringRunner.class)\npublic class FooTest {\n...\n}\n</code></pre>\n<p>Keep in mind that if you decide to instantiate a dependency by yourself then Spring won't be able to inject all the needed classes, and then you'd need to change the runner into something like <code>@RunWith(MockitoJUnitRunner.class)</code></p>\n<p>(credits to <a href=\"https://stackoverflow.com/questions/58692353/junit-autowired-instance-is-always-null\">JUNIT Autowired instance is always null</a>)</p>\n"},{"tags":[],"owner":{"account_id":7392763,"reputation":3367,"user_id":5625696,"accept_rate":50,"display_name":"Borislav Stoilov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666780822,"creation_date":1621676942,"answer_id":67648107,"question_id":67646565,"body_markdown":"A better approach is to use spring&#39;s underlying mock beans.\r\n\r\n    @SpringBootTest(classes= AddressInfoLocalizer.class)\r\n\r\nthis is actually the new recommended way.","title":"@Autowired Injected dependency in Junit Test is always null","body":"<p>A better approach is to use spring's underlying mock beans.</p>\n<pre><code>@SpringBootTest(classes= AddressInfoLocalizer.class)\n</code></pre>\n<p>this is actually the new recommended way.</p>\n"},{"tags":[],"owner":{"account_id":10055486,"reputation":722,"user_id":7467083,"display_name":"Ganesh Jadhav"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1621688503,"creation_date":1621688503,"answer_id":67649772,"question_id":67646565,"body_markdown":"Two things here:&lt;br&gt;\r\n 1. If you&#39;re testing, the ideal way is to mock instead of autowire(there can be exceptions)&lt;br&gt;\r\n 2. You should use `@ExtendWith(MockitoExtension.class)` or `@RunWith(MockitoJUnitRunner.class)` so that your components will be loaded in spring context. However `ExtendWith` is preferred way to initialize beans/components. Because the later(RunWith) loads the entire spring context which might take more time\r\n\r\nSo, your code should look something like:&lt;br&gt;\r\n\r\n```\r\n@Slf4j\r\n@ActiveProfiles(&quot;test&quot;)\r\n@ExtendWith(MockitoExtension.class)\r\npublic class LocalizerTest {\r\n\r\n    @Mock\r\n    AddressInfoLocalizer addressInfoLocalizer;\r\n\r\n\r\n    @Test\r\n    public void localizeIp() {\r\n        String ip = &quot;8.8.8.8&quot;;\r\n         //Mock here.\r\n        Optional&lt;CityResponse&gt; response = addressInfoLocalizer.localize(ip);\r\n        response.ifPresent(cityResponse -&gt; log.info(&quot;{}&quot;, cityResponse));\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n&lt;br&gt;\r\nReference/Read more:&lt;br&gt;\r\nhttps://www.baeldung.com/mockito-junit-5-extension &lt;br&gt;\r\nhttps://stackoverflow.com/questions/55276555/when-to-use-runwith-and-when-extendwith&lt;br&gt;\r\nhttps://www.javadoc.io/static/org.mockito/mockito-junit-jupiter/3.10.0/org/mockito/junit/jupiter/MockitoExtension.html&lt;br&gt;\r\n","title":"@Autowired Injected dependency in Junit Test is always null","body":"<p>Two things here:<br></p>\n<ol>\n<li>If you're testing, the ideal way is to mock instead of autowire(there can be exceptions)<br></li>\n<li>You should use <code>@ExtendWith(MockitoExtension.class)</code> or <code>@RunWith(MockitoJUnitRunner.class)</code> so that your components will be loaded in spring context. However <code>ExtendWith</code> is preferred way to initialize beans/components. Because the later(RunWith) loads the entire spring context which might take more time</li>\n</ol>\n<p>So, your code should look something like:<br></p>\n<pre><code>@Slf4j\n@ActiveProfiles(&quot;test&quot;)\n@ExtendWith(MockitoExtension.class)\npublic class LocalizerTest {\n\n    @Mock\n    AddressInfoLocalizer addressInfoLocalizer;\n\n\n    @Test\n    public void localizeIp() {\n        String ip = &quot;8.8.8.8&quot;;\n         //Mock here.\n        Optional&lt;CityResponse&gt; response = addressInfoLocalizer.localize(ip);\n        response.ifPresent(cityResponse -&gt; log.info(&quot;{}&quot;, cityResponse));\n    }\n\n}\n</code></pre>\n<br>\nReference/Read more:<br>\nhttps://www.baeldung.com/mockito-junit-5-extension <br>\nhttps://stackoverflow.com/questions/55276555/when-to-use-runwith-and-when-extendwith<br>\nhttps://www.javadoc.io/static/org.mockito/mockito-junit-jupiter/3.10.0/org/mockito/junit/jupiter/MockitoExtension.html<br>\n"}],"owner":{"account_id":14867049,"reputation":412,"user_id":10735779,"display_name":"Christian G. Faraone"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3641,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1689338459,"creation_date":1621663302,"question_id":67646565,"body_markdown":"In a simple test class like the one below: \r\n\r\n```\r\n@SpringBootTest\r\n@Slf4j\r\n@ActiveProfiles(&quot;test&quot;)\r\npublic class LocalizerTest {\r\n\r\n    @Autowired\r\n    AddressInfoLocalizer addressInfoLocalizer;\r\n\r\n\r\n    @Test\r\n    public void localizeIp() {\r\n        String ip = &quot;8.8.8.8&quot;;\r\n        Optional&lt;CityResponse&gt; response = addressInfoLocalizer.localize(ip);\r\n        response.ifPresent(cityResponse -&gt; log.info(&quot;{}&quot;, cityResponse));\r\n    }\r\n\r\n}\r\n```\r\nWith the AddressInfoLocalizer (sorry for the strange name but I had to make it up) being basically like this:\r\n```\r\n\r\n@Slf4j\r\n@Component\r\npublic class AddressInfoLocalizer {\r\n\r\n    @Value(&quot;${geolocalization.dbpath}&quot;)\r\n    private String databasePath;\r\n\r\n    private DatabaseReader database;\r\n\r\n    @PostConstruct\r\n    public void initialize() {\r\n        log.info(&quot;GeoIP2 database path:{}&quot;, databasePath);\r\n        File database = new File(databasePath);\r\n        try {\r\n            this.database = new DatabaseReader.Builder(database).build();\r\n        } catch (IOException ioe) {\r\n            this.database = null;\r\n            log.warn(&quot;Problems encountered while initializing IP localization database, skipping resolutions&quot;);\r\n        }\r\n\r\n    }\r\n\r\n    public Optional&lt;CityResponse&gt; localize(String ipAddressString) {\r\n        if (isNull(database)) {\r\n            log.warn(&quot;Attempted to resolve an IP location with database problems, skipping.&quot;);\r\n            return Optional.empty();\r\n        }\r\n        try {\r\n            InetAddress ipAddress = InetAddress.getByName(ipAddressString);\r\n            return ofNullable(database.city(ipAddress));\r\n        } catch (UnknownHostException uhe) {\r\n            log.error(&quot;Unknown host {}, {}&quot;, ipAddressString, uhe.getCause());\r\n            return Optional.empty();\r\n        } catch (IOException ioe) {\r\n            log.error(&quot;IO error while opening database, {}&quot;, ioe.getCause().toString());\r\n            return Optional.empty();\r\n        } catch (GeoIp2Exception gip2e) {\r\n            log.error(&quot;GeoIP error, {}&quot;, gip2e.getCause().toString());\r\n            return Optional.empty();\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nI keep getting a NullPointerException when calling (in the test) `addressInfoLocalizer.localize(ip);`, \r\n```\r\njava.lang.NullPointerException\r\n\tat com.bok.parent.LocalizerTest.localizeIp(LocalizerTest.java:26)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\r\n\tat org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\r\n\tat org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:413)\r\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:221)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\n```\r\n\r\nwhile debugging I can actually see that the `addressInfoLocalizer` object is `null`.\r\n\r\nI&#39;ve created other classes the same way, but only this one seems to have that problem, what could be wrong?\r\n","title":"@Autowired Injected dependency in Junit Test is always null","body":"<p>In a simple test class like the one below:</p>\n<pre><code>@SpringBootTest\n@Slf4j\n@ActiveProfiles(&quot;test&quot;)\npublic class LocalizerTest {\n\n    @Autowired\n    AddressInfoLocalizer addressInfoLocalizer;\n\n\n    @Test\n    public void localizeIp() {\n        String ip = &quot;8.8.8.8&quot;;\n        Optional&lt;CityResponse&gt; response = addressInfoLocalizer.localize(ip);\n        response.ifPresent(cityResponse -&gt; log.info(&quot;{}&quot;, cityResponse));\n    }\n\n}\n</code></pre>\n<p>With the AddressInfoLocalizer (sorry for the strange name but I had to make it up) being basically like this:</p>\n<pre><code>\n@Slf4j\n@Component\npublic class AddressInfoLocalizer {\n\n    @Value(&quot;${geolocalization.dbpath}&quot;)\n    private String databasePath;\n\n    private DatabaseReader database;\n\n    @PostConstruct\n    public void initialize() {\n        log.info(&quot;GeoIP2 database path:{}&quot;, databasePath);\n        File database = new File(databasePath);\n        try {\n            this.database = new DatabaseReader.Builder(database).build();\n        } catch (IOException ioe) {\n            this.database = null;\n            log.warn(&quot;Problems encountered while initializing IP localization database, skipping resolutions&quot;);\n        }\n\n    }\n\n    public Optional&lt;CityResponse&gt; localize(String ipAddressString) {\n        if (isNull(database)) {\n            log.warn(&quot;Attempted to resolve an IP location with database problems, skipping.&quot;);\n            return Optional.empty();\n        }\n        try {\n            InetAddress ipAddress = InetAddress.getByName(ipAddressString);\n            return ofNullable(database.city(ipAddress));\n        } catch (UnknownHostException uhe) {\n            log.error(&quot;Unknown host {}, {}&quot;, ipAddressString, uhe.getCause());\n            return Optional.empty();\n        } catch (IOException ioe) {\n            log.error(&quot;IO error while opening database, {}&quot;, ioe.getCause().toString());\n            return Optional.empty();\n        } catch (GeoIp2Exception gip2e) {\n            log.error(&quot;GeoIP error, {}&quot;, gip2e.getCause().toString());\n            return Optional.empty();\n        }\n    }\n}\n\n</code></pre>\n<p>I keep getting a NullPointerException when calling (in the test) <code>addressInfoLocalizer.localize(ip);</code>,</p>\n<pre><code>java.lang.NullPointerException\n    at com.bok.parent.LocalizerTest.localizeIp(LocalizerTest.java:26)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\n    at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\n    at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:413)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:221)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\n</code></pre>\n<p>while debugging I can actually see that the <code>addressInfoLocalizer</code> object is <code>null</code>.</p>\n<p>I've created other classes the same way, but only this one seems to have that problem, what could be wrong?</p>\n"},{"tags":["java","spring-boot","javabeans","jpastreamer"],"answers":[{"tags":[],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689338447,"creation_date":1689338447,"answer_id":76687781,"question_id":76683013,"body_markdown":"After defining `JPAStreamer` as a `bean` in `JPAStreamerConfig` shown below, the issue disappeared.\r\n\r\n\r\n    import com.speedment.jpastreamer.application.JPAStreamer;\r\n    import jakarta.persistence.EntityManagerFactory;\r\n    import lombok.RequiredArgsConstructor;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    @Configuration\r\n    @RequiredArgsConstructor\r\n    public class JPAStreamerConfig {\r\n    \r\n        private final EntityManagerFactory entityManagerFactory;\r\n    \r\n        @Bean\r\n        public JPAStreamer jpaStreamer() {\r\n            return JPAStreamer.of(entityManagerFactory);\r\n        }\r\n    \r\n    }","title":"Spring Boot Jpastreamer - com.speedment.jpastreamer.application.JPAStreamer can not be found","body":"<p>After defining <code>JPAStreamer</code> as a <code>bean</code> in <code>JPAStreamerConfig</code> shown below, the issue disappeared.</p>\n<pre><code>import com.speedment.jpastreamer.application.JPAStreamer;\nimport jakarta.persistence.EntityManagerFactory;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\n@RequiredArgsConstructor\npublic class JPAStreamerConfig {\n\n    private final EntityManagerFactory entityManagerFactory;\n\n    @Bean\n    public JPAStreamer jpaStreamer() {\n        return JPAStreamer.of(entityManagerFactory);\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76687781,"answer_count":1,"score":0,"last_activity_date":1689338447,"creation_date":1689279978,"question_id":76683013,"body_markdown":"I have a problem to run my Spring Boot with the usage of Jpastreamer.\r\nI cannot solve the bean issue related with Jpastreamer.\r\n\r\nHere is the PersonService shown below\r\n\r\n    @Service\r\n    @RequiredArgsConstructor\r\n    public class PersonService {\r\n    \r\n        private final JPAStreamer jpaStreamer;\r\n        private final PersonRepository personRepository;\r\n    \r\n        ... \r\n    }\r\n\r\n\r\nI got this issue shown below when I run the application.\r\n\r\n    ***************************\r\n    APPLICATION FAILED TO START\r\n    ***************************\r\n    \r\n    Description:\r\n    \r\n    Parameter 0 of constructor in com.springboot.jpastreamer.service.PersonService required a bean of type &#39;com.speedment.jpastreamer.application.JPAStreamer&#39; that could not be found.\r\n    \r\n    \r\n    Action:\r\n    \r\n    Consider defining a bean of type &#39;com.speedment.jpastreamer.application.JPAStreamer&#39; in your configuration.\r\n    \r\n    \r\n    Process finished with exit code 0\r\n\r\nHere is the repo shown below\r\n\r\n[Link][1]\r\n\r\n\r\n  [1]: https://github.com/Rapter1990/jpastreamer","title":"Spring Boot Jpastreamer - com.speedment.jpastreamer.application.JPAStreamer can not be found","body":"<p>I have a problem to run my Spring Boot with the usage of Jpastreamer.\nI cannot solve the bean issue related with Jpastreamer.</p>\n<p>Here is the PersonService shown below</p>\n<pre><code>@Service\n@RequiredArgsConstructor\npublic class PersonService {\n\n    private final JPAStreamer jpaStreamer;\n    private final PersonRepository personRepository;\n\n    ... \n}\n</code></pre>\n<p>I got this issue shown below when I run the application.</p>\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nParameter 0 of constructor in com.springboot.jpastreamer.service.PersonService required a bean of type 'com.speedment.jpastreamer.application.JPAStreamer' that could not be found.\n\n\nAction:\n\nConsider defining a bean of type 'com.speedment.jpastreamer.application.JPAStreamer' in your configuration.\n\n\nProcess finished with exit code 0\n</code></pre>\n<p>Here is the repo shown below</p>\n<p><a href=\"https://github.com/Rapter1990/jpastreamer\" rel=\"nofollow noreferrer\">Link</a></p>\n"},{"tags":["java","sql-server","spring-boot","maven","flyway"],"comments":[{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":1,"creation_date":1686907157,"post_id":76488497,"comment_id":134865866,"body_markdown":"Do you have the `flyway-sqlserver` dependency?","body":"Do you have the <code>flyway-sqlserver</code> dependency?"}],"answers":[{"tags":[],"owner":{"account_id":9139105,"reputation":3600,"user_id":6797663,"display_name":"codemonkey"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1686908520,"creation_date":1686908520,"answer_id":76488917,"question_id":76488497,"body_markdown":"The SQL Server code was extracted to a separate dependency in [Flyway 8.1.0][1]\r\n\r\nFrom that release onwards, you will need to [add flyway-sqlserver][2] as an additional dependency, e.g.:\r\n\r\n    # Maven\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\r\n        &lt;artifactId&gt;flyway-sqlserver&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    # Gradle\r\n    dependencies {\r\n        compile &quot;org.flywaydb:flyway-sqlserver&quot;\r\n    }\r\n\r\n  [1]: https://flywaydb.org/documentation/learnmore/releaseNotes#8.1.0\r\n  [2]: https://flywaydb.org/documentation/database/sqlserver#java-usage","title":"Migration from Spring Boot 2.6 to 2.7 - FlywayException: Unsupported Database: Microsoft SQL Server 15.0","body":"<p>The SQL Server code was extracted to a separate dependency in <a href=\"https://flywaydb.org/documentation/learnmore/releaseNotes#8.1.0\" rel=\"nofollow noreferrer\">Flyway 8.1.0</a></p>\n<p>From that release onwards, you will need to <a href=\"https://flywaydb.org/documentation/database/sqlserver#java-usage\" rel=\"nofollow noreferrer\">add flyway-sqlserver</a> as an additional dependency, e.g.:</p>\n<pre><code># Maven\n&lt;dependency&gt;\n    &lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\n    &lt;artifactId&gt;flyway-sqlserver&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n# Gradle\ndependencies {\n    compile &quot;org.flywaydb:flyway-sqlserver&quot;\n}\n</code></pre>\n"}],"owner":{"account_id":9137252,"reputation":2391,"user_id":6796524,"display_name":"Camille"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1447,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":76488917,"answer_count":1,"score":4,"last_activity_date":1689338299,"creation_date":1686905390,"question_id":76488497,"body_markdown":"During migration of a Java app using Spring Boot 2.6 to 2.7, new Flyway version (8.5.13) seems to not support anymore SQL Server 15 (2019).\r\n\r\n&gt; Error\r\n    org.flywaydb.core.api.FlywayException: Unsupported Database: Microsoft SQL Server 15.0\r\n\r\nI try with older version of SQL Server 14 (2017) and get almost same error\r\n\r\n&gt; Error\r\n    org.flywaydb.core.api.FlywayException: Unsupported Database: Microsoft SQL Server 14.0\r\n\r\nSomebody already resovled this problem?\r\n\r\n","title":"Migration from Spring Boot 2.6 to 2.7 - FlywayException: Unsupported Database: Microsoft SQL Server 15.0","body":"<p>During migration of a Java app using Spring Boot 2.6 to 2.7, new Flyway version (8.5.13) seems to not support anymore SQL Server 15 (2019).</p>\n<blockquote>\n<p>Error\norg.flywaydb.core.api.FlywayException: Unsupported Database: Microsoft SQL Server 15.0</p>\n</blockquote>\n<p>I try with older version of SQL Server 14 (2017) and get almost same error</p>\n<blockquote>\n<p>Error\norg.flywaydb.core.api.FlywayException: Unsupported Database: Microsoft SQL Server 14.0</p>\n</blockquote>\n<p>Somebody already resovled this problem?</p>\n"},{"tags":["java","eclipse","appium"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1689337561,"post_id":76687639,"comment_id":135202861,"body_markdown":"*java.lang.ClassNotFoundException: org.openqa.selenium.remote.internal.JsonToWebElementConverter* looks like you miss atleast one dependency in your runner","body":"<i>java.lang.ClassNotFoundException: org.openqa.selenium.remote.internal.JsonToWebElementConverte&zwnj;&#8203;r</i> looks like you miss atleast one dependency in your runner"}],"owner":{"account_id":29017253,"reputation":1,"user_id":22227430,"display_name":"Tester-007"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1689337646,"answer_count":0,"score":0,"last_activity_date":1689337534,"creation_date":1689337349,"question_id":76687639,"body_markdown":"    [RemoteTestNG] detected TestNG version 7.4.0\r\n    FAILED CONFIGURATION: @BeforeSuite setupAppium\r\n    java.lang.NoClassDefFoundError: org/openqa/selenium/remote/internal/JsonToWebElementConverter\r\n    \tat AppiumBasics1.setupAppium(AppiumBasics1.java:31)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    \tat org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:133)\r\n    \tat org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:62)\r\n    \tat org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:385)\r\n    \tat org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:321)\r\n    \tat org.testng.SuiteRunner.privateRun(SuiteRunner.java:317)\r\n    \tat org.testng.SuiteRunner.run(SuiteRunner.java:276)\r\n    \tat org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)\r\n    \tat org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)\r\n    \tat org.testng.TestNG.runSuitesSequentially(TestNG.java:1212)\r\n    \tat org.testng.TestNG.runSuitesLocally(TestNG.java:1134)\r\n    \tat org.testng.TestNG.runSuites(TestNG.java:1063)\r\n    \tat org.testng.TestNG.run(TestNG.java:1031)\r\n    \tat org.testng.remote.AbstractRemoteTestNG.run(AbstractRemoteTestNG.java:115)\r\n    \tat org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:251)\r\n    \tat org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:77)\r\n    Caused by: java.lang.ClassNotFoundException: org.openqa.selenium.remote.internal.JsonToWebElementConverter\r\n    \tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n    \tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\r\n    \t... 20 more\r\n    \r\n    SKIPPED: myFirstTest\r\n    java.lang.NoClassDefFoundError: org/openqa/selenium/remote/internal/JsonToWebElementConverter\r\n    \tat AppiumBasics1.setupAppium(AppiumBasics1.java:31)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    \tat org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:133)\r\n    \tat org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:62)\r\n    \tat org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:385)\r\n    \tat org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:321)\r\n    \tat org.testng.SuiteRunner.privateRun(SuiteRunner.java:317)\r\n    \tat org.testng.SuiteRunner.run(SuiteRunner.java:276)\r\n    \tat org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)\r\n    \tat org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)\r\n    \tat org.testng.TestNG.runSuitesSequentially(TestNG.java:1212)\r\n    \tat org.testng.TestNG.runSuitesLocally(TestNG.java:1134)\r\n    \tat org.testng.TestNG.runSuites(TestNG.java:1063)\r\n    \tat org.testng.TestNG.run(TestNG.java:1031)\r\n    \tat org.testng.remote.AbstractRemoteTestNG.run(AbstractRemoteTestNG.java:115)\r\n    \tat org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:251)\r\n    \tat org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:77)\r\n    Caused by: java.lang.ClassNotFoundException: org.openqa.selenium.remote.internal.JsonToWebElementConverter\r\n    \tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n    \tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\r\n    \t... 20 more\r\n    \r\n    \r\n    ===============================================\r\n        Default test\r\n        Tests run: 1, Failures: 0, Skips: 1\r\n        Configuration Failures: 1, Skips: 0\r\n    ===============================================\r\n    \r\n    \r\n    ===============================================\r\n    Default suite\r\n    Total tests run: 1, Passes: 0, Failures: 0, Skips: 1\r\n    Configuration Failures: 1, Skips: 1\r\n    ===============================================\r\n\r\nAny one can figure out the problem\r\n\r\n","title":"Getting Error while running Appium first test","body":"<pre><code>[RemoteTestNG] detected TestNG version 7.4.0\nFAILED CONFIGURATION: @BeforeSuite setupAppium\njava.lang.NoClassDefFoundError: org/openqa/selenium/remote/internal/JsonToWebElementConverter\n    at AppiumBasics1.setupAppium(AppiumBasics1.java:31)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:133)\n    at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:62)\n    at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:385)\n    at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:321)\n    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:317)\n    at org.testng.SuiteRunner.run(SuiteRunner.java:276)\n    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)\n    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)\n    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1212)\n    at org.testng.TestNG.runSuitesLocally(TestNG.java:1134)\n    at org.testng.TestNG.runSuites(TestNG.java:1063)\n    at org.testng.TestNG.run(TestNG.java:1031)\n    at org.testng.remote.AbstractRemoteTestNG.run(AbstractRemoteTestNG.java:115)\n    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:251)\n    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:77)\nCaused by: java.lang.ClassNotFoundException: org.openqa.selenium.remote.internal.JsonToWebElementConverter\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\n    ... 20 more\n\nSKIPPED: myFirstTest\njava.lang.NoClassDefFoundError: org/openqa/selenium/remote/internal/JsonToWebElementConverter\n    at AppiumBasics1.setupAppium(AppiumBasics1.java:31)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:133)\n    at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:62)\n    at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:385)\n    at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:321)\n    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:317)\n    at org.testng.SuiteRunner.run(SuiteRunner.java:276)\n    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)\n    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)\n    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1212)\n    at org.testng.TestNG.runSuitesLocally(TestNG.java:1134)\n    at org.testng.TestNG.runSuites(TestNG.java:1063)\n    at org.testng.TestNG.run(TestNG.java:1031)\n    at org.testng.remote.AbstractRemoteTestNG.run(AbstractRemoteTestNG.java:115)\n    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:251)\n    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:77)\nCaused by: java.lang.ClassNotFoundException: org.openqa.selenium.remote.internal.JsonToWebElementConverter\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\n    ... 20 more\n\n\n===============================================\n    Default test\n    Tests run: 1, Failures: 0, Skips: 1\n    Configuration Failures: 1, Skips: 0\n===============================================\n\n\n===============================================\nDefault suite\nTotal tests run: 1, Passes: 0, Failures: 0, Skips: 1\nConfiguration Failures: 1, Skips: 1\n===============================================\n</code></pre>\n<p>Any one can figure out the problem</p>\n"},{"tags":["java","ibatis","mybatis"],"comments":[{"owner":{"account_id":482321,"reputation":9702,"user_id":896663,"accept_rate":84,"display_name":"MozenRath"},"score":0,"creation_date":1328817169,"post_id":9217334,"comment_id":11605342,"body_markdown":"i think you are looking for a converter","body":"i think you are looking for a converter"},{"owner":{"account_id":481010,"reputation":2039,"user_id":894570,"accept_rate":36,"display_name":"Mohit Verma"},"score":1,"creation_date":1328849191,"post_id":9217334,"comment_id":11613325,"body_markdown":"not sure what is converter. Can you please briefly explain that","body":"not sure what is converter. Can you please briefly explain that"}],"answers":[{"tags":[],"owner":{"account_id":84585,"reputation":7493,"user_id":236345,"accept_rate":87,"display_name":"Alfabravo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1328876467,"creation_date":1328817268,"answer_id":9217756,"question_id":9217334,"body_markdown":"@MapKey(a) will return a map with your results keyed by a\r\n\r\nEDIT: Interesting result. Haven&#39;t tried using annotations (use mappers instead) but AFAIK it looks like it expects the map being `HashMap&lt;someA, someB&gt;` where someA has a getter and a setter for &quot;a&quot; (like getA, setA)... you can even use the same class (HashMap&lt;customThing, customThing), where your customClass serves as a kind of DTO with a and b attributes, having their getters and setters. Give it a try","title":"How to get Map&lt;String, String&gt; as return type using mybatis annotations","body":"<p>@MapKey(a) will return a map with your results keyed by a</p>\n\n<p>EDIT: Interesting result. Haven't tried using annotations (use mappers instead) but AFAIK it looks like it expects the map being <code>HashMap&lt;someA, someB&gt;</code> where someA has a getter and a setter for \"a\" (like getA, setA)... you can even use the same class (HashMap\n"},{"tags":[],"owner":{"account_id":384985,"reputation":2176,"user_id":741849,"accept_rate":50,"display_name":"Moinul Hossain"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1328850680,"creation_date":1328850680,"answer_id":9223013,"question_id":9217334,"body_markdown":"the annotation `@Select(&quot;select a, b from tableA&quot;)` will return a List of Map where Each map will contain a single entry. You might write a converter for it.\r\n\r\n    public Map&lt;Object,Object&gt; mapFromListOfMap (List&lt;Map&gt; listOfMap ) {\r\n      Map&lt;Object,Object&gt; map = new HashMap&lt;Object,Object&gt;();\r\n      for(int i = 0; i &lt; listOfMap.size(); i++) {\r\n        Object key = (Object) listOfMap.get(i).get(&quot;a&quot;);\r\n        Object value = (Object)listOfMap.get(i).get(&quot;b&quot;);\r\n        map.put(key, value);\r\n      }\r\n      return map;\r\n    }\r\n\r\n`@Select(&quot;select a, b from tableA&quot;)` will return something like this\r\n\r\n    List[0] -&gt; Map ((key=&gt;&#39;a&#39;,value=&gt;1),((key=&gt;&#39;b&#39;,value=&gt;&#39;a&#39;)))\r\n    List[1] -&gt; Map ((key=&gt;&#39;a&#39;,value=&gt;2),((key=&gt;&#39;b&#39;,value=&gt;&#39;b&#39;)))\r\n    List[2] -&gt; Map ((key=&gt;&#39;a&#39;,value=&gt;3),((key=&gt;&#39;b&#39;,value=&gt;&#39;c&#39;)))\r\n\r\nand the function `mapFromListOfMap` will make it something like this\r\n\r\n    Map ((key=&gt;&#39;1&#39;,value=&gt;&#39;a&#39;),(key=&gt;&#39;2&#39;,value=&gt;&#39;b&#39;),(key=&gt;&#39;3&#39;,value=&gt;&#39;c&#39;))\r\n\r\nhope this helps :)\r\n\r\n","title":"How to get Map&lt;String, String&gt; as return type using mybatis annotations","body":"<p>the annotation <code>@Select(\"select a, b from tableA\")</code> will return a List of Map where Each map will contain a single entry. You might write a converter for it.</p>\n\n<pre><code>public Map&lt;Object,Object&gt; mapFromListOfMap (List&lt;Map&gt; listOfMap ) {\n  Map&lt;Object,Object&gt; map = new HashMap&lt;Object,Object&gt;();\n  for(int i = 0; i &lt; listOfMap.size(); i++) {\n    Object key = (Object) listOfMap.get(i).get(\"a\");\n    Object value = (Object)listOfMap.get(i).get(\"b\");\n    map.put(key, value);\n  }\n  return map;\n}\n</code></pre>\n\n<p><code>@Select(\"select a, b from tableA\")</code> will return something like this</p>\n\n<pre><code>List[0] -&gt; Map ((key=&gt;'a',value=&gt;1),((key=&gt;'b',value=&gt;'a')))\nList[1] -&gt; Map ((key=&gt;'a',value=&gt;2),((key=&gt;'b',value=&gt;'b')))\nList[2] -&gt; Map ((key=&gt;'a',value=&gt;3),((key=&gt;'b',value=&gt;'c')))\n</code></pre>\n\n<p>and the function <code>mapFromListOfMap</code> will make it something like this</p>\n\n<pre><code>Map ((key=&gt;'1',value=&gt;'a'),(key=&gt;'2',value=&gt;'b'),(key=&gt;'3',value=&gt;'c'))\n</code></pre>\n\n<p>hope this helps :)</p>\n"},{"tags":[],"owner":{"account_id":176169,"reputation":441,"user_id":2282912,"display_name":"Dmitry Sergeev"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1366036353,"creation_date":1366036353,"answer_id":16017836,"question_id":9217334,"body_markdown":"Here is how i do this, without extra method for converting List to Map:\r\n\r\nHere is Message class\r\n\r\n    public class Message {\r\n       private String code;\r\n       private String message;\r\n       GETTERS/SETTERS\r\n    }\r\n\r\nMapper\r\n\r\n\t@Select(&quot;SELECT code, message FROM MESSAGES&quot;)\r\n\t@MapKey(&quot;code&quot;)\r\n\tpublic Map&lt;String, Message&gt; selectAllMessages();\r\n\r\nUnfortunatly it&#39;s impossible to create Map&amp;lt;String, String&amp;gt;","title":"How to get Map&lt;String, String&gt; as return type using mybatis annotations","body":"<p>Here is how i do this, without extra method for converting List to Map:</p>\n\n<p>Here is Message class</p>\n\n<pre><code>public class Message {\n   private String code;\n   private String message;\n   GETTERS/SETTERS\n}\n</code></pre>\n\n<p>Mapper</p>\n\n<pre><code>@Select(\"SELECT code, message FROM MESSAGES\")\n@MapKey(\"code\")\npublic Map&lt;String, Message&gt; selectAllMessages();\n</code></pre>\n\n<p>Unfortunatly it's impossible to create Map&lt;String, String&gt;</p>\n"},{"tags":[],"owner":{"account_id":22442515,"reputation":1,"user_id":16646823,"display_name":"Sreeja M"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689336611,"creation_date":1689335591,"answer_id":76687417,"question_id":9217334,"body_markdown":"     &lt;resultMap id=&quot;currencyExchangeMap&quot; type=&quot;com.sample.model.CurrencyExchange&quot;&gt;\r\n            &lt;result property=&quot;currency&quot; column=&quot;currency&quot; /&gt;\r\n            &lt;result property=&quot;exchangeRate&quot; column=&quot;usdtolocl&quot; /&gt;\r\n    &lt;/resultMap&gt;\r\n    where CurrencyExchange class has fields currency , exchangeRate\r\n    &lt;select id=&quot;getExchangeRates&quot; resultMap=&quot;currencyExchangeMap&quot;&gt;\r\n           SELECT\r\n                  to_curr as currency ,usdtolocl\r\n           FROM\r\n                  emsg_v2.store_exchange_rate\r\n           \r\n    &lt;/select&gt;\r\n    \r\n    \t@MapKey(&quot;currency&quot;)\r\n    \tpublic Map&lt;String,CurrencyExchange&gt; getExchangeRates();\r\n","title":"How to get Map&lt;String, String&gt; as return type using mybatis annotations","body":"<pre><code> &lt;resultMap id=&quot;currencyExchangeMap&quot; type=&quot;com.sample.model.CurrencyExchange&quot;&gt;\n        &lt;result property=&quot;currency&quot; column=&quot;currency&quot; /&gt;\n        &lt;result property=&quot;exchangeRate&quot; column=&quot;usdtolocl&quot; /&gt;\n&lt;/resultMap&gt;\nwhere CurrencyExchange class has fields currency , exchangeRate\n&lt;select id=&quot;getExchangeRates&quot; resultMap=&quot;currencyExchangeMap&quot;&gt;\n       SELECT\n              to_curr as currency ,usdtolocl\n       FROM\n              emsg_v2.store_exchange_rate\n       \n&lt;/select&gt;\n\n    @MapKey(&quot;currency&quot;)\n    public Map&lt;String,CurrencyExchange&gt; getExchangeRates();\n</code></pre>\n"}],"owner":{"account_id":481010,"reputation":2039,"user_id":894570,"accept_rate":36,"display_name":"Mohit Verma"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32873,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":4,"score":12,"last_activity_date":1689336611,"creation_date":1328815346,"question_id":9217334,"body_markdown":"Using annotations in mybatis, can we have return type as normal map ?\r\n\r\nBasically, I want something like this\r\n\r\n    @Select(&quot;select a, b from tableA&quot;)\r\n    public Map&lt;String, String&gt; getItems();\r\n\r\nWhere \r\n\r\n    mysql&gt; select * from tableA;\r\n    +------+------+\r\n    | a    | b    |\r\n    +------+------+\r\n    | 1    | a    |\r\n    | 2    | b    |\r\n    | 3    | c    |\r\n    +------+------+\r\n\r\n    mysql&gt; desc tableA;\r\n    +-------+-------------+------+-----+---------+-------+\r\n    | Field | Type        | Null | Key | Default | Extra |\r\n    +-------+-------------+------+-----+---------+-------+\r\n    | a     | varchar(10) | YES  |     | NULL    |       |\r\n    | b     | varchar(10) | YES  |     | NULL    |       |\r\n    +-------+-------------+------+-----+---------+-------+\r\n\r\n\r\n\r\nTried this\r\n\r\n    @Select(&quot;select a, b from tableA&quot;)\r\n    @MapKey(&quot;a)\r\n    public Map&lt;String, String&gt; getItems();\r\n\r\nbut it&#39;s giving below exception\r\n\r\n    ### Cause: org.apache.ibatis.reflection.ReflectionException: There is no getter for property named &#39;a&#39; in &#39;class java.lang.String&#39;\r\n\r\n","title":"How to get Map&lt;String, String&gt; as return type using mybatis annotations","body":"<p>Using annotations in mybatis, can we have return type as normal map ?</p>\n\n<p>Basically, I want something like this</p>\n\n<pre><code>@Select(\"select a, b from tableA\")\npublic Map&lt;String, String&gt; getItems();\n</code></pre>\n\n<p>Where </p>\n\n<pre><code>mysql&gt; select * from tableA;\n+------+------+\n| a    | b    |\n+------+------+\n| 1    | a    |\n| 2    | b    |\n| 3    | c    |\n+------+------+\n\nmysql&gt; desc tableA;\n+-------+-------------+------+-----+---------+-------+\n| Field | Type        | Null | Key | Default | Extra |\n+-------+-------------+------+-----+---------+-------+\n| a     | varchar(10) | YES  |     | NULL    |       |\n| b     | varchar(10) | YES  |     | NULL    |       |\n+-------+-------------+------+-----+---------+-------+\n</code></pre>\n\n<p>Tried this</p>\n\n<pre><code>@Select(\"select a, b from tableA\")\n@MapKey(\"a)\npublic Map&lt;String, String&gt; getItems();\n</code></pre>\n\n<p>but it's giving below exception</p>\n\n<pre><code>### Cause: org.apache.ibatis.reflection.ReflectionException: There is no getter for property named 'a' in 'class java.lang.String'\n</code></pre>\n"},{"tags":["java","android","sockets"],"comments":[{"owner":{"account_id":5076619,"reputation":107,"user_id":4073819,"display_name":"amnon"},"score":0,"creation_date":1592451506,"post_id":62436546,"comment_id":110431862,"body_markdown":"now I see that on forum     https://stackoverflow.com/questions/60203194/how-to-solve-java-net-socketexception-socket-failed-eperm-operation-not-permi?rq=1[link]\nsomeone offered that the wifi I am connected with in emulator is not allowing me to connect to the api I am calling, but no solution was offered","body":"now I see that on forum     <a href=\"https://stackoverflow.com/questions/60203194/how-to-solve-java-net-socketexception-socket-failed-eperm-operation-not-permi?rq=1[link]\" title=\"how to solve java net socketexception socket failed eperm operation not permi\">stackoverflow.com/questions/60203194/&hellip;</a> someone offered that the wifi I am connected with in emulator is not allowing me to connect to the api I am calling, but no solution was offered"},{"owner":{"account_id":5076619,"reputation":107,"user_id":4073819,"display_name":"amnon"},"score":0,"creation_date":1592455004,"post_id":62436546,"comment_id":110432627,"body_markdown":"@DipankarBaghel","body":"@DipankarBaghel"}],"answers":[{"tags":[],"owner":{"account_id":20097174,"reputation":21,"user_id":14736460,"display_name":"Dikascode"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1610549709,"creation_date":1610549709,"answer_id":65704383,"question_id":62436546,"body_markdown":"So looking through your manifest shows your internet permission is spelt wrongly.\r\n\r\nIt is: `&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;`\r\n\r\nnot: `&lt;uses-permission android:name=&quot;android.promission.INTERNET&quot;/&gt;`\r\n\r\nThis might not solve your problem, but it&#39;s one step forward to figuring out what&#39;s wrong.","title":"java.net.SocketException: socket failed: EPERM Operation not permitted although AndroidManifest have permits in it","body":"<p>So looking through your manifest shows your internet permission is spelt wrongly.</p>\n<p>It is: <code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;</code></p>\n<p>not: <code>&lt;uses-permission android:name=&quot;android.promission.INTERNET&quot;/&gt;</code></p>\n<p>This might not solve your problem, but it's one step forward to figuring out what's wrong.</p>\n"}],"owner":{"account_id":5076619,"reputation":107,"user_id":4073819,"display_name":"amnon"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3130,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1689336600,"creation_date":1592420781,"question_id":62436546,"body_markdown":"This bug is getting me crezy.\r\nI looked in forums but none answered to this particular question.\r\nhere is my sample code on AndroidManifest.xml:\r\n\r\n\r\n```&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    .\r\n    &lt;uses-permission android:name=&quot;android.promission.INTERNET&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;\r\n    .\r\n    &lt;application\r\n        .\r\n        android:usesCleartextTraffic=&quot;true&quot;\r\n        . \r\n```\r\n\r\nand although I put all permits as needed and uninstalled + installed the application, it still gives me an exception\r\n```\r\nW/System.err: java.net.SocketException: socket failed: EPERM (Operation not permitted)\r\nW/System.err:     at java.net.Socket.createImpl(Socket.java:492)\r\n        at java.net.Socket.&lt;init&gt;(Socket.java:446)\r\n        at java.net.Socket.&lt;init&gt;(Socket.java:218)\r\n        at com.diamcom.blue.connect.send(connect.java:23)\r\n        at com.diamcom.blue.sendToServer.sendChanges(sendToServer.java:43)\r\n        at com.diamcom.blue.sendToServer.run(sendToServer.java:25)\r\n```\r\n\r\nAny idea ?","title":"java.net.SocketException: socket failed: EPERM Operation not permitted although AndroidManifest have permits in it","body":"<p>This bug is getting me crezy.\nI looked in forums but none answered to this particular question.\nhere is my sample code on AndroidManifest.xml:</p>\n\n<pre><code>&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    .\n    &lt;uses-permission android:name=\"android.promission.INTERNET\"/&gt;\n    &lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\"/&gt;\n    .\n    &lt;application\n        .\n        android:usesCleartextTraffic=\"true\"\n        . \n</code></pre>\n\n<p>and although I put all permits as needed and uninstalled + installed the application, it still gives me an exception</p>\n\n<pre><code>W/System.err: java.net.SocketException: socket failed: EPERM (Operation not permitted)\nW/System.err:     at java.net.Socket.createImpl(Socket.java:492)\n        at java.net.Socket.&lt;init&gt;(Socket.java:446)\n        at java.net.Socket.&lt;init&gt;(Socket.java:218)\n        at com.diamcom.blue.connect.send(connect.java:23)\n        at com.diamcom.blue.sendToServer.sendChanges(sendToServer.java:43)\n        at com.diamcom.blue.sendToServer.run(sendToServer.java:25)\n</code></pre>\n\n<p>Any idea ?</p>\n"},{"tags":["java","android","mysql","android-studio-3.0"],"comments":[{"owner":{"account_id":8465462,"reputation":7040,"user_id":6349751,"accept_rate":90,"display_name":"AymDev"},"score":0,"creation_date":1641572414,"post_id":70624195,"comment_id":124846805,"body_markdown":"How is this related to PHP ?","body":"How is this related to PHP ?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1641572632,"post_id":70624195,"comment_id":124846910,"body_markdown":"You posted logcat lines without the SocketException.","body":"You posted logcat lines without the SocketException."},{"owner":{"account_id":18764995,"reputation":11,"user_id":13683086,"display_name":"Maxwell Ross"},"score":0,"creation_date":1641573843,"post_id":70624195,"comment_id":124847508,"body_markdown":"Well an external php file was used to forward the data fields so im not sure if the problem exists there, if im told this code is good i would think that the php is the issue. The php file is based on &quot;https://github.com/VishnuSivadasVS/Advanced-HttpURLConnection&quot; @AymDev","body":"Well an external php file was used to forward the data fields so im not sure if the problem exists there, if im told this code is good i would think that the php is the issue. The php file is based on &quot;<a href=\"https://github.com/VishnuSivadasVS/Advanced-HttpURLConnection\" rel=\"nofollow noreferrer\">github.com/VishnuSivadasVS/Advanced-HttpURLConnection</a>&quot; @AymDev"},{"owner":{"account_id":18764995,"reputation":11,"user_id":13683086,"display_name":"Maxwell Ross"},"score":0,"creation_date":1641573880,"post_id":70624195,"comment_id":124847524,"body_markdown":"I am not sure where to find the socketException@blackapps","body":"I am not sure where to find the socketException@blackapps"},{"owner":{"account_id":8465462,"reputation":7040,"user_id":6349751,"accept_rate":90,"display_name":"AymDev"},"score":0,"creation_date":1641574103,"post_id":70624195,"comment_id":124847625,"body_markdown":"@MaxwellRoss still no PHP in your question nor in the link you commented.","body":"@MaxwellRoss still no PHP in your question nor in the link you commented."},{"owner":{"account_id":18764995,"reputation":11,"user_id":13683086,"display_name":"Maxwell Ross"},"score":0,"creation_date":1641574515,"post_id":70624195,"comment_id":124847800,"body_markdown":"Apologies @AymDev this is the correct link &quot;https://github.com/VishnuSivadasVS/LogIn-SignUp&quot; and my post is updated","body":"Apologies @AymDev this is the correct link &quot;<a href=\"https://github.com/VishnuSivadasVS/LogIn-SignUp\" rel=\"nofollow noreferrer\">github.com/VishnuSivadasVS/LogIn-SignUp</a>&quot; and my post is updated"}],"answers":[{"tags":[],"owner":{"account_id":18764995,"reputation":11,"user_id":13683086,"display_name":"Maxwell Ross"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641591607,"creation_date":1641591607,"answer_id":70627472,"question_id":70624195,"body_markdown":"Looking at my own code, I spelt android wrong in the Manifest.xml file \r\n```\r\n  &lt;uses-permission android:name=&quot;andriod.permission.INTERNET&quot; /&gt;\r\n  &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;\r\n```\r\ncorrection \r\n```\r\n  &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n  &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;\r\n```","title":"Un-resolved java.net.SocketException: socket failed: EPERM (Operation not permitted)","body":"<p>Looking at my own code, I spelt android wrong in the Manifest.xml file</p>\n<pre><code>  &lt;uses-permission android:name=&quot;andriod.permission.INTERNET&quot; /&gt;\n  &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;\n</code></pre>\n<p>correction</p>\n<pre><code>  &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n  &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19518003,"reputation":49,"user_id":14280462,"display_name":"faribakhandani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677758683,"creation_date":1677758683,"answer_id":75615180,"question_id":70624195,"body_markdown":"Doing &quot;wipe data&quot; in the emulator can solve the problem.","title":"Un-resolved java.net.SocketException: socket failed: EPERM (Operation not permitted)","body":"<p>Doing &quot;wipe data&quot; in the emulator can solve the problem.</p>\n"}],"owner":{"account_id":18764995,"reputation":11,"user_id":13683086,"display_name":"Maxwell Ross"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2355,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":2,"score":-1,"last_activity_date":1689336580,"creation_date":1641572240,"question_id":70624195,"body_markdown":"I am following a tutorial on connecting my android app to mySQL server. I am currently encountering an error that other post on StackOverflow cant solve, at least not for me. \r\n\r\nThe error is &quot;java.net.SocketException: socket failed: EPERM (Operation not permitted)&quot; which shows up both on the emulator and my physical device. Other relating topics on stackoverflow has suggested that I add the lines \r\n```\r\n&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n```\r\nto my AndroidManifest.xml then un-installing the application, to which I have but the error still persist.\r\n\r\n\r\nAndroidManifest.xml\r\n```\r\n    &lt;uses-permission android:name=&quot;andriod.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:usesCleartextTraffic=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.Login2&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.SignUpActivity&quot;\r\n            android:exported=&quot;false&quot;\r\n            android:theme=&quot;@style/Theme.Design.Light.NoActionBar&quot;/&gt;\r\n        &lt;activity\r\n            android:name=&quot;.ui.login.LoginActivity&quot;\r\n            android:exported=&quot;false&quot;\r\n            android:theme=&quot;@style/Theme.Design.Light.NoActionBar&quot; /&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n```\r\n\r\nSignUpActivity class\r\n``` \r\npackage com.example.login2;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.os.Looper;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport java.io.BufferedReader;\r\nimport java.io.BufferedWriter;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.io.InputStreamReader;\r\nimport java.io.OutputStream;\r\nimport java.io.OutputStreamWriter;\r\nimport java.net.HttpURLConnection;\r\nimport java.net.URL;\r\nimport java.net.URLEncoder;\r\n\r\npublic class SignUpActivity extends AppCompatActivity {\r\n\r\n    // EditText inputFullName, inputUserName, inputEmail, inputPassword;\r\n    //Button buttonSignIn, buttonLogIn;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_sign_up);\r\n\r\n        //Button signUpButton = findViewById(R.id.btn1Signup);\r\n\r\n        EditText inputFullName = findViewById(R.id.fullname);\r\n        EditText inputEmail = findViewById(R.id.email);\r\n        EditText inputPassword = findViewById(R.id.password2);\r\n        EditText inputUserName = findViewById(R.id.username2);\r\n\r\n        Button buttonLogIn = findViewById(R.id.button5);\r\n        Button buttonSignIn = (Button) findViewById(R.id.button8);\r\n\r\n        buttonSignIn.setOnClickListener(view -&gt; {\r\n\r\n//            Intent intent = new Intent(this, MainActivity.class); //command go to another page\r\n//            startActivity(intent);//start activity\r\n\r\n            String fullname, username, email, password;\r\n\r\n            fullname = String.valueOf(inputFullName.getText());\r\n            username = String.valueOf(inputUserName.getText());\r\n            email = String.valueOf(inputEmail.getText());\r\n            password = String.valueOf(inputPassword.getText());\r\n\r\n            if(!fullname.equals(&quot;&quot;) &amp;&amp; !username.equals(&quot;&quot;) &amp;&amp; !email.equals(&quot;&quot;) &amp;&amp; !password.equals(&quot;&quot;)) {\r\n                //Start ProgressBar first (Set visibility VISIBLE)\r\n                Handler handler = new Handler(Looper.getMainLooper());\r\n                handler.post(() -&gt; {\r\n\r\n                    //Starting Write and Read data with URL\r\n                    //Creating array for parameters\r\n                    String[] field = new String[4];\r\n                    field[0] = &quot;fullname&quot;;\r\n                    field[1] = &quot;username&quot;;\r\n                    field[2] = &quot;email&quot;;\r\n                    field[3] = &quot;password&quot;;\r\n                    //Creating array for data\r\n                    String[] data = new String[4];\r\n                    field[0] = fullname;\r\n                    field[1] = username;\r\n                    field[2] = email;\r\n                    field[3] = password;\r\n                    PutData putData = new PutData(&quot;https://192.168.100.2/LoginRegister/signup.php&quot;, &quot;POST&quot;, field, data);\r\n                    if (putData.startPut()) {\r\n                        if (putData.onComplete()) {\r\n                            String result = putData.getResult();\r\n                            if(result.equals(&quot;Sign Up Success&quot;)){\r\n                                Toast.makeText(getApplicationContext(), result, Toast.LENGTH_SHORT).show();\r\n                                Intent intent = new Intent(this, MainActivity.class);\r\n                                startActivity(intent);\r\n                                finish();\r\n                            }else{\r\n                                Toast.makeText(getApplicationContext(), result, Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        }\r\n                    }\r\n                    //End Write and Read data with URL\r\n                });\r\n            }\r\n            else {\r\n                Toast.makeText(this, &quot;All fields required&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    public class PutData extends Thread {\r\n        private String url, method;\r\n        String result_data = &quot;Empty&quot;;\r\n        String[] data, field;\r\n\r\n        public PutData(String url, String method, String[] field, String[] data) {\r\n            this.url = url;\r\n            this.method = method;\r\n            this.data = new String[data.length];\r\n            this.field = new String[field.length];\r\n            System.arraycopy(field, 0, this.field, 0, field.length);\r\n            System.arraycopy(data, 0, this.data, 0, data.length);\r\n        }\r\n\r\n        @Override\r\n        public void run() {\r\n            try {\r\n                String UTF8 = &quot;UTF-8&quot;, iso = &quot;iso-8859-1&quot;;\r\n                URL url = new URL(this.url);\r\n                HttpURLConnection httpURLConnection = (HttpURLConnection) url.openConnection();\r\n                httpURLConnection.setRequestMethod(this.method);\r\n                httpURLConnection.setDoOutput(true);\r\n                httpURLConnection.setDoInput(true);\r\n                OutputStream outputStream = httpURLConnection.getOutputStream();\r\n                BufferedWriter bufferedWriter = new BufferedWriter(new OutputStreamWriter(outputStream, UTF8));\r\n                StringBuilder post_data = new StringBuilder();\r\n                for (int i = 0; i &lt; this.field.length; i++) {\r\n                    post_data.append(URLEncoder.encode(this.field[i], &quot;UTF-8&quot;)).append(&quot;=&quot;).append(URLEncoder.encode(this.data[i], UTF8)).append(&quot;&amp;&quot;);\r\n                }\r\n                bufferedWriter.write(post_data.toString());\r\n                bufferedWriter.flush();\r\n                bufferedWriter.close();\r\n                outputStream.close();\r\n                InputStream inputStream = httpURLConnection.getInputStream();\r\n                BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream, iso));\r\n                StringBuilder result = new StringBuilder();\r\n                String result_line;\r\n                while ((result_line = bufferedReader.readLine()) != null) {\r\n                    result.append(result_line);\r\n                }\r\n                bufferedReader.close();\r\n                inputStream.close();\r\n                httpURLConnection.disconnect();\r\n                setData(result.toString());\r\n            } catch (IOException e) {\r\n                setData(e.toString());\r\n            }\r\n        }\r\n\r\n        public boolean startPut() {\r\n            PutData.this.start();\r\n            return true;\r\n        }\r\n\r\n        public boolean onComplete() {\r\n            while (true) {\r\n                if (!this.isAlive()) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        public String getResult() {\r\n            return this.getData();\r\n        }\r\n\r\n        public void setData(String result_data) {\r\n            this.result_data = result_data;\r\n        }\r\n\r\n\r\n        public String getData() {\r\n            return result_data;\r\n        }\r\n    }\r\n\r\n}\r\n```\r\nLogcat\r\n```\r\n2022-01-07 11:30:24.055 11687-11687/? I/.example.login: Late-enabling -Xcheck:jni\r\n2022-01-07 11:30:24.068 11687-11687/? I/.example.login: Unquickening 12 vdex files!\r\n2022-01-07 11:30:24.069 11687-11687/? W/.example.login: Unexpected CPU variant for X86 using defaults: x86\r\n2022-01-07 11:30:24.236 11687-11687/com.example.login2 D/NetworkSecurityConfig: No Network Security Config specified, using platform default\r\n2022-01-07 11:30:24.237 11687-11687/com.example.login2 D/NetworkSecurityConfig: No Network Security Config specified, using platform default\r\n2022-01-07 11:30:24.261 11687-11711/com.example.login2 D/libEGL: loaded /vendor/lib/egl/libEGL_emulation.so\r\n2022-01-07 11:30:24.263 11687-11711/com.example.login2 D/libEGL: loaded /vendor/lib/egl/libGLESv1_CM_emulation.so\r\n2022-01-07 11:30:24.267 11687-11711/com.example.login2 D/libEGL: loaded /vendor/lib/egl/libGLESv2_emulation.so\r\n2022-01-07 11:30:24.389 11687-11687/com.example.login2 W/.example.login: Accessing hidden method Landroid/view/View;-&gt;computeFitSystemWindows(Landroid/graphics/Rect;Landroid/graphics/Rect;)Z (greylist, reflection, allowed)\r\n2022-01-07 11:30:24.389 11687-11687/com.example.login2 W/.example.login: Accessing hidden method Landroid/view/ViewGroup;-&gt;makeOptionalFitsSystemWindows()V (greylist, reflection, allowed)\r\n2022-01-07 11:30:24.500 11687-11709/com.example.login2 D/HostConnection: HostConnection::get() New Host Connection established 0xf75ec230, tid 11709\r\n2022-01-07 11:30:24.507 11687-11709/com.example.login2 D/HostConnection: HostComposition ext ANDROID_EMU_CHECKSUM_HELPER_v1 ANDROID_EMU_native_sync_v2 ANDROID_EMU_native_sync_v3 ANDROID_EMU_native_sync_v4 ANDROID_EMU_dma_v1 ANDROID_EMU_direct_mem ANDROID_EMU_host_composition_v1 ANDROID_EMU_host_composition_v2 ANDROID_EMU_vulkan ANDROID_EMU_deferred_vulkan_commands ANDROID_EMU_vulkan_null_optional_strings ANDROID_EMU_vulkan_create_resources_with_requirements ANDROID_EMU_YUV_Cache ANDROID_EMU_vulkan_ignored_handles ANDROID_EMU_has_shared_slots_host_memory_allocator ANDROID_EMU_vulkan_free_memory_sync ANDROID_EMU_vulkan_shader_float16_int8 ANDROID_EMU_vulkan_async_queue_submit ANDROID_EMU_sync_buffer_data ANDROID_EMU_read_color_buffer_dma GL_OES_vertex_array_object GL_KHR_texture_compression_astc_ldr ANDROID_EMU_host_side_tracing ANDROID_EMU_gles_max_version_2 \r\n2022-01-07 11:30:24.508 11687-11709/com.example.login2 W/OpenGLRenderer: Failed to choose config with EGL_SWAP_BEHAVIOR_PRESERVED, retrying without...\r\n2022-01-07 11:30:24.537 11687-11709/com.example.login2 D/EGL_emulation: eglCreateContext: 0xf75ec1c0: maj 2 min 0 rcv 2\r\n2022-01-07 11:30:24.565 11687-11709/com.example.login2 D/EGL_emulation: eglMakeCurrent: 0xf75ec1c0: ver 2 0 (tinfo 0xf7931630) (first time)\r\n2022-01-07 11:30:24.571 11687-11709/com.example.login2 I/Gralloc4: mapper 4.x is not supported\r\n2022-01-07 11:30:24.572 11687-11709/com.example.login2 D/HostConnection: createUnique: call\r\n2022-01-07 11:30:24.572 11687-11709/com.example.login2 D/HostConnection: HostConnection::get() New Host Connection established 0xf75eb580, tid 11709\r\n2022-01-07 11:30:24.572 11687-11709/com.example.login2 D/goldfish-address-space: allocate: Ask for block of size 0x100\r\n2022-01-07 11:30:24.572 11687-11709/com.example.login2 D/goldfish-address-space: allocate: ioctl allocate returned offset 0x3dfffe000 size 0x2000\r\n2022-01-07 11:30:24.595 11687-11709/com.example.login2 D/HostConnection: HostComposition ext ANDROID_EMU_CHECKSUM_HELPER_v1 ANDROID_EMU_native_sync_v2 ANDROID_EMU_native_sync_v3 ANDROID_EMU_native_sync_v4 ANDROID_EMU_dma_v1 ANDROID_EMU_direct_mem ANDROID_EMU_host_composition_v1 ANDROID_EMU_host_composition_v2 ANDROID_EMU_vulkan ANDROID_EMU_deferred_vulkan_commands ANDROID_EMU_vulkan_null_optional_strings ANDROID_EMU_vulkan_create_resources_with_requirements ANDROID_EMU_YUV_Cache ANDROID_EMU_vulkan_ignored_handles ANDROID_EMU_has_shared_slots_host_memory_allocator ANDROID_EMU_vulkan_free_memory_sync ANDROID_EMU_vulkan_shader_float16_int8 ANDROID_EMU_vulkan_async_queue_submit ANDROID_EMU_sync_buffer_data ANDROID_EMU_read_color_buffer_dma GL_OES_vertex_array_object GL_KHR_texture_compression_astc_ldr ANDROID_EMU_host_side_tracing ANDROID_EMU_gles_max_version_2 \r\n2022-01-07 11:30:26.557 11687-11687/com.example.login2 I/AssistStructure: Flattened final assist data: 2276 bytes, containing 1 windows, 11 views\r\n2022-01-07 11:30:33.555 11687-11687/com.example.login2 D/CompatibilityChangeReporter: Compat change id reported: 147798919; UID 10128; state: ENABLED\r\n```\r\n\r\nI would appreciate any assistance in solving this matter.\r\n\r\n\r\nAs requested, the php signup used to connect the android app to the mySQL server \r\n```\r\n&lt;?php\r\nrequire &quot;DataBase.php&quot;;\r\n$db = new DataBase();\r\nif (isset($_POST[&#39;fullname&#39;]) &amp;&amp; isset($_POST[&#39;email&#39;]) &amp;&amp; isset($_POST[&#39;username&#39;]) &amp;&amp; isset($_POST[&#39;password&#39;])) {\r\n    if ($db-&gt;dbConnect()) {\r\n        if ($db-&gt;signUp(&quot;users&quot;, $_POST[&#39;fullname&#39;], $_POST[&#39;email&#39;], $_POST[&#39;username&#39;], $_POST[&#39;password&#39;])) {\r\n            echo &quot;Sign Up Success&quot;;\r\n        } else echo &quot;Sign up Failed&quot;;\r\n    } else echo &quot;Error: Database connection&quot;;\r\n} else echo &quot;All fields are required&quot;;\r\n?&gt;\r\n\r\n```\r\n\r\ndatabase config file\r\n```\r\n&lt;?php\r\n\r\nclass DataBaseConfig\r\n{\r\n    public $servername;\r\n    public $username;\r\n    public $password;\r\n    public $databasename;\r\n\r\n    public function __construct()\r\n    {\r\n\r\n        $this-&gt;servername = &#39;%&#39;;\r\n        $this-&gt;username = &#39;test1&#39;;\r\n        $this-&gt;password = &#39;n8wOs3tx@3d!TGJl&#39;;\r\n        $this-&gt;databasename = &#39;test&#39;;\r\n\r\n    }\r\n}\r\n\r\n?&gt;\r\n\r\n```","title":"Un-resolved java.net.SocketException: socket failed: EPERM (Operation not permitted)","body":"<p>I am following a tutorial on connecting my android app to mySQL server. I am currently encountering an error that other post on StackOverflow cant solve, at least not for me.</p>\n<p>The error is &quot;java.net.SocketException: socket failed: EPERM (Operation not permitted)&quot; which shows up both on the emulator and my physical device. Other relating topics on stackoverflow has suggested that I add the lines</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n</code></pre>\n<p>to my AndroidManifest.xml then un-installing the application, to which I have but the error still persist.</p>\n<p>AndroidManifest.xml</p>\n<pre><code>    &lt;uses-permission android:name=&quot;andriod.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:usesCleartextTraffic=&quot;true&quot;\n        android:theme=&quot;@style/Theme.Login2&quot;&gt;\n        &lt;activity\n            android:name=&quot;.SignUpActivity&quot;\n            android:exported=&quot;false&quot;\n            android:theme=&quot;@style/Theme.Design.Light.NoActionBar&quot;/&gt;\n        &lt;activity\n            android:name=&quot;.ui.login.LoginActivity&quot;\n            android:exported=&quot;false&quot;\n            android:theme=&quot;@style/Theme.Design.Light.NoActionBar&quot; /&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n</code></pre>\n<p>SignUpActivity class</p>\n<pre><code>package com.example.login2;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.os.Handler;\nimport android.os.Looper;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.Toast;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport java.io.BufferedReader;\nimport java.io.BufferedWriter;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.io.OutputStream;\nimport java.io.OutputStreamWriter;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\nimport java.net.URLEncoder;\n\npublic class SignUpActivity extends AppCompatActivity {\n\n    // EditText inputFullName, inputUserName, inputEmail, inputPassword;\n    //Button buttonSignIn, buttonLogIn;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_sign_up);\n\n        //Button signUpButton = findViewById(R.id.btn1Signup);\n\n        EditText inputFullName = findViewById(R.id.fullname);\n        EditText inputEmail = findViewById(R.id.email);\n        EditText inputPassword = findViewById(R.id.password2);\n        EditText inputUserName = findViewById(R.id.username2);\n\n        Button buttonLogIn = findViewById(R.id.button5);\n        Button buttonSignIn = (Button) findViewById(R.id.button8);\n\n        buttonSignIn.setOnClickListener(view -&gt; {\n\n//            Intent intent = new Intent(this, MainActivity.class); //command go to another page\n//            startActivity(intent);//start activity\n\n            String fullname, username, email, password;\n\n            fullname = String.valueOf(inputFullName.getText());\n            username = String.valueOf(inputUserName.getText());\n            email = String.valueOf(inputEmail.getText());\n            password = String.valueOf(inputPassword.getText());\n\n            if(!fullname.equals(&quot;&quot;) &amp;&amp; !username.equals(&quot;&quot;) &amp;&amp; !email.equals(&quot;&quot;) &amp;&amp; !password.equals(&quot;&quot;)) {\n                //Start ProgressBar first (Set visibility VISIBLE)\n                Handler handler = new Handler(Looper.getMainLooper());\n                handler.post(() -&gt; {\n\n                    //Starting Write and Read data with URL\n                    //Creating array for parameters\n                    String[] field = new String[4];\n                    field[0] = &quot;fullname&quot;;\n                    field[1] = &quot;username&quot;;\n                    field[2] = &quot;email&quot;;\n                    field[3] = &quot;password&quot;;\n                    //Creating array for data\n                    String[] data = new String[4];\n                    field[0] = fullname;\n                    field[1] = username;\n                    field[2] = email;\n                    field[3] = password;\n                    PutData putData = new PutData(&quot;https://192.168.100.2/LoginRegister/signup.php&quot;, &quot;POST&quot;, field, data);\n                    if (putData.startPut()) {\n                        if (putData.onComplete()) {\n                            String result = putData.getResult();\n                            if(result.equals(&quot;Sign Up Success&quot;)){\n                                Toast.makeText(getApplicationContext(), result, Toast.LENGTH_SHORT).show();\n                                Intent intent = new Intent(this, MainActivity.class);\n                                startActivity(intent);\n                                finish();\n                            }else{\n                                Toast.makeText(getApplicationContext(), result, Toast.LENGTH_SHORT).show();\n                            }\n                        }\n                    }\n                    //End Write and Read data with URL\n                });\n            }\n            else {\n                Toast.makeText(this, &quot;All fields required&quot;, Toast.LENGTH_SHORT).show();\n            }\n        });\n\n\n    }\n\n    public class PutData extends Thread {\n        private String url, method;\n        String result_data = &quot;Empty&quot;;\n        String[] data, field;\n\n        public PutData(String url, String method, String[] field, String[] data) {\n            this.url = url;\n            this.method = method;\n            this.data = new String[data.length];\n            this.field = new String[field.length];\n            System.arraycopy(field, 0, this.field, 0, field.length);\n            System.arraycopy(data, 0, this.data, 0, data.length);\n        }\n\n        @Override\n        public void run() {\n            try {\n                String UTF8 = &quot;UTF-8&quot;, iso = &quot;iso-8859-1&quot;;\n                URL url = new URL(this.url);\n                HttpURLConnection httpURLConnection = (HttpURLConnection) url.openConnection();\n                httpURLConnection.setRequestMethod(this.method);\n                httpURLConnection.setDoOutput(true);\n                httpURLConnection.setDoInput(true);\n                OutputStream outputStream = httpURLConnection.getOutputStream();\n                BufferedWriter bufferedWriter = new BufferedWriter(new OutputStreamWriter(outputStream, UTF8));\n                StringBuilder post_data = new StringBuilder();\n                for (int i = 0; i &lt; this.field.length; i++) {\n                    post_data.append(URLEncoder.encode(this.field[i], &quot;UTF-8&quot;)).append(&quot;=&quot;).append(URLEncoder.encode(this.data[i], UTF8)).append(&quot;&amp;&quot;);\n                }\n                bufferedWriter.write(post_data.toString());\n                bufferedWriter.flush();\n                bufferedWriter.close();\n                outputStream.close();\n                InputStream inputStream = httpURLConnection.getInputStream();\n                BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream, iso));\n                StringBuilder result = new StringBuilder();\n                String result_line;\n                while ((result_line = bufferedReader.readLine()) != null) {\n                    result.append(result_line);\n                }\n                bufferedReader.close();\n                inputStream.close();\n                httpURLConnection.disconnect();\n                setData(result.toString());\n            } catch (IOException e) {\n                setData(e.toString());\n            }\n        }\n\n        public boolean startPut() {\n            PutData.this.start();\n            return true;\n        }\n\n        public boolean onComplete() {\n            while (true) {\n                if (!this.isAlive()) {\n                    return true;\n                }\n            }\n        }\n\n        public String getResult() {\n            return this.getData();\n        }\n\n        public void setData(String result_data) {\n            this.result_data = result_data;\n        }\n\n\n        public String getData() {\n            return result_data;\n        }\n    }\n\n}\n</code></pre>\n<p>Logcat</p>\n<pre><code>2022-01-07 11:30:24.055 11687-11687/? I/.example.login: Late-enabling -Xcheck:jni\n2022-01-07 11:30:24.068 11687-11687/? I/.example.login: Unquickening 12 vdex files!\n2022-01-07 11:30:24.069 11687-11687/? W/.example.login: Unexpected CPU variant for X86 using defaults: x86\n2022-01-07 11:30:24.236 11687-11687/com.example.login2 D/NetworkSecurityConfig: No Network Security Config specified, using platform default\n2022-01-07 11:30:24.237 11687-11687/com.example.login2 D/NetworkSecurityConfig: No Network Security Config specified, using platform default\n2022-01-07 11:30:24.261 11687-11711/com.example.login2 D/libEGL: loaded /vendor/lib/egl/libEGL_emulation.so\n2022-01-07 11:30:24.263 11687-11711/com.example.login2 D/libEGL: loaded /vendor/lib/egl/libGLESv1_CM_emulation.so\n2022-01-07 11:30:24.267 11687-11711/com.example.login2 D/libEGL: loaded /vendor/lib/egl/libGLESv2_emulation.so\n2022-01-07 11:30:24.389 11687-11687/com.example.login2 W/.example.login: Accessing hidden method Landroid/view/View;-&gt;computeFitSystemWindows(Landroid/graphics/Rect;Landroid/graphics/Rect;)Z (greylist, reflection, allowed)\n2022-01-07 11:30:24.389 11687-11687/com.example.login2 W/.example.login: Accessing hidden method Landroid/view/ViewGroup;-&gt;makeOptionalFitsSystemWindows()V (greylist, reflection, allowed)\n2022-01-07 11:30:24.500 11687-11709/com.example.login2 D/HostConnection: HostConnection::get() New Host Connection established 0xf75ec230, tid 11709\n2022-01-07 11:30:24.507 11687-11709/com.example.login2 D/HostConnection: HostComposition ext ANDROID_EMU_CHECKSUM_HELPER_v1 ANDROID_EMU_native_sync_v2 ANDROID_EMU_native_sync_v3 ANDROID_EMU_native_sync_v4 ANDROID_EMU_dma_v1 ANDROID_EMU_direct_mem ANDROID_EMU_host_composition_v1 ANDROID_EMU_host_composition_v2 ANDROID_EMU_vulkan ANDROID_EMU_deferred_vulkan_commands ANDROID_EMU_vulkan_null_optional_strings ANDROID_EMU_vulkan_create_resources_with_requirements ANDROID_EMU_YUV_Cache ANDROID_EMU_vulkan_ignored_handles ANDROID_EMU_has_shared_slots_host_memory_allocator ANDROID_EMU_vulkan_free_memory_sync ANDROID_EMU_vulkan_shader_float16_int8 ANDROID_EMU_vulkan_async_queue_submit ANDROID_EMU_sync_buffer_data ANDROID_EMU_read_color_buffer_dma GL_OES_vertex_array_object GL_KHR_texture_compression_astc_ldr ANDROID_EMU_host_side_tracing ANDROID_EMU_gles_max_version_2 \n2022-01-07 11:30:24.508 11687-11709/com.example.login2 W/OpenGLRenderer: Failed to choose config with EGL_SWAP_BEHAVIOR_PRESERVED, retrying without...\n2022-01-07 11:30:24.537 11687-11709/com.example.login2 D/EGL_emulation: eglCreateContext: 0xf75ec1c0: maj 2 min 0 rcv 2\n2022-01-07 11:30:24.565 11687-11709/com.example.login2 D/EGL_emulation: eglMakeCurrent: 0xf75ec1c0: ver 2 0 (tinfo 0xf7931630) (first time)\n2022-01-07 11:30:24.571 11687-11709/com.example.login2 I/Gralloc4: mapper 4.x is not supported\n2022-01-07 11:30:24.572 11687-11709/com.example.login2 D/HostConnection: createUnique: call\n2022-01-07 11:30:24.572 11687-11709/com.example.login2 D/HostConnection: HostConnection::get() New Host Connection established 0xf75eb580, tid 11709\n2022-01-07 11:30:24.572 11687-11709/com.example.login2 D/goldfish-address-space: allocate: Ask for block of size 0x100\n2022-01-07 11:30:24.572 11687-11709/com.example.login2 D/goldfish-address-space: allocate: ioctl allocate returned offset 0x3dfffe000 size 0x2000\n2022-01-07 11:30:24.595 11687-11709/com.example.login2 D/HostConnection: HostComposition ext ANDROID_EMU_CHECKSUM_HELPER_v1 ANDROID_EMU_native_sync_v2 ANDROID_EMU_native_sync_v3 ANDROID_EMU_native_sync_v4 ANDROID_EMU_dma_v1 ANDROID_EMU_direct_mem ANDROID_EMU_host_composition_v1 ANDROID_EMU_host_composition_v2 ANDROID_EMU_vulkan ANDROID_EMU_deferred_vulkan_commands ANDROID_EMU_vulkan_null_optional_strings ANDROID_EMU_vulkan_create_resources_with_requirements ANDROID_EMU_YUV_Cache ANDROID_EMU_vulkan_ignored_handles ANDROID_EMU_has_shared_slots_host_memory_allocator ANDROID_EMU_vulkan_free_memory_sync ANDROID_EMU_vulkan_shader_float16_int8 ANDROID_EMU_vulkan_async_queue_submit ANDROID_EMU_sync_buffer_data ANDROID_EMU_read_color_buffer_dma GL_OES_vertex_array_object GL_KHR_texture_compression_astc_ldr ANDROID_EMU_host_side_tracing ANDROID_EMU_gles_max_version_2 \n2022-01-07 11:30:26.557 11687-11687/com.example.login2 I/AssistStructure: Flattened final assist data: 2276 bytes, containing 1 windows, 11 views\n2022-01-07 11:30:33.555 11687-11687/com.example.login2 D/CompatibilityChangeReporter: Compat change id reported: 147798919; UID 10128; state: ENABLED\n</code></pre>\n<p>I would appreciate any assistance in solving this matter.</p>\n<p>As requested, the php signup used to connect the android app to the mySQL server</p>\n<pre><code>&lt;?php\nrequire &quot;DataBase.php&quot;;\n$db = new DataBase();\nif (isset($_POST['fullname']) &amp;&amp; isset($_POST['email']) &amp;&amp; isset($_POST['username']) &amp;&amp; isset($_POST['password'])) {\n    if ($db-&gt;dbConnect()) {\n        if ($db-&gt;signUp(&quot;users&quot;, $_POST['fullname'], $_POST['email'], $_POST['username'], $_POST['password'])) {\n            echo &quot;Sign Up Success&quot;;\n        } else echo &quot;Sign up Failed&quot;;\n    } else echo &quot;Error: Database connection&quot;;\n} else echo &quot;All fields are required&quot;;\n?&gt;\n\n</code></pre>\n<p>database config file</p>\n<pre><code>&lt;?php\n\nclass DataBaseConfig\n{\n    public $servername;\n    public $username;\n    public $password;\n    public $databasename;\n\n    public function __construct()\n    {\n\n        $this-&gt;servername = '%';\n        $this-&gt;username = 'test1';\n        $this-&gt;password = 'n8wOs3tx@3d!TGJl';\n        $this-&gt;databasename = 'test';\n\n    }\n}\n\n?&gt;\n\n</code></pre>\n"},{"tags":["java","android","json","servlets"],"answers":[{"tags":[],"owner":{"account_id":14680232,"reputation":10969,"user_id":10601988,"display_name":"Aaron Villalobos"},"down_vote_count":1,"up_vote_count":791,"is_accepted":true,"score":790,"last_activity_date":1675044600,"creation_date":1558578995,"answer_id":56267366,"question_id":56266801,"body_markdown":"Your app needs additional permissions and/or to be reinstalled.\r\n\r\nAdd additional permissions to `AndroidManifest.xml` within the `&lt;manifest&gt;` section:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n\r\nTo reinstall, uninstall the app from the emulator or physical connected device and then run it again.  (If adding permissions, make sure to reinstall *afterwards*.)","title":"java.net.SocketException: socket failed: EPERM (Operation not permitted)","body":"<p>Your app needs additional permissions and/or to be reinstalled.</p>\n<p>Add additional permissions to <code>AndroidManifest.xml</code> within the <code>&lt;manifest&gt;</code> section:</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n</code></pre>\n<p>To reinstall, uninstall the app from the emulator or physical connected device and then run it again.  (If adding permissions, make sure to reinstall <em>afterwards</em>.)</p>\n"},{"tags":[],"owner":{"account_id":5098917,"reputation":4167,"user_id":4089212,"accept_rate":64,"display_name":"Archil Labadze"},"down_vote_count":0,"up_vote_count":78,"is_accepted":false,"score":78,"last_activity_date":1567452984,"creation_date":1567452984,"answer_id":57761916,"question_id":56266801,"body_markdown":"First of all you need change your android manifest .xml\r\nBut after this action you must uninstall application and run it again.\r\n[https://developer.android.com/training/basics/network-ops/connecting][1]\r\n\r\n\r\n  [1]: https://developer.android.com/training/basics/network-ops/connecting\r\n\r\nand code here:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n\r\nin **AndroidManifest.xml**","title":"java.net.SocketException: socket failed: EPERM (Operation not permitted)","body":"<p>First of all you need change your android manifest .xml\nBut after this action you must uninstall application and run it again.\n<a href=\"https://developer.android.com/training/basics/network-ops/connecting\" rel=\"noreferrer\">https://developer.android.com/training/basics/network-ops/connecting</a></p>\n\n<p>and code here:</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n</code></pre>\n\n<p>in <strong>AndroidManifest.xml</strong></p>\n"},{"tags":[],"owner":{"account_id":8594874,"reputation":531,"user_id":6438191,"display_name":"Juan Cabello"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1573132877,"creation_date":1573132877,"answer_id":58749652,"question_id":56266801,"body_markdown":"I had to uninstall the app from the emulator and then everything started to work. I just needed the folowing permission on the AndroidManifest.xml\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;","title":"java.net.SocketException: socket failed: EPERM (Operation not permitted)","body":"<p>I had to uninstall the app from the emulator and then everything started to work. I just needed the folowing permission on the AndroidManifest.xml</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17071695,"reputation":1131,"user_id":12352305,"display_name":"John Alexander"},"down_vote_count":0,"up_vote_count":113,"is_accepted":false,"score":113,"last_activity_date":1630046112,"creation_date":1573416257,"answer_id":58792460,"question_id":56266801,"body_markdown":"Just uninstall the app from the emulator then run again and it’ll work. I had the same issue\r\n\r\nTo uninstall the app run your project when &quot;the application had stopped&quot; message appear click &quot;app info&quot; then uninstall.","title":"java.net.SocketException: socket failed: EPERM (Operation not permitted)","body":"<p>Just uninstall the app from the emulator then run again and it’ll work. I had the same issue</p>\n<p>To uninstall the app run your project when &quot;the application had stopped&quot; message appear click &quot;app info&quot; then uninstall.</p>\n"},{"tags":[],"owner":{"account_id":1850973,"reputation":328,"user_id":1677551,"display_name":"ovidiur"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1574869803,"creation_date":1574869803,"answer_id":59073918,"question_id":56266801,"body_markdown":"If anyone still has this issue I encountered it when I used VPN and tried to connect to wifi while cellular was on. I was using Anyconnect VPN client.\r\nSolution is to enable the allow bypass that will let you bind a socket to a specific network if this is what you are looking for. \r\n\r\nAnyConnect only uses allowBypass if it&#39;s configured in its managed restrictions (by EMM), via this key: vpn_connection_allow_bypass. ","title":"java.net.SocketException: socket failed: EPERM (Operation not permitted)","body":"<p>If anyone still has this issue I encountered it when I used VPN and tried to connect to wifi while cellular was on. I was using Anyconnect VPN client.\nSolution is to enable the allow bypass that will let you bind a socket to a specific network if this is what you are looking for. </p>\n\n<p>AnyConnect only uses allowBypass if it's configured in its managed restrictions (by EMM), via this key: vpn_connection_allow_bypass. </p>\n"},{"tags":[],"owner":{"account_id":14624477,"reputation":522,"user_id":10562200,"display_name":"AK IJ"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1575374709,"creation_date":1575374709,"answer_id":59156740,"question_id":56266801,"body_markdown":"1. Add ACCESS_NETWORK_STATE permission in manifest\r\n2. Reinstallation emulator ","title":"java.net.SocketException: socket failed: EPERM (Operation not permitted)","body":"<ol>\n<li>Add ACCESS_NETWORK_STATE permission in manifest</li>\n<li>Reinstallation emulator </li>\n</ol>\n"},{"tags":[],"owner":{"account_id":12883653,"reputation":2815,"user_id":10030693,"display_name":"Gilbert"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1588374150,"creation_date":1588374150,"answer_id":61552131,"question_id":56266801,"body_markdown":"Set  `android:usesCleartextTraffic=&quot;true&quot;` in the manifest file.\r\nAdd the permission `INTERNET`.\r\nUninstall app and then install again.","title":"java.net.SocketException: socket failed: EPERM (Operation not permitted)","body":"<p>Set  <code>android:usesCleartextTraffic=\"true\"</code> in the manifest file.\nAdd the permission <code>INTERNET</code>.\nUninstall app and then install again.</p>\n"},{"tags":[],"owner":{"account_id":17916474,"reputation":31,"user_id":13017308,"display_name":"khoane"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1603178960,"creation_date":1603159167,"answer_id":64437440,"question_id":56266801,"body_markdown":"I had to delete this\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n\r\nand keep this\r\n\r\n    android:usesCleartextTraffic=&quot;true&quot;\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n\r\n","title":"java.net.SocketException: socket failed: EPERM (Operation not permitted)","body":"<p>I had to delete this</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n</code></pre>\n<p>and keep this</p>\n<pre><code>android:usesCleartextTraffic=&quot;true&quot;\n&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17751509,"reputation":753,"user_id":12889486,"display_name":"Kavindu Dissanayake"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1606589780,"creation_date":1606589780,"answer_id":65053371,"question_id":56266801,"body_markdown":"Set android:usesCleartextTraffic=&quot;true&quot; in the manifest file. Add the permission INTERNET. Uninstall app and then install again.its work to me","title":"java.net.SocketException: socket failed: EPERM (Operation not permitted)","body":"<p>Set android:usesCleartextTraffic=&quot;true&quot; in the manifest file. Add the permission INTERNET. Uninstall app and then install again.its work to me</p>\n"},{"tags":[],"owner":{"account_id":11364102,"reputation":130,"user_id":8331502,"display_name":"Mazhar Ghulam"},"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1608212737,"creation_date":1607005511,"answer_id":65127853,"question_id":56266801,"body_markdown":"I had the same issue in android emulator, even after adding \r\n```\r\n&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;\r\n```\r\nand \r\n\r\n    android:usesCleartextTraffic=&quot;true&quot;\r\n\r\n and reinstalling the app still had the issue on my emulator.\r\n\r\n&gt; AVD Manager -&gt; Right click -&gt; Cold Boot now\r\n\r\nsolved my issue, looks like if we ran the app initially without adding internet permissions / clearTextTraffic we might need to cold boot as it store some cache.","title":"java.net.SocketException: socket failed: EPERM (Operation not permitted)","body":"<p>I had the same issue in android emulator, even after adding</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;\n</code></pre>\n<p>and</p>\n<pre><code>android:usesCleartextTraffic=&quot;true&quot;\n</code></pre>\n<p>and reinstalling the app still had the issue on my emulator.</p>\n<blockquote>\n<p>AVD Manager -&gt; Right click -&gt; Cold Boot now</p>\n</blockquote>\n<p>solved my issue, looks like if we ran the app initially without adding internet permissions / clearTextTraffic we might need to cold boot as it store some cache.</p>\n"},{"tags":[],"owner":{"account_id":259035,"reputation":12666,"user_id":541624,"accept_rate":64,"display_name":"ericn"},"down_vote_count":1,"up_vote_count":36,"is_accepted":false,"score":35,"last_activity_date":1609865556,"creation_date":1609865556,"answer_id":65583188,"question_id":56266801,"body_markdown":"If you forgot to add `&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;` to your Manifest.xml, do it now\r\n\r\nIf you already added it but the error persists, uninstall the app first then run i again.  \r\nMore often than not I run into the same issue because I forgot `&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;` in my first installation.  \r\nThe OS thought the app doesn&#39;t need Internet permission (which is dumb IMO) and would not check any permission update to the app (which is even dumber IMO).  \r\n\r\nThe only way to tell the Android OS to check your updated permission requests is to uninstall the app first before installing again.\r\n\r\n\r\nI think neither\r\n-  `&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;`\r\n- nor `android:usesCleartextTraffic=&quot;true&quot;`\r\nreally matters here","title":"java.net.SocketException: socket failed: EPERM (Operation not permitted)","body":"<p>If you forgot to add <code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;</code> to your Manifest.xml, do it now</p>\n<p>If you already added it but the error persists, uninstall the app first then run i again.<br />\nMore often than not I run into the same issue because I forgot <code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;</code> in my first installation.<br />\nThe OS thought the app doesn't need Internet permission (which is dumb IMO) and would not check any permission update to the app (which is even dumber IMO).</p>\n<p>The only way to tell the Android OS to check your updated permission requests is to uninstall the app first before installing again.</p>\n<p>I think neither</p>\n<ul>\n<li><code>&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;</code></li>\n<li>nor <code>android:usesCleartextTraffic=&quot;true&quot;</code>\nreally matters here</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":10712400,"reputation":847,"user_id":7884251,"display_name":"Chosen"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1619099966,"creation_date":1618193704,"answer_id":67051882,"question_id":56266801,"body_markdown":"If you are using a localhost server on your Mac then use the local IP address that is assigned for your machine as your API address. i.e. 192.168.x.x (find it in Settings -&gt; Network) not localhost nor 127.0.0.1.\r\n\r\nAs they mentioned above, uninstall the app and then put these tags in your manifest:\r\n\r\nin the application section: \r\n\r\n    android:usesCleartextTraffic=&quot;true&quot;\r\n\r\n\r\nThen in your manifest section:\r\n\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        package=&quot;com.a.myapp&quot;&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    \r\n        &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;","title":"java.net.SocketException: socket failed: EPERM (Operation not permitted)","body":"<p>If you are using a localhost server on your Mac then use the local IP address that is assigned for your machine as your API address. i.e. 192.168.x.x (find it in Settings -&gt; Network) not localhost nor 127.0.0.1.</p>\n<p>As they mentioned above, uninstall the app and then put these tags in your manifest:</p>\n<p>in the application section:</p>\n<pre><code>android:usesCleartextTraffic=&quot;true&quot;\n</code></pre>\n<p>Then in your manifest section:</p>\n<pre><code>&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    package=&quot;com.a.myapp&quot;&gt;\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19948660,"reputation":710,"user_id":14618789,"display_name":"Lakindu Hewawasam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1627990039,"creation_date":1627989683,"answer_id":68635134,"question_id":56266801,"body_markdown":"I am a little late to this but I encountered this problem and I found out that `android:usesCleartextTraffic` requires minimum API version of 23. Therefore, in the `module` gradle build file, switch the minimum version to 23 and it should work.","title":"java.net.SocketException: socket failed: EPERM (Operation not permitted)","body":"<p>I am a little late to this but I encountered this problem and I found out that <code>android:usesCleartextTraffic</code> requires minimum API version of 23. Therefore, in the <code>module</code> gradle build file, switch the minimum version to 23 and it should work.</p>\n"},{"tags":[],"owner":{"account_id":3024222,"reputation":449,"user_id":2564590,"accept_rate":0,"display_name":"sudhanshu"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1633606233,"creation_date":1633606233,"answer_id":69480351,"question_id":56266801,"body_markdown":"Working solution.\r\n1. check if you have INTERNET permission and ACCESS_NETWORK_STATE permission, if not add these.\r\n\r\n&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n\r\n\r\n2. uninstall the app and install again. If not try in different device. It will work 100%. I face same issue and solved this by using these steps.","title":"java.net.SocketException: socket failed: EPERM (Operation not permitted)","body":"<p>Working solution.</p>\n<ol>\n<li>check if you have INTERNET permission and ACCESS_NETWORK_STATE permission, if not add these.</li>\n</ol>\n\n\n<ol start=\"2\">\n<li>uninstall the app and install again. If not try in different device. It will work 100%. I face same issue and solved this by using these steps.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":24594811,"reputation":21,"user_id":18498144,"display_name":"Mostafa Mohamed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682630539,"creation_date":1682630539,"answer_id":76124766,"question_id":56266801,"body_markdown":"uninstall the app from the emulator and try again","title":"java.net.SocketException: socket failed: EPERM (Operation not permitted)","body":"<p>uninstall the app from the emulator and try again</p>\n"},{"tags":[],"owner":{"account_id":5174030,"reputation":156,"user_id":4141763,"display_name":"Ahmed Nabil"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689336541,"creation_date":1689336541,"answer_id":76687529,"question_id":56266801,"body_markdown":"uninstalling the app did the trick for me,specially if you&#39;re working on emulator","title":"java.net.SocketException: socket failed: EPERM (Operation not permitted)","body":"<p>uninstalling the app did the trick for me,specially if you're working on emulator</p>\n"}],"owner":{"account_id":14680232,"reputation":10969,"user_id":10601988,"display_name":"Aaron Villalobos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":188625,"favorite_count":0,"down_vote_count":0,"up_vote_count":306,"accepted_answer_id":56267366,"answer_count":16,"score":306,"last_activity_date":1689336541,"creation_date":1558573350,"question_id":56266801,"body_markdown":"I am working on an Android Studio project with several activities. I am currently trying to read the output from a Java Servlet on localhost but it seems to be crashing due to a socket permission.\r\n\r\nI&#39;ve made a new project, used the exact same code and worked perfectly. So I dont understand why is not willing to work on my project. \r\n\r\n\r\n\r\n    public class LoginActivity extends AppCompatActivity {\r\n\r\n\r\n    String apiUrl = &quot;http://10.0.2.2:8080/ProyectService/Servlet?action=login&quot;;\r\n    EditText username;\r\n    EditText password;\r\n    AlertDialog dialog;\r\n    Usuario session;\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        // Inicializacion de ventana\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_login);\r\n        getSupportActionBar().hide();\r\n\r\n        // Inicializacion de componentes\r\n        username = findViewById(R.id.username);\r\n        password = findViewById(R.id.password);\r\n\r\n        // Inicializacion de funcionalidad de botones\r\n        Button button= (Button) findViewById(R.id.login);\r\n        button.setOnClickListener(new View.OnClickListener() {\r\n            public void onClick(View v) {\r\n                UserLoginTask mAuthTask = new UserLoginTask();\r\n                mAuthTask.execute();\r\n            }\r\n        });\r\n\r\n        password = findViewById(R.id.password);\r\n        createAlertDialog(&quot;Usuario o Contrase&#241;a Incorrectos&quot;);\r\n        }\r\n\r\n        private void createAlertDialog(String message){\r\n        AlertDialog.Builder builder = new AlertDialog.Builder(this);\r\n        builder.setMessage(message)\r\n                .setTitle(&quot;Error&quot;);\r\n        dialog = builder.create();\r\n        }\r\n\r\n\r\n\r\n        // ASYNCRONUS NETWORK PROCESS\r\n\r\n        public class UserLoginTask extends AsyncTask&lt;String, String, String&gt; {\r\n\r\n        @Override\r\n        protected void onPreExecute() {\r\n        }\r\n\r\n\r\n        @Override\r\n        protected String doInBackground(String... params) {\r\n\r\n            // implement API in background and store the response in current variable\r\n            String current = &quot;&quot;;\r\n            try {\r\n                URL url;\r\n                HttpURLConnection urlConnection = null;\r\n                try {\r\n                    url = new URL(apiUrl);\r\n                    System.out.println(apiUrl);\r\n                    urlConnection = (HttpURLConnection) url\r\n                            .openConnection();\r\n\r\n                    InputStream in = urlConnection.getInputStream();\r\n\r\n                    InputStreamReader isw = new InputStreamReader(in);\r\n\r\n                    int data = isw.read();\r\n                    while (data != -1) {\r\n                        current += (char) data;\r\n                        data = isw.read();\r\n                        //System.out.print(current);\r\n\r\n                    }\r\n                    System.out.print(current);\r\n                    // return the data to onPostExecute method\r\n                    return current;\r\n\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                } finally {\r\n                    if (urlConnection != null) {\r\n                        urlConnection.disconnect();\r\n                    }\r\n                }\r\n\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n                return &quot;Exception: &quot; + e.getMessage();\r\n            }\r\n            return current;\r\n            }\r\n        }\r\n\r\n        protected void onPostExecute(String success) {\r\n            Log.i(success, &quot;&quot;);\r\n           //attemptLogin();\r\n        }\r\n    }\r\n\r\nI Expect it to read the data but it crashes at this line: \r\n\r\n    InputStream in = urlConnection.getInputStream();\r\n\r\n\r\n\r\nThis is the error output:\r\n\r\n    java.net.SocketException: socket failed: EPERM (Operation not permitted)\r\n    at java.net.Socket.createImpl(Socket.java:492)\r\n    at java.net.Socket.getImpl(Socket.java:552)\r\n    at java.net.Socket.setSoTimeout(Socket.java:1180)\r\n    at com.android.okhttp.internal.io.RealConnection.connectSocket(RealConnection.java:143)\r\n    at com.android.okhttp.internal.io.RealConnection.connect(RealConnection.java:116)\r\n    at com.android.okhttp.internal.http.StreamAllocation.findConnection(StreamAllocation.java:186)\r\n    at com.android.okhttp.internal.http.StreamAllocation.findHealthyConnection(StreamAllocation.java:128)\r\n    at com.android.okhttp.internal.http.StreamAllocation.newStream(StreamAllocation.java:97)\r\n    at com.android.okhttp.internal.http.HttpEngine.connect(HttpEngine.java:289)\r\n    at com.android.okhttp.internal.http.HttpEngine.sendRequest(HttpEngine.java:232)\r\n    at com.android.okhttp.internal.huc.HttpURLConnectionImpl.execute(HttpURLConnectionImpl.java:465)\r\n    at com.android.okhttp.internal.huc.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:411)\r\n    at com.android.okhttp.internal.huc.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:248)\r\n    at com.example.controller.LoginActivity$UserLoginTask.doInBackground(LoginActivity.java:114)\r\n    at com.example.controller.LoginActivity$UserLoginTask.doInBackground(LoginActivity.java:93)\r\n    at android.os.AsyncTask$3.call(AsyncTask.java:378)\r\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:289)\r\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\r\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\r\n    at java.lang.Thread.run(Thread.java:919)","title":"java.net.SocketException: socket failed: EPERM (Operation not permitted)","body":"<p>I am working on an Android Studio project with several activities. I am currently trying to read the output from a Java Servlet on localhost but it seems to be crashing due to a socket permission.</p>\n\n<p>I've made a new project, used the exact same code and worked perfectly. So I dont understand why is not willing to work on my project. </p>\n\n<pre><code>public class LoginActivity extends AppCompatActivity {\n\n\nString apiUrl = \"http://10.0.2.2:8080/ProyectService/Servlet?action=login\";\nEditText username;\nEditText password;\nAlertDialog dialog;\nUsuario session;\n\n@Override\npublic void onCreate(Bundle savedInstanceState) {\n    // Inicializacion de ventana\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_login);\n    getSupportActionBar().hide();\n\n    // Inicializacion de componentes\n    username = findViewById(R.id.username);\n    password = findViewById(R.id.password);\n\n    // Inicializacion de funcionalidad de botones\n    Button button= (Button) findViewById(R.id.login);\n    button.setOnClickListener(new View.OnClickListener() {\n        public void onClick(View v) {\n            UserLoginTask mAuthTask = new UserLoginTask();\n            mAuthTask.execute();\n        }\n    });\n\n    password = findViewById(R.id.password);\n    createAlertDialog(\"Usuario o Contraseña Incorrectos\");\n    }\n\n    private void createAlertDialog(String message){\n    AlertDialog.Builder builder = new AlertDialog.Builder(this);\n    builder.setMessage(message)\n            .setTitle(\"Error\");\n    dialog = builder.create();\n    }\n\n\n\n    // ASYNCRONUS NETWORK PROCESS\n\n    public class UserLoginTask extends AsyncTask&lt;String, String, String&gt; {\n\n    @Override\n    protected void onPreExecute() {\n    }\n\n\n    @Override\n    protected String doInBackground(String... params) {\n\n        // implement API in background and store the response in current variable\n        String current = \"\";\n        try {\n            URL url;\n            HttpURLConnection urlConnection = null;\n            try {\n                url = new URL(apiUrl);\n                System.out.println(apiUrl);\n                urlConnection = (HttpURLConnection) url\n                        .openConnection();\n\n                InputStream in = urlConnection.getInputStream();\n\n                InputStreamReader isw = new InputStreamReader(in);\n\n                int data = isw.read();\n                while (data != -1) {\n                    current += (char) data;\n                    data = isw.read();\n                    //System.out.print(current);\n\n                }\n                System.out.print(current);\n                // return the data to onPostExecute method\n                return current;\n\n            } catch (Exception e) {\n                e.printStackTrace();\n            } finally {\n                if (urlConnection != null) {\n                    urlConnection.disconnect();\n                }\n            }\n\n        } catch (Exception e) {\n            e.printStackTrace();\n            return \"Exception: \" + e.getMessage();\n        }\n        return current;\n        }\n    }\n\n    protected void onPostExecute(String success) {\n        Log.i(success, \"\");\n       //attemptLogin();\n    }\n}\n</code></pre>\n\n<p>I Expect it to read the data but it crashes at this line: </p>\n\n<pre><code>InputStream in = urlConnection.getInputStream();\n</code></pre>\n\n<p>This is the error output:</p>\n\n<pre><code>java.net.SocketException: socket failed: EPERM (Operation not permitted)\nat java.net.Socket.createImpl(Socket.java:492)\nat java.net.Socket.getImpl(Socket.java:552)\nat java.net.Socket.setSoTimeout(Socket.java:1180)\nat com.android.okhttp.internal.io.RealConnection.connectSocket(RealConnection.java:143)\nat com.android.okhttp.internal.io.RealConnection.connect(RealConnection.java:116)\nat com.android.okhttp.internal.http.StreamAllocation.findConnection(StreamAllocation.java:186)\nat com.android.okhttp.internal.http.StreamAllocation.findHealthyConnection(StreamAllocation.java:128)\nat com.android.okhttp.internal.http.StreamAllocation.newStream(StreamAllocation.java:97)\nat com.android.okhttp.internal.http.HttpEngine.connect(HttpEngine.java:289)\nat com.android.okhttp.internal.http.HttpEngine.sendRequest(HttpEngine.java:232)\nat com.android.okhttp.internal.huc.HttpURLConnectionImpl.execute(HttpURLConnectionImpl.java:465)\nat com.android.okhttp.internal.huc.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:411)\nat com.android.okhttp.internal.huc.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:248)\nat com.example.controller.LoginActivity$UserLoginTask.doInBackground(LoginActivity.java:114)\nat com.example.controller.LoginActivity$UserLoginTask.doInBackground(LoginActivity.java:93)\nat android.os.AsyncTask$3.call(AsyncTask.java:378)\nat java.util.concurrent.FutureTask.run(FutureTask.java:266)\nat android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:289)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\nat java.lang.Thread.run(Thread.java:919)\n</code></pre>\n"},{"tags":["java","outlook","connection-pooling","exchangewebservices","email"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1464861534,"post_id":37588542,"comment_id":62662308,"body_markdown":"&quot;Please tell me if there is another approach to deal with exchange service connection&quot; Guard the connection with a mutex, so only one thread can access it at once; use a `ThreadLocal` so each thread has its own connection.","body":"&quot;Please tell me if there is another approach to deal with exchange service connection&quot; Guard the connection with a mutex, so only one thread can access it at once; use a <code>ThreadLocal</code> so each thread has its own connection."},{"owner":{"account_id":5160473,"reputation":119,"user_id":4132343,"accept_rate":25,"display_name":"aelve"},"score":0,"creation_date":1464864152,"post_id":37588542,"comment_id":62664106,"body_markdown":"Ok, I have multiple tenants. Let&#39;s say currently tenant A have 5 users. Ther user 1 want to send an email, and also user 1 should be notified when he receive an email. For this I need 2 connection to the exchange service. First to send the email, and second to listen to the NewEmail event. Send email and receive emails are on different controller/services, this means different threads. After send email I can close the ews connection, but to receive emails the connection should be opened all the time. To send an email took 5+ seconds because the connection on ews. Is this the right approach ?","body":"Ok, I have multiple tenants. Let&#39;s say currently tenant A have 5 users. Ther user 1 want to send an email, and also user 1 should be notified when he receive an email. For this I need 2 connection to the exchange service. First to send the email, and second to listen to the NewEmail event. Send email and receive emails are on different controller/services, this means different threads. After send email I can close the ews connection, but to receive emails the connection should be opened all the time. To send an email took 5+ seconds because the connection on ews. Is this the right approach ?"}],"owner":{"account_id":5160473,"reputation":119,"user_id":4132343,"accept_rate":25,"display_name":"aelve"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":483,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689336406,"creation_date":1464861468,"question_id":37588542,"body_markdown":"I need to integrate outlook corporate emails in CRM. For this is use java EWS API.\r\nI read microsoft documentation of EWS but I still have some questions, maybe someone can help.\r\nFirst I need to connect with ExchangeService:\r\n\r\n    ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2010_SP2)\r\n    ExchangeCredentials credentials = new WebCredentials(email, password)\r\n    service.setCredentials(credentials)\r\n    service.autodiscoverUrl(email, new RedirectionUrlCallback())\r\n\r\nFor this connection to be established takes about 5 seconds, it is pretty much for a real time application. I&#39;m ok to create this connection only one time and then reuse it but as I read ExchangeService is not thread safe, so I need to create a connection to send an email, then close the connection, then create again a new connection when I need to subscribe for notifications etc.\r\n\r\nIs there another approach to deal with exchange service connection?\r\n\r\nI tried to reuse the exchange service connection and I get this:\r\n\r\n    microsoft.exchange.webservices.data.core.exception.service.remote.ServiceRequestException: The request failed. Connection is still allocated\r\n\r\nAnother question is about streaming subscription that enables client applications to discover events that occur in the Exchange store, I think this is the right fit method for me:\r\n\r\n    StreamingSubscriptionConnection conn = new   StreamingSubscriptionConnection(service, 30);\r\n    conn.addSubscription(subscription);\r\n    conn.addOnNotificationEvent(new SubscriptionConnectionListener());\r\n    conn.addOnDisconnect(this);\r\n    conn.open();\r\n\r\nSo first I need the connection to the ExchangeService to be opened, and then I need to open the SubscriptionConnection. Because SubscriptionConnectionListener should wait all the time for new events I don&#39;t close the connection. Connection expiry after 30 minutes. I can catch the expiry connection and opened again. How to deal with that when 1000 users have opened subscription connections with their exchange service, basically if the subscription connection remains opened for new events also the exchange service connection used for subscription should stay alive.","title":"Corporate email integration, exchange server ews","body":"<p>I need to integrate outlook corporate emails in CRM. For this is use java EWS API.\nI read microsoft documentation of EWS but I still have some questions, maybe someone can help.\nFirst I need to connect with ExchangeService:</p>\n<pre><code>ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2010_SP2)\nExchangeCredentials credentials = new WebCredentials(email, password)\nservice.setCredentials(credentials)\nservice.autodiscoverUrl(email, new RedirectionUrlCallback())\n</code></pre>\n<p>For this connection to be established takes about 5 seconds, it is pretty much for a real time application. I'm ok to create this connection only one time and then reuse it but as I read ExchangeService is not thread safe, so I need to create a connection to send an email, then close the connection, then create again a new connection when I need to subscribe for notifications etc.</p>\n<p>Is there another approach to deal with exchange service connection?</p>\n<p>I tried to reuse the exchange service connection and I get this:</p>\n<pre><code>microsoft.exchange.webservices.data.core.exception.service.remote.ServiceRequestException: The request failed. Connection is still allocated\n</code></pre>\n<p>Another question is about streaming subscription that enables client applications to discover events that occur in the Exchange store, I think this is the right fit method for me:</p>\n<pre><code>StreamingSubscriptionConnection conn = new   StreamingSubscriptionConnection(service, 30);\nconn.addSubscription(subscription);\nconn.addOnNotificationEvent(new SubscriptionConnectionListener());\nconn.addOnDisconnect(this);\nconn.open();\n</code></pre>\n<p>So first I need the connection to the ExchangeService to be opened, and then I need to open the SubscriptionConnection. Because SubscriptionConnectionListener should wait all the time for new events I don't close the connection. Connection expiry after 30 minutes. I can catch the expiry connection and opened again. How to deal with that when 1000 users have opened subscription connections with their exchange service, basically if the subscription connection remains opened for new events also the exchange service connection used for subscription should stay alive.</p>\n"},{"tags":["java","eclipse","classloader"],"comments":[{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1527078385,"post_id":50488162,"comment_id":87989508,"body_markdown":"It is hard to tell what is wrong with your project without actually seeing its structure or settings. Maybe you need to use some clear/rebuild options? If that doesn&#39;t help take a look at this question about loading resources: [Loading image resource](https://stackoverflow.com/q/9864267), which for Eclipse points us out to [Runnable JARs missing Images/Files (Resources)](https://stackoverflow.com/q/8960381)","body":"It is hard to tell what is wrong with your project without actually seeing its structure or settings. Maybe you need to use some clear/rebuild options? If that doesn&#39;t help take a look at this question about loading resources: <a href=\"https://stackoverflow.com/q/9864267\">Loading image resource</a>, which for Eclipse points us out to <a href=\"https://stackoverflow.com/q/8960381\">Runnable JARs missing Images/Files (Resources)</a>"},{"owner":{"account_id":19067,"reputation":5283,"user_id":44355,"display_name":"david a."},"score":0,"creation_date":1527078914,"post_id":50488162,"comment_id":87989915,"body_markdown":"Is the Resources directory included in the Java Build Path in your Eclipse project settings?","body":"Is the Resources directory included in the Java Build Path in your Eclipse project settings?"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1527078943,"post_id":50488162,"comment_id":87989932,"body_markdown":"Look in the jar (zip format) to find `/Images/logo.png`. Case-sensitive. Marking the folder as source folder should have done it, and `IntroState.class.getResource(&quot;/Images/logo.png&quot;)`.","body":"Look in the jar (zip format) to find <code>&#47;Images&#47;logo.png</code>. Case-sensitive. Marking the folder as source folder should have done it, and <code>IntroState.class.getResource(&quot;&#47;Images&#47;logo.png&quot;)</code>."},{"owner":{"account_id":5203048,"reputation":71,"user_id":4161854,"display_name":"Nafta"},"score":0,"creation_date":1527079101,"post_id":50488162,"comment_id":87990064,"body_markdown":"as already stated in the question, the folder &quot;Resources&quot; is included in the build path as Source Folder. I also rebuilt the Project multiple times.","body":"as already stated in the question, the folder &quot;Resources&quot; is included in the build path as Source Folder. I also rebuilt the Project multiple times."}],"answers":[{"tags":[],"owner":{"account_id":9144834,"reputation":4430,"user_id":6801443,"display_name":"Sean F"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1527078528,"creation_date":1527078528,"answer_id":50488436,"question_id":50488162,"body_markdown":"It will search for the image based on the location of the class. Since class GamesState.Introstate is found at Project/src (in actual fact in eclipse it is probably found at Project/bin) it will look for the image at Project/src/Images/logo.png when you use the path \r\n/Images/logo.png\r\n","title":"getClass().getResource doesn&#39;t find image file","body":"<p>It will search for the image based on the location of the class. Since class GamesState.Introstate is found at Project/src (in actual fact in eclipse it is probably found at Project/bin) it will look for the image at Project/src/Images/logo.png when you use the path \n/Images/logo.png</p>\n"},{"tags":[],"owner":{"account_id":4718602,"reputation":2942,"user_id":3817152,"accept_rate":67,"display_name":"Deb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1527079199,"creation_date":1527079199,"answer_id":50488671,"question_id":50488162,"body_markdown":"You should read the file as stream\r\n\r\nTry using:\r\n    \r\n\r\n    getClass().getClassLoader().getResourceAsStream(&quot;Images/logo.png&quot;)\r\n\r\nOr \r\n\r\n    getClass().getClassLoader().getResource(&quot;Images/logo.png&quot;)\r\n","title":"getClass().getResource doesn&#39;t find image file","body":"<p>You should read the file as stream</p>\n\n<p>Try using:</p>\n\n<pre><code>getClass().getClassLoader().getResourceAsStream(\"Images/logo.png\")\n</code></pre>\n\n<p>Or </p>\n\n<pre><code>getClass().getClassLoader().getResource(\"Images/logo.png\")\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9925559,"reputation":430,"user_id":7347278,"accept_rate":86,"display_name":"V&#225;clav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689335754,"creation_date":1689335024,"answer_id":76687352,"question_id":50488162,"body_markdown":"Say, you have a resource file in your project `Project/src/com/example/icon.PNG`. But this is _not_ where the program is going to look for it. The program is going to look for your file in _classpath_, which is either under `/out`, or `/target` folder, the one which contains your compiled classes.\r\n\r\nGet to know you classpath precise by running `System.getProperty(&quot;java.class.path&quot;)`. It has same structure as your OS `$PATH` variable.\r\n\r\nIn context of location of resource files, **absolute** means _relative to the classpath_, as if the classpath was `/` of your filesystem.\r\n\r\nIn context of location of resource files, **relative** means _relative to the compiled class file_.\r\n\r\nWhen accessing resource files in Java, there are three pairs of options to consider:\r\n\r\n 1. You may access a resource either by using `ClassLoader` (i.e. `this.getClass().getClassLoader()`, or `MyClass.class.getClassLoader()`), or using `Class` (i.e. `MyClass.class`, or `this.getClass()`);\r\n2. You may access a resource either by providing an **absolute** or a **relative** path;\r\n3. You may either obtain resource&#39;s **URL** (i.e. `this.getClass().getClassLoader().getResource(&quot;com/example/icon.PNG&quot;)`, or `com.example.MyClass.class.getResource(&quot;icon.PNG&quot;)`), or you may obtain **InputStream** instead (i.e. `MyClass.class.getClassLoader().getResourceAsStream(&quot;com/example/icon.PNG&quot;))`, or `this.getClass().getResourceAsStream(&quot;/com/example/icon.PNG&quot;)`)\r\n\r\n**YOU CANNOT USE RELATIVE PATHS WITH CLASSLOADER**\r\n\r\nAbsolute paths (relative to your classpath) start with `/` when you access it via **Class**, but never start with `/` when you access it via **ClassLoader**. For example:\r\n\r\n - `this.getClass().getResourceAsStream(&quot;/com/example/icon.PNG&quot;)` finds the file;\r\n - `this.getClass().getClassLoader().getResourceAsStream(&quot;/com/example/icon.PNG&quot;)` returns **null**\r\n - `this.getClass().getResourceAsStream(&quot;com/example/icon.PNG&quot;)` returns **null**\r\n - `this.getClass().getClassLoader().getResourceAsStream(&quot;com/example/icon.PNG&quot;)` finds the file\r\n - `com.example.package1.MyObj1.class.getResource(&quot;../icon.PNG&quot;)` finds the file\r\n- `com.example.MyClass.class.getResource(&quot;icon.PNG&quot;)` finds the file\r\n - `com.example.MyClass.class.getResource(&quot;com/example/icon.PNG&quot;)` returns **null**\r\n\r\n\r\nLast but not least - it would be enough to have read access rights for the resource file in order to copy it to classpath (to `out/production/`, or `target/`, etc.) so even if it is _root_ owned, read-only access rights (`chmod 444 icon.PNG`) then it still would be enough to build your app. If the resource file is unreadable in build time, your classpath simply won&#39;t built at all, so no worries here. If you do make a trick and take away read access rights on the resource which is already on the classpath (i.e. you do `chmod 000 /target/Project/com/example/icon.PNG`), then the obtained URL still won&#39;t be null, but you&#39;re going to simply read 0 bytes from it, with no error. \r\n\r\n","title":"getClass().getResource doesn&#39;t find image file","body":"<p>Say, you have a resource file in your project <code>Project/src/com/example/icon.PNG</code>. But this is <em>not</em> where the program is going to look for it. The program is going to look for your file in <em>classpath</em>, which is either under <code>/out</code>, or <code>/target</code> folder, the one which contains your compiled classes.</p>\n<p>Get to know you classpath precise by running <code>System.getProperty(&quot;java.class.path&quot;)</code>. It has same structure as your OS <code>$PATH</code> variable.</p>\n<p>In context of location of resource files, <strong>absolute</strong> means <em>relative to the classpath</em>, as if the classpath was <code>/</code> of your filesystem.</p>\n<p>In context of location of resource files, <strong>relative</strong> means <em>relative to the compiled class file</em>.</p>\n<p>When accessing resource files in Java, there are three pairs of options to consider:</p>\n<ol>\n<li>You may access a resource either by using <code>ClassLoader</code> (i.e. <code>this.getClass().getClassLoader()</code>, or <code>MyClass.class.getClassLoader()</code>), or using <code>Class</code> (i.e. <code>MyClass.class</code>, or <code>this.getClass()</code>);</li>\n<li>You may access a resource either by providing an <strong>absolute</strong> or a <strong>relative</strong> path;</li>\n<li>You may either obtain resource's <strong>URL</strong> (i.e. <code>this.getClass().getClassLoader().getResource(&quot;com/example/icon.PNG&quot;)</code>, or <code>com.example.MyClass.class.getResource(&quot;icon.PNG&quot;)</code>), or you may obtain <strong>InputStream</strong> instead (i.e. <code>MyClass.class.getClassLoader().getResourceAsStream(&quot;com/example/icon.PNG&quot;))</code>, or <code>this.getClass().getResourceAsStream(&quot;/com/example/icon.PNG&quot;)</code>)</li>\n</ol>\n<p><strong>YOU CANNOT USE RELATIVE PATHS WITH CLASSLOADER</strong></p>\n<p>Absolute paths (relative to your classpath) start with <code>/</code> when you access it via <strong>Class</strong>, but never start with <code>/</code> when you access it via <strong>ClassLoader</strong>. For example:</p>\n<ul>\n<li><code>this.getClass().getResourceAsStream(&quot;/com/example/icon.PNG&quot;)</code> finds the file;</li>\n<li><code>this.getClass().getClassLoader().getResourceAsStream(&quot;/com/example/icon.PNG&quot;)</code> returns <strong>null</strong></li>\n<li><code>this.getClass().getResourceAsStream(&quot;com/example/icon.PNG&quot;)</code> returns <strong>null</strong></li>\n<li><code>this.getClass().getClassLoader().getResourceAsStream(&quot;com/example/icon.PNG&quot;)</code> finds the file</li>\n<li><code>com.example.package1.MyObj1.class.getResource(&quot;../icon.PNG&quot;)</code> finds the file</li>\n<li><code>com.example.MyClass.class.getResource(&quot;icon.PNG&quot;)</code> finds the file</li>\n<li><code>com.example.MyClass.class.getResource(&quot;com/example/icon.PNG&quot;)</code> returns <strong>null</strong></li>\n</ul>\n<p>Last but not least - it would be enough to have read access rights for the resource file in order to copy it to classpath (to <code>out/production/</code>, or <code>target/</code>, etc.) so even if it is <em>root</em> owned, read-only access rights (<code>chmod 444 icon.PNG</code>) then it still would be enough to build your app. If the resource file is unreadable in build time, your classpath simply won't built at all, so no worries here. If you do make a trick and take away read access rights on the resource which is already on the classpath (i.e. you do <code>chmod 000 /target/Project/com/example/icon.PNG</code>), then the obtained URL still won't be null, but you're going to simply read 0 bytes from it, with no error.</p>\n"}],"owner":{"account_id":5203048,"reputation":71,"user_id":4161854,"display_name":"Nafta"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3088,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1689335754,"creation_date":1527077693,"question_id":50488162,"body_markdown":"My class IntroState.java has the following path:\r\n\r\n    Project/src/GameState/IntroState.java\r\n\r\nMy image is located at:\r\n\r\n    Project/Resources/Images/logo.png\r\n\r\nThe folder Resources is a Source Folder. I use Eclipse oxygen.\r\n\r\ni try to load it with:\r\n\r\n    new BufferedImage image = ImageIO.read(getClass().getResource(&quot;/Images/logo.png&quot;);\r\n\r\nI get a `NullPointerException` when i run it.\r\nThis Code worked fine in an older project, but my Laptop died and i had to reinstall Eclipse and redo my Code, since then it stopped working.\r\nAnyone see the problem?\r\ni tried lots of different paths, i have the feeling that some of my Eclipse settings are wrong maybe.","title":"getClass().getResource doesn&#39;t find image file","body":"<p>My class IntroState.java has the following path:</p>\n\n<pre><code>Project/src/GameState/IntroState.java\n</code></pre>\n\n<p>My image is located at:</p>\n\n<pre><code>Project/Resources/Images/logo.png\n</code></pre>\n\n<p>The folder Resources is a Source Folder. I use Eclipse oxygen.</p>\n\n<p>i try to load it with:</p>\n\n<pre><code>new BufferedImage image = ImageIO.read(getClass().getResource(\"/Images/logo.png\");\n</code></pre>\n\n<p>I get a <code>NullPointerException</code> when i run it.\nThis Code worked fine in an older project, but my Laptop died and i had to reinstall Eclipse and redo my Code, since then it stopped working.\nAnyone see the problem?\ni tried lots of different paths, i have the feeling that some of my Eclipse settings are wrong maybe.</p>\n"},{"tags":["java","swing","jlabel"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1689335587,"post_id":76687403,"comment_id":135202414,"body_markdown":"If you don&#39;t get a decent answer soon, please consider clarifying your question a bit more. Also, for a blinking effect, simply use a Swing Timer.","body":"If you don&#39;t get a decent answer soon, please consider clarifying your question a bit more. Also, for a blinking effect, simply use a Swing Timer."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1689335667,"post_id":76687403,"comment_id":135202434,"body_markdown":"Also, please consider posting a valid [mre] code post with the question, one that does not require classes and images not available to us. Best to use publicly available images, and to get rid of all imports that (again) we don&#39;t have access to. Your MRE code should have a main method, should be small enough to post in its entirety in your question, and we should be able to copy/paste/compile and run it without alteration. The link should explain the details and how it can help both you and us.","body":"Also, please consider posting a valid <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> code post with the question, one that does not require classes and images not available to us. Best to use publicly available images, and to get rid of all imports that (again) we don&#39;t have access to. Your MRE code should have a main method, should be small enough to post in its entirety in your question, and we should be able to copy/paste/compile and run it without alteration. The link should explain the details and how it can help both you and us."},{"owner":{"account_id":11312615,"reputation":3,"user_id":8295350,"display_name":"aksingh785"},"score":0,"creation_date":1689336697,"post_id":76687403,"comment_id":135202641,"body_markdown":"Issue is visible in 2nd image, when the ICON is hidden the text is not fully visible, Its getting wrapped-up. \nExpected is something like in the third image.","body":"Issue is visible in 2nd image, when the ICON is hidden the text is not fully visible, Its getting wrapped-up.  Expected is something like in the third image."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1689336936,"post_id":76687403,"comment_id":135202685,"body_markdown":"So it is *not* word &quot;wrapping&quot; that you&#39;re seeing but rather an ellipses. What are the constraints to the JLabel regarding its size and expandability? What constraints are on the images? Again, please share more details. Again, consider posting code that *we* can run and test. This would be a new small program that reproduces the problem, and again, the [mre](https://stackoverflow.com/help/minimal-reproducible-example) link will explain what this is.","body":"So it is <i>not</i> word &quot;wrapping&quot; that you&#39;re seeing but rather an ellipses. What are the constraints to the JLabel regarding its size and expandability? What constraints are on the images? Again, please share more details. Again, consider posting code that <i>we</i> can run and test. This would be a new small program that reproduces the problem, and again, the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">mre</a> link will explain what this is."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1689337261,"post_id":76687403,"comment_id":135202771,"body_markdown":"Also, the layout managers that are used to hold and display the label will matter, but this will be part of your MRE.","body":"Also, the layout managers that are used to hold and display the label will matter, but this will be part of your MRE."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1689337295,"post_id":76687403,"comment_id":135202779,"body_markdown":"`right.setPreferredSize(right.getPreferredSize());` -- huh?","body":"<code>right.setPreferredSize(right.getPreferredSize());</code> -- huh?"},{"owner":{"account_id":11312615,"reputation":3,"user_id":8295350,"display_name":"aksingh785"},"score":0,"creation_date":1689339147,"post_id":76687403,"comment_id":135203222,"body_markdown":"revalidate(); made it work.","body":"revalidate(); made it work."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1689339743,"post_id":76687403,"comment_id":135203346,"body_markdown":"Great, I&#39;m very glad that you have solved your issue and have things working now, but still, I don&#39;t see how any of us could have provided this answer without your posting a [mre] with the question, without having code that *we* could test.","body":"Great, I&#39;m very glad that you have solved your issue and have things working now, but still, I don&#39;t see how any of us could have provided this answer without your posting a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with the question, without having code that <i>we</i> could test."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689350367,"post_id":76687403,"comment_id":135205931,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":11312615,"reputation":3,"user_id":8295350,"display_name":"aksingh785"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689335390,"creation_date":1689335390,"question_id":76687403,"body_markdown":"When using Icon in Jlabel the text is getting wrapped. \r\n\r\n1. I want to solve two scenarios, small text with a background Icon\r\n2. Bigger text (No wrap) with no ICON in background \r\n\r\nHow to align the text properly when the ICON is no longer required. \r\nAlso It would be lot helpful if someone can throw some ideas on how to blink the background to create an animation effect. \r\n\r\n\r\n[As Expected](https://i.stack.imgur.com/uP5sc.png)\r\n\r\n[text getting wrapped up](https://i.stack.imgur.com/FUZOT.png)\r\n\r\n[expected (Without background)](https://i.stack.imgur.com/gWfCA.png)\r\n\r\n\r\n\r\n``````\r\npackage test.client.swing.machine.view;\r\n\r\nimport java.awt.*;\r\n\r\nimport javax.swing.*;\r\nimport javax.swing.border.Border;\r\nimport javax.swing.border.EmptyBorder;\r\n\r\nimport test.client.swing.machine.view.ImageFactory.BorderType;\r\n\r\nimport static test.client.swing.machine.view.ComponentNameConstants.LABEL_VALUE_BUTTON_LABEL;\r\nimport static test.client.swing.machine.view.ComponentNameConstants.LABEL_VALUE_BUTTON_VALUE;\r\n\r\n\r\npublic class LabelValueButtonDynamic extends SimpleGraphicButton {\r\n\r\n    protected final JLabel left = new JLabel();\r\n    protected JLabel right = new JLabel();\r\n    protected String label;\r\n    protected Object value;\r\n    protected boolean showBackground = true;\r\n\r\n    public LabelValueButtonDynamic(ImageFactory imageFactory, String label, Object value, Border border,\r\n                            String imageNamePattern, BorderType bType, int width) {\r\n        super(imageFactory);\r\n        try {\r\n            loadDynamicImages(imageNamePattern, bType, width);\r\n        } catch (IllegalArgumentException e) {\r\n            loadStandardImages(imageNamePattern);\r\n        }\r\n        setBorder(border);\r\n        init(label, value); //NOSONAR needs to be overrideable\r\n    }\r\n\r\n    public String getLabel() {\r\n        return label;\r\n    }\r\n\r\n    public void setLabel(String label) {\r\n        this.label = label;\r\n        left.setText(label);\r\n    }\r\n\r\n    public Object getValue() {\r\n        return value;\r\n    }\r\n\r\n    public void setValue(Object value) {\r\n        this.value = value;\r\n        right.setText(String.valueOf(value));\r\n    }\r\n\r\n    @Override\r\n    public void setForeground(Color c) {\r\n        super.setForeground(c);\r\n        if (left != null) {\r\n            left.setForeground(c);\r\n        }\r\n        if (right != null) {\r\n            right.setForeground(Color.RED);\r\n        }\r\n        // repaint anscheinend nicht n&#246;tig\r\n        // repaint();\r\n    }\r\n\r\n    @Override\r\n    public void setFont(Font f) {\r\n        super.setFont(f);\r\n        if (left != null) {\r\n            left.setFont(f);\r\n        }\r\n        if (right != null) {\r\n            right.setFont(f);\r\n        }\r\n        // repaint anscheinend nicht n&#246;tig\r\n        //repaint();\r\n    }\r\n\r\n    @Override\r\n    public Font getFont() {\r\n        return left != null ? left.getFont() : super.getFont();\r\n    }\r\n\r\n    protected void init(String label, Object value) {\r\n\r\n        showBackground = true;\r\n        setLabel(label);\r\n        setValue(value);\r\n        setLayout(new BoxLayout(this, BoxLayout.LINE_AXIS));\r\n        if (getComponentOrientation().isHorizontal()) {\r\n            //\t\t\tadd(Box.createHorizontalStrut(5));\r\n            add(left);\r\n            add(Box.createGlue());\r\n            add(right);\r\n            //\t\t\tadd(Box.createHorizontalStrut(15));\r\n\r\n            left.setAlignmentY(0.5f); // XXX optimalen Wert f&#252;r AlignmentY finden (0.5 ist zu weit oben)\r\n            right.setAlignmentY(0.5f);\r\n            right.setIcon(new ImageIcon(loadStandardImage(&quot;btn_bonus_radio_button_unselected.png&quot;,\r\n                    null)));\r\n            right.setHorizontalAlignment(0);\r\n            right.setHorizontalTextPosition(0);\r\n        } else {\r\n            //\t\t\tadd(Box.createVerticalStrut(5));\r\n            add(left);\r\n            add(Box.createVerticalGlue());\r\n            add(right);\r\n            //\t\t\tadd(Box.createVerticalStrut(15));\r\n        }\r\n        left.setFont(Constants.getFontBold());\r\n        left.setName(LABEL_VALUE_BUTTON_LABEL);\r\n        right.setFont(Constants.getFontBoldMedium());\r\n        right.setName(LABEL_VALUE_BUTTON_VALUE);\r\n        right.setPreferredSize(right.getPreferredSize());\r\n    }\r\n\r\n    public void showCircle(boolean show){\r\n        if(show){\r\n            right.setIcon(new ImageIcon(loadStandardImage(&quot;btn_bonus_radio_button_unselected.png&quot;,\r\n                    null)));\r\n            right.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);\r\n            right.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);\r\n        }\r\n        else{\r\n            right.setHorizontalAlignment(LEFT);\r\n            right.setHorizontalTextPosition(LEFT);\r\n            right.setIcon(null);\r\n        }\r\n        repaint();\r\n    }\r\n}\r\n\r\n``````\r\n","title":"Jlabel text alignment not working when used with ICON","body":"<p>When using Icon in Jlabel the text is getting wrapped.</p>\n<ol>\n<li>I want to solve two scenarios, small text with a background Icon</li>\n<li>Bigger text (No wrap) with no ICON in background</li>\n</ol>\n<p>How to align the text properly when the ICON is no longer required.\nAlso It would be lot helpful if someone can throw some ideas on how to blink the background to create an animation effect.</p>\n<p><a href=\"https://i.stack.imgur.com/uP5sc.png\" rel=\"nofollow noreferrer\">As Expected</a></p>\n<p><a href=\"https://i.stack.imgur.com/FUZOT.png\" rel=\"nofollow noreferrer\">text getting wrapped up</a></p>\n<p><a href=\"https://i.stack.imgur.com/gWfCA.png\" rel=\"nofollow noreferrer\">expected (Without background)</a></p>\n<pre><code>package test.client.swing.machine.view;\n\nimport java.awt.*;\n\nimport javax.swing.*;\nimport javax.swing.border.Border;\nimport javax.swing.border.EmptyBorder;\n\nimport test.client.swing.machine.view.ImageFactory.BorderType;\n\nimport static test.client.swing.machine.view.ComponentNameConstants.LABEL_VALUE_BUTTON_LABEL;\nimport static test.client.swing.machine.view.ComponentNameConstants.LABEL_VALUE_BUTTON_VALUE;\n\n\npublic class LabelValueButtonDynamic extends SimpleGraphicButton {\n\n    protected final JLabel left = new JLabel();\n    protected JLabel right = new JLabel();\n    protected String label;\n    protected Object value;\n    protected boolean showBackground = true;\n\n    public LabelValueButtonDynamic(ImageFactory imageFactory, String label, Object value, Border border,\n                            String imageNamePattern, BorderType bType, int width) {\n        super(imageFactory);\n        try {\n            loadDynamicImages(imageNamePattern, bType, width);\n        } catch (IllegalArgumentException e) {\n            loadStandardImages(imageNamePattern);\n        }\n        setBorder(border);\n        init(label, value); //NOSONAR needs to be overrideable\n    }\n\n    public String getLabel() {\n        return label;\n    }\n\n    public void setLabel(String label) {\n        this.label = label;\n        left.setText(label);\n    }\n\n    public Object getValue() {\n        return value;\n    }\n\n    public void setValue(Object value) {\n        this.value = value;\n        right.setText(String.valueOf(value));\n    }\n\n    @Override\n    public void setForeground(Color c) {\n        super.setForeground(c);\n        if (left != null) {\n            left.setForeground(c);\n        }\n        if (right != null) {\n            right.setForeground(Color.RED);\n        }\n        // repaint anscheinend nicht nötig\n        // repaint();\n    }\n\n    @Override\n    public void setFont(Font f) {\n        super.setFont(f);\n        if (left != null) {\n            left.setFont(f);\n        }\n        if (right != null) {\n            right.setFont(f);\n        }\n        // repaint anscheinend nicht nötig\n        //repaint();\n    }\n\n    @Override\n    public Font getFont() {\n        return left != null ? left.getFont() : super.getFont();\n    }\n\n    protected void init(String label, Object value) {\n\n        showBackground = true;\n        setLabel(label);\n        setValue(value);\n        setLayout(new BoxLayout(this, BoxLayout.LINE_AXIS));\n        if (getComponentOrientation().isHorizontal()) {\n            //          add(Box.createHorizontalStrut(5));\n            add(left);\n            add(Box.createGlue());\n            add(right);\n            //          add(Box.createHorizontalStrut(15));\n\n            left.setAlignmentY(0.5f); // XXX optimalen Wert für AlignmentY finden (0.5 ist zu weit oben)\n            right.setAlignmentY(0.5f);\n            right.setIcon(new ImageIcon(loadStandardImage(&quot;btn_bonus_radio_button_unselected.png&quot;,\n                    null)));\n            right.setHorizontalAlignment(0);\n            right.setHorizontalTextPosition(0);\n        } else {\n            //          add(Box.createVerticalStrut(5));\n            add(left);\n            add(Box.createVerticalGlue());\n            add(right);\n            //          add(Box.createVerticalStrut(15));\n        }\n        left.setFont(Constants.getFontBold());\n        left.setName(LABEL_VALUE_BUTTON_LABEL);\n        right.setFont(Constants.getFontBoldMedium());\n        right.setName(LABEL_VALUE_BUTTON_VALUE);\n        right.setPreferredSize(right.getPreferredSize());\n    }\n\n    public void showCircle(boolean show){\n        if(show){\n            right.setIcon(new ImageIcon(loadStandardImage(&quot;btn_bonus_radio_button_unselected.png&quot;,\n                    null)));\n            right.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);\n            right.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);\n        }\n        else{\n            right.setHorizontalAlignment(LEFT);\n            right.setHorizontalTextPosition(LEFT);\n            right.setIcon(null);\n        }\n        repaint();\n    }\n}\n\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9684,"page":308,"page_size":100}
