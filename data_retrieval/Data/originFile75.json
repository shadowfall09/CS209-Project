{"items":[{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":0,"creation_date":1699469194,"post_id":77447704,"comment_id":136536820,"body_markdown":"Ultimately, I believe that your model is incorrect.  Does it make sense that every Child is a Parent?   Every child HAS a parent, but not every child IS A parent.  Read up on favoring composition over inheritance.","body":"Ultimately, I believe that your model is incorrect.  Does it make sense that every Child is a Parent?   Every child HAS a parent, but not every child IS A parent.  Read up on favoring composition over inheritance."},{"owner":{"account_id":397984,"reputation":537,"user_id":762421,"accept_rate":36,"display_name":"user762421"},"score":0,"creation_date":1699470758,"post_id":77447704,"comment_id":136537097,"body_markdown":"@lane.maxwell - In my use case, Parent class has &#39;X&#39; behavior and Child class has &#39;X+Y&#39; behavior. Based on the type of request I need to decide if &#39;X&#39; or &#39;X+Y&#39; . Does it not make sense to use inheritance in such a scenario?","body":"@lane.maxwell - In my use case, Parent class has &#39;X&#39; behavior and Child class has &#39;X+Y&#39; behavior. Based on the type of request I need to decide if &#39;X&#39; or &#39;X+Y&#39; . Does it not make sense to use inheritance in such a scenario?"},{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":0,"creation_date":1699475735,"post_id":77447704,"comment_id":136537967,"body_markdown":"I would not use inheritance for this; I would use composition.  There isn&#39;t enough space in these comments to elaborate on why composition is a better approach, and it&#39;s off-topic for the question, so it doesn&#39;t warrant an answer, but take some time exploring Google for `composition over inheritance`.  Define an interface that contains the behavior you want from the Parent, have the Parent implement that interface, and inject that Interface into your Child.","body":"I would not use inheritance for this; I would use composition.  There isn&#39;t enough space in these comments to elaborate on why composition is a better approach, and it&#39;s off-topic for the question, so it doesn&#39;t warrant an answer, but take some time exploring Google for <code>composition over inheritance</code>.  Define an interface that contains the behavior you want from the Parent, have the Parent implement that interface, and inject that Interface into your Child."}],"answers":[{"tags":[],"owner":{"account_id":29857313,"reputation":26,"user_id":22881850,"display_name":"Megha Dogra"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1699464755,"creation_date":1699464755,"answer_id":77447751,"question_id":77447704,"body_markdown":"Here you can see you have two beans of same type so spring is unable to differntaiate which one to inject first . As per solution you said is right we can use @primary annotation as well to solve this issue. By tht spring will be able to undersatnd which one is primary or which one should be injected first . or we can use @Autowire under @qualifer annotaion to specify which bean name you want to inject.","title":"Spring @Component annotation on both Parent and Child class","body":"<p>Here you can see you have two beans of same type so spring is unable to differntaiate which one to inject first . As per solution you said is right we can use @primary annotation as well to solve this issue. By tht spring will be able to undersatnd which one is primary or which one should be injected first . or we can use @Autowire under @qualifer annotaion to specify which bean name you want to inject.</p>\n"},{"comments":[{"owner":{"account_id":397984,"reputation":537,"user_id":762421,"accept_rate":36,"display_name":"user762421"},"score":0,"creation_date":1699465275,"post_id":77447752,"comment_id":136536138,"body_markdown":"The Parent class is a concrete class and it&#39;s instance is already being used in the application. Edited the question to add this info.","body":"The Parent class is a concrete class and it&#39;s instance is already being used in the application. Edited the question to add this info."},{"owner":{"account_id":7780793,"reputation":25,"user_id":5887268,"display_name":"Daniel Jabłoński"},"score":0,"creation_date":1699465927,"post_id":77447752,"comment_id":136536259,"body_markdown":"add @Profile(&quot;profileName&quot;) to Child class. and use Parent or Child (depending on the profile).  It is not possible to use two beans with the same name.","body":"add @Profile(&quot;profileName&quot;) to Child class. and use Parent or Child (depending on the profile).  It is not possible to use two beans with the same name."}],"tags":[],"owner":{"account_id":7780793,"reputation":25,"user_id":5887268,"display_name":"Daniel Jabłoński"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699466124,"creation_date":1699464758,"answer_id":77447752,"question_id":77447704,"body_markdown":"make Parent class abstract:\r\n\r\n    @Component\r\n    public abstract class Parent {}\r\n    \r\n    @Component\r\n    @Profile(&quot;profileOneName&quot;)\r\n    public class ChildProfileOne extends Parent{}\r\n    \r\n    @Component\r\n    @Profile(&quot;profileTwoName&quot;)\r\n    public class ChildProfileTwo extends Parent{}","title":"Spring @Component annotation on both Parent and Child class","body":"<p>make Parent class abstract:</p>\n<pre><code>@Component\npublic abstract class Parent {}\n\n@Component\n@Profile(&quot;profileOneName&quot;)\npublic class ChildProfileOne extends Parent{}\n\n@Component\n@Profile(&quot;profileTwoName&quot;)\npublic class ChildProfileTwo extends Parent{}\n</code></pre>\n"}],"owner":{"account_id":397984,"reputation":537,"user_id":762421,"accept_rate":36,"display_name":"user762421"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77447751,"answer_count":2,"score":0,"last_activity_date":1699466124,"creation_date":1699464194,"question_id":77447704,"body_markdown":"I am working on a spring boot application where I have a Parent and a Child class where Child extends Parent class. I am using `@Component` annotation for both the classes so as to be able to manage their instances by Spring. \r\n    \r\n    @Component\r\n    public class Parent {}\r\n\r\n    @Component\r\n    public class Child extends Parent{}\r\n\r\nThis results in a `NoUniqueBeanDefinitionException` \r\n`org.springframework.beans.factory.NoUniqueBeanDefinitionException: No qualifying bean of type &#39;com.example.Parent&#39; available: expected single matching bean but found 2: Parent,Child`\r\n\r\nUsing `@Primary` on the Parent class solves the issue but am wondering what is the best practice or recommended way to follow in the above scenario?\r\n\r\nEdit: The Parent class already exists and is being injected in multiple classes already using `@Resource(type = Parent.class)`. I am adding the Child class newly and would prefer to not modify the existing code as much as possible.","title":"Spring @Component annotation on both Parent and Child class","body":"<p>I am working on a spring boot application where I have a Parent and a Child class where Child extends Parent class. I am using <code>@Component</code> annotation for both the classes so as to be able to manage their instances by Spring.</p>\n<pre><code>@Component\npublic class Parent {}\n\n@Component\npublic class Child extends Parent{}\n</code></pre>\n<p>This results in a <code>NoUniqueBeanDefinitionException</code>\n<code>org.springframework.beans.factory.NoUniqueBeanDefinitionException: No qualifying bean of type 'com.example.Parent' available: expected single matching bean but found 2: Parent,Child</code></p>\n<p>Using <code>@Primary</code> on the Parent class solves the issue but am wondering what is the best practice or recommended way to follow in the above scenario?</p>\n<p>Edit: The Parent class already exists and is being injected in multiple classes already using <code>@Resource(type = Parent.class)</code>. I am adding the Child class newly and would prefer to not modify the existing code as much as possible.</p>\n"},{"tags":["java","hibernate","session","transactions","entitymanager"],"comments":[{"owner":{"account_id":974448,"reputation":3435,"user_id":2042457,"accept_rate":56,"display_name":"aksappy"},"score":1,"creation_date":1699467857,"post_id":77447807,"comment_id":136536591,"body_markdown":"Have you tried batch inserts instead of writing in parallel?","body":"Have you tried batch inserts instead of writing in parallel?"},{"owner":{"account_id":29709751,"reputation":11,"user_id":22769710,"display_name":"sensen ol"},"score":0,"creation_date":1699481518,"post_id":77447807,"comment_id":136538943,"body_markdown":"No, I will give a try. But how can I tell the entityManager which is injected by annotation to make batch inserts?","body":"No, I will give a try. But how can I tell the entityManager which is injected by annotation to make batch inserts?"},{"owner":{"account_id":974448,"reputation":3435,"user_id":2042457,"accept_rate":56,"display_name":"aksappy"},"score":0,"creation_date":1699556820,"post_id":77447807,"comment_id":136550442,"body_markdown":"You are probably looking for this tutorial - https://www.baeldung.com/jpa-hibernate-batch-insert-update.","body":"You are probably looking for this tutorial - <a href=\"https://www.baeldung.com/jpa-hibernate-batch-insert-update\" rel=\"nofollow noreferrer\">baeldung.com/jpa-hibernate-batch-insert-update</a>."}],"owner":{"account_id":29709751,"reputation":11,"user_id":22769710,"display_name":"sensen ol"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1699465561,"creation_date":1699465233,"question_id":77447807,"body_markdown":"I want to write parallel into database in J2EE.\r\nIn DB, there are some triggers fired which checks data consistency, that&#39;s why I want to run it parallel.\r\n\r\nImportant is that same transaction is used, because in case of an error of any thread the transaction should be rollbacked and no partially data is persisted.\r\n\r\n1. This is not working parallel. Maybe using of parallel multiple entity managers inside a transaction is not possible?\r\n\r\n        @Stateless\r\n        @Local\r\n        @TransactionManagement(TransactionManagementType.BEAN)\r\n        public class ParallelBean {\r\n        \r\n        private static ThreadPoolExecutor executor;\r\n        \r\n        @Resource\r\n        private SessionContext sessionContext;\r\n        \r\n        private ThreadLocal&lt;EntityManager&gt; threadLocal = new ThreadLocal&lt;EntityManager&gt;();\r\n        \r\n        @PersistenceUnit(unitName = &quot;BASE_&quot;)\r\n        private EntityManagerFactory entityManagerFactory;\r\n        \r\n        public void writeParallel() {\r\n        \t\tUserTransaction beginTransaction = sessionContext.getUserTransaction();\r\n        \t\tbeginTransaction.begin();\r\n        \t\tMap&lt;Integer, EntityManager&gt; map = new HashMap&lt;&gt;();\r\n        \t\tfor (int i = 0; i &lt; 6; i++) {\r\n        \t\t\tEntityManager em = entityManagerFactory.createEntityManager();\r\n        \t\t\tem.joinTransaction();\r\n        \t\t\tmap.put(i, em);\r\n        \t\t}\r\n        \t\tfinal List&lt;Future&lt;?&gt;&gt; futureElements = new ArrayList&lt;&gt;();\r\n        \t\tfor (int i = 0; i &lt; 6; i++) {\r\n        \t\t\tfinal int a = i;\r\n        \t\t\tfutureElements.add(executor.submit(() -&gt; {\r\n        \t\t\t\tEntityManager entityManager = map.get(a);\r\n        \t\t\t\tthreadLocal.set(entityManager);\r\n        \t\t\t    createEntity();\r\n        \t\t\t}));\r\n        \t\t}\r\n        \r\n        \t\treadResults(futureElements);\r\n        \t\tbeginTransaction.commit();\r\n        \t}\r\n        \r\n        \t@Transactional(value = TxType.REQUIRED)\r\n        \tpublic void createEntity() throws NotSupportedException, SystemException {\r\n        \t\tDummyBusinessEntity newEntity = new DummyBusinessEntity ();\r\n        \t\tthreadLocal.get().persist(newEntity);\r\n        \t}\r\n        }\r\n\r\n2. This is working parallel, but makes a commit after each insert which leads in case of error to inconsistent data\r\n\r\n\r\n        @Stateless\r\n        @Local\r\n        @TransactionManagement(TransactionManagementType.BEAN)\r\n        public class ParallelBean {\r\n        \r\n    \tprivate static ThreadPoolExecutor executor;\r\n    \r\n        @Resource\r\n        private SessionContext sessionContext;\r\n    \r\n    \t@PersistenceUnit(unitName = &quot;BASE_&quot;)\r\n    \tprivate EntityManagerFactory entityManagerFactory;\r\n        \r\n        public void writeParallel() {\r\n        \t\tUserTransaction beginTransaction = sessionContext.getUserTransaction();\r\n        \t\tbeginTransaction.begin();\r\n    \r\n        \t\tfinal List&lt;Future&lt;?&gt;&gt; futureElements = new ArrayList&lt;&gt;();\r\n        \t\tfor (int i = 0; i &lt; 6; i++) {\r\n        \t\t\tfinal int a = i;\r\n        \t\t\tfutureElements.add(executor.submit(() -&gt; {\r\n        \t\t\t    createEntity();\r\n        \t\t\t}));\r\n        \t\t}\r\n        \r\n        \t\treadResults(futureElements);\r\n        \t\tbeginTransaction.commit();\r\n        \t}\r\n        \r\n        \t@Transactional(value = TxType.REQUIRED)\r\n        \tpublic void createEntity() throws NotSupportedException, SystemException {\r\n        \t\tDummyBusinessEntity newEntity = new DummyBusinessEntity ();\r\n                dummyDao.persistData(newEntity);\r\n        \t}\r\n        }\r\n    \r\n        @Stateless\r\n        @TransactionAttribute(TransactionAttributeType.REQUIRED)\r\n        @Local\r\n        public class DummyDAO {\r\n        \r\n            @PersistenceContext(unitName = &quot;BASE_&quot;, type = PersistenceContextType.TRANSACTION)\r\n            protected EntityManager em;\r\n        \r\n        \r\n            public void persistData(DummyBE entity) {\r\n                em.persist(entity);\r\n            }\r\n        }\r\n","title":"Multithreading in Hibernate environment does not working","body":"<p>I want to write parallel into database in J2EE.\nIn DB, there are some triggers fired which checks data consistency, that's why I want to run it parallel.</p>\n<p>Important is that same transaction is used, because in case of an error of any thread the transaction should be rollbacked and no partially data is persisted.</p>\n<ol>\n<li><p>This is not working parallel. Maybe using of parallel multiple entity managers inside a transaction is not possible?</p>\n<pre><code> @Stateless\n @Local\n @TransactionManagement(TransactionManagementType.BEAN)\n public class ParallelBean {\n\n private static ThreadPoolExecutor executor;\n\n @Resource\n private SessionContext sessionContext;\n\n private ThreadLocal&lt;EntityManager&gt; threadLocal = new ThreadLocal&lt;EntityManager&gt;();\n\n @PersistenceUnit(unitName = &quot;BASE_&quot;)\n private EntityManagerFactory entityManagerFactory;\n\n public void writeParallel() {\n         UserTransaction beginTransaction = sessionContext.getUserTransaction();\n         beginTransaction.begin();\n         Map&lt;Integer, EntityManager&gt; map = new HashMap&lt;&gt;();\n         for (int i = 0; i &lt; 6; i++) {\n             EntityManager em = entityManagerFactory.createEntityManager();\n             em.joinTransaction();\n             map.put(i, em);\n         }\n         final List&lt;Future&lt;?&gt;&gt; futureElements = new ArrayList&lt;&gt;();\n         for (int i = 0; i &lt; 6; i++) {\n             final int a = i;\n             futureElements.add(executor.submit(() -&gt; {\n                 EntityManager entityManager = map.get(a);\n                 threadLocal.set(entityManager);\n                 createEntity();\n             }));\n         }\n\n         readResults(futureElements);\n         beginTransaction.commit();\n     }\n\n     @Transactional(value = TxType.REQUIRED)\n     public void createEntity() throws NotSupportedException, SystemException {\n         DummyBusinessEntity newEntity = new DummyBusinessEntity ();\n         threadLocal.get().persist(newEntity);\n     }\n }\n</code></pre>\n</li>\n<li><p>This is working parallel, but makes a commit after each insert which leads in case of error to inconsistent data</p>\n<pre><code> @Stateless\n @Local\n @TransactionManagement(TransactionManagementType.BEAN)\n public class ParallelBean {\n\n private static ThreadPoolExecutor executor;\n\n @Resource\n private SessionContext sessionContext;\n\n @PersistenceUnit(unitName = &quot;BASE_&quot;)\n private EntityManagerFactory entityManagerFactory;\n\n public void writeParallel() {\n         UserTransaction beginTransaction = sessionContext.getUserTransaction();\n         beginTransaction.begin();\n\n         final List&lt;Future&lt;?&gt;&gt; futureElements = new ArrayList&lt;&gt;();\n         for (int i = 0; i &lt; 6; i++) {\n             final int a = i;\n             futureElements.add(executor.submit(() -&gt; {\n                 createEntity();\n             }));\n         }\n\n         readResults(futureElements);\n         beginTransaction.commit();\n     }\n\n     @Transactional(value = TxType.REQUIRED)\n     public void createEntity() throws NotSupportedException, SystemException {\n         DummyBusinessEntity newEntity = new DummyBusinessEntity ();\n         dummyDao.persistData(newEntity);\n     }\n }\n\n @Stateless\n @TransactionAttribute(TransactionAttributeType.REQUIRED)\n @Local\n public class DummyDAO {\n\n     @PersistenceContext(unitName = &quot;BASE_&quot;, type = PersistenceContextType.TRANSACTION)\n     protected EntityManager em;\n\n\n     public void persistData(DummyBE entity) {\n         em.persist(entity);\n     }\n }\n</code></pre>\n</li>\n</ol>\n"},{"tags":["java","spring","spring-mvc","spring-boot"],"comments":[{"owner":{"account_id":13318942,"reputation":3000,"user_id":9614331,"display_name":"Avijit Barua"},"score":2,"creation_date":1539856725,"post_id":52871449,"comment_id":92656507,"body_markdown":"Please post your project structure.","body":"Please post your project structure."},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1539856875,"post_id":52871449,"comment_id":92656597,"body_markdown":"Use `@Controller`. `@RestController` will return the response as is.","body":"Use <code>@Controller</code>. <code>@RestController</code> will return the response as is."},{"owner":{"account_id":1885070,"reputation":3672,"user_id":1704453,"accept_rate":88,"display_name":"Vipin CP"},"score":0,"creation_date":1539857503,"post_id":52871449,"comment_id":92656961,"body_markdown":"@RestController is the culprit. :)","body":"@RestController is the culprit. :)"},{"owner":{"account_id":13318942,"reputation":3000,"user_id":9614331,"display_name":"Avijit Barua"},"score":0,"creation_date":1539860232,"post_id":52871449,"comment_id":92658385,"body_markdown":"Pa tison, You told me that you want to use jsp page, that&#39;s why I added new answer","body":"Pa tison, You told me that you want to use jsp page, that&#39;s why I added new answer"}],"answers":[{"comments":[{"owner":{"account_id":14569514,"reputation":3,"user_id":10523213,"display_name":"Pa tison"},"score":0,"creation_date":1539858524,"post_id":52871582,"comment_id":92657455,"body_markdown":"Maybe You have example?","body":"Maybe You have example?"},{"owner":{"account_id":14569514,"reputation":3,"user_id":10523213,"display_name":"Pa tison"},"score":0,"creation_date":1539859346,"post_id":52871582,"comment_id":92657917,"body_markdown":"WebMvcConfigurerAdapter deprecated?","body":"WebMvcConfigurerAdapter deprecated?"}],"tags":[],"owner":{"account_id":5783334,"reputation":360,"user_id":4563347,"display_name":"Mohit Sharma"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699465258,"creation_date":1539856935,"answer_id":52871582,"question_id":52871449,"body_markdown":"Have you configured the Spring MVC?\r\n\r\nUse Spring MVC InternalResourceViewResolver by adding this in spring configuration file:\r\n\r\n    &lt;bean id=&quot;viewResolver&quot;\r\n        class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;\r\n        &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/pages/&quot;&gt;&lt;/property&gt;\r\n        &lt;property name=&quot;suffix&quot; value=&quot;.html&quot;&gt;&lt;/property&gt;\r\n     &lt;/bean&gt;\r\n \r\nand only return &quot;customer&quot; in the controller\r\n\r\nIn your annotation-driven configuration the InternalResourceViewResolver should be set in the configuration class which extends WebMvcConfigurerAdapter like such:\r\n\r\n    @Bean\r\n    public ViewResolver getViewResolver(){\r\n        InternalResourceViewResolver resolver = new InternalResourceViewResolver();\r\n        resolver.setPrefix(&quot;/WEB-INF/pages/&quot;);\r\n        resolver.setSuffix(&quot;.html&quot;);\r\n        return resolver;\r\n    }\r\n\r\n\r\nThese two lines will do all the magic.\r\n \r\n      resolver.setPrefix(&quot;/WEB-INF/pages/&quot;);\r\n      resolver.setSuffix(&quot;.html&quot;);\r\n\r\nwhere it will set the customer to customer.html and your pages should be in /WEB-INF/pages/.\r\n\r\n\r\nIf you are using Spring boot add these two properties in application.properties,\r\n\r\n\r\n      spring.mvc.view.prefix=/view/\r\n      spring.mvc.view.suffix=.jsp\r\n\r\nand also add these two dependencies.\r\n\r\n     &lt;dependency&gt;\r\n    &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\r\n    &lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\r\n     &lt;/dependency&gt;\r\n\r\n     &lt;dependency&gt;\r\n    &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\r\n    &lt;artifactId&gt;thymeleaf-spring4&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nviews named as customer.html placed in src/main/resources/templates.\r\n\r\nFollow this answer to complete understanding.\r\nhttps://stackoverflow.com/questions/36100212/by-default-where-does-spring-boot-expect-views-to-be-stored","title":"Spring return String but must return html","body":"<p>Have you configured the Spring MVC?</p>\n<p>Use Spring MVC InternalResourceViewResolver by adding this in spring configuration file:</p>\n<pre><code>&lt;bean id=&quot;viewResolver&quot;\n    class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;\n    &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/pages/&quot;&gt;&lt;/property&gt;\n    &lt;property name=&quot;suffix&quot; value=&quot;.html&quot;&gt;&lt;/property&gt;\n &lt;/bean&gt;\n</code></pre>\n<p>and only return &quot;customer&quot; in the controller</p>\n<p>In your annotation-driven configuration the InternalResourceViewResolver should be set in the configuration class which extends WebMvcConfigurerAdapter like such:</p>\n<pre><code>@Bean\npublic ViewResolver getViewResolver(){\n    InternalResourceViewResolver resolver = new InternalResourceViewResolver();\n    resolver.setPrefix(&quot;/WEB-INF/pages/&quot;);\n    resolver.setSuffix(&quot;.html&quot;);\n    return resolver;\n}\n</code></pre>\n<p>These two lines will do all the magic.</p>\n<pre><code>  resolver.setPrefix(&quot;/WEB-INF/pages/&quot;);\n  resolver.setSuffix(&quot;.html&quot;);\n</code></pre>\n<p>where it will set the customer to customer.html and your pages should be in /WEB-INF/pages/.</p>\n<p>If you are using Spring boot add these two properties in application.properties,</p>\n<pre><code>  spring.mvc.view.prefix=/view/\n  spring.mvc.view.suffix=.jsp\n</code></pre>\n<p>and also add these two dependencies.</p>\n<pre><code> &lt;dependency&gt;\n&lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n&lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\n &lt;/dependency&gt;\n\n &lt;dependency&gt;\n&lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n&lt;artifactId&gt;thymeleaf-spring4&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>views named as customer.html placed in src/main/resources/templates.</p>\n<p>Follow this answer to complete understanding.\n<a href=\"https://stackoverflow.com/questions/36100212/by-default-where-does-spring-boot-expect-views-to-be-stored\">By default, where does Spring Boot expect views to be stored?</a></p>\n"},{"tags":[],"owner":{"account_id":13318942,"reputation":3000,"user_id":9614331,"display_name":"Avijit Barua"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1539860150,"creation_date":1539860150,"answer_id":52872420,"question_id":52871449,"body_markdown":"If you want to use jsp then create a folder\r\n\r\n    main -&gt; \r\n          webapp -&gt; \r\n            WEB-INF-&gt; \r\n              views\r\nPut your jsp page inside `views` folder. \r\nNow in your `application.properties` add these lines\r\n\r\n    spring.mvc.view.prefix:/WEB-INF/views/\r\n    spring.mvc.view.suffix:.jsp\r\n\r\nNow in your `pom.xml` add these dependenct\r\n\r\n    &lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;jstl&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jstl&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;","title":"Spring return String but must return html","body":"<p>If you want to use jsp then create a folder</p>\n\n<pre><code>main -&gt; \n      webapp -&gt; \n        WEB-INF-&gt; \n          views\n</code></pre>\n\n<p>Put your jsp page inside <code>views</code> folder. \nNow in your <code>application.properties</code> add these lines</p>\n\n<pre><code>spring.mvc.view.prefix:/WEB-INF/views/\nspring.mvc.view.suffix:.jsp\n</code></pre>\n\n<p>Now in your <code>pom.xml</code> add these dependenct</p>\n\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;jstl&lt;/groupId&gt;\n            &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":14569514,"reputation":3,"user_id":10523213,"display_name":"Pa tison"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":720,"favorite_count":0,"down_vote_count":5,"up_vote_count":0,"accepted_answer_id":52872420,"answer_count":2,"score":-5,"last_activity_date":1699465258,"creation_date":1539856431,"question_id":52871449,"body_markdown":"    @RestController\r\n    public class ControllerCustomer {\r\n        @RequestMapping(&quot;customer&quot;)\r\n        public String customer(){\r\n            return &quot;customer&quot;;\r\n        }\r\n\r\nFile customer.html in template folder\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WNdRm.png","title":"Spring return String but must return html","body":"<pre><code>@RestController\npublic class ControllerCustomer {\n    @RequestMapping(\"customer\")\n    public String customer(){\n        return \"customer\";\n    }\n</code></pre>\n\n<p>File customer.html in template folder</p>\n\n<p><a href=\"https://i.stack.imgur.com/WNdRm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WNdRm.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","maven","review","google-my-business-api","google-my-business"],"answers":[{"tags":[],"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699464749,"creation_date":1699464749,"answer_id":77447748,"question_id":77447501,"body_markdown":"I found another way to get the review setting up a request to the Google My Business API using the OkHttp client, but still I am interested to know what is the Maven dependency. Here is what I did:\r\n\r\n\r\n \r\n\r\n    String accessToken = &quot;your_access_token&quot;;\r\n    \r\n            // Construct the URL\r\n            String url = &quot;https://mybusiness.googleapis.com/v4/accounts/&quot; + ACCOUNT_ID + \r\n                         &quot;/locations/&quot; + LOCATION_ID + &quot;/reviews/&quot; + REVIEW_ID;\r\n    \r\n                // Create an instance of OkHttpClient\r\n                OkHttpClient client = new OkHttpClient();\r\n        \r\n                // Build the request, adding the required headers\r\n                Request request = new Request.Builder()\r\n                        .url(url)\r\n                        .addHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + accessToken)\r\n                        .build();\r\n        \r\n                // Execute the request\r\n                try (Response response = client.newCall(request).execute()) {\r\n                    // Check if the response was successful\r\n                    if (response.isSuccessful() &amp;&amp; response.body() != null) {\r\n                        // Extract the response body as a string\r\n                        String responseBody = response.body().string();\r\n                        System.out.println(responseBody);\r\n                    } else {\r\n                        // If the response was not successful, handle it appropriately\r\n                        System.out.println(&quot;Response not successful: &quot; + response);\r\n                    }\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }","title":"What is the maven dependency for Google My Business V4 API in order to read reviews?","body":"<p>I found another way to get the review setting up a request to the Google My Business API using the OkHttp client, but still I am interested to know what is the Maven dependency. Here is what I did:</p>\n<pre><code>String accessToken = &quot;your_access_token&quot;;\n\n        // Construct the URL\n        String url = &quot;https://mybusiness.googleapis.com/v4/accounts/&quot; + ACCOUNT_ID + \n                     &quot;/locations/&quot; + LOCATION_ID + &quot;/reviews/&quot; + REVIEW_ID;\n\n            // Create an instance of OkHttpClient\n            OkHttpClient client = new OkHttpClient();\n    \n            // Build the request, adding the required headers\n            Request request = new Request.Builder()\n                    .url(url)\n                    .addHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + accessToken)\n                    .build();\n    \n            // Execute the request\n            try (Response response = client.newCall(request).execute()) {\n                // Check if the response was successful\n                if (response.isSuccessful() &amp;&amp; response.body() != null) {\n                    // Extract the response body as a string\n                    String responseBody = response.body().string();\n                    System.out.println(responseBody);\n                } else {\n                    // If the response was not successful, handle it appropriately\n                    System.out.println(&quot;Response not successful: &quot; + response);\n                }\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n</code></pre>\n"}],"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699464749,"creation_date":1699462452,"question_id":77447501,"body_markdown":"Using this documentation [accounts.locations.reviews.get][1] I am trying to read the specific review in `JAVA 18`, The problem is that I do not find the Maven Dependency for this Old API that is not deprecated yet.  \r\nBefore I used to do \r\n\r\n    \tMyBusiness.Accounts.Locations.Reviews.Get myReview= mybusiness.accounts().locations().reviews().get(reviewName);\r\n\t\t\tReview response=myReview.execute();\r\n\r\nNow even I am not able to initialise the API! \r\n\r\nI tried to add to pom.xml:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;com.google.apis&lt;/groupId&gt;\r\n    &lt;artifactId&gt;google-api-services-mybusiness&lt;/artifactId&gt;\r\n    &lt;version&gt;v4-rev20211101-1.32.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\nbut it does not accept and there is an error: \r\n\r\n\r\n&gt; Missing artifact com.google.apis:google-api-services-mybusiness:jar:v4-rev20211101-1.32.1\r\n\r\nWhat I can do?\r\n\r\n\r\n  [1]: https://developers.google.com/my-business/reference/rest/v4/accounts.locations.reviews/get\r\n  [2]: https://i.stack.imgur.com/lOqEM.png","title":"What is the maven dependency for Google My Business V4 API in order to read reviews?","body":"<p>Using this documentation <a href=\"https://developers.google.com/my-business/reference/rest/v4/accounts.locations.reviews/get\" rel=\"nofollow noreferrer\">accounts.locations.reviews.get</a> I am trying to read the specific review in <code>JAVA 18</code>, The problem is that I do not find the Maven Dependency for this Old API that is not deprecated yet.<br />\nBefore I used to do</p>\n<pre><code>    MyBusiness.Accounts.Locations.Reviews.Get myReview= mybusiness.accounts().locations().reviews().get(reviewName);\n        Review response=myReview.execute();\n</code></pre>\n<p>Now even I am not able to initialise the API!</p>\n<p>I tried to add to pom.xml:</p>\n<p><a href=\"https://i.stack.imgur.com/lOqEM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lOqEM.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;com.google.apis&lt;/groupId&gt;\n&lt;artifactId&gt;google-api-services-mybusiness&lt;/artifactId&gt;\n&lt;version&gt;v4-rev20211101-1.32.1&lt;/version&gt;\n</code></pre>\n\nbut it does not accept and there is an error: \n<blockquote>\n<p>Missing artifact com.google.apis:google-api-services-mybusiness:jar:v4-rev20211101-1.32.1</p>\n</blockquote>\n<p>What I can do?</p>\n"},{"tags":["java","android","xml","android-fragments"],"comments":[{"owner":{"account_id":3817995,"reputation":4725,"user_id":3166846,"display_name":"Dan Harms"},"score":0,"creation_date":1651962686,"post_id":72156771,"comment_id":127491694,"body_markdown":"Does this answer your question? [java.lang.IllegalStateException: Fragment no longer exists for key f1: index 3](https://stackoverflow.com/questions/11756102/java-lang-illegalstateexception-fragment-no-longer-exists-for-key-f1-index-3)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/11756102/java-lang-illegalstateexception-fragment-no-longer-exists-for-key-f1-index-3\">java.lang.IllegalStateException: Fragment no longer exists for key f1: index 3</a>"},{"owner":{"account_id":1849514,"reputation":193878,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"score":1,"creation_date":1651965418,"post_id":72156771,"comment_id":127492034,"body_markdown":"Your fragment should never, ever, ever, ever be calling `getActivity().setContentView(R.layout.main_fragment);` - it should be returning its own view via `onCreateView` or by using the `Fragment(@LayoutResId)` super constructor. What are you trying to do with that?","body":"Your fragment should never, ever, ever, ever be calling <code>getActivity().setContentView(R.layout.main_fragment);</code> - it should be returning its own view via <code>onCreateView</code> or by using the <code>Fragment(@LayoutResId)</code> super constructor. What are you trying to do with that?"}],"answers":[{"comments":[{"owner":{"account_id":1112634,"reputation":3922,"user_id":1102799,"accept_rate":56,"display_name":"Rethinavel"},"score":0,"creation_date":1699427204,"post_id":74149821,"comment_id":136528464,"body_markdown":"How are you sure that this recommended answer is working?","body":"How are you sure that this recommended answer is working?"}],"tags":[],"owner":{"account_id":11212736,"reputation":341,"user_id":8226352,"display_name":"Rajalakshmi Arumugam"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1666335469,"creation_date":1666335469,"answer_id":74149821,"question_id":72156771,"body_markdown":"There is an issue with viewpager2 detach from recyclerview\r\nhttps://issuetracker.google.com/issues/154751401\r\n\r\nAs per my knowledge two fixes are there:\r\n\r\n 1. add this line in your xml viewpager2 component. \r\n\r\n           &lt;androidx.viewpager2.widget.ViewPager2\r\n            android:layout_below=&quot;@id/tabBar&quot;\r\n            android:id=&quot;@+id/pager&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:layout_weight=&quot;1&quot;\r\n            android:saveEnabled=&quot;false&quot;&gt;\r\n \r\nBut the above one don&#39;t save the current instance, which the fragment will recreate each time it pops back.\r\n\r\n 2. The recommended solution is add the below line on your mainfragment\r\n\r\n         override fun onDestroyView() {\r\n            super.onDestroyView()\r\n            viewPager.adapter = null\r\n        }\r\n\r\n\r\n\r\n","title":"Android ViewPager 2 - Fragment no longer exists for key","body":"<p>There is an issue with viewpager2 detach from recyclerview\n<a href=\"https://issuetracker.google.com/issues/154751401\" rel=\"nofollow noreferrer\">https://issuetracker.google.com/issues/154751401</a></p>\n<p>As per my knowledge two fixes are there:</p>\n<ol>\n<li><p>add this line in your xml viewpager2 component.</p>\n<pre><code>   &lt;androidx.viewpager2.widget.ViewPager2\n    android:layout_below=&quot;@id/tabBar&quot;\n    android:id=&quot;@+id/pager&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:layout_weight=&quot;1&quot;\n    android:saveEnabled=&quot;false&quot;&gt;\n</code></pre>\n</li>\n</ol>\n<p>But the above one don't save the current instance, which the fragment will recreate each time it pops back.</p>\n<ol start=\"2\">\n<li><p>The recommended solution is add the below line on your mainfragment</p>\n<pre><code> override fun onDestroyView() {\n    super.onDestroyView()\n    viewPager.adapter = null\n}\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":16879198,"reputation":509,"user_id":12424975,"display_name":"Samuele B."},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2114,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1699464301,"creation_date":1651962499,"question_id":72156771,"body_markdown":"I have an app in which a main fragment contains a tab layout tied to a ViewPager2 in order to navigate between three different fragments. When I rotate my phone&#39;s screen, the app crashes with this error:\r\n\r\nFragment no longer exists for key f#0: unique id c4576c9c-4bbd-4dc0-a304-b86653ed2820\r\n(complete error stack at the end of the post)\r\n\r\nThis is my setup:\r\n\r\n\r\nactivity_main.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    tools:context=&quot;.MainActivity&quot;\r\n    android:id=&quot;@+id/main_activity_coordinator&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:orientation=&quot;vertical&quot;&gt;\r\n    &lt;com.google.android.material.appbar.AppBarLayout\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;?attr/actionBarSize&quot;\r\n        android:id=&quot;@+id/app_bar&quot;\r\n        android:theme=&quot;@style/Theme.VirtualGymBuddy.AppBarOverlay&quot;\r\n    &gt;\r\n\r\n        &lt;com.google.android.material.appbar.MaterialToolbar\r\n            android:id=&quot;@+id/toolbar&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;?attr/actionBarSize&quot;\r\n            android:background=&quot;?attr/colorPrimary&quot;\r\n            app:title=&quot;@string/app_name&quot; /&gt;\r\n\r\n\r\n    &lt;/com.google.android.material.appbar.AppBarLayout&gt;\r\n\r\n\r\n    &lt;androidx.fragment.app.FragmentContainerView\r\n        android:tag=&quot;MAIN-FRAG&quot;\r\n        android:id=&quot;@+id/nav_host_fragment&quot;\r\n        android:name=&quot;androidx.navigation.fragment.NavHostFragment&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        app:defaultNavHost=&quot;true&quot;\r\n        app:navGraph=&quot;@navigation/nav_graph&quot;\r\n        /&gt;\r\n&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\r\n```\r\n\r\nmain_fragment.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:tag=&quot;MAIN-FRAG&quot;\r\n    android:id=&quot;@+id/main_relative_layout&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    android:paddingTop=&quot;?attr/actionBarSize&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;com.google.android.material.tabs.TabLayout\r\n        android:id=&quot;@+id/tabBar&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        app:tabTextAppearance=&quot;@style/MyTabLayoutStyle&quot;\r\n        &gt;\r\n\r\n        &lt;com.google.android.material.tabs.TabItem\r\n            android:id=&quot;@+id/tab1&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;@string/tab1&quot; /&gt;\r\n\r\n        &lt;com.google.android.material.tabs.TabItem\r\n            android:id=&quot;@+id/tab2&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;@string/tab2&quot; /&gt;\r\n\r\n        &lt;com.google.android.material.tabs.TabItem\r\n            android:id=&quot;@+id/tab3&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;@string/tab3&quot; /&gt;\r\n\r\n    &lt;/com.google.android.material.tabs.TabLayout&gt;\r\n        &lt;androidx.viewpager2.widget.ViewPager2\r\n            android:layout_below=&quot;@id/tabBar&quot;\r\n            android:id=&quot;@+id/pager&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:layout_weight=&quot;1&quot;\r\n        /&gt;\r\n&lt;/RelativeLayout&gt;\r\n```\r\n\r\ncontent_main.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:id=&quot;@+id/content_main_constraint&quot;\r\n    app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;&gt;\r\n\r\n    &lt;fragment\r\n        android:id=&quot;@+id/nav_host_fragment_content_main&quot;\r\n        android:name=&quot;androidx.navigation.fragment.NavHostFragment&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        app:defaultNavHost=&quot;true&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\r\n        app:layout_constraintRight_toRightOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:navGraph=&quot;@navigation/nav_graph&quot;\r\n        /&gt;\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```\r\n\r\nActivityMain.java\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n    private AppBarConfiguration appBarConfiguration;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(null);\r\n        setContentView(R.layout.activity_main);\r\n    }\r\n\r\n\r\n    @Override\r\n    public boolean onCreateOptionsMenu(Menu menu) {\r\n        getMenuInflater().inflate(R.menu.menu_main, menu);\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean onOptionsItemSelected(MenuItem item) {\r\n        int id = item.getItemId();\r\n\r\n        if (id == R.id.action_settings) {\r\n            return true;\r\n        }\r\n\r\n        return super.onOptionsItemSelected(item);\r\n    }\r\n\r\n    @Override\r\n    public boolean onSupportNavigateUp() {\r\n        NavController navController = Navigation.findNavController(this, R.id.nav_host_fragment_content_main);\r\n        return NavigationUI.navigateUp(navController, appBarConfiguration)\r\n                || super.onSupportNavigateUp();\r\n    }\r\n\r\n}\r\n```\r\n\r\nMainFragment.java\r\n```\r\npublic class MainFragment extends Fragment {\r\n    private ViewPager2 viewPager;\r\n    private NavigationAdapter navigationAdapter;\r\n\r\n    @Override\r\n    public void onCreate(@Nullable Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        getActivity().setContentView(R.layout.main_fragment);\r\n        TabLayout tabLayout = getActivity().findViewById(R.id.tabBar);\r\n        int[] tabTexts = {\r\n                R.string.tab_1,\r\n                R.string.tab_2,\r\n                R.string.tab_3\r\n        };\r\n\r\n        // set up view pager and attach mediator to tab layout\r\n        this.viewPager = getActivity().findViewById(R.id.pager);\r\n        this.navigationAdapter = new NavigationAdapter(this);\r\n        viewPager.setAdapter(this.navigationAdapter);\r\n        new TabLayoutMediator(tabLayout, viewPager,\r\n                (tab, position) -&gt; tab.setText(\r\n                        tabTexts[position]\r\n                )\r\n        ).attach();\r\n    }\r\n}\r\n```\r\n\r\nNavigationAdapter.java\r\n```\r\npublic class NavigationAdapter extends FragmentStateAdapter {\r\n\r\n\r\n    public NavigationAdapter(@NonNull FragmentActivity fragmentActivity) {\r\n        super(fragmentActivity);\r\n    }\r\n\r\n    public NavigationAdapter(@NonNull Fragment fragment) {\r\n        super(fragment);\r\n    }\r\n\r\n    public NavigationAdapter(@NonNull FragmentManager fragmentManager, @NonNull Lifecycle lifecycle) {\r\n        super(fragmentManager, lifecycle);\r\n    }\r\n\r\n\r\n    @NonNull\r\n    @Override\r\n    public Fragment createFragment(int position) {\r\n        switch (position) {\r\n            case 0:\r\n                return new Fragment1();\r\n            case 1:\r\n                return new Fragment2();\r\n            case 2:\r\n                return new Fragment3();\r\n\r\n        }\r\n        throw new AssertionError();\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return 3;\r\n    }\r\n}\r\n```\r\n\r\nnav_graph.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;navigation xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:id=&quot;@+id/nav_graph&quot;\r\n    app:startDestination=&quot;@id/MainFragment&quot;&gt;\r\n\r\n    &lt;fragment\r\n        android:id=&quot;@+id/MainFragment&quot;\r\n        android:name=&quot;com.myapp.fragments.MainFragment&quot;\r\n        android:label=&quot;@string/first_fragment_label&quot;\r\n        tools:layout=&quot;@layout/main_fragment&quot; /&gt;\r\n&lt;/navigation&gt;\r\n```\r\n\r\nEverything works fine and I can navigate through the fragments handled by ViewPager2.\r\n\r\nHowever, as soon as I rotate the screen inside of one of those fragments, I get this:\r\n\r\n```\r\n2022-05-08 00:08:12.339 12343-12343/com.myapp E/FragmentManager: Fragment no longer exists for key f#0: unique id c4576c9c-4bbd-4dc0-a304-b86653ed2820\r\n2022-05-08 00:08:12.339 12343-12343/com.myapp E/FragmentManager: Activity state:\r\n2022-05-08 00:08:12.358 12343-12343/com.myapp E/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: com.myapp, PID: 12343\r\n    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.myapp/com.myapp.MainActivity}: java.lang.IllegalStateException: Fragment no longer exists for key f#0: unique id c4576c9c-4bbd-4dc0-a304-b86653ed2820\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2827)\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2902)\r\n        at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4784)\r\n        at android.app.ActivityThread.-wrap18(Unknown Source:0)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1609)\r\n        at android.os.Handler.dispatchMessage(Handler.java:105)\r\n        at android.os.Looper.loop(Looper.java:169)\r\n        at android.app.ActivityThread.main(ActivityThread.java:6578)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:240)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:767)\r\n     Caused by: java.lang.IllegalStateException: Fragment no longer exists for key f#0: unique id c4576c9c-4bbd-4dc0-a304-b86653ed2820\r\n        at androidx.fragment.app.FragmentManager.getFragment(FragmentManager.java:975)\r\n        at androidx.viewpager2.adapter.FragmentStateAdapter.restoreState(FragmentStateAdapter.java:549)\r\n        at androidx.viewpager2.widget.ViewPager2.restorePendingState(ViewPager2.java:350)\r\n        at androidx.viewpager2.widget.ViewPager2.dispatchRestoreInstanceState(ViewPager2.java:375)\r\n        at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:3729)\r\n        at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:3729)\r\n        at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:3729)\r\n        at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:3729)\r\n        at android.view.View.restoreHierarchyState(View.java:17620)\r\n        at com.android.internal.policy.PhoneWindow.restoreHierarchyState(PhoneWindow.java:2130)\r\n        at android.app.Activity.onRestoreInstanceState(Activity.java:1122)\r\n        at android.app.Activity.performRestoreInstanceState(Activity.java:1077)\r\n        at android.app.Instrumentation.callActivityOnRestoreInstanceState(Instrumentation.java:1260)\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2800)\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2902)&#160;\r\n        at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4784)&#160;\r\n        at android.app.ActivityThread.-wrap18(Unknown Source:0)&#160;\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1609)&#160;\r\n        at android.os.Handler.dispatchMessage(Handler.java:105)&#160;\r\n        at android.os.Looper.loop(Looper.java:169)&#160;\r\n        at android.app.ActivityThread.main(ActivityThread.java:6578)&#160;\r\n        at java.lang.reflect.Method.invoke(Native Method)&#160;\r\n        at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:240)&#160;\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:767)&#160;\r\n\r\n```\r\n\r\nWhat&#39;s wrong with my setup?","title":"Android ViewPager 2 - Fragment no longer exists for key","body":"<p>I have an app in which a main fragment contains a tab layout tied to a ViewPager2 in order to navigate between three different fragments. When I rotate my phone's screen, the app crashes with this error:</p>\n<p>Fragment no longer exists for key f#0: unique id c4576c9c-4bbd-4dc0-a304-b86653ed2820\n(complete error stack at the end of the post)</p>\n<p>This is my setup:</p>\n<p>activity_main.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;\n    android:id=&quot;@+id/main_activity_coordinator&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:orientation=&quot;vertical&quot;&gt;\n    &lt;com.google.android.material.appbar.AppBarLayout\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;?attr/actionBarSize&quot;\n        android:id=&quot;@+id/app_bar&quot;\n        android:theme=&quot;@style/Theme.VirtualGymBuddy.AppBarOverlay&quot;\n    &gt;\n\n        &lt;com.google.android.material.appbar.MaterialToolbar\n            android:id=&quot;@+id/toolbar&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;?attr/actionBarSize&quot;\n            android:background=&quot;?attr/colorPrimary&quot;\n            app:title=&quot;@string/app_name&quot; /&gt;\n\n\n    &lt;/com.google.android.material.appbar.AppBarLayout&gt;\n\n\n    &lt;androidx.fragment.app.FragmentContainerView\n        android:tag=&quot;MAIN-FRAG&quot;\n        android:id=&quot;@+id/nav_host_fragment&quot;\n        android:name=&quot;androidx.navigation.fragment.NavHostFragment&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        app:defaultNavHost=&quot;true&quot;\n        app:navGraph=&quot;@navigation/nav_graph&quot;\n        /&gt;\n&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\n</code></pre>\n<p>main_fragment.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:tag=&quot;MAIN-FRAG&quot;\n    android:id=&quot;@+id/main_relative_layout&quot;\n    android:layout_height=&quot;match_parent&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:paddingTop=&quot;?attr/actionBarSize&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;com.google.android.material.tabs.TabLayout\n        android:id=&quot;@+id/tabBar&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:tabTextAppearance=&quot;@style/MyTabLayoutStyle&quot;\n        &gt;\n\n        &lt;com.google.android.material.tabs.TabItem\n            android:id=&quot;@+id/tab1&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;@string/tab1&quot; /&gt;\n\n        &lt;com.google.android.material.tabs.TabItem\n            android:id=&quot;@+id/tab2&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;@string/tab2&quot; /&gt;\n\n        &lt;com.google.android.material.tabs.TabItem\n            android:id=&quot;@+id/tab3&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;@string/tab3&quot; /&gt;\n\n    &lt;/com.google.android.material.tabs.TabLayout&gt;\n        &lt;androidx.viewpager2.widget.ViewPager2\n            android:layout_below=&quot;@id/tabBar&quot;\n            android:id=&quot;@+id/pager&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:layout_weight=&quot;1&quot;\n        /&gt;\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>content_main.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:id=&quot;@+id/content_main_constraint&quot;\n    app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;&gt;\n\n    &lt;fragment\n        android:id=&quot;@+id/nav_host_fragment_content_main&quot;\n        android:name=&quot;androidx.navigation.fragment.NavHostFragment&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        app:defaultNavHost=&quot;true&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\n        app:layout_constraintRight_toRightOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:navGraph=&quot;@navigation/nav_graph&quot;\n        /&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>ActivityMain.java</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n    private AppBarConfiguration appBarConfiguration;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(null);\n        setContentView(R.layout.activity_main);\n    }\n\n\n    @Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n        getMenuInflater().inflate(R.menu.menu_main, menu);\n        return true;\n    }\n\n    @Override\n    public boolean onOptionsItemSelected(MenuItem item) {\n        int id = item.getItemId();\n\n        if (id == R.id.action_settings) {\n            return true;\n        }\n\n        return super.onOptionsItemSelected(item);\n    }\n\n    @Override\n    public boolean onSupportNavigateUp() {\n        NavController navController = Navigation.findNavController(this, R.id.nav_host_fragment_content_main);\n        return NavigationUI.navigateUp(navController, appBarConfiguration)\n                || super.onSupportNavigateUp();\n    }\n\n}\n</code></pre>\n<p>MainFragment.java</p>\n<pre><code>public class MainFragment extends Fragment {\n    private ViewPager2 viewPager;\n    private NavigationAdapter navigationAdapter;\n\n    @Override\n    public void onCreate(@Nullable Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        getActivity().setContentView(R.layout.main_fragment);\n        TabLayout tabLayout = getActivity().findViewById(R.id.tabBar);\n        int[] tabTexts = {\n                R.string.tab_1,\n                R.string.tab_2,\n                R.string.tab_3\n        };\n\n        // set up view pager and attach mediator to tab layout\n        this.viewPager = getActivity().findViewById(R.id.pager);\n        this.navigationAdapter = new NavigationAdapter(this);\n        viewPager.setAdapter(this.navigationAdapter);\n        new TabLayoutMediator(tabLayout, viewPager,\n                (tab, position) -&gt; tab.setText(\n                        tabTexts[position]\n                )\n        ).attach();\n    }\n}\n</code></pre>\n<p>NavigationAdapter.java</p>\n<pre><code>public class NavigationAdapter extends FragmentStateAdapter {\n\n\n    public NavigationAdapter(@NonNull FragmentActivity fragmentActivity) {\n        super(fragmentActivity);\n    }\n\n    public NavigationAdapter(@NonNull Fragment fragment) {\n        super(fragment);\n    }\n\n    public NavigationAdapter(@NonNull FragmentManager fragmentManager, @NonNull Lifecycle lifecycle) {\n        super(fragmentManager, lifecycle);\n    }\n\n\n    @NonNull\n    @Override\n    public Fragment createFragment(int position) {\n        switch (position) {\n            case 0:\n                return new Fragment1();\n            case 1:\n                return new Fragment2();\n            case 2:\n                return new Fragment3();\n\n        }\n        throw new AssertionError();\n    }\n\n    @Override\n    public int getItemCount() {\n        return 3;\n    }\n}\n</code></pre>\n<p>nav_graph.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;navigation xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:id=&quot;@+id/nav_graph&quot;\n    app:startDestination=&quot;@id/MainFragment&quot;&gt;\n\n    &lt;fragment\n        android:id=&quot;@+id/MainFragment&quot;\n        android:name=&quot;com.myapp.fragments.MainFragment&quot;\n        android:label=&quot;@string/first_fragment_label&quot;\n        tools:layout=&quot;@layout/main_fragment&quot; /&gt;\n&lt;/navigation&gt;\n</code></pre>\n<p>Everything works fine and I can navigate through the fragments handled by ViewPager2.</p>\n<p>However, as soon as I rotate the screen inside of one of those fragments, I get this:</p>\n<pre><code>2022-05-08 00:08:12.339 12343-12343/com.myapp E/FragmentManager: Fragment no longer exists for key f#0: unique id c4576c9c-4bbd-4dc0-a304-b86653ed2820\n2022-05-08 00:08:12.339 12343-12343/com.myapp E/FragmentManager: Activity state:\n2022-05-08 00:08:12.358 12343-12343/com.myapp E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.myapp, PID: 12343\n    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.myapp/com.myapp.MainActivity}: java.lang.IllegalStateException: Fragment no longer exists for key f#0: unique id c4576c9c-4bbd-4dc0-a304-b86653ed2820\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2827)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2902)\n        at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4784)\n        at android.app.ActivityThread.-wrap18(Unknown Source:0)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1609)\n        at android.os.Handler.dispatchMessage(Handler.java:105)\n        at android.os.Looper.loop(Looper.java:169)\n        at android.app.ActivityThread.main(ActivityThread.java:6578)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:240)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:767)\n     Caused by: java.lang.IllegalStateException: Fragment no longer exists for key f#0: unique id c4576c9c-4bbd-4dc0-a304-b86653ed2820\n        at androidx.fragment.app.FragmentManager.getFragment(FragmentManager.java:975)\n        at androidx.viewpager2.adapter.FragmentStateAdapter.restoreState(FragmentStateAdapter.java:549)\n        at androidx.viewpager2.widget.ViewPager2.restorePendingState(ViewPager2.java:350)\n        at androidx.viewpager2.widget.ViewPager2.dispatchRestoreInstanceState(ViewPager2.java:375)\n        at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:3729)\n        at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:3729)\n        at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:3729)\n        at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:3729)\n        at android.view.View.restoreHierarchyState(View.java:17620)\n        at com.android.internal.policy.PhoneWindow.restoreHierarchyState(PhoneWindow.java:2130)\n        at android.app.Activity.onRestoreInstanceState(Activity.java:1122)\n        at android.app.Activity.performRestoreInstanceState(Activity.java:1077)\n        at android.app.Instrumentation.callActivityOnRestoreInstanceState(Instrumentation.java:1260)\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2800)\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2902) \n        at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:4784) \n        at android.app.ActivityThread.-wrap18(Unknown Source:0) \n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1609) \n        at android.os.Handler.dispatchMessage(Handler.java:105) \n        at android.os.Looper.loop(Looper.java:169) \n        at android.app.ActivityThread.main(ActivityThread.java:6578) \n        at java.lang.reflect.Method.invoke(Native Method) \n        at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:240) \n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:767) \n\n</code></pre>\n<p>What's wrong with my setup?</p>\n"},{"tags":["java","hibernate","quarkus"],"comments":[{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":0,"creation_date":1699425373,"post_id":77443097,"comment_id":136528228,"body_markdown":"You can still using native query or register a custom function (https://stackoverflow.com/questions/76631693/hibernate-6-quarkush2dialect-registerfunction-removed)","body":"You can still using native query or register a custom function (<a href=\"https://stackoverflow.com/questions/76631693/hibernate-6-quarkush2dialect-registerfunction-removed\" title=\"hibernate 6 quarkush2dialect registerfunction removed\">stackoverflow.com/questions/76631693/&hellip;</a>)"},{"owner":{"account_id":20206980,"reputation":3,"user_id":14821109,"display_name":"Thai Huynh"},"score":0,"creation_date":1699428353,"post_id":77443097,"comment_id":136528617,"body_markdown":"Thanks Luca, \nI think it has the same root cause with the issue: https://stackoverflow.com/questions/76094543/hibernate-reactive-dto-projection-issue","body":"Thanks Luca,  I think it has the same root cause with the issue: <a href=\"https://stackoverflow.com/questions/76094543/hibernate-reactive-dto-projection-issue\" title=\"hibernate reactive dto projection issue\">stackoverflow.com/questions/76094543/&hellip;</a>"},{"owner":{"account_id":20206980,"reputation":3,"user_id":14821109,"display_name":"Thai Huynh"},"score":0,"creation_date":1699428606,"post_id":77443097,"comment_id":136528645,"body_markdown":"I will try to convert it to STRING_AGG() instead of array_agg. Hope it works!","body":"I will try to convert it to STRING_AGG() instead of array_agg. Hope it works!"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1699485474,"post_id":77443097,"comment_id":136539454,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":20206980,"reputation":3,"user_id":14821109,"display_name":"Thai Huynh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699463728,"creation_date":1699463728,"answer_id":77447654,"question_id":77443097,"body_markdown":"Using the Quarkus Reactive PgPool instead of the Panache. \r\n\r\n - The PgPool support **Row** which helps us to convert to several type of PostgreSQL\r\n\r\n&gt; row.getArrayOfStrings(&#39;name of the array_agg column&#39;)\r\n\r\n","title":"How to mapping to Entity an ARRAY_AGG columns with LEFT JOIN","body":"<p>Using the Quarkus Reactive PgPool instead of the Panache.</p>\n<ul>\n<li>The PgPool support <strong>Row</strong> which helps us to convert to several type of PostgreSQL</li>\n</ul>\n<blockquote>\n<p>row.getArrayOfStrings('name of the array_agg column')</p>\n</blockquote>\n"}],"owner":{"account_id":20206980,"reputation":3,"user_id":14821109,"display_name":"Thai Huynh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699463728,"creation_date":1699422470,"question_id":77443097,"body_markdown":"Using the Panache.PanacheEntityBase.find(&quot;query&quot;) to SELECT data from PostgreSQL.\r\n\r\nI do the LEFT JOIN for 2 tables, then use array_agg(&quot;text&quot;) and alias it to a column.\r\n\r\n`SELECT p1_0.unp_status, p1_0.id, array_agg(p2_0.portnumber)`\r\n \r\nThe native SQL is &quot;OK&quot; but when I convert it to Panache syntax and project it to a class.\r\nI got the error: \r\n\r\n    \r\n\r\n&gt; Could not determine appropriate instantiation strategy - no matching\r\n&gt; constructor found and one or more arguments did not define alias for\r\n&gt; bean-injection. \r\n\r\nHow can I mapping that &quot;array_agg&quot; join column to the Entity or ProjectionClass ? \r\n\r\n\r\nI try some ways like : \r\n\r\n- @Transient \r\n- ProjectionClass { \r\n  private Port port;\r\n  private List&lt;String&gt; portnumber;\r\n}`\r\n\r\nBut it still error mapping. \r\n\r\n","title":"How to mapping to Entity an ARRAY_AGG columns with LEFT JOIN","body":"<p>Using the Panache.PanacheEntityBase.find(&quot;query&quot;) to SELECT data from PostgreSQL.</p>\n<p>I do the LEFT JOIN for 2 tables, then use array_agg(&quot;text&quot;) and alias it to a column.</p>\n<p><code>SELECT p1_0.unp_status, p1_0.id, array_agg(p2_0.portnumber)</code></p>\n<p>The native SQL is &quot;OK&quot; but when I convert it to Panache syntax and project it to a class.\nI got the error:</p>\n<blockquote>\n<p>Could not determine appropriate instantiation strategy - no matching\nconstructor found and one or more arguments did not define alias for\nbean-injection.</p>\n</blockquote>\n<p>How can I mapping that &quot;array_agg&quot; join column to the Entity or ProjectionClass ?</p>\n<p>I try some ways like :</p>\n<ul>\n<li>@Transient</li>\n<li>ProjectionClass {\nprivate Port port;\nprivate List portnumber;\n}`</li>\n</ul>\n<p>But it still error mapping.</p>\n"},{"tags":["java","bit"],"answers":[{"tags":[],"owner":{"account_id":2364020,"reputation":4921,"user_id":2070111,"accept_rate":81,"display_name":"Nick"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1539546117,"creation_date":1539546117,"answer_id":52806446,"question_id":52805988,"body_markdown":"The comment would be better expressed as &#39;Get the least significant bit set&#39;. To understand what is going on, you need to examine how negative numbers are represented in binary. The technique is called twos complement and works by starting with the positive representation of the number; you  complement each bit (i.e. 1 -&gt; 0 and 0 -&gt; 1). You then add 1 to this number. In the example of 12:\r\n\r\n    00001100 12\r\n    11110011 complement\r\n    00000001 binary 1\r\n    11110100 add to complement to form twos complement negative\r\n\r\nIf you now AND the original value with the negative, you get\r\n\r\n    00000100 \r\n\r\nwhere the only bit set corresponds to the least significant bit set in the original pattern.","title":"what happens in a &amp;= -a with Java","body":"<p>The comment would be better expressed as 'Get the least significant bit set'. To understand what is going on, you need to examine how negative numbers are represented in binary. The technique is called twos complement and works by starting with the positive representation of the number; you  complement each bit (i.e. 1 -> 0 and 0 -> 1). You then add 1 to this number. In the example of 12:</p>\n\n<pre><code>00001100 12\n11110011 complement\n00000001 binary 1\n11110100 add to complement to form twos complement negative\n</code></pre>\n\n<p>If you now AND the original value with the negative, you get</p>\n\n<pre><code>00000100 \n</code></pre>\n\n<p>where the only bit set corresponds to the least significant bit set in the original pattern.</p>\n"},{"tags":[],"owner":{"account_id":8443019,"reputation":949,"user_id":6334782,"accept_rate":76,"display_name":"otoomey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699463628,"creation_date":1539549390,"answer_id":52806880,"question_id":52805988,"body_markdown":"As the comment said, `diff &amp; -diff` returns the value of the last bit that was set on diff. For example:\r\n\r\n    diff = 14\r\n    .... = 1110 (binary)\r\n    ....     ^ last set bit\r\n    .... 10 is the last set bit\r\n    .... 10 in decimal is 2\r\n\r\nAnother example\r\n\r\n    diff = 24\r\n    .... = 11000 (binary)\r\n    ....    ^ last set bit\r\n    .... 1000 is the last set bit\r\n    .... 1000 in decimal is 8","title":"what happens in a &amp;= -a with Java","body":"<p>As the comment said, <code>diff &amp; -diff</code> returns the value of the last bit that was set on diff. For example:</p>\n<pre><code>diff = 14\n.... = 1110 (binary)\n....     ^ last set bit\n.... 10 is the last set bit\n.... 10 in decimal is 2\n</code></pre>\n<p>Another example</p>\n<pre><code>diff = 24\n.... = 11000 (binary)\n....    ^ last set bit\n.... 1000 is the last set bit\n.... 1000 in decimal is 8\n</code></pre>\n"}],"owner":{"account_id":14542652,"reputation":21,"user_id":10503856,"display_name":"Xueqian Long"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97,"favorite_count":0,"down_vote_count":4,"up_vote_count":2,"accepted_answer_id":52806446,"answer_count":2,"score":-2,"last_activity_date":1699463628,"creation_date":1539542992,"question_id":52805988,"body_markdown":"I see this comment, but don&#39;t understand it. \r\n\r\n Get its last set bit\r\n\r\n    diff &amp;= -diff;\r\n    \r\nI tried \r\n\r\n    int a = 3 &amp; -3; it returns 1.\r\n    int a = 2 &amp; -2; it returns 2.\r\n    int a = 4 &amp; -4; it returns 4.\r\n    int a = 5 &amp; -5; it returns 1.","title":"what happens in a &amp;= -a with Java","body":"<p>I see this comment, but don't understand it. </p>\n\n<p>Get its last set bit</p>\n\n<pre><code>diff &amp;= -diff;\n</code></pre>\n\n<p>I tried </p>\n\n<pre><code>int a = 3 &amp; -3; it returns 1.\nint a = 2 &amp; -2; it returns 2.\nint a = 4 &amp; -4; it returns 4.\nint a = 5 &amp; -5; it returns 1.\n</code></pre>\n"},{"tags":["java","spring-boot","completable-future"],"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1699444874,"post_id":77443564,"comment_id":136531526,"body_markdown":"So your problem is that `getItemA()` can return `null`. The solution is either, to fix the method to not return `null` or fix the caller to not invoke `getPrice()` unconditionally on a reference that might be `null`. In either case, it’s entirely unrelated to the fact that you’re using the code together with `CompletableFuture`. You would have the same problem if you were not using `CompletableFuture`.","body":"So your problem is that <code>getItemA()</code> can return <code>null</code>. The solution is either, to fix the method to not return <code>null</code> or fix the caller to not invoke <code>getPrice()</code> unconditionally on a reference that might be <code>null</code>. In either case, it’s entirely unrelated to the fact that you’re using the code together with <code>CompletableFuture</code>. You would have the same problem if you were not using <code>CompletableFuture</code>."}],"owner":{"account_id":10642398,"reputation":6164,"user_id":7836976,"accept_rate":95,"display_name":"runnerpaul"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699463018,"creation_date":1699428676,"question_id":77443564,"body_markdown":"I have these CompletableFutures:\r\n\r\n```Java\r\nCompletableFuture&lt;Info&gt; futureA =\r\n    createFutureA(multipleItems, startDate, source, context);\r\n\r\nCompletableFuture&lt;PPPInfo&gt; futureB =\r\n    createFutureB(multipleItems, startDate, source, context);\r\n\r\nCompletableFuture&lt;Void&gt; combinedFuture = CompletableFuture.allOf(futureA, futureB);\r\n```\r\n\r\n`futureA` calls `createFutureA` which can be seen below:\r\n\r\n```Java\r\nprivate CompletableFuture&lt;PPPInfo&gt; createFutureA(\r\n      MultipleItems multipleItems,\r\n      String startDate,\r\n      Source source,\r\n      Context context) {\r\n    return CompletableFuture.supplyAsync(\r\n        () -&gt;\r\n            getItemAPrice(\r\n                Double.parseDouble(multiplePrices.getItemA().getPrice()),\r\n                startDate,\r\n                source,\r\n                ITEMA,\r\n                context));\r\n}\r\n```\r\n\r\nThere are some occasions where `multiplePrices.getItemA()` is `null` which causes a `NullPointerException` in `createFutureA` and is an issue when the application then calls `combinedFuture.get()`. How should I handle this if I might have occasions where `futureA` is null?","title":"How to handle if CompletableFuture might be null on occasions","body":"<p>I have these CompletableFutures:</p>\n<pre><code>CompletableFuture&lt;Info&gt; futureA =\n    createFutureA(multipleItems, startDate, source, context);\n\nCompletableFuture&lt;PPPInfo&gt; futureB =\n    createFutureB(multipleItems, startDate, source, context);\n\nCompletableFuture&lt;Void&gt; combinedFuture = CompletableFuture.allOf(futureA, futureB);\n</code></pre>\n<p><code>futureA</code> calls <code>createFutureA</code> which can be seen below:</p>\n<pre><code>private CompletableFuture&lt;PPPInfo&gt; createFutureA(\n      MultipleItems multipleItems,\n      String startDate,\n      Source source,\n      Context context) {\n    return CompletableFuture.supplyAsync(\n        () -&gt;\n            getItemAPrice(\n                Double.parseDouble(multiplePrices.getItemA().getPrice()),\n                startDate,\n                source,\n                ITEMA,\n                context));\n}\n</code></pre>\n<p>There are some occasions where <code>multiplePrices.getItemA()</code> is <code>null</code> which causes a <code>NullPointerException</code> in <code>createFutureA</code> and is an issue when the application then calls <code>combinedFuture.get()</code>. How should I handle this if I might have occasions where <code>futureA</code> is null?</p>\n"},{"tags":["java","request","http-post"],"comments":[{"owner":{"account_id":5277424,"reputation":2670,"user_id":4213803,"accept_rate":80,"display_name":"V&#252;sal"},"score":12,"creation_date":1550593904,"post_id":53389433,"comment_id":96321795,"body_markdown":"There is an open bug related to your question: [Socket Exception from bind to localhost if JVM installed on a share](https://bugs.openjdk.java.net/browse/JDK-8068568)","body":"There is an open bug related to your question: <a href=\"https://bugs.openjdk.java.net/browse/JDK-8068568\" rel=\"nofollow noreferrer\">Socket Exception from bind to localhost if JVM installed on a share</a>"},{"owner":{"account_id":15291410,"reputation":596,"user_id":11032808,"display_name":"Akash Shah"},"score":1,"creation_date":1550663947,"post_id":53389433,"comment_id":96349978,"body_markdown":"this may be related to network issue you can use packet tracer to identify where your error occurs","body":"this may be related to network issue you can use packet tracer to identify where your error occurs"},{"owner":{"account_id":3700031,"reputation":6378,"user_id":3080094,"display_name":"vanOekel"},"score":1,"creation_date":1550755553,"post_id":53389433,"comment_id":96392792,"body_markdown":"There appears to be a [workaround](https://stackoverflow.com/a/35774170/3080094) for the bug that Vusal mentioned. You could test the workaround to see if the bug is related to your issue.","body":"There appears to be a <a href=\"https://stackoverflow.com/a/35774170/3080094\">workaround</a> for the bug that Vusal mentioned. You could test the workaround to see if the bug is related to your issue."},{"owner":{"account_id":4059188,"reputation":103,"user_id":3336161,"display_name":"KUTAY ZORLU"},"score":0,"creation_date":1628272806,"post_id":53389433,"comment_id":121385175,"body_markdown":"Could you please write your ALL command Line  to run this APPLICATION ?","body":"Could you please write your ALL command Line  to run this APPLICATION ?"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691772481,"post_id":53389433,"comment_id":135541695,"body_markdown":"//computername is a thought , file:// is also. Other subtleties with http networking include port number of the server you are calling 8080 or 80 if it is an http server, if not then it is file protocol.","body":"//computername is a thought , file:// is also. Other subtleties with http networking include port number of the server you are calling 8080 or 80 if it is an http server, if not then it is file protocol."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1696566271,"post_id":53389433,"comment_id":136172283,"body_markdown":"Lene get this straight! The &quot;app&quot; is the one on another drive!?   If so then its original conf file probably contains &quot;local settings&quot;  not &quot;mapped drive settings&quot; inside for paths! Or is there something reciprocal in how it gains it&#39;s configuration across machines?","body":"Lene get this straight! The &quot;app&quot; is the one on another drive!?   If so then its original conf file probably contains &quot;local settings&quot;  not &quot;mapped drive settings&quot; inside for paths! Or is there something reciprocal in how it gains it&#39;s configuration across machines?"}],"answers":[{"tags":[],"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664112015,"creation_date":1664110926,"answer_id":73844691,"question_id":53389433,"body_markdown":"Hazard a guess, the server has no binding to a port to listen for network external machine connections in either it&#39;s own configuration files or to its machine port in its OS configuration &quot;network settings&quot; the external calling PC is using, that and with http it should simply be a domain http url called.\r\n\r\n*I best also point that the jdk or jre have a &quot;jconsole&quot; program in their /bin directories can be used to set up network connections for the binaries running the caller JVM.\r\nThis appears To be the problem, your java client program needs a binding to a port to the other machine to connect to it.*\r\n\r\nIf you are calling a file from another machine , use mapped drive syntax of &quot;file://&quot;+&quot;//servername/afolder/file.txt&quot;\r\nThis scheme is for url&#39;s that are mapped drives.","title":"Java.net.SocketException: Invalid argument: create In mapped drive","body":"<p>Hazard a guess, the server has no binding to a port to listen for network external machine connections in either it's own configuration files or to its machine port in its OS configuration &quot;network settings&quot; the external calling PC is using, that and with http it should simply be a domain http url called.</p>\n<p><em>I best also point that the jdk or jre have a &quot;jconsole&quot; program in their /bin directories can be used to set up network connections for the binaries running the caller JVM.\nThis appears To be the problem, your java client program needs a binding to a port to the other machine to connect to it.</em></p>\n<p>If you are calling a file from another machine , use mapped drive syntax of &quot;file://&quot;+&quot;//servername/afolder/file.txt&quot;\nThis scheme is for url's that are mapped drives.</p>\n"},{"tags":[],"owner":{"account_id":25910587,"reputation":1,"user_id":19821948,"display_name":"Ti_alcof"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699462995,"creation_date":1699462995,"answer_id":77447563,"question_id":53389433,"body_markdown":"I had one Socket Exception whan using apache cxf, when it calls ClientImpl but somehow because of Proxy it couldnt pass the value to autenticate.. I started to read it directilly from applicattion.properties using ConfigProvider.getConfig().getValue(&#39;foo.foo&#39;, string.class);","title":"Java.net.SocketException: Invalid argument: create In mapped drive","body":"<p>I had one Socket Exception whan using apache cxf, when it calls ClientImpl but somehow because of Proxy it couldnt pass the value to autenticate.. I started to read it directilly from applicattion.properties using ConfigProvider.getConfig().getValue('foo.foo', string.class);</p>\n"}],"owner":{"account_id":11105849,"reputation":742,"user_id":8153040,"accept_rate":43,"display_name":"kfir"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4300,"favorite_count":0,"down_vote_count":0,"up_vote_count":26,"answer_count":2,"score":26,"last_activity_date":1699462995,"creation_date":1542704395,"question_id":53389433,"body_markdown":"I created a Java application that sends an HTTP POST request to another server.\r\n\r\n- The firewall in the server is off.\r\n- The firewall in the PC is off.\r\n\r\nThe application works perfectly on the PC in the C drive.\r\n\r\nThe application works perfectly on the PC with a local mapping drive.\r\n\r\nBut, when I put my application in a network mapping drive, I get an error:\r\n\r\n&gt; java.net.SocketException: Invalid argument: create in mapped drive\r\n\r\nThis is my code:\r\n\r\n\tHttpClient httpClient = HttpClientBuilder.create().build();\r\n\tHttpPost postRequest = new HttpPost(getUrl());\r\n\tpostRequest.setHeader(AUTHERIZTION, getAuthString());\r\n\r\n\tHttpResponse response = httpClient.execute(postRequest);\r\n\r\nThis is the full error:\r\n\r\n    java.net.SocketException: Invalid argument: create\r\n        at java.net.Socket.createImpl(Unknown Source)\r\n        at java.net.Socket.getImpl(Unknown Source)\r\n        at java.net.Socket.setSoTimeout(Unknown Source)\r\n        at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:119)\r\n        at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:353)\r\n        at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:380)\r\n        at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)\r\n        at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)\r\n        at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)\r\n        at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)\r\n        at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)\r\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)\r\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:107)\r\n        at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:55)\r\n        at rest.RestClient.postGetQuery(RestClient.java:105)\r\n        at frame.ScanJFrame.initProperty(ScanJFrame.java:195)\r\n        at Main.runAction(Main.java:63)\r\n        at Main.main(Main.java:21)\r\n\r\nI tried this:\r\n\r\n    setx _JAVA_OPTIONS -Djava.net.preferIPv4Stack=true\r\n\r\nBut, nothing changed.\r\n\r\nWhat can I do?\r\n","title":"Java.net.SocketException: Invalid argument: create In mapped drive","body":"<p>I created a Java application that sends an HTTP POST request to another server.</p>\n<ul>\n<li>The firewall in the server is off.</li>\n<li>The firewall in the PC is off.</li>\n</ul>\n<p>The application works perfectly on the PC in the C drive.</p>\n<p>The application works perfectly on the PC with a local mapping drive.</p>\n<p>But, when I put my application in a network mapping drive, I get an error:</p>\n<blockquote>\n<p>java.net.SocketException: Invalid argument: create in mapped drive</p>\n</blockquote>\n<p>This is my code:</p>\n<pre><code>HttpClient httpClient = HttpClientBuilder.create().build();\nHttpPost postRequest = new HttpPost(getUrl());\npostRequest.setHeader(AUTHERIZTION, getAuthString());\n\nHttpResponse response = httpClient.execute(postRequest);\n</code></pre>\n<p>This is the full error:</p>\n<pre><code>java.net.SocketException: Invalid argument: create\n    at java.net.Socket.createImpl(Unknown Source)\n    at java.net.Socket.getImpl(Unknown Source)\n    at java.net.Socket.setSoTimeout(Unknown Source)\n    at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:119)\n    at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:353)\n    at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:380)\n    at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)\n    at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)\n    at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)\n    at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)\n    at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:107)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:55)\n    at rest.RestClient.postGetQuery(RestClient.java:105)\n    at frame.ScanJFrame.initProperty(ScanJFrame.java:195)\n    at Main.runAction(Main.java:63)\n    at Main.main(Main.java:21)\n</code></pre>\n<p>I tried this:</p>\n<pre><code>setx _JAVA_OPTIONS -Djava.net.preferIPv4Stack=true\n</code></pre>\n<p>But, nothing changed.</p>\n<p>What can I do?</p>\n"},{"tags":["java","maven","teamcity","jacoco-maven-plugin"],"answers":[{"tags":[],"owner":{"account_id":15574969,"reputation":514,"user_id":11236310,"display_name":"Yamo93"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699462951,"creation_date":1699462951,"answer_id":77447558,"question_id":72173721,"body_markdown":"If you remove the goal from pom.xml, it will no longer require the check:\r\n\r\nRemove this line inside of your Jacoco plugin in the pom.xml file.\r\n`&lt;goal&gt;check&lt;/goal&gt;`","title":"maven plugin jacoco: Coverage checks have not been met. See log for details","body":"<p>If you remove the goal from pom.xml, it will no longer require the check:</p>\n<p>Remove this line inside of your Jacoco plugin in the pom.xml file.\n<code>&lt;goal&gt;check&lt;/goal&gt;</code></p>\n"}],"owner":{"account_id":333852,"reputation":1165,"user_id":659922,"accept_rate":56,"display_name":"J.E.Y"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1261,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699462951,"creation_date":1652106818,"question_id":72173721,"body_markdown":"I understand that if we set \r\n    \r\n    &lt;jacoco.skip.exec&gt;true&lt;/jacoco.skip.exec&gt; \r\n\r\nin pom.xml, it might skip the skip the jacoco checking. However, in my case the tests are conducted on TeamCity, on which we have no control of the environment configuration, therefore it might be that the above flag is not set. As a result, it shows:\r\n\r\n    Failed to execute goal org.jacoco:jacoco-maven-plugin:0.8.8:check (verify) on project xxxx: Coverage checks have not been met. See log for details. \r\n\r\non the failure of two tests which I decorated with annotation @Ignore\r\n\r\nI thought those two tests were skipped but the integration test failed because jacoco still picked them up.\r\n\r\nHow can I do from the code level to disable jacoco checking?\r\n\r\n","title":"maven plugin jacoco: Coverage checks have not been met. See log for details","body":"<p>I understand that if we set</p>\n<pre><code>&lt;jacoco.skip.exec&gt;true&lt;/jacoco.skip.exec&gt; \n</code></pre>\n<p>in pom.xml, it might skip the skip the jacoco checking. However, in my case the tests are conducted on TeamCity, on which we have no control of the environment configuration, therefore it might be that the above flag is not set. As a result, it shows:</p>\n<pre><code>Failed to execute goal org.jacoco:jacoco-maven-plugin:0.8.8:check (verify) on project xxxx: Coverage checks have not been met. See log for details. \n</code></pre>\n<p>on the failure of two tests which I decorated with annotation @Ignore</p>\n<p>I thought those two tests were skipped but the integration test failed because jacoco still picked them up.</p>\n<p>How can I do from the code level to disable jacoco checking?</p>\n"},{"tags":["java","utf-8","spark-java"],"owner":{"account_id":4209265,"reputation":496,"user_id":4368869,"accept_rate":50,"display_name":"Robert S"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699462896,"creation_date":1699294451,"question_id":77433332,"body_markdown":"I wonder if there is a way to configure SparkJava to encode all request data with a character set of my choice regardless of it comes from query parameters or POST data.  I have a number of web app&#39;s that I need to retroactively apply [STIG V-206410][1]. I am looking for the most efficient way and hoping I need not go through every GET/POST/PUT handler and encode data manually with Java string encoding methods.\r\n\r\nI looked at SparkJava&#39;s `before()` filter documentation, but I did not get the impression it is able to modify request data.\r\n\r\n  [1]: https://www.stigviewer.com/stig/web_server_security_requirements_guide/2022-09-20/finding/V-206410","title":"Can SparkJava encoding all request data as UTF-8 by default?","body":"<p>I wonder if there is a way to configure SparkJava to encode all request data with a character set of my choice regardless of it comes from query parameters or POST data.  I have a number of web app's that I need to retroactively apply <a href=\"https://www.stigviewer.com/stig/web_server_security_requirements_guide/2022-09-20/finding/V-206410\" rel=\"nofollow noreferrer\">STIG V-206410</a>. I am looking for the most efficient way and hoping I need not go through every GET/POST/PUT handler and encode data manually with Java string encoding methods.</p>\n<p>I looked at SparkJava's <code>before()</code> filter documentation, but I did not get the impression it is able to modify request data.</p>\n"},{"tags":["java","spring","spring-boot","maven"],"comments":[{"owner":{"account_id":10846480,"reputation":8794,"user_id":7975771,"accept_rate":12,"display_name":"varman"},"score":0,"creation_date":1588138860,"post_id":61494901,"comment_id":108781262,"body_markdown":"can you show us your service implementation?","body":"can you show us your service implementation?"},{"owner":{"display_name":"user9065831"},"score":0,"creation_date":1588139791,"post_id":61494901,"comment_id":108781568,"body_markdown":"@Sparsh, error is for ‘SpeakerController’, you are posting code for ‘SessionController’.. speaker vs session.. please revise your question","body":"@Sparsh, error is for ‘SpeakerController’, you are posting code for ‘SessionController’.. speaker vs session.. please revise your question"},{"owner":{"account_id":17482058,"reputation":1832,"user_id":12675847,"display_name":"user1234SI."},"score":2,"creation_date":1588141350,"post_id":61494901,"comment_id":108782106,"body_markdown":"If you&#39;re following an online course where you&#39;ve been told to use both `@RestController` and `@Component` I would suggest you to look for another one, or if this isn&#39;t the case, you should use only `@RestController`.Anyway this will not solve your problem, please revise your question like @Aman Garg said above.","body":"If you&#39;re following an online course where you&#39;ve been told to use both <code>@RestController</code> and <code>@Component</code> I would suggest you to look for another one, or if this isn&#39;t the case, you should use only <code>@RestController</code>.Anyway this will not solve your problem, please revise your question like @Aman Garg said above."},{"owner":{"account_id":16476408,"reputation":67,"user_id":11904256,"display_name":"Sparsh Verma"},"score":0,"creation_date":1588144741,"post_id":61494901,"comment_id":108783517,"body_markdown":"I don&#39;t implement any service @varman","body":"I don&#39;t implement any service @varman"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1588144928,"post_id":61494901,"comment_id":108783611,"body_markdown":"I highly doubt that that is actually your `pom.xml`. in your code you are using Spring Data JPA, but there is nothing in your `pom.xml` that is including those dependencies. So what you are showing here is probably not what you are currently using!","body":"I highly doubt that that is actually your <code>pom.xml</code>. in your code you are using Spring Data JPA, but there is nothing in your <code>pom.xml</code> that is including those dependencies. So what you are showing here is probably not what you are currently using!"},{"owner":{"account_id":16476408,"reputation":67,"user_id":11904256,"display_name":"Sparsh Verma"},"score":0,"creation_date":1588145266,"post_id":61494901,"comment_id":108783773,"body_markdown":"I am using spring-data-JPA.jar file by adding it into modules @M.Deinum","body":"I am using spring-data-JPA.jar file by adding it into modules @M.Deinum"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1588145973,"post_id":61494901,"comment_id":108784109,"body_markdown":"It should be part of your dependencies, not in your modules.","body":"It should be part of your dependencies, not in your modules."},{"owner":{"account_id":9150413,"reputation":4837,"user_id":6805190,"display_name":"dassum"},"score":1,"creation_date":1588185070,"post_id":61494901,"comment_id":108806052,"body_markdown":"Please add the jpa dependency to your pom.xml and try &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;version&gt;2.2.6.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;","body":"Please add the jpa dependency to your pom.xml and try &lt;dependency&gt;     &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;     &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;     &lt;version&gt;2.2.6.RELEASE&lt;/version&gt; &lt;/dependency&gt;"}],"answers":[{"tags":[],"owner":{"account_id":1314450,"reputation":320,"user_id":1261671,"accept_rate":25,"display_name":"tom808"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1605741514,"creation_date":1605741514,"answer_id":64902935,"question_id":61494901,"body_markdown":"Looks like you have run into the same issue that I have following Dan Bunker&#39;s spring boot Pluralsight course?\r\n\r\nLooks like the course is a little out of date now and the latest version of spring boot doesn&#39;t appear to work with the project setup. Specifically I think it&#39;s a problem with how we have defined the JpaRespositories such that they cannot be auto wired.\r\n\r\nObviously if we are both following a beginners course it&#39;s a little tricky to establish the root cause. \r\n\r\nI downgraded my project to 2.1.9.RELEASE in pom.xml:\r\n\r\n     &lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.1.9.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\r\nAnd it worked! Good luck.","title":"sessionRepository in com.sparsh.conferencedemo.controllers.SessionController required a bean of type that could not be found","body":"<p>Looks like you have run into the same issue that I have following Dan Bunker's spring boot Pluralsight course?</p>\n<p>Looks like the course is a little out of date now and the latest version of spring boot doesn't appear to work with the project setup. Specifically I think it's a problem with how we have defined the JpaRespositories such that they cannot be auto wired.</p>\n<p>Obviously if we are both following a beginners course it's a little tricky to establish the root cause.</p>\n<p>I downgraded my project to 2.1.9.RELEASE in pom.xml:</p>\n<pre><code> &lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.1.9.RELEASE&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n</code></pre>\n<p>And it worked! Good luck.</p>\n"},{"tags":[],"owner":{"account_id":4272954,"reputation":1,"user_id":3494344,"display_name":"user3494344"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699462000,"creation_date":1699462000,"answer_id":77447454,"question_id":61494901,"body_markdown":"This is the problem from Dan Bunker&#39;s spring boot Pluralsight course &quot;Spring Framework 2: Creating Your First Spring Boot Application&quot;.\r\nFor newer Spring Boot versions (I am using 2.7.17) you need to comment out Autowired from both SessionsController and SpeakersController:\r\n\r\n    public class SessionsController {\r\n        //@Autowired\r\n        private SessionRepository sessionRepository;\r\n    ...\r\n    \r\n    public class SpeakersController {\r\n        //@Autowired\r\n        private SpeakerRepository speakerRepository;\r\n\r\n","title":"sessionRepository in com.sparsh.conferencedemo.controllers.SessionController required a bean of type that could not be found","body":"<p>This is the problem from Dan Bunker's spring boot Pluralsight course &quot;Spring Framework 2: Creating Your First Spring Boot Application&quot;.\nFor newer Spring Boot versions (I am using 2.7.17) you need to comment out Autowired from both SessionsController and SpeakersController:</p>\n<pre><code>public class SessionsController {\n    //@Autowired\n    private SessionRepository sessionRepository;\n...\n\npublic class SpeakersController {\n    //@Autowired\n    private SpeakerRepository speakerRepository;\n</code></pre>\n"}],"owner":{"account_id":16476408,"reputation":67,"user_id":11904256,"display_name":"Sparsh Verma"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":261,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":64902935,"answer_count":2,"score":0,"last_activity_date":1699462000,"creation_date":1588138248,"question_id":61494901,"body_markdown":"I was trying to create a simple CRUD spring boot application after watching an online course. But when i run the application it shown an error &quot;Field speakerRepository in com.sparsh.conferencedemo.controllers.SpeakerController required a bean of type &#39;com.sparsh.conferencedemo.repositories.SpeakerRepository&#39; that could not be found.&quot; I don&#39;t understand what I am doing wrong. Also I am new to the spring boot. So any help please. I am posting my code below.\r\n\r\n This is my **SessionController**\r\n```\r\npackage com.sparsh.conferencedemo.controllers;\r\n\r\n\r\nimport com.sparsh.conferencedemo.models.Session;\r\nimport com.sparsh.conferencedemo.repositories.SessionRepository;\r\nimport org.springframework.beans.BeanUtils;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.stereotype.Component;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\nimport java.util.List;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/api/v1/sessions&quot;)\r\npublic class SessionController {\r\n\r\n    @Autowired\r\n    private SessionRepository sessionRepository;\r\n\r\n    @GetMapping\r\n    private List&lt;Session&gt; list(){\r\n        return sessionRepository.findAll();\r\n    }\r\n    @GetMapping\r\n    @RequestMapping(&quot;{id}&quot;)\r\n    private Session get(@PathVariable Long id){\r\n        return sessionRepository.getOne(id);\r\n    }\r\n\r\n    @PostMapping\r\n    @ResponseStatus(HttpStatus.CREATED)\r\n    public Session create(@RequestBody final Session session){\r\n        return sessionRepository.saveAndFlush(session);\r\n    }\r\n\r\n @RequestMapping(value=&quot;{id}&quot;, method = RequestMethod.DELETE)\r\n    public void delete(@PathVariable Long id){\r\n        sessionRepository.\r\n    }\r\n\r\n\r\n    @RequestMapping(value=&quot;{id}&quot;, method = RequestMethod.PUT)\r\n    public Session update(@PathVariable Long id, @RequestBody Session session){\r\n        Session existingSesseion=sessionRepository.getOne(id);\r\n        BeanUtils.copyProperties(session, existingSesseion, &quot;session_id&quot;);\r\n        return sessionRepository.saveAndFlush(existingSesseion);\r\n    }\r\n}\r\n```\r\nThis is my **SessionRepository** interface\r\n```\r\npackage com.sparsh.conferencedemo.repositories;\r\nimport com.sparsh.conferencedemo.models.Session;\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\npublic interface SessionRepository extends JpaRepository&lt;Session, Long&gt; {\r\n\r\n}\r\n\r\n```\r\nThis is my **pom.xml** file\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.2.6.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.sparsh&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;conference-demo&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;conference-demo&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\nThis is my Model for Session\r\n```\r\npackage com.sparsh.conferencedemo.models;\r\nimport javax.persistence.*;\r\nimport java.util.List;\r\n@Entity(name=&quot;sessions&quot;)\r\npublic class Session {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long session_id;\r\n    private String session_name;\r\n    private String session_description;\r\n    private String session_length;\r\n\r\n    @ManyToMany\r\n    @JoinTable(\r\n            name=&quot;session_speakers&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;session_id&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;speaker_id&quot;)\r\n    )\r\n    private List&lt;Speaker&gt; speakers;\r\n\r\n    public Session(){\r\n\r\n    }\r\n\r\n    public List&lt;Speaker&gt; getSpeakers() {\r\n        return speakers;\r\n    }\r\n\r\n    public void setSpeakers(List&lt;Speaker&gt; speakers) {\r\n        this.speakers = speakers;\r\n    }\r\n\r\n\r\n    public Long getSession_id() {\r\n        return session_id;\r\n    }\r\n\r\n    public void setSession_id(Long session_id) {\r\n        this.session_id = session_id;\r\n    }\r\n\r\n    public String getSession_name() {\r\n        return session_name;\r\n    }\r\n\r\n    public void setSession_name(String session_name) {\r\n        this.session_name = session_name;\r\n    }\r\n\r\n    public String getSession_description() {\r\n        return session_description;\r\n    }\r\n\r\n    public void setSession_description(String session_description) {\r\n        this.session_description = session_description;\r\n    }\r\n\r\n    public String getSession_length() {\r\n        return session_length;\r\n    }\r\n\r\n    public void setSession_length(String session_length) {\r\n        this.session_length = session_length;\r\n    }\r\n}\r\n\r\n```\r\n\r\nThis is my main Application Class\r\n```\r\npackage com.sparsh.conferencedemo;\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n@SpringBootApplication\r\npublic class ConferenceDemoApplication {\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(ConferenceDemoApplication.class, args);\r\n\t}\r\n}\r\n```\r\nThese are the modules I am using in IntelliJ its an image link\r\n&lt;https://i.stack.imgur.com/5PLvw.jpg&gt;\r\n\r\nThese are the error I am getting in the console\r\n```\r\n :: Spring Boot ::        (v2.2.6.RELEASE)\r\n\r\n2020-04-29 12:44:29.844  INFO 10572 --- [           main] c.s.c.ConferenceDemoApplication          : Starting ConferenceDemoApplication on DESKTOP-JBQF1EV with PID 10572 (C:\\Users\\spars\\OneDrive\\Desktop\\conference-demo\\target\\classes started by spars in C:\\Users\\spars\\OneDrive\\Desktop\\conference-demo)\r\n2020-04-29 12:44:29.859  INFO 10572 --- [           main] c.s.c.ConferenceDemoApplication          : No active profile set, falling back to default profiles: default\r\n2020-04-29 12:44:38.081  INFO 10572 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n2020-04-29 12:44:38.174  INFO 10572 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2020-04-29 12:44:38.175  INFO 10572 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.33]\r\n2020-04-29 12:44:38.582  INFO 10572 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n2020-04-29 12:44:38.582  INFO 10572 --- [           main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 8561 ms\r\n2020-04-29 12:44:39.083  WARN 10572 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;sessionController&#39;: Unsatisfied dependency expressed through field &#39;sessionRepository&#39;; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;com.sparsh.conferencedemo.repositories.SessionRepository&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\r\n2020-04-29 12:44:39.090  INFO 10572 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\r\n2020-04-29 12:44:39.647  INFO 10572 --- [           main] ConditionEvaluationReportLoggingListener : \r\n\r\nError starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n2020-04-29 12:44:40.370 ERROR 10572 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : \r\n\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nField sessionRepository in com.sparsh.conferencedemo.controllers.SessionController required a bean of type &#39;com.sparsh.conferencedemo.repositories.SessionRepository&#39; that could not be found.\r\n\r\nThe injection point has the following annotations:\r\n\t- @org.springframework.beans.factory.annotation.Autowired(required=true)\r\n\r\n\r\nAction:\r\n\r\nConsider defining a bean of type &#39;com.sparsh.conferencedemo.repositories.SessionRepository&#39; in your configuration.\r\n\r\n\r\nProcess finished with exit code 1\r\n\r\n\r\n```","title":"sessionRepository in com.sparsh.conferencedemo.controllers.SessionController required a bean of type that could not be found","body":"<p>I was trying to create a simple CRUD spring boot application after watching an online course. But when i run the application it shown an error \"Field speakerRepository in com.sparsh.conferencedemo.controllers.SpeakerController required a bean of type 'com.sparsh.conferencedemo.repositories.SpeakerRepository' that could not be found.\" I don't understand what I am doing wrong. Also I am new to the spring boot. So any help please. I am posting my code below.</p>\n\n<p>This is my <strong>SessionController</strong></p>\n\n<pre><code>package com.sparsh.conferencedemo.controllers;\n\n\nimport com.sparsh.conferencedemo.models.Session;\nimport com.sparsh.conferencedemo.repositories.SessionRepository;\nimport org.springframework.beans.BeanUtils;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.List;\n\n@RestController\n@RequestMapping(\"/api/v1/sessions\")\npublic class SessionController {\n\n    @Autowired\n    private SessionRepository sessionRepository;\n\n    @GetMapping\n    private List&lt;Session&gt; list(){\n        return sessionRepository.findAll();\n    }\n    @GetMapping\n    @RequestMapping(\"{id}\")\n    private Session get(@PathVariable Long id){\n        return sessionRepository.getOne(id);\n    }\n\n    @PostMapping\n    @ResponseStatus(HttpStatus.CREATED)\n    public Session create(@RequestBody final Session session){\n        return sessionRepository.saveAndFlush(session);\n    }\n\n @RequestMapping(value=\"{id}\", method = RequestMethod.DELETE)\n    public void delete(@PathVariable Long id){\n        sessionRepository.\n    }\n\n\n    @RequestMapping(value=\"{id}\", method = RequestMethod.PUT)\n    public Session update(@PathVariable Long id, @RequestBody Session session){\n        Session existingSesseion=sessionRepository.getOne(id);\n        BeanUtils.copyProperties(session, existingSesseion, \"session_id\");\n        return sessionRepository.saveAndFlush(existingSesseion);\n    }\n}\n</code></pre>\n\n<p>This is my <strong>SessionRepository</strong> interface</p>\n\n<pre><code>package com.sparsh.conferencedemo.repositories;\nimport com.sparsh.conferencedemo.models.Session;\nimport org.springframework.data.jpa.repository.JpaRepository;\npublic interface SessionRepository extends JpaRepository&lt;Session, Long&gt; {\n\n}\n\n</code></pre>\n\n<p>This is my <strong>pom.xml</strong> file</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.2.6.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.sparsh&lt;/groupId&gt;\n    &lt;artifactId&gt;conference-demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;conference-demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n                    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n\n<p>This is my Model for Session</p>\n\n<pre><code>package com.sparsh.conferencedemo.models;\nimport javax.persistence.*;\nimport java.util.List;\n@Entity(name=\"sessions\")\npublic class Session {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long session_id;\n    private String session_name;\n    private String session_description;\n    private String session_length;\n\n    @ManyToMany\n    @JoinTable(\n            name=\"session_speakers\",\n            joinColumns = @JoinColumn(name = \"session_id\"),\n            inverseJoinColumns = @JoinColumn(name = \"speaker_id\")\n    )\n    private List&lt;Speaker&gt; speakers;\n\n    public Session(){\n\n    }\n\n    public List&lt;Speaker&gt; getSpeakers() {\n        return speakers;\n    }\n\n    public void setSpeakers(List&lt;Speaker&gt; speakers) {\n        this.speakers = speakers;\n    }\n\n\n    public Long getSession_id() {\n        return session_id;\n    }\n\n    public void setSession_id(Long session_id) {\n        this.session_id = session_id;\n    }\n\n    public String getSession_name() {\n        return session_name;\n    }\n\n    public void setSession_name(String session_name) {\n        this.session_name = session_name;\n    }\n\n    public String getSession_description() {\n        return session_description;\n    }\n\n    public void setSession_description(String session_description) {\n        this.session_description = session_description;\n    }\n\n    public String getSession_length() {\n        return session_length;\n    }\n\n    public void setSession_length(String session_length) {\n        this.session_length = session_length;\n    }\n}\n\n</code></pre>\n\n<p>This is my main Application Class</p>\n\n<pre><code>package com.sparsh.conferencedemo;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n@SpringBootApplication\npublic class ConferenceDemoApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(ConferenceDemoApplication.class, args);\n    }\n}\n</code></pre>\n\n<p>These are the modules I am using in IntelliJ its an image link\n<a href=\"https://i.stack.imgur.com/5PLvw.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/5PLvw.jpg</a></p>\n\n<p>These are the error I am getting in the console</p>\n\n<pre><code> :: Spring Boot ::        (v2.2.6.RELEASE)\n\n2020-04-29 12:44:29.844  INFO 10572 --- [           main] c.s.c.ConferenceDemoApplication          : Starting ConferenceDemoApplication on DESKTOP-JBQF1EV with PID 10572 (C:\\Users\\spars\\OneDrive\\Desktop\\conference-demo\\target\\classes started by spars in C:\\Users\\spars\\OneDrive\\Desktop\\conference-demo)\n2020-04-29 12:44:29.859  INFO 10572 --- [           main] c.s.c.ConferenceDemoApplication          : No active profile set, falling back to default profiles: default\n2020-04-29 12:44:38.081  INFO 10572 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2020-04-29 12:44:38.174  INFO 10572 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2020-04-29 12:44:38.175  INFO 10572 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.33]\n2020-04-29 12:44:38.582  INFO 10572 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2020-04-29 12:44:38.582  INFO 10572 --- [           main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 8561 ms\n2020-04-29 12:44:39.083  WARN 10572 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'sessionController': Unsatisfied dependency expressed through field 'sessionRepository'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.sparsh.conferencedemo.repositories.SessionRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n2020-04-29 12:44:39.090  INFO 10572 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2020-04-29 12:44:39.647  INFO 10572 --- [           main] ConditionEvaluationReportLoggingListener : \n\nError starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2020-04-29 12:44:40.370 ERROR 10572 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : \n\n***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nField sessionRepository in com.sparsh.conferencedemo.controllers.SessionController required a bean of type 'com.sparsh.conferencedemo.repositories.SessionRepository' that could not be found.\n\nThe injection point has the following annotations:\n    - @org.springframework.beans.factory.annotation.Autowired(required=true)\n\n\nAction:\n\nConsider defining a bean of type 'com.sparsh.conferencedemo.repositories.SessionRepository' in your configuration.\n\n\nProcess finished with exit code 1\n\n\n</code></pre>\n"},{"tags":["java","reactjs","spring-boot","azure-blob-storage"],"answers":[{"tags":[],"owner":{"account_id":9305162,"reputation":1045,"user_id":6909182,"display_name":"this.srivastava"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1699461392,"creation_date":1699461392,"answer_id":77447378,"question_id":77446179,"body_markdown":"I&#39;m not sure if it is a limitation from Azure, I increased the chunk size and try to reduce the block stage less than 11 which resolved the issue.","title":"Java - Spring Boot - Azure Blob Storage - Status Code 400 - InvalidBlobOrBlock - The specified blob or block content is invalid","body":"<p>I'm not sure if it is a limitation from Azure, I increased the chunk size and try to reduce the block stage less than 11 which resolved the issue.</p>\n"}],"owner":{"account_id":9305162,"reputation":1045,"user_id":6909182,"display_name":"this.srivastava"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77447378,"answer_count":1,"score":0,"last_activity_date":1699461392,"creation_date":1699451865,"question_id":77446179,"body_markdown":"I have to upload large zip file to Azure Blob Storage which contains xml files, each xml file size will be around 200-300 MB. I&#39;m trying to upload the file in chunks using React JS and at the server side I&#39;m using Spring Boot and receiving the chunks and I want to process all the chunks together. But at the `blockBlobClient.stageBlock()` I get 400 bad request with message `InvalidBlobOrBlock - The specified blob or block content is invalid` somewhere while processing. Here is the code that I have written. Please help me to resolve the issue.\r\n\r\n**Edit:**\r\nSeems like Stage 11th block in blockBlobClient.stageBlock() is returning 400\r\n\r\n\r\n**React code: Chunk process and upload**\r\n\r\n    const uploadInsights = async () =&gt; {\r\n        setLoading(true);\r\n        const chunkSize = 2 * 1024 * 1024;\r\n        const totalChunks = Math.ceil(file.size / chunkSize);\r\n        let uploadedChunks = 0;\r\n        for (let chunkNumber = 0; chunkNumber &lt; totalChunks; chunkNumber++) {\r\n          const start = chunkNumber * chunkSize;\r\n          const end =\r\n            chunkNumber === totalChunks - 1\r\n              ? file.size\r\n              : (chunkNumber + 1) * chunkSize;\r\n          const chunk = file.slice(start, end);\r\n          console.log(&#39;chunk no&#39;, chunkNumber, &#39;chunk&#39;, chunk);\r\n          const formData = new FormData();\r\n          formData.append(&#39;filename&#39;, file.name);\r\n          formData.append(&#39;fileChunk&#39;, chunk);\r\n          // @ts-ignore\r\n          formData.append(&#39;chunkNumber&#39;, chunkNumber);\r\n          // @ts-ignore\r\n          formData.append(&#39;totalChunks&#39;, totalChunks);\r\n    \r\n          try {\r\n            let response = await analyticsService.uploadFeatureAnalyticsInsights(\r\n              formData,\r\n            );\r\n            if (response?.data?.success) {\r\n              uploadedChunks++;\r\n              const newProgress = (uploadedChunks / totalChunks) * 100;\r\n              setProgress(newProgress);\r\n            } else {\r\n              console.log(\r\n                `Error uploading chunk ${chunkNumber + 1}: ${\r\n                  response?.data?.status\r\n                }`,\r\n              );\r\n            }\r\n          } catch (error: any) {\r\n            console.log(\r\n              `Error uploading chunk ${chunkNumber + 1}: ${\r\n                error?.response?.status\r\n              }`,\r\n            );\r\n          }\r\n        }\r\n        setLoading(false);\r\n        setProgress(0);\r\n      };\r\n\r\n\r\n**Java/Spring Boot**\r\n\r\n`uploadInsights(...)` is the method that processes the file chunks\r\n\r\n    import com.azure.storage.blob.BlobClient;\r\n    import com.azure.storage.blob.BlobServiceClient;\r\n    import com.azure.storage.blob.specialized.BlockBlobClient;\r\n    import com.app.exception.general.AppException;\r\n    \r\n    import lombok.NonNull;\r\n    import lombok.RequiredArgsConstructor;\r\n    import lombok.extern.log4j.Log4j2;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Service;\r\n    import org.springframework.web.multipart.MultipartFile;\r\n    \r\n    import java.io.ByteArrayInputStream;\r\n    import java.io.IOException;\r\n    import java.util.*;\r\n    import java.util.concurrent.ConcurrentHashMap;\r\n    \r\n    @Log4j2\r\n    @Service\r\n    @RequiredArgsConstructor(onConstructor = @__(@Autowired))\r\n    public class FeatureAnalyticsService {\r\n    \r\n        private static final Map&lt;String, List&lt;String&gt;&gt; chunkIds = new ConcurrentHashMap&lt;&gt;();\r\n    \r\n        private static final Map&lt;String, List&lt;byte[]&gt;&gt; fileChunks = new ConcurrentHashMap&lt;&gt;();\r\n    \r\n        private static final Map&lt;String, List&lt;ByteArrayInputStream&gt;&gt; chunkStreams =\r\n                new ConcurrentHashMap&lt;&gt;();\r\n    \r\n        private final BlobServiceClient blobServiceClient;\r\n    \r\n        private static byte @NonNull [] getChunkBytes(@NonNull MultipartFile fileChunk)\r\n                throws IOException {\r\n            return fileChunk.getInputStream().readAllBytes();\r\n        }\r\n    \r\n        private static void updateChunkIds(String filename, String base64ChunkId) {\r\n            List&lt;String&gt; chunkNumbers;\r\n            if (chunkIds.containsKey(filename)) {\r\n                chunkNumbers = chunkIds.get(filename);\r\n            } else {\r\n                chunkNumbers = new ArrayList&lt;&gt;();\r\n            }\r\n            chunkNumbers.add(base64ChunkId);\r\n            chunkIds.put(filename, chunkNumbers);\r\n        }\r\n    \r\n        private static void updateChunkStream(String filename, ByteArrayInputStream chunk) {\r\n            List&lt;ByteArrayInputStream&gt; chunks;\r\n            if (chunkStreams.containsKey(filename)) {\r\n                chunks = chunkStreams.get(filename);\r\n            } else {\r\n                chunks = new ArrayList&lt;&gt;();\r\n            }\r\n            chunks.add(chunk);\r\n            chunkStreams.put(filename, chunks);\r\n        }\r\n    \r\n        private static void updateChunks(String filename, byte[] chunkBytes) {\r\n            List&lt;byte[]&gt; chunks;\r\n            if (fileChunks.containsKey(filename)) {\r\n                chunks = fileChunks.get(filename);\r\n            } else {\r\n                chunks = new ArrayList&lt;&gt;();\r\n            }\r\n            chunks.add(chunkBytes);\r\n            fileChunks.put(filename, chunks);\r\n        }\r\n    \r\n        public boolean uploadInsights(\r\n                String filename, @NonNull MultipartFile fileChunk, int chunkNumber, int totalChunks) {\r\n            BlobClient blobClient = getBlobClient(filename);\r\n            String base64ChunkId =\r\n                    Base64.getEncoder().encodeToString(String.valueOf(chunkNumber).getBytes());\r\n            updateChunkIds(filename, base64ChunkId);\r\n            try {\r\n                byte[] chunkBytes = getChunkBytes(fileChunk);\r\n                updateChunks(filename, chunkBytes);\r\n                ByteArrayInputStream chunk = new ByteArrayInputStream(chunkBytes);\r\n                updateChunkStream(filename, chunk);\r\n            } catch (IOException e) {\r\n                throw new AppException(e.getMessage());\r\n            }\r\n            if (chunkNumber == totalChunks - 1) {\r\n                List&lt;String&gt; chunkNumbers = chunkIds.get(filename);\r\n                List&lt;byte[]&gt; chunkBytes = fileChunks.get(filename);\r\n                List&lt;ByteArrayInputStream&gt; chunks = chunkStreams.get(filename);\r\n                BlockBlobClient blockBlobClient = blobClient.getBlockBlobClient();\r\n                try {\r\n                    for (int i = 0; i &lt; chunkNumbers.size(); i++) {\r\n                        log.info(&quot;Chunk Number {}, Chunk Size {}&quot;, i, chunkBytes.get(i).length);\r\n                        blockBlobClient.stageBlock(\r\n                                chunkNumbers.get(i), chunks.get(i), chunkBytes.get(i).length); // error area\r\n                    }\r\n                    blockBlobClient.commitBlockList(chunkNumbers);\r\n                    chunkIds.remove(filename);\r\n                    fileChunks.remove(filename);\r\n                    chunkStreams.remove(filename);\r\n                } catch (Exception e) {\r\n                    log.error(e.getMessage());\r\n                    chunkIds.remove(filename);\r\n                    fileChunks.remove(filename);\r\n                    chunkStreams.remove(filename);\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n    \r\n        private @NonNull BlobClient getBlobClient(String filename) {\r\n            return blobServiceClient.createBlobContainerIfNotExists(&quot;uploads&quot;).getBlobClient(filename);\r\n        }\r\n    }\r\n\r\n**Errors at server side**\r\n\r\n    Chunk Number 0, Chunk Size 2097152\r\n    Chunk Number 1, Chunk Size 2097152\r\n    Chunk Number 2, Chunk Size 2097152\r\n    Chunk Number 3, Chunk Size 2097152\r\n    Chunk Number 4, Chunk Size 2097152\r\n    Chunk Number 5, Chunk Size 2097152\r\n    Chunk Number 6, Chunk Size 2097152\r\n    Chunk Number 7, Chunk Size 2097152\r\n    Chunk Number 8, Chunk Size 2097152\r\n    Chunk Number 9, Chunk Size 2097152\r\n    Chunk Number 10, Chunk Size 2097152\r\n    Status code 400, &quot;&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;Error&gt;&lt;Code&gt;InvalidBlobOrBlock&lt;/Code&gt;&lt;Message&gt;The specified blob or block content is invalid.\r\n    RequestId:30fc912d-801e-0014-0245-12c1d4000000\r\n    Time:2023-11-08T13:16:08.4879527Z&lt;/Message&gt;&lt;/Error&gt;&quot;\r\n\r\n","title":"Java - Spring Boot - Azure Blob Storage - Status Code 400 - InvalidBlobOrBlock - The specified blob or block content is invalid","body":"<p>I have to upload large zip file to Azure Blob Storage which contains xml files, each xml file size will be around 200-300 MB. I'm trying to upload the file in chunks using React JS and at the server side I'm using Spring Boot and receiving the chunks and I want to process all the chunks together. But at the <code>blockBlobClient.stageBlock()</code> I get 400 bad request with message <code>InvalidBlobOrBlock - The specified blob or block content is invalid</code> somewhere while processing. Here is the code that I have written. Please help me to resolve the issue.</p>\n<p><strong>Edit:</strong>\nSeems like Stage 11th block in blockBlobClient.stageBlock() is returning 400</p>\n<p><strong>React code: Chunk process and upload</strong></p>\n<pre><code>const uploadInsights = async () =&gt; {\n    setLoading(true);\n    const chunkSize = 2 * 1024 * 1024;\n    const totalChunks = Math.ceil(file.size / chunkSize);\n    let uploadedChunks = 0;\n    for (let chunkNumber = 0; chunkNumber &lt; totalChunks; chunkNumber++) {\n      const start = chunkNumber * chunkSize;\n      const end =\n        chunkNumber === totalChunks - 1\n          ? file.size\n          : (chunkNumber + 1) * chunkSize;\n      const chunk = file.slice(start, end);\n      console.log('chunk no', chunkNumber, 'chunk', chunk);\n      const formData = new FormData();\n      formData.append('filename', file.name);\n      formData.append('fileChunk', chunk);\n      // @ts-ignore\n      formData.append('chunkNumber', chunkNumber);\n      // @ts-ignore\n      formData.append('totalChunks', totalChunks);\n\n      try {\n        let response = await analyticsService.uploadFeatureAnalyticsInsights(\n          formData,\n        );\n        if (response?.data?.success) {\n          uploadedChunks++;\n          const newProgress = (uploadedChunks / totalChunks) * 100;\n          setProgress(newProgress);\n        } else {\n          console.log(\n            `Error uploading chunk ${chunkNumber + 1}: ${\n              response?.data?.status\n            }`,\n          );\n        }\n      } catch (error: any) {\n        console.log(\n          `Error uploading chunk ${chunkNumber + 1}: ${\n            error?.response?.status\n          }`,\n        );\n      }\n    }\n    setLoading(false);\n    setProgress(0);\n  };\n</code></pre>\n<p><strong>Java/Spring Boot</strong></p>\n<p><code>uploadInsights(...)</code> is the method that processes the file chunks</p>\n<pre><code>import com.azure.storage.blob.BlobClient;\nimport com.azure.storage.blob.BlobServiceClient;\nimport com.azure.storage.blob.specialized.BlockBlobClient;\nimport com.app.exception.general.AppException;\n\nimport lombok.NonNull;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.log4j.Log4j2;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\nimport org.springframework.web.multipart.MultipartFile;\n\nimport java.io.ByteArrayInputStream;\nimport java.io.IOException;\nimport java.util.*;\nimport java.util.concurrent.ConcurrentHashMap;\n\n@Log4j2\n@Service\n@RequiredArgsConstructor(onConstructor = @__(@Autowired))\npublic class FeatureAnalyticsService {\n\n    private static final Map&lt;String, List&lt;String&gt;&gt; chunkIds = new ConcurrentHashMap&lt;&gt;();\n\n    private static final Map&lt;String, List&lt;byte[]&gt;&gt; fileChunks = new ConcurrentHashMap&lt;&gt;();\n\n    private static final Map&lt;String, List&lt;ByteArrayInputStream&gt;&gt; chunkStreams =\n            new ConcurrentHashMap&lt;&gt;();\n\n    private final BlobServiceClient blobServiceClient;\n\n    private static byte @NonNull [] getChunkBytes(@NonNull MultipartFile fileChunk)\n            throws IOException {\n        return fileChunk.getInputStream().readAllBytes();\n    }\n\n    private static void updateChunkIds(String filename, String base64ChunkId) {\n        List&lt;String&gt; chunkNumbers;\n        if (chunkIds.containsKey(filename)) {\n            chunkNumbers = chunkIds.get(filename);\n        } else {\n            chunkNumbers = new ArrayList&lt;&gt;();\n        }\n        chunkNumbers.add(base64ChunkId);\n        chunkIds.put(filename, chunkNumbers);\n    }\n\n    private static void updateChunkStream(String filename, ByteArrayInputStream chunk) {\n        List&lt;ByteArrayInputStream&gt; chunks;\n        if (chunkStreams.containsKey(filename)) {\n            chunks = chunkStreams.get(filename);\n        } else {\n            chunks = new ArrayList&lt;&gt;();\n        }\n        chunks.add(chunk);\n        chunkStreams.put(filename, chunks);\n    }\n\n    private static void updateChunks(String filename, byte[] chunkBytes) {\n        List&lt;byte[]&gt; chunks;\n        if (fileChunks.containsKey(filename)) {\n            chunks = fileChunks.get(filename);\n        } else {\n            chunks = new ArrayList&lt;&gt;();\n        }\n        chunks.add(chunkBytes);\n        fileChunks.put(filename, chunks);\n    }\n\n    public boolean uploadInsights(\n            String filename, @NonNull MultipartFile fileChunk, int chunkNumber, int totalChunks) {\n        BlobClient blobClient = getBlobClient(filename);\n        String base64ChunkId =\n                Base64.getEncoder().encodeToString(String.valueOf(chunkNumber).getBytes());\n        updateChunkIds(filename, base64ChunkId);\n        try {\n            byte[] chunkBytes = getChunkBytes(fileChunk);\n            updateChunks(filename, chunkBytes);\n            ByteArrayInputStream chunk = new ByteArrayInputStream(chunkBytes);\n            updateChunkStream(filename, chunk);\n        } catch (IOException e) {\n            throw new AppException(e.getMessage());\n        }\n        if (chunkNumber == totalChunks - 1) {\n            List&lt;String&gt; chunkNumbers = chunkIds.get(filename);\n            List&lt;byte[]&gt; chunkBytes = fileChunks.get(filename);\n            List&lt;ByteArrayInputStream&gt; chunks = chunkStreams.get(filename);\n            BlockBlobClient blockBlobClient = blobClient.getBlockBlobClient();\n            try {\n                for (int i = 0; i &lt; chunkNumbers.size(); i++) {\n                    log.info(&quot;Chunk Number {}, Chunk Size {}&quot;, i, chunkBytes.get(i).length);\n                    blockBlobClient.stageBlock(\n                            chunkNumbers.get(i), chunks.get(i), chunkBytes.get(i).length); // error area\n                }\n                blockBlobClient.commitBlockList(chunkNumbers);\n                chunkIds.remove(filename);\n                fileChunks.remove(filename);\n                chunkStreams.remove(filename);\n            } catch (Exception e) {\n                log.error(e.getMessage());\n                chunkIds.remove(filename);\n                fileChunks.remove(filename);\n                chunkStreams.remove(filename);\n                return false;\n            }\n        }\n        return true;\n    }\n\n    private @NonNull BlobClient getBlobClient(String filename) {\n        return blobServiceClient.createBlobContainerIfNotExists(&quot;uploads&quot;).getBlobClient(filename);\n    }\n}\n</code></pre>\n<p><strong>Errors at server side</strong></p>\n<pre><code>Chunk Number 0, Chunk Size 2097152\nChunk Number 1, Chunk Size 2097152\nChunk Number 2, Chunk Size 2097152\nChunk Number 3, Chunk Size 2097152\nChunk Number 4, Chunk Size 2097152\nChunk Number 5, Chunk Size 2097152\nChunk Number 6, Chunk Size 2097152\nChunk Number 7, Chunk Size 2097152\nChunk Number 8, Chunk Size 2097152\nChunk Number 9, Chunk Size 2097152\nChunk Number 10, Chunk Size 2097152\nStatus code 400, &quot;&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;Error&gt;&lt;Code&gt;InvalidBlobOrBlock&lt;/Code&gt;&lt;Message&gt;The specified blob or block content is invalid.\nRequestId:30fc912d-801e-0014-0245-12c1d4000000\nTime:2023-11-08T13:16:08.4879527Z&lt;/Message&gt;&lt;/Error&gt;&quot;\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","rest"],"comments":[{"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"score":0,"creation_date":1699460132,"post_id":77447172,"comment_id":136535062,"body_markdown":"See https://stackoverflow.com/questions/76120200/postgres-consecutive-id-numbers-end-user","body":"See <a href=\"https://stackoverflow.com/questions/76120200/postgres-consecutive-id-numbers-end-user\" title=\"postgres consecutive id numbers end user\">stackoverflow.com/questions/76120200/&hellip;</a>"},{"owner":{"account_id":101001,"reputation":119808,"user_id":271959,"display_name":"Frank Heikens"},"score":0,"creation_date":1699460708,"post_id":77447172,"comment_id":136535183,"body_markdown":"That&#39;s how a sequence works. If you don&#39;t want this behavior, you can&#39;t use a sequence and you have to create your own algorithm.","body":"That&#39;s how a sequence works. If you don&#39;t want this behavior, you can&#39;t use a sequence and you have to create your own algorithm."}],"answers":[{"tags":[],"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699460595,"creation_date":1699460595,"answer_id":77447277,"question_id":77447172,"body_markdown":"The reason for the gap is that an id was provided by a sequence or serial column or equivalent. That id source now moved on to the next higher id, it doesn&#39;t role back with the rest of the transaction. It kind of lives outside of transactions.\r\n\r\nThis is actually important, because creating sequential ids without gap is slow. If you would want to do that you&#39;d have to \r\n1. lock what ever generates your ids. \r\n2. Get the new id\r\n3. Use it\r\n4. eventually complete the transaction, releasing the lock.\r\nWhich basically means you are processing everything that needs an id sequentially.\r\n\r\nThis is really bad for performance and therefore normally not done.\r\n\r\nIf there really is a need for sequential ids the process above can be implemented.","title":"Why does a DataIntegrityViolationException in Spring consume an ID, resulting in a gap in the sequence, and how can it be fixed?","body":"<p>The reason for the gap is that an id was provided by a sequence or serial column or equivalent. That id source now moved on to the next higher id, it doesn't role back with the rest of the transaction. It kind of lives outside of transactions.</p>\n<p>This is actually important, because creating sequential ids without gap is slow. If you would want to do that you'd have to</p>\n<ol>\n<li>lock what ever generates your ids.</li>\n<li>Get the new id</li>\n<li>Use it</li>\n<li>eventually complete the transaction, releasing the lock.\nWhich basically means you are processing everything that needs an id sequentially.</li>\n</ol>\n<p>This is really bad for performance and therefore normally not done.</p>\n<p>If there really is a need for sequential ids the process above can be implemented.</p>\n"}],"owner":{"account_id":29856754,"reputation":1,"user_id":22881432,"display_name":"Lior"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699460595,"creation_date":1699459545,"question_id":77447172,"body_markdown":"I have a @ControllerAdvice class with an exception handler that catches DataIntegrityViolationException when attempting to save a user with a name that already exists due to a unique constraint in my database. However, when this handler is triggered, it seems to &quot;consume&quot; the ID, and the next successful save operation results in a gap in the ID sequence. How can I fix it?\r\n\r\nHandler\r\n\r\n```\r\n@ControllerAdvice\r\npublic class RestExceptionHandler {\r\n\r\n    @ExceptionHandler(DataIntegrityViolationException.class)\r\n    protected ResponseEntity&lt;Object&gt; handleDataIntegrityViolation(DataIntegrityViolationException ex) {\r\n        var errorDTO = new ErrorDTO(BAD_REQUEST);\r\n        errorDTO.setMessage(&quot;The record with this name already exists&quot;);\r\n        errorDTO.setDebugMessage(ex.getMostSpecificCause().getMessage());\r\n        return buildResponseEntity(errorDTO);\r\n    }\r\n\r\n    private ResponseEntity&lt;Object&gt; buildResponseEntity(ErrorDTO errorDTO) {\r\n        return new ResponseEntity&lt;&gt;(errorDTO, errorDTO.getStatus());\r\n    }\r\n}\r\n```\r\n\r\nThe method in service layer:\r\n\r\n\r\n```\r\n@Transactional\r\n    public ReaderDTO saveDto(ReaderDTO readerDTO) {\r\n        var reader = readerMapper.readerDTOToReader(readerDTO);\r\n        var savedReader = readersRepository.save(reader);\r\n        return readerMapper.readerToReaderDTO(savedReader);\r\n    }\r\n```\r\n\r\nController method:\r\n\r\n```\r\n@Override\r\n    public ResponseEntity&lt;ReaderDTO&gt; create(ReaderDTO readerDTO) {\r\n        var savedDto = readerService.saveDto(readerDTO);\r\n        return ResponseEntity.status(HttpStatus.CREATED).body(savedDto);\r\n    }\r\n```\r\n\r\nand method in interface:\r\n\r\n```\r\n@Operation(\r\n            summary = &quot;Create a new reader&quot;,\r\n            description = &quot;Create a new reader record&quot;,\r\n            responses = {\r\n                    @ApiResponse(\r\n                            responseCode = &quot;201&quot;,\r\n                            description = &quot;Reader created successfully&quot;,\r\n                            content = @Content(\r\n                                    mediaType = &quot;application/json&quot;,\r\n                                    schema = @Schema(implementation = ReaderDTO.class)\r\n                            )\r\n                    ),\r\n                    @ApiResponse(\r\n                            responseCode = &quot;400&quot;,\r\n                            description = &quot;Bad request&quot;,\r\n                            content = @Content(\r\n                                    mediaType = &quot;application/json&quot;,\r\n                                    schema = @Schema(implementation = ErrorDTO.class)\r\n                            )\r\n                    )\r\n            }\r\n    )\r\n    @PostMapping\r\n    ResponseEntity&lt;ReaderDTO&gt; create(@RequestBody ReaderDTO readerDTO);\r\n```\r\n\r\nThanks in advance\r\n\r\n\r\n\r\nEverything is ok when I use the service method like that\r\n\r\n\r\n```\r\n @Transactional\r\n    public ReaderDTO saveDto(ReaderDTO readerDTO) {\r\n        var oneByName = findOneByName(readerDTO.getName());\r\n        if (oneByName.isPresent()) {\r\n            throw new DataIntegrityViolationException(&quot;Wow&quot;);\r\n        }\r\n        var reader = readerMapper.readerDTOToReader(readerDTO);\r\n        var savedReader = readersRepository.save(reader);\r\n        return readerMapper.readerToReaderDTO(savedReader);\r\n    }\r\n```\r\n\r\nbut I don&#39;t want to use direct throw of exception ","title":"Why does a DataIntegrityViolationException in Spring consume an ID, resulting in a gap in the sequence, and how can it be fixed?","body":"<p>I have a @ControllerAdvice class with an exception handler that catches DataIntegrityViolationException when attempting to save a user with a name that already exists due to a unique constraint in my database. However, when this handler is triggered, it seems to &quot;consume&quot; the ID, and the next successful save operation results in a gap in the ID sequence. How can I fix it?</p>\n<p>Handler</p>\n<pre><code>@ControllerAdvice\npublic class RestExceptionHandler {\n\n    @ExceptionHandler(DataIntegrityViolationException.class)\n    protected ResponseEntity&lt;Object&gt; handleDataIntegrityViolation(DataIntegrityViolationException ex) {\n        var errorDTO = new ErrorDTO(BAD_REQUEST);\n        errorDTO.setMessage(&quot;The record with this name already exists&quot;);\n        errorDTO.setDebugMessage(ex.getMostSpecificCause().getMessage());\n        return buildResponseEntity(errorDTO);\n    }\n\n    private ResponseEntity&lt;Object&gt; buildResponseEntity(ErrorDTO errorDTO) {\n        return new ResponseEntity&lt;&gt;(errorDTO, errorDTO.getStatus());\n    }\n}\n</code></pre>\n<p>The method in service layer:</p>\n<pre><code>@Transactional\n    public ReaderDTO saveDto(ReaderDTO readerDTO) {\n        var reader = readerMapper.readerDTOToReader(readerDTO);\n        var savedReader = readersRepository.save(reader);\n        return readerMapper.readerToReaderDTO(savedReader);\n    }\n</code></pre>\n<p>Controller method:</p>\n<pre><code>@Override\n    public ResponseEntity&lt;ReaderDTO&gt; create(ReaderDTO readerDTO) {\n        var savedDto = readerService.saveDto(readerDTO);\n        return ResponseEntity.status(HttpStatus.CREATED).body(savedDto);\n    }\n</code></pre>\n<p>and method in interface:</p>\n<pre><code>@Operation(\n            summary = &quot;Create a new reader&quot;,\n            description = &quot;Create a new reader record&quot;,\n            responses = {\n                    @ApiResponse(\n                            responseCode = &quot;201&quot;,\n                            description = &quot;Reader created successfully&quot;,\n                            content = @Content(\n                                    mediaType = &quot;application/json&quot;,\n                                    schema = @Schema(implementation = ReaderDTO.class)\n                            )\n                    ),\n                    @ApiResponse(\n                            responseCode = &quot;400&quot;,\n                            description = &quot;Bad request&quot;,\n                            content = @Content(\n                                    mediaType = &quot;application/json&quot;,\n                                    schema = @Schema(implementation = ErrorDTO.class)\n                            )\n                    )\n            }\n    )\n    @PostMapping\n    ResponseEntity&lt;ReaderDTO&gt; create(@RequestBody ReaderDTO readerDTO);\n</code></pre>\n<p>Thanks in advance</p>\n<p>Everything is ok when I use the service method like that</p>\n<pre><code> @Transactional\n    public ReaderDTO saveDto(ReaderDTO readerDTO) {\n        var oneByName = findOneByName(readerDTO.getName());\n        if (oneByName.isPresent()) {\n            throw new DataIntegrityViolationException(&quot;Wow&quot;);\n        }\n        var reader = readerMapper.readerDTOToReader(readerDTO);\n        var savedReader = readersRepository.save(reader);\n        return readerMapper.readerToReaderDTO(savedReader);\n    }\n</code></pre>\n<p>but I don't want to use direct throw of exception</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2569410,"reputation":545,"user_id":2228525,"display_name":"Nitesh Sharma"},"score":0,"creation_date":1699453446,"post_id":77446351,"comment_id":136533331,"body_markdown":"can you please explain what do you want as a result ? you program is throwing IndexOutOfBound exception.","body":"can you please explain what do you want as a result ? you program is throwing IndexOutOfBound exception."},{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":5,"creation_date":1699453659,"post_id":77446351,"comment_id":136533387,"body_markdown":"`scnr.next()` → `scnr.nextLine()` ?","body":"<code>scnr.next()</code> → <code>scnr.nextLine()</code> ?"},{"owner":{"account_id":22878324,"reputation":362,"user_id":17020280,"display_name":"GabeRAMturn"},"score":0,"creation_date":1699453818,"post_id":77446351,"comment_id":136533432,"body_markdown":"@NiteshSharma no it doesn&#39;t?","body":"@NiteshSharma no it doesn&#39;t?"},{"owner":{"account_id":29855777,"reputation":11,"user_id":22880638,"display_name":"aLop"},"score":0,"creation_date":1699453857,"post_id":77446351,"comment_id":136533445,"body_markdown":"that was it...why did I not think of that. Thank you so much","body":"that was it...why did I not think of that. Thank you so much"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1699455459,"post_id":77446351,"comment_id":136533886,"body_markdown":"Please don&#39;t edit your question to add things like &quot;resolved&quot; to the title, and changing the body of the question to fix the problem. If you managed to solve your problem, that&#39;s great, but you mark a question as solved by accepting an answer(if it answered your question), if there is no current answer (or none that actually identify the problem), then post your own answer describing the solution in sufficient detail and accept it after the timeout.","body":"Please don&#39;t edit your question to add things like &quot;resolved&quot; to the title, and changing the body of the question to fix the problem. If you managed to solve your problem, that&#39;s great, but you mark a question as solved by accepting an answer(if it answered your question), if there is no current answer (or none that actually identify the problem), then post your own answer describing the solution in sufficient detail and accept it after the timeout."},{"owner":{"account_id":29855777,"reputation":11,"user_id":22880638,"display_name":"aLop"},"score":0,"creation_date":1699456223,"post_id":77446351,"comment_id":136534080,"body_markdown":"@MarkRotteveel My apologies, first time user of this site. will keep in mind for the future.","body":"@MarkRotteveel My apologies, first time user of this site. will keep in mind for the future."}],"answers":[{"comments":[{"owner":{"account_id":29855777,"reputation":11,"user_id":22880638,"display_name":"aLop"},"score":0,"creation_date":1699456445,"post_id":77446716,"comment_id":136534145,"body_markdown":"Unfortunately due to the restrictions of the lab, a loop is needed for completion. String builder maybe to advanced for my intro course?","body":"Unfortunately due to the restrictions of the lab, a loop is needed for completion. String builder maybe to advanced for my intro course?"}],"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699455742,"creation_date":1699455742,"answer_id":77446716,"question_id":77446351,"body_markdown":"First of all when you use `scan.next()` you get an input up to the next space character. You should use `scan.nextLine()` instead.\r\n\r\nSecond, do not use string concatenation in loop. Do use `StringBuilder` instead.\r\n\r\nOhter you code is fine.\r\n\r\n```java\r\npublic static void main(String... args) {\r\n    Scanner scan = new Scanner(System.in);\r\n    System.out.println(removeNotLetters(scan.nextLine()));\r\n}\r\n\r\npublic static String removeNotLetters(String str) {\r\n    StringBuilder buf = new StringBuilder(str.length());\r\n\r\n    for (int i = 0; i &lt; str.length(); i++) {\r\n        char ch = str.charAt(i);\r\n\r\n        if (Character.isLetter(ch))\r\n            buf.append(ch);\r\n    }\r\n\r\n    return buf.toString();\r\n}\r\n```","title":"java Lab Remove all non-alpha characters","body":"<p>First of all when you use <code>scan.next()</code> you get an input up to the next space character. You should use <code>scan.nextLine()</code> instead.</p>\n<p>Second, do not use string concatenation in loop. Do use <code>StringBuilder</code> instead.</p>\n<p>Ohter you code is fine.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String... args) {\n    Scanner scan = new Scanner(System.in);\n    System.out.println(removeNotLetters(scan.nextLine()));\n}\n\npublic static String removeNotLetters(String str) {\n    StringBuilder buf = new StringBuilder(str.length());\n\n    for (int i = 0; i &lt; str.length(); i++) {\n        char ch = str.charAt(i);\n\n        if (Character.isLetter(ch))\n            buf.append(ch);\n    }\n\n    return buf.toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29855777,"reputation":11,"user_id":22880638,"display_name":"aLop"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699458404,"creation_date":1699457125,"answer_id":77446897,"question_id":77446351,"body_markdown":"@teapot418 was correct scnr.next() → scnr.nextLine() fixed the issue.\r\n\r\n```\r\nimport java.util.Scanner;\r\npublic class LabProgram {\r\n   public static void main(String[] args) {\r\n      Scanner scnr = new Scanner(System.in);\r\n      String uInput = scnr.nextLine();\r\n      String result = &quot;&quot;;\r\n      \r\n      for (int i = 0; i &lt; uInput.length(); i++) {\r\n         char c = uInput.charAt(i);\r\n         if (Character.isLetter(c)) {\r\n            result += c;\r\n         }\r\n      }\r\n      System.out.println(result);          \r\n   }\r\n}\r\n```","title":"java Lab Remove all non-alpha characters","body":"<p>@teapot418 was correct scnr.next() → scnr.nextLine() fixed the issue.</p>\n<pre><code>import java.util.Scanner;\npublic class LabProgram {\n   public static void main(String[] args) {\n      Scanner scnr = new Scanner(System.in);\n      String uInput = scnr.nextLine();\n      String result = &quot;&quot;;\n      \n      for (int i = 0; i &lt; uInput.length(); i++) {\n         char c = uInput.charAt(i);\n         if (Character.isLetter(c)) {\n            result += c;\n         }\n      }\n      System.out.println(result);          \n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699460205,"creation_date":1699460205,"answer_id":77447233,"question_id":77446351,"body_markdown":"If you&#39;re learning loops, then you&#39;ll eventually also see the [Enhanced For Loop](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html):\r\n\r\n    for (char c : uInput.toCharArray()) {\r\n       if (Character.isLetter(c)) {\r\n          result += c;\r\n       }\r\n    }\r\n","title":"java Lab Remove all non-alpha characters","body":"<p>If you're learning loops, then you'll eventually also see the <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html\" rel=\"nofollow noreferrer\">Enhanced For Loop</a>:</p>\n<pre><code>for (char c : uInput.toCharArray()) {\n   if (Character.isLetter(c)) {\n      result += c;\n   }\n}\n</code></pre>\n"}],"owner":{"account_id":29855777,"reputation":11,"user_id":22880638,"display_name":"aLop"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":3,"score":-1,"last_activity_date":1699460205,"creation_date":1699453147,"question_id":77446351,"body_markdown":"&gt; Write a program that removes all non alpha characters from the given\r\n&gt; input.\r\n&gt; \r\n&gt; Ex: If the input is:\r\n&gt; -Hello, 1 world$!\r\n&gt; \r\n&gt; the output is: Helloworld\r\n\r\nMy issue is that I can only return the first word &quot;Hello&quot;. This section is on loops, so I&#39;m trying to use a loop.\r\n\r\n```java\r\nimport java.util.Scanner;\r\n\r\npublic class LabProgram {\r\n   public static void main(String[] args) {\r\n      Scanner scnr = new Scanner(System.in);\r\n      String uInput = scnr.next();\r\n      String result = &quot;&quot;;\r\n      \r\n      for (int i = 0; i &lt; uInput.length(); i++) {\r\n         char c = uInput.charAt(i);\r\n         if (Character.isLetter(c)) {\r\n            result += c;\r\n         }\r\n      }\r\n      System.out.println(result);\r\n            \r\n   }\r\n}\r\n","title":"java Lab Remove all non-alpha characters","body":"<blockquote>\n<p>Write a program that removes all non alpha characters from the given\ninput.</p>\n<p>Ex: If the input is:\n-Hello, 1 world$!</p>\n<p>the output is: Helloworld</p>\n</blockquote>\n<p>My issue is that I can only return the first word &quot;Hello&quot;. This section is on loops, so I'm trying to use a loop.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\npublic class LabProgram {\n   public static void main(String[] args) {\n      Scanner scnr = new Scanner(System.in);\n      String uInput = scnr.next();\n      String result = &quot;&quot;;\n      \n      for (int i = 0; i &lt; uInput.length(); i++) {\n         char c = uInput.charAt(i);\n         if (Character.isLetter(c)) {\n            result += c;\n         }\n      }\n      System.out.println(result);\n            \n   }\n}\n</code></pre>\n"},{"tags":["java","quarkus","drools","bpmn","kogito"],"comments":[{"owner":{"account_id":39135,"reputation":13588,"user_id":112779,"accept_rate":67,"display_name":"Mario Fusco"},"score":0,"creation_date":1699539824,"post_id":77447104,"comment_id":136546947,"body_markdown":"I&#39;m probably not understanding your question, but you can declare the same DataStore in multiple different rule units and then pass the same DataStore instance to all of them at creation time or even set it at a later stage. What am I missing?","body":"I&#39;m probably not understanding your question, but you can declare the same DataStore in multiple different rule units and then pass the same DataStore instance to all of them at creation time or even set it at a later stage. What am I missing?"},{"owner":{"account_id":29856413,"reputation":11,"user_id":22881156,"display_name":"Chaudassin"},"score":0,"creation_date":1699870433,"post_id":77447104,"comment_id":136580744,"body_markdown":"@MarioFusco, let me clarify : with Drools 7, the Working Memory was persistent through ALL the BPMN process. That was very useful because I could declare a variable that was readable and writable through all the process.\n\nWith drools 8 and the RuleUnit style, it seems that every RuleUnit has it own Working Memory, which means there is no more a persistent memory area through the whole workflow.\n\nSeems like the only way to reproduce the behaviour is to declare a process variable in the bpmn and initialize every DataStore in the RuleUnit with it, but it&#39;s not as simple as what I had before.","body":"@MarioFusco, let me clarify : with Drools 7, the Working Memory was persistent through ALL the BPMN process. That was very useful because I could declare a variable that was readable and writable through all the process.  With drools 8 and the RuleUnit style, it seems that every RuleUnit has it own Working Memory, which means there is no more a persistent memory area through the whole workflow.  Seems like the only way to reproduce the behaviour is to declare a process variable in the bpmn and initialize every DataStore in the RuleUnit with it, but it&#39;s not as simple as what I had before."},{"owner":{"account_id":17250244,"reputation":226,"user_id":12490561,"display_name":"Emmanuel B."},"score":0,"creation_date":1699896862,"post_id":77447104,"comment_id":136585782,"body_markdown":"Hi @Chaudassin, \nmaybe another way to phrase it :  is there a way to share a set of objets between BPMN tasks without having to declare them explicitely in a Java Holder object like RuleUnit ?\n\nThe &quot;insert&quot; keyword authorized that in a way in previous drools version as the wm info (with these anonymous &quot;new&quot; objets inserted) was shared among different DRL tasks.\n\nSo some objects in the WM were transient to process/rules and unknown  to outside world. \n\nsee also :  https://stackoverflow.com/questions/77444305/how-does-drl-key-insert-in-rule-conditions-works-with-ruleunit-in-drools","body":"Hi @Chaudassin,  maybe another way to phrase it :  is there a way to share a set of objets between BPMN tasks without having to declare them explicitely in a Java Holder object like RuleUnit ?  The &quot;insert&quot; keyword authorized that in a way in previous drools version as the wm info (with these anonymous &quot;new&quot; objets inserted) was shared among different DRL tasks.  So some objects in the WM were transient to process/rules and unknown  to outside world.   see also :  <a href=\"https://stackoverflow.com/questions/77444305/how-does-drl-key-insert-in-rule-conditions-works-with-ruleunit-in-drools\" title=\"how does drl key insert in rule conditions works with ruleunit in drools\">stackoverflow.com/questions/77444305/&hellip;</a>"}],"owner":{"account_id":29856413,"reputation":11,"user_id":22881156,"display_name":"Chaudassin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1699459856,"creation_date":1699458961,"question_id":77447104,"body_markdown":"Context : I am migrating my Java/DRL project from Drools 7 to Drools 8.\r\n\r\nTo do this I am using the new Rule Unit style combined with kogito/quarkus recommended by Drools. I am trying to figure out how one can achieve to do this :\r\n\r\n&gt; DataSources can be shared across different units, providing a\r\n&gt; coordination mechanism between them. (source -&gt; [sharing_dataSource](https://docs.drools.org/8.39.0.Final/drools-docs/docs-website/drools/KIE/index.html#rule-unit-api_packaging-deploying) )\r\n\r\nLet&#39;s say I have two Rule Unit A and B such as :\r\n\r\n*Start -&gt; A -&gt; B -&gt; End*\r\n\r\nThen I should define two Java Class **AUnit** and **BUnit** implementing RuleUnitData. Both class have their owns DataStore fields standing for the entry-point of each rule unit.\r\n\r\nI don&#39;t understand how it is possible to define a shared DataStore between my two RuleUnits since a DataStore should be declared in either one or the other one ... But maybe I&#39;m getting wrong on something.\r\n\r\nI have actually no idea how to do this.","title":"How to share DataStore between two different rule unit in a BPMN process with Drools 8?","body":"<p>Context : I am migrating my Java/DRL project from Drools 7 to Drools 8.</p>\n<p>To do this I am using the new Rule Unit style combined with kogito/quarkus recommended by Drools. I am trying to figure out how one can achieve to do this :</p>\n<blockquote>\n<p>DataSources can be shared across different units, providing a\ncoordination mechanism between them. (source -&gt; <a href=\"https://docs.drools.org/8.39.0.Final/drools-docs/docs-website/drools/KIE/index.html#rule-unit-api_packaging-deploying\" rel=\"nofollow noreferrer\">sharing_dataSource</a> )</p>\n</blockquote>\n<p>Let's say I have two Rule Unit A and B such as :</p>\n<p><em>Start -&gt; A -&gt; B -&gt; End</em></p>\n<p>Then I should define two Java Class <strong>AUnit</strong> and <strong>BUnit</strong> implementing RuleUnitData. Both class have their owns DataStore fields standing for the entry-point of each rule unit.</p>\n<p>I don't understand how it is possible to define a shared DataStore between my two RuleUnits since a DataStore should be declared in either one or the other one ... But maybe I'm getting wrong on something.</p>\n<p>I have actually no idea how to do this.</p>\n"},{"tags":["java","xml","parsing","dom"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1699389110,"post_id":77441217,"comment_id":136524850,"body_markdown":"You are trying to parse invalid XML? The expected result is an error.","body":"You are trying to parse invalid XML? The expected result is an error."},{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":0,"creation_date":1699389282,"post_id":77441217,"comment_id":136524870,"body_markdown":"your question isn&#39;t really about xml parsing.  you are really asking how to handle data which you expect to be there, which is not (the xml itself is valid).  this is entirely up to you as the developer.  if the data is allowed to be missing, then you should just keep going.  if the data is required, then you should throw an exception or return some other appropriate error to the user.","body":"your question isn&#39;t really about xml parsing.  you are really asking how to handle data which you expect to be there, which is not (the xml itself is valid).  this is entirely up to you as the developer.  if the data is allowed to be missing, then you should just keep going.  if the data is required, then you should throw an exception or return some other appropriate error to the user."},{"owner":{"account_id":2183308,"reputation":19305,"user_id":1932311,"display_name":"Yitzhak Khabinsky"},"score":0,"creation_date":1699389402,"post_id":77441217,"comment_id":136524894,"body_markdown":"While asking a question, you need to provide a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example):\nPlease edit your original question and provide the following:\n(1) Well-formed XML file sample. \n(2) What you need to do, i.e. logic, and your code attempt trying to implement it. \n(3) Desired output based on the sample data in #1 above.\nAll within the question as text, no images.","body":"While asking a question, you need to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>: Please edit your original question and provide the following: (1) Well-formed XML file sample.  (2) What you need to do, i.e. logic, and your code attempt trying to implement it.  (3) Desired output based on the sample data in #1 above. All within the question as text, no images."},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1699389486,"post_id":77441217,"comment_id":136524910,"body_markdown":"@jtahlborn Please distinguish between well-formed and valid. A document is valid when it passed the grammar (=schema) test.","body":"@jtahlborn Please distinguish between well-formed and valid. A document is valid when it passed the grammar (=schema) test."},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1699389783,"post_id":77441217,"comment_id":136524963,"body_markdown":"@aled Valid/invalid XML requires a schema check. As long as that is not happening, all he is trying to parse is wellformed XML, or he gets some syntax error.","body":"@aled Valid/invalid XML requires a schema check. As long as that is not happening, all he is trying to parse is wellformed XML, or he gets some syntax error."}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699389624,"creation_date":1699389280,"answer_id":77441302,"question_id":77441217,"body_markdown":"You are parsing XML into a DOM structure, for that all you need is a syntactically correct XML document. Insiders will talk about a &#39;well formed&#39; document.\r\n\r\nNow you want to enforce that only specific tags are being used, and maybe you want to enforce they occur in the right amount or sequence. This is where you need to define which tags, how often and in what order they should appear.\r\nSuch information goes into a grammar, which would be defined in an [XML Schema][1]. A document that passed a grammar check is called valid.\r\n\r\nThe W3C has a very nice introduction into the topic called [XML Schema Part0: Primer][2].\r\n\r\nIf you believe that is too much to deal with for your small example, you can put the validation into your application. On the DOM tree check whether an element has the expected child node. Or check if it has the expected attribute. If it is missing, your code may make use of a default value.\r\nBut if your document is getting complex, the schema based approach will all of a sudden look simpler and easier to maintain.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/XML_Schema_(W3C)\r\n  [2]: https://www.w3.org/TR/xmlschema-0/","title":"How to handle missing tag when parsing xml using DOM?","body":"<p>You are parsing XML into a DOM structure, for that all you need is a syntactically correct XML document. Insiders will talk about a 'well formed' document.</p>\n<p>Now you want to enforce that only specific tags are being used, and maybe you want to enforce they occur in the right amount or sequence. This is where you need to define which tags, how often and in what order they should appear.\nSuch information goes into a grammar, which would be defined in an <a href=\"https://en.wikipedia.org/wiki/XML_Schema_(W3C)\" rel=\"nofollow noreferrer\">XML Schema</a>. A document that passed a grammar check is called valid.</p>\n<p>The W3C has a very nice introduction into the topic called <a href=\"https://www.w3.org/TR/xmlschema-0/\" rel=\"nofollow noreferrer\">XML Schema Part0: Primer</a>.</p>\n<p>If you believe that is too much to deal with for your small example, you can put the validation into your application. On the DOM tree check whether an element has the expected child node. Or check if it has the expected attribute. If it is missing, your code may make use of a default value.\nBut if your document is getting complex, the schema based approach will all of a sudden look simpler and easier to maintain.</p>\n"},{"tags":[],"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1699459766,"creation_date":1699389716,"answer_id":77441346,"question_id":77441217,"body_markdown":"&gt; Tell me how to handle this case so that in its absence, some other string is written to the ArrayList (for example, &quot;No data&quot;)?\r\n\r\nIf you want defaults for the &quot;title&quot; and &quot;enclosure&quot; values, then set them, on a per-item basis.  For example,\r\n```\r\n        // ...\r\n        Element itemElement = (Element) itemNodeList.item(i);\r\n        String itemTitle = &quot;No title&quot;;\r\n        String itemEnclosure = &quot;no data&quot;;\r\n        // ...\r\n```\r\nThen replace those appropriately as you parse the child nodes, instead of immediately updating your lists.  For example,\r\n```\r\n                    // ...\r\n                    case &quot;enclosure&quot;:{\r\n                        itemEnclosure = childElement.getAttribute(&quot;url&quot;);\r\n                        break;\r\n                    }\r\n                    // ...\r\n```\r\nAfter you have processed all the children of each item node, you have the appropriate information to add to your lists, whether it was read from child nodes or remains the default:\r\n```\r\n        // ...\r\n        for (int j = 0; j &lt; childNodes.getLength(); j++){\r\n            // ...\r\n        }\r\n        title.add(itemTitle);\r\n        enclosure.add(itemEnclosure);\r\n        // ...\r\n```\r\n\r\n----\r\nBe aware, however, that if any of your items contain more than one title or more than one enclosure, then some of those will not be captured.  If you want to be able to support multiples like that then you need a different internal representation for your data.","title":"How to handle missing tag when parsing xml using DOM?","body":"<blockquote>\n<p>Tell me how to handle this case so that in its absence, some other string is written to the ArrayList (for example, &quot;No data&quot;)?</p>\n</blockquote>\n<p>If you want defaults for the &quot;title&quot; and &quot;enclosure&quot; values, then set them, on a per-item basis.  For example,</p>\n<pre><code>        // ...\n        Element itemElement = (Element) itemNodeList.item(i);\n        String itemTitle = &quot;No title&quot;;\n        String itemEnclosure = &quot;no data&quot;;\n        // ...\n</code></pre>\n<p>Then replace those appropriately as you parse the child nodes, instead of immediately updating your lists.  For example,</p>\n<pre><code>                    // ...\n                    case &quot;enclosure&quot;:{\n                        itemEnclosure = childElement.getAttribute(&quot;url&quot;);\n                        break;\n                    }\n                    // ...\n</code></pre>\n<p>After you have processed all the children of each item node, you have the appropriate information to add to your lists, whether it was read from child nodes or remains the default:</p>\n<pre><code>        // ...\n        for (int j = 0; j &lt; childNodes.getLength(); j++){\n            // ...\n        }\n        title.add(itemTitle);\n        enclosure.add(itemEnclosure);\n        // ...\n</code></pre>\n<hr />\n<p>Be aware, however, that if any of your items contain more than one title or more than one enclosure, then some of those will not be captured.  If you want to be able to support multiples like that then you need a different internal representation for your data.</p>\n"}],"owner":{"account_id":18844459,"reputation":5,"user_id":17542986,"display_name":"Илья Величко"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77441346,"answer_count":2,"score":0,"last_activity_date":1699459766,"creation_date":1699388314,"question_id":77441217,"body_markdown":"I&#39;m trying to do XML parsing using DOM, but the problem is that the &lt;enclosure&gt; tag is missing in some places. Tell me how to handle this case so that in its absence, some other string is written to the ArrayList (for example, &quot;No data&quot;)? I&#39;m new to Java. I did it according to the tutorial\r\n\r\nXML of similar content:\r\n\r\n    &lt;item&gt;\r\n    &lt;title&gt;number 1&lt;/title&gt;\r\n    &lt;/item&gt;\r\n    \r\n    &lt;item&gt;\r\n    &lt;title&gt;number 2&lt;/title&gt;\r\n    &lt;enclosure url=&quot;https://www.google.com/&quot;/&gt;\r\n    &lt;/item&gt;\r\n\r\nPart of the Java Code:\r\n\r\n    List&lt;String&gt; title = new ArrayList&lt;&gt;(); \r\n    List&lt;String&gt; enclosure = new ArrayList&lt;&gt;();\r\n\r\n    NodeList itemNodeList = document.getElementsByTagName(&quot;item&quot;);\r\n    for (int i = 0; i &lt; itemNodeList.getLength(); i++){\r\n        if (itemNodeList.item(i).getNodeType() == Node.ELEMENT_NODE){\r\n            Element itemElement = (Element) itemNodeList.item(i);\r\n\r\n            NodeList childNodes = itemElement.getChildNodes();\r\n            for (int j = 0; j &lt; childNodes.getLength(); j++){\r\n                if (childNodes.item(j).getNodeType() == Node.ELEMENT_NODE){\r\n                    Element childElement = (Element) childNodes.item(j);\r\n                    \r\n                    switch (childElement.getNodeName()){\r\n                        case &quot;title&quot;:{\r\n                            title.add(childElement.getTextContent());  \r\n                            break;\r\n                        }\r\n                        case &quot;enclosure&quot;:{\r\n                            String info = childElement.getAttribute(&quot;url&quot;);\r\n                            enclosure.add(info); \r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"How to handle missing tag when parsing xml using DOM?","body":"<p>I'm trying to do XML parsing using DOM, but the problem is that the  tag is missing in some places. Tell me how to handle this case so that in its absence, some other string is written to the ArrayList (for example, &quot;No data&quot;)? I'm new to Java. I did it according to the tutorial</p>\n<p>XML of similar content:</p>\n<pre><code>&lt;item&gt;\n&lt;title&gt;number 1&lt;/title&gt;\n&lt;/item&gt;\n\n&lt;item&gt;\n&lt;title&gt;number 2&lt;/title&gt;\n&lt;enclosure url=&quot;https://www.google.com/&quot;/&gt;\n&lt;/item&gt;\n</code></pre>\n<p>Part of the Java Code:</p>\n<pre><code>List&lt;String&gt; title = new ArrayList&lt;&gt;(); \nList&lt;String&gt; enclosure = new ArrayList&lt;&gt;();\n\nNodeList itemNodeList = document.getElementsByTagName(&quot;item&quot;);\nfor (int i = 0; i &lt; itemNodeList.getLength(); i++){\n    if (itemNodeList.item(i).getNodeType() == Node.ELEMENT_NODE){\n        Element itemElement = (Element) itemNodeList.item(i);\n\n        NodeList childNodes = itemElement.getChildNodes();\n        for (int j = 0; j &lt; childNodes.getLength(); j++){\n            if (childNodes.item(j).getNodeType() == Node.ELEMENT_NODE){\n                Element childElement = (Element) childNodes.item(j);\n                \n                switch (childElement.getNodeName()){\n                    case &quot;title&quot;:{\n                        title.add(childElement.getTextContent());  \n                        break;\n                    }\n                    case &quot;enclosure&quot;:{\n                        String info = childElement.getAttribute(&quot;url&quot;);\n                        enclosure.add(info); \n                        break;\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","console"],"comments":[{"owner":{"account_id":7567,"reputation":10188,"user_id":13189,"accept_rate":75,"display_name":"eckes"},"score":0,"creation_date":1430353520,"post_id":6172972,"comment_id":48034544,"body_markdown":"BTW: the correct way to write to the console is via `System.console()` (which knows the encoding), however this does not work with Eclipse as it has a missing console emulation.","body":"BTW: the correct way to write to the console is via <code>System.console()</code> (which knows the encoding), however this does not work with Eclipse as it has a missing console emulation."}],"answers":[{"tags":[],"owner":{"display_name":"user684934"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1306737325,"creation_date":1306737325,"answer_id":6173007,"question_id":6172972,"body_markdown":"Probably you want to ask your IDE, assuming you&#39;re using one.  If you&#39;re not, then it&#39;s whatever your shell is using.  If you happen to be using eclipse, it will be the same as your &quot;project characterset&quot;, which you can find/change by right-clicking on your project, properties, and Resource -&gt; Text file encoding","title":"How to get console charset?","body":"<p>Probably you want to ask your IDE, assuming you're using one.  If you're not, then it's whatever your shell is using.  If you happen to be using eclipse, it will be the same as your \"project characterset\", which you can find/change by right-clicking on your project, properties, and Resource -> Text file encoding</p>\n"},{"comments":[{"owner":{"account_id":7567,"reputation":10188,"user_id":13189,"accept_rate":75,"display_name":"eckes"},"score":4,"creation_date":1430352791,"post_id":6173017,"comment_id":48034312,"body_markdown":"Actually Java detects the console encoding for System.console() but there is no exported functionality to retrieve it. JMH does an hack to get to it with reflection: http://hg.openjdk.java.net/code-tools/jmh/file/0797222e066e/jmh-core/src/main/java/org/openjdk/jmh/util/Utils.java#l179","body":"Actually Java detects the console encoding for System.console() but there is no exported functionality to retrieve it. JMH does an hack to get to it with reflection: <a href=\"http://hg.openjdk.java.net/code-tools/jmh/file/0797222e066e/jmh-core/src/main/java/org/openjdk/jmh/util/Utils.java#l179\" rel=\"nofollow noreferrer\">hg.openjdk.java.net/code-tools/jmh/file/0797222e066e/jmh-cor&zwnj;&#8203;e/&hellip;</a>"}],"tags":[],"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1306737408,"creation_date":1306737408,"answer_id":6173017,"question_id":6172972,"body_markdown":"In general: you&#39;d have to ask the *shell* what charset it is currently using to display characters. \r\n\r\nGuessing not knowing: there is no standard way in Java as (I guess) there&#39;s no standard for consoles to report the actual charset. We&#39;ll have to detect the actual operating system or *console provider* (eclipse, ...) and use their specific functionalities to get the name of the actual charset.\r\n\r\n","title":"How to get console charset?","body":"<p>In general: you'd have to ask the <em>shell</em> what charset it is currently using to display characters. </p>\n\n<p>Guessing not knowing: there is no standard way in Java as (I guess) there's no standard for consoles to report the actual charset. We'll have to detect the actual operating system or <em>console provider</em> (eclipse, ...) and use their specific functionalities to get the name of the actual charset.</p>\n"},{"comments":[{"owner":{"account_id":7567,"reputation":10188,"user_id":13189,"accept_rate":75,"display_name":"eckes"},"score":0,"creation_date":1430352882,"post_id":6173066,"comment_id":48034345,"body_markdown":"Actually System.out gives you the IO encoding, but you can use a similar approach to read &quot;cs&quot; from System.console(): http://hg.openjdk.java.net/code-tools/jmh/file/0797222e066e/jmh-core/src/main/java/org/openjdk/jmh/util/Utils.java#l179 which is initialized by the launcher (for Windows it gives you the ANSI/UNICODE CS, I think for Linux it gives you the default charset, same as IO Charset)","body":"Actually System.out gives you the IO encoding, but you can use a similar approach to read &quot;cs&quot; from System.console(): <a href=\"http://hg.openjdk.java.net/code-tools/jmh/file/0797222e066e/jmh-core/src/main/java/org/openjdk/jmh/util/Utils.java#l179\" rel=\"nofollow noreferrer\">hg.openjdk.java.net/code-tools/jmh/file/0797222e066e/jmh-cor&zwnj;&#8203;e/&hellip;</a> which is initialized by the launcher (for Windows it gives you the ANSI/UNICODE CS, I think for Linux it gives you the default charset, same as IO Charset)"},{"owner":{"account_id":1838522,"reputation":472,"user_id":1668411,"display_name":"T-Gergely"},"score":0,"creation_date":1456317016,"post_id":6173066,"comment_id":58889030,"body_markdown":"@Joachim Sauer This works on Windows 7 HU, too where there&#39;s no correct way to set up the console (by using chcp). (Eg. &quot;ping&quot; only displays readable text with cp852, other commands like &quot;help&quot; work with both cp852 and cp1250, &quot;wevtutil.exe qe System&quot; only works with cp1250.)","body":"@Joachim Sauer This works on Windows 7 HU, too where there&#39;s no correct way to set up the console (by using chcp). (Eg. &quot;ping&quot; only displays readable text with cp852, other commands like &quot;help&quot; work with both cp852 and cp1250, &quot;wevtutil.exe qe System&quot; only works with cp1250.)"},{"owner":{"account_id":157392,"reputation":3230,"user_id":375317,"display_name":"cayhorstmann"},"score":0,"creation_date":1462661606,"post_id":6173066,"comment_id":61732720,"body_markdown":"Amazingly enough, on the US version of Windows 10, this reports `Cp437`. Some things never change.","body":"Amazingly enough, on the US version of Windows 10, this reports <code>Cp437</code>. Some things never change."}],"tags":[],"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1306737737,"creation_date":1306737737,"answer_id":6173066,"question_id":6172972,"body_markdown":"There is no standardized way to get that information from the system. *Usually* it will be the platform default encoding, but as you&#39;ve noticed, that&#39;s not necessarily the case (it&#39;s not documented, as far as I know).\r\n\r\nYou *could* go the ugly route and use reflection to find out which encoding Java uses. The following code is **entirely un-portable** and has only been verified to work on one specific version of the OpenJDK, it&#39;s experimentation and **not** meant for production:\r\n\r\n\tfinal Class&lt;? extends PrintStream&gt; stdOutClass = System.out.getClass();\r\n\tfinal Field charOutField = stdOutClass.getDeclaredField(&quot;charOut&quot;);\r\n\tcharOutField.setAccessible(true);\r\n\tOutputStreamWriter o = (OutputStreamWriter) charOutField.get(System.out);\r\n\tSystem.out.println(o.getEncoding());\r\n\r\nThis prints `UTF8` [sic] on my system, which isn&#39;t surprising, as I&#39;m using a UTF-8 locale on a Linux machine.","title":"How to get console charset?","body":"<p>There is no standardized way to get that information from the system. <em>Usually</em> it will be the platform default encoding, but as you've noticed, that's not necessarily the case (it's not documented, as far as I know).</p>\n\n<p>You <em>could</em> go the ugly route and use reflection to find out which encoding Java uses. The following code is <strong>entirely un-portable</strong> and has only been verified to work on one specific version of the OpenJDK, it's experimentation and <strong>not</strong> meant for production:</p>\n\n<pre><code>final Class&lt;? extends PrintStream&gt; stdOutClass = System.out.getClass();\nfinal Field charOutField = stdOutClass.getDeclaredField(\"charOut\");\ncharOutField.setAccessible(true);\nOutputStreamWriter o = (OutputStreamWriter) charOutField.get(System.out);\nSystem.out.println(o.getEncoding());\n</code></pre>\n\n<p>This prints <code>UTF8</code> [sic] on my system, which isn't surprising, as I'm using a UTF-8 locale on a Linux machine.</p>\n"},{"comments":[{"owner":{"account_id":217137,"reputation":37872,"user_id":472792,"accept_rate":50,"display_name":"Arjan Tijms"},"score":1,"creation_date":1522962978,"post_id":15953692,"comment_id":86375073,"body_markdown":"If you don&#39;t explicitly provide a charset, osw.getEncoding() should just give you the platform default one. See for instance: https://github.com/dmlloyd/openjdk/blob/342a565a2da8abd69c4ab85e285bb5f03b48b2c9/src/java.base/share/classes/sun/nio/cs/StreamEncoder.java#L56","body":"If you don&#39;t explicitly provide a charset, osw.getEncoding() should just give you the platform default one. See for instance: <a href=\"https://github.com/dmlloyd/openjdk/blob/342a565a2da8abd69c4ab85e285bb5f03b48b2c9/src/java.base/share/classes/sun/nio/cs/StreamEncoder.java#L56\" rel=\"nofollow noreferrer\">github.com/dmlloyd/openjdk/blob/&hellip;</a>"},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1605777841,"post_id":15953692,"comment_id":114757946,"body_markdown":"If I am not mistaken this will effectively just return `Charset.defaultCharset()` which may have been set via property `file.encoding`.","body":"If I am not mistaken this will effectively just return <code>Charset.defaultCharset()</code> which may have been set via property <code>file.encoding</code>."}],"tags":[],"owner":{"account_id":316613,"reputation":1876,"user_id":632879,"display_name":"ubzack"},"comment_count":2,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1365696513,"creation_date":1365696513,"answer_id":15953692,"question_id":6172972,"body_markdown":"Since JDK 1.1, you can construct an OutputStreamWriter using the System out field, and call getEncoding().\r\n\r\n    OutputStreamWriter osw = new OutputStreamWriter(System.out);\r\n    System.out.println(osw.getEncoding());","title":"How to get console charset?","body":"<p>Since JDK 1.1, you can construct an OutputStreamWriter using the System out field, and call getEncoding().</p>\n\n<pre><code>OutputStreamWriter osw = new OutputStreamWriter(System.out);\nSystem.out.println(osw.getEncoding());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2316051,"reputation":2805,"user_id":2033093,"display_name":"David M. Lloyd"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699459689,"creation_date":1699459689,"answer_id":77447187,"question_id":6172972,"body_markdown":"Since Java 17, there is a method called `charset` on `java.io.Console` which you can call to get the encoding for the console. Use it like this:\r\n\r\n```java\r\nConsole con = System.console();\r\nCharset cs = con.charset();\r\n```\r\n","title":"How to get console charset?","body":"<p>Since Java 17, there is a method called <code>charset</code> on <code>java.io.Console</code> which you can call to get the encoding for the console. Use it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Console con = System.console();\nCharset cs = con.charset();\n</code></pre>\n"}],"owner":{"account_id":748218,"reputation":165,"user_id":739890,"display_name":"tmp"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4356,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":6173017,"answer_count":5,"score":9,"last_activity_date":1699459689,"creation_date":1306737021,"question_id":6172972,"body_markdown":"How to get console (cmd.exe in windows, linux shell, or eclipse console output) charset encoding?\r\n`java.nio.charset.Charset.defaultCharset()` seems to be only for input/output files, not console.","title":"How to get console charset?","body":"<p>How to get console (cmd.exe in windows, linux shell, or eclipse console output) charset encoding?\n<code>java.nio.charset.Charset.defaultCharset()</code> seems to be only for input/output files, not console.</p>\n"},{"tags":["java","pdfbox"],"comments":[{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1638456353,"post_id":70199219,"comment_id":124097530,"body_markdown":"The code looks fine. Make sure you have the latest jdk, and the latest PDFBox version (2.0.24).","body":"The code looks fine. Make sure you have the latest jdk, and the latest PDFBox version (2.0.24)."},{"owner":{"account_id":22795094,"reputation":25,"user_id":16948779,"display_name":"Leah"},"score":0,"creation_date":1638683284,"post_id":70199219,"comment_id":124150398,"body_markdown":"@TilmanHausherr i changed PDFBox to latest version and my jdk is 11.0.2. The message still appear (twice). Should the warning bother me?","body":"@TilmanHausherr i changed PDFBox to latest version and my jdk is 11.0.2. The message still appear (twice). Should the warning bother me?"},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1638775083,"post_id":70199219,"comment_id":124168688,"body_markdown":"The warning isn&#39;t that important, it warns about poor quality programming. However if it warns twice despite that you create only one document, then it means the code above isn&#39;t your actual code. Look for other `new PDDocument()` or `PDDocument.load()` occurrences in your code.","body":"The warning isn&#39;t that important, it warns about poor quality programming. However if it warns twice despite that you create only one document, then it means the code above isn&#39;t your actual code. Look for other <code>new PDDocument()</code> or <code>PDDocument.load()</code> occurrences in your code."},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1638775133,"post_id":70199219,"comment_id":124168699,"body_markdown":"The current jdk11 is `11.0.13`, not `11.0.2`.","body":"The current jdk11 is <code>11.0.13</code>, not <code>11.0.2</code>."}],"answers":[{"comments":[{"owner":{"account_id":1019341,"reputation":5527,"user_id":1030169,"display_name":"jmoerdyk"},"score":0,"creation_date":1699464671,"post_id":77447130,"comment_id":136536018,"body_markdown":"spartalos, a link to a solution is welcome, but please ensure your answer is useful without it: [add context around the link](//meta.stackexchange.com/a/8259) so your fellow users will have some idea what it is and why it is there, then quote the most relevant part of the page you are linking to in case the target page is unavailable. [Answers that are little more than a link may be deleted.](/help/deleted-answers)","body":"spartalos, a link to a solution is welcome, but please ensure your answer is useful without it: <a href=\"//meta.stackexchange.com/a/8259\">add context around the link</a> so your fellow users will have some idea what it is and why it is there, then quote the most relevant part of the page you are linking to in case the target page is unavailable. <a href=\"/help/deleted-answers\">Answers that are little more than a link may be deleted.</a>"}],"tags":[],"owner":{"account_id":19717239,"reputation":98,"user_id":14436422,"display_name":"spartalos"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699459192,"creation_date":1699459192,"answer_id":77447130,"question_id":70199219,"body_markdown":"According to their documentation you have to close the pdf in a finally block:\r\n\r\nhttps://pdfbox.apache.org/2.0/faq.html#why-do-i-get-a-%22warning%3A-you-did-not-close-the-pdf-document%22%3F\r\n\r\nIt&#39;s worth a try.","title":"PdfBox: You did not close a PDF Document","body":"<p>According to their documentation you have to close the pdf in a finally block:</p>\n<p><a href=\"https://pdfbox.apache.org/2.0/faq.html#why-do-i-get-a-%22warning%3A-you-did-not-close-the-pdf-document%22%3F\" rel=\"nofollow noreferrer\">https://pdfbox.apache.org/2.0/faq.html#why-do-i-get-a-%22warning%3A-you-did-not-close-the-pdf-document%22%3F</a></p>\n<p>It's worth a try.</p>\n"}],"owner":{"account_id":22795094,"reputation":25,"user_id":16948779,"display_name":"Leah"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":589,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699459192,"creation_date":1638447038,"question_id":70199219,"body_markdown":"I have closed the PDDocument in Apache PDFBox after convert image to pdf. I am getting the warning: You did not close PDF Document when I shutdown my instance. \r\n\r\nCode:\r\n\r\n    private File imageToPDDocument(Path mergeDirectory, File file) throws IOException {\r\n            PDDocument doc = new PDDocument();\r\n            InputStream in = new FileInputStream(file);\r\n            BufferedImage bimg = ImageIO.read(in);\r\n            float width = bimg.getWidth();\r\n            float height = bimg.getHeight();\r\n            PDPage page = new PDPage(new PDRectangle(width, height));\r\n            doc.addPage(page);\r\n            PDImageXObject img = PDImageXObject.createFromFileByContent(file, doc);\r\n            PDPageContentStream contentStream = new PDPageContentStream(doc, page);\r\n            contentStream.drawImage(img, 0, 0);\r\n            contentStream.close();\r\n            File pdfFile = Files.createTempFile(mergeDirectory, String.valueOf(System.currentTimeMillis()), &quot;.tmp&quot;).toFile();\r\n            doc.save(pdfFile);\r\n            in.close();\r\n            doc.close();\r\n            return pdfFile;\r\n        }","title":"PdfBox: You did not close a PDF Document","body":"<p>I have closed the PDDocument in Apache PDFBox after convert image to pdf. I am getting the warning: You did not close PDF Document when I shutdown my instance.</p>\n<p>Code:</p>\n<pre><code>private File imageToPDDocument(Path mergeDirectory, File file) throws IOException {\n        PDDocument doc = new PDDocument();\n        InputStream in = new FileInputStream(file);\n        BufferedImage bimg = ImageIO.read(in);\n        float width = bimg.getWidth();\n        float height = bimg.getHeight();\n        PDPage page = new PDPage(new PDRectangle(width, height));\n        doc.addPage(page);\n        PDImageXObject img = PDImageXObject.createFromFileByContent(file, doc);\n        PDPageContentStream contentStream = new PDPageContentStream(doc, page);\n        contentStream.drawImage(img, 0, 0);\n        contentStream.close();\n        File pdfFile = Files.createTempFile(mergeDirectory, String.valueOf(System.currentTimeMillis()), &quot;.tmp&quot;).toFile();\n        doc.save(pdfFile);\n        in.close();\n        doc.close();\n        return pdfFile;\n    }\n</code></pre>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1699458966,"creation_date":1699458966,"answer_id":77447106,"question_id":77447049,"body_markdown":"Take the returns out of the individual ifs, and put it after the last check.  You want to run all the if statements to check all the error conditions.  The returns are making it leave the function after the first failure it finds.\r\n\r\nUse a single return right before you do the calculations that may not have data.  That will prevent a crash or incorrect results from not being able to run the calculation, but still run all the checks.","title":"How to setError() on EditText fields that dont meet the requirements","body":"<p>Take the returns out of the individual ifs, and put it after the last check.  You want to run all the if statements to check all the error conditions.  The returns are making it leave the function after the first failure it finds.</p>\n<p>Use a single return right before you do the calculations that may not have data.  That will prevent a crash or incorrect results from not being able to run the calculation, but still run all the checks.</p>\n"}],"owner":{"account_id":29856383,"reputation":3,"user_id":22881132,"display_name":"PocketGrammer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77447106,"answer_count":1,"score":0,"last_activity_date":1699458966,"creation_date":1699458441,"question_id":77447049,"body_markdown":"I am currently in the process of making my first high school Android App project. \r\nThe App is basically a pressure calculator where the user enters 2 numbers (force and area) and the output is the pressure (force/area) displayed in certain pressure units such as Bar, Pascal and mmHg.\r\nThat part is working fine, when I enter certain numbers I get the result that is correct.\r\nThe problem is when I want to setError() on EditText fields that dont meet the next requirements: 1. The input field is 0 (cant divide with 0) and 2. The field is empty.\r\nI have written code that prevents the app from crashing but doesnt properly set the error indicator on all fields that dont meet the criteria.\r\nFor an example, in this image although both of the fields are empty, I only get the error indicator on the 1st field and not the both: https://i.stack.imgur.com/vXXQj.png\r\nOr here, where one of the fields is empty and the other has a zero but only the empty field gets an indicator (https://i.stack.imgur.com/7pD63.png).\r\nHere is the code from MainActivity.java:\r\n\r\n\r\n```Java\r\n\r\n\r\n\r\npackage com.example.app_calculator;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.EditText;\r\nimport android.widget.TextView;\r\nimport android.widget.Button;\r\n\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        TextView tvTitle, tvForce, tvSA, tvOutput, tvPascal, tvBar, tvmmHg;\r\n        EditText etForce, etSA;\r\n\r\n        Button button;\r\n\r\n       tvTitle=findViewById(R.id.tvTitle);\r\n       tvForce=findViewById(R.id.tvForce);\r\n       tvSA=findViewById(R.id.tvSA);\r\n       tvOutput=findViewById(R.id.tvOutput);\r\n       tvPascal=findViewById(R.id.tvPascal);\r\n       tvBar=findViewById(R.id.tvBar);\r\n       tvmmHg=findViewById(R.id.tvmmHg);\r\n\r\n       etForce=findViewById(R.id.etForce);\r\n       etSA=findViewById(R.id.etSA);\r\n\r\n\r\n       button=findViewById(R.id.button);\r\n\r\n\r\n\r\nbutton.setOnClickListener(new View.OnClickListener() {\r\n    @Override\r\n    public void onClick(View view) {\r\n\r\n\r\n\r\n        String force0 = etForce.getText().toString();\r\n        String area0 = etSA.getText().toString();\r\n\r\n\r\n        String errorMsg1 = getString(R.string.key_errorMsg1);\r\n        String errorMsg2 = getString(R.string.key_errorMsg2);\r\n\r\n\r\n\r\n        if(force0.isEmpty()){\r\n            etForce.setError(errorMsg1);\r\n            return;\r\n        }\r\n\r\n        if(area0.isEmpty()){\r\n            etSA.setError(errorMsg1);\r\n            return;\r\n        }\r\n\r\n        if(area0.matches(&quot;0&quot;)){\r\n            etSA.setError(errorMsg2);\r\n            return;\r\n        }\r\n\r\n        if(force0.matches(&quot;0&quot;)){\r\n            etForce.setError(errorMsg2);\r\n            return;\r\n        }\r\n\r\n        if(!force0.isEmpty() &amp;&amp; !area0.isEmpty() &amp;&amp; !force0.matches(&quot;0&quot;) &amp;&amp; !area0.matches(&quot;0&quot;)){\r\n\r\n        double force = Double.valueOf(force0);\r\n        double area = Double.valueOf(area0);\r\n\r\n        //Paskali\r\n        double pascal = (double)force/area;\r\n        tvPascal.setText(String.valueOf(pascal+&quot; Pa&quot;));\r\n\r\n\r\n        //Bar\r\n        double bar = pascal/100000;\r\n        tvBar.setText(String.valueOf(bar+&quot; Bar&quot;));\r\n\r\n        //mmHg\r\n\r\n        double mmHg = pascal * 0.00750062;\r\n        tvmmHg.setText(String.valueOf(mmHg+&quot; mmHg&quot;));\r\n    }\r\n\r\n    }\r\n});\r\n\r\n\r\n\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nI tried basically everything but have no clue how to fix it. Any help is appreciated.","title":"How to setError() on EditText fields that dont meet the requirements","body":"<p>I am currently in the process of making my first high school Android App project.\nThe App is basically a pressure calculator where the user enters 2 numbers (force and area) and the output is the pressure (force/area) displayed in certain pressure units such as Bar, Pascal and mmHg.\nThat part is working fine, when I enter certain numbers I get the result that is correct.\nThe problem is when I want to setError() on EditText fields that dont meet the next requirements: 1. The input field is 0 (cant divide with 0) and 2. The field is empty.\nI have written code that prevents the app from crashing but doesnt properly set the error indicator on all fields that dont meet the criteria.\nFor an example, in this image although both of the fields are empty, I only get the error indicator on the 1st field and not the both: <a href=\"https://i.stack.imgur.com/vXXQj.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/vXXQj.png</a>\nOr here, where one of the fields is empty and the other has a zero but only the empty field gets an indicator (<a href=\"https://i.stack.imgur.com/7pD63.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/7pD63.png</a>).\nHere is the code from MainActivity.java:</p>\n<pre><code>\n\n\npackage com.example.app_calculator;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.EditText;\nimport android.widget.TextView;\nimport android.widget.Button;\n\n\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        TextView tvTitle, tvForce, tvSA, tvOutput, tvPascal, tvBar, tvmmHg;\n        EditText etForce, etSA;\n\n        Button button;\n\n       tvTitle=findViewById(R.id.tvTitle);\n       tvForce=findViewById(R.id.tvForce);\n       tvSA=findViewById(R.id.tvSA);\n       tvOutput=findViewById(R.id.tvOutput);\n       tvPascal=findViewById(R.id.tvPascal);\n       tvBar=findViewById(R.id.tvBar);\n       tvmmHg=findViewById(R.id.tvmmHg);\n\n       etForce=findViewById(R.id.etForce);\n       etSA=findViewById(R.id.etSA);\n\n\n       button=findViewById(R.id.button);\n\n\n\nbutton.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View view) {\n\n\n\n        String force0 = etForce.getText().toString();\n        String area0 = etSA.getText().toString();\n\n\n        String errorMsg1 = getString(R.string.key_errorMsg1);\n        String errorMsg2 = getString(R.string.key_errorMsg2);\n\n\n\n        if(force0.isEmpty()){\n            etForce.setError(errorMsg1);\n            return;\n        }\n\n        if(area0.isEmpty()){\n            etSA.setError(errorMsg1);\n            return;\n        }\n\n        if(area0.matches(&quot;0&quot;)){\n            etSA.setError(errorMsg2);\n            return;\n        }\n\n        if(force0.matches(&quot;0&quot;)){\n            etForce.setError(errorMsg2);\n            return;\n        }\n\n        if(!force0.isEmpty() &amp;&amp; !area0.isEmpty() &amp;&amp; !force0.matches(&quot;0&quot;) &amp;&amp; !area0.matches(&quot;0&quot;)){\n\n        double force = Double.valueOf(force0);\n        double area = Double.valueOf(area0);\n\n        //Paskali\n        double pascal = (double)force/area;\n        tvPascal.setText(String.valueOf(pascal+&quot; Pa&quot;));\n\n\n        //Bar\n        double bar = pascal/100000;\n        tvBar.setText(String.valueOf(bar+&quot; Bar&quot;));\n\n        //mmHg\n\n        double mmHg = pascal * 0.00750062;\n        tvmmHg.setText(String.valueOf(mmHg+&quot; mmHg&quot;));\n    }\n\n    }\n});\n\n\n\n    }\n}\n\n</code></pre>\n<p>I tried basically everything but have no clue how to fix it. Any help is appreciated.</p>\n"},{"tags":["java","keycloak"],"answers":[{"comments":[{"owner":{"account_id":20278663,"reputation":1,"user_id":14873027,"display_name":"Tatarusanu"},"score":0,"creation_date":1699459041,"post_id":72202634,"comment_id":136534817,"body_markdown":"Yap, it was that the solution!  Thks","body":"Yap, it was that the solution!  Thks"}],"tags":[],"owner":{"account_id":25264129,"reputation":1,"user_id":19094587,"display_name":"Nouha Ameri"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652334347,"creation_date":1652278444,"answer_id":72202634,"question_id":71606483,"body_markdown":"    kc.realm(realmName).groups().group(groupRepresentation.getId()).remove();\r\n\r\ntry to delete it with the group representation id it works.","title":"Keycloak: how to delete and edit a Group","body":"<pre><code>kc.realm(realmName).groups().group(groupRepresentation.getId()).remove();\n</code></pre>\n<p>try to delete it with the group representation id it works.</p>\n"},{"tags":[],"owner":{"account_id":20278663,"reputation":1,"user_id":14873027,"display_name":"Tatarusanu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699458936,"creation_date":1699458936,"answer_id":77447099,"question_id":71606483,"body_markdown":"Just for the record, this was the solution:\r\n\r\n    public void deleteKeycloakGroup() {\r\n        try {\r\n            GroupRepresentation groupRepresentation = keycloak.realm(realm)\r\n                    .groups()\r\n                    .groups()\r\n                    .stream()\r\n                    .filter(xpto -&gt; xpto.getName().equals()).collect(Collectors.toList()).get(0);\r\n\r\n            keycloak.realm(realm).groups().group(groupRepresentation.getId()).remove();\r\n\r\n        } catch (Exception e) {\r\n        }\r\n    }\r\n\r\n\r\nIgnore the .filter()...","title":"Keycloak: how to delete and edit a Group","body":"<p>Just for the record, this was the solution:</p>\n<pre><code>public void deleteKeycloakGroup() {\n    try {\n        GroupRepresentation groupRepresentation = keycloak.realm(realm)\n                .groups()\n                .groups()\n                .stream()\n                .filter(xpto -&gt; xpto.getName().equals()).collect(Collectors.toList()).get(0);\n\n        keycloak.realm(realm).groups().group(groupRepresentation.getId()).remove();\n\n    } catch (Exception e) {\n    }\n}\n</code></pre>\n<p>Ignore the .filter()...</p>\n"}],"owner":{"account_id":20278663,"reputation":1,"user_id":14873027,"display_name":"Tatarusanu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1539,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1699458936,"creation_date":1648141052,"question_id":71606483,"body_markdown":"I already tried a bunch of different ways and none of them work.\r\n\r\n(First of all im using this, and works with other methods, like create/delete user, create group etc etc)\r\n\r\n    public void startKeycoak(String username, String password) {\r\n        Keycloak kc = KeycloakBuilder.builder()\r\n                .serverUrl(uri)\r\n                .realm(realmName)\r\n                .username(username)\r\n                .password(password)\r\n                .clientId(client)\r\n                .resteasyClient(\r\n                        new ResteasyClientBuilder()\r\n                                .connectionPoolSize(10).build())\r\n                .build();\r\n    \r\n        this.kc = kc;\r\n    }\r\n\r\nProblem starts here:\r\n\r\n    public void deleteGroup(String groupName) {\r\n        GroupRepresentation groupRepresentation = kc.realm(realmName)\r\n                .groups()\r\n                .groups()\r\n                .stream()\r\n                .filter(group -&gt; group.getName().equals(groupName)).collect(Collectors.toList()).get(0);\r\n    \r\n    \r\n        //  kc.realm(realmName).groups().group(existingGroups.getName()).remove(); -&gt; Not Working \r\n    \r\n      //  boolean a = kc.realm(realmName).groups().groups().remove(groupRepresentation); -&gt; Not Workings - returns a false\r\n    }\r\n    \r\n        public void updateGroup(String newName, String oldName) {\r\n            GroupRepresentation groupRepresentation = kc.realm(realmName)\r\n                    .groups()\r\n                    .groups()\r\n                    .stream()\r\n                    .filter(group -&gt; group.getName().equals(oldName)).collect(Collectors.toList()).get(0);\r\n    \r\n            //groupRepresentation.setName(newName);  -&gt; 1 - Not working\r\n    \r\n            //kc.realm(realmName).groups().groups().stream().filter(g -&gt; {  -&gt; 2 - Not Working\r\n                //g.setName(oldName);\r\n                //return false;\r\n            //});\r\n        }\r\n\r\nLike I said before its working with a lot of methods except those two.","title":"Keycloak: how to delete and edit a Group","body":"<p>I already tried a bunch of different ways and none of them work.</p>\n<p>(First of all im using this, and works with other methods, like create/delete user, create group etc etc)</p>\n<pre><code>public void startKeycoak(String username, String password) {\n    Keycloak kc = KeycloakBuilder.builder()\n            .serverUrl(uri)\n            .realm(realmName)\n            .username(username)\n            .password(password)\n            .clientId(client)\n            .resteasyClient(\n                    new ResteasyClientBuilder()\n                            .connectionPoolSize(10).build())\n            .build();\n\n    this.kc = kc;\n}\n</code></pre>\n<p>Problem starts here:</p>\n<pre><code>public void deleteGroup(String groupName) {\n    GroupRepresentation groupRepresentation = kc.realm(realmName)\n            .groups()\n            .groups()\n            .stream()\n            .filter(group -&gt; group.getName().equals(groupName)).collect(Collectors.toList()).get(0);\n\n\n    //  kc.realm(realmName).groups().group(existingGroups.getName()).remove(); -&gt; Not Working \n\n  //  boolean a = kc.realm(realmName).groups().groups().remove(groupRepresentation); -&gt; Not Workings - returns a false\n}\n\n    public void updateGroup(String newName, String oldName) {\n        GroupRepresentation groupRepresentation = kc.realm(realmName)\n                .groups()\n                .groups()\n                .stream()\n                .filter(group -&gt; group.getName().equals(oldName)).collect(Collectors.toList()).get(0);\n\n        //groupRepresentation.setName(newName);  -&gt; 1 - Not working\n\n        //kc.realm(realmName).groups().groups().stream().filter(g -&gt; {  -&gt; 2 - Not Working\n            //g.setName(oldName);\n            //return false;\n        //});\n    }\n</code></pre>\n<p>Like I said before its working with a lot of methods except those two.</p>\n"},{"tags":["java","testing","mockito"],"comments":[{"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"score":1,"creation_date":1699481669,"post_id":77447088,"comment_id":136538958,"body_markdown":"Indeed, assertArg does not play well with multiple verifications of the same method - the assertion error is immediately propagated. Does a custom matcher / argThat fulfill your needs? If not, please explain why, ideally with a code example","body":"Indeed, assertArg does not play well with multiple verifications of the same method - the assertion error is immediately propagated. Does a custom matcher / argThat fulfill your needs? If not, please explain why, ideally with a code example"},{"owner":{"account_id":3239231,"reputation":151,"user_id":8937376,"display_name":"basseur"},"score":0,"creation_date":1699518294,"post_id":77447088,"comment_id":136542671,"body_markdown":"That would definitely be an option, but I was hoping that Mockito could already do that. I will try and come up with something.","body":"That would definitely be an option, but I was hoping that Mockito could already do that. I will try and come up with something."}],"owner":{"account_id":3239231,"reputation":151,"user_id":8937376,"display_name":"basseur"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699458824,"creation_date":1699458824,"question_id":77447088,"body_markdown":"When _verifying_ multiple different calls to a method of a mock, it is possible to call `verify()` twice for each invocation.\r\n\r\nThis will work when not using matchers:\r\n```java\r\n    @Test\r\n    @DisplayName(&quot;verify two different calls&quot;)\r\n    void verifyTwoDifferentCalls() {\r\n        someMock.someMethod(1, &quot;any string&quot;);\r\n        someMock.someMethod(2, &quot;any string&quot;);\r\n\r\n        verify(someMock).someMethod(1, &quot;any string&quot;);\r\n        verify(someMock).someMethod(2, &quot;any string&quot;);\r\n    }\r\n```\r\n\r\nThis will also work when using simple matchers:\r\n```java\r\n    @Test\r\n    @DisplayName(&quot;verify two different calls with eq()&quot;)\r\n    void verifyTwoDifferentCallsWithEq() {\r\n        someMock.someMethod(1, &quot;any string&quot;);\r\n        someMock.someMethod(2, &quot;any string&quot;);\r\n\r\n        verify(someMock).someMethod(eq(1), anyString());\r\n        verify(someMock).someMethod(eq(2), anyString());\r\n    }\r\n```\r\n\r\nHowever, it does not work when using `assertArg()`:\r\n```java\r\n    @Test\r\n    @DisplayName(&quot;verify two different calls with asserArg()&quot;)\r\n    void verifyTwoDifferentCallsWithAsserArg() {\r\n        someMock.someMethod(1, &quot;any string&quot;);\r\n        someMock.someMethod(2, &quot;any string&quot;);\r\n\r\n        verify(someMock).someMethod(\r\n            assertArg(someInt -&gt; assertThat(someInt).isEqualTo(1)),\r\n            anyString()\r\n        );\r\n        verify(someMock).someMethod(\r\n            assertArg(someInt -&gt; assertThat(someInt).isEqualTo(2)),\r\n            anyString()\r\n        );\r\n    }\r\n```\r\n\r\nThe reason behind this is probably the inner assertion failing on at least one of the calls.\r\n![image](https://github.com/mockito/mockito/assets/32487587/21a46e79-7512-44ad-8f3b-0ac1c4253fe0)\r\n\r\nSo far, the only way I know how to test something like this is to use `ArgumentCaptor`s:\r\n```java\r\n    @Test\r\n    @DisplayName(&quot;verify two different calls with ArgumentCaptor&quot;)\r\n    void verifyTwoDifferentCallsWithArgumentCaptor() {\r\n        someMock.someMethod(1, &quot;any string&quot;);\r\n        someMock.someMethod(2, &quot;any string&quot;);\r\n\r\n        final ArgumentCaptor&lt;Integer&gt; someIntCaptor = ArgumentCaptor.forClass(Integer.class);\r\n\r\n        verify(someMock, times(2)).someMethod(someIntCaptor.capture(), anyString());\r\n\r\n        assertThat(someIntCaptor.getAllValues()).containsExactly(1, 2);\r\n    }\r\n```\r\n\r\nNow, my question: Is there any way to do this without using an `ArgumentCaptor`?","title":"Assertions on arguments of called methods using Mockito but without ArgumentCaptor","body":"<p>When <em>verifying</em> multiple different calls to a method of a mock, it is possible to call <code>verify()</code> twice for each invocation.</p>\n<p>This will work when not using matchers:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Test\n    @DisplayName(&quot;verify two different calls&quot;)\n    void verifyTwoDifferentCalls() {\n        someMock.someMethod(1, &quot;any string&quot;);\n        someMock.someMethod(2, &quot;any string&quot;);\n\n        verify(someMock).someMethod(1, &quot;any string&quot;);\n        verify(someMock).someMethod(2, &quot;any string&quot;);\n    }\n</code></pre>\n<p>This will also work when using simple matchers:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Test\n    @DisplayName(&quot;verify two different calls with eq()&quot;)\n    void verifyTwoDifferentCallsWithEq() {\n        someMock.someMethod(1, &quot;any string&quot;);\n        someMock.someMethod(2, &quot;any string&quot;);\n\n        verify(someMock).someMethod(eq(1), anyString());\n        verify(someMock).someMethod(eq(2), anyString());\n    }\n</code></pre>\n<p>However, it does not work when using <code>assertArg()</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Test\n    @DisplayName(&quot;verify two different calls with asserArg()&quot;)\n    void verifyTwoDifferentCallsWithAsserArg() {\n        someMock.someMethod(1, &quot;any string&quot;);\n        someMock.someMethod(2, &quot;any string&quot;);\n\n        verify(someMock).someMethod(\n            assertArg(someInt -&gt; assertThat(someInt).isEqualTo(1)),\n            anyString()\n        );\n        verify(someMock).someMethod(\n            assertArg(someInt -&gt; assertThat(someInt).isEqualTo(2)),\n            anyString()\n        );\n    }\n</code></pre>\n<p>The reason behind this is probably the inner assertion failing on at least one of the calls.\n<img src=\"https://github.com/mockito/mockito/assets/32487587/21a46e79-7512-44ad-8f3b-0ac1c4253fe0\" alt=\"image\" /></p>\n<p>So far, the only way I know how to test something like this is to use <code>ArgumentCaptor</code>s:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Test\n    @DisplayName(&quot;verify two different calls with ArgumentCaptor&quot;)\n    void verifyTwoDifferentCallsWithArgumentCaptor() {\n        someMock.someMethod(1, &quot;any string&quot;);\n        someMock.someMethod(2, &quot;any string&quot;);\n\n        final ArgumentCaptor&lt;Integer&gt; someIntCaptor = ArgumentCaptor.forClass(Integer.class);\n\n        verify(someMock, times(2)).someMethod(someIntCaptor.capture(), anyString());\n\n        assertThat(someIntCaptor.getAllValues()).containsExactly(1, 2);\n    }\n</code></pre>\n<p>Now, my question: Is there any way to do this without using an <code>ArgumentCaptor</code>?</p>\n"},{"tags":["java","spring","transactions","spring-transactions"],"owner":{"account_id":26689899,"reputation":1,"user_id":20298616,"display_name":"mss"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699458050,"creation_date":1699453633,"question_id":77446424,"body_markdown":"I have @Transactional method, which can make merge for values presented in db or create the new one row if not.\r\n \r\nIn case it creates the new row, it doesn&#39;t fill one column. \r\nThat&#39;s why I need to rewrite them again to fill my column up with values. \r\n\r\nSo, for this I need that AFTER first call of the method will work the second one call, for the list of values I want to merge.\r\n\r\nBut it works like in the same time, which is a problem.\r\n\r\n```\r\nuserService.saveAll(usersToSave);\r\nuserService.saveAll(usersToUpdate);\r\n```\r\nsaveAll is a just @Transactional method.\r\n\r\nI try to do smth like this, but it doesn&#39;t work. It tries to do it in the same time which is impossible in that case. \r\n\r\nNote: the second list contains elements from the first one.\r\n\r\nSo the first list has all elements(for adding and merging), when the second one contains only added elements which has to be merged in saveAll.\r\n\r\nCan i somehow divide my transactions in two different and run one after another?","title":"How to make dao.merge in the same method for same datasets","body":"<p>I have @Transactional method, which can make merge for values presented in db or create the new one row if not.</p>\n<p>In case it creates the new row, it doesn't fill one column.\nThat's why I need to rewrite them again to fill my column up with values.</p>\n<p>So, for this I need that AFTER first call of the method will work the second one call, for the list of values I want to merge.</p>\n<p>But it works like in the same time, which is a problem.</p>\n<pre><code>userService.saveAll(usersToSave);\nuserService.saveAll(usersToUpdate);\n</code></pre>\n<p>saveAll is a just @Transactional method.</p>\n<p>I try to do smth like this, but it doesn't work. It tries to do it in the same time which is impossible in that case.</p>\n<p>Note: the second list contains elements from the first one.</p>\n<p>So the first list has all elements(for adding and merging), when the second one contains only added elements which has to be merged in saveAll.</p>\n<p>Can i somehow divide my transactions in two different and run one after another?</p>\n"},{"tags":["java","android","localization","locale"],"comments":[{"owner":{"account_id":15063667,"reputation":383,"user_id":10871558,"display_name":"Mohmmaed-Amleh"},"score":0,"creation_date":1698163779,"post_id":77353191,"comment_id":136369239,"body_markdown":"after u make language switch ....  did u make a full restart for the app ?","body":"after u make language switch ....  did u make a full restart for the app ?"},{"owner":{"account_id":2294271,"reputation":1873,"user_id":2016165,"accept_rate":45,"display_name":"Neph"},"score":0,"creation_date":1698222060,"post_id":77353191,"comment_id":136376284,"body_markdown":"@Mohmmaed-Amleh No, that&#39;s not necessary if you do it in `onConfigurationChanged`. Any idea why what&#39;s happening is happening?","body":"@Mohmmaed-Amleh No, that&#39;s not necessary if you do it in <code>onConfigurationChanged</code>. Any idea why what&#39;s happening is happening?"},{"owner":{"account_id":6098824,"reputation":2137,"user_id":4758618,"display_name":"V-master"},"score":0,"creation_date":1698265830,"post_id":77353191,"comment_id":136384995,"body_markdown":"Locale and Resources.Configuration.locale are not returning the resources that are truly used by the app, but the setting of the phone. I do not think there is official API to check what app resources locale is accessed, as it is complex logic and you can have partial resources for any of the languages in multiple configurations.","body":"Locale and Resources.Configuration.locale are not returning the resources that are truly used by the app, but the setting of the phone. I do not think there is official API to check what app resources locale is accessed, as it is complex logic and you can have partial resources for any of the languages in multiple configurations."},{"owner":{"account_id":2294271,"reputation":1873,"user_id":2016165,"accept_rate":45,"display_name":"Neph"},"score":0,"creation_date":1699359550,"post_id":77353191,"comment_id":136519255,"body_markdown":"@V-master How do you explain the &quot;en_US&quot; output when the phone is set to Danish (-&gt; Android UI is in Danish) with English as its second language? It seems to be a weird mix, depending on if any of the listed languages are supported by the app or if it has to fall back to the default. And then there&#39;s that weird changed value after switching activity.","body":"@V-master How do you explain the &quot;en_US&quot; output when the phone is set to Danish (-&gt; Android UI is in Danish) with English as its second language? It seems to be a weird mix, depending on if any of the listed languages are supported by the app or if it has to fall back to the default. And then there&#39;s that weird changed value after switching activity."},{"owner":{"account_id":2294271,"reputation":1873,"user_id":2016165,"accept_rate":45,"display_name":"Neph"},"score":0,"creation_date":1699359862,"post_id":77353191,"comment_id":136519314,"body_markdown":"@V-master Regarding partial resources: Android Studio complains if a certain string doesn&#39;t appear in every &quot;string.xml&quot; files, which makes this hard to miss by accident, and who would not translate their full app on purpose? Even if that&#39;s actually the case, it should (afaik) fall back to the default language. `getResources().getConfiguration().getLocales()` returns a `List`, so there already is a way to output multiple locales, it&#39;s just that the docs aren&#39;t helpful and the test results seem to vary for some weird reason (btw, my app is fully translated).","body":"@V-master Regarding partial resources: Android Studio complains if a certain string doesn&#39;t appear in every &quot;string.xml&quot; files, which makes this hard to miss by accident, and who would not translate their full app on purpose? Even if that&#39;s actually the case, it should (afaik) fall back to the default language. <code>getResources().getConfiguration().getLocales()</code> returns a <code>List</code>, so there already is a way to output multiple locales, it&#39;s just that the docs aren&#39;t helpful and the test results seem to vary for some weird reason (btw, my app is fully translated)."},{"owner":{"account_id":6098824,"reputation":2137,"user_id":4758618,"display_name":"V-master"},"score":0,"creation_date":1699363050,"post_id":77353191,"comment_id":136519930,"body_markdown":"translations are not the only resources that can be language dependent, drawablec, booleans, integeres, all resources can be locale dependant. Back to your original question the locales returned by both apis are the locales of the device, and if you do not have given locale resources it doesn&#39;t matter, it will return it as it is. If you want to have info of which is currently displayed to the user than you would need (as you had found) special translated resource that will contain language identification and be sure to translate it with all other string resources","body":"translations are not the only resources that can be language dependent, drawablec, booleans, integeres, all resources can be locale dependant. Back to your original question the locales returned by both apis are the locales of the device, and if you do not have given locale resources it doesn&#39;t matter, it will return it as it is. If you want to have info of which is currently displayed to the user than you would need (as you had found) special translated resource that will contain language identification and be sure to translate it with all other string resources"},{"owner":{"account_id":2294271,"reputation":1873,"user_id":2016165,"accept_rate":45,"display_name":"Neph"},"score":0,"creation_date":1699449075,"post_id":77353191,"comment_id":136532304,"body_markdown":"@V-master You&#39;re correct, both functions return the language the app picked from the user&#39;s preferences but Android handles them in different ways. I did some more testing and I&#39;m going to post the results as an answer. Please feel free to comment on it if you&#39;ve got more information.","body":"@V-master You&#39;re correct, both functions return the language the app picked from the user&#39;s preferences but Android handles them in different ways. I did some more testing and I&#39;m going to post the results as an answer. Please feel free to comment on it if you&#39;ve got more information."}],"answers":[{"tags":[],"owner":{"account_id":2294271,"reputation":1873,"user_id":2016165,"accept_rate":45,"display_name":"Neph"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699457396,"creation_date":1699457396,"answer_id":77446925,"question_id":77353191,"body_markdown":"I did some more testing with my language `Spinner` (dropdown menu in the first activity):\r\n\r\n**A**. `Locale.getDefault()` returns the device&#39;s language the app chose to use and it resets every time you switch activity (it doesn&#39;t seem to change if you switch between fragments!). In my tests `Locale.setDefault` didn&#39;t affect any `TextView`s, `EditText`s or other UI elements (except: see below).\r\n\r\n**B**. `getResources().getConfiguration().getLocales().get(0)` returns the same language but the changes you apply with `onConfigurationChanged` &quot;stick&quot;, even after switching activity. It affects at least `TextView`s, `EditText`s, `Switch`es and `Button`s (again, see below) but the changes are only applied if you call it before you inflate the view, refresh the view after or if you override `onConfigureChanged`.\r\n\r\nSounds decently straight forward but it&#39;s not. Let&#39;s look at an example and let&#39;s also add a `DatePicker` and `TimePicker` (in activity 2) to the equation:\r\n\r\n - The app supports: German and English\r\n - Languages in Android settings: 1. English, 2. German\r\n - The app starts in English, as that is the user&#39;s preferred language. Both A and B print &quot;en_US&quot;.\r\n - Switch to German, using the spinner in the first activity (with `onConfigurationChanged`). Both A and B print &quot;de_CH&quot;.\r\n - Switch to the second activity. A prints &quot;en_US&quot; because it was reset to the user&#39;s preferred language, while B kept the change I applied manually in the first activity and prints &quot;de_CH&quot;. All the `TextView`s are in German but the DatePicker and TimePicker are still in English.\r\n\r\nTo change the language of both pickers, you have to use A (e.g. `Locale.setDefault(getResources().getConfiguration().getLocales().get(0))` - looks easy but there&#39;s another catch, see below) right at the start of `onCreateView`, before you even inflate the view and before you call e.g. `datePicker = view.findViewById(R.id.datePicker)`. Afterwards both A and B print &quot;de_CH&quot; again and the pickers are in German.\r\n\r\nThis works the same way if the Android device is set to e.g. Danish + English: English is picked automatically and B remembers a switch to German even in the second activity.\r\n\r\nI have not been able to get it to fully work with `DatePickerDialog` but that&#39;s a [different problem][1].\r\n\r\nTo get back to the other, more complicated, example: Danish + Italian\r\n\r\nThe app correctly starts in German, both A and B print &quot;da_DK&quot;. Without changing the language in-app using the spinner, the pickers in activity 2 are now in Danish. If I change the language via the dropdown menu before switching activity, then the pickers use the correct language that was chosen (because the spinner set B to that specific language and B remembered it).\r\n\r\n**What to take away from this:**\r\n\r\nDon&#39;t rely on A or B, unless you can be absolutely sure that the user&#39;s phone uses at least one of the languages your app supports. Sadly it seems to really be best to just use the solution that was suggested [here][2]: Add a key-value pair with the code for that specific language to your localization files, check it after app start, then set up a `Locale` for that language, change and update it accordingly by hand, pass it around between activities and use it when needed (e.g. for a DatePicker).\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/21257014/2016165\r\n  [2]: https://stackoverflow.com/a/8691091/2016165","title":"How do &quot;Locale.getDefault()&quot; and &quot;getResources().getConfiguration().getLocales().get(0)&quot; work exactly?","body":"<p>I did some more testing with my language <code>Spinner</code> (dropdown menu in the first activity):</p>\n<p><strong>A</strong>. <code>Locale.getDefault()</code> returns the device's language the app chose to use and it resets every time you switch activity (it doesn't seem to change if you switch between fragments!). In my tests <code>Locale.setDefault</code> didn't affect any <code>TextView</code>s, <code>EditText</code>s or other UI elements (except: see below).</p>\n<p><strong>B</strong>. <code>getResources().getConfiguration().getLocales().get(0)</code> returns the same language but the changes you apply with <code>onConfigurationChanged</code> &quot;stick&quot;, even after switching activity. It affects at least <code>TextView</code>s, <code>EditText</code>s, <code>Switch</code>es and <code>Button</code>s (again, see below) but the changes are only applied if you call it before you inflate the view, refresh the view after or if you override <code>onConfigureChanged</code>.</p>\n<p>Sounds decently straight forward but it's not. Let's look at an example and let's also add a <code>DatePicker</code> and <code>TimePicker</code> (in activity 2) to the equation:</p>\n<ul>\n<li>The app supports: German and English</li>\n<li>Languages in Android settings: 1. English, 2. German</li>\n<li>The app starts in English, as that is the user's preferred language. Both A and B print &quot;en_US&quot;.</li>\n<li>Switch to German, using the spinner in the first activity (with <code>onConfigurationChanged</code>). Both A and B print &quot;de_CH&quot;.</li>\n<li>Switch to the second activity. A prints &quot;en_US&quot; because it was reset to the user's preferred language, while B kept the change I applied manually in the first activity and prints &quot;de_CH&quot;. All the <code>TextView</code>s are in German but the DatePicker and TimePicker are still in English.</li>\n</ul>\n<p>To change the language of both pickers, you have to use A (e.g. <code>Locale.setDefault(getResources().getConfiguration().getLocales().get(0))</code> - looks easy but there's another catch, see below) right at the start of <code>onCreateView</code>, before you even inflate the view and before you call e.g. <code>datePicker = view.findViewById(R.id.datePicker)</code>. Afterwards both A and B print &quot;de_CH&quot; again and the pickers are in German.</p>\n<p>This works the same way if the Android device is set to e.g. Danish + English: English is picked automatically and B remembers a switch to German even in the second activity.</p>\n<p>I have not been able to get it to fully work with <code>DatePickerDialog</code> but that's a <a href=\"https://stackoverflow.com/q/21257014/2016165\">different problem</a>.</p>\n<p>To get back to the other, more complicated, example: Danish + Italian</p>\n<p>The app correctly starts in German, both A and B print &quot;da_DK&quot;. Without changing the language in-app using the spinner, the pickers in activity 2 are now in Danish. If I change the language via the dropdown menu before switching activity, then the pickers use the correct language that was chosen (because the spinner set B to that specific language and B remembered it).</p>\n<p><strong>What to take away from this:</strong></p>\n<p>Don't rely on A or B, unless you can be absolutely sure that the user's phone uses at least one of the languages your app supports. Sadly it seems to really be best to just use the solution that was suggested <a href=\"https://stackoverflow.com/a/8691091/2016165\">here</a>: Add a key-value pair with the code for that specific language to your localization files, check it after app start, then set up a <code>Locale</code> for that language, change and update it accordingly by hand, pass it around between activities and use it when needed (e.g. for a DatePicker).</p>\n"}],"owner":{"account_id":2294271,"reputation":1873,"user_id":2016165,"accept_rate":45,"display_name":"Neph"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1699457396,"creation_date":1698159462,"question_id":77353191,"body_markdown":"My app (Java 11, min: API 29, target: API 30 = Android 11) currently supports two languages: German (default) &amp; English\r\n\r\nThe &quot;build.gradle(Module:app)&quot; file contains `resConfigs(&quot;de&quot;, &quot;en&quot;)` and there are two `strings.xml` files with the translations.\r\n\r\nAccording to the official [docs][1], `Locale.getDefault()` should return:\r\n&gt; the current value of the default locale for the specified Category for this instance of the Java Virtual Machine.\r\n\r\nIf I understand this correctly, then this is the `Locale` currently being used by the app.\r\n\r\nThe [docs][2] for `getLocales()` only say:\r\n&gt; Get the locale list. This is the preferred way for getting the locales (instead of using the direct accessor to locale, which would only provide the primary locale).\r\n\r\n... but according to multiple threads, this function is also supposed to return the `Locale` that&#39;s currently being used by the app. I want to know which language this is, so I did some testing with the following print:\r\n\r\n    Log.d(TAG,&quot;1=&quot;+Locale.getDefault()+&quot;, 2=&quot;+getResources().getConfiguration().getLocales().get(0));\r\n\r\n - Set the emulator to &quot;English (US)&quot; -&gt; English is chosen correctly, prints &quot;1=en_US, 2=en_US&quot;\r\n - German (CH) -&gt; German is chosen correctly, prints &quot;1=de_CH, 2=de_CH&quot;\r\n - German + English (US) -&gt; German is chosen correctly, prints &quot;1=de_CH, 2=de_CH&quot;\r\n - Danish + German (CH) -&gt; German is chosen correctly, prints &quot;1=de_CH, 2=de_CH&quot;\r\n - Danish + English (US) -&gt; English is chosen correctly, prints &quot;1=en_US, 2=en_US&quot;\r\n - Danish + Italian -&gt; German is chosen correctly, prints &quot;1=da_DK, 2=da_DK&quot;\r\n - Italian + Spanish -&gt; German is chosen correctly, prints &quot;1=in_IT, 2=in_IT&quot;\r\n\r\nIt looks like they are either set to the language that is both supported by the app and chosen in Android&#39;s settings by the user OR the first language chosen by the user if none of them are supported by the app.\r\n\r\nMy app&#39;s got a spinner that changes the language. Calling e.g. `Locale.setDefault(Locale.English)` switches everything to English but if I switch from the first activity to the second, then this value is reset. E.g.:\r\n\r\nGerman + English (US) -&gt; German is chosen automatically (prints &quot;1=de_CH, 2=de_CH&quot;) -&gt; switch to English -&gt; UI elements switch too -&gt; switch activity -&gt; prints &quot;1=de_CH, 2=en&quot; in `onCreateView`, while all the UI elements are in English; with Danish + Italian it prints &quot;1=da_DK, 2=en&quot;\r\n\r\nI&#39;m aware that `getResources().getConfiguration().getLocales().get(0)` requires a call to `onConfigurationChanged` to change, while `Locale.setDefault()` applies the change instantly but why did the latter reset all of a sudden? Why did I get the results I got during my tests, instead of the `Locale` currently in use? How do you get a reliable result for the `Locale` the app actually uses (it can&#39;t just be [this][3], right?)?\r\n\r\nOr better: How do both of these functions actually work? Are they simply buggy?\r\n\r\nThe docs don&#39;t mention any of this but only how the `Locale` is chosen on app start ([here][4]) and the [latest changes][5] to the language preferences only apply to Android 13+.\r\n\r\n\r\n  [1]: https://developer.android.com/reference/java/util/Locale#getDefault(java.util.Locale.Category)\r\n  [2]: https://developer.android.com/reference/android/content/res/Configuration#getLocales()\r\n  [3]: https://stackoverflow.com/a/8691091/2016165\r\n  [4]: https://developer.android.com/guide/topics/resources/multilingual-support\r\n  [5]: https://developer.android.com/guide/topics/resources/app-languages","title":"How do &quot;Locale.getDefault()&quot; and &quot;getResources().getConfiguration().getLocales().get(0)&quot; work exactly?","body":"<p>My app (Java 11, min: API 29, target: API 30 = Android 11) currently supports two languages: German (default) &amp; English</p>\n<p>The &quot;build.gradle(Module:app)&quot; file contains <code>resConfigs(&quot;de&quot;, &quot;en&quot;)</code> and there are two <code>strings.xml</code> files with the translations.</p>\n<p>According to the official <a href=\"https://developer.android.com/reference/java/util/Locale#getDefault(java.util.Locale.Category)\" rel=\"nofollow noreferrer\">docs</a>, <code>Locale.getDefault()</code> should return:</p>\n<blockquote>\n<p>the current value of the default locale for the specified Category for this instance of the Java Virtual Machine.</p>\n</blockquote>\n<p>If I understand this correctly, then this is the <code>Locale</code> currently being used by the app.</p>\n<p>The <a href=\"https://developer.android.com/reference/android/content/res/Configuration#getLocales()\" rel=\"nofollow noreferrer\">docs</a> for <code>getLocales()</code> only say:</p>\n<blockquote>\n<p>Get the locale list. This is the preferred way for getting the locales (instead of using the direct accessor to locale, which would only provide the primary locale).</p>\n</blockquote>\n<p>... but according to multiple threads, this function is also supposed to return the <code>Locale</code> that's currently being used by the app. I want to know which language this is, so I did some testing with the following print:</p>\n<pre><code>Log.d(TAG,&quot;1=&quot;+Locale.getDefault()+&quot;, 2=&quot;+getResources().getConfiguration().getLocales().get(0));\n</code></pre>\n<ul>\n<li>Set the emulator to &quot;English (US)&quot; -&gt; English is chosen correctly, prints &quot;1=en_US, 2=en_US&quot;</li>\n<li>German (CH) -&gt; German is chosen correctly, prints &quot;1=de_CH, 2=de_CH&quot;</li>\n<li>German + English (US) -&gt; German is chosen correctly, prints &quot;1=de_CH, 2=de_CH&quot;</li>\n<li>Danish + German (CH) -&gt; German is chosen correctly, prints &quot;1=de_CH, 2=de_CH&quot;</li>\n<li>Danish + English (US) -&gt; English is chosen correctly, prints &quot;1=en_US, 2=en_US&quot;</li>\n<li>Danish + Italian -&gt; German is chosen correctly, prints &quot;1=da_DK, 2=da_DK&quot;</li>\n<li>Italian + Spanish -&gt; German is chosen correctly, prints &quot;1=in_IT, 2=in_IT&quot;</li>\n</ul>\n<p>It looks like they are either set to the language that is both supported by the app and chosen in Android's settings by the user OR the first language chosen by the user if none of them are supported by the app.</p>\n<p>My app's got a spinner that changes the language. Calling e.g. <code>Locale.setDefault(Locale.English)</code> switches everything to English but if I switch from the first activity to the second, then this value is reset. E.g.:</p>\n<p>German + English (US) -&gt; German is chosen automatically (prints &quot;1=de_CH, 2=de_CH&quot;) -&gt; switch to English -&gt; UI elements switch too -&gt; switch activity -&gt; prints &quot;1=de_CH, 2=en&quot; in <code>onCreateView</code>, while all the UI elements are in English; with Danish + Italian it prints &quot;1=da_DK, 2=en&quot;</p>\n<p>I'm aware that <code>getResources().getConfiguration().getLocales().get(0)</code> requires a call to <code>onConfigurationChanged</code> to change, while <code>Locale.setDefault()</code> applies the change instantly but why did the latter reset all of a sudden? Why did I get the results I got during my tests, instead of the <code>Locale</code> currently in use? How do you get a reliable result for the <code>Locale</code> the app actually uses (it can't just be <a href=\"https://stackoverflow.com/a/8691091/2016165\">this</a>, right?)?</p>\n<p>Or better: How do both of these functions actually work? Are they simply buggy?</p>\n<p>The docs don't mention any of this but only how the <code>Locale</code> is chosen on app start (<a href=\"https://developer.android.com/guide/topics/resources/multilingual-support\" rel=\"nofollow noreferrer\">here</a>) and the <a href=\"https://developer.android.com/guide/topics/resources/app-languages\" rel=\"nofollow noreferrer\">latest changes</a> to the language preferences only apply to Android 13+.</p>\n"},{"tags":["java","debugging","transform"],"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1699461102,"post_id":77446888,"comment_id":136535264,"body_markdown":"What kind of transformation are we talking about? Load time transformation, for example, will be done in the thread that triggered the class loading. If this happens at a thread implementing the debug functionality, it shouldn’t be surprising that you can’t debug the debugger…","body":"What kind of transformation are we talking about? Load time transformation, for example, will be done in the thread that triggered the class loading. If this happens at a thread implementing the debug functionality, it shouldn’t be surprising that you can’t debug the debugger…"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1699484178,"post_id":77446888,"comment_id":136539277,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":29856410,"reputation":1,"user_id":22881153,"display_name":"larvae fish"},"score":0,"creation_date":1699493983,"post_id":77446888,"comment_id":136540298,"body_markdown":"@Holger\nYes, I compiled the class file through IDEA to Hotswap during the running of the program, so I think it is Load time transformation. From what you said, I probably know the reason. I compiled the java file in the debugger, so the class loading is Triggered by the JDWP thread. Thank you so much!\n\nOne more thing I would like to know is that this is the first time I have heard the term &quot;Load time transformation&quot;. Are there any other types of transformations?","body":"@Holger Yes, I compiled the class file through IDEA to Hotswap during the running of the program, so I think it is Load time transformation. From what you said, I probably know the reason. I compiled the java file in the debugger, so the class loading is Triggered by the JDWP thread. Thank you so much!  One more thing I would like to know is that this is the first time I have heard the term &quot;Load time transformation&quot;. Are there any other types of transformations?"},{"owner":{"account_id":29856410,"reputation":1,"user_id":22881153,"display_name":"larvae fish"},"score":0,"creation_date":1699514229,"post_id":77446888,"comment_id":136542063,"body_markdown":"@Holger\nI changed the thread that triggers the class loading - by using remote breakpoints instead of local, now the breakpoints are hit.\n\nIt’s really hard to get tips like this, thank you for replying to my question!","body":"@Holger I changed the thread that triggers the class loading - by using remote breakpoints instead of local, now the breakpoints are hit.  It’s really hard to get tips like this, thank you for replying to my question!"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1699518834,"post_id":77446888,"comment_id":136542801,"body_markdown":"“Load time” refers to the first time, a class is loaded. So when you hotswapped the class, you were already in the second category, which is called “retransformation” in [the documentation](https://docs.oracle.com/en/java/javase/21/docs/api/java.instrument/java/lang/instrument/ClassFileTransformer.html). But it seems, the behavior and solution is similar, i.e. the retransformation also happens in the thread that triggers the redefinition. The only difference is that redefinition and in turn retransformation are limited in what they can change.","body":"“Load time” refers to the first time, a class is loaded. So when you hotswapped the class, you were already in the second category, which is called “retransformation” in <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.instrument/java/lang/instrument/ClassFileTransformer.html\" rel=\"nofollow noreferrer\">the documentation</a>. But it seems, the behavior and solution is similar, i.e. the retransformation also happens in the thread that triggers the redefinition. The only difference is that redefinition and in turn retransformation are limited in what they can change."}],"owner":{"account_id":29856410,"reputation":1,"user_id":22881153,"display_name":"larvae fish"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699457176,"creation_date":1699457031,"question_id":77446888,"body_markdown":"I print the current thread information in the transform method,and the output is like this: `Thread[JDWP Transport Listener: dt_socket,10,system]` \r\n\r\nIn other words, this transform is executed by the JDWP thread. Isn&#39;t JDWP the thread used for break points?\r\n\r\nI’m very confused. I have two questions. \r\n\r\n 1. Why is the transform method executed by this thread? \r\n 2. Why can’t I stop at the transform method?\r\n\r\n\r\n\r\nCan anyone give me some advice? Thanks!","title":"Javaagent Why can&#39;t I debug the transform method of ClassFileTransformer in IDEA?","body":"<p>I print the current thread information in the transform method,and the output is like this: <code>Thread[JDWP Transport Listener: dt_socket,10,system]</code></p>\n<p>In other words, this transform is executed by the JDWP thread. Isn't JDWP the thread used for break points?</p>\n<p>I’m very confused. I have two questions.</p>\n<ol>\n<li>Why is the transform method executed by this thread?</li>\n<li>Why can’t I stop at the transform method?</li>\n</ol>\n<p>Can anyone give me some advice? Thanks!</p>\n"},{"tags":["java","multithreading","http","asynchronous","io"],"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1699461889,"post_id":77446863,"comment_id":136535447,"body_markdown":"Who says that there’s a fundamental difference between these approaches?","body":"Who says that there’s a fundamental difference between these approaches?"},{"owner":{"account_id":4234394,"reputation":628,"user_id":3465972,"accept_rate":67,"display_name":"Ionut Ciuta"},"score":0,"creation_date":1699478945,"post_id":77446863,"comment_id":136538504,"body_markdown":"I fail to see how you’re comment is helpful @Holger","body":"I fail to see how you’re comment is helpful @Holger"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1699519203,"post_id":77446863,"comment_id":136542877,"body_markdown":"You are asking about the difference between using the library’s implementation and your own implementation of basically the same thing. The only relevant difference is that in one case, you have more work in implementing what the library has already done. If you have a more specific problem, ask a more specific question.","body":"You are asking about the difference between using the library’s implementation and your own implementation of basically the same thing. The only relevant difference is that in one case, you have more work in implementing what the library has already done. If you have a more specific problem, ask a more specific question."}],"owner":{"account_id":4234394,"reputation":628,"user_id":3465972,"accept_rate":67,"display_name":"Ionut Ciuta"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1699456852,"creation_date":1699456852,"question_id":77446863,"body_markdown":"I was looking through the [Apache Http Client][1] docs and noticed they offer both a sync and an async API. The same goes for [OkHttp][2].\r\n\r\nWhat is the difference between using the async APIs these libraries provide versus using the sync APIs and just wrapping calls with CompletableFutures and using dedicated thread pools?\r\n\r\nAny resources that can help me understand this topic better are also welcomed. \r\n\r\n\r\n  [1]: https://hc.apache.org/httpcomponents-client-5.2.x/index.html\r\n  [2]: https://square.github.io/okhttp/recipes/","title":"Difference between using async APIs vs. wrapping sync APIs in CompletableFuture","body":"<p>I was looking through the <a href=\"https://hc.apache.org/httpcomponents-client-5.2.x/index.html\" rel=\"nofollow noreferrer\">Apache Http Client</a> docs and noticed they offer both a sync and an async API. The same goes for <a href=\"https://square.github.io/okhttp/recipes/\" rel=\"nofollow noreferrer\">OkHttp</a>.</p>\n<p>What is the difference between using the async APIs these libraries provide versus using the sync APIs and just wrapping calls with CompletableFutures and using dedicated thread pools?</p>\n<p>Any resources that can help me understand this topic better are also welcomed.</p>\n"},{"tags":["java","sdk","key","passkit"],"owner":{"account_id":29856188,"reputation":1,"user_id":22880967,"display_name":"user22880967"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699456642,"creation_date":1699456618,"question_id":77446829,"body_markdown":"I am using the java-passkit-quickstart to verify the PAsskit SDK for JAva, but everytime I try running the test, it gives me the error\r\nFile does not contain valid private key: src/main/resources/credentials/key-java.\r\n\r\nI have generated the SDK credentials from developer portal and I have used the same password in the passkit.properties file, but I still se the same error.\r\n\r\nCan someone help me with this issue.\r\n\r\nI have generated the SDK credentials from developer portal and I have used the same password in the passkit.properties file, but I still se the same error.\r\n\r\nI was expecting the code the to run without exceptions, but it did not help","title":"While trying to use the Passkit Java SDK I am see invalid key error: File does not contain valid private key: src/main/resources/credentials/key-java","body":"<p>I am using the java-passkit-quickstart to verify the PAsskit SDK for JAva, but everytime I try running the test, it gives me the error\nFile does not contain valid private key: src/main/resources/credentials/key-java.</p>\n<p>I have generated the SDK credentials from developer portal and I have used the same password in the passkit.properties file, but I still se the same error.</p>\n<p>Can someone help me with this issue.</p>\n<p>I have generated the SDK credentials from developer portal and I have used the same password in the passkit.properties file, but I still se the same error.</p>\n<p>I was expecting the code the to run without exceptions, but it did not help</p>\n"},{"tags":["java","spring","spring-boot","maven","pom.xml"],"comments":[{"owner":{"account_id":13318942,"reputation":3000,"user_id":9614331,"display_name":"Avijit Barua"},"score":0,"creation_date":1646888839,"post_id":71418751,"comment_id":126236291,"body_markdown":"Tried to run your project on my pc. Working correctly.","body":"Tried to run your project on my pc. Working correctly."},{"owner":{"account_id":4751700,"reputation":2657,"user_id":3841581,"accept_rate":70,"display_name":"user3841581"},"score":1,"creation_date":1646923774,"post_id":71418751,"comment_id":126248118,"body_markdown":"@AvijitBarua an invalidate cache and restart solved the problem. Thanks","body":"@AvijitBarua an invalidate cache and restart solved the problem. Thanks"}],"answers":[{"tags":[],"owner":{"account_id":4751700,"reputation":2657,"user_id":3841581,"accept_rate":70,"display_name":"user3841581"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1646923725,"creation_date":1646923725,"answer_id":71426124,"question_id":71418751,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/i5V4C.png\r\n\r\nMy problem was solved by just invalidating the caches and restarting my IDE\r\n\r\nThanks","title":"Failed to introspect annotated methods on class org.springframework.boot.web.servlet.support.SpringBootServletInitializer","body":"<p><a href=\"https://i.stack.imgur.com/i5V4C.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/i5V4C.png\" alt=\"enter image description here\" /></a></p>\n<p>My problem was solved by just invalidating the caches and restarting my IDE</p>\n<p>Thanks</p>\n"},{"comments":[{"owner":{"account_id":15482214,"reputation":123,"user_id":11169115,"display_name":"santiago"},"score":0,"creation_date":1667949038,"post_id":74186722,"comment_id":131289367,"body_markdown":"This did it for me, thanks! The project worked fine on my trial version of IntelliJ Ultimate, but wouldn&#39;t work on the Community Edition, do you have any idea why?","body":"This did it for me, thanks! The project worked fine on my trial version of IntelliJ Ultimate, but wouldn&#39;t work on the Community Edition, do you have any idea why?"}],"tags":[],"owner":{"account_id":18785448,"reputation":91,"user_id":13699145,"display_name":"Shivi"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1666645008,"creation_date":1666644919,"answer_id":74186722,"question_id":71418751,"body_markdown":"only Invalidating cache did not help for me. Please once check the scope for your tomcat in pom.xml. Sometimes scope is &quot;provided&quot; and that&#39;s why it doesn&#39;t compile the class and throws this error:\r\n\r\n\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n\t\t\t&lt;!--&lt;scope&gt;provided&lt;/scope&gt;--&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nIf you are commenting any scope here, make sure you restart the system and if needed invalidate cache too for indexes. This worked for me.","title":"Failed to introspect annotated methods on class org.springframework.boot.web.servlet.support.SpringBootServletInitializer","body":"<p>only Invalidating cache did not help for me. Please once check the scope for your tomcat in pom.xml. Sometimes scope is &quot;provided&quot; and that's why it doesn't compile the class and throws this error:</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n        &lt;!--&lt;scope&gt;provided&lt;/scope&gt;--&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>If you are commenting any scope here, make sure you restart the system and if needed invalidate cache too for indexes. This worked for me.</p>\n"},{"tags":[],"owner":{"account_id":4431178,"reputation":121,"user_id":3608314,"display_name":"user3608314"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680027458,"creation_date":1680027458,"answer_id":75869732,"question_id":71418751,"body_markdown":"I tried both the solutions available on this post: invalidating cache and removed the scope of the dependency. \r\n\r\nAfter I removed the scope (&quot;provided&quot;) it worked for me. \r\n\r\nPlease don&#39;t forget to reload Maven projects after removing the scope. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UyHJY.png","title":"Failed to introspect annotated methods on class org.springframework.boot.web.servlet.support.SpringBootServletInitializer","body":"<p>I tried both the solutions available on this post: invalidating cache and removed the scope of the dependency.</p>\n<p>After I removed the scope (&quot;provided&quot;) it worked for me.</p>\n<p>Please don't forget to reload Maven projects after removing the scope.</p>\n<p><a href=\"https://i.stack.imgur.com/UyHJY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UyHJY.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":4751700,"reputation":2657,"user_id":3841581,"accept_rate":70,"display_name":"user3841581"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14724,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71426124,"answer_count":3,"score":1,"last_activity_date":1699456597,"creation_date":1646885493,"question_id":71418751,"body_markdown":"I have a problem. I am having this error when I try to run on debug my springboot application but I have the following error\r\n\r\n    org.springframework.beans.factory.BeanDefinitionStoreException: Failed to parse configuration class [com.app.myapp.MyappApplication]; nested exception is java.lang.IllegalStateException:Failed to introspect annotated methods on class org.springframework.boot.web.servlet.support.SpringBootServletInitializer\r\n\r\nMy `MyappApplication` class have the following\r\n\r\n    package com.app.myapp;\r\n    import java.io.File;\r\n    import java.nio.charset.Charset;\r\n    import java.security.KeyManagementException;\r\n    import java.security.KeyStoreException;\r\n    import java.security.NoSuchAlgorithmException;\r\n    import java.security.cert.X509Certificate;\r\n    import java.util.ArrayList;\r\n    import java.util.Date;\r\n\r\n    import javax.net.ssl.SSLContext;\r\n    import javax.servlet.ServletContext;\r\n\r\n    import org.apache.http.conn.ssl.SSLConnectionSocketFactory;\r\n    import org.apache.http.impl.client.CloseableHttpClient;\r\n    import org.apache.http.impl.client.HttpClients;\r\n    import org.apache.http.ssl.SSLContexts;\r\n    import org.apache.http.ssl.TrustStrategy;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.CommandLineRunner;\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.boot.web.servlet.support.SpringBootServletInitializer;\r\n    import org.springframework.context.ApplicationContext;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.http.client.HttpComponentsClientHttpRequestFactory;\r\n    import org.springframework.http.converter.StringHttpMessageConverter;\r\n    import org.springframework.web.client.RestTemplate;\r\n\r\n    import com.app.myapp.model.Reponse;\r\n    import com.app.myapp.service.MyModel;\r\n\r\n    @SpringBootApplication\r\n    public class MyappApplication extends SpringBootServletInitializer implements \r\n    CommandLineRunner {\r\n\r\n\t@Autowired\r\n\tServletContext context;\r\n\r\n\t@Autowired private MyModel myModel;\r\n\tpublic static void main(String[] args) {\r\n\t\tApplicationContext acx=SpringApplication.run(MyappApplication.class, args);\r\n\t\tString fileSeparator = File.separator;\r\n\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void run(String... args) throws Exception {\r\n\t\t\r\n\t}\r\n       /*\r\n\t   @Bean\r\n\t   public RestTemplate getRestTemplate() {\r\n\t      return new RestTemplate();\r\n\t   }*/\r\n\t\t@Bean\r\n\t\tpublic RestTemplate restTemplate() throws KeyStoreException, NoSuchAlgorithmException, KeyManagementException {\r\n\t    \t\tTrustStrategy acceptingTrustStrategy = (X509Certificate[] chain, String authType) -&gt; true;\r\n\t \r\n\t    \t\tSSLContext sslContext = SSLContexts.custom()\r\n\t                    \t\t.loadTrustMaterial(null, acceptingTrustStrategy)\r\n\t                    \t\t.build();\r\n\t \r\n\t    \t\tSSLConnectionSocketFactory csf = new SSLConnectionSocketFactory(sslContext);\r\n\t \r\n\t    \t\tCloseableHttpClient httpClient = HttpClients.custom()\r\n\t                    \t\t.setSSLSocketFactory(csf)\r\n\t                    \t\t.build();\r\n\t \r\n\t    \t\tHttpComponentsClientHttpRequestFactory requestFactory =\r\n\t                    \t\tnew HttpComponentsClientHttpRequestFactory();\r\n\t \r\n\t    \t\trequestFactory.setHttpClient(httpClient);\r\n\t    \t\tRestTemplate restTemplate = new RestTemplate(requestFactory);\r\n\t    \t\treturn restTemplate;\r\n\t \t}\t   \r\n     }\r\n\r\nMy POM is the following:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t   &lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.5.1&lt;/version&gt;\r\n\t\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t   &lt;/parent&gt;\r\n\t   &lt;groupId&gt;com.app.myapp&lt;/groupId&gt;\r\n\t   &lt;artifactId&gt;myapp&lt;/artifactId&gt;\r\n\t   &lt;version&gt;0.0.1&lt;/version&gt;\r\n\t  &lt;name&gt;myApp&lt;/name&gt;\r\n\t  &lt;description&gt;Building software&lt;/description&gt;\r\n\t   &lt;properties&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t   &lt;/properties&gt;\r\n\t   &lt;dependencies&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n             &lt;!--\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;--&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t  &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n             &lt;!--\t\t\t&lt;scope&gt;provided&lt;/scope&gt;--&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;commons-fileupload&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.3.3&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.5&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n       &lt;dependency&gt;\r\n         &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n         &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n      &lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;nz.net.ultraq.thymeleaf&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;thymeleaf-layout-dialect&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;source&gt;1.8&lt;/source&gt;\r\n\t\t\t\t\t&lt;target&gt;1.8&lt;/target&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\t&lt;packaging&gt;war&lt;/packaging&gt;\r\n&lt;/project&gt;\r\n\r\n\r\nWhat could be the problem?","title":"Failed to introspect annotated methods on class org.springframework.boot.web.servlet.support.SpringBootServletInitializer","body":"<p>I have a problem. I am having this error when I try to run on debug my springboot application but I have the following error</p>\n<pre><code>org.springframework.beans.factory.BeanDefinitionStoreException: Failed to parse configuration class [com.app.myapp.MyappApplication]; nested exception is java.lang.IllegalStateException:Failed to introspect annotated methods on class org.springframework.boot.web.servlet.support.SpringBootServletInitializer\n</code></pre>\n<p>My <code>MyappApplication</code> class have the following</p>\n<pre><code>package com.app.myapp;\nimport java.io.File;\nimport java.nio.charset.Charset;\nimport java.security.KeyManagementException;\nimport java.security.KeyStoreException;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.cert.X509Certificate;\nimport java.util.ArrayList;\nimport java.util.Date;\n\nimport javax.net.ssl.SSLContext;\nimport javax.servlet.ServletContext;\n\nimport org.apache.http.conn.ssl.SSLConnectionSocketFactory;\nimport org.apache.http.impl.client.CloseableHttpClient;\nimport org.apache.http.impl.client.HttpClients;\nimport org.apache.http.ssl.SSLContexts;\nimport org.apache.http.ssl.TrustStrategy;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.web.servlet.support.SpringBootServletInitializer;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.http.client.HttpComponentsClientHttpRequestFactory;\nimport org.springframework.http.converter.StringHttpMessageConverter;\nimport org.springframework.web.client.RestTemplate;\n\nimport com.app.myapp.model.Reponse;\nimport com.app.myapp.service.MyModel;\n\n@SpringBootApplication\npublic class MyappApplication extends SpringBootServletInitializer implements \nCommandLineRunner {\n\n@Autowired\nServletContext context;\n\n@Autowired private MyModel myModel;\npublic static void main(String[] args) {\n    ApplicationContext acx=SpringApplication.run(MyappApplication.class, args);\n    String fileSeparator = File.separator;\n\n}\n\n@Override\npublic void run(String... args) throws Exception {\n    \n}\n   /*\n   @Bean\n   public RestTemplate getRestTemplate() {\n      return new RestTemplate();\n   }*/\n    @Bean\n    public RestTemplate restTemplate() throws KeyStoreException, NoSuchAlgorithmException, KeyManagementException {\n            TrustStrategy acceptingTrustStrategy = (X509Certificate[] chain, String authType) -&gt; true;\n \n            SSLContext sslContext = SSLContexts.custom()\n                            .loadTrustMaterial(null, acceptingTrustStrategy)\n                            .build();\n \n            SSLConnectionSocketFactory csf = new SSLConnectionSocketFactory(sslContext);\n \n            CloseableHttpClient httpClient = HttpClients.custom()\n                            .setSSLSocketFactory(csf)\n                            .build();\n \n            HttpComponentsClientHttpRequestFactory requestFactory =\n                            new HttpComponentsClientHttpRequestFactory();\n \n            requestFactory.setHttpClient(httpClient);\n            RestTemplate restTemplate = new RestTemplate(requestFactory);\n            return restTemplate;\n    }      \n }\n</code></pre>\n<p>My POM is the following:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\nxmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\nxsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n   &lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.5.1&lt;/version&gt;\n    &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n   &lt;/parent&gt;\n   &lt;groupId&gt;com.app.myapp&lt;/groupId&gt;\n   &lt;artifactId&gt;myapp&lt;/artifactId&gt;\n   &lt;version&gt;0.0.1&lt;/version&gt;\n  &lt;name&gt;myApp&lt;/name&gt;\n  &lt;description&gt;Building software&lt;/description&gt;\n   &lt;properties&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n   &lt;/properties&gt;\n   &lt;dependencies&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n         &lt;!--           &lt;scope&gt;runtime&lt;/scope&gt;--&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n         &lt;!--           &lt;scope&gt;provided&lt;/scope&gt;--&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;\n        &lt;version&gt;1.3.3&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;commons-io&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n        &lt;version&gt;2.5&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n        &lt;artifactId&gt;gson&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n   &lt;dependency&gt;\n     &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n     &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n  &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;nz.net.ultraq.thymeleaf&lt;/groupId&gt;\n        &lt;artifactId&gt;thymeleaf-layout-dialect&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n&lt;packaging&gt;war&lt;/packaging&gt;\n</code></pre>\n\n<p>What could be the problem?</p>\n"},{"tags":["java","wildfly"],"owner":{"account_id":24293059,"reputation":1,"user_id":22881118,"display_name":"GANESH RACHA"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699456494,"creation_date":1699456494,"question_id":77446808,"body_markdown":"I&#39;ve tried to deploy my application using Wildfly Management Console (wildfly 10.1.0.Final) but unfortunately failed due to the following reason / error :\r\n\r\nCannot upload deployment: {&quot;WFLYCTL0080: Failed services&quot; =&gt; {&quot;jboss.deployment.subunit.\\&quot;MTCSE_App.ear\\&quot;.\\&quot;MTCSE_EJBApp.jar\\&quot;.PARSE&quot; =&gt; &quot;org.jboss.msc.service.StartException in service jboss.deployment.subunit.\\&quot;MTCSE_App.ear\\&quot;.\\&quot;MTCSE_EJBApp.jar\\&quot;.PARSE: WFLYSRV0153: Failed to process phase PARSE of subdeployment \\&quot;MTCSE_EJBApp.jar\\&quot; of deployment \\&quot;MTCSE_App.ear\\&quot; Caused by: org.jboss.msc.service.ServiceNotFoundException: Service service jboss.ejb.default-resource-adapter-name-service not found&quot;},&quot;WFLYCTL0412: Required services that are not installed:&quot; =&gt; [&quot;jboss.deployment.subunit.\\&quot;MTCSE_App.ear\\&quot;.\\&quot;MTCSE_EJBApp.jar\\&quot;.PARSE&quot;],&quot;WFLYCTL0180: Services with missing/unavailable dependencies&quot; =&gt; undefined\r\n\r\nI&#39;m trying to deploy a ear file and it is throwing me the above error. Can you provide the possible reasons and solutions to the error.","title":"Wildfly deployment failed","body":"<p>I've tried to deploy my application using Wildfly Management Console (wildfly 10.1.0.Final) but unfortunately failed due to the following reason / error :</p>\n<p>Cannot upload deployment: {&quot;WFLYCTL0080: Failed services&quot; =&gt; {&quot;jboss.deployment.subunit.&quot;MTCSE_App.ear&quot;.&quot;MTCSE_EJBApp.jar&quot;.PARSE&quot; =&gt; &quot;org.jboss.msc.service.StartException in service jboss.deployment.subunit.&quot;MTCSE_App.ear&quot;.&quot;MTCSE_EJBApp.jar&quot;.PARSE: WFLYSRV0153: Failed to process phase PARSE of subdeployment &quot;MTCSE_EJBApp.jar&quot; of deployment &quot;MTCSE_App.ear&quot; Caused by: org.jboss.msc.service.ServiceNotFoundException: Service service jboss.ejb.default-resource-adapter-name-service not found&quot;},&quot;WFLYCTL0412: Required services that are not installed:&quot; =&gt; [&quot;jboss.deployment.subunit.&quot;MTCSE_App.ear&quot;.&quot;MTCSE_EJBApp.jar&quot;.PARSE&quot;],&quot;WFLYCTL0180: Services with missing/unavailable dependencies&quot; =&gt; undefined</p>\n<p>I'm trying to deploy a ear file and it is throwing me the above error. Can you provide the possible reasons and solutions to the error.</p>\n"},{"tags":["java","javafx","timer","countdown","countdowntimer"],"comments":[{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":1,"creation_date":1699448639,"post_id":77445754,"comment_id":136532225,"body_markdown":"Maybe we can solve the problems if you [edit] your question and include the code ChatGPT produced…","body":"Maybe we can solve the problems if you <a href=\"https://stackoverflow.com/posts/77445754/edit\">edit</a> your question and include the code ChatGPT produced…"},{"owner":{"account_id":28304862,"reputation":57,"user_id":21643028,"display_name":"MsLaus"},"score":2,"creation_date":1699449595,"post_id":77445754,"comment_id":136532398,"body_markdown":"@deHaar i just edited the post. The problem with the code produced by chatgpt is &quot;Timeline might not be initialized&quot; and even though i tried to initialized i keep having problems","body":"@deHaar i just edited the post. The problem with the code produced by chatgpt is &quot;Timeline might not be initialized&quot; and even though i tried to initialized i keep having problems"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":3,"creation_date":1699453250,"post_id":77445754,"comment_id":136533278,"body_markdown":"The code generated by ChatGPT is garbage (no surprise there). The timeline&#39;s event handler is not guaranteed to execute exactly every second; it will just execute *when a frame is being rendered*, if a second or more has passed. So this timer will tend to run slow. When the start button is pressed, find the current time (`LocalTime startTime = LocalTime.now()`), compute the time when the timer should finish (`LocalTime endTime = startTime.plusHours(...).plusMinutes(...).plusSeconds(...);`). Then start an `AnimationTimer` that updates the label.","body":"The code generated by ChatGPT is garbage (no surprise there). The timeline&#39;s event handler is not guaranteed to execute exactly every second; it will just execute <i>when a frame is being rendered</i>, if a second or more has passed. So this timer will tend to run slow. When the start button is pressed, find the current time (<code>LocalTime startTime = LocalTime.now()</code>), compute the time when the timer should finish (<code>LocalTime endTime = startTime.plusHours(...).plusMinutes(...).plusSeconds(...);</code>)&zwnj;&#8203;. Then start an <code>AnimationTimer</code> that updates the label."}],"answers":[{"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1699453411,"post_id":77446372,"comment_id":136533321,"body_markdown":"This timer won&#39;t work properly though. There is no guarantee as to when that event handler is invoked: you can&#39;t assume that decreasing the countdown by one second is correct.","body":"This timer won&#39;t work properly though. There is no guarantee as to when that event handler is invoked: you can&#39;t assume that decreasing the countdown by one second is correct."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1699453628,"post_id":77446372,"comment_id":136533379,"body_markdown":"@James_D What do you mean?  You mean it’s not a perfect real-time clock?  I think that much is understood.","body":"@James_D What do you mean?  You mean it’s not a perfect real-time clock?  I think that much is understood."},{"owner":{"account_id":28304862,"reputation":57,"user_id":21643028,"display_name":"MsLaus"},"score":0,"creation_date":1699454224,"post_id":77446372,"comment_id":136533553,"body_markdown":"@VGR firstly, I want tot thank you for the effort but it still does not work properly, the label&#39;s text remains the same","body":"@VGR firstly, I want tot thank you for the effort but it still does not work properly, the label&#39;s text remains the same"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1699454495,"post_id":77446372,"comment_id":136533615,"body_markdown":"I&#39;m not sure the extent to which it is understood. This timer could slow down if the UI is busy rendering other parts of the UI. That should not happen, even if the timing isn&#39;t perfect. Even under ideal circumstances, the event handler is only invoked 60 times per second, so you could easily see 1-2% inaccuracies under ideal circumstances.","body":"I&#39;m not sure the extent to which it is understood. This timer could slow down if the UI is busy rendering other parts of the UI. That should not happen, even if the timing isn&#39;t perfect. Even under ideal circumstances, the event handler is only invoked 60 times per second, so you could easily see 1-2% inaccuracies under ideal circumstances."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1699455114,"post_id":77446372,"comment_id":136533791,"body_markdown":"@James_D I agree that using java.time is important for accuracy, but I got the impression that this is an exercise rather than an end user application.","body":"@James_D I agree that using java.time is important for accuracy, but I got the impression that this is an exercise rather than an end user application."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1699455215,"post_id":77446372,"comment_id":136533819,"body_markdown":"@MsLaus The code is working for me.  Is it possible that you’re creating more than one Label, or something?  It might help to edit your question and turn the code into a short but complete standalone program (what we call a [mre]).","body":"@MsLaus The code is working for me.  Is it possible that you’re creating more than one Label, or something?  It might help to edit your question and turn the code into a short but complete standalone program (what we call a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>)."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1699455916,"post_id":77446372,"comment_id":136534006,"body_markdown":"Even if this is only an exercise, I disagree that this is an appropriate solution. It just serves to encourage misunderstanding of how JavaFX animations work. We don&#39;t know what the exercise is aiming to teach, but people will always learn things that are not directly part of the exercise anyway.","body":"Even if this is only an exercise, I disagree that this is an appropriate solution. It just serves to encourage misunderstanding of how JavaFX animations work. We don&#39;t know what the exercise is aiming to teach, but people will always learn things that are not directly part of the exercise anyway."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1699456171,"post_id":77446372,"comment_id":136534068,"body_markdown":"And to clarify: *&quot;I agree that using java.time is important for accuracy&quot;* it&#39;s not using `java.time` specifically. The point is to save the end point of the timer and recompute the remaining time each time, rather than to recompute the remaining time from the current remaining time. Surely that&#39;s critical to understand for implementing any kind of timer, no matter the context? (I.e. don&#39;t repeatedly accumulate errors in computations.)","body":"And to clarify: <i>&quot;I agree that using java.time is important for accuracy&quot;</i> it&#39;s not using <code>java.time</code> specifically. The point is to save the end point of the timer and recompute the remaining time each time, rather than to recompute the remaining time from the current remaining time. Surely that&#39;s critical to understand for implementing any kind of timer, no matter the context? (I.e. don&#39;t repeatedly accumulate errors in computations.)"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1699456362,"post_id":77446372,"comment_id":136534127,"body_markdown":"@James_D Yeah, I was thinking as I wrote that there’s obviously other ways to accurately track the time besides using java.time, but I didn’t want to get too far off-topic.  It is critical, but I think it might be a more advanced topic than this particular task aims to teach.","body":"@James_D Yeah, I was thinking as I wrote that there’s obviously other ways to accurately track the time besides using java.time, but I didn’t want to get too far off-topic.  It is critical, but I think it might be a more advanced topic than this particular task aims to teach."},{"owner":{"account_id":28304862,"reputation":57,"user_id":21643028,"display_name":"MsLaus"},"score":0,"creation_date":1699457576,"post_id":77446372,"comment_id":136534418,"body_markdown":"@VGR I just edited the text to a minimal reproducible example.  What I am trying to reach is a program for my portofolio that should help people focus on a task for a period of time setted by the user, something similar to Forest App if you know this App.","body":"@VGR I just edited the text to a minimal reproducible example.  What I am trying to reach is a program for my portofolio that should help people focus on a task for a period of time setted by the user, something similar to Forest App if you know this App."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1699460555,"post_id":77446372,"comment_id":136535149,"body_markdown":"@MsLaus I appreciate the attempt, but you want to keep your original code in your question.  Without it, all of the existing comments and answers don’t make sense.  If you want to add another program, that’s fine too.  That said, stay away from Timer and TimerTask.  JavaFX, like most GUI frameworks, requires that its methods are called in one specific thread.  Calling them in any other thread, as Timer does, will cause unpredictable behavior.","body":"@MsLaus I appreciate the attempt, but you want to keep your original code in your question.  Without it, all of the existing comments and answers don’t make sense.  If you want to add another program, that’s fine too.  That said, stay away from Timer and TimerTask.  JavaFX, like most GUI frameworks, requires that its methods are called in one specific thread.  Calling them in any other thread, as Timer does, will cause unpredictable behavior."},{"owner":{"account_id":28304862,"reputation":57,"user_id":21643028,"display_name":"MsLaus"},"score":0,"creation_date":1699471819,"post_id":77446372,"comment_id":136537281,"body_markdown":"@VGR thank you for the effort ! The code works now how I wanted to!","body":"@VGR thank you for the effort ! The code works now how I wanted to!"}],"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"comment_count":12,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1699453232,"creation_date":1699453232,"answer_id":77446372,"question_id":77445754,"body_markdown":"The message “timeline might not be initialized” means that you are trying to use `timeline` before it has been constructed.  You are calling `timeline.stop()` inside an event handler which is being passed to the Timeline constructor;  since the constructor hasn’t completed yet, the compiler cannot guarantee `timeline` has actually had a value assigned to it when your event handler runs.  In other words, `timeline` might be initialized.\r\n\r\nOne way to address this is to add the KeyFrame separately.  That way, the Timeline constructor has completely finished:\r\n\r\n    Timeline timeline = new Timeline();\r\n    // Construction complete;  now timeline can be used in an event handler.\r\n\r\n    timeline.getKeyFrames().add(new KeyFrame(Duration.seconds(1), event -&gt; {\r\n        // Decrease one second\r\n        if (seconds &gt; 0) {\r\n            seconds--;\r\n        } else {\r\n            // If seconds reach zero, decrement minutes and set seconds to 59\r\n            if (minutes &gt; 0) {\r\n                minutes--;\r\n                seconds = 59;\r\n            } else {\r\n                // If minutes reach zero, decrement hours and set minutes and seconds to 59\r\n                if (hours &gt; 0) {\r\n                    hours--;\r\n                    minutes = 59;\r\n                    seconds = 59;\r\n                } else {\r\n                    // If hours, minutes, and seconds reach zero, stop the timer\r\n                    hours = 0;\r\n                    minutes = 0;\r\n                    seconds = 0;\r\n                    timeline.stop();\r\n                }\r\n            }\r\n        }\r\n        // Update the label with the new values\r\n        timerLabel.setText(String.format(&quot;Time Left: %02d:%02d:%02d&quot;, hours, minutes, seconds));\r\n    }));\r\n\r\nAnother way would be to declare `timeline` as a private field, rather than as a local variable.  This works because, once the enclosing class has finished its own constructor, every field is guaranteed to be initialized.  (If your code never assigned a value to a field, that field would automatically be initialized to null.)\r\n","title":"Countdown timer Java JavaFX","body":"<p>The message “timeline might not be initialized” means that you are trying to use <code>timeline</code> before it has been constructed.  You are calling <code>timeline.stop()</code> inside an event handler which is being passed to the Timeline constructor;  since the constructor hasn’t completed yet, the compiler cannot guarantee <code>timeline</code> has actually had a value assigned to it when your event handler runs.  In other words, <code>timeline</code> might be initialized.</p>\n<p>One way to address this is to add the KeyFrame separately.  That way, the Timeline constructor has completely finished:</p>\n<pre><code>Timeline timeline = new Timeline();\n// Construction complete;  now timeline can be used in an event handler.\n\ntimeline.getKeyFrames().add(new KeyFrame(Duration.seconds(1), event -&gt; {\n    // Decrease one second\n    if (seconds &gt; 0) {\n        seconds--;\n    } else {\n        // If seconds reach zero, decrement minutes and set seconds to 59\n        if (minutes &gt; 0) {\n            minutes--;\n            seconds = 59;\n        } else {\n            // If minutes reach zero, decrement hours and set minutes and seconds to 59\n            if (hours &gt; 0) {\n                hours--;\n                minutes = 59;\n                seconds = 59;\n            } else {\n                // If hours, minutes, and seconds reach zero, stop the timer\n                hours = 0;\n                minutes = 0;\n                seconds = 0;\n                timeline.stop();\n            }\n        }\n    }\n    // Update the label with the new values\n    timerLabel.setText(String.format(&quot;Time Left: %02d:%02d:%02d&quot;, hours, minutes, seconds));\n}));\n</code></pre>\n<p>Another way would be to declare <code>timeline</code> as a private field, rather than as a local variable.  This works because, once the enclosing class has finished its own constructor, every field is guaranteed to be initialized.  (If your code never assigned a value to a field, that field would automatically be initialized to null.)</p>\n"},{"comments":[{"owner":{"account_id":28304862,"reputation":57,"user_id":21643028,"display_name":"MsLaus"},"score":0,"creation_date":1699456841,"post_id":77446719,"comment_id":136534239,"body_markdown":"thank you for the effort but i still have a problem, remaining.isPositive() does not work. Do i keep having problems because this is a JavaFX project?","body":"thank you for the effort but i still have a problem, remaining.isPositive() does not work. Do i keep having problems because this is a JavaFX project?"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1699461967,"post_id":77446719,"comment_id":136535460,"body_markdown":"@MsLaus The first code block contains a complete, executable example (which is also a JavaFX project, identical to yours) that compiles and runs. What do you actually mean by “does not work”? Make sure you are using an up-to-date JDK (`Duration.isPositive()` was introduced in version 18; current version is 21)","body":"@MsLaus The first code block contains a complete, executable example (which is also a JavaFX project, identical to yours) that compiles and runs. What do you actually mean by “does not work”? Make sure you are using an up-to-date JDK (<code>Duration.isPositive()</code> was introduced in version 18; current version is 21)"},{"owner":{"account_id":28304862,"reputation":57,"user_id":21643028,"display_name":"MsLaus"},"score":0,"creation_date":1699471766,"post_id":77446719,"comment_id":136537267,"body_markdown":"Thank you! Finally, the code works how I want to. I appreciate the effort! I needed to use JDK21 (i used 17 because until now i did not have any problem) and give up the method i wrote for the button.","body":"Thank you! Finally, the code works how I want to. I appreciate the effort! I needed to use JDK21 (i used 17 because until now i did not have any problem) and give up the method i wrote for the button."}],"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1699455762,"creation_date":1699455762,"answer_id":77446719,"question_id":77445754,"body_markdown":"The immediate issue (&quot;timeline might not be initialized&quot;) is answered by [@VGR&#39;s answer](https://stackoverflow.com/a/77446372/2189127). However, using a `Timeline` like this is simply not the way to create a countdown timer. The issue is that the timeline does not guarantee to call the event handler every second; it will merely be executed when the UI is rendered, if *at least* a second has passed. \r\n\r\nWhen the countdown is started, you should compute the time at which it should end. Then &quot;periodically&quot; update the label by calculating the time remaining until the end time. You can do this part either with a timeline, or with an [`AnimationTimer`]() (whose `handle()` method will be called each time the UI is due to be rendered). The `AnimationTimer` will add a little extra computation time at the expense of being as accurate as the JavaFX system will allow; here I think the computation is minimal enough that it is not an issue and would prefer that approach.\r\n\r\nHere is the `startComputation()` method using this approach:\r\n\r\n```\r\nimport javafx.animation.Animation;\r\nimport javafx.animation.AnimationTimer;\r\nimport javafx.animation.KeyFrame;\r\nimport javafx.animation.Timeline;\r\nimport javafx.application.Application;\r\nimport javafx.geometry.Pos;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.Button;\r\nimport javafx.scene.control.Label;\r\nimport javafx.scene.control.TextField;\r\nimport javafx.scene.layout.VBox;\r\nimport javafx.stage.Stage;\r\n\r\nimport java.time.Duration;\r\nimport java.time.LocalTime;\r\n\r\npublic class CountdownTimer extends Application {\r\n    private int hours;\r\n    private int minutes;\r\n    private int seconds;\r\n\r\n    private Label timerLabel = new Label();\r\n\r\n    public static void main(String[] args) {\r\n        launch(args);\r\n    }\r\n\r\n    @Override\r\n    public void start(Stage primaryStage) {\r\n        VBox root = new VBox(10);\r\n        root.setAlignment(Pos.CENTER);\r\n\r\n        TextField hoursField = new TextField();\r\n        hoursField.setPromptText(&quot;Hours&quot;);\r\n        TextField minutesField = new TextField();\r\n        minutesField.setPromptText(&quot;Minutes&quot;);\r\n        TextField secondsField = new TextField();\r\n        secondsField.setPromptText(&quot;Seconds&quot;);\r\n\r\n        Button startButton = new Button(&quot;Start Timer&quot;);\r\n        startButton.setOnAction(event -&gt; {\r\n            // Parse user input for hours, minutes, and seconds\r\n            hours = Integer.parseInt(hoursField.getText());\r\n            minutes = Integer.parseInt(minutesField.getText());\r\n            seconds = Integer.parseInt(secondsField.getText());\r\n\r\n            // Start the countdown timer\r\n            startCountdown();\r\n        });\r\n\r\n        root.getChildren().addAll(hoursField, minutesField, secondsField,   startButton, timerLabel);\r\n\r\n        Scene scene = new Scene(root, 300, 200);\r\n        primaryStage.setTitle(&quot;Countdown Timer&quot;);\r\n        primaryStage.setScene(scene);\r\n        primaryStage.show();\r\n    }\r\n\r\n    private void startCountdown() {\r\n        LocalTime end = LocalTime.now()\r\n                .plusHours(hours)\r\n                .plusMinutes(minutes)\r\n                .plusSeconds(seconds);\r\n        AnimationTimer timer = new AnimationTimer() {\r\n            @Override\r\n            public void handle(long l) {\r\n                Duration remaining = Duration.between(LocalTime.now(), end);\r\n                if (remaining.isPositive()) {\r\n                    timerLabel.setText(format(remaining));\r\n                } else {\r\n                    timerLabel.setText(format(Duration.ZERO));\r\n                    stop();\r\n                }\r\n            }\r\n\r\n            private String format(Duration remaining) {\r\n                return String.format(&quot;%02d:%02d:%02d&quot;,\r\n                        remaining.toHoursPart(),\r\n                        remaining.toMinutesPart(),\r\n                        remaining.toSecondsPart()\r\n                );\r\n            }\r\n        };\r\n\r\n        timer.start();\r\n    }\r\n}\r\n```\r\n\r\nIf you prefer a `Timeline`, replace the `startCountdown()` method with\r\n\r\n```\r\n    private void startCountdown() {\r\n        LocalTime end = LocalTime.now()\r\n                .plusHours(hours)\r\n                .plusMinutes(minutes)\r\n                .plusSeconds(seconds);\r\n        Timeline timeline = new Timeline();\r\n        timeline.getKeyFrames().add(new KeyFrame(Duration.seconds(1), e -&gt; {\r\n            java.time.Duration remaining = java.time.Duration.between(LocalTime.now(), end);\r\n            if (remaining.isPositive()) {\r\n                timerLabel.setText(format(remaining));\r\n            } else {\r\n                timerLabel.setText(format(java.time.Duration.ZERO));\r\n                timeline.stop();\r\n            }\r\n        }));\r\n        timeline.setCycleCount(Animation.INDEFINITE);\r\n        timeline.play();\r\n    }\r\n\r\n    private String format(java.time.Duration remaining) {\r\n        return String.format(&quot;%02d:%02d:%02d&quot;,\r\n                remaining.toHoursPart(),\r\n                remaining.toMinutesPart(),\r\n                remaining.toSecondsPart()\r\n        );\r\n    }\r\n```","title":"Countdown timer Java JavaFX","body":"<p>The immediate issue (&quot;timeline might not be initialized&quot;) is answered by <a href=\"https://stackoverflow.com/a/77446372/2189127\">@VGR's answer</a>. However, using a <code>Timeline</code> like this is simply not the way to create a countdown timer. The issue is that the timeline does not guarantee to call the event handler every second; it will merely be executed when the UI is rendered, if <em>at least</em> a second has passed.</p>\n<p>When the countdown is started, you should compute the time at which it should end. Then &quot;periodically&quot; update the label by calculating the time remaining until the end time. You can do this part either with a timeline, or with an <code>AnimationTimer</code> (whose <code>handle()</code> method will be called each time the UI is due to be rendered). The <code>AnimationTimer</code> will add a little extra computation time at the expense of being as accurate as the JavaFX system will allow; here I think the computation is minimal enough that it is not an issue and would prefer that approach.</p>\n<p>Here is the <code>startComputation()</code> method using this approach:</p>\n<pre><code>import javafx.animation.Animation;\nimport javafx.animation.AnimationTimer;\nimport javafx.animation.KeyFrame;\nimport javafx.animation.Timeline;\nimport javafx.application.Application;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.Label;\nimport javafx.scene.control.TextField;\nimport javafx.scene.layout.VBox;\nimport javafx.stage.Stage;\n\nimport java.time.Duration;\nimport java.time.LocalTime;\n\npublic class CountdownTimer extends Application {\n    private int hours;\n    private int minutes;\n    private int seconds;\n\n    private Label timerLabel = new Label();\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage primaryStage) {\n        VBox root = new VBox(10);\n        root.setAlignment(Pos.CENTER);\n\n        TextField hoursField = new TextField();\n        hoursField.setPromptText(&quot;Hours&quot;);\n        TextField minutesField = new TextField();\n        minutesField.setPromptText(&quot;Minutes&quot;);\n        TextField secondsField = new TextField();\n        secondsField.setPromptText(&quot;Seconds&quot;);\n\n        Button startButton = new Button(&quot;Start Timer&quot;);\n        startButton.setOnAction(event -&gt; {\n            // Parse user input for hours, minutes, and seconds\n            hours = Integer.parseInt(hoursField.getText());\n            minutes = Integer.parseInt(minutesField.getText());\n            seconds = Integer.parseInt(secondsField.getText());\n\n            // Start the countdown timer\n            startCountdown();\n        });\n\n        root.getChildren().addAll(hoursField, minutesField, secondsField,   startButton, timerLabel);\n\n        Scene scene = new Scene(root, 300, 200);\n        primaryStage.setTitle(&quot;Countdown Timer&quot;);\n        primaryStage.setScene(scene);\n        primaryStage.show();\n    }\n\n    private void startCountdown() {\n        LocalTime end = LocalTime.now()\n                .plusHours(hours)\n                .plusMinutes(minutes)\n                .plusSeconds(seconds);\n        AnimationTimer timer = new AnimationTimer() {\n            @Override\n            public void handle(long l) {\n                Duration remaining = Duration.between(LocalTime.now(), end);\n                if (remaining.isPositive()) {\n                    timerLabel.setText(format(remaining));\n                } else {\n                    timerLabel.setText(format(Duration.ZERO));\n                    stop();\n                }\n            }\n\n            private String format(Duration remaining) {\n                return String.format(&quot;%02d:%02d:%02d&quot;,\n                        remaining.toHoursPart(),\n                        remaining.toMinutesPart(),\n                        remaining.toSecondsPart()\n                );\n            }\n        };\n\n        timer.start();\n    }\n}\n</code></pre>\n<p>If you prefer a <code>Timeline</code>, replace the <code>startCountdown()</code> method with</p>\n<pre><code>    private void startCountdown() {\n        LocalTime end = LocalTime.now()\n                .plusHours(hours)\n                .plusMinutes(minutes)\n                .plusSeconds(seconds);\n        Timeline timeline = new Timeline();\n        timeline.getKeyFrames().add(new KeyFrame(Duration.seconds(1), e -&gt; {\n            java.time.Duration remaining = java.time.Duration.between(LocalTime.now(), end);\n            if (remaining.isPositive()) {\n                timerLabel.setText(format(remaining));\n            } else {\n                timerLabel.setText(format(java.time.Duration.ZERO));\n                timeline.stop();\n            }\n        }));\n        timeline.setCycleCount(Animation.INDEFINITE);\n        timeline.play();\n    }\n\n    private String format(java.time.Duration remaining) {\n        return String.format(&quot;%02d:%02d:%02d&quot;,\n                remaining.toHoursPart(),\n                remaining.toMinutesPart(),\n                remaining.toSecondsPart()\n        );\n    }\n</code></pre>\n"}],"owner":{"account_id":28304862,"reputation":57,"user_id":21643028,"display_name":"MsLaus"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":2,"up_vote_count":4,"answer_count":2,"score":2,"last_activity_date":1699456318,"creation_date":1699448490,"question_id":77445754,"body_markdown":"Can someone please help me make a countdown timer in JavaFX? I need the time to be taken from a label (the time is set by a slider) and I want to see the minutes and seconds remaining every second. The countdown should start when a button is pressed. I searched Stack Overflow and I tried to do it with ChatGPT, but I still have problems with it. \r\n\r\n```java\r\n\r\nimport javafx.beans.value.ObservableValue;\r\nimport javafx.event.ActionEvent;\r\nimport javafx.fxml.FXML;\r\nimport javafx.fxml.FXMLLoader;\r\nimport javafx.fxml.Initializable;\r\nimport javafx.scene.Node;\r\nimport javafx.scene.Parent;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.*;\r\nimport javafx.scene.image.ImageView;\r\nimport javafx.scene.layout.VBox;\r\nimport javafx.stage.Stage;\r\n\r\nimport java.io.IOException;\r\nimport java.net.URL;\r\nimport java.util.*;\r\n\r\npublic class MainController implements Initializable{\r\n\r\n@FXML\r\nprivate Button button;\r\n\r\n@FXML\r\nprivate Slider slider;\r\n\r\n@FXML\r\nprivate Label timerLabel;\r\n\r\n@Override\r\npublic void initialize(URL url, ResourceBundle resourceBundle) {\r\n\r\n//the initial value of the label is set with the slider\r\n\r\nslider.valueProperty().addListener((ObservableValue&lt;? extends Number&gt; num, Number oldVal, Number newVal) -&gt; {\r\n            Integer value = Integer.valueOf(String.format(&quot;%.0f&quot;, newVal));\r\n            timeLabel.setText(String.valueOf(value));\r\n\r\n        });\r\n\r\n}\r\n\r\n//the action of the button\r\n\r\n@FXML\r\nprivate void start(){\r\n\r\n//i tried another way and still does not work\r\ntimer = seconds;\r\nTimer timerA = new Timer();\r\nTimerTask task = new TimerTask() {\r\n      @Override\r\n      public void run() {\r\n           if(timer &gt;0){\r\n                timeLabel.setText(String.valueOf(timer));\r\n                timer--;\r\n           }\r\n           if(timer == -1){\r\n                 timeLabel.setText(String.valueOf(timer));\r\n                 timerA.cancel();\r\n           }\r\n        }\r\n};\r\ntimerA.schedule(task,0,1000);\r\n}\r\n}\r\n\r\n```\r\n\r\n","title":"Countdown timer Java JavaFX","body":"<p>Can someone please help me make a countdown timer in JavaFX? I need the time to be taken from a label (the time is set by a slider) and I want to see the minutes and seconds remaining every second. The countdown should start when a button is pressed. I searched Stack Overflow and I tried to do it with ChatGPT, but I still have problems with it.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nimport javafx.beans.value.ObservableValue;\nimport javafx.event.ActionEvent;\nimport javafx.fxml.FXML;\nimport javafx.fxml.FXMLLoader;\nimport javafx.fxml.Initializable;\nimport javafx.scene.Node;\nimport javafx.scene.Parent;\nimport javafx.scene.Scene;\nimport javafx.scene.control.*;\nimport javafx.scene.image.ImageView;\nimport javafx.scene.layout.VBox;\nimport javafx.stage.Stage;\n\nimport java.io.IOException;\nimport java.net.URL;\nimport java.util.*;\n\npublic class MainController implements Initializable{\n\n@FXML\nprivate Button button;\n\n@FXML\nprivate Slider slider;\n\n@FXML\nprivate Label timerLabel;\n\n@Override\npublic void initialize(URL url, ResourceBundle resourceBundle) {\n\n//the initial value of the label is set with the slider\n\nslider.valueProperty().addListener((ObservableValue&lt;? extends Number&gt; num, Number oldVal, Number newVal) -&gt; {\n            Integer value = Integer.valueOf(String.format(&quot;%.0f&quot;, newVal));\n            timeLabel.setText(String.valueOf(value));\n\n        });\n\n}\n\n//the action of the button\n\n@FXML\nprivate void start(){\n\n//i tried another way and still does not work\ntimer = seconds;\nTimer timerA = new Timer();\nTimerTask task = new TimerTask() {\n      @Override\n      public void run() {\n           if(timer &gt;0){\n                timeLabel.setText(String.valueOf(timer));\n                timer--;\n           }\n           if(timer == -1){\n                 timeLabel.setText(String.valueOf(timer));\n                 timerA.cancel();\n           }\n        }\n};\ntimerA.schedule(task,0,1000);\n}\n}\n\n</code></pre>\n"},{"tags":["java","arrays","poker"],"comments":[{"owner":{"account_id":6692573,"reputation":134,"user_id":5161630,"display_name":"Connor"},"score":1,"creation_date":1442545896,"post_id":32643124,"comment_id":53134520,"body_markdown":"I smell a homework dump","body":"I smell a homework dump"}],"answers":[{"tags":[],"owner":{"account_id":6407105,"reputation":2683,"user_id":4967929,"accept_rate":83,"display_name":"Michael"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1442546131,"creation_date":1442546131,"answer_id":32643248,"question_id":32643124,"body_markdown":"Wouldn&#39;t it just be something like this? Not too complex... you wrote all the logic of the program already (I didn&#39;t double check that, BTW)\r\n\r\n    public class MainRunner{\r\n        public static void main(String[] args){\r\n            Deck deck = new Deck();\r\n            Hand myHand = new Hand(deck);\r\n            myHand.display();\r\n        }\r\n    }","title":"Running Java Poker Game","body":"<p>Wouldn't it just be something like this? Not too complex... you wrote all the logic of the program already (I didn't double check that, BTW)</p>\n\n<pre><code>public class MainRunner{\n    public static void main(String[] args){\n        Deck deck = new Deck();\n        Hand myHand = new Hand(deck);\n        myHand.display();\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3963457,"reputation":6910,"user_id":3270037,"accept_rate":100,"display_name":"Nick is tired"},"score":0,"creation_date":1553881620,"post_id":55422692,"comment_id":97564998,"body_markdown":"Why would there be no `add` function? `cards` is just an `ArrayList`","body":"Why would there be no <code>add</code> function? <code>cards</code> is just an <code>ArrayList</code>"},{"owner":{"display_name":"user10276625"},"score":0,"creation_date":1553921422,"post_id":55422692,"comment_id":97575053,"body_markdown":"Ah, thanks for reminding me, I think i got confused with the similar names used","body":"Ah, thanks for reminding me, I think i got confused with the similar names used"}],"tags":[],"owner":{"display_name":"user10276625"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553880431,"creation_date":1553880431,"answer_id":55422692,"question_id":32643124,"body_markdown":"i am pretty sure that there&#39;s no add function in your Card.java\r\n\r\n    for (short a=0; a&lt;=3; a++)\r\n    {\r\n        for (short b=0; b&lt;=12; b++)\r\n         {\r\n           cards.add( new Card(a,b) ); //here\r\n         }\r\n    }\r\n\r\n\r\nSo maybe go through your classes first?","title":"Running Java Poker Game","body":"<p>i am pretty sure that there's no add function in your Card.java</p>\n\n<pre><code>for (short a=0; a&lt;=3; a++)\n{\n    for (short b=0; b&lt;=12; b++)\n     {\n       cards.add( new Card(a,b) ); //here\n     }\n}\n</code></pre>\n\n<p>So maybe go through your classes first?</p>\n"}],"owner":{"account_id":6973167,"reputation":17,"user_id":5348748,"display_name":"Gabriel Beru"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10811,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":2,"score":0,"last_activity_date":1699455956,"creation_date":1442545160,"question_id":32643124,"body_markdown":"I have to write a program that creates 5 decks of 5 random cards chosen, and evaluate them to return the value of the deck. Etc. 9 is a royal lush and a 2 is a 2 pair. \r\n\r\nI have three classes so far. One to represent the Card, One to represent the Deck, and one to represent the Hand evaluation. I do not have a main program yet to call these, and wanted to know how that would be done. For example, I want to have a main program that once ran, disperses out 5 hands of 5 random cards, evaluates them, and returns the value. I have the classes necessary to everything, just not sure how to make a class to make it run.\r\n\r\n\r\n    public class Card{\r\n    private short rank, suit;\r\n\r\n    private static String[] suits = { &quot;hearts&quot;, &quot;spades&quot;, &quot;diamonds&quot;, &quot;clubs&quot; };\r\n    private static String[] ranks  = { &quot;Ace&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, \r\n                                       &quot;8&quot;, &quot;9&quot;, &quot;10&quot;, &quot;Jack&quot;, &quot;Queen&quot;, &quot;King&quot; };\r\n\r\n    public static String rankAsString( int __rank ) {\r\n        return ranks[__rank];\r\n    }\r\n\r\n    Card(short suit, short rank)\r\n    {\r\n        this.rank=rank;\r\n        this.suit=suit;\r\n    }\r\n\r\n    public @Override String toString()\r\n    {\r\n          return ranks[rank] + &quot; of &quot; + suits[suit];\r\n    }\r\n\r\n    public short getRank() {\r\n         return rank;\r\n    }\r\n\r\n    public short getSuit() {\r\n        return suit;\r\n    }\r\n    }\r\n\r\n    import java.util.Random;import java.util.ArrayList;\r\n    \r\n    public class Deck {\r\n    private ArrayList&lt;Card&gt; cards;\r\n\r\n     Deck()\r\n    {\r\n        cards = new ArrayList&lt;Card&gt;();\r\n        int index_1, index_2;\r\n        Random generator = new Random();\r\n        Card temp;\r\n\r\n        for (short a=0; a&lt;=3; a++)\r\n        {\r\n            for (short b=0; b&lt;=12; b++)\r\n             {\r\n               cards.add( new Card(a,b) );\r\n             }\r\n        }\r\n\r\n        int size = cards.size() -1;\r\n\r\n        for (short i=0; i&lt;100; i++)\r\n        {\r\n            index_1 = generator.nextInt( size );\r\n            index_2 = generator.nextInt( size );\r\n\r\n            temp = (Card) cards.get( index_2 );\r\n            cards.set( index_2 , cards.get( index_1 ) );\r\n            cards.set( index_1, temp );\r\n        }\r\n    }\r\n\r\n    public Card drawFromDeck()\r\n    {       \r\n        return cards.remove( cards.size()-1 );\r\n    }\r\n\r\n    public int getTotalCards()\r\n    {\r\n        return cards.size();\r\n        //we could use this method when making \r\n        //a complete poker game to see if we needed a new deck\r\n    }\r\n    }\r\n\r\n    public class Hand {\r\n    private Card[] cards;\r\n    private int[] value;\r\n\r\n    Hand(Deck d)\r\n    {\r\n        value = new int[6];\r\n        cards = new Card[5];\r\n        for (int x=0; x&lt;5; x++)\r\n        {\r\n            cards[x] = d.drawFromDeck();\r\n        }\r\n\r\n        int[] ranks = new int[14];\r\n        //miscellaneous cards that are not otherwise significant\r\n        int[] orderedRanks = new int[5];\r\n        boolean flush=true, straight=false;\r\n        int sameCards=1,sameCards2=1;\r\n        int largeGroupRank=0,smallGroupRank=0;\r\n        int index=0;\r\n        int topStraightValue=0;\r\n\r\n        for (int x=0; x&lt;=13; x++)\r\n        {\r\n            ranks[x]=0;\r\n        }\r\n        for (int x=0; x&lt;=4; x++)\r\n        {\r\n            ranks[ cards[x].getRank() ]++;\r\n        }\r\n        for (int x=0; x&lt;4; x++) {\r\n            if ( cards[x].getSuit() != cards[x+1].getSuit() )\r\n                flush=false;\r\n        }\r\n\r\n        for (int x=13; x&gt;=1; x--)\r\n        {\r\n                 if (ranks[x] &gt; sameCards)\r\n                 {\r\n                     if (sameCards != 1)\r\n                     //if sameCards was not the default value\r\n                     {\r\n                         sameCards2 = sameCards;\r\n                         smallGroupRank = largeGroupRank;\r\n                     }\r\n\r\n                     sameCards = ranks[x];\r\n                     largeGroupRank = x;\r\n\r\n                 } else if (ranks[x] &gt; sameCards2)\r\n                 {\r\n                     sameCards2 = ranks[x];\r\n                     smallGroupRank = x;\r\n                 }\r\n        }\r\n\r\n        if (ranks[1]==1) //if ace, run this before because ace is highest card\r\n        {\r\n            orderedRanks[index]=14;\r\n            index++;\r\n        }\r\n\r\n        for (int x=13; x&gt;=2; x--)\r\n        {\r\n            if (ranks[x]==1)\r\n            {\r\n                orderedRanks[index]=x; //if ace\r\n                index++;\r\n            }\r\n        }\r\n        \r\n        for (int x=1; x&lt;=9; x++)\r\n        //can&#39;t have straight with lowest value of more than 10\r\n        {\r\n            if (ranks[x]==1 &amp;&amp; ranks[x+1]==1 &amp;&amp; ranks[x+2]==1 &amp;&amp; \r\n                ranks[x+3]==1 &amp;&amp; ranks[x+4]==1)\r\n            {\r\n                straight=true;\r\n                topStraightValue=x+4; //4 above bottom value\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (ranks[10]==1 &amp;&amp; ranks[11]==1 &amp;&amp; ranks[12]==1 &amp;&amp; \r\n            ranks[13]==1 &amp;&amp; ranks[1]==1) //ace high\r\n        {\r\n            straight=true;\r\n            topStraightValue=14; //higher than king\r\n        }\r\n        \r\n        for (int x=0; x&lt;=5; x++)\r\n        {\r\n            value[x]=0;\r\n        }\r\n\r\n\r\n        //start hand evaluation\r\n        if ( sameCards==1 ) {\r\n            value[0]=1;\r\n            value[1]=orderedRanks[0];\r\n            value[2]=orderedRanks[1];\r\n            value[3]=orderedRanks[2];\r\n            value[4]=orderedRanks[3];\r\n            value[5]=orderedRanks[4];\r\n        }\r\n\r\n        if (sameCards==2 &amp;&amp; sameCards2==1)\r\n        {\r\n            value[0]=2;\r\n            value[1]=largeGroupRank; //rank of pair\r\n            value[2]=orderedRanks[0];\r\n            value[3]=orderedRanks[1];\r\n            value[4]=orderedRanks[2];\r\n        }\r\n\r\n        if (sameCards==2 &amp;&amp; sameCards2==2) //two pair\r\n        {\r\n            value[0]=3;\r\n            //rank of greater pair\r\n            value[1]= largeGroupRank&gt;smallGroupRank ? largeGroupRank : smallGroupRank;\r\n            value[2]= largeGroupRank&lt;smallGroupRank ? largeGroupRank : smallGroupRank;\r\n            value[3]=orderedRanks[0];  //extra card\r\n        }\r\n\r\n        if (sameCards==3 &amp;&amp; sameCards2!=2)\r\n        {\r\n            value[0]=4;\r\n            value[1]= largeGroupRank;\r\n            value[2]=orderedRanks[0];\r\n            value[3]=orderedRanks[1];\r\n        }\r\n\r\n        if (straight &amp;&amp; !flush)\r\n        {\r\n            value[0]=5;\r\n            value[1]=4;\r\n        }\r\n\r\n        if (flush &amp;&amp; !straight)\r\n        {\r\n            value[0]=6;\r\n            value[1]=orderedRanks[0]; //tie determined by ranks of cards\r\n            value[2]=orderedRanks[1];\r\n            value[3]=orderedRanks[2];\r\n            value[4]=orderedRanks[3];\r\n            value[5]=orderedRanks[4];\r\n        }\r\n\r\n        if (sameCards==3 &amp;&amp; sameCards2==2)\r\n        {\r\n            value[0]=7;\r\n            value[1]=largeGroupRank;\r\n            value[2]=smallGroupRank;\r\n        }\r\n\r\n        if (sameCards==4)\r\n        {\r\n            value[0]=8;\r\n            value[1]=largeGroupRank;\r\n            value[2]=orderedRanks[0];\r\n        }\r\n\r\n        if (straight &amp;&amp; flush)\r\n        {\r\n            value[0]=9;\r\n            value[1]=0;\r\n        }\r\n\r\n    }\r\n\r\n    void display()\r\n    {\r\n        String s;\r\n        switch( value[0] )\r\n        {\r\n\r\n            case 1:\r\n                s=&quot;high card&quot;;\r\n                break;\r\n            case 2:\r\n                s=&quot;pair of &quot; + Card.rankAsString(value[1]) + &quot;\\&#39;s&quot;;\r\n                break;\r\n            case 3:\r\n                s=&quot;two pair &quot; + Card.rankAsString(value[1]) + &quot; &quot; + \r\n                                Card.rankAsString(value[2]);\r\n                break;\r\n            case 4:\r\n                s=&quot;three of a kind &quot; + Card.rankAsString(value[1]) + &quot;\\&#39;s&quot;;\r\n                break;\r\n            case 5:\r\n                s=Card.rankAsString(value[1]) + &quot; high straight&quot;;\r\n                break;\r\n            case 6:\r\n                s=&quot;flush&quot;;\r\n                break;\r\n            case 7:\r\n                s=&quot;full house &quot; + Card.rankAsString(value[1]) + &quot; over &quot; + \r\n                                  Card.rankAsString(value[2]);\r\n                break;\r\n            case 8:\r\n                s=&quot;four of a kind &quot; + Card.rankAsString(value[1]);\r\n                break;\r\n            case 9:\r\n                s=&quot;straight flush &quot; + Card.rankAsString(value[1]) + &quot; high&quot;;\r\n                break;\r\n            default:\r\n                s=&quot;error in Hand.display: value[0] contains invalid value&quot;;\r\n        }\r\n        s = &quot;                &quot; + s;\r\n        System.out.println(s);\r\n    }\r\n\r\n    void displayAll()\r\n    {\r\n        for (int x=0; x&lt;5; x++)\r\n            System.out.println(cards[x]);\r\n    }\r\n\r\n    int compareTo(Hand that)\r\n    {\r\n        for (int x=0; x&lt;6; x++)\r\n        {\r\n            if (this.value[x]&gt;that.value[x])\r\n                return 1;\r\n            else if (this.value[x]&lt;that.value[x])\r\n                return -1;\r\n        }\r\n        return 0; //if hands are equal\r\n    }\r\n    } ","title":"Running Java Poker Game","body":"<p>I have to write a program that creates 5 decks of 5 random cards chosen, and evaluate them to return the value of the deck. Etc. 9 is a royal lush and a 2 is a 2 pair. </p>\n\n<p>I have three classes so far. One to represent the Card, One to represent the Deck, and one to represent the Hand evaluation. I do not have a main program yet to call these, and wanted to know how that would be done. For example, I want to have a main program that once ran, disperses out 5 hands of 5 random cards, evaluates them, and returns the value. I have the classes necessary to everything, just not sure how to make a class to make it run.</p>\n\n<pre><code>public class Card{\nprivate short rank, suit;\n\nprivate static String[] suits = { \"hearts\", \"spades\", \"diamonds\", \"clubs\" };\nprivate static String[] ranks  = { \"Ace\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \n                                   \"8\", \"9\", \"10\", \"Jack\", \"Queen\", \"King\" };\n\npublic static String rankAsString( int __rank ) {\n    return ranks[__rank];\n}\n\nCard(short suit, short rank)\n{\n    this.rank=rank;\n    this.suit=suit;\n}\n\npublic @Override String toString()\n{\n      return ranks[rank] + \" of \" + suits[suit];\n}\n\npublic short getRank() {\n     return rank;\n}\n\npublic short getSuit() {\n    return suit;\n}\n}\n\nimport java.util.Random;import java.util.ArrayList;\n\npublic class Deck {\nprivate ArrayList&lt;Card&gt; cards;\n\n Deck()\n{\n    cards = new ArrayList&lt;Card&gt;();\n    int index_1, index_2;\n    Random generator = new Random();\n    Card temp;\n\n    for (short a=0; a&lt;=3; a++)\n    {\n        for (short b=0; b&lt;=12; b++)\n         {\n           cards.add( new Card(a,b) );\n         }\n    }\n\n    int size = cards.size() -1;\n\n    for (short i=0; i&lt;100; i++)\n    {\n        index_1 = generator.nextInt( size );\n        index_2 = generator.nextInt( size );\n\n        temp = (Card) cards.get( index_2 );\n        cards.set( index_2 , cards.get( index_1 ) );\n        cards.set( index_1, temp );\n    }\n}\n\npublic Card drawFromDeck()\n{       \n    return cards.remove( cards.size()-1 );\n}\n\npublic int getTotalCards()\n{\n    return cards.size();\n    //we could use this method when making \n    //a complete poker game to see if we needed a new deck\n}\n}\n\npublic class Hand {\nprivate Card[] cards;\nprivate int[] value;\n\nHand(Deck d)\n{\n    value = new int[6];\n    cards = new Card[5];\n    for (int x=0; x&lt;5; x++)\n    {\n        cards[x] = d.drawFromDeck();\n    }\n\n    int[] ranks = new int[14];\n    //miscellaneous cards that are not otherwise significant\n    int[] orderedRanks = new int[5];\n    boolean flush=true, straight=false;\n    int sameCards=1,sameCards2=1;\n    int largeGroupRank=0,smallGroupRank=0;\n    int index=0;\n    int topStraightValue=0;\n\n    for (int x=0; x&lt;=13; x++)\n    {\n        ranks[x]=0;\n    }\n    for (int x=0; x&lt;=4; x++)\n    {\n        ranks[ cards[x].getRank() ]++;\n    }\n    for (int x=0; x&lt;4; x++) {\n        if ( cards[x].getSuit() != cards[x+1].getSuit() )\n            flush=false;\n    }\n\n    for (int x=13; x&gt;=1; x--)\n    {\n             if (ranks[x] &gt; sameCards)\n             {\n                 if (sameCards != 1)\n                 //if sameCards was not the default value\n                 {\n                     sameCards2 = sameCards;\n                     smallGroupRank = largeGroupRank;\n                 }\n\n                 sameCards = ranks[x];\n                 largeGroupRank = x;\n\n             } else if (ranks[x] &gt; sameCards2)\n             {\n                 sameCards2 = ranks[x];\n                 smallGroupRank = x;\n             }\n    }\n\n    if (ranks[1]==1) //if ace, run this before because ace is highest card\n    {\n        orderedRanks[index]=14;\n        index++;\n    }\n\n    for (int x=13; x&gt;=2; x--)\n    {\n        if (ranks[x]==1)\n        {\n            orderedRanks[index]=x; //if ace\n            index++;\n        }\n    }\n\n    for (int x=1; x&lt;=9; x++)\n    //can't have straight with lowest value of more than 10\n    {\n        if (ranks[x]==1 &amp;&amp; ranks[x+1]==1 &amp;&amp; ranks[x+2]==1 &amp;&amp; \n            ranks[x+3]==1 &amp;&amp; ranks[x+4]==1)\n        {\n            straight=true;\n            topStraightValue=x+4; //4 above bottom value\n            break;\n        }\n    }\n\n    if (ranks[10]==1 &amp;&amp; ranks[11]==1 &amp;&amp; ranks[12]==1 &amp;&amp; \n        ranks[13]==1 &amp;&amp; ranks[1]==1) //ace high\n    {\n        straight=true;\n        topStraightValue=14; //higher than king\n    }\n\n    for (int x=0; x&lt;=5; x++)\n    {\n        value[x]=0;\n    }\n\n\n    //start hand evaluation\n    if ( sameCards==1 ) {\n        value[0]=1;\n        value[1]=orderedRanks[0];\n        value[2]=orderedRanks[1];\n        value[3]=orderedRanks[2];\n        value[4]=orderedRanks[3];\n        value[5]=orderedRanks[4];\n    }\n\n    if (sameCards==2 &amp;&amp; sameCards2==1)\n    {\n        value[0]=2;\n        value[1]=largeGroupRank; //rank of pair\n        value[2]=orderedRanks[0];\n        value[3]=orderedRanks[1];\n        value[4]=orderedRanks[2];\n    }\n\n    if (sameCards==2 &amp;&amp; sameCards2==2) //two pair\n    {\n        value[0]=3;\n        //rank of greater pair\n        value[1]= largeGroupRank&gt;smallGroupRank ? largeGroupRank : smallGroupRank;\n        value[2]= largeGroupRank&lt;smallGroupRank ? largeGroupRank : smallGroupRank;\n        value[3]=orderedRanks[0];  //extra card\n    }\n\n    if (sameCards==3 &amp;&amp; sameCards2!=2)\n    {\n        value[0]=4;\n        value[1]= largeGroupRank;\n        value[2]=orderedRanks[0];\n        value[3]=orderedRanks[1];\n    }\n\n    if (straight &amp;&amp; !flush)\n    {\n        value[0]=5;\n        value[1]=4;\n    }\n\n    if (flush &amp;&amp; !straight)\n    {\n        value[0]=6;\n        value[1]=orderedRanks[0]; //tie determined by ranks of cards\n        value[2]=orderedRanks[1];\n        value[3]=orderedRanks[2];\n        value[4]=orderedRanks[3];\n        value[5]=orderedRanks[4];\n    }\n\n    if (sameCards==3 &amp;&amp; sameCards2==2)\n    {\n        value[0]=7;\n        value[1]=largeGroupRank;\n        value[2]=smallGroupRank;\n    }\n\n    if (sameCards==4)\n    {\n        value[0]=8;\n        value[1]=largeGroupRank;\n        value[2]=orderedRanks[0];\n    }\n\n    if (straight &amp;&amp; flush)\n    {\n        value[0]=9;\n        value[1]=0;\n    }\n\n}\n\nvoid display()\n{\n    String s;\n    switch( value[0] )\n    {\n\n        case 1:\n            s=\"high card\";\n            break;\n        case 2:\n            s=\"pair of \" + Card.rankAsString(value[1]) + \"\\'s\";\n            break;\n        case 3:\n            s=\"two pair \" + Card.rankAsString(value[1]) + \" \" + \n                            Card.rankAsString(value[2]);\n            break;\n        case 4:\n            s=\"three of a kind \" + Card.rankAsString(value[1]) + \"\\'s\";\n            break;\n        case 5:\n            s=Card.rankAsString(value[1]) + \" high straight\";\n            break;\n        case 6:\n            s=\"flush\";\n            break;\n        case 7:\n            s=\"full house \" + Card.rankAsString(value[1]) + \" over \" + \n                              Card.rankAsString(value[2]);\n            break;\n        case 8:\n            s=\"four of a kind \" + Card.rankAsString(value[1]);\n            break;\n        case 9:\n            s=\"straight flush \" + Card.rankAsString(value[1]) + \" high\";\n            break;\n        default:\n            s=\"error in Hand.display: value[0] contains invalid value\";\n    }\n    s = \"                \" + s;\n    System.out.println(s);\n}\n\nvoid displayAll()\n{\n    for (int x=0; x&lt;5; x++)\n        System.out.println(cards[x]);\n}\n\nint compareTo(Hand that)\n{\n    for (int x=0; x&lt;6; x++)\n    {\n        if (this.value[x]&gt;that.value[x])\n            return 1;\n        else if (this.value[x]&lt;that.value[x])\n            return -1;\n    }\n    return 0; //if hands are equal\n}\n} \n</code></pre>\n"},{"tags":["java","android","gradle","android-gradle-plugin","build.gradle"],"comments":[{"owner":{"account_id":4930762,"reputation":1103,"user_id":3970630,"accept_rate":75,"display_name":"Ric17101"},"score":0,"creation_date":1616380866,"post_id":17197636,"comment_id":117975641,"body_markdown":"https://stackoverflow.com/a/65624195/3970630","body":"<a href=\"https://stackoverflow.com/a/65624195/3970630\">stackoverflow.com/a/65624195/3970630</a>"}],"answers":[{"comments":[{"owner":{"account_id":1124824,"reputation":1462,"user_id":1112354,"accept_rate":86,"display_name":"elimirks"},"score":1,"creation_date":1394829133,"post_id":17201265,"comment_id":34083097,"body_markdown":"Awesome, is it possible to access these fields from the configs? Such as strings.xml?","body":"Awesome, is it possible to access these fields from the configs? Such as strings.xml?"},{"owner":{"account_id":125521,"reputation":27733,"user_id":321354,"accept_rate":82,"display_name":"rciovati"},"score":6,"creation_date":1394875008,"post_id":17201265,"comment_id":34094571,"body_markdown":"Nope, but you can generate resources as well. I&#39;ve updated my answer including that.","body":"Nope, but you can generate resources as well. I&#39;ve updated my answer including that."},{"owner":{"account_id":1124824,"reputation":1462,"user_id":1112354,"accept_rate":86,"display_name":"elimirks"},"score":2,"creation_date":1395060761,"post_id":17201265,"comment_id":34152571,"body_markdown":"Awesome, thanks. Something that I have discovered is well is that you could specify alternate directories for the debug and release builds.\n\nIn ```&lt;project&gt;/src/```, if you create the file ```debug/res/values/strings.xml``` and another file ```release/res/values/strings.xml```, you could set resources for the debug and release builds in a slightly cleaner manner as well.","body":"Awesome, thanks. Something that I have discovered is well is that you could specify alternate directories for the debug and release builds.  In <code>&lt;project&gt;&#47;src&#47;</code>, if you create the file <code>debug&#47;res&#47;values&#47;strings.xml</code> and another file <code>release&#47;res&#47;values&#47;strings.xml</code>, you could set resources for the debug and release builds in a slightly cleaner manner as well."},{"owner":{"account_id":218150,"reputation":5266,"user_id":474330,"accept_rate":60,"display_name":"Zennichimaro"},"score":8,"creation_date":1401089769,"post_id":17201265,"comment_id":36732437,"body_markdown":"@rciovati is it possible to achieve the same without the `android` plugin? i.e. just using `apply plugin java`? thanks!","body":"@rciovati is it possible to achieve the same without the <code>android</code> plugin? i.e. just using <code>apply plugin java</code>? thanks!"},{"owner":{"account_id":43736,"reputation":9289,"user_id":127971,"display_name":"michael"},"score":0,"creation_date":1410122782,"post_id":17201265,"comment_id":40197857,"body_markdown":"@Zennichimaro ..I&#39;ve added an answer that does it using a system property. It does however rely on the &#39;test&#39; task to pass the property to the application at runtime, but I&#39;m assuming that&#39;s ok? Your deployed application would then rely on a system property (vs e.g., a config file).","body":"@Zennichimaro ..I&#39;ve added an answer that does it using a system property. It does however rely on the &#39;test&#39; task to pass the property to the application at runtime, but I&#39;m assuming that&#39;s ok? Your deployed application would then rely on a system property (vs e.g., a config file)."},{"owner":{"account_id":142732,"reputation":10265,"user_id":1747491,"accept_rate":62,"display_name":"theblang"},"score":0,"creation_date":1410805953,"post_id":17201265,"comment_id":40454498,"body_markdown":"Is it possible to set the `buildConfigField` to a value declared in `local.properties`?","body":"Is it possible to set the <code>buildConfigField</code> to a value declared in <code>local.properties</code>?"},{"owner":{"account_id":125521,"reputation":27733,"user_id":321354,"accept_rate":82,"display_name":"rciovati"},"score":1,"creation_date":1410807909,"post_id":17201265,"comment_id":40455503,"body_markdown":"Yes, it is. Combine the answer I gave here: http://stackoverflow.com/a/22012018/321354","body":"Yes, it is. Combine the answer I gave here: <a href=\"http://stackoverflow.com/a/22012018/321354\">stackoverflow.com/a/22012018/321354</a>"},{"owner":{"account_id":923404,"reputation":7408,"user_id":954643,"accept_rate":80,"display_name":"qix"},"score":0,"creation_date":1412642106,"post_id":17201265,"comment_id":41134793,"body_markdown":"Only annoying thing about generating the resource app_name at build time is that Android Studio will complain in the sidebar about being unable to resolve the resource when editing the manifest, and in graphical previews of layouts that use that as a string.","body":"Only annoying thing about generating the resource app_name at build time is that Android Studio will complain in the sidebar about being unable to resolve the resource when editing the manifest, and in graphical previews of layouts that use that as a string."},{"owner":{"account_id":125521,"reputation":27733,"user_id":321354,"accept_rate":82,"display_name":"rciovati"},"score":0,"creation_date":1412666270,"post_id":17201265,"comment_id":41141541,"body_markdown":"There is an open issue for this: https://code.google.com/p/android/issues/detail?id=73595","body":"There is an open issue for this: <a href=\"https://code.google.com/p/android/issues/detail?id=73595\" rel=\"nofollow noreferrer\">code.google.com/p/android/issues/detail?id=73595</a>"},{"owner":{"account_id":925558,"reputation":18647,"user_id":956415,"accept_rate":75,"display_name":"Jakob Eriksson"},"score":3,"creation_date":1422870562,"post_id":17201265,"comment_id":44904524,"body_markdown":"How can I create constants for different build flavors and build types?","body":"How can I create constants for different build flavors and build types?"},{"owner":{"account_id":352210,"reputation":2900,"user_id":689152,"accept_rate":57,"display_name":"dsdsdsdsd"},"score":0,"creation_date":1461790323,"post_id":17201265,"comment_id":61365454,"body_markdown":"the escaped quotes for the String version are *NOT* a type-o","body":"the escaped quotes for the String version are <i>NOT</i> a type-o"},{"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"score":0,"creation_date":1466499618,"post_id":17201265,"comment_id":63328803,"body_markdown":"What if you wish to have debug flavour for libraries? As I&#39;ve noticed, all libraries are marked as &quot;release&quot;, as shown here: http://stackoverflow.com/q/20176284/878126","body":"What if you wish to have debug flavour for libraries? As I&#39;ve noticed, all libraries are marked as &quot;release&quot;, as shown here: <a href=\"http://stackoverflow.com/q/20176284/878126\">stackoverflow.com/q/20176284/878126</a>"},{"owner":{"account_id":125521,"reputation":27733,"user_id":321354,"accept_rate":82,"display_name":"rciovati"},"score":0,"creation_date":1466503219,"post_id":17201265,"comment_id":63331392,"body_markdown":"You can use the approach described in the same question: http://stackoverflow.com/a/29163361/321354. Personally I wouldn&#39;t recommend it since it makes the build process much slower. IHMO (and it&#39;s what I did in my project) for a library it better to handle those configurations as runtime and not build configurations.","body":"You can use the approach described in the same question: <a href=\"http://stackoverflow.com/a/29163361/321354\">stackoverflow.com/a/29163361/321354</a>. Personally I wouldn&#39;t recommend it since it makes the build process much slower. IHMO (and it&#39;s what I did in my project) for a library it better to handle those configurations as runtime and not build configurations."},{"owner":{"account_id":3482475,"reputation":27250,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"score":0,"creation_date":1469093531,"post_id":17201265,"comment_id":64400251,"body_markdown":"Note that string values must be double quoted like in example above: buildConfigField &quot;String&quot;, &quot;FOO_STRING&quot;, &quot;\\&quot;bar\\&quot;&quot; (or &#39;&quot;bar&quot;&#39;).","body":"Note that string values must be double quoted like in example above: buildConfigField &quot;String&quot;, &quot;FOO_STRING&quot;, &quot;\\&quot;bar\\&quot;&quot; (or &#39;&quot;bar&quot;&#39;)."},{"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"score":3,"creation_date":1474966409,"post_id":17201265,"comment_id":66737951,"body_markdown":"Is it possible to set one of the fields, as the current year, and also reach it no matter which build type is chosen (release, debug, ...) ?","body":"Is it possible to set one of the fields, as the current year, and also reach it no matter which build type is chosen (release, debug, ...) ?"},{"owner":{"account_id":125521,"reputation":27733,"user_id":321354,"accept_rate":82,"display_name":"rciovati"},"score":2,"creation_date":1474988730,"post_id":17201265,"comment_id":66753718,"body_markdown":"Place it in the defaultConfig block. For the current year, just checkout the Groovy api for handling dates.","body":"Place it in the defaultConfig block. For the current year, just checkout the Groovy api for handling dates."},{"owner":{"account_id":4579719,"reputation":995,"user_id":3717124,"accept_rate":19,"display_name":"Anbarasu Chinna"},"score":1,"creation_date":1475736604,"post_id":17201265,"comment_id":67064741,"body_markdown":"My suggestion is to use &quot;Plugin version greater than 0.7.x&quot; approach. Because it will generate java constant(no need of Context to access constant),But in the case of second approach we need Context everywhere to access resource.","body":"My suggestion is to use &quot;Plugin version greater than 0.7.x&quot; approach. Because it will generate java constant(no need of Context to access constant),But in the case of second approach we need Context everywhere to access resource."},{"owner":{"account_id":1033857,"reputation":17546,"user_id":1041641,"accept_rate":67,"display_name":"TmTron"},"score":0,"creation_date":1479138198,"post_id":17201265,"comment_id":68420554,"body_markdown":"note: when you use `resValue` the value can accidentally be overridden by the strings resource file (e.g. for another language) - to get a constant that you can access from java and use in the manifest see [this answer](http://stackoverflow.com/a/40592469/6287240)","body":"note: when you use <code>resValue</code> the value can accidentally be overridden by the strings resource file (e.g. for another language) - to get a constant that you can access from java and use in the manifest see <a href=\"http://stackoverflow.com/a/40592469/6287240\">this answer</a>"},{"owner":{"account_id":3482475,"reputation":27250,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"score":0,"creation_date":1482343323,"post_id":17201265,"comment_id":69738976,"body_markdown":"@RiccardoCiovati, that&#39;s not easy. Access to defaultConfig from Java is possible to certain variables (like `versionCode`) only.","body":"@RiccardoCiovati, that&#39;s not easy. Access to defaultConfig from Java is possible to certain variables (like <code>versionCode</code>) only."},{"owner":{"account_id":6374619,"reputation":3321,"user_id":4946013,"display_name":"Kai Wang"},"score":0,"creation_date":1484688645,"post_id":17201265,"comment_id":70610270,"body_markdown":"Pass:         Log.v(&quot;kaa&quot;, &quot;&quot;+BuildConfig.FOO+BuildConfig.FOO_STRING+BuildConfig.LOG+getString(R.string.app_name2));","body":"Pass:         Log.v(&quot;kaa&quot;, &quot;&quot;+BuildConfig.FOO+BuildConfig.FOO_STRING+BuildConfig.LOG+ge&zwnj;&#8203;tString(R.string.app&zwnj;&#8203;_name2));"},{"owner":{"account_id":5672689,"reputation":381,"user_id":4486884,"accept_rate":80,"display_name":"Ace Green"},"score":0,"creation_date":1515774717,"post_id":17201265,"comment_id":83442820,"body_markdown":"anyone know why I&#39;m unable to do BuildConfig.OM_ENVIRONMENT when I declared buildConfigField &quot;String&quot;, &quot;OM_ENVIRONMENT&quot;, &quot;\\&quot;DEV\\&quot;&quot;","body":"anyone know why I&#39;m unable to do BuildConfig.OM_ENVIRONMENT when I declared buildConfigField &quot;String&quot;, &quot;OM_ENVIRONMENT&quot;, &quot;\\&quot;DEV\\&quot;&quot;"},{"owner":{"account_id":10541959,"reputation":8904,"user_id":7767664,"accept_rate":63,"display_name":"user924"},"score":0,"creation_date":1614763223,"post_id":17201265,"comment_id":117481397,"body_markdown":"I want a variable to be declared only once, without type of build...","body":"I want a variable to be declared only once, without type of build..."},{"owner":{"account_id":2516619,"reputation":489,"user_id":2187913,"display_name":"Mistriel"},"score":0,"creation_date":1622317309,"post_id":17201265,"comment_id":119760410,"body_markdown":"Be aware that parameters wont be visible until you &quot;make project&quot;.  &quot;gradle sync&quot; is not enough.","body":"Be aware that parameters wont be visible until you &quot;make project&quot;.  &quot;gradle sync&quot; is not enough."}],"tags":[],"owner":{"account_id":125521,"reputation":27733,"user_id":321354,"accept_rate":82,"display_name":"rciovati"},"comment_count":23,"down_vote_count":0,"up_vote_count":870,"is_accepted":true,"score":870,"last_activity_date":1595357273,"creation_date":1371675703,"answer_id":17201265,"question_id":17197636,"body_markdown":"\r\nHere are two ways to pass value from Gradle to use in Java;\r\n\r\n## Generate  Java Constants\r\n\r\n```groovy\r\nandroid {\r\n    buildTypes {\r\n        debug {\r\n            buildConfigField &quot;int&quot;, &quot;FOO&quot;, &quot;42&quot;\r\n            buildConfigField &quot;String&quot;, &quot;FOO_STRING&quot;, &quot;\\&quot;foo\\&quot;&quot;\r\n            buildConfigField &quot;boolean&quot;, &quot;LOG&quot;, &quot;true&quot;\r\n        }\r\n\r\n        release {\r\n            buildConfigField &quot;int&quot;, &quot;FOO&quot;, &quot;52&quot;\r\n            buildConfigField &quot;String&quot;, &quot;FOO_STRING&quot;, &quot;\\&quot;bar\\&quot;&quot;\r\n            buildConfigField &quot;boolean&quot;, &quot;LOG&quot;, &quot;false&quot;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nYou can access them with `BuildConfig.FOO`\r\n\r\n## Generate Android resources\r\n\r\n```groovy\r\nandroid {\r\n    buildTypes {\r\n        debug{\r\n            resValue &quot;string&quot;, &quot;app_name&quot;, &quot;My App Name Debug&quot;\r\n        }\r\n        release {\r\n            resValue &quot;string&quot;, &quot;app_name&quot;, &quot;My App Name&quot;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nYou can access them in the usual way with `@string/app_name` or `R.string.app_name`\r\n","title":"Is it possible to declare a variable in Gradle usable in Java?","body":"<p>Here are two ways to pass value from Gradle to use in Java;</p>\n<h2>Generate  Java Constants</h2>\n<pre><code>android {\n    buildTypes {\n        debug {\n            buildConfigField &quot;int&quot;, &quot;FOO&quot;, &quot;42&quot;\n            buildConfigField &quot;String&quot;, &quot;FOO_STRING&quot;, &quot;\\&quot;foo\\&quot;&quot;\n            buildConfigField &quot;boolean&quot;, &quot;LOG&quot;, &quot;true&quot;\n        }\n\n        release {\n            buildConfigField &quot;int&quot;, &quot;FOO&quot;, &quot;52&quot;\n            buildConfigField &quot;String&quot;, &quot;FOO_STRING&quot;, &quot;\\&quot;bar\\&quot;&quot;\n            buildConfigField &quot;boolean&quot;, &quot;LOG&quot;, &quot;false&quot;\n        }\n    }\n}\n</code></pre>\n<p>You can access them with <code>BuildConfig.FOO</code></p>\n<h2>Generate Android resources</h2>\n<pre><code>android {\n    buildTypes {\n        debug{\n            resValue &quot;string&quot;, &quot;app_name&quot;, &quot;My App Name Debug&quot;\n        }\n        release {\n            resValue &quot;string&quot;, &quot;app_name&quot;, &quot;My App Name&quot;\n        }\n    }\n}\n</code></pre>\n<p>You can access them in the usual way with <code>@string/app_name</code> or <code>R.string.app_name</code></p>\n"},{"comments":[{"owner":{"account_id":43736,"reputation":9289,"user_id":127971,"display_name":"michael"},"score":1,"creation_date":1410122876,"post_id":25714617,"comment_id":40197884,"body_markdown":"Note that this is a direct response to a comment in the accepted answer, so it deviates a little from the original question.","body":"Note that this is a direct response to a comment in the accepted answer, so it deviates a little from the original question."},{"owner":{"account_id":1458162,"reputation":848,"user_id":1373232,"accept_rate":53,"display_name":"Nom1fan"},"score":2,"creation_date":1469390889,"post_id":25714617,"comment_id":64503552,"body_markdown":"Can I somehow get `version = &#39;0.0.1-SNAPSHOT&#39;` via Java code?","body":"Can I somehow get <code>version = &#39;0.0.1-SNAPSHOT&#39;</code> via Java code?"},{"owner":{"account_id":5643523,"reputation":6183,"user_id":4466472,"display_name":"Stoycho Andreev"},"score":0,"creation_date":1538220269,"post_id":25714617,"comment_id":92072753,"body_markdown":"SystemProperty is only available in gradle test task :( . Anybody knows any other way to have gradle variable value in the java code of the library?","body":"SystemProperty is only available in gradle test task :( . Anybody knows any other way to have gradle variable value in the java code of the library?"},{"owner":{"account_id":43736,"reputation":9289,"user_id":127971,"display_name":"michael"},"score":0,"creation_date":1538592245,"post_id":25714617,"comment_id":92200714,"body_markdown":"`systemProperty` really only makes sense for testing, so I see why they did it this way (it&#39;s not an oversight), but at the same time, I&#39;ve also tried to use gradle for things it wasn&#39;t intended for (like an application DSL) so I can identify. As an alternative, I&#39;d recommend just loading properties from a property file (or config service, etc), because if it&#39;s not in &quot;test&quot; mode, then it&#39;s &quot;production&quot; mode &amp; requires application logic. (That&#39;s the theory, anyway.)","body":"<code>systemProperty</code> really only makes sense for testing, so I see why they did it this way (it&#39;s not an oversight), but at the same time, I&#39;ve also tried to use gradle for things it wasn&#39;t intended for (like an application DSL) so I can identify. As an alternative, I&#39;d recommend just loading properties from a property file (or config service, etc), because if it&#39;s not in &quot;test&quot; mode, then it&#39;s &quot;production&quot; mode &amp; requires application logic. (That&#39;s the theory, anyway.)"}],"tags":[],"owner":{"account_id":43736,"reputation":9289,"user_id":127971,"display_name":"michael"},"comment_count":4,"down_vote_count":2,"up_vote_count":35,"is_accepted":false,"score":33,"last_activity_date":1410124155,"creation_date":1410122674,"answer_id":25714617,"question_id":17197636,"body_markdown":"Example using system properties, set in build.gradle, read from Java application (following up from question in comments):\r\n\r\nBasically, using the `test` task in `build.gradle`, with test task method `systemProperty` setting a system property that&#39;s passed at runtime:\r\n\r\n    apply plugin: &#39;java&#39;\r\n    group = &#39;example&#39;\r\n    version = &#39;0.0.1-SNAPSHOT&#39;\r\n    \r\n    repositories {\r\n        mavenCentral()\r\n        // mavenLocal()\r\n        // maven { url &#39;http://localhost/nexus/content/groups/public&#39;; }\r\n    }\r\n    \r\n    dependencies {\r\n        testCompile &#39;junit:junit:4.8.2&#39;\r\n        compile &#39;ch.qos.logback:logback-classic:1.1.2&#39;\r\n    }\r\n    \r\n    test {\r\n      logger.info &#39;==test==&#39;\r\n      systemProperty &#39;MY-VAR1&#39;, &#39;VALUE-TEST&#39;\r\n    }\r\n\r\n\r\nAnd here&#39;s the rest of the sample code (which you could probably infer, but is included here anyway):  it gets a system property `MY-VAR1`, expected at run-time to be set to `VALUE-TEST`:\r\n\r\n    package example;\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    \r\n    public class HelloWorld {\r\n      static final Logger log=LoggerFactory.getLogger(HelloWorld.class);\r\n      public static void main(String args[]) {\r\n        log.info(&quot;entering main...&quot;);\r\n        final String val = System.getProperty(&quot;MY-VAR1&quot;, &quot;UNSET (MAIN)&quot;);\r\n        System.out.println(&quot;(main.out) hello, world: &quot; + val);\r\n        log.info(&quot;main.log) MY-VAR1=&quot; + val);\r\n      }\r\n    }\r\n\r\n\r\nTestcase: if `MY-VAR` is unset, the test should fail:\r\n\r\n    package example;\r\n    ...\r\n    public class HelloWorldTest {\r\n        static final Logger log=LoggerFactory.getLogger(HelloWorldTest.class);\r\n        @Test public void testEnv() {\r\n            HelloWorld.main(new String[]{});\r\n            final String val = System.getProperty(&quot;MY-VAR1&quot;, &quot;UNSET (TEST)&quot;);\r\n            System.out.println(&quot;(test.out) var1=&quot; + val);\r\n            log.info(&quot;(test.log) MY-VAR1=&quot; + val);\r\n            assertEquals(&quot;env MY-VAR1 set.&quot;, &quot;VALUE-TEST&quot;, val);\r\n        }\r\n    }\r\n\r\n\r\nRun (note: test is passing):\r\n\r\n    $ gradle cleanTest test\r\n    :cleanTest\r\n    :compileJava UP-TO-DATE\r\n    :processResources UP-TO-DATE\r\n    :classes UP-TO-DATE\r\n    :compileTestJava UP-TO-DATE\r\n    :processTestResources UP-TO-DATE\r\n    :testClasses UP-TO-DATE\r\n    :test\r\n    \r\n    BUILD SUCCESSFUL\r\n\r\nI&#39;ve found that the tricky part is actually getting the output from gradle... So, logging is configured here (slf4j+logback), and the log file shows the results (alternatively, run `gradle --info cleanTest test`; there are also properties that get stdout to the console, but, you know, why):\r\n\r\n    $ cat app.log\r\n    INFO Test worker example.HelloWorld - entering main...\r\n    INFO Test worker example.HelloWorld - main.log) MY-VAR1=VALUE-TEST\r\n    INFO Test worker example.HelloWorldTest - (test.log) MY-VAR1=VALUE-TEST\r\n\r\n\r\nIf you comment out &quot;`systemProperty...`&quot; (which, btw, only works in a `test` task), then:\r\n\r\n    example.HelloWorldTest &gt; testEnv FAILED\r\n        org.junit.ComparisonFailure at HelloWorldTest.java:14\r\n\r\nFor completeness, here is the logback config (`src/test/resources/logback-test.xml`):\r\n\r\n    &lt;configuration&gt;\r\n        &lt;appender name=&quot;FILE&quot; class=&quot;ch.qos.logback.core.FileAppender&quot;&gt;\r\n            &lt;file&gt;app.log&lt;/file&gt;\r\n            &lt;layout class=&quot;ch.qos.logback.classic.PatternLayout&quot;&gt;\r\n                &lt;pattern&gt;%d %p %t %c - %m%n&lt;/pattern&gt;\r\n            &lt;/layout&gt;\r\n     &lt;/appender&gt;\r\n     &lt;root level=&quot;info&quot;&gt;\r\n         &lt;appender-ref ref=&quot;FILE&quot;/&gt;\r\n    &lt;/root&gt;\r\n    &lt;/configuration&gt; \r\n\r\nFiles:\r\n\r\n - `build.gradle`\r\n - `src/main/java/example/HelloWorld.java`\r\n - `src/test/java/example/HelloWorldTest.java`\r\n - `src/test/resources/logback-test.xml`\r\n","title":"Is it possible to declare a variable in Gradle usable in Java?","body":"<p>Example using system properties, set in build.gradle, read from Java application (following up from question in comments):</p>\n\n<p>Basically, using the <code>test</code> task in <code>build.gradle</code>, with test task method <code>systemProperty</code> setting a system property that's passed at runtime:</p>\n\n<pre><code>apply plugin: 'java'\ngroup = 'example'\nversion = '0.0.1-SNAPSHOT'\n\nrepositories {\n    mavenCentral()\n    // mavenLocal()\n    // maven { url 'http://localhost/nexus/content/groups/public'; }\n}\n\ndependencies {\n    testCompile 'junit:junit:4.8.2'\n    compile 'ch.qos.logback:logback-classic:1.1.2'\n}\n\ntest {\n  logger.info '==test=='\n  systemProperty 'MY-VAR1', 'VALUE-TEST'\n}\n</code></pre>\n\n<p>And here's the rest of the sample code (which you could probably infer, but is included here anyway):  it gets a system property <code>MY-VAR1</code>, expected at run-time to be set to <code>VALUE-TEST</code>:</p>\n\n<pre><code>package example;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\npublic class HelloWorld {\n  static final Logger log=LoggerFactory.getLogger(HelloWorld.class);\n  public static void main(String args[]) {\n    log.info(\"entering main...\");\n    final String val = System.getProperty(\"MY-VAR1\", \"UNSET (MAIN)\");\n    System.out.println(\"(main.out) hello, world: \" + val);\n    log.info(\"main.log) MY-VAR1=\" + val);\n  }\n}\n</code></pre>\n\n<p>Testcase: if <code>MY-VAR</code> is unset, the test should fail:</p>\n\n<pre><code>package example;\n...\npublic class HelloWorldTest {\n    static final Logger log=LoggerFactory.getLogger(HelloWorldTest.class);\n    @Test public void testEnv() {\n        HelloWorld.main(new String[]{});\n        final String val = System.getProperty(\"MY-VAR1\", \"UNSET (TEST)\");\n        System.out.println(\"(test.out) var1=\" + val);\n        log.info(\"(test.log) MY-VAR1=\" + val);\n        assertEquals(\"env MY-VAR1 set.\", \"VALUE-TEST\", val);\n    }\n}\n</code></pre>\n\n<p>Run (note: test is passing):</p>\n\n<pre><code>$ gradle cleanTest test\n:cleanTest\n:compileJava UP-TO-DATE\n:processResources UP-TO-DATE\n:classes UP-TO-DATE\n:compileTestJava UP-TO-DATE\n:processTestResources UP-TO-DATE\n:testClasses UP-TO-DATE\n:test\n\nBUILD SUCCESSFUL\n</code></pre>\n\n<p>I've found that the tricky part is actually getting the output from gradle... So, logging is configured here (slf4j+logback), and the log file shows the results (alternatively, run <code>gradle --info cleanTest test</code>; there are also properties that get stdout to the console, but, you know, why):</p>\n\n<pre><code>$ cat app.log\nINFO Test worker example.HelloWorld - entering main...\nINFO Test worker example.HelloWorld - main.log) MY-VAR1=VALUE-TEST\nINFO Test worker example.HelloWorldTest - (test.log) MY-VAR1=VALUE-TEST\n</code></pre>\n\n<p>If you comment out \"<code>systemProperty...</code>\" (which, btw, only works in a <code>test</code> task), then:</p>\n\n<pre><code>example.HelloWorldTest &gt; testEnv FAILED\n    org.junit.ComparisonFailure at HelloWorldTest.java:14\n</code></pre>\n\n<p>For completeness, here is the logback config (<code>src/test/resources/logback-test.xml</code>):</p>\n\n<pre><code>&lt;configuration&gt;\n    &lt;appender name=\"FILE\" class=\"ch.qos.logback.core.FileAppender\"&gt;\n        &lt;file&gt;app.log&lt;/file&gt;\n        &lt;layout class=\"ch.qos.logback.classic.PatternLayout\"&gt;\n            &lt;pattern&gt;%d %p %t %c - %m%n&lt;/pattern&gt;\n        &lt;/layout&gt;\n &lt;/appender&gt;\n &lt;root level=\"info\"&gt;\n     &lt;appender-ref ref=\"FILE\"/&gt;\n&lt;/root&gt;\n&lt;/configuration&gt; \n</code></pre>\n\n<p>Files:</p>\n\n<ul>\n<li><code>build.gradle</code></li>\n<li><code>src/main/java/example/HelloWorld.java</code></li>\n<li><code>src/test/java/example/HelloWorldTest.java</code></li>\n<li><code>src/test/resources/logback-test.xml</code></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":2080321,"reputation":515,"user_id":1852441,"display_name":"Jaswanth Manigundan"},"score":1,"creation_date":1493940619,"post_id":35650390,"comment_id":74629198,"body_markdown":"If I may add, this variable can be passed on runtime as well. Mostly useful when running tests with different configuration. Use `./gradlew -PAppKey=&quot;1234&quot; testdebug`","body":"If I may add, this variable can be passed on runtime as well. Mostly useful when running tests with different configuration. Use <code>.&#47;gradlew -PAppKey=&quot;1234&quot; testdebug</code>"},{"owner":{"account_id":125521,"reputation":27733,"user_id":321354,"accept_rate":82,"display_name":"rciovati"},"score":1,"creation_date":1540039761,"post_id":35650390,"comment_id":92722262,"body_markdown":"To declare the same property for each build type you can use the `defaultConfig` block as well: https://stackoverflow.com/a/51521146/321354","body":"To declare the same property for each build type you can use the <code>defaultConfig</code> block as well: <a href=\"https://stackoverflow.com/a/51521146/321354\">stackoverflow.com/a/51521146/321354</a>"},{"owner":{"account_id":3970533,"reputation":5671,"user_id":3275253,"accept_rate":17,"display_name":"voghDev"},"score":0,"creation_date":1590502716,"post_id":35650390,"comment_id":109699612,"body_markdown":"Do you have a working example of the XML part? in a Github repository or Gist. It&#39;s not working for me, I can&#39;t reference `@string/APP_KEY_2`","body":"Do you have a working example of the XML part? in a Github repository or Gist. It&#39;s not working for me, I can&#39;t reference <code>@string&#47;APP_KEY_2</code>"}],"tags":[],"owner":{"account_id":3598021,"reputation":2642,"user_id":3002121,"accept_rate":79,"display_name":"Denis"},"comment_count":3,"down_vote_count":0,"up_vote_count":129,"is_accepted":false,"score":129,"last_activity_date":1616501624,"creation_date":1456485694,"answer_id":35650390,"question_id":17197636,"body_markdown":"### An example of usage an Api App Key in an Android application (Java and XML)\r\n\r\n*gradle.properties*\r\n\r\n    AppKey=&quot;XXXX-XXXX&quot;\r\n\r\n\r\n*build.gradle*\r\n\r\n    buildTypes {\r\n    //...\r\n        buildTypes.each {\r\n            it.buildConfigField &#39;String&#39;, &#39;APP_KEY_1&#39;, AppKey\r\n            it.resValue &#39;string&#39;, &#39;APP_KEY_2&#39;, AppKey\r\n        }\r\n    }\r\n\r\n\r\n*Usage in java code*\r\n\r\n    Log.d(&quot;UserActivity&quot;, &quot;onCreate, APP_KEY: &quot; + getString(R.string.APP_KEY_2));\r\n\r\n    BuildConfig.APP_KEY_1\r\n\r\n*Usage in xml code*\r\n\r\n    &lt;data android:scheme=&quot;@string/APP_KEY_2&quot; /&gt;\r\n\r\n* [Link to an example of Api App Key usage in an Android application](https://gist.github.com/VDenis/46c222b16683447bab33)\r\n* [Using String Constants Generated by Gradle Build Configurations](https://michiganlabs.com/2014/09/23/string-constants-generated-gradle-build-configurations)","title":"Is it possible to declare a variable in Gradle usable in Java?","body":"<h3>An example of usage an Api App Key in an Android application (Java and XML)</h3>\n<p><em>gradle.properties</em></p>\n<pre><code>AppKey=&quot;XXXX-XXXX&quot;\n</code></pre>\n<p><em>build.gradle</em></p>\n<pre><code>buildTypes {\n//...\n    buildTypes.each {\n        it.buildConfigField 'String', 'APP_KEY_1', AppKey\n        it.resValue 'string', 'APP_KEY_2', AppKey\n    }\n}\n</code></pre>\n<p><em>Usage in java code</em></p>\n<pre><code>Log.d(&quot;UserActivity&quot;, &quot;onCreate, APP_KEY: &quot; + getString(R.string.APP_KEY_2));\n\nBuildConfig.APP_KEY_1\n</code></pre>\n<p><em>Usage in xml code</em></p>\n<pre><code>&lt;data android:scheme=&quot;@string/APP_KEY_2&quot; /&gt;\n</code></pre>\n<ul>\n<li><a href=\"https://gist.github.com/VDenis/46c222b16683447bab33\" rel=\"noreferrer\">Link to an example of Api App Key usage in an Android application</a></li>\n<li><a href=\"https://michiganlabs.com/2014/09/23/string-constants-generated-gradle-build-configurations\" rel=\"noreferrer\">Using String Constants Generated by Gradle Build Configurations</a></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":2988991,"reputation":3222,"user_id":2574733,"display_name":"Wayne Piekarski"},"score":1,"creation_date":1510354499,"post_id":42783457,"comment_id":81415514,"body_markdown":"Thank you for this answer! I&#39;ve been trying to work out how to get an environment variable to be visible from within an Android .java file, and this worked great!","body":"Thank you for this answer! I&#39;ve been trying to work out how to get an environment variable to be visible from within an Android .java file, and this worked great!"},{"owner":{"account_id":1796123,"reputation":3966,"user_id":1635488,"accept_rate":40,"display_name":"android_dev"},"score":0,"creation_date":1545808964,"post_id":42783457,"comment_id":94698523,"body_markdown":"If you want to define boolean variable, you should use  buildConfigField &quot;boolean&quot;, &quot;CI_BUILD&quot;, &quot;${isCi}&quot; or buildConfigField &quot;boolean&quot;, &quot;CI_BUILD&quot;, &quot;Boolean.parseBoolean(&quot; + &#39;&quot;&#39; + isCi + &#39;&quot;&#39; + &quot;)&quot; if you want to escape lint checks (https://stackoverflow.com/questions/29889098/why-does-the-buildconfig-class-use-boolean-parseboolean-instead-of-literal-val/29889099#comment94698223_29889099)","body":"If you want to define boolean variable, you should use  buildConfigField &quot;boolean&quot;, &quot;CI_BUILD&quot;, &quot;${isCi}&quot; or buildConfigField &quot;boolean&quot;, &quot;CI_BUILD&quot;, &quot;Boolean.parseBoolean(&quot; + &#39;&quot;&#39; + isCi + &#39;&quot;&#39; + &quot;)&quot; if you want to escape lint checks (<a href=\"https://stackoverflow.com/questions/29889098/why-does-the-buildconfig-class-use-boolean-parseboolean-instead-of-literal-val/29889099#comment94698223_29889099\" title=\"why does the buildconfig class use boolean parseboolean instead of literal val\">stackoverflow.com/questions/29889098/&hellip;</a>)"}],"tags":[],"owner":{"account_id":87202,"reputation":17573,"user_id":241986,"accept_rate":80,"display_name":"Boris Treukhov"},"comment_count":2,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1517163389,"creation_date":1489487284,"answer_id":42783457,"question_id":17197636,"body_markdown":"You can create build config field overridable via system environment variables during build:\r\n\r\nFallback is used while developing, but you can override the variable when you run the build on Jenkins or another tool.\r\n\r\nIn your app *build.gradle*:\r\n\r\n    buildTypes {\r\n            def serverUrl =  &#39;\\&quot;&#39; + (System.getenv(&quot;SERVER_URL&quot;)?: &quot;http://default.fallback.url.com&quot;)+&#39;\\&quot;&#39;\r\n            debug{\r\n                buildConfigField &quot;String&quot;, &quot;SERVER_URL&quot;, serverUrl\r\n            }\r\n            release {\r\n                minifyEnabled true\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n                buildConfigField &quot;String&quot;, &quot;SERVER_URL&quot;, serverUrl\r\n            }\r\n        } \r\n\r\nThe variable will be available as `BuildConfig.SERVER_URL`.","title":"Is it possible to declare a variable in Gradle usable in Java?","body":"<p>You can create build config field overridable via system environment variables during build:</p>\n\n<p>Fallback is used while developing, but you can override the variable when you run the build on Jenkins or another tool.</p>\n\n<p>In your app <em>build.gradle</em>:</p>\n\n<pre><code>buildTypes {\n        def serverUrl =  '\\\"' + (System.getenv(\"SERVER_URL\")?: \"http://default.fallback.url.com\")+'\\\"'\n        debug{\n            buildConfigField \"String\", \"SERVER_URL\", serverUrl\n        }\n        release {\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n            buildConfigField \"String\", \"SERVER_URL\", serverUrl\n        }\n    } \n</code></pre>\n\n<p>The variable will be available as <code>BuildConfig.SERVER_URL</code>.</p>\n"},{"tags":[],"owner":{"account_id":4261480,"reputation":389,"user_id":3485744,"display_name":"s.pike"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1532528071,"creation_date":1532528071,"answer_id":51521146,"question_id":17197636,"body_markdown":"rciovati&#39;s answer is entirely correct I just wanted to add one more tidbit that you can also create variables for every build type within the default config portion of your build.gradle.  This would look like this:\r\n\r\n    android {\r\n        defaultConfig {\r\n            buildConfigField &quot;String&quot;, &quot;APP_NAME&quot;, &quot;\\&quot;APP_NAME\\&quot;&quot;\r\n        }\r\n    }\r\n\r\nThis will allow you to have access to through\r\n\r\n    BuildConfig.App_NAME\r\n\r\nJust wanted to make a note of this scenario as well if you want a common config.","title":"Is it possible to declare a variable in Gradle usable in Java?","body":"<p>rciovati's answer is entirely correct I just wanted to add one more tidbit that you can also create variables for every build type within the default config portion of your build.gradle.  This would look like this:</p>\n\n<pre><code>android {\n    defaultConfig {\n        buildConfigField \"String\", \"APP_NAME\", \"\\\"APP_NAME\\\"\"\n    }\n}\n</code></pre>\n\n<p>This will allow you to have access to through</p>\n\n<pre><code>BuildConfig.App_NAME\n</code></pre>\n\n<p>Just wanted to make a note of this scenario as well if you want a common config.</p>\n"},{"tags":[],"owner":{"account_id":1296276,"reputation":1159,"user_id":1247248,"display_name":"Marc"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1540148119,"creation_date":1540148119,"answer_id":52918764,"question_id":17197636,"body_markdown":"I&#39;m using\r\n\r\n    buildTypes.each {\r\n        it.buildConfigField &#39;String&#39;, &#39;GoogleMapsApiKey&#39;, &quot;\\&quot;$System.env.GoogleMapsApiKey\\&quot;&quot;\r\n    }\r\n\r\nIts based on [Dennis&#39;s answer][1] but grabs its from an environment variable.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/35650390","title":"Is it possible to declare a variable in Gradle usable in Java?","body":"<p>I'm using</p>\n\n<pre><code>buildTypes.each {\n    it.buildConfigField 'String', 'GoogleMapsApiKey', \"\\\"$System.env.GoogleMapsApiKey\\\"\"\n}\n</code></pre>\n\n<p>Its based on <a href=\"https://stackoverflow.com/a/35650390\">Dennis's answer</a> but grabs its from an environment variable.</p>\n"},{"comments":[{"owner":{"account_id":12985707,"reputation":3544,"user_id":9386667,"display_name":"niclas_4"},"score":0,"creation_date":1541063844,"post_id":53097689,"comment_id":93092320,"body_markdown":"It would be nice if you specify what you modified and what impact it has, resulting in your working solution.","body":"It would be nice if you specify what you modified and what impact it has, resulting in your working solution."}],"tags":[],"owner":{"account_id":5253207,"reputation":246,"user_id":4196777,"display_name":"Hitesh sapra"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1541061558,"creation_date":1541061558,"answer_id":53097689,"question_id":17197636,"body_markdown":"I&#39;m using this code and working very fine.\r\n\r\n    def baseUrl = &#39;\\&quot;http://patelwala.com/myapi/&quot;&#39;\r\n    def googleServerKey = &#39;\\&quot;87171841097-opu71rk2ps35ibv96ud57g3ktto6ioio.apps.googleusercontent.com&quot;&#39;\r\n    android {\r\n      buildTypes {\r\n      release {\r\n            minifyEnabled true\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            buildConfigField &#39;String&#39;, &#39;BASE_URL&#39;, baseUrl\r\n            buildConfigField &#39;String&#39;, &#39;web_client_id&#39;, googleServerKey\r\n        }\r\n        releasedebug {\r\n            initWith debug\r\n            buildConfigField &#39;String&#39;, &#39;BASE_URL&#39;, baseUrl\r\n            buildConfigField &#39;String&#39;, &#39;web_client_id&#39; ,googleServerKey\r\n        }\r\n        debug {\r\n\r\n            buildConfigField &#39;String&#39;, &#39;BASE_URL&#39;, baseUrl\r\n            buildConfigField &#39;String&#39;, &#39;web_client_id&#39;, googleServerKey\r\n        }\r\n     }\r\n    }\r\n\r\n}","title":"Is it possible to declare a variable in Gradle usable in Java?","body":"<p>I'm using this code and working very fine.</p>\n\n<pre><code>def baseUrl = '\\\"http://patelwala.com/myapi/\"'\ndef googleServerKey = '\\\"87171841097-opu71rk2ps35ibv96ud57g3ktto6ioio.apps.googleusercontent.com\"'\nandroid {\n  buildTypes {\n  release {\n        minifyEnabled true\n        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        buildConfigField 'String', 'BASE_URL', baseUrl\n        buildConfigField 'String', 'web_client_id', googleServerKey\n    }\n    releasedebug {\n        initWith debug\n        buildConfigField 'String', 'BASE_URL', baseUrl\n        buildConfigField 'String', 'web_client_id' ,googleServerKey\n    }\n    debug {\n\n        buildConfigField 'String', 'BASE_URL', baseUrl\n        buildConfigField 'String', 'web_client_id', googleServerKey\n    }\n }\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":4072991,"reputation":2103,"user_id":3345366,"accept_rate":100,"display_name":"anil"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1549639054,"creation_date":1549638964,"answer_id":54595382,"question_id":17197636,"body_markdown":"How can you insert String result of function into buildConfigField\r\n\r\nHere&#39;s an example of build date in human-readable format set:\r\n\r\n    def getDate() {\r\n        return new SimpleDateFormat(&quot;dd MMMM yyyy&quot;, new Locale(&quot;ru&quot;)).format(new Date())\r\n    }\r\n    \r\n    def buildDate = getDate()\r\n\r\n    defaultConfig {\r\n        buildConfigField &quot;String&quot;, &quot;BUILD_DATE&quot;, &quot;\\&quot;$buildDate\\&quot;&quot;\r\n    }","title":"Is it possible to declare a variable in Gradle usable in Java?","body":"<p>How can you insert String result of function into buildConfigField</p>\n\n<p>Here's an example of build date in human-readable format set:</p>\n\n<pre><code>def getDate() {\n    return new SimpleDateFormat(\"dd MMMM yyyy\", new Locale(\"ru\")).format(new Date())\n}\n\ndef buildDate = getDate()\n\ndefaultConfig {\n    buildConfigField \"String\", \"BUILD_DATE\", \"\\\"$buildDate\\\"\"\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7244062,"reputation":7315,"user_id":5526624,"display_name":"Rickard Elim&#228;&#228;"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1561372068,"creation_date":1561372068,"answer_id":56734615,"question_id":17197636,"body_markdown":"None of the above answers gave me any guidelines so I had to spend two hours learning about Groovy Methods.\r\n\r\nI wanted be able to go against a production, sandbox and local environment. Because I&#39;m lazy, I only wanted to change the URL at one place. Here is what I came up with:\r\n\r\n     flavorDimensions &#39;environment&#39;\r\n        productFlavors {\r\n            production {\r\n                def SERVER_HOST = &quot;evil-company.com&quot;\r\n                buildConfigField &#39;String&#39;, &#39;API_HOST&#39;, &quot;\\&quot;${SERVER_HOST}\\&quot;&quot;\r\n                buildConfigField &#39;String&#39;, &#39;API_URL&#39;, &quot;\\&quot;https://${SERVER_HOST}/api/v1/\\&quot;&quot;\r\n                buildConfigField &#39;String&#39;, &#39;WEB_URL&#39;, &quot;\\&quot;https://${SERVER_HOST}/\\&quot;&quot;\r\n                dimension &#39;environment&#39;\r\n            }\r\n            rickard {\r\n                def LOCAL_HOST = &quot;192.168.1.107&quot;\r\n                buildConfigField &#39;String&#39;, &#39;API_HOST&#39;, &quot;\\&quot;${LOCAL_HOST}\\&quot;&quot;\r\n                buildConfigField &#39;String&#39;, &#39;API_URL&#39;, &quot;\\&quot;https://${LOCAL_HOST}/api/v1/\\&quot;&quot;\r\n                buildConfigField &#39;String&#39;, &#39;WEB_URL&#39;, &quot;\\&quot;https://${LOCAL_HOST}/\\&quot;&quot;\r\n                applicationIdSuffix &quot;.dev&quot;\r\n            }\r\n        }\r\n\r\nAlternative syntax, because you can only use `${variable}` with double quotes in Groovy Methods.\r\n\r\n        rickard {\r\n            def LOCAL_HOST = &quot;192.168.1.107&quot;\r\n            buildConfigField &#39;String&#39;, &#39;API_HOST&#39;, &#39;&quot;&#39; + LOCAL_HOST + &#39;&quot;&#39;\r\n            buildConfigField &#39;String&#39;, &#39;API_URL&#39;, &#39;&quot;https://&#39; + LOCAL_HOST + &#39;/api/v1/&quot;&#39;\r\n            buildConfigField &#39;String&#39;, &#39;WEB_URL&#39;, &#39;&quot;https://&#39; + LOCAL_HOST + &#39;&quot;&#39;\r\n            applicationIdSuffix &quot;.dev&quot;\r\n        }\r\n\r\nWhat was hard for me to grasp was that strings needs to be declared as strings surrounded by quotes. Because of that restriction, I couldn&#39;t use reference `API_HOST` directly, which was what I wanted to do in the first place.","title":"Is it possible to declare a variable in Gradle usable in Java?","body":"<p>None of the above answers gave me any guidelines so I had to spend two hours learning about Groovy Methods.</p>\n\n<p>I wanted be able to go against a production, sandbox and local environment. Because I'm lazy, I only wanted to change the URL at one place. Here is what I came up with:</p>\n\n<pre><code> flavorDimensions 'environment'\n    productFlavors {\n        production {\n            def SERVER_HOST = \"evil-company.com\"\n            buildConfigField 'String', 'API_HOST', \"\\\"${SERVER_HOST}\\\"\"\n            buildConfigField 'String', 'API_URL', \"\\\"https://${SERVER_HOST}/api/v1/\\\"\"\n            buildConfigField 'String', 'WEB_URL', \"\\\"https://${SERVER_HOST}/\\\"\"\n            dimension 'environment'\n        }\n        rickard {\n            def LOCAL_HOST = \"192.168.1.107\"\n            buildConfigField 'String', 'API_HOST', \"\\\"${LOCAL_HOST}\\\"\"\n            buildConfigField 'String', 'API_URL', \"\\\"https://${LOCAL_HOST}/api/v1/\\\"\"\n            buildConfigField 'String', 'WEB_URL', \"\\\"https://${LOCAL_HOST}/\\\"\"\n            applicationIdSuffix \".dev\"\n        }\n    }\n</code></pre>\n\n<p>Alternative syntax, because you can only use <code>${variable}</code> with double quotes in Groovy Methods.</p>\n\n<pre><code>    rickard {\n        def LOCAL_HOST = \"192.168.1.107\"\n        buildConfigField 'String', 'API_HOST', '\"' + LOCAL_HOST + '\"'\n        buildConfigField 'String', 'API_URL', '\"https://' + LOCAL_HOST + '/api/v1/\"'\n        buildConfigField 'String', 'WEB_URL', '\"https://' + LOCAL_HOST + '\"'\n        applicationIdSuffix \".dev\"\n    }\n</code></pre>\n\n<p>What was hard for me to grasp was that strings needs to be declared as strings surrounded by quotes. Because of that restriction, I couldn't use reference <code>API_HOST</code> directly, which was what I wanted to do in the first place.</p>\n"},{"tags":[],"owner":{"account_id":16634316,"reputation":1305,"user_id":12021422,"display_name":"Rahul Shyokand"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1613715667,"creation_date":1612767099,"answer_id":66097040,"question_id":17197636,"body_markdown":"https://stackoverflow.com/a/17201265/12021422 Answer by @rciovati works\r\n### But make sure you rebuild the project to be able to remove the error from Android Studio IDE\r\n\r\nI spent 30 minutes trying to figure out why the new property variables aren&#39;t accessible. \r\n\r\n## **If the &quot;Make Project&quot; as marked with red color doesn&#39;t work then try the &quot;Rebuild Project&quot; Button as marked with green color.**\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0kaj1.png\r\n  [2]: https://i.stack.imgur.com/iHB9r.png","title":"Is it possible to declare a variable in Gradle usable in Java?","body":"<p><a href=\"https://stackoverflow.com/a/17201265/12021422\">https://stackoverflow.com/a/17201265/12021422</a> Answer by @rciovati works</p>\n<h3>But make sure you rebuild the project to be able to remove the error from Android Studio IDE</h3>\n<p>I spent 30 minutes trying to figure out why the new property variables aren't accessible.</p>\n<h2><strong>If the &quot;Make Project&quot; as marked with red color doesn't work then try the &quot;Rebuild Project&quot; Button as marked with green color.</strong></h2>\n<p><a href=\"https://i.stack.imgur.com/iHB9r.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iHB9r.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":11726648,"reputation":19553,"user_id":8583692,"display_name":"Mahozad"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1699455756,"creation_date":1643130174,"answer_id":70852749,"question_id":17197636,"body_markdown":"This is for [Kotlin DSL][1] (build.gradle.**kts**) usable both in Java and Kotlin:\r\n\r\n```kotlin\r\nbuildTypes {\r\n    getByName(&quot;debug&quot;) { // or simply  debug {  in newer version of Android Gradle Plugin (AGP)\r\n        buildConfigField(&quot;Boolean&quot;, &quot;isHappy&quot;, &quot;true&quot;)\r\n        buildConfigField(&quot;String&quot;, &quot;favoriteSong&quot;, &quot;&quot;&quot;&quot;Black Forest&quot;&quot;&quot;&quot;)\r\n        resValue(&quot;string&quot;, &quot;myName&quot;, &quot;Bunny&quot;)\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.gradle.org/current/userguide/kotlin_dsl.html","title":"Is it possible to declare a variable in Gradle usable in Java?","body":"<p>This is for <a href=\"https://docs.gradle.org/current/userguide/kotlin_dsl.html\" rel=\"nofollow noreferrer\">Kotlin DSL</a> (build.gradle.<strong>kts</strong>) usable both in Java and Kotlin:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>buildTypes {\n    getByName(&quot;debug&quot;) { // or simply  debug {  in newer version of Android Gradle Plugin (AGP)\n        buildConfigField(&quot;Boolean&quot;, &quot;isHappy&quot;, &quot;true&quot;)\n        buildConfigField(&quot;String&quot;, &quot;favoriteSong&quot;, &quot;&quot;&quot;&quot;Black Forest&quot;&quot;&quot;&quot;)\n        resValue(&quot;string&quot;, &quot;myName&quot;, &quot;Bunny&quot;)\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":266103,"reputation":8635,"user_id":553488,"accept_rate":82,"display_name":"klefevre"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":187545,"favorite_count":0,"down_vote_count":0,"up_vote_count":464,"accepted_answer_id":17201265,"answer_count":11,"score":464,"last_activity_date":1699455756,"creation_date":1371663151,"question_id":17197636,"body_markdown":"Is it possible to declare a variable in Gradle usable in Java ?\r\nBasically I would like to declare some vars in the build.gradle and then getting it (obviously) at build time. Just like a pre-processor macros in C/C++...\r\n\r\nAn example of declaration would be something like that ... :\r\n\r\n    android {\r\n        debug {\r\n            A_VAR_RETRIEVABLE_IN_JAVA = 42\r\n        }\r\n        release {\r\n            A_VAR_RETRIEVABLE_IN_JAVA = 42+52\r\n        }\r\n    }\r\n\r\nIs there a way to do something like that ?","title":"Is it possible to declare a variable in Gradle usable in Java?","body":"<p>Is it possible to declare a variable in Gradle usable in Java ?\nBasically I would like to declare some vars in the build.gradle and then getting it (obviously) at build time. Just like a pre-processor macros in C/C++...</p>\n\n<p>An example of declaration would be something like that ... :</p>\n\n<pre><code>android {\n    debug {\n        A_VAR_RETRIEVABLE_IN_JAVA = 42\n    }\n    release {\n        A_VAR_RETRIEVABLE_IN_JAVA = 42+52\n    }\n}\n</code></pre>\n\n<p>Is there a way to do something like that ?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":1631680,"reputation":17783,"user_id":1506071,"accept_rate":68,"display_name":"Pradeep Simha"},"score":0,"creation_date":1699453065,"post_id":77446314,"comment_id":136533222,"body_markdown":"Does this answer your question? [How do I make a delay in Java?](https://stackoverflow.com/questions/24104313/how-do-i-make-a-delay-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/24104313/how-do-i-make-a-delay-in-java\">How do I make a delay in Java?</a>"},{"owner":{"account_id":18420551,"reputation":404,"user_id":13418296,"display_name":"Generous Badger"},"score":0,"creation_date":1699453440,"post_id":77446314,"comment_id":136533329,"body_markdown":"The answers behind that link have the same issue as the answer below: This is correct for simple console applications or the like, but not for even-driven systems like the Android UI. Using `Thread.sleep()` on the UI thread will make the UI entirely unresponsive (and probably not update) for the duration of the sleep. Suggested alternative: [How to call a method after a delay in Android](https://stackoverflow.com/questions/3072173).","body":"The answers behind that link have the same issue as the answer below: This is correct for simple console applications or the like, but not for even-driven systems like the Android UI. Using <code>Thread.sleep()</code> on the UI thread will make the UI entirely unresponsive (and probably not update) for the duration of the sleep. Suggested alternative: <a href=\"https://stackoverflow.com/questions/3072173\">How to call a method after a delay in Android</a>."},{"owner":{"account_id":27701204,"reputation":3,"user_id":21145746,"display_name":"Gio "},"score":0,"creation_date":1699454521,"post_id":77446314,"comment_id":136533622,"body_markdown":"I tried TimeUnit but it didn&#39;t work. the whole thing is delayed not just what comes after it","body":"I tried TimeUnit but it didn&#39;t work. the whole thing is delayed not just what comes after it"}],"answers":[{"comments":[{"owner":{"account_id":18420551,"reputation":404,"user_id":13418296,"display_name":"Generous Badger"},"score":0,"creation_date":1699453353,"post_id":77446359,"comment_id":136533310,"body_markdown":"That&#39;s a bad idea in Android specifically and in most even-driven UI environments generally: This code has to be running on the UI thread to be able to interact with the buttons like this and the UI thread should never block (especially not for something like this, but even I/O should be avoided there).","body":"That&#39;s a bad idea in Android specifically and in most even-driven UI environments generally: This code has to be running on the UI thread to be able to interact with the buttons like this and the UI thread should never block (especially not for something like this, but even I/O should be avoided there)."},{"owner":{"account_id":25961615,"reputation":32,"user_id":19678153,"display_name":"Samuel Echols"},"score":0,"creation_date":1699453498,"post_id":77446359,"comment_id":136533345,"body_markdown":"You&#39;re right, just edited the response with some new information","body":"You&#39;re right, just edited the response with some new information"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1699453784,"post_id":77446359,"comment_id":136533421,"body_markdown":"This is bad on any of the common UI toolkits, whether its Swing, JavaFX, SWT, or Android.","body":"This is bad on any of the common UI toolkits, whether its Swing, JavaFX, SWT, or Android."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1699454482,"post_id":77446359,"comment_id":136533613,"body_markdown":"Use a Timer, they have the right semantics for UI delay: https://stackoverflow.com/questions/6700802/android-timer-updating-a-textview-ui","body":"Use a Timer, they have the right semantics for UI delay: <a href=\"https://stackoverflow.com/questions/6700802/android-timer-updating-a-textview-ui\" title=\"android timer updating a textview ui\">stackoverflow.com/questions/6700802/&hellip;</a>"},{"owner":{"account_id":27701204,"reputation":3,"user_id":21145746,"display_name":"Gio "},"score":0,"creation_date":1699454726,"post_id":77446359,"comment_id":136533683,"body_markdown":"Thread.Sleep ... wouldn&#39;t work. it would freeze the whole thing for 3 seconds not just what comes afterwards","body":"Thread.Sleep ... wouldn&#39;t work. it would freeze the whole thing for 3 seconds not just what comes afterwards"}],"tags":[],"owner":{"account_id":25961615,"reputation":32,"user_id":19678153,"display_name":"Samuel Echols"},"comment_count":5,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1699453476,"creation_date":1699453188,"answer_id":77446359,"question_id":77446314,"body_markdown":"EDIT: Don&#39;t do what I suggested seeing as you&#39;re doing Android development. Refer to this post that may be able to provide some insight: https://stackoverflow.com/questions/18316361/how-to-add-time-delay-in-java-code-in-android\r\n\r\nOne way you could do it is:\r\n```java\r\nThread.Sleep(12000); //12,000ms = 12s\r\nfor (int i = 0; i &lt; 12; i++) {\r\n    int resID = getResources().getIdentifier(&quot;btn&quot;+i,&quot;id&quot;, getPackageName());\r\n    Button botton = findViewById(resID);\r\n    botton.setEnabled(true);\r\n\r\n}\r\n```","title":"How to delay code execution in Java? I am building a &quot;memory game&quot; in Java","body":"<p>EDIT: Don't do what I suggested seeing as you're doing Android development. Refer to this post that may be able to provide some insight: <a href=\"https://stackoverflow.com/questions/18316361/how-to-add-time-delay-in-java-code-in-android\">How to add time delay in java code in android</a></p>\n<p>One way you could do it is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Thread.Sleep(12000); //12,000ms = 12s\nfor (int i = 0; i &lt; 12; i++) {\n    int resID = getResources().getIdentifier(&quot;btn&quot;+i,&quot;id&quot;, getPackageName());\n    Button botton = findViewById(resID);\n    botton.setEnabled(true);\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27701204,"reputation":3,"user_id":21145746,"display_name":"Gio "},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699455654,"creation_date":1699454844,"answer_id":77446591,"question_id":77446314,"body_markdown":"I have just found something that seems to be working reading answers to similar questions.\r\n\r\nHere&#39;s my new code \r\n\r\n```\r\nnew android.os.Handler(Looper.getMainLooper()).postDelayed(\r\n        new Runnable() {\r\n            public void run() {\r\n                Log.i(&quot;tag&quot;, &quot;This&#39;ll run 300 milliseconds later&quot;);\r\n\r\n                for(int i=0; i&lt;12; i++)\r\n                {\r\n                    int resID = getResources().getIdentifier(&quot;btn&quot;+i,\r\n                            &quot;id&quot;, getPackageName());\r\n                    Button botton =   findViewById(resID);\r\n                    botton.setEnabled(true);\r\n                }\r\n            }\r\n        },\r\n        3000);\r\n```","title":"How to delay code execution in Java? I am building a &quot;memory game&quot; in Java","body":"<p>I have just found something that seems to be working reading answers to similar questions.</p>\n<p>Here's my new code</p>\n<pre><code>new android.os.Handler(Looper.getMainLooper()).postDelayed(\n        new Runnable() {\n            public void run() {\n                Log.i(&quot;tag&quot;, &quot;This'll run 300 milliseconds later&quot;);\n\n                for(int i=0; i&lt;12; i++)\n                {\n                    int resID = getResources().getIdentifier(&quot;btn&quot;+i,\n                            &quot;id&quot;, getPackageName());\n                    Button botton =   findViewById(resID);\n                    botton.setEnabled(true);\n                }\n            }\n        },\n        3000);\n</code></pre>\n"}],"owner":{"account_id":27701204,"reputation":3,"user_id":21145746,"display_name":"Gio "},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1699455654,"creation_date":1699452820,"question_id":77446314,"body_markdown":"I am new to Java and I decided to build a &quot;memory&quot; game app on Android Studio as an exercise. So far I placed 12 buttons and the text changes when the button is clicked. Once two buttons are clicked, all buttons are disabled. I need them to be enabled again after 2 seconds. How can I do that? \r\n\r\nThis is the code that enables/disables all the buttons at once. \r\n\r\n```java\r\nfor(int i=0; i&lt;12; i++)\r\n{\r\n    int resID = getResources().getIdentifier(&quot;btn&quot;+i,\r\n            &quot;id&quot;, getPackageName());\r\n    Button botton =   findViewById(resID);\r\n    botton.setEnabled(true);\r\n}\r\n```","title":"How to delay code execution in Java? I am building a &quot;memory game&quot; in Java","body":"<p>I am new to Java and I decided to build a &quot;memory&quot; game app on Android Studio as an exercise. So far I placed 12 buttons and the text changes when the button is clicked. Once two buttons are clicked, all buttons are disabled. I need them to be enabled again after 2 seconds. How can I do that?</p>\n<p>This is the code that enables/disables all the buttons at once.</p>\n<pre class=\"lang-java prettyprint-override\"><code>for(int i=0; i&lt;12; i++)\n{\n    int resID = getResources().getIdentifier(&quot;btn&quot;+i,\n            &quot;id&quot;, getPackageName());\n    Button botton =   findViewById(resID);\n    botton.setEnabled(true);\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","maven","apache-kafka"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":3,"creation_date":1699440334,"post_id":77443545,"comment_id":136530780,"body_markdown":"The properties aren&#39;t in the `application.properties` (or yaml). If you included an `application.yaml` (or properties) in your starter jar that is useless as it will be ignored, only 1 `application.yaml` will be loaded and that will be the first that is found, generally that is the one in your actual application not the one from the starter.","body":"The properties aren&#39;t in the <code>application.properties</code> (or yaml). If you included an <code>application.yaml</code> (or properties) in your starter jar that is useless as it will be ignored, only 1 <code>application.yaml</code> will be loaded and that will be the first that is found, generally that is the one in your actual application not the one from the starter."},{"owner":{"account_id":27441144,"reputation":11,"user_id":20936045,"display_name":"Kedar Jog"},"score":0,"creation_date":1699445976,"post_id":77443545,"comment_id":136531729,"body_markdown":"So I should not have an application.yml file inside Jar? Instead, should I have it in the Main project only? My idea was to have common configurations inside the jar, so it could be reused and profile-specific configurations in the Main project using spring profile-specific YML files. Is there a way to achieve that?","body":"So I should not have an application.yml file inside Jar? Instead, should I have it in the Main project only? My idea was to have common configurations inside the jar, so it could be reused and profile-specific configurations in the Main project using spring profile-specific YML files. Is there a way to achieve that?"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1699446103,"post_id":77443545,"comment_id":136531760,"body_markdown":"Don&#39;t it will not work only unpredictably. What if you have another library with &quot;defaults&quot; which application.yaml should be loaded? What if you add a third... Either provide a default value in the expression (as that is basically what you are doing) or explicitly document that something needs to be configured.","body":"Don&#39;t it will not work only unpredictably. What if you have another library with &quot;defaults&quot; which application.yaml should be loaded? What if you add a third... Either provide a default value in the expression (as that is basically what you are doing) or explicitly document that something needs to be configured."}],"owner":{"account_id":27441144,"reputation":11,"user_id":20936045,"display_name":"Kedar Jog"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699454906,"creation_date":1699428505,"question_id":77443545,"body_markdown":"I have a custom Springboot starter jar inside which I am reading a property from application.yml like below and it is working fine when I run the jar file. \r\n```\r\npackage com.test;\r\n\r\n@Configuration\r\npublic class Myclass {\r\n@Value(&quot;${myapp.someProperty}&quot;)\r\nprivate String someProperty;\r\n\r\n}\r\n```\r\n```application.yml\r\nmyapp:\r\n  someProperty: test\r\n```\r\nI have included spring.factories in the META-INF folder with the below entries:\r\n```org.springframework.boot.autoconfigure.EnableAutoConfiguration=com.test.Myclass```\r\n\r\nbut if I include this jar as a dependency in another project it&#39;s not able to read this property and throwing \r\n\r\n```Caused by: java.lang.IllegalArgumentException: Could not resolve placeholder ```\r\n\r\n\r\nI included component scan for packages of jar file like below.\r\n```\r\n\r\n@SpringBootApplication\r\n@ComponentScan(&quot;com.test&quot;)\r\npublic class TestApp {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(TestApp.class, args);\r\n    }\r\n}\r\n```\r\n\r\nIs there anything am I missing?","title":"Springboot not loading the @Value annotation inside the jar","body":"<p>I have a custom Springboot starter jar inside which I am reading a property from application.yml like below and it is working fine when I run the jar file.</p>\n<pre><code>package com.test;\n\n@Configuration\npublic class Myclass {\n@Value(&quot;${myapp.someProperty}&quot;)\nprivate String someProperty;\n\n}\n</code></pre>\n<pre><code>myapp:\n  someProperty: test\n</code></pre>\n<p>I have included spring.factories in the META-INF folder with the below entries:\n<code>org.springframework.boot.autoconfigure.EnableAutoConfiguration=com.test.Myclass</code></p>\n<p>but if I include this jar as a dependency in another project it's not able to read this property and throwing</p>\n<p><code>Caused by: java.lang.IllegalArgumentException: Could not resolve placeholder </code></p>\n<p>I included component scan for packages of jar file like below.</p>\n<pre><code>\n@SpringBootApplication\n@ComponentScan(&quot;com.test&quot;)\npublic class TestApp {\n\n    public static void main(String[] args) {\n        SpringApplication.run(TestApp.class, args);\n    }\n}\n</code></pre>\n<p>Is there anything am I missing?</p>\n"},{"tags":["java","android","sdk","proguard","package-info"],"owner":{"account_id":306351,"reputation":12724,"user_id":617044,"accept_rate":88,"display_name":"Bill Mote"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1699454599,"creation_date":1699454599,"question_id":77446554,"body_markdown":"If I have a class in an Android project that is in a package without a `package-info.java` file, the class can end up obfuscated as just `a` with members being `a`, `b`, `c`, ..., but adding a `package-info.java` file results in the class being obfuscated with the full package name, ex. `com.example.a`, and the members are `com.example.a.a`, `com.example.a.b`...\r\n\r\n```java\r\npackage com.example;\r\n\r\nenum class Something { THIS, THAT, OTHER }\r\n```\r\n\r\nI&#39;m a fan, but I don&#39;t understand how/why this works. I also know that this can be accomplished by adding `-keeppackagenames` to the proguard rules file, but I&#39;m delivering a library so I&#39;d prefer to keep the change isolated to my new class that&#39;s causing a problem.","title":"How does package-info.java affect proguard (and why)?","body":"<p>If I have a class in an Android project that is in a package without a <code>package-info.java</code> file, the class can end up obfuscated as just <code>a</code> with members being <code>a</code>, <code>b</code>, <code>c</code>, ..., but adding a <code>package-info.java</code> file results in the class being obfuscated with the full package name, ex. <code>com.example.a</code>, and the members are <code>com.example.a.a</code>, <code>com.example.a.b</code>...</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example;\n\nenum class Something { THIS, THAT, OTHER }\n</code></pre>\n<p>I'm a fan, but I don't understand how/why this works. I also know that this can be accomplished by adding <code>-keeppackagenames</code> to the proguard rules file, but I'm delivering a library so I'd prefer to keep the change isolated to my new class that's causing a problem.</p>\n"},{"tags":["java","selenium-webdriver","groovy","jmeter","jmeter-plugins"],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162758,"user_id":2897748,"display_name":"Dmitri T"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1699454575,"creation_date":1699454575,"answer_id":77446549,"question_id":77446398,"body_markdown":"Your `import` statement syntax is incorrect.\r\n\r\nYou can either go for [star import][1]:\r\n\r\n    import org.openqa.selenium.support.ui.*\r\n\r\nor [static star import][1]:\r\n\r\n    import static org.openqa.selenium.support.ui.*\r\n\r\nMore information:\r\n\r\n- [Apache Groovy: Program Structure][2]\r\n- [Apache Groovy: What Is Groovy Used For?][2]\r\n\r\n\r\n  [1]: https://groovy-lang.org/structure.html#_star_import\r\n  [2]: https://www.blazemeter.com/blog/apache-groovy","title":"Jmeter - Selenium/WebDriver : unable to resolve class org.openqa.selenium.support.ui","body":"<p>Your <code>import</code> statement syntax is incorrect.</p>\n<p>You can either go for <a href=\"https://groovy-lang.org/structure.html#_star_import\" rel=\"nofollow noreferrer\">star import</a>:</p>\n<pre><code>import org.openqa.selenium.support.ui.*\n</code></pre>\n<p>or <a href=\"https://groovy-lang.org/structure.html#_star_import\" rel=\"nofollow noreferrer\">static star import</a>:</p>\n<pre><code>import static org.openqa.selenium.support.ui.*\n</code></pre>\n<p>More information:</p>\n<ul>\n<li><a href=\"https://www.blazemeter.com/blog/apache-groovy\" rel=\"nofollow noreferrer\">Apache Groovy: Program Structure</a></li>\n<li><a href=\"https://www.blazemeter.com/blog/apache-groovy\" rel=\"nofollow noreferrer\">Apache Groovy: What Is Groovy Used For?</a></li>\n</ul>\n"}],"owner":{"account_id":24565459,"reputation":3,"user_id":18472659,"display_name":"vyom"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77446549,"answer_count":1,"score":0,"last_activity_date":1699454575,"creation_date":1699453424,"question_id":77446398,"body_markdown":"os\r\nUbuntu 20.04.6\r\n\r\njava --version\r\nopenjdk 17.0.8.1 2023-08-24\r\n\r\nJmeter\r\nv 5.6.2\r\n\r\nSelenium/WebDriver Support\r\n4.13.0.0\r\n\r\ngroovy script\r\n```\r\nimport org.openqa.selenium.support.ui as ui;\r\n\r\nWDS.sampleResult.sampleStart()\r\nWDS.browser.get(&#39;https://google.com&#39;)\r\nWDS.sampleResult.sampleEnd()\r\n```\r\n\r\nLOGS\r\n```\r\n2023-11-08 19:32:45,303 INFO o.a.j.e.StandardJMeterEngine: Running the test!\r\n2023-11-08 19:32:45,304 INFO o.a.j.s.SampleEvent: List of sample_variables: []\r\n2023-11-08 19:32:45,304 INFO o.a.j.g.u.JMeterMenuBar: setRunning(true, *local*)\r\n2023-11-08 19:32:45,337 INFO o.a.j.e.StandardJMeterEngine: Starting ThreadGroup: 1 : Thread Group\r\n2023-11-08 19:32:45,337 INFO o.a.j.e.StandardJMeterEngine: Starting 1 threads for group Thread Group.\r\n2023-11-08 19:32:45,337 INFO o.a.j.e.StandardJMeterEngine: Thread will continue on error\r\n2023-11-08 19:32:45,337 INFO o.a.j.t.ThreadGroup: Starting thread group... number=1 threads=1 ramp-up=1 delayedStart=false\r\n2023-11-08 19:32:45,338 INFO o.a.j.t.ThreadGroup: Started thread group number 1\r\n2023-11-08 19:32:45,338 INFO o.a.j.e.StandardJMeterEngine: All thread groups have been started\r\n2023-11-08 19:32:45,338 INFO o.a.j.t.JMeterThread: Thread started: Thread Group 1-1\r\n2023-11-08 19:32:53,300 INFO c.g.j.p.w.c.WebDriverConfig: Created browser object: ChromeDriver: chrome on linux (null)\r\n2023-11-08 19:32:53,326 ERROR c.g.j.p.w.s.WebDriverSampler: org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:\r\nScript3.groovy: 14: unable to resolve class org.openqa.selenium.support.ui\r\n @ line 14, column 1.\r\n   import org.openqa.selenium.support.ui as ui;\r\n   ^\r\n\r\n1 error\r\n\r\n2023-11-08 19:32:53,326 INFO o.a.j.t.JMeterThread: Thread is done: Thread Group 1-1\r\n2023-11-08 19:32:53,326 INFO o.a.j.t.JMeterThread: Thread finished: Thread Group 1-1\r\n2023-11-08 19:32:53,433 INFO o.a.j.e.StandardJMeterEngine: Notifying test listeners of end of test\r\n2023-11-08 19:32:53,434 INFO o.a.j.g.u.JMeterMenuBar: setRunning(false, *local*)\r\n```\r\n\r\n\r\ndir&gt; jmeter/lib\r\n\r\n-groovy-3.0.17.jar\r\n-selenium-api-4.13.0.jar\r\n-selenium-chrome-driver-4.13.0.jar\r\n-selenium-chromium-driver-4.13.0.jar\r\n-selenium-edge-driver-4.13.0.jar\r\n-selenium-firefox-driver-4.13.0.jar\r\n-selenium-http-4.13.0.jar\r\n-selenium-ie-driver-4.13.0.jar\r\n-selenium-json-4.13.0.jar\r\n-selenium-os-4.13.0.jar\r\n-selenium-remote-driver-4.13.0.jar\r\n-selenium-support-4.13.0.jar\r\n\r\n\r\ni am new to Jmeter.\r\nis there anything i missing ? is any path issues ? \r\ni want to use WebDriverWait class but i am stuck at **unable to resolve class** issue\r\nany groovy path issue ? \r\ni think may be its because of any path mismatch but i dont know about. \r\n ","title":"Jmeter - Selenium/WebDriver : unable to resolve class org.openqa.selenium.support.ui","body":"<p>os\nUbuntu 20.04.6</p>\n<p>java --version\nopenjdk 17.0.8.1 2023-08-24</p>\n<p>Jmeter\nv 5.6.2</p>\n<p>Selenium/WebDriver Support\n4.13.0.0</p>\n<p>groovy script</p>\n<pre><code>import org.openqa.selenium.support.ui as ui;\n\nWDS.sampleResult.sampleStart()\nWDS.browser.get('https://google.com')\nWDS.sampleResult.sampleEnd()\n</code></pre>\n<p>LOGS</p>\n<pre><code>2023-11-08 19:32:45,303 INFO o.a.j.e.StandardJMeterEngine: Running the test!\n2023-11-08 19:32:45,304 INFO o.a.j.s.SampleEvent: List of sample_variables: []\n2023-11-08 19:32:45,304 INFO o.a.j.g.u.JMeterMenuBar: setRunning(true, *local*)\n2023-11-08 19:32:45,337 INFO o.a.j.e.StandardJMeterEngine: Starting ThreadGroup: 1 : Thread Group\n2023-11-08 19:32:45,337 INFO o.a.j.e.StandardJMeterEngine: Starting 1 threads for group Thread Group.\n2023-11-08 19:32:45,337 INFO o.a.j.e.StandardJMeterEngine: Thread will continue on error\n2023-11-08 19:32:45,337 INFO o.a.j.t.ThreadGroup: Starting thread group... number=1 threads=1 ramp-up=1 delayedStart=false\n2023-11-08 19:32:45,338 INFO o.a.j.t.ThreadGroup: Started thread group number 1\n2023-11-08 19:32:45,338 INFO o.a.j.e.StandardJMeterEngine: All thread groups have been started\n2023-11-08 19:32:45,338 INFO o.a.j.t.JMeterThread: Thread started: Thread Group 1-1\n2023-11-08 19:32:53,300 INFO c.g.j.p.w.c.WebDriverConfig: Created browser object: ChromeDriver: chrome on linux (null)\n2023-11-08 19:32:53,326 ERROR c.g.j.p.w.s.WebDriverSampler: org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:\nScript3.groovy: 14: unable to resolve class org.openqa.selenium.support.ui\n @ line 14, column 1.\n   import org.openqa.selenium.support.ui as ui;\n   ^\n\n1 error\n\n2023-11-08 19:32:53,326 INFO o.a.j.t.JMeterThread: Thread is done: Thread Group 1-1\n2023-11-08 19:32:53,326 INFO o.a.j.t.JMeterThread: Thread finished: Thread Group 1-1\n2023-11-08 19:32:53,433 INFO o.a.j.e.StandardJMeterEngine: Notifying test listeners of end of test\n2023-11-08 19:32:53,434 INFO o.a.j.g.u.JMeterMenuBar: setRunning(false, *local*)\n</code></pre>\n<p>dir&gt; jmeter/lib</p>\n<p>-groovy-3.0.17.jar\n-selenium-api-4.13.0.jar\n-selenium-chrome-driver-4.13.0.jar\n-selenium-chromium-driver-4.13.0.jar\n-selenium-edge-driver-4.13.0.jar\n-selenium-firefox-driver-4.13.0.jar\n-selenium-http-4.13.0.jar\n-selenium-ie-driver-4.13.0.jar\n-selenium-json-4.13.0.jar\n-selenium-os-4.13.0.jar\n-selenium-remote-driver-4.13.0.jar\n-selenium-support-4.13.0.jar</p>\n<p>i am new to Jmeter.\nis there anything i missing ? is any path issues ?\ni want to use WebDriverWait class but i am stuck at <strong>unable to resolve class</strong> issue\nany groovy path issue ?\ni think may be its because of any path mismatch but i dont know about.</p>\n"},{"tags":["java","spring-boot","spring-cloud-feign","feign","zero-copy"],"answers":[{"tags":[],"owner":{"account_id":1466235,"reputation":1427,"user_id":1378965,"display_name":"dgregory"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1569173010,"creation_date":1569172528,"answer_id":58051624,"question_id":58051623,"body_markdown":"## TL;DR. Use `ResponseEntity&lt;InputStreamResource&gt;` and Java NIO\r\n\r\nAccording to [SpringDecoder](https://github.com/spring-cloud/spring-cloud-openfeign/blob/94977691b87fca960133cd6953b5839c44753852/spring-cloud-openfeign-core/src/main/java/org/springframework/cloud/openfeign/support/SpringDecoder.java#L56), Spring decode response using HttpMessageConverters\r\n\r\nResourceHttpMessageConverter which is one of HttpMesageConverters return [InputStreamResource](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/core/io/InputStreamResource.html) which contain InputStream and filename derived from `Content-Disposition`. \r\n\r\nBut, ResourceHttpMessageConverter must be initialized `supportsReadStreaming = true (default value)`\r\nIf you have further interests on this implementation, [check this code](https://github.com/spring-projects/spring-framework/blob/2572cd0503c7d009d3f84c70799723c0f21c0697/spring-web/src/main/java/org/springframework/http/converter/ResourceHttpMessageConverter.java#L81).\r\n\r\nSo, changed code are as followings:\r\n\r\n```java\r\n@GetMapping(&quot;/api/v1/files&quot;)\r\nResponseEntity&lt;InputStreamResource&gt; getFile(@RequestParam(value = &quot;key&quot;) String key)\r\n```\r\n\r\n### JDK9\r\n```java\r\ntry (OutputStream os = new FileOutputStream(&quot;filename.txt&quot;)) {\r\n    responeEntity.getBody().getInputStream().transferTo(os);\r\n}\r\n```\r\n\r\n### JDK8 or less\r\nUse Guava [ByteStreams.copy()](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/io/ByteStreams.html#copy-java.io.InputStream-java.io.OutputStream-)\r\n\r\n```java\r\nPath p = Paths.get(responseEntity.getFilename())\r\nReadableByteChannel rbc = Channels.newChannel(responeEntity.getBody().getInputStream())\r\ntry(FileChannel fc = FileChannel.open(p, StandardOpenOption.WRITE)) {\r\n    ByteStreams.copy(rbc, fc)\r\n}\r\n```\r\n\r\nNow, `Feign Internal Stream -&gt; File`","title":"How to get InputStream via Spring-Feign?","body":"<h2>TL;DR. Use <code>ResponseEntity&lt;InputStreamResource&gt;</code> and Java NIO</h2>\n\n<p>According to <a href=\"https://github.com/spring-cloud/spring-cloud-openfeign/blob/94977691b87fca960133cd6953b5839c44753852/spring-cloud-openfeign-core/src/main/java/org/springframework/cloud/openfeign/support/SpringDecoder.java#L56\" rel=\"noreferrer\">SpringDecoder</a>, Spring decode response using HttpMessageConverters</p>\n\n<p>ResourceHttpMessageConverter which is one of HttpMesageConverters return <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/core/io/InputStreamResource.html\" rel=\"noreferrer\">InputStreamResource</a> which contain InputStream and filename derived from <code>Content-Disposition</code>. </p>\n\n<p>But, ResourceHttpMessageConverter must be initialized <code>supportsReadStreaming = true (default value)</code>\nIf you have further interests on this implementation, <a href=\"https://github.com/spring-projects/spring-framework/blob/2572cd0503c7d009d3f84c70799723c0f21c0697/spring-web/src/main/java/org/springframework/http/converter/ResourceHttpMessageConverter.java#L81\" rel=\"noreferrer\">check this code</a>.</p>\n\n<p>So, changed code are as followings:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(\"/api/v1/files\")\nResponseEntity&lt;InputStreamResource&gt; getFile(@RequestParam(value = \"key\") String key)\n</code></pre>\n\n<h3>JDK9</h3>\n\n<pre class=\"lang-java prettyprint-override\"><code>try (OutputStream os = new FileOutputStream(\"filename.txt\")) {\n    responeEntity.getBody().getInputStream().transferTo(os);\n}\n</code></pre>\n\n<h3>JDK8 or less</h3>\n\n<p>Use Guava <a href=\"https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/io/ByteStreams.html#copy-java.io.InputStream-java.io.OutputStream-\" rel=\"noreferrer\">ByteStreams.copy()</a></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Path p = Paths.get(responseEntity.getFilename())\nReadableByteChannel rbc = Channels.newChannel(responeEntity.getBody().getInputStream())\ntry(FileChannel fc = FileChannel.open(p, StandardOpenOption.WRITE)) {\n    ByteStreams.copy(rbc, fc)\n}\n</code></pre>\n\n<p>Now, <code>Feign Internal Stream -&gt; File</code></p>\n"},{"tags":[],"owner":{"account_id":8065471,"reputation":1181,"user_id":6079771,"display_name":"moolsbytheway"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699454565,"creation_date":1699454167,"answer_id":77446488,"question_id":58051623,"body_markdown":"Assuming that you want to fetch a stream from an external api using Feign.\r\nYou should use `ByteArrayResource` as the response type in your feign method.\r\n\r\n\r\nIn your feign interface make your method return `ByteArrayResource` to consume a stream\r\n\r\n\r\n\r\n    @FeignClient(name = &quot;lim-service&quot;, url = &quot;https://your-api.com/api)\r\n    public interface LimClient {\r\n\r\n        @GetMapping(&quot;/api/v1/files&quot;)\r\n        ByteArrayResource getFile(@RequestParam(value = &quot;key&quot;) String key);\r\n    }\r\n\r\n____\r\nA comment regarding the accepted answer:\r\n\r\nYou can `InputStreamResource` instead of `ByteArrayResource` only if the stream will be consumed only one time, if you need to consume the stream multiple times you shouldn&#39;t use `InputStreamResource`.\r\n\r\n\r\nQuoting from `InputStreamResource` class **javadoc**:\r\n\r\n&gt; Should only be used if no other specific `Resource` implementation is applicable. In particular, prefer `ByteArrayResource` or any of the file-based `Resource` implementations where possible.\r\n\r\n&gt; In contrast to other `Resource` implementations, this is a descriptor for an *already opened* resource - therefore returning `true` from `isOpen()`.\r\n\r\n&gt; Do not use an `InputStreamResource` if you need to keep the resource descriptor somewhere, or **if you need to read from a stream multiple times**. ","title":"How to get InputStream via Spring-Feign?","body":"<p>Assuming that you want to fetch a stream from an external api using Feign.\nYou should use <code>ByteArrayResource</code> as the response type in your feign method.</p>\n<p>In your feign interface make your method return <code>ByteArrayResource</code> to consume a stream</p>\n<pre><code>@FeignClient(name = &quot;lim-service&quot;, url = &quot;https://your-api.com/api)\npublic interface LimClient {\n\n    @GetMapping(&quot;/api/v1/files&quot;)\n    ByteArrayResource getFile(@RequestParam(value = &quot;key&quot;) String key);\n}\n</code></pre>\n<hr />\n<p>A comment regarding the accepted answer:</p>\n<p>You can <code>InputStreamResource</code> instead of <code>ByteArrayResource</code> only if the stream will be consumed only one time, if you need to consume the stream multiple times you shouldn't use <code>InputStreamResource</code>.</p>\n<p>Quoting from <code>InputStreamResource</code> class <strong>javadoc</strong>:</p>\n<blockquote>\n<p>Should only be used if no other specific <code>Resource</code> implementation is applicable. In particular, prefer <code>ByteArrayResource</code> or any of the file-based <code>Resource</code> implementations where possible.</p>\n</blockquote>\n<blockquote>\n<p>In contrast to other <code>Resource</code> implementations, this is a descriptor for an <em>already opened</em> resource - therefore returning <code>true</code> from <code>isOpen()</code>.</p>\n</blockquote>\n<blockquote>\n<p>Do not use an <code>InputStreamResource</code> if you need to keep the resource descriptor somewhere, or <strong>if you need to read from a stream multiple times</strong>.</p>\n</blockquote>\n"}],"owner":{"account_id":1466235,"reputation":1427,"user_id":1378965,"display_name":"dgregory"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8083,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":58051624,"answer_count":2,"score":9,"last_activity_date":1699454565,"creation_date":1569172528,"question_id":58051623,"body_markdown":"I want to download and save a file in local directory from server by Spring-OpenFeign with zero-copy.\r\n\r\nNaive download method as following:\r\n\r\n```java\r\nimport org.apache.commons.io.FileUtils\r\n\r\n@GetMapping(&quot;/api/v1/files&quot;)\r\nResponseEntity&lt;byte[]&gt; getFile(@RequestParam(value = &quot;key&quot;) String key) {\r\n    ResponseEntity&lt;byte[]&gt; resp = getFile(&quot;filename.txt&quot;)\r\n    File fs = new File(&quot;/opt/test&quot;)\r\n    FileUtils.write(file, resp.getBody())\r\n}\r\n```\r\n\r\nIn this code, data flow will be like this `feign Internal Stream -&gt; Buffer -&gt; ByteArray -&gt; Buffer -&gt; File`\r\n\r\nHow can I downalod and save a file memory-efficiently and faster way?","title":"How to get InputStream via Spring-Feign?","body":"<p>I want to download and save a file in local directory from server by Spring-OpenFeign with zero-copy.</p>\n<p>Naive download method as following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.apache.commons.io.FileUtils\n\n@GetMapping(&quot;/api/v1/files&quot;)\nResponseEntity&lt;byte[]&gt; getFile(@RequestParam(value = &quot;key&quot;) String key) {\n    ResponseEntity&lt;byte[]&gt; resp = getFile(&quot;filename.txt&quot;)\n    File fs = new File(&quot;/opt/test&quot;)\n    FileUtils.write(file, resp.getBody())\n}\n</code></pre>\n<p>In this code, data flow will be like this <code>feign Internal Stream -&gt; Buffer -&gt; ByteArray -&gt; Buffer -&gt; File</code></p>\n<p>How can I downalod and save a file memory-efficiently and faster way?</p>\n"},{"tags":["java","spring-boot","caching","caffeine-cache"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1699454758,"post_id":77446499,"comment_id":136533692,"body_markdown":"You are caching both `HttpStatus` and `GuestResponse` in the same cache, that is obviously not going to work.","body":"You are caching both <code>HttpStatus</code> and <code>GuestResponse</code> in the same cache, that is obviously not going to work."}],"owner":{"account_id":25092294,"reputation":23,"user_id":18943824,"display_name":"asayke"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699454231,"creation_date":1699454219,"question_id":77446499,"body_markdown":"    \r\n```\r\n    @GetMapping(&quot;/{id}&quot;)\r\n    @Cacheable(value = &quot;guests&quot;, key = &quot;#id&quot;)\r\n    @RolesAllowed({&quot;MANAGER&quot;, &quot;ADMIN&quot;})\r\n    public ResponseEntity&lt;GuestResponse&gt; findById(@PathVariable(&quot;id&quot;) Long id) {\r\n        return ResponseEntity.ok(guestService.findById(id));\r\n    }\r\n\r\n    @CachePut(value = &quot;guests&quot;, key = &quot;#id&quot;)\r\n    @PutMapping(&quot;/{id}&quot;)\r\n    @RolesAllowed({&quot;MANAGER&quot;, &quot;ADMIN&quot;})\r\n    public ResponseEntity&lt;HttpStatus&gt; update(@RequestBody Map&lt;Object, Object&gt; fields, @PathVariable(&quot;id&quot;) Long id) {\r\n        guestService.update(id, fields);\r\n        return ResponseEntity.ok(HttpStatus.OK);\r\n    }\r\n```\r\n\r\nThe object is normally cached by id, but after @CachePut, although changes in the database occur, it is no longer possible to find the object from the cache.  In response, I get 200 without a body.","title":"@Cacheable object is lost in cache after @CachePut","body":"<pre><code>    @GetMapping(&quot;/{id}&quot;)\n    @Cacheable(value = &quot;guests&quot;, key = &quot;#id&quot;)\n    @RolesAllowed({&quot;MANAGER&quot;, &quot;ADMIN&quot;})\n    public ResponseEntity&lt;GuestResponse&gt; findById(@PathVariable(&quot;id&quot;) Long id) {\n        return ResponseEntity.ok(guestService.findById(id));\n    }\n\n    @CachePut(value = &quot;guests&quot;, key = &quot;#id&quot;)\n    @PutMapping(&quot;/{id}&quot;)\n    @RolesAllowed({&quot;MANAGER&quot;, &quot;ADMIN&quot;})\n    public ResponseEntity&lt;HttpStatus&gt; update(@RequestBody Map&lt;Object, Object&gt; fields, @PathVariable(&quot;id&quot;) Long id) {\n        guestService.update(id, fields);\n        return ResponseEntity.ok(HttpStatus.OK);\n    }\n</code></pre>\n<p>The object is normally cached by id, but after @CachePut, although changes in the database occur, it is no longer possible to find the object from the cache.  In response, I get 200 without a body.</p>\n"},{"tags":["java","time-complexity"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1698533643,"post_id":77381312,"comment_id":136418334,"body_markdown":"*O(N)* by inspection, ignoring the ArrayList and the sort. The second test is redundant, as is the second add. I don’t know who thinks this isn’t about software development, but it is.","body":"<i>O(N)</i> by inspection, ignoring the ArrayList and the sort. The second test is redundant, as is the second add. I don’t know who thinks this isn’t about software development, but it is."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1698620759,"post_id":77381312,"comment_id":136425233,"body_markdown":"A question: Which Stack Exchange site is best for Big O and related questions on working code. Is it Stack Overflow or one of the others?","body":"A question: Which Stack Exchange site is best for Big O and related questions on working code. Is it Stack Overflow or one of the others?"}],"answers":[{"comments":[{"owner":{"account_id":17476274,"reputation":25137,"user_id":12671057,"display_name":"Kelly Bundy"},"score":0,"creation_date":1698587642,"post_id":77381859,"comment_id":136421789,"body_markdown":"Surely you can simplify log √n. And since you&#39;re talking about algorithm variations anyway, might as well suggest one that&#39;s simply O(√n).","body":"Surely you can simplify log √n. And since you&#39;re talking about algorithm variations anyway, might as well suggest one that&#39;s simply O(√n)."},{"owner":{"account_id":17476274,"reputation":25137,"user_id":12671057,"display_name":"Kelly Bundy"},"score":0,"creation_date":1698588724,"post_id":77381859,"comment_id":136421915,"body_markdown":"Btw I found it irritating when you claimed *&quot;comparison sort, which runs in O(n log n)&quot;*. The sort&#39;s runtime depends on the length on the list, which you hadn&#39;t said anything about yet. Can&#39;t just say O(n log n) when we have no idea how n relates to the length of the list. If the list had length n^2, then sorting it would *not* be O(n log n) and your claim would be wrong. You&#39;d better say *&quot;runs in O(m log m), where m is the length of the list&quot;*. And then discuss how large m is.","body":"Btw I found it irritating when you claimed <i>&quot;comparison sort, which runs in O(n log n)&quot;</i>. The sort&#39;s runtime depends on the length on the list, which you hadn&#39;t said anything about yet. Can&#39;t just say O(n log n) when we have no idea how n relates to the length of the list. If the list had length n^2, then sorting it would <i>not</i> be O(n log n) and your claim would be wrong. You&#39;d better say <i>&quot;runs in O(m log m), where m is the length of the list&quot;</i>. And then discuss how large m is."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1698621137,"post_id":77381859,"comment_id":136425266,"body_markdown":"@KellyBundy Thank you for the feedback. In writing the original edition, I thought it would make the answer more interesting if I showed my erroneous thinking based on a quick look at the code, and then realizing my error.","body":"@KellyBundy Thank you for the feedback. In writing the original edition, I thought it would make the answer more interesting if I showed my erroneous thinking based on a quick look at the code, and then realizing my error."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1698633729,"post_id":77381859,"comment_id":136426027,"body_markdown":"Edits to the answer are welcome, especially corrections to the math.","body":"Edits to the answer are welcome, especially corrections to the math."},{"owner":{"account_id":17476274,"reputation":25137,"user_id":12671057,"display_name":"Kelly Bundy"},"score":0,"creation_date":1698656307,"post_id":77381859,"comment_id":136428195,"body_markdown":"Yeah, I figured you did that intentionally for that reason, I just don&#39;t think it works well when it&#39;s *erroneous*. When it&#39;s just *suboptimal*, I think it can work well and I&#39;ve probably done that myself sometimes. That is, establish something suboptimal and then go &quot;But wait! Actually...&quot;.","body":"Yeah, I figured you did that intentionally for that reason, I just don&#39;t think it works well when it&#39;s <i>erroneous</i>. When it&#39;s just <i>suboptimal</i>, I think it can work well and I&#39;ve probably done that myself sometimes. That is, establish something suboptimal and then go &quot;But wait! Actually...&quot;."},{"owner":{"account_id":17476274,"reputation":25137,"user_id":12671057,"display_name":"Kelly Bundy"},"score":2,"creation_date":1698657256,"post_id":77381859,"comment_id":136428375,"body_markdown":"About the math (not confident enough to edit): [Apparently](https://en.wikipedia.org/wiki/Divisor_function#Approximate_growth_rate?wprov=sfla1) the number of divisors is o(n^e) for any e &gt; 0. So let&#39;s use n^(1/4). Then the sorting is `O(n^(1/4) log n^(1/4))` = `O(n^(1/4) log n)` = `O(n^(1/2) / n^(1/4) * log n)` and since n^(1/4) grows faster than log n, we have that sorting is O(n^(1/2)). And thus the loop and the sorting and the total are O(√n). But it would be simpler if they first collected only the small divisors and then added their large partners so it&#39;s sorted without sorting.","body":"About the math (not confident enough to edit): <a href=\"https://en.wikipedia.org/wiki/Divisor_function#Approximate_growth_rate?wprov=sfla1\" rel=\"nofollow noreferrer\">Apparently</a> the number of divisors is o(n^e) for any e &gt; 0. So let&#39;s use n^(1/4). Then the sorting is <code>O(n^(1&#47;4) log n^(1&#47;4))</code> = <code>O(n^(1&#47;4) log n)</code> = <code>O(n^(1&#47;2) &#47; n^(1&#47;4) * log n)</code> and since n^(1/4) grows faster than log n, we have that sorting is O(n^(1/2)). And thus the loop and the sorting and the total are O(√n). But it would be simpler if they first collected only the small divisors and then added their large partners so it&#39;s sorted without sorting."}],"tags":[],"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698769658,"creation_date":1698547999,"answer_id":77381859,"question_id":77381312,"body_markdown":"There&#39;s more to the problem than is obvious at first glance. \r\n\r\nThere are two parts to look at: The time complexity of the `for` loop, and that of the call to `Collections.sort (List list)`. \r\n\r\nIf the number of iterations of the `for` loop is measured, the loop will run in *n^0.5* iterations. That is &quot;fractional power&quot; time, \r\nwhich is *O(n^c), 0 &lt; c &lt; 1*. That could also be expressed as *O(n^(1/c)), 1 &lt; c*.\r\n\r\nEach step within the block controlled by the loop is *O(1)*, so that doesn&#39;t change the time complexity. [*]\r\n\r\n`Collections.sort (List list)` uses a comparison sort, which runs in *O(m log m)* time, where *m* is the size of `list`.  In this case, *m=f(n)*, where *f* is a function that returns the number of factors of *n*. \r\n\r\nThe math for that is beyond Old Dog Programmer. But, it&#39;s not possible for the `for` loop in the original question to put more than `2*Math.sqrt(n)` elements into `list`. Let&#39;s take that as the worst case, although the actual worst case would be smaller.\r\n\r\nSo, it looks like the sort will need *2√n * log2 (2*√n)* comparisons in the worst case. That should be *O(√n * log (√n))*. \r\n\r\nIn the &quot;competition&quot; between the loop and the sort, which dominates? Since *√n log √n &gt; √n*, it&#39;s the sort.\r\n\r\nSo, your code runs in *O(√n log √n)* time complexity, or &quot;fractional power times log of fractional power&quot;. \r\n\r\n**Note**\r\n\r\nAdding a single element to the end of an `ArrayList` is normally *O(1)*. Occasionally, the size of the list will equal the capacity. When that happens, to add another element, the list will have to be resized. That will take *O(s)* time, where *s* is the previous size. One could prevent resizing by changing `List&lt;Integer&gt; list = new ArrayList&lt;&gt;();` to `List&lt;Integer&gt; list = new ArrayList&lt;&gt;((int) Math.sqrt(n)*2);`","title":"Whats the time complexity of the below code?","body":"<p>There's more to the problem than is obvious at first glance.</p>\n<p>There are two parts to look at: The time complexity of the <code>for</code> loop, and that of the call to <code>Collections.sort (List list)</code>.</p>\n<p>If the number of iterations of the <code>for</code> loop is measured, the loop will run in <em>n^0.5</em> iterations. That is &quot;fractional power&quot; time,\nwhich is <em>O(n^c), 0 &lt; c &lt; 1</em>. That could also be expressed as <em>O(n^(1/c)), 1 &lt; c</em>.</p>\n<p>Each step within the block controlled by the loop is <em>O(1)</em>, so that doesn't change the time complexity. [*]</p>\n<p><code>Collections.sort (List list)</code> uses a comparison sort, which runs in <em>O(m log m)</em> time, where <em>m</em> is the size of <code>list</code>.  In this case, <em>m=f(n)</em>, where <em>f</em> is a function that returns the number of factors of <em>n</em>.</p>\n<p>The math for that is beyond Old Dog Programmer. But, it's not possible for the <code>for</code> loop in the original question to put more than <code>2*Math.sqrt(n)</code> elements into <code>list</code>. Let's take that as the worst case, although the actual worst case would be smaller.</p>\n<p>So, it looks like the sort will need <em>2√n * log2 (2</em>√n)* comparisons in the worst case. That should be <em>O(√n * log (√n))</em>.</p>\n<p>In the &quot;competition&quot; between the loop and the sort, which dominates? Since <em>√n log √n &gt; √n</em>, it's the sort.</p>\n<p>So, your code runs in <em>O(√n log √n)</em> time complexity, or &quot;fractional power times log of fractional power&quot;.</p>\n<p><strong>Note</strong></p>\n<p>Adding a single element to the end of an <code>ArrayList</code> is normally <em>O(1)</em>. Occasionally, the size of the list will equal the capacity. When that happens, to add another element, the list will have to be resized. That will take <em>O(s)</em> time, where <em>s</em> is the previous size. One could prevent resizing by changing <code>List&lt;Integer&gt; list = new ArrayList&lt;&gt;();</code> to <code>List&lt;Integer&gt; list = new ArrayList&lt;&gt;((int) Math.sqrt(n)*2);</code></p>\n"}],"owner":{"account_id":21640326,"reputation":1,"user_id":15962649,"display_name":"Nil"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"answer_count":1,"score":-4,"last_activity_date":1699453797,"creation_date":1698528918,"question_id":77381312,"body_markdown":"```\r\npublic class Solution{\r\n    public static List&lt; Integer &gt; printDivisors(int n) {\r\n        List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\r\n        for(int i=1;i&lt;=Math.sqrt(n);i++){\r\n            if(n%i==0){\r\n                list.add(i);\r\n                if(n/i !=i)\r\n                {\r\n                    list.add(n/i);\r\n                }\r\n            }\r\n        }\r\n        Collections.sort(list);\r\n        return list;\r\n    }\r\n}\r\n```\r\n\r\n\r\nI wrote this code to get all the divisors of a number for this i have used a Arraylist for storing all the divisor and then sorted the list using **Collections.sort(list)**. I am still trying to learn how to answer the time complexity of the code.What would be the time complexity of the code?\r\n\r\n","title":"Whats the time complexity of the below code?","body":"<pre><code>public class Solution{\n    public static List&lt; Integer &gt; printDivisors(int n) {\n        List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\n        for(int i=1;i&lt;=Math.sqrt(n);i++){\n            if(n%i==0){\n                list.add(i);\n                if(n/i !=i)\n                {\n                    list.add(n/i);\n                }\n            }\n        }\n        Collections.sort(list);\n        return list;\n    }\n}\n</code></pre>\n<p>I wrote this code to get all the divisors of a number for this i have used a Arraylist for storing all the divisor and then sorted the list using <strong>Collections.sort(list)</strong>. I am still trying to learn how to answer the time complexity of the code.What would be the time complexity of the code?</p>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1699446202,"post_id":77445494,"comment_id":136531781,"body_markdown":"functionally, none. point is, the declaration already sets the type, the instantiation will use that. List&lt;String&gt; list = new ArrayList&lt;&gt;(); would be better, though","body":"functionally, none. point is, the declaration already sets the type, the instantiation will use that. List&lt;String&gt; list = new ArrayList&lt;&gt;(); would be better, though"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1699448574,"post_id":77445494,"comment_id":136532212,"body_markdown":"Does this answer your question? [What is the diamond operator in Java?](https://stackoverflow.com/questions/16352816/what-is-the-diamond-operator-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/16352816/what-is-the-diamond-operator-in-java\">What is the diamond operator in Java?</a>"}],"answers":[{"comments":[{"owner":{"account_id":173785,"reputation":930,"user_id":402723,"display_name":"Raul Lapeira Herrero"},"score":0,"creation_date":1699465765,"post_id":77445686,"comment_id":136536233,"body_markdown":"This is what I was looking for, someone less lazy than me that would look at the byte code, thanks","body":"This is what I was looking for, someone less lazy than me that would look at the byte code, thanks"}],"tags":[],"owner":{"account_id":15303603,"reputation":46,"user_id":11041145,"display_name":"Dawid Witaszek"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1699447883,"creation_date":1699447883,"answer_id":77445686,"question_id":77445494,"body_markdown":"No difference. Java has a feature that is called &quot;type inferring&quot;. It basically means that it checks if it can guess a type of a generic object. If you have a type assigned on the left side of the equation, java will guess the type on the right side. In compiled code, both statements look alike","title":"Difference between specifying the generic type in the instantiation and not doing so","body":"<p>No difference. Java has a feature that is called &quot;type inferring&quot;. It basically means that it checks if it can guess a type of a generic object. If you have a type assigned on the left side of the equation, java will guess the type on the right side. In compiled code, both statements look alike</p>\n"},{"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1699449885,"post_id":77445850,"comment_id":136532454,"body_markdown":"This doesn&#39;t answer the question, it is just a third alternative.","body":"This doesn&#39;t answer the question, it is just a third alternative."}],"tags":[],"owner":{"account_id":20542016,"reputation":1,"user_id":15076753,"display_name":"Nickolay Fain"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1699453554,"creation_date":1699449305,"answer_id":77445850,"question_id":77445494,"body_markdown":"You can use this syntax:\r\n\r\n    var list = new ArrayList&lt;String&gt;();\r\n\r\nIt&#39;s the same like:\r\n\r\n    List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n\r\nNo any difference.","title":"Difference between specifying the generic type in the instantiation and not doing so","body":"<p>You can use this syntax:</p>\n<pre><code>var list = new ArrayList&lt;String&gt;();\n</code></pre>\n<p>It's the same like:</p>\n<pre><code>List&lt;String&gt; list = new ArrayList&lt;&gt;();\n</code></pre>\n<p>No any difference.</p>\n"}],"owner":{"account_id":173785,"reputation":930,"user_id":402723,"display_name":"Raul Lapeira Herrero"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77445686,"answer_count":2,"score":2,"last_activity_date":1699453554,"creation_date":1699446079,"question_id":77445494,"body_markdown":"From a practical point of view, is there a difference between this two lines?: \r\n\r\n    ArrayList&lt;String&gt; list=new ArrayList&lt;String&gt;();  \r\n    \r\n    ArrayList&lt;String&gt; list=new ArrayList&lt;&gt;();  \r\n\r\n ","title":"Difference between specifying the generic type in the instantiation and not doing so","body":"<p>From a practical point of view, is there a difference between this two lines?:</p>\n<pre><code>ArrayList&lt;String&gt; list=new ArrayList&lt;String&gt;();  \n\nArrayList&lt;String&gt; list=new ArrayList&lt;&gt;();  \n</code></pre>\n"},{"tags":["java","spring"],"owner":{"account_id":27793189,"reputation":11,"user_id":21219271,"display_name":"IgorPiven"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699453551,"creation_date":1699451780,"question_id":77446166,"body_markdown":"My Spring Boot application reads data from Kafka, validates and sends to another Kafka. There might be some mistakes in incoming messages while validation, and these messages come to DltHandler. Metrics are gathered by Prometheus and sent to Grafana. Each time when an invalid message comes, the counter of Dlt topic messages in Actuator Prometheus increases. \r\n\r\nThe fact is that when Dlt topic is read and all messages removed, the metric of Dlt topic messages stores the last value of messages q-ty. \r\n\r\nWhat is needed - to reset this counter to zero after all messages are read and removed.\r\n\r\nI have tried MeterRegistry.get but have no idea how to find correct metric name in Actuator Prometheus endpoint.\r\n\r\nFor example: \r\n\r\n    # HELP kafka_consumer_fetch_manager_records_consumed_total The total number of records consumed\r\n    # TYPE kafka_consumer_fetch_manager_records_consumed_total counter kafka_consumer_fetch_manager_records_consumed_total{client_id=&quot;consumer-data2-9&quot;,kafka_version=&quot;3.1.2&quot;,spring_id=&quot;not.managed.by.Spring.consumer-data2-9&quot;,}\r\n    21.0\r\n\r\nWhat is metric name to be put in MeterRegistry.get(metric name) and how to proceed to reset this metric into zero?","title":"How to get a metric name from Actuator Prometheus endpoint","body":"<p>My Spring Boot application reads data from Kafka, validates and sends to another Kafka. There might be some mistakes in incoming messages while validation, and these messages come to DltHandler. Metrics are gathered by Prometheus and sent to Grafana. Each time when an invalid message comes, the counter of Dlt topic messages in Actuator Prometheus increases.</p>\n<p>The fact is that when Dlt topic is read and all messages removed, the metric of Dlt topic messages stores the last value of messages q-ty.</p>\n<p>What is needed - to reset this counter to zero after all messages are read and removed.</p>\n<p>I have tried MeterRegistry.get but have no idea how to find correct metric name in Actuator Prometheus endpoint.</p>\n<p>For example:</p>\n<pre><code># HELP kafka_consumer_fetch_manager_records_consumed_total The total number of records consumed\n# TYPE kafka_consumer_fetch_manager_records_consumed_total counter kafka_consumer_fetch_manager_records_consumed_total{client_id=&quot;consumer-data2-9&quot;,kafka_version=&quot;3.1.2&quot;,spring_id=&quot;not.managed.by.Spring.consumer-data2-9&quot;,}\n21.0\n</code></pre>\n<p>What is metric name to be put in MeterRegistry.get(metric name) and how to proceed to reset this metric into zero?</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1699431634,"post_id":77443244,"comment_id":136529129,"body_markdown":"Certainly doesn&#39;t happen with the current version. Since Oxygen is 6 years and 22 releases old I don&#39;t remember much about it but I don&#39;t think this was a normal feature in that release. Do you use the &quot;mylyn&quot; plug-ins - they had things to focus on particular methods.","body":"Certainly doesn&#39;t happen with the current version. Since Oxygen is 6 years and 22 releases old I don&#39;t remember much about it but I don&#39;t think this was a normal feature in that release. Do you use the &quot;mylyn&quot; plug-ins - they had things to focus on particular methods."},{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1699434692,"post_id":77443244,"comment_id":136529662,"body_markdown":"Double click to open the file, then perform a second, separate search of just that file to find the method you&#39;re looking for.","body":"Double click to open the file, then perform a second, separate search of just that file to find the method you&#39;re looking for."}],"answers":[{"comments":[{"owner":{"account_id":1201314,"reputation":990,"user_id":1171926,"accept_rate":50,"display_name":"David Rector"},"score":0,"creation_date":1699575280,"post_id":77446416,"comment_id":136552905,"body_markdown":"I thought I had seen and unchecked the &quot;Only show selected Java element&quot; option. But apparently I didn&#39;t do it or didn&#39;t do it right. That was the answer.","body":"I thought I had seen and unchecked the &quot;Only show selected Java element&quot; option. But apparently I didn&#39;t do it or didn&#39;t do it right. That was the answer."}],"tags":[],"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1699453546,"creation_date":1699453546,"answer_id":77446416,"question_id":77443244,"body_markdown":"This sounds normal if you are in the Java **Browsing** perspective, or if the **Java**/**Editor** preference page has the &quot;Only show the selected Java element&quot; setting enabled.","title":"How can I get Eclipse to open the entire file when opening search results?","body":"<p>This sounds normal if you are in the Java <strong>Browsing</strong> perspective, or if the <strong>Java</strong>/<strong>Editor</strong> preference page has the &quot;Only show the selected Java element&quot; setting enabled.</p>\n"}],"owner":{"account_id":1201314,"reputation":990,"user_id":1171926,"accept_rate":50,"display_name":"David Rector"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77446416,"answer_count":1,"score":2,"last_activity_date":1699453546,"creation_date":1699425015,"question_id":77443244,"body_markdown":"I&#39;m using what I think is an older version of the Eclipse IDE because of a requirement at work to use it. It&#39;s version Oxygen.3a Release (4.7.3a). When I do a file search and get a list of search results, I can double-click to open a result. The problem is that if I double-click on the result itself, the editor limits me to edit the function with the search result or some area around the result and I can&#39;t scroll to the top and bottom of the file; The editor limits what I can see and edit. If I double-click to open the file then I am, of course, not on a line with a search result. I can&#39;t seem to find a setting or preference to alter this behavior. I would like to open the entire file but be on the line with the search result. Does anyone know of a setting to change this behavior?\r\n\r\nIf there is no way to stop this behavior, is there a way to make the editor show the entire file once the file is open?\r\n\r\nI have only been using .java files. I attached an image showing what happens when I open a search result and you can see that there is no scroll bar because the entire function fits in the window. The line numbers are accurate and the rest of the file above and below this function are not visible and I can&#39;t get to them without closing and reopening the file.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/O67Kv.jpg","title":"How can I get Eclipse to open the entire file when opening search results?","body":"<p>I'm using what I think is an older version of the Eclipse IDE because of a requirement at work to use it. It's version Oxygen.3a Release (4.7.3a). When I do a file search and get a list of search results, I can double-click to open a result. The problem is that if I double-click on the result itself, the editor limits me to edit the function with the search result or some area around the result and I can't scroll to the top and bottom of the file; The editor limits what I can see and edit. If I double-click to open the file then I am, of course, not on a line with a search result. I can't seem to find a setting or preference to alter this behavior. I would like to open the entire file but be on the line with the search result. Does anyone know of a setting to change this behavior?</p>\n<p>If there is no way to stop this behavior, is there a way to make the editor show the entire file once the file is open?</p>\n<p>I have only been using .java files. I attached an image showing what happens when I open a search result and you can see that there is no scroll bar because the entire function fits in the window. The line numbers are accurate and the rest of the file above and below this function are not visible and I can't get to them without closing and reopening the file.</p>\n<p><a href=\"https://i.stack.imgur.com/O67Kv.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/O67Kv.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","json","avro"],"owner":{"account_id":1410257,"reputation":2118,"user_id":1337007,"accept_rate":72,"display_name":"ghostrider"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699453241,"creation_date":1699453241,"question_id":77446374,"body_markdown":"I have below `avro json` string, however while doing the deserialization to `MyClass.java` using the `ObjectMapper` I am not able to deserialize it and the Object is created with all `null` values. How do I deserialize below json string to an `AVRO` class?\r\n\r\n    a.b.c.MyClass: {\r\n    \r\n    id: 1,\r\n    name : &quot;Saurabh&quot;\r\n    \r\n    }\r\n\r\n**MyClass.java (Generated AVRO class of type SpecificRecordBase)**\r\n\r\n    class MyClass \r\n    {\r\n    int id;\r\n    String name;\r\n    }","title":"Deserializing Avro json to AVRO class","body":"<p>I have below <code>avro json</code> string, however while doing the deserialization to <code>MyClass.java</code> using the <code>ObjectMapper</code> I am not able to deserialize it and the Object is created with all <code>null</code> values. How do I deserialize below json string to an <code>AVRO</code> class?</p>\n<pre><code>a.b.c.MyClass: {\n\nid: 1,\nname : &quot;Saurabh&quot;\n\n}\n</code></pre>\n<p><strong>MyClass.java (Generated AVRO class of type SpecificRecordBase)</strong></p>\n<pre><code>class MyClass \n{\nint id;\nString name;\n}\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","barcode","barcode-scanner"],"comments":[{"owner":{"account_id":15168430,"reputation":173,"user_id":10945276,"display_name":"roediGERhard"},"score":0,"creation_date":1699458782,"post_id":77446370,"comment_id":136534747,"body_markdown":"According to a previous SO question (https://stackoverflow.com/questions/2658554/using-graphics2d-to-overlay-text-on-a-bufferedimage-and-return-a-bufferedimage/2658663#2658663) you&#39;ll have to print your text by yourself via Graphics2D (https://stackoverflow.com/questions/2658554/using-graphics2d-to-overlay-text-on-a-bufferedimage-and-return-a-bufferedimage/2658663#2658663)","body":"According to a previous SO question (<a href=\"https://stackoverflow.com/questions/2658554/using-graphics2d-to-overlay-text-on-a-bufferedimage-and-return-a-bufferedimage/2658663#2658663\" title=\"using graphics2d to overlay text on a bufferedimage and return a bufferedimage\">stackoverflow.com/questions/2658554/&hellip;</a>) you&#39;ll have to print your text by yourself via Graphics2D (<a href=\"https://stackoverflow.com/questions/2658554/using-graphics2d-to-overlay-text-on-a-bufferedimage-and-return-a-bufferedimage/2658663#2658663\" title=\"using graphics2d to overlay text on a bufferedimage and return a bufferedimage\">stackoverflow.com/questions/2658554/&hellip;</a>)"}],"owner":{"account_id":29205294,"reputation":3,"user_id":22374520,"display_name":"Akhilesh Dhiman"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699453222,"creation_date":1699453222,"question_id":77446370,"body_markdown":"I want to generate bar code with text size 16 characters. Now I&#39;m using google zxing library for generating bar code.\r\n\r\nIt is generating the bar code with character size of 16 but it will not print the entered data below the bar code.\r\n\r\n\r\n```\r\n\r\nString text = &quot;SKCN_031123_0003&quot;;\r\n\r\nMultiFormatWriter writer = new MultiFormatWriter();\r\n\r\nint width = 100;\r\n\r\nint height = 100;\r\n\r\nBitMatrix bitMatrix = writer.encode(text, BarcodeFormat.CODE_128, height, width);\r\n\r\nMatrixToImageWriter.writeToStream(bitMatrix, &quot;png&quot;, new FileOutputStream(new File(&quot;E:/Projects/visa-admin/userdocs/barcode.png&quot;)));\r\n\r\n```\r\n\r\nThis code generates bar code like: \r\n\r\n[Need to print the text below the bar code image](https://i.stack.imgur.com/ObQJZ.png)\r\n\r\n\r\nI&#39;m trying to find solution but they are all related to CODE_13 and UPCAWriter().\r\n\r\nI&#39;ve trying to resolve it so long but I won&#39;t found anything useful.\r\n\r\nAlso, is there any other way to generate barcode more than 16 characters.\r\n\r\nThanks in advance.\r\n","title":"How to generate bar code using google zxing library in java?","body":"<p>I want to generate bar code with text size 16 characters. Now I'm using google zxing library for generating bar code.</p>\n<p>It is generating the bar code with character size of 16 but it will not print the entered data below the bar code.</p>\n<pre><code>\nString text = &quot;SKCN_031123_0003&quot;;\n\nMultiFormatWriter writer = new MultiFormatWriter();\n\nint width = 100;\n\nint height = 100;\n\nBitMatrix bitMatrix = writer.encode(text, BarcodeFormat.CODE_128, height, width);\n\nMatrixToImageWriter.writeToStream(bitMatrix, &quot;png&quot;, new FileOutputStream(new File(&quot;E:/Projects/visa-admin/userdocs/barcode.png&quot;)));\n\n</code></pre>\n<p>This code generates bar code like:</p>\n<p><a href=\"https://i.stack.imgur.com/ObQJZ.png\" rel=\"nofollow noreferrer\">Need to print the text below the bar code image</a></p>\n<p>I'm trying to find solution but they are all related to CODE_13 and UPCAWriter().</p>\n<p>I've trying to resolve it so long but I won't found anything useful.</p>\n<p>Also, is there any other way to generate barcode more than 16 characters.</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","android","firebase","firebase-storage"],"comments":[{"owner":{"account_id":426109,"reputation":302042,"user_id":807126,"display_name":"Doug Stevenson"},"score":1,"creation_date":1699453091,"post_id":77446313,"comment_id":136533227,"body_markdown":"You can&#39;t upload the contents of a remote URL directly to storage.  You have to download the contents of the remote URL locally first, then after the download is complete, upload that to storage.","body":"You can&#39;t upload the contents of a remote URL directly to storage.  You have to download the contents of the remote URL locally first, then after the download is complete, upload that to storage."},{"owner":{"account_id":29538162,"reputation":1,"user_id":22637398,"display_name":"Kitlolz012"},"score":0,"creation_date":1699456474,"post_id":77446313,"comment_id":136534152,"body_markdown":"@DougStevenson how to do that bro?","body":"@DougStevenson how to do that bro?"}],"owner":{"account_id":29538162,"reputation":1,"user_id":22637398,"display_name":"Kitlolz012"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1699453043,"answer_count":0,"score":0,"last_activity_date":1699453131,"creation_date":1699452804,"question_id":77446313,"body_markdown":"This is The error \r\n```\r\nStorageException has occurred.\r\n                                                  An unknown error occurred, please check the HTTP result code and inner exception for server response.\r\n                                                   Code: -13000 HttpResult: 0\r\n2023-11-08 20:39:54.126 18618-18847 StorageException    com.example.gypsy          E No content provider: https://firebasestorage.googleapis.com/v0/b/gypsy-c4ec5.appspot.com/o/hotel_images%2F-Nh0_I8puSSL2tdjs0nt%2Fimage2?alt=media&amp;token=ef333fea-15e9-49bb-b099-7177be6f7506\r\n                                                  java.io.FileNotFoundException: No content provider: https://firebasestorage.googleapis.com/v0/b/gypsy-c4ec5.appspot.com/o/hotel_images%2F-Nh0_I8puSSL2tdjs0nt%2Fimage2?alt=media&amp;token=ef333fea-15e9-49bb-b099-7177be6f7506\r\n                                                  \tat android.content.ContentResolver.openTypedAssetFileDescriptor(ContentResolver.java:1978)\r\n                                                  \tat android.content.ContentResolver.openAssetFileDescriptor(ContentResolver.java:1807)\r\n                                                  \tat android.content.ContentResolver.openInputStream(ContentResolver.java:1484)\r\n                                                  \tat com.google.firebase.storage.UploadTask.&lt;init&gt;(UploadTask.java:153)\r\n                                                  \tat com.google.firebase.storage.StorageReference.putFile(StorageReference.java:241)\r\n                                                  \tat com.example.gypsy.EditHotelActivity$6.onDataChange(EditHotelActivity.java:346)\r\n                                                  \tat com.google.firebase.database.Query$1.onDataChange(Query.java:191)\r\n                                                  \tat com.google.firebase.database.core.ValueEventRegistration.fireEvent(ValueEventRegistration.java:75)\r\n                                                  \tat com.google.firebase.database.core.view.DataEvent.fire(DataEvent.java:63)\r\n                                                  \tat com.google.firebase.database.core.view.EventRaiser$1.run(EventRaiser.java:55)\r\n                                                  \tat android.os.Handler.handleCallback(Handler.java:938)\r\n                                                  \tat android.os.Handler.dispatchMessage(Handler.java:99)\r\n                                                  \tat android.os.Looper.loop(Looper.java:255)\r\n                                                  \tat android.app.ActivityThread.main(ActivityThread.java:8212)\r\n                                                  \tat java.lang.reflect.Method.invoke(Native Method)\r\n                                                  \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:632)\r\n                                                  \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1049)\r\n```\r\n\r\nthe thing is the first save changes of images is  ok then when i edit it and add some images its not displaying on the app and this error pop op in log cat... also in firebase storage and realtime database the image is not sysnching \r\n\r\n\r\nheres my code : \r\n\r\nfor create \r\n\r\n```\r\nprivate void create(String userId, String hotelName, String hotelAddress, String hotelDescription, String hotelContact, String hotelEmail, List&lt;String&gt; roomTypes,\r\n                        String cancellationPolicy, List&lt;Uri&gt; imageUris, String amenitiesHotel, String gcashNumber, String gcashName) {\r\n        DatabaseReference hotelsRef = databaseReference.child(&quot;hotels&quot;);\r\n\r\n        DatabaseReference hotelRef = hotelsRef.push();\r\n        String hotelId = hotelRef.getKey();\r\n\r\n        List&lt;String&gt; imageUrls = new ArrayList&lt;&gt;();\r\n        AtomicInteger uploadCount = new AtomicInteger(0);\r\n\r\n        for (int i = 0; i &lt; imageUris.size(); i++) {\r\n            final int finalIndex = i;\r\n            Uri imageUri = imageUris.get(i);\r\n            StorageReference imageRef = storageReference.child(&quot;hotel_images/&quot; + hotelId + &quot;/image&quot; + (i + 1));\r\n            Log.d(TAG, &quot;Image Storage Reference: &quot; + imageRef.toString());\r\n            UploadTask uploadTask = imageRef.putFile(imageUri);\r\n\r\n            uploadTask.addOnFailureListener(new MyFailureListener());\r\n            uploadTask.addOnSuccessListener(taskSnapshot -&gt; {\r\n\r\n                imageRef.getDownloadUrl().addOnCompleteListener(new OnCompleteListener&lt;Uri&gt;() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task&lt;Uri&gt; task) {\r\n                        String url = &quot;https://&quot; + task.getResult().getEncodedAuthority() + task.getResult().getEncodedPath() + &quot;?alt=media&amp;token=&quot; + task.getResult().getQueryParameters(&quot;token&quot;).get(0);\r\n                        imageUrls.add(url);\r\n\r\n                        if (uploadCount.incrementAndGet() == imageUris.size()) {\r\n                            save(hotelId, imageUrls, hotelName, hotelAddress, hotelDescription, hotelContact,\r\n                                    hotelEmail, roomTypes, cancellationPolicy, amenitiesHotel, gcashNumber, gcashName);\r\n                            saveImages(hotelId, imageUrls);\r\n\r\n                            adapter.setUris(imageUris);\r\n                            adapter.notifyDataSetChanged();\r\n                        }\r\n                    }\r\n                });\r\n            }).addOnFailureListener(e -&gt; {\r\n                Log.e(TAG, &quot;failed image uploadnumber: &quot; + (finalIndex + 1) + &quot;: &quot; + e.getMessage());\r\n            });\r\n        }\r\n    }\r\n\r\n```\r\nand for update \r\n\r\n\r\n```\r\n private void update(String hotelName, String hotelAddress, String hotelDescription, List&lt;Uri&gt; imageUris, String hotelContact,\r\n                        String hotelEmail, List&lt;String&gt; roomTypes, String cancellationPolicy, String hotelId, String amenitiesHotel,\r\n                        String gcashNumber, String gcashName) {\r\n        DatabaseReference hotelsRef = databaseReference.child(&quot;hotels&quot;);\r\n        Query query = hotelsRef.orderByChild(&quot;user_id&quot;).equalTo(userId);\r\n        query.addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull com.google.firebase.database.DataSnapshot dataSnapshot) {\r\n                if (dataSnapshot.exists()) {\r\n                    for (com.google.firebase.database.DataSnapshot childSnapshot : dataSnapshot.getChildren()) {\r\n                        String hotelId = childSnapshot.getKey();\r\n\r\n                        DatabaseReference hotelRef = hotelsRef.child(hotelId);\r\n                        hotelRef.child(&quot;name&quot;).setValue(hotelName);\r\n                        hotelRef.child(&quot;address&quot;).setValue(hotelAddress);\r\n                        hotelRef.child(&quot;description&quot;).setValue(hotelDescription);\r\n                        hotelRef.child(&quot;contact&quot;).setValue(hotelContact);\r\n                        hotelRef.child(&quot;email&quot;).setValue(hotelEmail);\r\n                        hotelRef.child(&quot;cancellationPolicy&quot;).setValue(cancellationPolicy);\r\n                        hotelRef.child(&quot;amenities&quot;).setValue(amenitiesHotel);\r\n                        hotelRef.child(&quot;gcashNumber&quot;).setValue(gcashNumber);\r\n                        hotelRef.child(&quot;gcashName&quot;).setValue(gcashName);\r\n                        saveRoomTypes(hotelId, roomTypes);\r\n\r\n                        if (!imageUris.isEmpty()) {\r\n                            List&lt;String&gt; imageUrls = new ArrayList&lt;&gt;();\r\n\r\n                            for (int i = 0; i &lt; imageUris.size(); i++) {\r\n                                if (imageUris.get(i) != null) {\r\n                                    Uri imageUri = imageUris.get(i);\r\n\r\n                                        StorageReference imageRef = storageReference.child(&quot;hotel_images/&quot; + hotelId + &quot;/image&quot; + (i + 1));\r\n                                        if (imageUri != null) {\r\n                                        UploadTask uploadTask = imageRef.putFile(imageUri);\r\n                                        // Rest of your code for uploading the image\r\n\r\n                                        uploadTask.addOnFailureListener(new OnFailureListener() {\r\n                                            @Override\r\n                                            public void onFailure(@NonNull Exception e) {\r\n                                                Log.e(&quot;image upload&quot;, &quot;Error during upload: &quot; + e.getMessage());\r\n                                            }\r\n                                        });\r\n\r\n                                        uploadTask.addOnFailureListener(new MyFailureListener());\r\n                                        uploadTask.addOnSuccessListener(taskSnapshot -&gt; imageRef.getDownloadUrl().addOnSuccessListener(downloadUri -&gt; {\r\n                                            String imageUrl = downloadUri.toString();\r\n                                            imageUrls.add(imageUrl);\r\n\r\n                                            if (imageUrls.size() == imageUris.size()) {\r\n                                                saveImages(hotelId, imageUrls);\r\n                                            }\r\n                                        })).addOnFailureListener(e -&gt; {\r\n                                            Log.e(&quot;image upload&quot;, &quot;error&quot;);\r\n                                            Log.e(&quot;image upload&quot;, &quot;Firebase Storage Error: &quot; + e.getMessage());\r\n                                        });\r\n                                    } else {\r\n                                        // Handle the case where imageUri is null, log an error, or show a message.\r\n                                        Log.e(TAG, &quot;ImageUri is null. Handle this case accordingly.&quot;);\r\n                                        // You can also display an error message to the user if necessary.\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n                Log.e(&quot;update&quot;, &quot;error&quot; + databaseError.getMessage());\r\n            }\r\n        });\r\n    }\r\n\r\n```\r\nthis is for accessing gallery \r\n\r\n```\r\n private void openGallery() {\r\n        \r\n        Intent galleryIntent = new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI);\r\n        galleryLauncher.launch(galleryIntent);\r\n    }\r\n```\r\n\r\n```\r\ngalleryLauncher = registerForActivityResult(\r\n                new ActivityResultContracts.StartActivityForResult(),\r\n                result -&gt; {\r\n                    if (result.getResultCode() == Activity.RESULT_OK) {\r\n                        Intent data = result.getData();\r\n                        if (data != null &amp;&amp; data.getData() != null) {\r\n                            imageUri = data.getData();\r\n                            imageUris.add(imageUri);\r\n\r\n                            adapter.notifyDataSetChanged();\r\n                        }\r\n                    }\r\n                }\r\n        );\r\n```\r\n\r\n\r\n\r\nI try all my best but still cant solve the problem, I try to change the rules the permission etc but still cant solve the problem i hope you can help me  ","title":"how can i solve this java.io.FileNotFoundException: No content provider: on my project","body":"<p>This is The error</p>\n<pre><code>StorageException has occurred.\n                                                  An unknown error occurred, please check the HTTP result code and inner exception for server response.\n                                                   Code: -13000 HttpResult: 0\n2023-11-08 20:39:54.126 18618-18847 StorageException    com.example.gypsy          E No content provider: https://firebasestorage.googleapis.com/v0/b/gypsy-c4ec5.appspot.com/o/hotel_images%2F-Nh0_I8puSSL2tdjs0nt%2Fimage2?alt=media&amp;token=ef333fea-15e9-49bb-b099-7177be6f7506\n                                                  java.io.FileNotFoundException: No content provider: https://firebasestorage.googleapis.com/v0/b/gypsy-c4ec5.appspot.com/o/hotel_images%2F-Nh0_I8puSSL2tdjs0nt%2Fimage2?alt=media&amp;token=ef333fea-15e9-49bb-b099-7177be6f7506\n                                                    at android.content.ContentResolver.openTypedAssetFileDescriptor(ContentResolver.java:1978)\n                                                    at android.content.ContentResolver.openAssetFileDescriptor(ContentResolver.java:1807)\n                                                    at android.content.ContentResolver.openInputStream(ContentResolver.java:1484)\n                                                    at com.google.firebase.storage.UploadTask.&lt;init&gt;(UploadTask.java:153)\n                                                    at com.google.firebase.storage.StorageReference.putFile(StorageReference.java:241)\n                                                    at com.example.gypsy.EditHotelActivity$6.onDataChange(EditHotelActivity.java:346)\n                                                    at com.google.firebase.database.Query$1.onDataChange(Query.java:191)\n                                                    at com.google.firebase.database.core.ValueEventRegistration.fireEvent(ValueEventRegistration.java:75)\n                                                    at com.google.firebase.database.core.view.DataEvent.fire(DataEvent.java:63)\n                                                    at com.google.firebase.database.core.view.EventRaiser$1.run(EventRaiser.java:55)\n                                                    at android.os.Handler.handleCallback(Handler.java:938)\n                                                    at android.os.Handler.dispatchMessage(Handler.java:99)\n                                                    at android.os.Looper.loop(Looper.java:255)\n                                                    at android.app.ActivityThread.main(ActivityThread.java:8212)\n                                                    at java.lang.reflect.Method.invoke(Native Method)\n                                                    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:632)\n                                                    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1049)\n</code></pre>\n<p>the thing is the first save changes of images is  ok then when i edit it and add some images its not displaying on the app and this error pop op in log cat... also in firebase storage and realtime database the image is not sysnching</p>\n<p>heres my code :</p>\n<p>for create</p>\n<pre><code>private void create(String userId, String hotelName, String hotelAddress, String hotelDescription, String hotelContact, String hotelEmail, List&lt;String&gt; roomTypes,\n                        String cancellationPolicy, List&lt;Uri&gt; imageUris, String amenitiesHotel, String gcashNumber, String gcashName) {\n        DatabaseReference hotelsRef = databaseReference.child(&quot;hotels&quot;);\n\n        DatabaseReference hotelRef = hotelsRef.push();\n        String hotelId = hotelRef.getKey();\n\n        List&lt;String&gt; imageUrls = new ArrayList&lt;&gt;();\n        AtomicInteger uploadCount = new AtomicInteger(0);\n\n        for (int i = 0; i &lt; imageUris.size(); i++) {\n            final int finalIndex = i;\n            Uri imageUri = imageUris.get(i);\n            StorageReference imageRef = storageReference.child(&quot;hotel_images/&quot; + hotelId + &quot;/image&quot; + (i + 1));\n            Log.d(TAG, &quot;Image Storage Reference: &quot; + imageRef.toString());\n            UploadTask uploadTask = imageRef.putFile(imageUri);\n\n            uploadTask.addOnFailureListener(new MyFailureListener());\n            uploadTask.addOnSuccessListener(taskSnapshot -&gt; {\n\n                imageRef.getDownloadUrl().addOnCompleteListener(new OnCompleteListener&lt;Uri&gt;() {\n                    @Override\n                    public void onComplete(@NonNull Task&lt;Uri&gt; task) {\n                        String url = &quot;https://&quot; + task.getResult().getEncodedAuthority() + task.getResult().getEncodedPath() + &quot;?alt=media&amp;token=&quot; + task.getResult().getQueryParameters(&quot;token&quot;).get(0);\n                        imageUrls.add(url);\n\n                        if (uploadCount.incrementAndGet() == imageUris.size()) {\n                            save(hotelId, imageUrls, hotelName, hotelAddress, hotelDescription, hotelContact,\n                                    hotelEmail, roomTypes, cancellationPolicy, amenitiesHotel, gcashNumber, gcashName);\n                            saveImages(hotelId, imageUrls);\n\n                            adapter.setUris(imageUris);\n                            adapter.notifyDataSetChanged();\n                        }\n                    }\n                });\n            }).addOnFailureListener(e -&gt; {\n                Log.e(TAG, &quot;failed image uploadnumber: &quot; + (finalIndex + 1) + &quot;: &quot; + e.getMessage());\n            });\n        }\n    }\n\n</code></pre>\n<p>and for update</p>\n<pre><code> private void update(String hotelName, String hotelAddress, String hotelDescription, List&lt;Uri&gt; imageUris, String hotelContact,\n                        String hotelEmail, List&lt;String&gt; roomTypes, String cancellationPolicy, String hotelId, String amenitiesHotel,\n                        String gcashNumber, String gcashName) {\n        DatabaseReference hotelsRef = databaseReference.child(&quot;hotels&quot;);\n        Query query = hotelsRef.orderByChild(&quot;user_id&quot;).equalTo(userId);\n        query.addListenerForSingleValueEvent(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull com.google.firebase.database.DataSnapshot dataSnapshot) {\n                if (dataSnapshot.exists()) {\n                    for (com.google.firebase.database.DataSnapshot childSnapshot : dataSnapshot.getChildren()) {\n                        String hotelId = childSnapshot.getKey();\n\n                        DatabaseReference hotelRef = hotelsRef.child(hotelId);\n                        hotelRef.child(&quot;name&quot;).setValue(hotelName);\n                        hotelRef.child(&quot;address&quot;).setValue(hotelAddress);\n                        hotelRef.child(&quot;description&quot;).setValue(hotelDescription);\n                        hotelRef.child(&quot;contact&quot;).setValue(hotelContact);\n                        hotelRef.child(&quot;email&quot;).setValue(hotelEmail);\n                        hotelRef.child(&quot;cancellationPolicy&quot;).setValue(cancellationPolicy);\n                        hotelRef.child(&quot;amenities&quot;).setValue(amenitiesHotel);\n                        hotelRef.child(&quot;gcashNumber&quot;).setValue(gcashNumber);\n                        hotelRef.child(&quot;gcashName&quot;).setValue(gcashName);\n                        saveRoomTypes(hotelId, roomTypes);\n\n                        if (!imageUris.isEmpty()) {\n                            List&lt;String&gt; imageUrls = new ArrayList&lt;&gt;();\n\n                            for (int i = 0; i &lt; imageUris.size(); i++) {\n                                if (imageUris.get(i) != null) {\n                                    Uri imageUri = imageUris.get(i);\n\n                                        StorageReference imageRef = storageReference.child(&quot;hotel_images/&quot; + hotelId + &quot;/image&quot; + (i + 1));\n                                        if (imageUri != null) {\n                                        UploadTask uploadTask = imageRef.putFile(imageUri);\n                                        // Rest of your code for uploading the image\n\n                                        uploadTask.addOnFailureListener(new OnFailureListener() {\n                                            @Override\n                                            public void onFailure(@NonNull Exception e) {\n                                                Log.e(&quot;image upload&quot;, &quot;Error during upload: &quot; + e.getMessage());\n                                            }\n                                        });\n\n                                        uploadTask.addOnFailureListener(new MyFailureListener());\n                                        uploadTask.addOnSuccessListener(taskSnapshot -&gt; imageRef.getDownloadUrl().addOnSuccessListener(downloadUri -&gt; {\n                                            String imageUrl = downloadUri.toString();\n                                            imageUrls.add(imageUrl);\n\n                                            if (imageUrls.size() == imageUris.size()) {\n                                                saveImages(hotelId, imageUrls);\n                                            }\n                                        })).addOnFailureListener(e -&gt; {\n                                            Log.e(&quot;image upload&quot;, &quot;error&quot;);\n                                            Log.e(&quot;image upload&quot;, &quot;Firebase Storage Error: &quot; + e.getMessage());\n                                        });\n                                    } else {\n                                        // Handle the case where imageUri is null, log an error, or show a message.\n                                        Log.e(TAG, &quot;ImageUri is null. Handle this case accordingly.&quot;);\n                                        // You can also display an error message to the user if necessary.\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError databaseError) {\n                Log.e(&quot;update&quot;, &quot;error&quot; + databaseError.getMessage());\n            }\n        });\n    }\n\n</code></pre>\n<p>this is for accessing gallery</p>\n<pre><code> private void openGallery() {\n        \n        Intent galleryIntent = new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI);\n        galleryLauncher.launch(galleryIntent);\n    }\n</code></pre>\n<pre><code>galleryLauncher = registerForActivityResult(\n                new ActivityResultContracts.StartActivityForResult(),\n                result -&gt; {\n                    if (result.getResultCode() == Activity.RESULT_OK) {\n                        Intent data = result.getData();\n                        if (data != null &amp;&amp; data.getData() != null) {\n                            imageUri = data.getData();\n                            imageUris.add(imageUri);\n\n                            adapter.notifyDataSetChanged();\n                        }\n                    }\n                }\n        );\n</code></pre>\n<p>I try all my best but still cant solve the problem, I try to change the rules the permission etc but still cant solve the problem i hope you can help me</p>\n"},{"tags":["java","kotlin","openssl","cryptography","bouncycastle"],"comments":[{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":2,"creation_date":1699398291,"post_id":77441769,"comment_id":136526114,"body_markdown":"ECDSA is a way to perform DSA using Elliptic Curves; it is not a format and it is not compatible with RSA, obviously. DER is the Distinguished Encoding Rules; it is a way to encode ASN.1 defined data structures, but it is **not** specific to any format. And I tried to look up RPB and came up with nothing.","body":"ECDSA is a way to perform DSA using Elliptic Curves; it is not a format and it is not compatible with RSA, obviously. DER is the Distinguished Encoding Rules; it is a way to encode ASN.1 defined data structures, but it is <b>not</b> specific to any format. And I tried to look up RPB and came up with nothing."},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1699464504,"post_id":77441769,"comment_id":136535990,"body_markdown":"I did not vote down, but i could imagine that people vote it down because of the misunderstanding of the formats. Although annoying,  remember that the votes are not personal. I&#39;ve asked the same question when I was a new user but please understand that the downvoyers usually  not following the question.","body":"I did not vote down, but i could imagine that people vote it down because of the misunderstanding of the formats. Although annoying,  remember that the votes are not personal. I&#39;ve asked the same question when I was a new user but please understand that the downvoyers usually  not following the question."},{"owner":{"account_id":2938820,"reputation":1259,"user_id":2517182,"accept_rate":82,"display_name":"user2517182"},"score":0,"creation_date":1699890158,"post_id":77441769,"comment_id":136584424,"body_markdown":"Yea, not personal at all :-), just curious, so will try not to make the same mistakes.  Thanks","body":"Yea, not personal at all :-), just curious, so will try not to make the same mistakes.  Thanks"}],"answers":[{"tags":[],"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1699452869,"creation_date":1699445940,"answer_id":77445482,"question_id":77441769,"body_markdown":"&gt; // Public key PEM --&gt; already have this  \r\n&gt; openssl pkey -inform PEM -pubin -in pub.pem -text -noout\r\n\r\nNot really. Java `PublicKey.getEncoded()` -- or in Kotlin just `.encoded` -- is the X.509-SPKI _format_ publickey, which is the same format `openssl` uses. When you encode to base64 AND add linebreaks every 64 AND add a line `-----BEGIN PUBLIC KEY-----` before and a line `-----END PUBLIC KEY-----` after, THEN it is the same as OpenSSL PEM, which is also standard; see [RFC7468 section 2 and 13](https://www.rfc-editor.org/rfc/rfc7468#section-2). Depending on how you will use this file or data, you may get away without the linebreaks in the base64; not all programs require that. But most programs that use PEM do enforce the dash-BEGIN and dash-END lines.\r\n\r\n&gt; // Public key DER format --&gt; NEED THIS &lt;--  \r\n&gt; openssl rsa -pubin -inform PEM -in pub.pem -outform DER -out pub.der\r\n\r\nThis is trivial. Just skip the base64 encoding; the return from `PublicKey.getEncoded()` is exactly this format already (as `byte[]`).\r\n\r\n&gt; // Public key RPB format --&gt; no worries about this  \r\n&gt; openssl rsa -pubin -inform PEM -in pub.pem -outform RPB -out pub.rpb\r\n\r\nWhat is this openssl that you are using? Where/how did you get it? No &#39;real&#39; OpenSSL -- that is, from the OpenSSL project at www.openssl.org -- has such an option for `-outform`. I don&#39;t think LibreSSL does either, though I don&#39;t track it nearly as closely.\r\n\r\n&gt; // ECDSA  \r\n&gt; // Private key --&gt; already have this  \r\n&gt; openssl ecparam -genkey -out ecdsa_priv.pem -name prime256v1  \r\n&gt; // Public key --&gt; NEED THIS &lt;--  \r\n&gt; openssl ec -in ecdsa_priv.pem -pubout -out ecdsa_pub.pem  \r\n&gt; // Public key DER format --&gt; NEED THIS &lt;--  \r\n&gt; openssl ec -pubin -inform PEM -in ecdsa_pub.pem -outform DER -out ecdsa_pub.der  \r\n\r\nThese were generated from an EC key (or really keypair), NOT an RSA key. Note that although you used the filename ecdsa, the same keys are actually used for ECDSA and ECDH and possibly EQMQV; accordingly in Java you use `KeyPairGenerator|KeyFactory.getInstance(&quot;EC&quot;)` but `Signature.getInstance(&quot;ECDSA&quot;)` and `KeyAgreement.getInstance(&quot;ECDH&quot;)`. \r\n\r\nIf you have one of those key objects, i.e. one with interface `ECPrivateKey` not `RSAPrivateCrtKey`, and BouncyCastle, which your post suggests but doesn&#39;t actually state, you can tweak the method I recently wrote in https://stackoverflow.com/questions/77413281/extract-public-key-from-privatekeyinfo-with-bouncy-castle:\r\n\r\n        // import org.bouncycastle.asn1.pkcs.PrivateKeyInfo and org.bouncycastle.asn1.ASN1BitString\r\n        PrivateKeyInfo privinfo = PrivateKeyInfo.getInstance( ecprivkeyobject.getEncoded() );\r\n        ASN1BitString wrappt = org.bouncycastle.asn1.sec.ECPrivateKey.getInstance(privinfo.getPrivateKey().getOctets()).getPublicKey();\r\n        // use full name to avoid conflict with &#39;standard&#39; java.security.interfaces.ECPrivateKey\r\n        byte[] spki = new SubjectPublicKeyInfo(privinfo.getPrivateKeyAlgorithm(), wrappt).getEncoded() ));\r\n\r\nThat `byte[] spki` IS the openssl DER format for EC, and similar to RSA if you base64-encode, add linebreaks, and add BEGIN/END lines, that is the openssl (and standard = RFC7468) PEM format.\r\n\r\nAdded: also, your current method for RSA is unnecessarily roundabout. You don&#39;t need to create one `PrivateKey` for RSA, take its encoding, run that encoding through a `KeyFactory` with `PKCS8EncodedKeySpec` to produce a second `PrivateKey` that you cast to `RSAPrivateCrtKey`; instead you can just cast the original `PrivateKey` and use that to get the `modulus` and `publicExponent` to put in `RSAPublicKeySpec`. This case was also in the previous Q I linked.","title":"How to get the ECDSA, DER and RPB format from a RSA private key using kotlin","body":"<blockquote>\n<p>// Public key PEM --&gt; already have this<br />\nopenssl pkey -inform PEM -pubin -in pub.pem -text -noout</p>\n</blockquote>\n<p>Not really. Java <code>PublicKey.getEncoded()</code> -- or in Kotlin just <code>.encoded</code> -- is the X.509-SPKI <em>format</em> publickey, which is the same format <code>openssl</code> uses. When you encode to base64 AND add linebreaks every 64 AND add a line <code>-----BEGIN PUBLIC KEY-----</code> before and a line <code>-----END PUBLIC KEY-----</code> after, THEN it is the same as OpenSSL PEM, which is also standard; see <a href=\"https://www.rfc-editor.org/rfc/rfc7468#section-2\" rel=\"nofollow noreferrer\">RFC7468 section 2 and 13</a>. Depending on how you will use this file or data, you may get away without the linebreaks in the base64; not all programs require that. But most programs that use PEM do enforce the dash-BEGIN and dash-END lines.</p>\n<blockquote>\n<p>// Public key DER format --&gt; NEED THIS &lt;--<br />\nopenssl rsa -pubin -inform PEM -in pub.pem -outform DER -out pub.der</p>\n</blockquote>\n<p>This is trivial. Just skip the base64 encoding; the return from <code>PublicKey.getEncoded()</code> is exactly this format already (as <code>byte[]</code>).</p>\n<blockquote>\n<p>// Public key RPB format --&gt; no worries about this<br />\nopenssl rsa -pubin -inform PEM -in pub.pem -outform RPB -out pub.rpb</p>\n</blockquote>\n<p>What is this openssl that you are using? Where/how did you get it? No 'real' OpenSSL -- that is, from the OpenSSL project at <a href=\"http://www.openssl.org\" rel=\"nofollow noreferrer\">www.openssl.org</a> -- has such an option for <code>-outform</code>. I don't think LibreSSL does either, though I don't track it nearly as closely.</p>\n<blockquote>\n<p>// ECDSA<br />\n// Private key --&gt; already have this<br />\nopenssl ecparam -genkey -out ecdsa_priv.pem -name prime256v1<br />\n// Public key --&gt; NEED THIS &lt;--<br />\nopenssl ec -in ecdsa_priv.pem -pubout -out ecdsa_pub.pem<br />\n// Public key DER format --&gt; NEED THIS &lt;--<br />\nopenssl ec -pubin -inform PEM -in ecdsa_pub.pem -outform DER -out ecdsa_pub.der</p>\n</blockquote>\n<p>These were generated from an EC key (or really keypair), NOT an RSA key. Note that although you used the filename ecdsa, the same keys are actually used for ECDSA and ECDH and possibly EQMQV; accordingly in Java you use <code>KeyPairGenerator|KeyFactory.getInstance(&quot;EC&quot;)</code> but <code>Signature.getInstance(&quot;ECDSA&quot;)</code> and <code>KeyAgreement.getInstance(&quot;ECDH&quot;)</code>.</p>\n<p>If you have one of those key objects, i.e. one with interface <code>ECPrivateKey</code> not <code>RSAPrivateCrtKey</code>, and BouncyCastle, which your post suggests but doesn't actually state, you can tweak the method I recently wrote in <a href=\"https://stackoverflow.com/questions/77413281/extract-public-key-from-privatekeyinfo-with-bouncy-castle\">Extract public key from PrivateKeyInfo with Bouncy Castle</a>:</p>\n<pre><code>    // import org.bouncycastle.asn1.pkcs.PrivateKeyInfo and org.bouncycastle.asn1.ASN1BitString\n    PrivateKeyInfo privinfo = PrivateKeyInfo.getInstance( ecprivkeyobject.getEncoded() );\n    ASN1BitString wrappt = org.bouncycastle.asn1.sec.ECPrivateKey.getInstance(privinfo.getPrivateKey().getOctets()).getPublicKey();\n    // use full name to avoid conflict with 'standard' java.security.interfaces.ECPrivateKey\n    byte[] spki = new SubjectPublicKeyInfo(privinfo.getPrivateKeyAlgorithm(), wrappt).getEncoded() ));\n</code></pre>\n<p>That <code>byte[] spki</code> IS the openssl DER format for EC, and similar to RSA if you base64-encode, add linebreaks, and add BEGIN/END lines, that is the openssl (and standard = RFC7468) PEM format.</p>\n<p>Added: also, your current method for RSA is unnecessarily roundabout. You don't need to create one <code>PrivateKey</code> for RSA, take its encoding, run that encoding through a <code>KeyFactory</code> with <code>PKCS8EncodedKeySpec</code> to produce a second <code>PrivateKey</code> that you cast to <code>RSAPrivateCrtKey</code>; instead you can just cast the original <code>PrivateKey</code> and use that to get the <code>modulus</code> and <code>publicExponent</code> to put in <code>RSAPublicKeySpec</code>. This case was also in the previous Q I linked.</p>\n"}],"owner":{"account_id":2938820,"reputation":1259,"user_id":2517182,"accept_rate":82,"display_name":"user2517182"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1699452869,"creation_date":1699395084,"question_id":77441769,"body_markdown":"I have an RSA private key.  I would like to extract the public key in the following formats:\r\n\r\n 1. ECDSA\r\n 2. DER\r\n 3. RPB\r\n\r\nI have can get the RSA formatted public from RSA formatted private key with the following code.\r\n\r\n```\r\nimport java.security.KeyFactory\r\nimport java.security.PrivateKey\r\nimport java.security.PublicKey\r\nimport java.security.spec.PKCS8EncodedKeySpec\r\nimport java.security.spec.RSAPrivateCrtKeySpec\r\nimport java.security.interfaces.RSAPrivateCrtKey\r\nimport java.security.spec.RSAPublicKeySpec\r\nimport java.util.Base64\r\nimport java.security.KeyPair\r\nimport java.security.KeyPairGenerator\r\n\r\nconst val ALGORITHM = &quot;RSA&quot;\r\n\r\n\r\nfun generateKeyPair(): KeyPair {\r\n    val keyPairGenerator = KeyPairGenerator.getInstance(&quot;RSA&quot;)\r\n    keyPairGenerator.initialize(2048) // You can adjust the key size as needed\r\n    return keyPairGenerator.generateKeyPair()\r\n}\r\n\r\nfun generatePublicKey(privateKeyString: String): PublicKey {\r\n    try {\r\n        val kf = KeyFactory.getInstance(ALGORITHM)\r\n        val encodedPrivateKey = Base64.getDecoder().decode(privateKeyString)\r\n        val privateKeySpec = PKCS8EncodedKeySpec(encodedPrivateKey)\r\n        val rsaPrivateKey = kf.generatePrivate(privateKeySpec) as RSAPrivateCrtKey\r\n\r\n        val publicKeySpec = RSAPublicKeySpec(rsaPrivateKey.modulus, rsaPrivateKey.publicExponent)\r\n        return kf.generatePublic(publicKeySpec)\r\n    } catch (e: Exception) {\r\n        throw RuntimeException(e)\r\n    }\r\n}\r\n\r\nfun main() {\r\n    val keyPair = generateKeyPair()\r\n    // val publicKey: PublicKey = keyPair.public\r\n    val privateKey: PrivateKey = keyPair.private\r\n    // Test with a sample private key string\r\n    val privateKeyString = Base64.getEncoder().encodeToString(privateKey.encoded)\r\n    println(&quot;Generated Private Key: $privateKeyString&quot;)\r\n    //val privateKeyString = &quot;YOUR_PRIVATE_KEY_STRING_HERE&quot;\r\n    val publicKey = generatePublicKey(privateKeyString)\r\n    println(&quot;Generated Public Key: ${Base64.getEncoder().encodeToString(publicKey.encoded)}&quot;)\r\n}\r\n```\r\n\r\nBeing that `java.security.spec` has `RSAPublicKeySpec`, i thought there would be a `ECDSAPublicKeySpec`, `DERPublicKeySpec` and `RPBPublicKeySpec`.  But, I was mistaken.  There are other format type `PublicKeySpec`&#39;s though.\r\n\r\nI took a look at Bouncy Castle, but was unable to get the three formats, from private key (or transform to the three formats from RSA format).\r\n\r\nI am aware OpenSSL does everything I am asking in three commands with some flags.  I can not use OpenSSL, I need to do it in kotlin, without a OpenSSL wrapper.\r\n\r\nI believe there are Java Cryptography Extension (JCE) and Bouncy Castle (may check again) that extend some of the functionality of cryptography in Java.  But, before I visit/re-visit, I am coming to my trusty Stackoverflow community.\r\n\r\nUpdate:\r\n-------\r\n\r\nHere are the commands in OpenSSL that I am trying to recreate via Kotlin (and Java libraries).  Special emphasis on the comments in code that have **--&gt; NEED THIS &lt;--**\r\n```\r\n// Private key --&gt; already have this\r\nopenssl genrsa -out priv.pem 2048\r\n\r\n// Public key --&gt; already have this\r\nopenssl rsa -in priv.pem -pubout -out pub.pem\r\n\r\n// Public key PEM --&gt; already have this\r\nopenssl pkey -inform PEM -pubin -in pub.pem -text -noout\r\n\r\n// Public key DER format --&gt; NEED THIS &lt;--\r\nopenssl rsa -pubin -inform PEM -in pub.pem -outform DER -out pub.der\r\n\r\n// Public key RPB format --&gt; no worries about this\r\nopenssl rsa -pubin -inform PEM -in pub.pem -outform RPB -out pub.rpb\r\n\r\n// ECDSA\r\n// Private key --&gt; already have this\r\nopenssl ecparam -genkey -out ecdsa_priv.pem -name prime256v1\r\n\r\n// Public key --&gt; NEED THIS &lt;--\r\nopenssl ec -in ecdsa_priv.pem -pubout -out ecdsa_pub.pem\r\n\r\n// Public key DER format --&gt; NEED THIS &lt;--\r\nopenssl ec -pubin -inform PEM -in ecdsa_pub.pem -outform DER -out ecdsa_pub.der\r\n``` \r\n\r\n","title":"How to get the ECDSA, DER and RPB format from a RSA private key using kotlin","body":"<p>I have an RSA private key.  I would like to extract the public key in the following formats:</p>\n<ol>\n<li>ECDSA</li>\n<li>DER</li>\n<li>RPB</li>\n</ol>\n<p>I have can get the RSA formatted public from RSA formatted private key with the following code.</p>\n<pre><code>import java.security.KeyFactory\nimport java.security.PrivateKey\nimport java.security.PublicKey\nimport java.security.spec.PKCS8EncodedKeySpec\nimport java.security.spec.RSAPrivateCrtKeySpec\nimport java.security.interfaces.RSAPrivateCrtKey\nimport java.security.spec.RSAPublicKeySpec\nimport java.util.Base64\nimport java.security.KeyPair\nimport java.security.KeyPairGenerator\n\nconst val ALGORITHM = &quot;RSA&quot;\n\n\nfun generateKeyPair(): KeyPair {\n    val keyPairGenerator = KeyPairGenerator.getInstance(&quot;RSA&quot;)\n    keyPairGenerator.initialize(2048) // You can adjust the key size as needed\n    return keyPairGenerator.generateKeyPair()\n}\n\nfun generatePublicKey(privateKeyString: String): PublicKey {\n    try {\n        val kf = KeyFactory.getInstance(ALGORITHM)\n        val encodedPrivateKey = Base64.getDecoder().decode(privateKeyString)\n        val privateKeySpec = PKCS8EncodedKeySpec(encodedPrivateKey)\n        val rsaPrivateKey = kf.generatePrivate(privateKeySpec) as RSAPrivateCrtKey\n\n        val publicKeySpec = RSAPublicKeySpec(rsaPrivateKey.modulus, rsaPrivateKey.publicExponent)\n        return kf.generatePublic(publicKeySpec)\n    } catch (e: Exception) {\n        throw RuntimeException(e)\n    }\n}\n\nfun main() {\n    val keyPair = generateKeyPair()\n    // val publicKey: PublicKey = keyPair.public\n    val privateKey: PrivateKey = keyPair.private\n    // Test with a sample private key string\n    val privateKeyString = Base64.getEncoder().encodeToString(privateKey.encoded)\n    println(&quot;Generated Private Key: $privateKeyString&quot;)\n    //val privateKeyString = &quot;YOUR_PRIVATE_KEY_STRING_HERE&quot;\n    val publicKey = generatePublicKey(privateKeyString)\n    println(&quot;Generated Public Key: ${Base64.getEncoder().encodeToString(publicKey.encoded)}&quot;)\n}\n</code></pre>\n<p>Being that <code>java.security.spec</code> has <code>RSAPublicKeySpec</code>, i thought there would be a <code>ECDSAPublicKeySpec</code>, <code>DERPublicKeySpec</code> and <code>RPBPublicKeySpec</code>.  But, I was mistaken.  There are other format type <code>PublicKeySpec</code>'s though.</p>\n<p>I took a look at Bouncy Castle, but was unable to get the three formats, from private key (or transform to the three formats from RSA format).</p>\n<p>I am aware OpenSSL does everything I am asking in three commands with some flags.  I can not use OpenSSL, I need to do it in kotlin, without a OpenSSL wrapper.</p>\n<p>I believe there are Java Cryptography Extension (JCE) and Bouncy Castle (may check again) that extend some of the functionality of cryptography in Java.  But, before I visit/re-visit, I am coming to my trusty Stackoverflow community.</p>\n<h2>Update:</h2>\n<p>Here are the commands in OpenSSL that I am trying to recreate via Kotlin (and Java libraries).  Special emphasis on the comments in code that have <strong>--&gt; NEED THIS &lt;--</strong></p>\n<pre><code>// Private key --&gt; already have this\nopenssl genrsa -out priv.pem 2048\n\n// Public key --&gt; already have this\nopenssl rsa -in priv.pem -pubout -out pub.pem\n\n// Public key PEM --&gt; already have this\nopenssl pkey -inform PEM -pubin -in pub.pem -text -noout\n\n// Public key DER format --&gt; NEED THIS &lt;--\nopenssl rsa -pubin -inform PEM -in pub.pem -outform DER -out pub.der\n\n// Public key RPB format --&gt; no worries about this\nopenssl rsa -pubin -inform PEM -in pub.pem -outform RPB -out pub.rpb\n\n// ECDSA\n// Private key --&gt; already have this\nopenssl ecparam -genkey -out ecdsa_priv.pem -name prime256v1\n\n// Public key --&gt; NEED THIS &lt;--\nopenssl ec -in ecdsa_priv.pem -pubout -out ecdsa_pub.pem\n\n// Public key DER format --&gt; NEED THIS &lt;--\nopenssl ec -pubin -inform PEM -in ecdsa_pub.pem -outform DER -out ecdsa_pub.der\n</code></pre>\n"},{"tags":["java","gradle","build.gradle","gradle-task"],"owner":{"account_id":19933203,"reputation":3,"user_id":14606450,"display_name":"Dmitry Piskunov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699452647,"creation_date":1699452647,"question_id":77446291,"body_markdown":"guys, help me, please.\r\nI defined a task type into my `build.gradle`:\r\n\r\n```groovy\r\nclass BumpFrontendVersionTask extends DefaultTask {\r\n    @Internal String jsonFilePath\r\n\r\n    @TaskAction\r\n    void bumpFrontendVersion() {\r\n        def packageJsonPath = new File(jsonFilePath as String)\r\n        def parsedPackageJson = new JsonSlurper().parse(packageJsonPath)\r\n        parsedPackageJson.version = Optional.ofNullable(System.getenv(&#39;RELEASE_VERSION&#39;)).orElseGet { &#39;0.0.0&#39; }\r\n        def packageJson = new JsonBuilder(parsedPackageJson).toPrettyString()\r\n        def fileWriter = new FileWriter(packageJsonPath)\r\n        fileWriter.write(packageJson)\r\n        fileWriter.close()\r\n    }\r\n}\r\n```\r\nAlso I made a custom task:\r\n\r\n```\r\ntasks.register(&#39;bumpFrontendVersion&#39;, BumpFrontendVersionTask) {\r\n    description &#39;Task bumps frontend version with environment variable value&#39;\r\n    jsonFilePath &#39;frontend/package.json&#39;\r\n    jsonFilePath &#39;frontend/package-lock.json&#39;\r\n}\r\n```\r\nWhen I call this task `bumpFrontendVersion` it processes only 1 file (last one).\r\n\r\nWhat shall I change in my code to launch my task type twice from one custom task?","title":"Gradle: how to call task type twice from the custom task?","body":"<p>guys, help me, please.\nI defined a task type into my <code>build.gradle</code>:</p>\n<pre><code>class BumpFrontendVersionTask extends DefaultTask {\n    @Internal String jsonFilePath\n\n    @TaskAction\n    void bumpFrontendVersion() {\n        def packageJsonPath = new File(jsonFilePath as String)\n        def parsedPackageJson = new JsonSlurper().parse(packageJsonPath)\n        parsedPackageJson.version = Optional.ofNullable(System.getenv('RELEASE_VERSION')).orElseGet { '0.0.0' }\n        def packageJson = new JsonBuilder(parsedPackageJson).toPrettyString()\n        def fileWriter = new FileWriter(packageJsonPath)\n        fileWriter.write(packageJson)\n        fileWriter.close()\n    }\n}\n</code></pre>\n<p>Also I made a custom task:</p>\n<pre><code>tasks.register('bumpFrontendVersion', BumpFrontendVersionTask) {\n    description 'Task bumps frontend version with environment variable value'\n    jsonFilePath 'frontend/package.json'\n    jsonFilePath 'frontend/package-lock.json'\n}\n</code></pre>\n<p>When I call this task <code>bumpFrontendVersion</code> it processes only 1 file (last one).</p>\n<p>What shall I change in my code to launch my task type twice from one custom task?</p>\n"},{"tags":["java","inheritance","selenium"],"comments":[{"owner":{"account_id":3349713,"reputation":357,"user_id":2813985,"accept_rate":78,"display_name":"SanjayDVG"},"score":0,"creation_date":1484071355,"post_id":23782423,"comment_id":70355552,"body_markdown":"In Testng.xml include this  &lt;suite name = &quot;Test Suite&quot; parallel=&quot;false&quot; preserve-order=&quot;true&quot;&gt;\n\t&lt;test name = &quot;Regression Test Suite&quot;&gt;\n\t\t&lt;classes&gt;\n\t\t\t&lt;class name = &quot;Login&quot;/&gt;\n\t\t\t&lt;class name = &quot;AddtoCart&quot;/&gt;\n\t\t&lt;/classes&gt;\n\t&lt;/test&gt;\n&lt;/suite&gt;","body":"In Testng.xml include this  &lt;suite name = &quot;Test Suite&quot; parallel=&quot;false&quot; preserve-order=&quot;true&quot;&gt; \t&lt;test name = &quot;Regression Test Suite&quot;&gt; \t\t&lt;classes&gt; \t\t\t&lt;class name = &quot;Login&quot;/&gt; \t\t\t&lt;class name = &quot;AddtoCart&quot;/&gt; \t\t&lt;/classes&gt; \t&lt;/test&gt; &lt;/suite&gt;"}],"answers":[{"tags":[],"owner":{"account_id":10292926,"reputation":13,"user_id":7594123,"display_name":"Blackwidow"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1497987586,"creation_date":1497987586,"answer_id":44661706,"question_id":23782423,"body_markdown":"With TestNG Try use:\r\n\r\n    @Test(priority=1) (assign the position to execute)","title":"Inheritance in selenium webdriver using testng","body":"<p>With TestNG Try use:</p>\n\n<pre><code>@Test(priority=1) (assign the position to execute)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7527385,"reputation":2093,"user_id":5717031,"accept_rate":17,"display_name":"Mike ASP"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581658010,"creation_date":1581658010,"answer_id":60220465,"question_id":23782423,"body_markdown":"you never defined &#39;BeforeMethod&#39; method in your super class, just a observation.\r\n\r\n**TestNG** - Number 0 has the highest priority(it’ll be executed first) and the priority goes on based on the given number i.e., 0 has the highest priority than 1. 1 has the highest priority than 2 and so on.\r\n\r\npublic class TestNG_Priority_Annotations {\r\n\r\n    @Test(priority=6)\r\n    public void c_method(){\r\n    System.out.println(&quot;I&#39;m in method C&quot;);\r\n    }\r\n    @Test(priority=9)\r\n    public void b_method(){\r\n    System.out.println(&quot;I&#39;m in method B&quot;);\r\n    }\r\n    @Test(priority=1)\r\n    public void a_method(){\r\n    System.out.println(&quot;I&#39;m in method A&quot;);\r\n    }\r\n    @Test(priority=0)\r\n    public void e_method(){\r\n    System.out.println(&quot;I&#39;m in method E&quot;);\r\n    }\r\n    @Test(priority=3)\r\n    public void d_method(){\r\n    System.out.println(&quot;I&#39;m in method D&quot;);\r\n    }\r\n\r\n}\r\n\r\n**Output will be:** \r\n\r\nI&#39;m in method E\r\n\r\nI&#39;m in method A \r\n\r\nI&#39;m in method D \r\n\r\nI&#39;m in method C \r\n\r\nI&#39;m in method B","title":"Inheritance in selenium webdriver using testng","body":"<p>you never defined 'BeforeMethod' method in your super class, just a observation.</p>\n\n<p><strong>TestNG</strong> - Number 0 has the highest priority(it’ll be executed first) and the priority goes on based on the given number i.e., 0 has the highest priority than 1. 1 has the highest priority than 2 and so on.</p>\n\n<p>public class TestNG_Priority_Annotations {</p>\n\n<pre><code>@Test(priority=6)\npublic void c_method(){\nSystem.out.println(\"I'm in method C\");\n}\n@Test(priority=9)\npublic void b_method(){\nSystem.out.println(\"I'm in method B\");\n}\n@Test(priority=1)\npublic void a_method(){\nSystem.out.println(\"I'm in method A\");\n}\n@Test(priority=0)\npublic void e_method(){\nSystem.out.println(\"I'm in method E\");\n}\n@Test(priority=3)\npublic void d_method(){\nSystem.out.println(\"I'm in method D\");\n}\n</code></pre>\n\n<p>}</p>\n\n<p><strong>Output will be:</strong> </p>\n\n<p>I'm in method E</p>\n\n<p>I'm in method A </p>\n\n<p>I'm in method D </p>\n\n<p>I'm in method C </p>\n\n<p>I'm in method B</p>\n"}],"owner":{"account_id":4502277,"reputation":5,"user_id":3660547,"display_name":"user3660547"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9913,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1699452415,"creation_date":1400673200,"question_id":23782423,"body_markdown":"    package user;\r\n    \r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.chrome.ChromeDriver;\r\n    import org.testng.annotations.Test;\r\n    import org.testng.annotations.BeforeTest;\r\n    \r\n    public class Login {\r\n    \r\n    \tpublic WebDriver driver;\r\n    \t\r\n      @Test\r\n    \r\n      public void Signin() throws Exception   {\r\n    \t  \r\n    \t  driver.manage().window().maximize();\r\n    \t  Thread.sleep(5000);\r\n    \t  driver.navigate().refresh();\r\n    \t  driver.findElement(By.xpath(&quot;//div[@id=&#39;header&#39;]/div/div/ul/li[6]/a&quot;)).click();\r\n    \t  driver.findElement(By.id(&quot;Email&quot;)).sendKeys(&quot;test@gmail.com&quot;);\r\n    \t  driver.findElement(By.id(&quot;password&quot;)).sendKeys(&quot;123456&quot;);\r\n    \t  driver.findElement(By.xpath(&quot;//tr[5]/td[2]/input&quot;)).click();\r\n    \t  Thread.sleep(5000);\r\n    \t}\r\n    \r\n    \r\n      @BeforeTest\r\n     \r\n      public void BeforeTest() {\r\n    \r\n    \t System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;D:\\\\lib\\\\chromedriver.exe&quot;);\r\n    \t driver = new ChromeDriver();\r\n             driver.get(&quot;http://test.com/&quot;);\r\n      }\r\n\r\n\r\nINHERITANCE\r\n\r\n    package user;\r\n    \r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.WebDriver;\r\n    \r\n    import org.testng.annotations.Test;\r\n    \r\n    \r\n    public class Addtocart extends Login {\r\n    \r\n    \r\n    \tpublic WebDriver driver;\r\n    \r\n      @Test\r\n    \r\n      public void Cart() throws Exception {\r\n    \r\n    \t  Thread.sleep(5000);\r\n    \t  driver.findElement(By.xpath(&quot;//div[2]/div/div/a&quot;)).click();\r\n    \t  driver.findElement(By.xpath(&quot;//a[contains(@href, &#39;/Catalog/Featured&#39;)]&quot;)).click();\r\n    \t  driver.findElement(By.id(&quot;//div[4]/div/a/img&quot;)).click();\r\n    \t  driver.findElement(By.id(&quot;anchorAddToWishList&quot;)).click();*/\r\n      }\r\n     \r\n    \r\n     public static void main(String[] args) throws Exception{\r\n    \r\n    \t  Addtocart ac = new Addtocart();\r\n    \t  ac.BeforeMethod();\r\n              ac.Signin();\r\n    \t  ac.Cart();\r\n      }\r\n    }\r\n\r\nWhen i try to call the super class method first. the sub class method is calling first. How to call super class method initially\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Inheritance in selenium webdriver using testng","body":"<pre><code>package user;\n\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.testng.annotations.Test;\nimport org.testng.annotations.BeforeTest;\n\npublic class Login {\n\n    public WebDriver driver;\n\n  @Test\n\n  public void Signin() throws Exception   {\n\n      driver.manage().window().maximize();\n      Thread.sleep(5000);\n      driver.navigate().refresh();\n      driver.findElement(By.xpath(\"//div[@id='header']/div/div/ul/li[6]/a\")).click();\n      driver.findElement(By.id(\"Email\")).sendKeys(\"test@gmail.com\");\n      driver.findElement(By.id(\"password\")).sendKeys(\"123456\");\n      driver.findElement(By.xpath(\"//tr[5]/td[2]/input\")).click();\n      Thread.sleep(5000);\n    }\n\n\n  @BeforeTest\n\n  public void BeforeTest() {\n\n     System.setProperty(\"webdriver.chrome.driver\", \"D:\\\\lib\\\\chromedriver.exe\");\n     driver = new ChromeDriver();\n         driver.get(\"http://test.com/\");\n  }\n</code></pre>\n\n<p>INHERITANCE</p>\n\n<pre><code>package user;\n\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\n\nimport org.testng.annotations.Test;\n\n\npublic class Addtocart extends Login {\n\n\n    public WebDriver driver;\n\n  @Test\n\n  public void Cart() throws Exception {\n\n      Thread.sleep(5000);\n      driver.findElement(By.xpath(\"//div[2]/div/div/a\")).click();\n      driver.findElement(By.xpath(\"//a[contains(@href, '/Catalog/Featured')]\")).click();\n      driver.findElement(By.id(\"//div[4]/div/a/img\")).click();\n      driver.findElement(By.id(\"anchorAddToWishList\")).click();*/\n  }\n\n\n public static void main(String[] args) throws Exception{\n\n      Addtocart ac = new Addtocart();\n      ac.BeforeMethod();\n          ac.Signin();\n      ac.Cart();\n  }\n}\n</code></pre>\n\n<p>When i try to call the super class method first. the sub class method is calling first. How to call super class method initially</p>\n"},{"tags":["java","mqtt","mosquitto","paho"],"comments":[{"owner":{"account_id":7759314,"reputation":774,"user_id":5872574,"display_name":"rel"},"score":4,"creation_date":1588354587,"post_id":36729300,"comment_id":108871955,"body_markdown":"This might help: `mosquitto_sub -t &#39;#&#39; --remove-retained --retained-only`. See also: https://mosquitto.org/man/mosquitto_sub-1.html","body":"This might help: <code>mosquitto_sub -t &#39;#&#39; --remove-retained --retained-only</code>. See also: <a href=\"https://mosquitto.org/man/mosquitto_sub-1.html\" rel=\"nofollow noreferrer\">mosquitto.org/man/mosquitto_sub-1.html</a>"}],"answers":[{"comments":[{"owner":{"account_id":1046820,"reputation":2515,"user_id":1051634,"display_name":"kartben"},"score":1,"creation_date":1461100700,"post_id":36729560,"comment_id":61043185,"body_markdown":"Actually, first version will not work, as the message needs to be published with the retained flag set.","body":"Actually, first version will not work, as the message needs to be published with the retained flag set."},{"owner":{"account_id":3681561,"reputation":13782,"user_id":3066406,"accept_rate":40,"display_name":"JohnL"},"score":2,"creation_date":1461161002,"post_id":36729560,"comment_id":61073555,"body_markdown":"Deleting the persistence file turned out to be the option I really needed.","body":"Deleting the persistence file turned out to be the option I really needed."},{"owner":{"account_id":6528154,"reputation":251,"user_id":5050231,"display_name":"Tobias Holm"},"score":1,"creation_date":1499180572,"post_id":36729560,"comment_id":76794971,"body_markdown":"This is how I deleted the persistence file in Ubuntu 16.04:\n    `sudo service mosquitto stop`\n    `sudo rm /var/lib/mosquitto/mosquitto.db`\n    `sudo service mosquitto start`\nYou can check in your **mosquitto.conf** where your **persistence_file** is located.","body":"This is how I deleted the persistence file in Ubuntu 16.04:     <code>sudo service mosquitto stop</code>     <code>sudo rm &#47;var&#47;lib&#47;mosquitto&#47;mosquitto.db</code>     <code>sudo service mosquitto start</code> You can check in your <b>mosquitto.conf</b> where your <b>persistence_file</b> is located."},{"owner":{"account_id":236814,"reputation":55993,"user_id":504554,"accept_rate":100,"display_name":"hardillb"},"score":2,"creation_date":1499180730,"post_id":36729560,"comment_id":76795071,"body_markdown":"It is important to understand that deleting the persistence file also wipes out all queued messages and any persistent subscriptions. It is better to clear individual topics with publishing a null message in a production environment","body":"It is important to understand that deleting the persistence file also wipes out all queued messages and any persistent subscriptions. It is better to clear individual topics with publishing a null message in a production environment"},{"owner":{"account_id":3051234,"reputation":1076,"user_id":2585728,"accept_rate":67,"display_name":"JackWu"},"score":0,"creation_date":1512127234,"post_id":36729560,"comment_id":82141516,"body_markdown":"@TobiasHolm Sovle my problem! Thanks!!","body":"@TobiasHolm Sovle my problem! Thanks!!"}],"tags":[],"owner":{"account_id":236814,"reputation":55993,"user_id":504554,"accept_rate":100,"display_name":"hardillb"},"comment_count":5,"down_vote_count":1,"up_vote_count":10,"is_accepted":true,"score":9,"last_activity_date":1461100796,"creation_date":1461100335,"answer_id":36729560,"question_id":36729300,"body_markdown":"There are 2 options for this using the paho client code depending on which of the 2 `publish` methods you use.\r\n\r\n    MqttMessage msg = new MqttMessage(new byte[0]);\r\n    msg.setRetained(true);\r\n    client.publish(topic, msg);\r\n\r\nor\r\n\r\n    client.publish(topic, new byte[0],0,true);\r\n\r\n\r\nThe other option would be to stop mosquitto and delete the persistence file and restart","title":"How to clear ALL retained mqtt messages from Mosquitto?","body":"<p>There are 2 options for this using the paho client code depending on which of the 2 <code>publish</code> methods you use.</p>\n\n<pre><code>MqttMessage msg = new MqttMessage(new byte[0]);\nmsg.setRetained(true);\nclient.publish(topic, msg);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>client.publish(topic, new byte[0],0,true);\n</code></pre>\n\n<p>The other option would be to stop mosquitto and delete the persistence file and restart</p>\n"},{"comments":[{"owner":{"account_id":3862069,"reputation":809,"user_id":3199565,"display_name":"Gussoh"},"score":0,"creation_date":1485727012,"post_id":36729615,"comment_id":71033317,"body_markdown":"The python script doesnt seem to work with non-ascii topics or payloads. The shell script I just posted seems to work better.","body":"The python script doesnt seem to work with non-ascii topics or payloads. The shell script I just posted seems to work better."},{"owner":{"account_id":2845582,"reputation":1121,"user_id":2444082,"display_name":"Trevor"},"score":0,"creation_date":1499763481,"post_id":36729615,"comment_id":77033431,"body_markdown":"&quot;this script&quot; link is now 404","body":"&quot;this script&quot; link is now 404"}],"tags":[],"owner":{"account_id":1046820,"reputation":2515,"user_id":1051634,"display_name":"kartben"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1547052048,"creation_date":1461100517,"answer_id":36729615,"question_id":36729300,"body_markdown":"This should work:\r\n\r\n    client.publish(topic, new byte[]{}, 0, true);\r\n\r\nAlso, you may be interested in [this script][1] from Eclipse Paho Python, to clear a given topic hierarchy. You may want to implement a similar behavior in Java, but it looks like you may be looking for a one-off solution, so maybe just use the Python script :) \r\n\r\n\r\n  [1]: https://github.com/eclipse/paho.mqtt.python/blob/master/examples/client_mqtt_clear_retain.py","title":"How to clear ALL retained mqtt messages from Mosquitto?","body":"<p>This should work:</p>\n\n<pre><code>client.publish(topic, new byte[]{}, 0, true);\n</code></pre>\n\n<p>Also, you may be interested in <a href=\"https://github.com/eclipse/paho.mqtt.python/blob/master/examples/client_mqtt_clear_retain.py\" rel=\"nofollow noreferrer\">this script</a> from Eclipse Paho Python, to clear a given topic hierarchy. You may want to implement a similar behavior in Java, but it looks like you may be looking for a one-off solution, so maybe just use the Python script :) </p>\n"},{"comments":[{"owner":{"account_id":19381,"reputation":840,"user_id":45402,"accept_rate":86,"display_name":"moster67"},"score":0,"creation_date":1511253538,"post_id":41926378,"comment_id":81770422,"body_markdown":"Could you show how to modify the script to include username and password? When I run it, I get &quot;Connection Refused: not authorised&quot;. Thanks.","body":"Could you show how to modify the script to include username and password? When I run it, I get &quot;Connection Refused: not authorised&quot;. Thanks."},{"owner":{"account_id":3862069,"reputation":809,"user_id":3199565,"display_name":"Gussoh"},"score":1,"creation_date":1511340660,"post_id":41926378,"comment_id":81815042,"body_markdown":"Sure, add -u _username_ -P _password_ in the line to both the mosquitto_sub and mosquitto_pub","body":"Sure, add -u <i>username</i> -P <i>password</i> in the line to both the mosquitto_sub and mosquitto_pub"},{"owner":{"account_id":17381,"reputation":900,"user_id":38841,"display_name":"Robert J Berger"},"score":2,"creation_date":1546159927,"post_id":41926378,"comment_id":94790229,"body_markdown":"If your topic has spaces in it, you can change the command to:\n\n`mosquitto_sub -h $1 -t &quot;#&quot; -v | while read line; do mosquitto_pub  -h $1 -t &quot;${line% *}&quot; -r -n; done`\n\nThe change is to remove the `_` after `read line` and change `$line` to `${line% *}`","body":"If your topic has spaces in it, you can change the command to:  <code>mosquitto_sub -h $1 -t &quot;#&quot; -v | while read line; do mosquitto_pub  -h $1 -t &quot;${line% *}&quot; -r -n; done</code>  The change is to remove the <code>_</code> after <code>read line</code> and change <code>$line</code> to <code>${line% *}</code>"},{"owner":{"account_id":3862069,"reputation":809,"user_id":3199565,"display_name":"Gussoh"},"score":0,"creation_date":1546698779,"post_id":41926378,"comment_id":94940150,"body_markdown":"Cool Robert, I changed to your suggestion","body":"Cool Robert, I changed to your suggestion"}],"tags":[],"owner":{"account_id":3862069,"reputation":809,"user_id":3199565,"display_name":"Gussoh"},"comment_count":4,"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1687420523,"creation_date":1485726866,"answer_id":41926378,"question_id":36729300,"body_markdown":"Here is how to do it properly with a shell script. \r\n\r\n    #!/bin/sh\r\n    echo &quot;cleaning &quot; $1 &quot; :: usage: cleanmqtt &lt;host&gt;&quot;\r\n    mosquitto_sub -h $1 -t &quot;#&quot; -v --retained-only | while read line; do mosquitto_pub -h $1 -t &quot;${line% *}&quot; -r -n; done\r\n\r\nJust put it in a file called somthing like \r\n\r\n&gt; cleanmqtt.sh\r\n\r\nThen run\r\n\r\n    sh cleanmqtt.sh localhost\r\n\r\nThis solution is quite crude. You cant specify what to delete or anything.\r\nYou may have to abort with ctrl-c after you can assume that it has received all the messages.","title":"How to clear ALL retained mqtt messages from Mosquitto?","body":"<p>Here is how to do it properly with a shell script.</p>\n<pre><code>#!/bin/sh\necho &quot;cleaning &quot; $1 &quot; :: usage: cleanmqtt &lt;host&gt;&quot;\nmosquitto_sub -h $1 -t &quot;#&quot; -v --retained-only | while read line; do mosquitto_pub -h $1 -t &quot;${line% *}&quot; -r -n; done\n</code></pre>\n<p>Just put it in a file called somthing like</p>\n<blockquote>\n<p>cleanmqtt.sh</p>\n</blockquote>\n<p>Then run</p>\n<pre><code>sh cleanmqtt.sh localhost\n</code></pre>\n<p>This solution is quite crude. You cant specify what to delete or anything.\nYou may have to abort with ctrl-c after you can assume that it has received all the messages.</p>\n"},{"comments":[{"owner":{"account_id":236814,"reputation":55993,"user_id":504554,"accept_rate":100,"display_name":"hardillb"},"score":4,"creation_date":1560355392,"post_id":56565117,"comment_id":99711912,"body_markdown":"That just stops retained messages being stored, across restarts, it doesn&#39;t actually clear them (in a running broker)","body":"That just stops retained messages being stored, across restarts, it doesn&#39;t actually clear them (in a running broker)"},{"owner":{"account_id":10891924,"reputation":174,"user_id":8552788,"display_name":"Manav Akela"},"score":0,"creation_date":1560360652,"post_id":56565117,"comment_id":99714295,"body_markdown":"Agreed, for that remove/re-create db file (manually or by such code:file_operation) which is stored in persistence_location (or in my case /var/lib/mosquitto/mosquitto.db)","body":"Agreed, for that remove/re-create db file (manually or by such code:file_operation) which is stored in persistence_location (or in my case /var/lib/mosquitto/mosquitto.db)"}],"tags":[],"owner":{"account_id":10891924,"reputation":174,"user_id":8552788,"display_name":"Manav Akela"},"comment_count":2,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1560351376,"creation_date":1560351376,"answer_id":56565117,"question_id":36729300,"body_markdown":"If you are using the Mosquitto MQTT Broker, disable &quot;Retained messages&quot; using the official method, provided by Mosquitto\r\n\r\n**First find mosquitto.conf file**\r\n\r\n*(In my Ubuntu/EC2 instance it is stored in /etc/mosquitto directory, I assume your mosquitto.conf file path is /etc/mosquitto/mosquitto.conf)*\r\n\r\nEdit with your favorite text editor, mine is nano.\r\n\r\n    sudo nano /etc/mosquitto/mosquitto.conf\r\n\r\nand in that file replace &quot;persistence false&quot; in place of &quot;persistence true&quot;\r\n\r\n    persistence false\r\n\r\nNow save file *(if using nano press ctrl+o and then enter to save, ctrl+x to exit)*\r\n\r\nnow restart mosquitto using below commands\r\n\r\n    sudo service mosquitto stop\r\n    sudo service mosquitto start\r\n\r\n**Note:** If this config path does not exist in your case, find config file using this command-\r\n\r\n    sudo find / -name mosquitto.conf\r\n\r\n\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Tagbt.png","title":"How to clear ALL retained mqtt messages from Mosquitto?","body":"<p>If you are using the Mosquitto MQTT Broker, disable \"Retained messages\" using the official method, provided by Mosquitto</p>\n\n<p><strong>First find mosquitto.conf file</strong></p>\n\n<p><em>(In my Ubuntu/EC2 instance it is stored in /etc/mosquitto directory, I assume your mosquitto.conf file path is /etc/mosquitto/mosquitto.conf)</em></p>\n\n<p>Edit with your favorite text editor, mine is nano.</p>\n\n<pre><code>sudo nano /etc/mosquitto/mosquitto.conf\n</code></pre>\n\n<p>and in that file replace \"persistence false\" in place of \"persistence true\"</p>\n\n<pre><code>persistence false\n</code></pre>\n\n<p>Now save file <em>(if using nano press ctrl+o and then enter to save, ctrl+x to exit)</em></p>\n\n<p>now restart mosquitto using below commands</p>\n\n<pre><code>sudo service mosquitto stop\nsudo service mosquitto start\n</code></pre>\n\n<p><strong>Note:</strong> If this config path does not exist in your case, find config file using this command-</p>\n\n<pre><code>sudo find / -name mosquitto.conf\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Tagbt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Tagbt.png\" alt=\"enter image description here\"></a></p>\n"},{"comments":[{"owner":{"account_id":3862069,"reputation":809,"user_id":3199565,"display_name":"Gussoh"},"score":0,"creation_date":1599645222,"post_id":56838501,"comment_id":112834776,"body_markdown":"Nice! I added it. This also solves the ctrl-c issue. There is also a --remove-retained but I can&#39;t seem to understand how that works.","body":"Nice! I added it. This also solves the ctrl-c issue. There is also a --remove-retained but I can&#39;t seem to understand how that works."}],"tags":[],"owner":{"account_id":3706185,"reputation":21,"user_id":3084651,"display_name":"user3084651"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1561995533,"creation_date":1561995533,"answer_id":56838501,"question_id":36729300,"body_markdown":"Since I don&#39;t have enough points to comment, running\r\n```\r\n#!/bin/sh\r\necho &quot;cleaning &quot; $1 &quot; :: usage: cleanmqtt &lt;host&gt;&quot;\r\nmosquitto_sub -h $1 -t &quot;#&quot; -v | while read line; do mosquitto_pub -h $1 -t &quot;${line% *}&quot; -r -n; done\r\n```\r\ncould cause an infinite loop due to pub/sub delays. \r\nAdding `--retained-only` to `mosquitto_sub` seems to remove the infinite loop.","title":"How to clear ALL retained mqtt messages from Mosquitto?","body":"<p>Since I don't have enough points to comment, running</p>\n\n<pre><code>#!/bin/sh\necho \"cleaning \" $1 \" :: usage: cleanmqtt &lt;host&gt;\"\nmosquitto_sub -h $1 -t \"#\" -v | while read line; do mosquitto_pub -h $1 -t \"${line% *}\" -r -n; done\n</code></pre>\n\n<p>could cause an infinite loop due to pub/sub delays. \nAdding <code>--retained-only</code> to <code>mosquitto_sub</code> seems to remove the infinite loop.</p>\n"},{"tags":[],"owner":{"account_id":8104370,"reputation":11,"user_id":6106480,"display_name":"DrSlow"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1577919527,"creation_date":1577919527,"answer_id":59556788,"question_id":36729300,"body_markdown":"## for powershell users\r\n\r\nhad this issue on windows, so here with powershell. Mosquitto needs to be installed on the command host.\r\n\r\n### get retained messages\r\n\r\nI did not want to clear all retained messages. Example, only the ones containing &quot;octo&quot; in it&#39;s topic. Let&#39;s see what&#39;s there:\r\n\r\n    mosquitto_sub.exe -h &lt;mqtt host&gt; -v -u &lt;mqtt user&gt; -P &lt;mqtt password&gt; -t &#39;#&#39; --retained-only|\r\n    Select-String octo\r\n\r\n(replace mqtt host, user, password as needed)\r\n\r\n### delete retained messages\r\n\r\nuse the same search string here ( in this example &quot;octo&quot;):\r\n\r\n    mosquitto_sub.exe -h &lt;mqtt host&gt; -v -u &lt;mqtt user&gt; -P &lt;mqtt password&gt; -t &#39;#&#39; --retained-only|\r\n    Select-String octo |\r\n    Out-String -Stream|ForEach-Object -Process {$_.Split(&quot; &quot;)[0]}|\r\n    %{mosquitto_pub.exe -h &lt;mqtt host&gt; -u &lt;mqtt user&gt; -P &lt;mqtt password&gt; -t &quot;$_&quot; -r -n}\r\n\r\n\r\nAgain, replace all occurences of mqtt host, user, password.\r\n\r\nSimply check again with step 1 if anything is left :)\r\n  ","title":"How to clear ALL retained mqtt messages from Mosquitto?","body":"<h2>for powershell users</h2>\n\n<p>had this issue on windows, so here with powershell. Mosquitto needs to be installed on the command host.</p>\n\n<h3>get retained messages</h3>\n\n<p>I did not want to clear all retained messages. Example, only the ones containing \"octo\" in it's topic. Let's see what's there:</p>\n\n<pre><code>mosquitto_sub.exe -h &lt;mqtt host&gt; -v -u &lt;mqtt user&gt; -P &lt;mqtt password&gt; -t '#' --retained-only|\nSelect-String octo\n</code></pre>\n\n<p>(replace mqtt host, user, password as needed)</p>\n\n<h3>delete retained messages</h3>\n\n<p>use the same search string here ( in this example \"octo\"):</p>\n\n<pre><code>mosquitto_sub.exe -h &lt;mqtt host&gt; -v -u &lt;mqtt user&gt; -P &lt;mqtt password&gt; -t '#' --retained-only|\nSelect-String octo |\nOut-String -Stream|ForEach-Object -Process {$_.Split(\" \")[0]}|\n%{mosquitto_pub.exe -h &lt;mqtt host&gt; -u &lt;mqtt user&gt; -P &lt;mqtt password&gt; -t \"$_\" -r -n}\n</code></pre>\n\n<p>Again, replace all occurences of mqtt host, user, password.</p>\n\n<p>Simply check again with step 1 if anything is left :)</p>\n"},{"tags":[],"owner":{"account_id":9867706,"reputation":145,"user_id":7308581,"display_name":"Kenny"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669144218,"creation_date":1630876322,"answer_id":69067244,"question_id":36729300,"body_markdown":"I don&#39;t have enough rep to add a simple comment. The bash script is great! The edge case I ran into is one where multiple spaces exist, such as a date stamp:\r\n\r\n    bob/was/here/time 2021-08-31 01:52:51\r\n\r\n${line% *} only removes the time while including the date with the topic. Adding a second % to ${line%% *} makes the substitution greedy, ensuring that only the topic is returned.","title":"How to clear ALL retained mqtt messages from Mosquitto?","body":"<p>I don't have enough rep to add a simple comment. The bash script is great! The edge case I ran into is one where multiple spaces exist, such as a date stamp:</p>\n<pre><code>bob/was/here/time 2021-08-31 01:52:51\n</code></pre>\n<p>${line% *} only removes the time while including the date with the topic. Adding a second % to ${line%% *} makes the substitution greedy, ensuring that only the topic is returned.</p>\n"},{"comments":[{"owner":{"account_id":12616870,"reputation":630,"user_id":9174020,"display_name":"Nik"},"score":2,"creation_date":1655137584,"post_id":70391842,"comment_id":128254675,"body_markdown":"This is the most efficient way, however, when using `-E` the client exits immediately after `Client X received SUBACK` i.e. after subscribing, but before receiving any messages, so actual removal doesn&#39;t happen. The only reliable way to make the client disconnect and exit that I found is using `-W 1` flag, i.e. process messages for 1 sec then exit.","body":"This is the most efficient way, however, when using <code>-E</code> the client exits immediately after <code>Client X received SUBACK</code> i.e. after subscribing, but before receiving any messages, so actual removal doesn&#39;t happen. The only reliable way to make the client disconnect and exit that I found is using <code>-W 1</code> flag, i.e. process messages for 1 sec then exit."}],"tags":[],"owner":{"account_id":5523637,"reputation":193,"user_id":4385834,"display_name":"jonasmike"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1699452373,"creation_date":1639737452,"answer_id":70391842,"question_id":36729300,"body_markdown":"Mosquitto client provides --remove-retained option:\r\n\r\n    mosquitto_sub -h $host --remove-retained -t &#39;#&#39; -W 1 \r\n\r\nTunning -t can handle specific topics to be cleared.","title":"How to clear ALL retained mqtt messages from Mosquitto?","body":"<p>Mosquitto client provides --remove-retained option:</p>\n<pre><code>mosquitto_sub -h $host --remove-retained -t '#' -W 1 \n</code></pre>\n<p>Tunning -t can handle specific topics to be cleared.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":3,"creation_date":1663569691,"post_id":73718377,"comment_id":130261947,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/73718377/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":23164662,"reputation":1,"user_id":17264781,"display_name":"hemerson allan"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669143556,"creation_date":1663164766,"answer_id":73718377,"question_id":36729300,"body_markdown":"If you&#180;re on a remote computer you can do this.\r\n\r\n    mosquitto_sub -h HOST -t &#39;TOPIC&#39; --remove-retained --retained-only -u USER -P PASSWORD\r\n\r\nIt works for me !","title":"How to clear ALL retained mqtt messages from Mosquitto?","body":"<p>If you´re on a remote computer you can do this.</p>\n<pre><code>mosquitto_sub -h HOST -t 'TOPIC' --remove-retained --retained-only -u USER -P PASSWORD\n</code></pre>\n<p>It works for me !</p>\n"},{"tags":[],"owner":{"account_id":27932423,"reputation":1,"user_id":21330124,"display_name":"zeushammer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677927144,"creation_date":1677927144,"answer_id":75635165,"question_id":36729300,"body_markdown":"From the ````mosquitto_sub```` [man page][1]\r\n\r\n&gt;**Example 1.**  Remove all retained messages on the server, assuming we have access to do so, and then exit:\r\n&gt;\r\n&gt; &lt;pre&gt;mosquitto_sub -t &#39;#&#39; --remove-retained --retained-only&lt;/pre&gt;\r\n\r\nAs a function:\r\n\r\n    clmq(){ mosquitto_sub -t &#39;#&#39; --remove-retained --retained-only -d -W ${4:-1} -h ${1:-localhost} -u ${2} -P ${3}; }\r\n\r\nExample usage:\r\n\r\n    clmq myhostoripaddr myusername mypassword mytimeout\r\n\r\nNote that the option ```-W 1``` causes ```mosquitto_sub``` to timeout 1 second after connecting to the broker (so that you don&#39;t have to press ```Ctrl+C``` to kill the ```mosquitto_sub``` process). \r\n\r\nIf you have a lot of retained messages to clear, you may want to remove the ```-W 1``` option and kill ```mosquitto_sub``` manually (once it has finished publishing null messages to all topics which previously had a retained message).\r\n\r\n[1]: https://manpages.debian.org/testing/mosquitto-clients/mosquitto_sub.1.en.html#OPTIONS","title":"How to clear ALL retained mqtt messages from Mosquitto?","body":"<p>From the <code>mosquitto_sub</code> <a href=\"https://manpages.debian.org/testing/mosquitto-clients/mosquitto_sub.1.en.html#OPTIONS\" rel=\"nofollow noreferrer\">man page</a></p>\n<blockquote>\n<p><strong>Example 1.</strong>  Remove all retained messages on the server, assuming we have access to do so, and then exit:</p>\n<pre>mosquitto_sub -t '#' --remove-retained --retained-only</pre>\n</blockquote>\n<p>As a function:</p>\n<pre><code>clmq(){ mosquitto_sub -t '#' --remove-retained --retained-only -d -W ${4:-1} -h ${1:-localhost} -u ${2} -P ${3}; }\n</code></pre>\n<p>Example usage:</p>\n<pre><code>clmq myhostoripaddr myusername mypassword mytimeout\n</code></pre>\n<p>Note that the option <code>-W 1</code> causes <code>mosquitto_sub</code> to timeout 1 second after connecting to the broker (so that you don't have to press <code>Ctrl+C</code> to kill the <code>mosquitto_sub</code> process).</p>\n<p>If you have a lot of retained messages to clear, you may want to remove the <code>-W 1</code> option and kill <code>mosquitto_sub</code> manually (once it has finished publishing null messages to all topics which previously had a retained message).</p>\n"}],"owner":{"account_id":3681561,"reputation":13782,"user_id":3066406,"accept_rate":40,"display_name":"JohnL"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64700,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":36729560,"answer_count":10,"score":17,"last_activity_date":1699452373,"creation_date":1461099380,"question_id":36729300,"body_markdown":"I&#39;ve seen the `mosquitto_pub -h [server] -r -n -t [XYZ]` syntax for clearing out one off messages.  My problem is the device developers have posted a lot of garbage messages.\r\n\r\nI have a Java/Paho code base that I&#39;d like to modify to do this automatically as needed, but I can&#39;t seem to publish a zero byte message.  I tried\r\n\r\n    client.publish(topic,null);\r\n\r\n...but that didn&#39;t seem to work.  \r\n\r\nAny suggestions on how to delete everything, en mass?","title":"How to clear ALL retained mqtt messages from Mosquitto?","body":"<p>I've seen the <code>mosquitto_pub -h [server] -r -n -t [XYZ]</code> syntax for clearing out one off messages.  My problem is the device developers have posted a lot of garbage messages.</p>\n\n<p>I have a Java/Paho code base that I'd like to modify to do this automatically as needed, but I can't seem to publish a zero byte message.  I tried</p>\n\n<pre><code>client.publish(topic,null);\n</code></pre>\n\n<p>...but that didn't seem to work.  </p>\n\n<p>Any suggestions on how to delete everything, en mass?</p>\n"},{"tags":["java","in-memory","opencmis","apache-commons-compress"],"owner":{"account_id":8044745,"reputation":110,"user_id":6065282,"display_name":"Florian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699452179,"creation_date":1699452179,"question_id":77446211,"body_markdown":"As already mentioned, I want to extract a zip file which I have as input stream to a repository (Alfresco) using CMIS and apache-commons.\r\n\r\nI am using apache commons compress and opemcmis to achive this. The fowlloing code is working, but I would be happy if the community can help me, if I have overseen something and it this approach does not have any bugs. The code can be used by anyone who need it.\r\n\r\n    private static void unzip(CmisClient cmisClient, Folder target, ZipFile zip, ZipArchiveEntry entry) {\r\n        String targetPath = target.getPath() + &quot;/&quot;;\r\n        if (entry.isDirectory()) {\r\n            System.out.println(&quot;Folder...&quot;);\r\n            CmisObject lastFoundObject = target;\r\n\r\n            for(String name : entry.getName().split(&quot;/&quot;)) {\r\n\r\n                String newPath = targetPath+name+&quot;/&quot;;\r\n                //\r\n                // Try to finde the name\r\n                //\r\n                try {\r\n                    // Check if the path already exists\r\n                    System.out.println(&quot;Looking for path: &quot;+newPath);\r\n                    CmisObject object = cmisClient.getSession().getObjectByPath(newPath);\r\n                    System.out.println(&quot;Folder already exists: &quot; + newPath);\r\n\r\n                    lastFoundObject = object;\r\n                    targetPath = newPath;\r\n                } catch (CmisObjectNotFoundException e) {\r\n                    System.out.println(&quot;Folder does not exists: &quot; + entry.getName());\r\n                    // Create a new folder inside the last found CmisObject\r\n                    Folder folder = CmisUtil.createFolder(cmisClient, (Folder) lastFoundObject, name, &quot;&quot;);\r\n                    System.out.println(&quot;Created folder: &quot;+folder.getPath());\r\n                    // Set the created folder as the last found object\r\n                    lastFoundObject = folder;\r\n                    // Set the new target path\r\n                    targetPath = folder.getPath();\r\n                }\r\n            }\r\n        } else {\r\n            System.out.println(&quot;File...&quot;);\r\n            String fullPath = entry.getName();\r\n            String split[] = fullPath.split(&quot;/&quot;);\r\n            if(split.length &gt; 0) {\r\n                String filename = split[split.length-1];\r\n                String path = fullPath.replace(filename, &quot;&quot;);\r\n\r\n                if(filename.startsWith(&quot;.&quot;)) {\r\n                    System.out.println(&quot;Filename is ignored: &quot;+filename);\r\n                } else {\r\n                    System.out.println(&quot;Create file with path: &quot;+entry.getName());\r\n                    System.out.println(&quot;Path: &quot;+path);\r\n                    System.out.println(&quot;Filename: &quot;+filename);\r\n\r\n                    try {\r\n                        CmisObject folderObject = cmisClient.getSession().getObjectByPath(targetPath+path);\r\n\r\n                        InputStream inputStream = zip.getInputStream(entry);\r\n                        String mime = Files.probeContentType(new File(filename).toPath());\r\n\r\n                        // Upload the file inside the CMIS object (FGolder)\r\n                        CmisUtil.createDocument(cmisClient, (Folder) folderObject, filename, mime, IOUtils.toByteArray(inputStream));\r\n\r\n                    } catch(CmisObjectNotFoundException e) {\r\n                        System.out.println(&quot;Parent folder not found, cannot unzip file: &quot;+targetPath+path);\r\n                    } catch (IOException e) {\r\n                        throw new RuntimeException(e);\r\n                    } catch (DocumentAlreadyExistsInFolder e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n\r\n                }\r\n            } else {\r\n                System.out.println(&quot;Split.length is null.&quot;);\r\n            }\r\n        }\r\n    }\r\nThis method makes more or less the complete task. It checks if the parh is a directory or a file, if it is a directory a CMIS directory is created, if it is a file a document is created. I ignore any file which starts with a point.\r\n\r\nI use this method to start the extraction, because if there is more than one directory in the zip, this method calls the above method for each folder. I use the SeekableInMemoryByteChannel to convert the input stream:\r\n\r\n    public static void unzipToCmis(CmisClient cmisClient, Folder target, InputStream inputStream) throws IOException {\r\n        //ZipArchiveInputStream zip = new ZipArchiveInputStream(inputStream);\r\n\r\n        SeekableInMemoryByteChannel inMemoryByteChannel = new SeekableInMemoryByteChannel(IOUtils.toByteArray(inputStream));\r\n        ZipFile zip = new ZipFile(inMemoryByteChannel);\r\n\r\n        try {\r\n            for (Iterator&lt;ZipArchiveEntry&gt; it = zip.getEntries().asIterator(); it.hasNext(); ) {\r\n                ZipArchiveEntry entry = it.next();\r\n                unzip(cmisClient, target, zip, entry);\r\n            }\r\n        } finally {\r\n            zip.close();\r\n        }\r\n    }\r\nThis is a simple main method to test it, I load a zip file from the local computer, convert it into an input stream and start the unzip process:\r\n\r\n    public static void main(String [] args) throws IOException {\r\n        File initialFile = new File(&quot;/Users/florian/Downloads/Q3.zip&quot;);\r\n        InputStream targetStream = new FileInputStream(initialFile);\r\n\r\n        Organization organization = OrganizationUtil.getOrganization(&quot;pci&quot;);\r\n        CmisClient client = new CmisClient();\r\n        Folder parent = DmsUtil.getOrganizationFolder(client, organization);\r\n\r\n        unzipToCmis(client, parent, targetStream);\r\n    }\r\n\r\nThic class should be used in a webapplication (some kind of document management system) where I can upload a zip file and can extract it to the repository. I use the cmsi approach to communicate with the repository because of it simple interface deign which is more than enough for my needs.\r\n\r\nIt would be very kind im someone can give me some feedback about this approach.\r\n\r\nThanks,\r\nFlorian","title":"Example of extracting a zip file in memory to CMIS using Java","body":"<p>As already mentioned, I want to extract a zip file which I have as input stream to a repository (Alfresco) using CMIS and apache-commons.</p>\n<p>I am using apache commons compress and opemcmis to achive this. The fowlloing code is working, but I would be happy if the community can help me, if I have overseen something and it this approach does not have any bugs. The code can be used by anyone who need it.</p>\n<pre><code>private static void unzip(CmisClient cmisClient, Folder target, ZipFile zip, ZipArchiveEntry entry) {\n    String targetPath = target.getPath() + &quot;/&quot;;\n    if (entry.isDirectory()) {\n        System.out.println(&quot;Folder...&quot;);\n        CmisObject lastFoundObject = target;\n\n        for(String name : entry.getName().split(&quot;/&quot;)) {\n\n            String newPath = targetPath+name+&quot;/&quot;;\n            //\n            // Try to finde the name\n            //\n            try {\n                // Check if the path already exists\n                System.out.println(&quot;Looking for path: &quot;+newPath);\n                CmisObject object = cmisClient.getSession().getObjectByPath(newPath);\n                System.out.println(&quot;Folder already exists: &quot; + newPath);\n\n                lastFoundObject = object;\n                targetPath = newPath;\n            } catch (CmisObjectNotFoundException e) {\n                System.out.println(&quot;Folder does not exists: &quot; + entry.getName());\n                // Create a new folder inside the last found CmisObject\n                Folder folder = CmisUtil.createFolder(cmisClient, (Folder) lastFoundObject, name, &quot;&quot;);\n                System.out.println(&quot;Created folder: &quot;+folder.getPath());\n                // Set the created folder as the last found object\n                lastFoundObject = folder;\n                // Set the new target path\n                targetPath = folder.getPath();\n            }\n        }\n    } else {\n        System.out.println(&quot;File...&quot;);\n        String fullPath = entry.getName();\n        String split[] = fullPath.split(&quot;/&quot;);\n        if(split.length &gt; 0) {\n            String filename = split[split.length-1];\n            String path = fullPath.replace(filename, &quot;&quot;);\n\n            if(filename.startsWith(&quot;.&quot;)) {\n                System.out.println(&quot;Filename is ignored: &quot;+filename);\n            } else {\n                System.out.println(&quot;Create file with path: &quot;+entry.getName());\n                System.out.println(&quot;Path: &quot;+path);\n                System.out.println(&quot;Filename: &quot;+filename);\n\n                try {\n                    CmisObject folderObject = cmisClient.getSession().getObjectByPath(targetPath+path);\n\n                    InputStream inputStream = zip.getInputStream(entry);\n                    String mime = Files.probeContentType(new File(filename).toPath());\n\n                    // Upload the file inside the CMIS object (FGolder)\n                    CmisUtil.createDocument(cmisClient, (Folder) folderObject, filename, mime, IOUtils.toByteArray(inputStream));\n\n                } catch(CmisObjectNotFoundException e) {\n                    System.out.println(&quot;Parent folder not found, cannot unzip file: &quot;+targetPath+path);\n                } catch (IOException e) {\n                    throw new RuntimeException(e);\n                } catch (DocumentAlreadyExistsInFolder e) {\n                    throw new RuntimeException(e);\n                }\n\n            }\n        } else {\n            System.out.println(&quot;Split.length is null.&quot;);\n        }\n    }\n}\n</code></pre>\n<p>This method makes more or less the complete task. It checks if the parh is a directory or a file, if it is a directory a CMIS directory is created, if it is a file a document is created. I ignore any file which starts with a point.</p>\n<p>I use this method to start the extraction, because if there is more than one directory in the zip, this method calls the above method for each folder. I use the SeekableInMemoryByteChannel to convert the input stream:</p>\n<pre><code>public static void unzipToCmis(CmisClient cmisClient, Folder target, InputStream inputStream) throws IOException {\n    //ZipArchiveInputStream zip = new ZipArchiveInputStream(inputStream);\n\n    SeekableInMemoryByteChannel inMemoryByteChannel = new SeekableInMemoryByteChannel(IOUtils.toByteArray(inputStream));\n    ZipFile zip = new ZipFile(inMemoryByteChannel);\n\n    try {\n        for (Iterator&lt;ZipArchiveEntry&gt; it = zip.getEntries().asIterator(); it.hasNext(); ) {\n            ZipArchiveEntry entry = it.next();\n            unzip(cmisClient, target, zip, entry);\n        }\n    } finally {\n        zip.close();\n    }\n}\n</code></pre>\n<p>This is a simple main method to test it, I load a zip file from the local computer, convert it into an input stream and start the unzip process:</p>\n<pre><code>public static void main(String [] args) throws IOException {\n    File initialFile = new File(&quot;/Users/florian/Downloads/Q3.zip&quot;);\n    InputStream targetStream = new FileInputStream(initialFile);\n\n    Organization organization = OrganizationUtil.getOrganization(&quot;pci&quot;);\n    CmisClient client = new CmisClient();\n    Folder parent = DmsUtil.getOrganizationFolder(client, organization);\n\n    unzipToCmis(client, parent, targetStream);\n}\n</code></pre>\n<p>Thic class should be used in a webapplication (some kind of document management system) where I can upload a zip file and can extract it to the repository. I use the cmsi approach to communicate with the repository because of it simple interface deign which is more than enough for my needs.</p>\n<p>It would be very kind im someone can give me some feedback about this approach.</p>\n<p>Thanks,\nFlorian</p>\n"},{"tags":["java","apache-kafka","spring-kafka"],"answers":[{"comments":[{"owner":{"account_id":29855072,"reputation":1,"user_id":22880096,"display_name":"Marrakesh"},"score":0,"creation_date":1699453255,"post_id":77446193,"comment_id":136533280,"body_markdown":"Сonsumer connects to the topic, this can be seen in 1 message in the logs.\nI tryed to set auto.offset.reset to earlest or latest its doesnt matter.","body":"Сonsumer connects to the topic, this can be seen in 1 message in the logs. I tryed to set auto.offset.reset to earlest or latest its doesnt matter."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1699454469,"post_id":77446193,"comment_id":136533609,"body_markdown":"Yes. It does connect. I answered there&#39;s no active producer to send data into the topic. Consumer won&#39;t do anything for an empty topic. Otherwise, you&#39;ll need to debug further with `kafka-consumer-groups` command","body":"Yes. It does connect. I answered there&#39;s no active producer to send data into the topic. Consumer won&#39;t do anything for an empty topic. Otherwise, you&#39;ll need to debug further with <code>kafka-consumer-groups</code> command"},{"owner":{"account_id":29855072,"reputation":1,"user_id":22880096,"display_name":"Marrakesh"},"score":0,"creation_date":1699454654,"post_id":77446193,"comment_id":136533667,"body_markdown":"I push messages in topic with big data tools util, and i see this messages in topic","body":"I push messages in topic with big data tools util, and i see this messages in topic"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1699454753,"post_id":77446193,"comment_id":136533689,"body_markdown":"Okay, I&#39;m not familiar with this tool. Kafka has builtin cli tools to help you debug the issue, including the one I mentioned... If you&#39;re using the same group id in your UI as Spring app, then you&#39;ll also get no events there since they&#39;ve already been consumed (which you&#39;d see by describing the consumer group)","body":"Okay, I&#39;m not familiar with this tool. Kafka has builtin cli tools to help you debug the issue, including the one I mentioned... If you&#39;re using the same group id in your UI as Spring app, then you&#39;ll also get no events there since they&#39;ve already been consumed (which you&#39;d see by describing the consumer group)"},{"owner":{"account_id":29855072,"reputation":1,"user_id":22880096,"display_name":"Marrakesh"},"score":0,"creation_date":1699455486,"post_id":77446193,"comment_id":136533896,"body_markdown":"no, ui have different group id  than the spring app","body":"no, ui have different group id  than the spring app"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1699537436,"post_id":77446193,"comment_id":136546446,"body_markdown":"Please edit your question to include kafka-consumer-group command output describing your group","body":"Please edit your question to include kafka-consumer-group command output describing your group"}],"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699452015,"creation_date":1699452015,"answer_id":77446193,"question_id":77445870,"body_markdown":"You&#39;ve not set auto.offset.reset, so it&#39;ll default to consume from the end of the topic. If there&#39;s no producer running, you&#39;ll get no data\r\n\r\n\r\nAlso, this `from-hotfolder-transferer.topic` property isn&#39;t valid for [Spring Boot auto configuration](https://docs.spring.io/spring-boot/docs/current/reference/html/messaging.html#messaging.kafka) . You can put your topic property anywhere else ","title":"KafkaListener dont read messages from topic","body":"<p>You've not set auto.offset.reset, so it'll default to consume from the end of the topic. If there's no producer running, you'll get no data</p>\n<p>Also, this <code>from-hotfolder-transferer.topic</code> property isn't valid for <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/messaging.html#messaging.kafka\" rel=\"nofollow noreferrer\">Spring Boot auto configuration</a> . You can put your topic property anywhere else</p>\n"}],"owner":{"account_id":29855072,"reputation":1,"user_id":22880096,"display_name":"Marrakesh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699452015,"creation_date":1699449489,"question_id":77445870,"body_markdown":"I have  class with KafkaListener:\r\n```\r\n@Slf4j\r\n@Component\r\n@RequiredArgsConstructor\r\npublic class DocumentListener {\r\n\r\n    @KafkaListener(topics = &quot;${spring.kafka.consumer.from-hotfolder-transferer.topic}&quot;)\r\n    public void listen(@Payload TaskDto taskDto, @Header(KafkaConst.HEADER_KEY) String serviceName) {\r\n       ... some logic\r\n    }\r\n```\r\n\r\nwhen the message hits the topic i see this in logs:\r\n```\r\n\r\n&gt;! 2023-11-08T15:30:05.783+03:00  INFO [worker-ocr ] 28396 --- [ntainer#0-0-C-1] o.s.k.l.KafkaMessageListenerContainer    : gpn-1: partitions assigned: [task-to-ocr-0]\r\n&gt;! 2023-11-08T15:39:03.175+03:00  INFO [worker-ocr ] 28396 --- [ntainer#0-0-C-1] org.apache.kafka.clients.NetworkClient   : [Consumer clientId=gpn-1-0, groupId=gpn-1] Node -1 disconnected.\r\n&gt;! 2023-11-08T15:58:27.194+03:00  INFO [worker-ocr ] 28396 --- [ntainer#0-0-C-1] o.a.k.clients.admin.AdminClientConfig    : AdminClientConfig values: \r\n&gt;! ______\r\n&gt;! here some values kafka admin\r\n&gt;! ______\r\n&gt;! 2023-11-08T15:58:27.219+03:00  INFO [worker-ocr ] 28396 --- [ntainer#0-0-C-1] o.a.kafka.common.utils.AppInfoParser     : Kafka version: 3.4.1\r\n&gt;! 2023-11-08T15:58:27.219+03:00  INFO [worker-ocr ] 28396 --- [ntainer#0-0-C-1] o.a.kafka.common.utils.AppInfoParser     : Kafka commitId: 8a516edc2755df89\r\n&gt;! 2023-11-08T15:58:27.219+03:00  INFO [worker-ocr ] 28396 --- [ntainer#0-0-C-1] o.a.kafka.common.utils.AppInfoParser     : Kafka startTimeMs: 1699448307219\r\n&gt;! 2023-11-08T15:58:27.235+03:00  INFO [worker-ocr ] 28396 --- [| adminclient-1] o.a.kafka.common.utils.AppInfoParser     : App info kafka.admin.client for adminclient-1 unregistered\r\n&gt;! 2023-11-08T15:58:27.242+03:00  INFO [worker-ocr ] 28396 --- [| adminclient-1] o.apache.kafka.common.metrics.Metrics    : Metrics scheduler closed\r\n&gt;! 2023-11-08T15:58:27.243+03:00  INFO [worker-ocr ] 28396 --- [| adminclient-1] o.apache.kafka.common.metrics.Metrics    : Closing reporter org.apache.kafka.common.metrics.JmxReporter\r\n&gt;! 2023-11-08T15:58:27.243+03:00  INFO [worker-ocr ] 28396 --- [| adminclient-1] o.apache.kafka.common.metrics.Metrics    : Metrics reporters closed\r\n\r\n```\r\nMy consumer property:\r\n\r\n\r\n```\r\n@Configuration\r\n@EnableKafka\r\n@RequiredArgsConstructor\r\npublic class KafkaConfig {\r\n\r\n    private final KafkaProducerProperties kafkaProducerProperties;\r\n\r\n    @Bean\r\n    public ConsumerFactory&lt;String, TaskDto&gt; taskDtoConsumerFactory(KafkaProperties kafkaProperties, KafkaCustomProperties kafkaCustomProperties) {\r\n        KafkaCustomProperties.KafkaConsumerProperties consumer = kafkaCustomProperties.getConsumer().get(KafkaConst.CONSUMER_CONFIG);\r\n        Map&lt;String, Object&gt; prop = kafkaProperties.buildConsumerProperties();\r\n        prop.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\r\n        prop.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, TaskDtoDeserializer.class);\r\n        prop.put(ConsumerConfig.GROUP_ID_CONFIG, consumer.getClientId());\r\n        prop.put(ConsumerConfig.CLIENT_ID_CONFIG, consumer.getClientId());\r\n        prop.put(ConsumerConfig.MAX_POLL_INTERVAL_MS_CONFIG, consumer.getPollInterval());\r\n        return new DefaultKafkaConsumerFactory&lt;&gt;(\r\n                prop,\r\n                new StringDeserializer(),\r\n                new ErrorHandlingDeserializer&lt;&gt;(new TaskDtoDeserializer())\r\n        );\r\n    }\r\n\r\n    @Bean\r\n    public ConcurrentKafkaListenerContainerFactory&lt;String, TaskDto&gt; kafkaListenerContainerFactory(\r\n            ConsumerFactory&lt;String, TaskDto&gt; taskDtoConsumerFactory,\r\n            KafkaCustomProperties kafkaCustomProperties) {\r\n        ConcurrentKafkaListenerContainerFactory&lt;String, TaskDto&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n        factory.setConsumerFactory(taskDtoConsumerFactory);\r\n        factory.setCommonErrorHandler(errorHandler(kafkaCustomProperties));\r\n        factory.getContainerProperties().setAckMode(ContainerProperties.AckMode.RECORD);\r\n        factory.getContainerProperties().setObservationEnabled(true);\r\n        factory.afterPropertiesSet();\r\n        return factory;\r\n    }\r\n\r\n```\r\n\r\nWith the settings of Kafka itself everything is ok, I can read messages from this topic using big data tools. Mapprop  i checked values is ok\r\nWhat is wrong in my config?","title":"KafkaListener dont read messages from topic","body":"<p>I have  class with KafkaListener:</p>\n<pre><code>@Slf4j\n@Component\n@RequiredArgsConstructor\npublic class DocumentListener {\n\n    @KafkaListener(topics = &quot;${spring.kafka.consumer.from-hotfolder-transferer.topic}&quot;)\n    public void listen(@Payload TaskDto taskDto, @Header(KafkaConst.HEADER_KEY) String serviceName) {\n       ... some logic\n    }\n</code></pre>\n<p>when the message hits the topic i see this in logs:</p>\n<pre><code>\n&gt;! 2023-11-08T15:30:05.783+03:00  INFO [worker-ocr ] 28396 --- [ntainer#0-0-C-1] o.s.k.l.KafkaMessageListenerContainer    : gpn-1: partitions assigned: [task-to-ocr-0]\n&gt;! 2023-11-08T15:39:03.175+03:00  INFO [worker-ocr ] 28396 --- [ntainer#0-0-C-1] org.apache.kafka.clients.NetworkClient   : [Consumer clientId=gpn-1-0, groupId=gpn-1] Node -1 disconnected.\n&gt;! 2023-11-08T15:58:27.194+03:00  INFO [worker-ocr ] 28396 --- [ntainer#0-0-C-1] o.a.k.clients.admin.AdminClientConfig    : AdminClientConfig values: \n&gt;! ______\n&gt;! here some values kafka admin\n&gt;! ______\n&gt;! 2023-11-08T15:58:27.219+03:00  INFO [worker-ocr ] 28396 --- [ntainer#0-0-C-1] o.a.kafka.common.utils.AppInfoParser     : Kafka version: 3.4.1\n&gt;! 2023-11-08T15:58:27.219+03:00  INFO [worker-ocr ] 28396 --- [ntainer#0-0-C-1] o.a.kafka.common.utils.AppInfoParser     : Kafka commitId: 8a516edc2755df89\n&gt;! 2023-11-08T15:58:27.219+03:00  INFO [worker-ocr ] 28396 --- [ntainer#0-0-C-1] o.a.kafka.common.utils.AppInfoParser     : Kafka startTimeMs: 1699448307219\n&gt;! 2023-11-08T15:58:27.235+03:00  INFO [worker-ocr ] 28396 --- [| adminclient-1] o.a.kafka.common.utils.AppInfoParser     : App info kafka.admin.client for adminclient-1 unregistered\n&gt;! 2023-11-08T15:58:27.242+03:00  INFO [worker-ocr ] 28396 --- [| adminclient-1] o.apache.kafka.common.metrics.Metrics    : Metrics scheduler closed\n&gt;! 2023-11-08T15:58:27.243+03:00  INFO [worker-ocr ] 28396 --- [| adminclient-1] o.apache.kafka.common.metrics.Metrics    : Closing reporter org.apache.kafka.common.metrics.JmxReporter\n&gt;! 2023-11-08T15:58:27.243+03:00  INFO [worker-ocr ] 28396 --- [| adminclient-1] o.apache.kafka.common.metrics.Metrics    : Metrics reporters closed\n\n</code></pre>\n<p>My consumer property:</p>\n<pre><code>@Configuration\n@EnableKafka\n@RequiredArgsConstructor\npublic class KafkaConfig {\n\n    private final KafkaProducerProperties kafkaProducerProperties;\n\n    @Bean\n    public ConsumerFactory&lt;String, TaskDto&gt; taskDtoConsumerFactory(KafkaProperties kafkaProperties, KafkaCustomProperties kafkaCustomProperties) {\n        KafkaCustomProperties.KafkaConsumerProperties consumer = kafkaCustomProperties.getConsumer().get(KafkaConst.CONSUMER_CONFIG);\n        Map&lt;String, Object&gt; prop = kafkaProperties.buildConsumerProperties();\n        prop.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\n        prop.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, TaskDtoDeserializer.class);\n        prop.put(ConsumerConfig.GROUP_ID_CONFIG, consumer.getClientId());\n        prop.put(ConsumerConfig.CLIENT_ID_CONFIG, consumer.getClientId());\n        prop.put(ConsumerConfig.MAX_POLL_INTERVAL_MS_CONFIG, consumer.getPollInterval());\n        return new DefaultKafkaConsumerFactory&lt;&gt;(\n                prop,\n                new StringDeserializer(),\n                new ErrorHandlingDeserializer&lt;&gt;(new TaskDtoDeserializer())\n        );\n    }\n\n    @Bean\n    public ConcurrentKafkaListenerContainerFactory&lt;String, TaskDto&gt; kafkaListenerContainerFactory(\n            ConsumerFactory&lt;String, TaskDto&gt; taskDtoConsumerFactory,\n            KafkaCustomProperties kafkaCustomProperties) {\n        ConcurrentKafkaListenerContainerFactory&lt;String, TaskDto&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n        factory.setConsumerFactory(taskDtoConsumerFactory);\n        factory.setCommonErrorHandler(errorHandler(kafkaCustomProperties));\n        factory.getContainerProperties().setAckMode(ContainerProperties.AckMode.RECORD);\n        factory.getContainerProperties().setObservationEnabled(true);\n        factory.afterPropertiesSet();\n        return factory;\n    }\n\n</code></pre>\n<p>With the settings of Kafka itself everything is ok, I can read messages from this topic using big data tools. Mapprop  i checked values is ok\nWhat is wrong in my config?</p>\n"},{"tags":["java","android","audio","libgdx"],"comments":[{"owner":{"account_id":4788663,"reputation":633,"user_id":3868435,"accept_rate":56,"display_name":"peterSweter"},"score":0,"creation_date":1406540324,"post_id":24983925,"comment_id":38855745,"body_markdown":"Is this possible that i have this lags cause my sound variables are static ?","body":"Is this possible that i have this lags cause my sound variables are static ?"},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1406561230,"post_id":24983925,"comment_id":38867492,"body_markdown":"What does your Assets class look like? Are you by any chance re-loading the sound every time you want to play it? I don&#39;t understand your `waitForLoadCompleted` method--are you doing some kind of asynchronous loading?","body":"What does your Assets class look like? Are you by any chance re-loading the sound every time you want to play it? I don&#39;t understand your <code>waitForLoadCompleted</code> method--are you doing some kind of asynchronous loading?"},{"owner":{"account_id":4788663,"reputation":633,"user_id":3868435,"accept_rate":56,"display_name":"peterSweter"},"score":0,"creation_date":1406561835,"post_id":24983925,"comment_id":38867837,"body_markdown":"I load my sounds only once in constructor of my GameScreen. I found in the internet that playing sound with 0 volume may help to load this sound, thats why i use waitForLoadCompleted.","body":"I load my sounds only once in constructor of my GameScreen. I found in the internet that playing sound with 0 volume may help to load this sound, thats why i use waitForLoadCompleted."},{"owner":{"account_id":4788663,"reputation":633,"user_id":3868435,"accept_rate":56,"display_name":"peterSweter"},"score":0,"creation_date":1406562844,"post_id":24983925,"comment_id":38868478,"body_markdown":"in logCat i get information that &quot;sample 5 not Ready&quot;","body":"in logCat i get information that &quot;sample 5 not Ready&quot;"},{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":0,"creation_date":1406563632,"post_id":24983925,"comment_id":38868916,"body_markdown":"But where are you calling `waitForLoadCompleted`, right after loading the sound the only time?","body":"But where are you calling <code>waitForLoadCompleted</code>, right after loading the sound the only time?"},{"owner":{"account_id":4788663,"reputation":633,"user_id":3868435,"accept_rate":56,"display_name":"peterSweter"},"score":0,"creation_date":1406563787,"post_id":24983925,"comment_id":38869034,"body_markdown":"I call this one time after i create  SoundEffect class where i have my sounds.","body":"I call this one time after i create  SoundEffect class where i have my sounds."}],"answers":[{"comments":[{"owner":{"account_id":3463622,"reputation":7032,"user_id":2899889,"accept_rate":79,"display_name":"MilanG"},"score":1,"creation_date":1574620386,"post_id":29431378,"comment_id":104287516,"body_markdown":"With more sounds my game started lagging even more. Tried adding 1 second of silence to each sound sample, but didn&#39;t help. :( On PC runs smooth, but on phone (SD 855, 6GB ram, android 10) it lags.  LibGDX definitely has some sound issue. :(","body":"With more sounds my game started lagging even more. Tried adding 1 second of silence to each sound sample, but didn&#39;t help. :( On PC runs smooth, but on phone (SD 855, 6GB ram, android 10) it lags.  LibGDX definitely has some sound issue. :("},{"owner":{"account_id":3463622,"reputation":7032,"user_id":2899889,"accept_rate":79,"display_name":"MilanG"},"score":0,"creation_date":1574625292,"post_id":29431378,"comment_id":104288880,"body_markdown":"Initially I used 22Khz wav pcm samples to save the memory. But then tried 44100, 48000Hz, tried adding them second of silence at end. Nothing helps. I would say that just LibGDX (or Android even) sound system is not good enough and can&#39;t handle nearly the same number of samples at the same time as PC. Only solution I see is reducing number of sounds played unfortunatelly.","body":"Initially I used 22Khz wav pcm samples to save the memory. But then tried 44100, 48000Hz, tried adding them second of silence at end. Nothing helps. I would say that just LibGDX (or Android even) sound system is not good enough and can&#39;t handle nearly the same number of samples at the same time as PC. Only solution I see is reducing number of sounds played unfortunatelly."},{"owner":{"account_id":4657561,"reputation":386,"user_id":3772716,"accept_rate":50,"display_name":"Timothy"},"score":0,"creation_date":1579364857,"post_id":29431378,"comment_id":105745551,"body_markdown":"I also tried everything from changing the bitrate, and using different file extensions such as wav, mp3, flac, but unfortunately that didn&#39;t help. Your solution helped me fix the problem after months of searching. I think the important part is to turn the volume down in the file itself and yes you may therefore have to also lengthen the sample (I used Ableton live) . The only physical phone I could to test on was a motorola g5 plus. It may be because this phone keeps the audio stream or thread or something open. Thanks a thousand, this should be upvoted for others to find more easily.","body":"I also tried everything from changing the bitrate, and using different file extensions such as wav, mp3, flac, but unfortunately that didn&#39;t help. Your solution helped me fix the problem after months of searching. I think the important part is to turn the volume down in the file itself and yes you may therefore have to also lengthen the sample (I used Ableton live) . The only physical phone I could to test on was a motorola g5 plus. It may be because this phone keeps the audio stream or thread or something open. Thanks a thousand, this should be upvoted for others to find more easily."}],"tags":[],"owner":{"account_id":5239204,"reputation":159,"user_id":4186837,"accept_rate":83,"display_name":"Baguette"},"comment_count":3,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1428060612,"creation_date":1428060612,"answer_id":29431378,"question_id":24983925,"body_markdown":"I had the same problem. It was because my .mp3 file was too short. Mine was 0.167 seconds long. I added 1.2 seconds of silence with Audacity, and it fixed the problem.","title":"libgdx lag when sound.play() while collecting apple","body":"<p>I had the same problem. It was because my .mp3 file was too short. Mine was 0.167 seconds long. I added 1.2 seconds of silence with Audacity, and it fixed the problem.</p>\n"},{"comments":[{"owner":{"account_id":4657561,"reputation":386,"user_id":3772716,"accept_rate":50,"display_name":"Timothy"},"score":0,"creation_date":1579365066,"post_id":56375024,"comment_id":105745603,"body_markdown":"A little bit late but try extending your samples and turn the volume down before the end of the sample. I have Ableton Live but you could probably also use Audacity, which is free.","body":"A little bit late but try extending your samples and turn the volume down before the end of the sample. I have Ableton Live but you could probably also use Audacity, which is free."},{"owner":{"account_id":3463622,"reputation":7032,"user_id":2899889,"accept_rate":79,"display_name":"MilanG"},"score":0,"creation_date":1579509121,"post_id":56375024,"comment_id":105776138,"body_markdown":"Tried that too. I don&#39;t need that there&#39;s any help for this issue: https://stackoverflow.com/questions/59022221/sound-makes-app-lags-on-android-any-solution","body":"Tried that too. I don&#39;t need that there&#39;s any help for this issue: <a href=\"https://stackoverflow.com/questions/59022221/sound-makes-app-lags-on-android-any-solution\" title=\"sound makes app lags on android any solution\">stackoverflow.com/questions/59022221/&hellip;</a>"},{"owner":{"account_id":3463622,"reputation":7032,"user_id":2899889,"accept_rate":79,"display_name":"MilanG"},"score":0,"creation_date":1579509169,"post_id":56375024,"comment_id":105776150,"body_markdown":"I made a bit smarter sound manager system, set some kind of priorities for sounds and I&#39;m playing just 2 or 3 sounds at the same time.","body":"I made a bit smarter sound manager system, set some kind of priorities for sounds and I&#39;m playing just 2 or 3 sounds at the same time."}],"tags":[],"owner":{"account_id":3463622,"reputation":7032,"user_id":2899889,"accept_rate":79,"display_name":"MilanG"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1559207099,"creation_date":1559207099,"answer_id":56375024,"question_id":24983925,"body_markdown":"Lately I run into the same issue (except I&#39;m using wav instead mp3 files). My app was lagging when I play many (like 10 or 20) sounds at the same time (same render method). &quot;Solved&quot; this by playing only 1 sound at the time. Generally it&#39;s hard to distinct many sounds at the same time. Also on desktop it works fine, but problem appears on android (9 or 8).","title":"libgdx lag when sound.play() while collecting apple","body":"<p>Lately I run into the same issue (except I'm using wav instead mp3 files). My app was lagging when I play many (like 10 or 20) sounds at the same time (same render method). \"Solved\" this by playing only 1 sound at the time. Generally it's hard to distinct many sounds at the same time. Also on desktop it works fine, but problem appears on android (9 or 8).</p>\n"},{"tags":[],"owner":{"account_id":14597799,"reputation":1550,"user_id":10542965,"display_name":"Siarhei Kavaleuski"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622068570,"creation_date":1622068570,"answer_id":67713540,"question_id":24983925,"body_markdown":"If someone still facing this issue as me there is the alternative solution with one limitation: no option to use sound id.\r\n\r\nYou can change default LibGDX behavior and use `AsynchronousAndroidAudio` by overriding this method in your `AndroidLauncher` class:\r\n\r\n    @Override\r\n    public AndroidAudio createAudio(Context context, AndroidApplicationConfiguration config) {\r\n\t    return new AsynchronousAndroidAudio(context, config);\r\n    }\r\n\r\n\r\nSee the [official documentation][1] for more info and also [the pull request][2]\r\n\r\nAlso, if for any reasons you need sound id you can take this implementation as an example and find a workaround for your project.\r\n\r\nFix is available starting from LibGDX 1.9.12\r\n\r\n\r\n  [1]: https://github.com/libgdx/libgdx/wiki/Audio\r\n  [2]: https://github.com/libgdx/libgdx/pull/6243","title":"libgdx lag when sound.play() while collecting apple","body":"<p>If someone still facing this issue as me there is the alternative solution with one limitation: no option to use sound id.</p>\n<p>You can change default LibGDX behavior and use <code>AsynchronousAndroidAudio</code> by overriding this method in your <code>AndroidLauncher</code> class:</p>\n<pre><code>@Override\npublic AndroidAudio createAudio(Context context, AndroidApplicationConfiguration config) {\n    return new AsynchronousAndroidAudio(context, config);\n}\n</code></pre>\n<p>See the <a href=\"https://github.com/libgdx/libgdx/wiki/Audio\" rel=\"nofollow noreferrer\">official documentation</a> for more info and also <a href=\"https://github.com/libgdx/libgdx/pull/6243\" rel=\"nofollow noreferrer\">the pull request</a></p>\n<p>Also, if for any reasons you need sound id you can take this implementation as an example and find a workaround for your project.</p>\n<p>Fix is available starting from LibGDX 1.9.12</p>\n"},{"tags":[],"owner":{"account_id":29855673,"reputation":1,"user_id":22880558,"display_name":"Cirno"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699451982,"creation_date":1699451982,"answer_id":77446189,"question_id":24983925,"body_markdown":"I was occurred the same problem when I trying to make a rhythm game and I wanted to play some effect sounds. Thus I tried `AsynchronousAndroidAudio` to solved it. However `AsynchronousAndroidAudio` seemed to cause more problems like sound latency. And finally I used OpenSL ES and it worked well in improving performance (on my poor device produced in 2016). But I just wrote few functions and what&#39;s worse is that all sound file should be converted to PCM format unless import a decoder. It met my need though (these sounds are small so that I loaded them directly into memory and these sounds do not need ID, even pausing)  \r\n(My English is not so well)","title":"libgdx lag when sound.play() while collecting apple","body":"<p>I was occurred the same problem when I trying to make a rhythm game and I wanted to play some effect sounds. Thus I tried <code>AsynchronousAndroidAudio</code> to solved it. However <code>AsynchronousAndroidAudio</code> seemed to cause more problems like sound latency. And finally I used OpenSL ES and it worked well in improving performance (on my poor device produced in 2016). But I just wrote few functions and what's worse is that all sound file should be converted to PCM format unless import a decoder. It met my need though (these sounds are small so that I loaded them directly into memory and these sounds do not need ID, even pausing)<br />\n(My English is not so well)</p>\n"}],"owner":{"account_id":4788663,"reputation":633,"user_id":3868435,"accept_rate":56,"display_name":"peterSweter"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1906,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":4,"score":5,"last_activity_date":1699451982,"creation_date":1406484182,"question_id":24983925,"body_markdown":"\r\nI&#39;am doing simple libgdx game. I have lag (game stop for 0. 5 sec) when i use sound.play() \r\n**edit** this bug apear on android 4.0 on 2.3 everything is running fine.\r\n\r\nmethod. I play sound by this code: \r\n\r\n    if(CollisionDetector.detect(touchArea, hoodie.getTouchArea())){\r\n    \t\tGameScreen.totalScore++;\r\n    \t\tsetPosition();\r\n    \t\tSystem.out.println(&quot;played&quot;);\r\n    \t\t\r\n    \t\tAssets.eatSound.play();\r\n    \t\t\r\n    }\r\n\r\nAnd i use this method to load sound:\r\n\r\n     static long waitForLoadCompleted(Sound sound,float volume) {\r\n            long id;\r\n            while ((id = sound.play(volume)) == -1) {\r\n                long t = TimeUtils.nanoTime();\r\n                while (TimeUtils.nanoTime() - t &lt; 100000000);\r\n            }\r\n            return id;\r\n     }\r\nWhat am i doing wrong? Or what can i do to fix this lag ? \r\n\r\n**edit:**\r\n\r\nI have just tried to do thread with sound.play() but it also doesn&#39;t work:\r\n\r\n\t\tnew Thread(new Runnable() {\r\n\t\t\t   @Override\r\n\t\t\t   public void run() {\r\n\t\t\t      // do something important here, asynchronously to the rendering thread\r\n\t\t\t\r\n\t\t\t      // post a Runnable to the rendering thread that processes the result\r\n\t\t\t      Gdx.app.postRunnable(new Runnable() {\r\n\t\t\t         @Override\r\n\t\t\t         public void run() {\r\n\t\t\t            // process the result, e.g. add it to an Array&lt;Result&gt; field of the ApplicationListener.\r\n\t\t\t        eatSound2.play();\r\n\t\t\t         }\r\n\t\t\t      });\r\n\t\t\t   }\r\n\t\t\t}).start();\r\n\r\nMy Sound asset class looks like this but i still have lag with sound.\r\npackage com.redHoodie;\r\n\r\n    import com.badlogic.gdx.Gdx;\r\n    import com.badlogic.gdx.audio.Sound;\r\n    import com.badlogic.gdx.utils.Disposable;\r\n    \r\n    public class SoundEffect implements Disposable {\r\n       private static final int WaitLimit = 1000;\r\n       private static final int ThrottleMs = 100;\r\n    \tSound eatSound;\r\n    \tSound endSound;\r\n    \t\r\n    \tpublic SoundEffect(){\r\n    \t\teatSound = Gdx.audio.newSound(Gdx.files.internal(&quot;eatSound.ogg&quot;));\r\n    \t\tendSound = Gdx.audio.newSound(Gdx.files.internal(&quot;sadend.wav&quot;));\r\n    \t\t\r\n    \t\tcheckedPlay(eatSound);\r\n    \t}\r\n    \t\r\n       protected long checkedPlay (Sound sound) {\r\n          return checkedPlay(sound, 1);\r\n       }\r\n    \r\n       protected long checkedLoop (Sound sound) {\r\n          return checkedLoop(sound, 1);\r\n       }\r\n    \r\n       protected long checkedPlay (Sound sound, float volume) {\r\n          int waitCounter = 0;\r\n          long soundId = 0;\r\n    \r\n          boolean ready = false;\r\n          while (!ready &amp;&amp; waitCounter &lt; WaitLimit) {\r\n             soundId = sound.play(volume);\r\n             ready = (soundId != 0);\r\n             waitCounter++;\r\n             try {\r\n                Thread.sleep(ThrottleMs);\r\n             } catch (InterruptedException e) {\r\n             }\r\n          }\r\n    \r\n          return soundId;\r\n       }\r\n    \r\n       protected long checkedLoop (Sound sound, float volume) {\r\n          int waitCounter = 0;\r\n          long soundId = 0;\r\n    \r\n          boolean ready = false;\r\n          while (!ready &amp;&amp; waitCounter &lt; WaitLimit) {\r\n             soundId = sound.loop(volume);\r\n             ready = (soundId != 0);\r\n             waitCounter++;\r\n             try {\r\n                Thread.sleep(ThrottleMs);\r\n             } catch (InterruptedException e) {\r\n             }\r\n          }\r\n    \r\n          return soundId;\r\n       }\r\n    \r\n    @Override\r\n    public void dispose() {\r\n    \t// TODO Auto-generated method stub\r\n    \t\r\n    }\r\n    }","title":"libgdx lag when sound.play() while collecting apple","body":"<p>I'am doing simple libgdx game. I have lag (game stop for 0. 5 sec) when i use sound.play() \n<strong>edit</strong> this bug apear on android 4.0 on 2.3 everything is running fine.</p>\n\n<p>method. I play sound by this code: </p>\n\n<pre><code>if(CollisionDetector.detect(touchArea, hoodie.getTouchArea())){\n        GameScreen.totalScore++;\n        setPosition();\n        System.out.println(\"played\");\n\n        Assets.eatSound.play();\n\n}\n</code></pre>\n\n<p>And i use this method to load sound:</p>\n\n<pre><code> static long waitForLoadCompleted(Sound sound,float volume) {\n        long id;\n        while ((id = sound.play(volume)) == -1) {\n            long t = TimeUtils.nanoTime();\n            while (TimeUtils.nanoTime() - t &lt; 100000000);\n        }\n        return id;\n }\n</code></pre>\n\n<p>What am i doing wrong? Or what can i do to fix this lag ? </p>\n\n<p><strong>edit:</strong></p>\n\n<p>I have just tried to do thread with sound.play() but it also doesn't work:</p>\n\n<pre><code>    new Thread(new Runnable() {\n           @Override\n           public void run() {\n              // do something important here, asynchronously to the rendering thread\n\n              // post a Runnable to the rendering thread that processes the result\n              Gdx.app.postRunnable(new Runnable() {\n                 @Override\n                 public void run() {\n                    // process the result, e.g. add it to an Array&lt;Result&gt; field of the ApplicationListener.\n                eatSound2.play();\n                 }\n              });\n           }\n        }).start();\n</code></pre>\n\n<p>My Sound asset class looks like this but i still have lag with sound.\npackage com.redHoodie;</p>\n\n<pre><code>import com.badlogic.gdx.Gdx;\nimport com.badlogic.gdx.audio.Sound;\nimport com.badlogic.gdx.utils.Disposable;\n\npublic class SoundEffect implements Disposable {\n   private static final int WaitLimit = 1000;\n   private static final int ThrottleMs = 100;\n    Sound eatSound;\n    Sound endSound;\n\n    public SoundEffect(){\n        eatSound = Gdx.audio.newSound(Gdx.files.internal(\"eatSound.ogg\"));\n        endSound = Gdx.audio.newSound(Gdx.files.internal(\"sadend.wav\"));\n\n        checkedPlay(eatSound);\n    }\n\n   protected long checkedPlay (Sound sound) {\n      return checkedPlay(sound, 1);\n   }\n\n   protected long checkedLoop (Sound sound) {\n      return checkedLoop(sound, 1);\n   }\n\n   protected long checkedPlay (Sound sound, float volume) {\n      int waitCounter = 0;\n      long soundId = 0;\n\n      boolean ready = false;\n      while (!ready &amp;&amp; waitCounter &lt; WaitLimit) {\n         soundId = sound.play(volume);\n         ready = (soundId != 0);\n         waitCounter++;\n         try {\n            Thread.sleep(ThrottleMs);\n         } catch (InterruptedException e) {\n         }\n      }\n\n      return soundId;\n   }\n\n   protected long checkedLoop (Sound sound, float volume) {\n      int waitCounter = 0;\n      long soundId = 0;\n\n      boolean ready = false;\n      while (!ready &amp;&amp; waitCounter &lt; WaitLimit) {\n         soundId = sound.loop(volume);\n         ready = (soundId != 0);\n         waitCounter++;\n         try {\n            Thread.sleep(ThrottleMs);\n         } catch (InterruptedException e) {\n         }\n      }\n\n      return soundId;\n   }\n\n@Override\npublic void dispose() {\n    // TODO Auto-generated method stub\n\n}\n}\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":1223835,"reputation":75878,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":2,"creation_date":1593664437,"post_id":62689010,"comment_id":110860654,"body_markdown":"Please explain your &quot;security issue&quot;. You seem to be fighting core Boot functionality, which is unlikely to end well.","body":"Please explain your &quot;security issue&quot;. You seem to be fighting core Boot functionality, which is unlikely to end well."},{"owner":{"account_id":891959,"reputation":1774,"user_id":930027,"accept_rate":62,"display_name":"Kevin Joymungol"},"score":0,"creation_date":1593670893,"post_id":62689010,"comment_id":110862465,"body_markdown":"@chrylis-cautiouslyoptimistic-In fact am using maven properties which I inject in my application.properties during packaging. These maven properties are sensitive boolean, they determine whether to enable encryption(production) or disable (development). Please refer to https://stackoverflow.com/questions/62677131/maven-disable-read-from-externalized-application-properties for more information","body":"@chrylis-cautiouslyoptimistic-In fact am using maven properties which I inject in my application.properties during packaging. These maven properties are sensitive boolean, they determine whether to enable encryption(production) or disable (development). Please refer to <a href=\"https://stackoverflow.com/questions/62677131/maven-disable-read-from-externalized-application-properties\" title=\"maven disable read from externalized application properties\">stackoverflow.com/questions/62677131/&hellip;</a> for more information"},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1593671081,"post_id":62689010,"comment_id":110862542,"body_markdown":"Don&#39;t use maven profiles for this (it means you are deploying different artifacts to different environments and kind of deploy an untested version of your artifact!). Just specify the properties at runtime OR specify a Spring profile at startup to enable/disable encryption. You are basically working around Spring Boot core functionality.","body":"Don&#39;t use maven profiles for this (it means you are deploying different artifacts to different environments and kind of deploy an untested version of your artifact!). Just specify the properties at runtime OR specify a Spring profile at startup to enable/disable encryption. You are basically working around Spring Boot core functionality."},{"owner":{"account_id":1223835,"reputation":75878,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":1,"creation_date":1593671662,"post_id":62689010,"comment_id":110862743,"body_markdown":"It&#39;s also entirely pointless as it&#39;s very easy to modify a text file inside a jar.","body":"It&#39;s also entirely pointless as it&#39;s very easy to modify a text file inside a jar."},{"owner":{"account_id":891959,"reputation":1774,"user_id":930027,"accept_rate":62,"display_name":"Kevin Joymungol"},"score":0,"creation_date":1593672102,"post_id":62689010,"comment_id":110862906,"body_markdown":"@chrylis-cautiouslyoptimistic- Is there any alternative using maven to pass parameters to spring boot without using resource files?","body":"@chrylis-cautiouslyoptimistic- Is there any alternative using maven to pass parameters to spring boot without using resource files?"}],"answers":[{"comments":[{"owner":{"account_id":1223835,"reputation":75878,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1593671631,"post_id":62689324,"comment_id":110862729,"body_markdown":"This isn&#39;t the case with Boot, which has a custom classloader.","body":"This isn&#39;t the case with Boot, which has a custom classloader."}],"tags":[],"owner":{"account_id":17213890,"reputation":1610,"user_id":12462444,"display_name":"andreoss"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593666035,"creation_date":1593666035,"answer_id":62689324,"question_id":62689010,"body_markdown":"The order in which your jar file and properties file are found in `CLASSPATH` matters here, as well as classloaders hierarchy (which JarLauncher gives you).\r\n\r\nYou can try to redefine bean for [ResourcePatternResolver](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/support/ResourcePatternResolver.html) in order to change this behavior and manually scan all classloaders for the resource.\r\nBut I would try a simple rearranging of CLASSPATH entries first.\r\n\r\n","title":"Spring boot force PropertySource to read from internal jar","body":"<p>The order in which your jar file and properties file are found in <code>CLASSPATH</code> matters here, as well as classloaders hierarchy (which JarLauncher gives you).</p>\n<p>You can try to redefine bean for <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/io/support/ResourcePatternResolver.html\" rel=\"nofollow noreferrer\">ResourcePatternResolver</a> in order to change this behavior and manually scan all classloaders for the resource.\nBut I would try a simple rearranging of CLASSPATH entries first.</p>\n"},{"tags":[],"owner":{"account_id":1716149,"reputation":1981,"user_id":1573161,"accept_rate":56,"display_name":"Abhishek Chatterjee"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699451744,"creation_date":1699451744,"answer_id":77446158,"question_id":62689010,"body_markdown":"This may quite late to answer it, but as I faced the same problem, I found the solution recommended by spring [here][1].\r\n\r\nHowever the solutions says to include internal config files into existing application.yml like\r\n\r\n    spring:\r\n      config:\r\n        import:\r\n          - classpath:module1.yml #no space\r\n          - classpath:module2.yml\r\n\r\n\r\n  [1]: https://spring.io/blog/2020/08/14/config-file-processing-in-spring-boot-2-4#importing-additional-configuration","title":"Spring boot force PropertySource to read from internal jar","body":"<p>This may quite late to answer it, but as I faced the same problem, I found the solution recommended by spring <a href=\"https://spring.io/blog/2020/08/14/config-file-processing-in-spring-boot-2-4#importing-additional-configuration\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>However the solutions says to include internal config files into existing application.yml like</p>\n<pre><code>spring:\n  config:\n    import:\n      - classpath:module1.yml #no space\n      - classpath:module2.yml\n</code></pre>\n"}],"owner":{"account_id":891959,"reputation":1774,"user_id":930027,"accept_rate":62,"display_name":"Kevin Joymungol"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":263,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1699451744,"creation_date":1593664002,"question_id":62689010,"body_markdown":"I have my class that reads properties from application.properties in Spring Boot\r\n\r\n    @Configuration\r\n    @Component\r\n    @PropertySource(&quot;classpath:application.properties&quot;)\r\n    public class TestUtil {\r\n    \r\n    \r\n        @Value(&quot;${usehttps}&quot;)\r\n        private String usehttps=&quot;&quot;;\r\n    \r\n        @Value(&quot;${verifycertificate}&quot;)\r\n        private String verifycertificate=&quot;&quot;;\r\n    \r\n    }\r\n\r\n\r\nThe problem is that I want my code to read the application.properties from my internal jar file only. application.properties is in src/main/resources. If I create an application.properties with same properties on the location where my jar resides, the properties get overwritten by the external file at runtime. It can be a security issue in my case.\r\n\r\nCan this be achieved? \r\n\r\n\r\n\r\n","title":"Spring boot force PropertySource to read from internal jar","body":"<p>I have my class that reads properties from application.properties in Spring Boot</p>\n<pre><code>@Configuration\n@Component\n@PropertySource(&quot;classpath:application.properties&quot;)\npublic class TestUtil {\n\n\n    @Value(&quot;${usehttps}&quot;)\n    private String usehttps=&quot;&quot;;\n\n    @Value(&quot;${verifycertificate}&quot;)\n    private String verifycertificate=&quot;&quot;;\n\n}\n</code></pre>\n<p>The problem is that I want my code to read the application.properties from my internal jar file only. application.properties is in src/main/resources. If I create an application.properties with same properties on the location where my jar resides, the properties get overwritten by the external file at runtime. It can be a security issue in my case.</p>\n<p>Can this be achieved?</p>\n"},{"tags":["java","selenium-webdriver","testng","allure"],"comments":[{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1679177455,"post_id":75771850,"comment_id":133675689,"body_markdown":"You probably shouldn&#39;t create a new `TestNGCucumberRunner` for every pickle. Have a look at what happens in `AbstractTestNGCucumberTests`.","body":"You probably shouldn&#39;t create a new <code>TestNGCucumberRunner</code> for every pickle. Have a look at what happens in <code>AbstractTestNGCucumberTests</code>."}],"owner":{"account_id":13429807,"reputation":1816,"user_id":9689945,"display_name":"hhrzc"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":516,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1699451526,"creation_date":1679084005,"question_id":75771850,"body_markdown":"I try to add a screenshot to the allure report, at the time when any test is failed. The file is created in the appropriate folder (/allure-results) but the attachment isn&#39;t added to the report. Actually, don&#39;t pay attention to the screenshot creation - as I determined any attachment isn&#39;t added to the report in this (`onTestFailure`) method, which is called each time when any test is fail.\r\n\r\nMy project structure:\r\n\r\nThe project is implemented with Cucumber which executes via TestNG.\r\nSo the &quot;Cucumber-Step-Class&quot; `DemoTest` extends the Base test that provides the possibility to execute tests from testng.XML file:\r\n\r\n```java\r\n@Listeners({TestEventsListener.class})\r\npublic class BaseTest extends AbstractTestNGCucumberTests {\r\n\r\n    @Override\r\n    @DataProvider(parallel = true)\r\n    public Object[][] scenarios() {\r\n        return super.scenarios();\r\n    }\r\n\r\n    @Test(description = &quot;Runs Cucumber Scenarios&quot;, dataProvider = &quot;scenarios&quot;)\r\n    public void runScenario(PickleWrapper pickleWrapper, FeatureWrapper featureWrapper) {\r\n        TestNGCucumberRunner testNGCucumberRunner = new TestNGCucumberRunner(this.getClass());\r\n        testNGCucumberRunner.runScenario(pickleWrapper.getPickle());\r\n    }\r\n}\r\n```\r\n\r\nthe `DemoTest`:\r\n```java\r\n@CucumberOptions(\r\n        features = {&quot;classpath:scenarios/demo/demo.feature&quot;},\r\n        glue = &quot;xxx.steps&quot;,\r\n        plugin = {&quot;io.qameta.allure.cucumber6jvm.AllureCucumber6Jvm&quot;}\r\n\r\n)\r\npublic class DemoTest extends BaseTest {\r\n\r\n....\r\n\r\n    @Given(&quot;Open the demo login page&quot;)\r\n    public void openTheDemoLoginPage() {\r\n        WebDriver driver = DriverProvider.getInstance().getDriver();\r\n        driver.get(&quot;https://google.com&quot;);\r\n        Utils.delayMillisec(5000);\r\n        AllureReporter.makeScreenshot(driver); &lt;&lt; there is attachment added to the allure report successfully, so this feature is works out of onTestFailure() method\r\n    throw new RuntimeException();// &quot;call&quot; the `TestEventsListener::onTestFailure` method\r\n    }\r\n```\r\n\r\nTestEventListener:\r\n\r\n```java\r\n\r\npublic class TestEventsListener implements ITestListener {\r\n\r\n    @Override\r\n    public void onTestFailure(ITestResult result) {\r\n        Logging.info(&quot;Test failed: &quot; + result); &lt; ----- this log is output, so the method is definitely called\r\n        Allure.addAttachment(&quot;Attachment&quot;, &quot;Added&quot;); &lt; --- unsuccessful attempt 1\r\n        AllureReporter.makeScreenshot(driver); &lt; ---- unsuccessful attempt 2\r\n    }\r\n```\r\n\r\nThe main point:\r\n\r\nThe screenshot is created in the `/allure-results` folder, but not added to the allure as an attachment in the result. So I suppose the test is stopped and allure-results formed before this method is called. I can&#39;t figure out why, and how to resolve it (in the simple TestNG project without Cucumber this way works well)\r\n","title":"Allure doesn&#39;t add attachments within onTestFailure() method?","body":"<p>I try to add a screenshot to the allure report, at the time when any test is failed. The file is created in the appropriate folder (/allure-results) but the attachment isn't added to the report. Actually, don't pay attention to the screenshot creation - as I determined any attachment isn't added to the report in this (<code>onTestFailure</code>) method, which is called each time when any test is fail.</p>\n<p>My project structure:</p>\n<p>The project is implemented with Cucumber which executes via TestNG.\nSo the &quot;Cucumber-Step-Class&quot; <code>DemoTest</code> extends the Base test that provides the possibility to execute tests from testng.XML file:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Listeners({TestEventsListener.class})\npublic class BaseTest extends AbstractTestNGCucumberTests {\n\n    @Override\n    @DataProvider(parallel = true)\n    public Object[][] scenarios() {\n        return super.scenarios();\n    }\n\n    @Test(description = &quot;Runs Cucumber Scenarios&quot;, dataProvider = &quot;scenarios&quot;)\n    public void runScenario(PickleWrapper pickleWrapper, FeatureWrapper featureWrapper) {\n        TestNGCucumberRunner testNGCucumberRunner = new TestNGCucumberRunner(this.getClass());\n        testNGCucumberRunner.runScenario(pickleWrapper.getPickle());\n    }\n}\n</code></pre>\n<p>the <code>DemoTest</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@CucumberOptions(\n        features = {&quot;classpath:scenarios/demo/demo.feature&quot;},\n        glue = &quot;xxx.steps&quot;,\n        plugin = {&quot;io.qameta.allure.cucumber6jvm.AllureCucumber6Jvm&quot;}\n\n)\npublic class DemoTest extends BaseTest {\n\n....\n\n    @Given(&quot;Open the demo login page&quot;)\n    public void openTheDemoLoginPage() {\n        WebDriver driver = DriverProvider.getInstance().getDriver();\n        driver.get(&quot;https://google.com&quot;);\n        Utils.delayMillisec(5000);\n        AllureReporter.makeScreenshot(driver); &lt;&lt; there is attachment added to the allure report successfully, so this feature is works out of onTestFailure() method\n    throw new RuntimeException();// &quot;call&quot; the `TestEventsListener::onTestFailure` method\n    }\n</code></pre>\n<p>TestEventListener:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic class TestEventsListener implements ITestListener {\n\n    @Override\n    public void onTestFailure(ITestResult result) {\n        Logging.info(&quot;Test failed: &quot; + result); &lt; ----- this log is output, so the method is definitely called\n        Allure.addAttachment(&quot;Attachment&quot;, &quot;Added&quot;); &lt; --- unsuccessful attempt 1\n        AllureReporter.makeScreenshot(driver); &lt; ---- unsuccessful attempt 2\n    }\n</code></pre>\n<p>The main point:</p>\n<p>The screenshot is created in the <code>/allure-results</code> folder, but not added to the allure as an attachment in the result. So I suppose the test is stopped and allure-results formed before this method is called. I can't figure out why, and how to resolve it (in the simple TestNG project without Cucumber this way works well)</p>\n"},{"tags":["java","protocol-buffers"],"comments":[{"owner":{"account_id":5434903,"reputation":1775,"user_id":11269045,"display_name":"Cl&#233;ment Jean"},"score":1,"creation_date":1651554867,"post_id":72089009,"comment_id":127385416,"body_markdown":"Is `Date` the one from `java.util` package or is it also a POJO type that you created?","body":"Is <code>Date</code> the one from <code>java.util</code> package or is it also a POJO type that you created?"}],"answers":[{"comments":[{"owner":{"account_id":5434903,"reputation":1775,"user_id":11269045,"display_name":"Cl&#233;ment Jean"},"score":0,"creation_date":1651550171,"post_id":72094572,"comment_id":127384823,"body_markdown":"Even though this is working perfectly for a C++ project, I think the question was related to Java.","body":"Even though this is working perfectly for a C++ project, I think the question was related to Java."}],"tags":[],"owner":{"account_id":7416163,"reputation":3397,"user_id":5738112,"display_name":"ramsay"},"comment_count":1,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1651548677,"creation_date":1651548677,"answer_id":72094572,"question_id":72089009,"body_markdown":"&gt; For timestamps type, we can import &quot;google/protobuf/timestamp.proto&quot;;.\r\n\r\nBecause `timestamp.proto` is some kinds of built-in message type included in Protobuf.\r\n\r\n&gt; But for Date type, we cant do the same since date.proto is in https://github.com/googleapis/googleapis/blob/master/google/type/date.proto.\r\n\r\n1. Firstly, you should clone the whole project or simply download whatever `proto` file you need (in this example, the `date.proto` file).\r\n2. Secondly, put `date.proto` into your project, you can create a directory for imports, for example: `google/type/date.proto`\r\n3. Finally, generating code with `protoc`; You have to use the `--proto_path` command-line flag (aka `-I`) to tell `protoc` where to look for `.proto` files. If you don&#39;t provide a path, by default it will only search the current directory: \r\n\r\n```sh\r\nprotoc -I.  --cpp_out=. usersvr.proto\r\n```\r\n\r\nThis is the structure of my demo project:\r\n```sh\r\n╰─$ tree                                                                                \r\n.\r\n├── google\r\n│   └── type\r\n│       └── date.proto\r\n├── usersvr.pb.cc\r\n├── usersvr.pb.h\r\n└── usersvr.proto\r\n```\r\n\r\nusersvr.proto:\r\n```protobuf\r\nsyntax = &quot;proto3&quot;;\r\npackage srv.user;\r\nimport &quot;google/protobuf/timestamp.proto&quot;;\r\nimport &quot;google/type/date.proto&quot;;\r\n\r\noption cc_generic_services = true;\r\nmessage BatchGetUserInfosRequest {\r\n  uint64 my_uid = 1;\r\n  repeated uint64 peer_uids = 2;\r\n  map&lt;string, string&gt; infos = 3;\r\n  google.protobuf.Timestamp timestamp = 4;\r\n  google.type.Date date = 5;\r\n}\r\n```\r\n\r\n`date.proto` is downloaded from https://github.com/googleapis/googleapis/blob/master/google/type/date.proto","title":"import date.proto in other proto file","body":"<blockquote>\n<p>For timestamps type, we can import &quot;google/protobuf/timestamp.proto&quot;;.</p>\n</blockquote>\n<p>Because <code>timestamp.proto</code> is some kinds of built-in message type included in Protobuf.</p>\n<blockquote>\n<p>But for Date type, we cant do the same since date.proto is in <a href=\"https://github.com/googleapis/googleapis/blob/master/google/type/date.proto\" rel=\"nofollow noreferrer\">https://github.com/googleapis/googleapis/blob/master/google/type/date.proto</a>.</p>\n</blockquote>\n<ol>\n<li>Firstly, you should clone the whole project or simply download whatever <code>proto</code> file you need (in this example, the <code>date.proto</code> file).</li>\n<li>Secondly, put <code>date.proto</code> into your project, you can create a directory for imports, for example: <code>google/type/date.proto</code></li>\n<li>Finally, generating code with <code>protoc</code>; You have to use the <code>--proto_path</code> command-line flag (aka <code>-I</code>) to tell <code>protoc</code> where to look for <code>.proto</code> files. If you don't provide a path, by default it will only search the current directory:</li>\n</ol>\n<pre class=\"lang-sh prettyprint-override\"><code>protoc -I.  --cpp_out=. usersvr.proto\n</code></pre>\n<p>This is the structure of my demo project:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>╰─$ tree                                                                                \n.\n├── google\n│   └── type\n│       └── date.proto\n├── usersvr.pb.cc\n├── usersvr.pb.h\n└── usersvr.proto\n</code></pre>\n<p>usersvr.proto:</p>\n<pre class=\"lang-proto prettyprint-override\"><code>syntax = &quot;proto3&quot;;\npackage srv.user;\nimport &quot;google/protobuf/timestamp.proto&quot;;\nimport &quot;google/type/date.proto&quot;;\n\noption cc_generic_services = true;\nmessage BatchGetUserInfosRequest {\n  uint64 my_uid = 1;\n  repeated uint64 peer_uids = 2;\n  map&lt;string, string&gt; infos = 3;\n  google.protobuf.Timestamp timestamp = 4;\n  google.type.Date date = 5;\n}\n</code></pre>\n<p><code>date.proto</code> is downloaded from <a href=\"https://github.com/googleapis/googleapis/blob/master/google/type/date.proto\" rel=\"nofollow noreferrer\">https://github.com/googleapis/googleapis/blob/master/google/type/date.proto</a></p>\n"},{"tags":[],"owner":{"account_id":5434903,"reputation":1775,"user_id":11269045,"display_name":"Cl&#233;ment Jean"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654933464,"creation_date":1651553522,"answer_id":72094909,"question_id":72089009,"body_markdown":"Assuming that you have your Gradle (or Maven) setup working properly and generating code, you&#39;ll have to copy the .proto file into you protobuf source file (eg: `project/src/main/proto`). You only need to copy this (if you care only about using it with Java):\r\n\r\n```proto\r\nsyntax = &quot;proto3&quot;;\r\n\r\npackage google.type;\r\n\r\noption java_multiple_files = true;\r\noption java_outer_classname = &quot;DateProto&quot;;\r\noption java_package = &quot;com.google.type&quot;;\r\n\r\nmessage Date {\r\n  int32 year = 1;\r\n  int32 month = 2;\r\n  int32 day = 3;\r\n}\r\n```\r\n\r\nThen you&#39;ll generate the Java code with your Gradle task (or maven) and you will have access to `Date`, by importing like this:\r\n\r\n```java\r\nimport com.google.type.Date;\r\n```\r\n\r\nAfter that, it&#39;s recommended to map properties of the `com.google.type.Date` to whatever type you are using as Date, it is better to not store the `com.google.type.Date` generated type directly. This will give you more control on your type whereas if you stored the generated one, you could not have the same amount of freedom as a Java object.\r\n\r\n**note: if you are willing to work directly with `Timestamp`, there are ways to transform them to `Date`**","title":"import date.proto in other proto file","body":"<p>Assuming that you have your Gradle (or Maven) setup working properly and generating code, you'll have to copy the .proto file into you protobuf source file (eg: <code>project/src/main/proto</code>). You only need to copy this (if you care only about using it with Java):</p>\n<pre><code>syntax = &quot;proto3&quot;;\n\npackage google.type;\n\noption java_multiple_files = true;\noption java_outer_classname = &quot;DateProto&quot;;\noption java_package = &quot;com.google.type&quot;;\n\nmessage Date {\n  int32 year = 1;\n  int32 month = 2;\n  int32 day = 3;\n}\n</code></pre>\n<p>Then you'll generate the Java code with your Gradle task (or maven) and you will have access to <code>Date</code>, by importing like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.google.type.Date;\n</code></pre>\n<p>After that, it's recommended to map properties of the <code>com.google.type.Date</code> to whatever type you are using as Date, it is better to not store the <code>com.google.type.Date</code> generated type directly. This will give you more control on your type whereas if you stored the generated one, you could not have the same amount of freedom as a Java object.</p>\n<p><strong>note: if you are willing to work directly with <code>Timestamp</code>, there are ways to transform them to <code>Date</code></strong></p>\n"},{"comments":[{"owner":{"account_id":165788,"reputation":508,"user_id":389514,"accept_rate":75,"display_name":"Tiberiu"},"score":0,"creation_date":1699446431,"post_id":76722605,"comment_id":136531815,"body_markdown":"Although this would be the best solution, it does not work.","body":"Although this would be the best solution, it does not work."},{"owner":{"account_id":13991015,"reputation":311,"user_id":10104999,"display_name":"SMilos"},"score":0,"creation_date":1699450403,"post_id":76722605,"comment_id":136532537,"body_markdown":"@Tiberiu, I have updated the answer.. I have added explanation how to import proto file from external library. \nDid you added import into your proto file?","body":"@Tiberiu, I have updated the answer.. I have added explanation how to import proto file from external library.  Did you added import into your proto file?"},{"owner":{"account_id":165788,"reputation":508,"user_id":389514,"accept_rate":75,"display_name":"Tiberiu"},"score":0,"creation_date":1699453726,"post_id":76722605,"comment_id":136533398,"body_markdown":"Yes, I added the import. [import &quot;google/protobuf/timestamp.proto&quot;;] is seen but [import &quot;google/type/date.proto&quot;;] is not. Not sure what is the difference since both dependencies are added to the pom file.","body":"Yes, I added the import. [import &quot;google/protobuf/timestamp.proto&quot;;] is seen but [import &quot;google/type/date.proto&quot;;] is not. Not sure what is the difference since both dependencies are added to the pom file."},{"owner":{"account_id":13991015,"reputation":311,"user_id":10104999,"display_name":"SMilos"},"score":0,"creation_date":1699455717,"post_id":76722605,"comment_id":136533954,"body_markdown":"timestamp.proto and date.proto are not in the same library.\ndate.proto is in proto-google-common-protos library.\nTry to find downloaded common-protos JAR and verify date.proto is inside. (Maybe date.proto is moved elsewhere in some version of lib)... And make sure you wrote import (in proto file) in correct case","body":"timestamp.proto and date.proto are not in the same library. date.proto is in proto-google-common-protos library. Try to find downloaded common-protos JAR and verify date.proto is inside. (Maybe date.proto is moved elsewhere in some version of lib)... And make sure you wrote import (in proto file) in correct case"},{"owner":{"account_id":165788,"reputation":508,"user_id":389514,"accept_rate":75,"display_name":"Tiberiu"},"score":0,"creation_date":1699456879,"post_id":76722605,"comment_id":136534251,"body_markdown":"Yes jar and date.proto is there. I added them in pom using:\n\t\t&lt;dependency&gt;\n            &lt;groupId&gt;com.google.api.grpc&lt;/groupId&gt;\n            &lt;artifactId&gt;proto-google-common-protos&lt;/artifactId&gt;\n            &lt;version&gt;2.22.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.protobuf&lt;/groupId&gt;\n            &lt;artifactId&gt;protobuf-java&lt;/artifactId&gt;\n            &lt;version&gt;3.24.2&lt;/version&gt;\n        &lt;/dependency&gt;\nAnd in proto file with:\n\timport &quot;google/type/date.proto&quot;;\n\timport &quot;google/protobuf/timestamp.proto&quot;;\nWith error &quot;google/type/date.proto: File not found.&quot;","body":"Yes jar and date.proto is there. I added them in pom using: \t\t&lt;dependency&gt;             &lt;groupId&gt;com.google.api.grpc&lt;/groupId&gt;             &lt;artifactId&gt;proto-google-common-protos&lt;/artifactId&gt;             &lt;version&gt;2.22.0&lt;/version&gt;         &lt;/dependency&gt;         &lt;dependency&gt;             &lt;groupId&gt;com.google.protobuf&lt;/groupId&gt;             &lt;artifactId&gt;protobuf-java&lt;/artifactId&gt;             &lt;version&gt;3.24.2&lt;/version&gt;         &lt;/dependency&gt; And in proto file with: \timport &quot;google/type/date.proto&quot;; \timport &quot;google/protobuf/timestamp.proto&quot;; With error &quot;google/type/date.proto: File not found.&quot;"},{"owner":{"account_id":13991015,"reputation":311,"user_id":10104999,"display_name":"SMilos"},"score":0,"creation_date":1699458576,"post_id":76722605,"comment_id":136534692,"body_markdown":"pom dependencies and imports in proto files look OK.","body":"pom dependencies and imports in proto files look OK."},{"owner":{"account_id":165788,"reputation":508,"user_id":389514,"accept_rate":75,"display_name":"Tiberiu"},"score":0,"creation_date":1699516732,"post_id":76722605,"comment_id":136542405,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/255892/discussion-between-tiberiu-and-smilos).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/255892/discussion-between-tiberiu-and-smilos\">continue this discussion in chat</a>."}],"tags":[],"owner":{"account_id":13991015,"reputation":311,"user_id":10104999,"display_name":"SMilos"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699451421,"creation_date":1689778309,"answer_id":76722605,"question_id":72089009,"body_markdown":"Some Google time/date protos are in separate library (different from google/protobuf) so you need to add a new dependency. If you are using Maven, the dependency is as follows:\r\n\r\n \r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.google.api.grpc&lt;/groupId&gt;\r\n        &lt;artifactId&gt;proto-google-common-protos&lt;/artifactId&gt;\r\n        &lt;version&gt;2.22.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nIf you add the dependency, you do not have to copy-paste proto files into your project (as it was suggested in other comments).\r\n\r\nAll you need to do then is to add import to your proto file (proto file name prefixed with its folder path).\r\nFor example: if you want to use timeOfDay.proto file, you need to add following import:\r\n\r\n    import &quot;google/type/timeofday.proto&quot;;\r\n\r\n\r\nThis library contains following proto files:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mkeij.png","title":"import date.proto in other proto file","body":"<p>Some Google time/date protos are in separate library (different from google/protobuf) so you need to add a new dependency. If you are using Maven, the dependency is as follows:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.google.api.grpc&lt;/groupId&gt;\n    &lt;artifactId&gt;proto-google-common-protos&lt;/artifactId&gt;\n    &lt;version&gt;2.22.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>If you add the dependency, you do not have to copy-paste proto files into your project (as it was suggested in other comments).</p>\n<p>All you need to do then is to add import to your proto file (proto file name prefixed with its folder path).\nFor example: if you want to use timeOfDay.proto file, you need to add following import:</p>\n<pre><code>import &quot;google/type/timeofday.proto&quot;;\n</code></pre>\n<p>This library contains following proto files:</p>\n<p><a href=\"https://i.stack.imgur.com/mkeij.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mkeij.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":8602812,"reputation":779,"user_id":7390103,"display_name":"Spaceship222"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4261,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":3,"score":6,"last_activity_date":1699451421,"creation_date":1651505568,"question_id":72089009,"body_markdown":"I am new to protocol buffer. I have some java pojo class which has a field of type Date including year, month and day only.  \r\n \r\nFor timestamps type, we can `import &quot;google/protobuf/timestamp.proto&quot;;`.\r\n\r\nBut for Date type, we cant do the same since date.proto is in `https://github.com/googleapis/googleapis/blob/master/google/type/date.proto`. \r\n\r\nSo how can I import this `date.proto`?","title":"import date.proto in other proto file","body":"<p>I am new to protocol buffer. I have some java pojo class which has a field of type Date including year, month and day only.</p>\n<p>For timestamps type, we can <code>import &quot;google/protobuf/timestamp.proto&quot;;</code>.</p>\n<p>But for Date type, we cant do the same since date.proto is in <code>https://github.com/googleapis/googleapis/blob/master/google/type/date.proto</code>.</p>\n<p>So how can I import this <code>date.proto</code>?</p>\n"},{"tags":["java","string","algorithm","replace","time-complexity"],"comments":[{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1699450284,"post_id":77445781,"comment_id":136532518,"body_markdown":"Your parameter types do not line up with the question as stated. The question as stated talks about a single text (but your method takes in an array of strings). The question as stated talks about searching for a single needle. But your code uses a `String[]`. Hence, your question makes no sense, and any talk about `O(mn)` requires stating what m and n are. Are they the number of elements in `String[] words`? The average length of each &#39;word&#39; element?","body":"Your parameter types do not line up with the question as stated. The question as stated talks about a single text (but your method takes in an array of strings). The question as stated talks about searching for a single needle. But your code uses a <code>String[]</code>. Hence, your question makes no sense, and any talk about <code>O(mn)</code> requires stating what m and n are. Are they the number of elements in <code>String[] words</code>? The average length of each &#39;word&#39; element?"},{"owner":{"account_id":29827225,"reputation":33,"user_id":22858842,"display_name":"Mason Kane"},"score":0,"creation_date":1699451186,"post_id":77445781,"comment_id":136532731,"body_markdown":"@rzwitserloot Oh I&#39;m sorry, every element of `word` and `text` array is one character. I didn&#39;t use char primitive type because of the line `text[i - k] = &quot;&quot;;`. `n` is the length of the text and `m` is the length of the word. Both `text` and `word` are an array of characters (in other words, strings). I just edited the code! thanks.","body":"@rzwitserloot Oh I&#39;m sorry, every element of <code>word</code> and <code>text</code> array is one character. I didn&#39;t use char primitive type because of the line <code>text[i - k] = &quot;&quot;;</code>. <code>n</code> is the length of the text and <code>m</code> is the length of the word. Both <code>text</code> and <code>word</code> are an array of characters (in other words, strings). I just edited the code! thanks."}],"owner":{"account_id":29827225,"reputation":33,"user_id":22858842,"display_name":"Mason Kane"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1699451308,"creation_date":1699448799,"question_id":77445781,"body_markdown":"I need an algorithm that takes a string as the main text and another string as a subtext. The algorithm should look for all the subtexts in the main text and change them to “X”. But if there are two or more subtexts next to each other, it should only put one “X”. For example, if the main text is abababccab and the subtext is ab, the output should be XccX. All the `ab`s are replaced with an “X”, but because there are two abs at the start, we only get one “X” there. Also, the algorithm should not use extra memory space (O(1) for memory space).\r\n\r\nI wrote this code in Java:\r\n\r\n```java\r\nimport java.util.Scanner;\r\n\r\npublic class DS_Replace {\r\n    public static void main(String[] args) {\r\n        Scanner scanner = new Scanner(System.in);\r\n        String[] text = scanner.next().split(&quot;&quot;);\r\n        String[] word = scanner.next().split(&quot;&quot;);\r\n        DSReplace(text, word);\r\n        for (String s : text) {\r\n            System.out.print(s);\r\n        }\r\n        System.out.println();\r\n    }\r\n\r\n    private static void DSReplace(String[] text, String[] word) {\r\n        int n = text.length;\r\n        int m = word.length;\r\n        outerLoop:\r\n        for (int i = 0; i &lt; n; i++) {\r\n            int count = 0;\r\n            if (text[i].equals(word[0])) {\r\n                whileLoop:\r\n                while (true) {\r\n                    for (int j = 0; j &lt; m; j++) {\r\n                        if (i + j + 1 &gt; n)\r\n                            break whileLoop;\r\n                        if (!text[i + j].equals(word[j])) {\r\n                            if (count == 0)\r\n                                continue outerLoop;\r\n                            else\r\n                                break whileLoop;\r\n                        }\r\n                    }\r\n                    count++;\r\n                    i += m;\r\n                }\r\n                for (int k = 1; k &lt;= m * count; k++) {\r\n                    if (k != 1)\r\n                        text[i - k] = &quot;&quot;;\r\n                    else\r\n                        text[i - k] = &quot;X&quot;;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAnd I think the time complexity of this algorithm is `O(mn)` where `n` is the length of the main text and `m` is the length of the specific substring. Am I right with the time complexity? Do you know any better ways to write the code?\r\n\r\nI would appreciate any help!","title":"An `O(mn)` in-place algorithm to replace a words repeatations in a text","body":"<p>I need an algorithm that takes a string as the main text and another string as a subtext. The algorithm should look for all the subtexts in the main text and change them to “X”. But if there are two or more subtexts next to each other, it should only put one “X”. For example, if the main text is abababccab and the subtext is ab, the output should be XccX. All the <code>ab</code>s are replaced with an “X”, but because there are two abs at the start, we only get one “X” there. Also, the algorithm should not use extra memory space (O(1) for memory space).</p>\n<p>I wrote this code in Java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\npublic class DS_Replace {\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n        String[] text = scanner.next().split(&quot;&quot;);\n        String[] word = scanner.next().split(&quot;&quot;);\n        DSReplace(text, word);\n        for (String s : text) {\n            System.out.print(s);\n        }\n        System.out.println();\n    }\n\n    private static void DSReplace(String[] text, String[] word) {\n        int n = text.length;\n        int m = word.length;\n        outerLoop:\n        for (int i = 0; i &lt; n; i++) {\n            int count = 0;\n            if (text[i].equals(word[0])) {\n                whileLoop:\n                while (true) {\n                    for (int j = 0; j &lt; m; j++) {\n                        if (i + j + 1 &gt; n)\n                            break whileLoop;\n                        if (!text[i + j].equals(word[j])) {\n                            if (count == 0)\n                                continue outerLoop;\n                            else\n                                break whileLoop;\n                        }\n                    }\n                    count++;\n                    i += m;\n                }\n                for (int k = 1; k &lt;= m * count; k++) {\n                    if (k != 1)\n                        text[i - k] = &quot;&quot;;\n                    else\n                        text[i - k] = &quot;X&quot;;\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>And I think the time complexity of this algorithm is <code>O(mn)</code> where <code>n</code> is the length of the main text and <code>m</code> is the length of the specific substring. Am I right with the time complexity? Do you know any better ways to write the code?</p>\n<p>I would appreciate any help!</p>\n"},{"tags":["java","nullpointerexception","null"],"comments":[{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":142,"creation_date":1280740640,"post_id":271526,"comment_id":3520844,"body_markdown":"@Shervin Encouraging nulls makes the code less understandable and less reliable.","body":"@Shervin Encouraging nulls makes the code less understandable and less reliable."},{"owner":{"account_id":1416578,"reputation":1743,"user_id":1342121,"display_name":"ianpojman"},"score":83,"creation_date":1339184414,"post_id":271526,"comment_id":14300015,"body_markdown":"Not using null is superior to most other suggestions here. Throw exceptions, don&#39;t return or allow nulls. BTW - &#39;assert&#39; keyword is useless, because it&#39;s disabled by default. Use an always-enabled failure mechanism","body":"Not using null is superior to most other suggestions here. Throw exceptions, don&#39;t return or allow nulls. BTW - &#39;assert&#39; keyword is useless, because it&#39;s disabled by default. Use an always-enabled failure mechanism"},{"owner":{"account_id":2102941,"reputation":7351,"user_id":1870054,"accept_rate":72,"display_name":"wener"},"score":0,"creation_date":1381342881,"post_id":271526,"comment_id":28546303,"body_markdown":"use [Lombok](http://projectlombok.org/), you got [@NotNull](http://projectlombok.org/features/NonNull.html)","body":"use <a href=\"http://projectlombok.org/\" rel=\"nofollow noreferrer\">Lombok</a>, you got <a href=\"http://projectlombok.org/features/NonNull.html\" rel=\"nofollow noreferrer\">@NotNull</a>"},{"owner":{"account_id":1216364,"reputation":9869,"user_id":1183884,"accept_rate":78,"display_name":"BlueCacti"},"score":1,"creation_date":1407915432,"post_id":271526,"comment_id":39394988,"body_markdown":"Isn&#39;t there are Design Pattern that speaks about making a null-object? So when instantiating a new object, you always use this null object (same super class, same [but empty] methods) and later on you set the object to the full object when you need it. You might want to check out a similar question: https://stackoverflow.com/questions/9162371/what-are-good-light-weight-design-patterns-for-avoid-nulls-in-java?rq=1 and this info about the Null Object Pattern: https://en.wikipedia.org/wiki/Null_Object_pattern","body":"Isn&#39;t there are Design Pattern that speaks about making a null-object? So when instantiating a new object, you always use this null object (same super class, same [but empty] methods) and later on you set the object to the full object when you need it. You might want to check out a similar question: <a href=\"https://stackoverflow.com/questions/9162371/what-are-good-light-weight-design-patterns-for-avoid-nulls-in-java?rq=1\" title=\"what are good light weight design patterns for avoid nulls in java\">stackoverflow.com/questions/9162371/&hellip;</a> and this info about the Null Object Pattern: <a href=\"https://en.wikipedia.org/wiki/Null_Object_pattern\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Null_Object_pattern</a>"},{"owner":{"account_id":2085072,"reputation":1306,"user_id":1856235,"display_name":"Andrii Polunin"},"score":4,"creation_date":1459775150,"post_id":271526,"comment_id":60423263,"body_markdown":"Nulls should be avoided in high-level code. Tony Hoare, who invented null references, calls them &quot;a billion-dollar mistake&quot;. Take a look [here](http://www.softwaregeek.net/2016/04/how-to-avoid-null-checks-in-java.html) for some ideas.","body":"Nulls should be avoided in high-level code. Tony Hoare, who invented null references, calls them &quot;a billion-dollar mistake&quot;. Take a look <a href=\"http://www.softwaregeek.net/2016/04/how-to-avoid-null-checks-in-java.html\" rel=\"nofollow noreferrer\">here</a> for some ideas."},{"owner":{"account_id":2543196,"reputation":177,"user_id":2208556,"accept_rate":50,"display_name":"Robert R Evans"},"score":3,"creation_date":1466701361,"post_id":271526,"comment_id":63439111,"body_markdown":"Seems to be in Java 8: static Objects.isNull(Object o) https://docs.oracle.com/javase/8/docs/api/java/util/Objects.html","body":"Seems to be in Java 8: static Objects.isNull(Object o) <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Objects.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/util/Objects.html</a>"},{"owner":{"account_id":3314475,"reputation":151,"user_id":2787149,"accept_rate":20,"display_name":"Abhishek kapoor"},"score":1,"creation_date":1488258825,"post_id":271526,"comment_id":72139761,"body_markdown":"How about wrapping the object with Optional . Use optional where ever you see possibility of nulls","body":"How about wrapping the object with Optional . Use optional where ever you see possibility of nulls"},{"owner":{"account_id":1820313,"reputation":1528,"user_id":1654526,"accept_rate":36,"display_name":"Jack"},"score":7,"creation_date":1624958527,"post_id":271526,"comment_id":120493140,"body_markdown":"The most common misuse of null is people returning null instead of an empty collection. That drives me crazy each time. Stop using nulls, and you&#39;ll live in a better world. Also, spread your code with `final` keyword and you&#39;ll live in a even better world.","body":"The most common misuse of null is people returning null instead of an empty collection. That drives me crazy each time. Stop using nulls, and you&#39;ll live in a better world. Also, spread your code with <code>final</code> keyword and you&#39;ll live in a even better world."},{"owner":{"account_id":3747925,"reputation":145,"user_id":3116163,"display_name":"Benedikt M."},"score":1,"creation_date":1649083859,"post_id":271526,"comment_id":126780372,"body_markdown":"@Abhishekkapoor Optionals are not meant to be used as parameters or return values. They&#39;re only to be used in functional programming (e.g. streams).","body":"@Abhishekkapoor Optionals are not meant to be used as parameters or return values. They&#39;re only to be used in functional programming (e.g. streams)."},{"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"score":0,"creation_date":1657580693,"post_id":271526,"comment_id":128840170,"body_markdown":"@Abhishekkapoor Using Option on input parameters is an understandable idea, but it&#39;s actually a very bad idea in practice. I have a blog about this where I give several examples, all taken from production code, where this practices causes more trouble than it&#39;s worth. If you&#39;re interested, read it at https://github.com/SwingGuy1024/Blog/blob/master/Bad%20Uses%20of%20Optional.md","body":"@Abhishekkapoor Using Option on input parameters is an understandable idea, but it&#39;s actually a very bad idea in practice. I have a blog about this where I give several examples, all taken from production code, where this practices causes more trouble than it&#39;s worth. If you&#39;re interested, read it at <a href=\"https://github.com/SwingGuy1024/Blog/blob/master/Bad%20Uses%20of%20Optional.md\" rel=\"nofollow noreferrer\">github.com/SwingGuy1024/Blog/blob/master/&hellip;</a>"},{"owner":{"account_id":20817839,"reputation":396,"user_id":15290244,"display_name":"Simao Gomes Viana"},"score":0,"creation_date":1690558505,"post_id":271526,"comment_id":135375335,"body_markdown":"Use Optionals or Kotlin","body":"Use Optionals or Kotlin"},{"owner":{"account_id":4417874,"reputation":519,"user_id":3598880,"accept_rate":38,"display_name":"barbariania"},"score":0,"creation_date":1695820814,"post_id":271526,"comment_id":136075151,"body_markdown":"Probably you were looking for \n`Optional.ofNullable(x).ifPresent(xV -&gt; xV.someAction());`","body":"Probably you were looking for  <code>Optional.ofNullable(x).ifPresent(xV -&gt; xV.someAction());</code>"}],"answers":[{"comments":[{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":19,"creation_date":1256979737,"post_id":271553,"comment_id":1525273,"body_markdown":"Problem is that usually you loose context as the NullPointerException does not indicate WHICH variable was null, and you may have several &quot;.&quot;-operations on the line.\n\nUsing &quot;if (foo == null) throw new RuntimeException(&quot;foo == null&quot;)&quot; allows you to state explicitly WHAT was wrong, giving your stack trace much more value to those who have to fix it.","body":"Problem is that usually you loose context as the NullPointerException does not indicate WHICH variable was null, and you may have several &quot;.&quot;-operations on the line.  Using &quot;if (foo == null) throw new RuntimeException(&quot;foo == null&quot;)&quot; allows you to state explicitly WHAT was wrong, giving your stack trace much more value to those who have to fix it."},{"owner":{"account_id":70730,"reputation":3152,"user_id":204840,"accept_rate":68,"display_name":"cthulhu"},"score":1,"creation_date":1295355181,"post_id":271553,"comment_id":5218513,"body_markdown":"With Andersen - I would love Java&#39;s exception system to be able to include the name of a variable that&#39;s being worked upon, so that NullPointerExceptions would not only indicate the line the exception occurred on, but also the variable name. This should work just fine in unobfuscated software.","body":"With Andersen - I would love Java&#39;s exception system to be able to include the name of a variable that&#39;s being worked upon, so that NullPointerExceptions would not only indicate the line the exception occurred on, but also the variable name. This should work just fine in unobfuscated software."},{"owner":{"account_id":268625,"reputation":5919,"user_id":2047962,"accept_rate":70,"display_name":"RustyTheBoyRobot"},"score":3,"creation_date":1366132330,"post_id":271553,"comment_id":22890506,"body_markdown":"I had a professor that preached against method call chaining. His theory was that you should be wary of call chains that were longer than 2 methods. I don&#39;t know if that&#39;s a hard rule, but it definitely removes most of the problems with NPE stack traces.","body":"I had a professor that preached against method call chaining. His theory was that you should be wary of call chains that were longer than 2 methods. I don&#39;t know if that&#39;s a hard rule, but it definitely removes most of the problems with NPE stack traces."},{"owner":{"account_id":1518433,"reputation":1029,"user_id":1418838,"display_name":"Haakon L&#248;tveit"},"score":0,"creation_date":1675244238,"post_id":271553,"comment_id":132884805,"body_markdown":"@RustyTheBoyRobot You could just put each call on the chain on its own line. That way you can still chain until the cows come home, but you know exactly where things went awry.","body":"@RustyTheBoyRobot You could just put each call on the chain on its own line. That way you can still chain until the cows come home, but you know exactly where things went awry."}],"tags":[],"owner":{"account_id":15305,"reputation":1688,"user_id":32168,"display_name":"Jim Nelson"},"comment_count":4,"down_vote_count":0,"up_vote_count":83,"is_accepted":false,"score":83,"last_activity_date":1226047824,"creation_date":1226047824,"answer_id":271553,"question_id":271526,"body_markdown":"Rather than Null Object Pattern -- which has its uses -- you might consider situations where the null object is a bug.\r\n\r\nWhen the exception is thrown, examine the stack trace and work through the bug.","title":"How do I avoid checking for nulls in Java?","body":"<p>Rather than Null Object Pattern -- which has its uses -- you might consider situations where the null object is a bug.</p>\n\n<p>When the exception is thrown, examine the stack trace and work through the bug.</p>\n"},{"comments":[{"owner":{"account_id":4667026,"reputation":10199,"user_id":3779853,"accept_rate":85,"display_name":"phil294"},"score":4,"creation_date":1488070481,"post_id":271557,"comment_id":72069008,"body_markdown":"No, [do not use assertions in production code](http://stackoverflow.com/a/21245984/3779853).","body":"No, <a href=\"http://stackoverflow.com/a/21245984/3779853\">do not use assertions in production code</a>."}],"tags":[],"owner":{"account_id":7340,"reputation":12654,"user_id":12719,"display_name":"pgras"},"comment_count":1,"down_vote_count":1,"up_vote_count":105,"is_accepted":false,"score":104,"last_activity_date":1250261088,"creation_date":1226048126,"answer_id":271557,"question_id":271526,"body_markdown":"- If you consider an object should not be null (or it is a bug) use an assert.\r\n- If your method doesn&#39;t accept null params say it in the javadoc and use an assert.\r\n\r\nYou have to check for object != null only if you want to handle the case where the object may be null...\r\n\r\nThere is a proposal to add new annotations in Java7 to help with null / notnull params:\r\n[http://tech.puredanger.com/java7/#jsr308][1]\r\n\r\n\r\n  [1]: http://tech.puredanger.com/java7/#jsr308","title":"How do I avoid checking for nulls in Java?","body":"<ul>\n<li>If you consider an object should not be null (or it is a bug) use an assert.</li>\n<li>If your method doesn't accept null params say it in the javadoc and use an assert.</li>\n</ul>\n\n<p>You have to check for object != null only if you want to handle the case where the object may be null...</p>\n\n<p>There is a proposal to add new annotations in Java7 to help with null / notnull params:\n<a href=\"http://tech.puredanger.com/java7/#jsr308\" rel=\"noreferrer\">http://tech.puredanger.com/java7/#jsr308</a></p>\n"},{"comments":[{"owner":{"account_id":1358888,"reputation":5876,"user_id":1296660,"display_name":"Supericy"},"score":2,"creation_date":1371153718,"post_id":271576,"comment_id":24730588,"body_markdown":"But then you have to assume `equals` (could be any method) will handle null correctly. Really all this is doing is passing the responsibility to someone else (or another method).","body":"But then you have to assume <code>equals</code> (could be any method) will handle null correctly. Really all this is doing is passing the responsibility to someone else (or another method)."},{"owner":{"account_id":472669,"reputation":9843,"user_id":881272,"accept_rate":67,"display_name":"Angelo Fuchs"},"score":5,"creation_date":1375169190,"post_id":271576,"comment_id":26216028,"body_markdown":"@Supericy Basically yes, but `equals` (or whatever method) has to check for `null` anyway. Or state explicitly that it does not.","body":"@Supericy Basically yes, but <code>equals</code> (or whatever method) has to check for <code>null</code> anyway. Or state explicitly that it does not."}],"tags":[],"owner":{"account_id":16029,"reputation":498865,"user_id":34509,"accept_rate":62,"display_name":"Johannes Schaub - litb"},"comment_count":2,"down_vote_count":0,"up_vote_count":84,"is_accepted":false,"score":84,"last_activity_date":1450206171,"creation_date":1226048651,"answer_id":271576,"question_id":271526,"body_markdown":"Sometimes, you have methods that operate on its parameters that define a symmetric operation:\r\n\r\n    a.f(b); &lt;-&gt; b.f(a);\r\n\r\nIf you know b can never be null, you can just swap it. It is most useful for equals:\r\nInstead of `foo.equals(&quot;bar&quot;);` better do `&quot;bar&quot;.equals(foo);`.\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>Sometimes, you have methods that operate on its parameters that define a symmetric operation:</p>\n\n<pre><code>a.f(b); &lt;-&gt; b.f(a);\n</code></pre>\n\n<p>If you know b can never be null, you can just swap it. It is most useful for equals:\nInstead of <code>foo.equals(\"bar\");</code> better do <code>\"bar\".equals(foo);</code>.</p>\n"},{"comments":[{"owner":{"account_id":62000,"reputation":5952,"user_id":184456,"accept_rate":88,"display_name":"monojohnny"},"score":5,"creation_date":1263477456,"post_id":271587,"comment_id":1993029,"body_markdown":"Also you can use the more generic version from Apache Commons, quite useful at the start of methods to check params I find.\n\n Validate.notNull( object, &quot;object must not be null&quot;);\n\nhttp://commons.apache.org/lang/apidocs/org/apache/commons/lang/Validate.html","body":"Also you can use the more generic version from Apache Commons, quite useful at the start of methods to check params I find.   Validate.notNull( object, &quot;object must not be null&quot;);  <a href=\"http://commons.apache.org/lang/apidocs/org/apache/commons/lang/Validate.html\" rel=\"nofollow noreferrer\">commons.apache.org/lang/apidocs/org/apache/commons/lang/&hellip;</a>"},{"owner":{"account_id":2794245,"reputation":579,"user_id":2403791,"display_name":"TomasMolina"},"score":0,"creation_date":1512835411,"post_id":271587,"comment_id":82421359,"body_markdown":"@monojohnny  does Validate use Assert statements into?. i ask that because Assert may be activate / deactivate on JVM and it&#39;s suggest do not use in production.","body":"@monojohnny  does Validate use Assert statements into?. i ask that because Assert may be activate / deactivate on JVM and it&#39;s suggest do not use in production."},{"owner":{"account_id":62000,"reputation":5952,"user_id":184456,"accept_rate":88,"display_name":"monojohnny"},"score":0,"creation_date":1515249925,"post_id":271587,"comment_id":83233569,"body_markdown":"Don&#39;t think so - I believe it just throws a RuntimeException if validation fails","body":"Don&#39;t think so - I believe it just throws a RuntimeException if validation fails"}],"tags":[],"owner":{"account_id":13696,"reputation":17531,"user_id":27657,"accept_rate":65,"display_name":"javamonkey79"},"comment_count":3,"down_vote_count":1,"up_vote_count":135,"is_accepted":false,"score":134,"last_activity_date":1456229653,"creation_date":1226049019,"answer_id":271587,"question_id":271526,"body_markdown":"Depending on what kind of objects you are checking you may be able to use some of the classes in the apache commons such as: [apache commons lang][1] and [apache commons collections][2]\r\n\r\nExample: \r\n\r\n    String foo;\r\n    ...\r\n    if( StringUtils.isBlank( foo ) ) {\r\n       ///do something\r\n    }\r\nor (depending on what you need to check):\r\n\r\n    String foo;\r\n    ...\r\n    if( StringUtils.isEmpty( foo ) ) {\r\n       ///do something\r\n    }\r\n\r\nThe StringUtils class is only one of many; there are quite a few good classes in the commons that do null safe manipulation.\r\n\r\n\r\n  [1]: http://commons.apache.org/lang/\r\n  [2]: http://commons.apache.org/collections/\r\n\r\n\r\n\r\n\r\n\r\nHere follows an example of how you can use null vallidation in JAVA when you include apache library(commons-lang-2.4.jar)\r\n\r\n    public DOCUMENT read(String xml, ValidationEventHandler validationEventHandler) {\r\n\t\tValidate.notNull(validationEventHandler,&quot;ValidationHandler not Injected&quot;);\r\n\t\treturn read(new StringReader(xml), true, validationEventHandler);\r\n\t}\r\n\r\nAnd if you are using Spring, Spring also has the same functionality in its package, see library(spring-2.4.6.jar) \r\n\r\nExample on how to use this static classf from spring(org.springframework.util.Assert)\r\n\r\n    Assert.notNull(validationEventHandler,&quot;ValidationHandler not Injected&quot;);\r\n\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>Depending on what kind of objects you are checking you may be able to use some of the classes in the apache commons such as: <a href=\"http://commons.apache.org/lang/\" rel=\"noreferrer\">apache commons lang</a> and <a href=\"http://commons.apache.org/collections/\" rel=\"noreferrer\">apache commons collections</a></p>\n\n<p>Example: </p>\n\n<pre><code>String foo;\n...\nif( StringUtils.isBlank( foo ) ) {\n   ///do something\n}\n</code></pre>\n\n<p>or (depending on what you need to check):</p>\n\n<pre><code>String foo;\n...\nif( StringUtils.isEmpty( foo ) ) {\n   ///do something\n}\n</code></pre>\n\n<p>The StringUtils class is only one of many; there are quite a few good classes in the commons that do null safe manipulation.</p>\n\n<p>Here follows an example of how you can use null vallidation in JAVA when you include apache library(commons-lang-2.4.jar)</p>\n\n<pre><code>public DOCUMENT read(String xml, ValidationEventHandler validationEventHandler) {\n    Validate.notNull(validationEventHandler,\"ValidationHandler not Injected\");\n    return read(new StringReader(xml), true, validationEventHandler);\n}\n</code></pre>\n\n<p>And if you are using Spring, Spring also has the same functionality in its package, see library(spring-2.4.6.jar) </p>\n\n<p>Example on how to use this static classf from spring(org.springframework.util.Assert)</p>\n\n<pre><code>Assert.notNull(validationEventHandler,\"ValidationHandler not Injected\");\n</code></pre>\n"},{"comments":[{"owner":{"account_id":137237,"reputation":13989,"user_id":341291,"accept_rate":76,"display_name":"Axel"},"score":101,"creation_date":1312908433,"post_id":271616,"comment_id":8355749,"body_markdown":"What&#39;s the point in throwing IllegalArgumentException? I think NullPointerException would be clearer, and that would also be thrown if you don&#39;t do the null-check yourself. I&#39;d either use assert or nothing at all.","body":"What&#39;s the point in throwing IllegalArgumentException? I think NullPointerException would be clearer, and that would also be thrown if you don&#39;t do the null-check yourself. I&#39;d either use assert or nothing at all."},{"owner":{"account_id":14095,"reputation":1554,"user_id":28683,"accept_rate":50,"display_name":"myplacedk"},"score":24,"creation_date":1313411219,"post_id":271616,"comment_id":8451120,"body_markdown":"It&#39;s unlikely that every other value than null is acceptable. You could have IllegalArgumentException, OutOfRageException etc etc. Sometimes this makes sense. Other times you end up creating a lot of exception classes that doesn&#39;t add any value, then you just use IllegalArgumentException. It doesn&#39;t makes sense to have one exception for null-input, and another one for everything else.","body":"It&#39;s unlikely that every other value than null is acceptable. You could have IllegalArgumentException, OutOfRageException etc etc. Sometimes this makes sense. Other times you end up creating a lot of exception classes that doesn&#39;t add any value, then you just use IllegalArgumentException. It doesn&#39;t makes sense to have one exception for null-input, and another one for everything else."},{"owner":{"account_id":137237,"reputation":13989,"user_id":341291,"accept_rate":76,"display_name":"Axel"},"score":7,"creation_date":1314012014,"post_id":271616,"comment_id":8571644,"body_markdown":"Yes, I agree to fail-fast-principle, but in the example given above, the value is not passed on, but is the object on which a method shall be called. So it fails equallys fast, and adding a null check just to throw an exception that would be thrown anyway at the same time and place doesn&#39;t seem to make debugging any easier.","body":"Yes, I agree to fail-fast-principle, but in the example given above, the value is not passed on, but is the object on which a method shall be called. So it fails equallys fast, and adding a null check just to throw an exception that would be thrown anyway at the same time and place doesn&#39;t seem to make debugging any easier."},{"owner":{"account_id":68904,"reputation":1177,"user_id":200802,"display_name":"charstar"},"score":3,"creation_date":1322906042,"post_id":271616,"comment_id":10323356,"body_markdown":"I agree with @Axel in that IllegalArgumentException implies (as I use it anyway) that a precondition for the argument does not hold as it pertains to a _constraint_ on the parameter. A null parameter is usually just &quot;a general error in programming&quot; and not an application/API specific constraint. To maintain a defensive fail-fast strategy, there&#39;s nothing stopping anyone for checking for a null and throwing a NullPointerException... which exactly conveys what happened, namely, &quot;you didn&#39;t program it right&quot; :)","body":"I agree with @Axel in that IllegalArgumentException implies (as I use it anyway) that a precondition for the argument does not hold as it pertains to a <i>constraint</i> on the parameter. A null parameter is usually just &quot;a general error in programming&quot; and not an application/API specific constraint. To maintain a defensive fail-fast strategy, there&#39;s nothing stopping anyone for checking for a null and throwing a NullPointerException... which exactly conveys what happened, namely, &quot;you didn&#39;t program it right&quot; :)"},{"owner":{"account_id":67340,"reputation":3835,"user_id":197101,"accept_rate":74,"display_name":"Visionary Software Solutions"},"score":2,"creation_date":1347042203,"post_id":271616,"comment_id":16538947,"body_markdown":"&quot;A null parameter is usually just &quot;a general error in programming&quot; and not an application/API specific constraint.&quot; Naive. You can use this as a security hole to DoS or attempt to gain stacktrace info (if such information is not supressed). http://osvdb.org/show/osvdb/67379 \n\nIf your API is public and you don&#39;t explicitly define the boundaries you accept--both through API docs and whatever tools you can use to ensure validity of the contract-- the caller&#39;s free to do whatever they want. __You__ are the one who didn&#39;t program right then, not the caller.","body":"&quot;A null parameter is usually just &quot;a general error in programming&quot; and not an application/API specific constraint.&quot; Naive. You can use this as a security hole to DoS or attempt to gain stacktrace info (if such information is not supressed). <a href=\"http://osvdb.org/show/osvdb/67379\" rel=\"nofollow noreferrer\">osvdb.org/show/osvdb/67379</a>   If your API is public and you don&#39;t explicitly define the boundaries you accept--both through API docs and whatever tools you can use to ensure validity of the contract-- the caller&#39;s free to do whatever they want. <b>You</b> are the one who didn&#39;t program right then, not the caller."},{"owner":{"account_id":113085,"reputation":18448,"user_id":298029,"display_name":"fgb"},"score":8,"creation_date":1365381575,"post_id":271616,"comment_id":22590312,"body_markdown":"A security hole? The JDK is full of code like this. If you don&#39;t want the user to see stacktraces, then just disable them. No one implied that the behaviour is not documented. MySQL is written in C where dereferencing null pointers is undefined behaviour, nothing like throwing an exception.","body":"A security hole? The JDK is full of code like this. If you don&#39;t want the user to see stacktraces, then just disable them. No one implied that the behaviour is not documented. MySQL is written in C where dereferencing null pointers is undefined behaviour, nothing like throwing an exception."},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":9,"creation_date":1366500901,"post_id":271616,"comment_id":23034519,"body_markdown":"`throw new IllegalArgumentException(&quot;object==null&quot;)`","body":"<code>throw new IllegalArgumentException(&quot;object==null&quot;)</code>"},{"owner":{"account_id":130645,"reputation":81705,"user_id":330057,"accept_rate":77,"display_name":"corsiKa"},"score":2,"creation_date":1371165407,"post_id":271616,"comment_id":24735455,"body_markdown":"@myplacedk I think it does make sense to have a different exception for null values passed in that from improper values passed in. The two are usually results of different types of programming errors. Null values usually arise from some required computation not happening, while other problems usually arise from required computations being incorrect.","body":"@myplacedk I think it does make sense to have a different exception for null values passed in that from improper values passed in. The two are usually results of different types of programming errors. Null values usually arise from some required computation not happening, while other problems usually arise from required computations being incorrect."},{"owner":{"account_id":1922154,"reputation":3638,"user_id":1733377,"accept_rate":90,"display_name":"Michael Plautz"},"score":1,"creation_date":1431482489,"post_id":271616,"comment_id":48513976,"body_markdown":"@Axel the whole point of using anything other than RuntimeException is the descriptiveness of the Exception. Why IllegalArgumentException over NullPointerException? Because when you are debugging an exception caused by this, the IllegalArgumentException is abundantly more obvious, especially when you put a message on it. This especially applies to enterprise applications when NullPointerExceptions creep up (yes, these happen in enterprise applications). In this same example, the programmer may not have control over whether or not assertions get processed by the JVM.","body":"@Axel the whole point of using anything other than RuntimeException is the descriptiveness of the Exception. Why IllegalArgumentException over NullPointerException? Because when you are debugging an exception caused by this, the IllegalArgumentException is abundantly more obvious, especially when you put a message on it. This especially applies to enterprise applications when NullPointerExceptions creep up (yes, these happen in enterprise applications). In this same example, the programmer may not have control over whether or not assertions get processed by the JVM."},{"owner":{"account_id":69301,"reputation":10391,"user_id":201722,"accept_rate":95,"display_name":"luis.espinal"},"score":8,"creation_date":1471022939,"post_id":271616,"comment_id":65203727,"body_markdown":"1/2 I have to agree that a `IllegalArgumentException` is better than a plain-vanilla `NPE` for these type of situations. I see a NPE as an indication that somewhere in the code, something unsafely de-referenced an expression that happened to be null (assuming all known and declared preconditions and invariants were met). An illegal argument exception OTH tells me a well-known precondition or invariant was not met.","body":"1/2 I have to agree that a <code>IllegalArgumentException</code> is better than a plain-vanilla <code>NPE</code> for these type of situations. I see a NPE as an indication that somewhere in the code, something unsafely de-referenced an expression that happened to be null (assuming all known and declared preconditions and invariants were met). An illegal argument exception OTH tells me a well-known precondition or invariant was not met."},{"owner":{"account_id":69301,"reputation":10391,"user_id":201722,"accept_rate":95,"display_name":"luis.espinal"},"score":8,"creation_date":1471023227,"post_id":271616,"comment_id":65203849,"body_markdown":"2/2 - That is, a NPE tells me there is a yet-undocumented null bug within the method (or within the methods it calls) or that there is a null precondition that we have not coded for. An illegal argument exception tells there is a bug *outside* of this method lying somewhere along the call chain that leads to the current method. Sticking to this pattern (within reason obviously), it does lead to faster root-cause analysis of errors (specially the nasty, intertwined ones.)","body":"2/2 - That is, a NPE tells me there is a yet-undocumented null bug within the method (or within the methods it calls) or that there is a null precondition that we have not coded for. An illegal argument exception tells there is a bug <i>outside</i> of this method lying somewhere along the call chain that leads to the current method. Sticking to this pattern (within reason obviously), it does lead to faster root-cause analysis of errors (specially the nasty, intertwined ones.)"},{"owner":{"account_id":3452279,"reputation":37360,"user_id":2891664,"accept_rate":100,"display_name":"Radiodef"},"score":4,"creation_date":1494193887,"post_id":271616,"comment_id":74710692,"body_markdown":"Throwing `NullPointerException` is the Java convention. See e.g. [`Objects.requireNonNull`](http://docs.oracle.com/javase/8/docs/api/java/util/Objects.html#requireNonNull-T-) which is *&quot;primarily for doing parameter validation in methods and constructors&quot;* and throws `NullPointerException`. There is also simply the doc for [`NullPointerException`](http://docs.oracle.com/javase/8/docs/api/java/lang/NullPointerException.html) which states that *&quot;applications should throw instances of this class to indicate other illegal uses of the `null` object&quot;*.","body":"Throwing <code>NullPointerException</code> is the Java convention. See e.g. <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Objects.html#requireNonNull-T-\" rel=\"nofollow noreferrer\"><code>Objects.requireNonNull</code></a> which is <i>&quot;primarily for doing parameter validation in methods and constructors&quot;</i> and throws <code>NullPointerException</code>. There is also simply the doc for <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/NullPointerException.html\" rel=\"nofollow noreferrer\"><code>NullPointerException</code></a> which states that <i>&quot;applications should throw instances of this class to indicate other illegal uses of the <code>null</code> object&quot;</i>."},{"owner":{"account_id":2450311,"reputation":3009,"user_id":2136767,"accept_rate":74,"display_name":"Paul"},"score":0,"creation_date":1678445711,"post_id":271616,"comment_id":133538090,"body_markdown":"Agree with @luis.espinal on the differential uses of NPE and IAE.  However, this suggests - to me at least - that Java is really lacking a `NullArgumentException` as a subclass of `IllegalArgumentException`.","body":"Agree with @luis.espinal on the differential uses of NPE and IAE.  However, this suggests - to me at least - that Java is really lacking a <code>NullArgumentException</code> as a subclass of <code>IllegalArgumentException</code>."}],"tags":[],"owner":{"account_id":14095,"reputation":1554,"user_id":28683,"accept_rate":50,"display_name":"myplacedk"},"comment_count":13,"down_vote_count":3,"up_vote_count":354,"is_accepted":false,"score":351,"last_activity_date":1468918966,"creation_date":1226050020,"answer_id":271616,"question_id":271526,"body_markdown":"## If null-values are not allowed ##\r\nIf your method is called externally, start with something like this:\r\n\r\n    public void method(Object object) {\r\n      if (object == null) {\r\n        throw new IllegalArgumentException(&quot;...&quot;);\r\n      }\r\n\r\nThen, in the rest of that method, you&#39;ll know that `object` is not null.\r\n\r\nIf it is an internal method (not part of an API), just document that it cannot be null, and that&#39;s it.\r\n\r\nExample:\r\n\r\n    public String getFirst3Chars(String text) {\r\n      return text.subString(0, 3);\r\n    }\r\n\r\nHowever, if your method just passes the value on, and the next method passes it on etc. it could get problematic. In that case you may want to check the argument as above.\r\n\r\n## If null is allowed ##\r\nThis really depends. If find that I often do something like this:\r\n\r\n    if (object == null) {\r\n      // something\r\n    } else {\r\n      // something else\r\n    }\r\n\r\nSo I branch, and do two completely different things. There is no ugly code snippet, because I really need to do two different things depending on the data. For example, should I work on the input, or should I calculate a good default value?\r\n\r\n----------\r\n\r\nIt&#39;s actually rare for me to use the idiom &quot;`if (object != null &amp;&amp; ...`&quot;.\r\n\r\nIt may be easier to give you examples, if you show examples of where you typically use the idiom.","title":"How do I avoid checking for nulls in Java?","body":"<h2>If null-values are not allowed</h2>\n\n<p>If your method is called externally, start with something like this:</p>\n\n<pre><code>public void method(Object object) {\n  if (object == null) {\n    throw new IllegalArgumentException(\"...\");\n  }\n</code></pre>\n\n<p>Then, in the rest of that method, you'll know that <code>object</code> is not null.</p>\n\n<p>If it is an internal method (not part of an API), just document that it cannot be null, and that's it.</p>\n\n<p>Example:</p>\n\n<pre><code>public String getFirst3Chars(String text) {\n  return text.subString(0, 3);\n}\n</code></pre>\n\n<p>However, if your method just passes the value on, and the next method passes it on etc. it could get problematic. In that case you may want to check the argument as above.</p>\n\n<h2>If null is allowed</h2>\n\n<p>This really depends. If find that I often do something like this:</p>\n\n<pre><code>if (object == null) {\n  // something\n} else {\n  // something else\n}\n</code></pre>\n\n<p>So I branch, and do two completely different things. There is no ugly code snippet, because I really need to do two different things depending on the data. For example, should I work on the input, or should I calculate a good default value?</p>\n\n<hr>\n\n<p>It's actually rare for me to use the idiom \"<code>if (object != null &amp;&amp; ...</code>\".</p>\n\n<p>It may be easier to give you examples, if you show examples of where you typically use the idiom.</p>\n"},{"tags":[],"owner":{"account_id":4413,"reputation":40863,"user_id":6610,"accept_rate":72,"display_name":"xtofl"},"comment_count":0,"down_vote_count":0,"up_vote_count":39,"is_accepted":false,"score":39,"last_activity_date":1593087868,"creation_date":1226050037,"answer_id":271617,"question_id":271526,"body_markdown":"\r\nAsking that question points out that you may be interested in error handling strategies.  How and where to handle errors is a pervasive architectural question.  There are several ways to do this.\r\n\r\nMy favorite: allow the Exceptions to ripple through - catch them at the &#39;main loop&#39; or in some other function with the appropriate responsibilities.  Checking for error conditions and handling them appropriately can be seen as a specialized responsibility.\r\n\r\nSure do have a look at Aspect Oriented Programming, too - they have neat ways to insert `if( o == null ) handleNull()` into your bytecode.","title":"How do I avoid checking for nulls in Java?","body":"<p>Asking that question points out that you may be interested in error handling strategies.  How and where to handle errors is a pervasive architectural question.  There are several ways to do this.</p>\n<p>My favorite: allow the Exceptions to ripple through - catch them at the 'main loop' or in some other function with the appropriate responsibilities.  Checking for error conditions and handling them appropriately can be seen as a specialized responsibility.</p>\n<p>Sure do have a look at Aspect Oriented Programming, too - they have neat ways to insert <code>if( o == null ) handleNull()</code> into your bytecode.</p>\n"},{"tags":[],"owner":{"display_name":"Stuart Axon"},"comment_count":0,"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1314006237,"creation_date":1226054627,"answer_id":271735,"question_id":271526,"body_markdown":"Wherever you pass an array or a Vector, initialise these to empty ones, instead of null.  - This way you can avoid lots of checking for null and all is good :)\r\n\r\n\r\n    public class NonNullThing {\r\n    \r\n       Vector vectorField = new Vector();\r\n    \r\n       int[] arrayField = new int[0];\r\n    \r\n       public NonNullThing() {\r\n    \r\n          // etc\r\n    \r\n       }\r\n    \r\n    }\r\n\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>Wherever you pass an array or a Vector, initialise these to empty ones, instead of null.  - This way you can avoid lots of checking for null and all is good :)</p>\n\n<pre><code>public class NonNullThing {\n\n   Vector vectorField = new Vector();\n\n   int[] arrayField = new int[0];\n\n   public NonNullThing() {\n\n      // etc\n\n   }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5851562,"reputation":1061,"user_id":4610114,"accept_rate":100,"display_name":"Franz D."},"score":5,"creation_date":1640390493,"post_id":271874,"comment_id":124582657,"body_markdown":"Nice answer, especially mentioning asserts. I came from C and use them constantly. As to Null Objects, they are NOT a silver bullet. I have often spent hours debugging code which turned out to be a Null Object being used, doing nothing (or returning its defaults) when a NPE would have been indicated the problem much more clearly. So then you&#39;ll have to do a &quot;Null Object check&quot; instead of a null check, and haven&#39;t won anything, actually lost clarity. Nowadays, if I can&#39;t avoid null, I just document it clearly and that&#39;s it.","body":"Nice answer, especially mentioning asserts. I came from C and use them constantly. As to Null Objects, they are NOT a silver bullet. I have often spent hours debugging code which turned out to be a Null Object being used, doing nothing (or returning its defaults) when a NPE would have been indicated the problem much more clearly. So then you&#39;ll have to do a &quot;Null Object check&quot; instead of a null check, and haven&#39;t won anything, actually lost clarity. Nowadays, if I can&#39;t avoid null, I just document it clearly and that&#39;s it."},{"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"score":0,"creation_date":1657338300,"post_id":271874,"comment_id":128792814,"body_markdown":"Writing `this.bar = Objects.requireNonNull(bar);` is a good use of this method, because you&#39;re not about to use `this.bar`. This way, you get the exception when an invalid null object is being passed, rather than when you try to use it. But, it often gets used this way:\n    `Objects.requireNonNull(getThing()).doThingStuff();`\nHere, the call to `Objects.requireNonNull()` doesn&#39;t change the behavior at all, it throws the NPE either way. It is best used when you are saving an object for later use. In my second example, the exception is useful. It helps track down the bug.","body":"Writing <code>this.bar = Objects.requireNonNull(bar);</code> is a good use of this method, because you&#39;re not about to use <code>this.bar</code>. This way, you get the exception when an invalid null object is being passed, rather than when you try to use it. But, it often gets used this way:     <code>Objects.requireNonNull(getThing()).doThingStuff();</code> Here, the call to <code>Objects.requireNonNull()</code> doesn&#39;t change the behavior at all, it throws the NPE either way. It is best used when you are saving an object for later use. In my second example, the exception is useful. It helps track down the bug."},{"owner":{"account_id":2550950,"reputation":3669,"user_id":2214709,"accept_rate":69,"display_name":"Lee White"},"score":1,"creation_date":1657629254,"post_id":271874,"comment_id":128851733,"body_markdown":"Should we suggest using exceptions for control flow though? While it&#39;s technically a solution that works, programmers should remember that exceptions should only be used to catch unexpected situations. When validating a user&#39;s input, invalid input should ideally not lead to exceptions being thrown.","body":"Should we suggest using exceptions for control flow though? While it&#39;s technically a solution that works, programmers should remember that exceptions should only be used to catch unexpected situations. When validating a user&#39;s input, invalid input should ideally not lead to exceptions being thrown."}],"tags":[],"owner":{"account_id":9867,"reputation":618201,"user_id":18393,"accept_rate":82,"display_name":"cletus"},"comment_count":3,"down_vote_count":35,"up_vote_count":2885,"is_accepted":true,"score":2850,"last_activity_date":1650570458,"creation_date":1226059600,"answer_id":271874,"question_id":271526,"body_markdown":"This to me sounds like a reasonably common problem that junior to intermediate developers tend to face at some point: they either don&#39;t know or don&#39;t trust the contracts they are participating in and defensively overcheck for nulls.  Additionally, when writing their own code, they tend to rely on returning nulls to indicate something thus requiring the caller to check for nulls.\r\n\r\nTo put this another way, there are two instances where null checking comes up:\r\n\r\n 1. Where null is a valid response in terms of the contract; and\r\n\r\n 2. Where it isn&#39;t a valid response.\r\n\r\n(2) is easy.  As of Java 1.7 you can use [`Objects.requireNonNull(foo)`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Objects.html#requireNonNull(T)). (If you are stuck with a previous version then [`assert`ions](https://docs.oracle.com/javase/7/docs/technotes/guides/language/assert.html) may be a good alternative.)\r\n\r\n&quot;Proper&quot; usage of this method would be like below. The method returns the object passed into it and throws a `NullPointerException` if the object is null. This means that the returned value is always non-null. The method is primarily intended for validating parameters.\r\n\r\n    public Foo(Bar bar) {\r\n        this.bar = Objects.requireNonNull(bar);\r\n    }\r\n\r\nIt can also be used like an `assert`ion though since it throws an exception if the object is null. In both uses, a message can be added which will be shown in the exception. Below is using it like an assertion and providing a message.\r\n\r\n    Objects.requireNonNull(someobject, &quot;if someobject is null then something is wrong&quot;);\r\n    someobject.doCalc();\r\n\r\nGenerally throwing a specific exception like `NullPointerException` when a value is null but shouldn&#39;t be is favorable to throwing a more general exception like `AssertionError`. This is the approach the Java library takes; favoring `NullPointerException` over `IllegalArgumentException` when an argument is not allowed to be null.\r\n\r\n(1) is a little harder.  If you have no control over the code you&#39;re calling then you&#39;re stuck.  If null is a valid response, you have to check for it.\r\n\r\nIf it&#39;s code that you do control, however (and this is often the case), then it&#39;s a different story.  Avoid using nulls as a response.  With methods that return collections, it&#39;s easy: return empty collections (or arrays) instead of nulls pretty much all the time.\r\n\r\nWith non-collections it might be harder.  Consider this as an example: if you have these interfaces:\r\n\r\n    public interface Action {\r\n      void doSomething();\r\n    }\r\n    \r\n    public interface Parser {\r\n      Action findAction(String userInput);\r\n    }\r\n\r\nwhere Parser takes raw user input and finds something to do, perhaps if you&#39;re implementing a command line interface for something.  Now you might make the contract that it returns null if there&#39;s no appropriate action.  That leads the null checking you&#39;re talking about.\r\n\r\nAn alternative solution is to never return null and instead use the [Null Object pattern][1]:\r\n\r\n    public class MyParser implements Parser {\r\n      private static Action DO_NOTHING = new Action() {\r\n        public void doSomething() { /* do nothing */ }\r\n      };\r\n    \r\n      public Action findAction(String userInput) {\r\n        // ...\r\n        if ( /* we can&#39;t find any actions */ ) {\r\n          return DO_NOTHING;\r\n        }\r\n      }\r\n    }\r\n\r\nCompare:\r\n\r\n    Parser parser = ParserFactory.getParser();\r\n    if (parser == null) {\r\n      // now what?\r\n      // this would be an example of where null isn&#39;t (or shouldn&#39;t be) a valid response\r\n    }\r\n    Action action = parser.findAction(someInput);\r\n    if (action == null) {\r\n      // do nothing\r\n    } else {\r\n      action.doSomething();\r\n    }\r\n\r\nto\r\n\r\n    ParserFactory.getParser().findAction(someInput).doSomething();\r\n\r\nwhich is a much better design because it leads to more concise code.\r\n\r\nThat said, perhaps it is entirely appropriate for the findAction() method to throw an Exception with a meaningful error message -- especially in this case where you are relying on user input.  It would be much better for the findAction method to throw an Exception than for the calling method to blow up with a simple NullPointerException with no explanation.\r\n\r\n    try {\r\n        ParserFactory.getParser().findAction(someInput).doSomething();\r\n    } catch(ActionNotFoundException anfe) {\r\n        userConsole.err(anfe.getMessage());\r\n    }\r\n\r\nOr if you think the try/catch mechanism is too ugly, rather than Do Nothing your default action should provide feedback to the user.\r\n\r\n    public Action findAction(final String userInput) {\r\n        /* Code to return requested Action if found */\r\n        return new Action() {\r\n            public void doSomething() {\r\n                userConsole.err(&quot;Action not found: &quot; + userInput);\r\n            }\r\n        }\r\n    }\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Null_Object_pattern","title":"How do I avoid checking for nulls in Java?","body":"<p>This to me sounds like a reasonably common problem that junior to intermediate developers tend to face at some point: they either don't know or don't trust the contracts they are participating in and defensively overcheck for nulls.  Additionally, when writing their own code, they tend to rely on returning nulls to indicate something thus requiring the caller to check for nulls.</p>\n<p>To put this another way, there are two instances where null checking comes up:</p>\n<ol>\n<li><p>Where null is a valid response in terms of the contract; and</p>\n</li>\n<li><p>Where it isn't a valid response.</p>\n</li>\n</ol>\n<p>(2) is easy.  As of Java 1.7 you can use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Objects.html#requireNonNull(T)\" rel=\"noreferrer\"><code>Objects.requireNonNull(foo)</code></a>. (If you are stuck with a previous version then <a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/language/assert.html\" rel=\"noreferrer\"><code>assert</code>ions</a> may be a good alternative.)</p>\n<p>&quot;Proper&quot; usage of this method would be like below. The method returns the object passed into it and throws a <code>NullPointerException</code> if the object is null. This means that the returned value is always non-null. The method is primarily intended for validating parameters.</p>\n<pre><code>public Foo(Bar bar) {\n    this.bar = Objects.requireNonNull(bar);\n}\n</code></pre>\n<p>It can also be used like an <code>assert</code>ion though since it throws an exception if the object is null. In both uses, a message can be added which will be shown in the exception. Below is using it like an assertion and providing a message.</p>\n<pre><code>Objects.requireNonNull(someobject, &quot;if someobject is null then something is wrong&quot;);\nsomeobject.doCalc();\n</code></pre>\n<p>Generally throwing a specific exception like <code>NullPointerException</code> when a value is null but shouldn't be is favorable to throwing a more general exception like <code>AssertionError</code>. This is the approach the Java library takes; favoring <code>NullPointerException</code> over <code>IllegalArgumentException</code> when an argument is not allowed to be null.</p>\n<p>(1) is a little harder.  If you have no control over the code you're calling then you're stuck.  If null is a valid response, you have to check for it.</p>\n<p>If it's code that you do control, however (and this is often the case), then it's a different story.  Avoid using nulls as a response.  With methods that return collections, it's easy: return empty collections (or arrays) instead of nulls pretty much all the time.</p>\n<p>With non-collections it might be harder.  Consider this as an example: if you have these interfaces:</p>\n<pre><code>public interface Action {\n  void doSomething();\n}\n\npublic interface Parser {\n  Action findAction(String userInput);\n}\n</code></pre>\n<p>where Parser takes raw user input and finds something to do, perhaps if you're implementing a command line interface for something.  Now you might make the contract that it returns null if there's no appropriate action.  That leads the null checking you're talking about.</p>\n<p>An alternative solution is to never return null and instead use the <a href=\"https://en.wikipedia.org/wiki/Null_Object_pattern\" rel=\"noreferrer\">Null Object pattern</a>:</p>\n<pre><code>public class MyParser implements Parser {\n  private static Action DO_NOTHING = new Action() {\n    public void doSomething() { /* do nothing */ }\n  };\n\n  public Action findAction(String userInput) {\n    // ...\n    if ( /* we can't find any actions */ ) {\n      return DO_NOTHING;\n    }\n  }\n}\n</code></pre>\n<p>Compare:</p>\n<pre><code>Parser parser = ParserFactory.getParser();\nif (parser == null) {\n  // now what?\n  // this would be an example of where null isn't (or shouldn't be) a valid response\n}\nAction action = parser.findAction(someInput);\nif (action == null) {\n  // do nothing\n} else {\n  action.doSomething();\n}\n</code></pre>\n<p>to</p>\n<pre><code>ParserFactory.getParser().findAction(someInput).doSomething();\n</code></pre>\n<p>which is a much better design because it leads to more concise code.</p>\n<p>That said, perhaps it is entirely appropriate for the findAction() method to throw an Exception with a meaningful error message -- especially in this case where you are relying on user input.  It would be much better for the findAction method to throw an Exception than for the calling method to blow up with a simple NullPointerException with no explanation.</p>\n<pre><code>try {\n    ParserFactory.getParser().findAction(someInput).doSomething();\n} catch(ActionNotFoundException anfe) {\n    userConsole.err(anfe.getMessage());\n}\n</code></pre>\n<p>Or if you think the try/catch mechanism is too ugly, rather than Do Nothing your default action should provide feedback to the user.</p>\n<pre><code>public Action findAction(final String userInput) {\n    /* Code to return requested Action if found */\n    return new Action() {\n        public void doSomething() {\n            userConsole.err(&quot;Action not found: &quot; + userInput);\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":60816,"reputation":3394,"user_id":181551,"accept_rate":41,"display_name":"Alex Worden"},"score":44,"creation_date":1306174456,"post_id":275869,"comment_id":7073436,"body_markdown":"I agree - only in that situation. I can&#39;t stand programmers that have taken this to the next unnecessary level and write if (null != myVar)... just looks ugly to me and serves no purpose!","body":"I agree - only in that situation. I can&#39;t stand programmers that have taken this to the next unnecessary level and write if (null != myVar)... just looks ugly to me and serves no purpose!"},{"owner":{"account_id":363546,"reputation":2623,"user_id":707372,"accept_rate":50,"display_name":"Stef"},"score":21,"creation_date":1316740838,"post_id":275869,"comment_id":9112892,"body_markdown":"This is a particular example, probably the most used, of a general good practice: if you know it, always do `&lt;object that you know that is not null&gt;.equals(&lt;object that might be null&gt;);`. It works for other methods other than `equals` if you know the contract and those methods can handle `null` parameters.","body":"This is a particular example, probably the most used, of a general good practice: if you know it, always do <code>&lt;object that you know that is not null&gt;.equals(&lt;object that might be null&gt;);</code>. It works for other methods other than <code>equals</code> if you know the contract and those methods can handle <code>null</code> parameters."},{"owner":{"account_id":133678,"reputation":5377,"user_id":335227,"accept_rate":88,"display_name":"Erin Drummond"},"score":9,"creation_date":1380569824,"post_id":275869,"comment_id":28243298,"body_markdown":"This is the first example I have seen of [Yoda Conditions](http://www.codinghorror.com/blog/2012/07/new-programming-jargon.html) that actually makes sense","body":"This is the first example I have seen of <a href=\"http://www.codinghorror.com/blog/2012/07/new-programming-jargon.html\" rel=\"nofollow noreferrer\">Yoda Conditions</a> that actually makes sense"},{"owner":{"account_id":294559,"reputation":12793,"user_id":1022330,"accept_rate":51,"display_name":"Oliver Watkins"},"score":7,"creation_date":1399880942,"post_id":275869,"comment_id":36232608,"body_markdown":"NullPointerExceptions are thrown for a reason. They are thrown because an object is null where it shouldn&#39;t be. It is the programmers job to FIX this, not HIDE the problem.","body":"NullPointerExceptions are thrown for a reason. They are thrown because an object is null where it shouldn&#39;t be. It is the programmers job to FIX this, not HIDE the problem."},{"owner":{"account_id":242239,"reputation":5426,"user_id":528617,"accept_rate":92,"display_name":"Arnab Datta"},"score":0,"creation_date":1448528235,"post_id":275869,"comment_id":55628422,"body_markdown":"This only hides the problem. What if you are using  `foo` later on?\nIf a variable shouldn&#39;t be null, but is...your app needs to get a NPE so you as the developer can actually fix the underlying reason.","body":"This only hides the problem. What if you are using  <code>foo</code> later on? If a variable shouldn&#39;t be null, but is...your app needs to get a NPE so you as the developer can actually fix the underlying reason."}],"tags":[],"owner":{"account_id":16475,"reputation":9766,"user_id":35915,"accept_rate":90,"display_name":"echox"},"comment_count":5,"down_vote_count":0,"up_vote_count":211,"is_accepted":false,"score":211,"last_activity_date":1527262430,"creation_date":1226233498,"answer_id":275869,"question_id":271526,"body_markdown":"Only for this situation -\r\n\r\nNot checking if a variable is null before invoking an equals method (a string compare example below):\r\n\r\n    if ( foo.equals(&quot;bar&quot;) ) {\r\n     // ...\r\n    }\r\n\r\nwill result in a `NullPointerException` if `foo` doesn&#39;t exist.\r\n\r\nYou can avoid that if you compare your `String`s like this:\r\n\r\n    if ( &quot;bar&quot;.equals(foo) ) {\r\n     // ...\r\n    }","title":"How do I avoid checking for nulls in Java?","body":"<p>Only for this situation -</p>\n\n<p>Not checking if a variable is null before invoking an equals method (a string compare example below):</p>\n\n<pre><code>if ( foo.equals(\"bar\") ) {\n // ...\n}\n</code></pre>\n\n<p>will result in a <code>NullPointerException</code> if <code>foo</code> doesn't exist.</p>\n\n<p>You can avoid that if you compare your <code>String</code>s like this:</p>\n\n<pre><code>if ( \"bar\".equals(foo) ) {\n // ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"comment_count":0,"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1380578784,"creation_date":1226614084,"answer_id":288524,"question_id":271526,"body_markdown":"I&#39;ve tried the `NullObjectPattern` but for me is not always the best way to go. There are sometimes when a &quot;no action&quot; is not appropiate.\r\n\r\n\r\n`NullPointerException` is a *Runtime exception* that means it&#39;s developers fault and with enough experience it tells you exactly where is the error.\r\n\r\nNow to the answer:\r\n\r\nTry to make all your attributes and its accessors as private as possible or avoid to  expose them to the clients at all. You can have the argument values in the constructor of course, but by reducing the scope you don&#39;t let the client class pass an invalid value. If you need to modify the values, you can always create a new `object`.  You check the values in the constructor only **once** and in the rest of the methods you can be almost sure that the values are not null.\r\n\r\n\r\nOf course, experience is the better way to understand and apply this suggestion.\r\n\r\nByte!\r\n\r\n ","title":"How do I avoid checking for nulls in Java?","body":"<p>I've tried the <code>NullObjectPattern</code> but for me is not always the best way to go. There are sometimes when a \"no action\" is not appropiate.</p>\n\n<p><code>NullPointerException</code> is a <em>Runtime exception</em> that means it's developers fault and with enough experience it tells you exactly where is the error.</p>\n\n<p>Now to the answer:</p>\n\n<p>Try to make all your attributes and its accessors as private as possible or avoid to  expose them to the clients at all. You can have the argument values in the constructor of course, but by reducing the scope you don't let the client class pass an invalid value. If you need to modify the values, you can always create a new <code>object</code>.  You check the values in the constructor only <strong>once</strong> and in the rest of the methods you can be almost sure that the values are not null.</p>\n\n<p>Of course, experience is the better way to understand and apply this suggestion.</p>\n\n<p>Byte!</p>\n"},{"comments":[{"owner":{"account_id":13526,"reputation":1546,"user_id":27241,"accept_rate":85,"display_name":"mysomic"},"score":75,"creation_date":1242689180,"post_id":397740,"comment_id":687430,"body_markdown":"mmm, what is the difference? p.getAge() would throw the same NPE with less overhead and a clearer stack trace. What am I missing?","body":"mmm, what is the difference? p.getAge() would throw the same NPE with less overhead and a clearer stack trace. What am I missing?"},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":16,"creation_date":1243338977,"post_id":397740,"comment_id":718130,"body_markdown":"It is better to throw an IllegalArgumentException(&quot;e == null&quot;) in your example as it clearly indicates that it is a programmer-intended exception (along with enough information to actually allow the maintainer to identify the problem).  NullPointerExceptions should be reserved for the JVM, as it then clearly indicates that this was unintentional (and usually happens somewhere hard to identify)","body":"It is better to throw an IllegalArgumentException(&quot;e == null&quot;) in your example as it clearly indicates that it is a programmer-intended exception (along with enough information to actually allow the maintainer to identify the problem).  NullPointerExceptions should be reserved for the JVM, as it then clearly indicates that this was unintentional (and usually happens somewhere hard to identify)"},{"owner":{"account_id":205617,"reputation":10965,"user_id":454470,"display_name":"Steven Benitez"},"score":6,"creation_date":1297630552,"post_id":397740,"comment_id":5570462,"body_markdown":"This is now part of Google Guava.","body":"This is now part of Google Guava."},{"owner":{"account_id":60816,"reputation":3394,"user_id":181551,"accept_rate":41,"display_name":"Alex Worden"},"score":36,"creation_date":1335208270,"post_id":397740,"comment_id":13234275,"body_markdown":"Smells like over-engineering to me. Just let the JVM throw an NPE and don&#39;t clutter your code with this junk.","body":"Smells like over-engineering to me. Just let the JVM throw an NPE and don&#39;t clutter your code with this junk."},{"owner":{"account_id":476048,"reputation":7235,"user_id":886749,"accept_rate":77,"display_name":"Cory Kendall"},"score":6,"creation_date":1353565563,"post_id":397740,"comment_id":18487290,"body_markdown":"I like it and open most methods and constructors with explicit checks on the arguments; if there is an error, methods always fail on the first few lines and I know the offending reference without finding something like `getThing().getItsThing().getOtherThing().wowEncapsulationIsBroken().setLol(&quot;hi&quot;);`","body":"I like it and open most methods and constructors with explicit checks on the arguments; if there is an error, methods always fail on the first few lines and I know the offending reference without finding something like <code>getThing().getItsThing().getOtherThing().wowEncapsulationIsB&zwnj;&#8203;roken().setLol(&quot;hi&quot;)&zwnj;&#8203;;</code>"},{"owner":{"account_id":51323,"reputation":637,"user_id":153339,"display_name":"Matt"},"score":2,"creation_date":1407902981,"post_id":397740,"comment_id":39390256,"body_markdown":"Java 1.7 added the `java.util.Objects.requireNonNull` method (amongst others) that does exactly this. It&#39;s such a common idiom that I&#39;m amazed it took this long!","body":"Java 1.7 added the <code>java.util.Objects.requireNonNull</code> method (amongst others) that does exactly this. It&#39;s such a common idiom that I&#39;m amazed it took this long!"},{"owner":{"account_id":2757491,"reputation":849,"user_id":2375159,"accept_rate":55,"display_name":"gorefest"},"score":0,"creation_date":1540839703,"post_id":397740,"comment_id":93003825,"body_markdown":"just for interest... what is the difference between checkNotNull(bla).foo() and bla.foo() if both may throw a NPE in case of null? zero benefits, right?","body":"just for interest... what is the difference between checkNotNull(bla).foo() and bla.foo() if both may throw a NPE in case of null? zero benefits, right?"}],"tags":[],"owner":{"account_id":15137,"reputation":7882,"user_id":1356709,"accept_rate":53,"display_name":"user2427"},"comment_count":7,"down_vote_count":10,"up_vote_count":91,"is_accepted":false,"score":81,"last_activity_date":1442678747,"creation_date":1230558607,"answer_id":397740,"question_id":271526,"body_markdown":"The Google collections framework offers a good and elegant way to achieve the null check.\r\n\r\nThere is a method in a library class like this:\r\n\r\n    static &lt;T&gt; T checkNotNull(T e) {\r\n       if (e == null) {\r\n          throw new NullPointerException();\r\n       }\r\n       return e;\r\n    }\r\n\r\nAnd the usage is (with `import static`):\r\n\r\n    ...\r\n    void foo(int a, Person p) {\r\n       if (checkNotNull(p).getAge() &gt; a) {\r\n          ...\r\n       }\r\n       else {\r\n          ...\r\n       }\r\n    }\r\n    ...\r\n\r\nOr in your example:\r\n\r\n    checkNotNull(someobject).doCalc();\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>The Google collections framework offers a good and elegant way to achieve the null check.</p>\n\n<p>There is a method in a library class like this:</p>\n\n<pre><code>static &lt;T&gt; T checkNotNull(T e) {\n   if (e == null) {\n      throw new NullPointerException();\n   }\n   return e;\n}\n</code></pre>\n\n<p>And the usage is (with <code>import static</code>):</p>\n\n<pre><code>...\nvoid foo(int a, Person p) {\n   if (checkNotNull(p).getAge() &gt; a) {\n      ...\n   }\n   else {\n      ...\n   }\n}\n...\n</code></pre>\n\n<p>Or in your example:</p>\n\n<pre><code>checkNotNull(someobject).doCalc();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":23,"creation_date":1243338843,"post_id":452820,"comment_id":718115,"body_markdown":"I think this is wrong.  There should be a way to specify that a given variable is ALWAYS non-null.","body":"I think this is wrong.  There should be a way to specify that a given variable is ALWAYS non-null."},{"owner":{"account_id":1497,"reputation":10898,"user_id":1996,"accept_rate":78,"display_name":"Boris Terzic"},"score":6,"creation_date":1251572194,"post_id":452820,"comment_id":1188327,"body_markdown":"Update: the proposal will not make Java7. See http://blogs.sun.com/darcy/entry/project_coin_final_five .","body":"Update: the proposal will not make Java7. See <a href=\"http://blogs.sun.com/darcy/entry/project_coin_final_five\" rel=\"nofollow noreferrer\">blogs.sun.com/darcy/entry/project_coin_final_five</a> ."},{"owner":{"account_id":7539,"reputation":21506,"user_id":13140,"accept_rate":89,"display_name":"Ogre Psalm33"},"score":2,"creation_date":1291986031,"post_id":452820,"comment_id":4807915,"body_markdown":"But on the same page, see the link to http://types.cs.washington.edu/jsr308/ for info about using the Checker framework to add the @Nullable and @NonNull type annotations in Java 7.","body":"But on the same page, see the link to <a href=\"http://types.cs.washington.edu/jsr308/\" rel=\"nofollow noreferrer\">types.cs.washington.edu/jsr308</a> for info about using the Checker framework to add the @Nullable and @NonNull type annotations in Java 7."},{"owner":{"account_id":140434,"reputation":11503,"user_id":346741,"accept_rate":84,"display_name":"Rob"},"score":11,"creation_date":1337169118,"post_id":452820,"comment_id":13759049,"body_markdown":"Interesting idea but the choice of syntax is absurd; I don&#39;t want a codebase full of question marks pinned into every joint.","body":"Interesting idea but the choice of syntax is absurd; I don&#39;t want a codebase full of question marks pinned into every joint."},{"owner":{"account_id":200841,"reputation":24595,"user_id":446921,"accept_rate":98,"display_name":"Muhd"},"score":8,"creation_date":1360968803,"post_id":452820,"comment_id":20906944,"body_markdown":"This operator exists in [Groovy](http://groovy.codehaus.org/Operators#Operators-SafeNavigationOperator), so those who want to use it still have that as an option.","body":"This operator exists in <a href=\"http://groovy.codehaus.org/Operators#Operators-SafeNavigationOperator\" rel=\"nofollow noreferrer\">Groovy</a>, so those who want to use it still have that as an option."},{"owner":{"account_id":4563475,"reputation":27298,"user_id":3705127,"accept_rate":52,"display_name":"sprinter"},"score":3,"creation_date":1419391793,"post_id":452820,"comment_id":43682548,"body_markdown":"Optional was added to Java8","body":"Optional was added to Java8"},{"owner":{"account_id":4899902,"reputation":1272,"user_id":5394981,"display_name":"Victor - Reinstate Monica"},"score":11,"creation_date":1443733040,"post_id":452820,"comment_id":53622754,"body_markdown":"This is the most ingenious idea I&#39;ve seen.\nIt should be added to every sensible language of the C syntax.\nI&#39;d rather &quot;pin question marks&quot; everywhere than scroll through screenful of lines or dodge &quot;guard clauses&quot; all day.","body":"This is the most ingenious idea I&#39;ve seen. It should be added to every sensible language of the C syntax. I&#39;d rather &quot;pin question marks&quot; everywhere than scroll through screenful of lines or dodge &quot;guard clauses&quot; all day."},{"owner":{"account_id":2056278,"reputation":23340,"user_id":1833961,"accept_rate":54,"display_name":"bvdb"},"score":4,"creation_date":1461420745,"post_id":452820,"comment_id":61196583,"body_markdown":"Tony Hoare apologised for inventing `null`. But an even bigger mistake is to pick a strategy, to stick to it for over 20 years until billions lines of code are written, to then finally change your mind. This `.?` was like a last chance to keep java &quot;clean&quot;. It&#39;s a very simple syntactical solution. But instead they prefer to throw in a handful of different `@Nullable` and `Option` classes, empty collections, empty objects. The goal was to make nullability easier. But instead they added many layers of complexity. In the end, this will split the java community and will drive it to distruction.","body":"Tony Hoare apologised for inventing <code>null</code>. But an even bigger mistake is to pick a strategy, to stick to it for over 20 years until billions lines of code are written, to then finally change your mind. This <code>.?</code> was like a last chance to keep java &quot;clean&quot;. It&#39;s a very simple syntactical solution. But instead they prefer to throw in a handful of different <code>@Nullable</code> and <code>Option</code> classes, empty collections, empty objects. The goal was to make nullability easier. But instead they added many layers of complexity. In the end, this will split the java community and will drive it to distruction."},{"owner":{"account_id":3175375,"reputation":1971,"user_id":2683399,"accept_rate":50,"display_name":"IceArdor"},"score":4,"creation_date":1494578014,"post_id":452820,"comment_id":74898410,"body_markdown":"Kotlin has the null safe call operators, too. https://kotlinlang.org/docs/reference/null-safety.html#safe-calls","body":"Kotlin has the null safe call operators, too. <a href=\"https://kotlinlang.org/docs/reference/null-safety.html#safe-calls\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/null-safety.html#safe-calls</a>"},{"owner":{"account_id":5851562,"reputation":1061,"user_id":4610114,"accept_rate":100,"display_name":"Franz D."},"score":0,"creation_date":1640391530,"post_id":452820,"comment_id":124582760,"body_markdown":"@bvdb I totally agree (except of your criticism of empty objects, because these things exit). Also, no need to apologize for &quot;null&quot; IMO -- to me, it&#39;s a totally natural feature of references, and I&#39;m okay with it. I&#39;m absolutely not OK with Oracle refusing to deal with it -- the &quot;.?&quot; syntax is so neat and concise and clear, I really don&#39;t get why they persist in providing baroque, cumbersome, ineffective pseudo-solutions.","body":"@bvdb I totally agree (except of your criticism of empty objects, because these things exit). Also, no need to apologize for &quot;null&quot; IMO -- to me, it&#39;s a totally natural feature of references, and I&#39;m okay with it. I&#39;m absolutely not OK with Oracle refusing to deal with it -- the &quot;.?&quot; syntax is so neat and concise and clear, I really don&#39;t get why they persist in providing baroque, cumbersome, ineffective pseudo-solutions."},{"owner":{"account_id":2056278,"reputation":23340,"user_id":1833961,"accept_rate":54,"display_name":"bvdb"},"score":0,"creation_date":1640560606,"post_id":452820,"comment_id":124605708,"body_markdown":"@FranzD. I&#39;ve wrote a more elaborate post about this here: https://stackoverflow.com/questions/26529091/null-check-in-java-8-elvis-operator/67014059#67014059","body":"@FranzD. I&#39;ve wrote a more elaborate post about this here: <a href=\"https://stackoverflow.com/questions/26529091/null-check-in-java-8-elvis-operator/67014059#67014059\" title=\"null check in java 8 elvis operator\">stackoverflow.com/questions/26529091/&hellip;</a>"}],"tags":[],"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"comment_count":11,"down_vote_count":8,"up_vote_count":264,"is_accepted":false,"score":256,"last_activity_date":1442790747,"creation_date":1232168915,"answer_id":452820,"question_id":271526,"body_markdown":"Wow, I almost hate to add another answer when we have 57 different ways to recommend the `NullObject pattern`, but I think that some people interested in this question may like to know that there is a proposal on the table for Java 7 to add [&quot;null-safe handling&quot;][1]&amp;mdash;a streamlined syntax for if-not-equal-null logic.\r\n\r\nThe example given by Alex Miller looks like this:\r\n\r\n    public String getPostcode(Person person) {  \r\n      return person?.getAddress()?.getPostcode();  \r\n    }  \r\n\r\nThe `?.` means only de-reference the left identifier if it is not null, otherwise evaluate the remainder of the expression as `null`. Some people, like Java Posse member Dick Wall and the [voters at Devoxx][2] really love this proposal, but there is opposition too, on the grounds that it will actually encourage more use of `null` as a sentinel value.\r\n\r\n---\r\n\r\n*Update:* An [official proposal][3] for a null-safe operator in Java 7 has been submitted under [Project Coin.][4] The syntax is a little different than the example above, but it&#39;s the same notion.\r\n\r\n---\r\n\r\n*Update:* The null-safe operator proposal didn&#39;t make it into Project Coin. So, you won&#39;t be seeing this syntax in Java 7.\r\n\r\n  [1]: http://tech.puredanger.com/java7/#null\r\n  [2]: http://blog.joda.org/2008/12/jdk-7-language-changes-devoxx-votes_3751.html\r\n  [3]: http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/000047.html\r\n  [4]: http://openjdk.java.net/projects/coin/","title":"How do I avoid checking for nulls in Java?","body":"<p>Wow, I almost hate to add another answer when we have 57 different ways to recommend the <code>NullObject pattern</code>, but I think that some people interested in this question may like to know that there is a proposal on the table for Java 7 to add <a href=\"http://tech.puredanger.com/java7/#null\" rel=\"noreferrer\">\"null-safe handling\"</a>&mdash;a streamlined syntax for if-not-equal-null logic.</p>\n\n<p>The example given by Alex Miller looks like this:</p>\n\n<pre><code>public String getPostcode(Person person) {  \n  return person?.getAddress()?.getPostcode();  \n}  \n</code></pre>\n\n<p>The <code>?.</code> means only de-reference the left identifier if it is not null, otherwise evaluate the remainder of the expression as <code>null</code>. Some people, like Java Posse member Dick Wall and the <a href=\"http://blog.joda.org/2008/12/jdk-7-language-changes-devoxx-votes_3751.html\" rel=\"noreferrer\">voters at Devoxx</a> really love this proposal, but there is opposition too, on the grounds that it will actually encourage more use of <code>null</code> as a sentinel value.</p>\n\n<hr>\n\n<p><em>Update:</em> An <a href=\"http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/000047.html\" rel=\"noreferrer\">official proposal</a> for a null-safe operator in Java 7 has been submitted under <a href=\"http://openjdk.java.net/projects/coin/\" rel=\"noreferrer\">Project Coin.</a> The syntax is a little different than the example above, but it's the same notion.</p>\n\n<hr>\n\n<p><em>Update:</em> The null-safe operator proposal didn't make it into Project Coin. So, you won't be seeing this syntax in Java 7.</p>\n"},{"comments":[{"owner":{"account_id":3048275,"reputation":833,"user_id":2583402,"display_name":"mtsahakis"},"score":5,"creation_date":1537212543,"post_id":1202969,"comment_id":91693787,"body_markdown":"I am not familiar with Nice, but Kotlin implements the same idea, have nullable and not-null types build into the language&#39;s type system. A lot more concise than Optionals or null Object pattern.","body":"I am not familiar with Nice, but Kotlin implements the same idea, have nullable and not-null types build into the language&#39;s type system. A lot more concise than Optionals or null Object pattern."}],"tags":[],"owner":{"account_id":9193,"reputation":343123,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"comment_count":1,"down_vote_count":6,"up_vote_count":59,"is_accepted":false,"score":53,"last_activity_date":1442678955,"creation_date":1248900758,"answer_id":1202969,"question_id":271526,"body_markdown":"Ultimately, the only way to completely solve this problem is by using a different programming language:\r\n\r\n - In Objective-C, you can do the equivalent of invoking a method on `nil`, and absolutely nothing will happen. This makes most null checks unnecessary, but it can make errors much harder to diagnose.\r\n - In [Nice][1], a Java-derived language, there are two versions of all types: a potentially-null version and a not-null version. You can only invoke methods on not-null types. Potentially-null types can be converted to not-null types through explicit checking for null. This makes it much easier to know where null checks are necessary and where they aren&#39;t.\r\n\r\n  [1]: http://nice.sourceforge.net/safety.html#id2487946\r\n\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>Ultimately, the only way to completely solve this problem is by using a different programming language:</p>\n\n<ul>\n<li>In Objective-C, you can do the equivalent of invoking a method on <code>nil</code>, and absolutely nothing will happen. This makes most null checks unnecessary, but it can make errors much harder to diagnose.</li>\n<li>In <a href=\"http://nice.sourceforge.net/safety.html#id2487946\" rel=\"noreferrer\">Nice</a>, a Java-derived language, there are two versions of all types: a potentially-null version and a not-null version. You can only invoke methods on not-null types. Potentially-null types can be converted to not-null types through explicit checking for null. This makes it much easier to know where null checks are necessary and where they aren't.</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":23658,"reputation":1749,"user_id":59441,"accept_rate":33,"display_name":"Ben Hardy"},"score":23,"creation_date":1305916263,"post_id":2064441,"comment_id":7037844,"body_markdown":"Indeed, the Option pattern is awesome. Some Java equivalents exist. Guava contains a limited version of this called Optional which leaves out most of the functional stuff. In Haskell, this pattern is called Maybe.","body":"Indeed, the Option pattern is awesome. Some Java equivalents exist. Guava contains a limited version of this called Optional which leaves out most of the functional stuff. In Haskell, this pattern is called Maybe."},{"owner":{"account_id":32689,"reputation":21905,"user_id":90874,"accept_rate":52,"display_name":"thSoft"},"score":0,"creation_date":1315774751,"post_id":2064441,"comment_id":8911858,"body_markdown":"@Luca Molteni: You&#39;re absolutely right, I already commented on the post to request expanding it. :)","body":"@Luca Molteni: You&#39;re absolutely right, I already commented on the post to request expanding it. :)"},{"owner":{"account_id":122100,"reputation":16858,"user_id":315677,"accept_rate":81,"display_name":"Pierre Henry"},"score":10,"creation_date":1366901953,"post_id":2064441,"comment_id":23194192,"body_markdown":"An Optional class will be available in Java 8","body":"An Optional class will be available in Java 8"},{"owner":{"account_id":32689,"reputation":21905,"user_id":90874,"accept_rate":52,"display_name":"thSoft"},"score":1,"creation_date":1366903685,"post_id":2064441,"comment_id":23195349,"body_markdown":"...and it doesn&#39;t (yet) have map nor flatMap: http://download.java.net/jdk8/docs/api/java/util/Optional.html","body":"...and it doesn&#39;t (yet) have map nor flatMap: <a href=\"http://download.java.net/jdk8/docs/api/java/util/Optional.html\" rel=\"nofollow noreferrer\">download.java.net/jdk8/docs/api/java/util/Optional.html</a>"},{"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"score":3,"creation_date":1383538557,"post_id":2064441,"comment_id":29368433,"body_markdown":"The Optional pattern doesn&#39;t solve anything; instead of one potentially null object, now you have two.","body":"The Optional pattern doesn&#39;t solve anything; instead of one potentially null object, now you have two."},{"owner":{"account_id":362885,"reputation":37276,"user_id":706317,"accept_rate":70,"display_name":"ZhekaKozlov"},"score":0,"creation_date":1386652072,"post_id":2064441,"comment_id":30618761,"body_markdown":"Also, look at Functional Guava Extensions (fugue). This library also has its own Option.","body":"Also, look at Functional Guava Extensions (fugue). This library also has its own Option."}],"tags":[],"owner":{"account_id":32689,"reputation":21905,"user_id":90874,"accept_rate":52,"display_name":"thSoft"},"comment_count":6,"down_vote_count":3,"up_vote_count":214,"is_accepted":false,"score":211,"last_activity_date":1508841520,"creation_date":1263476706,"answer_id":2064441,"question_id":271526,"body_markdown":"If undefined values are not permitted:\r\n--------------------------------------\r\n\r\nYou might configure your IDE to warn you about potential null dereferencing. E.g. in Eclipse, see *Preferences &gt; Java &gt; Compiler &gt; Errors/Warnings/Null analysis*.\r\n\r\nIf undefined values are permitted:\r\n----------------------------------\r\n\r\n*If you want to define a new API where undefined values make sense*, use the [Option Pattern][8] (may be familiar from functional languages). It has the following advantages:\r\n\r\n- It is stated explicitly in the API whether an input or output exists or not.\r\n- The compiler forces you to handle the &quot;undefined&quot; case.\r\n- [Option is a monad][9], so there is no need for verbose null checking, just use map/foreach/getOrElse or a similar combinator to safely use the value [(example)][10].\r\n\r\nJava 8 has a built-in [`Optional`][1] class (recommended); for earlier versions, there are library alternatives, for example [Guava][2]&#39;s [`Optional`][3] or [FunctionalJava][4]&#39;s [`Option`][5]. But like many functional-style patterns, using Option in Java (even 8) results in quite some boilerplate, which you can reduce using a less verbose JVM language, e.g. Scala or Xtend.\r\n\r\n*If you have to deal with an API which might return nulls*, you can&#39;t do much in Java. Xtend and Groovy have the [Elvis operator][7] `?:` and the [null-safe dereference operator][6] `?.`, but note that this returns null in case of a null reference, so it just &quot;defers&quot; the proper handling of null.\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\r\n  [2]: http://code.google.com/p/guava-libraries/wiki/UsingAndAvoidingNullExplained\r\n  [3]: https://google.github.io/guava/releases/19.0/api/docs/com/google/common/base/Optional.html\r\n  [4]: http://code.google.com/p/functionaljava\r\n  [5]: http://www.functionaljava.org/javadoc/4.4/functionaljava/fj/data/Option.html\r\n  [6]: https://www.eclipse.org/xtend/documentation.html#nullSafeFeatureCalls\r\n  [7]: https://www.eclipse.org/xtend/documentation.html#operators\r\n  [8]: http://www.codecommit.com/blog/scala/the-option-pattern\r\n  [9]: http://james-iry.blogspot.com/2007/08/martians-vs-monads-null-considered.html\r\n  [10]: http://blog.tackley.net/2010/09/option-in-scala-vs-null-in-java.html","title":"How do I avoid checking for nulls in Java?","body":"<h2>If undefined values are not permitted:</h2>\n\n<p>You might configure your IDE to warn you about potential null dereferencing. E.g. in Eclipse, see <em>Preferences > Java > Compiler > Errors/Warnings/Null analysis</em>.</p>\n\n<h2>If undefined values are permitted:</h2>\n\n<p><em>If you want to define a new API where undefined values make sense</em>, use the <a href=\"http://www.codecommit.com/blog/scala/the-option-pattern\" rel=\"noreferrer\">Option Pattern</a> (may be familiar from functional languages). It has the following advantages:</p>\n\n<ul>\n<li>It is stated explicitly in the API whether an input or output exists or not.</li>\n<li>The compiler forces you to handle the \"undefined\" case.</li>\n<li><a href=\"http://james-iry.blogspot.com/2007/08/martians-vs-monads-null-considered.html\" rel=\"noreferrer\">Option is a monad</a>, so there is no need for verbose null checking, just use map/foreach/getOrElse or a similar combinator to safely use the value <a href=\"http://blog.tackley.net/2010/09/option-in-scala-vs-null-in-java.html\" rel=\"noreferrer\">(example)</a>.</li>\n</ul>\n\n<p>Java 8 has a built-in <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"noreferrer\"><code>Optional</code></a> class (recommended); for earlier versions, there are library alternatives, for example <a href=\"http://code.google.com/p/guava-libraries/wiki/UsingAndAvoidingNullExplained\" rel=\"noreferrer\">Guava</a>'s <a href=\"https://google.github.io/guava/releases/19.0/api/docs/com/google/common/base/Optional.html\" rel=\"noreferrer\"><code>Optional</code></a> or <a href=\"http://code.google.com/p/functionaljava\" rel=\"noreferrer\">FunctionalJava</a>'s <a href=\"http://www.functionaljava.org/javadoc/4.4/functionaljava/fj/data/Option.html\" rel=\"noreferrer\"><code>Option</code></a>. But like many functional-style patterns, using Option in Java (even 8) results in quite some boilerplate, which you can reduce using a less verbose JVM language, e.g. Scala or Xtend.</p>\n\n<p><em>If you have to deal with an API which might return nulls</em>, you can't do much in Java. Xtend and Groovy have the <a href=\"https://www.eclipse.org/xtend/documentation.html#operators\" rel=\"noreferrer\">Elvis operator</a> <code>?:</code> and the <a href=\"https://www.eclipse.org/xtend/documentation.html#nullSafeFeatureCalls\" rel=\"noreferrer\">null-safe dereference operator</a> <code>?.</code>, but note that this returns null in case of a null reference, so it just \"defers\" the proper handling of null.</p>\n"},{"comments":[{"owner":{"account_id":100586,"reputation":439,"user_id":271075,"display_name":"Jacek S"},"score":132,"creation_date":1273336438,"post_id":2386013,"comment_id":2831298,"body_markdown":"`@NotNull`, `@Nullable` and other nullness annotations are part of [JSR 305](http://jcp.org/en/jsr/detail?id=305). You can also use them to detect potential problems with tools like [FindBugs](http://findbugs.sourceforge.net/).","body":"<code>@NotNull</code>, <code>@Nullable</code> and other nullness annotations are part of <a href=\"http://jcp.org/en/jsr/detail?id=305\" rel=\"nofollow noreferrer\">JSR 305</a>. You can also use them to detect potential problems with tools like <a href=\"http://findbugs.sourceforge.net/\" rel=\"nofollow noreferrer\">FindBugs</a>."},{"owner":{"account_id":22705,"reputation":80417,"user_id":56285,"accept_rate":81,"display_name":"Jonik"},"score":34,"creation_date":1309476835,"post_id":2386013,"comment_id":7706486,"body_markdown":"I find it strangely annoying that the `@NotNull` &amp; `@Nullable` interfaces live in the package `com.sun.istack.internal`. (I guess I associate com.sun with warnings about using a proprietary API.)","body":"I find it strangely annoying that the <code>@NotNull</code> &amp; <code>@Nullable</code> interfaces live in the package <code>com.sun.istack.internal</code>. (I guess I associate com.sun with warnings about using a proprietary API.)"},{"owner":{"account_id":454180,"reputation":4890,"user_id":851578,"accept_rate":94,"display_name":"Java Ka Baby"},"score":21,"creation_date":1315474792,"post_id":2386013,"comment_id":8861305,"body_markdown":"code portability goes null with jetbrains.I would think twice(square) before tying down to ide level.Like Jacek S said they are part of JSR any way which I thought was JSR303 by the way.","body":"code portability goes null with jetbrains.I would think twice(square) before tying down to ide level.Like Jacek S said they are part of JSR any way which I thought was JSR303 by the way."},{"owner":{"account_id":124682,"reputation":30003,"user_id":319931,"accept_rate":75,"display_name":"Mechanical snail"},"score":1,"creation_date":1345186935,"post_id":2386013,"comment_id":16006500,"body_markdown":"Why doesn&#39;t the 2nd one compile though?","body":"Why doesn&#39;t the 2nd one compile though?"},{"owner":{"account_id":903562,"reputation":15094,"user_id":939023,"accept_rate":90,"display_name":"Shivan Dragon"},"score":13,"creation_date":1345364665,"post_id":2386013,"comment_id":16048122,"body_markdown":"I really don&#39;t think that using a custom compiler is a viable solution to this problem.","body":"I really don&#39;t think that using a custom compiler is a viable solution to this problem."},{"owner":{"account_id":92878,"reputation":8722,"user_id":254343,"accept_rate":64,"display_name":"Armen Michaeli"},"score":70,"creation_date":1363772963,"post_id":2386013,"comment_id":21981559,"body_markdown":"The good thing about annotations, which `@NotNull` and `@Nullable` are is that they nicely degrade when the source code is built by a system that doesn&#39;t understand them. So, in effect, the argument that the code is not portable may be invalid - if you use a system that supports and understands these annotations, you get the added benefit of stricter error checking, otherwise you get less of it but your code should still build fine, and the quality of your running program is THE SAME, because these annotations were not enforced at runtime anyway. Besides, all compilers are custom ;-)","body":"The good thing about annotations, which <code>@NotNull</code> and <code>@Nullable</code> are is that they nicely degrade when the source code is built by a system that doesn&#39;t understand them. So, in effect, the argument that the code is not portable may be invalid - if you use a system that supports and understands these annotations, you get the added benefit of stricter error checking, otherwise you get less of it but your code should still build fine, and the quality of your running program is THE SAME, because these annotations were not enforced at runtime anyway. Besides, all compilers are custom ;-)"},{"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"score":0,"creation_date":1393856775,"post_id":2386013,"comment_id":33610057,"body_markdown":"in your example you call `helloWorld` twice. This is terrible. you have no idea what could be the consequences !","body":"in your example you call <code>helloWorld</code> twice. This is terrible. you have no idea what could be the consequences !"},{"owner":{"account_id":37187,"reputation":46693,"user_id":106261,"accept_rate":87,"display_name":"NimChimpsky"},"score":0,"creation_date":1400157162,"post_id":2386013,"comment_id":36377280,"body_markdown":"@Mechanicalsnail becuase it only ever returns &quot;hello world&quot;, and can never return null.","body":"@Mechanicalsnail becuase it only ever returns &quot;hello world&quot;, and can never return null."},{"owner":{"account_id":1495760,"reputation":2463,"user_id":1723372,"display_name":"shaktiman_droid"},"score":1,"creation_date":1411753327,"post_id":2386013,"comment_id":40837415,"body_markdown":"@JacekS Just for information - for Android development, As of version 19.1 of the Android support library, `@NotNull` and `@Nullable` annotation support has been added. So basically all Android developer can take advantage of it. It won&#39;t be IDE specific anymore. More information regarding support annotations here - http://tools.android.com/tech-docs/support-annotations","body":"@JacekS Just for information - for Android development, As of version 19.1 of the Android support library, <code>@NotNull</code> and <code>@Nullable</code> annotation support has been added. So basically all Android developer can take advantage of it. It won&#39;t be IDE specific anymore. More information regarding support annotations here - <a href=\"http://tools.android.com/tech-docs/support-annotations\" rel=\"nofollow noreferrer\">tools.android.com/tech-docs/support-annotations</a>"},{"owner":{"account_id":3415784,"reputation":60457,"user_id":2864740,"accept_rate":78,"display_name":"user2864740"},"score":2,"creation_date":1423065906,"post_id":2386013,"comment_id":44999339,"body_markdown":"Arguments against `@Nullable`/`@NotNull` for &quot;compatibility&quot; are missing the point. They are only there to help tools (from a static analysis) ensure that these basic contracts are met - they do *not* replace proper null handling, when such is appropriate per the contract (or possible per the input source). While it would be *awesome* if Java and C# (and the run-times) actually supported not-null reference types in the Type System, using better static analysis tooling (and explicit annotated contracts) goes a long way to reduce the 100 trillion dollar mistake that is Algo, is Java, is C# ..","body":"Arguments against <code>@Nullable</code>/<code>@NotNull</code> for &quot;compatibility&quot; are missing the point. They are only there to help tools (from a static analysis) ensure that these basic contracts are met - they do <i>not</i> replace proper null handling, when such is appropriate per the contract (or possible per the input source). While it would be <i>awesome</i> if Java and C# (and the run-times) actually supported not-null reference types in the Type System, using better static analysis tooling (and explicit annotated contracts) goes a long way to reduce the 100 trillion dollar mistake that is Algo, is Java, is C# .."},{"owner":{"account_id":1014607,"reputation":4573,"user_id":1026453,"accept_rate":83,"display_name":"DuncanKinnear"},"score":0,"creation_date":1434667895,"post_id":2386013,"comment_id":49890792,"body_markdown":"Netbeans also has support for `@NotNull` and `@Nullable`.","body":"Netbeans also has support for <code>@NotNull</code> and <code>@Nullable</code>."},{"owner":{"account_id":5853491,"reputation":8043,"user_id":4611488,"display_name":"Stephan Herrmann"},"score":1,"creation_date":1438111503,"post_id":2386013,"comment_id":51312364,"body_markdown":"It&#39;s worth noting that TYPE_USE annotations (since Java 8) let you treat null annotations as an integral part of the type system, including in particular generics. This means that conceptually **all contract violations can be detected by the compiler**. Eclipse supports this since Java 8 was released, see http://help.eclipse.org/topic/org.eclipse.jdt.doc.user/tasks/task-using_null_type_annotations.htm","body":"It&#39;s worth noting that TYPE_USE annotations (since Java 8) let you treat null annotations as an integral part of the type system, including in particular generics. This means that conceptually <b>all contract violations can be detected by the compiler</b>. Eclipse supports this since Java 8 was released, see <a href=\"http://help.eclipse.org/topic/org.eclipse.jdt.doc.user/tasks/task-using_null_type_annotations.htm\" rel=\"nofollow noreferrer\">help.eclipse.org/topic/org.eclipse.jdt.doc.user/tasks/&hellip;</a>"},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":0,"creation_date":1523984383,"post_id":2386013,"comment_id":86783334,"body_markdown":"This should now be the primary answer, I believe the accepted answer was accepted before these annotations were available.  I wonder if there is a way to get it promoted to the top at least...","body":"This should now be the primary answer, I believe the accepted answer was accepted before these annotations were available.  I wonder if there is a way to get it promoted to the top at least..."},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":0,"creation_date":1523984661,"post_id":2386013,"comment_id":86783490,"body_markdown":"By the way, the implementations of the checkers are not all consistent!  Eclipse&#39;s checker is a good deal better than IntelliJ&#39;s (although I&#39;ve been using IntelliJ&#39;s, it&#39;s definitely better than nothing).  Eclipses has much better handling of un-annotated variables. https://stackoverflow.com/questions/48349393/can-i-make-intellij-nonnull-nullable-annotations-act-like-eclipse?noredirect=1","body":"By the way, the implementations of the checkers are not all consistent!  Eclipse&#39;s checker is a good deal better than IntelliJ&#39;s (although I&#39;ve been using IntelliJ&#39;s, it&#39;s definitely better than nothing).  Eclipses has much better handling of un-annotated variables. <a href=\"https://stackoverflow.com/questions/48349393/can-i-make-intellij-nonnull-nullable-annotations-act-like-eclipse?noredirect=1\" title=\"can i make intellij nonnull nullable annotations act like eclipse\">stackoverflow.com/questions/48349393/&hellip;</a>"},{"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"score":0,"creation_date":1657339136,"post_id":2386013,"comment_id":128792883,"body_markdown":"In the second example, IntelliJ tells you that you&#39;re applying the `@Nullable` annotation to a method that will never return null.","body":"In the second example, IntelliJ tells you that you&#39;re applying the <code>@Nullable</code> annotation to a method that will never return null."},{"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"score":1,"creation_date":1657580755,"post_id":2386013,"comment_id":128840183,"body_markdown":"@JavaKaBaby Code portability does NOT suffer with JetBrains. All JetBrains does is make NullPointerExceptions a compile-time error instead of a runtime error. Building with another compiler won&#39;t change the behavior of the code at all, it just delays the reporting of the bug until runtime. The code ports just fine. This is an understandable gut-reaction to any suggestion to use some compiler-specific solution, but in this case, when you think it through, you&#39;ll see that this is still a viable option. And now that other compilers support this, it&#39;s becoming even more viable.","body":"@JavaKaBaby Code portability does NOT suffer with JetBrains. All JetBrains does is make NullPointerExceptions a compile-time error instead of a runtime error. Building with another compiler won&#39;t change the behavior of the code at all, it just delays the reporting of the bug until runtime. The code ports just fine. This is an understandable gut-reaction to any suggestion to use some compiler-specific solution, but in this case, when you think it through, you&#39;ll see that this is still a viable option. And now that other compilers support this, it&#39;s becoming even more viable."}],"tags":[],"owner":{"account_id":2963,"reputation":5270,"user_id":4206,"accept_rate":75,"display_name":"Luca Molteni"},"comment_count":16,"down_vote_count":6,"up_vote_count":715,"is_accepted":false,"score":709,"last_activity_date":1546549435,"creation_date":1267785079,"answer_id":2386013,"question_id":271526,"body_markdown":"If you use (or planning to use) a Java IDE like [JetBrains IntelliJ IDEA][1], [Eclipse][2] or [Netbeans][3] or a tool like findbugs then you can use annotations to solve this problem.\r\n\r\nBasically, you&#39;ve got `@Nullable` and `@NotNull`.\r\n\r\nYou can use in method and parameters, like this:\r\n\r\n    @NotNull public static String helloWorld() {\r\n        return &quot;Hello World&quot;;\r\n    }\r\n\r\nor\r\n\r\n    @Nullable public static String helloWorld() {\r\n        return &quot;Hello World&quot;;\r\n    }\r\n\r\nThe second example won&#39;t compile (in IntelliJ IDEA).\r\n\r\nWhen you use the first `helloWorld()` function in another piece of code:\r\n\r\n    public static void main(String[] args)\r\n    {\r\n        String result = helloWorld();\r\n        if(result != null) {\r\n            System.out.println(result);\r\n        }\r\n    }\r\n\r\nNow the IntelliJ IDEA compiler will tell you that the check is useless, since the `helloWorld()` function won&#39;t return `null`, ever.\r\n\r\nUsing parameter\r\n\r\n    void someMethod(@NotNull someParameter) { }\r\n\r\nif you write something like:\r\n\r\n    someMethod(null);\r\n\r\nThis won&#39;t compile.\r\n\r\nLast example using `@Nullable`\r\n\r\n    @Nullable iWantToDestroyEverything() { return null; }\r\n\r\nDoing this\r\n\r\n    iWantToDestroyEverything().something();\r\n\r\nAnd you can be sure that this won&#39;t happen. :)\r\n\r\nIt&#39;s a nice way to let the compiler check something more than it usually does and to enforce your contracts to be stronger. Unfortunately, it&#39;s not supported by all the compilers.\r\n\r\nIn IntelliJ IDEA 10.5 and on, they added support for any other `@Nullable` `@NotNull` implementations.\r\n\r\nSee blog post *[More flexible and configurable @Nullable/@NotNull annotations][4]*.\r\n\r\n\r\n  [1]: https://www.jetbrains.com/idea/\r\n  [2]: https://www.eclipse.org/\r\n  [3]: https://netbeans.org/\r\n  [4]: https://blog.jetbrains.com/idea/2011/03/more-flexible-and-configurable-nullublenotnull-annotations/","title":"How do I avoid checking for nulls in Java?","body":"<p>If you use (or planning to use) a Java IDE like <a href=\"https://www.jetbrains.com/idea/\" rel=\"noreferrer\">JetBrains IntelliJ IDEA</a>, <a href=\"https://www.eclipse.org/\" rel=\"noreferrer\">Eclipse</a> or <a href=\"https://netbeans.org/\" rel=\"noreferrer\">Netbeans</a> or a tool like findbugs then you can use annotations to solve this problem.</p>\n\n<p>Basically, you've got <code>@Nullable</code> and <code>@NotNull</code>.</p>\n\n<p>You can use in method and parameters, like this:</p>\n\n<pre><code>@NotNull public static String helloWorld() {\n    return \"Hello World\";\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>@Nullable public static String helloWorld() {\n    return \"Hello World\";\n}\n</code></pre>\n\n<p>The second example won't compile (in IntelliJ IDEA).</p>\n\n<p>When you use the first <code>helloWorld()</code> function in another piece of code:</p>\n\n<pre><code>public static void main(String[] args)\n{\n    String result = helloWorld();\n    if(result != null) {\n        System.out.println(result);\n    }\n}\n</code></pre>\n\n<p>Now the IntelliJ IDEA compiler will tell you that the check is useless, since the <code>helloWorld()</code> function won't return <code>null</code>, ever.</p>\n\n<p>Using parameter</p>\n\n<pre><code>void someMethod(@NotNull someParameter) { }\n</code></pre>\n\n<p>if you write something like:</p>\n\n<pre><code>someMethod(null);\n</code></pre>\n\n<p>This won't compile.</p>\n\n<p>Last example using <code>@Nullable</code></p>\n\n<pre><code>@Nullable iWantToDestroyEverything() { return null; }\n</code></pre>\n\n<p>Doing this</p>\n\n<pre><code>iWantToDestroyEverything().something();\n</code></pre>\n\n<p>And you can be sure that this won't happen. :)</p>\n\n<p>It's a nice way to let the compiler check something more than it usually does and to enforce your contracts to be stronger. Unfortunately, it's not supported by all the compilers.</p>\n\n<p>In IntelliJ IDEA 10.5 and on, they added support for any other <code>@Nullable</code> <code>@NotNull</code> implementations.</p>\n\n<p>See blog post <em><a href=\"https://blog.jetbrains.com/idea/2011/03/more-flexible-and-configurable-nullublenotnull-annotations/\" rel=\"noreferrer\">More flexible and configurable @Nullable/@NotNull annotations</a></em>.</p>\n"},{"tags":[],"owner":{"account_id":615478,"reputation":1,"user_id":346135,"display_name":"daniel"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1442682274,"creation_date":1274361407,"answer_id":2874026,"question_id":271526,"body_markdown":"For utility classes, you can check that parameters are not null.\r\n\r\nIn all other cases, you may not have to. Use encapsulation as much as possible, thus reducing the places you feel tempted to check for null.\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>For utility classes, you can check that parameters are not null.</p>\n\n<p>In all other cases, you may not have to. Use encapsulation as much as possible, thus reducing the places you feel tempted to check for null.</p>\n"},{"comments":[{"owner":{"account_id":9558,"reputation":12465,"user_id":17713,"accept_rate":86,"display_name":"Matthias Meid"},"score":2,"creation_date":1282024442,"post_id":3499225,"comment_id":3656666,"body_markdown":"Mh, why that? Please don&#39;t feel any defensive, I&#39;d just like to learn more about Java :)","body":"Mh, why that? Please don&#39;t feel any defensive, I&#39;d just like to learn more about Java :)"},{"owner":{"account_id":25621,"reputation":21842,"user_id":65977,"accept_rate":79,"display_name":"Tyler"},"score":9,"creation_date":1308701102,"post_id":3499225,"comment_id":7549874,"body_markdown":"@Mudu As a general rule, I prefer the expression in an if statement to be a more &quot;positive&quot; statement, rather than a &quot;negative&quot; one. So if I saw `if (!something) { x(); } else { y(); }` I would be inclined to refactor it as `if (something) { y(); } else { x(); }` (though one could argue that `!= null` is the more positive option...). But more importantly, the important part of the code is not wrapped inside `{}`s and you have one level less of indentation for most of the method. I don&#39;t know if that was fastcodejava&#39;s reasoning but that would be mine.","body":"@Mudu As a general rule, I prefer the expression in an if statement to be a more &quot;positive&quot; statement, rather than a &quot;negative&quot; one. So if I saw <code>if (!something) { x(); } else { y(); }</code> I would be inclined to refactor it as <code>if (something) { y(); } else { x(); }</code> (though one could argue that <code>!= null</code> is the more positive option...). But more importantly, the important part of the code is not wrapped inside <code>{}</code>s and you have one level less of indentation for most of the method. I don&#39;t know if that was fastcodejava&#39;s reasoning but that would be mine."},{"owner":{"account_id":1202806,"reputation":23223,"user_id":1173112,"accept_rate":89,"display_name":"Koray Tugay"},"score":2,"creation_date":1450215897,"post_id":3499225,"comment_id":56341893,"body_markdown":"This is what I tend to do as well.. Keeps the code clean in my opinon.","body":"This is what I tend to do as well.. Keeps the code clean in my opinon."},{"owner":{"account_id":15323287,"reputation":95,"user_id":11055122,"display_name":"Skaldebane"},"score":0,"creation_date":1592865680,"post_id":3499225,"comment_id":110573126,"body_markdown":"@MatrixFrog Yeah that makes the code cleaner and easily readable, as you see the important code (when everything function without errors) first.","body":"@MatrixFrog Yeah that makes the code cleaner and easily readable, as you see the important code (when everything function without errors) first."}],"tags":[],"owner":{"account_id":62111,"reputation":40153,"user_id":184730,"accept_rate":72,"display_name":"fastcodejava"},"comment_count":4,"down_vote_count":1,"up_vote_count":39,"is_accepted":false,"score":38,"last_activity_date":1442682879,"creation_date":1282017585,"answer_id":3499225,"question_id":271526,"body_markdown":"In addition to using `assert` you can use the following:\r\n\r\n    if (someobject == null) {\r\n        // Handle null here then move on.\r\n    }\r\n\r\nThis is slightly better than:\r\n\r\n    if (someobject != null) {\r\n        .....\r\n        .....\r\n        \r\n\r\n\r\n        .....\r\n    }\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>In addition to using <code>assert</code> you can use the following:</p>\n\n<pre><code>if (someobject == null) {\n    // Handle null here then move on.\n}\n</code></pre>\n\n<p>This is slightly better than:</p>\n\n<pre><code>if (someobject != null) {\n    .....\n    .....\n\n\n\n    .....\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":87133,"reputation":15651,"user_id":241824,"accept_rate":82,"display_name":"Sawyer"},"score":2,"creation_date":1313559726,"post_id":3925191,"comment_id":8485465,"body_markdown":"What&#39;s wrong with this method, I think @tltester just want to give a default value if the it&#39;s null, which make sense.","body":"What&#39;s wrong with this method, I think @tltester just want to give a default value if the it&#39;s null, which make sense."},{"owner":{"account_id":37213,"reputation":3909,"user_id":106350,"accept_rate":80,"display_name":"ivant"},"score":1,"creation_date":1429171471,"post_id":3925191,"comment_id":47475928,"body_markdown":"There is such a method in Apache commons-lang: `ObjectUtils.defaultIfNull()`. There is one more general: `ObjectUtils.firstNonNull()`, which can be used to implement a degrading strategy: `firstNonNull(bestChoice, secondBest, thirdBest, fallBack);`","body":"There is such a method in Apache commons-lang: <code>ObjectUtils.defaultIfNull()</code>. There is one more general: <code>ObjectUtils.firstNonNull()</code>, which can be used to implement a degrading strategy: <code>firstNonNull(bestChoice, secondBest, thirdBest, fallBack);</code>"}],"tags":[],"owner":{"account_id":661728,"reputation":31,"user_id":474659,"display_name":"tltester"},"comment_count":2,"down_vote_count":4,"up_vote_count":15,"is_accepted":false,"score":11,"last_activity_date":1442683075,"creation_date":1286982884,"answer_id":3925191,"question_id":271526,"body_markdown":"    public static &lt;T&gt; T ifNull(T toCheck, T ifNull) {\r\n        if (toCheck == null) {\r\n               return ifNull;\r\n        }\r\n        return toCheck;\r\n    }\r\n","title":"How do I avoid checking for nulls in Java?","body":"<pre><code>public static &lt;T&gt; T ifNull(T toCheck, T ifNull) {\n    if (toCheck == null) {\n           return ifNull;\n    }\n    return toCheck;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":124682,"reputation":30003,"user_id":319931,"accept_rate":75,"display_name":"Mechanical snail"},"score":6,"creation_date":1345187108,"post_id":5023357,"comment_id":16006562,"body_markdown":"-1. That&#39;s even worse. Now instead of crashing if you forget to test, your program silently propagates an incorrect value.","body":"-1. That&#39;s even worse. Now instead of crashing if you forget to test, your program silently propagates an incorrect value."}],"tags":[],"owner":{"account_id":6195,"reputation":196,"user_id":10324,"display_name":"LarryN"},"comment_count":1,"down_vote_count":10,"up_vote_count":5,"is_accepted":false,"score":-5,"last_activity_date":1297898075,"creation_date":1297898075,"answer_id":5023357,"question_id":271526,"body_markdown":"Another suggestion is to program defensively - where your classes/functions provide default values that are known and safe, and where null is reserved for true errors/exceptions.\r\n\r\nFor example, instead of functions that return Strings returning null when there is a problem (say converting a number to a string), have them return an empty String (&quot;&quot;). You still have to test the return value before proceeding, but there would be no special cases for exceptions. An additional benefit of this style of programming is that your program will be able to differentiate and respond accordingly between normal operations and exceptions.","title":"How do I avoid checking for nulls in Java?","body":"<p>Another suggestion is to program defensively - where your classes/functions provide default values that are known and safe, and where null is reserved for true errors/exceptions.</p>\n\n<p>For example, instead of functions that return Strings returning null when there is a problem (say converting a number to a string), have them return an empty String (\"\"). You still have to test the return value before proceeding, but there would be no special cases for exceptions. An additional benefit of this style of programming is that your program will be able to differentiate and respond accordingly between normal operations and exceptions.</p>\n"},{"tags":[],"owner":{"account_id":91317,"reputation":389,"user_id":250816,"accept_rate":25,"display_name":"Leen Toelen"},"comment_count":0,"down_vote_count":2,"up_vote_count":11,"is_accepted":false,"score":9,"last_activity_date":1442683679,"creation_date":1299794454,"answer_id":5266443,"question_id":271526,"body_markdown":"You can use [FindBugs][1]. They also have an [Eclipse][2] plugin) that helps you find duplicate null checks (among other things), but keep in mind that sometimes you should opt for defensive programming. There is also [Contracts for Java][3] which may be helpful.\r\n\r\n  [1]: http://findbugs.sourceforge.net\r\n  [2]: http://en.wikipedia.org/wiki/Eclipse_%28software%29\r\n  [3]: http://code.google.com/p/cofoja/\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>You can use <a href=\"http://findbugs.sourceforge.net\" rel=\"nofollow noreferrer\">FindBugs</a>. They also have an <a href=\"http://en.wikipedia.org/wiki/Eclipse_%28software%29\" rel=\"nofollow noreferrer\">Eclipse</a> plugin) that helps you find duplicate null checks (among other things), but keep in mind that sometimes you should opt for defensive programming. There is also <a href=\"http://code.google.com/p/cofoja/\" rel=\"nofollow noreferrer\">Contracts for Java</a> which may be helpful.</p>\n"},{"comments":[{"owner":{"account_id":927017,"reputation":2097,"user_id":957595,"accept_rate":75,"display_name":"Paul Jackson"},"score":3,"creation_date":1321247217,"post_id":5311857,"comment_id":9957008,"body_markdown":"Absolutely. Applications that just throw the error and crash are of higher quality because there is no doubt when they are not working. Applications that swallow the errors at best degrade gracefully but usually don&#39;t work in ways that are difficult to notice and don&#39;t get fixed. And when the problem is noticed they are much harder to debug.","body":"Absolutely. Applications that just throw the error and crash are of higher quality because there is no doubt when they are not working. Applications that swallow the errors at best degrade gracefully but usually don&#39;t work in ways that are difficult to notice and don&#39;t get fixed. And when the problem is noticed they are much harder to debug."}],"tags":[],"owner":{"account_id":317668,"reputation":423,"user_id":634475,"display_name":"Oleg"},"comment_count":1,"down_vote_count":0,"up_vote_count":40,"is_accepted":false,"score":40,"last_activity_date":1442689235,"creation_date":1300192945,"answer_id":5311857,"question_id":271526,"body_markdown":"Common &quot;problem&quot; in Java indeed.\r\n\r\nFirst, my thoughts on this:\r\n\r\nI consider that it is bad to &quot;eat&quot; something when NULL was passed where NULL isn&#39;t a valid value. If you&#39;re not exiting the method with some sort of error then it means nothing went wrong in your method which is not true. Then you probably return null in this case, and in the receiving method you again check for null, and it never ends, and you end up with &quot;if != null&quot;, etc..\r\n\r\nSo, IMHO, null must be a critical error which prevents further execution (that is, where null is not a valid value).\r\n\r\nThe way I solve this problem is this:\r\n\r\nFirst, I follow this convention:\r\n\r\n1. All public methods / API always check its arguments for null\r\n2. All private methods do not check for null since they are controlled methods (just let die with nullpointer exception in case it wasn&#39;t handled above)\r\n3. The only other methods which do not check for null are utility methods. They are public, but if you call them for some reason, you know what parameters you pass. This is like trying to boil water in the kettle without providing water...\r\n\r\nAnd finally, in the code, the first line of the public method goes like this:\r\n\r\n    ValidationUtils.getNullValidator().addParam(plans, &quot;plans&quot;).addParam(persons, &quot;persons&quot;).validate();\r\n\r\nNote that addParam() returns self, so that you can add more parameters to check.\r\n\r\nMethod `validate()` will throw checked `ValidationException` if any of the parameters is null (checked or unchecked is more a design/taste issue, but my `ValidationException` is checked).\r\n\r\n    void validate() throws ValidationException;\r\n\r\nThe message will contain the following text if, for example, &quot;plans&quot; is null:\r\n\r\n&quot;**Illegal argument value null is encountered for parameter [plans]**&quot;\r\n\r\nAs you can see, the second value in the addParam() method (string) is needed for the user message, because you cannot easily detect passed-in variable name, even with reflection (not subject of this post anyway...).\r\n\r\nAnd yes, we know that beyond this line we will no longer encounter a null value so we just safely invoke methods on those objects.\r\n\r\nThis way, the code is clean, easy maintainable and readable.\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>Common \"problem\" in Java indeed.</p>\n\n<p>First, my thoughts on this:</p>\n\n<p>I consider that it is bad to \"eat\" something when NULL was passed where NULL isn't a valid value. If you're not exiting the method with some sort of error then it means nothing went wrong in your method which is not true. Then you probably return null in this case, and in the receiving method you again check for null, and it never ends, and you end up with \"if != null\", etc..</p>\n\n<p>So, IMHO, null must be a critical error which prevents further execution (that is, where null is not a valid value).</p>\n\n<p>The way I solve this problem is this:</p>\n\n<p>First, I follow this convention:</p>\n\n<ol>\n<li>All public methods / API always check its arguments for null</li>\n<li>All private methods do not check for null since they are controlled methods (just let die with nullpointer exception in case it wasn't handled above)</li>\n<li>The only other methods which do not check for null are utility methods. They are public, but if you call them for some reason, you know what parameters you pass. This is like trying to boil water in the kettle without providing water...</li>\n</ol>\n\n<p>And finally, in the code, the first line of the public method goes like this:</p>\n\n<pre><code>ValidationUtils.getNullValidator().addParam(plans, \"plans\").addParam(persons, \"persons\").validate();\n</code></pre>\n\n<p>Note that addParam() returns self, so that you can add more parameters to check.</p>\n\n<p>Method <code>validate()</code> will throw checked <code>ValidationException</code> if any of the parameters is null (checked or unchecked is more a design/taste issue, but my <code>ValidationException</code> is checked).</p>\n\n<pre><code>void validate() throws ValidationException;\n</code></pre>\n\n<p>The message will contain the following text if, for example, \"plans\" is null:</p>\n\n<p>\"<strong>Illegal argument value null is encountered for parameter [plans]</strong>\"</p>\n\n<p>As you can see, the second value in the addParam() method (string) is needed for the user message, because you cannot easily detect passed-in variable name, even with reflection (not subject of this post anyway...).</p>\n\n<p>And yes, we know that beyond this line we will no longer encounter a null value so we just safely invoke methods on those objects.</p>\n\n<p>This way, the code is clean, easy maintainable and readable.</p>\n"},{"comments":[{"owner":{"account_id":1416578,"reputation":1743,"user_id":1342121,"display_name":"ianpojman"},"score":2,"creation_date":1350531331,"post_id":6101200,"comment_id":17549406,"body_markdown":"better to use assertions, i.e Contract.notNull(abc, &quot;abc must be non-null, did it fail to load during xyz?&quot;); - this is a more compact way than doing an if (abc!=null) { throw new RuntimeException...}","body":"better to use assertions, i.e Contract.notNull(abc, &quot;abc must be non-null, did it fail to load during xyz?&quot;); - this is a more compact way than doing an if (abc!=null) { throw new RuntimeException...}"}],"tags":[],"owner":{"account_id":60816,"reputation":3394,"user_id":181551,"accept_rate":41,"display_name":"Alex Worden"},"comment_count":1,"down_vote_count":0,"up_vote_count":95,"is_accepted":false,"score":95,"last_activity_date":1648392842,"creation_date":1306174694,"answer_id":6101200,"question_id":271526,"body_markdown":"I&#39;m a fan of &quot;fail fast&quot; code. Ask yourself - are you doing something useful in the case where the parameter is null? If you don&#39;t have a clear answer for what your code should do in that case... i.e. - it should never be null in the first place, then ignore it and allow a `NullPointerException` to be thrown. The calling code will make just as much sense of an NPE as it would an `IllegalArgumentException`, but it&#39;ll be easier for the developer to debug and understand what went wrong if an NPE is thrown rather than your code attempting to execute some other unexpected contingency logic - which ultimately results in the application failing anyway. ","title":"How do I avoid checking for nulls in Java?","body":"<p>I'm a fan of &quot;fail fast&quot; code. Ask yourself - are you doing something useful in the case where the parameter is null? If you don't have a clear answer for what your code should do in that case... i.e. - it should never be null in the first place, then ignore it and allow a <code>NullPointerException</code> to be thrown. The calling code will make just as much sense of an NPE as it would an <code>IllegalArgumentException</code>, but it'll be easier for the developer to debug and understand what went wrong if an NPE is thrown rather than your code attempting to execute some other unexpected contingency logic - which ultimately results in the application failing anyway.</p>\n"},{"comments":[{"owner":{"account_id":1829731,"reputation":500,"user_id":1661531,"accept_rate":25,"display_name":"ivan.aguirre"},"score":0,"creation_date":1373662779,"post_id":7140229,"comment_id":25657276,"body_markdown":"Michael Feathers has written an short and interesthing text about approaches like the one you mentioned:\n\nhttp://manuelp.newsblur.com/site/424/","body":"Michael Feathers has written an short and interesthing text about approaches like the one you mentioned:  <a href=\"http://manuelp.newsblur.com/site/424/\" rel=\"nofollow noreferrer\">manuelp.newsblur.com/site/424</a>"},{"owner":{"account_id":15323287,"reputation":95,"user_id":11055122,"display_name":"Skaldebane"},"score":0,"creation_date":1593035383,"post_id":7140229,"comment_id":110642758,"body_markdown":"If there&#39;s anything I appreciated most about this answer, it&#39;s the &quot;careful design&quot; tip. Whether it boils down to writing code, fixing bugs or checking for nullity, it&#39;s DAMN CRUCIAL to make an overall good design and organisation in code, to avoid many redundancies that we still have to deal with today because of bad design choices made a long time ago...","body":"If there&#39;s anything I appreciated most about this answer, it&#39;s the &quot;careful design&quot; tip. Whether it boils down to writing code, fixing bugs or checking for nullity, it&#39;s DAMN CRUCIAL to make an overall good design and organisation in code, to avoid many redundancies that we still have to deal with today because of bad design choices made a long time ago..."}],"tags":[],"owner":{"account_id":714727,"reputation":1,"user_id":904825,"display_name":"Mr Palo"},"comment_count":2,"down_vote_count":1,"up_vote_count":26,"is_accepted":false,"score":25,"last_activity_date":1463021370,"creation_date":1313951623,"answer_id":7140229,"question_id":271526,"body_markdown":"I like articles from Nat Pryce. Here are the links:\r\n\r\n - [Avoiding Nulls with Polymorphic Dispatch][1]\r\n - [Avoiding Nulls with &quot;Tell, Don&#39;t Ask&quot; Style][2]\r\n\r\nIn the articles there is also a link to a Git repository for a Java Maybe Type which I find interesting, but I don&#39;t think it alone could decrease the\r\nchecking code bloat. After doing some research on the Internet, I think **!= null** code bloat could be decreased mainly by careful design.\r\n\r\n[1]: http://www.natpryce.com/articles/000778.html\r\n[2]: http://www.natpryce.com/articles/000777.html\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>I like articles from Nat Pryce. Here are the links:</p>\n\n<ul>\n<li><a href=\"http://www.natpryce.com/articles/000778.html\" rel=\"noreferrer\">Avoiding Nulls with Polymorphic Dispatch</a></li>\n<li><a href=\"http://www.natpryce.com/articles/000777.html\" rel=\"noreferrer\">Avoiding Nulls with \"Tell, Don't Ask\" Style</a></li>\n</ul>\n\n<p>In the articles there is also a link to a Git repository for a Java Maybe Type which I find interesting, but I don't think it alone could decrease the\nchecking code bloat. After doing some research on the Internet, I think <strong>!= null</strong> code bloat could be decreased mainly by careful design.</p>\n"},{"comments":[{"owner":{"account_id":26625,"reputation":3060,"user_id":69471,"display_name":"TMN"},"score":8,"creation_date":1321992447,"post_id":7847199,"comment_id":10126096,"body_markdown":"If you&#39;re constantly going to negate the return value, wouldn&#39;t it be better to simply write a function `isNotNull`?  Doesn&#39;t that more clearly indicate your intent?","body":"If you&#39;re constantly going to negate the return value, wouldn&#39;t it be better to simply write a function <code>isNotNull</code>?  Doesn&#39;t that more clearly indicate your intent?"},{"owner":{"account_id":277337,"reputation":10612,"user_id":571271,"accept_rate":100,"display_name":"jeha"},"score":0,"creation_date":1321992854,"post_id":7847199,"comment_id":10126240,"body_markdown":"@TMN: your are right, ideally I&#39;d like to have both a `isNull` and `isNotNull` method.","body":"@TMN: your are right, ideally I&#39;d like to have both a <code>isNull</code> and <code>isNotNull</code> method."},{"owner":{"account_id":1045732,"reputation":11348,"user_id":1050755,"accept_rate":51,"display_name":"user1050755"},"score":25,"creation_date":1362619637,"post_id":7847199,"comment_id":21526482,"body_markdown":"I fail to see how this is more concise than &quot;someobject != null&quot;.","body":"I fail to see how this is more concise than &quot;someobject != null&quot;."},{"owner":{"account_id":3175375,"reputation":1971,"user_id":2683399,"accept_rate":50,"display_name":"IceArdor"},"score":0,"creation_date":1494577708,"post_id":7847199,"comment_id":74898232,"body_markdown":"Compile-time and run-time dev tools like findbugs will have a harder time identifying duplicate null checks. Also, you better hope Java inlines that isNull function,","body":"Compile-time and run-time dev tools like findbugs will have a harder time identifying duplicate null checks. Also, you better hope Java inlines that isNull function,"}],"tags":[],"owner":{"account_id":277337,"reputation":10612,"user_id":571271,"accept_rate":100,"display_name":"jeha"},"comment_count":4,"down_vote_count":3,"up_vote_count":9,"is_accepted":false,"score":6,"last_activity_date":1442690333,"creation_date":1319187757,"answer_id":7847199,"question_id":271526,"body_markdown":"One more alternative:\r\n\r\nThe following simple function helps to hide the null-check (I don&#39;t know why, but I haven&#39;t found it as part of the same *common* library):\r\n\r\n    public static &lt;T&gt; boolean isNull(T argument) {\r\n        return (argument == null);\r\n    }\r\n\r\nYou could now write\r\n\r\n    if (!isNull(someobject)) {\r\n        someobject.doCalc();\r\n    }\r\n\r\nwhich is IMO a better way of expressing `!= null`.\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>One more alternative:</p>\n\n<p>The following simple function helps to hide the null-check (I don't know why, but I haven't found it as part of the same <em>common</em> library):</p>\n\n<pre><code>public static &lt;T&gt; boolean isNull(T argument) {\n    return (argument == null);\n}\n</code></pre>\n\n<p>You could now write</p>\n\n<pre><code>if (!isNull(someobject)) {\n    someobject.doCalc();\n}\n</code></pre>\n\n<p>which is IMO a better way of expressing <code>!= null</code>.</p>\n"},{"comments":[{"owner":{"account_id":124682,"reputation":30003,"user_id":319931,"accept_rate":75,"display_name":"Mechanical snail"},"score":0,"creation_date":1345186858,"post_id":8212184,"comment_id":16006472,"body_markdown":"Just because it was *intended* to mean &quot;no data&quot; doesn&#39;t mean it *should* be used. The language implementation of `null` sucks.","body":"Just because it was <i>intended</i> to mean &quot;no data&quot; doesn&#39;t mean it <i>should</i> be used. The language implementation of <code>null</code> sucks."},{"owner":{"account_id":40221,"reputation":32100,"user_id":116509,"accept_rate":100,"display_name":"artbristol"},"score":6,"creation_date":1379148297,"post_id":8212184,"comment_id":27724300,"body_markdown":"Catching `NullPointerException` and returning `null` is horrible to debug. You end up with NPE later on anyway, and it&#39;s really hard to figure out what was originally null.","body":"Catching <code>NullPointerException</code> and returning <code>null</code> is horrible to debug. You end up with NPE later on anyway, and it&#39;s really hard to figure out what was originally null."},{"owner":{"account_id":83924,"reputation":12824,"user_id":234954,"accept_rate":71,"display_name":"jmoreno"},"score":0,"creation_date":1384755501,"post_id":8212184,"comment_id":29847708,"body_markdown":"The problem with your example is that getPhotoOfThePerson really has no business deciding whether or not to return a photo or how to deal with a null person -- a straightforward reading of the method name indicates that it returns a photo of a person.  It shouldn&#39;t return null because it doesn&#39;t (and shouldn&#39;t) know how the caller will handle a null photo.  The caller on the other hand should know what to do when the person is null.  Java doesn&#39;t have null propogation, which would eliminate the problem, as then it would know enough about how nulls are handled to go ahead and use it.","body":"The problem with your example is that getPhotoOfThePerson really has no business deciding whether or not to return a photo or how to deal with a null person -- a straightforward reading of the method name indicates that it returns a photo of a person.  It shouldn&#39;t return null because it doesn&#39;t (and shouldn&#39;t) know how the caller will handle a null photo.  The caller on the other hand should know what to do when the person is null.  Java doesn&#39;t have null propogation, which would eliminate the problem, as then it would know enough about how nulls are handled to go ahead and use it."},{"owner":{"account_id":993282,"reputation":2526,"user_id":1272233,"accept_rate":100,"display_name":"Doval"},"score":25,"creation_date":1384963045,"post_id":8212184,"comment_id":29949417,"body_markdown":"I&#39;d downvote if I had the reputation. Not only is null not necessary, it&#39;s a hole in the type system. Assigning a Tree to a List is a type error because trees are not values of type List; by that same logic, assigning null should be a type error because null is not a value of type Object, or any useful type for that matter. [Even the man that invented null](http://en.wikipedia.org/wiki/Tony_Hoare) considers it his &quot;billion-dollar mistake&quot;. The notion of &quot;a value that might be a value of type T OR nothing&quot; is its own type, and should be represented as such (e.g. Maybe&lt;T&gt; or Optional&lt;T&gt;).","body":"I&#39;d downvote if I had the reputation. Not only is null not necessary, it&#39;s a hole in the type system. Assigning a Tree to a List is a type error because trees are not values of type List; by that same logic, assigning null should be a type error because null is not a value of type Object, or any useful type for that matter. <a href=\"http://en.wikipedia.org/wiki/Tony_Hoare\" rel=\"nofollow noreferrer\">Even the man that invented null</a> considers it his &quot;billion-dollar mistake&quot;. The notion of &quot;a value that might be a value of type T OR nothing&quot; is its own type, and should be represented as such (e.g. Maybe&lt;T&gt; or Optional&lt;T&gt;)."},{"owner":{"account_id":201558,"reputation":20199,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"score":0,"creation_date":1396346178,"post_id":8212184,"comment_id":34735578,"body_markdown":"As of &quot;Assigning a Tree to a List&quot; you were not talking about Java, did you? Because Java is &#39;compile time strict type&#39; language (it&#39;s memory model differ from C++, C# though). Java compiler will not give you an opportunity to assign Tree to a List.","body":"As of &quot;Assigning a Tree to a List&quot; you were not talking about Java, did you? Because Java is &#39;compile time strict type&#39; language (it&#39;s memory model differ from C++, C# though). Java compiler will not give you an opportunity to assign Tree to a List."},{"owner":{"account_id":201558,"reputation":20199,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"score":2,"creation_date":1396350375,"post_id":8212184,"comment_id":34738391,"body_markdown":"As of &quot;Maybe&lt;T&gt; or Optional&lt;T&gt;&quot; you still need to write code like `if (maybeNull.hasValue()) {...}` so what is the difference with `if (maybeNull != null)) {...}`?","body":"As of &quot;Maybe&lt;T&gt; or Optional&lt;T&gt;&quot; you still need to write code like <code>if (maybeNull.hasValue()) {...}</code> so what is the difference with <code>if (maybeNull != null)) {...}</code>?"},{"owner":{"account_id":201558,"reputation":20199,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"score":0,"creation_date":1396351058,"post_id":8212184,"comment_id":34738895,"body_markdown":"As of &quot;Java doesn&#39;t have null propagation, which would eliminate the problem&quot;, usually propagation is about &#39;exceptional cases&#39;. But data availability or non-availability is a common business flow in most cases. If it is something exceptional in data non-availability (which is dictated by business) you should explicitly throw reasonable exception with a reasonable message. Null propagation (with line number inside?..) would be really horrible as for me.","body":"As of &quot;Java doesn&#39;t have null propagation, which would eliminate the problem&quot;, usually propagation is about &#39;exceptional cases&#39;. But data availability or non-availability is a common business flow in most cases. If it is something exceptional in data non-availability (which is dictated by business) you should explicitly throw reasonable exception with a reasonable message. Null propagation (with line number inside?..) would be really horrible as for me."},{"owner":{"account_id":201558,"reputation":20199,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"score":1,"creation_date":1396351970,"post_id":8212184,"comment_id":34739517,"body_markdown":"As of &quot;catching NullPointerException and returning null is horrible to debug. You end up with NPE later on anyway, and it&#39;s really hard to figure out what was originally null&quot;. I&#39;m totally agree! In those cases you should write a dozen of &#39;if&#39; statements or throw NPE if business logic imply data in-place, or use null-safe operator from new Java. But there are cases when I don&#39;t care about what exact step give me null. For example calculating some values for the user just before showing on the screen when you do expect data could be missing.","body":"As of &quot;catching NullPointerException and returning null is horrible to debug. You end up with NPE later on anyway, and it&#39;s really hard to figure out what was originally null&quot;. I&#39;m totally agree! In those cases you should write a dozen of &#39;if&#39; statements or throw NPE if business logic imply data in-place, or use null-safe operator from new Java. But there are cases when I don&#39;t care about what exact step give me null. For example calculating some values for the user just before showing on the screen when you do expect data could be missing."},{"owner":{"account_id":124364,"reputation":85329,"user_id":319403,"accept_rate":75,"display_name":"cHao"},"score":3,"creation_date":1415390135,"post_id":8212184,"comment_id":42190814,"body_markdown":"@MykhayloAdamovych: The benefit of `Maybe&lt;T&gt;` or `Optional&lt;T&gt;` isn&#39;t in the case where your `T` might be null, but in the case where it should never be null.  If you have a type that explicitly means &quot;this value *might* be null -- use with caution&quot;, and you use and return such a type consistently, then whenever you see a plain old `T` in your code, you can assume it is never null.  (Course, this would be a lot more useful if enforceable by the compiler.)","body":"@MykhayloAdamovych: The benefit of <code>Maybe&lt;T&gt;</code> or <code>Optional&lt;T&gt;</code> isn&#39;t in the case where your <code>T</code> might be null, but in the case where it should never be null.  If you have a type that explicitly means &quot;this value <i>might</i> be null -- use with caution&quot;, and you use and return such a type consistently, then whenever you see a plain old <code>T</code> in your code, you can assume it is never null.  (Course, this would be a lot more useful if enforceable by the compiler.)"},{"owner":{"account_id":201558,"reputation":20199,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"score":0,"creation_date":1419357024,"post_id":8212184,"comment_id":43671399,"body_markdown":"Agree. But you&#39;ll not reduce &#39;checks for emptiness&#39; in your code (the topic we are discussing), you&#39;ll be more safe though but it comes at a price.","body":"Agree. But you&#39;ll not reduce &#39;checks for emptiness&#39; in your code (the topic we are discussing), you&#39;ll be more safe though but it comes at a price."},{"owner":{"account_id":201558,"reputation":20199,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"score":0,"creation_date":1423135945,"post_id":8212184,"comment_id":45030097,"body_markdown":"&quot;Even the man that invented null considers it his &quot;billion-dollar mistake&quot; - null was there before anything was invented. One can invent set of rules to deal with it in specific way but this will be &#39;just another functionally complete system&#39;. I would like to know how much would it cost to deal with subtle bugs in such non fail fast system. May be we are close to compare such systems because of new trends.","body":"&quot;Even the man that invented null considers it his &quot;billion-dollar mistake&quot; - null was there before anything was invented. One can invent set of rules to deal with it in specific way but this will be &#39;just another functionally complete system&#39;. I would like to know how much would it cost to deal with subtle bugs in such non fail fast system. May be we are close to compare such systems because of new trends."},{"owner":{"account_id":201558,"reputation":20199,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"score":1,"creation_date":1423242217,"post_id":8212184,"comment_id":45082482,"body_markdown":"&quot;The notion of &quot;a value that might be a value of type T OR nothing&quot; is its own type, and should be represented as such (e.g. Maybe&lt;T&gt; or Optional&lt;T&gt;)&quot; - you may think that all references in Java are Optional&lt;T&gt; and you may switch to DefinetlyInitialized&lt;T&gt; by for using underused final keyword or introduce Mandatory&lt;T&gt;. So what&#39;s the difference?.. Anyway I like current Java defaults more because things around us are rather optional. It is optional for &#39;the kettle to be filled with water before cooking&#39;, and that &#39;there is some fuel in the car before you leave&#39; etc.","body":"&quot;The notion of &quot;a value that might be a value of type T OR nothing&quot; is its own type, and should be represented as such (e.g. Maybe&lt;T&gt; or Optional&lt;T&gt;)&quot; - you may think that all references in Java are Optional&lt;T&gt; and you may switch to DefinetlyInitialized&lt;T&gt; by for using underused final keyword or introduce Mandatory&lt;T&gt;. So what&#39;s the difference?.. Anyway I like current Java defaults more because things around us are rather optional. It is optional for &#39;the kettle to be filled with water before cooking&#39;, and that &#39;there is some fuel in the car before you leave&#39; etc."},{"owner":{"account_id":201558,"reputation":20199,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"score":0,"creation_date":1468925567,"post_id":8212184,"comment_id":64316923,"body_markdown":"Currently reading some Oracle Database Reference about &#39;Null Values in Arithmetic Expressions&#39;. It states: &#39;If any column value in an arithmetic expression is null, the result is null. For example, if you attempt to perform division by zero, you get an error. However, if you divide a number by null, the result is a null or unknown.&#39; But don&#39;t mind, this is totally not logical, there should be some silly guy somewhere at Oracle and he must be fired till these days...","body":"Currently reading some Oracle Database Reference about &#39;Null Values in Arithmetic Expressions&#39;. It states: &#39;If any column value in an arithmetic expression is null, the result is null. For example, if you attempt to perform division by zero, you get an error. However, if you divide a number by null, the result is a null or unknown.&#39; But don&#39;t mind, this is totally not logical, there should be some silly guy somewhere at Oracle and he must be fired till these days..."},{"owner":{"account_id":150501,"reputation":78480,"user_id":363751,"accept_rate":35,"display_name":"supercat"},"score":0,"creation_date":1470955287,"post_id":8212184,"comment_id":65172861,"body_markdown":"@MykhayloAdamovych: If meaningful values for array items will become known in arbitrary sequence, and it will be necessary to read some array items before meaningful values have been assigned to all of them, it will generally not be possible to statically rule out the possibility that items will be read before a meaningful value has been determined.  If Hoare doesn&#39;t like nulls, I&#39;m curious what kind of default value or behavior he&#39;d prefer?  Trapping when a null is read from the array might sometimes be better than waiting until it is dereferenced, but would make it impossible to copy...","body":"@MykhayloAdamovych: If meaningful values for array items will become known in arbitrary sequence, and it will be necessary to read some array items before meaningful values have been assigned to all of them, it will generally not be possible to statically rule out the possibility that items will be read before a meaningful value has been determined.  If Hoare doesn&#39;t like nulls, I&#39;m curious what kind of default value or behavior he&#39;d prefer?  Trapping when a null is read from the array might sometimes be better than waiting until it is dereferenced, but would make it impossible to copy..."},{"owner":{"account_id":150501,"reputation":78480,"user_id":363751,"accept_rate":35,"display_name":"supercat"},"score":0,"creation_date":1470955505,"post_id":8212184,"comment_id":65172937,"body_markdown":"...a partially-populated array by iteratively copying the items therein.  The only other choices I can see is to say that attempting to dereference a pointer read from an array slot that hasn&#39;t yet been written will access some default object (which would for most purposes seem rather silly) or will have C-style &quot;Undefined Behavior&quot;.  I&#39;d say trapping null pointers are better than any alternative I can see.","body":"...a partially-populated array by iteratively copying the items therein.  The only other choices I can see is to say that attempting to dereference a pointer read from an array slot that hasn&#39;t yet been written will access some default object (which would for most purposes seem rather silly) or will have C-style &quot;Undefined Behavior&quot;.  I&#39;d say trapping null pointers are better than any alternative I can see."},{"owner":{"account_id":380676,"reputation":2153,"user_id":734860,"accept_rate":88,"display_name":"entonio"},"score":0,"creation_date":1501529954,"post_id":8212184,"comment_id":77809319,"body_markdown":"@MykhayloAdamovych see how Swift does it, which is how many others did before. If Java simply didn&#39;t have null, you&#39;d have no way to store a null into a field/variable; to handle the case where it&#39;s optional, you&#39;d have to have an Optional&lt;T&gt;. And you ask - what would that gain? Wouldn&#39;t you need as many checks? No, you wouldn&#39;t, because the compiler would ensure that every non-Optional was never null, and more than half our checks are with objects that never should be null and never are, or if they are then that&#39;s a bug that would either be caught by the compiler or exposed by the interface.","body":"@MykhayloAdamovych see how Swift does it, which is how many others did before. If Java simply didn&#39;t have null, you&#39;d have no way to store a null into a field/variable; to handle the case where it&#39;s optional, you&#39;d have to have an Optional&lt;T&gt;. And you ask - what would that gain? Wouldn&#39;t you need as many checks? No, you wouldn&#39;t, because the compiler would ensure that every non-Optional was never null, and more than half our checks are with objects that never should be null and never are, or if they are then that&#39;s a bug that would either be caught by the compiler or exposed by the interface."},{"owner":{"account_id":4610287,"reputation":377,"user_id":3738598,"accept_rate":82,"display_name":"Boo"},"score":1,"creation_date":1503014086,"post_id":8212184,"comment_id":78450527,"body_markdown":"@entonio i don&#39;t follow, After the compiler ensures that the Optional (or what ever) is not null then what?  Are you saying that the Person application is designed to never encounter a situation where someone does not have a girlfriend?  How does the application handle those scenarios, are there multiple types of Person, maybe we create 2 types of Person, LonelyPerson and ShackledPerson?","body":"@entonio i don&#39;t follow, After the compiler ensures that the Optional (or what ever) is not null then what?  Are you saying that the Person application is designed to never encounter a situation where someone does not have a girlfriend?  How does the application handle those scenarios, are there multiple types of Person, maybe we create 2 types of Person, LonelyPerson and ShackledPerson?"},{"owner":{"account_id":201558,"reputation":20199,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"score":0,"creation_date":1503260318,"post_id":8212184,"comment_id":78530426,"body_markdown":"@entonio, Java has Optional&lt;T&gt;, that is non-final reference. And Java&#39;s compiler ensures that every final is initialized. And you would have the same amount of checks if you are senior enough not to write boilerplate code because &#39;emptiness&#39; is a _business notion_. And Java&#39;s Optional&lt;T&gt; is free from `get()` and `put()` boilerplate.","body":"@entonio, Java has Optional&lt;T&gt;, that is non-final reference. And Java&#39;s compiler ensures that every final is initialized. And you would have the same amount of checks if you are senior enough not to write boilerplate code because &#39;emptiness&#39; is a <i>business notion</i>. And Java&#39;s Optional&lt;T&gt; is free from <code>get()</code> and <code>put()</code> boilerplate."}],"tags":[],"owner":{"account_id":201558,"reputation":20199,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"comment_count":18,"down_vote_count":12,"up_vote_count":89,"is_accepted":false,"score":77,"last_activity_date":1519423387,"creation_date":1321880298,"answer_id":8212184,"question_id":271526,"body_markdown":"Null is not a &#39;problem&#39;. It is an integral part of a [complete][1] modeling tool set. Software aims to model the complexity of the world and null bears its burden. **Null indicates &#39;No data&#39; or &#39;Unknown&#39;** in Java and the like. So it is appropriate to use nulls for these purposes. I don&#39;t prefer the &#39;Null object&#39; pattern; I think it rise the &#39;[who will guard\r\nthe guardians][2]&#39; problem. &lt;br/&gt;\r\nIf you ask me what is the name of my girlfriend I&#39;ll tell you that I have no girlfriend. In the Java language I&#39;ll return null. \r\nAn alternative would be to throw meaningful exception to indicate some problem that can&#39;t be (or don&#39;t want to be) solved right there and delegate it somewhere higher in the stack to retry or report data access error to the user.  \r\n\r\n1. **For an &#39;unknown question&#39; give &#39;unknown answer&#39;.** (Be null-safe where this is correct from business point of view) Checking arguments for null once inside a method before usage relieves multiple callers from checking them before a call.\r\n\r\n        public Photo getPhotoOfThePerson(Person person) {\r\n            if (person == null)\r\n                return null;\r\n            // Grabbing some resources or intensive calculation\r\n            // using person object anyhow.\r\n        }\r\n\r\n    Previous leads to normal logic flow to get no photo of a non-existent girlfriend from my photo library.\r\n\r\n        getPhotoOfThePerson(me.getGirlfriend())\r\n\r\n    And it fits with new coming Java API (looking forward)\r\n\r\n        getPhotoByName(me.getGirlfriend()?.getName())\r\n\r\n    While it is rather &#39;normal business flow&#39; not to find photo stored into the DB for some person, I used to use pairs like below for some other cases\r\n\r\n        public static MyEnum parseMyEnum(String value); // throws IllegalArgumentException\r\n        public static MyEnum parseMyEnumOrNull(String value);\r\n\r\n    And don&#39;t loathe to type `&lt;alt&gt; + &lt;shift&gt; + &lt;j&gt;` (generate javadoc in Eclipse) and write three additional words for you public API. This will be more than enough for all but those who don&#39;t read documentation.\r\n\r\n        /**\r\n         * @return photo or null\r\n         */\r\n\r\n    or\r\n\r\n        /**\r\n         * @return photo, never null\r\n         */\r\n\r\n2. **This is rather theoretical case and in most cases you should prefer java null safe API (in case it will be released in another 10 years), but `NullPointerException` is subclass of an `Exception`.** Thus it is a form of `Throwable` that indicates conditions that a reasonable application might want to catch ([javadoc][3])! To use the first most advantage of exceptions and separate error-handling code from &#39;regular&#39; code ([according to creators of Java][4]) it is appropriate, as for me, to catch `NullPointerException`.\r\n\r\n        public Photo getGirlfriendPhoto() {\r\n            try {\r\n                return appContext.getPhotoDataSource().getPhotoByName(me.getGirlfriend().getName());\r\n            } catch (NullPointerException e) {\r\n                return null;\r\n            }\r\n        }\r\n\r\n   Questions could arise:\r\n\r\n   Q. What if `getPhotoDataSource()` returns null?  \r\n   A. It is up to business logic. If I fail to find a photo album I&#39;ll show you no photos. What if appContext is not initialized? This method&#39;s business logic puts up with this. If the same logic should be more strict then throwing an exception it is part of the business logic and explicit check for null should be used (case 3). The **new Java Null-safe API fits better here to specify selectively what implies and what does not imply to be initialized** to be fail-fast in case of programmer errors.\r\n\r\n   Q. Redundant code could be executed and unnecessary resources could be grabbed.  \r\n   A. It could take place if `getPhotoByName()` would try to open a database connection, create `PreparedStatement` and use the person name as an SQL parameter at last. The approach *for an unknown question gives an unknown answer* (case 1) works here. Before grabbing resources the method should check parameters and return &#39;unknown&#39; result if needed.\r\n\r\n   Q. This approach has a performance penalty due to the try closure opening.  \r\n   A. Software should be easy to understand and modify firstly. Only after this, one could think about performance, and only if needed! and where needed! ([source][5]), and many others).\r\n\r\n    PS. This approach will be as reasonable to use as the *separate error-handling code from &quot;regular&quot; code* principle is reasonable to use in some place. Consider the next example:\r\n\r\n        public SomeValue calculateSomeValueUsingSophisticatedLogic(Predicate predicate) {\r\n            try {\r\n                Result1 result1 = performSomeCalculation(predicate);\r\n                Result2 result2 = performSomeOtherCalculation(result1.getSomeProperty());\r\n                Result3 result3 = performThirdCalculation(result2.getSomeProperty());\r\n                Result4 result4 = performLastCalculation(result3.getSomeProperty());\r\n                return result4.getSomeProperty();\r\n            } catch (NullPointerException e) {\r\n                return null;\r\n            }\r\n        }\r\n\r\n        public SomeValue calculateSomeValueUsingSophisticatedLogic(Predicate predicate) {\r\n            SomeValue result = null;\r\n            if (predicate != null) {\r\n                Result1 result1 = performSomeCalculation(predicate);\r\n                if (result1 != null &amp;&amp; result1.getSomeProperty() != null) {\r\n                    Result2 result2 = performSomeOtherCalculation(result1.getSomeProperty());\r\n                    if (result2 != null &amp;&amp; result2.getSomeProperty() != null) {\r\n                        Result3 result3 = performThirdCalculation(result2.getSomeProperty());\r\n                        if (result3 != null &amp;&amp; result3.getSomeProperty() != null) {\r\n                            Result4 result4 = performLastCalculation(result3.getSomeProperty());\r\n                            if (result4 != null) {\r\n                                result = result4.getSomeProperty();\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n\r\n    PPS. For those fast to downvote (and not so fast to read documentation) I would like to say that I&#39;ve never caught a null-pointer exception (NPE) in my life. But this possibility was **intentionally designed** by the Java creators because NPE is a subclass of `Exception`. We have a precedent in Java history when `ThreadDeath` is an `Error` not because it is actually an application error, but solely because it was not intended to be caught! How much NPE fits to be an `Error` than `ThreadDeath`! But it is not.\r\n\r\n3. **Check for &#39;No data&#39; only if business logic implies it.**\r\n\r\n        public void updatePersonPhoneNumber(Long personId, String phoneNumber) {\r\n            if (personId == null)\r\n                return;\r\n            DataSource dataSource = appContext.getStuffDataSource();\r\n            Person person = dataSource.getPersonById(personId);\r\n            if (person != null) {\r\n                person.setPhoneNumber(phoneNumber);\r\n                dataSource.updatePerson(person);\r\n            } else {\r\n                Person = new Person(personId);\r\n                person.setPhoneNumber(phoneNumber);\r\n                dataSource.insertPerson(person);\r\n            }\r\n        }\r\n\r\n    and\r\n\r\n        public void updatePersonPhoneNumber(Long personId, String phoneNumber) {\r\n            if (personId == null)\r\n                return;\r\n            DataSource dataSource = appContext.getStuffDataSource();\r\n            Person person = dataSource.getPersonById(personId);\r\n            if (person == null)\r\n                throw new SomeReasonableUserException(&quot;What are you thinking about ???&quot;);\r\n            person.setPhoneNumber(phoneNumber);\r\n            dataSource.updatePerson(person);\r\n        }\r\n\r\n    If appContext or dataSource is not initialized unhandled runtime NullPointerException will kill current thread and will be processed by [Thread.defaultUncaughtExceptionHandler][6] (for you to define and use your favorite logger or other notification mechanizm). If not set, [ThreadGroup#uncaughtException][7] will print stacktrace to system err. One should monitor application error log and open Jira issue for each unhandled exception which in fact is application error. Programmer should fix bug somewhere in initialization stuff.\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Functional_completeness\r\n  [2]: http://en.wikipedia.org/wiki/Who_will_guard_the_guards%3F\r\n  [3]: http://javasourcecode.org/html/open-source/jdk/jdk-6u23/java/lang/Exception.html\r\n  [4]: http://docs.oracle.com/javase/tutorial/essential/exceptions/advantages.html\r\n  [5]: http://www.amazon.co.uk/Code-Complete-Practical-Handbook-Construction/dp/0735619670/ref=dp_ob_title_bk\r\n  [6]: https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.UncaughtExceptionHandler.html\r\n  [7]: https://docs.oracle.com/javase/7/docs/api/java/lang/ThreadGroup.html#uncaughtException(java.lang.Thread,%20java.lang.Throwable)\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>Null is not a 'problem'. It is an integral part of a <a href=\"http://en.wikipedia.org/wiki/Functional_completeness\" rel=\"noreferrer\">complete</a> modeling tool set. Software aims to model the complexity of the world and null bears its burden. <strong>Null indicates 'No data' or 'Unknown'</strong> in Java and the like. So it is appropriate to use nulls for these purposes. I don't prefer the 'Null object' pattern; I think it rise the '<a href=\"http://en.wikipedia.org/wiki/Who_will_guard_the_guards%3F\" rel=\"noreferrer\">who will guard\nthe guardians</a>' problem. <br/>\nIf you ask me what is the name of my girlfriend I'll tell you that I have no girlfriend. In the Java language I'll return null. \nAn alternative would be to throw meaningful exception to indicate some problem that can't be (or don't want to be) solved right there and delegate it somewhere higher in the stack to retry or report data access error to the user.  </p>\n\n<ol>\n<li><p><strong>For an 'unknown question' give 'unknown answer'.</strong> (Be null-safe where this is correct from business point of view) Checking arguments for null once inside a method before usage relieves multiple callers from checking them before a call.</p>\n\n<pre><code>public Photo getPhotoOfThePerson(Person person) {\n    if (person == null)\n        return null;\n    // Grabbing some resources or intensive calculation\n    // using person object anyhow.\n}\n</code></pre>\n\n<p>Previous leads to normal logic flow to get no photo of a non-existent girlfriend from my photo library.</p>\n\n<pre><code>getPhotoOfThePerson(me.getGirlfriend())\n</code></pre>\n\n<p>And it fits with new coming Java API (looking forward)</p>\n\n<pre><code>getPhotoByName(me.getGirlfriend()?.getName())\n</code></pre>\n\n<p>While it is rather 'normal business flow' not to find photo stored into the DB for some person, I used to use pairs like below for some other cases</p>\n\n<pre><code>public static MyEnum parseMyEnum(String value); // throws IllegalArgumentException\npublic static MyEnum parseMyEnumOrNull(String value);\n</code></pre>\n\n<p>And don't loathe to type <code>&lt;alt&gt; + &lt;shift&gt; + &lt;j&gt;</code> (generate javadoc in Eclipse) and write three additional words for you public API. This will be more than enough for all but those who don't read documentation.</p>\n\n<pre><code>/**\n * @return photo or null\n */\n</code></pre>\n\n<p>or</p>\n\n<pre><code>/**\n * @return photo, never null\n */\n</code></pre></li>\n<li><p><strong>This is rather theoretical case and in most cases you should prefer java null safe API (in case it will be released in another 10 years), but <code>NullPointerException</code> is subclass of an <code>Exception</code>.</strong> Thus it is a form of <code>Throwable</code> that indicates conditions that a reasonable application might want to catch (<a href=\"http://javasourcecode.org/html/open-source/jdk/jdk-6u23/java/lang/Exception.html\" rel=\"noreferrer\">javadoc</a>)! To use the first most advantage of exceptions and separate error-handling code from 'regular' code (<a href=\"http://docs.oracle.com/javase/tutorial/essential/exceptions/advantages.html\" rel=\"noreferrer\">according to creators of Java</a>) it is appropriate, as for me, to catch <code>NullPointerException</code>.</p>\n\n<pre><code>public Photo getGirlfriendPhoto() {\n    try {\n        return appContext.getPhotoDataSource().getPhotoByName(me.getGirlfriend().getName());\n    } catch (NullPointerException e) {\n        return null;\n    }\n}\n</code></pre>\n\n<p>Questions could arise:</p>\n\n<p>Q. What if <code>getPhotoDataSource()</code> returns null?<br>\nA. It is up to business logic. If I fail to find a photo album I'll show you no photos. What if appContext is not initialized? This method's business logic puts up with this. If the same logic should be more strict then throwing an exception it is part of the business logic and explicit check for null should be used (case 3). The <strong>new Java Null-safe API fits better here to specify selectively what implies and what does not imply to be initialized</strong> to be fail-fast in case of programmer errors.</p>\n\n<p>Q. Redundant code could be executed and unnecessary resources could be grabbed.<br>\nA. It could take place if <code>getPhotoByName()</code> would try to open a database connection, create <code>PreparedStatement</code> and use the person name as an SQL parameter at last. The approach <em>for an unknown question gives an unknown answer</em> (case 1) works here. Before grabbing resources the method should check parameters and return 'unknown' result if needed.</p>\n\n<p>Q. This approach has a performance penalty due to the try closure opening.<br>\nA. Software should be easy to understand and modify firstly. Only after this, one could think about performance, and only if needed! and where needed! (<a href=\"http://www.amazon.co.uk/Code-Complete-Practical-Handbook-Construction/dp/0735619670/ref=dp_ob_title_bk\" rel=\"noreferrer\">source</a>), and many others).</p>\n\n<p>PS. This approach will be as reasonable to use as the <em>separate error-handling code from \"regular\" code</em> principle is reasonable to use in some place. Consider the next example:</p>\n\n<pre><code>public SomeValue calculateSomeValueUsingSophisticatedLogic(Predicate predicate) {\n    try {\n        Result1 result1 = performSomeCalculation(predicate);\n        Result2 result2 = performSomeOtherCalculation(result1.getSomeProperty());\n        Result3 result3 = performThirdCalculation(result2.getSomeProperty());\n        Result4 result4 = performLastCalculation(result3.getSomeProperty());\n        return result4.getSomeProperty();\n    } catch (NullPointerException e) {\n        return null;\n    }\n}\n\npublic SomeValue calculateSomeValueUsingSophisticatedLogic(Predicate predicate) {\n    SomeValue result = null;\n    if (predicate != null) {\n        Result1 result1 = performSomeCalculation(predicate);\n        if (result1 != null &amp;&amp; result1.getSomeProperty() != null) {\n            Result2 result2 = performSomeOtherCalculation(result1.getSomeProperty());\n            if (result2 != null &amp;&amp; result2.getSomeProperty() != null) {\n                Result3 result3 = performThirdCalculation(result2.getSomeProperty());\n                if (result3 != null &amp;&amp; result3.getSomeProperty() != null) {\n                    Result4 result4 = performLastCalculation(result3.getSomeProperty());\n                    if (result4 != null) {\n                        result = result4.getSomeProperty();\n                    }\n                }\n            }\n        }\n    }\n    return result;\n}\n</code></pre>\n\n<p>PPS. For those fast to downvote (and not so fast to read documentation) I would like to say that I've never caught a null-pointer exception (NPE) in my life. But this possibility was <strong>intentionally designed</strong> by the Java creators because NPE is a subclass of <code>Exception</code>. We have a precedent in Java history when <code>ThreadDeath</code> is an <code>Error</code> not because it is actually an application error, but solely because it was not intended to be caught! How much NPE fits to be an <code>Error</code> than <code>ThreadDeath</code>! But it is not.</p></li>\n<li><p><strong>Check for 'No data' only if business logic implies it.</strong></p>\n\n<pre><code>public void updatePersonPhoneNumber(Long personId, String phoneNumber) {\n    if (personId == null)\n        return;\n    DataSource dataSource = appContext.getStuffDataSource();\n    Person person = dataSource.getPersonById(personId);\n    if (person != null) {\n        person.setPhoneNumber(phoneNumber);\n        dataSource.updatePerson(person);\n    } else {\n        Person = new Person(personId);\n        person.setPhoneNumber(phoneNumber);\n        dataSource.insertPerson(person);\n    }\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>public void updatePersonPhoneNumber(Long personId, String phoneNumber) {\n    if (personId == null)\n        return;\n    DataSource dataSource = appContext.getStuffDataSource();\n    Person person = dataSource.getPersonById(personId);\n    if (person == null)\n        throw new SomeReasonableUserException(\"What are you thinking about ???\");\n    person.setPhoneNumber(phoneNumber);\n    dataSource.updatePerson(person);\n}\n</code></pre>\n\n<p>If appContext or dataSource is not initialized unhandled runtime NullPointerException will kill current thread and will be processed by <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.UncaughtExceptionHandler.html\" rel=\"noreferrer\">Thread.defaultUncaughtExceptionHandler</a> (for you to define and use your favorite logger or other notification mechanizm). If not set, <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/ThreadGroup.html#uncaughtException(java.lang.Thread,%20java.lang.Throwable)\" rel=\"noreferrer\">ThreadGroup#uncaughtException</a> will print stacktrace to system err. One should monitor application error log and open Jira issue for each unhandled exception which in fact is application error. Programmer should fix bug somewhere in initialization stuff.</p></li>\n</ol>\n"},{"comments":[{"owner":{"account_id":1927984,"reputation":357,"user_id":1738007,"display_name":"Tugalsan Karabacak"},"score":0,"creation_date":1685003571,"post_id":9845966,"comment_id":134600951,"body_markdown":"get() is never a good idea to use. You can use:    val = funcThatReturnsOptional().orElse(CUSTOM_ERROR_DIFFERENT_USECASES);  in one line and check the value for different usecases.","body":"get() is never a good idea to use. You can use:    val = funcThatReturnsOptional().orElse(CUSTOM_ERROR_DIFFERENT_USEC&zwnj;&#8203;ASES);  in one line and check the value for different usecases."}],"tags":[],"owner":{"account_id":169876,"reputation":2154,"user_id":396216,"accept_rate":81,"display_name":"Murat Derya &#214;zen"},"comment_count":1,"down_vote_count":1,"up_vote_count":33,"is_accepted":false,"score":32,"last_activity_date":1407445394,"creation_date":1332533799,"answer_id":9845966,"question_id":271526,"body_markdown":"Guava, a very useful core library by Google, has a nice and useful API to avoid nulls. I find [UsingAndAvoidingNullExplained][1] very helpful.\r\n\r\nAs explained in the wiki:\r\n\r\n&gt; `Optional&lt;T&gt;` is a way of replacing a nullable T reference with a\r\n&gt; non-null value. An Optional may either contain a non-null T reference\r\n&gt; (in which case we say the reference is &quot;present&quot;), or it may contain\r\n&gt; nothing (in which case we say the reference is &quot;absent&quot;). It is never\r\n&gt; said to &quot;contain null.&quot;\r\n\r\nUsage:\r\n\r\n    Optional&lt;Integer&gt; possible = Optional.of(5);\r\n    possible.isPresent(); // returns true\r\n    possible.get(); // returns 5\r\n\r\n  [1]: http://code.google.com/p/guava-libraries/wiki/UsingAndAvoidingNullExplained","title":"How do I avoid checking for nulls in Java?","body":"<p>Guava, a very useful core library by Google, has a nice and useful API to avoid nulls. I find <a href=\"http://code.google.com/p/guava-libraries/wiki/UsingAndAvoidingNullExplained\" rel=\"noreferrer\">UsingAndAvoidingNullExplained</a> very helpful.</p>\n\n<p>As explained in the wiki:</p>\n\n<blockquote>\n  <p><code>Optional&lt;T&gt;</code> is a way of replacing a nullable T reference with a\n  non-null value. An Optional may either contain a non-null T reference\n  (in which case we say the reference is \"present\"), or it may contain\n  nothing (in which case we say the reference is \"absent\"). It is never\n  said to \"contain null.\"</p>\n</blockquote>\n\n<p>Usage:</p>\n\n<pre><code>Optional&lt;Integer&gt; possible = Optional.of(5);\npossible.isPresent(); // returns true\npossible.get(); // returns 5\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1095084,"reputation":2277,"user_id":1088846,"accept_rate":100,"display_name":"Jochen"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1484978137,"creation_date":1332534703,"answer_id":9846141,"question_id":271526,"body_markdown":"You can also use the Checker Framework (with JDK 7 and beyond) to statically check for null values. This might solve a lot of problems, but requires running an extra tool that currently only works with OpenJDK AFAIK. https://checkerframework.org/","title":"How do I avoid checking for nulls in Java?","body":"<p>You can also use the Checker Framework (with JDK 7 and beyond) to statically check for null values. This might solve a lot of problems, but requires running an extra tool that currently only works with OpenJDK AFAIK. <a href=\"https://checkerframework.org/\" rel=\"nofollow noreferrer\">https://checkerframework.org/</a></p>\n"},{"comments":[{"owner":{"account_id":1045732,"reputation":11348,"user_id":1050755,"accept_rate":51,"display_name":"user1050755"},"score":1,"creation_date":1362619145,"post_id":11478811,"comment_id":21526376,"body_markdown":"Agreed, albeit only conceptually. Yeah, one should HAVE A PLAN. But then you need programmers who CAN MAKE PLANS and have the ability to think logically and develop and maintain consistent patterns. And then there are employers whose main focus is money and wages ;-). And then start having a look at the JPA spec to get an impression of what constitutes a consistent pattern/plan and what it requires to develop and/or document it.","body":"Agreed, albeit only conceptually. Yeah, one should HAVE A PLAN. But then you need programmers who CAN MAKE PLANS and have the ability to think logically and develop and maintain consistent patterns. And then there are employers whose main focus is money and wages ;-). And then start having a look at the JPA spec to get an impression of what constitutes a consistent pattern/plan and what it requires to develop and/or document it."},{"owner":{"account_id":40221,"reputation":32100,"user_id":116509,"accept_rate":100,"display_name":"artbristol"},"score":3,"creation_date":1379178534,"post_id":11478811,"comment_id":27731830,"body_markdown":"This answer is relevant for C++ but not for a garbage collected language like Java.","body":"This answer is relevant for C++ but not for a garbage collected language like Java."},{"owner":{"account_id":1009228,"reputation":496,"user_id":1022180,"display_name":"Alex Vaz"},"score":0,"creation_date":1379997845,"post_id":11478811,"comment_id":28024110,"body_markdown":"I respectfully disagree. Good memory handling in JAVA ( or almost any other language) will give you many benefits. From better stability as nullpointers reduced, better performance as lower memory footprint, to better design as relationships are better controlled. \nI will suggest that the sloppy memory management of many JAVA applications leds to frequent NPEs and memory leaks.","body":"I respectfully disagree. Good memory handling in JAVA ( or almost any other language) will give you many benefits. From better stability as nullpointers reduced, better performance as lower memory footprint, to better design as relationships are better controlled.  I will suggest that the sloppy memory management of many JAVA applications leds to frequent NPEs and memory leaks."},{"owner":{"account_id":150501,"reputation":78480,"user_id":363751,"accept_rate":35,"display_name":"supercat"},"score":0,"creation_date":1383590216,"post_id":11478811,"comment_id":29391088,"body_markdown":"I most emphatically agree with what you wrote, and think it very unfortunate that Java makes no distinction between references that encapsulate ownership and those which do not.  Those who would argue &quot;that&#39;s what GC is for&quot; miss a critical point: GC avoids the need for *immutable* objects to have owners, and it also *eliminates* the possibility of a dangling reference to a deleted object turning into a reference to some other arbitrary object (as can happen in C++).  It&#39;s hard to write correct code, however, if more than one object encapsulates a mutable object&#39;s state as part of its own.","body":"I most emphatically agree with what you wrote, and think it very unfortunate that Java makes no distinction between references that encapsulate ownership and those which do not.  Those who would argue &quot;that&#39;s what GC is for&quot; miss a critical point: GC avoids the need for <i>immutable</i> objects to have owners, and it also <i>eliminates</i> the possibility of a dangling reference to a deleted object turning into a reference to some other arbitrary object (as can happen in C++).  It&#39;s hard to write correct code, however, if more than one object encapsulates a mutable object&#39;s state as part of its own."},{"owner":{"account_id":150501,"reputation":78480,"user_id":363751,"accept_rate":35,"display_name":"supercat"},"score":0,"creation_date":1383590327,"post_id":11478811,"comment_id":29391152,"body_markdown":"My preferred way of thinking of things is to say that references can encapsulate identity, mutable state, both, or neither.  Additionally, references can encapsulate mutable state either because they identify an immutable object, or because the object they identify will never be exposed to anything that might mutate it.  It&#39;s too bad Java has no concept of such distinctions, since things like equality checking and cloning could be handled 99% automatically if it did.","body":"My preferred way of thinking of things is to say that references can encapsulate identity, mutable state, both, or neither.  Additionally, references can encapsulate mutable state either because they identify an immutable object, or because the object they identify will never be exposed to anything that might mutate it.  It&#39;s too bad Java has no concept of such distinctions, since things like equality checking and cloning could be handled 99% automatically if it did."},{"owner":{"account_id":69686,"reputation":1060,"user_id":202630,"accept_rate":83,"display_name":"Kemal Erdogan"},"score":0,"creation_date":1410879108,"post_id":11478811,"comment_id":40486292,"body_markdown":"I believe what you suggest will only address a small subset of null pointer problems in Java, and will not solve the original problem described here.","body":"I believe what you suggest will only address a small subset of null pointer problems in Java, and will not solve the original problem described here."},{"owner":{"account_id":1009228,"reputation":496,"user_id":1022180,"display_name":"Alex Vaz"},"score":0,"creation_date":1425595541,"post_id":11478811,"comment_id":46039499,"body_markdown":"It might be more relevant than you think. More info: http://www.ibm.com/developerworks/library/j-jtp06243/   :)","body":"It might be more relevant than you think. More info: <a href=\"http://www.ibm.com/developerworks/library/j-jtp06243/\" rel=\"nofollow noreferrer\">ibm.com/developerworks/library/j-jtp06243</a>   :)"}],"tags":[],"owner":{"account_id":1009228,"reputation":496,"user_id":1022180,"display_name":"Alex Vaz"},"comment_count":7,"down_vote_count":4,"up_vote_count":7,"is_accepted":false,"score":3,"last_activity_date":1436268943,"creation_date":1342215976,"answer_id":11478811,"question_id":271526,"body_markdown":"OK, I now this has been technically answered a million times but I have to say this because this is an un-ending discussion with Java programmers.\r\n\r\nSorry but I disagree will almost all of above. The reason we have to be testing for null in Java is because must Java programmers don’t know how to handle memory. \r\n\r\nI say this because I have a long experience programming in C++ and we don’t do this. In other words, you don’t need to. And note that, in Java, if you hit a dangling pointer you get a normal exception; in C++ this exception normally is not caught and terminates the program.\r\n\r\nDon’t want to do this? Then follow some simple rules ala C/C++.\r\n\r\nDon’t instantiate things so easily, _think_ that every &quot;new&quot; can get you in lots of trouble and FOLLOW these simple rules.\r\n\r\nA class shall access memory in only 3 ways -&gt;\r\n\r\n1.  It can &quot;HAVE&quot; class members, and they will follow these rules:\r\n\r\n 1. ALL &quot;HAS&quot; members are created &quot;new&quot; in the constructor.\r\n 2. You will close /de allocate in destructor or equivalent close()\r\n    function in Java for that same class and in NO other.\r\n\r\nThis means that you need to have in mind (just like Java does) who is the owner or parent of each resource and respect that ownership.  An object is only deleted by the class who created it. Also -&gt;\r\n\r\n2. Some members will be &quot;USED&quot; but not own or &quot;HAVE&quot;. This are &quot;OWN&quot; in another class and passed as arguments to the constructor. Since these are owned by another class, we will NEVER delete or close this, only the parent can.\r\n\r\n3. A method in a class can also  instantiate local objects for internal use which will NEVER pass out side of the class, or they should have been normal &quot;has&quot; objects.\r\n\r\nFinally for all this to work, you need to have a disciplined design with classes in hierarchy form and making no cycles.\r\n\r\nUnder this design, AND following the above rules, there is no way that a child class in a hierarchy design will ever access a pointer which was destroyed, because that means that a parent was destroyed before a child, which the hierarchical acyclic design will not allow it.\r\n\r\nFinally, also remember when starting your system you should build from top to bottom of the hierarchy and destroy bottom to top. You will never have a null pointer anywhere, or someone is violating the rules.","title":"How do I avoid checking for nulls in Java?","body":"<p>OK, I now this has been technically answered a million times but I have to say this because this is an un-ending discussion with Java programmers.</p>\n\n<p>Sorry but I disagree will almost all of above. The reason we have to be testing for null in Java is because must Java programmers don’t know how to handle memory. </p>\n\n<p>I say this because I have a long experience programming in C++ and we don’t do this. In other words, you don’t need to. And note that, in Java, if you hit a dangling pointer you get a normal exception; in C++ this exception normally is not caught and terminates the program.</p>\n\n<p>Don’t want to do this? Then follow some simple rules ala C/C++.</p>\n\n<p>Don’t instantiate things so easily, <em>think</em> that every \"new\" can get you in lots of trouble and FOLLOW these simple rules.</p>\n\n<p>A class shall access memory in only 3 ways -></p>\n\n<ol>\n<li><p>It can \"HAVE\" class members, and they will follow these rules:</p>\n\n<ol>\n<li>ALL \"HAS\" members are created \"new\" in the constructor.</li>\n<li>You will close /de allocate in destructor or equivalent close()\nfunction in Java for that same class and in NO other.</li>\n</ol></li>\n</ol>\n\n<p>This means that you need to have in mind (just like Java does) who is the owner or parent of each resource and respect that ownership.  An object is only deleted by the class who created it. Also -></p>\n\n<ol start=\"2\">\n<li><p>Some members will be \"USED\" but not own or \"HAVE\". This are \"OWN\" in another class and passed as arguments to the constructor. Since these are owned by another class, we will NEVER delete or close this, only the parent can.</p></li>\n<li><p>A method in a class can also  instantiate local objects for internal use which will NEVER pass out side of the class, or they should have been normal \"has\" objects.</p></li>\n</ol>\n\n<p>Finally for all this to work, you need to have a disciplined design with classes in hierarchy form and making no cycles.</p>\n\n<p>Under this design, AND following the above rules, there is no way that a child class in a hierarchy design will ever access a pointer which was destroyed, because that means that a parent was destroyed before a child, which the hierarchical acyclic design will not allow it.</p>\n\n<p>Finally, also remember when starting your system you should build from top to bottom of the hierarchy and destroy bottom to top. You will never have a null pointer anywhere, or someone is violating the rules.</p>\n"},{"comments":[{"owner":{"account_id":1045732,"reputation":11348,"user_id":1050755,"accept_rate":51,"display_name":"user1050755"},"score":9,"creation_date":1362619284,"post_id":11896966,"comment_id":21526406,"body_markdown":"Actually, your example constitutes code bloat: the first line is superfluous because the NPE would be thrown in the second line. ;-)","body":"Actually, your example constitutes code bloat: the first line is superfluous because the NPE would be thrown in the second line. ;-)"},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":1,"creation_date":1362633783,"post_id":11896966,"comment_id":21530189,"body_markdown":"True. A better example would be if the second line were `doCalc(someObject)`.","body":"True. A better example would be if the second line were <code>doCalc(someObject)</code>."},{"owner":{"account_id":1045732,"reputation":11348,"user_id":1050755,"accept_rate":51,"display_name":"user1050755"},"score":0,"creation_date":1362640038,"post_id":11896966,"comment_id":21532407,"body_markdown":"Depends. If you are the author of doCalc(), I&#39;d suggest putting the check into that method&#39;s body (if possible). And then you most likely will call someObject.someMethod() where again there is no need to check for null. :-)","body":"Depends. If you are the author of doCalc(), I&#39;d suggest putting the check into that method&#39;s body (if possible). And then you most likely will call someObject.someMethod() where again there is no need to check for null. :-)"},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":0,"creation_date":1362811431,"post_id":11896966,"comment_id":21608270,"body_markdown":"Well, if you are not the author of `doCalc()`, and it doesn&#39;t immediately throw NPE when given null, you&#39;d need to check for null and throw NPE yourself. That&#39;s what `Objects.requireNonNull()` is for.","body":"Well, if you are not the author of <code>doCalc()</code>, and it doesn&#39;t immediately throw NPE when given null, you&#39;d need to check for null and throw NPE yourself. That&#39;s what <code>Objects.requireNonNull()</code> is for."},{"owner":{"account_id":24366,"reputation":7247,"user_id":61938,"accept_rate":71,"display_name":"Rob Grant"},"score":7,"creation_date":1380195206,"post_id":11896966,"comment_id":28114498,"body_markdown":"It&#39;s not just code bloat. Better to check up front than halfway through a method that causes side effects or uses time/space.","body":"It&#39;s not just code bloat. Better to check up front than halfway through a method that causes side effects or uses time/space."},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":0,"creation_date":1406138107,"post_id":11896966,"comment_id":38715467,"body_markdown":"I probably wouldn&#39;t have thrown an NPE, when I&#39;m argument checking for nulls I usually throw an IllegalArgumentException, and it&#39;s not a bad thing to do at the very top, if you assume this.child = child will &quot;catch&quot; it, you aren&#39;t being explicit in your code, a refactor could make it really tough to catch where the null originated.  Code bloat is much better than magic, any day.","body":"I probably wouldn&#39;t have thrown an NPE, when I&#39;m argument checking for nulls I usually throw an IllegalArgumentException, and it&#39;s not a bad thing to do at the very top, if you assume this.child = child will &quot;catch&quot; it, you aren&#39;t being explicit in your code, a refactor could make it really tough to catch where the null originated.  Code bloat is much better than magic, any day."},{"owner":{"account_id":83658,"reputation":1362,"user_id":234391,"accept_rate":57,"display_name":"Cornel Masson"},"score":0,"creation_date":1412867111,"post_id":11896966,"comment_id":41235320,"body_markdown":"The `Objects.requireNonNull(object, string)` version (where you can pass an error message as 2nd argument) is more useful than the single-arg version (the latter probably just added for the sake of completeness), especially when you&#39;re using it to check multiple argument values. Say you had to check 3 arguments for null, this would reduce your code from 3 if/then-throw blocks (separated by empty lines), to 3 single lines not needing empty lines.","body":"The <code>Objects.requireNonNull(object, string)</code> version (where you can pass an error message as 2nd argument) is more useful than the single-arg version (the latter probably just added for the sake of completeness), especially when you&#39;re using it to check multiple argument values. Say you had to check 3 arguments for null, this would reduce your code from 3 if/then-throw blocks (separated by empty lines), to 3 single lines not needing empty lines."}],"tags":[],"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"comment_count":7,"down_vote_count":0,"up_vote_count":72,"is_accepted":false,"score":72,"last_activity_date":1398345780,"creation_date":1344582480,"answer_id":11896966,"question_id":271526,"body_markdown":"Java 7 has a new `java.util.Objects` utility class on which there is a `requireNonNull()` method. All this does is throw a `NullPointerException` if its argument is null, but it cleans up the code a bit. Example:\r\n\r\n    Objects.requireNonNull(someObject);\r\n    someObject.doCalc();\r\n\r\n---\r\nThe method is most useful for [checking][1] just before an assignment in a constructor, where each use of it can save three lines of code:\r\n\r\n    Parent(Child child) {\r\n       if (child == null) {\r\n          throw new NullPointerException(&quot;child&quot;);\r\n       }\r\n       this.child = child;\r\n    }\r\n\r\nbecomes\r\n\r\n    Parent(Child child) {\r\n       this.child = Objects.requireNonNull(child, &quot;child&quot;);\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/3322638/is-it-okay-to-throw-nullpointerexception-programatically","title":"How do I avoid checking for nulls in Java?","body":"<p>Java 7 has a new <code>java.util.Objects</code> utility class on which there is a <code>requireNonNull()</code> method. All this does is throw a <code>NullPointerException</code> if its argument is null, but it cleans up the code a bit. Example:</p>\n\n<pre><code>Objects.requireNonNull(someObject);\nsomeObject.doCalc();\n</code></pre>\n\n<hr>\n\n<p>The method is most useful for <a href=\"https://stackoverflow.com/questions/3322638/is-it-okay-to-throw-nullpointerexception-programatically\">checking</a> just before an assignment in a constructor, where each use of it can save three lines of code:</p>\n\n<pre><code>Parent(Child child) {\n   if (child == null) {\n      throw new NullPointerException(\"child\");\n   }\n   this.child = child;\n}\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>Parent(Child child) {\n   this.child = Objects.requireNonNull(child, \"child\");\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1482558,"reputation":2029,"user_id":1391568,"display_name":"drzymala"},"comment_count":0,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1347461641,"creation_date":1347461641,"answer_id":12390983,"question_id":271526,"body_markdown":"I prefer this\r\n\r\n    public void simpleFunc(SomeObject someObject){\r\n        someObject = someObject != null ? someObject : new SomeObject(null);\r\n        someObject.doSomething();\r\n    }\r\n\r\nOf course in my example SomeObject handles gracefully a null parameter. For example logging such event and doing nothing more.","title":"How do I avoid checking for nulls in Java?","body":"<p>I prefer this</p>\n\n<pre><code>public void simpleFunc(SomeObject someObject){\n    someObject = someObject != null ? someObject : new SomeObject(null);\n    someObject.doSomething();\n}\n</code></pre>\n\n<p>Of course in my example SomeObject handles gracefully a null parameter. For example logging such event and doing nothing more.</p>\n"},{"comments":[{"owner":{"account_id":1416578,"reputation":1743,"user_id":1342121,"display_name":"ianpojman"},"score":0,"creation_date":1351719077,"post_id":12946734,"comment_id":17917404,"body_markdown":"why would this be downvoted? in my experience, this is far superior to the other approaches, would love to know why not","body":"why would this be downvoted? in my experience, this is far superior to the other approaches, would love to know why not"},{"owner":{"account_id":1292950,"reputation":1261,"user_id":1244676,"display_name":"ChrisBlom"},"score":0,"creation_date":1374922122,"post_id":12946734,"comment_id":26139774,"body_markdown":"I agree, this approach prevents problems related to nulls, rather than fixing them by speckling code null checks everywhere.","body":"I agree, this approach prevents problems related to nulls, rather than fixing them by speckling code null checks everywhere."},{"owner":{"account_id":12404,"reputation":62016,"user_id":24396,"accept_rate":74,"display_name":"Steve Kuo"},"score":9,"creation_date":1387263749,"post_id":12946734,"comment_id":30874026,"body_markdown":"The problem with this approach is that if name is never set, it has the value &quot;&lt;unknown&gt;&quot;, which behaves like a set value. Now let&#39;s say I need to check if name was never set (unknown), I have to do a string comparison against the special value &quot;&lt;unknown&gt;&quot;.","body":"The problem with this approach is that if name is never set, it has the value &quot;&lt;unknown&gt;&quot;, which behaves like a set value. Now let&#39;s say I need to check if name was never set (unknown), I have to do a string comparison against the special value &quot;&lt;unknown&gt;&quot;."},{"owner":{"account_id":1416578,"reputation":1743,"user_id":1342121,"display_name":"ianpojman"},"score":1,"creation_date":1422301550,"post_id":12946734,"comment_id":44686309,"body_markdown":"True good point Steve. What I often do is have that value as a constant, e.g. public static final String UNSET=&quot;__unset&quot; ... private String field = UNSET ...   then   private boolean isSet() { return UNSET.equals(field); }","body":"True good point Steve. What I often do is have that value as a constant, e.g. public static final String UNSET=&quot;__unset&quot; ... private String field = UNSET ...   then   private boolean isSet() { return UNSET.equals(field); }"},{"owner":{"account_id":2794245,"reputation":579,"user_id":2403791,"display_name":"TomasMolina"},"score":0,"creation_date":1512849361,"post_id":12946734,"comment_id":82425650,"body_markdown":"IMHO, This is a implementation of Null Object Pattern with a yourself implementation  of Optional (Contract). How it behaves on persistence class class? I do not see applicable in that case.","body":"IMHO, This is a implementation of Null Object Pattern with a yourself implementation  of Optional (Contract). How it behaves on persistence class class? I do not see applicable in that case."}],"tags":[],"owner":{"account_id":1416578,"reputation":1743,"user_id":1342121,"display_name":"ianpojman"},"comment_count":5,"down_vote_count":1,"up_vote_count":38,"is_accepted":false,"score":37,"last_activity_date":1442691758,"creation_date":1350531756,"answer_id":12946734,"question_id":271526,"body_markdown":"Just don&#39;t ever use null. Don&#39;t allow it.\r\n\r\nIn my classes, most fields and local variables have non-null default values, and I add contract statements (always-on asserts) everywhere in the code to make sure this is being enforced (since it&#39;s more succinct, and more expressive than letting it come up as an NPE and then having to resolve the line number, etc.).\r\n\r\nOnce I adopted this practice, I noticed that the problems seemed to fix themselves. You&#39;d catch things much earlier in the development process just by accident and realize you had a weak spot..  and more importantly.. it helps encapsulate different modules&#39; concerns, different modules can &#39;trust&#39; each other, and no more littering the code with `if = null else` constructs!\r\n\r\nThis is defensive programming and results in much cleaner code in the long run. Always sanitize the data, e.g. here by enforcing rigid standards, and the problems go away.\r\n\r\n    class C {\r\n        private final MyType mustBeSet;\r\n        public C(MyType mything) {\r\n           mustBeSet=Contract.notNull(mything);\r\n        }\r\n       private String name = &quot;&lt;unknown&gt;&quot;;\r\n       public void setName(String s) {\r\n          name = Contract.notNull(s);\r\n       }\r\n    }\r\n\r\n\r\n    class Contract {\r\n        public static &lt;T&gt; T notNull(T t) { if (t == null) { throw new ContractException(&quot;argument must be non-null&quot;); return t; }\r\n    }\r\n\r\nThe contracts are like mini-unit tests which are always running, even in production, and when things fail, you know why, rather than a random NPE you have to somehow figure out.\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>Just don't ever use null. Don't allow it.</p>\n\n<p>In my classes, most fields and local variables have non-null default values, and I add contract statements (always-on asserts) everywhere in the code to make sure this is being enforced (since it's more succinct, and more expressive than letting it come up as an NPE and then having to resolve the line number, etc.).</p>\n\n<p>Once I adopted this practice, I noticed that the problems seemed to fix themselves. You'd catch things much earlier in the development process just by accident and realize you had a weak spot..  and more importantly.. it helps encapsulate different modules' concerns, different modules can 'trust' each other, and no more littering the code with <code>if = null else</code> constructs!</p>\n\n<p>This is defensive programming and results in much cleaner code in the long run. Always sanitize the data, e.g. here by enforcing rigid standards, and the problems go away.</p>\n\n<pre><code>class C {\n    private final MyType mustBeSet;\n    public C(MyType mything) {\n       mustBeSet=Contract.notNull(mything);\n    }\n   private String name = \"&lt;unknown&gt;\";\n   public void setName(String s) {\n      name = Contract.notNull(s);\n   }\n}\n\n\nclass Contract {\n    public static &lt;T&gt; T notNull(T t) { if (t == null) { throw new ContractException(\"argument must be non-null\"); return t; }\n}\n</code></pre>\n\n<p>The contracts are like mini-unit tests which are always running, even in production, and when things fail, you know why, rather than a random NPE you have to somehow figure out.</p>\n"},{"comments":[{"owner":{"account_id":2794245,"reputation":579,"user_id":2403791,"display_name":"TomasMolina"},"score":0,"creation_date":1512852899,"post_id":13676682,"comment_id":82426731,"body_markdown":"are you proposing intercept each method of entire app?","body":"are you proposing intercept each method of entire app?"}],"tags":[],"owner":{"account_id":1705684,"reputation":7431,"user_id":1564766,"accept_rate":15,"display_name":"abishkar bhattarai"},"comment_count":1,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1442691992,"creation_date":1354504523,"answer_id":13676682,"question_id":271526,"body_markdown":"You can use an interceptor before the method call. That is what [aspect-oriented programming][1] focus on.\r\n\r\nSuppose M1(Object test) is a method and M2 is a method where we apply an aspect before a method call, `M2(Object test2)`. If `test2 != null` then call M1, otherwise do another thing. It works for all methods with whom you want to apply an aspect for. If you want to apply an aspect for an instance field and constructor you can use [AspectJ][2]. [Spring][3] can also be the best choice for a method aspect.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Aspect-oriented_programming\r\n  [2]: https://en.wikipedia.org/wiki/AspectJ\r\n  [3]: http://en.wikipedia.org/wiki/Spring_Framework\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>You can use an interceptor before the method call. That is what <a href=\"https://en.wikipedia.org/wiki/Aspect-oriented_programming\" rel=\"nofollow\">aspect-oriented programming</a> focus on.</p>\n\n<p>Suppose M1(Object test) is a method and M2 is a method where we apply an aspect before a method call, <code>M2(Object test2)</code>. If <code>test2 != null</code> then call M1, otherwise do another thing. It works for all methods with whom you want to apply an aspect for. If you want to apply an aspect for an instance field and constructor you can use <a href=\"https://en.wikipedia.org/wiki/AspectJ\" rel=\"nofollow\">AspectJ</a>. <a href=\"http://en.wikipedia.org/wiki/Spring_Framework\" rel=\"nofollow\">Spring</a> can also be the best choice for a method aspect.</p>\n"},{"tags":[],"owner":{"account_id":73930,"reputation":2183,"user_id":212665,"accept_rate":100,"display_name":"Vinay Lodha"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1442692143,"creation_date":1357803959,"answer_id":14253016,"question_id":271526,"body_markdown":"First of all, we can&#39;t really remove all null conditions. We can reduce them using `@NotNull` and `@Nullable` annotations (**as mentioned already**). But this needs to be backed by some framework. This is where [OVal][1] can help.\r\n\r\nThe basic idea is object/parameters/constructor should always satisfy preconditions. You can have a whole lot of preconditions such as `Nullable`, `NotNull` and OVal would take care that an object should be in a consistent state when invoked.\r\n\r\nI guess OVal internally uses AspectJ to validate the preconditions.\r\n\r\n    @Guarded\r\n    public class BusinessObject\r\n    {\r\n      public BusinessObject(@NotNull String name)\r\n      {\r\n        this.name = name;\r\n      }\r\n\r\n      ...\r\n    }\r\n\r\nFor example,\r\n\r\n    // Throws a ConstraintsViolatedException because parameter name is null\r\n    BusinessObject bo = new BusinessObject(null);\r\n\r\n  [1]: http://oval.sourceforge.net\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>First of all, we can't really remove all null conditions. We can reduce them using <code>@NotNull</code> and <code>@Nullable</code> annotations (<strong>as mentioned already</strong>). But this needs to be backed by some framework. This is where <a href=\"http://oval.sourceforge.net\" rel=\"nofollow\">OVal</a> can help.</p>\n\n<p>The basic idea is object/parameters/constructor should always satisfy preconditions. You can have a whole lot of preconditions such as <code>Nullable</code>, <code>NotNull</code> and OVal would take care that an object should be in a consistent state when invoked.</p>\n\n<p>I guess OVal internally uses AspectJ to validate the preconditions.</p>\n\n<pre><code>@Guarded\npublic class BusinessObject\n{\n  public BusinessObject(@NotNull String name)\n  {\n    this.name = name;\n  }\n\n  ...\n}\n</code></pre>\n\n<p>For example,</p>\n\n<pre><code>// Throws a ConstraintsViolatedException because parameter name is null\nBusinessObject bo = new BusinessObject(null);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":376673,"reputation":301,"user_id":728283,"display_name":"Bradley Gottfried"},"score":12,"creation_date":1369675826,"post_id":16218718,"comment_id":24174736,"body_markdown":"Google&#39;s guava has an optional implimention for Java 6+.","body":"Google&#39;s guava has an optional implimention for Java 6+."},{"owner":{"account_id":83658,"reputation":1362,"user_id":234391,"accept_rate":57,"display_name":"Cornel Masson"},"score":19,"creation_date":1412866629,"post_id":16218718,"comment_id":41234970,"body_markdown":"It&#39;s *very* important to emphasise that using Optional only with ifPresent() does *not* add much value above normal null checking. It&#39;s core value is that it is a monad that can be used in function chains of map/flapMap, which achieves results similar to the Elvis operator in Groovy mentioned elsewhere. Even without this usage, though, I find the orElse/orElseThrow syntax also very useful.","body":"It&#39;s <i>very</i> important to emphasise that using Optional only with ifPresent() does <i>not</i> add much value above normal null checking. It&#39;s core value is that it is a monad that can be used in function chains of map/flapMap, which achieves results similar to the Elvis operator in Groovy mentioned elsewhere. Even without this usage, though, I find the orElse/orElseThrow syntax also very useful."},{"owner":{"account_id":1938618,"reputation":698,"user_id":1745416,"display_name":"JohnC"},"score":0,"creation_date":1449619553,"post_id":16218718,"comment_id":56084324,"body_markdown":"This blog has a good entry on Optional http://winterbe.com/posts/2015/03/15/avoid-null-checks-in-java/","body":"This blog has a good entry on Optional <a href=\"http://winterbe.com/posts/2015/03/15/avoid-null-checks-in-java/\" rel=\"nofollow noreferrer\">winterbe.com/posts/2015/03/15/avoid-null-checks-in-java</a>"},{"owner":{"account_id":201558,"reputation":20199,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"score":0,"creation_date":1519423820,"post_id":16218718,"comment_id":84920786,"body_markdown":"I really never understood why people are so happy with this boilerplate code https://dzone.com/articles/java-8-elvis-operator","body":"I really never understood why people are so happy with this boilerplate code <a href=\"https://dzone.com/articles/java-8-elvis-operator\" rel=\"nofollow noreferrer\">dzone.com/articles/java-8-elvis-operator</a>"},{"owner":{"account_id":5160541,"reputation":357,"user_id":5332993,"accept_rate":40,"display_name":"Satyendra Kumar"},"score":6,"creation_date":1520435199,"post_id":16218718,"comment_id":85314626,"body_markdown":"Why people have tendency to do this `if(optional.isPresent()){ optional.get(); }` instead of `optional.ifPresent(o -&gt; { ...})`","body":"Why people have tendency to do this <code>if(optional.isPresent()){ optional.get(); }</code> instead of <code>optional.ifPresent(o -&gt; { ...})</code>"},{"owner":{"account_id":1230575,"reputation":16783,"user_id":1195273,"accept_rate":81,"display_name":"crush"},"score":1,"creation_date":1533836342,"post_id":16218718,"comment_id":90504695,"body_markdown":"So, other than the API contractual hints, it&#39;s really just about catering to functional programmers who enjoy chaining methods endlessly.","body":"So, other than the API contractual hints, it&#39;s really just about catering to functional programmers who enjoy chaining methods endlessly."},{"owner":{"account_id":2338104,"reputation":9101,"user_id":2049986,"accept_rate":89,"display_name":"Jacob van Lingen"},"score":0,"creation_date":1618466962,"post_id":16218718,"comment_id":118610603,"body_markdown":"I know this post is old, but above example is a wrong use of Java 8&#39;s features imho. Do not combine imperative code with optionals like that. When having a fruit list + a name to search for, use the Streaming API: `fruits.stream().filter(f -&gt; name.equals(f.getName()).findFirst().map(Fruit::getName).orElse(&quot;empty-name&quot;);`.","body":"I know this post is old, but above example is a wrong use of Java 8&#39;s features imho. Do not combine imperative code with optionals like that. When having a fruit list + a name to search for, use the Streaming API: <code>fruits.stream().filter(f -&gt; name.equals(f.getName()).findFirst().map(Fruit::getName).orE&zwnj;&#8203;lse(&quot;empty-name&quot;);</code>."}],"tags":[],"owner":{"account_id":122100,"reputation":16858,"user_id":315677,"accept_rate":81,"display_name":"Pierre Henry"},"comment_count":7,"down_vote_count":0,"up_vote_count":185,"is_accepted":false,"score":185,"last_activity_date":1475134744,"creation_date":1366903370,"answer_id":16218718,"question_id":271526,"body_markdown":"With Java 8 comes the new `java.util.Optional` class that arguably solves some of the problem. One can at least say that it improves the readability of the code, and in the case of public APIs make the API&#39;s contract clearer to the client developer.\r\n\r\nThey work like that:\r\n\r\nAn optional object for a given type (`Fruit`) is created as the return type of a method. It can be empty or contain a `Fruit` object:\r\n\r\n    public static Optional&lt;Fruit&gt; find(String name, List&lt;Fruit&gt; fruits) {\r\n       for (Fruit fruit : fruits) {\r\n          if (fruit.getName().equals(name)) {\r\n             return Optional.of(fruit);\r\n          }\r\n       }\r\n       return Optional.empty();\r\n    }\r\n\r\nNow look at this code where we search a list of `Fruit` (`fruits`) for a given Fruit instance:\r\n\r\n    Optional&lt;Fruit&gt; found = find(&quot;lemon&quot;, fruits);\r\n    if (found.isPresent()) {\r\n       Fruit fruit = found.get();\r\n       String name = fruit.getName();\r\n    }\r\n\r\nYou can use the `map()` operator to perform a computation on--or extract a value from--an optional object.  `orElse()` lets you provide a fallback for missing values.\r\n    \r\n    String nameOrNull = find(&quot;lemon&quot;, fruits)\r\n        .map(f -&gt; f.getName())\r\n        .orElse(&quot;empty-name&quot;);\r\n\r\nOf course, the check for null/empty value is still necessary, but at least the developer is conscious that the value might be empty and the risk of forgetting to check is limited.\r\n\r\nIn an API built from scratch using `Optional` whenever a return value might be empty, and returning a plain object only when it cannot be `null` (convention), the client code might abandon null checks on simple object return values...\r\n\r\nOf course `Optional` could also be used as a method argument, perhaps a better way to indicate optional arguments than 5 or 10 overloading methods in some cases.\r\n\r\n`Optional` offers other convenient methods, such as `orElse` that allow the use of a default value, and `ifPresent` that works with [lambda expressions][1].\r\n\r\nI invite you to read this article (my main source for writing this answer) in which the `NullPointerException` (and in general null pointer) problematic as well as the (partial) solution brought by `Optional` are well explained: *[Java Optional Objects][2]*.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Anonymous_function\r\n  [2]: http://java.dzone.com/articles/java-optional-objects\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>With Java 8 comes the new <code>java.util.Optional</code> class that arguably solves some of the problem. One can at least say that it improves the readability of the code, and in the case of public APIs make the API's contract clearer to the client developer.</p>\n\n<p>They work like that:</p>\n\n<p>An optional object for a given type (<code>Fruit</code>) is created as the return type of a method. It can be empty or contain a <code>Fruit</code> object:</p>\n\n<pre><code>public static Optional&lt;Fruit&gt; find(String name, List&lt;Fruit&gt; fruits) {\n   for (Fruit fruit : fruits) {\n      if (fruit.getName().equals(name)) {\n         return Optional.of(fruit);\n      }\n   }\n   return Optional.empty();\n}\n</code></pre>\n\n<p>Now look at this code where we search a list of <code>Fruit</code> (<code>fruits</code>) for a given Fruit instance:</p>\n\n<pre><code>Optional&lt;Fruit&gt; found = find(\"lemon\", fruits);\nif (found.isPresent()) {\n   Fruit fruit = found.get();\n   String name = fruit.getName();\n}\n</code></pre>\n\n<p>You can use the <code>map()</code> operator to perform a computation on--or extract a value from--an optional object.  <code>orElse()</code> lets you provide a fallback for missing values.</p>\n\n<pre><code>String nameOrNull = find(\"lemon\", fruits)\n    .map(f -&gt; f.getName())\n    .orElse(\"empty-name\");\n</code></pre>\n\n<p>Of course, the check for null/empty value is still necessary, but at least the developer is conscious that the value might be empty and the risk of forgetting to check is limited.</p>\n\n<p>In an API built from scratch using <code>Optional</code> whenever a return value might be empty, and returning a plain object only when it cannot be <code>null</code> (convention), the client code might abandon null checks on simple object return values...</p>\n\n<p>Of course <code>Optional</code> could also be used as a method argument, perhaps a better way to indicate optional arguments than 5 or 10 overloading methods in some cases.</p>\n\n<p><code>Optional</code> offers other convenient methods, such as <code>orElse</code> that allow the use of a default value, and <code>ifPresent</code> that works with <a href=\"https://en.wikipedia.org/wiki/Anonymous_function\" rel=\"noreferrer\">lambda expressions</a>.</p>\n\n<p>I invite you to read this article (my main source for writing this answer) in which the <code>NullPointerException</code> (and in general null pointer) problematic as well as the (partial) solution brought by <code>Optional</code> are well explained: <em><a href=\"http://java.dzone.com/articles/java-optional-objects\" rel=\"noreferrer\">Java Optional Objects</a></em>.</p>\n"},{"comments":[{"owner":{"account_id":903620,"reputation":10663,"user_id":939063,"accept_rate":100,"display_name":"Terence"},"score":0,"creation_date":1372664734,"post_id":17109182,"comment_id":25263554,"body_markdown":"http://stackoverflow.com/questions/1386275/why-is-java-vector-class-considered-obsolete-or-deprecated","body":"<a href=\"http://stackoverflow.com/questions/1386275/why-is-java-vector-class-considered-obsolete-or-deprecated\" title=\"why is java vector class considered obsolete or deprecated\">stackoverflow.com/questions/1386275/&hellip;</a>"},{"owner":{"account_id":308177,"reputation":1911,"user_id":619895,"accept_rate":85,"display_name":"ggb667"},"score":3,"creation_date":1379947962,"post_id":17109182,"comment_id":28005501,"body_markdown":"+1  This I agree with. You should never return half initialized objects. Jaxb related code and bean code is notiroius for this. It is bad practice. All collections should be initialized, and all objects should exist with (ideally) no null references.  Consider a object that has a collection in it.  Checking that the object is not null, that the collection is not null and that the collection does not contain null objects is unreasonable and foolish.","body":"+1  This I agree with. You should never return half initialized objects. Jaxb related code and bean code is notiroius for this. It is bad practice. All collections should be initialized, and all objects should exist with (ideally) no null references.  Consider a object that has a collection in it.  Checking that the object is not null, that the collection is not null and that the collection does not contain null objects is unreasonable and foolish."}],"tags":[],"owner":{"account_id":24617,"reputation":1864,"user_id":62709,"accept_rate":90,"display_name":"Stuart Axon"},"comment_count":2,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1380721854,"creation_date":1371215131,"answer_id":17109182,"question_id":271526,"body_markdown":"1. Never initialise variables to null.\r\n2. If (1) is not possible, initialise all collections and arrays to empty collections/arrays.\r\n\r\nDoing this in your own code and you can avoid != null checks.\r\n\r\nMost of the time null checks seem to guard loops over collections or arrays, so just initialise them empty, you won&#39;t need any null checks.\r\n\r\n\r\n\r\n    // Bad\r\n    ArrayList&lt;String&gt; lemmings;\r\n    String[] names;\r\n    \r\n    void checkLemmings() {\r\n        if (lemmings != null) for(lemming: lemmings) {\r\n            // do something\r\n        }\r\n    }\r\n    \r\n\r\n\r\n    // Good\r\n    ArrayList&lt;String&gt; lemmings = new ArrayList&lt;String&gt;();\r\n    String[] names = {};\r\n    \r\n    void checkLemmings() {\r\n        for(lemming: lemmings) {\r\n            // do something\r\n        }\r\n    }\r\n\r\n\r\n\r\nThere is a tiny overhead in this, but it&#39;s worth it for cleaner code and less NullPointerExceptions.","title":"How do I avoid checking for nulls in Java?","body":"<ol>\n<li>Never initialise variables to null.</li>\n<li>If (1) is not possible, initialise all collections and arrays to empty collections/arrays.</li>\n</ol>\n\n<p>Doing this in your own code and you can avoid != null checks.</p>\n\n<p>Most of the time null checks seem to guard loops over collections or arrays, so just initialise them empty, you won't need any null checks.</p>\n\n<pre><code>// Bad\nArrayList&lt;String&gt; lemmings;\nString[] names;\n\nvoid checkLemmings() {\n    if (lemmings != null) for(lemming: lemmings) {\n        // do something\n    }\n}\n\n\n\n// Good\nArrayList&lt;String&gt; lemmings = new ArrayList&lt;String&gt;();\nString[] names = {};\n\nvoid checkLemmings() {\n    for(lemming: lemmings) {\n        // do something\n    }\n}\n</code></pre>\n\n<p>There is a tiny overhead in this, but it's worth it for cleaner code and less NullPointerExceptions.</p>\n"},{"comments":[{"owner":{"account_id":12404,"reputation":62016,"user_id":24396,"accept_rate":74,"display_name":"Steve Kuo"},"score":1,"creation_date":1405020443,"post_id":19714883,"comment_id":38274707,"body_markdown":"I don&#39;t like `CollectionUtils.isEmpty` and `StringUtils.isEmpty` as they also do a null check, which is not implied by the method name.","body":"I don&#39;t like <code>CollectionUtils.isEmpty</code> and <code>StringUtils.isEmpty</code> as they also do a null check, which is not implied by the method name."}],"tags":[],"owner":{"account_id":265665,"reputation":1902,"user_id":552782,"accept_rate":83,"display_name":"iowatiger08"},"comment_count":1,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1383250565,"creation_date":1383247104,"answer_id":19714883,"question_id":271526,"body_markdown":"We have been using Apache libraries (Apache Commons) for this issue.\r\n\r\n    ObjectUtils.equals(object, null)\r\n\r\nor\r\n    \r\n    CollectionUtils.isEmpty(myCollection);\r\n\r\nor \r\n\r\n    StringUtils.isEmpty(&quot;string&quot;);\r\n\r\nI like the previous answer before, as a practice, of providing initial default values or empty sets for collections to minimize the need.\r\n\r\nThese can be simple uses that keep you from having NullPointerException or using an empty collection.  This doesnt answer the question for what to do with the null object, but these provide some checks for basic validations of the object or collection. \r\n\r\nHope this helps. \r\n\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>We have been using Apache libraries (Apache Commons) for this issue.</p>\n\n<pre><code>ObjectUtils.equals(object, null)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>CollectionUtils.isEmpty(myCollection);\n</code></pre>\n\n<p>or </p>\n\n<pre><code>StringUtils.isEmpty(\"string\");\n</code></pre>\n\n<p>I like the previous answer before, as a practice, of providing initial default values or empty sets for collections to minimize the need.</p>\n\n<p>These can be simple uses that keep you from having NullPointerException or using an empty collection.  This doesnt answer the question for what to do with the null object, but these provide some checks for basic validations of the object or collection. </p>\n\n<p>Hope this helps. </p>\n"},{"tags":[],"owner":{"account_id":1049814,"reputation":11925,"user_id":1054021,"accept_rate":81,"display_name":"Tobb"},"comment_count":0,"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1390856070,"creation_date":1390856070,"answer_id":21391466,"question_id":271526,"body_markdown":"The way to avoid unnecessary `null-checks` is simple to state:\r\n\r\n`You need to know which variables can be null, and which cannot, and you need to be confident about which category a given variable fall into.`\r\n\r\nBut, although it can be stated simply enough, achieving it is harder. The key lies in the `confident` part, because how can you be sure that a variable can&#39;t be null?\r\n\r\nThere are no quick-fix, easy answers to this, but here are some pointers:\r\n\r\n1. Clean code. The most important thing for being able to reason about the behaviour of a piece of code is that it is written in a matter that is easy to understand. Name your variables based on what they represent, name your methods after what they do, apply the `Single responsibility principle` (the `S` in `SOLID`: http://en.wikipedia.org/wiki/SOLID_(object-oriented_design), it means that each piece of code should have a single responsibility, and do this and nothing else). Once your code is clean, it is much easier to reason about it, also across multiple tiers/layers of code. With messy code, trying to understand what a method does might make you forget why you are reading the method in the first place. (Tip: Read &quot;Clean Code&quot; by Robert C. Martin)\r\n\r\n2. Avoid returning `null` values. If a `null` value would keep your program from functioning correctly, throw an `exception` instead (make sure to add the appropriate error-handling.) Cases where returning a `null` value might be acceptable is for instance trying to fetch an object from the database. In these cases, write code that handles the `null` values, and make a note behind your ear that here we have something that might return `null`. Handle returned `null` values as close to the caller of the method returning `null` as possible (don&#39;t just blindly pass it back up the call-chain.)\r\n\r\n3. Never EVER pass explicit `null` values as parameters (at least not across classes). If you are ever in a position where passing a `null`-parameter is the only option, creating a new method that does not have this parameter is the way to go. \r\n\r\n4. Validate your input! Identify the &quot;entry-points&quot; to your application. They can everything from webservices, REST-services, remote EJB classes, controllers, etc. For each method in these entry-points, ask yourself: &quot;Will this method execute correctly if this parameter is null?&quot; If the answer is no, add `Validate.notNull(someParam, &quot;Can&#39;t function when someParam is null!&quot;);`. This will throw an `IllegalArgumentException` if the required parameter is missing. The good thing about this type of validation in the entry-points, is that you can then easily assume in the code being executed from the entry-point, that this variable will never be null! Also, if this fails, being at the entry-point, debugging is made a lot easier than it would if you just got a `NullPointerException` deep down in your code, since a failure like this can only mean one thing: The client didn&#39;t send you all the required information. In most cases you want to validate all input parameters, if you find yourself in a position where you need to allow a lot of `null`-values, it might be a sign of a badly designed interface, which needs refactoring/additions to suite the needs of the clients.\r\n\r\n5. When working with `Collection`s, return an empty one rather than null! \r\n\r\n6. When working with a database, utilize `not null`-constraints. In that way, you&#39;ll know that a value read from the database cannot be null, and you won&#39;t have to check for it.\r\n\r\n7. Structure your code and stick with it. Doing this allows you to make assumptions about the behaviour of the code, for instance if all input to your application is validated, then you can assume that these values will never be null. \r\n\r\n8. If you are not already doing it, write automated tests of your code. By writing tests, you will reason about your code, and you will also become more confident that it does what it&#39;s supposed to. Also, automated tests guards you from blunders during refactoring, by letting you know immediatly that this piece of code is not doing what it used to.\r\n\r\nYou still have to null-check of course, but it can trimmed down to the bare minimum (i.e. the situation where _know_ you might be getting a null-value, instead of everywhere just to be sure.) When it comes to null-checks, i actually prefer to use the ternary operator (but use with care, when you start nesting them they come really messy.)\r\n\r\n    public String nullSafeToString(final Object o) {\r\n        return o != null ? o.toString() : &quot;null&quot;;\r\n    }\r\n\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>The way to avoid unnecessary <code>null-checks</code> is simple to state:</p>\n\n<p><code>You need to know which variables can be null, and which cannot, and you need to be confident about which category a given variable fall into.</code></p>\n\n<p>But, although it can be stated simply enough, achieving it is harder. The key lies in the <code>confident</code> part, because how can you be sure that a variable can't be null?</p>\n\n<p>There are no quick-fix, easy answers to this, but here are some pointers:</p>\n\n<ol>\n<li><p>Clean code. The most important thing for being able to reason about the behaviour of a piece of code is that it is written in a matter that is easy to understand. Name your variables based on what they represent, name your methods after what they do, apply the <code>Single responsibility principle</code> (the <code>S</code> in <code>SOLID</code>: <a href=\"http://en.wikipedia.org/wiki/SOLID_(object-oriented_design)\" rel=\"nofollow\">http://en.wikipedia.org/wiki/SOLID_(object-oriented_design)</a>, it means that each piece of code should have a single responsibility, and do this and nothing else). Once your code is clean, it is much easier to reason about it, also across multiple tiers/layers of code. With messy code, trying to understand what a method does might make you forget why you are reading the method in the first place. (Tip: Read \"Clean Code\" by Robert C. Martin)</p></li>\n<li><p>Avoid returning <code>null</code> values. If a <code>null</code> value would keep your program from functioning correctly, throw an <code>exception</code> instead (make sure to add the appropriate error-handling.) Cases where returning a <code>null</code> value might be acceptable is for instance trying to fetch an object from the database. In these cases, write code that handles the <code>null</code> values, and make a note behind your ear that here we have something that might return <code>null</code>. Handle returned <code>null</code> values as close to the caller of the method returning <code>null</code> as possible (don't just blindly pass it back up the call-chain.)</p></li>\n<li><p>Never EVER pass explicit <code>null</code> values as parameters (at least not across classes). If you are ever in a position where passing a <code>null</code>-parameter is the only option, creating a new method that does not have this parameter is the way to go. </p></li>\n<li><p>Validate your input! Identify the \"entry-points\" to your application. They can everything from webservices, REST-services, remote EJB classes, controllers, etc. For each method in these entry-points, ask yourself: \"Will this method execute correctly if this parameter is null?\" If the answer is no, add <code>Validate.notNull(someParam, \"Can't function when someParam is null!\");</code>. This will throw an <code>IllegalArgumentException</code> if the required parameter is missing. The good thing about this type of validation in the entry-points, is that you can then easily assume in the code being executed from the entry-point, that this variable will never be null! Also, if this fails, being at the entry-point, debugging is made a lot easier than it would if you just got a <code>NullPointerException</code> deep down in your code, since a failure like this can only mean one thing: The client didn't send you all the required information. In most cases you want to validate all input parameters, if you find yourself in a position where you need to allow a lot of <code>null</code>-values, it might be a sign of a badly designed interface, which needs refactoring/additions to suite the needs of the clients.</p></li>\n<li><p>When working with <code>Collection</code>s, return an empty one rather than null! </p></li>\n<li><p>When working with a database, utilize <code>not null</code>-constraints. In that way, you'll know that a value read from the database cannot be null, and you won't have to check for it.</p></li>\n<li><p>Structure your code and stick with it. Doing this allows you to make assumptions about the behaviour of the code, for instance if all input to your application is validated, then you can assume that these values will never be null. </p></li>\n<li><p>If you are not already doing it, write automated tests of your code. By writing tests, you will reason about your code, and you will also become more confident that it does what it's supposed to. Also, automated tests guards you from blunders during refactoring, by letting you know immediatly that this piece of code is not doing what it used to.</p></li>\n</ol>\n\n<p>You still have to null-check of course, but it can trimmed down to the bare minimum (i.e. the situation where <em>know</em> you might be getting a null-value, instead of everywhere just to be sure.) When it comes to null-checks, i actually prefer to use the ternary operator (but use with care, when you start nesting them they come really messy.)</p>\n\n<pre><code>public String nullSafeToString(final Object o) {\n    return o != null ? o.toString() : \"null\";\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2403437,"reputation":1315,"user_id":2100584,"display_name":"Tomas"},"score":0,"creation_date":1446177745,"post_id":21726959,"comment_id":54645620,"body_markdown":"`javax` is, by definition, *not* &quot;core Java&quot;.","body":"<code>javax</code> is, by definition, <i>not</i> &quot;core Java&quot;."}],"tags":[],"owner":{"account_id":3130088,"reputation":43207,"user_id":2648077,"accept_rate":80,"display_name":"Alireza Fattahi"},"comment_count":1,"down_vote_count":1,"up_vote_count":19,"is_accepted":false,"score":18,"last_activity_date":1398350885,"creation_date":1392205296,"answer_id":21726959,"question_id":271526,"body_markdown":"May I answer it more generally!\r\n\r\nWe **usually** face this issue when the methods get the parameters in the way we not expected (bad method call is programmer&#39;s fault). For example: you expect to get an object, instead you get a null. You expect to get an String with at least one character, instead you get an empty String ...\r\n\r\nSo there is no difference between:\r\n\r\n    if(object == null){\r\n       //you called my method badly!\r\n   }\r\n\r\nor\r\n\r\n    if(str.length() == 0){\r\n       //you called my method badly again!\r\n    }\r\n\r\nThey both want to make sure that we received valid parameters, before we do any other functions.\r\n\r\nAs mentioned in some other answers, to avoid above problems you can follow the **Design by contract** pattern. Please see http://en.wikipedia.org/wiki/Design_by_contract. \r\n\r\nTo implement this pattern in java, you can use core java annotations like **javax.annotation.NotNull** or use more sophisticated libraries like **Hibernate Validator**.\r\n\r\nJust a sample:\r\n\r\n    getCustomerAccounts(@NotEmpty String customerId,@Size(min = 1) String accountType)\r\n\r\nNow you can safely develop the core function of your method without needing to check input parameters, they guard your methods from unexpected parameters.\r\n\r\nYou can go a step further and make sure that only valid pojos could be created in your application. (sample from hibernate validator site)\r\n\r\n    public class Car {\r\n    \r\n       @NotNull\r\n       private String manufacturer;\r\n    \r\n       @NotNull\r\n       @Size(min = 2, max = 14)\r\n       private String licensePlate;\r\n    \r\n       @Min(2)\r\n       private int seatCount;\r\n    \r\n       // ...\r\n    }\r\n\r\n \r\n\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>May I answer it more generally!</p>\n\n<p>We <strong>usually</strong> face this issue when the methods get the parameters in the way we not expected (bad method call is programmer's fault). For example: you expect to get an object, instead you get a null. You expect to get an String with at least one character, instead you get an empty String ...</p>\n\n<p>So there is no difference between:</p>\n\n<pre><code>if(object == null){\n   //you called my method badly!\n</code></pre>\n\n<p>}</p>\n\n<p>or</p>\n\n<pre><code>if(str.length() == 0){\n   //you called my method badly again!\n}\n</code></pre>\n\n<p>They both want to make sure that we received valid parameters, before we do any other functions.</p>\n\n<p>As mentioned in some other answers, to avoid above problems you can follow the <strong>Design by contract</strong> pattern. Please see <a href=\"http://en.wikipedia.org/wiki/Design_by_contract\">http://en.wikipedia.org/wiki/Design_by_contract</a>. </p>\n\n<p>To implement this pattern in java, you can use core java annotations like <strong>javax.annotation.NotNull</strong> or use more sophisticated libraries like <strong>Hibernate Validator</strong>.</p>\n\n<p>Just a sample:</p>\n\n<pre><code>getCustomerAccounts(@NotEmpty String customerId,@Size(min = 1) String accountType)\n</code></pre>\n\n<p>Now you can safely develop the core function of your method without needing to check input parameters, they guard your methods from unexpected parameters.</p>\n\n<p>You can go a step further and make sure that only valid pojos could be created in your application. (sample from hibernate validator site)</p>\n\n<pre><code>public class Car {\n\n   @NotNull\n   private String manufacturer;\n\n   @NotNull\n   @Size(min = 2, max = 14)\n   private String licensePlate;\n\n   @Min(2)\n   private int seatCount;\n\n   // ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2194710,"reputation":826,"user_id":1940722,"display_name":"Gal Morad"},"comment_count":0,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1507139445,"creation_date":1394059441,"answer_id":22211014,"question_id":271526,"body_markdown":"I find Guava Preconditions to be very useful in this case. I don&#39;t like leaving nulls to null pointer exception since the only way to understand an NPE is by locating the line number. Line numbers in production version and development version can be different.\r\n\r\nUsing Guava Preconditions, I can check null parameters and define a meaningful exception message in one line.\r\n\r\nFor example,\r\n\r\n    Preconditions.checkNotNull(paramVal, &quot;Method foo received null paramVal&quot;);\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>I find Guava Preconditions to be very useful in this case. I don't like leaving nulls to null pointer exception since the only way to understand an NPE is by locating the line number. Line numbers in production version and development version can be different.</p>\n\n<p>Using Guava Preconditions, I can check null parameters and define a meaningful exception message in one line.</p>\n\n<p>For example,</p>\n\n<pre><code>Preconditions.checkNotNull(paramVal, \"Method foo received null paramVal\");\n</code></pre>\n"},{"comments":[{"owner":{"account_id":370573,"reputation":1651,"user_id":718590,"accept_rate":43,"display_name":"pkalinow"},"score":0,"creation_date":1454501930,"post_id":23021801,"comment_id":58070686,"body_markdown":"Ad. 4. It is not very useful - when you check if a pointer is null, you probably want to call a method on it. Calling a method on null gives you the same behavior - NullPointerException.","body":"Ad. 4. It is not very useful - when you check if a pointer is null, you probably want to call a method on it. Calling a method on null gives you the same behavior - NullPointerException."},{"owner":{"account_id":7072149,"reputation":91,"user_id":5413405,"display_name":"fozzybear"},"score":0,"creation_date":1679502305,"post_id":23021801,"comment_id":133734686,"body_markdown":"Approach 4 is superfluous and already covered by `Objects.requireNonNull()`","body":"Approach 4 is superfluous and already covered by <code>Objects.requireNonNull()</code>"}],"tags":[],"owner":{"account_id":2348323,"reputation":13158,"user_id":2057902,"accept_rate":80,"display_name":"Sireesh Yarlagadda"},"comment_count":2,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1427217221,"creation_date":1397247260,"answer_id":23021801,"question_id":271526,"body_markdown":"This is the most common error occurred for most of the developers.\r\n\r\nWe have number of ways to handle this.\r\n\r\n**Approach 1:**\r\n\r\n    org.apache.commons.lang.Validate //using apache framework\r\nnotNull(Object object, String message) \r\n\r\n**Approach 2:**\r\n\r\n    if(someObject!=null){ // simply checking against null\r\n    }\r\n\r\n\r\n**Approach 3:**\r\n\r\n    @isNull @Nullable  // using annotation based validation\r\n\r\n**Approach 4:**\r\n\r\n    // by writing static method and calling it across whereever we needed to check the validation\r\n\r\n    static &lt;T&gt; T isNull(someObject e){  \r\n       if(e == null){\r\n          throw new NullPointerException();\r\n       }\r\n       return e;\r\n    }\r\n\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>This is the most common error occurred for most of the developers.</p>\n\n<p>We have number of ways to handle this.</p>\n\n<p><strong>Approach 1:</strong></p>\n\n<pre><code>org.apache.commons.lang.Validate //using apache framework\n</code></pre>\n\n<p>notNull(Object object, String message) </p>\n\n<p><strong>Approach 2:</strong></p>\n\n<pre><code>if(someObject!=null){ // simply checking against null\n}\n</code></pre>\n\n<p><strong>Approach 3:</strong></p>\n\n<pre><code>@isNull @Nullable  // using annotation based validation\n</code></pre>\n\n<p><strong>Approach 4:</strong></p>\n\n<pre><code>// by writing static method and calling it across whereever we needed to check the validation\n\nstatic &lt;T&gt; T isNull(someObject e){  \n   if(e == null){\n      throw new NullPointerException();\n   }\n   return e;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":370573,"reputation":1651,"user_id":718590,"accept_rate":43,"display_name":"pkalinow"},"score":0,"creation_date":1454502372,"post_id":23031015,"comment_id":58070988,"body_markdown":"The solution with &quot;hasBackground()&quot; has one drawback - it&#39;s not thread-safe. If you need to call two methods instead of one, you need to synchronize the whole sequence in multi-threaded environment.","body":"The solution with &quot;hasBackground()&quot; has one drawback - it&#39;s not thread-safe. If you need to call two methods instead of one, you need to synchronize the whole sequence in multi-threaded environment."},{"owner":{"account_id":2273307,"reputation":2281,"user_id":2000185,"accept_rate":67,"display_name":"luke1985"},"score":0,"creation_date":1454513399,"post_id":23031015,"comment_id":58079152,"body_markdown":"@pkalinow You made a contrived example only to point out that this solution has a drawback. If code is not meant to run in multithreaded application then there is no drawback. I could put at you probably 90% of your code that is not thread safe. We&#39;re not speaking here about this aspect of code, we&#39;re speaking about design pattern. And multithreading is a topic on its own.","body":"@pkalinow You made a contrived example only to point out that this solution has a drawback. If code is not meant to run in multithreaded application then there is no drawback. I could put at you probably 90% of your code that is not thread safe. We&#39;re not speaking here about this aspect of code, we&#39;re speaking about design pattern. And multithreading is a topic on its own."},{"owner":{"account_id":370573,"reputation":1651,"user_id":718590,"accept_rate":43,"display_name":"pkalinow"},"score":0,"creation_date":1454582050,"post_id":23031015,"comment_id":58113391,"body_markdown":"Of course in a single-thread application it&#39;s not a problem. I&#39;ve given that comment because sometimes it is a problem.","body":"Of course in a single-thread application it&#39;s not a problem. I&#39;ve given that comment because sometimes it is a problem."},{"owner":{"account_id":2273307,"reputation":2281,"user_id":2000185,"accept_rate":67,"display_name":"luke1985"},"score":0,"creation_date":1454583464,"post_id":23031015,"comment_id":58114436,"body_markdown":"@pkalinow If you study this topic closer you will find out that Null Object design pattern won&#39;t fix the multithreading problems. So it&#39;s irrelevant.\nAnd to be honest, I&#39;ve found places where this pattern would fit in nicely, so my original answer is a bit wrong, actually.","body":"@pkalinow If you study this topic closer you will find out that Null Object design pattern won&#39;t fix the multithreading problems. So it&#39;s irrelevant. And to be honest, I&#39;ve found places where this pattern would fit in nicely, so my original answer is a bit wrong, actually."}],"tags":[],"owner":{"account_id":2273307,"reputation":2281,"user_id":2000185,"accept_rate":67,"display_name":"luke1985"},"comment_count":4,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1454585097,"creation_date":1397309277,"answer_id":23031015,"question_id":271526,"body_markdown":"I highly disregard answers that suggest using the null objects in every situation. This pattern may break the contract and bury problems deeper and deeper instead of solving them, not mentioning that used inappropriately will create another pile of boilerplate code that will require future maintenance.\r\n\r\nIn reality if something returned from a method can be null and the calling code has to make decision upon that, there should an earlier call that ensures the state. \r\n\r\nAlso keep in mind, that null object pattern will be memory hungry if used without care. For this - the instance of a NullObject should be shared between owners, and not be an unigue instance for each of these.\r\n\r\nAlso I would not recommend using this pattern where the type is meant to be a primitive type representation - like mathematical entities, that are not scalars: vectors, matrices, complex numbers and POD(Plain Old Data) objects, which are meant to hold state in form of Java built-in types. In the latter case you would end up calling getter methods with arbitrary results. For example what should a NullPerson.getName() method return? \r\n\r\nIt&#39;s worth considering such cases in order to avoid absurd results.","title":"How do I avoid checking for nulls in Java?","body":"<p>I highly disregard answers that suggest using the null objects in every situation. This pattern may break the contract and bury problems deeper and deeper instead of solving them, not mentioning that used inappropriately will create another pile of boilerplate code that will require future maintenance.</p>\n\n<p>In reality if something returned from a method can be null and the calling code has to make decision upon that, there should an earlier call that ensures the state. </p>\n\n<p>Also keep in mind, that null object pattern will be memory hungry if used without care. For this - the instance of a NullObject should be shared between owners, and not be an unigue instance for each of these.</p>\n\n<p>Also I would not recommend using this pattern where the type is meant to be a primitive type representation - like mathematical entities, that are not scalars: vectors, matrices, complex numbers and POD(Plain Old Data) objects, which are meant to hold state in form of Java built-in types. In the latter case you would end up calling getter methods with arbitrary results. For example what should a NullPerson.getName() method return? </p>\n\n<p>It's worth considering such cases in order to avoid absurd results.</p>\n"},{"comments":[{"owner":{"account_id":90378,"reputation":2824,"user_id":248847,"accept_rate":85,"display_name":"KrishPrabakar"},"score":0,"creation_date":1577968565,"post_id":29887121,"comment_id":105294546,"body_markdown":"There&#39;s a null check in above code - `if(homeServices != null) {` which can be changed to `homeServices.ifPresent(h -&gt; //action)`;","body":"There&#39;s a null check in above code - <code>if(homeServices != null) {</code> which can be changed to <code>homeServices.ifPresent(h -&gt; &#47;&#47;action)</code>;"}],"tags":[],"owner":{"account_id":1810071,"reputation":53,"user_id":1646333,"display_name":"Yogesh Devatraj"},"comment_count":1,"down_vote_count":2,"up_vote_count":30,"is_accepted":false,"score":28,"last_activity_date":1442695170,"creation_date":1430108209,"answer_id":29887121,"question_id":271526,"body_markdown":"This is a very common problem for every Java developer. So there is official support in Java&amp;nbsp;8 to address these issues without cluttered code.\r\n\r\nJava 8 has introduced `java.util.Optional&lt;T&gt;`. It is a container that may or may not hold a non-null value. Java 8 has given a safer way to handle an object whose value may be null in some of the cases. It is inspired from the ideas of [Haskell][1] and [Scala][2].\r\n\r\nIn a nutshell, the Optional class includes methods to explicitly deal with the cases where a value is present or absent. However, the advantage compared to null references is that the Optional&amp;lt;T&gt; class forces you to think about the case when the value is not present. As a consequence, you can prevent unintended null pointer exceptions.\r\n\r\nIn above example we have a home service factory that returns a handle to multiple appliances available in the home. But these services may or may not be available/functional; it means it may result in a NullPointerException. Instead of adding a null `if` condition before using any service, let&#39;s wrap it in to Optional&amp;lt;Service&gt;.\r\n\r\nWRAPPING TO OPTION&amp;lt;T&gt;\r\n\r\nLet&#39;s consider a method to get a reference of a service from a factory. Instead of returning the service reference, wrap it with Optional. It lets the API user know that the returned service may or may not available/functional, use defensively\r\n\r\n    public Optional&lt;Service&gt; getRefrigertorControl() {\r\n          Service s = new  RefrigeratorService();\r\n           //...\r\n          return Optional.ofNullable(s);\r\n       }\r\n\r\nAs you see `Optional.ofNullable()` provides an easy way to get the reference wrapped. There are another ways to get the reference of Optional, either `Optional.empty()` &amp; `Optional.of()`. One for returning an empty object instead of retuning null and the other to wrap a non-nullable object, respectively.\r\n\r\nSO HOW EXACTLY IT HELPS TO AVOID A NULL CHECK?\r\n\r\nOnce you have wrapped a reference object, Optional provides many useful methods to invoke methods on a wrapped reference without NPE.\r\n\r\n    Optional ref = homeServices.getRefrigertorControl();\r\n    ref.ifPresent(HomeServices::switchItOn);\r\n\r\nOptional.ifPresent invokes the given Consumer with a reference if it is a non-null value. Otherwise, it does nothing.\r\n\r\n    @FunctionalInterface\r\n    public interface Consumer&lt;T&gt;\r\n\r\nRepresents an operation that accepts a single input argument and returns no result. Unlike most other functional interfaces, Consumer is expected to operate via side-effects.\r\nIt is so clean and easy to understand. In the above code example, `HomeService.switchOn(Service)` gets invoked if the Optional holding reference is non-null.\r\n\r\nWe use the ternary operator very often for checking null condition and return an alternative value or default value. Optional provides another way to handle the same condition without checking null. Optional.orElse(defaultObj) returns defaultObj if the Optional has a null value. Let&#39;s use this in our sample code:\r\n\r\n    public static Optional&lt;HomeServices&gt; get() {\r\n        service = Optional.of(service.orElse(new HomeServices()));\r\n        return service;\r\n    }\r\n\r\nNow HomeServices.get() does same thing, but in a better way. It checks whether the service is already initialized of not. If it is then return the same or create a new New service. Optional&amp;lt;T&gt;.orElse(T) helps to return a default value.\r\n\r\nFinally, here is our NPE as well as null check-free code:\r\n\r\n    import java.util.Optional;\r\n    public class HomeServices {\r\n        private static final int NOW = 0;\r\n        private static Optional&lt;HomeServices&gt; service;\r\n\r\n    public static Optional&lt;HomeServices&gt; get() {\r\n        service = Optional.of(service.orElse(new HomeServices()));\r\n        return service;\r\n    }\r\n\r\n    public Optional&lt;Service&gt; getRefrigertorControl() {\r\n        Service s = new  RefrigeratorService();\r\n        //...\r\n        return Optional.ofNullable(s);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        /* Get Home Services handle */\r\n        Optional&lt;HomeServices&gt; homeServices = HomeServices.get();\r\n        if(homeServices != null) {\r\n            Optional&lt;Service&gt; refrigertorControl = homeServices.get().getRefrigertorControl();\r\n            refrigertorControl.ifPresent(HomeServices::switchItOn);\r\n        }\r\n    }\r\n\r\n    public static void switchItOn(Service s){\r\n             //...\r\n        }\r\n    }\r\n\r\nThe complete post is *[NPE as well as Null check-free code … Really?][3]*.\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Haskell_%28programming_language%29\r\n  [2]: http://en.wikipedia.org/wiki/Scala_%28programming_language%29\r\n  [3]: http://ydtech.blogspot.in/2015/04/npe-as-well-as-null-check-free-code.html\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>This is a very common problem for every Java developer. So there is official support in Java&nbsp;8 to address these issues without cluttered code.</p>\n\n<p>Java 8 has introduced <code>java.util.Optional&lt;T&gt;</code>. It is a container that may or may not hold a non-null value. Java 8 has given a safer way to handle an object whose value may be null in some of the cases. It is inspired from the ideas of <a href=\"http://en.wikipedia.org/wiki/Haskell_%28programming_language%29\" rel=\"noreferrer\">Haskell</a> and <a href=\"http://en.wikipedia.org/wiki/Scala_%28programming_language%29\" rel=\"noreferrer\">Scala</a>.</p>\n\n<p>In a nutshell, the Optional class includes methods to explicitly deal with the cases where a value is present or absent. However, the advantage compared to null references is that the Optional&lt;T> class forces you to think about the case when the value is not present. As a consequence, you can prevent unintended null pointer exceptions.</p>\n\n<p>In above example we have a home service factory that returns a handle to multiple appliances available in the home. But these services may or may not be available/functional; it means it may result in a NullPointerException. Instead of adding a null <code>if</code> condition before using any service, let's wrap it in to Optional&lt;Service>.</p>\n\n<p>WRAPPING TO OPTION&lt;T></p>\n\n<p>Let's consider a method to get a reference of a service from a factory. Instead of returning the service reference, wrap it with Optional. It lets the API user know that the returned service may or may not available/functional, use defensively</p>\n\n<pre><code>public Optional&lt;Service&gt; getRefrigertorControl() {\n      Service s = new  RefrigeratorService();\n       //...\n      return Optional.ofNullable(s);\n   }\n</code></pre>\n\n<p>As you see <code>Optional.ofNullable()</code> provides an easy way to get the reference wrapped. There are another ways to get the reference of Optional, either <code>Optional.empty()</code> &amp; <code>Optional.of()</code>. One for returning an empty object instead of retuning null and the other to wrap a non-nullable object, respectively.</p>\n\n<p>SO HOW EXACTLY IT HELPS TO AVOID A NULL CHECK?</p>\n\n<p>Once you have wrapped a reference object, Optional provides many useful methods to invoke methods on a wrapped reference without NPE.</p>\n\n<pre><code>Optional ref = homeServices.getRefrigertorControl();\nref.ifPresent(HomeServices::switchItOn);\n</code></pre>\n\n<p>Optional.ifPresent invokes the given Consumer with a reference if it is a non-null value. Otherwise, it does nothing.</p>\n\n<pre><code>@FunctionalInterface\npublic interface Consumer&lt;T&gt;\n</code></pre>\n\n<p>Represents an operation that accepts a single input argument and returns no result. Unlike most other functional interfaces, Consumer is expected to operate via side-effects.\nIt is so clean and easy to understand. In the above code example, <code>HomeService.switchOn(Service)</code> gets invoked if the Optional holding reference is non-null.</p>\n\n<p>We use the ternary operator very often for checking null condition and return an alternative value or default value. Optional provides another way to handle the same condition without checking null. Optional.orElse(defaultObj) returns defaultObj if the Optional has a null value. Let's use this in our sample code:</p>\n\n<pre><code>public static Optional&lt;HomeServices&gt; get() {\n    service = Optional.of(service.orElse(new HomeServices()));\n    return service;\n}\n</code></pre>\n\n<p>Now HomeServices.get() does same thing, but in a better way. It checks whether the service is already initialized of not. If it is then return the same or create a new New service. Optional&lt;T>.orElse(T) helps to return a default value.</p>\n\n<p>Finally, here is our NPE as well as null check-free code:</p>\n\n<pre><code>import java.util.Optional;\npublic class HomeServices {\n    private static final int NOW = 0;\n    private static Optional&lt;HomeServices&gt; service;\n\npublic static Optional&lt;HomeServices&gt; get() {\n    service = Optional.of(service.orElse(new HomeServices()));\n    return service;\n}\n\npublic Optional&lt;Service&gt; getRefrigertorControl() {\n    Service s = new  RefrigeratorService();\n    //...\n    return Optional.ofNullable(s);\n}\n\npublic static void main(String[] args) {\n    /* Get Home Services handle */\n    Optional&lt;HomeServices&gt; homeServices = HomeServices.get();\n    if(homeServices != null) {\n        Optional&lt;Service&gt; refrigertorControl = homeServices.get().getRefrigertorControl();\n        refrigertorControl.ifPresent(HomeServices::switchItOn);\n    }\n}\n\npublic static void switchItOn(Service s){\n         //...\n    }\n}\n</code></pre>\n\n<p>The complete post is <em><a href=\"http://ydtech.blogspot.in/2015/04/npe-as-well-as-null-check-free-code.html\" rel=\"noreferrer\">NPE as well as Null check-free code … Really?</a></em>.</p>\n"},{"tags":[],"owner":{"account_id":1782478,"reputation":1380,"user_id":1624839,"display_name":"Mehdi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1445263666,"creation_date":1445263236,"answer_id":33216446,"question_id":271526,"body_markdown":"You can couple your Class with Unit Testing using a framework like JUnit.\r\nThis way your code will be clean (no useless checkings) and you will be sure your instances wont be null.\r\n\r\nThis is one good reason (of many) to use Unit Testing.\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>You can couple your Class with Unit Testing using a framework like JUnit.\nThis way your code will be clean (no useless checkings) and you will be sure your instances wont be null.</p>\n\n<p>This is one good reason (of many) to use Unit Testing.</p>\n"},{"tags":[],"owner":{"account_id":204515,"reputation":11679,"user_id":452775,"accept_rate":63,"display_name":"Lii"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1448021468,"creation_date":1447781857,"answer_id":33763493,"question_id":271526,"body_markdown":"It is possible to define util methods which handles nested null-checks in an almost pretty way with Java 8 lambdas.\r\n\r\n    void example() {\r\n        Entry entry = new Entry();\r\n        // This is the same as H-MANs solution \r\n        Person person = getNullsafe(entry, e -&gt; e.getPerson());    \r\n        // Get object in several steps\r\n        String givenName = getNullsafe(entry, e -&gt; e.getPerson(), p -&gt; p.getName(), n -&gt; n.getGivenName());\r\n        // Call void methods\r\n        doNullsafe(entry, e -&gt; e.getPerson(), p -&gt; p.getName(), n -&gt; n.nameIt());        \r\n    }\r\n    \r\n    /** Return result of call to f1 with o1 if it is non-null, otherwise return null. */\r\n    public static &lt;R, T1&gt; R getNullsafe(T1 o1, Function&lt;T1, R&gt; f1) {\r\n        if (o1 != null) return f1.apply(o1);\r\n        return null; \r\n    }\r\n\r\n    public static &lt;R, T0, T1&gt; R getNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Function&lt;T1, R&gt; f2) {\r\n        return getNullsafe(getNullsafe(o0, f1), f2);\r\n    }\r\n    \r\n    public static &lt;R, T0, T1, T2&gt; R getNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Function&lt;T1, T2&gt; f2, Function&lt;T2, R&gt; f3) {\r\n        return getNullsafe(getNullsafe(o0, f1, f2), f3);\r\n    }\r\n    \r\n\r\n    /** Call consumer f1 with o1 if it is non-null, otherwise do nothing. */\r\n    public static &lt;T1&gt; void doNullsafe(T1 o1, Consumer&lt;T1&gt; f1) {\r\n        if (o1 != null) f1.accept(o1);\r\n    }\r\n\r\n    public static &lt;T0, T1&gt; void doNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Consumer&lt;T1&gt; f2) {\r\n        doNullsafe(getNullsafe(o0, f1), f2);\r\n    }\r\n    \r\n    public static &lt;T0, T1, T2&gt; void doNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Function&lt;T1, T2&gt; f2, Consumer&lt;T2&gt; f3) {\r\n        doNullsafe(getNullsafe(o0, f1, f2), f3);\r\n    }\r\n\r\n    \r\n    class Entry {\r\n        Person getPerson() { return null; }\r\n    }\r\n\r\n    class Person {\r\n        Name getName() { return null; }\r\n    }\r\n\r\n    class Name {\r\n        void nameIt() {}\r\n        String getGivenName() { return null; }\r\n    }\r\n\r\n&lt;i&gt;&lt;sup&gt;(This answer was first posted [here][2].)&lt;/sup&gt;&lt;/i&gt;\r\n\r\n[1]: https://stackoverflow.com/questions/271526/avoiding-null-statements?page=2#3925191\r\n[2]: https://stackoverflow.com/questions/4390141/java-operator-for-checking-null-what-is-it-not-ternary/33711967#33711967\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>It is possible to define util methods which handles nested null-checks in an almost pretty way with Java 8 lambdas.</p>\n\n<pre><code>void example() {\n    Entry entry = new Entry();\n    // This is the same as H-MANs solution \n    Person person = getNullsafe(entry, e -&gt; e.getPerson());    \n    // Get object in several steps\n    String givenName = getNullsafe(entry, e -&gt; e.getPerson(), p -&gt; p.getName(), n -&gt; n.getGivenName());\n    // Call void methods\n    doNullsafe(entry, e -&gt; e.getPerson(), p -&gt; p.getName(), n -&gt; n.nameIt());        \n}\n\n/** Return result of call to f1 with o1 if it is non-null, otherwise return null. */\npublic static &lt;R, T1&gt; R getNullsafe(T1 o1, Function&lt;T1, R&gt; f1) {\n    if (o1 != null) return f1.apply(o1);\n    return null; \n}\n\npublic static &lt;R, T0, T1&gt; R getNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Function&lt;T1, R&gt; f2) {\n    return getNullsafe(getNullsafe(o0, f1), f2);\n}\n\npublic static &lt;R, T0, T1, T2&gt; R getNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Function&lt;T1, T2&gt; f2, Function&lt;T2, R&gt; f3) {\n    return getNullsafe(getNullsafe(o0, f1, f2), f3);\n}\n\n\n/** Call consumer f1 with o1 if it is non-null, otherwise do nothing. */\npublic static &lt;T1&gt; void doNullsafe(T1 o1, Consumer&lt;T1&gt; f1) {\n    if (o1 != null) f1.accept(o1);\n}\n\npublic static &lt;T0, T1&gt; void doNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Consumer&lt;T1&gt; f2) {\n    doNullsafe(getNullsafe(o0, f1), f2);\n}\n\npublic static &lt;T0, T1, T2&gt; void doNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Function&lt;T1, T2&gt; f2, Consumer&lt;T2&gt; f3) {\n    doNullsafe(getNullsafe(o0, f1, f2), f3);\n}\n\n\nclass Entry {\n    Person getPerson() { return null; }\n}\n\nclass Person {\n    Name getName() { return null; }\n}\n\nclass Name {\n    void nameIt() {}\n    String getGivenName() { return null; }\n}\n</code></pre>\n\n<p><i><sup>(This answer was first posted <a href=\"https://stackoverflow.com/questions/4390141/java-operator-for-checking-null-what-is-it-not-ternary/33711967#33711967\">here</a>.)</sup></i></p>\n"},{"tags":[],"owner":{"account_id":951981,"reputation":14760,"user_id":977919,"accept_rate":92,"display_name":"sidgate"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1450245245,"creation_date":1450245245,"answer_id":34304851,"question_id":271526,"body_markdown":"Java 8 now has Optional class that wraps the object in consideration and if a value is present, isPresent() will return true and get() will return the value.\r\n\r\n\r\nhttp://www.oracle.com/technetwork/articles/java/java8-optional-2175753.html","title":"How do I avoid checking for nulls in Java?","body":"<p>Java 8 now has Optional class that wraps the object in consideration and if a value is present, isPresent() will return true and get() will return the value.</p>\n\n<p><a href=\"http://www.oracle.com/technetwork/articles/java/java8-optional-2175753.html\" rel=\"nofollow\">http://www.oracle.com/technetwork/articles/java/java8-optional-2175753.html</a></p>\n"},{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1489571198,"creation_date":1453736536,"answer_id":34996504,"question_id":271526,"body_markdown":"I follow below guidelines to avoid null checks.\r\n\r\n1. Avoid ***lazy initialization*** of member variables as much as possible. Initialize the variables in declaration itself. This will handle NullPointerExceptions. \r\n\r\n2. Decide on ***mutability*** of member variables early in the cycle. Use language constructs like `final` keyword effectively. \r\n\r\n3. If you know that augments for method won&#39;t be changed, declare them as `final`.\r\n\r\n4. Limit the ***mutation*** of data as much as possible. Some variables can be created in a constructor and can never be changed. ***Remove public setter methods unless they are really required***.\r\n\r\n E.g. Assume that one class in your application (`A.java`) is maintaining a collection like `HashMap`.  Don&#39;t provide `public` getter method in A.java and allow `B.java` to directly add an element in `Map`. Instead provide an API in `A.java`, which adds an element into collection. \r\n\r\n        // Avoid\r\n        a.getMap().put(key,value)\r\n\r\n        //recommended\r\n\r\n        public void addElement(Object key, Object value){\r\n               // Have null checks for both key and value here : single place\r\n               map.put(key,value);\r\n        }\r\n\r\n5. And finally, use `try{} catch{} finally{}` blocks at right places effectively.\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>I follow below guidelines to avoid null checks.</p>\n\n<ol>\n<li><p>Avoid <strong><em>lazy initialization</em></strong> of member variables as much as possible. Initialize the variables in declaration itself. This will handle NullPointerExceptions. </p></li>\n<li><p>Decide on <strong><em>mutability</em></strong> of member variables early in the cycle. Use language constructs like <code>final</code> keyword effectively. </p></li>\n<li><p>If you know that augments for method won't be changed, declare them as <code>final</code>.</p></li>\n<li><p>Limit the <strong><em>mutation</em></strong> of data as much as possible. Some variables can be created in a constructor and can never be changed. <strong><em>Remove public setter methods unless they are really required</em></strong>.</p>\n\n<p>E.g. Assume that one class in your application (<code>A.java</code>) is maintaining a collection like <code>HashMap</code>.  Don't provide <code>public</code> getter method in A.java and allow <code>B.java</code> to directly add an element in <code>Map</code>. Instead provide an API in <code>A.java</code>, which adds an element into collection. </p>\n\n<pre><code>// Avoid\na.getMap().put(key,value)\n\n//recommended\n\npublic void addElement(Object key, Object value){\n       // Have null checks for both key and value here : single place\n       map.put(key,value);\n}\n</code></pre></li>\n<li><p>And finally, use <code>try{} catch{} finally{}</code> blocks at right places effectively.</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2524791,"reputation":3884,"user_id":2194364,"accept_rate":77,"display_name":"Raghu K Nair"},"comment_count":0,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1475134554,"creation_date":1458691423,"answer_id":36167495,"question_id":271526,"body_markdown":"Probably the best alternative for Java 8 or newer is to use the [`Optional`][1] class. \r\n\r\n    Optional stringToUse = Optional.of(&quot;optional is there&quot;);\r\n    stringToUse.ifPresent(System.out::println);\r\n\r\nThis is especially handy for long chains of possible null values. Example:\r\n\r\n    Optional&lt;Integer&gt; i = Optional.ofNullable(wsObject.getFoo())\r\n        .map(f -&gt; f.getBar())\r\n        .map(b -&gt; b.getBaz())\r\n        .map(b -&gt; b.getInt());\r\n\r\nExample on how to throw exception on null:\r\n\r\n    Optional optionalCarNull = Optional.ofNullable(someNull);\r\n    optionalCarNull.orElseThrow(IllegalStateException::new);\r\n\r\nJava 7 introduced the [`Objects.requireNonNull`][2] method which can be handy when something should be checked for non-nullness. Example:\r\n\r\n    String lowerVal = Objects.requireNonNull(someVar, &quot;input cannot be null or empty&quot;).toLowerCase();\r\n\r\n[1]: https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\r\n[2]: https://docs.oracle.com/javase/7/docs/api/java/util/Objects.html#requireNonNull(T,%20java.lang.String)","title":"How do I avoid checking for nulls in Java?","body":"<p>Probably the best alternative for Java 8 or newer is to use the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"noreferrer\"><code>Optional</code></a> class. </p>\n\n<pre><code>Optional stringToUse = Optional.of(\"optional is there\");\nstringToUse.ifPresent(System.out::println);\n</code></pre>\n\n<p>This is especially handy for long chains of possible null values. Example:</p>\n\n<pre><code>Optional&lt;Integer&gt; i = Optional.ofNullable(wsObject.getFoo())\n    .map(f -&gt; f.getBar())\n    .map(b -&gt; b.getBaz())\n    .map(b -&gt; b.getInt());\n</code></pre>\n\n<p>Example on how to throw exception on null:</p>\n\n<pre><code>Optional optionalCarNull = Optional.ofNullable(someNull);\noptionalCarNull.orElseThrow(IllegalStateException::new);\n</code></pre>\n\n<p>Java 7 introduced the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Objects.html#requireNonNull(T,%20java.lang.String)\" rel=\"noreferrer\"><code>Objects.requireNonNull</code></a> method which can be handy when something should be checked for non-nullness. Example:</p>\n\n<pre><code>String lowerVal = Objects.requireNonNull(someVar, \"input cannot be null or empty\").toLowerCase();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8755167,"reputation":199,"user_id":6546993,"display_name":"Ivan Golovach"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1470520722,"creation_date":1467732261,"answer_id":38207227,"question_id":271526,"body_markdown":"In Java 8 you can use type `T` for local-variable/field/method-argument/method-return-type if it never assigned `null` (and do not check for `null`) or type `Optional&lt;T&gt;` if it can be `null`. Then use method `map` for processing `T -&gt; ` and method `flatMap` for processing `T -&gt; Optional&lt;R&gt;`:\r\n\r\n    class SomeService {\r\n        @Inject\r\n        private CompanyDao companyDao;\r\n    \r\n        // return Optional&lt;String&gt;\r\n        public Optional&lt;String&gt; selectCeoCityByCompanyId0(int companyId) {\r\n            return companyDao.selectById(companyId)\r\n                    .map(Company::getCeo)\r\n                    .flatMap(Person::getHomeAddress)\r\n                    .flatMap(Address::getCity);\r\n        }\r\n    \r\n        // return String + default value\r\n        public String selectCeoCityByCompanyId1(int companyId) {\r\n            return companyDao.selectById(companyId)\r\n                    .map(Company::getCeo)\r\n                    .flatMap(Person::getHomeAddress)\r\n                    .flatMap(Address::getCity)\r\n                    .orElse(&quot;UNKNOWN&quot;);\r\n        }\r\n    \r\n        // return String + exception\r\n        public String selectCeoCityByCompanyId2(int companyId) throws NoSuchElementException {\r\n            return companyDao.selectById(companyId)\r\n                    .map(Company::getCeo)\r\n                    .flatMap(Person::getHomeAddress)\r\n                    .flatMap(Address::getCity)\r\n                    .orElseThrow(NoSuchElementException::new);\r\n        }\r\n    }\r\n    \r\n    interface CompanyDao {\r\n        // real situation: no company for such id -&gt; use Optional&lt;Company&gt; \r\n        Optional&lt;Company&gt; selectById(int id);\r\n    }\r\n    \r\n    class Company {\r\n        // company always has ceo -&gt; use Person \r\n        Person ceo;\r\n        public Person getCeo() {return ceo;}\r\n    }\r\n    \r\n    class Person {\r\n        // person always has name -&gt; use String\r\n        String firstName;\r\n        // person can be without address -&gt; use Optional&lt;Address&gt;\r\n        Optional&lt;Address&gt; homeAddress = Optional.empty();\r\n    \r\n        public String getFirstName() {return firstName;}   \r\n        public Optional&lt;Address&gt; getHomeAddress() {return homeAddress;}\r\n    }\r\n    \r\n    class Address {\r\n        //  address always contains country -&gt; use String\r\n        String country;\r\n        //  city field is optional -&gt; use Optional&lt;String&gt;\r\n        Optional&lt;String&gt; city = Optional.empty();\r\n    \r\n        String getCountry() {return country;}    \r\n        Optional&lt;String&gt; getCity() {return city;}\r\n    }\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>In Java 8 you can use type <code>T</code> for local-variable/field/method-argument/method-return-type if it never assigned <code>null</code> (and do not check for <code>null</code>) or type <code>Optional&lt;T&gt;</code> if it can be <code>null</code>. Then use method <code>map</code> for processing <code>T -&gt;</code> and method <code>flatMap</code> for processing <code>T -&gt; Optional&lt;R&gt;</code>:</p>\n\n<pre><code>class SomeService {\n    @Inject\n    private CompanyDao companyDao;\n\n    // return Optional&lt;String&gt;\n    public Optional&lt;String&gt; selectCeoCityByCompanyId0(int companyId) {\n        return companyDao.selectById(companyId)\n                .map(Company::getCeo)\n                .flatMap(Person::getHomeAddress)\n                .flatMap(Address::getCity);\n    }\n\n    // return String + default value\n    public String selectCeoCityByCompanyId1(int companyId) {\n        return companyDao.selectById(companyId)\n                .map(Company::getCeo)\n                .flatMap(Person::getHomeAddress)\n                .flatMap(Address::getCity)\n                .orElse(\"UNKNOWN\");\n    }\n\n    // return String + exception\n    public String selectCeoCityByCompanyId2(int companyId) throws NoSuchElementException {\n        return companyDao.selectById(companyId)\n                .map(Company::getCeo)\n                .flatMap(Person::getHomeAddress)\n                .flatMap(Address::getCity)\n                .orElseThrow(NoSuchElementException::new);\n    }\n}\n\ninterface CompanyDao {\n    // real situation: no company for such id -&gt; use Optional&lt;Company&gt; \n    Optional&lt;Company&gt; selectById(int id);\n}\n\nclass Company {\n    // company always has ceo -&gt; use Person \n    Person ceo;\n    public Person getCeo() {return ceo;}\n}\n\nclass Person {\n    // person always has name -&gt; use String\n    String firstName;\n    // person can be without address -&gt; use Optional&lt;Address&gt;\n    Optional&lt;Address&gt; homeAddress = Optional.empty();\n\n    public String getFirstName() {return firstName;}   \n    public Optional&lt;Address&gt; getHomeAddress() {return homeAddress;}\n}\n\nclass Address {\n    //  address always contains country -&gt; use String\n    String country;\n    //  city field is optional -&gt; use Optional&lt;String&gt;\n    Optional&lt;String&gt; city = Optional.empty();\n\n    String getCountry() {return country;}    \n    Optional&lt;String&gt; getCity() {return city;}\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4346060,"reputation":1917,"user_id":3619962,"accept_rate":87,"display_name":"Yasin"},"score":5,"creation_date":1477487767,"post_id":39848137,"comment_id":67786967,"body_markdown":"You are just modifying the check. No real benefit is received. Even though we put extra efforts to implement the suggested pattern, the code is still not clean.","body":"You are just modifying the check. No real benefit is received. Even though we put extra efforts to implement the suggested pattern, the code is still not clean."},{"owner":{"account_id":8081995,"reputation":953,"user_id":6090844,"display_name":"Manoel Campos"},"score":0,"creation_date":1574196789,"post_id":39848137,"comment_id":104143674,"body_markdown":"If you implement the Null Object Pattern, instead of returning null, you should return the NullObject. This way, you don&#39;t need the check. Just call `object.doCalc()`. If the object is the NullObject instance, the `doCalc()` won&#39;t do anything. It will be just an empty implementation of the method.","body":"If you implement the Null Object Pattern, instead of returning null, you should return the NullObject. This way, you don&#39;t need the check. Just call <code>object.doCalc()</code>. If the object is the NullObject instance, the <code>doCalc()</code> won&#39;t do anything. It will be just an empty implementation of the method."},{"owner":{"account_id":1825464,"reputation":1003,"user_id":3152516,"accept_rate":80,"display_name":"Dan Chase"},"score":0,"creation_date":1603163384,"post_id":39848137,"comment_id":113942164,"body_markdown":"You know, you&#39;re basically replacing Null, with your own version of Null, then saying use this version of Null, so you don&#39;t have to use the other one that came with the language  :)","body":"You know, you&#39;re basically replacing Null, with your own version of Null, then saying use this version of Null, so you don&#39;t have to use the other one that came with the language  :)"}],"tags":[],"owner":{"account_id":4583813,"reputation":810,"user_id":3719179,"display_name":"Vidura Mudalige"},"comment_count":3,"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1475571466,"creation_date":1475571466,"answer_id":39848137,"question_id":271526,"body_markdown":"Null object pattern can be used as a solution for this problem. For that, the class of the someObject should be modified. \r\n\r\n    public abstract class SomeObject {\r\n       public abstract boolean isNil();\r\n    }\r\n\r\n    public class NullObject extends SomeObject {\r\n       @Override\r\n       public boolean isNil() {\r\n          return true;\r\n       }\r\n    }\r\n    public class RealObject extends SomeObject {\r\n       @Override\r\n       public boolean isNil() {\r\n          return false;\r\n       }\r\n    }\r\nNow istead of checking,\r\n\r\n     if (someobject != null) {\r\n        someobject.doCalc();\r\n    }\r\n\r\nWe can use,\r\n\r\n    if (!someObject.isNil()) {\r\n       someobject.doCalc();\r\n    }\r\n\r\n\r\nReference : https://www.tutorialspoint.com/design_pattern/null_object_pattern.htm","title":"How do I avoid checking for nulls in Java?","body":"<p>Null object pattern can be used as a solution for this problem. For that, the class of the someObject should be modified. </p>\n\n<pre><code>public abstract class SomeObject {\n   public abstract boolean isNil();\n}\n\npublic class NullObject extends SomeObject {\n   @Override\n   public boolean isNil() {\n      return true;\n   }\n}\npublic class RealObject extends SomeObject {\n   @Override\n   public boolean isNil() {\n      return false;\n   }\n}\n</code></pre>\n\n<p>Now istead of checking,</p>\n\n<pre><code> if (someobject != null) {\n    someobject.doCalc();\n}\n</code></pre>\n\n<p>We can use,</p>\n\n<pre><code>if (!someObject.isNil()) {\n   someobject.doCalc();\n}\n</code></pre>\n\n<p>Reference : <a href=\"https://www.tutorialspoint.com/design_pattern/null_object_pattern.htm\" rel=\"nofollow\">https://www.tutorialspoint.com/design_pattern/null_object_pattern.htm</a></p>\n"},{"tags":[],"owner":{"account_id":5338263,"reputation":5345,"user_id":4256410,"accept_rate":71,"display_name":"Philip John"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1480325390,"creation_date":1480325390,"answer_id":40840957,"question_id":271526,"body_markdown":"Since `Java 7` the class `java.util.Objects` exists.\r\n\r\nBut since `Java 8`, you can use `Objects.isNull(var)` and `Objects.nonNull(var)` methods of `Objects` class to do the null pointer check.\r\n\r\nFor example,\r\n\r\n    String var1 = null;\r\n    Date var2 = null;\r\n    Long var3 = null;\r\n\r\n    if(Objects.isNull(var1) &amp;&amp; Objects.isNull(var2) &amp;&amp; Objects.isNull(var3))\r\n        System.out.println(&quot;All Null&quot;);\r\n    else if (Objects.nonNull(var1) &amp;&amp; Objects.nonNull(var2) &amp;&amp; Objects.nonNull(var3))\r\n        System.out.println(&quot;All Not Null&quot;);\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>Since <code>Java 7</code> the class <code>java.util.Objects</code> exists.</p>\n\n<p>But since <code>Java 8</code>, you can use <code>Objects.isNull(var)</code> and <code>Objects.nonNull(var)</code> methods of <code>Objects</code> class to do the null pointer check.</p>\n\n<p>For example,</p>\n\n<pre><code>String var1 = null;\nDate var2 = null;\nLong var3 = null;\n\nif(Objects.isNull(var1) &amp;&amp; Objects.isNull(var2) &amp;&amp; Objects.isNull(var3))\n    System.out.println(\"All Null\");\nelse if (Objects.nonNull(var1) &amp;&amp; Objects.nonNull(var2) &amp;&amp; Objects.nonNull(var3))\n    System.out.println(\"All Not Null\");\n</code></pre>\n"},{"comments":[{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":0,"creation_date":1499428490,"post_id":44902405,"comment_id":76914876,"body_markdown":"This is not much diferent from `myObject == null` and was introduced in Java8 for `Predicates` in the lambda feature.","body":"This is not much diferent from <code>myObject == null</code> and was introduced in Java8 for <code>Predicates</code> in the lambda feature."},{"owner":{"account_id":12685,"reputation":35096,"user_id":25122,"accept_rate":75,"display_name":"RealHowTo"},"score":0,"creation_date":1539353040,"post_id":44902405,"comment_id":92483833,"body_markdown":"Objects.isNull() is available since Java8 (not Java7)","body":"Objects.isNull() is available since Java8 (not Java7)"},{"owner":{"account_id":3454996,"reputation":5649,"user_id":2893693,"accept_rate":83,"display_name":"J-J"},"score":0,"creation_date":1539384208,"post_id":44902405,"comment_id":92497213,"body_markdown":"@RealHowTo Thankd for pointing it out, I have updated the answer, Actually `Objects` is introduced in java7, `isNull` added to it later.","body":"@RealHowTo Thankd for pointing it out, I have updated the answer, Actually <code>Objects</code> is introduced in java7, <code>isNull</code> added to it later."},{"owner":{"account_id":94576,"reputation":1136,"user_id":258131,"display_name":"Araxia"},"score":1,"creation_date":1652765539,"post_id":44902405,"comment_id":127678420,"body_markdown":"This is a poor usage example for `Objects.isNull`. The `filter` here is superfluous. `Optional.ofNullable()` will return `Optional.empty()` if `name` is `null`, so you could just do: `String nonNullValue = Optional.ofNullable(name).orElse(&quot;DefaultName&quot;);`","body":"This is a poor usage example for <code>Objects.isNull</code>. The <code>filter</code> here is superfluous. <code>Optional.ofNullable()</code> will return <code>Optional.empty()</code> if <code>name</code> is <code>null</code>, so you could just do: <code>String nonNullValue = Optional.ofNullable(name).orElse(&quot;DefaultName&quot;);</code>"}],"tags":[],"owner":{"account_id":3454996,"reputation":5649,"user_id":2893693,"accept_rate":83,"display_name":"J-J"},"comment_count":4,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1652788984,"creation_date":1499161286,"answer_id":44902405,"question_id":271526,"body_markdown":"If you are using java8 or later go for the `isNull(yourObject)` from `java.util.Objects`.\r\n\r\nExample:-\r\n\r\n    String myObject = null;\r\n    \r\n    Objects.isNull(myObject); //will return true\r\n\r\nUsage: The below code returns a non null value (if the name is not null then that value will be returned else the default value will be returned).\r\n\r\n    final String name = &quot;Jobin&quot;;\r\n    String nonNullValue = Optional.ofNullable(name).orElse(&quot;DefaultName&quot;);","title":"How do I avoid checking for nulls in Java?","body":"<p>If you are using java8 or later go for the <code>isNull(yourObject)</code> from <code>java.util.Objects</code>.</p>\n<p>Example:-</p>\n<pre><code>String myObject = null;\n\nObjects.isNull(myObject); //will return true\n</code></pre>\n<p>Usage: The below code returns a non null value (if the name is not null then that value will be returned else the default value will be returned).</p>\n<pre><code>final String name = &quot;Jobin&quot;;\nString nonNullValue = Optional.ofNullable(name).orElse(&quot;DefaultName&quot;);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7072149,"reputation":91,"user_id":5413405,"display_name":"fozzybear"},"score":0,"creation_date":1679502562,"post_id":46644408,"comment_id":133734765,"body_markdown":"It should be noted, that `Optionals` are supposed to be used primarily for return values, as empty Objects to work without consecutive `NPE` problems, not as a replacement for null checks e. g. in legacy or conventional code.","body":"It should be noted, that <code>Optionals</code> are supposed to be used primarily for return values, as empty Objects to work without consecutive <code>NPE</code> problems, not as a replacement for null checks e. g. in legacy or conventional code."}],"tags":[],"owner":{"account_id":11506037,"reputation":1545,"user_id":8432237,"accept_rate":50,"display_name":"NeeruKSingh"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1509368228,"creation_date":1507545333,"answer_id":46644408,"question_id":271526,"body_markdown":"**Java 8 has introduced a new class Optional in java.util package.**\r\n\r\n**Advantages of Java 8 Optional:**\r\n\r\n1.) Null checks are not required.   \r\n2.) No more NullPointerException at run-time.  \r\n3.) We can develop clean and neat APIs.  \r\n\r\n\r\n**Optional** - A container object which may or may not contain a non-null value. If a value is present, isPresent() will return true and get() will return the value.\r\n\r\nFor more details find here oracle docs :-\r\nhttps://docs.oracle.com/javase/8/docs/api/java/util/Optional.html","title":"How do I avoid checking for nulls in Java?","body":"<p><strong>Java 8 has introduced a new class Optional in java.util package.</strong></p>\n\n<p><strong>Advantages of Java 8 Optional:</strong></p>\n\n<p>1.) Null checks are not required.<br>\n2.) No more NullPointerException at run-time.<br>\n3.) We can develop clean and neat APIs.  </p>\n\n<p><strong>Optional</strong> - A container object which may or may not contain a non-null value. If a value is present, isPresent() will return true and get() will return the value.</p>\n\n<p>For more details find here oracle docs :-\n<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html</a></p>\n"},{"comments":[{"owner":{"account_id":6738881,"reputation":1090,"user_id":9163169,"accept_rate":67,"display_name":"Brijesh Mavani"},"score":0,"creation_date":1516208170,"post_id":47285263,"comment_id":83597555,"body_markdown":"explain very well","body":"explain very well"}],"tags":[],"owner":{"account_id":5758401,"reputation":2142,"user_id":4545552,"accept_rate":100,"display_name":"yanefedor"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1510660644,"creation_date":1510660644,"answer_id":47285263,"question_id":271526,"body_markdown":"All in all to avoid statement\n\n    if (object != null) {\n        ....\n    }\n\n 1. since java 7 you can use `Objects` methods:\n\n    Objects.isNull(object)\n\n    Objects.nonNull(object)\n\n    Objects.requireNonNull(object)\n\n    Objects.equals(object1, object2)\n\n 2. since java 8 you can use Optional class ([when to use][1]) \n\n`object.ifPresent(obj -&gt; ...);` java 8\n\n`object.ifPresentOrElse(obj -&gt; ..., () -&gt; ...);` java 9\n\n 3. rely on method contract ([JSR 305][2]) and use [Find Bugs][3]. Mark your code with annotations `@javax.annotation.Nullable` and `@javax.annotation.Nonnnul`. Also Preconditions are available.\n\n    Preconditions.checkNotNull(object);\n\n 4. In special cases (for example for Strings and Collections) you can use apache-commons (or Google guava) utility methods:\n\n&gt; public static boolean isEmpty(CharSequence cs) //apache CollectionUtils\n&gt;\n&gt; public static boolean isEmpty(Collection coll) //apache StringUtils\n&gt;\n&gt; public static boolean isEmpty(Map map) //apache MapUtils\n&gt;\n&gt; public static boolean isNullOrEmpty(@Nullable String string) //Guava Strings\n\n 5. When you need to assign default value when null use apache commons lang\n\n&gt; public static Object defaultIfNull(Object object, Object defaultValue)\n\n  [1]: https://stackoverflow.com/questions/23454952/uses-for-optional\n  [2]: https://minds.coremedia.com/2012/10/31/jsr-305-nonnull-and-guava-preconditions/\n  [3]: http://findbugs.sourceforge.net/","title":"How do I avoid checking for nulls in Java?","body":"<p>All in all to avoid statement</p>\n<pre><code>if (object != null) {\n    ....\n}\n</code></pre>\n<ol>\n<li><p>since java 7 you can use <code>Objects</code> methods:</p>\n<p>Objects.isNull(object)</p>\n<p>Objects.nonNull(object)</p>\n<p>Objects.requireNonNull(object)</p>\n<p>Objects.equals(object1, object2)</p>\n</li>\n<li><p>since java 8 you can use Optional class (<a href=\"https://stackoverflow.com/questions/23454952/uses-for-optional\">when to use</a>)</p>\n</li>\n</ol>\n<p><code>object.ifPresent(obj -&gt; ...);</code> java 8</p>\n<p><code>object.ifPresentOrElse(obj -&gt; ..., () -&gt; ...);</code> java 9</p>\n<ol start=\"3\">\n<li><p>rely on method contract (<a href=\"https://minds.coremedia.com/2012/10/31/jsr-305-nonnull-and-guava-preconditions/\" rel=\"noreferrer\">JSR 305</a>) and use <a href=\"http://findbugs.sourceforge.net/\" rel=\"noreferrer\">Find Bugs</a>. Mark your code with annotations <code>@javax.annotation.Nullable</code> and <code>@javax.annotation.Nonnnul</code>. Also Preconditions are available.</p>\n<p>Preconditions.checkNotNull(object);</p>\n</li>\n<li><p>In special cases (for example for Strings and Collections) you can use apache-commons (or Google guava) utility methods:</p>\n</li>\n</ol>\n<blockquote>\n<p>public static boolean isEmpty(CharSequence cs) //apache CollectionUtils</p>\n<p>public static boolean isEmpty(Collection coll) //apache StringUtils</p>\n<p>public static boolean isEmpty(Map map) //apache MapUtils</p>\n<p>public static boolean isNullOrEmpty(@Nullable String string) //Guava Strings</p>\n</blockquote>\n<ol start=\"5\">\n<li>When you need to assign default value when null use apache commons lang</li>\n</ol>\n<blockquote>\n<p>public static Object defaultIfNull(Object object, Object defaultValue)</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1133925,"reputation":267,"user_id":1119386,"display_name":"Binod Pant"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1514349317,"creation_date":1514349317,"answer_id":47986378,"question_id":271526,"body_markdown":"One Option you have\r\n\r\n* Use [checker framework][1]&#39;s @RequiresNonNull on methods. for ex you get this if you call a method annotated as such, with a null argument. It will fail during compile, even before your code runs! since at runtime it will be NullPointerException\r\n\r\n\r\n        @RequiresNonNull(value = { &quot;#1&quot; })\r\n    \tstatic void check( Boolean x) {\r\n    \t\tif (x) System.out.println(&quot;true&quot;);\r\n    \t\telse System.out.println(&quot;false&quot;);\r\n    \t}\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\t\r\n    \t\t\r\n    \t\tcheck(null);\r\n    \t\t\r\n    \t}\r\n\r\n\r\ngets \r\n\r\n\r\n    [ERROR] found   : null\r\n    [ERROR] required: @Initialized @NonNull Boolean\r\n    [ERROR] -&gt; [Help 1]\r\n\r\n\r\nThere are other methods like Use Java 8&#39;s Optional, Guava Annotations, Null Object pattern etc. Does not matter as long as you obtain your goal of avoiding !=null\r\n\r\n\r\n  [1]: https://checkerframework.org/api/org/checkerframework/checker/nullness/qual/RequiresNonNull.html\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>One Option you have</p>\n\n<ul>\n<li><p>Use <a href=\"https://checkerframework.org/api/org/checkerframework/checker/nullness/qual/RequiresNonNull.html\" rel=\"nofollow noreferrer\">checker framework</a>'s @RequiresNonNull on methods. for ex you get this if you call a method annotated as such, with a null argument. It will fail during compile, even before your code runs! since at runtime it will be NullPointerException</p>\n\n<pre><code>@RequiresNonNull(value = { \"#1\" })\nstatic void check( Boolean x) {\n    if (x) System.out.println(\"true\");\n    else System.out.println(\"false\");\n}\n\npublic static void main(String[] args) {\n\n\n    check(null);\n\n}\n</code></pre></li>\n</ul>\n\n<p>gets </p>\n\n<pre><code>[ERROR] found   : null\n[ERROR] required: @Initialized @NonNull Boolean\n[ERROR] -&gt; [Help 1]\n</code></pre>\n\n<p>There are other methods like Use Java 8's Optional, Guava Annotations, Null Object pattern etc. Does not matter as long as you obtain your goal of avoiding !=null</p>\n"},{"comments":[{"owner":{"account_id":6141709,"reputation":1016,"user_id":4788928,"display_name":"Jeff Bennett"},"score":0,"creation_date":1658436407,"post_id":48671389,"comment_id":129057768,"body_markdown":"At first blush, this looks like a great answer to the problem I&#39;m having, but it suffers from the design-flaw of &quot;don&#39;t use exceptions to control behavior&quot;.  Essentially, it only works because it relies on the &#39;resolve(..)&quot; method intentionally generating an NPE, catching it, and then dealing with it to alter behavior.  That&#39;s just bad.   Might still use it, but looking for a better way.","body":"At first blush, this looks like a great answer to the problem I&#39;m having, but it suffers from the design-flaw of &quot;don&#39;t use exceptions to control behavior&quot;.  Essentially, it only works because it relies on the &#39;resolve(..)&quot; method intentionally generating an NPE, catching it, and then dealing with it to alter behavior.  That&#39;s just bad.   Might still use it, but looking for a better way."}],"tags":[],"owner":{"account_id":236361,"reputation":14191,"user_id":503804,"accept_rate":70,"display_name":"nilesh"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1518030018,"creation_date":1518030018,"answer_id":48671389,"question_id":271526,"body_markdown":"\r\n\r\n\r\nWith Java 8, you could pass a supplier to a helper method like below,\r\n\r\n\r\n    if(CommonUtil.resolve(()-&gt; a.b().c()).isPresent()) {\r\n    \r\n    }\r\n\r\nAbove replaces boiler plate code like below,\r\n\r\n\r\n    if(a!=null &amp;&amp; a.b()!=null &amp;&amp; a.b().c()!=null) {\r\n    \r\n    }\r\n\r\n\r\n//CommonUtil.java\r\n\r\n     public static &lt;T&gt; Optional&lt;T&gt; resolve(Supplier&lt;T&gt; resolver) {\r\n            try {\r\n                T result = resolver.get();\r\n                return Optional.ofNullable(result);\r\n            } catch (NullPointerException var2) {\r\n                return Optional.empty();\r\n            }\r\n        }\r\n\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>With Java 8, you could pass a supplier to a helper method like below,</p>\n\n<pre><code>if(CommonUtil.resolve(()-&gt; a.b().c()).isPresent()) {\n\n}\n</code></pre>\n\n<p>Above replaces boiler plate code like below,</p>\n\n<pre><code>if(a!=null &amp;&amp; a.b()!=null &amp;&amp; a.b().c()!=null) {\n\n}\n</code></pre>\n\n<p>//CommonUtil.java</p>\n\n<pre><code> public static &lt;T&gt; Optional&lt;T&gt; resolve(Supplier&lt;T&gt; resolver) {\n        try {\n            T result = resolver.get();\n            return Optional.ofNullable(result);\n        } catch (NullPointerException var2) {\n            return Optional.empty();\n        }\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8164473,"reputation":4175,"user_id":6147374,"accept_rate":70,"display_name":"Ibo"},"score":0,"creation_date":1531418413,"post_id":51311500,"comment_id":89600423,"body_markdown":"you can see there are a lot of answers with many upvotes, what is special about your answer?","body":"you can see there are a lot of answers with many upvotes, what is special about your answer?"},{"owner":{"account_id":4993121,"reputation":323,"user_id":4014678,"display_name":"Mukesh A"},"score":1,"creation_date":1531418680,"post_id":51311500,"comment_id":89600563,"body_markdown":"I just wanted to add a few more functions made available with `Java 9`.","body":"I just wanted to add a few more functions made available with <code>Java 9</code>."},{"owner":{"account_id":8164473,"reputation":4175,"user_id":6147374,"accept_rate":70,"display_name":"Ibo"},"score":0,"creation_date":1531420294,"post_id":51311500,"comment_id":89601298,"body_markdown":"then emphasize on it with a bold font at the beginning of your post","body":"then emphasize on it with a bold font at the beginning of your post"}],"tags":[],"owner":{"account_id":4993121,"reputation":323,"user_id":4014678,"display_name":"Mukesh A"},"comment_count":3,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1531420431,"creation_date":1531416917,"answer_id":51311500,"question_id":271526,"body_markdown":"You can avoid most a lot to avoid `NullPointerException` by just following most of the others answers to the Question, I just want to add few **more ways which have been introduced in  `Java 9`** to handle this scenario gracefully and also showcase a few of the older ones can also be used and thus reducing your efforts.\r\n\r\n 1. `public static boolean isNull(Object obj)`\r\n    \r\n    Returns true if the provided reference is null otherwise returns\r\n    false.\r\n    \r\n    Since Java 1.8\r\n 2. `public static boolean nonNull(Object obj)`\r\n    \r\n    Returns true if the provided reference is non-null otherwise returns\r\n    false.\r\n    \r\n    Since Java 1.8\r\n\r\n 3. `public static &lt;T&gt; T requireNonNullElse​(T obj, T defaultObj)`\r\n    \r\n    Returns the first argument if it is non-null and otherwise returns\r\n    the non-null second argument.\r\n    \r\n    Since Java 9\r\n\r\n 4. `public static &lt;T&gt; T requireNonNullElseGet​(T obj, Supplier&lt;? extends T&gt; supplier)`\r\n     \r\n     Returns the first argument if it is non-null and otherwise returns the non-null value of supplier.get().\r\n  \r\n     Since Java 9\r\n\r\n 5. `public static &lt;T&gt; T requireNonNull​(T obj, Supplier&lt;String&gt; messageSupplier)`\r\n     \r\n     Checks that the specified object reference is not null and throws a customized NullPointerException otherwise.\r\n\r\n     Since Java 1.8\r\n\r\nFurther details about the above functions can be found [here][1].\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/util/Objects.html#isNull-java.lang.Object-","title":"How do I avoid checking for nulls in Java?","body":"<p>You can avoid most a lot to avoid <code>NullPointerException</code> by just following most of the others answers to the Question, I just want to add few <strong>more ways which have been introduced in  <code>Java 9</code></strong> to handle this scenario gracefully and also showcase a few of the older ones can also be used and thus reducing your efforts.</p>\n\n<ol>\n<li><p><code>public static boolean isNull(Object obj)</code></p>\n\n<p>Returns true if the provided reference is null otherwise returns\nfalse.</p>\n\n<p>Since Java 1.8</p></li>\n<li><p><code>public static boolean nonNull(Object obj)</code></p>\n\n<p>Returns true if the provided reference is non-null otherwise returns\nfalse.</p>\n\n<p>Since Java 1.8</p></li>\n<li><p><code>public static &lt;T&gt; T requireNonNullElse​(T obj, T defaultObj)</code></p>\n\n<p>Returns the first argument if it is non-null and otherwise returns\nthe non-null second argument.</p>\n\n<p>Since Java 9</p></li>\n<li><p><code>public static &lt;T&gt; T requireNonNullElseGet​(T obj, Supplier&lt;? extends T&gt; supplier)</code></p>\n\n<p>Returns the first argument if it is non-null and otherwise returns the non-null value of supplier.get().</p>\n\n<p>Since Java 9</p></li>\n<li><p><code>public static &lt;T&gt; T requireNonNull​(T obj, Supplier&lt;String&gt; messageSupplier)</code></p>\n\n<p>Checks that the specified object reference is not null and throws a customized NullPointerException otherwise.</p>\n\n<p>Since Java 1.8</p></li>\n</ol>\n\n<p>Further details about the above functions can be found <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Objects.html#isNull-java.lang.Object-\" rel=\"noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":5475193,"reputation":6876,"user_id":4353365,"display_name":"Francis"},"comment_count":0,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1534802753,"creation_date":1534802753,"answer_id":51939089,"question_id":271526,"body_markdown":"[Kotlin][1] with null safety is elegant alternative, but it means a larger change.\r\n\r\n\r\n  [1]: https://kotlinlang.org","title":"How do I avoid checking for nulls in Java?","body":"<p><a href=\"https://kotlinlang.org\" rel=\"nofollow noreferrer\">Kotlin</a> with null safety is elegant alternative, but it means a larger change.</p>\n"},{"tags":[],"owner":{"account_id":9762174,"reputation":195,"user_id":7236932,"display_name":"Ramprabhu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1546496486,"creation_date":1546496486,"answer_id":54017256,"question_id":271526,"body_markdown":"Functional approach may help to wrap the repetitive null checks and execute anonymous code like the below sample.\r\n\r\n        BiConsumer&lt;Object, Consumer&lt;Object&gt;&gt; consumeIfPresent  = (s,f) -&gt;{\r\n\t\t\tif(s!=null) {\r\n\t\t\t\tf.accept(s);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tconsumeIfPresent.accept(null, (s)-&gt; System.out.println(s) );\r\n\t\tconsumeIfPresent.accept(&quot;test&quot;, (s)-&gt; System.out.println(s));\r\n\r\n        BiFunction&lt;Object, Function&lt;Object,Object&gt;,Object&gt; executeIfPresent  = (a,b) -&gt;{\r\n\t\t\tif(a!=null) {\r\n\t\t\t\treturn b.apply(a);\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t};\r\n\t\texecuteIfPresent.apply(null, (s)-&gt; {System.out.println(s);return s;} );\r\n\t\texecuteIfPresent.apply(&quot;test&quot;, (s)-&gt; {System.out.println(s);return s;} );\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>Functional approach may help to wrap the repetitive null checks and execute anonymous code like the below sample.</p>\n\n<pre><code>    BiConsumer&lt;Object, Consumer&lt;Object&gt;&gt; consumeIfPresent  = (s,f) -&gt;{\n        if(s!=null) {\n            f.accept(s);\n        }\n    };\n\n    consumeIfPresent.accept(null, (s)-&gt; System.out.println(s) );\n    consumeIfPresent.accept(\"test\", (s)-&gt; System.out.println(s));\n\n    BiFunction&lt;Object, Function&lt;Object,Object&gt;,Object&gt; executeIfPresent  = (a,b) -&gt;{\n        if(a!=null) {\n            return b.apply(a);\n        }\n        return null;\n    };\n    executeIfPresent.apply(null, (s)-&gt; {System.out.println(s);return s;} );\n    executeIfPresent.apply(\"test\", (s)-&gt; {System.out.println(s);return s;} );\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1628551,"reputation":2314,"user_id":1503554,"accept_rate":43,"display_name":"ThisIsNoZaku"},"score":0,"creation_date":1565036656,"post_id":56145630,"comment_id":101217519,"body_markdown":"You can get the value by using `map` combined with `get` or any of the other methods for getting the value in the Optional, instead of `ifPresent`.","body":"You can get the value by using <code>map</code> combined with <code>get</code> or any of the other methods for getting the value in the Optional, instead of <code>ifPresent</code>."}],"tags":[],"owner":{"account_id":3311659,"reputation":449,"user_id":2785025,"display_name":"SebastianBrandt"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1557911962,"creation_date":1557911640,"answer_id":56145630,"question_id":271526,"body_markdown":"Another alternative to the != null check is (if you can&#39;t get rid of it design-wise):\r\n\r\n    Optional.ofNullable(someobject).ifPresent(someobject -&gt; someobject.doCalc());\r\n\r\nor\r\n\r\n    Optional.ofNullable(someobject).ifPresent(SomeClass::doCalc);\r\n\r\nWith SomeClass being someobject&#39;s type.\r\n\r\nYou can&#39;t get a return value back from doCalc() though, so only useful for void methods.","title":"How do I avoid checking for nulls in Java?","body":"<p>Another alternative to the != null check is (if you can't get rid of it design-wise):</p>\n\n<pre><code>Optional.ofNullable(someobject).ifPresent(someobject -&gt; someobject.doCalc());\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Optional.ofNullable(someobject).ifPresent(SomeClass::doCalc);\n</code></pre>\n\n<p>With SomeClass being someobject's type.</p>\n\n<p>You can't get a return value back from doCalc() though, so only useful for void methods.</p>\n"},{"tags":[],"owner":{"account_id":7984646,"reputation":565,"user_id":6024604,"accept_rate":0,"display_name":"rohit prakash"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1606296326,"creation_date":1560256796,"answer_id":56543966,"question_id":271526,"body_markdown":"Java 8 has introduced a new class Optional in `java.util` package. It is used to represent a value is present or absent. The main advantage of this new construct is that No more too many null checks and `NullPointerException`. It avoids any runtime `NullPointerExceptions` and supports us in developing clean and neat Java APIs or Applications. Like `Collections` and `arrays`, it is also a Container to hold at most one value.\r\n\r\nBelow are some useful link you can follow\r\n\r\n[https://www.mkyong.com/java8/java-8-optional-in-depth/][1]\r\n\r\n\r\n[https://dzone.com/articles/java-8-optional-avoid-null-and][2]\r\n\r\n\r\n  [1]: https://www.mkyong.com/java8/java-8-optional-in-depth/\r\n  [2]: https://dzone.com/articles/java-8-optional-avoid-null-and","title":"How do I avoid checking for nulls in Java?","body":"<p>Java 8 has introduced a new class Optional in <code>java.util</code> package. It is used to represent a value is present or absent. The main advantage of this new construct is that No more too many null checks and <code>NullPointerException</code>. It avoids any runtime <code>NullPointerExceptions</code> and supports us in developing clean and neat Java APIs or Applications. Like <code>Collections</code> and <code>arrays</code>, it is also a Container to hold at most one value.</p>\n<p>Below are some useful link you can follow</p>\n<p><a href=\"https://www.mkyong.com/java8/java-8-optional-in-depth/\" rel=\"nofollow noreferrer\">https://www.mkyong.com/java8/java-8-optional-in-depth/</a></p>\n<p><a href=\"https://dzone.com/articles/java-8-optional-avoid-null-and\" rel=\"nofollow noreferrer\">https://dzone.com/articles/java-8-optional-avoid-null-and</a></p>\n"},{"tags":[],"owner":{"account_id":16712867,"reputation":150,"user_id":12079719,"display_name":"Satish Hawalppagol"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596967948,"creation_date":1596967948,"answer_id":63325067,"question_id":271526,"body_markdown":"You can make one generic Method for object and string so that you can use it through out in your application-\r\nThis could help you and your colleagues : \r\nCreate a class eg. StringUtilities and add the method eg. getNullString\r\n \r\n    public static String getNullString(Object someobject)\r\n    {\r\n\t   if(null==someobject )\r\n\t\t    return null;\r\n\r\n\t   else if(someobject.getClass().isInstance(&quot;&quot;) &amp;&amp; \r\n              (((String)someobject).trim().equalsIgnoreCase(&quot;null&quot;)|| \r\n              ((String)someobject).trim().equalsIgnoreCase(&quot;&quot;)))\r\n\t        return null;\r\n\r\n\t   else if(someobject.getClass().isInstance(&quot;&quot;))\r\n\t        return (String)someobject;\r\n\r\n\t   else\r\n\t        return someobject.toString().trim();\r\n    }\r\n\r\nAnd simply call this method as,\r\n\r\n\tif (StringUtilities.getNullString(someobject) != null)\r\n    { \r\n      //Do something\r\n    }\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>You can make one generic Method for object and string so that you can use it through out in your application-\nThis could help you and your colleagues :\nCreate a class eg. StringUtilities and add the method eg. getNullString</p>\n<pre><code>public static String getNullString(Object someobject)\n{\n   if(null==someobject )\n        return null;\n\n   else if(someobject.getClass().isInstance(&quot;&quot;) &amp;&amp; \n          (((String)someobject).trim().equalsIgnoreCase(&quot;null&quot;)|| \n          ((String)someobject).trim().equalsIgnoreCase(&quot;&quot;)))\n        return null;\n\n   else if(someobject.getClass().isInstance(&quot;&quot;))\n        return (String)someobject;\n\n   else\n        return someobject.toString().trim();\n}\n</code></pre>\n<p>And simply call this method as,</p>\n<pre><code>if (StringUtilities.getNullString(someobject) != null)\n{ \n  //Do something\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2787201,"reputation":513,"user_id":2398263,"accept_rate":75,"display_name":"Brian_Entei"},"score":0,"creation_date":1626268194,"post_id":64437815,"comment_id":120847015,"body_markdown":"Is myvar a boolean or a String in this case? I&#39;m having trouble figuring out what you mean by `!myvar` if `myvar.length()` is present. Is that perhaps the way null is checked for in other languages?","body":"Is myvar a boolean or a String in this case? I&#39;m having trouble figuring out what you mean by <code>!myvar</code> if <code>myvar.length()</code> is present. Is that perhaps the way null is checked for in other languages?"},{"owner":{"account_id":1825464,"reputation":1003,"user_id":3152516,"accept_rate":80,"display_name":"Dan Chase"},"score":1,"creation_date":1626283269,"post_id":64437815,"comment_id":120853849,"body_markdown":"@Brian_Entei !myvar should resolve to (myvar != true), and since NULL is never equal to anything, if it is NULL, it will resolve correctly and !myvar should catch it. I believe this is viable in most languages. Basically I&#39;m checking to make sure it&#39;s not null, if it is, that short-circuits the secondary check for length. If it is not null, then it checks the length of the variable. In this case it would be a string. More the overall null check vs. exception, I didn&#39;t pay too much attention on the language.","body":"@Brian_Entei !myvar should resolve to (myvar != true), and since NULL is never equal to anything, if it is NULL, it will resolve correctly and !myvar should catch it. I believe this is viable in most languages. Basically I&#39;m checking to make sure it&#39;s not null, if it is, that short-circuits the secondary check for length. If it is not null, then it checks the length of the variable. In this case it would be a string. More the overall null check vs. exception, I didn&#39;t pay too much attention on the language."},{"owner":{"account_id":2787201,"reputation":513,"user_id":2398263,"accept_rate":75,"display_name":"Brian_Entei"},"score":0,"creation_date":1626301964,"post_id":64437815,"comment_id":120859734,"body_markdown":"Ah, I see. In Java, attempting to use a `!` operator on anything other than a primitive boolean (or a Boolean object with auto-unboxing) or an expression would result in a syntax error and wouldn&#39;t compile, so I was confused. Thanks for the clarification.","body":"Ah, I see. In Java, attempting to use a <code>!</code> operator on anything other than a primitive boolean (or a Boolean object with auto-unboxing) or an expression would result in a syntax error and wouldn&#39;t compile, so I was confused. Thanks for the clarification."},{"owner":{"account_id":1825464,"reputation":1003,"user_id":3152516,"accept_rate":80,"display_name":"Dan Chase"},"score":1,"creation_date":1626416891,"post_id":64437815,"comment_id":120891673,"body_markdown":"@Brian_Entei Interesting! Thank you, now I&#39;m realizing since the answer was for Java, I should have taken more care to stick to Java syntax. Sorry!","body":"@Brian_Entei Interesting! Thank you, now I&#39;m realizing since the answer was for Java, I should have taken more care to stick to Java syntax. Sorry!"}],"tags":[],"owner":{"account_id":1825464,"reputation":1003,"user_id":3152516,"accept_rate":80,"display_name":"Dan Chase"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626416942,"creation_date":1603162603,"answer_id":64437815,"question_id":271526,"body_markdown":"The best way to avoid Null Checks in Java, is to properly handle and use exceptions. Null Checks in my experience have become more common and required as you move closer to the front-end, because it&#39;s closer to the user who may supply invalid information through the UI (such as, no value, being submitted for a field). \r\n\r\nOne may argue that you should be able to control what the UI is doing, lest you forget most UI is done through a third party library of some kind, which for example, may return either NULL or an Empty String for a blank text box, depending on the situation or the library.\r\n\r\nYou can combine the two like this:\r\n\r\n    try\r\n    {\r\n      myvar = get_user_supplied_value(); \r\n      if (myvar == null || myvar.length() == 0) { alert_the_user_somehow(); return; };\r\n    \r\n      process_user_input(myvar);\r\n    } catch (Exception ex) {\r\n      handle_exception(ex);\r\n    }\r\n\r\nAnother approach people take is to say:\r\n\r\n    if (myvar &amp;&amp; myvar.length() &gt; 0)  { };\r\n\r\nYou could also throw an exception (which is what I prefer)\r\n\r\n    if (myvar == null || myvar.length() == 0) {\r\n     throw new Exception(&quot;You must supply a name!&quot;);\r\n    };\r\n\r\nBut that&#39;s up to you.\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>The best way to avoid Null Checks in Java, is to properly handle and use exceptions. Null Checks in my experience have become more common and required as you move closer to the front-end, because it's closer to the user who may supply invalid information through the UI (such as, no value, being submitted for a field).</p>\n<p>One may argue that you should be able to control what the UI is doing, lest you forget most UI is done through a third party library of some kind, which for example, may return either NULL or an Empty String for a blank text box, depending on the situation or the library.</p>\n<p>You can combine the two like this:</p>\n<pre><code>try\n{\n  myvar = get_user_supplied_value(); \n  if (myvar == null || myvar.length() == 0) { alert_the_user_somehow(); return; };\n\n  process_user_input(myvar);\n} catch (Exception ex) {\n  handle_exception(ex);\n}\n</code></pre>\n<p>Another approach people take is to say:</p>\n<pre><code>if (myvar &amp;&amp; myvar.length() &gt; 0)  { };\n</code></pre>\n<p>You could also throw an exception (which is what I prefer)</p>\n<pre><code>if (myvar == null || myvar.length() == 0) {\n throw new Exception(&quot;You must supply a name!&quot;);\n};\n</code></pre>\n<p>But that's up to you.</p>\n"},{"tags":[],"owner":{"account_id":17532494,"reputation":88,"user_id":12716256,"display_name":"Allen"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1624649260,"creation_date":1603247013,"answer_id":64455793,"question_id":271526,"body_markdown":"There has a good way to check the null value from JDK.\r\nIt is Optional.java that has a sea of methods to resolve these problems. Such as follow:\r\n\r\n```\r\n    /**\r\n     * Returns an {@code Optional} describing the specified value, if non-null,\r\n     * otherwise returns an empty {@code Optional}.\r\n     *\r\n     * @param &lt;T&gt; the class of the value\r\n     * @param value the possibly-null value to describe\r\n     * @return an {@code Optional} with a present value if the specified value\r\n     * is non-null, otherwise an empty {@code Optional}\r\n     */\r\n    public static &lt;T&gt; Optional&lt;T&gt; ofNullable(T value) {\r\n        return value == null ? empty() : of(value);\r\n    }\r\n```\r\n```\r\n    /**\r\n     * Return {@code true} if there is a value present, otherwise {@code false}.\r\n     *\r\n     * @return {@code true} if there is a value present, otherwise {@code false}\r\n     */\r\n    public boolean isPresent() {\r\n        return value != null;\r\n    }\r\n```\r\n```\r\n    /**\r\n     * If a value is present, invoke the specified consumer with the value,\r\n     * otherwise do nothing.\r\n     *\r\n     * @param consumer block to be executed if a value is present\r\n     * @throws NullPointerException if value is present and {@code consumer} is\r\n     * null\r\n     */\r\n    public void ifPresent(Consumer&lt;? super T&gt; consumer) {\r\n        if (value != null)\r\n            consumer.accept(value);\r\n    }\r\n```\r\n\r\n   It is really, really useful to help javer.\r\n\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>There has a good way to check the null value from JDK.\nIt is Optional.java that has a sea of methods to resolve these problems. Such as follow:</p>\n<pre><code>    /**\n     * Returns an {@code Optional} describing the specified value, if non-null,\n     * otherwise returns an empty {@code Optional}.\n     *\n     * @param &lt;T&gt; the class of the value\n     * @param value the possibly-null value to describe\n     * @return an {@code Optional} with a present value if the specified value\n     * is non-null, otherwise an empty {@code Optional}\n     */\n    public static &lt;T&gt; Optional&lt;T&gt; ofNullable(T value) {\n        return value == null ? empty() : of(value);\n    }\n</code></pre>\n<pre><code>    /**\n     * Return {@code true} if there is a value present, otherwise {@code false}.\n     *\n     * @return {@code true} if there is a value present, otherwise {@code false}\n     */\n    public boolean isPresent() {\n        return value != null;\n    }\n</code></pre>\n<pre><code>    /**\n     * If a value is present, invoke the specified consumer with the value,\n     * otherwise do nothing.\n     *\n     * @param consumer block to be executed if a value is present\n     * @throws NullPointerException if value is present and {@code consumer} is\n     * null\n     */\n    public void ifPresent(Consumer&lt;? super T&gt; consumer) {\n        if (value != null)\n            consumer.accept(value);\n    }\n</code></pre>\n<p>It is really, really useful to help javer.</p>\n"},{"tags":[],"owner":{"account_id":13844472,"reputation":1602,"user_id":9993935,"display_name":"vidy"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1604907009,"creation_date":1604907009,"answer_id":64747393,"question_id":271526,"body_markdown":"    public class Null {\r\n\r\n    public static void main(String[] args) {\r\n        String str1 = null;\r\n        String str2 = &quot;&quot;;\r\n\r\n        if(isNullOrEmpty(str1))\r\n            System.out.println(&quot;First string is null or empty.&quot;);\r\n        else\r\n            System.out.println(&quot;First string is not null or empty.&quot;);\r\n\r\n        if(isNullOrEmpty(str2))\r\n            System.out.println(&quot;Second string is null or empty.&quot;);\r\n        else\r\n            System.out.println(&quot;Second string is not null or empty.&quot;);\r\n    }\r\n\r\n    public static boolean isNullOrEmpty(String str) {\r\n        if(str != null &amp;&amp; !str.isEmpty())\r\n            return false;\r\n        return true;\r\n    }\r\n    }\r\n\r\nOutput\r\n\r\n    str1 is null or empty.\r\n    str2 is null or empty.\r\n\r\nIn the above program, we&#39;ve two strings str1 and str2. str1 contains null value and str2 is an empty string.\r\n\r\nWe&#39;ve also created a function isNullOrEmpty() which checks, as the name suggests, whether the string is null or empty. It checks it using a null check using != null and isEmpty() method of string.\r\n\r\nIn plain terms, if a string isn&#39;t a null and isEmpty() returns false, it&#39;s not either null or empty. Else, it is.\r\n\r\nHowever, the above program doesn&#39;t return empty if a string contains only whitespace characters (spaces). Technically, isEmpty() sees it contains spaces and returns false. For string with spaces, we use the string method trim() to trim out all the leading and trailing whitespace characters.\r\n\r\n","title":"How do I avoid checking for nulls in Java?","body":"<pre><code>public class Null {\n\npublic static void main(String[] args) {\n    String str1 = null;\n    String str2 = &quot;&quot;;\n\n    if(isNullOrEmpty(str1))\n        System.out.println(&quot;First string is null or empty.&quot;);\n    else\n        System.out.println(&quot;First string is not null or empty.&quot;);\n\n    if(isNullOrEmpty(str2))\n        System.out.println(&quot;Second string is null or empty.&quot;);\n    else\n        System.out.println(&quot;Second string is not null or empty.&quot;);\n}\n\npublic static boolean isNullOrEmpty(String str) {\n    if(str != null &amp;&amp; !str.isEmpty())\n        return false;\n    return true;\n}\n}\n</code></pre>\n<p>Output</p>\n<pre><code>str1 is null or empty.\nstr2 is null or empty.\n</code></pre>\n<p>In the above program, we've two strings str1 and str2. str1 contains null value and str2 is an empty string.</p>\n<p>We've also created a function isNullOrEmpty() which checks, as the name suggests, whether the string is null or empty. It checks it using a null check using != null and isEmpty() method of string.</p>\n<p>In plain terms, if a string isn't a null and isEmpty() returns false, it's not either null or empty. Else, it is.</p>\n<p>However, the above program doesn't return empty if a string contains only whitespace characters (spaces). Technically, isEmpty() sees it contains spaces and returns false. For string with spaces, we use the string method trim() to trim out all the leading and trailing whitespace characters.</p>\n"},{"tags":[],"owner":{"account_id":7459183,"reputation":75,"user_id":5671333,"display_name":"Premakumar Tatireddy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636976431,"creation_date":1636975999,"answer_id":69973748,"question_id":271526,"body_markdown":"`Objects.isNull(null)`\r\nIf you are using Java8 then you can try this code.\r\n\r\n&gt; Try using below code if you are not using Java8\r\n\r\n    Object ob=null;\r\n    if(ob==null){ **do something}","title":"How do I avoid checking for nulls in Java?","body":"<p><code>Objects.isNull(null)</code>\nIf you are using Java8 then you can try this code.</p>\n<blockquote>\n<p>Try using below code if you are not using Java8</p>\n</blockquote>\n<pre><code>Object ob=null;\nif(ob==null){ **do something}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8258680,"reputation":317,"user_id":6210975,"display_name":"Greg7000"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653998447,"creation_date":1653924886,"answer_id":72436784,"question_id":271526,"body_markdown":"Personally, I would either go with [jim-nelson&#39;s answer][1] or if I do find a null check is convenient for a specific context I would incorporate [lombok][1] into my project and use the [@NonNull][3] annotation.\r\n\r\nExample: \r\n\r\n    import lombok.NonNull;\r\n    \r\n    public class NonNullExample extends Something {\r\n      private String name;\r\n      \r\n      public NonNullExample(@NonNull Person person) {\r\n        super(&quot;Hello&quot;);\r\n        this.name = person.getName();\r\n      }\r\n    }\r\n\r\nEven the [@NonNull][3] preface mention:\r\n\r\n - *or: How I learned to stop worrying and love the NullPointerException.*\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/271553/6210975\r\n  [2]: https://projectlombok.org/\r\n  [3]: https://projectlombok.org/features/NonNull\r\n","title":"How do I avoid checking for nulls in Java?","body":"<p>Personally, I would either go with <a href=\"https://stackoverflow.com/a/271553/6210975\">jim-nelson's answer</a> or if I do find a null check is convenient for a specific context I would incorporate <a href=\"https://stackoverflow.com/a/271553/6210975\">lombok</a> into my project and use the <a href=\"https://projectlombok.org/features/NonNull\" rel=\"nofollow noreferrer\">@NonNull</a> annotation.</p>\n<p>Example:</p>\n<pre><code>import lombok.NonNull;\n\npublic class NonNullExample extends Something {\n  private String name;\n  \n  public NonNullExample(@NonNull Person person) {\n    super(&quot;Hello&quot;);\n    this.name = person.getName();\n  }\n}\n</code></pre>\n<p>Even the <a href=\"https://projectlombok.org/features/NonNull\" rel=\"nofollow noreferrer\">@NonNull</a> preface mention:</p>\n<ul>\n<li><em>or: How I learned to stop worrying and love the NullPointerException.</em></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":16297526,"reputation":193,"user_id":11769408,"display_name":"Geoffrey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697818459,"creation_date":1697818459,"answer_id":77332398,"question_id":271526,"body_markdown":"This is a big question ans the only valid answer is: **You cannot avoid to check for null in java**.\r\n\r\nThe issue comes from the language syntax itself, an object can always be both typed or null. Even an Optional object can be null.\r\n\r\nAll of the other proposals (annotations, optional ...) add just more boilerplate code around the issue but never really solve it. And even worse will add more and more complexity and corner cases to handle manually.\r\n\r\nThe only viable solution is to **not** write the boilerplate yourself and let another tool do it for you. That is when you use Kotlin. null safety was a major concern when they designed the language.\r\n\r\nAlso the java syntax will never change so deeply because it will imply some major breaking changes, creating a new language in fact (what kotlin already did at the end).\r\n\r\nThat is the major reason why so many companies moved to kotlin recently. Check some articles about Facebook, Google android ...\r\n\r\nAnd one of the major issue in the java world is that many people learned java so long ago that they are emotionally attached to it and don&#39;t want to change their habit. So they try to justify their weird and obsolete pattern instead of just using a meta language, like TypeScript for JavaScript in the frontend world.","title":"How do I avoid checking for nulls in Java?","body":"<p>This is a big question ans the only valid answer is: <strong>You cannot avoid to check for null in java</strong>.</p>\n<p>The issue comes from the language syntax itself, an object can always be both typed or null. Even an Optional object can be null.</p>\n<p>All of the other proposals (annotations, optional ...) add just more boilerplate code around the issue but never really solve it. And even worse will add more and more complexity and corner cases to handle manually.</p>\n<p>The only viable solution is to <strong>not</strong> write the boilerplate yourself and let another tool do it for you. That is when you use Kotlin. null safety was a major concern when they designed the language.</p>\n<p>Also the java syntax will never change so deeply because it will imply some major breaking changes, creating a new language in fact (what kotlin already did at the end).</p>\n<p>That is the major reason why so many companies moved to kotlin recently. Check some articles about Facebook, Google android ...</p>\n<p>And one of the major issue in the java world is that many people learned java so long ago that they are emotionally attached to it and don't want to change their habit. So they try to justify their weird and obsolete pattern instead of just using a meta language, like TypeScript for JavaScript in the frontend world.</p>\n"},{"tags":[],"owner":{"account_id":6467614,"reputation":300,"user_id":6191695,"display_name":"Sahi Repswal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699450894,"creation_date":1699450894,"answer_id":77446048,"question_id":271526,"body_markdown":"It can be handled by this:\r\n\r\n    import org.apache.commons.lang.ObjectUtils;\r\n    if(!ObjectUtils.equals(x, null)){\r\n    \r\n    }","title":"How do I avoid checking for nulls in Java?","body":"<p>It can be handled by this:</p>\n<pre><code>import org.apache.commons.lang.ObjectUtils;\nif(!ObjectUtils.equals(x, null)){\n\n}\n</code></pre>\n"}],"owner":{"account_id":16138,"reputation":3807,"user_id":34856,"display_name":"Goran Martinic"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1428846,"favorite_count":0,"down_vote_count":17,"up_vote_count":4413,"accepted_answer_id":271874,"answer_count":68,"score":4396,"last_activity_date":1699450894,"creation_date":1226046700,"question_id":271526,"body_markdown":"I use `x != null` to avoid [`NullPointerException`][1]. Is there an alternative?\r\n\r\n```java\r\nif (x != null) {\r\n    // ...\r\n}\r\n``` \r\n\r\n[1]:https://docs.oracle.com/javase/9/docs/api/java/lang/NullPointerException.html","title":"How do I avoid checking for nulls in Java?","body":"<p>I use <code>x != null</code> to avoid <a href=\"https://docs.oracle.com/javase/9/docs/api/java/lang/NullPointerException.html\" rel=\"noreferrer\"><code>NullPointerException</code></a>. Is there an alternative?</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (x != null) {\n    // ...\n}\n</code></pre>\n"},{"tags":["java","spring-webflux","project-reactor","spring-webclient","reactor-netty"],"owner":{"account_id":11598561,"reputation":2332,"user_id":8496502,"display_name":"Deekshith Anand"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699450583,"creation_date":1699450583,"question_id":77445998,"body_markdown":"So the query is I have a webclient call to be made. Under the hood, I have configured something like this for logging the request and response using httpClient&#39;s wiretap method.\r\n\r\nBut I believe this reads response in chunks and logs accordingly. But the logs are really messy like sample below\r\n\r\n    18:47:04.905 [reactor-http-nio-4] INFO  reactor.netty.http.client.HttpClient -  READ: 211B \r\n    CD\r\n    ,&quot;httpHeaders&quot;:{},&quot;httpStatusCode&quot;:400,{&quot;body&quot;:[{&quot;errorCode&quot;:&quot;PROCESSING_HALTED&quot;,&quot;message&quot;:&quot;The transaction was rolled back since another operation in the same transaction failed.&quot;}]\r\n    18:47:04.905 [reactor-http-nio-4] INFO  reactor.netty.http.client.HttpClient -  READ: 69B \r\n    3F\r\n    ,&quot;httpHeaders&quot;:{},&quot;httpStatusCode&quot;:400]}\r\n    18:47:04.905 [reactor-http-nio-4] INFO  reactor.netty.http.client.HttpClient - [df70615d-1, L:/172.30.141.56:57290 - R:goodyearmvp--beta.sandbox.my.salesforce.com/136.146.23.39:443] READ: 7B \r\n    0\r\n\r\nI don&#39;t really mind if the httpClient reads the response in chunks or at once, but is it possible to log the response at once, after the response is fully avaiable?\r\n\r\nThanks in advance!\r\n","title":"Reactor Netty log entire request at once using httpClient","body":"<p>So the query is I have a webclient call to be made. Under the hood, I have configured something like this for logging the request and response using httpClient's wiretap method.</p>\n<p>But I believe this reads response in chunks and logs accordingly. But the logs are really messy like sample below</p>\n<pre><code>18:47:04.905 [reactor-http-nio-4] INFO  reactor.netty.http.client.HttpClient -  READ: 211B \nCD\n,&quot;httpHeaders&quot;:{},&quot;httpStatusCode&quot;:400,{&quot;body&quot;:[{&quot;errorCode&quot;:&quot;PROCESSING_HALTED&quot;,&quot;message&quot;:&quot;The transaction was rolled back since another operation in the same transaction failed.&quot;}]\n18:47:04.905 [reactor-http-nio-4] INFO  reactor.netty.http.client.HttpClient -  READ: 69B \n3F\n,&quot;httpHeaders&quot;:{},&quot;httpStatusCode&quot;:400]}\n18:47:04.905 [reactor-http-nio-4] INFO  reactor.netty.http.client.HttpClient - [df70615d-1, L:/172.30.141.56:57290 - R:goodyearmvp--beta.sandbox.my.salesforce.com/136.146.23.39:443] READ: 7B \n0\n</code></pre>\n<p>I don't really mind if the httpClient reads the response in chunks or at once, but is it possible to log the response at once, after the response is fully avaiable?</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","xmlhttprequest","sonarqube","apache-httpclient-4.x"],"comments":[{"owner":{"account_id":1308572,"reputation":2389,"user_id":1257062,"display_name":"Rizwan"},"score":1,"creation_date":1507013864,"post_id":46538316,"comment_id":80031837,"body_markdown":"Are you able to login with those credential on the Sonar portal?","body":"Are you able to login with those credential on the Sonar portal?"},{"owner":{"account_id":10509808,"reputation":475,"user_id":7745881,"accept_rate":43,"display_name":"MaXon"},"score":0,"creation_date":1507028204,"post_id":46538316,"comment_id":80039788,"body_markdown":"@Rizwan yes, I&#39;m using the default login info which is login:admin, pwd:admin","body":"@Rizwan yes, I&#39;m using the default login info which is login:admin, pwd:admin"},{"owner":{"account_id":10509808,"reputation":475,"user_id":7745881,"accept_rate":43,"display_name":"MaXon"},"score":0,"creation_date":1507028380,"post_id":46538316,"comment_id":80039891,"body_markdown":"I&#39;m even able to log in when I call `request.open(&quot;POST&quot;, &quot;http://localhost:9000/api/authentication/login?login=admin&amp;password=admin&quot;, true);`","body":"I&#39;m even able to log in when I call <code>request.open(&quot;POST&quot;, &quot;http:&#47;&#47;localhost:9000&#47;api&#47;authentication&#47;login?login=admin&amp;&zwnj;&#8203;password=admin&quot;, true);</code>"},{"owner":{"account_id":1308572,"reputation":2389,"user_id":1257062,"display_name":"Rizwan"},"score":0,"creation_date":1507031925,"post_id":46538316,"comment_id":80041941,"body_markdown":"can you track the network call happening when you invoke via java/js client Fiddler can give you details about the header and as well.","body":"can you track the network call happening when you invoke via java/js client Fiddler can give you details about the header and as well."},{"owner":{"account_id":10509808,"reputation":475,"user_id":7745881,"accept_rate":43,"display_name":"MaXon"},"score":0,"creation_date":1507033976,"post_id":46538316,"comment_id":80043303,"body_markdown":"@Rizwan In response header, I got this:\n\n    `Content-Length:0`\n    `Date:Tue, 03 Oct 2017 12:31:27 GMT`\n    `X-Content-Type-Options:nosniff`\n   `X-Frame-Options:SAMEORIGIN`\n    `X-XSS-Protection:1; mode=block`","body":"@Rizwan In response header, I got this:      <code>Content-Length:0</code>     <code>Date:Tue, 03 Oct 2017 12:31:27 GMT</code>     <code>X-Content-Type-Options:nosniff</code>    <code>X-Frame-Options:SAMEORIGIN</code>     <code>X-XSS-Protection:1; mode=block</code>"},{"owner":{"account_id":1308572,"reputation":2389,"user_id":1257062,"display_name":"Rizwan"},"score":0,"creation_date":1507045807,"post_id":46538316,"comment_id":80051371,"body_markdown":"I think the curl request is not correctly formed for the POST call with the field/form parameter, instead it is query parameter.. can you try to tweak and see what’s the result? Use -F ‘key=value’","body":"I think the curl request is not correctly formed for the POST call with the field/form parameter, instead it is query parameter.. can you try to tweak and see what’s the result? Use -F ‘key=value’"}],"answers":[{"comments":[{"owner":{"account_id":1469277,"reputation":2289,"user_id":1381241,"accept_rate":80,"display_name":"Sumit"},"score":0,"creation_date":1543449249,"post_id":46555628,"comment_id":93928282,"body_markdown":"Thanks for this\n\n\n```\nI&#39;ve tried some online base64 encoding and decoding tool, but the result doesn&#39;t match what I got from the CURL method, So if you are struggling on this, run CURL to get your encoded header and pass it in! If anyone could explain a better version, that would be great!\n```","body":"Thanks for this   ``` I&#39;ve tried some online base64 encoding and decoding tool, but the result doesn&#39;t match what I got from the CURL method, So if you are struggling on this, run CURL to get your encoded header and pass it in! If anyone could explain a better version, that would be great! ```"}],"tags":[],"owner":{"account_id":10509808,"reputation":475,"user_id":7745881,"accept_rate":43,"display_name":"MaXon"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1507079655,"creation_date":1507079655,"answer_id":46555628,"question_id":46538316,"body_markdown":"For anyone who got the same issue. I&#39;ve got it working on Java code, Here is my code\r\n\r\n    HttpPost post = new HttpPost(&quot;http://localhost:9000/api/qualityprofiles/copy?fromKey=AV7dToVK_BWPTtE1c9vU&amp;toName=testtt&quot;);\r\n    post.setHeader(&quot;Authorization&quot;, &quot;Basic ZGViM2RkNDE1MmM1NzFiY2RiN2I5NjVlMWQ5OWIyM2E0ZTVjOTUwNTo=&quot;); \r\n    try(CloseableHttpClient httpClient = HttpClients.createDefault();\r\n            CloseableHttpResponse response = httpClient.execute(post);) {\r\n\r\n        System.out.println(response.getStatusLine());\r\n    }\r\n\r\nYou may notice I&#39;ve added a line which sets the header. I&#39;ve done something similar before to encode my login and password to this base64 format, but  they all not working somehow. This working encoded string was taking from the CURL method. (from my second update)\r\n\r\nI&#39;ve tried some online base64 encoding and decoding tool, but the result doesn&#39;t match what I got from the CURL method, So if you are struggling on this, run CURL to get your encoded header and pass it in! If anyone could explain a better version, that would be great!\r\n\r\nAlso, I&#39;m still interested in get the Js version working. If you know the answer, please share!","title":"SonarQube How to login with the Web API","body":"<p>For anyone who got the same issue. I've got it working on Java code, Here is my code</p>\n\n<pre><code>HttpPost post = new HttpPost(\"http://localhost:9000/api/qualityprofiles/copy?fromKey=AV7dToVK_BWPTtE1c9vU&amp;toName=testtt\");\npost.setHeader(\"Authorization\", \"Basic ZGViM2RkNDE1MmM1NzFiY2RiN2I5NjVlMWQ5OWIyM2E0ZTVjOTUwNTo=\"); \ntry(CloseableHttpClient httpClient = HttpClients.createDefault();\n        CloseableHttpResponse response = httpClient.execute(post);) {\n\n    System.out.println(response.getStatusLine());\n}\n</code></pre>\n\n<p>You may notice I've added a line which sets the header. I've done something similar before to encode my login and password to this base64 format, but  they all not working somehow. This working encoded string was taking from the CURL method. (from my second update)</p>\n\n<p>I've tried some online base64 encoding and decoding tool, but the result doesn't match what I got from the CURL method, So if you are struggling on this, run CURL to get your encoded header and pass it in! If anyone could explain a better version, that would be great!</p>\n\n<p>Also, I'm still interested in get the Js version working. If you know the answer, please share!</p>\n"},{"tags":[],"owner":{"account_id":21979214,"reputation":131,"user_id":16254532,"display_name":"Rathinam Shanmugam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699449984,"creation_date":1624879627,"answer_id":68162549,"question_id":46538316,"body_markdown":"Here is an answer in C#:\r\n\r\n```\r\nstring url = &quot;http://localhost:9000/api/project_badges/quality_gate?project=projectName&quot;;\r\n\r\nHttpClient client = new HttpClient();\r\n\r\nvar byteArray = Encoding.ASCII.GetBytes(&quot;username:password&quot;);\r\nclient.DefaultRequestHeaders.Authorization = new System.Net.Http.Headers.AuthenticationHeaderValue(&quot;Basic&quot;, Convert.ToBase64String(byteArray));\r\nstring responseString = string.Empty;\r\nvar response = client.PostAsync(url, null).Result;\r\nif (response.IsSuccessStatusCode)\r\n{\r\n    var responseContent = response.Content;\r\n    responseString = responseContent.ReadAsStringAsync().Result;\r\n}\r\n```","title":"SonarQube How to login with the Web API","body":"<p>Here is an answer in C#:</p>\n<pre><code>string url = &quot;http://localhost:9000/api/project_badges/quality_gate?project=projectName&quot;;\n\nHttpClient client = new HttpClient();\n\nvar byteArray = Encoding.ASCII.GetBytes(&quot;username:password&quot;);\nclient.DefaultRequestHeaders.Authorization = new System.Net.Http.Headers.AuthenticationHeaderValue(&quot;Basic&quot;, Convert.ToBase64String(byteArray));\nstring responseString = string.Empty;\nvar response = client.PostAsync(url, null).Result;\nif (response.IsSuccessStatusCode)\n{\n    var responseContent = response.Content;\n    responseString = responseContent.ReadAsStringAsync().Result;\n}\n</code></pre>\n"}],"owner":{"account_id":10509808,"reputation":475,"user_id":7745881,"accept_rate":43,"display_name":"MaXon"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5268,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1699449984,"creation_date":1507011847,"question_id":46538316,"body_markdown":"I&#39;m writing a web application that can display code smell result from the Sonarqube, but I also want it can create custom rules sometimes. Currently, I&#39;m able to get the data from the server using HTTPClient in Java or XMLHttpRequest in Js. However, I&#39;m really stuck on POST message to the server. \r\n\r\n**In Js**, I&#39;ve tried these code to log in: (the CORS has been disabled in my chrome)\r\n\r\n    request.open(&quot;POST&quot;, &quot;http://localhost:9000/api/authentication/login?login=admin&amp;password=admin&quot;, true);\r\n    request.send();\r\n\r\nThe response status code is `200` which is successful. However, when I try to perform some action that needs permission\r\n\r\n    request.open(&quot;POST&quot;, &quot;http://localhost:9000/api/qualityprofiles/copy?fromKey=&quot; + fromKey + &quot;&amp;toName=&quot; + name, true);\r\n    request.send();\r\n\r\nThe result is `401`, unauthorized.\r\n\r\nAfter some research, I&#39;ve changed my code to\r\n\r\n    var base64encodedData = (&quot;admin:admin&quot;).toString(&#39;base64&#39;);\r\n    request.open(&quot;POST&quot;, &quot;http://localhost:9000/api/qualityprofiles/copy?fromKey=&quot; + fromKey + &quot;&amp;toName=&quot; + name, true);\r\n    request.setRequestHeader(&quot;Authorization&quot;, &quot;Basic &quot; + base64encodedData);\r\n    request.send();\r\n\r\nThe response is `405`, no method found.\r\n\r\nAfter further research, someone mentioned the `request.withCredentials` should set to `true`. I added in, then I got CORS problem again. (with the CORS disabled) \r\n\r\n(I&#39;m bit confused about the Sonarqube API. The reason I&#39;m saying this is, in my opinion, the purpose of this API is to simplify the method to play with the Sonarqube server externally. However, since it does not allow CORS, does that mean I cannot use the API on my own web page?)\r\n\r\nSince there is no luck in Js, I switched to Java. \r\n\r\n**In Java**, I ran this: (I&#39;ve done login as well)\r\n\r\n    HttpPost post = new HttpPost(&quot;http://localhost:9000/api/qualityprofiles/copy?fromKey=AV7dToVK_BWPTtE1c9vU&amp;toName=testtt&quot;);\r\n    try(CloseableHttpClient httpClient = HttpClients.createDefault();\r\n\t            CloseableHttpResponse response = httpClient.execute(post);) {\r\n\r\n\t        System.out.println(response.getStatusLine());\r\n    }\r\n\r\nI got:\r\n\r\n    HTTP/1.1 401 \r\n\r\nThen I change my code follow this link about [Basic Authentication with the API](http://www.baeldung.com/httpclient-4-basic-authentication)\r\n\r\n    CredentialsProvider provider = new BasicCredentialsProvider();\r\n\tUsernamePasswordCredentials credentials\r\n\t\t = new UsernamePasswordCredentials(&quot;admin&quot;, &quot;admin&quot;);\r\n\tprovider.setCredentials(AuthScope.ANY, credentials);\r\n\t\t  \r\n\tHttpClient client = HttpClientBuilder.create()\r\n\t\t  .setDefaultCredentialsProvider(provider)\r\n\t\t  .build();\r\n\t\t \r\n\tHttpResponse response = client.execute(\r\n\t\t  new HttpPost(&quot;http://localhost:9000/api/qualityprofiles/copy?fromKey=AV7dToVK_BWPTtE1c9vU&amp;toName=testtt&quot;));\r\n\tint statusCode = response.getStatusLine().getStatusCode();\r\n\tSystem.out.println(statusCode);\r\n\r\nAgain, `401`\r\n\r\nIn summary, my question is: How can I use Java code or Js code (preferred) to POST messages to the SonarQube server with authorization?\r\n\r\nAppriciate for any help!\r\n\r\n**UPDATE**\r\n\r\nI&#39;m now trying with curl, here is what I run in terminal\r\n\r\n    curl -X POST -u deb3dd4152c571bcdb7b965e1d99b23a4e5c9505: http://localhost:9000/api/qualityprofiles/copy?fromKey=AV7dToVK_BWPTtE1c9vU&amp;toName=test_file\r\n\r\nAnd I got this response, which I don&#39;t know how\r\n\r\n    {&quot;errors&quot;:[{&quot;msg&quot;:&quot;The &#39;toName&#39; parameter is missing&quot;}]}\r\n\r\n**Second Update on CURL**\r\n\r\nI ran:\r\n\r\n    curl -X POST -F &quot;fromKey=AV7dToVK_BWPTtE1c9vU;toName=test_file&quot; -v -u deb3dd4152c571bcdb7b965e1d99b23a4e5c9505: http://localhost:9000/api/qualityprofiles/copy\r\n\r\nResult:\r\n\r\n    *   Trying ::1...\r\n    * Connected to localhost (::1) port 9000 (#0)\r\n    * Server auth using Basic with user &#39;deb3dd4152c571bcdb7b965e1d99b23a4e5c9505&#39;\r\n    &gt; POST /api/qualityprofiles/copy HTTP/1.1\r\n    &gt; Host: localhost:9000\r\n    &gt; Authorization: Basic ZGViM2RkNDE1MmM1NzFiY2RiN2I5NjVlMWQ5OWIyM2E0ZTVjOTUwNTo=\r\n    &gt; User-Agent: curl/7.49.1\r\n    &gt; Accept: */*\r\n    &gt; Content-Length: 179\r\n    &gt; Expect: 100-continue\r\n    &gt; Content-Type: multipart/form-data; boundary=------------------------c22bb5dd76f44ac4\r\n    &gt; \r\n    &lt; HTTP/1.1 100 \r\n    &lt; HTTP/1.1 400 \r\n    &lt; Content-Type: application/json\r\n    &lt; Content-Length: 56\r\n    &lt; Date: Wed, 04 Oct 2017 00:43:47 GMT\r\n    &lt; Connection: close\r\n    &lt; \r\n    * Closing connection 0\r\n    {&quot;errors&quot;:[{&quot;msg&quot;:&quot;The &#39;toName&#39; parameter is missing&quot;}]}","title":"SonarQube How to login with the Web API","body":"<p>I'm writing a web application that can display code smell result from the Sonarqube, but I also want it can create custom rules sometimes. Currently, I'm able to get the data from the server using HTTPClient in Java or XMLHttpRequest in Js. However, I'm really stuck on POST message to the server. </p>\n\n<p><strong>In Js</strong>, I've tried these code to log in: (the CORS has been disabled in my chrome)</p>\n\n<pre><code>request.open(\"POST\", \"http://localhost:9000/api/authentication/login?login=admin&amp;password=admin\", true);\nrequest.send();\n</code></pre>\n\n<p>The response status code is <code>200</code> which is successful. However, when I try to perform some action that needs permission</p>\n\n<pre><code>request.open(\"POST\", \"http://localhost:9000/api/qualityprofiles/copy?fromKey=\" + fromKey + \"&amp;toName=\" + name, true);\nrequest.send();\n</code></pre>\n\n<p>The result is <code>401</code>, unauthorized.</p>\n\n<p>After some research, I've changed my code to</p>\n\n<pre><code>var base64encodedData = (\"admin:admin\").toString('base64');\nrequest.open(\"POST\", \"http://localhost:9000/api/qualityprofiles/copy?fromKey=\" + fromKey + \"&amp;toName=\" + name, true);\nrequest.setRequestHeader(\"Authorization\", \"Basic \" + base64encodedData);\nrequest.send();\n</code></pre>\n\n<p>The response is <code>405</code>, no method found.</p>\n\n<p>After further research, someone mentioned the <code>request.withCredentials</code> should set to <code>true</code>. I added in, then I got CORS problem again. (with the CORS disabled) </p>\n\n<p>(I'm bit confused about the Sonarqube API. The reason I'm saying this is, in my opinion, the purpose of this API is to simplify the method to play with the Sonarqube server externally. However, since it does not allow CORS, does that mean I cannot use the API on my own web page?)</p>\n\n<p>Since there is no luck in Js, I switched to Java. </p>\n\n<p><strong>In Java</strong>, I ran this: (I've done login as well)</p>\n\n<pre><code>HttpPost post = new HttpPost(\"http://localhost:9000/api/qualityprofiles/copy?fromKey=AV7dToVK_BWPTtE1c9vU&amp;toName=testtt\");\ntry(CloseableHttpClient httpClient = HttpClients.createDefault();\n            CloseableHttpResponse response = httpClient.execute(post);) {\n\n        System.out.println(response.getStatusLine());\n}\n</code></pre>\n\n<p>I got:</p>\n\n<pre><code>HTTP/1.1 401 \n</code></pre>\n\n<p>Then I change my code follow this link about <a href=\"http://www.baeldung.com/httpclient-4-basic-authentication\" rel=\"nofollow noreferrer\">Basic Authentication with the API</a></p>\n\n<pre><code>CredentialsProvider provider = new BasicCredentialsProvider();\nUsernamePasswordCredentials credentials\n     = new UsernamePasswordCredentials(\"admin\", \"admin\");\nprovider.setCredentials(AuthScope.ANY, credentials);\n\nHttpClient client = HttpClientBuilder.create()\n      .setDefaultCredentialsProvider(provider)\n      .build();\n\nHttpResponse response = client.execute(\n      new HttpPost(\"http://localhost:9000/api/qualityprofiles/copy?fromKey=AV7dToVK_BWPTtE1c9vU&amp;toName=testtt\"));\nint statusCode = response.getStatusLine().getStatusCode();\nSystem.out.println(statusCode);\n</code></pre>\n\n<p>Again, <code>401</code></p>\n\n<p>In summary, my question is: How can I use Java code or Js code (preferred) to POST messages to the SonarQube server with authorization?</p>\n\n<p>Appriciate for any help!</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I'm now trying with curl, here is what I run in terminal</p>\n\n<pre><code>curl -X POST -u deb3dd4152c571bcdb7b965e1d99b23a4e5c9505: http://localhost:9000/api/qualityprofiles/copy?fromKey=AV7dToVK_BWPTtE1c9vU&amp;toName=test_file\n</code></pre>\n\n<p>And I got this response, which I don't know how</p>\n\n<pre><code>{\"errors\":[{\"msg\":\"The 'toName' parameter is missing\"}]}\n</code></pre>\n\n<p><strong>Second Update on CURL</strong></p>\n\n<p>I ran:</p>\n\n<pre><code>curl -X POST -F \"fromKey=AV7dToVK_BWPTtE1c9vU;toName=test_file\" -v -u deb3dd4152c571bcdb7b965e1d99b23a4e5c9505: http://localhost:9000/api/qualityprofiles/copy\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>*   Trying ::1...\n* Connected to localhost (::1) port 9000 (#0)\n* Server auth using Basic with user 'deb3dd4152c571bcdb7b965e1d99b23a4e5c9505'\n&gt; POST /api/qualityprofiles/copy HTTP/1.1\n&gt; Host: localhost:9000\n&gt; Authorization: Basic ZGViM2RkNDE1MmM1NzFiY2RiN2I5NjVlMWQ5OWIyM2E0ZTVjOTUwNTo=\n&gt; User-Agent: curl/7.49.1\n&gt; Accept: */*\n&gt; Content-Length: 179\n&gt; Expect: 100-continue\n&gt; Content-Type: multipart/form-data; boundary=------------------------c22bb5dd76f44ac4\n&gt; \n&lt; HTTP/1.1 100 \n&lt; HTTP/1.1 400 \n&lt; Content-Type: application/json\n&lt; Content-Length: 56\n&lt; Date: Wed, 04 Oct 2017 00:43:47 GMT\n&lt; Connection: close\n&lt; \n* Closing connection 0\n{\"errors\":[{\"msg\":\"The 'toName' parameter is missing\"}]}\n</code></pre>\n"},{"tags":["java","android","android-activity","overriding","back"],"comments":[{"owner":{"account_id":4897842,"reputation":563,"user_id":3946842,"accept_rate":57,"display_name":"siddhesh"},"score":3,"creation_date":1474032232,"post_id":39532594,"comment_id":66379480,"body_markdown":"use onKeyDown method in order to overrride back action","body":"use onKeyDown method in order to overrride back action"},{"owner":{"account_id":1672875,"reputation":9840,"user_id":1538986,"accept_rate":64,"display_name":"Opiatefuchs"},"score":0,"creation_date":1474032600,"post_id":39532594,"comment_id":66379748,"body_markdown":"...you can easily put that code inside `onBackPressed()`, no need for `onKeyDown` . From the docs: `Called when the activity has detected the user&#39;s press of the back key. The default implementation simply finishes the current activity, but you can override this to do whatever you want.` There must be any other problem for this behaviour.","body":"...you can easily put that code inside <code>onBackPressed()</code>, no need for <code>onKeyDown</code> . From the docs: <code>Called when the activity has detected the user&#39;s press of the back key. The default implementation simply finishes the current activity, but you can override this to do whatever you want.</code> There must be any other problem for this behaviour."},{"owner":{"account_id":1672875,"reputation":9840,"user_id":1538986,"accept_rate":64,"display_name":"Opiatefuchs"},"score":2,"creation_date":1474032644,"post_id":39532594,"comment_id":66379775,"body_markdown":"@Steve: Do you have overriden `onKeyDown` for back button? Because if you have done this anywhere in your code, possibly you haven&#180;t returned true and `onBackPressed` is not called....","body":"@Steve: Do you have overriden <code>onKeyDown</code> for back button? Because if you have done this anywhere in your code, possibly you haven&#180;t returned true and <code>onBackPressed</code> is not called...."},{"owner":{"account_id":4167506,"reputation":2755,"user_id":3416163,"accept_rate":92,"display_name":"Anton Kazakov"},"score":2,"creation_date":1474032697,"post_id":39532594,"comment_id":66379809,"body_markdown":"Your onBackPressed()  method is doing fine. Problem&#39;s not there","body":"Your onBackPressed()  method is doing fine. Problem&#39;s not there"},{"owner":{"account_id":9130925,"reputation":646,"user_id":6792590,"display_name":"Steve2955"},"score":0,"creation_date":1474032739,"post_id":39532594,"comment_id":66379838,"body_markdown":"@Opiatefuchs I haven&#39;t overriden onKeyDown","body":"@Opiatefuchs I haven&#39;t overriden onKeyDown"},{"owner":{"account_id":6302434,"reputation":5409,"user_id":4896651,"accept_rate":75,"display_name":"Shadov"},"score":0,"creation_date":1474032797,"post_id":39532594,"comment_id":66379877,"body_markdown":"Try to add call to a super onBackPressed in the overriden one and check if app will close.","body":"Try to add call to a super onBackPressed in the overriden one and check if app will close."},{"owner":{"account_id":1672875,"reputation":9840,"user_id":1538986,"accept_rate":64,"display_name":"Opiatefuchs"},"score":0,"creation_date":1474033548,"post_id":39532594,"comment_id":66380407,"body_markdown":"You don&#180;t need to call `super.OnBackPressed()`, the method should work without this. What exactly isn&#180;t working? The Log? The Toast? If it&#180;s the toast, maybe it&#180;s because of your `getApplicationContext()` call. Just use `this` or `getActivity().getApplicationContext();`","body":"You don&#180;t need to call <code>super.OnBackPressed()</code>, the method should work without this. What exactly isn&#180;t working? The Log? The Toast? If it&#180;s the toast, maybe it&#180;s because of your <code>getApplicationContext()</code> call. Just use <code>this</code> or <code>getActivity().getApplicationContext();</code>"},{"owner":{"account_id":9130925,"reputation":646,"user_id":6792590,"display_name":"Steve2955"},"score":1,"creation_date":1474033738,"post_id":39532594,"comment_id":66380519,"body_markdown":"@Opiatefuchs The Log and the Toast, both didn&#39;t work, but I now switched to the onKeyDown method and it is working.","body":"@Opiatefuchs The Log and the Toast, both didn&#39;t work, but I now switched to the onKeyDown method and it is working."}],"answers":[{"comments":[{"owner":{"account_id":1672875,"reputation":9840,"user_id":1538986,"accept_rate":64,"display_name":"Opiatefuchs"},"score":1,"creation_date":1474033397,"post_id":39532973,"comment_id":66380301,"body_markdown":"as he stated out, and that&#180;s correct, super.onBackPressed() will close the activity. You can easily override this and comment it out, the method will work without super.OnBackPressed()","body":"as he stated out, and that&#180;s correct, super.onBackPressed() will close the activity. You can easily override this and comment it out, the method will work without super.OnBackPressed()"},{"owner":{"account_id":9130925,"reputation":646,"user_id":6792590,"display_name":"Steve2955"},"score":0,"creation_date":1474033621,"post_id":39532973,"comment_id":66380454,"body_markdown":"super.onBackPressed(); didn&#39;t do anything, but for some reason onKeyDown worked for me.","body":"super.onBackPressed(); didn&#39;t do anything, but for some reason onKeyDown worked for me."},{"owner":{"account_id":1672875,"reputation":9840,"user_id":1538986,"accept_rate":64,"display_name":"Opiatefuchs"},"score":0,"creation_date":1474033678,"post_id":39532973,"comment_id":66380484,"body_markdown":"for sure, `onKeyDown` will work, just try my solution in the comment with passing the correct context....the onBackPressed should work...","body":"for sure, <code>onKeyDown</code> will work, just try my solution in the comment with passing the correct context....the onBackPressed should work..."}],"tags":[],"owner":{"account_id":3982588,"reputation":4120,"user_id":3284149,"display_name":"Saveen"},"comment_count":3,"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1474033220,"creation_date":1474033220,"answer_id":39532973,"question_id":39532594,"body_markdown":"You are missing, **super.onBackPressed();**\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        super.onBackPressed();\r\n    }\r\n\r\nor you can use \r\n\r\n    @Override  \r\n    public boolean onKeyDown(int keyCode, KeyEvent event)  \r\n    {  \r\n         //replaces the default &#39;Back&#39; button action  \r\n         if(keyCode==KeyEvent.KEYCODE_BACK)   {  \r\n    // something here\r\n                finish();\r\n         }  \r\n         return true;  \r\n     }  \r\n\r\n\r\nthanks ","title":"Android onBackPressed() is not being called?","body":"<p>You are missing, <strong>super.onBackPressed();</strong></p>\n\n<pre><code>@Override\npublic void onBackPressed() {\n    super.onBackPressed();\n}\n</code></pre>\n\n<p>or you can use </p>\n\n<pre><code>@Override  \npublic boolean onKeyDown(int keyCode, KeyEvent event)  \n{  \n     //replaces the default 'Back' button action  \n     if(keyCode==KeyEvent.KEYCODE_BACK)   {  \n// something here\n            finish();\n     }  \n     return true;  \n }  \n</code></pre>\n\n<p>thanks </p>\n"},{"tags":[],"owner":{"account_id":1672875,"reputation":9840,"user_id":1538986,"accept_rate":64,"display_name":"Opiatefuchs"},"comment_count":0,"down_vote_count":0,"up_vote_count":29,"is_accepted":true,"score":29,"last_activity_date":1474132877,"creation_date":1474132877,"answer_id":39549698,"question_id":39532594,"body_markdown":"This question is already answered, but I feel to clear something here in this topic. Most comments and answeres point out to use `super.onBackPressed()` and that this is the cause of the not working method `onBackPressed()`. But that is not correct and important to let other beginners know. The method `onBackPressed()` does not need to use `super.onBackPressed()` . `onBackPressed()`also works if somebody, for example, comment `super.onBackPressed()` out. \r\n\r\nAs the questionier has written, he won&#180;t use `super.onBackPressed()` because it will close the activity. So, the cause of this why it isn&#180;t working, could be seperated into three possible causes:\r\n\r\n1. The Log doesn&#180;t work because of a wrong filter in the logcat console\r\n2. The Toast dosn&#180;t work because of the wrong passed context\r\n3. The OS is implemented wrong by the supplier.\r\n\r\nUsually, the toast works by passing the correct context. In the case of questioner, simply passing `this` . \r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        Log.d(&quot;MainActivity&quot;,&quot;onBackPressed&quot;);\r\n        Toast.makeText(this,&quot;onBackPressed&quot;,Toast.LENGTH_SHORT).show();\r\n    }\r\n\r\nFor the Log, simply set the correct filter on logcat.\r\n\r\nI don&#180;t care if somebody give downvotes now, but it must be clear for other beginners, that `super.onBackPressed()` must not be used.\r\n\r\nAnyway, the use of `onKeyDown()` also is a solution.","title":"Android onBackPressed() is not being called?","body":"<p>This question is already answered, but I feel to clear something here in this topic. Most comments and answeres point out to use <code>super.onBackPressed()</code> and that this is the cause of the not working method <code>onBackPressed()</code>. But that is not correct and important to let other beginners know. The method <code>onBackPressed()</code> does not need to use <code>super.onBackPressed()</code> . <code>onBackPressed()</code>also works if somebody, for example, comment <code>super.onBackPressed()</code> out. </p>\n\n<p>As the questionier has written, he won´t use <code>super.onBackPressed()</code> because it will close the activity. So, the cause of this why it isn´t working, could be seperated into three possible causes:</p>\n\n<ol>\n<li>The Log doesn´t work because of a wrong filter in the logcat console</li>\n<li>The Toast dosn´t work because of the wrong passed context</li>\n<li>The OS is implemented wrong by the supplier.</li>\n</ol>\n\n<p>Usually, the toast works by passing the correct context. In the case of questioner, simply passing <code>this</code> . </p>\n\n<pre><code>@Override\npublic void onBackPressed() {\n    Log.d(\"MainActivity\",\"onBackPressed\");\n    Toast.makeText(this,\"onBackPressed\",Toast.LENGTH_SHORT).show();\n}\n</code></pre>\n\n<p>For the Log, simply set the correct filter on logcat.</p>\n\n<p>I don´t care if somebody give downvotes now, but it must be clear for other beginners, that <code>super.onBackPressed()</code> must not be used.</p>\n\n<p>Anyway, the use of <code>onKeyDown()</code> also is a solution.</p>\n"},{"comments":[{"owner":{"account_id":1113803,"reputation":1111,"user_id":1103688,"accept_rate":60,"display_name":"Vijay Kumar Kanta"},"score":1,"creation_date":1533171453,"post_id":46499387,"comment_id":90252392,"body_markdown":"This is the right answer for back press in the action bar.","body":"This is the right answer for back press in the action bar."},{"owner":{"account_id":7043258,"reputation":2377,"user_id":5394986,"accept_rate":0,"display_name":"Pablo Alfonso"},"score":2,"creation_date":1590903240,"post_id":46499387,"comment_id":109853485,"body_markdown":"public BOOLEAN onKeyUp... Are you returning a &quot;BOOLEAN&quot; here?","body":"public BOOLEAN onKeyUp... Are you returning a &quot;BOOLEAN&quot; here?"}],"tags":[],"owner":{"account_id":2726267,"reputation":3164,"user_id":2351246,"display_name":"BitByteDog"},"comment_count":2,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1590947805,"creation_date":1506743355,"answer_id":46499387,"question_id":39532594,"body_markdown":"The `onBackPressed()` is a default action called from `onKeyDown()` in API &lt; 5 and a default action called from `onKeyUp()` from API level 5 and up. If `onKeyUp()` does not call `super.onKeyUp()`, `onBackPressed()` will not be called.\r\n\r\nDocumentation [onKeyDown()](https://developer.android.com/reference/android/app/Activity.html#onKeyDown(int,%20android.view.KeyEvent))\r\n\r\nDocumentation [onKeyUp()](https://developer.android.com/reference/android/app/Activity.html#onKeyUp(int,%20android.view.KeyEvent)).\r\n\r\n    @Override\r\n    public boolean onKeyUp(int keyCode, KeyEvent event) {\r\n        /*\r\n         * without call to super onBackPress() will not be called when\r\n         * keyCode == KeyEvent.KEYCODE_BACK\r\n         */\r\n        return super.onKeyUp(keyCode, event);\r\n    }\r\n\r\nAlso another reason that `onBackPressed()` may not be called is because you are using the soft back button on the actionbar, it that case the following is needed:\r\n\r\n    @Override\r\n    public boolean onOptionsItemSelected(MenuItem item)\r\n    {\r\n        // Handle action bar item clicks here. The action bar will\r\n        // automatically handle clicks on the Home/Up button, so long\r\n        // as you specify a parent activity in AndroidManifest.xml.\r\n        switch (item.getItemId()) {\r\n            case android.R.id.home:\r\n                onBackPressed();\r\n                return true;\r\n            default:\r\n                return super.onOptionsItemSelected(item);\r\n        }\r\n    }","title":"Android onBackPressed() is not being called?","body":"<p>The <code>onBackPressed()</code> is a default action called from <code>onKeyDown()</code> in API &lt; 5 and a default action called from <code>onKeyUp()</code> from API level 5 and up. If <code>onKeyUp()</code> does not call <code>super.onKeyUp()</code>, <code>onBackPressed()</code> will not be called.</p>\n\n<p>Documentation <a href=\"https://developer.android.com/reference/android/app/Activity.html#onKeyDown(int,%20android.view.KeyEvent)\" rel=\"noreferrer\">onKeyDown()</a></p>\n\n<p>Documentation <a href=\"https://developer.android.com/reference/android/app/Activity.html#onKeyUp(int,%20android.view.KeyEvent)\" rel=\"noreferrer\">onKeyUp()</a>.</p>\n\n<pre><code>@Override\npublic boolean onKeyUp(int keyCode, KeyEvent event) {\n    /*\n     * without call to super onBackPress() will not be called when\n     * keyCode == KeyEvent.KEYCODE_BACK\n     */\n    return super.onKeyUp(keyCode, event);\n}\n</code></pre>\n\n<p>Also another reason that <code>onBackPressed()</code> may not be called is because you are using the soft back button on the actionbar, it that case the following is needed:</p>\n\n<pre><code>@Override\npublic boolean onOptionsItemSelected(MenuItem item)\n{\n    // Handle action bar item clicks here. The action bar will\n    // automatically handle clicks on the Home/Up button, so long\n    // as you specify a parent activity in AndroidManifest.xml.\n    switch (item.getItemId()) {\n        case android.R.id.home:\n            onBackPressed();\n            return true;\n        default:\n            return super.onOptionsItemSelected(item);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4340730,"reputation":1485,"user_id":3544007,"accept_rate":57,"display_name":"vijay"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1520694653,"creation_date":1520694653,"answer_id":49210598,"question_id":39532594,"body_markdown":"Just Remove super.onBackPressed() it will work","title":"Android onBackPressed() is not being called?","body":"<p>Just Remove super.onBackPressed() it will work</p>\n"},{"tags":[],"owner":{"account_id":8261618,"reputation":89,"user_id":6212796,"accept_rate":75,"display_name":"Ahmed Esameddeen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553376463,"creation_date":1553376463,"answer_id":55318562,"question_id":39532594,"body_markdown":"make sure you are not calling onkeydown in your super view as it handles the back button clicking first.","title":"Android onBackPressed() is not being called?","body":"<p>make sure you are not calling onkeydown in your super view as it handles the back button clicking first.</p>\n"},{"tags":[],"owner":{"account_id":14887900,"reputation":81,"user_id":10750528,"display_name":"amra ram"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659131006,"creation_date":1659131006,"answer_id":73171258,"question_id":39532594,"body_markdown":"   working fine onKeyDown function  return type false;\r\n\r\n\r\n @Override\r\n\r\n    public boolean onKeyDown(int keyCode, KeyEvent event) {\r\n      \r\n\r\n        return false;\r\n\r\n    }","title":"Android onBackPressed() is not being called?","body":"<p>working fine onKeyDown function  return type false;</p>\n<p>@Override</p>\n<pre><code>public boolean onKeyDown(int keyCode, KeyEvent event) {\n  \n\n    return false;\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14100048,"reputation":51,"user_id":10185615,"display_name":"Chris Baaijens"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677570361,"creation_date":1677164947,"answer_id":75546663,"question_id":39532594,"body_markdown":"For whoever is wondering, as most functionality is deprected API 30&gt;, the following will surely help you a lot.\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    private OnBackPressedCallback onBackPressedCallback;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        onBackPressedCallback = new OnBackPressedCallback(true) {\r\n            @Override\r\n            public void handleOnBackPressed() {\r\n                // Your business logic to handle the back pressed event\r\n                Log.d(TAG, &quot;onBackPressedCallback: handleOnBackPressed&quot;);\r\n            }\r\n        };\r\n\r\n        getOnBackPressedDispatcher().addCallback(this, onBackPressedCallback);\r\n    }\r\n    }","title":"Android onBackPressed() is not being called?","body":"<p>For whoever is wondering, as most functionality is deprected API 30&gt;, the following will surely help you a lot.</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\nprivate OnBackPressedCallback onBackPressedCallback;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    onBackPressedCallback = new OnBackPressedCallback(true) {\n        @Override\n        public void handleOnBackPressed() {\n            // Your business logic to handle the back pressed event\n            Log.d(TAG, &quot;onBackPressedCallback: handleOnBackPressed&quot;);\n        }\n    };\n\n    getOnBackPressedDispatcher().addCallback(this, onBackPressedCallback);\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29048230,"reputation":1,"user_id":22251594,"display_name":"Pratyush Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699449892,"creation_date":1699449892,"answer_id":77445907,"question_id":39532594,"body_markdown":"if u want to use onBackpressed and added some logic to finish the activity do not use super.onBackPressed \r\n\r\n    override fun onBackPressed() {\r\n        \r\n\r\n        if (session!!.backControl == &quot;onBack&quot;) {\r\n            session!!.backControl = &quot;offBack&quot;\r\n            callFragment(AdminAssetFragment())\r\n        } else if (session!!.backControlAmenities == &quot;onBackAmenity&quot;) {\r\n            session!!.backControlAmenities = &quot;offBackAmenity&quot;\r\n            callFragment(AdminAmenityFragment())\r\n\r\n        } else {\r\n            finish()\r\n        }\r\n    }\r\n","title":"Android onBackPressed() is not being called?","body":"<p>if u want to use onBackpressed and added some logic to finish the activity do not use super.onBackPressed</p>\n<pre><code>override fun onBackPressed() {\n    \n\n    if (session!!.backControl == &quot;onBack&quot;) {\n        session!!.backControl = &quot;offBack&quot;\n        callFragment(AdminAssetFragment())\n    } else if (session!!.backControlAmenities == &quot;onBackAmenity&quot;) {\n        session!!.backControlAmenities = &quot;offBackAmenity&quot;\n        callFragment(AdminAmenityFragment())\n\n    } else {\n        finish()\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":9130925,"reputation":646,"user_id":6792590,"display_name":"Steve2955"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34134,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":39549698,"answer_count":8,"score":22,"last_activity_date":1699449892,"creation_date":1474032165,"question_id":39532594,"body_markdown":"in my MainActivity, which extends from AppCompatActivity, I want to override the onBackPressed method like so:\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        Log.d(&quot;MainActivity&quot;,&quot;onBackPressed&quot;);\r\n        Toast.makeText(getApplicationContext(),&quot;onBackPressed&quot;,Toast.LENGTH_SHORT).show();\r\n    }\r\n\r\nbut onBackPressed does not get called. How ever if I do not override onBackPressed, the application closes, when I press the backbutton and if I do override it it doesn&#39;t. \r\n\r\nThe rest of my activity looks like this:\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n\r\n    private Toolbar toolbar;\r\n    private Drawer drawer;\r\n    private FloatingActionButton fab_test;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        setContentView(R.layout.activity_main);\r\n\r\n        toolbar = (Toolbar) findViewById(R.id.toolbar);\r\n        setSupportActionBar(toolbar);\r\n\r\n        fab_test = (FloatingActionButton) findViewById(R.id.fab_test);\r\n        fab_test.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Toast.makeText(getApplicationContext(),&quot;FAB Test pressed&quot;,Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n        buildDrawer();\r\n\r\n        getSupportFragmentManager().beginTransaction().add(R.id.fragmentContainer,page).commit();\r\n    }\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        Log.d(&quot;MainActivity&quot;,&quot;onBackPressed&quot;);\r\n        Toast.makeText(getApplicationContext(),&quot;onBackPressed&quot;,Toast.LENGTH_SHORT).show();\r\n    }\r\n\r\n    @Override\r\n    public boolean onCreateOptionsMenu(Menu menu) {\r\n        getMenuInflater().inflate(R.menu.main_menu, menu);      \r\n        return true;\r\n    }\r\n    }\r\n\r\nEDIT: I&#39;m talking about the hardware-backbutton(not the actionbar one)\r\n","title":"Android onBackPressed() is not being called?","body":"<p>in my MainActivity, which extends from AppCompatActivity, I want to override the onBackPressed method like so:</p>\n\n<pre><code>@Override\npublic void onBackPressed() {\n    Log.d(\"MainActivity\",\"onBackPressed\");\n    Toast.makeText(getApplicationContext(),\"onBackPressed\",Toast.LENGTH_SHORT).show();\n}\n</code></pre>\n\n<p>but onBackPressed does not get called. How ever if I do not override onBackPressed, the application closes, when I press the backbutton and if I do override it it doesn't. </p>\n\n<p>The rest of my activity looks like this:</p>\n\n<pre><code>public class MainActivity extends AppCompatActivity {\n\nprivate Toolbar toolbar;\nprivate Drawer drawer;\nprivate FloatingActionButton fab_test;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n\n    setContentView(R.layout.activity_main);\n\n    toolbar = (Toolbar) findViewById(R.id.toolbar);\n    setSupportActionBar(toolbar);\n\n    fab_test = (FloatingActionButton) findViewById(R.id.fab_test);\n    fab_test.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            Toast.makeText(getApplicationContext(),\"FAB Test pressed\",Toast.LENGTH_SHORT).show();\n        }\n    });\n\n    buildDrawer();\n\n    getSupportFragmentManager().beginTransaction().add(R.id.fragmentContainer,page).commit();\n}\n\n@Override\npublic void onBackPressed() {\n    Log.d(\"MainActivity\",\"onBackPressed\");\n    Toast.makeText(getApplicationContext(),\"onBackPressed\",Toast.LENGTH_SHORT).show();\n}\n\n@Override\npublic boolean onCreateOptionsMenu(Menu menu) {\n    getMenuInflater().inflate(R.menu.main_menu, menu);      \n    return true;\n}\n}\n</code></pre>\n\n<p>EDIT: I'm talking about the hardware-backbutton(not the actionbar one)</p>\n"},{"tags":["java","email","outlook","html-email","email-attachments"],"answers":[{"comments":[{"owner":{"account_id":4389073,"reputation":5930,"user_id":4279201,"accept_rate":99,"display_name":"shinzou"},"score":0,"creation_date":1679821271,"post_id":75825296,"comment_id":133786372,"body_markdown":"I have that of course, I edited the question with screenshot of that.","body":"I have that of course, I edited the question with screenshot of that."},{"owner":{"account_id":131793,"reputation":64015,"user_id":332059,"accept_rate":57,"display_name":"Dmitry Streblechenko"},"score":0,"creation_date":1679868248,"post_id":75825296,"comment_id":133793480,"body_markdown":"What is the HTML body?","body":"What is the HTML body?"},{"owner":{"account_id":4389073,"reputation":5930,"user_id":4279201,"accept_rate":99,"display_name":"shinzou"},"score":0,"creation_date":1679921641,"post_id":75825296,"comment_id":133802233,"body_markdown":"--000000000000568a1005f7903d20\nContent-Type: text/html; charset=&quot;UTF-8&quot;\n\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;asdadasdasd&lt;img src=&quot;cid:testImage&quot;&gt;qweqeqweqwe\n\n--000000000000568a1005f7903d20--","body":"--000000000000568a1005f7903d20 Content-Type: text/html; charset=&quot;UTF-8&quot;  &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;asdadasdasd&lt;img src=&quot;cid:testImage&quot;&gt;qweqeqweqwe  --000000000000568a1005f7903d20--"},{"owner":{"account_id":131793,"reputation":64015,"user_id":332059,"accept_rate":57,"display_name":"Dmitry Streblechenko"},"score":0,"creation_date":1679930430,"post_id":75825296,"comment_id":133805100,"body_markdown":"try to remove `&lt;` and `&gt;` from `messageBodyPart.setContentID(&quot;&lt;testImage&gt;&quot;);`","body":"try to remove <code>&lt;</code> and <code>&gt;</code> from <code>messageBodyPart.setContentID(&quot;&lt;testImage&gt;&quot;);</code>"},{"owner":{"account_id":4389073,"reputation":5930,"user_id":4279201,"accept_rate":99,"display_name":"shinzou"},"score":0,"creation_date":1680004415,"post_id":75825296,"comment_id":133819212,"body_markdown":"I tried, and it&#39;s the same. This is how the body and attachment section look:\n\n--0000000000003576c505f7f46a44\nContent-Type: text/html; charset=&quot;UTF-8&quot;\n\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;asdadasdasd&lt;img src=&quot;cid:testImage&quot;&gt;qweqeqweqwe\n\n--0000000000003576c505f7f46a44--\n\n--0000000000003576c805f7f46a46\nContent-Type: image/jpeg; name=&quot;testImage.jpeg&quot;\nContent-Disposition: attachment; filename=&quot;testImage.jpeg&quot;\nContent-Transfer-Encoding: base64\nContent-ID: testImage\nX-Attachment-Id: testImage","body":"I tried, and it&#39;s the same. This is how the body and attachment section look:  --0000000000003576c505f7f46a44 Content-Type: text/html; charset=&quot;UTF-8&quot;  &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;asdadasdasd&lt;img src=&quot;cid:testImage&quot;&gt;qweqeqweqwe  --0000000000003576c505f7f46a44--  --0000000000003576c805f7f46a46 Content-Type: image/jpeg; name=&quot;testImage.jpeg&quot; Content-Disposition: attachment; filename=&quot;testImage.jpeg&quot; Content-Transfer-Encoding: base64 Content-ID: testImage X-Attachment-Id: testImage"}],"tags":[],"owner":{"account_id":131793,"reputation":64015,"user_id":332059,"accept_rate":57,"display_name":"Dmitry Streblechenko"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679587124,"creation_date":1679587124,"answer_id":75825296,"question_id":75821805,"body_markdown":"Make sure your HTML body refers to the image through its cid, e.g. `&lt;img src=&quot;cid:testImage&quot;` - Outlook will then hide attachments like that.","title":"Hide attachment from embedded images that use cid in outlook email client","body":"<p>Make sure your HTML body refers to the image through its cid, e.g. <code>&lt;img src=&quot;cid:testImage&quot;</code> - Outlook will then hide attachments like that.</p>\n"},{"comments":[{"owner":{"account_id":4389073,"reputation":5930,"user_id":4279201,"accept_rate":99,"display_name":"shinzou"},"score":0,"creation_date":1680093684,"post_id":75875987,"comment_id":133838261,"body_markdown":"you can see in the images that I did that and the images work with or without the &lt;&gt;, the attachment is also still there with and without.","body":"you can see in the images that I did that and the images work with or without the &lt;&gt;, the attachment is also still there with and without."}],"tags":[],"owner":{"account_id":337792,"reputation":1,"user_id":3506759,"display_name":"drag0p"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680085565,"creation_date":1680085565,"answer_id":75875987,"question_id":75821805,"body_markdown":"Maybe your last problem is to properly define the CID.\r\nContent-ID property must prefix and suffix with &quot;&lt;&quot; and &quot;&gt;&quot; perspectively, and the value off filename should be same with the content of src of img tag without prefix &quot;cid:&quot;\r\n\r\nSo you should try it out with the suffix .jpeg","title":"Hide attachment from embedded images that use cid in outlook email client","body":"<p>Maybe your last problem is to properly define the CID.\nContent-ID property must prefix and suffix with &quot;&lt;&quot; and &quot;&gt;&quot; perspectively, and the value off filename should be same with the content of src of img tag without prefix &quot;cid:&quot;</p>\n<p>So you should try it out with the suffix .jpeg</p>\n"},{"tags":[],"owner":{"account_id":4757605,"reputation":73,"user_id":3845953,"display_name":"Spider IT"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699449795,"creation_date":1699449795,"answer_id":77445895,"question_id":75821805,"body_markdown":"In your GMail header it says &quot;Content-Disposition: ***inline***; filename=...&quot; while in yours it says &quot;Content-Disposition: ***attachment***; filename=...&quot;. I think this makes it clear, right? Attachments are shown, inline elements are for use in the body only.","title":"Hide attachment from embedded images that use cid in outlook email client","body":"<p>In your GMail header it says &quot;Content-Disposition: <em><strong>inline</strong></em>; filename=...&quot; while in yours it says &quot;Content-Disposition: <em><strong>attachment</strong></em>; filename=...&quot;. I think this makes it clear, right? Attachments are shown, inline elements are for use in the body only.</p>\n"}],"owner":{"account_id":4389073,"reputation":5930,"user_id":4279201,"accept_rate":99,"display_name":"shinzou"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":783,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1699449795,"creation_date":1679566986,"question_id":75821805,"body_markdown":"I need to use cid embedded images, I&#39;m using the following methods in java:\r\n\r\n        MimeBodyPart messageBodyPart = new MimeBodyPart();\r\n        byte[] imageDataBytes = Base64.getDecoder().decode(imageDataString);\r\n        DataSource ds = new ByteArrayDataSource(imageDataBytes, &quot;image/jpeg&quot;);\r\n        messageBodyPart.setDataHandler(new DataHandler(ds));\r\n        messageBodyPart.setContentID(&quot;&lt;testImage&gt;&quot;);\r\n        messageBodyPart.setFileName(&quot;testImage.jpeg&quot;);\r\n        messageBodyPart.setHeader(&quot;Content-Transfer-Encoding&quot;,&quot;base64&quot;);\r\n        messageBodyPart.setHeader(&quot;X-Attachment-Id&quot;,&quot;testImage&quot;);\r\n        messageBodyPart.setHeader(&quot;Content-Type&quot;,&quot;image/jpeg&quot;);\r\n        messageBodyPart.setDisposition(MimeBodyPart.INLINE);\r\n        emailBodyAndAttachments.addBodyPart(messageBodyPart);\r\n\r\nit looks good in gmail, just like &lt;img src=url&gt; but in outlook and mac email client I see the image as an attached image:\r\n\r\noutlook \r\n[![enter image description here][1]][1]\r\n\r\nIs there a header that will make it not appear as an attachment?\r\n\r\nThere must be one because when I drag and drop images into gmail email, they appear without the attachment part and they also use cid.\r\n\r\n\r\nThat&#39;s how it looks when I send it from gmail and that&#39;s what I also want: \r\n\r\noutlook\r\n[![enter image description here][3]][3]\r\n\r\n\r\nThese are the headers that gmail uses: \r\n```\r\n--0000000000004076a905f77e39cf\r\nContent-Type: image/jpeg; name=&quot;pexels-lisa-fotios-1540258.jpg&quot;\r\nContent-Disposition: inline; filename=&quot;pexels-lisa-fotios-1540258.jpg&quot;\r\nContent-Transfer-Encoding: base64\r\nContent-ID: &lt;ii_lfjsr1aq0&gt;\r\nX-Attachment-Id: ii_lfjsr1aq0\r\n\r\n/9j/4AAQSkZJRgABAQ..........\r\n```\r\n\r\nand these are the headers that I attached:\r\n```\r\n--_004_CAMNVZSzi1kPoPE3OoJQKBpjw6iFoN2GooxXSKEYAh4pafw4Sgmailg_\r\nContent-Type: image/jpeg; name=&quot;testImage.jpeg&quot;\r\nContent-Description: testImage.jpeg\r\nContent-Disposition: attachment; filename=&quot;testImage.jpeg&quot;; size=3716152;\r\n\tcreation-date=&quot;Thu, 23 Mar 2023 10:18:53 GMT&quot;;\r\n\tmodification-date=&quot;Thu, 23 Mar 2023 10:19:19 GMT&quot;\r\nContent-ID: &lt;testImage&gt;\r\nContent-Transfer-Encoding: base64\r\nX-Attachment-Id: testImage\r\n```\r\n\r\nThe image is referenced as cid in the HTML of course: [![enter image description here][4]][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Rlhhi.jpg\r\n  [2]: https://i.stack.imgur.com/9znpE.png\r\n  [3]: https://i.stack.imgur.com/c3lDb.png\r\n  [4]: https://i.stack.imgur.com/NGHbz.png","title":"Hide attachment from embedded images that use cid in outlook email client","body":"<p>I need to use cid embedded images, I'm using the following methods in java:</p>\n<pre><code>    MimeBodyPart messageBodyPart = new MimeBodyPart();\n    byte[] imageDataBytes = Base64.getDecoder().decode(imageDataString);\n    DataSource ds = new ByteArrayDataSource(imageDataBytes, &quot;image/jpeg&quot;);\n    messageBodyPart.setDataHandler(new DataHandler(ds));\n    messageBodyPart.setContentID(&quot;&lt;testImage&gt;&quot;);\n    messageBodyPart.setFileName(&quot;testImage.jpeg&quot;);\n    messageBodyPart.setHeader(&quot;Content-Transfer-Encoding&quot;,&quot;base64&quot;);\n    messageBodyPart.setHeader(&quot;X-Attachment-Id&quot;,&quot;testImage&quot;);\n    messageBodyPart.setHeader(&quot;Content-Type&quot;,&quot;image/jpeg&quot;);\n    messageBodyPart.setDisposition(MimeBodyPart.INLINE);\n    emailBodyAndAttachments.addBodyPart(messageBodyPart);\n</code></pre>\n<p>it looks good in gmail, just like  but in outlook and mac email client I see the image as an attached image:</p>\n<p>outlook\n<a href=\"https://i.stack.imgur.com/Rlhhi.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Rlhhi.jpg\" alt=\"enter image description here\" /></a></p>\n<p>Is there a header that will make it not appear as an attachment?</p>\n<p>There must be one because when I drag and drop images into gmail email, they appear without the attachment part and they also use cid.</p>\n<p>That's how it looks when I send it from gmail and that's what I also want:</p>\n<p>outlook\n<a href=\"https://i.stack.imgur.com/c3lDb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c3lDb.png\" alt=\"enter image description here\" /></a></p>\n<p>These are the headers that gmail uses:</p>\n<pre><code>--0000000000004076a905f77e39cf\nContent-Type: image/jpeg; name=&quot;pexels-lisa-fotios-1540258.jpg&quot;\nContent-Disposition: inline; filename=&quot;pexels-lisa-fotios-1540258.jpg&quot;\nContent-Transfer-Encoding: base64\nContent-ID: &lt;ii_lfjsr1aq0&gt;\nX-Attachment-Id: ii_lfjsr1aq0\n\n/9j/4AAQSkZJRgABAQ..........\n</code></pre>\n<p>and these are the headers that I attached:</p>\n<pre><code>--_004_CAMNVZSzi1kPoPE3OoJQKBpjw6iFoN2GooxXSKEYAh4pafw4Sgmailg_\nContent-Type: image/jpeg; name=&quot;testImage.jpeg&quot;\nContent-Description: testImage.jpeg\nContent-Disposition: attachment; filename=&quot;testImage.jpeg&quot;; size=3716152;\n    creation-date=&quot;Thu, 23 Mar 2023 10:18:53 GMT&quot;;\n    modification-date=&quot;Thu, 23 Mar 2023 10:19:19 GMT&quot;\nContent-ID: &lt;testImage&gt;\nContent-Transfer-Encoding: base64\nX-Attachment-Id: testImage\n</code></pre>\n<p>The image is referenced as cid in the HTML of course: <a href=\"https://i.stack.imgur.com/NGHbz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NGHbz.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","jpa","transactions","entitymanager"],"owner":{"account_id":26356499,"reputation":23,"user_id":20013403,"display_name":"mastermistik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699449684,"creation_date":1699286671,"question_id":77432526,"body_markdown":"I want to start parallel write process with some requirements.\r\n\r\n1. One commit only, to avoid inconsistent data\r\n2. rollback all when any of the threads is failed\r\n\r\nI am using Hibernate as ORM mapper and want to solve it by using a custom managed transaction.\r\n\r\n    @Stateless\r\n    @TransactionManagement(javax.ejb.TransactionManagementType.BEAN)\r\n    public class Manager {\r\n    \r\n           @EJB\r\n           private Dao dao;\r\n    \r\n           @Resource\r\n           private SessionContext sessionContext;\r\n    \r\n           private static ThreadPoolExecutor threadPoolExecutor = initThreadPoolExecutor();\r\n    \r\n           private ThreadLocal&lt;UserTransaction&gt; threadLocal = new ThreadLocal&lt;UserTransaction&gt;();\r\n    \r\n           public void write(BasicRequest req) {\r\n                 UserTransaction mainTransaction = sessionContext.getUserTransaction();\r\n               //  threadLocal.set(mainTransaction);\r\n    \r\n                 try {\r\n                        mainTransaction.begin();\r\n                        execute(req.getNewObjects(), this::createObject);\r\n                        mainTransaction.commit();\r\n                 } catch (Throwable e) {\r\n                        // mainTransaction.rollback(); // -- Include this in try-catch\r\n                 }\r\n           }\r\n    \r\n           @Transactional(value = TxType.REQUIRED)\r\n           public void execute(List&lt;BasicElement&gt; elements, Function&lt;Void, String&gt; function)\r\n                        throws InterruptedException, ExecutionException {\r\n                 final List&lt;Future&lt;?&gt;&gt; futureElements = new ArrayList&lt;&gt;();\r\n                 for (BasicElement el : elements) {\r\n                        futureElements.add(threadPoolExecutor.submit(() -&gt; {\r\n                              function.apply(el);\r\n                        }));\r\n                 }\r\n                 grapResults(futureElements);\r\n           }\r\n    \r\n           @Transactional(value = TxType.REQUIRED)\r\n           public Void createObject(BasicElement el) {\r\n                 BasicEntity be = convert(el);\r\n                 dao.persist(be);\r\n           }\r\n    }\r\n    \r\n    @Stateless\r\n    @Local\r\n    public class Dao {\r\n    \r\n           @PersistenceContext(unitName = &quot;basic&quot;)\r\n           protected EntityManager em;\r\n           \r\n           \r\n           public void persist(Object entity) {\r\n                 em.persist(entity);\r\n           }\r\n    }\r\n\r\n\r\nSo with above code, I cannot get it worked.\r\nI dont know how to tell each created thread to use the same UserTransaction or use the same entity manager. I have to make the UserTransaction thread safe, but do not know how to interact further.\r\n","title":"JavaEE: Bean Managed Transaction","body":"<p>I want to start parallel write process with some requirements.</p>\n<ol>\n<li>One commit only, to avoid inconsistent data</li>\n<li>rollback all when any of the threads is failed</li>\n</ol>\n<p>I am using Hibernate as ORM mapper and want to solve it by using a custom managed transaction.</p>\n<pre><code>@Stateless\n@TransactionManagement(javax.ejb.TransactionManagementType.BEAN)\npublic class Manager {\n\n       @EJB\n       private Dao dao;\n\n       @Resource\n       private SessionContext sessionContext;\n\n       private static ThreadPoolExecutor threadPoolExecutor = initThreadPoolExecutor();\n\n       private ThreadLocal&lt;UserTransaction&gt; threadLocal = new ThreadLocal&lt;UserTransaction&gt;();\n\n       public void write(BasicRequest req) {\n             UserTransaction mainTransaction = sessionContext.getUserTransaction();\n           //  threadLocal.set(mainTransaction);\n\n             try {\n                    mainTransaction.begin();\n                    execute(req.getNewObjects(), this::createObject);\n                    mainTransaction.commit();\n             } catch (Throwable e) {\n                    // mainTransaction.rollback(); // -- Include this in try-catch\n             }\n       }\n\n       @Transactional(value = TxType.REQUIRED)\n       public void execute(List&lt;BasicElement&gt; elements, Function&lt;Void, String&gt; function)\n                    throws InterruptedException, ExecutionException {\n             final List&lt;Future&lt;?&gt;&gt; futureElements = new ArrayList&lt;&gt;();\n             for (BasicElement el : elements) {\n                    futureElements.add(threadPoolExecutor.submit(() -&gt; {\n                          function.apply(el);\n                    }));\n             }\n             grapResults(futureElements);\n       }\n\n       @Transactional(value = TxType.REQUIRED)\n       public Void createObject(BasicElement el) {\n             BasicEntity be = convert(el);\n             dao.persist(be);\n       }\n}\n\n@Stateless\n@Local\npublic class Dao {\n\n       @PersistenceContext(unitName = &quot;basic&quot;)\n       protected EntityManager em;\n       \n       \n       public void persist(Object entity) {\n             em.persist(entity);\n       }\n}\n</code></pre>\n<p>So with above code, I cannot get it worked.\nI dont know how to tell each created thread to use the same UserTransaction or use the same entity manager. I have to make the UserTransaction thread safe, but do not know how to interact further.</p>\n"},{"tags":["java","multithreading","unit-testing","hashmap"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":5,"creation_date":1377900919,"post_id":18542037,"comment_id":27273694,"body_markdown":"This is essentially impossible: you can&#39;t force race conditions on demand.","body":"This is essentially impossible: you can&#39;t force race conditions on demand."},{"owner":{"account_id":1079173,"reputation":42590,"user_id":1076640,"display_name":"yshavit"},"score":0,"creation_date":1377900955,"post_id":18542037,"comment_id":27273710,"body_markdown":"IBM has/had a tool called ConTest that would weave your bytecode in such a way to make race conditions more common. I bet it would find problems with `HashMap` in a jiffy. I can&#39;t find it now, though; it could be they got rid of it, or rolled it into a (possibly proprietary) bundle of software.","body":"IBM has/had a tool called ConTest that would weave your bytecode in such a way to make race conditions more common. I bet it would find problems with <code>HashMap</code> in a jiffy. I can&#39;t find it now, though; it could be they got rid of it, or rolled it into a (possibly proprietary) bundle of software."},{"owner":{"account_id":267841,"reputation":690,"user_id":556259,"display_name":"Kyle Dewey"},"score":0,"creation_date":1377913249,"post_id":18542037,"comment_id":27276328,"body_markdown":"For high reliability, I&#39;ve had better luck with actual code proofs as opposed to testing.  Case in point, I worked on a system that required 6 weeks worth of running the exact same test repeatedly overnight to reveal one race condition.","body":"For high reliability, I&#39;ve had better luck with actual code proofs as opposed to testing.  Case in point, I worked on a system that required 6 weeks worth of running the exact same test repeatedly overnight to reveal one race condition."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1377931743,"post_id":18542037,"comment_id":27279244,"body_markdown":"Just because it &quot;works well&quot; doesn&#39;t make it thread safe. You can use tools to help find thread safety bugs but you can not prove some thing is thread safe by experimentation.  You have to understand the code and what it is doing. Some once &quot;proved&quot; that PI was a fraction by measuring 10 circles and concluding a fraction worked well in those cases. ;)","body":"Just because it &quot;works well&quot; doesn&#39;t make it thread safe. You can use tools to help find thread safety bugs but you can not prove some thing is thread safe by experimentation.  You have to understand the code and what it is doing. Some once &quot;proved&quot; that PI was a fraction by measuring 10 circles and concluding a fraction worked well in those cases. ;)"},{"owner":{"account_id":4503853,"reputation":536,"user_id":3661748,"display_name":"cody.tv.weber"},"score":0,"creation_date":1578346491,"post_id":18542037,"comment_id":105401938,"body_markdown":"You could slam the code with a few nested for-loop parallel streams.  If you have enough loops, technically the test is still flaky, but the probability would greatly increase of reproducing errors.  I used this to prove some thread safety issues with some of our code using unit tests.","body":"You could slam the code with a few nested for-loop parallel streams.  If you have enough loops, technically the test is still flaky, but the probability would greatly increase of reproducing errors.  I used this to prove some thread safety issues with some of our code using unit tests."},{"owner":{"account_id":1042456,"reputation":3429,"user_id":1048186,"accept_rate":80,"display_name":"Josiah Yoder"},"score":0,"creation_date":1699449580,"post_id":18542037,"comment_id":136532393,"body_markdown":"I like this [fewer-voted answer](https://stackoverflow.com/a/41209165/1048186) for its simplicity and actual output examples.","body":"I like this <a href=\"https://stackoverflow.com/a/41209165/1048186\">fewer-voted answer</a> for its simplicity and actual output examples."}],"answers":[{"tags":[],"owner":{"account_id":41920,"reputation":56500,"user_id":121993,"accept_rate":77,"display_name":"Jeff Storey"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1377900124,"creation_date":1377900124,"answer_id":18542082,"question_id":18542037,"body_markdown":"Is reading the API docs enough? There is a statement in there:\r\n\r\n&gt; Note that this implementation is not synchronized. If multiple threads\r\n&gt; access a hash map concurrently, and at least one of the threads\r\n&gt; modifies the map structurally, it must be synchronized externally. (A\r\n&gt; structural modification is any operation that adds or deletes one or\r\n&gt; more mappings; merely changing the value associated with a key that an\r\n&gt; instance already contains is not a structural modification.) This is\r\n&gt; typically accomplished by synchronizing on some object that naturally\r\n&gt; encapsulates the map. If no such object exists, the map should be\r\n&gt; &quot;wrapped&quot; using the Collections.synchronizedMap method. This is best\r\n&gt; done at creation time, to prevent accidental unsynchronized access to\r\n&gt; the map:\r\n\r\nThe problem with thread safety is that it&#39;s hard to prove through a test. It *could* be fine most of the times. Your best bet would be to just run a bunch of threads that are getting/putting and you&#39;ll probably get some concurrency errors.\r\n\r\nI suggest using a `ConcurrentHashMap` and trust that the Java team saying that `HashMap` is not synchronized is enough.\r\n","title":"How to prove that HashMap in java is not thread-safe","body":"<p>Is reading the API docs enough? There is a statement in there:</p>\n\n<blockquote>\n  <p>Note that this implementation is not synchronized. If multiple threads\n  access a hash map concurrently, and at least one of the threads\n  modifies the map structurally, it must be synchronized externally. (A\n  structural modification is any operation that adds or deletes one or\n  more mappings; merely changing the value associated with a key that an\n  instance already contains is not a structural modification.) This is\n  typically accomplished by synchronizing on some object that naturally\n  encapsulates the map. If no such object exists, the map should be\n  \"wrapped\" using the Collections.synchronizedMap method. This is best\n  done at creation time, to prevent accidental unsynchronized access to\n  the map:</p>\n</blockquote>\n\n<p>The problem with thread safety is that it's hard to prove through a test. It <em>could</em> be fine most of the times. Your best bet would be to just run a bunch of threads that are getting/putting and you'll probably get some concurrency errors.</p>\n\n<p>I suggest using a <code>ConcurrentHashMap</code> and trust that the Java team saying that <code>HashMap</code> is not synchronized is enough.</p>\n"},{"comments":[{"owner":{"account_id":1010738,"reputation":8534,"user_id":1023368,"accept_rate":41,"display_name":"Alexander Bezrodniy"},"score":0,"creation_date":1377900379,"post_id":18542110,"comment_id":27273511,"body_markdown":"I&#39;ve read it, the question not about what to use (sure, I&#39;ll use thread-safe implementation of Map), but about how to check that HashMap can have bugs in multithread env.","body":"I&#39;ve read it, the question not about what to use (sure, I&#39;ll use thread-safe implementation of Map), but about how to check that HashMap can have bugs in multithread env."},{"owner":{"account_id":3226845,"reputation":174,"user_id":2722998,"display_name":"parsifal"},"score":0,"creation_date":1377900603,"post_id":18542110,"comment_id":27273576,"body_markdown":"@AlexanderBezrodniy - see edit for a possible demonstration. As other people have said, it&#39;s extremely difficult to demonstrate race conditions. Better is to read and understand the source, or rely on the documentation.","body":"@AlexanderBezrodniy - see edit for a possible demonstration. As other people have said, it&#39;s extremely difficult to demonstrate race conditions. Better is to read and understand the source, or rely on the documentation."}],"tags":[],"owner":{"account_id":3226845,"reputation":174,"user_id":2722998,"display_name":"parsifal"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1377900619,"creation_date":1377900271,"answer_id":18542110,"question_id":18542037,"body_markdown":"&gt; Are there any other ways to prove it?\r\n\r\nHow about reading the [documentation][1] (and paying attention to the emphasized &quot;must&quot;):\r\n\r\n&gt;  If multiple threads access a hash map concurrently, and at least one of the threads modifies the map structurally, it *must* be synchronized externally\r\n\r\nIf you are going to attempt to write a unit test that demonstrates incorrect behavior, I recommend the following:\r\n\r\n - Create a bunch of keys that all have the same hashcode (say 30 or 40)\r\n - Add values to the map for each key\r\n - Spawn a separate thread for the key, which has an infinite loop that (1) asserts that the key is present int the map, (2) removes the mapping for that key, and (3) adds the mapping back.\r\n\r\nIf you&#39;re lucky, the assertion will fail at some point, because the linked list behind the hash bucket will be corrupted. If you&#39;re unlucky, it will appear that `HashMap` is indeed threadsafe despite the documentation.\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html","title":"How to prove that HashMap in java is not thread-safe","body":"<blockquote>\n  <p>Are there any other ways to prove it?</p>\n</blockquote>\n\n<p>How about reading the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html\" rel=\"noreferrer\">documentation</a> (and paying attention to the emphasized \"must\"):</p>\n\n<blockquote>\n  <p>If multiple threads access a hash map concurrently, and at least one of the threads modifies the map structurally, it <em>must</em> be synchronized externally</p>\n</blockquote>\n\n<p>If you are going to attempt to write a unit test that demonstrates incorrect behavior, I recommend the following:</p>\n\n<ul>\n<li>Create a bunch of keys that all have the same hashcode (say 30 or 40)</li>\n<li>Add values to the map for each key</li>\n<li>Spawn a separate thread for the key, which has an infinite loop that (1) asserts that the key is present int the map, (2) removes the mapping for that key, and (3) adds the mapping back.</li>\n</ul>\n\n<p>If you're lucky, the assertion will fail at some point, because the linked list behind the hash bucket will be corrupted. If you're unlucky, it will appear that <code>HashMap</code> is indeed threadsafe despite the documentation.</p>\n"},{"tags":[],"owner":{"account_id":1903805,"reputation":41397,"user_id":1719067,"accept_rate":73,"display_name":"Narendra Pathai"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1538030470,"creation_date":1377900496,"answer_id":18542149,"question_id":18542037,"body_markdown":"It is hard to simulate Race but looking at the OpenJDK source for `put()` method of HashMap:\r\n\r\n    public V put(K key, V value) {\r\n        if (key == null)\r\n            return putForNullKey(value);\r\n             \r\n        //Operation 1       \r\n        int hash = hash(key.hashCode());\r\n        int i = indexFor(hash, table.length);\r\n        for (Entry&lt;K,V&gt; e = table[i]; e != null; e = e.next) {\r\n            Object k;\r\n            if (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) {\r\n                V oldValue = e.value;\r\n                e.value = value;\r\n                e.recordAccess(this);\r\n                return oldValue;\r\n            }\r\n        } \r\n\r\n        //Operation 2\r\n        modCount++;\r\n\r\n        //Operation 3\r\n        addEntry(hash, key, value, i);\r\n        return null;\r\n    }\r\n\r\nAs you can see `put()` involves 3 operations which are *not synchronized*. And compound operations are *non thread safe*. So theoretically it is proven that `HashMap` is not thread safe.","title":"How to prove that HashMap in java is not thread-safe","body":"<p>It is hard to simulate Race but looking at the OpenJDK source for <code>put()</code> method of HashMap:</p>\n\n<pre><code>public V put(K key, V value) {\n    if (key == null)\n        return putForNullKey(value);\n\n    //Operation 1       \n    int hash = hash(key.hashCode());\n    int i = indexFor(hash, table.length);\n    for (Entry&lt;K,V&gt; e = table[i]; e != null; e = e.next) {\n        Object k;\n        if (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) {\n            V oldValue = e.value;\n            e.value = value;\n            e.recordAccess(this);\n            return oldValue;\n        }\n    } \n\n    //Operation 2\n    modCount++;\n\n    //Operation 3\n    addEntry(hash, key, value, i);\n    return null;\n}\n</code></pre>\n\n<p>As you can see <code>put()</code> involves 3 operations which are <em>not synchronized</em>. And compound operations are <em>non thread safe</em>. So theoretically it is proven that <code>HashMap</code> is not thread safe.</p>\n"},{"tags":[],"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1542149280,"creation_date":1377900613,"answer_id":18542170,"question_id":18542037,"body_markdown":"&gt;  I need to prove via unit tests that it will have problems in multithread environment.\r\n\r\nThis is going to be tremendously hard to do. Race conditions are very hard to demonstrate. You could certainly write a program which does puts and gets into a HashMap in a large number of threads but logging, `volatile` fields, other locks, and other timing details of your application may make it extremely hard to force your particular code to fail.\r\n\r\n---\r\n\r\nHere&#39;s a stupid little `HashMap` failure test case.  It fails because it times out when the threads go into an infinite loop because of memory corruption of `HashMap`.  However, it may not fail for you depending on number of cores and other architecture details.\r\n\r\n\t@Test(timeout = 10000)\r\n\tpublic void runTest() throws Exception {\r\n\t\tfinal Map&lt;Integer, String&gt; map = new HashMap&lt;Integer, String&gt;();\r\n\t\tExecutorService pool = Executors.newFixedThreadPool(10);\r\n\t\tfor (int i = 0; i &lt; 10; i++) {\r\n\t\t\tpool.submit(new Runnable() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void run() {\r\n\t\t\t\t\tfor (int i = 0; i &lt; 10000; i++) {\r\n\t\t\t\t\t\tmap.put(i, &quot;wow&quot;);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tpool.shutdown();\r\n\t\tpool.awaitTermination(Long.MAX_VALUE, TimeUnit.MILLISECONDS);\r\n\t}\r\n","title":"How to prove that HashMap in java is not thread-safe","body":"<blockquote>\n  <p>I need to prove via unit tests that it will have problems in multithread environment.</p>\n</blockquote>\n\n<p>This is going to be tremendously hard to do. Race conditions are very hard to demonstrate. You could certainly write a program which does puts and gets into a HashMap in a large number of threads but logging, <code>volatile</code> fields, other locks, and other timing details of your application may make it extremely hard to force your particular code to fail.</p>\n\n<hr>\n\n<p>Here's a stupid little <code>HashMap</code> failure test case.  It fails because it times out when the threads go into an infinite loop because of memory corruption of <code>HashMap</code>.  However, it may not fail for you depending on number of cores and other architecture details.</p>\n\n<pre><code>@Test(timeout = 10000)\npublic void runTest() throws Exception {\n    final Map&lt;Integer, String&gt; map = new HashMap&lt;Integer, String&gt;();\n    ExecutorService pool = Executors.newFixedThreadPool(10);\n    for (int i = 0; i &lt; 10; i++) {\n        pool.submit(new Runnable() {\n            @Override\n            public void run() {\n                for (int i = 0; i &lt; 10000; i++) {\n                    map.put(i, \"wow\");\n                }\n            }\n        });\n    }\n    pool.shutdown();\n    pool.awaitTermination(Long.MAX_VALUE, TimeUnit.MILLISECONDS);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":440753,"reputation":752,"user_id":830486,"display_name":"DSway"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1378230937,"creation_date":1377902127,"answer_id":18542423,"question_id":18542037,"body_markdown":"It may be possible, but will never be a perfect test.  Race conditions are just too unpredictable.  That being said, I wrote a similar type of test to help fix a threading issue with a proprietary data structure, and in my case, it was much easier to prove that something was wrong (before the fix) than to prove that nothing would go wrong (after the fix).  You could probably construct a multi-threaded test that will eventually fail with sufficient time and the right parameters.\r\n\r\n[This post](https://stackoverflow.com/questions/2688629/is-a-hashmap-thread-safe-for-different-keys?rq=1) may be helpful in identifying areas to focus on in your test and has some other suggestions for optional replacements.\r\n","title":"How to prove that HashMap in java is not thread-safe","body":"<p>It may be possible, but will never be a perfect test.  Race conditions are just too unpredictable.  That being said, I wrote a similar type of test to help fix a threading issue with a proprietary data structure, and in my case, it was much easier to prove that something was wrong (before the fix) than to prove that nothing would go wrong (after the fix).  You could probably construct a multi-threaded test that will eventually fail with sufficient time and the right parameters.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/2688629/is-a-hashmap-thread-safe-for-different-keys?rq=1\">This post</a> may be helpful in identifying areas to focus on in your test and has some other suggestions for optional replacements.</p>\n"},{"comments":[{"owner":{"account_id":1924499,"reputation":769,"user_id":1735269,"accept_rate":40,"display_name":"somshivam"},"score":0,"creation_date":1488256125,"post_id":41209165,"comment_id":72138972,"body_markdown":"This does demonstrate that the put operation is a compound operation which is not thread safe, if you put it in synchronized block it works every time.","body":"This does demonstrate that the put operation is a compound operation which is not thread safe, if you put it in synchronized block it works every time."},{"owner":{"account_id":1042456,"reputation":3429,"user_id":1048186,"accept_rate":80,"display_name":"Josiah Yoder"},"score":0,"creation_date":1699449506,"post_id":41209165,"comment_id":136532380,"body_markdown":"This answer&#39;s inclusion of actual errors adds value to some of the higher-voted answers.","body":"This answer&#39;s inclusion of actual errors adds value to some of the higher-voted answers."}],"tags":[],"owner":{"account_id":2175164,"reputation":5597,"user_id":1925997,"accept_rate":64,"display_name":"Kishore Bandi"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1699449473,"creation_date":1482070429,"answer_id":41209165,"question_id":18542037,"body_markdown":"Here is some sample code I wrote which is able to demonstrate the problems with hashmap. In this code, we try to insert 30000 items into the hashmap using 10 threads (3000 items per thread).\r\n\r\nSo after all the threads are completed, you should ideally see that the size of hashmap should be 30000. But the actual output would be **either an exception while editing the hashmap** or the final count is **less than 30000**.\r\n\r\n    class TempValue {\r\n        int value = 3;\r\n    \r\n        @Override\r\n        public int hashCode() {\r\n            return 1; // All objects of this class will have same hashcode.\r\n        }\r\n    }\r\n    \r\n    public class TestClass {\r\n    \tpublic static void main(String args[]) {\r\n    \t\tMap&lt;TempValue, TempValue&gt; myMap = new HashMap&lt;&gt;();\r\n    \t\tList&lt;Thread&gt; listOfThreads = new ArrayList&lt;&gt;();\r\n\r\n    \t\t// Create 10 Threads\r\n    \t\tfor (int i = 0; i &lt; 10; i++) {\r\n    \t\t\tThread thread = new Thread(() -&gt; {\r\n\r\n    \t\t    \t// Let Each thread insert 3000 Items\r\n    \t\t\t\tfor (int j = 0; j &lt; 3000; j++) {\r\n    \t\t\t\t\tTempValue key = new TempValue();\r\n    \t\t\t\t\tmyMap.put(key, key);\r\n    \t\t\t\t}\r\n\r\n    \t\t\t});\r\n    \t\t\tthread.start();\r\n    \t\t\tlistOfThreads.add(thread);\r\n    \t\t}\r\n\r\n    \t\tfor (Thread thread : listOfThreads) {\r\n    \t\t\tthread.join();\r\n    \t\t}\r\n    \t\tSystem.out.println(&quot;Count should be 30000, actual is : &quot; + myMap.size());\r\n    \t}\r\n    }\r\n\r\n\r\n# Output 1: (Unexpected result)\r\n\r\n    Count should be 30000, actual is : 29486\r\n\r\n# Output 2: (Exception)\r\n\r\n    java.util.HashMap$Node cannot be cast to java.util.HashMap$TreeNodejava.lang.ClassCastException: java.util.HashMap$Node cannot be cast to java.util.HashMap$TreeNode\r\n    \tat java.util.HashMap$TreeNode.moveRootToFront(HashMap.java:1819)\r\n    \tat java.util.HashMap$TreeNode.treeify(HashMap.java:1936)\r\n    \tat java.util.HashMap.treeifyBin(HashMap.java:771)\r\n    \tat java.util.HashMap.putVal(HashMap.java:643)\r\n    \tat java.util.HashMap.put(HashMap.java:611)\r\n    \tat TestClass.lambda$0(TestClass.java:340)\r\n    \tat java.lang.Thread.run(Thread.java:745)\r\n\r\n# There are still issues if we reduce the number of collisions:\r\n\r\nIn the above example the hashcode for all objects of `TempValue` class was the same (**i.e., 1**). So you might be wondering, this issue with HashMap might occur only in case there is a collision (due to hashcode).\r\n\r\nI tried another example. Modify the TempValue class to\r\n\r\n    class TempValue {\r\n        int value = 3;\r\n    }\r\n\r\nComparing with the TempValue class above, you can see we are removing the hard-coded hash value for this class.  Now it will use the default hash which is different for every instance of the class.\r\n\r\nNow re-execute the same code. &lt;br/&gt;**Out of every 5 runs, I see 2-3 runs still give a different output than 30000**.&lt;br/&gt;\r\nSo even if you usually don&#39;t have much collisions, you might still end up with an issue. (Maybe due to rebuilding of HashMap, etc.)\r\n\r\n# There are no problems if you use a concurrent hashmap:\r\n\r\nDespite the consistent race condition errors demonstrated above, if you modify the line \r\n\r\n`Map&lt;TempValue, TempValue&gt; myMap = new HashMap&lt;&gt;();` \r\n\r\nto use a [ConcurrentHashMap][1] the output is always 30000.  Similarly, if you put all the lines that use myMap within a synchronized block, the output is also 30000.\r\n\r\nOverall these examples show the issue with HashMap which ConcurrentHashMap handles.\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentHashMap.html","title":"How to prove that HashMap in java is not thread-safe","body":"<p>Here is some sample code I wrote which is able to demonstrate the problems with hashmap. In this code, we try to insert 30000 items into the hashmap using 10 threads (3000 items per thread).</p>\n<p>So after all the threads are completed, you should ideally see that the size of hashmap should be 30000. But the actual output would be <strong>either an exception while editing the hashmap</strong> or the final count is <strong>less than 30000</strong>.</p>\n<pre><code>class TempValue {\n    int value = 3;\n\n    @Override\n    public int hashCode() {\n        return 1; // All objects of this class will have same hashcode.\n    }\n}\n\npublic class TestClass {\n    public static void main(String args[]) {\n        Map&lt;TempValue, TempValue&gt; myMap = new HashMap&lt;&gt;();\n        List&lt;Thread&gt; listOfThreads = new ArrayList&lt;&gt;();\n\n        // Create 10 Threads\n        for (int i = 0; i &lt; 10; i++) {\n            Thread thread = new Thread(() -&gt; {\n\n                // Let Each thread insert 3000 Items\n                for (int j = 0; j &lt; 3000; j++) {\n                    TempValue key = new TempValue();\n                    myMap.put(key, key);\n                }\n\n            });\n            thread.start();\n            listOfThreads.add(thread);\n        }\n\n        for (Thread thread : listOfThreads) {\n            thread.join();\n        }\n        System.out.println(&quot;Count should be 30000, actual is : &quot; + myMap.size());\n    }\n}\n</code></pre>\n<h1>Output 1: (Unexpected result)</h1>\n<pre><code>Count should be 30000, actual is : 29486\n</code></pre>\n<h1>Output 2: (Exception)</h1>\n<pre><code>java.util.HashMap$Node cannot be cast to java.util.HashMap$TreeNodejava.lang.ClassCastException: java.util.HashMap$Node cannot be cast to java.util.HashMap$TreeNode\n    at java.util.HashMap$TreeNode.moveRootToFront(HashMap.java:1819)\n    at java.util.HashMap$TreeNode.treeify(HashMap.java:1936)\n    at java.util.HashMap.treeifyBin(HashMap.java:771)\n    at java.util.HashMap.putVal(HashMap.java:643)\n    at java.util.HashMap.put(HashMap.java:611)\n    at TestClass.lambda$0(TestClass.java:340)\n    at java.lang.Thread.run(Thread.java:745)\n</code></pre>\n<h1>There are still issues if we reduce the number of collisions:</h1>\n<p>In the above example the hashcode for all objects of <code>TempValue</code> class was the same (<strong>i.e., 1</strong>). So you might be wondering, this issue with HashMap might occur only in case there is a collision (due to hashcode).</p>\n<p>I tried another example. Modify the TempValue class to</p>\n<pre><code>class TempValue {\n    int value = 3;\n}\n</code></pre>\n<p>Comparing with the TempValue class above, you can see we are removing the hard-coded hash value for this class.  Now it will use the default hash which is different for every instance of the class.</p>\n<p>Now re-execute the same code. <br/><strong>Out of every 5 runs, I see 2-3 runs still give a different output than 30000</strong>.<br/>\nSo even if you usually don't have much collisions, you might still end up with an issue. (Maybe due to rebuilding of HashMap, etc.)</p>\n<h1>There are no problems if you use a concurrent hashmap:</h1>\n<p>Despite the consistent race condition errors demonstrated above, if you modify the line</p>\n<p><code>Map&lt;TempValue, TempValue&gt; myMap = new HashMap&lt;&gt;();</code></p>\n<p>to use a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentHashMap.html\" rel=\"nofollow noreferrer\">ConcurrentHashMap</a> the output is always 30000.  Similarly, if you put all the lines that use myMap within a synchronized block, the output is also 30000.</p>\n<p>Overall these examples show the issue with HashMap which ConcurrentHashMap handles.</p>\n"},{"comments":[{"owner":{"account_id":246941,"reputation":1582,"user_id":521347,"accept_rate":60,"display_name":"Sumit Desai"},"score":0,"creation_date":1572009171,"post_id":45545924,"comment_id":103437429,"body_markdown":"Can you please throw some light on how this is prevented using ConcurrentHashMap? For ConcurrentHashMap, does resizing take place for 1 out of 16 parts at a time or for whole map at once?","body":"Can you please throw some light on how this is prevented using ConcurrentHashMap? For ConcurrentHashMap, does resizing take place for 1 out of 16 parts at a time or for whole map at once?"},{"owner":{"account_id":126587,"reputation":1058,"user_id":323177,"accept_rate":62,"display_name":"Woodz"},"score":0,"creation_date":1576554720,"post_id":45545924,"comment_id":104928304,"body_markdown":"@SumitDesai I recommend reading https://dzone.com/articles/how-concurrenthashmap-works-internally-in-java. Specifically to answer your question, individual Segments are resized whilst being locked, so yes, resizing works only on a part of the map at time. The specific number of Segments used depends on the initial capacity (if set).","body":"@SumitDesai I recommend reading <a href=\"https://dzone.com/articles/how-concurrenthashmap-works-internally-in-java\" rel=\"nofollow noreferrer\">dzone.com/articles/&hellip;</a>. Specifically to answer your question, individual Segments are resized whilst being locked, so yes, resizing works only on a part of the map at time. The specific number of Segments used depends on the initial capacity (if set)."},{"owner":{"account_id":2901818,"reputation":1251,"user_id":2488286,"display_name":"user2488286"},"score":1,"creation_date":1578219822,"post_id":45545924,"comment_id":105361988,"body_markdown":"&quot;HashMap#resize() assigns the table field a new empty array with a bigger capacity&quot;...\nShouldn&#39;t we first create a new empty array, populate it by rehashing all the keys present in the original array and then assign that array = newArray ? Basically, while new array is being populated, original array can serve read request. In that case we won&#39;t require thread safety for W/R scenarion ?","body":"&quot;HashMap#resize() assigns the table field a new empty array with a bigger capacity&quot;... Shouldn&#39;t we first create a new empty array, populate it by rehashing all the keys present in the original array and then assign that array = newArray ? Basically, while new array is being populated, original array can serve read request. In that case we won&#39;t require thread safety for W/R scenarion ?"},{"owner":{"account_id":4175649,"reputation":1442,"user_id":3422257,"display_name":"robert"},"score":1,"creation_date":1599348370,"post_id":45545924,"comment_id":112748058,"body_markdown":"It&#39;s enough to simply do `map.get(targetKey)` in the while loop. Also, this is so effective that even replacing the `while` loop with a IntStream(0, 10) triggers the NPE.\n\nThis works EXTREMELY well, nice work Arterm Novikov.","body":"It&#39;s enough to simply do <code>map.get(targetKey)</code> in the while loop. Also, this is so effective that even replacing the <code>while</code> loop with a IntStream(0, 10) triggers the NPE.  This works EXTREMELY well, nice work Arterm Novikov."},{"owner":{"account_id":10205504,"reputation":404,"user_id":7919608,"display_name":"Austin"},"score":0,"creation_date":1626689874,"post_id":45545924,"comment_id":120951917,"body_markdown":"I had the same question as user2488286 above. Did you get an answer for that? Why not have the original array serve the requests until the 2nd array is ready?","body":"I had the same question as user2488286 above. Did you get an answer for that? Why not have the original array serve the requests until the 2nd array is ready?"},{"owner":{"account_id":5758201,"reputation":533,"user_id":4545405,"accept_rate":36,"display_name":"Lake_Lagunita"},"score":0,"creation_date":1630046123,"post_id":45545924,"comment_id":121853083,"body_markdown":"Excuse me, but what do you mean by &quot;If count those exceptions, I get around 200 000&quot;? you mean when run this code, you will get around 200000 lines of exceptions?","body":"Excuse me, but what do you mean by &quot;If count those exceptions, I get around 200 000&quot;? you mean when run this code, you will get around 200000 lines of exceptions?"}],"tags":[],"owner":{"account_id":3352991,"reputation":4106,"user_id":2816631,"accept_rate":50,"display_name":"Artem Novikov"},"comment_count":6,"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1614067673,"creation_date":1502105543,"answer_id":45545924,"question_id":18542037,"body_markdown":"This is quite easy to prove.\r\n\r\n## Shortly ##\r\nA hash map is based on an array, where each item represents a bucket. As more keys are added, the buckets grow and at a certain threshold the **array is recreated** with a bigger size so that its buckets are spread more evenly (performance considerations). During the array recreation, the array becomes empty, which results in empty result for the caller, until the recreation completes.\r\n\r\n## Details and Proof ##\r\nIt means that sometimes `HashMap#put()` will internally call `HashMap#resize()` to make the underlying array bigger.\r\n\r\n`HashMap#resize()` assigns the `table` field a new **empty array** with a bigger capacity and populates it with the old items. While this population happens, the underlying array **doesn&#39;t contain all of the old items** and calling `HashMap#get()` with an existing key may return `null`.\r\n\r\nThe following code demonstrates that. You are very likely to get the exception that will mean the `HashMap` is not thread safe. I chose the target key as `65 535` - this way it will be the last element in the array, thus being the last element during re-population which increases the possibility of getting `null` on `HashMap#get()` (to see why, see `HashMap#put()` implementation).\r\n\r\n    final Map&lt;Integer, String&gt; map = new HashMap&lt;&gt;();\r\n\r\n    final Integer targetKey = 0b1111_1111_1111_1111; // 65 535\r\n    final String targetValue = &quot;v&quot;;\r\n    map.put(targetKey, targetValue);\r\n\r\n    new Thread(() -&gt; {\r\n        IntStream.range(0, targetKey).forEach(key -&gt; map.put(key, &quot;someValue&quot;));\r\n    }).start();\r\n\r\n\r\n    while (true) {\r\n        if (!targetValue.equals(map.get(targetKey))) {\r\n            throw new RuntimeException(&quot;HashMap is not thread safe.&quot;);\r\n        }\r\n    }\r\n\r\nOne thread adds new keys to the map. The other thread constantly checks the `targetKey` is present.\r\n\r\nIf count those exceptions, I get around `200 000`.","title":"How to prove that HashMap in java is not thread-safe","body":"<p>This is quite easy to prove.</p>\n<h2>Shortly</h2>\n<p>A hash map is based on an array, where each item represents a bucket. As more keys are added, the buckets grow and at a certain threshold the <strong>array is recreated</strong> with a bigger size so that its buckets are spread more evenly (performance considerations). During the array recreation, the array becomes empty, which results in empty result for the caller, until the recreation completes.</p>\n<h2>Details and Proof</h2>\n<p>It means that sometimes <code>HashMap#put()</code> will internally call <code>HashMap#resize()</code> to make the underlying array bigger.</p>\n<p><code>HashMap#resize()</code> assigns the <code>table</code> field a new <strong>empty array</strong> with a bigger capacity and populates it with the old items. While this population happens, the underlying array <strong>doesn't contain all of the old items</strong> and calling <code>HashMap#get()</code> with an existing key may return <code>null</code>.</p>\n<p>The following code demonstrates that. You are very likely to get the exception that will mean the <code>HashMap</code> is not thread safe. I chose the target key as <code>65 535</code> - this way it will be the last element in the array, thus being the last element during re-population which increases the possibility of getting <code>null</code> on <code>HashMap#get()</code> (to see why, see <code>HashMap#put()</code> implementation).</p>\n<pre><code>final Map&lt;Integer, String&gt; map = new HashMap&lt;&gt;();\n\nfinal Integer targetKey = 0b1111_1111_1111_1111; // 65 535\nfinal String targetValue = &quot;v&quot;;\nmap.put(targetKey, targetValue);\n\nnew Thread(() -&gt; {\n    IntStream.range(0, targetKey).forEach(key -&gt; map.put(key, &quot;someValue&quot;));\n}).start();\n\n\nwhile (true) {\n    if (!targetValue.equals(map.get(targetKey))) {\n        throw new RuntimeException(&quot;HashMap is not thread safe.&quot;);\n    }\n}\n</code></pre>\n<p>One thread adds new keys to the map. The other thread constantly checks the <code>targetKey</code> is present.</p>\n<p>If count those exceptions, I get around <code>200 000</code>.</p>\n"},{"tags":[],"owner":{"account_id":7439229,"reputation":105,"user_id":5657520,"display_name":"Devashish Priyadarshi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1532601485,"creation_date":1532601485,"answer_id":51536829,"question_id":18542037,"body_markdown":"You can create multiple threads each adding an element to a hashmap and iterating over it.\r\ni.e. In the run method we have to use &quot;put&quot; and then iterate using iterator.\r\n\r\nFor the case of HashMap we get ConcurrentModificationException while for ConcurrentHashMap we dont get.\r\n\r\n\r\n","title":"How to prove that HashMap in java is not thread-safe","body":"<p>You can create multiple threads each adding an element to a hashmap and iterating over it.\ni.e. In the run method we have to use \"put\" and then iterate using iterator.</p>\n\n<p>For the case of HashMap we get ConcurrentModificationException while for ConcurrentHashMap we dont get.</p>\n"},{"tags":[],"owner":{"account_id":7999892,"reputation":2455,"user_id":6035082,"display_name":"M S"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1568235866,"creation_date":1568235866,"answer_id":57896781,"question_id":18542037,"body_markdown":"## Most probable race condition at java.util.HashMap implementation ##\r\nMost of hashMaps failing&#160;if we are trying to read values while&#160;resizing or rehashing step executing. Resizing and rehashing operation executed under certain conditions most commonly if exceed bucket threshold. This code proves that if I call resizing externally or If I put more element than threshold and tend to call resizing operation internally causes to some null read which shows that HashMap is not thread safe. There should be more race condition but it is enough to prove it is not Thread Safe.\r\n\r\n## Practically proof of race condition ##\r\n\r\n    import java.lang.reflect.InvocationTargetException;\r\n    import java.lang.reflect.Method;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    import java.util.stream.IntStream;\r\n    \r\n    public class HashMapThreadSafetyTest {\r\n        public static void main(String[] args) {\r\n            try {\r\n                (new HashMapThreadSafetyTest()).testIt();\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        private void threadOperation(int number, Map&lt;Integer, String&gt; map) {\r\n            map.put(number, &quot;hashMapTest&quot;);\r\n            while (map.get(number) != null);\r\n            //If code passes to this line that means we did some null read operation which should not be\r\n            System.out.println(&quot;Null Value Number: &quot; + number);\r\n        }\r\n        private void callHashMapResizeExternally(Map&lt;Integer, String&gt; map)\r\n                throws NoSuchMethodException, InvocationTargetException, IllegalAccessException {\r\n            Method method = map.getClass().getDeclaredMethod(&quot;resize&quot;);\r\n            method.setAccessible(true);\r\n            System.out.println(&quot;calling resize&quot;);\r\n            method.invoke(map);\r\n        }\r\n    \r\n        private void testIt()\r\n                throws InterruptedException, NoSuchMethodException, IllegalAccessException, InvocationTargetException {\r\n            final Map&lt;Integer, String&gt; map = new HashMap&lt;&gt;();\r\n            IntStream.range(0, 12).forEach(i -&gt; new Thread(() -&gt; threadOperation(i, map)).start());\r\n            Thread.sleep(60000);\r\n            // First loop should not show any null value number untill calling resize method of hashmap externally.\r\n            callHashMapResizeExternally(map);\r\n            // First loop should fail from now on and should print some Null Value Numbers to the out.\r\n            System.out.println(&quot;Loop count is 12 since hashmap initially created for 2^4 bucket and threshold of resizing&quot;\r\n                    + &quot;0.75*2^4 = 12 In first loop it should not fail since we do not resizing hashmap. &quot;\r\n                    + &quot;\\n\\nAfter 60 second: after calling external resizing operation with reflection should forcefully fail&quot;\r\n                    + &quot;thread safety&quot;);\r\n    \r\n            Thread.sleep(2000);\r\n            final Map&lt;Integer, String&gt; map2 = new HashMap&lt;&gt;();\r\n            IntStream.range(100, 113).forEach(i -&gt; new Thread(() -&gt; threadOperation(i, map2)).start());\r\n            // Second loop should fail from now on and should print some Null Value Numbers to the out. Because it is\r\n            // iterating more than 12 that causes hash map resizing and rehashing\r\n            System.out.println(&quot;It should fail directly since it is exceeding hashmap initial threshold and it will resize&quot;\r\n                    + &quot;when loop iterate 13rd time&quot;);\r\n        }\r\n    }\r\n\r\n\r\n----------\r\n## Example output ##\r\n\r\n    No null value should be printed untill thread sleep line passed\r\n    calling resize\r\n    Loop count is 12 since hashmap initially created for 2^4 bucket and threshold of resizing0.75*2^4 = 12 In first loop it should not fail since we do not resizing hashmap. \r\n    \r\n    After 60 second: after calling external resizing operation with reflection should forcefully failthread safety\r\n    Null Value Number: 11\r\n    Null Value Number: 5\r\n    Null Value Number: 6\r\n    Null Value Number: 8\r\n    Null Value Number: 0\r\n    Null Value Number: 7\r\n    Null Value Number: 2\r\n    It should fail directly since it is exceeding hashmap initial threshold and it will resizewhen loop iterate 13th time\r\n    Null Value Number: 111\r\n    Null Value Number: 100\r\n    Null Value Number: 107\r\n    Null Value Number: 110\r\n    Null Value Number: 104\r\n    Null Value Number: 106\r\n    Null Value Number: 109\r\n    Null Value Number: 105\r\n\r\n----------\r\n\r\n\r\n\r\n","title":"How to prove that HashMap in java is not thread-safe","body":"<h2>Most probable race condition at java.util.HashMap implementation</h2>\n\n<p>Most of hashMaps failing if we are trying to read values while resizing or rehashing step executing. Resizing and rehashing operation executed under certain conditions most commonly if exceed bucket threshold. This code proves that if I call resizing externally or If I put more element than threshold and tend to call resizing operation internally causes to some null read which shows that HashMap is not thread safe. There should be more race condition but it is enough to prove it is not Thread Safe.</p>\n\n<h2>Practically proof of race condition</h2>\n\n<pre><code>import java.lang.reflect.InvocationTargetException;\nimport java.lang.reflect.Method;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.stream.IntStream;\n\npublic class HashMapThreadSafetyTest {\n    public static void main(String[] args) {\n        try {\n            (new HashMapThreadSafetyTest()).testIt();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    private void threadOperation(int number, Map&lt;Integer, String&gt; map) {\n        map.put(number, \"hashMapTest\");\n        while (map.get(number) != null);\n        //If code passes to this line that means we did some null read operation which should not be\n        System.out.println(\"Null Value Number: \" + number);\n    }\n    private void callHashMapResizeExternally(Map&lt;Integer, String&gt; map)\n            throws NoSuchMethodException, InvocationTargetException, IllegalAccessException {\n        Method method = map.getClass().getDeclaredMethod(\"resize\");\n        method.setAccessible(true);\n        System.out.println(\"calling resize\");\n        method.invoke(map);\n    }\n\n    private void testIt()\n            throws InterruptedException, NoSuchMethodException, IllegalAccessException, InvocationTargetException {\n        final Map&lt;Integer, String&gt; map = new HashMap&lt;&gt;();\n        IntStream.range(0, 12).forEach(i -&gt; new Thread(() -&gt; threadOperation(i, map)).start());\n        Thread.sleep(60000);\n        // First loop should not show any null value number untill calling resize method of hashmap externally.\n        callHashMapResizeExternally(map);\n        // First loop should fail from now on and should print some Null Value Numbers to the out.\n        System.out.println(\"Loop count is 12 since hashmap initially created for 2^4 bucket and threshold of resizing\"\n                + \"0.75*2^4 = 12 In first loop it should not fail since we do not resizing hashmap. \"\n                + \"\\n\\nAfter 60 second: after calling external resizing operation with reflection should forcefully fail\"\n                + \"thread safety\");\n\n        Thread.sleep(2000);\n        final Map&lt;Integer, String&gt; map2 = new HashMap&lt;&gt;();\n        IntStream.range(100, 113).forEach(i -&gt; new Thread(() -&gt; threadOperation(i, map2)).start());\n        // Second loop should fail from now on and should print some Null Value Numbers to the out. Because it is\n        // iterating more than 12 that causes hash map resizing and rehashing\n        System.out.println(\"It should fail directly since it is exceeding hashmap initial threshold and it will resize\"\n                + \"when loop iterate 13rd time\");\n    }\n}\n</code></pre>\n\n<hr>\n\n<h2>Example output</h2>\n\n<pre><code>No null value should be printed untill thread sleep line passed\ncalling resize\nLoop count is 12 since hashmap initially created for 2^4 bucket and threshold of resizing0.75*2^4 = 12 In first loop it should not fail since we do not resizing hashmap. \n\nAfter 60 second: after calling external resizing operation with reflection should forcefully failthread safety\nNull Value Number: 11\nNull Value Number: 5\nNull Value Number: 6\nNull Value Number: 8\nNull Value Number: 0\nNull Value Number: 7\nNull Value Number: 2\nIt should fail directly since it is exceeding hashmap initial threshold and it will resizewhen loop iterate 13th time\nNull Value Number: 111\nNull Value Number: 100\nNull Value Number: 107\nNull Value Number: 110\nNull Value Number: 104\nNull Value Number: 106\nNull Value Number: 109\nNull Value Number: 105\n</code></pre>\n\n<hr>\n"},{"tags":[],"owner":{"account_id":3908499,"reputation":55,"user_id":5736215,"display_name":"Rohit Narang"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1613203746,"creation_date":1613151148,"answer_id":66176444,"question_id":18542037,"body_markdown":"**Very Simple Solution to prove this** \r\n\r\nHere is the code, which proves the Hashmap implementation is not thread safe.\r\nIn this example, we are only adding the elements to map, not removing it from any method.\r\n\r\nWe can see that it prints the keys which are not in map, even though we have put the same key in map before doing get operation.\r\n\r\n```\r\npackage threads;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport java.util.Random;\r\nimport java.util.concurrent.Callable;\r\nimport java.util.concurrent.ExecutorService;\r\nimport java.util.concurrent.Executors;\r\n\r\npublic class HashMapWorkingDemoInConcurrentEnvironment {\r\n\r\n    private Map&lt;Long, String&gt; cache = new HashMap&lt;&gt;();\r\n\r\n    public String put(Long key, String value) {\r\n        return cache.put(key, value);\r\n    }\r\n\r\n    public String get(Long key) {\r\n        return cache.get(key);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n\r\n        HashMapWorkingDemoInConcurrentEnvironment cache = new HashMapWorkingDemoInConcurrentEnvironment();\r\n\r\n        class Producer implements Callable&lt;String&gt; {\r\n\r\n            private Random rand = new Random();\r\n\r\n            public String call() throws Exception {\r\n                while (true) {\r\n                    long key = rand.nextInt(1000);\r\n                    cache.put(key, Long.toString(key));\r\n                    if (cache.get(key) == null) {\r\n                        System.out.println(&quot;Key &quot; + key + &quot; has not been put in the map&quot;);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        ExecutorService executorService = Executors.newFixedThreadPool(4);\r\n\r\n        System.out.println(&quot;Adding value...&quot;);\r\n\r\n        try  {\r\n            for (int i = 0; i &lt; 4; i++) {\r\n                executorService.submit(new Producer());\r\n            }\r\n        } finally {\r\n            executorService.shutdown();\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nSample Output for a execution run \r\n```\r\nAdding value...\r\nKey 611 has not been put in the map\r\nKey 978 has not been put in the map\r\nKey 35 has not been put in the map\r\nKey 202 has not been put in the map\r\nKey 714 has not been put in the map\r\nKey 328 has not been put in the map\r\nKey 606 has not been put in the map\r\nKey 149 has not been put in the map\r\nKey 763 has not been put in the map\r\n```\r\n\r\nIts strange to see the values printed, that&#39;s why hashmap is not thread safe implementation working in concurrent environment.","title":"How to prove that HashMap in java is not thread-safe","body":"<p><strong>Very Simple Solution to prove this</strong></p>\n<p>Here is the code, which proves the Hashmap implementation is not thread safe.\nIn this example, we are only adding the elements to map, not removing it from any method.</p>\n<p>We can see that it prints the keys which are not in map, even though we have put the same key in map before doing get operation.</p>\n<pre><code>package threads;\n\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Random;\nimport java.util.concurrent.Callable;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\npublic class HashMapWorkingDemoInConcurrentEnvironment {\n\n    private Map&lt;Long, String&gt; cache = new HashMap&lt;&gt;();\n\n    public String put(Long key, String value) {\n        return cache.put(key, value);\n    }\n\n    public String get(Long key) {\n        return cache.get(key);\n    }\n\n    public static void main(String[] args) {\n\n        HashMapWorkingDemoInConcurrentEnvironment cache = new HashMapWorkingDemoInConcurrentEnvironment();\n\n        class Producer implements Callable&lt;String&gt; {\n\n            private Random rand = new Random();\n\n            public String call() throws Exception {\n                while (true) {\n                    long key = rand.nextInt(1000);\n                    cache.put(key, Long.toString(key));\n                    if (cache.get(key) == null) {\n                        System.out.println(&quot;Key &quot; + key + &quot; has not been put in the map&quot;);\n                    }\n                }\n            }\n        }\n\n        ExecutorService executorService = Executors.newFixedThreadPool(4);\n\n        System.out.println(&quot;Adding value...&quot;);\n\n        try  {\n            for (int i = 0; i &lt; 4; i++) {\n                executorService.submit(new Producer());\n            }\n        } finally {\n            executorService.shutdown();\n        }\n    }\n}\n\n</code></pre>\n<p>Sample Output for a execution run</p>\n<pre><code>Adding value...\nKey 611 has not been put in the map\nKey 978 has not been put in the map\nKey 35 has not been put in the map\nKey 202 has not been put in the map\nKey 714 has not been put in the map\nKey 328 has not been put in the map\nKey 606 has not been put in the map\nKey 149 has not been put in the map\nKey 763 has not been put in the map\n</code></pre>\n<p>Its strange to see the values printed, that's why hashmap is not thread safe implementation working in concurrent environment.</p>\n"},{"tags":[],"owner":{"account_id":3769009,"reputation":1689,"user_id":3131706,"display_name":"shubhamgarg1"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625397682,"creation_date":1625397682,"answer_id":68244216,"question_id":18542037,"body_markdown":"There is a great tool open sourced by the OpenJDK team called JCStress which is used in the JDK for concurrency testing.\r\n\r\nhttps://github.com/openjdk/jcstress\r\n\r\nIn one of its sample: https://github.com/openjdk/jcstress/blob/master/tests-custom/src/main/java/org/openjdk/jcstress/tests/collections/HashMapFailureTest.java\r\n\r\n    @JCStressTest\r\n    @Outcome(id = &quot;0, 0, 1, 2&quot;, expect = Expect.ACCEPTABLE, desc = &quot;No exceptions, entire map is okay.&quot;)\r\n    @Outcome(expect = Expect.ACCEPTABLE_INTERESTING, desc = &quot;Something went wrong&quot;)\r\n    @State\r\n    public class HashMapFailureTest {\r\n    \r\n        private final Map&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;();\r\n    \r\n        @Actor\r\n        public void actor1(IIII_Result r) {\r\n            try {\r\n                map.put(1, 1);\r\n                r.r1 = 0;\r\n            } catch (Exception e) {\r\n                r.r1 = 1;\r\n            }\r\n        }\r\n    \r\n        @Actor\r\n        public void actor2(IIII_Result r) {\r\n            try {\r\n                map.put(2, 2);\r\n                r.r2 = 0;\r\n            } catch (Exception e) {\r\n                r.r2 = 1;\r\n            }\r\n        }\r\n    \r\n        @Arbiter\r\n        public void arbiter(IIII_Result r) {\r\n            Integer v1 = map.get(1);\r\n            Integer v2 = map.get(2);\r\n            r.r3 = (v1 != null) ? v1 : -1;\r\n            r.r4 = (v2 != null) ? v2 : -1;\r\n        }\r\n    \r\n    }\r\n\r\nThe methods marked with actor are run concurrently on different threads.\r\n\r\nThe result for this on my machine is:\r\n\r\n \r\n\r\n    Results across all configurations:\r\n    \r\n           RESULT     SAMPLES     FREQ       EXPECT  DESCRIPTION\r\n      0, 0, -1, 2   3,854,896    5.25%  Interesting  Something went wrong\r\n      0, 0, 1, -1   4,251,564    5.79%  Interesting  Something went wrong\r\n      0, 0, 1, 2  65,363,492   88.97%   Acceptable  No exceptions, entire map is okay.\r\n\r\n\r\nThis shows that 88% of the times expected values were observed but in around 12% of the times, incorrect results were seen.\r\n\r\n\r\nYou can try out this tool and the samples and write your own tests to verify that concurrency of some code is broken.\r\n\r\n","title":"How to prove that HashMap in java is not thread-safe","body":"<p>There is a great tool open sourced by the OpenJDK team called JCStress which is used in the JDK for concurrency testing.</p>\n<p><a href=\"https://github.com/openjdk/jcstress\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jcstress</a></p>\n<p>In one of its sample: <a href=\"https://github.com/openjdk/jcstress/blob/master/tests-custom/src/main/java/org/openjdk/jcstress/tests/collections/HashMapFailureTest.java\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jcstress/blob/master/tests-custom/src/main/java/org/openjdk/jcstress/tests/collections/HashMapFailureTest.java</a></p>\n<pre><code>@JCStressTest\n@Outcome(id = &quot;0, 0, 1, 2&quot;, expect = Expect.ACCEPTABLE, desc = &quot;No exceptions, entire map is okay.&quot;)\n@Outcome(expect = Expect.ACCEPTABLE_INTERESTING, desc = &quot;Something went wrong&quot;)\n@State\npublic class HashMapFailureTest {\n\n    private final Map&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;();\n\n    @Actor\n    public void actor1(IIII_Result r) {\n        try {\n            map.put(1, 1);\n            r.r1 = 0;\n        } catch (Exception e) {\n            r.r1 = 1;\n        }\n    }\n\n    @Actor\n    public void actor2(IIII_Result r) {\n        try {\n            map.put(2, 2);\n            r.r2 = 0;\n        } catch (Exception e) {\n            r.r2 = 1;\n        }\n    }\n\n    @Arbiter\n    public void arbiter(IIII_Result r) {\n        Integer v1 = map.get(1);\n        Integer v2 = map.get(2);\n        r.r3 = (v1 != null) ? v1 : -1;\n        r.r4 = (v2 != null) ? v2 : -1;\n    }\n\n}\n</code></pre>\n<p>The methods marked with actor are run concurrently on different threads.</p>\n<p>The result for this on my machine is:</p>\n<pre><code>Results across all configurations:\n\n       RESULT     SAMPLES     FREQ       EXPECT  DESCRIPTION\n  0, 0, -1, 2   3,854,896    5.25%  Interesting  Something went wrong\n  0, 0, 1, -1   4,251,564    5.79%  Interesting  Something went wrong\n  0, 0, 1, 2  65,363,492   88.97%   Acceptable  No exceptions, entire map is okay.\n</code></pre>\n<p>This shows that 88% of the times expected values were observed but in around 12% of the times, incorrect results were seen.</p>\n<p>You can try out this tool and the samples and write your own tests to verify that concurrency of some code is broken.</p>\n"},{"tags":[],"owner":{"account_id":463972,"reputation":47,"user_id":867191,"display_name":"Sokeks"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666497760,"creation_date":1666497760,"answer_id":74168567,"question_id":18542037,"body_markdown":"As a yet another reply to this topic, I would recommend example from https://www.baeldung.com/java-concurrent-map, that looks as below. Theory is very straigthforwad - for N times we run 10 threads, that each of them increments the value in a common map 10 times. If the map was thread safe, the value should be 100 every time. Example proves, it&#39;s not.\r\n\r\n```\r\n@Test\r\npublic void givenHashMap_whenSumParallel_thenError() throws Exception {\r\n    Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();\r\n    List&lt;Integer&gt; sumList = parallelSum100(map, 100);\r\n\r\n    assertNotEquals(1, sumList\r\n      .stream()\r\n      .distinct()\r\n      .count());\r\n    long wrongResultCount = sumList\r\n      .stream()\r\n      .filter(num -&gt; num != 100)\r\n      .count();\r\n    \r\n    assertTrue(wrongResultCount &gt; 0);\r\n}\r\n\r\nprivate List&lt;Integer&gt; parallelSum100(Map&lt;String, Integer&gt; map, \r\n  int executionTimes) throws InterruptedException {\r\n    List&lt;Integer&gt; sumList = new ArrayList&lt;&gt;(1000);\r\n    for (int i = 0; i &lt; executionTimes; i++) {\r\n        map.put(&quot;test&quot;, 0);\r\n        ExecutorService executorService = \r\n          Executors.newFixedThreadPool(4);\r\n        for (int j = 0; j &lt; 10; j++) {\r\n            executorService.execute(() -&gt; {\r\n                for (int k = 0; k &lt; 10; k++)\r\n                    map.computeIfPresent(\r\n                      &quot;test&quot;, \r\n                      (key, value) -&gt; value + 1\r\n                    );\r\n            });\r\n        }\r\n        executorService.shutdown();\r\n        executorService.awaitTermination(5, TimeUnit.SECONDS);\r\n        sumList.add(map.get(&quot;test&quot;));\r\n    }\r\n    return sumList;\r\n}\r\n```","title":"How to prove that HashMap in java is not thread-safe","body":"<p>As a yet another reply to this topic, I would recommend example from <a href=\"https://www.baeldung.com/java-concurrent-map\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-concurrent-map</a>, that looks as below. Theory is very straigthforwad - for N times we run 10 threads, that each of them increments the value in a common map 10 times. If the map was thread safe, the value should be 100 every time. Example proves, it's not.</p>\n<pre><code>@Test\npublic void givenHashMap_whenSumParallel_thenError() throws Exception {\n    Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();\n    List&lt;Integer&gt; sumList = parallelSum100(map, 100);\n\n    assertNotEquals(1, sumList\n      .stream()\n      .distinct()\n      .count());\n    long wrongResultCount = sumList\n      .stream()\n      .filter(num -&gt; num != 100)\n      .count();\n    \n    assertTrue(wrongResultCount &gt; 0);\n}\n\nprivate List&lt;Integer&gt; parallelSum100(Map&lt;String, Integer&gt; map, \n  int executionTimes) throws InterruptedException {\n    List&lt;Integer&gt; sumList = new ArrayList&lt;&gt;(1000);\n    for (int i = 0; i &lt; executionTimes; i++) {\n        map.put(&quot;test&quot;, 0);\n        ExecutorService executorService = \n          Executors.newFixedThreadPool(4);\n        for (int j = 0; j &lt; 10; j++) {\n            executorService.execute(() -&gt; {\n                for (int k = 0; k &lt; 10; k++)\n                    map.computeIfPresent(\n                      &quot;test&quot;, \n                      (key, value) -&gt; value + 1\n                    );\n            });\n        }\n        executorService.shutdown();\n        executorService.awaitTermination(5, TimeUnit.SECONDS);\n        sumList.add(map.get(&quot;test&quot;));\n    }\n    return sumList;\n}\n</code></pre>\n"}],"owner":{"account_id":1010738,"reputation":8534,"user_id":1023368,"accept_rate":41,"display_name":"Alexander Bezrodniy"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16529,"favorite_count":0,"down_vote_count":1,"up_vote_count":25,"answer_count":12,"score":24,"last_activity_date":1699449473,"creation_date":1377899816,"question_id":18542037,"body_markdown":"I&#39;m working on an application, that has uses a `HashMap` to share state. I need to prove via unit tests that it will have problems in a multi-threaded environment. \r\n\r\nI tried to check the state of the application in a single thread environment and in a multi-threaded environment via checking the size and elements of the `HashMap` in both of them. But seems this doesn&#39;t help, the state is always the same.\r\n\r\nAre there any other ways to prove it or prove that an application that performs operations on the map works well with concurrent requests?","title":"How to prove that HashMap in java is not thread-safe","body":"<p>I'm working on an application, that has uses a <code>HashMap</code> to share state. I need to prove via unit tests that it will have problems in a multi-threaded environment.</p>\n<p>I tried to check the state of the application in a single thread environment and in a multi-threaded environment via checking the size and elements of the <code>HashMap</code> in both of them. But seems this doesn't help, the state is always the same.</p>\n<p>Are there any other ways to prove it or prove that an application that performs operations on the map works well with concurrent requests?</p>\n"},{"tags":["java","android","google-api","telephonymanager"],"answers":[{"comments":[{"owner":{"account_id":10610421,"reputation":208,"user_id":7814524,"display_name":"finnss"},"score":0,"creation_date":1498571317,"post_id":44777980,"comment_id":76544627,"body_markdown":"Thanks a lot! That&#39;s exactly the kind of answer I was looking for. \n\nJust a quick follow-up: There are 18 documented network types, and you only listed 14. The missing ones are GSM, 1xRTT, IDEN, and IWLAN. Gsm is obvious, but where do the rest belong? From your link I can discern that iDen and 1xRTT are both 2g, i.e. either CDMA or GSM, but I still need to know which.\n\nIn general, you group GSM and CDMA network types together. In your provided link, they&#39;re all bunched together and called &quot;2G&quot;. However, I need to differentiate them for the purposes of the API. Which goes where?\n\nThanks!","body":"Thanks a lot! That&#39;s exactly the kind of answer I was looking for.   Just a quick follow-up: There are 18 documented network types, and you only listed 14. The missing ones are GSM, 1xRTT, IDEN, and IWLAN. Gsm is obvious, but where do the rest belong? From your link I can discern that iDen and 1xRTT are both 2g, i.e. either CDMA or GSM, but I still need to know which.  In general, you group GSM and CDMA network types together. In your provided link, they&#39;re all bunched together and called &quot;2G&quot;. However, I need to differentiate them for the purposes of the API. Which goes where?  Thanks!"},{"owner":{"account_id":10610421,"reputation":208,"user_id":7814524,"display_name":"finnss"},"score":0,"creation_date":1498572286,"post_id":44777980,"comment_id":76545430,"body_markdown":"In fact, you only listed 13, since you listed EHRPD twice. If that means both 3G and 4G can be EHRPD, what radio type should I choose in that case? TD_SCDMA is the last missing network type. I&#39;m sorry if these are stupid questions, but I don&#39;t have a solid grasp of what there terms mean yet! I just want to be able to correctly map them to one of the four primary radio types.","body":"In fact, you only listed 13, since you listed EHRPD twice. If that means both 3G and 4G can be EHRPD, what radio type should I choose in that case? TD_SCDMA is the last missing network type. I&#39;m sorry if these are stupid questions, but I don&#39;t have a solid grasp of what there terms mean yet! I just want to be able to correctly map them to one of the four primary radio types."},{"owner":{"account_id":2997960,"reputation":1863,"user_id":2544098,"display_name":"Ryan"},"score":0,"creation_date":1498576825,"post_id":44777980,"comment_id":76548839,"body_markdown":"@finnss it looks like TD-SCDMA is an alternative to W-CDMA in China","body":"@finnss it looks like TD-SCDMA is an alternative to W-CDMA in China"}],"tags":[],"owner":{"account_id":2997960,"reputation":1863,"user_id":2544098,"display_name":"Ryan"},"comment_count":3,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1498576712,"creation_date":1498559247,"answer_id":44777980,"question_id":44776005,"body_markdown":"Your phone can have 4 different radio types, GSM, CDMA, WCDMA, and LTE. But each radio type can have different network types.\r\n\r\nThe 2G radio (GSM/CDMA) can have the following network types:\r\n\r\n- GPRS\r\n- EDGE\r\n- CDMA\r\n- 1xRTT\r\n- IDEN\r\n\r\nThe 3G radios (WCDMA) can have:\r\n\r\n- UMTS\r\n- EVD0_0\r\n- EVD0_A\r\n- HSDPA\r\n- HSUPA\r\n- HSPA\r\n- EVDO_B\r\n- EHRPD\r\n- HSPAP\r\n\r\nThe 4G radio (LTE) can have:\r\n\r\n- LTE\r\n\r\nSo yes, you have to send the radio type and **not** the network type, which means there are only 4 possible values as shown in the Google API docs.\r\n\r\nYou can refer to this [answer][1] for mapping the network type to a radio type.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/17341777/2544098","title":"Is the value of an Android phone&#39;s radio type always GSM, LTE, CDMA or WCDMA?","body":"<p>Your phone can have 4 different radio types, GSM, CDMA, WCDMA, and LTE. But each radio type can have different network types.</p>\n\n<p>The 2G radio (GSM/CDMA) can have the following network types:</p>\n\n<ul>\n<li>GPRS</li>\n<li>EDGE</li>\n<li>CDMA</li>\n<li>1xRTT</li>\n<li>IDEN</li>\n</ul>\n\n<p>The 3G radios (WCDMA) can have:</p>\n\n<ul>\n<li>UMTS</li>\n<li>EVD0_0</li>\n<li>EVD0_A</li>\n<li>HSDPA</li>\n<li>HSUPA</li>\n<li>HSPA</li>\n<li>EVDO_B</li>\n<li>EHRPD</li>\n<li>HSPAP</li>\n</ul>\n\n<p>The 4G radio (LTE) can have:</p>\n\n<ul>\n<li>LTE</li>\n</ul>\n\n<p>So yes, you have to send the radio type and <strong>not</strong> the network type, which means there are only 4 possible values as shown in the Google API docs.</p>\n\n<p>You can refer to this <a href=\"https://stackoverflow.com/a/17341777/2544098\">answer</a> for mapping the network type to a radio type.</p>\n"}],"owner":{"account_id":10610421,"reputation":208,"user_id":7814524,"display_name":"finnss"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":943,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":44777980,"answer_count":1,"score":1,"last_activity_date":1699449393,"creation_date":1498553570,"question_id":44776005,"body_markdown":"I&#39;m creating an app that uses Google&#39;s Geolocation API, as documented\r\n[here](https://developers.google.com/maps/documentation/geolocation/intro).\r\n\r\nAs part of the POST request I need to send to their API, I need to include **The mobile radio type**, `radioType`. The question of how to receive that has already been asked and answered [here](https://stackoverflow.com/questions/39469700/how-to-get-the-radio-type-of-android-phonegsm-cdma-wcdma-lte).\r\n\r\nMy question is as follows:\r\n\r\nThe `telephoneManager.getNetworkType()` function that I&#39;m apparently supposed to use returns one of 18 values, documented as constants [here](https://developer.android.com/reference/android/telephony/TelephonyManager.html).  \r\n\r\nDoes that mean that the `radioType` as described by Google&#39;s geolocation API really can be 18 different values? So if it turns out that my radio type is not one of the four they support (GSM, LTE, CDMA or WCDMA), I&#39;m simply out of luck and will have to suffer the loss of accuracy from not including `radioType` in my request?\r\n\r\nI have a feeling that I&#39;m mixing up the terms `radio type` and `network type` somehow, the documentation is a bit confusing. Any help would be greatly appreciated.","title":"Is the value of an Android phone&#39;s radio type always GSM, LTE, CDMA or WCDMA?","body":"<p>I'm creating an app that uses Google's Geolocation API, as documented\n<a href=\"https://developers.google.com/maps/documentation/geolocation/intro\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>As part of the POST request I need to send to their API, I need to include <strong>The mobile radio type</strong>, <code>radioType</code>. The question of how to receive that has already been asked and answered <a href=\"https://stackoverflow.com/questions/39469700/how-to-get-the-radio-type-of-android-phonegsm-cdma-wcdma-lte\">here</a>.</p>\n\n<p>My question is as follows:</p>\n\n<p>The <code>telephoneManager.getNetworkType()</code> function that I'm apparently supposed to use returns one of 18 values, documented as constants <a href=\"https://developer.android.com/reference/android/telephony/TelephonyManager.html\" rel=\"nofollow noreferrer\">here</a>.  </p>\n\n<p>Does that mean that the <code>radioType</code> as described by Google's geolocation API really can be 18 different values? So if it turns out that my radio type is not one of the four they support (GSM, LTE, CDMA or WCDMA), I'm simply out of luck and will have to suffer the loss of accuracy from not including <code>radioType</code> in my request?</p>\n\n<p>I have a feeling that I'm mixing up the terms <code>radio type</code> and <code>network type</code> somehow, the documentation is a bit confusing. Any help would be greatly appreciated.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":3,"creation_date":1699448417,"post_id":77445714,"comment_id":136532175,"body_markdown":"Try compiling that code and see what happens.","body":"Try compiling that code and see what happens."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1699448566,"post_id":77445714,"comment_id":136532209,"body_markdown":"Technically this wouldn&#39;t be a constant (formally, only a subset of `static final` fields are real constants in Java). But doing this looks like a bad idea to me. In any case, given `sc` is not static, nor is `dolarInReal = sc.nextDouble();` in a static initializer, this won&#39;t compile.","body":"Technically this wouldn&#39;t be a constant (formally, only a subset of <code>static final</code> fields are real constants in Java). But doing this looks like a bad idea to me. In any case, given <code>sc</code> is not static, nor is <code>dolarInReal = sc.nextDouble();</code> in a static initializer, this won&#39;t compile."},{"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"score":0,"creation_date":1699448669,"post_id":77445714,"comment_id":136532231,"body_markdown":"Just for your inform any attribute defined as `static` and `final` is considered to be a perfect constant and the standard is to name it all in upper case and each word separated by an underscore. So, dolarInReal can be renamed as DOLAR_IN_REAL.","body":"Just for your inform any attribute defined as <code>static</code> and <code>final</code> is considered to be a perfect constant and the standard is to name it all in upper case and each word separated by an underscore. So, dolarInReal can be renamed as DOLAR_IN_REAL."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1699448736,"post_id":77445714,"comment_id":136532240,"body_markdown":"@ArunSudhakaran Formally only `static final` fields initialized with a constant expression are real constants (but granted, informally, all static final fields are considered constants).","body":"@ArunSudhakaran Formally only <code>static final</code> fields initialized with a constant expression are real constants (but granted, informally, all static final fields are considered constants)."}],"answers":[{"tags":[],"owner":{"account_id":13575841,"reputation":92,"user_id":9793231,"display_name":"eunelyky"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1699449008,"creation_date":1699449008,"answer_id":77445808,"question_id":77445714,"body_markdown":"The code you provided has a couple of issues:\r\n\r\n1. Declaration without initialization: When you declare a public static final double dolarInReal; as a static final field, you must initialize it at the point of declaration or in a static initialization block. However, you are trying to initialize it later in your code with dolarInReal = sc.nextDouble();. This is not allowed for a final field.\r\n\r\n2. You are trying to read a double from the Scanner after declaring a final variable, which is not allowed. Final variables must be initialized when declared and cannot be modified afterwards.\r\n\r\nTo fix this, you can initialize dolarInReal when declaring it or initialize it in a static block:\r\n\r\n    public static final double dolarInReal;\r\n    static {\r\n       Scanner sc = new Scanner(System.in);\r\n       dolarInReal = sc.nextDouble();\r\n    }\r\n\r\n","title":"Define constants on a Scanner","body":"<p>The code you provided has a couple of issues:</p>\n<ol>\n<li><p>Declaration without initialization: When you declare a public static final double dolarInReal; as a static final field, you must initialize it at the point of declaration or in a static initialization block. However, you are trying to initialize it later in your code with dolarInReal = sc.nextDouble();. This is not allowed for a final field.</p>\n</li>\n<li><p>You are trying to read a double from the Scanner after declaring a final variable, which is not allowed. Final variables must be initialized when declared and cannot be modified afterwards.</p>\n</li>\n</ol>\n<p>To fix this, you can initialize dolarInReal when declaring it or initialize it in a static block:</p>\n<pre><code>public static final double dolarInReal;\nstatic {\n   Scanner sc = new Scanner(System.in);\n   dolarInReal = sc.nextDouble();\n}\n</code></pre>\n"}],"owner":{"account_id":29855115,"reputation":11,"user_id":22880132,"display_name":"Arthur Godoy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":77445808,"answer_count":1,"score":-1,"last_activity_date":1699449008,"creation_date":1699448112,"question_id":77445714,"body_markdown":"I&#39;m starting learn Java and I&#39;m studying constants right now. I&#39;m able to do a Scanner in a constant? \r\n\r\nFor example: \r\n```\r\npublic static final double dolarInReal;\r\nScanner sc = new Scanner(System.in);\r\ndolarInReal = sc.nextDouble();\r\n```\r\n\r\nThis is just an example for you to understand what I&#39;m supposed to do. Is it possible?\r\n","title":"Define constants on a Scanner","body":"<p>I'm starting learn Java and I'm studying constants right now. I'm able to do a Scanner in a constant?</p>\n<p>For example:</p>\n<pre><code>public static final double dolarInReal;\nScanner sc = new Scanner(System.in);\ndolarInReal = sc.nextDouble();\n</code></pre>\n<p>This is just an example for you to understand what I'm supposed to do. Is it possible?</p>\n"},{"tags":["java","selenium-webdriver","xpath","domxpath"],"answers":[{"tags":[],"owner":{"account_id":26682848,"reputation":3568,"user_id":20292589,"display_name":"Yaroslavm"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699439394,"creation_date":1699439394,"answer_id":77444723,"question_id":77444580,"body_markdown":"Airline name seemed to have unique locator by class names.\r\n\r\nCard locator is element that contains class `listingCard `.\r\n\r\nName container locator is element that contains class `airline-info-wrapper`.\r\n\r\nAnd finally Airline name is element where one of classes is `airlineName`.\r\n\r\nSo, you got a result:\r\n\r\n```\r\n//*[contains(@class,&#39;listingCard &#39;)]//*[contains(@class, &#39;airline-info-wrapper&#39;)]//*[contains(@class,&#39;airlineName&#39;)]\r\n```\r\n\r\nIf you don&#39;t care about containers root, it can be even shorter - just\r\n\r\n```\r\n//*[contains(@class,&#39;airlineName&#39;)]\r\n```\r\n\r\nBut if you care not only about name, you need get list of card containers `//*[contains(@class,&#39;listingCard &#39;)]`, loop through it and get needed info.","title":"Looking for pr&#233;cised/Efficient Dynamic Xpath","body":"<p>Airline name seemed to have unique locator by class names.</p>\n<p>Card locator is element that contains class <code>listingCard </code>.</p>\n<p>Name container locator is element that contains class <code>airline-info-wrapper</code>.</p>\n<p>And finally Airline name is element where one of classes is <code>airlineName</code>.</p>\n<p>So, you got a result:</p>\n<pre><code>//*[contains(@class,'listingCard ')]//*[contains(@class, 'airline-info-wrapper')]//*[contains(@class,'airlineName')]\n</code></pre>\n<p>If you don't care about containers root, it can be even shorter - just</p>\n<pre><code>//*[contains(@class,'airlineName')]\n</code></pre>\n<p>But if you care not only about name, you need get list of card containers <code>//*[contains(@class,'listingCard ')]</code>, loop through it and get needed info.</p>\n"},{"tags":[],"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699439613,"creation_date":1699439613,"answer_id":77444754,"question_id":77444580,"body_markdown":"````\r\n//div[@class=&quot;clusterContent&quot;]/div/div[3]/div/div[2]/div/div//following::div/p[2]\r\n````\r\nAbove XPath expression is incorrect. It locates 144 elements(see screenshot below).\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/MFwxA.png\r\n\r\nTo locate/fetch the 3rd line of search results you can use below XPath expressions:\r\n\r\n\r\n`(//div[@class=&#39;makeFlex spaceBetween&#39;])[3]`  -- This will return the third row `&lt;div&gt;` of search results. Just change last digit `3` for third row, `4` for fourth row and so on.\r\n\r\n\r\n`(//div[@class=&#39;makeFlex spaceBetween&#39;])[3]//p` -- This will return the third row&#39;s all `&lt;p&gt;` nodes. \r\n","title":"Looking for pr&#233;cised/Efficient Dynamic Xpath","body":"<pre><code>//div[@class=&quot;clusterContent&quot;]/div/div[3]/div/div[2]/div/div//following::div/p[2]\n</code></pre>\n<p>Above XPath expression is incorrect. It locates 144 elements(see screenshot below).</p>\n<p><a href=\"https://i.stack.imgur.com/MFwxA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MFwxA.png\" alt=\"enter image description here\" /></a></p>\n<p>To locate/fetch the 3rd line of search results you can use below XPath expressions:</p>\n<p><code>(//div[@class='makeFlex spaceBetween'])[3]</code>  -- This will return the third row <code>&lt;div&gt;</code> of search results. Just change last digit <code>3</code> for third row, <code>4</code> for fourth row and so on.</p>\n<p><code>(//div[@class='makeFlex spaceBetween'])[3]//p</code> -- This will return the third row's all <code>&lt;p&gt;</code> nodes.</p>\n"},{"comments":[{"owner":{"account_id":6501352,"reputation":428,"user_id":5032040,"accept_rate":20,"display_name":"Rahil Kumar"},"score":1,"creation_date":1699450509,"post_id":77445774,"comment_id":136532562,"body_markdown":"so this xpath i can define as @findBy variable and use in page action methods..!","body":"so this xpath i can define as @findBy variable and use in page action methods..!"}],"tags":[],"owner":{"account_id":15083819,"reputation":33038,"user_id":10885684,"display_name":"KunduK"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1699448684,"creation_date":1699448684,"answer_id":77445774,"question_id":77444580,"body_markdown":"To get the Airline name from search results, Use following `xpath`.\r\n\r\n    //div[@class=&#39;makeFlex spaceBetween&#39;]//p[contains(@class, &#39;airlineName&#39;)]\r\n\r\nIdeally you should use some delay to load the page first, Then use below code.\r\n\r\n    List&lt;WebElement&gt; totalNoFlight = driver.findElements(By.xpath(&quot;//div[@class=&#39;makeFlex spaceBetween&#39;]//p[contains(@class, &#39;airlineName&#39;)]&quot;));\r\n    \r\n    for(int i = 0; i &lt; totalNoFlight.size(); ++i) {\r\n         system.out.println(totalNoFlight.get(i).getText());\r\n    }","title":"Looking for pr&#233;cised/Efficient Dynamic Xpath","body":"<p>To get the Airline name from search results, Use following <code>xpath</code>.</p>\n<pre><code>//div[@class='makeFlex spaceBetween']//p[contains(@class, 'airlineName')]\n</code></pre>\n<p>Ideally you should use some delay to load the page first, Then use below code.</p>\n<pre><code>List&lt;WebElement&gt; totalNoFlight = driver.findElements(By.xpath(&quot;//div[@class='makeFlex spaceBetween']//p[contains(@class, 'airlineName')]&quot;));\n\nfor(int i = 0; i &lt; totalNoFlight.size(); ++i) {\n     system.out.println(totalNoFlight.get(i).getText());\n}\n</code></pre>\n"}],"owner":{"account_id":6501352,"reputation":428,"user_id":5032040,"accept_rate":20,"display_name":"Rahil Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77445774,"answer_count":3,"score":0,"last_activity_date":1699448709,"creation_date":1699438264,"question_id":77444580,"body_markdown":"I am practicing the Xpath creation on (any fight booking search engine - MMT as reference) after long time and have few queries related to dynamic xpath. My Query is below\r\n1. Have written a xpath to find the airlinename from list of LineItem. Below is Xpath which is returning 3rd line item details. Is this efficient or pr&#233;cised to fetch the the 3rd line item?   \r\n\r\n `//div[@class=&quot;clusterContent&quot;]/div/div[3]/div/div[2]/div/div//following::div/p[2]`\r\n\r\n\r\n2. To fetch all the line item I have written the xpath as below \r\n\r\n`//div[@class=&#39;clusterContent&#39;]/div` will give me list of line items, will store this in List&lt;WebElements&gt; and i will iterate the below xpath till this size.\r\n\r\n    @FindBy(xpath=&quot;//div[@class=&#39;clusterContent&#39;]&quot;)\r\n    List&lt;WebElement&gt; totalNoFlight;\r\n    \r\n        public void getFlightCount()\r\n        \t{\r\n        \t\tint size = totalNoFlight.size();\r\n        \t\tfor(int i=0;i&lt;size;i++)\r\n        \t\t{\r\n        \t\t\t\tWebElement videoCliplnk = driver\r\n        \t\t\t\t\t\t.findElement(By.xpath(&quot;//div[@class=&#39;clusterContent&#39;]/div/div[&quot;+i+&quot;]/div/div[2]/div/div//following::div/p[2]&quot;));\r\n        \t\t\t\t String videoLinkhrs = videoCliplnk.getText();\r\n        \t\t}\t\r\n        \t}\r\n\r\nIs this a correct way to write these king of Dynamic xpaths in POM page factory design pattern?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n  \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3hys1.jpg","title":"Looking for pr&#233;cised/Efficient Dynamic Xpath","body":"<p>I am practicing the Xpath creation on (any fight booking search engine - MMT as reference) after long time and have few queries related to dynamic xpath. My Query is below</p>\n<ol>\n<li>Have written a xpath to find the airlinename from list of LineItem. Below is Xpath which is returning 3rd line item details. Is this efficient or précised to fetch the the 3rd line item?</li>\n</ol>\n<p><code>//div[@class=&quot;clusterContent&quot;]/div/div[3]/div/div[2]/div/div//following::div/p[2]</code></p>\n<ol start=\"2\">\n<li>To fetch all the line item I have written the xpath as below</li>\n</ol>\n<p><code>//div[@class='clusterContent']/div</code> will give me list of line items, will store this in List and i will iterate the below xpath till this size.</p>\n<pre><code>@FindBy(xpath=&quot;//div[@class='clusterContent']&quot;)\nList&lt;WebElement&gt; totalNoFlight;\n\n    public void getFlightCount()\n        {\n            int size = totalNoFlight.size();\n            for(int i=0;i&lt;size;i++)\n            {\n                    WebElement videoCliplnk = driver\n                            .findElement(By.xpath(&quot;//div[@class='clusterContent']/div/div[&quot;+i+&quot;]/div/div[2]/div/div//following::div/p[2]&quot;));\n                     String videoLinkhrs = videoCliplnk.getText();\n            }   \n        }\n</code></pre>\n<p>Is this a correct way to write these king of Dynamic xpaths in POM page factory design pattern?</p>\n<p><a href=\"https://i.stack.imgur.com/3hys1.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3hys1.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring-boot","spring-security","csrf"],"comments":[{"owner":{"account_id":25766673,"reputation":91,"user_id":19516471,"display_name":"Giovanni Grana"},"score":0,"creation_date":1698922253,"post_id":77408008,"comment_id":136466947,"body_markdown":"1.5.8 for starter security","body":"1.5.8 for starter security"},{"owner":{"account_id":25766673,"reputation":91,"user_id":19516471,"display_name":"Giovanni Grana"},"score":1,"creation_date":1698922479,"post_id":77408008,"comment_id":136466987,"body_markdown":"oh it should be 4.2.3","body":"oh it should be 4.2.3"},{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":1,"creation_date":1698922741,"post_id":77408008,"comment_id":136467028,"body_markdown":"You don&#39;t need `(exclude = {SecurityAutoConfiguration.class }`. Remove it. Are your sure that your Spring Security configuration is applied?","body":"You don&#39;t need <code>(exclude = {SecurityAutoConfiguration.class }</code>. Remove it. Are your sure that your Spring Security configuration is applied?"},{"owner":{"account_id":25766673,"reputation":91,"user_id":19516471,"display_name":"Giovanni Grana"},"score":0,"creation_date":1698922921,"post_id":77408008,"comment_id":136467061,"body_markdown":"If I do delete the exclude, it will keep using the default password, something that i dont want. As for the spring configuration, it has to be since I only get the error if I try doing the POST request with the class in the project","body":"If I do delete the exclude, it will keep using the default password, something that i dont want. As for the spring configuration, it has to be since I only get the error if I try doing the POST request with the class in the project"},{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":1,"creation_date":1698923208,"post_id":77408008,"comment_id":136467096,"body_markdown":"Spring Boot is looking for your configuration and removes the defaut configuration automatically. If you get the default configuration, then your configuration is not picked up. What is the package of your `SpringBootApplcation` annotated class? What is the package of your Spring Security configuration?","body":"Spring Boot is looking for your configuration and removes the defaut configuration automatically. If you get the default configuration, then your configuration is not picked up. What is the package of your <code>SpringBootApplcation</code> annotated class? What is the package of your Spring Security configuration?"},{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":1,"creation_date":1698923317,"post_id":77408008,"comment_id":136467112,"body_markdown":"BTW: Why is your configuration not extending `WebSecurityConfigurerAdapter`?","body":"BTW: Why is your configuration not extending <code>WebSecurityConfigurerAdapter</code>?"},{"owner":{"account_id":25766673,"reputation":91,"user_id":19516471,"display_name":"Giovanni Grana"},"score":1,"creation_date":1698923541,"post_id":77408008,"comment_id":136467153,"body_markdown":"If I do extend `WebSecurityConfigurerAdapter` i get the error `Error creating bean with name &#39;springSecurityFilterChain&#39; defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; threw exception; nested exception is java.lang.IllegalArgumentException: Cannot pass a null GrantedAuthority collection`","body":"If I do extend <code>WebSecurityConfigurerAdapter</code> i get the error <code>Error creating bean with name &#39;springSecurityFilterChain&#39; defined in class path resource [org&#47;springframework&#47;security&#47;config&#47;annotation&#47;web&#47;configur&zwnj;&#8203;ation&#47;WebSecurityCon&zwnj;&#8203;figuration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; threw exception; nested exception is java.lang.IllegalArgumentException: Cannot pass a null GrantedAuthority collection</code>"},{"owner":{"account_id":25766673,"reputation":91,"user_id":19516471,"display_name":"Giovanni Grana"},"score":0,"creation_date":1698929990,"post_id":77408008,"comment_id":136468394,"body_markdown":"Pom added to the post","body":"Pom added to the post"},{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1698930069,"post_id":77408008,"comment_id":136468409,"body_markdown":"You didn&#39;t configure a authority/role: `auth .inMemoryAuthentication() .withUser(&quot;test&quot;).password(&quot;{noop}test&quot;);` This could be the problem.","body":"You didn&#39;t configure a authority/role: <code>auth .inMemoryAuthentication() .withUser(&quot;test&quot;).password(&quot;{noop}test&quot;);</code> This could be the problem."},{"owner":{"account_id":25766673,"reputation":91,"user_id":19516471,"display_name":"Giovanni Grana"},"score":0,"creation_date":1698930252,"post_id":77408008,"comment_id":136468447,"body_markdown":"Uhh, If i do add a role it works, but it also completely ignore the password set for the user","body":"Uhh, If i do add a role it works, but it also completely ignore the password set for the user"},{"owner":{"account_id":25766673,"reputation":91,"user_id":19516471,"display_name":"Giovanni Grana"},"score":0,"creation_date":1698930439,"post_id":77408008,"comment_id":136468488,"body_markdown":"Now it also doesn&#39;t give me the error if I extend `WebSecurityConfigurerAdapter`","body":"Now it also doesn&#39;t give me the error if I extend <code>WebSecurityConfigurerAdapter</code>"},{"owner":{"account_id":25766673,"reputation":91,"user_id":19516471,"display_name":"Giovanni Grana"},"score":0,"creation_date":1698930603,"post_id":77408008,"comment_id":136468526,"body_markdown":"Updated the post with the current code","body":"Updated the post with the current code"},{"owner":{"account_id":25766673,"reputation":91,"user_id":19516471,"display_name":"Giovanni Grana"},"score":0,"creation_date":1698935843,"post_id":77408008,"comment_id":136469722,"body_markdown":"I might have found the reason, [i need to specify the session policy](https://stackoverflow.com/questions/36980247/spring-security-authentication-success-with-wrong-password) or else I can get in even by using a wrong password","body":"I might have found the reason, <a href=\"https://stackoverflow.com/questions/36980247/spring-security-authentication-success-with-wrong-password\">i need to specify the session policy</a> or else I can get in even by using a wrong password"}],"answers":[{"tags":[],"owner":{"account_id":25766673,"reputation":91,"user_id":19516471,"display_name":"Giovanni Grana"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1699448657,"creation_date":1699448657,"answer_id":77445769,"question_id":77408008,"body_markdown":"I was able to resolve the issue by using the older way of using Spring Security and also resolved the session problem (letting a previously authenticated user not repeat the autentication) by setting the session [just like it&#39;s done here][1]\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfigurationBasicAuth extends WebSecurityConfigurerAdapter {//Use WSCA in Spring Security 4.x\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http\r\n                .csrf().disable()//Disable csrf\r\n                .cors().and()\r\n                .authorizeRequests()\r\n                .anyRequest().authenticated()\r\n                .and()\r\n                .httpBasic().and()\r\n                .sessionManagement()//Specify the session policy or else it wont ask for dredentials in the next request\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n        }\r\n    \r\n        @Override\r\n        protected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n            auth\r\n                .inMemoryAuthentication()\r\n                .withUser(&quot;test&quot;)\r\n                .password(&quot;test&quot;)\r\n                .roles(&quot;USER&quot;);//Specify the role even if not used\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/36980247/spring-security-authentication-success-with-wrong-password","title":"CSRF doesn&#39;t get disabled by .csrf().disable()","body":"<p>I was able to resolve the issue by using the older way of using Spring Security and also resolved the session problem (letting a previously authenticated user not repeat the autentication) by setting the session <a href=\"https://stackoverflow.com/questions/36980247/spring-security-authentication-success-with-wrong-password\">just like it's done here</a></p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfigurationBasicAuth extends WebSecurityConfigurerAdapter {//Use WSCA in Spring Security 4.x\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n            .csrf().disable()//Disable csrf\n            .cors().and()\n            .authorizeRequests()\n            .anyRequest().authenticated()\n            .and()\n            .httpBasic().and()\n            .sessionManagement()//Specify the session policy or else it wont ask for dredentials in the next request\n            .sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n    }\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth\n            .inMemoryAuthentication()\n            .withUser(&quot;test&quot;)\n            .password(&quot;test&quot;)\n            .roles(&quot;USER&quot;);//Specify the role even if not used\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":25766673,"reputation":91,"user_id":19516471,"display_name":"Giovanni Grana"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":130,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77445769,"answer_count":1,"score":0,"last_activity_date":1699448657,"creation_date":1698914120,"question_id":77408008,"body_markdown":"I&#39;m currently using _Springboot 1.5.8_ with _Spring Security_ and I&#39;m testing the basic authentication.  \r\nI wrote a simple function that permits all authenticated requests to use a test function:\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfigurationBasicAuth{\r\n    \t\r\n    \tprotected void configure(HttpSecurity http) throws Exception {\r\n    \t    http\r\n    \t        .formLogin().disable()\r\n    \t        .csrf().disable()\r\n    \t        .httpBasic()\r\n    \t        .and()\r\n    \t        .authorizeRequests().anyRequest().authenticated();\r\n    \t}\r\n    \t\r\n    \tprotected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n    \t    auth\r\n    \t        .inMemoryAuthentication()\r\n    \t        .withUser(&quot;test&quot;)\r\n    \t        .password(&quot;{noop}test&quot;);\r\n    \t}\r\n    }\r\n\r\nand the application is setup to not use the autogenerated password with:\r\n\r\n    @SpringBootApplication(exclude = {SecurityAutoConfiguration.class })\r\n\r\nYet, when I try to do a POST request trough Postman with the Basic Auth on the request to any of the urls I get a **403** saying **&quot;Invalid CSRF Token &#39;null&#39; was found on the request parameter &#39;_csrf&#39; or header &#39;X-CSRF-TOKEN&#39;.&quot;** even if it&#39;s clearly deactivated. \r\nI haven&#39;t been able to find a solution in any other post and I&#39;m now not even sure if I&#39;m doing it correclty since the version I&#39;m using is pretty old (and I cant change it unfortunately)\r\n\r\nP.S. I also tried to explicitly tell it to not check it by using a similar solution you can find [here][1] but I still got the same error\r\n\r\nP.S.S. pom.xml here \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.5.8.RELEASE&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;authTest&lt;/artifactId&gt;\r\n    \t&lt;name&gt;test&lt;/name&gt;\r\n    \t&lt;description&gt;basic auth test&lt;/description&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-security --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;log4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.2.17&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n        \t\t&lt;groupId&gt;net.sourceforge.tess4j&lt;/groupId&gt;\r\n        \t\t&lt;artifactId&gt;tess4j&lt;/artifactId&gt;\r\n        \t\t&lt;version&gt;4.0.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n        \t\t&lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\r\n        \t\t&lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\r\n        \t\t&lt;version&gt;2.0.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt; &lt;!-- juli fot tomcat 7--&gt;\r\n                &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n                &lt;artifactId&gt;tomcat-juli&lt;/artifactId&gt;\r\n                &lt;version&gt;7.0.59&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n        \t\t&lt;groupId&gt;me.xdrop&lt;/groupId&gt;\r\n        \t\t&lt;artifactId&gt;fuzzywuzzy&lt;/artifactId&gt;\r\n        \t\t&lt;version&gt;1.4.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t\t&lt;finalName&gt;${project.artifactId}&lt;/finalName&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n\r\n**UPDATE**: this now works, but it also ignores the password I set for the user\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfigurationBasicAuth extends WebSecurityConfigurerAdapter{\r\n    \t\r\n    \t@Override\r\n    \tprotected void configure(HttpSecurity http) throws Exception {\r\n    \t    http\r\n    \t        .csrf().disable()\r\n    \t        .httpBasic()\r\n    \t        .and()\r\n    \t        .authorizeRequests().anyRequest().authenticated();\r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tprotected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n    \t    auth\r\n    \t        .inMemoryAuthentication()\r\n    \t        .withUser(&quot;test&quot;)\r\n    \t        .password(&quot;{noop}test&quot;)\r\n    \t        .roles(&quot;USER&quot;);\r\n    \t}\r\n    }\r\n\r\n**UPDATE 2**: this now works fine, I had to specify the session policy too\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfigurationBasicAuth extends WebSecurityConfigurerAdapter {\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http\r\n            \t.csrf().disable()\r\n            \t.cors().and()\r\n                .authorizeRequests()\r\n                .anyRequest().authenticated()\r\n                .and()\r\n                .httpBasic().and()\r\n                .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n        }\r\n    \r\n        @Override\r\n        protected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n            auth\r\n                .inMemoryAuthentication()\r\n                .withUser(&quot;test&quot;)\r\n                .password(&quot;test&quot;) // Use {noop} for plain text password (for simplicity)\r\n                .roles(&quot;USER&quot;);\r\n        }\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/questions/52854865/spring-boot-securing-same-endpoint-with-csrf-token-and-basicauth","title":"CSRF doesn&#39;t get disabled by .csrf().disable()","body":"<p>I'm currently using <em>Springboot 1.5.8</em> with <em>Spring Security</em> and I'm testing the basic authentication.<br />\nI wrote a simple function that permits all authenticated requests to use a test function:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfigurationBasicAuth{\n    \n    protected void configure(HttpSecurity http) throws Exception {\n        http\n            .formLogin().disable()\n            .csrf().disable()\n            .httpBasic()\n            .and()\n            .authorizeRequests().anyRequest().authenticated();\n    }\n    \n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth\n            .inMemoryAuthentication()\n            .withUser(&quot;test&quot;)\n            .password(&quot;{noop}test&quot;);\n    }\n}\n</code></pre>\n<p>and the application is setup to not use the autogenerated password with:</p>\n<pre><code>@SpringBootApplication(exclude = {SecurityAutoConfiguration.class })\n</code></pre>\n<p>Yet, when I try to do a POST request trough Postman with the Basic Auth on the request to any of the urls I get a <strong>403</strong> saying <strong>&quot;Invalid CSRF Token 'null' was found on the request parameter '_csrf' or header 'X-CSRF-TOKEN'.&quot;</strong> even if it's clearly deactivated.\nI haven't been able to find a solution in any other post and I'm now not even sure if I'm doing it correclty since the version I'm using is pretty old (and I cant change it unfortunately)</p>\n<p>P.S. I also tried to explicitly tell it to not check it by using a similar solution you can find <a href=\"https://stackoverflow.com/questions/52854865/spring-boot-securing-same-endpoint-with-csrf-token-and-basicauth\">here</a> but I still got the same error</p>\n<p>P.S.S. pom.xml here</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;1.5.8.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com&lt;/groupId&gt;\n    &lt;artifactId&gt;authTest&lt;/artifactId&gt;\n    &lt;name&gt;test&lt;/name&gt;\n    &lt;description&gt;basic auth test&lt;/description&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-security --&gt;\n        &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n            &lt;version&gt;1.2.17&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;net.sourceforge.tess4j&lt;/groupId&gt;\n            &lt;artifactId&gt;tess4j&lt;/artifactId&gt;\n            &lt;version&gt;4.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\n            &lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\n            &lt;version&gt;2.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt; &lt;!-- juli fot tomcat 7--&gt;\n            &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-juli&lt;/artifactId&gt;\n            &lt;version&gt;7.0.59&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;me.xdrop&lt;/groupId&gt;\n            &lt;artifactId&gt;fuzzywuzzy&lt;/artifactId&gt;\n            &lt;version&gt;1.4.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n        &lt;finalName&gt;${project.artifactId}&lt;/finalName&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p><strong>UPDATE</strong>: this now works, but it also ignores the password I set for the user</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfigurationBasicAuth extends WebSecurityConfigurerAdapter{\n    \n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n            .csrf().disable()\n            .httpBasic()\n            .and()\n            .authorizeRequests().anyRequest().authenticated();\n    }\n    \n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth\n            .inMemoryAuthentication()\n            .withUser(&quot;test&quot;)\n            .password(&quot;{noop}test&quot;)\n            .roles(&quot;USER&quot;);\n    }\n}\n</code></pre>\n<p><strong>UPDATE 2</strong>: this now works fine, I had to specify the session policy too</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfigurationBasicAuth extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n            .csrf().disable()\n            .cors().and()\n            .authorizeRequests()\n            .anyRequest().authenticated()\n            .and()\n            .httpBasic().and()\n            .sessionManagement()\n            .sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n    }\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth\n            .inMemoryAuthentication()\n            .withUser(&quot;test&quot;)\n            .password(&quot;test&quot;) // Use {noop} for plain text password (for simplicity)\n            .roles(&quot;USER&quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java","ldap","jmx","jboss-eap-7"],"answers":[{"comments":[{"owner":{"account_id":2324956,"reputation":967,"user_id":2039693,"accept_rate":50,"display_name":"Ramesh Subramanian"},"score":0,"creation_date":1699447556,"post_id":77439337,"comment_id":136531997,"body_markdown":"There is no SSL / TLS errors or exceptions when running jmx client program (which is JAVA 17 )","body":"There is no SSL / TLS errors or exceptions when running jmx client program (which is JAVA 17 )"},{"owner":{"account_id":289850,"reputation":9684,"user_id":591064,"accept_rate":67,"display_name":"ixe013"},"score":0,"creation_date":1699457634,"post_id":77439337,"comment_id":136534433,"body_markdown":"You lost me there. Your question says the JMX Client works with a version 12 JVM, but not with a version 17 JVM. Your comment now says it works with a version 17 JVM. Which one is it?","body":"You lost me there. Your question says the JMX Client works with a version 12 JVM, but not with a version 17 JVM. Your comment now says it works with a version 17 JVM. Which one is it?"},{"owner":{"account_id":2324956,"reputation":967,"user_id":2039693,"accept_rate":50,"display_name":"Ramesh Subramanian"},"score":1,"creation_date":1699507547,"post_id":77439337,"comment_id":136541370,"body_markdown":"JBoss EAP Admin console is able to login with JDK 12 &amp; 17.   But JMX client is not connecting when using 17 only (JMX client working fine with 12)","body":"JBoss EAP Admin console is able to login with JDK 12 &amp; 17.   But JMX client is not connecting when using 17 only (JMX client working fine with 12)"}],"tags":[],"owner":{"account_id":289850,"reputation":9684,"user_id":591064,"accept_rate":67,"display_name":"ixe013"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699369691,"creation_date":1699369691,"answer_id":77439337,"question_id":77436764,"body_markdown":"Client and servers negotiate the cipher to use when they establish a TLS connection. Moving from Java 12 to 17 changed that list.\r\n\r\nYou can see what your client supports with [Ciphers.java provided by Atlassian](https://confluence.atlassian.com/stashkb/list-ciphers-used-by-jvm-679609085.html). Run the script with both JVMs.\r\n\r\nCompare that list with the [list of ciphers supported by the server with Openssl](https://confluence.atlassian.com/stashkb/list-ciphers-used-by-jvm-679609085.html).\r\n\r\nIf you can, upgrading the server to modern ciphers is the way to go.","title":"JMX connection to JBoss EAP 7.4 + LDAP is not connected","body":"<p>Client and servers negotiate the cipher to use when they establish a TLS connection. Moving from Java 12 to 17 changed that list.</p>\n<p>You can see what your client supports with <a href=\"https://confluence.atlassian.com/stashkb/list-ciphers-used-by-jvm-679609085.html\" rel=\"nofollow noreferrer\">Ciphers.java provided by Atlassian</a>. Run the script with both JVMs.</p>\n<p>Compare that list with the <a href=\"https://confluence.atlassian.com/stashkb/list-ciphers-used-by-jvm-679609085.html\" rel=\"nofollow noreferrer\">list of ciphers supported by the server with Openssl</a>.</p>\n<p>If you can, upgrading the server to modern ciphers is the way to go.</p>\n"}],"owner":{"account_id":2324956,"reputation":967,"user_id":2039693,"accept_rate":50,"display_name":"Ramesh Subramanian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699447989,"creation_date":1699347348,"question_id":77436764,"body_markdown":"\r\nI am facing JMX connection issue on JBoss EAP \r\n\r\n**My runtime environment** : (Linux OS) - SSL enabled JBoss EAP 7.4.10.GA running on Open JDK 11.0.19 (OpenLogic) &amp; management console is secured with LDAPS server. \r\n\r\n**JMX Client**: is working fine when using OpenJDK 12 which is running on the same Linux Machine. When upgrading the Java from 12 to 17 (OpenJDK Runtime Environment Temurin-17.0.8+70 , JMX connection is failure and getting the below exception. \r\n\r\n***Note** : Jboss-cli-client.jar is added on the class path*\r\n\r\nHow to resolve it ?\r\n\r\n    Oct 27, 2023 10:01:31 AM org.xnio.Xnio &lt;clinit&gt;\r\n    INFO: XNIO version 3.3.1.Final\r\n    Oct 27, 2023 10:01:31 AM org.xnio.nio.NioXnio &lt;clinit&gt;\r\n    INFO: XNIO NIO Implementation Version 3.3.1.Final\r\n    Oct 27, 2023 10:01:31 AM org.jboss.remoting3.EndpointImpl &lt;clinit&gt;\r\n    INFO: JBoss Remoting version 5.0.20.Final\r\n    Oct 27, 2023 10:01:31 AM org.jboss.remotingjmx.Util warnDeprecated\r\n    WARN: The protocol &#39;https-remoting-jmx&#39; is deprecated, instead you should use &#39;remote+https&#39;.\r\n    Oct 27, 2023 10:01:31 AM org.jboss.remoting3.remote.RemoteConnection handleException\r\n    ERROR: JBREM000200: Remote connection failed: javax.security.sasl.SaslException: Authentication failed: all available authentication mechanisms failed:\r\n    javax.security.sasl.SaslException: Authentication failed: all available authentication mechanisms failed:\r\n    \tat org.jboss.remoting3.remote.ClientConnectionOpenListener.allMechanismsFailed(ClientConnectionOpenListener.java:114)\r\n    \tat org.jboss.remoting3.remote.ClientConnectionOpenListener$Capabilities.handleEvent(ClientConnectionOpenListener.java:453)\r\n    \tat org.jboss.remoting3.remote.ClientConnectionOpenListener$Capabilities.handleEvent(ClientConnectionOpenListener.java:243)\r\n    \tat org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)\r\n    \tat org.xnio.channels.TranslatingSuspendableChannel.handleReadable(TranslatingSuspendableChannel.java:199)\r\n    \tat org.xnio.channels.TranslatingSuspendableChannel$1.handleEvent(TranslatingSuspendableChannel.java:113)\r\n    \tat org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)\r\n    \tat org.xnio.ChannelListeners$DelegatingChannelListener.handleEvent(ChannelListeners.java:1092)\r\n    \tat org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)\r\n    \tat org.xnio.conduits.ReadReadyHandler$ChannelListenerHandler.readReady(ReadReadyHandler.java:66)\r\n    \tat org.xnio.nio.NioSocketConduit.handleReady(NioSocketConduit.java:88)\r\n    \tat org.xnio.nio.WorkerThread.run(WorkerThread.java:539)\r\n    \tat ...asynchronous invocation...(Unknown Source)\r\n    \tat org.jboss.remoting3.EndpointImpl.doConnect(EndpointImpl.java:272)\r\n    \tat org.jboss.remoting3.EndpointImpl.doConnect(EndpointImpl.java:253)\r\n    \tat org.jboss.remoting3.EndpointImpl.connect(EndpointImpl.java:351)\r\n    \tat org.jboss.remoting3.EndpointImpl.connect(EndpointImpl.java:335)\r\n    \tat org.jboss.remotingjmx.RemotingConnector.internalRemotingConnect(RemotingConnector.java:239)\r\n    \tat org.jboss.remotingjmx.RemotingConnector.internalConnect(RemotingConnector.java:158)\r\n    \tat org.jboss.remotingjmx.RemotingConnector.connect(RemotingConnector.java:105)\r\n    \tat java.management/javax.management.remote.JMXConnectorFactory.connect(Unknown Source)\r\n    \tat JavaInstrumentation$1.run(JavaInstrumentation.java:845)\r\n    \tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)\r\n    \tat java.base/java.util.concurrent.FutureTask.run(Unknown Source)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n    \tat java.base/java.lang.Thread.run(Unknown Source)\r\n\r\n**UPDATE**\r\n\r\n1. **JBoss EAP Admin console is able to login without any issues when  running both JDK 12 &amp; 17. Only facing JMX client connectivity issue  with 17**\r\n\r\n2. **JVM OPTIONS used on the server**\r\n\r\n    JAVA_OPTS:  -server\r\n    -Xlog:gc*:file=&quot;/opt/app/logs/eap/gc.log&quot;:time,uptimemillis:filecount=5,filesize=3M\r\n    -Xms4096m -Xmx4096m -XX:MetaspaceSize=96M -XX:MaxMetaspaceSize=2048m -Djava.net.preferIPv4Stack=true -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/opt/app/jboss/Dumps/HeapDumps/  --add-exports=java.base/sun.nio.ch=ALL-UNNAMED --add-exports=jdk.unsupported/sun.misc=ALL-UNNAMED --add-exports=jdk.unsupported/sun.reflect=ALL-UNNAMED --add-exports=java.desktop/sun.awt=ALL-UNNAMED --add-exports=java.naming/com.sun.jndi.ldap=ALL-UNNAMED --add-exports=java.naming/com.sun.jndi.url.ldap=ALL-UNNAMED --add-exports=java.naming/com.sun.jndi.url.ldaps=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.security=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED --add-opens=java.management/javax.management=ALL-UNNAMED --add-opens=java.naming/javax.naming=ALL-UNNAMED\r\n\r\n\r\n3. **JVM OPTIONS used on the JMX Client**\r\n\r\n    \r\n\r\n    [-Xrs, -XX:+SuppressFatalErrorMessage, -Xss2m,\r\n    -Djavax.xml.soap.SAAJMetaFactory=com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl,\r\n    -XX:ErrorFile=/dev/null, -XX:HeapDumpPath=/dev/null, -XX:-CreateCoredumpOnCrash, --add-opens=java.management/sun.management=ALL-UNNAMED, --add-opens=java.base/java.lang=ALL-UNNAMED, -Xmx512m, -Dsun.net.inetaddr.ttl=900, -Dhttp.keepAlive=false, -Djdk.http.auth.tunneling.disabledSchemes=, -Doracle.jdbc.timezoneAsRegion=false]\r\n\r\nIs anything need to add additionally on the client side. ?","title":"JMX connection to JBoss EAP 7.4 + LDAP is not connected","body":"<p>I am facing JMX connection issue on JBoss EAP</p>\n<p><strong>My runtime environment</strong> : (Linux OS) - SSL enabled JBoss EAP 7.4.10.GA running on Open JDK 11.0.19 (OpenLogic) &amp; management console is secured with LDAPS server.</p>\n<p><strong>JMX Client</strong>: is working fine when using OpenJDK 12 which is running on the same Linux Machine. When upgrading the Java from 12 to 17 (OpenJDK Runtime Environment Temurin-17.0.8+70 , JMX connection is failure and getting the below exception.</p>\n<p><em><strong>Note</strong> : Jboss-cli-client.jar is added on the class path</em></p>\n<p>How to resolve it ?</p>\n<pre><code>Oct 27, 2023 10:01:31 AM org.xnio.Xnio &lt;clinit&gt;\nINFO: XNIO version 3.3.1.Final\nOct 27, 2023 10:01:31 AM org.xnio.nio.NioXnio &lt;clinit&gt;\nINFO: XNIO NIO Implementation Version 3.3.1.Final\nOct 27, 2023 10:01:31 AM org.jboss.remoting3.EndpointImpl &lt;clinit&gt;\nINFO: JBoss Remoting version 5.0.20.Final\nOct 27, 2023 10:01:31 AM org.jboss.remotingjmx.Util warnDeprecated\nWARN: The protocol 'https-remoting-jmx' is deprecated, instead you should use 'remote+https'.\nOct 27, 2023 10:01:31 AM org.jboss.remoting3.remote.RemoteConnection handleException\nERROR: JBREM000200: Remote connection failed: javax.security.sasl.SaslException: Authentication failed: all available authentication mechanisms failed:\njavax.security.sasl.SaslException: Authentication failed: all available authentication mechanisms failed:\n    at org.jboss.remoting3.remote.ClientConnectionOpenListener.allMechanismsFailed(ClientConnectionOpenListener.java:114)\n    at org.jboss.remoting3.remote.ClientConnectionOpenListener$Capabilities.handleEvent(ClientConnectionOpenListener.java:453)\n    at org.jboss.remoting3.remote.ClientConnectionOpenListener$Capabilities.handleEvent(ClientConnectionOpenListener.java:243)\n    at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)\n    at org.xnio.channels.TranslatingSuspendableChannel.handleReadable(TranslatingSuspendableChannel.java:199)\n    at org.xnio.channels.TranslatingSuspendableChannel$1.handleEvent(TranslatingSuspendableChannel.java:113)\n    at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)\n    at org.xnio.ChannelListeners$DelegatingChannelListener.handleEvent(ChannelListeners.java:1092)\n    at org.xnio.ChannelListeners.invokeChannelListener(ChannelListeners.java:92)\n    at org.xnio.conduits.ReadReadyHandler$ChannelListenerHandler.readReady(ReadReadyHandler.java:66)\n    at org.xnio.nio.NioSocketConduit.handleReady(NioSocketConduit.java:88)\n    at org.xnio.nio.WorkerThread.run(WorkerThread.java:539)\n    at ...asynchronous invocation...(Unknown Source)\n    at org.jboss.remoting3.EndpointImpl.doConnect(EndpointImpl.java:272)\n    at org.jboss.remoting3.EndpointImpl.doConnect(EndpointImpl.java:253)\n    at org.jboss.remoting3.EndpointImpl.connect(EndpointImpl.java:351)\n    at org.jboss.remoting3.EndpointImpl.connect(EndpointImpl.java:335)\n    at org.jboss.remotingjmx.RemotingConnector.internalRemotingConnect(RemotingConnector.java:239)\n    at org.jboss.remotingjmx.RemotingConnector.internalConnect(RemotingConnector.java:158)\n    at org.jboss.remotingjmx.RemotingConnector.connect(RemotingConnector.java:105)\n    at java.management/javax.management.remote.JMXConnectorFactory.connect(Unknown Source)\n    at JavaInstrumentation$1.run(JavaInstrumentation.java:845)\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)\n    at java.base/java.util.concurrent.FutureTask.run(Unknown Source)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    at java.base/java.lang.Thread.run(Unknown Source)\n</code></pre>\n<p><strong>UPDATE</strong></p>\n<ol>\n<li><p><strong>JBoss EAP Admin console is able to login without any issues when  running both JDK 12 &amp; 17. Only facing JMX client connectivity issue  with 17</strong></p>\n</li>\n<li><p><strong>JVM OPTIONS used on the server</strong></p>\n<p>JAVA_OPTS:  -server\n-Xlog:gc*:file=&quot;/opt/app/logs/eap/gc.log&quot;:time,uptimemillis:filecount=5,filesize=3M\n-Xms4096m -Xmx4096m -XX:MetaspaceSize=96M -XX:MaxMetaspaceSize=2048m -Djava.net.preferIPv4Stack=true -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/opt/app/jboss/Dumps/HeapDumps/  --add-exports=java.base/sun.nio.ch=ALL-UNNAMED --add-exports=jdk.unsupported/sun.misc=ALL-UNNAMED --add-exports=jdk.unsupported/sun.reflect=ALL-UNNAMED --add-exports=java.desktop/sun.awt=ALL-UNNAMED --add-exports=java.naming/com.sun.jndi.ldap=ALL-UNNAMED --add-exports=java.naming/com.sun.jndi.url.ldap=ALL-UNNAMED --add-exports=java.naming/com.sun.jndi.url.ldaps=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.security=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED --add-opens=java.management/javax.management=ALL-UNNAMED --add-opens=java.naming/javax.naming=ALL-UNNAMED</p>\n</li>\n<li><p><strong>JVM OPTIONS used on the JMX Client</strong></p>\n<p>[-Xrs, -XX:+SuppressFatalErrorMessage, -Xss2m,\n-Djavax.xml.soap.SAAJMetaFactory=com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl,\n-XX:ErrorFile=/dev/null, -XX:HeapDumpPath=/dev/null, -XX:-CreateCoredumpOnCrash, --add-opens=java.management/sun.management=ALL-UNNAMED, --add-opens=java.base/java.lang=ALL-UNNAMED, -Xmx512m, -Dsun.net.inetaddr.ttl=900, -Dhttp.keepAlive=false, -Djdk.http.auth.tunneling.disabledSchemes=, -Doracle.jdbc.timezoneAsRegion=false]</p>\n</li>\n</ol>\n<p>Is anything need to add additionally on the client side. ?</p>\n"},{"tags":["java","android","unit-testing","okhttp","mockwebserver"],"comments":[{"owner":{"account_id":8732602,"reputation":1804,"user_id":6532155,"display_name":"Kavita Patil"},"score":0,"creation_date":1570556952,"post_id":37965558,"comment_id":102947441,"body_markdown":"How did you solve this issue, I also have two methods in the same class which test API valid and invalid response, when I run it individually both test methods work fine. But when I run the whole class one of them works and the other gives `Failed to connect to localhost/127.0.0.1:58688` error. How did you solve this issue?","body":"How did you solve this issue, I also have two methods in the same class which test API valid and invalid response, when I run it individually both test methods work fine. But when I run the whole class one of them works and the other gives <code>Failed to connect to localhost&#47;127.0.0.1:58688</code> error. How did you solve this issue?"},{"owner":{"account_id":370721,"reputation":157876,"user_id":942852,"accept_rate":62,"display_name":"Nitzan Tomer"},"score":0,"creation_date":1570560377,"post_id":37965558,"comment_id":102948848,"body_markdown":"@Kavita_p I don&#39;t remember, more than 3 years passed since. I marked an answer as the accepted one, so I guess that one helped.","body":"@Kavita_p I don&#39;t remember, more than 3 years passed since. I marked an answer as the accepted one, so I guess that one helped."},{"owner":{"account_id":8732602,"reputation":1804,"user_id":6532155,"display_name":"Kavita Patil"},"score":2,"creation_date":1571084678,"post_id":37965558,"comment_id":103115261,"body_markdown":"Hi @Nitzan Tomer , I solved the above issue by setting `mockWebServer.start(PORT_NUMBER)` constant port number to my mockWebServer and I am using `mockWebServer.shutdown()` in `@After method` to shut down it once I am done with test cases","body":"Hi @Nitzan Tomer , I solved the above issue by setting <code>mockWebServer.start(PORT_NUMBER)</code> constant port number to my mockWebServer and I am using <code>mockWebServer.shutdown()</code> in <code>@After method</code> to shut down it once I am done with test cases"},{"owner":{"account_id":6160961,"reputation":1184,"user_id":4802589,"display_name":"Karan Dhillon"},"score":0,"creation_date":1589000596,"post_id":37965558,"comment_id":109123321,"body_markdown":"I solved the same issue by keeping a constant port number. As not providing a constant port number probably starts a new mock web server on random ports, our retrofit instance in android (or whatever you are using for your HTTP requests) fails to send requests on the port used by the first mock server as that is what we used to get the base url.","body":"I solved the same issue by keeping a constant port number. As not providing a constant port number probably starts a new mock web server on random ports, our retrofit instance in android (or whatever you are using for your HTTP requests) fails to send requests on the port used by the first mock server as that is what we used to get the base url."}],"answers":[{"comments":[{"owner":{"account_id":370721,"reputation":157876,"user_id":942852,"accept_rate":62,"display_name":"Nitzan Tomer"},"score":2,"creation_date":1466595466,"post_id":37966768,"comment_id":63379571,"body_markdown":"Interesting, but I don&#39;t see how that&#39;s the case. As I understand the `setUp` method happens before each test method, which means that a new instance of the mock server is created and a new instance of my server api is created along with the url of the newly created mock server. Or am I missing something here?","body":"Interesting, but I don&#39;t see how that&#39;s the case. As I understand the <code>setUp</code> method happens before each test method, which means that a new instance of the mock server is created and a new instance of my server api is created along with the url of the newly created mock server. Or am I missing something here?"},{"owner":{"account_id":370721,"reputation":157876,"user_id":942852,"accept_rate":62,"display_name":"Nitzan Tomer"},"score":2,"creation_date":1466598365,"post_id":37966768,"comment_id":63381657,"body_markdown":"Ok, turns out that you&#39;re right. It shouldn&#39;t be the case in the example I posted as it&#39;s a simple one, but in my actual code I cache the address of the first mock server in my server api instance. thanks!","body":"Ok, turns out that you&#39;re right. It shouldn&#39;t be the case in the example I posted as it&#39;s a simple one, but in my actual code I cache the address of the first mock server in my server api instance. thanks!"},{"owner":{"account_id":8732602,"reputation":1804,"user_id":6532155,"display_name":"Kavita Patil"},"score":1,"creation_date":1570561982,"post_id":37966768,"comment_id":102949511,"body_markdown":"@JesseWilson @Jesse Wilson, I am stuck with the same issue. I also have two methods in the same class which tests API valid and invalid response, when I run it individually both test methods work fine. But when I run the whole class one of them works and the other gives Failed to connect to localhost/127.0.0.1:58688 error. Whereas if I check for port number `mockWebServer.getPort()` it provides two diffrent ports. How should I proceed with this issue? Thanks in advance.","body":"@JesseWilson @Jesse Wilson, I am stuck with the same issue. I also have two methods in the same class which tests API valid and invalid response, when I run it individually both test methods work fine. But when I run the whole class one of them works and the other gives Failed to connect to localhost/127.0.0.1:58688 error. Whereas if I check for port number <code>mockWebServer.getPort()</code> it provides two diffrent ports. How should I proceed with this issue? Thanks in advance."}],"tags":[],"owner":{"account_id":17735,"reputation":39493,"user_id":40013,"accept_rate":75,"display_name":"Jesse Wilson"},"comment_count":3,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1466595085,"creation_date":1466595085,"answer_id":37966768,"question_id":37965558,"body_markdown":"Your second request is using the URL of the first MockWebServer instance. (Each instance has a distinct URL.)","title":"OkHttp MockWebServer fails to accept connections when restarted","body":"<p>Your second request is using the URL of the first MockWebServer instance. (Each instance has a distinct URL.)</p>\n"},{"comments":[{"owner":{"account_id":2023658,"reputation":4128,"user_id":1809268,"accept_rate":22,"display_name":"Ajith M A"},"score":0,"creation_date":1545000841,"post_id":52276632,"comment_id":94462994,"body_markdown":"Please provide an explanation t your answer, eg: What object is mockhelper.","body":"Please provide an explanation t your answer, eg: What object is mockhelper."}],"tags":[],"owner":{"account_id":4781522,"reputation":115,"user_id":3863097,"display_name":"Tarun Koshta"},"comment_count":1,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1536671035,"creation_date":1536671035,"answer_id":52276632,"question_id":37965558,"body_markdown":"This localhost connection fails because it does not belong tot he mock server. Use this instead\r\n    `(mockHelper.getHost()).willReturn(okhttpMockWebServer.url(&quot;/&quot;).toString())`","title":"OkHttp MockWebServer fails to accept connections when restarted","body":"<p>This localhost connection fails because it does not belong tot he mock server. Use this instead\n    <code>(mockHelper.getHost()).willReturn(okhttpMockWebServer.url(\"/\").toString())</code></p>\n"}],"owner":{"account_id":370721,"reputation":157876,"user_id":942852,"accept_rate":62,"display_name":"Nitzan Tomer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18180,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":37966768,"answer_count":2,"score":13,"last_activity_date":1699447836,"creation_date":1466591900,"question_id":37965558,"body_markdown":"I&#39;m using the [OkHttp MockWebServer][1] to mock my server responses for unit tests.\r\n\r\nIt works great for the first test, but on the 2nd test my client fails with:\r\n\r\n&gt; Failed to connect to localhost/0:0:0:0:0:0:0:1:63631\r\n\r\nThis happens even if the 2nd test is exactly the same as the 1st one.  \r\nHere&#39;s what I&#39;m doing:\r\n\r\n    @RunWith(RobolectricTestRunner.class)\r\n    @Config(shadows = MyClassTest.MyNetworkSecurityPolicy.class,\r\n    \t\tmanifest = &quot;src/main/AndroidManifest.xml&quot;,\r\n    \t\tconstants = BuildConfig.class,\r\n    \t\tsdk = 16)\r\n    public class MyClassTest {\r\n    \tprivate MockWebServer mockServer;\r\n    \tprivate MyServerApi serverApi;\r\n    \t\r\n    \t@Before\r\n    \tpublic void setUp() throws Exception {\r\n    \t\tSystem.out.println(&quot;\\ntest start&quot;);\r\n    \t\tthis.mockServer = new MockWebServer();\r\n    \t\tthis.mockServer.start();\r\n    \r\n    \t\tthis.serverApi = new MyServerApi(this.mockServer.url(&quot;/&quot;).toString());\r\n    \t}\r\n    \r\n    \t@Test\r\n    \tpublic void testOne() throws Exception {\r\n    \t\tfinal String responseBody = // read response from file\r\n    \t\tthis.mockServer.enqueue(new MockResponse().setResponseCode(200).setBody(responseBody));\r\n    \r\n    \t\tfinal Waiter waiter = new Waiter();\r\n    \t\tthis.serverApi.getData(&quot;some_id&quot;, new Callback&lt;MyResponseData&gt; {\r\n    \t\t\t@Override\r\n    \t\t\tpublic void onResponse(final Call&lt;MyResponseData&gt; call, final Response&lt;MyResponseData&gt; response) {\r\n    \t\t\t\twaiter.assertEquals(&quot;some_value&quot;, response.body().getValue());\r\n    \t\t\t\twaiter.resume();\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic void onFailure(final Call&lt;T&gt; call, final Throwable error) {\r\n    \t\t\t\twaiter.fail(error);\r\n    \t\t\t}\r\n    \t\t});\r\n    \r\n    \t\twaiter.await();\r\n    \r\n    \t\tfinal RecordedRequest recordedRequest = this.mockServer.takeRequest();\r\n    \t\tassertEquals(&quot;GET&quot;, recordedRequest.getMethod());\r\n    \t}\r\n    \r\n    \t@Test\r\n    \tpublic void testTwo() throws Exception {\r\n    \t\tfinal String responseBody = // read response from file\r\n    \t\tthis.mockServer.enqueue(new MockResponse().setResponseCode(200).setBody(responseBody));\r\n    \r\n    \t\tfinal Waiter waiter = new Waiter();\r\n    \t\tthis.serverApi.getData(&quot;some_id&quot;, new Callback&lt;MyResponseData&gt; {\r\n    \t\t\t@Override\r\n    \t\t\tpublic void onResponse(final Call&lt;MyResponseData&gt; call, final Response&lt;MyResponseData&gt; response) {\r\n    \t\t\t\twaiter.assertEquals(&quot;some_value&quot;, response.body().getValue());\r\n    \t\t\t\twaiter.resume();\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic void onFailure(final Call&lt;T&gt; call, final Throwable error) {\r\n    \t\t\t\twaiter.fail(error);\r\n    \t\t\t}\r\n    \t\t});\r\n    \r\n    \t\twaiter.await();\r\n    \r\n    \t\tfinal RecordedRequest recordedRequest = this.mockServer.takeRequest();\r\n    \t\tassertEquals(&quot;GET&quot;, recordedRequest.getMethod());\r\n    \t}\r\n    \r\n    \t@After\r\n    \tpublic void tearDown() throws Exception {\r\n    \t\tSystem.out.println(&quot;test end\\n&quot;);\r\n    \t\tthis.mockServer.shutdown();\r\n    \t}\r\n    \r\n    \t@Implements(NetworkSecurityPolicy.class)\r\n    \tpublic static class MyNetworkSecurityPolicy {\r\n    \t\t@Implementation\r\n    \t\tpublic static NetworkSecurityPolicy getInstance() {\r\n    \t\t\ttry {\r\n    \t\t\t\tClass&lt;?&gt; shadow = MyNetworkSecurityPolicy.class.forName(&quot;android.security.NetworkSecurityPolicy&quot;);\r\n    \t\t\t\treturn (NetworkSecurityPolicy) shadow.newInstance();\r\n    \t\t\t} catch (Exception e) {\r\n    \t\t\t\tthrow new AssertionError();\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\t@Implementation\r\n    \t\tpublic boolean isCleartextTrafficPermitted() {\r\n    \t\t\treturn true;\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nThe first test passes as it should, but the second one fails with the message I wrote above.  \r\nThe output in the console is:\r\n\r\n    test start\r\n    okhttp3.mockwebserver.MockWebServer$3 execute\r\n    INFO: MockWebServer[63631] starting to accept connections\r\n    WARNING: no system properties value for gsm.sim.operator.alpha\r\n    okhttp3.mockwebserver.MockWebServer$4 processOneRequest\r\n    INFO: MockWebServer[63631] received request: GET REQUEST_PATH HTTP/1.1 and responded: HTTP/1.1 200 OK\r\n    okhttp3.mockwebserver.MockWebServer$3 acceptConnections\r\n    test end\r\n    \r\n    INFO: MockWebServer[63631] done accepting connections: Socket closed\r\n    \r\n    test start\r\n    okhttp3.mockwebserver.MockWebServer$3 execute\r\n    INFO: MockWebServer[63649] starting to accept connections\r\n    okhttp3.mockwebserver.MockWebServer$3 acceptConnections\r\n    INFO: MockWebServer[63649] done accepting connections: Socket closed\r\n    on error: Failed to connect to localhost/0:0:0:0:0:0:0:1:63631\r\n    test end\r\n\r\n(The `Waiter` object thing is from the [concurrentunit lib][2])\r\n\r\nAny idea why this happens?\r\n\r\n\r\n  [1]: https://github.com/square/okhttp/tree/master/mockwebserver\r\n  [2]: https://github.com/jhalterman/concurrentunit","title":"OkHttp MockWebServer fails to accept connections when restarted","body":"<p>I'm using the <a href=\"https://github.com/square/okhttp/tree/master/mockwebserver\" rel=\"noreferrer\">OkHttp MockWebServer</a> to mock my server responses for unit tests.</p>\n\n<p>It works great for the first test, but on the 2nd test my client fails with:</p>\n\n<blockquote>\n  <p>Failed to connect to localhost/0:0:0:0:0:0:0:1:63631</p>\n</blockquote>\n\n<p>This happens even if the 2nd test is exactly the same as the 1st one.<br>\nHere's what I'm doing:</p>\n\n<pre><code>@RunWith(RobolectricTestRunner.class)\n@Config(shadows = MyClassTest.MyNetworkSecurityPolicy.class,\n        manifest = \"src/main/AndroidManifest.xml\",\n        constants = BuildConfig.class,\n        sdk = 16)\npublic class MyClassTest {\n    private MockWebServer mockServer;\n    private MyServerApi serverApi;\n\n    @Before\n    public void setUp() throws Exception {\n        System.out.println(\"\\ntest start\");\n        this.mockServer = new MockWebServer();\n        this.mockServer.start();\n\n        this.serverApi = new MyServerApi(this.mockServer.url(\"/\").toString());\n    }\n\n    @Test\n    public void testOne() throws Exception {\n        final String responseBody = // read response from file\n        this.mockServer.enqueue(new MockResponse().setResponseCode(200).setBody(responseBody));\n\n        final Waiter waiter = new Waiter();\n        this.serverApi.getData(\"some_id\", new Callback&lt;MyResponseData&gt; {\n            @Override\n            public void onResponse(final Call&lt;MyResponseData&gt; call, final Response&lt;MyResponseData&gt; response) {\n                waiter.assertEquals(\"some_value\", response.body().getValue());\n                waiter.resume();\n            }\n\n            @Override\n            public void onFailure(final Call&lt;T&gt; call, final Throwable error) {\n                waiter.fail(error);\n            }\n        });\n\n        waiter.await();\n\n        final RecordedRequest recordedRequest = this.mockServer.takeRequest();\n        assertEquals(\"GET\", recordedRequest.getMethod());\n    }\n\n    @Test\n    public void testTwo() throws Exception {\n        final String responseBody = // read response from file\n        this.mockServer.enqueue(new MockResponse().setResponseCode(200).setBody(responseBody));\n\n        final Waiter waiter = new Waiter();\n        this.serverApi.getData(\"some_id\", new Callback&lt;MyResponseData&gt; {\n            @Override\n            public void onResponse(final Call&lt;MyResponseData&gt; call, final Response&lt;MyResponseData&gt; response) {\n                waiter.assertEquals(\"some_value\", response.body().getValue());\n                waiter.resume();\n            }\n\n            @Override\n            public void onFailure(final Call&lt;T&gt; call, final Throwable error) {\n                waiter.fail(error);\n            }\n        });\n\n        waiter.await();\n\n        final RecordedRequest recordedRequest = this.mockServer.takeRequest();\n        assertEquals(\"GET\", recordedRequest.getMethod());\n    }\n\n    @After\n    public void tearDown() throws Exception {\n        System.out.println(\"test end\\n\");\n        this.mockServer.shutdown();\n    }\n\n    @Implements(NetworkSecurityPolicy.class)\n    public static class MyNetworkSecurityPolicy {\n        @Implementation\n        public static NetworkSecurityPolicy getInstance() {\n            try {\n                Class&lt;?&gt; shadow = MyNetworkSecurityPolicy.class.forName(\"android.security.NetworkSecurityPolicy\");\n                return (NetworkSecurityPolicy) shadow.newInstance();\n            } catch (Exception e) {\n                throw new AssertionError();\n            }\n        }\n\n        @Implementation\n        public boolean isCleartextTrafficPermitted() {\n            return true;\n        }\n    }\n}\n</code></pre>\n\n<p>The first test passes as it should, but the second one fails with the message I wrote above.<br>\nThe output in the console is:</p>\n\n<pre><code>test start\nokhttp3.mockwebserver.MockWebServer$3 execute\nINFO: MockWebServer[63631] starting to accept connections\nWARNING: no system properties value for gsm.sim.operator.alpha\nokhttp3.mockwebserver.MockWebServer$4 processOneRequest\nINFO: MockWebServer[63631] received request: GET REQUEST_PATH HTTP/1.1 and responded: HTTP/1.1 200 OK\nokhttp3.mockwebserver.MockWebServer$3 acceptConnections\ntest end\n\nINFO: MockWebServer[63631] done accepting connections: Socket closed\n\ntest start\nokhttp3.mockwebserver.MockWebServer$3 execute\nINFO: MockWebServer[63649] starting to accept connections\nokhttp3.mockwebserver.MockWebServer$3 acceptConnections\nINFO: MockWebServer[63649] done accepting connections: Socket closed\non error: Failed to connect to localhost/0:0:0:0:0:0:0:1:63631\ntest end\n</code></pre>\n\n<p>(The <code>Waiter</code> object thing is from the <a href=\"https://github.com/jhalterman/concurrentunit\" rel=\"noreferrer\">concurrentunit lib</a>)</p>\n\n<p>Any idea why this happens?</p>\n"},{"tags":["java","date-arithmetic"],"comments":[{"owner":{"account_id":1496007,"reputation":4008,"user_id":1401933,"accept_rate":40,"display_name":"influjensbahr"},"score":0,"creation_date":1385228022,"post_id":20165564,"comment_id":30060179,"body_markdown":"What does not work? Is it crashing? Is it giving you wrong numbers?","body":"What does not work? Is it crashing? Is it giving you wrong numbers?"},{"owner":{"account_id":2202492,"reputation":2083,"user_id":1946548,"accept_rate":57,"display_name":"Rhys"},"score":0,"creation_date":1385228217,"post_id":20165564,"comment_id":30060251,"body_markdown":"Where is the declaration of the array: insert1?","body":"Where is the declaration of the array: insert1?"},{"owner":{"account_id":2660877,"reputation":38543,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"score":3,"creation_date":1385229176,"post_id":20165564,"comment_id":30060570,"body_markdown":"insert1 = eingabe1 in German :)","body":"insert1 = eingabe1 in German :)"},{"owner":{"account_id":2202492,"reputation":2083,"user_id":1946548,"accept_rate":57,"display_name":"Rhys"},"score":0,"creation_date":1385229447,"post_id":20165564,"comment_id":30060662,"body_markdown":"@peter.petrov Ah, I see!","body":"@peter.petrov Ah, I see!"},{"owner":{"account_id":1202808,"reputation":15318,"user_id":1173114,"display_name":"Sage"},"score":0,"creation_date":1385229983,"post_id":20165564,"comment_id":30060841,"body_markdown":"I think he is having issue with `mm` and `MM` :P","body":"I think he is having issue with <code>mm</code> and <code>MM</code> :P"},{"owner":{"account_id":5500955,"reputation":876,"user_id":10783374,"display_name":"Edor Linus"},"score":0,"creation_date":1626431877,"post_id":20165564,"comment_id":120897030,"body_markdown":"This code is too messy.","body":"This code is too messy."}],"answers":[{"comments":[{"owner":{"account_id":1975226,"reputation":5933,"user_id":1773155,"accept_rate":58,"display_name":"Shajeel Afzal"},"score":0,"creation_date":1432500913,"post_id":20165708,"comment_id":48941329,"body_markdown":"For some reasons it is returning -1","body":"For some reasons it is returning -1"},{"owner":{"account_id":366376,"reputation":307,"user_id":711862,"accept_rate":75,"display_name":"Groovy Ed"},"score":47,"creation_date":1432686018,"post_id":20165708,"comment_id":49022535,"body_markdown":"This is a bad implementation that doesn&#39;t account leap years properly.","body":"This is a bad implementation that doesn&#39;t account leap years properly."},{"owner":{"account_id":30606,"reputation":3631,"user_id":83509,"display_name":"Jugal Shah"},"score":0,"creation_date":1451273057,"post_id":20165708,"comment_id":56716525,"body_markdown":"@GroovyEd - Can you explain more on why this is a bad implementation?","body":"@GroovyEd - Can you explain more on why this is a bad implementation?"},{"owner":{"account_id":2216130,"reputation":632,"user_id":1956719,"display_name":"Guihgo"},"score":4,"creation_date":1451783240,"post_id":20165708,"comment_id":56889656,"body_markdown":"TimeUnit.DAYS.convert(diff, TimeUnit.MILLISECONDS)); &lt;3","body":"TimeUnit.DAYS.convert(diff, TimeUnit.MILLISECONDS)); &lt;3"},{"owner":{"account_id":6099840,"reputation":823,"user_id":4759226,"accept_rate":79,"display_name":"Erick"},"score":0,"creation_date":1457291177,"post_id":20165708,"comment_id":59329305,"body_markdown":"Do I need a JAR file to use TimeUnit?","body":"Do I need a JAR file to use TimeUnit?"},{"owner":{"account_id":4599240,"reputation":816,"user_id":3730470,"display_name":"Klitos G."},"score":3,"creation_date":1464953938,"post_id":20165708,"comment_id":62709473,"body_markdown":"@GroovyEd From what I have tested it seems that this code has no problem with leap years. Please take note that TimeUnit.Days.convert() will ignore remaining units eg converting 999 milliseconds to seconds results in 0. This means that if you use new Date() as one of the Date objects you might get one day less so take care","body":"@GroovyEd From what I have tested it seems that this code has no problem with leap years. Please take note that TimeUnit.Days.convert() will ignore remaining units eg converting 999 milliseconds to seconds results in 0. This means that if you use new Date() as one of the Date objects you might get one day less so take care"},{"owner":{"account_id":5080491,"reputation":15131,"user_id":4076764,"accept_rate":74,"display_name":"Adam Hughes"},"score":0,"creation_date":1475161849,"post_id":20165708,"comment_id":66842277,"body_markdown":"This code predicts 93 days between the two dates, but there are 94.  Try it out:\n\nhttps://www.timeanddate.com/date/dateadded.html?m1=1&amp;d1=23&amp;y1=1997&amp;type=add&amp;ay=&amp;am=&amp;aw=&amp;ad=94&amp;rec=\n\nAlso verified in python:\n\nIn [3]: x = dt.date(year=1997, day=23, month=1)\n\nIn [4]: x\nOut[4]: datetime.date(1997, 1, 23)\n\nIn [5]: y = dt.date(year=1997, day=27, month=04)\n\nIn [6]: y-x\nOut[6]: datetime.timedelta(94)","body":"This code predicts 93 days between the two dates, but there are 94.  Try it out:  <a href=\"https://www.timeanddate.com/date/dateadded.html?m1=1&amp;d1=23&amp;y1=1997&amp;type=add&amp;ay=&amp;am=&amp;aw=&amp;ad=94&amp;rec=\" rel=\"nofollow noreferrer\">timeanddate.com/date/&hellip;</a>  Also verified in python:  In [3]: x = dt.date(year=1997, day=23, month=1)  In [4]: x Out[4]: datetime.date(1997, 1, 23)  In [5]: y = dt.date(year=1997, day=27, month=04)  In [6]: y-x Out[6]: datetime.timedelta(94)"},{"owner":{"account_id":9162680,"reputation":3767,"user_id":6813506,"accept_rate":22,"display_name":"Rohit Gaikwad"},"score":3,"creation_date":1480409472,"post_id":20165708,"comment_id":68938366,"body_markdown":"It works for leap years too. check this `String inputString1 = &quot;28 2 2016&quot;; String inputString2 = &quot;1 3 2016&quot;;` ans: 2","body":"It works for leap years too. check this <code>String inputString1 = &quot;28 2 2016&quot;; String inputString2 = &quot;1 3 2016&quot;;</code> ans: 2"},{"owner":{"account_id":3930250,"reputation":195,"user_id":3270466,"display_name":"Rodrigo de Bona Sartor"},"score":0,"creation_date":1486640362,"post_id":20165708,"comment_id":71437589,"body_markdown":"this answer is wrong. It&#39;s returning 364 days between 1985/01/01 and 1986/01/01","body":"this answer is wrong. It&#39;s returning 364 days between 1985/01/01 and 1986/01/01"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":14,"creation_date":1503570614,"post_id":20165708,"comment_id":78676184,"body_markdown":"I believe this works correctly for leap years, but it messes up daylight savings time.  If your locale has daylight savings time, then every year, there&#39;s one day that has 23 hours and one day that has 25 hours.  This solution incorrectly assumes that every day has 24 hours.  It therefore \n gives the wrong answer for any period that starts during non-daylight savings and ends during daylight savings.  DO NOT USE THIS SOLUTION - there are better ways.","body":"I believe this works correctly for leap years, but it messes up daylight savings time.  If your locale has daylight savings time, then every year, there&#39;s one day that has 23 hours and one day that has 25 hours.  This solution incorrectly assumes that every day has 24 hours.  It therefore   gives the wrong answer for any period that starts during non-daylight savings and ends during daylight savings.  DO NOT USE THIS SOLUTION - there are better ways."},{"owner":{"account_id":8479842,"reputation":3119,"user_id":6359851,"accept_rate":66,"display_name":"Erfan"},"score":0,"creation_date":1523260433,"post_id":20165708,"comment_id":86469725,"body_markdown":"this must be accepted answer for all question about this in stack over flow +1","body":"this must be accepted answer for all question about this in stack over flow +1"},{"owner":{"account_id":4033237,"reputation":2001,"user_id":3331076,"accept_rate":91,"display_name":"Jayesh Dhandha"},"score":0,"creation_date":1578899103,"post_id":20165708,"comment_id":105575071,"body_markdown":"If my current date is 13th Jan 23:55:00 and new date is 14th Jan 00:59:00 than the expected output is 1 day (because day changed) but here we will get 0 :(","body":"If my current date is 13th Jan 23:55:00 and new date is 14th Jan 00:59:00 than the expected output is 1 day (because day changed) but here we will get 0 :("},{"owner":{"account_id":1496007,"reputation":4008,"user_id":1401933,"accept_rate":40,"display_name":"influjensbahr"},"score":0,"creation_date":1578990145,"post_id":20165708,"comment_id":105609103,"body_markdown":"Hey @JayeshDhandha, see my last edit where you can calculate float days yourself. In your case you&#39;d have to round up, so days = Math.ceil(...)","body":"Hey @JayeshDhandha, see my last edit where you can calculate float days yourself. In your case you&#39;d have to round up, so days = Math.ceil(...)"},{"owner":{"account_id":1496007,"reputation":4008,"user_id":1401933,"accept_rate":40,"display_name":"influjensbahr"},"score":0,"creation_date":1585481608,"post_id":20165708,"comment_id":107768412,"body_markdown":"Hi @BasilBourque, thanks for letting me know. My answer is from 2013 so it&#39;s no surprise it was a bit outdated. I have updated the answer above.","body":"Hi @BasilBourque, thanks for letting me know. My answer is from 2013 so it&#39;s no surprise it was a bit outdated. I have updated the answer above."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1585498250,"post_id":20165708,"comment_id":107774346,"body_markdown":"@jens108 Better, but `LocalDateTime` is the wrong class to use here as we have no time-of-day involved. Use `LocalDate` as seen in other answers. Also, the legacy date-time classes have not yet been officially deprecated. They *should* be deprecated.","body":"@jens108 Better, but <code>LocalDateTime</code> is the wrong class to use here as we have no time-of-day involved. Use <code>LocalDate</code> as seen in other answers. Also, the legacy date-time classes have not yet been officially deprecated. They <i>should</i> be deprecated."},{"owner":{"account_id":2349225,"reputation":26836,"user_id":2058547,"accept_rate":60,"display_name":"Ojonugwa Jude Ochalifu"},"score":1,"creation_date":1625571472,"post_id":20165708,"comment_id":120656688,"body_markdown":"`LocalDate.parse()` returns a LocalDate, not a `LocalDateTime`","body":"<code>LocalDate.parse()</code> returns a LocalDate, not a <code>LocalDateTime</code>"}],"tags":[],"owner":{"account_id":1496007,"reputation":4008,"user_id":1401933,"accept_rate":40,"display_name":"influjensbahr"},"comment_count":16,"down_vote_count":15,"up_vote_count":324,"is_accepted":false,"score":309,"last_activity_date":1590771877,"creation_date":1385228705,"answer_id":20165708,"question_id":20165564,"body_markdown":"**UPDATE:** The original answer from 2013 is now outdated because some of the classes have been replaced. The new way of doing this is using the new [`java.time`][3] classes.\r\n\r\n    DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;dd MM yyyy&quot;);\r\n    String inputString1 = &quot;23 01 1997&quot;;\r\n    String inputString2 = &quot;27 04 1997&quot;;\r\n    \r\n    try {\r\n        LocalDateTime date1 = LocalDate.parse(inputString1, dtf);\r\n        LocalDateTime date2 = LocalDate.parse(inputString2, dtf);\r\n        long daysBetween = Duration.between(date1, date2).toDays();\r\n        System.out.println (&quot;Days: &quot; + daysBetween);\r\n    } catch (ParseException e) {\r\n        e.printStackTrace();\r\n    }\r\n\r\nNote that this solution will give the number of actual 24 hour-days, not the number of calendar days. For the latter, use \r\n\r\n    long daysBetween = ChronoUnit.DAYS.between(date1, date2)\r\n\r\n----------\r\n\r\n\r\n**Original answer** (outdated as of Java 8)\r\n\r\nYou are making some conversions with your Strings that are not necessary. There is a [`SimpleDateFormat`][1] class for it - try this:\r\n\r\n    SimpleDateFormat myFormat = new SimpleDateFormat(&quot;dd MM yyyy&quot;);\r\n    String inputString1 = &quot;23 01 1997&quot;;\r\n    String inputString2 = &quot;27 04 1997&quot;;\r\n    \r\n    try {\r\n        Date date1 = myFormat.parse(inputString1);\r\n        Date date2 = myFormat.parse(inputString2);\r\n        long diff = date2.getTime() - date1.getTime();\r\n        System.out.println (&quot;Days: &quot; + TimeUnit.DAYS.convert(diff, TimeUnit.MILLISECONDS));\r\n    } catch (ParseException e) {\r\n        e.printStackTrace();\r\n    }\r\n\r\n**EDIT:** Since there have been some discussions regarding the correctness of this code: it does indeed take care of leap years. However, the [`TimeUnit.DAYS.convert`][2] function loses precision since milliseconds are converted to days (see the linked doc for more info). If this is a problem, `diff` can also be converted by hand:\r\n\r\n    float days = (diff / (1000*60*60*24));\r\n\r\nNote that this is a `float` value, not necessarily an `int`. \r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html#convert(long,%20java.util.concurrent.TimeUnit)\r\n  [3]: https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html","title":"Calculating days between two dates with Java","body":"<p><strong>UPDATE:</strong> The original answer from 2013 is now outdated because some of the classes have been replaced. The new way of doing this is using the new <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html\" rel=\"noreferrer\"><code>java.time</code></a> classes.</p>\n\n<pre><code>DateTimeFormatter dtf = DateTimeFormatter.ofPattern(\"dd MM yyyy\");\nString inputString1 = \"23 01 1997\";\nString inputString2 = \"27 04 1997\";\n\ntry {\n    LocalDateTime date1 = LocalDate.parse(inputString1, dtf);\n    LocalDateTime date2 = LocalDate.parse(inputString2, dtf);\n    long daysBetween = Duration.between(date1, date2).toDays();\n    System.out.println (\"Days: \" + daysBetween);\n} catch (ParseException e) {\n    e.printStackTrace();\n}\n</code></pre>\n\n<p>Note that this solution will give the number of actual 24 hour-days, not the number of calendar days. For the latter, use </p>\n\n<pre><code>long daysBetween = ChronoUnit.DAYS.between(date1, date2)\n</code></pre>\n\n<hr>\n\n<p><strong>Original answer</strong> (outdated as of Java 8)</p>\n\n<p>You are making some conversions with your Strings that are not necessary. There is a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html\" rel=\"noreferrer\"><code>SimpleDateFormat</code></a> class for it - try this:</p>\n\n<pre><code>SimpleDateFormat myFormat = new SimpleDateFormat(\"dd MM yyyy\");\nString inputString1 = \"23 01 1997\";\nString inputString2 = \"27 04 1997\";\n\ntry {\n    Date date1 = myFormat.parse(inputString1);\n    Date date2 = myFormat.parse(inputString2);\n    long diff = date2.getTime() - date1.getTime();\n    System.out.println (\"Days: \" + TimeUnit.DAYS.convert(diff, TimeUnit.MILLISECONDS));\n} catch (ParseException e) {\n    e.printStackTrace();\n}\n</code></pre>\n\n<p><strong>EDIT:</strong> Since there have been some discussions regarding the correctness of this code: it does indeed take care of leap years. However, the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html#convert(long,%20java.util.concurrent.TimeUnit)\" rel=\"noreferrer\"><code>TimeUnit.DAYS.convert</code></a> function loses precision since milliseconds are converted to days (see the linked doc for more info). If this is a problem, <code>diff</code> can also be converted by hand:</p>\n\n<pre><code>float days = (diff / (1000*60*60*24));\n</code></pre>\n\n<p>Note that this is a <code>float</code> value, not necessarily an <code>int</code>. </p>\n"},{"tags":[],"owner":{"account_id":2660877,"reputation":38543,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1385228880,"creation_date":1385228880,"answer_id":20165738,"question_id":20165564,"body_markdown":"When I run your program, it doesn&#39;t even get me \r\nto the point where I can enter the second date.\r\n\r\nThis is simpler and less error prone.\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.InputStreamReader;\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.Date;\r\n    \r\n    public class Test001 {\r\n    \r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \r\n    \t\tBufferedReader br = null;\r\n    \r\n    \t\tbr = new BufferedReader(new InputStreamReader(System.in));\r\n    \t\tSimpleDateFormat sdf = new SimpleDateFormat(&quot;dd MM yyyy&quot;);\r\n    \r\n    \t\tSystem.out.println(&quot;Insert first date : &quot;);\r\n    \t\tDate dt1 = sdf.parse(br.readLine().trim());\r\n    \r\n    \t\tSystem.out.println(&quot;Insert second date : &quot;);\r\n    \t\tDate dt2 = sdf.parse(br.readLine().trim());\r\n    \r\n    \t\tlong diff = dt2.getTime() - dt1.getTime();\r\n    \r\n    \t\tSystem.out.println(&quot;Days: &quot; + diff / 1000L / 60L / 60L / 24L);\r\n    \r\n    \t\tif (br != null) {\r\n    \t\t\tbr.close();\r\n    \t\t}\r\n    \t}\r\n    }\r\n    \r\n    \r\n    ","title":"Calculating days between two dates with Java","body":"<p>When I run your program, it doesn't even get me \nto the point where I can enter the second date.</p>\n\n<p>This is simpler and less error prone.</p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.InputStreamReader;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\n\npublic class Test001 {\n\n    public static void main(String[] args) throws Exception {\n\n        BufferedReader br = null;\n\n        br = new BufferedReader(new InputStreamReader(System.in));\n        SimpleDateFormat sdf = new SimpleDateFormat(\"dd MM yyyy\");\n\n        System.out.println(\"Insert first date : \");\n        Date dt1 = sdf.parse(br.readLine().trim());\n\n        System.out.println(\"Insert second date : \");\n        Date dt2 = sdf.parse(br.readLine().trim());\n\n        long diff = dt2.getTime() - dt1.getTime();\n\n        System.out.println(\"Days: \" + diff / 1000L / 60L / 60L / 24L);\n\n        if (br != null) {\n            br.close();\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":4,"creation_date":1394777325,"post_id":20165939,"comment_id":34051821,"body_markdown":"This answer could be improved in a few ways. (a) Specify time zone rather than rely on the JVM&#39;s default. So when when creating that DateTimeFormatter, add a call to `withZone( DateTimeZone.forID( &quot;Europe/Berlin&quot; ) )`. (b) Why use `LocalDate` in the `daysBetween` call? Just pass DateTime objects (firstTime, secondTime). For full days, call `withTimeAtStartOfDays`. (c) I would use variable names `firstDateTime` rather then `firstTime` to avoid ambiguity between date, time, and date-time objects. (d) Add some try-catch to handle bad data input that does not match our expected format.","body":"This answer could be improved in a few ways. (a) Specify time zone rather than rely on the JVM&#39;s default. So when when creating that DateTimeFormatter, add a call to <code>withZone( DateTimeZone.forID( &quot;Europe&#47;Berlin&quot; ) )</code>. (b) Why use <code>LocalDate</code> in the <code>daysBetween</code> call? Just pass DateTime objects (firstTime, secondTime). For full days, call <code>withTimeAtStartOfDays</code>. (c) I would use variable names <code>firstDateTime</code> rather then <code>firstTime</code> to avoid ambiguity between date, time, and date-time objects. (d) Add some try-catch to handle bad data input that does not match our expected format."}],"tags":[],"owner":{"account_id":2365504,"reputation":1312,"user_id":2071253,"accept_rate":62,"display_name":"Julien"},"comment_count":1,"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1510314470,"creation_date":1385229946,"answer_id":20165939,"question_id":20165564,"body_markdown":"Java date libraries are notoriously broken. I would advise to use [Joda Time][1]. It will take care of leap year, time zone and so on for you.\r\n\r\nMinimal working example:\r\n\r\n    import java.util.Scanner;\r\n    import org.joda.time.DateTime;\r\n    import org.joda.time.Days;\r\n    import org.joda.time.LocalDate;\r\n    import org.joda.time.format.DateTimeFormat;\r\n    import org.joda.time.format.DateTimeFormatter;\r\n\r\n    public class DateTestCase {\r\n\r\n        public static void main(String[] args) {\r\n\r\n            System.out.print(&quot;Insert first date: &quot;);\r\n            Scanner s = new Scanner(System.in);\r\n            String firstdate = s.nextLine();\r\n            System.out.print(&quot;Insert second date: &quot;);\r\n            String seconddate = s.nextLine();\r\n\r\n            // Formatter\r\n            DateTimeFormatter dateStringFormat = DateTimeFormat\r\n                    .forPattern(&quot;dd MM yyyy&quot;);\r\n            DateTime firstTime = dateStringFormat.parseDateTime(firstdate);\r\n            DateTime secondTime = dateStringFormat.parseDateTime(seconddate);\r\n            int days = Days.daysBetween(new LocalDate(firstTime),\r\n                                        new LocalDate(secondTime)).getDays();\r\n            System.out.println(&quot;Days between the two dates &quot; + days);\r\n        }\r\n    }\r\n\r\n  [1]: http://www.joda.org/joda-time/\r\n","title":"Calculating days between two dates with Java","body":"<p>Java date libraries are notoriously broken. I would advise to use <a href=\"http://www.joda.org/joda-time/\" rel=\"noreferrer\">Joda Time</a>. It will take care of leap year, time zone and so on for you.</p>\n\n<p>Minimal working example:</p>\n\n<pre><code>import java.util.Scanner;\nimport org.joda.time.DateTime;\nimport org.joda.time.Days;\nimport org.joda.time.LocalDate;\nimport org.joda.time.format.DateTimeFormat;\nimport org.joda.time.format.DateTimeFormatter;\n\npublic class DateTestCase {\n\n    public static void main(String[] args) {\n\n        System.out.print(\"Insert first date: \");\n        Scanner s = new Scanner(System.in);\n        String firstdate = s.nextLine();\n        System.out.print(\"Insert second date: \");\n        String seconddate = s.nextLine();\n\n        // Formatter\n        DateTimeFormatter dateStringFormat = DateTimeFormat\n                .forPattern(\"dd MM yyyy\");\n        DateTime firstTime = dateStringFormat.parseDateTime(firstdate);\n        DateTime secondTime = dateStringFormat.parseDateTime(seconddate);\n        int days = Days.daysBetween(new LocalDate(firstTime),\n                                    new LocalDate(secondTime)).getDays();\n        System.out.println(\"Days between the two dates \" + days);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8431525,"reputation":3492,"user_id":6327086,"display_name":"Max Alexander Hanna"},"score":1,"creation_date":1492030719,"post_id":22378299,"comment_id":73821196,"body_markdown":"Does this account for leap years and daylight savings?","body":"Does this account for leap years and daylight savings?"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1503570908,"post_id":22378299,"comment_id":78676388,"body_markdown":"@MaxAlexanderHanna it accounts for leap years correctly, but not daylight savings.  It only gives the correct answer whenever a period starts during non-daylight savings time but ends during daylight savings.  In all other cases, it&#39;s off by one.","body":"@MaxAlexanderHanna it accounts for leap years correctly, but not daylight savings.  It only gives the correct answer whenever a period starts during non-daylight savings time but ends during daylight savings.  In all other cases, it&#39;s off by one."},{"owner":{"account_id":3545904,"reputation":2952,"user_id":2961878,"accept_rate":100,"display_name":"Alisa"},"score":1,"creation_date":1525362929,"post_id":22378299,"comment_id":87336277,"body_markdown":"@saidesh_kilaru What is the &quot;+ 1&quot;? I think you should remove it.","body":"@saidesh_kilaru What is the &quot;+ 1&quot;? I think you should remove it."},{"owner":{"account_id":728291,"reputation":3808,"user_id":681895,"accept_rate":75,"display_name":"EricG"},"score":0,"creation_date":1543407313,"post_id":22378299,"comment_id":93907058,"body_markdown":"I had a problem that casting to INT resulted in 4 and casting to float resulted in 4.9, so thats not really what I wanted;  Maybe not clearly enough described the cases for date1 at 23:59 and date2 at 00:01 and what the expected result would be.","body":"I had a problem that casting to INT resulted in 4 and casting to float resulted in 4.9, so thats not really what I wanted;  Maybe not clearly enough described the cases for date1 at 23:59 and date2 at 00:01 and what the expected result would be."}],"tags":[],"owner":{"account_id":2117408,"reputation":740,"user_id":1881350,"display_name":"saidesh kilaru"},"comment_count":4,"down_vote_count":3,"up_vote_count":25,"is_accepted":false,"score":22,"last_activity_date":1510314550,"creation_date":1394712752,"answer_id":22378299,"question_id":20165564,"body_markdown":"Use:\r\n\r\n    public int getDifferenceDays(Date d1, Date d2) {\r\n        int daysdiff = 0;\r\n        long diff = d2.getTime() - d1.getTime();\r\n        long diffDays = diff / (24 * 60 * 60 * 1000) + 1;\r\n        daysdiff = (int) diffDays;\r\n        return daysdiff;\r\n    }\r\n","title":"Calculating days between two dates with Java","body":"<p>Use:</p>\n\n<pre><code>public int getDifferenceDays(Date d1, Date d2) {\n    int daysdiff = 0;\n    long diff = d2.getTime() - d1.getTime();\n    long diffDays = diff / (24 * 60 * 60 * 1000) + 1;\n    daysdiff = (int) diffDays;\n    return daysdiff;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5422297,"reputation":517,"user_id":4315585,"display_name":"Gautam Viradiya"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1424769750,"creation_date":1424769750,"answer_id":28692025,"question_id":20165564,"body_markdown":"\r\n\r\n    String dateStart = &quot;01/14/2015 08:29:58&quot;;\r\n    String dateStop = &quot;01/15/2015 11:31:48&quot;;\r\n    \r\n    //HH converts hour in 24 hours format (0-23), day calculation\r\n    SimpleDateFormat format = new SimpleDateFormat(&quot;MM/dd/yyyy HH:mm:ss&quot;);\r\n    \r\n    Date d1 = null;\r\n    Date d2 = null;\r\n    \r\n    d1 = format.parse(dateStart);\r\n    d2 = format.parse(dateStop);\r\n    \r\n    //in milliseconds\r\n    long diff = d2.getTime() - d1.getTime();\r\n    \r\n    long diffSeconds = diff / 1000 % 60;\r\n    long diffMinutes = diff / (60 * 1000) % 60;\r\n    long diffHours = diff / (60 * 60 * 1000) % 24;\r\n    long diffDays = diff / (24 * 60 * 60 * 1000);\r\n    \r\n    System.out.print(diffDays + &quot; days, &quot;);\r\n    System.out.print(diffHours + &quot; hours, &quot;);\r\n    System.out.print(diffMinutes + &quot; minutes, &quot;);\r\n    System.out.print(diffSeconds + &quot; seconds.&quot;);\r\n\r\n","title":"Calculating days between two dates with Java","body":"<pre><code>String dateStart = \"01/14/2015 08:29:58\";\nString dateStop = \"01/15/2015 11:31:48\";\n\n//HH converts hour in 24 hours format (0-23), day calculation\nSimpleDateFormat format = new SimpleDateFormat(\"MM/dd/yyyy HH:mm:ss\");\n\nDate d1 = null;\nDate d2 = null;\n\nd1 = format.parse(dateStart);\nd2 = format.parse(dateStop);\n\n//in milliseconds\nlong diff = d2.getTime() - d1.getTime();\n\nlong diffSeconds = diff / 1000 % 60;\nlong diffMinutes = diff / (60 * 1000) % 60;\nlong diffHours = diff / (60 * 60 * 1000) % 24;\nlong diffDays = diff / (24 * 60 * 60 * 1000);\n\nSystem.out.print(diffDays + \" days, \");\nSystem.out.print(diffHours + \" hours, \");\nSystem.out.print(diffMinutes + \" minutes, \");\nSystem.out.print(diffSeconds + \" seconds.\");\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1231014,"reputation":594,"user_id":1195605,"display_name":"Ravi Sanwal"},"score":0,"creation_date":1435002184,"post_id":28865648,"comment_id":50006894,"body_markdown":"handles daylight saving time switches nicely","body":"handles daylight saving time switches nicely"},{"owner":{"account_id":2246036,"reputation":9142,"user_id":1979347,"accept_rate":87,"display_name":"Rohan Kandwal"},"score":1,"creation_date":1439815785,"post_id":28865648,"comment_id":52000942,"body_markdown":"+1 for the answer, however, want to add that we need the `Calendar dayOne = (Calendar) day1.clone(),\n            dayTwo = (Calendar) day2.clone();` lines since they ensure that the original calendar values aren&#39;t overridden. I deleted these lines thinking them redundant and wasted an hour over the fact that my original object&#39;s values were getting overwritten from inside this function.","body":"+1 for the answer, however, want to add that we need the <code>Calendar dayOne = (Calendar) day1.clone(),             dayTwo = (Calendar) day2.clone();</code> lines since they ensure that the original calendar values aren&#39;t overridden. I deleted these lines thinking them redundant and wasted an hour over the fact that my original object&#39;s values were getting overwritten from inside this function."},{"owner":{"account_id":367431,"reputation":357,"user_id":713619,"display_name":"Dmitry"},"score":2,"creation_date":1483626656,"post_id":28865648,"comment_id":70180330,"body_markdown":"Don&#39;t forget that Month value is 0-based in Calendar Class.\ncalendar.set(2015, 11, 30, 0, 00, 00); actually means 30/12/2015","body":"Don&#39;t forget that Month value is 0-based in Calendar Class. calendar.set(2015, 11, 30, 0, 00, 00); actually means 30/12/2015"}],"tags":[],"owner":{"account_id":138068,"reputation":22062,"user_id":342745,"accept_rate":93,"display_name":"John Leehey"},"comment_count":3,"down_vote_count":1,"up_vote_count":70,"is_accepted":false,"score":69,"last_activity_date":1446023112,"creation_date":1425505576,"answer_id":28865648,"question_id":20165564,"body_markdown":"Most / all answers caused issues for us when daylight savings time came around.  Here&#39;s our working solution for all dates, without using JodaTime. It utilizes calendar objects:\r\n\r\n    public static int daysBetween(Calendar day1, Calendar day2){\r\n        Calendar dayOne = (Calendar) day1.clone(),\r\n                dayTwo = (Calendar) day2.clone();\r\n\r\n        if (dayOne.get(Calendar.YEAR) == dayTwo.get(Calendar.YEAR)) {\r\n            return Math.abs(dayOne.get(Calendar.DAY_OF_YEAR) - dayTwo.get(Calendar.DAY_OF_YEAR));\r\n        } else {\r\n            if (dayTwo.get(Calendar.YEAR) &gt; dayOne.get(Calendar.YEAR)) {\r\n                //swap them\r\n                Calendar temp = dayOne;\r\n                dayOne = dayTwo;\r\n                dayTwo = temp;\r\n            }\r\n            int extraDays = 0;\r\n\r\n\t\t\tint dayOneOriginalYearDays = dayOne.get(Calendar.DAY_OF_YEAR);\r\n\r\n            while (dayOne.get(Calendar.YEAR) &gt; dayTwo.get(Calendar.YEAR)) {\r\n                dayOne.add(Calendar.YEAR, -1);\r\n                // getActualMaximum() important for leap years\r\n                extraDays += dayOne.getActualMaximum(Calendar.DAY_OF_YEAR);\r\n            }\r\n\r\n            return extraDays - dayTwo.get(Calendar.DAY_OF_YEAR) + dayOneOriginalYearDays ;\r\n        }\r\n    }\r\n","title":"Calculating days between two dates with Java","body":"<p>Most / all answers caused issues for us when daylight savings time came around.  Here's our working solution for all dates, without using JodaTime. It utilizes calendar objects:</p>\n\n<pre><code>public static int daysBetween(Calendar day1, Calendar day2){\n    Calendar dayOne = (Calendar) day1.clone(),\n            dayTwo = (Calendar) day2.clone();\n\n    if (dayOne.get(Calendar.YEAR) == dayTwo.get(Calendar.YEAR)) {\n        return Math.abs(dayOne.get(Calendar.DAY_OF_YEAR) - dayTwo.get(Calendar.DAY_OF_YEAR));\n    } else {\n        if (dayTwo.get(Calendar.YEAR) &gt; dayOne.get(Calendar.YEAR)) {\n            //swap them\n            Calendar temp = dayOne;\n            dayOne = dayTwo;\n            dayTwo = temp;\n        }\n        int extraDays = 0;\n\n        int dayOneOriginalYearDays = dayOne.get(Calendar.DAY_OF_YEAR);\n\n        while (dayOne.get(Calendar.YEAR) &gt; dayTwo.get(Calendar.YEAR)) {\n            dayOne.add(Calendar.YEAR, -1);\n            // getActualMaximum() important for leap years\n            extraDays += dayOne.getActualMaximum(Calendar.DAY_OF_YEAR);\n        }\n\n        return extraDays - dayTwo.get(Calendar.DAY_OF_YEAR) + dayOneOriginalYearDays ;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2649218,"reputation":5684,"user_id":2291327,"display_name":"Dayong"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1429746034,"creation_date":1429746034,"answer_id":29810917,"question_id":20165564,"body_markdown":"    // date format, it will be like &quot;2015-01-01&quot;\r\n    private static final String DATE_FORMAT = &quot;yyyy-MM-dd&quot;;\r\n\r\n\t// convert a string to java.util.Date\r\n    public static Date convertStringToJavaDate(String date)\r\n\t\t\tthrows ParseException {\r\n\t\tDateFormat dataFormat = new SimpleDateFormat(DATE_FORMAT);\r\n\t\treturn dataFormat.parse(date);\r\n\t}\r\n\r\n    // plus days to a date\r\n\tpublic static Date plusJavaDays(Date date, int days) {\r\n\t\t// convert to jata-time\r\n\t\tDateTime fromDate = new DateTime(date);\r\n\t\tDateTime toDate = fromDate.plusDays(days);\r\n\t\t// convert back to java.util.Date\r\n\t\treturn toDate.toDate();\r\n\t}\r\n\r\n    // return a list of dates between the fromDate and toDate\r\n\tpublic static List&lt;Date&gt; getDatesBetween(Date fromDate, Date toDate) {\r\n\t\tList&lt;Date&gt; dates = new ArrayList&lt;Date&gt;(0);\r\n\t\tDate date = fromDate;\r\n\t\twhile (date.before(toDate) || date.equals(toDate)) {\r\n\t\t\tdates.add(date);\r\n\t\t\tdate = plusJavaDays(date, 1);\r\n\t\t}\r\n\t\treturn dates;\r\n\t}","title":"Calculating days between two dates with Java","body":"<pre><code>// date format, it will be like \"2015-01-01\"\nprivate static final String DATE_FORMAT = \"yyyy-MM-dd\";\n\n// convert a string to java.util.Date\npublic static Date convertStringToJavaDate(String date)\n        throws ParseException {\n    DateFormat dataFormat = new SimpleDateFormat(DATE_FORMAT);\n    return dataFormat.parse(date);\n}\n\n// plus days to a date\npublic static Date plusJavaDays(Date date, int days) {\n    // convert to jata-time\n    DateTime fromDate = new DateTime(date);\n    DateTime toDate = fromDate.plusDays(days);\n    // convert back to java.util.Date\n    return toDate.toDate();\n}\n\n// return a list of dates between the fromDate and toDate\npublic static List&lt;Date&gt; getDatesBetween(Date fromDate, Date toDate) {\n    List&lt;Date&gt; dates = new ArrayList&lt;Date&gt;(0);\n    Date date = fromDate;\n    while (date.before(toDate) || date.equals(toDate)) {\n        dates.add(date);\n        date = plusJavaDays(date, 1);\n    }\n    return dates;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6286237,"reputation":261,"user_id":4885359,"accept_rate":44,"display_name":"woahguy"},"score":5,"creation_date":1459235287,"post_id":29812532,"comment_id":60181659,"body_markdown":"Excellent example. This automatically accounts for leap year. If you checked 1991 and 1992 (leap year) it calculates correctly. Perfect!","body":"Excellent example. This automatically accounts for leap year. If you checked 1991 and 1992 (leap year) it calculates correctly. Perfect!"},{"owner":{"account_id":277150,"reputation":3544,"user_id":570953,"accept_rate":73,"display_name":"Pehmolelu"},"score":0,"creation_date":1504009575,"post_id":29812532,"comment_id":78836050,"body_markdown":"This should be the current accepted answer. Standard library use and accounts for leap years and daylight savings wont be a problem.","body":"This should be the current accepted answer. Standard library use and accounts for leap years and daylight savings wont be a problem."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":3,"creation_date":1525018705,"post_id":29812532,"comment_id":87193390,"body_markdown":"This is the current/modern answer (the others are outdated). It also accounts for summer time (DST). To use on Java 6 or 7, get [ThreeTen Backport](http://www.threeten.org/threetenbp/). On not-new Android [ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP).","body":"This is the current/modern answer (the others are outdated). It also accounts for summer time (DST). To use on Java 6 or 7, get <a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\">ThreeTen Backport</a>. On not-new Android <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">ThreeTenABP</a>."},{"owner":{"account_id":1485636,"reputation":634,"user_id":1414725,"accept_rate":52,"display_name":"Alex"},"score":0,"creation_date":1572018366,"post_id":29812532,"comment_id":103442469,"body_markdown":"it doesn&#39;t take into account daylight saving time","body":"it doesn&#39;t take into account daylight saving time"}],"tags":[],"owner":{"account_id":313216,"reputation":44997,"user_id":627727,"accept_rate":84,"display_name":"mkobit"},"comment_count":4,"down_vote_count":0,"up_vote_count":107,"is_accepted":false,"score":107,"last_activity_date":1510314643,"creation_date":1429755986,"answer_id":29812532,"question_id":20165564,"body_markdown":"In Java 8, you could accomplish this by using `LocalDate` and `DateTimeFormatter `. From the [Javadoc][1] of `LocalDate`:\r\n\r\n&gt; LocalDate is an immutable date-time object that represents a date,\r\n&gt; often viewed as year-month-day.\r\n\r\nAnd the pattern can be constructed using `DateTimeFormatter`. Here is the [Javadoc][2], and the relevant pattern characters I used:\r\n\r\n&gt;   **Symbol** - Meaning - *Presentation* - Examples\r\n&gt;\r\n&gt;    **y** - year-of-era - *year* - 2004; 04\r\n&gt;\r\n&gt;    **M/L** - month-of-year - *number/text* - 7; 07; Jul;\r\n&gt; July; J\r\n&gt;\r\n&gt;    **d** - day-of-month - *number* - 10\r\n\r\nHere is the example:\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    import java.time.LocalDate;\r\n    import java.time.format.DateTimeFormatter;\r\n    import java.time.temporal.ChronoUnit;\r\n\r\n    public class Java8DateExample {\r\n        public static void main(String[] args) throws IOException {\r\n            final DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;dd MM yyyy&quot;);\r\n            final BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));\r\n            final String firstInput = reader.readLine();\r\n            final String secondInput = reader.readLine();\r\n            final LocalDate firstDate = LocalDate.parse(firstInput, formatter);\r\n            final LocalDate secondDate = LocalDate.parse(secondInput, formatter);\r\n            final long days = ChronoUnit.DAYS.between(firstDate, secondDate);\r\n            System.out.println(&quot;Days between: &quot; + days);\r\n        }\r\n    }\r\n\r\nExample input/output with more recent last:\r\n\r\n    23 01 1997\r\n    27 04 1997\r\n    Days between: 94\r\n\r\nWith more recent first:\r\n\r\n    27 04 1997\r\n    23 01 1997\r\n    Days between: -94\r\n\r\nWell, you could do it as a method in a simpler way:\r\n\r\n    public static long betweenDates(Date firstDate, Date secondDate) throws IOException\r\n    {\r\n        return ChronoUnit.DAYS.between(firstDate.toInstant(), secondDate.toInstant());\r\n    }\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html\r\n\r\n","title":"Calculating days between two dates with Java","body":"<p>In Java 8, you could accomplish this by using <code>LocalDate</code> and <code>DateTimeFormatter</code>. From the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html\" rel=\"noreferrer\">Javadoc</a> of <code>LocalDate</code>:</p>\n\n<blockquote>\n  <p>LocalDate is an immutable date-time object that represents a date,\n  often viewed as year-month-day.</p>\n</blockquote>\n\n<p>And the pattern can be constructed using <code>DateTimeFormatter</code>. Here is the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html\" rel=\"noreferrer\">Javadoc</a>, and the relevant pattern characters I used:</p>\n\n<blockquote>\n  <p><strong>Symbol</strong> - Meaning - <em>Presentation</em> - Examples</p>\n  \n  <p><strong>y</strong> - year-of-era - <em>year</em> - 2004; 04</p>\n  \n  <p><strong>M/L</strong> - month-of-year - <em>number/text</em> - 7; 07; Jul;\n  July; J</p>\n  \n  <p><strong>d</strong> - day-of-month - <em>number</em> - 10</p>\n</blockquote>\n\n<p>Here is the example:</p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\nimport java.time.temporal.ChronoUnit;\n\npublic class Java8DateExample {\n    public static void main(String[] args) throws IOException {\n        final DateTimeFormatter formatter = DateTimeFormatter.ofPattern(\"dd MM yyyy\");\n        final BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));\n        final String firstInput = reader.readLine();\n        final String secondInput = reader.readLine();\n        final LocalDate firstDate = LocalDate.parse(firstInput, formatter);\n        final LocalDate secondDate = LocalDate.parse(secondInput, formatter);\n        final long days = ChronoUnit.DAYS.between(firstDate, secondDate);\n        System.out.println(\"Days between: \" + days);\n    }\n}\n</code></pre>\n\n<p>Example input/output with more recent last:</p>\n\n<pre><code>23 01 1997\n27 04 1997\nDays between: 94\n</code></pre>\n\n<p>With more recent first:</p>\n\n<pre><code>27 04 1997\n23 01 1997\nDays between: -94\n</code></pre>\n\n<p>Well, you could do it as a method in a simpler way:</p>\n\n<pre><code>public static long betweenDates(Date firstDate, Date secondDate) throws IOException\n{\n    return ChronoUnit.DAYS.between(firstDate.toInstant(), secondDate.toInstant());\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3359942,"reputation":4710,"user_id":2821954,"display_name":"Andrew T."},"score":8,"creation_date":1431417175,"post_id":30184795,"comment_id":48475008,"body_markdown":"Well, basically this is the same as [current best answer](http://stackoverflow.com/a/20165708/2821954), though this answer provides it as a function.","body":"Well, basically this is the same as <a href=\"http://stackoverflow.com/a/20165708/2821954\">current best answer</a>, though this answer provides it as a function."},{"owner":{"account_id":2410929,"reputation":3146,"user_id":2105993,"accept_rate":42,"display_name":"ReDetection"},"score":18,"creation_date":1438934201,"post_id":30184795,"comment_id":51662966,"body_markdown":"Note, that this count only when time interval between two dates are larger than 24 hours (pretty obvious from the code), thus `getDifferenceDays(11PM, 4 AM nextday) == 0`","body":"Note, that this count only when time interval between two dates are larger than 24 hours (pretty obvious from the code), thus <code>getDifferenceDays(11PM, 4 AM nextday) == 0</code>"},{"owner":{"account_id":1091556,"reputation":1285,"user_id":1086107,"accept_rate":65,"display_name":"karvoynistas"},"score":1,"creation_date":1477663081,"post_id":30184795,"comment_id":67870534,"body_markdown":"this implementation takes the last day as today. For instance, if I run the program with d1 = today, and d2 = yesterday , returns 0 days..","body":"this implementation takes the last day as today. For instance, if I run the program with d1 = today, and d2 = yesterday , returns 0 days.."},{"owner":{"account_id":2035096,"reputation":1987,"user_id":1817617,"accept_rate":60,"display_name":"Sumon Bappi"},"score":0,"creation_date":1493073101,"post_id":30184795,"comment_id":74247687,"body_markdown":"I added (1) for current day.","body":"I added (1) for current day."},{"owner":{"account_id":205095,"reputation":20055,"user_id":453673,"accept_rate":91,"display_name":"Nav"},"score":0,"creation_date":1495638162,"post_id":30184795,"comment_id":75340715,"body_markdown":"There seems to be a bug in the Java util Date library. I used `Date d1 = new Date(2016,05,31,00,00,00);Date d2 = new Date(2016,06,1,00,00,00);` and both `d2.getTime()` and `d1.getTime()` returned `61425455400000`.","body":"There seems to be a bug in the Java util Date library. I used <code>Date d1 = new Date(2016,05,31,00,00,00);Date d2 = new Date(2016,06,1,00,00,00);</code> and both <code>d2.getTime()</code> and <code>d1.getTime()</code> returned <code>61425455400000</code>."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1503570667,"post_id":30184795,"comment_id":78676228,"body_markdown":"@Nav that&#39;s because there are 30 days in June.","body":"@Nav that&#39;s because there are 30 days in June."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":3,"creation_date":1503570698,"post_id":30184795,"comment_id":78676246,"body_markdown":"This answer is incorrect.  It doesn&#39;t deal with daylight savings time correctly.  Don&#39;t use it if you want correct results.","body":"This answer is incorrect.  It doesn&#39;t deal with daylight savings time correctly.  Don&#39;t use it if you want correct results."}],"tags":[],"owner":{"account_id":6293506,"reputation":1483,"user_id":4890352,"display_name":"bart"},"comment_count":7,"down_vote_count":4,"up_vote_count":149,"is_accepted":false,"score":145,"last_activity_date":1431416923,"creation_date":1431416923,"answer_id":30184795,"question_id":20165564,"body_markdown":"Simplest way: \r\n\r\n\tpublic static long getDifferenceDays(Date d1, Date d2) {\r\n\t\tlong diff = d2.getTime() - d1.getTime();\r\n\t\treturn TimeUnit.DAYS.convert(diff, TimeUnit.MILLISECONDS);\r\n\t}\r\n","title":"Calculating days between two dates with Java","body":"<p>Simplest way: </p>\n\n<pre><code>public static long getDifferenceDays(Date d1, Date d2) {\n    long diff = d2.getTime() - d1.getTime();\n    return TimeUnit.DAYS.convert(diff, TimeUnit.MILLISECONDS);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":134693,"reputation":11106,"user_id":2624806,"accept_rate":32,"display_name":"CoDe"},"score":0,"creation_date":1509618002,"post_id":32752481,"comment_id":81093580,"body_markdown":"what is possibility of throwing exception ?","body":"what is possibility of throwing exception ?"},{"owner":{"account_id":1071023,"reputation":143,"user_id":1070304,"display_name":"sfdurbano"},"score":2,"creation_date":1583933790,"post_id":32752481,"comment_id":107278572,"body_markdown":"Note that this does not work in leap years. For example, from &quot;02/15/2020&quot; to &quot;04/02/2020&quot; is 47 days. This logic will come up with 46.","body":"Note that this does not work in leap years. For example, from &quot;02/15/2020&quot; to &quot;04/02/2020&quot; is 47 days. This logic will come up with 46."}],"tags":[],"owner":{"account_id":5459191,"reputation":486,"user_id":4341801,"display_name":"SoVinceble"},"comment_count":2,"down_vote_count":1,"up_vote_count":25,"is_accepted":false,"score":24,"last_activity_date":1510314733,"creation_date":1443062456,"answer_id":32752481,"question_id":20165564,"body_markdown":"The best way, and it converts to a String as bonus ;)\r\n\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        try {\r\n            //Dates to compare\r\n            String CurrentDate=  &quot;09/24/2015&quot;;\r\n            String FinalDate=  &quot;09/26/2015&quot;;\r\n\r\n            Date date1;\r\n            Date date2;\r\n\r\n            SimpleDateFormat dates = new SimpleDateFormat(&quot;MM/dd/yyyy&quot;);\r\n\r\n            //Setting dates\r\n            date1 = dates.parse(CurrentDate);\r\n            date2 = dates.parse(FinalDate);\r\n\r\n            //Comparing dates\r\n            long difference = Math.abs(date1.getTime() - date2.getTime());\r\n            long differenceDates = difference / (24 * 60 * 60 * 1000);\r\n\r\n            //Convert long to String\r\n            String dayDifference = Long.toString(differenceDates);\r\n\r\n            Log.e(&quot;HERE&quot;,&quot;HERE: &quot; + dayDifference);\r\n        }\r\n        catch (Exception exception) {\r\n            Log.e(&quot;DIDN&#39;T WORK&quot;, &quot;exception &quot; + exception);\r\n        }\r\n    }\r\n\r\n","title":"Calculating days between two dates with Java","body":"<p>The best way, and it converts to a String as bonus ;)</p>\n\n<pre><code>protected void onCreate(Bundle savedInstanceState) {\n\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n    try {\n        //Dates to compare\n        String CurrentDate=  \"09/24/2015\";\n        String FinalDate=  \"09/26/2015\";\n\n        Date date1;\n        Date date2;\n\n        SimpleDateFormat dates = new SimpleDateFormat(\"MM/dd/yyyy\");\n\n        //Setting dates\n        date1 = dates.parse(CurrentDate);\n        date2 = dates.parse(FinalDate);\n\n        //Comparing dates\n        long difference = Math.abs(date1.getTime() - date2.getTime());\n        long differenceDates = difference / (24 * 60 * 60 * 1000);\n\n        //Convert long to String\n        String dayDifference = Long.toString(differenceDates);\n\n        Log.e(\"HERE\",\"HERE: \" + dayDifference);\n    }\n    catch (Exception exception) {\n        Log.e(\"DIDN'T WORK\", \"exception \" + exception);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":4,"creation_date":1585338983,"post_id":60892791,"comment_id":107734669,"body_markdown":"Thanks for wanting to contribute. I believe that this good suggestion was already presented in the answer by mkobit.","body":"Thanks for wanting to contribute. I believe that this good suggestion was already presented in the answer by mkobit."},{"owner":{"account_id":1763012,"reputation":1801,"user_id":1609570,"accept_rate":90,"display_name":"Arjun Sunil Kumar"},"score":0,"creation_date":1618084352,"post_id":60892791,"comment_id":118497162,"body_markdown":"Came here while solving: https://leetcode.com/problems/number-of-days-between-two-dates","body":"Came here while solving: <a href=\"https://leetcode.com/problems/number-of-days-between-two-dates\" rel=\"nofollow noreferrer\">leetcode.com/problems/number-of-days-between-two-dates</a>"}],"tags":[],"owner":{"account_id":7125072,"reputation":41,"user_id":5448259,"display_name":"Abhijeet Upadhyay"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1585336735,"creation_date":1585336735,"answer_id":60892791,"question_id":20165564,"body_markdown":"&gt;We can make use of LocalDate and ChronoUnit java library, Below code is working fine.\r\n&gt;Date should be in format yyyy-MM-dd.\r\n```\r\nimport java.time.LocalDate;\r\nimport java.time.temporal.ChronoUnit;\r\nimport java.util.*;\r\nclass Solution {\r\n    public int daysBetweenDates(String date1, String date2) {\r\n        LocalDate dt1 = LocalDate.parse(date1);\r\n        LocalDate dt2= LocalDate.parse(date2);\r\n\r\n        long diffDays = ChronoUnit.DAYS.between(dt1, dt2);\r\n\r\n        return Math.abs((int)diffDays);\r\n    }\r\n}\r\n```","title":"Calculating days between two dates with Java","body":"<blockquote>\n  <p>We can make use of LocalDate and ChronoUnit java library, Below code is working fine.\n  Date should be in format yyyy-MM-dd.</p>\n</blockquote>\n\n<pre><code>import java.time.LocalDate;\nimport java.time.temporal.ChronoUnit;\nimport java.util.*;\nclass Solution {\n    public int daysBetweenDates(String date1, String date2) {\n        LocalDate dt1 = LocalDate.parse(date1);\n        LocalDate dt2= LocalDate.parse(date2);\n\n        long diffDays = ChronoUnit.DAYS.between(dt1, dt2);\n\n        return Math.abs((int)diffDays);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1820446,"reputation":3830,"user_id":1654631,"accept_rate":0,"display_name":"Shiv Buyya"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1619159005,"creation_date":1619159005,"answer_id":67224911,"question_id":20165564,"body_markdown":"    public class TestCode {\r\n    \r\n    \tpublic static void main(String[] args) {\t\t\r\n    \t\tString date1 = &quot;23-04-2021&quot;;\r\n    \t\tString date2 = &quot;24-05-2021&quot;;\r\n    \t\tSystem.out.println(&quot;NDays: &quot; + nDays_Between_Dates(date1, date2));\t\t\r\n    \t}\r\n    \t\r\n    \tpublic static int nDays_Between_Dates(String date1, String date2) {\r\n    \t\tint diffDays = 0;\r\n    \t\ttry {\r\n    \t\t\tSimpleDateFormat dates = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;);\r\n    \t\t\tDate startDate = dates.parse(date1);\r\n    \t\t\tDate endDate = dates.parse(date2);\r\n    \t\t\tlong diff = endDate.getTime() - startDate.getTime();\r\n    \t\t\tdiffDays = (int) (diff / (24 * 60 * 60 * 1000));\t\t\t\r\n    \t\t} catch (ParseException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t\treturn Math.abs(diffDays);\r\n    \t}\r\n    }\r\n\r\n**Output: NDays: 31**\r\n\r\n","title":"Calculating days between two dates with Java","body":"<pre><code>public class TestCode {\n\n    public static void main(String[] args) {        \n        String date1 = &quot;23-04-2021&quot;;\n        String date2 = &quot;24-05-2021&quot;;\n        System.out.println(&quot;NDays: &quot; + nDays_Between_Dates(date1, date2));      \n    }\n    \n    public static int nDays_Between_Dates(String date1, String date2) {\n        int diffDays = 0;\n        try {\n            SimpleDateFormat dates = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;);\n            Date startDate = dates.parse(date1);\n            Date endDate = dates.parse(date2);\n            long diff = endDate.getTime() - startDate.getTime();\n            diffDays = (int) (diff / (24 * 60 * 60 * 1000));            \n        } catch (ParseException e) {\n            e.printStackTrace();\n        }\n        return Math.abs(diffDays);\n    }\n}\n</code></pre>\n<p><strong>Output: NDays: 31</strong></p>\n"},{"tags":[],"owner":{"account_id":10146514,"reputation":518,"user_id":7494517,"display_name":"YMG"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1699447420,"creation_date":1624821430,"answer_id":68154555,"question_id":20165564,"body_markdown":"If you want to get just days(no times), then you can use ChronoUnit\r\n\r\n    ChronoUnit.DAYS.between(date1.toLocalDate(), date2.toLocalDate());","title":"Calculating days between two dates with Java","body":"<p>If you want to get just days(no times), then you can use ChronoUnit</p>\n<pre><code>ChronoUnit.DAYS.between(date1.toLocalDate(), date2.toLocalDate());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5500955,"reputation":876,"user_id":10783374,"display_name":"Edor Linus"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1626432110,"creation_date":1626432110,"answer_id":68407667,"question_id":20165564,"body_markdown":"The following works perfectly well for me:\r\n\r\n    public int daysBetween(LocalDate later, LocalDate before) {\r\n    \t\tSimpleDateFormat myFormat = new SimpleDateFormat(&quot;dd MM yyyy&quot;);\r\n    \t\tint daysBetween = 0;\r\n    \t\ttry {\r\n    \t\t\tDate dateBefore = myFormat.parse(localDateToString(before));\r\n    \t\t\tDate dateAfter = myFormat.parse(localDateToString(later));\r\n    \t\t\tlong difference = dateAfter.getTime() - dateBefore.getTime();\r\n    \t\t\tdaysBetween = (int) (difference / (1000 * 60 * 60 * 24));\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t\treturn daysBetween;\r\n    \t}\r\n    \r\n    \tpublic String localDateToString(LocalDate date) {\r\n    \t\tDateTimeFormatter myFormat = DateTimeFormatter.ofPattern(&quot;dd MM yyyy&quot;);\r\n    \t\treturn date.format(myFormat).toString();\r\n    \t}","title":"Calculating days between two dates with Java","body":"<p>The following works perfectly well for me:</p>\n<pre><code>public int daysBetween(LocalDate later, LocalDate before) {\n        SimpleDateFormat myFormat = new SimpleDateFormat(&quot;dd MM yyyy&quot;);\n        int daysBetween = 0;\n        try {\n            Date dateBefore = myFormat.parse(localDateToString(before));\n            Date dateAfter = myFormat.parse(localDateToString(later));\n            long difference = dateAfter.getTime() - dateBefore.getTime();\n            daysBetween = (int) (difference / (1000 * 60 * 60 * 24));\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return daysBetween;\n    }\n\n    public String localDateToString(LocalDate date) {\n        DateTimeFormatter myFormat = DateTimeFormatter.ofPattern(&quot;dd MM yyyy&quot;);\n        return date.format(myFormat).toString();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16210155,"reputation":179,"user_id":14160951,"display_name":"Hridoy Krisna Das"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1671905477,"creation_date":1646220456,"answer_id":71321893,"question_id":20165564,"body_markdown":"\r\n    public static String dateCalculation(String getTime, String dependTime) {\r\n        //Time A is getTime that need to calculate.\r\n        //Time B is static time that Time A depend on B Time and calculate the result.\r\n\r\n        Date date = new Date();\r\n        final SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyy-MM-dd H:mm:ss&quot;);\r\n        Date dateObj = null;\r\n        Date checkDate = null;\r\n\r\n        try {\r\n            dateObj = sdf.parse(getTime);\r\n        } catch (ParseException e) {\r\n            e.printStackTrace();\r\n            return &quot;0&quot;;\r\n        }\r\n        SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;HH:mm:ss&quot;);\r\n\r\n        String checkInDate = dateFormat.format(dateObj).toString();\r\n        Date defaultTime = null;\r\n        try {\r\n            defaultTime = dateFormat.parse(dependTime);\r\n            checkDate = dateFormat.parse(checkInDate);\r\n        } catch (ParseException e) {\r\n            e.printStackTrace();\r\n            return &quot;0&quot;;\r\n        }\r\n\r\n        try {\r\n            if (dateFormat.parse(dateFormat.format(date)).after(defaultTime)) {\r\n                long diff = checkDate.getTime() - defaultTime.getTime();\r\n                Log.e(&quot;Difference&quot;, &quot;onBindViewHolder: Difference: &quot; + dateObj + &quot; : &quot; + defaultTime + &quot; : &quot; + diff);\r\n                if (diff &gt; 0) {\r\n                    long diffSeconds = diff / 1000 % 60;\r\n                    long diffMinutes = diff / (60 * 1000) % 60;\r\n                    long diffHours = diff / (60 * 60 * 1000);\r\n\r\n                    return &quot;Late: &quot; + diffHours + &quot; Hour, &quot; + diffMinutes + &quot; Minutes, &quot; + diffSeconds + &quot; Sec&quot;;\r\n                } else {\r\n                    return &quot;0&quot;;\r\n                }\r\n            }\r\n        } catch (ParseException e) {\r\n            e.printStackTrace();\r\n            return &quot;0&quot;;\r\n        }\r\n        return &quot;0&quot;;\r\n    }","title":"Calculating days between two dates with Java","body":"<pre><code>public static String dateCalculation(String getTime, String dependTime) {\n    //Time A is getTime that need to calculate.\n    //Time B is static time that Time A depend on B Time and calculate the result.\n\n    Date date = new Date();\n    final SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyy-MM-dd H:mm:ss&quot;);\n    Date dateObj = null;\n    Date checkDate = null;\n\n    try {\n        dateObj = sdf.parse(getTime);\n    } catch (ParseException e) {\n        e.printStackTrace();\n        return &quot;0&quot;;\n    }\n    SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;HH:mm:ss&quot;);\n\n    String checkInDate = dateFormat.format(dateObj).toString();\n    Date defaultTime = null;\n    try {\n        defaultTime = dateFormat.parse(dependTime);\n        checkDate = dateFormat.parse(checkInDate);\n    } catch (ParseException e) {\n        e.printStackTrace();\n        return &quot;0&quot;;\n    }\n\n    try {\n        if (dateFormat.parse(dateFormat.format(date)).after(defaultTime)) {\n            long diff = checkDate.getTime() - defaultTime.getTime();\n            Log.e(&quot;Difference&quot;, &quot;onBindViewHolder: Difference: &quot; + dateObj + &quot; : &quot; + defaultTime + &quot; : &quot; + diff);\n            if (diff &gt; 0) {\n                long diffSeconds = diff / 1000 % 60;\n                long diffMinutes = diff / (60 * 1000) % 60;\n                long diffHours = diff / (60 * 60 * 1000);\n\n                return &quot;Late: &quot; + diffHours + &quot; Hour, &quot; + diffMinutes + &quot; Minutes, &quot; + diffSeconds + &quot; Sec&quot;;\n            } else {\n                return &quot;0&quot;;\n            }\n        }\n    } catch (ParseException e) {\n        e.printStackTrace();\n        return &quot;0&quot;;\n    }\n    return &quot;0&quot;;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27773775,"reputation":11,"user_id":21203564,"display_name":"user21203564"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676290270,"creation_date":1676290184,"answer_id":75435685,"question_id":20165564,"body_markdown":"All the other answers had lots of scary things, here&#39;s my simple solution:\r\n\r\n    public int getDaysDiff(Date dateToCheck) \r\n    {\r\n        long diffMilliseconds = new Date().getTime() - dateToCheck.getTime();\r\n        double diffSeconds = diffMilliseconds / 1000;\r\n        double diffMinutes = diffSeconds / 60;\r\n        double diffHours = diffMinutes / 60;\r\n        double diffDays = diffHours / 24;\r\n    \t    \r\n        return (int) Math.round(diffDays);\r\n    }","title":"Calculating days between two dates with Java","body":"<p>All the other answers had lots of scary things, here's my simple solution:</p>\n<pre><code>public int getDaysDiff(Date dateToCheck) \n{\n    long diffMilliseconds = new Date().getTime() - dateToCheck.getTime();\n    double diffSeconds = diffMilliseconds / 1000;\n    double diffMinutes = diffSeconds / 60;\n    double diffHours = diffMinutes / 60;\n    double diffDays = diffHours / 24;\n        \n    return (int) Math.round(diffDays);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16062883,"reputation":1058,"user_id":11593292,"display_name":"Sandun Susantha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677851108,"creation_date":1677851108,"answer_id":75627863,"question_id":20165564,"body_markdown":"Use following to covert the timestamp from **sql Timestamp** values and calculate the date differances.\r\n\r\n            SimpleDateFormat dates = new SimpleDateFormat(&quot;MM/dd/yyyy&quot;);\r\n\r\n            //Setting dates\r\n        \tDate ExDate = dates.parse(dates.format(Timestamp.valueOf(ex_date)));\r\n        \tDate today = dates.parse(dates.format(new Timestamp(System.currentTimeMillis())));\r\n\r\n            //Comparing dates\r\n            long differenceDates = Math.abs(ExDate.getTime() - today.getTime()) / (24 * 60 * 60 * 1000);\r\n\r\n            //Convert long to String\r\n            String dayDifference = Long.toString(differenceDates); \r\n            System.out.println(dayDifference);","title":"Calculating days between two dates with Java","body":"<p>Use following to covert the timestamp from <strong>sql Timestamp</strong> values and calculate the date differances.</p>\n<pre><code>        SimpleDateFormat dates = new SimpleDateFormat(&quot;MM/dd/yyyy&quot;);\n\n        //Setting dates\n        Date ExDate = dates.parse(dates.format(Timestamp.valueOf(ex_date)));\n        Date today = dates.parse(dates.format(new Timestamp(System.currentTimeMillis())));\n\n        //Comparing dates\n        long differenceDates = Math.abs(ExDate.getTime() - today.getTime()) / (24 * 60 * 60 * 1000);\n\n        //Convert long to String\n        String dayDifference = Long.toString(differenceDates); \n        System.out.println(dayDifference);\n</code></pre>\n"}],"owner":{"account_id":3628545,"reputation":2145,"user_id":3025448,"display_name":"user3025448"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":759748,"favorite_count":0,"down_vote_count":1,"up_vote_count":213,"answer_count":17,"score":212,"last_activity_date":1699447420,"creation_date":1385227882,"question_id":20165564,"body_markdown":"I want a Java program that calculates days between two dates.\r\n\r\n 1. Type the first date (German notation; with whitespaces: &quot;dd mm yyyy&quot;)\r\n 2. Type the second date.\r\n 3. The program should calculates the number of days between the two dates.\r\n\r\nHow can I include leap years and summertime?\r\n\r\nMy code:\r\n\r\n    import java.util.Calendar;\r\n    import java.util.Date;\r\n    import java.util.Scanner;\r\n\r\n    public class NewDateDifference {\r\n\r\n        public static void main(String[] args) {\r\n\r\n            System.out.print(&quot;Insert first date: &quot;);\r\n            Scanner s = new Scanner(System.in);\r\n            String[] eingabe1 = new String[3];\r\n\r\n            while (s.hasNext()) {\r\n                int i = 0;\r\n                insert1[i] = s.next();\r\n                if (!s.hasNext()) {\r\n                    s.close();\r\n                    break;\r\n                }\r\n                i++;\r\n            }\r\n\r\n            System.out.print(&quot;Insert second date: &quot;);\r\n            Scanner t = new Scanner(System.in);\r\n            String[] insert2 = new String[3];\r\n\r\n            while (t.hasNext()) {\r\n                int i = 0;\r\n                insert2[i] = t.next();\r\n                if (!t.hasNext()) {\r\n                    t.close();\r\n                    break;\r\n                }\r\n                i++;\r\n            }\r\n\r\n            Calendar cal = Calendar.getInstance();\r\n\r\n            cal.set(Calendar.DAY_OF_MONTH, Integer.parseInt(insert1[0]));\r\n            cal.set(Calendar.MONTH, Integer.parseInt(insert1[1]));\r\n            cal.set(Calendar.YEAR, Integer.parseInt(insert1[2]));\r\n            Date firstDate = cal.getTime();\r\n\r\n            cal.set(Calendar.DAY_OF_MONTH, Integer.parseInt(insert2[0]));\r\n            cal.set(Calendar.MONTH, Integer.parseInt(insert2[1]));\r\n            cal.set(Calendar.YEAR, Integer.parseInt(insert2[2]));\r\n            Date secondDate = cal.getTime();\r\n\r\n\r\n            long diff = secondDate.getTime() - firstDate.getTime();\r\n\r\n            System.out.println (&quot;Days: &quot; + diff / 1000 / 60 / 60 / 24);\r\n        }\r\n    }\r\n\r\n","title":"Calculating days between two dates with Java","body":"<p>I want a Java program that calculates days between two dates.</p>\n\n<ol>\n<li>Type the first date (German notation; with whitespaces: \"dd mm yyyy\")</li>\n<li>Type the second date.</li>\n<li>The program should calculates the number of days between the two dates.</li>\n</ol>\n\n<p>How can I include leap years and summertime?</p>\n\n<p>My code:</p>\n\n<pre><code>import java.util.Calendar;\nimport java.util.Date;\nimport java.util.Scanner;\n\npublic class NewDateDifference {\n\n    public static void main(String[] args) {\n\n        System.out.print(\"Insert first date: \");\n        Scanner s = new Scanner(System.in);\n        String[] eingabe1 = new String[3];\n\n        while (s.hasNext()) {\n            int i = 0;\n            insert1[i] = s.next();\n            if (!s.hasNext()) {\n                s.close();\n                break;\n            }\n            i++;\n        }\n\n        System.out.print(\"Insert second date: \");\n        Scanner t = new Scanner(System.in);\n        String[] insert2 = new String[3];\n\n        while (t.hasNext()) {\n            int i = 0;\n            insert2[i] = t.next();\n            if (!t.hasNext()) {\n                t.close();\n                break;\n            }\n            i++;\n        }\n\n        Calendar cal = Calendar.getInstance();\n\n        cal.set(Calendar.DAY_OF_MONTH, Integer.parseInt(insert1[0]));\n        cal.set(Calendar.MONTH, Integer.parseInt(insert1[1]));\n        cal.set(Calendar.YEAR, Integer.parseInt(insert1[2]));\n        Date firstDate = cal.getTime();\n\n        cal.set(Calendar.DAY_OF_MONTH, Integer.parseInt(insert2[0]));\n        cal.set(Calendar.MONTH, Integer.parseInt(insert2[1]));\n        cal.set(Calendar.YEAR, Integer.parseInt(insert2[2]));\n        Date secondDate = cal.getTime();\n\n\n        long diff = secondDate.getTime() - firstDate.getTime();\n\n        System.out.println (\"Days: \" + diff / 1000 / 60 / 60 / 24);\n    }\n}\n</code></pre>\n"},{"tags":["java","image-processing","morphological-analysis"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1699448285,"post_id":77445597,"comment_id":136532141,"body_markdown":"Run your program under the debugger.","body":"Run your program under the debugger."}],"owner":{"account_id":17409007,"reputation":11,"user_id":12616548,"display_name":"Catalanforyouforever"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699447055,"creation_date":1699447055,"question_id":77445597,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SukRO.jpg\r\n\r\nThis is the image after first level edge detection. When I pass it through my performThinning method, it returns a completely white blank picture. \r\n\r\nThis is the  performThinning method I have been working on so far: \r\n\r\n    public static BufferedImage performThinning(BufferedImage edges, int[][] structuringElement) {\r\n        int width = edges.getWidth();\r\n        int height = edges.getHeight();\r\n    \r\n        // Create a copy of the input edges image to store the result\r\n        BufferedImage resultImage = new BufferedImage(width, height, BufferedImage.TYPE_BYTE_BINARY);\r\n    \r\n        int structuringWidth = structuringElement.length;\r\n        int structuringHeight = structuringElement[0].length;\r\n    \r\n        for (int x = 0; x &lt; width; x++) {\r\n            for (int y = 0; y &lt; height; y++) {\r\n                int hitCount = 0;\r\n                int missCount = 0;\r\n    \r\n                for (int i = 0; i &lt; structuringWidth; i++) {\r\n                    for (int j = 0; j &lt; structuringHeight; j++) {\r\n                        if (structuringElement[i][j] == 1) {\r\n                            int imageX = x + i - structuringWidth / 2;\r\n                            int imageY = y + j - structuringHeight / 2;\r\n    \r\n                            if (imageX &gt;= 0 &amp;&amp; imageX &lt; width &amp;&amp; imageY &gt;= 0 &amp;&amp; imageY &lt; height) {\r\n                                int edgePixel = edges.getRGB(imageX, imageY);\r\n                                if (edgePixel == -16777216) { // Check for black pixel\r\n                                    missCount++;\r\n                                } else if (edgePixel == -1) { // Check for white pixel\r\n                                    hitCount++;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n    \r\n                // Check for hit or miss conditions (you can adjust these conditions)\r\n                if (hitCount &gt;= 1 &amp;&amp; missCount &gt;= 1) {\r\n                    resultImage.setRGB(x, y, -16777216); // Set to black\r\n                } else {\r\n                    resultImage.setRGB(x, y, -1); // Set to white\r\n                }\r\n            }\r\n        }\r\n    \r\n        return resultImage;\r\n    }\r\n\r\n\r\n\r\nNote: this is the binary matrix I used as the structuring element for the above color image: \r\n\r\n    int[][] structuringFactor = {\r\n                {0, 1, 0},\r\n                {0, 0, 1},\r\n                {1, 1, 1}\r\n            };\r\n\r\n\r\nAnyone knows what sort of silly/basic or fundamental/conceptual mistake I am making here? ","title":"Getting a completely blank image whilst performing a hit or miss transform in the thinning process of a digital image","body":"<p><a href=\"https://i.stack.imgur.com/SukRO.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SukRO.jpg\" alt=\"enter image description here\" /></a></p>\n<p>This is the image after first level edge detection. When I pass it through my performThinning method, it returns a completely white blank picture.</p>\n<p>This is the  performThinning method I have been working on so far:</p>\n<pre><code>public static BufferedImage performThinning(BufferedImage edges, int[][] structuringElement) {\n    int width = edges.getWidth();\n    int height = edges.getHeight();\n\n    // Create a copy of the input edges image to store the result\n    BufferedImage resultImage = new BufferedImage(width, height, BufferedImage.TYPE_BYTE_BINARY);\n\n    int structuringWidth = structuringElement.length;\n    int structuringHeight = structuringElement[0].length;\n\n    for (int x = 0; x &lt; width; x++) {\n        for (int y = 0; y &lt; height; y++) {\n            int hitCount = 0;\n            int missCount = 0;\n\n            for (int i = 0; i &lt; structuringWidth; i++) {\n                for (int j = 0; j &lt; structuringHeight; j++) {\n                    if (structuringElement[i][j] == 1) {\n                        int imageX = x + i - structuringWidth / 2;\n                        int imageY = y + j - structuringHeight / 2;\n\n                        if (imageX &gt;= 0 &amp;&amp; imageX &lt; width &amp;&amp; imageY &gt;= 0 &amp;&amp; imageY &lt; height) {\n                            int edgePixel = edges.getRGB(imageX, imageY);\n                            if (edgePixel == -16777216) { // Check for black pixel\n                                missCount++;\n                            } else if (edgePixel == -1) { // Check for white pixel\n                                hitCount++;\n                            }\n                        }\n                    }\n                }\n            }\n\n            // Check for hit or miss conditions (you can adjust these conditions)\n            if (hitCount &gt;= 1 &amp;&amp; missCount &gt;= 1) {\n                resultImage.setRGB(x, y, -16777216); // Set to black\n            } else {\n                resultImage.setRGB(x, y, -1); // Set to white\n            }\n        }\n    }\n\n    return resultImage;\n}\n</code></pre>\n<p>Note: this is the binary matrix I used as the structuring element for the above color image:</p>\n<pre><code>int[][] structuringFactor = {\n            {0, 1, 0},\n            {0, 0, 1},\n            {1, 1, 1}\n        };\n</code></pre>\n<p>Anyone knows what sort of silly/basic or fundamental/conceptual mistake I am making here?</p>\n"},{"tags":["java","spring-boot","swagger","swagger-ui","openapi"],"comments":[{"owner":{"account_id":22650899,"reputation":355,"user_id":16825573,"display_name":"Lejdi Prifti"},"score":0,"creation_date":1699449288,"post_id":77445564,"comment_id":136532337,"body_markdown":"You can use these properties if you are using springdoc `springdoc.swagger-ui.packages-to-exclude=`\n    `springdoc.paths-to-exclude=`","body":"You can use these properties if you are using springdoc <code>springdoc.swagger-ui.packages-to-exclude=</code>     <code>springdoc.paths-to-exclude=</code>"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1699469069,"post_id":77445564,"comment_id":136536797,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":28637424,"reputation":1,"user_id":21927293,"display_name":"ismala"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699446736,"creation_date":1699446736,"question_id":77445564,"body_markdown":"I want to have 2 swagger ui. (SpringBoot 2.7.0/Java).\r\n\r\nTo do this i will deploy 2 instances of my application. \r\n\r\nOne of these instances should have only 1 endpoint exposed in the swagger.\r\n\r\nHow can i configure this ?\r\n\r\nI can define a variable in my application.yaml : \r\n\r\nhideEnpoints : true or false\r\n\r\nAnd then use this variable in this annotation on all endpointds, except the one in dont want to hide : \r\n\r\n`@Operation(summary = &quot;summary &quot;, operationId = &quot;operationId &quot;, hidden = hideEnpoints)`\r\n\r\nIs there a solution where i dont have to touch to the code ?","title":"How to hide endpoints on swagger ui with configuration?","body":"<p>I want to have 2 swagger ui. (SpringBoot 2.7.0/Java).</p>\n<p>To do this i will deploy 2 instances of my application.</p>\n<p>One of these instances should have only 1 endpoint exposed in the swagger.</p>\n<p>How can i configure this ?</p>\n<p>I can define a variable in my application.yaml :</p>\n<p>hideEnpoints : true or false</p>\n<p>And then use this variable in this annotation on all endpointds, except the one in dont want to hide :</p>\n<p><code>@Operation(summary = &quot;summary &quot;, operationId = &quot;operationId &quot;, hidden = hideEnpoints)</code></p>\n<p>Is there a solution where i dont have to touch to the code ?</p>\n"},{"tags":["java","spring","spring-kafka","spring-cloud-stream"],"comments":[{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":1,"creation_date":1645020498,"post_id":71143061,"comment_id":125759324,"body_markdown":"You don&#39;t &quot;send&quot; data to a supplier; it supplies data. The `StreamBridge` is the correct approach for sending arbitrary data to bindings. https://docs.spring.io/spring-cloud-stream/docs/3.2.1/reference/html/spring-cloud-stream.html#_sending_arbitrary_data_to_an_output_e_g_foreign_event_driven_sources","body":"You don&#39;t &quot;send&quot; data to a supplier; it supplies data. The <code>StreamBridge</code> is the correct approach for sending arbitrary data to bindings. <a href=\"https://docs.spring.io/spring-cloud-stream/docs/3.2.1/reference/html/spring-cloud-stream.html#_sending_arbitrary_data_to_an_output_e_g_foreign_event_driven_sources\" rel=\"nofollow noreferrer\">docs.spring.io/spring-cloud-stream/docs/3.2.1/reference/html&zwnj;&#8203;/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":2761573,"reputation":195,"user_id":2378369,"display_name":"amisiuryk"},"score":0,"creation_date":1651078334,"post_id":71150150,"comment_id":127278709,"body_markdown":"Noticed that when using _streamBridge_ the binding can be called without suffix and index, so it can be simply `affectedRecordsEvent`.","body":"Noticed that when using <i>streamBridge</i> the binding can be called without suffix and index, so it can be simply <code>affectedRecordsEvent</code>."}],"tags":[],"owner":{"account_id":7147029,"reputation":1189,"user_id":5462398,"accept_rate":0,"display_name":"zur"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1645051015,"creation_date":1645051015,"answer_id":71150150,"question_id":71143061,"body_markdown":"Following worked \r\n\r\ndeclare field\r\n\r\n      private final StreamBridge streamBridge;\r\n \r\nDeclared functions\r\n   \r\n      public void delegateRecordsEventSupplier(@NotNull final RecordsEvent alteredRecordsEvent) {\r\n        streamBridge.send(&quot;affectedRecordsEvent-out-0&quot;, alteredRecordsEvent);\r\n      }\r\n\r\nThese functions when called will place the message on the `topic`","title":"How to send message/data with Spring Cloud Streams Supplier?","body":"<p>Following worked</p>\n<p>declare field</p>\n<pre><code>  private final StreamBridge streamBridge;\n</code></pre>\n<p>Declared functions</p>\n<pre><code>  public void delegateRecordsEventSupplier(@NotNull final RecordsEvent alteredRecordsEvent) {\n    streamBridge.send(&quot;affectedRecordsEvent-out-0&quot;, alteredRecordsEvent);\n  }\n</code></pre>\n<p>These functions when called will place the message on the <code>topic</code></p>\n"}],"owner":{"account_id":7147029,"reputation":1189,"user_id":5462398,"accept_rate":0,"display_name":"zur"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2246,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1699445767,"creation_date":1645019336,"question_id":71143061,"body_markdown":"I am trying to send message on `kafka` when there is an insertion in a particular table `Record`. \r\nI consider that this part of the application will be considered a `Supplier`/`Producer`. \r\n\r\nI have following code.\r\n\r\n    @Bean\r\n    public Supplier&lt;RecordAlteredEvent&gt; affectedRecordEventEmitter() {\r\n        return (/*how do I pass the data?*/) -&gt; {\r\n                \r\n            log.info(&quot;SENDING_MESSAGE TO RECORD_EVENT_TOPIC&quot;);\r\n            return new RecordAlteredEvent();\r\n        };\r\n    }\r\n\r\nI actually want to send the data. So, I am looking for something more like following:\r\n\r\n    @Bean\r\n    public Function&lt;RecordAlteredEvent, RecordAlteredEvent&gt; alteredRecordEventEmitter() {\r\n        return (RecordAlteredEvent recordAlteredEvent) -&gt; {\r\n            log.info(SENDING_MESSAGE, VDP_USERS_EVENT_TOPIC, recordAlteredEvent.toString());\r\n            return recordAlteredEvent;\r\n        };\r\n        }\r\n\r\nIs this possible? How do I configure that ? So, for example if \r\n\r\n 1. I declare a &#39;Supplier&#39; then how do I pass data to it ? \r\n 2. And if I declare a &#39;Function&#39; it seems that the input will be received from the `topic` and forwarded. And I am not receiving the data from `topic`. I am receiving data from `REST API`/`DB`.\r\n\r\n\r\nI am not sure if the following can somehow help: But with a basic try I could not succeed. hence, an example will help a lot.\r\n    \r\n    @Autowired\r\n\tprivate StreamBridge streamBridge;\r\n\r\n    // Can following work somehow in-side a function that is, for example, in spring-boot-service  \r\n    streamBridge.send(&quot;myDestination&quot;, body);\r\n\r\n\r\nFor reference: \r\n 1. https://cloud.spring.io/spring-cloud-stream/reference/html/spring-cloud-stream.html#spring_cloud_function\r\n 2. https://tanzu.vmware.com/developer/guides/scs-gs/\r\n     - Section : Generating Loan Applications\r\n 3. https://stackoverflow.com/questions/65835964/how-can-create-a-producer-using-spring-cloud-kafka-stream-3-1\r\n","title":"How to send message/data with Spring Cloud Streams Supplier?","body":"<p>I am trying to send message on <code>kafka</code> when there is an insertion in a particular table <code>Record</code>.\nI consider that this part of the application will be considered a <code>Supplier</code>/<code>Producer</code>.</p>\n<p>I have following code.</p>\n<pre><code>@Bean\npublic Supplier&lt;RecordAlteredEvent&gt; affectedRecordEventEmitter() {\n    return (/*how do I pass the data?*/) -&gt; {\n            \n        log.info(&quot;SENDING_MESSAGE TO RECORD_EVENT_TOPIC&quot;);\n        return new RecordAlteredEvent();\n    };\n}\n</code></pre>\n<p>I actually want to send the data. So, I am looking for something more like following:</p>\n<pre><code>@Bean\npublic Function&lt;RecordAlteredEvent, RecordAlteredEvent&gt; alteredRecordEventEmitter() {\n    return (RecordAlteredEvent recordAlteredEvent) -&gt; {\n        log.info(SENDING_MESSAGE, VDP_USERS_EVENT_TOPIC, recordAlteredEvent.toString());\n        return recordAlteredEvent;\n    };\n    }\n</code></pre>\n<p>Is this possible? How do I configure that ? So, for example if</p>\n<ol>\n<li>I declare a 'Supplier' then how do I pass data to it ?</li>\n<li>And if I declare a 'Function' it seems that the input will be received from the <code>topic</code> and forwarded. And I am not receiving the data from <code>topic</code>. I am receiving data from <code>REST API</code>/<code>DB</code>.</li>\n</ol>\n<p>I am not sure if the following can somehow help: But with a basic try I could not succeed. hence, an example will help a lot.</p>\n<pre><code>@Autowired\nprivate StreamBridge streamBridge;\n\n// Can following work somehow in-side a function that is, for example, in spring-boot-service  \nstreamBridge.send(&quot;myDestination&quot;, body);\n</code></pre>\n<p>For reference:</p>\n<ol>\n<li><a href=\"https://cloud.spring.io/spring-cloud-stream/reference/html/spring-cloud-stream.html#spring_cloud_function\" rel=\"nofollow noreferrer\">https://cloud.spring.io/spring-cloud-stream/reference/html/spring-cloud-stream.html#spring_cloud_function</a></li>\n<li><a href=\"https://tanzu.vmware.com/developer/guides/scs-gs/\" rel=\"nofollow noreferrer\">https://tanzu.vmware.com/developer/guides/scs-gs/</a>\n<ul>\n<li>Section : Generating Loan Applications</li>\n</ul>\n</li>\n<li><a href=\"https://stackoverflow.com/questions/65835964/how-can-create-a-producer-using-spring-cloud-kafka-stream-3-1\">How can create a producer using Spring Cloud Kafka Stream 3.1</a></li>\n</ol>\n"},{"tags":["java","postgresql","spring-boot","azure","azure-functions"],"answers":[{"comments":[{"owner":{"account_id":16015944,"reputation":93,"user_id":11558695,"display_name":"Nandishwar Garg"},"score":0,"creation_date":1699530304,"post_id":77445451,"comment_id":136545056,"body_markdown":"Thanks for sharing this information. I tried this but it is throwing the below error: \nERROR 6440 --- [onPool-worker-3] c.a.i.implementation.IdentityClient      : ManagedIdentityCredential authentication unavailable. Connection to IMDS endpoint cannot be established.\n[2023-11-09T05:19:50.605Z] ManagedIdentityCredential authentication unavailable. Connection to IMDS endpoint cannot be established.","body":"Thanks for sharing this information. I tried this but it is throwing the below error:  ERROR 6440 --- [onPool-worker-3] c.a.i.implementation.IdentityClient      : ManagedIdentityCredential authentication unavailable. Connection to IMDS endpoint cannot be established. [2023-11-09T05:19:50.605Z] ManagedIdentityCredential authentication unavailable. Connection to IMDS endpoint cannot be established."}],"tags":[],"owner":{"account_id":3894930,"reputation":4026,"user_id":3224238,"display_name":"Paizo"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699445650,"creation_date":1699445650,"answer_id":77445451,"question_id":77438368,"body_markdown":"see https://learn.microsoft.com/en-us/azure/developer/java/spring-framework/postgresql-support\r\n\r\nyou can use `spring-cloud-azure-starter-jdbc-postgresql`\r\n\r\n    spring:\r\n      cloud:\r\n        azure:\r\n          credential:\r\n            managed-identity-enabled: true\r\n            client-id: ${AZURE_CLIENT_ID}\r\n      datasource:\r\n        url: jdbc:postgresql://${AZ_DATABASE_SERVER_NAME}.postgres.database.azure.com:5432/${AZ_DATABASE_NAME}?sslmode=require\r\n        username: ${AZ_POSTGRESQL_AD_MI_USERNAME}\r\n        azure:\r\n          passwordless-enabled: true","title":"Azure Function Spring Boot Application connection with Azure Postgresql flexible server using User Assigned Managed Identity","body":"<p>see <a href=\"https://learn.microsoft.com/en-us/azure/developer/java/spring-framework/postgresql-support\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/developer/java/spring-framework/postgresql-support</a></p>\n<p>you can use <code>spring-cloud-azure-starter-jdbc-postgresql</code></p>\n<pre><code>spring:\n  cloud:\n    azure:\n      credential:\n        managed-identity-enabled: true\n        client-id: ${AZURE_CLIENT_ID}\n  datasource:\n    url: jdbc:postgresql://${AZ_DATABASE_SERVER_NAME}.postgres.database.azure.com:5432/${AZ_DATABASE_NAME}?sslmode=require\n    username: ${AZ_POSTGRESQL_AD_MI_USERNAME}\n    azure:\n      passwordless-enabled: true\n</code></pre>\n"}],"owner":{"account_id":16015944,"reputation":93,"user_id":11558695,"display_name":"Nandishwar Garg"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699445650,"creation_date":1699361602,"question_id":77438368,"body_markdown":"I want to use User Assigned Managed Identity for connecting my Azure Function App (Spring Boot Application) to Azure PostgreSQL flexible server. I want to know what all changes I have to do in application.yaml file for the same which is mentioned below:\r\n\r\n\r\n    server:\r\n      port : 8081\r\n    \r\n    spring:\r\n      datasource:\r\n        driver-class-name: org.postgresql.Driver\r\n        url: jdbc:postgresql://${DB_SERVER_NAME}.postgres.database.azure.com:5432/${DB_NAME}?sslmode=require\r\n        username: ${DB_USER}\r\n        password: ${DB_PASSWORD}\r\n      jpa:\r\n        hibernate:\r\n          ddl-auto: update\r\n        properties:\r\n          hibernate:\r\n            dialect: org.hibernate.dialect.PostgreSQLDialect\r\n            jdbc:\r\n              lob:\r\n                non_contextual_creation: true","title":"Azure Function Spring Boot Application connection with Azure Postgresql flexible server using User Assigned Managed Identity","body":"<p>I want to use User Assigned Managed Identity for connecting my Azure Function App (Spring Boot Application) to Azure PostgreSQL flexible server. I want to know what all changes I have to do in application.yaml file for the same which is mentioned below:</p>\n<pre><code>server:\n  port : 8081\n\nspring:\n  datasource:\n    driver-class-name: org.postgresql.Driver\n    url: jdbc:postgresql://${DB_SERVER_NAME}.postgres.database.azure.com:5432/${DB_NAME}?sslmode=require\n    username: ${DB_USER}\n    password: ${DB_PASSWORD}\n  jpa:\n    hibernate:\n      ddl-auto: update\n    properties:\n      hibernate:\n        dialect: org.hibernate.dialect.PostgreSQLDialect\n        jdbc:\n          lob:\n            non_contextual_creation: true\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-boot-3"],"comments":[{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1699429398,"post_id":77443578,"comment_id":136528773,"body_markdown":"What Spring version is the project currently using? But yes, you might want to update to the latest version of 2.x before updating to 3.x in order to make the migration easier.","body":"What Spring version is the project currently using? But yes, you might want to update to the latest version of 2.x before updating to 3.x in order to make the migration easier."},{"owner":{"account_id":21659471,"reputation":197,"user_id":15978784,"display_name":"chkpnt"},"score":0,"creation_date":1699429884,"post_id":77443578,"comment_id":136528851,"body_markdown":"The dependency to the Spring Framwork is currently only transitive via Spring Boot. The latest version of Spring Boot 2.7 (2.7.17) is referring to the latest version of Spring Framework 5.3 (5.3.30).","body":"The dependency to the Spring Framwork is currently only transitive via Spring Boot. The latest version of Spring Boot 2.7 (2.7.17) is referring to the latest version of Spring Framework 5.3 (5.3.30)."},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1699430016,"post_id":77443578,"comment_id":136528874,"body_markdown":"Just add `spring.version` as a property to override the version being used, don&#39;t mess around with an additional dependency management import.","body":"Just add <code>spring.version</code> as a property to override the version being used, don&#39;t mess around with an additional dependency management import."},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1699430357,"post_id":77443578,"comment_id":136528927,"body_markdown":"What&#39;s the point of doing each of them? Spring Boot 3 isn&#39;t compatible with Spring 5 anyways. Can you share a [mcve] showing what you want to do?","body":"What&#39;s the point of doing each of them? Spring Boot 3 isn&#39;t compatible with Spring 5 anyways. Can you share a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> showing what you want to do?"},{"owner":{"account_id":21659471,"reputation":197,"user_id":15978784,"display_name":"chkpnt"},"score":0,"creation_date":1699430766,"post_id":77443578,"comment_id":136528985,"body_markdown":"The question is not about updating to Spring Boot 3 without Spring Framework 6. That is a task which has to be done in the mid term. In the short term, it&#39;s just about updating to Spring Framework 5.3.31 and further, even if it is released after the last version of Spring Boot 2.7.","body":"The question is not about updating to Spring Boot 3 without Spring Framework 6. That is a task which has to be done in the mid term. In the short term, it&#39;s just about updating to Spring Framework 5.3.31 and further, even if it is released after the last version of Spring Boot 2.7."},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1699433155,"post_id":77443578,"comment_id":136529383,"body_markdown":"That isn&#39;t possible. Spring Boot 3.x doesn&#39;t work with Spring Framework 5.x.","body":"That isn&#39;t possible. Spring Boot 3.x doesn&#39;t work with Spring Framework 5.x."},{"owner":{"account_id":21659471,"reputation":197,"user_id":15978784,"display_name":"chkpnt"},"score":0,"creation_date":1699433479,"post_id":77443578,"comment_id":136529438,"body_markdown":"I know, that&#39;s why I need to stay on Spring Boot 2.7 in the short term.","body":"I know, that&#39;s why I need to stay on Spring Boot 2.7 in the short term."}],"answers":[{"tags":[],"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1699445512,"creation_date":1699434012,"answer_id":77444103,"question_id":77443578,"body_markdown":"Spring Boot is somewhat tightly coupled with Spring Framework. Hence, you cannot use Spring Boot 3.x together with Spring Framework 5.y. Doing so will probably break some stuff and isn&#39;t supported at all.\r\n\r\nThis leaves you with 3 possibilities:\r\n\r\n### Staying at 2.x/5.y\r\n\r\nYou can continue using Spring Boot 2.7.\r\n\r\nIf you want to use newer versions of Spring Framework (future updates), you can use `&lt;spring.version&gt;` with future 5.y versions even though you are using the old Spring Boot 2.x version.\r\n\r\nWhile that would mean using an unsupported version of Spring Boot, most of what you are using is probably Spring Framework which you can update this way.  \r\nAlso, they would still publish public updates to Spring Boot in response to commercial update requests.\r\n\r\nYou might still want to start updating sooner than later so you can switch to a newer version earlier.\r\n\r\n### Migrating\r\n\r\nAt some point, you&#39;ll need to migrate anyways.\r\n\r\n- First, update to, Java 17 and the latest version of Spring Boot and the latest possible versions of your dependencies. Make sure everything compiles and your tests pass.\r\n- Then, run the migration tooling of your IDE (Spring Tools 4, tooling from IntelliJ Ultimate or [rewrite reciepts](https://docs.openrewrite.org/recipes/java/spring/boot3/upgradespringboot_3_0)) in order to migrate to Spring Boot 3 and Spring Framework 6.  \r\n- Update your dependencies (if necessary)and make sure everything compiles.\r\n  - You might need to adapt to some deprecations/removals.\r\n- Finally, make sure all tests pass and test all your changes thoroughly.\r\n\r\nEven though you say you can&#39;t update the project, you will need to do so eventually.\r\n\r\n### Switching to commercial support\r\n\r\nOf course, you could also pay for commercial support but you will still need to migrate at some point.","title":"Mitigation after Spring Boot 2.7 EOL","body":"<p>Spring Boot is somewhat tightly coupled with Spring Framework. Hence, you cannot use Spring Boot 3.x together with Spring Framework 5.y. Doing so will probably break some stuff and isn't supported at all.</p>\n<p>This leaves you with 3 possibilities:</p>\n<h3>Staying at 2.x/5.y</h3>\n<p>You can continue using Spring Boot 2.7.</p>\n<p>If you want to use newer versions of Spring Framework (future updates), you can use <code>&lt;spring.version&gt;</code> with future 5.y versions even though you are using the old Spring Boot 2.x version.</p>\n<p>While that would mean using an unsupported version of Spring Boot, most of what you are using is probably Spring Framework which you can update this way.<br />\nAlso, they would still publish public updates to Spring Boot in response to commercial update requests.</p>\n<p>You might still want to start updating sooner than later so you can switch to a newer version earlier.</p>\n<h3>Migrating</h3>\n<p>At some point, you'll need to migrate anyways.</p>\n<ul>\n<li>First, update to, Java 17 and the latest version of Spring Boot and the latest possible versions of your dependencies. Make sure everything compiles and your tests pass.</li>\n<li>Then, run the migration tooling of your IDE (Spring Tools 4, tooling from IntelliJ Ultimate or <a href=\"https://docs.openrewrite.org/recipes/java/spring/boot3/upgradespringboot_3_0\" rel=\"nofollow noreferrer\">rewrite reciepts</a>) in order to migrate to Spring Boot 3 and Spring Framework 6.</li>\n<li>Update your dependencies (if necessary)and make sure everything compiles.\n<ul>\n<li>You might need to adapt to some deprecations/removals.</li>\n</ul>\n</li>\n<li>Finally, make sure all tests pass and test all your changes thoroughly.</li>\n</ul>\n<p>Even though you say you can't update the project, you will need to do so eventually.</p>\n<h3>Switching to commercial support</h3>\n<p>Of course, you could also pay for commercial support but you will still need to migrate at some point.</p>\n"}],"owner":{"account_id":21659471,"reputation":197,"user_id":15978784,"display_name":"chkpnt"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":535,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77444103,"answer_count":1,"score":2,"last_activity_date":1699445512,"creation_date":1699428866,"question_id":77443578,"body_markdown":"I know that Spring Boot 2.7 is ending its non-commercial support at [2023-11-24][1]. The support for Spring Framework 5.3 is ending more than one year later at [2024-12-31][2].\r\n\r\nSo for a project, which can&#39;t be upgraded to Spring Boot 3.0 in the short term, is it a good practice to add a dependency to the Spring Framework BOM in addition to `org.springframework.boot:spring-boot-dependencies:2.7.x` in the meantime?\r\n\r\nThis would of course only mitigate vulnerabilities fixed in Spring Framework 5.3, `spring-boot-dependencies` has many more dependencies that would need to be updated manually.\r\n\r\n  [1]: https://spring.io/projects/spring-boot#support\r\n  [2]: https://spring.io/projects/spring-framework#support","title":"Mitigation after Spring Boot 2.7 EOL","body":"<p>I know that Spring Boot 2.7 is ending its non-commercial support at <a href=\"https://spring.io/projects/spring-boot#support\" rel=\"nofollow noreferrer\">2023-11-24</a>. The support for Spring Framework 5.3 is ending more than one year later at <a href=\"https://spring.io/projects/spring-framework#support\" rel=\"nofollow noreferrer\">2024-12-31</a>.</p>\n<p>So for a project, which can't be upgraded to Spring Boot 3.0 in the short term, is it a good practice to add a dependency to the Spring Framework BOM in addition to <code>org.springframework.boot:spring-boot-dependencies:2.7.x</code> in the meantime?</p>\n<p>This would of course only mitigate vulnerabilities fixed in Spring Framework 5.3, <code>spring-boot-dependencies</code> has many more dependencies that would need to be updated manually.</p>\n"},{"tags":["java","linux","root"],"answers":[{"tags":[],"owner":{"account_id":101451,"reputation":1567,"user_id":272929,"accept_rate":85,"display_name":"atamur"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1298638491,"creation_date":1298638491,"answer_id":5117478,"question_id":5117449,"body_markdown":"run a native command?\r\nlike whoami","title":"Check if a user is root in a java application","body":"<p>run a native command?\nlike whoami</p>\n"},{"comments":[{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":1,"creation_date":1298638963,"post_id":5117491,"comment_id":5738570,"body_markdown":"Watch out for `-Duser.name=root` you can set it to anything you want.","body":"Watch out for <code>-Duser.name=root</code> you can set it to anything you want."},{"owner":{"account_id":124364,"reputation":85329,"user_id":319403,"accept_rate":75,"display_name":"cHao"},"score":0,"creation_date":1298640971,"post_id":5117491,"comment_id":5738997,"body_markdown":"You can fudge a username any number of ways, whether you check `user.name` or parse the output of `whoami`.  If you&#39;re relying on this for access control, you&#39;re kinda screwed.","body":"You can fudge a username any number of ways, whether you check <code>user.name</code> or parse the output of <code>whoami</code>.  If you&#39;re relying on this for access control, you&#39;re kinda screwed."}],"tags":[],"owner":{"account_id":41803,"reputation":1376,"user_id":121562,"display_name":"eolith"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1298638537,"creation_date":1298638537,"answer_id":5117491,"question_id":5117449,"body_markdown":"Check this: [get login username in java][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/797549/get-login-username-in-java","title":"Check if a user is root in a java application","body":"<p>Check this: <a href=\"https://stackoverflow.com/questions/797549/get-login-username-in-java\">get login username in java</a>.</p>\n"},{"comments":[{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1298639216,"post_id":5117518,"comment_id":5738622,"body_markdown":"You can change the path so `whoami` returns what you like. `/usr/bin/whoami` may be a better choice.","body":"You can change the path so <code>whoami</code> returns what you like. <code>&#47;usr&#47;bin&#47;whoami</code> may be a better choice."},{"owner":{"account_id":124364,"reputation":85329,"user_id":319403,"accept_rate":75,"display_name":"cHao"},"score":0,"creation_date":1298639982,"post_id":5117518,"comment_id":5738795,"body_markdown":"Is the argument to `Runtime.getRuntime.exec` a program name, or a shell command?  &#39;Cause if it&#39;s a shell command, a user running the Java app from the command line could change what `/usr/bin/whoami` really means by tweaking environment variables.  IE: set $IFS to include a slash, add the current directory to $PATH, and then put a program called `usr` there.","body":"Is the argument to <code>Runtime.getRuntime.exec</code> a program name, or a shell command?  &#39;Cause if it&#39;s a shell command, a user running the Java app from the command line could change what <code>&#47;usr&#47;bin&#47;whoami</code> really means by tweaking environment variables.  IE: set $IFS to include a slash, add the current directory to $PATH, and then put a program called <code>usr</code> there."},{"owner":{"account_id":124364,"reputation":85329,"user_id":319403,"accept_rate":75,"display_name":"cHao"},"score":0,"creation_date":1298640434,"post_id":5117518,"comment_id":5738901,"body_markdown":"Either way, relying on the output of `whoami` is not really a suitable thing for security purposes.  It&#39;d be good as a convenience check in, say, an installer (so that you can show an appropriate error message rather than half-installing something), or some other program that&#39;d break anyway without root privileges.  But it can be subverted in a number of ways that make it a bad idea for relying on to *grant* access to something.","body":"Either way, relying on the output of <code>whoami</code> is not really a suitable thing for security purposes.  It&#39;d be good as a convenience check in, say, an installer (so that you can show an appropriate error message rather than half-installing something), or some other program that&#39;d break anyway without root privileges.  But it can be subverted in a number of ways that make it a bad idea for relying on to <i>grant</i> access to something."}],"tags":[],"owner":{"account_id":317323,"reputation":920,"user_id":633946,"display_name":"Nikolay Antipov"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1699445483,"creation_date":1298638713,"answer_id":5117518,"question_id":5117449,"body_markdown":"You can call\r\n\r\n      Process p = Runtime.getRuntime().exec(&quot;whoami&quot;)\r\n\r\nmethod. Then you can process *p*&#39;s stdout to read output of command.","title":"Check if a user is root in a java application","body":"<p>You can call</p>\n<pre><code>  Process p = Runtime.getRuntime().exec(&quot;whoami&quot;)\n</code></pre>\n<p>method. Then you can process <em>p</em>'s stdout to read output of command.</p>\n"},{"comments":[{"owner":{"account_id":124364,"reputation":85329,"user_id":319403,"accept_rate":75,"display_name":"cHao"},"score":0,"creation_date":1298639372,"post_id":5117568,"comment_id":5738655,"body_markdown":"On almost all Linux systems i&#39;ve seen, only the actual root user has root privileges.  The root group doesn&#39;t usually factor in to actual access, but to *potential* access; ie: someone could run a command to *get* root privileges, but they don&#39;t automatically *have* them.","body":"On almost all Linux systems i&#39;ve seen, only the actual root user has root privileges.  The root group doesn&#39;t usually factor in to actual access, but to <i>potential</i> access; ie: someone could run a command to <i>get</i> root privileges, but they don&#39;t automatically <i>have</i> them."}],"tags":[],"owner":{"account_id":61147,"reputation":2846,"user_id":182393,"accept_rate":85,"display_name":"Koziołek"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1298639054,"creation_date":1298639054,"answer_id":5117568,"question_id":5117449,"body_markdown":"The best way is to run \r\n\r\n     Process p = Runtime.getRuntime.exec(&quot;groups `whoaim`&quot;); \r\n\r\nand try to parse string to get group call root. Your JVM process could be run by user not call root but i.e. moderator but this user could be in root group and you have root privileges.","title":"Check if a user is root in a java application","body":"<p>The best way is to run </p>\n\n<pre><code> Process p = Runtime.getRuntime.exec(\"groups `whoaim`\"); \n</code></pre>\n\n<p>and try to parse string to get group call root. Your JVM process could be run by user not call root but i.e. moderator but this user could be in root group and you have root privileges.</p>\n"},{"comments":[{"owner":{"account_id":124364,"reputation":85329,"user_id":319403,"accept_rate":75,"display_name":"cHao"},"score":1,"creation_date":1298641424,"post_id":5117781,"comment_id":5739069,"body_markdown":"Changing root&#39;s username is possible, but breaks a bunch of stuff that has the name `root` hard-coded into it.  Notable among that stuff is `su` -- which, if run without a username, is the same as `su root`, and complains that the user &quot;root&quot; doesn&#39;t exist.  I tried this once, and soon changed the username back.  :)","body":"Changing root&#39;s username is possible, but breaks a bunch of stuff that has the name <code>root</code> hard-coded into it.  Notable among that stuff is <code>su</code> -- which, if run without a username, is the same as <code>su root</code>, and complains that the user &quot;root&quot; doesn&#39;t exist.  I tried this once, and soon changed the username back.  :)"},{"owner":{"account_id":67096,"reputation":24787,"user_id":196507,"accept_rate":90,"display_name":"lepe"},"score":0,"creation_date":1592132568,"post_id":5117781,"comment_id":110309264,"body_markdown":"Groovy : `def isRoot = &quot;id -u&quot;.execute().text.trim() == &quot;0&quot;`","body":"Groovy : <code>def isRoot = &quot;id -u&quot;.execute().text.trim() == &quot;0&quot;</code>"}],"tags":[],"owner":{"account_id":57838,"reputation":5387,"user_id":173277,"display_name":"nickgrim"},"comment_count":2,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1447372336,"creation_date":1298640388,"answer_id":5117781,"question_id":5117449,"body_markdown":"    Process p = Runtime.getRuntime().exec(&quot;id -u&quot;)\r\n\r\nKeep in mind that the &quot;root&quot; user on a system may not be called `root` (although it&#39;s rare to change it), and it&#39;s also possible to alias it to another username. If the current user is root-like, the output will be `0`.","title":"Check if a user is root in a java application","body":"<pre><code>Process p = Runtime.getRuntime().exec(\"id -u\")\n</code></pre>\n\n<p>Keep in mind that the \"root\" user on a system may not be called <code>root</code> (although it's rare to change it), and it's also possible to alias it to another username. If the current user is root-like, the output will be <code>0</code>.</p>\n"},{"comments":[{"owner":{"account_id":2314766,"reputation":13150,"user_id":2032064,"accept_rate":100,"display_name":"Mifeet"},"score":0,"creation_date":1440148826,"post_id":18820673,"comment_id":52163641,"body_markdown":"This may not be secure, as pointed out [in another SO answer](http://stackoverflow.com/a/2290392/2032064)","body":"This may not be secure, as pointed out <a href=\"http://stackoverflow.com/a/2290392/2032064\">in another SO answer</a>"},{"owner":{"account_id":1136969,"reputation":13811,"user_id":1121841,"accept_rate":45,"display_name":"Abel Callejo"},"score":0,"creation_date":1440150649,"post_id":18820673,"comment_id":52164802,"body_markdown":"@Mifeet I agree. This can be fooled. But if the developer knows the intended users and the intended software environment, this can be a handy solution.","body":"@Mifeet I agree. This can be fooled. But if the developer knows the intended users and the intended software environment, this can be a handy solution."}],"tags":[],"owner":{"account_id":1136969,"reputation":13811,"user_id":1121841,"accept_rate":45,"display_name":"Abel Callejo"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1379307735,"creation_date":1379307735,"answer_id":18820673,"question_id":5117449,"body_markdown":"Easy. Just use\r\n\r\n    System.getProperty(&quot;user.name&quot;)","title":"Check if a user is root in a java application","body":"<p>Easy. Just use</p>\n\n<pre><code>System.getProperty(\"user.name\")\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2847466,"reputation":31,"user_id":2445459,"accept_rate":0,"display_name":"Oleg"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1461746743,"creation_date":1461746743,"answer_id":36884695,"question_id":5117449,"body_markdown":"    String userName = System.getProperty(&quot;user.name&quot;);\r\n\tProcess p = Runtime.getRuntime().exec(&quot;groups &quot; + userName);\r\n\tString output = read(p.getInputStream());\r\n\tString error = read(p.getErrorStream());\r\n\r\nAnd here is a read function:\r\n\r\n    public static String read(InputStream input) throws IOException {\r\n        try (BufferedReader buffer = new BufferedReader(new InputStreamReader(input))) {\r\n            return buffer.lines().collect(Collectors.joining(&quot;\\n&quot;));\r\n        }\r\n    }\r\nJust &quot;another&quot; modified solution.","title":"Check if a user is root in a java application","body":"<pre><code>String userName = System.getProperty(\"user.name\");\nProcess p = Runtime.getRuntime().exec(\"groups \" + userName);\nString output = read(p.getInputStream());\nString error = read(p.getErrorStream());\n</code></pre>\n\n<p>And here is a read function:</p>\n\n<pre><code>public static String read(InputStream input) throws IOException {\n    try (BufferedReader buffer = new BufferedReader(new InputStreamReader(input))) {\n        return buffer.lines().collect(Collectors.joining(\"\\n\"));\n    }\n}\n</code></pre>\n\n<p>Just \"another\" modified solution.</p>\n"},{"tags":[],"owner":{"account_id":23842,"reputation":2431,"user_id":60114,"accept_rate":100,"display_name":"Boris Daich"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626094880,"creation_date":1626094880,"answer_id":68347820,"question_id":5117449,"body_markdown":"Here is a complete Utility class with a working method\r\n\r\n\r\n\r\n\r\n\r\n    import org.apache.logging.log4j.LogManager;\r\n    import org.apache.logging.log4j.Logger;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    import java.io.StringWriter;\r\n\r\n\r\n    public interface U {\r\n\r\n\tpublic static final Logger l = LogManager.getLogger(U.class.getName());\r\n\r\n     public static boolean isRoot() {\r\n\t\ttry {\r\n\t\t\tProcess p = Runtime.getRuntime().exec(&quot;id -u&quot;);\r\n\t\t\tStringWriter sw = new StringWriter();\r\n\t\t\tInputStreamReader isw = new InputStreamReader(p.getInputStream());\r\n\t\t\tisw.transferTo(sw);\r\n\t\t\tString output = sw.toString();\r\n\t\t\tl.trace(&quot;id -u output = [{}]&quot;, output);\r\n\t\t\treturn output.startsWith(&quot;0&quot;);\r\n\t\t} catch (IOException e) {\r\n\t\t\tl.error(&quot;&quot;, e);\r\n\t\t}\r\n\t\treturn false;\r\n\t }\r\n    }\r\n","title":"Check if a user is root in a java application","body":"<p>Here is a complete Utility class with a working method</p>\n<pre><code>import org.apache.logging.log4j.LogManager;\nimport org.apache.logging.log4j.Logger;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.StringWriter;\n\n\npublic interface U {\n\npublic static final Logger l = LogManager.getLogger(U.class.getName());\n\n public static boolean isRoot() {\n    try {\n        Process p = Runtime.getRuntime().exec(&quot;id -u&quot;);\n        StringWriter sw = new StringWriter();\n        InputStreamReader isw = new InputStreamReader(p.getInputStream());\n        isw.transferTo(sw);\n        String output = sw.toString();\n        l.trace(&quot;id -u output = [{}]&quot;, output);\n        return output.startsWith(&quot;0&quot;);\n    } catch (IOException e) {\n        l.error(&quot;&quot;, e);\n    }\n    return false;\n }\n}\n</code></pre>\n"}],"owner":{"account_id":677311,"reputation":121,"user_id":634151,"display_name":"sssssssdddds"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10147,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":8,"score":12,"last_activity_date":1699445483,"creation_date":1298638313,"question_id":5117449,"body_markdown":"How can i verify if a user is root in a java application?\r\n\r\nThanks","title":"Check if a user is root in a java application","body":"<p>How can i verify if a user is root in a java application?</p>\n\n<p>Thanks</p>\n"},{"tags":["java","sql"],"comments":[{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":1,"creation_date":1699438520,"post_id":77444585,"comment_id":136530454,"body_markdown":"The attribute `auto_increment` takes care of the ids, you just insert all values except from the id, which is handled by the database. Or do you really want to make sure no duplicate ids are present yourself?","body":"The attribute <code>auto_increment</code> takes care of the ids, you just insert all values except from the id, which is handled by the database. Or do you really want to make sure no duplicate ids are present yourself?"},{"owner":{"account_id":29758124,"reputation":1,"user_id":22806336,"display_name":"Jxnnik"},"score":0,"creation_date":1699438953,"post_id":77444585,"comment_id":136530523,"body_markdown":"Yeah, I want to create a database with cars, so every car can have only one ID and no doubles. And when I insert i tired this: String sqlinsertMarke = &quot;INSERT INTO AUTOS (MARKE, MODELL, BAUJAHR) VALUES (&#39;&quot; + marke + &quot;&#39; , &#39;&quot; + modell + &quot;&#39;, &#39;&quot; + baujahr + &quot;&#39;)&quot;;","body":"Yeah, I want to create a database with cars, so every car can have only one ID and no doubles. And when I insert i tired this: String sqlinsertMarke = &quot;INSERT INTO AUTOS (MARKE, MODELL, BAUJAHR) VALUES (&#39;&quot; + marke + &quot;&#39; , &#39;&quot; + modell + &quot;&#39;, &#39;&quot; + baujahr + &quot;&#39;)&quot;;"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1699439508,"post_id":77444585,"comment_id":136530620,"body_markdown":"Did it work? In that statement, you don&#39;t try to insert an id, so it should be working (without the single and double quotes, most likely).","body":"Did it work? In that statement, you don&#39;t try to insert an id, so it should be working (without the single and double quotes, most likely)."},{"owner":{"account_id":29758124,"reputation":1,"user_id":22806336,"display_name":"Jxnnik"},"score":0,"creation_date":1699440132,"post_id":77444585,"comment_id":136530744,"body_markdown":"Kannst du das ganze auch auf Deutsch erkl&#228;ren?","body":"Kannst du das ganze auch auf Deutsch erkl&#228;ren?"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1699440769,"post_id":77444585,"comment_id":136530871,"body_markdown":"I could, but this is an English site… The questions and answers are not just for the one who asked and the ones who answered. But I can express myself in sql: `INSERT INTO AUTOS(MARKE, MODELL, BAUJAHR) VALUES (marke, modell, baujahr);` might be working…","body":"I could, but this is an English site… The questions and answers are not just for the one who asked and the ones who answered. But I can express myself in sql: <code>INSERT INTO AUTOS(MARKE, MODELL, BAUJAHR) VALUES (marke, modell, baujahr);</code> might be working…"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1699441228,"post_id":77444585,"comment_id":136530954,"body_markdown":"Does it actually work now?","body":"Does it actually work now?"},{"owner":{"account_id":29758124,"reputation":1,"user_id":22806336,"display_name":"Jxnnik"},"score":1,"creation_date":1699444857,"post_id":77444585,"comment_id":136531522,"body_markdown":"Yes, I have tried something different, but now its working :D","body":"Yes, I have tried something different, but now its working :D"}],"answers":[{"comments":[{"owner":{"account_id":29854220,"reputation":19,"user_id":22879420,"display_name":"T N MOHITH"},"score":0,"creation_date":1699453077,"post_id":77445155,"comment_id":136533225,"body_markdown":"please vote my answer if it helped you so in turn it would help me earn my reputation.","body":"please vote my answer if it helped you so in turn it would help me earn my reputation."},{"owner":{"account_id":29758124,"reputation":1,"user_id":22806336,"display_name":"Jxnnik"},"score":0,"creation_date":1700032313,"post_id":77445155,"comment_id":136603719,"body_markdown":"Sorry but I cant: Thanks for the feedback! You need at least 15 reputation to cast a vote, but your feedback has been recorded.","body":"Sorry but I cant: Thanks for the feedback! You need at least 15 reputation to cast a vote, but your feedback has been recorded."}],"tags":[],"owner":{"account_id":29854220,"reputation":19,"user_id":22879420,"display_name":"T N MOHITH"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1699442935,"creation_date":1699442935,"answer_id":77445155,"question_id":77444585,"body_markdown":"primary key uniquely identifies each record in the table. Primary key must contain unique values and cannot contain null values. You primary key must be null values or it does not have unique values hence you are getting this error","title":"Java SQL Insert a primary key in a table","body":"<p>primary key uniquely identifies each record in the table. Primary key must contain unique values and cannot contain null values. You primary key must be null values or it does not have unique values hence you are getting this error</p>\n"},{"tags":[],"owner":{"account_id":29852906,"reputation":46,"user_id":22878366,"display_name":"Kapila Shobit"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699445361,"creation_date":1699445361,"answer_id":77445424,"question_id":77444585,"body_markdown":"I think this should work fine if it is for SQLlite \r\nrefer this [SQLlite documentation][1]\r\n\r\n    String createTable = &quot;CREATE TABLE AUTOS (ID INTEGER PRIMARY KEY AUTOINCREMENT, marke TEXT, modell TEXT, baujahr INTEGER)&quot;;\r\n\r\n\r\n  [1]: https://www.sqlite.org/autoinc.html#summary","title":"Java SQL Insert a primary key in a table","body":"<p>I think this should work fine if it is for SQLlite\nrefer this <a href=\"https://www.sqlite.org/autoinc.html#summary\" rel=\"nofollow noreferrer\">SQLlite documentation</a></p>\n<pre><code>String createTable = &quot;CREATE TABLE AUTOS (ID INTEGER PRIMARY KEY AUTOINCREMENT, marke TEXT, modell TEXT, baujahr INTEGER)&quot;;\n</code></pre>\n"}],"owner":{"account_id":29758124,"reputation":1,"user_id":22806336,"display_name":"Jxnnik"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1699445361,"creation_date":1699438316,"question_id":77444585,"body_markdown":"I tried to insert an id as primary key in my table with auto_increment, but everytime it shows me the error field &quot;ID&quot; and Column &quot;ID&quot; not found.\r\n\r\nCan someone please give me the right Syntax for this?\r\n\r\nThis is what I tried:\r\n\r\n```\r\nString createTable = &quot;CREATE TABLE AUTOS (ID INTEGER PRIMARY KEY AUTO_INCREMENT, marke varchar(255), modell varchar(255), baujahr INT)&quot;;\r\n```","title":"Java SQL Insert a primary key in a table","body":"<p>I tried to insert an id as primary key in my table with auto_increment, but everytime it shows me the error field &quot;ID&quot; and Column &quot;ID&quot; not found.</p>\n<p>Can someone please give me the right Syntax for this?</p>\n<p>This is what I tried:</p>\n<pre><code>String createTable = &quot;CREATE TABLE AUTOS (ID INTEGER PRIMARY KEY AUTO_INCREMENT, marke varchar(255), modell varchar(255), baujahr INT)&quot;;\n</code></pre>\n"},{"tags":["java","spring","spring-boot","exceptionhandler","controller-advice"],"answers":[{"comments":[{"owner":{"account_id":17617723,"reputation":105,"user_id":12823863,"display_name":"SP QRT"},"score":0,"creation_date":1699445727,"post_id":77445379,"comment_id":136531686,"body_markdown":"Unfortunately not work :(","body":"Unfortunately not work :("}],"tags":[],"owner":{"account_id":2075909,"reputation":2169,"user_id":1849261,"accept_rate":78,"display_name":"4EACH"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699444985,"creation_date":1699444985,"answer_id":77445379,"question_id":77444958,"body_markdown":"In case you want to order the interceptors you can do it with `@Order` annotation\r\n\r\n\r\n    @ControllerAdvice\r\n    @Slf4j\r\n    @Order(Ordered.HIGHEST_PRECEDENCE)\r\n    public class RestResponseEntityExceptionHandler extends ResponseEntityExceptionHandler {\r\n    \r\n        @ExceptionHandler(value = {MyCustomException.class})\r\n        protected ResponseEntity&lt;?&gt; handleCustomExceptions(\r\n                MyCustomException ex) {\r\n            return ResponseEntity.status(\r\n                            ex.getMsg().getStatus().getCode())\r\n                    .body(ex.getReason().getPayload());\r\n        }\r\n    }\r\n\r\nIn this sample I have added the constant to highest order but you can use numeric order.","title":"SpringBoot. ResponseBodyAdvcie after ExcpeitonHandler","body":"<p>In case you want to order the interceptors you can do it with <code>@Order</code> annotation</p>\n<pre><code>@ControllerAdvice\n@Slf4j\n@Order(Ordered.HIGHEST_PRECEDENCE)\npublic class RestResponseEntityExceptionHandler extends ResponseEntityExceptionHandler {\n\n    @ExceptionHandler(value = {MyCustomException.class})\n    protected ResponseEntity&lt;?&gt; handleCustomExceptions(\n            MyCustomException ex) {\n        return ResponseEntity.status(\n                        ex.getMsg().getStatus().getCode())\n                .body(ex.getReason().getPayload());\n    }\n}\n</code></pre>\n<p>In this sample I have added the constant to highest order but you can use numeric order.</p>\n"}],"owner":{"account_id":17617723,"reputation":105,"user_id":12823863,"display_name":"SP QRT"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699444985,"creation_date":1699441118,"question_id":77444958,"body_markdown":"I got 2 `@ControllerAdvice` interceptors  \r\n\r\n1 - adivce for wrap response body to default response wrapper object\r\n```java\r\n@ControllerAdvice\r\nclass BodyWrapper implements ResponseBodyAdvice&lt;Object&gt; {\r\n       \r\n       @Override\r\n       public Object beforeBodyWrite(\r\n            Object body,\r\n            MethodParameter returnType,\r\n            MediaType selectedContentType,\r\n            Class&lt;? extends HttpMessageConverter&lt;?&gt;&gt; selectedConverterType,\r\n            ServerHttpRequest request,\r\n            ServerHttpResponse response) {\r\n                 return new DataResponse(body);\r\n            }\r\n}\r\n```\r\n\r\n2 - exception handler\r\n```java\r\n@ControllerAdvice\r\n@Slf4j\r\npublic class RestResponseEntityExceptionHandler extends ResponseEntityExceptionHandler {\r\n\r\n    @ExceptionHandler(value = {MyCustomException.class})\r\n    protected ResponseEntity&lt;?&gt; handleCustomExceptions(\r\n            MyCustomException ex) {\r\n        return ResponseEntity.status(\r\n                        ex.getMsg().getStatus().getCode())\r\n                .body(ex.getReason().getPayload());\r\n    }\r\n}\r\n```\r\n\r\n**Problem:**\r\n\r\n`ResponseBodyAdvice` catches any exceptions and then the `ExceptionHandler` is not called.\r\nHow to prevent invoking `ResponseBodyAdvice` if any exception occurs? Please help! ","title":"SpringBoot. ResponseBodyAdvcie after ExcpeitonHandler","body":"<p>I got 2 <code>@ControllerAdvice</code> interceptors</p>\n<p>1 - adivce for wrap response body to default response wrapper object</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ControllerAdvice\nclass BodyWrapper implements ResponseBodyAdvice&lt;Object&gt; {\n       \n       @Override\n       public Object beforeBodyWrite(\n            Object body,\n            MethodParameter returnType,\n            MediaType selectedContentType,\n            Class&lt;? extends HttpMessageConverter&lt;?&gt;&gt; selectedConverterType,\n            ServerHttpRequest request,\n            ServerHttpResponse response) {\n                 return new DataResponse(body);\n            }\n}\n</code></pre>\n<p>2 - exception handler</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ControllerAdvice\n@Slf4j\npublic class RestResponseEntityExceptionHandler extends ResponseEntityExceptionHandler {\n\n    @ExceptionHandler(value = {MyCustomException.class})\n    protected ResponseEntity&lt;?&gt; handleCustomExceptions(\n            MyCustomException ex) {\n        return ResponseEntity.status(\n                        ex.getMsg().getStatus().getCode())\n                .body(ex.getReason().getPayload());\n    }\n}\n</code></pre>\n<p><strong>Problem:</strong></p>\n<p><code>ResponseBodyAdvice</code> catches any exceptions and then the <code>ExceptionHandler</code> is not called.\nHow to prevent invoking <code>ResponseBodyAdvice</code> if any exception occurs? Please help!</p>\n"},{"tags":["java","hibernate","jpa"],"answers":[{"comments":[{"owner":{"account_id":5577196,"reputation":181,"user_id":4420265,"accept_rate":20,"display_name":"maracili"},"score":0,"creation_date":1439293977,"post_id":31940328,"comment_id":51791999,"body_markdown":"thanks,but i have `where` in hql string... there was a mistake in my post","body":"thanks,but i have <code>where</code> in hql string... there was a mistake in my post"},{"owner":{"account_id":114756,"reputation":57127,"user_id":301607,"accept_rate":100,"display_name":"StanislavL"},"score":0,"creation_date":1439294526,"post_id":31940328,"comment_id":51792367,"body_markdown":"Try also without brackets p in :parents","body":"Try also without brackets p in :parents"}],"tags":[],"owner":{"account_id":114756,"reputation":57127,"user_id":301607,"accept_rate":100,"display_name":"StanislavL"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1439291834,"creation_date":1439291834,"answer_id":31940328,"question_id":31937540,"body_markdown":"Looks like you miss `where` keyword\r\n\r\n    update Parent p set p.children=:childrenwhere where p in (:parents)\r\n\r\nor you can try with id\r\n\r\n    update Parent p set p.children=:childrenwhere where p.id in (:parentIds)","title":"Update List of entities in one query jpa","body":"<p>Looks like you miss <code>where</code> keyword</p>\n\n<pre><code>update Parent p set p.children=:childrenwhere where p in (:parents)\n</code></pre>\n\n<p>or you can try with id</p>\n\n<pre><code>update Parent p set p.children=:childrenwhere where p.id in (:parentIds)\n</code></pre>\n"}],"owner":{"account_id":5577196,"reputation":181,"user_id":4420265,"accept_rate":20,"display_name":"maracili"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8354,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1699444875,"creation_date":1439283935,"question_id":31937540,"body_markdown":"I need to update a list of objects in one query.\r\nI have class Parent which has a list of Child in ManyToMany relation.\r\nI need to update a list of Parent by setting children list to empty(remove all children references from join table).\r\nCurrently i&#39;m setting children list to empty and updating each entity in a query with a merge action,but when i have a large list of pharmacies there are too many queries.\r\n\r\ni tried this query: \r\n\r\n&gt; `update Parent p set p.children=:children where p in (:parents)`\r\n\r\nwhere :children is a `new HashSet&lt;Child&gt;`\r\n\r\n but it gives me error \r\n\r\n&gt; unexpected end of subtree\r\n\r\nIs there any way to update a list in one query ? I&#39;m using jpa entity manager.\r\nThanks.\r\n","title":"Update List of entities in one query jpa","body":"<p>I need to update a list of objects in one query.\nI have class Parent which has a list of Child in ManyToMany relation.\nI need to update a list of Parent by setting children list to empty(remove all children references from join table).\nCurrently i'm setting children list to empty and updating each entity in a query with a merge action,but when i have a large list of pharmacies there are too many queries.</p>\n\n<p>i tried this query: </p>\n\n<blockquote>\n  <p><code>update Parent p set p.children=:children where p in (:parents)</code></p>\n</blockquote>\n\n<p>where :children is a <code>new HashSet&lt;Child&gt;</code></p>\n\n<p>but it gives me error </p>\n\n<blockquote>\n  <p>unexpected end of subtree</p>\n</blockquote>\n\n<p>Is there any way to update a list in one query ? I'm using jpa entity manager.\nThanks.</p>\n"},{"tags":["java","java-8"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1699426416,"post_id":77443276,"comment_id":136528356,"body_markdown":"What&#39;s not good about your current code?","body":"What&#39;s not good about your current code?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1699434072,"post_id":77443276,"comment_id":136529533,"body_markdown":"Note that the majority of your code operates on `Optional`, not `Stream`. While the methods look similar, the semantic is different. Your code will produce `null` if an arbitrary element of `getDetails()` has no mobile number, even if other elements have. To pick an arbitrary mobile number from all detail elements, you should use a Stream operation and only tell to `findAny` at the end, `obj.getCustomer().getDetails().stream() .map(CustomerDetail::getContact) .flatMap(o -&gt; o.getMobiles().stream()) .map(o2 -&gt; o2.getNumber()) .filter(Objects::nonNull) .findAny() .orElse(null);`","body":"Note that the majority of your code operates on <code>Optional</code>, not <code>Stream</code>. While the methods look similar, the semantic is different. Your code will produce <code>null</code> if an arbitrary element of <code>getDetails()</code> has no mobile number, even if other elements have. To pick an arbitrary mobile number from all detail elements, you should use a Stream operation and only tell to <code>findAny</code> at the end, <code>obj.getCustomer().getDetails().stream() .map(CustomerDetail::getContact) .flatMap(o -&gt; o.getMobiles().stream()) .map(o2 -&gt; o2.getNumber()) .filter(Objects::nonNull) .findAny() .orElse(null);</code>"}],"answers":[{"comments":[{"owner":{"account_id":2105234,"reputation":1029,"user_id":1871717,"accept_rate":51,"display_name":"sophie"},"score":0,"creation_date":1699443411,"post_id":77443854,"comment_id":136531312,"body_markdown":"this seems to work! I am having problems with `.stream().findAny()` since it returns the value of `.map` even with empty `getMobiles` but inserting `.flatMap(Collection::stream)` does the trick - do you have explanation for this also?","body":"this seems to work! I am having problems with <code>.stream().findAny()</code> since it returns the value of <code>.map</code> even with empty <code>getMobiles</code> but inserting <code>.flatMap(Collection::stream)</code> does the trick - do you have explanation for this also?"},{"owner":{"account_id":26555431,"reputation":558,"user_id":20184128,"display_name":"berse2212"},"score":0,"creation_date":1699444847,"post_id":77443854,"comment_id":136531519,"body_markdown":"@sophie I added some additional explanation. Hope that makes it clearer!","body":"@sophie I added some additional explanation. Hope that makes it clearer!"}],"tags":[],"owner":{"account_id":26555431,"reputation":558,"user_id":20184128,"display_name":"berse2212"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1699444820,"creation_date":1699431558,"answer_id":77443854,"question_id":77443276,"body_markdown":"So if you want to find any phone number of any customer the first code is perfectly fine. \r\n\r\nHowever if you prefer the second variant I can help with that. The problem is you are assuming wrong datatypes. For clarity I added the type to each line of your code:\r\n\r\n    String b = obj.getCustomer().getDetails().stream() //Stream&lt;CustomerDetail&gt;\r\n        .findAny() //Optional&lt;CustomerDetail&gt;\r\n        .map(CustomerDetail::getContact) //Optional&lt;Contact&gt;\r\n        .map(Contact::getMobiles) //Optional&lt;Set&lt;String&gt;&gt;\r\n        .stream() //Stream&lt;Set&lt;String&gt;&gt; Mistake right here!\r\n        .findAny() //Optional&lt;Set&lt;String&gt;&gt;\r\n        .map(o -&gt; o.getNumber()) // o must be Set&lt;String&gt;!\r\n        .orElse(null);\r\n\r\n(I am assuming your Java-8 Tag is wrong since you used the stream()-method of the Optional which exists only since Java 9 : https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html#stream())\r\n\r\nWhat is does is basically turn your Optional into a Stream with only one (or zero) elements containing only the element of the Optional.\r\n\r\nWhat you need to do to fix this problem is the following:\r\n\r\n    String b = obj.getCustomer().getDetails().stream() //Stream&lt;CustomerDetail&gt;\r\n        .findAny() //Optional&lt;CustomerDetail&gt;\r\n        .map(CustomerDetail::getContact) //Optional&lt;Contact&gt;\r\n        .map(Contact::getMobiles) //Optional&lt;Set&lt;String&gt;&gt;\r\n        .stream() //Stream&lt;Set&lt;String&gt;&gt;\r\n        .flatMap(Collection::stream) // Stream&lt;String&gt; new flat map to turn into a Stream of Strings\r\n        .findAny() //Optional&lt;String&gt;\r\n        .map(o -&gt; o.getNumber()) // o is String and compiles\r\n        .orElse(null);\r\n\r\nEdit: \r\n\r\nBasically what the change does is to simply &#39;unpack&#39; the Set. \r\nYour code was basically a Stream that had one single Set inside. Calling `Collection::stream` transforms the Set into a Stream (Using the inherited `stream()`-Method from the interface `Collection`). Now the stream would have another stream inside which contains all the mobiles. That&#39;s why it has to be used with flatMap instead of map, which basically unpacks the second stream into the outer one. This results into having all Mobiles of one customer inside the stream now.\r\n\r\nIf you like this code is better is now on you to decide.","title":"Java nested stream find any value","body":"<p>So if you want to find any phone number of any customer the first code is perfectly fine.</p>\n<p>However if you prefer the second variant I can help with that. The problem is you are assuming wrong datatypes. For clarity I added the type to each line of your code:</p>\n<pre><code>String b = obj.getCustomer().getDetails().stream() //Stream&lt;CustomerDetail&gt;\n    .findAny() //Optional&lt;CustomerDetail&gt;\n    .map(CustomerDetail::getContact) //Optional&lt;Contact&gt;\n    .map(Contact::getMobiles) //Optional&lt;Set&lt;String&gt;&gt;\n    .stream() //Stream&lt;Set&lt;String&gt;&gt; Mistake right here!\n    .findAny() //Optional&lt;Set&lt;String&gt;&gt;\n    .map(o -&gt; o.getNumber()) // o must be Set&lt;String&gt;!\n    .orElse(null);\n</code></pre>\n<p>(I am assuming your Java-8 Tag is wrong since you used the stream()-method of the Optional which exists only since Java 9 : <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html#stream()\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html#stream()</a>)</p>\n<p>What is does is basically turn your Optional into a Stream with only one (or zero) elements containing only the element of the Optional.</p>\n<p>What you need to do to fix this problem is the following:</p>\n<pre><code>String b = obj.getCustomer().getDetails().stream() //Stream&lt;CustomerDetail&gt;\n    .findAny() //Optional&lt;CustomerDetail&gt;\n    .map(CustomerDetail::getContact) //Optional&lt;Contact&gt;\n    .map(Contact::getMobiles) //Optional&lt;Set&lt;String&gt;&gt;\n    .stream() //Stream&lt;Set&lt;String&gt;&gt;\n    .flatMap(Collection::stream) // Stream&lt;String&gt; new flat map to turn into a Stream of Strings\n    .findAny() //Optional&lt;String&gt;\n    .map(o -&gt; o.getNumber()) // o is String and compiles\n    .orElse(null);\n</code></pre>\n<p>Edit:</p>\n<p>Basically what the change does is to simply 'unpack' the Set.\nYour code was basically a Stream that had one single Set inside. Calling <code>Collection::stream</code> transforms the Set into a Stream (Using the inherited <code>stream()</code>-Method from the interface <code>Collection</code>). Now the stream would have another stream inside which contains all the mobiles. That's why it has to be used with flatMap instead of map, which basically unpacks the second stream into the outer one. This results into having all Mobiles of one customer inside the stream now.</p>\n<p>If you like this code is better is now on you to decide.</p>\n"}],"owner":{"account_id":2105234,"reputation":1029,"user_id":1871717,"accept_rate":51,"display_name":"sophie"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":77443854,"answer_count":1,"score":3,"last_activity_date":1699444820,"creation_date":1699425397,"question_id":77443276,"body_markdown":"is there a better approach to get `any` value from a nested stream?\r\n\r\n    String a = obj.getCustomer().getDetails().stream()\r\n        .findAny()\r\n        .map(CustomerDetail::getContact)\r\n        .flatMap(o -&gt; o.getMobiles()\r\n            .stream()\r\n            .findAny()\r\n            .map(o2 -&gt; o2.getNumber()))\r\n        .orElse(null);\r\n\r\nThis approach results in an error - cannot access `o` as `String`, it is still a `Set&lt;String&gt;` despite using `findAny`.\r\n\r\n    String b = obj.getCustomer().getDetails().stream()\r\n        .findAny()\r\n        .map(CustomerDetail::getContact)\r\n        .map(Contact::getMobiles)\r\n        .stream()\r\n        .findAny()\r\n        .map(o -&gt; o.getNumber()) // ERROR\r\n        .orElse(null);\r\n\r\n","title":"Java nested stream find any value","body":"<p>is there a better approach to get <code>any</code> value from a nested stream?</p>\n<pre><code>String a = obj.getCustomer().getDetails().stream()\n    .findAny()\n    .map(CustomerDetail::getContact)\n    .flatMap(o -&gt; o.getMobiles()\n        .stream()\n        .findAny()\n        .map(o2 -&gt; o2.getNumber()))\n    .orElse(null);\n</code></pre>\n<p>This approach results in an error - cannot access <code>o</code> as <code>String</code>, it is still a <code>Set&lt;String&gt;</code> despite using <code>findAny</code>.</p>\n<pre><code>String b = obj.getCustomer().getDetails().stream()\n    .findAny()\n    .map(CustomerDetail::getContact)\n    .map(Contact::getMobiles)\n    .stream()\n    .findAny()\n    .map(o -&gt; o.getNumber()) // ERROR\n    .orElse(null);\n</code></pre>\n"},{"tags":["java","logging","apache-httpclient-4.x","apache-commons-httpclient","apache-commons-logging"],"comments":[{"owner":{"account_id":477780,"reputation":3813,"user_id":889475,"accept_rate":61,"display_name":"HashimR"},"score":0,"creation_date":1344574303,"post_id":9482717,"comment_id":15832948,"body_markdown":"stuck at the same problem. :&#39;( Guess there is something wrong with httpClient 4.x ...","body":"stuck at the same problem. :&#39;( Guess there is something wrong with httpClient 4.x ..."}],"answers":[{"comments":[{"owner":{"account_id":252532,"reputation":11548,"user_id":530634,"accept_rate":74,"display_name":"tjb"},"score":0,"creation_date":1330444784,"post_id":9485254,"comment_id":12005585,"body_markdown":"yes, still nothing (I modified the question above to reflect the attempt)","body":"yes, still nothing (I modified the question above to reflect the attempt)"}],"tags":[],"owner":{"account_id":7286,"reputation":3224,"user_id":12604,"display_name":"Ryan Ransford"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1330444625,"creation_date":1330444625,"answer_id":9485254,"question_id":9482717,"body_markdown":"Have you also tried including the first line from the examples:\r\n\r\n    System.setProperty(&quot;org.apache.commons.logging.Log&quot;, &quot;org.apache.commons.logging.impl.SimpleLog&quot;);\r\n\r\nThis should register the SimpleLog implementation with commons-logging.","title":"Turning on Logging in HttpClient","body":"<p>Have you also tried including the first line from the examples:</p>\n\n<pre><code>System.setProperty(\"org.apache.commons.logging.Log\", \"org.apache.commons.logging.impl.SimpleLog\");\n</code></pre>\n\n<p>This should register the SimpleLog implementation with commons-logging.</p>\n"},{"comments":[{"owner":{"account_id":60816,"reputation":3394,"user_id":181551,"accept_rate":41,"display_name":"Alex Worden"},"score":17,"creation_date":1434576081,"post_id":9502279,"comment_id":49844127,"body_markdown":"That would be fine if those instructions didn&#39;t completely suck. Does anyone know of a useful configuration guide with examples?","body":"That would be fine if those instructions didn&#39;t completely suck. Does anyone know of a useful configuration guide with examples?"}],"tags":[],"owner":{"account_id":133909,"reputation":26610,"user_id":335638,"display_name":"ok2c"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1644433955,"creation_date":1330530712,"answer_id":9502279,"question_id":9482717,"body_markdown":"This is due to the HttpClient version mix-up. Your code is obviously using HttpClient 4.x API, while the logging settings are for an older Commons HttpClient release (3.x).\r\n\r\nPlease refer to the [HttpClient 4.x logging guide][1] for instructions on logging configuration for various logging toolkits.\r\n\r\n\r\n  [1]: https://hc.apache.org/httpcomponents-client-4.5.x/logging.html","title":"Turning on Logging in HttpClient","body":"<p>This is due to the HttpClient version mix-up. Your code is obviously using HttpClient 4.x API, while the logging settings are for an older Commons HttpClient release (3.x).</p>\n<p>Please refer to the <a href=\"https://hc.apache.org/httpcomponents-client-4.5.x/logging.html\" rel=\"nofollow noreferrer\">HttpClient 4.x logging guide</a> for instructions on logging configuration for various logging toolkits.</p>\n"},{"tags":[],"owner":{"account_id":6509613,"reputation":91,"user_id":5037384,"display_name":"Stefan Winter"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1461263116,"creation_date":1461263116,"answer_id":36777612,"question_id":9482717,"body_markdown":"http://hc.apache.org/httpcomponents-client-ga/logging.html is wrong in section Log4j Examples.\r\n\r\nTo get full wire logging on HttpClient 4.x with Log4j use:\r\n\r\n    log4j.category.org.apache.http.wire=DEBUG","title":"Turning on Logging in HttpClient","body":"<p><a href=\"http://hc.apache.org/httpcomponents-client-ga/logging.html\" rel=\"noreferrer\">http://hc.apache.org/httpcomponents-client-ga/logging.html</a> is wrong in section Log4j Examples.</p>\n\n<p>To get full wire logging on HttpClient 4.x with Log4j use:</p>\n\n<pre><code>log4j.category.org.apache.http.wire=DEBUG\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1639723,"reputation":71,"user_id":1512415,"display_name":"KamikazeJones"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1467626134,"creation_date":1467626134,"answer_id":38181759,"question_id":9482717,"body_markdown":"I had to add &quot;commons-logging-1.2.jar&quot; to the build path. ","title":"Turning on Logging in HttpClient","body":"<p>I had to add \"commons-logging-1.2.jar\" to the build path. </p>\n"},{"tags":[],"owner":{"account_id":6478770,"reputation":1592,"user_id":5016540,"accept_rate":67,"display_name":"thangdc94"},"comment_count":0,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1553854608,"creation_date":1553854608,"answer_id":55415153,"question_id":9482717,"body_markdown":"I faced same problem today. And I found out a solution for this problem. It&#39;s pretty simple.\r\nJust add `jcl-over-slf4j` dependency to forward JCL logging (Apache Commons Logging) to slf4j.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;\r\n        &lt;version&gt;1.7.5&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAfter that you can config log file as [Log4j Examples][1].\r\nIf you use `logback` you can put the following to your `logback.xml`\r\n\r\n    &lt;logger name=&quot;org.apache.http&quot; level=&quot;DEBUG&quot;/&gt;\r\n\r\n\r\nOr if you use `log4j`\r\n\r\n    log4j.logger.org.apache.http=DEBUG\r\n\r\n  [1]: http://hc.apache.org/httpcomponents-client-ga/logging.html#Log4j_Examples\r\n","title":"Turning on Logging in HttpClient","body":"<p>I faced same problem today. And I found out a solution for this problem. It's pretty simple.\nJust add <code>jcl-over-slf4j</code> dependency to forward JCL logging (Apache Commons Logging) to slf4j.</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;\n    &lt;version&gt;1.7.5&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>After that you can config log file as <a href=\"http://hc.apache.org/httpcomponents-client-ga/logging.html#Log4j_Examples\" rel=\"noreferrer\">Log4j Examples</a>.\nIf you use <code>logback</code> you can put the following to your <code>logback.xml</code></p>\n\n<pre><code>&lt;logger name=\"org.apache.http\" level=\"DEBUG\"/&gt;\n</code></pre>\n\n<p>Or if you use <code>log4j</code></p>\n\n<pre><code>log4j.logger.org.apache.http=DEBUG\n</code></pre>\n"},{"comments":[{"owner":{"account_id":17932162,"reputation":150,"user_id":13029436,"display_name":"robert0801"},"score":0,"creation_date":1621943691,"post_id":60978227,"comment_id":119640986,"body_markdown":"Thank you for the detailed explanation. It is really works.","body":"Thank you for the detailed explanation. It is really works."}],"tags":[],"owner":{"account_id":7063700,"reputation":7125,"user_id":5407848,"accept_rate":94,"display_name":"Accountant م"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1585767007,"creation_date":1585767007,"answer_id":60978227,"question_id":9482717,"body_markdown":"After hours of searching **without** a dependency manager like maven this is how it finally worked for me to install Apache components HttpClient 5.0 and the other jars required for logging\r\n\r\n\r\n\r\n1- Downloading Apache components HttpClient 5.0\r\n--------------------------------------------\r\n\r\nGo to [https://hc.apache.org/downloads.cgi](https://hc.apache.org/downloads.cgi) and download the HttpClient 5.0 library binary folder including all it&#39;s jars\r\n\r\n\r\n\r\n2- Downloading Log4j 2 implementation a.k.a &quot;core&quot;\r\n--------------------------------------------\r\n\r\naccording to [this note](https://hc.apache.org/httpcomponents-client-5.0.x/logging.html) \r\n\r\n&gt; The Log4j 2 implementation a.k.a &quot;core&quot; is not included in the HttpClient distribution. You can include it in your project using [Maven, Ivy, Gradle, or SBT](https://logging.apache.org/log4j/2.x/maven-artifacts.html)\r\n\r\nI checked the maven xml file and downloaded these 2 files\r\n\r\n - \r\n[log4j-core-2.13.1.jar](https://repo1.maven.org/maven2/org/apache/logging/log4j/log4j-core/2.13.1/)\r\n\r\n - [log4j-api-2.13.1.jar](https://repo1.maven.org/maven2/org/apache/logging/log4j/log4j-api/2.13.1/)\r\n\r\n\r\n3- Downloading SLF4J Bridge\r\n--------------------------------------------\r\n\r\nAfter step 2 you will still find errors and obviously there is something still missed, I kept on reading [this page](https://logging.apache.org/log4j/2.x/maven-artifacts.html) and found another note that says\r\n\r\n&gt;If existing components use SLF4J and you want to have this logging routed to Log4j 2, then add the following but do not remove any SLF4J dependencies.\r\n\r\nI downloaded this jar file [log4j-slf4j-impl-2.13.1.jar](https://repo1.maven.org/maven2/org/apache/logging/log4j/log4j-slf4j-impl/2.13.1/)\r\n\r\n\r\n\r\n4- No more downloading \r\n--------------------------------------------\r\n\r\nNow you need to add the HttpClient 5.0 jars folder and the other 3 jars we just downloaded to your classpath (*from configure Build path if you are using Eclipse*) and test if logging works using [one of the examples here](https://hc.apache.org/httpcomponents-client-5.0.x/logging.html) . Create a file named `log4j2.xml` at the root of your application classpath with this contents\r\n\r\n    &lt;Configuration&gt;\r\n      &lt;Appenders&gt;\r\n        &lt;Console name=&quot;STDOUT&quot;&gt;\r\n          &lt;PatternLayout pattern=&quot;%d %-5level [%logger] %msg%n%xThrowable&quot; /&gt;\r\n        &lt;/Console&gt;\r\n      &lt;/Appenders&gt;\r\n      &lt;Loggers&gt;\r\n        &lt;Logger name=&quot;org.apache.hc.client5.http&quot; level=&quot;DEBUG&quot;&gt;\r\n          &lt;AppenderRef ref=&quot;Console&quot;/&gt;\r\n        &lt;/Logger&gt;\r\n        &lt;Logger name=&quot;org.apache.hc.client5.http.wire&quot; level=&quot;DEBUG&quot;&gt;\r\n          &lt;AppenderRef ref=&quot;Console&quot;/&gt;\r\n        &lt;/Logger&gt;\r\n        &lt;Root level=&quot;INFO&quot;&gt;\r\n          &lt;AppenderRef ref=&quot;STDOUT&quot; /&gt;\r\n        &lt;/Root&gt;\r\n      &lt;/Loggers&gt;\r\n    &lt;/Configuration&gt;\r\n\r\nVoila , you should now see many logs like this one in your console, when HttpClient is sending a http request\r\n\r\n    2020-04-01 19:49:08,597 DEBUG [org.apache.hc.client5.http.impl.classic.ConnectExec] ex-00000001: opening connection {}-&gt;http://www.example.com:80\r\n\r\n\r\n5- Final thoughts \r\n--------------------------------------------\r\n\r\n - Keep your eye on the **versions of files**, if you are reading this post in the future make sure that the versions of the jar files are compatible\r\n\r\n - Make sure your class path is clear and **you are not using or installing any other jars** that could break the applications, for example I installed the entire `Log4j2` library folder, and it fixed some errors, but produced new errors.\r\n","title":"Turning on Logging in HttpClient","body":"<p>After hours of searching <strong>without</strong> a dependency manager like maven this is how it finally worked for me to install Apache components HttpClient 5.0 and the other jars required for logging</p>\n\n<h2>1- Downloading Apache components HttpClient 5.0</h2>\n\n<p>Go to <a href=\"https://hc.apache.org/downloads.cgi\" rel=\"nofollow noreferrer\">https://hc.apache.org/downloads.cgi</a> and download the HttpClient 5.0 library binary folder including all it's jars</p>\n\n<h2>2- Downloading Log4j 2 implementation a.k.a \"core\"</h2>\n\n<p>according to <a href=\"https://hc.apache.org/httpcomponents-client-5.0.x/logging.html\" rel=\"nofollow noreferrer\">this note</a> </p>\n\n<blockquote>\n  <p>The Log4j 2 implementation a.k.a \"core\" is not included in the HttpClient distribution. You can include it in your project using <a href=\"https://logging.apache.org/log4j/2.x/maven-artifacts.html\" rel=\"nofollow noreferrer\">Maven, Ivy, Gradle, or SBT</a></p>\n</blockquote>\n\n<p>I checked the maven xml file and downloaded these 2 files</p>\n\n<ul>\n<li><p><a href=\"https://repo1.maven.org/maven2/org/apache/logging/log4j/log4j-core/2.13.1/\" rel=\"nofollow noreferrer\">log4j-core-2.13.1.jar</a></p></li>\n<li><p><a href=\"https://repo1.maven.org/maven2/org/apache/logging/log4j/log4j-api/2.13.1/\" rel=\"nofollow noreferrer\">log4j-api-2.13.1.jar</a></p></li>\n</ul>\n\n<h2>3- Downloading SLF4J Bridge</h2>\n\n<p>After step 2 you will still find errors and obviously there is something still missed, I kept on reading <a href=\"https://logging.apache.org/log4j/2.x/maven-artifacts.html\" rel=\"nofollow noreferrer\">this page</a> and found another note that says</p>\n\n<blockquote>\n  <p>If existing components use SLF4J and you want to have this logging routed to Log4j 2, then add the following but do not remove any SLF4J dependencies.</p>\n</blockquote>\n\n<p>I downloaded this jar file <a href=\"https://repo1.maven.org/maven2/org/apache/logging/log4j/log4j-slf4j-impl/2.13.1/\" rel=\"nofollow noreferrer\">log4j-slf4j-impl-2.13.1.jar</a></p>\n\n<h2>4- No more downloading</h2>\n\n<p>Now you need to add the HttpClient 5.0 jars folder and the other 3 jars we just downloaded to your classpath (<em>from configure Build path if you are using Eclipse</em>) and test if logging works using <a href=\"https://hc.apache.org/httpcomponents-client-5.0.x/logging.html\" rel=\"nofollow noreferrer\">one of the examples here</a> . Create a file named <code>log4j2.xml</code> at the root of your application classpath with this contents</p>\n\n<pre><code>&lt;Configuration&gt;\n  &lt;Appenders&gt;\n    &lt;Console name=\"STDOUT\"&gt;\n      &lt;PatternLayout pattern=\"%d %-5level [%logger] %msg%n%xThrowable\" /&gt;\n    &lt;/Console&gt;\n  &lt;/Appenders&gt;\n  &lt;Loggers&gt;\n    &lt;Logger name=\"org.apache.hc.client5.http\" level=\"DEBUG\"&gt;\n      &lt;AppenderRef ref=\"Console\"/&gt;\n    &lt;/Logger&gt;\n    &lt;Logger name=\"org.apache.hc.client5.http.wire\" level=\"DEBUG\"&gt;\n      &lt;AppenderRef ref=\"Console\"/&gt;\n    &lt;/Logger&gt;\n    &lt;Root level=\"INFO\"&gt;\n      &lt;AppenderRef ref=\"STDOUT\" /&gt;\n    &lt;/Root&gt;\n  &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n\n<p>Voila , you should now see many logs like this one in your console, when HttpClient is sending a http request</p>\n\n<pre><code>2020-04-01 19:49:08,597 DEBUG [org.apache.hc.client5.http.impl.classic.ConnectExec] ex-00000001: opening connection {}-&gt;http://www.example.com:80\n</code></pre>\n\n<h2>5- Final thoughts</h2>\n\n<ul>\n<li><p>Keep your eye on the <strong>versions of files</strong>, if you are reading this post in the future make sure that the versions of the jar files are compatible</p></li>\n<li><p>Make sure your class path is clear and <strong>you are not using or installing any other jars</strong> that could break the applications, for example I installed the entire <code>Log4j2</code> library folder, and it fixed some errors, but produced new errors.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3999523,"reputation":371,"user_id":3295911,"display_name":"tanacsg"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1594798185,"creation_date":1594798185,"answer_id":62909661,"question_id":9482717,"body_markdown":"In a Spring Boot 2.2.x app with httpclient 4.5.x this config in he application.yml helped me:\r\n\r\n    logging:\r\n      level:\r\n        org.apache.http: DEBUG","title":"Turning on Logging in HttpClient","body":"<p>In a Spring Boot 2.2.x app with httpclient 4.5.x this config in he application.yml helped me:</p>\n<pre><code>logging:\n  level:\n    org.apache.http: DEBUG\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16671486,"reputation":53,"user_id":12048805,"display_name":"EverCpp"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641856052,"creation_date":1641852578,"answer_id":70659458,"question_id":9482717,"body_markdown":"This is how I enabled the logging in Apache HttpClient 5 using Log4j2 in Eclipse.\r\nI added these libraries:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/krn0g.png\r\n\r\n - log4j-api-2.12.4.jar\r\n - log4j-core-2.12.4.jar\r\n - log4j-slf4j-impl-2.12.4.jar\r\n\r\nThen, I created the configuration file **log4j2.xml**.\r\n\r\n    &lt;Configuration&gt;\r\n      &lt;Appenders&gt;\r\n        &lt;Console name=&quot;STDOUT&quot;&gt;\r\n          &lt;PatternLayout pattern=&quot;%d %-5level [%logger] %msg%n%xThrowable&quot; /&gt;\r\n        &lt;/Console&gt;\r\n      &lt;/Appenders&gt;\r\n      &lt;Loggers&gt;\r\n        &lt;Logger name=&quot;org.apache.hc.client5.http&quot; level=&quot;DEBUG&quot;&gt;\r\n          &lt;AppenderRef ref=&quot;STDOUT&quot;/&gt;\r\n        &lt;/Logger&gt;\r\n        &lt;Logger name=&quot;org.apache.hc.client5.http.wire&quot; level=&quot;DEBUG&quot;&gt;\r\n          &lt;AppenderRef ref=&quot;STDOUT&quot;/&gt;\r\n        &lt;/Logger&gt;\r\n        &lt;Logger name=&quot;org.apache.hc.client5.http.header&quot; level=&quot;DEBUG&quot;&gt;\r\n          &lt;AppenderRef ref=&quot;STDOUT&quot;/&gt;\r\n        &lt;/Logger&gt;\r\n        &lt;Root level=&quot;INFO&quot;&gt;\r\n          &lt;AppenderRef ref=&quot;STDOUT&quot; /&gt;\r\n        &lt;/Root&gt;\r\n      &lt;/Loggers&gt;\r\n    &lt;/Configuration&gt;\r\n\r\nPut it in a new forlder **/res** and add the folder as Class Folder (Properties -&gt; Java Build Path -&gt; Add Class Folder)\r\n\r\nDone.","title":"Turning on Logging in HttpClient","body":"<p>This is how I enabled the logging in Apache HttpClient 5 using Log4j2 in Eclipse.\nI added these libraries:</p>\n<p><a href=\"https://i.stack.imgur.com/krn0g.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/krn0g.png\" alt=\"enter image description here\" /></a></p>\n<ul>\n<li>log4j-api-2.12.4.jar</li>\n<li>log4j-core-2.12.4.jar</li>\n<li>log4j-slf4j-impl-2.12.4.jar</li>\n</ul>\n<p>Then, I created the configuration file <strong>log4j2.xml</strong>.</p>\n<pre><code>&lt;Configuration&gt;\n  &lt;Appenders&gt;\n    &lt;Console name=&quot;STDOUT&quot;&gt;\n      &lt;PatternLayout pattern=&quot;%d %-5level [%logger] %msg%n%xThrowable&quot; /&gt;\n    &lt;/Console&gt;\n  &lt;/Appenders&gt;\n  &lt;Loggers&gt;\n    &lt;Logger name=&quot;org.apache.hc.client5.http&quot; level=&quot;DEBUG&quot;&gt;\n      &lt;AppenderRef ref=&quot;STDOUT&quot;/&gt;\n    &lt;/Logger&gt;\n    &lt;Logger name=&quot;org.apache.hc.client5.http.wire&quot; level=&quot;DEBUG&quot;&gt;\n      &lt;AppenderRef ref=&quot;STDOUT&quot;/&gt;\n    &lt;/Logger&gt;\n    &lt;Logger name=&quot;org.apache.hc.client5.http.header&quot; level=&quot;DEBUG&quot;&gt;\n      &lt;AppenderRef ref=&quot;STDOUT&quot;/&gt;\n    &lt;/Logger&gt;\n    &lt;Root level=&quot;INFO&quot;&gt;\n      &lt;AppenderRef ref=&quot;STDOUT&quot; /&gt;\n    &lt;/Root&gt;\n  &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<p>Put it in a new forlder <strong>/res</strong> and add the folder as Class Folder (Properties -&gt; Java Build Path -&gt; Add Class Folder)</p>\n<p>Done.</p>\n"},{"tags":[],"owner":{"account_id":1123074,"reputation":20262,"user_id":1110941,"accept_rate":91,"display_name":"prograhammer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662683638,"creation_date":1662683638,"answer_id":73656207,"question_id":9482717,"body_markdown":"If you are using a Spring Boot starter like `spring-boot-starter-web` or `spring-boot-starter-webflux`, etc., it depends transitively on the logging starter which uses Logback by default.\r\n\r\nCreate a basic `logback.xml` file at `src/main/resources/logback.xml` and add an entry for `org.apache.http`:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;configuration&gt;\r\n\r\n    &lt;!-- ... --&gt;\r\n    \r\n    &lt;logger name=&quot;org.apache.http&quot; level=&quot;DEBUG&quot;/&gt;\r\n    \r\n\r\n&lt;/configuration&gt;\r\n```","title":"Turning on Logging in HttpClient","body":"<p>If you are using a Spring Boot starter like <code>spring-boot-starter-web</code> or <code>spring-boot-starter-webflux</code>, etc., it depends transitively on the logging starter which uses Logback by default.</p>\n<p>Create a basic <code>logback.xml</code> file at <code>src/main/resources/logback.xml</code> and add an entry for <code>org.apache.http</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;configuration&gt;\n\n    &lt;!-- ... --&gt;\n    \n    &lt;logger name=&quot;org.apache.http&quot; level=&quot;DEBUG&quot;/&gt;\n    \n\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3723758,"reputation":11894,"user_id":3600553,"accept_rate":71,"display_name":"Du-Lacoste"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699444556,"creation_date":1699444556,"answer_id":77445316,"question_id":9482717,"body_markdown":"You could do the below:\r\n\r\nEdit `logback.xml` to include the below:\r\n\r\n    &lt;configuration&gt;\r\n        &lt;logger name=&quot;org.apache&quot; level=&quot;DEBUG&quot; /&gt;\r\n        &lt;logger name=&quot;httpclient&quot; level=&quot;DEBUG&quot; /&gt; \r\n    &lt;/configuration&gt;\r\n\r\nIf using `log4j.properties`, then edit and add the below:\r\n\r\n    log4j.logger.httpclient.wire.header=DEBUG\r\n    log4j.logger.httpclient.wire.content=DEBUG\r\n\r\nIn case, if you want to get rid of the logging, just use `WARN` instead of `DEBUG`","title":"Turning on Logging in HttpClient","body":"<p>You could do the below:</p>\n<p>Edit <code>logback.xml</code> to include the below:</p>\n<pre><code>&lt;configuration&gt;\n    &lt;logger name=&quot;org.apache&quot; level=&quot;DEBUG&quot; /&gt;\n    &lt;logger name=&quot;httpclient&quot; level=&quot;DEBUG&quot; /&gt; \n&lt;/configuration&gt;\n</code></pre>\n<p>If using <code>log4j.properties</code>, then edit and add the below:</p>\n<pre><code>log4j.logger.httpclient.wire.header=DEBUG\nlog4j.logger.httpclient.wire.content=DEBUG\n</code></pre>\n<p>In case, if you want to get rid of the logging, just use <code>WARN</code> instead of <code>DEBUG</code></p>\n"}],"owner":{"account_id":252532,"reputation":11548,"user_id":530634,"accept_rate":74,"display_name":"tjb"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93718,"favorite_count":0,"down_vote_count":0,"up_vote_count":33,"answer_count":10,"score":33,"last_activity_date":1699444556,"creation_date":1330435415,"question_id":9482717,"body_markdown":"How do you properly turn on Logging for Apache Commons HttpClient\r\n\r\nRight now I am doing this and getting no log messages except the one I triggered explicitly as a test:\r\n\r\n```lang-java\r\npublic class HttpTest1 {\r\n\tstatic Log log = LogFactory.getLog(Class.class);\r\n\r\npublic static void main(String[] args) throws ClientProtocolException, IOException{\r\n\t\tlog.warn(&quot;Logging Works&quot;);\r\n\t\tSystem.setProperty(&quot;org.apache.commons.logging.Log&quot;, &quot;org.apache.commons.logging.impl.SimpleLog&quot;);\r\n\r\n\t\tSystem.setProperty(&quot;org.apache.commons.logging.simplelog.showdatetime&quot;, &quot;true&quot;);\r\n\t\tSystem.setProperty(&quot;org.apache.commons.logging.simplelog.log.httpclient.wire&quot;, &quot;debug&quot;);\r\n\t\tSystem.setProperty(&quot;org.apache.commons.logging.simplelog.log.org.apache.commons.httpclient&quot;, &quot;debug&quot;);\r\n\r\n\t\tDefaultHttpClient client = new DefaultHttpClient();\r\n\r\n\t\tHttpGet method = new HttpGet(&quot;http://www.google.com&quot;);\r\n\r\n\t\tHttpResponse response = client.execute(method);\r\n\t\tBufferedReader rd = new BufferedReader(new InputStreamReader(\r\n\t\t\t\tresponse.getEntity().getContent()));\r\n\r\n\t\tString line = &quot;&quot;;\r\n\t\twhile ((line = rd.readLine()) != null) {\r\n\t\t\tSystem.out.println(line);\r\n\t\t}\r\n\t}\t\r\n}\r\n```\r\n\r\nOutput:\r\n\r\n```lang-none\r\nFeb 28, 2012 2:16:31 PM httpTest.HttpTest1 main\r\nWARNING: Logging Works\r\n&lt;!doctype html&gt;&lt;html itemscope itemtype=&quot;http://schema.org/WebPage&quot;&gt;&lt;head&gt;&lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=ISO-8859-2&quot;&gt;&lt;meta itemprop=&quot;image&quot; content=&quot;/images/google_favicon_128.png&quot;&gt;&lt;title&gt;Google&lt;/title&gt;&lt;script&gt;window.google={kEI:&quot;stNMT4yfMInFtAaK_5yGDw&quot;,getEI:function(a){var d;while(a&amp;&amp;!(a.getAttribute&amp;&amp;(d=a.getAttribute(&quot;eid&quot;))))a=a.parentNode;return d||google.kEI},https:function(){return window.location.protocol==&quot;https:&quot;},kEXPI:&quot;33551,34324,34904,35055,35091,36604,36683,36934,36946,37017&quot;,kCSI:{e:&quot;33551,34324,34904,35055,35091,36604,36683,36934,36946,37017&quot;,ei:&quot;stNMT4yfMInFtAaK_5yGDw&quot;},authuser:0,\r\nml:function(){},kHL:&quot;sl&quot;,time:function(){return(new Date).getTime()},log:function(a,d,f,h){var e=new Image,g=google,k=g.lc,i=g.li,m=&quot;&quot;;e.onerror=(e.onload=(e.onabort=function(){delete k[i]}));k[i]=e;if(!f&amp;&amp;d.search(&quot;&amp;ei=&quot;)==-1)m=&quot;&amp;ei=&quot;+google.getEI(h);var j=f||&quot;/gen_204?atyp=i&amp;ct=&quot;+a+&quot;&amp;cad=&quot;+d+m+&quot;&amp;zx=&quot;+google.time(),b=/^http:/i;if(b.test(j)&amp;&amp;google.https()){google.ml(new Error(&quot;GLMM&quot;),false,{src:j});\r\ndelete k[i];return}e.src=j;g.li=i+1},lc:[],li:0,Toolbelt:{},y:{},x:function(a,d){google.y[a.id]=\r\n[a,d];return false}};(function(){var a=\r\ngoogle.kEI;window.pp_tos={};var d=document.domain.replace(/.*?(google\\..*)/,&quot;$1&quot;);function f(){var b=0;try{var c=document.cookie.match(/PP_TOS_ACK=([^;]*)/);b=c&amp;&amp;!isNaN(c[1])?c[1]:0}catch(l){e(&quot;error&quot;,&quot;read_cookie&quot;)}return b}function h(b){var c=f();if(c&gt;=0){g(++c);if(f()&gt;0&amp;&amp;!b)m()}}function e(b,c){var l=new Image;c=c?&quot;&amp;emsg=&quot;+c:&quot;&quot;;l.src=[&quot;//&quot;,d,&quot;/gen_204?atyp=i&amp;ct=pp_tos&amp;cd=&quot;,b,&quot;&amp;source=&quot;,&quot;web&quot;,&quot;&amp;ei=&quot;,a,c].join(&quot;&quot;);window.pp_tos.beacon=l}function g(b){var c=new Date((new Date).getTime()+5184000000);\r\ntry{var l=&quot;PP_TOS_ACK=&quot;+b+&quot;; expires=&quot;+c.toGMTString()+&quot;; path=/; domain=&quot;+d;document.cookie=l}catch(n){e(&quot;error&quot;,&quot;write_cookie&quot;)}}function k(){g(-1);e(&quot;dismiss&quot;);j()}function i(){g(-1);e(&quot;tellmore&quot;);j()}function m(){var b=document.getElementById(&quot;bb_pp_tos_ack&quot;);if(b){b.style.display=&quot;&quot;;e(&quot;display&quot;)}}function j(){var b=document.getElementById(&quot;bb_pp_tos_ack&quot;);if(b)b.style.display=&quot;none&quot;}window.pp_tos.handleDismiss=k;window.pp_tos.handleLearnMore=i;window.pp_tos.checkCookie=h})();\r\nwindow.google.sn=&quot;webhp&quot;;window.google.timers={};window.google.startTick=function(a,b){window.google.timers[a]={t:{start:(new Date).getTime()},bfr:!(!b)}};window.google.tick=function(a,b,c){if(!window.google.timers[a])google.startTick(a);window.google.timers[a].t[b]=c||(new Date).getTime()};google.startTick(&quot;load&quot;,true);try{}catch(u){}\r\nvar _gjwl=location;function _gjuc(){var e=_gjwl.href.indexOf(&quot;#&quot;);if(e&gt;=0){var a=_gjwl.href.substring(e);if(a.indexOf(&quot;&amp;q=&quot;)&gt;0||a.indexOf(&quot;#q=&quot;)&gt;=0){a=a.substring(1);if(a.indexOf(&quot;#&quot;)==-1){for(var c=0;c&lt;a.length;){var d=c;if(a.charAt(d)==&quot;&amp;&quot;)++d;var b=a.indexOf(&quot;&amp;&quot;,d);if(b==-1)b=a.length;var f=a.substring(d,b);if(f.indexOf(&quot;fp=&quot;)==0){a=a.substring(0,c)+a.substring(b,a.length);b=c}else if(f==&quot;cad=h&quot;)return 0;c=b}_gjwl.href=&quot;/search?&quot;+a+&quot;&amp;cad=h&quot;;return 1}}}return 0}function _gjp(){!(window._gjwl.hash&amp;&amp;\r\nwindow._gjuc())&amp;&amp;setTimeout(_gjp,500)};\r\nwindow._gjp &amp;&amp; _gjp()&lt;/script&gt;&lt;style&gt;#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}&lt;/style&gt;&lt;style id=gstyle&gt;body{margin:0;overflow-y:scroll}#gog{padding:3px 8px 0}td{line-height:.8em}.gac_m td{line-height:17px}form{margin-bottom:20px}body,td,a,p,.h{font-family:arial,sans-serif}.h{color:#36c;font-size:20px}.q{color:#00c}.ts td{padding:0}.ts{border-collapse:collapse}em{font-weight:bold;font-style:normal}.lst{height:25px;width:496px}.gsfi,.lst{font:18px arial,sans-serif}.gsfs{font:17px arial,sans-serif}.tiah{width:458px}.ds{border-bottom:solid 1px #e7e7e7;border-right:solid 1px #e7e7e7;display:-moz-inline-box;display:inline-block;margin:3px 0 4px;margin-left:4px}input{font-family:inherit}a.gb1,a.gb2,a.gb3,a.gb4{color:#11c !important}body{background:#fff;color:black}a{color:#11c;text-decoration:none}a:hover,a:active{text-decoration:underline}.fl a{color:#36c}a:visited{color:#551a8b}a.gb1,a.gb4{text-decoration:underline}a.gb3:hover{text-decoration:none}#ghead a.gb2:hover{color:#fff!important}.sblc{padding-top:5px}.sblc a{display:block;margin:2px 0;margin-left:13px;font-size:11px;}.lsbb{background:#eee;border:solid 1px;border-color:#ccc #999 #999 #ccc;height:30px;display:block}.pp-new-desktop,.pp-new-mobile{color:red}.ftl,#fll a{display:inline-block;margin:0 12px}.lsb{background:url(/images/srpr/nav_logo80.png) 0 -258px repeat-x;border:none;color:#000;cursor:pointer;height:30px;margin:0;outline:0;font:15px arial,sans-serif;vertical-align:top}.lsb:active{background:#ccc}.lst:focus{outline:none}#addlang a{padding:0 3px}.gac_v div{display:none}.gac_v .gac_v2,.gac_bt{display:block!important}table.gssb_c{z-index:986  }.nbcl{background:url(/images/srpr/nav_logo80.png) no-repeat ;height:px;width:px}&lt;/style&gt;&lt;script&gt;window.rwt=function(a,f,g,l,m,h,c,n,i){try{if(a===window){a=window.event.srcElement;while(a){if(a.href)break;a=a.parentNode}}var b=encodeURIComponent||escape,d;d=a.getAttribute(&quot;href&quot;);if(c&amp;&amp;c.substring(0,6)!=&quot;&amp;sig2=&quot;)c=&quot;&amp;sig2=&quot;+c;var o=[&quot;/url?sa=t&quot;,&quot;&quot;,&quot;&amp;cd=&quot;,b(m),i?&quot;&amp;authuser=&quot;+b(i):&quot;&quot;,google.j&amp;&amp;google.j.pf?&quot;&amp;sqi=2&quot;:&quot;&quot;,&quot;&amp;ved=&quot;,b(n),&quot;&amp;url=&quot;,b(d).replace(/\\+/g,&quot;%2B&quot;),&quot;&amp;ei=&quot;,&quot;stNMT4yfMInFtAaK_5yGDw&quot;,h?&quot;&amp;usg=&quot;+h:&quot;&quot;,c].join(&quot;&quot;);a.href=o;a.onmousedown=&quot;&quot;}catch(p){}return true};\r\n&lt;/script&gt;&lt;/head&gt;&lt;body bgcolor=#ffffff text=#000000 link=#0000cc vlink=#551a8b alink=#ff0000 onload=&quot;document.f&amp;&amp;document.f.q.focus();document.gbqf&amp;&amp;document.gbqf.q.focus();if(document.images)new Image().src=&#39;/images/srpr/nav_logo80.png&#39;&quot; &gt;&lt;textarea id=csi style=display:none&gt;&lt;/textarea&gt;&lt;div id=mngb&gt;&lt;div id=gbar&gt;&lt;nobr&gt;&lt;b class=gb1&gt;Iskanje&lt;/b&gt; &lt;a class=gb1 href=&quot;http://www.google.si/imghp?hl=sl&amp;tab=wi&quot;&gt;Slike&lt;/a&gt; &lt;a class=gb1 href=&quot;http://maps.google.si/maps?hl=sl&amp;tab=wl&quot;&gt;Zemljevidi&lt;/a&gt; &lt;a class=gb1 href=&quot;http://translate.google.si/?hl=sl&amp;tab=wT&quot;&gt;Prevajalnik&lt;/a&gt; &lt;a class=gb1 href=&quot;http://scholar.google.si/schhp?hl=sl&amp;tab=ws&quot;&gt;U�enjak&lt;/a&gt; &lt;a class=gb1 href=&quot;http://www.google.si/blogsearch?hl=sl&amp;tab=wb&quot;&gt;Spletni dnevniki&lt;/a&gt; &lt;a class=gb1 href=&quot;https://mail.google.com/mail/?tab=wm&quot;&gt;Gmail&lt;/a&gt; &lt;/nobr&gt;&lt;/div&gt;&lt;div id=guser width=100%&gt;&lt;nobr&gt;&lt;span id=gbn class=gbi&gt;&lt;/span&gt;&lt;span id=gbf class=gbf&gt;&lt;/span&gt;&lt;span id=gbe&gt;&lt;a  href=&quot;/url?sa=p&amp;pref=ig&amp;pval=3&amp;q=http://www.google.si/ig%3Fhl%3Dsl%26source%3Diglk&amp;usg=AFQjCNHCrHelGlcr9HOQNsjP9j1ZtQCSgQ&quot; class=gb4&gt;iGoogle&lt;/a&gt; | &lt;/span&gt;&lt;a href=&quot;http://www.google.com/history/optout?hl=sl&quot; class=gb4&gt;Spletna zgodovina&lt;/a&gt; | &lt;a  href=&quot;/preferences?hl=sl&quot; class=gb4&gt;Nastavitve&lt;/a&gt; | &lt;a id=gb_70 href=&quot;https://accounts.google.com/ServiceLogin?hl=sl&amp;continue=http://www.google.si/&quot; class=gb4&gt;Prijava&lt;/a&gt;&lt;/nobr&gt;&lt;/div&gt;&lt;div class=gbh style=left:0&gt;&lt;/div&gt;&lt;div class=gbh style=right:0&gt;&lt;/div&gt;&lt;/div&gt;&lt;center&gt;&lt;br clear=all id=lgpd&gt;&lt;div id=lga&gt;&lt;div style=&quot;padding:28px 0 3px&quot;&gt;&lt;div align=left style=&quot;background:url(/intl/en_com/images/srpr/logo1w.png) no-repeat;height:110px;width:276px&quot; title=&quot;Google&quot; id=hplogo onload=&quot;window.lol&amp;&amp;lol()&quot;&gt;&lt;div nowrap style=&quot;color:#777;font-size:16px;font-weight:bold;left:214px;position:relative;top:70px&quot;&gt;Slovenija&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;form action=&quot;/search&quot; name=f&gt;&lt;table cellpadding=0 cellspacing=0&gt;&lt;tr valign=top&gt;&lt;td width=25%&gt;&amp;nbsp;&lt;/td&gt;&lt;td align=center nowrap&gt;&lt;input name=hl type=hidden value=sl&gt;&lt;input name=source type=hidden value=hp&gt;&lt;input type=hidden name=ie value=&quot;ISO-8859-2&quot;&gt;&lt;div class=ds style=&quot;height:32px;margin:4px 0&quot;&gt;&lt;div style=&quot;position:relative;zoom:1&quot;&gt;&lt;input autocomplete=off maxlength=2048 name=q class=&quot;lst tiah&quot; title=&quot;Iskanje Google&quot; value=&quot;&quot; size=57 style=&quot;background:#fff;border:1px solid #ccc;border-bottom-color:#999;border-right-color:#999;color:#000;margin:0;padding:5px 8px 0 6px;padding-right:38px;vertical-align:top&quot;&gt;&lt;img src=&quot;/textinputassistant/tia.png&quot; width=27 height=23 alt=&quot;&quot; style=&quot;position:absolute;cursor:pointer;right:5px;top:4px;z-index:300&quot; onclick=&quot;var s=document.createElement(&#39;script&#39;);s.src=&#39;/textinputassistant/1/sl_tia.js&#39;;google.dom.append(s);&quot;/&gt;&lt;/div&gt;&lt;/div&gt;&lt;br style=&quot;line-height:0&quot;&gt;&lt;span class=ds &gt;&lt;span class=lsbb&gt;&lt;input name=btnG type=submit value=&quot;Iskanje Google&quot; class=lsb&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=ds&gt;&lt;span class=lsbb&gt;&lt;input name=btnI type=submit class=lsb value=&quot;Klik na sre�o&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;&lt;td nowrap width=25% align=left class=&quot;fl sblc&quot;&gt;&lt;a href=&quot;/advanced_search?hl=sl&quot;&gt;Napredno iskanje&lt;/a&gt;&lt;a href=&quot;/language_tools?hl=sl&quot;&gt;Jezikovna orodja&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;input type=hidden id=gbv name=gbv value=&quot;1&quot;&gt;&lt;/form&gt;&lt;div style=&quot;font-size:83%;min-height:3.5em&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div id=res&gt;&lt;/div&gt;&lt;span id=footer&gt;&lt;center id=fctr&gt;&lt;div style=&quot;font-size:10pt&quot;&gt;&lt;div id=fll style=&quot;margin:19px auto;text-align:center&quot;&gt;&lt;a href=&quot;http://adwords.google.com/select?hl=sl&quot;&gt;Ogla�evalski programi&lt;/a&gt;&lt;a href=&quot;/intl/sl/about.html&quot;&gt;Google &amp;#8211; vse o Googlu&lt;/a&gt;&lt;a href=&quot;http://www.google.com/ncr&quot; class=&quot;gl nobr&quot;&gt;Google.com in English&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;p style=&quot;color:#767676;font-size:8pt&quot;&gt;&amp;copy; 2012&lt;/p&gt;&lt;/center&gt;&lt;/span&gt; &lt;/center&gt;&lt;div id=xjsd&gt;&lt;/div&gt;&lt;div id=xjsi&gt;&lt;script&gt;if(google.y)google.y.first=[];google.dlj=function(b){window.setTimeout(function(){var a=document.createElement(&quot;script&quot;);a.src=b;document.getElementById(&quot;xjsd&quot;).appendChild(a)},0)};\r\nif(google.y)google.y.first=[];if(!google.xjs){google.dstr=[];google.rein=[];if(google.timers&amp;&amp;google.timers.load.t){google.timers.load.t.xjsls=new Date().getTime();}google.dlj(&#39;/extern_js/f/CgJzbBICc2kgASswRTgALCswWjgALCswDjgALCswFzgALCswPDgALCswUTgALCswCjgAmgICaGUsKzCYATgALCswFjgALCswGTgALCswQTgALCswTTgALCswTjgALCswVDgALCswaTgALCswkAE4ACwrMJIBOAAsKzDVATgALCsw2AE4ACwrMBg4ACwrMCY4ACyAAlCQAmc/KdS-qUb5nqw.js&#39;);google.xjs=1}google.neegg=1;google.mc=[];google.mc=google.mc.concat([[69,{}],[14,{}],[60,{}],[23,{}],[81,{}],[10,{&quot;client&quot;:&quot;hp&quot;,&quot;dh&quot;:true,&quot;ds&quot;:&quot;&quot;,&quot;fl&quot;:true,&quot;host&quot;:&quot;google.si&quot;,&quot;jsonp&quot;:true,&quot;msgs&quot;:{&quot;lcky&quot;:&quot;Klik na sre�o&quot;,&quot;lml&quot;:&quot;Ve� o tem&quot;,&quot;psrc&quot;:&quot;To iskanje je bilo odstranjeno iz \\u003Ca href=\\&quot;/history\\&quot;\\u003Ezgodovine iskanja\\u003C/a\\u003E&quot;,&quot;psrl&quot;:&quot;Odstrani&quot;,&quot;srch&quot;:&quot;Iskanje Google&quot;},&quot;ovr&quot;:{&quot;fm&quot;:1,&quot;o&quot;:1,&quot;pf&quot;:1,&quot;ps&quot;:1,&quot;sn&quot;:1,&quot;sw&quot;:1},&quot;pq&quot;:&quot;&quot;,&quot;scd&quot;:10,&quot;sce&quot;:5}],[152,{}],[65,{}],[213,{&quot;pberr&quot;:&quot;\\u003Cfont color=red\\u003ENapaka:\\u003C/font\\u003E Stre�nik ni mogel dokon�ati va�e zahteve. Poskusite znova �ez 30 sekund.&quot;}],[78,{}],[25,{&quot;g&quot;:8,&quot;k&quot;:false,&quot;m&quot;:{&quot;app&quot;:true,&quot;bks&quot;:true,&quot;blg&quot;:true,&quot;dsc&quot;:true,&quot;evn&quot;:true,&quot;fin&quot;:true,&quot;flm&quot;:true,&quot;frm&quot;:true,&quot;isch&quot;:true,&quot;klg&quot;:true,&quot;mbl&quot;:true,&quot;nws&quot;:true,&quot;plcs&quot;:true,&quot;ppl&quot;:true,&quot;prc&quot;:true,&quot;pts&quot;:true,&quot;rcp&quot;:true,&quot;shop&quot;:true,&quot;vid&quot;:true},&quot;t&quot;:null}],[216,{}],[105,{}],[22,{&quot;db&quot;:false,&quot;m_errors&quot;:{&quot;32&quot;:&quot;�al ni drugih rezultatov.&quot;,&quot;default&quot;:&quot;\\u003Cfont color=red\\u003ENapaka:\\u003C/font\\u003E Stre�nik ni mogel dokon�ati va�e zahteve. Poskusite znova �ez 30 sekund.&quot;},&quot;m_tip&quot;:&quot;Kliknite za ve� informacij&quot;,&quot;nlpm&quot;:&quot;-153px -84px&quot;,&quot;nlpp&quot;:&quot;-153px -70px&quot;,&quot;utp&quot;:false}],[77,{}],[146,{}],[144,{}],[84,{}],[24,{}],[38,{}]]);google.y.first.push(function(){if(google.med){google.med(&#39;init&#39;);google.initHistory();google.med(&#39;history&#39;);}google.History&amp;&amp;google.History.initialize(&#39;/&#39;)});if(google.j&amp;&amp;google.j.en&amp;&amp;google.j.xi){window.setTimeout(google.j.xi,0);}&lt;/script&gt;&lt;/div&gt;&lt;script&gt;(function(){\r\nvar b,d,e,f;function g(a,c){if(a.removeEventListener){a.removeEventListener(&quot;load&quot;,c,false);a.removeEventListener(&quot;error&quot;,c,false)}else{a.detachEvent(&quot;onload&quot;,c);a.detachEvent(&quot;onerror&quot;,c)}}function h(a){f=(new Date).getTime();++d;a=a||window.event;var c=a.target||a.srcElement;g(c,h)}var i=document.getElementsByTagName(&quot;img&quot;);b=i.length;d=0;for(var j=0,k;j&lt;b;++j){k=i[j];if(k.complete||typeof k.src!=&quot;string&quot;||!k.src)++d;else if(k.addEventListener){k.addEventListener(&quot;load&quot;,h,false);k.addEventListener(&quot;error&quot;,\r\nh,false)}else{k.attachEvent(&quot;onload&quot;,h);k.attachEvent(&quot;onerror&quot;,h)}}e=b-d;function l(){if(!google.timers.load.t)return;google.timers.load.t.ol=(new Date).getTime();google.timers.load.t.iml=f;google.kCSI.imc=d;google.kCSI.imn=b;google.kCSI.imp=e;if(google.stt!==undefined)google.kCSI.stt=google.stt;google.timers.load.t.xjs&amp;&amp;google.report&amp;&amp;google.report(google.timers.load,google.kCSI)}if(window.addEventListener)window.addEventListener(&quot;load&quot;,\r\nl,false);else if(window.attachEvent)window.attachEvent(&quot;onload&quot;,l);google.timers.load.t.prt=(f=(new Date).getTime());\r\n})();\r\n&lt;/script&gt;\r\n```\r\n\r\nI am using Eclipse.","title":"Turning on Logging in HttpClient","body":"<p>How do you properly turn on Logging for Apache Commons HttpClient</p>\n<p>Right now I am doing this and getting no log messages except the one I triggered explicitly as a test:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class HttpTest1 {\n    static Log log = LogFactory.getLog(Class.class);\n\npublic static void main(String[] args) throws ClientProtocolException, IOException{\n        log.warn(&quot;Logging Works&quot;);\n        System.setProperty(&quot;org.apache.commons.logging.Log&quot;, &quot;org.apache.commons.logging.impl.SimpleLog&quot;);\n\n        System.setProperty(&quot;org.apache.commons.logging.simplelog.showdatetime&quot;, &quot;true&quot;);\n        System.setProperty(&quot;org.apache.commons.logging.simplelog.log.httpclient.wire&quot;, &quot;debug&quot;);\n        System.setProperty(&quot;org.apache.commons.logging.simplelog.log.org.apache.commons.httpclient&quot;, &quot;debug&quot;);\n\n        DefaultHttpClient client = new DefaultHttpClient();\n\n        HttpGet method = new HttpGet(&quot;http://www.google.com&quot;);\n\n        HttpResponse response = client.execute(method);\n        BufferedReader rd = new BufferedReader(new InputStreamReader(\n                response.getEntity().getContent()));\n\n        String line = &quot;&quot;;\n        while ((line = rd.readLine()) != null) {\n            System.out.println(line);\n        }\n    }   \n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Feb 28, 2012 2:16:31 PM httpTest.HttpTest1 main\nWARNING: Logging Works\n&lt;!doctype html&gt;&lt;html itemscope itemtype=&quot;http://schema.org/WebPage&quot;&gt;&lt;head&gt;&lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=ISO-8859-2&quot;&gt;&lt;meta itemprop=&quot;image&quot; content=&quot;/images/google_favicon_128.png&quot;&gt;&lt;title&gt;Google&lt;/title&gt;&lt;script&gt;window.google={kEI:&quot;stNMT4yfMInFtAaK_5yGDw&quot;,getEI:function(a){var d;while(a&amp;&amp;!(a.getAttribute&amp;&amp;(d=a.getAttribute(&quot;eid&quot;))))a=a.parentNode;return d||google.kEI},https:function(){return window.location.protocol==&quot;https:&quot;},kEXPI:&quot;33551,34324,34904,35055,35091,36604,36683,36934,36946,37017&quot;,kCSI:{e:&quot;33551,34324,34904,35055,35091,36604,36683,36934,36946,37017&quot;,ei:&quot;stNMT4yfMInFtAaK_5yGDw&quot;},authuser:0,\nml:function(){},kHL:&quot;sl&quot;,time:function(){return(new Date).getTime()},log:function(a,d,f,h){var e=new Image,g=google,k=g.lc,i=g.li,m=&quot;&quot;;e.onerror=(e.onload=(e.onabort=function(){delete k[i]}));k[i]=e;if(!f&amp;&amp;d.search(&quot;&amp;ei=&quot;)==-1)m=&quot;&amp;ei=&quot;+google.getEI(h);var j=f||&quot;/gen_204?atyp=i&amp;ct=&quot;+a+&quot;&amp;cad=&quot;+d+m+&quot;&amp;zx=&quot;+google.time(),b=/^http:/i;if(b.test(j)&amp;&amp;google.https()){google.ml(new Error(&quot;GLMM&quot;),false,{src:j});\ndelete k[i];return}e.src=j;g.li=i+1},lc:[],li:0,Toolbelt:{},y:{},x:function(a,d){google.y[a.id]=\n[a,d];return false}};(function(){var a=\ngoogle.kEI;window.pp_tos={};var d=document.domain.replace(/.*?(google\\..*)/,&quot;$1&quot;);function f(){var b=0;try{var c=document.cookie.match(/PP_TOS_ACK=([^;]*)/);b=c&amp;&amp;!isNaN(c[1])?c[1]:0}catch(l){e(&quot;error&quot;,&quot;read_cookie&quot;)}return b}function h(b){var c=f();if(c&gt;=0){g(++c);if(f()&gt;0&amp;&amp;!b)m()}}function e(b,c){var l=new Image;c=c?&quot;&amp;emsg=&quot;+c:&quot;&quot;;l.src=[&quot;//&quot;,d,&quot;/gen_204?atyp=i&amp;ct=pp_tos&amp;cd=&quot;,b,&quot;&amp;source=&quot;,&quot;web&quot;,&quot;&amp;ei=&quot;,a,c].join(&quot;&quot;);window.pp_tos.beacon=l}function g(b){var c=new Date((new Date).getTime()+5184000000);\ntry{var l=&quot;PP_TOS_ACK=&quot;+b+&quot;; expires=&quot;+c.toGMTString()+&quot;; path=/; domain=&quot;+d;document.cookie=l}catch(n){e(&quot;error&quot;,&quot;write_cookie&quot;)}}function k(){g(-1);e(&quot;dismiss&quot;);j()}function i(){g(-1);e(&quot;tellmore&quot;);j()}function m(){var b=document.getElementById(&quot;bb_pp_tos_ack&quot;);if(b){b.style.display=&quot;&quot;;e(&quot;display&quot;)}}function j(){var b=document.getElementById(&quot;bb_pp_tos_ack&quot;);if(b)b.style.display=&quot;none&quot;}window.pp_tos.handleDismiss=k;window.pp_tos.handleLearnMore=i;window.pp_tos.checkCookie=h})();\nwindow.google.sn=&quot;webhp&quot;;window.google.timers={};window.google.startTick=function(a,b){window.google.timers[a]={t:{start:(new Date).getTime()},bfr:!(!b)}};window.google.tick=function(a,b,c){if(!window.google.timers[a])google.startTick(a);window.google.timers[a].t[b]=c||(new Date).getTime()};google.startTick(&quot;load&quot;,true);try{}catch(u){}\nvar _gjwl=location;function _gjuc(){var e=_gjwl.href.indexOf(&quot;#&quot;);if(e&gt;=0){var a=_gjwl.href.substring(e);if(a.indexOf(&quot;&amp;q=&quot;)&gt;0||a.indexOf(&quot;#q=&quot;)&gt;=0){a=a.substring(1);if(a.indexOf(&quot;#&quot;)==-1){for(var c=0;c&lt;a.length;){var d=c;if(a.charAt(d)==&quot;&amp;&quot;)++d;var b=a.indexOf(&quot;&amp;&quot;,d);if(b==-1)b=a.length;var f=a.substring(d,b);if(f.indexOf(&quot;fp=&quot;)==0){a=a.substring(0,c)+a.substring(b,a.length);b=c}else if(f==&quot;cad=h&quot;)return 0;c=b}_gjwl.href=&quot;/search?&quot;+a+&quot;&amp;cad=h&quot;;return 1}}}return 0}function _gjp(){!(window._gjwl.hash&amp;&amp;\nwindow._gjuc())&amp;&amp;setTimeout(_gjp,500)};\nwindow._gjp &amp;&amp; _gjp()&lt;/script&gt;&lt;style&gt;#gbar,#guser{font-size:13px;padding-top:1px !important;}#gbar{height:22px}#guser{padding-bottom:7px !important;text-align:right}.gbh,.gbd{border-top:1px solid #c9d7f1;font-size:1px}.gbh{height:0;position:absolute;top:24px;width:100%}@media all{.gb1{height:22px;margin-right:.5em;vertical-align:top}#gbar{float:left}}a.gb1,a.gb4{text-decoration:underline !important}a.gb1,a.gb4{color:#00c !important}&lt;/style&gt;&lt;style id=gstyle&gt;body{margin:0;overflow-y:scroll}#gog{padding:3px 8px 0}td{line-height:.8em}.gac_m td{line-height:17px}form{margin-bottom:20px}body,td,a,p,.h{font-family:arial,sans-serif}.h{color:#36c;font-size:20px}.q{color:#00c}.ts td{padding:0}.ts{border-collapse:collapse}em{font-weight:bold;font-style:normal}.lst{height:25px;width:496px}.gsfi,.lst{font:18px arial,sans-serif}.gsfs{font:17px arial,sans-serif}.tiah{width:458px}.ds{border-bottom:solid 1px #e7e7e7;border-right:solid 1px #e7e7e7;display:-moz-inline-box;display:inline-block;margin:3px 0 4px;margin-left:4px}input{font-family:inherit}a.gb1,a.gb2,a.gb3,a.gb4{color:#11c !important}body{background:#fff;color:black}a{color:#11c;text-decoration:none}a:hover,a:active{text-decoration:underline}.fl a{color:#36c}a:visited{color:#551a8b}a.gb1,a.gb4{text-decoration:underline}a.gb3:hover{text-decoration:none}#ghead a.gb2:hover{color:#fff!important}.sblc{padding-top:5px}.sblc a{display:block;margin:2px 0;margin-left:13px;font-size:11px;}.lsbb{background:#eee;border:solid 1px;border-color:#ccc #999 #999 #ccc;height:30px;display:block}.pp-new-desktop,.pp-new-mobile{color:red}.ftl,#fll a{display:inline-block;margin:0 12px}.lsb{background:url(/images/srpr/nav_logo80.png) 0 -258px repeat-x;border:none;color:#000;cursor:pointer;height:30px;margin:0;outline:0;font:15px arial,sans-serif;vertical-align:top}.lsb:active{background:#ccc}.lst:focus{outline:none}#addlang a{padding:0 3px}.gac_v div{display:none}.gac_v .gac_v2,.gac_bt{display:block!important}table.gssb_c{z-index:986  }.nbcl{background:url(/images/srpr/nav_logo80.png) no-repeat ;height:px;width:px}&lt;/style&gt;&lt;script&gt;window.rwt=function(a,f,g,l,m,h,c,n,i){try{if(a===window){a=window.event.srcElement;while(a){if(a.href)break;a=a.parentNode}}var b=encodeURIComponent||escape,d;d=a.getAttribute(&quot;href&quot;);if(c&amp;&amp;c.substring(0,6)!=&quot;&amp;sig2=&quot;)c=&quot;&amp;sig2=&quot;+c;var o=[&quot;/url?sa=t&quot;,&quot;&quot;,&quot;&amp;cd=&quot;,b(m),i?&quot;&amp;authuser=&quot;+b(i):&quot;&quot;,google.j&amp;&amp;google.j.pf?&quot;&amp;sqi=2&quot;:&quot;&quot;,&quot;&amp;ved=&quot;,b(n),&quot;&amp;url=&quot;,b(d).replace(/\\+/g,&quot;%2B&quot;),&quot;&amp;ei=&quot;,&quot;stNMT4yfMInFtAaK_5yGDw&quot;,h?&quot;&amp;usg=&quot;+h:&quot;&quot;,c].join(&quot;&quot;);a.href=o;a.onmousedown=&quot;&quot;}catch(p){}return true};\n&lt;/script&gt;&lt;/head&gt;&lt;body bgcolor=#ffffff text=#000000 link=#0000cc vlink=#551a8b alink=#ff0000 onload=&quot;document.f&amp;&amp;document.f.q.focus();document.gbqf&amp;&amp;document.gbqf.q.focus();if(document.images)new Image().src='/images/srpr/nav_logo80.png'&quot; &gt;&lt;textarea id=csi style=display:none&gt;&lt;/textarea&gt;&lt;div id=mngb&gt;&lt;div id=gbar&gt;&lt;nobr&gt;&lt;b class=gb1&gt;Iskanje&lt;/b&gt; &lt;a class=gb1 href=&quot;http://www.google.si/imghp?hl=sl&amp;tab=wi&quot;&gt;Slike&lt;/a&gt; &lt;a class=gb1 href=&quot;http://maps.google.si/maps?hl=sl&amp;tab=wl&quot;&gt;Zemljevidi&lt;/a&gt; &lt;a class=gb1 href=&quot;http://translate.google.si/?hl=sl&amp;tab=wT&quot;&gt;Prevajalnik&lt;/a&gt; &lt;a class=gb1 href=&quot;http://scholar.google.si/schhp?hl=sl&amp;tab=ws&quot;&gt;U�enjak&lt;/a&gt; &lt;a class=gb1 href=&quot;http://www.google.si/blogsearch?hl=sl&amp;tab=wb&quot;&gt;Spletni dnevniki&lt;/a&gt; &lt;a class=gb1 href=&quot;https://mail.google.com/mail/?tab=wm&quot;&gt;Gmail&lt;/a&gt; &lt;/nobr&gt;&lt;/div&gt;&lt;div id=guser width=100%&gt;&lt;nobr&gt;&lt;span id=gbn class=gbi&gt;&lt;/span&gt;&lt;span id=gbf class=gbf&gt;&lt;/span&gt;&lt;span id=gbe&gt;&lt;a  href=&quot;/url?sa=p&amp;pref=ig&amp;pval=3&amp;q=http://www.google.si/ig%3Fhl%3Dsl%26source%3Diglk&amp;usg=AFQjCNHCrHelGlcr9HOQNsjP9j1ZtQCSgQ&quot; class=gb4&gt;iGoogle&lt;/a&gt; | &lt;/span&gt;&lt;a href=&quot;http://www.google.com/history/optout?hl=sl&quot; class=gb4&gt;Spletna zgodovina&lt;/a&gt; | &lt;a  href=&quot;/preferences?hl=sl&quot; class=gb4&gt;Nastavitve&lt;/a&gt; | &lt;a id=gb_70 href=&quot;https://accounts.google.com/ServiceLogin?hl=sl&amp;continue=http://www.google.si/&quot; class=gb4&gt;Prijava&lt;/a&gt;&lt;/nobr&gt;&lt;/div&gt;&lt;div class=gbh style=left:0&gt;&lt;/div&gt;&lt;div class=gbh style=right:0&gt;&lt;/div&gt;&lt;/div&gt;&lt;center&gt;&lt;br clear=all id=lgpd&gt;&lt;div id=lga&gt;&lt;div style=&quot;padding:28px 0 3px&quot;&gt;&lt;div align=left style=&quot;background:url(/intl/en_com/images/srpr/logo1w.png) no-repeat;height:110px;width:276px&quot; title=&quot;Google&quot; id=hplogo onload=&quot;window.lol&amp;&amp;lol()&quot;&gt;&lt;div nowrap style=&quot;color:#777;font-size:16px;font-weight:bold;left:214px;position:relative;top:70px&quot;&gt;Slovenija&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;form action=&quot;/search&quot; name=f&gt;&lt;table cellpadding=0 cellspacing=0&gt;&lt;tr valign=top&gt;&lt;td width=25%&gt;&amp;nbsp;&lt;/td&gt;&lt;td align=center nowrap&gt;&lt;input name=hl type=hidden value=sl&gt;&lt;input name=source type=hidden value=hp&gt;&lt;input type=hidden name=ie value=&quot;ISO-8859-2&quot;&gt;&lt;div class=ds style=&quot;height:32px;margin:4px 0&quot;&gt;&lt;div style=&quot;position:relative;zoom:1&quot;&gt;&lt;input autocomplete=off maxlength=2048 name=q class=&quot;lst tiah&quot; title=&quot;Iskanje Google&quot; value=&quot;&quot; size=57 style=&quot;background:#fff;border:1px solid #ccc;border-bottom-color:#999;border-right-color:#999;color:#000;margin:0;padding:5px 8px 0 6px;padding-right:38px;vertical-align:top&quot;&gt;&lt;img src=&quot;/textinputassistant/tia.png&quot; width=27 height=23 alt=&quot;&quot; style=&quot;position:absolute;cursor:pointer;right:5px;top:4px;z-index:300&quot; onclick=&quot;var s=document.createElement('script');s.src='/textinputassistant/1/sl_tia.js';google.dom.append(s);&quot;/&gt;&lt;/div&gt;&lt;/div&gt;&lt;br style=&quot;line-height:0&quot;&gt;&lt;span class=ds &gt;&lt;span class=lsbb&gt;&lt;input name=btnG type=submit value=&quot;Iskanje Google&quot; class=lsb&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=ds&gt;&lt;span class=lsbb&gt;&lt;input name=btnI type=submit class=lsb value=&quot;Klik na sre�o&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;&lt;td nowrap width=25% align=left class=&quot;fl sblc&quot;&gt;&lt;a href=&quot;/advanced_search?hl=sl&quot;&gt;Napredno iskanje&lt;/a&gt;&lt;a href=&quot;/language_tools?hl=sl&quot;&gt;Jezikovna orodja&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;input type=hidden id=gbv name=gbv value=&quot;1&quot;&gt;&lt;/form&gt;&lt;div style=&quot;font-size:83%;min-height:3.5em&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div id=res&gt;&lt;/div&gt;&lt;span id=footer&gt;&lt;center id=fctr&gt;&lt;div style=&quot;font-size:10pt&quot;&gt;&lt;div id=fll style=&quot;margin:19px auto;text-align:center&quot;&gt;&lt;a href=&quot;http://adwords.google.com/select?hl=sl&quot;&gt;Ogla�evalski programi&lt;/a&gt;&lt;a href=&quot;/intl/sl/about.html&quot;&gt;Google &amp;#8211; vse o Googlu&lt;/a&gt;&lt;a href=&quot;http://www.google.com/ncr&quot; class=&quot;gl nobr&quot;&gt;Google.com in English&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;p style=&quot;color:#767676;font-size:8pt&quot;&gt;&amp;copy; 2012&lt;/p&gt;&lt;/center&gt;&lt;/span&gt; &lt;/center&gt;&lt;div id=xjsd&gt;&lt;/div&gt;&lt;div id=xjsi&gt;&lt;script&gt;if(google.y)google.y.first=[];google.dlj=function(b){window.setTimeout(function(){var a=document.createElement(&quot;script&quot;);a.src=b;document.getElementById(&quot;xjsd&quot;).appendChild(a)},0)};\nif(google.y)google.y.first=[];if(!google.xjs){google.dstr=[];google.rein=[];if(google.timers&amp;&amp;google.timers.load.t){google.timers.load.t.xjsls=new Date().getTime();}google.dlj('/extern_js/f/CgJzbBICc2kgASswRTgALCswWjgALCswDjgALCswFzgALCswPDgALCswUTgALCswCjgAmgICaGUsKzCYATgALCswFjgALCswGTgALCswQTgALCswTTgALCswTjgALCswVDgALCswaTgALCswkAE4ACwrMJIBOAAsKzDVATgALCsw2AE4ACwrMBg4ACwrMCY4ACyAAlCQAmc/KdS-qUb5nqw.js');google.xjs=1}google.neegg=1;google.mc=[];google.mc=google.mc.concat([[69,{}],[14,{}],[60,{}],[23,{}],[81,{}],[10,{&quot;client&quot;:&quot;hp&quot;,&quot;dh&quot;:true,&quot;ds&quot;:&quot;&quot;,&quot;fl&quot;:true,&quot;host&quot;:&quot;google.si&quot;,&quot;jsonp&quot;:true,&quot;msgs&quot;:{&quot;lcky&quot;:&quot;Klik na sre�o&quot;,&quot;lml&quot;:&quot;Ve� o tem&quot;,&quot;psrc&quot;:&quot;To iskanje je bilo odstranjeno iz \\u003Ca href=\\&quot;/history\\&quot;\\u003Ezgodovine iskanja\\u003C/a\\u003E&quot;,&quot;psrl&quot;:&quot;Odstrani&quot;,&quot;srch&quot;:&quot;Iskanje Google&quot;},&quot;ovr&quot;:{&quot;fm&quot;:1,&quot;o&quot;:1,&quot;pf&quot;:1,&quot;ps&quot;:1,&quot;sn&quot;:1,&quot;sw&quot;:1},&quot;pq&quot;:&quot;&quot;,&quot;scd&quot;:10,&quot;sce&quot;:5}],[152,{}],[65,{}],[213,{&quot;pberr&quot;:&quot;\\u003Cfont color=red\\u003ENapaka:\\u003C/font\\u003E Stre�nik ni mogel dokon�ati va�e zahteve. Poskusite znova �ez 30 sekund.&quot;}],[78,{}],[25,{&quot;g&quot;:8,&quot;k&quot;:false,&quot;m&quot;:{&quot;app&quot;:true,&quot;bks&quot;:true,&quot;blg&quot;:true,&quot;dsc&quot;:true,&quot;evn&quot;:true,&quot;fin&quot;:true,&quot;flm&quot;:true,&quot;frm&quot;:true,&quot;isch&quot;:true,&quot;klg&quot;:true,&quot;mbl&quot;:true,&quot;nws&quot;:true,&quot;plcs&quot;:true,&quot;ppl&quot;:true,&quot;prc&quot;:true,&quot;pts&quot;:true,&quot;rcp&quot;:true,&quot;shop&quot;:true,&quot;vid&quot;:true},&quot;t&quot;:null}],[216,{}],[105,{}],[22,{&quot;db&quot;:false,&quot;m_errors&quot;:{&quot;32&quot;:&quot;�al ni drugih rezultatov.&quot;,&quot;default&quot;:&quot;\\u003Cfont color=red\\u003ENapaka:\\u003C/font\\u003E Stre�nik ni mogel dokon�ati va�e zahteve. Poskusite znova �ez 30 sekund.&quot;},&quot;m_tip&quot;:&quot;Kliknite za ve� informacij&quot;,&quot;nlpm&quot;:&quot;-153px -84px&quot;,&quot;nlpp&quot;:&quot;-153px -70px&quot;,&quot;utp&quot;:false}],[77,{}],[146,{}],[144,{}],[84,{}],[24,{}],[38,{}]]);google.y.first.push(function(){if(google.med){google.med('init');google.initHistory();google.med('history');}google.History&amp;&amp;google.History.initialize('/')});if(google.j&amp;&amp;google.j.en&amp;&amp;google.j.xi){window.setTimeout(google.j.xi,0);}&lt;/script&gt;&lt;/div&gt;&lt;script&gt;(function(){\nvar b,d,e,f;function g(a,c){if(a.removeEventListener){a.removeEventListener(&quot;load&quot;,c,false);a.removeEventListener(&quot;error&quot;,c,false)}else{a.detachEvent(&quot;onload&quot;,c);a.detachEvent(&quot;onerror&quot;,c)}}function h(a){f=(new Date).getTime();++d;a=a||window.event;var c=a.target||a.srcElement;g(c,h)}var i=document.getElementsByTagName(&quot;img&quot;);b=i.length;d=0;for(var j=0,k;j&lt;b;++j){k=i[j];if(k.complete||typeof k.src!=&quot;string&quot;||!k.src)++d;else if(k.addEventListener){k.addEventListener(&quot;load&quot;,h,false);k.addEventListener(&quot;error&quot;,\nh,false)}else{k.attachEvent(&quot;onload&quot;,h);k.attachEvent(&quot;onerror&quot;,h)}}e=b-d;function l(){if(!google.timers.load.t)return;google.timers.load.t.ol=(new Date).getTime();google.timers.load.t.iml=f;google.kCSI.imc=d;google.kCSI.imn=b;google.kCSI.imp=e;if(google.stt!==undefined)google.kCSI.stt=google.stt;google.timers.load.t.xjs&amp;&amp;google.report&amp;&amp;google.report(google.timers.load,google.kCSI)}if(window.addEventListener)window.addEventListener(&quot;load&quot;,\nl,false);else if(window.attachEvent)window.attachEvent(&quot;onload&quot;,l);google.timers.load.t.prt=(f=(new Date).getTime());\n})();\n&lt;/script&gt;\n</code></pre>\n<p>I am using Eclipse.</p>\n"},{"tags":["java","apache","http","log4j"],"answers":[{"tags":[],"owner":{"account_id":24075,"reputation":29658,"user_id":60956,"accept_rate":85,"display_name":"Joel"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1299060750,"creation_date":1299060750,"answer_id":5165956,"question_id":5165916,"body_markdown":"Assuming you are using **httpclient 4**, doesn&#39;t adding something like [this][1] to your log4j.xml work:\r\n\r\n    &lt;logger name=&quot;org.apache.http&quot;&gt;\r\n      &lt;level value=&quot;warn&quot;/&gt; \r\n    &lt;/logger&gt;\r\n\r\nI you don&#39;t have a log4j.xml create one and it to your classpath.\r\n\r\n\r\nIf you&#39;re using **httpclient 3** then you&#39;ll have to use something like:\r\n\r\n    &lt;logger name=&quot;org.apache.commons.httpclient&quot;&gt;\r\n      &lt;level value=&quot;warn&quot;/&gt; \r\n    &lt;/logger&gt;\r\n\r\nIn these examples I&#39;ve set the level to **warn**, you might chose to use **none**, but a minimum of **error** would be sensible.\r\n\r\n  [1]: http://wiki.apache.org/logging-log4j/Log4jXmlFormat","title":"Disable logging of apache HTTP Client?","body":"<p>Assuming you are using <strong>httpclient 4</strong>, doesn't adding something like <a href=\"http://wiki.apache.org/logging-log4j/Log4jXmlFormat\" rel=\"noreferrer\">this</a> to your log4j.xml work:</p>\n\n<pre><code>&lt;logger name=\"org.apache.http\"&gt;\n  &lt;level value=\"warn\"/&gt; \n&lt;/logger&gt;\n</code></pre>\n\n<p>I you don't have a log4j.xml create one and it to your classpath.</p>\n\n<p>If you're using <strong>httpclient 3</strong> then you'll have to use something like:</p>\n\n<pre><code>&lt;logger name=\"org.apache.commons.httpclient\"&gt;\n  &lt;level value=\"warn\"/&gt; \n&lt;/logger&gt;\n</code></pre>\n\n<p>In these examples I've set the level to <strong>warn</strong>, you might chose to use <strong>none</strong>, but a minimum of <strong>error</strong> would be sensible.</p>\n"},{"tags":[],"owner":{"account_id":66254,"reputation":1284,"user_id":194493,"accept_rate":50,"display_name":"Paul Lysak"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1299060871,"creation_date":1299060871,"answer_id":5165975,"question_id":5165916,"body_markdown":"You can adjust logging level per package. Here is example from http://wiki.apache.org/logging-log4j/Log4jXmlFormat:\r\n\r\n    &lt;logger name=&quot;com.eatmutton.muttonsite.torque&quot; additivity=&quot;false&quot;&gt;\r\n       &lt;level value=&quot;info&quot; /&gt;\r\n       &lt;appender-ref ref=&quot;local-torque&quot; /&gt;\r\n    &lt;/logger&gt;\r\n\r\nSo, even if your default level is &quot;debug&quot;, for classes of com.eatmutton.muttonsite.torque package (and nested packages) the level would be &quot;info&quot;\r\nSo, you need to find out package to which HTTP client classes belong and add such record to your config.\r\n","title":"Disable logging of apache HTTP Client?","body":"<p>You can adjust logging level per package. Here is example from <a href=\"http://wiki.apache.org/logging-log4j/Log4jXmlFormat\" rel=\"nofollow\">http://wiki.apache.org/logging-log4j/Log4jXmlFormat</a>:</p>\n\n<pre><code>&lt;logger name=\"com.eatmutton.muttonsite.torque\" additivity=\"false\"&gt;\n   &lt;level value=\"info\" /&gt;\n   &lt;appender-ref ref=\"local-torque\" /&gt;\n&lt;/logger&gt;\n</code></pre>\n\n<p>So, even if your default level is \"debug\", for classes of com.eatmutton.muttonsite.torque package (and nested packages) the level would be \"info\"\nSo, you need to find out package to which HTTP client classes belong and add such record to your config.</p>\n"},{"tags":[],"owner":{"account_id":1807016,"reputation":573,"user_id":1643924,"display_name":"Pierre-Yves Saumont"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1360248657,"creation_date":1360248657,"answer_id":14753973,"question_id":5165916,"body_markdown":"The given answers are good examples of people answering questions they don&#39;t even understand. They just repeat what they have heard or read in poor documentations like the one from Apache HTTP client. Something like:\r\n\r\n    &lt;logger name=&quot;org.apache.commons.httpclient&quot;&gt;\r\n      &lt;level value=&quot;warn&quot;/&gt; \r\n    &lt;/logger&gt;\r\n\r\nis what should be done if the documentation of Apache HTTP client was right. In such case, the poster of this question would have resolved the problem himself. Giving such poor answers is kind of insulting.\r\n\r\nThe problem is that although the documentation says:\r\n\r\n&gt;Each class has its own log named according to the class&#39;s fully qualified name. \r\n&gt;For example the class HttpClient has a log named org.apache.commons.httpclient.HttpClient. \r\n&gt;Since all classes follow this convention it is possible to configure context logging for \r\n&gt;all classes using the single log named org.apache.commons.httpclient.\r\n\r\nit is simply not true. \r\n\r\nBetter than giving the answer is showing how to find it yourself. To find the solution, you have first to enable location in the log to see where the log happens. Then the logs will displays a line like:\r\n\r\n    2013-02-07 15:33:02,369 DEBUG [Some thread name] org.apache.commons.httpclient.Wire.wire(Wire.java:84) - &lt;&lt; &quot;[\\r]&quot;\r\n\r\nThis shows that logging is happening in class Wire.java, line 84. You may then open the sources in your favorite IDE and and you will see the following:\r\n\r\n    80    if (buffer.length() &gt; 0) {\r\n    81        buffer.append(&quot;\\&quot;&quot;);\r\n    82        buffer.insert(0, &quot;\\&quot;&quot;);\r\n    83        buffer.insert(0, header);\r\n    84        log.debug(buffer.toString()); // Log is happening here\r\n    85    }\r\n\r\nThe log variable holds the logger. Go to the place where this variables receives its value:\r\n\r\n    52 /** Log for any wire messages. */\r\n    53 private Log log;\r\n    54 \r\n    55 private Wire(Log log) {\r\n    56    this.log = log;\r\n    57 }\r\n\r\nAll you have to do now is to put a break point at line 56 and run your application in the debugger. When it stops at line 56, read the log value. As it is an object of type Log, open it an look at its &quot;name&quot; property. You will see the name &quot;httpclient&quot;. Obvioulsly, the Apache documentation is wrong.\r\n\r\nNow you can disable this logger with:\r\n\r\n    &lt;logger name=&quot;httpclient&quot;&gt;\r\n      &lt;level value=&quot;warn&quot;/&gt; \r\n    &lt;/logger&gt;\r\n\r\nThe conclusion is:\r\n\r\n - When possible, learn to find answer to your own question instead of asking.\r\n\r\n - Do not believe what everybody says. Naming the loggers by the fully qualified class name is a convention. Like all conventions, nobody is obliged to follow it. An Apache do not.\r\n\r\n - Do not answer question when you don&#39;t know the answer. This is only noise.\r\n\r\n","title":"Disable logging of apache HTTP Client?","body":"<p>The given answers are good examples of people answering questions they don't even understand. They just repeat what they have heard or read in poor documentations like the one from Apache HTTP client. Something like:</p>\n\n<pre><code>&lt;logger name=\"org.apache.commons.httpclient\"&gt;\n  &lt;level value=\"warn\"/&gt; \n&lt;/logger&gt;\n</code></pre>\n\n<p>is what should be done if the documentation of Apache HTTP client was right. In such case, the poster of this question would have resolved the problem himself. Giving such poor answers is kind of insulting.</p>\n\n<p>The problem is that although the documentation says:</p>\n\n<blockquote>\n  <p>Each class has its own log named according to the class's fully qualified name. \n  For example the class HttpClient has a log named org.apache.commons.httpclient.HttpClient. \n  Since all classes follow this convention it is possible to configure context logging for \n  all classes using the single log named org.apache.commons.httpclient.</p>\n</blockquote>\n\n<p>it is simply not true. </p>\n\n<p>Better than giving the answer is showing how to find it yourself. To find the solution, you have first to enable location in the log to see where the log happens. Then the logs will displays a line like:</p>\n\n<pre><code>2013-02-07 15:33:02,369 DEBUG [Some thread name] org.apache.commons.httpclient.Wire.wire(Wire.java:84) - &lt;&lt; \"[\\r]\"\n</code></pre>\n\n<p>This shows that logging is happening in class Wire.java, line 84. You may then open the sources in your favorite IDE and and you will see the following:</p>\n\n<pre><code>80    if (buffer.length() &gt; 0) {\n81        buffer.append(\"\\\"\");\n82        buffer.insert(0, \"\\\"\");\n83        buffer.insert(0, header);\n84        log.debug(buffer.toString()); // Log is happening here\n85    }\n</code></pre>\n\n<p>The log variable holds the logger. Go to the place where this variables receives its value:</p>\n\n<pre><code>52 /** Log for any wire messages. */\n53 private Log log;\n54 \n55 private Wire(Log log) {\n56    this.log = log;\n57 }\n</code></pre>\n\n<p>All you have to do now is to put a break point at line 56 and run your application in the debugger. When it stops at line 56, read the log value. As it is an object of type Log, open it an look at its \"name\" property. You will see the name \"httpclient\". Obvioulsly, the Apache documentation is wrong.</p>\n\n<p>Now you can disable this logger with:</p>\n\n<pre><code>&lt;logger name=\"httpclient\"&gt;\n  &lt;level value=\"warn\"/&gt; \n&lt;/logger&gt;\n</code></pre>\n\n<p>The conclusion is:</p>\n\n<ul>\n<li><p>When possible, learn to find answer to your own question instead of asking.</p></li>\n<li><p>Do not believe what everybody says. Naming the loggers by the fully qualified class name is a convention. Like all conventions, nobody is obliged to follow it. An Apache do not.</p></li>\n<li><p>Do not answer question when you don't know the answer. This is only noise.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3723758,"reputation":11894,"user_id":3600553,"accept_rate":71,"display_name":"Du-Lacoste"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699444483,"creation_date":1699444483,"answer_id":77445309,"question_id":5165916,"body_markdown":"You could do the below:\r\n\r\nEdit `logback.xml` to include the below:\r\n\r\n    &lt;configuration&gt;\r\n        &lt;logger name=&quot;org.apache&quot; level=&quot;WARN&quot; /&gt;\r\n        &lt;logger name=&quot;httpclient&quot; level=&quot;WARN&quot; /&gt; \r\n    &lt;/configuration&gt;\r\n\r\nIf using `log4j.properties`, then edit and add the below:\r\n\r\n    log4j.logger.httpclient.wire.header=WARN\r\n    log4j.logger.httpclient.wire.content=WARN","title":"Disable logging of apache HTTP Client?","body":"<p>You could do the below:</p>\n<p>Edit <code>logback.xml</code> to include the below:</p>\n<pre><code>&lt;configuration&gt;\n    &lt;logger name=&quot;org.apache&quot; level=&quot;WARN&quot; /&gt;\n    &lt;logger name=&quot;httpclient&quot; level=&quot;WARN&quot; /&gt; \n&lt;/configuration&gt;\n</code></pre>\n<p>If using <code>log4j.properties</code>, then edit and add the below:</p>\n<pre><code>log4j.logger.httpclient.wire.header=WARN\nlog4j.logger.httpclient.wire.content=WARN\n</code></pre>\n"}],"owner":{"account_id":161264,"reputation":1543,"user_id":381878,"accept_rate":48,"display_name":"user381878"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14850,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":4,"score":7,"last_activity_date":1699444483,"creation_date":1299060488,"question_id":5165916,"body_markdown":"I am writing an application in which I am uploading a file using HTTP protocol to a server. Everything is working fine and I am able to upload the file, I have used Apache HTTP client jar set to accomplish this. In the application I have used log4j logging framework which has been set to DEBUG level, by default Apache HTTP Client has also picked up the same logging framework with same logging level and it is producing tons of logs. Can anyone guide me how I can i disable logging of apache Http client?\r\n\r\nI am configuring log4j with the help of an XML file name log4j.xml.","title":"Disable logging of apache HTTP Client?","body":"<p>I am writing an application in which I am uploading a file using HTTP protocol to a server. Everything is working fine and I am able to upload the file, I have used Apache HTTP client jar set to accomplish this. In the application I have used log4j logging framework which has been set to DEBUG level, by default Apache HTTP Client has also picked up the same logging framework with same logging level and it is producing tons of logs. Can anyone guide me how I can i disable logging of apache Http client?</p>\n\n<p>I am configuring log4j with the help of an XML file name log4j.xml.</p>\n"},{"tags":["java","garbage-collection"],"comments":[{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":4,"creation_date":1699437541,"post_id":77444428,"comment_id":136530259,"body_markdown":"`System.gc` - [suggests, best effort etc.](https://docs.oracle.com/javase/8/docs/api/java/lang/System.html#gc--) - whether the JVM decides to do anything here is implementation (configuration, weather &amp; phase of moon) dependent.","body":"<code>System.gc</code> - <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/System.html#gc--\" rel=\"nofollow noreferrer\">suggests, best effort etc.</a> - whether the JVM decides to do anything here is implementation (configuration, weather &amp; phase of moon) dependent."},{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":2,"creation_date":1699437798,"post_id":77444428,"comment_id":136530302,"body_markdown":"If you want to poke around in the guts of the GC, you can enable verbose garbage collection logging. But be prepared for lots of guts.","body":"If you want to poke around in the guts of the GC, you can enable verbose garbage collection logging. But be prepared for lots of guts."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":5,"creation_date":1699439253,"post_id":77444428,"comment_id":136530570,"body_markdown":"First of all, we do not know whether the reference you’re setting to `null` is the last reference to the particular object. Even if it is, the garbage collection behavior depends on the history of the object, when it has been created, when it was used for the last time, etc. We don’t know anything about this scenario; all we see, is code setting the first five elements of an array to `null`.","body":"First of all, we do not know whether the reference you’re setting to <code>null</code> is the last reference to the particular object. Even if it is, the garbage collection behavior depends on the history of the object, when it has been created, when it was used for the last time, etc. We don’t know anything about this scenario; all we see, is code setting the first five elements of an array to <code>null</code>."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":3,"creation_date":1699443700,"post_id":77444428,"comment_id":136531362,"body_markdown":"Given finalizers are deprecated and might get removed in future Java versions, you might be better off not learning how they work and how you can use them. Learn about `Cleaner` instead.","body":"Given finalizers are deprecated and might get removed in future Java versions, you might be better off not learning how they work and how you can use them. Learn about <code>Cleaner</code> instead."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1699443914,"post_id":77444428,"comment_id":136531388,"body_markdown":"In any case, it is entirely possible that in the first example tank 0 was promoted to the tenured generation, and in the second example tanks 0 - 3 were promoted to the tenured generation, while tank 4 was still in the young/eden generation. Or they were in different regions, and the GC decide to GC one region, but not the other ,etc.","body":"In any case, it is entirely possible that in the first example tank 0 was promoted to the tenured generation, and in the second example tanks 0 - 3 were promoted to the tenured generation, while tank 4 was still in the young/eden generation. Or they were in different regions, and the GC decide to GC one region, but not the other ,etc."},{"owner":{"account_id":28595432,"reputation":31,"user_id":21893705,"display_name":"KonstantinosTrimikliniotis"},"score":0,"creation_date":1699454833,"post_id":77444428,"comment_id":136533719,"body_markdown":"@Holger thank you for the answer, all I had in my code is this array with 5 tanks each of them was isntantiated and then assigned to null. As I can see from the answers the only way to work with gc is to admit that you can&#39;t be sure about anything)","body":"@Holger thank you for the answer, all I had in my code is this array with 5 tanks each of them was isntantiated and then assigned to null. As I can see from the answers the only way to work with gc is to admit that you can&#39;t be sure about anything)"},{"owner":{"account_id":28595432,"reputation":31,"user_id":21893705,"display_name":"KonstantinosTrimikliniotis"},"score":0,"creation_date":1699455139,"post_id":77444428,"comment_id":136533799,"body_markdown":"@teapot418 I&#39;ll try, thank you for your comment!","body":"@teapot418 I&#39;ll try, thank you for your comment!"}],"answers":[{"tags":[],"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1699443492,"creation_date":1699443492,"answer_id":77445213,"question_id":77444428,"body_markdown":"&gt;If garbage collector comes, doesn&#39;t it collect all &quot;dead&quot; links?\r\n\r\nShort answer: no\r\n\r\nLonger answer: there are no guarantees of what will happen at garbage collection time. You have to understand that modern JVMs have implemented several GC algorithms which are usually very complex. What they will do and when will vary wildly. We don&#39;t which one your version of the JVM in your particular environment is using right now. One thing these complex algorithms try to avoid is doing a full garbage collection, where most objects that are not referenced are garbage collected. That&#39;s because such full GC events mean that the JVM needs to be stopped for some time to ensure everything is consistent. Those pause impact application performance and can cause issues like timeouts or freezes. Developers of GC algorithms try very hard to avoid those issues. So you should not assume a GC implementation will work in the way you are expecting.\r\n\r\nI recommend to read about the different GC algorithms current JVM implement to understand better their complexities.","title":"Overriden method finalize() isn&#39;t called for all of the garbage objects","body":"<blockquote>\n<p>If garbage collector comes, doesn't it collect all &quot;dead&quot; links?</p>\n</blockquote>\n<p>Short answer: no</p>\n<p>Longer answer: there are no guarantees of what will happen at garbage collection time. You have to understand that modern JVMs have implemented several GC algorithms which are usually very complex. What they will do and when will vary wildly. We don't which one your version of the JVM in your particular environment is using right now. One thing these complex algorithms try to avoid is doing a full garbage collection, where most objects that are not referenced are garbage collected. That's because such full GC events mean that the JVM needs to be stopped for some time to ensure everything is consistent. Those pause impact application performance and can cause issues like timeouts or freezes. Developers of GC algorithms try very hard to avoid those issues. So you should not assume a GC implementation will work in the way you are expecting.</p>\n<p>I recommend to read about the different GC algorithms current JVM implement to understand better their complexities.</p>\n"}],"owner":{"account_id":28595432,"reputation":31,"user_id":21893705,"display_name":"KonstantinosTrimikliniotis"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1699475363,"accepted_answer_id":77445213,"answer_count":1,"score":0,"last_activity_date":1699443492,"creation_date":1699436979,"question_id":77444428,"body_markdown":"I have a class Tank that has an overridden method finalize(), which prints the message:\r\n\r\n\r\n```\r\n@Override\r\nprotected void finalize() {\r\n\tif (full) {  // -full : boolean\r\n\t\tSystem.out.println(&quot;Error: tank &quot; + id + &quot; must be empty at cleanup&quot;); // -id: int\r\n\t}\r\n\telse { \r\n\t\tSystem.out.println(&quot;Tank &quot; + id + &quot; cleaned up OK&quot;);  // -id: int\r\n\t}\r\n}\r\n```\r\nThen I create an array with Tanks and instatiate each of them and in a loop I am deleting every link:\r\n\r\n```\r\nfor (int i = 0; i &lt; 5; i++) {\r\n\ttanks[i] = null;\r\n}\r\nSystem.gc()\r\n```\r\n\r\n\r\nEvery run I get a different combination of messages. I understand that I cannot be sure if the call `System.gc()` brings the garbage collector, however why do I have messages only for some objects but not for all? If garbage collector comes, doesn&#39;t it collect all &quot;dead&quot; links?\r\n\r\nExamples of the output:\r\n1) No 0 tank\r\n```\r\nTank 4 cleaned up OK\r\nTank 3 cleaned up OK\r\nError: tank 2 must be empty at cleanup\r\nError: tank 1 must be empty at cleanup\r\n```\r\n2) Only tank 4: \r\n\r\n```\r\nTank 4 cleaned up OK\r\n```","title":"Overriden method finalize() isn&#39;t called for all of the garbage objects","body":"<p>I have a class Tank that has an overridden method finalize(), which prints the message:</p>\n<pre><code>@Override\nprotected void finalize() {\n    if (full) {  // -full : boolean\n        System.out.println(&quot;Error: tank &quot; + id + &quot; must be empty at cleanup&quot;); // -id: int\n    }\n    else { \n        System.out.println(&quot;Tank &quot; + id + &quot; cleaned up OK&quot;);  // -id: int\n    }\n}\n</code></pre>\n<p>Then I create an array with Tanks and instatiate each of them and in a loop I am deleting every link:</p>\n<pre><code>for (int i = 0; i &lt; 5; i++) {\n    tanks[i] = null;\n}\nSystem.gc()\n</code></pre>\n<p>Every run I get a different combination of messages. I understand that I cannot be sure if the call <code>System.gc()</code> brings the garbage collector, however why do I have messages only for some objects but not for all? If garbage collector comes, doesn't it collect all &quot;dead&quot; links?</p>\n<p>Examples of the output:</p>\n<ol>\n<li>No 0 tank</li>\n</ol>\n<pre><code>Tank 4 cleaned up OK\nTank 3 cleaned up OK\nError: tank 2 must be empty at cleanup\nError: tank 1 must be empty at cleanup\n</code></pre>\n<ol start=\"2\">\n<li>Only tank 4:</li>\n</ol>\n<pre><code>Tank 4 cleaned up OK\n</code></pre>\n"},{"tags":["java","predicate","aerospike"],"answers":[{"comments":[{"owner":{"account_id":20336063,"reputation":1,"user_id":14916732,"display_name":"Avanish Ghosh"},"score":0,"creation_date":1700029227,"post_id":77445101,"comment_id":136603383,"body_markdown":"Thanks for the Reply Roi. One small problem here though is that your solution specifies using the Expression class whereas i want to use the Filter class to achieve the same behaviour. Would that be possible?","body":"Thanks for the Reply Roi. One small problem here though is that your solution specifies using the Expression class whereas i want to use the Filter class to achieve the same behaviour. Would that be possible?"},{"owner":{"account_id":20706132,"reputation":795,"user_id":15203960,"display_name":"Roi Menashe"},"score":0,"creation_date":1700039700,"post_id":77445101,"comment_id":136604825,"body_markdown":"You mentioned Filter Expression, which you set via Expression class in the QueryPolicy.\nFilter class is part of the Statement class and its a filter which utilizes a secondary index (make sure you have a secondary index on the field you wish to query)\nAn example of setting a Filter: \nStatement stmt = new Statement();\nstmt.setNamespace(namespace);\nstmt.setSetName(set);\nstmt.setFilter(Filter.equal(binName, &quot;value&quot;));\nRecordSet rs = client.query(null, stmt);\nYou can also read about secondary index based query on: https://developer.aerospike.com/client/usage/queries/basic/secondary","body":"You mentioned Filter Expression, which you set via Expression class in the QueryPolicy. Filter class is part of the Statement class and its a filter which utilizes a secondary index (make sure you have a secondary index on the field you wish to query) An example of setting a Filter:  Statement stmt = new Statement(); stmt.setNamespace(namespace); stmt.setSetName(set); stmt.setFilter(Filter.equal(binName, &quot;value&quot;)); RecordSet rs = client.query(null, stmt); You can also read about secondary index based query on: <a href=\"https://developer.aerospike.com/client/usage/queries/basic/secondary\" rel=\"nofollow noreferrer\">developer.aerospike.com/client/usage/queries/basic/secondary</a>"}],"tags":[],"owner":{"account_id":20706132,"reputation":795,"user_id":15203960,"display_name":"Roi Menashe"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1699442489,"creation_date":1699442489,"answer_id":77445101,"question_id":77444639,"body_markdown":"Aerospike Filter Expression for &quot;not equal&quot; is `ne`, checkout: https://docs.aerospike.com/server/guide/expressions/comparison#ne\r\n\r\nAlso a good place to look is the Aerospike Java Client project on GitHub: https://github.com/aerospike/aerospike-client-java\r\nIt contains some tests and code examples that uses `ne`.\r\n\r\nFor example, the code below find records where bin `age` is not an integer.\r\n\r\n```java\r\nExpression exp = Exp.build(\r\n  Exp.ne(Exp.binType(&quot;age&quot;), Exp.val(ParticleType.INTEGER)\r\n```\r\n\r\nFor your case it would be something like:\r\n\r\n```java\r\nExp.ne(Exp.stringBin(&quot;binName&quot;), Exp.val(&quot;stringValue&quot;))\r\n```","title":"Not Equals Replacement for Aerospike","body":"<p>Aerospike Filter Expression for &quot;not equal&quot; is <code>ne</code>, checkout: <a href=\"https://docs.aerospike.com/server/guide/expressions/comparison#ne\" rel=\"nofollow noreferrer\">https://docs.aerospike.com/server/guide/expressions/comparison#ne</a></p>\n<p>Also a good place to look is the Aerospike Java Client project on GitHub: <a href=\"https://github.com/aerospike/aerospike-client-java\" rel=\"nofollow noreferrer\">https://github.com/aerospike/aerospike-client-java</a>\nIt contains some tests and code examples that uses <code>ne</code>.</p>\n<p>For example, the code below find records where bin <code>age</code> is not an integer.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Expression exp = Exp.build(\n  Exp.ne(Exp.binType(&quot;age&quot;), Exp.val(ParticleType.INTEGER)\n</code></pre>\n<p>For your case it would be something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Exp.ne(Exp.stringBin(&quot;binName&quot;), Exp.val(&quot;stringValue&quot;))\n</code></pre>\n"}],"owner":{"account_id":20336063,"reputation":1,"user_id":14916732,"display_name":"Avanish Ghosh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699442489,"creation_date":1699438745,"question_id":77444639,"body_markdown":"Since PredExps have been deprecated since aerospike client version 6.x.x onwards for Java, what is the corresponding Filter Expression replacement for the notEquals functionality that PredExps provided?\r\n\r\nFor example:\r\n```\r\npredicate = Arrays.asList(PredExp.stringBin(key), PredExp.stringValue(String.valueOf(value)),PredExp.stringEqual(),PredExp.not());\r\n```\r\nWhat is the Filter Expression equivalent of this?\r\n\r\nI tried using a combination of Filter Expression for this but even that is not working.","title":"Not Equals Replacement for Aerospike","body":"<p>Since PredExps have been deprecated since aerospike client version 6.x.x onwards for Java, what is the corresponding Filter Expression replacement for the notEquals functionality that PredExps provided?</p>\n<p>For example:</p>\n<pre><code>predicate = Arrays.asList(PredExp.stringBin(key), PredExp.stringValue(String.valueOf(value)),PredExp.stringEqual(),PredExp.not());\n</code></pre>\n<p>What is the Filter Expression equivalent of this?</p>\n<p>I tried using a combination of Filter Expression for this but even that is not working.</p>\n"},{"tags":["java","eclipse"],"answers":[{"tags":[],"owner":{"account_id":450895,"reputation":3302,"user_id":846471,"accept_rate":62,"display_name":"Jon Martin"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1312315033,"creation_date":1312315033,"answer_id":6917824,"question_id":6917802,"body_markdown":"The jar file is just an executable java program. If you want to modify the code, you have to open the .java files.","title":"how to open a jar file in Eclipse","body":"<p>The jar file is just an executable java program. If you want to modify the code, you have to open the .java files.</p>\n"},{"tags":[],"owner":{"account_id":114991,"reputation":69738,"user_id":302139,"accept_rate":75,"display_name":"Edwin Buck"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1312315134,"creation_date":1312315134,"answer_id":6917847,"question_id":6917802,"body_markdown":"A project is not exactly the same thing as an executable jar file.\r\n\r\nFor starters, a project generally contains source code, while an executable jar file generally doesn&#39;t.  Again, generally speaking, you need to export an Eclipse project to obtain a file suitable for importing.","title":"how to open a jar file in Eclipse","body":"<p>A project is not exactly the same thing as an executable jar file.</p>\n\n<p>For starters, a project generally contains source code, while an executable jar file generally doesn't.  Again, generally speaking, you need to export an Eclipse project to obtain a file suitable for importing.</p>\n"},{"tags":[],"owner":{"account_id":420891,"reputation":11018,"user_id":798818,"accept_rate":91,"display_name":"Mob"},"comment_count":0,"down_vote_count":1,"up_vote_count":7,"is_accepted":true,"score":6,"last_activity_date":1312315393,"creation_date":1312315393,"answer_id":6917899,"question_id":6917802,"body_markdown":"Since the jar file &#39;executes&#39; then it contains compiled java files known as .class files. You cannot import it to eclipse and modify the code. You should ask the supplier of the &quot;demo&quot;  for the &quot;source code&quot;. (or check the page you got the demo from for the source code)\r\n\r\nUnless, you want to decompile the .class files and import to Eclipse.  That may not be the case for starters. ","title":"how to open a jar file in Eclipse","body":"<p>Since the jar file 'executes' then it contains compiled java files known as .class files. You cannot import it to eclipse and modify the code. You should ask the supplier of the \"demo\"  for the \"source code\". (or check the page you got the demo from for the source code)</p>\n\n<p>Unless, you want to decompile the .class files and import to Eclipse.  That may not be the case for starters. </p>\n"},{"tags":[],"owner":{"account_id":3864325,"reputation":187,"user_id":3201213,"accept_rate":57,"display_name":"Mani"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1699442129,"creation_date":1432638076,"answer_id":30456672,"question_id":6917802,"body_markdown":"Use a Java decompiler. http://jd.benow.ca/. you can open the jar files.\r\n\r\n","title":"how to open a jar file in Eclipse","body":"<p>Use a Java decompiler. <a href=\"http://jd.benow.ca/\" rel=\"nofollow noreferrer\">http://jd.benow.ca/</a>. you can open the jar files.</p>\n"},{"comments":[{"owner":{"account_id":18508511,"reputation":99,"user_id":13484290,"display_name":"zara"},"score":0,"creation_date":1606316861,"post_id":37605759,"comment_id":114928614,"body_markdown":"I followed these steps to download the JD-Eclipse, I&#39;m still not seeing the java code.  \n    Download JD-Eclipse ZIP file,\n    Launch Eclipse,\n    Click on &quot;Help &gt; Install New Software...&quot;,\n    Drag and drop ZIP file on dialog windows,\n    Check &quot;Java Decompiler Eclipse Plug-in&quot;,\n    Click on &quot;Next&quot; and &quot;Finish&quot; buttons,\nA warning dialog windows appear because &quot;org.jd.ide.eclipse.plugin_x.y.z.jar&quot; is not signed. Click on &quot;Install anyway&quot; button.   Please help","body":"I followed these steps to download the JD-Eclipse, I&#39;m still not seeing the java code.       Download JD-Eclipse ZIP file,     Launch Eclipse,     Click on &quot;Help &gt; Install New Software...&quot;,     Drag and drop ZIP file on dialog windows,     Check &quot;Java Decompiler Eclipse Plug-in&quot;,     Click on &quot;Next&quot; and &quot;Finish&quot; buttons, A warning dialog windows appear because &quot;org.jd.ide.eclipse.plugin_x.y.z.jar&quot; is not signed. Click on &quot;Install anyway&quot; button.   Please help"},{"owner":{"account_id":18508511,"reputation":99,"user_id":13484290,"display_name":"zara"},"score":0,"creation_date":1606316946,"post_id":37605759,"comment_id":114928665,"body_markdown":"Is JAD-Eclipse same as JDEclipse?","body":"Is JAD-Eclipse same as JDEclipse?"}],"tags":[],"owner":{"account_id":6597593,"reputation":89,"user_id":5096834,"display_name":"Gaurav Singh"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1505976347,"creation_date":1464927018,"answer_id":37605759,"question_id":6917802,"body_markdown":"Try JadClipse.It will open all your .class file. Add library to your project and when you try to open any object declared in the lib file it will open just like your .java file.\r\n\r\nIn eclipse-&gt;help-&gt; marketplace -&gt; go to popular tab.\r\nThere you can find plugins for the same. \r\n\r\nUpdate: For those who are unable to find above plug-in, try downloading this: https://github.com/java-decompiler/jd-eclipse/releases/download/v1.0.0/jd-eclipse-site-1.0.0-RC2.zip\r\n\r\nThen import it into Eclipse.\r\n\r\nIf you have issues importing above plug-in, refer: https://stackoverflow.com/questions/5482554/how-to-install-plugin-for-eclipse-from-zip","title":"how to open a jar file in Eclipse","body":"<p>Try JadClipse.It will open all your .class file. Add library to your project and when you try to open any object declared in the lib file it will open just like your .java file.</p>\n\n<p>In eclipse->help-> marketplace -> go to popular tab.\nThere you can find plugins for the same. </p>\n\n<p>Update: For those who are unable to find above plug-in, try downloading this: <a href=\"https://github.com/java-decompiler/jd-eclipse/releases/download/v1.0.0/jd-eclipse-site-1.0.0-RC2.zip\" rel=\"nofollow noreferrer\">https://github.com/java-decompiler/jd-eclipse/releases/download/v1.0.0/jd-eclipse-site-1.0.0-RC2.zip</a></p>\n\n<p>Then import it into Eclipse.</p>\n\n<p>If you have issues importing above plug-in, refer: <a href=\"https://stackoverflow.com/questions/5482554/how-to-install-plugin-for-eclipse-from-zip\">How to install plugin for Eclipse from .zip</a></p>\n"},{"tags":[],"owner":{"account_id":4116853,"reputation":10757,"user_id":3378204,"accept_rate":91,"display_name":"Eugene"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1476687343,"creation_date":1476687343,"answer_id":40080171,"question_id":6917802,"body_markdown":"Firstly, it&#39;s necessary to know what is a jar file.\r\n\r\nFrom [Oracle][1],\r\n\r\n&gt; JAR (Java Archive) is a platform-independent file format that\r\n&gt; aggregates many files into one. Multiple Java applets and their\r\n&gt; requisite components (.class files, images and sounds) can be bundled\r\n&gt; in a JAR file and subsequently downloaded to a browser in a single\r\n&gt; HTTP transaction, greatly improving the download speed. The JAR format\r\n&gt; also supports compression, which reduces the file size, further\r\n&gt; improving the download time.\r\n\r\nAs you can see, \r\n\r\n 1. It has nothing to do with a Eclipse project. An Eclipse project can be a Java project, C++ project and so on. It&#39;s just a self contain project that can be recognized and operated as an unit by Eclipse.\r\n 2. The .class files are generally the main part of a jar file. It&#39;s impossible to view the source code(.java file) unless you decompile the executable file(.class file) by some tools. Take Eclipse for example, you can choose the plugin [Eclipse Class Decompiler][2] as the tool.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/technotes/guides/jar/index.html\r\n  [2]: https://marketplace.eclipse.org/content/eclipse-class-decompiler","title":"how to open a jar file in Eclipse","body":"<p>Firstly, it's necessary to know what is a jar file.</p>\n\n<p>From <a href=\"http://docs.oracle.com/javase/6/docs/technotes/guides/jar/index.html\" rel=\"nofollow\">Oracle</a>,</p>\n\n<blockquote>\n  <p>JAR (Java Archive) is a platform-independent file format that\n  aggregates many files into one. Multiple Java applets and their\n  requisite components (.class files, images and sounds) can be bundled\n  in a JAR file and subsequently downloaded to a browser in a single\n  HTTP transaction, greatly improving the download speed. The JAR format\n  also supports compression, which reduces the file size, further\n  improving the download time.</p>\n</blockquote>\n\n<p>As you can see, </p>\n\n<ol>\n<li>It has nothing to do with a Eclipse project. An Eclipse project can be a Java project, C++ project and so on. It's just a self contain project that can be recognized and operated as an unit by Eclipse.</li>\n<li>The .class files are generally the main part of a jar file. It's impossible to view the source code(.java file) unless you decompile the executable file(.class file) by some tools. Take Eclipse for example, you can choose the plugin <a href=\"https://marketplace.eclipse.org/content/eclipse-class-decompiler\" rel=\"nofollow\">Eclipse Class Decompiler</a> as the tool.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6146857,"reputation":1390,"user_id":4792543,"accept_rate":77,"display_name":"Spider"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1602141173,"creation_date":1602141173,"answer_id":64257485,"question_id":6917802,"body_markdown":"there is an Eclipse app called Import Jar As Project. I think it is quite simple and useful. [https://marketplace.eclipse.org/content/import-jar-project?mpc=true&amp;mpc_state=][1]\r\n\r\n\r\n  [1]: https://marketplace.eclipse.org/content/import-jar-project?mpc=true&amp;mpc_state=","title":"how to open a jar file in Eclipse","body":"<p>there is an Eclipse app called Import Jar As Project. I think it is quite simple and useful. <a href=\"https://marketplace.eclipse.org/content/import-jar-project?mpc=true&amp;mpc_state=\" rel=\"nofollow noreferrer\">https://marketplace.eclipse.org/content/import-jar-project?mpc=true&amp;mpc_state=</a></p>\n"}],"owner":{"account_id":315321,"reputation":947,"user_id":630983,"accept_rate":96,"display_name":"user630983"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":129719,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":6917899,"answer_count":7,"score":6,"last_activity_date":1699442129,"creation_date":1312314927,"question_id":6917802,"body_markdown":"I downloaded a demo jar file, and would like to open it in eclipse. What I did is\r\n\r\n&gt; import-&gt;Existing projects into workspace -&gt;select archive file\r\n\r\nHowever, the eclipse returns &quot;No projects are found to import&quot;.\r\n\r\nAs command line, I type \r\n\r\n&gt; java -jar projectDemo.jar\r\n\r\nThis jar file just functions well. So it seems to me that jar file itself is OK, but how can I open it in Eclipse and modify this demo code? Thanks.","title":"how to open a jar file in Eclipse","body":"<p>I downloaded a demo jar file, and would like to open it in eclipse. What I did is</p>\n\n<blockquote>\n  <p>import->Existing projects into workspace ->select archive file</p>\n</blockquote>\n\n<p>However, the eclipse returns \"No projects are found to import\".</p>\n\n<p>As command line, I type </p>\n\n<blockquote>\n  <p>java -jar projectDemo.jar</p>\n</blockquote>\n\n<p>This jar file just functions well. So it seems to me that jar file itself is OK, but how can I open it in Eclipse and modify this demo code? Thanks.</p>\n"},{"tags":["java","spring","spring-boot","enums"],"answers":[{"comments":[{"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"score":0,"creation_date":1699344189,"post_id":77436444,"comment_id":136516462,"body_markdown":"Sorry I update the question the issue is persisting the ENUM&#39;s not getting them.","body":"Sorry I update the question the issue is persisting the ENUM&#39;s not getting them."},{"owner":{"account_id":26555431,"reputation":558,"user_id":20184128,"display_name":"berse2212"},"score":0,"creation_date":1699344438,"post_id":77436444,"comment_id":136516493,"body_markdown":"@JsonValue should still be the answer. However if you want to have case-insensitivity you need to have Taxa as a String and parse it by hand.","body":"@JsonValue should still be the answer. However if you want to have case-insensitivity you need to have Taxa as a String and parse it by hand."},{"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"score":0,"creation_date":1699344512,"post_id":77436444,"comment_id":136516502,"body_markdown":"use `@JsonValue` on a setTaxa setter?","body":"use <code>@JsonValue</code> on a setTaxa setter?"},{"owner":{"account_id":26555431,"reputation":558,"user_id":20184128,"display_name":"berse2212"},"score":0,"creation_date":1699347082,"post_id":77436444,"comment_id":136516888,"body_markdown":"I think putting it on the field instead should work fine.","body":"I think putting it on the field instead should work fine."}],"tags":[],"owner":{"account_id":26555431,"reputation":558,"user_id":20184128,"display_name":"berse2212"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1699344000,"creation_date":1699344000,"answer_id":77436444,"question_id":77436327,"body_markdown":"Annotate the corresponding field with `com.fasterxml.jackson.annotation.JsonValue` like this:\r\n\r\n    public enum Taxa {\r\n    \tBROWN_BIRD(&quot;Brown Bird&quot;),\r\n    \tGREAT_BIRD(&quot;Great Bird&quot;),\r\n    \tSMALL(&quot;Small&quot;);\r\n    \r\n    \t\r\n    \tprivate final String label;\r\n    \r\n    \tTaxa(String label) {\r\n    \t\tthis.label = label;\r\n    \t}\r\n    \r\n        @JsonValue\r\n    \tpublic String getLabel() {\r\n    \t\treturn this.label;\r\n    \t}\r\n    }\r\n\r\nThe fitting Baeldung article is here: https://www.baeldung.com/jackson-annotations","title":"Spring Boot Enum display names to and from the View","body":"<p>Annotate the corresponding field with <code>com.fasterxml.jackson.annotation.JsonValue</code> like this:</p>\n<pre><code>public enum Taxa {\n    BROWN_BIRD(&quot;Brown Bird&quot;),\n    GREAT_BIRD(&quot;Great Bird&quot;),\n    SMALL(&quot;Small&quot;);\n\n    \n    private final String label;\n\n    Taxa(String label) {\n        this.label = label;\n    }\n\n    @JsonValue\n    public String getLabel() {\n        return this.label;\n    }\n}\n</code></pre>\n<p>The fitting Baeldung article is here: <a href=\"https://www.baeldung.com/jackson-annotations\" rel=\"nofollow noreferrer\">https://www.baeldung.com/jackson-annotations</a></p>\n"}],"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77436444,"answer_count":1,"score":0,"last_activity_date":1699441780,"creation_date":1699342811,"question_id":77436327,"body_markdown":"I want to convert my `Enum` snake case values to, and from human readable values in the view in my Spring Boot 3 project. \r\n\r\nThe environment is Spring Boot 3, MySQL 8 with the associated Jackson and Hibernate dependencies. I am working with React for the front end.\r\n\r\nI have read Baedungs article [here][1], but I am none the wiser despite having implemented a &quot;label&quot; - it may also be that I am using DTO&#39;s with nested classes and perhaps this extra layer is causing confusion.\r\n\r\nMy setup:\r\n\r\n**Bird Domain Class**\r\n    \r\n    public class Bird {\r\n        @Id\r\n        private Long id;\r\n\r\n        private String name;\r\n\r\n        @Enumerated(EnumType.STRING)\r\n        private Taxa taxa;\r\n\t}\r\n\r\n**Enum Taxa**\r\n\r\n    public enum Taxa {\r\n\r\n        BROWN_BIRD(&quot;Brown Bird&quot;),\r\n        GREAT_BIRD(&quot;Great Bird&quot;),\r\n        SMALL(&quot;Small&quot;);\r\n\r\n        private final String label;\r\n    \r\n        Taxa(String label) {\r\n            this.label = label;\r\n        }\r\n    \r\n        public String getLabel() {\r\n            return this.label;\r\n        }\r\n    }\r\n\r\nAnd then used in the view I have a DTO class:\r\n\r\n**BirdDTO**\r\n\r\n    public class BirdDto {\r\n       public Long id;\r\n       public String name;\r\n       public Taxa taxa;\r\n       ...\r\n       public String getTaxa() { return taxa.getLabel(); }\r\n\t}\r\n\r\nI can get the display labels, but how can I use the display values from the react view to persist enums and ideally do it in a case-insensitive way to make the code more robust.\r\n\r\n\r\n  [1]: https://www.baeldung.com/java-enum-values","title":"Spring Boot Enum display names to and from the View","body":"<p>I want to convert my <code>Enum</code> snake case values to, and from human readable values in the view in my Spring Boot 3 project.</p>\n<p>The environment is Spring Boot 3, MySQL 8 with the associated Jackson and Hibernate dependencies. I am working with React for the front end.</p>\n<p>I have read Baedungs article <a href=\"https://www.baeldung.com/java-enum-values\" rel=\"nofollow noreferrer\">here</a>, but I am none the wiser despite having implemented a &quot;label&quot; - it may also be that I am using DTO's with nested classes and perhaps this extra layer is causing confusion.</p>\n<p>My setup:</p>\n<p><strong>Bird Domain Class</strong></p>\n<pre><code>public class Bird {\n    @Id\n    private Long id;\n\n    private String name;\n\n    @Enumerated(EnumType.STRING)\n    private Taxa taxa;\n}\n</code></pre>\n<p><strong>Enum Taxa</strong></p>\n<pre><code>public enum Taxa {\n\n    BROWN_BIRD(&quot;Brown Bird&quot;),\n    GREAT_BIRD(&quot;Great Bird&quot;),\n    SMALL(&quot;Small&quot;);\n\n    private final String label;\n\n    Taxa(String label) {\n        this.label = label;\n    }\n\n    public String getLabel() {\n        return this.label;\n    }\n}\n</code></pre>\n<p>And then used in the view I have a DTO class:</p>\n<p><strong>BirdDTO</strong></p>\n<pre><code>public class BirdDto {\n   public Long id;\n   public String name;\n   public Taxa taxa;\n   ...\n   public String getTaxa() { return taxa.getLabel(); }\n}\n</code></pre>\n<p>I can get the display labels, but how can I use the display values from the react view to persist enums and ideally do it in a case-insensitive way to make the code more robust.</p>\n"},{"tags":["java","spring-boot"],"owner":{"account_id":29852288,"reputation":1,"user_id":22877877,"display_name":"lyrics"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699441777,"creation_date":1699426044,"question_id":77443327,"body_markdown":"When I use @SentinelResource as below:\r\n```\r\n@SentinelResource(value=&quot;test_sentinel&quot;,fallback=&quot;sentinelFallbackHandlerTest&quot;,blockHandler=&quot;sentinelBlockHandlerTest&quot;,exceptionToTrace=BlockException.class)\r\n```\r\n\r\nThen I configured the rules in the sentinel-dashboard, and I found out that when the rule was triggered, the blockhandler method will be executed.\r\n\r\nI&#39;d like to know that under what conditions fallback method will be executed. As the sentinel docs described, fallback will handle the exception throwed by the method with @SentinelResource. So I write the code:\r\n```\r\nint a = 1/0;\r\n```\r\nin the method, but fallback method has not been executed.\r\n\r\nSo, I&#39;d like to know when the fallback method and the blockhandler method will be executed ? And  what&#39;s the difference between the properties fallback and blockhandler of @SentinelResource ?\r\n","title":"what&#39;s the difference between the properties fallback and blockhandler of @SentinelResource","body":"<p>When I use @SentinelResource as below:</p>\n<pre><code>@SentinelResource(value=&quot;test_sentinel&quot;,fallback=&quot;sentinelFallbackHandlerTest&quot;,blockHandler=&quot;sentinelBlockHandlerTest&quot;,exceptionToTrace=BlockException.class)\n</code></pre>\n<p>Then I configured the rules in the sentinel-dashboard, and I found out that when the rule was triggered, the blockhandler method will be executed.</p>\n<p>I'd like to know that under what conditions fallback method will be executed. As the sentinel docs described, fallback will handle the exception throwed by the method with @SentinelResource. So I write the code:</p>\n<pre><code>int a = 1/0;\n</code></pre>\n<p>in the method, but fallback method has not been executed.</p>\n<p>So, I'd like to know when the fallback method and the blockhandler method will be executed ? And  what's the difference between the properties fallback and blockhandler of @SentinelResource ?</p>\n"},{"tags":["java","hibernate"],"comments":[{"owner":{"account_id":10004020,"reputation":220,"user_id":7399085,"display_name":"user7399085"},"score":0,"creation_date":1572001197,"post_id":58544042,"comment_id":103433605,"body_markdown":"At which statement is the exception thrown ?","body":"At which statement is the exception thrown ?"},{"owner":{"account_id":10004020,"reputation":220,"user_id":7399085,"display_name":"user7399085"},"score":0,"creation_date":1572003339,"post_id":58544042,"comment_id":103434623,"body_markdown":"... in `countRows()` the transaction stays open if `criteria != null`, is that intended ?","body":"... in <code>countRows()</code> the transaction stays open if <code>criteria != null</code>, is that intended ?"},{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":0,"creation_date":1572020270,"post_id":58544042,"comment_id":103443301,"body_markdown":"I copied the code from a tutorial. I don&#39;t know.","body":"I copied the code from a tutorial. I don&#39;t know."}],"answers":[{"tags":[],"owner":{"account_id":10004020,"reputation":220,"user_id":7399085,"display_name":"user7399085"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1572268153,"creation_date":1572268153,"answer_id":58591526,"question_id":58544042,"body_markdown":"From your code it is unclear where `session` is decleared and how it is populated. Given that this is done somehow correctly, I suspect that missing transaction commit/rollback before return in countRow leads to the exception, try:\r\n\r\n    public int countRows() {\r\n    \tint size = 0;\r\n    \ttry {\r\n    \t\tsession.beginTransaction();\r\n    \t\tCriteria criteria = session.createCriteria(AttendeeModel.class);\r\n    \t\tif (criteria != null) {\r\n    \t\t\tsize = criteria.list().size();\r\n    \t\t}\r\n    \t\tsession.getTransaction().commit();\r\n    \t} catch (Exception e) {\r\n    \t\te.printStackTrace();\r\n    \t\tsession.getTransaction().rollback();\r\n    \t}\r\n    \treturn size;\r\n    }","title":"IllegalStateException: Session/EntityManager is closed","body":"<p>From your code it is unclear where <code>session</code> is decleared and how it is populated. Given that this is done somehow correctly, I suspect that missing transaction commit/rollback before return in countRow leads to the exception, try:</p>\n\n<pre><code>public int countRows() {\n    int size = 0;\n    try {\n        session.beginTransaction();\n        Criteria criteria = session.createCriteria(AttendeeModel.class);\n        if (criteria != null) {\n            size = criteria.list().size();\n        }\n        session.getTransaction().commit();\n    } catch (Exception e) {\n        e.printStackTrace();\n        session.getTransaction().rollback();\n    }\n    return size;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9049113,"reputation":1,"user_id":6740078,"display_name":"Akshay"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699441430,"creation_date":1699017883,"answer_id":77417000,"question_id":58544042,"body_markdown":"it didn&#39;t work by just using `@PersistenceContext`, we need to set PersistenceContextType also which is by default `TRANSACTION`, but in this case when multiple threads try to use same singleton instance of `EntityManager`, we need to set it to `EXTENDED` like this -\r\n\r\n\t@PersistenceContext(type = PersistenceContextType.EXTENDED)\r\n\tprivate EntityManager entityManager;\r\n\r\nand it worked. I got this issue when i was trying to execute a db query in one of my schedulars.","title":"IllegalStateException: Session/EntityManager is closed","body":"<p>it didn't work by just using <code>@PersistenceContext</code>, we need to set PersistenceContextType also which is by default <code>TRANSACTION</code>, but in this case when multiple threads try to use same singleton instance of <code>EntityManager</code>, we need to set it to <code>EXTENDED</code> like this -</p>\n<pre><code>@PersistenceContext(type = PersistenceContextType.EXTENDED)\nprivate EntityManager entityManager;\n</code></pre>\n<p>and it worked. I got this issue when i was trying to execute a db query in one of my schedulars.</p>\n"}],"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3977,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1699441430,"creation_date":1571929066,"question_id":58544042,"body_markdown":"I&#39;m trying to implement his Java code with Hibernate in order to make SQL queries:\r\n\r\n    public List&lt;AttendeeModel&gt; getListOfCds(int firstRow, int rowCount) {\r\n    \t\tList&lt;AttendeeModel&gt; cdList = null;\r\n    \t\ttry {\r\n    \t\t\tsession.beginTransaction();\r\n    \t\t\tCriteria criteria = session.createCriteria(AttendeeModel.class);\r\n    \t\t\tcriteria.setFirstResult(firstRow);\r\n    \t\t\tcriteria.setMaxResults(rowCount);\r\n    \t\t\tif (criteria != null) {\r\n    \t\t\t\tcdList = (List&lt;AttendeeModel&gt;) criteria.list();\r\n    \t\t\t}\r\n    \t\t\tsession.getTransaction().commit();\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t\tsession.getTransaction().rollback();\r\n    \t\t}\r\n    \t\treturn cdList;\r\n    \t}\r\n    \r\n    \tpublic int countRows() {\r\n    \t\ttry {\r\n    \t\t\tsession.beginTransaction();\r\n    \t\t\tCriteria criteria = session.createCriteria(AttendeeModel.class);\r\n    \t\t\tif (criteria != null) {\r\n    \t\t\t\treturn criteria.list().size();\r\n    \t\t\t}\r\n    \t\t\tsession.getTransaction().commit();\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t\tsession.getTransaction().rollback();\r\n    \t\t}\r\n    \t\treturn 0;\r\n    \t}\r\n\r\nBut for some reason I get this error:\r\n\r\n     java.lang.IllegalStateException: Session/EntityManager is closed\r\n\r\nDo you know how I can fix this issue?","title":"IllegalStateException: Session/EntityManager is closed","body":"<p>I'm trying to implement his Java code with Hibernate in order to make SQL queries:</p>\n\n<pre><code>public List&lt;AttendeeModel&gt; getListOfCds(int firstRow, int rowCount) {\n        List&lt;AttendeeModel&gt; cdList = null;\n        try {\n            session.beginTransaction();\n            Criteria criteria = session.createCriteria(AttendeeModel.class);\n            criteria.setFirstResult(firstRow);\n            criteria.setMaxResults(rowCount);\n            if (criteria != null) {\n                cdList = (List&lt;AttendeeModel&gt;) criteria.list();\n            }\n            session.getTransaction().commit();\n        } catch (Exception e) {\n            e.printStackTrace();\n            session.getTransaction().rollback();\n        }\n        return cdList;\n    }\n\n    public int countRows() {\n        try {\n            session.beginTransaction();\n            Criteria criteria = session.createCriteria(AttendeeModel.class);\n            if (criteria != null) {\n                return criteria.list().size();\n            }\n            session.getTransaction().commit();\n        } catch (Exception e) {\n            e.printStackTrace();\n            session.getTransaction().rollback();\n        }\n        return 0;\n    }\n</code></pre>\n\n<p>But for some reason I get this error:</p>\n\n<pre><code> java.lang.IllegalStateException: Session/EntityManager is closed\n</code></pre>\n\n<p>Do you know how I can fix this issue?</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":7233893,"reputation":111,"user_id":5519813,"display_name":"Serghei Motpan"},"score":0,"creation_date":1699428786,"post_id":77443445,"comment_id":136528686,"body_markdown":"I&#39;m not so sure what type of env vars you want to pass, there is a question related to yours: https://stackoverflow.com/questions/47898854/maven-failsafe-doesnt-read-environmentvariables-config-for-integration-tests","body":"I&#39;m not so sure what type of env vars you want to pass, there is a question related to yours: <a href=\"https://stackoverflow.com/questions/47898854/maven-failsafe-doesnt-read-environmentvariables-config-for-integration-tests\" title=\"maven failsafe doesnt read environmentvariables config for integration tests\">stackoverflow.com/questions/47898854/&hellip;</a>"},{"owner":{"account_id":2178904,"reputation":3532,"user_id":1928863,"accept_rate":38,"display_name":"Rui"},"score":0,"creation_date":1699443456,"post_id":77443445,"comment_id":136531319,"body_markdown":"@SergheiMotpan Thanks first for the link. I checked that link and one comment told that the given answer did not answer the question relevant to the environment variable and I also think so","body":"@SergheiMotpan Thanks first for the link. I checked that link and one comment told that the given answer did not answer the question relevant to the environment variable and I also think so"},{"owner":{"account_id":7233893,"reputation":111,"user_id":5519813,"display_name":"Serghei Motpan"},"score":0,"creation_date":1699534706,"post_id":77443445,"comment_id":136545856,"body_markdown":"Can you provide/elaborate an example what variable/flag you want maven-failsafe to handle?","body":"Can you provide/elaborate an example what variable/flag you want maven-failsafe to handle?"}],"owner":{"account_id":2178904,"reputation":3532,"user_id":1928863,"accept_rate":38,"display_name":"Rui"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699441180,"creation_date":1699427454,"question_id":77443445,"body_markdown":"In a legacy Java project, `maven-surefire-plugin` was used for *integration test* and, inside the `maven-surefire-plugin` element in `pom.xml` there is the following `executions`:\r\n\r\n\t&lt;executions&gt;\r\n\t\t&lt;execution&gt;\r\n\t\t\t&lt;id&gt;integration-tests&lt;/id&gt;\r\n\t\t\t&lt;phase&gt;integration-test&lt;/phase&gt;\r\n\t\t\t&lt;goals&gt;\r\n\t\t\t\t&lt;goal&gt;test&lt;/goal&gt;\r\n\t\t\t&lt;/goals&gt;\r\n\t\t\t&lt;configuration&gt;\r\n\t\t\t\t&lt;useSystemClassLoader&gt;true&lt;/useSystemClassLoader&gt;\r\n\t\t\t\t&lt;includes&gt;\r\n\t\t\t\t\t&lt;include&gt;**/*IT.java&lt;/include&gt;\r\n\t\t\t\t&lt;/includes&gt;\r\n\t\t\t\t&lt;environmentVariables&gt;\r\n\t\t\t\t\t&lt;mavenRun&gt;true&lt;/mavenRun&gt;\r\n\t\t\t\t&lt;/environmentVariables&gt;\r\n\t\t\t&lt;/configuration&gt;\r\n\t\t&lt;/execution&gt;\r\n\t&lt;/executions&gt;\r\n\r\n\r\nIn this legacy part of code, `environmentVariables` is used. As a result, \r\n\r\n&gt; **QUESTION**: after replacing `maven-surefire-plugin` with `maven-failsafe-plugin` by keeping all other parts unchanged, the\r\n&gt; `environmentVariables` cannot be recognized. So **How to configure\r\n&gt; environment variables in the `maven-failsafe-plugin`?**","title":"How to configure environment variables maven-failsafe-plugin","body":"<p>In a legacy Java project, <code>maven-surefire-plugin</code> was used for <em>integration test</em> and, inside the <code>maven-surefire-plugin</code> element in <code>pom.xml</code> there is the following <code>executions</code>:</p>\n<pre><code>&lt;executions&gt;\n    &lt;execution&gt;\n        &lt;id&gt;integration-tests&lt;/id&gt;\n        &lt;phase&gt;integration-test&lt;/phase&gt;\n        &lt;goals&gt;\n            &lt;goal&gt;test&lt;/goal&gt;\n        &lt;/goals&gt;\n        &lt;configuration&gt;\n            &lt;useSystemClassLoader&gt;true&lt;/useSystemClassLoader&gt;\n            &lt;includes&gt;\n                &lt;include&gt;**/*IT.java&lt;/include&gt;\n            &lt;/includes&gt;\n            &lt;environmentVariables&gt;\n                &lt;mavenRun&gt;true&lt;/mavenRun&gt;\n            &lt;/environmentVariables&gt;\n        &lt;/configuration&gt;\n    &lt;/execution&gt;\n&lt;/executions&gt;\n</code></pre>\n<p>In this legacy part of code, <code>environmentVariables</code> is used. As a result,</p>\n<blockquote>\n<p><strong>QUESTION</strong>: after replacing <code>maven-surefire-plugin</code> with <code>maven-failsafe-plugin</code> by keeping all other parts unchanged, the\n<code>environmentVariables</code> cannot be recognized. So <strong>How to configure\nenvironment variables in the <code>maven-failsafe-plugin</code>?</strong></p>\n</blockquote>\n"},{"tags":["java","amazon-web-services","dns","nlb","hyperledger-besu"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1699442783,"post_id":77444814,"comment_id":136531208,"body_markdown":"This questions is about infrastructure and has nothing that is Java specific. Other sites like https://superuser.com/ are more appropriate for this kind of question.","body":"This questions is about infrastructure and has nothing that is Java specific. Other sites like <a href=\"https://superuser.com/\">superuser.com</a> are more appropriate for this kind of question."},{"owner":{"account_id":7501,"reputation":187982,"user_id":13070,"accept_rate":90,"display_name":"Mark B"},"score":1,"creation_date":1699447298,"post_id":77444814,"comment_id":136531955,"body_markdown":"@aled I absolutely disagree that superuser is the appropriate place to send this question. ServerFault is possibly more appropriate than StackOverflow, but superuser is certainly not appropriate for this question at all. Further, the solution to this question may actually be related to how Java handles DNS caching, so not only is Java a relevant detail, but the question may very well belong on StackOverflow.","body":"@aled I absolutely disagree that superuser is the appropriate place to send this question. ServerFault is possibly more appropriate than StackOverflow, but superuser is certainly not appropriate for this question at all. Further, the solution to this question may actually be related to how Java handles DNS caching, so not only is Java a relevant detail, but the question may very well belong on StackOverflow."}],"owner":{"account_id":14227676,"reputation":163,"user_id":10277826,"display_name":"ŌHARA Kazutaka"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1699448385,"answer_count":0,"score":2,"last_activity_date":1699441095,"creation_date":1699440047,"question_id":77444814,"body_markdown":"Requests from a Java client to an NLB over multiple AZs Not load-balanced\r\n\r\n**Summary**:\r\n\r\nExpectation: every request from Java is load balanced between two nodes.\r\n\r\nActual behavior: all the requests go to one node only, while both nodes are available.\r\n\r\nWhy is this, and what would be a best strategy to make load balancing work in this situation?\r\n\r\n**Detail**:\r\n\r\nI have a network as  diagram shown below.\r\n[![an NLB is placed over two AZs. Each AZ has a node.][1]][1]\r\nA Java app makes an http request to an NLB. \r\nThis NLB is configured over two AZs, therefore it has one endpoint for each AZ.\r\nEach AZ has an EC2 instance which listens https.\r\n\r\n\r\n**Initial Analysis**:\r\n\r\nSo far, I&#39;m aware of three issues:\r\n\r\n1) By default, an NLB endpoint forwards requests to nodes in the same AZ only. This behavior can be modified by &quot;cross-zone load balancing&quot; option. My concern is enabling this option might cause undesirable subeffects.\r\n2) The requests are of https, with `Keep-Alive` on. Until someone disconnects, a connection will be reused, probably causing stickness to one node.\r\n3) The NLB load-balancing is made by DNS roundrobin, put aside Cross-zone load balancing mentioned in 1.  Meanwhie, a Java app by default caches DNS query results. Disabling it by a JVM setting `networkaddress.cache.ttl=0` could force DNS query every time. My concern here however is that this might cause DNS flooding or something similar, which is bad for the network.\r\n\r\nI have tried enabling &quot;cross-zone load balancing&quot; and adding &quot;Connection:close&quot; request header, to avoid 1) and 2). It seems good in an initial attempt, but not sure that is correct, especially in a larger size of request or in a high load situation etc. \r\n\r\n  [1]: https://i.stack.imgur.com/KQyY9.png","title":"How to correctly load balance requests from a Java client to an NLB over multiple AZs","body":"<p>Requests from a Java client to an NLB over multiple AZs Not load-balanced</p>\n<p><strong>Summary</strong>:</p>\n<p>Expectation: every request from Java is load balanced between two nodes.</p>\n<p>Actual behavior: all the requests go to one node only, while both nodes are available.</p>\n<p>Why is this, and what would be a best strategy to make load balancing work in this situation?</p>\n<p><strong>Detail</strong>:</p>\n<p>I have a network as  diagram shown below.\n<a href=\"https://i.stack.imgur.com/KQyY9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KQyY9.png\" alt=\"an NLB is placed over two AZs. Each AZ has a node.\" /></a>\nA Java app makes an http request to an NLB.\nThis NLB is configured over two AZs, therefore it has one endpoint for each AZ.\nEach AZ has an EC2 instance which listens https.</p>\n<p><strong>Initial Analysis</strong>:</p>\n<p>So far, I'm aware of three issues:</p>\n<ol>\n<li>By default, an NLB endpoint forwards requests to nodes in the same AZ only. This behavior can be modified by &quot;cross-zone load balancing&quot; option. My concern is enabling this option might cause undesirable subeffects.</li>\n<li>The requests are of https, with <code>Keep-Alive</code> on. Until someone disconnects, a connection will be reused, probably causing stickness to one node.</li>\n<li>The NLB load-balancing is made by DNS roundrobin, put aside Cross-zone load balancing mentioned in 1.  Meanwhie, a Java app by default caches DNS query results. Disabling it by a JVM setting <code>networkaddress.cache.ttl=0</code> could force DNS query every time. My concern here however is that this might cause DNS flooding or something similar, which is bad for the network.</li>\n</ol>\n<p>I have tried enabling &quot;cross-zone load balancing&quot; and adding &quot;Connection:close&quot; request header, to avoid 1) and 2). It seems good in an initial attempt, but not sure that is correct, especially in a larger size of request or in a high load situation etc.</p>\n"},{"tags":["java","spring","spring-security","spring-expression-language","spring-expression"],"comments":[{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1699124997,"post_id":77410680,"comment_id":136493019,"body_markdown":"I looked into the class [`Tokenizer.`](https://github.com/spring-projects/spring-framework/blob/main/spring-expression/src/main/java/org/springframework/expression/spel/standard/Tokenizer.java) and it can&#39;t read identifiers with `.`. So you need to use an alias for your bean.","body":"I looked into the class <a href=\"https://github.com/spring-projects/spring-framework/blob/main/spring-expression/src/main/java/org/springframework/expression/spel/standard/Tokenizer.java\" rel=\"nofollow noreferrer\"><code>Tokenizer.</code></a> and it can&#39;t read identifiers with <code>.</code>. So you need to use an alias for your bean."},{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1699127177,"post_id":77410680,"comment_id":136493243,"body_markdown":"I looked into [`InternalSpelExpressionParser`](https://github.com/spring-projects/spring-framework/blob/main/spring-expression/src/main/java/org/springframework/expression/spel/standard/InternalSpelExpressionParser.java) and it should work with quotes.","body":"I looked into <a href=\"https://github.com/spring-projects/spring-framework/blob/main/spring-expression/src/main/java/org/springframework/expression/spel/standard/InternalSpelExpressionParser.java\" rel=\"nofollow noreferrer\"><code>InternalSpelExpressionParser</code></a> and it should work with quotes."},{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1699127697,"post_id":77410680,"comment_id":136493289,"body_markdown":"Could you add the full stack trace of your quoted version?","body":"Could you add the full stack trace of your quoted version?"},{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":1,"creation_date":1699380019,"post_id":77410680,"comment_id":136523441,"body_markdown":"Could you check, if it works without `#{` and `}`? AFAIR this is only used in Thymeleaf templates.","body":"Could you check, if it works without <code>#{</code> and <code>}</code>? AFAIR this is only used in Thymeleaf templates."},{"owner":{"account_id":2842936,"reputation":2530,"user_id":2442133,"accept_rate":57,"display_name":"mkczyk"},"score":0,"creation_date":1699441113,"post_id":77410680,"comment_id":136530933,"body_markdown":"It works! IntelliJ says that&#39;s wrong, but it works. (&quot;Update 3&quot; in question)","body":"It works! IntelliJ says that&#39;s wrong, but it works. (&quot;Update 3&quot; in question)"},{"owner":{"account_id":2842936,"reputation":2530,"user_id":2442133,"accept_rate":57,"display_name":"mkczyk"},"score":1,"creation_date":1699441825,"post_id":77410680,"comment_id":136531050,"body_markdown":"I&#39;ve just found reported bug in IntelliJ: [1](https://youtrack.jetbrains.com/issue/IDEA-315414/Valid-SPEL-expression-referering-to-quoted-bean-with-dot-in-name-marked-as-error), [2](https://youtrack.jetbrains.com/issue/IDEA-269571/SpEL-bean-reference-is-error-highlighted-if-the-bean-name-appears-in-single-quotes-after-the-bean-accessor-symbol) and related [question](https://stackoverflow.com/questions/59771574/how-to-reference-a-bean-by-type-in-a-spel/59802069#59802069).","body":"I&#39;ve just found reported bug in IntelliJ: <a href=\"https://youtrack.jetbrains.com/issue/IDEA-315414/Valid-SPEL-expression-referering-to-quoted-bean-with-dot-in-name-marked-as-error\" rel=\"nofollow noreferrer\">1</a>, <a href=\"https://youtrack.jetbrains.com/issue/IDEA-269571/SpEL-bean-reference-is-error-highlighted-if-the-bean-name-appears-in-single-quotes-after-the-bean-accessor-symbol\" rel=\"nofollow noreferrer\">2</a> and related <a href=\"https://stackoverflow.com/questions/59771574/how-to-reference-a-bean-by-type-in-a-spel/59802069#59802069\">question</a>."}],"owner":{"account_id":2842936,"reputation":2530,"user_id":2442133,"accept_rate":57,"display_name":"mkczyk"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1699441028,"creation_date":1698937215,"question_id":77410680,"body_markdown":"I have controller with method that have logic for checking permission:\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/example&quot;)\r\n    public class ExampleController {\r\n    \r\n        @GetMapping\r\n        @PreAuthorize(&quot;@exampleController.hasPermission()&quot;)\r\n        public String example() {\r\n            return &quot;hello&quot;;\r\n        }\r\n    \r\n        public boolean hasPermission() {\r\n            return true; // complex logic\r\n        }\r\n    }\r\n\r\nAs you can see I use SpEL to call that method (by bean name: `exampleController`).\r\n\r\nBut if I change bean name generator to `FullyQualifiedAnnotationBeanNameGenerator`:\r\n\r\n    @SpringBootApplication(nameGenerator = FullyQualifiedAnnotationBeanNameGenerator.class)\r\n\r\nnow bean name is `com.example.demo.ExampleController` (checked in debuger).\r\n\r\nFollowing this I try to change bean name in `@PreAuthorized`:\r\n\r\n    @PreAuthorize(&quot;@com.example.demo.ExampleController.hasPermission()&quot;)\r\n\r\nbut it doesn&#39;t work:\r\n\r\n    Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception \r\n      [Request processing failed; nested exception is java.lang.IllegalArgumentException:\r\n      Failed to evaluate expression &#39;@com.example.demo.ExampleController.hasPermission()&#39;] with root cause\r\n    org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;com&#39; available\r\n\r\nHow to refer to bean with dots in name in SpEL? \r\nOr how to call method from controller in a different way (without using bean name)?\r\n\r\nI know I can implement custom `AnnotationBeanNameGenerator` without special characters. But I&#39;m expecting that Spring&#39;s bean name generator is compatible with SpEL (Spring Expression Language).\r\n\r\n### Update\r\n\r\nAnswers from [this][1] and [this][2] don&#39;t work either (I guess it worked in XML config, but not in annotations):\r\n\r\n```\r\n@PreAuthorize(&quot;#{@&#39;com.example.demo.ExampleController&#39;.hasPermission()}&quot;)\r\n```\r\n```\r\nInitialization of bean failed; nested exception is java.lang.IllegalArgumentException: \r\n  Failed to parse expression &#39;#{@&#39;com.example.demo.ExampleController&#39;.hasPermission()}&#39;\r\n```\r\n\r\n### Update 2\r\n\r\nFull stack trace (for @dur):\r\n```\r\nERROR [           main] o.s.boot.SpringApplication               : Application run failed\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;com.example.demo.ExampleController&#39; defined in file [(...)/demo/target/classes/com/example/demo/ExampleController.class]: Initialization of bean failed; nested exception is java.lang.IllegalArgumentException: Failed to parse expression &#39;#{@&#39;com.example.demo.ExampleController&#39;.hasPermission()}&#39;\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:628) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.23.jar:5.3.23]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.23.jar:5.3.23]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.5.jar:2.7.5]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.5.jar:2.7.5]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.5.jar:2.7.5]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.5.jar:2.7.5]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.5.jar:2.7.5]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.5.jar:2.7.5]\r\n\tat com.example.demo.DemoApplication.main(DemoApplication.java:11) ~[classes/:na]\r\nCaused by: java.lang.IllegalArgumentException: Failed to parse expression &#39;#{@&#39;com.example.demo.ExampleController&#39;.hasPermission()}&#39;\r\n\tat org.springframework.security.access.expression.method.ExpressionBasedAnnotationAttributeFactory.createPreInvocationAttribute(ExpressionBasedAnnotationAttributeFactory.java:59) ~[spring-security-core-5.7.4.jar:5.7.4]\r\n\tat org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource.getAttributes(PrePostAnnotationSecurityMetadataSource.java:80) ~[spring-security-core-5.7.4.jar:5.7.4]\r\n\tat org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource.getAttributes(DelegatingMethodSecurityMetadataSource.java:66) ~[spring-security-core-5.7.4.jar:5.7.4]\r\n\tat org.springframework.security.access.intercept.aopalliance.MethodSecurityMetadataSourceAdvisor$MethodSecurityMetadataSourcePointcut.matches(MethodSecurityMetadataSourceAdvisor.java:127) ~[spring-security-core-5.7.4.jar:5.7.4]\r\n\tat org.springframework.aop.support.AopUtils.canApply(AopUtils.java:252) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tat org.springframework.aop.support.AopUtils.canApply(AopUtils.java:289) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tat org.springframework.aop.support.AopUtils.findAdvisorsThatCanApply(AopUtils.java:321) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tat org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findAdvisorsThatCanApply(AbstractAdvisorAutoProxyCreator.java:128) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tat org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findEligibleAdvisors(AbstractAdvisorAutoProxyCreator.java:97) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tat org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.getAdvicesAndAdvisorsForBean(AbstractAdvisorAutoProxyCreator.java:78) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tat org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:341) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tat org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:293) ~[spring-aop-5.3.23.jar:5.3.23]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:455) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.23.jar:5.3.23]\r\n\t... 15 common frames omitted\r\nCaused by: org.springframework.expression.spel.SpelParseException: Expression [#{@&#39;com.example.demo.ExampleController&#39;.hasPermission()}] @1: EL1043E: Unexpected token. Expected &#39;identifier&#39; but was &#39;lcurly({)&#39;\r\n\tat org.springframework.expression.spel.standard.InternalSpelExpressionParser.internalException(InternalSpelExpressionParser.java:1041) ~[spring-expression-5.3.23.jar:5.3.23]\r\n\tat org.springframework.expression.spel.standard.InternalSpelExpressionParser.eatToken(InternalSpelExpressionParser.java:923) ~[spring-expression-5.3.23.jar:5.3.23]\r\n\tat org.springframework.expression.spel.standard.InternalSpelExpressionParser.maybeEatFunctionOrVar(InternalSpelExpressionParser.java:421) ~[spring-expression-5.3.23.jar:5.3.23]\r\n\tat org.springframework.expression.spel.standard.InternalSpelExpressionParser.eatStartNode(InternalSpelExpressionParser.java:510) ~[spring-expression-5.3.23.jar:5.3.23]\r\n\tat org.springframework.expression.spel.standard.InternalSpelExpressionParser.eatPrimaryExpression(InternalSpelExpressionParser.java:350) ~[spring-expression-5.3.23.jar:5.3.23]\r\n\tat org.springframework.expression.spel.standard.InternalSpelExpressionParser.eatUnaryExpression(InternalSpelExpressionParser.java:344) ~[spring-expression-5.3.23.jar:5.3.23]\r\n\tat org.springframework.expression.spel.standard.InternalSpelExpressionParser.eatPowerIncDecExpression(InternalSpelExpressionParser.java:303) ~[spring-expression-5.3.23.jar:5.3.23]\r\n\tat org.springframework.expression.spel.standard.InternalSpelExpressionParser.eatProductExpression(InternalSpelExpressionParser.java:281) ~[spring-expression-5.3.23.jar:5.3.23]\r\n\tat org.springframework.expression.spel.standard.InternalSpelExpressionParser.eatSumExpression(InternalSpelExpressionParser.java:263) ~[spring-expression-5.3.23.jar:5.3.23]\r\n\tat org.springframework.expression.spel.standard.InternalSpelExpressionParser.eatRelationalExpression(InternalSpelExpressionParser.java:218) ~[spring-expression-5.3.23.jar:5.3.23]\r\n\tat org.springframework.expression.spel.standard.InternalSpelExpressionParser.eatLogicalAndExpression(InternalSpelExpressionParser.java:205) ~[spring-expression-5.3.23.jar:5.3.23]\r\n\tat org.springframework.expression.spel.standard.InternalSpelExpressionParser.eatLogicalOrExpression(InternalSpelExpressionParser.java:192) ~[spring-expression-5.3.23.jar:5.3.23]\r\n\tat org.springframework.expression.spel.standard.InternalSpelExpressionParser.eatExpression(InternalSpelExpressionParser.java:153) ~[spring-expression-5.3.23.jar:5.3.23]\r\n\tat org.springframework.expression.spel.standard.InternalSpelExpressionParser.doParseExpression(InternalSpelExpressionParser.java:131) ~[spring-expression-5.3.23.jar:5.3.23]\r\n\tat org.springframework.expression.spel.standard.SpelExpressionParser.doParseExpression(SpelExpressionParser.java:61) ~[spring-expression-5.3.23.jar:5.3.23]\r\n\tat org.springframework.expression.spel.standard.SpelExpressionParser.doParseExpression(SpelExpressionParser.java:33) ~[spring-expression-5.3.23.jar:5.3.23]\r\n\tat org.springframework.expression.common.TemplateAwareExpressionParser.parseExpression(TemplateAwareExpressionParser.java:52) ~[spring-expression-5.3.23.jar:5.3.23]\r\n\tat org.springframework.expression.common.TemplateAwareExpressionParser.parseExpression(TemplateAwareExpressionParser.java:43) ~[spring-expression-5.3.23.jar:5.3.23]\r\n\tat org.springframework.security.access.expression.method.ExpressionBasedAnnotationAttributeFactory.createPreInvocationAttribute(ExpressionBasedAnnotationAttributeFactory.java:53) ~[spring-security-core-5.7.4.jar:5.7.4]\r\n\t... 29 common frames omitted\r\n```\r\nEven Intellij says something is wrong:\r\n[![enter image description here][3]][3]\r\n\r\n### Update 3 (resolved)\r\n\r\nIt works ([thanks for][4] @dur):\r\n```\r\n@PreAuthorize(&quot;@&#39;com.example.demo.ExampleController&#39;.hasPermission()&quot;)\r\n```\r\nBut Intellij mislead me it won&#39;t work:\r\n[![enter image description here][5]][5]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/62713/accessing-a-bean-with-a-dot-in-its-id/14408583#14408583\r\n  [2]: https://stackoverflow.com/questions/17539056/how-do-i-reference-a-bean-in-spring-el-named-with-a-prefix/17542313#17542313\r\n  [3]: https://i.stack.imgur.com/m5nC2.png\r\n  [4]: https://stackoverflow.com/questions/77410680/access-to-bean-by-spel-in-preauthorize-with-fullyqualifiedannotationbeannamegen?noredirect=1#comment136523441_77410680\r\n  [5]: https://i.stack.imgur.com/Tthqg.png","title":"Access to bean by SpEL in @PreAuthorize with FullyQualifiedAnnotationBeanNameGenerator","body":"<p>I have controller with method that have logic for checking permission:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/example&quot;)\npublic class ExampleController {\n\n    @GetMapping\n    @PreAuthorize(&quot;@exampleController.hasPermission()&quot;)\n    public String example() {\n        return &quot;hello&quot;;\n    }\n\n    public boolean hasPermission() {\n        return true; // complex logic\n    }\n}\n</code></pre>\n<p>As you can see I use SpEL to call that method (by bean name: <code>exampleController</code>).</p>\n<p>But if I change bean name generator to <code>FullyQualifiedAnnotationBeanNameGenerator</code>:</p>\n<pre><code>@SpringBootApplication(nameGenerator = FullyQualifiedAnnotationBeanNameGenerator.class)\n</code></pre>\n<p>now bean name is <code>com.example.demo.ExampleController</code> (checked in debuger).</p>\n<p>Following this I try to change bean name in <code>@PreAuthorized</code>:</p>\n<pre><code>@PreAuthorize(&quot;@com.example.demo.ExampleController.hasPermission()&quot;)\n</code></pre>\n<p>but it doesn't work:</p>\n<pre><code>Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception \n  [Request processing failed; nested exception is java.lang.IllegalArgumentException:\n  Failed to evaluate expression '@com.example.demo.ExampleController.hasPermission()'] with root cause\norg.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'com' available\n</code></pre>\n<p>How to refer to bean with dots in name in SpEL?\nOr how to call method from controller in a different way (without using bean name)?</p>\n<p>I know I can implement custom <code>AnnotationBeanNameGenerator</code> without special characters. But I'm expecting that Spring's bean name generator is compatible with SpEL (Spring Expression Language).</p>\n<h3>Update</h3>\n<p>Answers from <a href=\"https://stackoverflow.com/questions/62713/accessing-a-bean-with-a-dot-in-its-id/14408583#14408583\">this</a> and <a href=\"https://stackoverflow.com/questions/17539056/how-do-i-reference-a-bean-in-spring-el-named-with-a-prefix/17542313#17542313\">this</a> don't work either (I guess it worked in XML config, but not in annotations):</p>\n<pre><code>@PreAuthorize(&quot;#{@'com.example.demo.ExampleController'.hasPermission()}&quot;)\n</code></pre>\n<pre><code>Initialization of bean failed; nested exception is java.lang.IllegalArgumentException: \n  Failed to parse expression '#{@'com.example.demo.ExampleController'.hasPermission()}'\n</code></pre>\n<h3>Update 2</h3>\n<p>Full stack trace (for @dur):</p>\n<pre><code>ERROR [           main] o.s.boot.SpringApplication               : Application run failed\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.example.demo.ExampleController' defined in file [(...)/demo/target/classes/com/example/demo/ExampleController.class]: Initialization of bean failed; nested exception is java.lang.IllegalArgumentException: Failed to parse expression '#{@'com.example.demo.ExampleController'.hasPermission()}'\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:628) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.23.jar:5.3.23]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.23.jar:5.3.23]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.5.jar:2.7.5]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.5.jar:2.7.5]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.5.jar:2.7.5]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.5.jar:2.7.5]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.5.jar:2.7.5]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.5.jar:2.7.5]\n    at com.example.demo.DemoApplication.main(DemoApplication.java:11) ~[classes/:na]\nCaused by: java.lang.IllegalArgumentException: Failed to parse expression '#{@'com.example.demo.ExampleController'.hasPermission()}'\n    at org.springframework.security.access.expression.method.ExpressionBasedAnnotationAttributeFactory.createPreInvocationAttribute(ExpressionBasedAnnotationAttributeFactory.java:59) ~[spring-security-core-5.7.4.jar:5.7.4]\n    at org.springframework.security.access.prepost.PrePostAnnotationSecurityMetadataSource.getAttributes(PrePostAnnotationSecurityMetadataSource.java:80) ~[spring-security-core-5.7.4.jar:5.7.4]\n    at org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource.getAttributes(DelegatingMethodSecurityMetadataSource.java:66) ~[spring-security-core-5.7.4.jar:5.7.4]\n    at org.springframework.security.access.intercept.aopalliance.MethodSecurityMetadataSourceAdvisor$MethodSecurityMetadataSourcePointcut.matches(MethodSecurityMetadataSourceAdvisor.java:127) ~[spring-security-core-5.7.4.jar:5.7.4]\n    at org.springframework.aop.support.AopUtils.canApply(AopUtils.java:252) ~[spring-aop-5.3.23.jar:5.3.23]\n    at org.springframework.aop.support.AopUtils.canApply(AopUtils.java:289) ~[spring-aop-5.3.23.jar:5.3.23]\n    at org.springframework.aop.support.AopUtils.findAdvisorsThatCanApply(AopUtils.java:321) ~[spring-aop-5.3.23.jar:5.3.23]\n    at org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findAdvisorsThatCanApply(AbstractAdvisorAutoProxyCreator.java:128) ~[spring-aop-5.3.23.jar:5.3.23]\n    at org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findEligibleAdvisors(AbstractAdvisorAutoProxyCreator.java:97) ~[spring-aop-5.3.23.jar:5.3.23]\n    at org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.getAdvicesAndAdvisorsForBean(AbstractAdvisorAutoProxyCreator.java:78) ~[spring-aop-5.3.23.jar:5.3.23]\n    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:341) ~[spring-aop-5.3.23.jar:5.3.23]\n    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:293) ~[spring-aop-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:455) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808) ~[spring-beans-5.3.23.jar:5.3.23]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.23.jar:5.3.23]\n    ... 15 common frames omitted\nCaused by: org.springframework.expression.spel.SpelParseException: Expression [#{@'com.example.demo.ExampleController'.hasPermission()}] @1: EL1043E: Unexpected token. Expected 'identifier' but was 'lcurly({)'\n    at org.springframework.expression.spel.standard.InternalSpelExpressionParser.internalException(InternalSpelExpressionParser.java:1041) ~[spring-expression-5.3.23.jar:5.3.23]\n    at org.springframework.expression.spel.standard.InternalSpelExpressionParser.eatToken(InternalSpelExpressionParser.java:923) ~[spring-expression-5.3.23.jar:5.3.23]\n    at org.springframework.expression.spel.standard.InternalSpelExpressionParser.maybeEatFunctionOrVar(InternalSpelExpressionParser.java:421) ~[spring-expression-5.3.23.jar:5.3.23]\n    at org.springframework.expression.spel.standard.InternalSpelExpressionParser.eatStartNode(InternalSpelExpressionParser.java:510) ~[spring-expression-5.3.23.jar:5.3.23]\n    at org.springframework.expression.spel.standard.InternalSpelExpressionParser.eatPrimaryExpression(InternalSpelExpressionParser.java:350) ~[spring-expression-5.3.23.jar:5.3.23]\n    at org.springframework.expression.spel.standard.InternalSpelExpressionParser.eatUnaryExpression(InternalSpelExpressionParser.java:344) ~[spring-expression-5.3.23.jar:5.3.23]\n    at org.springframework.expression.spel.standard.InternalSpelExpressionParser.eatPowerIncDecExpression(InternalSpelExpressionParser.java:303) ~[spring-expression-5.3.23.jar:5.3.23]\n    at org.springframework.expression.spel.standard.InternalSpelExpressionParser.eatProductExpression(InternalSpelExpressionParser.java:281) ~[spring-expression-5.3.23.jar:5.3.23]\n    at org.springframework.expression.spel.standard.InternalSpelExpressionParser.eatSumExpression(InternalSpelExpressionParser.java:263) ~[spring-expression-5.3.23.jar:5.3.23]\n    at org.springframework.expression.spel.standard.InternalSpelExpressionParser.eatRelationalExpression(InternalSpelExpressionParser.java:218) ~[spring-expression-5.3.23.jar:5.3.23]\n    at org.springframework.expression.spel.standard.InternalSpelExpressionParser.eatLogicalAndExpression(InternalSpelExpressionParser.java:205) ~[spring-expression-5.3.23.jar:5.3.23]\n    at org.springframework.expression.spel.standard.InternalSpelExpressionParser.eatLogicalOrExpression(InternalSpelExpressionParser.java:192) ~[spring-expression-5.3.23.jar:5.3.23]\n    at org.springframework.expression.spel.standard.InternalSpelExpressionParser.eatExpression(InternalSpelExpressionParser.java:153) ~[spring-expression-5.3.23.jar:5.3.23]\n    at org.springframework.expression.spel.standard.InternalSpelExpressionParser.doParseExpression(InternalSpelExpressionParser.java:131) ~[spring-expression-5.3.23.jar:5.3.23]\n    at org.springframework.expression.spel.standard.SpelExpressionParser.doParseExpression(SpelExpressionParser.java:61) ~[spring-expression-5.3.23.jar:5.3.23]\n    at org.springframework.expression.spel.standard.SpelExpressionParser.doParseExpression(SpelExpressionParser.java:33) ~[spring-expression-5.3.23.jar:5.3.23]\n    at org.springframework.expression.common.TemplateAwareExpressionParser.parseExpression(TemplateAwareExpressionParser.java:52) ~[spring-expression-5.3.23.jar:5.3.23]\n    at org.springframework.expression.common.TemplateAwareExpressionParser.parseExpression(TemplateAwareExpressionParser.java:43) ~[spring-expression-5.3.23.jar:5.3.23]\n    at org.springframework.security.access.expression.method.ExpressionBasedAnnotationAttributeFactory.createPreInvocationAttribute(ExpressionBasedAnnotationAttributeFactory.java:53) ~[spring-security-core-5.7.4.jar:5.7.4]\n    ... 29 common frames omitted\n</code></pre>\n<p>Even Intellij says something is wrong:\n<a href=\"https://i.stack.imgur.com/m5nC2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/m5nC2.png\" alt=\"enter image description here\" /></a></p>\n<h3>Update 3 (resolved)</h3>\n<p>It works (<a href=\"https://stackoverflow.com/questions/77410680/access-to-bean-by-spel-in-preauthorize-with-fullyqualifiedannotationbeannamegen?noredirect=1#comment136523441_77410680\">thanks for</a> @dur):</p>\n<pre><code>@PreAuthorize(&quot;@'com.example.demo.ExampleController'.hasPermission()&quot;)\n</code></pre>\n<p>But Intellij mislead me it won't work:\n<a href=\"https://i.stack.imgur.com/Tthqg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Tthqg.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","maven","gitlab-ci.yml"],"owner":{"account_id":29846098,"reputation":11,"user_id":22873153,"display_name":"heidi hlm"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1699440775,"creation_date":1699440775,"question_id":77444912,"body_markdown":"i have the following gitlab-ci.yml snippet of the few first code and the test script\r\n```\r\n---\r\n# Based on the Maven CI/CD template from GitLab: https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/ci/templates/Maven.gitlab-ci.yml\r\nvariables:\r\n  # `showDateTime` will show the passed time in milliseconds. You need to specify `--batch-mode` to make this work.\r\n  MAVEN_OPTS: &gt;-\r\n    -Dhttps.protocols=TLSv1.2\r\n    -Dmaven.repo.local=$CI_PROJECT_DIR/.m2/repository\r\n    -Dorg.slf4j.simpleLogger.showDateTime=true\r\n    -Djava.awt.headless=true\r\n  # As of Maven 3.3.0 instead of this you MAY define these options in `.mvn/maven.config` so the same config is used\r\n  # when running from the command line.\r\n  # As of Maven 3.6.1, the use of `--no-tranfer-progress` (or `-ntp`) suppresses download and upload messages. The use\r\n  # of the `Slf4jMavenTransferListener` is no longer necessary.\r\n  # `installAtEnd` and `deployAtEnd` are only effective with recent version of the corresponding plugins.\r\n  MAVEN_CLI_OPTS: &gt;-\r\n    --batch-mode\r\n    --errors\r\n    --fail-at-end\r\n    --show-version\r\n    --no-transfer-progress\r\n    -DinstallAtEnd=true\r\n    -DdeployAtEnd=true\r\n\r\n# TODO: Add and configure the following CI job templates into the CI/CD configuration:\r\n#       - [Code Quality](https://docs.gitlab.com/ee/ci/testing/code_quality.html)\r\n#       - [Dependency Scanning](https://docs.gitlab.com/ee/user/application_security/dependency_scanning/)\r\n#       - [Static Application Security Testing (SAST)](https://docs.gitlab.com/ee/user/application_security/sast/)\r\n# Check the list of available CI job templates at https://gitlab.com/gitlab-org/gitlab/-/tree/master/lib/gitlab/ci/templates\r\ninclude:\r\n  - template: Jobs/Secret-Detection.gitlab-ci.yml\r\n  - template: Workflows/Branch-Pipelines.gitlab-ci.yml\r\n  - template: Security/Dependency-Scanning.gitlab-ci.yml\r\n  - template: Jobs/SAST.gitlab-ci.yml\r\n  - template: Code-Quality.gitlab-ci.yml\r\n\r\n//some more code//\r\ntest:\r\n  stage: test\r\n  image: docker.io/library/maven:3.9.5-eclipse-temurin-17-focal\r\n  services:\r\n    - name: docker.io/library/postgres:14-alpine\r\n      alias: database\r\n  variables:\r\n    SPRING_DATASOURCE_URL: jdbc:postgresql://database:5432/sitodo\r\n    SPRING_DATASOURCE_USERNAME: sitodo\r\n    SPRING_DATASOURCE_PASSWORD: sitodo_cicd\r\n    POSTGRES_USER: sitodo\r\n    POSTGRES_PASSWORD: sitodo_cicd\r\n  needs:\r\n    - build\r\n  before_script:\r\n    - apt-get update &amp;&amp; apt-get install -y firefox\r\n    - java -version &amp;&amp; javac --version &amp;&amp; mvn --version\r\n    - pwd\r\n  script:\r\n    # Run test suites\r\n    - mvn $MAVEN_CLI_OPTS clean test\r\n    # Run PMD and generate test reports\r\n    - mvn $MAVEN_CLI_OPTS verify -DskipTests\r\n    # Get line coverage\r\n    - grep -o &quot;Total[^%]*%&quot; target/site/jacoco/index.html\r\n  coverage: &#39;/Total.*?(\\d{1,3})%/&#39;\r\n  cache:\r\n    key:\r\n      files:\r\n        - pom.xml\r\n    paths:\r\n      - .m2/repository\r\n  artifacts:\r\n    paths:\r\n      - target/*.exec\r\n      - target/site/jacoco/\r\n      - target/pmd.xml\r\n      - target/site/pmd.html\r\n\r\n    reports:\r\n      junit:\r\n        - target/surefire-reports/TEST-*.xml\r\n\r\n///remaining code//\r\n\r\n```\r\ni have added the template needed to trigger dependency scanning job and code quality scanning job, however, it still generates error in pipeline for dependency scanning and code quality such as below\r\n```\r\nUploading artifacts for failed job 00:02\r\nUploading artifacts...\r\nWARNING: **/gl-sbom-*.cdx.json: no matching files. Ensure that the artifact path is relative to the working directory (/builds/heidi.renata/test-automation-exercise) \r\nERROR: No files to upload                          \r\nUploading artifacts...\r\nWARNING: gl-dependency-scanning-report.json: no matching files. Ensure that the artifact path is relative to the working directory (/builds/heidi.renata/test-automation-exercise) \r\nERROR: No files to upload                          \r\nCleaning up project directory and file based variables 00:00\r\nERROR: Job failed: exit code 1\r\n```\r\nthe job also still failed\r\ni have try to modify my .yml file but it seems i still do it incorrectly, what should i do?","title":"Gemnasium dependency scanning and code quality failed","body":"<p>i have the following gitlab-ci.yml snippet of the few first code and the test script</p>\n<pre><code>---\n# Based on the Maven CI/CD template from GitLab: https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/ci/templates/Maven.gitlab-ci.yml\nvariables:\n  # `showDateTime` will show the passed time in milliseconds. You need to specify `--batch-mode` to make this work.\n  MAVEN_OPTS: &gt;-\n    -Dhttps.protocols=TLSv1.2\n    -Dmaven.repo.local=$CI_PROJECT_DIR/.m2/repository\n    -Dorg.slf4j.simpleLogger.showDateTime=true\n    -Djava.awt.headless=true\n  # As of Maven 3.3.0 instead of this you MAY define these options in `.mvn/maven.config` so the same config is used\n  # when running from the command line.\n  # As of Maven 3.6.1, the use of `--no-tranfer-progress` (or `-ntp`) suppresses download and upload messages. The use\n  # of the `Slf4jMavenTransferListener` is no longer necessary.\n  # `installAtEnd` and `deployAtEnd` are only effective with recent version of the corresponding plugins.\n  MAVEN_CLI_OPTS: &gt;-\n    --batch-mode\n    --errors\n    --fail-at-end\n    --show-version\n    --no-transfer-progress\n    -DinstallAtEnd=true\n    -DdeployAtEnd=true\n\n# TODO: Add and configure the following CI job templates into the CI/CD configuration:\n#       - [Code Quality](https://docs.gitlab.com/ee/ci/testing/code_quality.html)\n#       - [Dependency Scanning](https://docs.gitlab.com/ee/user/application_security/dependency_scanning/)\n#       - [Static Application Security Testing (SAST)](https://docs.gitlab.com/ee/user/application_security/sast/)\n# Check the list of available CI job templates at https://gitlab.com/gitlab-org/gitlab/-/tree/master/lib/gitlab/ci/templates\ninclude:\n  - template: Jobs/Secret-Detection.gitlab-ci.yml\n  - template: Workflows/Branch-Pipelines.gitlab-ci.yml\n  - template: Security/Dependency-Scanning.gitlab-ci.yml\n  - template: Jobs/SAST.gitlab-ci.yml\n  - template: Code-Quality.gitlab-ci.yml\n\n//some more code//\ntest:\n  stage: test\n  image: docker.io/library/maven:3.9.5-eclipse-temurin-17-focal\n  services:\n    - name: docker.io/library/postgres:14-alpine\n      alias: database\n  variables:\n    SPRING_DATASOURCE_URL: jdbc:postgresql://database:5432/sitodo\n    SPRING_DATASOURCE_USERNAME: sitodo\n    SPRING_DATASOURCE_PASSWORD: sitodo_cicd\n    POSTGRES_USER: sitodo\n    POSTGRES_PASSWORD: sitodo_cicd\n  needs:\n    - build\n  before_script:\n    - apt-get update &amp;&amp; apt-get install -y firefox\n    - java -version &amp;&amp; javac --version &amp;&amp; mvn --version\n    - pwd\n  script:\n    # Run test suites\n    - mvn $MAVEN_CLI_OPTS clean test\n    # Run PMD and generate test reports\n    - mvn $MAVEN_CLI_OPTS verify -DskipTests\n    # Get line coverage\n    - grep -o &quot;Total[^%]*%&quot; target/site/jacoco/index.html\n  coverage: '/Total.*?(\\d{1,3})%/'\n  cache:\n    key:\n      files:\n        - pom.xml\n    paths:\n      - .m2/repository\n  artifacts:\n    paths:\n      - target/*.exec\n      - target/site/jacoco/\n      - target/pmd.xml\n      - target/site/pmd.html\n\n    reports:\n      junit:\n        - target/surefire-reports/TEST-*.xml\n\n///remaining code//\n\n</code></pre>\n<p>i have added the template needed to trigger dependency scanning job and code quality scanning job, however, it still generates error in pipeline for dependency scanning and code quality such as below</p>\n<pre><code>Uploading artifacts for failed job 00:02\nUploading artifacts...\nWARNING: **/gl-sbom-*.cdx.json: no matching files. Ensure that the artifact path is relative to the working directory (/builds/heidi.renata/test-automation-exercise) \nERROR: No files to upload                          \nUploading artifacts...\nWARNING: gl-dependency-scanning-report.json: no matching files. Ensure that the artifact path is relative to the working directory (/builds/heidi.renata/test-automation-exercise) \nERROR: No files to upload                          \nCleaning up project directory and file based variables 00:00\nERROR: Job failed: exit code 1\n</code></pre>\n<p>the job also still failed\ni have try to modify my .yml file but it seems i still do it incorrectly, what should i do?</p>\n"},{"tags":["python","java","rest","machine-learning","nlp"],"comments":[{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1699393593,"post_id":77440929,"comment_id":136525511,"body_markdown":"If all the Python dependencies are compatible, you could run it on GraalVM with [GraalPy](https://github.com/oracle/graalpython).","body":"If all the Python dependencies are compatible, you could run it on GraalVM with <a href=\"https://github.com/oracle/graalpython\" rel=\"nofollow noreferrer\">GraalPy</a>."}],"answers":[{"tags":[],"owner":{"account_id":4172830,"reputation":897,"user_id":3420197,"display_name":"Anna Andreeva Rogotulka"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1699394658,"creation_date":1699394658,"answer_id":77441746,"question_id":77440929,"body_markdown":"you can convert model to ONNX runtime format  and then run it through Apache OpenNLP, you can read [this tutorial][1] and this [documentation][2] \r\n\r\n\r\n  [1]: https://blogsarchive.apache.org/opennlp/entry/accelerate-hugging-face-transformer-models\r\n  [2]: https://opennlp.apache.org/docs/2.3.0/manual/opennlp.html#intro.models.onnx\r\n\r\nthe class `SentenceFeatureGeneratorFactory` might be helpful","title":"Any alternative of Python Transfomer Package in java?","body":"<p>you can convert model to ONNX runtime format  and then run it through Apache OpenNLP, you can read <a href=\"https://blogsarchive.apache.org/opennlp/entry/accelerate-hugging-face-transformer-models\" rel=\"nofollow noreferrer\">this tutorial</a> and this <a href=\"https://opennlp.apache.org/docs/2.3.0/manual/opennlp.html#intro.models.onnx\" rel=\"nofollow noreferrer\">documentation</a></p>\n<p>the class <code>SentenceFeatureGeneratorFactory</code> might be helpful</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1699448317,"post_id":77444872,"comment_id":136532151,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/77444872/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29852906,"reputation":46,"user_id":22878366,"display_name":"Kapila Shobit"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699440533,"creation_date":1699440533,"answer_id":77444872,"question_id":77440929,"body_markdown":"You can run Python code from a Java application using the subprocess module\r\nrefer this [blog about python and java usage][1]\r\n\r\n\r\n  [1]: https://towardsdev.com/executing-a-python-script-from-a-java-file-and-vise-versa-ea73dda0026e","title":"Any alternative of Python Transfomer Package in java?","body":"<p>You can run Python code from a Java application using the subprocess module\nrefer this <a href=\"https://towardsdev.com/executing-a-python-script-from-a-java-file-and-vise-versa-ea73dda0026e\" rel=\"nofollow noreferrer\">blog about python and java usage</a></p>\n"}],"owner":{"account_id":20823528,"reputation":63,"user_id":21365300,"display_name":"Ahmad Mujtaba"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77441746,"answer_count":2,"score":0,"last_activity_date":1699440533,"creation_date":1699385079,"question_id":77440929,"body_markdown":"I am loading a Python model from Hugging Face.\r\n\r\nA pretrained model used to generate answers of questions from a given context.\r\n\r\nModel Description:\r\n[model link page][1]\r\n\r\n**Model loading sample:** \r\n\r\n    from transformers import AutoModelForQuestionAnswering, AutoTokenizer, pipeline\r\n\r\n    model_name = &quot;deepset/roberta-base-squad2&quot;\r\n\r\n    # a) Get predictions\r\n    nlp = pipeline(&#39;question-answering, model=model_name, tokenizer=model_name)\r\n       QA_input = {\r\n          &#39;question&#39;: &#39;Why is model conversion important?&#39;,\r\n          &#39;context&#39;: &#39;The option to convert models between FARM and transformers&#39;\r\n    }\r\n     res = nlp(QA_input)\r\n\r\n\r\nIt is using a Python transformer package to load it. Now I can create its API in Python easily, but I want to create an API of this model in Java, where its parameters (&#39;Question&#39; &amp; &#39;Context&#39;) will be given by the user itself.\r\n\r\nNow I want to know, how will I load this model in Java? Is there any transformer dependency in Java?\r\n\r\n  [1]: https://huggingface.co/deepset/roberta-base-squad2\r\n","title":"Any alternative of Python Transfomer Package in java?","body":"<p>I am loading a Python model from Hugging Face.</p>\n<p>A pretrained model used to generate answers of questions from a given context.</p>\n<p>Model Description:\n<a href=\"https://huggingface.co/deepset/roberta-base-squad2\" rel=\"nofollow noreferrer\">model link page</a></p>\n<p><strong>Model loading sample:</strong></p>\n<pre><code>from transformers import AutoModelForQuestionAnswering, AutoTokenizer, pipeline\n\nmodel_name = &quot;deepset/roberta-base-squad2&quot;\n\n# a) Get predictions\nnlp = pipeline('question-answering, model=model_name, tokenizer=model_name)\n   QA_input = {\n      'question': 'Why is model conversion important?',\n      'context': 'The option to convert models between FARM and transformers'\n}\n res = nlp(QA_input)\n</code></pre>\n<p>It is using a Python transformer package to load it. Now I can create its API in Python easily, but I want to create an API of this model in Java, where its parameters ('Question' &amp; 'Context') will be given by the user itself.</p>\n<p>Now I want to know, how will I load this model in Java? Is there any transformer dependency in Java?</p>\n"},{"tags":["java","android","android-support-library","android-support-design","bottom-sheet"],"comments":[{"owner":{"account_id":2060791,"reputation":34122,"user_id":1837367,"accept_rate":100,"display_name":"David Medenjak"},"score":1,"creation_date":1465644956,"post_id":37555403,"comment_id":62995198,"body_markdown":"You do realize that the peek height is the height of the sheet being &quot;collapsed&quot; and just showing some of it? If you set the peek height to the height of the sheet itself (or bigger)...then the whole &quot;peeking&quot; is useless. Could you maybe explain *what* you are trying to do?","body":"You do realize that the peek height is the height of the sheet being &quot;collapsed&quot; and just showing some of it? If you set the peek height to the height of the sheet itself (or bigger)...then the whole &quot;peeking&quot; is useless. Could you maybe explain <i>what</i> you are trying to do?"},{"owner":{"account_id":328638,"reputation":1655,"user_id":651714,"accept_rate":67,"display_name":"Nandish A"},"score":0,"creation_date":1465796824,"post_id":37555403,"comment_id":63032226,"body_markdown":"Thanks for that. Yes I realized that the peekHeight was set for a collapsed view. Anyways, I was able to correct the issue","body":"Thanks for that. Yes I realized that the peekHeight was set for a collapsed view. Anyways, I was able to correct the issue"},{"owner":{"account_id":2050082,"reputation":4451,"user_id":1829281,"display_name":"Andrii Kovalchuk"},"score":0,"creation_date":1471450227,"post_id":37555403,"comment_id":65354748,"body_markdown":"this line made a trick for me: coordinatorLayout.getLayoutParams().height = bottomSheetInternal.getHeight();&quot;","body":"this line made a trick for me: coordinatorLayout.getLayoutParams().height = bottomSheetInternal.getHeight();&quot;"}],"answers":[{"comments":[{"owner":{"account_id":1968357,"reputation":982,"user_id":1768001,"accept_rate":53,"display_name":"Amritpal Singh"},"score":0,"creation_date":1466689159,"post_id":37782673,"comment_id":63430208,"body_markdown":"This solution is giving errors in R.id.locUXCoordinatorLayout, Cannot resolve symbol. Which R we have to use here..?","body":"This solution is giving errors in R.id.locUXCoordinatorLayout, Cannot resolve symbol. Which R we have to use here..?"},{"owner":{"account_id":328638,"reputation":1655,"user_id":651714,"accept_rate":67,"display_name":"Nandish A"},"score":0,"creation_date":1466740824,"post_id":37782673,"comment_id":63454409,"body_markdown":"locUXCoordinatorLayout , this was the id I had in my view. You may not have it in your view. See the code I have attached in the question. If if solves your problem, appreciate if you upvote the answer","body":"locUXCoordinatorLayout , this was the id I had in my view. You may not have it in your view. See the code I have attached in the question. If if solves your problem, appreciate if you upvote the answer"}],"tags":[],"owner":{"account_id":328638,"reputation":1655,"user_id":651714,"accept_rate":67,"display_name":"Nandish A"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1480786722,"creation_date":1465797397,"answer_id":37782673,"question_id":37555403,"body_markdown":"By deeper UI inspection, we find that there is another `CoordinatorLayout` that wraps our coordinator layout. The parent `CoordinatorLayout` has a `FrameLayout` with a `BottomSheetBehavior`with the id `design_bottom_sheet`. The peek height set from our code above was getting constrained due the `match_parent` height of the `FrameLayout` with the id `design_bottom_sheet`\r\n\r\nBy setting the peek height of the `FrameLayout` with the id design_bottom_sheet , this issue was resolved\r\n\r\n        public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n        getDialog().setOnShowListener(new DialogInterface.OnShowListener() {\r\n            @Override\r\n            public void onShow(DialogInterface dialog) {\r\n                BottomSheetDialog d = (BottomSheetDialog) dialog;\r\n                coordinatorLayout = (CoordinatorLayout) d.findViewById(R.id.locUXCoordinatorLayout);\r\n                bottomSheetInternal = d.findViewById(R.id.locUXView);\r\n                bottomSheetBehavior = BottomSheetBehavior.from(bottomSheetInternal);\r\n                bottomSheetBehavior.setHidable(false);\r\n                BottomSheetBehavior.from((View)coordinatorLayout.getParent()).setPeekHeight(bottomSheetInternal.getHeight());\r\n                bottomSheetBehavior.setPeekHeight(bottomSheetInternal.getHeight());\r\n                coordinatorLayout.getParent().requestLayout();\r\n\r\n            }\r\n        });","title":"Android BottomSheetDialogFragment does not expand completely","body":"<p>By deeper UI inspection, we find that there is another <code>CoordinatorLayout</code> that wraps our coordinator layout. The parent <code>CoordinatorLayout</code> has a <code>FrameLayout</code> with a <code>BottomSheetBehavior</code>with the id <code>design_bottom_sheet</code>. The peek height set from our code above was getting constrained due the <code>match_parent</code> height of the <code>FrameLayout</code> with the id <code>design_bottom_sheet</code></p>\n\n<p>By setting the peek height of the <code>FrameLayout</code> with the id design_bottom_sheet , this issue was resolved</p>\n\n<pre><code>    public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\n    getDialog().setOnShowListener(new DialogInterface.OnShowListener() {\n        @Override\n        public void onShow(DialogInterface dialog) {\n            BottomSheetDialog d = (BottomSheetDialog) dialog;\n            coordinatorLayout = (CoordinatorLayout) d.findViewById(R.id.locUXCoordinatorLayout);\n            bottomSheetInternal = d.findViewById(R.id.locUXView);\n            bottomSheetBehavior = BottomSheetBehavior.from(bottomSheetInternal);\n            bottomSheetBehavior.setHidable(false);\n            BottomSheetBehavior.from((View)coordinatorLayout.getParent()).setPeekHeight(bottomSheetInternal.getHeight());\n            bottomSheetBehavior.setPeekHeight(bottomSheetInternal.getHeight());\n            coordinatorLayout.getParent().requestLayout();\n\n        }\n    });\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3243353,"reputation":2605,"user_id":2761728,"accept_rate":50,"display_name":"Anthonyeef"},"score":1,"creation_date":1480218029,"post_id":38873329,"comment_id":68869538,"body_markdown":"This answer really solve my problem. If there could be some more explain, that would be nice. For example, I search around and test it myself, finnally figure out that ViewTreeObserver is aimed to get the exact measure height after the view is really measure, and the GlobalOnLayoutListener is removed for better performance.","body":"This answer really solve my problem. If there could be some more explain, that would be nice. For example, I search around and test it myself, finnally figure out that ViewTreeObserver is aimed to get the exact measure height after the view is really measure, and the GlobalOnLayoutListener is removed for better performance."},{"owner":{"account_id":110454,"reputation":7907,"user_id":292263,"accept_rate":85,"display_name":"Catalin Morosan"},"score":0,"creation_date":1531806061,"post_id":38873329,"comment_id":89719304,"body_markdown":"I&#39;m getting a few crash reports where the cast to CoordinatorLayout.LayoutParams fails. It seems that on some devices in some situations, view.getParent() returns a LinearLayout instead of a CoordinatorLayout. Right now the crash reports are only for some Android 8.0 devices.","body":"I&#39;m getting a few crash reports where the cast to CoordinatorLayout.LayoutParams fails. It seems that on some devices in some situations, view.getParent() returns a LinearLayout instead of a CoordinatorLayout. Right now the crash reports are only for some Android 8.0 devices."},{"owner":{"account_id":7494343,"reputation":2947,"user_id":5695091,"accept_rate":92,"display_name":"ysfcyln"},"score":0,"creation_date":1573717467,"post_id":38873329,"comment_id":103975785,"body_markdown":"What is the difference between `setupDailog` and  `onCreateDialog`?","body":"What is the difference between <code>setupDailog</code> and  <code>onCreateDialog</code>?"}],"tags":[],"owner":{"account_id":4755272,"reputation":1404,"user_id":3844201,"accept_rate":69,"display_name":"DeniSHow"},"comment_count":3,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1493410575,"creation_date":1470831751,"answer_id":38873329,"question_id":37555403,"body_markdown":"I&#39;ve found another solution. Maybe for future readers it can be useful.\r\n\r\n    @Override\r\n    public void setupDialog(Dialog dialog, int style) {\r\n        super.setupDialog(dialog, style);\r\n        final View root = View.inflate(getContext(), R.layout.fragment_bottom_sheet_choose_time, null);\r\n        dialog.setContentView(root);\r\n        initView(root);\r\n\r\n        CoordinatorLayout.LayoutParams params = (CoordinatorLayout.LayoutParams) ((View) root.getParent()).getLayoutParams();\r\n        CoordinatorLayout.Behavior behavior = params.getBehavior();\r\n\r\n        if (behavior != null &amp;&amp; behavior instanceof BottomSheetBehavior) {\r\n            mBottomSheetBehavior = (BottomSheetBehavior) behavior;\r\n            mBottomSheetBehavior.setBottomSheetCallback(mBottomSheetBehaviorCallback);\r\n\r\n            root.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {\r\n                @Override\r\n                public void onGlobalLayout() {\r\n                    root.getViewTreeObserver().removeGlobalOnLayoutListener(this);\r\n                    int height = root.getMeasuredHeight();\r\n                    mBottomSheetBehavior.setPeekHeight(height);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\nAs @Anthonyeef mentioned, here `ViewTreeObserver` is aimed to get the exact measure height after the view is really measured and the `GlobalOnLayoutListener` is removed for better performance. \r\n\r\nBut please, before using in production, test this solution on different devices and screens, because if your content in bottom sheet is higher than your screen it can produce some strange swipe behavior.","title":"Android BottomSheetDialogFragment does not expand completely","body":"<p>I've found another solution. Maybe for future readers it can be useful.</p>\n\n<pre><code>@Override\npublic void setupDialog(Dialog dialog, int style) {\n    super.setupDialog(dialog, style);\n    final View root = View.inflate(getContext(), R.layout.fragment_bottom_sheet_choose_time, null);\n    dialog.setContentView(root);\n    initView(root);\n\n    CoordinatorLayout.LayoutParams params = (CoordinatorLayout.LayoutParams) ((View) root.getParent()).getLayoutParams();\n    CoordinatorLayout.Behavior behavior = params.getBehavior();\n\n    if (behavior != null &amp;&amp; behavior instanceof BottomSheetBehavior) {\n        mBottomSheetBehavior = (BottomSheetBehavior) behavior;\n        mBottomSheetBehavior.setBottomSheetCallback(mBottomSheetBehaviorCallback);\n\n        root.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {\n            @Override\n            public void onGlobalLayout() {\n                root.getViewTreeObserver().removeGlobalOnLayoutListener(this);\n                int height = root.getMeasuredHeight();\n                mBottomSheetBehavior.setPeekHeight(height);\n            }\n        });\n    }\n}\n</code></pre>\n\n<p>As @Anthonyeef mentioned, here <code>ViewTreeObserver</code> is aimed to get the exact measure height after the view is really measured and the <code>GlobalOnLayoutListener</code> is removed for better performance. </p>\n\n<p>But please, before using in production, test this solution on different devices and screens, because if your content in bottom sheet is higher than your screen it can produce some strange swipe behavior.</p>\n"},{"comments":[{"owner":{"account_id":1355971,"reputation":791,"user_id":1294349,"accept_rate":89,"display_name":"Kevin"},"score":1,"creation_date":1505959911,"post_id":42702062,"comment_id":79629185,"body_markdown":"In my case, these code should be called in `onActivityCreated` then work perfectly","body":"In my case, these code should be called in <code>onActivityCreated</code> then work perfectly"},{"owner":{"account_id":1254650,"reputation":229,"user_id":1214383,"display_name":"Mohamed ElSawaf"},"score":3,"creation_date":1546338514,"post_id":42702062,"comment_id":94826816,"body_markdown":"Nice solution worked with me, I put the code in `onViewCreated()`","body":"Nice solution worked with me, I put the code in <code>onViewCreated()</code>"}],"tags":[],"owner":{"account_id":5430127,"reputation":461,"user_id":4321255,"display_name":"athysirus"},"comment_count":2,"down_vote_count":1,"up_vote_count":45,"is_accepted":false,"score":44,"last_activity_date":1489081450,"creation_date":1489081450,"answer_id":42702062,"question_id":37555403,"body_markdown":"Using this code in onCreateView.\r\n\r\n    getDialog().setOnShowListener(new DialogInterface.OnShowListener() {\r\n            @Override\r\n            public void onShow(DialogInterface dialog) {\r\n                BottomSheetDialog d = (BottomSheetDialog) dialog;\r\n                FrameLayout bottomSheet = (FrameLayout) d.findViewById(R.id.design_bottom_sheet);\r\n                CoordinatorLayout coordinatorLayout = (CoordinatorLayout) bottomSheet.getParent();\r\n                BottomSheetBehavior bottomSheetBehavior = BottomSheetBehavior.from(bottomSheet);\r\n                bottomSheetBehavior.setPeekHeight(bottomSheet.getHeight());\r\n                coordinatorLayout.getParent().requestLayout();\r\n            }\r\n        });","title":"Android BottomSheetDialogFragment does not expand completely","body":"<p>Using this code in onCreateView.</p>\n\n<pre><code>getDialog().setOnShowListener(new DialogInterface.OnShowListener() {\n        @Override\n        public void onShow(DialogInterface dialog) {\n            BottomSheetDialog d = (BottomSheetDialog) dialog;\n            FrameLayout bottomSheet = (FrameLayout) d.findViewById(R.id.design_bottom_sheet);\n            CoordinatorLayout coordinatorLayout = (CoordinatorLayout) bottomSheet.getParent();\n            BottomSheetBehavior bottomSheetBehavior = BottomSheetBehavior.from(bottomSheet);\n            bottomSheetBehavior.setPeekHeight(bottomSheet.getHeight());\n            coordinatorLayout.getParent().requestLayout();\n        }\n    });\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11338220,"reputation":842,"user_id":8313316,"display_name":"Gregory"},"score":0,"creation_date":1586541662,"post_id":57370977,"comment_id":108173248,"body_markdown":"But this solution creates another problem - after interactively moving the BottomSheetDialog down the background window remains darkened.","body":"But this solution creates another problem - after interactively moving the BottomSheetDialog down the background window remains darkened."},{"owner":{"account_id":15571619,"reputation":1344,"user_id":11233871,"display_name":"Happy Singh"},"score":0,"creation_date":1604215015,"post_id":57370977,"comment_id":114274621,"body_markdown":"Yes, it remains darkened","body":"Yes, it remains darkened"}],"tags":[],"owner":{"account_id":380560,"reputation":1194,"user_id":734659,"accept_rate":60,"display_name":"Mike T"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1565076537,"creation_date":1565076537,"answer_id":57370977,"question_id":37555403,"body_markdown":"Thanks @athysirus for the neat approach. Here is the version I ended up with, in case somebody wants to have a working kotlin sample.\r\n\r\nImportant to note is, that you should also remove the global layout listener, once done.\r\n\r\n\r\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\r\n        view.viewTreeObserver.addOnGlobalLayoutListener(object : ViewTreeObserver.OnGlobalLayoutListener {\r\n            override fun onGlobalLayout() {\r\n                val bottomSheet = (dialog as BottomSheetDialog).findViewById&lt;View&gt;(com.google.android.material.R.id.design_bottom_sheet)\r\n                BottomSheetBehavior.from&lt;View&gt;(bottomSheet).apply {\r\n                    state = BottomSheetBehavior.STATE_EXPANDED\r\n                    peekHeight = 0\r\n                }\r\n                view.viewTreeObserver.removeOnGlobalLayoutListener(this)\r\n            }\r\n        })","title":"Android BottomSheetDialogFragment does not expand completely","body":"<p>Thanks @athysirus for the neat approach. Here is the version I ended up with, in case somebody wants to have a working kotlin sample.</p>\n\n<p>Important to note is, that you should also remove the global layout listener, once done.</p>\n\n<pre><code>override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n    view.viewTreeObserver.addOnGlobalLayoutListener(object : ViewTreeObserver.OnGlobalLayoutListener {\n        override fun onGlobalLayout() {\n            val bottomSheet = (dialog as BottomSheetDialog).findViewById&lt;View&gt;(com.google.android.material.R.id.design_bottom_sheet)\n            BottomSheetBehavior.from&lt;View&gt;(bottomSheet).apply {\n                state = BottomSheetBehavior.STATE_EXPANDED\n                peekHeight = 0\n            }\n            view.viewTreeObserver.removeOnGlobalLayoutListener(this)\n        }\n    })\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1305425,"reputation":5670,"user_id":1254514,"accept_rate":75,"display_name":"Paul Spiesberger"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1569846540,"creation_date":1569846540,"answer_id":58167940,"question_id":37555403,"body_markdown":"Solution in Kotlin inspired by [Nandish A][1]&#39;s post in more detail. First the layout:\r\n\r\n    &lt;androidx.coordinatorlayout.widget.CoordinatorLayout\r\n            android:id=&quot;@+id/container_root&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;&gt;\r\n    \r\n            &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n                android:id=&quot;@+id/bottom_sheet&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                app:behavior_hideable=&quot;false&quot;\r\n                app:behavior_peekHeight=&quot;0dp&quot;\r\n                app:layout_behavior=&quot;com.google.android.material.bottomsheet.BottomSheetBehavior&quot;&gt;\r\n     \r\n                      &lt;!-- content of the bottom sheet --&gt;\r\n\r\n            &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n    &lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\r\n           \r\nAnd then put this into your `BottomSheetDialogFragment`:\r\n\r\n    override fun onCreateView(\r\n            inflater: LayoutInflater,\r\n            container: ViewGroup?,\r\n            savedInstanceState: Bundle?\r\n        ): View? {\r\n    \r\n            // ...        \r\n    \r\n            dialog.setOnShowListener {\r\n    \r\n                val root = dialog.find&lt;CoordinatorLayout&gt;(R.id.container_root)\r\n                val bottomSheetInternal = root.find&lt;ConstraintLayout&gt;(R.id.bottom_sheet)\r\n    \r\n                val bottomSheetBehavior = BottomSheetBehavior.from(bottomSheetInternal)\r\n                bottomSheetBehavior.isHideable = false\r\n                BottomSheetBehavior.from(root.parent as View).peekHeight = root.height\r\n                bottomSheetBehavior.peekHeight = root.height\r\n                root.parent.requestLayout()\r\n            }\r\n    \r\n            // ...\r\n        }\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/651714/nandish-a","title":"Android BottomSheetDialogFragment does not expand completely","body":"<p>Solution in Kotlin inspired by <a href=\"https://stackoverflow.com/users/651714/nandish-a\">Nandish A</a>'s post in more detail. First the layout:</p>\n\n<pre><code>&lt;androidx.coordinatorlayout.widget.CoordinatorLayout\n        android:id=\"@+id/container_root\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"&gt;\n\n        &lt;androidx.constraintlayout.widget.ConstraintLayout\n            android:id=\"@+id/bottom_sheet\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            app:behavior_hideable=\"false\"\n            app:behavior_peekHeight=\"0dp\"\n            app:layout_behavior=\"com.google.android.material.bottomsheet.BottomSheetBehavior\"&gt;\n\n                  &lt;!-- content of the bottom sheet --&gt;\n\n        &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\n</code></pre>\n\n<p>And then put this into your <code>BottomSheetDialogFragment</code>:</p>\n\n<pre><code>override fun onCreateView(\n        inflater: LayoutInflater,\n        container: ViewGroup?,\n        savedInstanceState: Bundle?\n    ): View? {\n\n        // ...        \n\n        dialog.setOnShowListener {\n\n            val root = dialog.find&lt;CoordinatorLayout&gt;(R.id.container_root)\n            val bottomSheetInternal = root.find&lt;ConstraintLayout&gt;(R.id.bottom_sheet)\n\n            val bottomSheetBehavior = BottomSheetBehavior.from(bottomSheetInternal)\n            bottomSheetBehavior.isHideable = false\n            BottomSheetBehavior.from(root.parent as View).peekHeight = root.height\n            bottomSheetBehavior.peekHeight = root.height\n            root.parent.requestLayout()\n        }\n\n        // ...\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10239513,"reputation":132,"user_id":7557362,"display_name":"Saba-21"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1571303248,"creation_date":1571303248,"answer_id":58428885,"question_id":37555403,"body_markdown":"this is how I set `peek_height` and `layout_height` to bottom sheet view in `BottomSheetDialogFragment`\r\n \r\n\r\n    dialog?.setOnShowListener {\r\n                    val dialog = dialog as BottomSheetDialog\r\n                    val bottomSheet = dialog.findViewById&lt;FrameLayout&gt;(R.id.design_bottom_sheet)\r\n                    val coordinatorLayout = bottomSheet?.parent as? CoordinatorLayout\r\n                    val bottomSheetBehavior = BottomSheetBehavior.from(bottomSheet)\r\n                    bottomSheet?.viewTreeObserver?.addOnGlobalLayoutListener {\r\n                        bottomSheet.viewTreeObserver.removeOnGlobalLayoutListener {}\r\n                        bottomSheetBehavior.peekHeight = getPopupHeight(.5f)\r\n                        val params = bottomSheet.layoutParams\r\n                        params.height = getPopupHeight(1f)\r\n                        bottomSheet.layoutParams = params\r\n                        coordinatorLayout?.parent?.requestLayout()\r\n                    }\r\n                }\r\nthis method to get percent of screen height\r\n\r\n     private fun getPopupHeight(percent: Float): Int {\r\n            val displayMetrics = DisplayMetrics()\r\n            activity?.windowManager?.defaultDisplay?.getMetrics(displayMetrics)\r\n            return (displayMetrics.heightPixels * percent).toInt()\r\n        }\r\n\r\n","title":"Android BottomSheetDialogFragment does not expand completely","body":"<p>this is how I set <code>peek_height</code> and <code>layout_height</code> to bottom sheet view in <code>BottomSheetDialogFragment</code></p>\n\n<pre><code>dialog?.setOnShowListener {\n                val dialog = dialog as BottomSheetDialog\n                val bottomSheet = dialog.findViewById&lt;FrameLayout&gt;(R.id.design_bottom_sheet)\n                val coordinatorLayout = bottomSheet?.parent as? CoordinatorLayout\n                val bottomSheetBehavior = BottomSheetBehavior.from(bottomSheet)\n                bottomSheet?.viewTreeObserver?.addOnGlobalLayoutListener {\n                    bottomSheet.viewTreeObserver.removeOnGlobalLayoutListener {}\n                    bottomSheetBehavior.peekHeight = getPopupHeight(.5f)\n                    val params = bottomSheet.layoutParams\n                    params.height = getPopupHeight(1f)\n                    bottomSheet.layoutParams = params\n                    coordinatorLayout?.parent?.requestLayout()\n                }\n            }\n</code></pre>\n\n<p>this method to get percent of screen height</p>\n\n<pre><code> private fun getPopupHeight(percent: Float): Int {\n        val displayMetrics = DisplayMetrics()\n        activity?.windowManager?.defaultDisplay?.getMetrics(displayMetrics)\n        return (displayMetrics.heightPixels * percent).toInt()\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6549218,"reputation":2535,"user_id":5064151,"display_name":"Muhammad Umair Shafique"},"comment_count":0,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1573903327,"creation_date":1573902459,"answer_id":58890046,"question_id":37555403,"body_markdown":"**Kotlin** safe way of achieving this is: \r\n\r\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\r\n        super.onViewCreated(view, savedInstanceState)\r\n        dialog.setOnShowListener {\r\n            val dialog = it as BottomSheetDialog\r\n            val bottomSheet = dialog.findViewById&lt;View&gt;(R.id.design_bottom_sheet)\r\n            bottomSheet?.let { sheet -&gt;\r\n                dialog.behavior.peekHeight = sheet.height\r\n                sheet.parent.parent.requestLayout()\r\n            }\r\n        }\r\n    }\r\n\r\n**NOTE:** No need to wrap your layout in coordinator layout. \r\n\r\nWorks like charm.\r\n\r\n","title":"Android BottomSheetDialogFragment does not expand completely","body":"<p><strong>Kotlin</strong> safe way of achieving this is: </p>\n\n<pre><code>override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n    super.onViewCreated(view, savedInstanceState)\n    dialog.setOnShowListener {\n        val dialog = it as BottomSheetDialog\n        val bottomSheet = dialog.findViewById&lt;View&gt;(R.id.design_bottom_sheet)\n        bottomSheet?.let { sheet -&gt;\n            dialog.behavior.peekHeight = sheet.height\n            sheet.parent.parent.requestLayout()\n        }\n    }\n}\n</code></pre>\n\n<p><strong>NOTE:</strong> No need to wrap your layout in coordinator layout. </p>\n\n<p>Works like charm.</p>\n"},{"tags":[],"owner":{"account_id":3021682,"reputation":115,"user_id":2562560,"accept_rate":60,"display_name":"seinta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1590427686,"creation_date":1590427686,"answer_id":62007584,"question_id":37555403,"body_markdown":"This made the trick for me! My class extends the BottomSheetDialogFragment\r\n\r\n    @Override\r\n    public void onStart()\r\n    {\r\n        super.onStart();\r\n        Dialog dialog = getDialog();\r\n\r\n        if (dialog != null)\r\n        {\r\n            View bottomSheet = dialog.findViewById(R.id.bottom_sheet);\r\n            bottomSheet.getLayoutParams().height = ViewGroup.LayoutParams.MATCH_PARENT;\r\n        }\r\n        View view = getView();\r\n        view.post(() -&gt; {\r\n            View bottomSheet = dialog.findViewById(R.id.bottom_sheet);\r\n            View parent = (View) view.getParent();\r\n            CoordinatorLayout.LayoutParams params = (CoordinatorLayout.LayoutParams) (parent).getLayoutParams();\r\n            CoordinatorLayout.Behavior behavior = params.getBehavior();\r\n            BottomSheetBehavior bottomSheetBehavior = (BottomSheetBehavior) behavior;\r\n            bottomSheetBehavior.setPeekHeight(view.getMeasuredHeight());\r\n            ((View) bottomSheet.getParent()).setBackgroundColor(Color.TRANSPARENT);\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)\r\n    {\r\n        View view = inflater.inflate(R.layout.screen_delivery_type, container, false);\r\n\r\n        getDialog().setOnShowListener(new DialogInterface.OnShowListener()\r\n        {\r\n            @Override\r\n            public void onShow(DialogInterface dialog)\r\n            {\r\n                BottomSheetDialog d = (BottomSheetDialog) dialog;\r\n                FrameLayout bottomSheet = (FrameLayout) d.findViewById(R.id.bottom_sheet);\r\n                CoordinatorLayout coordinatorLayout = (CoordinatorLayout) bottomSheet.getParent();\r\n                BottomSheetBehavior bottomSheetBehavior = BottomSheetBehavior.from(bottomSheet);\r\n                bottomSheetBehavior.setPeekHeight(bottomSheet.getHeight());\r\n                bottomSheetBehavior.setFitToContents(true);\r\n                bottomSheetBehavior.setExpandedOffset(0);\r\n                bottomSheetBehavior.setState(BottomSheetBehavior.STATE_EXPANDED);\r\n                coordinatorLayout.getParent().requestLayout();\r\n            }\r\n        });\r\n    }","title":"Android BottomSheetDialogFragment does not expand completely","body":"<p>This made the trick for me! My class extends the BottomSheetDialogFragment</p>\n\n<pre><code>@Override\npublic void onStart()\n{\n    super.onStart();\n    Dialog dialog = getDialog();\n\n    if (dialog != null)\n    {\n        View bottomSheet = dialog.findViewById(R.id.bottom_sheet);\n        bottomSheet.getLayoutParams().height = ViewGroup.LayoutParams.MATCH_PARENT;\n    }\n    View view = getView();\n    view.post(() -&gt; {\n        View bottomSheet = dialog.findViewById(R.id.bottom_sheet);\n        View parent = (View) view.getParent();\n        CoordinatorLayout.LayoutParams params = (CoordinatorLayout.LayoutParams) (parent).getLayoutParams();\n        CoordinatorLayout.Behavior behavior = params.getBehavior();\n        BottomSheetBehavior bottomSheetBehavior = (BottomSheetBehavior) behavior;\n        bottomSheetBehavior.setPeekHeight(view.getMeasuredHeight());\n        ((View) bottomSheet.getParent()).setBackgroundColor(Color.TRANSPARENT);\n    });\n}\n\n@Override\npublic View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)\n{\n    View view = inflater.inflate(R.layout.screen_delivery_type, container, false);\n\n    getDialog().setOnShowListener(new DialogInterface.OnShowListener()\n    {\n        @Override\n        public void onShow(DialogInterface dialog)\n        {\n            BottomSheetDialog d = (BottomSheetDialog) dialog;\n            FrameLayout bottomSheet = (FrameLayout) d.findViewById(R.id.bottom_sheet);\n            CoordinatorLayout coordinatorLayout = (CoordinatorLayout) bottomSheet.getParent();\n            BottomSheetBehavior bottomSheetBehavior = BottomSheetBehavior.from(bottomSheet);\n            bottomSheetBehavior.setPeekHeight(bottomSheet.getHeight());\n            bottomSheetBehavior.setFitToContents(true);\n            bottomSheetBehavior.setExpandedOffset(0);\n            bottomSheetBehavior.setState(BottomSheetBehavior.STATE_EXPANDED);\n            coordinatorLayout.getParent().requestLayout();\n        }\n    });\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10443900,"reputation":1040,"user_id":7699617,"display_name":"SerjantArbuz"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1614496279,"creation_date":1614496279,"answer_id":66406686,"question_id":37555403,"body_markdown":"This code is combination of answers. Because some of them don&#39;t works for me correct. \r\n\r\nIn XML ids.xml: \r\n\r\n    &lt;item name=&quot;sheet_parent_container&quot; type=&quot;id&quot; /&gt;\r\n\r\nIn XML layout: \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.coordinatorlayout.widget.CoordinatorLayout\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        android:id=&quot;@id/sheet_parent_container&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_gravity=&quot;bottom&quot;&gt;\r\n\r\n        **Dialog content here!**\r\n\r\n    &lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\r\n\r\nIn BottomSheetDialogFragment.kt:\r\n\r\n    \r\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\r\n        super.onViewCreated(view, savedInstanceState)\r\n\r\n        ...\r\n\r\n        setPeekHeight(view)\r\n    }\r\n\r\n    /**\r\n     * Function for disable half height display after screen rotation.\r\n     */\r\n    private fun setPeekHeight(view: View) {\r\n        val parentContainer = view.findViewById&lt;CoordinatorLayout&gt;(R.id.sheet_parent_container)\r\n\r\n        dialog?.setOnShowListener {\r\n            val dialogParent = parentContainer.parent as View\r\n            BottomSheetBehavior.from(dialogParent).peekHeight = parentContainer.height\r\n            dialogParent.requestLayout()\r\n        }\r\n    }","title":"Android BottomSheetDialogFragment does not expand completely","body":"<p>This code is combination of answers. Because some of them don't works for me correct.</p>\n<p>In XML ids.xml:</p>\n<pre><code>&lt;item name=&quot;sheet_parent_container&quot; type=&quot;id&quot; /&gt;\n</code></pre>\n<p>In XML layout:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.coordinatorlayout.widget.CoordinatorLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:id=&quot;@id/sheet_parent_container&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:layout_gravity=&quot;bottom&quot;&gt;\n\n    **Dialog content here!**\n\n&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\n</code></pre>\n<p>In BottomSheetDialogFragment.kt:</p>\n<pre><code>override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n    super.onViewCreated(view, savedInstanceState)\n\n    ...\n\n    setPeekHeight(view)\n}\n\n/**\n * Function for disable half height display after screen rotation.\n */\nprivate fun setPeekHeight(view: View) {\n    val parentContainer = view.findViewById&lt;CoordinatorLayout&gt;(R.id.sheet_parent_container)\n\n    dialog?.setOnShowListener {\n        val dialogParent = parentContainer.parent as View\n        BottomSheetBehavior.from(dialogParent).peekHeight = parentContainer.height\n        dialogParent.requestLayout()\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11850608,"reputation":1127,"user_id":8672015,"display_name":"Samir Alakbarov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656228656,"creation_date":1656228656,"answer_id":72759670,"question_id":37555403,"body_markdown":"You can just call `setFitToContents(true)` method on `BottomSheetBehavior` to make it not expand fully and its height will be equal to the height of you bottom sheet layout. Be sure that your layout is height is set to `wrap_content`.","title":"Android BottomSheetDialogFragment does not expand completely","body":"<p>You can just call <code>setFitToContents(true)</code> method on <code>BottomSheetBehavior</code> to make it not expand fully and its height will be equal to the height of you bottom sheet layout. Be sure that your layout is height is set to <code>wrap_content</code>.</p>\n"},{"tags":[],"owner":{"account_id":1688426,"reputation":91,"user_id":1551258,"display_name":"freddyboy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699440509,"creation_date":1699440509,"answer_id":77444869,"question_id":37555403,"body_markdown":"By using BottomSheetCallback like this :\r\n\r\n    class MyBottomSheetDialogFragment() : BottomSheetCallback() { \r\n        private val bottomSheetBehavior: BottomSheetBehavior&lt;ConstraintLayout&gt;\r\n    \r\n        override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\r\n            super.onViewCreated(view, savedInstanceState)\r\n    \r\n            bottomSheetBehavior = BottomSheetBehavior.from(binding.bottomSheet)\r\n            bottomSheetBehavior.addBottomSheetCallback(this)\r\n        }\r\n    \r\n        override fun onStateChanged(bottomSheet: View, newState: Int) {\r\n            val slideOffset: Float = bottomSheetBehavior.calculateSlideOffset()\r\n            if (newState == STATE_EXPANDED &amp;&amp; slideOffset &lt; 1f) {\r\n                // Enforce to expand the bottom sheet fully.\r\n                bottomSheetBehavior.halfExpandedRatio = slideOffset\r\n                bottomSheetBehavior.state = STATE_HALF_EXPANDED\r\n                bottomSheetBehavior.state = STATE_EXPANDED\r\n            }\r\n        }\r\n    \r\n        override fun onSlide(bottomSheet: View, slideOffset: Float) {\r\n            if (slideOffset &gt; 1f) {\r\n                // Reduce the height of the expanded bottom sheet.\r\n                bottomSheetBehavior.halfExpandedRatio = BOTTOM_SHEET_SLIDE_OFFSET_ALMOST_FULL\r\n                bottomSheetBehavior.state = STATE_HALF_EXPANDED\r\n                bottomSheetBehavior.state = STATE_EXPANDED\r\n            }\r\n        }\r\n    \r\n        companion object {\r\n            private const val BOTTOM_SHEET_SLIDE_OFFSET_ALMOST_FULL = 0.9f\r\n        }\r\n    }\r\n\r\n","title":"Android BottomSheetDialogFragment does not expand completely","body":"<p>By using BottomSheetCallback like this :</p>\n<pre><code>class MyBottomSheetDialogFragment() : BottomSheetCallback() { \n    private val bottomSheetBehavior: BottomSheetBehavior&lt;ConstraintLayout&gt;\n\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n        bottomSheetBehavior = BottomSheetBehavior.from(binding.bottomSheet)\n        bottomSheetBehavior.addBottomSheetCallback(this)\n    }\n\n    override fun onStateChanged(bottomSheet: View, newState: Int) {\n        val slideOffset: Float = bottomSheetBehavior.calculateSlideOffset()\n        if (newState == STATE_EXPANDED &amp;&amp; slideOffset &lt; 1f) {\n            // Enforce to expand the bottom sheet fully.\n            bottomSheetBehavior.halfExpandedRatio = slideOffset\n            bottomSheetBehavior.state = STATE_HALF_EXPANDED\n            bottomSheetBehavior.state = STATE_EXPANDED\n        }\n    }\n\n    override fun onSlide(bottomSheet: View, slideOffset: Float) {\n        if (slideOffset &gt; 1f) {\n            // Reduce the height of the expanded bottom sheet.\n            bottomSheetBehavior.halfExpandedRatio = BOTTOM_SHEET_SLIDE_OFFSET_ALMOST_FULL\n            bottomSheetBehavior.state = STATE_HALF_EXPANDED\n            bottomSheetBehavior.state = STATE_EXPANDED\n        }\n    }\n\n    companion object {\n        private const val BOTTOM_SHEET_SLIDE_OFFSET_ALMOST_FULL = 0.9f\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":328638,"reputation":1655,"user_id":651714,"accept_rate":67,"display_name":"Nandish A"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47467,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"accepted_answer_id":37782673,"answer_count":11,"score":35,"last_activity_date":1699440509,"creation_date":1464727924,"question_id":37555403,"body_markdown":"I have the following test bottom sheet implementation. \r\n\r\nWhen I set the peekHeight to a value less than 500, it works. After some value, any increase in peek height will not change how the bottom sheet is expanded. It Just remains there to only drag manually. How do we set the peekHeight programmatically to ensure that the bottom sheet is auto expanded to the peek height.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n**bottom_sheet_dialog_main**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;android.support.design.widget.CoordinatorLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        android:id=&quot;@+id/locUXCoordinatorLayout&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;&gt;\r\n        \r\n        &lt;LinearLayout\r\n            android:id=&quot;@+id/locUXView&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:fitsSystemWindows=&quot;true&quot;\r\n            android:orientation=&quot;vertical&quot;\r\n            app:behavior_hideable=&quot;false&quot;\r\n            app:behavior_peekHeight=&quot;0dp&quot;\r\n            app:layout_behavior=&quot;@string/bottom_sheet_behavior&quot;&gt;\r\n    \r\n            &lt;TextView\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;100dp&quot;\r\n                android:text=&quot;1 Value&quot; /&gt;\r\n    \r\n            &lt;TextView\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;100dp&quot;\r\n                android:text=&quot;2 Value&quot; /&gt;\r\n    \r\n            &lt;TextView\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;100dp&quot;\r\n                android:text=&quot;3 Value&quot; /&gt;\r\n    \r\n            &lt;TextView\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;100dp&quot;\r\n                android:text=&quot;4 Value&quot; /&gt;\r\n    \r\n            &lt;TextView\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;100dp&quot;\r\n                android:text=&quot;5 Value&quot; /&gt;\r\n    \r\n            &lt;TextView\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;100dp&quot;\r\n                android:text=&quot;6 Value&quot; /&gt;\r\n    \r\n            &lt;TextView\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;100dp&quot;\r\n                android:text=&quot;7 Value&quot; /&gt;\r\n    \r\n            &lt;TextView\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;100dp&quot;\r\n                android:text=&quot;8 Value&quot; /&gt;\r\n    \r\n            &lt;TextView\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;100dp&quot;\r\n                android:text=&quot;9 Value&quot; /&gt;\r\n    \r\n            &lt;TextView\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;100dp&quot;\r\n                android:text=&quot;First Value&quot; /&gt;\r\n        &lt;/LinearLayout&gt;\r\n    &lt;/android.support.design.widget.CoordinatorLayout&gt;\r\n\r\n\r\n**Java code**\r\n\r\n    public class MyBottomSheetDialogFragment extends BottomSheetDialogFragment {\r\n    \r\n        private static BottomSheetBehavior bottomSheetBehavior;\r\n        private static View bottomSheetInternal;\r\n        private static MyBottomSheetDialogFragment INSTANCE;\r\n    \r\n        @Nullable\r\n        @Override\r\n        public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n            getDialog().setOnShowListener(new DialogInterface.OnShowListener() {\r\n                @Override\r\n                public void onShow(DialogInterface dialog) {\r\n                    BottomSheetDialog d = (BottomSheetDialog) dialog;\r\n                    CoordinatorLayout coordinatorLayout = (CoordinatorLayout)d.findViewById(R.id.locUXCoordinatorLayout);\r\n                    bottomSheetInternal = d.findViewById(R.id.locUXView);\r\n                    bottomSheetBehavior = BottomSheetBehavior.from(bottomSheetInternal);\r\n                    bottomSheetBehavior.setPeekHeight(bottomSheetInternal.getHeight());\r\n                    bottomSheetInternal.requestLayout();\r\n                    coordinatorLayout.getLayoutParams().height = bottomSheetInternal.getHeight();\r\n                    Toast.makeText(getActivity(), &quot;Height is&quot; + bottomSheetInternal.getHeight() + &quot;  &quot; + coordinatorLayout.getLayoutParams().height, Toast.LENGTH_LONG).show();\r\n    \r\n                }\r\n            });\r\n            INSTANCE = this;\r\n            return inflater.inflate(R.layout.bottom_sheet_dialog_main, container, false);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/C3OgV.png","title":"Android BottomSheetDialogFragment does not expand completely","body":"<p>I have the following test bottom sheet implementation. </p>\n\n<p>When I set the peekHeight to a value less than 500, it works. After some value, any increase in peek height will not change how the bottom sheet is expanded. It Just remains there to only drag manually. How do we set the peekHeight programmatically to ensure that the bottom sheet is auto expanded to the peek height.</p>\n\n<p><a href=\"https://i.stack.imgur.com/C3OgV.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/C3OgV.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>bottom_sheet_dialog_main</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.design.widget.CoordinatorLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    android:id=\"@+id/locUXCoordinatorLayout\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"&gt;\n\n    &lt;LinearLayout\n        android:id=\"@+id/locUXView\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:fitsSystemWindows=\"true\"\n        android:orientation=\"vertical\"\n        app:behavior_hideable=\"false\"\n        app:behavior_peekHeight=\"0dp\"\n        app:layout_behavior=\"@string/bottom_sheet_behavior\"&gt;\n\n        &lt;TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"100dp\"\n            android:text=\"1 Value\" /&gt;\n\n        &lt;TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"100dp\"\n            android:text=\"2 Value\" /&gt;\n\n        &lt;TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"100dp\"\n            android:text=\"3 Value\" /&gt;\n\n        &lt;TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"100dp\"\n            android:text=\"4 Value\" /&gt;\n\n        &lt;TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"100dp\"\n            android:text=\"5 Value\" /&gt;\n\n        &lt;TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"100dp\"\n            android:text=\"6 Value\" /&gt;\n\n        &lt;TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"100dp\"\n            android:text=\"7 Value\" /&gt;\n\n        &lt;TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"100dp\"\n            android:text=\"8 Value\" /&gt;\n\n        &lt;TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"100dp\"\n            android:text=\"9 Value\" /&gt;\n\n        &lt;TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"100dp\"\n            android:text=\"First Value\" /&gt;\n    &lt;/LinearLayout&gt;\n&lt;/android.support.design.widget.CoordinatorLayout&gt;\n</code></pre>\n\n<p><strong>Java code</strong></p>\n\n<pre><code>public class MyBottomSheetDialogFragment extends BottomSheetDialogFragment {\n\n    private static BottomSheetBehavior bottomSheetBehavior;\n    private static View bottomSheetInternal;\n    private static MyBottomSheetDialogFragment INSTANCE;\n\n    @Nullable\n    @Override\n    public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\n        getDialog().setOnShowListener(new DialogInterface.OnShowListener() {\n            @Override\n            public void onShow(DialogInterface dialog) {\n                BottomSheetDialog d = (BottomSheetDialog) dialog;\n                CoordinatorLayout coordinatorLayout = (CoordinatorLayout)d.findViewById(R.id.locUXCoordinatorLayout);\n                bottomSheetInternal = d.findViewById(R.id.locUXView);\n                bottomSheetBehavior = BottomSheetBehavior.from(bottomSheetInternal);\n                bottomSheetBehavior.setPeekHeight(bottomSheetInternal.getHeight());\n                bottomSheetInternal.requestLayout();\n                coordinatorLayout.getLayoutParams().height = bottomSheetInternal.getHeight();\n                Toast.makeText(getActivity(), \"Height is\" + bottomSheetInternal.getHeight() + \"  \" + coordinatorLayout.getLayoutParams().height, Toast.LENGTH_LONG).show();\n\n            }\n        });\n        INSTANCE = this;\n        return inflater.inflate(R.layout.bottom_sheet_dialog_main, container, false);\n    }\n}\n</code></pre>\n"},{"tags":["java","dependencies","stack-trace"],"comments":[{"owner":{"account_id":16082911,"reputation":65,"user_id":11608364,"display_name":"Wien 1683"},"score":0,"creation_date":1699441406,"post_id":77444837,"comment_id":136530987,"body_markdown":"Thanks! Now I understood that tilde means some of uncertainty. In this case which code is executed in real world between multiple dependencies ??","body":"Thanks! Now I understood that tilde means some of uncertainty. In this case which code is executed in real world between multiple dependencies ??"}],"owner":{"account_id":16082911,"reputation":65,"user_id":11608364,"display_name":"Wien 1683"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1699442999,"answer_count":0,"score":0,"last_activity_date":1699440291,"creation_date":1699440291,"question_id":77444837,"body_markdown":"I encountered below error. I can solve NosuchMethodError by changing some of the dependency in gradle file.\r\n\r\n    Caused by: java.lang.NoSuchMethodError: io.netty.util.internal.PlatformDependent.safeConstructPutInt(Ljava/lang/Object;JI)V\r\n    \tat io.netty.util.internal.ReferenceCountUpdater.setInitialValue(ReferenceCountUpdater.java:67) ~[netty-common-4.1.79.Final.jar:4.1.33.Final]\r\n    \tat io.netty.buffer.AbstractReferenceCountedByteBuf.&lt;init&gt;(AbstractReferenceCountedByteBuf.java:50) ~[netty-buffer-4.1.79.Final.jar:4.1.79.Final]\r\n    \tat io.netty.buffer.PooledByteBuf.&lt;init&gt;(PooledByteBuf.java:45) ~[netty-buffer-4.1.79.Final.jar:4.1.79.Final]\r\n    \tat io.netty.buffer.PooledUnsafeDirectByteBuf.&lt;init&gt;(PooledUnsafeDirectByteBuf.java:47) ~[netty-buffer-4.1.79.Final.jar:4.1.79.Final]\r\n    \tat io.netty.buffer.PooledUnsafeDirectByteBuf.&lt;init&gt;(PooledUnsafeDirectByteBuf.java:29) ~[netty-buffer-4.1.79.Final.jar:4.1.79.Final]\r\n    \tat io.netty.buffer.PooledUnsafeDirectByteBuf$1.newObject(PooledUnsafeDirectByteBuf.java:34) ~[netty-buffer-4.1.79.Final.jar:4.1.79.Final]\r\n    \tat io.netty.buffer.PooledUnsafeDirectByteBuf$1.newObject(PooledUnsafeDirectByteBuf.java:31) ~[netty-buffer-4.1.79.Final.jar:4.1.79.Final]\r\n    \tat io.netty.util.internal.ObjectPool$RecyclerObjectPool$1.newObject(ObjectPool.java:77) ~[netty-common-4.1.79.Final.jar:4.1.33.Final]\r\n\r\n\r\nBut I wonder what is the meaning of square bracket. It seems like that there are two jar files are included. \r\n\r\n    ~[netty-buffer-4.1.33.Final.jar:4.1.79.Final]\r\n\r\nIn this case which dependency will be used in run time?\r\n","title":"Meaning of square bracket in java stacktrace","body":"<p>I encountered below error. I can solve NosuchMethodError by changing some of the dependency in gradle file.</p>\n<pre><code>Caused by: java.lang.NoSuchMethodError: io.netty.util.internal.PlatformDependent.safeConstructPutInt(Ljava/lang/Object;JI)V\n    at io.netty.util.internal.ReferenceCountUpdater.setInitialValue(ReferenceCountUpdater.java:67) ~[netty-common-4.1.79.Final.jar:4.1.33.Final]\n    at io.netty.buffer.AbstractReferenceCountedByteBuf.&lt;init&gt;(AbstractReferenceCountedByteBuf.java:50) ~[netty-buffer-4.1.79.Final.jar:4.1.79.Final]\n    at io.netty.buffer.PooledByteBuf.&lt;init&gt;(PooledByteBuf.java:45) ~[netty-buffer-4.1.79.Final.jar:4.1.79.Final]\n    at io.netty.buffer.PooledUnsafeDirectByteBuf.&lt;init&gt;(PooledUnsafeDirectByteBuf.java:47) ~[netty-buffer-4.1.79.Final.jar:4.1.79.Final]\n    at io.netty.buffer.PooledUnsafeDirectByteBuf.&lt;init&gt;(PooledUnsafeDirectByteBuf.java:29) ~[netty-buffer-4.1.79.Final.jar:4.1.79.Final]\n    at io.netty.buffer.PooledUnsafeDirectByteBuf$1.newObject(PooledUnsafeDirectByteBuf.java:34) ~[netty-buffer-4.1.79.Final.jar:4.1.79.Final]\n    at io.netty.buffer.PooledUnsafeDirectByteBuf$1.newObject(PooledUnsafeDirectByteBuf.java:31) ~[netty-buffer-4.1.79.Final.jar:4.1.79.Final]\n    at io.netty.util.internal.ObjectPool$RecyclerObjectPool$1.newObject(ObjectPool.java:77) ~[netty-common-4.1.79.Final.jar:4.1.33.Final]\n</code></pre>\n<p>But I wonder what is the meaning of square bracket. It seems like that there are two jar files are included.</p>\n<pre><code>~[netty-buffer-4.1.33.Final.jar:4.1.79.Final]\n</code></pre>\n<p>In this case which dependency will be used in run time?</p>\n"},{"tags":["java","validation","enums","quarkus"],"comments":[{"owner":{"account_id":9494766,"reputation":147,"user_id":7058262,"display_name":"prasannajoshi"},"score":0,"creation_date":1698765963,"post_id":77397008,"comment_id":136445436,"body_markdown":"can you attach parser code also where you passing enum type","body":"can you attach parser code also where you passing enum type"},{"owner":{"account_id":22762575,"reputation":25,"user_id":16921153,"display_name":"Jossany Moura"},"score":0,"creation_date":1698769348,"post_id":77397008,"comment_id":136446253,"body_markdown":"@prasannajoshi just updated with more details.","body":"@prasannajoshi just updated with more details."}],"answers":[{"tags":[],"owner":{"account_id":25667539,"reputation":1,"user_id":19432251,"display_name":"Aloysius Tri Sulistyo Putranto"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699440149,"creation_date":1699440149,"answer_id":77444823,"question_id":77397008,"body_markdown":"try this\r\n\r\n    public enum TypeLauncher {\r\n    \r\n        COMPRA(&quot;COMPRA&quot;),\r\n        ESTORNO(&quot;ESTORNO&quot;),\r\n        PAGAMENTO(&quot;PAGAMENTO&quot;),\r\n        OUTROS(&quot;OUTROS&quot;);\r\n    \r\n        private final String name;\r\n\t\t\r\n\t\tTypeLaunche(String name) {this.name = name;}\r\n\t\tpublic String getName() {return name;}\r\n\t}\r\n\r\nAnd to set List\r\n\r\n    List&lt;String&gt; acceptedValues = Stream.of(TypeLauncher.values()).map(TypeLauncher::getName).collect(Collectors.toList());\r\n\r\n\r\nAnd than u can compare it","title":"How to make an enum validation in java?","body":"<p>try this</p>\n<pre><code>public enum TypeLauncher {\n\n    COMPRA(&quot;COMPRA&quot;),\n    ESTORNO(&quot;ESTORNO&quot;),\n    PAGAMENTO(&quot;PAGAMENTO&quot;),\n    OUTROS(&quot;OUTROS&quot;);\n\n    private final String name;\n    \n    TypeLaunche(String name) {this.name = name;}\n    public String getName() {return name;}\n}\n</code></pre>\n<p>And to set List</p>\n<pre><code>List&lt;String&gt; acceptedValues = Stream.of(TypeLauncher.values()).map(TypeLauncher::getName).collect(Collectors.toList());\n</code></pre>\n<p>And than u can compare it</p>\n"}],"owner":{"account_id":22762575,"reputation":25,"user_id":16921153,"display_name":"Jossany Moura"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699440149,"creation_date":1698764483,"question_id":77397008,"body_markdown":"It&#39;s a quarkus java project.\r\n\r\nThe bean that I am trying to validate is:\r\n```\r\nimport io.quarkus.runtime.annotations.RegisterForReflection;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\nimport org.eclipse.microprofile.openapi.annotations.media.Schema;\r\n\r\nimport javax.validation.constraints.*;\r\nimport java.math.BigDecimal;\r\nimport java.time.LocalDateTime;\r\n\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Data\r\n@RegisterForReflection\r\npublic class Launche {\r\n\r\n    public static final int VALUE_100 = 100;\r\n\r\n    public static final int VALUE_40 = 40;\r\n\r\n    public static final int VALUE_10 = 10;\r\n\r\n    public static final int VALUE_6 = 6;\r\n\r\n    public static final int VALUE_2 = 2;\r\n\r\n    @NotNull\r\n    @Schema(description = &quot;Transaction date&quot;, example = &quot;2023-02-21T10:00:00.000Z&quot;)\r\n    private LocalDateTime date;\r\n\r\n    @NotBlank\r\n    @Size(max = VALUE_100, message = &quot;size must be between 1 and 100&quot;)\r\n    @Schema(description = &quot;Transaction description&quot;, example = &quot;Marketplace&quot;)\r\n    private String description;\r\n\r\n    @NotNull\r\n    @PositiveOrZero\r\n    @Schema(format = &quot;BigDecimal&quot;, description = &quot;Transaction amount&quot;, example = &quot;10.00&quot;)\r\n    @Digits(integer = VALUE_10, fraction = VALUE_2)\r\n    private BigDecimal amount;\r\n\r\n   \r\n    **@NotNull\r\n    @Schema(format = &quot;enum&quot;, description = &quot;Launche type&quot;, example = &quot;COMPRA&quot;)\r\n    private TypeLaunche type;**\r\n  \r\n\r\n    @NotNull\r\n    @Schema(description = &quot;Score&quot;, example = &quot;true&quot;)\r\n    private Boolean score;\r\n\r\n    @Size(max = VALUE_40, message = &quot;size must be between 1 and 40&quot;)\r\n    @Schema(description = &quot;Transaction establishment name&quot;, example = &quot;Marketplace&quot;)\r\n    private String establishmentName;\r\n\r\n    @NotNull\r\n    @Schema(format = &quot;BigDecimal&quot;, description = &quot;Real dollar quote of the day&quot;, example = &quot;4.50&quot;)\r\n    @Digits(integer = VALUE_6, fraction = VALUE_6)\r\n    private BigDecimal dollarQuotation;\r\n\r\n    @Override\r\n    public String toString() {\r\n        return GsonFactory.getInstance().toJson(this);\r\n    }\r\n}\r\n```\r\n\r\nThe enum class is:\r\n\r\n```\r\n\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Getter;\r\n\r\n@AllArgsConstructor\r\n@Getter\r\npublic enum TypeLaunche {\r\n\r\n    COMPRA(&quot;COMPRA&quot;),\r\n    ESTORNO(&quot;ESTORNO&quot;),\r\n    PAGAMENTO(&quot;PAGAMENTO&quot;),\r\n    OUTROS(&quot;OUTROS&quot;);\r\n\r\n    private String value;\r\n}\r\n```\r\n\r\nAnd my validation class is:\r\n\r\n```\r\nimport javax.validation.ConstraintValidator;\r\nimport javax.validation.ConstraintValidatorContext;\r\nimport java.util.List;\r\nimport java.util.stream.Collectors;\r\nimport java.util.stream.Stream;\r\n\r\npublic class EnumTypeValidatorImpl implements ConstraintValidator&lt;EnumTypeValidator, CharSequence&gt; {\r\n\r\n    private List&lt;String&gt; acceptedValues;\r\n\r\n    @Override\r\n    public void initialize(final EnumTypeValidator annotation) {\r\n        acceptedValues = Stream.of(annotation.enumClass().getEnumConstants())\r\n                .map(Enum::name)\r\n                .collect(Collectors.toList());\r\n    }\r\n\r\n    @Override\r\n    public boolean isValid(final CharSequence value, final ConstraintValidatorContext context) {\r\n        if (value == null) {\r\n            return true;\r\n        }\r\n\r\n        return acceptedValues.contains(value.toString());\r\n    }\r\n\r\n}\r\n```\r\n\r\nWhen I send a **type** different from the enum options my parser sets it as null. Shouldn&#39;t the validator throw an error for it being different than the enum options? I set the **type** as a TypeLaunche in my Bean.\r\n\r\nI think I don&#39;t understand how this validation works.\r\n\r\n**Update**\r\n\r\nThe code where I parse the body of my requisition.\r\nMore details: type is an attribute of the class Launche and Launche is an attribute of the class CardInvoice. CardInvoice is the class that I use to parse the body of the requisition. Code below:\r\n\r\n```\r\n private CardInvoice parseCardInvoiceFromMessageBody(final String body) {\r\n        LOGGER.info(&quot;Parsing API Gateway Message into CardInvoice object.&quot;);\r\n        Gson gson = GsonFactory.getInstance();\r\n        try {\r\n            var obj = gson.fromJson(body, CardInvoice.class);\r\n            LogUtil.setRequestUuid(obj.getUuid());\r\n            return obj;\r\n        } catch (Exception ex) {\r\n            LOGGER.error(&quot;Invalid API Gateway Message body.&quot;, ex);\r\n            String value = extractValueErrorMessage(String.valueOf(ex));\r\n            JsonElement jsonElement = JsonParser.parseString(body);\r\n            List&lt;String&gt; fields = null;\r\n            if (jsonElement.isJsonObject()) {\r\n                JsonObject jsonObject = jsonElement.getAsJsonObject();\r\n                fields = findKeys(jsonObject, value);\r\n            }\r\n            throw new InvalidMessageBodyException(String.format(&quot;Invalid API Gateway Message body. &quot;\r\n                    + &quot;Parse fields: [%s], value: [%s]&quot;, fields, value));\r\n        }\r\n    }\r\n```","title":"How to make an enum validation in java?","body":"<p>It's a quarkus java project.</p>\n<p>The bean that I am trying to validate is:</p>\n<pre><code>import io.quarkus.runtime.annotations.RegisterForReflection;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\nimport org.eclipse.microprofile.openapi.annotations.media.Schema;\n\nimport javax.validation.constraints.*;\nimport java.math.BigDecimal;\nimport java.time.LocalDateTime;\n\n@NoArgsConstructor\n@AllArgsConstructor\n@Data\n@RegisterForReflection\npublic class Launche {\n\n    public static final int VALUE_100 = 100;\n\n    public static final int VALUE_40 = 40;\n\n    public static final int VALUE_10 = 10;\n\n    public static final int VALUE_6 = 6;\n\n    public static final int VALUE_2 = 2;\n\n    @NotNull\n    @Schema(description = &quot;Transaction date&quot;, example = &quot;2023-02-21T10:00:00.000Z&quot;)\n    private LocalDateTime date;\n\n    @NotBlank\n    @Size(max = VALUE_100, message = &quot;size must be between 1 and 100&quot;)\n    @Schema(description = &quot;Transaction description&quot;, example = &quot;Marketplace&quot;)\n    private String description;\n\n    @NotNull\n    @PositiveOrZero\n    @Schema(format = &quot;BigDecimal&quot;, description = &quot;Transaction amount&quot;, example = &quot;10.00&quot;)\n    @Digits(integer = VALUE_10, fraction = VALUE_2)\n    private BigDecimal amount;\n\n   \n    **@NotNull\n    @Schema(format = &quot;enum&quot;, description = &quot;Launche type&quot;, example = &quot;COMPRA&quot;)\n    private TypeLaunche type;**\n  \n\n    @NotNull\n    @Schema(description = &quot;Score&quot;, example = &quot;true&quot;)\n    private Boolean score;\n\n    @Size(max = VALUE_40, message = &quot;size must be between 1 and 40&quot;)\n    @Schema(description = &quot;Transaction establishment name&quot;, example = &quot;Marketplace&quot;)\n    private String establishmentName;\n\n    @NotNull\n    @Schema(format = &quot;BigDecimal&quot;, description = &quot;Real dollar quote of the day&quot;, example = &quot;4.50&quot;)\n    @Digits(integer = VALUE_6, fraction = VALUE_6)\n    private BigDecimal dollarQuotation;\n\n    @Override\n    public String toString() {\n        return GsonFactory.getInstance().toJson(this);\n    }\n}\n</code></pre>\n<p>The enum class is:</p>\n<pre><code>\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\n\n@AllArgsConstructor\n@Getter\npublic enum TypeLaunche {\n\n    COMPRA(&quot;COMPRA&quot;),\n    ESTORNO(&quot;ESTORNO&quot;),\n    PAGAMENTO(&quot;PAGAMENTO&quot;),\n    OUTROS(&quot;OUTROS&quot;);\n\n    private String value;\n}\n</code></pre>\n<p>And my validation class is:</p>\n<pre><code>import javax.validation.ConstraintValidator;\nimport javax.validation.ConstraintValidatorContext;\nimport java.util.List;\nimport java.util.stream.Collectors;\nimport java.util.stream.Stream;\n\npublic class EnumTypeValidatorImpl implements ConstraintValidator&lt;EnumTypeValidator, CharSequence&gt; {\n\n    private List&lt;String&gt; acceptedValues;\n\n    @Override\n    public void initialize(final EnumTypeValidator annotation) {\n        acceptedValues = Stream.of(annotation.enumClass().getEnumConstants())\n                .map(Enum::name)\n                .collect(Collectors.toList());\n    }\n\n    @Override\n    public boolean isValid(final CharSequence value, final ConstraintValidatorContext context) {\n        if (value == null) {\n            return true;\n        }\n\n        return acceptedValues.contains(value.toString());\n    }\n\n}\n</code></pre>\n<p>When I send a <strong>type</strong> different from the enum options my parser sets it as null. Shouldn't the validator throw an error for it being different than the enum options? I set the <strong>type</strong> as a TypeLaunche in my Bean.</p>\n<p>I think I don't understand how this validation works.</p>\n<p><strong>Update</strong></p>\n<p>The code where I parse the body of my requisition.\nMore details: type is an attribute of the class Launche and Launche is an attribute of the class CardInvoice. CardInvoice is the class that I use to parse the body of the requisition. Code below:</p>\n<pre><code> private CardInvoice parseCardInvoiceFromMessageBody(final String body) {\n        LOGGER.info(&quot;Parsing API Gateway Message into CardInvoice object.&quot;);\n        Gson gson = GsonFactory.getInstance();\n        try {\n            var obj = gson.fromJson(body, CardInvoice.class);\n            LogUtil.setRequestUuid(obj.getUuid());\n            return obj;\n        } catch (Exception ex) {\n            LOGGER.error(&quot;Invalid API Gateway Message body.&quot;, ex);\n            String value = extractValueErrorMessage(String.valueOf(ex));\n            JsonElement jsonElement = JsonParser.parseString(body);\n            List&lt;String&gt; fields = null;\n            if (jsonElement.isJsonObject()) {\n                JsonObject jsonObject = jsonElement.getAsJsonObject();\n                fields = findKeys(jsonObject, value);\n            }\n            throw new InvalidMessageBodyException(String.format(&quot;Invalid API Gateway Message body. &quot;\n                    + &quot;Parse fields: [%s], value: [%s]&quot;, fields, value));\n        }\n    }\n</code></pre>\n"},{"tags":["java","jpa","entitygraph"],"comments":[{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":0,"creation_date":1699445629,"post_id":77444785,"comment_id":136531664,"body_markdown":"1. Nonsense. If you use the repo there will be no join since the `@ManyToOne` is marked as lazy. 2. limit(10) in the streaming operation only throws away the results of the query. Anything on stackover get&#39;s nothing from me.","body":"1. Nonsense. If you use the repo there will be no join since the <code>@ManyToOne</code> is marked as lazy. 2. limit(10) in the streaming operation only throws away the results of the query. Anything on stackover get&#39;s nothing from me."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1699456866,"post_id":77444785,"comment_id":136534246,"body_markdown":"How the relationships are fetched when specified in an EntityGraph is not defined in JPA - you can still get N+1 queries depending on your provider and settings. If you want to force an outer join on the query to fetch the relationship, you should use a fetch Join in the query itself, while some providers (EclipseLink) allow you to specify fetch joins and nested fetch joins as query hints. Hibernate usually does eager fetch as joins though, so if the spring EntityGraph annotation works but the hint doesn&#39;t - check that you are using jakarta.persistence and not javax.persistence.","body":"How the relationships are fetched when specified in an EntityGraph is not defined in JPA - you can still get N+1 queries depending on your provider and settings. If you want to force an outer join on the query to fetch the relationship, you should use a fetch Join in the query itself, while some providers (EclipseLink) allow you to specify fetch joins and nested fetch joins as query hints. Hibernate usually does eager fetch as joins though, so if the spring EntityGraph annotation works but the hint doesn&#39;t - check that you are using jakarta.persistence and not javax.persistence."},{"owner":{"account_id":3765971,"reputation":1249,"user_id":3129510,"accept_rate":73,"display_name":"Alex Zhulin"},"score":0,"creation_date":1699466299,"post_id":77444785,"comment_id":136536318,"body_markdown":"@Chris Thank you for your mention about javax vs jakarta. I&#39;ll try to check this idea. Now I&#39;m using javax","body":"@Chris Thank you for your mention about javax vs jakarta. I&#39;ll try to check this idea. Now I&#39;m using javax"}],"owner":{"account_id":3765971,"reputation":1249,"user_id":3129510,"accept_rate":73,"display_name":"Alex Zhulin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699439842,"creation_date":1699439842,"question_id":77444785,"body_markdown":"I have an entity like this\r\n\r\n    @Entity\r\n    @Table(name = &quot;ACQ_OPERATION&quot;)\r\n    @Getter\r\n    @Setter\r\n    @NamedEntityGraph(\r\n            name = &quot;acquiringoperation-entity-graph&quot;,\r\n            attributeNodes = {\r\n                    @NamedAttributeNode(&quot;cardData&quot;),\r\n            }\r\n    )\r\n    public class AcquiringOperation extends GenericEntity&lt;Long&gt; {\r\n    \t...\r\n    \r\n        @ManyToOne(fetch = FetchType.LAZY)\r\n        @JoinColumn(name = &quot;card_data_id&quot;)\r\n        private CardData cardData;\r\n    \r\n    \t...\r\n    }\r\n\r\nAs you can see CardData entity has a FetchType.LAZY fetch type. I want to fetch AcquiringOperation with CardData in one query with left join.\r\n\r\nWhen I try to get data with JPQL\r\n\r\n    EntityGraph&lt;AcquiringOperation&gt; entityGraph = (EntityGraph&lt;AcquiringOperation&gt;) dataService.getEntityManager().getEntityGraph(&quot;acquiringoperation-entity-graph&quot;);\r\n\r\n        acquiringOperations = dataService.getEntityManager().createQuery(&quot;select p from AcquiringOperation p&quot;, AcquiringOperation.class)\r\n                .setHint(&quot;jakarta.persistence.fetchgraph&quot;, entityGraph)\r\n                .getResultList().stream().limit(10).collect(toList());\r\n\r\nI got n+1 queries\r\n\r\nFor AcquiringOperation entity\r\n\r\n    select\r\n        acquiringo0_.id as id1_1_,\r\n    \t...\r\n    from\r\n        ncs_core.acq_operation acquiringo0_\r\n\r\nand for query for CardData for every record\r\n\r\n    select\r\n        carddata0_.id as id1_5_0_,\r\n    \t...\r\n    from\r\n        ncs_core.card_data carddata0_ \r\n    where\r\n        carddata0_.id=?\r\n\r\nOn another hand when I&#39;m using repository for data fetching\r\n\r\n    public interface AcquiringOperationRepository extends BaseRepository&lt;AcquiringOperation&gt; {\r\n        @Override\r\n        @EntityGraph(attributePaths = {&quot;cardData&quot;})\r\n        List&lt;AcquiringOperation&gt; findAll();\r\n    }\r\n    \r\n    acquiringOperations = acquiringOperationRepository.findAll().stream().limit(10).collect(toList());\r\n\r\nt works like a charm with one &quot;left joined query&quot;\r\n\r\n    select\r\n\t\t...\r\n        carddata1_.year as year6_5_1_ \r\n    from\r\n        ncs_core.acq_operation acquiringo0_ \r\n    left outer join\r\n        ncs_core.card_data carddata1_ \r\n            on acquiringo0_.card_data_id=carddata1_.id\r\n\r\nI want to use JPQL or QDSL queries. How can I do this with JPA Entity Graph?\r\n","title":"JPA Entity Graph","body":"<p>I have an entity like this</p>\n<pre><code>@Entity\n@Table(name = &quot;ACQ_OPERATION&quot;)\n@Getter\n@Setter\n@NamedEntityGraph(\n        name = &quot;acquiringoperation-entity-graph&quot;,\n        attributeNodes = {\n                @NamedAttributeNode(&quot;cardData&quot;),\n        }\n)\npublic class AcquiringOperation extends GenericEntity&lt;Long&gt; {\n    ...\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;card_data_id&quot;)\n    private CardData cardData;\n\n    ...\n}\n</code></pre>\n<p>As you can see CardData entity has a FetchType.LAZY fetch type. I want to fetch AcquiringOperation with CardData in one query with left join.</p>\n<p>When I try to get data with JPQL</p>\n<pre><code>EntityGraph&lt;AcquiringOperation&gt; entityGraph = (EntityGraph&lt;AcquiringOperation&gt;) dataService.getEntityManager().getEntityGraph(&quot;acquiringoperation-entity-graph&quot;);\n\n    acquiringOperations = dataService.getEntityManager().createQuery(&quot;select p from AcquiringOperation p&quot;, AcquiringOperation.class)\n            .setHint(&quot;jakarta.persistence.fetchgraph&quot;, entityGraph)\n            .getResultList().stream().limit(10).collect(toList());\n</code></pre>\n<p>I got n+1 queries</p>\n<p>For AcquiringOperation entity</p>\n<pre><code>select\n    acquiringo0_.id as id1_1_,\n    ...\nfrom\n    ncs_core.acq_operation acquiringo0_\n</code></pre>\n<p>and for query for CardData for every record</p>\n<pre><code>select\n    carddata0_.id as id1_5_0_,\n    ...\nfrom\n    ncs_core.card_data carddata0_ \nwhere\n    carddata0_.id=?\n</code></pre>\n<p>On another hand when I'm using repository for data fetching</p>\n<pre><code>public interface AcquiringOperationRepository extends BaseRepository&lt;AcquiringOperation&gt; {\n    @Override\n    @EntityGraph(attributePaths = {&quot;cardData&quot;})\n    List&lt;AcquiringOperation&gt; findAll();\n}\n\nacquiringOperations = acquiringOperationRepository.findAll().stream().limit(10).collect(toList());\n</code></pre>\n<p>t works like a charm with one &quot;left joined query&quot;</p>\n<pre><code>select\n    ...\n    carddata1_.year as year6_5_1_ \nfrom\n    ncs_core.acq_operation acquiringo0_ \nleft outer join\n    ncs_core.card_data carddata1_ \n        on acquiringo0_.card_data_id=carddata1_.id\n</code></pre>\n<p>I want to use JPQL or QDSL queries. How can I do this with JPA Entity Graph?</p>\n"},{"tags":["java","intellij-idea","java-11"],"comments":[{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":1,"creation_date":1547156886,"post_id":54137286,"comment_id":95106294,"body_markdown":"I guess the 2017 version of intellij doesn&#39;t support jdk11 (or maybe it needs a plugin to work), you could try updating to 2018.","body":"I guess the 2017 version of intellij doesn&#39;t support jdk11 (or maybe it needs a plugin to work), you could try updating to 2018."},{"owner":{"account_id":1834364,"reputation":2700,"user_id":1665029,"display_name":"AMagic"},"score":0,"creation_date":1547159655,"post_id":54137286,"comment_id":95107307,"body_markdown":"Thanks @JornVernee based on your advice, I updated and resolved the issue. Java 11 works fine with IntelliJ IDEA 2018.3.3 version.","body":"Thanks @JornVernee based on your advice, I updated and resolved the issue. Java 11 works fine with IntelliJ IDEA 2018.3.3 version."}],"answers":[{"comments":[{"owner":{"account_id":6208837,"reputation":1161,"user_id":4835773,"accept_rate":60,"display_name":"Zafar"},"score":45,"creation_date":1598469734,"post_id":54137824,"comment_id":112472898,"body_markdown":"Even the 2020 version has the same problem. So this is not a correct answer or partially correct. You have to change the sdk version from project structure.","body":"Even the 2020 version has the same problem. So this is not a correct answer or partially correct. You have to change the sdk version from project structure."},{"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"score":3,"creation_date":1598469881,"post_id":54137824,"comment_id":112472966,"body_markdown":"@Zafar this was the correct answer for the original question and the OP has accepted it. But there can be multiple causes for this error which cannot be covered in a single answer.","body":"@Zafar this was the correct answer for the original question and the OP has accepted it. But there can be multiple causes for this error which cannot be covered in a single answer."},{"owner":{"account_id":5633595,"reputation":213,"user_id":4459773,"display_name":"Beckster"},"score":0,"creation_date":1619623631,"post_id":54137824,"comment_id":118962540,"body_markdown":"That&#39;s not the right answer :) or at least not the complete one. You can still run into this issue with newer IntelliJ version as well","body":"That&#39;s not the right answer :) or at least not the complete one. You can still run into this issue with newer IntelliJ version as well"},{"owner":{"account_id":3214004,"reputation":1859,"user_id":4871676,"accept_rate":90,"display_name":"Plain_Dude_Sleeping_Alone"},"score":0,"creation_date":1664790141,"post_id":54137824,"comment_id":130544246,"body_markdown":"Not a solution why whould everything needs to be updated. The 4th solution works most of the time.","body":"Not a solution why whould everything needs to be updated. The 4th solution works most of the time."}],"tags":[],"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"comment_count":4,"down_vote_count":8,"up_vote_count":31,"is_accepted":false,"score":23,"last_activity_date":1547159418,"creation_date":1547159418,"answer_id":54137824,"question_id":54137286,"body_markdown":"Please [update](http://www.jetbrains.com/idea/download/index.html) to IntelliJ IDEA 2018.x to get Java 11 support. Your IntelliJ IDEA version was released before Java 11 and doesn&#39;t support this Java version.","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>Please <a href=\"http://www.jetbrains.com/idea/download/index.html\" rel=\"noreferrer\">update</a> to IntelliJ IDEA 2018.x to get Java 11 support. Your IntelliJ IDEA version was released before Java 11 and doesn't support this Java version.</p>\n"},{"comments":[{"owner":{"account_id":2168763,"reputation":410,"user_id":1921287,"display_name":"VKB"},"score":3,"creation_date":1555631755,"post_id":54215199,"comment_id":98186285,"body_markdown":"This worked for me even though the IntelliJ date is older than the Java release date.   \nFile =&gt; Project Structure =&gt; Project =&gt; Project SDK. \nAdded the newly downloaded JDK under `New`  and hit `Apply` =&gt; `OK` \n\nThe  project started compiling immediately after.","body":"This worked for me even though the IntelliJ date is older than the Java release date.    File =&gt; Project Structure =&gt; Project =&gt; Project SDK.  Added the newly downloaded JDK under <code>New</code>  and hit <code>Apply</code> =&gt; <code>OK</code>   The  project started compiling immediately after."},{"owner":{"account_id":1352612,"reputation":4119,"user_id":1357094,"accept_rate":85,"display_name":"cellepo"},"score":0,"creation_date":1568821630,"post_id":54215199,"comment_id":102399570,"body_markdown":"This an other similar/possibly-necessary solutions are described in great further detail (with screenshots) at https://stackoverflow.com/a/26009627/1357094","body":"This an other similar/possibly-necessary solutions are described in great further detail (with screenshots) at <a href=\"https://stackoverflow.com/a/26009627/1357094\">stackoverflow.com/a/26009627/1357094</a>"}],"tags":[],"owner":{"account_id":12242688,"reputation":2142,"user_id":10854998,"display_name":"Gryu"},"comment_count":2,"down_vote_count":0,"up_vote_count":72,"is_accepted":false,"score":72,"last_activity_date":1576257874,"creation_date":1547634996,"answer_id":54215199,"question_id":54137286,"body_markdown":" - I&#39;ve got the same info messages and error message today, but I have\r\n   recently updated Idea -&gt; 2018.3.3, built on January 9, 2019. \r\n - To resolve this issue I&#39;ve changed **File-&gt;Project Structure-&gt;Modules** -&gt;&gt;\r\n   Language level to 10. \r\n\r\n - And check **File -&gt; Settings -&gt; Build, Execution,\r\n   Deployment -&gt; Compiler -&gt; Java Compiler** -&gt;&gt; **Project bytecode**\r\n   and **Per-module bytecode** versions. I have 11 there.\r\n - Now I don&#39;t get these notifications and the error.\r\n\r\n   It could be useful for someone like me, having the most recent Idea and getting the same error.","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<ul>\n<li>I've got the same info messages and error message today, but I have\nrecently updated Idea -> 2018.3.3, built on January 9, 2019. </li>\n<li><p>To resolve this issue I've changed <strong>File->Project Structure->Modules</strong> ->>\nLanguage level to 10. </p></li>\n<li><p>And check <strong>File -> Settings -> Build, Execution,\nDeployment -> Compiler -> Java Compiler</strong> ->> <strong>Project bytecode</strong>\nand <strong>Per-module bytecode</strong> versions. I have 11 there.</p></li>\n<li><p>Now I don't get these notifications and the error.</p>\n\n<p>It could be useful for someone like me, having the most recent Idea and getting the same error.</p></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":1352612,"reputation":4119,"user_id":1357094,"accept_rate":85,"display_name":"cellepo"},"score":2,"creation_date":1568821623,"post_id":54562060,"comment_id":102399564,"body_markdown":"This an other similar/possibly-necessary solutions are described in great further detail (with screenshots) at https://stackoverflow.com/a/26009627/1357094","body":"This an other similar/possibly-necessary solutions are described in great further detail (with screenshots) at <a href=\"https://stackoverflow.com/a/26009627/1357094\">stackoverflow.com/a/26009627/1357094</a>"},{"owner":{"account_id":5755890,"reputation":3209,"user_id":4543854,"display_name":"Jonny Brooks"},"score":21,"creation_date":1605089063,"post_id":54562060,"comment_id":114543071,"body_markdown":"For anyone that can&#39;t find. `File -&gt; Settings` I found it in `IntelliJ IDEA -&gt; Preferences... -&gt; Build, Execution, Deployment -&gt; Compiler -&gt; Java Compiler`","body":"For anyone that can&#39;t find. <code>File -&gt; Settings</code> I found it in <code>IntelliJ IDEA -&gt; Preferences... -&gt; Build, Execution, Deployment -&gt; Compiler -&gt; Java Compiler</code>"},{"owner":{"account_id":2860448,"reputation":437,"user_id":2969224,"display_name":"UnixAgain"},"score":0,"creation_date":1608871095,"post_id":54562060,"comment_id":115704611,"body_markdown":"But why? Is that a bug of IDEA?","body":"But why? Is that a bug of IDEA?"},{"owner":{"account_id":1663243,"reputation":740,"user_id":1531132,"display_name":"Serdar Samancıoğlu"},"score":0,"creation_date":1615393303,"post_id":54562060,"comment_id":117678175,"body_markdown":"I clean installed intellij from official web site with latest version, and generated a clean project with spring initializer and this happening. This is not supposed to happen on a clean install, isn&#39;t it? I mean something is wrong. Btw this solution worked perfectly.","body":"I clean installed intellij from official web site with latest version, and generated a clean project with spring initializer and this happening. This is not supposed to happen on a clean install, isn&#39;t it? I mean something is wrong. Btw this solution worked perfectly."},{"owner":{"account_id":1004885,"reputation":2420,"user_id":1018906,"display_name":"xli"},"score":0,"creation_date":1628698994,"post_id":54562060,"comment_id":121493267,"body_markdown":"Under File-&gt;Project Structure-&gt;Modules, make sure to check both &quot;Sources -&gt; Language level&quot; and &quot;Dependencies -&gt; Module SDK&quot;","body":"Under File-&gt;Project Structure-&gt;Modules, make sure to check both &quot;Sources -&gt; Language level&quot; and &quot;Dependencies -&gt; Module SDK&quot;"},{"owner":{"account_id":1650133,"reputation":1090,"user_id":1549046,"display_name":"AtomicBoolean"},"score":1,"creation_date":1664376109,"post_id":54562060,"comment_id":130458294,"body_markdown":"Gradle config can also cause this. https://stackoverflow.com/a/68579256/1549046","body":"Gradle config can also cause this. <a href=\"https://stackoverflow.com/a/68579256/1549046\">stackoverflow.com/a/68579256/1549046</a>"}],"tags":[],"owner":{"account_id":9306319,"reputation":3644,"user_id":6909914,"display_name":"Paolo"},"comment_count":6,"down_vote_count":0,"up_vote_count":336,"is_accepted":true,"score":336,"last_activity_date":1623835131,"creation_date":1549484974,"answer_id":54562060,"question_id":54137286,"body_markdown":"I&#39;ve got the same issue as stated by Gryu.\r\nSame Intellij 2018 3.3\r\n\r\nI was able to start my project by setting (like stated by Grigoriy) \r\n\r\n    File-&gt;Project Structure-&gt;Modules -&gt;&gt; Language level to 8 ( my maven project was set to 1.8 java)\r\n\r\nAND\r\n\r\n    File -&gt; Settings -&gt; Build, Execution, Deployment -&gt; Compiler -&gt; Java Compiler -&gt; 8 also there\r\n\r\nI hope it would be useful","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>I've got the same issue as stated by Gryu.\nSame Intellij 2018 3.3</p>\n<p>I was able to start my project by setting (like stated by Grigoriy)</p>\n<pre><code>File-&gt;Project Structure-&gt;Modules -&gt;&gt; Language level to 8 ( my maven project was set to 1.8 java)\n</code></pre>\n<p>AND</p>\n<pre><code>File -&gt; Settings -&gt; Build, Execution, Deployment -&gt; Compiler -&gt; Java Compiler -&gt; 8 also there\n</code></pre>\n<p>I hope it would be useful</p>\n"},{"tags":[],"owner":{"account_id":10493855,"reputation":89,"user_id":7734784,"display_name":"AMS Abu"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1555751932,"creation_date":1555751932,"answer_id":55772057,"question_id":54137286,"body_markdown":"Got this same error after updating my Idea and I resolved it as follows: \r\n\r\nFile &gt;&gt; Project Structure... &gt;&gt; Project \r\n\r\n“Project language level:” was set to “11 - Local variable syntax for lambda parameters” \r\nso I changed it to “SDK default (8 - Lambdas, type annotations etc.)” then applied the change \r\nand the error was resolved.","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>Got this same error after updating my Idea and I resolved it as follows: </p>\n\n<p>File >> Project Structure... >> Project </p>\n\n<p>“Project language level:” was set to “11 - Local variable syntax for lambda parameters” \nso I changed it to “SDK default (8 - Lambdas, type annotations etc.)” then applied the change \nand the error was resolved.</p>\n"},{"tags":[],"owner":{"account_id":3303925,"reputation":2096,"user_id":2779330,"accept_rate":60,"display_name":"Bojan Vukasovic"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1561025300,"creation_date":1561025300,"answer_id":56683666,"question_id":54137286,"body_markdown":"Just had same error. Problem was that I had empty `package-info.java file`. As soon as I added package name inside it worked...","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>Just had same error. Problem was that I had empty <code>package-info.java file</code>. As soon as I added package name inside it worked...</p>\n"},{"comments":[{"owner":{"account_id":8908676,"reputation":197,"user_id":6649705,"display_name":"tarkos"},"score":0,"creation_date":1570714185,"post_id":57771215,"comment_id":103006806,"body_markdown":"I can add that good to check also option like it was in above comments :\n`File -&gt; Settings -&gt; Build, Execution, Deployment -&gt; Compiler -&gt; Java Compiler `\n\nand review if target code is set correctly.","body":"I can add that good to check also option like it was in above comments : <code>File -&gt; Settings -&gt; Build, Execution, Deployment -&gt; Compiler -&gt; Java Compiler </code>  and review if target code is set correctly."},{"owner":{"account_id":3766604,"reputation":1395,"user_id":3129973,"display_name":"Praveen"},"score":0,"creation_date":1579081286,"post_id":57771215,"comment_id":105644047,"body_markdown":"This keeps on rollbacking to the previous settings. Is there a permanent fix for this? Can this configuration be glued to the project? (If there are multiple projects with multiple versions of Java, How to handle it in code)","body":"This keeps on rollbacking to the previous settings. Is there a permanent fix for this? Can this configuration be glued to the project? (If there are multiple projects with multiple versions of Java, How to handle it in code)"}],"tags":[],"owner":{"account_id":8908676,"reputation":197,"user_id":6649705,"display_name":"tarkos"},"comment_count":2,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1567511546,"creation_date":1567511546,"answer_id":57771215,"question_id":54137286,"body_markdown":"I Could say I had similar issue. My case: I switched from new version to old version of the project in workspace, try to run single junit which require recompil, recompilation error was thrown with invalid target. \r\n\r\nFrom Projects settings (F4) in IntelliJ everything was looking good and java was set to 1.7. But when I try recompile from IDE error was thrown because of wrong target level. After checking I found that in one of the iml file language was set to JDK_11. After manual change to JDK_1_7 everything back to normal. \r\n\r\nWorth to also manual check lang level in *iml files created by IDE.","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>I Could say I had similar issue. My case: I switched from new version to old version of the project in workspace, try to run single junit which require recompil, recompilation error was thrown with invalid target. </p>\n\n<p>From Projects settings (F4) in IntelliJ everything was looking good and java was set to 1.7. But when I try recompile from IDE error was thrown because of wrong target level. After checking I found that in one of the iml file language was set to JDK_11. After manual change to JDK_1_7 everything back to normal. </p>\n\n<p>Worth to also manual check lang level in *iml files created by IDE.</p>\n"},{"comments":[{"owner":{"account_id":4564492,"reputation":2199,"user_id":3705861,"display_name":"Younes El Ouarti"},"score":2,"creation_date":1594830721,"post_id":58446436,"comment_id":111266773,"body_markdown":"Isn&#39;t deleting the `./idea` folder a bit too harsh? All your settings will be gone.","body":"Isn&#39;t deleting the <code>.&#47;idea</code> folder a bit too harsh? All your settings will be gone."},{"owner":{"account_id":7469406,"reputation":1241,"user_id":5677857,"display_name":"neonidian"},"score":1,"creation_date":1595148437,"post_id":58446436,"comment_id":111369033,"body_markdown":"Yes, I agree its a bit harsh. All the repository specific settings would be gone but the global settings like a custom keymap would be preserved since they are stored in the user&#39;s home directory. Updated the answer with a note.","body":"Yes, I agree its a bit harsh. All the repository specific settings would be gone but the global settings like a custom keymap would be preserved since they are stored in the user&#39;s home directory. Updated the answer with a note."},{"owner":{"account_id":2778891,"reputation":9987,"user_id":2391849,"accept_rate":84,"display_name":"Mulgard"},"score":0,"creation_date":1673351608,"post_id":58446436,"comment_id":132474471,"body_markdown":"Method 2 fixed it for me. thx.","body":"Method 2 fixed it for me. thx."}],"tags":[],"owner":{"account_id":7469406,"reputation":1241,"user_id":5677857,"display_name":"neonidian"},"comment_count":3,"down_vote_count":4,"up_vote_count":59,"is_accepted":false,"score":55,"last_activity_date":1646672211,"creation_date":1571385643,"answer_id":58446436,"question_id":54137286,"body_markdown":"1 of the 2 methods will fix the problem:\r\n\r\n**Method 1** (recommended)\r\n\r\nSpecify the Java version in your build file.\r\n\r\nE.g., For Gradle, go to build.gradle file and specify the source and target compatability like mentioned in the [docs][1] and click on the refresh button in the Gradle tool window.\r\n\r\nFor example, to set source and target compatability to Java version 17:\r\n\r\n    java {\r\n        sourceCompatibility = JavaVersion.VERSION_17\r\n        targetCompatibility = JavaVersion.VERSION_17\r\n    }\r\n\r\n**Method 2**\r\n\r\nIf building a project through a build system (Maven, Gradle etc..) via command-line works but IntelliJ show `Invalid target release` error, then do the following,\r\n\r\n1. Close IntelliJ\r\n\r\n2. Go to the directory of the project\r\n\r\n3. Delete the .idea/ directory\r\n\r\n4. Start IntelliJ with the project&#39;s directory\r\n\r\nThis will re-create the .idea/ directory and will no longer show the error. \r\n\r\nNOTE: Any repository specific IntelliJ settings that you have added would be deleted when the .idea/ directory is deleted and they will be re-created with the defaults.\r\n\r\n \r\n\r\n\r\n  [1]: https://docs.gradle.org/current/userguide/java_plugin.html#sec:java-extension","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>1 of the 2 methods will fix the problem:</p>\n<p><strong>Method 1</strong> (recommended)</p>\n<p>Specify the Java version in your build file.</p>\n<p>E.g., For Gradle, go to build.gradle file and specify the source and target compatability like mentioned in the <a href=\"https://docs.gradle.org/current/userguide/java_plugin.html#sec:java-extension\" rel=\"noreferrer\">docs</a> and click on the refresh button in the Gradle tool window.</p>\n<p>For example, to set source and target compatability to Java version 17:</p>\n<pre><code>java {\n    sourceCompatibility = JavaVersion.VERSION_17\n    targetCompatibility = JavaVersion.VERSION_17\n}\n</code></pre>\n<p><strong>Method 2</strong></p>\n<p>If building a project through a build system (Maven, Gradle etc..) via command-line works but IntelliJ show <code>Invalid target release</code> error, then do the following,</p>\n<ol>\n<li><p>Close IntelliJ</p>\n</li>\n<li><p>Go to the directory of the project</p>\n</li>\n<li><p>Delete the .idea/ directory</p>\n</li>\n<li><p>Start IntelliJ with the project's directory</p>\n</li>\n</ol>\n<p>This will re-create the .idea/ directory and will no longer show the error.</p>\n<p>NOTE: Any repository specific IntelliJ settings that you have added would be deleted when the .idea/ directory is deleted and they will be re-created with the defaults.</p>\n"},{"tags":[],"owner":{"account_id":16781858,"reputation":31,"user_id":12131874,"display_name":"Shri"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1571456962,"creation_date":1571449097,"answer_id":58459831,"question_id":54137286,"body_markdown":"For me, I was having the same issue but it was with `java v8`, I am using a different version of java on my machine for my different projects. While importing one of my project I got the same problem. To check the configuration I checked all my SDK related settings whether it is in `File-&gt;Project-&gt;Project Structure / Modules` or in the Run/Debug configuration setting. Everything I set to `java-8` but still I was getting the same issue. While checking all of the configuration files I found that compiler.xml in .idea is having an entry for the bytecodeTargetLevel which was set to 11. Here if I change it to 8 even though it shows the same compiler output and removing ***`&lt;bytecodeTargetLevel target=&quot;11&quot; /&gt;`*** from `compiler.xml` resolve the issue. \r\n\r\n","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>For me, I was having the same issue but it was with <code>java v8</code>, I am using a different version of java on my machine for my different projects. While importing one of my project I got the same problem. To check the configuration I checked all my SDK related settings whether it is in <code>File-&gt;Project-&gt;Project Structure / Modules</code> or in the Run/Debug configuration setting. Everything I set to <code>java-8</code> but still I was getting the same issue. While checking all of the configuration files I found that compiler.xml in .idea is having an entry for the bytecodeTargetLevel which was set to 11. Here if I change it to 8 even though it shows the same compiler output and removing <strong><em><code>&lt;bytecodeTargetLevel target=\"11\" /&gt;</code></em></strong> from <code>compiler.xml</code> resolve the issue. </p>\n"},{"comments":[{"owner":{"account_id":5178132,"reputation":3279,"user_id":4144572,"accept_rate":43,"display_name":"Prakash Palnati"},"score":0,"creation_date":1620238011,"post_id":59177300,"comment_id":119144341,"body_markdown":"It is such a useful answer.!!","body":"It is such a useful answer.!!"},{"owner":{"account_id":1315851,"reputation":61,"user_id":1262751,"display_name":"domjancik"},"score":3,"creation_date":1659880085,"post_id":59177300,"comment_id":129395107,"body_markdown":"This is the one that worked for me, applied to Gradle. By switching the Gradle JVM to Project SDK.","body":"This is the one that worked for me, applied to Gradle. By switching the Gradle JVM to Project SDK."}],"tags":[],"owner":{"account_id":111356,"reputation":1379,"user_id":294214,"accept_rate":58,"display_name":"amertkara"},"comment_count":2,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1575466555,"creation_date":1575466555,"answer_id":59177300,"question_id":54137286,"body_markdown":"There is also the possibility of Maven using a different version of JDK, in that case you can set Maven to use the project default JDK version. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/D2AWt.png","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>There is also the possibility of Maven using a different version of JDK, in that case you can set Maven to use the project default JDK version. </p>\n\n<p><a href=\"https://i.stack.imgur.com/D2AWt.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/D2AWt.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":36915,"reputation":3723,"user_id":105408,"accept_rate":75,"display_name":"markthegrea"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1593018311,"creation_date":1593018311,"answer_id":62560437,"question_id":54137286,"body_markdown":"My project module was set to 8 but the pom.xml was set to 11.  When I changed from 8 to 11 in the module, it worked.","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>My project module was set to 8 but the pom.xml was set to 11.  When I changed from 8 to 11 in the module, it worked.</p>\n"},{"tags":[],"owner":{"account_id":4564492,"reputation":2199,"user_id":3705861,"display_name":"Younes El Ouarti"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1594830445,"creation_date":1594830445,"answer_id":62919475,"question_id":54137286,"body_markdown":"I had the issue because I&#39;m currently upgrading my code base to JDK 11 and am switching between 8 and 11 in the branches. It seems IntelliJ doesn&#39;t like this.\r\n\r\n**Solution:**\r\n\r\nIf you&#39;ve selected the currect JDK in your project structure (`Ctrl+Shift+Alt+S`) and still get the error, invalidate your cache `File &gt; Invalidate Caches / Restart...`. \r\n\r\nAfter restarting the IDE the error went away in my case.","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>I had the issue because I'm currently upgrading my code base to JDK 11 and am switching between 8 and 11 in the branches. It seems IntelliJ doesn't like this.</p>\n<p><strong>Solution:</strong></p>\n<p>If you've selected the currect JDK in your project structure (<code>Ctrl+Shift+Alt+S</code>) and still get the error, invalidate your cache <code>File &gt; Invalidate Caches / Restart...</code>.</p>\n<p>After restarting the IDE the error went away in my case.</p>\n"},{"tags":[],"owner":{"account_id":19155624,"reputation":31,"user_id":13992502,"display_name":"AmitPal"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1595662420,"creation_date":1595662420,"answer_id":63085659,"question_id":54137286,"body_markdown":"i also got same error , i just change the java version in pom.xml from 11 to 1.8 and it&#39;s work fine.","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>i also got same error , i just change the java version in pom.xml from 11 to 1.8 and it's work fine.</p>\n"},{"tags":[],"owner":{"account_id":19250686,"reputation":11,"user_id":14068776,"display_name":"machete333"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1596842047,"creation_date":1596842047,"answer_id":63310229,"question_id":54137286,"body_markdown":"I also got a similar error but in my case it was Error:java: invalid source release: 11... So I just changed all the annotations of java 11 to java 8 and even if the annotation was java 8, I just leaved it like that. I hope it helps you to fix the issue.","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>I also got a similar error but in my case it was Error:java: invalid source release: 11... So I just changed all the annotations of java 11 to java 8 and even if the annotation was java 8, I just leaved it like that. I hope it helps you to fix the issue.</p>\n"},{"tags":[],"owner":{"account_id":17330117,"reputation":3251,"user_id":12553450,"display_name":"Mafei"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1597048179,"creation_date":1597048179,"answer_id":63336680,"question_id":54137286,"body_markdown":"If you are in Springboot please check the java version in the pom.xml file \r\n\r\n```xml\r\n&lt;properties&gt;\r\n   &lt;java.version&gt;11&lt;/java.version&gt;\r\n&lt;/properties&gt;\r\n```\r\nIf this version doesn&#39;t match with your default version(Java) of the computer, that error can be happen.","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>If you are in Springboot please check the java version in the pom.xml file</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;properties&gt;\n   &lt;java.version&gt;11&lt;/java.version&gt;\n&lt;/properties&gt;\n</code></pre>\n<p>If this version doesn't match with your default version(Java) of the computer, that error can be happen.</p>\n"},{"tags":[],"owner":{"account_id":147409,"reputation":228,"user_id":358508,"display_name":"seekle"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1601833304,"creation_date":1601833304,"answer_id":64197892,"question_id":54137286,"body_markdown":"I changed file -&gt; project structure -&gt; project settings -&gt; modules   In the source tab,  I set the Language Level from : 14, or 11, to:  &quot;Project Default&quot;.  This fixed my issue. ","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>I changed file -&gt; project structure -&gt; project settings -&gt; modules   In the source tab,  I set the Language Level from : 14, or 11, to:  &quot;Project Default&quot;.  This fixed my issue.</p>\n"},{"tags":[],"owner":{"account_id":19678596,"reputation":21,"user_id":14406165,"display_name":"user14406165"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1602060997,"creation_date":1602060997,"answer_id":64240618,"question_id":54137286,"body_markdown":"In your pom.xml file &lt;properties&gt; inside that &lt;java.version&gt; write &quot;8&quot; instead write &quot;11&quot; ,and RECOMPILE your pom.xml file \r\nAnd tadaaaaaa it works !","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>In your pom.xml file  inside that &lt;java.version&gt; write &quot;8&quot; instead write &quot;11&quot; ,and RECOMPILE your pom.xml file\nAnd tadaaaaaa it works !</p>\n"},{"tags":[],"owner":{"account_id":114831,"reputation":1251,"user_id":301800,"accept_rate":52,"display_name":"cp."},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1602962820,"creation_date":1602962820,"answer_id":64406492,"question_id":54137286,"body_markdown":"I tried all the above and found this secret sauce\r\n1.  make sure pom.xml specifies your desired jdk.\r\n2.  make sure maven specifies your desired jdk.\r\n3.  make sure Projects specifies your desired jdk.\r\n4.  make sure Modules specifies your integer jdk AND Dependencies specifies your jdk.\r\nhth.\r\n","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>I tried all the above and found this secret sauce</p>\n<ol>\n<li>make sure pom.xml specifies your desired jdk.</li>\n<li>make sure maven specifies your desired jdk.</li>\n<li>make sure Projects specifies your desired jdk.</li>\n<li>make sure Modules specifies your integer jdk AND Dependencies specifies your jdk.\nhth.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":3162994,"reputation":1345,"user_id":2673577,"accept_rate":0,"display_name":"asifaftab87"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1603528873,"creation_date":1603528873,"answer_id":64511532,"question_id":54137286,"body_markdown":"I added these two lines to build.gradle file\r\n\r\n    compileJava.options.fork = true\r\n                                                  \r\n    compileJava.options.forkOptions.executable = &#39;C:\\\\Program Files\\\\Java\\\\jdk-11.0.8&#39;\r\n\r\nand it works\r\n\r\nI am using windows and my project based on gradle\r\n\r\nmy jdk path -&gt;  &#39;C:\\\\Program Files\\\\Java\\\\jdk-11.0.8&#39;\r\n\r\nplease provide your jdk path\r\n","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>I added these two lines to build.gradle file</p>\n<pre><code>compileJava.options.fork = true\n                                              \ncompileJava.options.forkOptions.executable = 'C:\\\\Program Files\\\\Java\\\\jdk-11.0.8'\n</code></pre>\n<p>and it works</p>\n<p>I am using windows and my project based on gradle</p>\n<p>my jdk path -&gt;  'C:\\Program Files\\Java\\jdk-11.0.8'</p>\n<p>please provide your jdk path</p>\n"},{"tags":[],"owner":{"account_id":18824073,"reputation":317,"user_id":13729422,"display_name":"Uzair"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1603642634,"creation_date":1603642634,"answer_id":64525948,"question_id":54137286,"body_markdown":"I was recently facing the same problem.\r\nThis Error was showing on my screen after running my project main file.\r\n**Error:java: invalid source release: 11**\r\nFollow the steps to resolve this error\r\n 1. File-&gt;Project Structure -&gt; Project\r\n 2. Click New button under Project SDK: Add the latest SDK and Click OK.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n**After running You will see error is resolved..**\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/qRMIE.png\r\n  [2]: https://i.stack.imgur.com/094W1.png\r\n  [3]: https://i.stack.imgur.com/QERgB.png\r\n\r\n\r\n**You can see it&#39;s work perfectly.. \r\nPlease approach me If you find any problem**\r\n","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>I was recently facing the same problem.\nThis Error was showing on my screen after running my project main file.\n<strong>Error:java: invalid source release: 11</strong>\nFollow the steps to resolve this error</p>\n<ol>\n<li>File-&gt;Project Structure -&gt; Project</li>\n<li>Click New button under Project SDK: Add the latest SDK and Click OK.</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/qRMIE.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/qRMIE.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>After running You will see error is resolved..</strong></p>\n<p><a href=\"https://i.stack.imgur.com/094W1.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/094W1.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/QERgB.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/QERgB.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>You can see it's work perfectly..\nPlease approach me If you find any problem</strong></p>\n"},{"comments":[{"owner":{"account_id":4977846,"reputation":96,"user_id":4003699,"display_name":"Rajni Gangwar"},"score":2,"creation_date":1615292538,"post_id":64837652,"comment_id":117640815,"body_markdown":"Only #1 worked for me.. tried many solutions but this worked","body":"Only #1 worked for me.. tried many solutions but this worked"},{"owner":{"account_id":4104221,"reputation":3989,"user_id":3368818,"accept_rate":75,"display_name":"Woodchuck"},"score":0,"creation_date":1619202506,"post_id":64837652,"comment_id":118843413,"body_markdown":"This works for me. I.e., changed the version in the pom and then also changed both of those places in IntelliJ. Not sure why there are 2 spots within IntelliJ where you need to designate the Java version.","body":"This works for me. I.e., changed the version in the pom and then also changed both of those places in IntelliJ. Not sure why there are 2 spots within IntelliJ where you need to designate the Java version."},{"owner":{"account_id":4365428,"reputation":44,"user_id":4205927,"accept_rate":100,"display_name":"MML"},"score":0,"creation_date":1628561081,"post_id":64837652,"comment_id":121447922,"body_markdown":"Where&#39;s pom.xml path?","body":"Where&#39;s pom.xml path?"},{"owner":{"account_id":13874778,"reputation":574,"user_id":10016733,"display_name":"B Sangappa"},"score":0,"creation_date":1628607214,"post_id":64837652,"comment_id":121463192,"body_markdown":"Hey @MML, pom.xml is available in the root level of the project itself, for example {Your Project}\\pom.xml. Expand your project you will see the pom.xml","body":"Hey @MML, pom.xml is available in the root level of the project itself, for example {Your Project}\\pom.xml. Expand your project you will see the pom.xml"},{"owner":{"account_id":4365428,"reputation":44,"user_id":4205927,"accept_rate":100,"display_name":"MML"},"score":0,"creation_date":1628607783,"post_id":64837652,"comment_id":121463462,"body_markdown":"@b-sangappa I switched to Project view in android studio but I cannot find this file, can I created it manually ?","body":"@b-sangappa I switched to Project view in android studio but I cannot find this file, can I created it manually ?"},{"owner":{"account_id":13874778,"reputation":574,"user_id":10016733,"display_name":"B Sangappa"},"score":0,"creation_date":1628670321,"post_id":64837652,"comment_id":121480421,"body_markdown":"@MML, once verify whether file is present or not in Project location of File Explorer itself, if not present, you can create a POM file in root level like {Your Project}\\pom.xml","body":"@MML, once verify whether file is present or not in Project location of File Explorer itself, if not present, you can create a POM file in root level like {Your Project}\\pom.xml"}],"tags":[],"owner":{"account_id":13874778,"reputation":574,"user_id":10016733,"display_name":"B Sangappa"},"comment_count":6,"down_vote_count":0,"up_vote_count":44,"is_accepted":false,"score":44,"last_activity_date":1605381223,"creation_date":1605381223,"answer_id":64837652,"question_id":54137286,"body_markdown":"Below changes worked for me and hope the same works for you.\r\n\r\n1. Change the version of Java from 11 to 8 in pom.xml file &lt;br&gt;\r\n    &lt;em&gt;&lt;b&gt;&lt;java.version&gt;1.8&lt;/java.version&gt;&lt;/b&gt;&lt;/em&gt;\r\n2. Go to, File -&gt; Settings -&gt; Build, Execution, Deployment -&gt; Compiler -&gt; Java Compiler &lt;br&gt;\r\n    Here, in &lt;b&gt;Module&lt;/b&gt; column you can see your project listed and in &lt;b&gt;Target bytecode version&lt;/b&gt; column, Java version for the project is already specified(mostly 11), change it to &lt;b&gt;8&lt;/b&gt;\r\n\r\n3. Go to, File -&gt; Project Structure -&gt; Modules. Here, in &lt;b&gt;Source&lt;/b&gt; tab, you can see &lt;b&gt;Language level&lt;/b&gt; option, choose &lt;b&gt;8 - Lambdas, type annotations etc.&lt;/b&gt;. Finally, choose Apply and OK, you&#39;re good to go.\r\n   \r\n  ","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>Below changes worked for me and hope the same works for you.</p>\n<ol>\n<li><p>Change the version of Java from 11 to 8 in pom.xml file <br>\n<em><b>&lt;java.version&gt;1.8&lt;/java.version&gt;</b></em></p>\n</li>\n<li><p>Go to, File -&gt; Settings -&gt; Build, Execution, Deployment -&gt; Compiler -&gt; Java Compiler <br>\nHere, in <b>Module</b> column you can see your project listed and in <b>Target bytecode version</b> column, Java version for the project is already specified(mostly 11), change it to <b>8</b></p>\n</li>\n<li><p>Go to, File -&gt; Project Structure -&gt; Modules. Here, in <b>Source</b> tab, you can see <b>Language level</b> option, choose <b>8 - Lambdas, type annotations etc.</b>. Finally, choose Apply and OK, you're good to go.</p>\n</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":13692927,"reputation":944,"user_id":9880276,"display_name":"Rasika Weragoda"},"score":0,"creation_date":1632128535,"post_id":65603290,"comment_id":122400300,"body_markdown":"This solves me Thanks, it can happen when modules are indexing in invalid java version","body":"This solves me Thanks, it can happen when modules are indexing in invalid java version"}],"tags":[],"owner":{"account_id":14364491,"reputation":181,"user_id":10375962,"display_name":"Alejandro Arevalo"},"comment_count":1,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1613545769,"creation_date":1609966803,"answer_id":65603290,"question_id":54137286,"body_markdown":"January 6th, 2021\r\n\r\nThis is what worked for me.\r\n\r\nGo to File -&gt; Project Structure and select the &quot;Dependencies&quot; tab on the right panel of the window. Then change the &quot;Module SDK&quot; using the drop-down like this. Then apply changes.\r\n\r\n![image 1][1]\r\n\r\n  [1]: https://i.stack.imgur.com/R8gxS.png","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>January 6th, 2021</p>\n<p>This is what worked for me.</p>\n<p>Go to File -&gt; Project Structure and select the &quot;Dependencies&quot; tab on the right panel of the window. Then change the &quot;Module SDK&quot; using the drop-down like this. Then apply changes.</p>\n<p><img src=\"https://i.stack.imgur.com/R8gxS.png\" alt=\"image 1\" /></p>\n"},{"tags":[],"owner":{"account_id":1487022,"reputation":109,"user_id":1395041,"display_name":"ItwasJJsmile"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1618473127,"creation_date":1610466544,"answer_id":65687289,"question_id":54137286,"body_markdown":"2021 Jan.12th\r\n\r\nthe whole point for me is to explicitly specify the version as java 11 in my pom.xml, and I solved the problem by taking the following steps.\r\n\r\n1. open terminal and input: java -version, then i got 1.8, and i went to .bash_profile to switch the java version to 11.2 as i have multiple java version installed. please remember &quot;restart&quot; your terminal and check your java version again to confirm switch is successful.\r\n\r\n2. Then i went to File -&gt; Project Structure to make sure my IntelliJ using the same version as my env, which is 11.2.\r\n\r\n3. RESTART your Intellij, mvn clean install, solved, hope this could help someone that has same issue, thanks.","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>2021 Jan.12th</p>\n<p>the whole point for me is to explicitly specify the version as java 11 in my pom.xml, and I solved the problem by taking the following steps.</p>\n<ol>\n<li><p>open terminal and input: java -version, then i got 1.8, and i went to .bash_profile to switch the java version to 11.2 as i have multiple java version installed. please remember &quot;restart&quot; your terminal and check your java version again to confirm switch is successful.</p>\n</li>\n<li><p>Then i went to File -&gt; Project Structure to make sure my IntelliJ using the same version as my env, which is 11.2.</p>\n</li>\n<li><p>RESTART your Intellij, mvn clean install, solved, hope this could help someone that has same issue, thanks.</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":4475607,"reputation":266,"user_id":3640806,"accept_rate":12,"display_name":"joeabala"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1617322458,"creation_date":1617322458,"answer_id":66913003,"question_id":54137286,"body_markdown":"    1. pom.xml (start with this important)\r\n        - &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n        * Enable auto import on pop up\r\n        * Wait until it loads\r\n    \r\n    2. Project Structure\r\n        - Project\r\n            - Project SDK - 1.8 \r\n            - Project language Level - 8\r\n        - Modules\r\n            - Sources\r\n                - Language level - 8\r\n                - Dependencies - Project SDK 1.8\r\n    \r\n    3. Delete idea folder\r\n    4. Close window\r\n    5. Reopen window (make sure it loads at bottom)","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<pre><code>1. pom.xml (start with this important)\n    - &lt;java.version&gt;1.8&lt;/java.version&gt;\n    * Enable auto import on pop up\n    * Wait until it loads\n\n2. Project Structure\n    - Project\n        - Project SDK - 1.8 \n        - Project language Level - 8\n    - Modules\n        - Sources\n            - Language level - 8\n            - Dependencies - Project SDK 1.8\n\n3. Delete idea folder\n4. Close window\n5. Reopen window (make sure it loads at bottom)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16109102,"reputation":51,"user_id":13674651,"display_name":"Ana Gabriela Guzman"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1618323610,"creation_date":1618323610,"answer_id":67076685,"question_id":54137286,"body_markdown":"Try this\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n    &lt;/properties&gt;","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>Try this</p>\n<pre><code>&lt;properties&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n&lt;/properties&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10633939,"reputation":403,"user_id":7831181,"display_name":"Pieber"},"comment_count":0,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1626181928,"creation_date":1626181608,"answer_id":68363037,"question_id":54137286,"body_markdown":"In newer versions of Intellij, check that jdk 11 is correctly configured:\r\n\r\n1. Right click on your project then `Open Module Settings`. Check the settings listed below:\r\n\t- `SDKs (Under Platform Settings) &gt; Add the jdk 11 you want located on your computer`.\r\n\t- `Modules (Under Project Settings) &gt; Set language level to jdk 11 for sources and dependencies`.\r\n\t- `Project (Under Project Settings) &gt; Select jdk 11 as Project SDK`.\r\n[![enter image description here][1]][1]\r\n[![enter image description here][2]][2]\r\n[![enter image description here][3]][3]\r\n2. Then `File &gt; Settings &gt; Java Compiler`. Check the following settings:\r\n\t- Use compiler: `Javac`\r\n\t- Project bytecode version: `11`\r\n\t- Per-module bytecode version: the target bytecode version for all modules must be set to `11`.\r\n[![enter image description here][4]][4]\n\r\n  [1]: https://i.stack.imgur.com/Qjr79.png\r\n  [2]: https://i.stack.imgur.com/EsPwa.png\r\n  [3]: https://i.stack.imgur.com/o1GR1.png\r\n  [4]: https://i.stack.imgur.com/gomsy.png","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>In newer versions of Intellij, check that jdk 11 is correctly configured:</p>\n<ol>\n<li>Right click on your project then <code>Open Module Settings</code>. Check the settings listed below:\n<ul>\n<li><code>SDKs (Under Platform Settings) &gt; Add the jdk 11 you want located on your computer</code>.</li>\n<li><code>Modules (Under Project Settings) &gt; Set language level to jdk 11 for sources and dependencies</code>.</li>\n<li><code>Project (Under Project Settings) &gt; Select jdk 11 as Project SDK</code>.\n<a href=\"https://i.stack.imgur.com/Qjr79.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Qjr79.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/EsPwa.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/EsPwa.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/o1GR1.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/o1GR1.png\" alt=\"enter image description here\" /></a></li>\n</ul>\n</li>\n<li>Then <code>File &gt; Settings &gt; Java Compiler</code>. Check the following settings:\n<ul>\n<li>Use compiler: <code>Javac</code></li>\n<li>Project bytecode version: <code>11</code></li>\n<li>Per-module bytecode version: the target bytecode version for all modules must be set to <code>11</code>.\n<a href=\"https://i.stack.imgur.com/gomsy.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/gomsy.png\" alt=\"enter image description here\" /></a></li>\n</ul>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":22214763,"reputation":39,"user_id":16453371,"display_name":"Adrian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626335448,"creation_date":1626335448,"answer_id":68389900,"question_id":54137286,"body_markdown":"I got the same java 11 target error and my issue was                 &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; \r\noutdated version.\r\nupgraded to lastest and everything worked\r\n","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>I got the same java 11 target error and my issue was                 maven-compiler-plugin\noutdated version.\nupgraded to lastest and everything worked</p>\n"},{"tags":[],"owner":{"account_id":1181526,"reputation":1512,"user_id":1156363,"display_name":"JFL"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1632746250,"creation_date":1632746250,"answer_id":69346751,"question_id":54137286,"body_markdown":"If your project is built using gradle, you should update:\r\n\r\n    File &gt; Settings &gt; Build, Execution, Deployment &gt; Build Tools &gt; Gradle\r\n\r\nAnd update `Gradle JVM` with version 11.","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>If your project is built using gradle, you should update:</p>\n<pre><code>File &gt; Settings &gt; Build, Execution, Deployment &gt; Build Tools &gt; Gradle\n</code></pre>\n<p>And update <code>Gradle JVM</code> with version 11.</p>\n"},{"tags":[],"owner":{"account_id":2508599,"reputation":374,"user_id":2181576,"display_name":"veritas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1642743738,"creation_date":1642743738,"answer_id":70796890,"question_id":54137286,"body_markdown":"I tried all the solutions above\r\n- gradle jvm version , java compilter bytecode version, module language.\r\n\r\nI set all the above to java 8 (or 1.8) as that is the library I have on my machine. It still did not work.\r\n\r\nThe issue was that the build.gradle file had \r\n\r\n&gt; sourceCompatibility = &#39;11&#39;\r\n\r\nChanged this to 8 and it stopped throwing &#39;compile failed invalid release 11&#39; error\r\n\r\nsolution reference: [github forum][1]\r\n\r\n\r\n  [1]: https://github.com/gradle/gradle/issues/12803","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>I tried all the solutions above</p>\n<ul>\n<li>gradle jvm version , java compilter bytecode version, module language.</li>\n</ul>\n<p>I set all the above to java 8 (or 1.8) as that is the library I have on my machine. It still did not work.</p>\n<p>The issue was that the build.gradle file had</p>\n<blockquote>\n<p>sourceCompatibility = '11'</p>\n</blockquote>\n<p>Changed this to 8 and it stopped throwing 'compile failed invalid release 11' error</p>\n<p>solution reference: <a href=\"https://github.com/gradle/gradle/issues/12803\" rel=\"nofollow noreferrer\">github forum</a></p>\n"},{"comments":[{"owner":{"account_id":5811438,"reputation":1501,"user_id":4582350,"display_name":"Ram"},"score":0,"creation_date":1684752140,"post_id":70876604,"comment_id":134557780,"body_markdown":"The gradle.properties file need to be created under the project directory.","body":"The gradle.properties file need to be created under the project directory."}],"tags":[],"owner":{"account_id":3156203,"reputation":4585,"user_id":2668564,"display_name":"jfk"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643277633,"creation_date":1643277633,"answer_id":70876604,"question_id":54137286,"body_markdown":"Setting the right path for Java home in `gradle.properties` solved the issue for me\r\n\r\ngradle properties path : C:\\Users\\&lt;username&gt;\\.gradle\\gradle.properties\r\n\r\n    org.gradle.java.home=yourjdk11homepath\r\n    Example : org.gradle.java.home=C\\:/Program Files/Java/jdk-11.0.8","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>Setting the right path for Java home in <code>gradle.properties</code> solved the issue for me</p>\n<p>gradle properties path : C:\\Users&lt;username&gt;.gradle\\gradle.properties</p>\n<pre><code>org.gradle.java.home=yourjdk11homepath\nExample : org.gradle.java.home=C\\:/Program Files/Java/jdk-11.0.8\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8295451,"reputation":131,"user_id":6235838,"display_name":"Enrique Alcocer"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1645291330,"creation_date":1645284880,"answer_id":71186446,"question_id":54137286,"body_markdown":"My solution:\r\n1. Go to File &gt; Settings &gt; Build, Execution, Deployment &gt; Build Tools &gt; Gradle\r\n2. Select Gradle JVM: [SDK VERSION]\r\n3. Compile\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kdiRP.png","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>My solution:</p>\n<ol>\n<li>Go to File &gt; Settings &gt; Build, Execution, Deployment &gt; Build Tools &gt; Gradle</li>\n<li>Select Gradle JVM: [SDK VERSION]</li>\n<li>Compile</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/kdiRP.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/kdiRP.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":7822670,"reputation":1609,"user_id":5915318,"display_name":"David Kariuki"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1652091463,"creation_date":1652091463,"answer_id":72170392,"question_id":54137286,"body_markdown":"If configuring the `Project Properties` never worked for you, you should also remember to change the SDK version for the maven or `Gradle` which could be pointing to the wrong path or the `JDK` version.\r\n\r\nTo do this: \r\n 1. Click on File | Settings | Build, Execution, Deployment | Build Tools \r\n 2. If maven, click maven then Runner, and set JRE to use project JDK.\r\n 3. If Gradle, Click Gradle then set the Gradle `JVM`.","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>If configuring the <code>Project Properties</code> never worked for you, you should also remember to change the SDK version for the maven or <code>Gradle</code> which could be pointing to the wrong path or the <code>JDK</code> version.</p>\n<p>To do this:</p>\n<ol>\n<li>Click on File | Settings | Build, Execution, Deployment | Build Tools</li>\n<li>If maven, click maven then Runner, and set JRE to use project JDK.</li>\n<li>If Gradle, Click Gradle then set the Gradle <code>JVM</code>.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6532574,"reputation":2212,"user_id":5053266,"accept_rate":67,"display_name":"RotS"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1661517200,"creation_date":1661517200,"answer_id":73501097,"question_id":54137286,"body_markdown":"For me, the problem causing this error message was that my JAVA_HOME environment variable was still pointing to the JDK 1.8 directory.\r\nI made my JAVA_HOME environment variable pointing to the JDK 11 directory and it worked.","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>For me, the problem causing this error message was that my JAVA_HOME environment variable was still pointing to the JDK 1.8 directory.\nI made my JAVA_HOME environment variable pointing to the JDK 11 directory and it worked.</p>\n"},{"tags":[],"owner":{"account_id":3451747,"reputation":31,"user_id":2891286,"display_name":"DVD"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664877905,"creation_date":1664877905,"answer_id":73946263,"question_id":54137286,"body_markdown":"Ok, this question is pretty old and probably not relevant for the most of the developers, but I would like to show the working solution to this problem.\r\n\r\nFirst - my understanding of the problem:\r\nNormally (by default) IntelliJ uses it&#39;s internal compiler to compile the sources. Probably there&#39;s a way to specify the compiler, but I still haven&#39;t found the way to configure this. THIS IS JUST A GUESS: maybe IntelliJ tries to use the project JDK compiler and if this fails - uses the internal. In my case the IDEA is old version and the internal JRE (and compiler) is version 8. Of course this compiler won&#39;t be able to compile Java 11 sources - it issues error &quot;java: invalid target release: 11&quot;\r\n\r\nThe solution:\r\nTo make sure that JDK compiler is used - we must delegate the build job to Maven. Maven will use the proper javac executable and it will be able to compile Java 11 sources to whatever target version you want.\r\n\r\nFile -&gt; Settings -&gt; Build, Execution, Deployment -&gt; Build Tools -&gt; Maven -&gt; Runner\r\nthen check &quot;Delegate IDE build/run actions to maven&quot;\r\n\r\nThat&#39;s it - now your old IntelliJ IDEA will be able to build/run projects with any new JDK version.","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>Ok, this question is pretty old and probably not relevant for the most of the developers, but I would like to show the working solution to this problem.</p>\n<p>First - my understanding of the problem:\nNormally (by default) IntelliJ uses it's internal compiler to compile the sources. Probably there's a way to specify the compiler, but I still haven't found the way to configure this. THIS IS JUST A GUESS: maybe IntelliJ tries to use the project JDK compiler and if this fails - uses the internal. In my case the IDEA is old version and the internal JRE (and compiler) is version 8. Of course this compiler won't be able to compile Java 11 sources - it issues error &quot;java: invalid target release: 11&quot;</p>\n<p>The solution:\nTo make sure that JDK compiler is used - we must delegate the build job to Maven. Maven will use the proper javac executable and it will be able to compile Java 11 sources to whatever target version you want.</p>\n<p>File -&gt; Settings -&gt; Build, Execution, Deployment -&gt; Build Tools -&gt; Maven -&gt; Runner\nthen check &quot;Delegate IDE build/run actions to maven&quot;</p>\n<p>That's it - now your old IntelliJ IDEA will be able to build/run projects with any new JDK version.</p>\n"},{"tags":[],"owner":{"account_id":14282929,"reputation":333,"user_id":10317086,"display_name":"EnGoPy"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1665575795,"creation_date":1665575795,"answer_id":74041431,"question_id":54137286,"body_markdown":"Another solution worked for me, but the root cause was I messed up in maven configuration in the past.&lt;br&gt;&lt;br&gt;\r\nAfter all suggestions my `JAVA_HOME` when I called it through terminal shown that I was using `Java 11`, but when I checked `mvn -v` I had got information that Maven uses `Java 1.8`... &lt;br&gt;\r\nThat was weird. I went through all suggested IntelliJ settings (Project Structure, Compiler version etc.) and everything was pointing to use `Java 11`\r\nBut finally I found I messed up that cofiguration in the past.\r\n&lt;br&gt;\r\nI&#39;m using Mac and in my case the root cause was Overriding default system `JAVA_HOME` though Maven settings in `~/.mavenrc` configuration file.\r\nInside that I had overriden `JAVA_HOME` property pointing to `1.8` library.\r\n&lt;br&gt;\r\nThe reason why I did it was a previous problems with maven on other project and I needed to force maven to use `Java 1.8` so when I switched to another project it caused finally problems.\r\n&lt;br&gt;\r\nI know it&#39;s very specific but maybe there is someone else who went through all suggestions and nothing worked, and overrided this variable too.","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>Another solution worked for me, but the root cause was I messed up in maven configuration in the past.<br><br>\nAfter all suggestions my <code>JAVA_HOME</code> when I called it through terminal shown that I was using <code>Java 11</code>, but when I checked <code>mvn -v</code> I had got information that Maven uses <code>Java 1.8</code>... <br>\nThat was weird. I went through all suggested IntelliJ settings (Project Structure, Compiler version etc.) and everything was pointing to use <code>Java 11</code>\nBut finally I found I messed up that cofiguration in the past.\n<br>\nI'm using Mac and in my case the root cause was Overriding default system <code>JAVA_HOME</code> though Maven settings in <code>~/.mavenrc</code> configuration file.\nInside that I had overriden <code>JAVA_HOME</code> property pointing to <code>1.8</code> library.\n<br>\nThe reason why I did it was a previous problems with maven on other project and I needed to force maven to use <code>Java 1.8</code> so when I switched to another project it caused finally problems.\n<br>\nI know it's very specific but maybe there is someone else who went through all suggestions and nothing worked, and overrided this variable too.</p>\n"},{"tags":[],"owner":{"account_id":1733872,"reputation":2893,"user_id":1586864,"display_name":"Harsh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668354494,"creation_date":1668354494,"answer_id":74422456,"question_id":54137286,"body_markdown":"Add this with maven compler plugin\r\n\r\n    &lt;dependencies&gt;\r\n    ...\r\n    &lt;/dependencies&gt;\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;1.8&lt;/source&gt;\r\n                    &lt;target&gt;1.8&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>Add this with maven compler plugin</p>\n<pre><code>&lt;dependencies&gt;\n...\n&lt;/dependencies&gt;\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3326028,"reputation":115,"user_id":2796104,"display_name":"Hmbucker"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672667719,"creation_date":1672667719,"answer_id":74983261,"question_id":54137286,"body_markdown":"Removing maven pom properties: \r\n\r\n    &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\r\n\r\nSolved it for me (so not setting it to 1.8 as suggested above)","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>Removing maven pom properties:</p>\n<pre><code>&lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n&lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n</code></pre>\n<p>Solved it for me (so not setting it to 1.8 as suggested above)</p>\n"}],"owner":{"account_id":1834364,"reputation":2700,"user_id":1665029,"display_name":"AMagic"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":414836,"favorite_count":0,"down_vote_count":0,"up_vote_count":194,"accepted_answer_id":54562060,"answer_count":36,"score":194,"last_activity_date":1699439335,"creation_date":1547156339,"question_id":54137286,"body_markdown":"I am trying to build an application which was built using java 8, now it&#39;s upgraded to java 11. I installed [Java 11][1] using [an oracle article][2] in my **windows machine** and I use **IntelliJ IDEA 2017** as my IDE.\r\n\r\nI changed my system environment variables and set the \r\n\r\n    JAVA_HOME to C:\\Program Files\\Java\\jdk-11.0.1\r\nAnd added that to the `Path` variable.\r\n\r\n    C:\\&gt;java -version\r\n    java version &quot;11.0.1&quot; 2018-10-16 LTS\r\n    Java(TM) SE Runtime Environment 18.9 (build 11.0.1+13-LTS)\r\n    Java HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.1+13-LTS, mixed mode) \r\n\r\nWhen I build my application in IntelliJ, this is what I get:\r\n\r\n    Information:java: Errors occurred while compiling module &#39;test-domain_main&#39;\r\n    Information: javac 1.8.0_171 was used to compile java sources\r\n    Information:1/10/2019 4:21 PM - Compilation completed with 1 error and 0 warnings in 1s 199ms\r\n    Error:java: invalid target release: 11\r\n\r\nThis is what I&#39;ve tried so far:\r\n\r\n 1. I changed `.idea/compiler.xml` target values from 8 to 11 but that didn&#39;t help. Also, verified the `Target bytecode version` in `settings &gt; Build, Execution, Deployment &gt; Compiler &gt; Java Compiler` and all my modules are set to 11. \r\n\r\n 2. Went to `file &gt; Project Structure &gt; SDKs *(currently I have 1.7 and 1.7 listed)* &gt; Add new SDK &gt; JDK &gt;`\r\nAfter that, I selected `C:\\Program Files\\Java\\jdk-11.0.1` But it errors out with &quot;The selected directory is not a valid home for JDK&quot;\r\n\r\nI am not sure if I installed the wrong JDK 11, because in my `C:\\Program Files\\Java\\`, I see separate JDK and JRE folders for `1.7` and `1.8` but only JDK folder for `11.0.1`\r\n\r\nOr is it something else I need to change? \r\n\r\n  [1]: https://www.oracle.com/technetwork/java/javase/downloads/index.html\r\n  [2]: https://docs.oracle.com/en/java/javase/11/install/installation-jdk-microsoft-windows-platforms.html#GUID-A7E27B90-A28D-4237-9383-A58B416071CA","title":"Error: Java: invalid target release: 11 - IntelliJ IDEA","body":"<p>I am trying to build an application which was built using java 8, now it's upgraded to java 11. I installed <a href=\"https://www.oracle.com/technetwork/java/javase/downloads/index.html\" rel=\"noreferrer\">Java 11</a> using <a href=\"https://docs.oracle.com/en/java/javase/11/install/installation-jdk-microsoft-windows-platforms.html#GUID-A7E27B90-A28D-4237-9383-A58B416071CA\" rel=\"noreferrer\">an oracle article</a> in my <strong>windows machine</strong> and I use <strong>IntelliJ IDEA 2017</strong> as my IDE.</p>\n\n<p>I changed my system environment variables and set the </p>\n\n<pre><code>JAVA_HOME to C:\\Program Files\\Java\\jdk-11.0.1\n</code></pre>\n\n<p>And added that to the <code>Path</code> variable.</p>\n\n<pre><code>C:\\&gt;java -version\njava version \"11.0.1\" 2018-10-16 LTS\nJava(TM) SE Runtime Environment 18.9 (build 11.0.1+13-LTS)\nJava HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.1+13-LTS, mixed mode) \n</code></pre>\n\n<p>When I build my application in IntelliJ, this is what I get:</p>\n\n<pre><code>Information:java: Errors occurred while compiling module 'test-domain_main'\nInformation: javac 1.8.0_171 was used to compile java sources\nInformation:1/10/2019 4:21 PM - Compilation completed with 1 error and 0 warnings in 1s 199ms\nError:java: invalid target release: 11\n</code></pre>\n\n<p>This is what I've tried so far:</p>\n\n<ol>\n<li><p>I changed <code>.idea/compiler.xml</code> target values from 8 to 11 but that didn't help. Also, verified the <code>Target bytecode version</code> in <code>settings &gt; Build, Execution, Deployment &gt; Compiler &gt; Java Compiler</code> and all my modules are set to 11. </p></li>\n<li><p>Went to <code>file &gt; Project Structure &gt; SDKs *(currently I have 1.7 and 1.7 listed)* &gt; Add new SDK &gt; JDK &gt;</code>\nAfter that, I selected <code>C:\\Program Files\\Java\\jdk-11.0.1</code> But it errors out with \"The selected directory is not a valid home for JDK\"</p></li>\n</ol>\n\n<p>I am not sure if I installed the wrong JDK 11, because in my <code>C:\\Program Files\\Java\\</code>, I see separate JDK and JRE folders for <code>1.7</code> and <code>1.8</code> but only JDK folder for <code>11.0.1</code></p>\n\n<p>Or is it something else I need to change? </p>\n"},{"tags":["java","spring-boot","azure-cosmosdb"],"answers":[{"tags":[],"owner":{"account_id":3894930,"reputation":4026,"user_id":3224238,"display_name":"Paizo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699439324,"creation_date":1699439324,"answer_id":77444711,"question_id":77433108,"body_markdown":"see https://learn.microsoft.com/en-us/azure/cosmos-db/nosql/how-to-time-to-live?tabs=javav4\r\n\r\nyou can enable TTL for a container or single item using the java SDK, from the doc above this is the snippet for setting the TTL on container level:\r\n\r\n    CosmosDatabase database = client.getDatabase(&quot;database&quot;);\r\n    \r\n    CosmosContainerProperties properties = new CosmosContainerProperties(\r\n        &quot;container&quot;,\r\n        &quot;/customerId&quot;\r\n    );\r\n    // Expire all documents after 90 days\r\n    properties.setDefaultTimeToLiveInSeconds(90 * 60 * 60 * 24);\r\n    \r\n    CosmosContainerResponse response = database\r\n        .createContainerIfNotExists(properties);\r\n\r\nyou can also use the annotation in the bean class as well, ie:\r\n\r\n`@Container(containerName = &quot;mycontainer&quot;, timeToLive = 123, autoCreateContainer = false)`\r\n\r\nafaik there is no way to set it using the properties, see https://github.com/microsoft/azure-spring-boot/issues/875","title":"How to set up TTL (Time to Live) of Azure Cosmso DB to &quot;on (no default)&quot; in Java spring boot app?","body":"<p>see <a href=\"https://learn.microsoft.com/en-us/azure/cosmos-db/nosql/how-to-time-to-live?tabs=javav4\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/cosmos-db/nosql/how-to-time-to-live?tabs=javav4</a></p>\n<p>you can enable TTL for a container or single item using the java SDK, from the doc above this is the snippet for setting the TTL on container level:</p>\n<pre><code>CosmosDatabase database = client.getDatabase(&quot;database&quot;);\n\nCosmosContainerProperties properties = new CosmosContainerProperties(\n    &quot;container&quot;,\n    &quot;/customerId&quot;\n);\n// Expire all documents after 90 days\nproperties.setDefaultTimeToLiveInSeconds(90 * 60 * 60 * 24);\n\nCosmosContainerResponse response = database\n    .createContainerIfNotExists(properties);\n</code></pre>\n<p>you can also use the annotation in the bean class as well, ie:</p>\n<p><code>@Container(containerName = &quot;mycontainer&quot;, timeToLive = 123, autoCreateContainer = false)</code></p>\n<p>afaik there is no way to set it using the properties, see <a href=\"https://github.com/microsoft/azure-spring-boot/issues/875\" rel=\"nofollow noreferrer\">https://github.com/microsoft/azure-spring-boot/issues/875</a></p>\n"}],"owner":{"account_id":25412502,"reputation":29,"user_id":19220058,"display_name":"Evgen Kr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1699439324,"creation_date":1699291879,"question_id":77433108,"body_markdown":"How to set up TTL  (Time to Live) of Azure Cosmos DB to &quot;on (no default)&quot; on Container Level in Java Spring Boot app ? Is it possible to do in yaml file or I have to write some code for it? Do I have to do it in bootstap.yaml or application.yaml? I wrote this config in file.yaml however I didn&#39;t sure about it.\r\n\r\n    spring:\r\n       cloud:\r\n          azure:\r\n            cosmos:\r\n               database: someName\r\n                 containers: someName\r\n                   ttl: on\r\n\r\n","title":"How to set up TTL (Time to Live) of Azure Cosmso DB to &quot;on (no default)&quot; in Java spring boot app?","body":"<p>How to set up TTL  (Time to Live) of Azure Cosmos DB to &quot;on (no default)&quot; on Container Level in Java Spring Boot app ? Is it possible to do in yaml file or I have to write some code for it? Do I have to do it in bootstap.yaml or application.yaml? I wrote this config in file.yaml however I didn't sure about it.</p>\n<pre><code>spring:\n   cloud:\n      azure:\n        cosmos:\n           database: someName\n             containers: someName\n               ttl: on\n</code></pre>\n"},{"tags":["java","spring-boot","gradle","intellij-idea","build"],"answers":[{"comments":[{"owner":{"account_id":21645329,"reputation":197,"user_id":15966756,"display_name":"Flippingflop"},"score":0,"creation_date":1639280638,"post_id":70320720,"comment_id":124307263,"body_markdown":"set to 1.8 ? Is it impossible to build a project with jdk 11 ?","body":"set to 1.8 ? Is it impossible to build a project with jdk 11 ?"},{"owner":{"account_id":17421269,"reputation":607,"user_id":12626795,"display_name":"Jawad Fadel"},"score":0,"creation_date":1639280750,"post_id":70320720,"comment_id":124307271,"body_markdown":"some lib not support 11 that&#39;s why you need to change it to 1.8","body":"some lib not support 11 that&#39;s why you need to change it to 1.8"}],"tags":[],"owner":{"account_id":17421269,"reputation":607,"user_id":12626795,"display_name":"Jawad Fadel"},"comment_count":2,"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1639279460,"creation_date":1639279460,"answer_id":70320720,"question_id":70320448,"body_markdown":"**Set project jdk to 1.8 instants 11**  ","title":"Spring Boot gradle build - invalid source release: 11","body":"<p><strong>Set project jdk to 1.8 instants 11</strong></p>\n"},{"comments":[{"owner":{"account_id":13356416,"reputation":372,"user_id":9639790,"display_name":"shreeramaute"},"score":0,"creation_date":1666235438,"post_id":70327247,"comment_id":130889373,"body_markdown":"had problem with STS, commandline argument approach worked for me i.e. solution2 on windows, thanks","body":"had problem with STS, commandline argument approach worked for me i.e. solution2 on windows, thanks"},{"owner":{"account_id":21645329,"reputation":197,"user_id":15966756,"display_name":"Flippingflop"},"score":0,"creation_date":1693065897,"post_id":70327247,"comment_id":135712147,"body_markdown":"Thanks. It seems like host env variable was the issue at the end. For intelliJ users; File -&gt; Settings -&gt; Tools -&gt; Terminal -&gt; Environment variables: JAVA_HOME=C:\\user\\desired\\jdk\\path. In this way you can set the JDK path in local project scope. Don&#39;t forget to close and re-open terminal tab.","body":"Thanks. It seems like host env variable was the issue at the end. For intelliJ users; File -&gt; Settings -&gt; Tools -&gt; Terminal -&gt; Environment variables: JAVA_HOME=C:\\user\\desired\\jdk\\path. In this way you can set the JDK path in local project scope. Don&#39;t forget to close and re-open terminal tab."}],"tags":[],"owner":{"account_id":15623839,"reputation":816,"user_id":16932810,"display_name":"jeff pentagon"},"comment_count":2,"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1639340092,"creation_date":1639339397,"answer_id":70327247,"question_id":70320448,"body_markdown":"There are 2 solutions. The problem is likely happening because Gradle Wrapper tried to find JDK 11 in Java_home and failed to find it there. I don&#39;t think it&#39;s because you are using some old deprecated dependencies that don&#39;t support jdk11.\r\n\r\nSolution1\r\n\r\nExplicitly mention the JDK you want to use on terminal.\r\nFor example, instead of\r\n\r\n    ./gradlew build\r\n\r\nUse\r\n\r\n    ./gradlew build -Dorg.gradle.java.home=yourjdk11homepath\r\n\r\nYour path might be something like:\r\n\r\n    C:\\\\Program Files\\\\OpenJDK\\\\jdk-11.0.3\r\n\r\nSolution 2\r\n\r\nIf you don&#39;t want to apply solution1 whenever you build project using gradle wrapper, you set the option in gradle.properties file.\r\n\r\nOn the same directory level as build.gradle and gradlew files, make\r\n\r\n    gradle.properties\r\n\r\nfile and write following:\r\n\r\n\r\n    org.gradle.java.home=yourjdk11homepath\r\n\r\n\r\nAgain, your path might be something like:\r\n\r\n\r\n    C:\\\\Program Files\\\\OpenJDK\\\\jdk-11.0.3","title":"Spring Boot gradle build - invalid source release: 11","body":"<p>There are 2 solutions. The problem is likely happening because Gradle Wrapper tried to find JDK 11 in Java_home and failed to find it there. I don't think it's because you are using some old deprecated dependencies that don't support jdk11.</p>\n<p>Solution1</p>\n<p>Explicitly mention the JDK you want to use on terminal.\nFor example, instead of</p>\n<pre><code>./gradlew build\n</code></pre>\n<p>Use</p>\n<pre><code>./gradlew build -Dorg.gradle.java.home=yourjdk11homepath\n</code></pre>\n<p>Your path might be something like:</p>\n<pre><code>C:\\\\Program Files\\\\OpenJDK\\\\jdk-11.0.3\n</code></pre>\n<p>Solution 2</p>\n<p>If you don't want to apply solution1 whenever you build project using gradle wrapper, you set the option in gradle.properties file.</p>\n<p>On the same directory level as build.gradle and gradlew files, make</p>\n<pre><code>gradle.properties\n</code></pre>\n<p>file and write following:</p>\n<pre><code>org.gradle.java.home=yourjdk11homepath\n</code></pre>\n<p>Again, your path might be something like:</p>\n<pre><code>C:\\\\Program Files\\\\OpenJDK\\\\jdk-11.0.3\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13724704,"reputation":439,"user_id":9903778,"display_name":"ArunSelvam P M"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1644117116,"creation_date":1644117116,"answer_id":71003935,"question_id":70320448,"body_markdown":"In my case it&#39;s my sdkman which no longer supports adoptopenjdk 11 and the project got renamed to Temurin. \r\n\r\nReference: https://sdkman.io/jdks\r\n\r\nSo my gradle build was trying to resolve the missing adoptopenjdk 11 and it couldn&#39;t. \r\nI reinstalled the jdk 11 from Temurin\r\n```\r\nsdk install java 11.0.14-tem\r\n```\r\nAnd voila it solved the build issue and my gradle build is successful.","title":"Spring Boot gradle build - invalid source release: 11","body":"<p>In my case it's my sdkman which no longer supports adoptopenjdk 11 and the project got renamed to Temurin.</p>\n<p>Reference: <a href=\"https://sdkman.io/jdks\" rel=\"nofollow noreferrer\">https://sdkman.io/jdks</a></p>\n<p>So my gradle build was trying to resolve the missing adoptopenjdk 11 and it couldn't.\nI reinstalled the jdk 11 from Temurin</p>\n<pre><code>sdk install java 11.0.14-tem\n</code></pre>\n<p>And voila it solved the build issue and my gradle build is successful.</p>\n"},{"tags":[],"owner":{"account_id":4784084,"reputation":940,"user_id":3865083,"display_name":"parisni"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699439297,"creation_date":1699439297,"answer_id":77444708,"question_id":70320448,"body_markdown":"In my case I had to remove the `.gradle` folder, likely cache was causing issues","title":"Spring Boot gradle build - invalid source release: 11","body":"<p>In my case I had to remove the <code>.gradle</code> folder, likely cache was causing issues</p>\n"}],"owner":{"account_id":21645329,"reputation":197,"user_id":15966756,"display_name":"Flippingflop"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15686,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":70327247,"answer_count":4,"score":13,"last_activity_date":1699439297,"creation_date":1639275213,"question_id":70320448,"body_markdown":"I am trying to build my spring boot project with this command:\r\n\r\n    ./gradlew build\r\n\r\nBut it continuously throws this error:\r\n\r\n    &#39;Execution failed for task &#39;:compileJava&#39;. invalid source release: 11&#39;.\r\n\r\nMy project is using Java version 11, and the IntelliJ Java version is set to 11 as well.\r\n\r\nThis is the Java version settings on my IntelliJ that I have done so far:\r\n\r\n1. Settings - Build, Execution, Deployment - Build Tools - Gradle&lt;br&gt;\r\n-&gt; set to 11.\r\n[![enter image description here][1]][1]\r\n\r\n2. Settings - Build, Execution, Deployment - Compiler - Java Compiler - Project bytecode version&lt;br&gt;\r\n-&gt; set to 11.\r\n[![enter image description here][1]][1]&lt;br&gt;&lt;br&gt;\r\n\r\n3. java -version command on IntelliJ Terminal&lt;br&gt;\r\n-&gt; set to 11.0.12&lt;br&gt;\r\n[![enter image description here][1]][1]\r\n&lt;br&gt;&lt;br&gt;\r\n\r\n4. Project Structure - Project Settings - Project - Project SDK:\r\n-&gt; set to 11.&lt;br&gt;\r\n[![enter image description here][2]][2]&lt;br&gt;&lt;br&gt;\r\n\r\n5. Project Structure - Project Settings - Modules - Module SDK:\r\n-&gt; set to 11.&lt;br&gt;\r\n[![enter image description here][3]][3]&lt;br&gt;&lt;br&gt;\r\n\r\n6. Project Structure - Platform Settings - SDKs - JDK home path: &lt;br&gt;\r\n-&gt; set to 11.&lt;br&gt;\r\n[![enter image description here][4]][4]&lt;br&gt;&lt;br&gt;\r\n\r\n7. System Environment path - JAVA_HOME&lt;br&gt;\r\n-&gt; set to 11.&lt;br&gt;\r\n[![enter image description here][5]][5]&lt;br&gt;&lt;br&gt;\r\n\r\n8. build.gradle - sourceCompatibility, targetCompatibility&lt;br&gt;\r\n-&gt; set to 11.&lt;br&gt;\r\n[![enter image description here][6]][6]\r\n\r\nAfter all of this when I run \r\n```\r\n./gradlew build\r\n```\r\n&lt;br&gt;&lt;br&gt;\r\n\r\nresult&lt;br&gt;\r\n[![enter image description here][7]][7]&lt;br&gt;&lt;br&gt;\r\n\r\nI think I&#39;ve done everything possible. Is there any other settings that I can try ??\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xysyZ.png\r\n  [2]: https://i.stack.imgur.com/KYoSk.png\r\n  [3]: https://i.stack.imgur.com/exU6u.png\r\n  [4]: https://i.stack.imgur.com/pSJjn.png\r\n  [5]: https://i.stack.imgur.com/R4ZLj.png\r\n  [6]: https://i.stack.imgur.com/aQD2s.png\r\n  [7]: https://i.stack.imgur.com/XCxc9.png\r\n","title":"Spring Boot gradle build - invalid source release: 11","body":"<p>I am trying to build my spring boot project with this command:</p>\n<pre><code>./gradlew build\n</code></pre>\n<p>But it continuously throws this error:</p>\n<pre><code>'Execution failed for task ':compileJava'. invalid source release: 11'.\n</code></pre>\n<p>My project is using Java version 11, and the IntelliJ Java version is set to 11 as well.</p>\n<p>This is the Java version settings on my IntelliJ that I have done so far:</p>\n<ol>\n<li><p>Settings - Build, Execution, Deployment - Build Tools - Gradle<br>\n-&gt; set to 11.\n<a href=\"https://i.stack.imgur.com/xysyZ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/xysyZ.png\" alt=\"enter image description here\" /></a></p>\n</li>\n<li><p>Settings - Build, Execution, Deployment - Compiler - Java Compiler - Project bytecode version<br>\n-&gt; set to 11.\n<a href=\"https://i.stack.imgur.com/xysyZ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/xysyZ.png\" alt=\"enter image description here\" /></a><br><br></p>\n</li>\n<li><p>java -version command on IntelliJ Terminal<br>\n-&gt; set to 11.0.12<br>\n<a href=\"https://i.stack.imgur.com/xysyZ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/xysyZ.png\" alt=\"enter image description here\" /></a>\n<br><br></p>\n</li>\n<li><p>Project Structure - Project Settings - Project - Project SDK:\n-&gt; set to 11.<br>\n<a href=\"https://i.stack.imgur.com/KYoSk.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/KYoSk.png\" alt=\"enter image description here\" /></a><br><br></p>\n</li>\n<li><p>Project Structure - Project Settings - Modules - Module SDK:\n-&gt; set to 11.<br>\n<a href=\"https://i.stack.imgur.com/exU6u.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/exU6u.png\" alt=\"enter image description here\" /></a><br><br></p>\n</li>\n<li><p>Project Structure - Platform Settings - SDKs - JDK home path: <br>\n-&gt; set to 11.<br>\n<a href=\"https://i.stack.imgur.com/pSJjn.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/pSJjn.png\" alt=\"enter image description here\" /></a><br><br></p>\n</li>\n<li><p>System Environment path - JAVA_HOME<br>\n-&gt; set to 11.<br>\n<a href=\"https://i.stack.imgur.com/R4ZLj.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/R4ZLj.png\" alt=\"enter image description here\" /></a><br><br></p>\n</li>\n<li><p>build.gradle - sourceCompatibility, targetCompatibility<br>\n-&gt; set to 11.<br>\n<a href=\"https://i.stack.imgur.com/aQD2s.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/aQD2s.png\" alt=\"enter image description here\" /></a></p>\n</li>\n</ol>\n<p>After all of this when I run</p>\n<pre><code>./gradlew build\n</code></pre>\n<p><br><br></p>\n<p>result<br>\n<a href=\"https://i.stack.imgur.com/XCxc9.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/XCxc9.png\" alt=\"enter image description here\" /></a><br><br></p>\n<p>I think I've done everything possible. Is there any other settings that I can try ??</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9842,"page":75,"page_size":100}
