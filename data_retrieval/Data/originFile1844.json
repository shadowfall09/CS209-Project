{"items":[{"tags":["java","scala","apache-poi"],"comments":[{"owner":{"account_id":5131293,"reputation":21831,"user_id":4111404,"accept_rate":80,"display_name":"Luis Miguel Mej&#237;a Su&#225;rez"},"score":3,"creation_date":1637089690,"post_id":69994705,"comment_id":123731499,"body_markdown":"Use the version that reads from an `InputStream`: http://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/WorkbookFactory.html#create-java.io.InputStream- and check this: https://stackoverflow.com/questions/793213/getting-the-inputstream-from-a-classpath-resource-xml-file","body":"Use the version that reads from an <code>InputStream</code>: <a href=\"http://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/WorkbookFactory.html#create-java.io.InputStream-\" rel=\"nofollow noreferrer\">poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/&hellip;</a> and check this: <a href=\"https://stackoverflow.com/questions/793213/getting-the-inputstream-from-a-classpath-resource-xml-file\" title=\"getting the inputstream from a classpath resource xml file\">stackoverflow.com/questions/793213/&hellip;</a>"},{"owner":{"account_id":1246193,"reputation":5056,"user_id":1207596,"accept_rate":93,"display_name":"Zhao Li"},"score":0,"creation_date":1637091798,"post_id":69994705,"comment_id":123732203,"body_markdown":"Thanks for the links.  I was not able to get an input stream using any of the below statements:\nUsing(Source.fromFile(&quot;resource.file&quot;)) { source =&gt; source.mkString }","body":"Thanks for the links.  I was not able to get an input stream using any of the below statements: Using(Source.fromFile(&quot;resource.file&quot;)) { source =&gt; source.mkString }"},{"owner":{"account_id":1246193,"reputation":5056,"user_id":1207596,"accept_rate":93,"display_name":"Zhao Li"},"score":0,"creation_date":1637091844,"post_id":69994705,"comment_id":123732215,"body_markdown":"val file = getClass.getResourceAsStream(&quot;resource.file&quot;)","body":"val file = getClass.getResourceAsStream(&quot;resource.file&quot;)"},{"owner":{"account_id":1246193,"reputation":5056,"user_id":1207596,"accept_rate":93,"display_name":"Zhao Li"},"score":0,"creation_date":1637091873,"post_id":69994705,"comment_id":123732228,"body_markdown":"val file = ClassLoader.getResourceAsStream(&quot;resource.file&quot;)","body":"val file = ClassLoader.getResourceAsStream(&quot;resource.file&quot;)"},{"owner":{"account_id":1246193,"reputation":5056,"user_id":1207596,"accept_rate":93,"display_name":"Zhao Li"},"score":0,"creation_date":1637091908,"post_id":69994705,"comment_id":123732236,"body_markdown":"sorry, I&#39;m not familiar enough with Scala and Java to fill in the missing pieces...","body":"sorry, I&#39;m not familiar enough with Scala and Java to fill in the missing pieces..."},{"owner":{"account_id":964210,"reputation":1018,"user_id":987959,"display_name":"PJ Fanning"},"score":2,"creation_date":1637093039,"post_id":69994705,"comment_id":123732662,"body_markdown":"You could consider https://github.com/norbert-radyk/spoiwo","body":"You could consider <a href=\"https://github.com/norbert-radyk/spoiwo\" rel=\"nofollow noreferrer\">github.com/norbert-radyk/spoiwo</a>"},{"owner":{"account_id":964210,"reputation":1018,"user_id":987959,"display_name":"PJ Fanning"},"score":2,"creation_date":1637093162,"post_id":69994705,"comment_id":123732705,"body_markdown":"@Zhao - Scala supports all the Java classes - you can just create a java.io.FileInputStream if that better suits using POI - you don&#39;t have to use scala.io.BufferedSource","body":"@Zhao - Scala supports all the Java classes - you can just create a java.io.FileInputStream if that better suits using POI - you don&#39;t have to use scala.io.BufferedSource"},{"owner":{"account_id":1246193,"reputation":5056,"user_id":1207596,"accept_rate":93,"display_name":"Zhao Li"},"score":0,"creation_date":1637093276,"post_id":69994705,"comment_id":123732753,"body_markdown":"Thanks @PJFanning.  I wanted to avoid specifying the folder path `src/main/resources/` and thought `scala.io.Source` would be a better fit.  But now I&#39;m regretting going down that path.","body":"Thanks @PJFanning.  I wanted to avoid specifying the folder path <code>src&#47;main&#47;resources&#47;</code> and thought <code>scala.io.Source</code> would be a better fit.  But now I&#39;m regretting going down that path."},{"owner":{"account_id":5131293,"reputation":21831,"user_id":4111404,"accept_rate":80,"display_name":"Luis Miguel Mej&#237;a Su&#225;rez"},"score":2,"creation_date":1637096023,"post_id":69994705,"comment_id":123733765,"body_markdown":"@ZhaoLi `val file = getClass.getResourceAsStream(&quot;resource.file&quot;)` should return an `InputStream` and if you look at the [`Source` code](https://github.com/scala/scala/blob/v2.13.7/src/library/scala/io/Source.scala#L180) you will see that it does something very similar. If you please the whole exact code should be: `val file = Thread.currentThread.getContextClassLoader.getResourceAsStream(&quot;resource.file&quot;)`","body":"@ZhaoLi <code>val file = getClass.getResourceAsStream(&quot;resource.file&quot;)</code> should return an <code>InputStream</code> and if you look at the <a href=\"https://github.com/scala/scala/blob/v2.13.7/src/library/scala/io/Source.scala#L180\" rel=\"nofollow noreferrer\"><code>Source</code> code</a> you will see that it does something very similar. If you please the whole exact code should be: <code>val file = Thread.currentThread.getContextClassLoader.getResourceAsStre&zwnj;&#8203;am(&quot;resource.file&quot;)</code>"}],"answers":[{"tags":[],"owner":{"account_id":3908845,"reputation":11548,"user_id":3314107,"accept_rate":80,"display_name":"stefanobaghino"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1637127302,"creation_date":1637096540,"answer_id":69995981,"question_id":69994705,"body_markdown":"Note that the folder structure is not handled by `sbt`.\r\n\r\nWhat happens is that the contents of `src/main/resources` are shipped into the JAR and are available in your classpath as a resource.\r\n\r\nIf you do something along the lines of what `Source.fromResource` does, you should be able to get what you need.\r\n\r\nHere is the code snippet for reference:\r\n\r\n```\r\n  /** Reads data from a classpath resource, using either a context classloader (default) or a passed one.\r\n   *\r\n   *  @param  resource     name of the resource to load from the classpath\r\n   *  @param  classLoader  classloader to be used, or context classloader if not specified\r\n   *  @return              the buffered source\r\n   */\r\n  def fromResource(resource: String, classLoader: ClassLoader = Thread.currentThread().getContextClassLoader())(implicit codec: Codec): BufferedSource =\r\n    Option(classLoader.getResourceAsStream(resource)) match {\r\n      case Some(in) =&gt; fromInputStream(in)\r\n      case None     =&gt; throw new FileNotFoundException(s&quot;resource &#39;$resource&#39; was not found in the classpath from the given classloader.&quot;)\r\n    }\r\n```\r\n\r\nThis code is found on GitHub and here is the link for a recent `HEAD`: https://github.com/scala/scala/blob/8a2cf63ee5bad8c8c054f76464de0e10226516a0/src/library/scala/io/Source.scala#L174-L184\r\n\r\nIn principle, you can load the resource as a stream using the Java API and pass it to the `WorkbookFactory.create` static method overload that takes an `InputStream` as an input that someone mentioned in a comment.\r\n\r\nSomething along the lines of\r\n\r\n```\r\ndef maybeResourceAt(path: String): Option[InputStream] =\r\n  Option(\r\n    Thread.\r\n      currentThread().\r\n      getContextClassLoader().\r\n      getResourceAsStream(path)\r\n  )\r\n\r\nval input = maybeResourceAt(&quot;resource.file&quot;).getOrElse(sys.error(&quot;oh noes&quot;))\r\nval workbook = WorkbookFactory.create(input)\r\n```\r\n\r\nshould get the job done.\r\n\r\nI&#39;m not sure who&#39;s in charge of closing the `InputStream`. Intuitively I would say that `create` should consume it entirely but double check with the library&#39;s documentation to be sure.","title":"How to convert scala.io.BufferedSource to java.io.File?","body":"<p>Note that the folder structure is not handled by <code>sbt</code>.</p>\n<p>What happens is that the contents of <code>src/main/resources</code> are shipped into the JAR and are available in your classpath as a resource.</p>\n<p>If you do something along the lines of what <code>Source.fromResource</code> does, you should be able to get what you need.</p>\n<p>Here is the code snippet for reference:</p>\n<pre><code>  /** Reads data from a classpath resource, using either a context classloader (default) or a passed one.\n   *\n   *  @param  resource     name of the resource to load from the classpath\n   *  @param  classLoader  classloader to be used, or context classloader if not specified\n   *  @return              the buffered source\n   */\n  def fromResource(resource: String, classLoader: ClassLoader = Thread.currentThread().getContextClassLoader())(implicit codec: Codec): BufferedSource =\n    Option(classLoader.getResourceAsStream(resource)) match {\n      case Some(in) =&gt; fromInputStream(in)\n      case None     =&gt; throw new FileNotFoundException(s&quot;resource '$resource' was not found in the classpath from the given classloader.&quot;)\n    }\n</code></pre>\n<p>This code is found on GitHub and here is the link for a recent <code>HEAD</code>: <a href=\"https://github.com/scala/scala/blob/8a2cf63ee5bad8c8c054f76464de0e10226516a0/src/library/scala/io/Source.scala#L174-L184\" rel=\"nofollow noreferrer\">https://github.com/scala/scala/blob/8a2cf63ee5bad8c8c054f76464de0e10226516a0/src/library/scala/io/Source.scala#L174-L184</a></p>\n<p>In principle, you can load the resource as a stream using the Java API and pass it to the <code>WorkbookFactory.create</code> static method overload that takes an <code>InputStream</code> as an input that someone mentioned in a comment.</p>\n<p>Something along the lines of</p>\n<pre><code>def maybeResourceAt(path: String): Option[InputStream] =\n  Option(\n    Thread.\n      currentThread().\n      getContextClassLoader().\n      getResourceAsStream(path)\n  )\n\nval input = maybeResourceAt(&quot;resource.file&quot;).getOrElse(sys.error(&quot;oh noes&quot;))\nval workbook = WorkbookFactory.create(input)\n</code></pre>\n<p>should get the job done.</p>\n<p>I'm not sure who's in charge of closing the <code>InputStream</code>. Intuitively I would say that <code>create</code> should consume it entirely but double check with the library's documentation to be sure.</p>\n"}],"owner":{"account_id":1246193,"reputation":5056,"user_id":1207596,"accept_rate":93,"display_name":"Zhao Li"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":897,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69995981,"answer_count":1,"score":0,"last_activity_date":1637127302,"creation_date":1637089104,"question_id":69994705,"body_markdown":"I want to use the Apache POI library in a Scala project.\r\n\r\nHow can I convert a `scala.io.BufferedSource` type to a `java.io.File` type?\r\n```\r\n  val file = Source.fromResource(&quot;resource.file&quot;) // is type scala.io.BufferedSource\r\n  // how can I do the conversion here\r\n  val workbook = WorkbookFactory.create(file) // requires type java.io.File\r\n```\r\n\r\nThis works, but I want to avoid specifying the folder path since the folder structure is handled by sbt convention:\r\n```\r\n  val file = new File(&quot;src/main/resources/resource.file&quot;)\r\n  val workbook = WorkbookFactory.create(file)\r\n```\r\n\r\nThank you for your time &#128591;","title":"How to convert scala.io.BufferedSource to java.io.File?","body":"<p>I want to use the Apache POI library in a Scala project.</p>\n<p>How can I convert a <code>scala.io.BufferedSource</code> type to a <code>java.io.File</code> type?</p>\n<pre><code>  val file = Source.fromResource(&quot;resource.file&quot;) // is type scala.io.BufferedSource\n  // how can I do the conversion here\n  val workbook = WorkbookFactory.create(file) // requires type java.io.File\n</code></pre>\n<p>This works, but I want to avoid specifying the folder path since the folder structure is handled by sbt convention:</p>\n<pre><code>  val file = new File(&quot;src/main/resources/resource.file&quot;)\n  val workbook = WorkbookFactory.create(file)\n</code></pre>\n<p>Thank you for your time 🙏</p>\n"},{"tags":["java","spring","security","model-view-controller","resources"],"answers":[{"tags":[],"owner":{"account_id":23135533,"reputation":107,"user_id":17239818,"display_name":"NARASIMHA RAO NANDIKONDA"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1635188673,"creation_date":1635188135,"answer_id":69713330,"question_id":69711763,"body_markdown":"try to override config method with web-security on resources like below and also if you are using thymleaf use @ to represent URI **href=&quot;@{/\\**\\/css/index.css}&quot;** or else check the path properly.\r\n\r\n    @Override\r\n    public void configure(WebSecurity web) throws Exception {\r\n        web.ignoring().antMatchers(&quot;/resources/*&quot;);\r\n    }\r\n\r\n","title":"Resources are not loaded in Spring MVC with Java config","body":"<p>try to override config method with web-security on resources like below and also if you are using thymleaf use @ to represent URI <strong>href=&quot;@{/**/css/index.css}&quot;</strong> or else check the path properly.</p>\n<pre><code>@Override\npublic void configure(WebSecurity web) throws Exception {\n    web.ignoring().antMatchers(&quot;/resources/*&quot;);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17689981,"reputation":31,"user_id":12841996,"display_name":"Aditya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637127001,"creation_date":1635188521,"answer_id":69713396,"question_id":69711763,"body_markdown":"Use this syntax to access your css file \r\n\r\n    &lt;link href=&quot;&lt;c:url value=&quot;/resources/css/index.css /&gt;&quot; rel=&quot;stylesheet&quot;&gt;","title":"Resources are not loaded in Spring MVC with Java config","body":"<p>Use this syntax to access your css file</p>\n<pre><code>&lt;link href=&quot;&lt;c:url value=&quot;/resources/css/index.css /&gt;&quot; rel=&quot;stylesheet&quot;&gt;\n</code></pre>\n"}],"owner":{"account_id":18196292,"reputation":3,"user_id":13241297,"display_name":"DPilot"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":151,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69713330,"answer_count":2,"score":0,"last_activity_date":1637127001,"creation_date":1635179844,"question_id":69711763,"body_markdown":"Firstly I was used WebMvcConfigurerAdapter in RootConfig, and the resources were connected, but I didn&#39;t deploy the Spring Security project.\r\n\r\n    @Configuration\r\n    @ComponentScan({&quot;org.example&quot;})\r\n    public class RootConfig extends WebMvcConfigurerAdapter {\r\n    }\r\n\r\nThen I deleted WebMvcConfigurerAdapter from the class RootConfig, and the project became deployable, but the resources stopped working.\r\n\r\n    @Configuration\r\n    @ComponentScan({&quot;org.example&quot;})\r\n    public class RootConfig {\r\n    }\r\n\r\n[project structure][3]\r\n\r\nHow I connect styles:\r\n\r\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;${pageContext.request.contextPath}/resources/css/index.css&quot;&gt;\r\n\r\nMy resource handler:\r\n\r\n    @Configuration\r\n    @EnableWebMvc\r\n    @ComponentScan({\r\n            &quot;org.example&quot;,\r\n            &quot;org.example.model&quot;,\r\n            &quot;org.example.repo&quot;,\r\n            &quot;org.example.service&quot;\r\n    })\r\n    public class WebConfig implements WebMvcConfigurer {\r\n        @Bean\r\n        public ViewResolver viewResolver() {\r\n            InternalResourceViewResolver resolver = new InternalResourceViewResolver();\r\n            resolver.setPrefix(&quot;/WEB-INF/views/&quot;);\r\n            resolver.setSuffix(&quot;.jsp&quot;);\r\n            return resolver;\r\n        }\r\n    \r\n        @Override\r\n        public void addResourceHandlers(ResourceHandlerRegistry registry) {\r\n            registry.addResourceHandler(&quot;/resources/**&quot;).addResourceLocations(&quot;/resources/&quot;);\r\n        }\r\n    }\r\n\r\nSpringMvcDispatcherServletInitializer:\r\n\r\n    public class SpringMvcDispatcherServletInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {\r\n        @Override\r\n        protected Class&lt;?&gt;[] getRootConfigClasses() {\r\n            return new Class[]{RootConfig.class};\r\n        }\r\n    \r\n        @Override\r\n        protected Class&lt;?&gt;[] getServletConfigClasses() {\r\n            return new Class[]{WebConfig.class};\r\n        }\r\n    \r\n        @Override\r\n        protected String[] getServletMappings() {\r\n            return new String[]{&quot;/&quot;};\r\n        }\r\n    }\r\n\r\n  \r\n\r\n[1]: https://i.stack.imgur.com/dTH9Y.png\r\n  [2]: https://i.stack.imgur.com/HBZRt.png\r\n  [3]: https://i.stack.imgur.com/VSP9z.png\r\n  [4]: https://i.stack.imgur.com/FUFzV.png\r\n  [5]: https://i.stack.imgur.com/GM6G8.png","title":"Resources are not loaded in Spring MVC with Java config","body":"<p>Firstly I was used WebMvcConfigurerAdapter in RootConfig, and the resources were connected, but I didn't deploy the Spring Security project.</p>\n<pre><code>@Configuration\n@ComponentScan({&quot;org.example&quot;})\npublic class RootConfig extends WebMvcConfigurerAdapter {\n}\n</code></pre>\n<p>Then I deleted WebMvcConfigurerAdapter from the class RootConfig, and the project became deployable, but the resources stopped working.</p>\n<pre><code>@Configuration\n@ComponentScan({&quot;org.example&quot;})\npublic class RootConfig {\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/VSP9z.png\" rel=\"nofollow noreferrer\">project structure</a></p>\n<p>How I connect styles:</p>\n<pre><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;${pageContext.request.contextPath}/resources/css/index.css&quot;&gt;\n</code></pre>\n<p>My resource handler:</p>\n<pre><code>@Configuration\n@EnableWebMvc\n@ComponentScan({\n        &quot;org.example&quot;,\n        &quot;org.example.model&quot;,\n        &quot;org.example.repo&quot;,\n        &quot;org.example.service&quot;\n})\npublic class WebConfig implements WebMvcConfigurer {\n    @Bean\n    public ViewResolver viewResolver() {\n        InternalResourceViewResolver resolver = new InternalResourceViewResolver();\n        resolver.setPrefix(&quot;/WEB-INF/views/&quot;);\n        resolver.setSuffix(&quot;.jsp&quot;);\n        return resolver;\n    }\n\n    @Override\n    public void addResourceHandlers(ResourceHandlerRegistry registry) {\n        registry.addResourceHandler(&quot;/resources/**&quot;).addResourceLocations(&quot;/resources/&quot;);\n    }\n}\n</code></pre>\n<p>SpringMvcDispatcherServletInitializer:</p>\n<pre><code>public class SpringMvcDispatcherServletInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {\n    @Override\n    protected Class&lt;?&gt;[] getRootConfigClasses() {\n        return new Class[]{RootConfig.class};\n    }\n\n    @Override\n    protected Class&lt;?&gt;[] getServletConfigClasses() {\n        return new Class[]{WebConfig.class};\n    }\n\n    @Override\n    protected String[] getServletMappings() {\n        return new String[]{&quot;/&quot;};\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","mqtt","hivemq"],"comments":[{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":2,"creation_date":1637126689,"post_id":69999276,"comment_id":123739690,"body_markdown":"Add an automatic reconnect handler - https://gitlab.com/bmorris591/air-quality-monitor/-/blob/master/hive-mqtt-client/src/main/kotlin/uk/co/borismorris/dyson/airqualitymonitor/mqtt/hive/NettyDysonMqttClient.kt#L84","body":"Add an automatic reconnect handler - <a href=\"https://gitlab.com/bmorris591/air-quality-monitor/-/blob/master/hive-mqtt-client/src/main/kotlin/uk/co/borismorris/dyson/airqualitymonitor/mqtt/hive/NettyDysonMqttClient.kt#L84\" rel=\"nofollow noreferrer\">gitlab.com/bmorris591/air-quality-monitor/-/blob/master/&hellip;</a>"}],"owner":{"account_id":17710801,"reputation":117,"user_id":12858377,"display_name":"NewbieCoder"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":649,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1637126764,"creation_date":1637126385,"question_id":69999276,"body_markdown":"When i run my code it&#39;s working fine but after some hours it stop working and show this error **Not able to publish: MQTT client is not connected**\r\n```\r\n    public Mqtt5AsyncClient connect(String host, int port) {\r\n        Mqtt5AsyncClient client = MqttClient.builder().useMqttVersion5()\r\n                .identifier(UUID.randomUUID().toString())\r\n          .serverHost(host)\r\n                .serverPort(port).buildAsync();\r\n\r\n        Mqtt5ConnAck connectionAck = null;\r\n        try {\r\n            connectionAck = client.toBlocking().connect();\r\n            Mqtt5ConnAckReasonCode connAckCode = connectionAck.getReasonCode();\r\n            logger.debug(&quot;Client connected to broker with url: &quot; + host + &quot;:&quot; + port + &quot; ::Connection ack code: &quot; + &quot; keep alive &quot;);\r\n           \r\n        } catch (Exception ex) {\r\n            logger.debug(&quot;Not able to connect to broker with url: &quot; + host + &quot;:&quot; + port);\r\n            ex.printStackTrace();\r\n        }\r\n return client;\r\n    }\r\n```\r\n\r\n","title":"Not able to publish: MQTT client is not connected in java","body":"<p>When i run my code it's working fine but after some hours it stop working and show this error <strong>Not able to publish: MQTT client is not connected</strong></p>\n<pre><code>    public Mqtt5AsyncClient connect(String host, int port) {\n        Mqtt5AsyncClient client = MqttClient.builder().useMqttVersion5()\n                .identifier(UUID.randomUUID().toString())\n          .serverHost(host)\n                .serverPort(port).buildAsync();\n\n        Mqtt5ConnAck connectionAck = null;\n        try {\n            connectionAck = client.toBlocking().connect();\n            Mqtt5ConnAckReasonCode connAckCode = connectionAck.getReasonCode();\n            logger.debug(&quot;Client connected to broker with url: &quot; + host + &quot;:&quot; + port + &quot; ::Connection ack code: &quot; + &quot; keep alive &quot;);\n           \n        } catch (Exception ex) {\n            logger.debug(&quot;Not able to connect to broker with url: &quot; + host + &quot;:&quot; + port);\n            ex.printStackTrace();\n        }\n return client;\n    }\n</code></pre>\n"},{"tags":["java","android","android-studio","android-intent","android-alertdialog"],"comments":[{"owner":{"account_id":19210681,"reputation":90,"user_id":14036546,"display_name":"Ashirwad Kumar"},"score":0,"creation_date":1637123898,"post_id":69996233,"comment_id":123739243,"body_markdown":"Please share the logcat or error you are getting.","body":"Please share the logcat or error you are getting."}],"answers":[{"tags":[],"owner":{"account_id":22616962,"reputation":3155,"user_id":16796366,"display_name":"Nitish"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637126553,"creation_date":1637126553,"answer_id":69999307,"question_id":69996233,"body_markdown":"You are finding the `resourceId` of the button in the dialog from wrong view. \r\nButtons are present in dialog while you are finding it from activity/fragment view.  \r\nUpdate your code to find it from dialogView.\r\n\r\n     AlertDialog.Builder builder = new AlertDialog.Builder(SignUpActivity.this);\r\n        LayoutInflater inflater = getLayoutInflater();\r\n        View dialogView = inflater.inflate(R.layout.alert_dialog,null);\r\n        builder.setCancelable(false);\r\n        builder.setView(dialogView);\r\n    \r\n        galleryPick = dialogView.findViewById(R.id.gallery_pick); // find id from dialog view\r\n        cameraPick = dialogView.findViewById(R.id.camera_pick); // find id from dialog view\r\n    \r\n        AlertDialog alertDialog = builder.create();\r\n        alertDialog.show();","title":"Why does alertDialog cause my app to crash?","body":"<p>You are finding the <code>resourceId</code> of the button in the dialog from wrong view.\nButtons are present in dialog while you are finding it from activity/fragment view.<br />\nUpdate your code to find it from dialogView.</p>\n<pre><code> AlertDialog.Builder builder = new AlertDialog.Builder(SignUpActivity.this);\n    LayoutInflater inflater = getLayoutInflater();\n    View dialogView = inflater.inflate(R.layout.alert_dialog,null);\n    builder.setCancelable(false);\n    builder.setView(dialogView);\n\n    galleryPick = dialogView.findViewById(R.id.gallery_pick); // find id from dialog view\n    cameraPick = dialogView.findViewById(R.id.camera_pick); // find id from dialog view\n\n    AlertDialog alertDialog = builder.create();\n    alertDialog.show();\n</code></pre>\n"}],"owner":{"account_id":23358481,"reputation":1,"user_id":17431104,"display_name":"Terminator"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637126553,"creation_date":1637098039,"question_id":69996233,"body_markdown":"\r\n\r\npublic class SignUpActivity extends AppCompatActivity\r\n{\r\n\r\n    private CircleImageView profilePic,galleryPick,cameraPick;\r\n    private ActivityResultLauncher&lt;Intent&gt; activityResultLauncher;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_sign_up);\r\n\r\n        profilePic = findViewById(R.id.circular_image);\r\n\r\n        \r\n        activityResultLauncher = registerForActivityResult(new ActivityResultContracts.StartActivityForResult(), new ActivityResultCallback&lt;ActivityResult&gt;() {\r\n            @Override\r\n            public void onActivityResult(ActivityResult result)\r\n            {\r\n                if(result.getResultCode() == RESULT_OK &amp;&amp; result.getData() != null)\r\n                {\r\n                    Bundle bundle = result.getData().getExtras();\r\n                    Bitmap bitmap = (Bitmap) bundle.get(&quot;data&quot;);\r\n                    profilePic.setImageBitmap(bitmap);\r\n                }\r\n            }\r\n        });\r\n\r\n        profilePic.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n               chooseProfilePic();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n    private void chooseProfilePic()\r\n    {\r\n        AlertDialog.Builder builder = new AlertDialog.Builder(SignUpActivity.this);\r\n        LayoutInflater inflater = getLayoutInflater();\r\n        View dialogView = inflater.inflate(R.layout.alert_dialog,null);\r\n        builder.setCancelable(false);\r\n        builder.setView(dialogView);\r\n\r\n        galleryPick = findViewById(R.id.gallery_pick);\r\n        cameraPick = findViewById(R.id.camera_pick);\r\n\r\n        AlertDialog alertDialog = builder.create();\r\n        alertDialog.show();\r\n\r\n\r\n\r\n        cameraPick.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n                Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\r\n                if(cameraIntent.resolveActivity(getPackageManager()) != null)\r\n                {\r\n                    activityResultLauncher.launch(cameraIntent);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    \r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nSo I am a beginner in Android Studio and since startForActivityResult is deprecated I am\r\nlooking for something to replace it. The new method works but there occurs a problem when\r\nused with private method including the alert dialog. \r\n\r\n\r\n\r\n\r\n\r\n","title":"Why does alertDialog cause my app to crash?","body":"<p>public class SignUpActivity extends AppCompatActivity\n{</p>\n<pre><code>private CircleImageView profilePic,galleryPick,cameraPick;\nprivate ActivityResultLauncher&lt;Intent&gt; activityResultLauncher;\n\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_sign_up);\n\n    profilePic = findViewById(R.id.circular_image);\n\n    \n    activityResultLauncher = registerForActivityResult(new ActivityResultContracts.StartActivityForResult(), new ActivityResultCallback&lt;ActivityResult&gt;() {\n        @Override\n        public void onActivityResult(ActivityResult result)\n        {\n            if(result.getResultCode() == RESULT_OK &amp;&amp; result.getData() != null)\n            {\n                Bundle bundle = result.getData().getExtras();\n                Bitmap bitmap = (Bitmap) bundle.get(&quot;data&quot;);\n                profilePic.setImageBitmap(bitmap);\n            }\n        }\n    });\n\n    profilePic.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v)\n        {\n           chooseProfilePic();\n        }\n    });\n\n}\n\n\nprivate void chooseProfilePic()\n{\n    AlertDialog.Builder builder = new AlertDialog.Builder(SignUpActivity.this);\n    LayoutInflater inflater = getLayoutInflater();\n    View dialogView = inflater.inflate(R.layout.alert_dialog,null);\n    builder.setCancelable(false);\n    builder.setView(dialogView);\n\n    galleryPick = findViewById(R.id.gallery_pick);\n    cameraPick = findViewById(R.id.camera_pick);\n\n    AlertDialog alertDialog = builder.create();\n    alertDialog.show();\n\n\n\n    cameraPick.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v)\n        {\n            Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\n            if(cameraIntent.resolveActivity(getPackageManager()) != null)\n            {\n                activityResultLauncher.launch(cameraIntent);\n            }\n        }\n    });\n}\n</code></pre>\n<p>}</p>\n<p>So I am a beginner in Android Studio and since startForActivityResult is deprecated I am\nlooking for something to replace it. The new method works but there occurs a problem when\nused with private method including the alert dialog.</p>\n"},{"tags":["java","android","sharedpreferences"],"comments":[{"owner":{"account_id":6912524,"reputation":458,"user_id":5307859,"display_name":"Aman"},"score":0,"creation_date":1637126326,"post_id":69999049,"comment_id":123739625,"body_markdown":"Why do you want to save the layout? Could you please elaborate? you can use shared preference to maintain the login state not to save the layout.","body":"Why do you want to save the layout? Could you please elaborate? you can use shared preference to maintain the login state not to save the layout."},{"owner":{"account_id":11629820,"reputation":116,"user_id":8518427,"display_name":"Ramanand Prajapati"},"score":0,"creation_date":1637130825,"post_id":69999049,"comment_id":123740555,"body_markdown":"Saving layout is not a good practice we use shared preference to save some data not the layouts","body":"Saving layout is not a good practice we use shared preference to save some data not the layouts"},{"owner":{"account_id":23351492,"reputation":133,"user_id":17424991,"display_name":"abdul"},"score":0,"creation_date":1637212020,"post_id":69999049,"comment_id":123767067,"body_markdown":"@Aman, Is it possible to save ImageButton and TextView in sharedPreferences anh how can we go it?","body":"@Aman, Is it possible to save ImageButton and TextView in sharedPreferences anh how can we go it?"},{"owner":{"account_id":6912524,"reputation":458,"user_id":5307859,"display_name":"Aman"},"score":0,"creation_date":1637233079,"post_id":69999049,"comment_id":123773648,"body_markdown":"@abdul it is not possible to save layouts using shared preference.","body":"@abdul it is not possible to save layouts using shared preference."},{"owner":{"account_id":23351492,"reputation":133,"user_id":17424991,"display_name":"abdul"},"score":0,"creation_date":1637234847,"post_id":69999049,"comment_id":123774322,"body_markdown":"@Aman, then how can i change ui when a button is pressed","body":"@Aman, then how can i change ui when a button is pressed"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1637285171,"post_id":69999049,"comment_id":123792000,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637125374,"creation_date":1637125374,"answer_id":69999165,"question_id":69999049,"body_markdown":"You can&#39;t save a layout.  You can save a layout id-  but I wouldn&#39;t suggest it.  Resource ids are not stable across builds, so any update would break it.  Your best bet is to create an enum with whatever values you wish it to have, save the enum, and later on convert the string back into an enum when you read it in.  Then hold a map&lt;enum, resourceId&gt; in code that maps to the correct resource id.","title":"How to save a state in Shared preferences on Android Java?","body":"<p>You can't save a layout.  You can save a layout id-  but I wouldn't suggest it.  Resource ids are not stable across builds, so any update would break it.  Your best bet is to create an enum with whatever values you wish it to have, save the enum, and later on convert the string back into an enum when you read it in.  Then hold a map&lt;enum, resourceId&gt; in code that maps to the correct resource id.</p>\n"}],"owner":{"account_id":23351492,"reputation":133,"user_id":17424991,"display_name":"abdul"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":311,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637126534,"creation_date":1637124378,"question_id":69999049,"body_markdown":"In my application after login I have to save state in shared preference to change the app view on a button click. can anyone help me to save state in shared Preferences and on a button click i need to replace the initial state with the new one.","title":"How to save a state in Shared preferences on Android Java?","body":"<p>In my application after login I have to save state in shared preference to change the app view on a button click. can anyone help me to save state in shared Preferences and on a button click i need to replace the initial state with the new one.</p>\n"},{"tags":["java","android","audio","encoding","audiorecord"],"answers":[{"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637125183,"creation_date":1637103012,"answer_id":69996959,"question_id":69996422,"body_markdown":"The idea of the implementation is correct, it has some bugs though.  A ByteArrayOutputStream is an output stream that stores the memory as bytes that can be grabbed later, and takes care of growing arrays as necessary.  You can assume that worst case it will take 2*sound_data_size in terms of storage to do so (it may need to make a copy at some point).\r\n\r\nAll the loop is doing is reading 8K at a time from the audio data and writing it to the baos in a loop until its done.  I do see a few bugs though-  it can write extra data on the last write (read can return less than a full buffer).  It will loop rapidly if the stream closes before isRecording is done (read will return -1 instantly), and will probably send you OOM in that case.  It can lose data near the end (if the loop variable goes false before the data is read).  Try this instead:\r\n\r\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n        byte[] temporaryChunkOfBytes = new byte[MY_CHOSEN_BUFFER_SIZE];\r\n        int read = 0;\r\n        while((read = recorder.read(temporaryChunkOfBytes, 0, MY_CHOSEN_BUFFER_SIZE) &gt;= 0){\r\n            try {\r\n                System.out.println(&quot;Appending to baos : &quot; + temporaryChunkOfBytes);\r\n                //printBytes(temporaryChunkOfBytes);\r\n                baos.write(temporaryChunkOfBytes, 0, read);\r\n            } catch (Exception e) {\r\n                Log.i(&quot;ABC&quot;, &quot;Exception while appending bytes : &quot; + e); // &lt;----- this is not called and that is good.\r\n            }\r\n        }\r\n        recordedAudioAsBytes = baos.toByteArray();\r\n\r\nWith this version, you shouldn&#39;t just have the thread always running.  Launch the thread when the recording is started.  This fixes all 3 bugs above-  if -1 is returned by read, it breaks the loop.  If the amount read is less than a buffer, it writes only the amount read.  And it reads until the file is closed, not until a variable is set to false so data in the buffer but not read will be processed.\r\n\r\nYou will have some memory concerns eventually.  Basically you&#39;ll take 44K of memory per second.  If you&#39;re recording for a few seconds, no problem.  If you&#39;re recording for a few minutes, you&#39;ll need to write it to a file instead and then stream in the file when processing it.","title":"Record Raw Audio Bytes to Local Variable in Android","body":"<p>The idea of the implementation is correct, it has some bugs though.  A ByteArrayOutputStream is an output stream that stores the memory as bytes that can be grabbed later, and takes care of growing arrays as necessary.  You can assume that worst case it will take 2*sound_data_size in terms of storage to do so (it may need to make a copy at some point).</p>\n<p>All the loop is doing is reading 8K at a time from the audio data and writing it to the baos in a loop until its done.  I do see a few bugs though-  it can write extra data on the last write (read can return less than a full buffer).  It will loop rapidly if the stream closes before isRecording is done (read will return -1 instantly), and will probably send you OOM in that case.  It can lose data near the end (if the loop variable goes false before the data is read).  Try this instead:</p>\n<pre><code>    ByteArrayOutputStream baos = new ByteArrayOutputStream();\n    byte[] temporaryChunkOfBytes = new byte[MY_CHOSEN_BUFFER_SIZE];\n    int read = 0;\n    while((read = recorder.read(temporaryChunkOfBytes, 0, MY_CHOSEN_BUFFER_SIZE) &gt;= 0){\n        try {\n            System.out.println(&quot;Appending to baos : &quot; + temporaryChunkOfBytes);\n            //printBytes(temporaryChunkOfBytes);\n            baos.write(temporaryChunkOfBytes, 0, read);\n        } catch (Exception e) {\n            Log.i(&quot;ABC&quot;, &quot;Exception while appending bytes : &quot; + e); // &lt;----- this is not called and that is good.\n        }\n    }\n    recordedAudioAsBytes = baos.toByteArray();\n</code></pre>\n<p>With this version, you shouldn't just have the thread always running.  Launch the thread when the recording is started.  This fixes all 3 bugs above-  if -1 is returned by read, it breaks the loop.  If the amount read is less than a buffer, it writes only the amount read.  And it reads until the file is closed, not until a variable is set to false so data in the buffer but not read will be processed.</p>\n<p>You will have some memory concerns eventually.  Basically you'll take 44K of memory per second.  If you're recording for a few seconds, no problem.  If you're recording for a few minutes, you'll need to write it to a file instead and then stream in the file when processing it.</p>\n"}],"owner":{"account_id":7528450,"reputation":6499,"user_id":5717640,"accept_rate":98,"display_name":"Nerdy Bunz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":748,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69996959,"answer_count":1,"score":0,"last_activity_date":1637126178,"creation_date":1637099296,"question_id":69996422,"body_markdown":"I&#39;m recording audio as raw bytes on Android *into a variable* that can be played by an instance of AudioTrack. \r\n\r\nThat is, NOT as a file.\r\n\r\nI&#39;ve chosen 8-bit mono PCM with a sample rate of 44100 because this audio data should be uncompressed... and in a predictable, platform-agnostic format.\r\n\r\nDon&#39;t worry... we&#39;re only dealing with small audio snippets here... and besides, people these days have so much RAM that it megahurtz.\r\n\r\nI have tried the approach below... and although it *apparently works*, the pertinent section, *writeAudioToLocalVariable()*, was a modified cut n&#39; paste from the internet and I don&#39;t really understand the contents enough.\r\n\r\nConsidering we can&#39;t predict the hardware capabilities of the end user&#39;s device, can someone more knowledgable tell me if this is the most stable and dependable way to do things inside the writeAudioToLocalVariable() function?\r\n\r\n\r\nHere&#39;s what I&#39;ve got:\r\n\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import androidx.core.app.ActivityCompat;\r\n    \r\n    import android.Manifest;\r\n    import android.content.pm.PackageManager;\r\n    import android.media.AudioFormat;\r\n    import android.media.AudioManager;\r\n    import android.media.AudioRecord;\r\n    import android.media.AudioTrack;\r\n    import android.media.MediaRecorder;\r\n    import android.os.Bundle;\r\n    import android.util.Log;\r\n    import android.view.View;\r\n    \r\n    import java.io.ByteArrayOutputStream;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n        private static final int NOT_USED = 999999999;\r\n        private static final int SAMPLERATE = 44100;\r\n        private static final int REC_CHANNELS = AudioFormat.CHANNEL_IN_MONO;\r\n        private static final int PLAYBACK_CHANNELS = AudioFormat.CHANNEL_OUT_MONO;\r\n        private static final int ENCODING = AudioFormat.ENCODING_PCM_8BIT;\r\n        // !!! needs to be large enough for all devices\r\n        private static final int MY_CHOSEN_BUFFER_SIZE = 8192;\r\n        private AudioRecord recorder = null;\r\n        private Thread recordingThread = null;\r\n        boolean isRecording = false;\r\n    \r\n        byte[] recordedAudioAsBytes; // &lt;------ this is where recorded audio ends up\r\n    \r\n        AudioTrack player;\r\n    \r\n        @Override\r\n        public void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            int minBufferSize = AudioRecord.getMinBufferSize(SAMPLERATE,\r\n                    REC_CHANNELS, ENCODING);\r\n            Log.i(&quot;ABC&quot;, &quot;FYI, min buffer size for this device is : &quot; + minBufferSize);\r\n        }\r\n    \r\n        private void startRecording() {\r\n            if (ActivityCompat.checkSelfPermission(this, Manifest.permission.RECORD_AUDIO) != PackageManager.PERMISSION_GRANTED) {\r\n                ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.RECORD_AUDIO}, NOT_USED);\r\n                Log.i(&quot;ABC&quot;, &quot;permission fail, returning.&quot;);\r\n                return;\r\n            }\r\n            recorder = new AudioRecord(MediaRecorder.AudioSource.MIC,\r\n                    SAMPLERATE, REC_CHANNELS,\r\n                    ENCODING, MY_CHOSEN_BUFFER_SIZE);\r\n            recorder.startRecording();\r\n            isRecording = true;\r\n            recordingThread = new Thread(new Runnable() {\r\n                public void run() {\r\n                    Log.i(&quot;ABC&quot;, &quot;the thread is running&quot;);\r\n                    writeAudioToLocalVariable();\r\n                }\r\n            }, &quot;AudioRecorder Thread&quot;);\r\n            recordingThread.start();\r\n        }\r\n    \r\n        private void writeAudioToLocalVariable() {\r\n            ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n            byte[] temporaryChunkOfBytes = new byte[MY_CHOSEN_BUFFER_SIZE];\r\n            while (isRecording) {\r\n                recorder.read(temporaryChunkOfBytes, 0, MY_CHOSEN_BUFFER_SIZE);\r\n                try {\r\n                    System.out.println(&quot;Appending to baos : &quot; + temporaryChunkOfBytes);\r\n                    //printBytes(temporaryChunkOfBytes);\r\n                    baos.write(temporaryChunkOfBytes, 0, MY_CHOSEN_BUFFER_SIZE);\r\n                } catch (Exception e) {\r\n                    Log.i(&quot;ABC&quot;, &quot;Exception while appending bytes : &quot; + e); // &lt;----- this is not called and that is good.\r\n                }\r\n            }\r\n            recordedAudioAsBytes = baos.toByteArray();\r\n        }\r\n    \r\n        private void stopRecording() {\r\n            // stops the recording activity\r\n            if (null != recorder) {\r\n                isRecording = false;\r\n                recorder.stop();\r\n                recorder.release();\r\n                recorder = null;\r\n                recordingThread = null;\r\n            }\r\n        }\r\n    \r\n        public void recordButtonClicked(View v) {\r\n            isRecording = true;\r\n            startRecording();\r\n        }\r\n    \r\n        public void stopButtonClicked(View v) {\r\n            isRecording = false;\r\n            stopRecording();\r\n        }\r\n    \r\n        public void playButtonPressed(View v) {\r\n    \r\n            // this verifies that audio data exists as expected\r\n            for (int i=0; i&lt;recordedAudioAsBytes.length; i++) {\r\n                Log.i(&quot;ABC&quot;, &quot;byte[&quot; + i + &quot;] = &quot; + recordedAudioAsBytes[i]);\r\n            }\r\n    \r\n            // STREAM MODE ACTUALLY WORKS!! (STATIC MODE DOES NOT WORK)\r\n            AudioTrack player = new AudioTrack(AudioManager.STREAM_MUSIC, SAMPLERATE, PLAYBACK_CHANNELS,\r\n                    ENCODING, MY_CHOSEN_BUFFER_SIZE, AudioTrack.MODE_STREAM);\r\n            player.play();\r\n            player.write(recordedAudioAsBytes, 0, recordedAudioAsBytes.length);\r\n    \r\n        }\r\n    \r\n    }\r\n\r\nThankyou... from me and so many others in the future of plentiful RAM!\r\n","title":"Record Raw Audio Bytes to Local Variable in Android","body":"<p>I'm recording audio as raw bytes on Android <em>into a variable</em> that can be played by an instance of AudioTrack.</p>\n<p>That is, NOT as a file.</p>\n<p>I've chosen 8-bit mono PCM with a sample rate of 44100 because this audio data should be uncompressed... and in a predictable, platform-agnostic format.</p>\n<p>Don't worry... we're only dealing with small audio snippets here... and besides, people these days have so much RAM that it megahurtz.</p>\n<p>I have tried the approach below... and although it <em>apparently works</em>, the pertinent section, <em>writeAudioToLocalVariable()</em>, was a modified cut n' paste from the internet and I don't really understand the contents enough.</p>\n<p>Considering we can't predict the hardware capabilities of the end user's device, can someone more knowledgable tell me if this is the most stable and dependable way to do things inside the writeAudioToLocalVariable() function?</p>\n<p>Here's what I've got:</p>\n<pre><code>import androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.app.ActivityCompat;\n\nimport android.Manifest;\nimport android.content.pm.PackageManager;\nimport android.media.AudioFormat;\nimport android.media.AudioManager;\nimport android.media.AudioRecord;\nimport android.media.AudioTrack;\nimport android.media.MediaRecorder;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\n\nimport java.io.ByteArrayOutputStream;\n\npublic class MainActivity extends AppCompatActivity {\n    private static final int NOT_USED = 999999999;\n    private static final int SAMPLERATE = 44100;\n    private static final int REC_CHANNELS = AudioFormat.CHANNEL_IN_MONO;\n    private static final int PLAYBACK_CHANNELS = AudioFormat.CHANNEL_OUT_MONO;\n    private static final int ENCODING = AudioFormat.ENCODING_PCM_8BIT;\n    // !!! needs to be large enough for all devices\n    private static final int MY_CHOSEN_BUFFER_SIZE = 8192;\n    private AudioRecord recorder = null;\n    private Thread recordingThread = null;\n    boolean isRecording = false;\n\n    byte[] recordedAudioAsBytes; // &lt;------ this is where recorded audio ends up\n\n    AudioTrack player;\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        int minBufferSize = AudioRecord.getMinBufferSize(SAMPLERATE,\n                REC_CHANNELS, ENCODING);\n        Log.i(&quot;ABC&quot;, &quot;FYI, min buffer size for this device is : &quot; + minBufferSize);\n    }\n\n    private void startRecording() {\n        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.RECORD_AUDIO) != PackageManager.PERMISSION_GRANTED) {\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.RECORD_AUDIO}, NOT_USED);\n            Log.i(&quot;ABC&quot;, &quot;permission fail, returning.&quot;);\n            return;\n        }\n        recorder = new AudioRecord(MediaRecorder.AudioSource.MIC,\n                SAMPLERATE, REC_CHANNELS,\n                ENCODING, MY_CHOSEN_BUFFER_SIZE);\n        recorder.startRecording();\n        isRecording = true;\n        recordingThread = new Thread(new Runnable() {\n            public void run() {\n                Log.i(&quot;ABC&quot;, &quot;the thread is running&quot;);\n                writeAudioToLocalVariable();\n            }\n        }, &quot;AudioRecorder Thread&quot;);\n        recordingThread.start();\n    }\n\n    private void writeAudioToLocalVariable() {\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        byte[] temporaryChunkOfBytes = new byte[MY_CHOSEN_BUFFER_SIZE];\n        while (isRecording) {\n            recorder.read(temporaryChunkOfBytes, 0, MY_CHOSEN_BUFFER_SIZE);\n            try {\n                System.out.println(&quot;Appending to baos : &quot; + temporaryChunkOfBytes);\n                //printBytes(temporaryChunkOfBytes);\n                baos.write(temporaryChunkOfBytes, 0, MY_CHOSEN_BUFFER_SIZE);\n            } catch (Exception e) {\n                Log.i(&quot;ABC&quot;, &quot;Exception while appending bytes : &quot; + e); // &lt;----- this is not called and that is good.\n            }\n        }\n        recordedAudioAsBytes = baos.toByteArray();\n    }\n\n    private void stopRecording() {\n        // stops the recording activity\n        if (null != recorder) {\n            isRecording = false;\n            recorder.stop();\n            recorder.release();\n            recorder = null;\n            recordingThread = null;\n        }\n    }\n\n    public void recordButtonClicked(View v) {\n        isRecording = true;\n        startRecording();\n    }\n\n    public void stopButtonClicked(View v) {\n        isRecording = false;\n        stopRecording();\n    }\n\n    public void playButtonPressed(View v) {\n\n        // this verifies that audio data exists as expected\n        for (int i=0; i&lt;recordedAudioAsBytes.length; i++) {\n            Log.i(&quot;ABC&quot;, &quot;byte[&quot; + i + &quot;] = &quot; + recordedAudioAsBytes[i]);\n        }\n\n        // STREAM MODE ACTUALLY WORKS!! (STATIC MODE DOES NOT WORK)\n        AudioTrack player = new AudioTrack(AudioManager.STREAM_MUSIC, SAMPLERATE, PLAYBACK_CHANNELS,\n                ENCODING, MY_CHOSEN_BUFFER_SIZE, AudioTrack.MODE_STREAM);\n        player.play();\n        player.write(recordedAudioAsBytes, 0, recordedAudioAsBytes.length);\n\n    }\n\n}\n</code></pre>\n<p>Thankyou... from me and so many others in the future of plentiful RAM!</p>\n"},{"tags":["java","save","storing-data"],"comments":[{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1637118423,"post_id":69998386,"comment_id":123738333,"body_markdown":"First, don&#39;t use the `main` methods of your sub class.  You should aim to have only one `main` method you application, which acts as, well, the main entry point.  You need some way to either &quot;return&quot; information from your methods, or have the ability to pass &quot;state&quot; between (such as a wallet, which can passed into &quot;work&quot;, which gets filled at the end of the day and you then pass it to &quot;bank&quot;).  See [Passing Information to a Method or a Constructor](https://docs.oracle.com/javase/tutorial/java/javaOO/arguments.html) for some more details","body":"First, don&#39;t use the <code>main</code> methods of your sub class.  You should aim to have only one <code>main</code> method you application, which acts as, well, the main entry point.  You need some way to either &quot;return&quot; information from your methods, or have the ability to pass &quot;state&quot; between (such as a wallet, which can passed into &quot;work&quot;, which gets filled at the end of the day and you then pass it to &quot;bank&quot;).  See <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/arguments.html\" rel=\"nofollow noreferrer\">Passing Information to a Method or a Constructor</a> for some more details"}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637125997,"creation_date":1637125997,"answer_id":69999241,"question_id":69998386,"body_markdown":"The short answer is, you need to pass some kind of &quot;state&quot; between your classes and they (optionally, depending on what they do) need to pass back new &quot;state&quot;\r\n\r\nHow you do this comes down to the problem you&#39;re trying to solve, but you should start by looking at [Passing Information to a Method or a Constructor](https://docs.oracle.com/javase/tutorial/java/javaOO/arguments.html) and [Returning a Value from a Method](https://docs.oracle.com/javase/tutorial/java/javaOO/returnvalue.html) for a starting point.\r\n\r\nAs an example, I&#39;m going to do something which you might not like, but which will demonstrate the basic concepts.\r\n\r\nFirst, the &quot;contracts&quot;.  We need some way to &quot;contain&quot; the various things we want to track and define the operations they are willing to perform, for this, we start with some basic `interfaces`\r\n    \r\n    public interface Life {\r\n        public int getExperience();\r\n        public void addExperience(int experience);\r\n    }\r\n\r\n    public interface Job {\r\n        public double getHours();\r\n        public double getHourlyRate();\r\n        public PayCheck getPayCheck();\r\n    }\r\n    \r\n    public interface PayCheck {\r\n        public int getExperienceGained();\r\n        public double getAmount();\r\n        public String getSummary();\r\n    }\r\n    \r\n    public interface Bank {\r\n        public double getBalance();\r\n        public void deposit(PayCheck payCheck);\r\n        public void deposit(double amount);\r\n        public double withdraw(double amount);\r\n        public String getSummary();\r\n    }\r\n\r\n*nb: You have no idea how much I want to have a mutable and non-mutable `Life` as not every one should be able to add experience*\r\n\r\nNext, we need some actual implementations (normally I&#39;d create `abstract` versions which define most of the common work, but this is a basic example, so I skipped those)\r\n\r\n    public class DefaultLife implements Life {\r\n        private int experience;\r\n\r\n        @Override\r\n        public int getExperience() {\r\n            return experience;\r\n        }\r\n\r\n        @Override\r\n        public void addExperience(int experience) {\r\n            this.experience += experience;\r\n        }\r\n        \r\n    }\r\n\r\n    public class DefaultJob implements Job {\r\n\r\n        private double hoursWorked;\r\n        private double hourlyRate;\r\n\r\n        public DefaultJob(Life life, double hoursWorked) {\r\n            this.hoursWorked = hoursWorked;\r\n            int experience = life.getExperience();\r\n\r\n            if (experience &lt;= 1) {\r\n                hourlyRate = 15;\r\n            } else if (experience == 2) {\r\n                hourlyRate = 20;\r\n            } else if (experience == 3) {\r\n                hourlyRate = 30;\r\n            } else if (experience == 4) {\r\n                hourlyRate = 45;\r\n            } else if (experience == 5) {\r\n                hourlyRate = 70;\r\n            } else {\r\n                hourlyRate = 100;\r\n            }\r\n        }\r\n\r\n        @Override\r\n        public double getHours() {\r\n            return hoursWorked;\r\n        }\r\n\r\n        @Override\r\n        public double getHourlyRate() {\r\n            return hourlyRate;\r\n        }\r\n\r\n        @Override\r\n        public PayCheck getPayCheck() {\r\n            double amount = getHours() * getHourlyRate();\r\n            return new DefaultPayCheck(1, this);\r\n        }\r\n    }\r\n\r\n    public class DefaultPayCheck implements PayCheck {\r\n\r\n        private int experienceGained;\r\n        private double amount;\r\n        private Job job;\r\n\r\n        public DefaultPayCheck(int experience, Job job) {\r\n            this.experienceGained = experience;\r\n            this.amount = job.getHourlyRate() * job.getHours();\r\n            this.job = job;\r\n        }\r\n\r\n        @Override\r\n        public int getExperienceGained() {\r\n            return experienceGained;\r\n        }\r\n\r\n        @Override\r\n        public double getAmount() {\r\n            return amount;\r\n        }\r\n\r\n        public Job getJob() {\r\n            return job;\r\n        }\r\n\r\n        @Override\r\n        public String getSummary() {\r\n            Job job = getJob();\r\n            return &quot;You worked &quot; + job.getHours() + &quot; hours @ $&quot; + job.getHourlyRate() + &quot; and earned $&quot; + getAmount() + &quot; and have earned and additional &quot; + getExperienceGained() + &quot; experience&quot;;\r\n        }\r\n    }\r\n    \r\n    public class DefaultBank implements Bank {\r\n        \r\n        private double balance;\r\n\r\n        @Override\r\n        public double getBalance() {\r\n            return balance;\r\n        }\r\n\r\n        @Override\r\n        public void deposit(PayCheck payCheck) {\r\n            deposit(payCheck.getAmount());\r\n        }\r\n\r\n        @Override\r\n        public void deposit(double amount) {\r\n            balance += amount;\r\n        }\r\n\r\n        @Override\r\n        public double withdraw(double amount) {\r\n            // All your momey belong to us\r\n            return 0;\r\n        }\r\n\r\n        @Override\r\n        public String getSummary() {\r\n            return &quot;You have $&quot; + balance + &quot; in the bank&quot;;\r\n        }\r\n        \r\n    }\r\n\r\nBut why &#128561;?!  Well, take a look at `DefaultJob`.  It takes a reference to an instance of `Life`.  It doesn&#39;t care how `Life` is implemented, only that what ever you pass it conforms the contact described by the `interface`...this is something that&#39;s very powerful.\r\n\r\nNow, if that&#39;s just making you too confused &#129396;&#128565;‍&#128171;.  You could remove all the `interface`s and simply make use of the &quot;default&quot; classes, but you&#39;re losing a lot of potential opportunities (I&#39;m mean, how many jobs can you think off?  How many banks?)\r\n\r\nAnd finally, we need something to pull it altogether...\r\n\r\n    Scanner scanner = new Scanner(System.in);\r\n\r\n    Life life = new DefaultLife();\r\n    Bank bank = new DefaultBank();\r\n\r\n    boolean done = false;\r\n    do {\r\n        if (life.getExperience() == 0) {\r\n            System.out.println(&quot;Welcome! Would you like to apply for a job? Y/N:&quot;);\r\n            String response = scanner.nextLine();\r\n\r\n            if (&quot;Y&quot;.equalsIgnoreCase(response)) {\r\n                life.addExperience(1);\r\n            } else {\r\n                System.out.println(&quot;Alright, see you next time!&quot;);\r\n                done = true;\r\n            }\r\n        }\r\n\r\n        if (!done) {\r\n            System.out.println(&quot;Welcome to work!&quot;);\r\n            boolean isValid = false;\r\n            while (!isValid) {\r\n                System.out.println(&quot;How many hours would you like to work? 1-8:&quot;);\r\n                String input = scanner.nextLine();\r\n                try {\r\n                    int hours = Integer.parseInt(input);\r\n                    if (hours &lt; 1) {\r\n                        System.out.println(&quot;Okay, see you next time!&quot;);\r\n                        isValid = true;\r\n                    } else if (hours &gt; 0 &amp;&amp; hours &lt; 9) {\r\n                        isValid = true;\r\n                        Job job = new DefaultJob(life, hours);\r\n                        PayCheck payCheck = job.getPayCheck();\r\n                        System.out.println(payCheck.getSummary());\r\n\r\n                        life.addExperience(payCheck.getExperienceGained());\r\n                        double amount = payCheck.getAmount();\r\n                        bank.deposit(payCheck);\r\n                        System.out.println(bank.getSummary());\r\n                    } else {\r\n                        System.out.println(hours + &quot; is not a valid number of hours!&quot;);\r\n                    }\r\n                } catch (NumberFormatException exp) {\r\n                    System.out.println(input + &quot; is not a valid value!&quot;);\r\n                }\r\n            }\r\n        }\r\n        System.out.println(&quot;Would you like to continue? [Y]&quot;);\r\n        done = !&quot;Y&quot;.equalsIgnoreCase(scanner.nextLine());\r\n    } while (!done);\r\n\r\nNow, this is not the only way you could to do this (you could have the `Job` update the `experience` of `Life` itself, but that&#39;s an architectural decision)\r\n\r\n# Runnable example\r\n\r\nAnd because it&#39;s always fun to try and paste seperate pieces of code together &#128541;\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class GameOfLife {\r\n\r\n        public static void main(String[] args) {\r\n            new GameOfLife();\r\n        }\r\n\r\n        public GameOfLife() {\r\n            Scanner scanner = new Scanner(System.in);\r\n\r\n            Life life = new DefaultLife();\r\n            Bank bank = new DefaultBank();\r\n\r\n            boolean done = false;\r\n            do {\r\n                if (life.getExperience() == 0) {\r\n                    System.out.println(&quot;Welcome! Would you like to apply for a job? Y/N:&quot;);\r\n                    String response = scanner.nextLine();\r\n\r\n                    if (&quot;Y&quot;.equalsIgnoreCase(response)) {\r\n                        life.addExperience(1);\r\n                    } else {\r\n                        System.out.println(&quot;Alright, see you next time!&quot;);\r\n                        done = true;\r\n                    }\r\n                }\r\n\r\n                if (!done) {\r\n                    System.out.println(&quot;Welcome to work!&quot;);\r\n                    boolean isValid = false;\r\n                    while (!isValid) {\r\n                        System.out.println(&quot;How many hours would you like to work? 1-8:&quot;);\r\n                        String input = scanner.nextLine();\r\n                        try {\r\n                            int hours = Integer.parseInt(input);\r\n                            if (hours &lt; 1) {\r\n                                System.out.println(&quot;Okay, see you next time!&quot;);\r\n                                isValid = true;\r\n                            } else if (hours &gt; 0 &amp;&amp; hours &lt; 9) {\r\n                                isValid = true;\r\n                                Job job = new DefaultJob(life, hours);\r\n                                PayCheck payCheck = job.getPayCheck();\r\n                                System.out.println(payCheck.getSummary());\r\n\r\n                                life.addExperience(payCheck.getExperienceGained());\r\n                                double amount = payCheck.getAmount();\r\n                                bank.deposit(payCheck);\r\n                                System.out.println(bank.getSummary());\r\n                            } else {\r\n                                System.out.println(hours + &quot; is not a valid number of hours!&quot;);\r\n                            }\r\n                        } catch (NumberFormatException exp) {\r\n                            System.out.println(input + &quot; is not a valid value!&quot;);\r\n                        }\r\n                    }\r\n                }\r\n                System.out.println(&quot;Would you like to continue? [Y]&quot;);\r\n                done = !&quot;Y&quot;.equalsIgnoreCase(scanner.nextLine());\r\n            } while (!done);\r\n        }\r\n\r\n        public interface Life {\r\n\r\n            public int getExperience();\r\n\r\n            public void addExperience(int experience);\r\n        }\r\n\r\n        public interface Job {\r\n\r\n            public double getHours();\r\n\r\n            public double getHourlyRate();\r\n\r\n            public PayCheck getPayCheck();\r\n        }\r\n\r\n        public interface PayCheck {\r\n\r\n            public int getExperienceGained();\r\n\r\n            public double getAmount();\r\n\r\n            public String getSummary();\r\n        }\r\n\r\n        public interface Bank {\r\n\r\n            public double getBalance();\r\n\r\n            public void deposit(PayCheck payCheck);\r\n\r\n            public void deposit(double amount);\r\n\r\n            public double withdraw(double amount);\r\n\r\n            public String getSummary();\r\n        }\r\n\r\n        public class DefaultLife implements Life {\r\n\r\n            private int experience;\r\n\r\n            @Override\r\n            public int getExperience() {\r\n                return experience;\r\n            }\r\n\r\n            @Override\r\n            public void addExperience(int experience) {\r\n                this.experience += experience;\r\n            }\r\n\r\n        }\r\n\r\n        public class DefaultJob implements Job {\r\n\r\n            private double hoursWorked;\r\n            private double hourlyRate;\r\n\r\n            public DefaultJob(Life life, double hoursWorked) {\r\n                this.hoursWorked = hoursWorked;\r\n                int experience = life.getExperience();\r\n\r\n                if (experience &lt;= 1) {\r\n                    hourlyRate = 15;\r\n                } else if (experience == 2) {\r\n                    hourlyRate = 20;\r\n                } else if (experience == 3) {\r\n                    hourlyRate = 30;\r\n                } else if (experience == 4) {\r\n                    hourlyRate = 45;\r\n                } else if (experience == 5) {\r\n                    hourlyRate = 70;\r\n                } else {\r\n                    hourlyRate = 100;\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public double getHours() {\r\n                return hoursWorked;\r\n            }\r\n\r\n            @Override\r\n            public double getHourlyRate() {\r\n                return hourlyRate;\r\n            }\r\n\r\n            @Override\r\n            public PayCheck getPayCheck() {\r\n                double amount = getHours() * getHourlyRate();\r\n                return new DefaultPayCheck(1, this);\r\n            }\r\n        }\r\n\r\n        public class DefaultPayCheck implements PayCheck {\r\n\r\n            private int experienceGained;\r\n            private double amount;\r\n            private Job job;\r\n\r\n            public DefaultPayCheck(int experience, Job job) {\r\n                this.experienceGained = experience;\r\n                this.amount = job.getHourlyRate() * job.getHours();\r\n                this.job = job;\r\n            }\r\n\r\n            @Override\r\n            public int getExperienceGained() {\r\n                return experienceGained;\r\n            }\r\n\r\n            @Override\r\n            public double getAmount() {\r\n                return amount;\r\n            }\r\n\r\n            public Job getJob() {\r\n                return job;\r\n            }\r\n\r\n            @Override\r\n            public String getSummary() {\r\n                Job job = getJob();\r\n                return &quot;You worked &quot; + job.getHours() + &quot; hours @ $&quot; + job.getHourlyRate() + &quot; and earned $&quot; + getAmount() + &quot; and have earned and additional &quot; + getExperienceGained() + &quot; experience&quot;;\r\n            }\r\n        }\r\n\r\n        public class DefaultBank implements Bank {\r\n\r\n            private double balance;\r\n\r\n            @Override\r\n            public double getBalance() {\r\n                return balance;\r\n            }\r\n\r\n            @Override\r\n            public void deposit(PayCheck payCheck) {\r\n                deposit(payCheck.getAmount());\r\n            }\r\n\r\n            @Override\r\n            public void deposit(double amount) {\r\n                balance += amount;\r\n            }\r\n\r\n            @Override\r\n            public double withdraw(double amount) {\r\n                // All your momey belong to us\r\n                return 0;\r\n            }\r\n\r\n            @Override\r\n            public String getSummary() {\r\n                return &quot;You have $&quot; + balance + &quot; in the bank&quot;;\r\n            }\r\n\r\n        }\r\n    }\r\n","title":"How do I save a value through multiple classes in Java?","body":"<p>The short answer is, you need to pass some kind of &quot;state&quot; between your classes and they (optionally, depending on what they do) need to pass back new &quot;state&quot;</p>\n<p>How you do this comes down to the problem you're trying to solve, but you should start by looking at <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/arguments.html\" rel=\"nofollow noreferrer\">Passing Information to a Method or a Constructor</a> and <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/returnvalue.html\" rel=\"nofollow noreferrer\">Returning a Value from a Method</a> for a starting point.</p>\n<p>As an example, I'm going to do something which you might not like, but which will demonstrate the basic concepts.</p>\n<p>First, the &quot;contracts&quot;.  We need some way to &quot;contain&quot; the various things we want to track and define the operations they are willing to perform, for this, we start with some basic <code>interfaces</code></p>\n<pre><code>public interface Life {\n    public int getExperience();\n    public void addExperience(int experience);\n}\n\npublic interface Job {\n    public double getHours();\n    public double getHourlyRate();\n    public PayCheck getPayCheck();\n}\n\npublic interface PayCheck {\n    public int getExperienceGained();\n    public double getAmount();\n    public String getSummary();\n}\n\npublic interface Bank {\n    public double getBalance();\n    public void deposit(PayCheck payCheck);\n    public void deposit(double amount);\n    public double withdraw(double amount);\n    public String getSummary();\n}\n</code></pre>\n<p><em>nb: You have no idea how much I want to have a mutable and non-mutable <code>Life</code> as not every one should be able to add experience</em></p>\n<p>Next, we need some actual implementations (normally I'd create <code>abstract</code> versions which define most of the common work, but this is a basic example, so I skipped those)</p>\n<pre><code>public class DefaultLife implements Life {\n    private int experience;\n\n    @Override\n    public int getExperience() {\n        return experience;\n    }\n\n    @Override\n    public void addExperience(int experience) {\n        this.experience += experience;\n    }\n    \n}\n\npublic class DefaultJob implements Job {\n\n    private double hoursWorked;\n    private double hourlyRate;\n\n    public DefaultJob(Life life, double hoursWorked) {\n        this.hoursWorked = hoursWorked;\n        int experience = life.getExperience();\n\n        if (experience &lt;= 1) {\n            hourlyRate = 15;\n        } else if (experience == 2) {\n            hourlyRate = 20;\n        } else if (experience == 3) {\n            hourlyRate = 30;\n        } else if (experience == 4) {\n            hourlyRate = 45;\n        } else if (experience == 5) {\n            hourlyRate = 70;\n        } else {\n            hourlyRate = 100;\n        }\n    }\n\n    @Override\n    public double getHours() {\n        return hoursWorked;\n    }\n\n    @Override\n    public double getHourlyRate() {\n        return hourlyRate;\n    }\n\n    @Override\n    public PayCheck getPayCheck() {\n        double amount = getHours() * getHourlyRate();\n        return new DefaultPayCheck(1, this);\n    }\n}\n\npublic class DefaultPayCheck implements PayCheck {\n\n    private int experienceGained;\n    private double amount;\n    private Job job;\n\n    public DefaultPayCheck(int experience, Job job) {\n        this.experienceGained = experience;\n        this.amount = job.getHourlyRate() * job.getHours();\n        this.job = job;\n    }\n\n    @Override\n    public int getExperienceGained() {\n        return experienceGained;\n    }\n\n    @Override\n    public double getAmount() {\n        return amount;\n    }\n\n    public Job getJob() {\n        return job;\n    }\n\n    @Override\n    public String getSummary() {\n        Job job = getJob();\n        return &quot;You worked &quot; + job.getHours() + &quot; hours @ $&quot; + job.getHourlyRate() + &quot; and earned $&quot; + getAmount() + &quot; and have earned and additional &quot; + getExperienceGained() + &quot; experience&quot;;\n    }\n}\n\npublic class DefaultBank implements Bank {\n    \n    private double balance;\n\n    @Override\n    public double getBalance() {\n        return balance;\n    }\n\n    @Override\n    public void deposit(PayCheck payCheck) {\n        deposit(payCheck.getAmount());\n    }\n\n    @Override\n    public void deposit(double amount) {\n        balance += amount;\n    }\n\n    @Override\n    public double withdraw(double amount) {\n        // All your momey belong to us\n        return 0;\n    }\n\n    @Override\n    public String getSummary() {\n        return &quot;You have $&quot; + balance + &quot; in the bank&quot;;\n    }\n    \n}\n</code></pre>\n<p>But why 😱?!  Well, take a look at <code>DefaultJob</code>.  It takes a reference to an instance of <code>Life</code>.  It doesn't care how <code>Life</code> is implemented, only that what ever you pass it conforms the contact described by the <code>interface</code>...this is something that's very powerful.</p>\n<p>Now, if that's just making you too confused 🥴😵‍💫.  You could remove all the <code>interface</code>s and simply make use of the &quot;default&quot; classes, but you're losing a lot of potential opportunities (I'm mean, how many jobs can you think off?  How many banks?)</p>\n<p>And finally, we need something to pull it altogether...</p>\n<pre><code>Scanner scanner = new Scanner(System.in);\n\nLife life = new DefaultLife();\nBank bank = new DefaultBank();\n\nboolean done = false;\ndo {\n    if (life.getExperience() == 0) {\n        System.out.println(&quot;Welcome! Would you like to apply for a job? Y/N:&quot;);\n        String response = scanner.nextLine();\n\n        if (&quot;Y&quot;.equalsIgnoreCase(response)) {\n            life.addExperience(1);\n        } else {\n            System.out.println(&quot;Alright, see you next time!&quot;);\n            done = true;\n        }\n    }\n\n    if (!done) {\n        System.out.println(&quot;Welcome to work!&quot;);\n        boolean isValid = false;\n        while (!isValid) {\n            System.out.println(&quot;How many hours would you like to work? 1-8:&quot;);\n            String input = scanner.nextLine();\n            try {\n                int hours = Integer.parseInt(input);\n                if (hours &lt; 1) {\n                    System.out.println(&quot;Okay, see you next time!&quot;);\n                    isValid = true;\n                } else if (hours &gt; 0 &amp;&amp; hours &lt; 9) {\n                    isValid = true;\n                    Job job = new DefaultJob(life, hours);\n                    PayCheck payCheck = job.getPayCheck();\n                    System.out.println(payCheck.getSummary());\n\n                    life.addExperience(payCheck.getExperienceGained());\n                    double amount = payCheck.getAmount();\n                    bank.deposit(payCheck);\n                    System.out.println(bank.getSummary());\n                } else {\n                    System.out.println(hours + &quot; is not a valid number of hours!&quot;);\n                }\n            } catch (NumberFormatException exp) {\n                System.out.println(input + &quot; is not a valid value!&quot;);\n            }\n        }\n    }\n    System.out.println(&quot;Would you like to continue? [Y]&quot;);\n    done = !&quot;Y&quot;.equalsIgnoreCase(scanner.nextLine());\n} while (!done);\n</code></pre>\n<p>Now, this is not the only way you could to do this (you could have the <code>Job</code> update the <code>experience</code> of <code>Life</code> itself, but that's an architectural decision)</p>\n<h1>Runnable example</h1>\n<p>And because it's always fun to try and paste seperate pieces of code together 😝</p>\n<pre><code>import java.util.Scanner;\n\npublic class GameOfLife {\n\n    public static void main(String[] args) {\n        new GameOfLife();\n    }\n\n    public GameOfLife() {\n        Scanner scanner = new Scanner(System.in);\n\n        Life life = new DefaultLife();\n        Bank bank = new DefaultBank();\n\n        boolean done = false;\n        do {\n            if (life.getExperience() == 0) {\n                System.out.println(&quot;Welcome! Would you like to apply for a job? Y/N:&quot;);\n                String response = scanner.nextLine();\n\n                if (&quot;Y&quot;.equalsIgnoreCase(response)) {\n                    life.addExperience(1);\n                } else {\n                    System.out.println(&quot;Alright, see you next time!&quot;);\n                    done = true;\n                }\n            }\n\n            if (!done) {\n                System.out.println(&quot;Welcome to work!&quot;);\n                boolean isValid = false;\n                while (!isValid) {\n                    System.out.println(&quot;How many hours would you like to work? 1-8:&quot;);\n                    String input = scanner.nextLine();\n                    try {\n                        int hours = Integer.parseInt(input);\n                        if (hours &lt; 1) {\n                            System.out.println(&quot;Okay, see you next time!&quot;);\n                            isValid = true;\n                        } else if (hours &gt; 0 &amp;&amp; hours &lt; 9) {\n                            isValid = true;\n                            Job job = new DefaultJob(life, hours);\n                            PayCheck payCheck = job.getPayCheck();\n                            System.out.println(payCheck.getSummary());\n\n                            life.addExperience(payCheck.getExperienceGained());\n                            double amount = payCheck.getAmount();\n                            bank.deposit(payCheck);\n                            System.out.println(bank.getSummary());\n                        } else {\n                            System.out.println(hours + &quot; is not a valid number of hours!&quot;);\n                        }\n                    } catch (NumberFormatException exp) {\n                        System.out.println(input + &quot; is not a valid value!&quot;);\n                    }\n                }\n            }\n            System.out.println(&quot;Would you like to continue? [Y]&quot;);\n            done = !&quot;Y&quot;.equalsIgnoreCase(scanner.nextLine());\n        } while (!done);\n    }\n\n    public interface Life {\n\n        public int getExperience();\n\n        public void addExperience(int experience);\n    }\n\n    public interface Job {\n\n        public double getHours();\n\n        public double getHourlyRate();\n\n        public PayCheck getPayCheck();\n    }\n\n    public interface PayCheck {\n\n        public int getExperienceGained();\n\n        public double getAmount();\n\n        public String getSummary();\n    }\n\n    public interface Bank {\n\n        public double getBalance();\n\n        public void deposit(PayCheck payCheck);\n\n        public void deposit(double amount);\n\n        public double withdraw(double amount);\n\n        public String getSummary();\n    }\n\n    public class DefaultLife implements Life {\n\n        private int experience;\n\n        @Override\n        public int getExperience() {\n            return experience;\n        }\n\n        @Override\n        public void addExperience(int experience) {\n            this.experience += experience;\n        }\n\n    }\n\n    public class DefaultJob implements Job {\n\n        private double hoursWorked;\n        private double hourlyRate;\n\n        public DefaultJob(Life life, double hoursWorked) {\n            this.hoursWorked = hoursWorked;\n            int experience = life.getExperience();\n\n            if (experience &lt;= 1) {\n                hourlyRate = 15;\n            } else if (experience == 2) {\n                hourlyRate = 20;\n            } else if (experience == 3) {\n                hourlyRate = 30;\n            } else if (experience == 4) {\n                hourlyRate = 45;\n            } else if (experience == 5) {\n                hourlyRate = 70;\n            } else {\n                hourlyRate = 100;\n            }\n        }\n\n        @Override\n        public double getHours() {\n            return hoursWorked;\n        }\n\n        @Override\n        public double getHourlyRate() {\n            return hourlyRate;\n        }\n\n        @Override\n        public PayCheck getPayCheck() {\n            double amount = getHours() * getHourlyRate();\n            return new DefaultPayCheck(1, this);\n        }\n    }\n\n    public class DefaultPayCheck implements PayCheck {\n\n        private int experienceGained;\n        private double amount;\n        private Job job;\n\n        public DefaultPayCheck(int experience, Job job) {\n            this.experienceGained = experience;\n            this.amount = job.getHourlyRate() * job.getHours();\n            this.job = job;\n        }\n\n        @Override\n        public int getExperienceGained() {\n            return experienceGained;\n        }\n\n        @Override\n        public double getAmount() {\n            return amount;\n        }\n\n        public Job getJob() {\n            return job;\n        }\n\n        @Override\n        public String getSummary() {\n            Job job = getJob();\n            return &quot;You worked &quot; + job.getHours() + &quot; hours @ $&quot; + job.getHourlyRate() + &quot; and earned $&quot; + getAmount() + &quot; and have earned and additional &quot; + getExperienceGained() + &quot; experience&quot;;\n        }\n    }\n\n    public class DefaultBank implements Bank {\n\n        private double balance;\n\n        @Override\n        public double getBalance() {\n            return balance;\n        }\n\n        @Override\n        public void deposit(PayCheck payCheck) {\n            deposit(payCheck.getAmount());\n        }\n\n        @Override\n        public void deposit(double amount) {\n            balance += amount;\n        }\n\n        @Override\n        public double withdraw(double amount) {\n            // All your momey belong to us\n            return 0;\n        }\n\n        @Override\n        public String getSummary() {\n            return &quot;You have $&quot; + balance + &quot; in the bank&quot;;\n        }\n\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":23361760,"reputation":3,"user_id":17433872,"display_name":"sakshamp"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":707,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69999241,"answer_count":1,"score":0,"last_activity_date":1637125997,"creation_date":1637117562,"question_id":69998386,"body_markdown":"I am new to java and coding in general. I was trying to create a game as a small side project to mess around while waiting on my next assignments in my comp sci classes. I ran into a problem where when I call my classes at the start, the values are forgotten when the next one is called. For example, when I say I want to &quot;Go to Office Building&quot; to work and make some money for myself, the cash is gone when I &quot;Go to the Bank&quot; right after. How can I make it so the game remembers how much cash I had from when I worked? I&#39;ve tried to wrap my head around serialization but it is very confusing. I was wondering if there was a better way to do it or if someone could explain to me how to do it. Many thanks to anyone who replies!\r\n\r\n    import java.util.Scanner;\r\n    public class Game {\r\n       public static void main(String[] args) {\r\n\r\n        Work work = new Work();\r\n        Bank bank = new Bank();\r\n        Scanner input = new Scanner(System.in);\r\n        int process = 0;\r\n        while (process == 0) {\r\n            System.out.println(&quot;What would you like to do?&quot;);\r\n            System.out.println(&quot;1) Go to the Bank&quot;);\r\n            System.out.println(&quot;2) Go to Office Building&quot;);\r\n            System.out.println(&quot;3) Exit Game&quot;);\r\n            int response = input.nextInt();\r\n            if (response == 1) {\r\n                Bank.main(args);\r\n            }\r\n            if (response == 2) {\r\n                Work.main(args);\r\n            }\r\n            if (response == 3) {\r\n                process++;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nThe code above is where I call my other classes.\r\nHere are my other two main classes and their respective classes.\r\n\r\n    import java.util.Scanner;\r\n    public class Work extends Working {\r\n    public static void main(String [] args) {\r\n        Working work = new Working();\r\n        Bank bank = new Bank();\r\n        Scanner input = new Scanner(System.in);\r\n        int process = 0;\r\n        int jobExperience = 0;\r\n\r\n        while (jobExperience == 0 &amp;&amp; process == 0) {\r\n            System.out.println(&quot;Welcome! Would you like to apply for a job? Y/N:&quot;);\r\n            String response = input.next();\r\n\r\n            if (response.equalsIgnoreCase(&quot;Y&quot;)) {\r\n                jobExperience++;\r\n            }\r\n            else {\r\n                System.out.println(&quot;Alright, see you next time!&quot;);\r\n                process++;\r\n            }\r\n        }\r\n\r\n        while (process == 0) {\r\n            System.out.println(&quot;Welcome! Would you like to work? Y/N:&quot;);\r\n            String response = input.next();\r\n\r\n            if (response.equalsIgnoreCase(&quot;Y&quot;)) {\r\n                System.out.println(&quot;How many hours would you like to work? 1-8:&quot;);\r\n                int hours = input.nextInt();\r\n\r\n                if (hours &gt;= 1 &amp;&amp; hours &lt;= 8) {\r\n                    work.setHours(hours);\r\n                    work.setJob(jobExperience);\r\n                    work.wageCalc();\r\n                    work.setPaycheck();\r\n                    bank.setCash(bank.getCash()+work.getPaycheck());\r\n                    work.printStatement();\r\n                    jobExperience++;\r\n                    process++;\r\n                }\r\n            }\r\n            else {\r\n                System.out.println(&quot;Alright, see you next time!&quot;);\r\n                process++;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n2nd Part to class Work:\r\n\r\n    public class Working {\r\n    double wage;\r\n    double hours;\r\n    double paycheck;\r\n    int job;\r\n\r\n    public double getHours() {\r\n        return hours;\r\n    }\r\n\r\n    public void setHours(double hours) {\r\n        this.hours = hours;\r\n    }\r\n\r\n    public double getWage() {\r\n        return wage;\r\n    }\r\n\r\n    public void setWage(double wage) {\r\n        this.wage = wage;\r\n    }\r\n\r\n    public int getJob() {\r\n        return job;\r\n    }\r\n\r\n    public void setJob(int job) {\r\n        this.job = job;\r\n    }\r\n\r\n    public void wageCalc() {\r\n        if (getJob() == 1) {\r\n            setWage(15);\r\n        }\r\n        if (getJob() == 2) {\r\n            setWage(20);\r\n        }\r\n        if (getJob() == 3) {\r\n            setWage(30);\r\n        }\r\n        if (getJob() == 4) {\r\n            setWage(45);\r\n        }\r\n        if (getJob() == 5) {\r\n            setWage(70);\r\n        }\r\n        if (getJob() &gt;= 6) {\r\n            setWage(100);\r\n        }\r\n    }\r\n\r\n    public void setPaycheck() {\r\n        paycheck = hours * wage;\r\n    }\r\n\r\n    public double getPaycheck() {\r\n        return paycheck;\r\n    }\r\n\r\n    public void printStatement() {\r\n        System.out.println(&quot;You worked &quot; + getHours() + &quot; hours at a pay rate of $&quot; + getWage() + &quot;/hr and earned $&quot; + getPaycheck() + &quot;.&quot;);\r\n    }\r\n\r\n\r\n}\r\n\r\nI want the Bank and Work classes to remember each other&#39;s values.\r\n\r\n    import java.util.Scanner;\r\n    public class Bank extends Banking {\r\n    public static void main(String[] args) {\r\n        Banking bank = new Banking();\r\n        Scanner input = new Scanner(System.in);\r\n        int process = 0;\r\n\r\n        System.out.println(&quot;Thank you for banking with us. How can we help you?&quot;);\r\n        while (process == 0) {\r\n            System.out.println();\r\n\r\n            System.out.println(&quot;Press &#39;B&#39; to check your balance.  Press &#39;D&#39; to deposit money. Press &#39;W&#39; to withdraw money. Press &#39;E&#39; to exit.&quot;);\r\n            String response = input.next();\r\n\r\n            if (response.equalsIgnoreCase(&quot;B&quot;)) {\r\n                System.out.println(&quot;Your bank balance is currently $&quot; + bank.getBalance());\r\n                System.out.println(&quot;You currently have $&quot; + bank.getCash() + &quot; in cash.&quot;);\r\n            }\r\n\r\n            if (response.equalsIgnoreCase(&quot;D&quot;)) {\r\n                System.out.println(&quot;How much would you like to deposit?&quot;);\r\n                double amount = input.nextDouble();\r\n                if (bank.getCash() &gt;= amount) {\r\n                    bank.setDeposit(amount);\r\n                    bank.Deposit();\r\n                    bank.setCash(bank.getCash() - amount);\r\n                    System.out.println(&quot;You have deposited $&quot; + bank.getDeposit() + &quot;.&quot;);\r\n                    System.out.println(&quot;Your new balance is $&quot; + bank.getBalance());\r\n                }\r\n                else {\r\n                    System.out.println(&quot;Sorry, you do not have enough cash to deposit.&quot;);\r\n                }\r\n            }\r\n\r\n            if (response.equalsIgnoreCase(&quot;W&quot;) &amp;&amp; bank.getBalance() &gt; 0) {\r\n                System.out.println(&quot;How much would you like to withdraw?&quot;);\r\n                double amount = input.nextDouble();\r\n\r\n                if (amount &lt; bank.getBalance()) {\r\n                    bank.setWithdraw(amount);\r\n                    bank.Withdraw();\r\n                    System.out.println(&quot;You have withdrawn $&quot; + bank.getWithdraw() + &quot;.&quot;);\r\n                    System.out.println(&quot;Your new balance is $&quot; + bank.getBalance());\r\n                }\r\n\r\n                else {\r\n                    System.out.println(&quot;You do not have sufficient funds to withdraw&quot;);\r\n                    System.out.println(&quot;Your current balance is $&quot; + bank.getBalance());\r\n                }\r\n            }\r\n\r\n            else if (response.equalsIgnoreCase(&quot;W&quot;) &amp;&amp; bank.getBalance() &lt;= 0) {\r\n                System.out.println(&quot;You do not have sufficient funds to withdraw&quot;);\r\n            }\r\n\r\n            if (response.equalsIgnoreCase(&quot;E&quot;)) {\r\n                process = 2;\r\n                System.out.println(&quot;Goodbye!&quot;);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nHere is the second part to my Bank:\r\n\r\n    public class Banking {\r\n    private double balance;\r\n    private double withdraw;\r\n    private double deposit;\r\n    private double cash;\r\n\r\n    public void setCash(double cash) {\r\n        this.cash = cash;\r\n    }\r\n\r\n    public double getCash() {\r\n        return cash;\r\n    }\r\n\r\n    public void setBalance(double balance) {\r\n        this.balance = balance;\r\n    }\r\n\r\n    public double getBalance() {\r\n        return balance;\r\n    }\r\n\r\n    public void setWithdraw(double withdraw) {\r\n        this.withdraw = withdraw;\r\n    }\r\n\r\n    public double getWithdraw() {\r\n        return withdraw;\r\n    }\r\n\r\n    public void setDeposit(double deposit) {\r\n        this.deposit = deposit;\r\n    }\r\n\r\n    public double getDeposit() {\r\n        return deposit;\r\n    }\r\n\r\n    public void Withdraw() {\r\n        balance = balance - withdraw;\r\n    }\r\n    public void Deposit() {\r\n        balance = balance + deposit;\r\n    }\r\n\r\n}","title":"How do I save a value through multiple classes in Java?","body":"<p>I am new to java and coding in general. I was trying to create a game as a small side project to mess around while waiting on my next assignments in my comp sci classes. I ran into a problem where when I call my classes at the start, the values are forgotten when the next one is called. For example, when I say I want to &quot;Go to Office Building&quot; to work and make some money for myself, the cash is gone when I &quot;Go to the Bank&quot; right after. How can I make it so the game remembers how much cash I had from when I worked? I've tried to wrap my head around serialization but it is very confusing. I was wondering if there was a better way to do it or if someone could explain to me how to do it. Many thanks to anyone who replies!</p>\n<pre><code>import java.util.Scanner;\npublic class Game {\n   public static void main(String[] args) {\n\n    Work work = new Work();\n    Bank bank = new Bank();\n    Scanner input = new Scanner(System.in);\n    int process = 0;\n    while (process == 0) {\n        System.out.println(&quot;What would you like to do?&quot;);\n        System.out.println(&quot;1) Go to the Bank&quot;);\n        System.out.println(&quot;2) Go to Office Building&quot;);\n        System.out.println(&quot;3) Exit Game&quot;);\n        int response = input.nextInt();\n        if (response == 1) {\n            Bank.main(args);\n        }\n        if (response == 2) {\n            Work.main(args);\n        }\n        if (response == 3) {\n            process++;\n        }\n    }\n}\n</code></pre>\n<p>}</p>\n<p>The code above is where I call my other classes.\nHere are my other two main classes and their respective classes.</p>\n<pre><code>import java.util.Scanner;\npublic class Work extends Working {\npublic static void main(String [] args) {\n    Working work = new Working();\n    Bank bank = new Bank();\n    Scanner input = new Scanner(System.in);\n    int process = 0;\n    int jobExperience = 0;\n\n    while (jobExperience == 0 &amp;&amp; process == 0) {\n        System.out.println(&quot;Welcome! Would you like to apply for a job? Y/N:&quot;);\n        String response = input.next();\n\n        if (response.equalsIgnoreCase(&quot;Y&quot;)) {\n            jobExperience++;\n        }\n        else {\n            System.out.println(&quot;Alright, see you next time!&quot;);\n            process++;\n        }\n    }\n\n    while (process == 0) {\n        System.out.println(&quot;Welcome! Would you like to work? Y/N:&quot;);\n        String response = input.next();\n\n        if (response.equalsIgnoreCase(&quot;Y&quot;)) {\n            System.out.println(&quot;How many hours would you like to work? 1-8:&quot;);\n            int hours = input.nextInt();\n\n            if (hours &gt;= 1 &amp;&amp; hours &lt;= 8) {\n                work.setHours(hours);\n                work.setJob(jobExperience);\n                work.wageCalc();\n                work.setPaycheck();\n                bank.setCash(bank.getCash()+work.getPaycheck());\n                work.printStatement();\n                jobExperience++;\n                process++;\n            }\n        }\n        else {\n            System.out.println(&quot;Alright, see you next time!&quot;);\n            process++;\n        }\n    }\n}\n</code></pre>\n<p>}</p>\n<p>2nd Part to class Work:</p>\n<pre><code>public class Working {\ndouble wage;\ndouble hours;\ndouble paycheck;\nint job;\n\npublic double getHours() {\n    return hours;\n}\n\npublic void setHours(double hours) {\n    this.hours = hours;\n}\n\npublic double getWage() {\n    return wage;\n}\n\npublic void setWage(double wage) {\n    this.wage = wage;\n}\n\npublic int getJob() {\n    return job;\n}\n\npublic void setJob(int job) {\n    this.job = job;\n}\n\npublic void wageCalc() {\n    if (getJob() == 1) {\n        setWage(15);\n    }\n    if (getJob() == 2) {\n        setWage(20);\n    }\n    if (getJob() == 3) {\n        setWage(30);\n    }\n    if (getJob() == 4) {\n        setWage(45);\n    }\n    if (getJob() == 5) {\n        setWage(70);\n    }\n    if (getJob() &gt;= 6) {\n        setWage(100);\n    }\n}\n\npublic void setPaycheck() {\n    paycheck = hours * wage;\n}\n\npublic double getPaycheck() {\n    return paycheck;\n}\n\npublic void printStatement() {\n    System.out.println(&quot;You worked &quot; + getHours() + &quot; hours at a pay rate of $&quot; + getWage() + &quot;/hr and earned $&quot; + getPaycheck() + &quot;.&quot;);\n}\n</code></pre>\n<p>}</p>\n<p>I want the Bank and Work classes to remember each other's values.</p>\n<pre><code>import java.util.Scanner;\npublic class Bank extends Banking {\npublic static void main(String[] args) {\n    Banking bank = new Banking();\n    Scanner input = new Scanner(System.in);\n    int process = 0;\n\n    System.out.println(&quot;Thank you for banking with us. How can we help you?&quot;);\n    while (process == 0) {\n        System.out.println();\n\n        System.out.println(&quot;Press 'B' to check your balance.  Press 'D' to deposit money. Press 'W' to withdraw money. Press 'E' to exit.&quot;);\n        String response = input.next();\n\n        if (response.equalsIgnoreCase(&quot;B&quot;)) {\n            System.out.println(&quot;Your bank balance is currently $&quot; + bank.getBalance());\n            System.out.println(&quot;You currently have $&quot; + bank.getCash() + &quot; in cash.&quot;);\n        }\n\n        if (response.equalsIgnoreCase(&quot;D&quot;)) {\n            System.out.println(&quot;How much would you like to deposit?&quot;);\n            double amount = input.nextDouble();\n            if (bank.getCash() &gt;= amount) {\n                bank.setDeposit(amount);\n                bank.Deposit();\n                bank.setCash(bank.getCash() - amount);\n                System.out.println(&quot;You have deposited $&quot; + bank.getDeposit() + &quot;.&quot;);\n                System.out.println(&quot;Your new balance is $&quot; + bank.getBalance());\n            }\n            else {\n                System.out.println(&quot;Sorry, you do not have enough cash to deposit.&quot;);\n            }\n        }\n\n        if (response.equalsIgnoreCase(&quot;W&quot;) &amp;&amp; bank.getBalance() &gt; 0) {\n            System.out.println(&quot;How much would you like to withdraw?&quot;);\n            double amount = input.nextDouble();\n\n            if (amount &lt; bank.getBalance()) {\n                bank.setWithdraw(amount);\n                bank.Withdraw();\n                System.out.println(&quot;You have withdrawn $&quot; + bank.getWithdraw() + &quot;.&quot;);\n                System.out.println(&quot;Your new balance is $&quot; + bank.getBalance());\n            }\n\n            else {\n                System.out.println(&quot;You do not have sufficient funds to withdraw&quot;);\n                System.out.println(&quot;Your current balance is $&quot; + bank.getBalance());\n            }\n        }\n\n        else if (response.equalsIgnoreCase(&quot;W&quot;) &amp;&amp; bank.getBalance() &lt;= 0) {\n            System.out.println(&quot;You do not have sufficient funds to withdraw&quot;);\n        }\n\n        if (response.equalsIgnoreCase(&quot;E&quot;)) {\n            process = 2;\n            System.out.println(&quot;Goodbye!&quot;);\n        }\n    }\n}\n</code></pre>\n<p>}</p>\n<p>Here is the second part to my Bank:</p>\n<pre><code>public class Banking {\nprivate double balance;\nprivate double withdraw;\nprivate double deposit;\nprivate double cash;\n\npublic void setCash(double cash) {\n    this.cash = cash;\n}\n\npublic double getCash() {\n    return cash;\n}\n\npublic void setBalance(double balance) {\n    this.balance = balance;\n}\n\npublic double getBalance() {\n    return balance;\n}\n\npublic void setWithdraw(double withdraw) {\n    this.withdraw = withdraw;\n}\n\npublic double getWithdraw() {\n    return withdraw;\n}\n\npublic void setDeposit(double deposit) {\n    this.deposit = deposit;\n}\n\npublic double getDeposit() {\n    return deposit;\n}\n\npublic void Withdraw() {\n    balance = balance - withdraw;\n}\npublic void Deposit() {\n    balance = balance + deposit;\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","collections","set"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1637118444,"post_id":69998466,"comment_id":123738338,"body_markdown":"It sounds like you know how to get a `Set&lt;Meeting&gt;` of the meetings from any given day.  So the `Map` doesn&#39;t actually have any relevance here.  (But that said, your `compareTo` method violates its contract and will cause _extremely strange_ behavior when used in a `Set`.)","body":"It sounds like you know how to get a <code>Set&lt;Meeting&gt;</code> of the meetings from any given day.  So the <code>Map</code> doesn&#39;t actually have any relevance here.  (But that said, your <code>compareTo</code> method violates its contract and will cause <i>extremely strange</i> behavior when used in a <code>Set</code>.)"},{"owner":{"account_id":23361262,"reputation":1,"user_id":17433444,"display_name":"A. Nabeen"},"score":0,"creation_date":1637118654,"post_id":69998466,"comment_id":123738370,"body_markdown":"@LouisWasserman thanks for replying. If you could explain what you mean by violating the contract?","body":"@LouisWasserman thanks for replying. If you could explain what you mean by violating the contract?"},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1637118726,"post_id":69998466,"comment_id":123738386,"body_markdown":"You _cannot_ have a valid `compareTo` method which treats any time intervals that overlap as equal.  That violates the [transitivity](https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html#compare-T-T-) property.  When used in a `Set`, I can only imagine the bugs that&#39;d cause.  It&#39;d start with it being nondeterministic which of an overlapping set gets chosen; then you&#39;d start having elements in the set that actually turn out to compare as equal, then everything would start breaking down.","body":"You <i>cannot</i> have a valid <code>compareTo</code> method which treats any time intervals that overlap as equal.  That violates the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html#compare-T-T-\" rel=\"nofollow noreferrer\">transitivity</a> property.  When used in a <code>Set</code>, I can only imagine the bugs that&#39;d cause.  It&#39;d start with it being nondeterministic which of an overlapping set gets chosen; then you&#39;d start having elements in the set that actually turn out to compare as equal, then everything would start breaking down."},{"owner":{"account_id":23361262,"reputation":1,"user_id":17433444,"display_name":"A. Nabeen"},"score":0,"creation_date":1637120986,"post_id":69998466,"comment_id":123738772,"body_markdown":"@LouisWasserman I would still need a way to compare the meetings class in the same date. How would you suggest I go on to access the meeting class and compare first class&#39;s info to second&#39;s","body":"@LouisWasserman I would still need a way to compare the meetings class in the same date. How would you suggest I go on to access the meeting class and compare first class&#39;s info to second&#39;s"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1637121073,"post_id":69998466,"comment_id":123738784,"body_markdown":"Compare them for what purpose?","body":"Compare them for what purpose?"},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1637121309,"post_id":69998466,"comment_id":123738820,"body_markdown":"Well, I was suggesting ways to simplify your question and eliminate extra details.  But the easiest way is to write `(for (Meeting meeting1 : set) { for (Meeting meeting2 : set) { doSomething(meeting1, meeting2); } }`.","body":"Well, I was suggesting ways to simplify your question and eliminate extra details.  But the easiest way is to write <code>(for (Meeting meeting1 : set) { for (Meeting meeting2 : set) { doSomething(meeting1, meeting2); } }</code>."},{"owner":{"account_id":23361262,"reputation":1,"user_id":17433444,"display_name":"A. Nabeen"},"score":0,"creation_date":1637121567,"post_id":69998466,"comment_id":123738865,"body_markdown":"@shmosel so there are no overlapping meetings in a single day. Let&#39;s say someone booked a room for a meeting at 9 am - 11 am and someone else booked the meeting from 10 am - 11 am. We wouldn&#39;t want the second request.","body":"@shmosel so there are no overlapping meetings in a single day. Let&#39;s say someone booked a room for a meeting at 9 am - 11 am and someone else booked the meeting from 10 am - 11 am. We wouldn&#39;t want the second request."}],"answers":[{"tags":[],"owner":{"account_id":23362411,"reputation":44,"user_id":17434427,"display_name":"studmoobs"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637123150,"creation_date":1637122789,"answer_id":69998895,"question_id":69998466,"body_markdown":"\r\n    for (var entry : meetings.values()) {\r\n       for (Meeting meeting : entry) {\r\n          //do whatever with meeting here\r\n       }\r\n    }\r\nThis is how you would loop through each set in your map, and then through each Meeting in your set. It&#39;s important to remember that your map will contain several collections, and so you must access one using a key or loop through all of them like here.","title":"How to call a method for object from a set of objects?","body":"<pre><code>for (var entry : meetings.values()) {\n   for (Meeting meeting : entry) {\n      //do whatever with meeting here\n   }\n}\n</code></pre>\n<p>This is how you would loop through each set in your map, and then through each Meeting in your set. It's important to remember that your map will contain several collections, and so you must access one using a key or loop through all of them like here.</p>\n"},{"tags":[],"owner":{"account_id":17056735,"reputation":55,"user_id":12341075,"display_name":"YourRentIsDue"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637125791,"creation_date":1637125407,"answer_id":69999167,"question_id":69998466,"body_markdown":"This is how I&#39;d personally do it if you really wanted to use an iterator.\r\n\r\n```\r\n        Iterator&lt;Meeting&gt; it = insideMeeting.iterator();\r\n\r\n        while(it.hasNext()){\r\n            Meeting current = it.next();\r\n            it.forEachRemaining(testMeeting -&gt; {\r\n                if(current.getStartTime() == testMeeting.getStartTime() ||\r\n                   current.getFinishTime() == testMeeting.getStartTime() /*Add rest of conditions*/){                               \r\n                    //.remove whichever one you want\r\n                }\r\n            });\r\n        }\r\n\r\n```\r\n\r\nAlthough, as @studmoobs pointed out this is a bit complicated. I&#39;m sure there&#39;d be a better way of doing it without specifically a set. Like for example any indexed list. ","title":"How to call a method for object from a set of objects?","body":"<p>This is how I'd personally do it if you really wanted to use an iterator.</p>\n<pre><code>        Iterator&lt;Meeting&gt; it = insideMeeting.iterator();\n\n        while(it.hasNext()){\n            Meeting current = it.next();\n            it.forEachRemaining(testMeeting -&gt; {\n                if(current.getStartTime() == testMeeting.getStartTime() ||\n                   current.getFinishTime() == testMeeting.getStartTime() /*Add rest of conditions*/){                               \n                    //.remove whichever one you want\n                }\n            });\n        }\n\n</code></pre>\n<p>Although, as @studmoobs pointed out this is a bit complicated. I'm sure there'd be a better way of doing it without specifically a set. Like for example any indexed list.</p>\n"}],"owner":{"account_id":23361262,"reputation":1,"user_id":17433444,"display_name":"A. Nabeen"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1637125791,"creation_date":1637118324,"question_id":69998466,"body_markdown":"```\r\n        Map&lt;LocalDate, Set&lt;Meeting&gt;&gt; meetings = new HashMap&lt;LocalDate, Set&lt;Meeting&gt;&gt;();\r\n```\r\nI have a hashmap that stores the date as key and Set of Meeting Class as value. \r\n```                \r\n        Collection&lt;Set&lt;Meeting&gt;&gt; insideMeeting = meetings.values();\r\n        System.out.println(&quot;meetings and their dates &quot; + Arrays.asList(meetings));      \r\n        System.out.println(&quot;How many meetings are there for date? &quot; + insideMeeting);  \r\n        \r\n        for (Iterator&lt;Set&lt;Meeting&gt;&gt; iterator = insideMeeting.iterator(); iterator.hasNext();) {\r\n        \tSystem.out.println(&quot;value= &quot; + iterator.next());\r\n            }\r\n```\r\nAnd I am trying to access the said Meeting classes with the same date inside the collection set and compare them.\r\n```\r\npublic class Meeting implements Comparable&lt;Meeting&gt;{\r\n\r\n    private String employeeId;\r\n\r\n    private LocalTime startTime;\r\n\r\n    private LocalTime finishTime;\r\n\r\n    public Meeting(String employeeId, LocalTime startTime, LocalTime finishTime) {\r\n        this.employeeId = employeeId;\r\n        this.startTime = startTime;\r\n        this.finishTime = finishTime;\r\n    }\r\n\r\n\r\n    public String getEmployeeId() {\r\n        return employeeId;\r\n    }\r\n\r\n    public LocalTime getStartTime() {\r\n        return startTime;\r\n    }\r\n\r\n    public LocalTime getFinishTime() {\r\n        return finishTime;\r\n    }\r\n\r\n    public int compareTo(Meeting that) {\r\n        Interval meetingInterval = new Interval(startTime.toDateTimeToday(), \r\n        \t\tfinishTime.toDateTimeToday());\r\n        Interval toCompareMeetingInterval = new Interval(that.getStartTime().\r\n        \t\ttoDateTimeToday(), that.getFinishTime().toDateTimeToday());\r\n\r\n        if(meetingInterval.overlaps(toCompareMeetingInterval)){\r\n            return 0;\r\n        }else{\r\n            return this.getStartTime().compareTo(that.getStartTime());\r\n        }\r\n\r\n    }\r\n}\r\n```\r\nBasically, if I could I want to compare the meetings (so there are no overlapping meetings in a single day. Let&#39;s say someone booked a room for a meeting at 9 am - 11 am and someone else booked the meeting from 10 am - 11 am. We wouldn&#39;t want the second request.) Do something like for each set of meetings in the collection I want to compare them with each other. I do have a compareTo method in the Meeting class. \r\n  \r\n\r\n[DEBUG HERE!][1]\r\n```\r\nmeetings and their dates [{2011-03-21=[office.Meeting@4690b489, office.Meeting@363ee3a2]}]\r\nHow many meetings are there for date? [[office.Meeting@4690b489, office.Meeting@363ee3a2]]\r\nvalue= [office.Meeting@4690b489, office.Meeting@363ee3a2]\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/00Je7.png","title":"How to call a method for object from a set of objects?","body":"<pre><code>        Map&lt;LocalDate, Set&lt;Meeting&gt;&gt; meetings = new HashMap&lt;LocalDate, Set&lt;Meeting&gt;&gt;();\n</code></pre>\n<p>I have a hashmap that stores the date as key and Set of Meeting Class as value.</p>\n<pre><code>        Collection&lt;Set&lt;Meeting&gt;&gt; insideMeeting = meetings.values();\n        System.out.println(&quot;meetings and their dates &quot; + Arrays.asList(meetings));      \n        System.out.println(&quot;How many meetings are there for date? &quot; + insideMeeting);  \n        \n        for (Iterator&lt;Set&lt;Meeting&gt;&gt; iterator = insideMeeting.iterator(); iterator.hasNext();) {\n            System.out.println(&quot;value= &quot; + iterator.next());\n            }\n</code></pre>\n<p>And I am trying to access the said Meeting classes with the same date inside the collection set and compare them.</p>\n<pre><code>public class Meeting implements Comparable&lt;Meeting&gt;{\n\n    private String employeeId;\n\n    private LocalTime startTime;\n\n    private LocalTime finishTime;\n\n    public Meeting(String employeeId, LocalTime startTime, LocalTime finishTime) {\n        this.employeeId = employeeId;\n        this.startTime = startTime;\n        this.finishTime = finishTime;\n    }\n\n\n    public String getEmployeeId() {\n        return employeeId;\n    }\n\n    public LocalTime getStartTime() {\n        return startTime;\n    }\n\n    public LocalTime getFinishTime() {\n        return finishTime;\n    }\n\n    public int compareTo(Meeting that) {\n        Interval meetingInterval = new Interval(startTime.toDateTimeToday(), \n                finishTime.toDateTimeToday());\n        Interval toCompareMeetingInterval = new Interval(that.getStartTime().\n                toDateTimeToday(), that.getFinishTime().toDateTimeToday());\n\n        if(meetingInterval.overlaps(toCompareMeetingInterval)){\n            return 0;\n        }else{\n            return this.getStartTime().compareTo(that.getStartTime());\n        }\n\n    }\n}\n</code></pre>\n<p>Basically, if I could I want to compare the meetings (so there are no overlapping meetings in a single day. Let's say someone booked a room for a meeting at 9 am - 11 am and someone else booked the meeting from 10 am - 11 am. We wouldn't want the second request.) Do something like for each set of meetings in the collection I want to compare them with each other. I do have a compareTo method in the Meeting class.</p>\n<p><a href=\"https://i.stack.imgur.com/00Je7.png\" rel=\"nofollow noreferrer\">DEBUG HERE!</a></p>\n<pre><code>meetings and their dates [{2011-03-21=[office.Meeting@4690b489, office.Meeting@363ee3a2]}]\nHow many meetings are there for date? [[office.Meeting@4690b489, office.Meeting@363ee3a2]]\nvalue= [office.Meeting@4690b489, office.Meeting@363ee3a2]\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":4473596,"reputation":614,"user_id":3639235,"display_name":"Dave S"},"score":2,"creation_date":1637123432,"post_id":69998874,"comment_id":123739159,"body_markdown":"Can you show your code and where exactly you have a problem?","body":"Can you show your code and where exactly you have a problem?"},{"owner":{"account_id":4552102,"reputation":175,"user_id":3696953,"display_name":"duppydodah"},"score":1,"creation_date":1637123606,"post_id":69998874,"comment_id":123739188,"body_markdown":"What do you mean if the list is null ? If it hasn&#39;t been initialized yet ?","body":"What do you mean if the list is null ? If it hasn&#39;t been initialized yet ?"}],"answers":[{"tags":[],"owner":{"account_id":23362411,"reputation":44,"user_id":17434427,"display_name":"studmoobs"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1637124811,"creation_date":1637123721,"answer_id":69998976,"question_id":69998874,"body_markdown":"# Check `null` before `isEmpty`\r\n\r\nYou&#39;ll just have to check for `null` before `isEmpty` each time. You could quickly create a method to help you, ie:\r\n\r\n    private boolean isNullOrEmpty(List list) {\r\n       return list == null || list.isEmpty();\r\n    }\r\nThis won&#39;t cause a null pointer exception since it will not check for the 2nd condition if the first is true. ([Short-circuit evaluation](https://en.wikipedia.org/wiki/Short-circuit_evaluation))","title":"Null and isEmpty Check for ArrayLists","body":"<h1>Check <code>null</code> before <code>isEmpty</code></h1>\n<p>You'll just have to check for <code>null</code> before <code>isEmpty</code> each time. You could quickly create a method to help you, ie:</p>\n<pre><code>private boolean isNullOrEmpty(List list) {\n   return list == null || list.isEmpty();\n}\n</code></pre>\n<p>This won't cause a null pointer exception since it will not check for the 2nd condition if the first is true. (<a href=\"https://en.wikipedia.org/wiki/Short-circuit_evaluation\" rel=\"nofollow noreferrer\">Short-circuit evaluation</a>)</p>\n"}],"owner":{"account_id":10300892,"reputation":17,"user_id":7599667,"display_name":"user7599667"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":500,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":69998976,"answer_count":1,"score":-2,"last_activity_date":1637124935,"creation_date":1637122660,"question_id":69998874,"body_markdown":"How to do null check and also isEmpty check on a arraylist. Any best practices around it.\r\n\r\nI have if  then else if then else if loops\r\n\r\nif listA not null and not empty also listB not null and not empty i have to call database twice (first time listA data, second time using listB data). Then merge both results using addAll\r\n\r\nIn first else if listA has data whereas listB is null or empty call only listA specific database call using that stored procedure\r\n\r\nin second else if listB has data whereas listA is null or empty call only listA specific database call using that stored procedure\r\n\r\nFor me with null flows are working while passing blank list [] not working.\r\n\r\nHow to check both null and isEmpty same time?\r\nif list null and if i check isEmpty giving null pointer exception.","title":"Null and isEmpty Check for ArrayLists","body":"<p>How to do null check and also isEmpty check on a arraylist. Any best practices around it.</p>\n<p>I have if  then else if then else if loops</p>\n<p>if listA not null and not empty also listB not null and not empty i have to call database twice (first time listA data, second time using listB data). Then merge both results using addAll</p>\n<p>In first else if listA has data whereas listB is null or empty call only listA specific database call using that stored procedure</p>\n<p>in second else if listB has data whereas listA is null or empty call only listA specific database call using that stored procedure</p>\n<p>For me with null flows are working while passing blank list [] not working.</p>\n<p>How to check both null and isEmpty same time?\nif list null and if i check isEmpty giving null pointer exception.</p>\n"},{"tags":["java","slice","wala"],"answers":[{"tags":[],"owner":{"account_id":23356389,"reputation":1,"user_id":17429302,"display_name":"zhouyn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637124514,"creation_date":1637115211,"answer_id":69998178,"question_id":69990914,"body_markdown":"I got it. We can solve this problem through adding several paths to the jar path which we choose to slice, like:\r\n\r\n    String path = &quot;./test.jar;./test01.jar&quot;;\r\n\r\nQuite simple. ","title":"is there any method for WALA to slice several jars","body":"<p>I got it. We can solve this problem through adding several paths to the jar path which we choose to slice, like:</p>\n<pre><code>String path = &quot;./test.jar;./test01.jar&quot;;\n</code></pre>\n<p>Quite simple.</p>\n"}],"owner":{"account_id":23356389,"reputation":1,"user_id":17429302,"display_name":"zhouyn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637124514,"creation_date":1637072751,"question_id":69990914,"body_markdown":"i am a green hand for WALA.\r\ni am trying to slice a jar for hdfs, but it is corelated with other parts of hadoop like hadoop commom. so i wonder if there is any method to slice several jars or slice one and the slice statement including the calls from other jars.\r\n\r\nif you have any ideas about it thank you so much!","title":"is there any method for WALA to slice several jars","body":"<p>i am a green hand for WALA.\ni am trying to slice a jar for hdfs, but it is corelated with other parts of hadoop like hadoop commom. so i wonder if there is any method to slice several jars or slice one and the slice statement including the calls from other jars.</p>\n<p>if you have any ideas about it thank you so much!</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1637126217,"post_id":69998528,"comment_id":123739606,"body_markdown":"Interesting question, but could you please paste the full output into your question so we can be sure precisely what we are talking about? In particular I’m not sure whether you are seeing `Constructor called for : RED` three times or you are seeing all three colours?","body":"Interesting question, but could you please paste the full output into your question so we can be sure precisely what we are talking about? In particular I’m not sure whether you are seeing <code>Constructor called for : RED</code> three times or you are seeing all three colours?"}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1637124395,"creation_date":1637119044,"answer_id":69998540,"question_id":69998528,"body_markdown":"Enum constants are all initialized as soon as the class gets initialized -- as soon as there&#39;s any usage of `Color`.  So all three, `RED`, `GREEN`, `BLUE`, get constructed.\r\n\r\nSee *Java Language Specification*, [*Chapter 8.9 Enum Classes*][1]. \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.9","title":"Why did it run as the result?","body":"<p>Enum constants are all initialized as soon as the class gets initialized -- as soon as there's any usage of <code>Color</code>.  So all three, <code>RED</code>, <code>GREEN</code>, <code>BLUE</code>, get constructed.</p>\n<p>See <em>Java Language Specification</em>, <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.9\" rel=\"nofollow noreferrer\"><em>Chapter 8.9 Enum Classes</em></a>.</p>\n"}],"owner":{"account_id":22710535,"reputation":5,"user_id":16876548,"display_name":"misty"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1637124395,"creation_date":1637118927,"question_id":69998528,"body_markdown":"```java\r\nenum Color {\r\n    RED, GREEN, BLUE;\r\n\r\n    // 构造函数\r\n    private Color() {\r\n        System.out.println(&quot;Constructor called for : &quot; + this.toString());\r\n    }\r\n\r\n    public void colorInfo() {\r\n        System.out.println(&quot;Universal Color&quot;);\r\n    }\r\n}\r\n```\r\n\r\n```java\r\npublic class NumTest {\r\n    // 输出\r\n    public static void main(String[] args) {\r\n        Color c1 = Color.RED;\r\n        System.out.println(c1);\r\n        c1.colorInfo();\r\n    }\r\n}\r\n```\r\n\r\nI thought the result of running was “Constructor called for : RED”\r\nWhy is the constructor called three times？\r\n\r\n ","title":"Why did it run as the result?","body":"<pre class=\"lang-java prettyprint-override\"><code>enum Color {\n    RED, GREEN, BLUE;\n\n    // 构造函数\n    private Color() {\n        System.out.println(&quot;Constructor called for : &quot; + this.toString());\n    }\n\n    public void colorInfo() {\n        System.out.println(&quot;Universal Color&quot;);\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class NumTest {\n    // 输出\n    public static void main(String[] args) {\n        Color c1 = Color.RED;\n        System.out.println(c1);\n        c1.colorInfo();\n    }\n}\n</code></pre>\n<p>I thought the result of running was “Constructor called for : RED”\nWhy is the constructor called three times？</p>\n"},{"tags":["java","android","android-room"],"comments":[{"owner":{"account_id":2786826,"reputation":2172,"user_id":2398000,"display_name":"avalerio"},"score":0,"creation_date":1637123224,"post_id":69998882,"comment_id":123739123,"body_markdown":"Can you post your related gradle files? It might be a mix up of using api vs implementation for dependencies.","body":"Can you post your related gradle files? It might be a mix up of using api vs implementation for dependencies."},{"owner":{"account_id":22165740,"reputation":1230,"user_id":16411959,"display_name":"AI Shakil"},"score":0,"creation_date":1637123498,"post_id":69998882,"comment_id":123739170,"body_markdown":"Sorry for that.. i was in hurry. Edited and inserted dependency","body":"Sorry for that.. i was in hurry. Edited and inserted dependency"}],"answers":[{"tags":[],"owner":{"account_id":2786826,"reputation":2172,"user_id":2398000,"display_name":"avalerio"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1637124026,"creation_date":1637124026,"answer_id":69999010,"question_id":69998882,"body_markdown":"Looking at your gradle file the dependency \r\n\r\n`implementation &#39;androidx.room:room-compiler:2.4.0-beta01&#39;` \r\n\r\nneeds to be\r\n\r\n`annotationProcessor &#39;androidx.room:room-compiler:2.4.0-beta01&#39;`\r\n\r\nHere is the support documents for room.\r\n\r\n\r\nhttps://developer.android.com/jetpack/androidx/releases/room\r\n\r\nAs a side note I would avoid using a beta version unless you are truly dependent on a new feature that was added or a bug fix.","title":"Android java room database, app building error","body":"<p>Looking at your gradle file the dependency</p>\n<p><code>implementation 'androidx.room:room-compiler:2.4.0-beta01'</code></p>\n<p>needs to be</p>\n<p><code>annotationProcessor 'androidx.room:room-compiler:2.4.0-beta01'</code></p>\n<p>Here is the support documents for room.</p>\n<p><a href=\"https://developer.android.com/jetpack/androidx/releases/room\" rel=\"nofollow noreferrer\">https://developer.android.com/jetpack/androidx/releases/room</a></p>\n<p>As a side note I would avoid using a beta version unless you are truly dependent on a new feature that was added or a bug fix.</p>\n"}],"owner":{"account_id":22165740,"reputation":1230,"user_id":16411959,"display_name":"AI Shakil"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":237,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69999010,"answer_count":1,"score":0,"last_activity_date":1637124026,"creation_date":1637122702,"question_id":69998882,"body_markdown":"I&#39;ve created a sample room database app. \r\n\r\nis the error showing for any dependency error?? or something for JDK???\r\n\r\nwhen i run this error showing:\r\n\r\n    Duplicate class org.intellij.lang.annotations.Identifier found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.intellij.lang.annotations.JdkConstants found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.intellij.lang.annotations.JdkConstants$AdjustableOrientation found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.intellij.lang.annotations.JdkConstants$BoxLayoutAxis found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.intellij.lang.annotations.JdkConstants$CalendarMonth found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.intellij.lang.annotations.JdkConstants$CursorType found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.intellij.lang.annotations.JdkConstants$FlowLayoutAlignment found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.intellij.lang.annotations.JdkConstants$FontStyle found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.intellij.lang.annotations.JdkConstants$HorizontalAlignment found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.intellij.lang.annotations.JdkConstants$InputEventMask found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.intellij.lang.annotations.JdkConstants$ListSelectionMode found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.intellij.lang.annotations.JdkConstants$PatternFlags found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.intellij.lang.annotations.JdkConstants$TabLayoutPolicy found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.intellij.lang.annotations.JdkConstants$TabPlacement found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.intellij.lang.annotations.JdkConstants$TitledBorderJustification found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.intellij.lang.annotations.JdkConstants$TitledBorderTitlePosition found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.intellij.lang.annotations.JdkConstants$TreeSelectionMode found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.intellij.lang.annotations.Language found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.intellij.lang.annotations.MagicConstant found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.intellij.lang.annotations.Pattern found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.intellij.lang.annotations.PrintFormat found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.intellij.lang.annotations.PrintFormatPattern found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.intellij.lang.annotations.RegExp found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.intellij.lang.annotations.Subst found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.jetbrains.annotations.Nls found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.jetbrains.annotations.NonNls found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.jetbrains.annotations.NotNull found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.jetbrains.annotations.Nullable found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.jetbrains.annotations.PropertyKey found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    Duplicate class org.jetbrains.annotations.TestOnly found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\r\n    \r\n    Go to the documentation to learn how to Fix dependency resolution errors.\r\n\r\n\r\nhere is the dependencies im using for this project.\r\nhope you can solve this please....\r\nDEPECDENCY :\r\n\r\n    dependencies {\r\n    \r\n        implementation &#39;androidx.appcompat:appcompat:1.3.1&#39;\r\n        implementation &#39;com.google.android.material:material:1.4.0&#39;\r\n        implementation &#39;androidx.constraintlayout:constraintlayout:2.1.1&#39;\r\n    \r\n        // Room Components\r\n        implementation &#39;androidx.room:room-runtime:2.4.0-beta01&#39;\r\n        implementation &#39;androidx.room:room-compiler:2.4.0-beta01&#39;\r\n        implementation &#39;androidx.room:room-testing:2.4.0-beta01&#39;\r\n    \r\n        // Lifecycle Components\r\n        implementation &#39;androidx.lifecycle:lifecycle-viewmodel:2.4.0&#39;\r\n        implementation &#39;androidx.lifecycle:lifecycle-livedata:2.4.0&#39;\r\n        implementation &#39;androidx.lifecycle:lifecycle-common-java8:2.4.0&#39;\r\n    \r\n        testImplementation &#39;junit:junit:4.+&#39;\r\n        androidTestImplementation &#39;androidx.test.ext:junit:1.1.3&#39;\r\n        androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.4.0&#39;\r\n    }\r\n","title":"Android java room database, app building error","body":"<p>I've created a sample room database app.</p>\n<p>is the error showing for any dependency error?? or something for JDK???</p>\n<p>when i run this error showing:</p>\n<pre><code>Duplicate class org.intellij.lang.annotations.Identifier found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.intellij.lang.annotations.JdkConstants found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.intellij.lang.annotations.JdkConstants$AdjustableOrientation found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.intellij.lang.annotations.JdkConstants$BoxLayoutAxis found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.intellij.lang.annotations.JdkConstants$CalendarMonth found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.intellij.lang.annotations.JdkConstants$CursorType found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.intellij.lang.annotations.JdkConstants$FlowLayoutAlignment found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.intellij.lang.annotations.JdkConstants$FontStyle found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.intellij.lang.annotations.JdkConstants$HorizontalAlignment found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.intellij.lang.annotations.JdkConstants$InputEventMask found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.intellij.lang.annotations.JdkConstants$ListSelectionMode found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.intellij.lang.annotations.JdkConstants$PatternFlags found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.intellij.lang.annotations.JdkConstants$TabLayoutPolicy found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.intellij.lang.annotations.JdkConstants$TabPlacement found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.intellij.lang.annotations.JdkConstants$TitledBorderJustification found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.intellij.lang.annotations.JdkConstants$TitledBorderTitlePosition found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.intellij.lang.annotations.JdkConstants$TreeSelectionMode found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.intellij.lang.annotations.Language found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.intellij.lang.annotations.MagicConstant found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.intellij.lang.annotations.Pattern found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.intellij.lang.annotations.PrintFormat found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.intellij.lang.annotations.PrintFormatPattern found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.intellij.lang.annotations.RegExp found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.intellij.lang.annotations.Subst found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.jetbrains.annotations.Nls found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.jetbrains.annotations.NonNls found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.jetbrains.annotations.NotNull found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.jetbrains.annotations.Nullable found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.jetbrains.annotations.PropertyKey found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\nDuplicate class org.jetbrains.annotations.TestOnly found in modules jetified-annotations-12.0 (com.intellij:annotations:12.0) and jetified-annotations-13.0 (org.jetbrains:annotations:13.0)\n\nGo to the documentation to learn how to Fix dependency resolution errors.\n</code></pre>\n<p>here is the dependencies im using for this project.\nhope you can solve this please....\nDEPECDENCY :</p>\n<pre><code>dependencies {\n\n    implementation 'androidx.appcompat:appcompat:1.3.1'\n    implementation 'com.google.android.material:material:1.4.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.1'\n\n    // Room Components\n    implementation 'androidx.room:room-runtime:2.4.0-beta01'\n    implementation 'androidx.room:room-compiler:2.4.0-beta01'\n    implementation 'androidx.room:room-testing:2.4.0-beta01'\n\n    // Lifecycle Components\n    implementation 'androidx.lifecycle:lifecycle-viewmodel:2.4.0'\n    implementation 'androidx.lifecycle:lifecycle-livedata:2.4.0'\n    implementation 'androidx.lifecycle:lifecycle-common-java8:2.4.0'\n\n    testImplementation 'junit:junit:4.+'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.3'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'\n}\n</code></pre>\n"},{"tags":["java","pi","threshold","decimalformat"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1637122760,"post_id":69998660,"comment_id":123739044,"body_markdown":"Maybe I am misreading the question but isn&#39;t it asking you loop until the difference between your calculated `pi` and Math.PI is within a threshold?  Tehn you output how many iterations it took (i.e the value of `i`)","body":"Maybe I am misreading the question but isn&#39;t it asking you loop until the difference between your calculated <code>pi</code> and Math.PI is within a threshold?  Tehn you output how many iterations it took (i.e the value of <code>i</code>)"}],"answers":[{"tags":[],"owner":{"account_id":23362411,"reputation":44,"user_id":17434427,"display_name":"studmoobs"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1637123413,"creation_date":1637123413,"answer_id":69998947,"question_id":69998660,"body_markdown":"The idea is to change the while loop condition. Rather than loop until you reach a certain amount of iterations, you loop until your calculated PI value is within a certain amount. For example:\r\n\r\n    while (Math.abs(Math.PI - pi) &gt; threshold) {","title":"How do I set a threshold using a user&#39;s input?","body":"<p>The idea is to change the while loop condition. Rather than loop until you reach a certain amount of iterations, you loop until your calculated PI value is within a certain amount. For example:</p>\n<pre><code>while (Math.abs(Math.PI - pi) &gt; threshold) {\n</code></pre>\n"}],"owner":{"account_id":23339263,"reputation":1,"user_id":17414383,"display_name":"sir gregor"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":285,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637123413,"creation_date":1637120295,"question_id":69998660,"body_markdown":"I&#39;m not really sure how to set a threshold value or how I would do so using the input of a user? Would I use DecimalFormat? If so, how would I save the user&#39;s input into DecimalFormat? \r\n\r\nPart 2: Rewrite the program so the user specifies the threshold and loops until the approximation is within this threshold for the value of Math.PI, displays the value of Math.PI, resulting value, and the number of iterations it took to reach it.\r\n\r\nSample output:\r\n\r\nWhat is the threshold you wish to use: .000001\r\n\r\nMath.PI:     3.141592653589793\r\n\r\npi:          3.1415936535887745\r\n\r\nNumber of iterations: 1000001\r\n\r\nThis is the code I have from the first part that is meant to be rewritten: \r\n\r\n\r\n\r\n\tpublic static void main(String[] args) {\r\n\t   \r\n\t\t//define\r\n\t      Scanner scnr = new Scanner(System.in);\r\n\t        double pi = 0.0; \r\n\t    \r\n\t        System.out.println(&quot;How many iterations would you like to do: &quot;);\r\n\t        int n = scnr.nextInt();\r\n\t        \r\n\t        int i = 0;\r\n\t        while (i &lt; n) {\r\n\t            \r\n\t            pi += (Math.pow(-1,i) * 4.0) / (2.0 * i + 1);\r\n\t            \r\n\t            i++;\r\n\t        }\r\n\t        System.out.println(&quot;pi: &quot; + pi);\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\r\n\t\t\r\n\t}\r\n\r\n\r\n\r\n","title":"How do I set a threshold using a user&#39;s input?","body":"<p>I'm not really sure how to set a threshold value or how I would do so using the input of a user? Would I use DecimalFormat? If so, how would I save the user's input into DecimalFormat?</p>\n<p>Part 2: Rewrite the program so the user specifies the threshold and loops until the approximation is within this threshold for the value of Math.PI, displays the value of Math.PI, resulting value, and the number of iterations it took to reach it.</p>\n<p>Sample output:</p>\n<p>What is the threshold you wish to use: .000001</p>\n<p>Math.PI:     3.141592653589793</p>\n<p>pi:          3.1415936535887745</p>\n<p>Number of iterations: 1000001</p>\n<p>This is the code I have from the first part that is meant to be rewritten:</p>\n<pre><code>public static void main(String[] args) {\n   \n    //define\n      Scanner scnr = new Scanner(System.in);\n        double pi = 0.0; \n    \n        System.out.println(&quot;How many iterations would you like to do: &quot;);\n        int n = scnr.nextInt();\n        \n        int i = 0;\n        while (i &lt; n) {\n            \n            pi += (Math.pow(-1,i) * 4.0) / (2.0 * i + 1);\n            \n            i++;\n        }\n        System.out.println(&quot;pi: &quot; + pi);\n        \n    }\n\n\n    \n}\n</code></pre>\n"},{"tags":["java","user-interface","javafx","java-15","richtextfx"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1616432534,"post_id":66750271,"comment_id":117995164,"body_markdown":"repost? even though you seem to be a step closer to the solution (got it compile :) - the error line: _Caused by: java.lang.IllegalAccessError: class org.fxmisc.richtext.TextFlowExt (in unnamed module @0x47fe7806) cannot access class com.sun.javafx.text.PrismTextLayout (in module javafx.graphics) because module javafx.graphics does not export com.sun.javafx.text to unnamed module_ tells you the exact reason and what to do about it (add-exports at runtime)","body":"repost? even though you seem to be a step closer to the solution (got it compile :) - the error line: <i>Caused by: java.lang.IllegalAccessError: class org.fxmisc.richtext.TextFlowExt (in unnamed module @0x47fe7806) cannot access class com.sun.javafx.text.PrismTextLayout (in module javafx.graphics) because module javafx.graphics does not export com.sun.javafx.text to unnamed module</i> tells you the exact reason and what to do about it (add-exports at runtime)"}],"answers":[{"tags":[],"owner":{"account_id":21749129,"reputation":85,"user_id":16055338,"display_name":"blaze-centurion"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1637122774,"creation_date":1637122774,"answer_id":69998890,"question_id":66750271,"body_markdown":"Try to use the fat JAR file (including dependencies) of richtextfx. Here&#39;s the link of its repo [https://github.com/FXMisc/RichTextFX#download][1], and [link][2] for downloading the fat jar file.\r\n\r\n\r\n  [1]: https://github.com/FXMisc/RichTextFX#download\r\n  [2]: https://github.com/FXMisc/RichTextFX/releases/download/v0.10.7/richtextfx-fat-0.10.7.jar\r\n\r\nThis work fine for me. Hopefully this works for you also.","title":"RichTextFx not working in JavaFX, CodeArea not not showing up (Errors)","body":"<p>Try to use the fat JAR file (including dependencies) of richtextfx. Here's the link of its repo <a href=\"https://github.com/FXMisc/RichTextFX#download\" rel=\"nofollow noreferrer\">https://github.com/FXMisc/RichTextFX#download</a>, and <a href=\"https://github.com/FXMisc/RichTextFX/releases/download/v0.10.7/richtextfx-fat-0.10.7.jar\" rel=\"nofollow noreferrer\">link</a> for downloading the fat jar file.</p>\n<p>This work fine for me. Hopefully this works for you also.</p>\n"}],"owner":{"account_id":18767220,"reputation":163,"user_id":13684817,"display_name":"Benjamin Sloutsky"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":470,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1637122774,"creation_date":1616431274,"question_id":66750271,"body_markdown":"[My build configs][1]\r\n\r\n\r\nThis is my code:\r\n\r\n        MenuBar menuBar = new MenuBar();\r\n        Menu menu1 = new Menu(&quot;File&quot;);\r\n        Menu menu2 = new Menu(&quot;Edit&quot;);\r\n        Menu menu3 = new Menu(&quot;Project&quot;);\r\n        Menu menu4 = new Menu(&quot;Window&quot;);\r\n        Menu menu5 = new Menu(&quot;Help&quot;);\r\n\r\n        menuBar.getMenus().add(menu1);\r\n        menuBar.getMenus().add(menu2);\r\n        menuBar.getMenus().add(menu3);\r\n        menuBar.getMenus().add(menu4);\r\n        menuBar.getMenus().add(menu5);\r\n\r\n        BorderPane borderPane = new BorderPane();\r\n        HBox statusbar = new HBox();\r\n        TabPane tabPane = new TabPane();\r\n\r\n\r\n        CodeArea codeArea = new CodeArea();\r\n        codeArea.setParagraphGraphicFactory(LineNumberFactory.get(codeArea));\r\n        codeArea.replaceText(0, 0, sampleCode);\r\n\r\n\r\n        Tab tab1 = new Tab(&quot;Untitled&quot;, codeArea);\r\n        tabPane.getTabs().add(tab1);\r\n        borderPane.setTop(menuBar);\r\n        borderPane.setCenter(tabPane);\r\n        borderPane.setBottom(statusbar);\r\n\r\n        Scene scene = new Scene(borderPane);\r\n        stage.setScene(scene);\r\n        stage.setMaximized(true);\r\n        stage.setTitle(&quot;Gooye&quot;);\r\n        stage.show();\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Vip2k.jpg\r\n\r\nThese are all of the errors I am receiving **(I am using Java 15, fat jar file, javafx 16)**\r\n\r\n&lt;!-- language: lang-none --&gt;   \r\n\r\n       Exception in Application start method\r\n        java.lang.reflect.InvocationTargetException\r\n        \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\r\n        \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        \tat java.base/java.lang.reflect.Method.invoke(Method.java:564)\r\n        \tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:464)\r\n        \tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:363)\r\n        \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\r\n        \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        \tat java.base/java.lang.reflect.Method.invoke(Method.java:564)\r\n        \tat java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1071)\r\n        Caused by: java.lang.RuntimeException: Exception in Application start method\r\n        \tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:900)\r\n        \tat javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:195)\r\n        \tat java.base/java.lang.Thread.run(Thread.java:832)\r\n        Caused by: java.lang.IllegalAccessError: class org.fxmisc.richtext.TextFlowExt (in unnamed module @0x47fe7806) cannot access class com.sun.javafx.text.PrismTextLayout (in module javafx.graphics) because module javafx.graphics does not export com.sun.javafx.text to unnamed module @0x47fe7806\r\n        \tat org.fxmisc.richtext.TextFlowExt.&lt;clinit&gt;(TextFlowExt.java:35)\r\n        \tat org.fxmisc.richtext.ParagraphBox.&lt;init&gt;(ParagraphBox.java:77)\r\n        \tat org.fxmisc.richtext.GenericStyledArea.createCell(GenericStyledArea.java:1176)\r\n        \tat org.fxmisc.richtext.GenericStyledArea.lambda$new$3(GenericStyledArea.java:611)\r\n        \tat org.fxmisc.flowless.CellPool.getCell(CellPool.java:20)\r\n        \tat org.fxmisc.flowless.CellListManager.cellForItem(CellListManager.java:75)\r\n        \tat org.reactfx.collection.MappedList.get(MappedList.java:27)\r\n        \tat org.reactfx.collection.MemoizationListImpl.get(MemoizationList.java:99)\r\n        \tat org.fxmisc.flowless.CellListManager.getCell(CellListManager.java:64)\r\n        \tat org.fxmisc.flowless.CellPositioner.getSizedCell(CellPositioner.java:129)\r\n        \tat org.fxmisc.flowless.CellPositioner.placeStartAt(CellPositioner.java:95)\r\n        \tat org.fxmisc.flowless.Navigator.placeStartAtMayCrop(Navigator.java:183)\r\n        \tat org.fxmisc.flowless.Navigator.visit(Navigator.java:111)\r\n        \tat org.fxmisc.flowless.StartOffStart.accept(TargetPosition.java:49)\r\n        \tat org.fxmisc.flowless.Navigator.layoutChildren(Navigator.java:67)\r\n        \tat javafx.graphics/javafx.scene.Parent.layout(Parent.java:1207)\r\n        \tat org.fxmisc.flowless.VirtualFlow.layoutChildren(VirtualFlow.java:165)\r\n        \tat javafx.graphics/javafx.scene.Parent.layout(Parent.java:1207)\r\n        \tat javafx.graphics/javafx.scene.Parent.layout(Parent.java:1214)\r\n        \tat javafx.graphics/javafx.scene.Parent.layout(Parent.java:1214)\r\n        \tat javafx.graphics/javafx.scene.Parent.layout(Parent.java:1214)\r\n        \tat javafx.graphics/javafx.scene.Parent.layout(Parent.java:1214)\r\n        \tat javafx.graphics/javafx.scene.Scene.doLayoutPass(Scene.java:576)\r\n        \tat javafx.graphics/javafx.scene.Scene.preferredSize(Scene.java:1750)\r\n        \tat javafx.graphics/javafx.scene.Scene$2.preferredSize(Scene.java:393)\r\n        \tat javafx.graphics/com.sun.javafx.scene.SceneHelper.preferredSize(SceneHelper.java:66)\r\n        \tat javafx.graphics/javafx.stage.Window$12.invalidated(Window.java:1111)\r\n        \tat javafx.base/javafx.beans.property.BooleanPropertyBase.markInvalid(BooleanPropertyBase.java:110)\r\n        \tat javafx.base/javafx.beans.property.BooleanPropertyBase.set(BooleanPropertyBase.java:145)\r\n        \tat javafx.graphics/javafx.stage.Window.setShowing(Window.java:1187)\r\n        \tat javafx.graphics/javafx.stage.Window.show(Window.java:1202)\r\n        \tat javafx.graphics/javafx.stage.Stage.show(Stage.java:273)\r\n        \tat sample.Main.start(Main.java:147)\r\n        \tat javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:846)\r\n        \tat javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:474)\r\n        \tat javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:447)\r\n        \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:391)\r\n        \tat javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:446)\r\n        \tat javafx.graphics/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\r\n        Exception running application sample.Main","title":"RichTextFx not working in JavaFX, CodeArea not not showing up (Errors)","body":"<p><a href=\"https://i.stack.imgur.com/Vip2k.jpg\" rel=\"nofollow noreferrer\">My build configs</a></p>\n<p>This is my code:</p>\n<pre><code>    MenuBar menuBar = new MenuBar();\n    Menu menu1 = new Menu(&quot;File&quot;);\n    Menu menu2 = new Menu(&quot;Edit&quot;);\n    Menu menu3 = new Menu(&quot;Project&quot;);\n    Menu menu4 = new Menu(&quot;Window&quot;);\n    Menu menu5 = new Menu(&quot;Help&quot;);\n\n    menuBar.getMenus().add(menu1);\n    menuBar.getMenus().add(menu2);\n    menuBar.getMenus().add(menu3);\n    menuBar.getMenus().add(menu4);\n    menuBar.getMenus().add(menu5);\n\n    BorderPane borderPane = new BorderPane();\n    HBox statusbar = new HBox();\n    TabPane tabPane = new TabPane();\n\n\n    CodeArea codeArea = new CodeArea();\n    codeArea.setParagraphGraphicFactory(LineNumberFactory.get(codeArea));\n    codeArea.replaceText(0, 0, sampleCode);\n\n\n    Tab tab1 = new Tab(&quot;Untitled&quot;, codeArea);\n    tabPane.getTabs().add(tab1);\n    borderPane.setTop(menuBar);\n    borderPane.setCenter(tabPane);\n    borderPane.setBottom(statusbar);\n\n    Scene scene = new Scene(borderPane);\n    stage.setScene(scene);\n    stage.setMaximized(true);\n    stage.setTitle(&quot;Gooye&quot;);\n    stage.show();\n</code></pre>\n<p>These are all of the errors I am receiving <strong>(I am using Java 15, fat jar file, javafx 16)</strong></p>\n<pre class=\"lang-none prettyprint-override\"><code>   Exception in Application start method\n    java.lang.reflect.InvocationTargetException\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:564)\n        at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:464)\n        at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:363)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:564)\n        at java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1071)\n    Caused by: java.lang.RuntimeException: Exception in Application start method\n        at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:900)\n        at javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:195)\n        at java.base/java.lang.Thread.run(Thread.java:832)\n    Caused by: java.lang.IllegalAccessError: class org.fxmisc.richtext.TextFlowExt (in unnamed module @0x47fe7806) cannot access class com.sun.javafx.text.PrismTextLayout (in module javafx.graphics) because module javafx.graphics does not export com.sun.javafx.text to unnamed module @0x47fe7806\n        at org.fxmisc.richtext.TextFlowExt.&lt;clinit&gt;(TextFlowExt.java:35)\n        at org.fxmisc.richtext.ParagraphBox.&lt;init&gt;(ParagraphBox.java:77)\n        at org.fxmisc.richtext.GenericStyledArea.createCell(GenericStyledArea.java:1176)\n        at org.fxmisc.richtext.GenericStyledArea.lambda$new$3(GenericStyledArea.java:611)\n        at org.fxmisc.flowless.CellPool.getCell(CellPool.java:20)\n        at org.fxmisc.flowless.CellListManager.cellForItem(CellListManager.java:75)\n        at org.reactfx.collection.MappedList.get(MappedList.java:27)\n        at org.reactfx.collection.MemoizationListImpl.get(MemoizationList.java:99)\n        at org.fxmisc.flowless.CellListManager.getCell(CellListManager.java:64)\n        at org.fxmisc.flowless.CellPositioner.getSizedCell(CellPositioner.java:129)\n        at org.fxmisc.flowless.CellPositioner.placeStartAt(CellPositioner.java:95)\n        at org.fxmisc.flowless.Navigator.placeStartAtMayCrop(Navigator.java:183)\n        at org.fxmisc.flowless.Navigator.visit(Navigator.java:111)\n        at org.fxmisc.flowless.StartOffStart.accept(TargetPosition.java:49)\n        at org.fxmisc.flowless.Navigator.layoutChildren(Navigator.java:67)\n        at javafx.graphics/javafx.scene.Parent.layout(Parent.java:1207)\n        at org.fxmisc.flowless.VirtualFlow.layoutChildren(VirtualFlow.java:165)\n        at javafx.graphics/javafx.scene.Parent.layout(Parent.java:1207)\n        at javafx.graphics/javafx.scene.Parent.layout(Parent.java:1214)\n        at javafx.graphics/javafx.scene.Parent.layout(Parent.java:1214)\n        at javafx.graphics/javafx.scene.Parent.layout(Parent.java:1214)\n        at javafx.graphics/javafx.scene.Parent.layout(Parent.java:1214)\n        at javafx.graphics/javafx.scene.Scene.doLayoutPass(Scene.java:576)\n        at javafx.graphics/javafx.scene.Scene.preferredSize(Scene.java:1750)\n        at javafx.graphics/javafx.scene.Scene$2.preferredSize(Scene.java:393)\n        at javafx.graphics/com.sun.javafx.scene.SceneHelper.preferredSize(SceneHelper.java:66)\n        at javafx.graphics/javafx.stage.Window$12.invalidated(Window.java:1111)\n        at javafx.base/javafx.beans.property.BooleanPropertyBase.markInvalid(BooleanPropertyBase.java:110)\n        at javafx.base/javafx.beans.property.BooleanPropertyBase.set(BooleanPropertyBase.java:145)\n        at javafx.graphics/javafx.stage.Window.setShowing(Window.java:1187)\n        at javafx.graphics/javafx.stage.Window.show(Window.java:1202)\n        at javafx.graphics/javafx.stage.Stage.show(Stage.java:273)\n        at sample.Main.start(Main.java:147)\n        at javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:846)\n        at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:474)\n        at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:447)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:391)\n        at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:446)\n        at javafx.graphics/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\n    Exception running application sample.Main\n</code></pre>\n"},{"tags":["java","secure-random"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1637116221,"post_id":69998216,"comment_id":123737980,"body_markdown":"I don’t think it can be done in Java code, but you probably can write a Java program that uses SecureRandom, then use the `lsof` command to see which files the program is using.","body":"I don’t think it can be done in Java code, but you probably can write a Java program that uses SecureRandom, then use the <code>lsof</code> command to see which files the program is using."}],"answers":[{"tags":[],"owner":{"account_id":5241932,"reputation":319,"user_id":5323055,"display_name":"SAGAR BHOOSHAN"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637122082,"creation_date":1637122082,"answer_id":69998816,"question_id":69998216,"body_markdown":"Well I have done some exhaustive searching and learnt quick basics of java in an hour and wrote a code that actually spits out the requirement. Here is the code below\r\n```\r\nimport java.security.*;\r\nimport java.util.*;\r\n\r\npublic class myConfigOut {\r\n    public static void main(String[] argv) {\r\n\r\n        try {\r\n            // Trying to see which secureRandom provider we are using\r\n            System.out.println(&quot;Trying to output RNG source&quot;);\r\n            SecureRandom secureRandom = new SecureRandom();\r\n            System.out.println(&quot;Secure random source: &quot; + Security.getProperty(&quot;securerandom.source&quot;));\r\n            System.out.println(&quot;java.security.egd: &quot; + System.getProperty(&quot;java.security.egd&quot;));\r\n            System.out.println(&quot;Algorithm: &quot; + secureRandom.getAlgorithm());\r\n        } finally {\r\n            System.out.println(&quot;I&#39;m done here&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAnd the output looks like as follows:\r\n```\r\nTrying to output RNG source\r\nSecure random source: file:/dev/urandom\r\njava.security.egd: file:/dev/urandom\r\nAlgorithm: NativePRNG\r\nI&#39;m done here\r\n```\r\n\r\nThis is quite a naive code as I just skim through how to write java hello world and some other things and then wrote this simple code. I have to write the code and/or ask here because I couldn&#39;t find this requirement anywhere but my requirement is fulfilled and all good here.","title":"Java RNG - How to print out which secure random file being used from OS?","body":"<p>Well I have done some exhaustive searching and learnt quick basics of java in an hour and wrote a code that actually spits out the requirement. Here is the code below</p>\n<pre><code>import java.security.*;\nimport java.util.*;\n\npublic class myConfigOut {\n    public static void main(String[] argv) {\n\n        try {\n            // Trying to see which secureRandom provider we are using\n            System.out.println(&quot;Trying to output RNG source&quot;);\n            SecureRandom secureRandom = new SecureRandom();\n            System.out.println(&quot;Secure random source: &quot; + Security.getProperty(&quot;securerandom.source&quot;));\n            System.out.println(&quot;java.security.egd: &quot; + System.getProperty(&quot;java.security.egd&quot;));\n            System.out.println(&quot;Algorithm: &quot; + secureRandom.getAlgorithm());\n        } finally {\n            System.out.println(&quot;I'm done here&quot;);\n        }\n    }\n}\n</code></pre>\n<p>And the output looks like as follows:</p>\n<pre><code>Trying to output RNG source\nSecure random source: file:/dev/urandom\njava.security.egd: file:/dev/urandom\nAlgorithm: NativePRNG\nI'm done here\n</code></pre>\n<p>This is quite a naive code as I just skim through how to write java hello world and some other things and then wrote this simple code. I have to write the code and/or ask here because I couldn't find this requirement anywhere but my requirement is fulfilled and all good here.</p>\n"}],"owner":{"account_id":5241932,"reputation":319,"user_id":5323055,"display_name":"SAGAR BHOOSHAN"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":221,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1637122082,"creation_date":1637115651,"question_id":69998216,"body_markdown":" I have a quick question\r\n7:34\r\nI am not a developer but I wanted to test a scenario. This is about  secure RNG. I would like to have a jar file where it just `System.out.println`  which tell which securerandom.source is being used with the current JRE  this jar file is being run.\r\nThat means If I run this jar file `java -jar  myconfigOut.jar`   then it should be print to console something like \r\n```\r\nSecure Random file used = /dev/urandom (or /dev/random)   &lt;-- which ever value is being used in that JRE.\r\n```\r\nhttps://docs.oracle.com/javase/9/docs/api/java/security/SecureRandom.html\r\n\r\nI quickly searched and grabbed the oracle library wiki but have no idea how to do this coding. I am sure it will be a simple couple of lines code if we know java.\r\n\r\nHow to do this ??","title":"Java RNG - How to print out which secure random file being used from OS?","body":"<p>I have a quick question\n7:34\nI am not a developer but I wanted to test a scenario. This is about  secure RNG. I would like to have a jar file where it just <code>System.out.println</code>  which tell which securerandom.source is being used with the current JRE  this jar file is being run.\nThat means If I run this jar file <code>java -jar  myconfigOut.jar</code>   then it should be print to console something like</p>\n<pre><code>Secure Random file used = /dev/urandom (or /dev/random)   &lt;-- which ever value is being used in that JRE.\n</code></pre>\n<p><a href=\"https://docs.oracle.com/javase/9/docs/api/java/security/SecureRandom.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/9/docs/api/java/security/SecureRandom.html</a></p>\n<p>I quickly searched and grabbed the oracle library wiki but have no idea how to do this coding. I am sure it will be a simple couple of lines code if we know java.</p>\n<p>How to do this ??</p>\n"},{"tags":["javascript","java"],"answers":[{"tags":[],"owner":{"account_id":15736659,"reputation":442,"user_id":11355399,"display_name":"Huhngut"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637121585,"creation_date":1623397492,"answer_id":67933115,"question_id":67933026,"body_markdown":"If you have a WebServer and your page isn&#39;t static you can create an image with the phone number and overlay this image with FFmpeg.\r\n\r\nYou could also display the phone number on top of youre video but It won&#39;t be integrated if the user can download it: https://brianium.github.io/watermarkjs/\r\n\r\nhttps://github.com/dotsub/videojs-watermark","title":"Adding watermark in video","body":"<p>If you have a WebServer and your page isn't static you can create an image with the phone number and overlay this image with FFmpeg.</p>\n<p>You could also display the phone number on top of youre video but It won't be integrated if the user can download it: <a href=\"https://brianium.github.io/watermarkjs/\" rel=\"nofollow noreferrer\">https://brianium.github.io/watermarkjs/</a></p>\n<p><a href=\"https://github.com/dotsub/videojs-watermark\" rel=\"nofollow noreferrer\">https://github.com/dotsub/videojs-watermark</a></p>\n"}],"owner":{"account_id":21910582,"reputation":1,"user_id":16195089,"display_name":"Vaas Montenegro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1331,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1623397540,"answer_count":1,"score":-2,"last_activity_date":1637121601,"creation_date":1623397110,"question_id":67933026,"body_markdown":"Is it possible to watermark a video with the phone number which was entered at the registration time by the subscriber in an OTT-like web platform?\r\n","title":"Adding watermark in video","body":"<p>Is it possible to watermark a video with the phone number which was entered at the registration time by the subscriber in an OTT-like web platform?</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":12262,"reputation":103374,"user_id":24054,"accept_rate":86,"display_name":"kgiannakakis"},"score":0,"creation_date":1636957270,"post_id":69970085,"comment_id":123686858,"body_markdown":"Don&#39;t do this code. Add allowed domains in application.profile.properties","body":"Don&#39;t do this code. Add allowed domains in application.profile.properties"}],"answers":[{"tags":[],"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637121440,"creation_date":1637121440,"answer_id":69998768,"question_id":69970085,"body_markdown":"Use annotation likes this\r\n\r\n```java\r\n@CrossOrigin(origins = &quot;http://localhost:8080&quot;)\r\n@GetMapping(&quot;/greeting&quot;)\r\npublic Greeting greeting(@RequestParam(required = false, defaultValue = &quot;World&quot;) String name) {\r\n    System.out.println(&quot;==== get greeting ====&quot;);\r\n\treturn new Greeting(counter.incrementAndGet(), String.format(template, name));\r\n}\r\n```\r\n\r\nsee https://spring.io/guides/gs/rest-service-cors/#controller-method-cors-configuration","title":"Removing localhost as allowed CORS origin only for the production environment?","body":"<p>Use annotation likes this</p>\n<pre class=\"lang-java prettyprint-override\"><code>@CrossOrigin(origins = &quot;http://localhost:8080&quot;)\n@GetMapping(&quot;/greeting&quot;)\npublic Greeting greeting(@RequestParam(required = false, defaultValue = &quot;World&quot;) String name) {\n    System.out.println(&quot;==== get greeting ====&quot;);\n    return new Greeting(counter.incrementAndGet(), String.format(template, name));\n}\n</code></pre>\n<p>see <a href=\"https://spring.io/guides/gs/rest-service-cors/#controller-method-cors-configuration\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/rest-service-cors/#controller-method-cors-configuration</a></p>\n"}],"owner":{"account_id":17029695,"reputation":1699,"user_id":12320109,"display_name":"Boommeister"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":262,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1637121440,"creation_date":1636956737,"question_id":69970085,"body_markdown":"For my Spring Boot Backend I have to add &quot;http://localhost:4200/&quot; to the allowed CORS origins, so that I can test my frontend aginst the deployed server.\r\nI used to remove localhost from the allowed / whitelisted CORS list before deploying my backend on the production environment. However, this is getting a bit annoying, is there a way to toggle code lines on / off in Spring Boot?\r\n\r\nMy code for the CORS Settings in :\r\n\r\n    public class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n     @Bean\r\n      CorsConfigurationSource corsConfigurationSource() {\r\n        CorsConfiguration configuration = new CorsConfiguration();\r\n        configuration.setAllowedOrigins(Arrays.asList(\r\n            ... some other domains,\r\n            &quot;http://localhost:4200/&quot;\r\n        ));\r\n        configuration.addAllowedHeader(&quot;Authorization&quot;);\r\n        configuration.addAllowedHeader(&quot;Content-Type&quot;);\r\n        configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;));\r\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n        return source;\r\n      }\r\n    }\r\n\r\nSo I would look for something like:\r\n\r\n    if (environment.name == &#39;PROD&#39;) {\r\n       configuration.setAllowedOrigins(Arrays.asList(\r\n            ... some other domains\r\n        ));\r\n    else {\r\n       configuration.setAllowedOrigins(Arrays.asList(\r\n            ... some other domains,\r\n            &quot;http://localhost:4200/&quot;\r\n        ));\r\n    }\r\n\r\nwhere I can replace a local environment file with a prod environment file during the build command, as you would do in React or Angular.","title":"Removing localhost as allowed CORS origin only for the production environment?","body":"<p>For my Spring Boot Backend I have to add &quot;http://localhost:4200/&quot; to the allowed CORS origins, so that I can test my frontend aginst the deployed server.\nI used to remove localhost from the allowed / whitelisted CORS list before deploying my backend on the production environment. However, this is getting a bit annoying, is there a way to toggle code lines on / off in Spring Boot?</p>\n<p>My code for the CORS Settings in :</p>\n<pre><code>public class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n @Bean\n  CorsConfigurationSource corsConfigurationSource() {\n    CorsConfiguration configuration = new CorsConfiguration();\n    configuration.setAllowedOrigins(Arrays.asList(\n        ... some other domains,\n        &quot;http://localhost:4200/&quot;\n    ));\n    configuration.addAllowedHeader(&quot;Authorization&quot;);\n    configuration.addAllowedHeader(&quot;Content-Type&quot;);\n    configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;));\n    UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n    source.registerCorsConfiguration(&quot;/**&quot;, configuration);\n    return source;\n  }\n}\n</code></pre>\n<p>So I would look for something like:</p>\n<pre><code>if (environment.name == 'PROD') {\n   configuration.setAllowedOrigins(Arrays.asList(\n        ... some other domains\n    ));\nelse {\n   configuration.setAllowedOrigins(Arrays.asList(\n        ... some other domains,\n        &quot;http://localhost:4200/&quot;\n    ));\n}\n</code></pre>\n<p>where I can replace a local environment file with a prod environment file during the build command, as you would do in React or Angular.</p>\n"},{"tags":["java","postgresql","jdbc","null","constraints"],"comments":[{"owner":{"account_id":1968644,"reputation":32046,"user_id":1768232,"accept_rate":81,"display_name":"durron597"},"score":0,"creation_date":1352862691,"post_id":13372422,"comment_id":18259130,"body_markdown":"Why do you have 5 question marks and only 3 `setString`? Also they seem to be out of order...","body":"Why do you have 5 question marks and only 3 <code>setString</code>? Also they seem to be out of order..."},{"owner":{"account_id":375527,"reputation":8992,"user_id":726422,"accept_rate":100,"display_name":"Glenn"},"score":0,"creation_date":1352862696,"post_id":13372422,"comment_id":18259132,"body_markdown":"You have too many question marks in your sql statement (specifying 3 columns but 5 bind parameters). Either add `id` as an insert column and remove a question mark or remove the extra question marks.","body":"You have too many question marks in your sql statement (specifying 3 columns but 5 bind parameters). Either add <code>id</code> as an insert column and remove a question mark or remove the extra question marks."},{"owner":{"account_id":2041570,"reputation":389,"user_id":1822596,"accept_rate":80,"display_name":"Maestros"},"score":0,"creation_date":1352862843,"post_id":13372422,"comment_id":18259150,"body_markdown":"Thank you for your responses! The extra question marks and the out of order issue was a copy-paste error due to a modification of the code to present a simple version of it. I corrected it.","body":"Thank you for your responses! The extra question marks and the out of order issue was a copy-paste error due to a modification of the code to present a simple version of it. I corrected it."},{"owner":{"account_id":221717,"reputation":428705,"user_id":479863,"accept_rate":75,"display_name":"mu is too short"},"score":1,"creation_date":1352865481,"post_id":13372422,"comment_id":18259666,"body_markdown":"The error doesn&#39;t make sense unless someone is rewriting your SQL behind your back. What happens if you use `(user_id, name, username, password) VALUES (DEFAULT, ?, ?, ?)`?","body":"The error doesn&#39;t make sense unless someone is rewriting your SQL behind your back. What happens if you use <code>(user_id, name, username, password) VALUES (DEFAULT, ?, ?, ?)</code>?"}],"answers":[{"tags":[],"owner":{"account_id":1968644,"reputation":32046,"user_id":1768232,"accept_rate":81,"display_name":"durron597"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1352863477,"creation_date":1352862767,"answer_id":13372458,"question_id":13372422,"body_markdown":"    String insertTableSQL = &quot;INSERT INTO USERS&quot;\r\n                + &quot;(name, username, password) VALUES&quot;\r\n                + &quot;(?,?,?)&quot;;\r\n    PreparedStatement preparedStatement = DBCon.prepareStatement(insertTableSQL);\r\n    preparedStatement.setString(1, userInfo.get(&quot;name&quot;));           \r\n    preparedStatement.setString(2, userInfo.get(&quot;username&quot;));\r\n    preparedStatement.setString(3, userInfo.get(&quot;password&quot;)));\r\n\r\n    preparedStatement.executeUpdate();\r\n\r\nNote only three question marks and now the fields line up correctly.\r\n\r\nAlso don&#39;t worry about the `NOT NULL` constraint. It will handle itself (how could it ever be `NULL`, it&#39;s `SERIAL`) and could be causing your error. Just remove it.","title":"PSQLException: ERROR: null value in column violates not-null constraint","body":"<pre><code>String insertTableSQL = \"INSERT INTO USERS\"\n            + \"(name, username, password) VALUES\"\n            + \"(?,?,?)\";\nPreparedStatement preparedStatement = DBCon.prepareStatement(insertTableSQL);\npreparedStatement.setString(1, userInfo.get(\"name\"));           \npreparedStatement.setString(2, userInfo.get(\"username\"));\npreparedStatement.setString(3, userInfo.get(\"password\")));\n\npreparedStatement.executeUpdate();\n</code></pre>\n\n<p>Note only three question marks and now the fields line up correctly.</p>\n\n<p>Also don't worry about the <code>NOT NULL</code> constraint. It will handle itself (how could it ever be <code>NULL</code>, it's <code>SERIAL</code>) and could be causing your error. Just remove it.</p>\n"},{"tags":[],"owner":{"account_id":904738,"reputation":617065,"user_id":939860,"accept_rate":100,"display_name":"Erwin Brandstetter"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1637119466,"creation_date":1352888563,"answer_id":13376964,"question_id":13372422,"body_markdown":"As @mu commented, the error message contradicts the rest of your question.  \r\nThe only reasonable explanation left is that you are, in fact, writing to a **different table**.\r\n\r\nTry:\r\n\r\n    INSERT INTO users (user_id, name, username, password)\r\n    VALUES\r\n      (1234,&#39;foo&#39;, &#39;foo&#39;, &#39;foo&#39;)&quot;;\r\n\r\nAnd check your table. Did the `INSERT` arrive at the table you expected? If not, check your settings:\r\n\r\n- IP, port, db name?\r\n- Same schema in the DB? Check your `search_path` setting.\r\n- You did not by accident double quote the table name &quot;USERS&quot;? Double-quoted identifiers are not cast to lower case. Read the chapter [Identifiers and Key Words][1] for details.. \r\n\r\nFind the other instance of table `users` and fix potential damage you may have done. :)\r\n\r\n\r\n  [1]: https://www.postgresql.org/docs/current/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS","title":"PSQLException: ERROR: null value in column violates not-null constraint","body":"<p>As @mu commented, the error message contradicts the rest of your question.<br />\nThe only reasonable explanation left is that you are, in fact, writing to a <strong>different table</strong>.</p>\n<p>Try:</p>\n<pre><code>INSERT INTO users (user_id, name, username, password)\nVALUES\n  (1234,'foo', 'foo', 'foo')&quot;;\n</code></pre>\n<p>And check your table. Did the <code>INSERT</code> arrive at the table you expected? If not, check your settings:</p>\n<ul>\n<li>IP, port, db name?</li>\n<li>Same schema in the DB? Check your <code>search_path</code> setting.</li>\n<li>You did not by accident double quote the table name &quot;USERS&quot;? Double-quoted identifiers are not cast to lower case. Read the chapter <a href=\"https://www.postgresql.org/docs/current/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS\" rel=\"nofollow noreferrer\">Identifiers and Key Words</a> for details..</li>\n</ul>\n<p>Find the other instance of table <code>users</code> and fix potential damage you may have done. :)</p>\n"},{"tags":[],"owner":{"account_id":12898503,"reputation":2596,"user_id":9328117,"display_name":"Shahid Hussain Abbasi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574681174,"creation_date":1574681174,"answer_id":59030718,"question_id":13372422,"body_markdown":"Resolved.\r\n\r\nThe problem with me was that I was having 2 column in the database and in entity there was one mapped. it happened due to sql update in properties file\r\n\r\nonce remove one and get fixed\r\n\r\n","title":"PSQLException: ERROR: null value in column violates not-null constraint","body":"<p>Resolved.</p>\n\n<p>The problem with me was that I was having 2 column in the database and in entity there was one mapped. it happened due to sql update in properties file</p>\n\n<p>once remove one and get fixed</p>\n"}],"owner":{"account_id":2041570,"reputation":389,"user_id":1822596,"accept_rate":80,"display_name":"Maestros"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40613,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":13376964,"answer_count":3,"score":12,"last_activity_date":1637119466,"creation_date":1352862514,"question_id":13372422,"body_markdown":"I am using PostgreSQL 8.4.13 on x86_64-pc-linux-gnu on Debian 4.4.5-8, 64-bit.\r\n\r\nI have created the following table:\r\n\r\n    CREATE TABLE users (\r\n    user_id \tserial PRIMARY KEY NOT NULL,\r\n    name\t \tvarchar(200),\r\n    username \tvarchar(150),\r\n    password \tvarchar(150),\r\n    );\r\n\r\nThen, using a Java application, I execute the following code:\r\n\r\n\tString insertTableSQL = &quot;INSERT INTO USERS&quot;\r\n\t\t\t\t\t+ &quot;(name, username, password) VALUES&quot;\r\n\t\t\t\t\t+ &quot;(?,?,?)&quot;;\r\n\tPreparedStatement preparedStatement = DBCon.prepareStatement(insertTableSQL);\r\n\tpreparedStatement.setString(1, userInfo.get(&quot;name&quot;));\t\t\t\r\n\tpreparedStatement.setString(2, userInfo.get(&quot;username&quot;));\r\n\tpreparedStatement.setString(3, userInfo.get(&quot;password&quot;)));\r\n\t\t\t\r\n\tpreparedStatement.executeUpdate();\r\n\r\nThe issue is that `executeUpdate()` generates the following exception:\r\n\r\n&gt;     ERROR: null value in column &quot;user_id&quot; violates not-null constraint\r\n\r\nThe weird thing is that if I execute the same insert statement using psql, it executes successfully. Why?","title":"PSQLException: ERROR: null value in column violates not-null constraint","body":"<p>I am using PostgreSQL 8.4.13 on x86_64-pc-linux-gnu on Debian 4.4.5-8, 64-bit.</p>\n<p>I have created the following table:</p>\n<pre><code>CREATE TABLE users (\nuser_id     serial PRIMARY KEY NOT NULL,\nname        varchar(200),\nusername    varchar(150),\npassword    varchar(150),\n);\n</code></pre>\n<p>Then, using a Java application, I execute the following code:</p>\n<pre><code>String insertTableSQL = &quot;INSERT INTO USERS&quot;\n                + &quot;(name, username, password) VALUES&quot;\n                + &quot;(?,?,?)&quot;;\nPreparedStatement preparedStatement = DBCon.prepareStatement(insertTableSQL);\npreparedStatement.setString(1, userInfo.get(&quot;name&quot;));           \npreparedStatement.setString(2, userInfo.get(&quot;username&quot;));\npreparedStatement.setString(3, userInfo.get(&quot;password&quot;)));\n        \npreparedStatement.executeUpdate();\n</code></pre>\n<p>The issue is that <code>executeUpdate()</code> generates the following exception:</p>\n<blockquote>\n<pre><code>ERROR: null value in column &quot;user_id&quot; violates not-null constraint\n</code></pre>\n</blockquote>\n<p>The weird thing is that if I execute the same insert statement using psql, it executes successfully. Why?</p>\n"},{"tags":["java","android","sqlite"],"comments":[{"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"score":0,"creation_date":1637117830,"post_id":69997550,"comment_id":123738216,"body_markdown":"Try saving as on all 3 files and to the same location and then using DB Browser to open. The -wal file is, if not empty, part of the database. However, saying that, if the -wal file is not empty  (or doesn&#39;t exist) then the database has not been closed, it is safer to ensure that the database is closed (and thus the -wal file should be empty or not exist).","body":"Try saving as on all 3 files and to the same location and then using DB Browser to open. The -wal file is, if not empty, part of the database. However, saying that, if the -wal file is not empty  (or doesn&#39;t exist) then the database has not been closed, it is safer to ensure that the database is closed (and thus the -wal file should be empty or not exist)."}],"answers":[{"tags":[],"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637118883,"creation_date":1637118883,"answer_id":69998525,"question_id":69997550,"body_markdown":"The symptoms you are describing are consistent with the -wal (i.e. dbName-wal) doing what it is designed to do.\r\n\r\nThe short fix is to **save all three files** NOT just the dbName file.\r\n\r\n\r\nThe better/safer fix is to **close the database**, ensuring that the database is fully committed.\r\n\r\nThe -wal file, if it exists and is not empty is part of the database. Opening just the dbName file without the -wal file will mean that some of the database is missing.\r\n\r\nThe -wal file is used for logging changes for use when a roll-back is required or requested. As such changes are first applied to the -wal file which SQLite knows to be part of the database. I the event that a rollback being required the relevant pages in the -wal file can be removed. \r\n\r\nThe changes held in the -wal file are applied to the actual database file by COMMITS some of which are actioned, by default, automatically. The automatic COMMITS may not COMMIT all changes. However, closing the database will COMMIT all changes.\r\n\r\nYou may wish to see https://sqlite.org/wal.html","title":"I can&#39;t see the latest version of my application&#39;s database","body":"<p>The symptoms you are describing are consistent with the -wal (i.e. dbName-wal) doing what it is designed to do.</p>\n<p>The short fix is to <strong>save all three files</strong> NOT just the dbName file.</p>\n<p>The better/safer fix is to <strong>close the database</strong>, ensuring that the database is fully committed.</p>\n<p>The -wal file, if it exists and is not empty is part of the database. Opening just the dbName file without the -wal file will mean that some of the database is missing.</p>\n<p>The -wal file is used for logging changes for use when a roll-back is required or requested. As such changes are first applied to the -wal file which SQLite knows to be part of the database. I the event that a rollback being required the relevant pages in the -wal file can be removed.</p>\n<p>The changes held in the -wal file are applied to the actual database file by COMMITS some of which are actioned, by default, automatically. The automatic COMMITS may not COMMIT all changes. However, closing the database will COMMIT all changes.</p>\n<p>You may wish to see <a href=\"https://sqlite.org/wal.html\" rel=\"nofollow noreferrer\">https://sqlite.org/wal.html</a></p>\n"}],"owner":{"account_id":16114085,"reputation":563,"user_id":13452141,"display_name":"JP711"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69998525,"answer_count":1,"score":1,"last_activity_date":1637118883,"creation_date":1637108128,"question_id":69997550,"body_markdown":"To check my database I always open Device File Explorer and navigate to package.name&gt; databases&gt; here I find 3 files: dbName, dbName-shm, dbName-wal. The file that I occupy is dbName, so I right click and choose &quot;Save as ...&quot; after choosing the path the file is saved, later I check it with a software called &quot;DB Browser for SQLite&quot;.\r\n\r\nI had never had problems to see my database, but about 1 week ago the problems started, because the file called &quot;dbName&quot; is never updated, how do I know that? In the column &quot;Date&quot; the last modification date of each file, dbName.shm and dbName-wal change value in &quot;Date&quot; when I tap on &quot;Synchronize&quot; but &quot;dbName&quot; keeps the creation date and time, when opening the file with &quot;DB Browser&quot; there is nothing.\r\n\r\nWhat is the problem? Has the path where my database is being saved changed?","title":"I can&#39;t see the latest version of my application&#39;s database","body":"<p>To check my database I always open Device File Explorer and navigate to package.name&gt; databases&gt; here I find 3 files: dbName, dbName-shm, dbName-wal. The file that I occupy is dbName, so I right click and choose &quot;Save as ...&quot; after choosing the path the file is saved, later I check it with a software called &quot;DB Browser for SQLite&quot;.</p>\n<p>I had never had problems to see my database, but about 1 week ago the problems started, because the file called &quot;dbName&quot; is never updated, how do I know that? In the column &quot;Date&quot; the last modification date of each file, dbName.shm and dbName-wal change value in &quot;Date&quot; when I tap on &quot;Synchronize&quot; but &quot;dbName&quot; keeps the creation date and time, when opening the file with &quot;DB Browser&quot; there is nothing.</p>\n<p>What is the problem? Has the path where my database is being saved changed?</p>\n"},{"tags":["java","android","flutter","dart"],"answers":[{"tags":[],"owner":{"account_id":20836050,"reputation":39,"user_id":15303924,"display_name":"Ershat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637118142,"creation_date":1637118142,"answer_id":69998449,"question_id":68811144,"body_markdown":"Subject(BehaviourSubject,..) in RxJava; it can help you;\r\nbut I still cannot find any class like streamcontroller in java without RxJava.","title":"What is the equivalent of Dart&#39;s StreamController in Java?","body":"<p>Subject(BehaviourSubject,..) in RxJava; it can help you;\nbut I still cannot find any class like streamcontroller in java without RxJava.</p>\n"}],"owner":{"account_id":20942655,"reputation":1,"user_id":15386321,"display_name":"Nguyễn Bảo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637118142,"creation_date":1629168807,"question_id":68811144,"body_markdown":"I have to convert the source from a Flutter project into Java Android, but i couldn&#39;t find the way to do with **StreamController**, is there any guide or advise?","title":"What is the equivalent of Dart&#39;s StreamController in Java?","body":"<p>I have to convert the source from a Flutter project into Java Android, but i couldn't find the way to do with <strong>StreamController</strong>, is there any guide or advise?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1637111990,"post_id":69997825,"comment_id":123737306,"body_markdown":"*i want to make it short because so the program will run faster* I would imagine the CPU is faster than the time it takes for you to enter the actual numbers.","body":"<i>i want to make it short because so the program will run faster</i> I would imagine the CPU is faster than the time it takes for you to enter the actual numbers."},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1637112005,"post_id":69997825,"comment_id":123737308,"body_markdown":"BTW `continute` should be `continue`","body":"BTW <code>continute</code> should be <code>continue</code>"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1637112042,"post_id":69997825,"comment_id":123737310,"body_markdown":"Also the code that is before you loop can be done in the loop","body":"Also the code that is before you loop can be done in the loop"},{"owner":{"account_id":16484056,"reputation":166,"user_id":11909972,"display_name":"Giriteja Bille"},"score":0,"creation_date":1637112285,"post_id":69997825,"comment_id":123737356,"body_markdown":"Put a variable globally and assign it in do loop and check that condition in while loop and that&#39;s how you can achieve it","body":"Put a variable globally and assign it in do loop and check that condition in while loop and that&#39;s how you can achieve it"}],"answers":[{"tags":[],"owner":{"account_id":16484056,"reputation":166,"user_id":11909972,"display_name":"Giriteja Bille"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637113469,"creation_date":1637113074,"answer_id":69997986,"question_id":69997825,"body_markdown":"        int enter=0;\r\n            do {\r\n                if(enter==0){\r\n                    System.out.print(&quot;Enter first number: &quot;);\r\n                    int fnum = sc.nextInt();\r\n                    System.out.print(&quot;Enter second number: &quot;);\r\n                    int snum = sc.nextInt();\r\n                    if (fnum &lt;= snum) {\r\n                        while (fnum &lt;= snum) {\r\n                            System.out.println(fnum);\r\n                            fnum++;\r\n                        }\r\n                    } else {\r\n                        while (fnum &gt; snum) {\r\n                            System.out.println(fnum);\r\n                            fnum--;\r\n                        }\r\n                    }\r\n                }\r\n                System.out.print(&quot;Enter 0 to continue, enter any number to end: &quot;);\r\n                enter = sc.nextInt();\r\n    \r\n            } while (enter==0);\r\n    \r\n\r\n\r\nTry this way ,your duplicated code can be removed .\r\n\r\n\r\nSo whenever you are trying to run the code based on the condition that is met by the user input , make sure that you always terminate the program inside the while loop , because `do while` and `while` are mostly used for the purpose of executing a code indefinitely until a certain condition is met . In your case , as you have to execute the code at least once , do while is a perfect choice for your program","title":"Java ask user if they want to continue a program","body":"<pre><code>    int enter=0;\n        do {\n            if(enter==0){\n                System.out.print(&quot;Enter first number: &quot;);\n                int fnum = sc.nextInt();\n                System.out.print(&quot;Enter second number: &quot;);\n                int snum = sc.nextInt();\n                if (fnum &lt;= snum) {\n                    while (fnum &lt;= snum) {\n                        System.out.println(fnum);\n                        fnum++;\n                    }\n                } else {\n                    while (fnum &gt; snum) {\n                        System.out.println(fnum);\n                        fnum--;\n                    }\n                }\n            }\n            System.out.print(&quot;Enter 0 to continue, enter any number to end: &quot;);\n            enter = sc.nextInt();\n\n        } while (enter==0);\n</code></pre>\n<p>Try this way ,your duplicated code can be removed .</p>\n<p>So whenever you are trying to run the code based on the condition that is met by the user input , make sure that you always terminate the program inside the while loop , because <code>do while</code> and <code>while</code> are mostly used for the purpose of executing a code indefinitely until a certain condition is met . In your case , as you have to execute the code at least once , do while is a perfect choice for your program</p>\n"},{"tags":[],"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637113104,"creation_date":1637113104,"answer_id":69997990,"question_id":69997825,"body_markdown":"The first step would be to think about what it is you want to repeat.  Regardless of what the user wants to do, you want to execute the loop at least once, so a `do-while` is perfect.\r\n\r\nOnce the user has input the first two values, you then want to prompt the user to determine if they want to continue or not, this forms part of your exit condition\r\n\r\n    Scanner sc = new Scanner(System.in);\r\n    String response = &quot;Y&quot;;\r\n    do {\r\n        System.out.print(&quot;Enter first number: &quot;);\r\n        int fnum = sc.nextInt();\r\n        sc.nextLine();\r\n        System.out.print(&quot;Enter second number: &quot;);\r\n        int snum = sc.nextInt();\r\n        sc.nextLine();\r\n\r\n        if (fnum &lt;= snum) {\r\n            while (fnum &lt;= snum) {\r\n                System.out.println(fnum);\r\n                fnum++;\r\n            }\r\n        } else {\r\n            while (fnum &gt;= snum) {\r\n                System.out.println(fnum);\r\n                fnum--;\r\n            }\r\n        }\r\n\r\n        System.out.println(&quot;Do you wish to try again [Y/N]?&quot;);\r\n        response = sc.nextLine();\r\n    } while (&quot;Y&quot;.equalsIgnoreCase(response));\r\n    System.out.println(&quot;************************************************&quot;);\r\n    System.out.println(&quot;************************************************&quot;);\r\n    System.out.println(&quot;******************Thank you*********************&quot;);\r\n    System.out.println(&quot;************************************************&quot;);\r\n    System.out.println(&quot;************************************************&quot;);\r\n\r\n*nb: For education reasons, I&#39;ve made use of `response` as a exit variable, you could use `sc.nextLine()` directly*\r\n\r\nSo, basically, this will continue to loop until the user inputs anything other then `Y` to the &quot;continue&quot; question (you could check for `N` as well, but that&#39;s up to you)","title":"Java ask user if they want to continue a program","body":"<p>The first step would be to think about what it is you want to repeat.  Regardless of what the user wants to do, you want to execute the loop at least once, so a <code>do-while</code> is perfect.</p>\n<p>Once the user has input the first two values, you then want to prompt the user to determine if they want to continue or not, this forms part of your exit condition</p>\n<pre><code>Scanner sc = new Scanner(System.in);\nString response = &quot;Y&quot;;\ndo {\n    System.out.print(&quot;Enter first number: &quot;);\n    int fnum = sc.nextInt();\n    sc.nextLine();\n    System.out.print(&quot;Enter second number: &quot;);\n    int snum = sc.nextInt();\n    sc.nextLine();\n\n    if (fnum &lt;= snum) {\n        while (fnum &lt;= snum) {\n            System.out.println(fnum);\n            fnum++;\n        }\n    } else {\n        while (fnum &gt;= snum) {\n            System.out.println(fnum);\n            fnum--;\n        }\n    }\n\n    System.out.println(&quot;Do you wish to try again [Y/N]?&quot;);\n    response = sc.nextLine();\n} while (&quot;Y&quot;.equalsIgnoreCase(response));\nSystem.out.println(&quot;************************************************&quot;);\nSystem.out.println(&quot;************************************************&quot;);\nSystem.out.println(&quot;******************Thank you*********************&quot;);\nSystem.out.println(&quot;************************************************&quot;);\nSystem.out.println(&quot;************************************************&quot;);\n</code></pre>\n<p><em>nb: For education reasons, I've made use of <code>response</code> as a exit variable, you could use <code>sc.nextLine()</code> directly</em></p>\n<p>So, basically, this will continue to loop until the user inputs anything other then <code>Y</code> to the &quot;continue&quot; question (you could check for <code>N</code> as well, but that's up to you)</p>\n"},{"tags":[],"owner":{"display_name":"user12937861"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637116744,"creation_date":1637116744,"answer_id":69998310,"question_id":69997825,"body_markdown":"I just do this\r\n\r\n        do {\r\n            // your code\r\n            System.out.print(&quot;Press [1] to continue: &quot;);\r\n        } while (sc.nextInt() == 1);\r\n\r\nput your code inside, it will repeat if you input 1 with the do while method","title":"Java ask user if they want to continue a program","body":"<p>I just do this</p>\n<pre><code>    do {\n        // your code\n        System.out.print(&quot;Press [1] to continue: &quot;);\n    } while (sc.nextInt() == 1);\n</code></pre>\n<p>put your code inside, it will repeat if you input 1 with the do while method</p>\n"}],"owner":{"account_id":17232762,"reputation":1,"user_id":12476939,"display_name":"Ban"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":628,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1637116744,"creation_date":1637111253,"question_id":69997825,"body_markdown":"&gt; Hello i was curious is there any alternative way to make this code short but also it will loop the program when the input is met in &quot;Enter 1 continue&quot; i want the code reading faster because its too long and i want to make it short because so the program will run faster\r\n\r\n        \r\n        System.out.print(&quot;Enter first number: &quot;);\r\n        fnum = sc.nextInt();\r\n        System.out.print(&quot;Enter second number: &quot;);\r\n        snum = sc.nextInt();\r\n        \r\n        if (fnum &lt;= snum) {\r\n            while (fnum &lt;= snum) {\r\n                System.out.println(fnum);\r\n                fnum++;\r\n            }\r\n        } else {\r\n            while (fnum &gt;= snum) {\r\n                System.out.println(fnum);\r\n                fnum--;\r\n            }\r\n        }\r\n        do {\r\n        System.out.print(&quot;Enter 1 to continute, enter any number to end: &quot;);\r\n        enter = sc.nextInt();\r\n        if (enter == 1) {\r\n            System.out.print(&quot;Enter first number: &quot;);\r\n            fnum = sc.nextInt();\r\n            System.out.print(&quot;Enter second number: &quot;);\r\n            snum = sc.nextInt();\r\n        \r\n            if (fnum &lt;= snum) {\r\n                while (fnum &lt;= snum) {\r\n                    System.out.println(fnum);\r\n                    fnum++;\r\n                }\r\n            } else {\r\n                while (fnum &gt;= snum) {\r\n                    System.out.println(fnum);\r\n                    fnum--;\r\n                }\r\n            }\r\n          } else {\r\n            System.out.println(&quot;************************************************&quot;);\r\n            System.out.println(&quot;************************************************&quot;);\r\n            System.out.println(&quot;******************Thank you*********************&quot;);\r\n            System.out.println(&quot;************************************************&quot;);\r\n            System.out.println(&quot;************************************************&quot;);\r\n            System.exit(0);\r\n        }\r\n       } while (enter == 1);\r\n   }\r\n}","title":"Java ask user if they want to continue a program","body":"<blockquote>\n<p>Hello i was curious is there any alternative way to make this code short but also it will loop the program when the input is met in &quot;Enter 1 continue&quot; i want the code reading faster because its too long and i want to make it short because so the program will run faster</p>\n</blockquote>\n<pre><code>    System.out.print(&quot;Enter first number: &quot;);\n    fnum = sc.nextInt();\n    System.out.print(&quot;Enter second number: &quot;);\n    snum = sc.nextInt();\n    \n    if (fnum &lt;= snum) {\n        while (fnum &lt;= snum) {\n            System.out.println(fnum);\n            fnum++;\n        }\n    } else {\n        while (fnum &gt;= snum) {\n            System.out.println(fnum);\n            fnum--;\n        }\n    }\n    do {\n    System.out.print(&quot;Enter 1 to continute, enter any number to end: &quot;);\n    enter = sc.nextInt();\n    if (enter == 1) {\n        System.out.print(&quot;Enter first number: &quot;);\n        fnum = sc.nextInt();\n        System.out.print(&quot;Enter second number: &quot;);\n        snum = sc.nextInt();\n    \n        if (fnum &lt;= snum) {\n            while (fnum &lt;= snum) {\n                System.out.println(fnum);\n                fnum++;\n            }\n        } else {\n            while (fnum &gt;= snum) {\n                System.out.println(fnum);\n                fnum--;\n            }\n        }\n      } else {\n        System.out.println(&quot;************************************************&quot;);\n        System.out.println(&quot;************************************************&quot;);\n        System.out.println(&quot;******************Thank you*********************&quot;);\n        System.out.println(&quot;************************************************&quot;);\n        System.out.println(&quot;************************************************&quot;);\n        System.exit(0);\n    }\n   } while (enter == 1);\n</code></pre>\n<p>}\n}</p>\n"},{"tags":["java","mocking","mockito"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1637118322,"post_id":69998292,"comment_id":123738308,"body_markdown":"Have you verified that the population actually works?  Print out the value of `attr`.","body":"Have you verified that the population actually works?  Print out the value of <code>attr</code>."},{"owner":{"account_id":480617,"reputation":2495,"user_id":893952,"accept_rate":57,"display_name":"Harry Coder"},"score":3,"creation_date":1637120184,"post_id":69998292,"comment_id":123738648,"body_markdown":"Can you post your full test class?","body":"Can you post your full test class?"}],"owner":{"account_id":2281096,"reputation":497,"user_id":14995131,"display_name":"jimmy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637116518,"creation_date":1637116518,"question_id":69998292,"body_markdown":"Test keeps returning a message saying that the attr is null. Why? the attribute is populated from an .yml file\r\n\r\nI have a class like this:\r\n\r\n    @Service\r\n    public class ClassA {\r\n       private String attr;\r\n       ServiceB serviceB;\r\n\r\n       @Inject\r\n       public ClassA (ServiceB serviceB, @Value(&quot;${attr.value}&quot;) String attr) {\r\n          this.attr = attr;\r\n          this.serviceB = serviceB;\r\n       }\r\n\r\n       public void methodX() {\r\n\r\n          try {\r\n              serviceB.process(attr);\r\n          } catch (Exception e) {\r\n              log.error(&quot;Error running &quot;, e);\r\n          }\r\n       }\r\n     }\r\n\r\nThe test method is like this:\r\n\r\n    @Test\r\n    public void testMethodX() throws Exception {\r\n\r\n        doNothing().when(serviceB).process(eq(&quot;XXX&quot;));\r\n\r\n        serviceB.methodX();\r\n\r\n        verify(serviceB).process(eq(&quot;XXX&quot;));\r\n    }\r\n\r\n\r\nBut the test keeps returning:\r\n\r\n    Strict stubbing argument mismatch. Please check:\r\n     - this invocation of &#39;process&#39; method:\r\n        serviceB.process(\r\n        null\r\n    );","title":"Mockito keeps returning a message saying that the parameter is null. Why?","body":"<p>Test keeps returning a message saying that the attr is null. Why? the attribute is populated from an .yml file</p>\n<p>I have a class like this:</p>\n<pre><code>@Service\npublic class ClassA {\n   private String attr;\n   ServiceB serviceB;\n\n   @Inject\n   public ClassA (ServiceB serviceB, @Value(&quot;${attr.value}&quot;) String attr) {\n      this.attr = attr;\n      this.serviceB = serviceB;\n   }\n\n   public void methodX() {\n\n      try {\n          serviceB.process(attr);\n      } catch (Exception e) {\n          log.error(&quot;Error running &quot;, e);\n      }\n   }\n }\n</code></pre>\n<p>The test method is like this:</p>\n<pre><code>@Test\npublic void testMethodX() throws Exception {\n\n    doNothing().when(serviceB).process(eq(&quot;XXX&quot;));\n\n    serviceB.methodX();\n\n    verify(serviceB).process(eq(&quot;XXX&quot;));\n}\n</code></pre>\n<p>But the test keeps returning:</p>\n<pre><code>Strict stubbing argument mismatch. Please check:\n - this invocation of 'process' method:\n    serviceB.process(\n    null\n);\n</code></pre>\n"},{"tags":["java","multithreading","sockets"],"answers":[{"tags":[],"owner":{"account_id":13429972,"reputation":1807,"user_id":9690075,"display_name":"zysaaa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637115248,"creation_date":1637020170,"answer_id":69982283,"question_id":69980994,"body_markdown":"Use ```CountDownLatch```:\r\n```\r\nprivate CountDownLatch countDownLatch = new CountDownLatch(maxPlayers);\r\n```\r\nSo, after ```playerThreads.size() == maxPlayers``` reached, call ```await```:\r\n```\r\n    if (playerThreads.size() == maxPlayers) {\r\n        countDownLatch.await();\r\n        broadcast(&quot;All players have joined! Let the game begin!&quot;, null);\r\n    }\r\n```\r\n\r\nYou need to pass this ```CountDownLatch``` to every ```PlayThread```, and after ```username``` is read, call ```CountDownLatch#countDown```:\r\n\r\n```\r\n    public PlayerThread(Socket socket, GameServer gameServer, CountDownLatch countDownLatch) throws IOException {\r\n            downLatch = countDownLatch;\r\n        }\r\n\r\n        @Override\r\n        public void run() {\r\n            try {\r\n                BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));\r\n                out = new PrintWriter(socket.getOutputStream(), true);\r\n                out.println(&quot;What&#39;s your name? &quot;);\r\n                String userName = in.readLine();\r\n                downLatch.countDown();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n```","title":"Wait for client to enter name before broadcasting the server message","body":"<p>Use <code>CountDownLatch</code>:</p>\n<pre><code>private CountDownLatch countDownLatch = new CountDownLatch(maxPlayers);\n</code></pre>\n<p>So, after <code>playerThreads.size() == maxPlayers</code> reached, call <code>await</code>:</p>\n<pre><code>    if (playerThreads.size() == maxPlayers) {\n        countDownLatch.await();\n        broadcast(&quot;All players have joined! Let the game begin!&quot;, null);\n    }\n</code></pre>\n<p>You need to pass this <code>CountDownLatch</code> to every <code>PlayThread</code>, and after <code>username</code> is read, call <code>CountDownLatch#countDown</code>:</p>\n<pre><code>    public PlayerThread(Socket socket, GameServer gameServer, CountDownLatch countDownLatch) throws IOException {\n            downLatch = countDownLatch;\n        }\n\n        @Override\n        public void run() {\n            try {\n                BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n                out = new PrintWriter(socket.getOutputStream(), true);\n                out.println(&quot;What's your name? &quot;);\n                String userName = in.readLine();\n                downLatch.countDown();\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n</code></pre>\n"}],"owner":{"display_name":"user16037629"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637115248,"creation_date":1637011013,"question_id":69980994,"body_markdown":"From GameServer.java:\r\n\r\n```lang-java\r\n while (true) {\r\n            Socket clientSocket = serverSocket.accept();\r\n            PlayerThread playerThread = new PlayerThread(clientSocket, this);\r\n            playerThreads.add(playerThread);\r\n            playerThread.start();\r\n            if (playerThreads.size() == maxPlayers) {\r\n                broadcast(&quot;All players have joined! Let the game begin!&quot;, null);\r\n            }\r\n        }\r\n```\r\n\r\nFrom PlayerThread.java:\r\n```lang-java\r\n @Override\r\n    public void run() {\r\n        try {\r\n            BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));\r\n            out = new PrintWriter(socket.getOutputStream(), true);\r\n            out.println(&quot;What&#39;s your name? &quot;);\r\n            String userName = in.readLine();\r\n            Player player = new Player(userName);\r\n            gameServer.addPlayer(p);\r\n            String clientMove;\r\n            while ((clientMove = in.readLine()) != null) {\r\n                gameServer.makeMove(player, clientMove);\r\n                gameServer.broadcast(p.getName() + &quot; made the move:  &quot; + clientMove, this);\r\n            }\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n```\r\n\r\nStarting the server: \r\n\r\n[![enter image description here][1]][1]\r\n\r\nClient1 at the end: \r\n\r\n[![enter image description here][2]][2]\r\n\r\nClient2 at the end: \r\n\r\n[![enter image description here][3]][3]\r\n\r\nHow do I wait for the last client (here, client2) to enter their name before broadcasting the message? \r\n\r\nHere&#39;s the broadcast function: \r\n```lang-java\r\npublic void broadcast(String message, PlayerThread excluded) {\r\n        for (PlayerThread p : playerThreads) {\r\n            if (p != excluded)\r\n                p.sendMessage(message);\r\n        }\r\n    }\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/7EcK9.png\r\n  [2]: https://i.stack.imgur.com/SimFL.png\r\n  [3]: https://i.stack.imgur.com/0iq08.png","title":"Wait for client to enter name before broadcasting the server message","body":"<p>From GameServer.java:</p>\n<pre class=\"lang-java prettyprint-override\"><code> while (true) {\n            Socket clientSocket = serverSocket.accept();\n            PlayerThread playerThread = new PlayerThread(clientSocket, this);\n            playerThreads.add(playerThread);\n            playerThread.start();\n            if (playerThreads.size() == maxPlayers) {\n                broadcast(&quot;All players have joined! Let the game begin!&quot;, null);\n            }\n        }\n</code></pre>\n<p>From PlayerThread.java:</p>\n<pre class=\"lang-java prettyprint-override\"><code> @Override\n    public void run() {\n        try {\n            BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n            out = new PrintWriter(socket.getOutputStream(), true);\n            out.println(&quot;What's your name? &quot;);\n            String userName = in.readLine();\n            Player player = new Player(userName);\n            gameServer.addPlayer(p);\n            String clientMove;\n            while ((clientMove = in.readLine()) != null) {\n                gameServer.makeMove(player, clientMove);\n                gameServer.broadcast(p.getName() + &quot; made the move:  &quot; + clientMove, this);\n            }\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p>Starting the server:</p>\n<p><a href=\"https://i.stack.imgur.com/7EcK9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7EcK9.png\" alt=\"enter image description here\" /></a></p>\n<p>Client1 at the end:</p>\n<p><a href=\"https://i.stack.imgur.com/SimFL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SimFL.png\" alt=\"enter image description here\" /></a></p>\n<p>Client2 at the end:</p>\n<p><a href=\"https://i.stack.imgur.com/0iq08.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0iq08.png\" alt=\"enter image description here\" /></a></p>\n<p>How do I wait for the last client (here, client2) to enter their name before broadcasting the message?</p>\n<p>Here's the broadcast function:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void broadcast(String message, PlayerThread excluded) {\n        for (PlayerThread p : playerThreads) {\n            if (p != excluded)\n                p.sendMessage(message);\n        }\n    }\n</code></pre>\n"},{"tags":["java","mysql","sql","hibernate","jpa"],"comments":[{"owner":{"account_id":408187,"reputation":3374,"user_id":778687,"accept_rate":79,"display_name":"tusar"},"score":0,"creation_date":1401349982,"post_id":22412234,"comment_id":36852692,"body_markdown":"Hi @WiseTree, I am too facing same issue while working with grails+hibernate+MySQL. If you have a solution could you please post it? -Thanks","body":"Hi @WiseTree, I am too facing same issue while working with grails+hibernate+MySQL. If you have a solution could you please post it? -Thanks"},{"owner":{"account_id":3512468,"reputation":836,"user_id":2936471,"accept_rate":75,"display_name":"Domas Poliakas"},"score":0,"creation_date":1401350744,"post_id":22412234,"comment_id":36853030,"body_markdown":"The piece of software that I was having this issue with got postponed, so I stopped working on this before I had it figured out, unfortunately.","body":"The piece of software that I was having this issue with got postponed, so I stopped working on this before I had it figured out, unfortunately."},{"owner":{"account_id":2631869,"reputation":2215,"user_id":2277620,"accept_rate":40,"display_name":"flaschenpost"},"score":0,"creation_date":1446648129,"post_id":22412234,"comment_id":54830457,"body_markdown":"I really don&#39;t know if to laugh or to cry about such a big problem for such a simple request. The builders of JPA really must have full-heartedly hated SQL. I get the very same problem and still there is no way (other than hope nothing ever in the database gets longer than 35 days)","body":"I really don&#39;t know if to laugh or to cry about such a big problem for such a simple request. The builders of JPA really must have full-heartedly hated SQL. I get the very same problem and still there is no way (other than hope nothing ever in the database gets longer than 35 days)"}],"answers":[{"tags":[],"owner":{"account_id":84611,"reputation":265,"user_id":236395,"display_name":"Gianni"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1403700286,"creation_date":1403700286,"answer_id":24409037,"question_id":22412234,"body_markdown":"I bumped into the same problem: the `SECOND` will be surrounded by apostrophes and the query will throw an exception.\r\n\r\nI worked around it by the following code:\r\n\r\n&lt;!-- language-all: lang-java --&gt;\r\n\r\n    CriteriaBuilder builder = em.getCriteriaBuilder();\r\n    CriteriaQuery&lt;MyEntity&gt; cq = builder.createQuery( MyEntity.class );\r\n    Root&lt;MyEntity&gt; root = cq.from( MyEntity.class );\r\n\r\n    javax.persistence.criteria.Expression&lt;java.sql.Time&gt; timeDiff = builder.function(\r\n                &quot;TIMEDIFF&quot;,\r\n                java.sql.Time.class,\r\n                root.&lt;Date&gt;get( &quot;endDate&quot; ),\r\n                root.&lt;Date&gt;get( &quot;startDate&quot; ) );\r\n    javax.persistence.criteria.Expression&lt;Integer&gt; timeToSec = builder.function(\r\n                &quot;TIME_TO_SEC&quot;,\r\n                Integer.class,\r\n                timeDiff );\r\n\r\n    //lessThanOrEqualTo 60 minutes\r\n    cq.where( builder.lessThanOrEqualTo( timeToSec, 3600 ) );\r\n\r\n    return em.createQuery( cq ).getResultList();\r\n\r\nAnd this gives me the same result.","title":"Using TIMESTAMPDIFF with JPA criteria query and hibernate as the provider","body":"<p>I bumped into the same problem: the <code>SECOND</code> will be surrounded by apostrophes and the query will throw an exception.</p>\n\n<p>I worked around it by the following code:</p>\n\n\n\n<pre class=\"lang-java prettyprint-override\"><code>CriteriaBuilder builder = em.getCriteriaBuilder();\nCriteriaQuery&lt;MyEntity&gt; cq = builder.createQuery( MyEntity.class );\nRoot&lt;MyEntity&gt; root = cq.from( MyEntity.class );\n\njavax.persistence.criteria.Expression&lt;java.sql.Time&gt; timeDiff = builder.function(\n            \"TIMEDIFF\",\n            java.sql.Time.class,\n            root.&lt;Date&gt;get( \"endDate\" ),\n            root.&lt;Date&gt;get( \"startDate\" ) );\njavax.persistence.criteria.Expression&lt;Integer&gt; timeToSec = builder.function(\n            \"TIME_TO_SEC\",\n            Integer.class,\n            timeDiff );\n\n//lessThanOrEqualTo 60 minutes\ncq.where( builder.lessThanOrEqualTo( timeToSec, 3600 ) );\n\nreturn em.createQuery( cq ).getResultList();\n</code></pre>\n\n<p>And this gives me the same result.</p>\n"},{"tags":[],"owner":{"account_id":5870718,"reputation":3152,"user_id":4623129,"display_name":"Khalid Shah"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1536648265,"creation_date":1536645307,"answer_id":52269483,"question_id":22412234,"body_markdown":"Here is explanation of equivalent JPA Criteria Query of  \r\n\r\n&gt; SELECT * from calls where TIMESTAMPDIFF(SECOND, setup, released) &lt; 3600;\r\n\r\nFirst you have to create unit expression and extend it from `BasicFunctionExpression` for which take &quot;SECOND&quot; parameter as a unit and override its `rendor(RenderingContext renderingContext)` method only.\r\n\r\n\r\n    import java.io.Serializable;\r\n    import org.hibernate.query.criteria.internal.CriteriaBuilderImpl;\r\n    import org.hibernate.query.criteria.internal.compile.RenderingContext;\r\n    import org.hibernate.query.criteria.internal.expression.function.BasicFunctionExpression;\r\n    \r\n    public class UnitExpression extends BasicFunctionExpression&lt;String&gt; implements Serializable {\r\n    \r\n      public UnitExpression(CriteriaBuilderImpl criteriaBuilder, Class&lt;String&gt; javaType,\r\n          String functionName) {\r\n        super(criteriaBuilder, javaType, functionName);\r\n      }\r\n    \r\n      @Override\r\n      public String render(RenderingContext renderingContext) {\r\n        return getFunctionName();\r\n      }\r\n    }\r\n\r\nthen you use this unit expression in your JPA criteria Query.\r\n\r\n\r\n    EntityManager entityManager = emProvider.get();\r\n    CriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();\r\n    Root&lt;Calls&gt; thingyRoot = query.from(Calls.class);\r\n    \r\n        Expression&lt;String&gt; second = new UnitExpression(null, String.class, &quot;SECOND&quot;);\r\n        Expression&lt;Integer&gt; timeInSec = cb.function(\r\n            &quot;TIMESTAMPDIFF&quot;,\r\n            Integer.class,\r\n            second ,\r\n            root.&lt;Timestamp&gt;get(&quot;setup&quot;),\r\n            root.&lt;Timestamp&gt;get(&quot;release&quot;));\r\n        List&lt;Predicate&gt; conditions = new ArrayList&lt;&gt;();\r\n        conditions.add(cb.lessThan(timeInSec, 3600));\r\n        cq.where(conditions.toArray(new Predicate[]{}));\r\n        return session.createQuery(cq);\r\n\r\nIt is working.","title":"Using TIMESTAMPDIFF with JPA criteria query and hibernate as the provider","body":"<p>Here is explanation of equivalent JPA Criteria Query of  </p>\n\n<blockquote>\n  <p>SELECT * from calls where TIMESTAMPDIFF(SECOND, setup, released) &lt; 3600;</p>\n</blockquote>\n\n<p>First you have to create unit expression and extend it from <code>BasicFunctionExpression</code> for which take \"SECOND\" parameter as a unit and override its <code>rendor(RenderingContext renderingContext)</code> method only.</p>\n\n<pre><code>import java.io.Serializable;\nimport org.hibernate.query.criteria.internal.CriteriaBuilderImpl;\nimport org.hibernate.query.criteria.internal.compile.RenderingContext;\nimport org.hibernate.query.criteria.internal.expression.function.BasicFunctionExpression;\n\npublic class UnitExpression extends BasicFunctionExpression&lt;String&gt; implements Serializable {\n\n  public UnitExpression(CriteriaBuilderImpl criteriaBuilder, Class&lt;String&gt; javaType,\n      String functionName) {\n    super(criteriaBuilder, javaType, functionName);\n  }\n\n  @Override\n  public String render(RenderingContext renderingContext) {\n    return getFunctionName();\n  }\n}\n</code></pre>\n\n<p>then you use this unit expression in your JPA criteria Query.</p>\n\n<pre><code>EntityManager entityManager = emProvider.get();\nCriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();\nRoot&lt;Calls&gt; thingyRoot = query.from(Calls.class);\n\n    Expression&lt;String&gt; second = new UnitExpression(null, String.class, \"SECOND\");\n    Expression&lt;Integer&gt; timeInSec = cb.function(\n        \"TIMESTAMPDIFF\",\n        Integer.class,\n        second ,\n        root.&lt;Timestamp&gt;get(\"setup\"),\n        root.&lt;Timestamp&gt;get(\"release\"));\n    List&lt;Predicate&gt; conditions = new ArrayList&lt;&gt;();\n    conditions.add(cb.lessThan(timeInSec, 3600));\n    cq.where(conditions.toArray(new Predicate[]{}));\n    return session.createQuery(cq);\n</code></pre>\n\n<p>It is working.</p>\n"},{"tags":[],"owner":{"account_id":7513624,"reputation":323,"user_id":5707801,"display_name":"hema sundar Ginni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1542877173,"creation_date":1542877173,"answer_id":53427166,"question_id":22412234,"body_markdown":"    CASE WHEN 1=1 THEN TIMESTAMPDIFF(SECOND,startDatetime,endDatetime) ELSE 0 END\r\nMock it with case statement.","title":"Using TIMESTAMPDIFF with JPA criteria query and hibernate as the provider","body":"<pre><code>CASE WHEN 1=1 THEN TIMESTAMPDIFF(SECOND,startDatetime,endDatetime) ELSE 0 END\n</code></pre>\n\n<p>Mock it with case statement.</p>\n"},{"tags":[],"owner":{"account_id":97204,"reputation":4979,"user_id":263801,"accept_rate":74,"display_name":"Archie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637114970,"creation_date":1637114970,"answer_id":69998155,"question_id":22412234,"body_markdown":"Here&#39;s a slightly more general solution than Kalid Shah&#39;s.\r\n\r\nBasically, what we need is a custom &quot;opaque literal&quot; `Expression` class that is capable of passing through arbitrary token expressions like `MONTH`, `YEAR`, `INTERVAL 1 DAY`, etc., to MySQL as function arguments:\r\n\r\n```java\r\nimport javax.persistence.criteria.CriteriaBuilder;\r\n\r\nimport org.hibernate.query.criteria.internal.CriteriaBuilderImpl;\r\nimport org.hibernate.query.criteria.internal.compile.RenderingContext;\r\nimport org.hibernate.query.criteria.internal.expression.LiteralExpression;\r\n\r\n/**\r\n * Represents an opaque literal that gets pass through JPA unaltered into SQL.\r\n */\r\n@SuppressWarnings(&quot;serial&quot;)\r\npublic class OpaqueLiteralExpression extends LiteralExpression&lt;Void&gt; {\r\n\r\n    private final String value;\r\n\r\n    public OpaqueLiteralExpression(CriteriaBuilderImpl builder, String value) {\r\n        super(builder, Void.class, null);\r\n        if (value == null)\r\n            throw new IllegalArgumentException(&quot;null value&quot;);\r\n        this.value = value;\r\n    }\r\n\r\n// ExpressionImpl\r\n\r\n    @Override\r\n    public String render(RenderingContext renderingContext) {\r\n        return this.value;\r\n    }\r\n}\r\n```\r\n\r\nThen you can use it like this:\r\n\r\n```java\r\nfinal Expression&lt;LocalDate&gt; birthDate = student.get(Student_.birthDate);\r\nfinal Expression&lt;Integer&gt; age = builder.function(&quot;TIMESTAMPDIFF&quot;, Integer.class,\r\n  new OpaqueLiteralExpression(builder, &quot;YEAR&quot;), birthDate, LocalDate.now());\r\n```","title":"Using TIMESTAMPDIFF with JPA criteria query and hibernate as the provider","body":"<p>Here's a slightly more general solution than Kalid Shah's.</p>\n<p>Basically, what we need is a custom &quot;opaque literal&quot; <code>Expression</code> class that is capable of passing through arbitrary token expressions like <code>MONTH</code>, <code>YEAR</code>, <code>INTERVAL 1 DAY</code>, etc., to MySQL as function arguments:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.persistence.criteria.CriteriaBuilder;\n\nimport org.hibernate.query.criteria.internal.CriteriaBuilderImpl;\nimport org.hibernate.query.criteria.internal.compile.RenderingContext;\nimport org.hibernate.query.criteria.internal.expression.LiteralExpression;\n\n/**\n * Represents an opaque literal that gets pass through JPA unaltered into SQL.\n */\n@SuppressWarnings(&quot;serial&quot;)\npublic class OpaqueLiteralExpression extends LiteralExpression&lt;Void&gt; {\n\n    private final String value;\n\n    public OpaqueLiteralExpression(CriteriaBuilderImpl builder, String value) {\n        super(builder, Void.class, null);\n        if (value == null)\n            throw new IllegalArgumentException(&quot;null value&quot;);\n        this.value = value;\n    }\n\n// ExpressionImpl\n\n    @Override\n    public String render(RenderingContext renderingContext) {\n        return this.value;\n    }\n}\n</code></pre>\n<p>Then you can use it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final Expression&lt;LocalDate&gt; birthDate = student.get(Student_.birthDate);\nfinal Expression&lt;Integer&gt; age = builder.function(&quot;TIMESTAMPDIFF&quot;, Integer.class,\n  new OpaqueLiteralExpression(builder, &quot;YEAR&quot;), birthDate, LocalDate.now());\n</code></pre>\n"}],"owner":{"account_id":3512468,"reputation":836,"user_id":2936471,"accept_rate":75,"display_name":"Domas Poliakas"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6621,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":24409037,"answer_count":4,"score":11,"last_activity_date":1637114970,"creation_date":1394819195,"question_id":22412234,"body_markdown":"I have a data table with columns setup and release, both of which hold timestamps. My goal is to create an equivalent of the SQL query below using CriteriaQuery.\r\n\r\nSQL Query:`SELECT TIMESTAMPDIFF(SECOND, setup, released)) as sum_duration FROM calls`\r\n\r\nThe [CriteriaBuilder#diff()](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#diff%28javax.persistence.criteria.Expression,%20javax.persistence.criteria.Expression%29) function clearly does not work as it requires parameters that are Numbers, so I tried using [CriteriaBuilder#function](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#function%28java.lang.String,%20java.lang.Class,%20javax.persistence.criteria.Expression...%29):\r\n\r\n    EntityManager entityManager = emProvider.get();\r\n\r\n    CriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();\r\n\r\n    CriteriaQuery&lt;Integer&gt; query = criteriaBuilder.createQuery();\r\n\r\n    Root&lt;Thingy&gt; thingyRoot = query.from(Thingy.class);\r\n\r\n    Path&lt;DateTime&gt; setup = root.get(&quot;setup&quot;);\r\n    Path&lt;DateTime&gt; release = root.get(&quot;release&quot;);\r\n\r\n    Expression secondLiteral = criteriaBuilder.literal(&quot;SECOND&quot;);\r\n\r\n    Expression func = criteriaBuilder.function(&quot;TIMESTAMPDIFF&quot;, Integer.class, secondLiteral, setup, release);\r\n\r\n    entityManager.createQuery(query).getResultList();\r\n\r\nHowever, when I tried running this code it threw an exception; it appears that the literal was not rendered as a constant, but rather as a parameter:\r\n\r\n    java.lang.IllegalStateException: No data type for node: org.hibernate.hql.internal.ast.tree.MethodNode \r\n     \\-[METHOD_CALL] MethodNode: &#39;(&#39;\r\n        +-[METHOD_NAME] IdentNode: &#39;TIMESTAMPDIFF&#39; {originalText=TIMESTAMPDIFF}\r\n        \\-[EXPR_LIST] SqlNode: &#39;exprList&#39;\r\n           +-[NAMED_PARAM] ParameterNode: &#39;?&#39; {name=param0, expectedType=null}\r\n           +-[DOT] DotNode: &#39;cdr0_.setup&#39; {propertyName=setup,dereferenceType=ALL,propertyPath=setup,path=generatedAlias0.setup,tableAlias=cdr0_,className=com.vtsl.domain.CDR,classAlias=generatedAlias0}\r\n           |  +-[ALIAS_REF] IdentNode: &#39;cdr0_.id&#39; {alias=generatedAlias0, className=com.vtsl.domain.CDR, tableAlias=cdr0_}\r\n           |  \\-[IDENT] IdentNode: &#39;setup&#39; {originalText=setup}\r\n           \\-[DOT] DotNode: &#39;cdr0_.release&#39; {propertyName=release,dereferenceType=ALL,propertyPath=release,path=generatedAlias0.release,tableAlias=cdr0_,className=com.vtsl.domain.CDR,classAlias=generatedAlias0}\r\n              +-[ALIAS_REF] IdentNode: &#39;cdr0_.id&#39; {alias=generatedAlias0, className=com.vtsl.domain.CDR, tableAlias=cdr0_}\r\n              \\-[IDENT] IdentNode: &#39;release&#39; {originalText=release}\r\n\r\nSo I tried anonymously overriding the [LiteralExpression#render](https://docs.jboss.org/hibernate/orm/4.2/javadocs/org/hibernate/ejb/criteria/expression/LiteralExpression.html#render%28org.hibernate.ejb.criteria.CriteriaQueryCompiler.RenderingContext%29) to directly return the string I supply to the method, however that thew this exception.\r\n\r\n\r\n    java.lang.IllegalStateException: No data type for node: org.hibernate.hql.internal.ast.tree.MethodNode \r\n     \\-[METHOD_CALL] MethodNode: &#39;(&#39;\r\n        +-[METHOD_NAME] IdentNode: &#39;TIMESTAMPDIFF&#39; {originalText=TIMESTAMPDIFF}\r\n        \\-[EXPR_LIST] SqlNode: &#39;exprList&#39;\r\n           +-[IDENT] IdentNode: &#39;SECOND&#39; {originalText=SECOND}\r\n           +-[DOT] DotNode: &#39;cdr0_.setup&#39; {propertyName=setup,dereferenceType=ALL,propertyPath=setup,path=generatedAlias0.setup,tableAlias=cdr0_,className=com.vtsl.domain.CDR,classAlias=generatedAlias0}\r\n           |  +-[ALIAS_REF] IdentNode: &#39;cdr0_.id&#39; {alias=generatedAlias0, className=com.vtsl.domain.CDR, tableAlias=cdr0_}\r\n           |  \\-[IDENT] IdentNode: &#39;setup&#39; {originalText=setup}\r\n           \\-[DOT] DotNode: &#39;cdr0_.release&#39; {propertyName=release,dereferenceType=ALL,propertyPath=release,path=generatedAlias0.release,tableAlias=cdr0_,className=com.vtsl.domain.CDR,classAlias=generatedAlias0}\r\n              +-[ALIAS_REF] IdentNode: &#39;cdr0_.id&#39; {alias=generatedAlias0, className=com.vtsl.domain.CDR, tableAlias=cdr0_}\r\n              \\-[IDENT] IdentNode: &#39;release&#39; {originalText=release}\r\n\r\n\r\nSo the question is: How can I either fix this operation I&#39;m trying to do, or achieve the original goal?\r\n\r\nI&#39;m using Hibernate, my database is MySQL.","title":"Using TIMESTAMPDIFF with JPA criteria query and hibernate as the provider","body":"<p>I have a data table with columns setup and release, both of which hold timestamps. My goal is to create an equivalent of the SQL query below using CriteriaQuery.</p>\n\n<p>SQL Query:<code>SELECT TIMESTAMPDIFF(SECOND, setup, released)) as sum_duration FROM calls</code></p>\n\n<p>The <a href=\"http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#diff%28javax.persistence.criteria.Expression,%20javax.persistence.criteria.Expression%29\" rel=\"noreferrer\">CriteriaBuilder#diff()</a> function clearly does not work as it requires parameters that are Numbers, so I tried using <a href=\"http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#function%28java.lang.String,%20java.lang.Class,%20javax.persistence.criteria.Expression...%29\" rel=\"noreferrer\">CriteriaBuilder#function</a>:</p>\n\n<pre><code>EntityManager entityManager = emProvider.get();\n\nCriteriaBuilder criteriaBuilder = entityManager.getCriteriaBuilder();\n\nCriteriaQuery&lt;Integer&gt; query = criteriaBuilder.createQuery();\n\nRoot&lt;Thingy&gt; thingyRoot = query.from(Thingy.class);\n\nPath&lt;DateTime&gt; setup = root.get(\"setup\");\nPath&lt;DateTime&gt; release = root.get(\"release\");\n\nExpression secondLiteral = criteriaBuilder.literal(\"SECOND\");\n\nExpression func = criteriaBuilder.function(\"TIMESTAMPDIFF\", Integer.class, secondLiteral, setup, release);\n\nentityManager.createQuery(query).getResultList();\n</code></pre>\n\n<p>However, when I tried running this code it threw an exception; it appears that the literal was not rendered as a constant, but rather as a parameter:</p>\n\n<pre><code>java.lang.IllegalStateException: No data type for node: org.hibernate.hql.internal.ast.tree.MethodNode \n \\-[METHOD_CALL] MethodNode: '('\n    +-[METHOD_NAME] IdentNode: 'TIMESTAMPDIFF' {originalText=TIMESTAMPDIFF}\n    \\-[EXPR_LIST] SqlNode: 'exprList'\n       +-[NAMED_PARAM] ParameterNode: '?' {name=param0, expectedType=null}\n       +-[DOT] DotNode: 'cdr0_.setup' {propertyName=setup,dereferenceType=ALL,propertyPath=setup,path=generatedAlias0.setup,tableAlias=cdr0_,className=com.vtsl.domain.CDR,classAlias=generatedAlias0}\n       |  +-[ALIAS_REF] IdentNode: 'cdr0_.id' {alias=generatedAlias0, className=com.vtsl.domain.CDR, tableAlias=cdr0_}\n       |  \\-[IDENT] IdentNode: 'setup' {originalText=setup}\n       \\-[DOT] DotNode: 'cdr0_.release' {propertyName=release,dereferenceType=ALL,propertyPath=release,path=generatedAlias0.release,tableAlias=cdr0_,className=com.vtsl.domain.CDR,classAlias=generatedAlias0}\n          +-[ALIAS_REF] IdentNode: 'cdr0_.id' {alias=generatedAlias0, className=com.vtsl.domain.CDR, tableAlias=cdr0_}\n          \\-[IDENT] IdentNode: 'release' {originalText=release}\n</code></pre>\n\n<p>So I tried anonymously overriding the <a href=\"https://docs.jboss.org/hibernate/orm/4.2/javadocs/org/hibernate/ejb/criteria/expression/LiteralExpression.html#render%28org.hibernate.ejb.criteria.CriteriaQueryCompiler.RenderingContext%29\" rel=\"noreferrer\">LiteralExpression#render</a> to directly return the string I supply to the method, however that thew this exception.</p>\n\n<pre><code>java.lang.IllegalStateException: No data type for node: org.hibernate.hql.internal.ast.tree.MethodNode \n \\-[METHOD_CALL] MethodNode: '('\n    +-[METHOD_NAME] IdentNode: 'TIMESTAMPDIFF' {originalText=TIMESTAMPDIFF}\n    \\-[EXPR_LIST] SqlNode: 'exprList'\n       +-[IDENT] IdentNode: 'SECOND' {originalText=SECOND}\n       +-[DOT] DotNode: 'cdr0_.setup' {propertyName=setup,dereferenceType=ALL,propertyPath=setup,path=generatedAlias0.setup,tableAlias=cdr0_,className=com.vtsl.domain.CDR,classAlias=generatedAlias0}\n       |  +-[ALIAS_REF] IdentNode: 'cdr0_.id' {alias=generatedAlias0, className=com.vtsl.domain.CDR, tableAlias=cdr0_}\n       |  \\-[IDENT] IdentNode: 'setup' {originalText=setup}\n       \\-[DOT] DotNode: 'cdr0_.release' {propertyName=release,dereferenceType=ALL,propertyPath=release,path=generatedAlias0.release,tableAlias=cdr0_,className=com.vtsl.domain.CDR,classAlias=generatedAlias0}\n          +-[ALIAS_REF] IdentNode: 'cdr0_.id' {alias=generatedAlias0, className=com.vtsl.domain.CDR, tableAlias=cdr0_}\n          \\-[IDENT] IdentNode: 'release' {originalText=release}\n</code></pre>\n\n<p>So the question is: How can I either fix this operation I'm trying to do, or achieve the original goal?</p>\n\n<p>I'm using Hibernate, my database is MySQL.</p>\n"},{"tags":["java","spring","ssl","xsd"],"comments":[{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1636540847,"post_id":69911690,"comment_id":123582480,"body_markdown":"The problem with that URL is that it isn&#39;t substituted in Spring 3.2 and thus goes to the internet. Instead use http and it will resolve it from file (it is included in the jar file) and it doesn&#39;t need an internet connection.","body":"The problem with that URL is that it isn&#39;t substituted in Spring 3.2 and thus goes to the internet. Instead use http and it will resolve it from file (it is included in the jar file) and it doesn&#39;t need an internet connection."},{"owner":{"account_id":4219228,"reputation":72,"user_id":3454404,"display_name":"Al.T.Os"},"score":0,"creation_date":1636598786,"post_id":69911690,"comment_id":123602701,"body_markdown":"@M.Deinum You are right. I already saw spring-beans-3.2.xsd in spring jar. So I bolded &#39;https&#39;. I also know TLS1.0 and 1.1 is much less secure than 1.2 so I can understand they are no more supported. Question is WHY TLS version became a problem NOW and since WHEN they started not being supported.","body":"@M.Deinum You are right. I already saw spring-beans-3.2.xsd in spring jar. So I bolded &#39;https&#39;. I also know TLS1.0 and 1.1 is much less secure than 1.2 so I can understand they are no more supported. Question is WHY TLS version became a problem NOW and since WHEN they started not being supported."},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1636610986,"post_id":69911690,"comment_id":123604754,"body_markdown":"Please read my comment. The support for TLS is irrelevant here. The point is that Spring 3.2 doesn&#39;t support resolving to file for https yet (those aren&#39;t in the spring.schemas file) thus it goes to the internet instead of resolving from the jar. The latter is what shouldn;t be happening (but is because no https alias is in the spring.schemas file). With newer versions of Spring it doesn&#39;t matter if it is http or https they areboth resolved from the jar not from the internet.","body":"Please read my comment. The support for TLS is irrelevant here. The point is that Spring 3.2 doesn&#39;t support resolving to file for https yet (those aren&#39;t in the spring.schemas file) thus it goes to the internet instead of resolving from the jar. The latter is what shouldn;t be happening (but is because no https alias is in the spring.schemas file). With newer versions of Spring it doesn&#39;t matter if it is http or https they areboth resolved from the jar not from the internet."},{"owner":{"account_id":4219228,"reputation":72,"user_id":3454404,"display_name":"Al.T.Os"},"score":0,"creation_date":1636624058,"post_id":69911690,"comment_id":123608769,"body_markdown":"@M.Deinum If the url starts with &#39;https&#39; in spring 3.2.x, it doesn&#39;t resolve it. I know. To run the webapp in the current circumstance, I must change it into http and TLS is irrelevant as you said. Absolutely no argue with that. But think of this. If I add &#39;-Dhttps.protocols=TLSv1.2&#39; option and restart Tomcat, it works fine again even if it&#39;s still https. That&#39;s why I posted this question. The webapp worked fine until I restarted Tomcat yesterday even without the JVM option. And I heard from my colleague it was fine on 20, Oct. I believe something happened between 20, Oct and yesterday.","body":"@M.Deinum If the url starts with &#39;https&#39; in spring 3.2.x, it doesn&#39;t resolve it. I know. To run the webapp in the current circumstance, I must change it into http and TLS is irrelevant as you said. Absolutely no argue with that. But think of this. If I add &#39;-Dhttps.protocols=TLSv1.2&#39; option and restart Tomcat, it works fine again even if it&#39;s still https. That&#39;s why I posted this question. The webapp worked fine until I restarted Tomcat yesterday even without the JVM option. And I heard from my colleague it was fine on 20, Oct. I believe something happened between 20, Oct and yesterday."},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1636626223,"post_id":69911690,"comment_id":123609557,"body_markdown":"No you don&#39;t need to change it to https... What makes you think you need/must change it to https... It isn&#39;t a URL it is a namespace.","body":"No you don&#39;t need to change it to https... What makes you think you need/must change it to https... It isn&#39;t a URL it is a namespace."},{"owner":{"account_id":4219228,"reputation":72,"user_id":3454404,"display_name":"Al.T.Os"},"score":0,"creation_date":1636627075,"post_id":69911690,"comment_id":123609906,"body_markdown":"@M.Deinum Maybe, my english is the problem... ##### It&#39;s ok to change it to http. That will work. But it was fine with https before and now it doesn&#39;t work. That&#39;s the point. I thought &#39;https://www.springframework.org/schema/beans/spring-beans.xsd&#39; was supported with TLSv1.0 and v1.1 before but now it is supported only from over TLSv1.2.","body":"@M.Deinum Maybe, my english is the problem... ##### It&#39;s ok to change it to http. That will work. But it was fine with https before and now it doesn&#39;t work. That&#39;s the point. I thought &#39;<a href=\"https://www.springframework.org/schema/beans/spring-beans.xsd\" rel=\"nofollow noreferrer\">springframework.org/schema/beans/spring-beans.xsd</a>&#39; was supported with TLSv1.0 and v1.1 before but now it is supported only from over TLSv1.2."},{"owner":{"account_id":3192259,"reputation":117609,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1636627358,"post_id":69911690,"comment_id":123610012,"body_markdown":"If it worked then something else broke... It sholdn&#39;t even resolve it from the internet in the firest place. So TSL, nor HTTPS is the issue. The problem is why it isn&#39;t resolving it from the jar.","body":"If it worked then something else broke... It sholdn&#39;t even resolve it from the internet in the firest place. So TSL, nor HTTPS is the issue. The problem is why it isn&#39;t resolving it from the jar."},{"owner":{"account_id":4219228,"reputation":72,"user_id":3454404,"display_name":"Al.T.Os"},"score":0,"creation_date":1636685978,"post_id":69911690,"comment_id":123628771,"body_markdown":"@M.Deinum I think www.springframework.org had changed its TLS supporting policy. They supported TLSv1.0 and v1.1 before and now They doesn&#39;t.","body":"@M.Deinum I think www.springframework.org had changed its TLS supporting policy. They supported TLSv1.0 and v1.1 before and now They doesn&#39;t."}],"answers":[{"tags":[],"owner":{"account_id":4219228,"reputation":72,"user_id":3454404,"display_name":"Al.T.Os"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637114886,"creation_date":1637114886,"answer_id":69998145,"question_id":69911690,"body_markdown":"I don&#39;t know exactly when www.springframework.org stopped supporting TLSv1.0, 1.1\r\n\r\nbut I&#39;m sure it might be between 20, Oct and 10, Nov.\r\n\r\n---\r\nRecently, many browsers start to stop supporting TLSv1.0 and 1.1 because of security measure.\r\n\r\nAnd I think that&#39;s why www.springframework.org did it.\r\n\r\n---\r\nFolks.\r\n\r\nPlease DO upgrade your JDK or at least TLS in advance. ( T^T)","title":"Since when did XML Schema URL used in spring start supporting only from over TLS1.2?","body":"<p>I don't know exactly when <a href=\"http://www.springframework.org\" rel=\"nofollow noreferrer\">www.springframework.org</a> stopped supporting TLSv1.0, 1.1</p>\n<p>but I'm sure it might be between 20, Oct and 10, Nov.</p>\n<hr />\n<p>Recently, many browsers start to stop supporting TLSv1.0 and 1.1 because of security measure.</p>\n<p>And I think that's why <a href=\"http://www.springframework.org\" rel=\"nofollow noreferrer\">www.springframework.org</a> did it.</p>\n<hr />\n<p>Folks.</p>\n<p>Please DO upgrade your JDK or at least TLS in advance. ( T^T)</p>\n"}],"owner":{"account_id":4219228,"reputation":72,"user_id":3454404,"display_name":"Al.T.Os"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":159,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69998145,"answer_count":1,"score":1,"last_activity_date":1637114886,"creation_date":1636540337,"question_id":69911690,"body_markdown":"I built a web application with Spring 3.2.18.RELEASE, JDK7, and Tomcat7 before.\r\n\r\nLately I deployed some jsp files and restarted Tomcat and It showed me this error message.\r\n\r\n    Caused by: org.xml.sax.SAXParseException; lineNumber: 4; columnNumber: 130; cvc-elt.1: Cannot find the declaration of element &#39;beans&#39;.\r\n\r\nIt turned out that I set the xsi:schemaLocation to &#39;**https**://www.springframework.org/schema/beans/spring-beans.xsd&#39; \r\n\r\nand it wasn&#39;t possible to load the xml because of TLS version of JDK.\r\n\r\n---\r\n\r\nSo I googled when the schema xml stopped supporting TLS 1.0 and 1.1.\r\n\r\nbut I couldn&#39;t find any.\r\n\r\nI already got to know I need to upgrade Spring, JDK, and Tomcat by reading dozens of articles.\r\n\r\nI hope somebody can tell me **WHEN** it happened or\r\n\r\nit&#39;d be thankful at least let me know where to find it.\r\n\r\nps. I couldn&#39;t find the answer on www.springframework.org. I tagged &#39;spring-boot&#39; here because it says I can get help by that.\r\n\r\n---\r\n\r\n**UPDATED**\r\n\r\nI&#39;m sorry my question was ambiguous.\r\n\r\nThanks to a number of articles and comments here, I got to know how to solve my problem and it worked great.\r\n\r\nThe reason I posted this question is that\r\n\r\nif I add -Dhttps.protocols=TLSv1.2 option, my webapp works fine just like before.\r\n\r\nIf I change it into TLSv1.0 or v1.1, I can see exactly same error message.\r\n\r\nThe webapp worked fine without it before and now it requires the option at least on JDK7.\r\n\r\nMy colleague said 20,Oct was the last time she restarted Tomcat and it was fine.\r\n\r\nSo I believe something happend between 20,Oct and yesterday.","title":"Since when did XML Schema URL used in spring start supporting only from over TLS1.2?","body":"<p>I built a web application with Spring 3.2.18.RELEASE, JDK7, and Tomcat7 before.</p>\n<p>Lately I deployed some jsp files and restarted Tomcat and It showed me this error message.</p>\n<pre><code>Caused by: org.xml.sax.SAXParseException; lineNumber: 4; columnNumber: 130; cvc-elt.1: Cannot find the declaration of element 'beans'.\n</code></pre>\n<p>It turned out that I set the xsi:schemaLocation to '<strong>https</strong>://www.springframework.org/schema/beans/spring-beans.xsd'</p>\n<p>and it wasn't possible to load the xml because of TLS version of JDK.</p>\n<hr />\n<p>So I googled when the schema xml stopped supporting TLS 1.0 and 1.1.</p>\n<p>but I couldn't find any.</p>\n<p>I already got to know I need to upgrade Spring, JDK, and Tomcat by reading dozens of articles.</p>\n<p>I hope somebody can tell me <strong>WHEN</strong> it happened or</p>\n<p>it'd be thankful at least let me know where to find it.</p>\n<p>ps. I couldn't find the answer on <a href=\"http://www.springframework.org\" rel=\"nofollow noreferrer\">www.springframework.org</a>. I tagged 'spring-boot' here because it says I can get help by that.</p>\n<hr />\n<p><strong>UPDATED</strong></p>\n<p>I'm sorry my question was ambiguous.</p>\n<p>Thanks to a number of articles and comments here, I got to know how to solve my problem and it worked great.</p>\n<p>The reason I posted this question is that</p>\n<p>if I add -Dhttps.protocols=TLSv1.2 option, my webapp works fine just like before.</p>\n<p>If I change it into TLSv1.0 or v1.1, I can see exactly same error message.</p>\n<p>The webapp worked fine without it before and now it requires the option at least on JDK7.</p>\n<p>My colleague said 20,Oct was the last time she restarted Tomcat and it was fine.</p>\n<p>So I believe something happend between 20,Oct and yesterday.</p>\n"},{"tags":["java","moxy"],"answers":[{"tags":[],"owner":{"account_id":4179744,"reputation":197,"user_id":5396654,"display_name":"user212942"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637114224,"creation_date":1637114224,"answer_id":69998099,"question_id":69042965,"body_markdown":"This was not possible with MOXY.\r\n\r\nI used spring-oxm&#39;s Jaxb2Marshaller instead of MOXy to get it working.","title":"How to use instantiated XmlAdapter in MOXy?","body":"<p>This was not possible with MOXY.</p>\n<p>I used spring-oxm's Jaxb2Marshaller instead of MOXy to get it working.</p>\n"}],"owner":{"account_id":4179744,"reputation":197,"user_id":5396654,"display_name":"user212942"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69998099,"answer_count":1,"score":1,"last_activity_date":1637114224,"creation_date":1630662811,"question_id":69042965,"body_markdown":"When using JAXB without MOXY I did Unmarshal like below.\r\n\r\n```\r\n          Unmarshaller u = this.jaxbContext.createUnmarshaller();\r\n          u.setAdapter(new Something.JaxbAdapter(this, ...));\r\n```\r\n\r\nHowever, when using MOXy&#39;s JAXBContextFactory, an error occurs at the time of createContext.\r\n\r\nBecause of @XmlJavaTypeAdapter(Something.JaxbAdapter.class).\r\n\r\n```\r\nthis.jaxbContext = org.eclipse.persistence.jaxb.JAXBContextFactory.createContext(classes.toArray(new Class[0]), Collections.emptyMap());\r\n```\r\n\r\nError:\r\n```\r\nException [EclipseLink-50063] (Eclipse Persistence Services - 3.0.2.v202107160933): org.eclipse.persistence.exceptions.JAXBException\r\nException Description: An exception occurred while attempting to instantiate XmlAdapterClass [....Somegh$JaxbAdapter]. A possible cause is that the adapter class has no zero argument constructor.\r\nInternal Exception: java.lang.InstantiationException: ....Somegh$JaxbAdapter\r\n```\r\n\r\nHow to use instantiated XmlAdapter in MOXy?","title":"How to use instantiated XmlAdapter in MOXy?","body":"<p>When using JAXB without MOXY I did Unmarshal like below.</p>\n<pre><code>          Unmarshaller u = this.jaxbContext.createUnmarshaller();\n          u.setAdapter(new Something.JaxbAdapter(this, ...));\n</code></pre>\n<p>However, when using MOXy's JAXBContextFactory, an error occurs at the time of createContext.</p>\n<p>Because of @XmlJavaTypeAdapter(Something.JaxbAdapter.class).</p>\n<pre><code>this.jaxbContext = org.eclipse.persistence.jaxb.JAXBContextFactory.createContext(classes.toArray(new Class[0]), Collections.emptyMap());\n</code></pre>\n<p>Error:</p>\n<pre><code>Exception [EclipseLink-50063] (Eclipse Persistence Services - 3.0.2.v202107160933): org.eclipse.persistence.exceptions.JAXBException\nException Description: An exception occurred while attempting to instantiate XmlAdapterClass [....Somegh$JaxbAdapter]. A possible cause is that the adapter class has no zero argument constructor.\nInternal Exception: java.lang.InstantiationException: ....Somegh$JaxbAdapter\n</code></pre>\n<p>How to use instantiated XmlAdapter in MOXy?</p>\n"},{"tags":["java","random"],"comments":[{"owner":{"account_id":18247098,"reputation":601,"user_id":13282963,"display_name":"Ciro Garc&#237;a"},"score":0,"creation_date":1637112049,"post_id":69997782,"comment_id":123737311,"body_markdown":"@ScaryWombat The random values are only used to rotate the velocity vector in the update method. Each time the code loops, the random number is different, but it is the same for each instance of the Cell class. What I mean is that Cell A and Cell B get the a single result on frame 0, then another result in frame 1, but even if it changes from one frame to another, during that frame, all the random numbers generated are the same.","body":"@ScaryWombat The random values are only used to rotate the velocity vector in the update method. Each time the code loops, the random number is different, but it is the same for each instance of the Cell class. What I mean is that Cell A and Cell B get the a single result on frame 0, then another result in frame 1, but even if it changes from one frame to another, during that frame, all the random numbers generated are the same."},{"owner":{"account_id":247613,"reputation":284090,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1637113133,"post_id":69997782,"comment_id":123737504,"body_markdown":"I suggest that you pare down this code to the simplest that still reproduces the problem, a decent [mre], and then post that code in your question. This will fully expose the problem for all to see, including yourself. Often you identify the issue yourself when attempting this most valuable exercise.","body":"I suggest that you pare down this code to the simplest that still reproduces the problem, a decent <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, and then post that code in your question. This will fully expose the problem for all to see, including yourself. Often you identify the issue yourself when attempting this most valuable exercise."},{"owner":{"account_id":18247098,"reputation":601,"user_id":13282963,"display_name":"Ciro Garc&#237;a"},"score":0,"creation_date":1637114262,"post_id":69997782,"comment_id":123737686,"body_markdown":"@ScaryWombat no, I mean the value that is passed to `vel.rotateDeg()`. I have edited the code in the question to make it clearer","body":"@ScaryWombat no, I mean the value that is passed to <code>vel.rotateDeg()</code>. I have edited the code in the question to make it clearer"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":5,"creation_date":1637114528,"post_id":69997782,"comment_id":123737730,"body_markdown":"`Vector.X` is static, so for every Cell, the `this.vel` will be pointing to the same static Object","body":"<code>Vector.X</code> is static, so for every Cell, the <code>this.vel</code> will be pointing to the same static Object"},{"owner":{"account_id":18247098,"reputation":601,"user_id":13282963,"display_name":"Ciro Garc&#237;a"},"score":0,"creation_date":1637114622,"post_id":69997782,"comment_id":123737745,"body_markdown":"Ah, I can&#39;t believe I didn&#39;t notice that, that was the problem. Thank you very much and sorry for the trouble!","body":"Ah, I can&#39;t believe I didn&#39;t notice that, that was the problem. Thank you very much and sorry for the trouble!"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1637115732,"post_id":69997782,"comment_id":123737917,"body_markdown":"That&#39;s OK, I hope that you can learn how to identify problems.","body":"That&#39;s OK, I hope that you can learn how to identify problems."}],"owner":{"account_id":18247098,"reputation":601,"user_id":13282963,"display_name":"Ciro Garc&#237;a"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637114074,"creation_date":1637110781,"question_id":69997782,"body_markdown":"I&#39;m trying to create a particle that wanders around by randomly rotating its velocity vector. I&#39;m using LibGdx and Java 11.\r\n\r\nThis is my Cell class (I didn&#39;t want to name it particle):\r\n\r\n    package me.kolterdyx.testgame.custom;\r\n    \r\n    import com.badlogic.gdx.Gdx;\r\n    import com.badlogic.gdx.math.Vector2;\r\n    \r\n    \r\n    public class Cell {\r\n    \r\n        private Vector2 vel;\r\n        private float deviationFactor = 15f;\r\n    \r\n        public Cell(){\r\n            this.vel = Vector2.X;\r\n        }\r\n    \r\n    \r\n        public void update(){\r\n            float deviation = (float)(Math.random()*deviationFactor-deviationFactor/2f);\r\n            vel.rotateDeg(deviation);\r\n        }\r\n    \r\n    \r\n    }\r\n\r\n\r\nThis is my Main class:\r\n\r\n    package me.kolterdyx.testgame;\r\n    \r\n    import com.badlogic.gdx.ApplicationAdapter;\r\n    import me.kolterdyx.testgame.custom.Cell;\r\n    \r\n    public class Main extends ApplicationAdapter {\r\n    \tCell[] cells;\r\n    \r\n    \t@Override\r\n    \tpublic void create () {\r\n    \t\tcells = new Cell[2];\r\n    \t\tfor (int i = 0; i &lt; cells.length; i++) {\r\n                // Here I create a new instance for each index of the array\r\n    \t\t\tcells[i] = new Cell();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void render () {\r\n    \t\tfor(int i=0;i&lt;cells.length;i++){\r\n                //Here I update and display each cell\r\n    \t\t\tCell c = cells[i];\r\n    \t\t\tc.update();\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n\r\n\r\nAs you can see, I create two independent instances of the Cell class. However, when I run the project, all I can see is both cells following exactly the same path. They look like they are only one cell because they overlap perfectly. I&#39;ve tried creating independent Random instances using the ID of each Cell as the seed, but that has only achieved a difference of about 1.2 between the random numbers, but they are still very close and the cells never separate. What could be causing this problem?\r\n\r\n\r\n\r\nEDIT: More info\r\n\r\nI have printed the deviation from two cells and their resulting velocity angle. I have set Cell 0 to always have a deviation of 0:\r\n\r\n    Cell 0: Deviation=-0.0 | New velocity angle=0.0\r\n    Cell 1: Deviation=-3.7252638 | New velocity angle=356.27475\r\n    ---\r\n    Cell 0: Deviation=-0.0 | New velocity angle=356.27475\r\n    Cell 1: Deviation=-1.5686669 | New velocity angle=354.70605\r\n    ---\r\n    Cell 0: Deviation=0.0 | New velocity angle=354.70605\r\n    Cell 1: Deviation=3.9682944 | New velocity angle=358.67438\r\n    ---\r\n    Cell 0: Deviation=-0.0 | New velocity angle=358.67438\r\n    Cell 1: Deviation=3.6621578 | New velocity angle=2.3365214\r\n    ---\r\n    Cell 0: Deviation=-0.0 | New velocity angle=2.3365214\r\n    Cell 1: Deviation=-10.350971 | New velocity angle=351.98553\r\n    ---\r\n    Cell 0: Deviation=0.0 | New velocity angle=351.98557\r\n    Cell 1: Deviation=-8.096683 | New velocity angle=343.88885\r\n    ---\r\n    Cell 0: Deviation=-0.0 | New velocity angle=343.88885\r\n    Cell 1: Deviation=11.823002 | New velocity angle=355.71188\r\n    ---\r\n    Cell 0: Deviation=-0.0 | New velocity angle=355.71188\r\n    Cell 1: Deviation=5.809546 | New velocity angle=1.5214165\r\n\r\n\r\nFor some reason, the deviation value of Cell 1 is added to the velocity angle of both Cells, even though the deviation value is created locally inside the Cell instance in one of its methods.\r\n","title":"Math.random() returns the same number across instances [Java]","body":"<p>I'm trying to create a particle that wanders around by randomly rotating its velocity vector. I'm using LibGdx and Java 11.</p>\n<p>This is my Cell class (I didn't want to name it particle):</p>\n<pre><code>package me.kolterdyx.testgame.custom;\n\nimport com.badlogic.gdx.Gdx;\nimport com.badlogic.gdx.math.Vector2;\n\n\npublic class Cell {\n\n    private Vector2 vel;\n    private float deviationFactor = 15f;\n\n    public Cell(){\n        this.vel = Vector2.X;\n    }\n\n\n    public void update(){\n        float deviation = (float)(Math.random()*deviationFactor-deviationFactor/2f);\n        vel.rotateDeg(deviation);\n    }\n\n\n}\n</code></pre>\n<p>This is my Main class:</p>\n<pre><code>package me.kolterdyx.testgame;\n\nimport com.badlogic.gdx.ApplicationAdapter;\nimport me.kolterdyx.testgame.custom.Cell;\n\npublic class Main extends ApplicationAdapter {\n    Cell[] cells;\n\n    @Override\n    public void create () {\n        cells = new Cell[2];\n        for (int i = 0; i &lt; cells.length; i++) {\n            // Here I create a new instance for each index of the array\n            cells[i] = new Cell();\n        }\n    }\n\n    @Override\n    public void render () {\n        for(int i=0;i&lt;cells.length;i++){\n            //Here I update and display each cell\n            Cell c = cells[i];\n            c.update();\n        }\n    }\n\n}\n</code></pre>\n<p>As you can see, I create two independent instances of the Cell class. However, when I run the project, all I can see is both cells following exactly the same path. They look like they are only one cell because they overlap perfectly. I've tried creating independent Random instances using the ID of each Cell as the seed, but that has only achieved a difference of about 1.2 between the random numbers, but they are still very close and the cells never separate. What could be causing this problem?</p>\n<p>EDIT: More info</p>\n<p>I have printed the deviation from two cells and their resulting velocity angle. I have set Cell 0 to always have a deviation of 0:</p>\n<pre><code>Cell 0: Deviation=-0.0 | New velocity angle=0.0\nCell 1: Deviation=-3.7252638 | New velocity angle=356.27475\n---\nCell 0: Deviation=-0.0 | New velocity angle=356.27475\nCell 1: Deviation=-1.5686669 | New velocity angle=354.70605\n---\nCell 0: Deviation=0.0 | New velocity angle=354.70605\nCell 1: Deviation=3.9682944 | New velocity angle=358.67438\n---\nCell 0: Deviation=-0.0 | New velocity angle=358.67438\nCell 1: Deviation=3.6621578 | New velocity angle=2.3365214\n---\nCell 0: Deviation=-0.0 | New velocity angle=2.3365214\nCell 1: Deviation=-10.350971 | New velocity angle=351.98553\n---\nCell 0: Deviation=0.0 | New velocity angle=351.98557\nCell 1: Deviation=-8.096683 | New velocity angle=343.88885\n---\nCell 0: Deviation=-0.0 | New velocity angle=343.88885\nCell 1: Deviation=11.823002 | New velocity angle=355.71188\n---\nCell 0: Deviation=-0.0 | New velocity angle=355.71188\nCell 1: Deviation=5.809546 | New velocity angle=1.5214165\n</code></pre>\n<p>For some reason, the deviation value of Cell 1 is added to the velocity angle of both Cells, even though the deviation value is created locally inside the Cell instance in one of its methods.</p>\n"},{"tags":["java","deployment","websphere","jython","wsadmin"],"answers":[{"tags":[],"owner":{"account_id":4558101,"reputation":17722,"user_id":3701228,"display_name":"Gas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1415265544,"creation_date":1415265544,"answer_id":26775653,"question_id":26772080,"body_markdown":"Clear the `wsadmin.traceout` log. Then run this manually and via script and compare logs. It should give you some more hints whats wrong with the script.","title":"java.lang.IllegalArgumentException: WASX7122E: Expected &quot;-&quot; not found","body":"<p>Clear the <code>wsadmin.traceout</code> log. Then run this manually and via script and compare logs. It should give you some more hints whats wrong with the script.</p>\n"},{"tags":[],"owner":{"account_id":2418690,"reputation":41,"user_id":4221346,"display_name":"drhojun"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1415935624,"creation_date":1415935624,"answer_id":26922408,"question_id":26772080,"body_markdown":"Removing the bracket symbol [ and ] at first and end of the update option solve my problem.","title":"java.lang.IllegalArgumentException: WASX7122E: Expected &quot;-&quot; not found","body":"<p>Removing the bracket symbol [ and ] at first and end of the update option solve my problem.</p>\n"}],"owner":{"account_id":2418690,"reputation":41,"user_id":4221346,"display_name":"drhojun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1806,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1637113875,"creation_date":1415250213,"question_id":26772080,"body_markdown":"I can update the application manually by this command \r\n\r\n    AdminApp.update(&#39;CUSWS&#39;, &#39;app&#39;,  &#39;the options below&#39;)\r\n\r\n  \r\nbut when I update from the jython script\r\n\r\n    appName = &#39;\\&#39;&#39; +appName+ &#39;\\&#39;&#39;\r\n    updatetype = &#39;\\&#39;app\\&#39;&#39;\r\n    appOptions = \\&#39;&#39; +options+ &#39;\\&#39;&#39;\r\n    AdminApp.update(appName, updatetype, appOptions )\r\n\r\nI got an error below.\r\n\r\n   \r\n\r\n     java.lang.IllegalArgumentException: WASX7122E: Expected &quot;-&quot;  not found.\r\n    \r\n     &#39;[ -operation update -contents /data/CUSWS-uat-20141106.war -nopreCompileJSPs -installed.ear.destination $(APP_INSTALL_ROOT)/cusws1cell01 -distributeApp -nouseMetaDataFromBinary -nodeployejb -createMBeansForResources -noreloadEnabled -nodeployws -validateinstall warn -noprocessEmbeddedConfig -filepermission .*\\.dll=755#.*\\.so=755#.*\\.a=755#.*\\.sl=755 -noallowDispatchRemoteInclude -noallowServiceRemoteInclude -asyncRequestDispatchType DISABLED -nouseAutoLink -noenableClientModule -clientMode isolated -novalidateSchema -contextroot /CUSWS -MapModulesToServers [[ &quot;Apache-Axis&quot; CUSWS-uat-20141106.war,WEB-INF/web.xml WebSphere:cell=cusws1cell01,cluster=cuswsGWCluster+WebSphere:cell=cusws1cell01,node=cuswsIHSnode1,server=webserver1 ]] -MapWebModToVH [[ &quot;Apache-Axis&quot; CUSWS-uat-20141106.war,WEB-INF/web.xml default_host ]] -CtxRootForWebMod [[ &quot;Apache-Axis&quot; CUSWS-uat-20141106.war,WEB-INF/web.xml /CUSWS ]]]&#39;\r\n\r\nI&#39;ve tried to solve this problem for 2 days but can&#39;t find the mistake.  \r\nWhat do I miss ?\r\nPlease help, Thanks..","title":"java.lang.IllegalArgumentException: WASX7122E: Expected &quot;-&quot; not found","body":"<p>I can update the application manually by this command </p>\n\n<pre><code>AdminApp.update('CUSWS', 'app',  'the options below')\n</code></pre>\n\n<p>but when I update from the jython script</p>\n\n<pre><code>appName = '\\'' +appName+ '\\''\nupdatetype = '\\'app\\''\nappOptions = \\'' +options+ '\\''\nAdminApp.update(appName, updatetype, appOptions )\n</code></pre>\n\n<p>I got an error below.</p>\n\n<pre><code> java.lang.IllegalArgumentException: WASX7122E: Expected \"-\"  not found.\n\n '[ -operation update -contents /data/CUSWS-uat-20141106.war -nopreCompileJSPs -installed.ear.destination $(APP_INSTALL_ROOT)/cusws1cell01 -distributeApp -nouseMetaDataFromBinary -nodeployejb -createMBeansForResources -noreloadEnabled -nodeployws -validateinstall warn -noprocessEmbeddedConfig -filepermission .*\\.dll=755#.*\\.so=755#.*\\.a=755#.*\\.sl=755 -noallowDispatchRemoteInclude -noallowServiceRemoteInclude -asyncRequestDispatchType DISABLED -nouseAutoLink -noenableClientModule -clientMode isolated -novalidateSchema -contextroot /CUSWS -MapModulesToServers [[ \"Apache-Axis\" CUSWS-uat-20141106.war,WEB-INF/web.xml WebSphere:cell=cusws1cell01,cluster=cuswsGWCluster+WebSphere:cell=cusws1cell01,node=cuswsIHSnode1,server=webserver1 ]] -MapWebModToVH [[ \"Apache-Axis\" CUSWS-uat-20141106.war,WEB-INF/web.xml default_host ]] -CtxRootForWebMod [[ \"Apache-Axis\" CUSWS-uat-20141106.war,WEB-INF/web.xml /CUSWS ]]]'\n</code></pre>\n\n<p>I've tried to solve this problem for 2 days but can't find the mistake.<br>\nWhat do I miss ?\nPlease help, Thanks..</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1637116685,"post_id":69997420,"comment_id":123738061,"body_markdown":"see https://stackoverflow.com/questions/31620916/spring-boot-how-do-you-specify-an-environment-variable-that-has-dashes-in-the-a","body":"see <a href=\"https://stackoverflow.com/questions/31620916/spring-boot-how-do-you-specify-an-environment-variable-that-has-dashes-in-the-a\" title=\"spring boot how do you specify an environment variable that has dashes in the a\">stackoverflow.com/questions/31620916/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":13540458,"reputation":4811,"user_id":9768291,"display_name":"payne"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1637113690,"creation_date":1637113690,"answer_id":69998045,"question_id":69997420,"body_markdown":"Turns out &quot;suffix as key&quot; is the default behavior if I swap from `Map&lt;String, Object&gt;` to `Map&lt;String, String&gt;`.\r\n\r\nThe `Object` value isn&#39;t actually useful in our case, so that solves this problem.","title":"ConfigurationProperties for String properties with multiple dots","body":"<p>Turns out &quot;suffix as key&quot; is the default behavior if I swap from <code>Map&lt;String, Object&gt;</code> to <code>Map&lt;String, String&gt;</code>.</p>\n<p>The <code>Object</code> value isn't actually useful in our case, so that solves this problem.</p>\n"}],"owner":{"account_id":13540458,"reputation":4811,"user_id":9768291,"display_name":"payne"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":986,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69998045,"answer_count":1,"score":1,"last_activity_date":1637113690,"creation_date":1637106743,"question_id":69997420,"body_markdown":"I&#39;m trying to fix a bug in our company&#39;s homemade framework. Basically, we should be able to inject EclipseLink properties into the `EntityManager` through the following class which is part of our framework:\r\n\r\n```java\r\n@ConfigurationProperties(prefix = &quot;our.framework.eclipselink&quot;)\r\npublic class CustomEclipseLinkProperties {\r\n\r\n    private Map&lt;String, Object&gt; properties;\r\n\r\n    public Map&lt;String, Object&gt; getProperties() {\r\n        return properties;\r\n    }\r\n\r\n    public void setProperties(Map&lt;String, Object&gt; properties) {\r\n        this.properties = properties;\r\n    }\r\n\r\n    public String getBatchSize() {\r\n        return (String) properties.get(PersistenceUnitProperties.BATCH_WRITING_SIZE);\r\n    }\r\n\r\n}\r\n```\r\n\r\nOur service built on top of that framework has the following properties file (`application.properties`):\r\n\r\n```\r\nour.framework.eclipselink.properties.eclipselink.logging.level=FINEST\r\nour.framework.eclipselink.properties.eclipselink.logging.level.cache=FINEST\r\nour.framework.eclipselink.properties.eclipselink.logging.level.sql=FINEST\r\nour.framework.eclipselink.properties.eclipselink.logging.parameters=true\r\n\r\nour.framework.eclipselink.properties.eclipselink.jdbc.batch-writing.size=1000\r\nour.framework.eclipselink.properties.eclipselink.jdbc.bind-parameters=true\r\nour.framework.eclipselink.properties.eclipselink.jdbc.batch-writing=JDBC\r\n\r\nour.framework.eclipselink.properties.eclipselink.jpa.uppercase-column-names=false\r\nour.framework.eclipselink.properties.eclipselink.jpa.uppercase-columns=false\r\n```\r\n\r\nWhen I put a breakpoint after the `CustomEclipseLinkProperties` has been initialized, I can see that `getBatchSize()` returns `null`. If I look into `getProperties()`, I do see the values were detected, but they were inserted as a `LinkedHashMap`.\r\n\r\n[![Debug mode][1]][1]\r\n\r\nThe expected behavior would be that we would obtain a `Map` that would use the entire suffix as the String key, rather than getting this `LinkedHashMap` that has essentially called `String#split()` on the properties list. This would mean that the call to `getBatchSize()` would return `1000`.\r\n\r\nI&#39;ve seen a few answers such as [this one](https://stackoverflow.com/a/31051377/9768291) but they don&#39;t seem generic enough to my liking. **Is there not a way to simply get the entire suffix as the key when injected by `@ConfigurationProperties`?** Else, it seems like it would require intervention whenever we would want to support a different type of property.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nqMOU.png","title":"ConfigurationProperties for String properties with multiple dots","body":"<p>I'm trying to fix a bug in our company's homemade framework. Basically, we should be able to inject EclipseLink properties into the <code>EntityManager</code> through the following class which is part of our framework:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ConfigurationProperties(prefix = &quot;our.framework.eclipselink&quot;)\npublic class CustomEclipseLinkProperties {\n\n    private Map&lt;String, Object&gt; properties;\n\n    public Map&lt;String, Object&gt; getProperties() {\n        return properties;\n    }\n\n    public void setProperties(Map&lt;String, Object&gt; properties) {\n        this.properties = properties;\n    }\n\n    public String getBatchSize() {\n        return (String) properties.get(PersistenceUnitProperties.BATCH_WRITING_SIZE);\n    }\n\n}\n</code></pre>\n<p>Our service built on top of that framework has the following properties file (<code>application.properties</code>):</p>\n<pre><code>our.framework.eclipselink.properties.eclipselink.logging.level=FINEST\nour.framework.eclipselink.properties.eclipselink.logging.level.cache=FINEST\nour.framework.eclipselink.properties.eclipselink.logging.level.sql=FINEST\nour.framework.eclipselink.properties.eclipselink.logging.parameters=true\n\nour.framework.eclipselink.properties.eclipselink.jdbc.batch-writing.size=1000\nour.framework.eclipselink.properties.eclipselink.jdbc.bind-parameters=true\nour.framework.eclipselink.properties.eclipselink.jdbc.batch-writing=JDBC\n\nour.framework.eclipselink.properties.eclipselink.jpa.uppercase-column-names=false\nour.framework.eclipselink.properties.eclipselink.jpa.uppercase-columns=false\n</code></pre>\n<p>When I put a breakpoint after the <code>CustomEclipseLinkProperties</code> has been initialized, I can see that <code>getBatchSize()</code> returns <code>null</code>. If I look into <code>getProperties()</code>, I do see the values were detected, but they were inserted as a <code>LinkedHashMap</code>.</p>\n<p><a href=\"https://i.stack.imgur.com/nqMOU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nqMOU.png\" alt=\"Debug mode\" /></a></p>\n<p>The expected behavior would be that we would obtain a <code>Map</code> that would use the entire suffix as the String key, rather than getting this <code>LinkedHashMap</code> that has essentially called <code>String#split()</code> on the properties list. This would mean that the call to <code>getBatchSize()</code> would return <code>1000</code>.</p>\n<p>I've seen a few answers such as <a href=\"https://stackoverflow.com/a/31051377/9768291\">this one</a> but they don't seem generic enough to my liking. <strong>Is there not a way to simply get the entire suffix as the key when injected by <code>@ConfigurationProperties</code>?</strong> Else, it seems like it would require intervention whenever we would want to support a different type of property.</p>\n"},{"tags":["java","html","servlets","server","tomcat8"],"owner":{"account_id":21412352,"reputation":11,"user_id":15772240,"display_name":"Jordan Webster"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":190,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1637113063,"creation_date":1637113063,"question_id":69997983,"body_markdown":"I&#39;m trying to run a web application via tomcat 8.5 and keep getting this error after I run it. I&#39;m able to get to the static home page but navigating from there gives me this error.\r\n[Heres the file structure.][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xfonb.png\r\n\r\nThis is the code for my servlet currently:\r\n\r\n    package controllers;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    import javax.servlet.RequestDispatcher;\r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.annotation.WebServlet;\r\n    import javax.servlet.http.HttpServlet;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    \r\n    import concrete.ConcreteProject;\r\n    \r\n    /**\r\n     * Servlet implementation class ConcreteProjectServlet\r\n     */\r\n    @WebServlet(\r\n    \t\tdescription = &quot;A controller for the Concrete Project application&quot;, \r\n    \t\turlPatterns = { \r\n    \t\t\t\t&quot;/ConcreteProjectServlet&quot;, \r\n    \t\t\t\t&quot;/getSlabHTML&quot;,\r\n    \t\t\t\t&quot;/cost.jsp&quot;\r\n    \t\t})\r\n    public class ConcreteProjectServlet extends HttpServlet {\r\n    \tprivate static final long serialVersionUID = 3649273685L;\r\n           \r\n        /**\r\n         * @see HttpServlet#HttpServlet()\r\n         */\r\n        public ConcreteProjectServlet() {\r\n            super();\r\n        }\r\n    \r\n    \t/**\r\n    \t * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)\r\n    \t */\r\n    \tprotected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n    \t\t// get the input data from the request object \r\n    \t\tdouble slabWidth = Double.parseDouble(request.getParameter(&quot;slabWidth&quot;));\r\n    \t\tdouble slabLength = Double.parseDouble(request.getParameter(&quot;slabLength&quot;));\r\n    \t\tdouble slabThickness = Double.parseDouble(request.getParameter(&quot;slabThickness&quot;));\r\n    \t\tdouble bagWeight = Double.parseDouble(request.getParameter(&quot;bagWeight&quot;));\r\n    \t\t//perform any conversions on the data to make it usable in our code\r\n    \t\t//create a project object with the input data (this is one of the outputs)\r\n    \t\tConcreteProject cp = new ConcreteProject(slabWidth, slabLength, slabThickness, bagWeight);\r\n    \t\t//using the project object, create the output as a string\r\n    \t\tString projectHTML = cp.getSlabHTML();\r\n    \t\t//store the output value somewhere that the view can get it - the request object will work here\r\n    \t\trequest.setAttribute(&quot;projectHTML&quot;,projectHTML);\r\n    \t\trequest.setAttribute(&quot;cp&quot;, cp);\r\n    \t\t//pass control to the jsp view component\r\n    \t\tString url = &quot;/cost.jsp&quot;;\r\n    \t\tRequestDispatcher dispatcher = request.getRequestDispatcher(url);\r\n    \t\tdispatcher.forward(request, response);\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)\r\n    \t */\r\n    \tprotected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n    \t\tdoGet(request, response);\r\n    \t}\r\n    \r\n    }\r\n\r\nAnd for the JSP file: \r\n\r\n    &lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;\r\n        pageEncoding=&quot;UTF-8&quot;%&gt;\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n    &lt;head&gt;\r\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n    &lt;title&gt;Concrete Project Calculator&lt;/title&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    \r\n    \t&lt;h1&gt;Concrete Project Calculator&lt;/h1&gt;\r\n    \t\r\n    \t&lt;p&gt;Here are the results of the project calculations:&lt;/p&gt;\r\n    \t\r\n    \tSLAB DIMENSIONS HERE &lt;br&gt;\r\n    \t\r\n    \tNUMBER OF BAGS HERE &lt;br&gt;\r\n    \t\r\n    \tTOTAL COST HERE &lt;br&gt;\r\n    \t\r\n    \t&lt;p&gt;\r\n    \t\t&lt;a href=&quot;index.html&quot;&gt; Calculate Again &lt;/a&gt;\r\n    \t&lt;/p&gt;\r\n    \t\r\n    \r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nMy index.html:\r\n\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n    &lt;head&gt;\r\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n    \t&lt;title&gt;Concrete Project Calculator&lt;/title&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    \r\n    \t&lt;h1&gt;Concrete Project Calculator&lt;/h1&gt;\r\n    \t\r\n    \t&lt;h3&gt;Please enter the following values:&lt;/h3&gt;\r\n    \t\r\n    \t&lt;form action=&quot;getSlabHTML&quot; method=&quot;get&quot;&gt;\r\n    \t\t\r\n    \t\t&lt;p&gt;\r\n    \t\t\t&lt;label for=&quot;slabWidth&quot;&gt;\r\n    \t\t\t\tSlab Width (in feet):\r\n    \t\t\t&lt;/label&gt;\r\n    \t\t\t&lt;input type=&quot;number&quot; name=&quot;slabWidth&quot; value=&quot;&quot; min=&quot;0&quot;/&gt;\r\n    \t\t&lt;/p&gt;\r\n    \t\t\r\n    \t\t&lt;p&gt;\r\n    \t\t\t&lt;label for=&quot;slabLength&quot;&gt;\r\n    \t\t\t\tSlab Length (in feet):\r\n    \t\t\t&lt;/label&gt;\r\n    \t\t\t&lt;input type=&quot;number&quot; name=&quot;slabLength&quot; value=&quot;&quot; min=&quot;0&quot;/&gt;\r\n    \t\t&lt;/p&gt;\r\n    \t\t\r\n    \t\t&lt;p&gt;\r\n    \t\t\t&lt;label for=&quot;slabThickness&quot;&gt;\r\n    \t\t\t\tSlab Thickness (in inches):\r\n    \t\t\t&lt;/label&gt;\r\n    \t\t\t&lt;input type=&quot;number&quot; name=&quot;slabThickness&quot; value=&quot;&quot; min=&quot;0&quot;/&gt;\r\n    \t\t&lt;/p&gt;\r\n    \t\t\r\n    \t\t&lt;p&gt;\r\n    \t\t\t&lt;label&gt;\r\n    \t\t\t\tChoose a Bag Weight:&lt;br&gt;\r\n    \t\t\t&lt;/label&gt;\r\n    \t\t\t&lt;input type=&quot;radio&quot; id=&quot;80&quot; name=&quot;bagWeight&quot; value=&quot;80 lbs&quot;/&gt;\r\n    \t\t\t\t&lt;label for=&quot;80&quot;&gt; 80 lbs &lt;/label&gt;&lt;br&gt;\r\n    \t\t\t&lt;input type=&quot;radio&quot; id=&quot;60&quot; name=&quot;bagWeight&quot; value=&quot;60 lbs&quot;/&gt;\r\n    \t\t\t\t&lt;label for=&quot;60&quot;&gt; 60 lbs &lt;/label&gt;&lt;br&gt;\r\n    \t\t\t&lt;input type=&quot;radio&quot; id=&quot;50&quot; name=&quot;bagWeight&quot; value=&quot;50 lbs&quot;/&gt;\r\n    \t\t\t\t&lt;label for=&quot;50&quot;&gt; 50 lbs &lt;/label&gt;\r\n    \t\t&lt;/p&gt;\r\n    \t\t\r\n    \t\t&lt;p&gt;\r\n    \t\t\t&lt;input type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;Calculate&quot; /&gt;\r\n    \t\t\t&lt;input type=&quot;reset&quot; name=&quot;reset&quot; value=&quot;Reset&quot; /&gt;\r\n    \t\t&lt;/p&gt;\r\n    \t\t\r\n    \t\t\r\n    \t\r\n    \t&lt;/form&gt;\r\n    \r\n    &lt;/body&gt;\r\n    \r\n    &lt;/html&gt;\r\n\r\nAnd the ConcreteProject.java code:\r\n\r\n    **\r\n     * \r\n     */\r\n    package concrete;\r\n    \r\n    import java.text.NumberFormat;\r\n    \r\n    /**\r\n     * @author jordanwebster\r\n     *\r\n     */\r\n    public class ConcreteProject {\r\n    \r\n    \tprivate double slabWidth; //width of slab in feet\r\n    \tprivate double slabLength; //length of slab in feet\r\n    \tprivate double slabThickness; //thickness of slab in inches\r\n    \tprivate double bagWeight; //weight of bag chosen in lbs\r\n    \t\r\n    \t/**\r\n    \t * \r\n    \t */\r\n    \tpublic ConcreteProject() {\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * @param slabWidth\r\n    \t * @param slabLength\r\n    \t * @param slabThickness\r\n    \t * @param bagWeight\r\n    \t */\r\n    \tpublic ConcreteProject(double slabWidth, double slabLength, double slabThickness, double bagWeight) {\r\n    \t\tthis.slabWidth = slabWidth;\r\n    \t\tthis.slabLength = slabLength;\r\n    \t\tthis.slabThickness = slabThickness;\r\n    \t\tthis.bagWeight = bagWeight;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * @return the slabWidth\r\n    \t */\r\n    \tpublic double getSlabWidth() {\r\n    \t\treturn slabWidth;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * @param slabWidth the slabWidth to set\r\n    \t */\r\n    \tpublic void setSlabWidth(double slabWidth) {\r\n    \t\tthis.slabWidth = slabWidth;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * @return the slabLength\r\n    \t */\r\n    \tpublic double getSlabLength() {\r\n    \t\treturn slabLength;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * @param slabLength the slabLength to set\r\n    \t */\r\n    \tpublic void setSlabLength(double slabLength) {\r\n    \t\tthis.slabLength = slabLength;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * @return the slabThickness\r\n    \t */\r\n    \tpublic double getSlabThickness() {\r\n    \t\treturn slabThickness;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * @param slabThickness the slabThickness to set\r\n    \t */\r\n    \tpublic void setSlabThickness(double slabThickness) {\r\n    \t\tthis.slabThickness = slabThickness;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * @return slab volume based on width, length, thickness\r\n    \t */\r\n    \tpublic double getSlabVolume() {\r\n    \t\tdouble slabVolume;\r\n    \t\t\r\n    \t\tslabVolume = (this.slabWidth/3) * (this.slabLength/3)  * (this.slabThickness/36);\r\n    \t\t\r\n    \t\treturn slabVolume;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * @return the bagWeight\r\n    \t */\r\n    \tpublic double getBagWeight() {\r\n    \t\treturn bagWeight;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * @param bagWeight the bagWeight to set\r\n    \t */\r\n    \tpublic void setBagWeight(int bagWeight) {\r\n    \t\tthis.bagWeight = bagWeight;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * @return calculate bag volume by bag weight\r\n    \t */\r\n    \tpublic double getBagVolume() {\r\n    \t\tdouble bagVolume;\r\n    \t\t\r\n    \t\tif (this.bagWeight == 80) {\r\n    \t\t\tbagVolume = 0.022;\r\n    \t\t}\r\n    \t\telse if (this.bagWeight == 60) {\r\n    \t\t\tbagVolume = 0.0167;\r\n    \t\t}\r\n    \t\telse if (this.bagWeight == 50) {\r\n    \t\t\tbagVolume = 0.0138;\r\n    \t\t}\r\n    \t\telse {\r\n    \t\t\tbagVolume = 0;\r\n    \t\t}\r\n    \t\t\r\n    \t\treturn bagVolume;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * @param numBags the numBags to set\r\n    \t */\r\n    \tpublic double getNumBags() {\r\n    \t\tdouble numBags;\r\n    \t\t\r\n    \t\tnumBags = this.getSlabVolume()/this.getBagVolume();\r\n    \t\t\r\n    \t\treturn numBags;\r\n    \t}\r\n    \t\r\n    \tpublic double getTotalCost() {\r\n    \t\tdouble totalCost;\r\n    \t\tdouble costPerBag;\r\n    \t\t\r\n    \t\tif (this.bagWeight == 80) {\r\n    \t\t\tcostPerBag = 3.75;\r\n    \t\t}\r\n    \t\telse if (this.bagWeight == 60) {\r\n    \t\t\tcostPerBag = 2.83;\r\n    \t\t}\r\n    \t\telse if (this.bagWeight == 50) {\r\n    \t\t\tcostPerBag = 2.45;\r\n    \t\t}\r\n    \t\telse {\r\n    \t\t\tcostPerBag = 0;\r\n    \t\t}\r\n    \t\t\r\n    \t\ttotalCost = costPerBag * this.getNumBags();\r\n    \t\t\r\n    \t\treturn totalCost; \r\n    \t}\r\n    \t\r\n    \tpublic String getSlabHTML() {\r\n    \t\tString slabHTML = &quot;&quot;;\r\n    \t\t\r\n    \t\tNumberFormat cf = NumberFormat.getCurrencyInstance();\r\n    \t\tNumberFormat vf = NumberFormat.getInstance();\r\n    \t\t\r\n    \t\tcf.setMaximumFractionDigits(2); //rounds dollar amount to 2 decimal places\r\n    \t\tvf.setMaximumFractionDigits(4); //rounds volume to 4 decimal places\r\n    \t\t\r\n    \t\tslabHTML += &quot;&lt;h2&gt;Concrete Calculations &lt;/h2&gt;&quot;;\r\n    \t\tslabHTML += &quot;&lt;p&gt; Slab Width: &quot; + vf.format(slabWidth) + &quot; feet &lt;/p&gt;&quot;;\r\n    \t\tslabHTML += &quot;&lt;p&gt; Slab Length: &quot; + vf.format(slabLength) + &quot; feet &lt;/p&gt;&quot;;\r\n    \t\tslabHTML += &quot;&lt;p&gt; Slab Thickness: &quot; + vf.format(slabThickness) + &quot; inches &lt;/p&gt;&quot;;\r\n    \t\tslabHTML += &quot;&lt;p&gt; Slab Volume: &quot; + vf.format(this.getSlabVolume()) + &quot; cubic yards &lt;/p&gt;&quot;;\r\n    \t\tslabHTML += &quot;&lt;p&gt; Number of Bags Needed: &quot; + vf.format(this.getNumBags()) + &quot; &lt;/p&gt;&quot;;\r\n    \t\tslabHTML += &quot;&lt;p&gt; Total cost of project using &quot; + this.getBagWeight() + &quot;lb bags: &quot; + cf.format(this.getTotalCost()) + &quot; &lt;/p&gt;&quot;;\r\n    \t\t\r\n    \t\t\r\n    \t\treturn slabHTML;\r\n    \t}\r\n    \t\r\n    \t\r\n    \t\r\n    }\r\n\r\nAny help would be appreciated!\r\n\r\n","title":"Issue with &quot;The origin server did not find a current representation for the target resource or is not willing to disclose that one exists.&quot;","body":"<p>I'm trying to run a web application via tomcat 8.5 and keep getting this error after I run it. I'm able to get to the static home page but navigating from there gives me this error.\n<a href=\"https://i.stack.imgur.com/xfonb.png\" rel=\"nofollow noreferrer\">Heres the file structure.</a></p>\n<p>This is the code for my servlet currently:</p>\n<pre><code>package controllers;\n\nimport java.io.IOException;\n\nimport javax.servlet.RequestDispatcher;\nimport javax.servlet.ServletException;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport concrete.ConcreteProject;\n\n/**\n * Servlet implementation class ConcreteProjectServlet\n */\n@WebServlet(\n        description = &quot;A controller for the Concrete Project application&quot;, \n        urlPatterns = { \n                &quot;/ConcreteProjectServlet&quot;, \n                &quot;/getSlabHTML&quot;,\n                &quot;/cost.jsp&quot;\n        })\npublic class ConcreteProjectServlet extends HttpServlet {\n    private static final long serialVersionUID = 3649273685L;\n       \n    /**\n     * @see HttpServlet#HttpServlet()\n     */\n    public ConcreteProjectServlet() {\n        super();\n    }\n\n    /**\n     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)\n     */\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        // get the input data from the request object \n        double slabWidth = Double.parseDouble(request.getParameter(&quot;slabWidth&quot;));\n        double slabLength = Double.parseDouble(request.getParameter(&quot;slabLength&quot;));\n        double slabThickness = Double.parseDouble(request.getParameter(&quot;slabThickness&quot;));\n        double bagWeight = Double.parseDouble(request.getParameter(&quot;bagWeight&quot;));\n        //perform any conversions on the data to make it usable in our code\n        //create a project object with the input data (this is one of the outputs)\n        ConcreteProject cp = new ConcreteProject(slabWidth, slabLength, slabThickness, bagWeight);\n        //using the project object, create the output as a string\n        String projectHTML = cp.getSlabHTML();\n        //store the output value somewhere that the view can get it - the request object will work here\n        request.setAttribute(&quot;projectHTML&quot;,projectHTML);\n        request.setAttribute(&quot;cp&quot;, cp);\n        //pass control to the jsp view component\n        String url = &quot;/cost.jsp&quot;;\n        RequestDispatcher dispatcher = request.getRequestDispatcher(url);\n        dispatcher.forward(request, response);\n    }\n\n    /**\n     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)\n     */\n    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        doGet(request, response);\n    }\n\n}\n</code></pre>\n<p>And for the JSP file:</p>\n<pre><code>&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;\n    pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset=&quot;UTF-8&quot;&gt;\n&lt;title&gt;Concrete Project Calculator&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;h1&gt;Concrete Project Calculator&lt;/h1&gt;\n    \n    &lt;p&gt;Here are the results of the project calculations:&lt;/p&gt;\n    \n    SLAB DIMENSIONS HERE &lt;br&gt;\n    \n    NUMBER OF BAGS HERE &lt;br&gt;\n    \n    TOTAL COST HERE &lt;br&gt;\n    \n    &lt;p&gt;\n        &lt;a href=&quot;index.html&quot;&gt; Calculate Again &lt;/a&gt;\n    &lt;/p&gt;\n    \n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>My index.html:</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;title&gt;Concrete Project Calculator&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;h1&gt;Concrete Project Calculator&lt;/h1&gt;\n    \n    &lt;h3&gt;Please enter the following values:&lt;/h3&gt;\n    \n    &lt;form action=&quot;getSlabHTML&quot; method=&quot;get&quot;&gt;\n        \n        &lt;p&gt;\n            &lt;label for=&quot;slabWidth&quot;&gt;\n                Slab Width (in feet):\n            &lt;/label&gt;\n            &lt;input type=&quot;number&quot; name=&quot;slabWidth&quot; value=&quot;&quot; min=&quot;0&quot;/&gt;\n        &lt;/p&gt;\n        \n        &lt;p&gt;\n            &lt;label for=&quot;slabLength&quot;&gt;\n                Slab Length (in feet):\n            &lt;/label&gt;\n            &lt;input type=&quot;number&quot; name=&quot;slabLength&quot; value=&quot;&quot; min=&quot;0&quot;/&gt;\n        &lt;/p&gt;\n        \n        &lt;p&gt;\n            &lt;label for=&quot;slabThickness&quot;&gt;\n                Slab Thickness (in inches):\n            &lt;/label&gt;\n            &lt;input type=&quot;number&quot; name=&quot;slabThickness&quot; value=&quot;&quot; min=&quot;0&quot;/&gt;\n        &lt;/p&gt;\n        \n        &lt;p&gt;\n            &lt;label&gt;\n                Choose a Bag Weight:&lt;br&gt;\n            &lt;/label&gt;\n            &lt;input type=&quot;radio&quot; id=&quot;80&quot; name=&quot;bagWeight&quot; value=&quot;80 lbs&quot;/&gt;\n                &lt;label for=&quot;80&quot;&gt; 80 lbs &lt;/label&gt;&lt;br&gt;\n            &lt;input type=&quot;radio&quot; id=&quot;60&quot; name=&quot;bagWeight&quot; value=&quot;60 lbs&quot;/&gt;\n                &lt;label for=&quot;60&quot;&gt; 60 lbs &lt;/label&gt;&lt;br&gt;\n            &lt;input type=&quot;radio&quot; id=&quot;50&quot; name=&quot;bagWeight&quot; value=&quot;50 lbs&quot;/&gt;\n                &lt;label for=&quot;50&quot;&gt; 50 lbs &lt;/label&gt;\n        &lt;/p&gt;\n        \n        &lt;p&gt;\n            &lt;input type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;Calculate&quot; /&gt;\n            &lt;input type=&quot;reset&quot; name=&quot;reset&quot; value=&quot;Reset&quot; /&gt;\n        &lt;/p&gt;\n        \n        \n    \n    &lt;/form&gt;\n\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>\n<p>And the ConcreteProject.java code:</p>\n<pre><code>**\n * \n */\npackage concrete;\n\nimport java.text.NumberFormat;\n\n/**\n * @author jordanwebster\n *\n */\npublic class ConcreteProject {\n\n    private double slabWidth; //width of slab in feet\n    private double slabLength; //length of slab in feet\n    private double slabThickness; //thickness of slab in inches\n    private double bagWeight; //weight of bag chosen in lbs\n    \n    /**\n     * \n     */\n    public ConcreteProject() {\n    }\n\n    /**\n     * @param slabWidth\n     * @param slabLength\n     * @param slabThickness\n     * @param bagWeight\n     */\n    public ConcreteProject(double slabWidth, double slabLength, double slabThickness, double bagWeight) {\n        this.slabWidth = slabWidth;\n        this.slabLength = slabLength;\n        this.slabThickness = slabThickness;\n        this.bagWeight = bagWeight;\n    }\n\n    /**\n     * @return the slabWidth\n     */\n    public double getSlabWidth() {\n        return slabWidth;\n    }\n\n    /**\n     * @param slabWidth the slabWidth to set\n     */\n    public void setSlabWidth(double slabWidth) {\n        this.slabWidth = slabWidth;\n    }\n\n    /**\n     * @return the slabLength\n     */\n    public double getSlabLength() {\n        return slabLength;\n    }\n\n    /**\n     * @param slabLength the slabLength to set\n     */\n    public void setSlabLength(double slabLength) {\n        this.slabLength = slabLength;\n    }\n\n    /**\n     * @return the slabThickness\n     */\n    public double getSlabThickness() {\n        return slabThickness;\n    }\n\n    /**\n     * @param slabThickness the slabThickness to set\n     */\n    public void setSlabThickness(double slabThickness) {\n        this.slabThickness = slabThickness;\n    }\n\n    /**\n     * @return slab volume based on width, length, thickness\n     */\n    public double getSlabVolume() {\n        double slabVolume;\n        \n        slabVolume = (this.slabWidth/3) * (this.slabLength/3)  * (this.slabThickness/36);\n        \n        return slabVolume;\n    }\n\n    /**\n     * @return the bagWeight\n     */\n    public double getBagWeight() {\n        return bagWeight;\n    }\n\n    /**\n     * @param bagWeight the bagWeight to set\n     */\n    public void setBagWeight(int bagWeight) {\n        this.bagWeight = bagWeight;\n    }\n\n    /**\n     * @return calculate bag volume by bag weight\n     */\n    public double getBagVolume() {\n        double bagVolume;\n        \n        if (this.bagWeight == 80) {\n            bagVolume = 0.022;\n        }\n        else if (this.bagWeight == 60) {\n            bagVolume = 0.0167;\n        }\n        else if (this.bagWeight == 50) {\n            bagVolume = 0.0138;\n        }\n        else {\n            bagVolume = 0;\n        }\n        \n        return bagVolume;\n    }\n\n    /**\n     * @param numBags the numBags to set\n     */\n    public double getNumBags() {\n        double numBags;\n        \n        numBags = this.getSlabVolume()/this.getBagVolume();\n        \n        return numBags;\n    }\n    \n    public double getTotalCost() {\n        double totalCost;\n        double costPerBag;\n        \n        if (this.bagWeight == 80) {\n            costPerBag = 3.75;\n        }\n        else if (this.bagWeight == 60) {\n            costPerBag = 2.83;\n        }\n        else if (this.bagWeight == 50) {\n            costPerBag = 2.45;\n        }\n        else {\n            costPerBag = 0;\n        }\n        \n        totalCost = costPerBag * this.getNumBags();\n        \n        return totalCost; \n    }\n    \n    public String getSlabHTML() {\n        String slabHTML = &quot;&quot;;\n        \n        NumberFormat cf = NumberFormat.getCurrencyInstance();\n        NumberFormat vf = NumberFormat.getInstance();\n        \n        cf.setMaximumFractionDigits(2); //rounds dollar amount to 2 decimal places\n        vf.setMaximumFractionDigits(4); //rounds volume to 4 decimal places\n        \n        slabHTML += &quot;&lt;h2&gt;Concrete Calculations &lt;/h2&gt;&quot;;\n        slabHTML += &quot;&lt;p&gt; Slab Width: &quot; + vf.format(slabWidth) + &quot; feet &lt;/p&gt;&quot;;\n        slabHTML += &quot;&lt;p&gt; Slab Length: &quot; + vf.format(slabLength) + &quot; feet &lt;/p&gt;&quot;;\n        slabHTML += &quot;&lt;p&gt; Slab Thickness: &quot; + vf.format(slabThickness) + &quot; inches &lt;/p&gt;&quot;;\n        slabHTML += &quot;&lt;p&gt; Slab Volume: &quot; + vf.format(this.getSlabVolume()) + &quot; cubic yards &lt;/p&gt;&quot;;\n        slabHTML += &quot;&lt;p&gt; Number of Bags Needed: &quot; + vf.format(this.getNumBags()) + &quot; &lt;/p&gt;&quot;;\n        slabHTML += &quot;&lt;p&gt; Total cost of project using &quot; + this.getBagWeight() + &quot;lb bags: &quot; + cf.format(this.getTotalCost()) + &quot; &lt;/p&gt;&quot;;\n        \n        \n        return slabHTML;\n    }\n    \n    \n    \n}\n</code></pre>\n<p>Any help would be appreciated!</p>\n"},{"tags":["java","methods"],"comments":[{"owner":{"account_id":247613,"reputation":284090,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1637112075,"post_id":69997891,"comment_id":123737317,"body_markdown":"I have not heard of that term being used -- are you sure that you transcribed it correctly? Perhaps you meant accessor, or &quot;getter&quot;, method?","body":"I have not heard of that term being used -- are you sure that you transcribed it correctly? Perhaps you meant accessor, or &quot;getter&quot;, method?"},{"owner":{"account_id":667308,"reputation":46349,"user_id":1161878,"accept_rate":81,"display_name":"Gene"},"score":2,"creation_date":1637112082,"post_id":69997891,"comment_id":123737320,"body_markdown":"Hmmm.... The term &quot;getter method&quot; is very common.","body":"Hmmm.... The term &quot;getter method&quot; is very common."},{"owner":{"account_id":22329827,"reputation":1,"user_id":16551234,"display_name":"Daniya Puteri"},"score":0,"creation_date":1637112287,"post_id":69997891,"comment_id":123737357,"body_markdown":"It was on my exercise questions. The question was like &quot;Write the retriever method for each name and isMember attributes&quot;.","body":"It was on my exercise questions. The question was like &quot;Write the retriever method for each name and isMember attributes&quot;."},{"owner":{"account_id":247613,"reputation":284090,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1637112691,"post_id":69997891,"comment_id":123737425,"body_markdown":"They are probably referring to &quot;getter&quot; methods, also known as &quot;accessor&quot; methods. For example, if you have a field called, `private String myString;` you would create a `public String getMyString() { return myString; }` getter method for it. That&#39;s all.","body":"They are probably referring to &quot;getter&quot; methods, also known as &quot;accessor&quot; methods. For example, if you have a field called, <code>private String myString;</code> you would create a <code>public String getMyString() { return myString; }</code> getter method for it. That&#39;s all."}],"owner":{"account_id":22329827,"reputation":1,"user_id":16551234,"display_name":"Daniya Puteri"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":175,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1637112717,"answer_count":0,"score":0,"last_activity_date":1637111976,"creation_date":1637111976,"question_id":69997891,"body_markdown":"I just wanted to ask what is retriever method in Java? I have been searching for it on Google but still haven&#39;t got the answers. If anyone knows, how to use it on your coding?","title":"Retriever Method Java","body":"<p>I just wanted to ask what is retriever method in Java? I have been searching for it on Google but still haven't got the answers. If anyone knows, how to use it on your coding?</p>\n"},{"tags":["java","swing","fonts","jtextpane","google-fonts"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":3,"creation_date":1634620313,"post_id":69625379,"comment_id":123066516,"body_markdown":"Does this help? [Adding fonts to Swing application and include in package](https://stackoverflow.com/questions/12998604/adding-fonts-to-swing-application-and-include-in-package)","body":"Does this help? <a href=\"https://stackoverflow.com/questions/12998604/adding-fonts-to-swing-application-and-include-in-package\">Adding fonts to Swing application and include in package</a>"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1634620491,"post_id":69625379,"comment_id":123066547,"body_markdown":"Using custom fonts, for [example](https://stackoverflow.com/questions/24177348/font-awesome-with-swing/24177458#24177458); [example](https://stackoverflow.com/questions/21081586/using-a-custom-font-for-a-jlabel/21081821#21081821); [example](https://stackoverflow.com/questions/24278648/how-to-change-font-in-java-gui-application/24278825#24278825). But I suspect getting it to actually work with `JTextPane` might be a little more involved","body":"Using custom fonts, for <a href=\"https://stackoverflow.com/questions/24177348/font-awesome-with-swing/24177458#24177458\">example</a>; <a href=\"https://stackoverflow.com/questions/21081586/using-a-custom-font-for-a-jlabel/21081821#21081821\">example</a>; <a href=\"https://stackoverflow.com/questions/24278648/how-to-change-font-in-java-gui-application/24278825#24278825\">example</a>. But I suspect getting it to actually work with <code>JTextPane</code> might be a little more involved"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1634620672,"post_id":69625379,"comment_id":123066578,"body_markdown":"[Google](https://www.google.com/search?client=safari&amp;rls=en&amp;q=jtextpane+custom+font&amp;ie=UTF-8&amp;oe=UTF-8) has a number of possible useful examples as well","body":"<a href=\"https://www.google.com/search?client=safari&amp;rls=en&amp;q=jtextpane+custom+font&amp;ie=UTF-8&amp;oe=UTF-8\" rel=\"nofollow noreferrer\">Google</a> has a number of possible useful examples as well"}],"owner":{"account_id":22858256,"reputation":800,"user_id":17002772,"display_name":"Ruthvik"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1634642354,"answer_count":0,"score":1,"last_activity_date":1637111749,"creation_date":1634620049,"question_id":69625379,"body_markdown":"I was previously working on web and there for using a Google Font I can simple add the link for that and use it in CSS. Now I&#39;m working in `javax.swing`. I want to use a Google Font which I selected in JTextPane. I have downloaded the font and how do I set the font to the downloaded font?\r\n","title":"How to use font from Google Fonts in JTextPane?","body":"<p>I was previously working on web and there for using a Google Font I can simple add the link for that and use it in CSS. Now I'm working in <code>javax.swing</code>. I want to use a Google Font which I selected in JTextPane. I have downloaded the font and how do I set the font to the downloaded font?</p>\n"},{"tags":["java","debugging","java-8","java.util.concurrent"],"comments":[{"owner":{"account_id":13429972,"reputation":1807,"user_id":9690075,"display_name":"zysaaa"},"score":0,"creation_date":1637113617,"post_id":69997805,"comment_id":123737576,"body_markdown":"Where is your ```MyReentrantLock``` and ```MyAbstractQueuedSynchronizer```","body":"Where is your <code>MyReentrantLock</code> and <code>MyAbstractQueuedSynchronizer</code>"},{"owner":{"account_id":21573436,"reputation":1,"user_id":15905987,"display_name":"A Xuan of programmer"},"score":0,"creation_date":1637115984,"post_id":69997805,"comment_id":123737953,"body_markdown":"I made a complete copy of the AQS and ReentrantLock source code. The goal is to be able to add some printing to the code for easy debugging. Otherwise, exactly like the source code.","body":"I made a complete copy of the AQS and ReentrantLock source code. The goal is to be able to add some printing to the code for easy debugging. Otherwise, exactly like the source code."},{"owner":{"account_id":21573436,"reputation":1,"user_id":15905987,"display_name":"A Xuan of programmer"},"score":0,"creation_date":1637116269,"post_id":69997805,"comment_id":123737990,"body_markdown":"Hello, I am also Chinese, can I add your wechat chat?","body":"Hello, I am also Chinese, can I add your wechat chat?"},{"owner":{"account_id":13429972,"reputation":1807,"user_id":9690075,"display_name":"zysaaa"},"score":0,"creation_date":1637120234,"post_id":69997805,"comment_id":123738651,"body_markdown":"I&#39;ve reproduced what you said.  I&#39;ll take some time to look at it and answer you later.","body":"I&#39;ve reproduced what you said.  I&#39;ll take some time to look at it and answer you later."},{"owner":{"account_id":21573436,"reputation":1,"user_id":15905987,"display_name":"A Xuan of programmer"},"score":0,"creation_date":1637125904,"post_id":69997805,"comment_id":123739563,"body_markdown":"Ok, thank you. At first, I suspected that Park and Unpark had something to do with Debug, So, I looked at the JVM source code for Park and Unpark, but didn&#39;t find anything valuable. But I think it has something to do with the debug mechanism of IDEA.","body":"Ok, thank you. At first, I suspected that Park and Unpark had something to do with Debug, So, I looked at the JVM source code for Park and Unpark, but didn&#39;t find anything valuable. But I think it has something to do with the debug mechanism of IDEA."},{"owner":{"account_id":13429972,"reputation":1807,"user_id":9690075,"display_name":"zysaaa"},"score":0,"creation_date":1637126078,"post_id":69997805,"comment_id":123739585,"body_markdown":"I asked a question: https://stackoverflow.com/questions/69999199/locksupport-park-miss-an-interrupt-when-debugging-in-intellij-idea.","body":"I asked a question: <a href=\"https://stackoverflow.com/questions/69999199/locksupport-park-miss-an-interrupt-when-debugging-in-intellij-idea\" title=\"locksupport park miss an interrupt when debugging in intellij idea\">stackoverflow.com/questions/69999199/&hellip;</a>."},{"owner":{"account_id":21573436,"reputation":1,"user_id":15905987,"display_name":"A Xuan of programmer"},"score":0,"creation_date":1637131336,"post_id":69997805,"comment_id":123740681,"body_markdown":"Okay, I see that. Thank you very much","body":"Okay, I see that. Thank you very much"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1637237726,"post_id":69997805,"comment_id":123775435,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":21573436,"reputation":1,"user_id":15905987,"display_name":"A Xuan of programmer"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637111050,"creation_date":1637111050,"question_id":69997805,"body_markdown":"When I was researching AQS, I found a problem. I made a copy of the aQS and ReentrantLock source code, added printing, and then wrote a test program that, when running properly, would only print once after the thread was woken up. But when I add a breakpoint to the parkAndCheckInterrupt method, I print it twice. Why\r\n\r\n```\r\n    public static void main(String[] args) {\r\n        MyReentrantLock lock = new MyReentrantLock();\r\n        Thread thread0 = new Thread(() -&gt; {\r\n            lock.lock();\r\n            try {\r\n                Thread.sleep(3000000);\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n            lock.unlock();\r\n        });\r\n        thread0.start();\r\n\r\n        try {\r\n            Thread.sleep(3000);\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n        Thread thread1 = new Thread(() -&gt; {\r\n            lock.lock();\r\n            lock.unlock();\r\n        });\r\n        thread1.start();\r\n\r\n        Thread thread2 = new Thread(() -&gt; {\r\n            lock.lock();\r\n            lock.unlock();\r\n        });\r\n        thread2.start();\r\n\r\n        Thread thread3 = new Thread(() -&gt; {\r\n            lock.lock();\r\n            lock.unlock();\r\n        });\r\n        thread3.start();\r\n\r\n        try {\r\n            Thread.sleep(2000);\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n        thread2.interrupt();\r\n    }\r\n\r\n    final boolean acquireQueued(final MyAbstractQueuedSynchronizer.Node node, int arg) {\r\n        boolean failed = true;\r\n        try {\r\n            boolean interrupted = false;\r\n            for (;;) {\r\n                final MyAbstractQueuedSynchronizer.Node p = node.predecessor();\r\n                System.out.println(Thread.currentThread().getName() + &quot;-&gt; Spin get lock---------&quot;);**//Printed content**\r\n                if (p == head &amp;&amp; tryAcquire(arg)) {\r\n                    setHead(node);\r\n                    p.next = null; // help GC\r\n                    failed = false;\r\n                    return interrupted;\r\n                }\r\n                if (shouldParkAfterFailedAcquire(p, node) &amp;&amp;\r\n                        parkAndCheckInterrupt())\r\n                    interrupted = true;\r\n            }\r\n        } finally {\r\n            if (failed)\r\n                cancelAcquire(node);\r\n        }\r\n    }\r\n\r\n    private final boolean parkAndCheckInterrupt() {\r\n        LockSupport.park(this);\r\n        return Thread.interrupted();**//Add a breakpoint**\r\n    }\r\n```\r\nThe following is the result of a normal run and a breakpoint\r\n```\r\nnormal\r\nThread-1-&gt; Spin get lock---------\r\nThread-1-&gt; Spin get lock---------\r\nThread-2-&gt; Spin get lock---------\r\nThread-2-&gt; Spin get lock---------\r\nThread-3-&gt; Spin get lock---------\r\nThread-3-&gt; Spin get lock---------\r\nThread-2-&gt; Spin get lock---------\r\n\r\nbreakpoint\r\nThread-1-&gt; Spin get lock---------\r\nThread-1-&gt; Spin get lock---------\r\nThread-2-&gt; Spin get lock---------\r\nThread-2-&gt; Spin get lock---------\r\nThread-3-&gt; Spin get lock---------\r\nThread-3-&gt; Spin get lock---------\r\nThread-2-&gt; Spin get lock---------\r\nThread-2-&gt; Spin get lock---------\r\n```","title":"Why is the AQS printed differently","body":"<p>When I was researching AQS, I found a problem. I made a copy of the aQS and ReentrantLock source code, added printing, and then wrote a test program that, when running properly, would only print once after the thread was woken up. But when I add a breakpoint to the parkAndCheckInterrupt method, I print it twice. Why</p>\n<pre><code>    public static void main(String[] args) {\n        MyReentrantLock lock = new MyReentrantLock();\n        Thread thread0 = new Thread(() -&gt; {\n            lock.lock();\n            try {\n                Thread.sleep(3000000);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n            lock.unlock();\n        });\n        thread0.start();\n\n        try {\n            Thread.sleep(3000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        Thread thread1 = new Thread(() -&gt; {\n            lock.lock();\n            lock.unlock();\n        });\n        thread1.start();\n\n        Thread thread2 = new Thread(() -&gt; {\n            lock.lock();\n            lock.unlock();\n        });\n        thread2.start();\n\n        Thread thread3 = new Thread(() -&gt; {\n            lock.lock();\n            lock.unlock();\n        });\n        thread3.start();\n\n        try {\n            Thread.sleep(2000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        thread2.interrupt();\n    }\n\n    final boolean acquireQueued(final MyAbstractQueuedSynchronizer.Node node, int arg) {\n        boolean failed = true;\n        try {\n            boolean interrupted = false;\n            for (;;) {\n                final MyAbstractQueuedSynchronizer.Node p = node.predecessor();\n                System.out.println(Thread.currentThread().getName() + &quot;-&gt; Spin get lock---------&quot;);**//Printed content**\n                if (p == head &amp;&amp; tryAcquire(arg)) {\n                    setHead(node);\n                    p.next = null; // help GC\n                    failed = false;\n                    return interrupted;\n                }\n                if (shouldParkAfterFailedAcquire(p, node) &amp;&amp;\n                        parkAndCheckInterrupt())\n                    interrupted = true;\n            }\n        } finally {\n            if (failed)\n                cancelAcquire(node);\n        }\n    }\n\n    private final boolean parkAndCheckInterrupt() {\n        LockSupport.park(this);\n        return Thread.interrupted();**//Add a breakpoint**\n    }\n</code></pre>\n<p>The following is the result of a normal run and a breakpoint</p>\n<pre><code>normal\nThread-1-&gt; Spin get lock---------\nThread-1-&gt; Spin get lock---------\nThread-2-&gt; Spin get lock---------\nThread-2-&gt; Spin get lock---------\nThread-3-&gt; Spin get lock---------\nThread-3-&gt; Spin get lock---------\nThread-2-&gt; Spin get lock---------\n\nbreakpoint\nThread-1-&gt; Spin get lock---------\nThread-1-&gt; Spin get lock---------\nThread-2-&gt; Spin get lock---------\nThread-2-&gt; Spin get lock---------\nThread-3-&gt; Spin get lock---------\nThread-3-&gt; Spin get lock---------\nThread-2-&gt; Spin get lock---------\nThread-2-&gt; Spin get lock---------\n</code></pre>\n"},{"tags":["java","rest","aws-lambda","devops"],"answers":[{"tags":[],"owner":{"account_id":23360895,"reputation":71,"user_id":17433141,"display_name":"Martin J"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637110750,"creation_date":1637110750,"answer_id":69997778,"question_id":69989127,"body_markdown":"Using a combination of CloudFront and Route53 it is possible to build and host your system so that the end-user is always served from the geographically closest AWS region.  \r\nPlease see [Choosing a routing policy][1] for details on available routing policies in Route53.  \r\nWhich policy is most suitable depends on the architecture of your application (i.e. do you have an active-passive setup or is your application distributed, among other criteria).\r\n\r\nSo essentially, using CloudFront (and possibly Lambda@edge) it is possible to have both the US portal (www.example.com) and the EU portal (eu.example.com) live all over the globe, to alleviate (network) latency issues (please see [CloudFront features][2] to read up on what CloudFront can do for you).\r\n\r\nNote however that hosting a distributed application across multiple regions usually requires some proper hard thinking about architecture, and where and how you store (and possibly replicate) your data.\r\n\r\nIt is not entirely clear what your actual use-case is and what the underlying reasons and drivers are for why your users need to be divided, but that is not part of the question and therefore a topic for another question around application architecture and design, so I&#39;ll not comment on that.\r\n\r\nIn short, using Route53 and CloudFront you can redirect your users to two different URLs, but still have a nice user experience by serving both URLs from a geographically &quot;close&quot; location, given proper underlying application design.\r\n\r\n  [1]: https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/routing-policy.html\r\n  [2]: https://aws.amazon.com/cloudfront/features/","title":"Api redirection according to region","body":"<p>Using a combination of CloudFront and Route53 it is possible to build and host your system so that the end-user is always served from the geographically closest AWS region.<br />\nPlease see <a href=\"https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/routing-policy.html\" rel=\"nofollow noreferrer\">Choosing a routing policy</a> for details on available routing policies in Route53.<br />\nWhich policy is most suitable depends on the architecture of your application (i.e. do you have an active-passive setup or is your application distributed, among other criteria).</p>\n<p>So essentially, using CloudFront (and possibly Lambda@edge) it is possible to have both the US portal (<a href=\"http://www.example.com\" rel=\"nofollow noreferrer\">www.example.com</a>) and the EU portal (eu.example.com) live all over the globe, to alleviate (network) latency issues (please see <a href=\"https://aws.amazon.com/cloudfront/features/\" rel=\"nofollow noreferrer\">CloudFront features</a> to read up on what CloudFront can do for you).</p>\n<p>Note however that hosting a distributed application across multiple regions usually requires some proper hard thinking about architecture, and where and how you store (and possibly replicate) your data.</p>\n<p>It is not entirely clear what your actual use-case is and what the underlying reasons and drivers are for why your users need to be divided, but that is not part of the question and therefore a topic for another question around application architecture and design, so I'll not comment on that.</p>\n<p>In short, using Route53 and CloudFront you can redirect your users to two different URLs, but still have a nice user experience by serving both URLs from a geographically &quot;close&quot; location, given proper underlying application design.</p>\n"}],"owner":{"account_id":7038631,"reputation":21,"user_id":5391769,"display_name":"Govind B"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":185,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637110750,"creation_date":1637065477,"question_id":69989127,"body_markdown":"Our application is in two region US and EU and Our client can belong to any region.\r\nWe have a endpoint like:\r\nUS - www.example.com\r\nEU - eu.example.com\r\n\r\nWe have a scenario where if we call any API like\r\nhttps://www.example.com/api/v1/getDoc?access_token={ACCESS_TOKEN} so it will redirect request according to client region. \r\nSuppose above access token belong to EU then the request will redirect to eu.example.com\r\n\r\n**Solution 1**- If we use &quot;aws lamda funtion&quot; and one global table (Suppose Dynamo db) to check for the region of client then **it will cause latency issue if request contains multipart and base64 String.**\r\n\r\nI need some better solution for this approach. So that we can overcome with this latency issue .\r\nOr some other better solution would be appreciated. ","title":"Api redirection according to region","body":"<p>Our application is in two region US and EU and Our client can belong to any region.\nWe have a endpoint like:\nUS - <a href=\"http://www.example.com\" rel=\"nofollow noreferrer\">www.example.com</a>\nEU - eu.example.com</p>\n<p>We have a scenario where if we call any API like\n<a href=\"https://www.example.com/api/v1/getDoc?access_token=%7BACCESS_TOKEN%7D\" rel=\"nofollow noreferrer\">https://www.example.com/api/v1/getDoc?access_token={ACCESS_TOKEN}</a> so it will redirect request according to client region.\nSuppose above access token belong to EU then the request will redirect to eu.example.com</p>\n<p><strong>Solution 1</strong>- If we use &quot;aws lamda funtion&quot; and one global table (Suppose Dynamo db) to check for the region of client then <strong>it will cause latency issue if request contains multipart and base64 String.</strong></p>\n<p>I need some better solution for this approach. So that we can overcome with this latency issue .\nOr some other better solution would be appreciated.</p>\n"},{"tags":["java","string","binary","encode"],"comments":[{"owner":{"account_id":1441481,"reputation":10825,"user_id":1361506,"display_name":"azurefrog"},"score":0,"creation_date":1637102084,"post_id":69996790,"comment_id":123735460,"body_markdown":"I&#39;m sure there are other issues, but to start, `String` is an immutable type in Java, so `subt(a);` does not change the value of `a`.  You&#39;d need to do something like `a = subt(a);`.","body":"I&#39;m sure there are other issues, but to start, <code>String</code> is an immutable type in Java, so <code>subt(a);</code> does not change the value of <code>a</code>.  You&#39;d need to do something like <code>a = subt(a);</code>."},{"owner":{"account_id":2978820,"reputation":1757,"user_id":2529284,"display_name":"GiorgosDev"},"score":0,"creation_date":1637102175,"post_id":69996790,"comment_id":123735482,"body_markdown":"I would recommend you to read how loops work. I.e.  while (a.length() == 0)  and  while (v == ErsterWert(a))  will be endless loops, as the condition checked never changes. The way how you could approach it is for instance go through each character in a using charAt(int index) method and compare it to current value (1 or 0). If character corresponds to current value - increase counter. Once the the character is different from current value - add counter value to string and reset the counter.","body":"I would recommend you to read how loops work. I.e.  while (a.length() == 0)  and  while (v == ErsterWert(a))  will be endless loops, as the condition checked never changes. The way how you could approach it is for instance go through each character in a using charAt(int index) method and compare it to current value (1 or 0). If character corresponds to current value - increase counter. Once the the character is different from current value - add counter value to string and reset the counter."}],"answers":[{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637106502,"creation_date":1637106158,"answer_id":69997355,"question_id":69996790,"body_markdown":"Here&#39;s a one-liner to impress your professor with:\r\n\r\n    public static String encode(String a) {\r\n        return (a.startsWith(&quot;1&quot;) ? &quot;0 &quot; : &quot;&quot;) +\r\n            Arrays.stream(a.split(&quot;(?&lt;=(.))(?!\\\\1)&quot;))\r\n              .map(String::length)\r\n              .map(String::valueOf)\r\n              .collect(Collectors.joining(&quot; &quot;));\r\n    }\r\n\r\nThis splits the string between characters that are different by using a lookbehind to capture the previous character and a negative lookahead for the back reference to that captured character.\r\n\r\nThese substrings are converted to their length, then the length as a String, finally being joined to a single string separated by a space.\r\n\r\nThe special case of the first character being a `1` is handled via a [ternary][1].\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25","title":"Counting the Ones and Zeros of an String in Java, and putting them in order?","body":"<p>Here's a one-liner to impress your professor with:</p>\n<pre><code>public static String encode(String a) {\n    return (a.startsWith(&quot;1&quot;) ? &quot;0 &quot; : &quot;&quot;) +\n        Arrays.stream(a.split(&quot;(?&lt;=(.))(?!\\\\1)&quot;))\n          .map(String::length)\n          .map(String::valueOf)\n          .collect(Collectors.joining(&quot; &quot;));\n}\n</code></pre>\n<p>This splits the string between characters that are different by using a lookbehind to capture the previous character and a negative lookahead for the back reference to that captured character.</p>\n<p>These substrings are converted to their length, then the length as a String, finally being joined to a single string separated by a space.</p>\n<p>The special case of the first character being a <code>1</code> is handled via a <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25\" rel=\"nofollow noreferrer\">ternary</a>.</p>\n"},{"tags":[],"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637109021,"creation_date":1637109021,"answer_id":69997628,"question_id":69996790,"body_markdown":"A recursive solution using String functions `indexOf` and `substring` may look like this:\r\n* we try to find the position of a digit X opposite to that in the beginning of the string to calculate the length of prefix.\r\n```java\r\npublic static String encode(String str) {\r\n    if (str.startsWith(&quot;1&quot;)) {\r\n        // append 0 at start, look for 0 after 1&#39;s\r\n        return &quot;0 &quot; + encode(str, 0);\r\n    }\r\n    // string starts with 0, look for the first 1 after 0&#39;s\r\n    return encode(str, 1);\r\n}\r\n\r\n// d - the digit to look for after current prefix \r\npublic static String encode(String z, int d) {\r\n    int pos = z.indexOf(String.valueOf(d));\r\n    if (pos == -1) { // nothing found after current prefix\r\n        return String.valueOf(z.length());\r\n    }\r\n    // append prefix length and toggle the number to look for\r\n    return String.valueOf(pos) + &quot; &quot; + encode(z.substring(pos), 1 - d);\r\n}\r\n```\r\nTests:\r\n```java\r\nfor (String s : Arrays.asList(&quot;0&quot;, &quot;1&quot;, &quot;000&quot;, &quot;11&quot;, &quot;011&quot;, &quot;101&quot;, &quot;0011100001111100&quot;)) {\r\n    System.out.println(s + &quot; -&gt; &quot; + encode(s));\r\n}\r\n```\r\nOutput:\r\n```\r\n0 -&gt; 1\r\n1 -&gt; 0 1\r\n000 -&gt; 3\r\n11 -&gt; 0 2\r\n011 -&gt; 1 2\r\n101 -&gt; 0 1 1 1\r\n0011100001111100 -&gt; 2 3 4 5 2\r\n```","title":"Counting the Ones and Zeros of an String in Java, and putting them in order?","body":"<p>A recursive solution using String functions <code>indexOf</code> and <code>substring</code> may look like this:</p>\n<ul>\n<li>we try to find the position of a digit X opposite to that in the beginning of the string to calculate the length of prefix.</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>public static String encode(String str) {\n    if (str.startsWith(&quot;1&quot;)) {\n        // append 0 at start, look for 0 after 1's\n        return &quot;0 &quot; + encode(str, 0);\n    }\n    // string starts with 0, look for the first 1 after 0's\n    return encode(str, 1);\n}\n\n// d - the digit to look for after current prefix \npublic static String encode(String z, int d) {\n    int pos = z.indexOf(String.valueOf(d));\n    if (pos == -1) { // nothing found after current prefix\n        return String.valueOf(z.length());\n    }\n    // append prefix length and toggle the number to look for\n    return String.valueOf(pos) + &quot; &quot; + encode(z.substring(pos), 1 - d);\n}\n</code></pre>\n<p>Tests:</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (String s : Arrays.asList(&quot;0&quot;, &quot;1&quot;, &quot;000&quot;, &quot;11&quot;, &quot;011&quot;, &quot;101&quot;, &quot;0011100001111100&quot;)) {\n    System.out.println(s + &quot; -&gt; &quot; + encode(s));\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>0 -&gt; 1\n1 -&gt; 0 1\n000 -&gt; 3\n11 -&gt; 0 2\n011 -&gt; 1 2\n101 -&gt; 0 1 1 1\n0011100001111100 -&gt; 2 3 4 5 2\n</code></pre>\n"}],"owner":{"account_id":23360266,"reputation":21,"user_id":17432618,"display_name":"KastratenKarl"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":360,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1637109021,"creation_date":1637101649,"question_id":69996790,"body_markdown":"I do have a big problem coding something that should be easy:\r\n\r\nI need to create a static public method which returns a string and also gets a binary number in form of an string.\r\n\r\n    public static String encode(String a) {\r\n\r\nThis method has to count the consecutive zeros and ones. If  the number changes there has to be a blank. Also if the first number isn&#39;t Zero, the program has to just write a zero as first number.\r\n\r\n    Example: 11100110111 =&gt; &quot;0 3 2 2 1 3&quot;\r\n\r\n    Other Examples are:\r\n    encode(&quot;0&quot;) --&gt; &quot;1&quot; \r\n    encode(&quot;000&quot;) --&gt; &quot;3&quot; \r\n    encode(&quot;11&quot;) --&gt; &quot;0 2&quot; \r\n    encode(&quot;011&quot;) --&gt; &quot;1 2&quot; \r\n    encode(&quot;101&quot;) --&gt; &quot;0 1 1 1&quot; \r\n\r\nI have no idea how to do this, it would be so nice of someone could help! \r\nI will post my worthless piece of code here, its useless but eventually it contains some helpful information! \r\n\r\n    public class Functionality {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tSystem.out.println(encode(&quot;111&quot;));\r\n    \r\n    \t}\r\n    \r\n    \tpublic static String encode(String a) {\r\n    \t\tint z = 0;\r\n    \t\tint v = 0;\r\n    \t\tString erg = &quot;&quot;;\r\n    \r\n    \t\twhile (a.length() == 0) {\r\n    \r\n    \t\t\twhile (v == ErsterWert(a)) {\r\n    \t\t\t\tz = z + 1;\r\n    \t\t\t\tsubt(a);\r\n    \r\n    \t\t\t}\r\n    \r\n    \t\t\tString zx = String.valueOf(z);\r\n    \t\t\terg = erg + zx + &quot; &quot;;\r\n    \t\t\tif (v == 0) {\r\n    \t\t\t\tv = v + 1;\r\n    \t\t\t}\r\n    \r\n    \t\t\tif (v == 1) {\r\n    \t\t\t\tv = 0;\r\n    \t\t\t}\r\n    \r\n    \t\t\tz = 0;\r\n    \r\n    \t\t}\r\n    \t\tString bg = &quot;sds&quot;;\r\n    \t\treturn erg;\r\n    \t}\r\n    \r\n    \tpublic static int ErsterWert(String a) {\r\n    \t\tint f = a.charAt(0);\r\n    \t\treturn f;\r\n    \t}\r\n    \r\n    \tpublic static String subt(String a) {\r\n    \t\ta = a.substring(1);\r\n    \t\treturn a;\r\n    \t}\r\n    \r\n    }","title":"Counting the Ones and Zeros of an String in Java, and putting them in order?","body":"<p>I do have a big problem coding something that should be easy:</p>\n<p>I need to create a static public method which returns a string and also gets a binary number in form of an string.</p>\n<pre><code>public static String encode(String a) {\n</code></pre>\n<p>This method has to count the consecutive zeros and ones. If  the number changes there has to be a blank. Also if the first number isn't Zero, the program has to just write a zero as first number.</p>\n<pre><code>Example: 11100110111 =&gt; &quot;0 3 2 2 1 3&quot;\n\nOther Examples are:\nencode(&quot;0&quot;) --&gt; &quot;1&quot; \nencode(&quot;000&quot;) --&gt; &quot;3&quot; \nencode(&quot;11&quot;) --&gt; &quot;0 2&quot; \nencode(&quot;011&quot;) --&gt; &quot;1 2&quot; \nencode(&quot;101&quot;) --&gt; &quot;0 1 1 1&quot; \n</code></pre>\n<p>I have no idea how to do this, it would be so nice of someone could help!\nI will post my worthless piece of code here, its useless but eventually it contains some helpful information!</p>\n<pre><code>public class Functionality {\n    public static void main(String[] args) {\n        System.out.println(encode(&quot;111&quot;));\n\n    }\n\n    public static String encode(String a) {\n        int z = 0;\n        int v = 0;\n        String erg = &quot;&quot;;\n\n        while (a.length() == 0) {\n\n            while (v == ErsterWert(a)) {\n                z = z + 1;\n                subt(a);\n\n            }\n\n            String zx = String.valueOf(z);\n            erg = erg + zx + &quot; &quot;;\n            if (v == 0) {\n                v = v + 1;\n            }\n\n            if (v == 1) {\n                v = 0;\n            }\n\n            z = 0;\n\n        }\n        String bg = &quot;sds&quot;;\n        return erg;\n    }\n\n    public static int ErsterWert(String a) {\n        int f = a.charAt(0);\n        return f;\n    }\n\n    public static String subt(String a) {\n        a = a.substring(1);\n        return a;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","serialization","nio","bytebuffer","socketchannel"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":1,"creation_date":1612182318,"post_id":65890087,"comment_id":116678070,"body_markdown":"I see no minimal debuggable version here: `Person` and `Message` are missing, field `server` in class `Client` is missing, field `controller` in class `ServerTerminal` is missing. I also cannot see any `main` method(s) showing how you start client and server. This is why you did not receive any answers so far, despite the bounty.","body":"I see no minimal debuggable version here: <code>Person</code> and <code>Message</code> are missing, field <code>server</code> in class <code>Client</code> is missing, field <code>controller</code> in class <code>ServerTerminal</code> is missing. I also cannot see any <code>main</code> method(s) showing how you start client and server. This is why you did not receive any answers so far, despite the bounty."},{"owner":{"account_id":18515190,"reputation":79,"user_id":13567243,"display_name":"Alxa"},"score":0,"creation_date":1612183217,"post_id":65890087,"comment_id":116678437,"body_markdown":"@kriegaex why all those classes matter? The problem is in transferring the object and I&#39;m pretty sure the initial problem concerns buffers behaviour. I really thought the problem lied on surface","body":"@kriegaex why all those classes matter? The problem is in transferring the object and I&#39;m pretty sure the initial problem concerns buffers behaviour. I really thought the problem lied on surface"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":1,"creation_date":1612195704,"post_id":65890087,"comment_id":116684530,"body_markdown":"They matter because without them your sample code does not compile, without compilation I cannot run it and without running it I cannot help you debug it. You called your code a minimal debuggable sample, but unfortunately that is a false statement. The sample is smaller than minimal.","body":"They matter because without them your sample code does not compile, without compilation I cannot run it and without running it I cannot help you debug it. You called your code a minimal debuggable sample, but unfortunately that is a false statement. The sample is smaller than minimal."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":2,"creation_date":1612228030,"post_id":65890087,"comment_id":116695803,"body_markdown":"Look, I want to help you here. So please take my advice and learn how to ask a good question by means of an [MCVE](https://stackoverflow.com/help/mcve). I am sure if your problem was reproducible, you would get the answer you are looking for quickly. But for now your sample classes are just pseudo code. Even without regard of the missing classes, the code uses two fields which are not present in the class. You are deliberately hiding information because you think you know where the problem is. How can you be so sure? And why make it more difficult to reproduce the problem?","body":"Look, I want to help you here. So please take my advice and learn how to ask a good question by means of an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>. I am sure if your problem was reproducible, you would get the answer you are looking for quickly. But for now your sample classes are just pseudo code. Even without regard of the missing classes, the code uses two fields which are not present in the class. You are deliberately hiding information because you think you know where the problem is. How can you be so sure? And why make it more difficult to reproduce the problem?"},{"owner":{"account_id":18515190,"reputation":79,"user_id":13567243,"display_name":"Alxa"},"score":0,"creation_date":1612252513,"post_id":65890087,"comment_id":116701520,"body_markdown":"@kriegaex ok, I&#39;ll try to remake the question, so that it&#39;s easier to find the problem. And thank you","body":"@kriegaex ok, I&#39;ll try to remake the question, so that it&#39;s easier to find the problem. And thank you"},{"owner":{"account_id":18515190,"reputation":79,"user_id":13567243,"display_name":"Alxa"},"score":0,"creation_date":1612264376,"post_id":65890087,"comment_id":116706548,"body_markdown":"@kriegaex now you can see the &quot;working&quot; version","body":"@kriegaex now you can see the &quot;working&quot; version"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1612269309,"post_id":65890087,"comment_id":116708748,"body_markdown":"Thanks, this is great, now I can run both client and server. I cannot reproduce your problem, though, I am not getting any `SerializationException`. I am starting the server first, then a client, enter something like &quot;foo&quot; as a request and 11 as a number and get normal console output as a response. Do I have to do anything special in order to provoke the error? Which Java version are you using?","body":"Thanks, this is great, now I can run both client and server. I cannot reproduce your problem, though, I am not getting any <code>SerializationException</code>. I am starting the server first, then a client, enter something like &quot;foo&quot; as a request and 11 as a number and get normal console output as a response. Do I have to do anything special in order to provoke the error? Which Java version are you using?"},{"owner":{"account_id":18515190,"reputation":79,"user_id":13567243,"display_name":"Alxa"},"score":0,"creation_date":1612272241,"post_id":65890087,"comment_id":116710093,"body_markdown":"@kriegaex thank you for testing. I&#39;m using java 8. I only get the exception after I send the first request to the server, after that it works as expected for any new requests. Also, I get the problem when I change buffers initial size in Client.sendResponse()  and Server.getRequest() methods (e.g. from 64*1024^2 to 1024^2) - but in that case, I get error every time. Now I&#39;m really confused","body":"@kriegaex thank you for testing. I&#39;m using java 8. I only get the exception after I send the first request to the server, after that it works as expected for any new requests. Also, I get the problem when I change buffers initial size in Client.sendResponse()  and Server.getRequest() methods (e.g. from 64*1024^2 to 1024^2) - but in that case, I get error every time. Now I&#39;m really confused"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":1,"creation_date":1612277471,"post_id":65890087,"comment_id":116712755,"body_markdown":"Ah okay, in your sample code the buffer sizes for client and server are different. If I use 64M or 1M on both sides, I can reproduce the problem. I will be busy for the rest of the evening, but I guess tomorrow I can take a look.","body":"Ah okay, in your sample code the buffer sizes for client and server are different. If I use 64M or 1M on both sides, I can reproduce the problem. I will be busy for the rest of the evening, but I guess tomorrow I can take a look."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1612332340,"post_id":65890087,"comment_id":116730150,"body_markdown":"You would be far better off losing the `SocketChannel` and the Apache stuff and just using `Sockets` and `ObjectInput/OutputStreams` directly. Then at least you can see exacftly what&#39;s going on. It&#39;s near enough to impossible to combine non-blocking mode with Serialization that it doesn&#39;t matter. I wouldn&#39;t attempt it and I&#39;m a 24-year Java programmer.","body":"You would be far better off losing the <code>SocketChannel</code> and the Apache stuff and just using <code>Sockets</code> and <code>ObjectInput&#47;OutputStreams</code> directly. Then at least you can see exacftly what&#39;s going on. It&#39;s near enough to impossible to combine non-blocking mode with Serialization that it doesn&#39;t matter. I wouldn&#39;t attempt it and I&#39;m a 24-year Java programmer."},{"owner":{"account_id":18515190,"reputation":79,"user_id":13567243,"display_name":"Alxa"},"score":0,"creation_date":1612343754,"post_id":65890087,"comment_id":116734344,"body_markdown":"@user207421 thank you for advice, I&#39;ll definitely take it into account","body":"@user207421 thank you for advice, I&#39;ll definitely take it into account"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1612367350,"post_id":65890087,"comment_id":116745976,"body_markdown":"@user207421, I had thoughts not unlike yours, reading the code and also checking what the Apache library does internally, i.e. using a byte buffer, then a byte array, then a byte-array-based object in-/output stream. So basically, data are converted to a byte array only to be used in a pseudo stream and be converted back to byte arrays, only to be written into yet another stream (or channel, what the heck) and on the receiver&#39;s side the reverse. If performance is not a big issue, it should be okay though.","body":"@user207421, I had thoughts not unlike yours, reading the code and also checking what the Apache library does internally, i.e. using a byte buffer, then a byte array, then a byte-array-based object in-/output stream. So basically, data are converted to a byte array only to be used in a pseudo stream and be converted back to byte arrays, only to be written into yet another stream (or channel, what the heck) and on the receiver&#39;s side the reverse. If performance is not a big issue, it should be okay though."}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637109007,"creation_date":1612323699,"answer_id":66020926,"question_id":65890087,"body_markdown":"I have never used Java NIO channels before, so I am not an expert. But I found out several things:\r\n\r\n**General:**\r\n  * In order to debug your code, it is helpful to use `e.printStackTrace()` instead of just `System.out.println(e.getMessage())`.\r\n\r\n**Client:**\r\n  * `SocketChannel server` in the client should be configured as blocking, otherwise it might read 0 bytes because there is no server response yet, which causes your problem.\r\n  * You should always call `ByteBuffer.clear()` **before** reading something, not afterwards.\r\n  * After reading, the position in the byte buffer has to be reset to 0 via `responseBuffer.position(0)` before calling `get(byte[])`, otherwise it will read undefined bytes **after** the ones just read.\r\n  * You should size your byte arrays according to the number of bytes read, not the byte buffer size. It might work the other way around, but it is inefficient.\r\n\r\n**Server:**\r\n  * You should always call `ByteBuffer.clear()` **before** reading something, not afterwards.\r\n  * After reading, the position in the byte buffer has to be reset to 0 via `responseBuffer.position(0)` before calling `get(byte[])`, otherwise it will read undefined bytes **after** the ones just read.\r\n  * When catching exceptions during `getRequest(key)` calls, you should close the corresponding channel, otherwise after a client disconnects the server will indefinitely try to read from it, spamming your console log with error messages. My modification handles that case and also prints a nice log message telling which client (remote socket address) was closed.\r\n\r\n**Caveat:** There is nothing in your code dealing with the situation that a request or response written into the channel on the one side is bigger than the maximum `ByteBuffer` size on the other side. Similarly, in theory a (de)serialised `byte[]` could also end up being bigger than the byte buffer.\r\n\r\nHere are my diffs:\r\n\r\n```none\r\nIndex: src/main/java/de/scrum_master/stackoverflow/q65890087/Client.java\r\n===================================================================\r\n--- a/src/main/java/de/scrum_master/stackoverflow/q65890087/Client.java\t(revision Staged)\r\n+++ b/src/main/java/de/scrum_master/stackoverflow/q65890087/Client.java\t(date 1612321383172)\r\n@@ -15,7 +15,7 @@\r\n   public void start() throws IOException {\r\n     try {\r\n       server = SocketChannel.open(new InetSocketAddress(&quot;localhost&quot;, 5454));\r\n-      server.configureBlocking(false);\r\n+      server.configureBlocking(true);\r\n     }\r\n     catch (IOException e) {\r\n       System.err.println(&quot;Server isn&#39;t responding&quot;);\r\n@@ -56,22 +56,24 @@\r\n       getResponse();\r\n     }\r\n     catch (Exception e) {\r\n-      System.out.println(e.getMessage());\r\n+      e.printStackTrace();\r\n+//      System.out.println(e.getMessage());\r\n       System.err.println(&quot;Connection lost&quot;);\r\n       System.exit(0);\r\n     }\r\n   }\r\n \r\n   public void getResponse() throws Exception {\r\n-    ByteBuffer responseBuffer = ByteBuffer.allocate(1024 * 1024 * 64);\r\n+    ByteBuffer responseBuffer = ByteBuffer.allocate(1024 * 1024);\r\n+    responseBuffer.clear();\r\n \r\n     int read = server.read(responseBuffer);\r\n-    responseBuffer.clear();\r\n     if (read == -1) {\r\n-      throw new Exception();\r\n+      throw new Exception(&quot;EOF, cannot read server response&quot;);\r\n     }\r\n \r\n-    byte[] bytes = new byte[responseBuffer.limit()];\r\n+    byte[] bytes = new byte[read];\r\n+    responseBuffer.position(0);\r\n     responseBuffer.get(bytes);\r\n \r\n     Message message = SerializationUtils.deserialize(bytes);\r\n```\r\n\r\n```none\r\nIndex: src/main/java/de/scrum_master/stackoverflow/q65890087/Server.java\r\n===================================================================\r\n--- a/src/main/java/de/scrum_master/stackoverflow/q65890087/Server.java\t(revision Staged)\r\n+++ b/src/main/java/de/scrum_master/stackoverflow/q65890087/Server.java\t(date 1612323386278)\r\n@@ -35,7 +35,11 @@\r\n             getRequest(key);\r\n           }\r\n           catch (Exception e) {\r\n-            System.err.println(e.getMessage());\r\n+            e.printStackTrace();\r\n+//            System.err.println(e.getMessage());\r\n+            SocketChannel client = (SocketChannel) key.channel();\r\n+            System.err.println(&quot;Closing client connection at: &quot; + client.socket().getRemoteSocketAddress());\r\n+            client.close();\r\n           }\r\n         }\r\n         iter.remove();\r\n@@ -45,15 +49,16 @@\r\n \r\n   private void getRequest(SelectionKey key) throws Exception {\r\n     SocketChannel client = (SocketChannel) key.channel();\r\n-    ByteBuffer requestBuffer = ByteBuffer.allocate(1024 * 1024 * 64);\r\n+    ByteBuffer requestBuffer = ByteBuffer.allocate(1024 * 1024);\r\n+    requestBuffer.clear();\r\n     int read = client.read(requestBuffer);\r\n-    requestBuffer.clear();\r\n     if (read == -1) {\r\n       key.cancel();\r\n       throw new Exception(&quot;Client disconnected at: &quot; +\r\n         ((SocketChannel) key.channel()).socket().getRemoteSocketAddress());\r\n     }\r\n-    byte[] bytes = new byte[requestBuffer.limit()];\r\n+    byte[] bytes = new byte[read];\r\n+    requestBuffer.position(0);\r\n     requestBuffer.get(bytes);\r\n     Message message = SerializationUtils.deserialize(bytes);\r\n     sendResponse(client, message);\r\n```\r\n\r\nJust for completeness&#39; sake, here are the full classes after I changed them:\r\n\r\n```java\r\nimport org.apache.commons.lang3.SerializationUtils;\r\n\r\nimport java.io.IOException;\r\nimport java.net.InetSocketAddress;\r\nimport java.nio.ByteBuffer;\r\nimport java.nio.channels.SocketChannel;\r\nimport java.util.Scanner;\r\n\r\npublic class Client {\r\n\r\n  private SocketChannel server;\r\n\r\n  public void start() throws IOException {\r\n    try {\r\n      server = SocketChannel.open(new InetSocketAddress(&quot;localhost&quot;, 5454));\r\n      server.configureBlocking(true);\r\n    }\r\n    catch (IOException e) {\r\n      System.err.println(&quot;Server isn&#39;t responding&quot;);\r\n      System.exit(0);\r\n    }\r\n\r\n    Scanner scRequest = new Scanner(System.in);\r\n    Scanner scState = new Scanner(System.in);\r\n\r\n    System.out.println(&quot;Enter request:&quot;);\r\n    String request = scRequest.nextLine();\r\n\r\n    while (!request.equals(&quot;exit&quot;)) {\r\n      try {\r\n        // In my actual project class Person is a way different (But it&#39;s still a POJO)\r\n        // I included it here to make sure I can get it back after sending to the server\r\n        System.out.println(&quot;Enter a number:&quot;);\r\n        Person person = new Person(scState.nextInt());\r\n        sendRequest(request, person);\r\n\r\n        System.out.println(&quot;\\nEnter request:&quot;);\r\n        request = scRequest.nextLine();\r\n      }\r\n      catch (Exception e) {\r\n        e.printStackTrace();\r\n      }\r\n    }\r\n\r\n    stop();\r\n  }\r\n\r\n  public void sendRequest(String sMessage, Person person) {\r\n    Message message = new Message(sMessage, person);\r\n    ByteBuffer requestBuffer = ByteBuffer.wrap(SerializationUtils.serialize(message));\r\n    try {\r\n      server.write(requestBuffer);\r\n      requestBuffer.clear();\r\n      getResponse();\r\n    }\r\n    catch (Exception e) {\r\n      e.printStackTrace();\r\n//      System.out.println(e.getMessage());\r\n      System.err.println(&quot;Connection lost&quot;);\r\n      System.exit(0);\r\n    }\r\n  }\r\n\r\n  public void getResponse() throws Exception {\r\n    ByteBuffer responseBuffer = ByteBuffer.allocate(1024 * 1024);\r\n    responseBuffer.clear();\r\n\r\n    int read = server.read(responseBuffer);\r\n    if (read == -1) {\r\n      throw new Exception(&quot;EOF, cannot read server response&quot;);\r\n    }\r\n\r\n    byte[] bytes = new byte[read];\r\n    responseBuffer.position(0);\r\n    responseBuffer.get(bytes);\r\n\r\n    Message message = SerializationUtils.deserialize(bytes);\r\n    System.out.println(message);\r\n  }\r\n\r\n  public void stop() throws IOException {\r\n    server.close();\r\n  }\r\n\r\n  public static void main(String[] args) throws IOException {\r\n    Client client = new Client();\r\n    client.start();\r\n  }\r\n}\r\n```\r\n\r\n```java\r\nimport org.apache.commons.lang3.SerializationUtils;\r\n\r\nimport java.io.IOException;\r\nimport java.net.InetSocketAddress;\r\nimport java.nio.ByteBuffer;\r\nimport java.nio.channels.SelectionKey;\r\nimport java.nio.channels.Selector;\r\nimport java.nio.channels.ServerSocketChannel;\r\nimport java.nio.channels.SocketChannel;\r\nimport java.util.Iterator;\r\nimport java.util.Set;\r\n\r\npublic class Server {\r\n  public void start() throws IOException {\r\n    Selector selector = Selector.open();\r\n    ServerSocketChannel serverSocket = ServerSocketChannel.open();\r\n    serverSocket.bind(new InetSocketAddress(&quot;localhost&quot;, 5454));\r\n    serverSocket.configureBlocking(false);\r\n    serverSocket.register(selector, SelectionKey.OP_ACCEPT);\r\n    System.out.println(&quot;Server started&quot;);\r\n\r\n    while (true) {\r\n      selector.select();\r\n      Set&lt;SelectionKey&gt; selectedKeys = selector.selectedKeys();\r\n      Iterator&lt;SelectionKey&gt; iter = selectedKeys.iterator();\r\n      while (iter.hasNext()) {\r\n        SelectionKey key = iter.next();\r\n        if (key.isAcceptable()) {\r\n          register(selector, serverSocket);\r\n        }\r\n        if (key.isReadable()) {\r\n          try {\r\n            getRequest(key);\r\n          }\r\n          catch (Exception e) {\r\n            e.printStackTrace();\r\n//            System.err.println(e.getMessage());\r\n            SocketChannel client = (SocketChannel) key.channel();\r\n            System.err.println(&quot;Closing client connection at: &quot; + client.socket().getRemoteSocketAddress());\r\n            client.close();\r\n          }\r\n        }\r\n        iter.remove();\r\n      }\r\n    }\r\n  }\r\n\r\n  private void getRequest(SelectionKey key) throws Exception {\r\n    SocketChannel client = (SocketChannel) key.channel();\r\n    ByteBuffer requestBuffer = ByteBuffer.allocate(1024 * 1024);\r\n    requestBuffer.clear();\r\n    int read = client.read(requestBuffer);\r\n    if (read == -1) {\r\n      key.cancel();\r\n      throw new Exception(&quot;Client disconnected at: &quot; +\r\n        ((SocketChannel) key.channel()).socket().getRemoteSocketAddress());\r\n    }\r\n    byte[] bytes = new byte[read];\r\n    requestBuffer.position(0);\r\n    requestBuffer.get(bytes);\r\n    Message message = SerializationUtils.deserialize(bytes);\r\n    sendResponse(client, message);\r\n  }\r\n\r\n  private void sendResponse(SocketChannel client, Message message) throws IOException {\r\n    message.setResult(&quot;Some result&quot;);\r\n    ByteBuffer responseBuffer = ByteBuffer.wrap(SerializationUtils.serialize(message));\r\n    while (responseBuffer.hasRemaining()) {\r\n      client.write(responseBuffer);\r\n    }\r\n    responseBuffer.clear();\r\n  }\r\n\r\n  private void register(Selector selector, ServerSocketChannel serverSocket) throws IOException {\r\n    SocketChannel client = serverSocket.accept();\r\n    client.configureBlocking(false);\r\n    client.register(selector, SelectionKey.OP_READ);\r\n    System.out.println(&quot;New client at: &quot; + client.socket().getRemoteSocketAddress());\r\n  }\r\n\r\n  public static void main(String[] args) throws Exception {\r\n    new Server().start();\r\n  }\r\n}\r\n```\r\n","title":"SocketChannel. invalid stream header: 00000000","body":"<p>I have never used Java NIO channels before, so I am not an expert. But I found out several things:</p>\n<p><strong>General:</strong></p>\n<ul>\n<li>In order to debug your code, it is helpful to use <code>e.printStackTrace()</code> instead of just <code>System.out.println(e.getMessage())</code>.</li>\n</ul>\n<p><strong>Client:</strong></p>\n<ul>\n<li><code>SocketChannel server</code> in the client should be configured as blocking, otherwise it might read 0 bytes because there is no server response yet, which causes your problem.</li>\n<li>You should always call <code>ByteBuffer.clear()</code> <strong>before</strong> reading something, not afterwards.</li>\n<li>After reading, the position in the byte buffer has to be reset to 0 via <code>responseBuffer.position(0)</code> before calling <code>get(byte[])</code>, otherwise it will read undefined bytes <strong>after</strong> the ones just read.</li>\n<li>You should size your byte arrays according to the number of bytes read, not the byte buffer size. It might work the other way around, but it is inefficient.</li>\n</ul>\n<p><strong>Server:</strong></p>\n<ul>\n<li>You should always call <code>ByteBuffer.clear()</code> <strong>before</strong> reading something, not afterwards.</li>\n<li>After reading, the position in the byte buffer has to be reset to 0 via <code>responseBuffer.position(0)</code> before calling <code>get(byte[])</code>, otherwise it will read undefined bytes <strong>after</strong> the ones just read.</li>\n<li>When catching exceptions during <code>getRequest(key)</code> calls, you should close the corresponding channel, otherwise after a client disconnects the server will indefinitely try to read from it, spamming your console log with error messages. My modification handles that case and also prints a nice log message telling which client (remote socket address) was closed.</li>\n</ul>\n<p><strong>Caveat:</strong> There is nothing in your code dealing with the situation that a request or response written into the channel on the one side is bigger than the maximum <code>ByteBuffer</code> size on the other side. Similarly, in theory a (de)serialised <code>byte[]</code> could also end up being bigger than the byte buffer.</p>\n<p>Here are my diffs:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Index: src/main/java/de/scrum_master/stackoverflow/q65890087/Client.java\n===================================================================\n--- a/src/main/java/de/scrum_master/stackoverflow/q65890087/Client.java (revision Staged)\n+++ b/src/main/java/de/scrum_master/stackoverflow/q65890087/Client.java (date 1612321383172)\n@@ -15,7 +15,7 @@\n   public void start() throws IOException {\n     try {\n       server = SocketChannel.open(new InetSocketAddress(&quot;localhost&quot;, 5454));\n-      server.configureBlocking(false);\n+      server.configureBlocking(true);\n     }\n     catch (IOException e) {\n       System.err.println(&quot;Server isn't responding&quot;);\n@@ -56,22 +56,24 @@\n       getResponse();\n     }\n     catch (Exception e) {\n-      System.out.println(e.getMessage());\n+      e.printStackTrace();\n+//      System.out.println(e.getMessage());\n       System.err.println(&quot;Connection lost&quot;);\n       System.exit(0);\n     }\n   }\n \n   public void getResponse() throws Exception {\n-    ByteBuffer responseBuffer = ByteBuffer.allocate(1024 * 1024 * 64);\n+    ByteBuffer responseBuffer = ByteBuffer.allocate(1024 * 1024);\n+    responseBuffer.clear();\n \n     int read = server.read(responseBuffer);\n-    responseBuffer.clear();\n     if (read == -1) {\n-      throw new Exception();\n+      throw new Exception(&quot;EOF, cannot read server response&quot;);\n     }\n \n-    byte[] bytes = new byte[responseBuffer.limit()];\n+    byte[] bytes = new byte[read];\n+    responseBuffer.position(0);\n     responseBuffer.get(bytes);\n \n     Message message = SerializationUtils.deserialize(bytes);\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>Index: src/main/java/de/scrum_master/stackoverflow/q65890087/Server.java\n===================================================================\n--- a/src/main/java/de/scrum_master/stackoverflow/q65890087/Server.java (revision Staged)\n+++ b/src/main/java/de/scrum_master/stackoverflow/q65890087/Server.java (date 1612323386278)\n@@ -35,7 +35,11 @@\n             getRequest(key);\n           }\n           catch (Exception e) {\n-            System.err.println(e.getMessage());\n+            e.printStackTrace();\n+//            System.err.println(e.getMessage());\n+            SocketChannel client = (SocketChannel) key.channel();\n+            System.err.println(&quot;Closing client connection at: &quot; + client.socket().getRemoteSocketAddress());\n+            client.close();\n           }\n         }\n         iter.remove();\n@@ -45,15 +49,16 @@\n \n   private void getRequest(SelectionKey key) throws Exception {\n     SocketChannel client = (SocketChannel) key.channel();\n-    ByteBuffer requestBuffer = ByteBuffer.allocate(1024 * 1024 * 64);\n+    ByteBuffer requestBuffer = ByteBuffer.allocate(1024 * 1024);\n+    requestBuffer.clear();\n     int read = client.read(requestBuffer);\n-    requestBuffer.clear();\n     if (read == -1) {\n       key.cancel();\n       throw new Exception(&quot;Client disconnected at: &quot; +\n         ((SocketChannel) key.channel()).socket().getRemoteSocketAddress());\n     }\n-    byte[] bytes = new byte[requestBuffer.limit()];\n+    byte[] bytes = new byte[read];\n+    requestBuffer.position(0);\n     requestBuffer.get(bytes);\n     Message message = SerializationUtils.deserialize(bytes);\n     sendResponse(client, message);\n</code></pre>\n<p>Just for completeness' sake, here are the full classes after I changed them:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.apache.commons.lang3.SerializationUtils;\n\nimport java.io.IOException;\nimport java.net.InetSocketAddress;\nimport java.nio.ByteBuffer;\nimport java.nio.channels.SocketChannel;\nimport java.util.Scanner;\n\npublic class Client {\n\n  private SocketChannel server;\n\n  public void start() throws IOException {\n    try {\n      server = SocketChannel.open(new InetSocketAddress(&quot;localhost&quot;, 5454));\n      server.configureBlocking(true);\n    }\n    catch (IOException e) {\n      System.err.println(&quot;Server isn't responding&quot;);\n      System.exit(0);\n    }\n\n    Scanner scRequest = new Scanner(System.in);\n    Scanner scState = new Scanner(System.in);\n\n    System.out.println(&quot;Enter request:&quot;);\n    String request = scRequest.nextLine();\n\n    while (!request.equals(&quot;exit&quot;)) {\n      try {\n        // In my actual project class Person is a way different (But it's still a POJO)\n        // I included it here to make sure I can get it back after sending to the server\n        System.out.println(&quot;Enter a number:&quot;);\n        Person person = new Person(scState.nextInt());\n        sendRequest(request, person);\n\n        System.out.println(&quot;\\nEnter request:&quot;);\n        request = scRequest.nextLine();\n      }\n      catch (Exception e) {\n        e.printStackTrace();\n      }\n    }\n\n    stop();\n  }\n\n  public void sendRequest(String sMessage, Person person) {\n    Message message = new Message(sMessage, person);\n    ByteBuffer requestBuffer = ByteBuffer.wrap(SerializationUtils.serialize(message));\n    try {\n      server.write(requestBuffer);\n      requestBuffer.clear();\n      getResponse();\n    }\n    catch (Exception e) {\n      e.printStackTrace();\n//      System.out.println(e.getMessage());\n      System.err.println(&quot;Connection lost&quot;);\n      System.exit(0);\n    }\n  }\n\n  public void getResponse() throws Exception {\n    ByteBuffer responseBuffer = ByteBuffer.allocate(1024 * 1024);\n    responseBuffer.clear();\n\n    int read = server.read(responseBuffer);\n    if (read == -1) {\n      throw new Exception(&quot;EOF, cannot read server response&quot;);\n    }\n\n    byte[] bytes = new byte[read];\n    responseBuffer.position(0);\n    responseBuffer.get(bytes);\n\n    Message message = SerializationUtils.deserialize(bytes);\n    System.out.println(message);\n  }\n\n  public void stop() throws IOException {\n    server.close();\n  }\n\n  public static void main(String[] args) throws IOException {\n    Client client = new Client();\n    client.start();\n  }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import org.apache.commons.lang3.SerializationUtils;\n\nimport java.io.IOException;\nimport java.net.InetSocketAddress;\nimport java.nio.ByteBuffer;\nimport java.nio.channels.SelectionKey;\nimport java.nio.channels.Selector;\nimport java.nio.channels.ServerSocketChannel;\nimport java.nio.channels.SocketChannel;\nimport java.util.Iterator;\nimport java.util.Set;\n\npublic class Server {\n  public void start() throws IOException {\n    Selector selector = Selector.open();\n    ServerSocketChannel serverSocket = ServerSocketChannel.open();\n    serverSocket.bind(new InetSocketAddress(&quot;localhost&quot;, 5454));\n    serverSocket.configureBlocking(false);\n    serverSocket.register(selector, SelectionKey.OP_ACCEPT);\n    System.out.println(&quot;Server started&quot;);\n\n    while (true) {\n      selector.select();\n      Set&lt;SelectionKey&gt; selectedKeys = selector.selectedKeys();\n      Iterator&lt;SelectionKey&gt; iter = selectedKeys.iterator();\n      while (iter.hasNext()) {\n        SelectionKey key = iter.next();\n        if (key.isAcceptable()) {\n          register(selector, serverSocket);\n        }\n        if (key.isReadable()) {\n          try {\n            getRequest(key);\n          }\n          catch (Exception e) {\n            e.printStackTrace();\n//            System.err.println(e.getMessage());\n            SocketChannel client = (SocketChannel) key.channel();\n            System.err.println(&quot;Closing client connection at: &quot; + client.socket().getRemoteSocketAddress());\n            client.close();\n          }\n        }\n        iter.remove();\n      }\n    }\n  }\n\n  private void getRequest(SelectionKey key) throws Exception {\n    SocketChannel client = (SocketChannel) key.channel();\n    ByteBuffer requestBuffer = ByteBuffer.allocate(1024 * 1024);\n    requestBuffer.clear();\n    int read = client.read(requestBuffer);\n    if (read == -1) {\n      key.cancel();\n      throw new Exception(&quot;Client disconnected at: &quot; +\n        ((SocketChannel) key.channel()).socket().getRemoteSocketAddress());\n    }\n    byte[] bytes = new byte[read];\n    requestBuffer.position(0);\n    requestBuffer.get(bytes);\n    Message message = SerializationUtils.deserialize(bytes);\n    sendResponse(client, message);\n  }\n\n  private void sendResponse(SocketChannel client, Message message) throws IOException {\n    message.setResult(&quot;Some result&quot;);\n    ByteBuffer responseBuffer = ByteBuffer.wrap(SerializationUtils.serialize(message));\n    while (responseBuffer.hasRemaining()) {\n      client.write(responseBuffer);\n    }\n    responseBuffer.clear();\n  }\n\n  private void register(Selector selector, ServerSocketChannel serverSocket) throws IOException {\n    SocketChannel client = serverSocket.accept();\n    client.configureBlocking(false);\n    client.register(selector, SelectionKey.OP_READ);\n    System.out.println(&quot;New client at: &quot; + client.socket().getRemoteSocketAddress());\n  }\n\n  public static void main(String[] args) throws Exception {\n    new Server().start();\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":18515190,"reputation":79,"user_id":13567243,"display_name":"Alxa"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":618,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":66020926,"answer_count":1,"score":2,"last_activity_date":1637109007,"creation_date":1611597961,"question_id":65890087,"body_markdown":"I want to serialize &#39;Message&#39; object, I can successfully transfer it as bytes array through socketChannel. After that, I change the object&#39;s properties (so that it may have larger size), and then there&#39;s a problem in sending object back to the client.\r\nOnce I try to obtain the object on the client side, I get an exception, it occurs when I deserealize Message obj in getResponse() method: \r\n```\r\norg.apache.commons.lang3.SerializationException: java.io.StreamCorruptedException: invalid stream header: 00000000\r\n```\r\nBut, somehow, this applies only for the first client (After the exception is thrown, connection with the first client is over) and when I start a new client (not closing server) I can successfully transfer the object back and forth, furthermore, it works for any new clients.\r\n\r\nThis is my minimal debuggable version:\r\n```\r\nimport org.apache.commons.lang3.SerializationUtils;\r\n\r\nimport java.io.IOException;\r\nimport java.net.InetSocketAddress;\r\nimport java.nio.ByteBuffer;\r\nimport java.nio.channels.SocketChannel;\r\nimport java.util.Scanner;\r\n\r\npublic class Client {\r\n\r\n    private SocketChannel server;\r\n\r\n    public void start() throws IOException {\r\n        try {\r\n            server = SocketChannel.open(new InetSocketAddress(&quot;localhost&quot;, 5454));\r\n            server.configureBlocking(false);\r\n        } catch (IOException e) {\r\n            System.err.println(&quot;Server isn&#39;t responding&quot;);\r\n            System.exit(0);\r\n        }\r\n\r\n        Scanner scRequest = new Scanner(System.in);\r\n        Scanner scState = new Scanner(System.in);\r\n\r\n\r\n        System.out.println(&quot;Enter request:&quot;);\r\n        String request = scRequest.nextLine();\r\n\r\n        while (!request.equals(&quot;exit&quot;)) {\r\n            try {\r\n                // In my actual project class Person is a way different (But it&#39;s still a POJO)\r\n                // I included it here to make sure I can get it back after sending to the server\r\n                System.out.println(&quot;Enter a number:&quot;);\r\n                Person person = new Person(scState.nextInt());\r\n                sendRequest(request, person);\r\n\r\n                System.out.println(&quot;\\nEnter request:&quot;);\r\n                request = scRequest.nextLine();\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n        stop();\r\n    }\r\n\r\n    public void sendRequest(String sMessage, Person person) {\r\n        Message message = new Message(sMessage, person);\r\n        ByteBuffer requestBuffer = ByteBuffer.wrap(SerializationUtils.serialize(message));\r\n        try {\r\n            server.write(requestBuffer);\r\n            requestBuffer.clear();\r\n            getResponse();\r\n        } catch (Exception e) {\r\n            System.out.println(e.getMessage());\r\n            System.err.println(&quot;Connection lost&quot;);\r\n            System.exit(0);\r\n        }\r\n    }\r\n\r\n    public void getResponse() throws Exception {\r\n        ByteBuffer responseBuffer = ByteBuffer.allocate(1024 * 1024 * 64);\r\n\r\n        int read = server.read(responseBuffer);\r\n        responseBuffer.clear();\r\n        if(read == -1) {\r\n            throw new Exception();\r\n        }\r\n\r\n        byte[] bytes = new byte[responseBuffer.limit()];\r\n        responseBuffer.get(bytes);\r\n\r\n        Message message = SerializationUtils.deserialize(bytes);\r\n        System.out.println(message);\r\n    }\r\n\r\n    public void stop() throws IOException {\r\n        server.close();\r\n    }\r\n\r\n    public static void main(String[] args) throws IOException {\r\n        Client client = new Client();\r\n        client.start();\r\n    }\r\n}\r\n```\r\n\r\n```\r\nimport org.apache.commons.lang3.SerializationUtils;\r\n\r\nimport java.io.*;\r\n\r\nimport java.net.InetSocketAddress;\r\nimport java.nio.ByteBuffer;\r\nimport java.nio.channels.SelectionKey;\r\nimport java.nio.channels.Selector;\r\nimport java.nio.channels.ServerSocketChannel;\r\nimport java.nio.channels.SocketChannel;\r\nimport java.util.Iterator;\r\nimport java.util.Set;\r\n\r\npublic class Server {\r\n\r\n    public void start() throws IOException {\r\n\r\n        Selector selector = Selector.open();\r\n        ServerSocketChannel serverSocket = ServerSocketChannel.open();\r\n        serverSocket.bind(new InetSocketAddress(&quot;localhost&quot;, 5454));\r\n        serverSocket.configureBlocking(false);\r\n        serverSocket.register(selector, SelectionKey.OP_ACCEPT);\r\n\r\n        System.out.println(&quot;Server started&quot;);\r\n\r\n        while (true) {\r\n            selector.select();\r\n            Set&lt;SelectionKey&gt; selectedKeys = selector.selectedKeys();\r\n            Iterator&lt;SelectionKey&gt; iter = selectedKeys.iterator();\r\n            while (iter.hasNext()) {\r\n                SelectionKey key = iter.next();\r\n                if (key.isAcceptable()) {\r\n                    register(selector, serverSocket);\r\n                }\r\n                if (key.isReadable()) {\r\n                    try {\r\n                        getRequest(key);\r\n                    } catch (Exception e) {\r\n                        System.err.println(e.getMessage());\r\n                    }\r\n                }\r\n                iter.remove();\r\n            }\r\n        }\r\n    }\r\n\r\n    private void getRequest(SelectionKey key) throws Exception {\r\n        SocketChannel client = (SocketChannel) key.channel();\r\n\r\n        ByteBuffer requestBuffer = ByteBuffer.allocate(1024 * 1024);\r\n        int read = client.read(requestBuffer);\r\n        requestBuffer.clear();\r\n\r\n        if(read == -1) {\r\n            key.cancel();\r\n            throw new Exception(&quot;Client disconnected at: &quot; +\r\n                    ((SocketChannel) key.channel()).socket().getRemoteSocketAddress());\r\n        }\r\n\r\n        byte[] bytes = new byte[requestBuffer.limit()];\r\n        requestBuffer.get(bytes);\r\n\r\n        Message message = SerializationUtils.deserialize(bytes);\r\n        sendResponse(client, message);\r\n    }\r\n\r\n    private void sendResponse(SocketChannel client, Message message) throws IOException {\r\n\r\n        message.setResult(&quot;Some result&quot;);\r\n\r\n        ByteBuffer responseBuffer = ByteBuffer.wrap(SerializationUtils.serialize(message));\r\n        while (responseBuffer.hasRemaining()) {\r\n            client.write(responseBuffer);\r\n        }\r\n        responseBuffer.clear();\r\n    }\r\n\r\n    private void register(Selector selector, ServerSocketChannel serverSocket) throws IOException {\r\n        SocketChannel client = serverSocket.accept();\r\n        client.configureBlocking(false);\r\n        client.register(selector, SelectionKey.OP_READ);\r\n        System.out.println(&quot;New client at: &quot; + client.socket().getRemoteSocketAddress());\r\n    }\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        new Server().start();\r\n    }\r\n}\r\n\r\n```\r\n\r\nI try to send this object as a bytes array:\r\n```\r\nimport java.io.Serializable;\r\nimport java.util.Formatter;\r\n\r\npublic class Message implements Serializable {\r\n\r\n    private String command;\r\n    private Person person;\r\n    private String result;\r\n\r\n    public Message(String command, Person person) {\r\n        this.command = command;\r\n        this.person = person;\r\n    }\r\n\r\n    public String getCommand() {\r\n        return command;\r\n    }\r\n    public void setCommand(String executedCommand) {\r\n        this.command = executedCommand;\r\n    }\r\n    public Person getPerson() {\r\n        return person;\r\n    }\r\n    public void setPerson(Person person) {\r\n        this.person = person;\r\n    }\r\n    public String getResult() {\r\n        return result;\r\n    }\r\n    public void setResult(String result) {\r\n        this.result = result;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return new Formatter()\r\n                .format(&quot;Command: %s\\nAttached object: %s\\nResult: %s&quot;,\r\n                        command, person, result)\r\n                .toString();\r\n    }\r\n}\r\n```\r\n\r\nI include instance of this class inside Message obj:\r\n```\r\npublic class Person implements Serializable {\r\n    private final int state;\r\n\r\n    public Person(int state) {\r\n        this.state = state;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Person state: &quot; + state;\r\n    }\r\n}\r\n```\r\n\r\nI have no idea what is going wrong, hope for your help.\r\n\r\nUPD: I used &#39;org.apache.commons:commons-lang3:3.5&#39; dependency to serialize an object into bytes array","title":"SocketChannel. invalid stream header: 00000000","body":"<p>I want to serialize 'Message' object, I can successfully transfer it as bytes array through socketChannel. After that, I change the object's properties (so that it may have larger size), and then there's a problem in sending object back to the client.\nOnce I try to obtain the object on the client side, I get an exception, it occurs when I deserealize Message obj in getResponse() method:</p>\n<pre><code>org.apache.commons.lang3.SerializationException: java.io.StreamCorruptedException: invalid stream header: 00000000\n</code></pre>\n<p>But, somehow, this applies only for the first client (After the exception is thrown, connection with the first client is over) and when I start a new client (not closing server) I can successfully transfer the object back and forth, furthermore, it works for any new clients.</p>\n<p>This is my minimal debuggable version:</p>\n<pre><code>import org.apache.commons.lang3.SerializationUtils;\n\nimport java.io.IOException;\nimport java.net.InetSocketAddress;\nimport java.nio.ByteBuffer;\nimport java.nio.channels.SocketChannel;\nimport java.util.Scanner;\n\npublic class Client {\n\n    private SocketChannel server;\n\n    public void start() throws IOException {\n        try {\n            server = SocketChannel.open(new InetSocketAddress(&quot;localhost&quot;, 5454));\n            server.configureBlocking(false);\n        } catch (IOException e) {\n            System.err.println(&quot;Server isn't responding&quot;);\n            System.exit(0);\n        }\n\n        Scanner scRequest = new Scanner(System.in);\n        Scanner scState = new Scanner(System.in);\n\n\n        System.out.println(&quot;Enter request:&quot;);\n        String request = scRequest.nextLine();\n\n        while (!request.equals(&quot;exit&quot;)) {\n            try {\n                // In my actual project class Person is a way different (But it's still a POJO)\n                // I included it here to make sure I can get it back after sending to the server\n                System.out.println(&quot;Enter a number:&quot;);\n                Person person = new Person(scState.nextInt());\n                sendRequest(request, person);\n\n                System.out.println(&quot;\\nEnter request:&quot;);\n                request = scRequest.nextLine();\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        }\n\n        stop();\n    }\n\n    public void sendRequest(String sMessage, Person person) {\n        Message message = new Message(sMessage, person);\n        ByteBuffer requestBuffer = ByteBuffer.wrap(SerializationUtils.serialize(message));\n        try {\n            server.write(requestBuffer);\n            requestBuffer.clear();\n            getResponse();\n        } catch (Exception e) {\n            System.out.println(e.getMessage());\n            System.err.println(&quot;Connection lost&quot;);\n            System.exit(0);\n        }\n    }\n\n    public void getResponse() throws Exception {\n        ByteBuffer responseBuffer = ByteBuffer.allocate(1024 * 1024 * 64);\n\n        int read = server.read(responseBuffer);\n        responseBuffer.clear();\n        if(read == -1) {\n            throw new Exception();\n        }\n\n        byte[] bytes = new byte[responseBuffer.limit()];\n        responseBuffer.get(bytes);\n\n        Message message = SerializationUtils.deserialize(bytes);\n        System.out.println(message);\n    }\n\n    public void stop() throws IOException {\n        server.close();\n    }\n\n    public static void main(String[] args) throws IOException {\n        Client client = new Client();\n        client.start();\n    }\n}\n</code></pre>\n<pre><code>import org.apache.commons.lang3.SerializationUtils;\n\nimport java.io.*;\n\nimport java.net.InetSocketAddress;\nimport java.nio.ByteBuffer;\nimport java.nio.channels.SelectionKey;\nimport java.nio.channels.Selector;\nimport java.nio.channels.ServerSocketChannel;\nimport java.nio.channels.SocketChannel;\nimport java.util.Iterator;\nimport java.util.Set;\n\npublic class Server {\n\n    public void start() throws IOException {\n\n        Selector selector = Selector.open();\n        ServerSocketChannel serverSocket = ServerSocketChannel.open();\n        serverSocket.bind(new InetSocketAddress(&quot;localhost&quot;, 5454));\n        serverSocket.configureBlocking(false);\n        serverSocket.register(selector, SelectionKey.OP_ACCEPT);\n\n        System.out.println(&quot;Server started&quot;);\n\n        while (true) {\n            selector.select();\n            Set&lt;SelectionKey&gt; selectedKeys = selector.selectedKeys();\n            Iterator&lt;SelectionKey&gt; iter = selectedKeys.iterator();\n            while (iter.hasNext()) {\n                SelectionKey key = iter.next();\n                if (key.isAcceptable()) {\n                    register(selector, serverSocket);\n                }\n                if (key.isReadable()) {\n                    try {\n                        getRequest(key);\n                    } catch (Exception e) {\n                        System.err.println(e.getMessage());\n                    }\n                }\n                iter.remove();\n            }\n        }\n    }\n\n    private void getRequest(SelectionKey key) throws Exception {\n        SocketChannel client = (SocketChannel) key.channel();\n\n        ByteBuffer requestBuffer = ByteBuffer.allocate(1024 * 1024);\n        int read = client.read(requestBuffer);\n        requestBuffer.clear();\n\n        if(read == -1) {\n            key.cancel();\n            throw new Exception(&quot;Client disconnected at: &quot; +\n                    ((SocketChannel) key.channel()).socket().getRemoteSocketAddress());\n        }\n\n        byte[] bytes = new byte[requestBuffer.limit()];\n        requestBuffer.get(bytes);\n\n        Message message = SerializationUtils.deserialize(bytes);\n        sendResponse(client, message);\n    }\n\n    private void sendResponse(SocketChannel client, Message message) throws IOException {\n\n        message.setResult(&quot;Some result&quot;);\n\n        ByteBuffer responseBuffer = ByteBuffer.wrap(SerializationUtils.serialize(message));\n        while (responseBuffer.hasRemaining()) {\n            client.write(responseBuffer);\n        }\n        responseBuffer.clear();\n    }\n\n    private void register(Selector selector, ServerSocketChannel serverSocket) throws IOException {\n        SocketChannel client = serverSocket.accept();\n        client.configureBlocking(false);\n        client.register(selector, SelectionKey.OP_READ);\n        System.out.println(&quot;New client at: &quot; + client.socket().getRemoteSocketAddress());\n    }\n\n    public static void main(String[] args) throws Exception {\n        new Server().start();\n    }\n}\n\n</code></pre>\n<p>I try to send this object as a bytes array:</p>\n<pre><code>import java.io.Serializable;\nimport java.util.Formatter;\n\npublic class Message implements Serializable {\n\n    private String command;\n    private Person person;\n    private String result;\n\n    public Message(String command, Person person) {\n        this.command = command;\n        this.person = person;\n    }\n\n    public String getCommand() {\n        return command;\n    }\n    public void setCommand(String executedCommand) {\n        this.command = executedCommand;\n    }\n    public Person getPerson() {\n        return person;\n    }\n    public void setPerson(Person person) {\n        this.person = person;\n    }\n    public String getResult() {\n        return result;\n    }\n    public void setResult(String result) {\n        this.result = result;\n    }\n\n    @Override\n    public String toString() {\n        return new Formatter()\n                .format(&quot;Command: %s\\nAttached object: %s\\nResult: %s&quot;,\n                        command, person, result)\n                .toString();\n    }\n}\n</code></pre>\n<p>I include instance of this class inside Message obj:</p>\n<pre><code>public class Person implements Serializable {\n    private final int state;\n\n    public Person(int state) {\n        this.state = state;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Person state: &quot; + state;\n    }\n}\n</code></pre>\n<p>I have no idea what is going wrong, hope for your help.</p>\n<p>UPD: I used 'org.apache.commons:commons-lang3:3.5' dependency to serialize an object into bytes array</p>\n"},{"tags":["java","maven","protocol-buffers"],"owner":{"account_id":2048810,"reputation":371,"user_id":1828259,"display_name":"Jeff Gaer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":294,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1637108666,"creation_date":1637108666,"question_id":69997600,"body_markdown":"I&#39;m trying to import one protobuff definition into another. I am using maven as a build tool. The plugin entry for the proto compiler is\r\n```\r\n&lt;plugin&gt;\r\n      &lt;groupId&gt;com.github.os72&lt;/groupId&gt;\r\n      &lt;artifactId&gt;protoc-jar-maven-plugin&lt;/artifactId&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\n\r\nThe import statement looks like\r\n```\r\nimport &quot;state/metadata.proto&quot;;\r\n```\r\n\r\nI understood the default location for .proto file in maven to be /src/main/proto.\r\n\r\nMy proto files are organized as shown below\r\n```\r\n%find . -name *.proto -print\r\n./src/main/proto/config/PartitionSizeMapping.proto\r\n./src/main/proto/config/Hosts.proto\r\n./src/main/proto/messages/v1/RITServer.proto\r\n./src/main/proto/state/metadata.proto\r\n```\r\nIt is the RITServer.proto file that includes state/metadata.proto.\r\nWhen I build I get the following error\r\n```\r\nstate/metadata.proto: File not found.\r\nRITServer.proto: Import &quot;state/metadata.proto&quot; was not found or had errors.\r\nRITServer.proto:41:3: &quot;FileMetaData&quot; is not defined.\r\n[ERROR] /data/remote-image-transfer/common/src/main/proto/messages/v1/RITServer.proto [0:0]: state/metadata.proto: File not found.\r\n[ERROR] /data/remote-image-transfer/common/src/main/proto/messages/v1/RITServer.proto [0:0]: RITServer.proto: Import &quot;state/metadata.proto&quot; was not found or had errors.\r\n```\r\n\r\n  \r\n\r\n\r\n\r\n","title":"How to import one google .proto into another using maven and java","body":"<p>I'm trying to import one protobuff definition into another. I am using maven as a build tool. The plugin entry for the proto compiler is</p>\n<pre><code>&lt;plugin&gt;\n      &lt;groupId&gt;com.github.os72&lt;/groupId&gt;\n      &lt;artifactId&gt;protoc-jar-maven-plugin&lt;/artifactId&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>The import statement looks like</p>\n<pre><code>import &quot;state/metadata.proto&quot;;\n</code></pre>\n<p>I understood the default location for .proto file in maven to be /src/main/proto.</p>\n<p>My proto files are organized as shown below</p>\n<pre><code>%find . -name *.proto -print\n./src/main/proto/config/PartitionSizeMapping.proto\n./src/main/proto/config/Hosts.proto\n./src/main/proto/messages/v1/RITServer.proto\n./src/main/proto/state/metadata.proto\n</code></pre>\n<p>It is the RITServer.proto file that includes state/metadata.proto.\nWhen I build I get the following error</p>\n<pre><code>state/metadata.proto: File not found.\nRITServer.proto: Import &quot;state/metadata.proto&quot; was not found or had errors.\nRITServer.proto:41:3: &quot;FileMetaData&quot; is not defined.\n[ERROR] /data/remote-image-transfer/common/src/main/proto/messages/v1/RITServer.proto [0:0]: state/metadata.proto: File not found.\n[ERROR] /data/remote-image-transfer/common/src/main/proto/messages/v1/RITServer.proto [0:0]: RITServer.proto: Import &quot;state/metadata.proto&quot; was not found or had errors.\n</code></pre>\n"},{"tags":["java","maven","javafx","openjfx","gluonfx"],"comments":[{"owner":{"account_id":4910667,"reputation":44671,"user_id":3956070,"display_name":"Jos&#233; Pereda"},"score":0,"creation_date":1637086697,"post_id":69993402,"comment_id":123730460,"body_markdown":"See matrix of supported features with native image (table 3) at https://docs.gluonhq.com/#_platforms","body":"See matrix of supported features with native image (table 3) at <a href=\"https://docs.gluonhq.com/#_platforms\" rel=\"nofollow noreferrer\">docs.gluonhq.com/#_platforms</a>"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1637108714,"post_id":69993402,"comment_id":123736778,"body_markdown":"I guess Jose&#39;s comment means that your desired configuration &quot;native image, under windows&quot; is not supported for the javafx-web module as the gluon&#39;s feature matrix for native images only supports Mac, Linux, Android and iOS versions.  Therefore you will be unable to accomplish your goal using your current approach.","body":"I guess Jose&#39;s comment means that your desired configuration &quot;native image, under windows&quot; is not supported for the javafx-web module as the gluon&#39;s feature matrix for native images only supports Mac, Linux, Android and iOS versions.  Therefore you will be unable to accomplish your goal using your current approach."}],"owner":{"account_id":21240378,"reputation":11,"user_id":15623938,"display_name":"Rocco Trigiante"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":442,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637108422,"creation_date":1637082753,"question_id":69993402,"body_markdown":"I am trying to convert my javaFX program into native image, under windows, using the GluonFX plugin and Maven. \r\n\r\nSince I use javafx WebView, the exe file generated, at the time of its execution, tells me the error:     \r\n\r\n    java.lang.ClassNotFoundException: javafx.scene.web.WebView   \r\n\r\nMine is a simple program that uses WebView and WebEngine, fully functional under JVM, in NetBeans.  \r\n\r\nIs there an example of a program that uses WebView and is transformed into a native image with GluonFX?  \r\n\r\nThe problem seems insurmountable for me and I ask for help. The following is the error message: \r\n\r\n    [lun nov 15 18:41:08 CET 2021][INFO] [SUB] WARNING: Unsupported JavaFX configuration: classes were loaded from &#39;unnamed module @3722c145&#39; \r\n    [lun nov 15 18:41:09 CET 2021][INFO] [SUB] Exception in Application start method \r\n    [lun nov 15 18:41:09 CET 2021][INFO] [SUB] Exception in thread &quot;main&quot; java.lang.RuntimeException: Exception in Application start method \r\n    [lun nov 15 18:41:09 CET 2021][INFO] [SUB]    at com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:901) \r\n    [lun nov 15 18:41:09 CET 2021][INFO] [SUB]    at com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:196) \r\n    [lun nov 15 18:41:09 CET 2021][INFO] [SUB]    at java.lang.Thread.run(Thread.java:829) \r\n    [lun nov 15 18:41:09 CET 2021][INFO] [SUB]    at com.oracle.svm.core.thread.JavaThreads.threadStartRoutine(JavaThreads.java:552) \r\n    [lun nov 15 18:41:09 CET 2021][INFO] [SUB]    at com.oracle.svm.core.windows.WindowsJavaThreads.osThreadStartRoutine(WindowsJavaThreads.java:138) \r\n    [lun nov 15 18:41:09 CET 2021][INFO] [SUB] Caused by: java.lang.AssertionError: java.lang.ClassNotFoundException: javafx.scene.web.WebView\r\n \r\nThe pom file was generated by NetBeans, while the compilation was done via the terminal: \r\n\r\n * x64 Native Tools Prompt for VS 2019\r\n\r\nMy java program:\r\n\r\n    package com.gluonapplication;\r\n\r\n    import com.gluonhq.charm.glisten.application.MobileApplication;\r\n    import com.gluonhq.charm.glisten.visual.Swatch;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.image.Image;\r\n    import javafx.stage.Stage;\r\n    import java.io.IOException;\r\n    import javafx.scene.web.WebHistory;\r\n    import javafx.scene.web.WebHistory.Entry;\r\n    \r\n    import javafx.scene.web.WebView;\r\n    import javafx.stage.Stage;\r\n    import javafx.application.Application;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.layout.StackPane;\r\n    import javafx.scene.web.WebEngine;\r\n    \r\n    public class GluonApplication extends Application {// MobileApplication\r\n        @Override\r\n        public void start(Stage stage) throws Exception {\r\n            StackPane root = new StackPane();        \r\n            WebView view = new WebView();\r\n            WebEngine engine = view.getEngine();\r\n            engine.load(&quot;https://stackoverflow.com&quot;);\r\n            root.getChildren().add(view);\r\n\r\n            Scene scene = new Scene(root, 800, 600);\r\n            stage.setScene(scene);\r\n            stage.show();\r\n        }\r\n        public static void main(String args[]) {\r\n            launch(args);\r\n        }\r\n    }\r\n\r\nThe pom:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;com.gluonapplication&lt;/groupId&gt;\r\n        &lt;artifactId&gt;gluonapplication&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;packaging&gt;jar&lt;/packaging&gt;\r\n        &lt;name&gt;GluonApplication&lt;/name&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;maven.compiler.release&gt;11&lt;/maven.compiler.release&gt;\r\n            &lt;javafx.version&gt;16&lt;/javafx.version&gt;\r\n            &lt;attach.version&gt;4.0.11&lt;/attach.version&gt;\r\n            &lt;gluonfx.plugin.version&gt;1.0.3&lt;/gluonfx.plugin.version&gt;\r\n            &lt;javafx.plugin.version&gt;0.0.6&lt;/javafx.plugin.version&gt;\r\n            &lt;mainClassName&gt;com.gluonapplication.GluonApplication&lt;/mainClassName&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\r\n                &lt;version&gt;${javafx.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \t\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javafx-web&lt;/artifactId&gt;\r\n                &lt;version&gt;${javafx.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.gluonhq&lt;/groupId&gt;\r\n                &lt;artifactId&gt;charm-glisten&lt;/artifactId&gt;\r\n                &lt;version&gt;6.0.6&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.gluonhq.attach&lt;/groupId&gt;\r\n                &lt;artifactId&gt;display&lt;/artifactId&gt;\r\n                &lt;version&gt;${attach.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.gluonhq.attach&lt;/groupId&gt;\r\n                &lt;artifactId&gt;lifecycle&lt;/artifactId&gt;\r\n                &lt;version&gt;${attach.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.gluonhq.attach&lt;/groupId&gt;\r\n                &lt;artifactId&gt;statusbar&lt;/artifactId&gt;\r\n                &lt;version&gt;${attach.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.gluonhq.attach&lt;/groupId&gt;\r\n                &lt;artifactId&gt;storage&lt;/artifactId&gt;\r\n                &lt;version&gt;${attach.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.gluonhq.attach&lt;/groupId&gt;\r\n                &lt;artifactId&gt;util&lt;/artifactId&gt;\r\n                &lt;version&gt;${attach.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n        &lt;repositories&gt;\r\n            &lt;repository&gt;\r\n                &lt;id&gt;Gluon&lt;/id&gt;\r\n                &lt;url&gt;https://nexus.gluonhq.com/nexus/content/repositories/releases&lt;/url&gt;\r\n            &lt;/repository&gt;\r\n        &lt;/repositories&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.8.1&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n    \r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;${javafx.plugin.version}&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;mainClass&gt;${mainClassName}&lt;/mainClass&gt;\r\n                    &lt;/configuration&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;!-- Default configuration for running --&gt;\r\n                            &lt;!-- Usage: mvn clean javafx:run --&gt;\r\n                            &lt;id&gt;default-cli&lt;/id&gt;\r\n                        &lt;/execution&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;!-- Configuration for manual attach debugging --&gt;\r\n                            &lt;!-- Usage: mvn clean javafx:run@debug --&gt;\r\n                            &lt;id&gt;debug&lt;/id&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;options&gt;\r\n                                    &lt;option&gt;-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=localhost:8000\r\n    &lt;/option&gt;\r\n                                &lt;/options&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;!-- Configuration for automatic IDE debugging --&gt;\r\n                            &lt;id&gt;ide-debug&lt;/id&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;options&gt;\r\n                                    &lt;option&gt;-agentlib:jdwp=transport=dt_socket,server=n,address=${jpda.address}&lt;/option&gt;\r\n                                &lt;/options&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;!-- Configuration for automatic IDE profiling --&gt;\r\n                            &lt;id&gt;ide-profile&lt;/id&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;options&gt;\r\n                                    &lt;option&gt;${profiler.jvmargs.arg1}&lt;/option&gt;\r\n                                    &lt;option&gt;${profiler.jvmargs.arg2}&lt;/option&gt;\r\n                                    &lt;option&gt;${profiler.jvmargs.arg3}&lt;/option&gt;\r\n                                    &lt;option&gt;${profiler.jvmargs.arg4}&lt;/option&gt;\r\n                                    &lt;option&gt;${profiler.jvmargs.arg5}&lt;/option&gt;\r\n                                &lt;/options&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n    \r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;com.gluonhq&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;gluonfx-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;${gluonfx.plugin.version}&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;target&gt;${gluonfx.target}&lt;/target&gt;\r\n                        &lt;attachList&gt;\r\n                            &lt;list&gt;display&lt;/list&gt;\r\n                            &lt;list&gt;lifecycle&lt;/list&gt;\r\n                            &lt;list&gt;statusbar&lt;/list&gt;\r\n                            &lt;list&gt;storage&lt;/list&gt;\r\n                        &lt;/attachList&gt;\r\n                        &lt;mainClass&gt;${mainClassName}&lt;/mainClass&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    \r\n        &lt;profiles&gt;\r\n            &lt;profile&gt;\r\n                &lt;id&gt;ios&lt;/id&gt;\r\n                &lt;properties&gt;\r\n                    &lt;gluonfx.target&gt;ios&lt;/gluonfx.target&gt;\r\n                &lt;/properties&gt;\r\n            &lt;/profile&gt;\r\n            &lt;profile&gt;\r\n                &lt;id&gt;android&lt;/id&gt;\r\n                &lt;properties&gt;\r\n                    &lt;gluonfx.target&gt;android&lt;/gluonfx.target&gt;\r\n                &lt;/properties&gt;\r\n            &lt;/profile&gt;\r\n        &lt;/profiles&gt;\r\n    &lt;/project&gt;\r\n\r\n","title":"GluonFX, native image and java.lang.ClassNotFoundException: javafx.scene.web.WebView","body":"<p>I am trying to convert my javaFX program into native image, under windows, using the GluonFX plugin and Maven.</p>\n<p>Since I use javafx WebView, the exe file generated, at the time of its execution, tells me the error:</p>\n<pre><code>java.lang.ClassNotFoundException: javafx.scene.web.WebView   \n</code></pre>\n<p>Mine is a simple program that uses WebView and WebEngine, fully functional under JVM, in NetBeans.</p>\n<p>Is there an example of a program that uses WebView and is transformed into a native image with GluonFX?</p>\n<p>The problem seems insurmountable for me and I ask for help. The following is the error message:</p>\n<pre><code>[lun nov 15 18:41:08 CET 2021][INFO] [SUB] WARNING: Unsupported JavaFX configuration: classes were loaded from 'unnamed module @3722c145' \n[lun nov 15 18:41:09 CET 2021][INFO] [SUB] Exception in Application start method \n[lun nov 15 18:41:09 CET 2021][INFO] [SUB] Exception in thread &quot;main&quot; java.lang.RuntimeException: Exception in Application start method \n[lun nov 15 18:41:09 CET 2021][INFO] [SUB]    at com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:901) \n[lun nov 15 18:41:09 CET 2021][INFO] [SUB]    at com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:196) \n[lun nov 15 18:41:09 CET 2021][INFO] [SUB]    at java.lang.Thread.run(Thread.java:829) \n[lun nov 15 18:41:09 CET 2021][INFO] [SUB]    at com.oracle.svm.core.thread.JavaThreads.threadStartRoutine(JavaThreads.java:552) \n[lun nov 15 18:41:09 CET 2021][INFO] [SUB]    at com.oracle.svm.core.windows.WindowsJavaThreads.osThreadStartRoutine(WindowsJavaThreads.java:138) \n[lun nov 15 18:41:09 CET 2021][INFO] [SUB] Caused by: java.lang.AssertionError: java.lang.ClassNotFoundException: javafx.scene.web.WebView\n</code></pre>\n<p>The pom file was generated by NetBeans, while the compilation was done via the terminal:</p>\n<ul>\n<li>x64 Native Tools Prompt for VS 2019</li>\n</ul>\n<p>My java program:</p>\n<pre><code>package com.gluonapplication;\n\nimport com.gluonhq.charm.glisten.application.MobileApplication;\nimport com.gluonhq.charm.glisten.visual.Swatch;\nimport javafx.scene.Scene;\nimport javafx.scene.image.Image;\nimport javafx.stage.Stage;\nimport java.io.IOException;\nimport javafx.scene.web.WebHistory;\nimport javafx.scene.web.WebHistory.Entry;\n\nimport javafx.scene.web.WebView;\nimport javafx.stage.Stage;\nimport javafx.application.Application;\nimport javafx.scene.Scene;\nimport javafx.scene.layout.StackPane;\nimport javafx.scene.web.WebEngine;\n\npublic class GluonApplication extends Application {// MobileApplication\n    @Override\n    public void start(Stage stage) throws Exception {\n        StackPane root = new StackPane();        \n        WebView view = new WebView();\n        WebEngine engine = view.getEngine();\n        engine.load(&quot;https://stackoverflow.com&quot;);\n        root.getChildren().add(view);\n\n        Scene scene = new Scene(root, 800, 600);\n        stage.setScene(scene);\n        stage.show();\n    }\n    public static void main(String args[]) {\n        launch(args);\n    }\n}\n</code></pre>\n<p>The pom:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.gluonapplication&lt;/groupId&gt;\n    &lt;artifactId&gt;gluonapplication&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;name&gt;GluonApplication&lt;/name&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.release&gt;11&lt;/maven.compiler.release&gt;\n        &lt;javafx.version&gt;16&lt;/javafx.version&gt;\n        &lt;attach.version&gt;4.0.11&lt;/attach.version&gt;\n        &lt;gluonfx.plugin.version&gt;1.0.3&lt;/gluonfx.plugin.version&gt;\n        &lt;javafx.plugin.version&gt;0.0.6&lt;/javafx.plugin.version&gt;\n        &lt;mainClassName&gt;com.gluonapplication.GluonApplication&lt;/mainClassName&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n            &lt;version&gt;${javafx.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-web&lt;/artifactId&gt;\n            &lt;version&gt;${javafx.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.gluonhq&lt;/groupId&gt;\n            &lt;artifactId&gt;charm-glisten&lt;/artifactId&gt;\n            &lt;version&gt;6.0.6&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.gluonhq.attach&lt;/groupId&gt;\n            &lt;artifactId&gt;display&lt;/artifactId&gt;\n            &lt;version&gt;${attach.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.gluonhq.attach&lt;/groupId&gt;\n            &lt;artifactId&gt;lifecycle&lt;/artifactId&gt;\n            &lt;version&gt;${attach.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.gluonhq.attach&lt;/groupId&gt;\n            &lt;artifactId&gt;statusbar&lt;/artifactId&gt;\n            &lt;version&gt;${attach.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.gluonhq.attach&lt;/groupId&gt;\n            &lt;artifactId&gt;storage&lt;/artifactId&gt;\n            &lt;version&gt;${attach.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.gluonhq.attach&lt;/groupId&gt;\n            &lt;artifactId&gt;util&lt;/artifactId&gt;\n            &lt;version&gt;${attach.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;Gluon&lt;/id&gt;\n            &lt;url&gt;https://nexus.gluonhq.com/nexus/content/repositories/releases&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${javafx.plugin.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;mainClass&gt;${mainClassName}&lt;/mainClass&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;!-- Default configuration for running --&gt;\n                        &lt;!-- Usage: mvn clean javafx:run --&gt;\n                        &lt;id&gt;default-cli&lt;/id&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;!-- Configuration for manual attach debugging --&gt;\n                        &lt;!-- Usage: mvn clean javafx:run@debug --&gt;\n                        &lt;id&gt;debug&lt;/id&gt;\n                        &lt;configuration&gt;\n                            &lt;options&gt;\n                                &lt;option&gt;-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=localhost:8000\n&lt;/option&gt;\n                            &lt;/options&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;!-- Configuration for automatic IDE debugging --&gt;\n                        &lt;id&gt;ide-debug&lt;/id&gt;\n                        &lt;configuration&gt;\n                            &lt;options&gt;\n                                &lt;option&gt;-agentlib:jdwp=transport=dt_socket,server=n,address=${jpda.address}&lt;/option&gt;\n                            &lt;/options&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;!-- Configuration for automatic IDE profiling --&gt;\n                        &lt;id&gt;ide-profile&lt;/id&gt;\n                        &lt;configuration&gt;\n                            &lt;options&gt;\n                                &lt;option&gt;${profiler.jvmargs.arg1}&lt;/option&gt;\n                                &lt;option&gt;${profiler.jvmargs.arg2}&lt;/option&gt;\n                                &lt;option&gt;${profiler.jvmargs.arg3}&lt;/option&gt;\n                                &lt;option&gt;${profiler.jvmargs.arg4}&lt;/option&gt;\n                                &lt;option&gt;${profiler.jvmargs.arg5}&lt;/option&gt;\n                            &lt;/options&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.gluonhq&lt;/groupId&gt;\n                &lt;artifactId&gt;gluonfx-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${gluonfx.plugin.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;target&gt;${gluonfx.target}&lt;/target&gt;\n                    &lt;attachList&gt;\n                        &lt;list&gt;display&lt;/list&gt;\n                        &lt;list&gt;lifecycle&lt;/list&gt;\n                        &lt;list&gt;statusbar&lt;/list&gt;\n                        &lt;list&gt;storage&lt;/list&gt;\n                    &lt;/attachList&gt;\n                    &lt;mainClass&gt;${mainClassName}&lt;/mainClass&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;profiles&gt;\n        &lt;profile&gt;\n            &lt;id&gt;ios&lt;/id&gt;\n            &lt;properties&gt;\n                &lt;gluonfx.target&gt;ios&lt;/gluonfx.target&gt;\n            &lt;/properties&gt;\n        &lt;/profile&gt;\n        &lt;profile&gt;\n            &lt;id&gt;android&lt;/id&gt;\n            &lt;properties&gt;\n                &lt;gluonfx.target&gt;android&lt;/gluonfx.target&gt;\n            &lt;/properties&gt;\n        &lt;/profile&gt;\n    &lt;/profiles&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":1,"creation_date":1637106035,"post_id":69997308,"comment_id":123736289,"body_markdown":"What does &quot;_volume of the data_&quot; mean? Audio pitch? Decibel?","body":"What does &quot;<i>volume of the data</i>&quot; mean? Audio pitch? Decibel?"},{"owner":{"display_name":"user17370683"},"score":0,"creation_date":1637107693,"post_id":69997308,"comment_id":123736582,"body_markdown":"@AbhijitSarkar by volume i meant Decibel.\ni will edit the post to better reflect on that","body":"@AbhijitSarkar by volume i meant Decibel. i will edit the post to better reflect on that"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1637116658,"post_id":69997308,"comment_id":123738056,"body_markdown":"I doubt digitized sound has a concept of decibels.  If I play a sound file on a computer with the volume at 100%, then play the same sound file with the volume at 50%, what is the real decibel value of a particular instant in the sound data?  Which playback should be considered as supplying authoritative decibel levels?","body":"I doubt digitized sound has a concept of decibels.  If I play a sound file on a computer with the volume at 100%, then play the same sound file with the volume at 50%, what is the real decibel value of a particular instant in the sound data?  Which playback should be considered as supplying authoritative decibel levels?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1637129291,"post_id":69997308,"comment_id":123740246,"body_markdown":"Your data is 16 bit signed big endian, so to get the volume you can convert pairs of bytes to samples, and process them in whatever way you think appropriate to get the volume. You could find the peak absolute value for instance, or the average absolute value. What do you want to use the volume for?","body":"Your data is 16 bit signed big endian, so to get the volume you can convert pairs of bytes to samples, and process them in whatever way you think appropriate to get the volume. You could find the peak absolute value for instance, or the average absolute value. What do you want to use the volume for?"},{"owner":{"display_name":"user17370683"},"score":0,"creation_date":1637179942,"post_id":69997308,"comment_id":123760157,"body_markdown":"@tgdavies can you explain what you mean by &quot;convert pairs of bytes to samples&quot; ?\nshould i can get pairs of bytes from the array, but what do you mean by &quot;samples&quot;.\nalso, the use of the volume is stated in the question, i guess i want to get average absolute value","body":"@tgdavies can you explain what you mean by &quot;convert pairs of bytes to samples&quot; ? should i can get pairs of bytes from the array, but what do you mean by &quot;samples&quot;. also, the use of the volume is stated in the question, i guess i want to get average absolute value"}],"owner":{"display_name":"user17370683"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":214,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637107802,"creation_date":1637105691,"question_id":69997308,"body_markdown":"i have been working on a java program that captures microphone audio byte data and then sends it to somewhere else (a part of my program), is there anyway i can calculate the decibel value of the data?\r\ni am using TargetDataLine, in each iteration i am saving data to a tempData holder which i take and write it into a ByteOutputStream, in each iteration i am trying to calculate the decibel of tempData.\r\n\r\nkeep in mind i don&#39;t really understand a lot of things related to sound in computers and in java in general so please forgive me for my lack of knowledge.\r\n\r\n this is class 1 or &quot;foo&quot;, it&#39;s handling when to stop the capturing \r\n```java\r\n    public class Foo {\r\n    public static void foo() {\r\n        AudioFormat format = new AudioFormat(8000.0f, 16, 1, true, true);\r\n \r\n        try (\r\n                var microphone = (TargetDataLine) AudioSystem.getLine(new DataLine.Info(TargetDataLine.class, format))\r\n        ) {\r\n            var micListener = new MicListener(microphone);\r\n \r\n            ByteArrayOutputStream allData = new ByteArrayOutputStream();\r\n            byte[] tempData;\r\n            final int chunkSize = 1024;\r\n \r\n            while (true) {\r\n                // in this case the loop goes forever, but in my program it stops when the user stops capturing audio.\r\n                tempData = micListener.startRecording(chunkSize);\r\n                \r\n                //calculate the decibel value of tempData; Utils.calculateDecibel(tempData)\r\n                //if decibel is high then do stuff\r\n                if (decibel &gt; 50)\r\n                    allData.write(tempData , 0 , micListener.getNumOfBytesRead());\r\n                \r\n            }\r\n        } catch (LineUnavailableException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nthis is class 2 or &quot;MicListener&quot;, it&#39;s handeling capture of data\r\n```java\r\npublic class MicListener {\r\n    private final TargetDataLine target;\r\n    private byte[] audioData;\r\n    private int numOfBytesRead = 0;\r\n \r\n    public MicListener(TargetDataLine target){\r\n        this.target = target;\r\n        audioData = new byte[target.getBufferSize() / 5];\r\n    }\r\n \r\n    public byte[] startRecording(int chunkSize) throws LineUnavailableException {\r\n        numOfBytesRead = target.read(audioData , 0 , chunkSize);\r\n \r\n        return audioData;\r\n    }\r\n \r\n    public int getNumOfBytesRead() {\r\n        return numOfBytesRead;\r\n    }\r\n}\r\n```\r\n\r\nthanks for the help! have a great day","title":"how to get the decibel of byte audio data","body":"<p>i have been working on a java program that captures microphone audio byte data and then sends it to somewhere else (a part of my program), is there anyway i can calculate the decibel value of the data?\ni am using TargetDataLine, in each iteration i am saving data to a tempData holder which i take and write it into a ByteOutputStream, in each iteration i am trying to calculate the decibel of tempData.</p>\n<p>keep in mind i don't really understand a lot of things related to sound in computers and in java in general so please forgive me for my lack of knowledge.</p>\n<p>this is class 1 or &quot;foo&quot;, it's handling when to stop the capturing</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public class Foo {\n    public static void foo() {\n        AudioFormat format = new AudioFormat(8000.0f, 16, 1, true, true);\n \n        try (\n                var microphone = (TargetDataLine) AudioSystem.getLine(new DataLine.Info(TargetDataLine.class, format))\n        ) {\n            var micListener = new MicListener(microphone);\n \n            ByteArrayOutputStream allData = new ByteArrayOutputStream();\n            byte[] tempData;\n            final int chunkSize = 1024;\n \n            while (true) {\n                // in this case the loop goes forever, but in my program it stops when the user stops capturing audio.\n                tempData = micListener.startRecording(chunkSize);\n                \n                //calculate the decibel value of tempData; Utils.calculateDecibel(tempData)\n                //if decibel is high then do stuff\n                if (decibel &gt; 50)\n                    allData.write(tempData , 0 , micListener.getNumOfBytesRead());\n                \n            }\n        } catch (LineUnavailableException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>this is class 2 or &quot;MicListener&quot;, it's handeling capture of data</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MicListener {\n    private final TargetDataLine target;\n    private byte[] audioData;\n    private int numOfBytesRead = 0;\n \n    public MicListener(TargetDataLine target){\n        this.target = target;\n        audioData = new byte[target.getBufferSize() / 5];\n    }\n \n    public byte[] startRecording(int chunkSize) throws LineUnavailableException {\n        numOfBytesRead = target.read(audioData , 0 , chunkSize);\n \n        return audioData;\n    }\n \n    public int getNumOfBytesRead() {\n        return numOfBytesRead;\n    }\n}\n</code></pre>\n<p>thanks for the help! have a great day</p>\n"},{"tags":["java","android","regex","string"],"comments":[{"owner":{"account_id":1781872,"reputation":14665,"user_id":1624376,"accept_rate":76,"display_name":"Aubin"},"score":0,"creation_date":1352212614,"post_id":13253221,"comment_id":18059609,"body_markdown":"Is paragraph[searchKeyword_counter] an instance of java.util.Pattern?","body":"Is paragraph[searchKeyword_counter] an instance of java.util.Pattern?"},{"owner":{"account_id":1781872,"reputation":14665,"user_id":1624376,"accept_rate":76,"display_name":"Aubin"},"score":1,"creation_date":1352212722,"post_id":13253221,"comment_id":18059692,"body_markdown":"Can you give some text samples, with expected results?","body":"Can you give some text samples, with expected results?"},{"owner":{"account_id":1417953,"reputation":45783,"user_id":1343161,"accept_rate":100,"display_name":"Keppil"},"score":1,"creation_date":1352212953,"post_id":13253221,"comment_id":18059799,"body_markdown":"Your code seems to work just fine, what is your problem?","body":"Your code seems to work just fine, what is your problem?"},{"owner":{"account_id":12583055,"reputation":447,"user_id":9732672,"display_name":"NomadMaker"},"score":0,"creation_date":1615597102,"post_id":13253221,"comment_id":117749122,"body_markdown":"matches() will match against the entire string. It is the equivalent of using ^ and $.","body":"matches() will match against the entire string. It is the equivalent of using ^ and $."}],"answers":[{"tags":[],"owner":{"account_id":1255572,"reputation":42820,"user_id":1215106,"accept_rate":82,"display_name":"Ωmega"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1352213339,"creation_date":1352213339,"answer_id":13253479,"question_id":13253221,"body_markdown":"    String string = &quot;...&quot;;\r\n    String word = &quot;is&quot;;\r\n\r\n    Pattern p = Pattern.compile(&quot;\\\\b&quot; + Pattern.quote(word) + &quot;\\\\b&quot;);\r\n    Matcher m = p.matcher(string);\r\n    if (m.find()) {\r\n      ...\r\n    }","title":"String Matches, Java","body":"<pre><code>String string = \"...\";\nString word = \"is\";\n\nPattern p = Pattern.compile(\"\\\\b\" + Pattern.quote(word) + \"\\\\b\");\nMatcher m = p.matcher(string);\nif (m.find()) {\n  ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5531903,"reputation":453,"user_id":4391649,"accept_rate":20,"display_name":"Ibrahim El_Khatib"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1480142950,"creation_date":1422617747,"answer_id":28235052,"question_id":13253221,"body_markdown":"just add spaces like this:\r\n\r\nsuppose message equal your content string and pattern is your keyword\r\n\r\n\r\n \r\n\r\n     if ((message).matches(&quot;.* &quot; + pattern + &quot; .*&quot;)||(message).matches(&quot;^&quot; + pattern + &quot; .*&quot;)\r\n                ||(message).matches(&quot;.* &quot; + pattern + &quot;$&quot;)) {","title":"String Matches, Java","body":"<p>just add spaces like this:</p>\n\n<p>suppose message equal your content string and pattern is your keyword</p>\n\n<pre><code> if ((message).matches(\".* \" + pattern + \" .*\")||(message).matches(\"^\" + pattern + \" .*\")\n            ||(message).matches(\".* \" + pattern + \"$\")) {\n</code></pre>\n"}],"owner":{"account_id":1191849,"reputation":980,"user_id":1164423,"accept_rate":70,"display_name":"Christian Eric Paran"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7451,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1637107245,"creation_date":1352212424,"question_id":13253221,"body_markdown":"I have a sort of a problem with this code:\r\n\r\n\r\n    String[] paragraph;\r\n    if(paragraph[searchKeyword_counter].matches(&quot;(.*)(\\\\b)&quot;+&quot;is&quot;+&quot;(\\\\b)(.*)&quot;)){\r\n\r\nif i am not mistaken to use `.matches()` and search a particular character in a string i need a `.*` but what i want to happen is to search a character without matching it to another word.\r\nFor example `is` the keyword i am going to search I do not want it to match with words that contain `is` character like `ship, his, this`. so i used `\\b` for boundary but the code above is not working for me.\r\n\r\n\r\nExample:\r\n\r\n    String[] Content= {&quot;is,&quot;,&quot;his&quot;,&quot;fish&quot;,&quot;ish&quot;,&quot;its&quot;,&quot;is&quot;};\r\n    String keyword = &quot;is&quot;;\r\n    for(int i=0;i&lt;Content.length;i++){\r\n        if(content[i].matches(&quot;(.*)(\\\\b)&quot;+keyword+&quot;(\\\\b)(.*)&quot;)){\r\n             System.out.println(&quot;There are &quot;+i+&quot; is.&quot;);\r\n        }\r\n    }\r\n\r\nWhat i want to happen here is that it will only match with `is is,` but not with `his fish`. So `is` should match with `is, and is` meaning I want it to match even the character is beside a non-alphanumerical character and spaces.\r\n\r\n\r\n**What is the problem with the code above?**\r\n\r\n\r\nwhat if one of the content has a uppercase character example `IS` and it is compared with `is`, it will be unmatched. Correct my if i am wrong. **How to match a lower cased character to a upper cased character without changing the content of the source?**\r\n\r\n","title":"String Matches, Java","body":"<p>I have a sort of a problem with this code:</p>\n\n<pre><code>String[] paragraph;\nif(paragraph[searchKeyword_counter].matches(\"(.*)(\\\\b)\"+\"is\"+\"(\\\\b)(.*)\")){\n</code></pre>\n\n<p>if i am not mistaken to use <code>.matches()</code> and search a particular character in a string i need a <code>.*</code> but what i want to happen is to search a character without matching it to another word.\nFor example <code>is</code> the keyword i am going to search I do not want it to match with words that contain <code>is</code> character like <code>ship, his, this</code>. so i used <code>\\b</code> for boundary but the code above is not working for me.</p>\n\n<p>Example:</p>\n\n<pre><code>String[] Content= {\"is,\",\"his\",\"fish\",\"ish\",\"its\",\"is\"};\nString keyword = \"is\";\nfor(int i=0;i&lt;Content.length;i++){\n    if(content[i].matches(\"(.*)(\\\\b)\"+keyword+\"(\\\\b)(.*)\")){\n         System.out.println(\"There are \"+i+\" is.\");\n    }\n}\n</code></pre>\n\n<p>What i want to happen here is that it will only match with <code>is is,</code> but not with <code>his fish</code>. So <code>is</code> should match with <code>is, and is</code> meaning I want it to match even the character is beside a non-alphanumerical character and spaces.</p>\n\n<p><strong>What is the problem with the code above?</strong></p>\n\n<p>what if one of the content has a uppercase character example <code>IS</code> and it is compared with <code>is</code>, it will be unmatched. Correct my if i am wrong. <strong>How to match a lower cased character to a upper cased character without changing the content of the source?</strong></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":0,"creation_date":1252523924,"post_id":1401520,"comment_id":1242792,"body_markdown":"The solution outlined sounds pretty good. Rather than having the urgent task re-add the scheduled task, it seems like the event handler would be in a good position to do this. It needs a handle to the new Future anyway.","body":"The solution outlined sounds pretty good. Rather than having the urgent task re-add the scheduled task, it seems like the event handler would be in a good position to do this. It needs a handle to the new Future anyway."}],"answers":[{"tags":[],"owner":{"account_id":40537,"reputation":2045,"user_id":117459,"display_name":"vtrubnikov"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1252530081,"creation_date":1252530081,"answer_id":1402077,"question_id":1401520,"body_markdown":"If you are using `ScheduledThreadPoolExecutor` there is a method `decorateTask` (well in fact there are two, for Runnable and Callable tasks) that you can override to store a reference to the task somewhere.\r\n\r\nWhen you need urgent execution, you just call `run()` on that reference which makes it run and rescheduled with same delay.\r\n\r\nA quick hack-up attempt:\r\n&lt;pre&gt;public class UrgentScheduledThreadPoolExecutor extends\r\n\t\tScheduledThreadPoolExecutor {\r\n\tRunnableScheduledFuture scheduledTask;\r\n\r\n\tpublic UrgentScheduledThreadPoolExecutor(int corePoolSize) {\r\n\t\tsuper(corePoolSize);\r\n\t}\r\n\r\n\t@Override\r\n\tprotected &lt;V&gt; RunnableScheduledFuture&lt;V&gt; decorateTask(Runnable runnable,\r\n\t\t\tRunnableScheduledFuture&lt;V&gt; task) {\r\n\t\tscheduledTask = task;\r\n\t\treturn super.decorateTask(runnable, task);\r\n\t}\r\n\r\n\tpublic void runUrgently() {\r\n\t\tthis.scheduledTask.run();\r\n\t}\r\n}&lt;/pre&gt;\r\n\r\nwhich can be used like this:\r\n\r\n&lt;pre&gt;public class UrgentExecutionTest {\r\n\r\n\tpublic static void main(String[] args) throws Exception {\r\n\t\tUrgentScheduledThreadPoolExecutor pool = new UrgentScheduledThreadPoolExecutor(5);\r\n\t\t\r\n\t\tpool.scheduleWithFixedDelay(new Runnable() {\r\n\t\t\tSimpleDateFormat format = new SimpleDateFormat(&quot;ss&quot;); \r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void run() {\r\n\t\t\t\tSystem.out.println(format.format(new Date()));\r\n\t\t\t}\r\n\t\t}, 0, 2L, TimeUnit.SECONDS);\r\n\t\tThread.sleep(7000);\r\n\t\tpool.runUrgently();\r\n\t\tpool.awaitTermination(600, TimeUnit.SECONDS);\r\n\t}\r\n}&lt;/pre&gt;\r\n\r\nand produces the following output:\r\n&lt;pre&gt;06\r\n08\r\n10\r\n***11***\r\n13\r\n15&lt;/pre","title":"ScheduledThreadPoolExecutor scheduleWithFixedDelay and &quot;urgent&quot; execution","body":"<p>If you are using <code>ScheduledThreadPoolExecutor</code> there is a method <code>decorateTask</code> (well in fact there are two, for Runnable and Callable tasks) that you can override to store a reference to the task somewhere.</p>\n\n<p>When you need urgent execution, you just call <code>run()</code> on that reference which makes it run and rescheduled with same delay.</p>\n\n<p>A quick hack-up attempt:</p>\n\n<pre>public class UrgentScheduledThreadPoolExecutor extends\n        ScheduledThreadPoolExecutor {\n    RunnableScheduledFuture scheduledTask;\n\n    public UrgentScheduledThreadPoolExecutor(int corePoolSize) {\n        super(corePoolSize);\n    }\n\n    @Override\n    protected  RunnableScheduledFuture decorateTask(Runnable runnable,\n            RunnableScheduledFuture task) {\n        scheduledTask = task;\n        return super.decorateTask(runnable, task);\n    }\n\n    public void runUrgently() {\n        this.scheduledTask.run();\n    }\n}</pre>\n\n<p>which can be used like this:</p>\n\n<pre>public class UrgentExecutionTest {\n\n    public static void main(String[] args) throws Exception {\n        UrgentScheduledThreadPoolExecutor pool = new UrgentScheduledThreadPoolExecutor(5);\n\n        pool.scheduleWithFixedDelay(new Runnable() {\n            SimpleDateFormat format = new SimpleDateFormat(\"ss\"); \n\n            @Override\n            public void run() {\n                System.out.println(format.format(new Date()));\n            }\n        }, 0, 2L, TimeUnit.SECONDS);\n        Thread.sleep(7000);\n        pool.runUrgently();\n        pool.awaitTermination(600, TimeUnit.SECONDS);\n    }\n}</pre>\n\n<p>and produces the following output:\n06\n08\n10\n<strong><em>11</em></strong>\n13\n15\n"},{"tags":[],"owner":{"account_id":3202753,"reputation":6346,"user_id":2704500,"accept_rate":50,"display_name":"pandaadb"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1489163774,"creation_date":1489163774,"answer_id":42723351,"question_id":1401520,"body_markdown":"as requested (soz, in a hurry) my EventBasedExecutor\r\n\r\nWarning: **This currently only works for tasks that are scheduled in a periodic run. You can change the code to handle all the tasks, I so far haven&#39;t because I only have the periodically run task. I also run this in a signle-threaded threadpool (I only need one scheduled runner thread that is that runs in one dedicated thread all the time every X seconds)**\r\n\r\nHere we go: \r\n\r\n    public class EventBasedExecutor extends ScheduledThreadPoolExecutor implements EventBasedExecutorService {\r\n    \t\r\n    \tprivate List&lt;RunnableScheduledFuture&lt;?&gt;&gt; workers = new ArrayList&lt;&gt;();\r\n    \t\r\n    \tprivate int index;\r\n    \t\r\n    \tpublic EventBasedExecutor(int corePoolSize) {\r\n    \t\tsuper(corePoolSize,  new ThreadFactoryBuilder().setDaemon(true).setNameFormat(&quot;message-sender-%d&quot;).build());\r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tprotected &lt;V&gt; RunnableScheduledFuture&lt;V&gt; decorateTask(Runnable runnable, RunnableScheduledFuture&lt;V&gt; task) {\r\n    \t\tif(!workers.contains(runnable)) {\r\n    \t\t\tworkers.add(task);\r\n    \t\t}\r\n    \t\treturn super.decorateTask(runnable, task);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void executeEarly() {\r\n    \t\tif(index &gt;= workers.size()) {\r\n    \t\t\tindex = 0;\r\n    \t\t}\r\n    \t\t\r\n    \t\tif(workers.size() == 0) {\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \t\t\r\n    \t\tRunnableScheduledFuture&lt;?&gt; runnableScheduledFuture = workers.get(index);\r\n    \t\tindex ++;\r\n    \t\texecute(runnableScheduledFuture);\r\n            System.out.println(&quot;Executing&quot;);\r\n    \t}\r\n    \r\n    \t\r\n    \tpublic static void main(String[] args) throws InterruptedException {\r\n    \t\tEventBasedExecutor executor = new EventBasedExecutor(10);\r\n    \t\t\t\r\n    \t\tlong currentTimeMillis = System.currentTimeMillis();\r\n    \r\n    \t\t// this will never run\r\n    \t\texecutor.scheduleAtFixedRate(() -&gt; {\r\n    \t\t\tSystem.out.println(&quot;hello&quot;);\r\n    \t\t}, 5000, 5000, TimeUnit.HOURS);\r\n    \t\t\r\n    \t\texecutor.executeEarly();\r\n    \t\t\r\n    \t\tSystem.out.println(&quot;Run after: &quot; + (System.currentTimeMillis() - currentTimeMillis));\r\n    \t}\r\n    \t\r\n    }\r\n\r\nThis will execute the task in the dedicated worker thread. \r\n\r\nIt will print:\r\n\r\n    Executing\r\n    hello\r\n    Run after: 39\r\n\r\n\r\nHave fun hacking :) \r\n\r\nartur ","title":"ScheduledThreadPoolExecutor scheduleWithFixedDelay and &quot;urgent&quot; execution","body":"<p>as requested (soz, in a hurry) my EventBasedExecutor</p>\n\n<p>Warning: <strong>This currently only works for tasks that are scheduled in a periodic run. You can change the code to handle all the tasks, I so far haven't because I only have the periodically run task. I also run this in a signle-threaded threadpool (I only need one scheduled runner thread that is that runs in one dedicated thread all the time every X seconds)</strong></p>\n\n<p>Here we go: </p>\n\n<pre><code>public class EventBasedExecutor extends ScheduledThreadPoolExecutor implements EventBasedExecutorService {\n\n    private List&lt;RunnableScheduledFuture&lt;?&gt;&gt; workers = new ArrayList&lt;&gt;();\n\n    private int index;\n\n    public EventBasedExecutor(int corePoolSize) {\n        super(corePoolSize,  new ThreadFactoryBuilder().setDaemon(true).setNameFormat(\"message-sender-%d\").build());\n    }\n\n    @Override\n    protected &lt;V&gt; RunnableScheduledFuture&lt;V&gt; decorateTask(Runnable runnable, RunnableScheduledFuture&lt;V&gt; task) {\n        if(!workers.contains(runnable)) {\n            workers.add(task);\n        }\n        return super.decorateTask(runnable, task);\n    }\n\n    @Override\n    public void executeEarly() {\n        if(index &gt;= workers.size()) {\n            index = 0;\n        }\n\n        if(workers.size() == 0) {\n            return;\n        }\n\n        RunnableScheduledFuture&lt;?&gt; runnableScheduledFuture = workers.get(index);\n        index ++;\n        execute(runnableScheduledFuture);\n        System.out.println(\"Executing\");\n    }\n\n\n    public static void main(String[] args) throws InterruptedException {\n        EventBasedExecutor executor = new EventBasedExecutor(10);\n\n        long currentTimeMillis = System.currentTimeMillis();\n\n        // this will never run\n        executor.scheduleAtFixedRate(() -&gt; {\n            System.out.println(\"hello\");\n        }, 5000, 5000, TimeUnit.HOURS);\n\n        executor.executeEarly();\n\n        System.out.println(\"Run after: \" + (System.currentTimeMillis() - currentTimeMillis));\n    }\n\n}\n</code></pre>\n\n<p>This will execute the task in the dedicated worker thread. </p>\n\n<p>It will print:</p>\n\n<pre><code>Executing\nhello\nRun after: 39\n</code></pre>\n\n<p>Have fun hacking :) </p>\n\n<p>artur </p>\n"},{"tags":[],"owner":{"account_id":75428,"reputation":9496,"user_id":216374,"accept_rate":100,"display_name":"Alex Pakka"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637107029,"creation_date":1637107029,"answer_id":69997451,"question_id":1401520,"body_markdown":"There is also an obvious simple solution that does not require a new class.\r\nThe idea is to cancel the schedule on notification and re-schedule again:\r\n\r\n\r\n```java\r\nclass MyClass {\r\n  \r\n    final static int DECISION_POINT = 1; //millisecond\r\n\r\n    final ScheduledExecutorService executor = newSingleThreadScheduledExecutor();\r\n    private ScheduledFuture&lt;?&gt; periodicFuture;\r\n\r\n    MyClass() {\r\n        periodicFuture = executor.scheduleWithFixedDelay(this::doWork, 1, 2,\r\n            TimeUnit.SECONDS);\r\n    }\r\n\r\n    void doWorkAsap() {\r\n        if (periodicFuture.getDelay(TimeUnit.MILLISECONDS) &gt; DECISION_POINT) {\r\n            periodicFuture.cancel(true);\r\n            periodicFuture = executor.scheduleWithFixedDelay(this::doWork,\r\n                0, 2000, TimeUnit.MILLISECONDS);\r\n        }\r\n    }\r\n\r\n    void doWork() { ... }\r\n\r\n}\r\n```\r\n\r\nThis only works well in certain situations where delay between tasks is reasonably big relative to overall system performance and overhead of creating new ScheduledFuture is acceptable. Also, special attention needs to be paid to the point of no return, called `DECISION_POINT` here, where it makes no more sense to schedule the new future, as natural order of things would be fast enough. For the tighter schedules than in the example above, use an approach similar to the pandaab one. ","title":"ScheduledThreadPoolExecutor scheduleWithFixedDelay and &quot;urgent&quot; execution","body":"<p>There is also an obvious simple solution that does not require a new class.\nThe idea is to cancel the schedule on notification and re-schedule again:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class MyClass {\n  \n    final static int DECISION_POINT = 1; //millisecond\n\n    final ScheduledExecutorService executor = newSingleThreadScheduledExecutor();\n    private ScheduledFuture&lt;?&gt; periodicFuture;\n\n    MyClass() {\n        periodicFuture = executor.scheduleWithFixedDelay(this::doWork, 1, 2,\n            TimeUnit.SECONDS);\n    }\n\n    void doWorkAsap() {\n        if (periodicFuture.getDelay(TimeUnit.MILLISECONDS) &gt; DECISION_POINT) {\n            periodicFuture.cancel(true);\n            periodicFuture = executor.scheduleWithFixedDelay(this::doWork,\n                0, 2000, TimeUnit.MILLISECONDS);\n        }\n    }\n\n    void doWork() { ... }\n\n}\n</code></pre>\n<p>This only works well in certain situations where delay between tasks is reasonably big relative to overall system performance and overhead of creating new ScheduledFuture is acceptable. Also, special attention needs to be paid to the point of no return, called <code>DECISION_POINT</code> here, where it makes no more sense to schedule the new future, as natural order of things would be fast enough. For the tighter schedules than in the example above, use an approach similar to the pandaab one.</p>\n"}],"owner":{"account_id":34726,"reputation":359,"user_id":98166,"accept_rate":80,"display_name":"user98166"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3307,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":1402077,"answer_count":3,"score":7,"last_activity_date":1637107029,"creation_date":1252523627,"question_id":1401520,"body_markdown":"I have the following problem that the standard library doesn&#39;t solve well, and I&#39;m wondering if anybody has seen another library out there than can do it so I don&#39;t need to hack together a custom solution.  I have a task that is currently scheduled on a thread pool using scheduleWithFixedDelay(), and I need to modify the code to handle requests for &quot;urgent&quot; execution of the task related to asynchronous events.  Thus, if the task is scheduled to occur with a delay of 5 minutes between executions, and an event occurs 2 minutes after the last completed execution, I would like to execute the task immediately and then have it wait for 5 minutes after the completion of the urgent execution before it runs again.  Right now the best solution that I can come up with is to have the event handler call cancel() on the ScheduledFuture object returned by scheduleWithFixedDelay() and execute the task immediately, and then set a flag in the task to tell it to reschedule itself with the same delay parameters.  Is this functionality available already and I&#39;m just missing something in the documentation?","title":"ScheduledThreadPoolExecutor scheduleWithFixedDelay and &quot;urgent&quot; execution","body":"<p>I have the following problem that the standard library doesn't solve well, and I'm wondering if anybody has seen another library out there than can do it so I don't need to hack together a custom solution.  I have a task that is currently scheduled on a thread pool using scheduleWithFixedDelay(), and I need to modify the code to handle requests for \"urgent\" execution of the task related to asynchronous events.  Thus, if the task is scheduled to occur with a delay of 5 minutes between executions, and an event occurs 2 minutes after the last completed execution, I would like to execute the task immediately and then have it wait for 5 minutes after the completion of the urgent execution before it runs again.  Right now the best solution that I can come up with is to have the event handler call cancel() on the ScheduledFuture object returned by scheduleWithFixedDelay() and execute the task immediately, and then set a flag in the task to tell it to reschedule itself with the same delay parameters.  Is this functionality available already and I'm just missing something in the documentation?</p>\n"},{"tags":["java","string","char"],"comments":[{"owner":{"account_id":6113584,"reputation":2059,"user_id":4769313,"accept_rate":44,"display_name":"Sir Jo Black"},"score":0,"creation_date":1582027089,"post_id":60280325,"comment_id":106627413,"body_markdown":"Can you better explain what do you need? The question is not clear (for me).","body":"Can you better explain what do you need? The question is not clear (for me)."},{"owner":{"account_id":15768956,"reputation":136,"user_id":11378520,"display_name":"Cleo"},"score":0,"creation_date":1582027442,"post_id":60280325,"comment_id":106627620,"body_markdown":"Let&#39;s say i have 2 strings  that are user input. First String is:&quot;car&quot; and the second is &quot;restaurant&quot; i want to get &#39;c&#39; on 3 position so it will be:&quot;rectaurant&quot; then &#39;a&#39; on the 6 position so it will be &quot;rectaarant&quot;  and &#39;r&#39; on 9 if it possible","body":"Let&#39;s say i have 2 strings  that are user input. First String is:&quot;car&quot; and the second is &quot;restaurant&quot; i want to get &#39;c&#39; on 3 position so it will be:&quot;rectaurant&quot; then &#39;a&#39; on the 6 position so it will be &quot;rectaarant&quot;  and &#39;r&#39; on 9 if it possible"}],"answers":[{"tags":[],"owner":{"account_id":2596537,"reputation":1234,"user_id":2250097,"display_name":"tomgeraghty3"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1582028489,"creation_date":1582027707,"answer_id":60280591,"question_id":60280325,"body_markdown":"If I&#39;ve understood correctly this should work. everyX in your example would be 3\r\n\r\n\r\n    public static String encrypt(String s1, String s2, int everyX) {\r\n        //Start with S2\r\n        StringBuilder finalS2 = new StringBuilder(s2);\r\n        s1 = s1.toLowerCase();\r\n\r\n        int indexInS1 = 0;\r\n        //Whilst there are characters in S2 and S1 left to iterate over\r\n        for (int placeInS2 = 0; placeInS2 &lt; finalS2.length() &amp;&amp; indexInS1 &lt; s1.length(); placeInS2++) {\r\n             //Has there been everyX places encountered and the character in S1 is alphanumeric\r\n            if ((placeInS2 + 1) % everyX == 0) {\r\n                if (Character.isAlphabetic(s1.charAt(indexInS1)) {\r\n                    finalS2.setCharAt(placeInS2, s1.charAt(indexInS1));\r\n                }\r\n                indexInS1++;\r\n            }\r\n        }\r\n\r\n        return finalS2.toString();\r\n    }","title":"How to change chars between 2 strings?","body":"<p>If I've understood correctly this should work. everyX in your example would be 3</p>\n\n<pre><code>public static String encrypt(String s1, String s2, int everyX) {\n    //Start with S2\n    StringBuilder finalS2 = new StringBuilder(s2);\n    s1 = s1.toLowerCase();\n\n    int indexInS1 = 0;\n    //Whilst there are characters in S2 and S1 left to iterate over\n    for (int placeInS2 = 0; placeInS2 &lt; finalS2.length() &amp;&amp; indexInS1 &lt; s1.length(); placeInS2++) {\n         //Has there been everyX places encountered and the character in S1 is alphanumeric\n        if ((placeInS2 + 1) % everyX == 0) {\n            if (Character.isAlphabetic(s1.charAt(indexInS1)) {\n                finalS2.setCharAt(placeInS2, s1.charAt(indexInS1));\n            }\n            indexInS1++;\n        }\n    }\n\n    return finalS2.toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1582028683,"creation_date":1582028683,"answer_id":60280842,"question_id":60280325,"body_markdown":"So you want to take the original text of `s2` and replace every third character with characters from `s1`:\r\n\r\n```\r\ns1: abc\r\n    ││└───── ignored\r\n    │└───┐\r\n    └─┐  │\r\ns2: abcdef\r\n```\r\n\r\nBest way to do incremental single-char replacements like that is to get the `char[]` of the original string (`s2`), replace the appropriate characters, then build the resultant string from that.\r\n\r\n\tpublic static String encrypt(String s1, String s2) {\r\n\t\tchar[] buf = s2.toCharArray();\r\n\t\tfor (int i = 0, j = 2; i &lt; s1.length() &amp;&amp; j &lt; buf.length; i++, j += 3) {\r\n\t\t\tbuf[j] = Character.toLowerCase(s1.charAt(i));\r\n\t\t}\r\n\t\treturn new String(buf);\r\n\t}\r\n\r\n*Test*\r\n\r\n\tSystem.out.println(encrypt(&quot;abc&quot;, &quot;abcdef&quot;));\r\n\r\n*Output*\r\n\r\n```lang-none\r\nabadeb\r\n```\r\n\r\nIf you want the code to handle characters from the Unicode supplemental planes, e.g. emojis, then you need to work with code points.\r\n\r\nYou also mentioned that you only want letters from `s1`, so we&#39;ll add that to the next version *(`codePoints()` requires Java 9+)*.\r\n\r\n\tpublic static String encrypt(String s1, String s2) {\r\n\t\tint[] c1 = s1.codePoints().toArray();\r\n\t\tint[] c2 = s2.codePoints().toArray();\r\n\t\tfor (int i = 0, j = 2; i &lt; c1.length &amp;&amp; j &lt; c2.length; i++) {\r\n\t\t\tif (Character.isLetter(c1[i])) {\r\n\t\t\t\tc2[j] = Character.toLowerCase(c1[i]);\r\n\t\t\t\tj += 3;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn new String(c2, 0, c2.length);\r\n\t}\r\n\r\n*Test*\r\n\r\n\tSystem.out.println(encrypt(&quot;abc&quot;, &quot;abcdef&quot;));\r\n\tSystem.out.println(encrypt(&quot;a&#128520;c&#128127;e&quot;, &quot;a&#128512;c&#128515;e&#128516;g&#128513;i&#128518;k&#128517;m&#129315;&quot;));\r\n\r\n*Output*\r\n\r\n```lang-none\r\nabadeb\r\na&#128512;a&#128515;ecg&#128513;e&#128518;k&#128517;m&#129315;\r\n```\r\n\r\nAs you can see, emoji characters in `s1` are skipped, since they are not &quot;letters&quot;, and emojis in `s2` are correctly replaced. Even though `&#128516;` takes up 2 `char` positions in `s2`, it is correct replaced by `c`, a single `char` value.","title":"How to change chars between 2 strings?","body":"<p>So you want to take the original text of <code>s2</code> and replace every third character with characters from <code>s1</code>:</p>\n\n<pre><code>s1: abc\n    ││└───── ignored\n    │└───┐\n    └─┐  │\ns2: abcdef\n</code></pre>\n\n<p>Best way to do incremental single-char replacements like that is to get the <code>char[]</code> of the original string (<code>s2</code>), replace the appropriate characters, then build the resultant string from that.</p>\n\n<pre><code>public static String encrypt(String s1, String s2) {\n    char[] buf = s2.toCharArray();\n    for (int i = 0, j = 2; i &lt; s1.length() &amp;&amp; j &lt; buf.length; i++, j += 3) {\n        buf[j] = Character.toLowerCase(s1.charAt(i));\n    }\n    return new String(buf);\n}\n</code></pre>\n\n<p><em>Test</em></p>\n\n<pre><code>System.out.println(encrypt(\"abc\", \"abcdef\"));\n</code></pre>\n\n<p><em>Output</em></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>abadeb\n</code></pre>\n\n<p>If you want the code to handle characters from the Unicode supplemental planes, e.g. emojis, then you need to work with code points.</p>\n\n<p>You also mentioned that you only want letters from <code>s1</code>, so we'll add that to the next version <em>(<code>codePoints()</code> requires Java 9+)</em>.</p>\n\n<pre><code>public static String encrypt(String s1, String s2) {\n    int[] c1 = s1.codePoints().toArray();\n    int[] c2 = s2.codePoints().toArray();\n    for (int i = 0, j = 2; i &lt; c1.length &amp;&amp; j &lt; c2.length; i++) {\n        if (Character.isLetter(c1[i])) {\n            c2[j] = Character.toLowerCase(c1[i]);\n            j += 3;\n        }\n    }\n    return new String(c2, 0, c2.length);\n}\n</code></pre>\n\n<p><em>Test</em></p>\n\n<pre><code>System.out.println(encrypt(\"abc\", \"abcdef\"));\nSystem.out.println(encrypt(\"a😈c👿e\", \"a😀c😃e😄g😁i😆k😅m🤣\"));\n</code></pre>\n\n<p><em>Output</em></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>abadeb\na😀a😃ecg😁e😆k😅m🤣\n</code></pre>\n\n<p>As you can see, emoji characters in <code>s1</code> are skipped, since they are not \"letters\", and emojis in <code>s2</code> are correctly replaced. Even though <code>😄</code> takes up 2 <code>char</code> positions in <code>s2</code>, it is correct replaced by <code>c</code>, a single <code>char</code> value.</p>\n"}],"owner":{"account_id":15768956,"reputation":136,"user_id":11378520,"display_name":"Cleo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60280591,"answer_count":2,"score":0,"last_activity_date":1637106737,"creation_date":1582026851,"question_id":60280325,"body_markdown":"I want to change a char in a String with another in second String, the distance is 3.\r\n\r\nFor example:  \r\nString s1:abc,\r\nString s2:abcdef-&gt;s2 will be abadef then -&gt; abadeb.\r\n\r\nIf it is possible all chars from first String should goes to second s2. I have to mention that upperCase letters from the first should be lowerCase, and only letters will be taken from the first String. I know Strings are immutable\r\n\r\n    public static void Encrypt(String s1, String s2) {\r\n    \t\ts1 = s1.toLowerCase();\r\n    \t\tStringBuilder finalS2 = new StringBuilder();\r\n    \t\tfinalS2.append(s2);\r\n    \r\n    \t\tfor (int i = 0; i &lt; finalS2.length(); i++) {\r\n    \r\n    \t\t\tif (s1.charAt(i) &gt;= &#39;a&#39; &amp;&amp; s1.charAt(i) &lt;= &#39;z&#39;) {\r\n    \r\n    \t\t\t\tfinalS2.setCharAt(i + 2, s1.charAt(0));\r\n    \r\n    \t\t\t\tbreak;\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\tSystem.out.println(finalS2);\r\n    \t}\r\n\r\nI think in my method, which I don&#39;t think is a good idea, I should place another for loop for s1 and a break somewhere. I tried many methods, with charArray, etc. but didn&#39;t managed.","title":"How to change chars between 2 strings?","body":"<p>I want to change a char in a String with another in second String, the distance is 3.</p>\n<p>For example:<br />\nString s1:abc,\nString s2:abcdef-&gt;s2 will be abadef then -&gt; abadeb.</p>\n<p>If it is possible all chars from first String should goes to second s2. I have to mention that upperCase letters from the first should be lowerCase, and only letters will be taken from the first String. I know Strings are immutable</p>\n<pre><code>public static void Encrypt(String s1, String s2) {\n        s1 = s1.toLowerCase();\n        StringBuilder finalS2 = new StringBuilder();\n        finalS2.append(s2);\n\n        for (int i = 0; i &lt; finalS2.length(); i++) {\n\n            if (s1.charAt(i) &gt;= 'a' &amp;&amp; s1.charAt(i) &lt;= 'z') {\n\n                finalS2.setCharAt(i + 2, s1.charAt(0));\n\n                break;\n            }\n        }\n\n        System.out.println(finalS2);\n    }\n</code></pre>\n<p>I think in my method, which I don't think is a good idea, I should place another for loop for s1 and a break somewhere. I tried many methods, with charArray, etc. but didn't managed.</p>\n"},{"tags":["java","api","heroku","google-cloud-platform","google-cloud-vision"],"owner":{"account_id":19064393,"reputation":11,"user_id":13919769,"display_name":"Yihao Liu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":152,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1637106716,"creation_date":1637106716,"question_id":69997414,"body_markdown":"I have an app that uses Google cloud vision API. I tried the following ways: \r\n1. Create a .profile that contains echo ${GOOGLE_CREDENTIALS} &gt; /app/google-credentials.json. And set GOOGLE_APPLICATION_CREDENTIALS=/app/google-credentials.json, GOOGLE_CREDENTIALS=&lt;CONTENTS OF YOU GCP KEY&gt;. I tried to commit the .profile file but was not able to locate it anywhere in the dyno file system. My question with this method is, if I want to create a file in the ephemeral file system, how do I do it? Is putting it in the root of my IntelliJ project, git add and git push the right way?\r\n2. Manually run the heroku bash, and echo a json file with the credentials. Even though when I $ls the directory I saw the file, the app reports \r\n\r\n    &quot;Error reading credential file from environment variable GOOGLE_APPLICATION_CREDENTIALS, value &#39;$HOME/google-credentials.json&#39;: File does not exist.&quot;\r\n\r\n3. Push the json directly in the git (I know it is not secure, but I was so desperate). This did not work either.","title":"Deploying Heroku app with a google-credential.json","body":"<p>I have an app that uses Google cloud vision API. I tried the following ways:</p>\n<ol>\n<li><p>Create a .profile that contains echo ${GOOGLE_CREDENTIALS} &gt; /app/google-credentials.json. And set GOOGLE_APPLICATION_CREDENTIALS=/app/google-credentials.json, GOOGLE_CREDENTIALS=. I tried to commit the .profile file but was not able to locate it anywhere in the dyno file system. My question with this method is, if I want to create a file in the ephemeral file system, how do I do it? Is putting it in the root of my IntelliJ project, git add and git push the right way?</p>\n</li>\n<li><p>Manually run the heroku bash, and echo a json file with the credentials. Even though when I $ls the directory I saw the file, the app reports</p>\n<p>&quot;Error reading credential file from environment variable GOOGLE_APPLICATION_CREDENTIALS, value '$HOME/google-credentials.json': File does not exist.&quot;</p>\n</li>\n<li><p>Push the json directly in the git (I know it is not secure, but I was so desperate). This did not work either.</p>\n</li>\n</ol>\n"},{"tags":["java","kotlin","hashmap"],"comments":[{"owner":{"account_id":10640537,"reputation":2697,"user_id":7835745,"display_name":"Abdul Kawee"},"score":0,"creation_date":1535367725,"post_id":52037691,"comment_id":91025891,"body_markdown":"so why not use `Hashmap` instead of `mutableMapOf`","body":"so why not use <code>Hashmap</code> instead of <code>mutableMapOf</code>"},{"owner":{"account_id":11499354,"reputation":598,"user_id":8427587,"accept_rate":75,"display_name":"Fadel Trivandi Dipantara"},"score":0,"creation_date":1535368275,"post_id":52037691,"comment_id":91026211,"body_markdown":"Well, it also gives me an error, Required: Hashmap&lt;String!, Any!&gt;! Found: Hashmap&lt;String, String&gt;","body":"Well, it also gives me an error, Required: Hashmap&lt;String!, Any!&gt;! Found: Hashmap&lt;String, String&gt;"},{"owner":{"account_id":10640537,"reputation":2697,"user_id":7835745,"display_name":"Abdul Kawee"},"score":0,"creation_date":1535369282,"post_id":52037691,"comment_id":91026797,"body_markdown":"please check the answer @Fadel","body":"please check the answer @Fadel"}],"answers":[{"tags":[],"owner":{"account_id":6871529,"reputation":627,"user_id":5281666,"display_name":"Milos Lulic"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1535367889,"creation_date":1535367889,"answer_id":52037893,"question_id":52037691,"body_markdown":"You need to use HashMap&lt;&gt; istead mutableMapOf()\r\n\r\n        val params = HashMap&lt;String, String&gt;()\r\n        params.put(&quot;name&quot;, response.name)\r\n        params.put(&quot;type&quot;, response.type)\r\n        product.params = params","title":"Convert Kotlin MutableMap to java.util.HashMap","body":"<p>You need to use HashMap&lt;> istead mutableMapOf()</p>\n\n<pre><code>    val params = HashMap&lt;String, String&gt;()\n    params.put(\"name\", response.name)\n    params.put(\"type\", response.type)\n    product.params = params\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14082156,"reputation":2612,"user_id":10172915,"display_name":"Akaki Kapanadze"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1637105904,"creation_date":1535369240,"answer_id":52038275,"question_id":52037691,"body_markdown":"You can construct a new `HashMap` from the params:\r\n\r\n    val params = mutableMapOf&lt;String, String&gt;(\r\n        &quot;name&quot; to response.name,\r\n        &quot;type&quot; to response.type\r\n    )\r\n    product.params = HashMap(params)","title":"Convert Kotlin MutableMap to java.util.HashMap","body":"<p>You can construct a new <code>HashMap</code> from the params:</p>\n<pre><code>val params = mutableMapOf&lt;String, String&gt;(\n    &quot;name&quot; to response.name,\n    &quot;type&quot; to response.type\n)\nproduct.params = HashMap(params)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2806090,"reputation":80148,"user_id":2413303,"accept_rate":100,"display_name":"EpicPandaForce"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1535369715,"creation_date":1535369715,"answer_id":52038421,"question_id":52037691,"body_markdown":"You can use [`hashMapOf`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/hash-map-of.html) instead.\r\n\r\n    product.params = hashMapOf&lt;String, Any?&gt;(\r\n        &quot;name&quot; to response.name,\r\n        &quot;type&quot; to response.type\r\n    )","title":"Convert Kotlin MutableMap to java.util.HashMap","body":"<p>You can use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/hash-map-of.html\" rel=\"nofollow noreferrer\"><code>hashMapOf</code></a> instead.</p>\n\n<pre><code>product.params = hashMapOf&lt;String, Any?&gt;(\n    \"name\" to response.name,\n    \"type\" to response.type\n)\n</code></pre>\n"}],"owner":{"account_id":11499354,"reputation":598,"user_id":8427587,"accept_rate":75,"display_name":"Fadel Trivandi Dipantara"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14871,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":52038421,"answer_count":3,"score":9,"last_activity_date":1637105904,"creation_date":1535367113,"question_id":52037691,"body_markdown":"I am working with a pretty old project that has a lot of java code in it, and to replace it, it will be too much of a hassle, and as kotlin is much better than java, I&#39;m trying to coed all the new code in kotlin, but when I try to access a java code with this kotlin code\r\n\r\n    val params = mutableMapOf&lt;String, String&gt;(\r\n        &quot;name&quot; to response.name,\r\n        &quot;type&quot; to response.type\r\n    )\r\n    product.params = params\r\n\r\nI got a red underline below the `params`, it said\r\n\r\n    Required: Hashmap&lt;String!, Any!&gt;!\r\n    Found: MutableMap&lt;String, String&gt;\r\n\r\nThis is my java setter\r\n\r\n    public void setParams(HashMap&lt;String, Object&gt; params){\r\n        this.params = params;\r\n    }\r\n\r\nCan I fix this without changing the java code? Please help if it is possible, or if it is not, and what is the workaround to fix this.\r\n","title":"Convert Kotlin MutableMap to java.util.HashMap","body":"<p>I am working with a pretty old project that has a lot of java code in it, and to replace it, it will be too much of a hassle, and as kotlin is much better than java, I'm trying to coed all the new code in kotlin, but when I try to access a java code with this kotlin code</p>\n\n<pre><code>val params = mutableMapOf&lt;String, String&gt;(\n    \"name\" to response.name,\n    \"type\" to response.type\n)\nproduct.params = params\n</code></pre>\n\n<p>I got a red underline below the <code>params</code>, it said</p>\n\n<pre><code>Required: Hashmap&lt;String!, Any!&gt;!\nFound: MutableMap&lt;String, String&gt;\n</code></pre>\n\n<p>This is my java setter</p>\n\n<pre><code>public void setParams(HashMap&lt;String, Object&gt; params){\n    this.params = params;\n}\n</code></pre>\n\n<p>Can I fix this without changing the java code? Please help if it is possible, or if it is not, and what is the workaround to fix this.</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1637094469,"post_id":69994289,"comment_id":123733187,"body_markdown":"A Java project compiled to the Java 8 standard should run on any higher Java JDK.","body":"A Java project compiled to the Java 8 standard should run on any higher Java JDK."}],"answers":[{"tags":[],"owner":{"account_id":6212045,"reputation":233,"user_id":4838060,"accept_rate":50,"display_name":"Mark D"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637105115,"creation_date":1637105115,"answer_id":69997240,"question_id":69994289,"body_markdown":"Run &gt; Run Configuration &gt; Java Application &gt; JRE tab should let you speify what JRE(or JDK) to run java with in eclipse. \r\n\r\nRight clicking your project and going to Properties &gt; Java Build Path &gt; Libraries lets you specify what JRE system library you&#39;re using to build the project. \r\n\r\nHowever I doubt a project built with Java 8 will run on Java 17.  ","title":"Eclipse - build and run with different java versions","body":"<p>Run &gt; Run Configuration &gt; Java Application &gt; JRE tab should let you speify what JRE(or JDK) to run java with in eclipse.</p>\n<p>Right clicking your project and going to Properties &gt; Java Build Path &gt; Libraries lets you specify what JRE system library you're using to build the project.</p>\n<p>However I doubt a project built with Java 8 will run on Java 17.</p>\n"}],"owner":{"account_id":23358761,"reputation":3,"user_id":17431332,"display_name":"osefmaster"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":220,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637105115,"creation_date":1637086997,"question_id":69994289,"body_markdown":"I would like to build a project with one version of java (8) and run it with another (jdk17), I don&#39;t find where to put the jdk17 on execution only (as the java build path setting will take both build and run) .\r\n\r\nAny help ?\r\n\r\nThanks","title":"Eclipse - build and run with different java versions","body":"<p>I would like to build a project with one version of java (8) and run it with another (jdk17), I don't find where to put the jdk17 on execution only (as the java build path setting will take both build and run) .</p>\n<p>Any help ?</p>\n<p>Thanks</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":21730523,"reputation":97,"user_id":16039337,"display_name":"noobieCoder"},"score":0,"creation_date":1637104027,"post_id":69997076,"comment_id":123735906,"body_markdown":"@HovercraftFullOfEels I mean yeah, but in the end I would like to overwrite the step into the next step in a single board instead of printing it again to see the change.","body":"@HovercraftFullOfEels I mean yeah, but in the end I would like to overwrite the step into the next step in a single board instead of printing it again to see the change."},{"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"score":1,"creation_date":1637104215,"post_id":69997076,"comment_id":123735952,"body_markdown":"If you want to manipulate the console output, you&#39;ll need a console manipulation library like `curses` to do so. I don&#39;t know what Java uses natively to do it, but `System.out.println` isn&#39;t built to modify existing console text.","body":"If you want to manipulate the console output, you&#39;ll need a console manipulation library like <code>curses</code> to do so. I don&#39;t know what Java uses natively to do it, but <code>System.out.println</code> isn&#39;t built to modify existing console text."}],"answers":[{"tags":[],"owner":{"account_id":247613,"reputation":284090,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637104376,"creation_date":1637104070,"answer_id":69997114,"question_id":69997076,"body_markdown":"You appear to already be &quot;overwriting&quot; the board inside your `animateChanges()` method with this call: `this.board = newBoard;` Why not simply remove the call to `printBoard();` from the same `animateChanges()` method? Then you can call `printBoard()` when and how you want to do it.\r\n","title":"Java overwrite 2D array with the next step","body":"<p>You appear to already be &quot;overwriting&quot; the board inside your <code>animateChanges()</code> method with this call: <code>this.board = newBoard;</code> Why not simply remove the call to <code>printBoard();</code> from the same <code>animateChanges()</code> method? Then you can call <code>printBoard()</code> when and how you want to do it.</p>\n"}],"owner":{"account_id":21730523,"reputation":97,"user_id":16039337,"display_name":"noobieCoder"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1637106191,"answer_count":1,"score":0,"last_activity_date":1637104376,"creation_date":1637103724,"question_id":69997076,"body_markdown":"The following code is Conway&#39;s Game of Life in a terminal. What I would like to do here is to overwrite the current step into the next step. I have a temporary 2D array in the animateChanges() method. Also in the main method I am printing the animateChanges() three times, that&#39;s what I would like to change. Basically, I would like to overwrite the board instead of printing it three times because visually its quite ugly while looping.\r\n\r\n\r\n    public class GameOfLifeTerminal {\r\n        private int WIDTH;\r\n        private int HEIGHT;\r\n        private int[][] board;\r\n        private int aliveNeighbours = 0;\r\n    \r\n    \r\n        public GameOfLifeTerminal(int width, int height) {\r\n            this.WIDTH = width;\r\n            this.HEIGHT = height;\r\n            this.board = new int[width][height];\r\n        }\r\n    \r\n        /*Getters &amp; Setters*/\r\n        public void setAlive(int x, int y) {\r\n            this.board[x][y] = 1;\r\n        } //true\r\n        public void setDead(int x, int y) {\r\n            this.board[x][y] = 0;\r\n        } // false, currently not being used\r\n        //get the rows in the y axis\r\n        public int getRows(){ return board.length; }\r\n        //get the columns in the x axis\r\n        public int getColumns(){ return board[0].length; }\r\n    \r\n        /*Methods and functions*/\r\n        public void printBoard() { //prints the board\r\n            for (int y = 0; y &lt; HEIGHT; y++) {\r\n                String line = &quot;&quot;;\r\n                for (int x = 0; x &lt; WIDTH; x++) {\r\n                    if (this.board[x][y] == 0) {\r\n                        line += &quot;&#183;&quot;;\r\n                    } else {\r\n                        line += &quot;O&quot;;\r\n                    }\r\n                }\r\n                System.out.println(line);\r\n            }\r\n            System.out.println();\r\n        }\r\n    \r\n        public int countAliveNeighbours(int x, int y) {    //count the number of alive neighbours\r\n            int count = 0;\r\n            /*\r\n            for(int i = x-1; i &lt; x+1; i++) {\r\n                for (int j = y - 1; i &lt; y + 1; j++) {\r\n                    if (getState(i, j) == 1) count++;\r\n                }\r\n            }\r\n             if(getState(x, y) == 1) count--;\r\n            */\r\n    \r\n            //checks each position one by one and calls the getState() method to be inside the bounds\r\n            count += getState(x - 1, y - 1);\r\n            count += getState(x, y - 1);\r\n            count += getState(x + 1, y - 1);\r\n    \r\n            count += getState(x - 1, y);\r\n            count += getState(x + 1, y);\r\n    \r\n            count += getState(x - 1, y + 1);\r\n            count += getState(x, y + 1);\r\n            count += getState(x + 1, y + 1);\r\n            //System.out.println(count);\r\n            return count;\r\n        }\r\n    \r\n        public int getState(int x, int y) { //get state neighbours in case is out of bounds\r\n            if (x &lt; 0 || x &gt;= WIDTH) return 0;\r\n            if (y &lt; 0 || y &gt;= HEIGHT) return 0;\r\n            return this.board[x][y];\r\n        }\r\n    \r\n        public void animateChanges() { //applies the rules and then prints the board with current state of the cells\r\n            //temporary board\r\n            int[][] newBoard = new int[WIDTH][HEIGHT];\r\n            for (int y = 0; y &lt; HEIGHT; y++) {\r\n                for (int x = 0; x &lt; WIDTH; x++) {\r\n                    aliveNeighbours = countAliveNeighbours(x, y);\r\n                    //rules\r\n                    if (getState(x, y) == 1) { //if true\r\n                        if (aliveNeighbours &lt; 2) { // le ded\r\n                            newBoard[x][y] = 0;\r\n                        } else if (aliveNeighbours == 2 || aliveNeighbours == 3) { //alive\r\n                            newBoard[x][y] = 1;\r\n                        } else if (aliveNeighbours &gt; 3) { // le ded\r\n                            newBoard[x][y] = 0;\r\n                        }\r\n                    } else {\r\n                        if (aliveNeighbours == 3) { //create new cells\r\n                            newBoard[x][y] = 1;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            this.board = newBoard;\r\n            \r\n            //System.out.println(&quot;Alive cells &quot; + aliveNeighbours);\r\n            printBoard();\r\n        }\r\n        //main method\r\n        public static void main(String[] args) {\r\n            GameOfLifeTerminal simulation = new GameOfLifeTerminal(8, 5);\r\n            simulation.setAlive(2, 2);\r\n            simulation.setAlive(3, 2);\r\n            simulation.setAlive(4, 2);\r\n    \r\n            simulation.animateChanges();\r\n            simulation.animateChanges();\r\n            simulation.animateChanges();\r\n        }\r\n    }\r\n\r\n","title":"Java overwrite 2D array with the next step","body":"<p>The following code is Conway's Game of Life in a terminal. What I would like to do here is to overwrite the current step into the next step. I have a temporary 2D array in the animateChanges() method. Also in the main method I am printing the animateChanges() three times, that's what I would like to change. Basically, I would like to overwrite the board instead of printing it three times because visually its quite ugly while looping.</p>\n<pre><code>public class GameOfLifeTerminal {\n    private int WIDTH;\n    private int HEIGHT;\n    private int[][] board;\n    private int aliveNeighbours = 0;\n\n\n    public GameOfLifeTerminal(int width, int height) {\n        this.WIDTH = width;\n        this.HEIGHT = height;\n        this.board = new int[width][height];\n    }\n\n    /*Getters &amp; Setters*/\n    public void setAlive(int x, int y) {\n        this.board[x][y] = 1;\n    } //true\n    public void setDead(int x, int y) {\n        this.board[x][y] = 0;\n    } // false, currently not being used\n    //get the rows in the y axis\n    public int getRows(){ return board.length; }\n    //get the columns in the x axis\n    public int getColumns(){ return board[0].length; }\n\n    /*Methods and functions*/\n    public void printBoard() { //prints the board\n        for (int y = 0; y &lt; HEIGHT; y++) {\n            String line = &quot;&quot;;\n            for (int x = 0; x &lt; WIDTH; x++) {\n                if (this.board[x][y] == 0) {\n                    line += &quot;·&quot;;\n                } else {\n                    line += &quot;O&quot;;\n                }\n            }\n            System.out.println(line);\n        }\n        System.out.println();\n    }\n\n    public int countAliveNeighbours(int x, int y) {    //count the number of alive neighbours\n        int count = 0;\n        /*\n        for(int i = x-1; i &lt; x+1; i++) {\n            for (int j = y - 1; i &lt; y + 1; j++) {\n                if (getState(i, j) == 1) count++;\n            }\n        }\n         if(getState(x, y) == 1) count--;\n        */\n\n        //checks each position one by one and calls the getState() method to be inside the bounds\n        count += getState(x - 1, y - 1);\n        count += getState(x, y - 1);\n        count += getState(x + 1, y - 1);\n\n        count += getState(x - 1, y);\n        count += getState(x + 1, y);\n\n        count += getState(x - 1, y + 1);\n        count += getState(x, y + 1);\n        count += getState(x + 1, y + 1);\n        //System.out.println(count);\n        return count;\n    }\n\n    public int getState(int x, int y) { //get state neighbours in case is out of bounds\n        if (x &lt; 0 || x &gt;= WIDTH) return 0;\n        if (y &lt; 0 || y &gt;= HEIGHT) return 0;\n        return this.board[x][y];\n    }\n\n    public void animateChanges() { //applies the rules and then prints the board with current state of the cells\n        //temporary board\n        int[][] newBoard = new int[WIDTH][HEIGHT];\n        for (int y = 0; y &lt; HEIGHT; y++) {\n            for (int x = 0; x &lt; WIDTH; x++) {\n                aliveNeighbours = countAliveNeighbours(x, y);\n                //rules\n                if (getState(x, y) == 1) { //if true\n                    if (aliveNeighbours &lt; 2) { // le ded\n                        newBoard[x][y] = 0;\n                    } else if (aliveNeighbours == 2 || aliveNeighbours == 3) { //alive\n                        newBoard[x][y] = 1;\n                    } else if (aliveNeighbours &gt; 3) { // le ded\n                        newBoard[x][y] = 0;\n                    }\n                } else {\n                    if (aliveNeighbours == 3) { //create new cells\n                        newBoard[x][y] = 1;\n                    }\n                }\n            }\n        }\n        this.board = newBoard;\n        \n        //System.out.println(&quot;Alive cells &quot; + aliveNeighbours);\n        printBoard();\n    }\n    //main method\n    public static void main(String[] args) {\n        GameOfLifeTerminal simulation = new GameOfLifeTerminal(8, 5);\n        simulation.setAlive(2, 2);\n        simulation.setAlive(3, 2);\n        simulation.setAlive(4, 2);\n\n        simulation.animateChanges();\n        simulation.animateChanges();\n        simulation.animateChanges();\n    }\n}\n</code></pre>\n"},{"tags":["java","java-stream","java-17"],"comments":[{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":3,"creation_date":1637102861,"post_id":69996916,"comment_id":123735645,"body_markdown":"Do you want a single collection of all distinct operations for all users? Or the collection of operations for a given user? What is the type of the result you seek?","body":"Do you want a single collection of all distinct operations for all users? Or the collection of operations for a given user? What is the type of the result you seek?"},{"owner":{"account_id":2056257,"reputation":41415,"user_id":1833945,"accept_rate":65,"display_name":"AndreaNobili"},"score":0,"creation_date":1637102972,"post_id":69996916,"comment_id":123735674,"body_markdown":"Exactly: a single collection of all the operations","body":"Exactly: a single collection of all the operations"},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":1,"creation_date":1637103001,"post_id":69996916,"comment_id":123735680,"body_markdown":"All operations for a single user, or all operations for all users?","body":"All operations for a single user, or all operations for all users?"}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637103035,"creation_date":1637103035,"answer_id":69996964,"question_id":69996916,"body_markdown":"It sounds like what you want is just\r\n\r\n\r\n    userList.stream()\r\n      .flatMap(user -&gt; user.getUserTypes().stream())\r\n      .flatMap(userType -&gt; userType.getOperations().stream())\r\n      .toArray(Operation[]::new);\r\n\r\n...assuming you&#39;re using getters.  This gives you every operation for every user type for every user.","title":"How can I use the Java stream in order to create an array iterating in all the element of a nested collection?","body":"<p>It sounds like what you want is just</p>\n<pre><code>userList.stream()\n  .flatMap(user -&gt; user.getUserTypes().stream())\n  .flatMap(userType -&gt; userType.getOperations().stream())\n  .toArray(Operation[]::new);\n</code></pre>\n<p>...assuming you're using getters.  This gives you every operation for every user type for every user.</p>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1637103692,"creation_date":1637103139,"answer_id":69996977,"question_id":69996916,"body_markdown":"Use `flatMap()` on the operations `Set`, with `distinct()`:\r\n\r\n    Operation[] operations = user.getUserTypes().stream()\r\n      .map(UserType::getOperations)\r\n      .flatMap(Set::stream)\r\n      .distinct()\r\n      .toArray(Operation[]::new);","title":"How can I use the Java stream in order to create an array iterating in all the element of a nested collection?","body":"<p>Use <code>flatMap()</code> on the operations <code>Set</code>, with <code>distinct()</code>:</p>\n<pre><code>Operation[] operations = user.getUserTypes().stream()\n  .map(UserType::getOperations)\n  .flatMap(Set::stream)\n  .distinct()\n  .toArray(Operation[]::new);\n</code></pre>\n"}],"owner":{"account_id":2056257,"reputation":41415,"user_id":1833945,"accept_rate":65,"display_name":"AndreaNobili"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":69996977,"answer_count":2,"score":4,"last_activity_date":1637103692,"creation_date":1637102642,"question_id":69996916,"body_markdown":"I am working on a Java application and I am trying to understand if **Stream** concept can be useful for my use case.\r\n\r\nI am trying to do something similar to what I found into an example but my use case seems to be more complex. This was the original example:\r\n\r\n    String[] profili = utente.getRuoli()\r\n    \t\t\t\t .stream().map(a -&gt; &quot;ROLE_&quot; + a).toArray(String[]::new);\r\n\r\nBasically it is creating an array starting from a stream.\r\n\r\nFollowing my situation. I have this main **User** DTO class representing an user:\r\n\r\n    @Data\r\n    public class User {\r\n    \tprivate int id;\r\n    \tprivate String firstName;\r\n    \tprivate String middleName;\r\n    \tprivate String surname;\r\n    \tprivate char sex;\r\n    \tprivate Date birthdate;\r\n    \tprivate String taxCode;\r\n    \tprivate String eMail;\r\n    \tprivate String pswd;\r\n    \tprivate String contactNumber;\r\n    \tprivate Date createdAt;\r\n    \tprivate Set&lt;Address&gt; addressesList;\r\n    \tprivate Set&lt;UserType&gt; userTypes;   \r\n    }\r\n\r\nThe previous DTO class contains this field representing a collection of user types (for example &quot;ADMIN&quot;, &quot;READER&quot;, &quot;WRITER&quot;, etcetc). This because an user can have multiple types: \r\n\r\n    private Set&lt;UserType&gt; userTypes;\r\n\r\nThis is the **UserType** structure:\r\n\r\n    @Data\r\n    public class UserType {\r\n    \tprivate int id;\r\n    \tprivate String typeName;\r\n    \tprivate String description;\r\n    \tSet&lt;Operation&gt; operations;\r\n    }\r\n\r\nAlso this class contains a field representing  a collection of operations (this because a user type can have multiple operation that can perform on the system), this field:\r\n\r\n    Set&lt;Operation&gt; operations;\r\n\r\nNow I am asking if I can use the stream in a similar way to the original example in order to create an array  of all the operations contained into all the user types.\r\n\r\nIs it possible? What could be a smart solution? Or maybe the best way is the &quot;old style&quot; (iterate on all the object into the **userTypes** Set, then iterate on all the element into the **operations** Set and manually add to an array?). It will work but what could be a neat and elegant solution using stream? (if exist)\r\n\r\n","title":"How can I use the Java stream in order to create an array iterating in all the element of a nested collection?","body":"<p>I am working on a Java application and I am trying to understand if <strong>Stream</strong> concept can be useful for my use case.</p>\n<p>I am trying to do something similar to what I found into an example but my use case seems to be more complex. This was the original example:</p>\n<pre><code>String[] profili = utente.getRuoli()\n                 .stream().map(a -&gt; &quot;ROLE_&quot; + a).toArray(String[]::new);\n</code></pre>\n<p>Basically it is creating an array starting from a stream.</p>\n<p>Following my situation. I have this main <strong>User</strong> DTO class representing an user:</p>\n<pre><code>@Data\npublic class User {\n    private int id;\n    private String firstName;\n    private String middleName;\n    private String surname;\n    private char sex;\n    private Date birthdate;\n    private String taxCode;\n    private String eMail;\n    private String pswd;\n    private String contactNumber;\n    private Date createdAt;\n    private Set&lt;Address&gt; addressesList;\n    private Set&lt;UserType&gt; userTypes;   \n}\n</code></pre>\n<p>The previous DTO class contains this field representing a collection of user types (for example &quot;ADMIN&quot;, &quot;READER&quot;, &quot;WRITER&quot;, etcetc). This because an user can have multiple types:</p>\n<pre><code>private Set&lt;UserType&gt; userTypes;\n</code></pre>\n<p>This is the <strong>UserType</strong> structure:</p>\n<pre><code>@Data\npublic class UserType {\n    private int id;\n    private String typeName;\n    private String description;\n    Set&lt;Operation&gt; operations;\n}\n</code></pre>\n<p>Also this class contains a field representing  a collection of operations (this because a user type can have multiple operation that can perform on the system), this field:</p>\n<pre><code>Set&lt;Operation&gt; operations;\n</code></pre>\n<p>Now I am asking if I can use the stream in a similar way to the original example in order to create an array  of all the operations contained into all the user types.</p>\n<p>Is it possible? What could be a smart solution? Or maybe the best way is the &quot;old style&quot; (iterate on all the object into the <strong>userTypes</strong> Set, then iterate on all the element into the <strong>operations</strong> Set and manually add to an array?). It will work but what could be a neat and elegant solution using stream? (if exist)</p>\n"},{"tags":["java","json","android-animation","lottie"],"comments":[{"owner":{"account_id":4500391,"reputation":2003,"user_id":3659052,"accept_rate":55,"display_name":"logger"},"score":0,"creation_date":1558555895,"post_id":56264263,"comment_id":99144942,"body_markdown":"will this code ever reach else statement?","body":"will this code ever reach else statement?"},{"owner":{"account_id":9295110,"reputation":35,"user_id":7232659,"display_name":"ShadowSuave"},"score":0,"creation_date":1558556143,"post_id":56264263,"comment_id":99145046,"body_markdown":"Yes, I edited the question. my mistake","body":"Yes, I edited the question. my mistake"},{"owner":{"account_id":4500391,"reputation":2003,"user_id":3659052,"accept_rate":55,"display_name":"logger"},"score":0,"creation_date":1558556578,"post_id":56264263,"comment_id":99145273,"body_markdown":"just try to log or print out `something` before it enter the statement it will give you an idea why it behaves like this","body":"just try to log or print out <code>something</code> before it enter the statement it will give you an idea why it behaves like this"},{"owner":{"account_id":9295110,"reputation":35,"user_id":7232659,"display_name":"ShadowSuave"},"score":0,"creation_date":1558658667,"post_id":56264263,"comment_id":99182747,"body_markdown":"Yes, i&#39;ve done this, I also logged the frames and progress when the animation is played. the frames and progress seem to change and respond to the condition correctly, but sometimes the animation just doesn&#39;t play, or plays incorrectly :/","body":"Yes, i&#39;ve done this, I also logged the frames and progress when the animation is played. the frames and progress seem to change and respond to the condition correctly, but sometimes the animation just doesn&#39;t play, or plays incorrectly :/"},{"owner":{"account_id":9295110,"reputation":35,"user_id":7232659,"display_name":"ShadowSuave"},"score":0,"creation_date":1558742705,"post_id":56264263,"comment_id":99213333,"body_markdown":"setting the animation to loop did the trick, silly of me to overlook","body":"setting the animation to loop did the trick, silly of me to overlook"}],"owner":{"account_id":9295110,"reputation":35,"user_id":7232659,"display_name":"ShadowSuave"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":247,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1637103570,"creation_date":1558555703,"question_id":56264263,"body_markdown":"I&#39;m using the Lottie library to add animation to my app. I want the animation to play the first half of the animation if some condition is true, and the other half of the animation if the condition is false. below is some code for what I&#39;ve tried, it seems to work on and off and very buggy, not sure if a lottie issue, or if I&#39;m doing something wrong. thanks for any help!\r\n\r\n\r\n```\r\n       if (something==true) {\r\n            lottieAnimationView.setMinFrame(0);\r\n            lottieAnimationView.setMaxFrame(28);\r\n            lottieAnimationView.playAnimation();\r\n        } else {\r\n            lottieAnimationView.setMinFrame(28);\r\n            lottieAnimationView.setMaxFrame(70);\r\n            lottieAnimationView.playAnimation();\r\n        }\r\n```\r\n\r\nSolution:\r\n Setting a loop to the animation and using playAnimation(), pauseAnimation() and resumeAnimation()\r\n```\r\nlottieAnimationView.loop(true);","title":"Lottie animation not behaving as expected","body":"<p>I'm using the Lottie library to add animation to my app. I want the animation to play the first half of the animation if some condition is true, and the other half of the animation if the condition is false. below is some code for what I've tried, it seems to work on and off and very buggy, not sure if a lottie issue, or if I'm doing something wrong. thanks for any help!</p>\n\n<pre><code>       if (something==true) {\n            lottieAnimationView.setMinFrame(0);\n            lottieAnimationView.setMaxFrame(28);\n            lottieAnimationView.playAnimation();\n        } else {\n            lottieAnimationView.setMinFrame(28);\n            lottieAnimationView.setMaxFrame(70);\n            lottieAnimationView.playAnimation();\n        }\n</code></pre>\n\n<p>Solution:\n Setting a loop to the animation and using playAnimation(), pauseAnimation() and resumeAnimation()</p>\n\n<pre><code>lottieAnimationView.loop(true);\n</code></pre>\n"},{"tags":["java","android","android-animation","lottie"],"comments":[{"owner":{"account_id":6247715,"reputation":434,"user_id":4858967,"accept_rate":67,"display_name":"Ahmet Yılmaz"},"score":0,"creation_date":1566892658,"post_id":57669953,"comment_id":101787676,"body_markdown":"https://lottiefiles.com/ lottie library I mean","body":"<a href=\"https://lottiefiles.com/\" rel=\"nofollow noreferrer\">lottiefiles.com</a> lottie library I mean"},{"owner":{"account_id":3493727,"reputation":1793,"user_id":2938633,"accept_rate":65,"display_name":"Blnpwr"},"score":0,"creation_date":1566893024,"post_id":57669953,"comment_id":101787851,"body_markdown":"You can use boolean values to determine if the button is clicked or not. If you click the button set a bool to true, do your logic inside a if condition and at the end, set the bool value again to false.","body":"You can use boolean values to determine if the button is clicked or not. If you click the button set a bool to true, do your logic inside a if condition and at the end, set the bool value again to false."}],"answers":[{"tags":[],"owner":{"account_id":15166930,"reputation":451,"user_id":10944196,"display_name":"Sergio"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1566894214,"creation_date":1566893443,"answer_id":57670314,"question_id":57669953,"body_markdown":"Use 2 different functions, once for the initial animation and the other for the reverse one. I would recommend you use an `animator listener` aswell. Use the `removeAllAnimatorListeners` to reset the animation.\r\n\r\n(The example was made in Kotlin, but is pretty much the same) Then call these 2 methods in your booleans.\r\n\r\n\r\n    private fun initAnimation() {\r\n        imgIconLike?.playAnimation()\r\n\r\n        imgIconLike?.addAnimatorListener(object : Animator.AnimatorListener {\r\n            override fun onAnimationCancel(animation: Animator?) {}\r\n            override fun onAnimationStart(animation: Animator?) {}\r\n            override fun onAnimationRepeat(animation: Animator?) {}\r\n            override fun onAnimationEnd(animation: Animator?) {\r\n                imgIconLike?.removeAllAnimatorListeners()\r\n            }\r\n        })\r\n    }\r\n    \r\n    private fun revertInitAnimation() {\r\n        imgIconLike?.speed = -1F\r\n        imgIconLike?.playAnimation()\r\n\r\n        sendBtn?.addAnimatorListener(object : Animator.AnimatorListener {\r\n            override fun onAnimationCancel(animation: Animator?) {}\r\n            override fun onAnimationStart(animation: Animator?) {}\r\n            override fun onAnimationRepeat(animation: Animator?) {}\r\n            override fun onAnimationEnd(animation: Animator?) {\r\n                imgIconLike?.removeAllAnimatorListeners()\r\n            }\r\n        })\r\n    }\r\n","title":"How can make a like button with lottie animation?","body":"<p>Use 2 different functions, once for the initial animation and the other for the reverse one. I would recommend you use an <code>animator listener</code> aswell. Use the <code>removeAllAnimatorListeners</code> to reset the animation.</p>\n\n<p>(The example was made in Kotlin, but is pretty much the same) Then call these 2 methods in your booleans.</p>\n\n<pre><code>private fun initAnimation() {\n    imgIconLike?.playAnimation()\n\n    imgIconLike?.addAnimatorListener(object : Animator.AnimatorListener {\n        override fun onAnimationCancel(animation: Animator?) {}\n        override fun onAnimationStart(animation: Animator?) {}\n        override fun onAnimationRepeat(animation: Animator?) {}\n        override fun onAnimationEnd(animation: Animator?) {\n            imgIconLike?.removeAllAnimatorListeners()\n        }\n    })\n}\n\nprivate fun revertInitAnimation() {\n    imgIconLike?.speed = -1F\n    imgIconLike?.playAnimation()\n\n    sendBtn?.addAnimatorListener(object : Animator.AnimatorListener {\n        override fun onAnimationCancel(animation: Animator?) {}\n        override fun onAnimationStart(animation: Animator?) {}\n        override fun onAnimationRepeat(animation: Animator?) {}\n        override fun onAnimationEnd(animation: Animator?) {\n            imgIconLike?.removeAllAnimatorListeners()\n        }\n    })\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9056380,"reputation":3051,"user_id":6744566,"accept_rate":20,"display_name":"Prithvi Bhola"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1566900483,"creation_date":1566893551,"answer_id":57670351,"question_id":57669953,"body_markdown":"&gt; I want it to get white again after I click a second time\r\n\r\nYou can do this in 2 ways:\r\n\r\n1. Set the visibility of the view to `GONE` when clicked second time, but this won&#39;t show the animation.\r\n2. Reverse the animation of `lottie view` using `setSpeed(float)` and passing `-1F` to the method.\r\n\r\nSo try this:\r\n\r\n    if (!isAnimated){ \r\n              imgIconLike.setSpeed(3f); \r\n              isAnimated=true; \r\n              imgIconLike.playAnimation();\r\n    } else { \r\n              imgIconLike.setSpeed(-1F); \r\n              isAnimated=false; \r\n              imgIconLike.playAnimation();\r\n    }","title":"How can make a like button with lottie animation?","body":"<blockquote>\n  <p>I want it to get white again after I click a second time</p>\n</blockquote>\n\n<p>You can do this in 2 ways:</p>\n\n<ol>\n<li>Set the visibility of the view to <code>GONE</code> when clicked second time, but this won't show the animation.</li>\n<li>Reverse the animation of <code>lottie view</code> using <code>setSpeed(float)</code> and passing <code>-1F</code> to the method.</li>\n</ol>\n\n<p>So try this:</p>\n\n<pre><code>if (!isAnimated){ \n          imgIconLike.setSpeed(3f); \n          isAnimated=true; \n          imgIconLike.playAnimation();\n} else { \n          imgIconLike.setSpeed(-1F); \n          isAnimated=false; \n          imgIconLike.playAnimation();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5757344,"reputation":445,"user_id":4544797,"display_name":"Abu Noman"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1566897541,"creation_date":1566897092,"answer_id":57671293,"question_id":57669953,"body_markdown":"You can do this by stopping animation and set progress to `0.0f`, follow the code below:\r\n\r\n    private var isLiked: Boolean = false\r\n    \r\n    animationLike.setOnClickListener {\r\n        isLiked = !isLiked\r\n        animationLike.apply {\r\n            if (isLiked) {\r\n                playAnimation()\r\n            } else {\r\n                cancelAnimation()\r\n                progress = 0.0f\r\n            }\r\n        }\r\n    }\r\n\r\nXML looks like:\r\n\r\n    &lt;com.airbnb.lottie.LottieAnimationView\r\n                android:id=&quot;@+id/animation_like&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n                app:lottie_rawRes=&quot;@raw/heart&quot;/&gt;","title":"How can make a like button with lottie animation?","body":"<p>You can do this by stopping animation and set progress to <code>0.0f</code>, follow the code below:</p>\n\n<pre><code>private var isLiked: Boolean = false\n\nanimationLike.setOnClickListener {\n    isLiked = !isLiked\n    animationLike.apply {\n        if (isLiked) {\n            playAnimation()\n        } else {\n            cancelAnimation()\n            progress = 0.0f\n        }\n    }\n}\n</code></pre>\n\n<p>XML looks like:</p>\n\n<pre><code>&lt;com.airbnb.lottie.LottieAnimationView\n            android:id=\"@+id/animation_like\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            app:layout_constraintBottom_toBottomOf=\"parent\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:lottie_rawRes=\"@raw/heart\"/&gt;\n</code></pre>\n"}],"owner":{"account_id":6247715,"reputation":434,"user_id":4858967,"accept_rate":67,"display_name":"Ahmet Yılmaz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8299,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":57670351,"answer_count":3,"score":0,"last_activity_date":1637103295,"creation_date":1566892059,"question_id":57669953,"body_markdown":"I want to make a `like` `button` in my app with lottie animation. I have downloaded a `json` file ofvthe animation that I want. It works after clicking. But the heart icon is white as default. After I click it, it gets red with the animation. I want it to get white again after I click a second time. I just can&#39;t do it. How can I do it?\r\n\r\nProductActivity.java\r\n\r\n       public class ProductActivity extends AppCompatActivity {\r\n        LottieAnimationView imgIconLike;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_product);\r\n            imgIconLike = findViewById(R.id.img_icon_like);\r\n            }\r\n    \r\n         /* I did isAnimated boolean to handle second time click. Also\r\n           try pauseAnimation, cancelAnimation and another else. I can&#39;t success it anyways. */\r\n    \r\n        private void registerHandler() {\r\n            imgIconLike.setOnClickListener(new View.OnClickListener() {\r\n                boolean isAnimated=false;\r\n                @Override\r\n                public void onClick(View v) {\r\n    \r\n                   if (!isAnimated){\r\n                    imgIconLike.playAnimation();\r\n                    imgIconLike.setSpeed(3f);\r\n                    isAnimated=true;}\r\n                    else {\r\n                        imgIconLike.cancelAnimation;\r\n                        isAnimated=false;\r\n                    }\r\n    \r\n                }\r\n            });\r\n        }\r\n      }\r\n\r\nactivity_product.xml\r\n\r\n    &lt;com.airbnb.lottie.LottieAnimationView\r\n                android:id=&quot;@+id/img_icon_like&quot;\r\n                android:layout_width=&quot;50dp&quot;\r\n                android:layout_height=&quot;58dp&quot;\r\n                app:layout_constraintBottom_toBottomOf=&quot;@+id/textFollow_cost&quot;\r\n                app:layout_constraintEnd_toStartOf=&quot;@+id/textFollow_cost&quot;\r\n                app:layout_constraintTop_toTopOf=&quot;@+id/textFollow_cost&quot;\r\n                app:lottie_autoPlay=&quot;false&quot;\r\n                app:lottie_fileName=&quot;1087-heart.json&quot;\r\n                app:lottie_loop=&quot;false&quot; /&gt;\r\n","title":"How can make a like button with lottie animation?","body":"<p>I want to make a <code>like</code> <code>button</code> in my app with lottie animation. I have downloaded a <code>json</code> file ofvthe animation that I want. It works after clicking. But the heart icon is white as default. After I click it, it gets red with the animation. I want it to get white again after I click a second time. I just can't do it. How can I do it?</p>\n\n<p>ProductActivity.java</p>\n\n<pre><code>   public class ProductActivity extends AppCompatActivity {\n    LottieAnimationView imgIconLike;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_product);\n        imgIconLike = findViewById(R.id.img_icon_like);\n        }\n\n     /* I did isAnimated boolean to handle second time click. Also\n       try pauseAnimation, cancelAnimation and another else. I can't success it anyways. */\n\n    private void registerHandler() {\n        imgIconLike.setOnClickListener(new View.OnClickListener() {\n            boolean isAnimated=false;\n            @Override\n            public void onClick(View v) {\n\n               if (!isAnimated){\n                imgIconLike.playAnimation();\n                imgIconLike.setSpeed(3f);\n                isAnimated=true;}\n                else {\n                    imgIconLike.cancelAnimation;\n                    isAnimated=false;\n                }\n\n            }\n        });\n    }\n  }\n</code></pre>\n\n<p>activity_product.xml</p>\n\n<pre><code>&lt;com.airbnb.lottie.LottieAnimationView\n            android:id=\"@+id/img_icon_like\"\n            android:layout_width=\"50dp\"\n            android:layout_height=\"58dp\"\n            app:layout_constraintBottom_toBottomOf=\"@+id/textFollow_cost\"\n            app:layout_constraintEnd_toStartOf=\"@+id/textFollow_cost\"\n            app:layout_constraintTop_toTopOf=\"@+id/textFollow_cost\"\n            app:lottie_autoPlay=\"false\"\n            app:lottie_fileName=\"1087-heart.json\"\n            app:lottie_loop=\"false\" /&gt;\n</code></pre>\n"},{"tags":["java","mysql","spring-boot","spring-mvc","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":15429444,"reputation":3,"user_id":11131278,"display_name":"Andrea Depaul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637102533,"creation_date":1637102533,"answer_id":69996898,"question_id":69988318,"body_markdown":"The solution I&#39;ve found is creating a different Entity for each query. Not the best option but it&#39;s all I&#39;ve got right now. ","title":"Two different queries returning the same object Spring Boot JPA","body":"<p>The solution I've found is creating a different Entity for each query. Not the best option but it's all I've got right now.</p>\n"}],"owner":{"account_id":15429444,"reputation":3,"user_id":11131278,"display_name":"Andrea Depaul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":651,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637102533,"creation_date":1637062094,"question_id":69988318,"body_markdown":"I created a Repository with 3 different queries. Each query returns a different result. But when it comes to mapping the first query result goes to the second query result. If I change the order of the queries the first result will be the result of the next query. I even tried to create two different Repositories\r\n\r\nThese are the result objects query:\r\n[First Result][1]\r\n[Second Result][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zTP9T.png\r\n\r\n\r\n\r\n\r\n  [2]: https://i.stack.imgur.com/S7nc2.png\r\n\r\n\r\nThis is my First repository: \r\n\r\n    package com.springboot.first.app;\r\n\r\n\r\n    @Repository\r\n    public interface TotalSRepository extends JpaRepository&lt;TotalEntity, Date&gt;{\r\n\t\r\n\t\r\n\t@Query(value= &quot;select `data` , SUM(importo) as totaleContanti, 0 AS totaleBanca from spese s where (dataAss is null or dataAss &gt; DATE(NOW()) ) and MONTH(s.`data` )= :mese and year(s.`data`) = :anno and s.tipoPag IN(&#39;CONTANTI&#39;, &#39;VOUCHER&#39;) group by s.`data`&quot;, \r\n\t\t\tcountQuery = &quot;SELECT count(*) from spese s where (dataAss is null or DATE(NOW()) &gt;= dataAss) and MONTH(s.`data` )= :mese and year(s.`data`) = :anno and s.tipoPag IN(&#39;CONTANTI&#39;, &#39;VOUCHER&#39;) group by s.`data`&quot;, \r\n\t\t\tnativeQuery = true)\r\n\t\t\tList&lt;TotalEntity&gt; findSpeseTotalsContanti(@Param(&quot;mese&quot;) Integer mese, @Param(&quot;anno&quot;) Integer anno);\r\n\t\r\n\t@Query(value= &quot;select `data` , SUM(importo) as totaleBanca, 0 AS totaleContanti from spese s where (dataAss is null or dataAss &gt; DATE(NOW()) ) and MONTH(s.`data` )= :mese and year(s.`data`) = :anno and s.tipoPag NOT IN(&#39;CONTANTI&#39;, &#39;VOUCHER&#39;) group by s.`data`&quot;, \r\n\t\t\tcountQuery = &quot;SELECT count(*) from spese s where (dataAss is null or DATE(NOW()) &gt;= dataAss ) and MONTH(s.`data` )= :mese and year(s.`data`) = :anno and s.tipoPag NOT IN(&#39;CONTANTI&#39;, &#39;VOUCHER&#39;) group by s.`data`&quot;, \r\n\t\t\tnativeQuery = true)\r\n\t\t\tList&lt;TotalEntity&gt; findSpeseTotalsBanca(@Param(&quot;mese&quot;) Integer mese, @Param(&quot;anno&quot;) Integer anno);\r\n\r\n    }\r\n\r\n\r\nThis is the second repo\r\n\r\n    @Repository\r\n    public interface TotalRepository extends JpaRepository&lt;TotalEntity, Date&gt;{\r\n\t\r\n\t@Query(value= &quot;select `data`, (SUM(importoC) + SUM(importoT)) as totaleContanti, SUM(importoP) as totaleBanca from incassi i where MONTH(i.`data`) = :mese and YEAR(i.`data`) = :anno group by i.`data`&quot;, \r\n\t\t\tcountQuery = &quot;SELECT count(*) from incassi i where MONTH(i.`data`) = :mese and YEAR(i.`data`) = :anno group by i.`data`&quot;, \r\n\t\t\tnativeQuery = true)\r\n\t\t\tList&lt;TotalEntity&gt; findIncassiTotals(@Param(&quot;mese&quot;) Integer mese, @Param(&quot;anno&quot;) Integer anno);\r\n\t\r\n\r\n    }\r\n\r\n\r\nThis is the entity \r\n\r\n    @Entity\r\n    public class TotalEntity {\r\n    private Date data;\r\n    private Double totaleBanca; \r\n    private Double totaleContanti; \r\n    \r\n\r\n    public TotalEntity() {\r\n    }\r\n\r\n\r\n    @Id\r\n    @Column(name = &quot;data&quot;)\r\n\tpublic Date getData() {\r\n\t\treturn data;\r\n\t}\r\n\r\n\tpublic void setData(Date data) {\r\n\t\tthis.data = data;\r\n\t}\r\n\r\n    @Basic\r\n    @Column(name = &quot;totalebanca&quot;)\r\n\tpublic double getTotaleBanca() {\r\n\t\treturn totaleBanca;\r\n\t}\r\n\r\n\tpublic void setTotaleBanca(double importoC) {\r\n\t\tthis.totaleBanca = importoC;\r\n\t}\r\n\r\n\t\r\n    @Basic\r\n    @Column(name = &quot;totalecontanti&quot;)\r\n\tpublic double getTotaleContanti() {\r\n\t\treturn totaleContanti;\r\n\t}\r\n\r\n\tpublic void setTotaleContanti(double importoC) {\r\n\t\tthis.totaleContanti = importoC;\r\n\t}\r\n \r\n\t\r\n\t\r\n    }\r\n\r\n\r\nI tried to execute the Hibernate logged query \r\n\r\n    Hibernate: select `data`, (SUM(importoC) + SUM(importoT)) as totaleContanti, SUM(importoP) as totaleBanca from incassi i where MONTH(i.`data`) = ? and YEAR(i.`data`) = ? group by i.`data`\r\n    Hibernate: select `data` , SUM(importo) as totaleBanca, 0 AS totaleContanti from spese s where (dataAss is null or dataAss &gt; DATE(NOW()) ) and MONTH(s.`data` )= ? and year(s.`data`) = ? and s.tipoPag NOT IN(&#39;CONTANTI&#39;, &#39;VOUCHER&#39;) group by s.`data`\r\n    Hibernate: select `data` , SUM(importo) as totaleContanti, 0 AS totaleBanca from spese s where (dataAss is null or dataAss &gt; DATE(NOW()) ) and MONTH(s.`data` )= ? and year(s.`data`) = ? and s.tipoPag IN(&#39;CONTANTI&#39;, &#39;VOUCHER&#39;) group by s.`data`\r\n\r\n\r\nand the results are correct. But the mapped object in debug is the same. Any suggestion?","title":"Two different queries returning the same object Spring Boot JPA","body":"<p>I created a Repository with 3 different queries. Each query returns a different result. But when it comes to mapping the first query result goes to the second query result. If I change the order of the queries the first result will be the result of the next query. I even tried to create two different Repositories</p>\n<p>These are the result objects query:\n<a href=\"https://i.stack.imgur.com/zTP9T.png\" rel=\"nofollow noreferrer\">First Result</a>\n<a href=\"https://i.stack.imgur.com/S7nc2.png\" rel=\"nofollow noreferrer\">Second Result</a></p>\n<p>This is my First repository:</p>\n<pre><code>package com.springboot.first.app;\n\n\n@Repository\npublic interface TotalSRepository extends JpaRepository&lt;TotalEntity, Date&gt;{\n\n\n@Query(value= &quot;select `data` , SUM(importo) as totaleContanti, 0 AS totaleBanca from spese s where (dataAss is null or dataAss &gt; DATE(NOW()) ) and MONTH(s.`data` )= :mese and year(s.`data`) = :anno and s.tipoPag IN('CONTANTI', 'VOUCHER') group by s.`data`&quot;, \n        countQuery = &quot;SELECT count(*) from spese s where (dataAss is null or DATE(NOW()) &gt;= dataAss) and MONTH(s.`data` )= :mese and year(s.`data`) = :anno and s.tipoPag IN('CONTANTI', 'VOUCHER') group by s.`data`&quot;, \n        nativeQuery = true)\n        List&lt;TotalEntity&gt; findSpeseTotalsContanti(@Param(&quot;mese&quot;) Integer mese, @Param(&quot;anno&quot;) Integer anno);\n\n@Query(value= &quot;select `data` , SUM(importo) as totaleBanca, 0 AS totaleContanti from spese s where (dataAss is null or dataAss &gt; DATE(NOW()) ) and MONTH(s.`data` )= :mese and year(s.`data`) = :anno and s.tipoPag NOT IN('CONTANTI', 'VOUCHER') group by s.`data`&quot;, \n        countQuery = &quot;SELECT count(*) from spese s where (dataAss is null or DATE(NOW()) &gt;= dataAss ) and MONTH(s.`data` )= :mese and year(s.`data`) = :anno and s.tipoPag NOT IN('CONTANTI', 'VOUCHER') group by s.`data`&quot;, \n        nativeQuery = true)\n        List&lt;TotalEntity&gt; findSpeseTotalsBanca(@Param(&quot;mese&quot;) Integer mese, @Param(&quot;anno&quot;) Integer anno);\n\n}\n</code></pre>\n<p>This is the second repo</p>\n<pre><code>@Repository\npublic interface TotalRepository extends JpaRepository&lt;TotalEntity, Date&gt;{\n\n@Query(value= &quot;select `data`, (SUM(importoC) + SUM(importoT)) as totaleContanti, SUM(importoP) as totaleBanca from incassi i where MONTH(i.`data`) = :mese and YEAR(i.`data`) = :anno group by i.`data`&quot;, \n        countQuery = &quot;SELECT count(*) from incassi i where MONTH(i.`data`) = :mese and YEAR(i.`data`) = :anno group by i.`data`&quot;, \n        nativeQuery = true)\n        List&lt;TotalEntity&gt; findIncassiTotals(@Param(&quot;mese&quot;) Integer mese, @Param(&quot;anno&quot;) Integer anno);\n\n\n}\n</code></pre>\n<p>This is the entity</p>\n<pre><code>@Entity\npublic class TotalEntity {\nprivate Date data;\nprivate Double totaleBanca; \nprivate Double totaleContanti; \n\n\npublic TotalEntity() {\n}\n\n\n@Id\n@Column(name = &quot;data&quot;)\npublic Date getData() {\n    return data;\n}\n\npublic void setData(Date data) {\n    this.data = data;\n}\n\n@Basic\n@Column(name = &quot;totalebanca&quot;)\npublic double getTotaleBanca() {\n    return totaleBanca;\n}\n\npublic void setTotaleBanca(double importoC) {\n    this.totaleBanca = importoC;\n}\n\n\n@Basic\n@Column(name = &quot;totalecontanti&quot;)\npublic double getTotaleContanti() {\n    return totaleContanti;\n}\n\npublic void setTotaleContanti(double importoC) {\n    this.totaleContanti = importoC;\n}\n\n\n\n}\n</code></pre>\n<p>I tried to execute the Hibernate logged query</p>\n<pre><code>Hibernate: select `data`, (SUM(importoC) + SUM(importoT)) as totaleContanti, SUM(importoP) as totaleBanca from incassi i where MONTH(i.`data`) = ? and YEAR(i.`data`) = ? group by i.`data`\nHibernate: select `data` , SUM(importo) as totaleBanca, 0 AS totaleContanti from spese s where (dataAss is null or dataAss &gt; DATE(NOW()) ) and MONTH(s.`data` )= ? and year(s.`data`) = ? and s.tipoPag NOT IN('CONTANTI', 'VOUCHER') group by s.`data`\nHibernate: select `data` , SUM(importo) as totaleContanti, 0 AS totaleBanca from spese s where (dataAss is null or dataAss &gt; DATE(NOW()) ) and MONTH(s.`data` )= ? and year(s.`data`) = ? and s.tipoPag IN('CONTANTI', 'VOUCHER') group by s.`data`\n</code></pre>\n<p>and the results are correct. But the mapped object in debug is the same. Any suggestion?</p>\n"},{"tags":["java","okhttp"],"comments":[{"owner":{"account_id":6894157,"reputation":1612,"user_id":5296683,"accept_rate":83,"display_name":"Med Elgarnaoui"},"score":0,"creation_date":1617283669,"post_id":66905117,"comment_id":118265673,"body_markdown":"add okhttp jar to your project build path","body":"add okhttp jar to your project build path"}],"answers":[{"tags":[],"owner":{"account_id":5940172,"reputation":3457,"user_id":4671717,"accept_rate":25,"display_name":"Chris Maggiulli"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1637102275,"creation_date":1617283270,"answer_id":66905320,"question_id":66905117,"body_markdown":"\r\n# Download Dependency\r\n\r\nYou can download the jar file from [maven central][2].\r\n\r\n[![download jar][3]][3]\r\n\r\n# Add to Project Classpath\r\n\r\nThen you need to add it to your classpath.\r\n\r\n## Shell\r\nIf you&#39;re compiling from the terminal place your okhttp.jar file in the same directory as your Java class.  You can then run the following command\r\n\r\n    javac -cp okhttp-2.7.5.jar MyClass.java\r\n\r\n&gt; You need to replace okhttp-2.7.5.jar with the actual name of the okhttp jar, and replace MyClass.java with the actually name of your Java file\r\n\r\n## Eclipse\r\n\r\n1. Right click on project\r\n2. Build Path...\r\n3. Configure Build Path....\r\n4. Add External Jar\r\n5. Select the jar file \r\n\r\n[![right click][4]][4]\r\n[![add external jar][5]][5]\r\n\r\n&gt; The method outlined above is the simplest way to add dependencies to a project.  However, there are specific technologies such as *Ant*, *Maven*, and *Gradle* which allow you to include dependencies through XML or other DSL&#39;s\r\n\r\n  [1]: https://stackoverflow.com/help/minimal-reproducible-example\r\n  [2]: https://mvnrepository.com/artifact/com.squareup.okhttp/okhttp/2.7.5\r\n  [3]: https://i.stack.imgur.com/rZoGv.png\r\n  [4]: https://i.stack.imgur.com/VR2qX.png\r\n  [5]: https://i.stack.imgur.com/Sl2XD.png","title":"How to import okhttp in a standard java program?","body":"<h1>Download Dependency</h1>\n<p>You can download the jar file from <a href=\"https://mvnrepository.com/artifact/com.squareup.okhttp/okhttp/2.7.5\" rel=\"nofollow noreferrer\">maven central</a>.</p>\n<p><a href=\"https://i.stack.imgur.com/rZoGv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rZoGv.png\" alt=\"download jar\" /></a></p>\n<h1>Add to Project Classpath</h1>\n<p>Then you need to add it to your classpath.</p>\n<h2>Shell</h2>\n<p>If you're compiling from the terminal place your okhttp.jar file in the same directory as your Java class.  You can then run the following command</p>\n<pre><code>javac -cp okhttp-2.7.5.jar MyClass.java\n</code></pre>\n<blockquote>\n<p>You need to replace okhttp-2.7.5.jar with the actual name of the okhttp jar, and replace MyClass.java with the actually name of your Java file</p>\n</blockquote>\n<h2>Eclipse</h2>\n<ol>\n<li>Right click on project</li>\n<li>Build Path...</li>\n<li>Configure Build Path....</li>\n<li>Add External Jar</li>\n<li>Select the jar file</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/VR2qX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VR2qX.png\" alt=\"right click\" /></a>\n<a href=\"https://i.stack.imgur.com/Sl2XD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Sl2XD.png\" alt=\"add external jar\" /></a></p>\n<blockquote>\n<p>The method outlined above is the simplest way to add dependencies to a project.  However, there are specific technologies such as <em>Ant</em>, <em>Maven</em>, and <em>Gradle</em> which allow you to include dependencies through XML or other DSL's</p>\n</blockquote>\n"}],"owner":{"account_id":19980047,"reputation":81,"user_id":14643438,"display_name":"Antoine"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6801,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":66905320,"answer_count":1,"score":4,"last_activity_date":1637102275,"creation_date":1617282397,"question_id":66905117,"body_markdown":"I am trying to import the okhttp package in a java program, but I have not been able to find how to do it.\r\n\r\nFor now, I have downloaded the package on my computer (from the following git hub link : https://github.com/square/okhttp) but I do not understand how to import the package in my program.\r\n\r\nAny suggestion on how to use this package?","title":"How to import okhttp in a standard java program?","body":"<p>I am trying to import the okhttp package in a java program, but I have not been able to find how to do it.</p>\n<p>For now, I have downloaded the package on my computer (from the following git hub link : <a href=\"https://github.com/square/okhttp\" rel=\"nofollow noreferrer\">https://github.com/square/okhttp</a>) but I do not understand how to import the package in my program.</p>\n<p>Any suggestion on how to use this package?</p>\n"},{"tags":["javascript","java","android","kotlin","authentication"],"comments":[{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1637102344,"post_id":69996741,"comment_id":123735526,"body_markdown":"Its going to depend on their code, it could do authentication in a dozen different ways, from HTTP Basic Auth, to a custom solution.  You&#39;d need to reverse engineer their website to figure it out.  Generally solutions like this are not recommended and are very fragile, you should find another way to get that info instead, such as public API.","body":"Its going to depend on their code, it could do authentication in a dozen different ways, from HTTP Basic Auth, to a custom solution.  You&#39;d need to reverse engineer their website to figure it out.  Generally solutions like this are not recommended and are very fragile, you should find another way to get that info instead, such as public API."},{"owner":{"account_id":20888183,"reputation":146,"user_id":15344254,"display_name":"ChocolateChapta"},"score":0,"creation_date":1637104347,"post_id":69996741,"comment_id":123735978,"body_markdown":"@GabeSechan Okay, thank you for your response. Is there some way to at least log in manually through a `WebView`?","body":"@GabeSechan Okay, thank you for your response. Is there some way to at least log in manually through a <code>WebView</code>?"},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1637104614,"post_id":69996741,"comment_id":123736024,"body_markdown":"You should be able to, as long as WebView isn&#39;t confused by the site.  Of course that login would only be good within that webview, it wouldn&#39;t automatically make any other request work.  Although if you were to scour the cookies and headers of the response, you might be able to find how they store the login token and use that in a future request.","body":"You should be able to, as long as WebView isn&#39;t confused by the site.  Of course that login would only be good within that webview, it wouldn&#39;t automatically make any other request work.  Although if you were to scour the cookies and headers of the response, you might be able to find how they store the login token and use that in a future request."},{"owner":{"account_id":771526,"reputation":629,"user_id":804509,"display_name":"Michael"},"score":0,"creation_date":1637501610,"post_id":69996741,"comment_id":123837569,"body_markdown":"As said by Gabe, this depends on the method of authentication used by the site. Using basic auth, you might be able to use `http://user:password@domain.com/` (note however that this might be visible in server logs!). Check with developer tools which response is given to the initial request. If manageable, programmatically handle the request and then show the result in the WebView (instead of letting the WebView handle the URL call).","body":"As said by Gabe, this depends on the method of authentication used by the site. Using basic auth, you might be able to use <code>http:&#47;&#47;user:password@domain.com&#47;</code> (note however that this might be visible in server logs!). Check with developer tools which response is given to the initial request. If manageable, programmatically handle the request and then show the result in the WebView (instead of letting the WebView handle the URL call)."}],"owner":{"account_id":20888183,"reputation":146,"user_id":15344254,"display_name":"ChocolateChapta"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637101922,"creation_date":1637101353,"question_id":69996741,"body_markdown":"I want to download an `XML` file from a web server, but the server requires a login. There is no custom login form, just a browser dialog, which `WebView` can&#39;t even show. I have tried to do some research, but I couldn&#39;t really find information about this type of login.\r\n\r\n[![screenshot of login dialog][2]][2]\r\n\r\nThis screenshot shows the login dialog in the Opera browser. How can I log into the server and save the file that should then be shown?\r\n\r\n  [2]: https://i.stack.imgur.com/4n3PY.png","title":"How to download XML from protected server to Android device?","body":"<p>I want to download an <code>XML</code> file from a web server, but the server requires a login. There is no custom login form, just a browser dialog, which <code>WebView</code> can't even show. I have tried to do some research, but I couldn't really find information about this type of login.</p>\n<p><a href=\"https://i.stack.imgur.com/4n3PY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4n3PY.png\" alt=\"screenshot of login dialog\" /></a></p>\n<p>This screenshot shows the login dialog in the Opera browser. How can I log into the server and save the file that should then be shown?</p>\n"},{"tags":["java","javascript","ajax"],"answers":[{"tags":[],"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1298624482,"creation_date":1298624482,"answer_id":5115358,"question_id":5115225,"body_markdown":"You need to transform your array of Java objects into something JavaScript understands. There are two obvious choices : XML (AJAX means Asynchronous Javascript And XML), or [JSON][1]. JSON is probably easier and more lightweight. \r\n\r\nAll the AJAX JavaScript libraries (JQuery, etc.) have good support for JSON. See http://api.jquery.com/jQuery.getJSON/ for example. \r\n\r\nThere are also several Java APIs to transform Java objects into JSON (look at [GSON][2] for example).\r\n\r\nYou&#39;ll have to modify the content type of the response : it&#39;s not text/html, but application/json if you use JSON.\r\n\r\n\r\n  [1]: http://json.org/\r\n  [2]: http://code.google.com/p/google-gson/","title":"Handle java object in javascript","body":"<p>You need to transform your array of Java objects into something JavaScript understands. There are two obvious choices : XML (AJAX means Asynchronous Javascript And XML), or <a href=\"http://json.org/\" rel=\"nofollow\">JSON</a>. JSON is probably easier and more lightweight. </p>\n\n<p>All the AJAX JavaScript libraries (JQuery, etc.) have good support for JSON. See <a href=\"http://api.jquery.com/jQuery.getJSON/\" rel=\"nofollow\">http://api.jquery.com/jQuery.getJSON/</a> for example. </p>\n\n<p>There are also several Java APIs to transform Java objects into JSON (look at <a href=\"http://code.google.com/p/google-gson/\" rel=\"nofollow\">GSON</a> for example).</p>\n\n<p>You'll have to modify the content type of the response : it's not text/html, but application/json if you use JSON.</p>\n"},{"tags":[],"owner":{"account_id":172198,"reputation":5240,"user_id":628006,"accept_rate":90,"display_name":"р&#252;ффп"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637101812,"creation_date":1298637640,"answer_id":5117319,"question_id":5115225,"body_markdown":"As already said jQuery is very good for ajax manipulation. \r\n\r\nAnother good framework I liked to use was DWR: https://github.com/directwebremoting/dwr\r\n\r\nIt is quite lighter than jQuery (because only focused on Ajax calls and not components) and very easy to understand.\r\n\r\n","title":"Handle java object in javascript","body":"<p>As already said jQuery is very good for ajax manipulation.</p>\n<p>Another good framework I liked to use was DWR: <a href=\"https://github.com/directwebremoting/dwr\" rel=\"nofollow noreferrer\">https://github.com/directwebremoting/dwr</a></p>\n<p>It is quite lighter than jQuery (because only focused on Ajax calls and not components) and very easy to understand.</p>\n"},{"tags":[],"owner":{"account_id":156786,"reputation":8774,"user_id":374293,"accept_rate":40,"display_name":"Isaac Truett"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1298638213,"creation_date":1298638213,"answer_id":5117422,"question_id":5115225,"body_markdown":"Have you considered using [Google Web Toolkit][1]? With GWT you have a number of choices for sending objects between client and server, including [GWT RPC][2], [RequestFactory][3], and [JSON][4].\r\n\r\n\r\n  [1]: http://code.google.com/webtoolkit/\r\n  [2]: http://code.google.com/webtoolkit/doc/latest/DevGuideServerCommunication.html\r\n  [3]: http://code.google.com/webtoolkit/doc/latest/DevGuideRequestFactory.html\r\n  [4]: http://code.google.com/webtoolkit/doc/latest/DevGuideCodingBasicsJSON.html","title":"Handle java object in javascript","body":"<p>Have you considered using <a href=\"http://code.google.com/webtoolkit/\" rel=\"nofollow\">Google Web Toolkit</a>? With GWT you have a number of choices for sending objects between client and server, including <a href=\"http://code.google.com/webtoolkit/doc/latest/DevGuideServerCommunication.html\" rel=\"nofollow\">GWT RPC</a>, <a href=\"http://code.google.com/webtoolkit/doc/latest/DevGuideRequestFactory.html\" rel=\"nofollow\">RequestFactory</a>, and <a href=\"http://code.google.com/webtoolkit/doc/latest/DevGuideCodingBasicsJSON.html\" rel=\"nofollow\">JSON</a>.</p>\n"}],"owner":{"account_id":245943,"reputation":5001,"user_id":519755,"accept_rate":84,"display_name":"Varun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7991,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":5117422,"answer_count":3,"score":6,"last_activity_date":1637101812,"creation_date":1298623529,"question_id":5115225,"body_markdown":"I am using Ajax in my JavaScript and that sets an array of objects of following class in a response:\r\n\r\n    public class RetrieveTempSecVersions {\r\n    \r\n    \tprivate String templateName;\r\n    \tprivate int[] versionNumber;\r\n    \t\r\n    \tpublic String getTemplateName() {\r\n    \t\treturn templateName;\r\n    \t}\r\n    \r\n    \tpublic void setTemplateName(String templateName) {\r\n    \t\tthis.templateName = templateName;\r\n    \t}\r\n    \r\n    \tpublic int[] getVersionNumber() {\r\n    \t\treturn versionNumber;\r\n    \t}\r\n    \r\n    \tpublic void setVersionNumber(int[] i) {\r\n    \t\tthis.versionNumber = i;\r\n    \t}\r\n    }\r\n\r\nusing: \r\n\r\n    aoRes.setContentType(&quot;text/xml&quot;);\r\n    aoRes.setHeader(&quot;Cache-Control&quot;, &quot;no-cache&quot;);\r\n    aoRes.getWriter().write(template[]);\r\n\r\nNow I want to read all the elements from template array and its details into my JavaScript.\r\n\r\n\r\nCan anyone help me in how to do that?","title":"Handle java object in javascript","body":"<p>I am using Ajax in my JavaScript and that sets an array of objects of following class in a response:</p>\n\n<pre><code>public class RetrieveTempSecVersions {\n\n    private String templateName;\n    private int[] versionNumber;\n\n    public String getTemplateName() {\n        return templateName;\n    }\n\n    public void setTemplateName(String templateName) {\n        this.templateName = templateName;\n    }\n\n    public int[] getVersionNumber() {\n        return versionNumber;\n    }\n\n    public void setVersionNumber(int[] i) {\n        this.versionNumber = i;\n    }\n}\n</code></pre>\n\n<p>using: </p>\n\n<pre><code>aoRes.setContentType(\"text/xml\");\naoRes.setHeader(\"Cache-Control\", \"no-cache\");\naoRes.getWriter().write(template[]);\n</code></pre>\n\n<p>Now I want to read all the elements from template array and its details into my JavaScript.</p>\n\n<p>Can anyone help me in how to do that?</p>\n"},{"tags":["java","apache-camel","apache-karaf","blueprint-osgi","apache-servicemix"],"answers":[{"tags":[],"owner":{"account_id":172198,"reputation":5240,"user_id":628006,"accept_rate":90,"display_name":"р&#252;ффп"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1637101626,"creation_date":1429613429,"answer_id":29770085,"question_id":29768685,"body_markdown":"I would discourage the use of static access to the Property file in a OSGI environment. \r\n\r\nFor me the best way is to create an OSGI service which expose validation method or the properties themselves (with getter/setter) like this:\r\n\r\n\t&lt;service ref=&quot;myConfig&quot;&gt;\r\n\t\t&lt;interfaces&gt;\r\n\t\t\t&lt;value&gt;org.osgi.service.cm.ManagedService&lt;/value&gt;\r\n\t\t\t&lt;value&gt;com.mycompany.services.common.api.MyConfig&lt;/value&gt;\r\n\t\t&lt;/interfaces&gt;\r\n\t\t&lt;service-properties&gt;\r\n\t\t\t&lt;entry key=&quot;service.pid&quot; value=&quot;config.properties&quot; /&gt;\r\n\t\t&lt;/service-properties&gt;\r\n\t&lt;/service&gt;\r\n\r\n\t&lt;bean id=&quot;myConfig&quot; class=&quot;com.mycompany.services.common.config.MyConfigImpl&quot; /&gt;\r\n\r\nAfter in any OSGI bundle which needs to access the property, it can referenced by: \r\n\r\n\t&lt;reference id=&quot;myConfig&quot; interface=&quot;com.mycompany.services.common.api.MyConfig&quot;\r\n\t\tactivation=&quot;eager&quot; availability=&quot;mandatory&quot; /&gt;\r\n\r\nBefore using this way we had a lot of deadlocks between bundles because the usage of static method and LOCK&#39;s. \r\nSince we use the OSGI service, it work very well without problem when refreshing / deploying the bundles.\r\n\r\nI assume you want to access your property file through any other OSGI bundle, not external code from the OSGI context.\r\nIf you want to access the property file outside the OSGI context, I suggest to create a (REST) Web-service over the mentioned interface (`&lt;reference&gt;`).\r\n\r\nImplementation example: \r\n\r\n    public class MyConfigImpl implements MyConfig, ManagedService {\r\n    \r\n    \t// This is just the property keys \r\n    \tprivate final static String COLORS = &quot;my.valid.colors&quot;;\r\n    \tprivate final static String PROP1 = &quot;my.property.1&quot;;\r\n    \tprivate final static String PROP2 = &quot;my.property.2&quot;;\r\n    \tprivate final static String PROP3 = &quot;my.property.3&quot;;\r\n    \r\n    \t// For validating against some properties\r\n    \tprivate List&lt;String&gt; colors = new ArrayList&lt;&gt;();\r\n    \r\n    \t// For extracting a subset of properties\r\n    \tprivate String prop1;\r\n    \tprivate String prop2;\r\n    \tprivate String prop3;\r\n    \r\n    \t// The whole set of properties published as Dictionary (could be transformed in Map as well)\r\n    \tprivate Dictionary props;\r\n    \t\r\n    \t@Override // Implements MyConfig.isValidColor(String color)\r\n    \tpublic Boolean isValidColor(String color) {\r\n    \t\tif (colors.contains(color)) {\r\n    \t\t\treturn true;\r\n    \t\t} else {\r\n    \t\t\treturn false;\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t@Override // Implements MyConfig.getPropertyOne()\r\n    \tpublic String getPropertyOne(){\r\n    \t\treturn prop1;\r\n    \t}\r\n    \r\n    \t@Override // Implements MyConfig.getPropertyTwo()\r\n    \tpublic String getPropertyTwo(){\r\n    \t\treturn prop2;\r\n    \t}\r\n    \r\n    \t@Override // Implements MyConfig.getPropertyThree()\r\n    \tpublic String getPropertyThree(){\r\n    \t\treturn prop3;\r\n    \t}\r\n    \r\n    \t@Override // Implements MyConfig.getProperties()\r\n    \tpublic Dictionary getProperties(){\r\n    \t\treturn props;\r\n    \t}\r\n    \r\n    \r\n    \t// This implements the ManagedService.updated()\r\n    \t@Override \r\n    \tpublic void updated(@SuppressWarnings(&quot;rawtypes&quot;) Dictionary properties) throws ConfigurationException {\r\n    \t\t\r\n    \t\tlog.debug(&quot;Reading properties: {}&quot;, properties);\r\n    \t\tif (properties == null) {\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \r\n    \t\tupdateConfiguration(properties);\r\n    \r\n    \t}\r\n    \r\n    \tprivate void updateConfiguration(Dictionary properties) {\r\n    \r\n    \t\t// MyUtil.asListOfString is just a helper to convert comma separated string to list of String\r\n    \t\t// This is just an example\r\n    \t\tthis.colors = MyUtil.asListOfStrings((String) properties.get(COLORS));\r\n    \r\n    \t\tthis.prop1 = properties.get(PROP1);\r\n    \t\tthis.prop2 = properties.get(PROP2);\r\n    \t\tthis.prop3 = properties.get(PROP3);\r\n    \t\tthis.props = properties;\r\n    \t}\r\n    }","title":"Populate java.util.Properties from camel property placeholder","body":"<p>I would discourage the use of static access to the Property file in a OSGI environment.</p>\n<p>For me the best way is to create an OSGI service which expose validation method or the properties themselves (with getter/setter) like this:</p>\n<pre><code>&lt;service ref=&quot;myConfig&quot;&gt;\n    &lt;interfaces&gt;\n        &lt;value&gt;org.osgi.service.cm.ManagedService&lt;/value&gt;\n        &lt;value&gt;com.mycompany.services.common.api.MyConfig&lt;/value&gt;\n    &lt;/interfaces&gt;\n    &lt;service-properties&gt;\n        &lt;entry key=&quot;service.pid&quot; value=&quot;config.properties&quot; /&gt;\n    &lt;/service-properties&gt;\n&lt;/service&gt;\n\n&lt;bean id=&quot;myConfig&quot; class=&quot;com.mycompany.services.common.config.MyConfigImpl&quot; /&gt;\n</code></pre>\n<p>After in any OSGI bundle which needs to access the property, it can referenced by:</p>\n<pre><code>&lt;reference id=&quot;myConfig&quot; interface=&quot;com.mycompany.services.common.api.MyConfig&quot;\n    activation=&quot;eager&quot; availability=&quot;mandatory&quot; /&gt;\n</code></pre>\n<p>Before using this way we had a lot of deadlocks between bundles because the usage of static method and LOCK's.\nSince we use the OSGI service, it work very well without problem when refreshing / deploying the bundles.</p>\n<p>I assume you want to access your property file through any other OSGI bundle, not external code from the OSGI context.\nIf you want to access the property file outside the OSGI context, I suggest to create a (REST) Web-service over the mentioned interface (<code>&lt;reference&gt;</code>).</p>\n<p>Implementation example:</p>\n<pre><code>public class MyConfigImpl implements MyConfig, ManagedService {\n\n    // This is just the property keys \n    private final static String COLORS = &quot;my.valid.colors&quot;;\n    private final static String PROP1 = &quot;my.property.1&quot;;\n    private final static String PROP2 = &quot;my.property.2&quot;;\n    private final static String PROP3 = &quot;my.property.3&quot;;\n\n    // For validating against some properties\n    private List&lt;String&gt; colors = new ArrayList&lt;&gt;();\n\n    // For extracting a subset of properties\n    private String prop1;\n    private String prop2;\n    private String prop3;\n\n    // The whole set of properties published as Dictionary (could be transformed in Map as well)\n    private Dictionary props;\n    \n    @Override // Implements MyConfig.isValidColor(String color)\n    public Boolean isValidColor(String color) {\n        if (colors.contains(color)) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n    @Override // Implements MyConfig.getPropertyOne()\n    public String getPropertyOne(){\n        return prop1;\n    }\n\n    @Override // Implements MyConfig.getPropertyTwo()\n    public String getPropertyTwo(){\n        return prop2;\n    }\n\n    @Override // Implements MyConfig.getPropertyThree()\n    public String getPropertyThree(){\n        return prop3;\n    }\n\n    @Override // Implements MyConfig.getProperties()\n    public Dictionary getProperties(){\n        return props;\n    }\n\n\n    // This implements the ManagedService.updated()\n    @Override \n    public void updated(@SuppressWarnings(&quot;rawtypes&quot;) Dictionary properties) throws ConfigurationException {\n        \n        log.debug(&quot;Reading properties: {}&quot;, properties);\n        if (properties == null) {\n            return;\n        }\n\n        updateConfiguration(properties);\n\n    }\n\n    private void updateConfiguration(Dictionary properties) {\n\n        // MyUtil.asListOfString is just a helper to convert comma separated string to list of String\n        // This is just an example\n        this.colors = MyUtil.asListOfStrings((String) properties.get(COLORS));\n\n        this.prop1 = properties.get(PROP1);\n        this.prop2 = properties.get(PROP2);\n        this.prop3 = properties.get(PROP3);\n        this.props = properties;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1018719,"reputation":1232,"user_id":1029684,"accept_rate":52,"display_name":"ishan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1861,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":29770085,"answer_count":1,"score":2,"last_activity_date":1637101626,"creation_date":1429609841,"question_id":29768685,"body_markdown":"I have just started learning OSGi and camel and I am working on some services that are already implemented. I have a bundle that is configured to run on Servicemix with the help of OSGi blueprint somewhat like this:\r\n\r\n    &lt;blueprint xmlns=&quot;http://www.osgi.org/xmlns/blueprint/v1.0.0&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:camel-cxf=&quot;http://camel.apache.org/schema/blueprint/cxf&quot;\r\n\txmlns:jaxrs=&quot;http://cxf.apache.org/jaxrs&quot; xmlns:cxf=&quot;http://cxf.apache.org/blueprint/core&quot;\r\n\txsi:schemaLocation=&quot;\r\n\t\thttp://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd\r\n\t\thttp://camel.apache.org/schema/cxf http://camel.apache.org/schema/cxf/camel-cxf.xsd\r\n\t\thttp://cxf.apache.org/blueprint/core http://cxf.apache.org/schemas/blueprint/core.xsd\r\n\t\thttp://camel.apache.org/schema/blueprint/cxf http://camel.apache.org/schema/blueprint/cxf/camel-cxf.xsd&quot;&gt;\r\n\r\n\t&lt;camelContext id=&quot;ctx1&quot;\r\n\t\txmlns=&quot;http://camel.apache.org/schema/blueprint&quot;\r\n\t\txsi:schemaLocation=&quot;http://camel.apache.org/schema/blueprint http://camel.apache.org/schema/blueprint/camel-blueprint.xsd&quot;&gt;\r\n\t\t&lt;propertyPlaceholder location=&quot;properties/config.properties&quot;/&gt;\r\n\t\t&lt;routeBuilder ref=&quot;...&quot; /&gt;\r\n\t&lt;/camelContext&gt;\r\n\r\n&lt;/blueprint&gt;\t\r\n\r\nCurrently, the `config.properties` is located inside the bundle but I am trying to externalize it. \r\n\r\nSo, I changed my blueprint to:\r\n\r\n    &lt;blueprint xmlns=&quot;http://www.osgi.org/xmlns/blueprint/v1.0.0&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:camel-cxf=&quot;http://camel.apache.org/schema/blueprint/cxf&quot;\r\n\txmlns:jaxrs=&quot;http://cxf.apache.org/jaxrs&quot; xmlns:cxf=&quot;http://cxf.apache.org/blueprint/core&quot;\r\n\txsi:schemaLocation=&quot;\r\n\t\thttp://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd\r\n\t\thttp://camel.apache.org/schema/cxf http://camel.apache.org/schema/cxf/camel-cxf.xsd\r\n\t\thttp://cxf.apache.org/blueprint/core http://cxf.apache.org/schemas/blueprint/core.xsd\r\n\t\thttp://camel.apache.org/schema/blueprint/cxf http://camel.apache.org/schema/blueprint/cxf/camel-cxf.xsd&quot;&gt;\r\n\r\n\t&lt;camelContext id=&quot;ctx1&quot;\r\n\t\txmlns=&quot;http://camel.apache.org/schema/blueprint&quot;\r\n\t\txsi:schemaLocation=&quot;http://camel.apache.org/schema/blueprint http://camel.apache.org/schema/blueprint/camel-blueprint.xsd&quot;&gt;\r\n\t\t&lt;propertyPlaceholder location=&quot;${karaf.home}/etc/config.properties&quot;/&gt;\r\n\t\t&lt;routeBuilder ref=&quot;...&quot; /&gt;\r\n\t&lt;/camelContext&gt;\r\n\r\n&lt;/blueprint&gt;\t\r\n\r\n... and this configuration works perfectly fine. \r\n\r\nThe problem I am facing is that this property file is also used in multiple locations via java.util.properties loaded as a simple file within a static code block in a util file.\r\n\r\nCan I use the properties loaded inside camel context in my Java code (other than camel code)? \r\n\r\nIf that is not possible, then how should I load the property files located in servicemix classpath to be used in both camel context and java code, **with minimal code changes** in my current implementation.","title":"Populate java.util.Properties from camel property placeholder","body":"<p>I have just started learning OSGi and camel and I am working on some services that are already implemented. I have a bundle that is configured to run on Servicemix with the help of OSGi blueprint somewhat like this:</p>\n\n<pre><code>&lt;blueprint xmlns=\"http://www.osgi.org/xmlns/blueprint/v1.0.0\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:camel-cxf=\"http://camel.apache.org/schema/blueprint/cxf\"\nxmlns:jaxrs=\"http://cxf.apache.org/jaxrs\" xmlns:cxf=\"http://cxf.apache.org/blueprint/core\"\nxsi:schemaLocation=\"\n    http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd\n    http://camel.apache.org/schema/cxf http://camel.apache.org/schema/cxf/camel-cxf.xsd\n    http://cxf.apache.org/blueprint/core http://cxf.apache.org/schemas/blueprint/core.xsd\n    http://camel.apache.org/schema/blueprint/cxf http://camel.apache.org/schema/blueprint/cxf/camel-cxf.xsd\"&gt;\n\n&lt;camelContext id=\"ctx1\"\n    xmlns=\"http://camel.apache.org/schema/blueprint\"\n    xsi:schemaLocation=\"http://camel.apache.org/schema/blueprint http://camel.apache.org/schema/blueprint/camel-blueprint.xsd\"&gt;\n    &lt;propertyPlaceholder location=\"properties/config.properties\"/&gt;\n    &lt;routeBuilder ref=\"...\" /&gt;\n&lt;/camelContext&gt;\n</code></pre>\n\n<p>    </p>\n\n<p>Currently, the <code>config.properties</code> is located inside the bundle but I am trying to externalize it. </p>\n\n<p>So, I changed my blueprint to:</p>\n\n<pre><code>&lt;blueprint xmlns=\"http://www.osgi.org/xmlns/blueprint/v1.0.0\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:camel-cxf=\"http://camel.apache.org/schema/blueprint/cxf\"\nxmlns:jaxrs=\"http://cxf.apache.org/jaxrs\" xmlns:cxf=\"http://cxf.apache.org/blueprint/core\"\nxsi:schemaLocation=\"\n    http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd\n    http://camel.apache.org/schema/cxf http://camel.apache.org/schema/cxf/camel-cxf.xsd\n    http://cxf.apache.org/blueprint/core http://cxf.apache.org/schemas/blueprint/core.xsd\n    http://camel.apache.org/schema/blueprint/cxf http://camel.apache.org/schema/blueprint/cxf/camel-cxf.xsd\"&gt;\n\n&lt;camelContext id=\"ctx1\"\n    xmlns=\"http://camel.apache.org/schema/blueprint\"\n    xsi:schemaLocation=\"http://camel.apache.org/schema/blueprint http://camel.apache.org/schema/blueprint/camel-blueprint.xsd\"&gt;\n    &lt;propertyPlaceholder location=\"${karaf.home}/etc/config.properties\"/&gt;\n    &lt;routeBuilder ref=\"...\" /&gt;\n&lt;/camelContext&gt;\n</code></pre>\n\n<p>    </p>\n\n<p>... and this configuration works perfectly fine. </p>\n\n<p>The problem I am facing is that this property file is also used in multiple locations via java.util.properties loaded as a simple file within a static code block in a util file.</p>\n\n<p>Can I use the properties loaded inside camel context in my Java code (other than camel code)? </p>\n\n<p>If that is not possible, then how should I load the property files located in servicemix classpath to be used in both camel context and java code, <strong>with minimal code changes</strong> in my current implementation.</p>\n"},{"tags":["java","java.util.scanner","nosuchelementexception","system.in"],"comments":[{"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"score":0,"creation_date":1637100902,"post_id":69996612,"comment_id":123735111,"body_markdown":"This famous issue occurs when closing a `Scanner` instance created on `System.in` also closes `System.in` so the user input cannot be read afterwards.","body":"This famous issue occurs when closing a <code>Scanner</code> instance created on <code>System.in</code> also closes <code>System.in</code> so the user input cannot be read afterwards."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637101087,"creation_date":1637101087,"answer_id":69996697,"question_id":69996612,"body_markdown":"Either you closed System.in, or, the next token isn&#39;t parsable as a double. It could be either issue; they&#39;d both result in a `NoSuchElementException`.\r\n\r\n## You closed `System.in`\r\n\r\nPerhaps you closed it before ever calling this code (which doesn&#39;t close `System.in`, fortunately), which is easier than you might think. This will do it:\r\n\r\n```\r\ntry (Scanner s = new Scanner(System.in)) {\r\n // stuff here\r\n}\r\n```\r\n\r\nAfter that try block is done, System.in is now closed (solution: Don&#39;t close `System.in`; don&#39;t close anything that you wrapped around `System.in` either).\r\n\r\n## There&#39;s no double there\r\n\r\nIt could also simply be that the next token available __is not a double__, then you also get this exact same behaviour. To &#39;detect&#39; that, call `.next()` instead, see if you do get something (and, what that is, for example by printing it). Could be that you&#39;re entering `5,20` and the system was expecting you to use dots for decimal separators (e.g. `5.20`) instead, thus concluding the next token isn&#39;t a double, and throwing that same exception.\r\n","title":"How can I prevent java.util.Scanner from throwing NoSuchElementException when reading from System.in?","body":"<p>Either you closed System.in, or, the next token isn't parsable as a double. It could be either issue; they'd both result in a <code>NoSuchElementException</code>.</p>\n<h2>You closed <code>System.in</code></h2>\n<p>Perhaps you closed it before ever calling this code (which doesn't close <code>System.in</code>, fortunately), which is easier than you might think. This will do it:</p>\n<pre><code>try (Scanner s = new Scanner(System.in)) {\n // stuff here\n}\n</code></pre>\n<p>After that try block is done, System.in is now closed (solution: Don't close <code>System.in</code>; don't close anything that you wrapped around <code>System.in</code> either).</p>\n<h2>There's no double there</h2>\n<p>It could also simply be that the next token available <strong>is not a double</strong>, then you also get this exact same behaviour. To 'detect' that, call <code>.next()</code> instead, see if you do get something (and, what that is, for example by printing it). Could be that you're entering <code>5,20</code> and the system was expecting you to use dots for decimal separators (e.g. <code>5.20</code>) instead, thus concluding the next token isn't a double, and throwing that same exception.</p>\n"}],"owner":{"account_id":15157756,"reputation":11,"user_id":17432485,"display_name":"Irish Jet"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1637102065,"answer_count":1,"score":1,"last_activity_date":1637101087,"creation_date":1637100500,"question_id":69996612,"body_markdown":"I&#39;m attempting to ask the user for a double value, using Scanner.nextDouble(); but I&#39;m getting a NoSuchElementException before I have a chance to type anything.  From what I can see in the documentation, this means that Scanner is at the end of the input.  However, I don&#39;t understand how that can happen when the Scanner is reading from System.in, not a file.\r\n\r\nIs it possible that having other Scanners open is causing this?  I don&#39;t think that *should* be the case, as another method is successfully run before this code that opens and closes another Scanner.  But I don&#39;t really know enough about the ins and outs of Scanner (or much else!) to know if that is the issue.\r\n\r\nHere&#39;s where I&#39;m at currently, after a lot of failed attempts to re-write this code to get it working:\r\n\r\n    public static double collectDepositAmount(int accountNum){\r\n        System.out.print(&quot;Enter how much you would like to deposit in Account #&quot; + accountNum + &quot;: $&quot;);\r\n        Scanner userInput = new Scanner(System.in);\r\n        double finalDeposit;\r\n        try{\r\n            double inputDeposit;\r\n            inputDeposit = userInput.nextDouble();\r\n\r\nThere&#39;s more after that, but the exception always gets thrown at `userInput.nextDouble();`.  The `catch` block is only looking for InputMismatchException, and I close `userInput` right before I return a valid double.","title":"How can I prevent java.util.Scanner from throwing NoSuchElementException when reading from System.in?","body":"<p>I'm attempting to ask the user for a double value, using Scanner.nextDouble(); but I'm getting a NoSuchElementException before I have a chance to type anything.  From what I can see in the documentation, this means that Scanner is at the end of the input.  However, I don't understand how that can happen when the Scanner is reading from System.in, not a file.</p>\n<p>Is it possible that having other Scanners open is causing this?  I don't think that <em>should</em> be the case, as another method is successfully run before this code that opens and closes another Scanner.  But I don't really know enough about the ins and outs of Scanner (or much else!) to know if that is the issue.</p>\n<p>Here's where I'm at currently, after a lot of failed attempts to re-write this code to get it working:</p>\n<pre><code>public static double collectDepositAmount(int accountNum){\n    System.out.print(&quot;Enter how much you would like to deposit in Account #&quot; + accountNum + &quot;: $&quot;);\n    Scanner userInput = new Scanner(System.in);\n    double finalDeposit;\n    try{\n        double inputDeposit;\n        inputDeposit = userInput.nextDouble();\n</code></pre>\n<p>There's more after that, but the exception always gets thrown at <code>userInput.nextDouble();</code>.  The <code>catch</code> block is only looking for InputMismatchException, and I close <code>userInput</code> right before I return a valid double.</p>\n"},{"tags":["java","windows","apache-kafka"],"comments":[{"owner":{"account_id":1964595,"reputation":25422,"user_id":1765189,"display_name":"Mickael Maison"},"score":1,"creation_date":1510338770,"post_id":47222957,"comment_id":81408603,"body_markdown":"Can you provide the full error message ?\nWhile it seems you get the error message when starting zookeeper, please note that Windows is not a supported platform with Kafka 1.0.0. See http://kafka.apache.org/documentation/#os","body":"Can you provide the full error message ? While it seems you get the error message when starting zookeeper, please note that Windows is not a supported platform with Kafka 1.0.0. See <a href=\"http://kafka.apache.org/documentation/#os\" rel=\"nofollow noreferrer\">kafka.apache.org/documentation/#os</a>"},{"owner":{"account_id":9848824,"reputation":86,"user_id":7295498,"display_name":"rackdevelop247"},"score":0,"creation_date":1510375663,"post_id":47222957,"comment_id":81419439,"body_markdown":"How do i get full error message in cmd. while giving this cmd zookeeper-server-start.bat ....\\config\\zookeeper.properties it is only showing The system can not find the path specified.","body":"How do i get full error message in cmd. while giving this cmd zookeeper-server-start.bat ....\\config\\zookeeper.properties it is only showing The system can not find the path specified."}],"answers":[{"tags":[],"owner":{"account_id":9848824,"reputation":86,"user_id":7295498,"display_name":"rackdevelop247"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1510390515,"creation_date":1510390515,"answer_id":47236116,"question_id":47222957,"body_markdown":"I solved the problem and now it is working fine. I mentioned JAVA_HOME path as C:\\Program Files\\Java\\jre1.8.0_121\\bin. \r\nIt should be C:\\Program Files\\Java\\jre1.8.0_121. Then there is no error. zookeeper started. kafka started. Thanks to those who tried.  ","title":"Kafka setup in windows 10","body":"<p>I solved the problem and now it is working fine. I mentioned JAVA_HOME path as C:\\Program Files\\Java\\jre1.8.0_121\\bin. \nIt should be C:\\Program Files\\Java\\jre1.8.0_121. Then there is no error. zookeeper started. kafka started. Thanks to those who tried.  </p>\n"},{"tags":[],"owner":{"account_id":21157393,"reputation":11,"user_id":15556374,"display_name":"bhaskar raju"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637100981,"creation_date":1637100981,"answer_id":69996673,"question_id":47222957,"body_markdown":"I have followed the following way to install Kafka in Windows.\r\n\r\nStep 1: Download kafka from this link http://mirrors.sonic.net/apache/kafka/2.6.0/kafka_2.13-2.6.0.tgz\r\n\r\nStep 2: Create a folder named kafka in C drive.\r\n\r\nStep 3: Extract the downloaded tgz file in C:\\kafka\r\n\r\nStep 4: Create two folders zookeeper_data and kafka_logs in kafka directory\r\n\r\nStep 5: Goto server.properties present in C:\\kafka\\config.\r\n              \r\nChange log.dirs=/tmp/kafka-logs to log.dirs=C:\\kafka\\kafka_logs\r\n\r\nStep 6: Goto zookeeper.properties present in C:\\kafka\\config.\r\n\r\nChange dataDir=/tmp/zookeeper to dataDir=C:\\kafka\\zookeeper_data\r\n\r\nStep 7: Set C:\\kafka\\bin in environment variable. \r\n\r\n\r\nStep 8:\r\n\r\nKafka needs zookeeper.\r\n\r\nStarting zookeeper.\r\n\r\nOpen cmd and type C:\\kafka\\bin\\zookeeper-server-start.bat C:\\kafka\\config\\zookeeper.properties\r\n\r\n\r\nStep 9:\r\n\r\nStart Kafka.\r\n\r\nOpen another cmd and type C:\\kafka\\bin\\kafka-server-start.bat C:\\kafka\\config\\server.properties\r\n\r\n\r\nP.S. Though the above steps help us in installing Kafka in Windows, there is an inherent defect in using Kafka with Windows. There is an error in the current Kafka for windows, which stops the Kafka server every time the log files are purged of the data.\r\n","title":"Kafka setup in windows 10","body":"<p>I have followed the following way to install Kafka in Windows.</p>\n<p>Step 1: Download kafka from this link <a href=\"http://mirrors.sonic.net/apache/kafka/2.6.0/kafka_2.13-2.6.0.tgz\" rel=\"nofollow noreferrer\">http://mirrors.sonic.net/apache/kafka/2.6.0/kafka_2.13-2.6.0.tgz</a></p>\n<p>Step 2: Create a folder named kafka in C drive.</p>\n<p>Step 3: Extract the downloaded tgz file in C:\\kafka</p>\n<p>Step 4: Create two folders zookeeper_data and kafka_logs in kafka directory</p>\n<p>Step 5: Goto server.properties present in C:\\kafka\\config.</p>\n<p>Change log.dirs=/tmp/kafka-logs to log.dirs=C:\\kafka\\kafka_logs</p>\n<p>Step 6: Goto zookeeper.properties present in C:\\kafka\\config.</p>\n<p>Change dataDir=/tmp/zookeeper to dataDir=C:\\kafka\\zookeeper_data</p>\n<p>Step 7: Set C:\\kafka\\bin in environment variable.</p>\n<p>Step 8:</p>\n<p>Kafka needs zookeeper.</p>\n<p>Starting zookeeper.</p>\n<p>Open cmd and type C:\\kafka\\bin\\zookeeper-server-start.bat C:\\kafka\\config\\zookeeper.properties</p>\n<p>Step 9:</p>\n<p>Start Kafka.</p>\n<p>Open another cmd and type C:\\kafka\\bin\\kafka-server-start.bat C:\\kafka\\config\\server.properties</p>\n<p>P.S. Though the above steps help us in installing Kafka in Windows, there is an inherent defect in using Kafka with Windows. There is an error in the current Kafka for windows, which stops the Kafka server every time the log files are purged of the data.</p>\n"}],"owner":{"account_id":9848824,"reputation":86,"user_id":7295498,"display_name":"rackdevelop247"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3438,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":47236116,"answer_count":2,"score":0,"last_activity_date":1637100981,"creation_date":1510317452,"question_id":47222957,"body_markdown":"I am using windows 10 and I already have java installed in my machine \r\nThe JAVA_HOME user variable is set to C:\\Program Files\\Java\\jre1.8.0_121\\bin path and same path for environment variable.  \r\nI want to use Kafka in my machine for a project. \r\nI download kafka from the link &lt;a href=&quot;http://www-us.apache.org/dist/kafka/1.0.0/kafka_2.11-1.0.0.tgz&quot;&gt;http://www-us.apache.org/dist/kafka/1.0.0/kafka_2.11-1.0.0.tgz&lt;/a&gt;\r\n\r\nI extracted it to my C drive in a folder named as Kafka. I made the changes in zookeeper.properties file for dataDir as C:/Kafka/kafka_2.11-1.0.0/zookeeper-data and I also made changes in server.properties for log.dirs as C:/Kafka/kafka_2.11-1.0.0/kafka-logs.\r\n\r\nI opened cmd in C:\\Kafka\\kafka_2.11-1.0.0\\bin\\windows path and gave the following command in order to run the zookeeper server zookeeper-server-start.bat ..\\..\\config\\zookeeper.properties   \r\nThe cmd is giving me error message as The system can not find the path specified. This is all I am getting. Kindly guide me to fix it and help me to run kafka. Thanks ","title":"Kafka setup in windows 10","body":"<p>I am using windows 10 and I already have java installed in my machine \nThe JAVA_HOME user variable is set to C:\\Program Files\\Java\\jre1.8.0_121\\bin path and same path for environment variable.<br>\nI want to use Kafka in my machine for a project. \nI download kafka from the link <a href=\"http://www-us.apache.org/dist/kafka/1.0.0/kafka_2.11-1.0.0.tgz\" rel=\"nofollow noreferrer\"><a href=\"http://www-us.apache.org/dist/kafka/1.0.0/kafka_2.11-1.0.0.tgz\" rel=\"nofollow noreferrer\">http://www-us.apache.org/dist/kafka/1.0.0/kafka_2.11-1.0.0.tgz</a></a></p>\n\n<p>I extracted it to my C drive in a folder named as Kafka. I made the changes in zookeeper.properties file for dataDir as C:/Kafka/kafka_2.11-1.0.0/zookeeper-data and I also made changes in server.properties for log.dirs as C:/Kafka/kafka_2.11-1.0.0/kafka-logs.</p>\n\n<p>I opened cmd in C:\\Kafka\\kafka_2.11-1.0.0\\bin\\windows path and gave the following command in order to run the zookeeper server zookeeper-server-start.bat ....\\config\\zookeeper.properties<br>\nThe cmd is giving me error message as The system can not find the path specified. This is all I am getting. Kindly guide me to fix it and help me to run kafka. Thanks </p>\n"},{"tags":["java","swing","jtextpane","println","styleddocument"],"comments":[{"owner":{"account_id":1441481,"reputation":10825,"user_id":1361506,"display_name":"azurefrog"},"score":1,"creation_date":1637100441,"post_id":69996556,"comment_id":123734983,"body_markdown":"The console is using a monospaced font.  It looks like your text pane is not.","body":"The console is using a monospaced font.  It looks like your text pane is not."},{"owner":{"account_id":23290244,"reputation":29,"user_id":17372437,"display_name":"carlb710"},"score":0,"creation_date":1637100573,"post_id":69996556,"comment_id":123735025,"body_markdown":"Good eye! so would specifying a monospaced font for the styled doc that the TextPane references be the best way to go about fixing that? Something like the answer in this post? https://stackoverflow.com/questions/16279781/getting-jtextarea-to-display-fixed-width-font-without-antialiasing","body":"Good eye! so would specifying a monospaced font for the styled doc that the TextPane references be the best way to go about fixing that? Something like the answer in this post? <a href=\"https://stackoverflow.com/questions/16279781/getting-jtextarea-to-display-fixed-width-font-without-antialiasing\" title=\"getting jtextarea to display fixed width font without antialiasing\">stackoverflow.com/questions/16279781/&hellip;</a>"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":6,"creation_date":1637101221,"post_id":69996556,"comment_id":123735200,"body_markdown":"Don&#39;t use formatted text **for tabular data, *use a `JTable`*.**","body":"Don&#39;t use formatted text <b>for tabular data, <i>use a <code>JTable</code></i>.</b>"}],"owner":{"account_id":23290244,"reputation":29,"user_id":17372437,"display_name":"carlb710"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637100947,"creation_date":1637100113,"question_id":69996556,"body_markdown":"I want to print out what essentially looks like a table to a JTextPane, something like this: \r\n\r\n![table print out][1]\r\n\r\nWhat my output looks like currently is this:\r\n\r\n![my current output][2]\r\n\r\nAs you can see the columns do not line up really at all. In the console however it is perfect, and looks like this:\r\n\r\n![console print out][3] \r\n\r\n(a little cut off but you get the point, it&#39;s aligned!)\r\n\r\n\r\n\r\nI&#39;m borrowing some code from https://github.com/htorun/dbtableprinter in order to do this. The code is built around printing to console, however, so I am converting a few bits to work with my code, namely the print method, since I do not want the output in the console. I am calling 2 methods from my GUI class in lieu of print and println:\r\n\r\n```java\r\n\r\n//to replace print\r\n\r\n\r\npublic void printTableText(String toPrint){\r\n    try {\r\n        doc.insertString(doc.getLength(), toPrint, null);\r\n    } catch (BadLocationException ex) {\r\n        ex.printStackTrace();\r\n    }\r\n}\r\n\r\n```\r\n------------------\r\n\r\n```java\r\n\r\n//to replace println\r\n\r\npublic void printText(String toPrint){\r\n    try {\r\n        toPrint = &quot;\\n&quot; +  toPrint;\r\n        doc.insertString(doc.getLength(), toPrint, null);\r\n    } catch (BadLocationException ex) {\r\n        ex.printStackTrace();\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nEssentially their code parses through the metadata in a JDBC table to get the number of rows, columns, and their respective data types for a given query, and sets column width, padding, etc to format what is essentially a printed table view in the console. It does so with the following code: (note print related code using methods above is mine, all else is not)\r\n\r\n```java\r\n\r\n public void printResultSet(ResultSet rs, int maxStringColWidth) {\r\n        try {\r\n            if (rs == null) {\r\n                System.err.println(&quot;DBTablePrinter Error: Result set is null!&quot;);\r\n                return;\r\n            }\r\n            if (rs.isClosed()) {\r\n                System.err.println(&quot;DBTablePrinter Error: Result Set is closed!&quot;);\r\n                return;\r\n            }\r\n            if (maxStringColWidth &lt; 1) {\r\n                System.err.println(&quot;DBTablePrinter Info: Invalid max. varchar column width. Using default!&quot;);\r\n                maxStringColWidth = DEFAULT_MAX_TEXT_COL_WIDTH;\r\n            }\r\n\r\n            // Get the meta data object of this ResultSet.\r\n            ResultSetMetaData rsmd;\r\n            rsmd = rs.getMetaData();\r\n\r\n            // Total number of columns in this ResultSet\r\n            int columnCount = rsmd.getColumnCount();\r\n\r\n            // List of Column objects to store each columns of the ResultSet\r\n            // and the String representation of their values.\r\n            List&lt;Column&gt; columns = new ArrayList&lt;&gt;(columnCount);\r\n\r\n            // List of table names. Can be more than one if it is a joined\r\n            // table query\r\n            List&lt;String&gt; tableNames = new ArrayList&lt;&gt;(columnCount);\r\n\r\n            // Get the columns and their meta data.\r\n            // NOTE: columnIndex for rsmd.getXXX methods STARTS AT 1 NOT 0\r\n            for (int i = 1; i &lt;= columnCount; i++) {\r\n                Column c = new Column(rsmd.getColumnLabel(i),\r\n                        rsmd.getColumnType(i), rsmd.getColumnTypeName(i));\r\n                c.setWidth(c.getLabel().length());\r\n                c.setTypeCategory(whichCategory(c.getType()));\r\n                columns.add(c);\r\n\r\n                if (!tableNames.contains(rsmd.getTableName(i))) {\r\n                    tableNames.add(rsmd.getTableName(i));\r\n                }\r\n            }\r\n\r\n            // Go through each row, get values of each column and adjust\r\n            // column widths.\r\n            int rowCount = 0;\r\n            while (rs.next()) {\r\n\r\n                // NOTE: columnIndex for rs.getXXX methods STARTS AT 1 NOT 0\r\n                for (int i = 0; i &lt; columnCount; i++) {\r\n                    Column c = columns.get(i);\r\n                    String value;\r\n                    int category = c.getTypeCategory();\r\n\r\n                    if (category == CATEGORY_OTHER) {\r\n\r\n                        // Use generic SQL type name instead of the actual value\r\n                        // for column types BLOB, BINARY etc.\r\n                        value = &quot;(&quot; + c.getTypeName() + &quot;)&quot;;\r\n\r\n                    } else {\r\n                        value = rs.getString(i+1) == null ? &quot;NULL&quot; : rs.getString(i+1);\r\n                    }\r\n                    switch (category) {\r\n                        case CATEGORY_DOUBLE:\r\n\r\n                            // For real numbers, format the string value to have 3 digits\r\n                            // after the point. THIS IS TOTALLY ARBITRARY and can be\r\n                            // improved to be CONFIGURABLE.\r\n                            if (!value.equals(&quot;NULL&quot;)) {\r\n                                Double dValue = rs.getDouble(i+1);\r\n                                value = String.format(&quot;%.3f&quot;, dValue);\r\n                            }\r\n                            break;\r\n\r\n                        case CATEGORY_STRING:\r\n\r\n                            // Left justify the text columns\r\n                            c.justifyLeft();\r\n\r\n                            // and apply the width limit\r\n                            if (value.length() &gt; maxStringColWidth) {\r\n                                value = value.substring(0, maxStringColWidth - 3) + &quot;...&quot;;\r\n                            }\r\n                            break;\r\n                    }\r\n\r\n                    // Adjust the column width\r\n                    c.setWidth(value.length() &gt; c.getWidth() ? value.length() : c.getWidth());\r\n                    c.addValue(value);\r\n                } // END of for loop columnCount\r\n                rowCount++;\r\n\r\n            } // END of while (rs.next)\r\n\r\n            /*\r\n            At this point we have gone through meta data, get the\r\n            columns and created all Column objects, iterated over the\r\n            ResultSet rows, populated the column values and adjusted\r\n            the column widths.\r\n\r\n            We cannot start printing just yet because we have to prepare\r\n            a row separator String.\r\n             */\r\n\r\n            // For the fun of it, I will use StringBuilder\r\n            StringBuilder strToPrint = new StringBuilder();\r\n            StringBuilder rowSeparator = new StringBuilder();\r\n\r\n            /*\r\n            Prepare column labels to print as well as the row separator.\r\n            It should look something like this:\r\n            +--------+------------+------------+-----------+  (row separator)\r\n            | EMP_NO | BIRTH_DATE | FIRST_NAME | LAST_NAME |  (labels row)\r\n            +--------+------------+------------+-----------+  (row separator)\r\n             */\r\n\r\n            // Iterate over columns\r\n            for (Column c : columns) {\r\n                int width = c.getWidth();\r\n\r\n              // Center the column label\r\n                String toPrint;\r\n                String name = c.getLabel();\r\n                int diff = width - name.length();\r\n\r\n                if ((diff%2) == 1) {\r\n                    // diff is not divisible by 2, add 1 to width (and diff)\r\n                    // so that we can have equal padding to the left and right\r\n                    // of the column label.\r\n                    width++;\r\n                    diff++;\r\n                    c.setWidth(width);\r\n                }\r\n\r\n                int paddingSize = diff/2; // InteliJ says casting to int is redundant.\r\n\r\n                // Cool String repeater code thanks to user102008 at stackoverflow.com\r\n             \r\n                String padding = new String(new char[paddingSize]).replace(&quot;\\0&quot;, &quot; &quot;);\r\n\r\n                toPrint = &quot;| &quot; + padding + name + padding + &quot; &quot;;\r\n              // END centering the column label\r\n\r\n                strToPrint.append(toPrint);\r\n\r\n                rowSeparator.append(&quot;+&quot;);\r\n                rowSeparator.append(new String(new char[width + 2]).replace(&quot;\\0&quot;, &quot;-&quot;));\r\n            }\r\n\r\n            String lineSeparator = System.getProperty(&quot;line.separator&quot;);\r\n\r\n            // Is this really necessary ??\r\n            lineSeparator = lineSeparator == null ? &quot;\\n&quot; : lineSeparator;\r\n\r\n            rowSeparator.append(&quot;+&quot;).append(lineSeparator);\r\n\r\n            strToPrint.append(&quot;|&quot;).append(lineSeparator);\r\n            strToPrint.insert(0, rowSeparator);\r\n            strToPrint.append(rowSeparator);\r\n\r\n            StringJoiner sj = new StringJoiner(&quot;, &quot;);\r\n            for (String name : tableNames) {\r\n                sj.add(name);\r\n            }\r\n\r\n            String info = &quot;Printing &quot; + rowCount;\r\n            info += rowCount &gt; 1 ? &quot; rows from &quot; : &quot; row from &quot;;\r\n            info += tableNames.size() &gt; 1 ? &quot;tables &quot; : &quot;table &quot;;\r\n            info += sj.toString();\r\n\r\n            window.printTableText(info);\r\n            System.out.println(info);\r\n\r\n            // Print out the formatted column labels\r\n            System.out.print(strToPrint.toString());\r\n            window.printTableText(strToPrint.toString());\r\n\r\n            String format;\r\n\r\n            // Print out the rows\r\n            for (int i = 0; i &lt; rowCount; i++) {\r\n                for (Column c : columns) {\r\n\r\n                    // This should form a format string like: &quot;%-60s&quot;\r\n                    format = String.format(&quot;| %%%s%ds &quot;, c.getJustifyFlag(), c.getWidth());\r\n                    System.out.print(\r\n                            String.format(format, c.getValue(i))\r\n                    );\r\n                    window.printTableText(String.format(format, c.getValue(i)));\r\n                }\r\n\r\n                System.out.println(&quot;|&quot;);\r\n                System.out.print(rowSeparator);\r\n                window.printText(&quot;|&quot;);\r\n                window.printTableText(String.valueOf(rowSeparator));\r\n            }\r\n\r\n            System.out.println();\r\n\r\n            /*\r\n                Hopefully this should have printed something like this:\r\n                +--------+------------+------------+-----------+--------+-------------+\r\n                | EMP_NO | BIRTH_DATE | FIRST_NAME | LAST_NAME | GENDER |  HIRE_DATE  |\r\n                +--------+------------+------------+-----------+--------+-------------+\r\n                |  10001 | 1953-09-02 | Georgi     | Facello   | M      |  1986-06-26 |\r\n                +--------+------------+------------+-----------+--------+-------------+\r\n                |  10002 | 1964-06-02 | Bezalel    | Simmel    | F      |  1985-11-21 |\r\n                +--------+------------+------------+-----------+--------+-------------+\r\n             */\r\n\r\n        } catch (SQLException e) {\r\n            System.err.println(&quot;SQL exception in DBTablePrinter. Message:&quot;);\r\n            System.err.println(e.getMessage());\r\n        }\r\n    }\r\n\r\n```\r\n\r\n\r\n\r\nGiven the fact that the console output is perfect, the conclusion I&#39;ve reached is that there is some issue with either my print methods, or, with how StyledDocuments handle the formatting used in the DBTablePrinter class I&#39;ve borrowed. I&#39;m new to JTextPanes and StyledDocuments, so maybe there&#39;s just something simple going on that I&#39;m not aware of here.\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/aaHYa.png\r\n  [2]: https://i.stack.imgur.com/2UASZ.png\r\n  [3]: https://i.stack.imgur.com/sQME7.png","title":"Why does the formatting differ from console output and JTextPane?","body":"<p>I want to print out what essentially looks like a table to a JTextPane, something like this:</p>\n<p><img src=\"https://i.stack.imgur.com/aaHYa.png\" alt=\"table print out\" /></p>\n<p>What my output looks like currently is this:</p>\n<p><img src=\"https://i.stack.imgur.com/2UASZ.png\" alt=\"my current output\" /></p>\n<p>As you can see the columns do not line up really at all. In the console however it is perfect, and looks like this:</p>\n<p><img src=\"https://i.stack.imgur.com/sQME7.png\" alt=\"console print out\" /></p>\n<p>(a little cut off but you get the point, it's aligned!)</p>\n<p>I'm borrowing some code from <a href=\"https://github.com/htorun/dbtableprinter\" rel=\"nofollow noreferrer\">https://github.com/htorun/dbtableprinter</a> in order to do this. The code is built around printing to console, however, so I am converting a few bits to work with my code, namely the print method, since I do not want the output in the console. I am calling 2 methods from my GUI class in lieu of print and println:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n//to replace print\n\n\npublic void printTableText(String toPrint){\n    try {\n        doc.insertString(doc.getLength(), toPrint, null);\n    } catch (BadLocationException ex) {\n        ex.printStackTrace();\n    }\n}\n\n</code></pre>\n<hr />\n<pre class=\"lang-java prettyprint-override\"><code>\n//to replace println\n\npublic void printText(String toPrint){\n    try {\n        toPrint = &quot;\\n&quot; +  toPrint;\n        doc.insertString(doc.getLength(), toPrint, null);\n    } catch (BadLocationException ex) {\n        ex.printStackTrace();\n    }\n}\n</code></pre>\n<p>Essentially their code parses through the metadata in a JDBC table to get the number of rows, columns, and their respective data types for a given query, and sets column width, padding, etc to format what is essentially a printed table view in the console. It does so with the following code: (note print related code using methods above is mine, all else is not)</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n public void printResultSet(ResultSet rs, int maxStringColWidth) {\n        try {\n            if (rs == null) {\n                System.err.println(&quot;DBTablePrinter Error: Result set is null!&quot;);\n                return;\n            }\n            if (rs.isClosed()) {\n                System.err.println(&quot;DBTablePrinter Error: Result Set is closed!&quot;);\n                return;\n            }\n            if (maxStringColWidth &lt; 1) {\n                System.err.println(&quot;DBTablePrinter Info: Invalid max. varchar column width. Using default!&quot;);\n                maxStringColWidth = DEFAULT_MAX_TEXT_COL_WIDTH;\n            }\n\n            // Get the meta data object of this ResultSet.\n            ResultSetMetaData rsmd;\n            rsmd = rs.getMetaData();\n\n            // Total number of columns in this ResultSet\n            int columnCount = rsmd.getColumnCount();\n\n            // List of Column objects to store each columns of the ResultSet\n            // and the String representation of their values.\n            List&lt;Column&gt; columns = new ArrayList&lt;&gt;(columnCount);\n\n            // List of table names. Can be more than one if it is a joined\n            // table query\n            List&lt;String&gt; tableNames = new ArrayList&lt;&gt;(columnCount);\n\n            // Get the columns and their meta data.\n            // NOTE: columnIndex for rsmd.getXXX methods STARTS AT 1 NOT 0\n            for (int i = 1; i &lt;= columnCount; i++) {\n                Column c = new Column(rsmd.getColumnLabel(i),\n                        rsmd.getColumnType(i), rsmd.getColumnTypeName(i));\n                c.setWidth(c.getLabel().length());\n                c.setTypeCategory(whichCategory(c.getType()));\n                columns.add(c);\n\n                if (!tableNames.contains(rsmd.getTableName(i))) {\n                    tableNames.add(rsmd.getTableName(i));\n                }\n            }\n\n            // Go through each row, get values of each column and adjust\n            // column widths.\n            int rowCount = 0;\n            while (rs.next()) {\n\n                // NOTE: columnIndex for rs.getXXX methods STARTS AT 1 NOT 0\n                for (int i = 0; i &lt; columnCount; i++) {\n                    Column c = columns.get(i);\n                    String value;\n                    int category = c.getTypeCategory();\n\n                    if (category == CATEGORY_OTHER) {\n\n                        // Use generic SQL type name instead of the actual value\n                        // for column types BLOB, BINARY etc.\n                        value = &quot;(&quot; + c.getTypeName() + &quot;)&quot;;\n\n                    } else {\n                        value = rs.getString(i+1) == null ? &quot;NULL&quot; : rs.getString(i+1);\n                    }\n                    switch (category) {\n                        case CATEGORY_DOUBLE:\n\n                            // For real numbers, format the string value to have 3 digits\n                            // after the point. THIS IS TOTALLY ARBITRARY and can be\n                            // improved to be CONFIGURABLE.\n                            if (!value.equals(&quot;NULL&quot;)) {\n                                Double dValue = rs.getDouble(i+1);\n                                value = String.format(&quot;%.3f&quot;, dValue);\n                            }\n                            break;\n\n                        case CATEGORY_STRING:\n\n                            // Left justify the text columns\n                            c.justifyLeft();\n\n                            // and apply the width limit\n                            if (value.length() &gt; maxStringColWidth) {\n                                value = value.substring(0, maxStringColWidth - 3) + &quot;...&quot;;\n                            }\n                            break;\n                    }\n\n                    // Adjust the column width\n                    c.setWidth(value.length() &gt; c.getWidth() ? value.length() : c.getWidth());\n                    c.addValue(value);\n                } // END of for loop columnCount\n                rowCount++;\n\n            } // END of while (rs.next)\n\n            /*\n            At this point we have gone through meta data, get the\n            columns and created all Column objects, iterated over the\n            ResultSet rows, populated the column values and adjusted\n            the column widths.\n\n            We cannot start printing just yet because we have to prepare\n            a row separator String.\n             */\n\n            // For the fun of it, I will use StringBuilder\n            StringBuilder strToPrint = new StringBuilder();\n            StringBuilder rowSeparator = new StringBuilder();\n\n            /*\n            Prepare column labels to print as well as the row separator.\n            It should look something like this:\n            +--------+------------+------------+-----------+  (row separator)\n            | EMP_NO | BIRTH_DATE | FIRST_NAME | LAST_NAME |  (labels row)\n            +--------+------------+------------+-----------+  (row separator)\n             */\n\n            // Iterate over columns\n            for (Column c : columns) {\n                int width = c.getWidth();\n\n              // Center the column label\n                String toPrint;\n                String name = c.getLabel();\n                int diff = width - name.length();\n\n                if ((diff%2) == 1) {\n                    // diff is not divisible by 2, add 1 to width (and diff)\n                    // so that we can have equal padding to the left and right\n                    // of the column label.\n                    width++;\n                    diff++;\n                    c.setWidth(width);\n                }\n\n                int paddingSize = diff/2; // InteliJ says casting to int is redundant.\n\n                // Cool String repeater code thanks to user102008 at stackoverflow.com\n             \n                String padding = new String(new char[paddingSize]).replace(&quot;\\0&quot;, &quot; &quot;);\n\n                toPrint = &quot;| &quot; + padding + name + padding + &quot; &quot;;\n              // END centering the column label\n\n                strToPrint.append(toPrint);\n\n                rowSeparator.append(&quot;+&quot;);\n                rowSeparator.append(new String(new char[width + 2]).replace(&quot;\\0&quot;, &quot;-&quot;));\n            }\n\n            String lineSeparator = System.getProperty(&quot;line.separator&quot;);\n\n            // Is this really necessary ??\n            lineSeparator = lineSeparator == null ? &quot;\\n&quot; : lineSeparator;\n\n            rowSeparator.append(&quot;+&quot;).append(lineSeparator);\n\n            strToPrint.append(&quot;|&quot;).append(lineSeparator);\n            strToPrint.insert(0, rowSeparator);\n            strToPrint.append(rowSeparator);\n\n            StringJoiner sj = new StringJoiner(&quot;, &quot;);\n            for (String name : tableNames) {\n                sj.add(name);\n            }\n\n            String info = &quot;Printing &quot; + rowCount;\n            info += rowCount &gt; 1 ? &quot; rows from &quot; : &quot; row from &quot;;\n            info += tableNames.size() &gt; 1 ? &quot;tables &quot; : &quot;table &quot;;\n            info += sj.toString();\n\n            window.printTableText(info);\n            System.out.println(info);\n\n            // Print out the formatted column labels\n            System.out.print(strToPrint.toString());\n            window.printTableText(strToPrint.toString());\n\n            String format;\n\n            // Print out the rows\n            for (int i = 0; i &lt; rowCount; i++) {\n                for (Column c : columns) {\n\n                    // This should form a format string like: &quot;%-60s&quot;\n                    format = String.format(&quot;| %%%s%ds &quot;, c.getJustifyFlag(), c.getWidth());\n                    System.out.print(\n                            String.format(format, c.getValue(i))\n                    );\n                    window.printTableText(String.format(format, c.getValue(i)));\n                }\n\n                System.out.println(&quot;|&quot;);\n                System.out.print(rowSeparator);\n                window.printText(&quot;|&quot;);\n                window.printTableText(String.valueOf(rowSeparator));\n            }\n\n            System.out.println();\n\n            /*\n                Hopefully this should have printed something like this:\n                +--------+------------+------------+-----------+--------+-------------+\n                | EMP_NO | BIRTH_DATE | FIRST_NAME | LAST_NAME | GENDER |  HIRE_DATE  |\n                +--------+------------+------------+-----------+--------+-------------+\n                |  10001 | 1953-09-02 | Georgi     | Facello   | M      |  1986-06-26 |\n                +--------+------------+------------+-----------+--------+-------------+\n                |  10002 | 1964-06-02 | Bezalel    | Simmel    | F      |  1985-11-21 |\n                +--------+------------+------------+-----------+--------+-------------+\n             */\n\n        } catch (SQLException e) {\n            System.err.println(&quot;SQL exception in DBTablePrinter. Message:&quot;);\n            System.err.println(e.getMessage());\n        }\n    }\n\n</code></pre>\n<p>Given the fact that the console output is perfect, the conclusion I've reached is that there is some issue with either my print methods, or, with how StyledDocuments handle the formatting used in the DBTablePrinter class I've borrowed. I'm new to JTextPanes and StyledDocuments, so maybe there's just something simple going on that I'm not aware of here.</p>\n"},{"tags":["java","maven","intellij-idea","guava"],"comments":[{"owner":{"account_id":18132414,"reputation":934,"user_id":13187363,"display_name":"IntoVoid"},"score":0,"creation_date":1616936943,"post_id":66841726,"comment_id":118153020,"body_markdown":"you could just create a gradle project (in IntelliJ) and add the dependencies using implementation","body":"you could just create a gradle project (in IntelliJ) and add the dependencies using implementation"},{"owner":{"account_id":925583,"reputation":5282,"user_id":956435,"accept_rate":59,"display_name":"Ramon de Klein"},"score":0,"creation_date":1616954524,"post_id":66841726,"comment_id":118158225,"body_markdown":"@IntoVoid I don&#39;t want to use Gradle, because everything else is in Maven. But I just found out it&#39;s only a problem on my Windows box :-(","body":"@IntoVoid I don&#39;t want to use Gradle, because everything else is in Maven. But I just found out it&#39;s only a problem on my Windows box :-("}],"answers":[{"tags":[],"owner":{"account_id":16362850,"reputation":102,"user_id":11818002,"display_name":"arellak"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1616937056,"creation_date":1616937056,"answer_id":66841788,"question_id":66841726,"body_markdown":"Can you share your whole pom.xml and explain what exactly you mean by &quot;debugging&quot;? The IntelliJ Debugger?\r\nI tried to reproduce your error but it didn&#39;t worked. I can run the program without any errors, in &quot;normal&quot; run mode and in debug mode.\r\nDid you correctly imported the dependency like this?\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n            &lt;version&gt;30.1-jre&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\nDid you reload the Maven project so it really downloaded the dependency? [See how to reload][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1n5sF.png","title":"IntelliJ reports package does not exist (only on Windows)","body":"<p>Can you share your whole pom.xml and explain what exactly you mean by &quot;debugging&quot;? The IntelliJ Debugger?\nI tried to reproduce your error but it didn't worked. I can run the program without any errors, in &quot;normal&quot; run mode and in debug mode.\nDid you correctly imported the dependency like this?</p>\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n        &lt;artifactId&gt;guava&lt;/artifactId&gt;\n        &lt;version&gt;30.1-jre&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>Did you reload the Maven project so it really downloaded the dependency? <a href=\"https://i.stack.imgur.com/1n5sF.png\" rel=\"nofollow noreferrer\">See how to reload</a></p>\n"},{"tags":[],"owner":{"account_id":925583,"reputation":5282,"user_id":956435,"accept_rate":59,"display_name":"Ramon de Klein"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1616957531,"creation_date":1616957531,"answer_id":66845030,"question_id":66841726,"body_markdown":"I guess something was wrong with my IntelliJ settings. I did the following steps and then it worked:\r\n1. Remove all Java installations on my system.\r\n1. Remove IntelliJ\r\n1. Remove all JDKs and files in &lt;HOME&gt;/.m2.\r\n1. Remove all .idea folders, .iml files and target folders.\r\n1. Reinstalled IntelliJ\r\n1. Reinstalled Zulu 15 JDK\r\n1. Run File - Manage IDE Settings - Restore default settings\r\n1. Load the project\r\n\r\nThen debugging works. Don&#39;t know why...","title":"IntelliJ reports package does not exist (only on Windows)","body":"<p>I guess something was wrong with my IntelliJ settings. I did the following steps and then it worked:</p>\n<ol>\n<li>Remove all Java installations on my system.</li>\n<li>Remove IntelliJ</li>\n<li>Remove all JDKs and files in /.m2.</li>\n<li>Remove all .idea folders, .iml files and target folders.</li>\n<li>Reinstalled IntelliJ</li>\n<li>Reinstalled Zulu 15 JDK</li>\n<li>Run File - Manage IDE Settings - Restore default settings</li>\n<li>Load the project</li>\n</ol>\n<p>Then debugging works. Don't know why...</p>\n"},{"tags":[],"owner":{"account_id":2909887,"reputation":11,"user_id":2494385,"display_name":"LuZcila"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1619458804,"creation_date":1619458804,"answer_id":67271347,"question_id":66841726,"body_markdown":"I had the same problem this morning and I fixed it by doing the following steps:\r\n\r\n1) Close Intellij\r\n2) remove folder [HOME]/.m2/repository\r\n3) remove folder [MY_PROJECT]/.idea/libraries\r\n4) Open Intellij\r\n5) mvn dependency:resolve\r\n6) mvn install\r\n\r\nI think doing only 6 (without 5) may work the same\r\n\r\n\r\n\r\n","title":"IntelliJ reports package does not exist (only on Windows)","body":"<p>I had the same problem this morning and I fixed it by doing the following steps:</p>\n<ol>\n<li>Close Intellij</li>\n<li>remove folder [HOME]/.m2/repository</li>\n<li>remove folder [MY_PROJECT]/.idea/libraries</li>\n<li>Open Intellij</li>\n<li>mvn dependency:resolve</li>\n<li>mvn install</li>\n</ol>\n<p>I think doing only 6 (without 5) may work the same</p>\n"},{"tags":[],"owner":{"account_id":1535921,"reputation":3060,"user_id":1431979,"display_name":"Pierre C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637100450,"creation_date":1637100450,"answer_id":69996599,"question_id":66841726,"body_markdown":"Check to see if the dependency (package) that could not be found is annotated as being required only for `runtime`. This is clearly not true if it is refered to in an `import` statement in which case it is also required for `compile`. \r\n\r\nIf this is the case, then\r\n\r\n- For maven : remove `&lt;scope&gt;runtime&lt;/scope&gt;` below the dependency declaration\r\n- For gradle : change `runtime` in front of the dependency declaration to `compile` or `implementation`.\r\n\r\n","title":"IntelliJ reports package does not exist (only on Windows)","body":"<p>Check to see if the dependency (package) that could not be found is annotated as being required only for <code>runtime</code>. This is clearly not true if it is refered to in an <code>import</code> statement in which case it is also required for <code>compile</code>.</p>\n<p>If this is the case, then</p>\n<ul>\n<li>For maven : remove <code>&lt;scope&gt;runtime&lt;/scope&gt;</code> below the dependency declaration</li>\n<li>For gradle : change <code>runtime</code> in front of the dependency declaration to <code>compile</code> or <code>implementation</code>.</li>\n</ul>\n"}],"owner":{"account_id":925583,"reputation":5282,"user_id":956435,"accept_rate":59,"display_name":"Ramon de Klein"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5580,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1637100450,"creation_date":1616936610,"question_id":66841726,"body_markdown":"I am pretty new to the whole Java eco-system and I am already spending hours to get an external dependency to work with IntelliJ. I use a simple Java application that contains an `App.java` containing:\r\n```\r\npackage com.example.maven;\r\n\r\nimport com.google.common.collect.ImmutableList;\r\n\r\npublic class App\r\n{\r\n    public static void main( String[] args )\r\n    {\r\n        ImmutableList&lt;String&gt; list = ImmutableList.of(&quot;hello&quot;, &quot;world&quot;);\r\n        for (String item : list) {\r\n            System.out.println( item );\r\n        }\r\n    }\r\n}\r\n```\r\nThe `pom.xml` contains a dependency to com.google.guava (required for `ImmutableList`) that looks like this:\r\n```\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n  &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n  &lt;version&gt;30.1-jre&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nWhenever I try to debug, I get the error that `com.google.common.collect.ImmutableList` cannot be loaded.  I also tried to clone https://github.com/tfnico/guava-example (updated Java version to a supported version), but no luck.\r\n\r\nIt seems to be an issue with my Windows PC. My Mac doesn&#39;t have any issues, but I have removed everything from my Windows PC (Java JRE, SDKs, IntelliJ and reinstalled it again). I don&#39;t want to develop on my Mac. Why doesn&#39;t this work on Windows???","title":"IntelliJ reports package does not exist (only on Windows)","body":"<p>I am pretty new to the whole Java eco-system and I am already spending hours to get an external dependency to work with IntelliJ. I use a simple Java application that contains an <code>App.java</code> containing:</p>\n<pre><code>package com.example.maven;\n\nimport com.google.common.collect.ImmutableList;\n\npublic class App\n{\n    public static void main( String[] args )\n    {\n        ImmutableList&lt;String&gt; list = ImmutableList.of(&quot;hello&quot;, &quot;world&quot;);\n        for (String item : list) {\n            System.out.println( item );\n        }\n    }\n}\n</code></pre>\n<p>The <code>pom.xml</code> contains a dependency to com.google.guava (required for <code>ImmutableList</code>) that looks like this:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n  &lt;artifactId&gt;guava&lt;/artifactId&gt;\n  &lt;version&gt;30.1-jre&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Whenever I try to debug, I get the error that <code>com.google.common.collect.ImmutableList</code> cannot be loaded.  I also tried to clone <a href=\"https://github.com/tfnico/guava-example\" rel=\"nofollow noreferrer\">https://github.com/tfnico/guava-example</a> (updated Java version to a supported version), but no luck.</p>\n<p>It seems to be an issue with my Windows PC. My Mac doesn't have any issues, but I have removed everything from my Windows PC (Java JRE, SDKs, IntelliJ and reinstalled it again). I don't want to develop on my Mac. Why doesn't this work on Windows???</p>\n"},{"tags":["java","swing","jtable"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":2,"creation_date":1637010371,"post_id":69979562,"comment_id":123706180,"body_markdown":"You have already added the table to the scroll pane and the scroll pane to your reference panel when the frame is created. `Don&#39;t create a new JTable`. If you want to change the data just create a new TableModel and use the `setModel(...)` method of the JTable.","body":"You have already added the table to the scroll pane and the scroll pane to your reference panel when the frame is created. <code>Don&#39;t create a new JTable</code>. If you want to change the data just create a new TableModel and use the <code>setModel(...)</code> method of the JTable."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1637019874,"post_id":69979562,"comment_id":123708656,"body_markdown":"*&quot;I have even tried some sample data&quot;* If @camickr&#39;s tips don&#39;t solve this, or for future questions involving code, post a [mre] along with that sample data. It doesn&#39;t need to be much data, if you can figure how to add two rows, adding 100 (thousand) is just as easy. But seriously, look to update the model. If it comes to making an MRE for this question, be sure to trim the two tables to one, and add it to something when the frame is created. A good place to add a table is direct to a `JScrollPane`.","body":"<i>&quot;I have even tried some sample data&quot;</i> If @camickr&#39;s tips don&#39;t solve this, or for future questions involving code, post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> along with that sample data. It doesn&#39;t need to be much data, if you can figure how to add two rows, adding 100 (thousand) is just as easy. But seriously, look to update the model. If it comes to making an MRE for this question, be sure to trim the two tables to one, and add it to something when the frame is created. A good place to add a table is direct to a <code>JScrollPane</code>."}],"answers":[{"tags":[],"owner":{"account_id":23298828,"reputation":41,"user_id":17379819,"display_name":"codejunkie"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1637099885,"creation_date":1637076636,"answer_id":69991922,"question_id":69979562,"body_markdown":"This is based on what cmickr and Andrew Thompson posted.  I modified the following functions to work.\r\n\r\n    \r\n\tpublic void setReferencePanel(ArrayList&lt;Item&gt; items, String refFile) {\r\n\t\tDefaultTableModel model = new DefaultTableModel(vectorize(items), makeHeaderVector());\r\n\t\trefTable.setModel(model);\r\n\t\trefListingPanel.setBorder(BorderFactory.createTitledBorder(&quot;Reference File - &quot; + refFile));\r\n\t}\r\n\r\n    private Vector vectorize(ArrayList&lt;Item&gt; items) {\r\n\t\tVector results = new Vector();\r\n\t\tfor (int i = 0; i &lt; items.size(); i++) {\r\n\t\t\tresults.addElement(items.get(i).vectorize());\r\n\t\t}\r\n\t\treturn results;\r\n\t}\r\n\r\n    private Vector makeHeaderVector() {\r\n \t\tString[] cols = { ... }; // hid application specific string array\r\n\t\tVector&lt;String&gt; results = new Vector&lt;String&gt;(Arrays.asList(cols));\r\n\t\treturn results;\r\n\t}\r\n\r\nThis is my basic understanding of vectors, since I do not use them much.  Also, this may not be the fastest way of approaching the problem, but my first goal is to get it working, then improve it.  The important part was to use a TableModel, in my case DefaultTableModel, and then `setModel()` of the the JTable to the new model, like was referenced.","title":"Unable to show JTable in JPanel from dynamically retrieved data","body":"<p>This is based on what cmickr and Andrew Thompson posted.  I modified the following functions to work.</p>\n<pre><code>public void setReferencePanel(ArrayList&lt;Item&gt; items, String refFile) {\n    DefaultTableModel model = new DefaultTableModel(vectorize(items), makeHeaderVector());\n    refTable.setModel(model);\n    refListingPanel.setBorder(BorderFactory.createTitledBorder(&quot;Reference File - &quot; + refFile));\n}\n\nprivate Vector vectorize(ArrayList&lt;Item&gt; items) {\n    Vector results = new Vector();\n    for (int i = 0; i &lt; items.size(); i++) {\n        results.addElement(items.get(i).vectorize());\n    }\n    return results;\n}\n\nprivate Vector makeHeaderVector() {\n    String[] cols = { ... }; // hid application specific string array\n    Vector&lt;String&gt; results = new Vector&lt;String&gt;(Arrays.asList(cols));\n    return results;\n}\n</code></pre>\n<p>This is my basic understanding of vectors, since I do not use them much.  Also, this may not be the fastest way of approaching the problem, but my first goal is to get it working, then improve it.  The important part was to use a TableModel, in my case DefaultTableModel, and then <code>setModel()</code> of the the JTable to the new model, like was referenced.</p>\n"}],"owner":{"account_id":23298828,"reputation":41,"user_id":17379819,"display_name":"codejunkie"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69991922,"answer_count":1,"score":1,"last_activity_date":1637099885,"creation_date":1637002994,"question_id":69979562,"body_markdown":"I haven&#39;t been able to show a JTable inside a JPanel from dynamically generated data.  I have even tried adding a layout manager so that I don&#39;t end up with a null layout manager and no table.  Here is the code I&#39;m using.\r\n\r\n    public void setReferencePanel(ArrayList&lt;Item&gt; items, String refFile) {\r\n\t\tString[] columns = {&quot;first&quot;, &quot;last&quot;};\r\n\t\tString[][] data = {{&quot;Adam&quot;, &quot;Smith&quot;}, {&quot;Jon&quot;, &quot;Bon Jovi&quot;},{&quot;John&quot;, &quot;Doe&quot;}};\r\n\t\tJTable sample = new JTable(data, columns);\r\n\t\trefListingPanel.add(sample);\r\n        refListingPanel.setBorder(BorderFactory.createTitledBorder(&quot;Reference File - &quot; + refFile));\r\n    }\r\n\r\nand earlier in the same file.\r\n\r\n    private JMenuBar menuBar;\r\n\r\n\tprivate JPanel testListingPanel;\r\n\tprivate JScrollPane testScroller;\r\n\tprivate JPanel refListingPanel;\r\n\tprivate JScrollPane refScroller;\r\n\r\n\tprivate static Dimension listingDefault = new Dimension(350, 230);\r\n\tprivate IDiffPresenter presenter;\r\n\tprivate boolean allItems;\r\n\tprivate boolean unChangedItems;\r\n\tprivate boolean changedItems;\r\n\tprivate JTable refTable;\r\n\tprivate JTable testTable;\r\n\r\n    public MasterFrame (IDiffPresenter presenter) {\r\n\t\tsuper(&quot;Magic Diff - Under Construction&quot;);\r\n\t\tthis.presenter = presenter;\t\r\n\t\tmenuBar = new JMenuBar();\t\t\r\n\t\tsetupFileMenu(presenter);\r\n\t\tsetupExportMenu(presenter);\t\r\n\t\tsetupDisplayChangedMenu();\r\n\t\tsetupAboutMenu();\r\n\t\r\n\t\tsetupReferencePanel();\r\n\r\n\t\tsetupTestPanel();\r\n\t\tgetContentPane().setLayout(new GridLayout(1,2));\r\n\t\tsetJMenuBar(menuBar);\r\n\t\tthis.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\tthis.setSize((int)listingDefault.getWidth() + 10, (int)listingDefault.getHeight() + 60); \r\n\t\tDimension DimMax = Toolkit.getDefaultToolkit().getScreenSize();\r\n\t\tthis.setMaximumSize(DimMax);\r\n\r\n\t\tthis.setExtendedState(JFrame.MAXIMIZED_BOTH);\r\n        ...\r\n    }\r\n    private void setupReferencePanel() {\r\n\t\trefListingPanel = new JPanel();\r\n\t\trefListingPanel.setLayout(new BorderLayout());\r\n\t\trefListingPanel.setBorder(BorderFactory.createTitledBorder(&quot;Reference File&quot;));\r\n\t\trefScroller = new JScrollPane(refListingPanel);\r\n\t\tgetContentPane().add(refScroller);\r\n\t}\r\nWhat am I missing or failing to do?  I have even tried some sample data, what is currently in the code, and I get the same issue.","title":"Unable to show JTable in JPanel from dynamically retrieved data","body":"<p>I haven't been able to show a JTable inside a JPanel from dynamically generated data.  I have even tried adding a layout manager so that I don't end up with a null layout manager and no table.  Here is the code I'm using.</p>\n<pre><code>public void setReferencePanel(ArrayList&lt;Item&gt; items, String refFile) {\n    String[] columns = {&quot;first&quot;, &quot;last&quot;};\n    String[][] data = {{&quot;Adam&quot;, &quot;Smith&quot;}, {&quot;Jon&quot;, &quot;Bon Jovi&quot;},{&quot;John&quot;, &quot;Doe&quot;}};\n    JTable sample = new JTable(data, columns);\n    refListingPanel.add(sample);\n    refListingPanel.setBorder(BorderFactory.createTitledBorder(&quot;Reference File - &quot; + refFile));\n}\n</code></pre>\n<p>and earlier in the same file.</p>\n<pre><code>private JMenuBar menuBar;\n\nprivate JPanel testListingPanel;\nprivate JScrollPane testScroller;\nprivate JPanel refListingPanel;\nprivate JScrollPane refScroller;\n\nprivate static Dimension listingDefault = new Dimension(350, 230);\nprivate IDiffPresenter presenter;\nprivate boolean allItems;\nprivate boolean unChangedItems;\nprivate boolean changedItems;\nprivate JTable refTable;\nprivate JTable testTable;\n\npublic MasterFrame (IDiffPresenter presenter) {\n    super(&quot;Magic Diff - Under Construction&quot;);\n    this.presenter = presenter; \n    menuBar = new JMenuBar();       \n    setupFileMenu(presenter);\n    setupExportMenu(presenter); \n    setupDisplayChangedMenu();\n    setupAboutMenu();\n\n    setupReferencePanel();\n\n    setupTestPanel();\n    getContentPane().setLayout(new GridLayout(1,2));\n    setJMenuBar(menuBar);\n    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    this.setSize((int)listingDefault.getWidth() + 10, (int)listingDefault.getHeight() + 60); \n    Dimension DimMax = Toolkit.getDefaultToolkit().getScreenSize();\n    this.setMaximumSize(DimMax);\n\n    this.setExtendedState(JFrame.MAXIMIZED_BOTH);\n    ...\n}\nprivate void setupReferencePanel() {\n    refListingPanel = new JPanel();\n    refListingPanel.setLayout(new BorderLayout());\n    refListingPanel.setBorder(BorderFactory.createTitledBorder(&quot;Reference File&quot;));\n    refScroller = new JScrollPane(refListingPanel);\n    getContentPane().add(refScroller);\n}\n</code></pre>\n<p>What am I missing or failing to do?  I have even tried some sample data, what is currently in the code, and I get the same issue.</p>\n"},{"tags":["java","spring","mongodb","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637099319,"creation_date":1637099319,"answer_id":69996428,"question_id":69985504,"body_markdown":"I think you actually dont have to add `--add-exports`.  If you look at the Mongodb Java driver code, you see it is already adding `dns:` \r\n\r\nThis was a PR https://github.com/mongodb/mongo-java-driver/pull/554\r\n\r\n\r\nIt might be JVM related, but hard to prove on this. Can you run it on a docker container using OpenJDK 11 and see? Or different versions?\r\n\r\n        /*\r\n          It&#39;s unfortunate that we take a runtime dependency on com.sun.jndi.dns.DnsContextFactory.\r\n          This is not guaranteed to work on all JVMs but in practice is expected to work on most.\r\n        */\r\n        private static InitialDirContext createDnsDirContext() {\r\n            Hashtable&lt;String, String&gt; envProps = new Hashtable&lt;String, String&gt;();\r\n            envProps.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.dns.DnsContextFactory&quot;);\r\n            envProps.put(Context.PROVIDER_URL, &quot;dns:&quot;);\r\n            try {\r\n                return new InitialDirContext(envProps);\r\n            } catch (NamingException e) {\r\n                throw new MongoClientException(&quot;Unable to support mongodb+srv// style connections as the &#39;com.sun.jndi.dns.DnsContextFactory&#39; &quot;\r\n                        + &quot;class is not available in this JRE. A JNDI context is required for resolving SRV records.&quot;, e);\r\n            }\r\n        }\r\n    }\r\n\r\nhttps://github.com/mongodb/mongo-java-driver/blob/master/driver-core/src/main/com/mongodb/internal/dns/DefaultDnsResolver.java","title":"Unable to instantiate Mongo related beans in Spring context when DNS records (SRV and TXT) are being used","body":"<p>I think you actually dont have to add <code>--add-exports</code>.  If you look at the Mongodb Java driver code, you see it is already adding <code>dns:</code></p>\n<p>This was a PR <a href=\"https://github.com/mongodb/mongo-java-driver/pull/554\" rel=\"nofollow noreferrer\">https://github.com/mongodb/mongo-java-driver/pull/554</a></p>\n<p>It might be JVM related, but hard to prove on this. Can you run it on a docker container using OpenJDK 11 and see? Or different versions?</p>\n<pre><code>    /*\n      It's unfortunate that we take a runtime dependency on com.sun.jndi.dns.DnsContextFactory.\n      This is not guaranteed to work on all JVMs but in practice is expected to work on most.\n    */\n    private static InitialDirContext createDnsDirContext() {\n        Hashtable&lt;String, String&gt; envProps = new Hashtable&lt;String, String&gt;();\n        envProps.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.dns.DnsContextFactory&quot;);\n        envProps.put(Context.PROVIDER_URL, &quot;dns:&quot;);\n        try {\n            return new InitialDirContext(envProps);\n        } catch (NamingException e) {\n            throw new MongoClientException(&quot;Unable to support mongodb+srv// style connections as the 'com.sun.jndi.dns.DnsContextFactory' &quot;\n                    + &quot;class is not available in this JRE. A JNDI context is required for resolving SRV records.&quot;, e);\n        }\n    }\n}\n</code></pre>\n<p><a href=\"https://github.com/mongodb/mongo-java-driver/blob/master/driver-core/src/main/com/mongodb/internal/dns/DefaultDnsResolver.java\" rel=\"nofollow noreferrer\">https://github.com/mongodb/mongo-java-driver/blob/master/driver-core/src/main/com/mongodb/internal/dns/DefaultDnsResolver.java</a></p>\n"}],"owner":{"account_id":4421843,"reputation":564,"user_id":3601527,"accept_rate":84,"display_name":"SocketM"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":535,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1637099319,"creation_date":1637049164,"question_id":69985504,"body_markdown":"I was using without any Mongo beans instantiation issue a Java maven project with Java 8 and Spring Data MongoDb Reactive. Currently, I’m trying to upgrade the same project from Java 8 project to Java 11 (jvm 11.0.8+10-LTS). My updated spring boot version is 2.5.6 with Jetty server (9.4.44.v20210927), and the corresponding Mongo reactive version is based on 2.5.6. When Spring is trying to create the mongo related beans in order to add them in the context the following error appears:\r\n\r\n    Unable to support mongodb+srv// style connections as the ‘com.sun.jndi.dns.DnsContextFactory’ &quot;\r\n    + &quot;class is not available in this JRE. A JNDI context is required for resolving SRV records\r\n\r\n\r\nAmong others I&#39;ve tried the following:\r\n\r\nadd a jndi.properties file that sets a property \r\n\r\n`java.naming.provider.url=dns:.`\r\n\r\nadd -exports argument to the maven compiler plugin\r\n\r\n   \r\n\r\n     &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.8.0&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                            &lt;release&gt;11&lt;/release&gt;\r\n                        &lt;compilerArgs&gt;\r\n                            &lt;arg&gt;--add-exports&lt;/arg&gt;\r\n                            &lt;arg&gt;jdk.naming.dns/com.sun.jndi.dns=java.naming&lt;/arg&gt;\r\n                        &lt;/compilerArgs&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    \r\n\r\nupgraded to the latest jetty server version compatible with java 11\r\n\r\n  \r\n\r\n     &lt;jetty.version&gt;9.4.44.v20210927&lt;/jetty.version&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jetty-webapp&lt;/artifactId&gt;\r\n     &lt;version&gt;${jetty.version}&lt;/version&gt;\r\n     &lt;scope&gt;provided&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n\r\n\r\nCan you please advise me with a solution?\r\n","title":"Unable to instantiate Mongo related beans in Spring context when DNS records (SRV and TXT) are being used","body":"<p>I was using without any Mongo beans instantiation issue a Java maven project with Java 8 and Spring Data MongoDb Reactive. Currently, I’m trying to upgrade the same project from Java 8 project to Java 11 (jvm 11.0.8+10-LTS). My updated spring boot version is 2.5.6 with Jetty server (9.4.44.v20210927), and the corresponding Mongo reactive version is based on 2.5.6. When Spring is trying to create the mongo related beans in order to add them in the context the following error appears:</p>\n<pre><code>Unable to support mongodb+srv// style connections as the ‘com.sun.jndi.dns.DnsContextFactory’ &quot;\n+ &quot;class is not available in this JRE. A JNDI context is required for resolving SRV records\n</code></pre>\n<p>Among others I've tried the following:</p>\n<p>add a jndi.properties file that sets a property</p>\n<p><code>java.naming.provider.url=dns:.</code></p>\n<p>add -exports argument to the maven compiler plugin</p>\n<pre><code> &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.0&lt;/version&gt;\n                &lt;configuration&gt;\n                        &lt;release&gt;11&lt;/release&gt;\n                    &lt;compilerArgs&gt;\n                        &lt;arg&gt;--add-exports&lt;/arg&gt;\n                        &lt;arg&gt;jdk.naming.dns/com.sun.jndi.dns=java.naming&lt;/arg&gt;\n                    &lt;/compilerArgs&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n<p>upgraded to the latest jetty server version compatible with java 11</p>\n<pre><code> &lt;jetty.version&gt;9.4.44.v20210927&lt;/jetty.version&gt;\n\n&lt;dependency&gt;\n  &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;\n  &lt;artifactId&gt;jetty-webapp&lt;/artifactId&gt;\n &lt;version&gt;${jetty.version}&lt;/version&gt;\n &lt;scope&gt;provided&lt;/scope&gt;\n  &lt;/dependency&gt;\n</code></pre>\n<p>Can you please advise me with a solution?</p>\n"},{"tags":["java","spring","eclipse","gradle"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1637078123,"post_id":69991904,"comment_id":123726833,"body_markdown":"There are different Eclipse IDE package with different JavaScript editors. Unfortunately, your question does not tell [how to reproduce this issue](https://stackoverflow.com/help/minimal-reproducible-example). Did you use [Eclipse Wild Web Developer](https://github.com/eclipse/wildwebdeveloper) which exists for more than three years? Which documentation did you follow?","body":"There are different Eclipse IDE package with different JavaScript editors. Unfortunately, your question does not tell <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">how to reproduce this issue</a>. Did you use <a href=\"https://github.com/eclipse/wildwebdeveloper\" rel=\"nofollow noreferrer\">Eclipse Wild Web Developer</a> which exists for more than three years? Which documentation did you follow?"},{"owner":{"account_id":4368701,"reputation":397,"user_id":3563655,"accept_rate":62,"display_name":"Rick"},"score":0,"creation_date":1637080013,"post_id":69991904,"comment_id":123727724,"body_markdown":"I downloaded the Windows Eclipse installer, ran it, selected the option that looked most appropriate – something about java and web; second on the list – and used that. From there, the easy way to recreate the issue is to download a basic empty Java 17 gradle project from Spring Initializr; it gives some of the same issues with not recognising the imports, not recognising the root application class…","body":"I downloaded the Windows Eclipse installer, ran it, selected the option that looked most appropriate – something about java and web; second on the list – and used that. From there, the easy way to recreate the issue is to download a basic empty Java 17 gradle project from Spring Initializr; it gives some of the same issues with not recognising the imports, not recognising the root application class…"},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1637080935,"post_id":69991904,"comment_id":123728085,"body_markdown":"All of the packages use Wild Web Developer for JavaScript/ECMAScript files.","body":"All of the packages use Wild Web Developer for JavaScript/ECMAScript files."},{"owner":{"account_id":4368701,"reputation":397,"user_id":3563655,"accept_rate":62,"display_name":"Rick"},"score":0,"creation_date":1637081804,"post_id":69991904,"comment_id":123728507,"body_markdown":"Wild Web Developer is installed. I downlaoded the Maven equivalent empty Spring Initializr project and that doesn&#39;t give any errors. There was some mention in some error of it having built with Gradle 6.8.3, even though it was configured to build with 7.2; maybe the issue is there.","body":"Wild Web Developer is installed. I downlaoded the Maven equivalent empty Spring Initializr project and that doesn&#39;t give any errors. There was some mention in some error of it having built with Gradle 6.8.3, even though it was configured to build with 7.2; maybe the issue is there."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1637089749,"post_id":69991904,"comment_id":123731519,"body_markdown":"Instead of making assumptions, just tell how to reproduce your issue. Please edit your question and provide an example file with which your issue can be reproduced. Are you talking about a *.js file? With which editor did you open it?","body":"Instead of making assumptions, just tell how to reproduce your issue. Please edit your question and provide an example file with which your issue can be reproduced. Are you talking about a *.js file? With which editor did you open it?"},{"owner":{"account_id":4368701,"reputation":397,"user_id":3563655,"accept_rate":62,"display_name":"Rick"},"score":0,"creation_date":1637091860,"post_id":69991904,"comment_id":123732224,"body_markdown":"My partial reproduction is a fresh Windows install of Eclipse – using the installer, second IDE variant option – and get a Spring Initializr project (Java 17) with no dependencis configured. Open that project and the imports fail. I don&#39;t know how you want me to give you more; yes, there&#39;s the more complex version whereby opening an exising project throws up other errors, including in *.js files, but as there&#39;s a basic problem with the cleanest project I can put in it, that&#39;s the best place to start.","body":"My partial reproduction is a fresh Windows install of Eclipse – using the installer, second IDE variant option – and get a Spring Initializr project (Java 17) with no dependencis configured. Open that project and the imports fail. I don&#39;t know how you want me to give you more; yes, there&#39;s the more complex version whereby opening an exising project throws up other errors, including in *.js files, but as there&#39;s a basic problem with the cleanest project I can put in it, that&#39;s the best place to start."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1637094362,"post_id":69991904,"comment_id":123733145,"body_markdown":"Please show a [minimal(!) reproducible(!) example](https://stackoverflow.com/help/minimal-reproducible-example) focusing of one issue only. You have to show some code (as text), tell with which editor to open it (show an screenshot when you cannot name the editor) and also tell what you expect instead.","body":"Please show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal(!) reproducible(!) example</a> focusing of one issue only. You have to show some code (as text), tell with which editor to open it (show an screenshot when you cannot name the editor) and also tell what you expect instead."},{"owner":{"account_id":4368701,"reputation":397,"user_id":3563655,"accept_rate":62,"display_name":"Rick"},"score":0,"creation_date":1637099332,"post_id":69991904,"comment_id":123734684,"body_markdown":"Edited to focus on its behaviour with a simple Springboot project (and hoping that the same cause as all the other issues which I can&#39;t offer in any reproducible form as you won&#39;t have the same project to work with.)","body":"Edited to focus on its behaviour with a simple Springboot project (and hoping that the same cause as all the other issues which I can&#39;t offer in any reproducible form as you won&#39;t have the same project to work with.)"},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1637114691,"post_id":69991904,"comment_id":123737756,"body_markdown":"Expand the node for &quot;Project and External Dependencies&quot;. If the project can&#39;t find `java.lang.String`, a JRE is somehow missing from the Build Path.","body":"Expand the node for &quot;Project and External Dependencies&quot;. If the project can&#39;t find <code>java.lang.String</code>, a JRE is somehow missing from the Build Path."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1637134551,"post_id":69991904,"comment_id":123741503,"body_markdown":"In the first project the _JRE System Library_ node is missing in the _Project Explorer_. Without knowing what is in _Project &gt; Properties: Java Build Path_, in the `build.gradle` file and the error message (shown in the _Problems_ view), it is hard to guess what&#39;s wrong here. It is also a bit wired that you do not use [https://spring.io/tools](https://spring.io/tools) for a Spring based project. The original title now seems to be unrelated. Take your time and learn the basics before making assumptions about the tools you use.","body":"In the first project the <i>JRE System Library</i> node is missing in the <i>Project Explorer</i>. Without knowing what is in <i>Project &gt; Properties: Java Build Path</i>, in the <code>build.gradle</code> file and the error message (shown in the <i>Problems</i> view), it is hard to guess what&#39;s wrong here. It is also a bit wired that you do not use <a href=\"https://spring.io/tools\" rel=\"nofollow noreferrer\">https://spring.io/tools</a> for a Spring based project. The original title now seems to be unrelated. Take your time and learn the basics before making assumptions about the tools you use."},{"owner":{"account_id":4368701,"reputation":397,"user_id":3563655,"accept_rate":62,"display_name":"Rick"},"score":0,"creation_date":1637137488,"post_id":69991904,"comment_id":123742406,"body_markdown":"Thanks @howlger. I had no reason to know that Spring Tools even existed; why would I? (Now installed, makes no difference.) And &quot;learning&quot; about it means using it, or banging my head against it without meaningful guidance. (Anything I search for comes up with information on years-old versions that are no longer relevant.) Yes, _JRE System Library_ is missing. In the Libraries tab in _Project Explorer_, it is under Classpath with an error icon, and is marked as &quot;(unbound)&quot;; in the Maven version, it&#39;s under Modulepath. I didn&#39;t put any of those there; as I said, clean Initializr projects.","body":"Thanks @howlger. I had no reason to know that Spring Tools even existed; why would I? (Now installed, makes no difference.) And &quot;learning&quot; about it means using it, or banging my head against it without meaningful guidance. (Anything I search for comes up with information on years-old versions that are no longer relevant.) Yes, <i>JRE System Library</i> is missing. In the Libraries tab in <i>Project Explorer</i>, it is under Classpath with an error icon, and is marked as &quot;(unbound)&quot;; in the Maven version, it&#39;s under Modulepath. I didn&#39;t put any of those there; as I said, clean Initializr projects."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1650267112,"post_id":69991904,"comment_id":127067815,"body_markdown":"_&quot;(unbound)&quot;_ means here you have to configure a Java of the appropriate version in the preferences (_Window &gt; Preferences_) in _Java &gt; Installed JREs_.","body":"<i>&quot;(unbound)&quot;</i> means here you have to configure a Java of the appropriate version in the preferences (<i>Window &gt; Preferences</i>) in <i>Java &gt; Installed JREs</i>."}],"owner":{"account_id":4368701,"reputation":397,"user_id":3563655,"accept_rate":62,"display_name":"Rick"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":168,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637099242,"creation_date":1637076571,"question_id":69991904,"body_markdown":"I am trying out Eclipse (because of frustrations with apparent version incompatibilities when upgrading another IDE), but it is proving equally problematic. This is a perfectly clean Eclipse installation (windows installer, second variant option), so it&#39;s an ootb issue.\r\n\r\n(Simplified, theoretically-reproducable version): I downloaded two copies of a basic Java 17 project from Spring Initializr with no dependencies; one as Gradle, one as Maven (tester &amp; tester2 respectively). The Gradle build shows errors where there are none, per the screenshot.\r\n\r\n[![Eclipse with different builds of the same project, one errors][1]][1]\r\n\r\nNote that in the one class in the besic, clean SpringBoot application, it sees the package name, the class name, and even the definition of `String` as being errors. But the same code in the Maven version is fine.\r\n\r\nThere are further issues that appear to derive from this, but keeping it simple…\r\n\r\nAt some point during my testing, some message/error showed up that suggested it was building with Gradle 6.8.3, which I believe would be a problem as that version doesn&#39;t support Java 16+. Eclipse is configured to use 7.3.\r\n\r\nHow do I tell Eclipse to recognise a valid project, so it can be worked with?\r\n\r\n  [1]: https://i.stack.imgur.com/RcqcG.png","title":"How to get Eclipse to work properly with Gradle?","body":"<p>I am trying out Eclipse (because of frustrations with apparent version incompatibilities when upgrading another IDE), but it is proving equally problematic. This is a perfectly clean Eclipse installation (windows installer, second variant option), so it's an ootb issue.</p>\n<p>(Simplified, theoretically-reproducable version): I downloaded two copies of a basic Java 17 project from Spring Initializr with no dependencies; one as Gradle, one as Maven (tester &amp; tester2 respectively). The Gradle build shows errors where there are none, per the screenshot.</p>\n<p><a href=\"https://i.stack.imgur.com/RcqcG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RcqcG.png\" alt=\"Eclipse with different builds of the same project, one errors\" /></a></p>\n<p>Note that in the one class in the besic, clean SpringBoot application, it sees the package name, the class name, and even the definition of <code>String</code> as being errors. But the same code in the Maven version is fine.</p>\n<p>There are further issues that appear to derive from this, but keeping it simple…</p>\n<p>At some point during my testing, some message/error showed up that suggested it was building with Gradle 6.8.3, which I believe would be a problem as that version doesn't support Java 16+. Eclipse is configured to use 7.3.</p>\n<p>How do I tell Eclipse to recognise a valid project, so it can be worked with?</p>\n"},{"tags":["java","spring-webflux","reactive","spring-webclient"],"answers":[{"tags":[],"owner":{"account_id":8023174,"reputation":9194,"user_id":6051176,"display_name":"Martin Tarj&#225;nyi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637099129,"creation_date":1637099129,"answer_id":69996398,"question_id":69992427,"body_markdown":"If your output has an empty state you can do something like:\r\n```java\r\n.onErrorResume(CustomException.class, e -&gt; Model.empty())\r\n```\r\n\r\nIf you don&#39;t have empty state you should wrap the output into `Optional`:\r\n```java\r\n.map(Optional::of)\r\n.onErrorResume(CustomException.class, e -&gt; Optional.empty())\r\n```\r\n\r\nIn any case these operators should be chained to the `getCall` method. For example:\r\n```java\r\npublic Mono&lt;Model&gt; getCall(String path) {\r\n    return webClient.get()\r\n            .uri(path)\r\n            .retrieve()\r\n            .onStatus(HttpStatus::isError, errorHandler())     \r\n            .retrieve()\r\n            .bodyToMono(Model.class)\r\n            .onErrorResume(CustomException.class, e -&gt; Model.empty());\r\n}\r\n```","title":"Exception from a Spring WebFlux Mono interrupts Mono.zip","body":"<p>If your output has an empty state you can do something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>.onErrorResume(CustomException.class, e -&gt; Model.empty())\n</code></pre>\n<p>If you don't have empty state you should wrap the output into <code>Optional</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>.map(Optional::of)\n.onErrorResume(CustomException.class, e -&gt; Optional.empty())\n</code></pre>\n<p>In any case these operators should be chained to the <code>getCall</code> method. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Mono&lt;Model&gt; getCall(String path) {\n    return webClient.get()\n            .uri(path)\n            .retrieve()\n            .onStatus(HttpStatus::isError, errorHandler())     \n            .retrieve()\n            .bodyToMono(Model.class)\n            .onErrorResume(CustomException.class, e -&gt; Model.empty());\n}\n</code></pre>\n"}],"owner":{"account_id":12869604,"reputation":158,"user_id":9308543,"display_name":"Hosten"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69996398,"answer_count":1,"score":0,"last_activity_date":1637099129,"creation_date":1637078628,"question_id":69992427,"body_markdown":"Let&#39;s say that I have two calls using spring webclient. Both are defined as follow, with an exception thrown in .**onStatus** :\r\n\r\n   \r\n\r\n    public Mono&lt;Model&gt; getCall(String path) {\r\n        webClient.get()\r\n                .uri(path)\r\n                .retrieve()\r\n                .onStatus(HttpStatus::isError, errorHandler())}\r\n\r\nAnd this is the Exception function **errorHandler()** :\r\n\r\n    private Function&lt;ClientResponse, Mono&lt;? extends Throwable&gt;&gt; errorHandler() {\r\n        return clientResponse -&gt; clientResponse.bodyToMono(ErrorResponse.class).\r\n                flatMap(errorBody -&gt; Mono.error(new CustomException(clientResponse.statusCode().value(), &quot;exception&quot;, errorBody)));\r\n\r\nOn my Mono.zip, I defined it as follow :\r\n\r\n    Mono.zip(getCall(call1),\r\n             getCall(call2))\r\n             .block;\r\n\r\nThe problem is, if one of the calls throws an exception, I can no longer get at least one of the result. Tried using :\r\n\r\n    .onErrorContinue(CustomException.class, (error, output) -&gt; log.error(&quot;CustomException !&quot; + error + output))\r\n\r\nSo how can I handle exceptions with Mono.zip, like we do with try catch, but without stopping the execution and getting the results of successful calls ?\r\nAnd Thank you","title":"Exception from a Spring WebFlux Mono interrupts Mono.zip","body":"<p>Let's say that I have two calls using spring webclient. Both are defined as follow, with an exception thrown in .<strong>onStatus</strong> :</p>\n<pre><code>public Mono&lt;Model&gt; getCall(String path) {\n    webClient.get()\n            .uri(path)\n            .retrieve()\n            .onStatus(HttpStatus::isError, errorHandler())}\n</code></pre>\n<p>And this is the Exception function <strong>errorHandler()</strong> :</p>\n<pre><code>private Function&lt;ClientResponse, Mono&lt;? extends Throwable&gt;&gt; errorHandler() {\n    return clientResponse -&gt; clientResponse.bodyToMono(ErrorResponse.class).\n            flatMap(errorBody -&gt; Mono.error(new CustomException(clientResponse.statusCode().value(), &quot;exception&quot;, errorBody)));\n</code></pre>\n<p>On my Mono.zip, I defined it as follow :</p>\n<pre><code>Mono.zip(getCall(call1),\n         getCall(call2))\n         .block;\n</code></pre>\n<p>The problem is, if one of the calls throws an exception, I can no longer get at least one of the result. Tried using :</p>\n<pre><code>.onErrorContinue(CustomException.class, (error, output) -&gt; log.error(&quot;CustomException !&quot; + error + output))\n</code></pre>\n<p>So how can I handle exceptions with Mono.zip, like we do with try catch, but without stopping the execution and getting the results of successful calls ?\nAnd Thank you</p>\n"},{"tags":["java","android-studio","android-recyclerview","crash","adapter"],"answers":[{"tags":[],"owner":{"account_id":19021361,"reputation":401,"user_id":13885374,"display_name":"Jake"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637098999,"creation_date":1637098999,"answer_id":69996375,"question_id":69995100,"body_markdown":"Solution is \r\n\r\n```\r\n    @Override\r\n    public void onBindViewHolder(@NonNull viewHolder holder, int position) {\r\n\r\n        DataModel model = list.get(position);\r\n        holder.sn.setText(model.getSn().toString());\r\n        holder.date.setText(model.getDate());\r\n        holder.name.setText(model.getName());\r\n        holder.weight.setText(model.getWeight().toString());\r\n        holder.rate.setText(model.getRate().toString());\r\n        holder.total.setText(model.getTotal().toString());\r\n\r\n    }\r\n```\r\n\r\nReason of crush is model.getSn(), model.getWeight(), model.getRate(), model.getTotal() return Integer and textView.setText() calls `public final void setText(@StringRes int resid)` which tries to find string by Integers which you provided from your model.","title":"App crash while implementing Recycle Adapter","body":"<p>Solution is</p>\n<pre><code>    @Override\n    public void onBindViewHolder(@NonNull viewHolder holder, int position) {\n\n        DataModel model = list.get(position);\n        holder.sn.setText(model.getSn().toString());\n        holder.date.setText(model.getDate());\n        holder.name.setText(model.getName());\n        holder.weight.setText(model.getWeight().toString());\n        holder.rate.setText(model.getRate().toString());\n        holder.total.setText(model.getTotal().toString());\n\n    }\n</code></pre>\n<p>Reason of crush is model.getSn(), model.getWeight(), model.getRate(), model.getTotal() return Integer and textView.setText() calls <code>public final void setText(@StringRes int resid)</code> which tries to find string by Integers which you provided from your model.</p>\n"}],"owner":{"account_id":19503231,"reputation":3,"user_id":14268786,"display_name":"Prabesh Regmi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":366,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69996375,"answer_count":1,"score":0,"last_activity_date":1637098999,"creation_date":1637091454,"question_id":69995100,"body_markdown":"\r\nI&#39;m creating an app to simply store the records of a tractions and able to see the record.\r\n\r\nIn IteamListActivity I want to see my records of tractions.\r\n\r\nI want to list all the data item in recycle view.\r\n\r\nWhen I click &#39;View&#39; button in activity_home xml, app crashes.\r\n\r\nGitHub Link of the project is [Here](https://github.com/prabesh-regmi/NoteBook)\r\n\r\n\r\nCode is \r\n\r\nAdapter \r\n\r\n    \r\n    public class DataAdapter extends RecyclerView.Adapter&lt;DataAdapter.viewHolder&gt;{\r\n\r\n    ArrayList&lt;DataModel&gt; list;\r\n    Context context;\r\n\r\n    public DataAdapter(ArrayList&lt;DataModel&gt; list, Context context) {\r\n        this.list = list;\r\n        this.context = context;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public viewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = \r\n     LayoutInflater.from(context).inflate(R.layout.data_list_design,parent,false);\r\n        return new viewHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull viewHolder holder, int position) {\r\n\r\n        DataModel model = list.get(position);\r\n        holder.sn.setText(model.getSn());\r\n        holder.date.setText(model.getDate());\r\n        holder.name.setText(model.getName());\r\n        holder.weight.setText(model.getWeight());\r\n        holder.rate.setText(model.getRate());\r\n        holder.total.setText(model.getTotal());\r\n\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return list.size();\r\n    }\r\n\r\n    public class viewHolder extends  RecyclerView.ViewHolder {\r\n\r\n    TextView sn,date,name,weight,rate,total;\r\n    public viewHolder(@NonNull View itemView) {\r\n\r\n        super(itemView);\r\n\r\n        sn = itemView.findViewById(R.id.snTitle);\r\n        date = itemView.findViewById(R.id.dateTitle);\r\n        name = itemView.findViewById(R.id.nameTitle);\r\n        weight = itemView.findViewById(R.id.weightTitle);\r\n        rate = itemView.findViewById(R.id.rateTitle);\r\n        total = itemView.findViewById(R.id.totalTitle);\r\n     }\r\n     }\r\n\r\n     }\r\n\r\n\r\nHomeActivity\r\n\r\n            binding.listview.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    Intent intent = new Intent(HomeActivity.this,ItemListActivity.class );\r\n                    startActivity(intent);\r\n                }\r\n            });\r\n  \r\n       \r\nItemListActivity\r\n\r\n \r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        binding = ActivityItemListBinding.inflate(getLayoutInflater());\r\n        setContentView(binding.getRoot());\r\n            ArrayList&lt;DataModel&gt; list = new ArrayList&lt;&gt;();\r\n            list.add(new DataModel(1,&quot;2021-07-29&quot;,&quot;Potato&quot;, 76,50,100));\r\n            list.add(new DataModel(2,&quot;2021-07-30&quot;,&quot;Potato&quot;, 106,60,100));\r\n            list.add(new DataModel(3,&quot;2021-08-02&quot;,&quot;Potato&quot;, 83,80,100));\r\n            list.add(new DataModel(4,&quot;2021-08-03&quot;,&quot;Potato&quot;, 67,90,100));\r\n            list.add(new DataModel(5,&quot;2021-08-05&quot;,&quot;Potato&quot;, 70,70,100));\r\n\r\n            DataAdapter adapter = new DataAdapter(list,this);\r\n            LinearLayoutManager linearLayoutManager = new \r\n            LinearLayoutManager(this,LinearLayoutManager.VERTICAL,false);\r\n            binding.datalistRv.setLayoutManager(linearLayoutManager);\r\n            binding.datalistRv.setNestedScrollingEnabled(false);\r\n            binding.datalistRv.setAdapter(adapter);\r\n\r\n        }\r\n","title":"App crash while implementing Recycle Adapter","body":"<p>I'm creating an app to simply store the records of a tractions and able to see the record.</p>\n<p>In IteamListActivity I want to see my records of tractions.</p>\n<p>I want to list all the data item in recycle view.</p>\n<p>When I click 'View' button in activity_home xml, app crashes.</p>\n<p>GitHub Link of the project is <a href=\"https://github.com/prabesh-regmi/NoteBook\" rel=\"nofollow noreferrer\">Here</a></p>\n<p>Code is</p>\n<p>Adapter</p>\n<pre><code>public class DataAdapter extends RecyclerView.Adapter&lt;DataAdapter.viewHolder&gt;{\n\nArrayList&lt;DataModel&gt; list;\nContext context;\n\npublic DataAdapter(ArrayList&lt;DataModel&gt; list, Context context) {\n    this.list = list;\n    this.context = context;\n}\n\n@NonNull\n@Override\npublic viewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n    View view = \n LayoutInflater.from(context).inflate(R.layout.data_list_design,parent,false);\n    return new viewHolder(view);\n}\n\n@Override\npublic void onBindViewHolder(@NonNull viewHolder holder, int position) {\n\n    DataModel model = list.get(position);\n    holder.sn.setText(model.getSn());\n    holder.date.setText(model.getDate());\n    holder.name.setText(model.getName());\n    holder.weight.setText(model.getWeight());\n    holder.rate.setText(model.getRate());\n    holder.total.setText(model.getTotal());\n\n}\n\n@Override\npublic int getItemCount() {\n    return list.size();\n}\n\npublic class viewHolder extends  RecyclerView.ViewHolder {\n\nTextView sn,date,name,weight,rate,total;\npublic viewHolder(@NonNull View itemView) {\n\n    super(itemView);\n\n    sn = itemView.findViewById(R.id.snTitle);\n    date = itemView.findViewById(R.id.dateTitle);\n    name = itemView.findViewById(R.id.nameTitle);\n    weight = itemView.findViewById(R.id.weightTitle);\n    rate = itemView.findViewById(R.id.rateTitle);\n    total = itemView.findViewById(R.id.totalTitle);\n }\n }\n\n }\n</code></pre>\n<p>HomeActivity</p>\n<pre><code>        binding.listview.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Intent intent = new Intent(HomeActivity.this,ItemListActivity.class );\n                startActivity(intent);\n            }\n        });\n\n   \n</code></pre>\n<p>ItemListActivity</p>\n<pre><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    binding = ActivityItemListBinding.inflate(getLayoutInflater());\n    setContentView(binding.getRoot());\n        ArrayList&lt;DataModel&gt; list = new ArrayList&lt;&gt;();\n        list.add(new DataModel(1,&quot;2021-07-29&quot;,&quot;Potato&quot;, 76,50,100));\n        list.add(new DataModel(2,&quot;2021-07-30&quot;,&quot;Potato&quot;, 106,60,100));\n        list.add(new DataModel(3,&quot;2021-08-02&quot;,&quot;Potato&quot;, 83,80,100));\n        list.add(new DataModel(4,&quot;2021-08-03&quot;,&quot;Potato&quot;, 67,90,100));\n        list.add(new DataModel(5,&quot;2021-08-05&quot;,&quot;Potato&quot;, 70,70,100));\n\n        DataAdapter adapter = new DataAdapter(list,this);\n        LinearLayoutManager linearLayoutManager = new \n        LinearLayoutManager(this,LinearLayoutManager.VERTICAL,false);\n        binding.datalistRv.setLayoutManager(linearLayoutManager);\n        binding.datalistRv.setNestedScrollingEnabled(false);\n        binding.datalistRv.setAdapter(adapter);\n\n    }\n</code></pre>\n"},{"tags":["java","hibernate","spring-data-jpa","spring-data","hibernate-mapping"],"answers":[{"tags":[],"owner":{"account_id":8357383,"reputation":11939,"user_id":6277104,"display_name":"SternK"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1637098563,"creation_date":1575760685,"answer_id":59231091,"question_id":58996129,"body_markdown":"Long story short, no, these settings do not exclude each other.\r\n\r\nImagine, we have the following model.\r\n``` lang-sql\r\ncreate table APP_USER\r\n(\r\n   USER_ID number,\r\n   USER_NAME varchar2(400),\r\n   \r\n   constraint APP_USER_PK primary key(USER_ID)\r\n);\r\n\r\ncreate table APP_BILLING_NUMBER\r\n(\r\n   BILL_ID number,\r\n   BILL_ACCOUNT varchar2(20),\r\n   BILL_BANK_NAME varchar2(300),\r\n   BILL_USER_ID number,\r\n   \r\n   constraint APP_BILLING_NUMBER_PK primary key(BILL_ID),\r\n);\r\n```\r\n\r\nAnd appropriate hibernate mapping:\r\n```\r\n@Entity\r\n@Table(name = &quot;APP_USER&quot;)\r\npublic class User\r\n{\r\n   @Id\r\n   @Column(name = &quot;USER_ID&quot;)\r\n   private Long id;\r\n   \r\n   @Column(name = &quot;USER_NAME&quot;)\r\n   private String name;\r\n}\r\n\r\n@Entity\r\n@Table(name = &quot;APP_BILLING_NUMBER&quot;)\r\npublic class BillingNumber\r\n{\r\n   @Id\r\n   @Column(name = &quot;BILL_ID&quot;)\r\n   private Long id;\r\n   \r\n   @Column(name = &quot;BILL_ACCOUNT&quot;)\r\n   private String account;\r\n   \r\n   @Column(name = &quot;BILL_BANK_NAME&quot;)\r\n   private String bankName;\r\n   \r\n   @ManyToOne\r\n   @JoinColumn(name=&quot;BILL_USER_ID&quot;)\r\n   private User user;\r\n}\r\n```\r\n\r\nIf we try to do something like this:\r\n```\r\n  User user = new User();\r\n  user.setId(1L);\r\n  user.setName(&quot;Alex&quot;);\r\n      \r\n  BillingNumber bill = new BillingNumber();\r\n  bill.setId(1L);\r\n  bill.setAccount(&quot;EA12345678&quot;);\r\n  bill.setBankName(&quot;BNP Paribas&quot;);\r\n  bill.setUser(user);\r\n      \r\n  session.persist(bill);\r\n```\r\n\r\nWe will find out that the bill was added to the `APP_BILLING_NUMBER` table,\r\n```\r\nSQL&gt; select * from APP_BILLING_NUMBER;\r\nBILL_ID BILL_ACCOUNT BILL_BANK_NAME BILL_USER_ID\r\n------- ------------ -------------- ------------\r\n1       EA12345678   BNP Paribas    1\r\n```\r\nbut the user was not. It happened because by default we have `@ManyToOne(cascade={})`. If we want to persist a `User` entity with a `BillingNumber` entity we should add `CascadeType.PERSIST`:\r\n``` lang-java\r\n  @ManyToOne(cascade = {CascadeType.PERSIST})\r\n  @JoinColumn(name=&quot;BILL_USER_ID&quot;)\r\n  private User user;\r\n```\r\nthen, if we are going to use `session.merge(bill)` operation we should add `CascadeType.MERGE` as well.\r\n\r\nNow imagine, we have\r\n\r\n``` lang-java\r\n  @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})\r\n  @JoinColumn(name=&quot;BILL_USER_ID&quot;, insertable = false, updatable = false)\r\n  private User user;\r\n```\r\n\r\nAfter executing the above persist operation we will have:\r\n```\r\nSQL&gt; select * from APP_USER;\r\nUSER_ID USER_NAME\r\n------- ---------\r\n1       Alex\r\n\r\nSQL&gt; select * from APP_BILLING_NUMBER;\r\nBILL_ID BILL_ACCOUNT BILL_BANK_NAME BILL_USER_ID\r\n------- ------------ -------------- ------------\r\n1       EA12345678   BNP Paribas    (null)\r\n```\r\n\r\nAs you can see, both entities were inserted but the `APP_BILLING_NUMBER.BILL_USER_ID` reference is `null` because of `@JoinColumn(..., insertable = false, ...)`. And you can not update it because of `updatable = false`.\r\n\r\nSo, this is valid but quite exotic case.","title":"Do CascadeType.ALL and &quot;insertable = false, updatable = false&quot; exclude each other?","body":"<p>Long story short, no, these settings do not exclude each other.</p>\n<p>Imagine, we have the following model.</p>\n<pre class=\"lang-sql prettyprint-override\"><code>create table APP_USER\n(\n   USER_ID number,\n   USER_NAME varchar2(400),\n   \n   constraint APP_USER_PK primary key(USER_ID)\n);\n\ncreate table APP_BILLING_NUMBER\n(\n   BILL_ID number,\n   BILL_ACCOUNT varchar2(20),\n   BILL_BANK_NAME varchar2(300),\n   BILL_USER_ID number,\n   \n   constraint APP_BILLING_NUMBER_PK primary key(BILL_ID),\n);\n</code></pre>\n<p>And appropriate hibernate mapping:</p>\n<pre><code>@Entity\n@Table(name = &quot;APP_USER&quot;)\npublic class User\n{\n   @Id\n   @Column(name = &quot;USER_ID&quot;)\n   private Long id;\n   \n   @Column(name = &quot;USER_NAME&quot;)\n   private String name;\n}\n\n@Entity\n@Table(name = &quot;APP_BILLING_NUMBER&quot;)\npublic class BillingNumber\n{\n   @Id\n   @Column(name = &quot;BILL_ID&quot;)\n   private Long id;\n   \n   @Column(name = &quot;BILL_ACCOUNT&quot;)\n   private String account;\n   \n   @Column(name = &quot;BILL_BANK_NAME&quot;)\n   private String bankName;\n   \n   @ManyToOne\n   @JoinColumn(name=&quot;BILL_USER_ID&quot;)\n   private User user;\n}\n</code></pre>\n<p>If we try to do something like this:</p>\n<pre><code>  User user = new User();\n  user.setId(1L);\n  user.setName(&quot;Alex&quot;);\n      \n  BillingNumber bill = new BillingNumber();\n  bill.setId(1L);\n  bill.setAccount(&quot;EA12345678&quot;);\n  bill.setBankName(&quot;BNP Paribas&quot;);\n  bill.setUser(user);\n      \n  session.persist(bill);\n</code></pre>\n<p>We will find out that the bill was added to the <code>APP_BILLING_NUMBER</code> table,</p>\n<pre><code>SQL&gt; select * from APP_BILLING_NUMBER;\nBILL_ID BILL_ACCOUNT BILL_BANK_NAME BILL_USER_ID\n------- ------------ -------------- ------------\n1       EA12345678   BNP Paribas    1\n</code></pre>\n<p>but the user was not. It happened because by default we have <code>@ManyToOne(cascade={})</code>. If we want to persist a <code>User</code> entity with a <code>BillingNumber</code> entity we should add <code>CascadeType.PERSIST</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @ManyToOne(cascade = {CascadeType.PERSIST})\n  @JoinColumn(name=&quot;BILL_USER_ID&quot;)\n  private User user;\n</code></pre>\n<p>then, if we are going to use <code>session.merge(bill)</code> operation we should add <code>CascadeType.MERGE</code> as well.</p>\n<p>Now imagine, we have</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})\n  @JoinColumn(name=&quot;BILL_USER_ID&quot;, insertable = false, updatable = false)\n  private User user;\n</code></pre>\n<p>After executing the above persist operation we will have:</p>\n<pre><code>SQL&gt; select * from APP_USER;\nUSER_ID USER_NAME\n------- ---------\n1       Alex\n\nSQL&gt; select * from APP_BILLING_NUMBER;\nBILL_ID BILL_ACCOUNT BILL_BANK_NAME BILL_USER_ID\n------- ------------ -------------- ------------\n1       EA12345678   BNP Paribas    (null)\n</code></pre>\n<p>As you can see, both entities were inserted but the <code>APP_BILLING_NUMBER.BILL_USER_ID</code> reference is <code>null</code> because of <code>@JoinColumn(..., insertable = false, ...)</code>. And you can not update it because of <code>updatable = false</code>.</p>\n<p>So, this is valid but quite exotic case.</p>\n"},{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1575793728,"creation_date":1575789734,"answer_id":59233311,"question_id":58996129,"body_markdown":"They mean different things and do not conflict with each other. \r\n\r\nSo given the following mapping :\r\n\r\n``` java\r\n@Entity\r\n@Table(name=&quot;player&quot;)\r\npublic class Player {\r\n\r\n\r\n   @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})\r\n   @JoinColumn(name = &quot;team_id&quot;, nullable = false, insertable = false, updatable = false)\r\n   Team team;\r\n\r\n}\r\n```\r\n\r\n - `cascade` means that when using `EntityManager` to `persist()` or `merge()` on a `player` , JPA will **automatically** call `persist()` / `merge()` on this player &#39;s team  too.\r\n\r\n - `insertable` and `updatable` is about if allow to assign a new team or update the team for a player . In term of the DB table , it is about if the value of `Player` table &#39;s `team_id` column is allowed to be inserted or updated. \r\n\r\nSo one is about inserting/updating records in the `Team` table while another is about inserting/updating the value of the `Player` table &#39;s `team_id` column , which are totally different things.\r\n\r\n\r\n\r\n\r\n","title":"Do CascadeType.ALL and &quot;insertable = false, updatable = false&quot; exclude each other?","body":"<p>They mean different things and do not conflict with each other. </p>\n\n<p>So given the following mapping :</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name=\"player\")\npublic class Player {\n\n\n   @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})\n   @JoinColumn(name = \"team_id\", nullable = false, insertable = false, updatable = false)\n   Team team;\n\n}\n</code></pre>\n\n<ul>\n<li><p><code>cascade</code> means that when using <code>EntityManager</code> to <code>persist()</code> or <code>merge()</code> on a <code>player</code> , JPA will <strong>automatically</strong> call <code>persist()</code> / <code>merge()</code> on this player 's team  too.</p></li>\n<li><p><code>insertable</code> and <code>updatable</code> is about if allow to assign a new team or update the team for a player . In term of the DB table , it is about if the value of <code>Player</code> table 's <code>team_id</code> column is allowed to be inserted or updated. </p></li>\n</ul>\n\n<p>So one is about inserting/updating records in the <code>Team</code> table while another is about inserting/updating the value of the <code>Player</code> table 's <code>team_id</code> column , which are totally different things.</p>\n"}],"owner":{"account_id":11297246,"reputation":241,"user_id":8284380,"accept_rate":100,"display_name":"Pixel-Killer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4135,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":59233311,"answer_count":2,"score":3,"last_activity_date":1637098563,"creation_date":1574432401,"question_id":58996129,"body_markdown":"If I have the configuration like this, can it work?\r\n\r\n``` lang-java\r\n@ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})\r\n@JoinColumn(name = &quot;FOREIGN_ID&quot;, nullable = false, insertable = false, updatable = false)\r\nForeignClass foreignClass;\r\n```\r\n\r\nI think not, because the behaviour of the cascade types is in conflict with the insertable and updatable parameters.\r\n\r\nWhat do you think?","title":"Do CascadeType.ALL and &quot;insertable = false, updatable = false&quot; exclude each other?","body":"<p>If I have the configuration like this, can it work?</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE})\n@JoinColumn(name = \"FOREIGN_ID\", nullable = false, insertable = false, updatable = false)\nForeignClass foreignClass;\n</code></pre>\n\n<p>I think not, because the behaviour of the cascade types is in conflict with the insertable and updatable parameters.</p>\n\n<p>What do you think?</p>\n"},{"tags":["java","memory-leaks","buffer","bytebuffer"],"comments":[{"owner":{"account_id":26075,"reputation":41643,"user_id":67566,"accept_rate":73,"display_name":"James Black"},"score":0,"creation_date":1260075685,"post_id":1854398,"comment_id":1749191,"body_markdown":"Are you certain that nothing else is holding a reference to this ByteBuffer?","body":"Are you certain that nothing else is holding a reference to this ByteBuffer?"},{"owner":{"account_id":56395,"reputation":1400,"user_id":168930,"accept_rate":56,"display_name":"mglmnc"},"score":0,"creation_date":1260077603,"post_id":1854398,"comment_id":1749265,"body_markdown":"Yes, im pretty sure, I instantiate method level classes that hold the buffers which go out of scope as soon as the method finishes invocation.","body":"Yes, im pretty sure, I instantiate method level classes that hold the buffers which go out of scope as soon as the method finishes invocation."},{"owner":{"account_id":75307,"reputation":69281,"user_id":216063,"accept_rate":64,"display_name":"Gregory Pakosz"},"score":2,"creation_date":1260309479,"post_id":1854398,"comment_id":1767544,"body_markdown":"related: http://stackoverflow.com/questions/1744533/jna-bytebuffer-not-getting-freed-and-causing-c-heap-to-run-out-of-memory/1775542#1775542","body":"related: <a href=\"http://stackoverflow.com/questions/1744533/jna-bytebuffer-not-getting-freed-and-causing-c-heap-to-run-out-of-memory/1775542#1775542\" title=\"jna bytebuffer not getting freed and causing c heap to run out of memory\">stackoverflow.com/questions/1744533/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":1,"up_vote_count":19,"is_accepted":true,"score":18,"last_activity_date":1260076147,"creation_date":1260075502,"answer_id":1854406,"question_id":1854398,"body_markdown":"I suspect that somewhere your application has a reference to the ByteBuffer instance(s) and that is preventing it from being garbage collected.\r\n\r\nThe buffer memory for a direct ByteBuffer is allocated outside of the normal heap (so that the GC doesn&#39;t move it!!).  However, the ByteBuffer API provides no method for explicitly disposing of / deallocating a buffer.  So I assume that the garbage collector will do it ... once it determines that the ByteBuffer object is no longer referenced.\r\n","title":"How to garbage collect a direct buffer in Java","body":"<p>I suspect that somewhere your application has a reference to the ByteBuffer instance(s) and that is preventing it from being garbage collected.</p>\n\n<p>The buffer memory for a direct ByteBuffer is allocated outside of the normal heap (so that the GC doesn't move it!!).  However, the ByteBuffer API provides no method for explicitly disposing of / deallocating a buffer.  So I assume that the garbage collector will do it ... once it determines that the ByteBuffer object is no longer referenced.</p>\n"},{"tags":[],"owner":{"account_id":680,"reputation":960675,"user_id":893,"accept_rate":84,"display_name":"Greg Hewgill"},"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1260075850,"creation_date":1260075850,"answer_id":1854414,"question_id":1854398,"body_markdown":"The [`ByteBuffer`](http://java.sun.com/j2se/1.5.0/docs/api/java/nio/ByteBuffer.html) documentation says:\r\n\r\n&gt; A direct byte buffer may be created by invoking the [`allocateDirect`][1] factory method of this class. The buffers returned by this method typically have somewhat higher allocation and deallocation costs than non-direct buffers. The contents of direct buffers may reside outside of the normal garbage-collected heap, and so their impact upon the memory footprint of an application might not be obvious. It is therefore recommended that direct buffers be allocated primarily for large, long-lived buffers that are subject to the underlying system&#39;s native I/O operations. In general it is best to allocate direct buffers only when they yield a measureable gain in program performance.\r\n\r\nIn particular, the statement &quot;may reside outside of the normal garbage-collected heap&quot; seems relevant to your example.\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/nio/ByteBuffer.html#allocateDirect(int)","title":"How to garbage collect a direct buffer in Java","body":"<p>The <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/nio/ByteBuffer.html\" rel=\"noreferrer\"><code>ByteBuffer</code></a> documentation says:</p>\n\n<blockquote>\n  <p>A direct byte buffer may be created by invoking the <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/nio/ByteBuffer.html#allocateDirect(int)\" rel=\"noreferrer\"><code>allocateDirect</code></a> factory method of this class. The buffers returned by this method typically have somewhat higher allocation and deallocation costs than non-direct buffers. The contents of direct buffers may reside outside of the normal garbage-collected heap, and so their impact upon the memory footprint of an application might not be obvious. It is therefore recommended that direct buffers be allocated primarily for large, long-lived buffers that are subject to the underlying system's native I/O operations. In general it is best to allocate direct buffers only when they yield a measureable gain in program performance.</p>\n</blockquote>\n\n<p>In particular, the statement \"may reside outside of the normal garbage-collected heap\" seems relevant to your example.</p>\n"},{"tags":[],"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1260088678,"creation_date":1260088678,"answer_id":1854785,"question_id":1854398,"body_markdown":"The allocated memory is realized through a native libary. This memory will be freed when the ByteBuffer#finalize method is called, iaw when the Buffer is gc&#39;d. Have a look at the allocate() and finalize() implementations of [DirectByteBufferImpl][1].\r\n\r\n`buff.clear()` is not necessary, `System.gc()` will only help if, like others already mentioned, there&#39;s no more reference left to the ByteBuffer object.\r\n\r\n\r\n  [1]: http://www.docjar.com/html/api/java/nio/DirectByteBufferImpl.java.html","title":"How to garbage collect a direct buffer in Java","body":"<p>The allocated memory is realized through a native libary. This memory will be freed when the ByteBuffer#finalize method is called, iaw when the Buffer is gc'd. Have a look at the allocate() and finalize() implementations of <a href=\"http://www.docjar.com/html/api/java/nio/DirectByteBufferImpl.java.html\" rel=\"noreferrer\">DirectByteBufferImpl</a>.</p>\n\n<p><code>buff.clear()</code> is not necessary, <code>System.gc()</code> will only help if, like others already mentioned, there's no more reference left to the ByteBuffer object.</p>\n"},{"tags":[],"owner":{"account_id":269824,"reputation":486,"user_id":559404,"accept_rate":75,"display_name":"Li Pi"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1321670816,"creation_date":1321670816,"answer_id":8191493,"question_id":1854398,"body_markdown":"The DBB will be deallocated once it hits the reference queue, and the finalizer is run. However, as we cannot depend on a finalizer to run, we can use reflection to manually call its &quot;cleaner&quot;.\r\n\r\n\r\nUsing reflection:\r\n\r\n    /**\r\n    * DirectByteBuffers are garbage collected by using a phantom reference and a\r\n    * reference queue. Every once a while, the JVM checks the reference queue and\r\n    * cleans the DirectByteBuffers. However, as this doesn&#39;t happen\r\n    * immediately after discarding all references to a DirectByteBuffer, it&#39;s\r\n    * easy to OutOfMemoryError yourself using DirectByteBuffers. This function\r\n    * explicitly calls the Cleaner method of a DirectByteBuffer.\r\n    * \r\n    * @param toBeDestroyed\r\n    *          The DirectByteBuffer that will be &quot;cleaned&quot;. Utilizes reflection.\r\n    *          \r\n    */\r\n    public static void destroyDirectByteBuffer(ByteBuffer toBeDestroyed)\r\n        throws IllegalArgumentException, IllegalAccessException,\r\n        InvocationTargetException, SecurityException, NoSuchMethodException {\r\n\r\n      Preconditions.checkArgument(toBeDestroyed.isDirect(),\r\n          &quot;toBeDestroyed isn&#39;t direct!&quot;);\r\n\r\n      Method cleanerMethod = toBeDestroyed.getClass().getMethod(&quot;cleaner&quot;);\r\n      cleanerMethod.setAccessible(true);\r\n      Object cleaner = cleanerMethod.invoke(toBeDestroyed);\r\n      Method cleanMethod = cleaner.getClass().getMethod(&quot;clean&quot;);\r\n      cleanMethod.setAccessible(true);\r\n      cleanMethod.invoke(cleaner);\r\n\r\n    }","title":"How to garbage collect a direct buffer in Java","body":"<p>The DBB will be deallocated once it hits the reference queue, and the finalizer is run. However, as we cannot depend on a finalizer to run, we can use reflection to manually call its \"cleaner\".</p>\n\n<p>Using reflection:</p>\n\n<pre><code>/**\n* DirectByteBuffers are garbage collected by using a phantom reference and a\n* reference queue. Every once a while, the JVM checks the reference queue and\n* cleans the DirectByteBuffers. However, as this doesn't happen\n* immediately after discarding all references to a DirectByteBuffer, it's\n* easy to OutOfMemoryError yourself using DirectByteBuffers. This function\n* explicitly calls the Cleaner method of a DirectByteBuffer.\n* \n* @param toBeDestroyed\n*          The DirectByteBuffer that will be \"cleaned\". Utilizes reflection.\n*          \n*/\npublic static void destroyDirectByteBuffer(ByteBuffer toBeDestroyed)\n    throws IllegalArgumentException, IllegalAccessException,\n    InvocationTargetException, SecurityException, NoSuchMethodException {\n\n  Preconditions.checkArgument(toBeDestroyed.isDirect(),\n      \"toBeDestroyed isn't direct!\");\n\n  Method cleanerMethod = toBeDestroyed.getClass().getMethod(\"cleaner\");\n  cleanerMethod.setAccessible(true);\n  Object cleaner = cleanerMethod.invoke(toBeDestroyed);\n  Method cleanMethod = cleaner.getClass().getMethod(\"clean\");\n  cleanMethod.setAccessible(true);\n  cleanMethod.invoke(cleaner);\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1842243,"reputation":1676,"user_id":1671431,"accept_rate":89,"display_name":"Antoine CHAMBILLE"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1381236037,"creation_date":1381236037,"answer_id":19247969,"question_id":1854398,"body_markdown":"Here is a refined implementation that will work for any direct buffer:\r\n\r\n\tpublic static void destroyBuffer(Buffer buffer) {\r\n\t\tif(buffer.isDirect()) {\r\n\t\t\ttry {\r\n\t\t\t\tif(!buffer.getClass().getName().equals(&quot;java.nio.DirectByteBuffer&quot;)) {\r\n\t\t\t\t\tField attField = buffer.getClass().getDeclaredField(&quot;att&quot;);\r\n\t\t\t\t\tattField.setAccessible(true);\r\n\t\t\t\t\tbuffer = (Buffer) attField.get(buffer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tMethod cleanerMethod = buffer.getClass().getMethod(&quot;cleaner&quot;);\r\n\t\t\t\tcleanerMethod.setAccessible(true);\r\n\t\t\t\tObject cleaner = cleanerMethod.invoke(buffer);\r\n\t\t\t\tMethod cleanMethod = cleaner.getClass().getMethod(&quot;clean&quot;);\r\n\t\t\t\tcleanMethod.setAccessible(true);\r\n\t\t\t\tcleanMethod.invoke(cleaner);\r\n\t\t\t} catch(Exception e) {\r\n\t\t\t\tthrow new QuartetRuntimeException(&quot;Could not destroy direct buffer &quot; + buffer, e);\r\n\t\t\t}\r\n\t\t}\r\n\t}","title":"How to garbage collect a direct buffer in Java","body":"<p>Here is a refined implementation that will work for any direct buffer:</p>\n\n<pre><code>public static void destroyBuffer(Buffer buffer) {\n    if(buffer.isDirect()) {\n        try {\n            if(!buffer.getClass().getName().equals(\"java.nio.DirectByteBuffer\")) {\n                Field attField = buffer.getClass().getDeclaredField(\"att\");\n                attField.setAccessible(true);\n                buffer = (Buffer) attField.get(buffer);\n            }\n\n            Method cleanerMethod = buffer.getClass().getMethod(\"cleaner\");\n            cleanerMethod.setAccessible(true);\n            Object cleaner = cleanerMethod.invoke(buffer);\n            Method cleanMethod = cleaner.getClass().getMethod(\"clean\");\n            cleanMethod.setAccessible(true);\n            cleanMethod.invoke(cleaner);\n        } catch(Exception e) {\n            throw new QuartetRuntimeException(\"Could not destroy direct buffer \" + buffer, e);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":677225,"reputation":6228,"user_id":676877,"display_name":"Brett Okken"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1388678831,"creation_date":1388678831,"answer_id":20886832,"question_id":1854398,"body_markdown":"As long as you are relying on sun (oracle) specific implementation, a better choice than trying to change the visibility of java.nio.DirectByteBuffer is to use the sun.nio.ch.DirectBuffer interface via reflections.\r\n\r\n\r\n    /**\r\n     * Sun specific mechanisms to clean up resources associated with direct byte buffers.\r\n     */\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    private static final Class&lt;? extends ByteBuffer&gt; SUN_DIRECT_BUFFER = (Class&lt;? extends ByteBuffer&gt;) lookupClassQuietly(&quot;sun.nio.ch.DirectBuffer&quot;);\r\n    \r\n    private static final Method SUN_BUFFER_CLEANER;\r\n    \r\n    private static final Method SUN_CLEANER_CLEAN;\r\n    \r\n    static\r\n    {\r\n        Method bufferCleaner = null;\r\n        Method cleanerClean = null;\r\n        try\r\n        {\r\n            // operate under the assumption that if the sun direct buffer class exists,\r\n            // all of the sun classes exist\r\n            if (SUN_DIRECT_BUFFER != null)\r\n            {\r\n                bufferCleaner = SUN_DIRECT_BUFFER.getMethod(&quot;cleaner&quot;, (Class[]) null);\r\n                Class&lt;?&gt; cleanClazz = lookupClassQuietly(&quot;sun.misc.Cleaner&quot;);\r\n                cleanerClean = cleanClazz.getMethod(&quot;clean&quot;, (Class[]) null);\r\n            }\r\n        }\r\n        catch (Throwable t)\r\n        {\r\n            t.printStackTrace();\r\n        }\r\n        SUN_BUFFER_CLEANER = bufferCleaner;\r\n        SUN_CLEANER_CLEAN = cleanerClean;\r\n    }\r\n    \r\n    public static void releaseDirectByteBuffer(ByteBuffer buffer)\r\n    {\r\n        if (SUN_DIRECT_BUFFER != null &amp;&amp; SUN_DIRECT_BUFFER.isAssignableFrom(buffer.getClass()))\r\n        {\r\n            try\r\n            {\r\n                Object cleaner = SUN_BUFFER_CLEANER.invoke(buffer, (Object[]) null);\r\n                SUN_CLEANER_CLEAN.invoke(cleaner, (Object[]) null);\r\n            }\r\n            catch (Throwable t)\r\n            {\r\n                logger.trace(&quot;Exception occurred attempting to clean up Sun specific DirectByteBuffer.&quot;, t);\r\n            }\r\n        }\r\n    }","title":"How to garbage collect a direct buffer in Java","body":"<p>As long as you are relying on sun (oracle) specific implementation, a better choice than trying to change the visibility of java.nio.DirectByteBuffer is to use the sun.nio.ch.DirectBuffer interface via reflections.</p>\n\n<pre><code>/**\n * Sun specific mechanisms to clean up resources associated with direct byte buffers.\n */\n@SuppressWarnings(\"unchecked\")\nprivate static final Class&lt;? extends ByteBuffer&gt; SUN_DIRECT_BUFFER = (Class&lt;? extends ByteBuffer&gt;) lookupClassQuietly(\"sun.nio.ch.DirectBuffer\");\n\nprivate static final Method SUN_BUFFER_CLEANER;\n\nprivate static final Method SUN_CLEANER_CLEAN;\n\nstatic\n{\n    Method bufferCleaner = null;\n    Method cleanerClean = null;\n    try\n    {\n        // operate under the assumption that if the sun direct buffer class exists,\n        // all of the sun classes exist\n        if (SUN_DIRECT_BUFFER != null)\n        {\n            bufferCleaner = SUN_DIRECT_BUFFER.getMethod(\"cleaner\", (Class[]) null);\n            Class&lt;?&gt; cleanClazz = lookupClassQuietly(\"sun.misc.Cleaner\");\n            cleanerClean = cleanClazz.getMethod(\"clean\", (Class[]) null);\n        }\n    }\n    catch (Throwable t)\n    {\n        t.printStackTrace();\n    }\n    SUN_BUFFER_CLEANER = bufferCleaner;\n    SUN_CLEANER_CLEAN = cleanerClean;\n}\n\npublic static void releaseDirectByteBuffer(ByteBuffer buffer)\n{\n    if (SUN_DIRECT_BUFFER != null &amp;&amp; SUN_DIRECT_BUFFER.isAssignableFrom(buffer.getClass()))\n    {\n        try\n        {\n            Object cleaner = SUN_BUFFER_CLEANER.invoke(buffer, (Object[]) null);\n            SUN_CLEANER_CLEAN.invoke(cleaner, (Object[]) null);\n        }\n        catch (Throwable t)\n        {\n            logger.trace(\"Exception occurred attempting to clean up Sun specific DirectByteBuffer.\", t);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3683805,"reputation":8445,"user_id":3950982,"display_name":"Luke Hutchison"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637098295,"creation_date":1637097680,"answer_id":69996167,"question_id":1854398,"body_markdown":"There are many caveats missing from the existing answers to this question, e.g. requirements when running under JDK 9+ for the module descriptor to contain `requires jdk.unsupported`, the inability to access `MappedByteBuffer.cleaner()` without workarounds under JDK 16+ due to the enforcement of strong encapsulation, the requirements if running with a `SecurityManager` under JDK 7-16, etc. I go over the full details here:\r\n\r\nhttps://stackoverflow.com/a/54046774/3950982","title":"How to garbage collect a direct buffer in Java","body":"<p>There are many caveats missing from the existing answers to this question, e.g. requirements when running under JDK 9+ for the module descriptor to contain <code>requires jdk.unsupported</code>, the inability to access <code>MappedByteBuffer.cleaner()</code> without workarounds under JDK 16+ due to the enforcement of strong encapsulation, the requirements if running with a <code>SecurityManager</code> under JDK 7-16, etc. I go over the full details here:</p>\n<p><a href=\"https://stackoverflow.com/a/54046774/3950982\">https://stackoverflow.com/a/54046774/3950982</a></p>\n"}],"owner":{"account_id":56395,"reputation":1400,"user_id":168930,"accept_rate":56,"display_name":"mglmnc"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48826,"favorite_count":0,"down_vote_count":0,"up_vote_count":32,"accepted_answer_id":1854406,"answer_count":7,"score":32,"last_activity_date":1637098295,"creation_date":1260075087,"question_id":1854398,"body_markdown":"I have a memory leak that I have isolated to incorrectly disposed direct byte buffers.\r\n\r\n&lt;pre&gt;ByteBuffer buff = ByteBuffer.allocateDirect(7777777);&lt;/pre&gt;\r\n\r\nThe GC collects the objects that harbor these buffers but does not dispose of the buffer itself. If I instantiate enough of the transient objects containing buffers, I get this encouraging message:\r\n\r\n&lt;pre&gt;java.lang.OutOfMemoryError: Direct buffer memory&lt;/pre&gt;\r\n\r\nI have been searching up this problem and apparently \r\n\r\n&lt;pre&gt;buff.clear();&lt;/pre&gt;\r\n\r\nand\r\n\r\n&lt;pre&gt;System.gc();&lt;/pre&gt;\r\n\r\ndo not work.\r\n","title":"How to garbage collect a direct buffer in Java","body":"<p>I have a memory leak that I have isolated to incorrectly disposed direct byte buffers.</p>\n\n<pre>ByteBuffer buff = ByteBuffer.allocateDirect(7777777);</pre>\n\n<p>The GC collects the objects that harbor these buffers but does not dispose of the buffer itself. If I instantiate enough of the transient objects containing buffers, I get this encouraging message:</p>\n\n<pre>java.lang.OutOfMemoryError: Direct buffer memory</pre>\n\n<p>I have been searching up this problem and apparently </p>\n\n<pre>buff.clear();</pre>\n\n<p>and</p>\n\n<pre>System.gc();</pre>\n\n<p>do not work.</p>\n"},{"tags":["java","wildfly","derby"],"answers":[{"tags":[],"owner":{"account_id":23359128,"reputation":31,"user_id":17431663,"display_name":"Stiven"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637098089,"creation_date":1637098089,"answer_id":69996239,"question_id":69995007,"body_markdown":"Ok. It turned out all i needed to do is to add derbyclient.jar into CLASSPATH in windows 7. And copy via what ever method derbyclient.jar to Wildfly modules folder.","title":"Fail to register embedded Derby driver into WildFly 25","body":"<p>Ok. It turned out all i needed to do is to add derbyclient.jar into CLASSPATH in windows 7. And copy via what ever method derbyclient.jar to Wildfly modules folder.</p>\n"}],"owner":{"account_id":23359128,"reputation":31,"user_id":17431663,"display_name":"Stiven"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":255,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637098089,"creation_date":1637090867,"question_id":69995007,"body_markdown":"I have a task from my teacher to make Wildfly+embedded Debry server, but on windows, Wildfly just refusing to register the embedded driver.\r\n\r\nI have derby jars and module.xml inside WildFly modules folder. But when im trying to register them as modules via Jboss-cli.bat, with commands:\r\n\r\n    `/subsystem=datasources/jdbc-driver=derby-embedded:add(driver-name=derby-embedded, \\\r\n     driver-module-name=org.apache.derby, \\\r\n     driver-class-name=org.apache.derby.jdbc.EmbeddedDriver, \\\r\n     driver-datasource-class-name=org.apache.derby.jdbc.EmbeddedDataSource, \\\r\n     driver-xa-datasource-class-name=org.apache.derby.jdbc.EmbeddedXADataSource)`\r\n\r\n\r\nAll what i getting in server log is:\r\n\r\n   \r\n\r\n     21:14:49,310 ERROR [stderr] (management-handler-thread - 1) java.lang.NoClassDefFoundError: org/apache/derby/shared/common/security/SystemPermission\r\n        \r\n        21:14:49,311 ERROR [stderr] (management-handler-thread - 1) \tat org.apache.derby//org.apache.derby.iapi.jdbc.JDBCBoot.boot(JDBCBoot.java:93)\r\n        \r\n        21:14:49,311 ERROR [stderr] (management-handler-thread - 1) \tat org.apache.derby//org.apache.derby.iapi.jdbc.JDBCBoot.boot(JDBCBoot.java:68)\r\n        \r\n        21:14:49,311 ERROR [stderr] (management-handler-thread - 1) \tat org.apache.derby//org.apache.derby.jdbc.EmbeddedDriver.&lt;clinit&gt;(EmbeddedDriver.java:95)\r\n        \r\n        21:14:49,311 ERROR [stderr] (management-handler-thread - 1) \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n        \r\n        21:14:49,311 ERROR [stderr] (management-handler-thread - 1) \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\r\n        \r\n        21:14:49,311 ERROR [stderr] (management-handler-thread - 1) \tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n        \r\n        21:14:49,311 ERROR [stderr] (management-handler-thread - 1) \tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\r\n        \r\n        21:14:49,311 ERROR [stderr] (management-handler-thread - 1) \tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\r\n        \r\n        21:14:49,311 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.connector@25.0.1.Final//org.jboss.as.connector.subsystems.datasources.JdbcDriverAdd.performRuntime(JdbcDriverAdd.java:165)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractAddStepHandler.performRuntime(AbstractAddStepHandler.java:343)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractAddStepHandler$1.execute(AbstractAddStepHandler.java:164)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:1045)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:777)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:466)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1427)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:448)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.lambda$executeForResponse$0(ModelControllerImpl.java:259)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:304)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:270)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.executeForResponse(ModelControllerImpl.java:259)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.executeOperation(ModelControllerImpl.java:253)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:236)\r\n        \r\n        21:14:49,312 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:241)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$400(ModelControllerClientOperationHandler.java:139)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:163)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:159)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:328)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:285)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:254)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:225)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:159)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.protocol@17.0.3.Final//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.protocol@17.0.3.Final//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\r\n        \r\n        21:14:49,313 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\r\n        \r\n        21:14:49,314 ERROR [stderr] (management-handler-thread - 1) \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n        \r\n        21:14:49,314 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.JBossThread.run(JBossThread.java:513)\r\n        \r\n        21:14:49,314 ERROR [stderr] (management-handler-thread - 1) Caused by: java.lang.ClassNotFoundException: org.apache.derby.shared.common.security.SystemPermission from [Module &quot;org.apache.derby&quot; from local module loader @428640fa (finder: local module finder @d9345cd (roots: F:\\etc\\wildfly-25.0.1.Final\\modules,F:\\etc\\wildfly-25.0.1.Final\\modules\\system\\layers\\base))]\r\n        \r\n        21:14:49,314 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:255)\r\n        \r\n        21:14:49,314 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:410)\r\n        \r\n        21:14:49,314 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)\r\n        \r\n        21:14:49,314 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:116)\r\n        \r\n        21:14:49,314 ERROR [stderr] (management-handler-thread - 1) \t... 39 more\r\n        \r\n        21:14:49,315 ERROR [stderr] (management-handler-thread - 1) java.lang.NoClassDefFoundError: org/apache/derby/shared/common/security/SystemPermission\r\n        \r\n        21:14:49,315 ERROR [stderr] (management-handler-thread - 1) \tat org.apache.derby//org.apache.derby.iapi.jdbc.JDBCBoot.boot(JDBCBoot.java:93)\r\n        \r\n        21:14:49,315 ERROR [stderr] (management-handler-thread - 1) \tat org.apache.derby//org.apache.derby.iapi.jdbc.JDBCBoot.boot(JDBCBoot.java:68)\r\n        \r\n        21:14:49,315 ERROR [stderr] (management-handler-thread - 1) \tat org.apache.derby//org.apache.derby.jdbc.EmbeddedDriver.&lt;init&gt;(EmbeddedDriver.java:102)\r\n        \r\n        21:14:49,315 ERROR [stderr] (management-handler-thread - 1) \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n        \r\n        21:14:49,315 ERROR [stderr] (management-handler-thread - 1) \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\r\n        \r\n        21:14:49,315 ERROR [stderr] (management-handler-thread - 1) \tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n        \r\n        21:14:49,315 ERROR [stderr] (management-handler-thread - 1) \tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\r\n        \r\n        21:14:49,315 ERROR [stderr] (management-handler-thread - 1) \tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\r\n        \r\n        21:14:49,315 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.connector@25.0.1.Final//org.jboss.as.connector.subsystems.datasources.JdbcDriverAdd.performRuntime(JdbcDriverAdd.java:165)\r\n        \r\n        21:14:49,315 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractAddStepHandler.performRuntime(AbstractAddStepHandler.java:343)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractAddStepHandler$1.execute(AbstractAddStepHandler.java:164)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:1045)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:777)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:466)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1427)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:448)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.lambda$executeForResponse$0(ModelControllerImpl.java:259)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:304)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:270)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.executeForResponse(ModelControllerImpl.java:259)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.executeOperation(ModelControllerImpl.java:253)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:236)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:241)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$400(ModelControllerClientOperationHandler.java:139)\r\n        \r\n        21:14:49,316 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:163)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:159)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:328)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:285)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:254)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:225)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:159)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.protocol@17.0.3.Final//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.protocol@17.0.3.Final//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.JBossThread.run(JBossThread.java:513)\r\n        \r\n        21:14:49,317 ERROR [stderr] (management-handler-thread - 1) Caused by: java.lang.ClassNotFoundException: org.apache.derby.shared.common.security.SystemPermission from [Module &quot;org.apache.derby&quot; from local module loader @428640fa (finder: local module finder @d9345cd (roots: F:\\etc\\wildfly-25.0.1.Final\\modules,F:\\etc\\wildfly-25.0.1.Final\\modules\\system\\layers\\base))]\r\n        \r\n        21:14:49,318 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:255)\r\n        \r\n        21:14:49,318 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:410)\r\n        \r\n        21:14:49,318 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)\r\n        \r\n        21:14:49,318 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:116)\r\n        \r\n        21:14:49,318 ERROR [stderr] (management-handler-thread - 1) \t... 39 more\r\n        \r\n        21:14:49,319 ERROR [stderr] (management-handler-thread - 1) java.lang.NoClassDefFoundError: org/apache/derby/shared/common/security/SystemPermission\r\n        \r\n        21:14:49,319 ERROR [stderr] (management-handler-thread - 1) \tat org.apache.derby//org.apache.derby.iapi.jdbc.JDBCBoot.boot(JDBCBoot.java:93)\r\n        \r\n        21:14:49,319 ERROR [stderr] (management-handler-thread - 1) \tat org.apache.derby//org.apache.derby.iapi.jdbc.JDBCBoot.boot(JDBCBoot.java:68)\r\n        \r\n        21:14:49,319 ERROR [stderr] (management-handler-thread - 1) \tat org.apache.derby//org.apache.derby.iapi.jdbc.AutoloadedDriver.getDriverModule(AutoloadedDriver.java:217)\r\n        \r\n        21:14:49,319 ERROR [stderr] (management-handler-thread - 1) \tat org.apache.derby//org.apache.derby.jdbc.EmbeddedDriver.getDriverModule(EmbeddedDriver.java:184)\r\n        \r\n        21:14:49,319 ERROR [stderr] (management-handler-thread - 1) \tat org.apache.derby//org.apache.derby.jdbc.EmbeddedDriver.getMajorVersion(EmbeddedDriver.java:145)\r\n        \r\n        21:14:49,319 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.connector@25.0.1.Final//org.jboss.as.connector.subsystems.datasources.JdbcDriverAdd.startDriverServices(JdbcDriverAdd.java:179)\r\n        \r\n        21:14:49,319 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.connector@25.0.1.Final//org.jboss.as.connector.subsystems.datasources.JdbcDriverAdd.performRuntime(JdbcDriverAdd.java:169)\r\n        \r\n        21:14:49,319 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractAddStepHandler.performRuntime(AbstractAddStepHandler.java:343)\r\n        \r\n        21:14:49,319 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractAddStepHandler$1.execute(AbstractAddStepHandler.java:164)\r\n        \r\n        21:14:49,320 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:1045)\r\n        \r\n        21:14:49,320 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:777)\r\n        \r\n        21:14:49,320 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:466)\r\n        \r\n        21:14:49,320 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1427)\r\n        \r\n        21:14:49,320 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:448)\r\n        \r\n        21:14:49,320 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.lambda$executeForResponse$0(ModelControllerImpl.java:259)\r\n        \r\n        21:14:49,320 ERROR [stderr] (management-handler-thread - 1) \tat org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:304)\r\n        \r\n        21:14:49,320 ERROR [stderr] (management-handler-thread - 1) \tat org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:270)\r\n        \r\n        21:14:49,320 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.executeForResponse(ModelControllerImpl.java:259)\r\n        \r\n        21:14:49,320 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.executeOperation(ModelControllerImpl.java:253)\r\n        \r\n        21:14:49,320 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:236)\r\n        \r\n        21:14:49,320 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:241)\r\n        \r\n        21:14:49,320 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$400(ModelControllerClientOperationHandler.java:139)\r\n        \r\n        21:14:49,321 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:163)\r\n        \r\n        21:14:49,321 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:159)\r\n        \r\n        21:14:49,321 ERROR [stderr] (management-handler-thread - 1) \tat org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:328)\r\n        \r\n        21:14:49,321 ERROR [stderr] (management-handler-thread - 1) \tat org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:285)\r\n        \r\n        21:14:49,321 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:254)\r\n        \r\n        21:14:49,321 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:225)\r\n        \r\n        21:14:49,321 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:159)\r\n        \r\n        21:14:49,321 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.protocol@17.0.3.Final//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)\r\n        \r\n        21:14:49,321 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.as.protocol@17.0.3.Final//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)\r\n        \r\n        21:14:49,321 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n        \r\n        21:14:49,321 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\r\n        \r\n        21:14:49,321 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\r\n        \r\n        21:14:49,322 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\r\n        \r\n        21:14:49,322 ERROR [stderr] (management-handler-thread - 1) \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n        \r\n        21:14:49,322 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.threads@2.4.0.Final//org.jboss.threads.JBossThread.run(JBossThread.java:513)\r\n        \r\n        21:14:49,322 ERROR [stderr] (management-handler-thread - 1) Caused by: java.lang.ClassNotFoundException: org.apache.derby.shared.common.security.SystemPermission from [Module &quot;org.apache.derby&quot; from local module loader @428640fa (finder: local module finder @d9345cd (roots: F:\\etc\\wildfly-25.0.1.Final\\modules,F:\\etc\\wildfly-25.0.1.Final\\modules\\system\\layers\\base))]\r\n        \r\n        21:14:49,322 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:255)\r\n        \r\n        21:14:49,322 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:410)\r\n        \r\n        21:14:49,322 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)\r\n        \r\n        21:14:49,322 ERROR [stderr] (management-handler-thread - 1) \tat org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:116)\r\n        \r\n        21:14:49,322 ERROR [stderr] (management-handler-thread - 1) \t... 37 more\r\n        \r\n        21:14:49,323 WARN  [org.jboss.as.connector.subsystems.datasources] (management-handler-thread - 1) WFLYJCA0003: Unable to instantiate driver class &quot;org.apache.derby.jdbc.EmbeddedDriver&quot;: java.lang.NullPointerException: Cannot invoke &quot;java.sql.Driver.getMajorVersion()&quot; because the return value of &quot;org.apache.derby.jdbc.EmbeddedDriver.getDriverModule()&quot; is null\r\n        21:14:49,324 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 1) WFLYCTL0013: Operation (&quot;add&quot;) failed - address: ([\r\n            (&quot;subsystem&quot; =&gt; &quot;datasources&quot;),\r\n            (&quot;jdbc-driver&quot; =&gt; &quot;derby-embedded&quot;)\r\n        ]) - failure description: &quot;WFLYJCA0034: Unable to instantiate driver class \\&quot;org.apache.derby.jdbc.EmbeddedDriver\\&quot;. See log (WARN) for more details&quot;\r\n\r\n\r\nWhat can cause this problem? Derby version is 10.15.2.0, WildFly wildfly-25.0.1.Final. \r\n\r\n\r\n","title":"Fail to register embedded Derby driver into WildFly 25","body":"<p>I have a task from my teacher to make Wildfly+embedded Debry server, but on windows, Wildfly just refusing to register the embedded driver.</p>\n<p>I have derby jars and module.xml inside WildFly modules folder. But when im trying to register them as modules via Jboss-cli.bat, with commands:</p>\n<pre><code>`/subsystem=datasources/jdbc-driver=derby-embedded:add(driver-name=derby-embedded, \\\n driver-module-name=org.apache.derby, \\\n driver-class-name=org.apache.derby.jdbc.EmbeddedDriver, \\\n driver-datasource-class-name=org.apache.derby.jdbc.EmbeddedDataSource, \\\n driver-xa-datasource-class-name=org.apache.derby.jdbc.EmbeddedXADataSource)`\n</code></pre>\n<p>All what i getting in server log is:</p>\n<pre><code> 21:14:49,310 ERROR [stderr] (management-handler-thread - 1) java.lang.NoClassDefFoundError: org/apache/derby/shared/common/security/SystemPermission\n    \n    21:14:49,311 ERROR [stderr] (management-handler-thread - 1)     at org.apache.derby//org.apache.derby.iapi.jdbc.JDBCBoot.boot(JDBCBoot.java:93)\n    \n    21:14:49,311 ERROR [stderr] (management-handler-thread - 1)     at org.apache.derby//org.apache.derby.iapi.jdbc.JDBCBoot.boot(JDBCBoot.java:68)\n    \n    21:14:49,311 ERROR [stderr] (management-handler-thread - 1)     at org.apache.derby//org.apache.derby.jdbc.EmbeddedDriver.&lt;clinit&gt;(EmbeddedDriver.java:95)\n    \n    21:14:49,311 ERROR [stderr] (management-handler-thread - 1)     at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    \n    21:14:49,311 ERROR [stderr] (management-handler-thread - 1)     at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\n    \n    21:14:49,311 ERROR [stderr] (management-handler-thread - 1)     at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    \n    21:14:49,311 ERROR [stderr] (management-handler-thread - 1)     at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\n    \n    21:14:49,311 ERROR [stderr] (management-handler-thread - 1)     at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\n    \n    21:14:49,311 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.connector@25.0.1.Final//org.jboss.as.connector.subsystems.datasources.JdbcDriverAdd.performRuntime(JdbcDriverAdd.java:165)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractAddStepHandler.performRuntime(AbstractAddStepHandler.java:343)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractAddStepHandler$1.execute(AbstractAddStepHandler.java:164)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:1045)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:777)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:466)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1427)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:448)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.lambda$executeForResponse$0(ModelControllerImpl.java:259)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:304)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:270)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.executeForResponse(ModelControllerImpl.java:259)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.executeOperation(ModelControllerImpl.java:253)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:236)\n    \n    21:14:49,312 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:241)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$400(ModelControllerClientOperationHandler.java:139)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:163)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:159)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:328)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:285)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:254)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:225)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:159)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.protocol@17.0.3.Final//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.protocol@17.0.3.Final//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\n    \n    21:14:49,313 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\n    \n    21:14:49,314 ERROR [stderr] (management-handler-thread - 1)     at java.base/java.lang.Thread.run(Thread.java:833)\n    \n    21:14:49,314 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.JBossThread.run(JBossThread.java:513)\n    \n    21:14:49,314 ERROR [stderr] (management-handler-thread - 1) Caused by: java.lang.ClassNotFoundException: org.apache.derby.shared.common.security.SystemPermission from [Module &quot;org.apache.derby&quot; from local module loader @428640fa (finder: local module finder @d9345cd (roots: F:\\etc\\wildfly-25.0.1.Final\\modules,F:\\etc\\wildfly-25.0.1.Final\\modules\\system\\layers\\base))]\n    \n    21:14:49,314 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:255)\n    \n    21:14:49,314 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:410)\n    \n    21:14:49,314 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)\n    \n    21:14:49,314 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:116)\n    \n    21:14:49,314 ERROR [stderr] (management-handler-thread - 1)     ... 39 more\n    \n    21:14:49,315 ERROR [stderr] (management-handler-thread - 1) java.lang.NoClassDefFoundError: org/apache/derby/shared/common/security/SystemPermission\n    \n    21:14:49,315 ERROR [stderr] (management-handler-thread - 1)     at org.apache.derby//org.apache.derby.iapi.jdbc.JDBCBoot.boot(JDBCBoot.java:93)\n    \n    21:14:49,315 ERROR [stderr] (management-handler-thread - 1)     at org.apache.derby//org.apache.derby.iapi.jdbc.JDBCBoot.boot(JDBCBoot.java:68)\n    \n    21:14:49,315 ERROR [stderr] (management-handler-thread - 1)     at org.apache.derby//org.apache.derby.jdbc.EmbeddedDriver.&lt;init&gt;(EmbeddedDriver.java:102)\n    \n    21:14:49,315 ERROR [stderr] (management-handler-thread - 1)     at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    \n    21:14:49,315 ERROR [stderr] (management-handler-thread - 1)     at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\n    \n    21:14:49,315 ERROR [stderr] (management-handler-thread - 1)     at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    \n    21:14:49,315 ERROR [stderr] (management-handler-thread - 1)     at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\n    \n    21:14:49,315 ERROR [stderr] (management-handler-thread - 1)     at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\n    \n    21:14:49,315 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.connector@25.0.1.Final//org.jboss.as.connector.subsystems.datasources.JdbcDriverAdd.performRuntime(JdbcDriverAdd.java:165)\n    \n    21:14:49,315 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractAddStepHandler.performRuntime(AbstractAddStepHandler.java:343)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractAddStepHandler$1.execute(AbstractAddStepHandler.java:164)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:1045)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:777)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:466)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1427)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:448)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.lambda$executeForResponse$0(ModelControllerImpl.java:259)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:304)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:270)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.executeForResponse(ModelControllerImpl.java:259)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.executeOperation(ModelControllerImpl.java:253)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:236)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:241)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$400(ModelControllerClientOperationHandler.java:139)\n    \n    21:14:49,316 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:163)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:159)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:328)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:285)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:254)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:225)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:159)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.protocol@17.0.3.Final//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.protocol@17.0.3.Final//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at java.base/java.lang.Thread.run(Thread.java:833)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.JBossThread.run(JBossThread.java:513)\n    \n    21:14:49,317 ERROR [stderr] (management-handler-thread - 1) Caused by: java.lang.ClassNotFoundException: org.apache.derby.shared.common.security.SystemPermission from [Module &quot;org.apache.derby&quot; from local module loader @428640fa (finder: local module finder @d9345cd (roots: F:\\etc\\wildfly-25.0.1.Final\\modules,F:\\etc\\wildfly-25.0.1.Final\\modules\\system\\layers\\base))]\n    \n    21:14:49,318 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:255)\n    \n    21:14:49,318 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:410)\n    \n    21:14:49,318 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)\n    \n    21:14:49,318 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:116)\n    \n    21:14:49,318 ERROR [stderr] (management-handler-thread - 1)     ... 39 more\n    \n    21:14:49,319 ERROR [stderr] (management-handler-thread - 1) java.lang.NoClassDefFoundError: org/apache/derby/shared/common/security/SystemPermission\n    \n    21:14:49,319 ERROR [stderr] (management-handler-thread - 1)     at org.apache.derby//org.apache.derby.iapi.jdbc.JDBCBoot.boot(JDBCBoot.java:93)\n    \n    21:14:49,319 ERROR [stderr] (management-handler-thread - 1)     at org.apache.derby//org.apache.derby.iapi.jdbc.JDBCBoot.boot(JDBCBoot.java:68)\n    \n    21:14:49,319 ERROR [stderr] (management-handler-thread - 1)     at org.apache.derby//org.apache.derby.iapi.jdbc.AutoloadedDriver.getDriverModule(AutoloadedDriver.java:217)\n    \n    21:14:49,319 ERROR [stderr] (management-handler-thread - 1)     at org.apache.derby//org.apache.derby.jdbc.EmbeddedDriver.getDriverModule(EmbeddedDriver.java:184)\n    \n    21:14:49,319 ERROR [stderr] (management-handler-thread - 1)     at org.apache.derby//org.apache.derby.jdbc.EmbeddedDriver.getMajorVersion(EmbeddedDriver.java:145)\n    \n    21:14:49,319 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.connector@25.0.1.Final//org.jboss.as.connector.subsystems.datasources.JdbcDriverAdd.startDriverServices(JdbcDriverAdd.java:179)\n    \n    21:14:49,319 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.connector@25.0.1.Final//org.jboss.as.connector.subsystems.datasources.JdbcDriverAdd.performRuntime(JdbcDriverAdd.java:169)\n    \n    21:14:49,319 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractAddStepHandler.performRuntime(AbstractAddStepHandler.java:343)\n    \n    21:14:49,319 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractAddStepHandler$1.execute(AbstractAddStepHandler.java:164)\n    \n    21:14:49,320 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.executeStep(AbstractOperationContext.java:1045)\n    \n    21:14:49,320 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.processStages(AbstractOperationContext.java:777)\n    \n    21:14:49,320 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AbstractOperationContext.executeOperation(AbstractOperationContext.java:466)\n    \n    21:14:49,320 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.OperationContextImpl.executeOperation(OperationContextImpl.java:1427)\n    \n    21:14:49,320 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.internalExecute(ModelControllerImpl.java:448)\n    \n    21:14:49,320 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.lambda$executeForResponse$0(ModelControllerImpl.java:259)\n    \n    21:14:49,320 ERROR [stderr] (management-handler-thread - 1)     at org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:304)\n    \n    21:14:49,320 ERROR [stderr] (management-handler-thread - 1)     at org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:270)\n    \n    21:14:49,320 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.executeForResponse(ModelControllerImpl.java:259)\n    \n    21:14:49,320 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.executeOperation(ModelControllerImpl.java:253)\n    \n    21:14:49,320 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.ModelControllerImpl.execute(ModelControllerImpl.java:236)\n    \n    21:14:49,320 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.doExecute(ModelControllerClientOperationHandler.java:241)\n    \n    21:14:49,320 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler.access$400(ModelControllerClientOperationHandler.java:139)\n    \n    21:14:49,321 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:163)\n    \n    21:14:49,321 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1$1.run(ModelControllerClientOperationHandler.java:159)\n    \n    21:14:49,321 ERROR [stderr] (management-handler-thread - 1)     at org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:328)\n    \n    21:14:49,321 ERROR [stderr] (management-handler-thread - 1)     at org.wildfly.security.elytron-base@1.17.1.Final//org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:285)\n    \n    21:14:49,321 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:254)\n    \n    21:14:49,321 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:225)\n    \n    21:14:49,321 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.controller@17.0.3.Final//org.jboss.as.controller.remote.ModelControllerClientOperationHandler$ExecuteRequestHandler$1.execute(ModelControllerClientOperationHandler.java:159)\n    \n    21:14:49,321 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.protocol@17.0.3.Final//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$1.doExecute(ManagementRequestContextImpl.java:70)\n    \n    21:14:49,321 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.as.protocol@17.0.3.Final//org.jboss.as.protocol.mgmt.ManagementRequestContextImpl$AsyncTaskRunner.run(ManagementRequestContextImpl.java:160)\n    \n    21:14:49,321 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\n    \n    21:14:49,321 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\n    \n    21:14:49,321 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\n    \n    21:14:49,322 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\n    \n    21:14:49,322 ERROR [stderr] (management-handler-thread - 1)     at java.base/java.lang.Thread.run(Thread.java:833)\n    \n    21:14:49,322 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.threads@2.4.0.Final//org.jboss.threads.JBossThread.run(JBossThread.java:513)\n    \n    21:14:49,322 ERROR [stderr] (management-handler-thread - 1) Caused by: java.lang.ClassNotFoundException: org.apache.derby.shared.common.security.SystemPermission from [Module &quot;org.apache.derby&quot; from local module loader @428640fa (finder: local module finder @d9345cd (roots: F:\\etc\\wildfly-25.0.1.Final\\modules,F:\\etc\\wildfly-25.0.1.Final\\modules\\system\\layers\\base))]\n    \n    21:14:49,322 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:255)\n    \n    21:14:49,322 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:410)\n    \n    21:14:49,322 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)\n    \n    21:14:49,322 ERROR [stderr] (management-handler-thread - 1)     at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:116)\n    \n    21:14:49,322 ERROR [stderr] (management-handler-thread - 1)     ... 37 more\n    \n    21:14:49,323 WARN  [org.jboss.as.connector.subsystems.datasources] (management-handler-thread - 1) WFLYJCA0003: Unable to instantiate driver class &quot;org.apache.derby.jdbc.EmbeddedDriver&quot;: java.lang.NullPointerException: Cannot invoke &quot;java.sql.Driver.getMajorVersion()&quot; because the return value of &quot;org.apache.derby.jdbc.EmbeddedDriver.getDriverModule()&quot; is null\n    21:14:49,324 ERROR [org.jboss.as.controller.management-operation] (management-handler-thread - 1) WFLYCTL0013: Operation (&quot;add&quot;) failed - address: ([\n        (&quot;subsystem&quot; =&gt; &quot;datasources&quot;),\n        (&quot;jdbc-driver&quot; =&gt; &quot;derby-embedded&quot;)\n    ]) - failure description: &quot;WFLYJCA0034: Unable to instantiate driver class \\&quot;org.apache.derby.jdbc.EmbeddedDriver\\&quot;. See log (WARN) for more details&quot;\n</code></pre>\n<p>What can cause this problem? Derby version is 10.15.2.0, WildFly wildfly-25.0.1.Final.</p>\n"},{"tags":["java","hadoop","hdfs","hadoop3"],"comments":[{"owner":{"account_id":3612533,"reputation":17880,"user_id":7303447,"display_name":"franklinsijo"},"score":0,"creation_date":1586011015,"post_id":61029653,"comment_id":107970179,"body_markdown":"Datanode is not running. Could you please update the post with your cluster setup, configuration files and the output of `jps` command.","body":"Datanode is not running. Could you please update the post with your cluster setup, configuration files and the output of <code>jps</code> command."},{"owner":{"account_id":16267615,"reputation":35,"user_id":11747180,"display_name":"Teja_naik"},"score":0,"creation_date":1586013414,"post_id":61029653,"comment_id":107971156,"body_markdown":"cmd:-jps  \n 16832 NodeManager\n11716\n5556 ResourceManager\n18280 NameNode\n11708 Jps","body":"cmd:-jps    16832 NodeManager 11716 5556 ResourceManager 18280 NameNode 11708 Jps"},{"owner":{"account_id":3612533,"reputation":17880,"user_id":7303447,"display_name":"franklinsijo"},"score":0,"creation_date":1586013873,"post_id":61029653,"comment_id":107971330,"body_markdown":"As you can see, datanode and secondary namenode daemons aren&#39;t running. Could you post the `hdfs-site.xml` and `core-site.xml`","body":"As you can see, datanode and secondary namenode daemons aren&#39;t running. Could you post the <code>hdfs-site.xml</code> and <code>core-site.xml</code>"},{"owner":{"account_id":16267615,"reputation":35,"user_id":11747180,"display_name":"Teja_naik"},"score":0,"creation_date":1586015014,"post_id":61029653,"comment_id":107971780,"body_markdown":"core-site.xml:\n&lt;configuration&gt;\n   &lt;property&gt;\n \n       &lt;name&gt;fs.default.name&lt;/name&gt;\n \n       &lt;value&gt;hdfs://localhost:9000&lt;/value&gt;\n \n   &lt;/property&gt;\n&lt;property&gt;\n \n       &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;\n       &lt;value&gt;C:\\hadoop\\hdfstmp&lt;/value&gt;\n \n   &lt;/property&gt;\n   \n&lt;/configuration&gt;","body":"core-site.xml: &lt;configuration&gt;    &lt;property&gt;          &lt;name&gt;fs.default.name&lt;/name&gt;          &lt;value&gt;hdfs://localhost:9000&lt;/value&gt;      &lt;/property&gt; &lt;property&gt;          &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;        &lt;value&gt;C:\\hadoop\\hdfstmp&lt;/value&gt;      &lt;/property&gt;     &lt;/configuration&gt;"},{"owner":{"account_id":16267615,"reputation":35,"user_id":11747180,"display_name":"Teja_naik"},"score":0,"creation_date":1586015064,"post_id":61029653,"comment_id":107971797,"body_markdown":"hdfs-site.xml:\n&lt;configuration&gt;\n\t&lt;property&gt;\n\t\t&lt;name&gt;dfs.replication&lt;/name&gt;\n\t\t&lt;value&gt;1&lt;/value&gt;\n\t&lt;/property&gt;\n\t&lt;property&gt;\n\t\t&lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;\n\t\t&lt;value&gt;C:\\hadoop\\data\\namenode&lt;/value&gt;\n\t&lt;/property&gt;\n\t&lt;property&gt;\n\t\t&lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;\n\t\t&lt;value&gt;C:\\hadoop\\data\\datanode&lt;/value&gt;\n\t&lt;/property&gt;\n         &lt;property&gt;\n\t\t&lt;name&gt;dfs.datanode.failed.volumes.tolerated&lt;/name&gt;\n\t\t&lt;value&gt;0&lt;/value&gt;\n\t&lt;/property&gt;\n&lt;/configuration&gt;","body":"hdfs-site.xml: &lt;configuration&gt; \t&lt;property&gt; \t\t&lt;name&gt;dfs.replication&lt;/name&gt; \t\t&lt;value&gt;1&lt;/value&gt; \t&lt;/property&gt; \t&lt;property&gt; \t\t&lt;name&gt;dfs.namenode.name.dir&lt;/name&gt; \t\t&lt;value&gt;C:\\hadoop\\data\\namenode&lt;/value&gt; \t&lt;/property&gt; \t&lt;property&gt; \t\t&lt;name&gt;dfs.datanode.data.dir&lt;/name&gt; \t\t&lt;value&gt;C:\\hadoop\\data\\datanode&lt;/value&gt; \t&lt;/property&gt;          &lt;property&gt; \t\t&lt;name&gt;dfs.datanode.failed.volumes.tolerated&lt;/name&gt; \t\t&lt;value&gt;0&lt;/value&gt; \t&lt;/property&gt; &lt;/configuration&gt;"},{"owner":{"account_id":3612533,"reputation":17880,"user_id":7303447,"display_name":"franklinsijo"},"score":0,"creation_date":1586015733,"post_id":61029653,"comment_id":107972047,"body_markdown":"Can you paste the datanode logs in pastebin.com and share!","body":"Can you paste the datanode logs in pastebin.com and share!"},{"owner":{"account_id":16267615,"reputation":35,"user_id":11747180,"display_name":"Teja_naik"},"score":0,"creation_date":1586017138,"post_id":61029653,"comment_id":107972601,"body_markdown":"https://pastebin.com/5j4STmCJ","body":"<a href=\"https://pastebin.com/5j4STmCJ\" rel=\"nofollow noreferrer\">pastebin.com/5j4STmCJ</a>"},{"owner":{"account_id":3612533,"reputation":17880,"user_id":7303447,"display_name":"franklinsijo"},"score":0,"creation_date":1586018155,"post_id":61029653,"comment_id":107973027,"body_markdown":"Did you format the namenode later at any point while your cluster was functional? Or to put it in other words, how many times have you formatted the namenode?","body":"Did you format the namenode later at any point while your cluster was functional? Or to put it in other words, how many times have you formatted the namenode?"},{"owner":{"account_id":16267615,"reputation":35,"user_id":11747180,"display_name":"Teja_naik"},"score":0,"creation_date":1586018308,"post_id":61029653,"comment_id":107973098,"body_markdown":"two time i did that because of some error was occuring that time.","body":"two time i did that because of some error was occuring that time."},{"owner":{"account_id":3612533,"reputation":17880,"user_id":7303447,"display_name":"franklinsijo"},"score":0,"creation_date":1586018376,"post_id":61029653,"comment_id":107973123,"body_markdown":"Okay, can you post the log for secondary namenode in pastebin.","body":"Okay, can you post the log for secondary namenode in pastebin."},{"owner":{"account_id":16267615,"reputation":35,"user_id":11747180,"display_name":"Teja_naik"},"score":0,"creation_date":1586018444,"post_id":61029653,"comment_id":107973150,"body_markdown":"where will i find secondary namenode ?? i am not able to locate the directory","body":"where will i find secondary namenode ?? i am not able to locate the directory"},{"owner":{"account_id":3612533,"reputation":17880,"user_id":7303447,"display_name":"franklinsijo"},"score":0,"creation_date":1586018884,"post_id":61029653,"comment_id":107973300,"body_markdown":"Logs will be in the same directory as the one where datanode logs were written.","body":"Logs will be in the same directory as the one where datanode logs were written."},{"owner":{"account_id":16267615,"reputation":35,"user_id":11747180,"display_name":"Teja_naik"},"score":0,"creation_date":1586019154,"post_id":61029653,"comment_id":107973407,"body_markdown":"I still could not locate it\nI got a another version file in datanode\nnamespaceID=1442950721\ncTime=1585992740024\nblockpoolID=BP-1166567974-192.168.1.6-1585992740024\nlayoutVersion=-57","body":"I still could not locate it I got a another version file in datanode namespaceID=1442950721 cTime=1585992740024 blockpoolID=BP-1166567974-192.168.1.6-1585992740024 layoutVersion=-57"},{"owner":{"account_id":3612533,"reputation":17880,"user_id":7303447,"display_name":"franklinsijo"},"score":0,"creation_date":1586019387,"post_id":61029653,"comment_id":107973502,"body_markdown":"Okay, I will update the answer.","body":"Okay, I will update the answer."},{"owner":{"account_id":16267615,"reputation":35,"user_id":11747180,"display_name":"Teja_naik"},"score":1,"creation_date":1586019543,"post_id":61029653,"comment_id":107973570,"body_markdown":"this complete datanode logs. https://pastebin.com/0vJbN8HS","body":"this complete datanode logs. <a href=\"https://pastebin.com/0vJbN8HS\" rel=\"nofollow noreferrer\">pastebin.com/0vJbN8HS</a>"}],"answers":[{"tags":[],"owner":{"account_id":3612533,"reputation":17880,"user_id":7303447,"display_name":"franklinsijo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1586020626,"creation_date":1586020626,"answer_id":61031871,"question_id":61029653,"body_markdown":"The Mapreduce job fails because it is unable to access HDFS since `There are 0 datanode(s) running and 0 node(s) are excluded in this operation.` \r\n\r\nAnd from the datanode logs, it is understood that the `Datanode` daemon is unable to register itself with the HDFS cluster due to `Incompatible clusterIDs`. \r\n\r\nWhen a namenode is formatted (during installation and setup), a `clusterID` is generated and this clusterID is stored in the `VERSION` file of each daemon when they initialize. This clusterID acts as the identifier for the datanodes, letting them to rejoin the cluster whenever they are stopped and started. \r\n\r\nIncompatible clusterIDs among the nodes can happen when the namenode is formatted on an active cluster and the other daemons are not re-initialized. \r\n\r\nTo get the cluster back in form, \r\n\r\n 1. Stop the cluster \r\n 2. Delete the contents of the following\r\n    directories `C:\\hadoop\\hdfstmp`, `C:\\hadoop\\data\\namenode`,\r\n    `C:\\hadoop\\data\\datanode`\r\n 3. Format the namenode\r\n 4. Start the cluster\r\n\r\nYou have recopy the data required for the Mapreduce job and run the job.\r\n\r\n","title":"Exception in thread &quot;main&quot; org.apache.hadoop.ipc.RemoteException(java.io.IOException) for hadoop 3.1.3","body":"<p>The Mapreduce job fails because it is unable to access HDFS since <code>There are 0 datanode(s) running and 0 node(s) are excluded in this operation.</code> </p>\n\n<p>And from the datanode logs, it is understood that the <code>Datanode</code> daemon is unable to register itself with the HDFS cluster due to <code>Incompatible clusterIDs</code>. </p>\n\n<p>When a namenode is formatted (during installation and setup), a <code>clusterID</code> is generated and this clusterID is stored in the <code>VERSION</code> file of each daemon when they initialize. This clusterID acts as the identifier for the datanodes, letting them to rejoin the cluster whenever they are stopped and started. </p>\n\n<p>Incompatible clusterIDs among the nodes can happen when the namenode is formatted on an active cluster and the other daemons are not re-initialized. </p>\n\n<p>To get the cluster back in form, </p>\n\n<ol>\n<li>Stop the cluster </li>\n<li>Delete the contents of the following\ndirectories <code>C:\\hadoop\\hdfstmp</code>, <code>C:\\hadoop\\data\\namenode</code>,\n<code>C:\\hadoop\\data\\datanode</code></li>\n<li>Format the namenode</li>\n<li>Start the cluster</li>\n</ol>\n\n<p>You have recopy the data required for the Mapreduce job and run the job.</p>\n"},{"tags":[],"owner":{"account_id":3012144,"reputation":2604,"user_id":5060792,"accept_rate":53,"display_name":"Clay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637098024,"creation_date":1637098024,"answer_id":69996226,"question_id":61029653,"body_markdown":"I do not have the option to shut down and restart my cluster.  However, running the following command solved the problem without causing any other issue that I could see.\r\n\r\n    hdfs dfsadmin -safemode leave\r\n\r\nSee the following: \r\n1. https://hadoop.apache.org/docs/r2.7.2/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#DFSAdmin_Command\r\n1. https://hadoop.apache.org/docs/r2.7.2/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#Safemode\r\n\r\n\r\n\r\n","title":"Exception in thread &quot;main&quot; org.apache.hadoop.ipc.RemoteException(java.io.IOException) for hadoop 3.1.3","body":"<p>I do not have the option to shut down and restart my cluster.  However, running the following command solved the problem without causing any other issue that I could see.</p>\n<pre><code>hdfs dfsadmin -safemode leave\n</code></pre>\n<p>See the following:</p>\n<ol>\n<li><a href=\"https://hadoop.apache.org/docs/r2.7.2/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#DFSAdmin_Command\" rel=\"nofollow noreferrer\">https://hadoop.apache.org/docs/r2.7.2/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#DFSAdmin_Command</a></li>\n<li><a href=\"https://hadoop.apache.org/docs/r2.7.2/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#Safemode\" rel=\"nofollow noreferrer\">https://hadoop.apache.org/docs/r2.7.2/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#Safemode</a></li>\n</ol>\n"}],"owner":{"account_id":16267615,"reputation":35,"user_id":11747180,"display_name":"Teja_naik"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3739,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":61031871,"answer_count":2,"score":1,"last_activity_date":1637098024,"creation_date":1586010844,"question_id":61029653,"body_markdown":"I am trying to run a mapreduce job but I am getting error for Hadoop-3.1.3 \r\n```\r\nhadoop jar WordCount.jar WordcountDemo.WordCount  /mapwork/Mapwork /r_out\r\n```\r\n**Error**\r\n```\r\n2020-04-04 19:59:11,379 INFO client.RMProxy: Connecting to ResourceManager at /0.0.0.0:8032\r\n2020-04-04 19:59:12,499 WARN mapreduce.JobResourceUploader: Hadoop command-line option parsing not performed. Implement the Tool interface and execute your application with ToolRunner to remedy this.\r\n2020-04-04 19:59:12,569 INFO mapreduce.JobResourceUploader: Disabling Erasure Coding for path: /tmp/hadoop-yarn/staging/tejashri/.staging/job_1586009643433_0007\r\n2020-04-04 19:59:12,727 WARN hdfs.DataStreamer: DataStreamer Exception\r\norg.apache.hadoop.ipc.RemoteException(java.io.IOException): File /tmp/hadoop-yarn/staging/tejashri/.staging/job_1586009643433_0007/job.jar could only be written to 0 of the 1 minReplication nodes. There are 0 datanode(s) running and 0 node(s) are excluded in this operation.\r\n        at org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.chooseTarget4NewBlock(BlockManager.java:2205)\r\n        at org.apache.hadoop.hdfs.server.namenode.FSDirWriteFileOp.chooseTargetForNewBlock(FSDirWriteFileOp.java:294)\r\n        at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:2731)\r\n        at org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.addBlock(NameNodeRpcServer.java:892)\r\n        at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.addBlock(ClientNamenodeProtocolServerSideTranslatorPB.java:568)\r\n        at org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java)\r\n        at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:527)\r\n        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1036)\r\n        at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1000)\r\n        at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:928)\r\n        at java.security.AccessController.doPrivileged(Native Method)\r\n        at javax.security.auth.Subject.doAs(Subject.java:422)\r\n        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1729)\r\n        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2916)\r\n\r\n        at org.apache.hadoop.ipc.Client.getRpcResponse(Client.java:1545)\r\n        at org.apache.hadoop.ipc.Client.call(Client.java:1491)\r\n        at org.apache.hadoop.ipc.Client.call(Client.java:1388)\r\n        at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:233)\r\n        at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:118)\r\n        at com.sun.proxy.$Proxy9.addBlock(Unknown Source)\r\n        at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolTranslatorPB.addBlock(ClientNamenodeProtocolTranslatorPB.java:514)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:422)\r\n        at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeMethod(RetryInvocationHandler.java:165)\r\n        at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invoke(RetryInvocationHandler.java:157)\r\n        at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeOnce(RetryInvocationHandler.java:95)\r\n        at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:359)\r\n        at com.sun.proxy.$Proxy10.addBlock(Unknown Source)\r\n        at org.apache.hadoop.hdfs.DFSOutputStream.addBlock(DFSOutputStream.java:1081)\r\n        at org.apache.hadoop.hdfs.DataStreamer.locateFollowingBlock(DataStreamer.java:1866)\r\n        at org.apache.hadoop.hdfs.DataStreamer.nextBlockOutputStream(DataStreamer.java:1668)\r\n        at org.apache.hadoop.hdfs.DataStreamer.run(DataStreamer.java:716)\r\n2020-04-04 19:59:12,734 INFO mapreduce.JobSubmitter: Cleaning up the staging area /tmp/hadoop-yarn/staging/tejashri/.staging/job_1586009643433_0007\r\nException in thread &quot;main&quot; org.apache.hadoop.ipc.RemoteException(java.io.IOException): File /tmp/hadoop-yarn/staging/tejashri/.staging/job_1586009643433_0007/job.jar could only be written to 0 of the 1 minReplication nodes. There are 0 datanode(s) running and 0 node(s) are excluded in this operation.\r\n        at org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.chooseTarget4NewBlock(BlockManager.java:2205)\r\n        at org.apache.hadoop.hdfs.server.namenode.FSDirWriteFileOp.chooseTargetForNewBlock(FSDirWriteFileOp.java:294)\r\n        at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:2731)\r\n        at org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.addBlock(NameNodeRpcServer.java:892)\r\n        at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.addBlock(ClientNamenodeProtocolServerSideTranslatorPB.java:568)\r\n        at org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java)\r\n        at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:527)\r\n        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1036)\r\n        at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1000)\r\n        at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:928)\r\n        at java.security.AccessController.doPrivileged(Native Method)\r\n        at javax.security.auth.Subject.doAs(Subject.java:422)\r\n        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1729)\r\n        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2916)\r\n\r\n        at org.apache.hadoop.ipc.Client.getRpcResponse(Client.java:1545)\r\n        at org.apache.hadoop.ipc.Client.call(Client.java:1491)\r\n        at org.apache.hadoop.ipc.Client.call(Client.java:1388)\r\n        at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:233)\r\n        at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:118)\r\n        at com.sun.proxy.$Proxy9.addBlock(Unknown Source)\r\n        at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolTranslatorPB.addBlock(ClientNamenodeProtocolTranslatorPB.java:514)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:422)\r\n        at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeMethod(RetryInvocationHandler.java:165)\r\n        at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invoke(RetryInvocationHandler.java:157)\r\n        at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeOnce(RetryInvocationHandler.java:95)\r\n        at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:359)\r\n        at com.sun.proxy.$Proxy10.addBlock(Unknown Source)\r\n        at org.apache.hadoop.hdfs.DFSOutputStream.addBlock(DFSOutputStream.java:1081)\r\n        at org.apache.hadoop.hdfs.DataStreamer.locateFollowingBlock(DataStreamer.java:1866)\r\n        at org.apache.hadoop.hdfs.DataStreamer.nextBlockOutputStream(DataStreamer.java:1668)\r\n        at org.apache.hadoop.hdfs.DataStreamer.run(DataStreamer.java:716)\r\n```\r\n\r\n**Update** (from comments):\r\n\r\n`core-site.xml`\r\n```\r\n&lt;configuration&gt; \r\n&lt;property&gt; \r\n&lt;name&gt;fs.default.name&lt;/name&gt; \r\n&lt;value&gt;hdfs://localhost:9000&lt;/value&gt; \r\n&lt;/property&gt; \r\n&lt;property&gt; \r\n&lt;name&gt;hadoop.tmp.dir&lt;/name&gt; \r\n&lt;value&gt;C:\\hadoop\\hdfstmp&lt;/value&gt; \r\n&lt;/property&gt; \r\n&lt;/configuration&gt; \r\n```\r\n`hdfs-site.xml`\r\n```\r\n&lt;configuration&gt; \r\n&lt;property&gt; \r\n&lt;name&gt;dfs.replication&lt;/name&gt; \r\n&lt;value&gt;1&lt;/value&gt; \r\n&lt;/property&gt; \r\n&lt;property&gt; \r\n&lt;name&gt;dfs.namenode.name.dir&lt;/name&gt; \r\n&lt;value&gt;C:\\hadoop\\data\\namenode&lt;/value&gt; \r\n&lt;/property&gt; \r\n&lt;property&gt; \r\n&lt;name&gt;dfs.datanode.data.dir&lt;/name&gt; \r\n&lt;value&gt;C:\\hadoop\\data\\datanode&lt;/value&gt; \r\n&lt;/property&gt; \r\n&lt;property&gt; \r\n&lt;name&gt;dfs.datanode.failed.volumes.tolerated&lt;/name&gt; \r\n&lt;value&gt;0&lt;/value&gt; \r\n&lt;/property&gt; \r\n&lt;/configuration&gt;\r\n```\r\n\r\nOutput of `jps`:\r\n```\r\n16832 NodeManager \r\n5556 ResourceManager \r\n18280 NameNode \r\n11708 Jps\r\n```\r\n\r\n`datanode` error log:\r\n```\r\n2020-04-04 21:42:25,150 WARN common.Storage: Failed to add storage directory [DISK]file:/C:/hadoop/data/datanode\r\njava.io.IOException: Incompatible clusterIDs in C:\\hadoop\\data\\datanode: namenode clusterID = CID-199fd5c5-1f1d-4c44-9e39-80995486695e; datanode clusterID = CID-16d0af22-57e1-4531-a5c8-4bf3eefd351d\r\n        at org.apache.hadoop.hdfs.server.datanode.DataStorage.doTransition(DataStorage.java:744)\r\n        at org.apache.hadoop.hdfs.server.datanode.DataStorage.loadStorageDirectory(DataStorage.java:294)\r\n        at org.apache.hadoop.hdfs.server.datanode.DataStorage.loadDataStorage(DataStorage.java:407)\r\n        at org.apache.hadoop.hdfs.server.datanode.DataStorage.addStorageLocations(DataStorage.java:387)\r\n        at org.apache.hadoop.hdfs.server.datanode.DataStorage.recoverTransitionRead(DataStorage.java:559)\r\n        at org.apache.hadoop.hdfs.server.datanode.DataNode.initStorage(DataNode.java:1743)\r\n        at org.apache.hadoop.hdfs.server.datanode.DataNode.initBlockPool(DataNode.java:1679)\r\n        at org.apache.hadoop.hdfs.server.datanode.BPOfferService.verifyAndSetNamespaceInfo(BPOfferService.java:390)\r\n        at org.apache.hadoop.hdfs.server.datanode.BPServiceActor.connectToNNAndHandshake(BPServiceActor.java:282)\r\n        at org.apache.hadoop.hdfs.server.datanode.BPServiceActor.run(BPServiceActor.java:822)\r\n        at java.lang.Thread.run(Thread.java:748)\r\n2020-04-04 21:42:25,156 ERROR datanode.DataNode: Initialization failed for Block pool &lt;registering&gt; (Datanode Uuid 7578b7ba-c42a-476b-abc2-2088b15b3474) service to localhost/127.0.0.1:9000. Exiting.\r\njava.io.IOException: All specified directories have failed to load.\r\n        at org.apache.hadoop.hdfs.server.datanode.DataStorage.recoverTransitionRead(DataStorage.java:560)\r\n        at org.apache.hadoop.hdfs.server.datanode.DataNode.initStorage(DataNode.java:1743)\r\n        at org.apache.hadoop.hdfs.server.datanode.DataNode.initBlockPool(DataNode.java:1679)\r\n        at org.apache.hadoop.hdfs.server.datanode.BPOfferService.verifyAndSetNamespaceInfo(BPOfferService.java:390)\r\n        at org.apache.hadoop.hdfs.server.datanode.BPServiceActor.connectToNNAndHandshake(BPServiceActor.java:282)\r\n        at org.apache.hadoop.hdfs.server.datanode.BPServiceActor.run(BPServiceActor.java:822)\r\n        at java.lang.Thread.run(Thread.java:748)\r\n2020-04-04 21:42:25,158 WARN datanode.DataNode: Ending block pool service for: Block pool &lt;registering&gt; (Datanode Uuid 7578b7ba-c42a-476b-abc2-2088b15b3474) service to localhost/127.0.0.1:9000\r\n2020-04-04 21:42:25,261 INFO datanode.DataNode: Removed Block pool &lt;registering&gt; (Datanode Uuid 7578b7ba-c42a-476b-abc2-2088b15b3474)\r\n2020-04-04 21:42:27,274 WARN datanode.DataNode: Exiting Datanode\r\n```","title":"Exception in thread &quot;main&quot; org.apache.hadoop.ipc.RemoteException(java.io.IOException) for hadoop 3.1.3","body":"<p>I am trying to run a mapreduce job but I am getting error for Hadoop-3.1.3 </p>\n\n<pre><code>hadoop jar WordCount.jar WordcountDemo.WordCount  /mapwork/Mapwork /r_out\n</code></pre>\n\n<p><strong>Error</strong></p>\n\n<pre><code>2020-04-04 19:59:11,379 INFO client.RMProxy: Connecting to ResourceManager at /0.0.0.0:8032\n2020-04-04 19:59:12,499 WARN mapreduce.JobResourceUploader: Hadoop command-line option parsing not performed. Implement the Tool interface and execute your application with ToolRunner to remedy this.\n2020-04-04 19:59:12,569 INFO mapreduce.JobResourceUploader: Disabling Erasure Coding for path: /tmp/hadoop-yarn/staging/tejashri/.staging/job_1586009643433_0007\n2020-04-04 19:59:12,727 WARN hdfs.DataStreamer: DataStreamer Exception\norg.apache.hadoop.ipc.RemoteException(java.io.IOException): File /tmp/hadoop-yarn/staging/tejashri/.staging/job_1586009643433_0007/job.jar could only be written to 0 of the 1 minReplication nodes. There are 0 datanode(s) running and 0 node(s) are excluded in this operation.\n        at org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.chooseTarget4NewBlock(BlockManager.java:2205)\n        at org.apache.hadoop.hdfs.server.namenode.FSDirWriteFileOp.chooseTargetForNewBlock(FSDirWriteFileOp.java:294)\n        at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:2731)\n        at org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.addBlock(NameNodeRpcServer.java:892)\n        at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.addBlock(ClientNamenodeProtocolServerSideTranslatorPB.java:568)\n        at org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java)\n        at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:527)\n        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1036)\n        at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1000)\n        at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:928)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at javax.security.auth.Subject.doAs(Subject.java:422)\n        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1729)\n        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2916)\n\n        at org.apache.hadoop.ipc.Client.getRpcResponse(Client.java:1545)\n        at org.apache.hadoop.ipc.Client.call(Client.java:1491)\n        at org.apache.hadoop.ipc.Client.call(Client.java:1388)\n        at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:233)\n        at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:118)\n        at com.sun.proxy.$Proxy9.addBlock(Unknown Source)\n        at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolTranslatorPB.addBlock(ClientNamenodeProtocolTranslatorPB.java:514)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:422)\n        at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeMethod(RetryInvocationHandler.java:165)\n        at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invoke(RetryInvocationHandler.java:157)\n        at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeOnce(RetryInvocationHandler.java:95)\n        at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:359)\n        at com.sun.proxy.$Proxy10.addBlock(Unknown Source)\n        at org.apache.hadoop.hdfs.DFSOutputStream.addBlock(DFSOutputStream.java:1081)\n        at org.apache.hadoop.hdfs.DataStreamer.locateFollowingBlock(DataStreamer.java:1866)\n        at org.apache.hadoop.hdfs.DataStreamer.nextBlockOutputStream(DataStreamer.java:1668)\n        at org.apache.hadoop.hdfs.DataStreamer.run(DataStreamer.java:716)\n2020-04-04 19:59:12,734 INFO mapreduce.JobSubmitter: Cleaning up the staging area /tmp/hadoop-yarn/staging/tejashri/.staging/job_1586009643433_0007\nException in thread \"main\" org.apache.hadoop.ipc.RemoteException(java.io.IOException): File /tmp/hadoop-yarn/staging/tejashri/.staging/job_1586009643433_0007/job.jar could only be written to 0 of the 1 minReplication nodes. There are 0 datanode(s) running and 0 node(s) are excluded in this operation.\n        at org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.chooseTarget4NewBlock(BlockManager.java:2205)\n        at org.apache.hadoop.hdfs.server.namenode.FSDirWriteFileOp.chooseTargetForNewBlock(FSDirWriteFileOp.java:294)\n        at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:2731)\n        at org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.addBlock(NameNodeRpcServer.java:892)\n        at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.addBlock(ClientNamenodeProtocolServerSideTranslatorPB.java:568)\n        at org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java)\n        at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:527)\n        at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1036)\n        at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1000)\n        at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:928)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at javax.security.auth.Subject.doAs(Subject.java:422)\n        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1729)\n        at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2916)\n\n        at org.apache.hadoop.ipc.Client.getRpcResponse(Client.java:1545)\n        at org.apache.hadoop.ipc.Client.call(Client.java:1491)\n        at org.apache.hadoop.ipc.Client.call(Client.java:1388)\n        at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:233)\n        at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:118)\n        at com.sun.proxy.$Proxy9.addBlock(Unknown Source)\n        at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolTranslatorPB.addBlock(ClientNamenodeProtocolTranslatorPB.java:514)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:422)\n        at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeMethod(RetryInvocationHandler.java:165)\n        at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invoke(RetryInvocationHandler.java:157)\n        at org.apache.hadoop.io.retry.RetryInvocationHandler$Call.invokeOnce(RetryInvocationHandler.java:95)\n        at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:359)\n        at com.sun.proxy.$Proxy10.addBlock(Unknown Source)\n        at org.apache.hadoop.hdfs.DFSOutputStream.addBlock(DFSOutputStream.java:1081)\n        at org.apache.hadoop.hdfs.DataStreamer.locateFollowingBlock(DataStreamer.java:1866)\n        at org.apache.hadoop.hdfs.DataStreamer.nextBlockOutputStream(DataStreamer.java:1668)\n        at org.apache.hadoop.hdfs.DataStreamer.run(DataStreamer.java:716)\n</code></pre>\n\n<p><strong>Update</strong> (from comments):</p>\n\n<p><code>core-site.xml</code></p>\n\n<pre><code>&lt;configuration&gt; \n&lt;property&gt; \n&lt;name&gt;fs.default.name&lt;/name&gt; \n&lt;value&gt;hdfs://localhost:9000&lt;/value&gt; \n&lt;/property&gt; \n&lt;property&gt; \n&lt;name&gt;hadoop.tmp.dir&lt;/name&gt; \n&lt;value&gt;C:\\hadoop\\hdfstmp&lt;/value&gt; \n&lt;/property&gt; \n&lt;/configuration&gt; \n</code></pre>\n\n<p><code>hdfs-site.xml</code></p>\n\n<pre><code>&lt;configuration&gt; \n&lt;property&gt; \n&lt;name&gt;dfs.replication&lt;/name&gt; \n&lt;value&gt;1&lt;/value&gt; \n&lt;/property&gt; \n&lt;property&gt; \n&lt;name&gt;dfs.namenode.name.dir&lt;/name&gt; \n&lt;value&gt;C:\\hadoop\\data\\namenode&lt;/value&gt; \n&lt;/property&gt; \n&lt;property&gt; \n&lt;name&gt;dfs.datanode.data.dir&lt;/name&gt; \n&lt;value&gt;C:\\hadoop\\data\\datanode&lt;/value&gt; \n&lt;/property&gt; \n&lt;property&gt; \n&lt;name&gt;dfs.datanode.failed.volumes.tolerated&lt;/name&gt; \n&lt;value&gt;0&lt;/value&gt; \n&lt;/property&gt; \n&lt;/configuration&gt;\n</code></pre>\n\n<p>Output of <code>jps</code>:</p>\n\n<pre><code>16832 NodeManager \n5556 ResourceManager \n18280 NameNode \n11708 Jps\n</code></pre>\n\n<p><code>datanode</code> error log:</p>\n\n<pre><code>2020-04-04 21:42:25,150 WARN common.Storage: Failed to add storage directory [DISK]file:/C:/hadoop/data/datanode\njava.io.IOException: Incompatible clusterIDs in C:\\hadoop\\data\\datanode: namenode clusterID = CID-199fd5c5-1f1d-4c44-9e39-80995486695e; datanode clusterID = CID-16d0af22-57e1-4531-a5c8-4bf3eefd351d\n        at org.apache.hadoop.hdfs.server.datanode.DataStorage.doTransition(DataStorage.java:744)\n        at org.apache.hadoop.hdfs.server.datanode.DataStorage.loadStorageDirectory(DataStorage.java:294)\n        at org.apache.hadoop.hdfs.server.datanode.DataStorage.loadDataStorage(DataStorage.java:407)\n        at org.apache.hadoop.hdfs.server.datanode.DataStorage.addStorageLocations(DataStorage.java:387)\n        at org.apache.hadoop.hdfs.server.datanode.DataStorage.recoverTransitionRead(DataStorage.java:559)\n        at org.apache.hadoop.hdfs.server.datanode.DataNode.initStorage(DataNode.java:1743)\n        at org.apache.hadoop.hdfs.server.datanode.DataNode.initBlockPool(DataNode.java:1679)\n        at org.apache.hadoop.hdfs.server.datanode.BPOfferService.verifyAndSetNamespaceInfo(BPOfferService.java:390)\n        at org.apache.hadoop.hdfs.server.datanode.BPServiceActor.connectToNNAndHandshake(BPServiceActor.java:282)\n        at org.apache.hadoop.hdfs.server.datanode.BPServiceActor.run(BPServiceActor.java:822)\n        at java.lang.Thread.run(Thread.java:748)\n2020-04-04 21:42:25,156 ERROR datanode.DataNode: Initialization failed for Block pool &lt;registering&gt; (Datanode Uuid 7578b7ba-c42a-476b-abc2-2088b15b3474) service to localhost/127.0.0.1:9000. Exiting.\njava.io.IOException: All specified directories have failed to load.\n        at org.apache.hadoop.hdfs.server.datanode.DataStorage.recoverTransitionRead(DataStorage.java:560)\n        at org.apache.hadoop.hdfs.server.datanode.DataNode.initStorage(DataNode.java:1743)\n        at org.apache.hadoop.hdfs.server.datanode.DataNode.initBlockPool(DataNode.java:1679)\n        at org.apache.hadoop.hdfs.server.datanode.BPOfferService.verifyAndSetNamespaceInfo(BPOfferService.java:390)\n        at org.apache.hadoop.hdfs.server.datanode.BPServiceActor.connectToNNAndHandshake(BPServiceActor.java:282)\n        at org.apache.hadoop.hdfs.server.datanode.BPServiceActor.run(BPServiceActor.java:822)\n        at java.lang.Thread.run(Thread.java:748)\n2020-04-04 21:42:25,158 WARN datanode.DataNode: Ending block pool service for: Block pool &lt;registering&gt; (Datanode Uuid 7578b7ba-c42a-476b-abc2-2088b15b3474) service to localhost/127.0.0.1:9000\n2020-04-04 21:42:25,261 INFO datanode.DataNode: Removed Block pool &lt;registering&gt; (Datanode Uuid 7578b7ba-c42a-476b-abc2-2088b15b3474)\n2020-04-04 21:42:27,274 WARN datanode.DataNode: Exiting Datanode\n</code></pre>\n"},{"tags":["java","memory-mapped-files"],"comments":[{"owner":{"account_id":98784,"reputation":10491,"user_id":267197,"accept_rate":68,"display_name":"dma_k"},"score":2,"creation_date":1337178946,"post_id":2972986,"comment_id":13763860,"body_markdown":"I hit the same problem painfully. In my case I was trying to map thousands of files into the memory and it results `OutOfMemoryError`, which I believe is the result of exhausted file handlers. Having no instrument to unmap leads to unpredictive behaviour, even though map will try to `sleep(100)` &amp; `System.gc()` on `OutOfMemoryError` − it just postpones the convulsions.","body":"I hit the same problem painfully. In my case I was trying to map thousands of files into the memory and it results <code>OutOfMemoryError</code>, which I believe is the result of exhausted file handlers. Having no instrument to unmap leads to unpredictive behaviour, even though map will try to <code>sleep(100)</code> &amp; <code>System.gc()</code> on <code>OutOfMemoryError</code> − it just postpones the convulsions."}],"answers":[{"tags":[],"owner":{"account_id":38846,"reputation":29745,"user_id":111777,"accept_rate":82,"display_name":"Edward Dale"},"down_vote_count":1,"up_vote_count":16,"is_accepted":true,"score":15,"last_activity_date":1275645493,"creation_date":1275645493,"answer_id":2973059,"question_id":2972986,"body_markdown":"From the `MappedByteBuffer` javadoc:\r\n\r\n&gt;  A mapped byte buffer and the file mapping that it represents remain valid until the buffer itself is garbage-collected. \r\n\r\nTry calling `System.gc()`? Even that&#39;s only a suggestion to the VM.\r\n\r\n","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>From the <code>MappedByteBuffer</code> javadoc:</p>\n\n<blockquote>\n  <p>A mapped byte buffer and the file mapping that it represents remain valid until the buffer itself is garbage-collected. </p>\n</blockquote>\n\n<p>Try calling <code>System.gc()</code>? Even that's only a suggestion to the VM.</p>\n"},{"tags":[],"owner":{"account_id":18922,"reputation":4064,"user_id":43850,"accept_rate":100,"display_name":"BenM"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1275645546,"creation_date":1275645546,"answer_id":2973068,"question_id":2972986,"body_markdown":"The mapped memory is used until it is freed by the garbage collector.\r\n\r\nFrom [FileChannel][1] docs\r\n\r\n&gt; A mapping, once established, is not dependent upon the file channel that was used to create it. Closing the channel, in particular, has no effect upon the validity of the mapping.\r\n\r\nFrom [MappedByteBuffer][2] java doc\r\n\r\n&gt; A mapped byte buffer and the file mapping that it represents remain valid until the buffer itself is garbage-collected.\r\n\r\nSo I would suggest ensuring there are no remaining references to the mapped byte buffer and then requesting a garbage collection.\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/nio/channels/FileChannel.html\r\n  [2]: http://java.sun.com/javase/6/docs/api/java/nio/MappedByteBuffer.html","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>The mapped memory is used until it is freed by the garbage collector.</p>\n\n<p>From <a href=\"http://java.sun.com/javase/6/docs/api/java/nio/channels/FileChannel.html\" rel=\"nofollow noreferrer\">FileChannel</a> docs</p>\n\n<blockquote>\n  <p>A mapping, once established, is not dependent upon the file channel that was used to create it. Closing the channel, in particular, has no effect upon the validity of the mapping.</p>\n</blockquote>\n\n<p>From <a href=\"http://java.sun.com/javase/6/docs/api/java/nio/MappedByteBuffer.html\" rel=\"nofollow noreferrer\">MappedByteBuffer</a> java doc</p>\n\n<blockquote>\n  <p>A mapped byte buffer and the file mapping that it represents remain valid until the buffer itself is garbage-collected.</p>\n</blockquote>\n\n<p>So I would suggest ensuring there are no remaining references to the mapped byte buffer and then requesting a garbage collection.</p>\n"},{"tags":[],"owner":{"account_id":210105,"reputation":673,"user_id":461529,"display_name":"Timur Yusupov"},"down_vote_count":1,"up_vote_count":39,"is_accepted":false,"score":38,"last_activity_date":1477341107,"creation_date":1297985159,"answer_id":5036003,"question_id":2972986,"body_markdown":"Following static method could be used:\r\n\r\n    public static void unmap(MappedByteBuffer buffer)\r\n    {\r\n       sun.misc.Cleaner cleaner = ((DirectBuffer) buffer).cleaner();\r\n       cleaner.clean();\r\n    }\r\n\r\nBut this is unsafe solution because of following:  \r\n1) Lead to failures if someone use MappedByteBuffer after unmap  \r\n2) It relies on MappedByteBuffer implementation details  ","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>Following static method could be used:</p>\n\n<pre><code>public static void unmap(MappedByteBuffer buffer)\n{\n   sun.misc.Cleaner cleaner = ((DirectBuffer) buffer).cleaner();\n   cleaner.clean();\n}\n</code></pre>\n\n<p>But this is unsafe solution because of following:<br>\n1) Lead to failures if someone use MappedByteBuffer after unmap<br>\n2) It relies on MappedByteBuffer implementation details  </p>\n"},{"tags":[],"owner":{"account_id":358460,"reputation":5078,"user_id":699240,"display_name":"Mr Ed"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1326964935,"creation_date":1326964935,"answer_id":8923594,"question_id":2972986,"body_markdown":"To work around this bug in Java, I had to do the following, which will work ok for small to medium-sized files:\r\n\r\n        // first open the file for random access\r\n        RandomAccessFile raf = new RandomAccessFile(file, &quot;r&quot;);\r\n\r\n        // extract a file channel\r\n        FileChannel channel = raf.getChannel();\r\n\r\n        // you can memory-map a byte-buffer, but it keeps the file locked\r\n        //ByteBuffer buf =\r\n        //        channel.map(FileChannel.MapMode.READ_ONLY, 0, channel.size());\r\n\r\n        // or, since map locks the file... just read the whole file into memory\r\n        ByteBuffer buf = ByteBuffer.allocate((int)file.length());\r\n        int read = channel.read(buf);\r\n\r\n        // .... do something with buf\r\n\r\n        channel.force(false);  // doesn&#39;t help\r\n        channel.close();       // doesn&#39;t help\r\n        channel = null;        // doesn&#39;t help\r\n        buf = null;            // doesn&#39;t help\r\n        raf.close();           // try to make sure that this thing is closed!!!!!\r\n","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>To work around this bug in Java, I had to do the following, which will work ok for small to medium-sized files:</p>\n\n<pre><code>    // first open the file for random access\n    RandomAccessFile raf = new RandomAccessFile(file, \"r\");\n\n    // extract a file channel\n    FileChannel channel = raf.getChannel();\n\n    // you can memory-map a byte-buffer, but it keeps the file locked\n    //ByteBuffer buf =\n    //        channel.map(FileChannel.MapMode.READ_ONLY, 0, channel.size());\n\n    // or, since map locks the file... just read the whole file into memory\n    ByteBuffer buf = ByteBuffer.allocate((int)file.length());\n    int read = channel.read(buf);\n\n    // .... do something with buf\n\n    channel.force(false);  // doesn't help\n    channel.close();       // doesn't help\n    channel = null;        // doesn't help\n    buf = null;            // doesn't help\n    raf.close();           // try to make sure that this thing is closed!!!!!\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3122394,"reputation":1,"user_id":2641917,"display_name":"somedude"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1375357496,"creation_date":1375357496,"answer_id":17993147,"question_id":2972986,"body_markdown":"If the mapped file buffer object can be guaranteed to be eligible for garbage collection, you don&#39;t need to GC the whole VM to get the buffer&#39;s mapped memory to be released. You can call System.runFinalization() .  This will call the finalize() method on the mapped file buffer object (if it there are no references to it in your app threads) which will release the mapped memory.\r\n","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>If the mapped file buffer object can be guaranteed to be eligible for garbage collection, you don't need to GC the whole VM to get the buffer's mapped memory to be released. You can call System.runFinalization() .  This will call the finalize() method on the mapped file buffer object (if it there are no references to it in your app threads) which will release the mapped memory.</p>\n"},{"tags":[],"owner":{"account_id":327698,"reputation":5680,"user_id":650228,"accept_rate":78,"display_name":"kittylyst"},"down_vote_count":15,"up_vote_count":2,"is_accepted":false,"score":-13,"last_activity_date":1375714564,"creation_date":1375714564,"answer_id":18061291,"question_id":2972986,"body_markdown":"The correct solution here is to use try-with-resources. \r\n\r\nThis allows the creation of the Channel &amp; the other resources to be scoped to a block. Once the block exits, the Channel &amp; other resources are gone &amp; subsequently cannot be used (as nothing has a reference to them). \r\n\r\nThe memory-mapping still won&#39;t be undone until the next GC run, but at least there aren&#39;t any dangling references to it.","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>The correct solution here is to use try-with-resources. </p>\n\n<p>This allows the creation of the Channel &amp; the other resources to be scoped to a block. Once the block exits, the Channel &amp; other resources are gone &amp; subsequently cannot be used (as nothing has a reference to them). </p>\n\n<p>The memory-mapping still won't be undone until the next GC run, but at least there aren't any dangling references to it.</p>\n"},{"tags":[],"owner":{"account_id":62450,"reputation":10263,"user_id":185565,"accept_rate":91,"display_name":"Whome"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1546682199,"creation_date":1382093176,"answer_id":19447758,"question_id":2972986,"body_markdown":"[WinXP,SunJDK1.6] I had a mapped ByteBuffer taken from filechannel. After reading SO posts finally managed to call a cleaner through reflection without any sun.* package imports. No longer file lock is lingering.\r\n\r\n**edit** Added JDK9+ code(Luke Hutchison).\r\n\r\n\r\n\tprivate static void closeDirectBuffer(ByteBuffer cb) {\r\n\t\tif (cb==null || !cb.isDirect()) return;\r\n\t\t// we could use this type cast and call functions without reflection code,\r\n\t\t// but static import from sun.* package is risky for non-SUN virtual machine.\r\n\t\t//try { ((sun.nio.ch.DirectBuffer)cb).cleaner().clean(); } catch (Exception ex) { }\r\n\r\n\t\t// JavaSpecVer: 1.6, 1.7, 1.8, 9, 10\r\n\t\tboolean isOldJDK = System.getProperty(&quot;java.specification.version&quot;,&quot;99&quot;).startsWith(&quot;1.&quot;);\t\r\n\t\ttry {\r\n\t\t\tif (isOldJDK) {\r\n\t\t\t\tMethod cleaner = cb.getClass().getMethod(&quot;cleaner&quot;);\r\n\t\t\t\tcleaner.setAccessible(true);\r\n\t\t\t\tMethod clean = Class.forName(&quot;sun.misc.Cleaner&quot;).getMethod(&quot;clean&quot;);\r\n\t\t\t\tclean.setAccessible(true);\r\n\t\t\t\tclean.invoke(cleaner.invoke(cb));\r\n\t\t\t} else {\r\n\t\t\t\tClass unsafeClass;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tunsafeClass = Class.forName(&quot;sun.misc.Unsafe&quot;);\r\n\t\t\t\t} catch(Exception ex) {\r\n\t\t\t\t\t// jdk.internal.misc.Unsafe doesn&#39;t yet have an invokeCleaner() method,\r\n\t\t\t\t\t// but that method should be added if sun.misc.Unsafe is removed.\r\n\t\t\t\t\tunsafeClass = Class.forName(&quot;jdk.internal.misc.Unsafe&quot;);\r\n\t\t\t\t}\r\n\t\t\t\tMethod clean = unsafeClass.getMethod(&quot;invokeCleaner&quot;, ByteBuffer.class);\r\n\t\t\t\tclean.setAccessible(true);\r\n\t\t\t\tField theUnsafeField = unsafeClass.getDeclaredField(&quot;theUnsafe&quot;);\r\n\t\t\t\ttheUnsafeField.setAccessible(true);\r\n\t\t\t\tObject theUnsafe = theUnsafeField.get(null);\r\n\t\t\t\tclean.invoke(theUnsafe, cb);\r\n\t\t\t}\r\n\t\t} catch(Exception ex) { }\r\n\t\tcb = null;\r\n\t}\r\n\r\n\r\n\r\nIdeas were taken from these posts.&lt;br/&gt;\r\n* https://stackoverflow.com/questions/2972986/how-to-unmap-a-file-from-memory-mapped-using-filechannel-in-java &lt;br/&gt;\r\n* https://stackoverflow.com/questions/8462200/examples-of-forcing-freeing-of-native-memory-direct-bytebuffer-has-allocated-us &lt;br/&gt;\r\n* https://github.com/elasticsearch/elasticsearch/blob/master/src/main/java/org/apache/lucene/store/bytebuffer/ByteBufferAllocator.java#L40 &lt;br/&gt;\r\n","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>[WinXP,SunJDK1.6] I had a mapped ByteBuffer taken from filechannel. After reading SO posts finally managed to call a cleaner through reflection without any sun.* package imports. No longer file lock is lingering.</p>\n\n<p><strong>edit</strong> Added JDK9+ code(Luke Hutchison).</p>\n\n<pre><code>private static void closeDirectBuffer(ByteBuffer cb) {\n    if (cb==null || !cb.isDirect()) return;\n    // we could use this type cast and call functions without reflection code,\n    // but static import from sun.* package is risky for non-SUN virtual machine.\n    //try { ((sun.nio.ch.DirectBuffer)cb).cleaner().clean(); } catch (Exception ex) { }\n\n    // JavaSpecVer: 1.6, 1.7, 1.8, 9, 10\n    boolean isOldJDK = System.getProperty(\"java.specification.version\",\"99\").startsWith(\"1.\");  \n    try {\n        if (isOldJDK) {\n            Method cleaner = cb.getClass().getMethod(\"cleaner\");\n            cleaner.setAccessible(true);\n            Method clean = Class.forName(\"sun.misc.Cleaner\").getMethod(\"clean\");\n            clean.setAccessible(true);\n            clean.invoke(cleaner.invoke(cb));\n        } else {\n            Class unsafeClass;\n            try {\n                unsafeClass = Class.forName(\"sun.misc.Unsafe\");\n            } catch(Exception ex) {\n                // jdk.internal.misc.Unsafe doesn't yet have an invokeCleaner() method,\n                // but that method should be added if sun.misc.Unsafe is removed.\n                unsafeClass = Class.forName(\"jdk.internal.misc.Unsafe\");\n            }\n            Method clean = unsafeClass.getMethod(\"invokeCleaner\", ByteBuffer.class);\n            clean.setAccessible(true);\n            Field theUnsafeField = unsafeClass.getDeclaredField(\"theUnsafe\");\n            theUnsafeField.setAccessible(true);\n            Object theUnsafe = theUnsafeField.get(null);\n            clean.invoke(theUnsafe, cb);\n        }\n    } catch(Exception ex) { }\n    cb = null;\n}\n</code></pre>\n\n<p>Ideas were taken from these posts.<br/>\n* <a href=\"https://stackoverflow.com/questions/2972986/how-to-unmap-a-file-from-memory-mapped-using-filechannel-in-java\">How to unmap a file from memory mapped using FileChannel in java?</a> <br/>\n* <a href=\"https://stackoverflow.com/questions/8462200/examples-of-forcing-freeing-of-native-memory-direct-bytebuffer-has-allocated-us\">Examples of forcing freeing of native memory direct ByteBuffer has allocated, using sun.misc.Unsafe?</a> <br/>\n* <a href=\"https://github.com/elasticsearch/elasticsearch/blob/master/src/main/java/org/apache/lucene/store/bytebuffer/ByteBufferAllocator.java#L40\" rel=\"noreferrer\">https://github.com/elasticsearch/elasticsearch/blob/master/src/main/java/org/apache/lucene/store/bytebuffer/ByteBufferAllocator.java#L40</a> <br/></p>\n"},{"tags":[],"owner":{"account_id":2868895,"reputation":299,"user_id":2462633,"display_name":"Dmytro Voloshyn"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1437668514,"creation_date":1437668514,"answer_id":31592947,"question_id":2972986,"body_markdown":"sun.misc.Cleaner javadoc says:\r\n&gt; General-purpose phantom-reference-based cleaners. \r\nCleaners are a lightweight and more robust alternative to finalization. They are lightweight because they are not created by the VM and thus do not require a JNI upcall to be created, and because their cleanup code is invoked directly by the reference-handler thread rather than by the finalizer thread. They are more robust because they use phantom references, the weakest type of reference object, thereby avoiding the nasty ordering problems inherent to finalization. \r\nA cleaner tracks a referent object and encapsulates a thunk of arbitrary cleanup code. Some time after the GC detects that a cleaner&#39;s referent has become phantom-reachable, the reference-handler thread will run the cleaner. Cleaners may also be invoked directly; they are thread safe and ensure that they run their thunks at most once. \r\nCleaners are not a replacement for finalization. They should be used only when the cleanup code is extremely simple and straightforward. Nontrivial cleaners are inadvisable since they risk blocking the reference-handler thread and delaying further cleanup and finalization. \r\n\r\nRunning System.gc() is acceptable solution if your buffers total size is small, but if I was mapping gigabytes of files I would try to implement like this:\r\n\r\n    ((DirectBuffer) buffer).cleaner().clean()\r\n\r\nBut! Make sure you don&#39;t access that buffer after cleaning or you will end up with:\r\n\r\n&gt; A fatal error has been detected by the Java Runtime Environment: EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x0000000002bcf700,\r\n&gt; pid=7592, tid=10184 JRE version: Java(TM) SE Runtime Environment\r\n&gt; (8.0_40-b25) (build 1.8.0_40-b25) Java VM: Java HotSpot(TM) 64-Bit\r\n&gt; Server VM (25.40-b25 mixed mode windows-amd64 compressed oops)\r\n&gt; Problematic frame: J 85 C2 java.nio.DirectByteBuffer.get(I)B (16\r\n&gt; bytes) @ 0x0000000002bcf700 [0x0000000002bcf6c0+0x40] Failed to write\r\n&gt; core dump. Minidumps are not enabled by default on client versions of\r\n&gt; Windows An error report file with more information is saved as:\r\n&gt; C:\\Users\\?????\\Programs\\testApp\\hs_err_pid7592.log Compiled method\r\n&gt; (c2)   42392   85       4       java.nio.DirectByteBuffer::get (16\r\n&gt; bytes)  total in heap  [0x0000000002bcf590,0x0000000002bcf828] = 664 \r\n&gt; relocation     [0x0000000002bcf6b0,0x0000000002bcf6c0] = 16  main code\r\n&gt; [0x0000000002bcf6c0,0x0000000002bcf760] = 160  stub code     \r\n&gt; [0x0000000002bcf760,0x0000000002bcf778] = 24  oops          \r\n&gt; [0x0000000002bcf778,0x0000000002bcf780] = 8  metadata      \r\n&gt; [0x0000000002bcf780,0x0000000002bcf798] = 24  scopes data   \r\n&gt; [0x0000000002bcf798,0x0000000002bcf7e0] = 72  scopes pcs    \r\n&gt; [0x0000000002bcf7e0,0x0000000002bcf820] = 64  dependencies  \r\n&gt; [0x0000000002bcf820,0x0000000002bcf828] = 8\r\n\r\nGood luck!","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>sun.misc.Cleaner javadoc says:</p>\n\n<blockquote>\n  <p>General-purpose phantom-reference-based cleaners. \n  Cleaners are a lightweight and more robust alternative to finalization. They are lightweight because they are not created by the VM and thus do not require a JNI upcall to be created, and because their cleanup code is invoked directly by the reference-handler thread rather than by the finalizer thread. They are more robust because they use phantom references, the weakest type of reference object, thereby avoiding the nasty ordering problems inherent to finalization. \n  A cleaner tracks a referent object and encapsulates a thunk of arbitrary cleanup code. Some time after the GC detects that a cleaner's referent has become phantom-reachable, the reference-handler thread will run the cleaner. Cleaners may also be invoked directly; they are thread safe and ensure that they run their thunks at most once. \n  Cleaners are not a replacement for finalization. They should be used only when the cleanup code is extremely simple and straightforward. Nontrivial cleaners are inadvisable since they risk blocking the reference-handler thread and delaying further cleanup and finalization. </p>\n</blockquote>\n\n<p>Running System.gc() is acceptable solution if your buffers total size is small, but if I was mapping gigabytes of files I would try to implement like this:</p>\n\n<pre><code>((DirectBuffer) buffer).cleaner().clean()\n</code></pre>\n\n<p>But! Make sure you don't access that buffer after cleaning or you will end up with:</p>\n\n<blockquote>\n  <p>A fatal error has been detected by the Java Runtime Environment: EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x0000000002bcf700,\n  pid=7592, tid=10184 JRE version: Java(TM) SE Runtime Environment\n  (8.0_40-b25) (build 1.8.0_40-b25) Java VM: Java HotSpot(TM) 64-Bit\n  Server VM (25.40-b25 mixed mode windows-amd64 compressed oops)\n  Problematic frame: J 85 C2 java.nio.DirectByteBuffer.get(I)B (16\n  bytes) @ 0x0000000002bcf700 [0x0000000002bcf6c0+0x40] Failed to write\n  core dump. Minidumps are not enabled by default on client versions of\n  Windows An error report file with more information is saved as:\n  C:\\Users\\?????\\Programs\\testApp\\hs_err_pid7592.log Compiled method\n  (c2)   42392   85       4       java.nio.DirectByteBuffer::get (16\n  bytes)  total in heap  [0x0000000002bcf590,0x0000000002bcf828] = 664 \n  relocation     [0x0000000002bcf6b0,0x0000000002bcf6c0] = 16  main code\n  [0x0000000002bcf6c0,0x0000000002bcf760] = 160  stub code<br>\n  [0x0000000002bcf760,0x0000000002bcf778] = 24  oops<br>\n  [0x0000000002bcf778,0x0000000002bcf780] = 8  metadata<br>\n  [0x0000000002bcf780,0x0000000002bcf798] = 24  scopes data<br>\n  [0x0000000002bcf798,0x0000000002bcf7e0] = 72  scopes pcs<br>\n  [0x0000000002bcf7e0,0x0000000002bcf820] = 64  dependencies<br>\n  [0x0000000002bcf820,0x0000000002bcf828] = 8</p>\n</blockquote>\n\n<p>Good luck!</p>\n"},{"tags":[],"owner":{"account_id":10288467,"reputation":41,"user_id":7590921,"display_name":"饒夢楠"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1527084322,"creation_date":1494314409,"answer_id":43863563,"question_id":2972986,"body_markdown":"I found out information about `unmap`, it is a method of `FileChannelImpl` and not accessible, so you can invoke it by java reflect like: \r\n\r\n    public static void unMapBuffer(MappedByteBuffer buffer, Class channelClass) {\r\n        if (buffer == null) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            Method unmap = channelClass.getDeclaredMethod(&quot;unmap&quot;, MappedByteBuffer.class);\r\n            unmap.setAccessible(true);\r\n            unmap.invoke(channelClass, buffer);\r\n        } catch (NoSuchMethodException e) {\r\n            e.printStackTrace();\r\n        } catch (IllegalAccessException e) {\r\n            e.printStackTrace();\r\n        } catch (InvocationTargetException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>I found out information about <code>unmap</code>, it is a method of <code>FileChannelImpl</code> and not accessible, so you can invoke it by java reflect like: </p>\n\n<pre><code>public static void unMapBuffer(MappedByteBuffer buffer, Class channelClass) {\n    if (buffer == null) {\n        return;\n    }\n\n    try {\n        Method unmap = channelClass.getDeclaredMethod(\"unmap\", MappedByteBuffer.class);\n        unmap.setAccessible(true);\n        unmap.invoke(channelClass, buffer);\n    } catch (NoSuchMethodException e) {\n        e.printStackTrace();\n    } catch (IllegalAccessException e) {\n        e.printStackTrace();\n    } catch (InvocationTargetException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3348103,"reputation":923,"user_id":2812818,"accept_rate":20,"display_name":"Droid Teahouse"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1503532235,"creation_date":1503532235,"answer_id":45850877,"question_id":2972986,"body_markdown":" It is funny to see so many recommendations to do what Item 7 in &#39;Effective Java&#39; specifically says not to do.  A termination method like what @Whome did and no references to the buffer is what is needed. GC cannot be forced.\r\nBut that doesn&#39;t stop developers from trying.  Another workaround I found was to use WeakReferences from  http://jan.baresovi.cz/dr/en/java#memoryMap\r\n   \r\n\r\n    final MappedByteBuffer bb = fc.map(FileChannel.MapMode.READ_ONLY, 0, size);\r\n    ....\r\n    final WeakReference&lt;mappedbytebuffer&gt; bufferWeakRef = new WeakReference&lt;mappedbytebuffer&gt;(bb);\r\n    bb = null;\r\n     \r\n    final long startTime = System.currentTimeMillis();\r\n    while(null != bufferWeakRef.get()) {\r\n      if(System.currentTimeMillis() - startTime &gt; 10)\r\n    // give up\r\n        return;\r\n        System.gc();\r\n        Thread.yield();\r\n    }\r\n","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>It is funny to see so many recommendations to do what Item 7 in 'Effective Java' specifically says not to do.  A termination method like what @Whome did and no references to the buffer is what is needed. GC cannot be forced.\nBut that doesn't stop developers from trying.  Another workaround I found was to use WeakReferences from  <a href=\"http://jan.baresovi.cz/dr/en/java#memoryMap\" rel=\"nofollow noreferrer\">http://jan.baresovi.cz/dr/en/java#memoryMap</a></p>\n\n<pre><code>final MappedByteBuffer bb = fc.map(FileChannel.MapMode.READ_ONLY, 0, size);\n....\nfinal WeakReference&lt;mappedbytebuffer&gt; bufferWeakRef = new WeakReference&lt;mappedbytebuffer&gt;(bb);\nbb = null;\n\nfinal long startTime = System.currentTimeMillis();\nwhile(null != bufferWeakRef.get()) {\n  if(System.currentTimeMillis() - startTime &gt; 10)\n// give up\n    return;\n    System.gc();\n    Thread.yield();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2525327,"reputation":381,"user_id":4806428,"display_name":"martins"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1507790345,"creation_date":1507789876,"answer_id":46702886,"question_id":2972986,"body_markdown":"I would try JNI:\r\n\r\n    #ifdef _WIN32\r\n    UnmapViewOfFile(env-&gt;GetDirectBufferAddress(buffer));\r\n    #else\r\n    munmap(env-&gt;GetDirectBufferAddress(buffer), env-&gt;GetDirectBufferCapacity(buffer));\r\n    #endif\r\n\r\nInclude files: windows.h for Windows, sys/mmap.h for BSD, Linux, OSX.","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>I would try JNI:</p>\n\n<pre><code>#ifdef _WIN32\nUnmapViewOfFile(env-&gt;GetDirectBufferAddress(buffer));\n#else\nmunmap(env-&gt;GetDirectBufferAddress(buffer), env-&gt;GetDirectBufferCapacity(buffer));\n#endif\n</code></pre>\n\n<p>Include files: windows.h for Windows, sys/mmap.h for BSD, Linux, OSX.</p>\n"},{"tags":[],"owner":{"account_id":3683805,"reputation":8445,"user_id":3950982,"display_name":"Luke Hutchison"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1637097985,"creation_date":1546639575,"answer_id":54046774,"question_id":2972986,"body_markdown":"The method covered in other answers that employs `((DirectBuffer) byteBuffer).cleaner().clean()` doesn&#39;t work on JDK 9+ (even in reflective form) without displaying an `An illegal reflective access operation has occurred` warning. This will stop working altogether in some future JDK version. Fortunately `sun.misc.Unsafe.invokeCleaner(ByteBuffer)` can make that exact same call for you without the warning: (from OpenJDK 11 source):\r\n\r\n    public void invokeCleaner(java.nio.ByteBuffer directBuffer) {\r\n        if (!directBuffer.isDirect())\r\n            throw new IllegalArgumentException(&quot;buffer is non-direct&quot;);\r\n\r\n        DirectBuffer db = (DirectBuffer)directBuffer;\r\n        if (db.attachment() != null)\r\n            throw new IllegalArgumentException(&quot;duplicate or slice&quot;);\r\n\r\n        Cleaner cleaner = db.cleaner();\r\n        if (cleaner != null) {\r\n            cleaner.clean();\r\n        }\r\n    }\r\n\r\nBeing a `sun.misc` class, it will be removed at some point. Interestingly all calls but this one in `sun.misc.Unsafe` are proxied directly to `jdk.internal.misc.Unsafe`. I don&#39;t know why `invokeCleaner(ByteBuffer)` is not proxied in the same way as all the other methods -- it was probably omitted because there will be a new way to directly free memory references (including `DirectByteBuffer` instances) as of about JDK 15.\r\n\r\nI wrote the following code that is able to clean/close/unmap DirectByteBuffer/MappedByteBuffer instances on JDK 7/8, as well as JDK 9+, and this does not give the reflection warning:\r\n\r\n    private static boolean PRE_JAVA_9 = \r\n            System.getProperty(&quot;java.specification.version&quot;,&quot;9&quot;).startsWith(&quot;1.&quot;);\r\n\r\n    private static Method cleanMethod;\r\n    private static Method attachmentMethod;\r\n    private static Object theUnsafe;\r\n\r\n    static void getCleanMethodPrivileged() {\r\n        if (PRE_JAVA_9) {\r\n            try {\r\n                cleanMethod = Class.forName(&quot;sun.misc.Cleaner&quot;).getMethod(&quot;clean&quot;);\r\n                cleanMethod.setAccessible(true);\r\n                final Class&lt;?&gt; directByteBufferClass =\r\n                        Class.forName(&quot;sun.nio.ch.DirectBuffer&quot;);\r\n                attachmentMethod = directByteBufferClass.getMethod(&quot;attachment&quot;);\r\n                attachmentMethod.setAccessible(true);\r\n            } catch (final Exception ex) {\r\n            }\r\n        } else {\r\n            try {\r\n                Class&lt;?&gt; unsafeClass;\r\n                try {\r\n                    unsafeClass = Class.forName(&quot;sun.misc.Unsafe&quot;);\r\n                } catch (Exception e) {\r\n                    // jdk.internal.misc.Unsafe doesn&#39;t yet have invokeCleaner(),\r\n                    // but that method should be added if sun.misc.Unsafe is removed.\r\n                    unsafeClass = Class.forName(&quot;jdk.internal.misc.Unsafe&quot;);\r\n                }\r\n                cleanMethod = unsafeClass.getMethod(&quot;invokeCleaner&quot;, ByteBuffer.class);\r\n                cleanMethod.setAccessible(true);\r\n                final Field theUnsafeField = unsafeClass.getDeclaredField(&quot;theUnsafe&quot;);\r\n                theUnsafeField.setAccessible(true);\r\n                theUnsafe = theUnsafeField.get(null);\r\n            } catch (final Exception ex) {\r\n            }\r\n        }\r\n    }\r\n\r\n    static {\r\n        AccessController.doPrivileged(new PrivilegedAction&lt;Object&gt;() {\r\n            @Override\r\n            public Object run() {\r\n                getCleanMethodPrivileged();\r\n                return null;\r\n            }\r\n        });\r\n    }\r\n\r\n    private static boolean closeDirectByteBufferPrivileged(\r\n                final ByteBuffer byteBuffer, final LogNode log) {\r\n        try {\r\n            if (cleanMethod == null) {\r\n                if (log != null) {\r\n                    log.log(&quot;Could not unmap ByteBuffer, cleanMethod == null&quot;);\r\n                }\r\n                return false;\r\n            }\r\n            if (PRE_JAVA_9) {\r\n                if (attachmentMethod == null) {\r\n                    if (log != null) {\r\n                        log.log(&quot;Could not unmap ByteBuffer, attachmentMethod == null&quot;);\r\n                    }\r\n                    return false;\r\n                }\r\n                // Make sure duplicates and slices are not cleaned, since this can result in\r\n                // duplicate attempts to clean the same buffer, which trigger a crash with:\r\n                // &quot;A fatal error has been detected by the Java Runtime Environment:\r\n                // EXCEPTION_ACCESS_VIOLATION&quot;\r\n                // See: https://stackoverflow.com/a/31592947/3950982\r\n                if (attachmentMethod.invoke(byteBuffer) != null) {\r\n                    // Buffer is a duplicate or slice\r\n                    return false;\r\n                }\r\n                // Invoke ((DirectBuffer) byteBuffer).cleaner().clean()\r\n                final Method cleaner = byteBuffer.getClass().getMethod(&quot;cleaner&quot;);\r\n                cleaner.setAccessible(true);\r\n                cleanMethod.invoke(cleaner.invoke(byteBuffer));\r\n                return true;\r\n            } else {\r\n                if (theUnsafe == null) {\r\n                    if (log != null) {\r\n                        log.log(&quot;Could not unmap ByteBuffer, theUnsafe == null&quot;);\r\n                    }\r\n                    return false;\r\n                }\r\n                // In JDK9+, calling the above code gives a reflection warning on stderr,\r\n                // need to call Unsafe.theUnsafe.invokeCleaner(byteBuffer) , which makes\r\n                // the same call, but does not print the reflection warning.\r\n                try {\r\n                    cleanMethod.invoke(theUnsafe, byteBuffer);\r\n                    return true;\r\n                } catch (final IllegalArgumentException e) {\r\n                    // Buffer is a duplicate or slice\r\n                    return false;\r\n                }\r\n            }\r\n        } catch (final Exception e) {\r\n            if (log != null) {\r\n                log.log(&quot;Could not unmap ByteBuffer: &quot; + e);\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Close a {@code DirectByteBuffer} -- in particular, will unmap a\r\n     * {@link MappedByteBuffer}.\r\n     * \r\n     * @param byteBuffer\r\n     *            The {@link ByteBuffer} to close/unmap.\r\n     * @param log\r\n     *            The log.\r\n     * @return True if the byteBuffer was closed/unmapped (or if the ByteBuffer\r\n     *            was null or non-direct).\r\n     */\r\n    public static boolean closeDirectByteBuffer(final ByteBuffer byteBuffer,\r\n                final Log log) {\r\n        if (byteBuffer != null &amp;&amp; byteBuffer.isDirect()) {\r\n            return AccessController.doPrivileged(new PrivilegedAction&lt;Boolean&gt;() {\r\n                @Override\r\n                public Boolean run() {\r\n                    return closeDirectByteBufferPrivileged(byteBuffer, log);\r\n                }\r\n            });\r\n        } else {\r\n            // Nothing to unmap\r\n            return false;\r\n        }\r\n    }\r\n\r\nNote that you will need to add the `requires jdk.unsupported` to your module descriptor in a modular runtime on JDK 9+ (needed for the use of `Unsafe`).\r\n\r\nYour jar may also need `RuntimePermission(&quot;accessClassInPackage.sun.misc&quot;)`, `RuntimePermission(&quot;accessClassInPackage.jdk.internal.misc&quot;)`, and `ReflectPermission(&quot;suppressAccessChecks&quot;)`.\r\n\r\nA more complete method for garbage collecting a `MappedByteBuffer` or a `DirectByteBuffer` is implemented in ClassGraph (I am the author) -- the entry point is the `closeDirectByteBuffer()` method at the end of `FileUtils`:\r\n\r\nhttps://github.com/classgraph/classgraph/blob/latest/src/main/java/nonapi/io/github/classgraph/utils/FileUtils.java#L543\r\n\r\nThis code is written to use reflection, since the Java APIs that are used (including `Unsafe`) are going away in the near future.\r\n\r\n**Note that there&#39;s an additional problem in JDK 16+:**\r\n\r\nthis code will not work out of the box in JDK 16+ unless you use the [Narcissus][1] or [JVM-Driver][2] libraries to circumvent strong encapsulation.  This is because `MappedByteBuffer.clean()` is a private method, and JDK 16 enforces strong encapsulation. ClassGraph abstracts away access to private encapsulated methods by calling Narcissus or JVM-driver through reflection at runtime:\r\n\r\nhttps://github.com/classgraph/classgraph/blob/latest/src/main/java/nonapi/io/github/classgraph/reflection/ReflectionUtils.java\r\n\r\n**Warning: if you try to access the `DirectByteBuffer` after it is cleaned (freed), it will crash the VM.**\r\n\r\nThere are other security considerations, discussed in the last comment in this bug report:\r\n\r\nhttps://bugs.java.com/bugdatabase/view_bug.do?bug_id=JDK-4724038\r\n\r\n  [1]: https://github.com/toolfactory/narcissus\r\n  [2]: https://github.com/toolfactory/jvm-driver\r\n","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>The method covered in other answers that employs <code>((DirectBuffer) byteBuffer).cleaner().clean()</code> doesn't work on JDK 9+ (even in reflective form) without displaying an <code>An illegal reflective access operation has occurred</code> warning. This will stop working altogether in some future JDK version. Fortunately <code>sun.misc.Unsafe.invokeCleaner(ByteBuffer)</code> can make that exact same call for you without the warning: (from OpenJDK 11 source):</p>\n<pre><code>public void invokeCleaner(java.nio.ByteBuffer directBuffer) {\n    if (!directBuffer.isDirect())\n        throw new IllegalArgumentException(&quot;buffer is non-direct&quot;);\n\n    DirectBuffer db = (DirectBuffer)directBuffer;\n    if (db.attachment() != null)\n        throw new IllegalArgumentException(&quot;duplicate or slice&quot;);\n\n    Cleaner cleaner = db.cleaner();\n    if (cleaner != null) {\n        cleaner.clean();\n    }\n}\n</code></pre>\n<p>Being a <code>sun.misc</code> class, it will be removed at some point. Interestingly all calls but this one in <code>sun.misc.Unsafe</code> are proxied directly to <code>jdk.internal.misc.Unsafe</code>. I don't know why <code>invokeCleaner(ByteBuffer)</code> is not proxied in the same way as all the other methods -- it was probably omitted because there will be a new way to directly free memory references (including <code>DirectByteBuffer</code> instances) as of about JDK 15.</p>\n<p>I wrote the following code that is able to clean/close/unmap DirectByteBuffer/MappedByteBuffer instances on JDK 7/8, as well as JDK 9+, and this does not give the reflection warning:</p>\n<pre><code>private static boolean PRE_JAVA_9 = \n        System.getProperty(&quot;java.specification.version&quot;,&quot;9&quot;).startsWith(&quot;1.&quot;);\n\nprivate static Method cleanMethod;\nprivate static Method attachmentMethod;\nprivate static Object theUnsafe;\n\nstatic void getCleanMethodPrivileged() {\n    if (PRE_JAVA_9) {\n        try {\n            cleanMethod = Class.forName(&quot;sun.misc.Cleaner&quot;).getMethod(&quot;clean&quot;);\n            cleanMethod.setAccessible(true);\n            final Class&lt;?&gt; directByteBufferClass =\n                    Class.forName(&quot;sun.nio.ch.DirectBuffer&quot;);\n            attachmentMethod = directByteBufferClass.getMethod(&quot;attachment&quot;);\n            attachmentMethod.setAccessible(true);\n        } catch (final Exception ex) {\n        }\n    } else {\n        try {\n            Class&lt;?&gt; unsafeClass;\n            try {\n                unsafeClass = Class.forName(&quot;sun.misc.Unsafe&quot;);\n            } catch (Exception e) {\n                // jdk.internal.misc.Unsafe doesn't yet have invokeCleaner(),\n                // but that method should be added if sun.misc.Unsafe is removed.\n                unsafeClass = Class.forName(&quot;jdk.internal.misc.Unsafe&quot;);\n            }\n            cleanMethod = unsafeClass.getMethod(&quot;invokeCleaner&quot;, ByteBuffer.class);\n            cleanMethod.setAccessible(true);\n            final Field theUnsafeField = unsafeClass.getDeclaredField(&quot;theUnsafe&quot;);\n            theUnsafeField.setAccessible(true);\n            theUnsafe = theUnsafeField.get(null);\n        } catch (final Exception ex) {\n        }\n    }\n}\n\nstatic {\n    AccessController.doPrivileged(new PrivilegedAction&lt;Object&gt;() {\n        @Override\n        public Object run() {\n            getCleanMethodPrivileged();\n            return null;\n        }\n    });\n}\n\nprivate static boolean closeDirectByteBufferPrivileged(\n            final ByteBuffer byteBuffer, final LogNode log) {\n    try {\n        if (cleanMethod == null) {\n            if (log != null) {\n                log.log(&quot;Could not unmap ByteBuffer, cleanMethod == null&quot;);\n            }\n            return false;\n        }\n        if (PRE_JAVA_9) {\n            if (attachmentMethod == null) {\n                if (log != null) {\n                    log.log(&quot;Could not unmap ByteBuffer, attachmentMethod == null&quot;);\n                }\n                return false;\n            }\n            // Make sure duplicates and slices are not cleaned, since this can result in\n            // duplicate attempts to clean the same buffer, which trigger a crash with:\n            // &quot;A fatal error has been detected by the Java Runtime Environment:\n            // EXCEPTION_ACCESS_VIOLATION&quot;\n            // See: https://stackoverflow.com/a/31592947/3950982\n            if (attachmentMethod.invoke(byteBuffer) != null) {\n                // Buffer is a duplicate or slice\n                return false;\n            }\n            // Invoke ((DirectBuffer) byteBuffer).cleaner().clean()\n            final Method cleaner = byteBuffer.getClass().getMethod(&quot;cleaner&quot;);\n            cleaner.setAccessible(true);\n            cleanMethod.invoke(cleaner.invoke(byteBuffer));\n            return true;\n        } else {\n            if (theUnsafe == null) {\n                if (log != null) {\n                    log.log(&quot;Could not unmap ByteBuffer, theUnsafe == null&quot;);\n                }\n                return false;\n            }\n            // In JDK9+, calling the above code gives a reflection warning on stderr,\n            // need to call Unsafe.theUnsafe.invokeCleaner(byteBuffer) , which makes\n            // the same call, but does not print the reflection warning.\n            try {\n                cleanMethod.invoke(theUnsafe, byteBuffer);\n                return true;\n            } catch (final IllegalArgumentException e) {\n                // Buffer is a duplicate or slice\n                return false;\n            }\n        }\n    } catch (final Exception e) {\n        if (log != null) {\n            log.log(&quot;Could not unmap ByteBuffer: &quot; + e);\n        }\n        return false;\n    }\n}\n\n/**\n * Close a {@code DirectByteBuffer} -- in particular, will unmap a\n * {@link MappedByteBuffer}.\n * \n * @param byteBuffer\n *            The {@link ByteBuffer} to close/unmap.\n * @param log\n *            The log.\n * @return True if the byteBuffer was closed/unmapped (or if the ByteBuffer\n *            was null or non-direct).\n */\npublic static boolean closeDirectByteBuffer(final ByteBuffer byteBuffer,\n            final Log log) {\n    if (byteBuffer != null &amp;&amp; byteBuffer.isDirect()) {\n        return AccessController.doPrivileged(new PrivilegedAction&lt;Boolean&gt;() {\n            @Override\n            public Boolean run() {\n                return closeDirectByteBufferPrivileged(byteBuffer, log);\n            }\n        });\n    } else {\n        // Nothing to unmap\n        return false;\n    }\n}\n</code></pre>\n<p>Note that you will need to add the <code>requires jdk.unsupported</code> to your module descriptor in a modular runtime on JDK 9+ (needed for the use of <code>Unsafe</code>).</p>\n<p>Your jar may also need <code>RuntimePermission(&quot;accessClassInPackage.sun.misc&quot;)</code>, <code>RuntimePermission(&quot;accessClassInPackage.jdk.internal.misc&quot;)</code>, and <code>ReflectPermission(&quot;suppressAccessChecks&quot;)</code>.</p>\n<p>A more complete method for garbage collecting a <code>MappedByteBuffer</code> or a <code>DirectByteBuffer</code> is implemented in ClassGraph (I am the author) -- the entry point is the <code>closeDirectByteBuffer()</code> method at the end of <code>FileUtils</code>:</p>\n<p><a href=\"https://github.com/classgraph/classgraph/blob/latest/src/main/java/nonapi/io/github/classgraph/utils/FileUtils.java#L543\" rel=\"nofollow noreferrer\">https://github.com/classgraph/classgraph/blob/latest/src/main/java/nonapi/io/github/classgraph/utils/FileUtils.java#L543</a></p>\n<p>This code is written to use reflection, since the Java APIs that are used (including <code>Unsafe</code>) are going away in the near future.</p>\n<p><strong>Note that there's an additional problem in JDK 16+:</strong></p>\n<p>this code will not work out of the box in JDK 16+ unless you use the <a href=\"https://github.com/toolfactory/narcissus\" rel=\"nofollow noreferrer\">Narcissus</a> or <a href=\"https://github.com/toolfactory/jvm-driver\" rel=\"nofollow noreferrer\">JVM-Driver</a> libraries to circumvent strong encapsulation.  This is because <code>MappedByteBuffer.clean()</code> is a private method, and JDK 16 enforces strong encapsulation. ClassGraph abstracts away access to private encapsulated methods by calling Narcissus or JVM-driver through reflection at runtime:</p>\n<p><a href=\"https://github.com/classgraph/classgraph/blob/latest/src/main/java/nonapi/io/github/classgraph/reflection/ReflectionUtils.java\" rel=\"nofollow noreferrer\">https://github.com/classgraph/classgraph/blob/latest/src/main/java/nonapi/io/github/classgraph/reflection/ReflectionUtils.java</a></p>\n<p><strong>Warning: if you try to access the <code>DirectByteBuffer</code> after it is cleaned (freed), it will crash the VM.</strong></p>\n<p>There are other security considerations, discussed in the last comment in this bug report:</p>\n<p><a href=\"https://bugs.java.com/bugdatabase/view_bug.do?bug_id=JDK-4724038\" rel=\"nofollow noreferrer\">https://bugs.java.com/bugdatabase/view_bug.do?bug_id=JDK-4724038</a></p>\n"},{"tags":[],"owner":{"account_id":187950,"reputation":2035,"user_id":426371,"accept_rate":82,"display_name":"neXus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591628427,"creation_date":1591628427,"answer_id":62265017,"question_id":2972986,"body_markdown":"Try [https://github.com/real-logic/agrona][1]\r\n\r\nIts IOUtil class has an [`unmap(MappedByteBuffer)`][2] method that does exactly what you need. It allows to explicitly unmap a MappedByteBuffer.\r\n\r\nHowever, it uses `sun.misc.Unsafe` internally, but that&#39;s not any different from the other answers here.\r\n\r\n  [1]: https://github.com/real-logic/agrona#agrona\r\n  [2]: https://github.com/real-logic/agrona/blob/1.5.1/agrona/src/main/java/org/agrona/IoUtil.java#L511-L520","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>Try <a href=\"https://github.com/real-logic/agrona#agrona\" rel=\"nofollow noreferrer\">https://github.com/real-logic/agrona</a></p>\n\n<p>Its IOUtil class has an <a href=\"https://github.com/real-logic/agrona/blob/1.5.1/agrona/src/main/java/org/agrona/IoUtil.java#L511-L520\" rel=\"nofollow noreferrer\"><code>unmap(MappedByteBuffer)</code></a> method that does exactly what you need. It allows to explicitly unmap a MappedByteBuffer.</p>\n\n<p>However, it uses <code>sun.misc.Unsafe</code> internally, but that's not any different from the other answers here.</p>\n"}],"owner":{"account_id":619370,"reputation":573,"user_id":358304,"display_name":"learner135"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31193,"favorite_count":0,"down_vote_count":0,"up_vote_count":56,"accepted_answer_id":2973059,"answer_count":13,"score":56,"last_activity_date":1637097985,"creation_date":1275644820,"question_id":2972986,"body_markdown":"I am mapping a file(&quot;sample.txt&quot;) to memory using `FileChannel.map()` and then closing the channel using `fc.close()`. After this when I write to the file using FileOutputStream, I am getting the following error:\r\n\r\n&gt;    java.io.FileNotFoundException:\r\n&gt; sample.txt (The requested operation\r\n&gt; cannot be per formed on a file with a\r\n&gt; user-mapped section open)\r\n\r\n    File f = new File(&quot;sample.txt&quot;);\r\n    RandomAccessFile raf = new RandomAccessFile(f,&quot;rw&quot;);\r\n    FileChannel fc = raf.getChannel();\r\n    MappedByteBuffer mbf = fc.map(FileChannel.MapMode.READ_ONLY, 0, fc.size());\r\n    fc.close();\r\n    raf.close();\r\n\r\n    FileOutputStream fos = new FileOutputStream(f);\r\n    fos.write(str.getBytes());\r\n    fos.close();\r\n\r\nI presume this may be due to file being still mapped to the memory even after I close the `FileChannel`. Am I right?. If so, how can I &quot;unmap&quot; the file from memory?(I can&#39;t find any methods for this in the API).\r\nThanks.\r\n\r\nEdit:\r\nLooks like it(adding an unmap method) was submitted as RFE to sun some time back:\r\nhttps://bugs.java.com/bugdatabase/view_bug?bug_id=4724038","title":"How to unmap a file from memory mapped using FileChannel in java?","body":"<p>I am mapping a file(&quot;sample.txt&quot;) to memory using <code>FileChannel.map()</code> and then closing the channel using <code>fc.close()</code>. After this when I write to the file using FileOutputStream, I am getting the following error:</p>\n<blockquote>\n<p>java.io.FileNotFoundException:\nsample.txt (The requested operation\ncannot be per formed on a file with a\nuser-mapped section open)</p>\n</blockquote>\n<pre><code>File f = new File(&quot;sample.txt&quot;);\nRandomAccessFile raf = new RandomAccessFile(f,&quot;rw&quot;);\nFileChannel fc = raf.getChannel();\nMappedByteBuffer mbf = fc.map(FileChannel.MapMode.READ_ONLY, 0, fc.size());\nfc.close();\nraf.close();\n\nFileOutputStream fos = new FileOutputStream(f);\nfos.write(str.getBytes());\nfos.close();\n</code></pre>\n<p>I presume this may be due to file being still mapped to the memory even after I close the <code>FileChannel</code>. Am I right?. If so, how can I &quot;unmap&quot; the file from memory?(I can't find any methods for this in the API).\nThanks.</p>\n<p>Edit:\nLooks like it(adding an unmap method) was submitted as RFE to sun some time back:\n<a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=4724038\" rel=\"nofollow noreferrer\">https://bugs.java.com/bugdatabase/view_bug?bug_id=4724038</a></p>\n"},{"tags":["java","spring-boot","spring-mvc","spring-security","spring-data-jpa"],"comments":[{"owner":{"account_id":16609602,"reputation":115,"user_id":12003033,"display_name":"wizdemonizer"},"score":1,"creation_date":1637096804,"post_id":69994829,"comment_id":123733990,"body_markdown":"@xerx593 I just added the security config","body":"@xerx593 I just added the security config"},{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":0,"creation_date":1637096888,"post_id":69994829,"comment_id":123734024,"body_markdown":"Doesn&#39;t `antMatchers(&quot;/auth/login&quot;, &quot;/validate&quot;, &quot;/**&quot;).permitAll()` renders it unnecessary to authenticate to call `@GetMapping(value=&quot;marketers/customers&quot;)`?","body":"Doesn&#39;t <code>antMatchers(&quot;&#47;auth&#47;login&quot;, &quot;&#47;validate&quot;, &quot;&#47;**&quot;).permitAll()</code> renders it unnecessary to authenticate to call <code>@GetMapping(value=&quot;marketers&#47;customers&quot;)</code>?"},{"owner":{"account_id":16609602,"reputation":115,"user_id":12003033,"display_name":"wizdemonizer"},"score":0,"creation_date":1637096982,"post_id":69994829,"comment_id":123734050,"body_markdown":"@Jo&#227;oDias i thought the &quot;/**&quot; mean all other endpoints ?","body":"@Jo&#227;oDias i thought the &quot;/**&quot; mean all other endpoints ?"},{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":0,"creation_date":1637097525,"post_id":69994829,"comment_id":123734226,"body_markdown":"Exactly, which means that basically all endpoints will require no authentication, hence you will have an empty `SecurityContext` on such calls.","body":"Exactly, which means that basically all endpoints will require no authentication, hence you will have an empty <code>SecurityContext</code> on such calls."},{"owner":{"account_id":16609602,"reputation":115,"user_id":12003033,"display_name":"wizdemonizer"},"score":0,"creation_date":1637098671,"post_id":69994829,"comment_id":123734496,"body_markdown":"@Jo&#227;oDias what should I do ? i removed the   &quot;/**&quot;  and changed to  &quot;/marketers/customers&quot; but getting same null","body":"@Jo&#227;oDias what should I do ? i removed the   &quot;/**&quot;  and changed to  &quot;/marketers/customers&quot; but getting same null"},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1637098681,"post_id":69994829,"comment_id":123734500,"body_markdown":"spring security has had JWT support since 2018, writing a custom JWTFilter is bad practice, writing any type of custom security is bad practice. Remove the JWTFilter and please implement JWTs in accordance according to the official spring security documentation https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/jwt.html","body":"spring security has had JWT support since 2018, writing a custom JWTFilter is bad practice, writing any type of custom security is bad practice. Remove the JWTFilter and please implement JWTs in accordance according to the official spring security documentation <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/jwt.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/reference/servlet/oauth2/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637097740,"creation_date":1637097740,"answer_id":69996182,"question_id":69994829,"body_markdown":"It seems to me that you don&#39;t want all your endpoints to not require authentication. In order to achieve it you will need to remove `/**` from your `permitAll()` in the security configuration as follows:\r\n```java\r\n@Override\r\nprotected void configure(HttpSecurity http) throws Exception {\r\n  http.cors().and().csrf().disable()\r\n  .authorizeRequests()\r\n  .antMatchers(&quot;/auth/login&quot;, &quot;/validate&quot;).permitAll()\r\n  .antMatchers(&quot;/admin/**&quot;).hasAuthority(&quot;ADMIN&quot;)\r\n    \r\n  .anyRequest().authenticated()\r\n  .and()\r\n    .exceptionHandling()\r\n  .authenticationEntryPoint(jwtAuthenticationEntryPoint)\r\n  \r\n  .and()\r\n  .formLogin().permitAll()\r\n  \r\n  .and()\r\n  .sessionManagement()\r\n  .maximumSessions(1)\r\n  .and()\r\n  .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n  .and()\r\n  .logout().logoutUrl(&quot;/logout&quot;).logoutSuccessUrl(&quot;/auth/login&quot;)\r\n  .deleteCookies(&quot;JSESSIONID&quot;);\r\n  http.addFilterBefore(jwtRequestFilter, UsernamePasswordAuthenticationFilter.class);\r\n}\r\n```","title":"Why is Spring security Authentication returning a Null authentication object?","body":"<p>It seems to me that you don't want all your endpoints to not require authentication. In order to achieve it you will need to remove <code>/**</code> from your <code>permitAll()</code> in the security configuration as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n  http.cors().and().csrf().disable()\n  .authorizeRequests()\n  .antMatchers(&quot;/auth/login&quot;, &quot;/validate&quot;).permitAll()\n  .antMatchers(&quot;/admin/**&quot;).hasAuthority(&quot;ADMIN&quot;)\n    \n  .anyRequest().authenticated()\n  .and()\n    .exceptionHandling()\n  .authenticationEntryPoint(jwtAuthenticationEntryPoint)\n  \n  .and()\n  .formLogin().permitAll()\n  \n  .and()\n  .sessionManagement()\n  .maximumSessions(1)\n  .and()\n  .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n  .and()\n  .logout().logoutUrl(&quot;/logout&quot;).logoutSuccessUrl(&quot;/auth/login&quot;)\n  .deleteCookies(&quot;JSESSIONID&quot;);\n  http.addFilterBefore(jwtRequestFilter, UsernamePasswordAuthenticationFilter.class);\n}\n</code></pre>\n"}],"owner":{"account_id":16609602,"reputation":115,"user_id":12003033,"display_name":"wizdemonizer"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2866,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":69996182,"answer_count":1,"score":-1,"last_activity_date":1637097740,"creation_date":1637089788,"question_id":69994829,"body_markdown":"**I need to get the User object details for the currently signed in User so that I can get the customers assigned to the User** but I keep getting a null object when I printed to the console. I can sign in successfully with a generated token for the user type , but i keep getting null response when the logged in username is queried by Spring authentication.\r\n\r\n**Controller**\r\n\r\n```java\r\n@RestController\r\npublic class CustomerController {\r\n\t\r\n@Autowired\r\nCustomerAccountService customerRepo;\r\n\t    \r\n@Autowired\r\nUserAccountService  userRepo;\r\n\r\n @GetMapping(value=&quot;marketers/customers&quot;)\r\npublic List&lt;Customer&gt; getLlistByMarketerName()\r\n{\r\nAuthentication authentication = SecurityContextHolder.getContext().getAuthentication();\t \r\nUser loggedInUser = userRepo.findByUserName(authentication.getName());\r\nSystem.out.println(&quot;logged in user:&quot;+ loggedInUser);\r\nreturn customerRepo.findByMarketer(loggedInUser);\r\n}\r\n\t\r\n```\r\n\r\n**The repository**\r\n\r\n```\r\n\r\npublic interface CustomerAccountRepo extends JpaRepository &lt;Customer, Long  &gt; \r\n\r\n{\r\n@Query(&quot;select customer from Customer customer join customer.marketer marketer where marketer = :marketer&quot;)\r\n     List&lt;Customer&gt; findByMarketer(User marketer);\r\n}\r\n```\r\n\r\n**UserDetails Service** \r\n\r\n```\r\n@Service\r\npublic class UserAccountService implements UserDetailsService {\r\n\t\r\n\t\r\n@Autowired\t\r\nprivate UserAccountRepository userRepository;\r\n\t    \r\nprivate PasswordEncoder bCryptPasswordEncoder;\r\n\t   \r\npublic  UserAccountService (PasswordEncoder bCryptPasswordEncoder) {\r\nthis.bCryptPasswordEncoder = bCryptPasswordEncoder;\r\n\t\t \r\n\t   }\r\n\t\r\n@Override\r\npublic UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\nUser user = userRepository.findByUserName(username);\r\nif(user == null) {\r\nthrow new UsernameNotFoundException(&quot;User not found&quot;);\r\n}\r\n\t        \r\n\t       // List&lt;SimpleGrantedAuthority&gt; authorities = Arrays.asList(new SimpleGrantedAuthority(user.getUserRole()));\r\n\t        \r\n          return MyUserDetails.build(user);\r\n}\r\n\r\n```\r\n\r\n**JWT Request filter** \r\n\r\n```\r\n@Component\r\npublic class JwtRequestFilter extends OncePerRequestFilter {\r\n\r\n\t@Autowired\r\nprivate JwtTokenUtil jwtTokenUtil;\r\nprivate final UserAccountService userAccountService;\r\n\t\r\n@Autowired\r\npublic JwtRequestFilter( @Lazy final UserAccountService userAccountService) {\r\nthis.userAccountService = userAccountService;\r\n\t\t\r\n}\r\n\t\r\n@Override\r\nprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain)\r\n\t\t\tthrows ServletException, IOException {\r\n\r\nfinal String requestTokenHeader = request.getHeader(&quot;Authorization&quot;);\r\n\r\nString username = null;\r\nString jwtToken = null;\r\nif (requestTokenHeader != null) {\r\njwtToken = requestTokenHeader.substring(7);\r\ntry {\r\nusername = jwtTokenUtil.getUsernameFromToken(jwtToken);\r\n} catch (IllegalArgumentException e) {\r\nSystem.out.println(&quot;Unable to get JWT Token&quot;);\r\n} catch (ExpiredJwtException e) {\r\nSystem.out.println(&quot;JWT Token has expired&quot;);\r\n}\r\n} \r\n\r\nif (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\r\nUserDetails userDetails = this.userAccountService.loadUserByUsername(username);\r\nif (jwtTokenUtil.validateToken(jwtToken, userDetails)) {\r\nUsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(\r\nuserDetails, null, userDetails.getAuthorities());\r\nString authorities = userDetails.getAuthorities().stream().map(GrantedAuthority::getAuthority)\r\n.collect(Collectors.joining());\r\nSystem.out.println(&quot;Authorities granted : &quot; + authorities);\r\nusernamePasswordAuthenticationToken\r\n.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\nSecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\r\n\t\t\t}\r\nelse {\r\n System.out.println(&quot;Not Valid Token&quot;);\r\n        }\r\n\r\n\t\t}\r\nchain.doFilter(request, response);\r\n}\r\n\r\n```\r\n\r\n**The User entity**\r\n\r\n```\r\n@Entity\r\npublic class User {\r\n\r\n\t\r\n\t@Id\r\n\t@GeneratedValue(strategy=GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\t\r\n\tprivate String firstName ;\r\n\tprivate String lastName;\r\n\t\r\n\t@Column(name=&quot;user_name&quot;, unique=true)\r\n\tprivate String userName;\r\n\t\r\n\tprivate String password;\r\n\tprivate String Gender; \r\n    private String phoneNumber;\r\n\tprivate String email;\r\n\t\r\n\t@JsonIgnoreProperties({&quot;hibernateLazyInitializer&quot;, &quot;handler&quot;})\r\n    @ManyToOne(targetEntity = Branch.class, \r\n\t fetch = FetchType.LAZY )\r\n\t@JoinColumn(name=&quot;branch_id&quot;) \r\n    private Branch branch;\r\n    \r\n    @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)\r\n    private Date createdDate;\r\n    \r\n    @ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\r\n    @JoinTable(\r\n    name = &quot;users_roles&quot;, \r\n    joinColumns = @JoinColumn(name = &quot;user_id&quot;),\r\n    inverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;)\r\n    )\r\n    private Set&lt;UserRole&gt; userRole = new HashSet&lt;&gt;();\r\n    \r\n    @Enumerated(EnumType.STRING)\r\n    private UserStatus status;\r\n    \r\n    @JsonBackReference\r\n\t@OneToMany(mappedBy=&quot;marketer&quot;,cascade = CascadeType.ALL, targetEntity=Customer.class)\r\n    private List &lt;Customer&gt; customer;\r\n\r\n```\r\n\r\nThis is **MyUserDetails class** that provides the username and password authentication details\r\n\r\n```\r\npublic class MyUserDetails implements UserDetails {\r\n\t\r\nprivate static final long serialVersionUID = -2456373662763511974L;\r\n\r\nprivate Long id;\r\nprivate String username;\r\nprivate String password;\r\nprivate String email;\r\nprivate Collection&lt;? extends GrantedAuthority&gt; authorities;\r\n    \r\npublic MyUserDetails() {}\r\n\t\r\npublic MyUserDetails(Long id, String username, String email, String password,\r\nCollection&lt;? extends GrantedAuthority&gt; authorities)\r\n\t{\r\n\t\tthis.id = id;\r\n\t\tthis.username = username;\r\n\t\tthis.email = email;\r\n\t\tthis.password = password;\r\n\t\tthis.authorities = authorities;\r\n\t}\r\npublic static MyUserDetails build(User user) {\r\nList&lt;GrantedAuthority&gt; authorities = user.getUserRole()\r\n.stream().map(role -&gt; new SimpleGrantedAuthority\r\n(role.getName()))\r\n.collect(Collectors.toList());\r\nreturn new MyUserDetails(user.getId(),\r\nuser.getUserName(),\r\nuser.getEmail(),\r\nuser.getPassword(),\r\nauthorities);\r\n\t\t\r\n}\r\n\r\n```\r\n\r\n**UPDATED:** Security config file . This is my first big project in Java , forgive my errors\r\n\r\n```java\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableGlobalMethodSecurity(prePostEnabled = true)\r\npublic class SecurityConfiguration extends WebSecurityConfigurerAdapter {\r\n\t\r\n\t@Autowired\r\n\tprivate JwtAuthenticationEntryPoint jwtAuthenticationEntryPoint;\r\n\r\n\t@Autowired\r\n  private UserDetailsService myUserDetailsService;\r\n\t\r\n\tpublic void addResourceHandlers(ResourceHandlerRegistry registry) {\r\n      exposeDirectory(&quot;customer-photos&quot;, registry);\r\n  }\r\n\t\r\n\tprivate void exposeDirectory(String dirName, ResourceHandlerRegistry registry) {\r\n      Path uploadDir = Paths.get(dirName);\r\n      String uploadPath = uploadDir.toFile().getAbsolutePath();\r\n       \r\n      if (dirName.startsWith(&quot;../&quot;)) dirName = dirName.replace(&quot;../&quot;, &quot;&quot;);\r\n       \r\n      registry.addResourceHandler(&quot;/&quot; + dirName + &quot;/**&quot;).addResourceLocations(&quot;file:/&quot;+ uploadPath + &quot;/&quot;);\r\n  }\r\n\r\n  @Autowired \r\n\tprivate JwtRequestFilter jwtRequestFilter;\r\n\t \r\n\t@Bean\r\n\tpublic BCryptPasswordEncoder passwordEncoder() {\r\n\t    return new BCryptPasswordEncoder();\r\n\t}\r\n\t\r\n\t @Bean\r\n\t public DaoAuthenticationProvider daoAuthenticationProvider(PasswordEncoder passwordEncoder, UserDetailsService userDetailsService) { \r\n        DaoAuthenticationProvider daoAuthenticationProvider = new DaoAuthenticationProvider();\r\n        daoAuthenticationProvider.setPasswordEncoder(passwordEncoder);\r\n        daoAuthenticationProvider.setUserDetailsService(userDetailsService);\r\n        return daoAuthenticationProvider;\r\n    }\r\n\t \r\n\t @Override\r\n\t @Bean\r\n\t public AuthenticationManager authenticationManagerBean() throws Exception {\r\n\t     return super.authenticationManagerBean();\r\n\t }\r\n\r\n   @Override\r\n\t protected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n       auth.userDetailsService(myUserDetailsService).passwordEncoder(passwordEncoder());\r\n\t }\r\n\r\n  @Override\r\n\tprotected void configure(HttpSecurity http) throws Exception {\r\n\t  http.cors().and().csrf().disable()\r\n\t  .authorizeRequests()\r\n\t  .antMatchers(&quot;/auth/login&quot;, &quot;/validate&quot;, &quot;/**&quot;).permitAll()\r\n\t  .antMatchers(&quot;/admin/**&quot;).hasAuthority(&quot;ADMIN&quot;)\r\n      \r\n\t  .anyRequest().authenticated()\r\n\t  .and()\r\n      .exceptionHandling()\r\n\t  .authenticationEntryPoint(jwtAuthenticationEntryPoint)\r\n\t  \r\n\t  .and()\r\n\t  .formLogin().permitAll()\r\n\t  \r\n\t  .and()\r\n\t  .sessionManagement()\r\n\t  .maximumSessions(1)\r\n\t  .and()\r\n\t  .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n\t  .and()\r\n\t  .logout().logoutUrl(&quot;/logout&quot;).logoutSuccessUrl(&quot;/auth/login&quot;)\r\n\t  .deleteCookies(&quot;JSESSIONID&quot;);\r\n\t  http.addFilterBefore(jwtRequestFilter, UsernamePasswordAuthenticationFilter.class);\r\n\t}\r\n}  \r\n```","title":"Why is Spring security Authentication returning a Null authentication object?","body":"<p><strong>I need to get the User object details for the currently signed in User so that I can get the customers assigned to the User</strong> but I keep getting a null object when I printed to the console. I can sign in successfully with a generated token for the user type , but i keep getting null response when the logged in username is queried by Spring authentication.</p>\n<p><strong>Controller</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class CustomerController {\n    \n@Autowired\nCustomerAccountService customerRepo;\n        \n@Autowired\nUserAccountService  userRepo;\n\n @GetMapping(value=&quot;marketers/customers&quot;)\npublic List&lt;Customer&gt; getLlistByMarketerName()\n{\nAuthentication authentication = SecurityContextHolder.getContext().getAuthentication();  \nUser loggedInUser = userRepo.findByUserName(authentication.getName());\nSystem.out.println(&quot;logged in user:&quot;+ loggedInUser);\nreturn customerRepo.findByMarketer(loggedInUser);\n}\n    \n</code></pre>\n<p><strong>The repository</strong></p>\n<pre><code>\npublic interface CustomerAccountRepo extends JpaRepository &lt;Customer, Long  &gt; \n\n{\n@Query(&quot;select customer from Customer customer join customer.marketer marketer where marketer = :marketer&quot;)\n     List&lt;Customer&gt; findByMarketer(User marketer);\n}\n</code></pre>\n<p><strong>UserDetails Service</strong></p>\n<pre><code>@Service\npublic class UserAccountService implements UserDetailsService {\n    \n    \n@Autowired  \nprivate UserAccountRepository userRepository;\n        \nprivate PasswordEncoder bCryptPasswordEncoder;\n       \npublic  UserAccountService (PasswordEncoder bCryptPasswordEncoder) {\nthis.bCryptPasswordEncoder = bCryptPasswordEncoder;\n         \n       }\n    \n@Override\npublic UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\nUser user = userRepository.findByUserName(username);\nif(user == null) {\nthrow new UsernameNotFoundException(&quot;User not found&quot;);\n}\n            \n           // List&lt;SimpleGrantedAuthority&gt; authorities = Arrays.asList(new SimpleGrantedAuthority(user.getUserRole()));\n            \n          return MyUserDetails.build(user);\n}\n\n</code></pre>\n<p><strong>JWT Request filter</strong></p>\n<pre><code>@Component\npublic class JwtRequestFilter extends OncePerRequestFilter {\n\n    @Autowired\nprivate JwtTokenUtil jwtTokenUtil;\nprivate final UserAccountService userAccountService;\n    \n@Autowired\npublic JwtRequestFilter( @Lazy final UserAccountService userAccountService) {\nthis.userAccountService = userAccountService;\n        \n}\n    \n@Override\nprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain)\n            throws ServletException, IOException {\n\nfinal String requestTokenHeader = request.getHeader(&quot;Authorization&quot;);\n\nString username = null;\nString jwtToken = null;\nif (requestTokenHeader != null) {\njwtToken = requestTokenHeader.substring(7);\ntry {\nusername = jwtTokenUtil.getUsernameFromToken(jwtToken);\n} catch (IllegalArgumentException e) {\nSystem.out.println(&quot;Unable to get JWT Token&quot;);\n} catch (ExpiredJwtException e) {\nSystem.out.println(&quot;JWT Token has expired&quot;);\n}\n} \n\nif (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\nUserDetails userDetails = this.userAccountService.loadUserByUsername(username);\nif (jwtTokenUtil.validateToken(jwtToken, userDetails)) {\nUsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(\nuserDetails, null, userDetails.getAuthorities());\nString authorities = userDetails.getAuthorities().stream().map(GrantedAuthority::getAuthority)\n.collect(Collectors.joining());\nSystem.out.println(&quot;Authorities granted : &quot; + authorities);\nusernamePasswordAuthenticationToken\n.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\nSecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\n            }\nelse {\n System.out.println(&quot;Not Valid Token&quot;);\n        }\n\n        }\nchain.doFilter(request, response);\n}\n\n</code></pre>\n<p><strong>The User entity</strong></p>\n<pre><code>@Entity\npublic class User {\n\n    \n    @Id\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    private Long id;\n    \n    private String firstName ;\n    private String lastName;\n    \n    @Column(name=&quot;user_name&quot;, unique=true)\n    private String userName;\n    \n    private String password;\n    private String Gender; \n    private String phoneNumber;\n    private String email;\n    \n    @JsonIgnoreProperties({&quot;hibernateLazyInitializer&quot;, &quot;handler&quot;})\n    @ManyToOne(targetEntity = Branch.class, \n     fetch = FetchType.LAZY )\n    @JoinColumn(name=&quot;branch_id&quot;) \n    private Branch branch;\n    \n    @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)\n    private Date createdDate;\n    \n    @ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n    @JoinTable(\n    name = &quot;users_roles&quot;, \n    joinColumns = @JoinColumn(name = &quot;user_id&quot;),\n    inverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;)\n    )\n    private Set&lt;UserRole&gt; userRole = new HashSet&lt;&gt;();\n    \n    @Enumerated(EnumType.STRING)\n    private UserStatus status;\n    \n    @JsonBackReference\n    @OneToMany(mappedBy=&quot;marketer&quot;,cascade = CascadeType.ALL, targetEntity=Customer.class)\n    private List &lt;Customer&gt; customer;\n\n</code></pre>\n<p>This is <strong>MyUserDetails class</strong> that provides the username and password authentication details</p>\n<pre><code>public class MyUserDetails implements UserDetails {\n    \nprivate static final long serialVersionUID = -2456373662763511974L;\n\nprivate Long id;\nprivate String username;\nprivate String password;\nprivate String email;\nprivate Collection&lt;? extends GrantedAuthority&gt; authorities;\n    \npublic MyUserDetails() {}\n    \npublic MyUserDetails(Long id, String username, String email, String password,\nCollection&lt;? extends GrantedAuthority&gt; authorities)\n    {\n        this.id = id;\n        this.username = username;\n        this.email = email;\n        this.password = password;\n        this.authorities = authorities;\n    }\npublic static MyUserDetails build(User user) {\nList&lt;GrantedAuthority&gt; authorities = user.getUserRole()\n.stream().map(role -&gt; new SimpleGrantedAuthority\n(role.getName()))\n.collect(Collectors.toList());\nreturn new MyUserDetails(user.getId(),\nuser.getUserName(),\nuser.getEmail(),\nuser.getPassword(),\nauthorities);\n        \n}\n\n</code></pre>\n<p><strong>UPDATED:</strong> Security config file . This is my first big project in Java , forgive my errors</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class SecurityConfiguration extends WebSecurityConfigurerAdapter {\n    \n    @Autowired\n    private JwtAuthenticationEntryPoint jwtAuthenticationEntryPoint;\n\n    @Autowired\n  private UserDetailsService myUserDetailsService;\n    \n    public void addResourceHandlers(ResourceHandlerRegistry registry) {\n      exposeDirectory(&quot;customer-photos&quot;, registry);\n  }\n    \n    private void exposeDirectory(String dirName, ResourceHandlerRegistry registry) {\n      Path uploadDir = Paths.get(dirName);\n      String uploadPath = uploadDir.toFile().getAbsolutePath();\n       \n      if (dirName.startsWith(&quot;../&quot;)) dirName = dirName.replace(&quot;../&quot;, &quot;&quot;);\n       \n      registry.addResourceHandler(&quot;/&quot; + dirName + &quot;/**&quot;).addResourceLocations(&quot;file:/&quot;+ uploadPath + &quot;/&quot;);\n  }\n\n  @Autowired \n    private JwtRequestFilter jwtRequestFilter;\n     \n    @Bean\n    public BCryptPasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n    \n     @Bean\n     public DaoAuthenticationProvider daoAuthenticationProvider(PasswordEncoder passwordEncoder, UserDetailsService userDetailsService) { \n        DaoAuthenticationProvider daoAuthenticationProvider = new DaoAuthenticationProvider();\n        daoAuthenticationProvider.setPasswordEncoder(passwordEncoder);\n        daoAuthenticationProvider.setUserDetailsService(userDetailsService);\n        return daoAuthenticationProvider;\n    }\n     \n     @Override\n     @Bean\n     public AuthenticationManager authenticationManagerBean() throws Exception {\n         return super.authenticationManagerBean();\n     }\n\n   @Override\n     protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n       auth.userDetailsService(myUserDetailsService).passwordEncoder(passwordEncoder());\n     }\n\n  @Override\n    protected void configure(HttpSecurity http) throws Exception {\n      http.cors().and().csrf().disable()\n      .authorizeRequests()\n      .antMatchers(&quot;/auth/login&quot;, &quot;/validate&quot;, &quot;/**&quot;).permitAll()\n      .antMatchers(&quot;/admin/**&quot;).hasAuthority(&quot;ADMIN&quot;)\n      \n      .anyRequest().authenticated()\n      .and()\n      .exceptionHandling()\n      .authenticationEntryPoint(jwtAuthenticationEntryPoint)\n      \n      .and()\n      .formLogin().permitAll()\n      \n      .and()\n      .sessionManagement()\n      .maximumSessions(1)\n      .and()\n      .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n      .and()\n      .logout().logoutUrl(&quot;/logout&quot;).logoutSuccessUrl(&quot;/auth/login&quot;)\n      .deleteCookies(&quot;JSESSIONID&quot;);\n      http.addFilterBefore(jwtRequestFilter, UsernamePasswordAuthenticationFilter.class);\n    }\n}  \n</code></pre>\n"},{"tags":["java","dependencies","quarkus","quarkus-native"],"answers":[{"tags":[],"owner":{"account_id":9649540,"reputation":26,"user_id":9484684,"display_name":"Quorcs"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637097542,"creation_date":1637097542,"answer_id":69996147,"question_id":69945196,"body_markdown":"Quarkus Native not includes external dependencies.\r\nYou needs to include by yourself\r\n\r\n[Link to SoF response][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/58311514/how-can-you-access-resources-in-transitive-jar-used-in-native-image","title":"Quarkus, Gradle, and External dependencies; Objects from external dependency not serializable only in native mode","body":"<p>Quarkus Native not includes external dependencies.\nYou needs to include by yourself</p>\n<p><a href=\"https://stackoverflow.com/questions/58311514/how-can-you-access-resources-in-transitive-jar-used-in-native-image\">Link to SoF response</a></p>\n"}],"owner":{"account_id":3615835,"reputation":1759,"user_id":3015723,"accept_rate":100,"display_name":"Snappawapa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":396,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69996147,"answer_count":1,"score":1,"last_activity_date":1637097542,"creation_date":1636730519,"question_id":69945196,"body_markdown":"I have a quarkus app, https://github.com/Epic-Breakfast-Productions/OpenQuarterMaster/tree/main/software/open-qm-base-station that relies on a dependency I make and build locally (it is available in the local maven repo). I have taken the steps necessary to make this work with Quarkus (empty `beans.xml` file), and works fine when operating in regular jar mode.\r\n\r\nHowever,  when I operate in Native mode, the code can&#39;t make heads or tails of the objects from the dependency, typically throwing fits when de/serialization happens:\r\n\r\n`Caused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class com.ebp.openQuarterMaster.lib.core.rest.ErrorMessage and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS)`\r\n\r\nI have tests running that confirm this (and seen in practice); when running in dev/ jar mode everything is fine. Native is a no-go. Is there anything I am missing on how to bring in non-jandex dependencies? I have attempted jandex plugins before but never seen them actually function.\r\n\r\nTo be clear:\r\n\r\n`./gradlew test` -&gt; works fine\r\n\r\n`./gradlew testNative` -&gt; fails \r\n\r\nIf testing for yourself, you will need to publish the dependency locally before attempting the quarkus app using `./gradlew publishToMavenLocal`: https://github.com/Epic-Breakfast-Productions/OpenQuarterMaster/tree/main/software/libs/open-qm-core ","title":"Quarkus, Gradle, and External dependencies; Objects from external dependency not serializable only in native mode","body":"<p>I have a quarkus app, <a href=\"https://github.com/Epic-Breakfast-Productions/OpenQuarterMaster/tree/main/software/open-qm-base-station\" rel=\"nofollow noreferrer\">https://github.com/Epic-Breakfast-Productions/OpenQuarterMaster/tree/main/software/open-qm-base-station</a> that relies on a dependency I make and build locally (it is available in the local maven repo). I have taken the steps necessary to make this work with Quarkus (empty <code>beans.xml</code> file), and works fine when operating in regular jar mode.</p>\n<p>However,  when I operate in Native mode, the code can't make heads or tails of the objects from the dependency, typically throwing fits when de/serialization happens:</p>\n<p><code>Caused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class com.ebp.openQuarterMaster.lib.core.rest.ErrorMessage and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS)</code></p>\n<p>I have tests running that confirm this (and seen in practice); when running in dev/ jar mode everything is fine. Native is a no-go. Is there anything I am missing on how to bring in non-jandex dependencies? I have attempted jandex plugins before but never seen them actually function.</p>\n<p>To be clear:</p>\n<p><code>./gradlew test</code> -&gt; works fine</p>\n<p><code>./gradlew testNative</code> -&gt; fails</p>\n<p>If testing for yourself, you will need to publish the dependency locally before attempting the quarkus app using <code>./gradlew publishToMavenLocal</code>: <a href=\"https://github.com/Epic-Breakfast-Productions/OpenQuarterMaster/tree/main/software/libs/open-qm-core\" rel=\"nofollow noreferrer\">https://github.com/Epic-Breakfast-Productions/OpenQuarterMaster/tree/main/software/libs/open-qm-core</a></p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1637034340,"post_id":69982232,"comment_id":123711029,"body_markdown":"When you hit the breakpoint in `setApplicationContext`, which classloader has loaded `ApplicationContextListener`? Which classloader has loaded `ApplicationContextListener` in `getMyBean`?","body":"When you hit the breakpoint in <code>setApplicationContext</code>, which classloader has loaded <code>ApplicationContextListener</code>? Which classloader has loaded <code>ApplicationContextListener</code> in <code>getMyBean</code>?"},{"owner":{"account_id":369372,"reputation":4604,"user_id":716720,"accept_rate":60,"display_name":"Sergey Shcherbakov"},"score":0,"creation_date":1637089794,"post_id":69982232,"comment_id":123731530,"body_markdown":"Apparently, those are two distinct class loaders.\nUpdating the question with additional info.","body":"Apparently, those are two distinct class loaders. Updating the question with additional info."}],"answers":[{"tags":[],"owner":{"account_id":369372,"reputation":4604,"user_id":716720,"accept_rate":60,"display_name":"Sergey Shcherbakov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637097499,"creation_date":1637097499,"answer_id":69996139,"question_id":69982232,"body_markdown":"The reason is the [Spring Boot Automatic Restart feature][1] enabled by default via dependency to the `spring-boot-devtools` added by the [Spring Initializer][2] that I used to create the project.\r\n\r\nThat feature enables loading bean classes via additional class loader.\r\n\r\nIn this situation one way to get access to the static variable is like follows:\r\n\r\n\tprivate static ApplicationContext getContext() {\r\n\t\ttry {\r\n\t\t\treturn (ApplicationContext) getClass(ApplicationListenerContext.class.getName())\r\n\t\t\t\t.getField(&quot;CONTEXT&quot;).get(null);\r\n\t\t} catch (Exception e) {\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static Class getClass(String classname) throws ClassNotFoundException {\r\n\t\tClassLoader classLoader = Thread.currentThread().getContextClassLoader();\r\n\t\tif(classLoader == null) {\r\n\t\t\tclassLoader = ApplicationListenerContext.class.getClassLoader();\r\n\t\t}\r\n\t\treturn classLoader.loadClass(classname);\r\n\t}\r\n\r\nOn the other hand, that workaround is not really needed. It is possible to switch off Automatic Restart feature by passing `-Dspring.devtools.restart.enabled=false` to the application startup parameters.\r\n\r\nEven simpler solution is to exclude `spring-boot-devtools` dependency from the exploded libraries that I package into the service Docker image:\r\n\r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;install&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;copy-dependencies&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;outputDirectory&gt;${project.build.directory}/lib&lt;/outputDirectory&gt;\r\n                            &lt;excludeArtifactIds&gt;spring-boot-devtools&lt;/excludeArtifactIds&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n\r\nThe following SO questions provide more details on this topic:\r\n\r\nhttps://stackoverflow.com/questions/57750294/class-loader-error-unnamed-module-of-loader-org-springframework-boot-devtools\r\n\r\nhttps://stackoverflow.com/questions/39173982/what-is-a-nosuchbeandefinitionexception-and-how-do-i-fix-it\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using.devtools.restart\r\n  [2]: http://start.spring.io","title":"Static variable gets unset after being initialized during Spring Boot application startup","body":"<p>The reason is the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#using.devtools.restart\" rel=\"nofollow noreferrer\">Spring Boot Automatic Restart feature</a> enabled by default via dependency to the <code>spring-boot-devtools</code> added by the <a href=\"http://start.spring.io\" rel=\"nofollow noreferrer\">Spring Initializer</a> that I used to create the project.</p>\n<p>That feature enables loading bean classes via additional class loader.</p>\n<p>In this situation one way to get access to the static variable is like follows:</p>\n<pre><code>private static ApplicationContext getContext() {\n    try {\n        return (ApplicationContext) getClass(ApplicationListenerContext.class.getName())\n            .getField(&quot;CONTEXT&quot;).get(null);\n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n}\n\nprivate static Class getClass(String classname) throws ClassNotFoundException {\n    ClassLoader classLoader = Thread.currentThread().getContextClassLoader();\n    if(classLoader == null) {\n        classLoader = ApplicationListenerContext.class.getClassLoader();\n    }\n    return classLoader.loadClass(classname);\n}\n</code></pre>\n<p>On the other hand, that workaround is not really needed. It is possible to switch off Automatic Restart feature by passing <code>-Dspring.devtools.restart.enabled=false</code> to the application startup parameters.</p>\n<p>Even simpler solution is to exclude <code>spring-boot-devtools</code> dependency from the exploded libraries that I package into the service Docker image:</p>\n<pre><code>        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;install&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;outputDirectory&gt;${project.build.directory}/lib&lt;/outputDirectory&gt;\n                        &lt;excludeArtifactIds&gt;spring-boot-devtools&lt;/excludeArtifactIds&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n</code></pre>\n<p>The following SO questions provide more details on this topic:</p>\n<p><a href=\"https://stackoverflow.com/questions/57750294/class-loader-error-unnamed-module-of-loader-org-springframework-boot-devtools\">Class loader error - unnamed module of loader org.springframework.boot.devtools.restart.classloader.RestartClassLoader</a></p>\n<p><a href=\"https://stackoverflow.com/questions/39173982/what-is-a-nosuchbeandefinitionexception-and-how-do-i-fix-it\">What is a NoSuchBeanDefinitionException and how do I fix it?</a></p>\n"}],"owner":{"account_id":369372,"reputation":4604,"user_id":716720,"accept_rate":60,"display_name":"Sergey Shcherbakov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":766,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69996139,"answer_count":1,"score":1,"last_activity_date":1637097499,"creation_date":1637019801,"question_id":69982232,"body_markdown":"I am trying to get access to the beans instantiated in my Spring Boot ApplicationContext from within static code for Java service provider (META-INF/services). I am using Java 14 (openjdk:14-jdk-slim).\r\n\r\nIn the remote debugger session, I can see that the static variable for the application context `CONTEXT` is getting set to the right value:\r\n```\r\n@Component\r\n@Slf4j\r\npublic class ApplicationContextListener implements ApplicationContextAware {\r\n\tprivate static volatile ApplicationContext CONTEXT;\r\n\r\n\t@Override\r\n\tpublic void setApplicationContext(ApplicationContext applicationContext) throws BeansException {\r\n\t\tCONTEXT = applicationContext;\r\n\t}\r\n...\r\n```\r\n\r\nNext time it is getting accessed at runtime later (from another thread), the variable `CONTEXT` is null, e.g. here:\r\n```\r\n\tpublic static MyBean getMyBean() {\r\n\t\treturn CONTEXT.getBean(MyBean.class);\r\n    }\r\n```\r\n\r\nI suspect that the problem is that the class holding the static variable gets &quot;unloaded&quot; in between. But 1) why would that happen to a class defining a valid bean in the application context 2) how can I avoid that?\r\n\r\nWhat can be the reason for the static variable to become null later during the application execution? There is no code setting the variable except for the one listed above. The `setApplicationContext` is only gets invoked once.\r\n\r\nIf the issue is related to the class unloading, how can I avoid that?\r\n\r\nMaybe my initialization code is executed against static variable in a class loaded by classloader A and access is taking place to the not initialized static variable in the same class loaded by the classlaoder B? Assuming this is the reason, how could I fix this problem?\r\n\r\nThank you!\r\n\r\n**Update**\r\n\r\nThe classloader of the class `ApplicationContextListener` instance when in the method `setApplicationContext` is `org.springframework.boot.devtools.restart.classloader.RestartClassLoader` as returned by `this.getClass().getClassLoader()`.\r\n\r\nWhen the debugger stops later in the `ApplicationContextListener` class static methods the debugger shows `ClassLoaders$AppClassLoader` for the `ApplicationContextListener.class.getClassLoader()`\r\n\r\nThe `Thread.currentThread().getContextClassLoader()` in the latter case (in static get) shows `org.springframework.boot.devtools.restart.classloader.RestartClassLoader` too.\r\n","title":"Static variable gets unset after being initialized during Spring Boot application startup","body":"<p>I am trying to get access to the beans instantiated in my Spring Boot ApplicationContext from within static code for Java service provider (META-INF/services). I am using Java 14 (openjdk:14-jdk-slim).</p>\n<p>In the remote debugger session, I can see that the static variable for the application context <code>CONTEXT</code> is getting set to the right value:</p>\n<pre><code>@Component\n@Slf4j\npublic class ApplicationContextListener implements ApplicationContextAware {\n    private static volatile ApplicationContext CONTEXT;\n\n    @Override\n    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {\n        CONTEXT = applicationContext;\n    }\n...\n</code></pre>\n<p>Next time it is getting accessed at runtime later (from another thread), the variable <code>CONTEXT</code> is null, e.g. here:</p>\n<pre><code>    public static MyBean getMyBean() {\n        return CONTEXT.getBean(MyBean.class);\n    }\n</code></pre>\n<p>I suspect that the problem is that the class holding the static variable gets &quot;unloaded&quot; in between. But 1) why would that happen to a class defining a valid bean in the application context 2) how can I avoid that?</p>\n<p>What can be the reason for the static variable to become null later during the application execution? There is no code setting the variable except for the one listed above. The <code>setApplicationContext</code> is only gets invoked once.</p>\n<p>If the issue is related to the class unloading, how can I avoid that?</p>\n<p>Maybe my initialization code is executed against static variable in a class loaded by classloader A and access is taking place to the not initialized static variable in the same class loaded by the classlaoder B? Assuming this is the reason, how could I fix this problem?</p>\n<p>Thank you!</p>\n<p><strong>Update</strong></p>\n<p>The classloader of the class <code>ApplicationContextListener</code> instance when in the method <code>setApplicationContext</code> is <code>org.springframework.boot.devtools.restart.classloader.RestartClassLoader</code> as returned by <code>this.getClass().getClassLoader()</code>.</p>\n<p>When the debugger stops later in the <code>ApplicationContextListener</code> class static methods the debugger shows <code>ClassLoaders$AppClassLoader</code> for the <code>ApplicationContextListener.class.getClassLoader()</code></p>\n<p>The <code>Thread.currentThread().getContextClassLoader()</code> in the latter case (in static get) shows <code>org.springframework.boot.devtools.restart.classloader.RestartClassLoader</code> too.</p>\n"},{"tags":["java","maven","exec-maven-plugin"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1637097778,"post_id":69996130,"comment_id":123734287,"body_markdown":"Is there a specific reason you defined the plugin in the `pluginManagement` section instead of in the `plugins` section ? Normally, the plugins in the `pluginManagement` section are inherited to &quot;children&quot; of that module, but not executed on the module itself.","body":"Is there a specific reason you defined the plugin in the <code>pluginManagement</code> section instead of in the <code>plugins</code> section ? Normally, the plugins in the <code>pluginManagement</code> section are inherited to &quot;children&quot; of that module, but not executed on the module itself."},{"owner":{"account_id":756193,"reputation":765,"user_id":764027,"accept_rate":74,"display_name":"Russ Petersen"},"score":0,"creation_date":1637099240,"post_id":69996130,"comment_id":123734657,"body_markdown":"The only reason I did there (or the fact I even have a pluginManagement sections) is because of my ignorance (I&#39;m very new to it all). I&#39;ll give that a try and report back. Thanks Turing85.","body":"The only reason I did there (or the fact I even have a pluginManagement sections) is because of my ignorance (I&#39;m very new to it all). I&#39;ll give that a try and report back. Thanks Turing85."},{"owner":{"account_id":756193,"reputation":765,"user_id":764027,"accept_rate":74,"display_name":"Russ Petersen"},"score":0,"creation_date":1637099735,"post_id":69996130,"comment_id":123734783,"body_markdown":"Ding, ding, ding we have a winner. I removed the `pluginManagement` tags and the plugins that were not needed by this sub-module and *voila*, it works. Comes down to my lack of experience. Thanks again!","body":"Ding, ding, ding we have a winner. I removed the <code>pluginManagement</code> tags and the plugins that were not needed by this sub-module and <i>voila</i>, it works. Comes down to my lack of experience. Thanks again!"}],"owner":{"account_id":756193,"reputation":765,"user_id":764027,"accept_rate":74,"display_name":"Russ Petersen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1637101864,"answer_count":0,"score":0,"last_activity_date":1637097435,"creation_date":1637097435,"question_id":69996130,"body_markdown":"I&#39;ve configured *exec-mavein-plugin* in my module&#39;s pom.xml file, but something isn&#39;t quite right.\r\n\r\nI can invoke the goal directory `mvn exec:exec` and it works correctly and creates an executable file. \r\n\r\nI believe it is configured correctly to be attached to the *package* phase. But when the package phase is invoked the output file is not created. I&#39;m hoping a small tweak to the configuration will fix it.\r\n\r\nHere is the pom.xml file.\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.exache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;parent&gt;\r\n    ...\r\n  &lt;/parent&gt;\r\n\r\n  &lt;artifactId&gt;rmqcm&lt;/artifactId&gt;\r\n  &lt;packaging&gt;jar&lt;/packaging&gt;\r\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n  &lt;name&gt;rmqcm&lt;/name&gt;\r\n\r\n  &lt;properties&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;junit&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n      &lt;version&gt;4.11&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n      &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;3.0.0&lt;/version&gt;\r\n      &lt;type&gt;maven-plugin&lt;/type&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;pluginManagement&gt;\r\n      &lt;plugins&gt;\r\n        ...\r\n        &lt;plugin&gt;\r\n          &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n          &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n          &lt;version&gt;3.0.0&lt;/version&gt;\r\n          &lt;executions&gt;\r\n            &lt;execution&gt;\r\n              &lt;id&gt;Create Executable&lt;/id&gt;\r\n              &lt;phase&gt;package&lt;/phase&gt;\r\n              &lt;goals&gt;\r\n                &lt;goal&gt;exec&lt;/goal&gt;\r\n              &lt;/goals&gt;\r\n            &lt;/execution&gt;\r\n          &lt;/executions&gt;\r\n          &lt;configuration&gt;\r\n            &lt;executable&gt;${project.basedir}/scripts/make_rmqcm.bat&lt;/executable&gt;\r\n            &lt;arguments&gt;\r\n              &lt;argument&gt;${project.basedir}\\scripts\\executable_java_stub.sh&lt;/argument&gt;\r\n              &lt;argument&gt;${project.build.directory}\\${project.build.finalName}.jar&lt;/argument&gt;\r\n              &lt;argument&gt;${project.build.directory}\\${project.name}&lt;/argument&gt;\r\n            &lt;/arguments&gt;\r\n          &lt;/configuration&gt;\r\n        &lt;/plugin&gt;        \r\n      &lt;/plugins&gt;\r\n    &lt;/pluginManagement&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\nI appreciate your help.\r\n\r\nRuss Petersen","title":"How can I make the exec-maven-plugin goal be invoked with the Maven package phase?","body":"<p>I've configured <em>exec-mavein-plugin</em> in my module's pom.xml file, but something isn't quite right.</p>\n<p>I can invoke the goal directory <code>mvn exec:exec</code> and it works correctly and creates an executable file.</p>\n<p>I believe it is configured correctly to be attached to the <em>package</em> phase. But when the package phase is invoked the output file is not created. I'm hoping a small tweak to the configuration will fix it.</p>\n<p>Here is the pom.xml file.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.exache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;parent&gt;\n    ...\n  &lt;/parent&gt;\n\n  &lt;artifactId&gt;rmqcm&lt;/artifactId&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;name&gt;rmqcm&lt;/name&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;4.11&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n      &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n      &lt;version&gt;3.0.0&lt;/version&gt;\n      &lt;type&gt;maven-plugin&lt;/type&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;pluginManagement&gt;\n      &lt;plugins&gt;\n        ...\n        &lt;plugin&gt;\n          &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n          &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.0&lt;/version&gt;\n          &lt;executions&gt;\n            &lt;execution&gt;\n              &lt;id&gt;Create Executable&lt;/id&gt;\n              &lt;phase&gt;package&lt;/phase&gt;\n              &lt;goals&gt;\n                &lt;goal&gt;exec&lt;/goal&gt;\n              &lt;/goals&gt;\n            &lt;/execution&gt;\n          &lt;/executions&gt;\n          &lt;configuration&gt;\n            &lt;executable&gt;${project.basedir}/scripts/make_rmqcm.bat&lt;/executable&gt;\n            &lt;arguments&gt;\n              &lt;argument&gt;${project.basedir}\\scripts\\executable_java_stub.sh&lt;/argument&gt;\n              &lt;argument&gt;${project.build.directory}\\${project.build.finalName}.jar&lt;/argument&gt;\n              &lt;argument&gt;${project.build.directory}\\${project.name}&lt;/argument&gt;\n            &lt;/arguments&gt;\n          &lt;/configuration&gt;\n        &lt;/plugin&gt;        \n      &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n\n</code></pre>\n<p>I appreciate your help.</p>\n<p>Russ Petersen</p>\n"},{"tags":["java","file","ioexception","randomaccessfile","filechannel"],"comments":[{"owner":{"account_id":28511,"reputation":7390,"user_id":76237,"display_name":"diginoise"},"score":0,"creation_date":1501600022,"post_id":45441249,"comment_id":77843981,"body_markdown":"is this file memory mapped?","body":"is this file memory mapped?"},{"owner":{"account_id":9324000,"reputation":183,"user_id":6921925,"display_name":"DDoomUs"},"score":0,"creation_date":1501602050,"post_id":45441249,"comment_id":77845340,"body_markdown":"@diginoise, yes","body":"@diginoise, yes"},{"owner":{"account_id":28511,"reputation":7390,"user_id":76237,"display_name":"diginoise"},"score":1,"creation_date":1501602642,"post_id":45441249,"comment_id":77845704,"body_markdown":"heh, see here (section Windows File Delete): http://www.mapdb.org/blog/mmap_files_alloc_and_jvm_crash/ \nthe workaround is not to use NIO package :/","body":"heh, see here (section Windows File Delete): <a href=\"http://www.mapdb.org/blog/mmap_files_alloc_and_jvm_crash/\" rel=\"nofollow noreferrer\">mapdb.org/blog/mmap_files_alloc_and_jvm_crash</a>  the workaround is not to use NIO package :/"},{"owner":{"account_id":9324000,"reputation":183,"user_id":6921925,"display_name":"DDoomUs"},"score":0,"creation_date":1501604159,"post_id":45441249,"comment_id":77846650,"body_markdown":"This is really useful, thanks for the resource. After adding memory mapping and manipulation of the mapped buffer to my test app, I can now reliably get failures outside of my main wildfly application. Thanks a lot for pointing me to this resource.","body":"This is really useful, thanks for the resource. After adding memory mapping and manipulation of the mapped buffer to my test app, I can now reliably get failures outside of my main wildfly application. Thanks a lot for pointing me to this resource."}],"answers":[{"tags":[],"owner":{"account_id":9324000,"reputation":183,"user_id":6921925,"display_name":"DDoomUs"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1637097411,"creation_date":1501617272,"answer_id":45446608,"question_id":45441249,"body_markdown":"There doesn&#39;t appear to be a proper answer / solution to my question, but at least I came across some details which inform the problem, thanks to the link @diginoise posted as a comment.\r\n\r\nI was getting the exception because I was trying to truncate a file for which there was a memory mapped byte buffer still &quot;active&quot;. Apparently there is no way for a user to manually unmap / release Windows&#39; handle on that memory (see [JDK bug][1] in oracle&#39;s bug database).\r\n\r\nIn the end, I think the answer is simply to NOT try truncate / delete these files when I&#39;m done with them but rather keep track of them and process them next time the application starts, that way they&#39;re guaranteed to not have active memory maps.\r\n\r\nBy the way, a `File.deleteOnExit()` also fails under these memory mapped file conditions.\r\n\r\nUntil I implement the more permanent fix of handling the files on next startup, I&#39;ve elected to [manually unmap][2] the memory via reflection. \r\n  \r\n  \r\nThis mitigation does function without throwing errors, it does allow truncation, and does allow deleteOnExit, but this is a short-term unsustainable workaround. It&#39;s not good practice to be using reflection to invoke a method that may not be there depending on the FileChannel implementation. With another implementation of FilChannel I might have broken temp files laying around that never get cleaned up.\r\n\r\n\r\n  [1]: https://bugs.openjdk.java.net/browse/JDK-4724038 &quot;JDK Bug 4724038&quot;\r\n  [2]: http://lotusandjava.blogspot.com/2012/02/how-to-unmap-mappedbytebuffer.html &quot;manual unmapping&quot;","title":"Why does Java FileChannel.truncate fail predictably on Windows only?","body":"<p>There doesn't appear to be a proper answer / solution to my question, but at least I came across some details which inform the problem, thanks to the link @diginoise posted as a comment.</p>\n<p>I was getting the exception because I was trying to truncate a file for which there was a memory mapped byte buffer still &quot;active&quot;. Apparently there is no way for a user to manually unmap / release Windows' handle on that memory (see <a href=\"https://bugs.openjdk.java.net/browse/JDK-4724038\" rel=\"nofollow noreferrer\" title=\"JDK Bug 4724038\">JDK bug</a> in oracle's bug database).</p>\n<p>In the end, I think the answer is simply to NOT try truncate / delete these files when I'm done with them but rather keep track of them and process them next time the application starts, that way they're guaranteed to not have active memory maps.</p>\n<p>By the way, a <code>File.deleteOnExit()</code> also fails under these memory mapped file conditions.</p>\n<p>Until I implement the more permanent fix of handling the files on next startup, I've elected to <a href=\"http://lotusandjava.blogspot.com/2012/02/how-to-unmap-mappedbytebuffer.html\" rel=\"nofollow noreferrer\" title=\"manual unmapping\">manually unmap</a> the memory via reflection.</p>\n<p>This mitigation does function without throwing errors, it does allow truncation, and does allow deleteOnExit, but this is a short-term unsustainable workaround. It's not good practice to be using reflection to invoke a method that may not be there depending on the FileChannel implementation. With another implementation of FilChannel I might have broken temp files laying around that never get cleaned up.</p>\n"}],"owner":{"account_id":9324000,"reputation":183,"user_id":6921925,"display_name":"DDoomUs"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1011,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"closed_date":1501692081,"accepted_answer_id":45446608,"answer_count":1,"score":4,"last_activity_date":1637097411,"creation_date":1501599391,"question_id":45441249,"body_markdown":"I have a web application running in Wildfly, and part of the application uses a temporary file via:\r\n`File.createTempFile(...)`.\r\nThat temporary file is then used as the destination file for a read-write java.io.RandomAccessFile stream. The java.nio.channels.FileChannel for that RandomAccessFile is what is interacted with and eventually truncated (when I&#39;m done with it). Portions of the file do get read-write mapped via `FileChannel.map()`\r\n\r\nAfter all interaction with the file is done, the file is truncated to the proper size using `fileChannel.truncate(size)`. This is where an IOException is always thrown  \r\n `at sun.nio.ch.FileDispatcherImpl.truncate0(Native Method)`\r\n  \r\nThe IOException message is generic:  \r\n`java.io.IOException: The requested operation cannot be performed on a file with a user-mapped section open`.\r\n\r\nThis is a temp file created explicitly by the same process and it has remained open for the duration of work with it, a matter of a few seconds probably. Googling around suggests maybe AV software has a handle on the file, or some other application is using it, but I&#39;ve tried running this on various VM&#39;s and regular windows boxes with different configurations and the problem are reliably reproducible. I think there must be some real abuse of the File facilities occurring, but I&#39;m at a loss.\r\n\r\nAlso, this exception is never seen on a Linux machine, the truncation works reliably. There is no file locking being performed, this is the only file in use, things are being buffered and written to the channel, but nothing very strange is going on.\r\n\r\nFor the record, I have created some sample test apps creating streams, channels, temp files, performing truncations, etc and I am unable to reproduce the problem in a standalone app. Unfortunately, I can&#39;t share the source directly, so I am doing my best to describe what&#39;s occurring in the hopes that someone has run into something similar and can offer some guidance.","title":"Why does Java FileChannel.truncate fail predictably on Windows only?","body":"<p>I have a web application running in Wildfly, and part of the application uses a temporary file via:\n<code>File.createTempFile(...)</code>.\nThat temporary file is then used as the destination file for a read-write java.io.RandomAccessFile stream. The java.nio.channels.FileChannel for that RandomAccessFile is what is interacted with and eventually truncated (when I'm done with it). Portions of the file do get read-write mapped via <code>FileChannel.map()</code></p>\n\n<p>After all interaction with the file is done, the file is truncated to the proper size using <code>fileChannel.truncate(size)</code>. This is where an IOException is always thrown<br>\n <code>at sun.nio.ch.FileDispatcherImpl.truncate0(Native Method)</code></p>\n\n<p>The IOException message is generic:<br>\n<code>java.io.IOException: The requested operation cannot be performed on a file with a user-mapped section open</code>.</p>\n\n<p>This is a temp file created explicitly by the same process and it has remained open for the duration of work with it, a matter of a few seconds probably. Googling around suggests maybe AV software has a handle on the file, or some other application is using it, but I've tried running this on various VM's and regular windows boxes with different configurations and the problem are reliably reproducible. I think there must be some real abuse of the File facilities occurring, but I'm at a loss.</p>\n\n<p>Also, this exception is never seen on a Linux machine, the truncation works reliably. There is no file locking being performed, this is the only file in use, things are being buffered and written to the channel, but nothing very strange is going on.</p>\n\n<p>For the record, I have created some sample test apps creating streams, channels, temp files, performing truncations, etc and I am unable to reproduce the problem in a standalone app. Unfortunately, I can't share the source directly, so I am doing my best to describe what's occurring in the hopes that someone has run into something similar and can offer some guidance.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":1,"creation_date":1637097241,"post_id":69996074,"comment_id":123734144,"body_markdown":"When you have a field `xy` and you assign it `xy=xx` is actually a shorthand notation for `this.xy=xx`.","body":"When you have a field <code>xy</code> and you assign it <code>xy=xx</code> is actually a shorthand notation for <code>this.xy=xx</code>."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":2,"creation_date":1637097308,"post_id":69996074,"comment_id":123734170,"body_markdown":"Also, when somebody says &quot;class variable&quot; they probably mean a &#39;static&#39; variable. Maybe you can make a more concrete example to illustrate your question?","body":"Also, when somebody says &quot;class variable&quot; they probably mean a &#39;static&#39; variable. Maybe you can make a more concrete example to illustrate your question?"}],"owner":{"account_id":18362363,"reputation":29,"user_id":13374208,"display_name":"Shervin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1637097426,"answer_count":0,"score":0,"last_activity_date":1637097388,"creation_date":1637097084,"question_id":69996074,"body_markdown":"Does it make no difference whether I assign the values directly to the object via the constructor (within the class) (this.xy = xx) or whether I assign it to the class variable (xy = xx).\r\n\r\nI understood it to mean that the class itself was just a kind of construction plan. I thought that if you create an object from a class (Class class = new Class (xx)) and this calls the constructor, that at that point in time the object has already been created and now only the values are assigned for the first time. According to this understanding, it should actually not be possible to assign the values to the class and its attributes, but rather I would have to assign it directly to the object. But apparently it works anyway. Maybe someone can explain to me what I didn&#39;t quite understand.","title":"Difference between assignment to object variable and class variable/attribute","body":"<p>Does it make no difference whether I assign the values directly to the object via the constructor (within the class) (this.xy = xx) or whether I assign it to the class variable (xy = xx).</p>\n<p>I understood it to mean that the class itself was just a kind of construction plan. I thought that if you create an object from a class (Class class = new Class (xx)) and this calls the constructor, that at that point in time the object has already been created and now only the values are assigned for the first time. According to this understanding, it should actually not be possible to assign the values to the class and its attributes, but rather I would have to assign it directly to the object. But apparently it works anyway. Maybe someone can explain to me what I didn't quite understand.</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1637097237,"post_id":69995881,"comment_id":123734141,"body_markdown":"Do you have to use a regular expression?  `&quot;/SearchServer&quot;.equals(new URI(string).getPath())` will check for a valid URI syntax.","body":"Do you have to use a regular expression?  <code>&quot;&#47;SearchServer&quot;.equals(new URI(string).getPath())</code> will check for a valid URI syntax."}],"answers":[{"tags":[],"owner":{"account_id":11054990,"reputation":713,"user_id":8118052,"display_name":"Ofer Skulsky"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637097387,"creation_date":1637097387,"answer_id":69996124,"question_id":69995881,"body_markdown":"you can start with:\r\n```java\r\nfinal String regex = &quot;((tcp|http|https):\\\\/\\\\/)?[\\\\w.]+(:\\\\d+)\\\\/[\\\\/\\\\w]*&quot;;\r\nfinal String string = &quot;tcp://serverName:8080/SearchServer&quot;;\r\n```\r\nso you optionally have the `protocol` with `://`,  \r\nfollowed by mix of letters and `.`, optional `:port` and then a mix of letters and `/`\r\n\r\nthere are more things to add, but this is a good start :)","title":"RegEx to check URL syntax","body":"<p>you can start with:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final String regex = &quot;((tcp|http|https):\\\\/\\\\/)?[\\\\w.]+(:\\\\d+)\\\\/[\\\\/\\\\w]*&quot;;\nfinal String string = &quot;tcp://serverName:8080/SearchServer&quot;;\n</code></pre>\n<p>so you optionally have the <code>protocol</code> with <code>://</code>,<br />\nfollowed by mix of letters and <code>.</code>, optional <code>:port</code> and then a mix of letters and <code>/</code></p>\n<p>there are more things to add, but this is a good start :)</p>\n"}],"owner":{"account_id":23359803,"reputation":21,"user_id":17432223,"display_name":"Ryan E"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1637097387,"creation_date":1637095852,"question_id":69995881,"body_markdown":"I&#39;m trying to use Regex to verify the syntax and pattern of a URL before it is used for testing. Regex is not my forte, however I thought it would be fairly simple. \r\n\r\nThe url pattern is a follows tcp://serverName:port/SearchServer\r\n\r\nWhat I have tried is this. However it fails what should be a valid syntax\r\n`String regex = &quot;(tcp:\\\\/\\\\/)?[A-Za-z0-9]?&quot; + &quot;/^:/$&quot; + &quot;[0-9]?&quot; + &quot;/^/SearchServer$/&quot;;`\r\n","title":"RegEx to check URL syntax","body":"<p>I'm trying to use Regex to verify the syntax and pattern of a URL before it is used for testing. Regex is not my forte, however I thought it would be fairly simple.</p>\n<p>The url pattern is a follows tcp://serverName:port/SearchServer</p>\n<p>What I have tried is this. However it fails what should be a valid syntax\n<code>String regex = &quot;(tcp:\\\\/\\\\/)?[A-Za-z0-9]?&quot; + &quot;/^:/$&quot; + &quot;[0-9]?&quot; + &quot;/^/SearchServer$/&quot;;</code></p>\n"},{"tags":["java","java-time"],"comments":[{"owner":{"account_id":6066704,"reputation":589,"user_id":4736732,"accept_rate":77,"display_name":"whydoieven"},"score":0,"creation_date":1532610923,"post_id":51539709,"comment_id":90047126,"body_markdown":"Hi Michael, sorry, messed that up. it is java.time","body":"Hi Michael, sorry, messed that up. it is java.time"},{"owner":{"account_id":6422582,"reputation":200,"user_id":4978856,"display_name":"ante_f"},"score":0,"creation_date":1532612596,"post_id":51539709,"comment_id":90048333,"body_markdown":"Hi @Sriram, I believe Tim&#39;s answer is better than mine and it should be accepted instead of mine.","body":"Hi @Sriram, I believe Tim&#39;s answer is better than mine and it should be accepted instead of mine."},{"owner":{"account_id":2094057,"reputation":506072,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":0,"creation_date":1532613433,"post_id":51539709,"comment_id":90048853,"body_markdown":"@nytez Nah...your code runs, I tested it.  Enjoy the onslaught of green points in your inbox :P","body":"@nytez Nah...your code runs, I tested it.  Enjoy the onslaught of green points in your inbox :P"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1532693629,"post_id":51539709,"comment_id":90082146,"body_markdown":"There should be no reason to switch back to `Calendar` (and many reasons not to). Median? Do you mean average? The median between two points doesn’t seem very interesting, and I know of a couple of different definitions of what it is.","body":"There should be no reason to switch back to <code>Calendar</code> (and many reasons not to). Median? Do you mean average? The median between two points doesn’t seem very interesting, and I know of a couple of different definitions of what it is."}],"answers":[{"tags":[],"owner":{"account_id":2094057,"reputation":506072,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1532612079,"creation_date":1532610999,"answer_id":51539802,"question_id":51539709,"body_markdown":"Try using `DAYS.between()`:\r\n\r\n    LocalDate gerbutsmin = YearMonth.now().plusMonths(2).atDay(1);\r\n    LocalDate gerbutsmax = YearMonth.now().plusMonths(15).atDay(1);\r\n    long numDays = ChronoUnit.DAYS.between(gerbutsmin, gerbutsmax);\r\n    LocalDate median = gerbutsmin.plusDays(numDays / 2L);  // plusDays takes a long\r\n    System.out.println(median);\r\n\r\n    2019-03-17\r\n    (output as of today, which is 2019-07-26)\r\n\r\n[&lt;h2&gt;Demo&lt;/h2&gt;][1]\r\n\r\nThere is a boundary condition should the difference between your min and max dates be an odd number.  In this case, there is no formal median day, but rather the median would fall in between two days.\r\n\r\n**Note:**\r\n\r\nIf you&#39;re wondering what happens exactly in the edge case, if the low date were today (`2018-07-26`) and the high date three days away (`2018-07-29`), then the median would be reported as `2018-07-27`.\r\n\r\n  [1]: http://rextester.com/HLPTP88325","title":"Find the Median Date between two dates using Java 8","body":"<p>Try using <code>DAYS.between()</code>:</p>\n\n<pre><code>LocalDate gerbutsmin = YearMonth.now().plusMonths(2).atDay(1);\nLocalDate gerbutsmax = YearMonth.now().plusMonths(15).atDay(1);\nlong numDays = ChronoUnit.DAYS.between(gerbutsmin, gerbutsmax);\nLocalDate median = gerbutsmin.plusDays(numDays / 2L);  // plusDays takes a long\nSystem.out.println(median);\n\n2019-03-17\n(output as of today, which is 2019-07-26)\n</code></pre>\n\n<p><a href=\"http://rextester.com/HLPTP88325\" rel=\"noreferrer\"><h2>Demo</h2></a></p>\n\n<p>There is a boundary condition should the difference between your min and max dates be an odd number.  In this case, there is no formal median day, but rather the median would fall in between two days.</p>\n\n<p><strong>Note:</strong></p>\n\n<p>If you're wondering what happens exactly in the edge case, if the low date were today (<code>2018-07-26</code>) and the high date three days away (<code>2018-07-29</code>), then the median would be reported as <code>2018-07-27</code>.</p>\n"},{"tags":[],"owner":{"account_id":6422582,"reputation":200,"user_id":4978856,"display_name":"ante_f"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1532611165,"creation_date":1532611153,"answer_id":51539859,"question_id":51539709,"body_markdown":"    LocalDate gerbutsmin = YearMonth.now().plusMonths(2).atDay(1);\r\n    LocalDate gerbutsmax = YearMonth.now().plusMonths(15).atDay(1);\r\n    \r\n    LocalDate median = gerbutsmin.plusDays(ChronoUnit.DAYS.between(gerbutsmin, gerbutsmax) / 2);","title":"Find the Median Date between two dates using Java 8","body":"<pre><code>LocalDate gerbutsmin = YearMonth.now().plusMonths(2).atDay(1);\nLocalDate gerbutsmax = YearMonth.now().plusMonths(15).atDay(1);\n\nLocalDate median = gerbutsmin.plusDays(ChronoUnit.DAYS.between(gerbutsmin, gerbutsmax) / 2);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12547420,"reputation":353,"user_id":9130223,"display_name":"MBaev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1532611348,"creation_date":1532611348,"answer_id":51539943,"question_id":51539709,"body_markdown":"&quot;Middle of two dates&quot; is not unambiguously defined - you must decide how to handle dates an odd number of days apart (e.g. what is the middle date between 1st and 4th of a month, or between 1st and 2nd), and what to do with the time portion of the date object.\r\n\r\nThe concrete problem with your approach is that dates are not numbers, so you cannot add them and divide them by two. To do that, use the getTime() method to obtain the number of seconds since the epoch, and operate on that:\r\n\r\n    var middate = new Date((startdate.getTime() + enddate.getTime()) / 2.0);\r\nThis will give you the middle between two dates, treating them as points in time.\r\n\r\nClick [here](https://stackoverflow.com/a/21603229/9130223)","title":"Find the Median Date between two dates using Java 8","body":"<p>\"Middle of two dates\" is not unambiguously defined - you must decide how to handle dates an odd number of days apart (e.g. what is the middle date between 1st and 4th of a month, or between 1st and 2nd), and what to do with the time portion of the date object.</p>\n\n<p>The concrete problem with your approach is that dates are not numbers, so you cannot add them and divide them by two. To do that, use the getTime() method to obtain the number of seconds since the epoch, and operate on that:</p>\n\n<pre><code>var middate = new Date((startdate.getTime() + enddate.getTime()) / 2.0);\n</code></pre>\n\n<p>This will give you the middle between two dates, treating them as points in time.</p>\n\n<p>Click <a href=\"https://stackoverflow.com/a/21603229/9130223\">here</a></p>\n"},{"tags":[],"owner":{"account_id":4270832,"reputation":1,"user_id":7455006,"display_name":"manoj panwar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637097211,"creation_date":1637097211,"answer_id":69996092,"question_id":51539709,"body_markdown":"\tLocalDateTime startime = LocalDateTime.now();\r\n\tLocalDateTime endtime = startime.plusDays(4);\r\n\t\t\r\n\tlong diff = endtime.until(startime, ChronoUnit.MINUTES);\r\n\tLocalDateTime middleTime = startime.plusMinutes(diff / 2); ","title":"Find the Median Date between two dates using Java 8","body":"<pre><code>LocalDateTime startime = LocalDateTime.now();\nLocalDateTime endtime = startime.plusDays(4);\n    \nlong diff = endtime.until(startime, ChronoUnit.MINUTES);\nLocalDateTime middleTime = startime.plusMinutes(diff / 2); \n</code></pre>\n"}],"owner":{"account_id":6066704,"reputation":589,"user_id":4736732,"accept_rate":77,"display_name":"whydoieven"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3006,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":51539859,"answer_count":4,"score":4,"last_activity_date":1637097211,"creation_date":1532610728,"question_id":51539709,"body_markdown":"I&#39;m finding it difficult that what it sounds. \r\n\r\nSo, I have a max date and a min date and I need to find the median date between these two dates. I use Java 8 to find my max and min dates, \r\n\r\n    LocalDate gerbutsmin = YearMonth.now().plusMonths(2).atDay(1);\r\n    LocalDate gerbutsmax = YearMonth.now().plusMonths(15).atDay(1);\r\n\r\nHow would I go ahead after this? Maybe I need to switch back to Calander? ","title":"Find the Median Date between two dates using Java 8","body":"<p>I'm finding it difficult that what it sounds. </p>\n\n<p>So, I have a max date and a min date and I need to find the median date between these two dates. I use Java 8 to find my max and min dates, </p>\n\n<pre><code>LocalDate gerbutsmin = YearMonth.now().plusMonths(2).atDay(1);\nLocalDate gerbutsmax = YearMonth.now().plusMonths(15).atDay(1);\n</code></pre>\n\n<p>How would I go ahead after this? Maybe I need to switch back to Calander? </p>\n"},{"tags":["java","raspberry-pi","pwm","pi4j"],"answers":[{"tags":[],"owner":{"account_id":32369,"reputation":51044,"user_id":89766,"accept_rate":92,"display_name":"George Profenza"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637097148,"creation_date":1637097148,"answer_id":69996085,"question_id":69995901,"body_markdown":"I haven&#39;t used NeoPixels directly on a Pi before (though I have many times used [FadeCandy][1] which is a USB LED controller that also does some nice dithering/frame blending).\r\n\r\nDriving NeoPixels isn&#39;t as straight forward as plain PWM on individual LEDs.\r\n\r\nThere&#39;s a good [Adafruit RaspberryPi NeoPixel wiring/coding tutorial][2].\r\nThe notes on wiring/power are super useful. Even though the code is in Python,\r\nit&#39;s still useful to test/run.\r\n\r\nHaving a quick look at the pi4j documentation, while it has all the &quot;ingredients&quot;, it doesn&#39;t have built-in support for NeoPixels.\r\nDoing a quick search I spotted [the diozero library][3] which seems to have [support for NeoPixels][4].\r\n\r\nI haven&#39;t tested `diozero`, but it&#39;s worth giving it a go.\r\n\r\n\r\n  [1]: https://www.adafruit.com/product/1689\r\n  [2]: https://learn.adafruit.com/neopixels-on-raspberry-pi?view=all\r\n  [3]: https://www.diozero.com/\r\n  [4]: https://www.diozero.com/devices/ledstrips.html","title":"How to control adressable RGB leds with raspberryPi in Java","body":"<p>I haven't used NeoPixels directly on a Pi before (though I have many times used <a href=\"https://www.adafruit.com/product/1689\" rel=\"nofollow noreferrer\">FadeCandy</a> which is a USB LED controller that also does some nice dithering/frame blending).</p>\n<p>Driving NeoPixels isn't as straight forward as plain PWM on individual LEDs.</p>\n<p>There's a good <a href=\"https://learn.adafruit.com/neopixels-on-raspberry-pi?view=all\" rel=\"nofollow noreferrer\">Adafruit RaspberryPi NeoPixel wiring/coding tutorial</a>.\nThe notes on wiring/power are super useful. Even though the code is in Python,\nit's still useful to test/run.</p>\n<p>Having a quick look at the pi4j documentation, while it has all the &quot;ingredients&quot;, it doesn't have built-in support for NeoPixels.\nDoing a quick search I spotted <a href=\"https://www.diozero.com/\" rel=\"nofollow noreferrer\">the diozero library</a> which seems to have <a href=\"https://www.diozero.com/devices/ledstrips.html\" rel=\"nofollow noreferrer\">support for NeoPixels</a>.</p>\n<p>I haven't tested <code>diozero</code>, but it's worth giving it a go.</p>\n"}],"owner":{"account_id":19436193,"reputation":120,"user_id":14215608,"display_name":"error13660"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":747,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":69996085,"answer_count":1,"score":2,"last_activity_date":1637097148,"creation_date":1637096003,"question_id":69995901,"body_markdown":"I have a strip of WS2811 adressable RGB leds and I am trying to control them using my raspberry pi. I am programming in java.\r\nTo access the GPIO I am using a java library called Pi4j (version 1.2; java 8).\r\nThis version has built-in PWM control.\r\n\r\nMy question is the following:\r\nHow can I send the data to the leds trough a GPIO pin?\r\n\r\n(I am still a beginner when it comes to physical computing, so please be gentle)","title":"How to control adressable RGB leds with raspberryPi in Java","body":"<p>I have a strip of WS2811 adressable RGB leds and I am trying to control them using my raspberry pi. I am programming in java.\nTo access the GPIO I am using a java library called Pi4j (version 1.2; java 8).\nThis version has built-in PWM control.</p>\n<p>My question is the following:\nHow can I send the data to the leds trough a GPIO pin?</p>\n<p>(I am still a beginner when it comes to physical computing, so please be gentle)</p>\n"},{"tags":["java","android","android-permissions","android-10.0"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1620971386,"post_id":67529541,"comment_id":119360422,"body_markdown":"Requesting legacy external storage in manifest should be enough to access the Documents folder in the classic way under Android 10.","body":"Requesting legacy external storage in manifest should be enough to access the Documents folder in the classic way under Android 10."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1620971464,"post_id":67529541,"comment_id":119360436,"body_markdown":"Of course the user can browse the whole external storage when the gui for ACTION_OPEN_DOCUMENTS_TREE opens. Learn the user how to browse. Indeed some things are tricky. That gui does not show internal/external storage by default..","body":"Of course the user can browse the whole external storage when the gui for ACTION_OPEN_DOCUMENTS_TREE opens. Learn the user how to browse. Indeed some things are tricky. That gui does not show internal/external storage by default.."},{"owner":{"account_id":14272435,"reputation":2163,"user_id":10309564,"display_name":"grolschie"},"score":0,"creation_date":1620972579,"post_id":67529541,"comment_id":119360711,"body_markdown":"Thanks. I suspect requesting legacy storage might be being ignored when targeting Android 30.","body":"Thanks. I suspect requesting legacy storage might be being ignored when targeting Android 30."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1620977225,"post_id":67529541,"comment_id":119362055,"body_markdown":"No. It is not for an Android 10 device.","body":"No. It is not for an Android 10 device."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1620983881,"post_id":67529541,"comment_id":119364313,"body_markdown":"You will not have forgotten to add code for requesting  runtime permissions? And can you use the Pictures or DCIM directory?","body":"You will not have forgotten to add code for requesting  runtime permissions? And can you use the Pictures or DCIM directory?"},{"owner":{"account_id":14272435,"reputation":2163,"user_id":10309564,"display_name":"grolschie"},"score":0,"creation_date":1620986074,"post_id":67529541,"comment_id":119365081,"body_markdown":"Found the problem (see answer below). Thanks for your help.","body":"Found the problem (see answer below). Thanks for your help."},{"owner":{"account_id":2605326,"reputation":670,"user_id":2256592,"display_name":"Joe Okatch"},"score":1,"creation_date":1633733079,"post_id":67529541,"comment_id":122847514,"body_markdown":"I think there&#39;s a slight confusion. I noticed that it should be Environment.getExternalStoragePublicDirectory and not Environment.getExternalPublicStorageDirectory","body":"I think there&#39;s a slight confusion. I noticed that it should be Environment.getExternalStoragePublicDirectory and not Environment.getExternalPublicStorageDirectory"},{"owner":{"account_id":14272435,"reputation":2163,"user_id":10309564,"display_name":"grolschie"},"score":0,"creation_date":1637097089,"post_id":67529541,"comment_id":123734078,"body_markdown":"Thanks. You are right. I have corrected this.","body":"Thanks. You are right. I have corrected this."}],"answers":[{"tags":[],"owner":{"account_id":14272435,"reputation":2163,"user_id":10309564,"display_name":"grolschie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637097054,"creation_date":1620984017,"answer_id":67531936,"question_id":67529541,"body_markdown":"Actually, the problem was that on this particular Android 10 device there was no &quot;Documents&quot; folder. Manually creating one fixed it. So the real gotcha is that ```Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOCUMENTS)``` sometimes doesn&#39;t give you a &quot;Documents&quot; directory depending on the device.\r\n\r\nHowever, I&#39;m not convinced this is the correct way to do this with Android 11 (even though it&#39;s currently working for me).","title":"Read/Write access to &#39;Documents&#39; folder for all Android versions?","body":"<p>Actually, the problem was that on this particular Android 10 device there was no &quot;Documents&quot; folder. Manually creating one fixed it. So the real gotcha is that <code>Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOCUMENTS)</code> sometimes doesn't give you a &quot;Documents&quot; directory depending on the device.</p>\n<p>However, I'm not convinced this is the correct way to do this with Android 11 (even though it's currently working for me).</p>\n"}],"owner":{"account_id":14272435,"reputation":2163,"user_id":10309564,"display_name":"grolschie"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2586,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1637097054,"creation_date":1620970899,"question_id":67529541,"body_markdown":"I&#39;m currently using ```Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOCUMENTS)``` as a path. I have requested ```android.permission.WRITE_EXTERNAL_STORAGE```. I am targeting SDK 30. I have had success reading and writing a file on Android 8 and Android 11, but not Android 10. Adding ```android:ignore=&quot;ScopedStorage&quot;``` and ```android:requestLegacyExternalStorage=&quot;true&quot;``` to my AndroidManifest.xml didn&#39;t work.\r\n\r\nReading through the official docs, it&#39;s very confusing. I tried an alternative approach with an  ```ACTION_OPEN_DOCUMENT_TREE``` indent, but all I could navigate was the Downloads folder. I couldn&#39;t get to the Documents folder.\r\n\r\nThere are multiple questions on here that are similar, but don&#39;t quite get to the nub of the matter for me. Can anyone please share some light on how to do something as basic as simple file access to the Documents folder?\r\n","title":"Read/Write access to &#39;Documents&#39; folder for all Android versions?","body":"<p>I'm currently using <code>Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOCUMENTS)</code> as a path. I have requested <code>android.permission.WRITE_EXTERNAL_STORAGE</code>. I am targeting SDK 30. I have had success reading and writing a file on Android 8 and Android 11, but not Android 10. Adding <code>android:ignore=&quot;ScopedStorage&quot;</code> and <code>android:requestLegacyExternalStorage=&quot;true&quot;</code> to my AndroidManifest.xml didn't work.</p>\n<p>Reading through the official docs, it's very confusing. I tried an alternative approach with an  <code>ACTION_OPEN_DOCUMENT_TREE</code> indent, but all I could navigate was the Downloads folder. I couldn't get to the Documents folder.</p>\n<p>There are multiple questions on here that are similar, but don't quite get to the nub of the matter for me. Can anyone please share some light on how to do something as basic as simple file access to the Documents folder?</p>\n"},{"tags":["java","mysql","gis","jooq"],"comments":[{"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1495449403,"post_id":44075098,"comment_id":75240642,"body_markdown":"What&#39;s the expected SQL string you&#39;re trying to generate?","body":"What&#39;s the expected SQL string you&#39;re trying to generate?"},{"owner":{"account_id":1316021,"reputation":169,"user_id":2815142,"display_name":"Desiderantes"},"score":0,"creation_date":1495484350,"post_id":44075098,"comment_id":75262227,"body_markdown":"Something like `INSERT INTO table_test (poly ) VALUES (ST_GeomFromText ( &#39;POLYGON (00,11,00)&#39;));`\n\n`SELECT ST_AsWKT(table_test.poly) from poly WHERE ...`","body":"Something like <code>INSERT INTO table_test (poly ) VALUES (ST_GeomFromText ( &#39;POLYGON (00,11,00)&#39;));</code>  <code>SELECT ST_AsWKT(table_test.poly) from poly WHERE ...</code>"}],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1637096622,"creation_date":1495547705,"answer_id":44136850,"question_id":44075098,"body_markdown":"*Note that starting from jOOQ 3.16 ([see #982][1]), jOOQ supports various popular GIS implementations out of the box.*\r\n\r\nFrom what I understand, you&#39;d like two things to happen automatically:\r\n\r\n### String bind values should be wrapped with the `ST_GeomFromText()` function\r\n\r\nThis is the &quot;easy&quot; part and you almost got it right:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    @Override\r\n    public void sql(BindingSQLContext&lt;Polygon&gt; ctx) throws SQLException {\r\n        ctx.render()\r\n           .sql(&quot;ST_GeomFromText(&quot;)\r\n           // This will use your converter to convert from a Polygon to &quot;Object&quot;\r\n           // prior to binding the variable\r\n           .visit(DSL.val(ctx.convert(converter()).value()))\r\n           .sql(&quot;)&quot;);\r\n    }\r\n\r\n\r\n    @Override\r\n    public void set(BindingSetStatementContext&lt;Polygon&gt; ctx) throws SQLException {\r\n        // No wrapping of the bind variable in functions can be done here!\r\n        ctx.statement().setString(ctx.index(), ctx.convert(converter()).value());\r\n    }\r\n\r\n### Polygon type columns should be formatted with the `ST_AsWKT()` function\r\n\r\nYou (probably) don&#39;t have to do anything specific here inside of the binding, as your binding cannot influence any expression where no bind variable is involved (e.g. an ordinary column expression).\r\n\r\nInstead, you might need to adapt your converter (the one inside the binding) to be able to read any type that comes back from the JDBC driver and convert that into a `Polygon`\r\n\r\n\r\n  [1]: https://github.com/jOOQ/jOOQ/issues/982","title":"MySQL POLYGON ←→ Jts Polygon with JOOQ (as WKT)","body":"<p><em>Note that starting from jOOQ 3.16 (<a href=\"https://github.com/jOOQ/jOOQ/issues/982\" rel=\"nofollow noreferrer\">see #982</a>), jOOQ supports various popular GIS implementations out of the box.</em></p>\n<p>From what I understand, you'd like two things to happen automatically:</p>\n<h3>String bind values should be wrapped with the <code>ST_GeomFromText()</code> function</h3>\n<p>This is the &quot;easy&quot; part and you almost got it right:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic void sql(BindingSQLContext&lt;Polygon&gt; ctx) throws SQLException {\n    ctx.render()\n       .sql(&quot;ST_GeomFromText(&quot;)\n       // This will use your converter to convert from a Polygon to &quot;Object&quot;\n       // prior to binding the variable\n       .visit(DSL.val(ctx.convert(converter()).value()))\n       .sql(&quot;)&quot;);\n}\n\n\n@Override\npublic void set(BindingSetStatementContext&lt;Polygon&gt; ctx) throws SQLException {\n    // No wrapping of the bind variable in functions can be done here!\n    ctx.statement().setString(ctx.index(), ctx.convert(converter()).value());\n}\n</code></pre>\n<h3>Polygon type columns should be formatted with the <code>ST_AsWKT()</code> function</h3>\n<p>You (probably) don't have to do anything specific here inside of the binding, as your binding cannot influence any expression where no bind variable is involved (e.g. an ordinary column expression).</p>\n<p>Instead, you might need to adapt your converter (the one inside the binding) to be able to read any type that comes back from the JDBC driver and convert that into a <code>Polygon</code></p>\n"}],"owner":{"account_id":1316021,"reputation":169,"user_id":2815142,"display_name":"Desiderantes"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":593,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":44136850,"answer_count":1,"score":1,"last_activity_date":1637096622,"creation_date":1495212177,"question_id":44075098,"body_markdown":"I&#39;m trying to get a seamlessly conversion between MySQL POLYGON type, and Jts Polygon while using jOOQ (3.9.x). Ideally, I want to just parse the WKT (well known text) from the DB into the Jts type. However, the generated queries are not working, I see that they get simple quote marks around the function that converts to text, rendering it just text. Here&#39;s the converter and the binding that I&#39;m using. Am I doing this right? How should I approach the conversion via ST_AsWKT and ST_GeomFromText?\r\n\r\n    public class PolygonConverter implements Converter&lt;Object, Polygon&gt; {\r\n    \r\n    \r\n        /**\r\n         * Convert WK string into Polygon\r\n         */\r\n    \r\n        @Override\r\n        public Polygon from(Object databaseObject) {\r\n            if (databaseObject == null) {\r\n                return null;\r\n            }\r\n            String wkString = databaseObject.toString();\r\n            WKTReader reader = JtsSpatialContext.GEO.getWktShapeParser();\r\n            try {\r\n                Polygon poly = (Polygon)reader.parse(wkString);\r\n                return poly;\r\n            } catch (java.text.ParseException e) {\r\n                throw new IllegalArgumentException(e);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public Object to(Polygon userObject) {\r\n            if (userObject == null) {\r\n                return null;\r\n            }\r\n            return userObject.toString();\r\n        }\r\n    \r\n        @Override\r\n        public Class&lt;Object&gt; fromType() {\r\n            return Object.class;\r\n        }\r\n    \r\n        @Override\r\n        public Class&lt;Polygon&gt; toType() {\r\n            return Polygon.class;\r\n        }\r\n    }\r\n\r\nThe Binding:\r\n\r\n    public class MySQLPolygonBinding implements Binding&lt;Object, Polygon&gt; {\r\n        @Override\r\n        public Converter&lt;Object, Polygon&gt; converter() {\r\n            return new PolygonConverter();\r\n        }\r\n    \r\n        @Override\r\n        public void sql(BindingSQLContext&lt;Polygon&gt; ctx) throws SQLException {\r\n            ctx.render().visit(DSL.sql(&quot;ST_AsWKT(?)&quot;));\r\n        }\r\n    \r\n        @Override\r\n        public void register(BindingRegisterContext&lt;Polygon&gt; ctx) throws SQLException {\r\n            throw new SQLFeatureNotSupportedException();\r\n        }\r\n    \r\n        @Override\r\n        public void set(BindingSetStatementContext&lt;Polygon&gt; ctx) throws SQLException {\r\n            String resultStr = null;\r\n            Object obj = ctx.convert(converter()).value();\r\n            if (obj != null) {\r\n                resultStr = String.format(&quot;ST_GeomFromText(&#39;%s&#39;)&quot;, obj,toString() );\r\n            }\r\n            ctx.statement().setObject(ctx.index(), resultStr);\r\n        }\r\n    \r\n        @Override\r\n        public void set(BindingSetSQLOutputContext&lt;Polygon&gt; ctx) throws SQLException {\r\n            throw new SQLFeatureNotSupportedException();\r\n        }\r\n    \r\n        @Override\r\n        public void get(BindingGetResultSetContext&lt;Polygon&gt; ctx) throws SQLException {\r\n            ctx.convert(converter()).value(ctx.resultSet().getString(ctx.index()));\r\n        }\r\n    \r\n        @Override\r\n        public void get(BindingGetStatementContext&lt;Polygon&gt; ctx) throws SQLException {\r\n            ctx.convert(converter()).value(ctx.statement().getString(ctx.index()));\r\n        }\r\n    \r\n        @Override\r\n        public void get(BindingGetSQLInputContext&lt;Polygon&gt; ctx) throws SQLException {\r\n            throw new SQLFeatureNotSupportedException();\r\n        }\r\n    }","title":"MySQL POLYGON ←→ Jts Polygon with JOOQ (as WKT)","body":"<p>I'm trying to get a seamlessly conversion between MySQL POLYGON type, and Jts Polygon while using jOOQ (3.9.x). Ideally, I want to just parse the WKT (well known text) from the DB into the Jts type. However, the generated queries are not working, I see that they get simple quote marks around the function that converts to text, rendering it just text. Here's the converter and the binding that I'm using. Am I doing this right? How should I approach the conversion via ST_AsWKT and ST_GeomFromText?</p>\n\n<pre><code>public class PolygonConverter implements Converter&lt;Object, Polygon&gt; {\n\n\n    /**\n     * Convert WK string into Polygon\n     */\n\n    @Override\n    public Polygon from(Object databaseObject) {\n        if (databaseObject == null) {\n            return null;\n        }\n        String wkString = databaseObject.toString();\n        WKTReader reader = JtsSpatialContext.GEO.getWktShapeParser();\n        try {\n            Polygon poly = (Polygon)reader.parse(wkString);\n            return poly;\n        } catch (java.text.ParseException e) {\n            throw new IllegalArgumentException(e);\n        }\n    }\n\n    @Override\n    public Object to(Polygon userObject) {\n        if (userObject == null) {\n            return null;\n        }\n        return userObject.toString();\n    }\n\n    @Override\n    public Class&lt;Object&gt; fromType() {\n        return Object.class;\n    }\n\n    @Override\n    public Class&lt;Polygon&gt; toType() {\n        return Polygon.class;\n    }\n}\n</code></pre>\n\n<p>The Binding:</p>\n\n<pre><code>public class MySQLPolygonBinding implements Binding&lt;Object, Polygon&gt; {\n    @Override\n    public Converter&lt;Object, Polygon&gt; converter() {\n        return new PolygonConverter();\n    }\n\n    @Override\n    public void sql(BindingSQLContext&lt;Polygon&gt; ctx) throws SQLException {\n        ctx.render().visit(DSL.sql(\"ST_AsWKT(?)\"));\n    }\n\n    @Override\n    public void register(BindingRegisterContext&lt;Polygon&gt; ctx) throws SQLException {\n        throw new SQLFeatureNotSupportedException();\n    }\n\n    @Override\n    public void set(BindingSetStatementContext&lt;Polygon&gt; ctx) throws SQLException {\n        String resultStr = null;\n        Object obj = ctx.convert(converter()).value();\n        if (obj != null) {\n            resultStr = String.format(\"ST_GeomFromText('%s')\", obj,toString() );\n        }\n        ctx.statement().setObject(ctx.index(), resultStr);\n    }\n\n    @Override\n    public void set(BindingSetSQLOutputContext&lt;Polygon&gt; ctx) throws SQLException {\n        throw new SQLFeatureNotSupportedException();\n    }\n\n    @Override\n    public void get(BindingGetResultSetContext&lt;Polygon&gt; ctx) throws SQLException {\n        ctx.convert(converter()).value(ctx.resultSet().getString(ctx.index()));\n    }\n\n    @Override\n    public void get(BindingGetStatementContext&lt;Polygon&gt; ctx) throws SQLException {\n        ctx.convert(converter()).value(ctx.statement().getString(ctx.index()));\n    }\n\n    @Override\n    public void get(BindingGetSQLInputContext&lt;Polygon&gt; ctx) throws SQLException {\n        throw new SQLFeatureNotSupportedException();\n    }\n}\n</code></pre>\n"},{"tags":["java","fonts","graphics","character","awt"],"comments":[{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1637097861,"post_id":69995985,"comment_id":123734305,"body_markdown":"You&#39;re really going to want to spend some time reading through [Working with Text APIs](https://docs.oracle.com/javase/tutorial/2d/text/index.html). For [example](https://stackoverflow.com/questions/14284754/java-center-text-in-rectangle/14287270#14287270), [example](https://stackoverflow.com/questions/29247833/in-java-graphics2d-how-can-text-be-center-aligned-on-a-rectangle/29247946#29247946), [example](https://stackoverflow.com/questions/20794285/creating-a-string-inside-a-rectangle/20794440#20794440),","body":"You&#39;re really going to want to spend some time reading through <a href=\"https://docs.oracle.com/javase/tutorial/2d/text/index.html\" rel=\"nofollow noreferrer\">Working with Text APIs</a>. For <a href=\"https://stackoverflow.com/questions/14284754/java-center-text-in-rectangle/14287270#14287270\">example</a>, <a href=\"https://stackoverflow.com/questions/29247833/in-java-graphics2d-how-can-text-be-center-aligned-on-a-rectangle/29247946#29247946\">example</a>, <a href=\"https://stackoverflow.com/questions/20794285/creating-a-string-inside-a-rectangle/20794440#20794440\">example</a>,"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1637097888,"post_id":69995985,"comment_id":123734312,"body_markdown":"[example](https://stackoverflow.com/questions/18565066/centering-string-in-panel/18565132#18565132), [example](https://stackoverflow.com/questions/69308312/java-having-difficulty-centering-textlayouts-on-a-graphics2d-with-various-letter/69308607#69308607)","body":"<a href=\"https://stackoverflow.com/questions/18565066/centering-string-in-panel/18565132#18565132\">example</a>, <a href=\"https://stackoverflow.com/questions/69308312/java-having-difficulty-centering-textlayouts-on-a-graphics2d-with-various-letter/69308607#69308607\">example</a>"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1637098133,"post_id":69995985,"comment_id":123734374,"body_markdown":"Now, having said that, I might consider a different approach, which might seem more complicated, but might make it easier to maintain. I might start with a custom layout manager (depending on the complexity of the layout) and have it control the layout of the &quot;boxes&quot;, which would be custom panels (transparent, paint the borders all that) and then simply use a `JLabel` for the text.  This allows the panel and label to control all the issues with calculating layout position of the text AND you get some extra support with limited HTML (if you want to do something fancy)","body":"Now, having said that, I might consider a different approach, which might seem more complicated, but might make it easier to maintain. I might start with a custom layout manager (depending on the complexity of the layout) and have it control the layout of the &quot;boxes&quot;, which would be custom panels (transparent, paint the borders all that) and then simply use a <code>JLabel</code> for the text.  This allows the panel and label to control all the issues with calculating layout position of the text AND you get some extra support with limited HTML (if you want to do something fancy)"}],"owner":{"account_id":20231569,"reputation":85,"user_id":14837971,"display_name":"AdmosJagashvili"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637096548,"creation_date":1637096548,"question_id":69995985,"body_markdown":"I am currently working on a project to mass-produce graphics such as you see below:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ipaKZ.png\r\n\r\nThe part I want to be able to swap out with any other word is is &quot;&lt;Table&quot;&gt;. For aesthetic reasons, I want this text to always be dead-center in the rounded rectangle. I am using Graphics2D to achieve this; here is the code that generated the text:\r\n```\r\n\t\tg2D.setColor(Color.WHITE);\r\n\t\tint fontSize = 55;\r\n\t\tint fontX = 410;\r\n\t\tint fontY = 75;\r\n\t\tg2D.setFont(new Font(&quot;Arial&quot;, Font.PLAIN, fontSize));\r\n\t\tg2D.drawString(&quot;&lt;Table&gt;&quot;, fontX, fontY);\r\n```\r\nI am going to create a method that generates fontSize, fontX, and fontY based on what would make it centered. If all characters were the same width, I would obviously not need help, but I am wondering how to handle very thin characters such as &quot;i&quot;. I am not asking for anyone to solve the problem for me or give me the answer; in fact I would like to be able to figure it out myself. However, I do want some pointer on what to research/look up in order to solve this problem, as well as other considerations I didn&#39;t consider.","title":"How to get started figuring out a character-width puzzle","body":"<p>I am currently working on a project to mass-produce graphics such as you see below:\n<a href=\"https://i.stack.imgur.com/ipaKZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ipaKZ.png\" alt=\"enter image description here\" /></a></p>\n<p>The part I want to be able to swap out with any other word is is &quot;&lt;Table&quot;&gt;. For aesthetic reasons, I want this text to always be dead-center in the rounded rectangle. I am using Graphics2D to achieve this; here is the code that generated the text:</p>\n<pre><code>        g2D.setColor(Color.WHITE);\n        int fontSize = 55;\n        int fontX = 410;\n        int fontY = 75;\n        g2D.setFont(new Font(&quot;Arial&quot;, Font.PLAIN, fontSize));\n        g2D.drawString(&quot;&lt;Table&gt;&quot;, fontX, fontY);\n</code></pre>\n<p>I am going to create a method that generates fontSize, fontX, and fontY based on what would make it centered. If all characters were the same width, I would obviously not need help, but I am wondering how to handle very thin characters such as &quot;i&quot;. I am not asking for anyone to solve the problem for me or give me the answer; in fact I would like to be able to figure it out myself. However, I do want some pointer on what to research/look up in order to solve this problem, as well as other considerations I didn't consider.</p>\n"},{"tags":["java","sql","postgresql","postgis","jooq"],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1637096403,"creation_date":1468563275,"answer_id":38389020,"question_id":38370831,"body_markdown":"### Using jOOQ 3.16 out-of-the-box GIS support\r\n\r\nStarting with jOOQ 3.16 ([see #982][1]), jOOQ will offer out-of-the-box support for the most popular GIS implementations, including PostGIS\r\n\r\nAs always with jOOQ, just translate your query to the equivalent jOOQ query:\r\n\r\n```java\r\nctx.select(SENSOR_LOCATION.SENSOR_ID, SENSOR_LOCATION.LOCATION_TIME)\r\n   .from(SENSOR_LOCATION)\r\n   .where(stWithin(\r\n       SENSOR_LOCATION.LOCATION_POINT,\r\n       // The ST_Polygon(...) wrapper isn&#39;t really needed\r\n       stGeomFromText(&quot;LINESTRING(...)&quot;, 0\r\n   ))\r\n   .fetch();\r\n```\r\n\r\n### Historic answer, or when something is still missing\r\n\r\n... then, using [plain SQL][2] will certainly do the trick. Here&#39;s one example, how to do that:\r\n\r\n    ctx.select(SENSOR_LOCATION.SENSOR_ID, SENSOR_LOCATION.LOCATION_TIME)\r\n       .from(SENSOR_LOCATION)\r\n       .where(&quot;ST_WITHIN({0}, ST_Polygon(ST_GeomFromText(&#39;...&#39;), 0))&quot;, \r\n              SENSOR_LOCATION.LOCATION_POINT)\r\n       .fetch();\r\n\r\nNote how you can still use some type safety by using the plain SQL templating mechanism as shown above\r\n\r\n### If you&#39;re running lots of GIS queries\r\n\r\nIn this case, you probably want to build your own API that encapsulates all the plain SQL usage. Here&#39;s an idea how to get started with that:\r\n\r\n    public static Condition stWithin(Field&lt;?&gt; left, Field&lt;?&gt; right) {\r\n        return DSL.condition(&quot;ST_WITHIN({0}, {1})&quot;, left, right);\r\n    }\r\n\r\n    public static Field&lt;?&gt; stPolygon(Field&lt;?&gt; geom, int value) {\r\n        return DSL.field(&quot;ST_Polygon({0}, {1})&quot;, Object.class, geom, DSL.val(value));\r\n    }\r\n\r\nIf you also want to support binding GIS data types to the JDBC driver, then indeed, custom data type bindings will be the way to go:\r\n\r\nhttp://www.jooq.org/doc/latest/manual/sql-building/queryparts/custom-bindings\r\n\r\nYou will then use your custom data types rather than the above `Object.class`, and you can then use `Field&lt;YourType&gt;` rather than `Field&lt;?&gt;` for additional type safety.\r\n\r\n\r\n  [1]: https://github.com/jOOQ/jOOQ/issues/982\r\n  [2]: http://www.jooq.org/doc/latest/manual/sql-building/plain-sql/","title":"How to select points within polygon in PostGIS using jOOQ?","body":"<h3>Using jOOQ 3.16 out-of-the-box GIS support</h3>\n<p>Starting with jOOQ 3.16 (<a href=\"https://github.com/jOOQ/jOOQ/issues/982\" rel=\"nofollow noreferrer\">see #982</a>), jOOQ will offer out-of-the-box support for the most popular GIS implementations, including PostGIS</p>\n<p>As always with jOOQ, just translate your query to the equivalent jOOQ query:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ctx.select(SENSOR_LOCATION.SENSOR_ID, SENSOR_LOCATION.LOCATION_TIME)\n   .from(SENSOR_LOCATION)\n   .where(stWithin(\n       SENSOR_LOCATION.LOCATION_POINT,\n       // The ST_Polygon(...) wrapper isn't really needed\n       stGeomFromText(&quot;LINESTRING(...)&quot;, 0\n   ))\n   .fetch();\n</code></pre>\n<h3>Historic answer, or when something is still missing</h3>\n<p>... then, using <a href=\"http://www.jooq.org/doc/latest/manual/sql-building/plain-sql/\" rel=\"nofollow noreferrer\">plain SQL</a> will certainly do the trick. Here's one example, how to do that:</p>\n<pre><code>ctx.select(SENSOR_LOCATION.SENSOR_ID, SENSOR_LOCATION.LOCATION_TIME)\n   .from(SENSOR_LOCATION)\n   .where(&quot;ST_WITHIN({0}, ST_Polygon(ST_GeomFromText('...'), 0))&quot;, \n          SENSOR_LOCATION.LOCATION_POINT)\n   .fetch();\n</code></pre>\n<p>Note how you can still use some type safety by using the plain SQL templating mechanism as shown above</p>\n<h3>If you're running lots of GIS queries</h3>\n<p>In this case, you probably want to build your own API that encapsulates all the plain SQL usage. Here's an idea how to get started with that:</p>\n<pre><code>public static Condition stWithin(Field&lt;?&gt; left, Field&lt;?&gt; right) {\n    return DSL.condition(&quot;ST_WITHIN({0}, {1})&quot;, left, right);\n}\n\npublic static Field&lt;?&gt; stPolygon(Field&lt;?&gt; geom, int value) {\n    return DSL.field(&quot;ST_Polygon({0}, {1})&quot;, Object.class, geom, DSL.val(value));\n}\n</code></pre>\n<p>If you also want to support binding GIS data types to the JDBC driver, then indeed, custom data type bindings will be the way to go:</p>\n<p><a href=\"http://www.jooq.org/doc/latest/manual/sql-building/queryparts/custom-bindings\" rel=\"nofollow noreferrer\">http://www.jooq.org/doc/latest/manual/sql-building/queryparts/custom-bindings</a></p>\n<p>You will then use your custom data types rather than the above <code>Object.class</code>, and you can then use <code>Field&lt;YourType&gt;</code> rather than <code>Field&lt;?&gt;</code> for additional type safety.</p>\n"},{"tags":[],"owner":{"account_id":179362,"reputation":15005,"user_id":411965,"accept_rate":87,"display_name":"oshai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574760553,"creation_date":1574760553,"answer_id":59047675,"question_id":38370831,"body_markdown":"I found jooq-postgis-spatial spatial support: https://github.com/dmitry-zhuravlev/jooq-postgis-spatial\r\n\r\nIt allows working with geometries either using jts or postgis types.","title":"How to select points within polygon in PostGIS using jOOQ?","body":"<p>I found jooq-postgis-spatial spatial support: <a href=\"https://github.com/dmitry-zhuravlev/jooq-postgis-spatial\" rel=\"nofollow noreferrer\">https://github.com/dmitry-zhuravlev/jooq-postgis-spatial</a></p>\n\n<p>It allows working with geometries either using jts or postgis types.</p>\n"}],"owner":{"account_id":1302735,"reputation":2978,"user_id":1252334,"accept_rate":38,"display_name":"Defozo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3154,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":38389020,"answer_count":2,"score":7,"last_activity_date":1637096403,"creation_date":1468489459,"question_id":38370831,"body_markdown":"I have a table `sensor_location`:\r\n\r\n    CREATE TABLE public.sensor_location (\r\n      sensor_id INTEGER NOT NULL,\r\n      location_time TIMESTAMP WITHOUT TIME ZONE NOT NULL,\r\n      location_point public.geometry NOT NULL,\r\n      CONSTRAINT sensor_location_sensor_id_fkey FOREIGN KEY (sensor_id)\r\n        REFERENCES public.sensor(id)\r\n        ON DELETE NO ACTION\r\n        ON UPDATE NO ACTION\r\n        NOT DEFERRABLE\r\n    ) \r\nI want a query which will return `sensor_id`s of sensors and `location_time`s within selected polygon.\r\n\r\nThe query should look something like:\r\n\r\n    SELECT \r\n      sensor_id,\r\n      location_time,\r\n    FROM \r\n      public.sensor_location\r\n    WHERE\r\n      ST_Within(location_point, ST_Polygon(ST_GeomFromText(&#39;LINESTRING(-71.050316 48.422044,-71.070316 48.422044,-71.070316 48.462044,-71.050316 48.462044,-71.050316 48.422044)&#39;), 0));\r\n\r\nHow can I do that using jOOQ? Is it even possible to use jOOQ with PostGIS? Do I have to write my own sql query and just execute it with jOOQ?\r\n\r\nI found [this][1] but I have no idea how to use it. I&#39;m still a novice Java programmer.\r\n\r\n\r\n  [1]: http://www.jooq.org/doc/3.8/manual/code-generation/custom-data-type-bindings/","title":"How to select points within polygon in PostGIS using jOOQ?","body":"<p>I have a table <code>sensor_location</code>:</p>\n\n<pre><code>CREATE TABLE public.sensor_location (\n  sensor_id INTEGER NOT NULL,\n  location_time TIMESTAMP WITHOUT TIME ZONE NOT NULL,\n  location_point public.geometry NOT NULL,\n  CONSTRAINT sensor_location_sensor_id_fkey FOREIGN KEY (sensor_id)\n    REFERENCES public.sensor(id)\n    ON DELETE NO ACTION\n    ON UPDATE NO ACTION\n    NOT DEFERRABLE\n) \n</code></pre>\n\n<p>I want a query which will return <code>sensor_id</code>s of sensors and <code>location_time</code>s within selected polygon.</p>\n\n<p>The query should look something like:</p>\n\n<pre><code>SELECT \n  sensor_id,\n  location_time,\nFROM \n  public.sensor_location\nWHERE\n  ST_Within(location_point, ST_Polygon(ST_GeomFromText('LINESTRING(-71.050316 48.422044,-71.070316 48.422044,-71.070316 48.462044,-71.050316 48.462044,-71.050316 48.422044)'), 0));\n</code></pre>\n\n<p>How can I do that using jOOQ? Is it even possible to use jOOQ with PostGIS? Do I have to write my own sql query and just execute it with jOOQ?</p>\n\n<p>I found <a href=\"http://www.jooq.org/doc/3.8/manual/code-generation/custom-data-type-bindings/\" rel=\"noreferrer\">this</a> but I have no idea how to use it. I'm still a novice Java programmer.</p>\n"},{"tags":["java","mockito","powermock"],"comments":[{"owner":{"account_id":183966,"reputation":14606,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"score":1,"creation_date":1637096589,"post_id":69995928,"comment_id":123733924,"body_markdown":"That&#39;s not the powermock documentation, that&#39;s a random site&#39;s tutorial. Baeldung are consultants; you can apply to write articles for them for a tiny amount of money.","body":"That&#39;s not the powermock documentation, that&#39;s a random site&#39;s tutorial. Baeldung are consultants; you can apply to write articles for them for a tiny amount of money."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1637096979,"post_id":69995928,"comment_id":123734049,"body_markdown":"1. question: by its &quot;fully qulaified name&quot; (if there are dups in class path, you might get other problems). 2. No, it only prepares; To &quot;replace&quot; you have to `PowerMockito.mockStatic(FooBar.class);`","body":"1. question: by its &quot;fully qulaified name&quot; (if there are dups in class path, you might get other problems). 2. No, it only prepares; To &quot;replace&quot; you have to <code>PowerMockito.mockStatic(FooBar.class);</code>"},{"owner":{"account_id":70341,"reputation":1235,"user_id":204069,"accept_rate":0,"display_name":"user204069"},"score":0,"creation_date":1637099469,"post_id":69995928,"comment_id":123734712,"body_markdown":"1. question: by its &quot;fully qulaified name&quot; (if there are dups in class path, you might get other problems)  -You mean, for any class under fullyQualifiedNames I just have to create a class with name prepending Mock and mock class is ready ?","body":"1. question: by its &quot;fully qulaified name&quot; (if there are dups in class path, you might get other problems)  -You mean, for any class under fullyQualifiedNames I just have to create a class with name prepending Mock and mock class is ready ?"}],"owner":{"account_id":70341,"reputation":1235,"user_id":204069,"accept_rate":0,"display_name":"user204069"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637096391,"creation_date":1637096203,"question_id":69995928,"body_markdown":"I have couple of doubts as I was going through the PowerMock documentation:\r\nhttps://www.baeldung.com/intro-to-powermock\r\n\r\nIts mentioned to use a folder and place all Mock classes there:\r\n\r\n    @RunWith(PowerMockRunner.class)\r\n    @PrepareForTest(fullyQualifiedNames = &quot;com.baeldung.powermockito.introduction.*&quot;)\r\n\r\nMy doubt is when the PowerMock will run, How will it identify which Mock is for which Real class, is how will it relate Util.java to MockUtil.java at runtime if Some class A has dependency to Util.java.\r\n\r\nOther question is, just by placing     @PrepareForTest(fullyQualifiedNames = &quot;com.baeldung.powermockito.introduction.*&quot;) will Real classes be replaced with Mock Classes at runtime when tests are executed.\r\n","title":"PowerMock Doubts","body":"<p>I have couple of doubts as I was going through the PowerMock documentation:\n<a href=\"https://www.baeldung.com/intro-to-powermock\" rel=\"nofollow noreferrer\">https://www.baeldung.com/intro-to-powermock</a></p>\n<p>Its mentioned to use a folder and place all Mock classes there:</p>\n<pre><code>@RunWith(PowerMockRunner.class)\n@PrepareForTest(fullyQualifiedNames = &quot;com.baeldung.powermockito.introduction.*&quot;)\n</code></pre>\n<p>My doubt is when the PowerMock will run, How will it identify which Mock is for which Real class, is how will it relate Util.java to MockUtil.java at runtime if Some class A has dependency to Util.java.</p>\n<p>Other question is, just by placing     @PrepareForTest(fullyQualifiedNames = &quot;com.baeldung.powermockito.introduction.*&quot;) will Real classes be replaced with Mock Classes at runtime when tests are executed.</p>\n"},{"tags":["java","json","mongodb","spring-boot","serialization"],"owner":{"account_id":40774,"reputation":28739,"user_id":118228,"accept_rate":85,"display_name":"djangofan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":222,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1637096251,"creation_date":1636741206,"question_id":69947464,"body_markdown":"Serialization of Mongo objects leaves an `_id` and `_class` field in the json. I could live with `_id`  but I would like to remove `_class` field from the JSON.\r\n\r\nI have a Spring-Boot app reading JSON from a Mongo db.\r\n\r\nHow can I turn it off, so that only the objects explicit fields are saved into the Mongo json document (on the write)?\r\n\r\n    {\r\n        &quot;_id&quot;: {\r\n            &quot;$oid&quot;: &quot;618da8804b421f7f5e1e756c&quot;\r\n        },\r\n        ...\r\n        &quot;_class&quot;: &quot;com.whatever.my.ApplicationObj&quot;\r\n    }\r\n\r\n\r\nNOTE1: `_id` is mentioned [here][1] as being a &#39;read-only&#39; field: \r\n\r\nNOTE2: `_class` is mentioned [here][2] also: \r\n\r\nNOTE3: `_id` is mentioned [here][3] as being required.\r\n\r\nDo I need a custom serializer?\r\n\r\n\r\n  [1]: https://mongodb.github.io/mongo-csharp-driver/1.11/serialization/\r\n  [2]: https://kb.objectrocket.com/mongo-db/how-to-insert-mongodb-document-using-spring-data-part-2-1090\r\n  [3]: https://stackoverflow.com/questions/12378320/mongodb-inserting-doc-without-id-field","title":"Serialization of Mongo objects leaves a &#39;_id&#39; and &#39;_class&#39; field in the json. How can I turn that off?","body":"<p>Serialization of Mongo objects leaves an <code>_id</code> and <code>_class</code> field in the json. I could live with <code>_id</code>  but I would like to remove <code>_class</code> field from the JSON.</p>\n<p>I have a Spring-Boot app reading JSON from a Mongo db.</p>\n<p>How can I turn it off, so that only the objects explicit fields are saved into the Mongo json document (on the write)?</p>\n<pre><code>{\n    &quot;_id&quot;: {\n        &quot;$oid&quot;: &quot;618da8804b421f7f5e1e756c&quot;\n    },\n    ...\n    &quot;_class&quot;: &quot;com.whatever.my.ApplicationObj&quot;\n}\n</code></pre>\n<p>NOTE1: <code>_id</code> is mentioned <a href=\"https://mongodb.github.io/mongo-csharp-driver/1.11/serialization/\" rel=\"nofollow noreferrer\">here</a> as being a 'read-only' field:</p>\n<p>NOTE2: <code>_class</code> is mentioned <a href=\"https://kb.objectrocket.com/mongo-db/how-to-insert-mongodb-document-using-spring-data-part-2-1090\" rel=\"nofollow noreferrer\">here</a> also:</p>\n<p>NOTE3: <code>_id</code> is mentioned <a href=\"https://stackoverflow.com/questions/12378320/mongodb-inserting-doc-without-id-field\">here</a> as being required.</p>\n<p>Do I need a custom serializer?</p>\n"},{"tags":["java","android","firebaseui"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1637161403,"post_id":69985207,"comment_id":123752209,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":23332400,"reputation":13,"user_id":17408611,"display_name":"MM Vadhaniya"},"score":0,"creation_date":1638197105,"post_id":69985207,"comment_id":124017100,"body_markdown":"I want to know what is the current version of the FirebaseUI dependency.","body":"I want to know what is the current version of the FirebaseUI dependency."}],"answers":[{"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637095762,"creation_date":1637095762,"answer_id":69995875,"question_id":69985207,"body_markdown":"Well I dont see 8.0.1 on the official Firebase website either, that is why your build is failing:\r\n\r\nInformation/Documentation: https://firebaseopensource.com/projects/firebase/firebaseui-android/\r\n\r\nReleases page is: https://github.com/firebase/FirebaseUI-Android/releases\r\n\r\n**To Install Version 8.0:**\r\n\r\n    dependencies {\r\n        // FirebaseUI for Firebase Realtime Database\r\n        implementation &#39;com.firebaseui:firebase-ui-database:8.0.0&#39;\r\n    \r\n        // FirebaseUI for Cloud Firestore\r\n        implementation &#39;com.firebaseui:firebase-ui-firestore:8.0.0&#39;\r\n    \r\n        // FirebaseUI for Firebase Auth\r\n        implementation &#39;com.firebaseui:firebase-ui-auth:8.0.0&#39;\r\n    \r\n        // FirebaseUI for Cloud Storage\r\n        implementation &#39;com.firebaseui:firebase-ui-storage:8.0.0&#39;\r\n    }\r\n\r\n**Dependencies:**\r\n\r\n&gt; Compatibility with Firebase / Google Play Services libraries\r\n&gt; \r\n&gt; FirebaseUI libraries have the following transitive dependencies on the\r\n\r\n    Firebase SDK:\r\n    \r\n    firebase-ui-auth\r\n    |--- com.google.firebase:firebase-auth\r\n    |--- com.google.android.gms:play-services-auth\r\n    \r\n    firebase-ui-database\r\n    |--- com.google.firebase:firebase-database\r\n    \r\n    firebase-ui-firestore\r\n    |--- com.google.firebase:firebase-firestore\r\n    \r\n    firebase-ui-storage\r\n    |--- com.google.firebase:firebase-storage\r\n\r\n&gt; You can see the specific dependencies associated with each release on\r\n&gt; the Releases page.\r\n\r\n\r\nhttps://github.com/firebase/firebaseui-android#dependencies\r\n\r\n\r\n\r\n","title":"How to find Firebase UI Dependency for Android Studio 2020.3.1","body":"<p>Well I dont see 8.0.1 on the official Firebase website either, that is why your build is failing:</p>\n<p>Information/Documentation: <a href=\"https://firebaseopensource.com/projects/firebase/firebaseui-android/\" rel=\"nofollow noreferrer\">https://firebaseopensource.com/projects/firebase/firebaseui-android/</a></p>\n<p>Releases page is: <a href=\"https://github.com/firebase/FirebaseUI-Android/releases\" rel=\"nofollow noreferrer\">https://github.com/firebase/FirebaseUI-Android/releases</a></p>\n<p><strong>To Install Version 8.0:</strong></p>\n<pre><code>dependencies {\n    // FirebaseUI for Firebase Realtime Database\n    implementation 'com.firebaseui:firebase-ui-database:8.0.0'\n\n    // FirebaseUI for Cloud Firestore\n    implementation 'com.firebaseui:firebase-ui-firestore:8.0.0'\n\n    // FirebaseUI for Firebase Auth\n    implementation 'com.firebaseui:firebase-ui-auth:8.0.0'\n\n    // FirebaseUI for Cloud Storage\n    implementation 'com.firebaseui:firebase-ui-storage:8.0.0'\n}\n</code></pre>\n<p><strong>Dependencies:</strong></p>\n<blockquote>\n<p>Compatibility with Firebase / Google Play Services libraries</p>\n<p>FirebaseUI libraries have the following transitive dependencies on the</p>\n</blockquote>\n<pre><code>Firebase SDK:\n\nfirebase-ui-auth\n|--- com.google.firebase:firebase-auth\n|--- com.google.android.gms:play-services-auth\n\nfirebase-ui-database\n|--- com.google.firebase:firebase-database\n\nfirebase-ui-firestore\n|--- com.google.firebase:firebase-firestore\n\nfirebase-ui-storage\n|--- com.google.firebase:firebase-storage\n</code></pre>\n<blockquote>\n<p>You can see the specific dependencies associated with each release on\nthe Releases page.</p>\n</blockquote>\n<p><a href=\"https://github.com/firebase/firebaseui-android#dependencies\" rel=\"nofollow noreferrer\">https://github.com/firebase/firebaseui-android#dependencies</a></p>\n"}],"owner":{"account_id":23332400,"reputation":13,"user_id":17408611,"display_name":"MM Vadhaniya"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":620,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1637095762,"creation_date":1637047459,"question_id":69985207,"body_markdown":"I&#39;m getting errors while I try to run my program. An error like this.[enter image description here][1] You can see in below image.(It&#39;s showing that &quot;Could not find Could not find com.firebaseui:firebase-ui-firestor:8.0.1.&quot;)\r\n\r\nPlease tell me what is current virsion of Firebaseui dependency virsion.\r\n\r\nAnd also tell me how can I find others dependency virsion in future.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OtlLj.png","title":"How to find Firebase UI Dependency for Android Studio 2020.3.1","body":"<p>I'm getting errors while I try to run my program. An error like this.<a href=\"https://i.stack.imgur.com/OtlLj.png\" rel=\"nofollow noreferrer\">enter image description here</a> You can see in below image.(It's showing that &quot;Could not find Could not find com.firebaseui:firebase-ui-firestor:8.0.1.&quot;)</p>\n<p>Please tell me what is current virsion of Firebaseui dependency virsion.</p>\n<p>And also tell me how can I find others dependency virsion in future.</p>\n"},{"tags":["java","awt-eventqueue"],"comments":[{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":1,"creation_date":1397708801,"post_id":23124582,"comment_id":35353017,"body_markdown":"How do you convert `&quot;1 &quot;` to a number? Why have you posted so much irrelevant code?","body":"How do you convert <code>&quot;1 &quot;</code> to a number? Why have you posted so much irrelevant code?"}],"answers":[{"tags":[],"owner":{"account_id":243084,"reputation":31440,"user_id":515034,"accept_rate":59,"display_name":"Abimaran Kugathasan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1397708949,"creation_date":1397708949,"answer_id":23124613,"question_id":23124582,"body_markdown":"You have an additional space in the end. Trim it to remove that spcace.\r\n\r\n    quantityInteger = Integer.parseInt(quantityString.trim());","title":"Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: For input string: &quot;1 &quot;","body":"<p>You have an additional space in the end. Trim it to remove that spcace.</p>\n\n<pre><code>quantityInteger = Integer.parseInt(quantityString.trim());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2051638,"reputation":6978,"user_id":1830513,"accept_rate":80,"display_name":"Sazzadur Rahaman"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1397708958,"creation_date":1397708958,"answer_id":23124614,"question_id":23124582,"body_markdown":"Change your `Integer.parseInt(quantityString);` to `Integer.parseInt(quantityString.trim());` and your code will work fine!\r\n","title":"Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: For input string: &quot;1 &quot;","body":"<p>Change your <code>Integer.parseInt(quantityString);</code> to <code>Integer.parseInt(quantityString.trim());</code> and your code will work fine!</p>\n"},{"tags":[],"owner":{"account_id":1064631,"reputation":729,"user_id":1065520,"accept_rate":50,"display_name":"optimus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1397709123,"creation_date":1397709123,"answer_id":23124644,"question_id":23124582,"body_markdown":"try this i found an empty space in the console message &quot;Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: For input **string: &quot;1 &quot;**(after one there is a space)\r\nso try to find if there is any empty space taken into account by mistake, so parserint is trying to parse string + empty space.\r\n","title":"Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: For input string: &quot;1 &quot;","body":"<p>try this i found an empty space in the console message \"Exception in thread \"AWT-EventQueue-0\" java.lang.NumberFormatException: For input <strong>string: \"1 \"</strong>(after one there is a space)\nso try to find if there is any empty space taken into account by mistake, so parserint is trying to parse string + empty space.</p>\n"}],"owner":{"account_id":4340371,"reputation":21,"user_id":3543736,"display_name":"Warren Xie"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19083,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1637095521,"creation_date":1397708761,"question_id":23124582,"body_markdown":"   I am very to new to Java programming and I am taking a class based on Java. I am currently doing this coffee project which is based on boolean and RadioButtons. I believe I am almost done with it except I get this error message on the console. If there is any other mistakes please let me know so I can fix it!\r\n    \r\n    Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: For input string: &quot;1 &quot;\r\n\tat java.lang.NumberFormatException.forInputString(Unknown Source)\r\n\tat java.lang.Integer.parseInt(Unknown Source)\r\n\tat java.lang.Integer.parseInt(Unknown Source)\r\n\r\n---\r\n\r\n    \tpublic void purchase()\r\n    \t{\r\n    \t    //local variables\r\n    \t\tString  quantityString, buttonString, nameString, coffeeType;\r\n\t\t\t\r\n     \t    float subTotalFloat, priceFloat, taxFloat, grandTotalFloat;\r\n     \t    int quantityInteger;\r\n     \t    \r\n\t\t\t//Format the values to currency format\r\n\t\t\tDecimalFormat valueDecimalFormat = new DecimalFormat(&quot;$#0.00&quot;);\r\n\r\n    \t    //retrieve the input from the  user\r\n\t\t\tnameString = nameTextField.getText();\r\n\t\t\tquantityString = quantityTextField.getText();\r\n\t\t    buttonString = coffeeType ();\r\n\t\t\t\r\n\t\t\t//change data types\r\n\t\t\tquantityInteger = Integer.parseInt(quantityString);\r\n            ...\r\n        }\r\n\r\n  \t\t\r\n  ","title":"Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: For input string: &quot;1 &quot;","body":"<p>I am very to new to Java programming and I am taking a class based on Java. I am currently doing this coffee project which is based on boolean and RadioButtons. I believe I am almost done with it except I get this error message on the console. If there is any other mistakes please let me know so I can fix it!</p>\n\n<pre><code>Exception in thread \"AWT-EventQueue-0\" java.lang.NumberFormatException: For input string: \"1 \"\nat java.lang.NumberFormatException.forInputString(Unknown Source)\nat java.lang.Integer.parseInt(Unknown Source)\nat java.lang.Integer.parseInt(Unknown Source)\n</code></pre>\n\n<hr>\n\n<pre><code>    public void purchase()\n    {\n        //local variables\n        String  quantityString, buttonString, nameString, coffeeType;\n\n        float subTotalFloat, priceFloat, taxFloat, grandTotalFloat;\n        int quantityInteger;\n\n        //Format the values to currency format\n        DecimalFormat valueDecimalFormat = new DecimalFormat(\"$#0.00\");\n\n        //retrieve the input from the  user\n        nameString = nameTextField.getText();\n        quantityString = quantityTextField.getText();\n        buttonString = coffeeType ();\n\n        //change data types\n        quantityInteger = Integer.parseInt(quantityString);\n        ...\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","jsp","apache-tiles"],"answers":[{"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637095482,"creation_date":1637095482,"answer_id":69995835,"question_id":69985171,"body_markdown":"Well based on the exception, it seems it is not allowed to have `&lt;%  %&gt;` inside tags\r\n\r\nCould you try the following options:\r\n\r\nOption 1:\r\n\r\n    &lt;% request.setAttribute(&quot;content&quot;, new java.util.Date()); %&gt;\r\n    &lt;tiles:insertTemplate template=&quot;/default.jsp&quot; flush=&quot;true&quot;&gt;\r\n        ${content}\r\n    &lt;/tiles:insertTemplate&gt;\r\n    \r\n\r\n\r\n----------\r\nOption 2:\r\n\r\n    \r\n    &lt;c:set var=&quot;content&quot;&gt;\r\n               &lt;% out.println(new java.util.Date()); %&gt;\r\n    &lt;/c:set&gt;\r\n    \r\n    &lt;tiles:insertTemplate template=&quot;/default.jsp&quot; flush=&quot;true&quot;&gt;\r\n        ${content}\r\n    &lt;/tiles:insertTemplate&gt;\r\n\r\n\r\nPlease do confirm if this worked for you,\r\n","title":"How to use scripting elements within apache tiles in spring boot","body":"<p>Well based on the exception, it seems it is not allowed to have <code>&lt;%  %&gt;</code> inside tags</p>\n<p>Could you try the following options:</p>\n<p>Option 1:</p>\n<pre><code>&lt;% request.setAttribute(&quot;content&quot;, new java.util.Date()); %&gt;\n&lt;tiles:insertTemplate template=&quot;/default.jsp&quot; flush=&quot;true&quot;&gt;\n    ${content}\n&lt;/tiles:insertTemplate&gt;\n</code></pre>\n<hr />\n<p>Option 2:</p>\n<pre><code>&lt;c:set var=&quot;content&quot;&gt;\n           &lt;% out.println(new java.util.Date()); %&gt;\n&lt;/c:set&gt;\n\n&lt;tiles:insertTemplate template=&quot;/default.jsp&quot; flush=&quot;true&quot;&gt;\n    ${content}\n&lt;/tiles:insertTemplate&gt;\n</code></pre>\n<p>Please do confirm if this worked for you,</p>\n"}],"owner":{"account_id":23351921,"reputation":3,"user_id":17425375,"display_name":"k2-kubo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":172,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69995835,"answer_count":1,"score":0,"last_activity_date":1637095482,"creation_date":1637047240,"question_id":69985171,"body_markdown":"I&#39;m trying to add apache tiles to spring boot.\r\n\r\nWhenever I try to put in real jsp code with tags like\r\n```\r\n&lt;%@ taglib prefix=&quot;tiles&quot; uri=&quot;http://tiles.apache.org/tags-tiles&quot; %&gt;\r\n&lt;tiles:insertTemplate template=&quot;/default.jsp&quot; flush=&quot;true&quot;&gt;\r\n\t&lt;% out.println(new java.util.Date()); %&gt;\r\n&lt;/tiles:insertTemplate&gt;\r\n```\r\nThis throws this error.\r\n```\r\nScripting elements ( &amp;lt;%!, &amp;lt;jsp:declaration, &amp;lt;%=, &amp;lt;jsp:expression, &amp;lt;%, &amp;lt;jsp:scriptlet ) are disallowed here.\r\n```\r\nI have &quot;scripting-invalid&quot; set to &quot;false&quot; for .jsp and I don&#39;t know how to solve this.\r\n\r\nAny help or suggestions are appreciated.","title":"How to use scripting elements within apache tiles in spring boot","body":"<p>I'm trying to add apache tiles to spring boot.</p>\n<p>Whenever I try to put in real jsp code with tags like</p>\n<pre><code>&lt;%@ taglib prefix=&quot;tiles&quot; uri=&quot;http://tiles.apache.org/tags-tiles&quot; %&gt;\n&lt;tiles:insertTemplate template=&quot;/default.jsp&quot; flush=&quot;true&quot;&gt;\n    &lt;% out.println(new java.util.Date()); %&gt;\n&lt;/tiles:insertTemplate&gt;\n</code></pre>\n<p>This throws this error.</p>\n<pre><code>Scripting elements ( &amp;lt;%!, &amp;lt;jsp:declaration, &amp;lt;%=, &amp;lt;jsp:expression, &amp;lt;%, &amp;lt;jsp:scriptlet ) are disallowed here.\n</code></pre>\n<p>I have &quot;scripting-invalid&quot; set to &quot;false&quot; for .jsp and I don't know how to solve this.</p>\n<p>Any help or suggestions are appreciated.</p>\n"},{"tags":["java","spring-boot","spring-webclient"],"answers":[{"tags":[],"owner":{"account_id":3683051,"reputation":6733,"user_id":3067542,"accept_rate":85,"display_name":"Vincent F"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637095205,"creation_date":1637095205,"answer_id":69995786,"question_id":69885575,"body_markdown":"I found the solution with a different approach, with a custom TestExecutionListener. \r\n\r\n\r\nmore details in https://stackoverflow.com/a/69995757/3067542 ","title":"test a Spring Boot WebClient outside of a HttpServletRequest context","body":"<p>I found the solution with a different approach, with a custom TestExecutionListener.</p>\n<p>more details in <a href=\"https://stackoverflow.com/a/69995757/3067542\">https://stackoverflow.com/a/69995757/3067542</a></p>\n"}],"owner":{"account_id":3683051,"reputation":6733,"user_id":3067542,"accept_rate":85,"display_name":"Vincent F"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":886,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69995786,"answer_count":1,"score":0,"last_activity_date":1637095205,"creation_date":1636383539,"question_id":69885575,"body_markdown":"My Spring boot 2.5 application is a fairly standard web application that exposes some endpoints and calls other services. \r\nIn the usual use cases, an external request comes in, and applies some business logic, which is going to call other services, using WebClient configured with Oauth2.\r\n\r\nHowever, my application also contains a scheduled task that needs to make some calls to other services. \r\n\r\nThat&#39;s where the problems are starting : I believe I face the same issue as in https://stackoverflow.com/questions/55308918/spring-security-5-calling-oauth2-secured-api-in-application-runner-results-in-il , ie `servletRequest cannot be null` when using webClient from a non Servlet environment. \r\n\r\nI thought I would be able to reproduce this easily through an integration test, but I am not. I already have a `SpringBootTest` for the scheduled task, in which I load the Spring context, get access to the class that has the logic, and simply call the method that is scheduled when deployed in prod... but it&#39;s not failing : I am not able to reproduce. \r\n\r\nWhen I debug the test, I see the servletRequest is indeed not null when I run the test (while it is when it runs in prod) : there&#39;s a Spring `MockhttpServletrequest`, so I don&#39;t have the same problem as in prod. \r\n\r\n[![enter image description here][1]][1] \r\n\r\nI have tried to run the test with no &quot;web&quot; support at all, with \r\n\r\n    @SpringBootTest(webEnvironment = WebEnvironment.NONE) \r\n\r\nBut when I do that, some of the required elements are missing for my application to start : I have 2 webClients configured in my application, the &quot;normal&quot; one, and the one I plan to use for the scheduler  : \r\n\r\n```\r\n  @Bean\r\n  @Primary\r\n  WebClient servletWebClient(ClientRegistrationRepository clientRegistrations,\r\n                             OAuth2AuthorizedClientRepository authorizedClients) {\r\n\r\n    //this constructor  will configure internally a RemoveAuthorizedClientOAuth2AuthorizationFailureHandler,\r\n    // and onAuthorizationFailure will be called on it when we get a 401\r\n    var oauth = new ServletOAuth2AuthorizedClientExchangeFilterFunction(clientRegistrations, authorizedClients);\r\n\r\n    oauth.setDefaultClientRegistrationId(&quot;keycloak&quot;);\r\n\r\n\r\n    return WebClient.builder()\r\n        .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\r\n        .apply(oauth.oauth2Configuration())\r\n        .build();\r\n  }\r\n\r\n  @Bean\r\n  @Qualifier(&quot;forScheduler&quot;)\r\n  WebClient schedulerWebClient(OAuth2AuthorizedClientManager authorizedClientManager) {\r\n\r\n    ServletOAuth2AuthorizedClientExchangeFilterFunction oauth =new ServletOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\r\n\r\n    oauth.setDefaultClientRegistrationId(&quot;keycloak&quot;);\r\n\r\n    return WebClient.builder()\r\n        .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\r\n        .apply(oauth.oauth2Configuration())\r\n        .build();\r\n  }\r\n\r\n  @Bean\r\n  public OAuth2AuthorizedClientManager authorizedClientManagerForScheduler(\r\n      ClientRegistrationRepository clientRegistrationRepository,\r\n      OAuth2AuthorizedClientService clientService)\r\n  {\r\n\r\n    OAuth2AuthorizedClientProvider authorizedClientProvider =\r\n        OAuth2AuthorizedClientProviderBuilder.builder()\r\n            .clientCredentials()\r\n            .build();\r\n\r\n    AuthorizedClientServiceOAuth2AuthorizedClientManager authorizedClientManager =\r\n        new AuthorizedClientServiceOAuth2AuthorizedClientManager(\r\n            clientRegistrationRepository, clientService);\r\n    authorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider);\r\n\r\n    return authorizedClientManager;\r\n  }\r\n```\r\n \r\nBut when configuring my test with `webEnvironment = WebEnvironment.NONE` , then no `ClientRegistrationRepository` gets loaded, and the declared `servletWebClient` can&#39;t be instantiated, as it&#39;s one of its dependencies.\r\n\r\nTesting this manually is quite difficult/expensive, so I would really like to get some kind of validations through my integration tests that my change with 2 webClients will work before I deploy it. \r\n\r\n\r\nHow can I test that scenario correctly ? or in other words, is there a way to have a default Spring Boot test, but without a mockServletContext being initialized by Spring ? \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3dqQd.png","title":"test a Spring Boot WebClient outside of a HttpServletRequest context","body":"<p>My Spring boot 2.5 application is a fairly standard web application that exposes some endpoints and calls other services.\nIn the usual use cases, an external request comes in, and applies some business logic, which is going to call other services, using WebClient configured with Oauth2.</p>\n<p>However, my application also contains a scheduled task that needs to make some calls to other services.</p>\n<p>That's where the problems are starting : I believe I face the same issue as in <a href=\"https://stackoverflow.com/questions/55308918/spring-security-5-calling-oauth2-secured-api-in-application-runner-results-in-il\">Spring Security 5 Calling OAuth2 Secured API in Application Runner results in IllegalArgumentException</a> , ie <code>servletRequest cannot be null</code> when using webClient from a non Servlet environment.</p>\n<p>I thought I would be able to reproduce this easily through an integration test, but I am not. I already have a <code>SpringBootTest</code> for the scheduled task, in which I load the Spring context, get access to the class that has the logic, and simply call the method that is scheduled when deployed in prod... but it's not failing : I am not able to reproduce.</p>\n<p>When I debug the test, I see the servletRequest is indeed not null when I run the test (while it is when it runs in prod) : there's a Spring <code>MockhttpServletrequest</code>, so I don't have the same problem as in prod.</p>\n<p><a href=\"https://i.stack.imgur.com/3dqQd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3dqQd.png\" alt=\"enter image description here\" /></a></p>\n<p>I have tried to run the test with no &quot;web&quot; support at all, with</p>\n<pre><code>@SpringBootTest(webEnvironment = WebEnvironment.NONE) \n</code></pre>\n<p>But when I do that, some of the required elements are missing for my application to start : I have 2 webClients configured in my application, the &quot;normal&quot; one, and the one I plan to use for the scheduler  :</p>\n<pre><code>  @Bean\n  @Primary\n  WebClient servletWebClient(ClientRegistrationRepository clientRegistrations,\n                             OAuth2AuthorizedClientRepository authorizedClients) {\n\n    //this constructor  will configure internally a RemoveAuthorizedClientOAuth2AuthorizationFailureHandler,\n    // and onAuthorizationFailure will be called on it when we get a 401\n    var oauth = new ServletOAuth2AuthorizedClientExchangeFilterFunction(clientRegistrations, authorizedClients);\n\n    oauth.setDefaultClientRegistrationId(&quot;keycloak&quot;);\n\n\n    return WebClient.builder()\n        .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n        .apply(oauth.oauth2Configuration())\n        .build();\n  }\n\n  @Bean\n  @Qualifier(&quot;forScheduler&quot;)\n  WebClient schedulerWebClient(OAuth2AuthorizedClientManager authorizedClientManager) {\n\n    ServletOAuth2AuthorizedClientExchangeFilterFunction oauth =new ServletOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\n\n    oauth.setDefaultClientRegistrationId(&quot;keycloak&quot;);\n\n    return WebClient.builder()\n        .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n        .apply(oauth.oauth2Configuration())\n        .build();\n  }\n\n  @Bean\n  public OAuth2AuthorizedClientManager authorizedClientManagerForScheduler(\n      ClientRegistrationRepository clientRegistrationRepository,\n      OAuth2AuthorizedClientService clientService)\n  {\n\n    OAuth2AuthorizedClientProvider authorizedClientProvider =\n        OAuth2AuthorizedClientProviderBuilder.builder()\n            .clientCredentials()\n            .build();\n\n    AuthorizedClientServiceOAuth2AuthorizedClientManager authorizedClientManager =\n        new AuthorizedClientServiceOAuth2AuthorizedClientManager(\n            clientRegistrationRepository, clientService);\n    authorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider);\n\n    return authorizedClientManager;\n  }\n</code></pre>\n<p>But when configuring my test with <code>webEnvironment = WebEnvironment.NONE</code> , then no <code>ClientRegistrationRepository</code> gets loaded, and the declared <code>servletWebClient</code> can't be instantiated, as it's one of its dependencies.</p>\n<p>Testing this manually is quite difficult/expensive, so I would really like to get some kind of validations through my integration tests that my change with 2 webClients will work before I deploy it.</p>\n<p>How can I test that scenario correctly ? or in other words, is there a way to have a default Spring Boot test, but without a mockServletContext being initialized by Spring ?</p>\n"},{"tags":["java","testng"],"comments":[{"owner":{"account_id":40774,"reputation":28739,"user_id":118228,"accept_rate":85,"display_name":"djangofan"},"score":0,"creation_date":1390431685,"post_id":15220262,"comment_id":32093424,"body_markdown":"I do this by using a TestNG report listener to trigger a class that builds my HTML out of the ISuite result.  To display arbitrary data in the test report, such as test argument values, I think you would have to add data to the ITestContext for each test so that the report writer has access to the additional data.  Fortunately the method name is already part of that context and you can retrieve it.","body":"I do this by using a TestNG report listener to trigger a class that builds my HTML out of the ISuite result.  To display arbitrary data in the test report, such as test argument values, I think you would have to add data to the ITestContext for each test so that the report writer has access to the additional data.  Fortunately the method name is already part of that context and you can retrieve it."}],"answers":[{"tags":[],"owner":{"account_id":74561,"reputation":4982,"user_id":214178,"accept_rate":100,"display_name":"artdanil"},"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1363119615,"creation_date":1363037862,"answer_id":15349158,"question_id":15220262,"body_markdown":"I had the same problem, and found that it helps to set the field storing test case name in the method annotated with `@BeforeMethod`, using [native injection of TestNG][1] to provide method name and test parameters. The test name is taken from test parameters supplied by the `DataProvider`. If your test method does not have parameters, just report the method name.\r\n\r\n    //oversimplified for demontration purposes\r\n    public class TestParameters {\r\n    \tprivate String testName = null;\r\n    \tprivate String testDescription = null;\r\n    \t\r\n    \tpublic TestParameters(String name,\r\n    \t\t\t\t\t\t  String description) {\r\n    \t\tthis.testName = name;\r\n    \t\tthis.testDescription = description;\r\n    \t}\r\n    \t\r\n    \tpublic String getTestName() {\r\n    \t\treturn testName;\r\n    \t}\r\n    \tpublic String getTestDescription() {\r\n    \t\treturn testDescription;\r\n    \t}\r\n    }\r\n    \r\n    public class SampleTest implements ITest {\r\n        // Has to be set to prevent NullPointerException from reporters\r\n    \tprotected String mTestCaseName = &quot;&quot;;\r\n    \t\r\n    \t@DataProvider(name=&quot;BasicDataProvider&quot;)\r\n    \tpublic Object[][] getTestData() {\r\n    \t\tObject[][] data = new Object[][] {\r\n    \t\t\t\t{ new TestParameters(&quot;TestCase1&quot;, &quot;Sample test 1&quot;)},\r\n    \t\t\t\t{ new TestParameters(&quot;TestCase2&quot;, &quot;Sample test 2&quot;)},\r\n    \t\t\t\t{ new TestParameters(&quot;TestCase3&quot;, &quot;Sample test 3&quot;)},\r\n    \t\t\t\t{ new TestParameters(&quot;TestCase4&quot;, &quot;Sample test 4&quot;)},\r\n    \t\t\t\t{ new TestParameters(&quot;TestCase5&quot;, &quot;Sample test 5&quot;) }\r\n    \t\t};\r\n    \t\treturn data;\r\n    \t}\r\n    \t\r\n    \t@BeforeMethod(alwaysRun = true)\r\n    \tpublic void testData(Method method, Object[] testData) {\r\n    \t\tString testCase = &quot;&quot;;\r\n    \t\tif (testData != null &amp;&amp; testData.length &gt; 0) {\r\n    \t\t\tTestParameters testParams = null;\r\n    \t\t\t//Check if test method has actually received required parameters\r\n    \t\t\tfor (Object testParameter : testData) {\r\n    \t\t\t\tif (testParameter instanceof TestParameters) {\r\n    \t\t\t\t\ttestParams = (TestParameters)testParameter;\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\tif (testParams != null) {\r\n    \t\t\t\ttestCase = testParams.getTestName();\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tthis.mTestCaseName = String.format(&quot;%s(%s)&quot;, method.getName(), testCase);\r\n        }\r\n    \r\n    \t@Override\r\n    \tpublic String getTestName() {\r\n    \t\treturn this.mTestCaseName;\r\n    \t}\r\n    \r\n        @Test(dataProvider=&quot;BasicDataProvider&quot;)\r\n    \tpublic void testSample1(TestParameters testParams){\r\n            //test code here\r\n        }\r\n    \r\n        @Test(dataProvider=&quot;BasicDataProvider&quot;)\r\n    \tpublic void testSample2(TestParameters testParams){\r\n            //test code here\r\n        }\r\n        \r\n        @Test\r\n    \tpublic void testSample3(){\r\n            //test code here\r\n        }\r\n    }\r\n\r\n**EDIT:** Based on the comments below, I realized a sample from report will be useful.\r\n\r\nExtract from the report from running code above:\r\n\r\n    &lt;testng-results skipped=&quot;0&quot; failed=&quot;0&quot; total=&quot;5&quot; passed=&quot;5&quot;&gt;\r\n      &lt;suite name=&quot;SampleTests&quot; duration-ms=&quot;2818&quot; started-at=&quot;&lt;some-time&gt;&quot; finished-at=&quot;&lt;some-time&gt;&quot;&gt;\r\n        &lt;test name=&quot;Test1&quot; duration-ms=&quot;2818&quot; started-at=&quot;&lt;some-time&gt;&quot; finished-at=&quot;&lt;some-time&gt;&quot;&gt;\r\n            &lt;test-method \r\n                status=&quot;PASS&quot; \r\n                signature=&quot;testSample1(org.example.test.TestParameters)[pri:0, instance:org.example.test.TimeTest@c9d92c]&quot;\r\n                test-instance-name=&quot;testSample1(TestCase5)&quot;\r\n                name=&quot;testSample1&quot; \r\n                duration-ms=&quot;1014&quot;\r\n                started-at=&quot;&lt;some-time-before&gt;&quot; \r\n                data-provider=&quot;BasicDataProvider&quot; \r\n                finished-at=&quot;&lt;some-time-later&gt;&quot; &gt;\r\n                &lt;!-- excluded for demonstration purposes --&gt;\r\n            &lt;/test-method&gt;\r\n            &lt;!-- the rest of test results excluded for brevity --&gt;\r\n        &lt;/test&gt;\r\n      &lt;/suite&gt;\r\n    &lt;/testng-result&gt;\r\n\r\nNote, that the value returned from `getTestName()` method is in the `test-instance-name` attribute, and not in the `name` attribute.\r\n\r\n  [1]: http://testng.org/doc/documentation-main.html#native-dependency-injection","title":"Custom test method name in TestNG reports","body":"<p>I had the same problem, and found that it helps to set the field storing test case name in the method annotated with <code>@BeforeMethod</code>, using <a href=\"http://testng.org/doc/documentation-main.html#native-dependency-injection\">native injection of TestNG</a> to provide method name and test parameters. The test name is taken from test parameters supplied by the <code>DataProvider</code>. If your test method does not have parameters, just report the method name.</p>\n\n<pre><code>//oversimplified for demontration purposes\npublic class TestParameters {\n    private String testName = null;\n    private String testDescription = null;\n\n    public TestParameters(String name,\n                          String description) {\n        this.testName = name;\n        this.testDescription = description;\n    }\n\n    public String getTestName() {\n        return testName;\n    }\n    public String getTestDescription() {\n        return testDescription;\n    }\n}\n\npublic class SampleTest implements ITest {\n    // Has to be set to prevent NullPointerException from reporters\n    protected String mTestCaseName = \"\";\n\n    @DataProvider(name=\"BasicDataProvider\")\n    public Object[][] getTestData() {\n        Object[][] data = new Object[][] {\n                { new TestParameters(\"TestCase1\", \"Sample test 1\")},\n                { new TestParameters(\"TestCase2\", \"Sample test 2\")},\n                { new TestParameters(\"TestCase3\", \"Sample test 3\")},\n                { new TestParameters(\"TestCase4\", \"Sample test 4\")},\n                { new TestParameters(\"TestCase5\", \"Sample test 5\") }\n        };\n        return data;\n    }\n\n    @BeforeMethod(alwaysRun = true)\n    public void testData(Method method, Object[] testData) {\n        String testCase = \"\";\n        if (testData != null &amp;&amp; testData.length &gt; 0) {\n            TestParameters testParams = null;\n            //Check if test method has actually received required parameters\n            for (Object testParameter : testData) {\n                if (testParameter instanceof TestParameters) {\n                    testParams = (TestParameters)testParameter;\n                    break;\n                }\n            }\n            if (testParams != null) {\n                testCase = testParams.getTestName();\n            }\n        }\n        this.mTestCaseName = String.format(\"%s(%s)\", method.getName(), testCase);\n    }\n\n    @Override\n    public String getTestName() {\n        return this.mTestCaseName;\n    }\n\n    @Test(dataProvider=\"BasicDataProvider\")\n    public void testSample1(TestParameters testParams){\n        //test code here\n    }\n\n    @Test(dataProvider=\"BasicDataProvider\")\n    public void testSample2(TestParameters testParams){\n        //test code here\n    }\n\n    @Test\n    public void testSample3(){\n        //test code here\n    }\n}\n</code></pre>\n\n<p><strong>EDIT:</strong> Based on the comments below, I realized a sample from report will be useful.</p>\n\n<p>Extract from the report from running code above:</p>\n\n<pre><code>&lt;testng-results skipped=\"0\" failed=\"0\" total=\"5\" passed=\"5\"&gt;\n  &lt;suite name=\"SampleTests\" duration-ms=\"2818\" started-at=\"&lt;some-time&gt;\" finished-at=\"&lt;some-time&gt;\"&gt;\n    &lt;test name=\"Test1\" duration-ms=\"2818\" started-at=\"&lt;some-time&gt;\" finished-at=\"&lt;some-time&gt;\"&gt;\n        &lt;test-method \n            status=\"PASS\" \n            signature=\"testSample1(org.example.test.TestParameters)[pri:0, instance:org.example.test.TimeTest@c9d92c]\"\n            test-instance-name=\"testSample1(TestCase5)\"\n            name=\"testSample1\" \n            duration-ms=\"1014\"\n            started-at=\"&lt;some-time-before&gt;\" \n            data-provider=\"BasicDataProvider\" \n            finished-at=\"&lt;some-time-later&gt;\" &gt;\n            &lt;!-- excluded for demonstration purposes --&gt;\n        &lt;/test-method&gt;\n        &lt;!-- the rest of test results excluded for brevity --&gt;\n    &lt;/test&gt;\n  &lt;/suite&gt;\n&lt;/testng-result&gt;\n</code></pre>\n\n<p>Note, that the value returned from <code>getTestName()</code> method is in the <code>test-instance-name</code> attribute, and not in the <code>name</code> attribute.</p>\n"},{"tags":[],"owner":{"account_id":161315,"reputation":19,"user_id":4360367,"display_name":"Stanislav Fedii"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1420416208,"creation_date":1420416208,"answer_id":27771741,"question_id":15220262,"body_markdown":"Try implementing the org.testng.ITest interface that requires a getTestName() method.\r\nThis way reporting handles the returned value properly.","title":"Custom test method name in TestNG reports","body":"<p>Try implementing the org.testng.ITest interface that requires a getTestName() method.\nThis way reporting handles the returned value properly.</p>\n"},{"tags":[],"owner":{"account_id":5922848,"reputation":144,"user_id":4659696,"display_name":"pilotg2"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1426517585,"creation_date":1426099788,"answer_id":28994972,"question_id":15220262,"body_markdown":"I ran into a similar problem.\r\nFirst I implemented the ITest strategy already mentioned. And this is part of the solution, but not completely.\r\n\r\nTestNG, for some reason, when building different reports, calls getName() on the test while building the report. This is fine if you are not using a data provider to generate different runs and set a unique name for each run by using the ITest strategy.\r\nIf you are using a data provider to generate multiple runs of the same test and want each run to have a unique name then there is a problem. As the ITest strategy leaves the name for the test as the name set by the last run.\r\n\r\nSo I had to implement a very custom getName(). SOme assumptions (in my particular case):\r\n\r\n&gt; 1. Only three reports are run: TestHTMLReporter, EmailableReporter, XMLSuiteResultWriter.\r\n&gt; 2. When ever get name is not called as a result of one of the assumed reporters, then returning the currently set name is fine.\r\n&gt; 3. When a reporter is running, it makes its getName() calls in order and only 1 time for each run.\r\n\r\n    public String getTestName()\r\n    {\r\n        String name = testName;\r\n        StackTraceElement[] stackTrace = Thread.currentThread().getStackTrace();//.toString();\r\n        if(calledFrom(stackTrace, &quot;XMLSuiteResultWriter&quot;))\r\n        {\r\n            name = testNames.size()&gt;0?testNames.get(xmlNameIndex&lt;testNames.size()?xmlNameIndex:0):&quot;undefined&quot;;\r\n            xmlNameIndex++;\r\n            if(xmlNameIndex&gt;=testNames.size())\r\n                xmlNameIndex = 0;\r\n        }\r\n        else if(calledFrom(stackTrace, &quot;EmailableReporter&quot;))\r\n        {\r\n            name = testNames.size()&gt;0?testNames.get(emailNameIndex&lt;testNames.size()?emailNameIndex:0):&quot;undefined&quot;;\r\n            emailNameIndex++;\r\n            if(emailNameIndex&gt;=testNames.size())\r\n                emailNameIndex = 0;\r\n        }\r\n        if(calledFrom(stackTrace, &quot;TestHTMLReporter&quot;))\r\n        {\r\n            if(testNames.size()&lt;0)\r\n            {\r\n                name = &quot;undefined&quot;;\r\n            }\r\n            else\r\n            {\r\n                if(htmlNameIndex &lt; testNamesFailed.size())\r\n                {\r\n                    name = testNamesFailed.get(htmlNameIndex);\r\n                }\r\n                else\r\n                {\r\n                    int htmlPassedIndex = htmlNameIndex - testNamesFailed.size();\r\n                    if(htmlPassedIndex &lt; testNamesPassed.size())\r\n                    {\r\n                        name = testNamesPassed.get(htmlPassedIndex);\r\n                    }\r\n                    else\r\n                    {\r\n                        name = &quot;undefined&quot;;\r\n                    }\r\n                }\r\n            }\r\n            htmlNameIndex++;\r\n            if(htmlNameIndex&gt;=testNames.size())\r\n                htmlNameIndex = 0;\r\n        }\r\n        return name;\r\n    }\r\n\r\n    private boolean calledFrom(StackTraceElement[] stackTrace, String checkForMethod)\r\n    {\r\n        boolean calledFrom = false;\r\n        for(StackTraceElement element : stackTrace)\r\n        {\r\n            String stack = element.toString();\r\n            if(stack.contains(checkForMethod))\r\n                calledFrom = true;\r\n        }\r\n        return calledFrom;\r\n    }\r\n\r\nWhen setting the name for the run (I did this in the @BeforeMethod(alwaysRun=true) method I defined following the ITest strategy) I added the name to an ArrayList&lt;String&gt; testNames. But then the html report was not correct. Most of the other reports pulls the information in order, like the XMLSuiteResultWriter, but TestHTMLReporter gets the name by first getting all the names for failed tests and then the names for passing tests. So I had to implement to additional ArrayLists: testNamesFailed and testNamesPassed and add the test names to them when the test finished based on whether they passed or not.\r\n\r\nAnd I will freely admit this is very much a hack and very fragile. Ideally, TestNG adds the tests to a collection while running, and gets the name from that collection instead of from the original test. If you have TestNG to run other reports you will have to figure out what order they request the names and what is a unique enough string to search for in the thread stack trace.\r\n\r\n--Edit 1\r\n\r\nAlternatively, use the ITest Strategy and the factory pattern (@factory annotations).\r\n\r\nhttps://stackoverflow.com/questions/22915267/testng-using-factory-and-dataprovider\r\n\r\nhttp://beust.com/weblog/2004/09/27/testngs-factory/\r\n\r\nIt does require some minor changes. This includes creating a constructor with the same parameters as the original test method. The test method now has no parameters. You can set the name in the new constructor and simply return that in the getTestName method. Make sure to remove the data provider specification from the test method.","title":"Custom test method name in TestNG reports","body":"<p>I ran into a similar problem.\nFirst I implemented the ITest strategy already mentioned. And this is part of the solution, but not completely.</p>\n\n<p>TestNG, for some reason, when building different reports, calls getName() on the test while building the report. This is fine if you are not using a data provider to generate different runs and set a unique name for each run by using the ITest strategy.\nIf you are using a data provider to generate multiple runs of the same test and want each run to have a unique name then there is a problem. As the ITest strategy leaves the name for the test as the name set by the last run.</p>\n\n<p>So I had to implement a very custom getName(). SOme assumptions (in my particular case):</p>\n\n<blockquote>\n  <ol>\n  <li>Only three reports are run: TestHTMLReporter, EmailableReporter, XMLSuiteResultWriter.</li>\n  <li>When ever get name is not called as a result of one of the assumed reporters, then returning the currently set name is fine.</li>\n  <li>When a reporter is running, it makes its getName() calls in order and only 1 time for each run.</li>\n  </ol>\n</blockquote>\n\n<pre><code>public String getTestName()\n{\n    String name = testName;\n    StackTraceElement[] stackTrace = Thread.currentThread().getStackTrace();//.toString();\n    if(calledFrom(stackTrace, \"XMLSuiteResultWriter\"))\n    {\n        name = testNames.size()&gt;0?testNames.get(xmlNameIndex&lt;testNames.size()?xmlNameIndex:0):\"undefined\";\n        xmlNameIndex++;\n        if(xmlNameIndex&gt;=testNames.size())\n            xmlNameIndex = 0;\n    }\n    else if(calledFrom(stackTrace, \"EmailableReporter\"))\n    {\n        name = testNames.size()&gt;0?testNames.get(emailNameIndex&lt;testNames.size()?emailNameIndex:0):\"undefined\";\n        emailNameIndex++;\n        if(emailNameIndex&gt;=testNames.size())\n            emailNameIndex = 0;\n    }\n    if(calledFrom(stackTrace, \"TestHTMLReporter\"))\n    {\n        if(testNames.size()&lt;0)\n        {\n            name = \"undefined\";\n        }\n        else\n        {\n            if(htmlNameIndex &lt; testNamesFailed.size())\n            {\n                name = testNamesFailed.get(htmlNameIndex);\n            }\n            else\n            {\n                int htmlPassedIndex = htmlNameIndex - testNamesFailed.size();\n                if(htmlPassedIndex &lt; testNamesPassed.size())\n                {\n                    name = testNamesPassed.get(htmlPassedIndex);\n                }\n                else\n                {\n                    name = \"undefined\";\n                }\n            }\n        }\n        htmlNameIndex++;\n        if(htmlNameIndex&gt;=testNames.size())\n            htmlNameIndex = 0;\n    }\n    return name;\n}\n\nprivate boolean calledFrom(StackTraceElement[] stackTrace, String checkForMethod)\n{\n    boolean calledFrom = false;\n    for(StackTraceElement element : stackTrace)\n    {\n        String stack = element.toString();\n        if(stack.contains(checkForMethod))\n            calledFrom = true;\n    }\n    return calledFrom;\n}\n</code></pre>\n\n<p>When setting the name for the run (I did this in the @BeforeMethod(alwaysRun=true) method I defined following the ITest strategy) I added the name to an ArrayList testNames. But then the html report was not correct. Most of the other reports pulls the information in order, like the XMLSuiteResultWriter, but TestHTMLReporter gets the name by first getting all the names for failed tests and then the names for passing tests. So I had to implement to additional ArrayLists: testNamesFailed and testNamesPassed and add the test names to them when the test finished based on whether they passed or not.</p>\n\n<p>And I will freely admit this is very much a hack and very fragile. Ideally, TestNG adds the tests to a collection while running, and gets the name from that collection instead of from the original test. If you have TestNG to run other reports you will have to figure out what order they request the names and what is a unique enough string to search for in the thread stack trace.</p>\n\n<p>--Edit 1</p>\n\n<p>Alternatively, use the ITest Strategy and the factory pattern (@factory annotations).</p>\n\n<p><a href=\"https://stackoverflow.com/questions/22915267/testng-using-factory-and-dataprovider\">TestNG Using @Factory and @DataProvider</a></p>\n\n<p><a href=\"http://beust.com/weblog/2004/09/27/testngs-factory/\" rel=\"nofollow noreferrer\">http://beust.com/weblog/2004/09/27/testngs-factory/</a></p>\n\n<p>It does require some minor changes. This includes creating a constructor with the same parameters as the original test method. The test method now has no parameters. You can set the name in the new constructor and simply return that in the getTestName method. Make sure to remove the data provider specification from the test method.</p>\n"},{"tags":[],"owner":{"account_id":4891136,"reputation":1058,"user_id":3942248,"accept_rate":89,"display_name":"jersey-city-ninja"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1493681849,"creation_date":1493681849,"answer_id":43727975,"question_id":15220262,"body_markdown":"If you want to change the name in the HTML report, it&#39;ll be a total hack. \r\nHere&#39;s how I did it:\r\n\r\n    public class NinjaTest {\r\n    ...\r\n    ...\r\n    @AfterMethod (alwaysRun = true)\r\n    public void afterMethod(ITestResult result, Method method) {\r\n        try {\r\n            //I have XML test suites organized in directories. \r\n            String xmlFile = result.getTestContext().getCurrentXmlTest().getSuite().getFileName();\r\n            String suiteName = xmlFile.substring(xmlFile.lastIndexOf(&quot;\\\\&quot;) + 1, xmlFile.lastIndexOf(&quot;.xml&quot;));\r\n            String pathToFile = xmlFile.substring(0, xmlFile.lastIndexOf(&quot;\\\\&quot;) );\r\n            String directory = pathToFile.substring(pathToFile.lastIndexOf(&quot;\\\\&quot;) + 1);\r\n            String testMethodName = String.format(&quot;%s/%s - %s&quot;, directory, suiteName, method.getName());\r\n\r\n            //Total hack to change display name in HTML report  ＼(^o^)／ \r\n            Field methodName = org.testng.internal.BaseTestMethod.class.getDeclaredField(&quot;m_methodName&quot;);\r\n            methodName.setAccessible(true);\r\n            methodName.set(result.getMethod(), testMethodName);\r\n        } catch (Exception e) {\r\n            // Eh....  &#175;\\_(ツ)_/&#175;\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n    ...\r\n    ...\r\n\r\n\r\n","title":"Custom test method name in TestNG reports","body":"<p>If you want to change the name in the HTML report, it'll be a total hack. \nHere's how I did it:</p>\n\n<pre><code>public class NinjaTest {\n...\n...\n@AfterMethod (alwaysRun = true)\npublic void afterMethod(ITestResult result, Method method) {\n    try {\n        //I have XML test suites organized in directories. \n        String xmlFile = result.getTestContext().getCurrentXmlTest().getSuite().getFileName();\n        String suiteName = xmlFile.substring(xmlFile.lastIndexOf(\"\\\\\") + 1, xmlFile.lastIndexOf(\".xml\"));\n        String pathToFile = xmlFile.substring(0, xmlFile.lastIndexOf(\"\\\\\") );\n        String directory = pathToFile.substring(pathToFile.lastIndexOf(\"\\\\\") + 1);\n        String testMethodName = String.format(\"%s/%s - %s\", directory, suiteName, method.getName());\n\n        //Total hack to change display name in HTML report  ＼(^o^)／ \n        Field methodName = org.testng.internal.BaseTestMethod.class.getDeclaredField(\"m_methodName\");\n        methodName.setAccessible(true);\n        methodName.set(result.getMethod(), testMethodName);\n    } catch (Exception e) {\n        // Eh....  ¯\\_(ツ)_/¯\n        e.printStackTrace();\n    }\n}\n...\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3720377,"reputation":1016,"user_id":3095589,"display_name":"Radadiya Nikunj"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1522184941,"creation_date":1522184941,"answer_id":49522435,"question_id":15220262,"body_markdown":"Please find following code for set custom name of testcase in TestNG reports.\r\n        \r\nFollowing features are available in this code.\r\n        \r\n- Dynamic execution on same test-case in multiple time\r\n- Set custom test-case name for reports\r\n- Set parallel execution of multiple test-cases execution\r\n\r\n\r\n    \timport java.lang.reflect.Field;\r\n        import org.testng.ITest;\r\n        import org.testng.ITestResult;\r\n        import org.testng.Reporter;\r\n        import org.testng.annotations.AfterMethod;\r\n        import org.testng.annotations.DataProvider;\r\n        import org.testng.annotations.Factory;\r\n        import org.testng.annotations.Test;\r\n        import org.testng.internal.BaseTestMethod;\r\n        import com.test.data.ServiceProcessData;\r\n        \r\n        public class ServiceTest implements ITest {\r\n    \r\n    \tprotected ServiceProcessData serviceProcessData;\r\n    \tprotected String testCaseName = &quot;&quot;;\r\n    \r\n    \t@Test\r\n    \tpublic void executeServiceTest() {\r\n    \t\tSystem.out.println(this.serviceProcessData.toString());\r\n    \t}\r\n    \r\n    \t@Factory(dataProvider = &quot;processDataList&quot;)\r\n    \tpublic RiskServiceTest(ServiceProcessData serviceProcessData) {\r\n    \t\tthis.serviceProcessData = serviceProcessData;\r\n    \t}\r\n    \r\n    \t@DataProvider(name = &quot;processDataList&quot;, parallel = true)\r\n    \tpublic static Object[] getProcessDataList() {\r\n    \r\n    \t\tObject[] serviceProcessDataList = new Object[0];\r\n    \t\t//Set data in serviceProcessDataList\r\n    \t\treturn serviceProcessDataList;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic String getTestName() {\r\n    \r\n    \t\tthis.testCaseName = &quot;User custom testcase name&quot;;\r\n    \r\n    \t\treturn this.testCaseName;\r\n    \t}\r\n    \r\n    \t@AfterMethod(alwaysRun = true)\r\n    \tpublic void setResultTestName(ITestResult result) {\r\n    \t\ttry {\r\n    \t\t\tBaseTestMethod baseTestMethod = (BaseTestMethod) result.getMethod();\r\n    \t\t\tField f = baseTestMethod.getClass().getSuperclass().getDeclaredField(&quot;m_methodName&quot;);\r\n    \t\t\tf.setAccessible(true);\r\n    \t\t\tf.set(baseTestMethod, this.testCaseName);\r\n    \t\t} catch (Exception e) {\r\n    \t\t\tErrorMessageHelper.getInstance().setErrorMessage(e);\r\n    \t\t\tReporter.log(&quot;Exception : &quot; + e.getMessage());\r\n    \t\t}\r\n    \t}}\r\n    \r\n\r\n    Thanks","title":"Custom test method name in TestNG reports","body":"<p>Please find following code for set custom name of testcase in TestNG reports.</p>\n\n<p>Following features are available in this code.</p>\n\n<ul>\n<li>Dynamic execution on same test-case in multiple time</li>\n<li>Set custom test-case name for reports</li>\n<li><p>Set parallel execution of multiple test-cases execution</p>\n\n<pre><code>import java.lang.reflect.Field;\nimport org.testng.ITest;\nimport org.testng.ITestResult;\nimport org.testng.Reporter;\nimport org.testng.annotations.AfterMethod;\nimport org.testng.annotations.DataProvider;\nimport org.testng.annotations.Factory;\nimport org.testng.annotations.Test;\nimport org.testng.internal.BaseTestMethod;\nimport com.test.data.ServiceProcessData;\n\npublic class ServiceTest implements ITest {\n\nprotected ServiceProcessData serviceProcessData;\nprotected String testCaseName = \"\";\n\n@Test\npublic void executeServiceTest() {\n    System.out.println(this.serviceProcessData.toString());\n}\n\n@Factory(dataProvider = \"processDataList\")\npublic RiskServiceTest(ServiceProcessData serviceProcessData) {\n    this.serviceProcessData = serviceProcessData;\n}\n\n@DataProvider(name = \"processDataList\", parallel = true)\npublic static Object[] getProcessDataList() {\n\n    Object[] serviceProcessDataList = new Object[0];\n    //Set data in serviceProcessDataList\n    return serviceProcessDataList;\n}\n\n@Override\npublic String getTestName() {\n\n    this.testCaseName = \"User custom testcase name\";\n\n    return this.testCaseName;\n}\n\n@AfterMethod(alwaysRun = true)\npublic void setResultTestName(ITestResult result) {\n    try {\n        BaseTestMethod baseTestMethod = (BaseTestMethod) result.getMethod();\n        Field f = baseTestMethod.getClass().getSuperclass().getDeclaredField(\"m_methodName\");\n        f.setAccessible(true);\n        f.set(baseTestMethod, this.testCaseName);\n    } catch (Exception e) {\n        ErrorMessageHelper.getInstance().setErrorMessage(e);\n        Reporter.log(\"Exception : \" + e.getMessage());\n    }\n}}\n</code></pre>\n\n<p>Thanks</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":4177498,"reputation":416,"user_id":3423570,"display_name":"Rohit"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1591623545,"creation_date":1591623545,"answer_id":62263418,"question_id":15220262,"body_markdown":"The answer by artdanil did not completely solve my problem, the test name is not updated in emailable report. \r\n\r\nAnswer posted by @jersey-city-ninja does update the name in Emailable report but it repeats the same-last updated testname for all the Dataprovider values because what pilotg2 posted is true for tests that consume Dataprovider i.e. the getTestName method keeps returning the last set name for a method and all the testnames for a dataprovider are same.  \r\n    \r\n**So here is the answer** that is combination of answer posted by @pilotg2 and @jersey-city-ninja and with additional step to overcome duplicate method names.\r\n    \r\n**Note** this updates the testname in Emailable report, XML report, HTML report, Junit report. \r\nI don&#39;t see it updating the Eclipse - TestNg execution view - will update if I found something\r\n    \r\n    import org.testng.Assert;\r\n    import org.testng.ITest;\r\n    import org.testng.ITestContext;\r\n    import org.testng.ITestResult;\r\n    import org.testng.annotations.AfterMethod;\r\n    import org.testng.annotations.BeforeClass;\r\n    import org.testng.annotations.BeforeMethod;\r\n    import org.testng.annotations.DataProvider;\r\n    import org.testng.annotations.Test;\r\n    \r\n    import java.lang.reflect.Method;\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.Iterator;\r\n    import java.util.List;\r\n    \r\n    \r\n    public class NewDataProviderTest implements ITest {\r\n    \t//The Java ThreadLocal class enables you to create variables that can only be read and written by the same thread\r\n    \tprivate ThreadLocal&lt;String&gt; testName = new ThreadLocal&lt;&gt;();\r\n    \r\n    \t/*\r\n    \t* TestNG, for some reason, when building different reports, calls getName() on the test while building the report.\r\n    \t* This is fine if you are not using a data provider to generate different runs and set a unique name for each run by using the ITest strategy.\r\n    \t* If you are using a data provider to generate multiple runs of the same test and want each run to have a unique name then there is a problem.\r\n    \t* As the ITest strategy returns the name for the test as the name set by the last run.\r\n    \t* */\r\n    \tprivate int emailNameIndex = 0;\r\n    \tprivate int htmlNameIndex = 0;\r\n    \tprivate int xmlNameIndex = 0;\r\n    \tprivate ArrayList&lt;String&gt; allTests = new ArrayList&lt;String&gt;();\r\n    \t/*\r\n    \t* TestHTMLReporter gets the name by first getting all the names for failed tests and then the names for passing tests\r\n    \t* Hence keeping them in 2 separate lists\r\n    \t* */\r\n    \tprivate ArrayList&lt;String&gt; passedTests = new ArrayList&lt;String&gt;();\r\n    \tprivate ArrayList&lt;String&gt; failedTests = new ArrayList&lt;String&gt;();\r\n    \t\r\n    \t@BeforeClass(alwaysRun = true)\r\n    \tpublic void initialize() {\r\n    \t\tthis.testName.set(&quot;&quot;);\r\n    \t}\r\n        \r\n    \t@BeforeMethod(alwaysRun = true)\r\n    \tpublic void setCustomTestcaseName(Method method, Object[] testData) {\r\n    \t\t//Set the default name\r\n    \t\tthis.testName.set(method.getName());\r\n    \t\t//Change the test name only if Dataprovider is used\r\n    \t\t//Check if data provider is used in the test\r\n    \t\tif (testData != null &amp;&amp; testData.length &gt; 0) {\r\n    \t\t\tSystem.out.println(&quot;\\n\\nParameters &quot;+testData[0]+&quot; are passed to the test - &quot;+method.getName());\r\n    \t\t\t//Taking 1st field in the Dataprovider for updating testname - can be changed as desired maybe using a variable\r\n    \t\t\t//I&#39;m changing the name only if the Dataprovider field is String\r\n    \t\t\tif (testData[0] instanceof String) {\r\n    \t\t\t\t//Taking 1st field in the Dataprovider for updating testname - can be changed as desired\r\n    \t\t\t\tSystem.out.println(&quot;I&#39;m setting custom name to the test as &quot;+method.getName() + &quot;_&quot; + testData[0]);\r\n    \t\t\t\tthis.testName.set(method.getName() + &quot;_&quot; + testData[0]);\r\n    \t\t\t}\r\n    \r\n    \t\t}\r\n    \t\t//Add the name to the collection that stores all list names\r\n    \t\tallTests.add(testName.get());\r\n    \r\n    \t}\r\n    \t \r\n    \t @AfterMethod (alwaysRun = true)\r\n    \t public void setTheTestcaseNameInResult(ITestResult result, Method method) {\r\n    \t\t//Fill the Passed and Failed tests collections\r\n    \t     try {\r\n    \t    \t if(result.getStatus() == ITestResult.SUCCESS) {\r\n    \t    \t\t System.out.println(&quot;Adding &quot;+ result.getTestName() + &quot; to passed tests collection&quot;);\r\n    \t    \t\t passedTests.add(result.getTestName());\r\n    \t    \t }\r\n    \t    \t if(result.getStatus() == ITestResult.FAILURE) {\r\n    \t\t\t\t System.out.println(&quot;Adding &quot; + result.getTestName() + &quot; to FAILURE tests collection&quot;);\r\n    \t\t\t\t failedTests.add(result.getTestName());\r\n    \t\t\t }\r\n    \t     } catch (Exception e) {\r\n    \t         e.printStackTrace();\r\n    \t     }\r\n    \t\t // To change display name in HTML report\r\n             //Only changing the name if the parameter is instance of String\r\n    \t\t if(iTestResult.getParameters().length &gt; 0) {\r\n    \t\t\t if (iTestResult.getParameters()[0] instanceof String) {\r\n    \t\t\t\t System.out.println(&quot;Updating the name as Parameters are passed to the test-&quot;+method.getName());\r\n    \t\t\t\t try {\r\n                         /* This helps in setting unique name to method for each test instance for a data provider*/\r\n    \t\t\t\t\t Field resultMethod = TestResult.class.getDeclaredField(&quot;m_method&quot;);\r\n    \t\t\t\t\t resultMethod.setAccessible(true);\r\n    \t\t\t\t\t resultMethod.set(iTestResult, iTestResult.getMethod().clone());\r\n    \r\n    \t\t\t\t\t Field methodName = org.testng.internal.BaseTestMethod.class.getDeclaredField(&quot;m_methodName&quot;);\r\n    \t\t\t\t\t methodName.setAccessible(true);\r\n    \t\t\t\t\t methodName.set(iTestResult.getMethod(), this.getTestName());\r\n    \t\t\t\t } catch (Exception e) {\r\n    \t\t\t\t\t e.printStackTrace();\r\n    \t\t\t\t }\r\n    \t\t\t\t System.out.println(&quot;New Name is - &quot; + iTestResult.getMethod().getMethodName());\r\n    \r\n    \t\t\t }\r\n    \t\t }\r\n    \t }\r\n    \r\n    \t@Override\r\n    \tpublic String getTestName() {\r\n    \t\tString name = testName.get();\r\n    \t\tStackTraceElement[] stackTrace = Thread.currentThread().getStackTrace();// .toString();\r\n    \t\t//This is called\r\n    \t\tif (isCalledFromMethod(stackTrace, &quot;XMLSuiteResultWriter&quot;)) {\r\n    \t\t\t//System.out.println(&quot;Got called from XMLSuiteResultWriter&quot;);\r\n    \t\t\tif (allTestNames.size() &gt; 0) {\r\n    \t\t\t\tif (xmlNameIndex &lt; allTestNames.size()) {\r\n    \t\t\t\t\tname = allTestNames.get(xmlNameIndex);\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\tname = allTestNames.get(0);\r\n    \t\t\t\t}\r\n    \t\t\t} else {\r\n    \t\t\t\tname = &quot;undefined&quot;;\r\n    \t\t\t}\r\n    \t\t\txmlNameIndex++;\r\n    \t\t\tif (xmlNameIndex &gt;= allTestNames.size()) {\r\n    \t\t\t\txmlNameIndex = 0;\r\n    \t\t\t}\r\n    \t\t\t// System.out.println(&quot;Got called from XMLSuiteResultWriter returning name - &quot;+name);\r\n    \t\t} else if (isCalledFromMethod(stackTrace, &quot;EmailableReporter&quot;)) {\r\n    \t\t\tif (allTestNames.size() &gt; 0) {\r\n    \t\t\t\tif (emailNameIndex &lt; allTestNames.size()) {\r\n    \t\t\t\t\tname = allTestNames.get(emailNameIndex);\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\tname = allTestNames.get(0);\r\n    \t\t\t\t}\r\n    \t\t\t} else {\r\n    \t\t\t\tname = &quot;undefined&quot;;\r\n    \t\t\t}\r\n    \t\t\temailNameIndex++;\r\n    \t\t\tif (emailNameIndex &gt;= allTestNames.size()) {\r\n    \t\t\t\temailNameIndex = 0;\r\n    \t\t\t}\r\n    \t\t\tSystem.out.println(&quot;Got called from EmailableReporter returning name -&quot;+name);\r\n    \t\t}\r\n    \t\tif (isCalledFromMethod(stackTrace, &quot;TestHTMLReporter&quot;)) {\r\n    \t\t\tif (allTestNames.size() &lt;= 0) {\r\n    \t\t\t\tname = &quot;undefined&quot;;\r\n    \t\t\t} else {\r\n    \t\t\t\tif (htmlNameIndex &lt; failedTestNames.size()) {\r\n    \t\t\t\t\tname = failedTestNames.get(htmlNameIndex);\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\tint htmlPassedIndex = htmlNameIndex - failedTestNames.size();\r\n    \t\t\t\t\tif (htmlPassedIndex &lt; passedTestNames.size()) {\r\n    \t\t\t\t\t\tname = passedTestNames.get(htmlPassedIndex);\r\n    \t\t\t\t\t} else {\r\n    \t\t\t\t\t\tname = &quot;undefined&quot;;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\thtmlNameIndex++;\r\n    \t\t\tif (htmlNameIndex &gt;= allTestNames.size()) {\r\n    \t\t\t\thtmlNameIndex = 0;\r\n    \t\t\t}\r\n    \t\t\tSystem.out.println(&quot;Got called from TestHTMLReporter returning name - &quot;+name);\r\n    \t\t}\r\n    \t\tSystem.out.println(&quot;Returning testname as-&quot;+name);\r\n    \t\treturn name;\r\n    \t}\r\n    \r\n    \tprivate boolean isCalledFromMethod(StackTraceElement[] stackTrace, String checkForMethod) {\r\n    \t\tboolean calledFrom = false;\r\n    \t\tfor (StackTraceElement element : stackTrace) {\r\n    \t\t\tString stack = element.toString();\r\n    \t\t\t// System.out.println(&quot;Rohit the called from value is:&quot;+stack);\r\n    \t\t\tif (stack.contains(checkForMethod))\r\n    \t\t\t\tcalledFrom = true;\r\n    \t\t}\r\n    \t\treturn calledFrom;\r\n    \t}\r\n    \t \r\n    \t \r\n      @Test(groups= {&quot;L1&quot;, &quot;L2&quot;, &quot;L3&quot;}, dataProvider = &quot;dp1&quot;)\r\n      public void dataProviderTest(String username) {\r\n    \t  System.out.println(&quot;\\n\\nI&#39;m in dataProviderTest with data-&quot;+username);\r\n    \t  /* Fail the test if value is L2 - deliberately so that we have failed test in report */ \r\n          if(username.contains(&quot;L2&quot;)) {\r\n    \t\t  Assert.fail();\r\n    \t  }\r\n    \t  \r\n      }\r\n      \r\n      @Test(dependsOnMethods = &quot;dataProviderTest&quot;, groups= {&quot;L1&quot;, &quot;L2&quot;, &quot;L3&quot;}, dataProvider = &quot;dp1&quot;)\r\n      public void dataProviderDependentTest(String username) {\r\n    \t  System.out.println(&quot;\\n\\nI&#39;m in dataProvider DEPENDENT Test with data-&quot;+username);\r\n    \t \r\n      }\r\n      \r\n      //This test consumes data of type list so the name will not be updated in report\r\n      @Test(groups= {&quot;L1&quot;, &quot;L2&quot;, &quot;L3&quot;}, dataProvider = &quot;dp2&quot;)\r\n      public void dataListProviderTest(List&lt;String[]&gt; list) {\r\n    \t  Object[] arr = list.get(0);\r\n    \t\tList&lt;Object&gt; arrList = Arrays.asList(arr);\r\n    \t\tIterator&lt;Object&gt; iterator = arrList.iterator();\r\n    \t\twhile (iterator.hasNext()) {\r\n    \t\t\t\r\n    \t\tString[] data = (String[]) iterator.next();\r\n    \t\tSystem.out.println(&quot;In list test - &quot;+data[0]);\r\n    \t\t}\t \r\n    \t  \r\n      }\r\n      \r\n      @DataProvider(name=&quot;dp1&quot;)\r\n      public Object[][] getDataForTest(ITestContext iTestContext){\r\n    \t  Object[][] L1 = new Object[][] {\r\n    \t\t  {&quot;L1&quot;}, {&quot;L2&quot;}, {&quot;L3&quot;}\r\n    \t  };\r\n  \r\n    \t  \r\n    \t  return L1;\r\n      }\r\n      \r\n      \r\n      @DataProvider(name=&quot;dp2&quot;)\r\n      public Object[][] getDataListForTest(ITestContext iTestContext){\r\n    \t  List&lt;Object[][]&gt; list = new ArrayList&lt;Object[][]&gt;();\r\n    \t  Object[][] L1 = new Object[][] {\r\n    \t\t  new String [] {&quot;L1&quot;, &quot;l1&quot;}, \r\n    \t\t  new String [] {&quot;L1&quot;, &quot;l1&quot;}\r\n    \t  };\r\n    \t  \r\n    \t list.add(L1);\r\n    \t  return new Object[][] { { list } };\r\n      }\r\n      \r\n    }\r\n\r\n","title":"Custom test method name in TestNG reports","body":"<p>The answer by artdanil did not completely solve my problem, the test name is not updated in emailable report. </p>\n\n<p>Answer posted by @jersey-city-ninja does update the name in Emailable report but it repeats the same-last updated testname for all the Dataprovider values because what pilotg2 posted is true for tests that consume Dataprovider i.e. the getTestName method keeps returning the last set name for a method and all the testnames for a dataprovider are same.  </p>\n\n<p><strong>So here is the answer</strong> that is combination of answer posted by @pilotg2 and @jersey-city-ninja and with additional step to overcome duplicate method names.</p>\n\n<p><strong>Note</strong> this updates the testname in Emailable report, XML report, HTML report, Junit report. \nI don't see it updating the Eclipse - TestNg execution view - will update if I found something</p>\n\n<pre><code>import org.testng.Assert;\nimport org.testng.ITest;\nimport org.testng.ITestContext;\nimport org.testng.ITestResult;\nimport org.testng.annotations.AfterMethod;\nimport org.testng.annotations.BeforeClass;\nimport org.testng.annotations.BeforeMethod;\nimport org.testng.annotations.DataProvider;\nimport org.testng.annotations.Test;\n\nimport java.lang.reflect.Method;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Iterator;\nimport java.util.List;\n\n\npublic class NewDataProviderTest implements ITest {\n    //The Java ThreadLocal class enables you to create variables that can only be read and written by the same thread\n    private ThreadLocal&lt;String&gt; testName = new ThreadLocal&lt;&gt;();\n\n    /*\n    * TestNG, for some reason, when building different reports, calls getName() on the test while building the report.\n    * This is fine if you are not using a data provider to generate different runs and set a unique name for each run by using the ITest strategy.\n    * If you are using a data provider to generate multiple runs of the same test and want each run to have a unique name then there is a problem.\n    * As the ITest strategy returns the name for the test as the name set by the last run.\n    * */\n    private int emailNameIndex = 0;\n    private int htmlNameIndex = 0;\n    private int xmlNameIndex = 0;\n    private ArrayList&lt;String&gt; allTests = new ArrayList&lt;String&gt;();\n    /*\n    * TestHTMLReporter gets the name by first getting all the names for failed tests and then the names for passing tests\n    * Hence keeping them in 2 separate lists\n    * */\n    private ArrayList&lt;String&gt; passedTests = new ArrayList&lt;String&gt;();\n    private ArrayList&lt;String&gt; failedTests = new ArrayList&lt;String&gt;();\n\n    @BeforeClass(alwaysRun = true)\n    public void initialize() {\n        this.testName.set(\"\");\n    }\n\n    @BeforeMethod(alwaysRun = true)\n    public void setCustomTestcaseName(Method method, Object[] testData) {\n        //Set the default name\n        this.testName.set(method.getName());\n        //Change the test name only if Dataprovider is used\n        //Check if data provider is used in the test\n        if (testData != null &amp;&amp; testData.length &gt; 0) {\n            System.out.println(\"\\n\\nParameters \"+testData[0]+\" are passed to the test - \"+method.getName());\n            //Taking 1st field in the Dataprovider for updating testname - can be changed as desired maybe using a variable\n            //I'm changing the name only if the Dataprovider field is String\n            if (testData[0] instanceof String) {\n                //Taking 1st field in the Dataprovider for updating testname - can be changed as desired\n                System.out.println(\"I'm setting custom name to the test as \"+method.getName() + \"_\" + testData[0]);\n                this.testName.set(method.getName() + \"_\" + testData[0]);\n            }\n\n        }\n        //Add the name to the collection that stores all list names\n        allTests.add(testName.get());\n\n    }\n\n     @AfterMethod (alwaysRun = true)\n     public void setTheTestcaseNameInResult(ITestResult result, Method method) {\n        //Fill the Passed and Failed tests collections\n         try {\n             if(result.getStatus() == ITestResult.SUCCESS) {\n                 System.out.println(\"Adding \"+ result.getTestName() + \" to passed tests collection\");\n                 passedTests.add(result.getTestName());\n             }\n             if(result.getStatus() == ITestResult.FAILURE) {\n                 System.out.println(\"Adding \" + result.getTestName() + \" to FAILURE tests collection\");\n                 failedTests.add(result.getTestName());\n             }\n         } catch (Exception e) {\n             e.printStackTrace();\n         }\n         // To change display name in HTML report\n         //Only changing the name if the parameter is instance of String\n         if(iTestResult.getParameters().length &gt; 0) {\n             if (iTestResult.getParameters()[0] instanceof String) {\n                 System.out.println(\"Updating the name as Parameters are passed to the test-\"+method.getName());\n                 try {\n                     /* This helps in setting unique name to method for each test instance for a data provider*/\n                     Field resultMethod = TestResult.class.getDeclaredField(\"m_method\");\n                     resultMethod.setAccessible(true);\n                     resultMethod.set(iTestResult, iTestResult.getMethod().clone());\n\n                     Field methodName = org.testng.internal.BaseTestMethod.class.getDeclaredField(\"m_methodName\");\n                     methodName.setAccessible(true);\n                     methodName.set(iTestResult.getMethod(), this.getTestName());\n                 } catch (Exception e) {\n                     e.printStackTrace();\n                 }\n                 System.out.println(\"New Name is - \" + iTestResult.getMethod().getMethodName());\n\n             }\n         }\n     }\n\n    @Override\n    public String getTestName() {\n        String name = testName.get();\n        StackTraceElement[] stackTrace = Thread.currentThread().getStackTrace();// .toString();\n        //This is called\n        if (isCalledFromMethod(stackTrace, \"XMLSuiteResultWriter\")) {\n            //System.out.println(\"Got called from XMLSuiteResultWriter\");\n            if (allTestNames.size() &gt; 0) {\n                if (xmlNameIndex &lt; allTestNames.size()) {\n                    name = allTestNames.get(xmlNameIndex);\n                } else {\n                    name = allTestNames.get(0);\n                }\n            } else {\n                name = \"undefined\";\n            }\n            xmlNameIndex++;\n            if (xmlNameIndex &gt;= allTestNames.size()) {\n                xmlNameIndex = 0;\n            }\n            // System.out.println(\"Got called from XMLSuiteResultWriter returning name - \"+name);\n        } else if (isCalledFromMethod(stackTrace, \"EmailableReporter\")) {\n            if (allTestNames.size() &gt; 0) {\n                if (emailNameIndex &lt; allTestNames.size()) {\n                    name = allTestNames.get(emailNameIndex);\n                } else {\n                    name = allTestNames.get(0);\n                }\n            } else {\n                name = \"undefined\";\n            }\n            emailNameIndex++;\n            if (emailNameIndex &gt;= allTestNames.size()) {\n                emailNameIndex = 0;\n            }\n            System.out.println(\"Got called from EmailableReporter returning name -\"+name);\n        }\n        if (isCalledFromMethod(stackTrace, \"TestHTMLReporter\")) {\n            if (allTestNames.size() &lt;= 0) {\n                name = \"undefined\";\n            } else {\n                if (htmlNameIndex &lt; failedTestNames.size()) {\n                    name = failedTestNames.get(htmlNameIndex);\n                } else {\n                    int htmlPassedIndex = htmlNameIndex - failedTestNames.size();\n                    if (htmlPassedIndex &lt; passedTestNames.size()) {\n                        name = passedTestNames.get(htmlPassedIndex);\n                    } else {\n                        name = \"undefined\";\n                    }\n                }\n            }\n            htmlNameIndex++;\n            if (htmlNameIndex &gt;= allTestNames.size()) {\n                htmlNameIndex = 0;\n            }\n            System.out.println(\"Got called from TestHTMLReporter returning name - \"+name);\n        }\n        System.out.println(\"Returning testname as-\"+name);\n        return name;\n    }\n\n    private boolean isCalledFromMethod(StackTraceElement[] stackTrace, String checkForMethod) {\n        boolean calledFrom = false;\n        for (StackTraceElement element : stackTrace) {\n            String stack = element.toString();\n            // System.out.println(\"Rohit the called from value is:\"+stack);\n            if (stack.contains(checkForMethod))\n                calledFrom = true;\n        }\n        return calledFrom;\n    }\n\n\n  @Test(groups= {\"L1\", \"L2\", \"L3\"}, dataProvider = \"dp1\")\n  public void dataProviderTest(String username) {\n      System.out.println(\"\\n\\nI'm in dataProviderTest with data-\"+username);\n      /* Fail the test if value is L2 - deliberately so that we have failed test in report */ \n      if(username.contains(\"L2\")) {\n          Assert.fail();\n      }\n\n  }\n\n  @Test(dependsOnMethods = \"dataProviderTest\", groups= {\"L1\", \"L2\", \"L3\"}, dataProvider = \"dp1\")\n  public void dataProviderDependentTest(String username) {\n      System.out.println(\"\\n\\nI'm in dataProvider DEPENDENT Test with data-\"+username);\n\n  }\n\n  //This test consumes data of type list so the name will not be updated in report\n  @Test(groups= {\"L1\", \"L2\", \"L3\"}, dataProvider = \"dp2\")\n  public void dataListProviderTest(List&lt;String[]&gt; list) {\n      Object[] arr = list.get(0);\n        List&lt;Object&gt; arrList = Arrays.asList(arr);\n        Iterator&lt;Object&gt; iterator = arrList.iterator();\n        while (iterator.hasNext()) {\n\n        String[] data = (String[]) iterator.next();\n        System.out.println(\"In list test - \"+data[0]);\n        }    \n\n  }\n\n  @DataProvider(name=\"dp1\")\n  public Object[][] getDataForTest(ITestContext iTestContext){\n      Object[][] L1 = new Object[][] {\n          {\"L1\"}, {\"L2\"}, {\"L3\"}\n      };\n\n\n      return L1;\n  }\n\n\n  @DataProvider(name=\"dp2\")\n  public Object[][] getDataListForTest(ITestContext iTestContext){\n      List&lt;Object[][]&gt; list = new ArrayList&lt;Object[][]&gt;();\n      Object[][] L1 = new Object[][] {\n          new String [] {\"L1\", \"l1\"}, \n          new String [] {\"L1\", \"l1\"}\n      };\n\n     list.add(L1);\n      return new Object[][] { { list } };\n  }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":343525,"reputation":675,"user_id":675295,"display_name":"ghm1014"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637094836,"creation_date":1637094836,"answer_id":69995725,"question_id":15220262,"body_markdown":"Running into the same issue this is how we solved it:\r\n\r\nThe problem is that all ITestResult result objects share a single ITestNGMethod object instance, so when the method name is changed it affects all results. \r\n\r\nFrom:\r\norg.testng.reporters.XMLSuiteResultWriter#getTestResultAttributes\r\n\r\n        attributes.setProperty(XMLReporterConfig.ATTR_NAME, testResult.getMethod().getMethodName());\r\n\r\nThe name attribute is being read from testResult.getMethod().getMethodName()\r\n\r\nBasically we cloned the method object for each result, so each can have an independent getMethod().\r\n\r\nWe added this code:\r\n\r\n      @AfterMethod(alwaysRun = true)\r\n    public void setResultTestName(ITestResult result, ITestContext context) {\r\n        try {\r\n            BaseTestMethod baseTestMethod = (BaseTestMethod) result.getMethod().clone();\r\n\r\n            String featureName = StringUtils.substringBetween(result.getParameters()[1].toString(), &quot;[&quot;, &quot;]&quot;);\r\n            String scenarioName = result.getParameters()[0].toString().replace(&quot;\\&quot;&quot;, &quot;&quot;);\r\n            Field f = baseTestMethod.getClass().getSuperclass().getDeclaredField(&quot;m_methodName&quot;);\r\n            f.setAccessible(true);\r\n            f.set(baseTestMethod, featureName + &quot; - &quot; + scenarioName);\r\n\r\n            f = result.getClass().getDeclaredField(&quot;m_method&quot;);\r\n            f.setAccessible(true);\r\n            f.set(result, baseTestMethod);\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }","title":"Custom test method name in TestNG reports","body":"<p>Running into the same issue this is how we solved it:</p>\n<p>The problem is that all ITestResult result objects share a single ITestNGMethod object instance, so when the method name is changed it affects all results.</p>\n<p>From:\norg.testng.reporters.XMLSuiteResultWriter#getTestResultAttributes</p>\n<pre><code>    attributes.setProperty(XMLReporterConfig.ATTR_NAME, testResult.getMethod().getMethodName());\n</code></pre>\n<p>The name attribute is being read from testResult.getMethod().getMethodName()</p>\n<p>Basically we cloned the method object for each result, so each can have an independent getMethod().</p>\n<p>We added this code:</p>\n<pre><code>  @AfterMethod(alwaysRun = true)\npublic void setResultTestName(ITestResult result, ITestContext context) {\n    try {\n        BaseTestMethod baseTestMethod = (BaseTestMethod) result.getMethod().clone();\n\n        String featureName = StringUtils.substringBetween(result.getParameters()[1].toString(), &quot;[&quot;, &quot;]&quot;);\n        String scenarioName = result.getParameters()[0].toString().replace(&quot;\\&quot;&quot;, &quot;&quot;);\n        Field f = baseTestMethod.getClass().getSuperclass().getDeclaredField(&quot;m_methodName&quot;);\n        f.setAccessible(true);\n        f.set(baseTestMethod, featureName + &quot; - &quot; + scenarioName);\n\n        f = result.getClass().getDeclaredField(&quot;m_method&quot;);\n        f.setAccessible(true);\n        f.set(result, baseTestMethod);\n\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":465422,"reputation":3287,"user_id":869488,"accept_rate":32,"display_name":"rajesh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37497,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"answer_count":7,"score":24,"last_activity_date":1637094836,"creation_date":1362475943,"question_id":15220262,"body_markdown":"I am working on a project where I need to invoke TestNG programatically(using data providers). Things are fine except that in the report, we are getting the name of the @Test method, which is a generic one to handle many cases. What we would like is to get a meaningful name in the report.\r\n\r\nI was researching on this and found 3 ways, but unfortunately, all are failing for me.\r\n\r\n**1) Implement ITest**\r\n\r\nI have found about this [here](https://groups.google.com/forum/?fromgroups=#!topic/testng-users/a6v0PkSVmM0) and [here](https://stackoverflow.com/questions/12257387/names-for-dynamically-generated-testng-tests-in-eclipse-plugin/12291703)\r\n\r\nI am setting the name I want as soon as I enter the @Test method(For all 3 ways i tried,this is how I am setting the name).This name is returned from getTestName(). What i observed is that getTestName() is getting called before and after my @Test. Initially, it is returning null(for handling NullPointerException, I return &quot;&quot; instead of null) and later it returns correct value. But i dont see this getting reflected in the report\r\n\r\n**Edit**:Also tried setting the name from@BeforeMethod as suggested by artdanil\r\n\r\n**2 and 3**\r\n\r\nBoth are based on solutions given in the [second link above](https://stackoverflow.com/questions/12257387/names-for-dynamically-generated-testng-tests-in-eclipse-plugin/12291703)\r\n\r\nBy overriding setName in XmlSuite, I am getting\r\n\r\n   \r\n\r\n    Exception in thread &quot;main&quot; java.lang.AssertionError: l should not be null\r\n            at org.testng.ClassMethodMap.removeAndCheckIfLast(ClassMethodMap.java:58)\r\n            at org.testng.internal.TestMethodWorker.invokeAfterClassMethods(TestMethodWorker.java:208)\r\n            at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:114)\r\n            at org.testng.TestRunner.privateRun(TestRunner.java:767)\r\n            ...\r\n\r\nBy overriding toString(), I see these in logs (with my comments) but no updates in report\r\n\r\n    [2013-03-05 14:53:22,174] (Main.java:30) - calling execute \r\n        [2013-03-05 14:53:22,346] GenericFunctionTest.&lt;init&gt;(GenericFunctionTest.java:52) - inside constructor\r\n        [2013-03-05 14:53:22,372] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning **//this followed by 3 invocations before arriving at @Test method**\r\n        [2013-03-05 14:53:22,410] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning \r\n        [2013-03-05 14:53:22,416] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning \r\n        [2013-03-05 14:53:22,455] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning \r\n        [2013-03-05 14:53:22,892] GenericFunctionTest.&lt;init&gt;(GenericFunctionTest.java:52) - inside constructor \r\n        [2013-03-05 14:53:23,178] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning **//again blank as i havent set it yet**\r\n        [2013-03-05 14:53:23,182] GenericFunctionTest.getResult(GenericFunctionTest.java:69) - inside with test case:TestCase{signature=Signature{...}}**//I am setting it immedietely after this**\r\n        [2013-03-05 14:53:23,293] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning MyMethodName **//What i want**\r\n        [2013-03-05 14:53:23,299] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning MyMethodName **// again**\r\n\r\n**Edit:** tried again all 3 by hardcoding a value rather than setting it on entry of my test method. But same results","title":"Custom test method name in TestNG reports","body":"<p>I am working on a project where I need to invoke TestNG programatically(using data providers). Things are fine except that in the report, we are getting the name of the @Test method, which is a generic one to handle many cases. What we would like is to get a meaningful name in the report.</p>\n\n<p>I was researching on this and found 3 ways, but unfortunately, all are failing for me.</p>\n\n<p><strong>1) Implement ITest</strong></p>\n\n<p>I have found about this <a href=\"https://groups.google.com/forum/?fromgroups=#!topic/testng-users/a6v0PkSVmM0\" rel=\"noreferrer\">here</a> and <a href=\"https://stackoverflow.com/questions/12257387/names-for-dynamically-generated-testng-tests-in-eclipse-plugin/12291703\">here</a></p>\n\n<p>I am setting the name I want as soon as I enter the @Test method(For all 3 ways i tried,this is how I am setting the name).This name is returned from getTestName(). What i observed is that getTestName() is getting called before and after my @Test. Initially, it is returning null(for handling NullPointerException, I return \"\" instead of null) and later it returns correct value. But i dont see this getting reflected in the report</p>\n\n<p><strong>Edit</strong>:Also tried setting the name from@BeforeMethod as suggested by artdanil</p>\n\n<p><strong>2 and 3</strong></p>\n\n<p>Both are based on solutions given in the <a href=\"https://stackoverflow.com/questions/12257387/names-for-dynamically-generated-testng-tests-in-eclipse-plugin/12291703\">second link above</a></p>\n\n<p>By overriding setName in XmlSuite, I am getting</p>\n\n<pre><code>Exception in thread \"main\" java.lang.AssertionError: l should not be null\n        at org.testng.ClassMethodMap.removeAndCheckIfLast(ClassMethodMap.java:58)\n        at org.testng.internal.TestMethodWorker.invokeAfterClassMethods(TestMethodWorker.java:208)\n        at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:114)\n        at org.testng.TestRunner.privateRun(TestRunner.java:767)\n        ...\n</code></pre>\n\n<p>By overriding toString(), I see these in logs (with my comments) but no updates in report</p>\n\n<pre><code>[2013-03-05 14:53:22,174] (Main.java:30) - calling execute \n    [2013-03-05 14:53:22,346] GenericFunctionTest.&lt;init&gt;(GenericFunctionTest.java:52) - inside constructor\n    [2013-03-05 14:53:22,372] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning **//this followed by 3 invocations before arriving at @Test method**\n    [2013-03-05 14:53:22,410] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning \n    [2013-03-05 14:53:22,416] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning \n    [2013-03-05 14:53:22,455] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning \n    [2013-03-05 14:53:22,892] GenericFunctionTest.&lt;init&gt;(GenericFunctionTest.java:52) - inside constructor \n    [2013-03-05 14:53:23,178] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning **//again blank as i havent set it yet**\n    [2013-03-05 14:53:23,182] GenericFunctionTest.getResult(GenericFunctionTest.java:69) - inside with test case:TestCase{signature=Signature{...}}**//I am setting it immedietely after this**\n    [2013-03-05 14:53:23,293] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning MyMethodName **//What i want**\n    [2013-03-05 14:53:23,299] GenericFunctionTest.toString(GenericFunctionTest.java:276) - returning MyMethodName **// again**\n</code></pre>\n\n<p><strong>Edit:</strong> tried again all 3 by hardcoding a value rather than setting it on entry of my test method. But same results</p>\n"},{"tags":["java","jsse"],"comments":[{"owner":{"account_id":1633932,"reputation":2930,"user_id":1507941,"accept_rate":83,"display_name":"Pluto"},"score":1,"creation_date":1536179763,"post_id":9745193,"comment_id":91335800,"body_markdown":"The use of an exclamation mark in the exception message made me lol","body":"The use of an exclamation mark in the exception message made me lol"}],"answers":[{"tags":[],"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"down_vote_count":0,"up_vote_count":52,"is_accepted":true,"score":52,"last_activity_date":1440688615,"creation_date":1331937085,"answer_id":9745323,"question_id":9745193,"body_markdown":"Rather than mixing runtime and policy file versions, you should use [the policy files for Java 7.][1]\r\n\r\n\r\n  [1]: http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html","title":"java.lang.SecurityException: The jurisdiction policy files are not signed by a trusted signer","body":"<p>Rather than mixing runtime and policy file versions, you should use <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html\">the policy files for Java 7.</a></p>\n"},{"tags":[],"owner":{"account_id":1010812,"reputation":7229,"user_id":1023421,"accept_rate":62,"display_name":"prageeth"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1440659205,"creation_date":1374065101,"answer_id":17700110,"question_id":9745193,"body_markdown":"This happens when Java version does not match with the version of policy files. You can download the relevant policy files from following links.\r\n\r\n[Policy jars for Java 8][1]&lt;br/&gt;\r\n[Policy jars for Java 7][2]&lt;br/&gt;\r\n[Policy jars for Java 6][3]\r\n\r\n\r\n  [1]: http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html\r\n  [2]: http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html\r\n  [3]: http://www.oracle.com/technetwork/java/javase/downloads/jce-6-download-429243.html","title":"java.lang.SecurityException: The jurisdiction policy files are not signed by a trusted signer","body":"<p>This happens when Java version does not match with the version of policy files. You can download the relevant policy files from following links.</p>\n\n<p><a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html\" rel=\"noreferrer\">Policy jars for Java 8</a><br/>\n<a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html\" rel=\"noreferrer\">Policy jars for Java 7</a><br/>\n<a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jce-6-download-429243.html\" rel=\"noreferrer\">Policy jars for Java 6</a></p>\n"},{"tags":[],"owner":{"account_id":5039122,"reputation":51,"user_id":4047099,"display_name":"kpamu"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1410883011,"creation_date":1410883011,"answer_id":25873361,"question_id":9745193,"body_markdown":"This could happen if there are standard policy jar files somewhere in the classpath. I suggest to find and replace all the local_policy.jar and us_export_policy.jar files  with the unrestricted versions of these jars in your machine. If you are using IBM&#39;s WAS/Portal Server/RAD, here is the link to the unrestricted JCE policy &lt;a href=&quot;https://www14.software.ibm.com/webapp/iwm/web/preLogin.do?source=jcesdk&quot;&gt;jars&lt;/a&gt;.","title":"java.lang.SecurityException: The jurisdiction policy files are not signed by a trusted signer","body":"<p>This could happen if there are standard policy jar files somewhere in the classpath. I suggest to find and replace all the local_policy.jar and us_export_policy.jar files  with the unrestricted versions of these jars in your machine. If you are using IBM's WAS/Portal Server/RAD, here is the link to the unrestricted JCE policy <a href=\"https://www14.software.ibm.com/webapp/iwm/web/preLogin.do?source=jcesdk\" rel=\"noreferrer\">jars</a>.</p>\n"},{"tags":[],"owner":{"account_id":255184,"reputation":7191,"user_id":535060,"accept_rate":94,"display_name":"Somaiah Kumbera"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1461229013,"creation_date":1461229013,"answer_id":36764619,"question_id":9745193,"body_markdown":"Its possible that you have different versions of the JDK. For example if your JAVA_HOME points to version 7, but in your path version 6 shows up before version 7, this error could pop up.\r\n\r\n","title":"java.lang.SecurityException: The jurisdiction policy files are not signed by a trusted signer","body":"<p>Its possible that you have different versions of the JDK. For example if your JAVA_HOME points to version 7, but in your path version 6 shows up before version 7, this error could pop up.</p>\n"},{"tags":[],"owner":{"account_id":7304266,"reputation":561,"user_id":5565746,"display_name":"Vineela Thonupunuri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637094702,"creation_date":1637094702,"answer_id":69995704,"question_id":9745193,"body_markdown":"\r\nWhile changing the version in your local or server, \r\nYou should copy original jre/lib/security folder as security8 and remove cacerts which refers to efs and instead copy from old security8. \r\nThis worked for me. ","title":"java.lang.SecurityException: The jurisdiction policy files are not signed by a trusted signer","body":"<p>While changing the version in your local or server,\nYou should copy original jre/lib/security folder as security8 and remove cacerts which refers to efs and instead copy from old security8.\nThis worked for me.</p>\n"}],"owner":{"account_id":13432,"reputation":4622,"user_id":26976,"accept_rate":56,"display_name":"Richard T"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87595,"favorite_count":0,"down_vote_count":0,"up_vote_count":44,"accepted_answer_id":9745323,"answer_count":5,"score":44,"last_activity_date":1637094702,"creation_date":1331936149,"question_id":9745193,"body_markdown":"In working on a different problem (related to RMI), I upgraded the system&#39;s &quot;security folder&quot; with the &quot;unlimited strength&quot; policy files and now my applicaiton fails in a different way. I get a long stack dump, of which following bits appear pertinent:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.ExceptionInInitializerError\r\n    \r\n    [...crop...]\r\n    \r\n    Caused by: java.lang.SecurityException: Can not initialize cryptographic mechanism\r\n            at javax.crypto.JceSecurity.&lt;clinit&gt;(JceSecurity.java:86)\r\n            ... 17 more\r\n    Caused by: java.lang.SecurityException: The jurisdiction policy files are not signed by a trusted signer!\r\n    \r\n    [...crop...]\r\n\r\n\r\nUm, WTF? The ONLY change was that I moved the orignal jar files aside and added the unlimited ones in $JAVA_HOME/lib/security. That directory now looks like this:\r\n\r\n\r\n    $ ls\r\n    blacklist      javaws.policy               trusted.libraries\r\n    cacerts        local_policy.jar            US_export_policy.jar\r\n    java.policy    local_policy.jar.strong     US_export_policy.jar.strong\r\n    java.security  local_policy.jar.unlimited  US_export_policy.jar.unlimited\r\n\r\nOf course, the .strong and .unlimited version are there so I can switch back quickly.\r\n\r\nThe directions were short and plain, and it would appear that they ONLY envision the replacement of these two files (local_policy.jar and US_exportpolicy.jar).\r\n\r\nWhat else is there to do?\r\n\r\nNote that the versions of java and the policy files are the very youngest to date: 1.7.0_03, and jce_policy-6, respectively.\r\n\r\nP.S. The article of similar title, found [here][1], was of no help at all.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1443871/jurisdiction-policy-files-are-not-signed-by-trusted-signers","title":"java.lang.SecurityException: The jurisdiction policy files are not signed by a trusted signer","body":"<p>In working on a different problem (related to RMI), I upgraded the system's \"security folder\" with the \"unlimited strength\" policy files and now my applicaiton fails in a different way. I get a long stack dump, of which following bits appear pertinent:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.ExceptionInInitializerError\n\n[...crop...]\n\nCaused by: java.lang.SecurityException: Can not initialize cryptographic mechanism\n        at javax.crypto.JceSecurity.&lt;clinit&gt;(JceSecurity.java:86)\n        ... 17 more\nCaused by: java.lang.SecurityException: The jurisdiction policy files are not signed by a trusted signer!\n\n[...crop...]\n</code></pre>\n\n<p>Um, WTF? The ONLY change was that I moved the orignal jar files aside and added the unlimited ones in $JAVA_HOME/lib/security. That directory now looks like this:</p>\n\n<pre><code>$ ls\nblacklist      javaws.policy               trusted.libraries\ncacerts        local_policy.jar            US_export_policy.jar\njava.policy    local_policy.jar.strong     US_export_policy.jar.strong\njava.security  local_policy.jar.unlimited  US_export_policy.jar.unlimited\n</code></pre>\n\n<p>Of course, the .strong and .unlimited version are there so I can switch back quickly.</p>\n\n<p>The directions were short and plain, and it would appear that they ONLY envision the replacement of these two files (local_policy.jar and US_exportpolicy.jar).</p>\n\n<p>What else is there to do?</p>\n\n<p>Note that the versions of java and the policy files are the very youngest to date: 1.7.0_03, and jce_policy-6, respectively.</p>\n\n<p>P.S. The article of similar title, found <a href=\"https://stackoverflow.com/questions/1443871/jurisdiction-policy-files-are-not-signed-by-trusted-signers\">here</a>, was of no help at all.</p>\n"},{"tags":["java","spring-mvc","thymeleaf"],"comments":[{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1637010894,"post_id":69974740,"comment_id":123706327,"body_markdown":"Can you tell us where you are getting stuck? For example: Can you create your `List&lt;String&gt; contentImages` successfully? If not, can you show us how you tried? Your Thymeleaf looks OK - it just needs an iterator - for example: `&lt;img class=&quot;post-image&quot; th:each=&quot;contentImage : ${contentImages}&quot; th:src=&quot;@{&#39;data:image/jpeg;base64,&#39;+${contentImage}}&quot;&gt;`.","body":"Can you tell us where you are getting stuck? For example: Can you create your <code>List&lt;String&gt; contentImages</code> successfully? If not, can you show us how you tried? Your Thymeleaf looks OK - it just needs an iterator - for example: <code>&lt;img class=&quot;post-image&quot; th:each=&quot;contentImage : ${contentImages}&quot; th:src=&quot;@{&#39;data:image&#47;jpeg;base64,&#39;+${contentImage}}&quot;&gt;</code>."},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1637071920,"post_id":69974740,"comment_id":123723761,"body_markdown":"I would recommend naming your Java list as `contentImages` (multiple images) not `contentImage`, just for clarity. And then, you need to use the Thymeleaf `th:each` iterator I mentioned in my first comment, which means: _&quot;for each `contentImage` in the list of `contentImages`, display the image...&quot;_.","body":"I would recommend naming your Java list as <code>contentImages</code> (multiple images) not <code>contentImage</code>, just for clarity. And then, you need to use the Thymeleaf <code>th:each</code> iterator I mentioned in my first comment, which means: <i>&quot;for each <code>contentImage</code> in the list of <code>contentImages</code>, display the image...&quot;</i>."},{"owner":{"account_id":20210995,"reputation":23,"user_id":15643867,"display_name":"Igor Gorski"},"score":0,"creation_date":1637072021,"post_id":69974740,"comment_id":123723811,"body_markdown":"I tryed do that via `while (postMain.iterator().hasText())`.  Inside this I created a byte array like this: `byte[] encodeBase64 = Base64.encodeBase64(postsMain.iterator().next().getImage());` , and after array I creating String with base64 code, then adding that all in `List&lt;String&gt;` which I initialized before this cycle","body":"I tryed do that via <code>while (postMain.iterator().hasText())</code>.  Inside this I created a byte array like this: <code>byte[] encodeBase64 = Base64.encodeBase64(postsMain.iterator().next().getImage());</code> , and after array I creating String with base64 code, then adding that all in <code>List&lt;String&gt;</code> which I initialized before this cycle"},{"owner":{"account_id":20210995,"reputation":23,"user_id":15643867,"display_name":"Igor Gorski"},"score":0,"creation_date":1637072152,"post_id":69974740,"comment_id":123723876,"body_markdown":"Okay, Thank you for good advices, I will know in future. I got &quot;Java heap space&quot; now (`th:each` already was used)","body":"Okay, Thank you for good advices, I will know in future. I got &quot;Java heap space&quot; now (<code>th:each</code> already was used)"},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1637072656,"post_id":69974740,"comment_id":123724117,"body_markdown":"OK - understood. If you are already using `th:each` then you can [edit] your question to show that - and the other code you have added in your comments.","body":"OK - understood. If you are already using <code>th:each</code> then you can <a href=\"https://stackoverflow.com/posts/69974740/edit\">edit</a> your question to show that - and the other code you have added in your comments."},{"owner":{"account_id":20210995,"reputation":23,"user_id":15643867,"display_name":"Igor Gorski"},"score":0,"creation_date":1637086694,"post_id":69974740,"comment_id":123730459,"body_markdown":"Thank you very much for help and your advices!","body":"Thank you very much for help and your advices!"}],"answers":[{"tags":[],"owner":{"account_id":20210995,"reputation":23,"user_id":15643867,"display_name":"Igor Gorski"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1637094643,"creation_date":1637083375,"answer_id":69993538,"question_id":69974740,"body_markdown":"This problem was solved.\r\n\r\n    @GetMapping(&quot;/&quot;)\r\n    public ModelAndView home ( Model model) throws UnsupportedEncodingException {\r\n        ModelAndView modelAndView = new ModelAndView(&quot;home&quot;);\r\n        List&lt;PostModel&gt; postsMain = (List&lt;PostModel&gt;) postRepository.findAll();\r\n\r\n        int size = Iterables.size(postsMain); //Receiving size of Iterator\r\n        byte[] encodeBase64 = new byte[size];\r\n\r\n        for(int count = 0; count &lt; size; count++) {\r\n            encodeBase64 = Base64.encodeBase64(postsMain.get(count).getImage());\r\n            String base64Encoded = base64Encoded = new String(encodeBase64, &quot;UTF-8&quot;);\r\n            postsMain.get(count).setMainPageImage(base64Encoded);\r\n        }\r\n\r\n        modelAndView.addObject(&quot;posts_main&quot;, postsMain);\r\n\r\n        return modelAndView;\r\n    }\r\n\r\n\r\nUPDATED: I added another, similar field in my `PostModel` (That also have getters ans setters) This field will not uploaded to DB:\r\n\r\n    private String mainPageImage;  \r\n    \r\nThen I setting received `Base64` code via setter in `for` loop (above) like this:\r\n\r\n    postsMain.get(count).setMainPageImage(base64Encoded);\r\n\r\nAnd finally, We&#39;re got this `HTML` section where displaying the picture and title from single collection:\r\n\r\n    &lt;main&gt;\r\n      &lt;div class=&quot;post-section&quot;&gt;\r\n         &lt;div class=&quot;main-post&quot; th:each=&quot;post : ${posts_main}&quot;&gt;\r\n             &lt;div class=&quot;container&quot;&gt;\r\n                 &lt;img class=&quot;post-image&quot; th:src=&quot;@{&#39;data:image/jpeg;base64,&#39;+${post.mainPageImage}}&quot;/&gt;\r\n                 &lt;a href=&quot;/&quot;&gt;&lt;span th:text=&quot;${post.title}&quot;&gt;&lt;/span&gt;&lt;/a&gt;\r\n             &lt;/div&gt;\r\n         &lt;/div&gt;\r\n       &lt;/div&gt;\r\n    &lt;/main&gt;\r\n\r\n \r\n  ","title":"How to display multiple base64 encoded images in Spring MVC","body":"<p>This problem was solved.</p>\n<pre><code>@GetMapping(&quot;/&quot;)\npublic ModelAndView home ( Model model) throws UnsupportedEncodingException {\n    ModelAndView modelAndView = new ModelAndView(&quot;home&quot;);\n    List&lt;PostModel&gt; postsMain = (List&lt;PostModel&gt;) postRepository.findAll();\n\n    int size = Iterables.size(postsMain); //Receiving size of Iterator\n    byte[] encodeBase64 = new byte[size];\n\n    for(int count = 0; count &lt; size; count++) {\n        encodeBase64 = Base64.encodeBase64(postsMain.get(count).getImage());\n        String base64Encoded = base64Encoded = new String(encodeBase64, &quot;UTF-8&quot;);\n        postsMain.get(count).setMainPageImage(base64Encoded);\n    }\n\n    modelAndView.addObject(&quot;posts_main&quot;, postsMain);\n\n    return modelAndView;\n}\n</code></pre>\n<p>UPDATED: I added another, similar field in my <code>PostModel</code> (That also have getters ans setters) This field will not uploaded to DB:</p>\n<pre><code>private String mainPageImage;  \n</code></pre>\n<p>Then I setting received <code>Base64</code> code via setter in <code>for</code> loop (above) like this:</p>\n<pre><code>postsMain.get(count).setMainPageImage(base64Encoded);\n</code></pre>\n<p>And finally, We're got this <code>HTML</code> section where displaying the picture and title from single collection:</p>\n<pre><code>&lt;main&gt;\n  &lt;div class=&quot;post-section&quot;&gt;\n     &lt;div class=&quot;main-post&quot; th:each=&quot;post : ${posts_main}&quot;&gt;\n         &lt;div class=&quot;container&quot;&gt;\n             &lt;img class=&quot;post-image&quot; th:src=&quot;@{'data:image/jpeg;base64,'+${post.mainPageImage}}&quot;/&gt;\n             &lt;a href=&quot;/&quot;&gt;&lt;span th:text=&quot;${post.title}&quot;&gt;&lt;/span&gt;&lt;/a&gt;\n         &lt;/div&gt;\n     &lt;/div&gt;\n   &lt;/div&gt;\n&lt;/main&gt;\n</code></pre>\n"}],"owner":{"account_id":20210995,"reputation":23,"user_id":15643867,"display_name":"Igor Gorski"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":536,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69993538,"answer_count":1,"score":0,"last_activity_date":1637094643,"creation_date":1636980992,"question_id":69974740,"body_markdown":"I have a question... I can to display titles of all posts that received from database via `Iterable&lt;PostModel&gt; postsMain = postRepository.findAll();` (it also contains blob-images). But I can&#39;t understand correctly: For displaying of single image I getting byte code from DB and encoding it in base64 code, How do this with multiple images and display them like titles?\r\n\r\nI displaying single image like this:\r\n\r\n        Optional&lt;PostModel&gt; post = postRepository.findById(id);\r\n        byte[] encodeBase64 = Base64.encodeBase64(post.get().getImage());\r\n        String base64Encoded = new String(encodeBase64, &quot;UTF-8&quot;);\r\n        modelAndView.addObject(&quot;contentImage&quot;, base64Encoded );\r\n\r\nHTML-source: `&lt;img class=&quot;post-image&quot; th:src=&quot;@{&#39;data:image/jpeg;base64,&#39;+${contentImage}}&quot;&gt;`\r\n\r\nI tryed to create `List` where I adding an base64 encoded string values.\r\n\r\nMy controller:\r\n\r\n    @GetMapping(&quot;/&quot;)\r\n    public ModelAndView home ( Model model) throws UnsupportedEncodingException {\r\n        ModelAndView modelAndView = new ModelAndView(&quot;home&quot;);\r\n        Iterable&lt;PostModel&gt; postsMain = postRepository.findAll();\r\n\r\n        List&lt;String&gt; contentImages = new ArrayList&lt;&gt;();\r\n\r\n        int size = Iterables.size(postsMain);\r\n\r\n        for(int count = 0; count &lt;= size; count++) {\r\n\r\n            byte[] encodeBase64 = Base64.encodeBase64(postsMain.iterator().next().getImage());\r\n            String base64Encoded = new String(encodeBase64, &quot;UTF-8&quot;);\r\n            contentImages.add(base64Encoded);\r\n        }\r\n\r\n        modelAndView.addObject(&quot;contentImages&quot;, contentImages);\r\n        modelAndView.addObject(&quot;posts_main&quot;, postsMain);\r\n\r\n        return modelAndView;\r\n    }\r\n\r\n  \r\n\r\nGood wishes.\r\n\r\n","title":"How to display multiple base64 encoded images in Spring MVC","body":"<p>I have a question... I can to display titles of all posts that received from database via <code>Iterable&lt;PostModel&gt; postsMain = postRepository.findAll();</code> (it also contains blob-images). But I can't understand correctly: For displaying of single image I getting byte code from DB and encoding it in base64 code, How do this with multiple images and display them like titles?</p>\n<p>I displaying single image like this:</p>\n<pre><code>    Optional&lt;PostModel&gt; post = postRepository.findById(id);\n    byte[] encodeBase64 = Base64.encodeBase64(post.get().getImage());\n    String base64Encoded = new String(encodeBase64, &quot;UTF-8&quot;);\n    modelAndView.addObject(&quot;contentImage&quot;, base64Encoded );\n</code></pre>\n<p>HTML-source: <code>&lt;img class=&quot;post-image&quot; th:src=&quot;@{'data:image/jpeg;base64,'+${contentImage}}&quot;&gt;</code></p>\n<p>I tryed to create <code>List</code> where I adding an base64 encoded string values.</p>\n<p>My controller:</p>\n<pre><code>@GetMapping(&quot;/&quot;)\npublic ModelAndView home ( Model model) throws UnsupportedEncodingException {\n    ModelAndView modelAndView = new ModelAndView(&quot;home&quot;);\n    Iterable&lt;PostModel&gt; postsMain = postRepository.findAll();\n\n    List&lt;String&gt; contentImages = new ArrayList&lt;&gt;();\n\n    int size = Iterables.size(postsMain);\n\n    for(int count = 0; count &lt;= size; count++) {\n\n        byte[] encodeBase64 = Base64.encodeBase64(postsMain.iterator().next().getImage());\n        String base64Encoded = new String(encodeBase64, &quot;UTF-8&quot;);\n        contentImages.add(base64Encoded);\n    }\n\n    modelAndView.addObject(&quot;contentImages&quot;, contentImages);\n    modelAndView.addObject(&quot;posts_main&quot;, postsMain);\n\n    return modelAndView;\n}\n</code></pre>\n<p>Good wishes.</p>\n"},{"tags":["java","multithreading","exception"],"comments":[{"owner":{"account_id":247613,"reputation":284090,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1637063634,"post_id":69988662,"comment_id":123720138,"body_markdown":"Why post poorly formatted code? It&#39;s hard enough to understand someone else&#39;s code, why make it harder than it has to be?","body":"Why post poorly formatted code? It&#39;s hard enough to understand someone else&#39;s code, why make it harder than it has to be?"},{"owner":{"account_id":247613,"reputation":284090,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1637063701,"post_id":69988662,"comment_id":123720164,"body_markdown":"Also, `suspend()` is deprecated -- so you should not be calling this method (or extending Thread, for that matter).","body":"Also, <code>suspend()</code> is deprecated -- so you should not be calling this method (or extending Thread, for that matter)."},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":1,"creation_date":1637063712,"post_id":69988662,"comment_id":123720171,"body_markdown":"Same goes for that wall of text in the beginning. You want other humans to spend their time to help you, so please make that as easy as possible: by writing up content that is EASY to digest.","body":"Same goes for that wall of text in the beginning. You want other humans to spend their time to help you, so please make that as easy as possible: by writing up content that is EASY to digest."},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":1,"creation_date":1637063740,"post_id":69988662,"comment_id":123720183,"body_markdown":"And then: empty catch blocks is a really bad practice. Never do that, at least PRINT the exception. otherwise, you are just suppressing errors.","body":"And then: empty catch blocks is a really bad practice. Never do that, at least PRINT the exception. otherwise, you are just suppressing errors."},{"owner":{"account_id":247613,"reputation":284090,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1637063950,"post_id":69988662,"comment_id":123720273,"body_markdown":"I have put in the effort to format your code. In the future, please put in this effort yourself. Again, no sense in making your code and question harder to understand than it has to be, no?","body":"I have put in the effort to format your code. In the future, please put in this effort yourself. Again, no sense in making your code and question harder to understand than it has to be, no?"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":3,"creation_date":1637066644,"post_id":69988662,"comment_id":123721298,"body_markdown":"**Do not** call [suspend](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Thread.html#suspend()) or [resume](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Thread.html#resume()) under any circumstances.  They don’t work properly.  Read the links to understand why.  In general, it is essential for Java programmers to get in the habit of reading the documentation of the methods they use.  Cooperation between threads is normally done with synchronization or with the classes in java.util.concurrent.","body":"<b>Do not</b> call <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Thread.html#suspend()\" rel=\"nofollow noreferrer\">suspend</a> or <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Thread.html#resume()\" rel=\"nofollow noreferrer\">resume</a> under any circumstances.  They don’t work properly.  Read the links to understand why.  In general, it is essential for Java programmers to get in the habit of reading the documentation of the methods they use.  Cooperation between threads is normally done with synchronization or with the classes in java.util.concurrent."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1637094741,"post_id":69988662,"comment_id":123733288,"body_markdown":"I have to wonder whether you understood the exercise. Usually, when anybody asks here about threads printing odd and even numbers, they want the numbers printed in ascending order, but they want the two threads to _take turns_ printing them. (i.e., the &quot;odd&quot; thread prints &quot;1&quot;, then the &quot;even&quot; thread prints &quot;2&quot;, then the &quot;odd&quot; thread prints &quot;3&quot;, and so on.)","body":"I have to wonder whether you understood the exercise. Usually, when anybody asks here about threads printing odd and even numbers, they want the numbers printed in ascending order, but they want the two threads to <i>take turns</i> printing them. (i.e., the &quot;odd&quot; thread prints &quot;1&quot;, then the &quot;even&quot; thread prints &quot;2&quot;, then the &quot;odd&quot; thread prints &quot;3&quot;, and so on.)"}],"answers":[{"tags":[],"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1637086249,"creation_date":1637085902,"answer_id":69994060,"question_id":69988662,"body_markdown":"&gt; After this the program isn&#39;t exiting, I have to exit the program manually (ctrl+c) in the terminal.\r\n\r\nAside from the fact that you should not be using `suspend()` and `resume()`, I believe your problem is a classic race condition.  The main thread is calling `t2.start()` and then `t2.resume()` but the thread is not suspended yet.  The main thread throws an exception and then the `t2` thread finishes its printing and calls `suspend()`.  There is no one left to resume it so the thread never finishes and you have to control-c your program.\r\n\r\nYou should make a couple of change to your example code.  First off use wait/notify instead of `suspend()`.  For example, have the `Hello` thread do:\r\n\r\n\t// t2 thread shouldn&#39;t use suspend which is deprecated for good reason\r\n\tsynchronized (this) {\r\n\t\twait();\r\n\t}\r\n\r\nThen in the main thread you need to loop until the thread is in a wait state before notify-ing it.   Something like:\r\n\r\n\twhile (true) {\r\n\t\tif (t2.getState() == State.WAITING) {\r\n\t\t\tsynchronized (t2) {\r\n\t\t\t\tt2.notify();\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tThread.sleep(100);\r\n\t}\r\n\r\nThese sorts of thread exercises where one thread is locked stepped with another (aside from a `join()` at the end) are a bad example of threading IMO.\r\n\r\nCouple other comments.  You should `join()` with the `Hello` thread at the end of your code, never catch `Exception` if you can help it since it hides exceptions that may be the source of problems (at least print them as @GhostCat recommended), and also always re-interrupt your threads when you catch `InterruptedException`:\r\n\r\n\ttry {\r\n\t\tt2.join();\r\n\t} catch (InterruptedException e) {\r\n\t\t// always a good pattern\r\n\t\tThread.currentThread().interrupt();\r\n\t\te.printStackTrace();\r\n\t}\r\n","title":"Problems suspending and resuming a thread","body":"<blockquote>\n<p>After this the program isn't exiting, I have to exit the program manually (ctrl+c) in the terminal.</p>\n</blockquote>\n<p>Aside from the fact that you should not be using <code>suspend()</code> and <code>resume()</code>, I believe your problem is a classic race condition.  The main thread is calling <code>t2.start()</code> and then <code>t2.resume()</code> but the thread is not suspended yet.  The main thread throws an exception and then the <code>t2</code> thread finishes its printing and calls <code>suspend()</code>.  There is no one left to resume it so the thread never finishes and you have to control-c your program.</p>\n<p>You should make a couple of change to your example code.  First off use wait/notify instead of <code>suspend()</code>.  For example, have the <code>Hello</code> thread do:</p>\n<pre><code>// t2 thread shouldn't use suspend which is deprecated for good reason\nsynchronized (this) {\n    wait();\n}\n</code></pre>\n<p>Then in the main thread you need to loop until the thread is in a wait state before notify-ing it.   Something like:</p>\n<pre><code>while (true) {\n    if (t2.getState() == State.WAITING) {\n        synchronized (t2) {\n            t2.notify();\n        }\n        break;\n    }\n    Thread.sleep(100);\n}\n</code></pre>\n<p>These sorts of thread exercises where one thread is locked stepped with another (aside from a <code>join()</code> at the end) are a bad example of threading IMO.</p>\n<p>Couple other comments.  You should <code>join()</code> with the <code>Hello</code> thread at the end of your code, never catch <code>Exception</code> if you can help it since it hides exceptions that may be the source of problems (at least print them as @GhostCat recommended), and also always re-interrupt your threads when you catch <code>InterruptedException</code>:</p>\n<pre><code>try {\n    t2.join();\n} catch (InterruptedException e) {\n    // always a good pattern\n    Thread.currentThread().interrupt();\n    e.printStackTrace();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637094349,"creation_date":1637092044,"answer_id":69995232,"question_id":69988662,"body_markdown":"&gt; when i call `t2.resume()` that doesn&#39;t continue printing 13 to 21. Why it isn&#39;t printing the rest?\r\n\r\n[@Gray answered that one](https://stackoverflow.com/a/69994060/801894). TLDR: Your main thread calls `t2.resume()` _before_ your `t2` thread calls `suspend()`.\r\n\r\nI am curious to know what Java version you are using. I&#39;m running JDK11 on macOS, and I can&#39;t get your program to throw that `java.lang.IllegalThreadStateException`, but I&#39;m _guessing_ that in whatever JDK and OS you are using, the exception is thrown when your main thread tries to `resume()` a thread that isn&#39;t suspended.\r\n\r\n---------------------\r\n\r\n&gt; how can I make it resume?\r\n\r\nI would use a [`Semaphore`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/Semaphore.html).\r\n\r\nLet the `t2` thread wait to `acquire()` a &quot;permit&quot; from a semaphore, and let the main thread `release()` a permit _to_ the semaphore at the appropriate time.\r\n\r\nI changed your program by replacing the `suspend()` call with `sem.acquire()`, and by replacing the `resume()` call with `sem.release()`. I also threw a call to `Thread.sleep()` into the main thread before it releases the semaphore so that you can see the pause.  Here&#39;s the whole thing:\r\n\r\n``` lang-java\r\nimport java.util.concurrent.Semaphore;\r\n\r\nclass Hi extends Thread {   // This class is exactly the same as yours.\r\n    public void run(){\r\n        try{\r\n            for(int i=0; i&lt;=10; i++){\r\n                System.out.println(&quot;1st: &quot; + (2*i));\r\n                sleep(100);\r\n            }\r\n        } catch(Exception e){\r\n            System.out.println(e);\r\n        }\r\n    }\r\n}\r\nclass Hello extends Thread {\r\n\r\n    private Semaphore sem;          // new member variable\r\n\r\n    public Hello(Semaphore sem) {   // new constructor to set the new member.\r\n        this.sem = sem;\r\n    }\r\n    \r\n    public void run(){\r\n        try {\r\n            for(int i=0; i&lt;=5; i++){\r\n                System.out.println(&quot;2nd: &quot; +(2*i+1));\r\n            }\r\n\r\n            // Wait to &quot;acquire&quot; a permit from the semaphore. This won&#39;t\r\n            //  return until the main thread &quot;releases&quot; a permit _to_ the\r\n            //  semaphore.\r\n            sem.acquire();\r\n\r\n            System.out.println(&quot; Resumes again&quot;);\r\n            for(int i=6; i&lt;=10; i++){\r\n                System.out.println(&quot;2nd: &quot; +(2*i+1));\r\n            }\r\n        } catch(Exception e){\r\n            System.out.println(e);\r\n        }     \r\n    }\r\n}\r\n\r\npublic class Wonk {\r\n\r\n    public static void main(String args[]){\r\n\r\n        // Create a semaphore that initially has 0 &quot;permits.&quot;\r\n        Semaphore s = new Semaphore(0);\r\n\r\n        Hi t1 = new Hi();\r\n        Hello t2 = new Hello(s);\r\n        t1.start();\r\n        try {\r\n            t1.join();\r\n        } catch (Exception e) {\r\n        }\r\n\r\n        t2.start();\r\n        waitabit(5000);  // Sleep 5 seconds, and then...\r\n        s.release();     // ...Release the Hounds!!\r\n    }\r\n\r\n    private static void waitabit(int numMilliseconds) {\r\n        try {\r\n            Thread.sleep(numMilliseconds);\r\n        }\r\n        catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n","title":"Problems suspending and resuming a thread","body":"<blockquote>\n<p>when i call <code>t2.resume()</code> that doesn't continue printing 13 to 21. Why it isn't printing the rest?</p>\n</blockquote>\n<p><a href=\"https://stackoverflow.com/a/69994060/801894\">@Gray answered that one</a>. TLDR: Your main thread calls <code>t2.resume()</code> <em>before</em> your <code>t2</code> thread calls <code>suspend()</code>.</p>\n<p>I am curious to know what Java version you are using. I'm running JDK11 on macOS, and I can't get your program to throw that <code>java.lang.IllegalThreadStateException</code>, but I'm <em>guessing</em> that in whatever JDK and OS you are using, the exception is thrown when your main thread tries to <code>resume()</code> a thread that isn't suspended.</p>\n<hr />\n<blockquote>\n<p>how can I make it resume?</p>\n</blockquote>\n<p>I would use a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/Semaphore.html\" rel=\"nofollow noreferrer\"><code>Semaphore</code></a>.</p>\n<p>Let the <code>t2</code> thread wait to <code>acquire()</code> a &quot;permit&quot; from a semaphore, and let the main thread <code>release()</code> a permit <em>to</em> the semaphore at the appropriate time.</p>\n<p>I changed your program by replacing the <code>suspend()</code> call with <code>sem.acquire()</code>, and by replacing the <code>resume()</code> call with <code>sem.release()</code>. I also threw a call to <code>Thread.sleep()</code> into the main thread before it releases the semaphore so that you can see the pause.  Here's the whole thing:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.concurrent.Semaphore;\n\nclass Hi extends Thread {   // This class is exactly the same as yours.\n    public void run(){\n        try{\n            for(int i=0; i&lt;=10; i++){\n                System.out.println(&quot;1st: &quot; + (2*i));\n                sleep(100);\n            }\n        } catch(Exception e){\n            System.out.println(e);\n        }\n    }\n}\nclass Hello extends Thread {\n\n    private Semaphore sem;          // new member variable\n\n    public Hello(Semaphore sem) {   // new constructor to set the new member.\n        this.sem = sem;\n    }\n    \n    public void run(){\n        try {\n            for(int i=0; i&lt;=5; i++){\n                System.out.println(&quot;2nd: &quot; +(2*i+1));\n            }\n\n            // Wait to &quot;acquire&quot; a permit from the semaphore. This won't\n            //  return until the main thread &quot;releases&quot; a permit _to_ the\n            //  semaphore.\n            sem.acquire();\n\n            System.out.println(&quot; Resumes again&quot;);\n            for(int i=6; i&lt;=10; i++){\n                System.out.println(&quot;2nd: &quot; +(2*i+1));\n            }\n        } catch(Exception e){\n            System.out.println(e);\n        }     \n    }\n}\n\npublic class Wonk {\n\n    public static void main(String args[]){\n\n        // Create a semaphore that initially has 0 &quot;permits.&quot;\n        Semaphore s = new Semaphore(0);\n\n        Hi t1 = new Hi();\n        Hello t2 = new Hello(s);\n        t1.start();\n        try {\n            t1.join();\n        } catch (Exception e) {\n        }\n\n        t2.start();\n        waitabit(5000);  // Sleep 5 seconds, and then...\n        s.release();     // ...Release the Hounds!!\n    }\n\n    private static void waitabit(int numMilliseconds) {\n        try {\n            Thread.sleep(numMilliseconds);\n        }\n        catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":23353754,"reputation":11,"user_id":17427008,"display_name":"Gairik Sajjan"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":350,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":2,"score":-2,"last_activity_date":1637094349,"creation_date":1637063525,"question_id":69988662,"body_markdown":"I am new to java programming and trying threading for the first time. I have created a thread to print the even numbers, and then a thread to print odd numbers. In the odd number thread there is a suspend() method after the number 11 to be printed. And after that there is another block to print odd numbers from 13 to 21. In main() I joined the 2 threads. In main function first I called thread t1(even number) and then joined it with thread t2(odd number). As there is suspend it will suspend the output after printing 11 it pauses there. But after that when i call t2.resume() that doesn&#39;t continue printing 13 to 21. Why it isn&#39;t printing the rest? and how can I make it resume?\r\n\r\nHere&#39;s the code, please take a look:\r\n\r\n\tclass Hi extends Thread {\r\n\t\t\r\n\t\tpublic void run(){\r\n\t\t\ttry{\r\n\t\t\t\tfor(int i=0; i&lt;=10; i++){\r\n\t\t\t\t\tSystem.out.println(&quot;1st: &quot; + (2*i));\r\n\t\t\t\t\tsleep(100);\r\n\t\t\t\t}\r\n\t\t\t} catch(Exception e){\r\n\t\t\t\tSystem.out.println(e);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n&lt;!-- --&gt;\t\r\n\r\n\tclass Hello extends Thread {\r\n\t\t\r\n\t\tpublic void run(){\r\n\t\t\ttry {\r\n\t\t\t\tfor(int i=0; i&lt;=5; i++){\r\n\t\t\t\t\tSystem.out.println(&quot;2nd: &quot; +(2*i+1));\r\n\t\t\t\t}\r\n\t\t\t\tsuspend();\r\n\t\t\t\tSystem.out.println(&quot; Resumes again&quot;);\r\n\t\t\t\tfor(int i=6; i&lt;=10; i++){\r\n\t\t\t\t\tSystem.out.println(&quot;2nd: &quot; +(2*i+1));\r\n\t\t\t\t}\r\n\t\t\t} catch(Exception e){\r\n\t\t\t\tSystem.out.println(e);\r\n\t\t\t}     \r\n\t\t}\r\n\t}\r\n\r\n&lt;!-- --&gt;\t\r\n\r\n\tpublic class thread {\r\n\r\n\t\tpublic static void main(String args[]){\r\n\t\t\tHi t1 = new Hi();\r\n\t\t\tHello t2 = new Hello();\r\n\t\t\tt1.start();\r\n\t\t\ttry {\r\n\t\t\t\tt1.join();\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t}\r\n\t\t\tt2.start();\r\n\t\t\tt2.resume();\r\n\t\t}\r\n\t}\t\r\n\r\n  OUTPUT:\r\n\r\n```\r\n1st: 0\r\n1st: 2\r\n1st: 4\r\n1st: 6\r\n1st: 8\r\n1st: 10\r\n1st: 12\r\n1st: 14\r\n1st: 16\r\n1st: 18\r\n1st: 20\r\nException in thread &quot;main&quot; 2nd: 1\r\njava.lang.IllegalThreadStateException\r\n2nd: 3\r\n2nd: 5\r\n2nd: 7\r\n2nd: 9\r\n2nd: 11\r\n\tat java.base/java.lang.Thread.start(Thread.java:791)\r\n\tat thread.main(thread.java:57)\r\n```\r\n\r\nAfter this the program isn&#39;t exiting, I have to exit the program manually (ctrl+c) in the terminal.","title":"Problems suspending and resuming a thread","body":"<p>I am new to java programming and trying threading for the first time. I have created a thread to print the even numbers, and then a thread to print odd numbers. In the odd number thread there is a suspend() method after the number 11 to be printed. And after that there is another block to print odd numbers from 13 to 21. In main() I joined the 2 threads. In main function first I called thread t1(even number) and then joined it with thread t2(odd number). As there is suspend it will suspend the output after printing 11 it pauses there. But after that when i call t2.resume() that doesn't continue printing 13 to 21. Why it isn't printing the rest? and how can I make it resume?</p>\n<p>Here's the code, please take a look:</p>\n<pre><code>class Hi extends Thread {\n    \n    public void run(){\n        try{\n            for(int i=0; i&lt;=10; i++){\n                System.out.println(&quot;1st: &quot; + (2*i));\n                sleep(100);\n            }\n        } catch(Exception e){\n            System.out.println(e);\n        }\n    }\n}\n</code></pre>\n    \n<pre><code>class Hello extends Thread {\n    \n    public void run(){\n        try {\n            for(int i=0; i&lt;=5; i++){\n                System.out.println(&quot;2nd: &quot; +(2*i+1));\n            }\n            suspend();\n            System.out.println(&quot; Resumes again&quot;);\n            for(int i=6; i&lt;=10; i++){\n                System.out.println(&quot;2nd: &quot; +(2*i+1));\n            }\n        } catch(Exception e){\n            System.out.println(e);\n        }     \n    }\n}\n</code></pre>\n    \n<pre><code>public class thread {\n\n    public static void main(String args[]){\n        Hi t1 = new Hi();\n        Hello t2 = new Hello();\n        t1.start();\n        try {\n            t1.join();\n        } catch (Exception e) {\n        }\n        t2.start();\n        t2.resume();\n    }\n}   \n</code></pre>\n<p>OUTPUT:</p>\n<pre><code>1st: 0\n1st: 2\n1st: 4\n1st: 6\n1st: 8\n1st: 10\n1st: 12\n1st: 14\n1st: 16\n1st: 18\n1st: 20\nException in thread &quot;main&quot; 2nd: 1\njava.lang.IllegalThreadStateException\n2nd: 3\n2nd: 5\n2nd: 7\n2nd: 9\n2nd: 11\n    at java.base/java.lang.Thread.start(Thread.java:791)\n    at thread.main(thread.java:57)\n</code></pre>\n<p>After this the program isn't exiting, I have to exit the program manually (ctrl+c) in the terminal.</p>\n"},{"tags":["java","raspberry-pi","classpath","pi4j"],"answers":[{"tags":[],"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637094111,"creation_date":1637094111,"answer_id":69995598,"question_id":69985205,"body_markdown":"I managed to fix it.\r\n\r\nThe issue with the Pi Zero W is that the default version of Java JDK that is commonly used was giving an unsupported ARM error. So I installed the Zulu version as per the instruction&#39;s here :\r\n\r\nhttps://webtechie.be/post/2020-08-27-azul-zulu-java-11-and-gluon-javafx-11-on-armv6-raspberry-pi/\r\n\r\nWhen doing remote execution from my desktop IDE the rasperberry.properties file has a value that points to default-java folder under /usr/lib/jvm/default-java but the zulu version of Java JDK I installed doesn&#39;t create this folder.\r\n\r\nThe fix for me was to change the following line in `rasperberry.properties` :\r\n\r\n    #target.remote.jre=/usr/lib/jvm/default-javam #COMMENT OUT THIS LINE\r\n    target.remote.jre=/usr/lib/jvm/zulu11.41.75-ca-jdk11.0.8-linux_aarch32hf #PUT YOUR JAVA PATH HERE\r\n\r\n","title":"Pi4J Classpath Error - Intellij running remotely on Pi Zero W","body":"<p>I managed to fix it.</p>\n<p>The issue with the Pi Zero W is that the default version of Java JDK that is commonly used was giving an unsupported ARM error. So I installed the Zulu version as per the instruction's here :</p>\n<p><a href=\"https://webtechie.be/post/2020-08-27-azul-zulu-java-11-and-gluon-javafx-11-on-armv6-raspberry-pi/\" rel=\"nofollow noreferrer\">https://webtechie.be/post/2020-08-27-azul-zulu-java-11-and-gluon-javafx-11-on-armv6-raspberry-pi/</a></p>\n<p>When doing remote execution from my desktop IDE the rasperberry.properties file has a value that points to default-java folder under /usr/lib/jvm/default-java but the zulu version of Java JDK I installed doesn't create this folder.</p>\n<p>The fix for me was to change the following line in <code>rasperberry.properties</code> :</p>\n<pre><code>#target.remote.jre=/usr/lib/jvm/default-javam #COMMENT OUT THIS LINE\ntarget.remote.jre=/usr/lib/jvm/zulu11.41.75-ca-jdk11.0.8-linux_aarch32hf #PUT YOUR JAVA PATH HERE\n</code></pre>\n"}],"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":200,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637094111,"creation_date":1637047449,"question_id":69985205,"body_markdown":"**PROBLEM SUMMARY**\r\n\r\nI am getting a class path error when I try to code on my desktop and deploy it remotely to my Pi Zero W.\r\n\r\n**BACKGROUND**\r\n\r\nThe [Pi4J][1] v2.0[enter link description here][2] library provides a Maven Archetype to help with Development and instructions for developing on a remote PC. \r\n\r\n**ENVIROMENT**\r\n\r\n    IDE: Intellij Ultimate \r\n    Development PC is Windows 10\r\n    Java 11.0.2\r\n    Maven 3.8.3\r\n\r\n    Rasp Pi Zero W\r\n    Open jdk java 11.0.8\r\n    Maven 3.8.3\r\n\r\n**STEPS TAKEN SO FAR**\r\n\r\nOn development PC I have installed the Archetype per:\r\n\r\n    INSTALL ARCHETYPE\r\n    cd pi4j-maven-archetype-master\r\n    mvn install\r\n    ...\r\n    BUILD SUCCESS\r\n\r\n    CREATE PROJECT\r\n    mkdir pitest2\r\n    mvn archetype:generate -DarchetypeCatalog=local\r\n    ....\r\n    answer questions per instructions\r\n    BUILD SUCCESS\r\n\r\nThen I open the project in Intellij and refresh it with maven and edit the raspberry.properties to my pi IP address and login.\r\n\r\nWhen building and deploying the sample code included with Archetype the instructions state:\r\n\r\n    The project declares in the pom.xml the following maven/ant goals that you can execute with the command shown :\r\n\r\n    mvn clean : delete all compiled files from local and remote project\r\n    mvn install : builds the project, uploads the required jars to the remote target RPI board\r\n    mvn antrun:run@exec : runs the program on the remote target\r\n    mvn antrun:run@debug : runs a remote debugging session on the target RPI.\r\n\r\nThe command `mvn install` works and a file is copied to Pi.\r\n\r\nWhen I attempt the `mvn antrun:run@exec` command results in:\r\n\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time:  16.818 s\r\n    [INFO] Finished at: 2021-11-16T20:15:56+13:00\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-antrun-plugin:3.0.0:run (exec) on project pitest2: An Ant BuildException has occured: The following error occurred while executing this line:\r\n    [ERROR] C:\\Users\\RM\\IdeaProjects\\pitest2\\antrun\\build.xml:166: The following error occurred while executing this line:\r\n    [ERROR] C:\\Users\\RM\\IdeaProjects\\pitest2\\antrun\\build.xml:123: Remote command failed with exit status 1\r\n    [ERROR] around Ant part ...&lt;ant antfile=&quot;antrun/build.xml&quot; target=&quot;run-remote&quot; /&gt;... @ 9:59 in C:\\Users\\RM\\IdeaProjects\\pitest2\\target\\antrun\\build-main.xml\r\n    [ERROR] -&gt; [Help 1]\r\n    [ERROR]\r\n    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n    [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n    [ERROR]\r\n    [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n\r\n**OTHER STEPS TAKEN**\r\n\r\nThe output from the deploy shows that the pitest.jar is copied to the Pi with its dependencies.\r\n\r\n    pi@raspberrypi: ls\r\n    pi4j-core.jar\r\n    pi4j-library-pigpio.jar\r\n    pi4j-plugin-pigpio.jar\r\n    pi4j-plugin-raspberrypi.jar\r\n    pitest2.jar\r\n    pitest2-jar-with-dependencies.jar\r\n    slf4j-api.jar\r\n    slf4j-simple.jar\r\n\r\n\r\nOther attempts to execute on the pi directly:\r\n\r\n    pi@raspberrypi:~/IdeaProjects/pitest2/dist/lib $ java -cp . pitest2.jar\r\n    Error: Could not find or load main class pitest2.jar\r\n    Caused by: java.lang.ClassNotFoundException: pitest2.jar\r\n    pi@raspberrypi:~/IdeaProjects/pitest2/dist/lib $ java -cp . pitest2.jar com.geekhelp.Main\r\n    Error: Could not find or load main class pitest2.jar\r\n    Caused by: java.lang.ClassNotFoundException: pitest2.jar\r\n    pi@raspberrypi:~/IdeaProjects/pitest2/dist/lib $ java -cp ./ pitest2.jar com.geekhelp.Main\r\n    Error: Could not find or load main class pitest2.jar\r\n    Caused by: java.lang.ClassNotFoundException: pitest2.jar\r\n    pi@raspberrypi:~/IdeaProjects/pitest2/dist/lib $ java -cp pitest2.jar com.geekhelp.Main\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/pi4j/util/Console\r\n            at com.geekhelp.Main.&lt;clinit&gt;(Main.java:24)\r\n    Caused by: java.lang.ClassNotFoundException: com.pi4j.util.Console\r\n            at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\r\n            at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n            at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\r\n            ... 1 more\r\n    pi@raspberrypi:~/IdeaProjects/pitest2/dist/lib $\r\n\r\nAnd what appears to be a fat jar under /dist\r\n\r\n    pi@raspberrypi:~/IdeaProjects/pitest2/dist $ java -cp pitest2.jar com.geekhelp.Main\r\n    21:01:58 [main] INFO com.pi4j.util.Console - ---------------------------\r\n    21:01:58 [main] INFO com.pi4j.util.Console - |  Hello Rasbian world !  |\r\n    21:01:58 [main] INFO com.pi4j.util.Console - ---------------------------\r\n    21:01:58 [main] INFO com.pi4j.Pi4J - New auto context\r\n    21:01:58 [main] INFO com.pi4j.Pi4J - New context builder\r\n    ...\r\n    ...    \r\n    21:02:02 [main] DEBUG com.pi4j.platform.impl.DefaultRuntimePlatforms - platforms loaded [1]\r\n    21:02:02 [main] DEBUG com.pi4j.runtime.impl.DefaultRuntime - Pi4J context/runtime successfully initialized.&#39;\r\n    21:02:02 [main] DEBUG com.pi4j.context.impl.DefaultContext - Pi4J runtime context successfully created &amp; initialized.&#39;\r\n    21:02:02 [main] DEBUG com.pi4j.context.impl.DefaultContextBuilder - Pi4J successfully created and initialized a new runtime &#39;Context&#39;.&#39;\r\n    21:02:02 [main] INFO com.pi4j.util.Console - --------------------\r\n    21:02:02 [main] INFO com.pi4j.util.Console - |  Pi4J PLATFORMS  |\r\n    21:02:02 [main] INFO com.pi4j.util.Console - --------------------\r\n    21:02:02 [main] INFO com.pi4j.util.Console -\r\n    PLATFORMS: [1] &quot;Pi4J Runtime Platforms&quot; &lt;com.pi4j.platform.impl.DefaultPlatforms&gt;\r\n    └─PLATFORM: &quot;RaspberryPi Platform&quot; {raspberrypi} &lt;com.pi4j.plugin.raspberrypi.platform.RaspberryPiPlatform&gt; {Pi4J Platform for the RaspberryPi series of products.}\r\n    21:02:03 [main] INFO com.pi4j.util.Console -\r\n    com.pi4j.provider.exception.ProviderNotFoundException: Pi4J provider [pigpio-digital-output] could not be found.  Please include this &#39;provider&#39; JAR in the classpath.\r\n            at com.pi4j.provider.impl.DefaultRuntimeProviders.get(DefaultRuntimeProviders.java:238)\r\n            at com.pi4j.provider.impl.DefaultProviders.get(DefaultProviders.java:147)\r\n            at com.pi4j.provider.Providers.get(Providers.java:253)\r\n            at com.pi4j.context.Context.create(Context.java:316)\r\n            at com.pi4j.internal.IOCreator.create(IOCreator.java:58)\r\n            at com.pi4j.internal.IOCreator.create(IOCreator.java:96)\r\n            at com.pi4j.internal.IOCreator.create(IOCreator.java:176)\r\n            at com.geekhelp.Main.run(Main.java:63)\r\n            at com.geekhelp.Main.main(Main.java:34)\r\n    21:02:03 [main] DEBUG com.pi4j.platform.impl.DefaultRuntimePlatforms - removed platform from managed platform map [id=raspberrypi; name=RaspberryPi Platform; class=com.pi4j.plugin.raspberrypi.platform.RaspberryPiPlatform]\r\n\r\n\r\nA associate has downloaded my project from GitHub (which is unchanged from the Archetype) and run it successfully on a Rasp Pi 4 (not Zero W).\r\n\r\nQ: Why is the code not seeing the dependencies? when run?\r\n\r\n  [1]: https://pi4j.com/\r\n  [2]: https://github.com/Pi4J/pi4j-maven-archetype\r\n","title":"Pi4J Classpath Error - Intellij running remotely on Pi Zero W","body":"<p><strong>PROBLEM SUMMARY</strong></p>\n<p>I am getting a class path error when I try to code on my desktop and deploy it remotely to my Pi Zero W.</p>\n<p><strong>BACKGROUND</strong></p>\n<p>The <a href=\"https://pi4j.com/\" rel=\"nofollow noreferrer\">Pi4J</a> v2.0<a href=\"https://github.com/Pi4J/pi4j-maven-archetype\" rel=\"nofollow noreferrer\">enter link description here</a> library provides a Maven Archetype to help with Development and instructions for developing on a remote PC.</p>\n<p><strong>ENVIROMENT</strong></p>\n<pre><code>IDE: Intellij Ultimate \nDevelopment PC is Windows 10\nJava 11.0.2\nMaven 3.8.3\n\nRasp Pi Zero W\nOpen jdk java 11.0.8\nMaven 3.8.3\n</code></pre>\n<p><strong>STEPS TAKEN SO FAR</strong></p>\n<p>On development PC I have installed the Archetype per:</p>\n<pre><code>INSTALL ARCHETYPE\ncd pi4j-maven-archetype-master\nmvn install\n...\nBUILD SUCCESS\n\nCREATE PROJECT\nmkdir pitest2\nmvn archetype:generate -DarchetypeCatalog=local\n....\nanswer questions per instructions\nBUILD SUCCESS\n</code></pre>\n<p>Then I open the project in Intellij and refresh it with maven and edit the raspberry.properties to my pi IP address and login.</p>\n<p>When building and deploying the sample code included with Archetype the instructions state:</p>\n<pre><code>The project declares in the pom.xml the following maven/ant goals that you can execute with the command shown :\n\nmvn clean : delete all compiled files from local and remote project\nmvn install : builds the project, uploads the required jars to the remote target RPI board\nmvn antrun:run@exec : runs the program on the remote target\nmvn antrun:run@debug : runs a remote debugging session on the target RPI.\n</code></pre>\n<p>The command <code>mvn install</code> works and a file is copied to Pi.</p>\n<p>When I attempt the <code>mvn antrun:run@exec</code> command results in:</p>\n<pre><code>[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  16.818 s\n[INFO] Finished at: 2021-11-16T20:15:56+13:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-antrun-plugin:3.0.0:run (exec) on project pitest2: An Ant BuildException has occured: The following error occurred while executing this line:\n[ERROR] C:\\Users\\RM\\IdeaProjects\\pitest2\\antrun\\build.xml:166: The following error occurred while executing this line:\n[ERROR] C:\\Users\\RM\\IdeaProjects\\pitest2\\antrun\\build.xml:123: Remote command failed with exit status 1\n[ERROR] around Ant part ...&lt;ant antfile=&quot;antrun/build.xml&quot; target=&quot;run-remote&quot; /&gt;... @ 9:59 in C:\\Users\\RM\\IdeaProjects\\pitest2\\target\\antrun\\build-main.xml\n[ERROR] -&gt; [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\n</code></pre>\n<p><strong>OTHER STEPS TAKEN</strong></p>\n<p>The output from the deploy shows that the pitest.jar is copied to the Pi with its dependencies.</p>\n<pre><code>pi@raspberrypi: ls\npi4j-core.jar\npi4j-library-pigpio.jar\npi4j-plugin-pigpio.jar\npi4j-plugin-raspberrypi.jar\npitest2.jar\npitest2-jar-with-dependencies.jar\nslf4j-api.jar\nslf4j-simple.jar\n</code></pre>\n<p>Other attempts to execute on the pi directly:</p>\n<pre><code>pi@raspberrypi:~/IdeaProjects/pitest2/dist/lib $ java -cp . pitest2.jar\nError: Could not find or load main class pitest2.jar\nCaused by: java.lang.ClassNotFoundException: pitest2.jar\npi@raspberrypi:~/IdeaProjects/pitest2/dist/lib $ java -cp . pitest2.jar com.geekhelp.Main\nError: Could not find or load main class pitest2.jar\nCaused by: java.lang.ClassNotFoundException: pitest2.jar\npi@raspberrypi:~/IdeaProjects/pitest2/dist/lib $ java -cp ./ pitest2.jar com.geekhelp.Main\nError: Could not find or load main class pitest2.jar\nCaused by: java.lang.ClassNotFoundException: pitest2.jar\npi@raspberrypi:~/IdeaProjects/pitest2/dist/lib $ java -cp pitest2.jar com.geekhelp.Main\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/pi4j/util/Console\n        at com.geekhelp.Main.&lt;clinit&gt;(Main.java:24)\nCaused by: java.lang.ClassNotFoundException: com.pi4j.util.Console\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\n        ... 1 more\npi@raspberrypi:~/IdeaProjects/pitest2/dist/lib $\n</code></pre>\n<p>And what appears to be a fat jar under /dist</p>\n<pre><code>pi@raspberrypi:~/IdeaProjects/pitest2/dist $ java -cp pitest2.jar com.geekhelp.Main\n21:01:58 [main] INFO com.pi4j.util.Console - ---------------------------\n21:01:58 [main] INFO com.pi4j.util.Console - |  Hello Rasbian world !  |\n21:01:58 [main] INFO com.pi4j.util.Console - ---------------------------\n21:01:58 [main] INFO com.pi4j.Pi4J - New auto context\n21:01:58 [main] INFO com.pi4j.Pi4J - New context builder\n...\n...    \n21:02:02 [main] DEBUG com.pi4j.platform.impl.DefaultRuntimePlatforms - platforms loaded [1]\n21:02:02 [main] DEBUG com.pi4j.runtime.impl.DefaultRuntime - Pi4J context/runtime successfully initialized.'\n21:02:02 [main] DEBUG com.pi4j.context.impl.DefaultContext - Pi4J runtime context successfully created &amp; initialized.'\n21:02:02 [main] DEBUG com.pi4j.context.impl.DefaultContextBuilder - Pi4J successfully created and initialized a new runtime 'Context'.'\n21:02:02 [main] INFO com.pi4j.util.Console - --------------------\n21:02:02 [main] INFO com.pi4j.util.Console - |  Pi4J PLATFORMS  |\n21:02:02 [main] INFO com.pi4j.util.Console - --------------------\n21:02:02 [main] INFO com.pi4j.util.Console -\nPLATFORMS: [1] &quot;Pi4J Runtime Platforms&quot; &lt;com.pi4j.platform.impl.DefaultPlatforms&gt;\n└─PLATFORM: &quot;RaspberryPi Platform&quot; {raspberrypi} &lt;com.pi4j.plugin.raspberrypi.platform.RaspberryPiPlatform&gt; {Pi4J Platform for the RaspberryPi series of products.}\n21:02:03 [main] INFO com.pi4j.util.Console -\ncom.pi4j.provider.exception.ProviderNotFoundException: Pi4J provider [pigpio-digital-output] could not be found.  Please include this 'provider' JAR in the classpath.\n        at com.pi4j.provider.impl.DefaultRuntimeProviders.get(DefaultRuntimeProviders.java:238)\n        at com.pi4j.provider.impl.DefaultProviders.get(DefaultProviders.java:147)\n        at com.pi4j.provider.Providers.get(Providers.java:253)\n        at com.pi4j.context.Context.create(Context.java:316)\n        at com.pi4j.internal.IOCreator.create(IOCreator.java:58)\n        at com.pi4j.internal.IOCreator.create(IOCreator.java:96)\n        at com.pi4j.internal.IOCreator.create(IOCreator.java:176)\n        at com.geekhelp.Main.run(Main.java:63)\n        at com.geekhelp.Main.main(Main.java:34)\n21:02:03 [main] DEBUG com.pi4j.platform.impl.DefaultRuntimePlatforms - removed platform from managed platform map [id=raspberrypi; name=RaspberryPi Platform; class=com.pi4j.plugin.raspberrypi.platform.RaspberryPiPlatform]\n</code></pre>\n<p>A associate has downloaded my project from GitHub (which is unchanged from the Archetype) and run it successfully on a Rasp Pi 4 (not Zero W).</p>\n<p>Q: Why is the code not seeing the dependencies? when run?</p>\n"},{"tags":["java","mysql","list","loops"],"answers":[{"tags":[],"owner":{"account_id":529143,"reputation":136619,"user_id":1766831,"display_name":"Rick James"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637094059,"creation_date":1637094059,"answer_id":69995590,"question_id":69983589,"body_markdown":"Generate this IODKU (upsert) query:\r\n\r\n    INSERT INTO tbl\r\n            (key, col2, col3)\r\n        VALUES\r\n            (11, 22, 33),\r\n            (43, 54, 65),\r\n            ...\r\n        ON DUPLICATE KEY UPDATE\r\n            col2 = VALUES(col2),\r\n            col3 = VALUES(col3) ;\r\n\r\nThis requires that the column `key` be `UNIQUE` or `PRIMARY`.  It will try to insert the given rows, but discover that they exist.  Then it will switch to Updating the columns specified.\r\n\r\nMySQL 8.0 needs this syntax instead:\r\n\r\n            col2 = NEW.col2,\r\n","title":"is there anyway to SQL update multiple element in List without using for loops?","body":"<p>Generate this IODKU (upsert) query:</p>\n<pre><code>INSERT INTO tbl\n        (key, col2, col3)\n    VALUES\n        (11, 22, 33),\n        (43, 54, 65),\n        ...\n    ON DUPLICATE KEY UPDATE\n        col2 = VALUES(col2),\n        col3 = VALUES(col3) ;\n</code></pre>\n<p>This requires that the column <code>key</code> be <code>UNIQUE</code> or <code>PRIMARY</code>.  It will try to insert the given rows, but discover that they exist.  Then it will switch to Updating the columns specified.</p>\n<p>MySQL 8.0 needs this syntax instead:</p>\n<pre><code>        col2 = NEW.col2,\n</code></pre>\n"}],"owner":{"account_id":17683082,"reputation":55,"user_id":12836503,"display_name":"Thanh Hiếu Nguyễn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69995590,"answer_count":1,"score":0,"last_activity_date":1637094059,"creation_date":1637035110,"question_id":69983589,"body_markdown":"I&#39;m working on my function and it runs well but i want to optimize the method to get better performance, here&#39;s my code:\r\n\r\n    for (Foo foo: duplicateElement) {\r\n            \tString replace = duplicateElement.getName()\r\n\t\t\t\t\t\t.replace( split + name + split, split);\r\n\t\t\t\tduplicateElement.setName(replace);\r\n\t\t\t\tfoo.updateFoo(duplicateElement);\r\n\t\t\t}\r\nThe code above runs, but can i somehow take the ***updateFoo*** SQL call out of the for loops and still make it work? Thanks in advance!","title":"is there anyway to SQL update multiple element in List without using for loops?","body":"<p>I'm working on my function and it runs well but i want to optimize the method to get better performance, here's my code:</p>\n<pre><code>for (Foo foo: duplicateElement) {\n            String replace = duplicateElement.getName()\n                    .replace( split + name + split, split);\n            duplicateElement.setName(replace);\n            foo.updateFoo(duplicateElement);\n        }\n</code></pre>\n<p>The code above runs, but can i somehow take the <em><strong>updateFoo</strong></em> SQL call out of the for loops and still make it work? Thanks in advance!</p>\n"},{"tags":["java","jdbc","lambda","java-8","try-with-resources"],"comments":[{"owner":{"account_id":536567,"reputation":7838,"user_id":905488,"display_name":"Mick Mnemonic"},"score":1,"creation_date":1447466564,"post_id":33703905,"comment_id":55180914,"body_markdown":"Possible duplicate of [How should I use try-with-resources with JDBC?](http://stackoverflow.com/questions/8066501/how-should-i-use-try-with-resources-with-jdbc)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/8066501/how-should-i-use-try-with-resources-with-jdbc\">How should I use try-with-resources with JDBC?</a>"},{"owner":{"account_id":876647,"reputation":1405,"user_id":44605,"accept_rate":75,"display_name":"AlexC"},"score":0,"creation_date":1447467557,"post_id":33703905,"comment_id":55181091,"body_markdown":"I am hoping to find a way to do the init for PreparedStatement using a lambda instead of a class instance, almost like streaming the parameters into the PreparedStatement.","body":"I am hoping to find a way to do the init for PreparedStatement using a lambda instead of a class instance, almost like streaming the parameters into the PreparedStatement."}],"answers":[{"tags":[],"owner":{"account_id":1936546,"reputation":133675,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1447488775,"creation_date":1447488300,"answer_id":33706394,"question_id":33703905,"body_markdown":"First off, your `PreparedStatementSetter` class is awkward:\r\n\r\n - it is a typed class but the type is not used.\r\n - the constructor is explicitly calling an overridable method, [which is a bad practice](https://stackoverflow.com/q/3404301/1743880).\r\n\r\nConsider the following interface instead (inspired from the [Spring interface](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/PreparedStatementSetter.html) of the same name).\r\n\r\n\tpublic interface PreparedStatementSetter {\r\n    \tvoid setValues(PreparedStatement ps) throws SQLException;\r\n    }\r\n\r\nThis interface defines a contract of what a `PreparedStatementSetter` is supposed to do: set values of a `PreparedStatement`, nothing more.\r\n\r\nThen, it would be better to do the creation and initialization of the `PreparedStatement` inside a single method. Consider this addition inside your `DatabaseManager` class:\r\n\r\n    public static PreparedStatement prepareStatement(Connection connection, String sql, PreparedStatementSetter setter) throws SQLException {\r\n        PreparedStatement ps = connection.prepareStatement(sql);\r\n        setter.setValues(ps);\r\n        return ps;\r\n    }\r\n\r\nWith this static method, you can then write:\r\n\r\n    try (\r\n        Connection connection = DatabaseManager.getConnection();\r\n        PreparedStatement stmt = DatabaseManager.prepareStatement(connection, SQL, ps -&gt; ps.setString(1, &quot;foo&quot;));\r\n        ResultSet rs = stmt.executeQuery()\r\n    ) {\r\n        // rest of code\r\n    }\r\n\r\nNotice how the `PreparedStatementSetter` was written here with a lambda expression. That&#39;s one of the advantage of using an interface instead of an abstract class: it actually is a functional interface in this case (because there is a single abstract method) and so can be written as a lambda.","title":"Is there a cleaner way to use try-with-resource and PreparedStatement?","body":"<p>First off, your <code>PreparedStatementSetter</code> class is awkward:</p>\n\n<ul>\n<li>it is a typed class but the type is not used.</li>\n<li>the constructor is explicitly calling an overridable method, <a href=\"https://stackoverflow.com/q/3404301/1743880\">which is a bad practice</a>.</li>\n</ul>\n\n<p>Consider the following interface instead (inspired from the <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/jdbc/core/PreparedStatementSetter.html\" rel=\"nofollow noreferrer\">Spring interface</a> of the same name).</p>\n\n<pre><code>public interface PreparedStatementSetter {\n    void setValues(PreparedStatement ps) throws SQLException;\n}\n</code></pre>\n\n<p>This interface defines a contract of what a <code>PreparedStatementSetter</code> is supposed to do: set values of a <code>PreparedStatement</code>, nothing more.</p>\n\n<p>Then, it would be better to do the creation and initialization of the <code>PreparedStatement</code> inside a single method. Consider this addition inside your <code>DatabaseManager</code> class:</p>\n\n<pre><code>public static PreparedStatement prepareStatement(Connection connection, String sql, PreparedStatementSetter setter) throws SQLException {\n    PreparedStatement ps = connection.prepareStatement(sql);\n    setter.setValues(ps);\n    return ps;\n}\n</code></pre>\n\n<p>With this static method, you can then write:</p>\n\n<pre><code>try (\n    Connection connection = DatabaseManager.getConnection();\n    PreparedStatement stmt = DatabaseManager.prepareStatement(connection, SQL, ps -&gt; ps.setString(1, \"foo\"));\n    ResultSet rs = stmt.executeQuery()\n) {\n    // rest of code\n}\n</code></pre>\n\n<p>Notice how the <code>PreparedStatementSetter</code> was written here with a lambda expression. That's one of the advantage of using an interface instead of an abstract class: it actually is a functional interface in this case (because there is a single abstract method) and so can be written as a lambda.</p>\n"},{"tags":[],"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1447715056,"creation_date":1447551572,"answer_id":33715469,"question_id":33703905,"body_markdown":"Extending from @Tunaki&#39;s answer, it&#39;s also possible to factor-in the _try-with-resources_ and `rs.executeQuery()` such that the `DatabaseManager` handles all of this for you and only asks for the SQL, a `PreparedStatementSetter` and a `ResultSet` handler.\r\n\r\nThis would avoid repeating this everywhere you make a query. Actual API will depend on your usage however – e.g. will you make several queries with the same connection?\r\n\r\nSupposing you will, I propose the following:\r\n\r\n    public class DatabaseManager implements AutoCloseable {\r\n    \r\n        /* Use local file for database */\r\n        private static final String JDBC_CONNECTION = &quot;jdbc:h2:file:./db/sandbox_h2.db;MODE=PostgreSQL&quot;;\r\n    \r\n        static {\r\n            try {\r\n                Class.forName(&quot;org.h2.Driver&quot;);  // Init H2 DB driver\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        private final Connection connection;\r\n    \r\n        private DatabaseManager() throws SQLException {\r\n            this.connection = getConnection();\r\n        }\r\n    \r\n        @Override\r\n        public void close() throws SQLException {\r\n            connection.close();\r\n        }\r\n    \r\n        public interface PreparedStatementSetter {\r\n            void setValues(PreparedStatement ps) throws SQLException;\r\n        }\r\n    \r\n        public interface Work {\r\n            void doWork(DatabaseManager manager) throws SQLException;\r\n        }\r\n    \r\n        public interface ResultSetHandler {\r\n            void process(ResultSet resultSet) throws SQLException;\r\n        }\r\n    \r\n        /**\r\n         * @return Database connection\r\n         * @throws SQLException\r\n         */\r\n        private static Connection getConnection() throws SQLException {\r\n            return DriverManager.getConnection(JDBC_CONNECTION, &quot;su&quot;, &quot;&quot;);\r\n        }\r\n    \r\n        private PreparedStatement prepareStatement(String sql, PreparedStatementSetter setter) throws SQLException {\r\n            PreparedStatement ps = connection.prepareStatement(sql);\r\n            setter.setValues(ps);\r\n            return ps;\r\n        }\r\n    \r\n        public static void executeWork(Work work) throws SQLException {\r\n            try (DatabaseManager dm = new DatabaseManager()) {\r\n                work.doWork(dm);\r\n            }\r\n        }\r\n    \r\n        public void executeQuery(String sql, PreparedStatementSetter setter, ResultSetHandler handler) throws SQLException {\r\n            try (PreparedStatement ps = prepareStatement(sql, setter);\r\n                ResultSet rs = ps.executeQuery()) {\r\n                handler.process(rs);\r\n            }\r\n        }\r\n    }\r\n\r\nIt wraps the connection as an instance field of `DatabaseManager`, which will handle the life-cycle of the connection, thanks to its implementation of `AutoCloseable`.\r\n\r\nIt also defines 2 new functional interfaces (additionally to @Tunaki&#39;s `PreparedStatementSetter`) :\r\n\r\n* `Work` defines some work to do with a `DatabaseManager` via the `executeWork` static method\r\n* `ResultSetHandler` defines how the `ResultSet` must be handled when executing a query via the new `executeQuery` instance method.\r\n\r\nIt can be used as follows:\r\n\r\n\t\tfinal String SQL = &quot;select * from NVPAIR where name=?&quot;;\r\n\t\ttry {\r\n\t\t\tDatabaseManager.executeWork(dm -&gt; {\r\n\t\t\t\tdm.executeQuery(SQL, ps -&gt; ps.setString(1, &quot;foo&quot;), rs -&gt; {\r\n\t\t\t\t\twhile (rs.next()) {\r\n\t\t\t\t\t\tSystem.out.println(rs.getString(&quot;name&quot;) + &quot;=&quot; + rs.getString(&quot;value&quot;));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t// other queries are possible here\r\n\t\t\t});\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\nAs you see, you don&#39;t have to worry about resource handling any\r\nmore.\r\n\r\nI left `SQLException` handling outside the api since you might want to let it propagate.\r\n\r\n&lt;sub&gt;This solution was inspired by [Design Patterns in the Light of Lambda Expressions by Subramaniam][1].&lt;/sub&gt;\r\n\r\n  [1]: https://youtu.be/e4MT_OguDKg?t=46m16s","title":"Is there a cleaner way to use try-with-resource and PreparedStatement?","body":"<p>Extending from @Tunaki's answer, it's also possible to factor-in the <em>try-with-resources</em> and <code>rs.executeQuery()</code> such that the <code>DatabaseManager</code> handles all of this for you and only asks for the SQL, a <code>PreparedStatementSetter</code> and a <code>ResultSet</code> handler.</p>\n\n<p>This would avoid repeating this everywhere you make a query. Actual API will depend on your usage however – e.g. will you make several queries with the same connection?</p>\n\n<p>Supposing you will, I propose the following:</p>\n\n<pre><code>public class DatabaseManager implements AutoCloseable {\n\n    /* Use local file for database */\n    private static final String JDBC_CONNECTION = \"jdbc:h2:file:./db/sandbox_h2.db;MODE=PostgreSQL\";\n\n    static {\n        try {\n            Class.forName(\"org.h2.Driver\");  // Init H2 DB driver\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    private final Connection connection;\n\n    private DatabaseManager() throws SQLException {\n        this.connection = getConnection();\n    }\n\n    @Override\n    public void close() throws SQLException {\n        connection.close();\n    }\n\n    public interface PreparedStatementSetter {\n        void setValues(PreparedStatement ps) throws SQLException;\n    }\n\n    public interface Work {\n        void doWork(DatabaseManager manager) throws SQLException;\n    }\n\n    public interface ResultSetHandler {\n        void process(ResultSet resultSet) throws SQLException;\n    }\n\n    /**\n     * @return Database connection\n     * @throws SQLException\n     */\n    private static Connection getConnection() throws SQLException {\n        return DriverManager.getConnection(JDBC_CONNECTION, \"su\", \"\");\n    }\n\n    private PreparedStatement prepareStatement(String sql, PreparedStatementSetter setter) throws SQLException {\n        PreparedStatement ps = connection.prepareStatement(sql);\n        setter.setValues(ps);\n        return ps;\n    }\n\n    public static void executeWork(Work work) throws SQLException {\n        try (DatabaseManager dm = new DatabaseManager()) {\n            work.doWork(dm);\n        }\n    }\n\n    public void executeQuery(String sql, PreparedStatementSetter setter, ResultSetHandler handler) throws SQLException {\n        try (PreparedStatement ps = prepareStatement(sql, setter);\n            ResultSet rs = ps.executeQuery()) {\n            handler.process(rs);\n        }\n    }\n}\n</code></pre>\n\n<p>It wraps the connection as an instance field of <code>DatabaseManager</code>, which will handle the life-cycle of the connection, thanks to its implementation of <code>AutoCloseable</code>.</p>\n\n<p>It also defines 2 new functional interfaces (additionally to @Tunaki's <code>PreparedStatementSetter</code>) :</p>\n\n<ul>\n<li><code>Work</code> defines some work to do with a <code>DatabaseManager</code> via the <code>executeWork</code> static method</li>\n<li><code>ResultSetHandler</code> defines how the <code>ResultSet</code> must be handled when executing a query via the new <code>executeQuery</code> instance method.</li>\n</ul>\n\n<p>It can be used as follows:</p>\n\n<pre><code>    final String SQL = \"select * from NVPAIR where name=?\";\n    try {\n        DatabaseManager.executeWork(dm -&gt; {\n            dm.executeQuery(SQL, ps -&gt; ps.setString(1, \"foo\"), rs -&gt; {\n                while (rs.next()) {\n                    System.out.println(rs.getString(\"name\") + \"=\" + rs.getString(\"value\"));\n                }\n            });\n            // other queries are possible here\n        });\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n</code></pre>\n\n<p>As you see, you don't have to worry about resource handling any\nmore.</p>\n\n<p>I left <code>SQLException</code> handling outside the api since you might want to let it propagate.</p>\n\n<p><sub>This solution was inspired by <a href=\"https://youtu.be/e4MT_OguDKg?t=46m16s\" rel=\"nofollow\">Design Patterns in the Light of Lambda Expressions by Subramaniam</a>.</sub></p>\n"},{"tags":[],"owner":{"account_id":876647,"reputation":1405,"user_id":44605,"accept_rate":75,"display_name":"AlexC"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1447864831,"creation_date":1447864831,"answer_id":33785583,"question_id":33703905,"body_markdown":"I found another way of doing this which may be helpful to people:\r\n\r\nPreparedStatementExecutor.java:\r\n\r\n    /**\r\n     * Execute PreparedStatement to generate ResultSet\r\n     */\r\n    public interface PreparedStatementExecutor {\r\n        ResultSet execute(PreparedStatement pstmt) throws SQLException;\r\n    }\r\n\r\n\r\nPreparedStatementSetter.java:\r\n\r\n    /**\r\n     * Lambda interface to help initialize PreparedStatement\r\n     */\r\n    public interface PreparedStatementSetter {\r\n        void prepare(PreparedStatement pstmt) throws SQLException;\r\n    }\r\n\r\n\r\nJdbcTriple.java:\r\n\r\n    /**\r\n     * Contains DB objects that close when done\r\n     */\r\n    public class JdbcTriple implements AutoCloseable {\r\n        Connection connection;\r\n        PreparedStatement preparedStatement;\r\n        ResultSet resultSet;\r\n    \r\n        /**\r\n         * Create Connection/PreparedStatement/ResultSet\r\n         *\r\n         * @param sql String SQL\r\n         * @param setter Setter for PreparedStatement\r\n         * @return JdbcTriple\r\n         * @throws SQLException\r\n         */\r\n        public static JdbcTriple create(String sql, PreparedStatementSetter setter) throws SQLException {\r\n            JdbcTriple triple = new JdbcTriple();\r\n            triple.connection = DatabaseManager.getConnection();\r\n            triple.preparedStatement = DatabaseManager.prepareStatement(triple.connection, sql, setter);\r\n            triple.resultSet = triple.preparedStatement.executeQuery();\r\n            return triple;\r\n        }\r\n    \r\n        public Connection getConnection() {\r\n            return connection;\r\n        }\r\n    \r\n        public PreparedStatement getPreparedStatement() {\r\n            return preparedStatement;\r\n        }\r\n    \r\n        public ResultSet getResultSet() {\r\n            return resultSet;\r\n        }\r\n    \r\n        @Override\r\n        public void close() throws Exception {\r\n            if (resultSet != null)\r\n                resultSet.close();\r\n            if (preparedStatement != null)\r\n                preparedStatement.close();\r\n            if (connection != null)\r\n                connection.close();\r\n        }\r\n    }\r\n\r\n\r\nDatabaseManager.java:\r\n\r\n    /**\r\n     * Initialize script\r\n     * -----\r\n     * CREATE TABLE NVPAIR;\r\n     * ALTER TABLE PUBLIC.NVPAIR ADD value VARCHAR2 NULL;\r\n     * ALTER TABLE PUBLIC.NVPAIR ADD id int NOT NULL AUTO_INCREMENT;\r\n     * CREATE UNIQUE INDEX NVPAIR_id_uindex ON PUBLIC.NVPAIR (id);\r\n     * ALTER TABLE PUBLIC.NVPAIR ADD name VARCHAR2 NOT NULL;\r\n     * ALTER TABLE PUBLIC.NVPAIR ADD CONSTRAINT NVPAIR_name_pk PRIMARY KEY (name);\r\n     *\r\n     * INSERT INTO NVPAIR(name, value) VALUES(&#39;foo&#39;, &#39;foo-value&#39;);\r\n     * INSERT INTO NVPAIR(name, value) VALUES(&#39;bar&#39;, &#39;bar-value&#39;);\r\n     */\r\n    public class DatabaseManager {\r\n        /* Use local file for database */\r\n        private static final String JDBC_CONNECTION = &quot;jdbc:h2:file:./db/sandbox_h2.db;MODE=PostgreSQL&quot;;\r\n    \r\n        static {\r\n            try {\r\n                Class.forName(&quot;org.h2.Driver&quot;);  // Init H2 DB driver\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * @return Database connection\r\n         * @throws SQLException\r\n         */\r\n        public static Connection getConnection() throws SQLException {\r\n            return DriverManager.getConnection(JDBC_CONNECTION, &quot;su&quot;, &quot;&quot;);\r\n        }\r\n    \r\n        /** Prepare statement */\r\n        public static PreparedStatement prepareStatement(Connection conn, String SQL, PreparedStatementSetter setter) throws SQLException {\r\n            PreparedStatement pstmt = conn.prepareStatement(SQL);\r\n            setter.prepare(pstmt);\r\n            return pstmt;\r\n        }\r\n    \r\n        /** Execute statement */\r\n        public static ResultSet executeStatement(PreparedStatement pstmt, PreparedStatementExecutor executor) throws SQLException {\r\n            return executor.execute(pstmt);\r\n        }\r\n    }\r\n\r\n\r\nMain.java:\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            final String SQL = &quot;select * from NVPAIR where name=?&quot;;\r\n            try (\r\n                JdbcTriple triple = JdbcTriple.create(SQL, pstmt -&gt; { pstmt.setString(1, &quot;foo&quot;); })\r\n            ){\r\n                while (triple.getResultSet().next()) {\r\n                    System.out.println(triple.getResultSet().getString(&quot;name&quot;) + &quot;=&quot; + triple.getResultSet().getString(&quot;value&quot;));\r\n                }\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nWhile this doesn&#39;t handle cases where you may need to return an ID from insert or transactions, it does offer a quick way to run a query, set parameters and get a ResultSet, which in my case is bulk of the DB code.\r\n","title":"Is there a cleaner way to use try-with-resource and PreparedStatement?","body":"<p>I found another way of doing this which may be helpful to people:</p>\n\n<p>PreparedStatementExecutor.java:</p>\n\n<pre><code>/**\n * Execute PreparedStatement to generate ResultSet\n */\npublic interface PreparedStatementExecutor {\n    ResultSet execute(PreparedStatement pstmt) throws SQLException;\n}\n</code></pre>\n\n<p>PreparedStatementSetter.java:</p>\n\n<pre><code>/**\n * Lambda interface to help initialize PreparedStatement\n */\npublic interface PreparedStatementSetter {\n    void prepare(PreparedStatement pstmt) throws SQLException;\n}\n</code></pre>\n\n<p>JdbcTriple.java:</p>\n\n<pre><code>/**\n * Contains DB objects that close when done\n */\npublic class JdbcTriple implements AutoCloseable {\n    Connection connection;\n    PreparedStatement preparedStatement;\n    ResultSet resultSet;\n\n    /**\n     * Create Connection/PreparedStatement/ResultSet\n     *\n     * @param sql String SQL\n     * @param setter Setter for PreparedStatement\n     * @return JdbcTriple\n     * @throws SQLException\n     */\n    public static JdbcTriple create(String sql, PreparedStatementSetter setter) throws SQLException {\n        JdbcTriple triple = new JdbcTriple();\n        triple.connection = DatabaseManager.getConnection();\n        triple.preparedStatement = DatabaseManager.prepareStatement(triple.connection, sql, setter);\n        triple.resultSet = triple.preparedStatement.executeQuery();\n        return triple;\n    }\n\n    public Connection getConnection() {\n        return connection;\n    }\n\n    public PreparedStatement getPreparedStatement() {\n        return preparedStatement;\n    }\n\n    public ResultSet getResultSet() {\n        return resultSet;\n    }\n\n    @Override\n    public void close() throws Exception {\n        if (resultSet != null)\n            resultSet.close();\n        if (preparedStatement != null)\n            preparedStatement.close();\n        if (connection != null)\n            connection.close();\n    }\n}\n</code></pre>\n\n<p>DatabaseManager.java:</p>\n\n<pre><code>/**\n * Initialize script\n * -----\n * CREATE TABLE NVPAIR;\n * ALTER TABLE PUBLIC.NVPAIR ADD value VARCHAR2 NULL;\n * ALTER TABLE PUBLIC.NVPAIR ADD id int NOT NULL AUTO_INCREMENT;\n * CREATE UNIQUE INDEX NVPAIR_id_uindex ON PUBLIC.NVPAIR (id);\n * ALTER TABLE PUBLIC.NVPAIR ADD name VARCHAR2 NOT NULL;\n * ALTER TABLE PUBLIC.NVPAIR ADD CONSTRAINT NVPAIR_name_pk PRIMARY KEY (name);\n *\n * INSERT INTO NVPAIR(name, value) VALUES('foo', 'foo-value');\n * INSERT INTO NVPAIR(name, value) VALUES('bar', 'bar-value');\n */\npublic class DatabaseManager {\n    /* Use local file for database */\n    private static final String JDBC_CONNECTION = \"jdbc:h2:file:./db/sandbox_h2.db;MODE=PostgreSQL\";\n\n    static {\n        try {\n            Class.forName(\"org.h2.Driver\");  // Init H2 DB driver\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    /**\n     * @return Database connection\n     * @throws SQLException\n     */\n    public static Connection getConnection() throws SQLException {\n        return DriverManager.getConnection(JDBC_CONNECTION, \"su\", \"\");\n    }\n\n    /** Prepare statement */\n    public static PreparedStatement prepareStatement(Connection conn, String SQL, PreparedStatementSetter setter) throws SQLException {\n        PreparedStatement pstmt = conn.prepareStatement(SQL);\n        setter.prepare(pstmt);\n        return pstmt;\n    }\n\n    /** Execute statement */\n    public static ResultSet executeStatement(PreparedStatement pstmt, PreparedStatementExecutor executor) throws SQLException {\n        return executor.execute(pstmt);\n    }\n}\n</code></pre>\n\n<p>Main.java:</p>\n\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        final String SQL = \"select * from NVPAIR where name=?\";\n        try (\n            JdbcTriple triple = JdbcTriple.create(SQL, pstmt -&gt; { pstmt.setString(1, \"foo\"); })\n        ){\n            while (triple.getResultSet().next()) {\n                System.out.println(triple.getResultSet().getString(\"name\") + \"=\" + triple.getResultSet().getString(\"value\"));\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>While this doesn't handle cases where you may need to return an ID from insert or transactions, it does offer a quick way to run a query, set parameters and get a ResultSet, which in my case is bulk of the DB code.</p>\n"},{"tags":[],"owner":{"account_id":130294,"reputation":329,"user_id":329456,"display_name":"tisaksen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637093892,"creation_date":1637093892,"answer_id":69995565,"question_id":33703905,"body_markdown":"A much cleaner solution would simply be to nest your try-with-resource calls\r\n    \r\n    try (Connection connection = dataSource.getConnection()) \r\n    {\r\n        try (PreparedStatement stmt = connection.prepareStatement(query)) \r\n        {\r\n            stmt.setString(1, value);\r\n            \r\n            try (ResultSet resultSet = stmt.executeQuery()) {\r\n                // tickle your data here...\r\n            }\r\n        }\r\n    } \r\n    catch (Exception e) {\r\n        log.error(&quot;Oopsie daisy!&quot;, e);\r\n    }","title":"Is there a cleaner way to use try-with-resource and PreparedStatement?","body":"<p>A much cleaner solution would simply be to nest your try-with-resource calls</p>\n<pre><code>try (Connection connection = dataSource.getConnection()) \n{\n    try (PreparedStatement stmt = connection.prepareStatement(query)) \n    {\n        stmt.setString(1, value);\n        \n        try (ResultSet resultSet = stmt.executeQuery()) {\n            // tickle your data here...\n        }\n    }\n} \ncatch (Exception e) {\n    log.error(&quot;Oopsie daisy!&quot;, e);\n}\n</code></pre>\n"}],"owner":{"account_id":876647,"reputation":1405,"user_id":44605,"accept_rate":75,"display_name":"AlexC"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5763,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":33706394,"answer_count":4,"score":10,"last_activity_date":1637093892,"creation_date":1447461814,"question_id":33703905,"body_markdown":"Here is the `Main.java`:\r\n\r\n    package foo.sandbox.db;\r\n    \r\n    import java.sql.Connection;\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.ResultSet;\r\n    import java.sql.SQLException;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            final String SQL = &quot;select * from NVPAIR where name=?&quot;;\r\n            try (\r\n                    Connection connection = DatabaseManager.getConnection();\r\n                    PreparedStatement stmt = connection.prepareStatement(SQL);\r\n                    DatabaseManager.PreparedStatementSetter&lt;PreparedStatement&gt; ignored = new DatabaseManager.PreparedStatementSetter&lt;PreparedStatement&gt;(stmt) {\r\n                        @Override\r\n                        public void init(PreparedStatement ps) throws SQLException {\r\n                            ps.setString(1, &quot;foo&quot;);\r\n                        }\r\n                    };\r\n                    ResultSet rs = stmt.executeQuery()\r\n            ) {\r\n                while (rs.next()) {\r\n                    System.out.println(rs.getString(&quot;name&quot;) + &quot;=&quot; + rs.getString(&quot;value&quot;));\r\n                }\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nAnd here is `DatabaseManager.java`\r\n\r\n    package foo.sandbox.db;\r\n    \r\n    import java.sql.Connection;\r\n    import java.sql.DriverManager;\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.SQLException;\r\n    import java.sql.Statement;\r\n    \r\n    /**\r\n     * Initialize script\r\n     * -----\r\n     * CREATE TABLE NVPAIR;\r\n     * ALTER TABLE PUBLIC.NVPAIR ADD value VARCHAR2 NULL;\r\n     * ALTER TABLE PUBLIC.NVPAIR ADD id int NOT NULL AUTO_INCREMENT;\r\n     * CREATE UNIQUE INDEX NVPAIR_id_uindex ON PUBLIC.NVPAIR (id);\r\n     * ALTER TABLE PUBLIC.NVPAIR ADD name VARCHAR2 NOT NULL;\r\n     * ALTER TABLE PUBLIC.NVPAIR ADD CONSTRAINT NVPAIR_name_pk PRIMARY KEY (name);\r\n     *\r\n     * INSERT INTO NVPAIR(name, value) VALUES(&#39;foo&#39;, &#39;foo-value&#39;);\r\n     * INSERT INTO NVPAIR(name, value) VALUES(&#39;bar&#39;, &#39;bar-value&#39;);\r\n     */\r\n    public class DatabaseManager {\r\n        /**\r\n         * Class to allow PreparedStatement to initialize parmaters inside try-with-resource\r\n         * @param &lt;T&gt; extends Statement\r\n         */\r\n        public static abstract class PreparedStatementSetter&lt;T extends Statement&gt; implements AutoCloseable {\r\n            public PreparedStatementSetter(PreparedStatement pstmt) throws SQLException {\r\n                init(pstmt);\r\n            }\r\n    \r\n            @Override\r\n            public void close() throws Exception {\r\n            }\r\n    \r\n            public abstract void init(PreparedStatement pstmt) throws SQLException;\r\n        }\r\n    \r\n        /* Use local file for database */\r\n        private static final String JDBC_CONNECTION = &quot;jdbc:h2:file:./db/sandbox_h2.db;MODE=PostgreSQL&quot;;\r\n    \r\n        static {\r\n            try {\r\n                Class.forName(&quot;org.h2.Driver&quot;);  // Init H2 DB driver\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * @return Database connection\r\n         * @throws SQLException\r\n         */\r\n        public static Connection getConnection() throws SQLException {\r\n            return DriverManager.getConnection(JDBC_CONNECTION, &quot;su&quot;, &quot;&quot;);\r\n        }\r\n    }\r\n\r\n\r\n*I am using H2 database for simplicity since it&#39;s a file based one that is easy to create and test on.*\r\n\r\n\r\nSo everything works and resources get cleaned up as expected, however I just feel there may be a cleaner way to set the `PreparedStatement` parameters from inside the try-with-resources block (and I don&#39;t want to use nested try/catch blocks as those look &#39;awkward&#39;).  Maybe there already exists a helper class in JDBC that does just this, but I have not been able to find one.\r\n\r\nPreferably with a lambda function to initialize the `PreparedStatement` but it would still require allocating an `AutoCloseable` object so it can be inside the try-with-resources.","title":"Is there a cleaner way to use try-with-resource and PreparedStatement?","body":"<p>Here is the <code>Main.java</code>:</p>\n\n<pre><code>package foo.sandbox.db;\n\nimport java.sql.Connection;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\n\npublic class Main {\n    public static void main(String[] args) {\n        final String SQL = \"select * from NVPAIR where name=?\";\n        try (\n                Connection connection = DatabaseManager.getConnection();\n                PreparedStatement stmt = connection.prepareStatement(SQL);\n                DatabaseManager.PreparedStatementSetter&lt;PreparedStatement&gt; ignored = new DatabaseManager.PreparedStatementSetter&lt;PreparedStatement&gt;(stmt) {\n                    @Override\n                    public void init(PreparedStatement ps) throws SQLException {\n                        ps.setString(1, \"foo\");\n                    }\n                };\n                ResultSet rs = stmt.executeQuery()\n        ) {\n            while (rs.next()) {\n                System.out.println(rs.getString(\"name\") + \"=\" + rs.getString(\"value\"));\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>And here is <code>DatabaseManager.java</code></p>\n\n<pre><code>package foo.sandbox.db;\n\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.PreparedStatement;\nimport java.sql.SQLException;\nimport java.sql.Statement;\n\n/**\n * Initialize script\n * -----\n * CREATE TABLE NVPAIR;\n * ALTER TABLE PUBLIC.NVPAIR ADD value VARCHAR2 NULL;\n * ALTER TABLE PUBLIC.NVPAIR ADD id int NOT NULL AUTO_INCREMENT;\n * CREATE UNIQUE INDEX NVPAIR_id_uindex ON PUBLIC.NVPAIR (id);\n * ALTER TABLE PUBLIC.NVPAIR ADD name VARCHAR2 NOT NULL;\n * ALTER TABLE PUBLIC.NVPAIR ADD CONSTRAINT NVPAIR_name_pk PRIMARY KEY (name);\n *\n * INSERT INTO NVPAIR(name, value) VALUES('foo', 'foo-value');\n * INSERT INTO NVPAIR(name, value) VALUES('bar', 'bar-value');\n */\npublic class DatabaseManager {\n    /**\n     * Class to allow PreparedStatement to initialize parmaters inside try-with-resource\n     * @param &lt;T&gt; extends Statement\n     */\n    public static abstract class PreparedStatementSetter&lt;T extends Statement&gt; implements AutoCloseable {\n        public PreparedStatementSetter(PreparedStatement pstmt) throws SQLException {\n            init(pstmt);\n        }\n\n        @Override\n        public void close() throws Exception {\n        }\n\n        public abstract void init(PreparedStatement pstmt) throws SQLException;\n    }\n\n    /* Use local file for database */\n    private static final String JDBC_CONNECTION = \"jdbc:h2:file:./db/sandbox_h2.db;MODE=PostgreSQL\";\n\n    static {\n        try {\n            Class.forName(\"org.h2.Driver\");  // Init H2 DB driver\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    /**\n     * @return Database connection\n     * @throws SQLException\n     */\n    public static Connection getConnection() throws SQLException {\n        return DriverManager.getConnection(JDBC_CONNECTION, \"su\", \"\");\n    }\n}\n</code></pre>\n\n<p><em>I am using H2 database for simplicity since it's a file based one that is easy to create and test on.</em></p>\n\n<p>So everything works and resources get cleaned up as expected, however I just feel there may be a cleaner way to set the <code>PreparedStatement</code> parameters from inside the try-with-resources block (and I don't want to use nested try/catch blocks as those look 'awkward').  Maybe there already exists a helper class in JDBC that does just this, but I have not been able to find one.</p>\n\n<p>Preferably with a lambda function to initialize the <code>PreparedStatement</code> but it would still require allocating an <code>AutoCloseable</code> object so it can be inside the try-with-resources.</p>\n"},{"tags":["java","spring-cloud-sleuth"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1637133462,"post_id":69976129,"comment_id":123741208,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":944144,"reputation":5341,"user_id":971735,"display_name":"Jonatan Ivanov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637093735,"creation_date":1637092995,"answer_id":69995412,"question_id":69976129,"body_markdown":"I&#39;m not sure if this has anything to do with Sleuth.\r\nYou can modify your log settings and add what you want. Sleuth modifies the level in the pattern (`logging.pattern.level`) and adds these details there.\r\n\r\nYou can check this answer to see how sleuth does this: https://stackoverflow.com/a/65851232/971735","title":"what should I do to add new tags in sleuth, such as client ip address, I want to add the client ip address in logs, of course, with traceId, spanId","body":"<p>I'm not sure if this has anything to do with Sleuth.\nYou can modify your log settings and add what you want. Sleuth modifies the level in the pattern (<code>logging.pattern.level</code>) and adds these details there.</p>\n<p>You can check this answer to see how sleuth does this: <a href=\"https://stackoverflow.com/a/65851232/971735\">https://stackoverflow.com/a/65851232/971735</a></p>\n"}],"owner":{"account_id":13764036,"reputation":1,"user_id":9933030,"display_name":"chuanguojinbo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":245,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637093735,"creation_date":1636987042,"question_id":69976129,"body_markdown":"I am trying to finish a log system, which is to monitor a spring cloud application. The spring-cloud application consists of several microservices, using sleuth for distributed tracing. I have set the pattern of log, and now there are tags like &#39;traceId&#39;, &#39;spanId&#39;, &#39;parentId&#39; in the log. Now , I would like to add a new tag named &#39;client_ip&#39; into the log. How can I make it ? And how to pass the client_ip tag to downstream microservice. Currently, my plan is to get client ip in api-gateway  service.","title":"what should I do to add new tags in sleuth, such as client ip address, I want to add the client ip address in logs, of course, with traceId, spanId","body":"<p>I am trying to finish a log system, which is to monitor a spring cloud application. The spring-cloud application consists of several microservices, using sleuth for distributed tracing. I have set the pattern of log, and now there are tags like 'traceId', 'spanId', 'parentId' in the log. Now , I would like to add a new tag named 'client_ip' into the log. How can I make it ? And how to pass the client_ip tag to downstream microservice. Currently, my plan is to get client ip in api-gateway  service.</p>\n"},{"tags":["java","spring-boot","rabbitmq"],"comments":[{"owner":{"account_id":71985,"reputation":7903,"user_id":208013,"display_name":"Mirek Pluta"},"score":0,"creation_date":1637095113,"post_id":69995532,"comment_id":123733449,"body_markdown":"You could always just use ScheduledThreadPoolExecutor and schedule a task that will publish a message with delay. However, if your application crashes/restarts/stops before that happens, the message will never get into RabbitMQ.","body":"You could always just use ScheduledThreadPoolExecutor and schedule a task that will publish a message with delay. However, if your application crashes/restarts/stops before that happens, the message will never get into RabbitMQ."},{"owner":{"account_id":10104043,"reputation":15,"user_id":7481788,"display_name":"Jacob McCall"},"score":0,"creation_date":1637096410,"post_id":69995532,"comment_id":123733875,"body_markdown":"From what I have read, isn&#39;t that essentially the same as Thread.sleep()? That is something I was told to avoid.","body":"From what I have read, isn&#39;t that essentially the same as Thread.sleep()? That is something I was told to avoid."},{"owner":{"account_id":71985,"reputation":7903,"user_id":208013,"display_name":"Mirek Pluta"},"score":0,"creation_date":1637097547,"post_id":69995532,"comment_id":123734233,"body_markdown":"It&#39;s not. `Thread.sleep` will suspend current thread. `ScheduledThreadPoolExecutor` is used to execute tasks in future. It won&#39;t block anything.","body":"It&#39;s not. <code>Thread.sleep</code> will suspend current thread. <code>ScheduledThreadPoolExecutor</code> is used to execute tasks in future. It won&#39;t block anything."}],"owner":{"account_id":10104043,"reputation":15,"user_id":7481788,"display_name":"Jacob McCall"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637093708,"creation_date":1637093708,"question_id":69995532,"body_markdown":"I need to delay sending a message to RabbitMQ but am not authorized to use the DelayedMessage plugin and do not want to stop a thread. Any suggestions on how to accomplish this?","title":"Delaying message to RabbitMQ in java w/o DelayedMessage plugin or stopping thread","body":"<p>I need to delay sending a message to RabbitMQ but am not authorized to use the DelayedMessage plugin and do not want to stop a thread. Any suggestions on how to accomplish this?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2796827,"reputation":2767,"user_id":2405914,"accept_rate":94,"display_name":"Leonardo Alves Machado"},"score":0,"creation_date":1637073993,"post_id":69990871,"comment_id":123724772,"body_markdown":"Let me know if I understood, you just want to shift right an array, right? I think you just need the inner for loop of the method you said it works (but check with array&#39;s size).","body":"Let me know if I understood, you just want to shift right an array, right? I think you just need the inner for loop of the method you said it works (but check with array&#39;s size)."},{"owner":{"account_id":19516732,"reputation":49,"user_id":14279423,"display_name":"Weightlifting Without Limits"},"score":0,"creation_date":1637074076,"post_id":69990871,"comment_id":123724812,"body_markdown":"The bottom method works. All i want to do is take  my coordinate row, and shift the coordinates to the front. But I am wondering if this can also be done with the reversal method.","body":"The bottom method works. All i want to do is take  my coordinate row, and shift the coordinates to the front. But I am wondering if this can also be done with the reversal method."},{"owner":{"account_id":2796827,"reputation":2767,"user_id":2405914,"accept_rate":94,"display_name":"Leonardo Alves Machado"},"score":0,"creation_date":1637074204,"post_id":69990871,"comment_id":123724879,"body_markdown":"you mean, increasing the counter instead of decreasing? You might be overwriting values that way...","body":"you mean, increasing the counter instead of decreasing? You might be overwriting values that way..."},{"owner":{"account_id":19516732,"reputation":49,"user_id":14279423,"display_name":"Weightlifting Without Limits"},"score":0,"creation_date":1637074289,"post_id":69990871,"comment_id":123724914,"body_markdown":"I am not sure I understand. Sorry! The coordinates in the row have to remain, they simply just need to be shifted front or back depending on the condition","body":"I am not sure I understand. Sorry! The coordinates in the row have to remain, they simply just need to be shifted front or back depending on the condition"},{"owner":{"account_id":10164387,"reputation":4961,"user_id":7506820,"display_name":"Nico Van Belle"},"score":0,"creation_date":1637074401,"post_id":69990871,"comment_id":123724971,"body_markdown":"I don&#39;t understand why 1) numberOfElements is a separate field as I have the impression that it&#39;s always the size of the &#39;newCoordinateArray&#39; array? and 2) why you are using arrays when you can make your life easy and use a collection such as ArrayDeque","body":"I don&#39;t understand why 1) numberOfElements is a separate field as I have the impression that it&#39;s always the size of the &#39;newCoordinateArray&#39; array? and 2) why you are using arrays when you can make your life easy and use a collection such as ArrayDeque"},{"owner":{"account_id":19516732,"reputation":49,"user_id":14279423,"display_name":"Weightlifting Without Limits"},"score":0,"creation_date":1637074470,"post_id":69990871,"comment_id":123725005,"body_markdown":"I can only use arrays in this unfortunately. The numberOfElements keeps track of how many elements i have in my myCoordinateArray. So Basciaslly, I fill it with coordinates, I then take that row and shift everything to the front or back.","body":"I can only use arrays in this unfortunately. The numberOfElements keeps track of how many elements i have in my myCoordinateArray. So Basciaslly, I fill it with coordinates, I then take that row and shift everything to the front or back."},{"owner":{"account_id":2796827,"reputation":2767,"user_id":2405914,"accept_rate":94,"display_name":"Leonardo Alves Machado"},"score":0,"creation_date":1637074514,"post_id":69990871,"comment_id":123725022,"body_markdown":"To keep track of the size of the array, you can use the property length of the array itself","body":"To keep track of the size of the array, you can use the property length of the array itself"},{"owner":{"account_id":19516732,"reputation":49,"user_id":14279423,"display_name":"Weightlifting Without Limits"},"score":0,"creation_date":1637074583,"post_id":69990871,"comment_id":123725050,"body_markdown":"Yes but the array that i create is simply just to store coordinates that I get from my input. Then i need to shift them","body":"Yes but the array that i create is simply just to store coordinates that I get from my input. Then i need to shift them"},{"owner":{"account_id":19516732,"reputation":49,"user_id":14279423,"display_name":"Weightlifting Without Limits"},"score":0,"creation_date":1637074663,"post_id":69990871,"comment_id":123725084,"body_markdown":"There is something between my two versions of addCoordinateRowFront method that I cant spot that is causing one to work and one to make the program fail","body":"There is something between my two versions of addCoordinateRowFront method that I cant spot that is causing one to work and one to make the program fail"},{"owner":{"account_id":2796827,"reputation":2767,"user_id":2405914,"accept_rate":94,"display_name":"Leonardo Alves Machado"},"score":0,"creation_date":1637074895,"post_id":69990871,"comment_id":123725197,"body_markdown":"In the method that is &quot;wrong&quot;, you start putting the last element to the first position, and goes on the loop until you reach the middle part of the array, where you start doing useless copies. That method erases part of the array and duplicates the end of it. Try debugging to see the behavior.","body":"In the method that is &quot;wrong&quot;, you start putting the last element to the first position, and goes on the loop until you reach the middle part of the array, where you start doing useless copies. That method erases part of the array and duplicates the end of it. Try debugging to see the behavior."},{"owner":{"account_id":19516732,"reputation":49,"user_id":14279423,"display_name":"Weightlifting Without Limits"},"score":0,"creation_date":1637074961,"post_id":69990871,"comment_id":123725228,"body_markdown":"So my reversal method is incorrect? Any pointers to help solve that? Many thanks!","body":"So my reversal method is incorrect? Any pointers to help solve that? Many thanks!"},{"owner":{"account_id":2796827,"reputation":2767,"user_id":2405914,"accept_rate":94,"display_name":"Leonardo Alves Machado"},"score":0,"creation_date":1637075044,"post_id":69990871,"comment_id":123725267,"body_markdown":"To shift right, you need to start the loop from the end of the array, and copy the previous element (i-1) to the current one (i).","body":"To shift right, you need to start the loop from the end of the array, and copy the previous element (i-1) to the current one (i)."},{"owner":{"account_id":19516732,"reputation":49,"user_id":14279423,"display_name":"Weightlifting Without Limits"},"score":0,"creation_date":1637075256,"post_id":69990871,"comment_id":123725366,"body_markdown":"By shift right do you mean shift everything forward? I still get the same problem .","body":"By shift right do you mean shift everything forward? I still get the same problem ."},{"owner":{"account_id":19516732,"reputation":49,"user_id":14279423,"display_name":"Weightlifting Without Limits"},"score":0,"creation_date":1637082864,"post_id":69990871,"comment_id":123728938,"body_markdown":"still lost. Still trying to figure out why this reversal does not like the program","body":"still lost. Still trying to figure out why this reversal does not like the program"}],"owner":{"account_id":19516732,"reputation":49,"user_id":14279423,"display_name":"Weightlifting Without Limits"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637093668,"creation_date":1637072633,"question_id":69990871,"body_markdown":"My problem is this: I store coordinates in rows (initialized by an array myCoordinateArray), and the coordinates in these rows either have to be shifted to the back or shifted to the front. \r\n\r\nNow, my program worked before, but I am trying a different method now with regards to shifting my coordinates to the front using a array reversal method. Problem is, I only get half the output I need. So it seems not all my coordinates are being outputted. \r\n\r\nI am working with classes.\r\n\r\n\r\nEDIT*** I have decided to post my full program to help people get an idea on perhaps why with addCoordinateRowFront (Method 1) my program 100% works, but with addCoordinateRowFront (Method 2 - array reversal) my program no longer works. I really have no idea why this is the case and I really cannot find the problem. Hope someone will be able to shed some light. I very much appreciate the help!\r\n\r\n\r\n\r\nHere is my Main Pirate Class\r\n\r\n    package Pirate;\r\n    \r\n    \r\n    import java.io.PrintStream;\r\n    import java.util.Locale;\r\n    import java.util.Scanner;\r\n    \r\n    \r\n    import ui.UIAuxiliaryMethods;\r\n    \r\n    \r\n    \r\n    public class Pirate {\r\n    \r\n    \tCoordinateRow newCoordinateRow;\r\n    \tCoordinate singleCoordinate;\r\n    \tCoordinate newCoordinate;\r\n    \tint singleCoordinateX;\r\n    \tint singleCoordinateY;\r\n    \tPrintStream out;\r\n    \tString position;\r\n    \r\n    \r\n    \r\n    \tPirate() {\r\n    \r\n    \t\tout = new PrintStream(System.out);\r\n    \t\tnewCoordinateRow = new CoordinateRow();\r\n    \t\tposition = &quot;front&quot;;\r\n    \t}\r\n    \r\n    \r\n    \r\n    \tvoid separateCoordinateRows(Scanner coordinateDataScanner) {\r\n    \r\n    \t\tString[] coordinateDataStringArray = coordinateDataScanner.nextLine().split(&quot;=&quot;); //Split line of input at = into an array of strings\r\n    \r\n    \t\tfor(int i = 0; i &lt; coordinateDataStringArray.length; i++) {\r\n    \r\n    \t\t\tScanner individualCoordinateRowScanner = new Scanner(coordinateDataStringArray[i]);\r\n    \r\n    \t\t\tplaceCoordinateRow(isolateIndividualCoordinates(individualCoordinateRowScanner));\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \r\n    \tCoordinateRow isolateIndividualCoordinates(Scanner scannerInput) {\r\n    \r\n    \t\tCoordinateRow newCoordinateRow = new CoordinateRow();\r\n    \r\n    \t\tString[] individualCoordinateStringArray = scannerInput.nextLine().split(&quot; &quot;); //further split the array of strings into smaller array of strings at white-spaces.\r\n    \r\n    \t\tfor(int i = 0; i &lt; individualCoordinateStringArray.length; i++) {\r\n    \r\n    \t\t\tScanner individualCoordinateScanner = new Scanner(individualCoordinateStringArray[i]);\r\n    \r\n    \t\t\tnewCoordinateRow.addSingleCoordinateToBack(adjustedCoordinates(individualCoordinateScanner)); //add new coordinates back into rows. \r\n    \r\n    \t\t}\r\n    \r\n    \t\treturn newCoordinateRow;\r\n    \t\t\r\n    \t}\r\n    \r\n    \r\n    \r\n    \tCoordinate adjustedCoordinates(Scanner individualCoordinateScanner) {\r\n    \r\n    \t\tString[] individualCoordinateStringArray = individualCoordinateScanner.nextLine().split(&quot;,&quot;); //split array of strings into even smaller array of strings at (,). \r\n    \r\n    \t\tfor(int i = 0; i &lt; individualCoordinateStringArray.length; i++) {\r\n    \r\n    \t\t\tsingleCoordinateX = Integer.parseInt(individualCoordinateStringArray[0]);\r\n    \r\n    \t\t\tsingleCoordinateY = Integer.parseInt(individualCoordinateStringArray[1]);\r\n    \r\n    \t\t\tsingleCoordinate = new Coordinate(singleCoordinateX, singleCoordinateY); //convert existing coordinates to new coordinates\r\n    \r\n    \t\t}\r\n    \r\n    \t\treturn singleCoordinate;\r\n    \r\n    \t}\r\n    \r\n    \r\n    \tCoordinateRow placeCoordinateRow(CoordinateRow rowOfCoordinates) { //add rows of new coordinates either to the front or behind.\r\n    \r\n    \t\tif(position.equals(&quot;front&quot;)) {\r\n    \r\n    \t\t\tnewCoordinateRow.addCoordinateRowFront(rowOfCoordinates);\r\n    \r\n    \t\t\tposition = &quot;back&quot;;\r\n    \r\n    \r\n    \t\t} else if(position.equals(&quot;back&quot;)) {\r\n    \r\n    \t\t\tnewCoordinateRow.addCoordinateRowBack(rowOfCoordinates);\r\n    \r\n    \t\t\tposition = &quot;front&quot;; \r\n    \t\t}\r\n    \r\n    \t\treturn newCoordinateRow;\r\n    \t}\r\n    \r\n    \r\n    \r\n    \tvoid printCoordinateRows() {\r\n    \r\n    \r\n    \t\tfor(int i = 0; i &lt; newCoordinateRow.numberOfElements; i++) {\r\n    \r\n    \t\t\tout.printf(&quot;%d, %d\\n&quot;, newCoordinateRow.newCoordinateArray[i].coordinateX, newCoordinateRow.newCoordinateArray[i].coordinateY);\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \r\n    \tvoid start() {\r\n    \r\n    \t\tScanner newCoordinateInputData = UIAuxiliaryMethods.askUserForInput().getScanner();\r\n    \r\n    \t\tseparateCoordinateRows(newCoordinateInputData);\r\n    \r\n    \t\tprintCoordinateRows();\r\n    \r\n    \t}\r\n    \r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tLocale.setDefault(Locale.US);\r\n    \t\tnew Pirate().start();\r\n    \t}\r\n    \r\n    }\r\n\r\nHere is my CoordinateRow class code:\r\n\r\n    public class CoordinateRow {\r\n    \r\n    \tstatic final int MAX_NUMBER_OF_ELEMENTS = 250;\r\n    \t//want to create a new row class, that can store up to max 250 elements, but can store lower than this\r\n    \r\n    \tCoordinate[] newCoordinateArray;\r\n    \tint numberOfElements;\r\n    \t\r\n    \t\r\n    \tCoordinateRow() {\r\n    \r\n    \t\tnewCoordinateArray = new Coordinate[MAX_NUMBER_OF_ELEMENTS];\r\n    \t\tnumberOfElements = 0;\r\n    \t\t\r\n\t\t\r\n\t}\r\n\r\n\r\n\tvoid addCoordinateRowBack(CoordinateRow rowOfCoordinates) {\r\n\r\n\t\tfor(int i = 0; i &lt; rowOfCoordinates.numberOfElements; i++) {\r\n\r\n\t\t\tnewCoordinateArray[numberOfElements] = rowOfCoordinates.newCoordinateArray[i];\r\n\r\n\t\t\tnumberOfElements++;\r\n\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\tvoid addSingleCoordinateToBack(Coordinate singleCoordinate) {\r\n\r\n\t\tnewCoordinateArray[numberOfElements] = singleCoordinate;\r\n\r\n\t\tnumberOfElements++;\r\n\r\n\t} \r\n\t\r\n\t\r\n\t\r\n\tvoid addCoordinateRowFront(CoordinateRow rowOfCoordinates) {\r\n\t\t\r\n\t\tCoordinate[] newArray = new Coordinate[rowOfCoordinates.numberOfElements];\r\n\t\t\r\n\t\tfor(int i = 0; i &lt; rowOfCoordinates.numberOfElements; i++) {\r\n\t\t\t\r\n\t\t\tnewArray[i] = rowOfCoordinates.newCoordinateArray[rowOfCoordinates.numberOfElements -i - 1];\r\n\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n}\r\n\r\n\r\nThis is my Coordinate Class\r\n\r\n    package Pirate;\r\n    \r\n    public class Coordinate {\r\n    \r\n    \tstatic final int COORDINATE_X_TECTONIC_SHIFT = 1;\r\n    \tstatic final int COORDINATE_Y_TECTONIC_SHIFT = 0;\r\n    \r\n    \tint coordinateX;\r\n    \tint coordinateY;\r\n    \r\n    \tCoordinate(int coordinateX, int coordinateY) {\r\n    \r\n    \t\tthis.coordinateX = coordinateX + COORDINATE_X_TECTONIC_SHIFT;\r\n    \t\tthis.coordinateY = coordinateY + COORDINATE_Y_TECTONIC_SHIFT;\r\n    \r\n    \t}\r\n    \r\n    \r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nIt seems to be going wrong with my reversal method (addCoordinateRowFront) as my other methods work fine with the last program I tried. \r\n\r\nNot sure why this is the case. \r\n\r\nFor clarification, when I use this method for shifting coordinates to the front instead. My program works\r\n\r\n    void addCoordinateRowFront(CoordinateRow rowOfCoordinates) {\r\n    \r\n    \t\tfor(int j = rowOfCoordinates.numberOfElements; j &gt; 0; j--) {\r\n    \r\n    \t\t\tfor(int i = numberOfElements; i &gt; 0; i--) {\r\n    \r\n    \t\t\t\tnewCoordinateArray[i] = newCoordinateArray[i-1];\r\n    \r\n    \t\t\t}\r\n    \t\t\tnewCoordinateArray[0] = rowOfCoordinates.newCoordinateArray[j-1];\r\n    \r\n    \t\t\tnumberOfElements++;\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\nBut I would much prefer row reversal to work as I understand it better.\r\n\r\nWhen I print in my addCordinateRowFront method to see what is going on, this is what I get:\r\n\r\n    Pirate.Coordinate@512ddf17\r\n    Pirate.Coordinate@2c13da15\r\n    Pirate.Coordinate@77556fd\r\n    Pirate.Coordinate@368239c8\r\n    Pirate.Coordinate@9e89d68\r\n    7, 3\r\n    4, 2\r\n    10, 6\r\n    5, 3\r\n    10, 8\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Shifting Coordinates Using array reversal","body":"<p>My problem is this: I store coordinates in rows (initialized by an array myCoordinateArray), and the coordinates in these rows either have to be shifted to the back or shifted to the front.</p>\n<p>Now, my program worked before, but I am trying a different method now with regards to shifting my coordinates to the front using a array reversal method. Problem is, I only get half the output I need. So it seems not all my coordinates are being outputted.</p>\n<p>I am working with classes.</p>\n<p>EDIT*** I have decided to post my full program to help people get an idea on perhaps why with addCoordinateRowFront (Method 1) my program 100% works, but with addCoordinateRowFront (Method 2 - array reversal) my program no longer works. I really have no idea why this is the case and I really cannot find the problem. Hope someone will be able to shed some light. I very much appreciate the help!</p>\n<p>Here is my Main Pirate Class</p>\n<pre><code>package Pirate;\n\n\nimport java.io.PrintStream;\nimport java.util.Locale;\nimport java.util.Scanner;\n\n\nimport ui.UIAuxiliaryMethods;\n\n\n\npublic class Pirate {\n\n    CoordinateRow newCoordinateRow;\n    Coordinate singleCoordinate;\n    Coordinate newCoordinate;\n    int singleCoordinateX;\n    int singleCoordinateY;\n    PrintStream out;\n    String position;\n\n\n\n    Pirate() {\n\n        out = new PrintStream(System.out);\n        newCoordinateRow = new CoordinateRow();\n        position = &quot;front&quot;;\n    }\n\n\n\n    void separateCoordinateRows(Scanner coordinateDataScanner) {\n\n        String[] coordinateDataStringArray = coordinateDataScanner.nextLine().split(&quot;=&quot;); //Split line of input at = into an array of strings\n\n        for(int i = 0; i &lt; coordinateDataStringArray.length; i++) {\n\n            Scanner individualCoordinateRowScanner = new Scanner(coordinateDataStringArray[i]);\n\n            placeCoordinateRow(isolateIndividualCoordinates(individualCoordinateRowScanner));\n        }\n\n    }\n\n\n    CoordinateRow isolateIndividualCoordinates(Scanner scannerInput) {\n\n        CoordinateRow newCoordinateRow = new CoordinateRow();\n\n        String[] individualCoordinateStringArray = scannerInput.nextLine().split(&quot; &quot;); //further split the array of strings into smaller array of strings at white-spaces.\n\n        for(int i = 0; i &lt; individualCoordinateStringArray.length; i++) {\n\n            Scanner individualCoordinateScanner = new Scanner(individualCoordinateStringArray[i]);\n\n            newCoordinateRow.addSingleCoordinateToBack(adjustedCoordinates(individualCoordinateScanner)); //add new coordinates back into rows. \n\n        }\n\n        return newCoordinateRow;\n        \n    }\n\n\n\n    Coordinate adjustedCoordinates(Scanner individualCoordinateScanner) {\n\n        String[] individualCoordinateStringArray = individualCoordinateScanner.nextLine().split(&quot;,&quot;); //split array of strings into even smaller array of strings at (,). \n\n        for(int i = 0; i &lt; individualCoordinateStringArray.length; i++) {\n\n            singleCoordinateX = Integer.parseInt(individualCoordinateStringArray[0]);\n\n            singleCoordinateY = Integer.parseInt(individualCoordinateStringArray[1]);\n\n            singleCoordinate = new Coordinate(singleCoordinateX, singleCoordinateY); //convert existing coordinates to new coordinates\n\n        }\n\n        return singleCoordinate;\n\n    }\n\n\n    CoordinateRow placeCoordinateRow(CoordinateRow rowOfCoordinates) { //add rows of new coordinates either to the front or behind.\n\n        if(position.equals(&quot;front&quot;)) {\n\n            newCoordinateRow.addCoordinateRowFront(rowOfCoordinates);\n\n            position = &quot;back&quot;;\n\n\n        } else if(position.equals(&quot;back&quot;)) {\n\n            newCoordinateRow.addCoordinateRowBack(rowOfCoordinates);\n\n            position = &quot;front&quot;; \n        }\n\n        return newCoordinateRow;\n    }\n\n\n\n    void printCoordinateRows() {\n\n\n        for(int i = 0; i &lt; newCoordinateRow.numberOfElements; i++) {\n\n            out.printf(&quot;%d, %d\\n&quot;, newCoordinateRow.newCoordinateArray[i].coordinateX, newCoordinateRow.newCoordinateArray[i].coordinateY);\n        }\n\n    }\n\n\n    void start() {\n\n        Scanner newCoordinateInputData = UIAuxiliaryMethods.askUserForInput().getScanner();\n\n        separateCoordinateRows(newCoordinateInputData);\n\n        printCoordinateRows();\n\n    }\n\n\n    public static void main(String[] args) {\n        Locale.setDefault(Locale.US);\n        new Pirate().start();\n    }\n\n}\n</code></pre>\n<p>Here is my CoordinateRow class code:</p>\n<pre><code>public class CoordinateRow {\n\n    static final int MAX_NUMBER_OF_ELEMENTS = 250;\n    //want to create a new row class, that can store up to max 250 elements, but can store lower than this\n\n    Coordinate[] newCoordinateArray;\n    int numberOfElements;\n    \n    \n    CoordinateRow() {\n\n        newCoordinateArray = new Coordinate[MAX_NUMBER_OF_ELEMENTS];\n        numberOfElements = 0;\n        \n    \n}\n\n\nvoid addCoordinateRowBack(CoordinateRow rowOfCoordinates) {\n\n    for(int i = 0; i &lt; rowOfCoordinates.numberOfElements; i++) {\n\n        newCoordinateArray[numberOfElements] = rowOfCoordinates.newCoordinateArray[i];\n\n        numberOfElements++;\n\n\n    }\n\n}\n\n\nvoid addSingleCoordinateToBack(Coordinate singleCoordinate) {\n\n    newCoordinateArray[numberOfElements] = singleCoordinate;\n\n    numberOfElements++;\n\n} \n\n\n\nvoid addCoordinateRowFront(CoordinateRow rowOfCoordinates) {\n    \n    Coordinate[] newArray = new Coordinate[rowOfCoordinates.numberOfElements];\n    \n    for(int i = 0; i &lt; rowOfCoordinates.numberOfElements; i++) {\n        \n        newArray[i] = rowOfCoordinates.newCoordinateArray[rowOfCoordinates.numberOfElements -i - 1];\n    \n    }\n    \n}\n</code></pre>\n<p>}</p>\n<p>This is my Coordinate Class</p>\n<pre><code>package Pirate;\n\npublic class Coordinate {\n\n    static final int COORDINATE_X_TECTONIC_SHIFT = 1;\n    static final int COORDINATE_Y_TECTONIC_SHIFT = 0;\n\n    int coordinateX;\n    int coordinateY;\n\n    Coordinate(int coordinateX, int coordinateY) {\n\n        this.coordinateX = coordinateX + COORDINATE_X_TECTONIC_SHIFT;\n        this.coordinateY = coordinateY + COORDINATE_Y_TECTONIC_SHIFT;\n\n    }\n\n\n}\n</code></pre>\n<p>It seems to be going wrong with my reversal method (addCoordinateRowFront) as my other methods work fine with the last program I tried.</p>\n<p>Not sure why this is the case.</p>\n<p>For clarification, when I use this method for shifting coordinates to the front instead. My program works</p>\n<pre><code>void addCoordinateRowFront(CoordinateRow rowOfCoordinates) {\n\n        for(int j = rowOfCoordinates.numberOfElements; j &gt; 0; j--) {\n\n            for(int i = numberOfElements; i &gt; 0; i--) {\n\n                newCoordinateArray[i] = newCoordinateArray[i-1];\n\n            }\n            newCoordinateArray[0] = rowOfCoordinates.newCoordinateArray[j-1];\n\n            numberOfElements++;\n        }\n\n    }\n\n}\n</code></pre>\n<p>But I would much prefer row reversal to work as I understand it better.</p>\n<p>When I print in my addCordinateRowFront method to see what is going on, this is what I get:</p>\n<pre><code>Pirate.Coordinate@512ddf17\nPirate.Coordinate@2c13da15\nPirate.Coordinate@77556fd\nPirate.Coordinate@368239c8\nPirate.Coordinate@9e89d68\n7, 3\n4, 2\n10, 6\n5, 3\n10, 8\n</code></pre>\n"},{"tags":["java","json","jsonschema"],"answers":[{"tags":[],"owner":{"account_id":4397440,"reputation":365,"user_id":3584022,"accept_rate":44,"display_name":"pl0u"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1479890762,"creation_date":1479890762,"answer_id":40759645,"question_id":40294867,"body_markdown":"looks like there isn&#39;t. I had to write my own generator.","title":"Java: Json schema generator (for string orJSONObject)","body":"<p>looks like there isn't. I had to write my own generator.</p>\n"},{"tags":[],"owner":{"account_id":4329690,"reputation":11412,"user_id":3535537,"accept_rate":78,"display_name":"St&#233;phane GRILLON"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1479891514,"creation_date":1479891514,"answer_id":40759894,"question_id":40294867,"body_markdown":"You can use [GSON][1] library.\r\n\r\n**Convert Java object to JSON:**\r\n\r\n    Gson gson = new Gson();\r\n    Staff obj = new Staff();\r\n    \r\n    // 1. Java object to JSON, and save into a file\r\n    gson.toJson(obj, new FileWriter(&quot;D:\\\\file.json&quot;));\r\n    \r\n    // 2. Java object to JSON, and assign to a String\r\n    String jsonInString = gson.toJson(obj);\r\n\r\n\r\n**Convert JSON to Java object:**\r\n\r\n    Gson gson = new Gson();\r\n    \r\n    // 1. JSON to Java object, read it from a file.\r\n    Staff staff = gson.fromJson(new FileReader(&quot;D:\\\\file.json&quot;), Staff.class);\r\n    \r\n    // 2. JSON to Java object, read it from a Json String.\r\n    String jsonInString = &quot;{&#39;name&#39; : &#39;foo&#39;}&quot;;\r\n    Staff staff = gson.fromJson(jsonInString, Staff.class);\r\n    \r\n    // JSON to JsonElement, convert to String later.\r\n    JsonElement json = gson.fromJson(new FileReader(&quot;D:\\\\file.json&quot;), JsonElement.class);\r\n    String result = gson.toJson(json);\r\n\r\n\r\n  [1]: https://github.com/google/gson","title":"Java: Json schema generator (for string orJSONObject)","body":"<p>You can use <a href=\"https://github.com/google/gson\" rel=\"nofollow noreferrer\">GSON</a> library.</p>\n\n<p><strong>Convert Java object to JSON:</strong></p>\n\n<pre><code>Gson gson = new Gson();\nStaff obj = new Staff();\n\n// 1. Java object to JSON, and save into a file\ngson.toJson(obj, new FileWriter(\"D:\\\\file.json\"));\n\n// 2. Java object to JSON, and assign to a String\nString jsonInString = gson.toJson(obj);\n</code></pre>\n\n<p><strong>Convert JSON to Java object:</strong></p>\n\n<pre><code>Gson gson = new Gson();\n\n// 1. JSON to Java object, read it from a file.\nStaff staff = gson.fromJson(new FileReader(\"D:\\\\file.json\"), Staff.class);\n\n// 2. JSON to Java object, read it from a Json String.\nString jsonInString = \"{'name' : 'foo'}\";\nStaff staff = gson.fromJson(jsonInString, Staff.class);\n\n// JSON to JsonElement, convert to String later.\nJsonElement json = gson.fromJson(new FileReader(\"D:\\\\file.json\"), JsonElement.class);\nString result = gson.toJson(json);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":178013,"reputation":472,"user_id":1795317,"display_name":"Matija Han"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1546553377,"creation_date":1546553377,"answer_id":54030471,"question_id":40294867,"body_markdown":"Yes there is: https://github.com/java-json-tools/json-schema-validator. It ingests Jacson&#39;s `JsonNode` containing the schema definition and can validate JSON data against that schema.","title":"Java: Json schema generator (for string orJSONObject)","body":"<p>Yes there is: <a href=\"https://github.com/java-json-tools/json-schema-validator\" rel=\"nofollow noreferrer\">https://github.com/java-json-tools/json-schema-validator</a>. It ingests Jacson's <code>JsonNode</code> containing the schema definition and can validate JSON data against that schema.</p>\n"}],"owner":{"account_id":4397440,"reputation":365,"user_id":3584022,"accept_rate":44,"display_name":"pl0u"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1747,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1637093253,"creation_date":1477605506,"question_id":40294867,"body_markdown":"Are there any libraries to convert JSON in `String`/`jackson`/`org.JSON.JSONOBJECT`/etc... to a JSON schema?\r\n\r\nSo far, the only generator I found covert Java classes to JSON schemas. I&#39;m about to write my own converted, but it&#39;d be nice if I didn&#39;t have to re-invent the wheel.","title":"Java: Json schema generator (for string orJSONObject)","body":"<p>Are there any libraries to convert JSON in <code>String</code>/<code>jackson</code>/<code>org.JSON.JSONOBJECT</code>/etc... to a JSON schema?</p>\n\n<p>So far, the only generator I found covert Java classes to JSON schemas. I'm about to write my own converted, but it'd be nice if I didn't have to re-invent the wheel.</p>\n"},{"tags":["java","xml","web-services","character-encoding"],"comments":[{"owner":{"account_id":219684,"reputation":37257,"user_id":476716,"accept_rate":77,"display_name":"OrangeDog"},"score":1,"creation_date":1296467205,"post_id":4849387,"comment_id":5385889,"body_markdown":"If you are sending binary data you should not be using xml.","body":"If you are sending binary data you should not be using xml."},{"owner":{"account_id":60290,"reputation":2077,"user_id":180152,"accept_rate":81,"display_name":"jaxb"},"score":1,"creation_date":1296468758,"post_id":4849387,"comment_id":5386153,"body_markdown":"@sarnold : It is decimal, forgot to add information about it.","body":"@sarnold : It is decimal, forgot to add information about it."},{"owner":{"account_id":60290,"reputation":2077,"user_id":180152,"accept_rate":81,"display_name":"jaxb"},"score":1,"creation_date":1296468987,"post_id":4849387,"comment_id":5386190,"body_markdown":"@OrangeDog : I am not sending binary data, I am returning plain text from DB. Don&#39;t know how but its having control char in it.","body":"@OrangeDog : I am not sending binary data, I am returning plain text from DB. Don&#39;t know how but its having control char in it."},{"owner":{"account_id":219684,"reputation":37257,"user_id":476716,"accept_rate":77,"display_name":"OrangeDog"},"score":2,"creation_date":1296475575,"post_id":4849387,"comment_id":5387309,"body_markdown":"Then you need to locate and fix that problem, rather than obscuring the problem in another layer.","body":"Then you need to locate and fix that problem, rather than obscuring the problem in another layer."}],"answers":[{"tags":[],"owner":{"account_id":11089,"reputation":400030,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1296470159,"creation_date":1296470159,"answer_id":4849865,"question_id":4849387,"body_markdown":"This error is being thrown by the Woodstox XML parser. The source code from the `InputBootstrapper` class looks like this:\r\n\r\n\r\n    protected void reportUnexpectedChar(int i, String msg)\r\n        throws WstxException\r\n    {\r\n        char c = (char) i;\r\n        String excMsg;\r\n\r\n        // WTF? JDK thinks null char is just fine as?!\r\n        if (Character.isISOControl(c)) {\r\n            excMsg = &quot;Unexpected character (CTRL-CHAR, code &quot;+i+&quot;)&quot;+msg;\r\n        } else {\r\n            excMsg = &quot;Unexpected character &#39;&quot;+c+&quot;&#39; (code &quot;+i+&quot;)&quot;+msg;\r\n        }\r\n        Location loc = getLocation();\r\n        throw new WstxUnexpectedCharException(excMsg, loc, c);\r\n    }\r\n\r\nAmusing comment aside, the Woodstox is performing some additional validation on top of the JDK parser, and is rejecting the ASCII character `15` as invalid.\r\n\r\nAs to why that character is there, we can&#39;t tell you that, it&#39;s in your data.  Similarly, we can&#39;t tell you if removing that character will break anything, since again, it&#39;s your data. You can only establish that for yourself.\r\n","title":"Illegal character - CTRL-CHAR","body":"<p>This error is being thrown by the Woodstox XML parser. The source code from the <code>InputBootstrapper</code> class looks like this:</p>\n\n<pre><code>protected void reportUnexpectedChar(int i, String msg)\n    throws WstxException\n{\n    char c = (char) i;\n    String excMsg;\n\n    // WTF? JDK thinks null char is just fine as?!\n    if (Character.isISOControl(c)) {\n        excMsg = \"Unexpected character (CTRL-CHAR, code \"+i+\")\"+msg;\n    } else {\n        excMsg = \"Unexpected character '\"+c+\"' (code \"+i+\")\"+msg;\n    }\n    Location loc = getLocation();\n    throw new WstxUnexpectedCharException(excMsg, loc, c);\n}\n</code></pre>\n\n<p>Amusing comment aside, the Woodstox is performing some additional validation on top of the JDK parser, and is rejecting the ASCII character <code>15</code> as invalid.</p>\n\n<p>As to why that character is there, we can't tell you that, it's in your data.  Similarly, we can't tell you if removing that character will break anything, since again, it's your data. You can only establish that for yourself.</p>\n"},{"tags":[],"owner":{"account_id":219684,"reputation":37257,"user_id":476716,"accept_rate":77,"display_name":"OrangeDog"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1296476018,"creation_date":1296476018,"answer_id":4850707,"question_id":4849387,"body_markdown":"If you have control characters in your text data then you need to solve that problem at its source.\r\n\r\nThe most likely causes are incorrect communication encodings (usually between database and app) or not sanitising user input.","title":"Illegal character - CTRL-CHAR","body":"<p>If you have control characters in your text data then you need to solve that problem at its source.</p>\n\n<p>The most likely causes are incorrect communication encodings (usually between database and app) or not sanitising user input.</p>\n"},{"tags":[],"owner":{"account_id":64344,"reputation":8352,"user_id":189992,"accept_rate":95,"display_name":"ssedano"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1569490027,"creation_date":1308567617,"answer_id":6410169,"question_id":4849387,"body_markdown":"I would do what OrangeDog suggest. But if you want to solve it in your code try:\r\n\r\n`replaceAll(&quot;[\\\\x00-\\\\x09\\\\x11\\\\x12\\\\x14-\\\\x1F\\\\x7F]&quot;, &quot;&quot;)`\r\n\r\n\r\n`\\\\x12` is the char.","title":"Illegal character - CTRL-CHAR","body":"<p>I would do what OrangeDog suggest. But if you want to solve it in your code try:</p>\n\n<p><code>replaceAll(\"[\\\\x00-\\\\x09\\\\x11\\\\x12\\\\x14-\\\\x1F\\\\x7F]\", \"\")</code></p>\n\n<p><code>\\\\x12</code> is the char.</p>\n"},{"tags":[],"owner":{"account_id":60290,"reputation":2077,"user_id":180152,"accept_rate":81,"display_name":"jaxb"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1462297902,"creation_date":1329477285,"answer_id":9327211,"question_id":4849387,"body_markdown":"Thanks guys for you inputs. I am sharing solution might be helpful for others. \r\nThe requirement was not to wipe out CONTROL CHAR, it should remain as it is in DB also and one WS sends it across n/w client should able to get the CONTROL CHAR. So I implemented the code as follow:  &lt;br/&gt;\r\n\r\n1. Encode strings using URLEncoder in Web-Service code.  \r\n2. At client Side decode it using URLDecoder  \r\n\r\nSharing sample code and output bellow.  \r\n**Sample code:**  \r\n\r\n    System.out.println(&quot;NewSfn&quot;);  \r\n    System.out.println(URLEncoder.encode(&quot;NewSfn&quot;, &quot;UTF-8&quot;));  \r\n    System.out.println(URLDecoder.decode(&quot;NewSfn&quot;, &quot;UTF-8&quot;));  \r\n\r\n**Output:**  \r\n\r\n    NewSfn  \r\n    New%0FSfn  \r\n    NewSfn \r\n\r\n \r\n\r\nSo client will recieve CONTROL CHARs.\r\n\r\nEDIT: Stack Exchange is not showing CONTROL CHAR above. `NewSfn` is like this `New(CONTROL CHAR)Sfn`.\r\n","title":"Illegal character - CTRL-CHAR","body":"<p>Thanks guys for you inputs. I am sharing solution might be helpful for others. \nThe requirement was not to wipe out CONTROL CHAR, it should remain as it is in DB also and one WS sends it across n/w client should able to get the CONTROL CHAR. So I implemented the code as follow:  <br/></p>\n\n<ol>\n<li>Encode strings using URLEncoder in Web-Service code.  </li>\n<li>At client Side decode it using URLDecoder  </li>\n</ol>\n\n<p>Sharing sample code and output bellow.<br>\n<strong>Sample code:</strong>  </p>\n\n<pre><code>System.out.println(\"NewSfn\");  \nSystem.out.println(URLEncoder.encode(\"NewSfn\", \"UTF-8\"));  \nSystem.out.println(URLDecoder.decode(\"NewSfn\", \"UTF-8\"));  \n</code></pre>\n\n<p><strong>Output:</strong>  </p>\n\n<pre><code>NewSfn  \nNew%0FSfn  \nNewSfn \n</code></pre>\n\n<p>So client will recieve CONTROL CHARs.</p>\n\n<p>EDIT: Stack Exchange is not showing CONTROL CHAR above. <code>NewSfn</code> is like this <code>New(CONTROL CHAR)Sfn</code>.</p>\n"},{"tags":[],"owner":{"account_id":3855429,"reputation":139,"user_id":3838824,"display_name":"colin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1405379986,"creation_date":1405379986,"answer_id":24747582,"question_id":4849387,"body_markdown":"I found the same problem when I was passing null values for some of the parameters. I passed empty or wrench values instead and this error went away.","title":"Illegal character - CTRL-CHAR","body":"<p>I found the same problem when I was passing null values for some of the parameters. I passed empty or wrench values instead and this error went away.</p>\n"},{"tags":[],"owner":{"account_id":3022182,"reputation":9,"user_id":2562934,"display_name":"user2562934"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1543826754,"creation_date":1543826754,"answer_id":53590188,"question_id":4849387,"body_markdown":"I&#39;m a bit confused by @ssedano&#39;s anwser, it seems to me he&#39;s trying to find all control chars from ASCII table 0x00 to 0x1F except for 0x0A (new line) and 0x0D (carriage return) plus 0x7F (del), then wouldn&#39;t ther regex be\r\n\r\n    replaceAll(&quot;[\\\\x00-\\\\x09\\\\x0B\\\\x0C\\\\x0E-\\\\x1F\\\\x7F]&quot;, &quot;&quot;)","title":"Illegal character - CTRL-CHAR","body":"<p>I'm a bit confused by @ssedano's anwser, it seems to me he's trying to find all control chars from ASCII table 0x00 to 0x1F except for 0x0A (new line) and 0x0D (carriage return) plus 0x7F (del), then wouldn't ther regex be</p>\n\n<pre><code>replaceAll(\"[\\\\x00-\\\\x09\\\\x0B\\\\x0C\\\\x0E-\\\\x1F\\\\x7F]\", \"\")\n</code></pre>\n"}],"owner":{"account_id":60290,"reputation":2077,"user_id":180152,"accept_rate":81,"display_name":"jaxb"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73910,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":9327211,"answer_count":6,"score":22,"last_activity_date":1637092904,"creation_date":1296466951,"question_id":4849387,"body_markdown":"I am getting following exception from webservices: \r\n\r\n&gt;com.ctc.wstx.exc.WstxUnexpectedCharException: Illegal character ((CTRL-CHAR, code 15))\r\n\r\nI know the reason behind this, I am getting &quot;Control Characters&quot; in data I want to return. And in XML `CTRL-CHAR` are not allowed.\r\n\r\nI searched for the solution, and many places I found the code to remove `CTRL-CHAR`. \r\n\r\nThe concern is shall I end up loss of data if I remove control characters from data?  \r\nI want the clean solution may encoding, instead of removing control char.\r\n","title":"Illegal character - CTRL-CHAR","body":"<p>I am getting following exception from webservices:</p>\n<blockquote>\n<p>com.ctc.wstx.exc.WstxUnexpectedCharException: Illegal character ((CTRL-CHAR, code 15))</p>\n</blockquote>\n<p>I know the reason behind this, I am getting &quot;Control Characters&quot; in data I want to return. And in XML <code>CTRL-CHAR</code> are not allowed.</p>\n<p>I searched for the solution, and many places I found the code to remove <code>CTRL-CHAR</code>.</p>\n<p>The concern is shall I end up loss of data if I remove control characters from data?<br />\nI want the clean solution may encoding, instead of removing control char.</p>\n"},{"tags":["java","json","hadoop","jackson","marshalling"],"comments":[{"owner":{"account_id":2652155,"reputation":28560,"user_id":2293534,"accept_rate":75,"display_name":"SkyWalker"},"score":0,"creation_date":1462191988,"post_id":24832614,"comment_id":61519710,"body_markdown":"Use okhttp 1.5.1. Hope it will solve your issue.","body":"Use okhttp 1.5.1. Hope it will solve your issue."},{"owner":{"account_id":3645671,"reputation":1586,"user_id":3038736,"display_name":"sagneta"},"score":1,"creation_date":1462369437,"post_id":24832614,"comment_id":61609123,"body_markdown":"I realize you said you don&#39;t have easy access but I suggest front-ending the crawl and removing spurious control characters like 0 (NULL) from the stream and then pass it to jackson. I have seen financial feeds for various securities have spurious data like this that always needs to be culled. It is most likely a defect on the sending side.","body":"I realize you said you don&#39;t have easy access but I suggest front-ending the crawl and removing spurious control characters like 0 (NULL) from the stream and then pass it to jackson. I have seen financial feeds for various securities have spurious data like this that always needs to be culled. It is most likely a defect on the sending side."},{"owner":{"account_id":23674,"reputation":114076,"user_id":59501,"accept_rate":75,"display_name":"StaxMan"},"score":0,"creation_date":1462388580,"post_id":24832614,"comment_id":61622166,"body_markdown":"At low level something is injecting null bytes (byte 0) into stream, and parser does not accept those (they are invalid for JSON). You need to figure out how and why this happens; it could be many things including concurrency issues, or timing (trying to parse content before it&#39;s loaded into buffer).","body":"At low level something is injecting null bytes (byte 0) into stream, and parser does not accept those (they are invalid for JSON). You need to figure out how and why this happens; it could be many things including concurrency issues, or timing (trying to parse content before it&#39;s loaded into buffer)."},{"owner":{"account_id":1057328,"reputation":1255,"user_id":1059744,"accept_rate":71,"display_name":"Haris Osmanagić"},"score":1,"creation_date":1488368029,"post_id":24832614,"comment_id":72196926,"body_markdown":"If possible, add a few log lines, so that you can see which records exactly are failing. Also, since you are crawling data, you might be having the same problem as here (GZip encoding): http://stackoverflow.com/questions/8091524/how-to-parse-an-application-json-object-into-a-string","body":"If possible, add a few log lines, so that you can see which records exactly are failing. Also, since you are crawling data, you might be having the same problem as here (GZip encoding): <a href=\"http://stackoverflow.com/questions/8091524/how-to-parse-an-application-json-object-into-a-string\" title=\"how to parse an application json object into a string\">stackoverflow.com/questions/8091524/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1947302,"reputation":446,"user_id":1752132,"display_name":"Abdul Rahman"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637092817,"creation_date":1488449545,"answer_id":42552503,"question_id":24832614,"body_markdown":" - You can use [`StringUtils`][1] from Apache Commons library to escape\r\n   the string.\r\n - Or you can replace selectively the *control characters* from the\r\n   string before JSON marshaling.\r\n\r\nYou can also refer to this post: \r\nhttps://stackoverflow.com/questions/4849387/illegal-character-ctrl-char?rq=1\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/src-html/org/apache/commons/lang/StringEscapeUtils.html#line.89","title":"Strange Jackson Illegal character ((CTRL-CHAR, code 0)) Exception in Map Reduce Combiner","body":"<ul>\n<li>You can use <a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/src-html/org/apache/commons/lang/StringEscapeUtils.html#line.89\" rel=\"nofollow noreferrer\"><code>StringUtils</code></a> from Apache Commons library to escape\nthe string.</li>\n<li>Or you can replace selectively the <em>control characters</em> from the\nstring before JSON marshaling.</li>\n</ul>\n<p>You can also refer to this post:\n<a href=\"https://stackoverflow.com/questions/4849387/illegal-character-ctrl-char?rq=1\">Illegal character - CTRL-CHAR</a></p>\n"},{"tags":[],"owner":{"account_id":14653287,"reputation":1,"user_id":10586442,"display_name":"fimakoff"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635421382,"creation_date":1635421382,"answer_id":69753473,"question_id":24832614,"body_markdown":"I am getting a UTF-16 encoded response and after each simple character in the byte[] there is a ((CTRL-CHAR, code 0)) [see screen][1].\r\n\r\nit work for me:\r\n\r\n    StringUtils.toEncodedString(responseBodyAsByteArray, StandardCharsets.UTF_16LE)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BmxbD.png","title":"Strange Jackson Illegal character ((CTRL-CHAR, code 0)) Exception in Map Reduce Combiner","body":"<p>I am getting a UTF-16 encoded response and after each simple character in the byte[] there is a ((CTRL-CHAR, code 0)) <a href=\"https://i.stack.imgur.com/BmxbD.png\" rel=\"nofollow noreferrer\">see screen</a>.</p>\n<p>it work for me:</p>\n<pre><code>StringUtils.toEncodedString(responseBodyAsByteArray, StandardCharsets.UTF_16LE)\n</code></pre>\n"}],"owner":{"account_id":4658322,"reputation":289,"user_id":3773235,"accept_rate":62,"display_name":"mle"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25103,"favorite_count":0,"down_vote_count":1,"up_vote_count":24,"answer_count":2,"score":23,"last_activity_date":1637092817,"creation_date":1405712553,"question_id":24832614,"body_markdown":"I have a Map-Reduce job with a mapper which takes a record and converts it into an object, an instance of MyObject, which is marshalled to JSON using Jackson.  The value is just another Text field in the record.\r\n\r\nThe relevant piece of the mapper is something like the following:\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    MyObject val = new MyObject();\r\n    val.setA(stringA);\r\n    val.setB(stringB);\r\n    Writer strWriter = new StringWriter();\r\n    mapper.writeValue(strWriter, val);\r\n    key.set(strWriter.toString());\r\n\r\nThe outputs of the mapper are sent to a Combiner which unmarshalls the JSON object and aggregates key-value pairs.  It is conceptually very simple and is something like:\r\n\r\n    public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context cxt) \r\n    \tthrows IOException, InterruptedException {\r\n    \tint count = 0;\r\n    \tTermIndex x = _mapper.readValue(key.toString(), MyObject.class);\r\n        for (IntWritable int : values) ++count;\r\n        ...\r\n        emit (key, value)\r\n    }\r\n\r\nThe MyObject class consists of two fields (both strings), get/set methods and a default constructor.  One of the fields stores snippets of text based on a web crawl, but is always a string.\r\n\r\n    public class MyObject {\r\n\t  private String A;\r\n\t  private String B;\r\n\r\n\t  public MyObject() {}\r\n\t\r\n\t  public String getA() {\r\n\t   \treturn A;\r\n\t  }\r\n\t  public void setA(String A) {\r\n\t\tthis.A = A;\r\n\t  }\r\n\t  public String getB() {\r\n\t\treturn B;\r\n\t  } \r\n\t  public void setIdx(String B) {\r\n\t\tthis.B = B;\r\n\t  }\r\n    }\r\n\r\nMy MapReduce job appears to be running fine until it reaches certain records, which I cannot easily access (because the mapper is generating the records from a crawl), and the following exception is being thrown:\r\n\r\n    Error: com.fasterxml.jackson.core.JsonParseException: \r\n    \r\n        Illegal character ((CTRL-CHAR, code 0)): only regular white space (\\r, \\n, \\t) is allowed between tokens\r\n         at [Source: java.io.StringReader@5ae2bee7; line: 1, column: 3]\r\n\r\nWould anyone have any suggestions about the cause of this?\r\n\r\n","title":"Strange Jackson Illegal character ((CTRL-CHAR, code 0)) Exception in Map Reduce Combiner","body":"<p>I have a Map-Reduce job with a mapper which takes a record and converts it into an object, an instance of MyObject, which is marshalled to JSON using Jackson.  The value is just another Text field in the record.</p>\n\n<p>The relevant piece of the mapper is something like the following:</p>\n\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nMyObject val = new MyObject();\nval.setA(stringA);\nval.setB(stringB);\nWriter strWriter = new StringWriter();\nmapper.writeValue(strWriter, val);\nkey.set(strWriter.toString());\n</code></pre>\n\n<p>The outputs of the mapper are sent to a Combiner which unmarshalls the JSON object and aggregates key-value pairs.  It is conceptually very simple and is something like:</p>\n\n<pre><code>public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context cxt) \n    throws IOException, InterruptedException {\n    int count = 0;\n    TermIndex x = _mapper.readValue(key.toString(), MyObject.class);\n    for (IntWritable int : values) ++count;\n    ...\n    emit (key, value)\n}\n</code></pre>\n\n<p>The MyObject class consists of two fields (both strings), get/set methods and a default constructor.  One of the fields stores snippets of text based on a web crawl, but is always a string.</p>\n\n<pre><code>public class MyObject {\n  private String A;\n  private String B;\n\n  public MyObject() {}\n\n  public String getA() {\n    return A;\n  }\n  public void setA(String A) {\n    this.A = A;\n  }\n  public String getB() {\n    return B;\n  } \n  public void setIdx(String B) {\n    this.B = B;\n  }\n}\n</code></pre>\n\n<p>My MapReduce job appears to be running fine until it reaches certain records, which I cannot easily access (because the mapper is generating the records from a crawl), and the following exception is being thrown:</p>\n\n<pre><code>Error: com.fasterxml.jackson.core.JsonParseException: \n\n    Illegal character ((CTRL-CHAR, code 0)): only regular white space (\\r, \\n, \\t) is allowed between tokens\n     at [Source: java.io.StringReader@5ae2bee7; line: 1, column: 3]\n</code></pre>\n\n<p>Would anyone have any suggestions about the cause of this?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8148,"page":1844,"page_size":100}
